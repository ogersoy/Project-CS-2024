# Foreword
This Technical Specification has been produced by the 3rd Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
In the present document, modal verbs have the following meanings:
**shall** indicates a mandatory requirement to do something
**shall not** indicates an interdiction (prohibition) to do something
The constructions \"shall\" and \"shall not\" are confined to the context of
normative provisions, and do not appear in Technical Reports.
The constructions \"must\" and \"must not\" are not used as substitutes for
\"shall\" and \"shall not\". Their use is avoided insofar as possible, and
they are not used in a normative context except in a direct citation from an
external, referenced, non-3GPP document, or so as to maintain continuity of
style when extending or modifying the provisions of such a referenced
document.
**should** indicates a recommendation to do something
**should not** indicates a recommendation not to do something
**may** indicates permission to do something
**need not** indicates permission not to do something
The construction \"may not\" is ambiguous and is not used in normative
elements. The unambiguous constructions \"might not\" or \"shall not\" are
used instead, depending upon the meaning intended.
**can** indicates that something is possible
**cannot** indicates that something is impossible
The constructions \"can\" and \"cannot\" are not substitutes for \"may\" and
\"need not\".
**will** indicates that something is certain or expected to happen as a result
of action taken by an agency the behaviour of which is outside the scope of
the present document
**will not** indicates that something is certain or expected not to happen as
a result of action taken by an agency the behaviour of which is outside the
scope of the present document
**might** indicates a likelihood that something will happen as a result of
action taken by some agency the behaviour of which is outside the scope of the
present document
**might not** indicates a likelihood that something will not happen as a
result of action taken by some agency the behaviour of which is outside the
scope of the present document
In addition:
**is** (or any other verb in the indicative mood) indicates a statement of
fact
**is not** (or any other negative verb in the indicative mood) indicates a
statement of fact
The constructions \"is\" and \"is not\" do not indicate requirements.
# 1 Scope
The present document specifies the stage 3 protocol and data model for the
Access and Mobility Policy Authorization service (Npcf_AMPolicyAuthorization)
of the 5G System.
The 5G System stage 2 architecture of the Access and Mobility Policy
Authorization service are contained in 3GPP TS 23.502 [3] and 3GPP TS 23.503
[14]. The 5G System Architecture is defined in 3GPP TS 23.501 [2].
Stage 3 call flows for policy and charging control use cases are provided in
3GPP TS 29.513 [15].
The Technical Realization of the Service Based Architecture and the Principles
and Guidelines for Services Definition are specified in 3GPP TS 29.500 [4] and
3GPP TS 29.501 [5].
The Access and Mobility Policy Authorization service is provided by the Policy
Control Function (PCF). This service creates access and mobility policies
(e.g. service area restrictions, or access stratum time distribution
information) as requested by an authorized NF service consumer (e.g. AF, NEF,
or TSCTSF) for the Access and Mobility Policy Context to which the related NF
service consumer\'s context (e.g. AF, NEF, or TSCTSF) is bound. This service
also enables subscription/notifications on UE 5G ProSe Policy event(s) related
to the UE context to which the NF service consumer\'s context (e.g. 5G DDNMF)
is bound.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 23.501: \"System Architecture for the 5G System; Stage 2\".
[3] 3GPP TS 23.502: \"Procedures for the 5G System; Stage 2\".
[4] 3GPP TS 29.500: \"5G System; Technical Realization of Service Based
Architecture; Stage 3\".
[5] 3GPP TS 29.501: \"5G System; Principles and Guidelines for Services
Definition; Stage 3\".
[6] OpenAPI: \"OpenAPI Specification Version 3.0.0\",
https://spec.openapis.org/oas/v3.0.0.
[7] 3GPP TR 21.900: \"Technical Specification Group working methods\".
[8] 3GPP TS 33.501: \"Security architecture and procedures for 5G system\".
[9] IETF RFC 6749: \"The OAuth 2.0 Authorization Framework\".
[10] 3GPP TS 29.510: \"5G System; Network Function Repository Services; Stage
3\".
[11] IETF RFC 7540: \"Hypertext Transfer Protocol Version 2 (HTTP/2)\".
> [12] IETF RFC 8259: \"The JavaScript Object Notation (JSON) Data Interchange
> Format\".
[13] IETF RFC 7807: \"Problem Details for HTTP APIs\".
[14] 3GPP TS 23.503: \"Policy and Charging Control Framework for the 5G
System; Stage 2\".
[15] 3GPP TS 29.513: \"5G System; Policy and Charging Control signalling flows
and QoS parameter mapping; Stage 3\".
[16] 3GPP TS 29.507: \"5G System; Access and Mobility Policy Control Service;
Stage 3\".
[17] 3GPP TS 29.514: \"5G System; Policy Authorization Service; Stage 3\".
[18] IETF RFC 7396: \"JSON Merge Patch\".
[19] IETF RFC 3986: \"Uniform Resource Identifier (URI): Generic Syntax\".
[20] 3GPP TS 29.571: \"5G System; Common Data Types for Service Based
Interfaces; Stage 3\".
[21] 3GPP TS 29.508: \"5G System; Session Management Event Exposure Service;
Stage 3\".
[22] 3GPP TS 23.304: \"Proximity based Services (ProSe) in the 5G System
(5GS)\".
[23] 3GPP TS 24.555: \"Proximity-services (ProSe) in 5G System (5GS); User
Equipment (UE) policies; Stage 3\".
[24] 3GPP TS 29.555: \"5G System; 5G Direct Discovery Name Management
Services; Stage 3\".
[25] 3GPP TS 29.565: \"5G System; Time Sensitive Communication and Time
Synchronization Function Services; Stage 3\".
# 3 Definitions, symbols and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
3GPP TR 21.905 [1] and the following apply. A term defined in the present
document takes precedence over the definition of the same term, if any, in
3GPP TR 21.905 [1].
**Application Function (AF)** : Element acting on behalf of applications(s)
that require the control of the Access and Mobility context of a UE, which can
in turn lead to e.g. Service Area Restrictions and/or RFSP changes.
**AF application AM context:** Information about the capabilities that an AF
application requires from the access network for a registered UE. It is
established by the AF before or during the use of the service that requires
it.
**NF service consumer AM context:** Information about the capabilities that a
NF service consumer requires from the access network for a registered UE.
## 3.2 Symbols
None.
## 3.3 Abbreviations
For the purposes of the present document, the abbreviations given in 3GPP TR
21.905 [1] and the following apply. An abbreviation defined in the present
document takes precedence over the definition of the same abbreviation, if
any, in 3GPP TR 21.905 [1].
5G DDNMF 5G Direct Discovery Name Management Function
AF Application Function
AMF Access and Mobility Management Function
JSON JavaScript Object Notation
NEF Network Exposure Function
NF Network Function
PCF Policy Control Function
PDUID ProSe Discovery UE ID
ProSe Proximity Services
RFSP RAT Frequency Selection Priority
SMF Session Management Function
TSCTSF Time Sensitive Communication and Time Synchronization Function
# 4 Npcf_AMPolicyAuthorization Service
## 4.1 Service Description
### 4.1.1 Overview
The Npcf_AMPolicyAuthorization service, as defined in 3GPP TS 23.502 [3] and
3GPP TS 23.503 [14], is provided by the Policy Control Function (PCF) and
enables an authorized NF service consumer to influence access and mobility
policies for a UE and to subscribe to notifications on UE 5G ProSe Policy
event(s).
The Npcf_AMPolicyAuthorization service enables to authorize a NF service
consumer\'s request and create/update the associated access and mobility
policies as requested by the authorized NF service consumer for the Access and
Mobility policy association to which the NF service consumer AM context (e.g.
the AF application AM context) is bound.
This service also allows the NF service consumer to subscribe/unsubscribe to
notifications on AM Policy event(s) (e.g. service area restrictions policy
change) and to subscribe/unsubscribe to notifications on UE 5G ProSe Policy
event(s) (e.g. PDUID change event).
### 4.1.2 Service Architecture
The 5G System Architecture is defined in 3GPP TS 23.501 [2]. The Policy and
Charging control related 5G architecture is also defined in 3GPP TS 23.503
[14] and 3GPP TS 29.513 [15].
The known NF service consumers of the Npcf_AMPolicyAuthorization service are
the Application Function (AF), the Network Exposure Function (NEF), the 5G
Direct Discovery Name Management Function (5G DDNMF) and the Time Sensitive
Communication and Time Synchronization Function (TSCTSF).
The Npcf_AMPolicyAuthorization service is provided by the PCF and consumed by
the NF service consumers (e.g. AF, NEF), as shown in figure 4.1.2-1 for the
SBI representation model and in figure 4.1.2-2 for the reference point
representation model.
Figure 4.1.2-1: Npcf_AMPolicyAuthorization service architecture, SBI
representation
Figure 4.1.2-2: Npcf_AMPolicyAuthorization service architecture, reference
point representation
In the case of an Untrusted AF, i.e. when the AF interacts with the PCF via
the NEF, the NEF may interact with the PCF via the N30 reference point in the
same way that the AF interacts with the PCF via the N5 reference point.
### 4.1.3 Network Functions
#### 4.1.3.1 Policy Control Function (PCF)
The PCF (Policy Control Function) is a functional element that encompasses,
among other functionalities, access and mobility policy decisions for the
control of e.g. the UE Service Area Restrictions and RAT/RFSP control, and the
delivery of UE Policies (e.g. UE 5G ProSe Policies) to the UE.
The PCF receives from a NF service consumer (e.g. AF, NEF) access and mobility
service requirements related to a registered UE and notifies it about the
outcome of the requested access and mobility policy changes, if applicable, if
the NF service consumer previously subscribed, via the
Npcf_AMPolicyAuthorization service.
The PCF derives access and mobility policies and provisions them to the AMF
via the Npcf_AMPolicyControl as described in 3GPP TS 29.507 [16].
When the PCF that handles the AM Policy Associations (PCF for the UE) is
different from the PCF that handles the SM Policy Associations (PCF for the
PDU session) for a UE, the PCF subscribes to application traffic detection
event(s) using the Npcf_PolicyAuthorization service as described in 3GPP TS
29.514 [17].
The PCF receives from a NF service consumer (e.g. 5G DDNMF) subscriptions to
notifications on events related to the delivered UE 5G ProSe Policies for a
SUPI.
#### 4.1.3.2 NF Service Consumers
The known NF service consumers are the AF, the NEF, the 5G DDNMF, and the
TSCTSF as defined in 3GPP TS 23.502 [3].
The Application Function (AF) is a network function offering, among other
functionalities, control to applications for the dynamic change of access and
mobility policies for a registered UE. The AF uses the
Npcf_AMPolicyAuthorization service to provide to the PCF service information
related to the required access and mobility context (e.g. access and mobility
required policies) for the concerned service(s).
The AFs can be deployed by the same operator offering the access services or
be provided by an external third-party service provider. If the AF is not
allowed by the operator to directly access the PCF, the AF uses the 3GPP
external network exposure framework via the NEF to interact with the PCF, as
described in clause 5.20 of 3GPP TS 23.501 [2].
The Network Exposure Function (NEF) supports external exposure of the
capabilities of 5GC network functions.
The 5G DDNMF is a network function that handles the network related actions
required for dynamic 5G ProSe Direct Discovery, as defined in 3GPP TS 23.304
[22].
The AF trusted by the operator, or the NEF can use the TSCTSF to interface
with the PCF to support the delivery of access stratum time distribution
information to the AMF as defined in 3GPP TS 29.565 [25].
## 4.2 Service Operations
### 4.2.1 Introduction
Service operations defined for the Npcf_AMPolicyAuthorization service are
shown in table 4.2.1-1.
Table 4.2.1-1: Npcf_AMPolicyAuthorization Service Operations
Service Operation Name Description Initiated by
* * *
Npcf_AMPolicyAuthorization_Create Creates an AF application AM context in the
PCF as per request from an authorized NF service consumer, and determines and
installs the access and mobility policy according to the service information
provided by the NF service consumer. It also allows the subscription to event
notifications. NF service consumer (e.g. AF, NEF, TSCTSF)
Npcf_AMPolicyAuthorization_Update Updates the AF application AM context in the
PCF as per request from an authorized NF service consumer, and determines and
updates the access and mobility policy according to the modified service
information provided by the NF service consumer. It also allows the update of
the associated subscription to event notifications. NF service consumer (e.g.
AF, NEF, TSCTSF) Npcf_AMPolicyAuthorization_Delete Provides means to the
concerned NF service consumer to delete the AF application AM context in the
PCF. NF service consumer (e.g. AF, NEF, TSCTSF)
Npcf_AMPolicyAuthorization_Subscribe Allows NF service consumers to subscribe
to event notifications. NF service consumer (e.g. AF, NEF, 5G DDNMF)
Npcf_AMPolicyAuthorization_Unsubscribe Allows NF service consumers to
unsubscribe from event notifications. NF service consumer (e.g. AF, NEF, 5G
DDNMF) Npcf_AMPolicyAuthorization_Notify Notifies NF service consumers of the
subscribed events. PCF
NOTE 1: The NEF and the AF use the Npcf_AMPolicyAuthorization service in the
same way.
NOTE 2: The 5G DDNMF only uses the Npcf_AMPolicyAuthorization subscribe,
unsubscribe and notify service operations.
NOTE 3: The TSCTSF only uses the Npcf_AMPolicyAuthorization create, update and
delete service operations.
### 4.2.2 Npcf_AMPolicyAuthorization_Create service operation
#### 4.2.2.1 General
The Npcf_AMPolicyAuthorization_Create service operation authorizes the request
from the NF service consumer, and optionally communicates with
Npcf_AMPolicyControl service to determine and install in the AMF the access
and mobility policies according to the information provided by the NF service
consumer.
The Npcf_AMPolicyAuthorization_Create service operation creates a NF service
consumer related AM context in the PCF.
The following procedures using the Npcf_AMPolicyAuthorization_Create service
operation are supported:
\- Initial provisioning of access and mobility related service information.
\- Creation of the subscription to service area coverage change outcome.
#### 4.2.2.2 Initial provisioning of access and mobility related service
information
This procedure is used to set up an NF service consumer AM context (e.g. an AF
application AM context) for the service as defined in 3GPP TS 23.501 [2], 3GPP
TS 23.502 [3] and 3GPP TS 23.503 [14].
Figure 4.2.2.2-1 illustrates the initial provisioning of service information
for the AM context.
Figure 4.2.2.2-1: Initial provisioning of service information for the AM
context
When a NF service consumer requires an AM context is being established in the
5GS and the related access and mobility requirements are available at the NF
service consumer, the NF service consumer shall invoke the
Npcf_AMPolicyAuthorization_Create service operation by sending the HTTP POST
request to the resource URI representing the \"Application AM contexts\"
collection resource of the PCF, as shown in figure 4.2.2.2-1, step 1.
The NF service consumer shall include in the \"AppAmContextData\" data type in
the payload body of the HTTP POST request a partial representation of the
\"Individual Application AM Context\" resource, that shall include:
\- the notification URI where the PCF requests to the NF service consumer the
termination of the application AM context encoded as \"termNotifUri\"
attribute;
\- the SUPI of the UE to which the AF requested policy shall apply encoded as
\"supi\" attribute;
\- when the NF service consumer is the NEF or the AF:
a. the indication that high throughput policy is desired for the indicated UE
encoded as \"highThruInd\" attribute; and/or
b. the service area coverage desired for the indicated UE encoded as
\"covReq\" attribute, that contains a list of Tracking Area codes per serving
network where the requested service shall be allowed;
\- when the NF service consumer is the TSCTSF:
a. the access stratum time distribution parameters (5G access stratum time
distribution indication (enable, disable), and/or Uu time synchronization
error budget,, and optionally the clock quality detail level as
\"clkQltDetLvl\" attribute and the clock quality acceptance criteria as
\"clkQltAcptCri\" attribute if the feature \"NetTimeSyncStatus\" is supported)
encoded as \"asTimeDisParam\" attribute.In the \"AppAmContextData\" data type
in the payload body of the HTTP POST request the NF service consumer may
include, when the NF service consumer is the NEF or the AF:
\- the GPSI of the UE encoded as \"gpsi\" attribute; and/or
\- the expiration time of the AF requested policy encoded as \"expiry\"
attribute.
The NF service consumer may also include the \"evSubsc\" attribute of
\"AmEventsSubscData\" data type to request the notification of access and
mobility policy changes events. The NF service consumer shall include within
the \"evSubsc\" attribute:
\- the notification URI where the NF service consumer receives the events
notification encoded as \"eventNotifUri\" attribute; and
\- the events to subscribe to in the \"events\" attribute. For each subscribed
event in the \"events\" attribute, the NF service consumer shall include the
event identifier within the \"event\" attribute and may include the
description of the event reporting mode as specified in clause 4.2.5.2.
The events subscription data is provisioned in the \"AM Policy Events
Subscription\" sub-resource.
The NF service consumer may include within the \"evSubsc\" attribute specific
per event subscription information, if applicable, and as described in clause
4.2.2.3.
If the PCF cannot successfully fulfil the received HTTP POST request due to
the internal PCF error or due to the error in the HTTP POST request, the PCF
shall send the HTTP error response as specified in clause 5.7.
Otherwise, when the PCF receives the HTTP POST request from the NF service
consumer, the PCF shall bind the Individual application AM context to the
concerned AM policy association. The PCF identifies the AM policy association
for which the HTTP POST request applies with the SUPI provided in the \"supi\"
attribute within the body of the HTTP POST request:
If the PCF fails in executing the binding with the AM policy association, the
PCF shall reject the HTTP POST request with an HTTP \"500 Internal Server
Error\" response and may include the \"cause\" attribute set to
\"POLICY_ASSOCIATION_NOT_AVAILABLE\".
The PCF shall check whether the received access and mobility related service
information requires access and mobility policies to be created and
provisioned in the AMF. Provisioning of access and mobility policies shall be
carried out as specified at 3GPP TS 29.507 [16].
If the PCF created an \"Individual Application AM Context\" resource, the PCF
shall send to the NF service consumer a \"201 Created\" response to the HTTP
POST request, as shown in figure 4.2.2.2-1, step 2. The PCF shall include in
the \"201 Created\" response:
\- a Location header field; and
\- an \"AppAmContextRespData\" data type in the payload body.
The Location header field shall contain the URI of the created Individual
application AM context resource i.e. \"{apiRoot}/npcf-am-
policyauthorization/\/app-am-contexts/{appAmContextId}\".
The \"AppAmContextRespData\" data type payload body shall contain the
representation of the created \"Individual application AM context\" resource
within the \"AppAmContextData\" data type. When the request included event
subscription information:
\- the \"AppAmContextData\" data type shall also include the \"AM Policy
Events Subscription\" sub-resource representation within the \"evSubsc\"
attribute; and
\- when the NF service consumer requested the immediate reporting and the
current value is available, the \"AppAmContextRespData\" data type shall
include the corresponding event(s) notification, encoding the event identifier
within the \"repEvents\" attribute and the applicable event(s) information as
specified within the \"AmEventsNotification\" data type.
The acknowledgement towards the NF service consumer should take place before
or in parallel with any required access and mobility policy provisioning
towards the AMF.
NOTE: The behaviour when the NF service consumer does not receive the HTTP
response message, or when it arrives after the internal timer waiting for it
has expired, or when it arrives with an indication different than a success
indication, are outside the scope of this specification and is based on
operator policy.
#### 4.2.2.3 Creation of the subscription to service area coverage change
outcome
This procedure is used by a NF service consumer to subscribe to notifications
about whether the requested service area coverage provided in the access and
mobility service information has been provisioned as the corresponding Service
Area Restrictions to the AMF or cannot be provisioned to the AMF. This
procedure also enables the subscription to notifications about subsequent
changes on the service area coverage result of changes of the provisioned
Service Area Restrictions (e.g. due to changes in the subscribed Service Area
Restrictions).
To request to the PCF to provide a notification when a service area coverage
(which may be same or different service area coverage from the service area
coverage provided by the NF service consumer) has been determined (and the
related policy for Service Area Restrictions is applied) based on the request
or when a service area coverage cannot be determined and, additionally, when
the service area coverage subsequently changes within the AM Policy
Association, the NF service consumer shall provide in the HTTP POST request
message described in clause 4.2.2.2 the \"evSubsc\" attribute including an
event entry within the \"events\" attribute with the \"event\" attribute set
to \"SAC_CH\" and the \"notifMethod\" set to \"ON_EVENT_DETECTION\" (or
omitted).
The PCF shall reply to the NF service consumer as described in clause 4.2.2.2.
When the service area coverage change event is met in the PCF, the PCF
notifies to the NF service consumer as described in clause 4.2.7.4.
### 4.2.3 Npcf_AMPolicyAuthorization_Update service operation
#### 4.2.3.1 General
The Npcf_AMPolicyAuthorization_Update service operation provides updated
application level information from the NF service consumer and optionally
communicates with the Npcf_AMPolicyControl service to determine and install
the access and mobility policies according to the information provided by the
NF service consumer.
The Npcf_AMPolicyAuthorization_Update service operation updates an AF
application AM context in the PCF.
The following procedures using the Npcf_AMPolicyAuthorization_Update service
operation are supported:
\- Modification of AM related service information.
\- Modification of the subscription to service area coverage change outcome.
#### 4.2.3.2 Modification of AM related service information
This procedure is used to modify an existing AF application AM context as
defined in 3GPP TS 23.501 [2], 3GPP TS 23.502 [3] and 3GPP TS 23.503 [14].
Figure 4.2.3.2-1 illustrates the modification of access and mobility service
information using HTTP PATCH method.
Figure 4.2.3.2-1: Modification of access and mobility service information
using HTTP PATCH
The NF service consumer may modify the AF application AM context information
at any time (e.g. due to an AF application AM context modification or an
internal NF service consumer trigger) and invoke the
Npcf_AMPolicyAuthorization_Update service operation by sending an HTTP PATCH
request message to the resource URI representing the concerned \"Individual
application AM context\" resource, as shown in figure 4.2.3.2-1, step 1, with
the modifications to apply.
The JSON body within the PATCH request shall include the
\"AppAmContextUpdateData\" data type and shall be encoded according to \"JSON
Merge Patch\", as defined in IETF RFC 7396 [18].
The NF service consumer may create, modify or remove access and mobility
service information by including updated values within the
\"AppAmContextUpdateData\" data type as follows:
\- the NF service consumer may update the \"termNotifUri\" attribute, to
request that subsequent termination notifications are sent to a new NF service
consumer;
\- the NF service consumer may create or update the previously provided access
and mobility service information, e.g. when the NF service consumer is the
AF/NEF, expiration time, high throughput indication and/or service area
coverage information, or, when the NF service consumer is the TSCTSF, 5G
access stratum time distribution indication (enable, disable), and/or Uu time
synchronization error budget, and optionally the clock quality detail level as
\"clkQltDetLvl\" attribute and the clock quality acceptance criteria as
\"clkQltAcptCri\" attribute if the feature \"NetTimeSyncStatus\" is supported
(see clause 4.2.2.2); and- the NF service consumer may delete the previously
provided attribute(s), e.g. when the NF service consumer is the AF/NEF,
expiration time, high throughput indication and/or service area coverage
information, or, when the NF service consumer is the TSCTSF, Uu time
synchronization error budget, by setting them to null value, to indicate that
the previously provided access and mobility service information no longer
applies.
The NF service consumer may also create, modify or remove events subscription
information by sending an HTTP PATCH request message to the resource URI
representing the concerned \"Individual application AM context\" resource.
The NF service consumer shall create event subscription information by
including the \"evSubsc\" attribute of \"AmEventsSubscDataRm\" data type with
the corresponding list of events to subscribe to within the \"events\"
attribute, and the callback URI where to receive the event notifications
within the \"eventNotifUri\" attribute. For each subscribed event in the
\"events\" attribute, the NF service consumer shall include the event
identifier within the \"event\" attribute and may include the description of
the event reporting mode as specified in clause 4.2.5.2.
The NF service consumer shall update existing event subscription information
by including an updated value of the \"evSubsc\" attribute of the
\"AmEventsSubscDataRm\" data type as follows:
\- the \"eventNotifUri\" attribute may include an updated value of the
callback URI;
\- the \"events\" attribute shall include the new complete list of subscribed
events; and
NOTE: When the NF service consumer requests to remove an event, this event is
not included in the \"events\" attribute.
\- the per specific event subscription information is included/removed, if
applicable, and as described in clause 4.2.3.3.
The NF service consumer shall remove existing event subscription information
by setting to null the \"evSubsc\" attribute.
If the service information provided in the body of the HTTP PATCH request is
rejected because the requested policy for the AM context is invalid or
insufficient for the PCF to perform the requested action because the service
area coverage and/or high throughput policies present in the request result in
an Individual application AM context without service area coverage and high
throughput requested policies, or the request indicates the deletion of the 5G
access stratum time distribution parameters resulting in an Individual
application AM context without 5G access stratum time distribution and Uu time
synchronization error budget requested policies, the PCF may indicate in an
HTTP \"400 Bad Request\" response message the cause for the rejection
including the \"cause\" attribute set to \"INVALID_POLICY_REQUEST\".
If the PCF cannot successfully fulfil the received HTTP PATCH request due to
the internal PCF error or due to the error in the HTTP PATCH request, the PCF
shall send the HTTP error response as specified in clause 5.7.
If the PCF determines the received HTTP PATCH request needs to be redirected,
the PCF shall send an HTTP redirect response as specified in clause 6.10.9 of
3GPP TS 29.500 [4].
If the request is accepted, the PCF shall update the AM related service
information with the new information received and/or update the associated AM
events subscription. Due to the updated service information and/or AM events
subscription, the PCF may need to create, modify or delete the related access
and mobility policies and provide the updated information towards the AMF
following the corresponding procedures specified in 3GPP TS 29.507 [16].
The PCF shall reply to the NF service consumer with an HTTP \"200 OK\"
response message and include the \"AppAmContextRespData\" data type payload
body which shall include:
\- the representation of the modified \"Individual Application AM Context\"
resource within the \"AppAmContextData\" data type; and
\- when the request included the creation or the update of the subscription to
notification event(s):
a) the representation of the \"AM Policy Events Subscription\" sub-resource
within the \"evSubsc\" attribute included in the \"AppAmContextData\" data
type; and
b) when the NF service consumer requested the immediate reporting of the new
subscribed event(s) and the current value(s) is available,
\"AppAmContextRespData\" data type shall include the corresponding event(s)
notification encoding the event identifier within \"repEvents\" attribute and
the applicable event(s) information as specified within the
\"AmEventsNotification\" data type.
The HTTP response message towards the NF service consumer should take place
before or in parallel with any required access and mobility policy
provisioning towards the SMF.
#### 4.2.3.3 Modification of the subscription to service area coverage change
outcome
This procedure is used by a NF service consumer to subscribe to notifications
about whether an updated service area coverage (which may be same or different
service area coverage from the service area coverage provided by the NF
service consumer) determined from the requested service area coverage provided
in the access and mobility service information has been applied as the
corresponding Service Area Restrictions or whether an updated service area
coverage cannot be provisioned. This procedure also enables to modify or
remove a previous subscription to service area coverage changes.
The NF service consumer shall include in the HTTP PATCH request message
described in clause 4.2.3.2 the \"evSubsc\" attribute as encoded as follows:
\- To create a subscription (i.e., the subscription to the \"SAC_CH\" event
does not exist in the PCF) the NF service consumer shall include the
\"evSubsc\" attribute encoded as specified in clause 4.2.2.3.
\- To modify an existing subscription, (i.e., the subscription to the
\"SAC_CH\" event exists in the PCF) the NF service consumer shall include
within the \"evSubsc\" attribute the \"events\" attribute with the updated
subscription information for the \"event\" attribute set to \"SAC_CH\" as
specified in clause 4.2.2.3.
\- To remove an existing subscription (i.e., the subscription to the
\"SAC_CH\" event exists in the PCF):
a. If there are other events whose subscription the NF service consumer wants
to keep, the NF service consumer shall include the \"events\" attribute
without any event entry with the \"event\" attribute set to \"SAC_CH\".
b. If there are no other events whose subscription the NF service consumer
wants to keep, the NF service consumer shall set to null the \"evSubsc\"
attribute.
The PCF shall reply to the NF service consumer as described in clause 4.2.3.2.
When the service area coverage change event is met in the PCF, the PCF
notifies to the NF service consumer as described in clause 4.2.7.4.
NOTE: When the previously provided service area coverage requirements are
completely removed by the NF service consumer, or the requested service area
coverage policy expires, the NF service consumer should also unsubscribe to
SAC_CH event to prevent the stale subscription information from remaining on
the PCF.
### 4.2.4 Npcf_AMPolicyAuthorization_Delete service operation
#### 4.2.4.1 General
The Npcf_AMPolicyAuthorization_Delete service operation provides means for the
NF service consumer to delete the AF application AM context.
The following procedures using the Npcf_AMPolicyAuthorization_Delete service
operation are supported:
\- AF application AM context termination.
#### 4.2.4.2 AF application AM context termination
This procedure is used to terminate an AF application AM context as defined in
3GPP TS 23.501 [2], 3GPP TS 23.502 [3] and 3GPP TS 23.503 [14].
Figure 4.2.4.2-1 illustrates the AF application AM context termination.
Figure 4.2.4.2-1: AF application AM context termination
When an AF session is terminated, and if the AF application AM context was
created as described in clause 4.2.2, the NF service consumer shall invoke the
Npcf_AMPolicyAuthorization_Delete service operation to the PCF using an HTTP
DELETE request, as shown in figure 4.2.4.2-1, step 1.
The NF service consumer shall set the request URI to \"{apiRoot}/npcf-am-
policyauthorization/\/app-am-contexts/{appAmContextId}\".
When the PCF receives the HTTP DELETE request from the NF service consumer,
indicating the termination of the AF application AM context information, if
the HTTP DELETE request from the NF service consumer is accepted, the PCF
shall acknowledge that request by sending to the NF service consumer a \"204
No Content\".
Afterwards, the PCF shall determine whether the access and mobility policies
of the concerned UE need to be updated or not. If the PCF determines that an
update is needed, the PCF shall initiate the update of the access and mobility
policies of the concerned UE as per the procedures specified in 3GPP TS 29.507
[16].
If the HTTP DELETE request from the NF service consumer is not accepted, the
PCF shall indicate in the response to HTTP DELETE request the cause for the
rejection as specified in clause 5.7.
If the PCF determines the received HTTP DELETE request needs to be redirected,
the PCF shall send an HTTP redirect response as specified in clause 6.10.9 of
3GPP TS 29.500 [4].
### 4.2.5 Npcf_AMPolicyAuthorization_Subscribe service operation
#### 4.2.5.1 General
The Npcf_AMPolicyAuthorization_Subscribe service operation enables to manage
subscriptions to events for an existing AF application AM context. The
Npcf_AMPolicyAuthorization_Subscribe service operation also enables to manage
subscriptions to events without an existing AF application AM context.
Such subscriptions to events shall be created:
\- within the AF application AM context establishment procedure by invoking
the Npcf_AMPolicyAuthorization_Create service operation, as described in
clause 4.2.2;
\- within the AF application AM context modification procedure by invoking the
Npcf_AMPolicyAuthorization_Update service operation, as described in clause
4.2.3; or
\- by invoking the Npcf_AMPolicyAuthorization_Subscribe service operation for
the existing AF application AM context, as described in clause 4.2.5.2.
\- by invoking the Npcf_AMPolicyAuthorization_Subscribe service operation when
there is no existing Individual application AM context and the NF service
consumer does not provide Access and Mobility related service information, as
described in clause 4.2.5.3.
The following procedures using the Npcf_AMPolicyAuthorization_Subscribe
service operation is supported:
\- Subscription to events for an existing AF application AM context.
\- Subscription to events without an existing AF application AM context.
\- Subscription to PDUID changes.
#### 4.2.5.2 Handling of subscription to events for the existing AF
application AM context
This procedure is used to create a subscription to events for the existing AF
application AM context or to modify an existing subscription, as defined in
3GPP TS 23.501 [2], 3GPP TS 23.502 [3] and 3GPP TS 23.503 [14].
Figure 4.2.5.2-1 illustrates the creation of events subscription information
using HTTP PUT method.
Figure 4.2.5.2-1: Creation of events subscription information using HTTP PUT
Figure 4.2.5.2-2 illustrates the modification of events subscription
information using HTTP PUT method.
Figure 4.2.5.2-2: Modification of events subscription information using HTTP
PUT
When the NF service consumer decides to create a subscription to one or more
events for the existing AF application AM context or to modify an existing
subscription previously created by itself at the PCF, the NF service consumer
shall invoke the Npcf_AMPolicyAuthorization_Subscribe service operation by
sending the HTTP PUT request to the resource URI representing the \"AM Policy
Events Subscription\" sub-resource in the PCF, as shown in figure 4.2.5.2-1,
step 1 and figure 4.2.5.2-2, step 1.
NOTE 1: The NF service consumer builds the \"AM Policy Events Subscription\"
sub-resource URI by adding the path segment \"/events-subscription\" at the
end of the resource URI of the \"Individual application AM context\" resource,
received in the Location header field of the resource creation response as
specified in clause 4.2.2.2.
The NF service consumer shall provide in the \"AmEventsSubscData\" data type
of the body of the HTTP PUT request:
\- the \"events\" attribute with the list of events to be subscribed; and
\- the \"eventNotifUri\" attribute, that includes the callback URI where the
PCF shall send the notification of the subscribed events.
NOTE 2: The \"eventNotifUri\" attribute within the \"AmEventsSubscData\" data
structure can be modified to request that subsequent notifications are sent to
a new NF service consumer.
For each subscribed event included in the \"events\" attribute, the NF service
consumer type shall include the event identifier within the \"event\"
attribute and may include the description of the event reporting mode, as
follows:
a. immediate reporting indication as \"immRep\" attribute;
b. event notification method (periodic, one time, on event detection) as
\"notifMethod\" attribute;
c. maximum number of reports as \"maxReportNbr\" attribute;
d. monitoring Duration as \"monDur\" attribute; and/or
e. repetition period for periodic reporting as \"repPeriod\" attribute.
The NF service consumer may provide within the \"AmEventsSubscData\" data type
specific per event subscription information, if applicable, and as described
in clause 4.2.2.3.
NOTE: The NF service consumer can use this service operation to
subscribe/unsubscribe to events that matched based on the provided requested
policy related to the AM context (e.g. SAC_CH event, which is matched based on
the requested service area coverage). In these cases, to avoid the PCF keeping
stale subscription information, the NF service consumer needs to ensure that
the concerned requested policy exists together with the event subscription,
i.e. the event subscription is removed when the related policy is removed.
Upon the reception of the HTTP PUT request from the NF service consumer, the
PCF shall decide whether the received HTTP PUT request is accepted.
If the HTTP PUT request from the NF service consumer is not accepted, the PCF
shall indicate in the response to HTTP PUT request the cause for the rejection
as specified in clause 5.7.
If the PCF determines the received HTTP PUT request needs to be redirected,
the PCF shall send an HTTP redirect response as specified in clause 6.10.9 of
3GPP TS 29.500 [4].
If the PCF accepted the HTTP PUT request to create a subscription to events,
the PCF shall create the \"AM Policy Events Subscription\" sub-resource and
shall send the HTTP response message to the NF service consumer as shown in
figure 4.2.5.2-1, step 2. The PCF shall include in the \"201 Created\"
response:
\- a Location header field that shall contain the URI of the created \"AM
Policy Events Subscription\" sub-resource i.e. \"{apiRoot}/npcf-am-
policyauthorization/\/app-am-contexts/{appAmContextId}/events-
subscription\"; and
\- a response body with the \"AmEventsSubscRespData\" data type, which:
a) shall contain the created \"AM Policy Events Subscription\" sub-resource
encoded in the attributes of the \"AmEventsSubscData\" data type; and
b) if the NF service consumer requested the immediate reporting and the
current value is available, may contain the corresponding event(s)
notification by encoding event identifier within the \"repEvents\" the
attribute and the applicable event(s) information as specified within the
\"AmEventsNotification\" data type.
If the PCF accepted the HTTP PUT request to modify the events subscription,
the PCF shall modify the \"AM Policy Events Subscription\" sub-resource and
shall send to the NF service consumer:
\- the HTTP \"204 No Content\" response (as shown in figure 4.2.5.2-2, step
2a); or
\- the HTTP \"200 OK\" response (as shown in figure 4.2.5.2-2, step 2b)
including in the \"AmEventsSubscRespData\" data type:
a) the updated representation of the \"AM Policy Events Subscription\" sub-
resource encoded within the attributes of the \"AmEventsSubscData\" data type;
and
b) if one or more of the updated subscribed events are already met in the PCF,
the notification of these events by including the event identifier within the
\"repEvents\" attribute and the applicable event(s) information as specified
within the \"AmEventsNotification\" data type.
When the \"monDur\" attribute is included in the response, it represents a
server selected expiry time that is equal or less than a possible expiry time
in the request.
#### 4.2.5.3 Subscription to events without an existing AF application AM
context
This procedure is used by an NF service consumer (e.g. 5G DDNMF) to request
the creation of a subscription to event(s) in the PCF when no \"Individual
application AM context\" exists, and the NF service consumer does not provide
Access and Mobility related service information, i.e., does not create an AF
application AM context.
Figure 4.2.5.3-1 illustrates the subscription to event(s) without an existing
AF application AM context.
Figure 4.2.5.3-1: Subscription to events without an existing AF application AM
context
When an NF service consumer (e.g. 5G DDNMF) decides to create a subscription
to one or more event(s), and the NF service consumer is not providing Access
and Mobility related service information and the \"Individual application AM
context\" resource does not exist, the NF service consumer shall invoke the
Npcf_AMPolicyAuthorization_Subscribe service operation to create an
\"Individual application AM context\" resource and the corresponding \"AM
Policy Events Subscription\" sub-resource by sending an HTTP POST request to
the resource URI representing the \"Application AM contexts\" collection
resource of the PCF, as shown in figure 4.2.5.3-1, step 1.
The NF service consumer shall include in the AppAmContextData data type in the
payload body of the HTTP POST request a partial representation of the
\"Individual Application AM Context\" resource, which shall include:
\- the notification URI where the PCF shall request the termination of the
application AM context to the NF service consumer, encoded as \"termNotifUri\"
attribute;
\- the SUPI encoded as \"supi\" attribute; and
\- the \"evSubsc\" attribute to subscribe to notifications of access and
mobility policy changes events. The NF service consumer shall include within
the associated AmEventsSubscData data type:
a. the notification URI where the NF service consumer wants to receive the
event notifications, encoded as \"eventNotifUri\" attribute; and
b. the event(s) to subscribe to within the \"events\" attribute. For each
subscribed event, the AmEventData data type shall include the event identifier
in the \"event\" attribute and may include the description of the event
reporting mode as specified in clause 4.2.5.2.
The event(s) subscription data is provisioned in the \"AM Policy Events
Subscription\" sub-resource.
If the PCF cannot successfully fulfil the received HTTP POST request due to
the internal PCF error or due to the error in the HTTP POST request, the PCF
shall send the HTTP error response as specified in clause 5.7.
Otherwise, the PCF shall perform the association of the AF request to one and
only one AM policy association or UE policy association. If the PCF fails in
executing the binding with the AM policy association or UE policy association,
the PCF shall reject the HTTP POST request with an HTTP \"500 Internal Server
Error\" response and may include the \"cause\" attribute set to
\"POLICY_ASSOCIATION_NOT_AVAILABLE\".
NOTE 1: In this release of the specification whether the AF request is
associated to an AM policy association or to a UE policy association is
determined per specific event, e.g., a subscription to PDUID changes implies
the binding to a UE policy association.
If the PCF created an \"Individual Application AM Context\" resource and the
corresponding \"AM Policy Events Subscription\" sub-resource, the PCF shall
send to the NF service consumer a \"201 Created\" response to the HTTP POST
request, as shown in figure 4.2.5.3-1, step 2. The PCF shall include in the
\"201 Created\" response:
\- a Location header field; and
\- an AppAmContextRespData data type in the payload body.
The Location header field shall contain the URI of the created \"AM Policy
Events Subscription\" sub-resource, i.e., \"{apiRoot}/npcf-am-
policyauthorization/\/app-am-contexts/{appAmContextId}/events-
subscription\".
The AppAmContextRespData data type payload body shall contain:
\- the representation of the created \"Individual application AM context\"
resource within the AppAmContextData data type, which shall also include the
\"AM Policy Events Subscription\" sub-resource representation within the
\"evSubsc\" attribute; and
\- when the PCF determines that the subscribed event(s) is already met and/or
the NF service consumer requested immediate reporting and the current value is
available, the AppAmContextRespData data type shall include the corresponding
event(s) notification within the \"repEvents\" attribute of the
AmEventsNotification data type.
NOTE 2: The created \"Individual application AM context\" resource does not
include Access and Mobility related service information, only includes the
information supplied by the NF service consumer to perform the association to
the concerned AM policy association or UE policy association, i.e., the
\"supi\" attribute, the SBI handling specific properties, i.e. the
\"suppFeat\" attribute and the \"termNotifUri\" attribute, together with the
\"evSubsc\" attribute.
#### 4.2.5.4 Subscription to PDUID changes
This procedure is used by a NF service consumer to request to subscribe to
notifications of PDUID change event.
The NF service consumer requests the subscription to notifications of PDUID
change without providing (Access and Mobility or 5G ProSe) service information
at initial subscription to event(s), using the HTTP POST request message as
described in clause 4.2.5.3.
The NF service consumer shall include within the \"events\" array attribute of
the \"evSubsc\" attribute of the AppAmContextData data type:
\- an event with the \"event\" attribute set to \"PDUID_CH\"; and
\- to retrieve the current value of the PCF allocated PDUID for the UE, the
request for immediate reporting by setting the \"immRep\" attribute to true.
The PCF shall perform the association of the AF request to the UE policy
association and shall retrieve the internally stored PDUID value allocated to
the UE for the UE 5G ProSe Policy.
Upon success, the PCF creates an \"Individual Application AM Context\"
resource and the corresponding \"AM Policy Events Subscription\" sub-resource.
The PCF shall then send a \"201 Created\" response to the HTTP POST request
received from the NF service consumer, as described in clause 4.2.5.3,
including the retrieved PDUID value within the AmEventsNotification data type
as described in clause 4.2.7.5.
### 4.2.6 Npcf_AMPolicyAuthorization_Unsubscribe service operation
#### 4.2.6.1 General
The Npcf_AMPolicyAuthorization_Unsubscribe service operation enables an NF
service consumer to remove an existing subscription to event(s) for an
existing AF application AM context. The Npcf_AMPolicyAuthorization_Unsubscribe
service operation also enables an NF service consumers to remove an existing
subscription to event(s) without an existing AF application AM context.
Such subscription to events shall be removed:
\- by invoking the Npcf_AMPolicyAuthorization_Unsubscribe service operation
for an existing AF application AM context, as described in clause 4.2.6.2; or
\- within the AF application AM context modification procedure by invoking the
Npcf_AMPolicyAuthorization_Update service operation, as described in clause
4.2.3; or
\- within the AF application AM context termination procedure by invoking the
Npcf_AMPolicyAuthorization_Delete service operation, as described in clause
4.2.4.
\- by invoking the Npcf_AMPolicyAuthorization_Unsubscribe service operation
when there is no existing Individual application AM context, as described in
clause 4.2.6.3.
The following procedures using the Npcf_AMPolicyAuthorization_Unsubscribe
service operation are supported:
\- Unsubscription to events, Access and Mobility related service information
exists.
\- Unsubscription to events, Access and Mobility related service information
does not exist.
#### 4.2.6.2 Unsubscription to events, Access and Mobility related service
information exists
This procedure is used to unsubscribe to all subscribed events when the NF
service consumer previously provided access and mobility related service
information for the existing AF application AM context, as defined in 3GPP TS
23.501 [2], 3GPP TS 23.502 [3] and 3GPP TS 23.503 [14]. As result of this
procedure, the \"AM Policy Events Subscription\" sub-resource is removed but
the \"Individual application AM context\" remains with the access and mobility
related service information.
Figure 4.2.6.2-1 illustrates the procedure to unsubscribe from AM Policy
Authorization event(s) using the HTTP DELETE method.
Figure 4.2.6.2-1: Removal of events subscription information using HTTP DELETE
When the NF service consumer decides to unsubscribe to all subscribed event(s)
for an existing AF application AM context, and the NF service consumer
previously provided access and mobility service information to the PCF, the NF
service consumer shall invoke the Npcf_AMPolicyAuthorization_Unsubscribe
service operation by sending an HTTP DELETE request message to the resource
URI representing the concerned \"AM Policy Events Subscription\" sub-resource
in the PCF, as shown in figure 4.2.6.2-1, step 1.
Upon the reception of the HTTP DELETE request message from the NF service
consumer, the PCF shall decide whether the received HTTP request message is
accepted.
If the HTTP DELETE request message from the NF service consumer is accepted,
the PCF shall delete the \"AM Policy Events Subscription\" sub-resource and
shall send to the NF service consumer a HTTP \"204 No Content\" response
message.
If the HTTP DELETE request message from the NF service consumer is rejected,
the PCF shall indicate in the HTTP response message the cause for the
rejection as specified in clause 5.7.
If the PCF determines the received HTTP DELETE request needs to be redirected,
the PCF shall send an HTTP redirect response as specified in clause 6.10.9 of
3GPP TS 29.500 [4].
#### 4.2.6.3 Unsubscription to events, Access and Mobility related service
information does not exist
This procedure is used by the NF service consumer to unsubscribe to all
subscribed event(s) when the AF application AM context does not contain access
and mobility related service information, i.e. only contains the \"supi\"
attribute, the SBI handling specific properties, i.e. the \"suppFeat\"
attribute and the \"termNotifUri\", together with the subscription information
encoded in the \"evSubsc\" attribute. As a result of this procedure, the \"AM
Policy Events Subscription\" sub-resource and the parent \"Individual
application AM context\" resource are both removed.
The procedure to unsubscribe from AM Policy Authorization events when the AF
application AM context does not contain access and mobility related service
information is the same as the procedure to delete the AF application AM
context defined in clause 4.2.4.2.
### 4.2.7 Npcf_AMPolicyAuthorization_Notify service operation
#### 4.2.7.1 General
The Npcf_AMPolicyAuthorization_Notify service operation enables to notify to
the NF service consumers that the previously subscribed event for the existing
AF application AM context occurred or that the AF application AM context is no
longer valid.
The following procedures using the Npcf_AMPolicyAuthorization_Notify service
operation are supported:
\- Notification about AF application AM context event.
\- Notification about AF application AM context termination.
\- Notification about service area coverage change outcome.
\- Notification about PDUID changes.
#### 4.2.7.2 Notification about AF application AM context event
This procedure is invoked by the PCF to notify the NF service consumer when a
certain, previously subscribed, AF application AM context event occurs, as
defined in 3GPP TS 23.501 [2], 3GPP TS 23.502 [3] and 3GPP TS 23.503 [14].
Figure 4.2.7.2-1 illustrates the notification about AF application AM context
event.
Figure 4.2.7.2-1: Notification about AF application AM context event
When the PCF determines that the event for the existing AF application AM
context, to which the NF service consumer has subscribed to, occurred, the PCF
shall invoke the Npcf_AMPolicyAuthorization_Notify service operation by
sending the HTTP POST request (as shown in figure 4.2.7.2-1, step 1) to the NF
service consumer using the callback URI received in the subscription creation
(or modification), as specified in clauses 4.2.2.2, 4.2.3.2 and 4.2.5.2. The
PCF shall provide in the body of the HTTP POST request the
\"AmEventsNotification\" data type including:
\- the AM Policy Events Subscription resource identifier related with the
notification in the \"appAmContextId\" attribute; and
\- the list of the reported events in the \"repEvents\" attribute. For each
reported event, the \"AmEventNotification\" data type may include additional
event information.
The notification of other specific events using the
Npcf_AMPolicyAuthorization_Notify request is described in the related clauses.
Upon the reception of the HTTP POST request from the PCF indicating that the
subscribed event occurred, the NF service consumer shall acknowledge that
request by sending an HTTP response message with the corresponding status
code.
If the HTTP POST request from the PCF is not accepted, the NF service consumer
shall indicate in the response to HTTP POST request the cause for the
rejection as specified in clause 5.7.
If the HTTP POST request from the PCF is accepted, the NF service consumer
shall acknowledge the receipt of the event notification with a \"204 No
Content\" response to HTTP POST request, as shown in figure 4.2.7.2-1, step 2.
If the NF service consumer determines the received HTTP POST request needs to
be redirected, the NF service consumer shall send an HTTP redirect response as
specified in clause 6.10.9 of 3GPP TS 29.500 [4].
#### 4.2.7.3 Notification about AF application AM context termination
This procedure is invoked by the PCF to notify the NF service consumer that
the AF application AM context is no longer valid, as defined in 3GPP TS 23.501
[2], 3GPP TS 23.502 [3] and 3GPP TS 23.503 [14].
Figure 4.2.7.3-1 illustrates the notification about AF application AM context
termination.
Figure 4.2.7.3-1: Notification about AF application AM context termination
When the PCF determines that the AF application AM context is no longer valid,
the PCF shall invoke the Npcf_AMPolicyAuthorization_Notify service operation
by sending the HTTP POST request (as shown in figure 4.2.7.3-1, step 1) using
the callback URI received in the \"Individual application AM context\"
resource creation, as specified in clause 4.2.2.2. The PCF shall provide in
the body of the HTTP POST request the \"AmTerminationInfo\" data type
including:
\- the Individual application AM context resource identifier related to the
termination notification within the \"appAmContextId\" attribute; and
\- the AF application AM context termination cause within the \"termCause\"
attribute encoded using of the \"AmTerminationCause\" data type, indicating
the termination cause.
Upon the reception of the HTTP POST request from the PCF requesting the AF
application AM context termination, the NF service consumer shall acknowledge
that request by sending an HTTP response message with the corresponding status
code.
If the HTTP POST request from the PCF is not accepted, the NF service consumer
shall indicate in the response to HTTP POST request the cause for the
rejection as specified in clause 5.7.
If the HTTP POST request from the PCF is accepted, the NF service consumer
shall acknowledge the receipt of the AF application AM context termination
request with a \"204 No Content\" response (as shown in figure 4.2.7.3-1, step
2) and shall invoke the Npcf_AMPolicyAuthorization_Delete service operation to
the PCF as described in clause 4.2.4.
If the NF service consumer determines the received HTTP POST request needs to
be redirected, the NF service consumer shall send an HTTP redirect response as
specified in clause 6.10.9 of 3GPP TS 29.500 [4].
#### 4.2.7.4 Notification about service area coverage change outcome
When the PCF becomes aware that the request received from the NF service
consumer to change the service area coverage is performed, it shall inform the
NF service consumer accordingly if the NF service consumer has previously
subscribed to the \"SAC_CH\" event as described in clauses 4.2.2.3 and
4.2.3.3.
The PCF shall notify the NF service consumer by including the
AmEventsNotification data type in the body of the HTTP POST request as
described in clause 4.2.7.2. The PCF shall include within an entry of the
\"repEvents\" attribute:
\- the \"event\" attribute set to \"SAC_CH\" in the \"event\" attribute;
\- the applied service area coverage (same or different service area coverage
from the service area coverage provided by the NF service consumer) in the
\"appliedCov\" attribute.
When the result of the execution of the request of service area coverage is
that the service is allowed in one or more of the requested Tracking Areas in
the serving network where the UE is camping, the \"appliedCov\" attribute
shall encode within the \"tacList\" attribute the list of NF consumer provided
Tracking Area codes where the requested service shall be allowed and within
the \"servingNetwork\" attribute the serving network where the UE is camping.
When the result of the execution of the request of service area coverage
change is that the service is restricted in the whole NF requested service
area coverage, the \"appliedCov\" attribute shall encode an empty array within
the \"tacList\" attribute.
NOTE: The actual service area coverage for the UE might be larger than the one
reported within \"appliedCov\" attribute. The \"appliedCov\" attribute
provides to the NF consumer feedback about where the service is allowed in
relation to the NF consumer provided service area coverage.
When the NF service consumer indicated that the notification method is
\"ON_EVENT_DETECTION\" (or omitted it) during the subscription, the
subscription to this event is kept in the PCF until the NF service consumer
terminates the subscription as described in clause 4.2.3.2 or 4.2.6.2. The NF
service consumer shall be notified of subsequent service area coverage changes
(i.e., changes in the applied service area coverage, which may indicate e.g.
no service area coverage is allowed) as specified in bullets above without
requiring a new subscription, both, when the service area coverage change is
triggered by the NF service consumer and/or triggered by other events (e.g.
based on PCF internal policies and/or changes in the subscribed service area
restrictions), and as long as the requested service area coverage requirements
exist (e.g, they have not expired).
Upon receipt of the HTTP POST request from the PCF, the NF service consumer
shall acknowledge the request by sending a \"204 No Content\" response as
described in clause 4.2.7.2.
#### 4.2.7.5 Notification about PDUID changes
When the PCF allocates a new PDUID (ProSe Discovery UE ID) for the UE 5G ProSe
Policy of a SUPI, the PCF shall inform the NF service consumer that previously
subscribed as described in clause 4.2.5.4.
The PCF shall notify the NF service consumer by including the
AmEventsNotification data type in the body of the HTTP POST request as
described in clause 4.2.7.2, which shall include within an entry of the
\"repEvents\" attribute:
\- the \"PDUID_CH\" event within the \"event\" attribute; and
\- the \"pduidInfo\" attribute, with the allocated PDUID within the \"pduid\"
attribute and its validity timer within the \"expiry\" attribute.
When the NF service consumer receives the notification in the HTTP POST
request, it shall acknowledge the request by sending a \"204 No Content\"
response to the PCF as specified in clause 4.2.7.2.
# 5 Npcf_AMPolicyAuthorization Service API
## 5.1 Introduction
The Npcf_AMPolicyAuthorization shall use the Npcf_AMPolicyAuthorization API.
The API URI of the Npcf_AMPolicyAuthorization API shall be:
**{apiRoot}/\ /\**
The request URIs used in HTTP requests from the NF service consumer towards
the NF service producer shall have the Resource URI structure defined in
clause 4.4.1 of 3GPP TS 29.501 [5], i.e.:
**{apiRoot}/\ /\/\**
with the following components:
\- The {apiRoot} shall be set as described in 3GPP TS 29.501 [5].
\- The \ shall be \"npcf-am-policyauthorization\".
\- The \ shall be \"v1\".
\- The \ shall be set as described in clause 5.3.
## 5.2 Usage of HTTP
### 5.2.1 General
HTTP/2, IETF RFC 7540 [11], shall be used as specified in clause 5 of 3GPP TS
29.500 [4].
HTTP/2 shall be transported as specified in clause 5.3 of 3GPP TS 29.500 [4].
The OpenAPI [6] specification of HTTP messages and content bodies for the
Npcf_AMPolicyAuthorization API is contained in Annex A.
### 5.2.2 HTTP standard headers
#### 5.2.2.1 General
See clause 5.2.2 of 3GPP TS 29.500 [4] for the usage of HTTP standard headers.
#### 5.2.2.2 Content type
JSON, IETF RFC 8259 [12], shall be used as content type of the HTTP bodies
specified in the present specification as specified in clause 5.4 of 3GPP TS
29.500 [4]. The use of the JSON format shall be signalled by the content type
\"application/json\".
\"Problem Details\" JSON object shall be used to indicate additional details
of the error in a HTTP response body and shall be signalled by the content
type \"application/problem+json\", as defined in IETF RFC 7807 [13].
JSON object used in the HTTP PATCH request shall be encoded according to
\"JSON Merge Patch\" and shall be signalled by the content type
\"application/merge-patch+json\", as defined in IETF RFC 7396 [18].
### 5.2.3 HTTP custom headers
#### 5.2.3.1 General
The mandatory HTTP custom header fields specified in clause 5.2.3.2 of 3GPP TS
29.500 [4] shall be supported, and the optional HTTP custom header fields
specified in clause 5.2.3.3 of 3GPP TS 29.500 [4] may be supported.
In this Release of the specification, no specific custom headers are defined
for the Npcf_AMPolicyAuthorization API.
## 5.3 Resources
### 5.3.1 Overview
This clause describes the structure for the Resource URIs and the resources
and methods used for the service.
Figure 5.3.1-1 depicts the resource URIs structure for the
Npcf_AMPolicyAuthorization API.
Figure 5.3.1-1: Resource URI structure of the Npcf_AMPolicyAuthorization API
Table 5.3.1-1 provides an overview of the resources and applicable HTTP
methods.
Table 5.3.1-1: Resources and methods overview
+----------------+----------------+----------------+----------------+ | Resource name | Resource URI | HTTP method or | Description | | | | custom | | | | | operation | | +================+================+================+================+ | Application AM | /a | POST | Npcf_AM | | contexts | pp-am-contexts | | PolicyAuthoriz | | | | | ation_Create. | | | | | Creates a new | | | | | Individual | | | | | application AM | | | | | context | | | | | resource and | | | | | may create the | | | | | child AM | | | | | Policy Events | | | | | Subscription | | | | | sub-resource. | +----------------+----------------+----------------+----------------+ | Individual | /app | PATCH | Npcf_AM | | application AM | -am-contexts/\ | | PolicyAuthoriz | | context | {a | | ation_Update. | | | ppAmContextId} | | Updates an | | | | | existing | | | | | Individual | | | | | application AM | | | | | context | | | | | resource. It | | | | | can also | | | | | create or | | | | | update an AM | | | | | Policy Events | | | | | Subscription | | | | | sub-resource. | +----------------+----------------+----------------+----------------+ | | | GET | Reads an | | | | | existing | | | | | Individual | | | | | application AM | | | | | context | | | | | resource. | +----------------+----------------+----------------+----------------+ | | | DELETE | Npcf_AM | | | | | PolicyAuthoriz | | | | | ation_Delete. | | | | | Deletes an | | | | | existing | | | | | Individual | | | | | application AM | | | | | context | | | | | resource and | | | | | the child AM | | | | | Policy Events | | | | | Subscription | | | | | sub-resource. | +----------------+----------------+----------------+----------------+ | AM Policy | /app | PUT | Npcf_AMPol | | Events | -am-contexts/\ | | icyAuthorizati | | Subscription | {ap | | on_Subscribe. | | | pAmContextId}\ | | Creates a new | | | /event | | AM Policy | | | s-subscription | | Events | | | | | Subscription | | | | | sub-resource | | | | | or modifies an | | | | | existing AM | | | | | Policy Events | | | | | Subscription | | | | | sub-resource. | +----------------+----------------+----------------+----------------+ | | | DELETE | Npcf_AMPolic | | | | | yAuthorization | | | | | _Unsubscribe. | | | | | | | | | | Deletes an AM | | | | | Policy Events | | | | | Subscription | | | | | sub-resource. | +----------------+----------------+----------------+----------------+
### 5.3.2 Resource: Application AM contexts (Collection)
#### 5.3.2.1 Description
The Application AM contexts resource represents all application AM contexts
that exist in the Npcf_AMPolicyAuthorization service at a given PCF instance.
#### 5.3.2.2 Resource Definition
Resource URI: **{apiRoot}/npcf-am-policyauthorization/\ /app-am-
contexts**
This resource shall support the resource URI variables defined in table
5.3.2.2-1.
Table 5.3.2.2-1: Resource URI variables for this resource
Name Data type Definition
* * *
apiRoot string See clause 5.1
#### 5.3.2.3 Resource Standard Methods
##### 5.3.2.3.1 POST
This method shall support the URI query parameters specified in table
5.3.2.3.1-1.
Table 5.3.2.3.1-1: URI query parameters supported by the POST method on this
resource
* * *
Name Data type P Cardinality Description Applicability n/a
* * *
This method shall support the request data structures specified in table
5.3.2.3.1-2 and the response data structures and response codes specified in
table 5.3.2.3.1-3.
Table 5.3.2.3.1-2: Data structures supported by the POST Request Body on this
resource
* * *
Data type P Cardinality Description AppAmContextData M 1 Contains the
information for the creation of a new Individual application AM context
resource.
* * *
Table 5.3.2.3.1-3: Data structures supported by the POST Response Body on this
resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | AppAmCo | M | 1 | 201 Created | Successful | | ntextRespData | | | | case. | | | | | | | | | | | | The creation | | | | | | of an | | | | | | Individual | | | | | | application | | | | | | AM context | | | | | | resource is | | | | | | confirmed and | | | | | | a | | | | | | r | | | | | | epresentation | | | | | | of that | | | | | | resource is | | | | | | returned, | | | | | | together with | | | | | | event | | | | | | subscription | | | | | | and event | | | | | | notification | | | | | | information, | | | | | | if available, | | | | | | as specified | | | | | | in | | | | | | cl | | | | | | ause 4.2.2.2. | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 500 Internal | (NOTE 2) | | roblemDetails | | | Server Error | | +---------------+---+-------------+---------------+---------------+ | NOTE 1: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status code | | | | | | for the POST | | | | | | method listed | | | | | | in | | | | | | Ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | also apply. | | | | | | | | | | | | NOTE 2: | | | | | | Failure cases | | | | | | are described | | | | | | in | | | | | | clause 5.7. | | | | | +---------------+---+-------------+---------------+---------------+
Table 5.3.2.3.1-4: Headers supported by the 201 response code on this resource
* * *
Name Data type P Cardinality Description
Location string M 1 Contains the URI of the newly created resource, according
to the structure:\ {apiRoot}/npcf-am-policyauthorization/\/\ app-
am-contexts/{appAmContextId}
* * *
#### 5.3.2.4 Resource Custom Operations
None.
### 5.3.3 Resource: Individual application AM context (Document)
#### 5.3.3.1 Description
The Individual application AM context resource represents a single application
AM context that exists in the Npcf_AMPolicyAuthorization.
#### 5.3.3.2 Resource Definition
Resource URI: **{apiRoot}/npcf-am-policyauthorization/\ /app-am-
contexts/{appAmContextId}**
This resource shall support the resource URI variables defined in table
5.3.3.2-1.
Table 5.3.3.2-1: Resource URI variables for this resource
Name Data type Definition
* * *
apiRoot string See clause 5.1 appAmContextId string Identifies an application
AM context formatted according to IETF RFC 3986 [19].
#### 5.3.3.3 Resource Standard Methods
##### 5.3.3.3.1 GET
This method shall support the URI query parameters specified in table
5.3.3.3.1-1.
Table 5.3.3.3.1-1: URI query parameters supported by the GET method on this
resource
* * *
Name Data type P Cardinality Description Applicability n/a
* * *
This method shall support the request data structures specified in table
5.3.3.3.1-2 and the response data structures and response codes specified in
table 5.3.3.3.1-3.
Table 5.3.3.3.1-2: Data structures supported by the GET Request Body on this
resource
* * *
Data type P Cardinality Description n/a
* * *
Table 5.3.3.3.1-3: Data structures supported by the GET Response Body on this
resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | App | M | 1 | 200 OK | Successful | | AmContextData | | | | case. | | | | | | | | | | | | A | | | | | | r | | | | | | epresentation | | | | | | of an | | | | | | Individual | | | | | | application | | | | | | AM context | | | | | | resource is | | | | | | returned. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection, | | | | | | during an | | | | | | Individual | | | | | | application | | | | | | AM context | | | | | | retrieval. | | | | | | | | | | | | (NOTE 3) | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection, | | | | | | during an | | | | | | Individual | | | | | | application | | | | | | AM context | | | | | | resource | | | | | | retrieval. | | | | | | | | | | | | (NOTE 3) | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 404 Not Found | (NOTE 2) | | roblemDetails | | | | | +---------------+---+-------------+---------------+---------------+ | NOTE 1: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status code | | | | | | for the GET | | | | | | method listed | | | | | | in | | | | | | ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | also apply. | | | | | | | | | | | | NOTE 2: | | | | | | Failure cases | | | | | | are described | | | | | | in | | | | | | clause 5.7. | | | | | | | | | | | | NOTE 3: The | | | | | | Red | | | | | | irectResponse | | | | | | data | | | | | | structure may | | | | | | be provided | | | | | | by an SCP | | | | | | (see | | | | | | cl | | | | | | ause 6.10.9.1 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 9.500 [4]). | | | | | +---------------+---+-------------+---------------+---------------+
Table 5.3.3.3.1-4: Headers supported by the 307 Response Code on this resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | Contains an | | | | | | alternative URI | | | | | | of the resource | | | | | | located in an | | | | | | alternative PCF | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the request is | | | | | | redirected. | | | | | | | | | | | | For the case | | | | | | where the | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | via a different | | | | | | SCP, refer to | | | | | | clause 6.10.9.1 | | | | | | of | | | | | | 3GPP T | | | | | | S 29.500 [4]. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target PCF | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the request is | | | | | | redirected. | +-----------------+-----------+---+-------------+-----------------+
Table 5.3.3.3.1-5: Headers supported by the 308 Response Code on this resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | Contains an | | | | | | alternative URI | | | | | | of the resource | | | | | | located in an | | | | | | alternative PCF | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the request is | | | | | | redirected. | | | | | | | | | | | | For the case | | | | | | where the | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | via a different | | | | | | SCP, refer to | | | | | | clause 6.10.9.1 | | | | | | of | | | | | | 3GPP T | | | | | | S 29.500 [4]. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target PCF | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the request is | | | | | | redirected. | +-----------------+-----------+---+-------------+-----------------+
##### 5.3.3.3.2 PATCH
This method shall support the URI query parameters specified in table
5.3.3.3.2-1.
Table 5.3.3.3.2-1: URI query parameters supported by the PATCH method on this
resource
* * *
Name Data type P Cardinality Description Applicability n/a
* * *
This method shall support the request data structures specified in table
5.3.3.3.2-2 and the response data structures and response codes specified in
table 5.3.3.3.2-3.
Table 5.3.3.3.2-2: Data structures supported by the PATCH Request Body on this
resource
* * *
Data type P Cardinality Description AppAmContextUpdateData M 1 Contains the
modification(s) to apply to the Individual application AM context resource.
* * *
Table 5.3.3.3.2-3: Data structures supported by the PATCH Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | AppAmCo | M | 1 | 200 OK | Successful | | ntextRespData | | | | case. | | | | | | | | | | | | A | | | | | | r | | | | | | epresentation | | | | | | of an | | | | | | Individual | | | | | | application | | | | | | AM context | | | | | | resource, | | | | | | together with | | | | | | event | | | | | | subscription | | | | | | and event | | | | | | notification | | | | | | information, | | | | | | if available, | | | | | | as specified | | | | | | in | | | | | | cl | | | | | | ause 4.2.3.2. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection, | | | | | | during an | | | | | | Individual | | | | | | application | | | | | | AM context | | | | | | modification. | | | | | | | | | | | | (NOTE 3) | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection, | | | | | | during an | | | | | | Individual | | | | | | application | | | | | | AM context | | | | | | modification. | | | | | | | | | | | | (NOTE 3) | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 400 Bad | (NOTE 2) | | roblemDetails | | | Request | | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 404 Not Found | (NOTE 2) | | roblemDetails | | | | | +---------------+---+-------------+---------------+---------------+ | NOTE 1: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status code | | | | | | for the PATCH | | | | | | method listed | | | | | | in | | | | | | ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | also apply. | | | | | | | | | | | | NOTE 2: | | | | | | Failure cases | | | | | | are described | | | | | | in | | | | | | clause 5.7. | | | | | | | | | | | | NOTE 3: The | | | | | | Red | | | | | | irectResponse | | | | | | data | | | | | | structure may | | | | | | be provided | | | | | | by an SCP | | | | | | (see | | | | | | cl | | | | | | ause 6.10.9.1 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 9.500 [4]). | | | | | +---------------+---+-------------+---------------+---------------+
Table 5.3.3.3.2-4: Headers supported by the 307 Response Code on this resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | Contains an | | | | | | alternative URI | | | | | | of the resource | | | | | | located in an | | | | | | alternative PCF | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the request is | | | | | | redirected. | | | | | | | | | | | | For the case | | | | | | where the | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | via a different | | | | | | SCP, refer to | | | | | | clause 6.10.9.1 | | | | | | of | | | | | | 3GPP T | | | | | | S 29.500 [4]. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target PCF | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the request is | | | | | | redirected. | +-----------------+-----------+---+-------------+-----------------+
Table 5.3.3.3.2-5: Headers supported by the 308 Response Code on this resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | Contains an | | | | | | alternative URI | | | | | | of the resource | | | | | | located in an | | | | | | alternative PCF | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the request is | | | | | | redirected. | | | | | | | | | | | | For the case | | | | | | where the | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | via a different | | | | | | SCP, refer to | | | | | | clause 6.10.9.1 | | | | | | of | | | | | | 3GPP T | | | | | | S 29.500 [4]. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target PCF | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the request is | | | | | | redirected. | +-----------------+-----------+---+-------------+-----------------+
##### 5.3.3.3.3 DELETE
This method shall support the URI query parameters specified in table
5.3.3.3.3-1.
Table 5.3.3.3.3-1: URI query parameters supported by the DELETE method on this
resource
* * *
Name Data type P Cardinality Description Applicability n/a
* * *
This method shall support the request data structures specified in table
5.3.3.3.3-2 and the response data structures and response codes specified in
table 5.3.3.3.3-3.
Table 5.3.3.3.3-2: Data structures supported by the DELETE Request Body on
this resource
* * *
Data type P Cardinality Description n/a
* * *
Table 5.3.3.3.3-3: Data structures supported by the DELETE Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | Successful | | | | | Content | case. | | | | | | | | | | | | The | | | | | | Individual | | | | | | application | | | | | | AM context | | | | | | resource is | | | | | | deleted. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection, | | | | | | during | | | | | | Individual | | | | | | application | | | | | | AM context | | | | | | termination. | | | | | | | | | | | | (NOTE 3) | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection, | | | | | | during | | | | | | Individual | | | | | | application | | | | | | AM context | | | | | | termination. | | | | | | | | | | | | (NOTE 3) | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 404 Not Found | (NOTE 2) | | roblemDetails | | | | | +---------------+---+-------------+---------------+---------------+ | NOTE 1: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status code | | | | | | for the | | | | | | DELETE method | | | | | | listed in | | | | | | ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | also apply. | | | | | | | | | | | | NOTE 2: | | | | | | Failure cases | | | | | | are described | | | | | | in | | | | | | clause 5.7. | | | | | | | | | | | | NOTE 3: The | | | | | | Red | | | | | | irectResponse | | | | | | data | | | | | | structure may | | | | | | be provided | | | | | | by an SCP | | | | | | (see | | | | | | cl | | | | | | ause 6.10.9.1 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 9.500 [4]). | | | | | +---------------+---+-------------+---------------+---------------+
Table 5.3.3.3.3-4: Headers supported by the 307 Response Code on this resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | Contains an | | | | | | alternative URI | | | | | | of the resource | | | | | | located in an | | | | | | alternative PCF | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the request is | | | | | | redirected. | | | | | | | | | | | | For the case | | | | | | where the | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | via a different | | | | | | SCP, refer to | | | | | | clause 6.10.9.1 | | | | | | of | | | | | | 3GPP T | | | | | | S 29.500 [4]. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target PCF | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the request is | | | | | | redirected. | +-----------------+-----------+---+-------------+-----------------+
Table 5.3.3.3.3-5: Headers supported by the 308 Response Code on this resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | Contains an | | | | | | alternative URI | | | | | | of the resource | | | | | | located in an | | | | | | alternative PCF | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the request is | | | | | | redirected. | | | | | | | | | | | | For the case | | | | | | where the | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | via a different | | | | | | SCP, refer to | | | | | | clause 6.10.9.1 | | | | | | of | | | | | | 3GPP T | | | | | | S 29.500 [4]. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target PCF | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the request is | | | | | | redirected. | +-----------------+-----------+---+-------------+-----------------+
#### 5.3.3.4 Resource Custom Operations
None.
### 5.3.4 Resource: AM Policy Events Subscription (Document)
#### 5.3.4.1 Description
The AM Policy Events Subscription resource represents a subscription to access
and mobility policy events for an application AM context that exists in the
Npcf_AMPolicyAuthorization service.
#### 5.3.4.2 Resource definition
Resource URI: **{apiRoot}/npcf-am-policyauthorization/\ /app-am-
contexts/{appAmContextId}/events-subscription**
This resource shall support the resource URI variables defined in table
5.3.4.2-1.
Table 5.3.4.2-1: Resource URI variables for this resource
Name Data type Definition
* * *
apiRoot string See clause 5.1 appAmContextId string Identifies an application
AM context formatted according to IETF RFC 3986 [19].
#### 5.3.4.3 Resource Standard Methods
##### 5.3.4.3.1 PUT
This method shall support the URI query parameters specified in table
5.3.4.3.1-1.
Table 5.3.4.3.1-1: URI query parameters supported by the PUT method on this
resource
* * *
Name Data type P Cardinality Description Applicability n/a
* * *
This method shall support the request data structures specified in table
5.3.4.3.1-2 and the response data structures and response codes specified in
table 5.3.4.3.1-3.
Table 5.3.4.3.1-2: Data structures supported by the PUT Request Body on this
resource
* * *
Data type P Cardinality Description AmEventsSubscData M 1 Contains the
information for the creation and/or modification of the AM Policy Events
Subscription sub-resource.
* * *
Table 5.3.4.3.1-3: Data structures supported by the PUT Response Body on this
resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | AmEvents | M | 1 | 201 Created | Successful | | SubscRespData | | | | case. | | | | | | | | | | | | The AM Policy | | | | | | Events | | | | | | Subscription | | | | | | sub-resource | | | | | | was created. | | | | | | The | | | | | | r | | | | | | epresentation | | | | | | of the AM | | | | | | Policy Events | | | | | | Subscription | | | | | | sub-resource | | | | | | is included | | | | | | within the | | | | | | properties of | | | | | | the | | | | | | AmEv | | | | | | entsSubscData | | | | | | data type. | | | | | | The one or | | | | | | more matched | | | | | | events, if | | | | | | available, | | | | | | are included | | | | | | within the | | | | | | properties of | | | | | | the | | | | | | AmEvent | | | | | | sNotification | | | | | | data type. | +---------------+---+-------------+---------------+---------------+ | AmEvents | M | 1 | 200 OK | Successful | | SubscRespData | | | | case. | | | | | | | | | | | | The AM Policy | | | | | | Events | | | | | | Subscription | | | | | | sub-resource | | | | | | was modified | | | | | | and a | | | | | | r | | | | | | epresentation | | | | | | of the | | | | | | sub-resource | | | | | | is returned. | | | | | | The | | | | | | r | | | | | | epresentation | | | | | | of the AM | | | | | | Policy Events | | | | | | Subscription | | | | | | sub-resource | | | | | | is included | | | | | | within the | | | | | | properties of | | | | | | the | | | | | | AmEv | | | | | | entsSubscData | | | | | | data type. | | | | | | The one or | | | | | | more matched | | | | | | events, if | | | | | | available, | | | | | | are included | | | | | | within the | | | | | | properties of | | | | | | the | | | | | | AmEvent | | | | | | sNotification | | | | | | data type. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | Successful | | | | | Content | case. | | | | | | | | | | | | The AM Policy | | | | | | Events | | | | | | Subscription | | | | | | sub-resource | | | | | | was modified. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection, | | | | | | during AM | | | | | | Policy Events | | | | | | Subscription | | | | | | modification. | | | | | | | | | | | | (NOTE 3) | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection, | | | | | | during AM | | | | | | Policy Events | | | | | | Subscription | | | | | | modification. | | | | | | | | | | | | (NOTE 3) | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 404 Not Found | (NOTE 2) | | roblemDetails | | | | | +---------------+---+-------------+---------------+---------------+ | NOTE 1: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status code | | | | | | for the PUT | | | | | | method listed | | | | | | in | | | | | | ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | also apply. | | | | | | | | | | | | NOTE 2: | | | | | | Failure cases | | | | | | are described | | | | | | in | | | | | | clause 5.7. | | | | | | | | | | | | NOTE 3: The | | | | | | Red | | | | | | irectResponse | | | | | | data | | | | | | structure may | | | | | | be provided | | | | | | by an SCP | | | | | | (see | | | | | | cl | | | | | | ause 6.10.9.1 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 9.500 [4]). | | | | | +---------------+---+-------------+---------------+---------------+
Table 5.3.4.3.1-4: Headers supported by the 201 Response Code on this resource
* * *
Name Data type P Cardinality Description
Location string M 1 Contains the URI of the newly created resource, according
to the structure:\ {apiRoot}/npcf-am-policyauthorization/\/\ app-
am-contexts/{appAmContextId}/events-subscription
* * *
Table 5.3.4.3.1-5: Headers supported by the 307 Response Code on this resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | Contains an | | | | | | alternative URI | | | | | | of the resource | | | | | | located in an | | | | | | alternative PCF | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the request is | | | | | | redirected. | | | | | | | | | | | | For the case | | | | | | where the | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | via a different | | | | | | SCP, refer to | | | | | | clause 6.10.9.1 | | | | | | of | | | | | | 3GPP T | | | | | | S 29.500 [4]. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target PCF | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the request is | | | | | | redirected. | +-----------------+-----------+---+-------------+-----------------+
Table 5.3.4.3.1-6: Headers supported by the 308 Response Code on this resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | Contains an | | | | | | alternative URI | | | | | | of the resource | | | | | | located in an | | | | | | alternative PCF | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the request is | | | | | | redirected. | | | | | | | | | | | | For the case | | | | | | where the | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | via a different | | | | | | SCP, refer to | | | | | | clause 6.10.9.1 | | | | | | of | | | | | | 3GPP T | | | | | | S 29.500 [4]. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target PCF | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the request is | | | | | | redirected. | +-----------------+-----------+---+-------------+-----------------+
##### 5.3.4.3.2 DELETE
This method shall support the URI query parameters specified in table
5.3.4.3.2-1.
Table 5.3.4.3.2-1: URI query parameters supported by the DELETE method on this
resource
* * *
Name Data type P Cardinality Description Applicability n/a
* * *
This method shall support the request data structures specified in table
5.3.4.3.2-2 and the response data structures and response codes specified in
table 5.3.4.3.2-3.
Table 5.3.4.3.2-2: Data structures supported by the DELETE Request Body on
this resource
* * *
Data type P Cardinality Description n/a
* * *
Table 5.3.4.3.2-3: Data structures supported by the DELETE Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | Successful | | | | | Content | case. | | | | | | | | | | | | The AM Policy | | | | | | Events | | | | | | Subscription | | | | | | resource is | | | | | | deleted. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection, | | | | | | during AM | | | | | | Policy Events | | | | | | Subscription | | | | | | termination. | | | | | | | | | | | | (NOTE 3) | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection, | | | | | | during AM | | | | | | Policy Events | | | | | | Subscription | | | | | | termination. | | | | | | | | | | | | (NOTE 3) | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 404 Not Found | (NOTE 2) | | roblemDetails | | | | | +---------------+---+-------------+---------------+---------------+ | NOTE 1: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status code | | | | | | for the | | | | | | DELETE method | | | | | | listed in | | | | | | ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | also apply. | | | | | | | | | | | | NOTE 2: | | | | | | Failure cases | | | | | | are described | | | | | | in | | | | | | clause 5.7. | | | | | | | | | | | | NOTE 3: The | | | | | | Red | | | | | | irectResponse | | | | | | data | | | | | | structure may | | | | | | be provided | | | | | | by an SCP | | | | | | (see | | | | | | cl | | | | | | ause 6.10.9.1 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 9.500 [4]). | | | | | +---------------+---+-------------+---------------+---------------+
Table 5.3.4.3.2-4: Headers supported by the 307 Response Code on this resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | Contains an | | | | | | alternative URI | | | | | | of the resource | | | | | | located in an | | | | | | alternative PCF | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the request is | | | | | | redirected. | | | | | | | | | | | | For the case | | | | | | where the | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | via a different | | | | | | SCP, refer to | | | | | | clause 6.10.9.1 | | | | | | of | | | | | | 3GPP T | | | | | | S 29.500 [4]. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target PCF | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the request is | | | | | | redirected. | +-----------------+-----------+---+-------------+-----------------+
Table 5.3.4.3.2-5: Headers supported by the 308 Response Code on this resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | Contains an | | | | | | alternative URI | | | | | | of the resource | | | | | | located in an | | | | | | alternative PCF | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the request is | | | | | | redirected. | | | | | | | | | | | | For the case | | | | | | where the | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | via a different | | | | | | SCP, refer to | | | | | | clause 6.10.9.1 | | | | | | of | | | | | | 3GPP T | | | | | | S 29.500 [4]. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target PCF | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the request is | | | | | | redirected. | +-----------------+-----------+---+-------------+-----------------+
#### 5.3.4.4 Resource Custom Operations
None.
## 5.4 Custom Operations without associated resources
None.
## 5.5 Notifications
### 5.5.1 General
Notifications shall comply to clause 6.2 of 3GPP TS 29.500 [4] and clause
4.6.2.3 of 3GPP TS 29.501 [5].
Table 5.5.1-1: Notifications overview
+----------------+----------------+----------------+----------------+ | Notification | Callback URI | HTTP method or | Description | | | | custom | | | | | operation | (service | | | | | operation) | +================+================+================+================+ | AM Event | { | POST | Notification | | Notification | eventNotifUri} | | of access and | | | | | mobility | | | | | policy changes | | | | | event(s). | +----------------+----------------+----------------+----------------+ | Termination | {termNotifUri} | POST | Request for | | Request | | | termination of | | | | | an Individual | | | | | application AM | | | | | context. | +----------------+----------------+----------------+----------------+
### 5.5.2 AM Event Notification
#### 5.5.2.1 Description
The AM Event Notification is used by the NF service producer to report one or
several observed Access and Mobility policy change Events to a NF service
consumer that has subscribed to such Notifications via the AM Policy Events
Subscription Resource.
#### 5.5.2.2 Target URI
The Callback URI **\"{eventNotifUri}\"** shall be used with the callback URI
variables defined in table 5.5.2.2-1.
Table 5.5.2.2-1: Callback URI variables
+---------------+-----------------------------------------------------+ | Name | Definition | +===============+=====================================================+ | eventNotifUri | String formatted as URI with the Callback Uri. | | | | | | The Callback Uri is assigned within the AM Policy | | | Events Subscription sub-resource and described | | | within the AmEventsSubscData data type (see | | | table 5.6.2.4-1) or AmEventsSubscDataRm data type | | | (see table 5.6.2.7-1). | +---------------+-----------------------------------------------------+
#### 5.5.2.3 Standard Methods
##### 5.5.2.3.1 POST
This method shall support the request data structures specified in table
5.5.2.3.1-1 and the response data structures and response codes specified in
table 5.5.2.3.1-2.
Table 5.5.2.3.1-1: Data structures supported by the POST Request Body
Data type P Cardinality Description
* * *
AmEventsNotification M 1 Provides information about the observed access and
mobility policy change events.
Table 5.5.2.3.1-2: Data structures supported by the POST Response Body
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | codes | | +===============+===+=============+===============+===============+ | n/a | | | 204 No | The receipt | | | | | content | of the | | | | | | Notification | | | | | | is | | | | | | acknowledged. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection, | | | | | | during AM | | | | | | event | | | | | | notification. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection, | | | | | | during AM | | | | | | event | | | | | | notification. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | NOTE 1: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the POST | | | | | | method listed | | | | | | in | | | | | | ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | also apply. | | | | | | | | | | | | NOTE 2: The | | | | | | Red | | | | | | irectResponse | | | | | | data | | | | | | structure may | | | | | | be provided | | | | | | by an SCP | | | | | | (see | | | | | | cl | | | | | | ause 6.10.9.1 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 9.500 [4]). | | | | | +---------------+---+-------------+---------------+---------------+
Table 5.5.2.3.1-4: Headers supported by the 307 Response Code on this resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | Contains an | | | | | | alternative URI | | | | | | representing | | | | | | the end point | | | | | | of an | | | | | | alternative NF | | | | | | consumer | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the | | | | | | notification is | | | | | | redirected. | | | | | | | | | | | | For the case | | | | | | where the | | | | | | notification is | | | | | | redirected to | | | | | | the same target | | | | | | via a different | | | | | | SCP, refer to | | | | | | clause 6.10.9.1 | | | | | | of | | | | | | 3GPP T | | | | | | S 29.500 [4]. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the | | | | | | notification | | | | | | request is | | | | | | redirected. | +-----------------+-----------+---+-------------+-----------------+
Table 5.5.2.3.1-5: Headers supported by the 308 Response Code on this resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | Contains an | | | | | | alternative URI | | | | | | representing | | | | | | the end point | | | | | | of an | | | | | | alternative NF | | | | | | consumer | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the | | | | | | notification is | | | | | | redirected. | | | | | | | | | | | | For the case | | | | | | where the | | | | | | notification is | | | | | | redirected to | | | | | | the same target | | | | | | via a different | | | | | | SCP, refer to | | | | | | clause 6.10.9.1 | | | | | | of | | | | | | 3GPP T | | | | | | S 29.500 [4]. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the | | | | | | notification | | | | | | request is | | | | | | redirected. | +-----------------+-----------+---+-------------+-----------------+
### 5.5.3 Termination Request
#### 5.5.3.1 Description
The Termination request is used by the NF service producer to request the NF
service consumer the deletion of the Individual Application AM context
Resource.
#### 5.5.3.2 Target URI
The Callback URI **\"{termNotifUri}\"** shall be used with the callback URI
variables defined in table 5.5.3.2-1.
Table 5.5.3.2-1: Callback URI variables
+--------------+------------------------------------------------------+ | Name | Definition | +==============+======================================================+ | termNotifUri | String formatted as URI with the Callback Uri. | | | | | | The Callback Uri is assigned within the Individual | | | application AM Context resource and described within | | | the AppAmContextData data type (see table 5.6.2.2-1) | | | or AppAmContextUpdateData data type (see | | | table 5.6.2.3-1). | +--------------+------------------------------------------------------+
#### 5.5.3.3 Standard Methods
##### 5.5.3.3.1 POST
This method shall support the request data structures specified in table
5.5.3.3.1-1 and the response data structures and response codes specified in
table 5.5.3.3.1-1.
Table 5.5.3.3.1-2: Data structures supported by the POST Request Body
Data type P Cardinality Description
* * *
AmTerminationInfo M 1 Provides information about the cause of the termination
request.
Table 5.5.3.3.1-3: Data structures supported by the POST Response Body
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | codes | | +===============+===+=============+===============+===============+ | n/a | | | 204 No | The receipt | | | | | content | of the | | | | | | Notification | | | | | | is | | | | | | acknowledged. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection, | | | | | | during AM | | | | | | event | | | | | | notification. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection, | | | | | | during AM | | | | | | event | | | | | | notification. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | NOTE 1: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the POST | | | | | | method listed | | | | | | in | | | | | | ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | also apply. | | | | | | | | | | | | NOTE 2: The | | | | | | Red | | | | | | irectResponse | | | | | | data | | | | | | structure may | | | | | | be provided | | | | | | by an SCP | | | | | | (see | | | | | | cl | | | | | | ause 6.10.9.1 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 9.500 [4]). | | | | | +---------------+---+-------------+---------------+---------------+
Table 5.5.3.3.1-4: Headers supported by the 307 Response Code on this resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | Contains an | | | | | | alternative URI | | | | | | representing | | | | | | the end point | | | | | | of an | | | | | | alternative NF | | | | | | consumer | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the | | | | | | notification is | | | | | | redirected. | | | | | | | | | | | | For the case | | | | | | where the | | | | | | notification is | | | | | | redirected to | | | | | | the same target | | | | | | via a different | | | | | | SCP, refer to | | | | | | clause 6.10.9.1 | | | | | | of | | | | | | 3GPP T | | | | | | S 29.500 [4]. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the | | | | | | notification | | | | | | request is | | | | | | redirected. | +-----------------+-----------+---+-------------+-----------------+
Table 5.5.3.3.1-5: Headers supported by the 308 Response Code on this resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | Contains an | | | | | | alternative URI | | | | | | representing | | | | | | the end point | | | | | | of an | | | | | | alternative NF | | | | | | consumer | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the | | | | | | notification is | | | | | | redirected. | | | | | | | | | | | | For the case | | | | | | where the | | | | | | notification is | | | | | | redirected to | | | | | | the same target | | | | | | via a different | | | | | | SCP, refer to | | | | | | clause 6.10.9.1 | | | | | | of | | | | | | 3GPP T | | | | | | S 29.500 [4]. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance | | | | | | towards which | | | | | | the | | | | | | notification | | | | | | request is | | | | | | redirected. | +-----------------+-----------+---+-------------+-----------------+
## 5.6 Data Model
### 5.6.1 General
This clause specifies the application data model supported by the API.
Table 5.6.1-1 specifies the data types defined for the
Npcf_AMPolicyAuthorization service based interface protocol.
Table 5.6.1-1: Npcf_AMPolicyAuthorization specific Data Types
+----------------+----------------+----------------+---------------+ | Data type | Clause defined | Description | Applicability | +================+================+================+===============+ | AmEvent | 5.6.3.3 | It represents | | | | | the event the | | | | | PCF can notify | | | | | to the NF | | | | | service | | | | | consumer. | | +----------------+----------------+----------------+---------------+ | AmEve | 5.6.2.9 | Represents the | | | ntNotification | | notification | | | | | of an event. | | +----------------+----------------+----------------+---------------+ | AmEventData | 5.6.2.8 | It contains | | | | | the event | | | | | identifier and | | | | | the related | | | | | event | | | | | reporting | | | | | information. | | +----------------+----------------+----------------+---------------+ | AmEven | 5.6.2.5 | It describes | | | tsNotification | | the | | | | | notification | | | | | about the | | | | | events | | | | | occurred | | | | | within an | | | | | Individual | | | | | application AM | | | | | context | | | | | resource. | | +----------------+----------------+----------------+---------------+ | AmE | 5.6.2.4 | It represents | | | ventsSubscData | | the AM Policy | | | | | Events | | | | | Subscription | | | | | resource and | | | | | identifies the | | | | | events the | | | | | application | | | | | subscribes to. | | +----------------+----------------+----------------+---------------+ | AmEve | 5.6.2.7 | This data type | | | ntsSubscDataRm | | is defined in | | | | | the same way | | | | | as the | | | | | \"AmEve | | | | | ntsSubscData\" | | | | | data type, but | | | | | with the | | | | | OpenAPI | | | | | \"nullable: | | | | | true\" | | | | | property. | | +----------------+----------------+----------------+---------------+ | AmEvent | 5.6.4.2 | It represents | | | sSubscRespData | | a response to | | | | | an AM Policy | | | | | Events | | | | | Subscription | | | | | request and | | | | | contains the | | | | | c | | | | | reated/updated | | | | | AM Policy | | | | | Events | | | | | Subscription | | | | | resource. It | | | | | may also | | | | | include the | | | | | Notification | | | | | of the events | | | | | met at the | | | | | time of | | | | | subscription. | | | | | | | | | | It is | | | | | represented as | | | | | a | | | | | non-exclusive | | | | | list of two | | | | | data types: | | | | | AmE | | | | | ventsSubscData | | | | | and | | | | | AmEvent | | | | | sNotification. | | +----------------+----------------+----------------+---------------+ | AmTe | 5.6.3.5 | It represents | | | rminationCause | | the cause | | | | | values that | | | | | the PCF should | | | | | report when | | | | | requesting to | | | | | an NF service | | | | | consumer the | | | | | deletion of an | | | | | \"AF | | | | | application AM | | | | | context\" | | | | | resource. | | +----------------+----------------+----------------+---------------+ | AmT | 5.6.2.6 | It includes | | | erminationInfo | | information | | | | | related to the | | | | | termination of | | | | | the Individual | | | | | Application AM | | | | | Context | | | | | resource. | | +----------------+----------------+----------------+---------------+ | Ap | 5.6.2.2 | It represents | | | pAmContextData | | an Individual | | | | | application AM | | | | | context | | | | | resource. | | +----------------+----------------+----------------+---------------+ | AppAmC | 5.6.4.1 | It represents | | | ontextRespData | | a response to | | | | | a modification | | | | | or creation | | | | | request of an | | | | | Individual | | | | | application AM | | | | | context | | | | | resource. | | | | | | | | | | It is | | | | | represented as | | | | | a | | | | | non-exclusive | | | | | list of two | | | | | data types | | | | | Ap | | | | | pAmContextData | | | | | and | | | | | AmEvent | | | | | sNotification. | | +----------------+----------------+----------------+---------------+ | AppAmCon | 5.6.2.3 | It describes | | | textUpdateData | | the | | | | | modifications | | | | | to an | | | | | Individual | | | | | application AM | | | | | context | | | | | resource. | | +----------------+----------------+----------------+---------------+ | Pd | 5.6.2.10 | It contains | | | uidInformation | | the PDUID and | | | | | its validity | | | | | timer. | | +----------------+----------------+----------------+---------------+ | ServiceAr | 5.6.2.11 | It represents | | | eaCoverageInfo | | a list of | | | | | Tracking Areas | | | | | within a | | | | | serving | | | | | network. | | +----------------+----------------+----------------+---------------+
Table 5.6.1-2 specifies data types re-used by the Npcf_AMPolicyAuthorization
service based interface protocol from other specifications, including a
reference to their respective specifications and when needed, a short
description of their use within the Npcf_AMPolicyAuthorization service based
interface.
Table 5.6.1-2: Npcf_AMPolicyAuthorization re-used Data Types
Data type Reference Comments Applicability
* * *
AsTimeDistributionParam 3GPP TS 29.507 [16] Contains the 5G access stratum
time distribution parameters.  
DurationSec 3GPP TS 29.571 [20] Indicates a period of time in units of
seconds.  
DurationSecRm 3GPP TS 29.571 [20] It is defined as DurationSec but with the
nullable property set to \"true\".  
Gpsi 3GPP TS 29.571 [20] Identifies a GPSI.  
NotificationMethod 3GPP TS 29.508 [21] It includes information about the
notification methods that can be subscribed by the NF service consumer.  
Pduid 3GPP TS 29.555 [24] String containing a PDUID  
RedirectResponse 3GPP TS 29.571 [20] It contains redirection related
information.  
Supi 3GPP TS 29.571 [20] Identifies the SUPI.  
SupportedFeatures 3GPP TS 29.571 [20] Used to negotiate the applicability of
the optional features defined in table 5.8-1.  
Tac 3GPP TS 29.571 [20] It contains a Tracking Area Code  
PlmnIdNid 3GPP TS 29.571 [20] It contains the serving PLMN ID and, for a SNPN,
the NID that together with the PLMN ID identifies the SNPN.  
Uinteger 3GPP TS 29.571 [20] Unsigned integer.  
Uri 3GPP TS 29.571 [20] String providing a URI.
### 5.6.2 Structured data types
#### 5.6.2.1 Introduction
This clause defines the structures to be used in resource representations.
#### 5.6.2.2 Type: AppAmContextData
Table 5.6.2.2-1: Definition of type AppAmContextData
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +===========+===========+===+===========+===========+===========+ | evSubsc | AmEvents | O | 0..1 | R | | | | SubscData | | | epresents | | | | | | | the | | | | | | | sub | | | | | | | scription | | | | | | | to one or | | | | | | | more AM | | | | | | | policy | | | | | | | events. | | | | | | | (NOTE 1) | | +-----------+-----------+---+-----------+-----------+-----------+ | supi | Supi | M | 1 | I | | | | | | | dentifies | | | | | | | the SUPI. | | +-----------+-----------+---+-----------+-----------+-----------+ | gpsi | Gpsi | O | 0..1 | I | | | | | | | dentifies | | | | | | | the GPSI. | | +-----------+-----------+---+-----------+-----------+-----------+ | suppFeat | Supporte | C | 0..1 | This IE | | | | dFeatures | | | r | | | | | | | epresents | | | | | | | a list of | | | | | | | Supported | | | | | | | features | | | | | | | used as | | | | | | | described | | | | | | | in | | | | | | | cl | | | | | | | ause 5.8. | | | | | | | | | | | | | | It shall | | | | | | | be | | | | | | | supplied | | | | | | | by the NF | | | | | | | service | | | | | | | consumer | | | | | | | in the | | | | | | | POST | | | | | | | request | | | | | | | that | | | | | | | requests | | | | | | | a | | | | | | | creation | | | | | | | of an | | | | | | | I | | | | | | | ndividual | | | | | | | ap | | | | | | | plication | | | | | | | AM | | | | | | | context | | | | | | | resource. | | | | | | | | | | | | | | It shall | | | | | | | be | | | | | | | supplied | | | | | | | by the | | | | | | | PCF in | | | | | | | the | | | | | | | response | | | | | | | to the | | | | | | | POST | | | | | | | request | | | | | | | that | | | | | | | requests | | | | | | | a | | | | | | | creation | | | | | | | of an | | | | | | | I | | | | | | | ndividual | | | | | | | ap | | | | | | | plication | | | | | | | AM | | | | | | | context | | | | | | | resource. | | +-----------+-----------+---+-----------+-----------+-----------+ | ter | Uri | M | 1 | I | | | mNotifUri | | | | dentifies | | | | | | | the | | | | | | | callback | | | | | | | URI where | | | | | | | the PCF | | | | | | | notifies | | | | | | | te | | | | | | | rmination | | | | | | | requests. | | +-----------+-----------+---+-----------+-----------+-----------+ | expiry | Du | O | 0..1 | Indicates | | | | rationSec | | | the time | | | | | | | duration | | | | | | | that the | | | | | | | requested | | | | | | | policy | | | | | | | shall | | | | | | | last. If | | | | | | | omitted, | | | | | | | it | | | | | | | indicates | | | | | | | that the | | | | | | | requested | | | | | | | policy | | | | | | | lasts | | | | | | | till the | | | | | | | I | | | | | | | ndividual | | | | | | | Ap | | | | | | | plication | | | | | | | AM | | | | | | | context | | | | | | | resource | | | | | | | is | | | | | | | deleted. | | +-----------+-----------+---+-----------+-----------+-----------+ | hi | boolean | C | 0..1 | Indicates | | | ghThruInd | | | | whether | | | | | | | high | | | | | | | t | | | | | | | hroughput | | | | | | | is | | | | | | | desired | | | | | | | for the | | | | | | | indicated | | | | | | | UE | | | | | | | traffic. | | | | | | | Set to | | | | | | | \"true\" | | | | | | | if high | | | | | | | t | | | | | | | hroughput | | | | | | | is | | | | | | | desired; | | | | | | | otherwise | | | | | | | set to | | | | | | | \ | | | | | | | "false\". | | | | | | | Default | | | | | | | value is | | | | | | | \"false\" | | | | | | | if | | | | | | | omitted. | | | | | | | | | | | | | | (NOTE 1) | | +-----------+-----------+---+-----------+-----------+-----------+ | covReq | arr | C | 1..N | I | | | | ay(Servic | | | dentifies | | | | eAreaCove | | | a list of | | | | rageInfo) | | | Tracking | | | | | | | Areas per | | | | | | | serving | | | | | | | network | | | | | | | where the | | | | | | | service | | | | | | | is | | | | | | | allowed. | | | | | | | | | | | | | | (NOTE 1) | | +-----------+-----------+---+-----------+-----------+-----------+ | asTim | AsTim | C | 0..1 | Contains | | | eDisParam | eDistribu | | | the 5G | | | | tionParam | | | access | | | | | | | stratum | | | | | | | time | | | | | | | dis | | | | | | | tribution | | | | | | | pa | | | | | | | rameters. | | | | | | | | | | | | | | (NOTE 1) | | | | | | | (NOTE 2) | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE 1: | | | | | | | When | | | | | | | neither | | | | | | | the | | | | | | | \"asTimeD | | | | | | | isParam\" | | | | | | | attribute | | | | | | | is | | | | | | | included | | | | | | | nor the | | | | | | | \" | | | | | | | evSubsc\" | | | | | | | is | | | | | | | provided | | | | | | | to | | | | | | | subscribe | | | | | | | to events | | | | | | | without | | | | | | | an | | | | | | | existing | | | | | | | AF | | | | | | | ap | | | | | | | plication | | | | | | | AM | | | | | | | context, | | | | | | | the | | | | | | | \"high | | | | | | | ThruInd\" | | | | | | | a | | | | | | | ttribute, | | | | | | | the | | | | | | | \ | | | | | | | "covReq\" | | | | | | | attribute | | | | | | | or both | | | | | | | of them | | | | | | | shall be | | | | | | | included. | | | | | | | When | | | | | | | neither | | | | | | | the | | | | | | | \"high | | | | | | | ThruInd\" | | | | | | | attribute | | | | | | | nor the | | | | | | | \ | | | | | | | "covReq\" | | | | | | | attribute | | | | | | | is | | | | | | | included, | | | | | | | then the | | | | | | | \"asTimeD | | | | | | | isParam\" | | | | | | | attribute | | | | | | | shall be | | | | | | | included, | | | | | | | unless | | | | | | | the data | | | | | | | type is | | | | | | | used for | | | | | | | su | | | | | | | bscribing | | | | | | | to events | | | | | | | without | | | | | | | an | | | | | | | existing | | | | | | | AF | | | | | | | ap | | | | | | | plication | | | | | | | AM | | | | | | | context | | | | | | | as | | | | | | | described | | | | | | | in | | | | | | | clause | | | | | | | 4.2.5.3, | | | | | | | in which | | | | | | | case it | | | | | | | is | | | | | | | s | | | | | | | ufficient | | | | | | | to | | | | | | | provide | | | | | | | the | | | | | | | \" | | | | | | | evSubsc\" | | | | | | | a | | | | | | | ttribute. | | | | | | | | | | | | | | NOTE 2: | | | | | | | The | | | | | | | \"clkQl | | | | | | | tDetLvl\" | | | | | | | attribute | | | | | | | and the | | | | | | | \"clkQlt | | | | | | | AcptCri\" | | | | | | | attribute | | | | | | | within | | | | | | | \"asTimeD | | | | | | | isParam\" | | | | | | | attribute | | | | | | | may be | | | | | | | provided | | | | | | | only if | | | | | | | the | | | | | | | \"N | | | | | | | etTimeSyn | | | | | | | cStatus\" | | | | | | | feature | | | | | | | is | | | | | | | s | | | | | | | upported. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
#### 5.6.2.3 Type: AppAmContextUpdateData
Table 5.6.2.3-1: Definition of type AppAmContextUpdateData
Attribute name Data type P Cardinality Description Applicability
* * *
evSubsc AmEventsSubscDataRm O 0..1 Represents the subscription to one or more
AM policy events.  
termNotifUri Uri O 0..1 Identifies the callback URI where the PCF notifies
termination requests.  
expiry DurationSecRm O 0..1 The expiration time of the AM related policy. If
removed (i.e. set to \"NULL\"), it indicates that the requested policy lasts
till the Individual Application AM context resource is deleted.  
highThruInd boolean O 0..1 Indicates whether high throughput is desired for
the indicated UE traffic. Set to \"true\" if high throughput is desired;
otherwise set to \"false\".  
covReq array(ServiceAreaCoverageInfo) O 1..N Identifies a list of Tracking
Areas per serving network where the service is allowed.  
asTimeDisParam AsTimeDistributionParam O 0..1 Contains the 5G access stratum
time distribution parameters. (NOTE)  
NOTE: The \"clkQltDetLvl\" attribute and \"clkQltAcptCri\" within
\"asTimeDisParam\" attribute may be provided only if the \"NetTimeSyncStatus\"
feature is supported.
#### 5.6.2.4 Type: AmEventsSubscData
Table 5.6.2.4-1: Definition of type AmEventsSubscData
Attribute name Data type P Cardinality Description Applicability
* * *
eventNotifUri Uri M 1 Indicates the callback URI where the PCF sends the
access and mobility changes events met.  
events array(AmEventData) O 1..N Indicates the one or more access and mobility
related events.
#### 5.6.2.5 Type: AmEventsNotification
Table 5.6.2.5-1: Definition of type AmEventsNotification
Attribute name Data type P Cardinality Description Applicability
* * *
repEvents array(AmEventNotification) M 1..N The list of the reported events.  
appAmContextId string C 0..1 Contains the AM Policy Events Subscription
resource identifier related to the event notification. It shall be included in
the notification requests. It may be omitted in the resource creation/update
replies. (NOTE)  
NOTE: The complete resource URI defined in clause 5.3.4.2 is included.
#### 5.6.2.6 Type: AmTerminationInfo
Table 5.6.2.6-1: Definition of type AmTerminationInfo
Attribute name Data type P Cardinality Description Applicability
* * *
appAmContextId string M 1 Contains the Individual application AM context
resource identifier related to the termination notification. (NOTE)  
termCause AmTerminationCause M 1 Indicates the cause for requesting the
termination of the Individual application AM context resource.  
NOTE: The complete resource URI defined in clause 5.3.3.2 is included.
#### 5.6.2.7 Type AmEventsSubscDataRm
This data type is defined as the AmEventsSubscData type, but:
\- with the OpenAPI \"nullable: true\" property; and
\- the attributes are defined as optional.
Table 5.6.2.7-1: Definition of type AmEventsSubscDataRm
Attribute name Data type P Cardinality Description Applicability
* * *
eventNotifUri Uri O 0..1 Indicates the callback URI where the PCF sends the
access and mobility changes events met.  
events array(AmEventData) O 1..N Indicates the one or more access and mobility
related events.
#### 5.6.2.8 Type AmEventData
Table 5.6.2.8-1: Definition of type AmEventData
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +===========+===========+===+===========+===========+===========+ | event | AmEvent | M | 1 | S | | | | | | | ubscribed | | | | | | | Event. | | +-----------+-----------+---+-----------+-----------+-----------+ | immRep | boolean | O | 0..1 | I | | | | | | | ndication | | | | | | | of | | | | | | | immediate | | | | | | | r | | | | | | | eporting: | | | | | | | | | | | | | | - true: | | | | | | | requires | | | | | | | the | | | | | | | immediate | | | | | | | reporting | | | | | | | of the | | | | | | | current | | | | | | | value of | | | | | | | the | | | | | | | s | | | | | | | ubscribed | | | | | | | event, if | | | | | | | a | | | | | | | vailable. | | | | | | | | | | | | | | - false | | | | | | | ( | | | | | | | default): | | | | | | | event | | | | | | | report | | | | | | | occurs | | | | | | | when the | | | | | | | event is | | | | | | | met. | | +-----------+-----------+---+-----------+-----------+-----------+ | no | Notificat | O | 0..1 | R | | | tifMethod | ionMethod | | | epresents | | | | | | | the | | | | | | | not | | | | | | | ification | | | | | | | method | | | | | | | ( | | | | | | | periodic, | | | | | | | one time, | | | | | | | on event | | | | | | | de | | | | | | | tection). | | | | | | | If | | | | | | | \"noti | | | | | | | fMethod\" | | | | | | | attribute | | | | | | | is not | | | | | | | supplied, | | | | | | | the | | | | | | | default | | | | | | | value | | | | | | | \"ON_ | | | | | | | EVENT_DE | | | | | | | TECTION\" | | | | | | | applies. | | +-----------+-----------+---+-----------+-----------+-----------+ | max | Uinteger | O | 0..1 | R | | | ReportNbr | | | | epresents | | | | | | | the | | | | | | | maximum | | | | | | | number of | | | | | | | reports, | | | | | | | after | | | | | | | which the | | | | | | | sub | | | | | | | scription | | | | | | | ceases to | | | | | | | exist | | | | | | | (i.e., | | | | | | | the | | | | | | | reporting | | | | | | | ends). It | | | | | | | may be | | | | | | | present | | | | | | | for the | | | | | | | \"P | | | | | | | ERIODIC\" | | | | | | | and on | | | | | | | \"ON_ | | | | | | | EVENT_DE | | | | | | | TECTION\" | | | | | | | not | | | | | | | ification | | | | | | | methods. | | | | | | | If | | | | | | | omitted, | | | | | | | there is | | | | | | | no limit. | | +-----------+-----------+---+-----------+-----------+-----------+ | monDur | DateTime | C | 0..1 | R | | | | | | | epresents | | | | | | | the time | | | | | | | at which | | | | | | | the | | | | | | | sub | | | | | | | scription | | | | | | | ceases to | | | | | | | exist | | | | | | | (i.e the | | | | | | | sub | | | | | | | scription | | | | | | | becomes | | | | | | | invalid | | | | | | | and the | | | | | | | reporting | | | | | | | ends). If | | | | | | | omitted, | | | | | | | there is | | | | | | | no time | | | | | | | limit. If | | | | | | | present | | | | | | | in the | | | | | | | sub | | | | | | | scription | | | | | | | request, | | | | | | | it shall | | | | | | | be | | | | | | | present | | | | | | | in the | | | | | | | sub | | | | | | | scription | | | | | | | response. | | +-----------+-----------+---+-----------+-----------+-----------+ | repPeriod | Du | O | 0..1 | Indicates | | | | rationSec | | | the time | | | | | | | interval | | | | | | | between | | | | | | | s | | | | | | | uccessive | | | | | | | event | | | | | | | notific | | | | | | | ations.It | | | | | | | is | | | | | | | supplied | | | | | | | for | | | | | | | not | | | | | | | ification | | | | | | | method | | | | | | | \"PE | | | | | | | RIODIC\". | | +-----------+-----------+---+-----------+-----------+-----------+
#### 5.6.2.9 Type: AmEventNotification
Table 5.6.2.9-1: Definition of type AmEventNotification
Attribute name Data type P Cardinality Description Applicability
* * *
event AmEvent M 1 Notified event.  
appliedCov ServiceAreaCoverageInfo C 0..1 The list of applied Tracking Areas
for the serving network where the UE is camping. It shall be present when the
notified event is \"SAC_CH\".  
pduidInfo PduidInformation C 0..1 Contains the PDUID and its validity timer.
It shall be included when the \"PDUID_CH\" event is reported.
#### 5.6.2.10 Type: PduidInformation
Table 5.6.2.10-1: Definition of type PduidInformation
Attribute name Data type P Cardinality Description Applicability
* * *
expiry DateTime M 1 Contains the expiration time of validity of UE policies
for 5G Prose direct discovery.  
pduid Pduid M 1 Contains the PDUID as defined in Table 5.3.1.1 of 3GPP TS
24.555 [23].
#### 5.6.2.11 Type: ServiceAreaCoverageInfo
Table 5.6.2.11-1: Definition of type ServiceAreaCoverageInfo
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +===========+===========+===+===========+===========+===========+ | tacList | a | M | 0..N | It | | | | rray(Tac) | | | contains | | | | | | | a list of | | | | | | | the | | | | | | | Tracking | | | | | | | Area | | | | | | | codes | | | | | | | where the | | | | | | | requested | | | | | | | service | | | | | | | shall be | | | | | | | allowed. | | | | | | | | | | | | | | An empty | | | | | | | array may | | | | | | | be | | | | | | | included | | | | | | | within | | | | | | | the | | | | | | | A | | | | | | | mEventNot | | | | | | | ification | | | | | | | data type | | | | | | | and | | | | | | | indicates | | | | | | | the | | | | | | | service | | | | | | | is | | | | | | | r | | | | | | | estricted | | | | | | | in the | | | | | | | serving | | | | | | | network. | | +-----------+-----------+---+-----------+-----------+-----------+ | servi | PlmnIdNid | O | 0..1 | It | | | ngNetwork | | | | contains | | | | | | | the | | | | | | | serving | | | | | | | PLMN ID | | | | | | | and, for | | | | | | | a SNPN, | | | | | | | the NID | | | | | | | that | | | | | | | together | | | | | | | with the | | | | | | | PLMN ID | | | | | | | i | | | | | | | dentifies | | | | | | | the SNPN. | | | | | | | It may be | | | | | | | omitted | | | | | | | when | | | | | | | serving | | | | | | | network | | | | | | | is the UE | | | | | | | H-PLMN. | | +-----------+-----------+---+-----------+-----------+-----------+
### 5.6.3 Simple data types and enumerations
#### 5.6.3.1 Introduction
This clause defines simple data types and enumerations that can be referenced
from data structures defined in the previous clauses.
#### 5.6.3.2 Simple data types
The simple data types defined in table 5.6.3.2-1 shall be supported.
Table 5.6.3.2-1: Simple data types
* * *
Type Name Type Definition Description Applicability
* * *
#### 5.6.3.3 Enumeration: AmEvent
The enumeration \"AmEvent\" represents the events the PCF can notify to the NF
service consumer.
Table 5.6.3.3-1: Enumeration AmEvent
+-------------------------+-------------------------+---------------+ | Enumeration value | Description | Applicability | +=========================+=========================+===============+ | SAC_CH | This trigger indicates | | | | a service area coverage | | | | change for a UE. | | +-------------------------+-------------------------+---------------+ | PDUID_CH | The PDUID assigned to a | | | | UE for the UE ProSe | | | | Policies has changed. | | | | | | | | (NOTE) | | +-------------------------+-------------------------+---------------+ | NOTE: This event can | | | | only be subscribed | | | | using the | | | | Npcf_AMPolicyA | | | | uthorization_Subscribe | | | | service operation. | | | +-------------------------+-------------------------+---------------+
#### 5.6.3.4 Enumeration: AmTerminationCause
The enumeration \"AmTerminationCause\" represents the cause values that the
PCF should report when requesting to the NF service consumer the deletion of
the \"AF application AM context\" resource. It shall comply with the
provisions of table 5.6.3.4-1.
Table 5.6.3.4-1: Enumeration AmTerminationCause
Enumeration value Description Applicability
* * *
UE_DEREGISTERED UE initiates the deregistration procedure.  
UNSPECIFIED This value is used for unspecified reasons.  
INSUFFICIENT_RESOURCES Indicates that the server is overloaded and needs to
release the AF application AM context resource.
### 5.6.4 Data types describing alternative data types or combinations of data
types
#### 5.6.4.1 Type: AppAmContextRespData
Table 5.6.4.1-1: Definition of type AppAmContextRespData as a list of non-
exclusive alternatives
Data type Cardinality Description Applicability
* * *
AmEventsNotification 0..1 It represents the notification of a match event
during the creation or modification of the Individual application AM context
data.  
AppAmContextData 1 It represents the Individual application AM context
resource.
#### 5.6.4.2 Type: AmEventsSubscRespData
Table 5.6.4.2-1: Definition of type AmEventsSubscRespData as a list of non-
exclusive alternatives
Data type Cardinality Description Applicability
* * *
AmEventsSubscData 1 It represents the AM Policy Events subscription resource.  
AmEventsNotification 0..1 It represents the notification of a match event
during the creation or modification of the AM Policy Events Subscription
resource.
### 5.6.5 Binary data
#### 5.6.5.1 Binary Data Types
None.
## 5.7 Error Handling
### 5.7.1 General
HTTP error handling shall be supported as specified in clause 5.2.4 of 3GPP TS
29.500 [5].
For the Npcf_AMPolicyAuthorization API, HTTP error responses shall be
supported as specified in clause 4.8 of 3GPP TS 29.501 [5]. Protocol errors
and application errors specified in table 5.2.7.2-1 of 3GPP TS 29.500 [4]
shall be supported for an HTTP method if the corresponding HTTP status codes
are specified as mandatory for that HTTP method in table 5.2.7.1-1 of 3GPP TS
29.500 [4].
In addition, the requirements in the following clauses are applicable for the
Npcf_AMPolicyAuthorization API.
### 5.7.2 Protocol Errors
No specific procedures for the Npcf_AMPolicyAuthorization service are
specified.
### 5.7.3 Application Errors
The application errors defined for the Npcf_AMPolicyAuthorization service are
listed in Table 5.7.3-1.
Table 5.7.3-1: Application errors
+----------------------+----------------------+----------------------+ | Application Error | HTTP status code | Description | +======================+======================+======================+ | INVA | 400 Bad Request | The HTTP request is | | LID_POLICY_REQUEST | | rejected because the | | | | service information | | | | for the AM context | | | | is invalid or | | | | insufficient for the | | | | PCF to perform the | | | | requested action. | | | | (NOTE 1) | +----------------------+----------------------+----------------------+ | APPLICATION_AM\ | 404 Not Found | The HTTP request is | | _CONTEXT_NOT_FOUND | | rejected because the | | | | specified Individual | | | | Application AM | | | | Context does not | | | | exist. (NOTE 3) | +----------------------+----------------------+----------------------+ | POLICY_ASSOCIA | 500 Internal Server | The PCF failed in | | TION_NOT_AVAILABLE | Error | executing binding | | | | with the UE/AM | | | | Policy Context. | | | | (NOTE 2) | +----------------------+----------------------+----------------------+ | NOTE 1: This | | | | application error is | | | | included in the | | | | response to the | | | | PATCH request (see | | | | clauses 4.2.3.2). | | | | | | | | NOTE 2: This | | | | application error is | | | | included in the | | | | response to the POST | | | | request (see | | | | clauses 4.2.2.2 and | | | | 4.2.5.3). | | | | | | | | NOTE 3: This | | | | application error is | | | | included in the | | | | responses to the | | | | GET, PATCH and | | | | DELETE requests to | | | | the Individual | | | | Application AM | | | | Context resource, | | | | and to the PUT and | | | | DELETE requests to | | | | the AM Policy Events | | | | Subscription | | | | resource. | | | +----------------------+----------------------+----------------------+
## 5.8 Feature negotiation
The optional features in table 5.8-1 are defined for the
Npcf_AMPolicyAuthorization API. They shall be negotiated using the
extensibility mechanism defined in clause 6.6 of 3GPP TS 29.500 [4].
Table 5.8-1: Supported Features
Feature number Feature Name Description
* * *
1 NetTimeSyncStatus This feature indicates the support of network timing
synchronization status and reporting.
## 5.9 Security
As indicated in 3GPP TS 33.501 [8] and 3GPP TS 29.500 [4], the access to the
Npcf_AMPolicyAuthorization API may be authorized by means of the OAuth2
protocol (see IETF RFC 6749 [9]), based on local configuration, using the
\"Client Credentials\" authorization grant, where the NRF (see 3GPP TS 29.510
[10]) plays the role of the authorization server.
If OAuth2 is used, an NF Service Consumer, prior to consuming services offered
by the Npcf_AMPolicyAuthorization API, shall obtain a \"token\" from the
authorization server, by invoking the Access Token Request service, as
described in 3GPP TS 29.510 [10], clause 5.4.2.2.
NOTE: When multiple NRFs are deployed in a network, the NRF used as
authorization server is the same NRF that the NF Service Consumer used for
discovering the Npcf_AMPolicyAuthorization service.
The Npcf_AMPolicyAuthorization API defines a single scope \" npcf-am-
policyauthorization \" for the entire service, and it does not define any
additional scopes at resource or operation level.
###### ## Annex A (normative): OpenAPI specification
# A.1 General
This Annex specifies the formal definition of the API(s) defined in the
present specification. It consists of OpenAPI specifications in YAML format.
This Annex takes precedence when being discrepant to other parts of the
specification with respect to the encoding of information elements and methods
within the API(s).
NOTE 1: The semantics and procedures, as well as conditions, e.g. for the
applicability and allowed combinations of attributes or values, not expressed
in the OpenAPI definitions but defined in other parts of the specification
also apply.
Informative copies of the OpenAPI specification files contained in this 3GPP
Technical Specification are available on a Git-based repository that uses the
GitLab software version control system (see 3GPP TS 29.501 [5] clause 5.3.1
and 3GPP TR 21.900 [7] clause 5B).
# A.2 Npcf_AMPolicyAuthorization API
openapi: 3.0.0
#
info:
title: Npcf_AMPolicyAuthorization Service API
version: 1.1.0-alpha.2
description: \|
PCF Access and Mobility Policy Authorization Service.
Â© 2023, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI, TTA,
TTC).
All rights reserved.
externalDocs:
description: >
3GPP TS 29.534 V18.1.0;
5G System; Access and Mobility Policy Authorization Service; Stage 3.
url: \'https://www.3gpp.org/ftp/Specs/archive/29_series/29.534/\'
#
servers:
\- url: \'{apiRoot}/npcf-am-policyauthorization/v1\'
variables:
apiRoot:
default: https://example.com
description: apiRoot as defined in clause 4.4 of 3GPP TS 29.501
#
security:
\- {}
\- oAuth2ClientCredentials:
\- npcf-am-policyauthorization
#
paths:
/app-am-contexts:
post:
summary: Creates a new Individual Application AM Context resource
operationId: PostAppAmContexts
tags:
\- Application AM contexts (Collection)
requestBody:
description: Contains the information for the creation the resource.
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/AppAmContextData\'
responses:
\'201\':
description: Successful creation of the resource.
content:
application/json:
schema:
\$ref: \'#/components/schemas/AppAmContextRespData\'
headers:
Location:
description: >
Contains the URI of the created individual application AM context resource,
according to the structure
{apiRoot}/npcf-am-policyauthorization/\/app-am-
contexts/{appAmContextId}
or the URI of the created AM Policy events subscription subresource,
according to the structure
{apiRoot}/npcf-am-policyauthorization/\/app-am-
contexts/{appAmContextId}/events-subscription}
required: true
schema:
type: string
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'502\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/502\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
callbacks:
terminationRequest:
\'{\$request.body#/termNotifUri}\':
post:
requestBody:
description: Request of the termination of the Individual Application AM
Context.
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/AmTerminationInfo\'
responses:
\'204\':
description: The receipt of the notification is acknowledged.
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'502\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/502\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
amEventNotification:
\'{\$request.body#/evSubsc/eventNotifUri}\':
post:
requestBody:
description: Notification of an event occurrence in the PCF.
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/AmEventsNotification\'
responses:
\'204\':
description: The receipt of the notification is acknowledged.
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'502\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/502\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
#
/app-am-contexts/{appAmContextId}:
get:
summary: \"Reads an existing Individual Application AM Context\"
operationId: GetAppAmContext
tags:
\- Individual Application AM Context (Document)
parameters:
\- name: appAmContextId
description: String identifying the resource.
in: path
required: true
schema:
type: string
responses:
\'200\':
description: A representation of the resource is returned.
content:
application/json:
schema:
\$ref: \'#/components/schemas/AppAmContextData\'
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'406\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/406\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'502\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/502\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
#
patch:
summary: \"Modifies an existing Individual Application AM Context\"
operationId: ModAppAmContext
tags:
\- Individual Application AM Context (Document)
parameters:
\- name: appAmContextId
description: String identifying the resource.
in: path
required: true
schema:
type: string
requestBody:
description: Modification of the resource.
required: true
content:
application/merge-patch+json:
schema:
\$ref: \'#/components/schemas/AppAmContextUpdateData\'
responses:
\'200\':
description: >
Successful modification of the resource and a representation of that resource
is
returned. If a subscribed event is matched, the event notification is also
included
in the response.
content:
application/json:
schema:
\$ref: \'#/components/schemas/AppAmContextRespData\'
\'204\':
description: The successful modification.
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'502\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/502\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
callbacks:
amEventNotification:
\'{\$request.body#/evSubsc/eventNotifUri}\':
post:
requestBody:
description: Notification of an event occurrence in the PCF.
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/AmEventsNotification\'
responses:
\'204\':
description: The receipt of the notification is acknowledged.
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'502\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/502\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
#
delete:
summary: Deletes an existing Individual Application AM Context
operationId: DeleteAppAmContext
tags:
\- Individual Application AM Context (Document)
parameters:
\- name: appAmContextId
description: String identifying the Individual Application AM Context
resource.
in: path
required: true
schema:
type: string
responses:
\'204\':
description: The deletion is confirmed without returning additional data.
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'502\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/502\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
#
/app-am-contexts/{appAmContextId}/events-subscription:
put:
summary: creates or modifies an AM Policy Events Subscription subresource.
operationId: updateAmEventsSubsc
tags:
\- AM Policy Events Subscription (Document)
parameters:
\- name: appAmContextId
description: String identifying the AM Policy Events Subscription subresource.
in: path
required: true
schema:
type: string
requestBody:
description: Creation or modification of an AM Policy Events Subscription
subresource.
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/AmEventsSubscData\'
responses:
\'201\':
description: >
The creation of the AM Policy Events Subscription subresource is confirmed and
its
representation is returned. If an AM Event is matched, the response also
includes the
notification.
content:
application/json:
schema:
\$ref: \'#/components/schemas/AmEventsSubscRespData\'
headers:
Location:
description: >
Contains the URI of the created AM Policy Events Subscription subresource,
according to the structure
{apiRoot}/npcf-am-policyauthorization/\/app-am-
contexts/{appAmContextId}/events-subscription}
required: true
schema:
type: string
\'200\':
description: >
The modification of the AM Policy Events Subscription subresource is confirmed
and
its representation is returned. If an AM Event is matched, the response also
includes
the notification.
content:
application/json:
schema:
\$ref: \'#/components/schemas/AmEventsSubscRespData\'
\'204\':
description: >
The modification of the AM Policy Events Subscription subresource is confirmed
without returning additional data.
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'502\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/502\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
callbacks:
amEventNotification:
\'{\$request.body#/evSubsc/eventNotifUri}\':
post:
requestBody:
description: >
Contains the information for the notification of an event occurrence in the
PCF.
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/AmEventsNotification\'
responses:
\'204\':
description: The receipt of the notification is acknowledged.
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'502\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/502\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
delete:
summary: deletes the AM Policy Events Subscription subresource
operationId: DeleteAmEventsSubsc
tags:
\- AM Policy Events Subscription (Document)
parameters:
\- name: appAmContextId
description: String identifying the Individual Application AM Context
resource.
in: path
required: true
schema:
type: string
responses:
\'204\':
description: >
The deletion of the of the AM Policy Events Subscription subresource
is confirmed without returning additional data.
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'502\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/502\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
#
#
components:
#
securitySchemes:
oAuth2ClientCredentials:
type: oauth2
flows:
clientCredentials:
tokenUrl: \'{nrfApiRoot}/oauth2/token\'
scopes:
npcf-am-policyauthorization: Access to the Npcf_AMPolicyAuthorization API
#
schemas:
#
AppAmContextData:
description: Represents an Individual Application AM Context resource.
type: object
required:
\- supi
\- termNotifUri
properties:
supi:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Supi\'
gpsi:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Gpsi\'
termNotifUri:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uri\'
evSubsc:
\$ref: \'#/components/schemas/AmEventsSubscData\'
suppFeat:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures\'
expiry:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DurationSec\'
highThruInd:
type: boolean
description: Indicates whether high throughput is desired for the indicated UE
traffic.
covReq:
type: array
description: >
Identifies a list of Tracking Areas per serving network where service is
allowed.
items:
\$ref: \'#/components/schemas/ServiceAreaCoverageInfo\'
minItems: 1
asTimeDisParam:
\$ref:
\'TS29507_Npcf_AMPolicyControl.yaml#/components/schemas/AsTimeDistributionParam\'
anyOf:
\- anyOf:
\- required: [highThruInd]
\- required: [covReq]
\- required: [asTimeDisParam]
\- required: [evSubsc]
#
#
AppAmContextUpdateData:
description: Describes the modifications to an Individual Application AM
resource.
type: object
properties:
termNotifUri:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uri\'
evSubsc:
\$ref: \'#/components/schemas/AmEventsSubscDataRm\'
expiry:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DurationSecRm\'
highThruInd:
description: Indicates whether high throughput is desired for the indicated UE
traffic.
type: boolean
nullable: true
covReq:
type: array
description: >
Identifies a list of Tracking Areas per serving network where service is
allowed.
items:
\$ref: \'#/components/schemas/ServiceAreaCoverageInfo\'
minItems: 1
nullable: true
asTimeDisParam:
\$ref:
\'TS29507_Npcf_AMPolicyControl.yaml#/components/schemas/AsTimeDistributionParam\'
#
AmEventsSubscData:
description: >
It represents the AM Policy Events Subscription subresource and identifies the
events
the application subscribes to.
type: object
required:
\- eventNotifUri
properties:
eventNotifUri:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uri\'
events:
type: array
items:
\$ref: \'#/components/schemas/AmEventData\'
minItems: 1
#
AmEventsNotification:
description: >
Describes the notification about the events occurred within an Individual
Application
AM Context resource.
type: object
required:
\- repEvents
properties:
appAmContextId:
type: string
description: >
Contains the AM Policy Events Subscription resource identifier related to the
event
notification.
repEvents:
type: array
items:
\$ref: \'#/components/schemas/AmEventNotification\'
minItems: 1
#
AmTerminationInfo:
description: >
Includes information related to the termination of the Individual Application
AM
Context resource.
type: object
required:
\- appAmContextId
\- termCause
properties:
appAmContextId:
type: string
description: >
Contains the Individual application AM context resource identifier related to
the termination notification.
termCause:
\$ref: \'#/components/schemas/AmTerminationCause\'
#
AmEventsSubscDataRm:
description: >
This data type is defined in the same way as the AmEventsSubscData but with
the OpenAPI
nullable property set to true.
type: object
properties:
eventNotifUri:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uri\'
events:
type: array
items:
\$ref: \'#/components/schemas/AmEventData\'
minItems: 1
nullable: true
#
AmEventData:
description: >
This data type contains the event identifier and the related event reporting
information.
type: object
required:
\- event
properties:
event:
\$ref: \'#/components/schemas/AmEvent\'
immRep:
type: boolean
notifMethod:
\$ref:
\'TS29508_Nsmf_EventExposure.yaml#/components/schemas/NotificationMethod\'
maxReportNbr:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uinteger\'
monDur:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DateTime\'
repPeriod:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DurationSec\'
#
AmEventNotification:
description: Describes the notification of a subscription.
type: object
required:
\- event
properties:
event:
\$ref: \'#/components/schemas/AmEvent\'
appliedCov:
\$ref: \'#/components/schemas/ServiceAreaCoverageInfo\'
pduidInfo:
\$ref: \'#/components/schemas/PduidInformation\'
#
PduidInformation:
description: Contains the ProSe Discovery UE ID and its validity timer.
type: object
required:
\- expiry
\- pduid
properties:
expiry:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DateTime\'
pduid:
\$ref: \'TS29555_N5g-ddnmf_Discovery.yaml#/components/schemas/Pduid\'
#
ServiceAreaCoverageInfo:
description: It represents a list of Tracking Areas within a serving network.
type: object
required:
\- tacList
properties:
tacList:
type: array
description: Indicates a list of Tracking Areas where the service is allowed.
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Tac\'
servingNetwork:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PlmnIdNid\'
#
# ENUMERATIONS DATA TYPES
#
AmTerminationCause:
description: >
It represents the cause values that the PCF should report when requesting from
an NF
service consumer the deletion of an \"AF application AM context\" resource.
anyOf:
\- type: string
enum:
\- UE_DEREGISTERED
\- UNSPECIFIED
\- INSUFFICIENT_RESOURCES
\- type: string
description: >
This string provides forward-compatibility with future extensions to the
enumeration but
is not used to encode content defined in the present version of this API.
#
AmEvent:
anyOf:
\- type: string
enum:
\- SAC_CH
\- PDUID_CH
\- type: string
description: >
This string provides forward-compatibility with future extensions to the
enumeration but
is not used to encode content defined in the present version of this API.
description: \|
Represents the PCF notification event to the NF service consumer.
Possible values are:
\- SAC_CH: Service Area Coverage Change.
\- PDUID_CH: The PDUID assigned to a UE for the UE ProSe Policies changed.
#
#
AppAmContextRespData:
description: It represents a response to a modification or creation request of
an Individual Application AM resource. It may contain the notification of the
already met events.
anyOf:
\- \$ref: \'#/components/schemas/AppAmContextData\'
\- \$ref: \'#/components/schemas/AmEventsNotification\'
#
AmEventsSubscRespData:
description: Identifies the events the application subscribes to within an AM
Policy Events Subscription subresource data. It may contain the notification
of the already met events.
anyOf:
\- \$ref: \'#/components/schemas/AmEventsSubscData\'
\- \$ref: \'#/components/schemas/AmEventsNotification\'
#
#