# Foreword
This Technical Specification has been produced by the 3rd Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
In the present document, modal verbs have the following meanings:
**shall** indicates a mandatory requirement to do something
**shall not** indicates an interdiction (prohibition) to do something
The constructions \"shall\" and \"shall not\" are confined to the context of
normative provisions, and do not appear in Technical Reports.
The constructions \"must\" and \"must not\" are not used as substitutes for
\"shall\" and \"shall not\". Their use is avoided insofar as possible, and
they are not used in a normative context except in a direct citation from an
external, referenced, non-3GPP document, or so as to maintain continuity of
style when extending or modifying the provisions of such a referenced
document.
**should** indicates a recommendation to do something
**should not** indicates a recommendation not to do something
**may** indicates permission to do something
**need not** indicates permission not to do something
The construction \"may not\" is ambiguous and is not used in normative
elements. The unambiguous constructions \"might not\" or \"shall not\" are
used instead, depending upon the meaning intended.
**can** indicates that something is possible
**cannot** indicates that something is impossible
The constructions \"can\" and \"cannot\" are not substitutes for \"may\" and
\"need not\".
**will** indicates that something is certain or expected to happen as a result
of action taken by an agency the behaviour of which is outside the scope of
the present document
**will not** indicates that something is certain or expected not to happen as
a result of action taken by an agency the behaviour of which is outside the
scope of the present document
**might** indicates a likelihood that something will happen as a result of
action taken by some agency the behaviour of which is outside the scope of the
present document
**might not** indicates a likelihood that something will not happen as a
result of action taken by some agency the behaviour of which is outside the
scope of the present document
In addition:
**is** (or any other verb in the indicative mood) indicates a statement of
fact
**is not** (or any other negative verb in the indicative mood) indicates a
statement of fact
The constructions \"is\" and \"is not\" do not indicate requirements.
# 1 Scope
The present document specifies the stage 3 protocol and data model for the
Nupf Service Based Interface. It provides stage 3 protocol definitions and
message flows, and specifies the API for each service offered by the UPF.
The 5G System stage 2 architecture and procedures are specified in 3GPP TS
23.501 [2], 3GPP TS 23.502 [3] and 3GPP TS 23.548[14].
The Technical Realization of the Service Based Architecture and the Principles
and Guidelines for Services Definition are specified in 3GPP TS 29.500 [4] and
3GPP TS 29.501 [5].
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 23.501: \"System Architecture for the 5G System; Stage 2\".
[3] 3GPP TS 23.502: \"Procedures for the 5G System; Stage 2\".
[4] 3GPP TS 29.500: \"5G System; Technical Realization of Service Based
Architecture; Stage 3\".
[5] 3GPP TS 29.501: \"5G System; Principles and Guidelines for Services
Definition; Stage 3\".
[6] OpenAPI: \"OpenAPI Specification Version 3.0.0\",
https://spec.openapis.org/oas/v3.0.0.
[7] 3GPP TR 21.900: \"Technical Specification Group working methods\".
[8] 3GPP TS 33.501: \"Security architecture and procedures for 5G system\".
[9] IETF RFC 6749: \"The OAuth 2.0 Authorization Framework\".
[10] 3GPP TS 29.510: \"5G System; Network Function Repository Services; Stage
3\".
[11] IETF RFC 7540: \"Hypertext Transfer Protocol Version 2 (HTTP/2)\".
[12] IETF RFC 8259: \"The JavaScript Object Notation (JSON) Data Interchange
Format\".
[13] IETF RFC 7807: \"Problem Details for HTTP APIs\".
[14] 3GPP TS 23.548: \"5G System Enhancements for Edge Computing; Stage 2\".
[15] 3GPP TS 29.244: \"Interface between the Control Plane and the User Plane
Nodes; Stage 3\".
[16] 3GPP TS 29.571: \"5G System; Common Data Types for Service Based
Interfaces; Stage 3\".
[17] 3GPP TS 23.288: \"Architecture enhancements for 5G System (5GS) to
support network data analytics services\".
[18] 3GPP TS 24.539: \"5G System (5GS); Network to TSN translator (TT)
protocol aspects; Stage 3\".
[19] 3GPP TS 29.512: \"5G System; Session Management Policy Control Service;
Stage 3\".
[20] 3GPP TS 29.122: \"Technical Specification Group Core Network and
Terminals; T8 reference point for Northbound APIs\".
# 3 Definitions, symbols and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
3GPP TR 21.905 [1] and the following apply. A term defined in the present
document takes precedence over the definition of the same term, if any, in
3GPP TR 21.905 [1].
## 3.2 Symbols
None in this release.
## 3.3 Abbreviations
For the purposes of the present document, the abbreviations given in 3GPP TR
21.905 [1] and the following apply. An abbreviation defined in the present
document takes precedence over the definition of the same abbreviation, if
any, in 3GPP TR 21.905 [1].
AF Application Function
DCCF Data Collection Coordination Function
L-UPF Local User Plane Function
L-NEF Local Network Exposure Function
MFAF Messaging Framework Adaptor Function
NEF Network Exposure Function
NWDAF Network Data Analytics Function
UPF User Plane Function
SMF Session Management Function
TSCTSF Time Sensitive Communication and Time Synchronization Function
TSN Time Sensitive Networking
# 4 Overview
## 4.1 Introduction
Within the 5GC, the UPF offers services to the NEF, AF, SMF, NWDAF, DCCF,
MFAF, TSCTSF and TSN AF via the Nupf service based interface (see 3GPP TS
23.501 [2], 3GPP TS 23.502 [3], 3GPP TS 23.288 [17] and 3GPP TS 23.548 [14]).
Figure 4.1-1 provides the reference model (in service based interface
representation and in reference point representation), with focus on the UPF.
Figure 4.1-1: Reference model -- UPF
The UPF supports the following functionalities which are provided via Service
Based Interface:
\- Subscription to notifications of events exposed by the UPF;
\- Notification about UPF events; and
\- Translation of (NATed) Public UE IP address and port to (5GC) Private UE IP
address.
# 5 Services offered by the UPF
## 5.1 Introduction
The UPF offers the following services via the Nupf interface:
\- Nupf_EventExposure Service
\- Nupf_GetPrivateUEIPaddr Service
Table 5.1-1 summarizes the SBI services produced by the UPF:
Table 5.1-1: NF Services provided by UPF
Service Name Description Example Consumers
* * *
Nupf_EventExposure This service exposes UPF related information to other NFs
SMF, NWDAF, NEF, AF, TSCTSF, TSN AF, DCCF, MFAF Nupf_GetPrivateUEIPaddr This
service provides the private UE IP address information of a PDU session from
the (NATed) public IP address and port number NEF
Table 5.2-1 summarizes the corresponding APIs defined for this specification.
Table 5.2-1: API Descriptions
Service Name Clause Description OpenAPI Specification File apiName **Annex**
* * *
Nupf_EventExposure 6.1 UPF Event Exposure Service
TS29564_Nupf_EventExposure.yaml nupf-ee A.2 Nupf_GetPrivateUEIPaddr 6.2 UPF
Get Private UE IP address Service TS29564_Nupf_GetPrivateUEIPaddr.yaml nupf-
gueip A.3
## 5.2 Nupf_EventExposure Service
### 5.2.1 Service Description
#### 5.2.1.1 Service operations
The Nupf_EventExposure service enables NF service consumers to subscribe to
UPF events and/or the UPF to send notifications about UPF events to NF service
consumers.
The Nupf_EventExposure service supports the service operations defined in
Table 5.2.1.1-1.
Table 5.2.1.1-1: Service operations supported by the Nupf_EventExposure
service
+----------------+----------------+----------------+----------------+ | Service | Description | Operation | Example | | Operations | | | Consumer(s) | | | | Semantics | | +================+================+================+================+ | Subscribe | Subscribe to | Su | NWDAF, SMF, | | | UPF events | bscribe/Notify | DCCF | +----------------+----------------+----------------+----------------+ | Unsubscribe | Unsubscribe | Su | NWDAF, SMF, | | | from UPF | bscribe/Notify | DCCF | | | events | | | +----------------+----------------+----------------+----------------+ | Notify | Notification | Su | NEF, AF, | | | about UPF | bscribe/Notify | NWDAF, TSCTSF, | | | events | | TSNAF, DCCF, | | | | | MFAF | +----------------+----------------+----------------+----------------+
#### 5.2.1.2 Subscription to UPF events
The UPF exposes UPF events via the Nupf_EventExposure service as defined in
Table 5.2.1.2-1.
Table 5.2.1.2-1: Subscriptions to UPF events
+----------------------+----------------------+----------------------+ | Subscription | Protocol used for | Description | | | the subscription | | | | | | | | to UPF | | +======================+======================+======================+ | Subscription via SMF | PFCP | The NF service | | | | consumer creates the | | | | subscription for the | | | | event of interest | | | | via the SMF. The SMF | | | | instructs the UPF to | | | | report the events | | | | directly to the NF | | | | service consumer via | | | | the N4 interface as | | | | specified in | | | | 3G | | | | PP TS 29.244 [15]. | | | | | | | | Upon occurrence of | | | | the event of | | | | interest, the UPF | | | | sends a notification | | | | directly to the NF | | | | service consumer | | | | using the | | | | Nupf_EventExposure | | | | Notify service | | | | operation. | +----------------------+----------------------+----------------------+ | | Nupf_EventExposure | The NF service | | | Subscribe | consumer creates the | | | | subscription for the | | | | event of interest | | | | via the SMF. The SMF | | | | subscribes to the | | | | UPF using the | | | | Nupf_EventExposure | | | | Subscribe service | | | | operation. | | | | | | | | Upon occurrence of | | | | the event of | | | | interest, the UPF | | | | sends a notification | | | | directly to the NF | | | | Service Consumer | | | | using the | | | | Nupf_EventExposure | | | | Notify service | | | | operation. | +----------------------+----------------------+----------------------+ | Subscription | Nupf_EventExposure | The NF service | | | Subscribe | consumer creates the | | to UPF | | subscription for the | | | | event of interest to | | | | the UPF using the | | | | Nupf_EventExposure | | | | Subscribe service | | | | operation. | | | | | | | | Upon occurrence of | | | | the event of | | | | interest, the UPF | | | | sends a notification | | | | directly to the NF | | | | Service Consumer | | | | using the | | | | Nupf_EventExposure | | | | Notify service | | | | operation | +----------------------+----------------------+----------------------+
Clause 5.2.1.3 decribes which of the above subscriptions shall be used for
each event type supported by the Nupf_EventExposure service.
#### 5.2.1.3 UPF events supported by the Nupf_EventExposure service
##### 5.2.1.3.1 General
The Nupf_EventExposure service supports the events defined in this clause.
See also clauses 4.15.4.x.1 and 5.2.26.2.1 of 3GPP TS 23.502 [3].
Editor\'s Note: the list of UPF events supported by the UPF event exposure
service and their description are FFS.
##### 5.2.1.3.2 QoS Monitoring
Table 5.2.1.3.2-1: QoS Monitoring event
+--------------------------------+------------------------------------+ | **Description** | This event provides QoS flow | | | performance information, i.e. QoS | | | monitoring results for the QoS | | | parameter(s) to be measured. | | | | | | The following QoS parameters may | | | be measured and/or reported: | | | | | | > \- Packet delay monitoring: DL, | | | > UL and/or Round-Trip packet | | | > delay between UE and PSA UPF of | | | > specific QoS flow(s) of the PDU | | | > session. | | | > | | | > \- Data rate monitoring: UL | | | > and/or DL data rate measurement | | | > for a QoS flow. | | | > | | | > \- Congestion information of a | | | > QoS flow on the UL and/or DL | | | > directions received from the | | | > NG-RAN. | +================================+====================================+ | **Subscription type** | Subscription via SMF using PFCP | +--------------------------------+------------------------------------+ | **Subscription inputs to UPF** | - QFI(s) of a specific PDU | | | session | | | | | | - requested QoS measurements | | | | | | - UPF event consumer notification | | | URI | | | | | | - Notification correlation ID | | | | | | See clauses 5.24.4 and 5.24.5 of | | | 3GPP TS 29.244 [15]. | +--------------------------------+------------------------------------+ | **Report type** | Continuous (event triggered) | | | Report (for Packet Delay and | | | Congestion Information). | | | | | | Periodic Report (for Packet Delay) | +--------------------------------+------------------------------------+
##### 5.2.1.3.3 User Data Usage Measures
Table 5.2.1.3.3-1: User Data Usage Measures event
+--------------------------------+------------------------------------+ | **Description** | This event provides information of | | | user data usage of a PDU session: | | | | | | > \- Volume Measurement: measures | | | > of data volume exchanged (UL, DL | | | > and/or overall) and/or number of | | | > packets exchanged (UL, DL and/or | | | > overall) with or without | | | > application granularity. | | | > | | | > \- Throughput Measurement: | | | > measures of data throughput (UL | | | > and DL) measures aggregated for | | | > the PDU Session or per | | | > application. | | | > | | | > \- Application related | | | > information: URL(s) and/or | | | > Domain name(s) detected in the | | | > PDU session for the target | | | > traffic. | +================================+====================================+ | **Subscription type** | Subscription via SMF using | | | Nupf_EventExposure Subscribe, if | | | the target is: | | | | | | - PDU session(s) of a specific UE | | | or a group of UEs; or | | | | | | - PDU session(s) of any UE and | | | the subscription includes at least | | | one of the following parameters: | | | AoI, Traffic filtering, | | | BSSID/SSID, Application ID. | | | | | | Subscription to the UPF, if the | | | target is PDU session(s) of any UE | | | and the subscription does not need | | | to include any of the following | | | parameters: AoI, Traffic | | | filtering, BSSID/SSID, Application | | | ID. | +--------------------------------+------------------------------------+ | **Subscription inputs to UPF** | Required: | | | | | | - UE IP address or \"Any UE\" | | | | | | - UPF event consumer notification | | | URI | | | | | | Optional: | | | | | | - DNN(s) | | | | | | - S-NSSAI(s) | | | | | | - Application ID(s) or Traffic | | | filtering | | | | | | **\- Type of Measurement (i.e. | | | Volume, Throughput, Application | | | related information)** | | | | | | - Granularity of Measurement | | | (i.e. required granularity for the | | | information reported) | | | | | | - Reporting suggestion | | | information (i.e. Report urgency, | | | Reporting time information) | | | | | | - Notification correlation ID | +--------------------------------+------------------------------------+ | **Report type** | One-Time Report | | | | | | Periodic Report | +--------------------------------+------------------------------------+
##### 5.2.1.3.4 User Data Usage Trends
Table 5.2.1.3.4-1: User Data Usage Trends event
+--------------------------------+------------------------------------+ | **Description** | This event provides statistics | | | related to user data usage of a | | | PDU session: | | | | | | > \- Throughput Statistics | | | > Measurement (average and/or peak | | | > throughput) over the measurement | | | > period for the PDU Session or | | | > per application | +================================+====================================+ | **Subscription type** | Subscription via SMF using | | | Nupf_EventExposure Subscribe, if | | | the target is: | | | | | | - PDU session(s) of a specific UE | | | or a group of UEs; or | | | | | | - PDU session(s) of any UE and | | | the subscription includes at least | | | one of the following parameters: | | | AoI, Traffic filtering, | | | BSSID/SSID, Application ID. | | | | | | Subscription to the UPF, if the | | | target is PDU session(s) of any UE | | | and the subscription does not need | | | to include any of the following | | | parameters: AoI, Traffic | | | filtering, BSSID/SSID, Application | | | ID. | +--------------------------------+------------------------------------+ | **Subscription inputs to UPF** | Required: | | | | | | - UE IP address or \"Any UE\" | | | | | | - UPF event consumer notification | | | URI | | | | | | Optional: | | | | | | - DNN(s) | | | | | | - S-NSSAI(s) | | | | | | - Application ID(s) or Traffic | | | filtering | | | | | | - Granularity of Measurement | | | (i.e. required granularity for the | | | information reported) | | | | | | - Reporting suggestion | | | information (i.e. Report urgency, | | | Reporting time information) | | | | | | - Notification correlation ID | +--------------------------------+------------------------------------+ | **Report type** | One-Time Report | | | | | | Periodic Report | +--------------------------------+------------------------------------+
##### 5.2.1.3.5 TSC Management Information
Table 5.2.1.3.5-1: TSC Management Information event
+--------------------------------+------------------------------------+ | **Description** | This event provides TSC Management | | | Information. | +================================+====================================+ | **Subscription type** | Subscription via SMF using PFCP | +--------------------------------+------------------------------------+ | **Subscription inputs to UPF** | - UPF event consumer notification | | | URI | | | | | | - Notification correlation ID | | | | | | See clauses 5.26.3.2 of | | | 3GPP TS 29.244 [15] and | | | clauses 6.2.1 and 6.3.1 of | | | 3GPP TS 24.539 [18]. | +--------------------------------+------------------------------------+ | **Report type** | Continuous (event triggered) | | | Report. | +--------------------------------+------------------------------------+
### 5.2.2 Service Operations
#### 5.2.2.1 Introduction
The service operations defined for the Nupf_EventExposure service are as
follows:
\- Subscribe: It enables an NF service consumer to subscribe to UPF event
exposure notifications..
\- Unsubscribe: It enables an NF service consumer to unsubscribe from UPF
event exposure notifications.
\- Notify: It allows the UPF to send event notifications directly to NF
service consumers.
NOTE: The Subscribe and Unsubscribe service operations only apply to UPF
events that can be subscribed using the Nupf service based interface (see
clauses 5.2.1.2 and 5.2.1.3).
#### 5.2.2.2 Subscribe
##### 5.2.2.2.1 General
The Subscribe service operation is used by a NF Service Consumer to subscribe
to UPF event exposure notifications, e.g. for the purpose of UPF data
collection for a specified PDU session or any UE.
NOTE: NF service consumers can only be SMF, NWDAF or DCCF in this release of
the specification.
##### 5.2.2.2.2 Creation of a subscription
An NF Service Consumer shall invoke the Subscribe service operation towards
the UPF to create a subscription to monitor at least one UPF event. The NF
Service Consumer may subscribe to multiple events in a subscription. A
subscription may be associated with one UE\'s PDU session or with any UE.
The NF Service Consumer shall request to create a new subscription by using
the HTTP method POST with the URI of the subscriptions collection, see clause
6.1.3.2.
Figure 5.2.2.2.2-1 Subscription creation
1\. The NF Service Consumer shall send a POST request to create a subscription
resource in the UPF. The payload body of the POST request shall contain a
representation of the individual subscription resource to be created.
The NF Service Consumer shall include the following information in the HTTP
message body:
\- NF ID, indicating the identity of the network function instance creating
the subscription;
\- Target of Event Reporting, indicating the target(s) to be monitored, i.e.
\- a specific PDU Session of a UE identified with a UE IP address; or
\- any UE (identified by the \"anyUE\" flag);
\- List of UPF events requested to be subscribed;
\- Event Reporting Mode, indicating how the events shall be reported (One-time
Report or Periodic Report); and
\- UPF event consumer notification URI, indicating the address where to send
the event notifications generated by the subscription.
The NF Service Consumer may include the following information in the HTTP
message body:
\- a SUPI, PEI or GPSI identifying a specific UE;
\- one or more S-NSSAI(s) and/or DNN(s) of PDU sessions to which the
subscription applies;
\- one or more Application ID(s) or traffic filters identifying the traffic to
be monitored by the subscription (only applicable to a subscription targeting
a specific PDU Session of a UE identified with a UE IP address);
\- Type of measurement, for UPF events supporting multiple types of
measurement (e.g. UserDataUsageMeasures event)
\- Granularity of Measurement, indicating that the granularity of the required
measurements is per PDU Session, per data flow or per application;
\- Reporting period, defining the period for periodic reporting;
\- Maximum number of reports, defining the maximum number of reports after
which the event subscription ceases to exist;
\- Expiry time, suggested by the NF Service Consumer representing the time up
to which the subscription is desired to be kept active and the time after
which the subscribed event(s) shall stop generating report;
\- Reporting suggestion information, i.e. Report urgency indicating whether
the event report can be delayed (i.e. it is delay-tolerant) and if so, the
Reporting time information defining the last valid reporting time for the UPF
to report the detected event;
\- Deactivate notification flag, indicating that the notification of the
available events shall be muted until the event consumer NF provides the
retrieval notification flag to retrieve the events stored;
\- Immediate Report Flag per event, indicating an immediate report to be
generated with the current event status; and/or
\- Notification Correlation ID, indicating the correlation identity to be
signaled in the event notifications generated by the subscription.
\- Sampling ratio, defining the random subset of PDU sessions among target PDU
sessions, and the UPF only report the event(s) related to the selected subset
of PDU sessions;
\- partitioningCriteria, defining the criteria for partitioning PDU sessions
before applying sampling ratio;
2a. On success (i.e. if the request is accepted), the UPF shall include a HTTP
Location header to provide the location of the newly created resource
(subscription) together with the status code 201 indicating the requested
resource is created in the response message.\ \ If the NF Service Consumer has
included more than one events in the event subscription and some of the events
cannot be subscribed, the UPF shall accept the request and provide the
successfully subscribed event(s) in the CreatedEventSubscription.\ \ If the NF
Service Consumer has included the Immediate Report Flag with the value true in
the event subscription, and if the current status of the events subscribed are
available, the UPF shall include the current status of the events subscribed
in the response. Otherwise, the UPF shall generate reports for the events and
notify the NF service consumer using the Nupf_EventExposure_Notify service
operation. If the events with the Immediate Report Flag set to true are
subscribed via an SMF, the notification shall be sent to the actual NF service
consumer directly, i.e. the current status of the events subscribed shall not
be included in the subscription creation response.
If the NF Service Consumer has set the event reporting option to ONE_TIME and
if the UPF has included the current status of the events subscribed in the
response, then the UPF shall not do any subsequent event notification for the
corresponding events.
The response, based on operator policy and taking into account the expiry time
included in the request, may contain the expiry time, as determined by the
UPF, after which the subscription becomes invalid. Once the subscription
expires, if the NF Service Consumer wants to keep receiving notifications, it
shall create a new subscription in the UPF. The UPF shall not provide the same
expiry time for many subscriptions in order to avoid all of them expiring and
recreating the subscription at the same time. If the expiry time is not
included in the response, the NF Service Consumer shall consider the
subscription to be valid without an expiry time.
If the sampling ratio (\"sampRatio\") attribute is included in the
subscription without a partitioningCriteria, the UPF shall select a random
subset of PDU sessions among target PDU sessions according to the sampling
ratio and only report the event(s) related to the selected subset of PDU
sessions. If the partitioningCriteria attribute is also included along with
sampling ratio, the UPF shall apply the sampling ratio on the group of PDU
sessions determined according to the partitioning criteria.
If the \"notifFlag\" attribute is included and set to \"DEACTIVATE\" in the
request, the UPF shall mute the event notification and store the available
events.
2b. On failure or redirection, one of the HTTP status code listed in Table
6.1.3.2.3.1-3 shall be returned. For a 4xx/5xx response, the message body
shall contain a ProblemDetails structure with the \"cause\" attribute set to
one of the application error listed in Table 6.1.3.2.3.1-3.
##### 5.2.2.2.3 Modification of a subscription
The service operation is invoked by a NF Service Consumer, towards the UPF,
when it needs to modify an existing subscription previously created at the
UPF.
The NF Service Consumer shall modify the subscription by using the HTTP method
PATCH with the URI of the individual subscription resource (see clause
6.1.3.3) to be modified.
Figure 5.2.2.2.3-1: Modification of a subscription
1\. The NF service consumer shall send a PATCH request to the resource
representing a subscription. The modification may be for the events subscribed
or for updating the event report options, or the NF Id.
2a. On success, the request is accepted, and all the modification instructions
in the PATCH request have been implemented, the UPF shall respond with \"204
No Content\".
2b. On success, the request is accepted, but some of the modification
instructions in the PATCH request have been discarded, the UPF shall respond
with \"200 OK\" including PatchResult to indicate the failed modifications.
2c. On failure or redirection, one of the HTTP status code listed in Table
6.1.3.3.3.2-3 shall be returned. For a 4xx/5xx response, the message body may
contain a ProblemDetails structure with the \"cause\" attribute set to one of
the application errors listed in Table 6.1.3.1.3.2-3.
#### 5.2.2.2A Unsubscribe
##### 5.2.2.2A.1 General
The Unsubscribe service operation is invoked by a NF Service Consumer towards
the UPF to delete an existing subscription previously created at the UPF.
The NF Service Consumer shall unsubscribe from a subscription by using the
HTTP method DELETE with the URI of the individual subscription resource (see
clause 6.1.3.3) to be deleted.
Figure 5.2.2.2A.1-1 Unsubscribing from UPF events
1\. The NF Service Consumer shall send a DELETE request to delete an existing
subscription resource in the UPF.
2a. On success (i.e. if the request is accepted), the UPF shall reply with the
status code 204 in the response message to indicate that the resource
identified by the subscription ID has been successfully deleted.
2b. On failure or redirection, one of the HTTP status code listed in Table
6.1.3.3.3.1-3 shall be returned. For a 4xx/5xx response, the message body
shall contain a ProblemDetails structure with the \"cause\" attribute set to
one of the application error listed in Table 6.1.3.3.3.1-3.
#### 5.2.2.3 Notify
##### 5.2.2.3.1 General
The Notify service operation is invoked by the UPF, to send a notification,
towards the notification URI, when certain event included in the subscription
has taken place.
For the events \"USER_DATA_USAGE_MEASURES\" and \"USER_DATA_USAGE_TRENDS\",
the UPF shall use the HTTP method POST, using the notification URI received in
the subscription creation as specified in clause 5.2.2.2.2, including e.g. the
subscription ID, Event ID(s) for which event has happened, notification
correlation ID provided by the NF service consumer at the time of event
subscription, to send a notification. If the subscription is targeting PDU
sessions of any UE, i.e. the \"anyUe\" is set to true, the UPF shall perform
the requested measurements per PDU session and send notification(s) with
multiple NotificationItem IEs within the NotificationData wherein each
NotificationItem shall correspond to a report on one subscribed event per PDU
session. See Figure 5.2.2.3.2-1.
For the events \"QOS_MONITORING\" and \"TSC_MNGT_INFO\", the UPF shall use the
HTTP method POST, using the notification URI received from the SMF via N4
interface, see clause 5.33.5 of 3GPP TS 29.244 [15].
> For the event \"USER_DATA_USAGE_MEASURES\", the event notification may
> contain following information:
>
> \- Volume Measurement: measures of data volume exchanged (UL, DL and/or
> overall) and/or number of packets exchanged (UL, DL and/or overall).
>
> \- Throughput Measurement: measures of data throughput (UL and DL).
\- Application related Information: URLs and/or Domain names and Domain name
protocols detected in the traffic identified by the information included in
the subscription request, e.g. an application id.
> When the granularity of the measurement is per data flow, the notification
> includes the packet filter set and the Applications Identifier if available.
>
> For the event \"USER_DATA_USAGE_TRENDS\", the event notification may contain
> following information:
>
> \- Throughput Statistic Measurement (average and/or peak throughput) over
> the measurement.
>
> When the granularity of the measurement is per data flow, the notification
> includes the packet filter set and the Applications Identifier if available.
For the event \"QOS_MONITORING\", this service operation is used by the UPF to
send the following kinds of event notification:
\- Periodic notification on the downlink packet delay, uplink packet delay,
and/or the round trip packet delay between the UPF (PSA) and UE;
\- Event triggered notification on the downlink packet delay, uplink packet
delay, and/or the round trip packet delay between the UPF (PSA) and UE, i.e.
when the packet delay exceeds a defined threshold;
\- Notification on the downlink packet delay, uplink packet delay, and/or the
round trip packet delay between the UPF (PSA) and UE when the PDU session is
released.
\- Event triggered notification of congestion information of the QoS flow on
the UL and/or DL directions received from the NG-RAN, upon a change of the
congestion information.
For the event \"TSC_MNGT_INFO\", the event notification may contain the
following information:
\- Port Management Information Container(s) for one or more NW-TT ports and/or
\- a User Plane Node Management Information Container;
The event notification shall also contain the following information:
\- the related NW-TT port number(s), if Port Management Information
Container(s) is present; and
\- the notification correlation ID received from the SMF, if any.
##### 5.2.2.3.2 UPF sends notification on subscribed events
Figure 5.2.2.3.2-1: UPF sends notification on subscribed events
1\. The UPF shall send a POST request to the eventNotificationUri as provided
by the SMF during the provisioning of Session Reporting Rule (see clause
7.5.2.9 of 3GPP TS 29.244 [15]) or received in the subscription creation as
specified in clause 5.2.2.2.2.
2a. Upon success, the NF Service Consumer responds with \"204 No Content\".
2b. On failure or redirection:
\- If the NF Service Consumer does not consider the \"eventNotificationUri\"
as a valid notification URI, the NF Service Consumer shall return \"404 Not
Found\" status code with the ProblemDetails IE providing details of the error.
\- In the case of redirection, the NF service consumer shall return 3xx status
code, which shall contain a Location header with an URI pointing to the
endpoint of another NF service consumer endpoint.
## 5.3 Nupf_GetPrivateUEIPaddr Service
### 5.3.1 Service Description
The Nupf_GetPrivateUEIPaddr Service enables the UPF to provide the UE IP
address information of a PDU session, e.g. to provide the (private) UE IP
address when being queried with a NATed UE IP Address, to the NF service
consumer, e.g. a NEF.
Table 5.3.1-1 lists the service operations that are supported by the
Nupf_GetPrivateUEIPaddr service.
Table 5.3.1-1: Service operations supported by the Nupf_GetPrivateUEIPaddr
service
+----------------+----------------+----------------+----------------+ | Service | Description | Operation | Example | | Operations | | | Consumers | | | | Semantics | | +================+================+================+================+ | Get | Retrieve the | Request / | NEF | | | UE IP address | Response | | | | information of | | | | | a PDU session, | | | | | to get e.g., | | | | | UE\'s private | | | | | IP address and | | | | | optionally the | | | | | associated IP | | | | | domain. | | | +----------------+----------------+----------------+----------------+
### 5.3.2 Service Operations
#### 5.3.2.1 Introduction
See Table 5.3.1-1 for an overview of the service operations supported by the
Nupf_GetPrivateUEIPaddr service.
#### 5.3.2.2 Get
##### 5.3.2.2.1 General
The Get service operation is used in the following procedure:
\- AF specific UE ID retrieval as specified in clause 4.15.10 of 3GPP TS
23.502 [3]
This service operation is consumed by querying the \"ue-ip-info\" resource.
The request is sent to the UPF hosting the IP address in the query.
Figure 5.3.2.2.1-1: Retrieval of UE IP Info for a PDU session
1\. The NF Service Consumer shall send an HTTP GET request to the resource URI
of \"ue-ip-info\". The input filter criteria for the discovery request shall
be included in query parameters, e.g. the UE (public) IP address and Port
Number, and optionally DNN and S-NSSAI.
2a. On success, \"200 OK\" shall be returned. The response body shall include
a UeIpInfo object which contains relevant attributes matching the query
parameters included in the request message.
2b. On failure, one of the HTTP status code listed in Table 6.2.3.2.3.1-3
shall be returned. For a 4xx/5xx response, the message body may contain a
ProblemDetails structure with the \"cause\" attribute set to one of the
application errors listed in Table 6.2.3.2.3.1-3, where applicable.\ On
redirection, \"307 Temporary Redirect\" or \"308 Permanent Redirect\" shall be
returned. A RedirectResponse IE may be included in the payload body of POST
response.
# 6 API Definitions
## 6.1 Nupf_EventExposure Service API
### 6.1.1 API URI
The Nupf_EventExposure shall use the Nupf_EventExposure API.
The API URI of the Nupf_EventExposure API shall be:
**{apiRoot}/\ /\**
The request URIs used in HTTP requests from the NF service consumer towards
the NF service producer shall have the Resource URI structure defined in
clause 4.4.1 of 3GPP TS 29.501 [5], i.e.:
**{apiRoot}/\ /\/\**
with the following components:
\- The {apiRoot} shall be set as described in 3GPP TS 29.501 [5].
\- The \ shall be \"nupf-ee\".
\- The \ shall be \"v1\".
\- The \ shall be set as described in clause
6.1.3.
### 6.1.2 Usage of HTTP
#### 6.1.2.1 General
HTTP/2, IETF RFC 7540 [11], shall be used as specified in clause 5 of 3GPP TS
29.500 [4].
HTTP/2 shall be transported as specified in clause 5.3 of 3GPP TS 29.500 [4].
The OpenAPI [6] specification of HTTP messages and content bodies for the
Nupf_EventExposure API is contained in Annex A.
#### 6.1.2.2 HTTP standard headers
##### 6.1.2.2.1 General
See clause 5.2.2 of 3GPP TS 29.500 [4] for the usage of HTTP standard headers.
##### 6.1.2.2.2 Content type
JSON, IETF RFC 8259 [12], shall be used as content type of the HTTP bodies
specified in the present specification as specified in clause 5.4 of 3GPP TS
29.500 [4]. The use of the JSON format shall be signalled by the content type
\"application/json\".
\"Problem Details\" JSON object shall be used to indicate additional details
of the error in a HTTP response body and shall be signalled by the content
type \"application/problem+json\", as defined in IETF RFC 7807 [13].
#### 6.1.2.3 HTTP custom headers
The mandatory HTTP custom header fields specified in clause 5.2.3.2 of 3GPP TS
29.500 [4] shall be supported, and the optional HTTP custom header fields
specified in clause 5.2.3.3 of 3GPP TS 29.500 [4] may be supported.
In this release of this specification, no custom headers specific to the
Nupf_EventExposure service are defined.
### 6.1.3 Resources
#### 6.1.3.1 Overview
Figure 6.1.3.1-1: Resource URI structure of the nupf-ee API
Table 6.1.3.1-1 provides an overview of the resources and applicable HTTP
methods.
Table 6.1.3.1-1: Resources and methods overview
+----------------+----------------+----------------+----------------+ | Resource name | Resource URI | HTTP method or | Description | | | | custom | | | | | operation | (service | | | | | operation) | +================+================+================+================+ | EventExposur | /ee | POST | Subscribe | | eSubscriptions | -subscriptions | | service | | | | | operation, | | (Collection) | | | creating a new | | | | | subscription . | +----------------+----------------+----------------+----------------+ | Individual | /ee-su | DELETE | Unsubscribe | | subscription | bscriptions/{s | | service | | | ubscriptionId} | | operation | | (Document) | | | | +----------------+----------------+----------------+----------------+
#### 6.1.3.2 Resource: EventExposureSubscriptions
##### 6.1.3.2.1 Description
This resource represents a collection of subscriptions created by NF service
consumers of Nupf_EventExposure service.
This resource is modelled as the Collection resource archetype (see clause C.2
of 3GPP TS 29.501 [5]).
##### 6.1.3.2.2 Resource Definition
Resource URI: **{apiRoot}/nupf-ee/\ /ee-subscriptions**
This resource shall support the resource URI variables defined in table
6.1.3.2.2-1.
Table 6.1.3.2.2-1: Resource URI variables for this resource
Name Data type Definition
* * *
apiRoot string See clause 6.1.1 apiVersion string See clause 6.1.1
##### 6.1.3.2.3 Resource Standard Methods
##### 6.1.3.2.3.1 POST {#post .H6}
This method shall support the URI query parameters specified in table
6.1.3.2.3.1-1.
Table 6.1.3.2.3.1-1: URI query parameters supported by the POST method on this
resource
* * *
Name Data type P Cardinality Description Applicability n/a
* * *
This method shall support the request data structures specified in table
6.1.3.2.3.1-2 and the response data structures and response codes specified in
table 6.1.3.2.3.1-3.
Table 6.1.3.2.3.1-2: Data structures supported by the POST Request Body on
this resource
* * *
Data type P Cardinality Description CreateEventSubscription M 1 Payload of the
Subscribe request to create a subscription.
* * *
Table 6.1.3.2.3.1-3: Data structures supported by the POST Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | CreatedEven | M | 1 | 201 Created | Represents | | tSubscription | | | | successful | | | | | | creation of | | | | | | an UPF Event | | | | | | Subscription | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 403 Forbidden | Indicates the | | roblemDetails | | | | creation of | | | | | | subscription | | | | | | has failed | | | | | | due to | | | | | | application | | | | | | error. | | | | | | | | | | | | The \"cause\" | | | | | | attribute may | | | | | | be used to | | | | | | indicate one | | | | | | of the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | - | | | | | | PDU_SES | | | | | | SION_NOT_SE | | | | | | RVED_BY_UPF | +---------------+---+-------------+---------------+---------------+ | NOTE 1: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status code | | | | | | for the POST | | | | | | method listed | | | | | | in Table | | | | | | 5.2.7.1-1 of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | also apply, | | | | | | with response | | | | | | body | | | | | | containing an | | | | | | object of | | | | | | P | | | | | | roblemDetails | | | | | | data type | | | | | | (see clause | | | | | | 5.2.7 of | | | | | | 3GPP TS 2 | | | | | | 9.500 [4]). | | | | | | | | | | | | NOTE 2: | | | | | | Red | | | | | | irectResponse | | | | | | may be | | | | | | inserted by | | | | | | an SCP, see | | | | | | cl | | | | | | ause 6.10.9.1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4]. | | | | | +---------------+---+-------------+---------------+---------------+
Table 6.1.3.2.3.1-4: Headers supported by the 201 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 Contains the URI
of the newly created resource, according to the structure: {apiRoot}/nupf-
ee/\/ee-subscriptions/{subscriptionId}
* * *
Table 6.1.3.2.3.1-5: Headers supported by the 307 Response Code on this
endpoint
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located on an alternative service instance. For the case,
when a request is redirected to the same target resource via a different SCP,
see clause 6.10.9.1 in 3GPP TS 29.500 [4]. 3gpp-Sbi-Target-Nf-Id string O 0..1
Identifier of the target NF (service) instance ID towards which the request is
redirected
* * *
Table 6.1.3.2.3.1-6: Headers supported by the 308 Response Code on this
endpoint
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located on an alternative service instance. For the case,
when a request is redirected to the same target resource via a different SCP,
see clause 6.10.9.1 in 3GPP TS 29.500 [4]. 3gpp-Sbi-Target-Nf-Id string O 0..1
Identifier of the target NF (service) instance ID towards which the request is
redirected
* * *
##### 6.1.3.2.4 Resource Custom Operations
None.
#### 6.1.3.3 Resource: Individual subscription
##### 6.1.3.3.1 Description
This resource represents an individual of subscription created by NF service
consumers of Nupf_EventExposure service.
This resource is modelled as the Document resource archetype (see clause C.1
of 3GPP TS 29.501 [5]).
##### 6.1.3.3.2 Resource Definition
Resource URI: **{apiRoot}/nupf-ee/\ /ee-
subscriptions/{subscriptionId}**
This resource shall support the resource URI variables defined in table
6.1.3.3.2-1.
Table 6.1.3.3.2-1: Resource URI variables for this resource
Name Data type Definition
* * *
apiRoot string See clause 6.2.1 apiVersion string See clause 6.2.1.
subscriptionId string String identifies an individual subscription to the UPF
event exposure service
##### 6.1.3.3.3 Resource Standard Methods
##### 6.1.3.3.3.1 DELETE {#delete .H6}
This method shall support the URI query parameters specified in table
6.1.3.3.3.1-1.
Table 6.1.3.3.3.1-1: URI query parameters supported by the DELETE method on
this resource
Name Data type P Cardinality Description
* * *
n/a
This method shall support the request data structures specified in table
6.1.3.3.3.1-2 and the response data structures and response codes specified in
table 6.1.3.3.3.1-3.
Table 6.1.3.3.3.1-2: Data structures supported by the DELETE Request Body on
this resource
Data type P Cardinality Description
* * *
n/a
Table 6.1.3.3.3.1-3: Data structures supported by the DELETE Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +===============+===+=============+===============+===============+ | n/a | | | 204 No | | | | | | Content | | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 404 Not Found | Indicates the | | roblemDetails | | | | modification | | | | | | of | | | | | | subscription | | | | | | has failed | | | | | | due to | | | | | | application | | | | | | error. | | | | | | | | | | | | The \"cause\" | | | | | | attribute may | | | | | | be used to | | | | | | indicate one | | | | | | of the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | - | | | | | | SUBSCRIPTIO | | | | | | N_NOT_FOUND | +---------------+---+-------------+---------------+---------------+ | NOTE 1: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status code | | | | | | for the | | | | | | DELETE method | | | | | | listed in | | | | | | Table | | | | | | 5.2.7.1-1 of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | also apply, | | | | | | with response | | | | | | body | | | | | | containing an | | | | | | object of | | | | | | P | | | | | | roblemDetails | | | | | | data type | | | | | | (see clause | | | | | | 5.2.7 of | | | | | | 3GPP TS 2 | | | | | | 9.500 [4]). | | | | | | | | | | | | NOTE 2: | | | | | | Red | | | | | | irectResponse | | | | | | may be | | | | | | inserted by | | | | | | an SCP, see | | | | | | cl | | | | | | ause 6.10.9.1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4]. | | | | | +---------------+---+-------------+---------------+---------------+
Table 6.1.3.3.3.1-4: Headers supported by the 307 Response Code on this
endpoint
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located on an alternative service instance. For the case,
when a request is redirected to the same target resource via a different SCP,
see clause 6.10.9.1 in 3GPP TS 29.500 [4]. 3gpp-Sbi-Target-Nf-Id string O 0..1
Identifier of the target NF (service) instance ID towards which the request is
redirected
* * *
Table 6.1.3.3.3.1-5: Headers supported by the 308 Response Code on this
endpoint
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located on an alternative service instance. For the case,
when a request is redirected to the same target resource via a different SCP,
see clause 6.10.9.1 in 3GPP TS 29.500 [4]. 3gpp-Sbi-Target-Nf-Id string O 0..1
Identifier of the target NF (service) instance ID towards which the request is
redirected
* * *
##### 6.1.3.3.3.2 PATCH {#patch .H6}
This method shall support the URI query parameters specified in table
6.1.3.3.3.2-1.
Table 6.1.3.3.3.2-1: URI query parameters supported by the PATCH method on
this resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
6.1.3.3.3.2-2 and the response data structures and response codes specified in
table 6.1.3.3.3.2-3.
Table 6.1.3.3.3.2-2: Data structures supported by the PATCH Request Body on
this resource
* * *
Data type P Cardinality Description array(PatchItem) M 1..N Items describe the
modifications to the Event Subscription
* * *
Table 6.1.3.3.3.2-3: Data structures supported by the PATCH Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | Upon success, | | | | | Content | an empty | | | | | | response body | | | | | | shall be | | | | | | returned. | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | PatchResult | M | 1 | 200 OK | Upon success, | | | | | | the execution | | | | | | report is | | | | | | returned. | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection. | | | | | | | | | | | | (NOTE 3) | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection. | | | | | | | | | | | | (NOTE 3) | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 403 Forbidden | One or more | | roblemDetails | | | | attributes | | | | | | are not | | | | | | allowed to be | | | | | | modified. | | | | | | | | | | | | The \"cause\" | | | | | | attribute may | | | | | | be used to | | | | | | indicate one | | | | | | of the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | - | | | | | | M | | | | | | ODIFICATION_ | | | | | | NOT_ALLOWED, | | | | | | see | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | tab | | | | | | le 5.2.7.2-1. | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 404 Not Found | The \"cause\" | | roblemDetails | | | | attribute may | | | | | | be used to | | | | | | indicate one | | | | | | of the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | - | | | | | | SUBSCRIPTION | | | | | | _NOT_FOUND, | | | | | | see | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | tab | | | | | | le 5.2.7.2-1. | +---------------+---+-------------+---------------+---------------+ | NOTE 1: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status code | | | | | | for the PATCH | | | | | | method listed | | | | | | in Table | | | | | | 5.2.7.1-1 of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | also apply, | | | | | | with response | | | | | | body | | | | | | containing an | | | | | | object of | | | | | | P | | | | | | roblemDetails | | | | | | data type | | | | | | (see clause | | | | | | 5.2.7 of | | | | | | 3GPP TS 2 | | | | | | 9.500 [4]). | | | | | | | | | | | | NOTE 2: If | | | | | | all the | | | | | | modification | | | | | | instructions | | | | | | in the PATCH | | | | | | request have | | | | | | been | | | | | | implemented, | | | | | | the UPF shall | | | | | | respond with | | | | | | 204 No | | | | | | Content | | | | | | response; if | | | | | | some of the | | | | | | modification | | | | | | instructions | | | | | | in the PATCH | | | | | | request have | | | | | | been | | | | | | discarded, | | | | | | the UPF shall | | | | | | respond with | | | | | | PatchResult. | | | | | | | | | | | | NOTE 3: | | | | | | Red | | | | | | irectResponse | | | | | | may be | | | | | | inserted by | | | | | | an SCP, see | | | | | | cl | | | | | | ause 6.10.9.1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4]. | | | | | +---------------+---+-------------+---------------+---------------+
Table 6.1.3.3.3.2-4: Headers supported by the 307 Response Code on this
endpoint
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located on an alternative service instance. It is
implementation specific how the alternative URI is determined. For the case,
when a request is redirected to the same target resource via a different SCP,
see clause 6.10.9.1 in 3GPP TS 29.500 [4]. 3gpp-Sbi-Target-Nf-Id string O 0..1
Identifier of the target NF (service) instance ID towards which the request is
redirected
* * *
Table 6.1.3.3.3.2-5: Headers supported by the 308 Response Code on this
endpoint
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located on an alternative service instance. It is
implementation specific how the alternative URI is determined. For the case,
when a request is redirected to the same target resource via a different SCP,
see clause 6.10.9.1 in 3GPP TS 29.500 [4]. 3gpp-Sbi-Target-Nf-Id string O 0..1
Identifier of the target NF (service) instance ID towards which the request is
redirected
* * *
##### 6.1.3.3.4 Resource Custom Operations
None.
### 6.1.4 void
### 6.1.5 Notifications
#### 6.1.5.1 General
Notifications shall comply to clause 6.2 of 3GPP TS 29.500 [4] and clause
4.6.2.3 of 3GPP TS 29.501 [5].
Table 6.1.5.1-1: Notifications overview
+----------------+----------------+----------------+----------------+ | Notification | Callback URI | HTTP method or | Description | | | | custom | | | | | operation | (service | | | | | operation) | +================+================+================+================+ | Event | {eventNo | POST | Notify about | | Notification | tificationUri} | | the events | | | (This URI is | | that UPF | | | either | | exposes and to | | | provided by NF | | which the NF | | | service | | service | | | consumer via | | consumer may | | | Nupf | | subscribe to. | | | interface, or | | | | | it is provided | | | | | via N4 | | | | | interface | | | | | during the | | | | | provisioning | | | | | of Session | | | | | Reporting | | | | | Rule) | | | +----------------+----------------+----------------+----------------+
#### 6.1.5.2 Event Notification
##### 6.1.5.2.1 Description
The Event Notification is used by the UPF to report one or several observed
Events to a NF service consumer that has subscribed to such Notifications.
##### 6.1.5.2.2 Target URI
The POST method shall be used for Event Notification and the URI shall be the
Event Notification URI provided by the SMF during the provisioning of Session
Reporting Rule, see clause 5.33.5 of 3GPP TS 29.244 [15], or by NF Service
Consumer during creation of the subscription as specified in clause 5.2.2.2.2.
Resource URI: **{eventNotificationUri}**
Support of URI query parameters is specified in table 6.1.5.2.2-1.
Table 6.1.5.2.2-1: Callback URI variables
* * *
Name Data type P Cardinality Description n/a
* * *
Support of request data structures is specified in table 6.1.5.2.2-2, and
support of response data structures and response codes is specified in table
6.1.5.2.2-3.
Table 6.1.5.2.2-2: Data structures supported by the POST Request Body
* * *
Data type P Cardinality Description NotificationData M 1 Representation of the
event notification.
* * *
Table 6.1.5.2.2-3: Data structures supported by the POST Response Body
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | This case | | | | | Content | represents a | | | | | | successful | | | | | | notification | | | | | | of the event. | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 404 Not Found | If the NF | | roblemDetails | | | | Service | | | | | | Consumer | | | | | | considers the | | | | | | \"eventNoti | | | | | | ficationUri\" | | | | | | and/or | | | | | | \ | | | | | | "Notification | | | | | | Correlation | | | | | | ID\" is not | | | | | | recognized, | | | | | | the NF | | | | | | Service | | | | | | Consumer | | | | | | shall return | | | | | | \"404 Not | | | | | | Found\" | | | | | | status code | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | NOTE 1: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the POST | | | | | | method listed | | | | | | in Table | | | | | | 5.2.7.1-1 of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | other than | | | | | | those | | | | | | specified in | | | | | | the table | | | | | | above also | | | | | | apply, with a | | | | | | P | | | | | | roblemDetails | | | | | | data type | | | | | | (see clause | | | | | | 5.2.7 of | | | | | | 3GPP TS 2 | | | | | | 9.500 [4]). | | | | | | | | | | | | NOTE 2: | | | | | | Red | | | | | | irectResponse | | | | | | may be | | | | | | inserted by | | | | | | an SCP, see | | | | | | cl | | | | | | ause 6.10.9.1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4]. | | | | | +---------------+---+-------------+---------------+---------------+
Table 6.1.5.2.2-4: Headers supported by the 307 Response Code on this endpoint
* * *
Name Data type P Cardinality Description Location string M 1 A URI pointing to
the endpoint of the NF service consumer instance to which the request should
be sent. For the case, when a request is redirected to the same target
resource via a different SCP, see clause 6.10.9.1 in 3GPP TS 29.500 [4]. 3gpp-
Sbi-Target-Nf-Id string O 0..1 Identifier of the target NF instance ID towards
which the notification is redirected
* * *
Table 6.1.5.2.2-5: Headers supported by the 308 Response Code on this endpoint
* * *
Name Data type P Cardinality Description Location string M 1 A URI pointing to
the endpoint of the NF service consumer instance to which the request should
be sent. For the case, when a request is redirected to the same target
resource via a different SCP, see clause 6.10.9.1 in 3GPP TS 29.500 [4]. 3gpp-
Sbi-Target-Nf-Id string O 0..1 Identifier of the target NF instance ID towards
which the notification is redirected
* * *
### 6.1.6 Data Model
#### 6.1.6.1 General
This clause specifies the application data model supported by the API.
Table 6.1.6.1-1 specifies the data types defined for the Nupf_EventExposure
service.
Table 6.1.6.1-1: Nupf_EventExposure specific Data Types
Data type Clause defined Description Applicability
* * *
NotificationData 6.1.6.2.2 The list of NotificationItems  
NotificationItem 6.1.6.2.3 Represents a report on one subscribed event  
QosMonitoringMeasurement 6.1.6.2.4 QoS Monitoring Measurement information  
UserDataUsageMeasurements 6.1.6.2.5 User Data Usage Measurements  
VolumeMeasurement 6.1.6.2.6 Volume Measurement  
ThroughputMeasurement 6.1.6.2.7 Throughput Measurement  
ApplicationRelatedInformation 6.1.6.2.8 Application Related Information  
ThroughputStatisticMeasurement 6.1.6.2.9 Throughput Statistic Measurement  
DomainInformation 6.1.6.2.10 Domain Name and Domain Name Protocol  
UpfEventSubscription 6.1.6.2.11 Represents an individual event subscription
resource on UPF  
UpfEventMode 6.1.6.2.12 Describes how the reports shall be generated for a
subscribed event  
UpfEvent 6.1.6.2.13 Describes an event to be subscribed  
CreateEventSubscription 6.1.6.2.14 Data within a create UPF event subscription
request  
CreatedEventSubscription 6.1.6.2.15 Data within a create UPF event
subscription response  
ReportingSuggestionInformation 6.1.6.2.16 Reporting Suggestion Information  
TscManagementInfo 6.1.6.2.17 TSC Management Information  
EventType 6.1.6.3.3 Event Type  
UpfEventTrigger 6.1.6.3.4 Describes how the UPF generates the report for the
event  
MeasurementType 6.1.6.3.5 Type of Measurement  
GranularityOfMeasurement 6.1.6.3.6 Granularity Of Measurement  
DnProtocol 6.1.6.3.7 Domain Name Protocol
Table 6.1.6.1-2 specifies data types re-used by the Nupf_EventExposure service
from other specifications, including a reference to their respective
specifications and when needed, a short description of their use within the
Nupf_EventExposure service.
Table 6.1.6.1-2: Nupf_EventExposure re-used Data Types
Data type Reference Comments Applicability
* * *
DateTime 3GPP TS 29.571 [16] Date time  
Dnn 3GPP TS 29.571 [16] DNN  
Gpsi 3GPP TS 29.571 [16] GPSI  
Snssai 3GPP TS 29.571 [16] S-NSSAI  
Uint32 3GPP TS 29.571 [16] Uint32  
MacAddr48 3GPP TS 29.571 [16] MAC Address  
Ipv4Addr 3GPP TS 29.571 [16] IPv4 address  
Ipv6Prefix 3GPP TS 29.571 [16] IPv6 address prefix  
Uint64 3GPP TS 29.571 [16] Unsigned 64-bit integer  
BitRate 3GPP TS 29.571 [16] Bit rate  
PacketRate 3GPP TS 29.571 [16] Packet rate  
TrafficVolume 3GPP TS 29.571 [16] Traffic Volume  
ApplicationId 3GPP TS 29.571 [16] The application identifier.  
DurationSec 3GPP TS 29.571 [16]  
NotificationFlag 3GPP TS 29.571 [16] Notification flag.  
PartitioningCriteria 3GPP TS 29.571 [16] Used to partition UEs before applying
sampling.  
ProblemDetails 3GPP TS 29.571 [16]  
SamplingRatio 3GPP TS 29.571 [16] Sampling Ratio.  
Uri 3GPP TS 29.571 [16]  
IpAddr 3GPP TS 29.571 [16]  
SupportedFeatures 3GPP TS 29.571 [16]  
Supi 3GPP TS 29.571 [16]  
Pei 3GPP TS 29.571 [16]  
Uinteger 3GPP TS 29.571 [16] Unsigned Integer  
PortManagementContainer 3GPP TS 29.512 [19] PMIC  
BridgeManagementContainer 3GPP TS 29.512 [19] UMIC  
FlowInformation 3GPP TS 29.512 [19] IP or Ethernet Flow Information  
PatchItem 3GPP TS 29.571 [16] Patch item of JSON PATCH  
PatchResult 3GPP TS 29.571 [16] Patch result of JSON PATCH
#### 6.1.6.2 Structured data types
##### 6.1.6.2.1 Introduction
This clause defines the structures to be used in resource representations.
##### 6.1.6.2.2 Type: NotificationData
Table 6.1.6.2.2-1: Definition of type NotificationData
Attribute name Data type P Cardinality Description Applicability
* * *
notificationItems array(NotificationItem) M 1..N The list of NotificationItem,
each entry corresponds to a report on one subscribed event per PDU session.  
correlationId string C 0..1 The UPF shall include this attribute in the
notification if the \"Notification Correlation ID\" IE was received via N4
interface (see clause 7.5.2.9 of 3GPP TS 29.244 [15])
##### 6.1.6.2.3 Type: NotificationItem
Table 6.1.6.2.3-1: Definition of type NotificationItem
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +===========+===========+===+===========+===========+===========+ | eventType | EventType | M | 1 | The event | | | | | | | type of | | | | | | | the event | | | | | | | for which | | | | | | | the | | | | | | | not | | | | | | | ification | | | | | | | is | | | | | | | g | | | | | | | enerated. | | +-----------+-----------+---+-----------+-----------+-----------+ | u | Ipv4Addr | C | 0..1 | IPv4 | | | eIpv4Addr | | | | address | | | | | | | of the UE | | | | | | | (NOTE 1) | | +-----------+-----------+---+-----------+-----------+-----------+ | ueI | I | C | 0..1 | IPv6 | | | pv6Prefix | pv6Prefix | | | address | | | | | | | prefix of | | | | | | | the UE | | | | | | | (NOTE 1) | | +-----------+-----------+---+-----------+-----------+-----------+ | ueMacAddr | MacAddr48 | O | 0..1 | MAC | | | | | | | address | | | | | | | of the | | | | | | | UE. | | | | | | | | | | | | | | (NOTE 2) | | +-----------+-----------+---+-----------+-----------+-----------+ | dnn | Dnn | O | 0..1 | When | | | | | | | present, | | | | | | | this | | | | | | | attribute | | | | | | | indicates | | | | | | | the DNN | | | | | | | of the | | | | | | | PDU | | | | | | | session | | | | | | | for which | | | | | | | the | | | | | | | not | | | | | | | ification | | | | | | | is | | | | | | | g | | | | | | | enerated. | | +-----------+-----------+---+-----------+-----------+-----------+ | snssai | Snssai | O | 0..1 | When | | | | | | | present, | | | | | | | this | | | | | | | attribute | | | | | | | indicates | | | | | | | the | | | | | | | S-NSSAI | | | | | | | of the | | | | | | | PDU | | | | | | | session | | | | | | | for which | | | | | | | the | | | | | | | not | | | | | | | ification | | | | | | | is | | | | | | | g | | | | | | | enerated. | | +-----------+-----------+---+-----------+-----------+-----------+ | gpsi | Gpsi | O | 0..1 | When | | | | | | | present, | | | | | | | this | | | | | | | attribute | | | | | | | indicates | | | | | | | the GPSI | | | | | | | of the UE | | | | | | | for which | | | | | | | the | | | | | | | not | | | | | | | ification | | | | | | | is | | | | | | | g | | | | | | | enerated. | | +-----------+-----------+---+-----------+-----------+-----------+ | supi | Supi | O | 0..1 | Sub | | | | | | | scription | | | | | | | Permanent | | | | | | | I | | | | | | | dentifier | | +-----------+-----------+---+-----------+-----------+-----------+ | timeStamp | DateTime | M | 1 | The value | | | | | | | r | | | | | | | epresents | | | | | | | the UTC | | | | | | | time when | | | | | | | the | | | | | | | in | | | | | | | formation | | | | | | | in this | | | | | | | report | | | | | | | was | | | | | | | g | | | | | | | enerated. | | +-----------+-----------+---+-----------+-----------+-----------+ | startTime | DateTime | O | 0..1 | When | | | | | | | present, | | | | | | | this | | | | | | | attribute | | | | | | | shall | | | | | | | provide | | | | | | | the | | | | | | | timestamp | | | | | | | when the | | | | | | | in | | | | | | | formation | | | | | | | measured | | | | | | | for | | | | | | | g | | | | | | | enerating | | | | | | | this | | | | | | | report | | | | | | | was | | | | | | | started. | | +-----------+-----------+---+-----------+-----------+-----------+ | qosMon | QosMon | C | 0..1 | This | | | itoringMe | itoringMe | | | attribute | | | asurement | asurement | | | shall be | | | | | | | present | | | | | | | if | | | | | | | eventType | | | | | | | is set to | | | | | | | \" | | | | | | | QOS_MONI | | | | | | | TORING\". | | +-----------+-----------+---+-----------+-----------+-----------+ | userDat | array | C | 1..N | This IE | | | aUsageMea | (UserData | | | shall be | | | surements | UsageMeas | | | present | | | | urements) | | | if | | | | | | | eventType | | | | | | | is set to | | | | | | | \"US | | | | | | | ER_DATA\ | | | | | | | _USAGE_M | | | | | | | EASURES\" | | | | | | | or | | | | | | | \"U | | | | | | | SER_DATA | | | | | | | _USAGE_ | | | | | | | TRENDS\". | | +-----------+-----------+---+-----------+-----------+-----------+ | ts | TscManag | C | 0..1 | This | | | cMngtInfo | ementInfo | | | attribute | | | | | | | shall be | | | | | | | present | | | | | | | if | | | | | | | eventType | | | | | | | is set to | | | | | | | \" | | | | | | | TSC_MNGT | | | | | | | _INFO\". | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE 1: | | | | | | | At least | | | | | | | one of | | | | | | | u | | | | | | | eIpv4Addr | | | | | | | and | | | | | | | ueI | | | | | | | pv6Prefix | | | | | | | shall be | | | | | | | present | | | | | | | if the | | | | | | | sub | | | | | | | scription | | | | | | | applies | | | | | | | to an IP | | | | | | | PDU | | | | | | | session. | | | | | | | | | | | | | | NOTE 2: | | | | | | | An NF | | | | | | | service | | | | | | | consumer | | | | | | | su | | | | | | | bscribing | | | | | | | to | | | | | | | receive | | | | | | | QoS | | | | | | | M | | | | | | | onitoring | | | | | | | Me | | | | | | | asurement | | | | | | | report | | | | | | | for an | | | | | | | ethernet | | | | | | | PDU | | | | | | | session | | | | | | | shall | | | | | | | accept | | | | | | | the | | | | | | | Notific | | | | | | | ationItem | | | | | | | having | | | | | | | neither | | | | | | | u | | | | | | | eIpv4Addr | | | | | | | nor | | | | | | | ueIp | | | | | | | v6Prefix. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
##### 6.1.6.2.4 Type: QosMonitoringMeasurement
Table 6.1.6.2.3-1: Definition of type QosMonitoringMeasurement
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +===========+===========+===+===========+===========+===========+ | flowInfos | arra | C | 1..N | When | | | | y(FlowInf | | | present, | | | | ormation) | | | this IE | | | | | | | shall | | | | | | | contain | | | | | | | an array | | | | | | | of | | | | | | | Ethernet | | | | | | | or IP | | | | | | | flow | | | | | | | packet | | | | | | | filter | | | | | | | in | | | | | | | formation | | | | | | | corr | | | | | | | esponding | | | | | | | to the | | | | | | | QoS flow. | | | | | | | | | | | | | | (NOTE) | | +-----------+-----------+---+-----------+-----------+-----------+ | appIds | ar | C | 1..N | When | | | | ray(Appli | | | present, | | | | cationId) | | | this IE | | | | | | | shall | | | | | | | contain | | | | | | | an array | | | | | | | of | | | | | | | ap | | | | | | | plication | | | | | | | id | | | | | | | entifiers | | | | | | | corr | | | | | | | esponding | | | | | | | to the | | | | | | | QoS flow. | | | | | | | | | | | | | | (NOTE) | | +-----------+-----------+---+-----------+-----------+-----------+ | dlPa | Uint32 | O | 0..1 | When | | | cketDelay | | | | present, | | | | | | | the value | | | | | | | of this | | | | | | | attribute | | | | | | | is set to | | | | | | | the | | | | | | | measured | | | | | | | downlink | | | | | | | packet | | | | | | | delay in | | | | | | | mi | | | | | | | llisecond | | | | | | | (ms). | | +-----------+-----------+---+-----------+-----------+-----------+ | ulPa | Uint32 | O | 0..1 | When | | | cketDelay | | | | present, | | | | | | | the value | | | | | | | of this | | | | | | | attribute | | | | | | | is set to | | | | | | | the | | | | | | | measured | | | | | | | uplink | | | | | | | packet | | | | | | | delay in | | | | | | | mi | | | | | | | llisecond | | | | | | | (ms). | | +-----------+-----------+---+-----------+-----------+-----------+ | rtrPa | Uint32 | O | 0..1 | When | | | cketDelay | | | | present, | | | | | | | the value | | | | | | | of this | | | | | | | attribute | | | | | | | is set to | | | | | | | the | | | | | | | measured | | | | | | | round | | | | | | | trip | | | | | | | packet | | | | | | | delay in | | | | | | | mi | | | | | | | llisecond | | | | | | | (ms). | | +-----------+-----------+---+-----------+-----------+-----------+ | measu | boolean | C | 0..1 | This IE | | | reFailure | | | | shall be | | | | | | | present | | | | | | | to report | | | | | | | packet | | | | | | | delay | | | | | | | me | | | | | | | asurement | | | | | | | failure. | | | | | | | | | | | | | | When | | | | | | | present, | | | | | | | it shall | | | | | | | be set to | | | | | | | true to | | | | | | | indicate | | | | | | | the | | | | | | | report is | | | | | | | sent due | | | | | | | to packet | | | | | | | delay | | | | | | | me | | | | | | | asurement | | | | | | | failure. | | | | | | | This IE | | | | | | | is named | | | | | | | as the | | | | | | | \"PLMF\" | | | | | | | flag over | | | | | | | PFCP | | | | | | | i | | | | | | | nterface. | | | | | | | See also | | | | | | | clauses | | | | | | | 5.24.4.3 | | | | | | | and | | | | | | | 8.2.171 | | | | | | | in | | | | | | | 3GPP | | | | | | | TS 29.24 | | | | | | | 4 [15]. | | +-----------+-----------+---+-----------+-----------+-----------+ | dlMinT | BitRate | O | 0..1 | When | | | hroughput | | | | present, | | | | | | | this IE | | | | | | | shall | | | | | | | indicate | | | | | | | the | | | | | | | minimum | | | | | | | data | | | | | | | t | | | | | | | hroughput | | | | | | | in | | | | | | | downlink | | | | | | | d | | | | | | | irection. | | +-----------+-----------+---+-----------+-----------+-----------+ | dlMaxT | BitRate | O | 0..1 | When | | | hroughput | | | | present, | | | | | | | this IE | | | | | | | shall | | | | | | | indicate | | | | | | | the | | | | | | | maximum | | | | | | | data | | | | | | | t | | | | | | | hroughput | | | | | | | in | | | | | | | downlink | | | | | | | d | | | | | | | irection. | | +-----------+-----------+---+-----------+-----------+-----------+ | dlAveT | BitRate | O | 0..1 | When | | | hroughput | | | | present, | | | | | | | this IE | | | | | | | shall | | | | | | | indicate | | | | | | | the | | | | | | | average | | | | | | | data | | | | | | | t | | | | | | | hroughput | | | | | | | in | | | | | | | downlink | | | | | | | d | | | | | | | irection. | | +-----------+-----------+---+-----------+-----------+-----------+ | ulMinT | BitRate | O | 0..1 | When | | | hroughput | | | | present, | | | | | | | this IE | | | | | | | shall | | | | | | | indicate | | | | | | | the | | | | | | | minimum | | | | | | | data | | | | | | | t | | | | | | | hroughput | | | | | | | in uplink | | | | | | | d | | | | | | | irection. | | +-----------+-----------+---+-----------+-----------+-----------+ | ulMaxT | BitRate | O | 0..1 | When | | | hroughput | | | | present, | | | | | | | this IE | | | | | | | shall | | | | | | | indicate | | | | | | | the | | | | | | | maximum | | | | | | | data | | | | | | | t | | | | | | | hroughput | | | | | | | in uplink | | | | | | | d | | | | | | | irection. | | +-----------+-----------+---+-----------+-----------+-----------+ | ulAveT | BitRate | O | 0..1 | When | | | hroughput | | | | present, | | | | | | | this IE | | | | | | | shall | | | | | | | indicate | | | | | | | the | | | | | | | average | | | | | | | data | | | | | | | t | | | | | | | hroughput | | | | | | | in uplink | | | | | | | d | | | | | | | irection. | | +-----------+-----------+---+-----------+-----------+-----------+ | dlC | string | O | 0..1 | When | | | ongestion | | | | present, | | | | | | | this IE | | | | | | | shall | | | | | | | contain | | | | | | | Downlink | | | | | | | c | | | | | | | ongestion | | | | | | | inf | | | | | | | ormation. | | +-----------+-----------+---+-----------+-----------+-----------+ | ulC | string | O | 0..1 | When | | | ongestion | | | | present, | | | | | | | this IE | | | | | | | shall | | | | | | | contain | | | | | | | Uplink | | | | | | | c | | | | | | | ongestion | | | | | | | inf | | | | | | | ormation. | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE: | | | | | | | Either | | | | | | | the | | | | | | | flowInfos | | | | | | | IE or the | | | | | | | appIds IE | | | | | | | should be | | | | | | | present, | | | | | | | not both. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
Editor\'s note: the encoding of the dlCongestion and ulCongestion IEs is FFS.
Editor\'s note: whether and how to report the minimum, maximum and average DL
and/or UL throughput over the measurement period is FFS.
##### 6.1.6.2.5 Type: UserDataUsageMeasurements
Table 6.1.6.2.5-1: Definition of type UserDataUsageMeasurements
+---------------+---------------+---+-------------+---------------+ | Attribute | Data type | P | Cardinality | Description | | name | | | | | +===============+===============+===+=============+===============+ | appId | ApplicationId | C | 0..1 | When present, | | | | | | this IE shall | | | | | | contain the | | | | | | application | | | | | | identifier. | | | | | | This IE shall | | | | | | be included | | | | | | if the | | | | | | requested | | | | | | granularity | | | | | | of | | | | | | measurement | | | | | | was set to | | | | | | \"PER_A | | | | | | PPLICATION\". | | | | | | | | | | | | This IE may | | | | | | be present if | | | | | | the requested | | | | | | granularity | | | | | | of | | | | | | measurement | | | | | | was set to | | | | | | \"PER FLOW\". | | | | | | | | | | | | (NOTE) | +---------------+---------------+---+-------------+---------------+ | flowInfo | Fl | C | 0..1 | When present, | | | owInformation | | | this IE shall | | | | | | contain the | | | | | | IP or | | | | | | Ethernet data | | | | | | flow | | | | | | information. | | | | | | This IE shall | | | | | | be included | | | | | | if the | | | | | | requested | | | | | | granularity | | | | | | of | | | | | | measurement | | | | | | was set to | | | | | | \"PER FLOW\". | | | | | | | | | | | | (NOTE) | +---------------+---------------+---+-------------+---------------+ | volu | Volu | C | 0..1 | This | | meMeasurement | meMeasurement | | | attribute | | | | | | shall be | | | | | | present if | | | | | | eventType is | | | | | | set to | | | | | | \"USE | | | | | | R_DATA_USAG | | | | | | E_MEASURES\" | | | | | | and | | | | | | me | | | | | | asurementType | | | | | | is set to | | | | | | \"VOLUME_M | | | | | | EASUREMENT\". | +---------------+---------------+---+-------------+---------------+ | throughp | Throughp | C | 0..1 | This | | utMeasurement | utMeasurement | | | attribute | | | | | | shall be | | | | | | present if | | | | | | eventType is | | | | | | set to | | | | | | \"USE | | | | | | R_DATA_USAG | | | | | | E_MEASURES\" | | | | | | and | | | | | | me | | | | | | asurementType | | | | | | is set to | | | | | | \" | | | | | | THROUGHPUT_M | | | | | | EASUREMENT\". | +---------------+---------------+---+-------------+---------------+ | app | App | C | 0..1 | This | | licationRelat | licationRelat | | | attribute | | edInformation | edInformation | | | shall be | | | | | | present if | | | | | | eventType is | | | | | | set to | | | | | | \"USE | | | | | | R_DATA_USAG | | | | | | E_MEASURES\" | | | | | | and | | | | | | me | | | | | | asurementType | | | | | | is set to | | | | | | \"APPLICATIO | | | | | | N_RELATED_I | | | | | | NFORMATION\". | +---------------+---------------+---+-------------+---------------+ | throu | Thro | C | 0..1 | This | | ghputStatisti | ughputStatist | | | attribute | | cMeasurements | icMeasurement | | | shall be | | | | | | present if | | | | | | eventType is | | | | | | set to | | | | | | \"US | | | | | | ER_DATA_USA | | | | | | GE_TRENDS\". | +---------------+---------------+---+-------------+---------------+ | NOTE: Either | | | | | | the appId or | | | | | | the flowInfo | | | | | | may be | | | | | | present, not | | | | | | both. When | | | | | | neither appId | | | | | | nor flowInfo | | | | | | is present, | | | | | | the | | | | | | measurements | | | | | | (i.e., the | | | | | | volu | | | | | | meMeasurement | | | | | | and/or the | | | | | | throughpu | | | | | | tMeasurement, | | | | | | and/or the | | | | | | app | | | | | | licationRelat | | | | | | edInformation | | | | | | and/or the | | | | | | throug | | | | | | hputStatistic | | | | | | Measurements) | | | | | | shall | | | | | | correspond to | | | | | | the user | | | | | | plane | | | | | | measurements | | | | | | of the PDU | | | | | | session. When | | | | | | appId is | | | | | | present, the | | | | | | measurements | | | | | | shall | | | | | | correspond to | | | | | | user plane | | | | | | measurements | | | | | | of the | | | | | | application | | | | | | identified by | | | | | | the appId. | | | | | | When flowInfo | | | | | | is present, | | | | | | the | | | | | | measurement | | | | | | shall | | | | | | correspond to | | | | | | user plane | | | | | | measurements | | | | | | for the data | | | | | | flow | | | | | | identified by | | | | | | the flowInfo. | | | | | +---------------+---------------+---+-------------+---------------+
##### 6.1.6.2.6 Type: VolumeMeasurement
Table 6.1.6.2.6-1: Definition of type VolumeMeasurement
Attribute name Data type P Cardinality Description
* * *
totalVolume TrafficVolume O 0..1 When present, this IE shall indicate the
total volume (bytes) of user plane traffic for both the uplink and downlink
directions. ulVolume TrafficVolume O 0..1 When present, this IE shall indicate
the volume (bytes) of user plane traffic for the uplink direction. dlVolume
TrafficVolume O 0..1 When present, this IE shall indicate the volume (bytes)
of user plane traffic for the downlink direction. totalNbOfPackets Uint64 O
0..1 When present, this IE shall indicate the total number of user plane
packets for both uplink and downlink directions. ulNbOfPackets Uint64 O 0..1
When present, this IE shall indicate the number of user plane packets for the
uplink direction. dlNbOfPackets Uint64 O 0..1 When present, this IE shall
indicate the number of user plane packets for the downlink direction.
##### 6.1.6.2.7 Type: ThroughputMeasurement
Table 6.1.6.2.7-1: Definition of type ThroughputMeasurement
+----------------+------------+---+-------------+----------------+ | Attribute name | Data type | P | Cardinality | Description | +================+============+===+=============+================+ | ulThroughput | BitRate | O | 0..1 | When present, | | | | | | this IE shall | | | | | | indicate the | | | | | | measurement of | | | | | | data | | | | | | throughput in | | | | | | uplink | | | | | | direction. | +----------------+------------+---+-------------+----------------+ | dlThroughput | BitRate | O | 0..1 | When present, | | | | | | this IE shall | | | | | | indicate the | | | | | | measurement of | | | | | | data | | | | | | throughput in | | | | | | downlink | | | | | | direction. | +----------------+------------+---+-------------+----------------+ | ulPa | PacketRate | O | 0..1 | When present, | | cketThroughput | | | | this IE shall | | | | | | indicate the | | | | | | measurement of | | | | | | packet | | | | | | throughput in | | | | | | uplink | | | | | | direction. | | | | | | | | | | | | . | +----------------+------------+---+-------------+----------------+ | dlPa | PacketRate | O | 0..1 | When present, | | cketThroughput | | | | this IE shall | | | | | | indicate the | | | | | | measurement of | | | | | | packet | | | | | | throughput in | | | | | | downlink | | | | | | direction. | +----------------+------------+---+-------------+----------------+
##### 6.1.6.2.8 Type: ApplicationRelatedInformation
Table 6.1.6.2.8-1: Definition of type ApplicationRelatedInformation
Attribute name Data type P Cardinality Description
* * *
urls array(Uri) O 1..N This IE may be present if available. When present, it
shall contain a list of URLs detected in the traffic identified by the
information included in the subscription request, e.g. an application id.
domainInfoList array(DomainInformation) O 1..N This IE may be present if
available. When present, it shall contain a list of Domain information
detected in the traffic identified by the information included in the
subscription request, e.g. an application id.
##### 6.1.6.2.9 Type: ThroughputStatisticMeasurement
Table 6.1.6.2.9-1: Definition of type ThroughputStatisticMeasurement
Attribute name Data type P Cardinality Description
* * *
ulAverageThroughput BitRate O 0..1 When present, this IE shall indicate the
average throughput in uplink direction over the measurement period.
dlAverageThroughput BitRate O 0..1 When present, this IE shall indicate the
average throughput in downlink direction over the measurement period.
ulPeakThroughput BitRate O 0..1 When present, this IE shall indicate the peak
throughput in uplink direction over the measurement period. dlPeakThroughput
BitRate O 0..1 When present, this IE shall indicate the peak throughput in
downlink direction over the measurement period. ulAveragePacketThroughput
PacketRate O 0..1 When present, this IE shall indicate the average packet
throughput in uplink direction. dlAveragePacketThroughput PacketRate O 0..1
When present, this IE shall indicate the average packet throughput in downlink
direction. ulPeakPacketThroughput PacketRate O 0..1 When present, this IE
shall indicate the Peak packet throughput in uplink direction.
dlPeakPacketThroughput PacketRate O 0..1 When present, this IE shall indicate
the Peak packet throughput in downlink direction.
##### 6.1.6.2.10 Type: DomainInformation
Table 6.1.6.2.10-1: Definition of type: DomainInformation
Attribute name Data type P Cardinality Description
* * *
domainName Fqdn M 1 This IE shall contain a domain name. domainNameProtocol
DnProtocol O 0..1 This IE may be present to contain the Domain Name Protocol.
##### 6.1.6.2.11 Type: UpfEventSubscription
Table 6.1.6.2.11-1: Definition of type UpfEventSubscription
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +===========+===========+===+===========+===========+===========+ | eventList | array( | M | 1..N | Describes | | | | UpfEvent) | | | the | | | | | | | events to | | | | | | | be | | | | | | | s | | | | | | | ubscribed | | | | | | | in | | | | | | | sub | | | | | | | scription | | | | | | | request | | | | | | | or the | | | | | | | events | | | | | | | suc | | | | | | | cessfully | | | | | | | s | | | | | | | ubscribed | | | | | | | for this | | | | | | | sub | | | | | | | scription | | | | | | | in | | | | | | | sub | | | | | | | scription | | | | | | | response. | | +-----------+-----------+---+-----------+-----------+-----------+ | event | Uri | M | 1 | I | | | NotifyUri | | | | dentifies | | | | | | | the | | | | | | | recipient | | | | | | | of | | | | | | | noti | | | | | | | fications | | | | | | | sent by | | | | | | | UPF for | | | | | | | this | | | | | | | sub | | | | | | | scription | | +-----------+-----------+---+-----------+-----------+-----------+ | n | string | M | 1 | I | | | otifyCorr | | | | dentifies | | | elationId | | | | the | | | | | | | not | | | | | | | ification | | | | | | | co | | | | | | | rrelation | | | | | | | ID. The | | | | | | | UPF shall | | | | | | | include | | | | | | | this ID | | | | | | | in the | | | | | | | notif | | | | | | | ications. | | | | | | | The value | | | | | | | of this | | | | | | | IE shall | | | | | | | be unique | | | | | | | per | | | | | | | sub | | | | | | | scription | | | | | | | for a | | | | | | | given NF | | | | | | | service | | | | | | | consumer. | | +-----------+-----------+---+-----------+-----------+-----------+ | eventRepo | Upf | M | 1 | This IE | | | rtingMode | EventMode | | | shall be | | | | | | | included | | | | | | | to | | | | | | | describe | | | | | | | how the | | | | | | | reports | | | | | | | of the | | | | | | | event | | | | | | | shall be | | | | | | | g | | | | | | | enerated. | | +-----------+-----------+---+-----------+-----------+-----------+ | nfId | NfI | M | 1 | Indicates | | | | nstanceId | | | the | | | | | | | instance | | | | | | | identity | | | | | | | of the | | | | | | | network | | | | | | | function | | | | | | | creating | | | | | | | the | | | | | | | subs | | | | | | | cription. | | +-----------+-----------+---+-----------+-----------+-----------+ | ue | IpAddr | C | 0..1 | The IE | | | IpAddress | | | | shall be | | | | | | | present | | | | | | | if the | | | | | | | event | | | | | | | sub | | | | | | | scription | | | | | | | is | | | | | | | a | | | | | | | pplicable | | | | | | | to one | | | | | | | UE. The | | | | | | | IE shall | | | | | | | indicate | | | | | | | the UE\'s | | | | | | | PDU | | | | | | | Session | | | | | | | IP | | | | | | | address. | | | | | | | | | | | | | | (NOTE) | | +-----------+-----------+---+-----------+-----------+-----------+ | supi | Supi | O | 0..1 | Sub | | | | | | | scription | | | | | | | Permanent | | | | | | | I | | | | | | | dentifier | | +-----------+-----------+---+-----------+-----------+-----------+ | gpsi | Gpsi | O | 0..1 | Generic | | | | | | | Public | | | | | | | Sub | | | | | | | scription | | | | | | | I | | | | | | | dentifier | | +-----------+-----------+---+-----------+-----------+-----------+ | pei | Pei | O | 0..1 | Permanent | | | | | | | Equipment | | | | | | | I | | | | | | | dentifier | | +-----------+-----------+---+-----------+-----------+-----------+ | anyUe | boolean | C | 0..1 | This IE | | | | | | | shall be | | | | | | | present | | | | | | | if the | | | | | | | event | | | | | | | sub | | | | | | | scription | | | | | | | is | | | | | | | a | | | | | | | pplicable | | | | | | | to any | | | | | | | UE. | | | | | | | | | | | | | | When | | | | | | | present, | | | | | | | it shall | | | | | | | be set as | | | | | | | follows: | | | | | | | | | | | | | | true: the | | | | | | | sub | | | | | | | scription | | | | | | | applies | | | | | | | to any | | | | | | | UE. | | | | | | | | | | | | | | false | | | | | | | ( | | | | | | | default): | | | | | | | the | | | | | | | sub | | | | | | | scription | | | | | | | applies | | | | | | | to a | | | | | | | specific | | | | | | | UE. | | | | | | | | | | | | | | (NOTE) | | +-----------+-----------+---+-----------+-----------+-----------+ | dnn | Dnn | O | 0..1 | Data | | | | | | | Network | | | | | | | Name | | +-----------+-----------+---+-----------+-----------+-----------+ | snssai | Snssai | O | 0..1 | A single | | | | | | | Network | | | | | | | Slice | | | | | | | Selection | | | | | | | A | | | | | | | ssistance | | | | | | | Inf | | | | | | | ormation. | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE: | | | | | | | Either | | | | | | | in | | | | | | | formation | | | | | | | about a | | | | | | | single UE | | | | | | | (i.e. | | | | | | | I | | | | | | | pAddress) | | | | | | | or anyUe | | | | | | | set to | | | | | | | true | | | | | | | shall be | | | | | | | included. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
Editor\'s Note: Whether one DNN and/or one S-NSSAI shall be present when
subscription is for any UE is FFS. The cardinality and description of DNN and
S-NSSAI are FFS.
##### 6.1.6.2.12 Type: UpfEventMode
Table 6.1.6.2.12-1: Definition of type UpfEventMode
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +===========+===========+===+===========+===========+===========+ | trigger | UpfEve | M | 1 | Describes | | | | ntTrigger | | | how the | | | | | | | reports | | | | | | | are | | | | | | | t | | | | | | | riggered. | | +-----------+-----------+---+-----------+-----------+-----------+ | m | integer | C | 0..1 | This IE | | | axReports | | | | may be | | | | | | | present | | | | | | | if the | | | | | | | trigger | | | | | | | is set to | | | | | | | \"PE | | | | | | | RIODIC\". | | | | | | | When | | | | | | | present, | | | | | | | this IE | | | | | | | shall | | | | | | | indicate | | | | | | | the | | | | | | | maximum | | | | | | | number of | | | | | | | reports | | | | | | | that can | | | | | | | be | | | | | | | generated | | | | | | | by each | | | | | | | s | | | | | | | ubscribed | | | | | | | event in | | | | | | | the | | | | | | | subs | | | | | | | cription. | | | | | | | | | | | | | | If the | | | | | | | UPF event | | | | | | | sub | | | | | | | scription | | | | | | | is for a | | | | | | | list of | | | | | | | events, | | | | | | | this | | | | | | | parameter | | | | | | | shall be | | | | | | | applied | | | | | | | to each | | | | | | | i | | | | | | | ndividual | | | | | | | event in | | | | | | | the list. | | +-----------+-----------+---+-----------+-----------+-----------+ | expiry | DateTime | C | 0..1 | This IE | | | | | | | shall be | | | | | | | included | | | | | | | in an | | | | | | | event | | | | | | | sub | | | | | | | scription | | | | | | | response, | | | | | | | if, based | | | | | | | on | | | | | | | operator | | | | | | | policy | | | | | | | and | | | | | | | taking | | | | | | | into | | | | | | | account | | | | | | | the | | | | | | | expiry | | | | | | | time | | | | | | | included | | | | | | | in the | | | | | | | request, | | | | | | | the UPF | | | | | | | needs to | | | | | | | include | | | | | | | an expiry | | | | | | | time. | | | | | | | | | | | | | | This IE | | | | | | | may be | | | | | | | included | | | | | | | in an | | | | | | | event | | | | | | | sub | | | | | | | scription | | | | | | | request. | | | | | | | | | | | | | | When | | | | | | | present, | | | | | | | this IE | | | | | | | shall | | | | | | | represent | | | | | | | the time | | | | | | | after | | | | | | | which the | | | | | | | s | | | | | | | ubscribed | | | | | | | event(s) | | | | | | | shall | | | | | | | stop | | | | | | | g | | | | | | | enerating | | | | | | | report | | | | | | | and the | | | | | | | sub | | | | | | | scription | | | | | | | becomes | | | | | | | invalid. | | | | | | | If the | | | | | | | trigger | | | | | | | value | | | | | | | included | | | | | | | in an | | | | | | | event | | | | | | | sub | | | | | | | scription | | | | | | | response | | | | | | | is | | | | | | | \"ON | | | | | | | E_TIME\" | | | | | | | and if an | | | | | | | event | | | | | | | report is | | | | | | | included | | | | | | | in the | | | | | | | sub | | | | | | | scription | | | | | | | response | | | | | | | then the | | | | | | | value of | | | | | | | the | | | | | | | expiry | | | | | | | included | | | | | | | in the | | | | | | | response | | | | | | | shall be | | | | | | | an | | | | | | | immediate | | | | | | | t | | | | | | | imestamp. | | +-----------+-----------+---+-----------+-----------+-----------+ | repPeriod | Du | C | 0..1 | This IE | | | | rationSec | | | shall be | | | | | | | present | | | | | | | if the | | | | | | | trigger | | | | | | | is set to | | | | | | | \"PE | | | | | | | RIODIC\". | | | | | | | When | | | | | | | present, | | | | | | | this IE | | | | | | | shall | | | | | | | indicate | | | | | | | the | | | | | | | period | | | | | | | time for | | | | | | | the event | | | | | | | reports. | | | | | | | | | | | | | | When the | | | | | | | Event | | | | | | | Sub | | | | | | | scription | | | | | | | is for | | | | | | | \"ANY | | | | | | | UE\", the | | | | | | | NF | | | | | | | Consumer | | | | | | | should | | | | | | | set the | | | | | | | \"re | | | | | | | pPeriod\" | | | | | | | to a | | | | | | | value | | | | | | | which | | | | | | | does not | | | | | | | lead to a | | | | | | | potential | | | | | | | overload | | | | | | | in the | | | | | | | UPF and | | | | | | | use | | | | | | | s | | | | | | | ampRatio. | | +-----------+-----------+---+-----------+-----------+-----------+ | sampRatio | Samp | O | 0..1 | This IE | | | | lingRatio | | | may be | | | | | | | included | | | | | | | in an | | | | | | | event | | | | | | | sub | | | | | | | scription | | | | | | | request | | | | | | | for any | | | | | | | UE to | | | | | | | indicate | | | | | | | the ratio | | | | | | | of the | | | | | | | random | | | | | | | subset of | | | | | | | target | | | | | | | PDU | | | | | | | sessions. | | | | | | | Event | | | | | | | reports | | | | | | | only | | | | | | | relate to | | | | | | | the | | | | | | | subset. | | | | | | | | | | | | | | If the | | | | | | | UPF event | | | | | | | sub | | | | | | | scription | | | | | | | is for a | | | | | | | list of | | | | | | | UPF | | | | | | | event, | | | | | | | this | | | | | | | parameter | | | | | | | shall be | | | | | | | applied | | | | | | | to each | | | | | | | i | | | | | | | ndividual | | | | | | | event. | | +-----------+-----------+---+-----------+-----------+-----------+ | pa | array(Par | O | 1..N | This IE | | | rtitionin | titioning | | | may be | | | gCriteria | Criteria) | | | included | | | | | | | in an | | | | | | | event | | | | | | | sub | | | | | | | scription | | | | | | | request | | | | | | | for any | | | | | | | UE if the | | | | | | | sampRatio | | | | | | | IE is | | | | | | | provided. | | | | | | | | | | | | | | When | | | | | | | present, | | | | | | | this IE | | | | | | | shall | | | | | | | define | | | | | | | the | | | | | | | criteria | | | | | | | for | | | | | | | de | | | | | | | termining | | | | | | | the PDU | | | | | | | sessions | | | | | | | for which | | | | | | | the | | | | | | | sampling | | | | | | | ratio | | | | | | | shall | | | | | | | apply. | | | | | | | | | | | | | | (NOTE) | | +-----------+-----------+---+-----------+-----------+-----------+ | notifFlag | Notific | O | 0..1 | Indicates | | | | ationFlag | | | the | | | | | | | not | | | | | | | ification | | | | | | | flag, | | | | | | | which is | | | | | | | used to | | | | | | | mu | | | | | | | te/unmute | | | | | | | noti | | | | | | | fications | | | | | | | and to | | | | | | | retrieve | | | | | | | events | | | | | | | stored | | | | | | | during a | | | | | | | period of | | | | | | | muted | | | | | | | notif | | | | | | | ications. | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE: In | | | | | | | this | | | | | | | release | | | | | | | of | | | | | | | speci | | | | | | | fication, | | | | | | | the | | | | | | | pa | | | | | | | rtitionin | | | | | | | gCriteria | | | | | | | values | | | | | | | defined | | | | | | | in | | | | | | | 3GP | | | | | | | P TS 29.5 | | | | | | | 71 [16] | | | | | | | that | | | | | | | apply to | | | | | | | UPF Event | | | | | | | Exposure | | | | | | | are | | | | | | | SNSSAI | | | | | | | and DNN. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
##### 6.1.6.2.13 Type: UpfEvent
Table 6.2.6.2.13-1: Definition of type UpfEvent
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +===========+===========+===+===========+===========+===========+ | type | EventType | M | 1 | Describes | | | | | | | the UPF | | | | | | | event | | | | | | | type to | | | | | | | be | | | | | | | reported | | +-----------+-----------+---+-----------+-----------+-----------+ | imme | boolean | O | 0..1 | Indicates | | | diateFlag | | | | if an | | | | | | | immediate | | | | | | | event | | | | | | | report | | | | | | | c | | | | | | | ontaining | | | | | | | the | | | | | | | currently | | | | | | | available | | | | | | | value / | | | | | | | status of | | | | | | | the event | | | | | | | is | | | | | | | r | | | | | | | equested. | | | | | | | The | | | | | | | report | | | | | | | contains | | | | | | | the value | | | | | | | / status | | | | | | | of the | | | | | | | event | | | | | | | currently | | | | | | | available | | | | | | | at the | | | | | | | UPF at | | | | | | | the time | | | | | | | of the | | | | | | | subs | | | | | | | cription. | | | | | | | | | | | | | | The | | | | | | | default | | | | | | | value is | | | | | | | false. | | +-----------+-----------+---+-----------+-----------+-----------+ | measure | arra | C | 1..N | This IE | | | mentTypes | y(Measure | | | shall be | | | | mentType) | | | present | | | | | | | if the | | | | | | | type IE | | | | | | | is set to | | | | | | | \" | | | | | | | USE | | | | | | | R_DATA_ | | | | | | | USAGE_ME | | | | | | | ASURES\". | | | | | | | | | | | | | | When | | | | | | | present, | | | | | | | this IE | | | | | | | shall | | | | | | | indicate | | | | | | | the types | | | | | | | of | | | | | | | requested | | | | | | | meas | | | | | | | urements. | | +-----------+-----------+---+-----------+-----------+-----------+ | appIds | ar | O | 1..N | Contains | | | | ray(Appli | | | the | | | | cationId) | | | ap | | | | | | | plication | | | | | | | ide | | | | | | | ntifiers. | | | | | | | | | | | | | | (NOTE 1, | | | | | | | NOTE 2) | | +-----------+-----------+---+-----------+-----------+-----------+ | traff | arra | O | 1..N | I | | | icFilters | y(FlowInf | | | dentifies | | | | ormation) | | | IP or | | | | | | | Ethernet | | | | | | | packet | | | | | | | filters. | | | | | | | | | | | | | | (NOTE 1, | | | | | | | NOTE 2) | | +-----------+-----------+---+-----------+-----------+-----------+ | granul | Granul | O | 0..1 | Indicates | | | arityOfMe | arityOfMe | | | the | | | asurement | asurement | | | gr | | | | | | | anularity | | | | | | | of | | | | | | | mea | | | | | | | surement. | | | | | | | | | | | | | | (NOTE 2) | | +-----------+-----------+---+-----------+-----------+-----------+ | repor | Rep | C | 0..1 | The IE | | | tingSugge | ortingSug | | | should be | | | stionInfo | gestionIn | | | present | | | | formation | | | if the | | | | | | | event | | | | | | | not | | | | | | | ification | | | | | | | can be | | | | | | | delayed, | | | | | | | i.e. it | | | | | | | is delay | | | | | | | tolerant. | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE 1: | | | | | | | Either | | | | | | | the | | | | | | | appIds IE | | | | | | | or the | | | | | | | traff | | | | | | | icFilters | | | | | | | IE may be | | | | | | | present, | | | | | | | not both. | | | | | | | | | | | | | | NOTE 2: | | | | | | | If the | | | | | | | appIds or | | | | | | | traff | | | | | | | icFilters | | | | | | | is | | | | | | | provided, | | | | | | | the | | | | | | | granul | | | | | | | arityOfMe | | | | | | | asurement | | | | | | | shall not | | | | | | | be set to | | | | | | | \"PER_S | | | | | | | ESSION\". | | | | | | | If | | | | | | | neither | | | | | | | appIds | | | | | | | nor | | | | | | | traff | | | | | | | icFilters | | | | | | | is | | | | | | | provided, | | | | | | | the | | | | | | | granul | | | | | | | arityOfMe | | | | | | | asurement | | | | | | | may be | | | | | | | set to | | | | | | | \"PER_S | | | | | | | ESSION\", | | | | | | | \" | | | | | | | PER_APPL | | | | | | | ICATION\" | | | | | | | or | | | | | | | \"PE | | | | | | | R_FLOW\" | | | | | | | to | | | | | | | request | | | | | | | the UPF | | | | | | | to | | | | | | | provide | | | | | | | mea | | | | | | | surements | | | | | | | with the | | | | | | | corr | | | | | | | esponding | | | | | | | gra | | | | | | | nularity. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
##### 6.1.6.2.14 Type: CreateEventSubscription
Table 6.2.6.2.14-1: Definition of type CreateEventSubscription
Attribute name Data type P Cardinality Description
* * *
subscription UpfEventSubscription M 1 Represents the UPF Event Subscription
resource to be created. supportedFeatures SupportedFeatures C 0..1 This IE
shall be present if at least one optional feature defined in clause 6.1.8 is
supported.
##### 6.1.6.2.15 Type: CreatedEventSubscription
Table 6.1.6.2.15-1: Definition of type CreatedEventSubscription
Attribute name Data type P Cardinality Description
* * *
subscription UpfEventSubscription M 1 Represents the newly created UPF Event
Subscription resource. subscriptionId Uri M 1 Represents the URI of the newly
created UPF Event Subscription resource. This shall contain an absolute URI
set to the Resource URI specified in clause 6.1.3.3.2. (NOTE) reportList
array(NotificationItem) O 1..N Represents the immediate event reports (i.e.
the current value / status of the events subscribed), if available.
supportedFeatures SupportedFeatures C 0..1 This IE shall be present if at
least one optional feature defined in clause 6.1.8 is supported. NOTE: 3GPP TS
23.502 [3] specifies this attribute as \"Subscription Correlation ID\".
##### 6.1.6.2.16 Type: ReportingSuggestionInformation
Table 6.1.6.2.16-1: Definition of type ReportingSuggestionInformation
+---------------+-------------+---+-------------+---------------+ | Attribute | Data type | P | Cardinality | Description | | name | | | | | +===============+=============+===+=============+===============+ | rep | boolean | M | 1 | Indicates | | ortingUrgency | | | | whether the | | | | | | event report | | | | | | is delay | | | | | | tolerant, | | | | | | i.e. the | | | | | | event report | | | | | | can be | | | | | | delayed. | | | | | | | | | | | | When present, | | | | | | it shall be | | | | | | set as | | | | | | following: | | | | | | | | | | | | - true: the | | | | | | event report | | | | | | can be | | | | | | delayed. | | | | | | | | | | | | - false | | | | | | (default): | | | | | | the event | | | | | | report cannot | | | | | | be delayed. | +---------------+-------------+---+-------------+---------------+ | repo | DurationSec | C | 0..1 | This IE | | rtingTimeInfo | | | | should be | | | | | | present if | | | | | | the Reporting | | | | | | urgency | | | | | | information | | | | | | indicates it | | | | | | is delay | | | | | | tolerant. | | | | | | When present, | | | | | | this IE shall | | | | | | define the | | | | | | latest time | | | | | | for the UPF | | | | | | to report the | | | | | | detected | | | | | | event. | +---------------+-------------+---+-------------+---------------+
##### 6.1.6.2.17 Type: TscManagementInfo
Table 6.1.6.2.17-1: Definition of type TscManagementInfo
Attribute name Data type P Cardinality Description Applicability
* * *
pmics array(PortManagementContainer) O 1..N When present, this IE shall
contain a Port Management Information Container for one or more NW-TT ports.  
umic BridgeManagementContainer O 0..1 When present, this IE shall contain a
User Plane Node Management Information Container.
#### 6.1.6.3 Simple data types and enumerations
##### 6.1.6.3.1 Introduction
This clause defines simple data types and enumerations that can be referenced
from data structures defined in the previous clauses.
##### 6.1.6.3.2 Simple data types
No specific simple data types are defined in this release.
##### 6.1.6.3.3 Enumeration: EventType
The enumeration EventType represents the type of event to which the NF service
consumer may subscribe to and for which the notification is generated. It
shall comply with the provisions defined in table 6.1.5.3.3-1.
Table 6.1.6.3.3-1: Enumeration EventType
Enumeration value Description Applicability
* * *
\"QOS_MONITORING\" QoS Monitoring Measurement (see clause 5.2.1.3.2)  
\"USER_DATA_USAGE_MEASURES\" User Data Usage Measures (see clause 5.2.1.3.3)  
\"USER_DATA_USAGE_TRENDS\" User Data Usage Trends (see clause 5.2.1.3.4)  
\"TSC_MNGT_INFO\" TSC Management Information
##### 6.1.6.3.4 Enumeration: UpfEventTrigger
Table 6.1.6.3.4-1: Enumeration UpfEventTrigger
Enumeration value Description
* * *
\"ONE_TIME\" Defines that UPF should generate report for the event only once.
After reporting, the subscription to this event is terminated. \"PERIODIC\"
Defines that UPF should periodically generate reports for the event, until the
subscription to this event ends, due to end of report duration or up to the
maximum number of reports or the event being unsubscribed explicitly.
##### 6.1.6.3.5 Enumeration: MeasurementType
Table 6.1.6.3.5-1: Enumeration MeasurementType
+----------------------------------+----------------------------------+ | Enumeration value | Description | +==================================+==================================+ | \"VOLUME_MEASUREMENT\" | Measures of data volume | | | exchanged (UL, DL and/or overall | | | and/or number of packets | | | exchanged (UL, DL and/or | | | overall). | | | | | | (NOTE) | +----------------------------------+----------------------------------+ | \"THROUGHPUT_MEASUREMENT\" | Measures of data throughput (UL | | | and DL). | | | | | | (NOTE) | +----------------------------------+----------------------------------+ | \"APPLICATION_RELATED_INFO\" | URL/s and/or Domain name/s | | | detected in the traffic | | | identified by the information | | | included in the subscription | | | request, e.g. an application id. | | | | | | (NOTE) | +----------------------------------+----------------------------------+ | NOTE: This value may be used for | | | the | | | \"USER_DATA_USAGE_MEASURES\" | | | event type. | | +----------------------------------+----------------------------------+
##### 6.1.6.3.6 Enumeration: GranularityOfMeasurement
Table 6.1.6.3.6-1: Enumeration GranularityOfMeasurement
Enumeration value Description
* * *
\"PER_APPLICATION\" Indicates that the granularity of the requested
measurements is per application. \"PER_SESSION\" Indicates that the
granularity of the requested measurements is per PDU Session. \"PER_FLOW\"
Indicates that granularity of the requested measurements is per data flow.
##### 6.1.6.3.7 Enumeration: DnProtocol
Table 6.1.6.3.7-1: Enumeration DnProtocol
Enumeration value Description
* * *
\"DNS_QNAME\" Identifies the DNS protocol and the question name in DNS query.
\"TLS_SNI\" Identifies the Server Name Indication in TLS ClientHello message.
\"TLS_SAN\" Identifies the Subject Alternative Name in TLS ServerCertificate
message. \"TLS_SCN\" Identifies the Subject Common Name in TLS
ServerCertificate message.
### 6.1.7 Error Handling
#### 6.1.7.1 General
For the Nupf_EventExposure API, HTTP error responses shall be supported as
specified in clause 4.8 of 3GPP TS 29.501 [5]. Protocol errors and application
errors specified in table 5.2.7.2-1 of 3GPP TS 29.500 [4] shall be supported
for an HTTP method if the corresponding HTTP status codes are specified as
mandatory for that HTTP method in table 5.2.7.1-1 of 3GPP TS 29.500 [4].
In addition, the requirements in the following clauses are applicable for the
Nupf_EventExposure API.
#### 6.1.7.2 Protocol Errors
No specific procedures for the Nupf_EventExposure service are specified in
this release.
#### 6.1.7.3 Application Errors
The common application errors defined in the Table 5.2.7.2-1 in 3GPP TS 29.500
[4] may also be used for the Nupf_EventExposure service, and the following
application errors listed in Table 6.1.7.3-1 are specific for the
Nupf_EventExposure service.
Table 6.2.7.3-1: Application errors
Application Error HTTP status code Description
* * *
PDU_SESSION_NOT_SERVED_BY_UPF 403 Forbidden Indicates the creation of a
subscription towards a PDU session has failed due to an application error when
the PDU session is not served by the UPF. SUBSCRIPTION_NOT_FOUND 404 Not Found
Indicates the deletion of subscription has failed due to an application error
when the subscription is not found in the UPF.
### 6.1.8 Feature negotiation
The optional features listed in table 6.2.8-1 are defined for the
Nupf_EventExposure API. They shall be negotiated using the extensibility
mechanism defined in clause 6.6 of 3GPP TS 29.500 [4].
Table 6.1.8-1: Supported Features
Feature number Feature Name Description
* * *
### 6.1.9 Security
As indicated in 3GPP TS 33.501 [8], the access to the Nupf_EventExposure API
may be authorized by means of the OAuth2 protocol (see IETF RFC 6749 [9]),
using the \"Client Credentials\" authorization grant, where the NRF (see 3GPP
TS 29.510 [10]) plays the role of the authorization server.
If Oauth2 authorization is used, an NF Service Consumer, prior to consuming
services offered by the Nupf_EventExposure API, shall obtain a \"token\" from
the authorization server, by invoking the Access Token Request service, as
described in 3GPP TS 29.510 [10], clause 5.4.2.2.
NOTE: When multiple NRFs are deployed in a network, the NRF used as
authorization server is the same NRF that the NF Service Consumer used for
discovering the Nupf_EventExposure service.
The Nupf_EventExposure API defines scopes for OAuth2 authorization as
specified in 3GPP TS 33.501 [8]; it defines a single scope consisting on the
name of the service (i.e., \"nupf-ee\"), and it does not define any additional
scopes at resource or operation level.
### 6.1.10 HTTP redirection
An HTTP request may be redirected to a different UPF service instance when
using direct or indirect communications (see 3GPP TS 29.500 [4]).
An SCP that reselects a different UPF producer instance will return the NF
Instance ID of the new UPF producer instance in the 3gpp-Sbi-Producer-Id
header, as specified in clause 6.10.3.4 of 3GPP TS 29.500 [4].
If an UPF redirects a service request to a different UPF using an 307
Temporary Redirect or 308 Permanent Redirect status code, the identity of the
new UPF towards which the service request is redirected shall be indicated in
the 3gpp-Sbi-Target-Nf-Id header of the 307 Temporary Redirect or 308
Permanent Redirect response as specified in clause 6.10.9.1 of 3GPP TS 29.500
[4].
## 6.2 Nupf_GetPrivateUEIPaddr Service API
### 6.2.1 Introduction
The Nupf_GetPrivateUEIPaddr service shall use the Nupf_GetPrivateUEIPaddr API.
The API URI of the Nupf_GetPrivateUEIPaddr Service API shall be:
**{apiRoot}/\ /\**
The request URI used in HTTP requests from the NF service consumer towards the
NF service producer shall have the Resource URI structure defined in clause
4.4.1 of 3GPP TS 29.501 [5], i.e.:
**{apiRoot}/\ /\/\**
with the following components:
\- The {apiRoot} shall be set as described in 3GPP TS 29.501 [5].
\- The \ shall be \"nupf_gueip\".
\- The \ shall be \"v1\".
\- The \ shall be set as described in clause 5.3.
### 6.2.2 Usage of HTTP
#### 6.2.2.1 General
HTTP/2, IETF RFC 7540 [11], shall be used as specified in clause 5 of 3GPP TS
29.500 [4].
HTTP/2 shall be transported as specified in clause 5.3 of 3GPP TS 29.500 [4].
The OpenAPI [6] specification of HTTP messages and content bodies for the
Nupf_GetPrivateUEIPaddr API is contained in Annex A.
#### 6.2.2.2 HTTP standard headers
##### 6.2.2.2.1 General
See clause 5.2.2 of 3GPP TS 29.500 [4] for the usage of HTTP standard headers.
##### 6.2.2.2.2 Content type
JSON, IETF RFC 8259 [12], shall be used as content type of the HTTP bodies
specified in the present specification as specified in clause 5.4 of 3GPP TS
29.500 [4]. The use of the JSON format shall be signalled by the content type
\"application/json\".
\"Problem Details\" JSON object shall be used to indicate additional details
of the error in a HTTP response body and shall be signalled by the content
type \"application/problem+json\", as defined in IETF RFC 7807 [13].
#### 6.2.2.3 HTTP custom headers
The mandatory HTTP custom header fields specified in clause 5.2.3.2 of 3GPP TS
29.500 [4] shall be supported, and the optional HTTP custom header fields
specified in clause 5.2.3.3 of 3GPP TS 29.500 [4] may be supported.
### 6.2.3 Resources
#### 6.2.3.1 Overview
Figure 6.2.3.1-1: Resource URI structure of the Nupf_GetPrivateUEIPaddr API
Table 6.2.3.1-1 provides an overview of the resources and applicable HTTP
methods.
Table 6.2.3.1-1: Resources and methods overview
Resource name Resource URI HTTP method or custom operation Description
* * *
UE IP Address Info /ue-ip-info GET Nupf_GetPrivateUEIPaddr_Get
#### 6.2.3.2 Resource: UE IP Address Info
##### 6.2.3.2.1 Description
This resource represents the UE IP Address Info of all the PDU sessions served
by the UPF.
This resource is modelled with the Document archetype (see clause C.2 of 3GPP
TS 29.501 [5]).
##### 6.2.3.2.2 Resource Definition
Resource URI: **{apiRoot}/nupf_gueip/\ /ue-ip-info**
This resource shall support the resource URI variables defined in table
6.2.3.2.2-1.
Table 6.2.3.2.2-1: Resource URI variables for this resource
Name Definition
* * *
apiRoot See clause 6.2.1 apiVersion See clause 6.2.1
##### 6.2.3.2.3 Resource Standard Methods
##### 6.2.3.2.3.1 GET {#get-1 .H6}
This operation retrieves the UE IP Info of a PDU session, which contains the
UE\'s PDU Session (private) IP address, by querying the UPF with the NATed
UE\'s public IP address and an optional Port number.
This method shall support the URI query parameters specified in table
6.2.3.2.3.1-1.
Table 6.2.3.2.3.1-1: URI query parameters supported by the GET method on this
resource
* * *
Name Data type P Cardinality Description Applicability ue-ipv4-address
Ipv4Addr O 0..1 UE\'s IPv4 address  
ue-ipv6-prefix Ipv6Prefix O 0..1 UE\'s IPv6 Prefix  
port-number integer O 0..1 UDP or TCP Port  
dnn Dnn O 0..1 DNN of the PDU session  
snssai Snssai O 0..1 S-NSSAI of the PDU session
* * *
This method shall support the request data structures specified in table
6.2.3.2.3.1-2 and the response data structures and response codes specified in
table 6.2.3.2.3.1-3.
Table 6.2.3.2.3.1-2: Data structures supported by the GET Request Body on this
resource
* * *
Data type P Cardinality Description n/a
* * *
Table 6.2.3.2.3.1-3: Data structures supported by the GET Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | UeIpInfo | M | 1 | 200 OK | The response | | | | | | body contains | | | | | | a UeIpInfo | | | | | | for a PDU | | | | | | session which | | | | | | contains | | | | | | attributes | | | | | | that are | | | | | | matching the | | | | | | qu | | | | | | eryparameter. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 404 Not Found | The \"cause\" | | roblemDetails | | | | attribute may | | | | | | be used to | | | | | | indicate the | | | | | | following | | | | | | application | | | | | | error: | | | | | | | | | | | | > \- | | | | | | > | | | | | | NO_MATCHING | | | | | | > UE | | | | | | _IP_ADDRESS | | | | | | | | | | | | See table | | | | | | 6.2.7.3-1 for | | | | | | the | | | | | | description | | | | | | of this | | | | | | error. | +---------------+---+-------------+---------------+---------------+ | NOTE 1: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status code | | | | | | for the GET | | | | | | method listed | | | | | | in Table | | | | | | 5.2.7.1-1 of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | also apply, | | | | | | with response | | | | | | body | | | | | | containing an | | | | | | object of | | | | | | P | | | | | | roblemDetails | | | | | | data type | | | | | | (see clause | | | | | | 5.2.7 of | | | | | | 3GPP TS 2 | | | | | | 9.500 [4]). | | | | | | | | | | | | NOTE 2: | | | | | | Red | | | | | | irectResponse | | | | | | may be | | | | | | inserted by | | | | | | an SCP, see | | | | | | cl | | | | | | ause 6.10.9.1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4]. | | | | | +---------------+---+-------------+---------------+---------------+
Table 6.2.3.2.3.1-4: Headers supported by the 307 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located on an alternative service instance. For the case,
when a request is redirected to the same target resource via a different SCP,
see clause 6.10.9.1 in 3GPP TS 29.500 [4]. 3gpp-Sbi-Target-Nf-Id string O 0..1
Identifier of the target NF (service) instance ID towards which the request is
redirected, see clause 6.10.9.1 in 3GPP TS 29.500 [4].
* * *
Table 6.2.3.2.3.1-5: Headers supported by the 308 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located on an alternative service instance. For the case,
when a request is redirected to the same target resource via a different SCP,
see clause 6.10.9.1 in 3GPP TS 29.500 [4]. 3gpp-Sbi-Target-Nf-Id string O 0..1
Identifier of the target NF (service) instance ID towards which the request is
redirected.
* * *
##### 6.2.3.2.4 Resource Custom Operations
None.
### 6.2.4 Custom Operations without associated resources
None
### 6.2.5 Notifications
#### 6.2.5.1 General
None.
### 6.2.6 Data Model
#### 6.2.6.1 General
This clause specifies the application data model supported by the API.
Table 6.2.6.1-1 specifies the data types defined for the
Nupf_GetPrivateUEIPaddr service based interface protocol.
Table 6.2.6.1-1: Nupf_GetPrivateUEIPaddr specific Data Types
Data type Clause defined Description Applicability
* * *
UeIpInfo 6.1.6.2.2 A UeIpInfo for a PDU session
Table 6.2.6.1-2 specifies data types re-used by the Nupf_GetPrivateUEIPaddr
service based interface protocol from other specifications, including a
reference to their respective specifications and when needed, a short
description of their use within the N~\~ service based interface.
Table 6.2.6.1-2: Nupf_GetPrivateUEIPaddr re-used Data Types
Data type Reference Comments Applicability
* * *
Dnn 3GPP TS 29.571 [16] DNN  
Snssai 3GPP TS 29.571 [16] S-NSSAI  
Ipv4Addr 3GPP TS 29.571 [16] IPv4 address  
Ipv6Prefix 3GPP TS 29.571 [16] IPv6 address prefix  
Supi 3GPP TS 29.571 [16] SUPI
#### 6.2.6.2 Structured data types
##### 6.2.6.2.1 Introduction
This clause defines the structures to be used in resource representations.
##### 6.2.6.2.2 Type: UeIpInfo
Table 6.2.6.2.2-1: Definition of type UeIpInfo
Attribute name Data type P Cardinality Description
* * *
privateIpv4Address Ipv4Address O 0..1 When present, this IE shall contain the
Private IPv4 IP address. ipDomain string O 0..1 When present, this IE contains
the IP domain of the private IPv address. privateIpv6Prefix Ipv6Prefix O 0..1
When present, this IE shall contain the Private IPv6 Prefix. publicIpv4Address
Ipv4Address O 0..1 When present, this IE shall contain the public (NATed) IPv4
IP address. publicIpv6Prefix Ipv6Prefix O 0..1 When present, this IE shall
contain the public (NATed) IPv6 Prefix. portNumber Uint16 O 0..1 When present,
this IE shall contain the port number for the source UDP or TCP port when Port
Address Translation is used. Dnn Dnn O 0..1 When present, this IE shall
contain the DNN of the PDU Session. snssai Snssai O 0..1 When present, this IE
shall contain the S-NSSAI of the PDU Session. supi Supi O 0..1 When present,
this IE shall contain the SUPI of the UE.
#### 6.2.6.3 Simple data types and enumerations
##### 6.2.6.3.1 Introduction
This clause defines simple data types and enumerations that can be referenced
from data structures defined in the previous clauses.
### 6.2.7 Error Handling
#### 6.2.7.1 General
For the Nupf_GetPrivateUEIPaddr API, HTTP error responses shall be supported
as specified in clause 4.8 of 3GPP TS 29.501 [5]. Protocol errors and
application errors specified in table 5.2.7.2-1 of 3GPP TS 29.500 [4] shall be
supported for an HTTP method if the corresponding HTTP status codes are
specified as mandatory for that HTTP method in table 5.2.7.1-1 of 3GPP TS
29.500 [4].
In addition, the requirements in the following clauses are applicable for the
Nupf_GetPrivateUEIPaddr API.
#### 6.2.7.2 Protocol Errors
No specific procedures for the Nupf_GetPrivateUEIPaddr service are specified.
#### 6.2.7.3 Application Errors
The application errors defined for the Nupf_GetPrivateUEIPaddr service are
listed in Table 6.2.7.3-1.
Table 6.2.7.3-1: Application errors
Application Error HTTP status code Description
* * *
NO_UE_IP_INFO_FOUND 404 There is no UE IP address matching the query
parameters.
### 6.2.8 Feature negotiation
The optional features in table 6.2.8-1 are defined for the
Nupf_GetPrivateUEIPaddr API. They shall be negotiated using the extensibility
mechanism defined in clause 6.6 of 3GPP TS 29.500 [4].
Table 6.2.8-1: Supported Features
Feature number Feature Name Description
* * *
### 6.2.9 Security
As indicated in 3GPP TS 33.501 [8] and 3GPP TS 29.500 [4], the access to the
Nupf_GetPrivateUEIPaddr API may be authorized by means of the OAuth2 protocol
(see IETF RFC 6749 [9]), based on local configuration, using the \"Client
Credentials\" authorization grant, where the NRF (see 3GPP TS 29.510 [10])
plays the role of the authorization server.
If OAuth2 is used, an NF Service Consumer, prior to consuming services offered
by the Nupf_GetPrivateUEIPaddr API, shall obtain a \"token\" from the
authorization server, by invoking the Access Token Request service, as
described in 3GPP TS 29.510 [10], clause 5.4.2.2.
NOTE: When multiple NRFs are deployed in a network, the NRF used as
authorization server is the same NRF that the NF Service Consumer used for
discovering the Nupf_GetPrivateUEIPaddr service.
The Nupf_GetPrivateUEIPaddr API defines a single scope \"nupf_gueip\" for the
entire service, and it does not define any additional scopes at resource or
operation level.
### 6.2.10 HTTP redirection
An HTTP request may be redirected to a different UPF service instance when
using direct or indirect communications (see 3GPP TS 29.500 [4]).
An SCP that reselects a different UPF producer instance will return the NF
Instance ID of the new UPF producer instance in the 3gpp-Sbi-Producer-Id
header, as specified in clause 6.10.3.4 of 3GPP TS 29.500 [4].
If an UPF redirects a service request to a different UPF using an 307
Temporary Redirect or 308 Permanent Redirect status code, the identity of the
new UPF towards which the service request is redirected shall be indicated in
the 3gpp-Sbi-Target-Nf-Id header of the 307 Temporary Redirect or 308
Permanent Redirect response as specified in clause 6.10.9.1 of 3GPP TS 29.500
[4].
###### ## Annex A (normative): OpenAPI specification
# A.1 General
This Annex specifies the formal definition of the API(s) defined in the
present specification. It consists of OpenAPI specifications in YAML format.
This Annex takes precedence when being discrepant to other parts of the
specification with respect to the encoding of information elements and methods
within the API(s).
NOTE 1: The semantics and procedures, as well as conditions, e.g. for the
applicability and allowed combinations of attributes or values, not expressed
in the OpenAPI definitions but defined in other parts of the specification
also apply.
Informative copies of the OpenAPI specification files contained in this 3GPP
Technical Specification are available on a Git-based repository that uses the
GitLab software version control system (see 3GPP TS 29.501 [5] clause 5.3.1
and 3GPP TR 21.900 [7] clause 5B).
# A.2 Nupf_EventExposure API
openapi: 3.0.0
info:
title: \'UPF Event Exposure Service\'
version: 1.1.0-alpha.3
description: \|
UPF Event Exposure Service.
Â© 2023, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI, TTA,
TTC).
All rights reserved.
externalDocs:
description: 3GPP TS 29.564 V18.2.0; 5G System; User Plane Function Services;
Stage 3.
url: https://www.3gpp.org/ftp/Specs/archive/29_series/29.564/
servers:
\- url: \'{apiRoot}/nupf-ee/v1\'
variables:
apiRoot:
default: https://example.com
description: apiRoot as defined in clause 4.4 of 3GPP TS 29.501
security:
\- {}
\- oAuth2ClientCredentials:
\- nupf-ee
paths:
/ee-subscriptions:
post:
summary: Nupf_EventExposure Subscribe service Operation
operationId: CreateSubscription
tags:
\- Subscriptions (Collection)
requestBody:
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/CreateEventSubscription\'
responses:
\'201\':
description: Successful creation of an UPF Event Subscription
headers:
Location:
description: \'Contains the URI of the newly created resource, according to
the structure: {apiRoot}/nupf-ee/\/ee-
subscriptions/{subscriptionId}\'
required: true
schema:
type: string
content:
application/json:
schema:
\$ref: \'#/components/schemas/CreatedEventSubscription\'
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'502\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/502\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
callbacks:
eeNotification:
\'{eventNotificationUri}\':
# The URI in {eventNotificationUri} is provided via N4 interface during
provisioning of Session Reporting Rule or in the Nupf_EventExposure Subscribe
request.
post:
requestBody:
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/NotificationData\'
responses:
\'204\':
description: No Content, Notification was succesfull
\'307\':
description: Temporary Redirect
content:
application/json:
schema:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/RedirectResponse\'
headers:
Location:
description: \'The URI pointing to the resource located on the redirect target
NF service consumer\'
required: true
schema:
type: string
\'308\':
description: Permanent Redirect
content:
application/json:
schema:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/RedirectResponse\'
headers:
Location:
description: \'The URI pointing to the resource located on the redirect target
NF service consumer\'
required: true
schema:
type: string
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'502\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/502\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
/ee-subscriptions/{subscriptionId}:
patch:
summary: Nupf_EventExposure Subscribe Modify service Operation
operationId: ModifySubscription
parameters:
\- name: subscriptionId
in: path
required: true
description: Unique ID of the subscription to be modified
schema:
type: string
requestBody:
content:
application/json-patch+json:
schema:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PatchItem\'
minItems: 1
required: true
responses:
\'200\':
description: Expected response to a valid request
content:
application/json:
schema:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PatchResult\'
\'204\':
description: Successful response
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'502\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/502\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
delete:
summary: Nupf_EventExposure UnSubscribe service Operation
operationId: DeleteSubscription
parameters:
\- name: subscriptionId
in: path
required: true
description: Unique ID of the subscription to be deleted
schema:
type: string
responses:
\'204\':
description: Subsription deleted successfully
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'502\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/502\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
components:
securitySchemes:
oAuth2ClientCredentials:
type: oauth2
flows:
clientCredentials:
tokenUrl: \'{nrfApiRoot}/oauth2/token\'
scopes:
nupf-ee: Access to the Nupf_EventExposure API
schemas:
# API specific definitions
# STRUCTURED DATA TYPES
NotificationData:
description: the list of NotificationItems
type: object
required:
\- notificationItems
properties:
notificationItems:
type: array
items:
\$ref: \'#/components/schemas/NotificationItem\'
minItems: 1
correlationId:
type: string
NotificationItem:
description: represents a report on one subscribed event
type: object
required:
\- eventType
\- timeStamp
anyOf:
\- required: [ ueIpv4Addr ]
\- required: [ ueIpv6Prefix ]
\- required: [ ueMacAddr ]
properties:
eventType:
\$ref: \'#/components/schemas/EventType\'
ueIpv4Addr:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv4Addr\'
ueIpv6Prefix:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv6Prefix\'
ueMacAddr:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/MacAddr48\'
dnn:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Dnn\'
snssai:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Snssai\'
gpsi:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Gpsi\'
supi:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Supi\'
timeStamp:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DateTime\'
startTime:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DateTime\'
qosMonitoringMeasurement:
\$ref: \'#/components/schemas/QosMonitoringMeasurement\'
tscMngtInfo:
\$ref: \'#/components/schemas/TscManagementInfo\'
userDataUsageMeasurements:
type: array
items:
\$ref: \'#/components/schemas/UserDataUsageMeasurements\'
minItems: 1
UpfEventSubscription:
description: UPF Event Subscription
type: object
properties:
eventList:
type: array
items:
\$ref: \'#/components/schemas/UpfEvent\'
minItems: 1
eventNotifyUri:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uri\'
notifyCorrelationId:
type: string
eventReportingMode:
\$ref: \'#/components/schemas/UpfEventMode\'
nfId:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/NfInstanceId\'
ueIpAddress:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/IpAddr\'
supi:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Supi\'
gpsi:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Gpsi\'
pei:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Pei\'
anyUe:
type: boolean
default: false
dnn:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Dnn\'
snssai:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Snssai\'
required:
\- eventList
\- eventNotifyUri
\- notifyCorrelationId
\- eventReportingMode
\- nfId
UpfEventMode:
description: UPF Event Mode
type: object
properties:
trigger:
\$ref: \'#/components/schemas/UpfEventTrigger\'
maxReports:
type: integer
expiry:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DateTime\'
repPeriod:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DurationSec\'
sampRatio:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SamplingRatio\'
partitioningCriteria:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PartitioningCriteria\'
minItems: 1
notifFlag:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/NotificationFlag\'
required:
\- trigger
UpfEvent:
description: UPF Event
type: object
properties:
type:
\$ref: \'#/components/schemas/EventType\'
immediateFlag:
type: boolean
default: false
measurementTypes:
type: array
items:
\$ref: \'#/components/schemas/MeasurementType\'
minItems: 1
appIds:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/ApplicationId\'
minItems: 1
trafficFilters:
type: array
items:
\$ref:
\'TS29512_Npcf_SMPolicyControl.yaml#/components/schemas/FlowInformation\'
minItems: 1
granularityOfMeasurement:
\$ref: \'#/components/schemas/GranularityOfMeasurement\'
reportingSuggestionInfo:
\$ref: \'#/components/schemas/ReportingSuggestionInformation\'
required:
\- type
CreateEventSubscription:
description: Data within UPF Create Event Subscription Request
type: object
properties:
subscription:
\$ref: \'#/components/schemas/UpfEventSubscription\'
supportedFeatures:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures\'
required:
\- subscription
CreatedEventSubscription:
description: Data within UPF Create Event Subscription Response
type: object
properties:
subscription:
\$ref: \'#/components/schemas/UpfEventSubscription\'
subscriptionId:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uri\'
reportList:
type: array
items:
\$ref: \'#/components/schemas/NotificationItem\'
minItems: 1
supportedFeatures:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures\'
required:
\- subscription
\- subscriptionId
ReportingSuggestionInformation:
description: Reporting Suggestion Information
type: object
properties:
reportingUrgency:
type: boolean
reportingTimeInfo:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DurationSec\'
required:
\- reportingUrgency
QosMonitoringMeasurement:
description: QoS Monitoring Measurement information
type: object
properties:
flowInfos:
type: array
items:
\$ref:
\'TS29512_Npcf_SMPolicyControl.yaml#/components/schemas/FlowInformation\'
minItems: 1
appIds:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/ApplicationId\'
minItems: 1
dlPacketDelay:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uint32\'
ulPacketDelay:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uint32\'
rtrPacketDelay:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uint32\'
measureFailure:
type: boolean
enum:
\- true
dlMinThroughput:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/BitRate\'
dlMaxThroughput:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/BitRate\'
dlAveThroughput:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/BitRate\'
ulMinThroughput:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/BitRate\'
ulMaxThroughput:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/BitRate\'
ulAveThroughput:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/BitRate\'
dlCongestion:
type: string
ulCongestion:
type: string
# Editor\'s note: whether and how to report the minimum, maximum and average
DL and/or UL throughput
# over the measurement period is FFS.
# Editor\'s note: the encoding of the dlCongestion and ulCongestion IEs is FFS
TscManagementInfo:
description: TSC Management Information
type: object
properties:
pmics:
type: array
items:
\$ref:
\'TS29512_Npcf_SMPolicyControl.yaml#/components/schemas/PortManagementContainer\'
minItems: 1
umic:
\$ref:
\'TS29512_Npcf_SMPolicyControl.yaml#/components/schemas/BridgeManagementContainer\'
UserDataUsageMeasurements:
description: >
User Data Usage Measurements either for the PDU session, or the app-id, or the
data flow
type: object
properties:
appId:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/ApplicationId\'
flowInfo:
\$ref:
\'TS29512_Npcf_SMPolicyControl.yaml#/components/schemas/FlowInformation\'
volumeMeasurement:
\$ref: \'#/components/schemas/VolumeMeasurement\'
throughputMeasurement:
\$ref: \'#/components/schemas/ThroughputMeasurement\'
applicationRelatedInformation:
\$ref: \'#/components/schemas/ApplicationRelatedInformation\'
throughputStatisticsMeasurement:
\$ref: \'#/components/schemas/ThroughputStatisticsMeasurement\'
VolumeMeasurement:
description: Volume Measurement information
type: object
properties:
totalVolume:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/TrafficVolume\'
ulVolume:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/TrafficVolume\'
dlVolume:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/TrafficVolume\'
totalNbOfPackets:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uint64\'
ulNbOfPackets:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uint64\'
dlNbOfPackets:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uint64\'
ThroughputMeasurement:
description: Throughput Measurement information
type: object
properties:
ulThroughput:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/BitRate\'
dlThroughput:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/BitRate\'
ulPacketThroughput:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PacketRate\'
dlPacketThroughput:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PacketRate\'
ApplicationRelatedInformation:
description: Application Related Information
type: object
properties:
urls:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uri\'
minItems: 1
domainInfoList:
type: array
items:
\$ref: \'#/components/schemas/DomainInformation\'
minItems: 1
ThroughputStatisticsMeasurement:
description: Throughput Statistics Measurement
type: object
properties:
ulAverageThroughput:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/BitRate\'
dlAverageThroughput:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/BitRate\'
ulPeakThroughput:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/BitRate\'
dlPeakThroughPut:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/BitRate\'
ulAveragePacketThroughput:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PacketRate\'
dlAveragePacketThroughput:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PacketRate\'
ulPeakPacketThroughput:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PacketRate\'
dlPeakPacketThroughput:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PacketRate\'
DomainInformation:
description: Domain Information
type: object
properties:
domainName:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Fqdn\'
domainNameProtocol:
\$ref: \'#/components/schemas/DnProtocol\'
required:
\- domainName
# ENUMS
EventType:
description: Event Type
anyOf:
\- type: string
enum:
\- QOS_MONITORING
\- USER_DATA_USAGE_MEASURES
\- USER_DATA_USAGE_TRENDS
\- TSC_MNGT_INFO
\- type: string
UpfEventTrigger:
description: Upf Event Trigger
anyOf:
\- type: string
enum:
\- ONE_TIME
\- PERIODIC
\- type: string
MeasurementType:
description: Measurement Type
anyOf:
\- type: string
enum:
\- VOLUME_MEASUREMENT
\- THROUGHPUT_MEASUREMENT
\- APPLICATION_RELATED_INFO
\- type: string
GranularityOfMeasurement:
description: Granularity Of Measurement
anyOf:
\- type: string
enum:
\- PER_APPLICATION
\- PER_SESSION
\- PER_FLOW
\- type: string
DnProtocol:
description: Domain Name Protocol
anyOf:
\- type: string
enum:
\- DNS_QNAME
\- TLS_SNI
\- TLS_SAN
\- TLS_SCN
\- type: string
# SIMPLE TYPES
# A.3 Nupf_GetPrivateUEIPaddr API
openapi: 3.0.0
info:
version: \'1.0.0-alpha.2\'
title: \'UPF GET Private UE IP address Service\'
description: \|
Nupf_GetPrivateUEIPaddr Service.
Â© 2023, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI, TTA,
TTC).
All rights reserved.
externalDocs:
description: 3GPP TS 29.564 V18.1.0; 5G System; 5G System; User Plane Function
Services; Stage 3
url: \'https://www.3gpp.org/ftp/Specs/archive/29_series/29.564/\'
servers:
\- url: \'{apiRoot}/nupf-gueip/v1\'
variables:
apiRoot:
default: https://example.com
description: apiRoot as defined in clause 4.4 of 3GPP TS 29.501
security:
\- {}
\- oAuth2ClientCredentials:
\- nupf-gueip
paths:
/ue-ip-info:
get:
summary: Search UeIpInfo for a PDU session from the UeIpInfo
operationId: SearchUeIpInfo
tags:
\- UE IP Info_Get
parameters:
\- name: snssai
in: query
description: Slice of the PDU session
schema:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Snssai\'
\- name: dnn
in: query
description: Dnn of the PDU session
schema:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Dnn\'
\- name: ue-ipv4-address
in: query
description: IPv4 address of the UE
schema:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv4Addr\'
\- name: ue-ipv6-prefix
in: query
description: IPv6 prefix of the UE
schema:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv6Prefix\'
\- name: port-number
in: query
description: UDP or TCP port associated with the public address
schema:
type: integer
minimum: 0
maximum: 65535
responses:
\'200\':
description: Successful response
content:
application/json:
schema:
\$ref: \'#/components/schemas/UeIpInfo\'
\'307\':
description: Temporary Redirect
content:
application/json:
schema:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/RedirectResponse\'
headers:
Location:
description: The URI pointing to the resource located on the redirect target
UPF
schema:
type: string
\'308\':
description: Permanent Redirect
content:
application/json:
schema:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/RedirectResponse\'
headers:
Location:
description: The URI pointing to the resource located on the redirect target
UPF
schema:
type: string
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'406\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/406\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'501\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/501\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
components:
securitySchemes:
oAuth2ClientCredentials:
type: oauth2
flows:
clientCredentials:
tokenUrl: \'{nrfApiRoot}/oauth2/token\'
scopes:
nupf-gueip: Access to the Nupf_GetPrivateUEIPaddr API
schemas:
UeIpInfo:
description: a UE IP Address Info for a PDU session
type: object
properties:
privateIpv4Address:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv4Addr\'
ipDomain:
type: string
privateIpv6Prefix:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv6Prefix\'
publicIpv4Address:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv4Addr\'
publicIpv6Prefix:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv6Prefix\'
portNumber:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uint16\'
dnn:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Dnn\'
snssai:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Snssai\'
supi:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Supi\'
#