# Foreword {#foreword-1}
This Technical Report has been produced by the 3rd Generation Partnership
Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
In the present document, modal verbs have the following meanings:
**shall** indicates a mandatory requirement to do something
**shall not** indicates an interdiction (prohibition) to do something
The constructions \"shall\" and \"shall not\" are confined to the context of
normative provisions, and do not appear in Technical Reports.
The constructions \"must\" and \"must not\" are not used as substitutes for
\"shall\" and \"shall not\". Their use is avoided insofar as possible, and
they are not used in a normative context except in a direct citation from an
external, referenced, non-3GPP document, or so as to maintain continuity of
style when extending or modifying the provisions of such a referenced
document.
**should** indicates a recommendation to do something
**should not** indicates a recommendation not to do something
**may** indicates permission to do something
**need not** indicates permission not to do something
The construction \"may not\" is ambiguous and is not used in normative
elements. The unambiguous constructions \"might not\" or \"shall not\" are
used instead, depending upon the meaning intended.
**can** indicates that something is possible
**cannot** indicates that something is impossible
The constructions \"can\" and \"cannot\" are not substitutes for \"may\" and
\"need not\".
**will** indicates that something is certain or expected to happen as a result
of action taken by an agency the behaviour of which is outside the scope of
the present document
**will not** indicates that something is certain or expected not to happen as
a result of action taken by an agency the behaviour of which is outside the
scope of the present document
**might** indicates a likelihood that something will happen as a result of
action taken by some agency the behaviour of which is outside the scope of the
present document
**might not** indicates a likelihood that something will not happen as a
result of action taken by some agency the behaviour of which is outside the
scope of the present document
In addition:
**is** (or any other verb in the indicative mood) indicates a statement of
fact
**is not** (or any other negative verb in the indicative mood) indicates a
statement of fact
The constructions \"is\" and \"is not\" do not indicate requirements.
# 1 Scope
The scope of this Technical Report is to study further enhancements of the 5GS
to support Non-Public Networks including the following aspects:
1\. Support for enhanced mobility by enabling support for idle and connected
mode mobility between SNPNs without new network selection.
2\. Support for non-3GPP access for SNPN.
3\. Address SA WG1 requirements in TS 22.261 [2] related to support for
Providing Access to Localized Services.
NOTE: The TS 22.261 [2] requirements for Providing Access to Local Services
related to Multicast/Broadcast are not part of the scope.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or non‑specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 22.261: \"Service requirements for next generation new services
and markets\".
[3] 3GPP TS 23.501: \"System Architecture for the 5G System; Stage 2\".
[4] 3GPP TS 23.502: \"Procedures for the 5G System; Stage 2\".
[5] 3GPP TS 23.503: \"Policy and Charging Control Framework for the 5G
System\".
[6] 3GPP TS 23.122: \"Non-Access-Stratum (NAS) functions related to Mobile
Station in idle mode\".
[7] 3GPP TS 24.501: \"Non-Access-Stratum (NAS) protocol for 5G System (5GS);
Stage 3\".
[8] 3GPP TS 23.316: \"Wireless and wireline convergence access support for the
5G System (5GS)\".
[9] 3GPP TS 23.402: \"Architecture enhancements for non-3GPP accesses\".
[10] 3GPP TS 33.501: \"Security architecture and procedures for 5G System\".
[11] 3GPP TS 29.500: \"5G System; Technical Realization of Service Based
Architecture; Stage 3\".
[12] 3GPP TR 22.844: \"Study on 5G Networks Providing Access to Localized
Services\".
[13] 3GPP TS 23.287: \"Architecture enhancements for 5G System (5GS) to
support Vehicle-to-Everything (V2X) services\".
[14] 3GPP TS 38.331: \"NR; Radio Resource Control (RRC); Protocol
Specification\".
[15] 3GPP TS 38.300: \"NR and NG-RAN Overall Description\".
[16] 3GPP TR 23.700‑17: \"Study on support for 5WWC; Phase 2\".
[17] 3GPP TS 23.288: \"Architecture enhancements for 5G System (5GS) to
support network data analytics services\".
[18] 3GPP TR 23.700‑85: \"Study on enhancement of 5G User Equipment (UE)
policy\".
[19] 3GPP TS 24.526: \"User Equipment (UE) policies for 5G System (5GS)\".
[20] 3GPP TS 28.557: \"Management and orchestration; Management of Non-Public
Networks (NPN)\".
[21] 3GPP TS 28.541: \"Management and orchestration; 5G Network Resource Model
(NRM)\".
[22] 3GPP TR 33.857: \"Study on enhanced security support for Non-Public
Networks (NPN)\".
[23] 3GPP TR 23.700-05: \"Study on architecture enhancements for vehicle-
mounted relays\".
[24] 3GPP TR 23.700-41: \"Study on enhancement of network slicing; Phase 3\".
# 3 Definitions of terms, symbols and abbreviations
## 3.1 Terms
For the purposes of the present document, the terms given in TR 21.905 [1], TS
23.501 [3] and the following apply. A term defined in the present document
takes precedence over the definition of the same term, if any, in TR 21.905
[1].
**Local service, Localized service:** Service, which is localized (i.e.
provided at specific/limited area) and/or can be bounded in time. The service
can be realized via applications (e.g. live or on-demand audio/video stream,
electric game, IMS, etc), or connectivity (e.g. UE to UE, UE to Data Network,
etc.).
**Localized service provider:** application provider or network operator who
make their services localized and to be offered to end user via a hosting
network.
**Hosting network:** A network providing access to Local/Localized services.
**Home network:** A network owning the current in use subscription/credential
of the UE. Home network can be either PLMN or NPN.
NOTE 1: For SNPN case, TS 23.501 [3] defines UE access using credentials owned
by a Credentials Holder separate from the SNPN.
**Home network service:** Service, which is offered to UE based on
subscription agreed with home network operator.
**Return to home network:** UE leaves the hosting network (e.g. when the
Local/Localized service is terminated), and resumes to use
subscription/credential of home network. It can involve a network selection
(e.g. select HPLMN or VPLMN) as specified in TS 23.122 [6], and can involve
deactivation/activation of SNPN access mode.
NOTE 2: These are the definitions used in this TR, SA WG2 can consider if the
definitions are used in the normative phase.
## 3.2 Void
## 3.3 Abbreviations
For the purposes of the present document, the abbreviations given in TR 21.905
[1], TS 23.501 [3] and the following apply. An abbreviation defined in the
present document takes precedence over the definition of the same
abbreviation, if any, in TR 21.905 [1], TS 23.501 [3].
Abbreviation format (EW)
\ \
# 4 Architectural Assumptions and Requirements
Editor\'s note: This clause will list general architectural assumptions and
principles for this study.
\- Solutions shall build on the 5G System architectural principles as in TS
23.501 [3], including flexibility and modularity for newly introduced
functionalities.
\- Functionality to enable regulatory services like emergency services are
assumed to re-use existing architecture mechanisms with no or limited impact.
NOTE: Any impacts to PWS or LI would be handled by other responsible WGs i.e.
CT1 and SA3-LI respectively.
\- Hosting network can be NPN, i.e. SNPN, or PNI-NPN.
\- Home network can be NPN or PLMN.
\- The term \"home network\" does not imply a roaming relationship.
\- Only subscribers of a public network can roam into a PLMN.
# 5 Key Issues
## 5.1 Key Issue #1: Enabling support for idle and connected mode mobility
between SNPNs without new network selection
### 5.1.1 Description
The NPN Phase 2 study item contains following work task that assumes the UE is
in SNPN access mode: Support for enhanced mobility by enabling support for
idle and connected mode mobility between SNPNs without new network selection.
This KI aims at studying impacts to the 5G System for scenarios where the UE
has a subscription with each of the source and target SNPN or can access both
the source and target SNPN using credentials from a Credentials Holder:
\- Study how to enable optimizations for idle mode mobility without new
network selection in the inter-SNPN mobility case.
\- Study how to enable optimizations for connected mode mobility without new
network selection in the inter-SNPN mobility case.
\- Whether and how session continuity can be supported in the case of idle
mode and connected mode mobility between SNPNs.
\- Whether and which additional information transfer between SNPNs on top of
Rel-17 is required for the above mentioned mobility scenarios.
## 5.2 Key Issue #2: Support of Non-3GPP access for SNPN
### 5.2.1 Description
Currently the 3GPP specifications do not support direct connection to SNPN via
non-3GPP access networks. Indirect connection to SNPN via PLMN using untrusted
non-3GPP access architecture is supported as shown in Annex D, clause D.3 of
TS 23.501 [3] (PLMN as underlay network and SNPN as overlay network).
There are already non-3GPP access technologies which are in use in enterprises
and campuses, and it is foreseen that use of such non-3GPP access technologies
will continue to evolve. The integration of these existing technologies in the
SNPN would add flexibility to the SNPN operators. In general, the solutions of
this key issue aim to address the support for non-3GPP access for SNPN.
One objective of this key issue is to enable the 5GS to support direct
connection of non-3GPP access networks to the SNPN\'s 5GC.
NOTE 1: Co-ordination with BBF and CableLabs will take place as needed during
the study for solutions related to Wireline 5G Access Network.
NOTE 2: Roaming for SNPN is out of scope of this key issue.
## 5.3 Key Issue #3: Enabling NPN as hosting network for providing access to
localized services
### 5.3.1 Description
Providing access to local services refers to the capability to provide access
to a hosting network and a set of services offered by the hosting network
provider, and 3rd party service providers including other network operators
and 3rd party application providers. The services may be localized (i.e.
provided at specific/limited area) and may be bounded in time. The user may
become aware of the available access to local services, and the process to
gain and terminate access to the hosting network and local services. This
process should be efficient, and convenient from a user experience standpoint.
Providing access to local services creates new opportunities for users and
service providers. For example, access can be provided in areas where there is
no coverage provided by other networks (for example, on a cargo ship out at
sea), or the access and local services can be established as needed (on a
short-term basis), without the need for long term business relationships,
permanently installed equipment, etc.
The type of local services and access for localized services via a hosting
network can be promoted and arranged through different channels. Principally
the Localized service provider (e.g. brick and mortar businesses, construction
contractors, first responder agencies, etc.) will provide information and
proper incentive or instructions to potential users so that they will seek to
access the local services via hosting networks.
The 5G network as hosting network offering access to such localized services
can be either a PNI-NPN or an SNPN.
It is assumed that hosting network and the localized services can be operated
by different entities. Localized services may provide more than just data
connectivity to end users, e.g. additional information/incentive/instructions
in order to seek access to the localized services in.
This key issue aims at addressing how to enable a NPN (i.e. a SNPN or a PNI-
NPN) as a hosting network for providing access to localized services with the
following aspects:
\- Define hosting NPN and identify the difference(s) between hosting NPN and
NPN defined in both Rel-16 and Rel-17.
\- Define localized services and identify the difference(s) between localized
services and regular services.
\- Define where and when localized services are available based on localized
service agreements (i.e. a service agreement for a localized service).
NOTE 1: SA WG2 works under the assumption that the relationships and the
localized service agreements are already available by means outside SA WG2
scope i.e. SA WG2 is to agree where the information is made available.
\- What is required to enable communication between a network operator
deploying a hosting network and a localized services provider:
\- Investigate which type of interaction (e.g. configuration of the hosting
network, information reporting) is needed, in such relation to enable the
localized services provider for making the best use of the hosting network;
and
NOTE 2: Collaboration with SA WG5 and SA WG3 may be needed.
## 5.4 Key Issue #4: Enabling UE to discover, select and access NPN as hosting
network and receive localized services
### 5.4.1 Description
For providing localized services to UE, the UE needs to be able to discover,
select and access the hosting network for the localized services. The
discovery mechanism can be based on provisioning the UE with appropriate
information. TS 22.261 [2] has defined various requirements regarding
discovery, selection and access of a hosting network in clauses 6.41.2.3,
6.41.2.4 and 6.41.2.5 of TS 22.261 [2].
NOTE: For the hosting network, only NPN (SNPN or PNI-NPN) is considered in
this study.
The corresponding solutions need to consider following assumptions:
\- The UE can, but not necessarily, have prior subscription with the hosting
network and/or the localized services provider.
\- The information for discovery of hosting network offering the localized
services can be provided to the UE via either hosting network or UE\'s home
network, or UE\'s serving network or localized services provider. This
information allows the UE to discover, select and access the hosting network
offering the localized services.
\- Reception and usage of configuration provided by a localized services
provider to discover and access a hosting network and localized services is
subject to home network operator\'s policy and agreement between a localized
services provider and hosting network operator, including the considerations
of prior service agreement with a localized services provider and no prior
subscription to hosting network.
\- If the UE is able to obtain services from two networks simultaneously, it
may additionally select the hosting network.
\- The selection of a hosting network can be done on request by the user, i.e.
using manual selection, unless the UE can, maintain the PDU Sessions
established with the home network and retain the services provided by the home
network on these PDU Sessions, while selecting the hosting network (see KI#5).
\- Automatic selection of a hosting network needs to be allowed by the home
network of the subscription/credentials used by the UE.
\- A localized service agreement is established (see KI#3).
This key issue aims at addressing the following aspects:
\- Investigate which type of information needs to be exchanged between hosting
network and a localized services provider so that a UE can perform discovery,
selection and connection of the hosting network and access the localized
services provided via the hosting network.
NOTE 1: The hosting network can also act as a service provider for localized
services.
\- What is the provisioning mechanism and the information needed for the UE to
discover, select and access suitable hosting network for localized services
with possible validity conditions for accessing the hosting network offering
the localized services, because of the nature of the localized service and
hosting network (e.g. time and location constrains). This includes information
enabling the UE to be aware of services that can be accessed via hosting NPN.
\- Discovery and selection procedures of hosting network and localized
services provided via the hosting network for UE to obtain localized services.
Both automatic and end user manual selection apply.
\- How a UE already registered in a network (PLMN or NPN) can discover a
suitable hosting network and the localized services provided via the hosting
network when the hosting network and/or localized services become available.
\- How to ensure the localized services are accessed by UE according to the
conditions when and where the localized services are allowed to be accessed by
the UE.
\- How the UE is provisioned with credentials (if required) to access the
selected localised services provided via the hosting network.
\- Mechanisms to authorize UE to access the hosting network.
NOTE 2: Security aspects (such as authentication of the UE and security
aspects of provisioning) are addressed in SA WG3. The authentication
architecture is addressed in both SA WG2 and SA WG3.
## 5.5 Key Issue #5: Enabling access to localized services via a specific
hosting network
### 5.5.1 Description
Hosting NPN provides access to localized services. But home network operator
of a UE can also utilize the hosting network based on a relationship
established between hosting network operator and UE\'s home operator, so that
it is possible to enable the UE with a subscription from home network to
access home network services via the hosting network, in addition to the
localized services. TS 22.261 [2] has defined the following requirements:
_\- The 5G system shall be able to allow the home network to steer its UE(s)
to a hosting network with the consideration of the location, times, coverage
of the hosting network and services offered by the home network and hosting
network._
_\- A localized service agreement is established (see KI#3)._
_\- The 5G system shall enable the home network operator to indicate to the UE
what services are preferred to be used from the home network when the UE
connects to a hosting network and the requested services are available from
both the hosting and the home network._
_\- Based on localized service agreements, the hosting network shall be able
to provide required connectivity and QoS for a UE simultaneously connected to
the hosting network for localized services and its home network for home
network services._
_\- A UE shall be able to connect to its home network via the hosting network,
if supported by the hosting network and the home network based on localized
service agreements._
This key issue aims at addressing the following aspects:
\- How and whether the home network, determine the service availability of a
hosting network, and interacts with hosting network to authorize home
network\'s subscribers to access home network services via the hosting
network, at certain time and location, coverage of the hosting network and
services offered by the hosting network.
\- How to enable UE to access both home network services and localized
services via the hosting network, and seamless service continuity for home
network services and localized services when UE moves between different
networks providing the same services. This includes how to configure UE with
information enabling the UE to be aware of services that can be accessed via a
specific network (e.g. home network or hosting NPN).
\- How home network determines the need to steer or instruct the UE, and how
the home network steers or instructs the UE to select a hosting network for
obtaining home network services or localized services or select a network for
a specific service which is available from both hosting and home network.
\- How to collect charging information for the use of localized services at
the hosting network and provide the charging records to UEs\' home operators.
NOTE 1: Charging aspects needs to be coordinated with SA WG5.
NOTE 2: It is assumed that existing mechanisms can be used to support
Regulatory Services, e.g. PWS and emergency services.
## 5.6 Key Issue #6: Support for returning to home network
### 5.6.1 Description
According to SA WG1 TR 22.844 [12], when local service is over, large number
of UEs would attempt registration back to their home network. This may lead to
a signalling peak in the home network and result in user plane and control
plane overload causing for example longer waiting for users to re-register
to/re-select their home network.
There are various load control mechanisms already defined e.g.:
\- Access control and barring as defined in clause 5.2.5 of TS 23.501 [3];
\- Control Plane Load Control, Congestion and Overload Control as defined in
clause 5.19 of TS 23.501 [3];
\- Prevention of signalling overload related to Disaster Condition and
Disaster Roaming service as defined in clause 5.40.6 of TS 23.501 [3].
This key issue aims to study whether the existing mechanisms for overload
control in the network can support all the requirements in clause 6.41 of TS
22.261 [2] \"Providing Access to Local Services\" and whether any enhancements
or additional mechanisms need to be defined. The following aspects will be
considered:
\- How to mitigate user plane and control plane overload caused by a high
number of UEs returning from a temporary local access of a hosting network to
their home network in a very short period of time.
\- How to minimize the impact on the UE\'s communication e.g. to prevent user
plane and control plane outages when returning to a home network together with
other high number of UEs in a very short period of time, after terminating
their temporary local access to a hosting network.
NOTE: The solution for this KI may need to consider mechanism developed for
KI#5 \"Enabling access to localized services via a specific hosting network\".
# 6 Solutions
Editor\'s note: This clause is intended to document the agreed architecture
solutions and a mapping of solutions to key issue(s) in clause 6.0. Each
solution should clearly describe which of the key issues it covers and how.
## 6.0 Mapping Solutions to Key Issues
Table 6.0-1: Mapping Solutions to Key Issues
              Key Issues
* * *
Solutions 1 2 3 4 5 6 1 X  
2 X  
3 X  
4 X  
5 X  
6 X  
7 X X X X 8 X 9 X 10 X X 11 X X  
12 X X  
13 X X X  
14 X  
15 X X  
16 X  
17 X 18 X  
19 X  
20 X  
21 X  
22 X  
23 X  
24 X  
25 X X 26 X  
27 X X  
28 X X  
29 X X  
30 X  
31 X  
32 X  
33 X  
34 X  
35 X X  
36 X  
37 X  
38 X 39 X 40 X X  
41 X X  
42 X  
43 X  
44 X  
45 X X  
46 X  
47 X
## 6.1 Solution #1: Enable efficient mobility via equivalent SNPNs
### 6.1.1 Introduction
The solution addresses key issue #1 \"Enhanced mobility between SNPNs without
new network selection\".
The solution utilizes a list of SNPN identities (i.e. a list of combinations
of PLMN ID and NID) to enable UE with one single SNPN subscription to
efficiently access different SNPNs without performing new network selection.
The list is implemented by the similar logic as the list of equivalent PLMNs,
as specified in clause 5.18.2a of TS 23.501 [3].
The solution also re-use existing function as specified in clause 5.18.1 of TS
23.501 [3], where different combination of PLMN ID and NID can point to the
same 5GC.
### 6.1.2 Functional Description
In existing specification, the UE can receive a list of equivalent PLMNs from
core network. Such equivalent PLMN list will assist UE to select a cell from
another PLMN during mobility without the need to perform new network
selection.
In this solution, a list of equivalent SNPNs is proposed to facilitate the
idle and connected mobility between SNPNs, reusing similar functions which are
defined for PLMN:
\- The core network can provide a list of SNPN identities to the UE that the
UE consider as equivalent to the registered SNPN.
\- The list of equivalent SNPNs can be prepared based on AMF local
configuration.
\- The UE stores the list of equivalent SNPNs, and update or delete the list
at the end of each registration procedure in the same way as done with the
list of equivalent PLMNs as described in TS 23.122 [6] and TS 24.501 [7].
\- The stored list consists of a list of equivalent SNPNs\' identities as
downloaded by the network plus the SNPN identity of the registered SNPN that
downloaded the list. When the UE is switched off, the UE shall keep the stored
list so that it can be used for SNPN selection after switch on.
\- The lists of equivalent SNPNs are stored and used per SNPN subscription by
the UE.
\- These SNPNs in the list shall be regarded by the UE as equivalent to each
other for SNPN selection and cell (re)selection.
\- The list can also be provided from AMF to NG-RAN for the purpose of
connected mode mobility.
### 6.1.3 Procedures
When UE accesses multiple SNPNs using the credentials holder function as
depicted in Figure 6.1.3-1, the following applies:
\- SNPN-1 and SNPN-2 are identified by different SNPN identity, i.e.
combination of PLMN ID and NID.
\- SNPN-1 and SNPN-2 are the Credentials Holder(CH) for each other:
\- UE of SNPN-1 can register in SNPN-2, where using SNPN-1 as the CH.
\- UE of SNPN-2 can register in SNPN-1, where using SNPN-2 as the CH.
\- NFs from one SNPN (e.g. SNPN-1) are only authorized to consume services
from the other SNPN (e.g. SNPN-2) which is acting as CH, as depicted in Figure
5.30.2.9.3-1 of TS 23.501 [3].
\- UE from each SNPN has only the subscription/credential from the respective
SNPN:
\- UE of SNPN-1 has only subscription/credential from SNPN-1.
\- UE of SNPN-2 has only subscription/credential from SNPN-2.
\- When UE holds the list of equivalent SNPNs (SNPN-1 and SNPN-2), it
efficiently makes cell (re)selection when doing idle mode mobility between the
SNPN-1\'s NG-RAN and SNPN-2\'s NG-RAN, without the need to perform network
selection.
\- The Allowed NSSAI applies to the registered SNPN. If SNPNs support an RA
with TAIs of equivalent SNPNs, then the same S-NSSAI values are required to be
supported and used in those equivalent SNPNs.
Figure 6.1.3-1: UE accesses multiple SNPNs using CH
When UE accesses multiple SNPNs belonging to the same administrative entity as
depicted in Figure 6.1.3-2, the following applies:
\- SNPN-1 and SNPN-2 are identified by different SNPN identity, i.e.
combination of PLMN ID and NID.
\- SNPN-1 and SNPN-2 belong to the same administrative entity. A common 5GC is
used and can be managed by the same administrative entity to support both SNPN
identities of SNPN-1 and SNPN-2.
\- NFs of one SNPN (e.g. SNPN-1) can be authorized to consume services from
NFs of the other SNPN (e.g. SNPN-2).
\- UE from each SNPN has only the subscription from the respective SNPN.
\- When UE is provided with the list of equivalent SNPNs (SNPN-1 and SNPN-2),
it efficiently makes cell (re)selection when doing idle mode mobility between
the SNPN-1\'s NG-RAN and SNPN-2\'s NG-RAN, with all the mobility and session
context transferred, but without the need to perform network selection. PDU
session continuity is supported.
\- UE selects and attempts registration on available and allowable SNPNs by
taking the equivalent SNPNs (if available) into account.
NOTE 1: CT WG1 will specify the details and final order of the network
selection procedure.
\- When NG-RAN is provided with the list of equivalent SNPNs(SNPN-1 and
SNPN-2) in the MRL, it makes use of such info to achieve connected mode
mobility between SNPN-1 and SNPN-2.
\- In the case of handover or network controlled release to a shared network:
\- When multiple SNPN IDs are broadcasted in a cell selected by NG-RAN, NG-RAN
selects a target SNPN, taking into account the list of SNPN IDs which are
equivalent to the serving SNPN in the Mobility Restriction List (MRL) from the
AMF.
\- For Xn based HO procedure, source NG-RAN indicates the selected SNPN ID to
the target NG-RAN.
\- For N2 based HO procedure, the source NG-RAN indicates a selected SNPN ID
to the AMF in the HO required message. Source AMF uses the selected SNPN ID
and target tracking area information supplied by the source NG-RAN to select
the target AMF. The source AMF should forward the selected SNPN ID to the
target AMF. The target AMF indicates the selected SNPN ID to the target NG-RAN
so that the target NG-RAN can select target cells for future handover
appropriately.
NOTE 2: It is up to RAN WG3 to decide how to add the selected SNPN ID in NGAP
for connected mode mobility.
Serving SNPN ID if changed is indicated to the UE as part of the UE
registration procedure.
Figure 6.1.3-2: UE accesses multiple SNPNs belonging to the same
administrative entity
If equivalent SNPNs within an RA is to be supported, then NAS can be extended
with a new Partial tracking area identity list -- type of list that includes
also the NID (together with the MCC and MNC), and NGAP can be extended
allowing the TAI list to be associated to different SNPNs e.g. by adding a new
TAI encoding for SNPNs.
NOTE 3: For ensuring TAI list to work with Equivalent SNPNs, the NID must be
defined to be unique, i.e. the UE will by default assume it is unique. The NID
included in the new Partial tracking area must be configured such that NID is
unique at least across the Registration Areas.
### 6.1.4 Impacts on services, entities, and interfaces
UE and AMF support of equivalent SNPN list in NAS.
NG-RAN and AMF support of equivalent SNPNs in NGAP.
UE/NG-RAN/AMF take equivalent SNPN list into consideration, for supporting
relevant functions, e.g.:
\- idle/connected network selection.
\- cell (re)selection.
AMF to inform UE the registered SNPN ID change during mobility in Registration
Accept message.
Minor impact on the following clauses in TS 23.501 [3]:
\- clause 5.18.1, NOTE 3.
\- clause 5.18.2a.
\- clause 5.18.4.
NGAP impact for supporting connected mode mobility between SNPNs.
NOTE: It is up to RAN WG3 to decide how to extend NGAP for connected mode
mobility.
If equivalent SNPNs within an RA is to be supported, then AMF and the UE needs
to support a new Partial tracking area identity list -- type of list that
includes also the NID (together with the MCC and MNC), and NGAP is updated to
support TAIs of different SNPNs (i.e. associated to MCC, MNC and NID).
UE impact to apply Allowed NSSAI to an RA including one or more TAIs of
equivalent SNPNs.
## 6.2 Solution #2: Access to SNPN services via Untrusted non-3GPP access
network
### 6.2.1 Introduction
Clause 5.30.2.8 and Annex D, clause D.3 of TS 23.501 [3] specify how the UE
can access SNPN services via a PLMN.
This solution defines how the UE can access SNPN services via Untrusted
non-3GPP access network.
### 6.2.2 Functional Description
To access SNPN services, a UE that has successfully obtained IP connectivity
via an Untrusted non-3GPP access network may select the N3IWF of an SNPN and
register with that SNPN (using the credentials of that SNPN) following the
same N3IWF selection procedure as specified for access to stand-alone non-
public network services via PLMN in clause 6.3.6.2a of TS 23.501 [3].
UE initiates N3IWF selection for emergency services when the UE detects a user
request for emergency session and determines that Untrusted non-3GPP access
shall be used for the emergency access. The UE with SNPN subscription performs
the following:
\- If the UE determines that it is located in the same country as the
subscribed SNPN, the UE uses the configured N3IWF FQDN for N3IWF selection.
\- Otherwise, the UE follows the N3IWF selection procedure for Emergency
services for UE not equipped with UICC, as defined in clause 6.3.6.4.2 of TS
23.501 [3].
UE equipped with Default UE credentials only shall not attempt to register
with an N3IWF. Instead, UE does one of the following:
\- connects directly (i.e. without connected to a N3WIF) with a PVS reachable
from the local Untrusted non-3GPP access network (e.g. via the Internet) using
the local IP connectivity (how the UE selects the PVS is out of 3GPP scope).
\- performs the UE onboarding procedure via an ON-SNPN with 3GPP access and
connects with a PVS using the IP connectivity provided by the ON-SNPN.
\- In either case the PVS performs provisioning of the UE with SNPN
credentials for primary authentication and other information to enable access
to the desired SNPN, including N3IWF identifier configuration and Non-3GPP
Access node selection information.
NOTE: For UE equipped with Default UE credentials only (and in absence of an
ON-SNPN with 3GPP access) this solution assumes that the PVS is reachable over
the public Internet that the UE accesses via the untrusted non-3GPP access
network.
### 6.2.3 Procedures
The procedure for selection of N3IWF of an SNPN for a UE connected to an
untrusted non-3GPP access network is identical to the procedure for selection
of N3IWF of an SNPN for a UE connected to a PLMN, the latter being described
in clause 6.3.6.2a of TS 23.501 [3].
The [NGAP] INITIAL UE MESSAGE is extended to indicate the \"selected NID\" in
addition to the existing \"Selected PLMN identity\". The encoding of this
additional information is left to RAN WG3 to determine.
NOTE: The lack of \"selected NID\" in [NGAP] INITIAL UE MESSAGE in Rel-17 for
untrusted non-3GPP access was omitted due to the fact that SNPN support was
limited to 3GPP access.
### 6.2.4 Impacts on services, entities, and interfaces
UE impact:
\- Ability to apply the existing procedures for selection of N3IWF of an SNPN
for a UE connected to a PLMN (described in clause 6.3.6.2a of TS 23.501 [3])
when the UE is connected over Untrusted non-3GPP access.
N3IWF impact:
\- Ability to select and to connect to the 5GC network of an SNPN and convey
the \"selected NID\" to the AMF, in addition to the \"Selected PLMN
identity\".
NOTE: It is up to RAN WG3 to decide how NGAP is extended i.e. which IE is used
for forwarding the selected NID.
## 6.3 Solution #3: Access to SNPN services via Trusted non-3GPP access
network
### 6.3.1 Introduction
This solution defines how the UE can access SNPN services via a Trusted
non-3GPP access network. It is based on clause 6.3.12.2 of TS 23.501 [3],
which defines the access network selection procedure for access to PLMN
services via a Trusted non-3GPP access network.
### 6.3.2 Functional Description
To access SNPN services via a Trusted non-3GPP access network, the UE follows
the same procedures used for accessing a PLMN via a Trusted non-3GPP access
network defined in clause 6.3.12.2 of TS 23.501 [3] with the following
clarifications and additions:
\- The UE initiates the access network selection procedure specified in clause
6.3.12.2 of TS 23.501 [3] and constructs a list of available SNPNs. This list
contains the SNPNs advertised by all discovered non-3GPP access networks. A
non-3GPP access network may advertise (e.g. with ANQP), not only the PLMNs
with which 5G connectivity is supported (as specified in clause 6.3.12.2 of TS
23.501 [3]), but also the SNPNs with which 5G connectivity is supported.
\- The UE selects an SNPN that is included in the list of available SNPNs.
\- When the UE wants to perform UE onboarding via an SNPN, the UE may select
an SNPN that is included in the pre-configured ON-SNPN selection information.
NOTE 1: If the same SNPN identifier is included in the lists advertised by
multiple non-3GPP access networks and the UE has determined to connect to this
SNPN, the UE selects the underlying non-3GPP access network through which to
establish the connection based on UE implementation.
\- The UE selects a non-3GPP access network that supports 5G connectivity to
the selected SNPN and initiates the registration procedure via trusted
non-3GPP access specified in clause 4.12a.2.2 of TS 23.502 [4] in order to
register with the selected SNPN via the selected non-3GPP access network.
During the EAP authentication procedure the NAI provided by the UE indicates
that 5G connectivity to a specific SNPN is required, e.g. NAI =
\"\\@nai.5gc.nid\.mnc\.mcc\.3gppnetwork.org\".
NOTE 2: In the case of SNPN ID with self-assigned NID, if the UE, when trying
to register with an SNPN ID via TNAN X, is rejected by the AMF with a cause
code that temporarily prevents the UE from registering with this SNPN ID, the
UE does temporarily not attempt to register with the same SNPN ID, even if the
same SNPN ID is advertised via another TNAN.
\- If there are multiple non-3GPP access networks that support 5G connectivity
to the selected SNPN as described in clause 6.3.3, then the UE places these
non-3GPP access networks in a prioritized list and selects the highest
priority non-3GPP access network from this list. To determine the priority of
a non-3GPP access network, the UE shall apply the WLANSP rules (if provided),
and the procedure specified in clause 6.6.1.3 of TS 23.503 [5], \"UE procedure
for selecting a WLAN access based on WLANSP rules\". If the UE is not provided
with WLANSP rules, the UE determines the priority of a non-3GPP access network
by using implementation means.
\- UE accessing the SNPN with credentials from CH is supported as described in
clause 6.3.3.1.
\- UE onboarding via Trusted non-3GPP access is supported as follows:
\- The non-3GPP access network advertises (e.g. via ANQP) an Onboarding
enabled indication, as defined in clause 5.30.2.10.2.3 of TS 23.501 [3] for
the 3GPP access.
\- As part of UE registration via Trusted non-3GPP access, in Figure
4.12a.2.2-1, step 5 of TS 23.502 [4] the UE provides an onboarding indication
inside the AN-Parameters.
\- Emergency services via Trusted non-3GPP access to an SNPN are supported as
follows:
\- UE shall attempt Emergency services over Trusted non-3GPP access only if
there is no 3GPP coverage.
\- In presence of Trusted non-3GPPP access networks providing access to both
SNPNs and PLMNs the UE initiates Emergency service with either an SNPN or a
PLMN based on implementation.
\- The non-3GPP access network advertises the support of Emergency service
(e.g. via ANQP).
### 6.3.3 Procedures
#### 6.3.3.1 Access Network Selection procedure
The UE follows the existing procedures for network selection in SNPN access
mode defined in clause 5.30.2.4.2 (Automatic network selection) and clause
5.30.2.4.3 (Manual network selection) of TS 23.501 [3]. The prerequisite for
these procedures is the following:
UE is configured with one or more of the following lists as defined in clause
5.30.2.3 of TS 23.501 [3]:
\- User controlled prioritized list of preferred SNPNs;
\- Credentials Holder controlled prioritized list of preferred SNPNs;
\- Credentials Holder controlled prioritized list of GINs.
A UE enabled to support UE Onboarding may be pre-configured with ON-SNPN
selection information as described in clause 5.30.2.10.2.4 of TS 23.501 [3].
The non-3GPP access network advertises (e.g. via ANQP) the following
information:
\- For SNPN supporting UE access using credentials from a CH, the indications
defined in clause 5.30.2.2 of TS 23.501 [3] are used:
\- An indication per SNPN of whether access using credentials from a
Credentials Holder is supported;
\- List of supported Group IDs for Network Selection (GINs) per SNPN;
\- An indication per SNPN of whether the SNPN allows registration attempts
from UEs that are not explicitly configured to select the SNPN, i.e. UEs that
do not have any PLMN ID and NID nor GIN broadcast by the SNPN in the
Credentials Holder controlled prioritized lists of preferred SNPNs/GINs.
\- For SNPN supporting UE onboarding service, the Onboarding enabled
indication as defined in clause 5.30.2.10.2.3 of TS 23.501 [3]:
\- An onboarding enabled indication that indicates whether onboarding is
currently enabled for the SNPN.
\- For SNPN supporting Emergency service via Trusted non-3GPP access:
\- an Emergency service indication.
The [NGAP] INITIAL UE MESSAGE should be extended to indicate the \"selected
NID\" in addition to the existing \"Selected PLMN identity\". The encoding of
this additional information is left to RAN WG3 to determine.
NOTE: The lack of \"selected NID\" in [NGAP] INITIAL UE MESSAGE in Rel-17 for
Trusted non-3GPP access was omitted due to SNPN support was limited to 3GPP
access.
#### 6.3.3.2 Registration procedure
The UE registers with the selected SNPN via the trusted non-3GPP access
network using the procedure described in clause 4.12a.2 of TS 23.502 [4] with
the enhancements to the following steps:
3\. The UE requests \"5G connectivity\" to a specific SNPN, e.g. NAI =
\"\\@nai.5gc. nid\.mnc\.mcc\.3gppnetwork.org\".
The TNAP selects a TNGF which is associated with the requested SNPN ID.
5\. In the Access Network parameters (AN parameters) container, the UE
includes an Establishment cause set to a value corresponding to the
service/functionality which the UE wants to use. For example, the
Establishment cause may be set to \'UE onboarding\'.
6a. The TNGF selects an AMF according to the included Establishment cause.
### 6.3.4 Impacts on services, entities, and interfaces
UE impact:
\- Ability to read SNPN identifiers in the list of available networks with
which 5G connectivity is supported, as advertised by the non-3GPP access
network.
\- Ability to select an SNPN that is included in the list of available SNPNs
as described in clause 6.3.3.
\- Support for Emergency services as described in clause 6.3.2.
\- Support for UE onboarding as described in clause 6.3.2, notably the use of
an onboarding indication inside the AN-Params.
\- Support of accessing SNPN using credentials from a CH as described in
clause 6.3.3.1.
Non-3GPP access network impact:
\- Ability to advertise (e.g. via ANQP) the SNPNs with which 5G connectivity
is supported and related parameters as described in clause 6.3.3.1.
\- Support for UE onboarding as described in clause 6.3.2, notably the
advertisement (e.g. via ANQP) of an Onboarding enabled indication.
TNGF impact:
\- Ability to select and to connect to the 5GC network of an SNPN.
\- Ability to select and to connect to the 5GC network of an SNPN and convey
the \"selected NID\" to the AMF, in addition to the \"Selected PLMN
identity\".
NOTE: It is up to RAN WG3 to decide how NGAP is extended i.e. which IE is used
for forwarding the selected NID.
## 6.4 Solution #4: Support of onboarding over untrusted non-3GPP access in
SNPN
### 6.4.1 Introduction
Editor\'s note: This clause lists the key issue(s) addressed by this solution,
and briefly the main principles of the solution.
This solution aims at addressing key Issue #2 about support of Non-3GPP access
for SNPN. In particular, this solution mainly focuses on how to support
functionalities defined in R17 eNPN such as onboarding and remote provisioning
over untrusted non-3GPP access. For UE accessing SNPN using credentials owned
by the SNPN, Solution #2 specified in clause 6.2 can be applied.
This solution can be applied to following scenarios:
\- access to PVS is restricted inside the ON-SNPN and the PVS is not
accessible from the public internet directly over the \"untrusted non-3GPP
access network\".
\- UE accesses to SNPN via indirect non-3GPP access or direct non-3GPP access
for Onboarding.
### 6.4.2 Functional Description
Editor\'s note: This clause further details the solution principles and any
assumptions made.
Before the UE registers to an SNPN over untrusted non-3GPP access for
Onboarding, it shall select a N3IWF in the SNPN which supports Onboarding.
Additionally, the SNPN shall support the Default Credentials Server belonging
to a group identified by GINs.
Editor\'s note: How the UE can select non-3GPP access network that supports
access to the N3IWF in the SNPN which supports Onboarding is FFS.
Therefore, clause 6.3.6.2a of TS 23.501 [3] can be applied with following
clarifications and additions:
\- The configured N3IWF FQDN may consist of GIN that identifying a group the
DCS belongs to.
\- The FQDN constructed by the UE includes GIN that identifies a group the DCS
belongs to, indicating the query is for SNPN Onboarding and performing a DNS
query for the resulting FQDN. The example of N3IWF FQDN consisting of GIN is
shown below:
n3iwf.5gc.GIN999123456789ABCDE.pub.3gppnetwork.org
\- Alternatively, the FQDN constructed by the UE includes SNPN ID identifying
the SNPN where the N3IWF locates and includes an Onboarding prefix, indicating
the query is for SNPN Onboarding and performing a DNS query for the resulting
FQDN. The UE may use the SNPN ID in the pre-configured ON-SNPN selection
information to construct N3IWF FQDN. The example of N3IWF FQDN consisting of
SNPN ID and Onboarding prefix is shown below:
onboarding1.n3iwf.5gc.snpnid999123456789ABCDE.pub.3gppnetwork.org
\- After UE selects a N3IWF that supports Onboarding, it shall include an
Onboarding indication in the AN parameters included in the EAP-Res/5G-NAS
message which are sent to N3IWF during registration procedure as specified in
clause 4.12.2.2 in TS 23.502 [4]. The selected N3IWF shall select an AMF that
supports Onboarding based on the Onboarding indication included in the AN
parameters.
Editor\'s note: Whether GIN needs to be in the FQDN for N3IWF that supports
onboarding is FFS.
Editor\'s note: Which authority will respond to the DNS query for FQDN that
contains GIN and support onboarding is FFS.
### 6.4.3 Procedures
Editor\'s note: This clause describes procedures and information flows for the
solution.
### 6.4.4 Impacts on services, entities, and interfaces
Editor\'s note: This clause lists impacts to services, entities, and
interfaces.
UE impact:
\- Ability to construct an FQDN consist of GINs used for selecting a preferred
SNPN that supports onboarding.
\- Ability to include Onboarding indication in the AN parameter sent to the
N3IWF during registration procedure.
N3IWF impact:
\- Ability to select an AMF that supports Onboarding based on the Onboarding
indication included in the AN parameters.
## 6.5 Solution #5: Support of Credentials Holder scenarios over untrusted
non-3GPP access in SNPN
### 6.5.1 Introduction
Editor\'s note: This clause lists the key issue(s) addressed by this solution,
and briefly the main principles of the solution.
This solution aims at addressing key Issue #2 about support of Non-3GPP access
for SNPN. In particular, this solution mainly focuses on how to support
functionalities defined in R17 eNPN such as accessing SNPN using credentials
owned by Credentials Holder separate from the SNPN over untrusted non-3GPP
access. For UE accessing SNPN using credentials owned by the SNPN, Solution #2
specified in clause 6.2 can be applied.
### 6.5.2 Functional Description
Editor\'s note: This clause further details the solution principles and any
assumptions made.
When UE accesses to a SNPN using credentials owned by Credentials Holder
separate from the SNPN, if the UE is configured with GINs, it can select a
N3IWF in the SNPN where UE accesses by using credentials owned by the
Credentials Holder belonging to a group identified by GINs.
Editor\'s note: It is FFS how GIN can help the UE select N3IWF of the serving
SNPN it needs to receive service from.
Therefore, clause 6.3.6.2a of TS 23.501 [3] can be applied with following
clarifications and additions:
\- The UE is configured with a GIN that identifies a group the CH belongs to.
\- The FQDN constructed by the UE consists of GIN that identifies a group the
CH belongs to and the Visited Country FQDN, indicating the query is for SNPN
and performing a DNS query for the resulting FQDN.
The example of N3IWF FQDN consisting of GIN is shown below:
n3iwf.5gc.GIN999123456789ABCDE..pub.3gppnetwork.org
Editor\'s note: Which authority will resolve the DNS query for N3IWF FQDN
using GIN is FFS.
### 6.5.3 Procedures
Editor\'s note: This clause describes procedures and information flows for the
solution.
### 6.5.4 Impacts on services, entities, and interfaces
Editor\'s note: This clause lists impacts to services, entities, and
interfaces.
UE impact:
\- Ability to construct an FQDN consisting of GINs used for selecting a
preferred SNPN that supports connecting with Credentials Holder.
SNPN operator and/or GSMA:
\- Use SNPN FQDN consisting of GINs.
## 6.6 Solution #6: Access to SNPN services via wireline access network
### 6.6.1 Introduction
This solution addresses KI#2.
The solution defines how the 5G-RG, FN-RG, and devices behind the RG (UE or
N5GC devices behind an FN-RG or 5G-RG) can access SNPN services via a wireline
access network. It is based on clause 4.2.1 of TS 23.316 [8], where the SNPN
is implicitly selected by wired physical connectivity between 5G-RG or FN-RG
and W-AGF. The only additional requirement is that the NID is included as part
of the registration procedure for wireline access system.
### 6.6.2 Functional Description
To access SNPN services via a wireline access network, the RG follows the
similar procedures used for accessing a PLMN via a wireline access network
defined in clause 4.2.1 of TS 23.316 [8]. The procedure is as follows:
\- SNPN is implicitly selected by wired physical connectivity.
\- The 5G-RG, the W-AGF acting on behalf of the FN-RG and the W-AGF acting on
behalf of the N5GC device shall consider both the PLMN ID and the SNPN Network
Identifier (NID) configuration to access SNPN via the wireline access network.
\- The 5G-RG that supports 5G connectivity to the SNPN initiates the
registration procedure via a W-5GAN as specified in clause 7.2.1.1 of TS
23.316 [8] with the addition of SNPN NID. For example, the NAI format for a
SUPI containing a GCI shall take the following form:
\"\\@5gc.nid\.mnc\.mcc\.3gppnetwork.org\"
\- The FN-RG that supports 5G connectivity to the SNPN initiates the
registration procedure via a W-5GAN as specified in clause 7.2.1.3 of TS
23.316 [8] with the addition of SNPN NID. For example, the NAI format for a
SUPI containing a GCI shall take the following form:
\"\\@5gc.nid\.mnc\.mcc\.3gppnetwork.org\"
\- The N5GC device behind RG (5G-RG or FN-RG) that supports 5G connectivity to
the SNPN initiates the registration procedure via a W-5GAN as specified in
clause 4.10a of TS 23.316 [8] with the addition of SNPN NID.
### 6.6.3 Impacts on services, entities, and interfaces
5G-RG impact:
\- Ability to formulate the SUCI that includes the SUPI type as \"IMSI\" and
the home network domain which will include the SNPN identifier (NID) and the
PLMN ID to access an SNPN network.
W-AGF impact in the case of an FN-RG:
\- Ability to formulate the SUCI with NAI that includes the SNPN identifier
(NID) and the PLMN ID in the realm portion of NAI to access an SNPN network.
## 6.7 Solution #7: High level flow for localized service support
### 6.7.1 Introduction
This solution provides a high level and overall flow to enable localized
service, and covers key issues KI#3/#4/#5/#6.
### 6.7.2 Functional Description
The steps shown in the Figure 6.7.3-1 describe a sequence of events among the
involved entities. Such sequence is assumed to be applicable for enabling
localized service in a typical scenario. The order of the steps and the
occurrences of each step are not necessarily restricted.
This solution is assumed to be an umbrella solution without further details on
how each steps are implemented.
### 6.7.3 Procedures
Figure 6.7.3-1: High level procedures for providing access to local service
H1. For a hosting network to provide access to localized service, the service
provider of the localized service needs to establish localized service
agreement with the operator of a hosting network.
The service provider, according to clause 6.41.2.2 of TS 22.261 [2], can be
network operators or 3rd party application providers. The services offered
from service providers can be localized, and accessed via the hosting network
based on the agreement between the different entities.
A service agreement with UE\'s home network operator is needed to enable,
e.g.:
\- UE to receive and use configuration provided by a 3rd party service
provider to discover and access a hosting network and localized services.
\- Charging for the use of localized service.
\- The interworking scenarios described in Annex G, clause G.1 of TS 22.261
[2].
\- Service/session continuity between home network and hosting network.
NOTE 1: The service level agreements established between different entities
are work assumptions for SA WG2.
H2. The hosting network is configured based on the service agreements with
localized service provider for the localized service, e.g. QoS, number of end
users, time, location, network slicing, etc.
The configuration of home network can include, e.g. whether a subscriber of
the home network is authorized to use localized service, whether home network
services can be accessed via hosting network, etc.
NOTE 2: The configuration of hosting network based on agreement with localized
service provider for localized service is out of SA WG2 study scope. Whether
there is a gap that needs to be addressed in 3GPP is up to SA WG5.
H3. End user/UE is prompted with localized service (e.g. via ticket of an
event, commercial etc) , and starts to look for methods how to access the
localized service. This could trigger activities on the application layer
(e.g. login a web page, scan a QR code etc) and further triggers
demand/request from the UE to obtain information related localized services.
NOTE 3: The application layer activities are outside of 3GPP scope.
H4. The service provider / hosting network / home network can co-ordinately
deliver to the UE information related to localized service(s). This step can
also involve the serving network of the UE if UE is not currently served by
home network. The information related to localized service(s) provided to UE
in this step can also be unsolicited. In this case, step H3 can happen after,
or during this step.
H5. Based on the received information related to localized service(s), the end
user/UE decides to accept and starts the process to discover/select the
hosting network when the conditions of the localized service are about to be
met (e.g. event time is approaching, end user enters the physical location
etc).
H6. UE connects to the hosting network, possibly with the authorization from
home network, and prepares to access the localized service (e.g. User Plane
setup, QoS negotiation, etc ).
H7. UE temporarily stays in the hosting network to obtain the desired
localized service and optionally home network services that are available via
the hosting network.
H8. When the temporary access to hosting network for localized service is
about to be terminated due to for example event is over, end user has left the
area, agreed quota is exhausted, etc, the UE returns from the hosting network.
H9. Hosting network and/or the service provider collect and provide charging
information to UEs\' home network operator, depends on the localized service
agreement.
NOTE 4: Charging aspects is to be coordinated with SA WG5.
H10. When the localized service agreement is terminated, each entity shown in
the figure may need to roll back the previous setup, in order to for example
maintain the privacy of an end user against hosting network, prevent a UE to
re-access hosting network, release network resources etc. The operation of
roll back depends how the localized service is agreed between entities, e.g.
if it is a time limited or a geographic limited service, whether it is an one-
time service for a single event, etc.
### 6.7.4 Impacts on services, entities, and interfaces
Impacts are expected to be described in other solutions.
NOTE: Security aspects has dependences on SA WG3 work.
## 6.8 Solution #8: Reuse existing mechanisms for Control Plane Load Control,
Congestion and Overload Control
### 6.8.1 Introduction
This solution addresses the scenario when UEs after having utilized localized
services in a hosting network return to their home network. Due to the nature
of localized services, this may involve large number of UEs in the same
location at the same time. Large number of UEs that simultaneously attempt to
re-register with their home network can cause a significant increase in
signalling load, both in the Access Network (AN) and in the Core Network (CN).
The proposed solution is to reuse existing mechanisms for Control Plane Load
Control, Congestion and Overload Control, to mitigate signalling overload when
large number of UEs return to their home network.
### 6.8.2 Functional Description
The solution assumes that the UEs have temporarily selected and registered
with a hosting network for utilizing localized service, and that the UEs at
some point leave the hosting network and return to their home network. The
home network in this case can be a PLMN (HPLMN or VPLMN) or an SNPN.
The mechanism for Control Plane Load Control is a comparatively slow
mechanism. It does not adapt quickly to changes of signalling load. The
purpose of the mechanism is to distribute the load in relation to the relative
capacity of the involved Network Functions. The load distribution is based on
Weight Factors in AMFs.
AMF Control of Overload involves activation of NAS level congestion control,
which is based on providing UEs with back-off time values. The UEs use the
back-off time values to decide when to initiate NAS signalling. By providing
different back-off time values to different UEs, the UE-initiated NAS-
signalling is expected to be distributed over time, thereby reducing the peak
signalling load. NAS level congestion control is described in clause 5.19.7 of
TS 23.501 [3].
### 6.8.3 Procedures
Control Plane Load Control, Congestion and Overload Control, are described in:
\- Clause 5.19 of TS 23.501 [3].
\- Clause 6.3 of TS 29.500 [11]: Load Control.
\- Clause 6.4 of TS 29.500 [11]: Overload Control.
### 6.8.4 Impacts on services, entities, and interfaces
None.
## 6.9 Solution #9: Prevention of overload build up at home network using AMF
based congestion control when local service is over
### 6.9.1 Introduction
The solution addresses the KI#6: Support for returning to the home network, by
controlling the build-up of load due to the large-scale migration of multiple
UEs from the local hosting network to the home network when the local hosting
network decides to end its services.
The UEs that are registered to the local hosting network are deregistered in a
staggered manner and completed before local hosting network goes out of
service. The UEs are forced to enter into Network selection mode to choose the
home network. In this manner the number of UE\'s triggering simultaneous de-
registration (and consequently then registering back to its home) are in the
range of manageable capacity by the home network without causing congestion or
overload.
This is achieved using either one of the two mechanisms
\- Usage of Network availability timers.
\- Specific Cause code to trigger the controlled deregistration.
### 6.9.2 High-level Description
The solution addresses KI#6 and the following principles are used:
\- When a UE registers to the local hosting network, the AMF of the local
hosting network, based on the valid duration of the local hosting services,
will start a \"Network/service availability timer\" for the UE. The timer will
have a random value and is based on the time at which the UE registers to the
local hosting network and the duration for which such local hosting service
will be available.
\- There will be 2 separate timers for each UE started at the time of
Registration - one to be applicable if the UE is in CM-Idle State when the
timer expires and the other one if the UE is in CM-Connected State when the
timer expires. The timer value for the CM-Connected State will be larger than
the one for CM-Idle State.
\- The \"Network/service availability timer\" will be restarted every time UE
initiates Registration to the 5G Network.
\- The \"Network/service availability timer\" for UE-Idle State will be
applicable if the UE is in CM-Idle state at the expiry of this timer.
\- The \"Network/service availability timer\" for UE-Connected State will be
applicable if the UE is in CM-Connected state at the expiry of this timer.
\- The \"Network/service availability timer\" is used to trigger the de-
registration of UE from the local hosting network, before the local hosting
services becomes unavailable.
\- The timer values are chosen such that the de-registration procedures from
the local hosting network are timed in a staggered manner and completed before
the local hosting services terminates and the number of UE\'s triggered to
initiate simultaneous de-registration (and consequently then registration back
to its home network) are in the range of manageable capacity by the home
network without causing overload build up at the home network
\- The \"Network/service availability timer\" to be used in CM-Idle State
could be send to the UE, during the Registration procedure to the local
hosting network, in Registration accept message.
\- Sending of \"Network/service availability timer\" is optional and based on
configuration at the AMF.
\- At the expiry of \"Network/service availability timer\"- Idle / Connected
at AMF, RRC state of the UE will be checked, and appropriate actions will be
taken based on the UE state (Idle or Connected) at that instant.
\- When the \"Network/service availability timer\" for UE expires at the AMF
and AMF is not configured to send the \"Network/service availability timer\"
to the UE, AMF will initiate De-registration procedure for the UE with a
specific cause code, that indicates the local hosting services are going to be
unavailable.
\- When the \"Network/service availability timer\" for UE expires at the AMF,
and AMF is configured to send the \"Network/service availability timer\" to
the UE, AMF will initiate implicit De-registration procedure for the UE
without any signalling. This is applicable only when the UE is in CM Idle
State as the \"Network/service availability timer\" for CM-Connected State is
never send to the UE.
\- If the UE becomes CM-Idle after the expiry of \"Network/service
availability timer\" for CM-Idle State, but before the expiry of
\"Network/service availability timer\" for CM-Connected State, then the AMF
will immediately initiate De-registration procedure for the UE with a specific
cause code, that indicates the local hosting services are going to be
unavailable.
\- When UE is provided with \"Network/service availability timer\" as part of
the Registration Accept message, UE will move itself to RM-DEREGISTERED State
without any signalling with the 5G Network, at the expiry of this timer.
\- When the UE is de-registered from the local hosting services either due to
the expiry of \"Network/service availability timer\" or due to the AMF
initiated De-registration procedure for the UE, with a specific cause code,
that indicates the local hosting services are going to be unavailable:
a. The UE may put the hosting network in a temporary forbidden list or
temporary unavailable list, so that it does not try to re-register to the same
hosting network again after this timer expiry.
b. UE would change the Network Selection mode to Automatic if it had connected
to the hosting network through Manual selection mode and select network based
on PLMN selection procedure as defined in clause 4.4 of TS 23.122 [6].
c. UE will initiate Registration to the Home Network as defined in clause
4.2.2.2.2 of TS 23.502 [4].
### 6.9.3 Procedures
#### 6.9.3.1 UE in CM Idle-State and AMF configured to send \"Network/service
availability timer\"
Figure 6.9.3.1-1: UE in CM-Idle State and AMF configured to send
\"Network/service availability timer\"
1\. UE initiate registration with the local hosting network.
2\. AMF assigns an appropriate \"service availability timer\" considering the
service available timer (as configured by the OAM) and ensuring that all the
UEs does not trigger de-registration at the same time. Thus, ensuring the UE
also does not cause signalling overload at the home network when the UE
connects back. AMF includes the \"Network/service availability timer\" in the
Registration accept message as it is configured to send this timer in
Registration accept message.
As an example, one of the methods is illustrated below to show how the
\"Network/service availability timer\" is derived by AMF
a. Network/service availability timer = (Time at which the Hosting Network
ends service) -- (Time of UE registration) + x where x is chosen a random
value to avoid all UEs accessing the Home Network at the same time.
3\. AMF starts the \"Network/service availability timer\" for both CM-Idle and
CM-Connected States.
4\. UE initiates RRC release procedure before the expiration of the
\"Network/service availability timer\" for CM-Idle State. UE enters into CM-
Idle State.
5\. \"Network/service availability timer\" for CM-Idle State expires at AMF
and UE. AMF initiates Implicit De-registration of the UE without any
additional Signalling.
6\. UE moves to RM-DEREGISTERED STATE.
7\. UE moves hosting network identity to the list of \"temporarily forbidden
SNPNs\" or temporary unavailable list, if the local hosting network is SNPN,
or move the CAG Identifiers of local hosting network out of \"CAG Information
list\", if the local hosting network is a PNI-NPN.
8\. UE would change the Network Selection mode to Automatic PLMN selection if
it had connected to the hosting network through Manual mode and select network
based on PLMN selection procedure as defined in clause 4.4 of TS 23.122 [6].
UE will initiate Registration to the Home / Serving Network as defined in
clause 4.2.2.2.2 of TS 23.502 [4]. Since the de-registration from the hosting
network and Registration to the Home/Serving Network happens in a staggered
manner, the Home/Serving Network does not get overloaded.
#### 6.9.3.2 UE in CM-Idle State and AMF not configured to send
Network/service availability timer
Figure 6.9.3.2-1: UE in CM-Idle State and AMF not configured to send
\"Network/service availability timer\"
1\. UE initiates registration with the local hosting network.
2\. AMF assigns an appropriate \"service availability timer\" considering the
service available timer (as configured by the OAM) and ensuring that all the
UEs does not trigger de-registration at the same time. Thus, ensuring the UE
also does not cause signalling overload at the home network when the UE
connects back. AMF does not include the \"Network/service availability timer\"
in the Registration accept message as it is not configured to send this timer
in Registration accept message.
3\. AMF starts the \"Network/service availability timer\" for both CM-Idle and
CM-Connected States.
4\. UE initiates RRC release procedure before the expiration of the
\"Network/service availability timer\" for CM-Idle State. UE enters the CM-
Idle State.
5\. \"Network/service availability timer\" for CM-Idle State expires at AMF.
AMF initiates explicit De-registration procedure with the UE.
6\. AMF sends Paging Request to the UE.
7\. UE initiates Service Request to come to CM-Connected Mode.
8\. AMF sends De-registration Request to the UE with cause code (e.g.: 5G
Services going out of Service) indicating that local services are going to be
terminated soon.
9\. UE sends De-registration complete to the AMF.
10\. UE moves hosting network identity to the list of \"temporarily forbidden
SNPNs\" or temporary unavailable list, if the local hosting network is SNPN,
or move the CAG Identifiers of local hosting network out of \"CAG Information
list\", if the local hosting network is a PNI-NPN.
11\. UE would change the Network Selection mode to Automatic if it had
connected to the hosting network through Manual mode and select network based
on PLMN selection procedure as defined in clause 4.4 of TS 23.122 [6]. UE will
initiate Registration to the Home / Serving Network as defined in clause
4.2.2.2.2 of TS 23.502 [4]. Since the de-registration from the hosting network
and Registration to the Home/Serving Network happens in a staggered manner,
the Home/Serving Network does not get overloaded.
#### 6.9.3.2 UE in CM-Connected State and AMF not configured to send
Network/service availability timer
Figure 6.9.3.2-1: UE in CM-Connected state and AMF not configured to send
\"Network / Service Availability\" timer
1\. UE initiates registration with the local hosting network.
2\. AMF assigns an appropriate \"service availability timer\" considering the
service available timer (as configured by the OAM) and ensuring that all the
UEs does not trigger de-registration at the same time. Thus, ensuring the UE
also does not cause signalling overload at the home network when the UE
connects back. AMF does not include the \"Network/service availability timer\"
in the Registration accept message as it is not configured to send this timer
in Registration accept message.
3\. AMF starts the \"Network/service availability timer\" for both CM-Idle and
CM-Connected States.
4\. \"Network/service availability timer\" for CM-Idle State expires at AMF.
The UE is in CM-CONNECTED state, so the AMF does not take any action.
5\. \"Network/service availability timer\" for CM-Connected State expires at
AMF. AMF initiates explicit De-registration procedure with the UE.
6\. AMF sends De-registration Request to the UE with cause code (e.g.: 5G
Services going out of Service) indicating that local services are going to be
terminated soon.
7\. UE sends De-registration complete to the AMF.
8\. UE moves hosting network identity to the list of \"temporarily forbidden
SNPNs\" or temporary unavailable list, if the local hosting network is SNPN,
or move the CAG Identifiers of local hosting network out of \"CAG Information
list\", if the local hosting network is a PNI-NPN.
9\. UE would change the Network Selection mode to Automatic if it had
connected to the hosting network through Manual mode and select network based
on PLMN selection procedure as defined in clause 4.4 of TS 23.122 [6]. UE will
initiate Registration to the Home / Serving Network as defined in clause
4.2.2.2.2 of TS 23.502 [4]. Since the de-registration from the hosting network
and Registration to the Home/Serving Network happens in a staggered manner,
the Home/Serving Network does not get overloaded.
The same call flow is applicable for a UE in CM-Connected State, even if the
AMF is configured to send \"Network/service availability timer\".
### 6.9.4 Impacts on existing services and interfaces
The solution has the following impacts:
UE:
\- Handling of new cause codes, service availability timer and related
implementation.
AMF:
\- Handling of new timer for all the UEs accessing local services. Support for
new cause code in network initiated UE deregistration request.
## 6.10 Solution #10: Solution for discovery and selection of NPN hosting
network and localized services
### 6.10.1 Introduction
This solution addresses the Key issue#4: Enabling UE to discover, select and
access NPN as hosting network and receive localized services.
It also provides a solution for Key Issue #6: Support for returning to home
network
It provides a different approach for discovery and selection for PNI-NPN case
and for SNPN case.
### 6.10.2 Functional Description
#### 6.10.2.1 UE selection of SNPN hosting network for localized services
SNPN selection for localized services is performed by a UE that supports
access to localized services in SNPNs and that has been configured to access
localized services in SNPNs. We will call this UE an \"_SNPN-localized
services-enabled UE_ \".
An \"_SNPN-localized services-enabled UE\"_ can be configured with a specific
prioritized list of SNPNs for localized services. The UE can be pre-configured
or dynamically configured by the subscribed SNPN or Home PLMN (e.g. using the
SoR procedure as defined in Annex C of TS 23.122 [6]). The dynamically
configured mechanism by the subscribed SNPN or Home PLMN (e.g. using the SoR
procedure as defined in Annex C of TS 23.122 [6]) is not used to steer the UE
from one hosting network to another hosting network. If the UE which is
registered to a hosting network received the updated prioritized list of SNPNs
for localized services, then the UE only uses the updated prioritized list of
SNPNs for localized services to perform SNPN hosting network selection for
localized services after the UE leaves the current hosting network for
localized services.
NOTE: It assumes that how does the subscribed SNPN or Home PLMN construct the
prioritized list of SNPNs for localized services is addressed by other
solutions.
The reason to have a separate list for localised services instead of a common
one like the one is defined in clause 5.30.2.4 of TS 23.501 [3] is that there
may be a case where the home SNPN or HPLMN or the UE is present in the same
areas where localised services are provided and based on the existing
selection procedures the UE will always prefer the home SNPN or HPLMN in this
case.
The prioritized list of SNPNs for localized services is stored in the context
of a given subscription in the UE. If the UE has multiple subscriptions, then
the UE may have one prioritized list of SNPNs for localized services for each
subscription.
Each entry in the prioritized list of SNPNs for localized services contains:
1\. An identification of the SNPN and the localized service to access. This
identification can be done in a few different ways:
\- Identification Mode 1: SNPN ID (PLMN ID + NID) or a Group ID for Network
Selection (GIN)
\- This mode if identification assumes that the localized service is enabled
in the whole SNPN with the SNPN ID or in every cell where GIN is broadcasted.
\- Note that an SNPN operator could potentially use multiple SNPN IDs in
different areas.
\- Identification Mode 2: SNPN ID or GIN, plus an additional Subnetwork ID.
\- The subnetwork ID is used to assign a specific area where the localized
service is provided, and it is broadcasted in SIB together with SNPN ID or
GIN.
\- The subnetwork ID may be a new ID or may be CAG (effectively extending CAG
use to SNPN).
NOTE: Whether to reuse CAG for subnetwork in SNPN or define a new ID is to be
evaluated during evaluation/conclusions.
\- One or more localized services may be assigned the same subnetwork ID if
they are offered in the same area.
2\. Validity information:
\- Validity time period.
\- Additional location information (TAI list or geographical information).
The UE uses this prioritized list and the validity information to perform
discovery and selection and to leave the SNPN as described in the Procedures
clause 6.10.3.
#### 6.10.2.2 UE selection of PNI-NPN hosting network for localized services
For PNI-NPN case, Rel-17 automatic selection defined in TS 23.501 [3] applies
with one additional enhancement:
\- Entries in the Allowed CAG list of the UE can additionally contain the
following validity information:
\- Validity time period (from/to date and time).
\- Location (e.g. list of tracking areas where the CAG list is valid).
NOTE: Location information for Allowed CAG list only needed if PNI-NPN as
hosting network can be a subset of a CAG.
In the case of PNI-NPN (CAG) selection for access to localized services, the
UE only considers an entry in the Allowed CAG list valid if and while all
conditions for that entry are met.
For the case of time period, a UE will only attempt registration on a CAG cell
if e.g. the current time lies within the time period of the related condition.
#### 6.10.2.3 Enabling access to SNPN Hosting Network for a localized service
The principles of this solution for enabling access to the SNPN Hosting
Network for localized services are as follows:
\- The hosting network maps a localized service to a subnetwork ID. Multiple
localized services may be mapped to the same subnetwork ID if they are offered
in the same service area.
\- The Credentials Holder is aware of the subnetwork ID for the localized
service in the SNPN hosting network.
NOTE: The interaction between Hosting Network and Credentials Holder is not
covered in this solution, but the inclusion of subnetwork ID may be included
in other solutions in the TR.
\- The UE is configured by the credentials holder as described in clause
6.10.2.1.
\- The RAN, via OAM, is configured to broadcast one or more subnetwork IDs.
\- The UE performs Network selection as in clause 6.10.2.1 using the
subnetwork ID if configured. The UE initiates UE registration procedure.
\- The AMF receives from the UDM (at the Credentials Holder) the subscription
information for UE access to a localized service in the Hosting Network. The
AMF may receive also the subnetwork ID included in the NR access restriction
information.
\- If the AMF does not receive any subnetwork ID, i.e. the access for the
localized service is enabled in the whole SNPN, regular registration procedure
is executed.
\- If the AMF receives a subnetwork ID, the AMF checks whether the UE is
located in the subnetwork ID. This may be done:
a. Via configuration in AMF.
b. Via receiving from NG-RAN the subnetwork ID(s) in the cell the UE is
camping on.
\- The AMF accepts the registration request if the UE is in the subnetwork ID
received from the UDM.
\- The AMF rejects the registration request if the UE is outside the
subnetwork ID received from the UDM.
\- The AMF provides to the NG-RAN the access restriction to the subscribed
subnetwork ID. The NG-RAN uses this information for handover decision. The NG-
RAN does not initiate handover towards a cell that would be outside the
subnetwork ID.
\- If the UE moves outside the subnetwork ID the UE does not attempt to
initiate any procedure towards the hosting network. The UE may initiate
network selection as in clause 6.10.2.1.
### 6.10.3 Procedures
#### 6.10.3.1 Automatic discovery and selection of SNPNs for access to
localized services
The UE performs the following steps:
Step 1. UE is configured with a \"prioritized list of SNPNs for localized
services\" and at least one entry in the validity information is met (e.g.
current time is within the time period). This configuration allows the UE to
start operating in \"SNPN Localized services mode\" when the right validity
conditions are met. The UE may continue at this point be in either SNPN access
mode or PLMN access mode until the conditions of validity information.
Step 2. When some validity information is met (e.g. time validity) in step 1,
the UE scans for SNPNs in the background.
NOTE: Details of how often to scan, etc. are out of scope of SA WG2.
Step 3. If the UE finds at least one available and allowable SNPN which meets
the validity conditions, then the UE switches to a new network selection mode
\"SNPN Localized services mode\" and selects an available SNPN from the
prioritized list of SNPNs for localized services.
Step 4. The UE performs Initial registration in the SNPN and presents the SUPI
of the currently active subscription (subscription that contains the
prioritized list of SNPNs for localized services which the UE used to select
the SNPN).
#### 6.10.3.2 Leaving SNPN Localized services mode
The UE performs the following steps:
Step 1. If the validity information in the prioritized list of SNPNs for
localized services for the currently registered SNPN are no longer met, then
the UE disables \"SNPN Localized services mode\" and returns to the mode in
which the UE was before activating SNPN Localized services mode (i.e. return
to SNPN access mode or PLMN access mode). If the validity conditions that are
no longer met is the Validity time period, this could occur to many devices at
the same time and a large number of UEs may return to their HPLMN at the same
time if measures are not taken. Therefore, two possible solutions to address
this issue (key issue #6) can be taken:
\- Option 1: The CH or HPLMN (depending on case) configures UEs with slightly
different end time to the validity time period.
\- Option 2: The UE applies a random delay before initiating step 2.
Step 2. The UE performs SNPN selection or PLMN selection as defined in TS
23.122 [6] (depending on the mode).
#### 6.10.3.3 Discovery and selection of PNI-NPNs with CAG for access to
localized services
The UE performs the following steps:
Step 1. UE is configured with Allowed CAG list, and some of the entries in the
Allowed CAG list are associated with validity information for localized
services.
Step 2. When the validity information is met in the Allowed CAG list, the UE
starts to additionally consider the CAG cell during cell reselection and also
consider the associated PLMN of the Allowed CAG list is valid if it was
excluded during the previous network selection procedure due to CAG
validation.
Step 3. The UE selects the CAG cell and potentially a new PLMN.
Step 4. The UE accesses the network via the CAG cell, and potentially a new
registration if there is a PLMN change.
#### 6.10.3.4 Leaving the PNI-NPNs with CAG for access to localized services
If the validity information of the Allowed CAG list is no longer met, UE re-
evaluates the CAG related configuration and triggers cell reselection and/or
network selection procedure.
#### 6.10.3.5 Manual discovery and selection of SNPNs for access to localized
services
The UE displays to the user a list of available SNPNs, marking first which
SNPNs, if any, are in the \"prioritized list of SNPNs for localized services\"
and at least one entry in the validity information is met. The user can select
an SNPN for access to localized services.
#### 6.10.3.6 Enabling access to localized services: Registration procedure
Figure 6.10.3.6-1 shows the call flow for the UE registration into an SNPN
hosting network for localized service(s) access.
Figure 6.10.3.6-1: Registration procedure for access to localized service(s)
in SNPN Hosting Network
0.a. It is assumed the Credentials Holder is aware of which subnetwork ID in
an SNPN hosting network applies to a specific (set of) localized service(s).
It is assumed the UE has been configured for selection of SNPN for localized
services as in 6.10.3.1, and that NG-RAN is configured to broadcast subnetwork
ID in cells that belong to a subnetwork.
0.b. The UE performs selection of SNPN for localized services as in 6.10.3.1.
The UE and SNPN perform registration procedure as in TS 23.502 [4] clause
4.2.2.2.2 with the following additions:
\- In step 3, the NG-RAN may include the (list of) subnetwork ID(s) that are
available in the cell the UE is camping on,
\- In step 14, the UDM provides the AMF with subscription information for
access to localized service(s) the UE is authorized at the SNPN Hosting
network. The UDM may also provide a subnetwork ID in the NR access restriction
information, to indicate that the UE only is allowed access in the subnetwork
ID.
\- Before step 15, if the AMF received a subnetwork ID from UDM, the AMF
checks if the UE is camping in the subnetwork ID. If not, the AMF sends
Registration Reject to UE with appropriate cause code, and terminates the
procedure. If yes, the AMF proceeds with completing Registration Procedure.
\- In step 21, the AMF includes the access restriction information including
subnetwork ID. The NG-RAN uses this information to avoid handover to a cell
not belonging to the subnetwork ID.
### 6.10.4 Impacts on services, entities, and interfaces
UE:
\- New configuration to incorporate localized services validity information
and in the case of SNPN prioritization.
\- New configuration to incorporate localized services validity information
with Allowed CAG list.
\- New SNPN for localized services selection mode.
\- New triggers to enter/leave SNPN for localized selection mode.
RAN:
\- In one of the options for SNPN for localized service identification, new
Subnetwork ID broadcasted in SIB.
UDM/SOR-AF:
\- Support prioritized list of SNPNs for localized service.
RAN/AMF/UDM:
\- For PNI-NPN case, support validity information associated with Allowed CAG
list for UE, and the access control function based on the validity
information.
\- For SNPN, support of subnetwork ID information and enforcing UE only
accesses via a cell in the subnetwork ID.
## 6.11 Solution #11: Access to localized service by using LADN and roaming
architecture
### 6.11.1 Introduction
This solution addresses Key Issue #4: Enabling UE to discover, select and
access NPN as hosting network and receive localized services and Key Issue #5:
Enabling access to localized services via a specific hosting network. The
basic principle of this solution is reusing existing roaming architecture and
LADN mechanism.
In this solution, it is assumed that a UE\'s home network is a PLMN and
hosting network is a PNI-NPN.
### 6.11.2 Functional Description
#### 6.11.2.1 Architecture
The following figure 6.11.2.1-1 and figure 6.11.2.1-2 depict the proposed
architecture, which are reusing 5G System roaming architecture in the case of
local breakout and home routed scenario. When a UE registers to the selected
hosting network and receives localized services provided by the hosting
network, architecture in figure 6.11.2.1-1 is used. If the UE also need to get
services from the home network, the UE may establish home routed PDU session
as shown in figure 6.11.2.1-2. Whether the UE receives a specific service from
the hosting network or home network is determined based on subscription of the
UE by establishing a local breakout session, or a home routed session. The UE
just follows the existing PDU Session Establishment procedure based on URSP
rule provided by the home network.
NOTE: The following architecture figures do not apply when PNI-NPN is the
HPLMN.
Figure 6.11.2.1-1: Architecture when a UE uses localized services provided by
the hosting network
Figure 6.11.2.1-2: Architecture when a UE uses services provided by the home
network
#### 6.11.2.2 Hosting network discovery and selection
It is assumed that there is service level agreement between the home network
and hosting network and based on the agreement the AMF in the home network is
configured with Localized Service Information. The Localized Service
Information contains following information:
\- Localized Service Name.
\- Validity condition:
\- Time and Spatial validity.
\- Hosting network information:
\- Precedence.
\- Hosting network ID (PLMN ID) and RAT type (e.g. NR, E-UTRA).
\- LADN DNN.
\- Allowed CAG information.
NOTE 1: If the Localized service is provided in the home network (i.e. PNI-NPN
is in the home network), hosting network information can be omitted.
When a UE is registered in home network, the UE may request Localized Service
Information to the AMF by sending NAS message (e.g. Registration). If
subscription of the UE allows to use the Localized service, the AMF provides
localized service information to the UE. The UE stores the received Localized
Service Information until time validity condition is fulfilled. The spatial
validity condition in the Localized Service Information can be represented by
geographical area. The exact service area information of hosting network is
provided to the UE as a part of LADN information during the registration to
the hosting network.
NOTE 2: In the case of roaming scenario, the AMF in the serving PLMN provides
Localized Service Information to the UE.
NOTE 3: The AMF can provide Localized Service Information to the UE without UE
request if subscription of the UE allows to use the Localized service. For
example, the AMF may provide Localized Service Information when a UE enters an
area where the Localized service is available.
Instead of providing Allowed CAG information to the UE in the Localized
Service Information, the hosting network may provide Allowed CAG list to the
UE by using existing procedure. However, in the case of roaming scenario, the
serving PLMN cannot provision Allowed CAG list of hosting network to the
inbound roamers as current specification only allows to update CAG information
of the serving PLMN in the case of roaming. If the UE receives Allowed CAG
information via Localized Service Information, the UE shall use the Allowed
CAG information only when the UE access the hosting network for the Localized
service.
#### 6.11.2.3 Registration to hosting network and access to Localized services
Based on received Localized Service Information, the UE selects hosting
network and registers to the network. When a UE registers to the hosting
network and has the subscription to a specific LADN DNN for local service or a
wild card DNN, the AMF provides LADN information (i.e. LADN DNN and LADN
service area) to the UE according to the existing LADN mechanism. The UE uses
the LADN information to access localized services provided by the hosting
network.
NOTE 1: When hosting network operator configures LADN information in the AMF,
the operator can provide associated validity time of LADN DNN so that the AMF
provides LADN information when the validity time is satisfied.
NOTE 2: If the Localized service is provided in the home network (i.e. PNI-NPN
is in the home network), the UE skips hosting network selection. If validity
condition in Localized Service Information is fulfilled, the UE can requests
LADN information to the AMF according to the existing LADN mechanism.
### 6.11.3 Procedures
#### 6.11.3.1 Requesting Localized service information
Figure 6.11.3.1-1: Requesting Localized service information
The UE may request Localized Service Information to the AMF by sending NAS
message (e.g. Registration request). The UE may indicates specific service the
UE want to receive by including Localized service name. The AMF provides
Localized Service Information to the UE as described in clause 6.11.2.1.
NOTE: How the UE gets Localized service name is out of 3GPP scope. The UE can
get Localized service name via webpage, installing application, etc.
#### 6.11.3.2 Connection to hosting network and access to Localized services
Figure 6.11.3.2-1: Registration in the hosting network and access to Localized
services
If the UE wants to receive Localized service, the UE requests Localized
service information as specified in clause 6.11.3.1 and selects hosting
network based on the received Localized Service Information. If selected
hosting network is available, the UE performs registration with the selected
hosting network. The Registration procedure in TS 23.502 [4] is used with
following modifications:
\- When the UE performs initial Registration procedure, Registration type
indicates that the UE is accessing the network for localized services. Based
on this information the AMF determine to provide LADN information to the UE.
\- The AMF indicates to the UDM that the UE is registering for localized
services. The UDM use the indication whether to accept UE registration.
After Registration is completed, the UE establishes PDU Session to the LADN
DNN.
### 6.11.4 Impacts on services, entities, and interfaces
UE:
\- The UE indicates that the UE is accessing the network for localized
services during the Registration procedure.
\- The UE requests and receives Localized Service Information from the AMF and
selects hosting network based on the received Localized Service Information.
AMF:
\- The AMF indicates to the UDM that the UE is registering for localized
services.
\- The AMF provides Localized Service Information to the UE.
UDM:
\- The UDM determines whether to accept registration taking into account the
indication that UE is registering for localized services.
## 6.12 Solution #12: Discovering services offered by SNPN/PNI-NPN while
camping in a serving network
### 6.12.1 Introduction
The solution addresses key issue #4 \"Enabling UE to discover, select and
access NPN as hosting network and receive localized services\" and proposes
how UE becomes aware of hosting network for localized services.
UE may not actively search for available networks such as hosting network for
localized services when UE is camped in home network.
This solution proposes that current serving network (PLMN or SNPN) may assist
UE in discovering hosting network for localized services in specific
conditions, such as when serving network determines that UE moves into area
where localized services are available. For current serving network to able to
assist UE in discovery of hosting network for localized services some level of
co-operation between current serving network and hosting network is needed.
Once UE becomes aware of the hosting network with help of serving network,
there can be several different alternatives for how the UE may connect to
hosting network depending on the configuration of UE such as availability of
credentials and configuration of hosting network.
### 6.12.2 Functional Description
#### 6.12.2.1 PNI-NPN as hosting network
When PNI-NPN is made available via a PLMN, the UE has subscription for the
PLMN in order to access PNI-NPN. For subscribers of other PLMNs this means
there needs to be proper roaming/service agreements in place.
In PNI-NPN a Closed Access Groups is used to apply access control for a group
of subscribers i.e. to prevent UE(s) that are not allowed to access the NPN
via the associated CAG cell(s). The CAG cell(s) are inherently associated with
location or spatial validity condition(s) and hence additional spatial
validity condition is not required to be provided with Allowed CAG list.
Hosting network specific aspects can be addressed as additional
considerations, if needed, for NPN as a network slice of a PLMN described in
TS 23.501 [3] Annex D.2. Network Slice Selection Policy (NSSP) could be
associated with hosting network specific time validation criteria.
PNI-NPN slice may be only available in the TA(s) that span over the event
location, i.e. S-NSSAI is only provided to the UE as allowed S-NSSAI in this
TA by the AMF. UE may consider TAI list, Allowed NSSAI, Allowed CAG list as
communicated by AMF in Registration Accept or UE Configuration Update to
discover a specific hosting network configuration.
UE can be pre-configured with S-NSSAI(s) that are used for localized services,
i.e. PLMN can reserve few values for this purpose and pre-provision the UEs
with these S-NSSAI(s). S-NSSAI/DNN for a particular hosting network can be
provisioned in the PLMN via operator specific means or by the service provider
via NEF using Nnef_ParameterProvision service with NEF providing versatile
external to internal parameter mapping capabilities related to, e.g. AF
expressed location or service description and NEF translates these input data
to special DNN/S-NSSAI and TA(s).
The UE may become aware about hosting network related information via OTT.
There can be UE implementation specific means how to map service specific
information retrieved via OTT to hosting network information, such as
S-NSSAI/DNN. The UE may then perform registration update to network with new
slice information.
#### 6.12.2.2 SNPN as hosting network
This solution addresses KI#4 and the following principles are used:
\- UE is assumed to have only single radio capability.
\- The home network UDM is assumed to have UE\'s subscribe localized services
and corresponding hosting network information.
\- The home network UDM invokes Namf_EventExposure_Notify to receive UE
location information event notification in order to be aware of the
availability of hosting network. When the hosting network is available, the
UDM can trigger SoR procedure to update information on available hosting
network(s).
\- The home network UDM may send location information to the AMF, enabling the
AMF to assign the Registration Area according to the received location
information.
\- When the UE is camping in the home network, the home network AMF determines
the location of the UE, for instance, based on AMF determining change of
Tracking Area (TA), e.g. Tracking Area Code (TAC) or cell id, in Registration
Request (Mobility Registration Update) received from UE as specified in clause
4.2.2.2 of TS 23.502 [4].
\- The AMF is aware of availability of hosting network(s) that corresponds to
(allowed) areas (such as tracking area) which represent the current UE
location as indicated in the Mobility Registration Update sent by the UE. The
AMF may assign Registration Area to the UE in such a way that the UE performs
Mobility Registration Update when UE moves to into the Tracking Area (TA)
where the hosting network is present. The AMF may be aware of the availability
and other information of the hosting network(s) in the registration area by
local configuration or based on the location information received from UDM, or
by service agreement with hosting network.
\- Based on availability of the hosting network(s) in the location of the UE
and considering other information such as subscription information, UE
capability, roaming and local configuration/policies or other operator
specific criteria, AMF may decide to assist UE in discovering hosting
network(s).
\- If the serving network decides to assist UE in discovering hosting
network(s), the AMF may:
\- the AMF may include information on available hosting network(s) as part of
Registration Accept message sent to UE.
\- the UDM may as part of registration procedure initiate Steering of Roaming
(SoR), as specified in Annex C of TS 23.122 [6], to update information of
available hosting network(s) to UE.
\- the AMF may initiate UE Configuration Update procedure, as specified in
clause 4.2.4.2 of TS 23.502 [4], to update information on available hosting
network(s).
Editor\'s note: It is FFS whether the existing information element in the SoR
is sufficient to carry hosting network related information or what
enhancements are needed.
\- The AMF may invoke the Namf_EventExposure_Notify to provide mobility
related event to (authorized) SMF(s) that have subscribed for the events by
invoking Namf_EventExposure_Subscribe as specified in clause 5.3.4.4 of TS
23.501 [3] and clause 4.15.4.2 of TS 23.502 [4]. Mobility event notification
may include information of available hosting network(s) or could be mapped
(e.g. PRA) to such information in SMF. SMF may use the information of
available hosting network(s) received from AMF to initiate PDU Session
Modification to inform UE, e.g. using PCO, about specific details of hosting
network configuration such as URL that UE may use to access localized services
captive portal for UE onboarding and remote provisioning purposes. SMF may be
locally configured with configuration information for hosting network(s).
\- UE could use the localized services captive portal, e.g. for UE onboarding
to hosting network (to obtain credentials) while still connected in home
network (or current serving network) and using existing PDU session.
\- Information of available hosting network(s) may include:
\- indication of availability of one or more hosting network(s);
\- list of (PLMN ID, SNPN ID), GINs (as defined in clause 5.30 of TS 23.501
[3]) or localized services specific identifier of available hosting
network(s);
\- N3IWF address and necessary credentials to access hosting network(s);
\- Specific details of hosting network such as URL or other data for UE to be
able to connect to the localized services captive portal page.
\- The serving network may also broadcast GIN that is localized services
specific or localized services specific broadcast indicator to indicate
localized services availability with which the hosting network has an
agreement with. If GIN is used, the serving network also broadcasts GIN when
requested by the UE. In the case of localized services, a new indicator is
needed in the broadcast that a GIN can be used to select a hosting network.
GIN, the localized services identifier and other information such as HRNN
(Human readable network name) may also be displayed on the UE allowing for
manual selection by the user. The GIN that is hosting network specific or the
hosting network specific indicator broadcasted by the serving network could be
cell specific.
NOTE 1: In Rel-17 maximum number of GINs is 24 (see TS 38.331 [14]).
NOTE 2: Broadcast details will be determined by RAN WG2.
\- Based on information of available hosting network(s) UE receives from
current serving network (e.g. initiated by AMF or triggered by GIN broadcasted
by the serving network), UE may:
\- access hosting network using credentials owned by a Credentials Holder
separate from the hosting network. Credentials Holder can be the home network
(e.g. the PLMN or the SNPN). Hosting network identifier information may
include indication that access using credentials from a Credentials Holder is
supported or indication that hosting network allows registration attempts from
UEs that are not explicitly configured in list of preferred SNPNs/GINs to
select the hosting network. This follows the principles defined in Rel-17 for
automatic network selection (TS 23.501 [3] clause 5.30.2.4.2) and manual
network selection (clause 5.30.2.4.3 of TS 23.501 [3]). UE authorization for
hosting network services is checked by the serving network.
\- access hosting network by using UE onboarding and remote provisioning as
specified in clause 5.30.2.10 of TS 23.501 [3] with onboarding SUCI/SUPI and
other configuration information provisioned using UE Configuration Update (or
SoR) procedure while connected to home network.
\- access from the serving network to hosting network via NWu interface and
N3IWF located in the hosting network using onboarding SUCI/SUPI in
registration procedure. Onboarding SUCI/SUPI, N3IWF address, default
credentials to establish connectivity via NWu to access hosting network and
other data can be configured using UE Configuration Update procedure to the
UE. The access credentials can be UE specific or usable by all UEs of a
certain serving network. In this case hosting network acts as the overlay
network, serving network acts as the underlay network. UE may use PDU session
in (overlay) hosting network that is restricted to access only to the
localized services portal page where the UE can be provisioned with service
and network related data.
\- access hosting network that offers free services for users in the area,
e.g. using sponsored connectivity.
\- access hosting network services for subscribers of the serving network
(e.g. the PLMN or the SNPN) with which they have agreement. In this case,
authorization to offer hosting network services is checked by the serving
network.
### 6.12.3 Procedures
#### 6.12.3.1 UE discovery, selection and access for hosting network using
Registration procedure
Figure 6.12.3.1-1: UE discovery, selection and access for hosting network
0\. During Initial registration of the UE, the home network (UDM) may provide
to serving network (AMF) as part subscription information with Nudm_SDM_Get
service operation response, an indication whether the AMF is allowed to
provide available hosting network information to UE to discover hosting
networks (e.g. when the AMF belongs to home network) or an indication to the
AMF to send the list of available hosting networks to the UDM first for
authorization and then send the authorized list of hosting networks received
from the UDM to the UE.
1\. Registration Request (Mobility Update) update triggered due to TAC
changes.
2\. Serving Network detects that the UE moved to area (TA, cell id) where
localized service is offered. The serving network\'s AMF may trigger
Nudm_SDM_Get service operation to the UDM including a list of hosting network,
if UDM had provided an indication at step 0 to send the list of hosting
network information for authorization before sending them to the UE. The UDM
then responds back with the list of hosting network that the AMF is authorized
to provide to the UE.
3\. In TAs where localized services is available, the serving network includes
hosting network information as part of Registration procedure. The serving
network may also include necessary information regarding hosting network (SNPN
ID, GIN, DNN, S-NSSAI) for it to obtain limited connectivity to hosting
network.
4\. Alternative to step 3, the hosting network information can be provided by
the SMF in a PCO during PDU session establishment or update. The AMF may
provide an indication in Nsmf_PDUSession_CreateSMContext or
Nsmf_PDUSession_UpdateSMContext to the SMF to provide hosting network related
information to the UE.
5\. UE may initiate PDU Session using DNN, S-NSSAI information received step 3
or 4 that the network redirects to the localized services portal (PCF policies
installed using PDR/FAR rules to redirect to localized services portal).
NOTE 1: UE can use internet PDU Session, reactivate UP and simply use the link
provided by the network e.g. in the PCO to reach the hosting network.
6\. Depending on information, subscription and authorization obtained for
hosting network, UE may connect to hosting network using NWu connectivity or
select hosting network directly.
NOTE 2: If UE should use hosting network as the underlay network later on and
the PLMN as overlay, it might be necessary to provide N3IWF address of the
PLMN as well.
#### 6.12.3.2 UE discovery, selection and access for hosting network using UE
Configuration Update procedure
Figure 6.12.3.2-1: UE discovery, selection and access for hosting network
using UE Configuration Update procedure
0\. During initial registration of the UE, the home network (UDM) may provide
to serving network (AMF) as part subscription information with Nudm_SDM_Get
service operation response, an indication whether the AMF is allowed to
provide available hosting network information to UE to discover hosting
networks (e.g. when the AMF belongs to home network) or an indication to the
AMF to send the list of available hosting networks to the UDM first for
authorization and then send the authorized list of hosting networks received
from the UDM to the UE.
1\. UE triggers Registration Request (Mobility Update) to TAC change and
Registration procedure completes.
2\. Serving Network detects that the UE moved to area (TA, cell id) where
localized service is offered. The serving network\'s AMF may trigger
Nudm_SDM_Get service operation to the UDM including a list of hosting network,
if UDM had provided an indication at step 0 to send the list of hosting
network information for authorization before sending them to the UE. The UDM
then responds back with the list of hosting network that the AMF is authorized
to provide to the UE.
3\. When localized services are available, the serving network AMF using UE
Configuration Update for access and mobility management related parameters may
provide UE with information of available hosting network(s) and other
information as well as trigger the UE to perform scanning of hosting
network(s) and if needed also provide the UE a trigger for the UE to determine
whether to it needs to initiate change to SNPN selection mode. Depending on
localized service information user has acquired by means out of scope of 3GPP,
such as QR code in entrance ticket and information of available hosting
network(s) received from serving network, a list of hosting network(s) and
localized service information may be available in the UE to seek user consent,
e.g. for manual selection.
4\. Depending on information, received in step 3 the UE may select and connect
to hosting network directly or using NWu.
NOTE: If UE should use hosting network as the underlay network later on and
the PLMN as overlay, it might be necessary to provide N3IWF address of the
PLMN as well.
#### 6.12.3.3 UE discovery, selection and access for hosting network using
Steering of Roaming procedure
Figure 6.12.3.3-1: UE discovery, selection and access for hosting network
using SoR procedure
0\. During initial registration of the UE, the home network (UDM) may provide
to serving network (AMF) as part subscription information with Nudm_SDM_Get
service operation response, an indication whether the AMF is allowed to
provide available hosting network information to UE to discover hosting
networks. Home network (UDM) may in addition provide as part of Nudm_SDM_Get
service operation response, a new type of SoR Update Indicator for hosting
network supporting access to localized services (enhancement to Annex C of TS
23.122 [6]). This allows home network to indicate to the AMF whether it
supports and allows AMF triggering SoR for hosting networks that provide
access to localized.
1\. Registration Request (Mobility Update) update triggered due to TAC
changes. As part of Mobility Registration update, if allowed by the home
network in step 0, the AMF may include list of available hosting network(s) to
the UE as in clauses 6.12.3.1 or 6.12.3.2.
2\. Serving Network detects that the UE moved to area (TA, cell id) where
localized service is offered. Based on SoR Update Indicator for hosting
networks supporting access to localized services in UE context in the AMF and
list of available hosting network(s), the AMF may include the list of
available hosting network(s) as part of Nudm_SDM_Get service operation to UDM
in home network. Home network (UDM) may determine preferences/priorities
between hosting network(s) and subscribed SNPN/VPLMN/HPLMN and initiate SoR
procedure to communicate changed preferences in Credentials Holder controlled
list(s) to UE.
NOTE: The H-UDM can be triggered for SoR procedure during Mobility
Registration update as per the procedure in Sol#18.
3\. Steering of Roaming procedure is used to update information of available
hosting network(s) and other information to UE.
4\. Depending on the information, subscription and authorization obtained for
home network in SoR, UE may select and connect to hosting network directly.
### 6.12.4 Impacts on services, entities and interfaces
UE:
\- support of information of hosting networks in NAS procedures.
\- support ability to determine whether to automatically change to access mode
used to access hosting network or display hosting network id, the localized
services identifier and other information such as HRNN allowing for manual
selection of SNPN access mode by the user; taking into account hosting network
information UE receives from serving network and/or home network as part of
registration procedure, UE Configuration Update procedure or SoR procedure.
NG-RAN:
\- broadcast GIN(s) that is hosting network specific or hosting network
specific broadcast indicator to indicate localized services availability. When
GIN that is hosting network specific is broadcasted by the serving network,
GIN is broadcasted together with indicator that informs GIN can be used to
select a hosting network.
AMF:
\- support by local configuration of available of hosting network(s) in UE
registration area.
\- support assignment of registration area in such a way that the UE performs
Mobility Registration Update when the UE moves to an area where hosting
network(s) are available.
\- provide information of available hosting networks to UE in NAS Registration
procedure.
\- provide information of available hosting networks and other information to
UE in UE Configuration Update procedure.
\- support capability to provide indication of UE presence in area of hosting
network(s) and the list of hosting network(s) available in the area to UDM for
initiation of SoR procedure.
\- support capability to provide Onboarding SUCI/SUPI, N3IWF address, default
credentials and other data in UE Configuration Update procedure to the UE for
UE to be able to establish connectivity via NWu to access hosting network.
SMF:
\- may optionally support of ability to provide to UE information of URL and
other information to access portal in order to perform remote provisioning to
hosting network(s) in PCO when AMF notifies UE entering an area that co-
locates with hosting network(s).
UDM:
\- provide information of allowed hosting networks, related preferences and
other information to UE in SoR procedure.
## 6.13 Solution #13: Exposure enhancements to support providing access to
localized services
### 6.13.1 Introduction
This solution aims at address key Issue #3 (Enabling NPN as hosting network
for providing access to localized services), Key Issue #4 (Enabling UE to
discover, select and access NPN as hosting network and receive localized
services) and Key Issue #5 (Enabling access to localized services via a
specific hosting network), in particular:
\- How localized service agreements (i.e. a service agreement for a localized
service) for a specific occasion (time and location) are automatically
established and terminated.
\- What is required to enable communication between a network operator
deploying a hosting network and a localized services provider: Investigate
which type of interaction (e.g. configuration of the hosting network,
information reporting) is needed, in such relation to enable the localized
services provider for making the best use of the hosting network.
\- How and whether the home network, determine the service availability of a
hosting network, and interacts with hosting network to authorize home
network\'s subscribers to access home network services via the hosting
network, at certain time and location, coverage of the hosting network and
services offered by the hosting network.
\- Investigate which type of information needs to be exchanged between hosting
network and a localized services provider so that a UE can perform discovery,
selection and connection of the hosting network and access the localized
services provided via the hosting network.
\- How to enable UE to access both home network services and localized
services via the hosting network, and seamless service continuity for home
network services and localized services when UE moves between different
networks providing the same services. This includes how to configure UE with
information enabling the UE to be aware of services that can be accessed via a
specific network (e.g. home network or hosting NPN).
\- How home network determines the need to steer or instruct the UE, and how
the home network steers or instructs the UE to select a hosting network for
obtaining home network services or localized services or select a network for
a specific service which is available from both hosting and home network.
\- How to mitigate user plane and control plane overload when a high number of
UEs return to home network from a temporary hosting network , especially
ensure the service continuity for the UEs with single radio capability which
are camping in the hosting network, and using hosting network as an underlay
network to access the services provided by the home network.
The main principles of this solution are that:
\- The localized service provider can act as the AF to manage the localized
service agreements among Hosting Network operator, localized service provider,
and Home Network or Credentials Holder via exposure interface.
\- The localized service provider can act as the AF to manage the subscribed
localized service information in subscription data within the Home Network or
Credentials Holder or Hosting network via network exposure. This can be
performed on a demand basis.
\- The network selection information for the target Hosting Network is
provisioned/signalled to the UE when the UE is registered in the Home Network;
the network selection information is used for discovery and selection of the
target Hosting Network; Optionally, the network selection information can be
signalled to the UE under certain conditions e.g. when UE enters specific area
and/or after certain time.
\- When the UE registers in the Hosting Network, the Home Network or the
Credentials Holder performs primary authentication and authorization for the
UE.
\- When the UE accesses to the localized service via Hosting Network, the
Hosting Network initiates Network Slice-Specific Authentication and
Authorization or PDU Session Secondary Authentication and Authorization to
authorize the UE access to the localized service.
\- When the UE accesses to the localized service via Hosting Network, the
Hosting Network uses the time and location allowed for the UE to perform
access control to the localized service.
\- When the UEs return to Home Network from Hosting Network, the Hosting
Network may group the registered UEs based on reported the Nwu status and the
availability of the Home Network of the UE. Hosting Network may indicate every
registered UE with a random back-off timer value from different range of
values corresponding to different groups. UE should waits until the expiry of
the back-off timer to initiate the registration and PDU session establishment
request attempt to the home network if needed.
### 6.13.2 Functional Description
Providing access to localized services refers to the capability to provide
access to a hosting network (PNI-NPN or SNPN) and a set of services offered by
the hosting network provider, other mobile network operators (PLMN or SNPN)
and 3rd party application providers. The services may be localized (i.e.
provided at specific/limited area) and may be bounded in time.
The UE\'s with or without prior subscription to the hosting network can access
to the localized services via hosting network using access credentials from
Home Network or Credentials Holder once the UE has subscribed successfully to
the localized services of the hosting network. Then this solution is described
as below:
\- The localized service provider acting as the application function manages
the service agreements among Hosting Network operator, localized service
provider, and Home Network or Credentials Holder via network exposure. The
service agreements include:
\- Availability of each of the localized service (service identification,
service parameters [DNN, S-NSSAI, QoS], service authorization methods [NSSAA
or PDU Session SAA], service access methods [LBO or HR], time and location);
and
\- List of Supported Home Networks or Credentials Holders for each localized
service; and
\- List of Supported Hosting Networks for each localized service.
\- The localized service provider may request the hosting network operator to
configure or update its network rule (e.g. at the specific time and location)
to provide the localized services. Based on the request from the localized
service provider and the agreement between hosting network operator and
localized service provider, the hosting network may configure or update its
network rules in NFs to provide the localized services. The hosting network
operator may respond the localized service provider with the result for
providing the localized services.
\- The hosting network may advertise the localized services to the UE
according to the network rules.
\- UE/User can subscribe to the localized service for a specific Hosting
Network via out-of-3GPP means, e.g. online store, portal:
\- The UE should be a subscriber of the supported Home Network or should have
credentials from the supported Credentials Holder in the service agreement;
and
\- The target Hosting Network should be one in the list of supported Hosting
Networks; and
\- The localized service provider should know localized service information
selected by the UE/User, e.g. subscribed DNN, S-NSSAI, QoS, service
authorization method, service access method, time and location, this
information selected by the UE/User should be covered by the Availability of
the localized service in the service agreement. The localized service provider
should also know the information of the UE\'s subscribed Hosting Network and
Home Network or Credentials Holder; and
\- The UE/User can obtain the service credentials assigned by the localized
service, the service credentials can be used to authenticate and authorize the
UE access to the localized service.
\- The localized service provider acting as the application function, updates
subscription data in the subscribed Home Network or Credentials Holder or
Hosting network via network exposure, so the subscription data can contain the
localized service information subscribed by a single UE or a group of UEs:
Editor\'s note: It is FFS how network exposure is used by localized service
provider to update the subscription data and what the subscription data for
localized service contains.
\- If the UE will access the Hosting Network using credential from Credentials
Holder with AAA Server, then the localized service provider updates the
subscription data in the subscribed Hosting Network, so the subscription data
contains the indication that primary AA by AAA-S is required as well as the
subscribed localized service information e.g. subscribed DNN, S-NSSAI, QoS,
service authorization method, service access method, time and location.
\- If the UE will access the Hosting Network using credential from Credentials
Holder with AUSF and UDM, then the localized service provider updates the
subscription data in the subscribed Home Network, so the subscription data
contains the subscribed Hosting Network information as well as the subscribed
localized service information e.g. subscribed DNN, S-NSSAI, QoS, service
authorization method, service access method, time and location.
\- If the UE will access the Hosting Network using credentials from Home
Network, then the localized service provider updates the subscription data in
the subscribed Home Network, so the subscription data contains the subscribed
Hosting Network information as well as the subscribed localized service
information e.g. subscribed DNN, S-NSSAI, QoS, service authorization method,
service access method, time and location.
\- The Home Network updates UE with the network selection information for the
subscribed Hosting Network (e.g. service identification, Hosting Network ID,
temporal validity condition, spatial validity condition) when subscribed time
starts and/or when UE enters specific area indicated by the subscribed
location contained in the subscription data:
\- The temporal validity condition is derived from the subscribed time for the
localized service, this indicates the time period when the network selection
information is valid.
\- The spatial validity condition is derived from the subscribed location for
the localized service, this indicates the area where the network selection
information is valid.
\- The Home Network can also provide UE with its N3IWF address to enable UE to
access both home network services and localized services via the hosting
network:
\- The N3IWF address of home network is used for UE to determine its way to
access to hosting network based on its radio-capability.(e.g. access hosting
network directly, or access home network via hosting network as an underlay
network).
\- The UE moves in the subscribed location for the localized service and the
temporal validity condition is still valid, and starts discovery and selection
of the Hosting Network.
\- The UE registers in the Hosting Network with the access credentials and
accesses to the localized services using the service credentials.
\- The UE is authenticated and authorized by the Home Network or the
Credentials Holder.
\- The UE can be provisioned with information related with the subscribed
localized service (Allowed NSSAI, service authorization method, URSP rules).
\- The UE setups the connectivity to the localized service by establishing a
PDU Session with the DNN, S-NSSAI associated with the localized service, the
Hosting Network can allocate resources for the PDU Session according to the
subscribed QoS or service access method.
\- With the subscribed service authorization method, the Hosting Network
performs the service authorization using the indicated authorization method.
\- With the subscribed time and location, the Hosting Network performs access
control to the localized service.
\- When the UE moves out the subscribed location for the localized service or
the temporal validity condition becomes out-dated:
\- The UE de-registers from the Hosting Network, the UE may delete the network
selection information for the subscribed Hosting Network and information
related with the subscribed localized service.
\- The Hosting Network de-registers the UE and releases network resources
reserved for the UE.
\- The localized service provider may delete the localized service information
from subscription data in the Home Network or Credentials Holder or Hosting
network.
Figure 6.13.2-1 depicts the scenarios for support of providing access to
localized services.
Figure 6.13.2-1: Support of providing access to localized services via
exposure enhancements
\- When UE returns to Home Network from the Hosting Network, the AMF of
Hosting Network may group the UEs based on the Nwu status and the availability
of the Home Network of the UE. Hosting Network indicates the UE with a random
back-off timer from different range of values corresponding to different
groups to register to Home Network.
\- AMF of hosting network indicates UE the localized service(s) end. One or
more localized services ID may be included in this indication.
\- Upon receiving the end indication of the localized service(s) from the AMF,
UE may:
\- determine whether all the target localized services provided by the hosting
network end.
\- determine its current Nwu interface status for the specific home network.
\- detect whether there is a coverage of the specific home network in a good
signal condition(e.g. meet the requirement of the signal strength to access
to)
\- If UE determines all the target localized services provided by the hosting
network end, UE reports the Nwu interface status and related home network
identity(e.g. PLMN ID) that the Nwu interface connects to. UE reports the
availability of the coverage of the home network.
\- Based on the reports of the UEs, AMF groups the UE and indicate the UE with
a random back-off timer from different range of values corresponding to
different groups to register to home network in different groups.
For every single home network, AMF may group the UEs into four groups:
\- Group1: Nwu interface for home network exists and coverage of the home
network exists. AMF may assign a random back-off timer value from a pre-
defined range for each UE in order to trigger the UE to start to register and
establish the PDU session in the home network immediately.
\- Group2: Nwu interface for home network does not exist and coverage of the
home network exists. AMF may assign a random back-off timer value from a pre-
defined range for each UE in order to trigger the UE to start to register to
the home network immediately. The pre-defined range of back-off timer in
Group2 should be longer than which of in Group1.
\- Group3: Nwu interface for home network exists and coverage of the home
network does not exist. AMF may assign a random back-off timer value from a
pre-defined range for each UE in order to trigger the UE to start to register
and establish the PDU session in the home network when UE detects the
availability of the home network. The pre-defined range of back-off timer in
Group3 should be longer than which of in Group2.
\- Group4: Nwu interface for home network does not exist and coverage of the
home network does not exist. AMF may assign a random back-off timer value from
a pre-defined range for each UE in order to trigger the UE to start to
register to home network when UE detects the availability of the home network.
The pre-defined range of back-off timer in Group4 should be longer than which
of in Group3.
Figure 6.13.2-2 depicts an example to group the UEs by AMF based on the
reports of the UEs.
Figure 6.13.2-2: AMF groups the UEs based on the reports of the Nwu status and
the availability of the Home Network of the UE
\- UE should wait until the expiry of the back-off timer to initiate the
registration attempt and PDU session establishment request attempt to the home
network if needed.
### 6.13.3 Procedures
#### 6.13.3.1 Procedure for enabling hosting network to provide access to
localized services
Figure 6.13.3.1-1: Procedure for the interaction between hosting network and
localized service provider to enable UE to access the localized services via
hosting network
The precondition for this procedure is the existence of a SLA between the
Hosting network and the provider of localized service to enable the
interaction between the AF and the Hosting Network as required. And there
should be another precondition for this procedure that UE with target
localized service has registered to the hosting AMF and setup a PDU session
with the hosting SMF, and the related AM/SM policy association have been
established between the hosting AMF/SMF with the hosting PCF.
\- Step 1: AF(localized service provider) may initiate or update the request
to the NEF of the hosting network for providing access to localized services
with the characteristics of the localized service, which including:
\- list of the identification of the localized services;
\- validity restriction for each localized service, e.g. the validity of time
or location;
\- QoS requirements for each localized service.
\- Step 2: NEF/PCF of the hosting network determines its network rules for the
localized services based on the request in Step1 and the agreement with the
localized service provider. The network rules are used to reserve the network
resources and meet the QoS requirement with the specific validity restriction
for providing access to the localized services.
\- Step 3: NEF/PCF of the hosting network responses the result for providing
access to localized services to the AF (localized services provider), the
result corresponds to the request in the Step1, which including:
\- list of the identification of the localized services, which can be provided
by the hosting network;
\- validity restriction for each localized service provided by the hosting
network, e.g. the validity of time or location;
\- QoS requirements for each localized service provided by the hosting
network.
\- Step 4: PCF of hosting network updates the parameters of the AMF and SMF in
order to enforce its network rules which are determined in step 3 to provide
access to localized services.
\- PCF will invoke Npcf_AMPolicyControl_UpdateNotify request to AMF as defined
in clause 4.16.2.2 of TS 23.502 [4], which includes the list of the
identification of the localized services, the modified service area
restrictions (e.g. the validity of location), and the modified QoS (such as
UE-AMBR, UE-Slice-MBR) parameters to notify AMF the access and mobility
related policy for localized services has been updated.
\- PCF will invoke Npcf_SMPolicyControl_UpdateNotify request to SMF as defined
in clause 4.16.5.2 of TS 23.502 [4], which includes the modified QoS (e.g.
Authorized MBR, Authorized session-AMBR), the Revalidation time limit, the
Time Condition, etc. parameters to notify SMF the PDU session related policy
information for localized services has been updated.
\- Step 5: hosting network advertise the localized services to the UE
according to the network rules (e.g. at the specific time and location).
\- When AMF received the modified access and mobility related policy from PCF
in step 4, AMF will deploy and store this updated policy information, then
provisioning the Service Area Restrictions (e.g. the validity of location),
the list of the identification of the localized services (such as DNN and/or
S-NSSAIs) to the UE, and provisioning the UE-AMBR, Service Area Restrictions
to the NG-RAN.
#### 6.13.3.2 Procedure for home network to update UE with the network
selection information for the subscribed Hosting Network
Figure 6.13.3.2-1: Procedure for home network to update UE with network
selection information for hosting network
\- Step 1: UE indicates its target localized services (via a list of
identification of the localized services) in the NAS message: Registration
Request when UE registers to the AMF of the home network.
\- Step 2: Home network may perform the authorization and authentication for
the target localized services based on the local network policy and UE
subscription.
Editor\'s note: It is FFS how the authorization and authentication for the
target localized service are performed in the home network,
\- Step 3: Based on the UE subscription of the target localized services
provided by the hosting networks and the availability of the hosting
network(s) in the location of the UE, the AMF of the home network may returns
the information of the hosting network providing the target services to the UE
in the NAS message: Registration Accept or UE configuration update, which
includes:
\- List of SNPN IDs of the hosting network associated with the localized
services.
\- Special restriction for the localized services, including time and location
restrictions.
\- N3IWF address of the home network, which may be used for hosting network as
an underlay network to access the home network.
Editor\'s note: It is FFS whether ANDSP can be reused to provide N3IWF
information to UE.
\- Credentials to access hosting network(s).
NOTE: Whether and how credential can be sent to UE via NAS message is up to SA
WG3.
UE may store the information of the hosting network; it is up to UE to
determine its way to access to hosting network when it is available, such as:
\- For a dual- radio capability UE, UE may access the hosting network directly
on one radio link and retain the connection with the home network with the
other radio link.
\- For a single-radio capability UE, UE access the home network via the
hosting network as an underlay network, for both services from hosting network
and the home network.
#### 6.13.3.3 Procedure for hosting network to instruct the UE to return to
the home network
Figure 6.13.3-1: Procedure for hosting network to instruct UE to return to the
home network
\- Step 1: AMF sends the localized service end indication to the registered
UE, which may include the list of the identity of the localized service that
is about to end.
\- Step 2: Upon receiving the end indication of the localized service from the
AMF, If UE determines all the target localized services provided by the
hosting network end, UE reports the Nwu interface status and related home
network identity(e.g. PLMN ID) that the Nwu interface connects to. UE reports
the availability of the coverage of the home network (e.g. the signal strength
of the home network detected by the UE meets the requirement to access to).
\- Step 3: For every single home network, AMF may group the UEs into four
groups:
\- Group1: Nwu interface for home network exists and coverage of the home
network exists. AMF may assign a random back-off timer value from a pre-
defined range for each UE in order to trigger the UE to start to register and
establish the PDU session in the home network immediately.
\- Group2: Nwu interface for home network does not exist and coverage of the
home network exists. AMF may assign a random back-off timer value from a pre-
defined range for each UE in order to trigger the UE to start to register to
the home network immediately. The pre-defined range of back-off timer in
Group2 should be longer than which of in Group1.
\- Group3: Nwu interface for home network exists and coverage of the home
network does not exist. AMF may assign a random back-off timer value from a
pre-defined range for each UE in order to trigger the UE to start to register
and establish the PDU session in the home network when UE detects the
availability of the home network. The pre-defined range of back-off timer in
Group3 should be longer than which of in Group2.
\- Group4: Nwu interface for home network does not exist and coverage of the
home network does not exist. AMF may assign a random back-off timer value from
a pre-defined range for each UE in order to trigger the UE to start to
register to home network when UE detects the availability of the home network.
The pre-defined range of back-off timer in Group4 should be longer than which
of in Group3.
NOTE: For each of the home network operator and the hosting network operator,
there may be a SLA to configure the pre-defined range value corresponding to
different groups. On the other hand, the hosting network may configure the
pre-defined range value corresponding to different groups locally.
\- Step 4: AMF sends the mobility command to each of UE, which includes the
assigned random back-off timer value from the predefined range corresponding
to different groups.
\- Step 5: Upon receiving the value of back-off timer from the AMF of the
hosting network, UE should waits until the expiry of the back-off timer to
initiate the registration attempt and PDU session establishment request
attempt if needed to the home network.
### 6.13.4 Impacts on services, entities, and interfaces
UE:
\- Ability to indicate its target localized services in NAS message based on
the received list of the identification of the localized services.
PCF:
\- Support to receive and respond to Access Information from the NEF.
\- Support to build network rules/policies to apply for localized server
requests from the localized service provider and send to AMF and SMF
respectively to perform.
AMF:
\- Ability to receive and handle the list of the identification of the
localized services, the modified service area restrictions, and the modified
QoS (e.g. UE-AMBR, UE-Slice-MBR) parameters from the PCF.
SMF:
\- Ability to receive and handle the list of the identification of the
localized services, the modified QoS (e.g. Authorized MBR, Authorized session-
AMBR), the Revalidation time limit, the Time Condition, etc. parameters from
the PCF.
NEF:
\- Ability to receive and respond to Access Information from the AF (localized
service provider).
## 6.14 Solution #14: Solution for hosting network selection
### 6.14.1 Introduction
This solution solves several requirements listed in Key Issue#4.
This solution is used in the scenario when the hosting network is an SNPN. In
this solution, two alternatives are provided for a UE to receive hosting
network selection and access information from Localized service provider,
after the UE establishes business relationship with the Localized service
provider:
1) UE receives hosting network selection and access information from Localized
service provider using UP provisioning mechanism;
2) UE receives hosting network selection and access information from local SP
using SoR procedure.
In both alternatives, the Localized service provider obtains Hosting Network
Selection and Access Information from the Hosting network.
### 6.14.2 Functional Description
In this solution, the hosting network sends Hosting Network Selection and
Access Information to the local service provider, who provides service to UEs
accessing the hosting network.
The Hosting Network Selection and Access Information consists the following
information:
\- Hosting Network Identifier, e.g. SNPN ID in the case of the hosting network
is an SNPN.
\- The time condition information when the hosting network provides access
service.
\- The location condition information where the hosting network provides
access service.
\- Optionally, credential used for the UE to access the hosting network.
Credential may be only provided if hosting network is an SNPN.
The UE receives the Hosting Network Selection and Access Information from the
localized service provider. The UE selects a hosting network when the time and
location condition information is satisfied.
### 6.14.3 Procedures
Figure 6.14.3-1: UE receives hosting network selection and access information
from Localized service provider using UP provisioning mechanism
1\. The hosting network server sends Hosting Network Selection and Access
Information to the NEF.
The hosting network (HN) server stores the Hosting Network Selection and
Access Information and send it to the local service providers who provide
services to the UEs accessing the hosting network.
The HN server may be the UDR in the hosting network. The UDR sends
Nudr_DM_Notify message to the NEF of hosting network, including LSP ID and the
Hosting Network Selection and Access Information.
The HN server may include the IDs of all the LSPs which provide localized
services via the hosting network.
2\. The NEF sends the Hosting Network Selection and Access Information to the
Local Service Provider (LSP) App.
The NEF sends Nnef_EventExposure_Notify message to the LSP App, including the
Hosting Network Selection and Access Information.
3\. The UE establishes connection with the local service provider App.
The UE may establish a PDU Session via its home network and establishes
connection via the PDU Session.
NOTE 1: How the UE knows the address of the local service provider App is out
of 3GPP scope, for example, from the ticket the user bought for a football
match.
4\. The UE receives the Hosting Network Selection and Access Information from
the local service provider App.
5\. For automatically network selection, when the corresponding time and
location condition information is satisfied, the UE activates SNPN access
mode. The UE selects a hosting network based on the Hosting Network Identifier
in the Hosting Network Selection and Access Information when the corresponding
time and location condition information is satisfied.
For manual network selection, when the corresponding time and location
condition information is satisfied, the UE provides to the user the list of
hosting networks (each is identified by a PLMN ID and NID) and related human-
readable names (if available) of the available hosting networks. The user
selects manually one hosting network from the list.
Figure 6.14.3-2: UE receives hosting network selection and access information
from local SP using SoR procedure
1\. The hosting network server sends Hosting Network Selection and Access
Information to the NEF.
The hosting network (HN) server stores the Hosting Network Selection and
Access Information and send it to the local service providers who provide
services to the UEs accessing the hosting network.
The HN server may be the UDR in the hosting network. The UDR sends
Nudr_DM_Notify message to the NEF of hosting network, including LSP ID and the
Hosting Network Selection and Access Information.
The HN server may include the IDs of all the LSPs which provide localized
services via the hosting network.
2\. The NEF sends the Hosting Network Selection and Access Information to the
local service provider App.
The NEF sends Nnef_EventExposure_Notify message to the LSP App, including the
Hosting Network Selection and Access Information.
3\. The LSP App sends Nnef_ParameterProvision_Create message to the home
network of the UE including the Hosting Network Selection and Access
Information.
NOTE 2: How the LSP App can obtain the home network of the UE is out of 3GPP
scope, for example, from the UE\'s mobile phone number.
4\. The NEF of the home network of the UE sends Nudm_ParameterProvision_Create
to the UDM of the home network of the UE, including the Hosting Network
Selection and Access Information.
5\. The UDM notifies the AMF of the UE of the Hosting Network Selection and
Access Information via Nudm_SDM_Notification Notify message.
6\. The AMF sends a DL NAS TRANSPORT message to the UE, including the Hosting
Network Selection and Access Information.
NOTE 3: Steps 5 and 6 can reuse the corresponding steps in SoR mechanism as
described in Annex C of TS 23.122 [6] or user parameter update procedure as
described in TS 23.502 [4].
7\. For automatically network selection, when the corresponding time and
location condition information is satisfied, the UE activates SNPN access
mode. The UE selects a hosting network based on the Hosting Network Identifier
in the Hosting Network Selection and Access Information when the corresponding
time and location condition information is satisfied.
For manual network selection, when the corresponding time and location
condition information is satisfied, the UE provides to the user the list of
hosting networks (each is identified by a PLMN ID and NID) and related human-
readable names (if available) of the available hosting networks. The user
selects manually one hosting network from the list.
### 6.14.4 Impacts on services, entities, and interfaces
UE impact:
\- Ability to receive Hosting Network Selection and Access Information from
the local service provider App or via SoR procedure.
\- Ability to perform hosting network selection based on the received Hosting
Network Selection and Access Information.
Hosting Network impact:
\- Ability to send Hosting Network Selection and Access Information to the
local service provider.
Home Network impact:
\- NEF: Ability to receive Hosting Network Selection and Access Information
from the local service provider.
\- UDM: Ability to receive Hosting Network Selection and Access Information
from the NEF and sends Hosting Network Selection and Access Information to the
UE using SoR procedure or user parameter update procedure.
## 6.15 Solution #15: Local service provisioning via PLMN
### 6.15.1 Introduction
This solution mainly addresses Key Issue #4 and #5. The local service platform
generates and provides the local service access information and provides it to
the UE, through the UE\'s serving PLMN.
### 6.15.2 Functional Description
This solution assumes that the local service provider has a business agreement
with the PLMN operator. Its service platform utilizes the PLMN\'s network
exposure framework for providing the local service access information to the
requesting UE.
The local service platform monitors the Local Service Subscription events
through the PLMN network exposure function. Such an event is triggered when a
UE initiates subscription request (e.g. via NAS request) for a interested
local service. The UE may have learned the desired local service information
(e.g. local service name/identifier) via various channels that are out of 3GPP
scope.
When the local service platform receives the Local Service Subscription event,
and if it is acceptable, it generates the local service access information for
the requesting UE and provides it to the UE through the PLMN network exposure
function. The local service access information may include the hosting network
identifier, temporary credential for accessing the hosting network and local
service, etc.
With the local service information, the UE should be able to access the
hosting network and may further obtain more configuration for accessing the
local service from the hosting network.
### 6.15.3 Procedures
Figure 6.15.3-1: Local service provisioning via PLMN
1\. The AF in the local service platform subscribes to the Local Service
Subscription event notification from the 5GC. The AF indicates its local
service identifier in the subscription request.
2\. The NEF determines the AMFs that serve the areas where the local service
is available and subscribes to the Local Service Subscription event
notification from the AMF.
3\. The UE has obtained the local service related information such as local
service identifier through various channels that are out of 3GPP scope. The
local service subscription request may be triggered, for example, by the user
input or when entering the area where the local service is available.
4\. The UE initiates local service subscription by sending a NAS request to
the AMF. The UE indicates the desired local service identifier in the request.
5\. The AMF detects the Local Service Subscription event and sends the event
notification to the NEF.
6\. The NEF forwards the event notification to the AF in the local service
platform.
7\. If the subscription request is acceptable, the local service platform
generates the information necessary for accessing the local service, such as
the initial credentials.
8\. The local service platform uses the NEF/UDM \'s external parameter
provisioning procedure to deliver the local service access information to the
UE that has requested the subscription.
### 6.15.4 Impacts on Services, Entities, and Interfaces
NEF, UDM and AMF need to support new Local Service Subscription event.
AMF and UE need to support new NAS message or IE that indicates local service
subscription request.
## 6.16 Solution #16: Access to SNPN with NG-RAN and to WLAN Access Network
using the same credentials
### 6.16.1 Introduction
The architecture defined for non-3GPP access in PLMNs for trusted and
untrusted access relied on the assumption that the PLMN owns already a 3GPP
based CN and therefore the 3GPP identities and credentials are used when the
UE is also accessing over non-3GPP access e.g. WLAN. It is also assumed that
the PLMN offers services e.g. IMS voice/SMS that the UE cannot access directly
from the non-3GPP access and therefore it needs to connect to the 3GPP CN.
This is achieved for example through connection to N3WIF in the case of
untrusted non-3GPP access architecture or for Trusted Non-3GPP access using
the network elements of TNAP and TNGF.
These assumptions may though not hold true in \"enterprise\" environment that
will possibly deploy 3GPP based \"private cellular network\"/SNPN while it
already has a deployed WLAN infrastructure in place. For example in such
enterprise environment the identities and credentials used for WLAN
authentication could be already provisioned to the \"enterprise\" UEs before
the SNPN is deployed. In such network environment also access to specific
services can be restricted through using a VPN that runs on top of internet
connection provided from WLAN or using application layer authentication and
therefore there is possibly no need to have N3IWF in the \"untrusted non-3GPP
access\" architecture and there is no need to upgrade the existing WLAN
infrastructure to support what is required from TNAP and TGNF in the \"trusted
non-3GPP access\" architecture.
The other two aspects that need consideration is the access network selection
and mobility. For access network selection mechanisms standardised by 3GPP
e.g. using ANDSP need to be enhanced for Non-Seamless WLAN Offload or rely on
local UE configuration. Seamless mobility is not in scope of this solution
since many applications can also work with nomadic mobility.
The solution describes how UE can access an SNPN with NG-RAN on one hand and a
WLAN Access Network on the other hand using the same credentials. If the
credentials use AKA and USIM authentication and are stored in UDM, the
existing mechanisms for Non-Seamless WLAN Offload defined in TS 33.501 [10]
and TS 23.501 [3] apply.
If the credentials are stored in a AAA Server possibly new authentication
procedures and Non-Seamless WLAN Offload (NSWO) architecture need to be
defined. After being authenticated the UE does not have access to 5GC via WLAN
and it performs only Non-seamless WLAN offload traffic.
In summary this solution proposes the following enhancements:
(1) in the case of SNPN with non-3GPP credentials there has to be an
association between the WiFi and cellular (non-3GPP) credentials that are
stored in the cellular modem; and
(2) WLANSPs support for SNPN ID, GIN to identify WLAN AN associated with the
SNPN.
The details are described in the following clauses.
### 6.16.2 Functional Description
The solution focuses on the case that the credentials are stored in a AAA
Server and has the following properties:
\- The same AAA Server that is used for WLAN access authentication in a WLAN
Access Network is also used for primary authentication in SNPN with NG-RAN by
re-using the architecture defined for \"Credentials Holder for primary
authentication and authorization\" in clause 5.30.2.9.2 of TS 23.501 [3].
\- SWa interface that is based on Radius/Diameter is assumed between WLAN
Access Network and AAA-S
\- The UE uses the same permanent identity and credentials for primary
authentication in SNPN and for WLAN access authentication in WLAN Access
Network
\- For example the identity and credentials already used for WLAN access
authentication are also used in SNPN as SUPI in NAI format.
\- WLAN network selection can be based on enhanced WLAN Selection Policy
(WLANSP) rules from ANSDP used for Non-Seamless WiFi Offload i.e. as defined
in clause 4.8.2.1.6 of TS 23.402 [9] or local configuration in the UE.
NOTE: The WLANSP rules in Rel-17 are only supported for PLMNs.
\- The SNPN can configure the UE to use a specific identity (SUCI) and
credentials for specific WLAN networks, e.g. by associating the conditions
from WLANSP rules with a specific identity (SUPI) and credentials to be used
for the specific WLAN network e.g. based on the PreferredSSIDList or the
HomeNetwork attribute containing the SNPN-id .
\- The WLAN Access Network and the SNPN provide access to the same Data
Network e.g. internet or enterprise network
\- Optionally assignment of IP addresses in the WLAN Access Network and in the
SNPN can happen from same IP address pool, if needed, based on local policy.
Seamless mobility between the SNPN and the WLAN Access Network is not
supported by this architecture. Seamless mobility can be provided if
additionally N3IWF is deployed but this is out of scope of this specific
solution.
Figure 6.16.2-1: Access to SNPN with NG-RAN and to WLAN Access Network using
the same credentials
### 6.16.3 Procedures
#### 6.16.3.1 WLAN Authentication with AAA Server
The figure 6.16.3-1 describes the WLAN authentication using a AAA Server.
Figure 6.16.3-1: WLAN authentication sharing with AAA Server as in Figure
6.16.2-1
0) If the SNPN supports the architecture as in Figure 6.16.2-1 and wants the
UE to use the same credentials for access to a WLAN Access Network and to this
SNPN, then the SNPN configures in the UE the same permanent identity and
credentials for primary authentication with the SNPN and for WLAN access
authentication with the WLAN Access Network. WLAN network selection can be
based on enhanced WLAN Selection Policy (WLANSP) rules from ANSDP used for
Non-Seamless WiFi Offload i.e. as defined in clause 4.8.2.1.6 of TS 23.402
[9].
The SNPN can configure the UE to use a specific identity (SUCI) and
credentials for specific WLAN networks, e.g. by associating the conditions
from WLANSP rules that in Rel-17 are only supported for PLMNs with a specific
identity (SUCI) and credentials to be used for the specific WLAN network e.g.
based on the PreferredSSIDList or the HomeNetwork attribute containing the
SNPN-id.
Steps 1-8 are out of scope of SA2 and are shown for information:
1\. A connection is established between the UE and the WLAN AP, using a
specific procedure based on IEEE 802.11.
2\. The WLAN AP sends an EAP Identity Request to the UE.
3\. The UE always sends the SUCI in NAI format.
4\. The WLAN AP sends a SWa protocol message (could be over RADIUS or Diameter
interface) with EAP identity response, NAI containing the SUCI to AAA Proxy.
5\. If AAA Proxy is used it forwards the SWa message to AAA Server based on
the NAI of the SUCI.
6\. EAP authentication is performed. Any EAP method can be used for WLAN
authentication between the UE and the AAA Server.
7, 8. AAA Server performs successful authentication. When AAA Proxy is used
sends a SWa protocol message with EAP-success and possibly other security
parameters to WLAN. EAP-success message is forwarded from WLAN AP to the UE.
Editor\'s note: New authentication procedures and Non-Seamless WLAN Offload
(NSWO) architecture need to be defined. Security aspects are in SA WG3 scope.
#### 6.16.3.2 User plane aspects
The UE needs to acquire a local IP address on WLAN access that may optionally
be from same IP address pool, if needed, based on local policy.
Following same principles as in TS 23.501 [3] for UE supporting non-seamless
WLAN offload, while connected to WLAN access and registered in the SNPN via
NG-RAN, the UE can route specific data flows via the WLAN access without
traversing the 5GC of SNPN. The UE data flows are identified using URSP
configuration for Non-Seamless Offload, or UE Local Configurations as defined
in TS 23.503 [5]. For these data flows, the UE uses the local IP address
allocated by the WLAN access network and no IP address preservation is
provided between WLAN and SNPN.
### 6.16.4 Impacts on services, entities, and interfaces
UE:
\- uses the same permanent identity (SUCI) and credentials for primary
authentication in SNPN and for WLAN access authentication in a WLAN Access
Network.
\- UE is optionally configured to associate the conditions from WLANSP rules
that in Rel-17 are only supported for PLMNs with specific identity (SUPI) and
credentials to be used for the specific WLAN network e.g. based on the
PreferredSSIDList or the HomeNetwork attribute containing the SNPN-id.
Otherwise local configuration can be used.
\- New authentication procedures and Non-Seamless WLAN Offload (NSWO)
architecture need to be defined. Security aspects are in SA WG3 scope. WLAN AP
(informative impact).
\- Support compatible security mechanisms with 5GS.
\- SWa interface that is based on Radius/Diameter is assumed between WLAN
Access Network and AAA-S.
No other impacts in the UE, NG-RAN, and 5GC are identified.
## 6.17 Solution #17: UE Group specific NAS level congestion control
### 6.17.1 Introduction
One of the aspects of the Key Issue #6 is how to mitigate user plane and
control plane overload caused by a high number of UEs returning from a
temporary local access of a hosting network to their home network in a very
short period of time.
This solution describes how the existing mechanisms defined in clause 5.19.7.5
of TS 23.501 [3] can be enhanced to support NAS level congestion control for a
specific group of UEs that has temporarily accessed to a local service(s) and
has attempted to return their home network almost simultaneously.
### 6.17.2 Functional Description
The proposed solution focuses on using group specific NAS level congestion
control mechanism to mitigate user plane and control plane overload caused by
a higher number of UEs returning from a hosting network to their home network
in a very short period of time.
Group specific NAS level congestion control is performed at the 5GC only, and
it is transparent to UE. The AMF or SMF or both may apply NAS level congestion
control for a UE associated to an Internal-Group Identifier described in
clause 5.9.7 of TS 23.501 [3].
The home network associates UEs temporarily accessing localized services to an
Internal-Group Identifier, which can be specific to each local hosting network
and/or service, and applies UE group-specific NAS level congestion control to
mitigate user plane and control plane overload caused during the return of
UEs. The home network removes the UE from the group after it has returned to
the home network. If the UE did not return back to the home network after
accessing the localized service(s) or the UE is switched off before moving
back to the home network, the home network removes the UE from the group
sometime after the duration of the localized service(s) that UE has accessed.
This additional time to the localized service duration can be implementation
specific. If the UE has accessed more than one localized service, the longest
localized service duration will be considered.
### 6.17.3 Procedures
The home network (HPLMN) and/or local hosting network (LHN) may group the UEs
based on the information:
\- when the UE-initiated de-registration request message sent from UE to its
HPLMN in order to access to local services provided by a LHN, UE indicates in
the de-registration message (i.e. \"hosting network access\" or \"5GS local
network access indication\") that the de-registration request is to access to
local services provided by a LHN; or
\- when the network-initiated de-registration request message sent from
network to the UE in order to enable the UE to register with a LHN to access
to local services, the network indicates in the de-registration message (i.e.
\"hosting network access\" or \"5GS local network access indication\") that
the de-registration request is to enable UE to register with a LHN to access
to local services.
The home network (HPLMN) may utilize:
\- an application function (AF) residing in the local hosting network(s); or
\- an exposure framework from local hosting network(s),
to receive information on users who requested access or has accessed to the
local service(s) in order to associate users to an Internal-Group Identifier
specific to local hosting network(s) and/or local service(s).
If the local hosting network does not support an AF and an exposure framework
to the home network, the home network uses UE-/network-initiated de-
registration request message approach along with any other selection and
access mechanisms proposed as part of KI#4. If the local hosting network
supports an AF and an exposure framework, the home network uses the
information provided by the local hosting network to associate users to an
Internal-Group Identifier specific to local hosting network(s) and/or local
service(s).
Editor\'s note: It is FFS whether and how new mechanism(s) developed for KI#5
is considered in this solution.
Then, the network (AMF or SMF) applies UE group-specific NAS level congestion
control to manage the return of UEs from the LHN to their home PLMN by
spreading out the registration attempts over time and limiting the number of
UEs attempting to register simultaneously when the UEs accessed to the local
service(s) provided by the LHN(s) are returning back to their home network.
### 6.17.4 Impacts on services, entities and interfaces
UDM:
\- Support for local hosting network and/or local service information in the
Internal-Group Identifier.
UE:
\- Shall support configuration and handling of the localized service related
de-registration information (i.e. \"hosting network access\" or \"5GS local
network access indication\").
AMF:
\- Shall support localized service related de-registration information element
(i.e. \"hosting network access\" or \"5GS local network access indication\").
AMF/SMF:
\- Shall apply Group Specific NAS level congestion control when UEs
temporarily accessed to local service(s).
NEF:
\- Shall support exposure from local hosting networks
## 6.18 Solution #18: Steering of UE to select hosting network for obtaining
localized services
### 6.18.1 Introduction
One of the aspects of the key issue #5 is how the network would determine the
need to steer or instruct the UE to hosting network and other aspect is on how
actually network would steer the UE toward the hosting network.
The proposed solution focuses on the case when based on location and time,
certain localized services are available, which are being provided by the
hosting network and using \"Steering of Roaming\" mechanism to allow service
provider (PLMN or 3rd Party service provider) to update the UE with required
information on availability of hosting networks along with the services they
are providing. This information will assist the UE to make the switch to
appropriate hosting network for obtaining localized services.
Steering of Roaming information container would carry the \"operator defined
hosting network selector list\", which will assist the UE to switch to hosting
network for obtaining localized services.
### 6.18.2 Functional Description
The proposed solution will be using similar concept and mechanism to
\"Steering of Roaming\" as defined in TS 23.122 [6].
As per the service level agreement between the PLMN operator and hosting
network operator/service provider, UE\'s HPLMN may create a \"operator defined
hosting network selector list\" for the purpose of automatically steering the
UE between PLMN and hosting networks.
The \"operator defined hosting network selector list\" may consist of
following information:
\- A prioritized list of hosting network identifiers (SNPN IDs).
\- A validity time window may be associated with the hosting network
identifier i.e. SNPN ID in the \"operator defined hosting network selector
list\".
\- A valid list of tracking areas (TAs) may be associated with the hosting
network identifier i.e. SNPN ID in the \"operator defined hosting network
selector list\". The total TAs in this list also indicates the service area of
the local services that the UE is allowed to access.
Also Home network (H-UDM) may decide to subscribe when a particular UE enters
a specific area (Service area of a Hosting Network which may be hosting a
particular event). This location information may be coordinated to the Home
network during the service agreement of Hosting network and Home network and
the Serving network, so that the NFs in the specific area of the serving
network can reflect availability of hosting network which providing the
localized services.
### 6.18.3 Procedures
Figure 6.18.3-1 shows the flow of steering of roaming information container
with \"operator defined hosting network selector list\" to assist in UE with
selection of hosting network. This procedure can be triggered during or after
registration, UE\'s location, and time window are critical factors in deciding
when this procedure is triggered by the UDM/SoR-AF/SP (Service Provider).
Figure 6.18.3-1: Steering the UE with hosting network information
Procedure:
1\. The SoR-AF/SP to HPLMN UDM: Nudm_ParameterProvision is sent to the HPLMN
UDM to trigger the update of the UE with new list of \"operator defined
hosting network selector list\" or to trigger subscribing for Exposure
services for interested location area.
2\. Namf_EventExposure_Subscribe : H-UDM subscribes for notification for UE
moving in or out of the subscribed \"Area Of Interest\"
3\. UE moves to the area of interest
4\. UE/NG-RAN does a mobility update/location reporting to the Serving Network
AMF.
5\. Namf_EventExposure_Notify: AMF reports the event specific parameters that
were subscribed to the H-UDM.
6a-b. H-UDM may provide the info to the SoR-AF that may take decision to
provide UE the Hosting Network information.
7\. The HPLMN UDM to the AMF: The UDM notifies the changes of the user profile
to the affected AMF by the means of invoking Nudm_SDM_Notification service
operation.
8\. The AMF to the UE: the AMF sends a DL NAS TRANSPORT message to the served
UE. The AMF includes in the DL NAS TRANSPORT message the steering of roaming
information received from the UDM.
9\. UE: Upon receiving the SoR information, UE shall perform the security
check on it.
10\. The UE to AMF: If the UDM has requested an acknowledgement from the UE in
the DL NAS TRANSPORT message, the UE sends an UL NAS TRANSPORT message to the
serving AMF with an SOR transparent container including the UE
acknowledgement.
11\. The AMF to the HPLMN UDM: If the UL NAS TRANSPORT message with an SOR
transparent container is received, the AMF uses the Nudm_SDM_Info service
operation to provide the received SOR transparent container to the UDM.
12\. The HPLMN UDM to the SOR-AF: HPLMN UDM informs the SoR-AF/Service
Provider (SP) about the successful delivery of the SoR information (i.e.
\"operator defined hosting network selector list\").
13\. The UE will use the received steering of roaming information to assist in
selection of the hosting network for obtaining localized services. The UE
would select an SNPN if available and allowable (e.g. the time and location is
within the validity time window and valid list of TA associated with the SNPN)
for obtaining localized services, identified by an SNPN identity contained in
the \"operator defined hosting network selector list\" in priority order.
Editor\'s note: Switch between SNPN/PLMN access mode for network selection is
FFS.
### 6.18.4 Impacts on services, entities, and interfaces
UDM:
\- Support for additional list (i.e. \"operator defined hosting network
selector list\") in steering of roaming information.
SoR-AF/SP:
\- Support for additional list (i.e. \"operator defined hosting network
selector list\") in steering of roaming information.
UE:
\- Shall support configuration and handling of the new list (i.e. \"operator
defined hosting network selector list\").
\- Use the \"operator defined hosting network selector list\" for selection of
hosting network.
## 6.19 Solution #19: Access to SNPN services via Untrusted non-3GPP access
network with underlay/overlay determination
### 6.19.1 Introduction
This solution is based on solution #2 for the UE can access SNPN services via
Untrusted non-3GPP access network with the modifications described in this
clause.
Since Rel-15, the access restriction per access type can be performed based on
per UE subscription and network policies configured by the operator, e.g.
whether the UE is allowed to access 5GCN via 3GPP access or non-3GPP access,
or both. If access via one access type is not allowed, the AMF rejects the UE
request with an appropriate cause values as per specified in stage 3. For
accessing the SNPN, in some cases, the SNPN may perform access control based
on the exact access type of whether a UE accessing the SNPN via a PLMN or via
non-3GPP access (e.g. WLAN). Consequently in order to enable different access
control for the following scenarios:
\- To allow or forbidden the access to the SNPN via direct N3GPP access, e.g.
a WLAN deployed in the SNPN.
\- To allow or forbidden the access to the SNPN via indirect N3GPP access,
e.g. via PLMN as defined in clause 5.30.2.8 and Annex D, clause D.3 of TS
23.501 [3] specify how the UE can access SNPN services via a PLMN.
It is required to distinguish the scenarios otherwise the restriction
\"Non-3GPP access to 5GCN not allowed\" or lack of restriction applies to both
scenarios since from the point of view of SNPN they are both a N3GPP accesses.
### 6.19.2 Functional Description
The functional descriptions in clause 6.2.2 applies with the following
modifications:
1) The RAT type is extended adding the \"Untrusted Non-3GPP over underlay 3GPP
access\" to indicate when the UE accesses to N3IWF via underlying network 3GPP
network as defined in Clause 5.30.2.8 and Annex D, clause D.3 of TS 23.501 [3]
in contrast the RAT-type \"Untrusted N3GPP\" indicates when the UE access via
a N3GPP network, such as WLAN.
2) The N3WIF determines the access network information based on the local
configuration (e.g. IP range for specific PLMN in service agreements) and the
UE\'s local IP address used to reach the N3IWF. The N3IWF provides the access
network information to AMF in addition to the UE\'s local IP address used to
reach the N3IW provided by N3IWF to AMF in \"N3IWF user location information
\"IE in N2.
Editor\'s note: It is FFS how N3IWF determines the access network information.
3) The UE may include an access network information (e.g. access network =
PLMN) in the NAS message Registration Request when performs the registration
to N3IWF\'s SNPN.
4) The AMF of the SNPN uses the access network information provided by UE and
the access network information provided by N3IWF to determine a more precise
Untrusted Non-3GPP RAT type, i.e. \"Untrusted Non-3GPP over underlay 3GPP
access\" or \"Untrusted N3GPP\".
5) The AMF of the SNPN authorizes UE\'s access network information and rejects
UE with an appropriate cause code per UE subscription and network policies
configured by the operator.
6) Based on the reject cause code received from SNPN, the UE disables the N1
mode capability for the \"Untrusted Non-3GPP over underlay 3GPP access\" of
the SNPN; however, the UE can still attempt direct connection to SNPN via
Untrusted non-3GPP access networks when needed.
### 6.19.3 Procedures
The functional descriptions in clause 6.2.3 applies with the following
additions:
\- In step 5 of figure 4.12.2.2-1 of TS 23.502 [4] (for Registration procedure
to Untrusted N3GPP) The UE may include an access network information (e.g.
access network = PLMN or WLAN) in the NAS Registration Request when
registering in SNPN over underlay PLMN.
\- In step 6a of figure 4.12.2.2-1 of TS 23.502 [4] The N3IWF of SNPN
determines the Access network type as described in clause 6.19.2, bullet 2).
\- Step 6b of figure 4.12.2.2-1 of TS 23.502 [4] The N3IWF send the access
network information to the AMF of SNPN.
\- AMF determines the RAT type \"Untrusted Non-3GPP over underlay PLMN\" or
\"Untrusted N3GPP\" as described in clause 6.19.2, bullet 4).
\- The AMF performs access restriction based on the access information from
both UE and N3IWF, and rejects the UE with proper cause code, e.g. access SNPN
via PLMN is not allowed, so the UE disables the N1 mode capability for the
underlay PLMN access based on such cause code; but the UE can still attempt
direct connection to SNPN via Untrusted non-3GPP access networks when needed.
### 6.19.4 Impacts on services, entities, and interfaces
The impact descriptions in clause 6.2.4 applies with the following additions:
UE impact:
\- Ability to determine it is accessing the SNPN via an underlay PLMN and
include an access network information in the NAS message to the AMF of SNPN.
\- Ability to disable the N1 mode capability for the underlay PLMN access with
the appropriate cause code received from SNPN over underlay PLMN.
SNPN\'s N3IWF impact:
\- Ability to determine it is receiving a NAS PDU from a specific IP address
which is identified as a UPF of a PLMN, and include an access network
information in the N2 message and send it to AMF of SNPN.
SNPN\'s AMF impact:
\- The AMF uses the access network information to determine a more precise
Untrusted Non-3GPP RAT type, i.e. Untrusted Non-3GPP over underlay PLMN, and
rejects UE SNPN access over underlay PLMN with appropriate cause code.
NOTE: It is up to RAN WG3 to decide how NGAP is extended.
## 6.20 Solution #20: Access SNPN via 3GPP and N3GPP AN using same credentials
and credential holder
### 6.20.1 Introduction
This solution addresses KI#2.
The solution defines how the same credentials from a credential holder
external to the SNPN can be leveraged for devices accessing SNPN via 3GPP and
non-3GPP access network (both connected to 5GC).
Many enterprise networks have existing deployments with non-3GPP network
infrastructure (WLAN or Wireline access) using the AAA server to authenticate
the end-devices. The addition of SNPN deployments could leverage the already
provisioned identities and credentials to authenticate devices accessing SNPN
via 3GPP and non-3GPP access networks both connecting to 5GC via a credential
holder (AAA server) external to the SNPN.
### 6.20.2 Functional Description
\- The same AAA Server (external credential holder) is used for primary
authentication of a UE accessing the SNPN via a 3GPP or non-3GPP access
network (e.g. WLAN or Wireline access network) re-using the architecture
defined for \"Credentials Holder for primary authentication and
authorization\" as defined in clause 5.30.2.9.2 of TS 23.501 [3]. A N3GPP
device accessing the SNPN via non-3GPP access network (e.g. WLAN or Wireline
access network) can also leverage the same external credential holder for
authentication.
\- The UE connecting via the 3GPP access or Trusted and Untrusted Non-3GPP
access network, the 5G_RG and FN-RG connected via Wireline access to the SNPN
uses the same permanent identity and credentials. The existing identity and
credentials used for WLAN and Wireline access authentication can be re-used
for SNPN access using a SUPI in NAI format as defined in clause 28.7.2 of TS
23.503 [5].
\- The SNPN access via NG-RAN and the non-3GPP network (e.g. WLAN or Wireline
access network) provides access to the same Data Network e.g. internet or
enterprise network.
\- Seamless mobility between the NG-RAN and the Trusted and Untrusted Non-3GPP
access network, the 5G_RG and FN-RG connected via Wireline access for
accessing the SNPN is supported by this architecture.
Editor\'s note: The scenario of UE and N3GPP device connected to 5GC via
5G-RG/FN-RG, is FFS. This scenario shall take into account the conclusion of
5WWC SID on the support of the device behind an RG.
Figure 6.20.2.1: Access to SNPN via 3GPP and non-3GPP access networks (both
connected to 5GC) using the same credentials from an external credential
holder
### 6.20.3 Procedures
0) If the SNPN supports the architecture as in Figure 6.20.2-1 and wants the
UE to use the same credentials for accessing SNPN via 3GPP or Trusted and
Untrusted Non-3GPP access network and wireline access network , then it is
configured with the same permanent identity and credentials for primary
authentication with the NG-RAN and the non-3GPP access network (Trusted and
Untrusted Non-3GPP access network, and wireline access network).
1) A connection is established between a UE towards 5GC via the untrusted
non-3GPP access using the procedures as defined in clause 4.12 of TS 23.502
[4] or a connection is established between a 3GPP capable device towards 5GC
via the trusted non-3GPP access using the procedures as defined in clause
4.12a of TS 23.502 [4] or a connection is established between the UE behind
5G_RG / FN-RG towards 5GC via the wireline access using the procedures as
defined in clause 4.10 of TS 23.316 [8].
2) A connection is established between a UE and the SNPN network via NG-RAN
and 5GC as defined in clause 5.30.2 of TS 23.501 [3].
The same credentials are used for authentication by an external credential
holder (AAA server) for primary authentication of a device accessing the SNPN
via 3GPP or the non-3GPP access network (e.g. WLAN or Wireline access
network), re-uses the architecture defined for \"Credentials Holder for
primary authentication and authorization\" as defined in clause 5.30.2.9.2 of
TS 23.501 [3].
A UE may establish connection towards SNPN 5GC using either or both 3GPP and
non-3GPP access network (Trusted and Untrusted Non-3GPP access network, and
wireline access network) simultaneously.
### 6.20.4 Impacts on services, entities, and interfaces
UE:
\- Use the same permanent identity and credentials for primary authentication
for accessing the SNPN via NG-RAN and the non-3GPP network (Trusted and
Untrusted Non-3GPP access network, and wireline access network).
No other impacts in the UE, NG-RAN, and 5GC are identified.
## 6.21 Solution #21: Support for NSWOF in SNPN
### 6.21.1 Introduction
This solution addresses KI#2.
The solution defines how the same credentials can be leveraged for devices
accessing SNPN via NG-RAN and 5GC, and non-3GPP access network using Non-
Seamless WLAN Offload Function (NSWOF). If a device is connected via WLAN for
the non-3GPP access network, NSWOF interfaces to the WLAN access network using
the SWa interface as defined in TS 23.402 [9], and interfaces to the AUSF
using the Nausf Service Based Interface (SBI) performing the protocol
translation and the AUSF discovery.
If a device is connected via a residential gateway (e.g. FN-RG or 5G-RG),
NSWOF support for wireline access that is being addressed in Rel-18 5WWC (e.g.
Solution#22 in TR 23.700‑17 [18]) is assumed and conclusion of TS 23.700‑17
[18] will be taken into account and possible alignment will be considered. For
example, NSWOF of wireline access interfaces to a 5G-RG using a SWa interface
as referred in TR 23.700‑17 [18]. Based on this solution, the device
connecting to 5G-RG is authenticated and authorized by the HPLMN of this
device. The authentication procedure does not require 5GS registration because
it is based on the NSWO authentication procedure specified in Annex S of TS
33.501 [10]\".
### 6.21.2 Functional Description
\- The architecture to support authentication via NSWOF will be as defined in
clause 4.2.15 of TS 23.501 [3].
\- The procedures for AUSF discovery and selection by NSWOF will be as defined
in clause 6.3.4 of TS 23.501 [3].
\- The functionality of NSWOF and the procedures applied for supporting WLAN
connection or wireline connection using 5GS credentials for Non-seamless WLAN
offload may be as defined in TS 33.501 [10] (e.g. in Annex S).
\- When the UE wishes to use 5G NSWO to connect to the non-3GPP network (e.g.
WLAN or Wireline access network) using its 5GS credentials associated with the
SNPN, the NAI format for 5G NSWO access used will be as defined in clauses
28.7.6 and 28.7.7 of TS 23.503 [5].
\- The SNPN and the non-3GPP network (e.g. WLAN or Wireline access network)
provides access to the same Data Network e.g. internet or enterprise network
\- Seamless mobility between the SNPN and the non-3GPP network (e.g. WLAN or
Wireline access network) is not supported by this architecture.
Figure 6.21.2.1: Support for NSWOF for SNPN
### 6.21.3 Procedures
If the SNPN supports the architecture as in Figure 6.21.2-1, the UE can use
the same permanent identity and credentials that are used for primary
authentication with the SNPN to connect to the non-3GPP network (e.g. WLAN or
Wireline access network) using the 5G NSWOF that interacts with AUSF within
the 5GC of SNPN network to authenticate the UE.
1) A connection is established between a UE and the SNPN network via NG-RAN
and 5GC as defined in clause 5.30.2 of TS 23.501 [3].
2) A connection is established between a UE and the non-3GPP network (e.g.
WLAN or Wireline access network) that uses the same permanent identity and
credentials that are used for primary authentication with the SNPN using the
5G NSWOF as defined in Annex S of TS 33.501 [10].
Editor\'s note: A procedure of NSWO for wireline and handling of N3GPP devices
behind the RG will be dependent on the conclusion of TR 23.700-17 [18] and
possible alignment will be considered.
The UE may establish connection towards either or both the non-3GPP network
(e.g. WLAN or Wireline access network) and SNPN via NG-RAN and 5GC
simultaneously.
### 6.21.4 Impacts on services, entities, and interfaces
UE:
\- Shall be able to support NSWO authentication (as defined in Annex S of TS
33.501 [10]) using the same permanent identity and credentials for primary
authentication in SNPN via NG-RAN and 5GC, and the non-3GPP network (e.g. WLAN
or Wireline access network).
RG:
\- Shall be able to support NSWO authentication (e.g. leveraging the NSWO
architectures defined for wireline access in Rel-18 5WWC) using the same
permanent identity and credentials for primary authentication in SNPN via NG-
RAN and 5GC, and the non-3GPP network (e.g. WLAN or Wireline access network).
No other impacts in the UE, NG-RAN, and 5GC are identified.
## 6.22 Solution #22: Hosting network to provide localized service based on
default credentials
### 6.22.1 Introduction
The solution addresses key issue #3 Enabling SNPN as hosting network for
providing access to localized services.
The solution aims to enable hosting network to provide the localized service
for the UE.
### 6.22.2 Functional Description
In this solution, it is assumed that UE has default credentials that can be
used in the hosting network. Hosting network broadcasts a dedicated Hosting
networking service indication to show that this NPN can provide hosting
networking for localized services.
The localized services information are pre-configured in AMF of hosting
network.
For the network selection aspect, there are following assumptions:
1) If there is some service agreement between hosting network and home
network, so that the UE can be successfully authenticated by the hosting
network by using credentials of home network. Automatic network selection is
performed
2) If there is no service agreement between hosting network and home network,
the hosting network performs authentication by using the UE\'s default
credentials. After successful authentication, hosting network can allow the UE
to initiate restricted PDU session to the localized service, and may perform
secondary authentication during the PDU session establishment. Manual network
selection is performed.
Editor\'s note: Details of the restricted PDU session are FFS.
Editor\'s note: the nature of the default credentials and how to perform the
authentication by using the default credentials in the hosting network is FFS.
How to pre-configure the default credentials is FFS. Where the subscription
corresponding to the default credentials is stored is FFS. Whether further
security is needed should depend on SA WG3.
### 6.22.3 Procedures
Figure 6.22.3-1: Hosting network providing localized service
0\. SNPN network broadcasts a Hosting Network Service Indication, to say that
the hosting network can support the UE to access to localized service.
1\. UE performs network selection and selects the hosting network, based on
the pre-configuration and broadcasting information from hosting network.
If there is no service agreement between hosting network and home network,
manual network selection is performed.
2\. UE initiates the registration request with UE\'s information and Hosting
Network Service Indication to gNB.
3\. gNB selects the AMF that supporting Hosting Network Service based on the
indication in step 2.
4\. AMF performs the authentication and authorization by using the credentials
from home network if there is some service agreement between hosting network
and home network.
AMF performs authentication and authorization by using the default credentials
pre-configured in the UE, when there is no service agreement between hosting
network and home network.
Editor\'s note: What exactly are the \"hosting network default credentials\",
how they are used and who/how they are configured in the UE is FFS.
5\. AMF sends UE the localized services information that can be provided by
the hosting network when AMF determines to accept UE\'s request. The localized
information may include IP address/FQDN/DNN of the localized service.
6-7. AMF sends the registration accept to UE via gNB, including localized
service information.
8\. UE initiates the PDU Session to dedicated DNN that can provide expected
localized service, if the expected localized service is in the received
localized list if the list is available.
### 6.22.4 Impacts on services, entities, and interfaces
Network impact:
\- AMF configured with localized service information.
\- gNB broadcasts the Hosting Network Service Indication.
Editor\'s note: Default credential aspects, restricted PDU session aspects are
FFS.
## 6.23 Solution #23: Solution for obtaining hosting network selection and
access information - PNI-NPN
### 6.23.1 Introduction
This solution solves several requirements listed in Key Issue#4.
This solution is used in the scenario when the hosting network is an PNI-NPN.
When a UE accesses localized service, Network Slice-Specific Authentication
and Authorization or Secondary authentication/authorization is performed
between the UE and the Localized service provider.
In this solution, a UE receives hosting network selection and access
information from its home PLMN, after the UE subscribes the Localized service
from the Localized service provider.
The hosting network selection and access information extends the current CAG
information (e.g. Allowed CAG ID list) by including validity condition
information when and where the PNI-NPN provides service.
### 6.23.2 Functional Description
In this solution, the UE subscribed service from the Localized service
provider (LSP). The UE is provisioned with credential which is used to access
the Localized service using current mechanism defined in clause 5.39 of TS
23.501 [3]. The credential is used during Network Slice-Specific
Authentication and Authorization or Secondary authentication/authorization
when the UE accesses localized service. The UE may obtain the PVS address of
the LSP with some out of 3GPP scope mechanisms, e.g. from the ticket the user
bought for a football match.
The LSP notifies the UE\'s home PLMN that the UE is already provisioned with
the corresponding credential for accessing the Localized service. The UE\'s
UDM updates UE\'s subscription with the CAG ID and optionally DNN or S-NSSAI
corresponding to the Localized service provider. The UDM updates UE\'s
configuration using UE Configuration Update procedure.
In the scenario of hosting network is a PNI-NPN, the Hosting Network Selection
and Access Information consists the following information:
\- Hosting Network Identifier, e.g. CAG ID and corresponding PLMN ID.
\- The time condition information when the hosting network provides access
service.
\- The location condition information where the hosting network provides
access service.
The UE selects a hosting network when the time and location condition
information is satisfied.
### 6.23.3 Procedures
Figure 6.23.3-1: UE receives hosting network selection and access information
1\. The UE subscribes a localized service from the Localized service provider
(LSP). The UE is provisioned with credential which is used to access the
Localized service using current mechanism defined in clause 5.39 of TS 23.501
[3].
NOTE 1: The UE may obtain the PVS address of the LSP with some out of 3GPP
scope mechanisms, e.g. from the ticket the user bought for a football match.
2\. The LSP App sends Nnef_ParameterProvision_Create message to the NEF of the
UE\'s home PLMN, including GPSI of the UE, Successful provision indication and
validity condition of the Localized service. One of DNN, S-NSSAI, or CAG ID
and PLMN ID corresponding to the Localized service is also included. The
Successful provision notification indicates that the UE is provisioned with
credential for accessing the Localized service. The validity condition of the
Localized service includes time and location condition information of the
Localized service.
NOTE 2: How the LSP App can obtain the home network of the UE is out of 3GPP
scope, for example, from the UE\'s mobile phone number.
3\. The NEF of the home network of the UE sends Nudm_ParameterProvision_Create
to the UDM of the home network of the UE, including GPSI of the UE, the
Successful provision indication, validity condition of the Localized service.
One of DNN, S-NSSAI, or CAG ID and PLMN ID corresponding to the Localized
service is also included if received in step 2.
The UDM updates the UE\'s subscription by adding the DNN or the S-NSSAI
corresponding to the Localized service. The UDM also updates the UE\'s Allowed
CAG ID list by adding the CAG ID and PLMN ID corresponding to the Localized
service with validity condition.
4\. The UDM sends the updated Allowed CAG ID list and optionally the updated
DNN, S-NSSAI to the AMF.
5\. The AMF sends the updated Allowed CAG ID list and optionally the updated
DNN, S-NSSAI to the UE.
Step 4-5 can use the UE Configuration Update procedure.
6\. For automatically network selection, and manual network selection, the UE
performs the existing mechanism as defined in TS 23.122 [6] with the following
difference: the hosting network ID (i.e. CAG ID) in the Allowed CAG ID list is
taken into account when the corresponding time and location condition
information is satisfied.
### 6.23.4 Impacts on services, entities, and interfaces
UE impact:
\- Ability to receive Allowed CAG ID list with validity condition
corresponding to a CAG ID.
\- Ability to perform CAG selection based on the received Hosting Network
Selection and Access Information.
Home Network impact:
\- NEF: Ability to receive Successful provision indication and one of DNN,
S-NSSAI, or CAG ID and PLMN ID corresponding to the Localized service,
validity condition of the Localized service from the local service provider.
\- UDM: Ability to receive Successful provision indication and one of DNN,
S-NSSAI, or CAG ID and PLMN ID corresponding to the Localized service,
validity condition of the Localized service from the NEF and updates UE\'s
subscription accordingly.
## 6.24 Solution #24: Localized service data provisioning via UDR
### 6.24.1 Introduction
This solution addresses requirements listed in Key Issue #4. It proposes to
use network exposure for provisioning network with information related to
localized service and use UE policy for delivering the information to UE.
This solution covers the function described in solution #7 step H4.
### 6.24.2 Functional Description
There are many characteristics to describe a localized service, e.g.:
\- the name and identifier of the localized service;
\- time validity;
\- location validity;
\- a service provider group identifier for end users who will be offered with
localized service;
\- information related to hosting network(s), such as network identity, cost
and quality of the localized service, S-NSSAI/DNN to be used for accessing the
localized service, valid credential types, etc.
It is assumed that UE is usually registered in a serving network prior to
registering to hosting network for localized service. Localized service
provider can have business relationship with multiple hosting network
operators, so that there could be more than one hosting network providing
access to the localized service. After the interactions between localized
service provider and the hosting network operators (see solution #7 step H1
and H2), localized service provider has gathered all the characteristics of a
localized service and is able to provision the data to the UE\'s serving
network (e.g. HPLMN, VPLMN).
When the serving network is provisioned with data related localized service,
UE can obtain the data via UE policy and use the data to perform selection of
hosting network and localized service.
NOTE: How does the UE make use of the localized service data is not discussed
in this solution.
### 6.24.3 Procedures
#### 6.24.3.1 Provisioning of non-UE specific localized service data to
networks
Figure 6.24.3.1-1: Provisioning of non-UE specific localized service data to
networks
The above figure reuses the signalling flow defined in clause 4.15.6.7 of TS
23.502 [4], with the following considerations:
\- AF is an external party to the network, which has business agreement with
the localized service provider. The AF represents the localized service
provider who has gathered all the characteristics of a localized service as
described in clause 6.24.2.
\- The name/identifier of the localized service can be used as service
description in the AF request to NEF.
\- Time/location validity and information related to hosting network(s) are
the localized service specific information which will be provisioned to
serving network and delivered to UE.
\- Nnef_ServiceParameter_Create service operation is not-UE specific and
therefore does not include any specific UE Identity or External Group
Identifier.
\- Optionally, a service provider group identifier can be allocated by the AF
for identifying a determined group of end users who will be offered with
localized service, and thus be provided with the localized service data.
\- AF can invoke this procedure with multiple networks that have business
agreement with the localized service provider.
\- The localized service data is stored in UDR as \"Application Data\".
#### 6.24.3.2 Delivering localized service data to the UE via UE policy
Figure 6.24.3.2-1: Delivering localized service data via UE policy
The procedure to deliver the localized service data towards UE is described as
below:
0\. UE has registered in a network, and optionally UE policy association is
established and PCF has subscribed to be notified of the reception of the UE
Policy container (see step 0a in clause 4.2.4.3 of TS 23.502 [4]).
During the registration procedure, AMF fetches the subscription data from UDM
and verifies that UE is allowed to use localized services. Then, AMF indicates
to the UE there is support of provisioning localized service data via
successful registration.
1\. End user is motivated by service provider to seek for localized service,
for example scan a QR code, or login a web page, etc.
2\. Based on the knowledge that the current serving network supports localized
service data provisioning, the UE requests such data from the serving network
reusing the procedure defined in clause 6.2.4 of TS 23.287 [13].
The UE\'s request includes information for the network to determine what
localized service information to provide to the UE e.g. service identifier
associated with the localized service, and/or a \"filter\" e.g. free text name
of localized service, location, time, service provider group identifier.
NOTE 1: The information included in the UE request message is obtained via
mechanisms outside of 3GPP scope.
3a. If there is no UE policy association established, AMF sends
Npcf_UEPolicyControl_Create request to establishes UE policy association with
PCF, including the UE policy container.
3b. If there is UE policy association has been established and PCF has
subscribed to be notified of the reception of the UE policy container, AMF
sends the Namf_Communication_N1MessageNotify request to the PCF including the
UE Policy Container received from UE.
4\. PCF queries UDR for the data stored for localized service, based on the
information provided by the UE (e.g. localized service identifier, a
\"filter\", etc).
NOTE 2: If the current serving network is different than the home network, in
addition to localized service data received from the PCF in the home network,
the PCF in the serving network can also provide the UE with localized service
data based on information stored in the serving network UDR.
5\. PCF receives the localized service data from the UDR. The data is
provisioned and stored in UDR as described in clause 6.24.3.1.
PCF can use service provider group identifier to verify if UE belongs to the
correct group of receiving the localized service.
6a. If step 3a is executed, then PCF accepts the UE policy association
establishment, and then steps 3-5 in clause 4.2.4.3 of TS 23.502 [4] are used
to deliver the UE policy to UE.
6b. If step 3b is executed, then PCF provisions the UE with the localized
service data as part of new UE Policies for localized services, re-using
procedure defined in clause 4.2.4.3 of TS 23.502 [4].
### 6.24.4 Impacts on services, entities, and interfaces
AF/NEF/UDR:
\- Support provisioning and storing of localized service data.
UE/PCF:
Support UE triggered localized service data delivery via UE policy delivery
procedure.
AMF:
\- Indicate to the UE the network support provisioning of localized service
data via NAS.
UDM:
\- Indicate to AMF that UE is allowed to use localized services via
subscription data.
## 6.25 Solution #25: Temporary network reselection for localized service
support
### 6.25.1 Introduction
This solution addresses the scenario of when the UE has subscribed to a
localized service in a hosting network and a temporary network reselection
procedure from a home/or other network to a hosting network is needed. It
describes a temporary network reselection procedure that enables the UE to
enjoy localized services and covers Key Issue #4 and #6.
This solution details the step H5 and H8 in solution #7.
### 6.25.2 Functional Description
The solution assumes that the UE is aware of which hosting network to use for
the desired localized service. This solution facilitates a temporary change in
the network priorities for network selection or a temporary change of SNPN
access mode. Additionally, it enables the home network (i.e. HPLMN, subscribed
SNPN) to authorize the UE to use this reselection procedure. There are
criteria associated with the temporary reselection procedure (e.g. the start
times and end times), so that the temporary reselection procedure is only
applicable when the criteria are met, otherwise the existing network selection
procedures defined in TS 23.122 [6] apply.
It would enable:
\- the UE to perform a network reselection to the hosting network from a
network which was selected based on the existing network selection procedures
as described in TS 23.122 [6] before the beginning of the localized service.
\- the UE to leave the hosting network and select a new network using existing
network selection procedures as described in TS 23.122 [6] after the localized
service is stopped.
\- the UE to switch the SNPN access mode.
### 6.25.3 Procedures
#### 6.25.3.1 Overview of Temporary Network Reselection (TNR) to enable
localized services
Figure 6.25.3.1-1: Temporary Network Reselection (TNR) procedure to enable
localized services
The following steps describe how to use Temporary Network Reselection (TNR)
procedure to enable localized services as shown in Figure 6.25.3.1-1:
1\. The UE is already registered in a network, which was selected based on
existing network selection procedures defined in TS 23.122 [6].
2\. The UE selects a localized service (e.g. the user selects a Localized
service, the application requests a Localized service) and is aware of which
hosting network to use for this localized service.
NOTE 1: How the UE gets aware of which hosting network to use for the
localized service is assumed to be described in other solutions.
3\. The UE and the home network (i.e. HPLMN or subscribed SNPN) decides to
enable TNR procedure.
The home network can authorize its subscriber to use the TNR, e.g.:
i. via pre-authorization for the UE based on UE configuration; or
ii. via UE request as described in clause 6.25.3.2.
4\. The UE stores the current registered network, and activates TNR when the
criteria associated with the TNR are met.
The TNR can be achieved, in one way, by reprioritizing (or reordering) the
list of networks that are made available to the UE, with the hosting network
as the top priority.
Another way is to avoid the automatic network selection to the higher priority
networks, e.g. by avoiding triggering of periodic checks for higher
prioritized networks when the UE is in a VPLMN (e.g. hosting network is a PNI-
NPN which is different than the serving PLMN and has a lower priority than the
serving PLMN).
The TNR can also trigger the UE to switch the SNPN access mode if it is needed
(e.g. hosting network is an SNPN while the UE is currently registered in a
PLMN).
The criteria associated with the authorized TNR can include, e.g. start/stop
time, location, availability of home network services, etc.
5\. The UE starts and stops using the localized service.
6\. The UE deactivates the TNR when the criteria are no longer met, and
selects a new network based on the existing network selection procedures
defined in TS 23.122 [6].
NOTE 2: It is up to CT1 to determine whether and how the previous registered
network stored in step 4 is used in the network selection after UE deactivates
the TNR.
#### 6.25.3.2 Home network authorization via Steering of Roaming (SOR)
procedure
Figure 6.25.3.2-1: Home network authorizes Temporary Network Reselection (TNR)
The temporary network reselection (TNR) can be requested by the UE and be
authorized by the home network, reusing Steering of Roaming (SOR) procedure
defined in TS 23.122 [6] with additions listed below.
Figure 6.25.3.2-1 shows PLMN as an example of the home network. The same
principle applies if home network is SNPN.
0\. The UE is already registered via an AMF in a VPLMN or in the HPLMN. This
implies that the AMF has already registered in UDM, has obtained subscription
data for the UE and subscribed to subscription data updates including possible
updates of SOR information.
1\. The UE requests an authorization of TNR procedure by including a TNR
information within a NAS message, e.g. a Registration Request. The TNR
information can be sent as a separate IE or in a new transparent container for
the HPLMN UDM (i.e. all AMFs would simply forward the transparent container).
NOTE: Whether and how the TNR information is protected by UE before sending to
AMF is up to SA WG3.
The TNR information in the UE request includes, e.g.:
i. Requested start and stop time for permission to use TNR procedure.
ii. The selected localized service identity.
iii. The selected hosting network identity.
2\. Based on the TNR information received from the UE, the AMF decides to
update its registration in UDM to provide the UE requested TNR information to
UDM.
3\. Based on the TNR information received from the AMF, the UDM decides to
request the SOR-AF for authorizing the TNR requested by the UE (step 3a and
3b). The UDM does this even if the UE is registered in the HPLMN.
The SOR-AF updates the SOR information for the UE if needed according to SOR-
AF decision (step 3c) and protects the SOR info via AUSF (step 3d). The SOR
information provided by the SOR-AF includes the TNR authorization in the SOR-
AF. This can be in the form of, e.g.
i. An indication that the UE is authorized for TNR. Based on this indication,
UE can temporarily suspend the automatic network selection mechanism which is
according to the available SOR list stored in the UE, or temporarily switch
SNPN access mode.
ii. An updated or new list of prioritized PLMNs or SNPNs including the hosting
network selected by the UE with the highest priority.
iii. Conditions for UE to activate TNR, e.g. authorized start/stop time,
location, indication of whether possible to access home network using N3IWF
via the hosting network, indication of home routed architecture exists between
home network and the hosting network, etc.
UE determines whether automatic network selection is possible, based on the
indications described above and the UE\'s own capabilities (e.g. dual radio
capability, access home network using N3IWF via hosting network).
In order to avoid overload of the home network when UE leaves the hosting
network(Key Issue #6), the UDM/SOR-AF can apply an offset to the authorized
star/stop time in the authorized TNR sent to UE.
4\. The UDM provides the authorization decision to the UE via the AMF after
protection via AUSF.
6-10. As defined in clause C.2 of TS 23.122 [6].
11\. The UE applies the TNR as authorized by the SOR-AF when conditions are
met. If the SOR-AF is used and the SOR-AF keeps track of the conditions
associated with the authorized TNR, then SOR-AF can issue an update of the SOR
information to the UE as described by Figure C.3.1 and Figure C.6.1 of TS
23.122 [6].
### 6.25.4 Impacts on services, entities, and interfaces
UE:
\- Request temporary network reselection via NAS message.
\- Temporarily apply temporary network reselection, using updated or new list
of prioritized networks with hosting network as top priority.
\- Temporarily avoid periodic check of higher prioritized networks.
\- Temporarily switch SNPN access mode.
UDM/SOR-AF:
\- Authorize the UE request for temporary network reselection.
\- Update the authorized temporary network selection with UE.
\- Pre-authorize the UE to use temporary network reselection, based on UE
configuration.
AMF:
\- Forward the UE request for temporary network reselection to UDM.
## 6.26 Solution #26: Enable UE to query localized services information from
the hosting network for service discovery
### 6.26.1 Introduction
As illustrated in the Key #4, UE need to be able to discover the hosting
network and the localized service being hosted by this network. One aspect of
KI #4 is to identify the mechanism to provisioning UE with appropriate
localized service information. Considering we need to support the cases which
the UE may or may not have prior subscription or information about the hosting
network and the localized service, this solution is to propose an information
query/response mechanism by enhancing the registration procedure to allow UE
to query the localized service information from the hosting network which UE
may or may have subscription with.
The localized service information may include local service ID or name,
service availably (e.g. time, duration and location), local service captive
portal address, information about available local hosting networks associated
with the local service as described in solution #12, so on. UE can use the
information for selecting and accessing the localized service and hosting
network by the user\'s request.
NOTE: This solution does not intent to define the detail of the localized
service information, but it focuses on how to deliver the information from
network to UE by the user\'s request.
### 6.26.2 Functional Description
This solution proposes to allow UE to use registration procedure to query the
localized service information from the AMF of the hosting network. The local
hosting network may configure a designated AMF to handle the UE access for
localized service and store the localized service information. The localized
service information stored in the designated AMF can be configured locally or
provisioned by the localized service provider\'s AF via NEF. A new localized
service intention indicator or new Registration Type is carried in the
registration request message sent by UE to the AMF, to indicates UE\'s
intention of using the registration for the query of localized service
information. The gNB of the hosting network can use this indicator to select
the designated AMF and forward the registration to this AMF, if there is a
designated AMF for localized services. Upon receiving this indication, the
designated AMF can provide UE with the localized service information during or
after the registration procedure by using the Registration Accept message or
Configuration Update Command. The UE may not have the right subscription which
allows UE to access the hosting network before UE queries the localized
service information, e.g. the user may not buy a ticket which has the
credentials information, therefore, UE may only use the registration procedure
to query the localized service information instead of registering to the
network. For the latter case, network will send registration reject to the UE
but with cause value of localized information query response along with the
localized service information shown to the user. And UE may use the queried
localized service information to subscribe the localized services (e.g. User
uses the service portal address to subscribe the services) and manually select
the hosting network later.
There can be some different registration intention indicators or registration
type which can be carried in the registration request:
\- **Local service information Query only:** This indicates the UE only uses
this registration request to query localized service information without
actual camping and registering to the network. After the hosting network gNB
receives the registration request message with this indicator, the gNB
forwards the request message to the AMF which can provide the information,
such as the designated AMF. The AMF skips the normal registration procedure
and just responses UE with registration reject but with cause value of
localized information query response along with the localized service
information. In this case, if UE is still connected and registered with the
home network, UE can be either manually initiated by user to deregister from
the home network and conduct query with the hosting network, or UE conducts
the localized service information query while UE enters the RRC_IDLE or
RRC_INACTIVE state based on a stored localized service discovery policy which
contains conditions under which service discovery with other hosting
network(s) can be conducted. UE and the home network can use paging
restriction as defined in clause 5.38.5 of TS 23.501 [3] while UE is
conducting localized service query with the hosting network RRC_IDLE or
RRC_INACTIVE state.
\- **Registration with local service information query:** This indicates that
the UE would like to collect local service information during service
registration phase. After the hosting network gNB receives the registration
request message with this indicator, the network forwards the request message
to the AMF which can provide information, such as the designated AMF. The AMF
can provide the localized service information by either adding the localized
service information in the registration accept message or sending separate NAS
message, such as UCU.
\- **Registration only:** This indicates that the UE only wants to conduct
normal service registration without collecting the localized service
information. When the local service intention indicator is absent in the
registration request message, it\'s default to consider the intention
indicator is registration only, in order to support backword compatibility or
the network which doesn\'t support localized services.
In addition, the AMF will indicate how the localized services can be accessed
by either providing a specific slice and/or a PDU session The AMF may also
provide the UE a list of Tracking Areas, e.g. called \"Localized Services
availability area\", where the localized services are available. The UE will
then use this information instead of periodical searches to discover localized
services.
If a certain localized service was not available when the UE asked for it
during the registration and now has become available, the network can page the
UE (if it happens to be in IDLE Mode), bring it to Connected Mode and then
provide the needed information by means of UCU procedure.
In order to enable UE to use registration message to query localized service
information, the hosting network needs to broadcast its capability of
supporting the localized service access (e.g. using SIB message). UE only send
register request with localized service query to the hosting network which
supports localized service access.
If UE is connected to the home network and supported by the home network, UE
can conduct localized service information query with the hosting network
including receiving the SIB messages from the hosting network while UE is in
the RRC_IDLE or RRC_INACTIVE state. UE and the home network can use paging
restriction as defined in clause 5.38.5 of TS 23.501 [3] while UE is
conducting localized service query with the hosting network.
UE can initiate localized service query procedure either manually by the user
or being trigged by a stored localized service discovery policy which contains
conditions under which service discovery with other hosting network(s) can be
conducted, such as time, Localized Services availability area, as well as
allowed discovery window duration (this can be used to configure the paging
restriction information) while UE is in RRC_IDLE or RRC_INACTIVE state. This
policy can be provisioned by the home network, or localized service providers
or User. The home network can also trigger UE to conduct the localized service
discovery procedure while UE enters RRC_IDLE or RRC_INACTIVE state and certain
conditions are met, such as time, Localized Services availability area, so on.
In order to trigger UE to conduct localized service discovery, the home
network includes a localized service discovery indication and a discovery
window which the page restriction is applied in the AN release message sending
to UE.
### 6.26.3 Procedure
#### 6.26.3.1 UE query local service information without registering with the
hosting network
Figure 6.26.3.1-1
1\. RAN of hosting Network C broadcasts SIB message which includes indication
for supporting localized service.
2\. UE1 of Network A is interested in the localized service provided by local
network C. Although UE1 may not have a subscription which allow it to access
the network C, UE1 may still like to know local services information before
making a decision to register to network C to access the local services which
the User is interested. UE1 sends registration request message with an
indicator \"Local service information Query only\" for querying local service
information.
3\. After receiving this registration request message with \"local service
information query only\" indicator, RAN selects the designated AMF2 per the
local configuration.
4\. RAN forwards the registration request message to AMF2.
5\. AMF2 sends a registration reject to UE1 with cause code of local service
information response as well as the addition local service information as
queried by the UE.
#### 6.26.3.2 UE local service discovery while registering with the hosting
network
Figure 6.26.3.2-1
1\. RAN of hosting Network C broadcasts SIB message which includes indication
for supporting localized service.
**\- Option a: If UE likes to receive local service information.**
2a. UE1 of network A may have the subscription to allow it to access network C
and decides to regiser to the Network C. UE1 sends a registration request
message with an local service intention indicator \"Registration with local
service information query\".
3a. After receiving this registeration request message with \"Registration
with local service information query\" indicator, RAN selects the designated
AMF2 per the local configuration.
4a. RAN forwards the registration request message to AMF2.
5a. AMF2 sends Registration Accept to UE1 with additional local service
information as queried by the UE.
**Or:**
6a. After AMF2 sends reqistration accept to UE1, AMF2 may send additional NAS
message to UE, such as UCU which contains the local service information as
queried by UE.
**\- Option b: UE already has the local service information, or UE is not
interested to collect local service information at this monent.**
2b. UE1 sends registration request without any local service intention
indicator or with \" Registration only\".
3b. RAN forwards the registration request to AMF1 which is not designated for
handling local services.
4b. AMF1 sends registration accept to UE1.
### 6.26.4 Impacts on services, entities and interfaces
RAN:
\- Broadcasts of localized information SIB in hosting network.
\- Selects the proper AMF based on the registration type/intention indicators
from UE.
\- Sends indication to trigger UE to conduct localized services discovery
while UE enters RRC_IDLE or RRC_INACTIVE state if the home network supports
triggering UE to conduct localized service discovery.
UE:
\- Informs the AMF in hosting network that it is interested in localized
services or localized service information.
\- Uses the provided information about the availability of the localized
services, received in UCU, Registration Reject or Registration Accept, to
access the services.
\- Initiates localized service query procedure either manually by the user or
being trigged by a stored localized service discovery policy which can be
provisioned by the home network, or localized service provider or the User.
\- Conducts localized service discovery or receives SIB messages from the
hosting network while in RRC_INACTIVE or RRC_IDLE state if UE is still
connected with the home network.
AMF:
\- Provides the necessary information about the availability of the localized
services to the UE in UCU or Registration Accept.
\- Provides to the UE a list of Tracking Areas where certain services are
available in the Registration Accept, Registration Reject or UCU message.
\- Provides the UE a localized service discovery policy which contains
conditions under which service discovery with other hosting network(s) can be
conducted, such as time, Localized Services availability area, as well as
allowed discovery window duration while UE is in RRC_IDLE or RRC_INACTIVE
state.
NOTE: It may require SA WG3 analysis on security and authentication impact for
the case which UE query the localized service information without registering
with the hosting network.
## 6.27 Solution #27: Access to localized service by using LADN and N3IWF
overlay architecture
### 6.27.1 Introduction
This solution addresses Key Issue #4: Enabling UE to discover, select and
access NPN as hosting network and receive localized services and Key Issue #5:
Enabling access to localized services via a specific hosting network. The
basic principle of this solution is reusing N3IWF overlay architecture and
LADN mechanism.
This solution can be applies in the case of:
\- Home network is a PLMN and hosting network is a SNPN.
\- Home network is a SNPN and hosting network is a SNPN.
\- Home network is a SNPN and hosting network is a PNI-NPN.
NOTE: In the case of home network is a PLMN and hosting network is a PNI-NPN
is covered by Solution #11.
### 6.27.2 Functional Description
#### 6.27.2.1 Architecture
The following figure 6.27.2-1 and figure 6.27.2-2 depict the proposed
architecture, which are reusing 5G System architecture with access to SNPN
using credentials from Credentials Holder and 5G System architecture accessing
overlay network (home network) via underlay network (hosting network). When a
UE registers to the selected hosting network and receives localized services
provided by the hosting network, architecture in figure 6.27.2-1 is used. If
the UE also need to get services from the home network, the UE may establish
PDU session as shown in figure 6.27.2-2. Whether the UE receives a specific
service from the hosting network or home network is determined based on URSP
rule of the UE. The UE just follows the existing PDU Session Establishment
procedure based on URSP rule provided by the home network.
Figure 6.27.2-1: Architecture when a UE uses localized services provided by
the hosting network
Figure 6.27.2-2: Architecture when a UE uses services provided by the home
network
#### 6.27.2.2 Hosting network discovery and selection
It is assumed that there is service level agreement between the home network
and hosting network and based on the agreement the AMF in the home network is
configured with Localized Service Information. The Localized Service
Information contains following information:
\- Localized Service Name.
\- Validity condition:
\- Time and Spatial validity.
\- Hosting network information:
\- Precedence.
\- Hosting network ID (SNPN or PLMN ID) and RAT type (e.g. NR, E-UTRA).
\- LADN DNN.
\- Allowed CAG information.
When a UE is registered in home network, the UE may request Localized Service
Information to the AMF by sending NAS message (e.g. Registration). If
subscription of the UE allows to use the Localized service, the AMF provides
localized service information to the UE. The UE stores the received Localized
Service Information until time validity condition is fulfilled. The spatial
validity condition in the Localized Service Information can be represented by
geographical area. The exact service area information of hosting network is
provided to the UE as a part of LADN information during the registration to
the hosting network.
NOTE 1: In the case of roaming scenario, the AMF in the serving PLMN provides
Localized Service Information to the UE.
NOTE 2: The AMF can provide Localized Service Information to the UE without UE
request if subscription of the UE allows to use the Localized service. For
example, the AMF may provide Localized Service Information when a UE enters an
area where the Localized service is available.
If the hosting network uses CAG for Localized service (i.e. in the case of
hosting network is PNI-NPN), the Allowed CAG information can be provided to
the UE. If the UE receives Allowed CAG information via Localized Service
Information, the UE shall use the Allowed CAG information only when the UE
access the hosting network for the Localized service.
#### 6.27.2.3 Registration to hosting network and access to Localized services
Based on received Localized Service Information, the UE selects the hosting
network and registers to the network. When a UE registers to the hosting
network and has the subscription to a specific LADN DNN for local service or a
wild card DNN, the AMF provides LADN information (i.e. LADN DNN and LADN
service area) to the UE according to the existing LADN mechanism. The UE uses
the LADN information to access localized services provided by the hosting
network.
NOTE: When hosting network operator configures LADN information in the AMF,
the operator can provide associated validity time of LADN DNN so that the AMF
provides LADN information when the validity time is satisfied.
### 6.27.3 Procedures
#### 6.27.3.1 Requesting Localized service information
Figure 6.27.3.1-1: Requesting Localized service information
The UE may request Localized Service Information to the AMF by sending NAS
message (e.g. Registration request). The UE may indicates specific service the
UE want to receive by including Localized service name. The AMF provides
Localized Service Information to the UE as described in clause 6.27.2.1.
NOTE: How the UE gets Localized service name is out of 3GPP scope. The UE can
get Localized service name via webpage, by installing application, etc.
#### 6.27.3.2 Connection to hosting network and access to Localized services
Figure 6.27.3.2-1: Registration in the hosting network and access to Localized
services
If the UE wants to receive Localized service, the UE requests Localized
service information as specified in clause 6.27.3.1 and selects hosting
network based on received Localized Service Information. If selected hosting
network is available, the UE performs registration with the selected hosting
network. The Registration procedure in TS 23.502 [4] is used with following
modifications:
\- When the UE performs Registration procedure, Registration type indicates
that the UE is accessing the network for localized services. Based on this
information the AMF determine to provide LADN information to the UE.
\- The AMF indicates to the UDM that the UE is registering for localized
services. The UDM use the indication whether to accept UE registration.
After Registration is completed, the UE establishes PDU Session to the LADN
DNN.
If the UE needs to get home network services, the UE may establishes PDU
Session and registers to the home network via N3IWF.
### 6.27.4 Impacts on services, entities, and interfaces
UE:
\- The UE indicates that the UE is accessing the network for localized
services during the Registration procedure.
\- The UE requests and receives Localized Service Information from the AMF and
selects hosting network based on the received Localized Service Information.
AMF:
\- The AMF indicates to the UDM that the UE is registering for localized
services.
\- The AMF provides Localized Service Information to the UE.
\- The PLMN AMF allows a SNPN subscribed UE to access PNI-NPN.
\- The SNPN AMF provides Allowed CAG information used for hosting network to
the UE.
UDM:
\- The UDM determines whether to accept registration taking into account the
indication that UE is registering for localized services.
## 6.28 Solution #28: OTT solution for access to localized services
### 6.28.1 Introduction
This solution addresses Key Issues #4 (Enabling UE to discover, select and
access NPN as hosting network and receive localized services) and #5 (Enabling
access to localized services via a specific hosting network).
The solution is an Over-The-Top (OTT) solution and is described in reference
to the \"umbrella\" Solution #7.
### 6.28.2 Functional Description
Figure 6.28.2-1 illustrates the relationship between the Localized Service
Provider (LSP), the Hosting Network and UE\'s Home Network.
Figure 6.28.2-1: OTT solution for access to localized services
The following are the salient features of this solution:
\- The Localized Service Provider (LSP) has a service agreement with UE\'s
Home Network and with a Hosting Network. There is no direct agreement between
UE\'s Home Network and the Hosting Network.
\- The solution assumes that the Hosting Network is an SNPN, whereas UE\'s
Home Network can be an SNPN or a PLMN.
\- UE\'s user connects to a web portal of the Home Network operator to request
information for access to a localized service.
\- The Home Network obtains time-restricted credentials from the LSP providing
this service. The time-restricted credentials include e.g. the following:
\- SNPN ID and geographical coordinates of the Hosting Network.
\- User id and security credential for access to the Home Network.
\- User id and security credential for access to the LSP server providing the
localized service.
\- DNN/S-NSSAI for establishment of a PDU Session in the Hosting Network with
optional credentials for secondary authentication.
\- The Home Network pushes the time-restricted credentials into the UE (e.g.
using SMS or via the web portal).
\- When the UE arrives at the venue where the localized service is provided
(e.g. stadium), the user performs manual selection of the Hosting Network. UE
connects to the Hosting Network and is authenticated by the LSP in the role of
Credential Holder (e.g. using a AAA server) based on the user id and security
credential for access to the Home Network.
\- UE requests a PDU Session to the provided DNN/S-NSSAI and accesses the
localized service of the LSP via the Hosting Network based on the user id and
security credential for access to the LSP server providing the localized
service.
\- In parallel the UE can access the services of the Home Network using an OTT
(NWu) connection to an N3IWF node in the Home Network.
### 6.28.3 Procedures
Figure 6.28.3-1 (modelled on Figure 6.7.3-1) describes the procedure for
access to localized services:
Figure 6.28.3-1: Procedures for access to localized service
H1. The Localized Service Provider (LSP) establishes service agreement with
the operator of a Hosting Network. The LSP also establishes a service
agreement with UE\'s Home Network operator to enable the UE to receive
information needed to discover/access Hosting Network and the localized
service.
H2. The hosting network is configured based on the service agreement e.g.
DNN/S-NSSAI configuration for access to localized service, QoS, number of end
users, time, location, whether home network services can be accessed via
hosting network, etc. The configuration of the Hosting Network is performed by
means that are outside of 3GPP scope.
H3. UE\'s user is prompted by localized service advertisement.
H4. UE\'s user connects to a web portal of the Home Network operator to
request information for access to a localized service. The Home Network
obtains time-restricted credentials from the LSP providing this service. The
time-restricted credentials are described in clause 6.28.2. The Home Network
pushes the time-restricted credentials into the UE (e.g. using SMS or via the
web portal).
NOTE: The solution assumes that the LSP has service agreement with the Home
Network (as in Solution #7). If the UE has a direct service relationship with
the LSP, the Home Network can be circumvented.
H5. When the UE arrives at the venue where the localized service is provided
(e.g. stadium), the user performs manual selection of the Hosting Network.
H6. UE connects to the Hosting Network and is authenticated by the LSP in the
role of Credential Holder (e.g. using a AAA server).
H7. UE requests a PDU Session and accesses the localized service of the LSP
via the Hosting Network. In parallel the UE can access the services of the
Home Network using an OTT (NWu) connection to an N3IWF node in the Home
Network.
H8. Upon expiry of the time-restricted credentials, the LSP in the role of
Credential Holder requests a release of the UE.
H9. LSP collects and provides charging information to UEs\' Home Network
operator by means outside of 3GPP specification.
H10. When the localized service agreement is terminated, the Hosting Network
removes the configured information (configured in step H2) by means that are
outside of 3GPP scope.
### 6.28.4 Impacts on services, entities, and interfaces
SA WG3 may need to check the security aspects e.g. related to the type of
time-restricted credentials that can be used.
The solution has no specification impact from SA WG2 perspective unless being
identified by SA WG3.
## 6.29 Solution #29: Solution for enabling UE to automatic discover and
select a network for accessing local services on top of solution #10
### 6.29.1 Introduction
The solution addresses Key Issue #4 (Enabling UE to discover, select and
access NPN as hosting network and receive localized services) and builds on
top of Solution #10.
### 6.29.2 Functional Description
This solution is based on Solution #10, clause 6.10.2.1 with the following
considerations:
\- When one or more hosting network providing localised services is available
in a particular location and time, the serving network will broadcast the
availability of hosting network (i.e. indication of availability of one or
more hosting network: YES/NO) to all the UEs in that area. This information
will be broadcasted through SIB messages in all cells of the serving network
that overlaps with the physical geographic area where the hosting network(s)
is/are available.
\- Validity information of the \"prioritized list of SNPNs for localized
services\" will contain the Cell Identifiers / Tracking area(s) (corresponding
to serving network) where the local hosting network is expected to be present.
\- When all the validity information is met and the UE detects the presence of
local hosting network through the indication broadcasted in SIB message, the
UE scans for SNPNs in the background.
\- Service agreement exists between the Serving network of UE and the hosting
network providing localized services.
\- Serving Network is notified about the availability of hosting network.
### 6.29.3 Procedures
Figure 6.29.3-1: Discovery and selection of NPN as hosting network for
localized services
1\. UE is configured with a \"prioritized list of SNPNs for localized
services\" as explained in Solution #10
2\. When the hosting network becomes active and ready for serving the UE(s),
it indicates to the serving network about its availability.
3\. Serving network broadcasts through SIB messages in all cells that are
overlapping the physical geographic area where the hosting network is
available, an indication regarding the presence of hosting network services.
4\. SNPN-localized services-enabled UE reaches a geographical area where a
hosting network services are available.
5\. Once the UE sees the presence of a local hosting network (through SIB
message), the UE then checks the \"prioritized list of SNPNs for localized
services\" for the SNPNs and their validity conditions. If the UE finds one or
more valid SNPNs (e.g. the current time and Tracking area/Cell Identifier
broadcasted by the serving network matches with at least one of the entries of
\"prioritized list of SNPNs for localized services\"), then the UE starts
looking for the SNPNs in the background.
6\. If the UE finds at least one available and allowable SNPN which meets the
validity conditions, then the UE switches to a new network selection mode
\"SNPN Localized services mode\" and selects an available SNPN from the list
of SNPNs for localized services. Alternatively, the UE could provide the
indication to the user for manual network selection process.
NOTE 1: The \"prioritized list of SNPNs for localized services\" and \"SNPN
Localized services mode\" are defined in Solution #10.
In a variation to this method, the availability of hosting network indication
could be indicated through on-demand SIB messages. The UE will request for the
on-demand SIB messages once the validity information is met, and if presence
of local hosting network is detected through such SIB messages, then the UE
switches to a new network selection mode \"SNPN Localized services mode\" and
selects an available SNPN from the list of SNPNs for localized services.
NOTE 2: Availability of local hosting services could be indicated by a flag or
by the presence of local hosting network identifiers.
### 6.29.4 Impacts on services, entities and interfaces
The solution has the following impacts in addition to the impacts mentioned in
Solution #10:
UE:
\- Handling of SIB message changes, prioritized list of SNPNs for localized
services (that includes additional validity conditions as explained in clause
6.29.2) and SNPN Localized services mode.
AMF:
\- Indication of presence of hosting network to NG-RANs.
NG-RAN:
\- Broadcasting the indication of presence of hosting network to UEs.
## 6.30 Solution #30: Solution for steering a UE to a Hosting Network by Home
Network
### 6.30.1 Introduction
This solution addresses the Key issue#4: Enabling UE to discover, select and
access NPN as Hosting Network and receive Localized Services.
Clause 6.41.2.2 of TS 22.261 [2] specifies:
\- Subject to regulatory requirements and localized service agreements, the 5G
system shall allow a Home Network operator to automatically negotiate policies
with the Hosting Network for allowing the Home Network\'s subscribers to
connect at a specific occasion, e.g. time and location, for their Home Network
services.
According to the above, the UE is * **allowed*** by Home Network to select a
Hosting Network, i.e. the UE is * **not enforced*** to select a Hosting
Network. Therefore, the UE can decide (e.g. UE implementation) whether it
stays in current serving network or it selects a Hosting Network.
To access Localized Services, when the Validity Information is met, the UE may
initiate Hosting Network selection according to the configuration.
This solution proposes a complementary approach where the Home Network may
configure the UE only initiate Hosting Network selection when explicitly
steered by the Home Network. The solution focuses on Home Network (PLMN or
SNPN) steering to SNPN Hosting Networks.
Editor\'s note: Steering to PNI-NPN is FFS.
Based on the above, in this solution, the following general principles are
proposed:
\- The UE is (pre)-configured or provisioned (signalled) by Home Network with
a **_List of SNPN Hosting Networks_** **_with Validity Information_** (i.e.
time and/or location) and an **_Indication that the UE is only allowed to
select a Hosting Network upon Steering by the Home Network_** , except if Home
Network is not available in which case the UE is allowed to select an SNPN
Hosting Network without Home Network steering, when Validity Information is
met.
\- When the Validity Information is about to be met, the UE starts searching
for available and allowable SNPN Hosting Networks based on the **_List of SNPN
Hosting Networks_** **_with Validity Information_** while the UE is served by
a Serving Network.
\- If the UE finds available and allowable SNPN Hosting Networks, the UE
reports those SNPN Hosting Networks to the Home Network. The Home Network then
determines the **_Prioritized list of SNPN Hosting Networks_** to which the UE
can register for the Localized Services using Home Network\'s
subscription/credentials. This list may contain a single SNPN Hosting Network.
\- If the UE needs to register to Home Network using NWu interface, the N3IWF
addresses of the Home Network are also configured in the UE.
NOTE: If the UE\'s Serving Network is PLMN, and the UE\'s Home Network is
PLMN. The existing Roaming mechanism is applied to allow the UE to reach the
UE\'s Home Network
\- The UE selects and registers to a Hosting Network in the **_Prioritized
list of SNPN Hosting Networks_** following the priority order in this list
### 6.30.2 Steering a UE to an SNPN Hosting Network
#### 6.30.2.1 The serving network is Home Network of the UE
When the Validity Information is about to be met and the UE is configured with
an **_Indication that the UE is only allowed to select a Hosting Network upon
Steering by the Home Network_** , the following steps are executed:
\- The UE starts searching for available and allowable Hosting Networks based
on the **_List of SNPN Hosting Networks_** **_with Validity Information_**
while the UE is served by a serving network (Home Network).
\- If the UE finds any available and allowable SNPN Hosting Network(s), the UE
initiates Service Request (SR) or Mobility Registration Update (MRU) procedure
to report those available and allowable SNPN Hosting Network(s) to the serving
network (Home Network).
\- The serving network (Home Network) determines the **_Prioritized list of
SNPN Hosting Networks_** and includes this list in the response message of SR
or MRU procedure to the UE to instruct the UE to regard the **_Prioritized
list of SNPN Hosting Networks_** as highest priority networks than any other
network including Home Network when selecting an SNPN Hosting Network.
\- When the UE receives the **_Prioritized list of SNPN Hosting Networks_** ,
the UE deregisters from the serving network (Home Network) and immediately
selects and registers to an SNPN Hosting Network based on this list i.e. in
prioritized order.
When the Validity Information is no longer met or if UE no longer needs the
SNPN Hosting Network for Localized Services, the UE deregisters from the SNPN
Hosting Network, deletes the **_Prioritized list of SNPN Hosting Networks_** ,
and initiates normal network selection for returning to Home Network.
#### 6.30.2.2 The serving network is not Home Network of the UE
When the Validity Information is about to be met and the UE is configured with
an **_Indication that the UE is only allowed to select a Hosting Network upon
Steering by the Home Network_** , the following steps are executed:
\- The UE starts searching for available and allowable SNPN Hosting Networks
based on the **_List of SNPN Hosting Networks_** **_with Validity
Information_** while the UE is served by a serving network (any other
available and allowable network except Home Network).
\- If the UE finds any available and allowable SNPN Hosting Network(s):
\- Since the serving network is not Home Network, the UE needs to register to
Home Network via NWu interface using the serving network as underlay network
for connecting to the N3IWF of Home Network.
\- Then, the UE initiates SR procedure using the serving network (undelay
network) to Home Network to report those available and allowable SNPN Hosting
Network(s) to Home Network.
\- The Home Network determines the **_Prioritized list of SNPN Hosting
Networks_** and includes this list in the response message of SR to the UE to
instruct the UE to regard the **_Prioritized list of SNPN Hosting Networks_**
as highest priority networks than any other network including Home Network
when selecting an SNPN Hosting Network.
\- When the UE receives the **_Prioritized list of SNPN Hosting Networks_** ,
the UE deregisters from the serving network and immediately selects and
registers to an SNPN Hosting Network based on the list in prioritized order.
When the Validity Information is no longer met or if UE no longer needs the
SNPN Hosting Network for Localized Services, the UE deregisters from the SNPN
Hosting Network, deletes the **_Prioritized list of SNPN Hosting Networks_** ,
and initiates normal network selection for returning to Home Network.
#### 6.30.2.3 The selection of an SNPN Hosting Network without Home Network\'s
steering
When the Validity Information is met, and if the UE is not configured with an
**_Indication that the UE is only allowed to select a Hosting Network upon
Steering by the Home Network_** , the UE could decide whether it stays in the
current serving network or the UE could select an SNPN Hosting Network for
Localized Services based on the **_List of SNPN Hosting Networks with Validity
Information_** e.g. up to the implementation.
If Home Network is not available, i.e. the UE cannot find any available
serving network, in which case the UE is allowed to select an SNPN Hosting
Network without Home Network steering, when Validity Information is met.
### 6.30.3 Procedure
#### 6.30.3.1 Steer a UE to an SNPN Hosting Network when the serving network
is UE\'s Home Network
In the case that the Home Network of the UE is SNPN and the serving network is
the UE\'s subscribed SNPN. Based on the principles:
\- The UE is (pre)-configured or provisioned (signalled) by the UE\'s
subscribed SNPN with the **_List of SNPN Hosting Networks with Validity
Information_** and the UE is configured with the **_Indication that the UE is
only allowed to select a Hosting Network upon Steering by the Home Network_**.
\- The UE is also configured with the N3IWF addresses of the UE\'s subscribed
SNPN.
Then the following steps are performed (shown in Figure 6.30.3.1-1):
Step 0: the UE registers to the UE\'s subscribed SNPN.
Step 1: When the Validity Information is about to be met, the UE starts
searching any available and allowable SNPN Hosting Network(s) based on the
**_List of SNPN Hosting Networks with Validity Information_** while the UE is
served by the UE\'s subscribed SNPN.
Step 2: If the UE finds any available and allowable SNPN Hosting Network(s),
the UE initiates Service Request (SR) or Mobility Registration Update (MRU)
procedure to report those available and allowable SNPN Hosting Network(s) to
the UE\'s subscribed SNPN.
Step 3: The UE\'s subscribed SNPN determines the **_Prioritized list of SNPN
Hosting Networks_** and includes this list in the response message of SR or
MRU procedure to instruct the UE to regard the **_Prioritized list of SNPN
Hosting Networks_** as highest network than other network including Home
Network when selecting an SNPN Hosting Network.
Step 4: When the UE receives the **_Prioritized list of SNPN Hosting
Networks_** , the UE deregisters from the UE\'s subscribed SNPN and
immediately selects and registers to an SNPN Hosting Network based on the list
in prioritized order.
Step 5: When the Validity Information is no longer met or if UE no longer
needs the SNPN Hosting Network for Localized Services, the UE deregisters from
the SNPN Hosting Network, deletes the **_Prioritized list of SNPN Hosting
Networks_** , and initiates SNPN network selection for returning to Home
Network.
Figure 6.30.3.1-1: the UE\'s subscribed SNPN/the UE\'s HPLMN as the serving
network steers the UE to an SNPN Hosting Network
In the case that the Home Network of the UE is PLMN and the serving network is
the UE\'s HPLMN. Based on the principles:
\- The UE is (pre)-configured or provisioned (signalled) by the UE\'s HPLMN
with the **_List of SNPN Hosting Networks with Validity Information_** and the
UE is configured with the **_Indication that the UE is only allowed to select
a Hosting Network upon Steering by the Home Network_**.
\- The UE is also configured with the N3IWF addresses of the UE\'s HPLMN
Then the following steps are performed (shown in Figure 6.30.3.1-1):
Step 0: The UE registers to the UE\'s HPLMN
Step 1: When the Validity Information is about to be met, the UE in SNPN
access mode starts searching any available and allowable SNPN Hosting Network
based on the **_List of SNPN Hosting Networks with Validity Information_**
while the UE is served by UE\'s HPLMN
Step 2: If the UE finds any available and allowable SNPN Hosting Network(s),
the UE initiates Service Request (SR) or Mobility Registration Update (MRU)
procedure to report those available and allowable SNPN Hosting Network(s) to
the UE\'s HPLMN.
Step 3: The UE\'s HPLMN determines the **_Prioritized list of SNPN Hosting
Networks_** and includes this list in the response message of SR or MRU
procedure to instruct the UE to regard the **_Prioritized list of SNPN Hosting
Networks_** as highest network than other network including Home Network when
selecting an SNPN Hosting Network
Step 4: When the UE receives the **_Prioritized list of SNPN Hosting
Networks_** , the UE deregisters from the UE\'s HPLMN and immediately selects
and registers to an SNPN Hosting Network based on the list in prioritized
order.
Step 5: When the Validity Information is no longer met or if UE no longer
needs the SNPN Hosting Network for Localized Services, the UE deregisters from
the SNPN Hosting Network, deletes the **_Prioritized list of SNPN Hosting
Networks_** , and initiates PLMN network selection for returning to Home
Network.
#### 6.30.3.2 Steer a UE to an SNPN Hosting Network when the serving network
is not UE\'s Home Network
If the Home Network of the UE is SNPN or PLMN and the serving network is not
the UE\'s subscribed SNPN or the UE\'s HPLMN, the steps are same as shown in
Figure 6.30.3.1 with an additional step (i.e. step 2 shown in Figure
6.30.3.2-1):
\- Step 2: To report the search result of the available and allowable SNPN
Hosting Networks in SR procedure, the UE needs to register to its Home Network
using NWu and the N3IWF of the Home Network using the current serving network
as underlay network.
Figure 6.30.3.2-1: The UE\'s subscribed SNPN/the UE\'s HPLMN not as the
serving network steers the UE to an SNPN Hosting Network
### 6.30.4 Impacts on services, entities, and interfaces
UE:
\- supports the **_List of SNPN Hosting Networks with Validity Information_**.
\- supports the **_Indication that the UE is only allowed to select a Hosting
Network upon Steering by the Home Network_**.
Home Network:
\- determines the **_Prioritized list of SNPN Hosting Network_** per UE based
on the search report from UE.
## 6.31 Solution #31: Discovery and selection of Hosting network based on
broadcast information
### 6.31.1 Introduction
This solution targets KI#4.
It is assumed that the UE is a subscriber of a Localized service and the UE
uses the service-level configuration to know when to trigger hosting network
discover, i.e. whether the Localized service is available in a specific time
period and/or specific location. However, the UE is not aware which networks
(i.e. Hosting networks) supporting the Localized service.
### 6.31.2 Functional Description
In order to enable a UE to use a Localized service when the UE doesn\'t know
the Hosting network IDs, the UE discovers/selects/accesses a Hosting network
supporting the Localized service. It is proposed that the Hosting network
supporting Localized service(s) broadcasts information indicating the
supported Localized service(s). The broadcast information can be transmitted
from NG-RAN or non-3GPP access network of the Hosting networks.
Following are the characteristics of the solution:
1\. The UE is configured with Localized service information which includes the
Localized service identification (e.g. Localized service ID) and information
when and where a Localized service is available (i.e. availability conditions
like time period and location). This configuration may be provided to the UE
from the application layer (e.g. from Localized service provider, LSP):
a. The LSP may have a service level agreement with Hosting network(s). During
the SLA establishment the LSP and the Hosting network has agreed the Localized
service ID and the service availability conditions (like time period and
location), which the LSP can provide to the UE via the application layer. The
LSP would act as CH when the UE accesses the Hosting network.
b. In one alternative, it is possible that the Home network configures the UE
with the Localized service ID and service availability conditions. Here the
Home network and the Hosting network should have established SLAs. The Home
network would act as CH when the UE accesses the Hosting network.
2.- The UE NAS layer requests the AS layer to discover available Hosting
networks which broadcast support of the Localized service ID and the
availability conditions are fulfilled.
2a. The broadcast information (e.g. the SIB of NG-RAN) from the access network
includes at least the following parameters: (1) a Hosting NW indication which
indicates that the network supports any Localized service; and (2) Localized
service identifier and/or (3) Human Readable Service Name (HRSN) identifying
the Localized service.
Editor\'s note: Whether broadcasting the above parameters has potential
security and privacy issues is FFS and the security impacts shall be evaluated
by SA WG3.
NOTE: The above broadcast information may take local regulations into account.
3\. The UE AS layer creates a list of discovered Hosting networks fulfilling
the availability conditions; and reports to the NAS layer the list of
discovered Hosting networks. If there are more than one discovered Hosting
network broadcasting the Localized service ID, the AS layer may order the
Hosting networks, e.g. by using the signal strength.
4\. The UE selects a Hosting network from the list of discovered Hosting
networks. If automatic network selection is performed and the multiple Hosting
networks are discovered in point 3. the UE can select the network with the
highest order. If manual network selection is performed, the list of
discovered Hosting networks is displayed to the user.
5\. The UE starts registration procedure with the selected Hosting network.
### 6.31.3 Procedures
The proposed solution reuses the existing functionalities with the following
modifications:
\- The RAN System Information (SI) broadcast is specified in TS 38.331 [14].
In addition, the RAN broadcasts the following SI and the UE is able to receive
and process this SI:
\- Support of Hosting network (or Localized service) indication (e.g.
broadcasted in Minimum SI, e.g. SIB1);
\- List of supported Localized service IDs (e.g. broadcasted in \"Other SI\"
which is transmitted seldom or on demand).
\- List of associated Human-Readable Service Names (HRSN) associated with the
Localized service IDs (e.g. broadcasted in \"Other SI\" which is transmitted
seldom or on demand).
NOTE: The above SI broadcast shall be coordinated and evaluated by RAN WG2.
\- The UE procedure for network selection is specified in TS 23.122 [6]. In
addition, this solution requires the following changes:
\- Configuration from higher layers about the Localized service ID (which is
broadcasted in the SI) and the associated availability conditions.
\- The UE can select a serving network by considering the broadcasted
supported Localized service IDs and the availability conditions for the
Localized service.
### 6.31.4 Impacts on services, entities, and interfaces
UE impacts:
\- The ability to be configured for Hosting network discovery including
Localized service ID and associated availability conditions.
\- Receiving SIB including the supported Localized service ID.
\- Selecting a Hosting network based on the available networks supporting the
Localized service ID and matching the availability conditions.
RAN impacts:
\- Enhanced SIB information to announce the support of:
\- Hosting network (or Localized service) indication.
\- List of supported Localized service IDs.
\- List of associated Human-Readable Service Names (HRSN) associated with the
Localized service IDs.
## 6.32 Solution #32: Supporting PNI-NPN as hosting network
### 6.32.1 Introduction
### 6.32.2 Functional Description
If local services are provided via PNI-NPN in a PLMN, CAG cells may broadcast
which local services are accessible via the cell. One CAG cell may support
multiple local services. The service area of a local service consists of the
CAG cells that support the service. The PLMN network is aware of the service
area of the local services.
A local service and CAG capable UE may discover available local services
either from the CAG cell broadcast or NAS signalling, e.g. during Registration
procedure. If the user is interested in a certain local service, it may
request the authorization from the network to access the local service via NAS
signalling. The network may determine the authorization based on whether the
UE\'s subscription info allows it and may further interact with the local
service provider. If the access to the local service is authorized, the
network may provide the necessary configuration, e.g. the update of Allowed
CAG list that contains the CAG cells serving the local service, to the UE. The
UE may start searching for and accessing CAG cells for local services, e.g.
based on the service validity time.
### 6.32.3 Procedures
Figure 6.32.3-1: Discovery and access local service via PNI-NPN
1\. UE initiates registration with the serving PLMN. The UE may indicate its
capability of local service access to the network.
2\. The network provides a list of available local services to the UE. The
list may be based on the area where the UE initiates the Registration. Other
information such as the CAG identifiers and validity time period corresponding
to the local services can also be provided.
3\. The user may determine its desired local service and trigger the UE to
send a NAS request (e.g. UL NAS Transport) to the network for the
authorization to access the desired service. The UE indicates the desired
local service identifier in the request.
4\. The network checks if the UE is authorized to access the service based on
UE\'s subscription information and may further interact with the local service
provider for authorization determination (not shown in the figure).
5\. The network returns the authorization result to the UE in a NAS response
message (e.g. DL NAS Transport).
6\. If the local service access is authorized, the network provides necessary
configuration to the UE. The configuration may include the update of Allowed
CAG list which contains the CAG IDs that supports the desired local service,
DNN associated with the local service, etc.
7\. The UE starts searching and accessing the CAG cell that supports the local
service. This may be triggered by manual input or based on service available
time.
8\. The UE establishes PDU Sessions for accessing the local service.
### 6.32.4 Impacts on services, entities, and interfaces
UE:
\- Supports indication of local service access capabilities to the network.
\- Receives local service-related information (service identifiers, validity
time period, etc.) via NAS signalling and stores the information.
\- Supports new NAS signalling for requesting authorization for access to a
local service.
AMF:
\- Determines available local services based on the UE\'s location.
\- Provides local services related information (service identifiers, valid
time period, etc.) via NAS signalling to the UE.
\- Supports new NAS signalling for requesting authorization for access to a
local service and checks authorization based on subscription information.
UDM/UDR:
\- New subscription information on whether UE is allowed to access a local
service.
## 6.33 Solution #33: network selection for accessing to a hosting network
### 6.33.1 Introduction
The solution addresses key issue # 4 \" Key Issue #4: Enabling UE to discover,
select and access NPN as hosting network and receive localized services \".
The solution aims to enhance existing network selection specified in TS 23.122
[6], by defining a new list of hosting network(s) that used for UE to perform
automatic network selection to access the hosting network for the localized
service.
Editor\'s note: Manual network selection is FFS.
### 6.33.2 Functional Description
Based on existing network selection procedure, this solution defines a new
list of hosting network that used for accessing to the target hosting network
for the localized service when needed.
A list of hosting network(s) includes at least NPN ID, optional valid time,
or/and area information. This list has highest priority for the UE to select
when it is used or activated. When the localized service in the hosting
network is finished, the list of hosting network is deactivated so that UE can
perform normal network selection.
The following principle applies for the list of hosting network:
\- With highest priority when performing automatic network selection, even
higher than HPLMN. Assumed that UE registered to one hosting network
successfully for the expected localized service, when UE moves into the
coverage of HPLMN, based on existing logic of network selection, UE has to
select higher prioritized network(e.g. HPLMN), and then the localized service
will be interrupted. So the list of hosting network has higher priority than
any other network for UE to perform network selection, including even HPLMN.
\- Can be activated or deactivated by UE or home network, e.g. when UE
attempts to access the hosting network for the localized service, or when the
localized service is finished, or home network sends the instruction to UE,
etc.
\- Can be pre-configured or dynamic delivered by home network
\- Can be used for specific time, or/and, specific area, or/and specific
localized service(s).
Editor\'s note: How to obtain the list of hosting network(s) is FFS.
### 6.33.3 Procedures
Editor\'s note: It is FFS for the detailed procedure for discovery and
selection for the hosting network based on the new defined list of hosting
network.
### 6.33.4 Impacts on services, entities, and interfaces
UE impact:
\- A new hosting network list is needed.
## 6.34 Solution #34: Providing Human Readable Localized Services Information
for manual selection
### 6.34.1 Introduction
This solution is intended for KI#4, for the case of manual selection of
localized services. For manual selection, there may be different scenarios:
**Scenario 1: The user knows which NPN offers a specific localized service,
time and location validity.**
For example, the user has this information in the ticket of an event, which
comes with instructions to access a specific NPN ID (PLMN+NID) or GIN, when
entering the venue during the event.
This scenario would need no further enhancements from what is already defined
in Rel-17.
If a human readable network name is needed, the NPN hosting network can
include _SIB10_ containing the Human-Readable Network Names (HRNN) of the NPNs
listed in SIB1 (as per Rel-17 specifications).
**Scenario 2: The user does not know which localized services are available in
the area.**
For this scenario, the user needs to be displayed available localized services
in human readable form.
The localized service information to be displayed to the user may include a
localized service name and some additional information regarding the localized
service (e.g. pricing, time/location validity, etc.).
For this scenario, currently defined SIB information for NPN is not enough.
On the other hand, for NPN hosting networks offering multiple localized
services, the amount of human readable information may become large, in which
case including human readable information for localized services in regularly
scheduled SIB information would be too costly in terms of utilized resources.
This solution provides non-mutually exclusive alternatives to provide Human
Readable Localized Services Information to UE for display to the user.
### 6.34.2 Functional Description
#### 6.34.2.1 Human Readable Localized Service information in On-Demand SIB
This alternative reuses on-demand system information acquisition procedure as
defined in TS 38.300 [15] and TS 38.331 [14]. The hosting network, on top of
already defined SIB information, broadcasts additional information as follows:
\- SIB1 includes information regarding the availability and scheduling (e.g.
mapping of SIBs to SI message, periodicity, SI-window size) of the new SIB
(SIBxx) with an indication whether this SIBxx is only provided on-demand and,
in that case, the configuration needed by the UE to perform the SI request.
\- If a UE intends to retrieve this information, the UE performs random access
procedure to request the on-demand system information:
\- The UE sets the raPurpose to requestForOtherSI or msg3RequestForOtherSI.
\- The UE sets the intendedSIBs to indicate the UE wants to receive SIBxx as a
result of the SI request.
\- Upon request of one or more UEs, the NG-RAN schedules the on-demand SIBxx
with Human Readable localized services information. The Human Readable
localized services information contains information regarding the localized
services that are available via the hosting network, e.g. a descriptive name
of the localized service.
Editor\'s note: Security considerations about broadcasting localized services
information are FFS and this shall be evaluated by SA WG3.
\- This information is displayed to the user.
#### 6.34.2.2 Construction of URL for webpage retrieval of Human Readable
Localized service information.
In this alternative, the network broadcasts information, which enables a UE to
construct an Internet address from where to retrieve more information about
the hosting network and the localized services that can be accessed via the
hosting network. This alternative assumes the UE has other means of data
connectivity, e.g. the UE is currently connected to a (V/H-) PLMN or another
SNPN/PNI-NPN.
In order to make the broadcasted information efficient, the NG-RAN broadcasts
in SIB a code.
Based on this the UE creates a URL by embedding the key, e.g. as follows:
https://\.npn-service-information.com
The UE then retrieves localized services information from the webpage
identified by the URL via a separate connection, i.e. via a V-PLMN/H-PLMN of
another SNPN/PNNI-NPN the UE, and displays it to the user.
Editor\'s note: The details of the retrieval from webpage are FFS.
Note that the \ may include location information, e.g. it may contain
\.\.
Editor\'s note: Security considerations are FFS and this shall be evaluated by
SA WG3.
### 6.34.3 Procedures
#### 6.34.3.1 Procedure for Human Readable Localized Service information in
On-Demand SIB
Figure 6.34.3.1-1: Procedure for Human Readable Localized Service information
in On-Demand SIB
1\. NG-RAN broadcasts SIB1 which includes information regarding the
availability and scheduling (e.g. mapping of SIBs to SI message, periodicity,
SI-window size) of the new SIB (SIBxx) with an indication whether this SIBxx
is only provided on-demand and, in that case, the configuration needed by the
UE to perform the SI request.
2\. If a UE intends to retrieve this information, and SIB1 indicates SIBxx on
demand only, the UE performs random access procedure to request the on-demand
system information:
\- The UE sets the raPurpose to requestForOtherSI or msg3RequestForOtherSI.
\- The UE sets the intendedSIBs to indicate the UE wants to receive SIBxx as a
result of the SI request;
3\. Upon request of one or more UEs, the NG-RAN indicates in SIB1 the
scheduling of SIBxx.
4\. NG-RAN broadcasts SIBxx as scheduled in SIB1.
5\. The UE that made the request in step 2, and any other UE also interested
in SIBxx, receive SIBxx, and display the SIBxx content, i.e. the Human
Readable Localized Services information, to the user.
NOTE: The procedure described in this clause already exists in TS 38.300 [15]
and TS 38.331 [14]. Only addition is the specific use a new SIBxx that
contains human readable localized services information. The procedure shall be
evaluated by RAN WG2.
#### 6.34.3.2 Procedure for retrieval of Localized service information from
URL
Figure 6.34.3.2: Procedure for retrieval of Localized service information from
URL
0\. UE has internet access via V-PLMN/H-PLMN, SNPN, PNI-NPN, WLAN or other
means.
1\. NG-RAN broadcasts \ in SIB. The code may be included in SIB10, in
new SIBxx (potentially on-demand as in clause 6.34.2.1) or both.
2\. Based on this the UE creates a URL by embedding the key, e.g. as follows:
https://\.npn-service-information.com
3\. The UE then retrieves the webpage identified by the URL.
Editor\'s note: The details of the retrieval from webpage are FFS.
4\. UE displays retrieved information to the user.
### 6.34.4 Impacts on services, entities, and interfaces
RAN:
\- For on-demand SIB alternative: new on-demand SIB support (no new procedure
in RAN).
\- For construction of URL based on code: transmit code for URL construction
in SIB.
UE:
\- For on-demand SIB alternative: new on-demand SIB support (no new SIB
acquisition procedure in UE).
\- For construction of URL based on code: construct URL based on code received
in SIB. Retrieve information from URL.
\- Retrieval of localized services information from URL.
## 6.35 Solution #35: Access to localized service by network slicing and URSP
### 6.35.1 Introduction
This solution addresses Key Issue #5: Enabling access to localized services
via a specific hosting network.
More specifically the solution addresses step H6 of solution 7.
The basic principles of this solution is reusing existing architectures and
functionalities e.g. network slicing and URSP.
### 6.35.2 Functional Description
The following are the assumptions for this solution:
1\. Hosting network:
\- can be a PNI-NPN (i.e. a PLMN) or an SNPN;
\- uses dedicated network slice(s) for localized services:
\- A dedicated network slice is defined to be available in the area of the
served localized services, and available at least for the duration of the
localized service.
2\. Home network:
\- can be a PNI-NPN (i.e. a PLMN) or an SNPN;
\- The home network and hosting network can be the same network.
3\. PCF is configured with information for localized services or retrieves the
information from UDR.
4\. Home network services can be accessed either using roaming architecture
with N16/N9 or via N3IWF.
5\. The UE uses the credentials of the home network to access the hosting
network.
### 6.35.3 Procedures
Figure 6.35.3-1: Registration in the hosting network
The Registration procedure in TS 23.502 [4] is used with following
modifications with the assumption that hosting network and home network is not
the same network and that the UE therefore does not have e.g. S-NSSAI
configured for the hosting network (if the hosting network and home network is
the same network then UE can already have the S-NSSAI and the PCF can provide
URSP rules to the UE):
NOTE: The UE has previously performed step H5 of solution 7 i.e. UE
discovers/selects the hosting network when the conditions of the localized
service are about to be met.
1.- The UE provides Requested NSSAI if available as per existing procedures.
2\. Primary authentication is performed as per existing procedures.
3\. AMF and UDM service operations as per existing procedures.
4\. AM Policy Association Establishment as per existing procedures.
5\. UE Policy Association Establishment as per existing procedures. Potential
enhancement introduced in study FS_eUEPO can be utilized for URSP rule
determination. This can involve H-PCF if the hosting network is a PNI-NPN and
home network is a PLMN.
6\. As per existing procedures i.e. the AMF provides the Configured NSSAI
including the S-NSSAI of hosting network that is to be used for the localized
service and the Mapped Configured NSSAI including the S-NSSAI of the home
network.
7\. PCF in hosting network provides the UE with URSP rules with RSD
identifying the localized service and S-NSSAI and DNN in hosting network to be
used. PCF in hosting network determines which localized services are granted
to UE and the corresponding URSP rules based on SLA and the information stored
in UDR in the hosting network. Optionally, the URSP rule includes validity
conditions for the related URSP rule e.g. time window and a location where the
localized service is valid.
8\. The UE registers the network slice to be used for the localized service.
9\. The existing mechanisms are used to change the NG-RAN resources for the UE
e.g. to a dedicated cell/TA to be used for the localized services. Mechanism
can be based on RFSP, Allowed NSSAI or Target NSSAI or other available
mechanisms. This can happen after step 10.
10\. The UE establishes a PDU Session to access the localized services as per
the URSP rule for the localized service.
### 6.35.4 Impacts on services, entities, and interfaces
UE/PCF:
\- Support of traffic descriptor in the URSP rule to identify the localized
services.
PCF:
\- The PCF is able to provide the UE with UE policies (URSP) according to
validity conditions for localized services, and remove the URSP rules after
the end of the localized service.
## 6.36 Solution #36: Steering of UEs by home network to a specific hosting
network with consideration of location, times, and coverage for key issue #5
### 6.36.1 Introduction
One of the aspects in Key issue #5 is about how home network determines the
need to steer or instruct UE with the consideration of the location, times,
and coverage of the hosting network, as required by TS 22.261 [2]. Because
it\'s for local services, the coverage of the hosting network and the
localized services normally are limited to certain area(s) (e.g. stadium,
school campus, etc) within possible limited operation time. Therefore, it\'s
important for home network to steer or instruct a UE to the specific hosting
network while the UE is a location with good coverage of the hosting network
and services.
There can be two options to make sure UE being steered to a local network with
satisfying those considerations:
**Option 1:** UE-based: Home network provides hosting network selection policy
to UE with the location and coverage validity conditions, so UE can use those
policy to select the valid hosting network which match those conditions. This
option fully relies on UE to make decision on whether the conditions are met
and when to move to the local network after receiving the instruction from the
home network, while the home network may lack knowledge of the UE\'s location
and the coverage from the target hosting network in UE\'s location when the
home makes steering decision.
**Option 2:** Network-and-UE-coordination based: Home network coordinates with
UE to obtain UE location and the reception performance of the target hosting
network in UE\'s location, before the home network makes steering decision to
instruct UE to steer to the target hosting network.
### 6.36.2 Functional Description
For option 1 (UE-based), new selection conditions can be added into hosting
network selection policy, such as location, time (includes start, end, or
operation duration time of the network), and signal strength threshold. UE
will only select and access the hosting network which meets those defined
conditions.
For option 2 (Network-and-UE-coordination based), for the home network to
precisely steer the UE to the suitable hosting network based on UE\'s present
location to avoid steering UE to a network which UE can\'t receive good
coverage in that location, the home network may want to have the latest
network performance status of the potential candidate hosting network in that
area. Knowing the potential target network coverage for the UE(s) to be
steered to may not be the reason for steering, instead it\'s used by the home
network to check if the target network(s) are suitable for the UE with good
coverage.
There are 2 methods for option 2:
\- Method 1: The home network can use that UE location information to query
the network performance information (e.g. performance analytics or Observed
service experiences related network data analytics) from the target hosting
SNPN in that UE location via target hosting SNPN\'s NEF. Based on the
information from target network hosting SNPN, the home network decides if the
hosting network is suitable for UE to be steered to or not. This method is
from the network point of view with data being collected from the target
network to determinate and predict if UE is in the good service coverage of
target network or not. This method may not reflect the real UE experience in
that location.
\- Method 2: The home network can instruct UE to measure and report the signal
reception status of the potential target hosting network(s). This can be
realized via enhancing the UCU or UPU procedures. The signal reception status
information from UE can be simple indication if those candidate network\'s
signal strength is below or pass a defined signal strength threshold defined
in UE\'s policy or the report instruction from home network, without requiring
to UE to report detail information of the target network.
### 6.36.3 Procedure
#### 6.36.3.1 UE-based procedure
The procedure will use the same procedure as defined in clauses 5.30.2.4 and
5.30.3.4 of TS 23.501 [3] for NPN hosting network selection with the new added
validity condition consideration, such as location, time, and coverage.
#### 6.36.3.2 UE-and-Network-coordination- based procedure
Figure 6.36.3.2-1
In this example, UE1 is connecting with the home network before home network
decides to steer UE to other hosting network. Home network D wants to steer
UE1 to hosting SNPN B in that area because user or home network wants to use a
specific local service which can\'t be accessed by home network or other
business reasons. Before home network sending steer instruction to UE, home
network needs to make sure UE1 is in the good coverage of SNPN B.
**For method 1:**
1a. Home network D queries network performance Analytics or observed Service
Experience related network data analytic for the area of UE1 location as
defined in clauses 6.6 and 6.4 of TS 23.288 [17], via NEF provided by SNPN B.
2a. SNPN B provides home network D with the network performance or service
experience information of the queried area, which indicates UE1 may be in the
good coverage area of SNPN B and expected to received good connection
services.
**For method 2:**
1b: Home network D uses UPU to update a UE policy to trigger UE to measure the
signal strength of hosting SNPN B with the defined threshold.
2b: UE1 responses home network D UPU ACK with reporting an indication that the
signal threshold of SNPN B is higher than the threshold.
3: Based on the report from either method 1 or method 2, Home network D knows
UE1 is in the good coverage of hosting network SNPN B.
4\. Home network D sends SoR instruction to steer UE1 to hosting SNPN B.
### 6.36.4 Impacts on services, entities and interfaces
**Option 1 UE-based:**
UE:
\- Supports network selection considering the new validity conditions which
are part of UE network selection policy provided by the home network.
**Option 2 Network-and-UE-coordination based (Method 2):**
UE:
\- Receives new hosting network measurement policy from home network.
\- Reports if the hosting network signal strength is higher or lower than the
signal threshold provided by the home network.
UDM:
\- Provides UE the hosting network measurement policy including the signal
threshold of hosting network which UE can compare with and report to the home
network if the actual measurement is higher or lower than this threshold.
\- Receives the report from UE on if the hosting network signal strength is
higher or lower than the signal threshold provided by the home network.
## 6.37 Solution #37: Enabling access to localized services via a specific
hosting network
### 6.37.1 Introduction
This is a solution to Key Issue #5, \"Key Issue #5: Enabling access to
localized services via a specific hosting network\".
This key issue aims at addressing the following aspects:
\- How and whether the home network, determines the service availability of a
hosting network, and interacts with hosting network to authorize home
network\'s subscribers to access home network services via the hosting
network, at certain time and location, coverage of the hosting network and
services offered by the hosting network.
\- How to enable UE to access both home network services and localized
services via the hosting network, and seamless service continuity for home
network services and localized services when UE moves between different
networks providing the same services. This includes how to configure UE with
information enabling the UE to be aware of services that can be accessed via a
specific network (e.g. home network or hosting NPN).
\- How home network determines the need to steer or instruct the UE, and how
the home network steers or instructs the UE to select a hosting network for
obtaining home network services or localized services or to select a network
for a specific service which is available from both hosting and home network.
### 6.37.2 Functional Description
**The solution defines a new network function LSF (Localized Service Function)
in the home network and hosting network that specifically handles information
related to localized services. The LSF in the hosting network maintains UE
subscription information and the locations it has agreement with the home
network to provide service.**
**This new Network Function will provide information to AMF about all
localised services that are available at the UE location. This information can
be indicated to the UE during the registration procedure or after it is
registered. The availability of the localized services will be indicated to
the UE using NAS signalling message.**
**Activation or deactivation of any new localized service in the location is
handled by this new NF or updated in the new NF.**
**3rd Party Application Server can contact the LSF to configure number of
users allowed (dynamic load balancing) (e.g. AF) via the NEF (after NEF has
verified the 3rd Party Application Server contacting it).**
**Various localized services can be provided by the hosting network. The list
of all such localized services at various locations is maintained by the LSF.
The user will be informed of all such various localized services, provided by
the same hosting network, using NAS signalling messages or over the user
plane. This will help users to make an informed selection or activation of
localized services on the local hosting network.**
Editor\'s note: How the LSF can communicate with the UE via user plane in FFS.
**The LSF would be accessible within the NPN Core Network and it keeps track
of one or more location based services for different coverage locations in
PLMN or NPN.**
**The AMF can query the LSF in order to determine the presence of localised
services for the UE location and the LSF provides the list of localised
services to the AMF.**
**Once the AMF determines that location services can be provided in a certain
location, utilizing the Home Routed roaming architecture, the core network can
then provide services offered by home network and simultaneously offload
localized service traffic to the hosting network.**
Editor\'s note: How offloading of localized service traffic to the hosting
network is realized is FFS.
**LSF provides \"event based\" reporting to NFs (e.g. AMF) to dynamically
update the AMF about any services that are currently available based on load
conditions.**
Editor\'s note: What the \"load conditions\" are is FFS.
Editor\'s note: How subscriber data is considered is FFS.
### 6.37.3 Procedures
### 6.37.4 Impacts on services, entities and interfaces
UE:
\- NAS support for LSF-related functionality.
AMF:
\- New interface messages between LSF and AMF.
\- NAS support for LSF-related functionality.
LSF:
\- Maintains list of available localized services and provides it to UE via
AMF.
NEF:
\- Provides API for LSF-related functionality.
## 6.38 Solution #38: Sequential deregistration by hosting network
### 6.38.1 Introduction
The solution addresses the KI#6: Support for returning to the home network.
The congestion of home network is unavoidable if large number of UEs return to
the home network as soon as Localized service is terminated. This solution
proposes to control the number of returning UE based on service level
agreement between the home network and hosting network.
### 6.38.2 Functional Description
This solution assumes that
\- There is service level agreement between the home network and hosting
network.
\- The hosting network configures the AMF with maximum number of returning UEs
for the given units of time for each of home network, e.g. 10 UEs per second
for PLMN A. The home network operator can determine the maximum number of
returning UEs e.g. considering the network processing capability and notifies
it to the hosting network via service level agreement.
\- The AMF of hosting network knows termination time of Localized services.
When the Localized service is terminated, the AMF of hosting network triggers
deregistration procedure. The AMF selects UEs from different home networks
considering maximum number of returning UEs configured in the AMF. The AMF
triggers deregistration for the selected UEs in sequence and ensures that
number of returning UEs for each home network does not exceed the configured
maximum number of returning UEs for the given units of time.
NOTE 1: If many UEs trigger deregistration without waiting for network
initiated deregistration, the AMF cannot control the number of returning UEs.
In order to give some time to the AMF to trigger deregistration in a sequence
manner, service termination time provided to the UE can be later than the
actual service termination time. The time gap can be determined considering
the expected number of returning UEs and maximum number of returning UEs for
the given units of time for the home network.
NOTE 2: How the AMF enforces maximum number of returning UE is not specified
by 3GPP specification and it is up to implementation.
### 6.38.3 Procedures
Figure 6.38.3-1: Overall procedure
1\. The AMF is configured with the maximum number of returning UEs for the
given units of time for each of home network.
2\. The UE registers to the hosting network for localized service. The AMF
stores the home network of the UE.
When the UE registers to the hosting network, the AMF needs to identify the
home network of the UE in order to associate the configuration in step 1 with
the UE. The Registration Request from the UE includes valid 5G-GUTI (and
optionally NID in the case of SNPN assigned case) regardless of whether the
5G-GUTI is assigned by PLMN or SNPN (See NOTE). Based on the received 5G-GUTI
(and optionally NID), the AMF in hosting network knows home network of the UE.
NOTE 1: 5G-GUTI is assigned by PLMN or SNPN the UE last registered with. In
the case of roaming, the UE provide 5G-GUTI assigned by roaming network. Then
AMF applies the maximum number of returning UEs of the roaming network.
3\. After Localized service is terminated, the AMF triggers deregistration in
a sequence manner so that the number of returning UEs does not exceed the
configured maximum number of returning UEs. The AMF indicates that Localized
service is terminated in the Deregistration Request message. The UE returns to
the home network. The UE does not re-register to the hosting network again
based on received indication from the AMF.
NOTE 2: The AMF can also take into account UE-initiated deregistered UEs when
the AMF enforces maximum number of returning UE.
### 6.38.4 Impacts on services, entities, and interfaces
UE:
\- If the AMF indicates that Localized service is terminated in the
Deregistration Request message, the UE finishes deregistration procedure and
returns to the home network.
\- The UE includes valid 5G-GUTI (and optionally NID in the case of SNPN
assigned case) regardless of whether the 5G-GUTI is assigned by PLMN or SNPN.
AMF:
\- The AMF is configured with maximum number of returning UEs for the given
units of time for each of home network. The AMF triggers deregistration in a
sequence manner so that number of returning UEs does not exceed configured
maximum number of returning UEs.
\- The AMF indicates that Localized service is terminated in the
Deregistration Request message.
## 6.39 Solution #39: Local hosting network specific back-off timer
### 6.39.1 Introduction
This solution addresses the Key Issue #6.
When a PLMN cannot accept a registration request due to congestion, the PLMN
rejects the registration request with 5GMM cause value #22 (congestion) and
assigns a value for back-off timer T3346 [7]:
_If the initial registration request is rejected due to general NAS level
mobility management congestion control, the network shall set the 5GMM cause
value to #22 \"congestion\" and assign a value for back-off timer T3346._
_If the mobility and periodic registration update request is rejected due to
general NAS level mobility management congestion control, the network shall
set the 5GMM cause value to #22 \"congestion\" and assign a value for back-off
timer T3346._
Assigning random back-off timer values from a pre-defined range that is the
same for all different hosting networks may lead to unnecessary waiting time
when the users return to their home network. As a local hosting network that
provides localized services can be a temporary network, provide specific
service(s) for a limited time (minutes to hours) and serve a variety of number
of subscribers from different home networks (very low to very high number of
users accessing the localized service), there can be a local hosting specific
back-off timer range which can be used to spread out re-registration request
from home network subscribers in a more effective way by means of waiting
time. For example, if the number of users accessing to a hosting network is
relatively small, a shorter range of backoff timer may be considered for these
users.
This solution proposes a local hosting network-specific flexible back-off
timer range and back-off timer assignment to spread out the registration
attempts over time and limit the number of users attempting to register back
to their home network simultaneously in order to avoid signalling overload and
unnecessary waiting times for the returning users.
### 6.39.2 Functional Description
The proposed solution focuses on hosting network-specific timer range that is
used to trigger network re-selection process for the home network subscribers
that have just terminated the local service.
When a UE has connected to a hosting network for a localized service(s) and
attempted to register back to its home network, the UE uses a new registration
type or indicator to indicate that the UE was temporarily connected to a local
hosting network and now is requesting a re-registration to its home network.
In this new registration type or indicator, the UE also indicates the
identifier of the hosting network to its home network.
When a home network receives simultaneous registration requests with the
hosting network re-registration information from a high number of its
subscribers and cannot accept all the registration requests (congestion), the
home network rejects the registration requests with a local hosting network-
specific back-off timer.
The home network uses the hosting network identifier information provided
along with the new registration type or indicator sent by the UE, determines a
local hosting network-specific back-off timer range that is specific to the
identified local hosting network and assigns a value for a back-off timer to
the UE from the local hosting network-specific back-off timer range.
### 6.39.3 Procedures
Figure 6.39.3-1 shows the flow of registration request with hosting network
re-registration information and home network response to spread out any
congestion by making use of local hosting network identifier and local hosting
network specific timer range. It is worth to note that the given flow only
considers the case when there is a congestion. In the case that there is no
congestion, the home network can handle the registration request with the
hosting network re-registration information conventionally and sends a
registration accept message.
Figure 6.39.3-1: Application Function based network re-selection triggering
procedure
Procedure:
1\. UE sends REGISTRATION REQUEST message to its home network. In order to
indicate that the UE has temporarily accessed to local service(s) provided by
a local hosting network, UE includes an information in the REGISTRATION
REQUEST message along with the local hosting network identifier.
2\. In steps 2a and 2b, it is considered that there is a congestion due to
having high number of users sending REGISTRATION REQUEST messages to their
home network and the home network cannot handle that many simultaneous
registration requests. Therefore, in step 2a, the home network AMF determines
the range of the local hosting network-specific back-off timer and assigns a
value to UE from that range. In step 2b, the 5GMM cause that indicates the
congestion and home network AMF provides the chosen back-off timer in the
REGISTRATION REJECT message to the UE.
3\. If the UE received the REGISTRATION REJECT message along with the local
hosting network related 5GMM congestion cause and the associated timer, the UE
waits until the expiry of the allocated back-off timer value. Upon the expiry
of the back-off timer, the UE repeats step 1 and sends another REGISTRATION
REQUEST message.
### 6.39.4 Impacts on services, entities and interfaces
AMF:
\- Support a new registration request type/indicator related local hosting
network re-registration (i.e. \"re-registration from hosting network\" or
\"local network access indication\").
\- Support a local hosting network-specific back-off timer range assignment.
UE:
\- Support sending of the new registration request (i.e. \"re-registration
from hosting network\" or \"local network access indication\").
## 6.40 Solution #40: Credential provisioning for accessing hosting network
### 6.40.1 Introduction
This solution addresses the Key Issue #4 aspect regarding how UE is
provisioned with credential to access hosting network, and the Key Issue #5
aspect regarding how home network to steer UE to the hosting network.
This solution covers the function described in solution #7 step H4 and step
H5.
### 6.40.2 Functional Description
Based on the principle of User Plane Remote Provisioning mechanisms specified
in clause 5.30.2.10.4.4 of TS 23.501 [3], this solution enables the
provisioning of hosting network credentials to UE.
This solution assumes hosting network is SNPN.
UE is assumed to have regular network credential(s) from a home network (e.g.
a credential from a PLMN operator) and is currently registered in a serving
network which can be the home network itself, or another network that UE is
using home network credential to access.
UE is also assumed to be provisioned with information related localized
service, such as which hosting networks can provide access to the desired
localized service. The solution for provisioning localized service information
is addressed by other solutions.
### 6.40.3 Procedures
Figure 6.40.3-1: Credential provisioning for accessing hosting network
0\. UE registers in a serving network using home network credential.
1\. UE is provisioned with information related localized service, such as
which hosting networks can provide access to the desired localized service
(e.g. Solution #24), optionally credential related information (e.g. PVS
address, etc) for accessing localized service, and at the same time
provisioned with network capability to support User Plane Remote Provisioning
of credential for accessing hosting network.
2\. End user makes a selection of one or more specific hosting network(s) to
access the desired localized service, or one or more specific localized
service.
If the UE is provisioned with Credentials Holder controlled priority list for
SNPN selection (see TS 23.501 [3] clause 5.30.2.3) and the priority lists are
used for hosting network selection, UE can determine whether its home network
credential can be used to access the hosting network, by comparing the
priority lists with the information received in step 1. If home network
credential can be used to access the desired hosting network, step 3 to 5 are
skipped.
NOTE: Whether and how the Credential Holder controlled priority lists are
extended for hosting network selection is discussed by other solutions.
3\. The UE initiates the PDU Session Establishment procedure for remote
provisioning of credential related information (e.g. PVS address, etc). Along
with a PDU Session Establishment procedure, UE can request for credential
related information (e.g. PVS address, etc) of the hosting networks for
accessing localized service if it is not already provisioned.
The UE\'s request of credential related information includes one or more
identifier(s) of the selected hosting network(s), and/or one or more
identifier(s) of the selected localized service(s).
The UE\'s request can be either as part of the UL NAS Transport message or
inside the PDU Session Establishment Request message which is the payload
container of the UL NAS Transport message.
4\. PDU Session Establishment is accepted by SMF.
AMF or SMF has a locally configured mapping table between [Credential
Information] and [Hosting network identifier] for a specific localized
service. AMF or SMF can return the corresponding [Credential Information] to
the UE, based on UE\'s request and the configured mapping table.
Whether it is AMF or SMF to return the [Credential Information] to UE, depends
on if the UE\'s request is part of UL NAS Transport message, or is inside the
PDU Session Establishment Request message.
The [Credential Information] associated with one hosting network in the
mapping table consists of:
\- Indication of whether home network credential can be used as CH credential
for the hosting network, if the serving network is the home network;
\- FQDN or IP address of the PVS.
UE can request network to return all available hosting network\'s credential
information for the desired localized service, by specifying the localized
service identifier in the request.
5\. UE connects to the PVS for remote provisioning of credential, and stores
information associated with the newly obtained credential, e.g. the
corresponding hosting network, the type of the credential (native or Default
UE Credentials), etc. If home network credential can be used as CH credential
to access the hosting network SNPN, this step can be omitted.
If home network credential can be used as CH credential to access the hosting
network SNPN, automatic network selection can be applied.
6\. The UE initiates the de-registration procedure. If the selected localized
service(s) are about to start (or have started), the UE needs to select the
hosting network.
If the serving network is home network, the redirection to hosting network can
be triggered as below:
\- The UE includes in the de-registration request the identifier of the
selected hosting network for accessing a localized service; or
\- The UE indicates in the de-registration request message with cause
\"redirection is requested\", if in step 3 only single hosting network
identifier is requested by UE and the request is handled by AMF.
After de-registration accept, the AMF informs the NG-RAN via NGAP about the
selected hosting network identifier, e.g. as new IE in the UE CONTEXT RELEASE
COMMAND for that UE. If the NG-RAN is aware of neighbouring cells within the
UE\'s selected hosting network identifier, the NG-RAN assists the UE in
finding the hosting network by sending an RRC release with redirect message
(frequency and optionally cell information) or RRC release with multiple
frequencies to the UE.
\- If the UE does not receive any redirect information in the RRC release
message, the UE performs cell/network search to find/select the hosting
network.
### 6.40.4 Impacts on services, entities, and interfaces
UE:
\- Request Credential information by indicating the selected hosting
network(s) or selected localized service(s).
\- Use the obtained credential based on the associated type to access hosting
network.
\- Indicate to the network during de-registration a redirection to hosting
network is preferred.
AMF/SMF:
\- Configure the mapping of [Credential Information] and [Hosting network
identifier] for specific localized service
\- Respond to UE with proper [Credential Information] associated with a
hosting network SNPN.
AMF/RAN:
\- Redirect the UE to hosting network based on the input from UE.
\- Extend the NG-AP message (UE CONTEXT RELEASE COMMAND) and RRC message (RRC
Release) with hosting network redirection information.
## 6.41 Solution #41: Provisioning of Credentials via Hosting Network PDU
Session
### 6.41.1 Introduction
This solution takes ideas from Sol#22.
This solution is mainly focuses on Key Issue#4 regarding how to provision UE
with credentials for Localized service. It tries to solve the case of how to
access Localized services when UE has neither any prior subscription with
Hosting network nor with the Localised service provider (clause 5.7 of TR
22.844 [12]). The solution thus proposes how Hosting network can perform \"on
boarding\" of UE for a particular localised service.
It also provides ideas for Key Issue#3, focusing on what kind of information
needs to be exchanged between Localized service provider and the Hosting
network.
The solution proposes to provision the credential to the UE via a restricted
PDU Session. User may choose a particular Localized service based on
information displayed on its mobile phone, and based on the chosen service and
local configurations, AMF and SMF may create a session for the UE via which UE
can connect to a captive portal pay for the services and then be provisioned
the required credentials for accessing the Hosting network.
During the service agreement between Localised service provider and the
Hosting network, details of captive portal may be provided by the Localised
service provider to the Hosting network.
If the Hosting network is able to authenticate UE using its Home Network
credentials, even then UE may require new credentials for accessing localised
services (because UE\'s current subscription does not include Localised
services usage).
If the Hosting network is not able to authenticate the UE using its Home
network credentials, then provisioning can be RLOS based.
### 6.41.2 Functional Description
Localized service provider may provide captive portal information, whether to
create a restricted PDU Sessions for provisioning for the UE and/or DNAI,
S-NSSAI information for the restricted PDU Session etc. during service
agreement phase.
As per the agreement between Localised service provider PCF may configure
captive portal information/redirection information to SMF (SMF may provide it
to UPF in form of FAR rules).
User may manually select a particular Hosting Network.
The User may then choose a particular Localised service based on the list of
available Localized service provided by the Hosting network. This information
may be available to the UE by some other solution (e.g. Sol#26 or Sol#34). A
NAS request will be sent to UE requesting for further information regarding
provisioning of Credentials for the particular Localized service.
The AMF then decides to generate a PDU session which may be restricted in
terms of time and the destination traffic, for the UE based on the chosen
localised service. If the UE did not choose any service, based on local
configuration UE\'s session may be established to a particular portal (e.g. a
default Localized service configured locally).
NOTE: It may be possible that the UE cannot be primarily authenticated. Then
decision to generate the PDU Session is based on local policies. SA3
collaboration might be needed.
Once the AMF finds (based on local policies) that Restricted PDU Session can
be created for the UE's requested Localized Service, it may provide UE with
the PVS address related to the particular Localized service and an indication
that the UE can use this Hosting Network for Provisioning of Credentials for
the particular Localized service.
UE then proceeds to Request PDU Session establishment procedure with providing
additionally the name of the requested Localized service so that the SMF may
request the corresponding policy from PCF or use the local configuration based
on the Localized Service name.
The information related to Restricted PDU session may include the following:
\- Localized service name
\- Max duration of PDU Session (time bound)
\- Redirection information
\- Max data through this PDU Session etc.
### 6.41.3 Procedures
Figure 6.41.3-1: Provisioning Localised service credentials via the Hosting
network
High level details of the Procedure is described as follows:
0\. User may manually choose a particular Hosting network which provides a
localized service.
Editor\'s note: It is FFS how UE will register if it cannot be authenticated
with the Home Network credentials. To decide whether RLOS-based provisioning
of credentials can be used.
1\. NAS request: UE may include the selected localised service in the request.
The details of how this information is available to UEs is assumed to be
provided by other solutions.
2\. AMF decides to create a PDU Session for provisioning purposes.
AMF can be configured with the information, on a per Localized service, which
may include LSP provisioning server address, whether Restricted PDU Session
can be created or not etc.
3\. NAS Downlink Message (AMF to UE) which may include DNN, S-NSSAI, an
indication to trigger PDU Session creation.
AMF can send UE an indication related to \"Provisioning for localised
service\"; which, based on UE implementation, may launch a particular
application (e.g. web browser) that will initiate the PDU Session
establishment.
For example based on the indication sent by the AMF, UE may display a
notification to the User informing about provisioning of credentials. User may
click the notification and a particular application (UE implementation
specific) may launch, thus starting the PDU Session establishment.
Editor\'s note: Security implications of the AMF triggering the UE to a PDU
session establishment need to be assessed by SA3. Potentially, any serving
network may trigger the UE to establish a PDU session to any target
DNN/S-NSSAI.
4\. PDU Session Establishment Request (UE to AMF): In addition UE includes the
name of Localized Service in the request.
5\. AMF sends Nsmf_PDUSession_create to the SMF
6\. SMF creates a PDU session by providing appropriate information to UE and
UPF. The session may be time bounded, and filtered for Destination addresses
etc.
7a-7b. UE connects to the external portal and gets the credentials. Details of
this step are out of 3GPP scope.
NOTE: UE\'s PDU Session may be redirected to the captive portal by using
PDR/FAR rules installed by SMF based on PCF policies.
8\. UE performs authentication/authorization with the new credentials. This
may also involve sending UE a new Initial Registration to the Hosting network.
### 6.41.4 Impacts on services, entities and interfaces
AMF/SMF capability to create a restricted PDU Session. Support for RLOS
PCF capability update SMF/AMF regarding information of restricted portal,
captive portal information etc.
PCF capability to store and provide SMF policies for restricted PDU Session
based on UE capability to initiate PDU Session based on AMF
trigger/indication.
Editor\'s note: The security impacts shall be evaluated by SA WG3.
## 6.42 Solution #42: Solution of UE requesting for hosting network selection
and access information via visiting network
### 6.42.1 Introduction
This solution mainly addresses Key Issue #4 and focuses on this scenario: the
UE\'s home network is not aware of the existence of hosting network or
localised service. This scenario may exist when the UE\'s home network is in
one country while the hosting network is in another country. It is not
realistic for the hosting network to establish business relationship with all
the UE\'s home networks all over the world. However, the hosting network can
establish business relationship with the networks within the same country.
### 6.42.2 Functional Description
In this solution, it is proposed that when the UE is roaming in a visiting
network, the UE requests for hosting network selection and access information
via the visiting network. The serving network sends the hosting network
selection and access information to the UE\'s home network after obtaining it.
The UE\'s home network then sends the hosting network selection and access
information to the UE. A visiting network is a network which has roaming
agreement with UE\'s home network.
This solution is applicable to the scenario where the hosting network is an
SNPN.
The Hosting Network Selection and Access Information consists the following
information:
\- Hosting Network Identifier, e.g. SNPN ID in the case of the hosting network
is an SNPN.
\- The time condition information when the hosting network provides access
service.
\- The location condition information where the hosting network provides
access service.
\- Optionally, credential used for the UE to access the hosting network.
The UE receives the Hosting Network Selection and Access Information from the
localized service provider. The UE selects a hosting network when the time and
location condition information is satisfied.
### 6.42.3 Procedures
Figure 6.42.3-1: UE requests for hosting network selection and access
information via visiting network
1\. The UE sends Registration Request message to the AMF of the visiting
network, including request of obtaining hosting network selection and access
information. Localized service ID is included in Registration Request,
indicating the localized service which the UE wants to access. How the UE
knows about the Localized service ID may be out of 3GPP scope or addressed by
other solutions.
NOTE 1: The UE can perform the request of obtaining hosting network selection
and access information during initial registration request or mobility
registration request.
2\. Steps 6-14 in clause 4.2.2.2.2 of TS 23.502 [4] are performed. The AMF of
the visiting network obtains UE ID (e.g. GPSI) form the UDM.
3a. The AMF of the visiting network sends Service Authorization Request (UE
ID) to the AF of the corresponding localized service provider via NEF. The
Service Authorization Request is used to request the localized service
provider to authorize the UE to use the localized service.3b. The AF of the
localized service provider authorizes the UE to use localized service and then
sends Service Authorization Response to the AMF of the visiting network,
including hosting network selection and access information.
NOTE 2: How the AF of the localized service provider authorizes the UE to use
localized service may be out of 3GPP scope, e.g. the user of the UE paid for
the localized service offline.
4\. The AMF of the visiting network sends the hosting network selection and
access information to the UDM of the UE\'s home network.
5\. The UDM of the UE\'s home network sends the hosting network selection and
access information to the UE using SoR or UPU procedure.
### 6.42.4 Impacts on services, entities, and interfaces
UE impact:
\- Ability to requests for Hosting Network Selection and Access Information
from AMF of a visiting network.
\- Ability to receive Hosting Network Selection and Access Information via SoR
or user parameter update procedure.
Visiting Network impact:
\- AMF: Ability to receive request for Hosting Network Selection and Access
Information from the UE. Ability to send Service Authorization Request to the
AF of the localized service provider via NEF and receive Hosting Network
Selection and Access Information. Ability to send Hosting Network Selection
and Access Information to the UDM of the home network.
\- NEF: Ability to transfer Service Authorization and Hosting Network
Selection and Access Information between the AMF and the AF of the local
service provider.
Home Network impact:
\- UDM: Ability to receive Hosting Network Selection and Access Information
from the AMF of the visiting network and sends Hosting Network Selection and
Access Information to the UE using SoR procedure or user parameter update
procedure.
## 6.43 Solution #43: Solution for Transferring hosting network selection
information from hosting network to UE\'s home network
### 6.43.1 Introduction
This solution mainly addresses Key Issue #4 and focuses on this scenario: the
UE\'s home network has business relationship with hosting network, but not
with the Localized service provider.
This solution is applicable to the scenario where the hosting network is an
SNPN or a PNI-NPN.
### 6.43.2 Functional Description
In this solution, it is proposed that when the UE establishes business
relationship with the Localized service provider, e.g. buying tickets, then
the Localized service provider could notify the Hosting network and then
trigger the Hosting network to send hosting network selection and access
information to the UE via the UE\'s home network.
The Hosting Network Selection and Access Information consists the following
information:
\- Hosting Network Identifier, e.g. SNPN ID in the case of the hosting network
is an SNPN, CAG ID in the case of the hosting network is a PNI-NPN.
\- The time condition information when the hosting network provides access
service.
\- The location condition information where the hosting network provides
access service.
The UE receives the Hosting Network Selection and Access Information from the
localized service provider. The UE selects a hosting network when the time and
location condition information is satisfied.
### 6.43.3 Procedures
Figure 6.43.3-1: Hosting network selection and access information transfer
from hosting network to UE\'s home network
0\. The UE establishes business relationship with the Localized service
provider.
NOTE 1: This step may be out of 3GPP scope, e.g. the user buys a ticket for a
football match.
1\. The Hosting network AF may subscribe Localized service registration
notification towards the UDR in the Hosting network.
NOTE 2: This step is optionally performed. Otherwise, the UDR can be
configured to report of localized service registration to the AF.
2\. The AF of Localized service provider sends Notification of Localized
service registration to the UDR of Hosting network via NEF of Hosting network.
Notification of Localized service registration describes the UE is
successfully perform registration to the Localized service. Localized service
ID and UE ID (e.g. UE\'s phone number) are included in this notification
message.
3\. The UDR in the Hosting network sends Report of Localized service
registration to the AF of the Hosting network.
The UDR may also include DNN and S-NSSAI in Hosting network corresponding to
the Localized service.
4\. The AF of the Hosting network sends Hosting network selection and access
information to the UDM of the UE\'s home network via NEF of the home network.
UE ID is also included in the message.
DNN and S-NSSAI in Hosting network corresponding to the Localized service is
also included in the message if received in step3.
NOTE 3: The AF of the Hosting network can use the UE\'s phone number to
determine UE\'s home network.
Editor\'s note: whether message 4 is a message via NEF or BSS communication is
FFS as intention is to make an update of the subscription.
5\. The UDM of the UE\'s home network sends the hosting network selection and
access information to the UE using SoR or UPU procedure.
The UDM may update the UE\'s subscription to allow the UE to use DNN and
S-NSSAI in Hosting network when the UE wants to use the Localized service.
### 6.43.4 Impacts on services, entities, and interfaces
UE impact:
\- Ability to receive Hosting Network Selection and Access Information via SoR
or user parameter update procedure.
Home Network impact:
\- UDM: Ability to receive Hosting Network Selection and Access Information
from the AF of the Hosting network and sends Hosting Network Selection and
Access Information to the UE using SoR procedure or user parameter update
procedure.
\- NEF: Ability to transfer Hosting Network Selection and Access Information
from the AF in the Hosting network to the UDM.
Hosting Network impact:
\- AF: Ability to receive Hosting Network Selection and Access Information
from the UDM of the hosting network and send the information to the UDM in
Home network. Optionally, ability to subscribe report of Localized service
registration for UEs. Hosting Network Selection and Access Information.
\- UDR: Ability to send report of Localized service registration to AF of
Hosting network and send Hosting Network Selection and Access Information to
the AF of the Hosting network.
Localized service provider Network impact:
\- AF: Ability to send notification of localized service registration to
Hosting Network.
## 6.44 Solution #44: Solution on top of Solution #10 for Serving Network to
assist in discovery of hosting networks
### 6.44.1 Introduction
The solution addresses Key Issue #4 (Enabling UE to discover, select and
access NPN as hosting network and receive localized services) and builds on
top of Solution #10.
### 6.44.2 Functional Description
#### 6.44.2.1 General
This solution is based on Solution #10, and builds on top assistance from the
serving network for discovery of hosting networks.
It assumes that:
\- The UE is configured for automatic selection of hosting networks for
localized services as per Solution #10.
\- The hosting network and serving network have a service level agreement,
part of which is serving network assisting in search for hosting network.
\- In such agreement, the serving network knows the frequency bands at which
the hosting network operates, although it does not need to know any other
information regarding localized services or any other information.
In this solution, two options for Serving Network assistance in discovery of
hosting networks are proposed.
#### 6.44.2.2 Serving network assistance information in SIB
In this option, the NG-RAN is configured, in the area where the agreement has
been made, to broadcast in SIB the frequency bands where hosting networks are
available. This option assumes that the serving network and hosting network(s)
are willing to make the information available to any UE that is interested in
this information.
If a UE is configured with automatic selection of hosting networks for
localized services as per Solution #10, the UE may use the information in SIB
to narrow down the search of hosting networks to the broadcasted frequencies.
All other triggers and conditions as described in Solution #10 are not altered
by this frequency band assistance information received in SIB.
NOTE: The frequency bands for hosting network information provided in SIB do
not guarantee the actual presence of a specific hosting network in any of
those bands at a specific time. This avoids the need for networks that are
dynamically enabled and disabled for hosting network operation to update the
serving network each time the hosting network is enabled/disabled.
#### 6.44.2.2 Serving network assistance via dedicated signalling
This option assumes that the serving network and hosting network agree that
only authorized UEs are subject to receive hosting network search assistance
information.
In this option, the NG-RAN is configured with information on frequency bands
where hosting network(s) may potentially be present.
This information is provided by NG-RAN to authorized UEs in RRC signalling as
follows:
\- The UDM contains as part of UE subscription information one bit indicating
that the UE is enabled to receive assistance for hosting network discovery.
\- During registration procedure, the UDM provides to the AMF in subscription
information that the UE is enabled to receive assistance for hosting network
discovery.
\- The AMF provides to NG-RAN, in every N2 initial UE context establishment,
an indication that UE is enabled to receive assistance for hosting network
discovery.
\- During RRC connection establishment, a UE that is interested in discovering
hosting network(s) for localized services requests in RRC to receive
assistance information.
\- The NG-RAN, based on this indication from AMF, provides the UE with hosting
network search assistance information, containing frequency band(s) with
potential hosting network availability.
### 6.44.3 Procedures
#### 6.44.3.1 Procedure for Hosting network search assistance information in
SIB
Figure 6.44.3.1-1 shows the procedure for a serving network to assist the UE
in searching for hosting networks in SIB.
Figure 6.44.3.1-1: Hosting network search assistance information in SIB
0\. The UE is assumed to have been configured for automatic selection of
hosting networks for localized services as per Solution #10.
1\. The NG-RAN in the serving network is configured (based on SLA with hosting
network(s)) to broadcast in SIB hosting network search assistance information,
containing frequency band(s) with potential hosting network availability.
2\. If the hosting network search assistance information is present in SIB,
the UE proceeds as per Solution #10, with the additional behaviour that the UE
may narrow down or prioritize the frequency bands present in the hosting
network search assistance information when searching for hosting networks.
#### 6.44.3.2 Procedure for Hosting network search assistance information in
SIB
Figure 6.44.3.2-1 shows the procedure for a serving network to assist the UE
in searching for hosting networks via RRC signalling.
Figure 6.44.3.2-1: Hosting network search assistance information in RRC
1\. A UE that is interested in discovering hosting network(s) for localized
services indicates this in RRC connection establishment.
2\. During registration procedure, regular steps as defined in TS 23.502 [4]
are executed with the following differences:
\- In step 14, the UDM provides the AMF with an indication that the UE is
enabled for Hosting Network search assistance. The AMF stores this indication
in UE context.
\- In step 21, the AMF provides the NG-RAN with an indication that the UE is
enabled for Hosting Network search assistance.
3\. If the UE indicated it is interested in discovering hosting networks, the
NG-RAN received an indication from AMF that UE is enabled for Hosting Network
search assistance, the NG-RAN based on configuration provides the UE with
Hosting network search assistance information containing frequency band(s)
with potential hosting network availability. The UE proceeds as per Solution
#10, with the additional behaviour that the UE may narrow down or prioritize
the frequency bands present in the hosting network search assistance
information when searching for hosting networks.
4\. In any subsequent procedure where an N2 Initial UE context is established
(e.g. subsequent registration procedure, service request procedure, etc), the
procedure is unchanged except for the following additional flow of
information:
\- The AMF provides the NG-RAN with an indication that the UE is enabled for
Hosting Network search assistance.
\- If the UE indicated it is interested in discovering hosting networks, the
NG-RAN received an indication from AMF that UE is enabled for Hosting Network
search assistance, the NG-RAN based on configuration provides the UE with
Hosting network search assistance information containing frequency band(s)
with potential hosting network availability. The UE proceeds as per Solution
#10, with the additional behaviour that the UE may narrow down or prioritize
the frequency bands present in the hosting network search assistance
information when searching for hosting networks.
### 6.44.4 Impacts on services, entities and interfaces
The solution has the following impacts in addition to the impacts mentioned in
Solution #10:
UE:
\- For SIB option: Receive new Hosting Network search assistance information
in SIB.
\- For RRC option: Receive new Hosting Network search assistance information
in RRC.
\- Use that information to narrow down of prioritize search for hosting
networks in the received frequency bands.
NG-RAN:
\- For SIB option: Broadcasting in SIB the Hosting Network search assistance
information.
\- For RRC option: receive from AMF indication that UE is enabled for Hosting
Network search assistance, and provide Hosting Network search assistance
information for such UE via RRC signalling.
AMF (for RRC option only):
\- Receive in subscription information an indication that UE is enabled for
Hosting Network search assistance, and provide this indication NG-RAN over N2
signalling.
UDM (for RRC option only):
\- Include in subscription information to be provided to UE that UE is enabled
for Hosting Network search assistance.
## 6.45 Solution #45: Ensuring UE access localized service in the service
area/time
### 6.45.1 Introduction
This solution is aimed at KI#4 and KI#5. In order to ensure that UE accesses
the localized services within the location and/or time restriction based on
the specific localized service conditions, AMF and SMF need to determine
whether the UE meets the conditions that allows UE to obtain the localized
services. If UE does not meet the conditions, UE should stop obtaining the
localized services.
### 6.45.2 Functional Description
The solution is similar to the LADN mechanism that the AMF will determine
whether the UE meets the location condition of the localized service. In
addition, considering the time condition of the localized service, SMF shall
determine whether UE is allowed to obtain the localized service based on the
time restriction. Therefore, the differences between this solution and the
existing LADN mechanism are summarized as below:
\- If common DNN and/or S-NSSAI are used for localized services, a service
identifier shall be provided by the UE to the AMF and SMF in order to
determine the corresponding restriction.
\- When there are location conditions, AMF may perform different procedures to
determine the location of UE if different granularities of location conditions
are applied. For example, if TAI list is used for location restriction, the
existing mechanism defined in LADN can be reused. If cell Id list is used for
location restriction, AMF shall perform location report control with RAN to
obtain the cell Id where the UE is accessing to.
\- When there are time conditions, SMF may need to monitor the service time
after the UE starts obtaining the localized service.
\- When the UE does not meet the service condition (e.g. when UE is out of the
service area or when the service time is timeout), the SMF shall instruct the
UPF to stop transmitting the localized services to the UE or deactivate the
user plane if the PDU session is only used for the localized service.
### 6.45.3 Procedures
Figure 6.45.3-1: PDU Session Establishment for Localized Service
0\. UE and AMF can obtain or be configured with localized service information.
NOTE: The conclusion on how UE and AMF obtain or be configured with localized
service information will be applied to this solution.
1\. UE sends the PDU Session Establishment Request to the AMF. The message
includes DNN, S-NSSAI and optionally service ID(s). If common DNN and S-NSSAI
are used for different localized services with different service conditions,
the service ID(s) should be included in the request message in order to
determine the corresponding service condition.
2\. AMF determines the service conditions based on the DNN and/or S-NSSAI (or
service ID). AMF performs SMF selection.
3\. AMF sends Nsmf_PDUSession_CreateSMContext Request to the SMF including the
DNN, S-NSSAI and optionally service ID(s). In addition, AMF sends the service
condition to the SMF (e.g. service time).
4\. The PDU Session can be established as step 4 to step 17 in Figure
4.3.2.2.1-1 of TS 23.502 [4].
5\. When the PDU Session is established, the SMF should trigger the procedure
to determine whether the UE meets the service condition(s). If the localized
service has service area condition, the SMF should subscribe UE mobility event
notification to AMF, triggering the AMF to determine the UE location. If the
localized service has service time condition (e.g. the service duration time
is 2 hours), the SMF shall monitor the duration time that the UE has obtained
the localized service.
6\. AMF determines the service conditions based on the DNN and/or S-NSSAI (or
service ID). If the service conditions include service area and the service
area is TAI list, the existing mechanism in LADN can be applied. If the
service area is cell Id list, the AMF shall perform location report control
with RAN to obtain the cell Id where the UE is accessing to.
7\. If UE does not meet the service area conditions, the AMF should send a
notification to the SMF.
8\. When the SMF receives the notification from the AMF or when the SMF
determines that UE does not meet the service time condition, the SMF instructs
the UPF to stop forwarding the traffic flow of the service.
### 6.45.4 Impacts on services, entities, and interfaces
UE impact:
\- Ability to include localized service identifier in PDU Session
Establishment Request.
AMF impact:
\- Ability to determine the localized service conditions based on service ID.
\- Ability to determine whether UE is in the service area based on different
granularity of service area.
SMF impact:
\- Ability to perform session management based on service time conditions.
## 6.46 Solution #46: Accesses Localized Services via URSP rules
### 6.46.1 Introduction
In this solution, it addresses (KI#5) how the UE access the Localized Services
in the registered Hosting Network. To support the UE accesses the Localized
Services using URSP, the following preconditions should be fulfilled:
\- the Route Selection Validation Criteria (i.e. Time Window and Location
Criteria) of the matched URSP rules should be fulfilled.
To use the PDU Session for access the Localized Services in the Hosting
Network, the UE should evaluate the URSP rules. When the UE finds the Traffic
Descriptor (TD) of a URSP rule is matched, the UE starts to evaluate the Route
Selection Descriptor (RSD). Only when the field(s) of the Route Selection
Validation Criteria in the RSD is satisfied, the UE can access the Localized
Services via:
\- using the existing PDU Session; or
\- establishing the PDU Session based on the matched RSD.
### 6.46.2 Functional Description
After the UE successfully registers to the selected Hosting Network, the UE
may start to access the Localized Services. Before the UE initiates the PDU
Session Establishment procedure, the UE should evaluate the URSP rules.
The URSP rules could be:
\- provisioned (signalled) or pre-configured by the Home Network; or
\- provisioned (signalled) by the Hosting Network.
Furthermore, if the URSP rules are updated by Home Network or the Hosting
Network at the time when the UE is registered to the Hosting Network, the UE
can re-evaluate the URSP rules for the proper handlings for the corresponding
PDU Session for the Localized Services as specified in TS 23.503 [5].
NOTE 1: If Home Network is PLMN and Hosting Network is a PNI-NPN, and the UE
is accessing the Hosting Network using Home Network credentials, the URSP
rules can be only provisioned by UE\'s Home Network as specified in clause
6.6.2.2.1 of TS 23.503 [5]. General principle is used as specified in the
clause 6.6.2.2.1 of TS 23.503 [5]:
\- Only the URSP rules provisioned (signalled) by the PCF are used by the UE,
if both URSP rules provisioned (signalled) by the PCF and pre-configured URSP
rules are present.
Furthermore, the following principles are applied in the UE when the UE
evaluates the URSP rules for the Localized Services:
\- If the Home Network is PLMN and the Hosting Network is also PLMN, the UE
can only use the URSP rules provisioned (signalled) by the HPLMN of the UE.
\- If the Home Network is PLMN or SNPN and the Hosting Network is SNPN, the UE
uses the URSP rules as specified in clause 6.6.2.2.2 of TS 23.503 [5] if the
UE access the Hosting Network using the credentials from the Home Network as a
Credentials Holder (CH).
To Support the Localized Services, the Time Window and the Location Criteria
should be configured according to the Validity Information of the Localized
Services:
\- The Location Criteria can contain one or more types of location area as
specified in Table 5.2.2 of TS 24.526 [19]. For the Localized Services, the
Location Criteria could be TAI list which consists of the Hosting Network
information. Furthermore, a new Partial tracking area list can be used to
include NID information
\- The Time Window can contain \"Start Time\" and \"Stop Time\" for the
Localized Services as specified in Table 5.2.1 of TS 24.526 [19].
Only when the Route Selection Validation Criteria of the matched URSP rule are
satisfied, the UE can establish the new PDU Session or re-use the existing PDU
Session for the Localized Services.
### 6.46.3 Procedures
The solution reuses existing procedures.
### 6.46.4 Impacts on services, entities, and interfaces
UE:
\- To support new Partial tracking area list that includes NID.
H-PCF/V-PCF:
\- Support to update the URSP rules in roaming scenario as proposed in TR
23.700-85 [16].
## 6.47 Solution #47: Solution for mitigating overload at home network
### 6.47.1 Introduction
The solution addresses the Key Issue #6: Support for returning to home
network. Overload may happen when a high number of UEs attempt to re-register
to their home network simultaneously after accessing a localized service from
a temporary hosting network. This solution solves the problem of overloading
at home network by deregistering UEs from the hosting network in an adaptive
manner based on the input from the home network.
### 6.47.2 Functional Description
This solution makes the following assumptions:
\- There is a service level agreement between the hosting network and the home
network. The hosting networks identities, locations, and the available
localized services information are shared with the home network.
\- Hosting network subscribes to the home network AMF to get notification of
the allowed maximum number of returning UEs from the hosting network to the
home network AMF per unit time.
\- Based on the subscription, the home network AMF determines the hosting
network and the localized service specific the allowed maximum number of
returning UEs to the home network per unit time and notifies to the hosting
network AMF. For example, if there are 2000 UEs registered to the hosting
network for accessing the localized service, the home network notifies to the
hosting network that maximum 500 UEs can return to the home network per unit
time for 4 time units.
\- UDM coordinates with AMFs for selection of the allowed maximum number of
returning UEs in hosting network based on the notification from the home
network AMF. After the localized service is over, the hosting network selects
the allowed maximum number of returning UEs and deregisters them
simultaneously. For example, the hosting network selects 500 UEs from the
total 2000 UEs at first unit time and deregisters the selected 500 UEs
simultaneously (which 500 UEs selected for deregistration is implementation
specific).
\- If there is a change in the allowed maximum number of returning UEs to the
home network AMF per unit time from the hosting network due to less or high
number of attempts from the home network and other hosting networks UEs, then
the home network AMF notifies the new value (i.e. the new allowed maximum
number of returning UEs per unit time) to the hosting network in a new
notification. For example, the home network notifies to the hosting network in
a new notification that 1000 UEs can return to the home network AMF at third
unit time due to change in network condition.
\- The deregistered UEs select their home network or another hosting network
and initiate the registration procedure.
### 6.47.3 Procedures
#### 6.47.3.1 Adaptive deregistration procedure
Figure 6.47.3-1: Adaptive deregistration procedure
1\. There is a service level agreement between the hosting network and the
home network. Based on the agreement, the hosting networks identities,
locations, and the localized services information are shared with the home
network.
2a. UE initiates registration with the hosting network for accessing the
localized service.
NOTE 1: To identify the home network AMF of UEs, UEs share their home network
given 5G-GUTI value while registering to the hosting network. In the case of
roaming, UEs share 5G-GUTI of serving network that served last. Editor\'s
note: It is FFS that how UE deregistered from hosting network would select the
same serving network that served last in roaming scenarios.
2b. The hosting network AMF accepts the registration of UE.
3a. The hosting network subscribes for configuration service for deregistering
UEs to the home network in an adaptive manner. The subscription request
includes the hosting network ID, the localized service information, and the
number of UEs registered for the localized service.
NOTE 2: The interface between hosting network AMF and home network AMF can be
direct or indirect. It is assumed that there is a bidirectional communication
between hosting network AMF and home network AMF.
3b. Upon receiving the subscription request from the hosting network, the home
network AMF determines the hosting network and the localized service specific
maximum allowed number of returning UEs to the home network per unit time,
which is used for simultaneous deregistration at the hosting network.
Based on the given number of UEs registered for the localized service in the
hosting network, the localized service end time, and the number of UEs that
can attempt to register from the home network and other hosting networks, the
home network AMF determines the hosting network and the localized service
specific the allowed maximum number of returning UEs per unit time to the home
network. The home network AMF ensures that the total number of UEs attempting
to register at a time from the home network and hosting networks do not exceed
the maximum number of UEs that can be handled based on its processing
capability in order to avoid congestion and overloading.
3c. The home network AMF notifies to the hosting network the allowed maximum
number of returning UEs to the home network AMF per unit time. The
notification includes the hosting network ID, the allowed maximum number of
returning UEs per unit time, valid time to follow this instruction, and the
localized service information that UEs are accessing.
If there is a change in the allowed maximum number of returning UEs from the
hosting network to the home network AMF per unit time due to increase or
decrease in the number of UEs that can attempt to register from the home
network and other hosting networks, then the home network AMF notifies the new
value (the updated allowed maximum number of returning UEs) to the hosting
network in a new notification. In this case, the hosting network follows the
instruction in the new notification and discards the old notification, i.e.
the new notification always has higher precedence than the old notification.
4\. The temporary localized service time is over at the hosting network.
5a. UDM coordinates with AMFs for selection of the allowed maximum number of
returning UEs from hosting network based on the notification from the home
network AMF. The selection is for simultaneous deregistration of UEs in an
adaptive manner based on the notification from the home network AMF and
ensures that the number of returning UEs from the hosting network do not
exceed the maximum number of UEs the home network AMF can handle.
There is a possibility that multiple AMFs in home network handle registration
requests of UEs returning from hosting network and each home network AMF
notified the allowed maximum number of returning UEs can be considered based
on step 3 in that case.
NOTE 3: The notified value of the allowed maximum number of returning UEs to
the home network is valid until the valid time is expired.
5b. The hosting network AMF initiates the simultaneous deregistration by
sending Deregistration Request messages to the selected number of UEs in step
5a.
NOTE 4: UEs may initiate deregistration procedure before the localized service
is terminated. The hosting network AMF can handle UE-initiated deregistration
requests as well. In order to allow the hosting network AMF to select the
allowed maximum number of returning UEs to the home network, the service
termination time of UEs can be set to slightly higher than the actual
localized service termination time.
5c. UEs deregister from the hosting network and the AMF accepts the
deregistration.
If UEs initiate Deregistration Request and the number UEs initiate the
Deregistration Request procedure is higher than the allowed maximum number of
returning UEs to the home network per unit time, then the hosting network AMF
indicates the event with \'the allowed maximum number of returning UEs
exceeded\' parameter in a Deregistration Response message to that home network
UEs. After deregistering from the hosting network, UEs which exceeded the
allowed maximum number of returning UEs to that home network wait for a random
amount of time before registering back to the home network or another hosting
network. Otherwise, UEs initiate the registration procedure to their home
network or another hosting network immediately after leaving the hosting
network.
NOTE 5: After deregistration, UEs place the hosting network NPN in a temporary
forbidden list (a list of PLMN ID or SNPN ID which prohibits the UE to select
the PLMN ID or SNPN IDs in this list for a certain period of time) and
initiates automatic PLMN/SNPN network selection mode.
6\. Deregistered UEs leave the hosting network and initiate registration
procedure to their home network or another hosting network.
7\. Once all UEs registered for the localized service are deregistered, the
hosting network unsubscribes the configuration service from the home network.
The request to unsubscribe configuration service for a temporary localized
service includes the hosting network ID and the localized service information.
### 6.47.4 Impacts on services, entities, and interfaces
UE:
\- For the AMF-initiated Deregistration Request message, the UE completes the
deregistration procedure.
\- If the option with the new parameter \'the allowed maximum number of
returning UEs exceeded\' is used, the UE shall first run a random timer and
wait until the random timer expires before initiating registration back to the
home network or another hosting network.
AMF:
\- Supports to determine the hosting network and the localized service
specific the allowed maximum number of returning UEs to the home network.
\- Triggers network-initiated adaptive deregistration procedure.
UDM:
\- Supports to coordinate with AMFs for selection of the allowed maximum
number of returning UEs from hosting network based on the notification from
the home network AMF.
# 7 Evaluation
Editor\'s note: This clause provides an evaluation of the solutions.
## 7.1 Key Issue #1: Enabling support for idle and connected mode mobility
between SNPNs without new network selection
The key issue #1 is addressed as follows:
\- For supporting the Equivalent SNPNs:
\- Solution#1 considers the UE has either a subscription of source or target
SNPN while the subscription can be used to access both, or the UE has the
credential from a Credentials Holder (CH) that can be used to access both
source and target SNPNs (e.g. the UE has subscription of source SNPN and
access the target using the credentials from source SNPN being a CH, or UE
access source and target SNPNs using the credentials from another CH).
\- Idle mode mobility:
\- Solution#1 addresses this by:
\- Providing the UE with a list of SNPN identities to the UE that the UE
consider as equivalent to the registered SNPN during cell (re)selection
avoiding the need to perform network selection at inter-SNPN change.
\- Connected mode mobility:
\- Solution#1 addresses this by:
\- Allowing equivalent SNPNs belonging to the same administrative entity being
included in the MRL sent to NG-RAN.
\- PDU session continuity is enabled for the case when the equivalent SNPNs
belong to the same administrative entity.
Solution #1 re-uses the principles of equivalent PLMNs functionality enabling
the support of equivalent SNPNs and thereby provides enhancements to idle and
connected mode mobility with minor impacts to the system.
If equivalent SNPNs within an RA is to be supported, then NAS can be extended
on top of the existing Partial tracking area identity lists (defined in Figure
9.11.3.9.2/3/4 of TS 24.501 [7]) with a new Partial tracking area identity
list - type of list that includes also the NID (together with the MCC and
MNC), and NGAP can be extended allowing the TAI list to be associated to
different SNPNs e.g. by adding a new TAI encoding for SNPNs. The use case for
supporting equivalent SNPNs within an RA would result into two or more SNPNs
that are geographically overlapping or adjacent to each other and the UEs are
moving between the two or more SNPNs such that the UEs would create frequent
Mobility Registration Updates unless the two or more SNPNs are added to the
same RA.
The support of equivalent SNPNs impacts UE, AMF and NG-RAN.
## 7.2 Key Issue #2: Support of Non-3GPP access for SNPN
Table 7.2-1: Evaluation of solutions for Key Issue 2
+----------------------------------+----------------------------------+ | Solution #2 | In this solution, UE that has | | | successfully obtained IP | | Access to SNPN services via | connectivity via an Untrusted | | Untrusted non-3GPP access | non-3GPP access network may | | network | select the N3IWF of an SNPN and | | | register with that SNPN (using | | | the credentials of that SNPN) | | | following the same N3IWF | | | selection procedure as specified | | | for access to stand-alone | | | non-public network services via | | | PLMN. | | | | | | For support of Emergency | | | services the UE either relies on | | | a configured N3IWF FQDN for | | | N3IWF selection (when | | | non-roaming) or follows the | | | existing procedure for Emergency | | | services for UE not equipped | | | with UICC (when roaming). | | | | | | The solution makes no special | | | provisions for UE onboarding | | | assuming that, either the PVS is | | | reachable over the public | | | Internet that the UE accesses | | | via the untrusted non-3GPP | | | access network, or the UE relies | | | on an ON-SNPN with 3GPP access. | | | | | | The solution has UE impact and | | | N3IWF impact (inclusion of | | | \"selected NID\" in the [NGAP] | | | INITIAL UE MESSAGE, which is up | | | to RAN3 to define). | +==================================+==================================+ | Solution #3 | The solution assumes that the | | | non-3GPP access network | | Access to SNPN services via | advertises (e.g. with ANQP) the | | Trusted non-3GPP access network | SNPNs with which 5G connectivity | | | is supported, as well as the | | | indications defined in | | | clause 5.30.2.2 of | | | TS 23.501 [3]. The UE is | | | configured with one or more | | | prioritized SNPN/GIN lists as | | | defined in clause 5.30.2.3 of | | | TS 23.501 [3]. | | | | | | For support of Emergency | | | services the non-3GPP access | | | network advertises the support | | | of Emergency service (e.g. via | | | ANQP). | | | | | | For support of UE onboarding the | | | non-3GPP access network | | | advertises the Onboarding | | | enabled indication (e.g. via | | | ANQP). | | | | | | The solution has UE impact, | | | non-3GPP access network impact | | | (additional parameters in ANQP | | | messages) and TNGF impact | | | (inclusion of \"selected NID\" | | | in the [NGAP] INITIAL UE | | | MESSAGE, which is up to RAN3 to | | | define). | | | | | | The solution has TS 23.402 [9] | | | impacts if UE constructs a | | | prioritized list of WLAN access | | | networks by using the WLAN | | | Selection Policy (WLANSP) rules | | | from ANSDP (currently supported | | | only for PLMN in | | | TS 23.402 [9]). Alternatively, | | | the solution can rely on local | | | configuration in the UE. | +----------------------------------+----------------------------------+ | Solution #4 | This solution builds on top of | | | Solution #2 and aims to add | | Support of onboarding over | support for the following | | untrusted non-3GPP access in | scenarios: | | SNPN | | | | - access to PVS is restricted | | | inside the ON-SNPN and the PVS | | | is not accessible from the | | | public internet directly over | | | the \"untrusted non-3GPP access | | | network\". | | | | | | - UE accesses to SNPN via | | | indirect non-3GPP access or | | | direct non-3GPP access for | | | Onboarding. | | | | | | The additional UE impact | | | (compared to Solution #2) | | | includes the ability to | | | construct a GIN-based FQDN for | | | selection of the N3IWF/SNPN that | | | will be used for UE onboarding, | | | as well as inclusion of | | | Onboarding indication in the AN | | | parameter sent to the N3IWF | | | during registration procedure. | | | | | | The solution has several | | | unresolved Editor\'s notes. | +----------------------------------+----------------------------------+ | Solution #5 | This solution builds on top of | | | Solution #2 and aims to add | | Support of Credentials Holder | support for accessing SNPN using | | scenarios over untrusted | credentials owned by Credentials | | non-3GPP access in SNPN | Holder separate from the SNPN. | | | | | | The additional UE impact | | | (compared to Solution #2) | | | includes the ability to | | | construct a GIN-based FQDN for | | | selection of the N3IWF/SNPN | | | where UE accesses by using | | | credentials owned by the | | | Credentials Holder belonging to | | | a group identified by the GIN. | | | | | | The solution has several | | | unresolved Editor\'s notes. | +----------------------------------+----------------------------------+ | Solution #6 | The solution defines how the | | | 5G-RG, FN-RG, and devices behind | | Access to SNPN services via | the RG (UE or N5GC devices | | wireline access network | behind an FN-RG or 5G-RG) can | | | access SNPN services via a | | | wireline access network. It is | | | based on clause 4.2.1 of | | | TS 23.316, where the SNPN is | | | implicitly selected by wired | | | physical connectivity between | | | 5G-RG or FN-RG and W-AGF. The | | | only additional requirement is | | | that the NID is included as part | | | of the registration procedure | | | for wireline access system. | | | | | | The solution has 5G-RG and W-AGF | | | impact (ability to formulate the | | | SUCI that includes the SUPI type | | | as \"IMSI\" and the home network | | | domain which includes a NID in | | | addition to PLMN ID). | +----------------------------------+----------------------------------+ | Solution #16 | The solution describes how UE | | | can access an SNPN with NG-RAN | | Access to SNPN with NG-RAN and | on one hand and a WLAN Access | | to WLAN Access Network using the | Network on the other hand using | | same credentials | the same credentials. UE uses | | | the same permanent identity | | | (SUCI) and credentials for | | | primary authentication in SNPN | | | and for WLAN access | | | authentication in a WLAN Access | | | Network. | | | | | | For access network selection the | | | solution assumes that either | | | mechanisms standardised by 3GPP | | | (e.g. using ANDSP) need to be | | | enhanced for Non-Seamless WLAN | | | Offload or rely on local UE | | | configuration. | | | | | | Seamless mobility is not in | | | scope of this solution. | | | | | | The solution has UE impacts. The | | | solution has TS 23.402 [9] | | | impacts if WLAN Selection Policy | | | (WLANSP) rules from ANDSP are | | | used for Non-Seamless WiFi | | | Offload (currently supported | | | only for PLMN in | | | TS 23.402 [9]). Alternatively, | | | the solution can rely on local | | | configuration in the UE. | | | | | | The solution requires new | | | authentication procedure and | | | needs to be evaluated by SA3. | +----------------------------------+----------------------------------+ | Solution #19 | This solution builds on top of | | | Solution #2 and aims to add a | | Access to SNPN services via | new RAT Type to discriminate | | Untrusted non-3GPP access | between direct access to SNPN | | network with underlay/overlay | services via N3GPP access (as in | | determination | Solution #2) and indirect | | | access to SNPN services via PLMN | | | as defined in TS 23.501 [3] | | | clause 5.30.2.8 and clause D.3. | | | The RAT Type for these two cases | | | would be set to \"Untrusted | | | N3GPP\" or \"Untrusted Non-3GPP | | | over underlay PLMN\", | | | respectively. | | | | | | The underlying assumption is | | | that in some scenarios the | | | access to the SNPN\'s 5GC may | | | need to be restricted for one of | | | the RAT Types, but not for the | | | other. | | | | | | The solution has UE, N3IWF and | | | AMF impact related to the | | | determination of the RAT Type. | | | | | | The solution has an unresolved | | | Editor\'s notes related to how | | | the N3IWF determines the access | | | network information. | +----------------------------------+----------------------------------+ | Solution #20 | The solution defines how the | | | same credentials from a | | Access SNPN via 3GPP and N3GPP | credential holder external to | | AN using same credentials and | the SNPN can be leveraged for | | credential holder | devices accessing SNPN via 3GPP | | | and non-3GPP access network | | | (both connected to 5GC). | | | | | | The solution has no normative | | | impacts beyond the impact of | | | Solution #5 (support of | | | Credentials Holder over | | | untrusted non-3GPP access in | | | SNPN) and Solution #3 (support | | | of Credentials Holder over | | | trusted non-3GPP access in | | | SNPN). | | | | | | The scenario of UE and N3GPP | | | device connected to 5GC via | | | 5G-RG/FN-RG, is FFS. This | | | scenario shall take into account | | | the conclusion of the | | | FS_5WWC_Ph2 study on the | | | support of the device behind an | | | RG. | +----------------------------------+----------------------------------+ | Solution #21 | The solution proposes to extend | | | the NSWO authentication so that | | Support for NSWOF in SNPN | UE can access a non-3GPP network | | | (e.g. WLAN or Wireline access | | | network) using the same | | | permanent identity and | | | credentials as for primary | | | authentication in SNPN via | | | NG-RAN and 5GC. | | | | | | The solution has UE and 5G-RG | | | impacts for support of NSWO | | | authentication using SNPN | | | credentials i.e. credentials | | | with user identity whose | | | \"realm\" part enables routing | | | of SWa requests from the WLAN AN | | | to the NSWO in the SNPN\'s 5GC | | | (applies both to SIM-based and | | | non-SIM based credentials). The | | | 5G-RG impacts have dependency on | | | the FS_5WWC_Ph2 study (e.g. | | | Solution #22 in | | | TR 23.700-17 [18]). | +----------------------------------+----------------------------------+
## 7.3 Key Issue #3: Enabling NPN as hosting network for providing access to
localized services
Table 7.3-1: Evaluation of solutions for Key Issue 3
+----------------------------------+----------------------------------+ | Solution#7 | The service provider (can be | | | network operators or 3rd party | | High level flow for localized | application providers) of the | | service support | localized service needs to | | | establish localized service | | | agreement with the operator of a | | | hosting network. | | | | | | A service agreement between | | | hosting network operator and | | | UE\'s home network operator is | | | needed to enable, e.g.: UE to | | | receive and use configuration | | | provided by a 3rd party service | | | provider, etc. | | | | | | This solution proposes to re-use | | | traditional OAM mechanisms and | | | existing SA5 specified | | | mechanisms to handle the | | | configuration aspect of hosting | | | network. | +==================================+==================================+ | Solution#12 | Current serving network (PLMN or | | | SNPN) may assist UE in | | Discovering services offered by | discovering hosting network for | | SNPN while camping in a serving | localized services in specific | | network | conditions, such as when serving | | | network determines that UE moves | | | into area where localized | | | services are available. | | | | | | Some level of co-operation | | | between current serving network | | | and hosting network is needed. | | | | | | The service agreement between | | | serving network and hosting | | | network is assumed in place by | | | means outside of 3GPP. | +----------------------------------+----------------------------------+ | Solution#22 | It is assumed that UE has | | | default credentials that can be | | Hosting network to provide | used in the hosting network. | | localized service based on | Hosting network broadcasts a | | default credentials | dedicated Hosting networking | | | service indication to show that | | | this NPN can provide hosting | | | networking for localized | | | services. | | | | | | - If there is some service | | | agreement between hosting | | | network and home network, the UE | | | can be successfully | | | authenticated by the hosting | | | network by using credentials of | | | home network | | | | | | - If there is no service | | | agreement between hosting | | | network and home network, the | | | hosting network performs | | | authentication by using the | | | UE\'s default credentials. | | | | | | The localized services | | | information are pre-configured | | | in AMF of hosting network. | | | | | | NOTE: Further impacts to address | | | key issue#3 aspects are to be | | | evaluated when additional | | | details/clarifications are | | | available. | +----------------------------------+----------------------------------+ | Solution#41 | The solution mainly resolves how | | | the Hosting network can perform | | Provisioning of Credentials via | "on boarding" of UE for a | | Hosting Network PDU Session | particular localized service. | | | For KI#3, it only focuses on | | | what kind of information needs | | | to be exchanged between the | | | Localized service provider and | | | the Hosting network. | | | | | | Localized service provider may | | | provide captive portal | | | information to hosting network | | | during service agreement phase. | | | How the localized service | | | information is available to UE | | | is assumed to be provided by | | | others solutions. User may | | | manually choose a particular | | | hosting network. UE may include | | | the selected localized service | | | in the request. AMF responds the | | | request which may include DNN, | | | S-NSSAI, an indication to | | | trigger PDU Session creation. A | | | PDU Session could be established | | | to connect UE and localized | | | service provider. UE can get the | | | credentials in the PDU Session. | | | | | | NOTE: The security impacts shall | | | be evaluated by SA WG3. | +----------------------------------+----------------------------------+
## 7.4 Key Issue #4: Enabling UE to discover, select and access NPN as hosting
network and receive localized services
### 7.4.1 General
The evaluation for KI #4 solutions is made for each component listed below:
\- The content of the localized service information that is used by UE to
perform discovery/selection/access to the hosting NW for localized services.
\- From where and how UE obtains such localized service information.
\- How the localized service information is used by UE.
\- What credentials are used to access hosting network and how to obtain them
if required.
\- How localized service is accessed in hosting network per agreed conditions,
e.g. time/location.
Furthermore, since Hosting Network based on the architecture assumption and
requirements in clause 4 as below
\- Hosting network can be NPN, i.e. SNPN, PNI-NPN
\- Home network can be NPN or PLMN
If the UE accesses the Hosting network using the subscription/credentials from
the UE Home network, there are only two scenarios considered in such case:
\- If the Home network of the UE is PLMN, the Hosting network could be PNI-NPN
or SNPN.
\- If the Home network of the UE is SNPN, the Hosting network could be only
SNPN.
The case the Home network of the UE is SNPN and the Hosting network is PNI-NPN
is not existed according to below SA1 requirement in clause 6.41.2 of TS
22.261 [2]:
\- Only subscribers of a public network can roam into a PLMN.
Furthermore, if the UE has multiple hosting subscriptions/credentials, that
which subscription/credential to use for automatic Hosting network selection
is determined by implementation specific prior to network selection as same
logic specified in clause 5.30.2.4 of TS 23.501 [3].
### 7.4.2 Evaluation for the content of the localized service information
**Construct the information on localized service basis (Sol #11, #12, #13,
#15, #24, #26, #27, #31, #32, #34, #42).**
\- The information includes an element to distinguish different localized
service (e.g. identifier, name of the localized service), service availably
(e.g. time, duration and location), validity conditions (time/location), local
service captive portal address, associated hosting networks\' information
(e.g. hosting network identifier, temporary credential or credential type for
accessing hosting network, CAG IDs, QoS, cost, information transmitted in the
Hosting network\'s SIB, etc.).
\- The localized service information may include either (a) a list of one or
more Hosting Network Identifiers, or (2) information which is broadcasted by
the Hosting Network (e.g. CAG IDs, localized service ID) used by the UE to
select the Hosting network.
NOTE: Credential provisioning mechanisms need to be evaluated by SA WG3.
\- The benefit of this principle is to provide UE/end user with relationship
between localized services and hosting networks, so that it enables the
possibility for UE/end user to make request on specific localized service and
for network to inform UE what are the available localized services and over
which hosting networks these localized services are provided.
**Construct the information based on priority list for Hosting network
selection (Sol #10, #14, #18, #25, #29, #30, #33, #36, #43).**
\- The information is a new priority list for Hosting network selection. Each
entry on the list includes hosting network identifiers, validity conditions
(time/location), etc.
\- This principle requires other solution components (e.g. Sol #12, #13, #24,
#30) to complement, since the information does not include reference to the
localized services available over the different hosting networks included in
the priority list and therefore it assumes that either UE or the network
providing this information knows beforehand which localized service end user
intends to access or what are the localized services supported by the hosting
network on the priority list.
The localized service information in Sol #22 and Sol #46 provided by hosting
network to UE, is not used for selecting hosting networks (instead the UE has
registered to a hosting network based on a prioritized list of Hosting
network), but rather for UE to know how to access a service in the hosting
network which can be addressed by existing functionality, such as URSP rules.
According to existing mechanisms, network selection and traffic offload (to
another access network) are two separated mechanisms and controlled by
different rules/policies.
Normally, a UE would request to use a specific application (for a specific
Localized service) when the UE is in the coverage of the corresponding hosting
network. After a UE selects and accesses into a hosting network, the UE would
obtain Allowed S-NSSAI from the hosting network. The UE can use the URSP
(received from the home network or hosting network) to determine which
S-NSSAI/DNN is used for a localized service.
To support a UE selecting and accessing into a hosting network, a hosting
network list is needed.
### 7.4.3 Evaluation for from where and how UE obtains the localized service
information
UE can obtain the localized service information from application server,
serving network, home network, or hosting network.
**UE fetches the information from an application server (Sol #14, #28, #31,
#40).**
\- When a full set of new subscription/credential is provided to UE via
application server, this principle has less system impact on 5GS. But on the
other hand, home network subscription/credential is utilized for the UE to
establish PDU connection with the application server and the UE needs to
handle co-existence of multiple subscriptions/credentials on device.
\- When the information includes a list of hosting networks and an indication
that home network credential is to be used, there will be impact on network
selection. Application server obtaining such information via network exposure
is not necessary, since it is covered as part of the SLA between localized
service provider and hosting network operator.
**UE fetches the information from home network (Sol #10, #13, #14, #15, #18,
#23, #24, #29, #30, #31, #33, #36, #43).**
\- This principle assumes that home network is capable of managing the
localized service information data.
\- The impact is about how home network is provisioned with the localized
service information data, and how UE is provisioned by the home network.
\- Most of the solutions following this principle propose that the home
network provides the localized service information to UE via SoR procedure in
combination with the principle that the localized service information is
constructed based on a priority list for (hosting) network selection as
described in clause 7.4.2.
\- Some solutions assumed that the SoR-AF within the home network should be
involved as the data source and the mechanism regarding how SoR-AF obtains
such data should be out of 3GPP scope. Some solutions (Sol #14, #43) assumed
the data source for SoR procedure is obtained from other NFs than SoR-AF.
NOTE 1: In the current specifications, SoR-AF is the only entity that creates
the SoR message if there is a need to dynamically change the content of the
SoR information.
\- Since SoR procedure is mainly used for network discovery and selection, it
is not suitable to be extended to provision UE with data more than required
for the UE\'s actual network discovery and selection.
NOTE 2: The current specifications provide the means for the serving network
to provision the UE with information relevant for the serving network once the
UE has registered to the hosting network e.g. network slicing information.
\- Sol #24 proposes another variant for UE to fetch the information from home
network, that is via home network UDR and new UE policy. UE policy has the
potential to include necessary data of the localized service, and possibility
to be extended in the future. The new UE policy can be delivered to UE by PCF
in home network, or PCF in serving network using N24.
**UE fetches the information from serving network (Sol #11, #12, #24, #27,
#32, #42, #44).**
\- This principle assumes serving network (either home network or another
network which UE is accessing using home network credential) is capable of
storing the localized service information data. This principle enables
multiple information sources for UE to obtain localized service information.
\- If the current serving network is not the home network, this principle also
provides mechanisms for home network to authorize or determine the final data
that UE will receive, where the serving network either checks a subscription
flag (Sol #12, #24, #32) or passes the localized service data to home network
for authorization and delivery to UE (Sol #12, #42).
\- The impact is about how serving network is provisioned with the localized
service information data, and how UE is provisioned by the serving network.
\- Some solutions following this principle proposes to use AMF/SMF in serving
network to store the localized service information data. In this case, the
provisioning to serving network is based on configuration which has less
impact, but it requires the UE is served by the correct AMF/SMF configured
with such information (e.g. UE is located in the overlapping area where the
hosting network is available) or requires all the AMF/SMF in the serving
network are configured with such information. The data is provisioned to UE
via MM NAS or SM NAS message (it is TBD which procedures/messages are
impacted).
\- Other solutions following this principle, proposes to use UDR in the
serving network to store the localized service information data as application
data for any UE registered to the serving network. This enables the
flexibility that if the serving network is not the home network, UE can obtain
localized service information data from either the serving network, or from
the home network, or from both. The impact is to extend service specific
parameter provisioning for the serving network to receive the data (see clause
4.15.6.7 of TS 23.502 [4]) and new UE policy to provide the data to the UE.
**UE fetches the information from hosting network (Sol #22, #26, #34, #41).**
\- This principle assumes a hosting network is selected prior to a localized
service is selected, since the localized services information arrives later
from the hosting network. It can happen that the fetched information is not
interesting for the end user.
\- The impact is to extend broadcast with capability for localized service,
service discover policy that allows UE to query information from hosting
network while in RRC-IDLE/INACTIVE with serving network, new on-demand SIB, or
code for URL. Another impact is to deliver localized service information via
registration reject/accept message.
NOTE: Privacy aspect needs to be evaluated by SA WG3.
\- This principle implies that in some scenarios the UE needs to suspend the
connection with or suppress the paging from the serving network when getting
information from hosting network, which can cause service interruption.
There are different triggers to provision the information to UE:
**\- UE request as trigger (Sol #11, #13, #15, #24, #27, #32, #34, #42).**
**\- UE location as trigger (Sol #11, #12, #18, #27, #32).**
**\- UE subscription data change via external parameter provisioning as
trigger (Sol #14, #23, #43).**
**\- UE Steering of Roaming information update (SoR based solutions).**
UE request as trigger assumes UE/end user is aware of the desired localized
services. UE location as trigger requires the serving network is aware of
which hosting network is available in which serving network tracking areas,
and the information sent to UE is unsolicited. UE subscription data change and
SoR based solutions restrict the information source to home network only.
There are different architectures/business relationships between home network
and hosting network or Localized service provider.
\- Business relationship / roaming interface exists between home network and
hosting network or Localized service provider.
\- In this scenario, the home network knows about the hosting network or the
Localized services. Therefore, it is reasonable for the home network to
provision obtain hosting network information/localized service information to
the UE.
\- Moreover, UE can use its home network credentials to access hosting
network.
\- To allow flexible deployment and use of Localized service, it would be
benefit to allow update the above information to the UE timely, after the UE
requesting for the Localized service. The UE can request via OTT, then LSP can
notify the home network of the UE to send the above information to the UE.
\- No business relationship / roaming interface between home network and
hosting network.
In this scenario, the home network does not know about the hosting network or
the Localized services directly. There are two sub-scenarios regarding the
business relationship between visiting network and hosting network or
Localized service provider:
\- Business relationship / roaming interface exists between visiting network
and hosting network or Localized service provider
\- In this scenario, the visiting network knows about the hosting network or
the Localized services. Therefore, UE can obtain hosting network
information/localized service information from the visiting network. In order
to enable control from home network, home network authorization is required
before sending the information to the UE.
\- In this scenario, UE cannot use credentials from home network to access
hosting network. Therefore, other credentials e.g. default credentials can be
used to access hosting network.
\- No business relationship between visiting network and hosting network/
Localized service provider
In this scenario, neither home network or visiting network know about the
hosting network or the Localized service. The UE can only obtain hosting
network information/ localized service information from hosting network or the
Localized service provider.
\- UE obtains localized service information from hosting network
\- in this scenario, manual network selection is used for hosting network
discovery and selection;
\- default credentials are used for the first time accessing to hosting
network;
\- credentials of hosting network can be provision to the UE.
\- UE obtains hosting network information/ localized service information from
Localized service provider
\- In this scenario, the UE may also obtain the following information from the
Localized service provider:
\- default credentials to access hosting network;
\- credentials to access localized service from the Localized service
provider;
\- configurations to access localized service from the hosting network;
\- The above procedure is considered as OTT solution and would have no
standard specifications.
Although the first scenario (i.e. Business relationship / roaming interface
exists between home network and hosting network or Localized service provider)
is considered as the main scenario, it would be benefit to consider the other
scenarios to support flexible deployments of hosting networks.
### 7.4.4 Evaluation for how the localized service information is used by UE
New network selection mode is proposed (Sol #10, #25, #30, #33), where UE
selects only hosting network when it intends for localized services and
bypasses or temporary stops existing network selection procedure. This is
needed if the UE is using home network credential to access hosting network,
since home network and hosting network could be collocated in the same area
and UE will always prioritize home network based on existing network selection
mechanism. The new network selection mode can be requested by UE and
authorized by home network (Sol #25).
The time and location validity condition along with other localized service
information as described in clause 7.4.2 provided to UE can be used as a
criteria for the UE to determine when and where to enter the new network
selection mode.
Except the validity conditions, other methods for UE to determine whether to
enter hosting network selection mode are also proposed, e.g. serving network
to indicate to UE the presence of hosting network via either NAS or broadcast
(Sol #12, #29, #30), which requires extra system impacts.
### 7.4.5 Evaluation for what credentials are used to access hosting network
and how to obtain them
If home network credentials are also used to access hosting network, existing
mechanisms can be re-used for enabling access to hosting network, such as
roaming architecture or Credentials Holder function.
Minor enhancements are proposed to indicate to the UE that hosting network
support CH function (Sol #12), or to indicate to the UE that home network
credentials can be used as credential from CH to access specific hosting
network (Sol #40). Whether hosting network support of CH function can be
detected by UE via existing SIB broadcast. Whether home network can act as CH
can be implicitly determined by whether there are priority lists for SNPN
selection configured/provisioned on UE. But if hosting network selection does
not use existing CH/User controlled priority lists for SNPN selection, there
will be a gap for UE to know if home network credential can be used, or it
needs to obtain a new set of credentials from somewhere else. When home
network credential is used to access hosting network, it requires connection
between home network and hosting network as described in clause 5.30.2.9 of TS
23.501 [3].
If separate credentials from the home network credentials are needed to access
hosting network, the credentials can be obtained via:
\- application layer (Sol #12, #14, #28).
\- NAS layer (Sol #12, #13, #14, #15, #42).
\- enhanced onboarding procedure in SNPN type of hosting network (Sol #12,
#22, #41).
\- enhanced user plane remote provisioning procedure in serving network (Sol
#40).
Provisioning credentials via application layer is out of 3GPP scope.
Provisioning credentials via NAS layer needs to be coordinated and agreed with
WG SA3, since there is no existing NAS layer procedure suited for credential
provisioning based on previous study conclusion in TR 33.857 [22] (Rel-17
FS_eNPN_SEC).
Existing onboarding procedure in SNPN requires that the UE is pre-configured
with Default UE credentials and other information, while Sol #12 proposes UE
to obtain such onboarding related credentials/configuration via control plane
signalling.
Onboarding without primary authentication requires coordination with SA WG3.
Minor enhancement for user plane remote provisioning enables UE to request
specific hosting network related provisioning server (Sol #40), also enables
the possibility for UE to obtain onboarding related credential/configuration
via user plane.
### 7.4.6 Evaluation for how localized service is accessed in hosting network
per agreed conditions
The validity conditions of the localized service provided to UE can restrict
the UE to access a hosting network per agreed conditions.
For hosting network supporting large areas and multiple localized services,
Sol #10 proposes to divide the hosting network SNPN to smaller sub-networks
via a new identity (Subnetwork ID), and then UE in hosting network can be
restricted to certain areas. The access restriction is on cell level, which
prevents UE from selecting/camping on the cell. Such strict access control is
more suited and needed in e.g. factory production environment. There are also
many existing mechanisms to divide the network to smaller parts, e.g. network
slicing, forbidden area restriction, service area restriction, etc.
Sol #11, #27, #45 proposes to re-use existing LADN mechanism to restrict UE
from accessing the DN when UE is out of the specific area (TAI). The access
restriction is on PDU session level. Sol #45 also proposes to utilize the
location report control if the granularity of localized service is not on TAI
level, but on cell level.
Sol #35, #46 proposes to re-use URSP rule to enable UE to access localized
service when the RSD validity conditions are met. The access restriction is
also on PDU session level.
### 7.4.7 Evaluation for the scenario where hosting network is a PNI-NPN
\- **For credentials used for accessing hosting network:**
All the solutions propose to use home network credentials are used to access
hosting network. Roaming interface between hosting network and home network is
needed to support primary authentication procedure.
\- **For hosting network selection information provision to the UE:**
All the solutions propose to send Allowed CAG ID list to the UE.
Solution #10, #12, #23, #32, #43 propose to reuse Allowed CAG ID list provided
from the home network.
Solution #11 and #27 proposes that the serving network provides Localized
Service Information to the UE. The impact includes configurations in the AMFs
in the serving network (home network and visiting networks) with Localized
Service Information.
\- Potential enhancement to Allowed CAG list:
Solution #10 proposes to enhance the Allowed CAG list by including Validity
time period and Location. It is also clarified that Location information for
Allowed CAG list only needed if PNI-NPN as hosting network can be a subset of
a CAG.
Solution #12 clarify that the CAG cell(s) are inherently associated with
location or spatial validity condition(s) and hence additional spatial
validity condition is not required to be provided with Allowed CAG list.
Network Slice Selection Policy (NSSP) could be associated with hosting network
specific time validation criteria.
\- **For localized service information provision to the UE:**
Solution #11, #27 and #32 proposes to send Localized Service Information to
the UE.
They all proposes to include Localized Service Name and Validity condition.
Solution #11, #27 also propose to include LADN DNN used in the hosting
network.
\- **For triggers of sending hosting network selection information/localized
service information to the UE:**
\- UE request as trigger (Sol #11, #27, #32).
\- UE location as trigger (Sol #12).
\- UE subscription data change via external parameter provisioning as trigger
(Sol #14, #23, #43).
To allow flexible deployment and use of Localized service, it would be benefit
to allow the UE to request for the Localized service then the home network can
update the corresponding information to the UE (e.g. Allowed CAG ID list,
S-NSSAI, DNN, potential URSPs, etc.) The UE can request via NAS, the network
can authorize the request, optionally with confirmation with the LSP. The UE
can also request via OTT, then LSP can notify the home network of the UE to
send updated information to the UE.
\- **For how the UE uses the hosting network selection information/localized
service information:**
\- Solution #10 and #23 propose that when the validity information is met in
the Allowed CAG list, the corresponding CAG ID is considered for selection.
\- Solution #11 and #27 propose that the UE shall use the Allowed CAG
information only when the UE access the hosting network for the Localized
service.
\- Solution #32 proposes that UE may start searching and accessing the CAG
cell that supports the local service by manual input or based on service
available time.
\- **For whether home network is a PLMN or SNPN:**
\- Solution #27 includes a scenario where Home network is a SNPN and hosting
network is a PNI-NPN. Therefore, a UE can access a PNI-NPN using SNPN
credentials.
According to the current specifications, when the visiting network is a PLMN,
the home network shall be a PLMN. (Due to that a SNPN UE cannot access to a
PLMN using SNPN credentials)
If business relationship exists between the two PLMNs (supporting hosting
network and home network), it is also reasonable to assume that the home
network knows about the CAG ID of the hosting network. Therefore, the existing
mechanism of providing Allowed CAG list from the home network can be reused
for sending hosting network information to the UE.
The proposed Localized service information includes Localized service ID.
Existing identifies used to identify a service supported in a PNI-NPN include
S-NSSAI, DNN.
## 7.5 Key Issue #5: Enabling access to localized services via a specific
hosting network
Table 7.5-1: Summary of solutions for KI#5
+---------------+-----------------------------------------------------+ | Solution #7 | The solution provides the high level entities and | | | procedures for providing access to localized | | | services, accessing localized/home services, and | | | charging information for the home network operator. | +===============+=====================================================+ | Solution #11 | Solution is reusing existing roaming architecture | | | and LADN mechanism.\ | | | The UE uses the local breakout session for | | | accessing specific services from hosting network | | | and home routed session for accessing services from | | | the home network. Only PNI-NPN as Hosting Network | | | is considered. | +---------------+-----------------------------------------------------+ | Solution #13 | The UE will be configured with the N3IWF address of | | | the home network, wherein for accessing the home | | | network services. The UE uses the hosting network | | | as an underlay network. | +---------------+-----------------------------------------------------+ | Solution #15 | The solution focuses more on KI#4. | +---------------+-----------------------------------------------------+ | Solution #18 | Solution proposes to use the existing mechanism | | | i.e. Steering of Roaming to allow the service | | | provider (PLMN or 3rd Party service provider) to | | | update the UE with required information on | | | availability of hosting networks along with the | | | localized services they are providing. | | | | | | Steering of Roaming information container would | | | carry the \"operator defined hosting network | | | selector list\", which will assist the UE to switch | | | to hosting network for obtaining localized | | | services. | +---------------+-----------------------------------------------------+ | Solution #27 | Solution is reusing N3IWF overlay architecture and | | | LADN mechanism, i.e. 5G System architecture with | | | access to SNPN using credentials from Credentials | | | Holder and 5G System architecture accessing overlay | | | network (home network) via underlay network | | | (hosting network). The solution is built on top of | | | solution #11. | +---------------+-----------------------------------------------------+ | Solution #28 | The UE (User) obtains the time restricted | | | credentials from the LSP via the home network and | | | uses that information for selection of hosting | | | network as well as to access localized services. | | | N3IWF node used to access home network services. | +---------------+-----------------------------------------------------+ | Solution #35 | The home network provides URSP which maps local | | | services to its S-NSSAI and DNN. The registration | | | of the S-NSSAI related to local services causes the | | | cell/network reselection. | +---------------+-----------------------------------------------------+ | Solution #36 | There are two options are presented, one is using | | | validity conditions provided by home network to UE | | | to make sure UE only access the hosting network | | | with satisfying those conditions. The other options | | | presents that, home network and UE coordinate, | | | wherein home network would either use the UE | | | location to get information about target suitable | | | hosting network performance information via target | | | hosting network (e.g. SNPN) NEF or home network | | | would instruct the UE to measure and report the | | | signal reception status of the potential target | | | hosting network(s). Based on the information | | | received from the UE, the home network would send | | | SoR (Steering of Roaming) instructions to steer the | | | UE toward the target hosting network (e.g. SNPN). | +---------------+-----------------------------------------------------+ | Solution #37 | The solution defines a new network function LSF | | | (Localized Service Function) in the home network | | | and hosting network that specifically handles | | | information related to localized services. The new | | | network function will provide information to AMF | | | about all available localized services at the UE | | | location and this information about localized | | | services will be shared with the UE via NAS | | | signalling. | +---------------+-----------------------------------------------------+ | Solution #40 | The solution focuses more on KI#4 and for KI#5, | | | it is regarding to how the home network steers UE | | | to the hosting network. The solution proposes to | | | use deregistration procedure to trigger the | | | steering of UE to hosting network. The AMF/SMF | | | supports configuring the mapping of [Credential | | | Information] and [Hosting network identifier] | | | for specific localized service and responds to UE | | | with proper [Credential Information] associated | | | with a hosting network SNPN. The home network AMF | | | informs NG-RAN regarding the target hosting network | | | identifier based on request from UE and let NG-RAN | | | to perform release and redirect UE to the target | | | network. It has impact on UE/NG-RAN/AMF. | +---------------+-----------------------------------------------------+ | Solution #45 | The solution reuses the LADN mechanism with some | | | enhancements. The enhancements are: | | | | | | - UE shall support including localized service | | | identifiers in PDU Session Establishment Request. | | | | | | - AMF determines the location conditions of the UE | | | to decide whether the UE meets the conditions that | | | allow it to obtain the localized service. | | | | | | - SMF determines whether the UE meets the validity | | | information of the localized services. If the | | | validity information is set to the location, the | | | SMF subscribes UE mobility event notification to | | | AMF. If the validity information is set to time, | | | the SMF monitors the duration that the UE can | | | access the localized services. If the UE does not | | | meet the conditions, SMF receives a notification | | | from the AMF, and instructs the UPF to stop | | | forwarding traffic flow of the localized service. | | | The solution has UE, AMF and SMF impacts. | | | | | | For the above, the condition is assumed that UE has | | | registered to a Hosting network and the UE wants to | | | establish the PDU Session for access the localized | | | services available in the currently registered | | | Hosting network. | +---------------+-----------------------------------------------------+ | Solution #46 | The solution reuses existing URSP procedures, | | | wherein the UE evaluates the URSP rules to use the | | | PDU session for accessing the localized services in | | | the hosting network. The time window and location | | | criteria are configured according to the validity | | | information of the localized services and only when | | | the RSD criteria of the matched URSP rules are | | | satisfied, the UE establishes a new PDU session or | | | re-uses the existing PDU session for the localized | | | services. There are UE and H-PCF/V-PCF impacts. | | | | | | Furthermore, the solution also describes the order | | | if the UE has multiple URSP rules from HPLMN or | | | from the subscribed SNPN. | | | | | | For the above, the condition is assumed that UE has | | | registered to a Hosting network and the UE wants to | | | establish the PDU Session for access the localized | | | services available in the currently registered | | | Hosting network. | +---------------+-----------------------------------------------------+
In several solutions (e.g. #18, #36, etc.) , existing SoR mechanism with some
enhancement is proposed to be used for the home network to steer the UE to the
hosting network. This approach addresses the KI well and has limited impacts
on the UE and network.
In the solutions (e.g. #18, #36, etc.), the typical conditions for steering
the UE to a specific hosting network are:
\- The time and location of UE has met the validity condition of a local
service (e.g. #18).
\- signal threshold which may be different for different localized services /
hosting networks has met the validity condition of the hosting networks (e.g.
#36).
For the aspect of enabling access to both home network services and local
services, several solutions propose to use existing overlay/underlay
architecture to access the target network through N3IWF. This approach
addresses the KI well and has limited impacts on the UE and network.
\- When a UE accesses both a hosting network and a home network using the
overlay/underlay architecture, the underlay can support the localized service
requirements e.g. high throughput, low latency and the ability to apply the
location requirements in a suitable way and therefore the UE better access the
localized services through the underlay network.
\- According to the current specifications, when the visiting network is a
PLMN, the home network shall be a PLMN. (Due to that a SNPN UE cannot access
to a PLMN using SNPN credentials). When the UE is accessing a PNI-NPN hosting
network, Home Routed PDU session can be established to access home network
services. No need to use overlay/underlay architecture in this scenario.
In several solutions (e.g. #35, #46), existing network slicing and URSP
mechanism with some enhancements are proposed to be used for the UE to access
the Localized Services in the registered Hosting Network. These approaches
address the KI well and have limited impacts on the UE and network.
For the aspect of enabling UE to access localized services based on the
certain location and time condition of localized services, there are several
methods as follows:
\- Reusing the existing LADN mechanism (e.g. #11, #27) to meet the location
condition. For the time condition, it is realized by AMF/operator that
combines LADN DNN with validity time.
\- Using the enhanced LADN mechanism (e.g. #45) to meet the location
condition. For the time condition, it is realized by SMF monitors the service
time after the UE starts obtaining the localized service.
Reusing the existing URSP mechanism (e.g. #35, #46) to meet the location and
time condition. The Route Selection Validation Criteria (i.e. Time Window and
Location Criteria) of the matched URSP rules should be fulfilled. Which is
currently evaluated when establishing a PDU Session.
## 7.6 Key Issue #6: Support for returning to home network
The solutions for KI#6 are proposed to address the UEs returning from the
Hosting Network to their Home Network (i.e. HPLMN/VPLMN, SNPN) when the
Localized Services in the Hosting Network are completed. Under the condition,
it may cause many UEs returning back to e.g. their Home Network and this may
result in signalling overload in their Home Network.
NOTE: Home Network is used, but the network selected by the UE depends on the
UE\'s network selection and what networks are available e.g. UE can return to
VPLMN different from the PLMN the UE was registered to before selecting the
Hosting Network.
When considering solution proposals for KI#6, there are two categories for
handling signalling overload resulting from the UEs returning to their Home
Network:
1\. The avoidance-based method: it mitigates or avoids overload at home
network and it can be further classified into three subcategories based on the
principles in the proposed solutions,
a) the UEs is (pre)-configured with a timer/waiting time based on the Validity
Information of the Localized Services and/or the NWu status and the
availability of the home network of the UE e.g. by the Home Network or by the
Hosting Network,
b) the home network negotiates/communicates once with the hosting network as
part of a service level agreement to configure the number of UEs can be
deregistered from the hosting network to the home network per unit time, and
c) the home network negotiates/communicates with the hosting network
continuously by utilizing "subscribe-notify" communication service to
configure the number of UEs which can be deregistered from the hosting network
to the home network per unit time adaptively without causing an overload at
the home network, and the hosting network instructs UEs which exceed the home
network given maximum limit to wait for random amount of time before
initiating re-registration to their home network if UEs initiate
deregistration requests.
2\. The runtime-based method: it handles overload at home network using the
existing mechanisms and it can be further classified into three subcategories
based on the principles in the proposed solutions,
a) the UEs directly return to their Home network when the Localized Services
terminate and the Home Network will use the existing mechanisms to handle the
signalling overload if the congestion happens,
b) the home network and/or local hosting network may group the UEs to create
an Internal-Group Identifier specific to local hosting network(s) and/or local
service(s), and then the home network AMF or SMF applies the existing UE
group-specific NAS level congestion control mechanism to manage UEs returning
from a local hosting network to their home network, and
c) the UEs directly return to their home network when the Localized Services
terminate and the home network uses localized hosting network specific back-
off timer to adaptively reduce the overall waiting for UEs before re-register
to their home network.
For avoidance-based method (i.e. Solutions #9, 10, 13, 25, 38, 47), hosting
network either determines the timer or maximum number of UEs on its own (e.g.
Solution #9, #10,) or uses the home network input to determine it (e.g.
Sol#47).
For runtime-based method (i.e. Solutions #8, 17, 39), the Home Network applies
the existing congestion control and overload control to the UEs for returning
from the Hosting Network but cause congestion overload. The UEs registers to
the Home Network by indicating they are back from the Hosting Network. If the
Home Network is in a congestion condition, the Home Network can reject the UE
with a cause and a back-off timer.
To compare the avoidance-based and runtime-based methods, the differences are
below:
\- The avoidance-based method can allow the UE to return to their Home Network
in a distributed or stagged manner to prevent the congestion or overload
conditions happen in their Home Network.
\- The runtime-based method directly applies the existing mechanism optionally
with some enhancement (e.g. hosting-network specific backoff timer).
Category 1-a of the avoidance-based method potentially delays the UEs return
to the Home Network also for the cases when the Home Network is not
overloaded/congested. It is also expected that the user itself can decide to
stop using the Localized Service i.e. in these cases the UE would return back
to the Home Network disregarding the spreading applied for the UE\'s return.
The runtime handling has allowed the UEs to initiate the Registration
procedure as soon as wanted and then if the Home Network is congested rejected
the UE with a back-off timer in which the Home Network has been through the
signalling congestion from those returning UEs from the Hosting Networks
(unless Home Network is so congested that e.g. UAC is used).
Table 7.6-1: Summary of solutions for KI#6
+----------------------------------+----------------------------------+ | Solution #7 | The solution provides the high | | | level entities and procedures | | High level flow for localized | for providing access to | | service support | localized services. | | | | | (Category: Not applicable) | This solution does not cover the | | | impact on different entities, | | | services, and interface, will be | | | covered by other specific | | | solutions. | +==================================+==================================+ | Solution #8 | The proposed solution is to | | | reuse existing mechanisms for | | Reuse existing mechanisms for | Control Plane Load Control, | | Control Plane Load Control, | Congestion and Overload Control, | | Congestion and Overload Control | to mitigate signalling overload | | | when large number of UEs return | | (Category: 2-a) | to their home network. | | | | | | As the solution proposes to | | | reuse the existing mechanisms, | | | it is noted that there is no | | | impact on services, entities and | | | interfaces. | | | | | | The existing mechanisms do not | | | mitigate overload at home | | | network when large number of UEs | | | return to their home network | | | after accessing a localized | | | service. Moreover, assigning | | | random back-off time values to | | | UEs to initiate the next | | | re-registration attempt at | | | different time to reduce the | | | signalling load would increase | | | the overall waiting for UEs | | | before re-register to their home | | | network. | +----------------------------------+----------------------------------+ | Solution #9 | This solution proposes to | | | deregister UEs accessed to | | Prevention of overload build up | localized services in a | | at home network using AMF based | staggered manner before the | | congestion control when local | termination of local hosting | | service is over | network. In order to achieve | | | this, two mechanisms, namely, | | (Category: 1-a) | usage of network availability | | | timers and specific cause code | | | to trigger a controlled | | | deregistration are proposed. | | | | | | The solution assumes that the | | | hosting network is able to | | | determine the exact timing when | | | the local service stops and UEs | | | need to leave, which may not be | | | the case for most scenarios. | | | | | | The solution has an impact on UE | | | and AMF. For the UE, the impact | | | is to support new cause codes, | | | service availability timer and | | | related implementation. For the | | | AMF, the impact is to handle new | | | timer for UEs accessing to local | | | services and to support new | | | cause code in network-initiated | | | de-registration request. | | | | | | The solution prevents any | | | overload condition cause by | | | simultaneous registration | | | request coming from all the | | | returning UEs. However, a local | | | hosting network may not know the | | | actual capacity of the home | | | network to deregister UEs | | | accordingly to utilize the home | | | network's resources efficiently, | | | and the overall waiting time of | | | UEs would increase because each | | | UE has to wait until the | | | assigned random service | | | availability timer expires. | +----------------------------------+----------------------------------+ | Solution #10 | Although this solution mainly | | | addresses KI#4, it also | | Solution for discovery and | provides a solution for KI#6. | | selection of NPN hosting network | | | and localized services | It is proposed that either the | | | UE applies a random delay before | | (Category: 1-a) | initiating a PLMN selection or | | | HPLMN (or Credentials Holder) | | | configures UEs with slightly | | | different end time to the | | | validity time period. | | | | | | The end time of validity | | | condition may not always be the | | | same as the real end time of the | | | service. It can\'t be assumed | | | that UE\'s returning to the home | | | network is triggered by the time | | | validity condition. Moreover, it | | | would increase the overall | | | waiting time of UEs if a local | | | hosting network alters the | | | service end time of UEs without | | | knowing the actual capacity of | | | the home network which handles | | | returning UEs. | +----------------------------------+----------------------------------+ | Solution #13 | This solution proposes that the | | | hosting network may group UEs | | Exposure enhancements to support | based on the reported NWu status | | providing access to localized | and the UEs home network | | services | availability when UEs return to | | | their home network from the | | (Category: 1-a) | hosting network. The hosting | | | network assigns a random | | | back-off timer value to UEs | | | based on which group the UEs | | | belong to among four groups. | | | Then, UEs should wait until the | | | assigned back-off timer expires | | | to initiate re-registration | | | procedure to their home | | | networks. | | | | | | The solution has an impact on UE | | | and AMF. The UE, when receiving | | | the end indication of the | | | localized service from the | | | hosting network AMF, checks that | | | all local services are ended, | | | and reports Nwu interface status | | | and related home network | | | identity (e.g. PLMN ID) to the | | | AMF. | | | | | | The hosting network AMF groups | | | the UEs and send back-off-timer | | | to the UEs. | | | | | | This solution would mitigate an | | | overload at the home network. | | | However, it may increase the | | | overall waiting time for UEs | | | before re-registering to their | | | home network because the home | | | network capacity and load | | | condition are not considered by | | | the hosting network. | +----------------------------------+----------------------------------+ | Solution #17 | The solution proposes to use | | | group specific NAS level | | UE Group specific NAS level | congestion control mechanism to | | congestion control | mitigate user plane and control | | | plane overload. The home network | | (Category: 2-b) | associates UEs temporarily | | | accessing localized services to | | | an Internal-Group Identifier, | | | which can be specific to each | | | local hosting network and/or | | | service and applies UE | | | group-specific NAS level | | | congestion during the return of | | | UEs. | | | | | | The solution has an impact on | | | UE/AMF to support localized | | | service related de-registration | | | information, NEF to support | | | exposure from local hosting | | | networks, UDM to support local | | | hosting network/service | | | information in Internal-Group | | | identifier and AMF/SMF to apply | | | Group Specific NAS level | | | congestion control. | | | | | | This solution requires UE to | | | request registration in the home | | | network and then the AMF of the | | | home network applies UE | | | group-specific NAS level | | | congestion control. Naturally, | | | this solution does not prevent | | | an overload condition as the RAN | | | and the AMF will get | | | registration request from all | | | the returning UE and this may | | | lead to increased load in the | | | system. Moreover, assigning | | | random back-off time values to | | | UEs to initiate the next | | | re-registration attempt at | | | different time to reduce the | | | signalling load would increase | | | the overall waiting for UEs | | | before re-register to their home | | | network. | +----------------------------------+----------------------------------+ | Solution #25 | Although this solution mainly | | | addresses KI #4, it also | | (Category: 1-a) | provides a solution for KI #6. | | | | | | This solution proposes that the | | | home network UDM/SOR-AF can set | | | an offset value to the | | | authorized start/stop time for | | | UEs as part of enabling | | | Temporary Network Reselection | | | procedure in order to avoid | | | congestion/overload at the home | | | network. | | | | | | This solution potentially can | | | mitigate the congestion/overload | | | at the home network. However, | | | setting offset value to the | | | start/stop time for UEs in a | | | pre-determined way would | | | increase the overall waiting | | | time for UEs before re-register | | | to their Home Network. | +----------------------------------+----------------------------------+ | Solution #38 | This solution proposes to | | | control the number of returning | | Sequential deregistration by | UE based on service level | | hosting network | agreement between the home | | | network and hosting network. | | (Category: 1-b) | | | | The solution relies on that the | | | hosting network can group the | | | UEs according to their home | | | network, but it remains unclear | | | how it is achieved. Moreover, it | | | may not mitigate the | | | congestion/overload at the home | | | network because the congestion | | | level at the home network may | | | vary overtime based on the | | | number of UEs returning from | | | different hosting networks to | | | their home network. Hence, a | | | continuous | | | communication/negotiation | | | between the home network and the | | | hosting networks are expected | | | and not considered in the | | | proposed solution. | | | | | | The solution has an impact on UE | | | and AMF. For the UE, the impact | | | is to support finishing | | | deregistration procedure where | | | the termination of the localized | | | service is indicated by AMF and | | | to support return of the UE to | | | its home network. For the AMF, | | | the impact is to support | | | indication of localized service | | | termination as part of the | | | Deregistration request message | | | and to support triggering | | | deregistration in a sequence | | | manner in a way that the maximum | | | number of returning UEs at a | | | given units of time does not | | | exceed the configured number at | | | AMF. | +----------------------------------+----------------------------------+ | Solution #39 | This solution proposes a local | | | hosting network-specific | | Local hosting network specific | flexible back-off timer range | | back-off timer | and back-off timer assignment to | | | spread out the registration | | (Category: 2-c) | attempts over time and limit the | | | number of users attempting to | | | register back to their home | | | network simultaneously in order | | | to avoid signalling overload and | | | unnecessary waiting times for | | | the returning users. | | | | | | The solution effectively avoids | | | using uniformed non-optimal | | | back-off timers for all UEs. | | | | | | The solution has an impact on UE | | | and AMF. For the UE, the impact | | | is to support sending the local | | | network indication as part of | | | the new registration request | | | (\"re-registration from hosting | | | network\" or \"local network | | | access indication\"). For the | | | AMF, the impact is to support | | | new registration type/indicator | | | related to local hosting network | | | re-registration and assignment | | | of a local hosting | | | network-specific back-off timer | | | range. | | | | | | This solution requires UE to | | | request registration in the home | | | network and then the AMF of the | | | home network provides a back-off | | | timer. This solution does not | | | prevent an overload condition as | | | the RAN and AMF will get | | | registration request from all | | | the returning UE and this may | | | lead to increased load in the | | | system. | | | | | | Though this solution may not | | | mitigate an overload at the home | | | network, it can reduce the | | | overall waiting time for UEs | | | before re-register to their home | | | network by setting local hosting | | | network specific back-off timer | | | in an adaptive manner. | +----------------------------------+----------------------------------+ | Solution #47 | This solution solves the problem | | | of overloading at home network | | (Category: 1-c) | and reducing the unnecessary | | | waiting time of UEs before | | | re-register to their home | | | network. The proposed solution | | | deregisters UEs from the hosting | | | network to the home network in | | | an adaptive manner based on the | | | input from the home network | | | (i.e. the allowed maximum number | | | of returning UEs from the | | | hosting network to the home | | | network AMF per unit time based | | | on the network load condition at | | | the home network). If network | | | condition varies at the home | | | network, then the home network | | | AMF notifies a new value (i.e. | | | the new allowed maximum number | | | of returning UEs per unit time) | | | to the hosting network in a new | | | notification such that the | | | number of UEs deregistered from | | | the hosting network to the home | | | network can be controlled | | | adaptively to mitigate an | | | overload/congestion at the home | | | network. | | | | | | This solution has an impact on | | | UE, AMF, and UDM. For the UE, | | | the impact is to support to wait | | | for a random amount of time | | | before initiating | | | re-registration procedure to the | | | Home Network if the number of | | | UEs attempting to return to the | | | Home Network exceeds the given | | | maximum allowed value for the | | | case of UEs initiate the | | | Deregistration Request. For the | | | AMF, the impact is to support to | | | determine the hosting network | | | and the localized service | | | specific the maximum allowed | | | number of returning UEs to the | | | home network. For the UDM, the | | | impact is to support to | | | coordinate with the hosting | | | network AMFs for selection of | | | the allowed maximum number of | | | returning UEs to the home | | | network based on the | | | notification from the home | | | network AMF. | | | | | | This solution effectively avoids | | | an overload/congestion at the | | | Home Network, efficiently | | | utilizes the available resources | | | in the home network AMF, and | | | does not hold UEs to wait | | | unnecessarily. This solution | | | also supports to handle | | | UE-initiated deregistration | | | requests and instructs UEs to | | | wait random amount of time | | | before attempting | | | re-registration to their home | | | network if the number of UEs | | | initiated deregistration | | | requests exceeds the home | | | network given maximum value to | | | mitigate the overload at the | | | home network. | +----------------------------------+----------------------------------+
In the avoidance-based solutions (Category 1), there are three subcategories
based on the principles used to address the requirements mentioned in the KI
#6, which are summarized as follows:
\- Category 1-a based solutions are based on the principle of pre-configuring
UEs service end time either by the home network or hosting network to spread
out the registration attempts over time and limit the number of simultaneous
attempts in a very short period of time in order to mitigate an
overload/congestion at the home network. Though the category 1-a based
solutions potentially mitigate the overload at home network, they would
increase the overall waiting time for UEs before registering to their home
network as all UEs are pre-configured to make re-registration attempt to their
home network at different point in time without knowing the actual capacity of
the home network AMF.
\- Category 1-b based solutions are based on the principle of one-time
negotiation/communication between the home network and the hosting network to
deregister the number of UEs simultaneously per unit time from the hosting
network to the home network without causing overload/congestion at the home
network. Since it's a one-time negotiation/communication between the home
network and the hosting network as part of a service level agreement and the
actual load in the home network may vary over time, the constant/fixed number
of deregistration of UEs from the hosting network to the home network may lead
to congestion/overload. Also, if the home network is in a position to handle
more of UEs that it was communicated/negotiated earlier, then UEs in the
hosting network may have to wait unnecessarily.
\- Category 1-c based solutions are based on the principle of
negotiating/communicating the home network AMF capacity with the hosting
network continuously to deregister the number of UEs simultaneously per unit
time from the hosting network to the home network without causing
overload/congestion at the home network. Since the home network and the
hosting network are negotiating/communicating continuously using subscribe-
notify communication service, the load variation in the home network due to
less or high number of attempts from the home network and other hosting
networks UEs is notified to the hosting network as a new maximum threshold
value (i.e. the new allowed maximum number of returning UEs per unit time) in
a new notification. Hence, the hosting network can deregister the number of
UEs adaptively based on the current capacity of the home network AMF without
causing overload/congestion at the home network. Also, it minimizes the
overall waiting time for UEs before re-registering to their network and
utilizes the available resources in the home network AMF efficiently.
In the runtime-based solutions (Category 2), there are three subcategories
based on the principles used to address the requirements mentioned in the KI
#6, which are summarized as follows:
\- Category 2-a based solutions reuse the existing mechanisms without any
additional enhancements. However, the existing mechanisms do not avoid an
overload/congestion at the home network when a high number of UEs attempt to
return from the hosting network to their home network in a short period of
time. Moreover, the existing mechanisms would increase the overall waiting
time of UEs as the existing mechanisms use the same pre-defined range for
assigning random back-off timer value to all UEs irrespective of their size
and service type they used.
\- Category 2-b based solutions are based on the principle of grouping UEs to
create an Internal-Group Identifier specific to local hosting network(s)
and/or local service(s) and then reusing the existing UE group-specific NAS
level congestion control mechanism to manage UEs returning from a local
hosting network to their home network. However, the existing mechanisms do not
avoid overload and would increase the overall waiting time of users since the
same pre-defined range is used for assigning random back-off timer value to
all UEs irrespective of their size and service type they used.
\- Category 2-c based solutions are based on the principle of assigning a
local hosting network specific back-off timer value in order to reduce the
overall waiting for UEs before re-register to their home network.
A UE returning from a Hosting Network after using a Localized Service would
normally not have higher priority than any other UEs, i.e. the prioritization
among UEs would better follow existing mechanisms and therefore adding a
separate indication that the UE is returning from the Hosting Network as an
indication to the Home Network can be questioned. However, as the avoidance-
based method potentially delays the UEs return to the Home Network also for
the cases when the Home Network is not overloaded/congested, unless a frequent
load check is introduced, it is better to allow the UE return as soon as the
Localized Service ends or whenever the UE (e.g. user) decides to stop using
the Localized Service and therefore leaves the Hosting Network before the end
of the Localized Service. The end time of the Localized Service can be adapted
on application layer by existing means i.e. without 3GPP impacts.
# 8 Conclusions
Editor\'s note: This clause will capture conclusions from the study.
## 8.1 Key Issue #1: Enabling support for idle and connected mode mobility
between SNPNs without new network selection
Following the similar principles used in the Equivalent PLMNs, it is concluded
that the following principles for the Equivalent SNPNs are to be used as basis
for normative work:
\- Since UE may have either a subscription that can be used to access source
and target SNPNs or has the credentials from a Credentials Holder (CH) to
access both source and target SNPNs, the lists of equivalent SNPNs are stored
and used per SNPN subscription by the UE.
\- UE and AMF support of equivalent SNPN list in NAS.
\- NG-RAN and AMF support of equivalent SNPNs in NGAP.
\- UE/NG-RAN/AMF take equivalent SNPN list into consideration, for supporting
relevant functions, e.g.:
\- idle/connected network selection.
\- cell (re)selection.
\- AMF to inform UE the registered SNPN ID change during mobility in
Registration Accept message, when there is a change of registered SNPN.
\- NGAP impact for supporting connected mode mobility between SNPNs.
NOTE: It is up to RAN WG3 to decide how to extend NGAP for connected mode
mobility.
\- Equivalent SNPNs, with different SNPN IDs, within an RA is not supported
for SNPNs.
## 8.2 Key Issue #2: Support of Non-3GPP access for SNPN
The following conclusions are agreed for normative work:
\- Access to SNPN services via Untrusted non-3GPP access network includes
support for Credential Holder, UE Onboarding and Emergency services.
Specifically:
\- When UE registers to SNPN with credentials owned by the SNPN, UE uses the
same N3IWF selection procedure as specified for access to stand-alone non-
public network services via PLMN in clause 6.3.6.2a of TS 23.501 [3].
\- UE initiates N3IWF selection for emergency services when the UE detects a
user request for emergency session and determines that Untrusted non-3GPP
access is to be used for the emergency access. The UE with SNPN subscription
performs the following:
\- If the UE determines that it is located in the same country as the
subscribed SNPN, the UE uses the configured N3IWF FQDN for N3IWF selection.
\- Otherwise, the UE follows the N3IWF selection procedure for Emergency
services for UE not equipped with UICC, as defined in clause 6.3.6.4.2 of TS
23.501 [3].
\- When the UE is registering to SNPN over Untrusted N3GPP access for UE
Onboarding, UE may select a N3IWF in the SNPN which supports UE Onboarding by
using the pre-configured N3IWF FQDN used for onboarding.
NOTE 1: The GIN is not used to construct a N3IWF FQDN if a UE is registering
to SNPN over Untrusted N3GPP access.
NOTE 2: The format of FQDN will be specified by CT WG4.
\- If the PVS is reachable from the local Untrusted non-3GPP access network
(e.g. via the Internet) using the local IP connectivity, UE may connect
directly (i.e. without connected to a N3WIF) with a PVS to obtain the SNPN
credentials.
\- Access to SNPN services via Trusted non-3GPP access network is to be
specified according to the principles described in Solution #3, including
support for credential Holder, Emergency services and UE onboarding.
Specifically:
\- ANQP is to be extended to support advertising of:
\- SNPN IDs and GINs corresponding to SNPNs with which 5G connectivity is
supported and related parameters as described in clause 6.3.3.1.
\- Support for Emergency services.
\- Onboarding enabled indication.
NOTE 3: The work on additional parameters in ANQP is to be kept internal to
3GPP.
NOTE 4: If the UE tries to register with an SNPN via TNAN X in the case of
SNPN ID with self-assigned NID, and the UE is rejected by the AMF with a cause
code that temporarily prevents the UE from registering with this SNPN, the UE
does temporarily not attempt to register with the same SNPN, even if the same
SNPN ID is advertised via another TNAN Y.
\- When accessing SNPN services via Trusted or Untrusted non-3GPP access the
UE needs to be able to construct a prioritized list of WLAN access networks by
using enhanced WLAN Selection Policy (WLANSP) rules from ANDSP (currently
supported only for PLMN in TS 23.402 [9]) or based on local configuration.
\- N3IWF and TNGF needs to be able to include the \"selected NID\" in the
[NGAP] INITIAL UE MESSAGE, which is up to RAN WG3 to define.
\- Access to SNPN services via wireline access network and use of Credential
Holder is to be supported by defining a new GCI including a \"NID\".
\- The NSWO procedure is to be extended to support UE authentication using
SNPN credentials (applies both to SIM-based and non-SIM based credentials). It
is expected that the impact is limited to the use of a SUCI format whose
\"realm\" part enables routing of SWa requests from the WLAN AN to the NSWO in
the SNPN\'s 5GC, which is already supported.
\- To support N5CW device access to SNPN services, the TWAP needs to be able
to advertise a list of SNPNs with which \"5G connectivity-without-NAS\" is
supported, equivalent to the PLMN list-4 defined in clause 6.3.12a.2 of TS
23.501 [3].
NOTE 3: Additional conclusions for wireline access related to UE behind 5G-RG
depends on the progress on the FS_5WWC_Ph2 study.
NOTE 4: Functionality related to the use of the same credentials for access to
SNPN with NG-RAN and to WLAN Access Network as proposed in Solution #16 can be
considered during normative work based on any feedback from SA WG3.
## 8.3 Key Issue #3: Enabling NPN as hosting network for providing access to
localized services
When describing the feature description in the normative phase, the
definitions for localized service and localized service provider in clause 3
can be used as basis.
There are different types of interactions between hosting network operator and
localized service provider. Depending on the types of the interactions,
following principles are proposed to address this key issue:
**For interactions between localized service provider and hosting network
operator:**
The service agreements between hosting network operator and localized service
provider can include:
\- list of the identification of the localized services;
\- validity restriction for each localized service, e.g. the validity of time
or location;
\- service parameters for each localized service, e.g. DNN, S-NSSAI and QoS
requirements;
\- service authorization methods, e.g. NSSAA or PDU Session SAA.
Depending on the types of the interactions, following principles are proposed:
\- If the purpose is to configure the hosting network (e.g. creation of
network slice/DNN for carrying localized service traffic), existing OAM
mechanisms can be re-used as per TS 28.557 [20] clause 6.3.1, that provides a
solution for NPN provisioning by a network slice of a PLMN and for exposure of
management capability of PNI-NPN (clause 6.3.2). The attributes to support
this management is further documented in TS 28.541 [21].
\- For other types of Session Management level interactions (e.g. monitoring
hosting network performance, enabling special QoS for UE in hosting network
for localized service, etc.), the following options can be considered:
\- Covered by the SLA.
\- Reuse the existing network exposure procedures (see TS 23.502 [4] clause
4.15).
\- Enable NEF/PCF in the hosting network (via AF of the localized service
provider) to receive and forward the validity conditions and QoS requirements
of the localized services to the AMF/SMF by reusing the existing PCF initiated
AMF/SM policy association procedure.
Conclusions in Key issue #4 and Key issue #5 are sufficient to cover all
necessary interactions between home network and hosting network.
It is suggested to re-use existing mechanisms that does not require SA2
normative work.
## 8.4 Key Issue #4: Enabling UE to discover, select and access NPN as hosting
network and receive localized services
### 8.4.1 General
The conclusion for KI #4 is made for each component that is evaluated in
clause 7.4.
When UE accesses the Hosting network using the subscription/credentials of its
Home network, only two cases are considered:
\- If Home network is PLMN, the Hosting network can be PNI-NPN or SNPN.
\- If Home network is SNPN, the Hosting network can be only SNPN
If the UE accesses the Hosting network using the other credentials rather than
the subscription/credentials from the UE Home network, the determination of
the subscription used to access the Hosting network is by implementation
specific prior to automatic network selection as described in NOTE 1 of clause
5.30.2.4.2 of TS 23.501 [3].
### 8.4.2 Conclusion for the content of the information for accessing
localized services
The following interim conclusions are reached.
For manual selection existing SIB information e.g. HRNN and/or application
layer information can be used without any normative impact.
For automatic selection the following is concluded:
a. In the case of SNPN as hosting network, for automatic SNPN selection, the
existing Credentials Holder controlled prioritized list of preferred SNPNs
(and GINs) is extended with, for each entry in the list, time and location
validity information. An entry may include time validity only, location
validity only, or both. The location validity information can be in the form
of geolocation and/or TAIs of serving PLMN/SNPN.
NOTE: The location validity information is used to aid the UE where to search
for the SNPNs in the CH lists and is not used for any enforcement.
b. for automated cell re-selection:
\- In the case of PNI-NPN with CAG, the allowed CAG list can include time
validity information as already agreed in TR 23.700-05 [23] (CR3813 to TS
23.501 [3] for VMR).
\- In the case of PNI-NPN using S-NSSAI, the SOR can include S-NSSAI
information as already concluded by TR 23.700-41 [24] (KI#2), or S-NSSAI
validity information including time and location as concluded by KI#3 can be
used.
### 8.4.3 Conclusion for from where and how UE obtains the information for
accessing localized service
The information for localized service can be obtained by UE at the application
layer from the home network or the localized service provider via means that
are outside of 3GPP scope.
The hosting network selection information is provisioned as below:
1\. The information for hosting network, selection and access can be
preconfigured in the UE or dynamically provisioned by home network (via the
VPLMN when roaming) using existing mechanisms.
2\. In the case of SNPN as hosting network, the dynamic provisioning of
prioritized list of hosting network information can be done via SoR:
NOTE: How SOR-AF and/or UDM acquires hosting network information is outside
the scope for 3GPP.
i. The home network UDM may determine to update UE with prioritized list of
hosting network information using SoR procedure. Following triggers may apply:
\- UE location as part of Registration procedure.
\- UE subscription data change, e.g. via external parameter provisioning.
3\. In the case of PNI-NPN as hosting network, the dynamic provisioning of
allowed CAG ID list reuses existing procedure in clause 5.30.3.3 of TS 23.501
[3].
### 8.4.4 Conclusion for how the localized service information is used by UE
The following principles based on the evaluation in clause 7.4.4 are
recommended for the normative work:
1\. If UE uses home network credential to access a hosting network:
a. When the end user intends to access localized service and the validity
conditions of localized service are met, the UE initiates hosting network
selection using the hosting network selection information.
i. For SNPN as hosting network, the UE can switch between PLMN selection and
hosting network selection following Rel-17 specification for SNPN selection
with the following difference:
\- If the UE is configured with Credential Holder controlled prioritized lists
of preferred SNPNs and GINs and the lists contain entries with a validity
condition and the validity condition is met for at least one of those entries,
then the UE may select the related SNPNs even if the subscribed SNPN (if any)
is available (i.e. the hosting network may have a higher priority than the
subscribed SNPN). How the UE switches among the network selections is up to UE
implementation.
ii. For PNI-NPN as hosting network associated with CAG ID, the UE only
considers an entry in the Allowed CAG list valid if and while all conditions
(if there is any) for that entry are met.
NOTE 1: Whether a new network selection mode is required for UE to initiate
hosting network selection for an SNPN (i.e. to select an SNPN as hosting
network) is to be determined by CT WG1.
NOTE 2: Details regarding priority list for hosting network selection for an
SNPN (i.e. to select an SNPN as hosting network), including if a new selection
mode is required, is up to CT WG1 to decide.
b. Automatic hosting network selection is controlled by the home network, via
SoR procedure with SoR information including certain authorized criteria e.g.
time. Based on the SoR information, the UE performs automatic hosting network
selection.
i. For manual hosting network selection, the UE presents available localized
service information it has received to the end user.
2\. If the UE needs to obtain a new set of credentials/subscription to access
the hosting network:
a. It is up to UE implementation to decide how to switch to the new
subscription profile for accessing hosting network.
3\. The UE determines SNPN access mode is activated/de-activated using
implementation specific means as specified in existing Release 17, or using
received localized service/hosting network assistance information as input.
### 8.4.5 Conclusion for what credentials are used to access hosting network
and how to obtain them
The following principles based on the evaluation in clause 7.4.5 are
recommended for the normative work in the case of SNPN as hosting network:
1\. The UE checks whether it is possible to re-use the home network
credentials to access the hosting network by performing the following:
a. If the UE uses CH/User controlled priority lists part of the Home network
subscription profile or if the UE uses hosting network related information
from the Home network (part of the localized service information) which
indicates support of CH credentials, the UE determines that home network
credential can be used to register with the selected Hosting network.
2\. If the UE has Default credentials and the UE determines that new
credentials for accessing hosting network are needed, the UE uses the Default
credentials for the onboarding mechanism with the ON-SNPN acting as hosting
network as per Rel-17 with the following enhancements:
a. In case that the UE is preconfigured with PVS address information and the
UE receives PVS address information from the SMF during the PDU Session
Establishment Accept message, the UE may determine based on local
configuration whether to apply or ignore the PVS address information provided
by the SMF.
NOTE: Backwards compatibility with Rel-17 UE behaviour needs to be considered
during normative phase.
The following principles based on the evaluation in clause 7.4.5 are
recommended for the normative work in the case of PNI-NPN as hosting network:
3\. Only UEs equipped with a USIM configured with PLMN credentials can access
a hosting network which is a PNI-NPN. When the UE requests to access the
hosting network, the home PLMN credential(s) are used during authentication
procedure.
### 8.4.6 Conclusion for how localized service is accessed in hosting network
per agreed conditions
The following principles based on the evaluation in clause 7.4.6 are
recommended for the normative work:
1\. Validity conditions provided to the UE as part of the localized service
information can be used to restrict the UE\'s access of the hosting network.
2\. Existing methods, such as network slicing, forbidden area restriction,
service area restriction, CAG, LADN, URSP rules can also be utilized to
restrict UE\'s access, i.e. no need for additional normative work for access
control in hosting network.
3\. In order to restrict access to a hosting network to a specific area, a
hosting network operator may deploy and broadcast multiple hosting network
IDs, i.e. SNPN IDs for SNPN case and CAG IDs in the case of PNI-NPN, in
different areas depending on localized service area validity. Each localized
service is mapped to a specific hosting network ID. Multiple localized service
areas can be mapped to the same hosting network ID if their allowed service
areas are the same. Validity conditions are also used by hosting network to
restrict access.
## 8.5 Key Issue #5: Enabling access to localized services via a specific
hosting network
The following conclusions are agreed for normative work:
\- The existing SoR procedure is enhanced as follows:
\- The SoR contains the Credentials Holder controlled prioritized list of
preferred SNPNs (and GINs) which is extended with, for each entry in the list,
validity condition information, for the scenario where the UE reuses
Credential Holder credentials to access the hosting network. The list is
determined by the home network and may be associated with validity conditions,
including time and location conditions.
\- When the hosting network is an SNPN which provides localized services and
the home network is an HPLMN, the architecture specified in clause 5.30.2.7 of
TS 23.501 [3] is reused for the UE to access both home network services (using
the SNPN as underlay network) and localized services (via the SNPN).
\- If the hosting network is a PNI-NPN, existing mechanisms (e.g. roaming
architecture, network slicing, etc.) are reused for the UE to access home
network services.
\- The existing URSP rules or LADN feature can be re-used for a UE to access
the Localized services after the UE has registered to a Hosting network. URSP
rules are pre-configured in the UE, provisioned by the PCF of the home network
or provisioned by the PCF of the hosting network according to existing
principles.
## 8.6 Key Issue #6: Support for returning to home network
The following principles from the evaluation are recommended to be considered
during the normative work:
\- The home/serving network can re-use existing mechanisms for Control Plane
Load Control, Congestion and Overload Control described in clause 5.19 of TS
23.501 [3] when load level reaches a certain threshold and overload control
mechanism are triggered.
\- Additional mechanisms can be implemented to ensure spreading of return of
the UEs to home network without any normative impacts to 3GPP specifications.
NOTE: Means to describe how to spread returning UEs can be captured as
informative description, during normative specification work.
#