# Foreword
This Technical Report has been produced by the 3rd Generation Partnership
Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
In the present document, modal verbs have the following meanings:
**shall** indicates a mandatory requirement to do something
**shall not** indicates an interdiction (prohibition) to do something
The constructions \"shall\" and \"shall not\" are confined to the context of
normative provisions, and do not appear in Technical Reports.
The constructions \"must\" and \"must not\" are not used as substitutes for
\"shall\" and \"shall not\". Their use is avoided insofar as possible, and
they are not used in a normative context except in a direct citation from an
external, referenced, non-3GPP document, or so as to maintain continuity of
style when extending or modifying the provisions of such a referenced
document.
**should** indicates a recommendation to do something
**should not** indicates a recommendation not to do something
**may** indicates permission to do something
**need not** indicates permission not to do something
The construction \"may not\" is ambiguous and is not used in normative
elements. The unambiguous constructions \"might not\" or \"shall not\" are
used instead, depending upon the meaning intended.
**can** indicates that something is possible
**cannot** indicates that something is impossible
The constructions \"can\" and \"cannot\" are not substitutes for \"may\" and
\"need not\".
**will** indicates that something is certain or expected to happen as a result
of action taken by an agency the behaviour of which is outside the scope of
the present document
**will not** indicates that something is certain or expected not to happen as
a result of action taken by an agency the behaviour of which is outside the
scope of the present document
**might** indicates a likelihood that something will happen as a result of
action taken by some agency the behaviour of which is outside the scope of the
present document
**might not** indicates a likelihood that something will not happen as a
result of action taken by some agency the behaviour of which is outside the
scope of the present document
In addition:
**is** (or any other verb in the indicative mood) indicates a statement of
fact
**is not** (or any other negative verb in the indicative mood) indicates a
statement of fact
The constructions \"is\" and \"is not\" do not indicate requirements.
# 1 Scope
This Technical Report will study, based on requirements as specified in
clauses 6.40 and 7.10 of TS 22.261 [2], 5GS assistance to support Artificial
Intelligence (AI) / Machine Learning (ML) model distribution, transfer,
training for various applications, e.g. video/speech recognition, robot
control, automotive, etc.
The scope of this study is on how the AI/ML service providers could leverage
5GS as the platform to provide the intelligent transmission support for
application layer AI/ML operation based on the following objectives.
1\. Study the possible architectural and functional extensions to support the
Application layer AI/ML operations defined in TS 22.261 [2], more
specifically:
a. Support monitoring of network resource utilization in the 5G system
relevant to the UE in order to support Application AI/ML operation.
b. Whether and how to extend 5GS information exposure for 5GC NF(s) to expose
UE and/or network conditions and performance prediction (e.g. location, QoS,
load, congestion, etc.) to the UE and/or to the authorized 3rd party to assist
the Application AI/ML operation.
c. Enhancements of external parameter provisioning to 5GC (e.g. expected UE
activity behaviours, expected UE mobility, etc.) based on Application AI/ML
operation.
d. Investigate the enhancements of other 5GC features that could be used to
assist the Application AI/ML operations as described in clause 6.40 of TS
22.261 [2].
2\. Study possible QoS, Policy enhancements to support Application AI/ML
operational traffic while supporting regular (non Application-AI/ML) 5GS user
traffic.
3\. Study whether and how 5GS provides assistance to AF and the UE for the AF
and UE to manage the Federated Learning (FL) operation and model
distribution/redistribution (i.e. FL members selection, group performance
monitoring, adequate network resources allocation and guarantee) to facilitate
collaborative Application AI/ML based Federated Learning operation between the
application clients running on the UEs and the Application Servers.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or non‑specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 22.261: \"Service requirements for the 5G system; Stage 1\".
[3] 3GPP TS 23.501: \"System Architecture for the 5G System; Stage 2\".
[4] 3GPP TS 23.502: \"Procedures for the 5G System; Stage 2\".
[5] 3GPP TS 23.503: \"Policy and charging control framework for the 5G System
(5GS); Stage 2\".
[6] 3GPP TS 23.288: \"Architecture enhancements for 5G System (5GS) to support
network data analytics services\".
[7] 3GPP TS 26.531: \"Data Collection and Reporting; General Description and
Architecture\".
[8] 3GPP TR 22.874: \"Study on traffic characteristics and performance
requirements for AI/ML model transfer in 5GS\".
[9] 3GPP TS 29.514: \"5G System; Policy Authorization Service; Stage 3\".
[10] 3GPP TS 23.548: \"5G System Enhancements for Edge Computing; Stage 2\".
[11] 3GPP TR 23.700‑81: \"Study of Enablers for Network Automation for 5G
System (5GS); Phase 3\".
[12] 3GPP TS 37.320: \"Radio measurement collection for Minimization of Drive
Tests (MDT); Overall description; Stage 2\".
[13] 3GPP TS 24.301: \"Non-Access-Stratum (NAS) protocol for Evolved Packet
System (EPS); Stage 3; Stage 3\".
[14] 3GPP TS 27.007: \"AT command set for User Equipment (UE)\".
[15] 3GPP TS 29.554: \"5G System; Background Data Transfer Policy Control
Service; Stage 3\".
# 3 Definitions of terms and abbreviations
## 3.1 Terms
For the purposes of the present document, the terms given in TR 21.905 [1] and
the following apply. A term defined in the present document takes precedence
over the definition of the same term, if any, in TR 21.905 [1].
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in TR 21.905
[1] and the following apply. An abbreviation defined in the present document
takes precedence over the definition of the same abbreviation, if any, in TR
21.905 [1].
AI Artificial Intelligence
ML Machine Learning
FL Federated Learning
# 4 Architectural Requirements and Assumptions
## 4.1 Architectural Requirements
The Application AI/ML operation logic is controlled by an Application Function
(AF).
Any AF request to the 5G System in the context of 5GS assistance to
Application AI/ML operation should be authorized by the 5GC.
The 5G System should ensure the performance KPIs specified in TS 22.261 [2]
clause 7.10, to support the Application AI/ML traffic.
## 4.2 Architectural Assumptions
To support AI/ML based services/applications via 5GS, the following
architectural assumptions are made in the present study:
\- In Rel-18, an Application AI/ML operation is conducted within a single
slice, i.e. all UEs which are involved in a given Application AI/ML operation
are served by the same S-NSSAI and the Application Function (AF) belongs to
this S-NSSAI.
\- In Rel-18, roaming is not supported, i.e. inter PLMN coordination aspects
will not be studied.
\- 5GC can differentiate Application Layer AI/ML traffic by using existing
mechanisms defined in TS 23.501 [3].
NOTE 1: The 5G System architecture to support the Application AI/ML operation
in the current release should not preclude the support of roaming in a future
release.
NOTE 2: Whether 5GC needs to be aware of the Application Layer AI/ML operation
type is documented in clause 8.
NOTE 3: Different KPI requirements, as described in the subclause 7.10 of the
TS 22.261 [2], need to be taken into account for AI/ML model transfer in 5GS.
How to map these KPI requirements into 5GS QoS parameters is discussed under
conclusions for KI#6.
## 4.3 Reference Architecture
The architecture, framework, definitions and terminology specified in TS
23.501 [3], TS 23.502 [4], TS 23.503 [5] and TS 23.288 [6] are the baselines
for the present study.
# 5 Key Issues
## 5.1 Key Issue #1: Monitoring of network resource utilization for support of
Application AI/ML operations
This KI addresses WT#1.1a. To support AI/ML based services/applications, 5GS
network resources are utilized for AI/ML model and data distribution, transfer
and/or training for various applications.
To monitor the network resource utilization in the 5GS relevant to the UE\'s
performance for supporting AI/ML based services/applications, the following
aspects are to be studied:
\- How to monitor network resource utilization relevant to the UE\'s
performance (e.g. such as the data throughput provided to the UE) for
supporting Application AI/ML model/data distribution and sharing related
operations, including:
\- Whether and how to measure network resource utilization relevant to the
UE\'s performance (as described in TS 22.261 [2]) in the 5G system to support
Application AI/ML traffic.
NOTE: Network resource utilization measurements relevant to UE\'s performance
are done by the network, additional UE measurements are out of scope of this
study. Neither Uu nor any AN impacts are in the scope of this study.
\- Whether and what enhancements (including new monitoring events) are
required to existing monitoring mechanisms (e.g. monitoring capability as
specified in clause 5.20 of TS 23.501 [3]) to capture and/or predict network
resource utilization relevant to UE\'s performance for traffic related to
Application AI/ML operations.
## 5.2 Key Issue #2: 5GC information exposure to UE
As documented in SA WG1 TS 22.261 [2], the application layer AI/ML model can
be downloaded from AF/AS to UE to facilitate local intelligence, i.e. the UE
can do inference and make decisions locally, for the use cases such as image
recognition, speech recognition, media quality enhancement, etc. The UE may
need information from the 5GC to assist its local decision.
This Key Issue is related to WT#1.1b, and aims at studying whether and how to
enhance the 5GC to expose information to the UE to facilitate its Application
AI/ML operation (e.g. Model Training, Splitting and inference feedback etc.):
\- Whether and for which purpose there is a need for 5GC to expose information
or data analytics to the UE, and what are the information or data analytics
that can be provided by 5GC to the UE to assist the Application AI/ML
operation at the UE side.
\- How the 5GC exposes such information or data analytics to the UE.
NOTE: SA WG1 feedback on exposure of network information to the UE and
security analysis by SA3 will be taken into account before the conclusion of
this Key Issue.
## 5.3 Key Issue #3: 5GC Information Exposure to authorized 3rd party for
Application Layer AI / ML Operation
This KI is related to WT#1.1b.
It is required for 5GC to expose different types of assistance information to
AF for AI / ML operation. This KI will study the following aspects:
\- Whether and what assistance information and events are exposed from 5GS to
AF, more specifically, the prediction of UE and/or network conditions and
performance (e.g. location, QoS, load, Congestion, etc.) as described in TS
22.261 [2]? How?
NOTE: User consent is assumed only for UE-related information. Coordination
with SA WG3 on exposing UE-related information to an AF is required to ensure
privacy and security requirements are met.
## 5.4 Key Issue #4: Enhancing External Parameter Provisioning
This key issue is related to Objective 1.c.
As outlined in clause 4.15.6 of TS 23.502 [4], provisioning capability allows
an external party to provision the information, such as expected UE behaviour
and service specific parameters to 5G network functions. For example, the
expected UE behavioural information consists of information on expected UE
movement and communication characteristics. Provisioned data can be used by
the other NFs. The Expected UE Behaviour parameters characterise the foreseen
behaviour of a UE or a group of UEs.
However, it is to be studied how external parameter provisioning to the 5GC
can be enhanced for the assistance to Application AI/ML operation.
In order to enhance external parameter provisioning to 5GC for the assistance
to Application AI/ML operation, the following needs to be studied:
\- Whether and what additional parameters can be provisioned to 5GC by an
external party for the assistance to Application AI/ML operation.
\- How additional parameters are provisioned to 5GC by an external party.
\- How provisioned parameters are retrieved or maintained or used by 5GC NFs
(e.g. UDM, AMF or SMF).
NOTE: Privacy aspects will be handled by SA WG3.
## 5.5 Key Issue #5: 5GC Enhancements to enable Application AI/ML Traffic
Transport
This key issue is to address WT#1.1d.
Different levels of interactions are expected between UE and AF as AI/ML
endpoints based on TS 22.261 [2] to exchange AI/ML model, intermediate data,
local training data, inference results or model performance as Application
AI/ML traffic(s).
The following aspects are to be studied, in regard to how to assist the
Application AI/ML operation:
\- Whether and how the existing 5GC data transfer/traffic routing mechanisms
are re-used or enhanced to support the transmission of the Application AI/ML
traffic(s) over 5GS between AI/ML endpoints (i.e. UE and AF)?
NOTE 1: Privacy aspects will be handled by SA WG3.
\- Whether new 3GPP charging mechanisms are required for identification and
charging of Application AI/ML traffic over the user plane that cannot be
attributed or charged to the end user?
NOTE 2: Charging aspects will be done in collaboration with SA WG5.
## 5.6 Key Issue #6: QoS and Policy enhancements
This key issue is applicable to Objective 2 (i.e. WT#1.2) which addresses QoS
and Policy enhancements to support Application AI/ML operation traffic for
AI/ML model transfer in 5GS, to address SA WG1 requirement as specified in TS
22.261 [2].
As defined in requirements specified in TS 22.261 [2], the 5G system can at
least support three types of AI/ML operations:
\- AI/ML operation splitting between AI/ML endpoints.
\- AI/ML model/data distribution and sharing over 5G system.
\- Distributed/Federated Learning over 5G system.
In order to conclude whether the 5G system meets QoS performance requirements
as specified in clause 7.10 of TS 22.261 [2], this study needs to determine
whether any additional QoS and/or policy enhancements to the 5G system are
required
Therefore, this key issue will study solutions on below aspect(s) for the
possible QoS and Policy enhancements to support Application AI/ML operation:
\- Whether the current QoS model for 5GS defined in clause 5.7 of TS 23.501
[3] needs to be enhanced to support performance KPIs defined in clause 7.10 of
TS 22.261 [2]. If new QoS parameters are needed whether the existing Policy
framework in TS 23.503 [5] needs to be enhanced to account for the new QoS
parameters and how.
\- Whether the current QoS model for 5GS defined in clause 5.7 of TS 23.501
[3] needs to be enhanced to account for the following types of application
AI/ML traffic:
i) data collected for training and inference and shared by the application
server or UE over the 5GS; and
ii) AI/ML models trained by the application server or UE shared over the 5GS.
\- Whether the current QoS Monitoring can be used to expose, to an authorized
3rd party, monitoring and status information, regarding resource utilization
of network services associated to this 3rd party AI/ML application, as
specified in clause 6.40 of TS 22.261 [2]. If not, what enhancements are
needed.
\- Whether the current QoS model defined in clause 5.7 of TS 23.501 [3] and
policy framework defined in TS 23.503 [5] provides support to assist the
application AI/ML operation to be informed on predictions of changing network
conditions (i.e. bitrate, latency, reliability) in a timely manner. If not,
what enhancements are needed.
## 5.7 Key Issue #7: 5GS Assistance to Federated Learning Operation
This KI is to study whether and how 5GS provides assistance to AF and the UE
for the AF and UE to manage the FL operation and model
distribution/redistribution (i.e. FL member selection, group performance
monitoring, adequate network resources allocation and guarantee) to facilitate
collaborative Application AI/ML based Federated Learning operation between the
application clients running on the UEs and the Application Servers.
In order to provide assistance to the AF and the UE for FL operations, it is
proposed to study the following aspects:
**On assistance to selection of UEs for FL operation:**
\- Whether, how and what information provided by 5GC to the AF can help the AF
to select and manage the group of UEs which will be part of FL operation.
NOTE: The FL group management should be controlled and managed by the AF.
\- Whether, how and what information is required by the 5GC in order to assist
the AF for selecting and managing the group of UEs which will be part of FL
operation.
**On performance monitoring/exposure:**
\- How to monitor and expose a UE or a group of UEs performance (e.g.
aggregated QoS parameters) as described in TS 22.261 [2] related to FL
operations.
\- Whether and what existing or new monitoring events (e.g. QoS, location,
load, congestion) are required to capture specific System Performance and
Predictions for traffic related to AI/ML operations for FL operation.
**On FL performance:**
\- How to assist AF to increase the FL performance (e.g. to manage latency
divergence) among UEs when the application server receives the local ML model
training information from different UEs in order to perform global model
update.
# 6 Solutions
## 6.0 Mapping Solutions to Key Issues
Table 6.0-1: Mapping of Solutions to Key Issues
              Key Issues
* * *
Solutions 1 2 3 4 5 6 7 1 X X  
2 X  
3 X  
4 X  
5 X  
6 X X 7 X X  
8 X X  
9 X  
10 X  
11 X X  
12 X  
13 X  
14 X X 15 X  
16 X X X X 17 X 18 X 19 X 20 X 21 X 22 X 23 X 24 X 25 X 26 X X 27 X 28 X X X X
X X X 29 X X  
30 X  
31 X  
32 X  
33 X  
34 X X  
35 X  
36 X  
37 X X 38 X X 39 X 40 X X 41 X 42 X X 43 X 44 X 45 X 46 X 47 X
## 6.1 Solution #1: 5GS Monitoring Capabilities for AI/ML-based Services
### 6.1.1 Description
This solution proposes 5GS monitoring capabilities to support AI/ML-based
services as well as AI/ML operations (i.e. model splitting, model sharing, and
distributed/federated learning, as described in TS 22.261 [2]) over the 5GS.
The solution i) leverages aspects of the QoS monitoring capabilities for URLLC
services relevant to AI/ML-based services, and ii) proposes additional
monitoring features.
It is proposed that the AF hosting the AI/ML application server monitors
packet delay related to the application AI/ML operation via NEF by making use
of the 5GS network exposure feature described in clause 4.15.6.6 of TS 23.502
[4] where QoS monitoring capabilities can be requested by the AF for URLLC
services via a procedure for an AF session with specific QoS parameters. The
procedure involves PCF, which updates the SM policy and notifies SMF, which in
turn requests a modification of the N4 session to collect reporting events
from UPF. In addition, the solution proposes to extend the event exposure of
NEF to provide support for monitoring of traffic volume and session inactivity
time. Finally, the solution proposes NWDAF analytics potentially relevant to
the application AI/ML operation to be collected by the AF.
Below follows the list and description of the specific capabilities and
features enabling monitoring of relevant AI/ML-based services and operations
that are proposed as part of this solution:
\- AF monitoring of UL, DL or round trip packet delay measurement: the three
application AI/ML operations defined in TS 22.261 [2] (model split, model
distribution, FL) may benefit from AF packet delay monitoring as the AI/ML
application server may schedule training operation at UEs according to
application needs, and delay measurements can assist the server in determining
what the best strategy for such scheduling is. For example, delay measurements
of the UE members of a FL group may assist the application server decide which
UEs need to provide model updates in each iteration. Delay information is also
critical for model split during joint inference, when sharing of inference
results may be critical for the application performance. Current
specifications already detail how the AF monitors this parameter for URLLC
services.
\- AF monitoring of traffic/data volume: AF knowledge on the traffic volume
helps the application server decide on the AI/ML operations that would be
suitable for the application. For example, it may not be convenient to share
or distribute very large models frequently, but smaller size models could be
shared frequently. Similarly, there are important implications for model
splitting depending on the traffic volume that needs to be exchanged between
UE and application server, and the application server may need to monitor
information on traffic/data volume to decide models\' optimal splitting
points.
\- AF monitoring of session inactivity time: when a training operation is to
be scheduled by an AI/ML application server either for a single UE or a group
of UEs engaged in FL, awareness of session inactivity time as reported by UPF
to SMF turns out to be very helpful as it aids the server to determine when a
UE or a group of UEs is sharing specific types of AI/ML traffic such as
trained models. In particular, the dynamicity of FL groups greatly benefits
from this parameter as UE\'s may dynamically join or leave the group in a pre-
scheduled way (therefore optimizing performance) with assistance of this
parameter. In current specifications UPF is already capable of monitoring this
parameter and reporting it to SMF, so this solution enables the AF to trigger
the monitoring procedure and SMF to deliver the report to AF via NEF.
NOTE: If the application has monitoring capabilities to accurately determine
traffic volume and session inactivity, then it may not require 5GS monitoring
capabilities for traffic/data volume and session inactivity time.
\- AF subscription to NWDAF analytics (DN performance, UE communication, QoS
sustainability) , which may assist the AI/ML application operation and is
already supported. Current specifications already detail how the AF subscribes
to these analytics.
### 6.1.2 Procedures
#### 6.1.2.1 Procedure for QoS monitoring
Figure 6.1.2.1-1: Procedure for QoS monitoring capabilities for AI/ML-based
services
The procedure in Figure 6.1.2.1-1 combines the procedures in clauses 4.15.6.6,
4.16.5 and 4.4.2.2 of TS 23.502 [4]. The required updates needed are described
in the step-by-step description below.
1\. AF subscribes to NWDAF analytics relevant to the performance of the UE(s)
using the AI/ML application (e.g. DN performance, UE communication, QoS
sustainability).
2\. The AF uses the Nnef_AFsessionWithQoS service to indicate a subscription
to notifications of QoS monitoring for delay measurements of UE traffic
related to AI/ML-based services. Hence, the AF request may indicate packet
delay measurement parameter (UL, DL, or round trip) as described in clause
5.33.3 of TS 23.501 [3] and 5.2.6.9 of TS 23.502 [4] for the case of URLLC
services. Other requested monitored resources may include usage report and
inactivity timer.
2b-3. Steps 2b and 3 are performed according to Figure 4.15.6.6-1 in TS 23.502
[4] when NEF determines to contact PCF directly. The NEF interacts with the
PCF by triggering a Npcf_PolicyAuthorization_Create request for session
management policy control to authorize the AF request and optionally subscribe
to PCF events for measurement of packet delay.
4\. Step 4 is performed instead of steps 1-3 when the AF is trusted by the
operator to interact directly with PCF to request monitoring capabilities for
an AF session related to AI/ML-based services.
5-6. If the PCF determines that the SMF needs updated policy information (as
is the case for the proposed monitoring parameters in this solution), the PCF
issues a Npcf_SMPolicyControl_UpdateNotify request with updated policy
information as described in the PCF initiated SM Policy Association
Modification procedure in clause 4.16.5.2 of TS 23.502 [4]. The SMF then
acknowledges the PCF request with a Npcf_SMPolicyControl_UpdateNotify
response.
7-9. The PCF determines whether the request is authorized and notifies the AF
if the request is not authorized via NEF or directly by issuing a
Npcf_PolicyAuthorization_Create response message.
10-11. The NEF or AF may send a Npcf_PolicyAuthorization_Subscribe message to
the PCF to subscribe to the notification of PCF events for measurement of
packet delay measurement if not done so previously in step 3.
12-15. After receiving the event subscription notification from PCF, the SMF
issues an N4 Session Modification Request as described in clause 4.4.1.3 of TS
23.502 [4] configuring the triggers for event reporting in UPF. The reporting
triggers configured by SMF may entail session reports for packet delay
measurement. The UPF may report on these events according to clause 4.4.2.2 of
TS 23.502 [4].
16-17. Steps 16-17 are performed according to clause 4.16.5.1 of TS 23.502
[4], with the SMF providing the event condition(s) that have been met to PCF.
18-20. Steps 18-19 are performed as steps 7-8 in Figure 4.15.6.6-1 of TS
23.502 [4] with the event information reported by PCF to AF via NEF in case of
untrusted AF. Step 20 is performed instead when the AF is trusted by the
operator.
21\. The AF analyses the monitored information exposed by the 5GS related to
the AI/ML traffic.
22\. If needed, the AF may trigger a modification of the PDU Session after
having analysed the monitored data (see also clause 4.15.6.6a of TS 23.502
[4], without the need for TSCTSF involvement).
NOTE: Any security and privacy aspects of the network and UE information
exposure need to be studied by SA WG3.
#### 6.1.2.2 Procedure for monitoring of session inactivity time and traffic
volume events
Figure 6.1.2.2-1: Procedure for session inactivity time and traffic volume
monitoring capabilities for AI/ML-based services
1\. The AF uses the Nnef_EventExposure_Subscribe service operation to indicate
a subscription to new NEF monitoring events for traffic volume and/or session
inactivity time.
2\. The NEF subscribes to the user plane status information SMF event
described in clause 5.2.8.3.1 of TS 23.502 [4], providing the (AI/ML)
application ID and the SUPI(s) of the UE(s) being monitored as event filters
as described in Table 5.2.8.3.1-1 of TS 23.502 [4].
3-4. After receiving the event subscription notification from NEF, the SMF
issues an N4 Session Modification Request as described in clause 4.4.1.3 of TS
23.502 [4] configuring the trigger for event reporting in UPF of PDU session
inactivity.
5\. The NEF may subscribe to event exposure directly from UPF to obtain
information on data usage of a PDU session.
NOTE 1: Whether and how an event ID is used by AF/NEF for retrieval of data
usage information from UPF depends on FS_UPEAS and will be determined when
FS_UPEAS reaches conclusions.
NOTE 2: The procedure in Figure 6.1.2.2-1 does not involve NWDAF.
6\. A trigger happens to report events on session inactivity and/or traffic
usage by UPF.
7\. When a PDU session inactivity event is detected, UPF reports it to SMF
according to clause 4.4.2.2 of TS 23.502 [4].
8\. SMF reports the detection of a user plane status information event to NEF
with information on session inactivity time.
9\. UPF reports to the NEF the detection of the event in step 5 with
information on data usage of a PDU session.
10\. NEF reports the monitored session inactivity time and/or traffic volume
to AF via Nnef_EventExposure_Notify service operation.
11\. The AF analyses the monitored information exposed by the 5GS related to
the AI/ML traffic.
12\. If needed, the AF may trigger a modification of the PDU Session after
having analysed the monitored data.
### 6.1.3 Impacts on services, entities and interfaces
AF:
\- Request monitoring of parameters described in clause 6.1.1 related to
AI/ML-related traffic via Nnef_AFsessionWithQoS for QoS monitoring and
Nnef_EventExposure_Subscribe for traffic usage and session inactivity time.
NEF:
\- Support the request for monitoring of parameters described in clause 6.1.1
related to AI/ML-related traffic.
\- New monitoring events required for traffic usage and session inactivity
time.
SMF/UPF:
\- Provide the monitored parameters described in clause 6.1.1 related to
AI/ML-related traffic.
## 6.2 Solution #2: User Plane solution for 5GC information exposure to UE
### 6.2.1 Description
This solution is addressing KI#2: 5GC information exposure to UE.
As documented in TS 22.261 [2], the AI/ML operation may be split between UE
application client and AF. The UE application client performs local AI/ML
operation for the privacy-sensitive and delay sensitive part and sends the
intermediate data to the AF. The AF executes the remaining parts and feeds the
inference results back to the device. This AI/ML operation requires reliable
and low latency data transmission for the AI/ML traffic. Moreover, 5G system
should be able to expose the predicted changes of network condition (i.e.
bitrate, latency, reliability) per UE to an authorized third party as
specified in the TS 22.261 [2]. Currently, the network condition related
information, like the Network Slice load predictions information, NF load
analytics and Network performance analytics are already supported in TS 23.288
[6]. If the 5GS can expose these analytics output to the UE application
client, it is beneficial by the UE client to decide the AI/ML operation
splitting, e.g. the UE application client may decide to perform the AI/ML
operation when the Network Slice load is not high, the gNB status and resource
usage that indicated in Network performance analytics output is in good
condition.
The requirement that 5G system shall be able to provide event alerting to an
authorized 3rd party, together with a predicted time of the event (e.g.
alerting about traffic congestion or UE moving into/out of a different
geographical area) was also captured in TS 22.261 [2]. The User Data
Congestion Analytics supported by NWDAF can be used to address such
requirement. When the UE received the alerting about the traffic congestion,
the UE can decide to transmit priority portion of AI data before the traffic
congestion happens.
Regarding the Distributed / Federated Learning between UE application Client
and the AF, within each training iteration, UE downloads the model from AI
server and reports the interim training results to the AI server. The Server
aggregates the interim training results from all the selected FL UEs and
updates the global model. The updated global model is then distributed back to
all the UEs. The above FL procedure may last for a long time with a huge data
transmission with 5GS, in order to reduce the impacts to the non-FL traffic it
is also beneficial to expose the NW load related prediction to FL UEs and AI
server. The FL UEs and AI server can use this information to select a proper
time for the FL related data transmission, e.g. the UE may decide to accept
the FL learning operation when the QoS Sustainability Analytics predict the
QoS will not change during a time period and the gNB status and resource usage
that indicated in Network performance analytics output is also good enough.
Editor\'s note: Whether and how the UE or UE Application client can use 5GC
information for AI/ML operations is FFS and needs to be describe with valid
justification before solution can be adopted, considering also that the same
information will be used by the AI/ML application server as well.
Since Rel-17, the DCAF functionality which is part of the AF was introduced to
enable the NWDAF to perform data collection from the Application. Given the
communication path between NWDAF and the DCAF has been introduced for data
collection, it is reasonable to extend the existing DCAF/AF functionality and
architecture as defined in TS 26.531 [7] to expose network data analytics
related to the UE to assist the UE\'s local Application AI/ML operation.
The advantage of sending the analytics results to the UE via DCAF is that DCAF
can act as a centralized node to manage analytics requests from multiple UEs
that are served by the same AF. A DCAF can store the analytics results
provided by the NWDAF. When a new UE or a new application request from the UE
requests the same analytics, the DCAF can provide the analytics results to the
UE directly as long as the network consent is also granted to the application
in the UE and in the AF.
For the UE communicate with DCAF, both the direct way (from the UE Application
to the DCAF, either in trusted domain or untrusted domain) and indirect way
(from the UE Application to the Application server and from the Application
server to the DCAF) can be used. The direct way and indirect way are the same
as far as the data collection procedure described in TS 26.531 [7].
The following assumptions are made by this solution:
\- The UE Application Client can Subscribe/Request to NWDAF via DCAF to
request the information from 5GC (e.g. the Analytics result from the NWDAF).
\- The communication services and functional architecture between UE
Application Client and DCAF is in the scope of SA WG4 and shall be compatible
with the existing architecture.
\- Network consent is required for the UE to access UE-related network
information.
\- There could be more than one DCAF to support the given application at
different service areas.
Editor\'s note: It is further to be determined whether more than one DCAF is
required for a given Application AI/ML application similar to the Edge
Computing scenario.
The network consent means the network can authorize the UE\'s request and
check if the UE is allowed to obtain the network information. In more detail,
not all the network information are suitable to be exposed to the UE, e.g.
some network analytics result like NF load analytics. The network may want to
prevent the UE to request the information which is not related to the UE
itself. Therefore, network consent should be required when exposing network
information to the UE. The granularity of the network consent can be per UE:
\- per UE: whether the UE is authorized to obtain some specific Analytics ID
or specific analytics subset of the Analytics ID from network.
The network consent is part of the UE subscription data stored in the UDM. If
the DCAF is in trusted domain, when the DCAF receive the request from the UE,
the DCAF will send the request to NWDAF including the UE ID, and NWDAF will
communicate with UDM to check the network consent based on the UE ID. If the
DCAF is in untrusted domain, the DCAF will send the request to the NEF, and
NEF will check with UDM about the network consent based on the UE ID.
Editor\'s note: Whether and how the network consent for the analytics exposure
to the UE is verified (inclause the level of granularity other than UE
granularity) is subject to the definition of key usages for 5GC information
for AI/ML operation on the UE in addition to coordination with SA WG3.
### 6.2.2 Procedures
#### 6.2.2.1 General
A user plane data collection from UE application client was approved in clause
6.2.8 of TS 23.288 [6] in Rel-17. A UE Application is configured the address
of DCAF by the Application server. The UE Application client establishes a
connection to the DCAF over user plane via a PDU session. The DCAF
communicates with the UE Application Client and collects data from UE
Application to NWDAF.
The same user plane connection between UE application and DCAF is used by the
UE Application Client to request data exposure from NWDAF.
Based on the justification above, the following information can be exposed to
the UE via the support of the DCAF based on network consent acquired by UE:
\- QoS Sustainability Analytics.
\- Network Slice load predictions information.
\- NF load analytics.
\- User Data Congestion Analytics.
\- Network Performance Analytics.
Editor\'s note: How to extend the interaction between UE and DCAF as defined
in TS 26.531 [7] to enable UE to subscribe/request information to/from 5GC NF
(e.g. NWDAF) via DCAF is in SA WG4 scope.
The SLA between the operator and the Application Service Provider further
include the Supported Analytics ID list.
The Supported Analytics ID indicates the Analytics outputs that allowed by the
operator to expose to the UE application Client and AF. The Supported
Analytics ID list will be stored in DCAF.
The Application Service Provider will provision the Supported Analytics IDs to
UE when UE performs application layer registration.
#### 6.2.2.2 UE ID retrieval
##### 6.2.2.2.1 IEAF based solution
Based on the justification in clause 6.2.1, the following information may be
requested by UE application Client from 5GC to assist the Application layer
AIML operation:
\- QoS Sustainability Analytics.
\- User Data Congestion Analytics.
Editor\'s note: Whether and how the UE can use 5GC information (e.g. as above)
for AI/ML operations is FFS and needs to be described with valid justification
before solution can be adopted, considering also that the same information
will be used by the AI/ML application server as well.
NOTE x: Support for analytics IDs that only support any UE as the target of
analytics reporting is subject to SA WG3 evaluation on how to address security
and privacy concerns when sharing analytics generated from other UEs to an
individual UE.
The UE Data Exposure Client (DEC) is responsible for sending data request to
the Data Information AF (IEAF) to collect data from NWDAF as an input for
application layer AIML operation. The IEAF is always in the MNO domain and the
DEC is based on 3GPP defined procedures and security and therefore is also
under the control of MNO. The data collection request from UE application may
trigger the IEAF to collect data from NWDAF. Figure 6.2.2.2.1-1 shows the
deployment of IEAF.
NOTE 1: Both IEAF and DEC are controlled and managed by the MNO e.g. with 3GPP
defined procedures.
Figure 6.2.2.2.1-1: IEAF deployment
The DEC communicates to the IEAF over user plane via a PDU session established
by the UE.
NOTE 2: The DEC is deployed per application in this Release.
The SLA between the operator and the AIML Application Service Provider
determines per Application ID in use by the ASP:
\- The Analytics ID(s) that the 5GC is allowed to expose , subject to user
consent and network consent.
\- The S-NSSAI for the AIML Application Service Provider.
\- The authentication information that enable the IEAF to verify the
authenticity of the DEC that collects data.
NOTE 3: The mutual authentication info that is used by the DEC and the IEAF is
out of SA WG2 scope.
The IEAF is configured based on the SLA above for each AIML application. NWDAF
follows existing service user consent checks as specified in TS 23.288 [6] and
network consent checks for the IEAF (as a NWDAF service consumer).
The IEAF may be also configured by the operator to do some data processing
before sending the exposure data to DEC.
The following information are pre-configured in the UE by MNO or provisioned
(via PCF) to the UE as part of AIML policy by using the procedure as defined
in clause 4.2.4.3 in TS 23.502 [4] and used in the communication with IEAF:
\- The address of the IEAF to contact.
Based on the AIML policy and the URSP rules, the UE establishes a PDU session
using the RSD from the matched rule and it connects to the relevant IEAF as
per details of this solution described below.
The following information are provisioned by IEAF to DEC once the UP
connection is securely established.
\- The Analytics ID(s) that is authorized to collect from 5GC subject to user
consent and network consent.
\- The authentication information to enable the DEC to verify the authenticity
of the IEAF that provides data.
NOTE 4: The authentication and authorization info that is used by the DEC and
the IEAF is out of SA WG2 scope.
NOTE 5: Any configuration procedure from the ASP to the UE\'s Application is
out of SA WG2 scope.
NOTE 6: The authentication and security aspects of data leakage and protection
in the UE and UE application client and DEC will be studied in SA WG3.
NOTE 7: No assumption is taken on where and how DEC is deployed in this
Release.
In either case, UE (at NAS) establishes the PDU session securely based on the
existing 3GPP procedures and DEC only communicates over this UP connection
with IEAF.
The communication between UE Application client and AIML ASP is out of 3GPP
scope. Also, communication between UE application client and DEC is out of
this study scope.
UE establishes a user plane connection to the IEAF based on the relevant
configuration information received from MNO. The UE Application Client sends
request to DEC, DEC communicates with the IEAF over the A1 interface.
NOTE 8: How to realise A1 interface between IEAF and DEC is to be determined
in coordination with SA WG3 and CT WGs.
The UE requested data exposure is described in Figure 6.2.2.2.1-2.
Figure 6.2.2.2.1-2: UE requested data exposure procedure
0\. The MNO configures IEAF for data exposure to the UE taking into account
the SLA. Accordingly, MNO pre-configures or provisions the UE with AIML
policy.
1\. UE Application triggers the DEC to send the Analytics Request to IEAF. DEC
triggers the UE to establish the PDU session to IEAF. IEAF provisions DEC with
other configuration parameters (e.g. the authorized analytics IDs) once the UP
connection is securely established. Subsequently, DEC initiates the analytics
request.
2\. IEAF determines the S-NSSAI for the AIML Application Service Provider
according to the Application ID based on the configuration by MNO.
IEAF also determines if the requested Analytics ID is allowed or not based on
the SLA and the configuration by MNO. If the requested Analytics ID from DEC
is not allowed, IEAF may update the authorized analytics IDs on DEC.
IEAF discovers the NWDAF that supports the Analytics ID received in step 1 and
the S-NSSAI for the Application ID from NRF.
3\. NRF sends the Nnrf_NFDiscovery_response with the discovered NWDAF
identity.
IEAF may discover the NWDAF from UDM, in this case, step 2 and step 3 are not
performed, IEAF make a query to UDM as described in clause 5.2 in TS 23.288
[6].
4\. IEAF subscribes to NWDAF for the analytics request with Analytics ID(s),
S-NSSAI and UE ID and other input parameters for analytics request as
described in clause 6.1.3 of TS 23.288 [6].
5\. NWDAF performs user consent check and operator consent check.
NOTE: The user consent and operator consent check for application layer AI/ML
is a general issue for all the KIs, the details of the user consent check and
operator consent check procedure should align with the conclusion and
described during normative work.
6\. If NWDAF does not have available analytics result for the requested
analytics ID, the NWDAF will trigger the analytics procedures for the
analytics ID(s).
Analytics procedure is performed as described in TS 23.288 [6].
7\. NWDAF sends analytics result to IEAF.
8\. IEAF sends the exposed data to DEC over A1 and DEC forwards the data to UE
Application Client over API. IEAF may do some data processing for the received
analytics result from NWDAF based on MNO\'s configuration and IEAF sends the
exposed data after the data processing to the DEC.
NOTE 9: The security aspects of exposure of network in steps 7 and 8 must be
evaluated by SA WG3.
If a Subscribe/Notify service operation is invoked in step 4, the NWDAF may
further notify the analytics to UE e.g. periodically). Step 7 and step 8 may
be performed periodically.
##### 6.2.2.2.2 NEF/NWDAF based solution
In current solution 2, when DCAF subscribes to/requests the NWDAF for
analytics on behalf of the UE, since the DCAF only knows the UE IP address
from the source IP address of the received packet, then the DCAF needs to
retrieve UE Identity based on UE IP address in step 4 referring to clause
4.15.10 of TS 23.502 [4].
However, this UE ID retrieving operation by DCAF is not very efficient. For
when we reuse the procedure like following extracted from the clause 4.15.10
of TS 23.502 [4], upon UE ID request from the AF, the NEF retrieves the SUPI
for the UE from the BSF, and then the NEF translates SUPI to AF specific UE ID
(GPSI or other forms) with the help of UDM.
Even if a GPSI (not other form of AF specific UE ID) is provided by the NEF to
the AF without considering security issues, then in this solution, when the AF
on behalf of UE requests analytics from network, it will provide the GPSI to
the NEF, then the NEF needs to map the GPSI to the SUPI inversely and provides
the SUPI to the NWDAF.
There are some redundant mapping operations during the above UE ID retrieving
procedure, it actually can be avoided by some enhancements, for example, the
UE ID retrieving can be performed instead by the NEF or by the NWDAF when
receiving analytics request meanwhile.
Figure 6.2.2.2.2-1: UE requested data exposure procedure
1\. UE sends the Analytics Request to DCAF via an application layer
signalling. The DCAF address is provided by application server to UE
application client and UE establishes the PDU session to DCAF are described in
clause 6.2.8 of TS 23.288 [6]. The requested Analytics ID(s) are included in
the application layer request message to DCAF. UE may also provide the S-NSSAI
to DCAF.
Editor\'s note: If the UE application client can always provide S-NSSAI and
which S-NSSAI that UE application client is provided is FFS.
DCAF can retrieve the UE IP address from the source IP address of the received
packet.
Since the supported pairs of S-NSSAI+DNN for the PDU session established for
UE to DCAF are configured in the DCAF, DCAF may also retrieve the S-NSSAI+DNN
for the PDU sessions that used by the UE sent the Analytics request.
2\. DCAF sends Nnrf_NFdiscovery_request to NRF to discover the NWDAF that
supports the UE requested Analytics ID(s). DCAF may also provide the S-NSSAI
for NWDAF selection.
Editor\'s note: For DCAF in untrusted domain, if UE does not provide S-NSSAI
in step 1, how to discover the NWDAF that serves the specific S-NSSAI is FFS.
3\. NRF sends the Nnrf_NFdiscovery_response with the discovered NWDAF
identity.
DCAF subscribes to NWDAF for the analytics request with UE IP address and
Analytics ID(s). Step 4 is for DCAF in trusted domain and step 5 is for DCAF
in untrusted domain.
4\. If DCAF is in trusted domain, DCAF subscribes to NWDAF for the analytics
by invoking Nnwdaf_AnalyticsSubscription_Subscribe with UE IP address and
Analytics ID(s). Then the NWDAF retrieves UE Identity (i.e. SUPI) by using the
Nbsf_Management_Discovery service operation with UE IP address and /or DNN
and/or S-NSSAI.
5\. If DCAF is in untrusted domain, DCAF subscribes to NEF for the analytics
by invoking Nnef_AnalyticsExposure_Subscribe with UE IP address and Analytics
ID(s). The NEF retrieves UE Identity (i.e. SUPI) by using the
Nbsf_Management_Discovery service operation with UE IP address. Then the NEF
subscribes to NWDAF on behalf of the DCAF for the analytics by invoking
Nnwdaf_AnalyticsSubscription_Subscribe with UE Identity (i.e. SUPI) and
Analytics ID(s).
Before step 5, the DCAF asks the NEF for authorization information to check if
the UE is allowed to obtain analytics ID from the network. The NEF determines
the authorization information for the UE based on local policy and the UE
subscription data from the UDM about whether the UE has subscribed to the
service that obtaining some specific analytics ID from network. Then the NEF
sends the authorization information to the AF.
6\. If NWDAF does not have available analytics result for the requested
analytics ID, the NWDAF will trigger the analytics procedures for the
analytics ID(s). NWDAF performs user consent check to UDM to determine if the
analytics procedure is allowed or not.
7\. Analytics procedure is performed as described in TS 23.288 [6].
8\. NWDAF sends analytics result to DCAF. Step 8a is for DCAF in trusted
domain and step 8b is for DCAF in untrusted domain.
NOTE: The security aspects of exposure of network data must be evaluated by SA
WG3.
9\. DCAF sends the analytics result to UE application client via application
layer signalling.
10-11. If a Subscribe/Notify service operation is invoked in step 5, the NWDAF
may further notify the analytics to UE e.g. periodically). NWDAF notifies the
analytics result to DCAF. Step 11a is for DCAF in trusted domain and step 11b
is for DCAF in untrusted domain.
12\. DCAF exposes the requested analytics to UE.
#### 6.2.2.3 Network consent and Multiple IEAF
Figure 6.2.2.3-1: UE requested data exposure procedure
1\. UE sends the Analytics Request to IEAFvia an application layer signalling
as defined in clause 6.2.2.2.1.
2\. IEAFsends Nnrf_NFDiscovery _request to NRF to discover the NWDAF that
supports the UE requested Analytics ID(s). IEAF-1 may also provide the S-NSSAI
for NWDAF selection.
3\. NRF sends the Nnrf_NFDiscovery_response with the discovered NWDAF
identity.
4\. The UE ID retrieval procedure is captured in clause 6.2.2.2.
5\. IEAF-1 informs the NRF of its profile including the UE ID by invoking the
Nnrf_NFManagement_NFRegister or Nnrf_NFManagement_NFUpdate service.
6\. DCAF-1 subscribes to NWDAF for the analytics request with UE Identity, app
ID, Analytics ID(s) and an optional list of analytics subsets that are
requested. Step 6a/6b is for IEAF-1 in trusted domain.
When performing step 6a, the IEAF asks the NWDAF to check if the UE is allowed
to obtain analytics ID from the network. The NWDAF determines the
authorization information for the UE based on the indication or local policy
and the network consent as a UE subscription data from the UDM about whether
the UE has subscribed to the service that obtaining some specific analytics ID
or specific analytics subset of the Analytics ID from network. NWDAF will
invoke the _Nudm_SDM_Subscribe_ to communicate with UDM to verify the network
consent based on the UE ID.
When performing step 6b, the IEAF itself check if the UE is allowed to obtain
analytics ID by subscribing directly to the UDM. The IEAF determines the
authorization information for the UE based on local policy and the network
consent as a UE subscription data from the UDM about whether the UE has
subscribed to the service that obtaining some specific analytics ID or
specific analytics subset of the Analytics ID from network. AF will invoke the
_Nudm_SDM_Subscribe_ to communicate with UDM to verify the network consent
based on the UE ID. Then the IEAF subscribes to the authorized Analytics ID
from the NWDAF.
The IEAF-1 can store the analytics results provided by the NWDAF, if a new UE
or a new application request from the UE wants to request the same analytics,
the IEAF-1 will ask NWDAF or directly ask the UDM for authorization
information to check if the UE is allowed to obtain analytics ID from the
network. Then the IEAF-1 will provide the analytics results to the UE
directly.
Editor\'s note: Is FFS for which common network function to be responsible for
handing the network consent verification.
Editor\'s note: SA WG3 coordination is required for authorization.
7\. If NWDAF does not have available analytics result for the requested
analytics ID, the NWDAF will trigger the analytics procedures for the
analytics ID(s). NWDAF performs user consent check to UDM to determine if the
analytics procedure is allowed or not.
8\. Analytics procedure is performed as described in TS 23.288 [6].
9\. NWDAF sends analytics result to IEAF. Step 9a/9b is for IEAF in trusted
domain.
NOTE: The security aspects of exposure of network data must be evaluated by
SA3.
10\. IEAF sends the analytics result to UE application client via application
layer signalling.
The UE may move into a different service area supported by a different IEAF-2.
During the mobility, the IEAF-1 can transfer the UE context to IEAF-2 via an
application layer signalling in order to resume service with NWDAF.
11\. After the UE context is received via an application layer signalling,
IEAF-2 updates its profile by invoking the Nnrf_NFManagement_NFUpdate service.
12\. If a Subscribe/Notify service operation is invoked in step 6, the NWDAF
may further notify the analytics to UE e.g. periodically).
13\. NWDAF sends Nnrf_NFDiscovery _request to NRF to discover the IEAF-2 that
is serving the UE currently.
14\. NRF sends the Nnrf_NFDiscovery_response with the discovered identity of
IEAF-2.
15\. NWDAF exposes the requested analytics to UE via IEAF-2.
#### 6.2.2.4 Using DCCF to deliver analytics for UEs
Figure 6.2.2.4-1: UE requested data exposure procedure
1\. UE sends the Analytics Request to DCAF via an application layer
signalling. The DCAF address is provided by application server to UE
application client and UE establishes the PDU session to DCAF are described in
clause 6.2.8 of TS 23.288 [6]. The requested Analytics ID(s) are included in
the application layer request message to DCAF. UE may also provide the S-NSSAI
to DCAF.
DCAF can retrieve the UE IP address from the source IP address of the received
packet.
Since the supported pairs of S-NSSAI+DNN for the PDU session established for
UE to DCAF are configured in the DCAF, DCAF may also retrieve the S-NSSAI+DNN
for the PDU sessions that used by the UE sent the Analytics request.
2\. DCAF sends Nnrf_NFDiscovery _request to NRF to discover the DCCF that
supports the UE requested Analytics ID(s). DCAF may also provide the S-NSSAI
for NWDAF selection.
3\. NRF sends the Nnrf_NFDiscovery_response with the discovered NWDAF
identity.
4\. The UE ID retrieval procedure is captured in clause 6.2.2.2.
Editor\'s note: Whether and how to improve the efficiency for UE Identity
retrieving procedure is FFS.
5\. DCAF subscribes to DCCF for the analytics request with UE Identity and
Analytics ID(s). Step 5a is for DCAF in trusted domain and step 5b is for DCAF
in untrusted domain.
Before step 5b, the AF asks the NEF for authorization information to check if
the UE is allowed to obtain analytics ID from the network. The NEF determines
the authorization information for the UE based on local policy and the UE
subscription data from the UDM about whether the UE has subscribed to the
service that obtaining some specific analytics ID from network. Then the NEF
sends the authorization information to the AF.
NOTE 1: Step 5b can be achieved by Nnef_AnalyticsExposure_Subscribe, if
Nnef_AnalyticsExposure_Subscribe extends to cover
Ndccf_DataManagement_Subscribe service.
6\. If DCCF does not have available analytics result for the requested
analytics ID, the DCCF will trigger the analytics procedures for the analytics
ID(s). DCCF performs user consent check to UDM to determine if the analytics
procedure is allowed or not.
7\. Analytics procedure is performed as described in clause 6.1.4.2 of TS
23.288 [6].
8\. DCCF sends analytics result to DCAF. Step 8a is for DCAF in trusted domain
and step 8b is for DCAF in untrusted domain.
NOTE 2: The security aspects of exposure of network data must be evaluated by
SA WG3.
9\. DCAF sends the analytics result to UE application client via application
layer signalling.
10-11. If a Subscribe/Notify service operation is invoked in step 5, the DCCF
may further notify the analytics to UE, e.g. periodically). DCCF notifies the
analytics result to DCAF. Step 11a is for DCAF in trusted domain and step 11b
is for DCAF in untrusted domain.
12\. DCAF exposes the requested analytics to UE.
### 6.2.3 Impacts on services, entities and interfaces
DCAF:
\- receives analytics request from UE via application layer signalling.
\- discovers NWDAF or DCCF for the received analytics request from UE.
\- stores the UE IP address and UE ID mapping information.
\- sends analytics request to NWDAF or DCCF.
\- receives analytics response from NWDAF or DCCF.
\- sends the received analytics result to UE via application layer signalling.
\- checks with NEF about authorization information for the UE if it is allowed
to obtain analytics ID from the network.
NEF:
\- Checks about authorization information for the UE based on local policy,
the UE subscription data about whether the UE has subscribed to the service
that obtaining some specific analytics ID from network.
\- Exposes DCCF services to DCAF.
\- For DCAF based UE ID retrieval solution, requests UE ID and the
corresponding S-NSSAI / DNN for the UE IP address that received from DCAF in
untrusted domain.
\- For DCAF based UE ID retrieval solution, exposes new event NWDAF ID for UE
via Nnef_EventExposure_Notify, which is triggered by
Nnef_EventExposure_Subscibe with input UE IP address.
\- For NEF/NWDAF based UE ID retrieval solution, enhances
Nnef_AnalyticsExposure_Subscribe service to support UE IP address acts as
Target of Analytic Reporting.
NWDAF:
\- Checks about authorization information for the UE based on local policy,
the network consent as a UE subscription data about whether the UE has
subscribed to the service that obtaining some specific analytics ID from
network.
\- NWDAF discovers the DCAF that is currently serving the target UE before the
notification.
\- For NEF/NWDAF based UE ID retrieval solution, retrieves UE Identity (i.e.
SUPI) by using the Nbsf_Management_Discovery service operation with UE IP
address and /or DNN and/or S-NSSAI.
UDM:
\- Send the network consent to NEF/NWDAF.
NRF:
\- Maintain the mapping between the UE ID and its serving DCAF.
Editor\'s note: Whether this can be achieved via UDR instead of NRF is FFS.
UE:
\- How to extend the interaction between UE and DCAF will be defined in SA
WG4.
## 6.3 Solution #3: 5GC information exposure to UE by SMF
### 6.3.1 Description
This is a solution for key issue #2 \"5GC information exposure to UE\".
The AF can obtain various data analytics provided by NWDAF as specified in TS
23.288 [6]. When requesting or subscribing to NWDAF analytics, the AF needs to
provide Target of Analytics Reporting and Analytics Filter Information
required for Analytics ID that the AF requests or subscribes to. For example,
for QoS Sustainability analytics, the Target of Analytics Reporting is set to
any UE. For the Analytics Filter Information, QoS requirements and Location
information need to be provided as mandatory. The Location information could
reflect a list of waypoints for UE(s) that the AF can collect from the UE(s),
e.g. via application layer messages.
For operating AI/ML based services/applications, there may be the case that
the AF (i.e. AI/ML Application Server) does not know or has not yet decided
which UEs will be involved. For example, the case may exist that the AI/ML
Application Server has not decided candidate UEs for FL Operation that it
plans to perform. In this case, it might be difficult for the AI/ML
Application Server to decide the input parameters such as Target of Analytics
Reporting and Analytics Filter Information related to UEs, required to request
or subscribe to NWDAF analytics.
On the other hand, the UE may decide whether it is interested in operating
AI/ML based services/applications or it intends to participate in the AI/ML
related operation, e.g. FL Operation, AI/ML model/data distribution. In this
case, if the UE can obtain analytics information from 5GC, it would be useful
for the UE to decide whether it can perform the AI/ML related operation or
when downloading large AI/ML models is appropriate, or for the AI/ML
Application Server to manage the AI/ML related operation, e.g. FL member
selection by acquiring the analytics related information/report from the UE.
The AI/ML models may need to be changed if the environmental conditions are
not stable (light distribution in the scene, background noise, time of the
day, number and type of objects in the view-field, etc.). New AI/ML models may
need to be downloaded as environmental conditions change or when new AI/ML
models become available. If the application/UE knows that there is a potential
QoS change in the DL data rate in the future, it can decide to pre-fetch in-
advance a higher number of AI/ML models to be used for different sets of
environmental conditions, or to choose more general AI/ML models that can work
under different sets of environmental conditions.
Editor\'s note: Pros and cons of UE providing analytics related
information/report to the AI/ML application server after it received the
analytics information from 5GC compared to the AI/ML application server
getting these network data analytics directly from 5GC needs to be evaluated.
If the 5GC can expose analytics information to the UE, it would be beneficial
for operating AI/ML based services/applications, for example:
\- If the UE is provided from the 5GC regarding the QoS Sustainability
analytics information that RAN UE Throughput threshold or QoS Flow
Retainability threshold cannot be met, the UE\'s application layer can perform
the following based on the information provided by the UE\'s NAS layer:
\- UE\'s application layer decides not to participate in FL Operation; or
\- UE\'s application layer reports to the AI/ML Application Server that RAN UE
Throughput threshold or QoS Flow Retainability threshold cannot be met, or
network condition is not good. Based on the report from the UE, the AI/ML
Application Server can decide not to select this UE for FL Operation.
\- If the UE is provided from the 5GC regarding the User Data Congestion
analytics information that the Congestion Level indicates \'congested\', the
UE\'s application layer can perform the following based on the information
provided by the UE\'s NAS layer:
\- UE\'s application layer decides not to participate in FL Operation; or
\- UE\'s application layer reports to the AI/ML Application Server that
network is congested or network condition is not good. Based on the report
from the UE, the AI/ML Application Server can decide not to select this UE for
FL Operation.
\- If the UE is provided from the 5GC regarding the QoS Sustainability
analytics and the User Data Congestion analytics information that RAN UE
Throughput threshold or QoS Flow Retainability threshold can be met and the
Congestion Level indicates \'not congested\', the UE\'s application layer can
perform the following based on the information provided by the UE\'s NAS
layer:
\- UE\'s application layer decides to download new AI/ML models to be used for
AI/ML model/data distribution such as real time media editing.
The outline of the proposed solution for 5GC information exposure to UE by SMF
is as below:
\- The SMF serving the PDU Session for AI/ML based services/applications
provides analytics information obtained from the NWDAF to the UE.
\- The UE can enable analytics information exposure to UE during PDU Session
Establishment procedure and PDU Session Modification procedure. The UE is
capable of requesting to the network for analytics information exposure and
obtaining analytics information from the network.
\- The UE can disable analytics information exposure to UE during PDU Session
Modification procedure so that the SMF stops the analytics information
exposure to the UE.
\- The enabled analytics information exposure to UE can be also disabled when
the PDU Session is released.
\- The SMF may subscribe or request to analytics information provided by the
NWDAF when receiving the enabling request for analytics information exposure
sent by the UE.
\- When the SMF receives the enabling request for analytics information
exposure from a UE, the SMF checks whether it has already subscribed to the
Analytics ID related to the analytics information exposure with same input
parameters to the NWDAF. If so, the SMF does not have to subscribe to the
Analytics ID again. Otherwise, the SMF subscribes to the Analytics ID for the
UE.
\- When the analytics information exposure is not needed anymore for any UE,
the SMF checks whether the subscription to the Analytics ID related to the
analytics information exposure needs to be kept for other UE(s). If not, the
SMF unsubscribes to the Analytics ID.
The above SMF operations related to the (un)subscription to analytics
information provided by the NWDAF can be considered as shared
(un)subscription.
### 6.3.2 Procedures
#### 6.3.2.1 Procedure for enabling analytics information exposure to UE
Figure 6.3.2.1-1 shows the procedure for enabling analytics information
exposure to UE.
Figure 6.3.2.1-1: Procedure for enabling analytics information exposure to UE
0\. UE-1 performs registration.
In steps 1 to 5, UE-1 enables analytics information exposure to UE during the
PDU Session Establishment procedure as defined in clause 4.3.2.2.1 of TS
23.502 [4] with the following differences.
1\. If UE-1 wants to obtain analytics information from 5GC due to need or
request of the application layer, UE-1 includes the following information in
the PDU Session Establishment Request:
\- Enabling request for analytics information exposure per Analytics ID;
\- (optional) Analytics ID(s) and related input parameters for each requested
Analytics ID.
The DNN and S-NSSAI for the PDU Session is for AI/ML based
services/applications, i.e. Application AI/ML operations. The AMF selects an
SMF based on the DNN and S-NSSAI, locally configured data or a corresponding
SMF profile stored in the NRF.
NOTE 1: This solution assumes that the PDU Session used for AI/ML based
services/applications is different than the PDU Session used for non-AI/ML
based services/applications.
NOTE 2: In this solution, both separate PDU Session for each AI/ML based
service/application and common PDU Session for all AI/ML based
services/applications can be supported up to operator. For the latter case, if
multiple AI/ML based services/applications need or request analytics
information in the UE, the UE obtains the analytics information from the SMF
and provides it to each application. Regarding how the UE\'s NAS layer
knows/determines which analytics information it needs to provide to which
application, the UE\'s application layer can provide the requested Analytics
ID(s) to the UE\'s NAS layer in this step; otherwise (i.e. not provided), the
UE can determine this as UE implementation.
2\. The SMF receives the PDU Session Establishment Request including the
enabling request for analytics information exposure per Analytics ID, and
(optional) Analytics ID(s) and related input parameters for each requested
Analytics ID.
If the SMF does not support analytics information exposure to UE, the SMF
ignores the above information.
3\. Session Management subscription data related to the DNN and S-NSSAI for
AI/ML based services/applications in the UDM contains the following data
regarding analytics information exposure to UE.
\- Analytics information exposure to UE allowed: indicates whether the UE is
authorized to enable the analytics information exposure to UE.
\- Analytics ID(s) and related input parameters: identifies the Analytics
ID(s) that are allowed to be exposed to the UE and input parameters for each
Analytics ID (e.g. Analytics Filter Information, Target of Analytics
Reporting, Analytics target period, etc) as defined in clause 6.1.3 of TS
23.288 [6].
\- Analytics ID=\"QoS Sustainability\" and input parameters as defined in
clause 6.9.1 of TS 23.288 [6].
\- Analytics ID=\"User Data Congestion\" and input parameters as defined in
clause 6.8.1 of TS 23.288 [6].
4\. The SMF received the enabling request for analytics information exposure
from UE-1 determines whether UE-1 is authorized to enable the analytics
information exposure to UE taking into account the SM subscription data
received from the UDM, if the SMF supports analytics information exposure to
UE. The SMF also checks the user consent information from UDM to determine if
the analytics information exposure is granted or not.
If authorization check succeeds, the SMF includes an Accept to the enabling
request for analytics information exposure in the PDU Session Establishment
Accept. Otherwise, the SMF includes a Reject to the enabling request for
analytics information exposure in the PDU Session Establishment Accept.
NOTE 3: This solution assumes that if the SMF supports analytics information
exposure to UE, the SMF supports all Analytics IDs to be exposed to the UE.
This means that the NWDAF also supports all these Analytics IDs.
If the SMF does not support analytics information exposure to UE, the SMF does
not include Accept/Reject to the enabling request. In this case, steps 7 to 13
are not performed.
5\. UE-1 receives the PDU Session Establishment Accept.
6\. PDU Session Establishment procedure is complete as specified in Figure
4.3.2.2.1-1 of TS 23.502 [4].
7\. If authorization check succeeded in step 4, the SMF subscribes to
analytics information provided by NWDAF on the Analytics ID(s) requested from
UE-1based on the subscription data described in step 3 if the SMF has not
subscribed to \"QoS Sustainability\" analytics yet for other UE with the same
input parameters. For input parameters included in the subscription request,
the SMF may use the subscription data and local configuration. The SMF can
determine the location information that is one of input parameters for \"QoS
Sustainability\" analytics and Area of Interest that is one of input
parameters for \"User Data Congestion\" analytics based on e.g. the UE
location information, its Service Area. If UE-1 provided the input parameters
for the requested analytics in step 1, the UE provided parameters supersede
the subscription data and local configuration.
The SMF selects an NWDAF that supports requested analytics information as
specified in clause 5.2 of TS 23.288 [6].
More than one NWDAF can be selected because single NWDAF does not support all
the analytics. In this case, the SMF interacts with each selected NWDAF.
The SMF stores that UE-1 requested this analytics information.
8\. The NWDAF collects the data specified in clause 6.9.2 of TS 23.288 [6].
9\. The NWDAF derives the requested analytics as specified in clause 6.9.3 of
TS 23.288 [6].
10\. The NWDAF provides notification on the requested analytics to the SMF.
The SMF determines which UE(s) the SMF needs to provide this analytics
information to, based on the information stored in step 7, i.e. UE-1.
11\. The SMF invokes the Namf_Communication_N1N2MessageTransfer service
operation on the AMF to transfer the analytics information within N1 SM
information sent towards UE-1.
NOTE 4 To provide the analytics information to the UE, the existing SM NAS
message with new information element (e.g. PDU Session Modification Command)
or new SM NAS message can be used.
12\. The AMF sends the N1 NAS message including the analytics information to
UE-1. UE-1\'s NAS layer provides the analytics information to the application
layer.
13\. UE-1\'s application layer may take the provided analytics information
into account for AI/ML related operation, e.g. to report its resources for
Federated Learning Operation to the AI/ML Application Server, decide not to
participate in FL Operation so not to interact with the AI/ML Application
Server, etc.
14\. Same as steps 0-6. As a result, UE-2 enables analytics information
exposure to UE during the PDU Session Establishment procedure.
The SMF stores that UE-2 requested this analytics information.
In Figure 6.3.2.1-1, the SMF does not subscribe to analytics information
provided by NWDAF on \" the Analytics ID(s) requested from UE-2 after
receiving the enabling request for analytics information exposure from UE-2
because the SMF has subscribed it already in step 7.
However, if any input parameter such as the location information is different
to that for the subscription already made, the SMF subscribes to analytics
information on the Analytics ID(s) requested from UE-2for UE-2, or for both
UE-1 and UE-2 in a combined manner, e.g. the location information covering
both UE-1 and UE-2.
15\. The NWDAF derives new analytics taking into account the most recent data
collected.
16\. The NWDAF provides notification on the requested analytics to the SMF.
The SMF determines which UE(s) the SMF needs to provide this analytics
information to, based on the information stored in steps 7 and 14, i.e. UE-1
and UE-2.
17\. Same as step 11.
18\. The SMF invokes the Namf_Communication_N1N2MessageTransfer service
operation on the AMF to transfer the analytics information within N1 SM
information sent towards UE-2.
19\. Same as step 12.
20\. The AMF sends the N1 NAS message including the analytics information to
UE-2. UE-2\'s NAS layer provides the analytics information to the application
layer.
21\. Same as step 13.
22\. UE-2\'s application layer may take the provided analytics information
into account for AI/ML related operation, e.g. to report its resources for
Federated Learning Operation to the AI/ML Application Server, decide not to
participate in FL Operation so not to interact with the AI/ML Application
Server, etc.
NOTE 5: Steps 21 and 22 can be executed in parallel.
The UE can also enable analytics information exposure to UE during the PDU
Session Modification procedure.
NOTE 6: The UE can use the PDU Session Modification procedure only to enable
analytics information exposure to UE.
NOTE 7: Different SMFs can be selected for UE-1 and UE-2. Figure 6.3.2.1-1
shows the case that the same SMF is selected for both UEs to explain how this
solution works.
The UE can enable analytics information exposure to UE as one-time report type
by indicating this to the SMF when enabling analytics information exposure
during PDU Session Establishment procedure or PDU Session Modification
procedure. In this case, the SMF requests to analytics information by invoking
Nnwdaf_AnalyticsInfo_Request service operation.
#### 6.3.2.2 Procedure for disabling analytics information exposure to UE
Figure 6.3.2.2-1 shows the procedure for disabling analytics information
exposure to UE.
Figure 6.3.2.2-1: Procedure for disabling analytics information exposure to UE
0a. For the UE, the PDU Session is established and subscription to analytics
information to the NWDAF by the SMF is made as described in clause 6.3.2.1.
0b. The UE and the AI/ML Application Server may exchange application messages
related to Application AI/ML operations.
In steps 1 to 5, UE-1 disables analytics information exposure to UE during the
PDU Session Modification procedure as defined in clause 4.3.3.2 of TS 23.502
[4] with the following differences.
1\. If the UE wants to stop obtaining analytics information from 5GC, the UE
includes a disabling request for analytics information exposure in the PDU
Session Modification Request.
2\. The SMF receives the PDU Session Modification Request including the
disabling request for analytics information exposure.
The SMF determines to stop the analytics information exposure to the UE.
3\. No difference in steps 1b to 2 in Figure 4.3.3.2-1 of TS 23.502 [4].
4\. The SMF includes an ACK to the disabling request for analytics information
exposure in the PDU Session Modification Command.
5\. The UE receives the PDU Session Modification Command including the ACK to
the disabling request for analytics information exposure.
6\. The UE sends the PDU Session Modification Command Ack to the SMF.
7\. PDU Session Modification procedure is complete as specified in Figure
4.3.3.2-1 of TS 23.502 [4].
8\. The SMF checks whether the subscription to the Analytics ID(s) requested
by the UE needs to be kept for other UE(s). If so, the SMF determines to keep
the subscription. Otherwise, the SMF unsubscribes to the Analytics ID(s) to
the NWDAF.
The UE can also disable analytics information exposure to UE during the PDU
Session Release procedure. Although the UE does not provide the disabling
request to the SMF, the enabled analytics information exposure to UE can be
disabled by the SMF when the PDU Session is released.
### 6.3.3 Impacts on services, entities and interfaces
UE:
\- supports enabling analytics information exposure to UE via SM NAS messages
with new information element.
\- supports disabling analytics information exposure to UE via SM NAS messages
with new information element.
\- obtains analytics information from the SMF via SM NAS messages (i.e.
existing SM NAS message with new information element or new SM NAS message).
\- supports interaction between NAS layer and application layer.
SMF:
\- handles enabling request and disabling request for analytics information
exposure sent by the UE.
\- provides analytics information to the UE via SM NAS messages (i.e. existing
SM NAS message with new information element or new SM NAS message).
UDM:
\- stores Session Management subscription data related to analytics
information exposure to UE.
## 6.4 Solution #4: 5GC Analytics exposure to UE
### 6.4.1 Description
This solution is proposed to address Key Issue #2: 5GC information exposure to
UE.
To facilitate its Application AI/ML operation between the UE and the AF, it
will be helpful for the UE to perform the AI/ML operation if the NWDAF can
expose the UE-related analytics data. The UE and the AF may exchange the
intermediate result to complete the E2E AI/ML operation over application
layer, which may require large bandwidth, low latency or sustainable QoS for
the AI/ML operation traffic. For example, the NWDAF can expose \"QoS
Sustainability\", for V2X application to make AI/ML operation decision
locally.
This solution aims at studying how to enhance the 5GC, i.e. NWDAF, to expose
5GC information to the UE to facilitate its Application AI/ML operation (e.g.
Model Training, Splitting and inference feedback etc.).
The procedure for the NWDAF to expose analytics data (e.g. UE Mobility) to the
UE is as illustrated in Figure 6.4.2-1.
### 6.4.2 Procedures
Figure 6.4.2-1: Procedure for analytics exposure to UE
1\. The UE negotiates with the AF though application layer on analytics
subscription.
2\. The AF selects the NWDAF (possibly via NEF) either by local configuration
or querying the NRF according to Analytics ID, Area of Interest etc.
3\. The AF subscribes to the NWDAF via Nnwdaf_AnalyticsSubscription_Subscribe
(UE identifier, Analytics ID, Area of Interest, Notification Target Address
(+Notification Correlation ID, +callback URI), Target UE IP Address,) for
analytics exposure to the UE.
NOTE 1: In the case that the AF first gets the serving SMF address via UDM,
then subscribes to the NWDAF on behalf of UE via SMF, the AF includes the
Notification Target Address (+Notification Correlation ID, +callback URI) of
SMF which is to be notified, and also includes Target UE IP address, and the
AF sends the Notification Correlation ID to the UE for the subscription
through application layer, then performs the following step 4a-5a.
4a. The NWDAF may return analytics data with Notification Correlation ID to
the serving SMF according to the Notification Target address from AF, and
instructs the notification message is to be exposed to which UE by Target UE
IP address.
5a. The SMF forwards the Analytics data together with Notification Correlation
IDto UE via NAS by invoking Namf_Communication_N1N2MessageTransfer to AMF as
defined in clause 4.2.3.3 of TS 23.502 [4].
4b. alternatively, the NWDAF may return analytics data to the AF, by invoking
Nnwdaf_AnalyticsSubscription_Notify.
5b. sends the analytics data to the UE over application layer.
NOTE 2: It will be considered in the evaluation phase that whether 5GC
Analytics exposure to UE via the network could be efficient compared to the
GBR flow.
### 6.4.3 Impacts on services, entities and interfaces
AMF/SMF:
\- Supporting analytics exposure from NWDAF to UE.
NWDAF:
\- Supporting analytics exposure to UE via SMF.
UE:
\- Supporting analytics exposure from NWDAF via NAS.
## 6.5 Solution #5: 5GC information exposure to UE
### 6.5.1 Description
This solution addresses Key Issue #2, in particular this solution addresses:
\- \"Whether and for which purpose there is a need for 5GC to expose
information or data analytics to the UE, and what are the information or data
analytics that can be provided by 5GC to the UE to assist the Application
AI/ML operation at the UE side\"; and
\- \"How the 5GC exposes such information or data analytics to the UE\".
Current 3GPP System support for Event exposure is intended for authorized 3rd
parties, in particular monitoring of specific events for a UE in the 5G
System, which are provided via NEF, and these include Monitoring capability,
Provisioning capability, Policy/Charging capability and Analytics reporting
capability.
In addition, Network Functions (NFs) can subscribe to UE related event
notifications, e.g. Analytics information generated by the System. Note that
the Event Notification service is neither available for Access Networks nor
for UEs, this means that the availability of system information is limited to
the Core Network. Nevertheless, application AI/ML operations are distributed
in nature, e.g. AI/ML operation splitting between AI/ML endpoints, where these
points are distributed at both the AF and UE side. The same occurs with other
AI/ML operations such as AI/ML model/data distribution and sharing or
Distributed/Federated Learning. Furthermore, some of these applications
require quick access to System Performance locally, this means that system
information needs to be available in both at the AF and the UE. E.g.
Application AIML operations, e.g. Federating Learning may require knowing
planned change of bitrate, latency, or reliability. This is further supported
by both, TS 22.261, clause, 6.40 and the approved FS_AIML with Use Cases and
motivation as to why it is advantageous for the UE to use exposed Network
capabilities to aid AIML operations running on the 5GS. E.g. In TS 22.261,
clause 6.40, it is stated that \"an AI/ML model can be distributed from an NW
endpoint to the devices when they need it to adapt to the changed AI/ML tasks
and environments\", the effect of these tasks and environments has a different
impact on UE and AF and therefore it is clear that both AF and UE may benefit
from exposed Network information.
The 5GS is already capable of providing System performance Prediction event
notification to an authorized External party, hereafter referred to as AF, and
the current mechanism relies on NWDAF and Network Exposure functionality to
generate such predictions and expose them to 3rd parties via the NEF.
Therefore, System Performance predictions and System Performance Statistics
may also be provided to the UE by extending existing mechanism. Clause 6.5.1.1
describes new enhancements to 5G System Exposure procedures to provide Systems
Performance Statistics and Prediction the UE.
#### 6.5.1.1 New capabilities to support UE System Performance and Predictions
requests
As described in clause 6.2.8 of TS 23.288 [6], the AF collects data from the
UE, based on an SLA that determines amongst other things, the information the
UE Application shares with the AF. When applications in the UE collect data
from the Network, however, the end-to-end request goes beyond UE-to-AF, as the
data is collected from several other Network Functions in the network.
Furthermore, there might be cases where, while the UE is allowed to collect
information on some Network services/capabilities, it might not be allowed to
collect information on other Network capabilities, e.g. the UE may be allowed
to collect User Data Congestion, but not DN performance without the explicit
consent of the DN Service Provider. Therefore, there should be a Network
controlled mechanism to enable the UE access to data collection as a whole or
more specific data collection, through data collection policies, that pertains
to certain Network capabilities/services,e.g. the UE may be allowed to collect
Analytics or subscribe to notifications providing Analytics or Monitoring
events only for delivery over the User Plane but not the Control Plane.
Operator policies may be used to determine which analytics a UE is allowed to
collect. While the UE may be allowed to collect certain analytics and
predictions, the UE may not be capable or configured to collect analytics via
User Plane or Control Plane. Therefore the UE may provide its capability upon
registration.
If the UE is capable and configured to receive System Performance Statistics
and Prediction information, the UE may indicate its capability during the
Registration procedure by including a new IE, e.g. \"Network Exposure
capability. The UE may also indicate whether it is capable of receiving
Network Exposure Capability Notifications and or Analytics over the CP, UP or
both\". The UE capability may be used by the AMF/UDM to determine whether to
check if the UE is allowed to request and get Network Exposure information,
and whether notifications/responses can be sent over the CP, UP or both. With
this information along with the AIML operation type the UE is interesting
about, the Network may fetch relevant Analytic ID(s).
To control whether the UE is allowed to access Network Exposure information,,
the network operator may enable \"Network Exposure Access\" permission as part
of the UE\'s subscription record stored in the UDM. During the registration
procedure, the AMF checks whether the UE is allowed to request/subscribe to
Network Exposure events, which Analytics and Network Exposure information the
UE is allowed to collect, and applicable information delivery mechanism (i.e.
UP, CP or both). The AMF fetches the allowed Analytic IDs based on the AI/ML
Operation Types, the correlation ID provided by the UE and the DCAF address if
applicable, from the UDM. The mapping from AI/ML operation type is
provided/updated by the AF to the UDM, either directly (if the AF is in the
operator\'s trusted domain) or via the NEF (if the AF is outside the
operator\'s trusted domain). What Network Analytics are associated to what
AIML operation types is Application Layer specific and outside 3GPP scope. The
AMF may provide in the Registration accept message whether the UE is allowed
to collect Analytics and/or Network Exposure event notifications. Furthermore,
the AMF may indicate a specific information delivery mode, and if the
information delivery mode is either \"UP\" or \"Both\", the AMF may also
provide the address of the AF providing access to Analytics and Event
Notification (e.g. FQDN or IP address of the DCAF), if the AF is allowed to
access the AF (e.g. based on SLA). The AIML AF may provide the address of a
relevant DCAF using existing External Parameter Provisioning procedures.
If the information delivery mode indicates the UE may use only \"UP\" or
\"Both\", the UE may request a PDU Session Establishment to enable
connectivity toward an AF (e.g. DCAF) and request Analytics and/or Event
Notification and have those Analytics and Event Notification delivered over
the UP, using the DCAF as an anchor.
If the information delivery mode indicates \"CP\" or \"Both\", and the UE is
allowed according to its subscription and policy, the UE may request, during a
PDU Session Establishment procedure, System Performance Statistics and
Predictions through a NF such as the SMF. The UE request the establishment of
a PDU Session using an S-NSSAI associated to the application AIML operation
the UE is requesting Analytics for.
The SMF may subscribe, on behalf of the UE, to specific Analytics and AI/ML
operation types. Two alternatives are provided, the SMF may get the list of
allowed Analytics/Network Exposure events that the UE may request from the UDM
by providing the AIML operation type and correlation ID, or the SMF may send
this information to the NDWAF and the NWDAF can get the relevant Analytics
from the UDM. The UE provides the input parameter required for these Analytics
during the PDU Session Establishment Request, e.g. within the PCO IE, or it
may provide the input parameters using UL NAS TRANSPORT message, through the
AMF. The AMF may convey this information to the NWDAF or it may forward it to
the SMF controlling the AI/ML PDU Session.
The UE may provide, in addition to the parameters specified in clause 6.1.3 of
TS 23.503 [5], the PDU Session ID, AI/ML operation type(s) and mapping of
AI/ML operation types to relevant Analytic IDs. If the UE does not have the
mapping of AI/ML operation type(s) to Analytic IDs, the UE may provide a
Correlation ID shared by the AF endpoint counterpart, which the UE may obtain
through the application layer. During the PDU Session Establishment procedure,
the SMF may, based on Operator Policy and/or Analytics, provide in the PDU
Session Establishment Accept message, e.g. within the PCO IE, the relevant
Analytics IDs that are supported by the selected NWDAF (the one available in
the AI/ML Network Slice the AI/ML operation is registered to).
Alternatively, if e.g. based on policy or Network Analytics, e.g. showing high
CP load, the SMF may route Analytics of Network Exposure notification through
the UP, either directly through the UPF (via N4) or through an AF such as
DCAF, over N4, using existing packet forwarding functionality.
The NWDAF may use the AI/ML operation type(s) and mapping of AI/ML operation
types to relevant Analytic IDs or the AIML operation type and the Correlation
ID to fetch relevant trained ML Models to generate Analytics requested by the
UE.
The NWDAF uses the PDU Session ID and SMF ID to notify relevant Analytics to
the UE.
### 6.5.2 Procedures
Figure 6.5.2-1 Operation specific System Performance Statistics and
Predictions requested by UE
0a-c: During the Registration procedure, the AMF checks whether the UE is
allowed to request/subscribe to Network Exposure events, which Analytics and
Network Exposure information the UE is allowed to collect, and applicable
information delivery mechanism (i.e. UP, CP or both). The AMF may get the
allowed Analytic IDs and relevant Network Exposure event, based on the AI/ML
Operation Types and the correlation ID provided by the UE, from the UDM. If
the UE is configured with an Analytics list, the UE may provide the list as an
alternative to the AIML operation type. The mapping from AI/ML operation type
is provided/updated by the AF to the UDM, either directly (if the AF is in the
operator\'s trusted domain) or via the NEF (if the AF is outside the
operator\'s trusted domain). The AMF may provide in the Registration accept
message an indication of whether the UE is allowed to collect Analytics and/or
Network Exposure event notifications. Furthermore, the AMF indicates
information delivery mode, and if the information delivery mode is either
\"UP\" or \"Both\", the AMF may also provide the address of the AF providing
access to Analytics and Event Notification (e.g. FQDN or IP address).
If the information delivery mode indicates the UE may use only \"UP\" or
\"Both\", the UE may request a PDU Session Establishment to enable
connectivity toward an AF (e.g. DCAF) and request Analytics and/or Event
Notification.
0d. Based on the allowed delivery mechanism, the UE may determine whether it
requests subscription to Analytics and/or Event Notifications, via UP, CP or
Both.
1\. If the UE is allowed to request Analytics and/or Event Notifications, via
CP, the UE subscribes to analytics information either using a PDU Session
Establishment or PDU Session Modification procedure and it provides input
parameters e.g. within the PCO IE, including AI/ML Operation Type, e.g.
\"Model Distribution\", \"Operation Split\", \"Federated Learning\". The SMF
may use the application AI/ML Operation type, and correlation ID to correlate
associated AF request and generate the list of Analytic IDs:
1b. Alternatively, the UE may use a UL NAS TRANSPORT message to convey inputs,
indicating the PDU Session ID, S-NSSAI and DNN this request is intended for.
The AMF uses this information to select the correct SMF.
1c. The AMF uses a Nsmf_info_Request Service operation to relay the request to
the SMF identified in 1b.
2\. The SMF subscribes, on behalf of the UE, to Analytics associated specific
AI/ML operation type (s) provided by the UE. Two alternatives are provided,
the SMF may get the list of allowed Analytics/Network Exposure events the UE
may request from the UDM by providing the AIML operation type and correlation
ID, or the SMF may send this information to the NDWAF and the NWDAF can get
the relevant Analytics from the UDM. The NWDAF uses the correlation ID to
identify Analytics relevant to specific application.
2b. The NWDAF may provide an immediate response to the NWDAF Service consumer,
providing an Event Notification or relevant Analytics.
3 The NWDAF notifies the NWDAF service consumer (i.e. the SMF acting on behave
of the UE) with the analytics information by invoking
Nnwdaf_AnalyticsSubscription_Notify service operation, based on the request
from the NWDAF service consumer, e.g. Specific AI/ML Operation Type).
4\. The SMF uses a Nsmf_info_Notification Service operation to relay the
\"Nnwdaf_AnalyticsSubscription_Notify\" message to the UE via the AMF.
Alternatively, based on policy or access to Network Analytics, e.g. showing
high CP load, the SMF may route Analytics of Network Exposure notification
through the UP, either directly through the UPF (via N4) or through and AF
such as DCAF.
5\. The AMF uses a DL NAS TRANSPORT message to relay the
\"Nnwdaf_AnalyticsSubscription_Notify\" message carrying the System
Performance Statistics and Predictions requested by the UE. Alternatively, the
message may carry a Endpoint address where the UE could fetch the System
Performance Statistics and Predictions, via the User Plane.
### 6.5.3 Impacts on services, entities and interfaces
UE:
\- Support for subscription to Network Performance Analytics and Predictions.
\- Support sending relevant Performance Measurement to the relevant
Application AIML operation.
SMF:
\- Support for relaying UE subscription to Network Performance Analytics and
Predictions.
\- Support delivery mechanism and forwarding of packets to UPF or DCAF.
AMF/UDM:
\- Support for UE authorization to request and obtain Network Performance
Analytics and Predictions.
\- Provide in the Registration accept message whether the UE is allowed to
collect Analytics and/or Network Exposure event notifications.
\- Provide in the Registration accept message whether the UE is allowed to
collect Analytics and/or Network Exposure event notifications.
DCAF:
\- Support relaying of Analytics and Predictions forwarded by SMF.
## 6.6 Solution #6: Federated learning analytics as assistance to AI/ML
application server
### 6.6.1 Description
This solution addresses aspects of key issue #7 on 5GS Assistance to Federated
Learning Operation and key issue #3 on 5GC Information Exposure to authorized
3rd party for Application Layer AI / ML Operation.
The solution allows 5GS to assist the FL application server to decide on which
UEs should be part of FL process.
The 5GS assistance process to FL operation is explained in 4 key steps, and
detailed procedures are available in clause 6.6.2:
1\. AI/ML application server prepares for running FL training by collecting
information such as FL aggregated model size, potential FL members, model
aggregation latency target in each iteration, expected number of iterations
and time interval between each iteration, local model (i.e. model at learner
side) size, time window when FL training needs to be performed. FL application
server can run an initial candidate selection algorithm to derive an initial
list of candidate FL members.
2\. Based on the above information, the AI/ML application server requests 5GS
assistance, by providing the following input information to 5GS about local FL
model training:
\- Candidate FL members.
\- Local model (i.e. model at learner side) size and aggregated model (i.e.
model at server side) size (to determine what kind of latency could be
provided for the model size).
\- Expected number of iterations and time interval for each iteration.
\- Optionally, Preferred time window when FL training needs to be performed.
\- Optionally, FL transmission start time indicates when FL training operation
prefers to start.
\- QoS requirements(e.g. includes 5QI, QoS Characteristics) indicates the QoS
requirements of the QoS flow of the FL transmission.
\- Optionally, a request for geographical distribution of the UEs.
\- S-NSSAI.
3\. 5GS collects candidate FL members\' data:
\- Radio link quality (RSRP) for each candidate FL member.
\- Expected QoS estimate in the area for FL training.
\- QoS configuration in PCF / capability for the FL transmission QoS flow (if
UEs can meet the required QoS (2MBPS) in the specified areas).
\- User Consent check for each member. The user consent checking is enhanced
to verify whether user corresponding to each member authorizes the AF to
consume its data or analytics for AIML operations.
4\. 5GS estimates and provides following analytics / predictions to the
application server:
\- For each candidate member, expected latency performance given aggregated
and local model size, in the form of an estimate of latency per iteration
and/or an average latency over the duration for the FL process.
\- A suggested time window for a better result for the FL operation, e.g. when
network is going to be congested at the preferred time window when FL training
needs to be performed, or when the NWDAF estimates that latency could be
drastically reduced by delaying the FL training process to a later point in
time.
\- Geographical distribution information for the candidate members, if
requested by the AI/ML application server for further processing its FL member
candidate selection algorithm.
\- QoS flow level data (QFI, QoS flow Bit Rate, QoS flow Packet Delay, Packet
transmission, Packet retransmission), as the statistics/prediction of QoS for
the FL traffic transmission.
### 6.6.2 Procedures
The procedure for federated learning analytics as assistance to AI/ML
application server is depicted in figure 6.6.2-1.
Figure 6.6.2-1: Federated learning analytics as assistance to AI/ML
application server
1\. The AF prepares for running FL training by collecting information such as
FL aggregated model size, potential FL members, model aggregation latency
target in each iteration, expected number of iterations and time interval
between iterations, local model size, time window(s) when FL training needs to
be performed. It determines an initial list for candidate FL members.
NOTE 1: This step happens at AI/ML application layer and is out of 3GPP scope.
2\. Based on the information collected in step 1, the AF requests 5GS
assistance and request for analytics with Analytics ID set to FL analytics,
and provides the following input information to 5GS about FL model training:
\- Candidate FL members: a list of candidate FL members Ids, i.e. one or more
SUPI(s) or Internal Group Identifier(s), as derived in step 1.
\- Local model size: to determine uplink traffic requirements for the UEs
participating to FL operation and which kind of latency could be provided for
this model size.
\- Aggregated model size: to help 5GS to determine the QoS requirements and
what kind of latency could be provided for this model size.
\- Expected number of iterations (e.g. 5000, 10000) and time interval between
iterations. These two information will then determine the overall time needed
by FL training operation.
\- Optionally, preferred time window(s) when FL training operation for the
group needs to be performed.
\- Optionally, FL transmission start time indicates when FL training operation
prefers to start.
\- S-NSSAI.
\- Optionally, a request for geographical distribution of the UEs.
\- QoS requirements (e.g. includes 5QI, QoS Characteristics) indicates the QoS
requirements of the QoS flow of the FL transmission.
NOTE 2: Privacy issues need to be addressed by SA WG3.
3\. NEF forwards the request to NWDAF.
4-6. NWDAF collects data about candidate FL members from NFs:
\- Radio link quality (RSRP) for each candidate UE/member, via OAM.
\- Network capacity (to support expected traffic) estimate in the area for FL
training. This could require additions to network performance analytics such
as e.g. maximum load that a gNB (absolute available throughput) can accept.
\- QoS configuration in PCF / capability for the FL transmission QoS flow (if
UEs can meet the required QoS (2MBPS) in the specified areas).
\- User consent checking for each member, from UDM. The user consent checking
is enhanced to verify whether user corresponding to each member authorizes the
AF to consume its data or analytics for AIML operations.
7-8. NWDAF estimates and informs AF, via NEF, about analytics and predictions,
per time window:
\- Candidate members\' expected latency performance given aggregated and local
model size, per iteration and/or on average. This is needed for the AF to
determine the number of members meeting latency target per iteration, as well
as the expected number of members not able to meet the latency target during
the overall FL training process.
\- Geographical distribution of the member UEs (if requested by the AF in step
2 for further processing in candidate selection algorithm), e.g. list of UEs
per tracking areas.
\- QoS flow level data (QFI, QoS flow Bit Rate, QoS flow Packet Delay, Packet
transmission, Packet retransmission), as the statistics/prediction of QoS for
the FL traffic transmission;
9-11. Based on the received information, the AF can estimate latency
performance of FL model training and can take some decision on FL training,
such as start or delay FL model training, or increase targeted latency per
iteration and start FL, or decide to add FL members and request again
assistance from the 5GS for new candidate members, or decide to use another FL
selection algorithm.
NOTE 3: These steps happen at AI/ML application layer and are out of 3GPP
scope.
### 6.6.3 Impacts on services, entities and interfaces
NWDAF providing new FL analytics on expected latency for candidate FL members,
with input parameters provided by AI/ML application server.
## 6.7 Solution #7: 5GS information exposure for AI/ML operation
### 6.7.1 Description
Awareness of UE UL/DL data rate at AI/ML application server is beneficial for
it to make decision on AI/ML operation. AI/ML application server needs 5GS to
provide the supported UL/DL data rate to make the decision on AI/ML operation,
e.g. to determine the splitting point for AI/ML model splitting, or to
determine the AI/ML model and the size of parameter for AI/ML model
downloading. RAN node estimates the supported UL/DL data rate based on the
channel condition between RAN node and UE, the bandwidth available for the UE
and other factors. That is, the supported/available UL/DL data rate can be
treated as the prediction of data rate for the near-future, which is not the
mesurement of current data rate. Besides, after AI/ML application server makes
decision for AI/ML operation, it may provide 5GS the required UL/DL data rate
as the QoS requirement.
If the AI/ML operation last for a short time, e.g. 1s, then one single report
of UL/DL data rate from 5GS is enough. Otherwise, data rate monitoring should
be performed and feedback to AI/ML application server in order to enable
adaptive AI/ML operation, which reflects the changing network conditions in a
timely manner. In order to enable 5GS to perform data rate monitoring for
AI/ML operation, AF provides 5GS data rate monitoring request information.
Data rate monitoring request information may include the following parameters:
\- The direction of data rate monitoring, e.g. UL, DL, or both.
\- Data rate reporting levels.
\- Data rate reporting periodicity.
\- Temporal Validity.
Where Temporal Validity indicates the time interval(s) during which the data
rate monitoring request is to be applied. If no data rate reporting
periodicity and Temportal Validity are provided, it implies that one shot of
reporting is requested by AF. Besides, the required UL/DL data rate may be
optionally provided as the QoS requirement, which may be contained in data
rate monitoring information or not.
### 6.7.2 Procedures
#### 6.7.2.1 Data rate monitoring scheme based on AF session with required QoS
The solution relies on the Setting up an AF session with required QoS
procedure and PDU Session Modification procedure in clauses 4.15.6.6 and
4.3.3.2 of TS 23.502 [4] respectively, to provision the data rate monitoring
request informaiton to the RAN node. Besides, the existing QoS monitoring
scheme can be reused for data rate monitoring configuration and reporting.
Figure 6.7.2.1 data rate monitoring procedure
0\. The AI/ML application of UE requests for connectivity.
1\. UE triggers PDU session establishment procedure according to clause
4.3.2.2.1 of TS 23.502 [4].
2\. The AI/ML application of UE communicates with AF/App server, e.g. UE may
provide the requested AI/ML model, the available AI/ML model in UE, the
available computation and energy resource, memory limitation etc.
3\. (Optional) AF/App server makes decision on AI/ML operation based on UE\'s
input and its own conditions. E.g. AF/App server determines the splitting
point for AI/ML model splitting, or determine the AI/ML model and the size of
parameter for AI/ML model downloading.
4\. Based on the AI/ML operation, AF/App server provision data rate monitoring
request information and optionally the required UL/DL data rate (provided if
step 3 exists) as the QoS requirement to PCF via NEF based on Setting up an AF
session with required QoS procedure in clause 4.15.6.6 of TS 23.502 [4]. The
data rate monitoring request can be regarded as the AF subscribes to events of
DATA_RATE_MONITORING. Alternatively, AF shall subscribe to events of
DATA_RATE_MONITORING in AF request separately.
5\. PCF initiates SM Policy Association Modification procedure as defined in
clause 4.16.5.2 of TS 23.502 [4] to notify SMF about the modification of
policies, which further triggers PDU session modification procedure. PCF
includes the data rate monitoring request information (and optionally the
required UL/DL data rate) in the PCC rules provided to SMF.
6\. SMF configures RAN node to perform data rate monitoring request (or
provides RAN node with the required UL/DL data rate) via AMF. The N2 SM
information contains QFI(s), the data rate monitoring request ( or the
required UL/DL data rate optionally). The data rate monitoring request
(together with the required UL/DL data rate optionally) can be associated with
PDU session or QoS flow.
7\. RAN node performs data rate monitoring for the PDU session or QoS flow as
requested by the network.
8\. Similar as the existing QoS monitoring scheme, RAN node reports data rate
monitoring results to PSA UPF in the UL data packets or UL dummy packets.
9\. UPF sends the data rate monitoring results to SMF based on N4 Session
Level Reporting procedure. SMF exposes the data rate monitoring results to PCF
or local NEF as configured by PCF. E.g. SMF triggers Nsmf_EventExposure_Notify
with data rate monitoring results. New event should be defined for data rate
monitoring.
10\. AF/App server makes decision on AI/ML operation based on 5GS\'s input.
E.g. AF/App server may change the splitting point for AI/ML model splitting,
or change the size of parameter for AI/ML model downloading.
NOTE: If the SMF receives the indication of direct event notification from the
PCF and the SMF determines that the L-PSA UPF supports such reporting, the SMF
sends data rate monitoring parameters and associated them with the target
local NEF or local AF address to the L-PSA UPF via N4 rules. L-PSA UPF obtains
data rate monitoring results from NG-RAN node and sends the notification
related with data rate monitoring results over Nupf_EventExposure_Notify
service operation to local NEF/AF.
#### 6.7.2.2 Data rate monitoring scheme based on service information
provision
An alternative way for AF to subscribe data rate monitoring is to reuse clause
4.16.5.2 in TS 23.502 [4], where AF/NEF provides service information to the
PCF without other mandatory parameters (e.g. QoS reference). E.g. AF/NEF may
invokes Npcf_PolicyAuthorization_Create Request or
Npcf_PolicyAuthorization_Update request or Npcf_PolicyAuthorization_Subscribe
Request service operation to provide data rate monitoring information.
### 6.7.3 Impacts on services, entities and interfaces
The proposed solution is based on Rel-17 procedures but some enhancements may
be needed to make it possible for the data rate monitoring scheme, such as:
AF:
\- Include data rate monitoring request information in AF request.
PCF:
\- Include data rate monitoring request information in PCC rules.
SMF:
\- Include data rate monitoring request information in N2 SM information
towards RAN node.
\- Expose data rate monitoring results to PCF or AF or local NEF.
UPF:
\- Expose data rate monitoring results to SMF or local NEF/AF.
RAN:
\- Send data rate monitoring results to UPF over user plane.
## 6.8 Solution #8: 5GC information/analytics notification to the AF and the
UE
### 6.8.1 Introduction
This solution addresses Key Issue #2 \"5GC information exposure to UE\" and
Key Issue #3 \"5GC Information Exposure to authorized 3rd party for
Application Layer AI / ML Operation\".
UE and AF may be notified on 5GC information or analytics with the purpose of
triggering decisions on AI/ML operation or application adaptation.
Notifications can be related to specific AF Sessions/PDU Sessions, in such
case the AF can subscribe to such information via the PCF when the AF Session
is created or modified and receive the notification via the PCF. New direct UE
notifications on 5GC information or analytics are introduced via SMF/AMF.
### 6.8.2 Description
As described in clause 6.2.1 of TR 22.874 [8], AI accelerators are expected to
enable the execution of complex AI/ML models directly on UE. The AI/ML models
may need to be changed if the environmental conditions are not stable (light
distribution in the scene, background noise, time of the day, number and type
of objects in the view-field, etc.). Downloading new ML models may be needed
as environmental conditions change and also when new ML models become
available. AI/ML model size, maximum latency and user experienced DL data rate
can be different across different models. If the UE starts to download a model
and the DL data rate suddenly decreases after the decision has been made, the
download of the new model may be affected with impact on the latency and
overall performance of the application. If the application/UE knows that there
is a potential QoS change in the DL data rate in the future, it can decide to
instruct the UE to pre-fetch in-advance a higher number of AI/ML models to be
used for different sets of environmental conditions, or to choose more general
AI/ML models that can work under different sets of environmental conditions.
The information that is needed in this case is the likelihood of a potential
QoS change in the future and information on the estimated upcoming DL data
rate in relation to the DL data rate requirements of the different AI/ML
models that are supported.
As described in clause 7.4.3 of TR 22.874 [8], 5GS can adjust the QoS policies
of individual UEs in a Flock to allocate more resources to the UEs that lag
and less resources for those that are ahead of the flock, so that the overall
result is more efficient for the Synchronous Federated Learning service and
for the network operator. The UE can benefit of knowing about the upcoming QoS
change due to policy change, for example by anticipating specific tasks that
require the current QoS conditions so that they can be finished before the
planned QoS change. The information that is needed in this case is the
likelihood of a potential QoS change in the future and optionally the
information on the QoS profile that the network is planning to apply in the
future.
In addition to the QoS Sustainability analytics, the AF may subscribe to the
UE Mobility analytics from NWDAF to determine if the UE moves out of an AoI or
the Network Performance analytics for an AoI to determine when it is suitable
to train ML model in the AoI. The UE may subscribe to the QoS monitoring
result from UPF to help UE determine if it can join the FL group.
For all these reasons the UE and 3rd party applications (close to the UE
and/or in the cloud) may need to obtain 5GC information or data analytics by
subscribing or requesting e.g. QoS Sustainability Analytics from NWDAF to
assist its local decision on application AI/ML operations. For example, UE may
download V2X AI/ML model from V2X AF/AS. To perform real-time AI/ML inference
operations locally to determine application parameters (e.g. automatic driving
level, inter-vehicle distance), the UE may need to obtain 5GC information or
data analytics, e.g. QoS Sustainability analytics from NWDAF. The problem is
how to subscribe 5GC information to the 5GC for the UE, and how the 5GC
exposes such information or data analytics to the UE and to the AF. In this
solution AF subscribes for both the AF and the UE on the 5GC information and
analytics that relate to an AF Session/PDU Session. AF subscribes by operating
on the specific AF Session.
The potential solution for 5GC information exposure to UE is shown in Figure
6.8.2-1:
\- UE and AF make some negotiations in the application layer and potentially
may determine that:
\- 5GC information (such as network data analytics from NWDAF, UE Location
from AMF, etc.) is required for the UE\'s local decision on application AI/ML
operations;
\- UE allows AF to subscribe the 5GC information on behalf of itself.
NOTE: The negotiation between UE and AF is out of 3GPP scope.
\- AF subscribes 5GC information to 5GC for the UE based on application layer
negotiation between UE and AF.
\- 5GC information or data analytics can directly be exposed to UE through
control plane (i.e. AMF/SMF) or user plane (i.e. UPF).
\- The UE can use 5GC information to make decisions on application AI/ML
operations locally.
Figure 6.8.2-1: 5GC information exposure to UE for the subscription by AF
### 6.8.3 Procedures
#### 6.8.3.1 AF Subscription for 5GC information or analytics
When the AF wants to subscribe on the 5GC information or analytics for the AF
and the UE it triggers the subscription with a request which is addressed to
the PCF.
In case the AF is not trusted, the request can reach the PCF or NF/NWDAF
through NEF.
Figure 6.8.3.1-1: Procedure of 5GC information/analytics exposure to UE and
AF: AF subscription
1\. UE and AF make some negotiations in the application layer.
2a-2b. AF subscribes to network analytics/network information or data
analytics.
a. In case of 5GC information that relate to an AF Session/PDU Session (e.g.
Analytics on potential QoS change for a specific AF Session/PDU Session), AF
can subscribe via PCF in order to set up or modify an AF application session
context for the service (e.g. as in clause 4.2.2.2 of TS 29.514 [9]). The AF
shall include the information that is requested. As an example, for the
analytics on potential QoS change for a specific AF Session/PDU Session, the
AF shall include the information needed to identify the specific AF
Session/PDU Session, the QoS flows in the AF Session and relevant QoS KPIs for
which analytics are requested. The AF may include additional relevant
information in this request such as the time interval for the analytics
notifications or information that can be used to determine the location(s) for
the analytics subscription.
b. In case of other 5GC information (apart from potential QoS change
notification), the AF may directly subscribe the 5GC information for itself or
for the UE. The AF may find the NF or NWDAF serving the UE by first querying
the UDM.
\- If the notification endpoint is the AF, the subscription procedure is the
same as in clause 6.1.1.2 of TS 23.288 [6] or clause 4.15.6 of TS 23.502 [4].
\- If the notification endpoint is the UE, according to the request of UE, AF
subscribes network information to NF using Nnf_EventExposure_Subscribe
(Notification Indication(GPSI)) or data analytics to the NWDAF using
Nnwdaf_AnalyticsSubscription_Subscribe(Notification Indication(GPSI)). The
subscription service operation contains a notification indication (including
UE ID, i.e. GPSI) which indicates the NF or NWDAF to send the 5GC information
(i.e. network information or data analytics) to the corresponding UE.
3\. PCF decides to update the policy of the PDU Session associated with the AF
Session, including also the information provided by the AF in the previous
step.
4\. PCF updates policy information to SMF, and instructing also the SMF to
subscribe to related network analytics from NWDAF for the PDU Session.
5\. SMF subscribes to the related analytics from NWDAF for the PDU Session.
The SMF can use the information in the PDU Session (e.g. 5QIs of related QoS
flows, GFBR, MFBR) and the information provided by the AF in step 2 to
determine the analytics filter information and/or the analytics target period
for the subscription and the relevant thresholds for the QoS Sustainability
Analytics.
6\. NWDAF starts to collect and process data for the received request and
derives data analytics.
NOTE: SMF may need to update the subscription to NWDAF when the PDU Session is
modified and cancel the subscription when the PDU Session or the related QoS
flow for which the 5GC information/analytics have been requested is released.
#### 6.8.3.2 5GC information or analytics notification to the AF and the UE
Figure 6.8.3.2-1: Procedure of 5GC information exposure to UE and AF:
notification to AF and UE
1\. NWDAF or NF decides to trigger a notification for an active subscription,
according to collected 5GC information.
2a. In the case of AF Session/PDU Session specific subscription, the NWDAF
notifies SMF, e.g. using potential QoS change notification as in clause 6.9 of
TS 23.288 [6] or according to a notification related to other analytics. The
SMF can match the information in the subscription for analytics and the
notification received by the NWDAF (e.g. 5QI, QoS KPI information or
prediction, time interval information) with the managed PDU Sessions and QoS
flows to determine the PDU Sessions for which the analytics apply and the UE
that needs to be notified.
2b. In the more general case (e.g. non-AF Session/PDU Session specific
subscription):
\- If the notification endpoint is the AF, the NF/NWDAF notifies the AF
directly by using Nnf_EventExposure_Notify or
Nnwdaf_AnalyticsSubscription_Notify according to the subscription.
\- If the notification endpoint is the UE, the NF/NWDAF notifies the SMF who
serves the UE by using Nnf_EventExposure_Notify or
Nnwdaf_AnalyticsSubscription_Notify according to the subscription.
3a. The SMF sends an AF Session/PDU Session specific notification to the AF
via the PCF. For example in case of potential QoS change notification which is
specific for an AF Session/PDU Session, it could be a QoS Prediction
Information with the prediction of a specific QoS change event, according to
the information received by the NWDAF and the initial subscription performed
by SMF on the specific GBR QoS flows, using relevant 5QI, thresholds and other
analytics filter information.
UE is notified about the assistance information by either option A or option
B. Option A includes step 4 to step 6 and option B includes step 7.
**Option A:**
4\. [Conditional] If UE is to be notified and it is in IDLE state, the network
will trigger service request, and page the UE.
5\. If the UE needs to be notified, SMF carries the 5GC information received
from step 2a (i.e. AF Session/PDU Session specific information) or step 2b_2
(i.e. non-AF Session/PDU Session specific information) for the UE in the PDU
Session Modification Command. As an example, in case of a QoS change
prediction notification which is specific for a PDU Session, the SMF may send
to the UE a PDU SESSION MODIFICATION COMMAND with an additional flag
\"predicted\" indicating a potential change to the PDU Session which may
happen in the immediate future. The information in this message may include
(e.g. for a GBR flow) the information that the GBR could not be fulfilled in
the near future and the information on the QoS that is predicted to be
fulfilled. Other information can include an indication of the likelihood of
the change to happen and time-related information of when the change is
expected to happen. This message can trigger potential AI/ML operation or
adaptation in the UE and in the application close to the UE if the UE can use
this message to trigger the application. The flag \"predicted\" allows UE to
know this is for the moment \"just a prediction\" and actual modification may
happen in the future.
6\. UE responds with a PDU SESSION MODIFICATION COMPLETE to confirm the
reception of the above message.
The UE and the AF may use the information received respectively in step 5 and
3 to trigger AI/ML specific operations in the UE or in the application. As an
example, as described in clause 6.2.1 of TR 22.874 [8], the UE or the
application may decide to pre-fetch in-advance a higher number of AI/ML models
to be used for different sets of environmental conditions, or to choose more
general AI/ML models that can work under different sets of environmental
conditions, if the DL data rate is predicted to drop at some point in the
future. These decisions may be implemented because the predicted potential QoS
change may prevent UE or application to download new models after the QoS
change takes place.
**Option B:**
7\. The AF may inform the UE, via application layer communication, about the
assistance information based on the received information from step 2b_1 (i.e.
non-AF Session/PDU Session specific information) or step 3a (i.e. AF
Session/PDU Session specific information) and local configuration. The
application layer communication between the AF and the UE is out of scope of
3GPP.
### 6.8.4 Impacts on services, entities and interfaces
UE:
\- Need to negotiate with AF to enable the AF to subscribe network information
or data analytics to 5GC for the UE.
\- Can now receive analytics via a PDU SESSION MODIFICATION COMMAND. In case
of potential QoS change notification, the flag \"predicted\" allows the UE to
know this is for the moment \"just a prediction\" and actual modification may
happen in the future.
\- Need to identify the application running over the Packet Filter or the QoS
flow for which the predicted QoS change notification is received in NAS
message, and notify the corresponding application. Since applications are
already notified of QoS change events (as in clause 10.1.19 of TS 27.007
[14]), the same existing mechanism can be extended to support additional
notifications such as those related to AF Session/PDU Session specific
information (e.g. potential QoS change events).
SMF/PCF:
\- For AF Session/PDU Session specific information, support subscription to
analytics from NWDAF and sending the network information or data analytics to
the corresponding UE according to the notification indication.
AF:
\- Support subscribing for network information or data analytics from 5GC for
the UE, and need to carry notification indication for the UE in the
subscription service operation.
NF/NWDAF:
\- Notify AMF/SMF about network information or data analytics.
\- Notify AF or SMF about the non-AF Session/PDU Session specific network
information or data analytics.
## 6.9 Solution #9: AF influence on AI/ML operations related policies
### 6.9.1 Description
This solution addressed Key Issue #4 \"Enhancing External Parameter
Provisioning \".
Application AL/ML related services are sensitive to network perception
capability and network condition. For example, AI/ML model inference needs to
perceive UE mobility. Different inferences have different requirements to
latency and bandwidth. To achieve group training of multiple UEs, AI/ML
training has higher requirements to network condition and stability. Due to
the uncertainty of UE mobility and other behaviours and the instability of
network condition (e.g. bandwidth, latency, jitter, etc.) in mobile
communication network, on the one hand, a better network condition is
required; and on the other hand, it is also needed to flexibly configure and
adjust AI/ML related policies when the application layer conducts AI/ML model
inference or model training.
In this solution, AF can provide configuration information required for AI/ML
operations related policies and dynamically update it with assistance of
monitoring, network condition and UE behaviours, etc. The configuration
information required for AI/ML operations related policies can be provisioned
based on different aspects (e.g. different area, different time period,
different network condition etc.). Based on the configuration information,
network can choose UE members dynamically (e.g. to choose whoever enter the
particular area).
The NEF event exposure service is enhanced by providing a unified parameter
provisioning service API dedicated for AI/ML operations, which may add the
policy related parameters of AI/ML operations based on Nnef_TrafficInfluence
or Nnef_ServiceParameter, including routing, QoS related policies and network
resource monitoring subscription, etc.
For example, there is a big sports game going on in area 1 and the network is
congested while there are just a few UEs in area 2 and the network is smooth.
It seems more appropriate to make specific policies for area 1 that to offload
some AI/ML operations to local network and servers when UE enters area 1, and
specific policies for area 2 that put more AI/ML operations to the default
server.
In the procedure section, we provide the procedures of AF influence on area-
based AI/ML operations related policies as an example. In the procedure of AF
influence on area-based AI/ML operations related policies, the network assists
in discovering UEs that enter the specific area. When the UEs leave the area,
the policy will be removed or updated based on the parameters of the new area
and the monitoring results.
### 6.9.2 Procedures
#### 6.9.2.1 Procedure of AF influence on area-based AI/ML operations related
policies
Figure 6.9.2.1-1 shows the procedure of AF influence on AI/ML operations
related area-based policies.
Figure 6.9.2.1-1: Procedure of AF influence on area-based AI/ML operations
related policies
1\. The AF sends configuration information required for AI/ML operations. The
NEF event exposure service is enhanced by providing a unified parameter
provisioning service API dedicated for AI/ML operations, which may add the
policy related parameters of AI/ML operations based on Nnef_TrafficInfluence
as described in clause 4.3.6.2 of TS 23.502 [4] or Nnef_ServiceParameter as
described in clause 4.15.6.7 of TS 23.502 [4], including routing, QoS related
policies and network resource monitoring subscription, etc. The AF may
indicate in the request:
\- Area (1...max);
\- Spatial Validity Condition (cell or TAI list);
\- Filter information that may include one or more than one of the following
parameters:
\- Application ID;
\- S-NSSI;
\- DNN;
\- Time duration: Start time and end time;
\- Target UE(s) (any UE);
\- One or more than one of the following information:
\- IP address of AI/ML server;
\- [Optional] AI/ML operation related subscription (e.g. network resource
monitoring, QoS monitoring);
\- [Optional] Traffic Routing requirements (e.g. traffic filtering
information, UP path management event subscription, etc.);
\- [Optional] QoS requirements (e.g. QoS reference, QoS parameters, etc.);
2\. The NEF stores the AF request information in the UDR.
3\. The NEF responds to the AF.
4\. The PCF receives a Nudr_DM_Notify notification of data change from UDR.
The service Nudr_DM_Notify need to be extended according to the policy related
parameters received in step 1.
5\. The PCF subscribes to SMF to receive notification about change of UE
location in the Spatial Validity Condition. The SMF then sends location
monitoring to the AMF to obtain the UE location presence in Spatial Validity
Condition (i.e. Presence Reporting Area). Or, the PCF may provide Policy
Control Request Triggers to the AMF indicating a specific UE for e.g. location
change.
6\. When the UE(s) enter area 1, the AMF reports that the UE(s) have entered
area 1, or the PCF may determine the UE(s) are in area1 when the UE(s)
establish PDU session.
7\. The PCF, based on the information received from the AF, sends access and
mobility related policies received from the AF to the AMF and the UE(s) using
the procedure defined in clause 4.2.4.3 of TS 23.502 [4].
8\. The PCF, based on the information received from the AF, sends session
related policies to the SMF that may include routing rules, related QoS rules,
charging rules and resource monitoring related information and AI/ML related
subscription.
NOTE: In this solution, external parameters (e.g. AM policy information, SM
policy information) are only supported to provision to same PCF.
9\. The SMF may take appropriate actions to reconfigure the User plane of the
PDU Session, such as determining a target DNAI and adding, replacing or
removing a UPF in the data path to e.g. act as an UL CL or a Branching Point.
10\. The SMF may send a notification to the AF that User Plane has changed or
other notifications based on the subscription from the AF.
11\. The UE(s) initiate DNS request to get IP address of AI/ML server of area
1.
12\. The UE(s) start AI/ML operations with AI/ML server under the policies of
area 1. For example, with better policy assurance, the UE(s) can get more
network resources to assist in training and inference.
13\. The SMF sends a notification to PCF based on the subscription in step 1
and step 8. The PCF forwards the notification to the AF.
14\. The AF may update the configuration information based on the information
received in step 13 and send the updated configuration to the PCF.
15\. The UE(s) leave area 1 and enter area 2. The PCF removes the policies of
area 1 or updates the policies of area 1 to area 2 based on the information
received from the AF in step 1.
16\. The SMF may take appropriate actions to reconfigure the User plane of the
PDU Session, such as determining a target DNAI and adding, replacing or
removing a UPF in the data path to e.g. act as an UL CL or a Branching Point.
17\. The SMF may send a notification to the AF that User Plane has changed or
other notifications based on the subscription from the AF.
18\. UE(s) initiate DNS request to get IP address of AI/ML server of area 2.
19\. UE(s) start AI/ML operations with AI/ML server under the policies of area
2.
### 6.9.3 Impacts on services, entities and interfaces
PCF:
\- Support receiving additional parameters provisioned by AF for AI/ML service
policies.
NEF:
\- Provide a unified parameter provisioning service API for AI/ML operations;
\- Support receiving AI/ML operations related parameters from AF including
routing, QoS and network resource monitoring, etc.;
UDR:
\- The services (e.g. Nudr_DM_Notify) are extended according to the AI/ML
operations related parameters.
## 6.10 Solution #10: Application Data Transfer to support planned and event
driven AI/ML traffic transport
### 6.10.1 Description
This KI is to address KI#5: 5GC Enhancement to enable Application AI/ML
Traffic Transport.
NOTE: Although this solution is motivated by the BDT framework, it is a new
5GC service, the any reference to the existing BDT procedures and services
will be replaced by new service name during the normative phase once all the
extensions are finalized during the conclusion phase.
In clause 6.40.1 of TS 22.261 [2], three types of Application AI/ML operations
were considered when defining the stage-1 requirements, and they are:
a) AI/ML operation splitting between AI/ML endpoints.
b) AI/ML model/data distribution and sharing over 5G system.
c) Distributed/Federated Learning over 5G system.
Among the above three operation types, type b) above could involve a specific
UE or a group of UEs, where as type c) above will target a group of UEs that
would consume a high volume of network resources, it is very inefficient to
have the AF to provision and to update individual transport policy for UE one-
by-one when supporting the group transmission. It would be beneficial if the
AF can request prior to the transmission whether there will be sufficient QoS
resources to support the 3 operations described above and negotiate with 5GS
for when the transmission can take place.
Network capacity planning is a major challenge for any mobile operator. The
application AI/ML data transfer can be non GBR type (e.g. \"please start the
transmission for this model at midnight\") or GBR type that requires some
resource reservation aimed to achieve the transmission requirements. (e.g.
\"the AF will start the transmission for this model 10 minutes later and aims
to complete the transmission in 1 second, this would mean that some 5QI, GBR,
PDB or PLR requirements are set for this type of traffic\"). In order to
enable the MNOs to assist ASPs to transport their Application AI/ML traffic in
a more controlled time-table under the considerations of the availability of
network resources, this solution proposes to support pre-negotiation between
the AF and the 5GS to agree on the target time window which is selected from a
list of time windows that are coordinated between the ASP and the MNOs for the
traffic transmission to support the Application AI/ML traffic. The Application
AI/ML traffic could be non GBR type or GBR type. 5GC may further refer to the
5GC network analytics and other assistance information to derive the list of
the desired time windows with their respective QoS parameters for the data
transfer.
After considering the above requirements for the Application AI/ML data
transfer, this solution proposes to introduce Application Data Transfer (ADT)
service to address this particular KI#5. When examining the clause 6.1.2.4 of
TS 23.503 [5], today BDT framework supports two different ways of activating
data transfer policies, One is for a future PDU session and another one is for
an existing PDU session. This solution focuses on the activation data transfer
policies for an existing PDU session according to the ADT transfer policies.
The ADT service as specified in this solution supports the negotiation of the
ADT transfer policy in advance of the desired data transfer time-table and
location, data volume and data transfer policy (e.g. bit rate for one UE or a
group of UEs, charging keys, etc.), including the ability to update the ADT
policy based on changing network conditions (e.g. triggered by NWDAF
notifications to PCF) in order to support the Application AI/ML group data
transfer (e.g. FL data transfer) that meets the operational behaviours as
described in clause 6.40.2 of TS 22.261 [2]:
\- the in-time data transfer,
\- the event driven (e.g. responding to the threshold reporting of \"Network
Performance\" from NWDAF for the area of interest and time window, UE\'s
location etc.) data transfer, and
\- the dynamic policy adaptation data transfer
This solution supports the ADT data transfer time window negotiation similar
to the BDT negotiation as specified in clause 5.2.5.5 of TS 23.502 [4] (i.e.
Desired Time Window) and clause 5.6.2.3 of TS 29.554 [15] (i.e. desTimeInt).
In this solution for ADT, a list of ADT data transfer time windows are
requested by the AF during the ADT Transfer policy negotiation with the 5GC.
The AF subsequently will select a specific negotiated ADT Transfer policy
which includes the specific time window to proceed with the ADT data transfer
based on the negotiation response from 5GC.
According to clause 7.10 of TS 22.261 [2], there are KPIs defined for the QoS
performance for the data transfer to support split AI/ML inference, AI/ML
model download and FL learning. In order to enable ADT to transport the
Application AI/ML traffic, the ADT Transfer Policy supports the list of
primary and alternative QoS profiles for the additional QoS parameters as
described in clause 5.7 of TS 23.501 [3] as follow to support Application
AI/ML traffic:
\- Packet Delay Budget for UL/DL per UE time window;
\- Maximum Packet Loss Rate for UL/DL per UE time window;
\- Guaranteed and Maximum Bitrate for UL/DL per UE per time window.
NOTE: The QoS parameters for uplink and downlink may be asymmetrical based on
the KPIs that were defined in clause 7.10 of TS 22.261 [2].
In addition, this solution also proposes to merge with Solution#14 which
addresses minimum guarantee of the QoS performance among the selected FL
members when they are participating in the FL operation. When supporting the
FL operation as described in TR 22.874 [8], [P.R.7.4-002] and related
description, one fundamental important consideration is to eliminate bias -
allowing diverse users and devices to participate and bring to the learning
task diversity of input data, as the users will have different attributes. It
is important not to merely focus on the \'best performing devices\' in the
federation and drop the rest. It may increase the performance in terms of time
to iterate the synchronous federated learning task to drop stragglers, but
this will reduce the diversity of the data set and introduce bias. This
phenomenon as described is referred as \"flock\".
It is important to strike a right balance between performance and diversity
when proceeding with the FL operation. The AF may not necessarily select the
best performance UEs, but certain minimum performance should be guaranteed for
the selected UEs in order to sustain the effectiveness of the FL operation. 5G
system should avoid risking selected UE performance for participating in the
federated learning process that are caused by an inappropriate communication
resource allocation. The mobile network, at least, should guarantee the
minimum required QoS for the selected UEs to ensure the adequate performance
for the FL operation. In the context of this solution, Flock QoS refers to a
set of QoS parameters that specifies the minimum QoS performance for a group
of UEs.
Also as defined in the clause 6.1.2.4 of TS 23.503 [5], the PCF refers to the
\"Network Performance\" analytics and/or \"DN Performance\" analytics to
determine the candidate list of ADT policies. In order to assist PCF to obtain
a better estimate of the QoS parameters for the BDT policy, this solution
proposes to enhance the \"Network Performance\" and/or \"DN Performance\"
analytics as defined in clauses 6.6 and/or 6.14, respectively, of TS 23.288
[6] with an added set of input parameters as described in clause 6.10.2.1
below in order to enable the NWDAF to derive the performance statistic and
predictions for the set of QoS parameters among the UEs.
Further details of the proposal are described in the following Solutions
clause.
### 6.10.2 Solutions
The intent of this solution is to define the ADT data transfer mechanism to
support the Application AI/ML data transfer.
The solution defines the ADT transfer policy which includes a list of QoS
profiles corresponding to their respective Desired Time Window. The solution
includes the ability to negotiate a list of time windows between the AF and
the 5GC. The solution includes also the support for individual QoS as defined
in clause 5.7 of TS 23.501, specifically the average and maximum Packet Delay
for UL/DL, average and maximum Packet Loss Rate for UL/DL and guaranteed and
maximum Traffic Rate for UL/DL corresponding to a particular Desired Time
Window.
This solution also proposes to enhance the Network Performance analytics or DN
Performance analytics for NWDAF as described in TS 23.288 [6] to support the
additional QoS performance analytics for the new QoS parameters (i.e. PDB, PLR
and traffic rate) as described earlier in clause 6.10.1 above. More
specifically, the additional QoS parameters are average and maximum Packet
Delay for UL/DL, average and maximum Packet Loss Rate for UL/DL and average,
minimum and maximum Traffic Rate for UL/DL per UE per Time Window. PCF may
subscribe to such analytics to assist its decision to derive the AAMDT
Transfer policy for the selected time window(s).
This solution also defines the ADT negotiation procedures similar to the
procedures as defined in clause 4.16.7.2 of TS 23.502 [4] to support the
ability of the AF to request a list of ADT time windows and the associated QoS
support. In addition, it describes the procedure on how AIML AF discovers its
serving NEF as well as the need for the NEF to authenticate/authorize the AIML
AF. Finally, this solution clarifies the procedures on how ADT can be applied
to the existing or future PDU session.
As described in clause 6.1.2.4 of TS 23.503, one or more negotiated BDT
policies could be provided by PCF to AF via NEF. The AF will then select one
of them and inform the PCF about the selected ADT Transfer policy together
with the ADT Transfer Reference ID. Prior to the desired time window started
for the Application AI/ML data transfer, the AF will then initiate the AF
request towards PCF to apply the selected ADT Transfer policy to the selected
target UEs\' PDU sessions. The PCF will then determine the appropriate PCC
rules according to the negotiated ADT Transfer policy for each these PDU
sessions.
In addition, this solution also proposes to merge with Solution#14 which
addresses minimum guarantee of the QoS performance among the selected FL
members when they are participating in the FL operation.
#### 6.10.2.1 ADT Mechanism to support Application AI/ML data transfer
In this clause, the solution borrows the descriptions of the BDT service in
order to describe the AF to request a list of Desired time windows for ADT
similar to the input parameter for the Nnef_BDTPNegotiation_Create as
described in clause 5.2.6.6.2, but with the additional primary and alternative
QoS profiles (e.g. PDB, PLR etc.) corresponding to the list of Desired time
windows proposed by this solution for the specific Application AI/ML data
transfer requested by the AF.
In order to support the KPIs that have been defined in TS 22.261 [2], clause
7.10 to support the QoS performance for the data transfer for various
Application AI/ML traffic, this solution proposed the ADT Transfer policy with
the following QoS parameters which apply to the primary and alternative QoS
profiles requested by the given AF:
\- Packet Delay for UL/DL per UE per Time Window
\- Maximum Packet Loss Rate for UL/DL per UE per Time Window;
\- Guaranteed and Maximum Bitrate for UL/DL per UE per Time Window;
During the ADT Transfer policy negotiation and before the activation
procedures , the PCF may subscribe to NWDAF for the Network Performance
Analytics and/or DN Performance Analytics as described in clauses 6.6 and 6.14
of TS 23.288 [6]. to collect the performance statistic and to derive the
performance prediction on those QoS parameters for the given time window.
Based on the analytics report, the PCF may propose to re-negotiate the ADT
Transfer policy prior to the activation of the corresponding BDT time window.
In order to enhance the Network Performance or DN Performance analytics to
report the prediction of the QoS performance, this solution proposes to add
the following input parameters to the Network Performance Analytics as
described in clauses 6.6 and 6.14 of TS 23.288 [6] together with the UE\'s
performance data collected from the AF as shown in Table 6.10.2.1-1 below to
enable the NWDAF to derive the extended Network Performance or DN Performance
analytics for the set of the QoS performance statistic and predictions
corresponding to the specified time window: i.e.:
\- The identification of the target application(s) for the analytics
information, i.e. Application ID(s), and the corresponding IP address/FQDN
Table 6.10.2.1-1: Performance Data from AF
* * *
Information Source Description UE identifier AF IP address of the UE at the
time the measurements was made. UE location AF The location of the UE when the
performance measurement was made. Application ID AF To identify the service
and support analytics per type of service (the desired level of service). IP
filter information AF Identify a service flow of the UE for the application.
Locations of Application AF/NEF Locations of application represented by a list
of DNAI(s). The NEF may map the AF-Service-Identifier information to a list of
DNAI(s) when the DNAI(s) being used by the application are statically defined.
Application Server Instance address AF/NEF The IP address/FQDN of the
Application Server that the UE had a communication session when the
measurement was made. Performance Data AF The performance associated with the
communication session of the UE with an Application Server that includes:
Average/Maximum Packet Delay, Average/Maximum Loss Rate and
Average/Minimum/Maximum Throughput. Timestamp AF A time stamp associated to
the Performance Data provided by the AF.
* * *
Based on the input parameters above, the NWDAF will then subscribe to the
\"Performance Data from AF\" similar to clause 6.4.2 or clause 6.14.2 in TS
23.288 [6] either directly for trusted AFs by invoking
Naf_EventExposure_Subscribe service (Event ID = Performance Data, Event Filter
information = Area of Interest, Application ID) as defined in TS 23.502 [4],
or indirectly for untrusted AFs via NEF by invoking
Nnef_EventExposure_Subscribe service (Event ID = Performance Data, Event
Filter information = Area of Interest, Application ID) where NEF translates
the Area of Interest into geographic zone identifier(s) in order to derive the
performance statistic and prediction indicators for the following new QoS
parameters corresponding to the specific time window:
\- Maximum/Average Packet Delay for UL/DL per UE per Time Window
\- Maximum/Average Packet Loss Rate for UL/DL per UE per Time Window
\- Maximum/Minimum/Average Traffic Rate for UL/DL per UE per Time Window
#### 6.10.2.2 ADT Negotiation for future PDU session to support Application
AI/ML data transfer
This clause presents further clarifications on how to leverage the ADT
procedures for negotiation of future background data transfer to support the
Application AI/ML data transfer.
Prior to the establishment of PDU session to support the ADT within a
specified time-window, AF initiates requests to its serving NEF to
(re)negotiate ADT Transfer policy that might have been pre-provisioned or
earlier negotiated and stored in the UDR.
Figure 6.10.2.2-1: ADT Transfer Policy Negotiation for future PDU session to
support Application AI/ML data transfer
The procedures as shown in Figure 6.10.2.2-1 above borrows the descriptions of
the BDT procedures specified in TS 23.502 [4], clause 4.16.7.2 to support
negotiation for future background data transfer. The following descriptions
focus on the changes to the existing procedures:
Prior to the transport of the Application AI/ML data within the specified
time-window, the AF negotiates with the 5G Core for the ADT policies that
apply to its given Application AI/ML data transfer corresponding to the
authorized 3rd party (i.e. AF), the AF is required to discover its serving
NEF, if it has not done so, using the mechanism as described in clause 6.3.14
of TS 23.501 [3].
In step 1a, to the list of parameters for Nnef_ADTNegotiation_Create Request
from AF similar to the procedure as described in clause 4.16.7.2 of TS 23.502
[4] now includes the list of Desired time windows with their associated
primary or alternative QoS profile, the AI/ML AF may include also the latency
and reliability requirements for the specific Application AI/ML operation as
described in clause 6.10.2.1.
Furthermore, if \"flock\" scenario applies to the group of selected FL UEs who
are to be participated in this BDT session, the ADT Transfer policy
automatically takes into account the Flock QoS policy into consideration by
specifying the minimum guaranteed QoS requirements, via proper QoS attributes,
e.g. Packet Delay Budget.
NOTE 1: Flock QoS is determined by an AF based on AF\'s internal logic
(policy). For example, the AF can determine the flock QoS based on the UEs and
the network input data and the FL trigger conditions.
In step 1b, the NEF may authenticate the AF and authorize the ADT request from
the AF. If the given AF is not authenticated and authorized, the NEF will
reject AF\'s request through the Nnef_ADTNegotiation_Create Response, and the
following steps are skipped.
In step 2, the list of parameters for Npcf_ADTPolicyControl_Create Request
from AF as described in clause 4.16.7.2 of TS 23.502 [4] now includes the list
of Desired time windows, the NEF should include the added latency and
reliability requirements for the specific Application AI/ML operation if they
have been received from the AF.
In step 4, PDB and PLR etc. QoS parameters may also be provided by UDR as part
of the ADT policies to the PCF. This may happen if the PCF (or another PCF)
had received from the AF/NEF in a previous ADT negotiation regarding the
latency and reliability requirements which are described in the form of PDB
and PLR etc. QoS parameters, and are stored in the UDR.
In Steps 5, 6 the PCF refers to the requested QoS requirements specified by
the AF. As described in current step 5, the PCF subscribe to with the NWDAF as
defined in clause 6.6 of TS 23.288 [6] to request the Network Performance
analytics and/or DN Performance for the set of QoS parameters\' performance
for each Desired time window from the list and the Network Area Information.
The PCF will then determine the PDB, PLR etc. QoS parameters based on the QoS
requirements from the AF for the corresponding Desired time window(s) which
may be based on the reports of the Network Performance and/or DN Performance
analytics to be included in the set of ADT Transfer policies The PCF may also
invalidate some of the old ADT Transfer policies. The PCF sends the final set
of ADT Transfer policies to the AF via NEF together with the ADT Transfer
Reference ID.
After the ADT Transfer policy negotiation, if the AF decides to select an
alternative ADT Transfer policy (e.g. data rate reduction, relaxing delay
constraints of planned and event driven traffic etc.) which may include the
Flock QoS policy consideration with the minimum guaranteed QoS requirements as
the result of certain AI/ML operation decision, the AF may trigger step 8 to
update the corresponding PCF via the support of NEF for the new selected ADT
Transfer policy.
NOTE 2: It is not in the scope of this solution to specify the event or
consideration that triggers the AF decision to update the ADT Transfer policy.
In step 12, the additional QoS parameters may be added to the UDR by the PCF
as part of the updated ADT Transfer policies.
#### 6.10.2.3 Activation or Updating/Removing ADT Transfer to a PDU Session
This clause describes two ways to apply the negotiated ADT Transfer policy for
a given Application AI/ML data transfer to the PDU Session(s) for given UE(s)
- i.e. (a) activating the ADT Transfer policy as described in clause 6.10.2.2
above to a PDU session; and (b) adding PDU session of the target UE to the ADT
Desired time window by applying the ADT Transfer policy.
For the activation of the previously negotiated ADT Transfer policy to a PDU
session to support the Application AI/ML data transfer, before the start of
the ADT Transfer transfer Desired time window, the AF triggers
Npcf_PolicyAuthorization_Create/Update via NEF or directly to PCF. The AF
discover the PCF (may be via NEF) via BSF by invoking
Nbsf_Management_Discovery. In both cases, the PCF will then leverage the
negotiated ADT Transfer policy to generate the PCC rules to support the
establishment of the future PDU session(s). For further details on how to
apply the previously negotiated ADT Transfer policy can be referred to clause
6.1.2.4 of TS 23.503 [5] and clause 4.15.6.8 of TS 23.502 [4].
If the PDU session has been established and the AF would like to
apply/update/delete the ADT Transfer policy to such existing PDU session for
individual UE to support the Application AI/ML data transfer, then the AF
invokes the Npcf_PolicyAuthorization_Create/Update service directly to PCF
(via the N5 interface). The AF may discover the PCF via BSF by invoking
Nbsf_Management_Discovery. The AF also provides the ADT Reference ID together
with the AF session information to the PCF that serves the PDU session. The
PCF authorizes the AF request. If the PCF determines that the AF can\'t be
authorized, it rejects the AF request. Once the PCF authorizes the AF request
and if the AF request is to apply or to update the PDU session with the ADT
Transfer policy,, the PCF retrieves the corresponding ADT Transfer policy from
UDR to derives the PCC rule for the BDT according to the transfer policy which
may include the Flock QoS policy consideration with the minimum guaranteed QoS
requirements. In addition, the AF may specify the individual QoS parameters as
described in clause 6.1.3.22 of TS 23.503 [5] different than the ADT Transfer
policy. The PCF then updates the SMF with corresponding new PCC rule(s) with
PCF initiated SM Policy Association Modification procedures as described in TS
23.502 [4], clause 4.16.5.2. Further details on how AF applies the ADT
Transfer Policy to an existing session are provided in clause 6.1.2.4 of TS
23.503 [5].
If the AF would like to remove the ADT Transfer policy for a PDU session of a
given UE, AF invokes the Npcf_PolicyAuthorization_Delete service directly to
PCF. The AF also provides the ADT Reference ID together with the AF session
information to the PCF that serves the PDU session. The PCF authorizes the AF
request as described above before removing the PDU session from the ADT.
Figure 6.10.2.3-1: Applying/Updating/Removing ADT Transfer Policy to a PDU
session to support Application AI/ML data transfer
1\. AF decides to apply/update/delete the ADT Transfer policy of a given
application AI/ML data transfer for PDU session, then the AF will, at the time
the data transfer is about to start, provide, for the target UE, the ADT
Reference ID together with the AF session information to the PCF that serves
the PDU session (via the N5 interface). Note that AF may need to discover the
UE\'s serving PCF via NEF with the support of BSF. This
Npcf_PolicyAuthorization_Create/Update/Delete service as described in clause
5.2.5.3.2 of TS 23.502 [4] is to authorise an AF request and to create
policies as requested by the authorized AF for the PDU Session to which the AF
session is bound. More specifically, the added latency and reliability
requirements as described in clause 6.10.2.1 should be included in the AI/ML
AF request.
NOTE: It is not the scope of this solution to specify the event(s) or
consideration(s) that triggers the AF decision to apply the ADT Transfer
policy to an existing PDU session.
2\. The PCF authorizes the AF request.
3\. If the PCF determines that the AF can\'t be authorized, it rejects the AF
request by including the rejection in
Npcf_PolicyAuthorization_Create/Update/Delete response. All the subsequent
steps below are skipped.
4-5. Once the PCF authorizes the AF request, if the AF request is to create or
to update the ADT Transfer policy for the given PDU session, the PCF retrieves
the corresponding ADT Transfer policy from UDR to derives the PCC rule(s) for
the ADT according to the transfer policy that has been pre-provisioned which
may include the Flock QoS policy consideration with the minimum QoS
requirements. In addition, the AF may specify an individual QoS parameters as
described in clause 6.1.3.22 of TS 23.503 [5] to replace the BDT policy for
the given PDU session.
6\. The PCF updates the SMF with corresponding new PCC rule(s) with PCF
initiated SM Policy Association Modification procedures as described in clause
4.16.5.2 of TS 23.502 [4].
Further details on how PCC rules are applied to either future or an existing
PDU session are provided in clause 6.1.2.4 of TS 23.503 [5].
#### 6.10.2.4 NWDAF Analytics support for ADT warning notification
In order to ensure that sufficient network resources are available to support
the ADT when transfer window is approaching, this solution proposes the
Procedure for ADT warning notification similar to the concept of the BDT
warning notification as described in clause 4.16.7.3 of TS 23.502 [4] to
leverage several QoS related Analytic as described in TS 23.288 [6] to assess
the likelihood of a QoS change for an Analytics target period in the future in
a certain area. This solution borrows the descriptions of the BDT procedures
to clause 4.16.7.3 of TS 23.502 [4] with the modifications are shown in
\"**_bold italic_** \" below.
+----------------------------------------------------------------------+ | _Proposed changes to clause 4.16.7.3 of TS 23.502 [4]._ | | | | _1\. The negotiation for Application Data Transfer (ADT) is | | completed. In addition,__dependent on_ _the PCF_ _\'s logic and | | local policy, the PCF_ _has subscribed to_ _any of the NWDAF_ _| | analytics,__such as the_ _\"Network Performance\"__, \"DN | | Performance\" etc.__from NWDAF for the area of interest and the | | list of time window of a background data transfer policy following | | the procedure and services described in TS 23.288 [6], including a | | Reporting Threshold in the Analytics Reporting information. The | | value for Reporting Threshold is set by the PCF based on operator | | configuration._ | | | | _2\. The PCF is notified with the network performance, analytics in | | the area of interest from the NWDAF when the NWDAF determines that | | the network performance goes below the threshold as described for | | the_ _subscribed NWDAF analytics such as the_ _Network Performance, | | etc. analytics in TS 23.288 [50]._ | +----------------------------------------------------------------------+
### 6.10.3 Impacts on services, entities and interfaces
AIML AF shall be able to provide the list of ADT Desired time windows with the
corresponding set of primary and alternative QoS parameters that support the
latency and reliability requirements to satisfy the AMMT KPIs as specified in
TS 22.261 [2] in ADT negotiation request.
AIML AF determines and requests external provisioning of the flock QoS for the
federated group i.e. minimum QoS requirement for the as part of the ADT
Transfer policy.
NWDAF shall be able to provide Network Performance analytics including
additional parameters such as average/maximum packet delay, average/maximum
packet loss rate, average , minimum and maximum traffic rates for UL and DL
during the ADT Transfer policy negotiation procedure.
During the activation of the ADT Transfer Time Window, PCF shall be able to
refer to the ADT Transfer policy from the AIML AF and possible from the NWDAF
for the QoS performance and predictions reports from the Network Performance
and/or DN Performance analytics to derive the PCC rules for the target Desired
Time Window. Specifically, the PCF shall be able derive the set of QoS
parameters, which may include the Packet Delay Budget (PDB) for UL/DL per UE
per Time Window or/and Maximum Packet Loss Rate (PLR) for UL/DL per UE per
Time Window or/and Guaranteed/Maximum bit rate for UL/DL per UE per Time
Window (on top of the original ADT related PCC rules), and store/retrieve them
in/from the UDR as part of the ADT transfer policy.
PCF shall be available to re-evaluate conditions for the ADT data transmission
at any time (prior to the actual transmission) based on the outcome on the
enhanced QoS performance monitoring from the Network Performance analytics of
NWDAF, which supports the additional QoS parameters (e.g. average/maximum
packet delay, average/maximum packet loss rate, minimum/guaranteed/ maximum
bitrate) the PCF shall be able to re-negotiate the ADT transfer policy with
the AF/NEF.
NEF shall be able to consider latency and reliability requirements received
from the AF in ADT negotiation request as part of authorizing the AF\'s
permission to submit the ADT request.
## 6.11 Solution #11: Traffic routing enhancements for Application AIML
Traffic Transport
### 6.11.1 Description
This solution addresses key issue #5: \"5GC Enhancements to enable Application
AI/ML Traffic Transport\" and KI#1 \"Monitoring of network resource
utilization for support of Application AI/ML operations\".
The Application AI/ML traffic, i.e. data or ML model for AI/ML operations in
application layer, can be transmitted as specific QoS flow(s) which is/are
different from the QoS flows used for common application data (i.e. non-AI/ML
related data over the application layer). In this solution, the NWDAF collects
data and derives analytics information on the QoS flow(s) for Application
AI/ML traffic transmission, and based on the analytics information the SMF
performs traffic routing optimization for the Application AI/ML traffic.
### 6.11.2 Procedures
Figure 6.11.2-1 shows the procedure that the SMF performs traffic routing for
Application AI/ML traffic based on analytics information from the NWDAF.
Figure 6.11.2-1: Procedure of traffic routing enhancements for Application
AIML Traffic
1\. Based on the trigger from the application layer, the UE initiates the PDU
Session modification procedure, or, based on the AF request, the network
initiates the PDU Session modification procedure, as specified in TS 23.502
[4], to establish the QoS flow(s) for transmission of the Application AI/ML
traffic between the UE and AF.
2\. The AF of the AI/ML application may trigger the procedure of AF influence
on traffic routing for the AI/ML application traffic, i.e. data or ML model
for AI/ML operations in application layer.
Step 1-7 as described in clause 4.3.6.2 in TS 23.502 [4] is performed with the
following enhancements:
\- in step 1, the AF provides the Application AI/ML traffic related parameters
(e.g. DNAI) in the AF request.
\- in step 5, the PCF may use service experience analytics per UP path as
defined in clause 6.4.3, TS 23.288 [6], to provide an updated list of DNAI(s)
for the Application AI/ML traffic, to the SMF.
\- in step 6, the SMF may subscribe to service experience analytics and/or DN
Performance analytics per UP path, as defined in clause 6.4.3, TS 23.288 [6],
for analytics of the Application AI/ML traffic transmission status, possibly
with the following enhancements:
\- the QFI(s) of the QoS flow(s) carrying the Application AI/ML traffic are
included in the Analytics Filter Information.
\- the output analytics contains the QoS flow level data (e.g. QFI, QoS flow
Bit Rate, QoS flow Packet Delay) of the QoS flow(s) carrying the Application
AI/ML traffic.
The SMF then determines whether the PSA UPF needs to be changed or additional
PSA UPF needs to be added for transmission of the Application AI/ML traffic in
the QoS flow(s) of the PDU Session, based on the analytics information of
Application AI/ML traffic transmission status. If so, the SMF may take the
actions as described in step 6 of clause 4.3.6.2 of TS 23.502 [4].
### 6.11.3 Impacts on services, entities and interfaces
The mechanisms defined in the current specifications (i.e. clauses 4.3.5 and
4.3.6 of TS 23.502 [4], TS 23.288 [6]) for traffic routing and network
analytics are reused, with the following enhancements:
\- SMF: subscribes to analytics information of Application AI/ML traffic
transmission status from the NWDAF, and change or add additional PSA UPF for
the PDU Session for Application AI/ML traffic transmission.
\- NWDAF: provides analytics information of Application AI/ML traffic
transmission status to the SMF. The analytics request and output analytics for
Service Experience (or DN Performance) analytics needs to be enhanced.
## 6.12 Solution #12: Enhanced charging for Application AIML traffic transport
### 6.12.1 Description
This solution addresses the following aspect of key issue #5 \"5GC
Enhancements to enable Application AI/ML Traffic Transport\":
\- Whether new 3GPP charging mechanisms are required for identification and
charging of Application AI/ML traffic over the user plane that cannot be
attributed or charged to the end user?
The Application AI/ML traffic, i.e. data or ML model for AI operations in
application layer, can be transmitted as specific QoS flow(s) which is/are
different from the QoS flow(s) used for common application data (i.e. non-
AI/ML related data over the application layer). In this solution, the NWDAF
collects data and derives analytics information on the QoS flow(s) for
Application AI/ML traffic transmission, and the PCF may set charging rules for
the chargeable party, configures PCC rules and updates SM policy for the
Application AI/ML traffic based on the analysis information, so as to perform
the enhanced charging for Application AI/ML traffic transmission.
NOTE: Charging aspects will be done in collaboration with SA WG5.
### 6.12.2 Procedures
Figure 6.12.2-1 shows the procedure that the PCF performs enhanced charging
for Application AI/ML traffic.
Figure 6.12.2-1: Procedure of enhanced charging for Application AI/ML traffic
1\. An PDU Session is established/modified as specified in TS 23.501 [3]. The
Application AI/ML traffic, i.e. data or ML model for AI operations in
application layer, can be transmitted as specific QoS flow(s) in the PDU
Session.
2\. The AF sends a Nnef_ChargeableParty_Create request message (AF Identifier,
UE address, Flow description(s) or External Application Identifier, Sponsor
Information, Sponsoring Status, DNN, S-NSSAI, volume of ML model to be
transferred per UE, ML Model transmission time window, network area
information, maximum aggregated bitrate) to the NEF, to request to become the
chargeable party for transmission of Application AI/ML traffic. Step 1in the
procedure of setting a chargeable party at AF session setup (if setted, change
of the chargeable party during the session) as specified in clause 4.15.6.4 of
TS 23.502 [4] is performed, with the following enhancements:
\- parameters that specify the requested Application AI/ML traffic
transmission are included, i.e. volume of ML model to be transferred per UE,
ML Model transmission time window, network area information, maximum
aggregated bitrate, etc.
If the application AI/ML traffic has similar characteristics as the background
data transfer, the background data transfer policy negotiation as specified in
clause 4.16.7 of TS 23.502 [4] can be performed before this procedure; and
then a Background Data Transfer Reference ID, instead of the parameters that
specify the requested Application AI/ML traffic transmission, is included in
the Nnef_ChargeableParty_Create request message.
3\. The NEF may authorize the AF request based on operator configuration and
sends a Npcf_Policy_Create request message to the PCF, which contains IP
filter information, sponsored data connectivity information and Sponsoring
Status (if received from the AF), as specified in step 2-3 of clause 4.15.6.4
of TS 23.502 [4].
4-5. [Optional] The PCF subscribes to the analytics information of the
Application AI/ML traffic transmission status from the NWDAF. The PCF invokes
a Nnwdaf_AnalyticsSubscription_Subscribe (Analytics ID = Service Experience
(or DN Performance), Target of Analytics Reporting = a UE or a group of UEs,
Analytics Filter Information = (Application ID, S-NSSAI, DNN, Area of
Interest, anchor UPF ID, DNAI, Application Server Address(es), QFI(s)),
Analytics Reporting Information = Analytics target period) towards the NWDAF,
and receives the Nnwdaf_AnalyticsSubscription_Notify containing the analytics
information, as described in clause 6.4 (or clause 6.14) of TS 23.288 [6].
The PCF determines and/or updates the charging rules of Application AI/ML
traffic transmission in PCC rules according to the analysis information of
Application AI/ML traffic transmission and the request in step 3.
Specifically, the charging models and corresponding charging rates can be set
based on the analytics of (possibly) offered service experience or performance
for Application AI/ML traffic transmission.
The charging rules may include one or more of the following information, as
enhancements to PCC charging specified in clause 4.3.2.2 of TS 23.503 [5]:
\- Volume based charging.
The existing mechanism is used where different rates are applied according to
the volume of ML Model of Application AI/ML traffic.
\- Time based charging.
The existing mechanism is used where different rates are applied according to
the ML Model transmission time window of Application AI/ML traffic.
\- Volume and time based charging.
The existing mechanism is used where different rates are applied according to
the weighted value of ML Model volume, ML Model transmission time window and
network area information.
\- No charging.
6\. The PCF sends a Npcf_Policy_Create response message to the NEF. The
message contains the result indicating whether the request to become the
chargeable party for Application AI/ML traffic transmission in the PDU Session
is granted, and the granted charging rules.
7\. The NEF sends a Nnef_ChargeableParty_Create response message to the AF.
8\. The PCF sends an Npcf_SMPolicyControl_UpdateNotify to the SMF as specified
in clause 4.16.5 of TS 23.502 [4], with the following enhancements:
\- The PCF includes the latest SM policy information which contains the PCC
rules and usage report trigger about Application AI/ML traffic transmission in
the Npcf_SMPolicyControl_UpdateNotify. The PCF may determine and/or modify the
authorized QoS parameters of Application AI/ML traffic transmission in PCC
rules based on the analysis information of Application AI/ML traffic
transmission.
NOTE: If it is detected that the data rate of Application AI/ML traffic
transmission is too low, the PCF adjusts the 5QI, GFBR, MFBR, etc. in
authorized QoS parameters.
9\. According to the received usage report trigger from the PCF, the SMF
determines the Usage Reporting Rule (URR) for transmitting the Application
AI/ML traffic. The SMF triggers the procedures as described in TS 23.502 [4]
to:
\- send the URR to the UPF for reporting the relevant usage information of
Application AI/ML traffic. According to the reporting rule, the UPF collects
the usage information of Application AI/ML traffic and reports it to the SMF.
\- send the information reported by the UPF with session and subscriber
related information to the PCF and other charging function entities to perform
enhanced charging for Application AI/ML traffic.
### 6.12.3 Impacts on services, entities and interfaces
The mechanisms defined in the current specifications in TS 23.502 [4] and TS
23.503 [5] of charging for sponsored data connectivity with a chargeable party
are reused for charging on Application AI/ML traffic, with the following
enhancements:
\- The PCF determines and/or updates PCC rules for charging enhancement for
Application AI/ML Traffic transmission, which may done based on analytics
information of Application AI/ML traffic transmission status from the NWDAF.
\- The SMF provides Usage Reporting Rule (URR) for Application AI/ML traffic
transmission to the UPF, and sends the usage information reported by UPF with
session and subscriber related information to the PCF and other charging
function entities for performing enhanced charging for Application AI/ML
traffic.
\- The UPF collects the usage information of Application AI/ML traffic and
reports it to the SMF.
## 6.13 Solution #13: Support Application AI/ML Traffic Transport
### 6.13.1 Description
In this solution, it is assumed that the UE (or the AI/ML Application client
on the UE) establishes a connection to the AI/ML AF in the MNO domain or
external to MNO domain over user plane via a PDU session. The AI/ML AF
exchanges the AI/ML traffic(s) with the UE (or the AI/ML Application client on
the UE) over the established PDU session. This is similar to existing
procedure as defined by clause 6.2.8.1 of TS 23.288 [6] with below
enhancements and clarifications:
For both an AI/ML AF in trusted domain and an AI/ML AF in untrusted domain,
the SLA between the MNO and the AI/ML Application Service Provider (e.g. an
ASP) determines the AI/ML transport configuration information (per AI/ML
Application ID) with any combinations of:
\- The AI/ML AF address: This can be FQDN(s) and/or IP address(es) and or non-
IP address(es) that the UE or the AI/ML application client on the UE can
communicate to the AI/ML AF or any associated AI/ML applications server(s).
\- The AI/ML DNS server address: This can be optionally used by the UE or the
AI/ML Application client on the UE to resolve the AI/ML AF address from a FQDN
to the IP address of the AI/ML AF or any associated AI/ML application
server(s).
\- The authentication information that enable the AI/ML AF (or any associated
AI/ML applications servers) and the UE (or the AI/ML Application client on the
UE) to verify the authenticity the AI/ML traffic exchanged.
NOTE 1: The authentication, authorization and user consent info is out of SA
WG2 scope.
The AI/ML transport configuration information can be (pre)-configured by the
AI/ML Application Service Provider on the AI/ML AF and/ or the AI/ML
Application client on the UE.
The UE may indicate the possibility and capability to receive the AI/ML
transport configuration information as part of PCO during PDU Session
establishment and/or PDU session modification procedures. This capability
reflects that the UE (or application client on the UE) can translate the
FQDN(s) of the AI/ML AF or any associated AI/ML applications server(s) to the
IP addresses of the AI/ML AF or any associated AI/ML applications server(s).
If so, the UE can receive part of AI/ML transport configuration information
via the SMF, namely the AI/ML AF address, AI/ML DNS server address, and the
authentication information.
The AI/ML Service Provider may use the AF requests to influence the traffic
routing as defined by clause 4.3.6 of TS 23.502 [4], with enhancements
described below, either directly (for AI/ML AF in trusted domain) or
indirectly via NEF (AI/ML AF in untrusted domain) as part of PDU session
establishment and/ or modification procedure to update AI/ML transport
configuration information and/ or associated validity parameters.
The AI/ML AF request includes as Traffic Description any combinations of DNN,
S-NSSAI, Application Identifier, Application ID or traffic filtering
information that addresses the AI/ML AF or any associated AI/ML applications
server(s). If the request is via NEF, the AF request may use an AF service
Identifier as Traffic Description and then NEF translates that to any
combinations of DNN, S-NSSAI, Application Identifier, Application ID or
traffic filtering information. The request may also include several other
parameters in addition to AI/ML transport configuration information enabling
the 5GC (e.g. PCF and SMF) to compile/ generate the transport policy and
associated validity parameters. The AF request may include, for example:
\- Potential location information of AI/ML applications that could be in form
of DNAI(s) (e.g. for AI/ML AF in trusted domain),
\- Target UE Identifier(s) if transport configuration information is
applicable to an individual UE (e.g. for AI/ML operation splitting or AI/ML
model distribution), group of UEs (e.g. for AL/ML model distribution or
federated learning) or any UE (to support any types of AI/ML operation),
NOTE 2: For AI/ML AF in trusted domain, this can be as SUPI(s), internal UE
identifier(s) or internal group ID(s). For AI/ML AF in untrusted domain, this
can be as GPSI(s), external UE identifier(s) or external group ID(s) to be
translated to SUPI(s), internal UE identifier(s) or internal group ID(s) by
the NEF.
\- Spatial validity information if there is any geographic boundaries for
transport configuration information.
NOTE 3: For AI/ML AF in trusted domain, this can be TAI. For AI/ML AF in
untrusted domain, this can be as geographic zones to be translated to TAI by
the NEF.
\- Time validity information if there is any expiry time for transport
configuration information.
\- User Plane Latency Requirements if the AI/ML traffic type(s) are associated
with certain latency requirements to support AI/ML operation.
\- Indication(s) associated with certain AI/ML traffic type(s).
### 6.13.2 Procedures
Figure 6.13.2-1: AI/ML AF influence over Traffic routing/ reconfiguration for
AI/ML Traffic
In this procedure, it is assumed that UE has indicated the possibility and
capability to receive part of the AI/ML transport configuration information as
part of PCO during PDU Session establishment and/or PDU session modification
procedures.
1-2. The AI/ML AF (or NEF) may create, update (or delete from) the UDR the
AI/ML transport configuration information and other related parameters (e.g.
via UDM services).
3\. The UDR may store and update the AI/ML transport configuration information
and other related parameters (or remove the old parameters if any).
4\. The UDR may notify the PCF. This is based on an earlier subscription of
the PCF to modifications of AF requests. Any combinations of DNN, S-NSSAI,
AI/ML Application Identifier, SUPI, Internal Group Identifier can be used as
the data key to address the PCF.
5\. The PCF determines if the AI/ML PDU session(s) or transport policy are
impacted and may update SM polices and may notify the SMF based on SM Policy
Control Update.
6\. The SMF may take appropriate actions to reconfigure the User plane of the
PDU Session(s) transporting the AI/ML traffic(s). An example action includes
but not limited to:
\- Allocate a new Prefix to the UE.
\- Updating the UPF (in a target DNAI) with new traffic steering rules.
\- Determining whether to relocate the UPF (e.g. in coordination with AI/ML
Application server) considering requirements provided by the AI/ML AF, e.g. on
location information, target UE IDs, spatial validity, time validity, UP
latency or service requirements or other indication associated with the AI/ML
operation.
7\. The SMF may send the target DNAI to the AMF for triggering SMF/I-SMF
(re)selection and then inform the target DNAI information for the current PDU
session or for the next PDU session to AMF via
Nsmf_PDUSession_SMContextStatusNotify service operation.
8\. SMF may also update the UE on part of the AI/ML transport configuration
information together with other Session Management (SM) subscription
information. An example action includes:
\- Updating AI/ML AF address.
\- Updating AI/ML DNS server address.
\- Updating AI/ML authentication information.
NOTE 1: The UE or the AI/ML application client on the UE can correctly
translate the FQDN(s) of the AI/ML AF or any associated AI/ML applications
server(s) to the IP addresses of the AI/ML AF or any associated AI/ML
applications server(s). This is done by accessing a local, private or global
DNS server. As outlined above, the DNS server address or related
configurations for the UE can also be optionally shared as part of transport
configuration information if needed (e.g. for a private DNS).
NOTE 2: The AI/ML AF (or NEF) finds the PDU session(s) serving the SUPI, DNN,
S-NSSAI from UDM and the allocated IPv4 address or IPv6 prefix or both from
the SMF. The AI/ML AF (or NEF) stores the UE IP address or any other external
UE IDs during the PDU session establishment to the UE (or AI/ML application
client on the UE). The AI/ML AF (or NEF) may correlate and store a mapping of
the UE IP address (or any other external UE ID) and the SUPI retrieved (e.g.
via UDM/SMF), using the IPv4 address or IPv6 prefix allocated by the SMF.
### 6.13.3 Impacts on services, entities and interfaces
AI/ML AF:
\- To create AI/ML transport configuration information.
UDR:
\- To maintain AI/ML Application Data in clause AI/ML transport configuration
information.
PCF:
\- To interpret AI/ML request to generate the AI/ML transport policy.
SMF:
\- To reconfigure Traffic routing rules on UPF based on AI/ML transport policy
from the PCF.
\- To update UE on (part of) transport configuration information in addition
to other SM subscription information.
UE (or AI/ML Application Client on the UE):
\- To indicate capability to receive part of AIML transport configuration
Information via PCO.
\- To interpret AI/ML transport configuration information.
\- To interact with the AI/ML Application layer on the UE if any part of AIML
transport configuration (received via SMF) to be shared.
## 6.14 Solution #14: Flock QoS based Federated Learning Operation
Void.
## 6.15 Solution #15: QoS monitoring for AIML application
### 6.15.1 Description
This solution mainly addresses Key Issue #6. The QoS performance of the
participating UEs for an AIML application (e.g. Federated Learning) is
critical to the outcome. It\'s desired that the AIML application server may
receive real-time QoS performance information or prediction from the 5GC for
UEs participating a training session either before or during the session.
Application AIML operations, e.g. Federating Learning may require knowing
planned change of bitrate, latency, or reliability for a QoS flow to determine
whether a training session can be completed within the required window.
This solution proposes to extend Performance Measurement Functionality, which
was introduced in R16 for ATSSS, to support the real-time QoS measurement in
5GC. The external AIML application server requests and obtains the QoS
monitoring/prediction information from the 5GC via network exposure function.
The proposal uses the PMF capabilities, and it is independent from ATSSS.
When there are various applications that require PMF measurements and use the
same UPF/PMF, the PMF may create different PMF instances for these various
applications and each PMF instance operates independently, e.g. using
different PMF address and port. For example, one PMF instance may be operating
for a MA-PDU Session for ATSSS and another PMF instance may be operating for a
single-access PDU Session for AIML application.
When MA PDU Session is used for AIML applications, PMF configuration may
accommodate both the ATSSS operation and QoS monitoring needs for AIML
application. ATSSS operation uses the PMF measurements that apply to the
steering mode, and QoS monitoring for AIML application may share the same
measurements used by ATSSS and may benefit from additional new measurements.
Editor\'s note: Whether and how to support new UE measurement should
coordinate with RAN group.
PMF needs to be extended in the following aspects:
\- PMF applies to not only MA PDU but also normal single access PDU Sessions.
\- In addition to RTT and PLR that PMF currently supports, more QoS metric
measurements may need to be supported.
\- Support QoS metrics report from UE to UPF.
A new network function, e.g. AIML Serving Function, or new functionality
included in existing NF, such as the PCF, may be introduced in 5GC to handle
the QoS monitoring request from the AIML application server. The AIML Serving
Function interacts with other 5GC NFs (e.g. SMF) to configure and collect the
QoS monitoring report from UEs or UPFs. The AIML Serving Function not only
translates AIML specific request (e.g. QoS or performance prediction for a
group of UEs) to QoS monitoring requests that can be executed in 5GC, but also
can make further intelligent analysis, based on QoS reports collected, and
return the analysis/report to AIML system, as illustrated in Figure 6.15.1-1.
Figure 6.15.1-1: Illustration of QoS monitoring for AIML application
### 6.15.2 Procedures
Figure 6.15.2-1: PMF-based QoS monitoring and reporting
1\. The external AIML system requests the QoS monitoring information from 5GC.
For example, the AIML system may request the real-time QoS performance
information, or future QoS performance prediction, for a group of UEs. The
request is sent via NEF to the AIML Serving Function. The AIML system provides
service requirements, e.g. planned change of bitrate, latency, or reliability
for a QoS flow to an authorized 3rd party and it may provide S-NSSA/DNN. The
NEF maps external identifiers to internal identifiers, e.g. GPSI into SUPI
2\. The AIML Serving Function identifies the serving SMF and PDU Session IDs
used for AIML application for the target UEs, using the existing UDM services
(Not shown in the figure).
3\. The AIML Serving Function, request the serving SMF to initiate QoS
monitoring for related QoS flows.
4a/4b. The SMF configures the UE and UPF for PMF-based QoS measurements using
the Measurement Assistance Information.
NOTE: The existing Measurement Assistance Information may be enhanced with
additional information related to UE QoS report, such as start/end time or
frequency of the report.
5\. The UE and the UPF performs PMF-based QoS measurements.
6\. The UE sends its QoS measurement report in PMF message to the UPF using
PMF message over UP
7\. The UPF combines the UE\'s and its own QoS report and sends it to the SMF.
8\. The SMF forwards the QoS report to the AIML Serving Function.
9\. The AIML Serving Function may analyse the received QoS report of multiple
UEs and may derive more information (e.g. QoS prediction), and return the QoS
monitoring report to the AIML system.
### 6.15.3 Impacts on services, entities and interfaces
UE:
\- Extend support for PMF functionality to single PDU Session, in addition to
MA PDU.
UPF:
\- Extend support for PMF functionality to single PDU Session, in addition to
MA PDU. New NF or existing.
NF (e.g. PCF):
\- Handle the QoS monitoring request from the AIML application server. It also
interacts with other 5GC NFs (e.g. SMF) to configure and collect the QoS
monitoring report.
\- Define new SBI interfaces to NEF.
SMF:
\- Configure PMF functionality to be used for ATSSS and/or application AIML
measurements.
## 6.16 Solution #16: Solution for supporting the aggregated QoS parameters
based on the Group-MBR
### 6.16.1 Description
This solution touches on KI #1, #5, #6 and #7. Federated learning (FL) is a
group-based learning method and there will be many files and multiple rounds
of interactions between the UEs and the FL server over 5GS during the FL
process. Just like any other services, there should be SLA between the MNO and
ASP to agree on the allowance of the maximum throughput that can be consumed
between the end points (i.e. the group of UEs and the AS) of the given FL
operation. Therefore, it is necessary to introduce a system monitoring
parameter to assist the 5GS to keep track of the aggregated status of the
total throughput usage for the given federated learning operation.
During the FL operation, the application server can be connected to one or
more NG-RAN nodes through a single UPF, and each NG-RAN node could be serving
multiple UEs participating in FL operation. Figure 6.16.1-1 below, illustrates
an example of 10 UEs in total within the service area of a UPF that could be
selected to participate in the given FL operation. In a certain round, AS
selects 5 of them to be participated in the FL training. In order to ensure
that the resources consumed by the 5 UEs are within the specified throughput
limit, the UPF keeps track of aggregate bit rate against the Group-MBR among
the set of QoS flows of the UEs who participate in the given FL operation. The
aggregate bit rate shall not exceed the pre-determined Group-MBR for that
specific FL operation. The following summarizes how the aggregated bit rate
among the set of QoS flows of the UEs is monitored against Group-MBR:
\- 10 UEs respectively establish individual PDU sessions with the core
network, and can transmit application data through GBR and/or non-GBR QoS
flows.
\- As shown in the figure 6.16.1-2, Group-MBR is defined as the upper bound of
the aggregate bit rate across all GBR and Non-GBR QoS Flows corresponding to
the group of PDU Sessions of the UEs who participate in a group of
transmissions concurrently (e.g. Federated Learning (FL) operation) with
active user planes. The anchor UPF of the group of transmissions (e.g. FL
operation) measures the aggregated bit rate across all GBR and Non-GBR QoS
Flows against the Group-MBR provided by associated anchor SMF of the
corresponding group of PDU sessions that support the group of transmissions.
The aggregated bit rate is measured over an AMBR averaging window which is a
standardized value as described in clause 5.7.2.6 of TS 23.501 [3]. The Group-
MBR is a monitoring parameter which is provided by the AF to activate the
Group-MBR monitoring operation.
\- In the following figures, the UEs participating in a given Federated
Learning training session may consume different aggregate bit rate during each
round of the FL operation, however, the aggregate bit rate among the
corresponding set of QoS flows for each round of the FL operation should not
exceed the contracted Group-MBR that was agreed between the ASP and the
serving MNO. For example, the value of the contracted Group-MBR is 20 Mbps,
the aggregated bit rate across the set of QoS flows for the participating UEs
in each round of the FL operation can not exceed the Group-MBR i.e. 20 Mbps.
\- The UPF continues to monitor and measure the aggregate bit rate to assist
the AF to ensure that the measured aggregate bit rate of the UEs in the given
group should not be greater than the Group-MBR.
\- When the measured aggregate bit rate value exceeds the Group-MBR, the
anchor UPF may perform gating of one or more QoS flows for the given group of
UEs based on the policy provided by the AF (to the anchor UPF via the SMF via
the PCF) in order to mediate the aggregate bit rate not to exceed the Group-
MBR that has been contracted.
Editor\'s note: What and how to apply the gating policy for Group-MBR is FFS.
Figure 6.16.1-1: Federated learning scenarios with a single UPF
Figure 6.16.1-2: The definition of the aggregated bit rate and the Group-MBR
In order to support the Group-MBR monitoring as described above, this solution
proposes to extend the Application Function (AF) Influence on traffic routing
functionality to enable the Group-MBR monitoring for the FL operation when
such operation is activated by the Application AI/ML AF.
It is beneficial to leverage existing AF Influence for Traffic Routing to
support Group-MBR monitoring, because it is likely that MEC services will be
applied to FL operation.
Meaning, the AF Influence procedure can be used in the context of AI/ML FL to
accomplish two goals:
1\. Adjust the original anchor UPF to a local PSA by applying any of the Edge
Computing methods described in TS 23.548 [10] and in clause 4.3.5 of TS 23.502
[4] as/if needed.
2\. Pass on the Group-MBR monitoring information to the proper anchor
UPF/local PSA.
The existing group policy management and group traffic routing procedures can
be easily extended to support Group-MBR monitoring.
This solution proposes to introduce a new information element, i.e.
information supporting the Group-MBR monitoring, (see 6,16.2.2 below) to be
included in the AF request to initiate the Group-MBR monitoring for a set of
QoS flows of a group of PDU sessions supporting the FL operation for the given
AF. The existing Traffic Description and Target UE Identifier(s) IEs defined
in clause 5.6.7-1 of TS 23.501 [3] are used as is for traffic and group
identification.
This solution assumes that the MNO, which supports the Group-MBR monitoring,
is able to provision the subscription information for the group of UEs,
associated with FL operation, in a new entry of the Group Data table in the
Subscription Data part of the UDR (consumed by the UDM) with the following
configurations for the corresponding S-NSSAI and DNN:
\- Same SMF is to be selected for all PDU sessions established by any
subscriber in the group as currently supported in clause 6.3.2 of TS 23.501
[3] for SMF discovery and selection.
\- Same PCF is to be selected for the group of SM Policy Association
corresponding to a given S-NSSAI and DNN to provide the SM Policy Control as
currently supported in clause 6.3.7.1 of TS 23.501 [3] for PCF discovery and
selection, and
\- Same PSA UPF is to be selected for UEs that are served by the same S-NSSAI
and DNN combination in order to perform the Group-MBR related measurement and
to support Group-MBR monitoring.
During PDU Session Establishment procedure of any of the UEs in the above
Group to the combination of S-NSSAI/DNN, the AMF will use the above
subscription information to discover and/or select the same anchor SMF across
all of the PDU Sessions.
Consequently, that anchor SMF will use the above subscription information to
discover and/or select the same anchor PCF and the same anchor UPF across all
of the PDU Sessions.
NOTE: It is implicitly assumed here that a combination of Group-ID/S-NSSAI/DNN
can be dedicated for the use of AI/ML FL.
Editor\'s note: How to decide which UPF is the anchor UPF (and which are the
corresponding anchor SMF and anchor PCF) is FFS.
Editor\'s note: How to extend this solution to support multiple UPFs is FFS.
The descriptions of this solution are organized as follows:
\- Clauses 6.16.2.1 - 6.16.2.4 describe how to extend existing AF Influence
Routing feature to enable the AF request for Group-MBR monitoring.
\- Clauses 6.16.2.5 - 6.16.2.6 describe how the Group-MBR is monitored.
### 6.16.2 Procedures
#### 6.16.2.1 Defining Group-MBR Traffic Monitoring Parameter
This solution defines Group-MBR as follows:
Group Maximum Bit Rate (Group-MBR):
\- The Group-MBR provides the upper bound of the aggregate bit rate across all
GBR and Non-GBR QoS Flows corresponding to the group of PDU Sessions of the
UEs who participate in a group of transmissions concurrently (e.g. Federated
Learning (FL) operation) with active user planes. The anchor UPF of the group
of transmissions (e.g. FL operation) measures the aggregated bit rate across
all GBR and Non-GBR QoS Flows against the Group-MBR provided by the associated
anchor SMF of the corresponding group of PDU sessions that support the group
of transmissions. The aggregated bit rate is measured over an AMBR averaging
window which is a standardized value as described in clause 5.7.2.6 of TS
23.501 [3]. The Group-MBR is provided by the AF to initiate the Group-MBR
monitoring for a set of QoS flows of a group of PDU sessions supporting a
group of concurrent transmissions.
#### 6.16.2.2 Extensions to AF Influence Information Element in AF request to
monitor and report aggregate bit rate among the specific group of PDU sessions
This solution proposes to update TS 23.501 [3], Table 5.6.7-1: Information
element contained in AF request, with a new optional AF Influence information
element in AF request to support aggregate bit rate monitoring against Group-
MBR. The changes to Table 5.6.7-1 are in \"bold italic\" as shown below.
+---------------------------------------------------------------+ | Proposed example changes to Table 5.6.7-1 of TS 23.501 [3]: | | | | Table 5.6.7-1: Information element contained in AF request | +---------------------------------------------------------------+
#### 6.16.2.3 Extensions to AF Influence Network Function Service Procedure to
enable the support for Group-MBR monitoring
This solution proposes to extend the AF traffic influence for traffic routing
service procedure as defined in clause 5.2.6.7.2 of TS 23.502 [4] to include
the new optional information element, Information for Supporting Group-MBR
monitoring, to enable the support for Group-MBR monitoring that was described
in clause 6.16.2.2 above for Table 5.6.7-1: Information element contained in
AF request, in TS 23.501 [3]. The changes are shown below in \"**_bold
italic_** \".
+----------------------------------------------------------------------+ | Proposed example changes to clause 5.2.6.7.2 of TS 23.502 [4]: | | | | **5.2.6.7.2 Nnef_TrafficInfluence_Create operation** | | | | **Service operation name:** Nnef_TrafficInfluence_Create | | | | **Description:** Authorize the request and forward the request for | | traffic influence. | | | | **Inputs, Required:** AF Transaction Id, AF Identifier. | | | | The AF Transaction Id refers to the request. | | | | **Inputs, Optional:** The address (IP or Ethernet) of the UE if | | available, GPSI if available, DNN if available, S-NSSAI if | | available, External Group Identifier if available, External | | Application Identifier or traffic filtering information, | | AF-Service-Identifier, a list of DNAI(s) and corresponding routing | | profile ID(s) or N6 traffic routing information, Indication of | | traffic correlation, Indication of application relocation | | possibility, Indication of UE IP address preservation, Early and/or | | late notifications about UP path management events, Notification | | Target Address, Temporal validity condition, Spatial validity | | condition, User Plane Latency Requirements, Information for EAS IP | | Replacement in 5GC** _,_** AF indication for simultaneous | | connectivity over source and target PSA at edge relocation **_and | | Information for Supporting Group-MBR_** **_Monitoring_** as | | described in clause 5.6.7 of TS 23.501 [3]. | | | | **Outputs, Required:** Operation execution result indication. | | | | **Outputs, Optional:** None. | +----------------------------------------------------------------------+
#### 6.16.2.4 Extensions to AF Influence on traffic routing procedure for
Session not identified by an UE address to enable the support for Group-MBR
monitoring
This solution proposes to extend the procedure \"Processing AF requests to
influence routing for Session not identified by a UE address\" as defined in
clause 4.3.6.2 of TS 23.502 [4] to enable the support for Group-MBR
monitoring. The following descriptions focus on the changes to the procedure
as described in clause 4.3.6.2 of TS 23.502 [4].
+----------------------------------------------------------------------+ | **_Reference to clause 4.3.6.2 of TS 23.502 [4]_** | | | | Figure 4.3.6.2-1: Processing AF requests to influence traffic | | routing for Sessions not identified by an UE address | +----------------------------------------------------------------------+
1\. Application AI/ML AF includes the new information element, **_Information
for Supporting Group-MBR Monitoring_** , as described in 6.16.2.2 for Table
5.6.7-1 of TS 23.501 [3] in the AF request to NEF. The above information
element includes also the Group-MBR monitoring parameter which has/have bit
rate monitoring value(s) for uplink and downlink traffic flows.
Editor\'s note: Whether the Group-MBR monitoring parameter should be pre-
configured in the UDM/UDR or dynamically provided by the AF is FFS.
2\. The AF includes the new information element provided in Step-1 to NEF in
case of Nnef_TrafficInfluence_Create or Update.
3\. In case of Nnef_TrafficInfluence_Create or Update, the NEF stores the AF
request together with the new information element provided in Step-1 by the AF
in the UDR which indicates all the future and the existing PDU sessions for
the specified group (i.e. per (S-NSSAI, subscribed DNN)) are required to be
served by the same PSA UPF and such UPF is required to be able to support the
monitoring of the Group-MBR for the specified set of QoS flows among the group
of PDU sessions for the specific group operation.
NOTE: The selection of the same PSA UPF by the SMF is feasible as described in
clauses 6.3.3.1 and 6.3.3.2 of TS 23.501 [3] by leveraging the procedures as
defined in clauses 4.4.1 and 4.4.3 of TS 23.502 [4].
6\. This solution applies the same design consideration as the current
procedure defined in clause 4.3.6.2 of TS 23.502 [4] to the existing PDU
session. Based on the updated policy information about the PDU session from
PCF, the SMF may take the new action proposed by this solution, when
applicable, to reconfigure the UPF of the existing PDU session by recognizing
for the need of the UPF to support the monitoring the Group-MBR among the
group of PDU session.
#### 6.16.2.5 The procedure of Group-MBR monitoring
After the PDU sessions and the corresponding QOS flows are established between
the UEs and the AF, the PSA UPF is activated by the SMF to monitor the
aggregate bit rate among the active QoS flows for the given DNN and S-NSSAI to
ensure that the measured aggregated bit rate does not exceed the Group-MBR.
Figure 6.16.2.5-1: Group-MBR Monitoring via AF request
1\. Several PDU sessions are established between the group of UEs and their
serving AF for the given application by leveraging the AF Influence Routing
procedures with the new IE introduced by this solution as described in clause
6.16.2.4 to support the Group-MBR monitoring.
2\. AF invokes the Nnef_EventExposure_Subscribe and
Nsmf_EventExposure_Subscribe services operation as described in steps 1, 2,
3c, 3d and 5 in clause 4.15.3.2.3 of TS 23.502 [4] to subscribe the event for
the monitoring the Group-MBR for its FL operation.
3\. Sending the acknowledgement to the AF of step 2 above for initiating the
Group-MBR monitoring.
4\. With the support from PSA UPF, SMF initiates the Group-MBR monitoring for
specific QoS flow for specific PDU session within the group of PDU sessions
via N4 signalling. SMF considers this as an active and ongoing operation
initiated by the AF without the constant or repeated requests from AF.
Editor\'s note: Whether to extend PSA UPF or SMF to measure the aggregate bit
rate among the target QoS flows and/or compare it against Group-MBR and notify
it to the proper NF (e.g. SMF or NEF) is FFS.
5\. If the measured aggregated bit rate exceeds the Group-MBR, SMF sends the
Nsmf_EventExposure_Notify and Nnef_EventExposure_Notify in steps 6e and 7 as
described in clause 4.15.3.2.3 in TS 23.502 [4] to AF via NEF for the Group-
MBR monitoring result with the event as described in clause 6.16.2.6 below.
6\. AF may provide policy to SMF via PCF as described in step 1a in clause
4.16.5.2 of TS 23.502 [4] to apply gating towards one or more QoS flows in
respond to the overflow of the Group-MBR.
NOTE: The decision on how AF determines for which the QoS flow(s) to apply the
gating policy is beyond this specification.
7\. AF unsubscribes to the Group-MBR monitoring event by invoking
Nnef_EventExposure_Unsubscribe and Nsmf_EventExposure_Unsubscribe services in
steps 1, 2, 3c, 3d and 5 as described in clause 4.15.3.2.3 of TS 23.502 [4].
8\. SMF/UPF stop(s) the Group-MBR Monitoring.
#### 6.16.2.6 Extension to Nnef_EventExposure Services for Event Monitoring to
support Group-MBR monitoring
This solution extends the existing Monitoring Events leveraging NEF event
exposure as defined in clause 4.15.3 of TS 23.502 [4] to support Group-MBR
monitoring event for a set of QoS flows of a group of PDU sessions for a given
AF operation (e.g. Application FL operation). The following focus on the
changes to Nnef_EventExposure Service as defined in clause 4.15.3 of TS 23.502
[4].
This solution proposes to add a new event to Table 4.15.3.1-1 in TS 23.502 [4]
for \"Aggregate bit rate Monitoring for Group-MBR\" and the SMF is responsible
for the event detection. For this new event, if the monitored aggregated bit
rate of the group of PDU sessions corresponding to the specified S-NSSAI, DNN
and 5 tuple traffic filter exceeds the Group-MBR value, the SMF will notify
the AF which may apply the gating policy for one or more QoS flows. When the
monitored aggregate bit rate of the group of PDU sessions fall below the
Group-MBR, the AF will also be notified and it may restore the bitrate
allowance on those QoS flows. The aggregated bit rate is measured over an AMBR
averaging window which is a standardized value as described in clause 5.7.2.6
of TS 23.501 [3].
NOTE: The decision on how AF determines for which the QoS flow(s) to apply the
gating policy is beyond this specification.
The description of the new NEF monitoring event as introduced by this solution
is to be captured in Table 4.15.3.1-1 of TS 23.502 [4] as shown below.
+--------------------------------------------------------------+ | Example of New event to Table 4.15.3.1-1 of TS 23.502 [4]. | | | | Table 4.15.3.1-1: List of events for monitoring capability | +--------------------------------------------------------------+
### 6.16.3 Impacts on services, entities and interfaces
**\- TBD.**
## 6.17 Solution #17: 5GS assistance for FL member selection using QoS
monitoring
### 6.17.1 Description
The basic principle for this solution, is for the AF to provide the enhanced
NEF (eNEF) the candidate UE selection request which includes the UE filtering
policy (e.g. target location). and eNEF activates the QoS monitoring on a
group of UEs at a specific target location. The set of candidates UEs
requested by the AF will then be identified based on their respective delay
performance and the UE filtering policy. The UEs which have the best
monitoring results (i.e. low latency) and comply to the UE filtering policy
will be considered as the candidate UEs to be provided to the AF via eNEF.
Prior to the AF to select a group of UEs to participate in its FL operation,
the following events happen:
1) The AF provides UE filtering policy to enhanced NEF (eNEF). The UE
Filtering policy includes:
\- One or more UE address(es) (IP address or MAC address) and AF Identifier(s)
together with the protocol port info: This parameter is used to identify an
initial group of UEs for the specific application to be further filtered.
\- Monitoring area (i.e. AOI): the 5GC considers the UE as a candidate UE only
when the UE is in the monitoring area (i.e. Area of Interest - AOI)
\- The number of candidates UEs for reporting e.g. select 6 candidate UEs with
lowest measurement delay among the group of UEs being monitored for FL
operation;
\- The minimum local training data acquisition time interval: select UEs with
different data acquisition time(e.g. sensors waking up at different time may
gather different data in the same AOI)
\- The minimum separation distance between candidate UEs based on locations:
select those UEs that are geographically separated with sufficient
distance(e.g. two vehicles close by may overlap in their Field of View and
have same or similar data)
\- Data sources of the local training data for the set of distributed nodes:
defined by whom the data are generated, e.g. two BMW vehicle may have similar
data and less preference than one BMW and one Toyota.
2) Based on UE filtering policy, the eNEF triggers the QoS monitoring per UE
per QoS flow:
eNEF triggers the QoS monitoring per UE per QoS flow reusing the QoS
monitoring mechanism. According to the UE Filtering policy and the monitoring
results, the eNEF applies UE filtering policy in order to determine the set of
candidate UEs. The eNEF reports the list of candidate UEs to the AF.
3) Based on the candidate UEs provided by the eNEF, The AF make the final
decision on the set of target UEs to be participated in its FL operation.
### 6.17.2 Procedures
Figure 6.17.2-1: 5GS assistance for QoS monitoring support for FL member
selection
1\. UE establishes PDU session as described in clause 4.3.2.2.1 of TS 23.502
[4].
2\. AF sends Candidate-UE List Filtering request with Candidate-UE filtering
policy (e.g. Area of Interest (AOI) for QoS monitoring) to request the eNEF to
provide the list of UEs that match the Candidate-UE filtering policy. In order
to do so, the eNEF may need a new service operation to enable the AF to
request 5GS assistance to support the Candidate UE selection. The AF may
provide a list of IP addresses or an External Group Identifier to eNEF.
3\. If the list of UE IP addresses is received, the eNEF triggers the
procedure as defined in TS 23.502 [4], Clause 4.15.10 in order to obtain the
corresponding list of SUPIs.
If the External Group Identifier is received, the eNEF triggers the procedure
as defined in TS 23.502 [4], Clause 4.13.2 in order to translate the External
Group Identifier to Internal Group Identifier.
4-5. If the monitoring area is received, the eNEF needs to identify the set of
Candidate UEs which are located at the monitoring area. In order to achieve
it, the eNEF is subscribed to Namf_EventExposure_Subscribe service with
Internal Group Identifier (i.e. S-NSSAI, DNN) and event ID = Number of Ues
present in a geographical area. If AF provided a specific list of UEs in step
1, eNEF matches the UE list from the AF against the Candidate-UE list from the
Namf_EventExposure_Notify in order to determine the list of Candidate UEs
which are associated with the AF in the monitoring area. Otherwise, all UEs in
the Candidate-UE list from the Namf_EventExposure_Notify are considered as the
list of candidate UEs.
6\. The eNEF also needs to keep track of whether any of the Candidate UEs
identified from Steps 4-5 above will move in or out of the monitoring area,
hence, the eNEF invokes the Namf_EventExposure_Subscribe service for each UE
from candidate list by providing the corresponding SUPI and specifies the
event ID=UE moving in/out of AoI(PRA) to monitor the each candidate UE moving
in/out of the monitoring area.
7-11. The eNEF triggers the PDU session modification to activate the QoS
monitoring. Based on the received UE filtering policy, it may request the
SMF/UPF to trigger the monitoring periodically per UE per QoS flow, so that
the UPF can provide the measurement delay to eNEF periodically.
In order to do so, the Npcf_PolicyAuthorization_Create request procedures as
described in clause 4.15.6.6 of TS 23.502 [4] as well as other QoS monitoring
related procedures to trigger the per UE per QoS flow delay monitoring for
each UE which is present in the monitoring area can be used.
12-14. Based on the Candidate-UE filtering policy, the location related event
notification from AMF and the measurement result from UPF, the eNEF applies
the Candidate-UE filtering policy to determine the set of Candidate UEs. The
eNEF will map the list of SUPI to the list of UE IP address or map the
Internal Group Identifier to External Group Identifier. The UEs which have the
best monitoring results (i.e. low latency) and within the monitoring area will
be considered as the candidate UEs to be provided to the AF via eNEF.
The eNEF may need a new service operation to send the Candidate UE list to AF
to reply the request from step 2.
15-16. If a given UE moves out of the monitoring area because of steps 6
above, the eNEF will be notified by the AMF via Namf_EventExposure_Notify
service. In such case, the eNEF relays such notification to the AF.
17\. When AF completes the QoS monitoring operation or a specific UE has moved
out of the monitoring area (as described in Steps 14-15 above), the AF
triggers the Nnef_AFsessionWithQoS_Revoke to terminate all QoS monitoring
operation for all UEs or for specific UE, respectively.
### 6.17.3 Impacts on services, entities and interfaces
eNEF:
A new service to enable the AF to request 5GS assistance to support the
candidate UE selection and send the Candidate-UE list to AF.
Based on the Candidate-UE List filtering request from the AF, eNEF subscribes
the event to AMF.
Based on the event notify from AMF, eNEF trigger the QoS monitoring.
Apply Candidate-UE filtering policy to filter the Candidate-UE list based on
the information provided by the AMF and UPF and provide the Candidate-UE list
to the AF.
AF:
Send the Candidate-UE-List filtering request to eNEF.
## 6.18 Solution #18: 5GS assistance for FL member selection based on UE\'s
visited AOI information
This contribution addresses KI#7 on \"5GS Assistance to Federated Learning
Operation\" by providing 5GS assistance for FL member selection based on UE
visited AOI information.
### 6.18.1 Description
Federated Learning (FL) is a good method to use multiple UEs\' local dataset
and computation while preventing the sensitive information exposed from being
exposed. To perform FL operation, it is possible for a centralized FL
operation to involve several EC servers, for example, better proximity with
the target FL clients to perform distributed FL training operation. A typical
scenario is shown in Figure 6.18.1-1 below, where an EC server is organizing
UEs for FL training within its coverage area, meanwhile the training model
applies to a larger area which is beyond the EC server\'s coverage.
Figure 6.18.1-1: A EC server determines the target UEs within its coverage to
perform the FL training, where the training model\'s applicable area can be
larger than its coverage area
As shown in Figure 6.18.1-2, in order to train a model of trajectory
prediction applying to the model\'s applicable area, the application server
(EC server) needs to find the UEs which are currently under its coverage but
they were moved from a different Area Of Interests (AOIs) within the model\'s
applicable area. Those UEs are expected to be able to provide a more diverse
dataset that offers broader representation of the whole model\'s applicable
area.
Figure 6.18.1-2: The left picture shows all UEs\' data set are in a subset of
the whole district which cannot represent the model\'s applicable area, so an
FL EC server should select the UEs that each of them respectively has a
dataset in different AOIs as the right picture shows
With the motivation described above, this solution is to enable the 5G
assistance to the AF to select the UEs which are within the FL server
coverage, however, were moved from the AOI that is outside of the FL server
coverage but within the model\'s applicable area. This approach allows the FL
server to select the member UEs which have the dataset history of other AOI(s)
so that they can provide broader representations of a model applicable area.
To achieve it, the following concepts are defined in order to describe this
solution:
\- FL Coverage Area - the coverage area that the specific FL server applies
the training.
\- Model\'s Applicable Area - the area that the FL trained model can apply.
\- Historical Nomadic Period - The \"historical nomadic period\" is referred
to the minimum duration that the UE was roving within the visited AOI as
defined in TS 23.288 [6] in order to consider the UE\'s dataset to be
beneficial for the FL training operation. Note that, the determination of the
duration for the historical nomadic period is application implementation
decision which is beyond the scope of this solution.
\- Target Area Of Interest (AOI) - the target AOI which is beyond the FL
coverage area but is within the model\'s applicable area. Target AOI has the
same concept as the visited AOI as defined in TS 23.288 [6].
This solution proposes the following information exchanges between the AF and
the 5GC in order to support the Application FL member selection based on
visited AOI considerations:
\- From the AF to 5GC:
\- Target AOI;
\- FL Coverage Area; and
\- Historical nomadic period for the given target AOI.
\- From 5GC to AF:
\- the 5GC selects the in-coverage UEs coming from the target AOI and have
been roving there over historical nomadic period.
### 6.18.2 Procedures
Figure 6.18.2-1: 5GS assistance for FL member selection based on UE\'s visited
AOI
NOTE: The functionality of the NEF has been extended in this solution in order
to support the assistance of the FL member selection for the given FL
operation.
1\. In order to select the UEs with broader dataset which are within the
model\'s applicable area, the AF requests 5GS assistance to support the UE
selection by considering the UE\'s visited AOI info. AF includes the External
Group Identifier and the following filtering info as part of the FL UE
selection request:
\- Target AOI and historical nomadic period:
\- The Target AOI where the UEs have been roving over the historical nomadic
period before moving into the FL coverage area.
\- FL Coverage Area:
\- The FL training server\'s coverage area, i.e. the coverage area of the FL
training server where the selected UEs participate in the FL operation
2\. NEF translates the External Group Identifier to Internal Group Identifier.
3-4. In order to locate the group of UEs which are associated with the AF and
are within the FL training server coverage (i.e. FL coverage area), the NEF
invokes Namf_EventExposure_Subscribe service operation with the Internal Group
Identifier, event ID = Number of UEs present in a geographical area. AMF will
provide a list of UEs that are within the FL coverage area to the NEF using
the Namf_EventExposure_Notify service operation. The NEF obtains the list of
possible target UEs from AMF within the FL training server\'s coverage.
5\. In order to identify the appropriate NWDAF which can provide analytic
output to derive the visited AOI info for the possible target UEs above, the
NEF needs to select the suitable NWDAF by initiating the NWDAF discovery
request (Analytics ID = UE mobility, AOI = Target AOI) with Internal Group
Identifier.
6-7. The NEF invokes NWDAF Analytics Info request (Internal Group Identifier,
Analytics ID = UE mobility, Filters include \"Visited AoI = Target AOI\" and
\"target period = historical nomadic period\"). NWDAF will then provide a list
of UEs that were ever roving within the target AOI, at the minimum, over the
historical nomadic period. Then the NEF gets the corresponding statistics of
UE mobility (as defined in TS 23.288 [6], clause 6.3.2)
8-9. The NEF compares the UE list provided by the AMF in steps 3-4 against the
UE list provided by the NWDAF in steps 6-7. The NEF will then determine the FL
candidate UEs which are now within the FL coverage area but were roving within
the target AOI over the historical nomadic period as requested by AF. The NEF
notifies AF for such UE candidate list.
10\. The NEF also needs to consider the list of UEs which are now within the
FL coverage area, but may move out of the FL coverage area. Therefore, for
each UE in the candidate list in steps 8-9, the NEF invokes the
Namf_EventExposure_Notify service with UE ID = SUPI, Event ID=UE moving in/out
of AOI (PRA) to keep track the movement of the UE(s) in/out of the AOI.
11-12. If step 10 identifies any UE which is moving out of the FL coverage
area, the NEF may further notify AF of the given UE which is moving out the
coverage.
13\. When AF completes the FL operation, it terminates the 5GS assistance
support for the UE selection based on the UE\'s visited AOI info.
### 6.18.3 Impacts on services, entities and interfaces
NEF:
\- New service operation to provide the candidate UE selection function.
\- Select the candidate UE list based on the Interested area information and
historical period and the coverage information provided by AF.
AF:
\- Request NEF to provide the candidate UE list based on the Target AOI
information and historical period and the coverage information.
## 6.19 Solution #19: 5G assisted FL member selection
### 6.19.1 Description
This solution is applied to KI#7: 5GS Assistance to Federated Learning
Operation.
One aspect in KI#7 is about 5GS assist to selection of UEs for application
layer FL operation. The AF may select a list of UEs in different location for
FL, for example, different UEs in different registration areas, different
cells and maybe in different geographic area. Since the application does not
know the UE location information and the operator may not want to expose the
UE location information to the AF, the AF may request the 5GC to provide
assistance information to AF to determine the final list of UEs for FL.
### 6.19.2 Procedures
AF sends an analytics request to NWDAF to provide a list of UEs that in
different location in specific duration time according to the UE mobility
prediction. The procedure is described in Figure 6.19.2-1.
Figure 6.19.2-1: 5G assisted FL member selection procedure
1\. AF sends Nnef_AnalyticsExposure_Subscribe to NEF with the Analytics ID is
\"UE mobility\", event type set as location requirement. The location
requirements includes a list of location information and the required number
of UEs that in these areas. If the AF is configured with the registration /
cell information of the network, The location information in the location
requirement may include a list of registration area, list of different cell ID
and list of different geographic area. Otherwise, if the AF is not configured
with the registration / cell information of the network, the AF provides the
required geographic area in this message.
The Application ID is included in this message.
AF may provide a list of UE Identity in this message or AF indicates \"any
UE\" in this message.
2\. NEF forwards the requested to NWDAF via
Nnwdaf_AnalyticsSubscription_Subscribe message.
Step 3 to step 6 are only performed if \"any UE\" is included in step 1. If
the UE Identity is provided by AF, NWDAF will perform step 7 directly.
3\. If \"any UE\" is requested by AF in step 1, the NWDAF will determine a UE
list that activate the application.
NWDAF sends Npcf_EventExposure_request message to PCF with the Application ID
to ask PCF detection the start or stop of application traffic.
4\. PCF install a PCC Rule and activate start and stop of application
detection in the SMF(s).
5\. SMF instructs the UPF to detect the Start and Stop of the application
traffic for the PCC rules used for application detection for the Application
ID and report the result to PCF.
6\. PCF reports the UE list that start the application traffic for the
specific Application ID to NWDAF. The received UE list are the UEs that
activate the application for the Application ID.
7\. If \"UE Identity\" is provided by AF in step 1, the NWDAF will initiate UE
mobility analytics for each UEs that requested by AF.
If \"Any UE\" is requested by AF in step 1, the NWDAF will initiate UE
mobility analytics for each UEs that received in step 6.
The UE mobility prediction procedure is described in TS 23.288 [6], the
enhancement with more accurate UE location statistics and UE location
predictions that are considered in eNA_Ph3.
8\. NWDAF further determine a UE list based on the location requirement that
received in step 2, e.g. selects different UEs that located in different
location area and reports the list of UE Identity to NEF via
Nnwdaf_AnalyticsSubscription_Notify message.
9\. NEF sends the list of UE Identity to AF via Nnef_AnalyticsExposure_Notify.
AF will further determine the FL members, for example, AF may consider the the
received UE list, local configuration and UE client FL capability that
negotiated between UE client and Application server. How does AF determine the
FL members is out of 3GPP scope.
### 6.19.3 Impacts on services, entities and interfaces
NWDAF:
\- Requests the application detection for the Application ID from PCF and
determines a list of UE that activate the Application traffic.
\- Initiates the UE mobility analytics for the determined list of UE and
further determines a group of UE based on the location requirement provided by
AF.
## 6.20 Solution #20: 5GS assistance to reduce the latency divergence
### 6.20.1 Description
This solution addresses Key Issue #7 \"5GS Assistance to Federated Learning
Operation\" on FL performance.
As shown in Figure 6.20.1-1, one iterator process for the FL model training
phase is as follows:
\- Step 1: Each UE in the FL group derives the local ML model information
based on the its own raw data and sends the local ML model information to the
AF/AS.
\- Step 2: When the local ML model information from all the UEs in the FL
group are received, the AF/AS aggregates all the local ML model information
into a global ML model information.
\- Step 3: The AF/AS feedbacks the global ML model information to each UE.
\- Step 4: Each UE in the FL group derives the update local ML model
information based on the global ML model information.
Figure 6.20.1-1: Training process of application level Federated Learning
The selected UEs to participate in FL operation may have different local
computing capabilities and 5GS communication capabilities, which affects the
efficiency of FL operation (e.g. FL model training). Specifically, the local
computation delay and the model transmission delay of different UEs may be
quite different. However, if some security aggregation algorithms are used,
the AF/AS cannot update the global model information until all UE
transmissions are completed, resulting in a longer overall training delay.
To solve this problem, as shown in Figure 6.20.1-2, the transmission delay of
different UEs can be set or adjusted so that the sum of local computation
delay and model transmission delay of different UEs can be nearly the same.
Figure 6.20.1-2: Optimization of UE transmission delay
Before FL operation starts, the AF can collect the local computation delay of
UE participating in FL operation, and the AF may request PCF to set different
PDB according to the local computation delay of different UEs.
NOTE: The AF may obtain the data volume to be transmitted of different UEs via
application layer, and the AF may request PCF to set different PDB according
to the local computation delay and data volume to be transmitted of different
UEs.
During the FL operation, the AF may calculate the mean value of the sum of
local computation and transmission delay of different UEs as the expected FL
updating delay for UL (i.e. the sum of local computation delay and UL
transmission delay). If the actual FL updating delay for UL of UE is lower or
higher than a threshold related to the expected FL updating delay for UL, the
AF may request PCF to adjust the QoS parameters (e.g. 5QI, ARP, GFBR) of QoS
flow associated with the UE.
NOTE: The resource type of QoS Flow may change from Non-GBR to GBR or Delay-
critical GBR based on the requirements provided by the AF.
In addition, during the FL model training, the AF may subscribe the predicted
UE transmission delay to NWDAF, then the AF can calculate the predicted FL
updating delay for UL of different UEs based on the local computation delay
and the predicted UE transmission delay from NWDAF. Then the AF can adjust the
QoS parameters (e.g. 5QI, ARP, GFBR) of QoS Flow for the UE if the predicted
FL updating delay for UL of UE is lower or higher than a threshold.
### 6.20.2 Procedures
Figure 6.20.2-1: Procedures of 5GS assistance to reduce the latency divergence
0\. Before FL operation starts, AF can collect the local computation delay of
UE participating in FL operation.
NOTE 1: Step 0 is application layer operation, which is not within the scope
of 3GPP.
1\. The AF determines to adjust the PDB of QoS Flow according to the local
computation delay of different UEs.
2\. The AF sends the QoS parameters (i.e. PDB) to be modified to the PCF using
Npcf_PolicyAuthorization_Create/Update Request service operation.
3\. The PCF sets QoS parameters based on the request from the AF and generates
PCC rules, and then SMF binds the PCC rules to the corresponding QoS flow as
defined in clause 6.1.3.2.4 of TS 23.503 [5].
4\. The PCF instructs the AF policy establishment success or failure using
Npcf_PolicyAuthorization_Create/Update Response service operation.
5\. The application layer FL operation between UE and AF starts.
NOTE 2: Step 5 is application layer operation, which is not within the scope
of 3GPP.
6a. The AF collects the actual FL updating delay for UL (i.e. the sum of local
computation and UL transmission delay) of UE, and may calculate the mean value
of actual FL updating delay for UL lay of different UEs as the expected FL
updating delay for UL. The AF determines to adjust the QoS parameters (e.g.
5QI, ARP, GFBR) of QoS Flow associated with the UE whose actual FL updating
delay for UL is lower or higher than a threshold related to the expected FL
updating delay for UL.
NOTE 3: The AF collects the actual FL updating delay for UL and calculate the
expected FL updating delay for UL of different UEs are application layer
operations, which are not within the scope of 3GPP.
NOTE 4: The AF may also tell the UE to wait (if it is too fast) or remove the
UE from FL group (if it is too slow), but this solution out the scope of 3GPP
and will not be discussed here.
6b-9b. The AF subscribes the predicted UE transmission delay to NWDAF for the
UE participating in FL operation, then the AF can adjust the QoS parameters of
QoS Flow for the UE according to the UE Communication Predictions obtained
from NWDAF.
10\. The AF sends the QoS parameters (e.g. 5QI, ARP, GFBR) to be modified to
the PCF using Npcf_PolicyAuthorization_Update Request service operation.
11\. The PCF updates QoS parameters based on the request from the AF and
generates PCC rules, and then SMF binds the PCC rules to the corresponding QoS
flow as defined in clause 6.1.3.2.4 of TS 23.503 [5].
12\. The PCF instructs the AF policy establishment success or failure using
Npcf_PolicyAuthorization_Update Response service operation.
### 6.20.3 Impacts on services, entities and interfaces
AF:
\- Subscribes the predicted UE transmission delay to NWDAF for the UE
participating in FL operation.
NWDAF:
\- Provides the predicted UE transmission delay to AF.
## 6.21 Solution #21: Exposure of UE performance or a group of UEs performance
### 6.21.1 Description
This solution aims to address the key issue #7, it addresses how to monitor
and expose a UE or a group of UEs performance (e.g. aggregated QoS
parameters). To address how to monitor and expose a UE or a group of UEs
performance (e.g. aggregated QoS parameters), this solution follows the
principles below:
\- The group of UEs performance are defined by the combination of event
parameters that are defined in table 6.1.3.18-1 in TS 23.503 [5] and supported
by Nnef_EventExposure service and the group performance type (i.e. min value,
max value, mean value, sum of values). For instance, the combination for
representing \"longest UL delay in UEs\" can be represented by (Event ID:
\"QoS Monitoring parameters\", QoS parameter to be monitored: \"UL packet
delay\", Group Performance Type: \"max\").
\- Enhanced NEF event exposure service by adding \"Group Performance Type\"
(i.e. max, min, mean, sum) as a new optional input parameter of
Nnef_EventExposure_Suscribe service operation. For instance, when AF want to
know the longest UL delay among UEs in the group, AF sends event exposure
request message with [Addresses of UEs, Event ID: \"QoS Monitoring
parameters\", QoS parameter to be monitored: \"UL packet delay\", Group
Performance Type: \"max\", Group Reporting Mode: \"Group Member\"] to NEF.
\- Enhanced Event Reporting Information by adding the \"Group Reporting mode\"
parameter (i.e. \"Group Member\", \"Group Reporting Guard Time\") as an
optional parameter to represent how NEF aggregates the event reports from
other NFs (e.g. PCF(s)). When the \"Group Reporting mode\" parameter is
requested as \"Group Reporting Guard Time\", NEF aggregates the event reports
until the Group Reporting Guard timer is expired. On the other hand, when the
\"Group Reporting mode\" parameter is requested as \"Group Member\", NEF
aggregates the event reports of all UEs in the group.
\- New functionality of NEF to calculate the group performance based on the
aggregated event reports and the requested \"Group Performance Type\"
parameter.
### 6.21.2 Procedures
Figure 6.21.2-1 outlines the procedure of exposing UE performance and a group
of UEs performance.
Figure 6.21.2-1: Procedure of exposing UE performance and a group of UEs
performance
1\. The AF sends Nnef_EventExposure_Subscribe Request to NEF to subscribe
target group performance.
If AF needs to obtain \"the worst UL packet delay among that of UEs\", AF
sends request message with [Addresses of UEs, Event ID: \"QoS Monitoring
parameters\", QoS parameter to be monitored: \"UL packet delay\", Group
Performance Type: \"max\", Group Reporting Mode: \"Group Member\"]. On the
other hand, if AF want to monitor whether \"the UL delay of UEs in the target
group is can no longer (or can again) be fulfilled\", AF sends request message
with [Addresses of UEs, Event ID: \"QoS targets can no longer (or can again)
be fulfilled\", QoS parameter to be monitored: \"UL packet delay\", Target
QoS: UL delay (e.g. 1msec)]. Note that the above Event IDs (i.e. \"QoS
Monitoring parameters\" and \"QoS targets can no longer (or can again) be
fulfilled\") are defined by Table 6.1.3.18-1 in TS 23.503 [5] and also these
events are supported by Nnef_EventExposure, Npcf_EventExposure and
Npcf_PolicyAuthorization services.
2\. NEF sends Npcf_EventExposure_Subscribe request (or
Npcf_PolicyAuthorization_Subscribe request) with [target UE, Event ID
parameter] to each PCF per UEs.
3\. PCF(s) sends Npcf_EventExposure_Notify (or
Npcf_PolicyAuthorization_Notify) message with execution results (e.g. the UL
packet delay of UE) to NEF.
4\. The NEF aggregates the event reports from PCF(s) based on \"Group
Reporting Mode\" parameters. If \"Group Reporting Mode\" is set to \"Group
Member\", NEF aggregates the event reports of all UEs in the target group. If
\"Group Reporting Mode\" is set to \"Group Reporting Guard Time\", NEF
aggregates the monitoring reports until Group Reporting Guard timer is
expired.
Then, NEF calculate the group performance according to \"Group Performance
Type\" and the aggregated event reports. For instance, if \"Group Performance
Type\" is set to \"max\", and the monitoring results (e.g. [UE1, \"UL packet
delay\": 1msec] and [UE2, \"UL packet delay\": 2msec] are reported by PCF(s)
at step 3, NEF calculates the group of UEs performance as \"2msec\".
5\. The NEF sends the group performance to AF via Nnef_EventExposure_Notify.
### 6.21.3 Impacts on services, entities and interfaces
NEF:
\- Enhanced Nnef_EventExposure_Subscribe service operation by adding \"Group
Performance Type\" parameter (i.e. \"worst\", \"mean\", \"best\", \"sum\") as
a new optional input parameter and by supporting enhanced Event Reporting
Information. The enhanced Event Reporting Information is included by new
optional parameter (i.e. \"Group Reporting Mode\" parameter (i.e. \"Group
Member\", \"Group Reporting Guard Time\")).
\- Enhanced NEF operations to request the event report per UE to PCF(s) (i.e.
Npcf_EventExposure_Subscribe request or Npcf_PolicyAuthorization_Subscribe
request) according to requested Event ID from AF and to aggregate the event
reports of each UE according to \"Group Reporting mode\" parameter.
\- Enhanced NEF operations to aggregate the event report (i.e. performance) of
UEs in the group and calculate the group performance from the aggregated UEs\'
performance based on the requested \"Group Reporting mode\" and Group
Performance Type\", respectively.
## 6.22 Solution #22: 5GC-assisted Federated Learning over 5G VN group
### 6.22.1 Description
This solution addressed Key Issue #7 \"5GS Assistance to Federated Learning
Operation\".
In federated learning (FL), multiple rounds of training and interactions are
required between central server and edge nodes (e.g. edge servers or UEs). It
can be considered that federated learning is a kind of group training that
does not reveal the privacy of edge nodes. In order to improve the efficiency
of federated learning, it is necessary to ensure a more stable connection
between edge nodes and central server, and a consistency of the communication
characteristics and requirements of each edge node, such as the requirement of
resources, bandwidth, delay, and the unified start and termination of
training.
This solution proposes to form the edge nodes and central server of federated
learning into a 5G VN group in order to facilitate unified management of
member in the LAN group, allocation of resources, adding and removing FL
members flexibly, group-level rules management, adjustment of Access and
mobility related and Session management related policies.
NWDAF provides suggestions to AF to establish VN group with the related
policies, and may also include the suggested FL member list if member
selection is required by AF.
### 6.22.2 Procedures
#### 6.22.2.1 Procedure of VN group establishment by AF
Figure 6.22.2.1-1 shows the procedure for VN group establishment initiated by
AF.
Figure 6.22.2.1-1: Procedure of VN group establishment by AF
1\. The AF subscribes to receive analytics via NEF by invoking
Nnef_AnalyticsExposure_Subscribe service operation as defined in TS 23.502
[4]. The parameters includes:
\- Analytics ID.
\- Member selection flag: A flag indicating whether member selection is
required.
\- Analytics Filter Information including:
\- Members list (a list of SUPIs or group ID, if member selection flag is 0),
candidate members list (a list of SUPIs or Group ID, if member selection flag
is 1) or any UE (if member selection flag is 1).
\- [Optional] Maximum and/or minimum number of members (if member selection
flag is 1).
\- Area of Interest.
\- S-NSSAI or DNN.
\- Expected time period.
\- [Optional] Information of ML model to be trained (e.g. model size).
\- [Optional] The requirements of performance (e.g. bandwidth, time delay
etc.).
2\. Based on the subscription from the AF, the NEF subscribes to NWDAF by
invoking the Nnwdaf_AnalyticsSubscription_Subscribe service operation.
3\. The NWDAF collects data and do the analytics. If the member selection flag
is 1 and the user consent is granted, NWDAF may begin to select members from
the list of candidate UE provided by AF. NWDAF may conduct \"UE mobility
analytics\", \"abnormal behaviour related network data analytics\", \"Network
Performance Analytics\", \"NF load analytics\", \"User Data Congestion
Analytics\", \"DN performance analytics\" and other Analytics ID to select the
appropriate members. Based on the analytics results, the NWDAF may also
suggest a VN group data and assistant information for the related policies..
Editor\'s note: Whether the NWDAF can provide such information is FFS.
4\. NWDAF sends the analytics results to NEF by invoking
Nnwdaf_AnalyticsSubscription_Notify service operation.
5\. The NEF notifies the analytics information to AF by invoking
Nnef_AnalyticsExposure_Notify service operation.
6\. AF sends VN group data as defined in clause 4.15.6.3b of TS 23.502 [4] via
UDR using the procedure specified in clause 4.15.6.7 of TS 23.502 [4]. PCF
generates URSP rules based on VN group data and delivers it to UE using the
procedure specified in clause 4.2.4.3 of TS 23.502 [4].
7\. AF sends the exclusive PCC rules for the VN group as defined in TS 23.503
[5] clause 6.3 to PCF via UDR using the procedure specified in clause 4.15.6.7
of TS 23.502 [4].
8\. AF may trigger PDU session establishment.
9\. UEs that have previously received URSP rules establish PDU session using
the procedure in clause 4.3.2.2.1 of TS 23.502 [4] and join the VN group.
10\. AF starts Federated Learning with selected UEs over the established VN
group.
11\. During the learning, the AF may sends subscription of network performance
monitoring analytics of member UE list to NWDAF that may include \"Network
Performance Analytics\", \"UE mobility analytics\", \"User Data Congestion
Analytics\", \"DN performance analytics\", etc.. The AF may also modify the
candidate UE list, and subscribe analytics of the new candidate UE list that
may include the Analytics IDs in step 3.
12\. The NWDAF collects data and do the analytics based on the AF\'s
subscription.
13\. NWDAF notifies the updated suggested member list (if required), and the
analytics results to NEF by invoking Nnwdaf_AnalyticsSubscription_Notify
service operation.
14\. The NEF notifies the analytics information to AF by invoking
Nnef_AnalyticsExposure_Notify service operation.
15\. AF modifies VN group data and/or members via UDR using the procedure
specified in clause 4.15.6.7 of TS 23.502 [4]. The AF can change the candidate
UE list based on internal decision or analytics result. The AF can send
request to add or remove FL members at any time. The PCF modifies URSP rules
based on VN group data and delivers it to UE using the procedure specified in
clause 4.2.4.3 of TS 23.502 [4].
16\. AF modifies the PCC rules for the VN group using the procedure specified
in clause 4.15.6.7 of TS 23.502 [4]. A FL task contains multiple rounds of
training. Steps 14-19 may be repeated for multiple times based on the
requirements of subscription from AF to NWDAF.
### 6.22.3 Impacts on services, entities and interfaces
NWDAF:
\- Supports application federated learning related analytics (e.g. a new
Analytics ID);
NEF:
\- Supports receiving application federated learning related subscription.
## 6.23 Solution #23: Federated Learning Assistance Function assisting on
federated learning members selection
### 6.23.1 Description
This solution addresses aspects of key issue #7 on 5GS Assistance to Federated
Learning Operation and key issue #3 on 5GC Information Exposure to authorized
3rd party for Application Layer AI / ML Operation.
The solution allows the 5GS to suggest devices that should be part of FL
operation, based on requirements expressed by the AI/ML application server.
The solution relies on introduction of a Federated Learning Assistance
Function which, when receiving a request from the AI/ML application server
(acting as AF), helps to select UEs suitable to participate to the FL
operation. The AI/ML application Server tasks the Federated Learning
Assistance Function to propose UEs for FL operation. Based on suggestion from
the Federated Learning Assistance Function, the AI/ML application server can
trigger FL operations. The Federated Learning Assistance Function can be
integrated in NEF, in NWDAF or be standalone.
Further, the Federated Learning Assistance Function monitors whether suggested
UEs remain available (e.g. registered, active, reachable), or still meet other
selection criteria e.g. are still in the area of interest as proposed by the
AI/ML application server. If UEs become unavailable or no longer meet
selection criteria, the Federated Learning Assistance Function notifies the AF
and may suggests new UEs. The AF then sends to suggested UEs a request to
start federated learning cycle(s) and provides input model and receives output
model from each UE for each learning cycle.
The Federated Learning Assistance Function may inquire or subscribe to UE
locations (e.g. via AMF) and predictions (e.g. from NWDAF) about network load
at UE locations and select the UEs located in network areas with lower load.
The Federated Learning Assistance Function may inquire analytics about UE or
network serving the UE (e.g. from NWDAF, e.g. Observed Service Experience
related network data analytics, Network Performance Analytics, UE related
analytics e.g. UE mobility analytics, User Data Congestion Analytics, and/or
Dispersion Analytics as defined in TS 23.288 [6]) and may preferably select
UEs served by less loaded network components.
The Federated Learning Assistance Function may query or subscribe at AMF to UE
related events such as connectivity state, UE loss of communication, UE
reachability status, registration state changes, UE location, or UE moving in
or out of area of interest, to inquire or monitor availability of UEs and
preferably select connected, active, registered, and/or reachable UEs, and/or
UEs within a desired area.
The Federated Learning Assistance Function may query or subscribe at UDM for
UE reachability and preferably select reachable UEs. The Federated Learning
Assistance Function shall query or subscribe at UDM for roaming status and
shall only select non-roaming UEs.
### 6.23.2 Procedures
The procedure for Federated Learning Assistance Function assisting on
federated learning members selection is depicted in figure 6.23.2-1.
Figure 6.23.2-1: Federated Learning Assistance Function provides suggestions
for UEs that can participate to FL operation
NOTE 1: For simplicity, NEF is not shown in the figure, however, the 3rd party
AF would first interact with NEF which then would in turn interact with the
Federated Learning Assistance Function.
1\. The AI/ML application server (acting as AF) prepares for running FL
training by collecting information such as potential FL members, FL aggregated
model size, local model size, model aggregation average latency target for FL
iterations, and duration of an iteration, time window when FL training needs
to be performed. It determines an initial list for candidate FL members.
2\. The AF tasks Federated Learning Assistance Function (which could be
integrated in NEF, NWDAF or be standalone) to propose UEs for FL operation.
The AF indicates a list or group of UEs to choose from, the number of UEs
required to perform federated learning cycle, possibly a desired location of
UEs in a form of a target area for FL, duration of an iteration and desired
average latency for FL iterations. When providing a target area for FL, the AF
may provide sub-areas, and provide a percentage of UEs that should take part
in FL from each sub-area, and/or a minimum number of UEs and /or a maximum
number of UEs that should take part in FL from each sub-area.
Optionally, the AF may provide time when to start federated learning, duration
of federated learning, size of input model and/or output model.
NOTE 2: Step 2 is shown as AIML_session Create Request, but step 2 could also
be realized via an analytics request / subscription with new analytics type.
3-4. The Federated Learning Assistance Function may query or subscribe at AMF
to UE related events such as connectivity state, UE loss of communication, UE
reachability status, registration state changes, UE location, or UE moving in
or out of area of interest, to inquire or monitor availability of UEs and
preferably select connected, active, registered, and/or reachable UEs and/or
UEs within a desired region.
5\. The Federated Learning Assistance Function may query or subscribe at UDM
for UE reachability and preferably select reachable UEs. The Federated
Learning Assistance Function shall query or subscribe at UDM for roaming
status and shall only select non-roaming UEs.
6-7. The Federated Learning Assistance Function may inquire analytics about UE
or network serving the UE (e.g. from NWDAF, e.g. Observed Service Experience
related network data analytics, Network Performance Analytics, UE related
analytics, UE mobility analytics, User Data Congestion Analytics, and/or
Dispersion Analytics as defined in TS 23.288 [6]) and may preferably select
UEs served by less loaded network components.
NOTE 3: Steps 3-4, 5 and 6-7 can happen in parallel. Federated Learning
Assistance Function can decide to apply steps 3-4 only, or step 5 only,
instead of applying both steps 3-4 and step 5.
8\. The Federated learning Assistance Function select UEs for the federated
learning from the group of UEs. The Federated Learning Assistance Function may
select more UEs than requested to prepare for unresponsive UEs.
9\. The Federated Learning Assistance Function provides a list of suggested
UEs to the AF, possibly containing more UEs than requested by the AF at step
2. The Federated Learning Assistance Function can provide different lists of
UEs for different time windows.
10\. The AF sends to suggested UEs a request to start federated learning
cycle(s) with input model and receives output model from each UE for each
learning cycle.
11-12. The Federated Learning Assistance Function monitors whether suggested
UEs remain available (registered, active, reachable), or still meet other
selection criteria e.g. area of interest. If UEs become unavailable or no
longer meet selection criteria the Federated Learning Assistance Function
notifies the AF, together with time information when the UEs become
unavailable. The Federated Learning Assistance Function may also suggest new
UEs for FL operation together with related time window(s).
13-16. When the AF requests termination of federated learning session from
Federated Learning Assistance Function, the Federated Learning Assistance
Function terminates related events subscriptions and analytics subscriptions
at AMF, UDM, and/or NWDAF.
### 6.23.3 Impacts on services, entities and interfaces
Federated Learning Assistance Function providing suggestions to the AI/ML
application server on UEs that should take part of FL operation.
NEF services to allow AI/ML application server to use the Federated Learning
Assistance Function services.
New analytics from NWDAF if the Federated Learning Assistance Function is
located in NWDAF.
Editor\'s note: Where the Federated Learning Assistance Function is located,
e.g. at NEF, or NWDAF or standalone, is to be decided during the evaluation
and conclusion phase. If standalone, whether the function will only assist FL
operation or assist also other AI/ML operations is to be decided during the
evaluation and conclusion phase..
## 6.24 Solution #24: 5GS Assistance to Federated Learning
### 6.24.1 Description
This solution is about KI# 7 to address how and what information provided by
5GC to the AF to select the group of UEs which will be part of FL operation.
Due to large model files transmission between server and clients and multi
times interactions in the FL process, it will lead to heavy data traffic if FL
interaction data is transferred between AF server and UE client(s) via 5GS. As
a consequence, the UE selection and data transmission for FL training should
be more careful in 5G. To ensure that the training process of FL not lead
network performance degrading and traffic/fee for clients increasing
substantially, one criterion is to choose those UEs who are in WLAN and the
signal quality is good enough.
The AF can consume WLAN performance analytics per UE from the NWDAF for
candidate UE list or for any UE in the AOI. Then take the WLAN performance
analytics per UE, UE consent for FL and UE capability for FL of each UE into
account, the AF determines the UE group for FL.
### 6.24.2 Procedures
Figure 6.24.2-1: Procedure for 5GS Assistance to Federated Learning
1\. To select UE group to participate in Federated Leaning procedure, the AF
for Federated Leaning subscribes to WLAN Performance analytics per UE list
from the NWDAF via NEF by invoking the Nnef_AnalyticsExposure_Subscribe
service operation, including Analytics ID=WLAN Performance, Analytics
filter=AOI, Target of analytics=candidate UE list and preferred reporting
granularity=per UE.
2\. Based on the request from the AF, the NEF subscribes to WLAN Performance
analytics by invoking the Nnwdaf_AnalyticsSubscription_Subscribe service
operation. Wherein, the NEF may map the AOI e.g. geographical area provided by
the AF to the area e.g. TA or cell list inside network, and map the candidate
UE ID list to the UE ID list used inside the network.
3-4. The NWDAF collects related data from data providers, e.g. OAM, UPF and
SMF, and derives requested analytics with the collected data as defined TS
23.288 [6] and UE ID. The detailed operations are similar as the steps 2-5
defined in clause 6.11.4 of TS 23.288 [6]. The outputs of the WLAN performance
analytics is per UE granularity, which contains the start time, duration,
quality and performance of WLAN connection (e.g. the proportion of time the
signal quality is above the threshold) per UE location.
NOTE: How to collect data from UPF should depend on the conclusion of
FS_UPEAS.
5\. NWDAF notifies the NEF with the analytics information by invoking
Nnwdaf_AnalyticsSubscription_Notify service operation.
6\. The NEF notifies the AF with the analytics information by invoking
Nnef_AnalyticsExposure_Notify service operation defined in TS 23.502 [4].
7\. After receiving the WLAN performance analytics per UE, the AF for
Federated Leaning selects the UE group to participate in Federated Leaning
procedure, taking the WLAN performance analytics per UE, UE consent for FL and
UE capability for FL of each UE into account.
### 6.24.3 Impacts on services, entities and interfaces
NWDAF:
\- Enhances the existing WLAN performance analytics to WLAN performance
analytics per UE granularity, which contains the start time, duration, quality
and performance of WLAN connection (e.g. the proportion of time the signal
quality is above the threshold) per UE location, and reports it per UE
granularity according to the request from the AF.
\- Collects data from corresponding data provider(s) to derive the enhanced
WLAN performance analytics.
AF:
\- Requests WLAN performance analytics per UE granularity from the NWDAF.
\- Selects the UE group to participate Federated Leaning based on the WLAN
performance analytics per UE, UE consent for FL and UE capability for FL of
each UE.
## 6.25 Solution #25: Providing 5GS Assistance Information to AF for Federated
Learning Operation
### 6.25.1 Description
This is a solution for key issue #7 \"5GS Assistance to Federated Learning
Operation\".
The outline of the proposed solution for providing 5GS assistance information
to AF for Federated Learning operation is as below:
\- This solution introduces an AIML NF, which may be co-located with NEF and
used for external exposure to assist 5G AIML services. (e.g. receives request
from AF (i.e. AI/ML Application Server) and response/notify with 5GS
assistance information for AIML operation).
\- AI/ML Application Server requests assistance information with input
parameters for FL operation. (e.g. UE list, QoS references, geographic area,
minimum number of UEs for FL operation, Preferred AIML time periods, whether
to request the lists of candidate UEs for FL operation, preferred time periods
for AIML operation, Wireless Access technology, the quality of signal, etc.).
For example, some FL operation should be performed during a certain time or
some FL operations may not need to be performed immediately. In this case,
AI/ML Application Server can provide preferred AIML operation time period.
Also, based on the training data size, AI/ML Application Server can provide
expected AIML operation time duration. The AIML NF/NEF can derive recommended
time periods for AIML operation by considering the preferred AIML operation
time periods and the expected AIML operation time duration, and by predicting
the network condition such as user data congestion time.
\- AI/ML Application Server can subscribe for AIML assistance information for
FL operation. For example, AI/ML Application Server may want to update FL
member UEs for FL operation after starting the FL operation if it is expected
that the member UE\'s threshold for QoS references or QoS Requirements cannot
be met or new candidate UE can meet the threshold due to changed network
condition. In this case, AIML NF/NEF can provide updated assistance
information (e.g. new recommended UEs) to AI/ML Application Server so that it
can reselect the FL member UEs that can satisfy the QoS requirements based on
the assistance information.
AI/ML Application Server can manage the subscription with a Subscription
Correlation ID. It can update the subscription (e.g. a new list of UEs, QoS
requirements) or unsubscribe to AIML NF/NEF using Subscription Correlation ID.
\- AIML NF/NEF processes the request from AI/ML Application Server by
interacting with other NFs such as NWDAF, UDM, SMF, UPF, OAM, etc. and
generates assistance information (e.g. lists of candidate UEs for recommended
time periods) for FL operation based on the collected information, and
provides the assistance information for FL operation requested by AI/ML
Application Server.
### 6.25.2 Procedures
#### 6.25.2.1 Procedure for Providing 5GS Assistance Information for Federated
Learning Operation
Figure 6.25.2.1-1 shows the procedure for providing 5GS assistance information
to AI/ML Application Server for Federated Learning operation.
Figure 6.25.2.1-1: Procedure for providing 5GS assistance information for
Federated Learning operation
1\. AI/ML Application Server invokes
Nnef_AIMLAssistanceInfo_Request/Nnef_AIMLAssistanceInfo_Subscribe to
request/subscribe 5G assistance information with specific conditions for FL
operation. The AI/ML Application Server requests FL assistance information for
the UE list included in the request. It also indicates that these UEs are
authorized by AI/ML Application Server (application side) for FL operation.
The input parameters of the Nnef_AIMLAssistanceInfo_Request service operation
can be as below:
\- AF Identifier.
\- UE List (GPSIs, External Group ID, or IP addresses).
\- AF-Service-Identifier.
\- External Application Identifier.
\- QoS References or QoS requirements.
\- Whether to request the list of candidate UEs (If indicated, AIML NF/NEF
provides candidate UE list in the response).
\- Time when assistance information is needed (Indicates to the AIML NF/NEF
the latest time the analytics consumer expects to receive assistance data
provided by AIML NF/NEF).
\- Expected AIML operation time duration (Expected time duration by AI/ML
Application Server based on the training information such as training model
and training data size).
\- Preferred AIML operation time periods (Time periods that the AI/ML
Application Server want to perform AIML operation).
\- Whether to request the recommended AIML operation time periods (If
indicated, AIML NF/NEF provides recommended AIML operation time periods in the
response).
\- Traffic volume for downloading global model and uploading training results.
\- DNN and S-NSSAI.
\- Expected UE Moving Trajectory for each UE in the UE list (e.g. A planned
path of movement).
\- Area of Interest (AIML operation for the UEs in the area of interest).
\- Minimum number of UEs needed for FL operation.
\- Preferred Wireless Access technology (Access type/RAT type, e.g. WLAN, 5G,
Multi-Access, where the AI/ML Application Server expects the UE to stay for FL
operation).
\- Preferred quality of signal (Requirement of UE radio signal for FL
operation, e.g. average RSSI (received Signal Strength Indication) and RTT
(round trip time)) for WLAN.
\- UE traffic usage (the expected range of UE traffic usage or remaining
traffic for FL operation).
\- Whether to request Multi-Access PDU Session Information of the UE (Whether
the UE have established MA PDU Session, UE is allowed/capable to have MA PDU
Session for AIML FL application, which access type the PDU Session is
connected to).
Additional input parameters for the Nnef_AIMLAssistanceInfo_Subscribe service
operation can be as below:
\- Notification Target Address (+ Notification Correlation ID), when the AI/ML
Application Server subscribe to AIML NF/NEF.
\- Reporting Parameters (e.g. periodic reporting, Reporting Thresholds (QoS
References or QoS requirements)).
2-3. If the request from AI/ML Application Server is authorized, AIML NF/NEF
determines whether the UEs provided by AI/ML Application Server are authorized
by 5GC to support AIML operations and whether each UE consents to participate
in the FL operation from UDM, which is stored in the UE subscription
information, by invoking Nudm_SDM_Get service operation. After successful
response is received, the AIML NF/NEF may subscribe to be notified of the
Subscription data modification using Nudm_SDM_Subscribe.
If AI/ML Application server requested for MA PDU Session Information of UEs or
the network is configured to collect MA PDU Session information although the
application server did not explicitly request, AIML NF/NEF collects MA PDU
Session Information of the PDU session of DNN/S-NSSAI for FL operation from
the SMF. The AIML NF/NEF may subscribe to be notified of the MA PDU Session
information.
4\. For the authorized UEs for AIML operation by 5GC, AIML NF/NEF determines
appropriate analytics information and input parameters to be collected based
on the requested inputs in step 1 to derive assistance information such as
lists of candidate UEs or recommended areas with recommended time periods that
can satisfy the request from AI/ML Application Server.
The inputs from step 1 can be used for input parameters to request/subscribe
analytics information to NWDAF. For example, QoS reference, Expected AIML
operation time duration and Preferred AIML operation time periods can be used
to request QoS Sustainability Analytics at that time. Also, \"Time when
assistance information is needed\" can be used as an input for \"Time when
analytics information is needed\" to NWDAF as clause 6.1.3 in TS 23.288 [6].
Traffic volume for downloading global model and uploading training results can
be used to predict the time duration for downloading global model and
uploading training result.
AIML NF/NEF may request/subscribe analytics information to NWDAF in order to
collect analytics information of the requested UEs (e.g. UE Communication
analytics, UE Mobility analytics, User Data Congestion analytics, QoS
Sustainability analytics, WLAN performance analytics per UE). If the AI/ML
Application Server did not provide some of input parameters, AIML NF/NEF can
derive them based on local configuration or based on analytics such as UE
Mobility analytics and WLAN performance analytics per UE. If \"Preferred AIML
operation time periods\" and \"Time when assistance information is needed\"
are not provided as input parameters, it can be regarded as the immediate AIML
operation will be performed.
NOTE: The output of WLAN performance analytics per UE will be decided by
FS_eNA_Ph3.
5\. The NWDAF collects the data for the requested Analytics IDs as specified
in TS 23.288 [6].
6\. The NWDAF derives the requested analytics as specified TS 23.288 [6].
7\. The NWDAF provides analytics response to the AIML NF/NEF.
8\. AIML NF/NEF collects all the analytics information from NWDAF and derives
assistance information that can satisfy the request from AI/ML Application
Server taking into account, e.g. the QoS, User Data Congestion, UE mobility,
the preferred AIML time periods for FL operation, preferred Wireless Access
technology, preferred quality of signal, and UE traffic usage, MA PDU Session
information, etc.
9\. AIML NF/NEF responds/notifies to the AI/ML Application Server with the
derived assistance information.
The output parameters of the Nnef_AIMLAssistanceInfo_Request service operation
can be as below:
\- Set of the 5GS Assistance information requested by AI/ML Application
Server. Each 5GS Assistance information can contain:
\- List of candidate UEs for FL operation.
\- Recommended time period to perform AIML operation.
\- Recommended area for AIML operation.
\- Recommended Access type/RAT type to perform AIML operation.
\- Multi Access PDU Session information of the UE.
Each of above information can be provided in a prioritized order to help the
AI/ML Application Server to select the UEs.
The lists of candidate UEs for recommended FL operation can be different
according to the recommended time period and/or the recommended area for AIML
operation.
If the \"time when assistance information is needed\" was provided in step 1,
AIML NF/NEF takes this into account in responding to the AI/ML Application
Server.
Multi-Access PDU Session information can be provided with candidate UEs or the
list of candidate UEs can be generated taking into account the MA PDU Session
information (e.g. suggest for the UEs have MA PDU Session).
Based on the received the 5GS assistance information, the AI/ML Application
Server can select and manage the group of UEs, and determine the start time
for FL operation.
10\. If AIML NF/NEF subscribed for MA PDU Session information at step 3 and
the MA PDU Session information of the UEs are changed (e.g. the UE previously
connected with 3GPP access, additionally connected with non-3GPP access), SMF
notifies the changed MA PDU Session of the UE to AIML NF/NEF.
11-15. If AI/ML Application server and AIML NF/NEF subscribed for AIML
assistance information at step 1/step 4 when NWDAF generates new analytics,
AIML NF/NEF notifies new assistance information to AI/ML Application server.
After the start of FL operation, AIML NF/NEF can notify new AIML assistance
information (e.g. new recommended UEs) due to the changed network condition
and AI/ML Application Server can reselect FL members based on the information.
### 6.25.3 Impacts on services, entities and interfaces
UDM:
\- New subscription information whether the UE is authorized for 5G AI/ML
operation.
AIML NF/NEF:
\- AIML NF may be co-located with NEF.
\- New service operation to assist application AI/ML operation.
NWDAF:
\- Supports WLAN performance analytics per UE.
SMF:
\- Provides UE\'s MA PDU Session information of DNN/S-NSSAI used for AIML
operation.
## 6.26 Solution #26: FL operation with 5GS coordination for UE selection
### 6.26.1 Description
Based on the KI#7 objective, federated learning between the UE and application
server (federated server) need to determine and agree on learning via mobile
network. In this case, application server needs to coordinate with the mobile
network before determining the participate UEs, learning model and learning
time.
This solution proposed that application server determine the UE groups for FL
operation based on the UE\'s capability, UE\'s wishes (if any e.g. time window
that UE is available), location, and available QoS. The application server
coordinate with the 5GS (e.g. available QoS) to finalize the UE list for FL
operation. For instance, if the 5GS cannot provide the agreed QoS for specific
UE, the application server does not consider this UE for the FL operation.
When an application server determines to perform the federated learning with
UEs in a specific location, the application server request the 5GC via NEF
with required QoS, location information and UEs details such as UE ID. In
addition, optionally, application server can also provide time window (e.g.
start and end time) of FL operation. The NEF checks the authorization of the
application server request with local policy or with a UDM. NEF forwards the
request to 5GC NF.
### 6.26.2 Procedures
Figure 6.26.2-1: Procedure to coordinate with 5GS for UE selection
0\. Both the UE and application server exchanges the FL operation information
such as UE\'s capability, UE\'s wishes (if any e.g. time window that UE is
available), location information. This operation takes place in the
application layer.
NOTE 1: The communication between the AF and UE is outside the scope of SA
WG2.
1\. When an AF determines to perform the federated learning with UEs in a
specific location, the AF request the PCF via NEF with QoS requirements,
location information specific UE ID, external group ID if available. In
addition, optionally, AF can also provide time window (e.g. start and end
time) of FL operation. The NEF checks the authorization of the application
server request with local policy or with a UDM. NEF forwards the request to
PCF.
NOTE 2: Based on step 0, the AF determines the UE list and the QoS
requirements to perform the FL operation. Also, what triggers the FL operation
(e.g. at a specific location, in a specific time window) is AF\'s internal
business logic and is outside the scope of SA WG2.
2\. Based on the policy, the PCF checks the AF request and determine whether
the network can provide required QoS in specific location on required time
window (if included). The PCF may interact with the NWDAF and request the
Network Performance analytics information for the Desired time window in the
area of interest and other analytics such as UE related analytics as defined
in TS 23.288 [6].
3\. If PCF determine that it can allocate the required QoS, then the PCF sends
the accept message to the AF with the agreed resources (QoS) information. If
PCF determine that it cannot allocate the required QoS on specified time or
time window, the PCF rejects the AF request. In addition, PCF may provide
alternative time or time window that network can provide required resources
(QoS) in the rejection message.
4\. Up on the notification from PCF, AF selects the UEs and sends FL operation
request to the UE with agreed time or time window with the network. The UEs
determine whether it can join the FL operation or not. If yes, UE sends the
accept notification to the AF or else reject notification.
Based on the notification from the UEs, the AF finalizes UE list which
participate the federated learning operation.
NOTE 3: It is up to the AF implementation the selection and finalization of
the UE list.
### 6.26.3 Impacts on Existing Nodes and Functionality
NOTE: The current mechanism already supports the coordination between the PCF
and AF which can be used for the UE selection for FL operation by the AF based
on AF implementation logic. Therefore, no new impacts are realized in the
solution, since most of the operation takes place in the application layer.
## 6.27 Solution #27: Assistance to selection of UEs for federated learning
operation
### 6.27.1 Description
This solution addresses the issue about assistance to selection of UEs for FL
operation defined in Key Issue #7: 5GS Assistance to Federated Learning
Operation.
The key operational characteristics of FL is that UEs play a role as training
devices and upload local update information to a central server (we call it
\"FL server\") for global model update. It enables model training in a
distributed manner without privacy concern, but it tends to cause poor model
performance due to various constraints or characteristics of UEs who are
selected as training devices. For example, when most of devices selected for
local training tasks have low power or high mobility, model performance can be
degraded by incomplete interim updates. It motivates us to investigate on what
information is useful for AF to select appropriate UEs for FL operation. In
the aforementioned example, prediction of high mobility can be provided by 5GS
(i.e. NWDAF in 5GC) while low-power state information can be provided by a UE
application, not by 5GS. Note that the latter case is not applicable to 5GS
assistance defined in Key Issue #7. Thus, the solution only deals with how 5GS
could provide assistance to AF so that appropriate UEs can be selected for FL
operation as in the former case.
This solution proposes a NWDAF-assisted approach where NWDAF in 5GC provides
useful analytics information for AF to select appropriate UEs for FL
operation. Here, it is assumed that analytics from the NWDAF is requested or
subscribed by AF (i.e. Analytics service consumer is AF). The proposed
solution is based on existing analytics (e.g. QoS Sustainability, Service
Experience, UE mobility, UE Communication, User Data Congestion, and/or
Abnormal behavior). For example, QoS Sustainability and/or Service Experience
Analytics can be used to select UEs who can provide acceptable QoS
sustainability and/or service experience level for FL operation. UE
Communication and User Data Congestion Analytics can be also used to select
UEs who have regular and light traffic patterns as much as possible during the
model distribution and upload phases for FL operation. In addition, UE
mobility and/or Abnormal behavior Analytics can be used to exclude UEs with
high mobility and/or high abnormality level to achieve better model
performance.
Any extension for procedures defined in existing analytics is not required.
However, some enhancements are proposed for the following analytics by
targeting FL operation.
1\. QoS Sustainability Analytics:
\- Proposal: Extend \"Target of Analytics Reporting\" including a single UE
level granularity without location information as a mandatory parameter in
Analytics Filter Information, instead of \"any UE\" in a location of interest
(e.g. TAIs or Cell IDs) as in the existing Analytics. In order to provide the
analytics information in the UE level granularity, input data from OAM may
also need to be extended such as RAN throughput per UE and QoS flow
Retainability per UE.
\- Motivation: \"Target of Analytics Reporting\" needs to be provided in the
UE level granularity to support FL operation because supportable QoS levels
from some UEs in the same area (e.g. TAIs or Cell IDs) can be different and
thus unreliable prediction information can be provided by the existing
Analytics. Finally, poor model performance can be achieved by UEs selected
based on the unreliable prediction information.
2\. Service Experience Analytics:
\- Proposal: Extend \"customized MOS at AF or QoE metrics at UE (via AF)\"
including success rates for upload of local update results from UE to AF
within a given interval or success rates for model distribution from AF to UE
within a given interval to support FL as a new promising AI/ML service type,
not just mentioning a general description (e.g. a customized MOS for any kind
of service including those not related to video or voice, and ASP specific QoE
metrics as agreed in the SLA) as in the existing Analytics.
\- Motivation: The extended \"customized MOS at AF or QoE metrics at UE (via
AF)\" including success rates for model update and distribution need to be
explicitly specified because FL is one of new main service types considering
that 5GS will be used as a platform to support AI/ML services.
NOTE: Any potential impact towards NWDAF will be coordinated with eNA study in
Rel-18.
### 6.27.2 Procedures
Figure 6.27.2-1 shows the procedure for 5GS assistance to AF selecting UEs for
FL operation.
Figure 6.27.2-1. Procedure for 5GS assistance to AF selecting UEs for FL
operation
1\. It is assumed that PDU session establishment procedures were already
complete as follows: UE already established PDU session to the application
server of ASP with interested AI/ML application services. As an option, the
application server may trigger for UE who provides consent to establish a new
PDU session to a central FL server via the user plane (UP) so that the FL
server can play a dedicated role for training tasks. On receipt of the
trigger, UE may establish the new PDU session to the FL server. The ASP
application server or FL server (which is mapped with AF in the figure) can
collect necessary information (e.g. computation and network capability and
data characteristics) for training from UE via the PDU session.
2\. The AF owned by the ASP may request or subscribe to the NWDAF to collect
analytics information for interested UEs such as QoS Sustainability, Service
Experience, UE mobility, UE Communication, User Data Congestion, and/or
Abnormal behaviour. Here, the NEF is used when the AF is untrusted as 3rd
party as usual.
3\. The NWDAF collects necessary data for analysis from NFs (e.g. AMF, SMF,
AF) or OAM.
4\. The NWDAF checks the trigger conditions for analytics and derives the
requested analytics. The NWDAF also detects notification conditions (e.g.
defined by reporting thresholds).
5\. The NWDAF provides response or notification to the AF.
6\. Based on the response or notification information provided by the NWDAF,
the AF can (re)select UEs for FL operation. Then, the AF would (re)distribute
a global model to the selected UEs via the UP and aggregate local training
update results from the UEs to update the global model.
Steps 2 to 6 can be repeated whenever new analytics is requested by the AF.
### 6.27.3 Impacts on services, entities and interfaces
NWDAF:
\- Existing Analytics IDs such as QoS Sustainability and Service Experience
need to be enhanced to support FL operation as described in clause 6.27.1.
\- For QoS Sustainability Analytics, input data from OAM need to be extended
to include \"Throughput for DL and UL per UE, Packet delay for DL and UL per
RAB/DRB per UE, Packet loss rate for DL and UL per RAB/DRB per UE in TS 37.320
[12]\" for the analytics information in the UE level granularity.
\- For Service Experience Analytics, input data from UE (via AF) and AF need
to be extended to include success rates for model update and distribution.
UE:
\- New QoE metrics for model distribution dedicated for FL operation need to
be measured and provided to NWDAF as described in clause 6.27.1.
AF:
\- New customized MOSs for model update dedicated for FL operation need to be
measured and provided to NWDAF as described in clause 6.27.1.
## 6.28 Solution #28: Application AI/ML Assistance Services
### 6.28.1 Description
This solution has impact to all KIs.
It is observed that, many of the Application AI/ML operation may request
similar assistance info and operation support from the 5G Core, the intent of
this solution is to take into the considerations of the system requirements as
identified by the 7 key issues as captured in clause 5, it proposes a common
solution framework to assist various Application AI/ML operations which
acquire similar assistance info and procedures from 5G core. In this
framework, the similar service requirements and operational behaviours are
organized into various Application AI/ML Assistance (AaaML) Service Profiles
where each profile defines specific AaaML Service.
Editor\'s note: Whether a generic and dedicated application AIML service
framework or NF is required cannot be determined until other solutions
discussions progress and level of visibility to the 5GC of such operations is
clarified.
The AaaML Services are a set of collective extensions to the existing 5G Core
Services (e.g. NEF services) and the new 5G Core services which are defined
specifically to assist the application layer AI/ML operation. With the support
of the AaaML Service Profile information that indicates specific service
requirements, an AaaML service can then be served by the existing 5G Core NF
(e.g. NEF) and the new 5G Core NF, referred as Application AI/ML Assistance
Network Function, i.e. AaaML NF, which is introduced by this proposal
specifically to support the coordination of the AaaML Service.
An AaaML Service Profile is composed of three main parts of information:
\- Objective of target AaaML operation:
\- e.g. Assuming the objective of this operation is to support \"AI/ML member
selection for a particular Application AI/ML operation based on per UE\'s QoS
sustainability\". In this case, the AI/ML member selection is the main
service, and the per UE\'s QoS sustainability analytics is the sub-service.
\- e.g. To expand the example above, instead of just referring to the UE\'s
QoS sustainability analytic to support \"AI/ML member selection, the UE\'s
location mobility event and moving direction event are also part of the
selection criteria. As a result, there are composite services which are
composed of QoS sustainability analytic, mobility event and moving direction
event to meet the objective of this given AaaML Service.
\- Input of provisioned service parameter(s):
\- e.g. minimum one way delay, predicted QoS performance within the next 5
minutes.
\- Output:
\- e.g. list of candidate UEs, event report for the group of UE\'s bandwidth
consumption.
The configuration of an AaaML Service Profile is dependent on the
corresponding Application.
Each AaaML Service Profile is identified by the AaaML Profile ID, Application
ID, UE ID or Group ID or Any and optionally, one or more AaaML Sub-Profile ID.
Each of the IDs above has the following purposes:
\- AaaML Profile ID - It identifies the main service of AaaML Service Profile
that defines:
i. what are the set of input AaaML service parameters required from the
consumer and how they may be translated (e.g. GPSI to SUPI, geographical
location into cell, TA, QoS requirements into QoS parameters etc.);
ii. what are the target AaaML service information are to be collected from 5G
Core (e.g. network analytic info for a given UE or a group or UEs, UE mobility
update etc.); and
iii. what are the target AaaML assistance operation is to be conducted in 5G
Core (e.g. data transmission, service provisioning, performance monitoring,
etc.).
\- (Optional) AaaML Sub-Profile ID - It describes the AaaML Service Sub
profile for specifying the composite set of service requirement(s) for the
target AaaML operation (e.g. AI/ML operation UE member selection based on QoS
sustainability performance, AI/ML data transmission based on Time Of Date
etc.). More than one Sub-profile can be specified for the given AaaML Service
Profile.
\- The Application ID - It identifies the Application that require 5G Core
assistance for the AI/ML operation.
\- UE ID or Group ID or any - The identifier of the target UE or a group of
target UE or any UE who is/are involved in the target AaaML service.
As part of the AaaML service solution, the new 5GC NF, AaaML NF, is introduced
to be the anchor point to coordinate the 5GC control plane and user plane
functionalities to assist the Application AI/ML operation. The benefits with
this new 5GC NF are:
\- a common point of contact between the Application AI/ML AF and the 5GC
which simplifies the external communication interface with the 5G system.
\- an anchor point to conduct the specific tasks which are required to
coordinate with other new or existing 5GC NF to assist the Application AI/ML
operation and therefore
\- a signalling aggregation, distribution and filtering point which could
minimize signalling overhead when supporting the communication between the
Application AI/ML AF and the 5GC
\- a AaaML service translator between the 3rd party Application AI/ML AF and
the 5GC according to the definitions of the AaaML Service Profile
\- a privacy shield for 5GS when exposing 5GS system information to AF to
assist the Application AI/ML operation (e.g. conceal the UE\'s exact location
information)
\- an enabler for mobile operator to provide Application AI/ML as-a-service
when continuing to evolve the 5GS assistance to support the Application AI/ML
operation
NOTE: AaaML NF is not a data analytics function nor it provides any assistance
to support network operation within the 5GC of which NWDAF provides.
Figure 6.28.1-1: 5GC Application AI/ML Service Assistance Framework
AaaML NF can be co-located with NEF or standalone. Note that, the standalone
the AaaML NF responds to the AaaML Service request as the Producer of which
the AaaML Service is not based on the extension of the existing NEF Service.
Such deployment consideration is necessary in order to ensure the integrity of
the existing NEF services in 5G Core when they are extended to support the
AaaML services so as not to confuse the service consumer(s) which are trying
to communicate with their corresponding serving service producer(s) using the
similar service based interfaces (i.e. Nnef_\).
Figure 6.28.1-2 below explains the standalone configuration considerations for
AaaML.
Figure 6.28.1-2: Considerations for Standalone AaaML NF when Leveraging
Existing Service Based Interface to support AaaML Services
### 6.28.2 AaaML Service Architecture
This solution introduces new network function, Application AI/ML Assistance
Network Function (AaaML NF), to provide necessary coordination support for the
AaaML Services as described in 6.28.1 above. The new service based interface
for AaaML NF is Naaaml. AaaML NF can be co-located with NEF or be standalone.
For standalone AaaML NF configuration, it is only allowed when AaaML NF is the
producer to respond to the AaaML Service request of which the service
procedure is not based on the extensions of the existing 5G Core Service (i.e.
NEF Service).
Figure 6.28.2-1: 5GS Service Architecture
### 6.28.3 AaaML Services
The AaaML Services are a set of collective extensions to the existing 5G Core
Services (e.g. NEF services, NWDAF services) and the new 5G Core. AaaML NF
which is specified to coordinate the 5G Core assistance to support the
Application AI/ML operation.
In this clause, Table 6.28.3-1 describes the new 5G Core Services specifically
defined for assisting the Application AI/ML operation of which the AaaML NF is
the producer to respond to the AaaML service request and to provide the
necessary coordination between various 5G Core Services (e.g. NEF services,
NWDAF services etc.) when responding to the AaaML service request.
Table 6.28.3-2 presents the AaaML service mappings which describe the
corresponding AaaML Service Profile and the corresponding existing/new 5G Core
Service procedures for a specific AaaML Service as described in the
appropriate clauses in the corresponding 3gpp specifications.
Table 6.28.3-1: AaaML services provided by AaaML NF (Producer)
+----------------+----------------+----------------+----------------+ | Service Name | Service | Operation | Example | | | Operations | | Consumer(s) | | | | Semantics | | +================+================+================+================+ | NaaaML_ | Request | Re | AF | | NetworkConsent | | quest/Response | | +----------------+----------------+----------------+----------------+ | | Subscribe | Su | AF | | | | bscribe/Notify | | +----------------+----------------+----------------+----------------+ | | Unsubscribe | | AF | +----------------+----------------+----------------+----------------+ | | Notify | | AF | +----------------+----------------+----------------+----------------+ | NaaaML_Candid | Request | Re | AF | | ateUESelection | | quest/Response | | +----------------+----------------+----------------+----------------+ | | Subscribe | Su | AF | | | | bscribe/Notify | | +----------------+----------------+----------------+----------------+ | | Unsubscribe | | AF | +----------------+----------------+----------------+----------------+ | | Notify | | AF | +----------------+----------------+----------------+----------------+ | Naaa | Subscribe | Su | AF | | ML_NWDAFAnaly | | bscribe/Notify | | | ticsCollection | | | | +----------------+----------------+----------------+----------------+ | | Unsubscribe | | AF | +----------------+----------------+----------------+----------------+ | | Notify | | AF | +----------------+----------------+----------------+----------------+
Table 6.28.3-2: Application AI/ML Assistance Information provided by NEF/AaaML
NF
+-------------+-------------+-------------+-------------+-------------+ | Application | AaaML | AaaML | Co | AaaML | | AI/ML 5GC | Service | Service | rresponding | Service | | Assistance | Profile | | | | | Operation | | Sub-profile | NEF/AaaML | D | | | (see | | | escriptions | | (see | Note-2) | (Optional) | NF Services | | | Note-1) | | | | (see | | | | (see | (see | Note-5) | | | | Note-3) | Note-4) | | +=============+=============+=============+=============+=============+ | Network | AaaML | AaaML Sub- | TBD | Network | | Consent | Profile ID: | Profile ID: | | Consent for | | | Network | (see | (see | accessing | | | Consent | Editor\'s | Editor\'s | target UE | | | | Note-1) | Note-2) | or Group of | | | | | | UEs related | | | | | | information | | | | | | for a | | | | | | specific | | | | | | a | | | | | | pplication. | +-------------+-------------+-------------+-------------+-------------+ | Network | AaaML | AaaML Sub- | TBD | Network | | Resource | Profile ID: | Profile ID: | | resource | | Monitoring | Network | (see | (see | performance | | | Resource | Editor\'s | Editor\'s | monitoring | | | Monitoring | Note-1) | Note-2) | (e.g. | | | | | | network | | | | | | load, QoS | | | | | | sus | | | | | | tainability | | | | | | etc.) to | | | | | | support | | | | | | application | | | | | | AI/ML model | | | | | | and data | | | | | | di | | | | | | stribution, | | | | | | transfer | | | | | | and/or | | | | | | training | +-------------+-------------+-------------+-------------+-------------+ | UE-related | AaaML | AaaML Sub- | TBD | UE-related | | Network | Profile ID: | Profile ID: | | network | | Performance | UE-related | (see | (see | performance | | Monitoring | Network | Editor\'s | Editor\'s | information | | | Performance | Note-1) | Note-2) | (e.g. QoS | | | Monitoring | | | monitoring, | | | | | | UE Mobility | | | | | | prediction | | | | | | etc.) to | | | | | | assist UE | | | | | | selection | | | | | | for | | | | | | Application | | | | | | AI/ML | | | | | | operation | +-------------+-------------+-------------+-------------+-------------+ | 5G Core | AaaML | AaaML Sub- | TBD | 5GC exposes | | Network | Profile ID: | Profile ID: | | network | | Exposure to | Network | (see | (see | information | | UE | Exposure to | Editor\'s | Editor\'s | to the UE | | | UE | Note-1) | Note-2) | which is | | | | | | used to | | | | | | facilitate | | | | | | UE\'s | | | | | | Application | | | | | | AI/ML | | | | | | operation | | | | | | (e.g. Model | | | | | | Training, | | | | | | Splitting | | | | | | and | | | | | | inference | | | | | | feedback | | | | | | etc.). | +-------------+-------------+-------------+-------------+-------------+ | 5G Core | AaaML | AaaML Sub- | TBD | 5GC exposes | | Network | Profile ID: | Profile ID: | | network | | Exposure to | Network | (see | (see | information | | AI/ML AF | Exposure to | Editor\'s | Editor\'s | to the UE | | | AI/ML AF | Note-1) | Note-2) | which is | | | | | | used to | | | | | | facilitate | | | | | | Application | | | | | | AI/ML | | | | | | operation | | | | | | (e.g. Model | | | | | | download, | | | | | | Splitting | | | | | | and | | | | | | inference | | | | | | feedback | | | | | | etc.). | +-------------+-------------+-------------+-------------+-------------+ | Candidate | AaaML | AaaML Sub- | TBD | 5GC | | UE(s) | Profile ID: | Profile ID: | | assistance | | | Candidate | (see | (see | to select | | Selection | UE(s) | Editor\'s | Editor\'s | candidate | | | | Note-1) | Note-2) | UE(s) to | | | | | | support | | | | | | Model | | | | | | Splitting, | | | | | | Training | | | | | | (either for | | | | | | FL or | | | | | | non-FL), | | | | | | inference | | | | | | feedback | | | | | | etc. | +-------------+-------------+-------------+-------------+-------------+ | Application | AaaML | AaaML Sub- | TBD | The 5GC | | AI/ML | Profile ID: | Profile ID: | | data | | Traffic | Application | (see | (see | trans | | Transport | AI/ML | Editor\'s | Editor\'s | fer/traffic | | | Traffic | Note-1) | Note-2) | routing | | | Transport | | | mechanisms | | | | | | to support | | | | | | the | | | | | | t | | | | | | ransmission | | | | | | of the | | | | | | Application | | | | | | AI/ML | | | | | | traffic(s) | | | | | | between | | | | | | AI/ML | | | | | | endpoints | | | | | | (i.e. UE | | | | | | and AF) | +-------------+-------------+-------------+-------------+-------------+ | NOTE 1: | | | | | | This column | | | | | | is to | | | | | | describe | | | | | | the one or | | | | | | more 5G | | | | | | core | | | | | | services | | | | | | (i.e. | | | | | | composite | | | | | | services) | | | | | | that assist | | | | | | the | | | | | | application | | | | | | layer AI/ML | | | | | | operation. | | | | | | | | | | | | NOTE 2: | | | | | | This column | | | | | | is to | | | | | | describe | | | | | | the AaaML | | | | | | Service | | | | | | Profile ID | | | | | | that maps | | | | | | to the main | | | | | | AaaML | | | | | | Service. | | | | | | | | | | | | The AaaML | | | | | | Service | | | | | | Profile | | | | | | defines (i) | | | | | | what are | | | | | | the set of | | | | | | input AaaML | | | | | | service | | | | | | parameters | | | | | | required | | | | | | from the | | | | | | consumer | | | | | | and how | | | | | | they may be | | | | | | translated | | | | | | (e.g. GPSI | | | | | | to SUPI, | | | | | | g | | | | | | eographical | | | | | | location | | | | | | into cell, | | | | | | TA, QoS | | | | | | r | | | | | | equirements | | | | | | into QoS | | | | | | parameters | | | | | | etc.), (ii) | | | | | | what are | | | | | | the target | | | | | | AaaML | | | | | | service | | | | | | information | | | | | | are to be | | | | | | collected | | | | | | from 5G | | | | | | Core (e.g. | | | | | | network | | | | | | analytic | | | | | | info for a | | | | | | given UE or | | | | | | a group or | | | | | | UEs, UE | | | | | | mobility | | | | | | update | | | | | | etc.) and | | | | | | (iii) what | | | | | | are the | | | | | | target | | | | | | AaaML | | | | | | operation | | | | | | is to be | | | | | | conducted | | | | | | in 5G Core | | | | | | (e.g. data | | | | | | tr | | | | | | ansmission, | | | | | | service | | | | | | pr | | | | | | ovisioning, | | | | | | aggregation | | | | | | performance | | | | | | monitoring, | | | | | | etc.). | | | | | | | | | | | | NOTE 3: | | | | | | This column | | | | | | is to | | | | | | depict the | | | | | | optional | | | | | | AaaML | | | | | | Sub-profile | | | | | | ID that | | | | | | describes | | | | | | the | | | | | | sub-service | | | | | | of the | | | | | | AaaML | | | | | | Service | | | | | | Profile by | | | | | | providing | | | | | | the | | | | | | additional | | | | | | service | | | | | | req | | | | | | uirement(s) | | | | | | for the | | | | | | target | | | | | | AaaML | | | | | | operation | | | | | | (e.g. AI/ML | | | | | | operation | | | | | | UE member | | | | | | selection | | | | | | based on | | | | | | QoS | | | | | | p | | | | | | erformance, | | | | | | AI/ML data | | | | | | t | | | | | | ransmission | | | | | | based on | | | | | | Time Of | | | | | | Date etc.). | | | | | | | | | | | | NOTE 4: | | | | | | This column | | | | | | is to | | | | | | capture the | | | | | | AaaML | | | | | | service | | | | | | mappings | | | | | | which | | | | | | describe | | | | | | the | | | | | | co | | | | | | rresponding | | | | | | AaaML | | | | | | Service | | | | | | Profile and | | | | | | the | | | | | | co | | | | | | rresponding | | | | | | e | | | | | | xisting/new | | | | | | 5G Core | | | | | | service for | | | | | | a specific | | | | | | AaaML | | | | | | Service. | | | | | | | | | | | | NOTE 5: | | | | | | This column | | | | | | is to | | | | | | provide the | | | | | | high-level | | | | | | d | | | | | | escriptions | | | | | | of the | | | | | | given AaaML | | | | | | service. | | | | | +-------------+-------------+-------------+-------------+-------------+
Editor\'s note: It is FFS for the list of Sub-AaaML Services to be defined for
the given AaaML Service when this study is reaching conclusion. For example,
the clause n.m,x TS 23.xxx describes the Group QoS Monitoring, is the Sub-
AaaML Service of the Network Resource Monitoring of AaaML Service.
Editor\'s note: It is FFS to finalize the corresponding NF services to support
the given AaaML Service when this study is reaching conclusion. For example,
the clause n.m TS 23.xxx describes the Network Resource Monitoring of AaaML
Service.
Editor\'s note: It is FFS for more AaaML services to be defined or if just one
service can be defined with use of AaaML Profile IDs.
### 6.28.3 Procedures for AaaML Services
#### 6.28.3.1 AaaML Service Profile support for AaaML Service Procedures
This clause explains how to retrieve the AaaML Service Profile to support the
AaaML service procedures.
Figure 6.28.3.1-1: AaaML Service Profile support for AaaML Service Operation
1-2. If the AF has not discovered its serving NEF or AaaML NF, it queries NRF
to retrieve its serving NEF or AaaML NF that supports its target AaaML Service
Profile.
3\. A PDU Session between the UE and the AF may have been established.
4\. AF subscribe or requests the AaaML service by sending NEF service request
or AaaML service request with the required parameters and AF Transaction ID,
more specifically, AF includes the Application Identifier, UE ID or Group ID,
AaaML Profile ID and optionally AaaML Sub-Profile ID.
5\. NEF verifies the authorization of the AF Request.
6-7. NEF or AaaML NF sends request to UDR to retrieve the AaaML service
profile by providing the Application Identifier, UE ID or Group ID, AaaML
Profile ID and optionally AaaML Sub-Profile ID in case of the composite set of
5GC services is requested for the given AaaML service.
NOTE: Whether the AaaML service profile is stored locally to the AaaML NF or
in the UDR is to be determined.
8\. By referring to the service parameters and based on the information of the
AaaML service profile and the AaaML Sub-Profile, if requested, NEF or AaaML NF
proceeds with the AaaML service procedures which may involve a composite set
of 5GC service procedures corresponding to a set of 5GC events, analytics
and/or notifications.
9\. Based on the outcome of the AaaML service procedures, NEF or AaaML NF
replies to AF with the service response or notification which may be based on
the collective outcomes of a composite set of 5GC service procedures..
### 6.28.3 Impacts on services, entities and interfaces
NRF:
\- Recognize the new service parameter, AaaML Profile ID, to support the NEF
and AaaML discovery.
AF, NEF, AaaML:
\- Recognizes new service parameters, AaaML Profile ID, AaaML Sub-Profile ID
to support the AaaML service procedure which may be composed of a set of 5GC
service procedures (i.e. 5GC events, analytics and/or notifications).
## 6.29 Solution #29: 5GC assistance to UE on performing AI/ML task
### 6.29.1 Description
This solution is proposed to address Key Issue #2: 5GC information exposure to
UE and Key Issue #4: Enhancing External Parameter Provisioning.
In some scenarios, AI/ML based services need stable network quality to ensure
service sustainability, for example, as described in TS 22.261 [2], UE may
upload or download AI/ML models or learning data from application servers
(i.e. online model distribution is needed). If UE can get information about
when the network can provide sufficient network resource, it can make better
decisions on AI/ML operations (e.g. whether begin to perform an AI/ML
service). It is helpful to expose some information to UE.
However, network information exposure directly to UE may cause security issues
and some network information is not useful for UE to make decisions on AI/ML
operations since how to allocate the network resource is determined by network
rather than UE. Thus, it is important to study what information is valuable to
be exposed to UE.
On the other hand, network tends to provide service for each UE according to
the QoS requirement. However, when many AI/ML applications are running over 5G
mobile network, these applications may generate large data traffic and give
heavy load to network.
To reduce the impact on other services in the network and guarantee the
quality of AI/ML based service, this solution proposes that the 5GC exposes a
**_recommended service transmission time duration_** for UE to suggest when to
perform AI/ML tasks, which means the network is more likely to provide
sufficient network resources in this time duration. 5GC will consider AI/ML
task related information and network resource to select a relatively idle time
duration of both network and UE as **_recommended service transmission time
duration_** , so that UE can perform these AI/ML tasks in this time duration.
In this solution, the two main functionalities are proposed to take into
consideration:
\- UE and AI/ML application servers negotiate AI/ML task in application layer
and provision following AI/ML task related information to 5GC (UDM):
\- AI/ML application identifier: identifies the AI/ML application.
\- AI/ML task identifier: identifies AI/ML task to be performed by UE. It is
AI/ML related traffic which needs to be transferred over 5GS and used to
distinguish different tasks for the same application.
\- AI/ML task duration: defines the estimated time duration how long the task
will take.
\- AI/ML task valid time: defines the time period during which the task is
valid.
\- In addition to above information, 5GC (SMF) considers network performance
by requesting analytics from NWDAF to determines **_recommended service
transmission time duration_**. SMF exposes **_recommended service transmission
time duration_** to UE. The analytics ID can be requested from NWDAF includes:
\- Network Performance.
\- NF load information.
\- Service Experience.
\- UE communication.
### 6.29.2 Procedures
#### 6.29.2.1 Procedure for AF provisioning information to 5GC
Figure 6.29.2-1 illustrates the procedure for AF provisioning information to
5GC.
Figure 6.29.2-1: Procedures for AF provisioning information to 5GC
1\. UE and AI/ML application servers negotiate the AI/ML task to be performed
and the task related parameters in 6.29.1. AF provides AI/ML task related
parameters (UE ID or UE group ID, AI/ML application identifier, AI/ML task
identifier, AI/ML task duration, AI/ML task valid time) to be created or
updated in a Nnef_ParameterProvision_Create or Nnef_ParameterProvision_Update
Request to the NEF.
2\. If the AF is authorised by the NEF to provision the parameters, the NEF
requests to create, update and store provisioned parameters as part of the
subscriber data via Nudm_ParameterProvision_Create,
Nudm_ParameterProvision_Update or Nudm_ParameterProvision_Delete Request
message.
If the AF is not authorised to provision the parameters, then the NEF
continues in step 4 indicating the reason to failure in
Nnef_ParameterProvision_Create/Update Response message.
3\. UDM responds the request with Nudm_ParameterProvision_Create/Update
Response. If the procedure failed, the cause value indicates the reason.
4\. NEF responds the request with Nnef_ParameterProvision_Create/Update
Response. If the procedure failed, the cause value indicates the reason.
#### 6.29.2.2 Procedure for 5GC exposing information to UE
Figure 6.29.2-2 illustrates the procedure for 5GC determining **_recommended
service transmission time duration_** and exposing it to UE.
Figure 6.29.2-2: Procedures for 5GC exposing information to UE
1\. The PDU session between UE and AI/ML application server has been
established and SMF subscribes to be notified when the subscriber data for the
UE is changed from UDM. If UE has ability to perform AI/ML service, it will
indicate to request AI/ML service notification.
2\. When the subscriber data is changed by the procedure as 6.29.2.1, the UDM
notify SMF in a Nudm_SDM_Notification including AI/ML task related parameters
(UE ID or UE group ID, AI/ML application identifier, AI/ML task identifier,
AI/ML task duration, AI/ML task valid time).
3\. The SMF considers AI/ML task related parameters and requests analytics
(Network Performance, NF load information, Service Experience, UE
communication) from NWDAF by setting time when analytics information is needed
within the AI/ML task valid time.
4\. The NWDAF collects input data and derives analytics output as TS 23.288
[6].
5\. The NWDAF sends the output to the SMF.
6\. The SMF considers the output of analytics, AI/ML task duration, AI/ML task
valid time and operator configuration to determine recommended service
transmission time duration.
7\. The SMF sends the AI/ML service notification including AI/ML application
identifier, AI/ML task identifier and recommended service transmission time
duration to UE by NAS layer.
8\. UE may perform AI/ML task during the recommended service transmission time
duration by using existing PDU session or establishing a new PDU session.
#### 6.29.2.3 Procedure for 5GC exposing information to UE via UE policy
The procedure for 5GC exposing information to UE for Application AI/ML
operation via UE policy is depicted in Figure 6.29.2-3.
Figure 6.29.2-3: Procedures for 5GC exposing information to UE via UE policy
1\. The PCF sends an Analytics request/subscribe (Analytics ID = Service
Experience, Target of Analytics Reporting = UE ID or UE Group ID or any UE,
Analytics Filter Information (Application ID, S-NSSAI, DNN, Area of Interest,
RAT type(s)), Analytics Reporting Information) to NWDAF by invoking a
Nnwdaf_AnalyticsInfo_Request or a Nnwdaf_AnalyticsSubscription_Subscribe.
The PCF may decide to send the analytics request/subscribe message based on
local configuration (e.g. specific S-NSSAI and/or DNN for Application AI/ML
operation traffic), AF request (e.g. AF request for Application AI/ML
operation traffic monitoring which contains the Application ID and may also
contain other information (e.g. UE ID or a list of UE IDs)) or triggers from
other 5GC NFs (e.g. notifications from the UDM/UDR on Application AI/ML
operation traffic related data change).
NOTE 1: Other network analytics (e.g. UE Communication, Network Performance)
can also be requested from the NWDAF, with the same enhancements to the input
data and output analytics as described in the following steps.
2\. NWDAF collects network data or service data from the UE, 5GC NF(s)
(including the AF) and the OAM as specified in TS 23.288 [6].
In addition to the existing input data as defined in TS 23.288 [6] for Service
Experience analytics, the input data also includes AI information of the UE,
which describes the Application AI/ML operation in the UE per application
(e.g. whether AI/ML operation is enabled or not for the application, the
Application AI/ML operation type) and can be collected from UE applications
via the AF.
3\. Using these input data, the NWDAF derives the service experience analytics
for the application.
4\. The NWDAF provides the analytics information of the observed Service
Experience to the PCF by means of either Nnwdaf_AnalyticsInfo_Request response
or Nnwdaf_AnalyticsSubscription_Notify, depending on the service used in step
1.
In addition to the existing output analytics as defined in TS 23.288 [6] for
Service Experience analytics, the output analytics also includes AI
information of the UE, which describes the Application AI/ML operation in the
UE per application. The output analytics (i.e. statistics and/or predictions
information) are about the Service Experience of the UE per application when
the Application AI/ML operations apply.
5\. The PCF decides on UE policy with regards to the Application AI/ML
operations, based on AF request and/or the output analytics if available,
which may include:
\- recommended Time Window and/or Location Criteria for the UE to apply the
Application AI/ML operation and transmit the Application AI/ML traffic per
Application. This can be indicated via the URSP rules.
\- whether the Application AI/ML operation(s) is/are recommended for the
application(s) in the UE.
\- whether the Application AI/ML operation type(s) is/are recommended for the
application(s) in the UE.
NOTE 2: Based on the conclusion of the study, if the network is not aware of
the Application AI/ML operation type(s), the Application AI/ML operation
type(s) will not be provided in step 2 and step 5.
NOTE 3: Whether the above UE policy is indicated in the URSP or in a new type
of UE policy is to be decided during the normative phase.
Editor\'s note: How the parameters are passed to UE application layer is FFS.
The exact parameters are to be decided during conclusion.
6\. The PCF delivers the UE policy to the UE via the AMF.
7\. The UE applies the UE policy received in step 5, i.e. performing
Application AI/ML operation(s) for the application(s) accordingly.
### 6.29.3 Impacts on Existing Nodes and Functionality
AF:
\- Support on provisioning AI/ML based service information to 5GC.
UDM:
\- Support on modifying AI/ML related subscriber data by AF.
\- Support on notifying AI/ML related subscriber data to SMF.
SMF:
\- Support on determining recommended service transmission time duration by
getting notification form UDM and requesting analytics from NWDAF.
\- Support on sending AI/ML service notification to UE.
UE:
\- Support on receiving AI/ML service notification from 5GC via NAS.
\- Support performing Application AI/ML operations based on the relevant UE
policy.
PCF:
\- Support providing UE policy on the Application AI/ML operations based on
network analytics from the NWDAF.
NWDAF:
\- Support collecting additional input data, i.e. information about the
Application AI/ML operations in the UE per application (e.g. whether AI/ML
operation is enabled or not for the application, the Application AI/ML
operation type), and including the information in the output analytics.
## 6.30 Solution #30: AI/ML Translator (AI/ML-T) for 5GC Information Exposure
to UE
### 6.30.1 Description
Key Issue #2: 5GC information exposure to UE is to study whether and how to
enhance the 5GC to expose information to the UE to facilitate its Application
AI/ML operation (e.g. Model Training, Splitting and inference feedback, etc.).
This document covers the following bullets.
\- Whether and for which purpose there is a need for 5GC to expose information
or data analytics to the UE, and what are the information or data analytics
that can be provided by 5GC to the UE to assist the Application AI/ML
operation at the UE side.
\- How the 5GC exposes such information or data analytics to the UE.
To solve the above problems, an AI/ML translator (AIML-T) is proposed. The
AIML-T is responsible for translating (mapping) the Application layer AI/ML
related assistance requests received from UE(s) to the analytics requests for
5GC (i.e. from assistance request to analytics request to 5GC), and converting
the information or analytics produced at 5GC to AI/ML assistance information
for UE(s) (i.e. from 5GC information/analytics to AI/ML assistance
information).
The AI/ML translator could be integrated into IEAF or AF. The IEAF or AF is
responsible for receiving the requirements from UE(s), and for exposure the
required assistance information to the UE(s) to assist its local Application
layer AI/ML operations. If the IEAF or AF is in trusted domain, it interacts
with the NFs in 5GC directly. If the AF is in untrusted domain, it interacts
with the NFs in 5GC via NEF. Alternatively, the AIML-T can be placed in NEF.
Figure 6.30.1-1: AIML-T integrated into DCAF or AF or NEF
Figure 6.30.1-1 shows the AIML-T integrated into IEAF or AF or NEF. The
assistance requests from UE(s) could be obtained and processed by the
integrated AI/ML-T at the IEAF or AF or NEF.
After the assistance request is translated (mapped) to 5GC request at the
AIML-T, the IEAF or AF (or via NEF) sends request or subscribes to the other
NFs (e.g. NWDAF, etc.) in 5GC for analytics and/or information. The integrated
AIML-T at the IEAF or AF (or NEF) processes the received analytics and
information, converts them into AI/ML assistance information required by
UE(s). After the converting is completed, the IEAF or AF responses or notifies
to the UE(s) with its required assistance information. Based on the AI/ML
assistance information, the UE(s) make decision and performs corresponding
AI/ML operations.
NOTE: If AIML-T is integrated into AF or NEF, how AF exposes the 5GC
information to the UE is outside the scope of 3GPP. If AIML-T is integrated
with IEAF, then this solution can be merged into Solution#2.
### 6.30.2 Procedures
Figure 6.30.2-1: 5GC information preparation and exposure to assist AI/ML
operations at UE side, with AIML-T integrated at DCAF/AF or NEF
Figure 6.30.2-1 illustrates the procedure of interactions among UE(s), IEAF/AF
(or via NEF), and the other NFs (e.g. NWDAF(s)) in 5GC for assistance
information preparation and exposure.
1\. UE(s) requests or subscribes to IEAF or AF for AI/ML assistance
information to assist local AI/ML decisions/operations at UE side. UE(s) may
request the following assistance information:
\- Information of UE service experience
\- Information of UL/DL latency, data rate, and packet loss rate
UE(s) may specify:
\- Type of assistance information in need, i.e. statistics, and/or
predictions.
\- Time window (for one-time) or time interval (for periodically) requirement
to AF to provide the assistance information
NOTE 1: The parameter details of the information will be decided in normative
phase.
2\. [If AIML-T is integrated at IEAF or AF] After receiving the request (for
request information or subscription request) from the UE(s), the IEAF/AF
translates (maps) the assistance request to request for 5GC (e.g. requests to
analytics (statistics, predictions) for one or multiple Analytics IDs)
according to the requirements/parameters in the request from UE(s).
For example: If receive assist AI/ML splitting operation request, this request
may be translated to request to analytics and Analytics IDs \"DN
Performance\", \"Service Experience\". The mapping between the assistance
request from UE to the analytics request to 5GC could be based on a
preconfigured mapping table stored at the AF/IEAF or up to the AF/IEAF
implementation.
3\. AF/IEAF requests or subscribes to one or multiple NFs (e.g. NWDAF, etc.)
for analytics and/or data. The NFs perform corresponding operations to produce
analytics or collect data, and responses/notifies to the IEAF /AF with the
analytics and/or data.
If AIML-T is integrated at NEF, the AF/ IEAF forwards the assistance request
from UE to NEF, where the request will be translated (mapped) to request for
5GC at NEF. Then NEF will requests or subscribes to one or multiple NFs (e.g.
NWDAF, etc.) for analytics and/or data.
4\. [If AIML-T is integrated at AF] The AF translates (converts) the received
analytics/information to AI/ML assistance information according to the type of
assistance information required. One AI/ML assistance information may be
produced based on one or multiple analytics/information.
Alternatively, if AIML-T is integrated at NEF, the received
analytics/information will be translated (converted) to AI/ML assistance
information at NEF and NEF sends the information back to AF/ IEAF.
The AI/ML assistance information to UE(s) might be:
\- Predictions on UE service experience, latency, bitrate, packet loss rate,
and corresponding time window.
\- Predictions on network condition changes and corresponding time
\- Predictions on the need of downloading ML model or certain amount of data
\- Information of resource utilization (e.g. monitoring information or
analytics information), etc.
5\. The AF responses or notifies to the UE(s) with the required AI/ML
assistance information.
Editor\'s note: Whether and how the UE can use 5GC information for AI/ML
operations is FFS and needs to be describe with valid justification before
solution can be adopted, considering also that the same information will be
used by the AI/ML application server as well.
### 6.30.3 Impacts on Existing Nodes and Functionality
AF or IEAF:
\- If AIML-T is integrated at IEAF or AF. The AIML-T integrated at the IEAF/AF
translates (maps) the Application layer AI/ML related requests received from
UE(s) to the requests for 5GC (i.e. from assistance request to analytics
request to 5GC), and converts the information or analytics produced at 5GC to
AI/ML assistance information for UE(s) (i.e. from 5GC information/analytics to
AI/ML assistance information).
\- Receive assistance requests from UE(s).
\- Check about authorization information of UE(s) based on local policy.
\- Expose AI/ML assistance information to UE(s).
NEF:
\- If AIML-T is integrated at NEF. The AIML-T integrated at NEF translates
(maps) the Application layer AI/ML related requests received from UE(s) to the
requests for 5GC (i.e. from assistance request to analytics request to 5GC),
and converts the information or analytics produced at 5GC to AI/ML assistance
information for UE(s) (i.e. from 5GC information/analytics to AI/ML assistance
information).
\- (If AIML-T is placed in NEF) Receive assistance requests from IEAF or AF.
\- (If AIML-T is placed in NEF) Check about authorization information of UE(s)
based on local policy.
\- (If AIML-T is placed in NEF) Expose AI/ML assistance information to IEAF or
AF.
NOTE: If AIML-T is integrated into AF or NEF, how AF exposes the 5GC
information to the UE is outside the scope of 3GPP. If AIML-T is integrated
with IEAF, how UE/ IEAF are configured and expose 5GC information to the UE is
outside the scope of this solution.
UE:
\- UE should be able to communicate with AIML-T.
## 6.31 Solution #31: Network information exposure to UE
### 6.31.1 Description
This solution is for KI#2.
The AI/ML applications at the UE can rely on the application server in the
data centre to overcome its limited computational capability for complex AI/ML
operations, e.g. model training, inference, etc. In the case, the performance
of the AI/ML application becomes vulnerable to the varying network conditions.
For example, improper model selection based on inaccurate assessment of
network conditions can seriously degrade the performance of AI/ML
applications. It is known by several researches that the performance of AI/ML
applications, including split computing and model transfer cases, can be
improved significantly when the estimation on the network conditions can be
given to the AI/ML applications before/during the operations.
In the solution, the 5G network provides a UE with assistance information on
the network congestion level. The UE can utilize the received analytics on
network congestion prediction to decide, e.g. its ML model for training and
inference, selection of ML models to transfer from/to the model server in the
network, etc.
Editor\'s note: Whether and how the UE can use 5GC information for AI/ML
operations is FFS and needs to be describe with valid justification before
solution can be adopted, considering also that the same information will be
used by the AI/ML application server as well.
### 6.31.2 Procedures
The procedure is depicted in 6.31.2-1.
Figure 6.31.2-1: Procedure for network information exposure to UE
1-2. The UE requests AI/ML assistance information on network congestion during
the registration procedure. The UE may include conditions for periodical
provisioning of the information, e. g. S-NSSAI, DNN, reporting period, etc..
Alternatively, _UE sends UL (Up Link) NAS message to AMF, in the message it
includes an Analytics container including the Analytics request to NWDAF. The
Analytics container can be either read by the AMF if AMF subscribes network
analytics to NWDAF on behalf of the UE, or read by NWDAF if UE interacts with
NWDAF directly. AMF discovers and selects NWDAF according to clause 5.2 in TS
23.288 [6], where AMF may get the Analytics IDs in the Analytics container.
Otherwise, AMF can forward the Analytics container to one of the discovered
NWDAF, that NWDAF can do NWDAF selection and ask the analytics from the NWDAF
who can support the requested analytics from the UE._
3\. The AMF subscribes to the NWDAF to request analytics for network
congestion prediction, e. g. (Slice) Load Level, NF load, Network Performance,
and receives analytics output from the NWDAF. The AMF may set the Analytics
Filter information based on the parameters received from the UE in the step 1
and additionally stored UE context information, e.g. UE ID, Registration Area,
allowed S-NSSAIs for the UE, etc. if some parameters are not indicated by the
UE. The AMF checks if analytics can be allowed to the UE based on the
subscription information from UDM. Alternatively, AMF forwards the Analytics
request (i.e. Analytics container) from UE to the NWDAF. NWDAF maintains which
UE requests which Analytics ID(s) and all the related information in the UE
analytics exposure context. When there is analytics result, NWDAF embeds the
result into an Analytics container and call
Namf_Communication_N1N2MessageTransfer service of AMF.
4\. The AMF sends analytics information to the UE via DL NAS message.
5-6. The UE forwards the received information to the AI/ML applications that
require AI/ML assistance information on network congestion prediction. The
AI/ML application at the UE decides/changes AI/ML model based on the received
network congestion information, and sends selected AI/ML model information to
the application server using an application signalling.
NOTE: The step 5 and 6 are out of scope of 3GPP.
### 6.31.3 Impacts on Existing Nodes and Functionality
UE:
\- Support indication to request AI/ML assistance information , e.g. via
Analytics container, in the registration request or UL NAS message.
\- Support providing received congestion prediction information to the
application.
\- Support DL NAS message to deliver congestion prediction information.
AMF:
\- Support subscription to NWDAF for a UE.
\- Support a NAS message to deliver congestion prediction information.
NWDAF:
\- Support receiving Analytics container from UE.
\- Maintaining UE analytics request context.
\- Support sending Analytics container to UE via AMF through a
Namf_Communication_N1N2MessageTransfer service.
## 6.32 Solution #32: 5GC Information Exposure to Authorized 3rd Party for
Assisting AI/ML Operation Splitting between AI/ML Endpoints
### 6.32.1 Description
This solution is proposed to address Key Issue #3: 5GC information exposure to
authorized 3rd party for application layer AI/ML operation. The study bullet
of this Key Issue includes:
\- Whether and what assistance information and events are exposed from 5GS to
AF, more specifically, the prediction of UE and/or network conditions and
performance (e.g. location, QoS, load, Congestion, etc.) as described in TS
22.261 [2]? How?
To address the challenges in above study aspects for split inference, the
following problems need be solved
\- What assistance information is required to expose from 5GS to AF?
\- Which Analytics ID could be reused for generating the AI/ML assistance
information?
\- Whether new inputs are required for the analytics on the Analytics ID? And
how to use the new inputs?
As introduced in TS 22.261 [2], AI/ML operation splitting between AI/ML
endpoints is one of the three types of AI/ML operation that the 5G system can
support. One use case of AI/ML operation splitting between AI/ML endpoints
given in TR 22.874 [8] is split AI/ML inference, as shown in Figure 6.32.1-1
is an example of split AI/ML inference. The network AI/ML endpoint in Figure
6.32.1-1 is AI/ML processing entity, e.g. edge/cloud server, etc. but
excluding UE.
Figure 6.32.1-1: Example of split AI/ML inference
UE triggers split inference. UE and an AI/ML server negotiate over application
layer for the split inference operations. Assistance information from 5GC is
needed to assist the AI/ML server to make corresponding decisions for the
split inference, e.g. the AI/ML processing entities (e.g. cloud/edge servers)
and the number of layers for dealing with the split tasks (e.g. AI/ML
operations) from UE, etc.
The AF requests/subscribes to one or multiple NWDAF(s) for analytics to
generate AI/ML assistance information. NWDAF(s) collects information from the
AF on e.g. (if multiple layers) end-to-end performance between the AI/ML
processing entities in two adjacent layers, etc. The collected information is
used at the NWDAF(s) as new inputs to the analytics of one or multiple
Analytics IDs, e.g. DN Performance, Observed Service Experience. During the
analytics process, NWDAF(s) also interact with other NFs in 5GC for data
collection.
The analytics results from NWDAF(s) could be converted to the required
assistance information at the AF. Based on the assistance information and the
current system environmental factors such as communications data rate,
resource at UE, the AI/ML server AF makes decisions on split inference.
### 6.32.2 Procedures
Figure 6.32.2-1: The procedure for interactions between AF and NWDAF(s) for
generate AI/ML assistance information. Interaction between AF and NWDAF may be
via NEF
Figure 6.32.2-1 illustrates the procedure for interactions between AI/ML
server/AF and NWDAF(s) in 5GC to generate AI/ML assistance information. The
corresponding procedure in detail is as follows:
0\. UE and AI/ML server/AF negotiate for split inference.
NOTE 1: How UE negotiate with the AIML server/AF is out of the scope of this
solutions.
1\. The AF requests or subscribes to NWDAF(s) for analytics with the following
parameter in its request:
\- Analytics IDs (i.e. \"DN Performance\", \"Observed Service Experience\").
\- Area of Interests.
\- DNAI and the IP addresses or the FQDNs of AI/ML processing entities.
NOTE 2: The application server (or AF) could choose which AI/ML processing
entities (e.g. cloud/edge servers) as the candidates to select for split
tasks, and provide the DNAI and the IP addresses or the FQDNs of the AI/ML
processing entities as the input parameters of the analytics.
2\. The NWDAF(s) subscribes to AF (or via NEF) for event exposure of the
information from AI/ML processing entity(s). The information required may
include:
\- The data of end-to-end network performance (e.g. latency, throughput,
packet loss rate) between each pair of AI/ML processing entities in two
adjacent layers.
3\. The AF collects data from AI/ML processing entity(s). AI/ML processing
entities inform their information to the AF, the information may include:
\- The data of end-to-end network performance (e.g. latency, throughput,
packet loss rate) between each pair of AI/ML processing entities in two
adjacent layers.
NOTE 3: Step 3 is out of 3GPP scope.
4\. The AF provides to the NWDAF(s) (or via NEF) with the network performance
data among the AI/ML processing entities.
5\. The NWDAF(s) collects data from other NFs in 5GC according to the
Analytics ID(s) received in step 1.
6\. The NWDAF(s) performs analytics on the Analytics ID, i.e. \"DN
Performance\", \"Observed Service Experience\", and produces analytics
(statistics and/or predictions). The collected information from the AI/ML
processing entities in step 3 are new inputs to the analytics.
The produced analytics results may include:
\- Statistics/predictions on end-to-end network performance (e.g. latency,
throughput, packet loss rate) between each pair of AI/ML processing entities
in two adjacent layers
\- Statistics/predictions on traffic rate for UL from the UE to each AI/ML
processing entity(s).
\- Statistics/predictions on packet delay for UL from the UE to each AI/ML
processing entity(s).
\- Statistics/predictions on packet loss rate for UL from the UE to each AI/ML
processing entity(s).
7\. The NWDAF(s) responses or notifies to the AF (or via NEF) the analytics
results.
8\. The AF produces AI/ML assistance information based on the received
analytics, as well as the information received from UE. One AI/ML assistance
information may be produced based on one or multiple analytics/information.
The AI/ML assistance information may be, for example, statistics/predictions
on network conditions (e.g. latency, bitrate, communication service
availability, reliability, etc.).
Based on the assistance information and the system environmental factors such
as resource at UE (obtained in step 0), the AI/ML server makes AI/ML decisions
for split inference.
9\. The AI/ML server informs the UE over application layer with the AI/ML
decisions for split inference.
NOTE 4: How UE negotiates with the AIML server/AF is out of the scope of this
solution.
### 6.32.3 Impacts on services, entities and interfaces
AF:
\- Negotiate with UE for split inference.
NOTE 1: How UE negotiates with the AIML server / AF is out of the scope of
this solutions.
\- Collect data from AI/ML processing entities (e.g. cloud/edge servers).
\- Expose the above collected data to NWDAF.
NWDAF:
\- New inputs for Analytics ID, e.g. \"DN Performance\", \"Observed Service
Experience\", the new inputs may include:
\- The data of end-to-end network performance (e.g. latency, throughput,
packet loss rate) between each pair of AI/ML processing entities in two
adjacent layers.
\- New analytics results for Analytics ID, e.g. \"DN Performance\", \"Observed
Service Experience\", the new analytics results may include:
\- Statistics/predictions on network performance (e.g. latency, throughput,
packet loss rate) between each pair of AI/ML processing entities in two
adjacent layers
\- Statistics/predictions on traffic rate for UL from the UE to each AI/ML
processing entity(s).
\- Statistics/predictions on packet delay for UL from the UE to each AI/ML
processing entity(s).
\- Statistics/predictions on packet loss rate for UL from the UE to each AI/ML
processing entity(s).
\- Service Experience when some specific endpoints are in the splitting ML
operations.
## 6.33 Solution #33: 5GC Exposure of Network Authorization for UE to
participate in the Application AI/ML operation
### 6.33.1 Description
This solution addresses Key Issue #3 on 5GC information exposure to authorized
3rd party for Application Layer AI/ML operation.
The intent of this solution is to propose a mechanism to enable the network
operator to have the control for which UE is allowed for participation in the
Application layer AI/ML operation. The 5G system can expose the network
authorization status of the UE to the AF for the UE participation in the
corresponding Application AI/ML operation. Such awareness of the network
authorization status for the UE can assist the AF\'s decision for the UE
selection for the corresponding Application AI/ML operation.
The overall design of this solution is as follows:
Once the PDU session established, before the AF initiating its Application
AI/ML operation, the AF can subscribe to the SMF or UDM anytime for the event
monitoring to receive the network authorization status of the given UE for its
participation in the AF\'s Application AI/ML operation. Likewise, the AF can
unsubscribe to the SMF or UDM anytime for such event monitoring when the AF is
no longer interested in the given UE.
Such awareness of the network authorization status for the UE can assist the
AF\'s decision for the UE selection for the corresponding Application AI/ML
operation.
### 6.33.2 Procedure
#### 6.33.2.1 Procedure for 5GC Exposure of Network Authorization Status of UE
for Application AI/ML operation
Figure 6.33.1-1: Procedure for 5GC Exposure of the network authorization
status of the UE for participation in Application Layer AI/ML operation
The following procedures describes how AF receives the notification of the
network authorization status of the UE to be able to participate in the
Application AI/ML operation:
1\. UE successfully completes the PDU Session Establishment procedures as
described in clause 4.3.2.2.1 of TS 23.502 [4], for UE-requested PDU Session
Establishment procedure for non-roaming scenarios the SMF receives the Session
Management Subscription data which is corresponding to SUPI, DNN and S-NSSAI
provided by the UE. More specifically, the Secondary
Authentication/Authorization as described in step 6 in clause 4.3.2.2.1 of TS
23.502 [4], which is defined in clause 4.3.2.3 of TS 23.502 [4] and in clause
5.6.6 of TS 23.501 [3], may be triggered during the PDU Session Establishment
procedures.
2\. The AF selects the appropriate NEF via pre-configuration or via the
support from NRF by providing its Application Identifier or {S-NSSAI, DNN} as
described in clause 6.3.14 of TS 23.501 [3].
3\. In order to determine if the given UE is authorized by the 5G system to be
able to participate in the Application AI/ML operation, the AF sends
Nnef_EventExposure_Subscribe Request to SMF or UDM via NEF as described in
clauses 4.15.3.2.3 and 5.2.6.2.2 of TS 23.502 [4] together with its
Application Identifier or {S-NSSAI, DNN}in order to subscribe to the
notification from SMF for the new event \"Application AI/ML Authorized\"
introduced by this solution as described in clause 6.33.2.2.3 below.
4a-5. SMF receives notification from UDM regarding the information of the
\"Application AI/ML subscription data\" which is introduced by this solution
as described in clause 6.33.2.2 below, and relays the notification to the
associated notification endpoint NEF by Nsmf_EventExposure_Notify.
The \"Application AI/ML subscription data\" for a UE is part of the UE
subscription data.
The AF may continue to monitor the event to keep track of the subscription
info of the \"Application AI/ML subscription data\" which reflects UE
authorization status for participation in the Application AI/ML operation.
4b. The UDM detects the event occurs and sends the event report, by means of
Nudm_EventExposure_Notify message to the associated notification endpoint of
the NEF. If UDM notifies AF directly, step 5 can be skipped.
6\. NEF forwards to the AF the reporting event received by
Nsmf_EventExposure_Notify or Nudm_EventExposure_Notify.
7\. The AF sends Nnef_EventExposure_Unsubscribe Request to SMF via NEF as
described in clauses 4.15.3.2.3 and 5.2.6.2.2 of TS 23.502 [4] if the AF is no
longer interest in the corresponding UE for participation in its Application
AI/ML operation.
#### 6.33.2.2 New Subscription Data of Authorized Application AI/ML services
##### 6.33.2.2.1 General Descriptions
The UDM stores the subscription information to indicate the network
authorization status for the UE to be able to participate in the Application
AI/ML operation. The subscription information includes the \"Application AI/ML
subscription data\" for a UE which is introduced by this solution and is part
of the UE subscription data.
At any time, the subscription for the Application AI/ML services could be
changed in the UDM.
The Application AI/ML subscription data in the UE subscription data contains
the following information:
\- Whether the UE is authorized to be participated in the Application AI/ML
operation.
\- Application Identifier or {DNN, S-NSSAI} corresponding to the AF that
requests the Application AI/ML operation.
The Application AI/ML subscription data is provided by the UDM to the SMF
during or after the establishment of the PDU session associated with the AF by
using the Nudm_SDM service for the subscription data type \"Application AI/ML
subscription data\" during the PDU session establishment.
The UDR stores the Application AI/ML data, which may be updated by UDM.
##### 6.33.2.2.2 Application AI/ML subscription data in UDM
This solution proposes the following the changes to the SDM services as
defined in clause 5.2.3.3.1 of TS 23.502 [4] to describe the subscription data
type that is used to store the \"Application AI/ML subscription data\" in the
UDM and is used to determine whether the given UE is authorized by the 5G
system for the participation in the Application AI/ML operation. The following
descriptions focus on the changes to the existing tables which are shown in
\"**_bold italic_** \".
+----------------------------------------------------------------------+ | This solution proposes the following updates to the clause 5.2.3.3.1 | | of TS 23.502 [4] for the two tables 5.2.3.3.1-1 and 5.2.3.3.1-3 to | | describe the Application AI/ML subscription data that are stored in | | the UDM. | | | | **_\- Application AI/ML subscription data for a UE as part of the UE | | subscription data._** | | | | Table 5.2.3.3.1-1: UE Subscription data types | | | | Table 5.2.3.3.1-3: UE Subscription data types keys | +----------------------------------------------------------------------+
##### 6.33.2.2.3 Extension to Nnef_EventExposure Services for New Event
Monitoring for 5G system authorization for UE to support Application AI/ML
operation
This solution extends the existing Monitoring Events leveraging NEF event
exposure as defined in clause 4.15.3 of TS 23.502 [4] to monitor if the given
UE is authorized by the 5G system to participate in the Application AI/ML
operation requested by the corresponding AF. The following descriptions focus
on the changes to Nnef_EventExposure Service as defined in clause 4.15.3 of TS
23.502 [4].
This solution proposes to add a new event to Table 4.15.3.1-1 in TS 23.502 [4]
for \"Application AI/ML Authorization\" and the SMF or UDM is responsible for
the event detection. For this new event proposed by this solution, if the 5G
system decides to revoke the permission to allow the UE to participate in the
Application AI/ML operation, the SMF or UDM will notify the AF via the support
of NEF. AF will then release the associated PDU session, if any, to terminate
the corresponding Application AI/ML operation, or, AF will negotiate with UE
at application layer and the UE will avoid initiating related data traffic.
The description of the new NEF monitoring event as introduced by this solution
is to be captured in Table 4.15.3.1-1 of TS 23.502 [4] as shown below.
+------------------------------------------------------------+ | New event to Table 4.15.3.1-1 of TS 23.502 [4]. | | | | Table 4.15.3.1-1: List of events for monitoring capability | +------------------------------------------------------------+
### 6.33.3 Impacts on existing services, entities and interfaces
SMF:
\- Support a new event for monitoring network authorization status for a given
UE to participate in a given Application AI/ML operation.
UDM:
\- Support a new event for monitoring network authorization status for a given
UE to participate in a given Application AI/ML operation.
UDR:
\- New application subscription for the UE regarding the network authorization
status for UE to participate in a given Application AI/ML operation.
AF:
\- Ability to subscribe to the event for tracking UE\"s subscription status
for the UE participation in its Application AI/ML operation.
## 6.34 Solution #34: Expose AI/ML traffic transmission status to the
authorized 3rd party for Application Layer AI/ML Operation
### 6.34.1 Description
This solution addresses KI#3 and KI#1.
Based on the collected data for monitoring network resource, the
prediction/statistics of UE and/or network conditions and performance (e.g.
location, QoS, load, Congestion, etc.) for Application AI/ML traffic
transmission can be derived by the NWDAF. Then the NWDAF can expose the
prediction/statistics to the AF.
### 6.34.2 Procedures
Figure 6.34.2-1 shows the procedure of the Application AI/ML traffic
transmission status information exposure to the AF.
Figure 6.34.2-1: Application AI/ML traffic transmission status information
exposure to the AF
0\. The PDU session is established/modified for Application AI/ML traffic
transmission between the UE and the AF as specified in TS 23.502 [4].
1\. The AF sends an Analytics request/subscribe (Analytics ID =\"User Data
Congestion\" (or \"Service Experience\", or \"NF load information\"), Target
of Analytics Reporting =(a UE or a group of UEs), Analytics Filter Information
=(Application ID, S-NSSAI, DNN, Application Server Address(es), Area of
Interest, QFI(s)), Analytics Reporting Information= Analytics target period),
to the NWDAF as specified in TS 23.288 [6] clause 6.1, where:
\- the Application ID indicates the application that transmits the AI/ML
traffic;
\- the DNN and S-NSSAI indicates the DNN and S-NSSAI of the PDU Session for
Application the AI/ML traffic transmission;
\- the AoI indicates the network area where the UE(s) receiving the
Application AI/ML traffic locate；
\- the Application Server Address(es) indicates the list of IP
address(s)/FQDN(s) of the Application Server(s) which transfers the
Application AI/ML traffic to the UE(s);
\- the QFI(s) for the QoS flow of the Application AI/ML traffic transmission
are in the Analytics Filter Information;
\- the Target of Analytics Reporting for \"User Data Congestion\" can be a
group of UEs;
2\. The NWDAF subscribes the network data from the 5GC NF(s) in Table 6.8.2-2
(Table 6.4.2-1a, Table 6.4.2-2, or Table 6.5.2-1) by invoking
Nnf_EventExposure_Subscribe service operation, where:
\- the Throughput UL/DL in Table 6.8.2-2 indicates the UL/DL data throughput
of the Application AI/ML traffic, where the IP Packet Filter Set identifies
the QoS flow for Application AI/ML traffic transmission;
\- the UE Location in Table 6.4.2-1a indicates the location of the UE that
transmits/receives the AI/ML traffic;
\- the QoS flow level network data (QFI, QoS flow Bit Rate, QoS flow Packet
Delay, Packet transmission, Packet retransmission) in Table 6.4.2-2 indicates
the observed QoS information about the Application AI/ML traffic transmission,
where the IP filter information identifies the QoS flow for Application AI/ML
traffic transmission;
\- the NF resource usage in Table 6.5.2-1 indicates the virtual resources
currently in use for specific NF instance(s) (mean usage of virtual CPU,
memory, disk) for Application AI/ML traffic transmission;
\- the NF load in Table 6.5.2-1 indicates the load of specific NF instance(s)
for Application AI/ML traffic transmission in their NF profile.
NOTE 1: The specific NF could be UPF, the NWDAF may collect the UPF resource
usage from the OAM for NF load analytics and may collect the UPF load from the
NRF for NF load analytics.
3\. With these data, the NWDAF derives the analytics information for User Data
Congestion, Observed Service Experience and/or NF load for the Application
AI/ML traffic transmission.
4\. The NWDAF provides the analytics information in Table 6.8.3-1 (Table
6.8.3-2, Table 6.4.3-1, Table 6.4.3-2, Table 6.5.3-1 or Table 6.5.3-2) to the
AF based on the service used in step1, with the following enhancements:
\- the Network Status Indication in Table 6.8.3-1 and Table 6.8.3-2 indicates
the statistics/prediction of Congestion Level for the Application AI/ML
traffic transmission;
\- the UE Location in Table 6.4.3-1 and Table 6.4.3-2 indicates the
statistics/prediction location of the UE that transmits the AI/ML traffic;
\- the NF resource usage in Table 6.5.3-1 and Table 6.5.3-2 indicates the
statistics/prediction of average usage of assigned resources (CPU, memory,
disk) for the Application AI/ML traffic transmission;
\- the NF load in Table 6.5.3-1 and Table 6.5.3-2 indicates the
statistics/prediction of average load of the NF instances for Application
AI/ML traffic transmission.
The following new output data for Application AI/ML traffic transmission are
added in the statistics/predictions:
\- QoS flow level data (QFI, QoS flow Bit Rate, QoS flow Packet Delay, Packet
transmission, Packet retransmission), as the statistics/prediction of QoS for
the Application AI/ML traffic transmission.
### 6.34.3 Impacts on services, entities and interfaces
This solution reuses the current specification in TS 23.288 [6] for providing
data analytics and exposing the information to the AF, with the following
enhancements:
\- AF: requests the Application AI/ML traffic transmission status information
(e.g. location, QoS, load, Congestion, etc.) from the NWDAF.
\- NWDAF: provides analytics information of Application AI/ML traffic
transmission status to the AF.
## 6.35 Solution #35: External parameter provisioning by AF for AI/ML data
transport
### 6.35.1 Description
This solution addresses KI#4.
The AI/ML model, intermediate data, inference results, or model performance
data at the UE are transported by 5GS for the Application AI/ML operation. In
order to assist the Application AI/ML operation, the 5GC can maintain and use
the external parameters provisioned by AF to decide the policy to transport
the Application AI/ML traffic(s).
According to TS 22.261 [2], the characteristics of AI/ML model data is
different from the other Application AI/ML traffic, and different policy e.g.
QoS, may be needed for the transport of the different kinds of AI/ML data.
Since the AF knows well the characteristics of the AI/ML data to be
transported, and the AF can provision specific policy parameters to the 5GS to
support the transport of the AI/ML data.
The transport of the AI/ML model happens discontinuously and has less strict
end-to-end latency requirements, and the AF can provision the transport policy
by setting a policy for a future AF session procedure as for background data
transfer as defined in clause 4.15.6.8 of TS 23.502 [4] for such AI/ML model
distribution to a large amount of UEs. For model transport to a specific UE or
model distribution to a small amount of UEs, AF session with required QoS
update procedure as defined in clause 4.15.6.6a of TS 23.502 [4] is more
appropriate to be used by the AF to provision the transport policy. Other
Application AI/ML traffics, such as intermediate data, inference results, or
model performance data, are continuous and have relatively stringent latency
requirement, and are more suitable to be transported with specific QoS
provisioned by setting up an AF session with required QoS procedure as defined
in clause 4.15.6.6 of TS 23.502 [4].
### 6.35.2 Procedures
When the Application AI/ML begins to transport intermediate data, local
training data, inference results, or model performance data through 5GS, the
AF sends Nnef_AFsessionWithQoS_Create request message as described in clause
4.15.6.6 of TS 23.502 [4], including the specific QoS parameters for the AF
session. The QoS parameters include the service requirements described in
clause 7.10 of TS 22.261 [2].
For AI/ML model transmission to a specific UE or model distribution to a small
amount of UEs, the AF may update the QoS request for the AF session by sending
Nnef_AFsessionWithQoS_Update request message as described in clause 4.15.6.6a
of TS 23.502 [4], including the Flow Description(s) and QoS parameters for the
model transmission or distribution.
When distributing the AI/ML model to large-scale UEs, the AF schedules the
model distribution by invoking the Nnef_ApplyPolicy_Create service operation
as described in clause 4.15.6.8 of TS 23.502 [4], to apply a policy for
background data transfer to these UEs, which was negotiated as described in
clause 4.16.7.2 of TS 23.502 [4] with the service requirements described in
clause 7.10 of TS 22.261 [2].
### 6.35.3 Impacts on services, entities and interfaces
No impact.
## 6.36 Solution #36: Enhancing External Parameter Provisioning
### 6.36.1 Description
As outlined in clause 4.15.6 of TS 23.502 [4], provisioning capability allows
an external party to provision the information, such as expected UE behaviour
and service specific parameters to 5G network functions. As part of this,
currently the AF may subscribe to the NWDAF for UE mobility and/or UE
communication analytics for a UE or group of UEs.
The AI/ML AF may additionally leverage other sources of data in order to
update or refine existing parameters provisioned (see clause 4.15.6 of TS
23.502 [4]). To do so, the AI/ML AF may use AI/ML traffic from the UE(s) (e.g.
intermediate data, local training data, inference results or model
performance) that are exchanged over the User Plane PDU session established
between AI/ML AF and the UE (or the AI/ML application client on the UE) to
derive AI/ML-assisted parameters. The AI/ML AF may also subscribe to the NWDAF
for existing collective behaviour information as part of NF load analytics
(see clause 6.5.2, TS 23.288 [6]).
The AI/ML AF may provide AI/ML assisted parameters i.e. a new (set of)
parameter(s) as shown in Table 6.36.1-1. An enhanced external parameter
provisioning procedure is depicted in clause 6.36.2.
NOTE 1: The AI/ML traffic from the UE(s) are not consumed by 5GC. The AI/ML AF
extracts (or derives) a set of one or more parameters that can be consumed by
5GC NFs (e.g. AMF or SMF).
Table 6.36.1-1: Description of AI/ML assisted UE Behaviour data
+----------------------------------+----------------------------------+ | AI/ML assisted parameters | Description | +==================================+==================================+ | A (set of) Expected UE Behaviour | Each value within set is | | parameters | associated to an entry in | | | clause 4.15.6.3, Table | | | 4.15.6.3-1, TS 23.502 [4] | | | (NOTE 1). | +----------------------------------+----------------------------------+ | Expected Inactivity Time | Expected time during which the | | | UE will not be providing AI/ML | | | related data | +----------------------------------+----------------------------------+ | Expected CP-UP Switch | Expected time where the UE may | | | request to switch from data | | | transmission over the CP to data | | | transmission over the UP | +----------------------------------+----------------------------------+ | NOTE 1: When a set of parameters | | | are provided, each entry can be | | | associated with a probability | | | assertion (i.e. confidence) and | | | optionally other parameters | | | (e.g. the level of accuracy). | | | | | | NOTE 2: UE communication | | | analytics can be leveraged by | | | the AF to provide more accurate | | | Expected Inactivity Time | | | parameter for different AI/ML | | | types of traffic. | | | | | | NOTE 3: The primary use of the | | | CP-UP switch parameter is to | | | inform the network about the | | | time when the application | | | expects that a UE\'s traffic | | | (which may be being transferred | | | using control plane CIoT 5GS | | | optimization, see | | | TS 24.301 [13]) is switched to | | | UP (N3) data transfer. The | | | parameter may be derived based | | | on the application prediction on | | | the expected AI/ML traffic. | | +----------------------------------+----------------------------------+
NOTE 2: Whether CP/UP related information is useful or not will be determined
in the conclusion clause.
### 6.36.2 Procedures
Figure 6.36.2-1: External Parameter Provisioning via AI/ML AF
1\. The NF (e.g. AMF, SMF) can subscribe to Group Subscription data from UDM.
The NF may request externally provisioned AI/ML assisted individual parameters
or as a set of AI/ML assisted parameters.
If a parameter subscription is provided by the NF, the subscription may
include a threshold indicating that certain confidence and/or level of
accuracy must be met for the parameter(s) to be notified by UDM to the NF. The
NF may decide such a threshold e.g. to prevent AI/ML assisted parameters being
notified without certain minimum level of confidence. Meeting the threshold
condition may mean that a parameter is equal to a certain threshold, or less
than a certain threshold, or greater than a certain threshold, or less than or
equal to a certain threshold, or greater than or equal to a certain threshold.
The threshold may be in the form of a range (e.g. minimum value to maximum
value, where each may be inclusive or exclusive).
2\. The AI/ML AF may configure the AIML transport configuration information
using partly the procedure to influence the traffic routing as defined by
clause 4.3.6 of TS 23.502 [4] (see also enhancements in Solution #13). This is
to establish User Plane PDU session(s) by UE or by group of UEs to the AI/ML
AF. The PDU session can be used by AI/ML AF to collect AI/ML traffic from the
UE(s) (e.g. intermediate data, local training data, inference results or model
performance). This is in addition to the subscription to the NWDAF for UE
mobility and/ or UE communication analytics for a UE or group of UEs.
The AI/ML AF may also subscribe to the NWDAF for existing collective behaviour
information as part of NF load analytics (e.g. by setting an area of interest
for the group of UEs as part of analytics filters).
3\. The AI/ML AF collects, validates, aggregates and normalises the collected
AI/ML traffic and analytics related to different UEs from multiple sources
(e.g. AI/ML application client on the UE, NWDAF or DCAF).
4\. The AI/ML AF provides one or more AI/ML assisted parameter(s), to be
created, updated or deleted at the UDR using existing NEF services (e.g. in
case of untrusted AI/ML AF). Alternatively, a trusted AI/ML AF may directly
interact with UDM / UDR without NEF intervention.
(When applicable) NEF checks whether the requestor is allowed to perform the
requested service operation by checking requestor\'s identifier (e.g. the
AI/ML AF Identifier). The payload of the request is covered in Table 6.36.1-1
in addition to other existing parameters from clause 4.15.6.3 of TS 23.502
[4].
5\. If the AI/ML AF is authorised by the NEF to provision the parameter(s),
the NEF requests to create, update and store, or delete the provisioned
parameter(s) as part of existing UDM services.
If the AI/ML AF is not authorised to provision the parameter(s), then the NEF
continues in step 8 indicating the reason for failure in NEF response message.
Steps 9 and 10 can also be skipped.
The NEF can translate the AI/ML AF Identifier to DNN and/or S-NSSAI of the
AI/ML AF or any associated AI/ML Application Server(s) when applicable for an
untrusted AF.
6\. UDM interacts with UDR to create, update, or delete the AI/ML assisted
parameters based on the existing services (subject to authorisation). The UDM
classifies the received AI/ML assisted parameters into e.g. AMF associated,
SMF associated, (including validity time) and then stores them under the
corresponding data within the UDR.
Based on local configuration, UDM may determine if there is any requirement in
terms of threshold conditions that need to be met by the provisioned parameter
before storing it in UDR. If satisfied, UDM may proceed seamlessly. If not
satisfied, step 7 is triggered as a failed procedure and a cause value is
provided e.g. \"confidence level not sufficient\". In that case the rest of
step 6 is skipped.
7\. UDM responds the request with existing UDM services. If the procedure
fails, the cause value indicates the reason.
8\. NEF responds the request with existing NEF services. If the procedure
fails, the cause value indicates the reason, which may have been indicated to
NEF by UDM.
9\. UDM notifies to the subscribed Network Function (e.g. AMF, SMF) of the
updated UE and/or Group subscription data via UDM Notify message.
If the NF subscription in step 1 included a threshold, UDM may determine if
there is any requirement in terms of threshold conditions that need to be met
by the provisioned parameter before sending a notification with the parameter
value to the NF. If satisfied, UDM may proceed seamlessly. If not satisfied,
the provisioned parameter is not sent to the NF.
10a. If the NF is AMF, the AMF identifies whether there are overlapping
parameter set(s) and merges the parameter set(s), e.g. in the AI/ML assisted
Expected UE Behaviour parameters, if necessary. The AMF uses the received
AI/ML assisted parameters to derive the appropriate UE configuration of the
NAS parameters and to derive Core Network assisted RAN parameters.
In one alternative, if the AMF receives more than one parameter per entry
(i.e. a set of parameters), the AMF may choose one of the parameters based on
the associated probability assertion/confidence (e.g. the one with the highest
probability is chosen) or based on the evaluation metrics that are received
for each case (e.g. level of accuracy). The AMF may also choose a parameter
out of the set based on local policies and/or subscription information. The
AMF may then act as described above once a parameter has been selected.
If the NF is SMF, the SMF stores the received AI/ML assisted parameters and
associates them with a PDU Session based on the DNN and S-NSSAI included in
the message from UDM. The SMF identifies whether there are overlapping
parameter set(s), e.g. in the AI/ML assisted Expected UE behaviour parameters
and merges the parameter set(s), if necessary. The SMF may use the received
AI/ML assisted parameters as follows:
\- SMF configures the UPF accordingly. The SMF may use the Communication
Duration Time and/or Battery Indication and/or Expected Inactivity Time and/or
Expected CP-UP Switch combined with probability assertion per entry to
determine an individual or collective pattern of activating or deactivating UP
connection for AI/ML traffic (e.g. for a UE or across a group of UEs for FL
operation) and to perform CN-initiated selective deactivation of UP connection
of an existing PDU Session when necessary. If the Expected CP-UP Switch
parameter is provisioned by the AF and Control Plane CIoT 5GS Optimisation is
enabled, the SMF may leverage the provisioned parameter (as well as additional
information such as amount of data to be transferred or congestion) to
optimize the timing of the switch to user plane transmission by following the
descriptions in clause 5.31.4.2 of TS 23.501 [3] and clause 4.2.10.2 of TS
23.502 [4] to trigger a N3 data transfer establishment procedure.
If the SMF receives more than one parameter per entry (i.e. a set of
parameters), the SMF may choose one of the received parameters based on an
associated probability assertion (e.g. the one with the highest probability is
chosen) or based on the evaluation metrics that are received for each case
(e.g. the level of accuracy). The SMF may also choose a parameter out of the
set based on local policies and/or subscription information. The SMF may then
act as described above once a parameter has been selected.
\- The SMF may derive SMF derived CN-assisted RAN information for the PDU
Session. The SMF provides the SMF derived CN assisted RAN information to the
AMF as described in PDU Session establishment procedure or PDU Session
modification procedure.
### 6.36.3 Impacts on services, entities and interfaces
AI/ML AF:
\- To collect AI/ML-related traffic from the UE(s).
\- To derive AI/ML assisted parameters.
\- To provision AI/ML assisted parameters to 5GC.
UDM:
\- To classify, request to store in UDR or notify AI/ML assisted parameters in
addition to other existing parameters.
\- To determine if there is any threshold conditions that need to be met by
the provisioned AI/ML assisted parameter(s).
UDR:
\- To store AI/ML assisted parameters.
AMF:
\- To request or subscribe for AI/ML assisted parameters.
SMF:
\- To request or subscribe for the AI/ML assisted parameters.
## 6.37 Solution #37: Solution for 5GC Assistance to support Group-MBR
Monitoring
### 6.37.1 Description
This solution touches on KI #1 and #7.
NOTE: The Sol#16 with overlapping contents and similar concept is merged into
this solution.
Federated learning (FL) is a group-based learning method and there will be
many files and multiple rounds of interactions between the UEs and the FL
server over 5GS during the FL process. Just like any other services, there
should be SLA between the MNO and ASP to agree on the allowance of the maximum
throughput that can be consumed between the end points (i.e. the group of UEs
and the AS) of the given FL operation. Therefore, it is necessary to introduce
a system monitoring parameter to assist the AF to keep track of the status of
the aggregated throughput usage for the given federated learning operation.
During the FL operation, the application server can be connected to one or
more NG-RAN nodes through one or more UPFs, and each NG-RAN node could be
serving multiple UEs participating in FL operation. Figure 6.37.1-1 below,
illustrates an example of 7 UEs in total within the service area of a given FL
operation. In a specific round, AF selects 5 of them to be participated in the
FL training. In order to ensure that the resources consumed by the 5 UEs are
within the specified throughput limit, the UPF(s) report(s) the actual bit
rate for the 5 corresponding QoS flows that support the FL operation
periodically to the serving NEF. The serving NEF then aggregates the bit rates
for the 5 QoS flows and compares aggregated bit rate against the Group-MBR for
the given FL operation. The aggregated bit rate shall not exceed the
provisioned Group-MBR for the given FL operation. The following figure
presents the high-level representation of the descriptions above.
Figure 6.37.1-1: The definition of the aggregated bit rate and the Group-MBR
In order to support the Group-MBR monitoring as described above, this solution
proposes to extend the Application Function (AF) Influence on traffic routing
functionality to enable 5GC assistance to support the Group-MBR monitoring for
the group transmission operation (e.g. FL operation) when such operation is
activated by the Application AI/ML AF.
It is beneficial to leverage existing AF Influence for Traffic Routing to
support Group-MBR monitoring, because it is capable of triggering the group
policy management in PCFs, SMFs and UPFs that serve the UEs who participate in
the Application AI/ML operation.
In order to assist the Application Function (AF) to supervise the total
aggregated bit rate consumed by the group of the transmissions for the given
Application AI/ML operation (e.g. FL operation) to be in compliance with the
SLA between the MNO and the ASP, this solution proposes the Group-MBR
monitoring operation to provide the assistance to the AF as follows:
The Group-MBR monitoring is initiated by the Application AI/ML AF to request
5G system which supports the group transmission operation for the Application
AI/ML traffic (e.g. FL operation). The Group-MBR monitoring is applied
separately for uplink and downlink Application AI/ML traffic. This is to
accommodate the case of asymmetric bitrate for UL and DL directions. The
following presents the high-level descriptions of this solution on how 5G
system assists the Application AI/ML AF to perform the Group-MBR monitoring:
\- Prior to the start of the group transmission operation of user plane
traffic initiated by the Application AI/ML AF, the Group-MBR threshold should
have been provisioned in the 5G Core related to the application subscription
data which is identified by Application Identifier and/or traffic filtering
information. network slice (i.e. S-NSSAI) and DNN.
\- The Application Function (AF), which controls and operates the given
application AI/ML operation, initiates the Group-MBR monitoring request to 5G
Core for a given set of QoS flows corresponding to a group of PDU sessions
that support a group transmission operation (e.g. FL operation). The AF
request includes the AF Transaction Id, the AF own identifier (i.e. AF
Identifier), the Group Identifier, the Application Identifier and/or the
traffic filtering information, as well as the Maximum Duration of Reporting
and Group Reporting Guard Time as specified in clause 4.15.1 of TS 23.502 [4].
\- When the NEF receives the AF request, it ensures the necessary
authorization for the incoming AF request. NEF may have to perform mapping for
the information from the AF request. NEF will then store the information
received from the AF request into the UDR.
\- The Policy Control Functions (PCFs) which serve the group of UEs for their
corresponding PDU sessions that support the group transmission operation (e.g.
FL operation) for the given application will be notified by the UDR about the
policy impacts towards those PDU sessions as the outcome of the AF request.
\- The PCFs updates the corresponding Session Management Functions (SMFs) that
provision the PSA UPFs which control the affected PDU sessions with the Bit
Rate Reporting policy for the target QoS flows. In addition, the Group
Reporting Guard Time and the Maximum Duration of Reporting are provided to
each of the PSA UPFs. The PSA UPFs are then activated for the Bit Rate
Reporting of the QoS flows that supports the Application AI/ML group
transmission operation (e.g. FL operation). The consumer of the Bit Rate
Reporting is associated with the address of the NEF.
\- Between the Group Reporting Guard Times, the PSA UPF for a given UE, who
participates in the group transmission operation (e.g. FL operation), reports
the bit rate of the QoS flow corresponding to the specified Application
Identifier or Traffic Filtering information. The given QoS flow could be
either GBR or Non-GBR. The UPF reports the bit rate of the given QoS Flow to
the AF\'s serving NEF based on the address that is provisioned by the PCF.
\- When the NEF receive a set of bit rates reports from the group of PSA UPFs,
the NEF will aggregate the set of bit rates and compare the aggregated value
against the Group-MBR threshold. If the aggregate bit rate exceeds the Group-
MBR threshold, the NEF will notify the AF for the event about the excess
traffic over the Group-MBR threshold together with the AF Transaction
Identifier.
\- The NEF sums up the bit rates for the active QoS flows per uplink and
downlink separately NEF sums up the bit rate of the active QoS flows for the
uplink and for the downlink traffic. NEF compares the aggregated bit rate for
the uplink or downlink traffic against the provisioned Group-MBR threshold for
the uplink or downlink traffic, respectively.
\- Whether the AF exerts any traffic mediation action when it receives the
Group-MBR monitoring report (e.g. requesting 5G Core to apply traffic gating
on specific QoS flow), it is beyond the scope of this solution.
\- Until the expiration of the Maximum Duration of Reporting which was
specified by the AF, the time left until the Maximum duration of reporting is
less than the Group Reporting Guard Time, or AF explicitly terminates the
Group-MBR monitoring, the Group Reporting Guard Timer will restart and the PSA
UPF continues to perform the Bit Rate Reporting for the given QoS flow to the
NEF periodically.
### 6.37.2 Procedures
#### 6.37.2.1 Defining Group-MBR Traffic Monitoring Parameter
This solution defines Group-MBR as follows:
Group Maximum Bit Rate (Group-MBR)
\- The Group-MBR threshold provides the upper bound of the aggregated bit rate
across a set of QoS flows which are either a group of GBR or Non-GBR QoS flows
corresponding to a group of PDU Sessions for a group of UEs who participate in
a specific group transmission operation (e.g. Federated Learning (FL)
operation) with active user planes. In general, the Group-MBR threshold is
provisioned as part of the Application Subscription data based on the Service
Level Agreement (SLA) between the Mobile Network Operation (MNO) and the
Application Service Provider (ASP) for a given application. In the case when
the application with asymmetric uplink and downlink traffic, Separate Group-
MBR thresholds are provisioned for uplink and downlink accordingly.
#### 6.37.2.2 Extensions to AF Influence Information Element in AF request to
monitor and report aggregate bit rate among the specific group of PDU sessions
This solution proposes to update Table 5.6.7-1 of TS 23.501 [3]: Information
element to be included in AF request, with a new optional AF Influence
information element introduced by this solution in AF request, Group-MBR
Monitoring, to indicate the AF request for monitoring the aggregated bit rate
of a group of QoS flows, that are used to support the Application AI/ML group
transmission, against the Group-MBR threshold which is also introduced by this
solution and is to be part of the Application Subscription data provisioned in
the UDR. In addition, the two existing Event Reporting Information Parameters
- Group Reporting Guard Time and Maximum Duration of Reporting, as described
in clause 4.15.1 of TS 23.502 [4], should also be provisioned in the UDR with
the proper values for the given Application AI/ML group transmission
operation. The Group-MBR Monitoring threshold is determined based on the
Service Level Agreement (SLA) between the Mobile Network Operator (MNO) and
Application Service Provider (ASP). The changes to Table 5.6.7-1 of TS 23.501
[3] for the new information element that is introduced by this solution to
indicate the Group-MBR Monitoring request is shown in \"bold italic\" in the
table below.
Note that, the \"Traffic Description\" information element in the table below
is the \"existing\" information that has been defined in Table 5.6.7 of TS
23.501 [3] and is contained in the AF request. This existing information
element is used to indicate the target QoS flow(s) that are applicable to the
Group-MBR monitoring.
+---------------------------------------------------------------+ | Proposed example changes to Table 5.6.7-1 of TS 23.501 [3]: | | | | Table 5.6.7-1: Information element contained in AF request | +---------------------------------------------------------------+
#### 6.37.2.3 Extensions to AF Influence Network Function Service Procedure to
enable the support for Group-MBR monitoring
This solution proposes to extend the AF traffic influence for traffic routing
service procedure as defined in clause 5.2.6.7.2 of TS 23.502 [4] to include
the new optional information element, Group-MBR monitoring, to indicate the AF
request for Group-MBR monitoring that was described in clause 6.37.2.2 above
for the Table 5.6.7-1 of TS 23.501 [3]: Information element contained in AF
request. The changes are shown below in \"**_bold italic_** \".
Table 6.37.2.3-1: Proposed added parameters for AF Influence to support Group-
MBR monitoring
+----------------------------------------------------------------------+ | Proposed example changes to clause 5.2.6.7.2 of TS 23.502 [4]: | | | | **5.2.6.7.2 Nnef_TrafficInfluence_Create operation** | | | | **Service operation name:** Nnef_TrafficInfluence_Create | | | | **Description:** Authorize the request and forward the request for | | traffic influence. | | | | **Inputs, Required:** AF Transaction Id, AF Identifier. | | | | The AF Transaction Id refers to the request. | | | | **Inputs, Optional:** The address (IP or Ethernet) of the UE if | | available, GPSI if available, DNN if available, S-NSSAI if | | available, External Group Identifier if available, External | | Application Identifier or traffic filtering information, | | AF-Service-Identifier, a list of DNAI(s) and corresponding routing | | profile ID(s) or N6 traffic routing information, Indication of | | traffic correlation, Indication of application relocation | | possibility, Indication of UE IP address preservation, Early and/or | | late notifications about UP path management events, Notification | | Target Address, Temporal validity condition, Spatial validity | | condition, User Plane Latency Requirements, Information for EAS IP | | Replacement in 5GC** _,_** AF indication for simultaneous | | connectivity over source, **_and_** target PSA at edge relocation | | **_and Group-MBR Monitoring_** as described in clause 5.6.7 of | | TS 23.501 [3]. | | | | **Outputs, Required:** Operation execution result indication. | | | | **Outputs, Optional:** None. | +----------------------------------------------------------------------+
#### 6.37.2.4 Extensions to UPF Services to support Group-MBR monitoring
This solution proposes to extend the UPF Services as defined in clause 5.2.6
of TS 23.502 [4] to enable UPF reporting of the Bit Rate for specific QoS
flow. The proposed extensions are shown in the table below in \"**_bold
italic_** \".
Table 6.37.2.4-1: Proposed Extensions for UPF Services as defined in clause
5.2.6 of TS 23.502 [4]
+----------------------------------------------------------------------+ | _Example of Proposed extensions to clause 5.2.6 for the UPF | | services._ | | | | **5.2.26 UPF Services** | | | | **5.2.26.1 General** | | | | The following table shows the UPF Services and UPF Service | | Operations. | | | | Table 5.2.8.1-1: NF services provided by the UPF | | | | Service Name | | Service Operations Operation Semantics Example Consumer(s) | | ------------------ | | --- -------------------- --------------------- --------------------- | | Nupf | | _EventExposure Notify Subscribe/Notify NEF, AF | | | | **5.2.26.2 Nupf_EventExposure Service** | | | | **5.2.26.2.1 General** | | | | **Service description:** This service can expose UPF related | | information to other NFs. There is one operation for this service: | | | | - Notifying events on the PDU Session to the NFs. | | | | The following events can be notified to a NF consumer: | | | | - QoS Monitoring for URLLC: the event notification may contain the | | QoS Monitoring report as described in clause 5.33.3.2 of | | TS 23.501 [3]. | | | | The event notification may contain following information: | | | | - QoS monitoring result e.g. end to end delay for specific QoS flow | | or for specific PDU session. | | | | **_\- Bit Rate Reporting per QoS Flow._** | | | | **_The event notification contains the Bit Rate Reporting per QoS | | Flow for GBR or non-GBR QoS flow. The SMF may provision the | | following information in UPF to support the reporting:_** | | | | **_\- QFI information to indicate the target QoS flow required for | | the reporting._** | | | | **_\- Group Reporting Guard Time._** | | | | **_\- Maximum Duration of Reporting._** | | | | **_\- Address of Target Consumer._** | | | | **5.2.26.2.2 Nupf_EventExposure_Notify service operation** | | | | **Service operation name:** Nupf_EventExposure_Notify | | | | **Description:** This service operation reports the event and | | information to the consumer that has subscribed implicitly. | | | | **Input Required:** Event ID, UE address (i.e. IP address or MAC | | address). | | | | **Input, Optional:** Event specific parameter as described in | | clause 5.2.26.2.1. | | | | **Output Required:** Result Indication. | | | | **Output, Optional:** None. | +----------------------------------------------------------------------+
#### 6.37.2.5 Extensions to AF Influence on traffic routing negotiation
procedure to enable the group service provisioning and the activation for
Group-MBR monitoring
This solution proposes to extend the procedure \"Processing AF requests to
influence routing for Session not identified by a UE address\" as defined in
clause 4.3.6.2 of TS 23.502 [4] to update the N4 policy to trigger the Group-
MBR monitoring operation as described in clause 6.37.2.6 below. The following
descriptions focus only on the changes to the existing procedure as described
in clause 4.3.6.2 of TS 23.502 [4].
_Reference to clause 4.3.6.2 of TS 23.502 [4]:_
Figure 4.3.6.2-1: Processing AF requests to influence traffic routing for
Sessions not identified by an UE address
Figure 6.37.2.5-1: Reference to clause 4.3.6.2 of TS 23.502 [4] on the example
extensions to trigger Group-MBR Monitoring
1\. Application AI/ML AF includes the new information element, Information for
Supporting Group-MBR Monitoring, as described in Table 5.6.7-1 in clause
6.37.2.1 of TS 23.501 [3] in the AF request to NEF. The information element
indicates the Group-MBR monitoring request for the given Application AI/ML
group transmission operation (e.g. FL operation). More specifically, the AF
request includes the AF Transaction Id, the AF own identifier (i.e. AF
Identifier), the Group Identifier, the Application Identifier and/or the
traffic filtering information.
2\. Prior to AF sends its request to the NEF, it includes the new information
element provided in step 1. Above to NEF in case of
Nnef_TrafficInfluence_Create or Update. Then the existing procedures as
described in step 2 in clause 4.3.6.2 of TS 23.502 [4] proceed.
3\. In the case of Nnef_TrafficInfluence_Create or Update, in additional of
the set of AF request information to be stored, the NEF stores also the new
information element provided in step 1. above by the AF in the UDR together
with the address of the AIML NF/NEF which is to trigger the Group-MBR
monitoring for the group of QoS flows of the future and the existing PDU
sessions that are identified by the tuple {S-NSSAI, subscribed DNN},
Application Identifier and/or the traffic filters. It is expected that the two
existing Event Reporting Information Parameters - Group Reporting Guard Time
and Maximum Duration of Reporting, as described in clause 4.15.1 of TS 23.502
[4], should also have been provisioned in the UDR with the proper values for
the given Application AI/ML group transmission operation.
5\. In the Npcf_SMPolicyControl_UpdateNotify in the current step 5. in clause
4.3.6.2 of TS 23.502 [4], the PCF includes the Group-MBR Monitoring request in
the PCC rule(s) the information required for reporting the event, including
the Notification Target Address pointing to the NEF and the Notification
Correlation ID containing the AF Transaction Internal ID.
6\. Based on the current step 6 in clause 4.3.6.2 of TS 23.502 [4], when the
updated policy information about the Group-MBR monitoring request is received
from the PCF, the SMF responds to the request by taking the appropriate action
to trigger the Bit Rate Reporting per QoS Flow in PSA UPF over N4. The N4
policy enables SMF to provision the PSA UPF to report the current bit rate for
the specific QoS flow to the NEF periodically between the Group Reporting
Guard Times until Maximum Duration of Reporting is expired. The
Nupf_EventExposure service as previously described in clause 6.37.2.4 above is
then implicitly subscribed by NEF to receive the report from PSA UPF for the
Bit Rate Reporting per QoS Flow.
#### 6.37.2.6 The procedure of Group-MBR monitoring
After the PDU session establishment/modification, and the policy negotiation
and provisioning as described in previous clause of 6.37.2.6 above between the
UEs and the AF, the PSA UPFs of a group of PDU sessions are activated by their
respective SMFs to report the current bit rates of the active QoS flows
corresponding to the given Application Identifier, DNN and S-NSSAI
periodically to the specified NEF. The NEF will then aggregate the bit rates
and compare the aggregated bit rate against the Group-MBR threshold. If the
aggregated bit rate exceeds the Group-MBR threshold, the NEF notifies the AF.
Figure 6.37.2.6-1: Group-MBR Monitoring via AF request
1\. By extending the AF Influence Routing procedures to enable the policy
negotiation and provisioning to support the Group-MBR monitoring as described
in previous clause 6.37.2.5, the corresponding group of PCFs, SMFs and PSA
UPFs are triggered to activate the Bit Rate Reporting per QoS Flow for the
group of QoS flows that is used to support the given Application AI/ML group
transmission operation (e.g. FL operation) as requested by the AF.
2\. The PSA UPF performs the Bit Rate Reporting per QoS Flow of the active QoS
flow which is used to support given Application AI/ML group transmission
periodically between the Group Reporting Guard Times. The QoS flow is
identified by Application Identifier and/or Traffic Filter. The reported QoS
flow could be either GBR or Non-GBR.
3\. The PSA UPF sends Nupf_EventExposure_Notify to report the current bit rate
of the given QoS Flow to the target NEF based on the address that has been
provisioned by the PCF as described in clause 6.37.2.5, step 5.
4\. The NEF sums up the bit rates of all the active QoS flows which are
reported by the UPFs. If the given Application AI/ML traffic is asymmetric,
the bit rate aggregation is done per uplink and downlink separately;
otherwise, the bit rate aggregation is done per either uplink or downlink. NEF
compares the aggregated bit rate of the uplink or downlink against the
provisioned Group-MBR threshold for the uplink or downlink, accordingly.
5\. If the aggregate bit rate exceeds the Group-MBR threshold, the NEF will
notify the Application AI/ML AF of such event with the AF transaction
Identifier.
6\. AF may apply traffic mediation action in responding to the Group-MBR
monitoring report (e.g. requesting 5G Core to apply traffic gating on specific
QoS flow such as asking 5GC to block some of the flows) or may decide not to
take any action other than use it for its own statistics or charging.
7\. Until the time for Maximum Duration of Reporting is expired, the time left
until the Maximum duration of reporting is less than the Group Reporting Guard
Time, or AF terminates the Group-MBR monitoring, the Group Reporting Guard
Timer will restart and the UPF continues to perform the Bit Rate Reporting for
the given QoS flow to the NEF periodically as described in steps 2 to 6 above.
If AF wants to terminate the Group-MBR monitoring, AF sends either
Nnef_TrafficInfluence_Update or Delete as described in clause 4.3.6.2 of TS
23.502 [4].
### 6.37.3 Impacts on services, entities and interfaces
NEF:
\- Recognizes the new IE for Group-MBR Monitoring for the existing feature of
AF Influence Traffic Rerouting.
\- Supports the Bit Rate Reporting event notification from UPF.
\- Performs the aggregation for the bit rates that are reported by the UPFs.
PCF:
\- Subscribes to the application subscription data corresponding the
Application Identifier and/or the Traffic Filters.
\- Generates the new PCC rules corresponding to the Group-MBR Monitoring.
SMF:
\- Responds to the new PCC rules related to the Group-MBR Monitoring and
determines the N4 rules to trigger UPF to activate Bit Rate Reporting per QoS
Flow towards NEF.
UPF:
\- Support the new event reporting for Bit Rate Reporting per QoS Flow towards
the target NEF.
\- Responds to the N4 rules to activate periodic Bit Rate Reporting per QoS
Flow towards the target NEF between the Group Reporting Guard Times until
Maximum Duration of Reporting is expired, the time left until the Maximum
duration of reporting is less than the Group Reporting Guard Time, or AF
terminates the Group-MBR monitoring.
## 6.38 Solution #38: Time dependent QoS for ML model distribution in
federated learning
### 6.38.1 Description
This solution addresses aspects of key issue #6 on QoS and Policy enhancements
and key issue #7 on 5GS Assistance to Federated Learning Operation.
The time dependent QoS, whereby resources can be reserved for prescribed
periods in the 5GS, can meet the needs of AI/ML model transfer, which requires
brief and periodic use of significant 5GS resources. Reserving resources at
specific times allows more efficient multiplexing of groups of UEs that need
to transfer AI/ML models.
The solution is based on the following steps:
1\. An AF (AI/ML application server acting as AF) sends to the 5GS a QoS
request containing traffic pattern information for model transfer (e.g. model
size, transfer direction, model transfer periodicity, start time(s), stop
time(s)) or QoS timing information indicating the period when the QoS should
be applied. The AF may also specify QoS requirements for periods when a model
is not being transferred to the application clients on the UEs but other AI/ML
operations could take place, e.g. a model update is provided by the
application client on the UE to the AF, or inference feedback is sent by the
application client on the UE to the AF. An AI/ML service may rely on different
types of AI/ML operations, which would require different QoS patterns for the
same AI/ML service.
2\. The 5GS (NEF or Federated Learning Assistance Function) verifies and
potentially converts the request to a time-dependent QoS request that the PCF
can in turn provide as one or several PCC rule(s) to the SMF together with
timing information. The SMF maps the information received from the PCF to one
or several QoS Profiles which are applicable only at times which are indicated
by the PCF (e.g. via start time, duration, and possible repetition period).
For example, there can be one QoS Profile applicable for the time during which
model(s) are transferred and a second QoS profile applicable for the time when
models are not transferred.. As an option, the PCF also includes information
about the data volume to be expected during a time period in the QoS profile,
based on model size information.
3\. The SMF sends the QoS profiles to the NG-RAN and the QoS Profile Timing
Map. If the Traffic Pattern Information is received, the NG-RAN formulates QoS
Profile Timing Map.
4\. The NG-RAN alternates between the different QoS Profiles provided by the
SMF according to the QoS Profile Timing Map. The QoS Profile Timing Map may,
for example, specify alternating QoS between:
\- QoS 1: Time 2:30:30 to 2:30:35 (five seconds).
\- QoS 2: Time 3:30:00 to 3:40:00 (10 minutes).
Where QoS 1 provides resources for model transfer while QoS 2 provides
resources for low bandwidth background traffic (i.e. when no model transfer
occurs).
When the requested QoS cannot be provided in the specific time slot, the AF is
notified that QoS targets can no longer be fulfilled, as per TS 23.503 [5]
clause 6.1.3.18.
The existing procedures for resources reservation and QoS fulfilment apply,
i.e. there is no additional mechanism proposed by this solution in this
respect. Approach in NG-RAN is similar to alternative QoS handling.
The solution allows switching between different QoS profiles at NG-RAN, thus
avoiding signalling at each QoS change, between PCF and SMF, and between SMF
and NG-RAN.
### 6.38.2 Procedures
#### 6.38.2.1 Procedure based on setting up an AF session for QoS
Procedure as depicted in figure 6.38.2.1-1 is based on enhancing the procedure
for setting up an AF Session for specific QoS.
Figure 6.38.2.1-1: Procedure for time dependent QoS
1\. An AF sends QoS requirements (e.g. bandwidth required, PER, 5GS Delay,
GBR) with QoS timing information (e.g. Model transfer periodicity etc.) to the
NEF. Time dependency information indicates time for which these requirements
shall apply (e.g. required QoS1 applies for when an ML model data transfer is
taking place and, as an option, required QoS2 applies for the rest of the
time).
Alternatively (not shown in the Figure), the AF may send traffic pattern
information (e.g. model size, model transfer periodicity, start time(s),
duration(s), stop time(s)), so that traffic pattern information can be
translated to time-dependent QoS requirements in the 5GC.
The AF may provide the information for a single UE or for a list or group of
UEs. If the AF provides a list of UEs, it may indicate different periods
during which these requirements shall be valid or time of model transfer for
different UEs within the list.
NOTE 1: The AF can send this request to an NEF (as shown in the figure, if the
AF is untrusted), or to a Federated Learning Assistance Function, or a PCF.
NOTE 2: The AF can use the External Parameter Provisioning procedure as shown
in clause 4.15.6 of TS 23.502 [4] to provide this information via NEF and UDM
towards the PCF (not shown in Figure 3),
2\. In the case of untrusted AF, the NEF authorizes the AF request as per the
standard procedures. Regular NEF behaviour applies, e.g. converting external
identifiers into internal 5GS identifiers.
3\. The NEF forwards the request to Federated Learning Assistance Function, to
perform the functions described in steps 4 to select PCF(s), authorize QoS and
provide time and periodicity for time dependent QoS. Alternatively, if the PCF
is contacted directly, it authorizes QoS and uses the information in the
request from the AF/NEF to determine QoS timing and periodicity for use in
step 6.
4\. The Federated Learning Assistance Function may map the possibly provided
information for model transfer to QoS information for the UEs provided in step
3.
5\. The Federated Learning Assistance Function selects PCFs handling involved
UEs, and requests those PCFs to authorize the QoS required for the model
transfer separately for each involved UE. It provides QoS information and time
information (start time(s), stop time(s), periodicity) to the PCF.
6\. The PCF determines PCC rule(s) that include QoS applicability time(s)
(e.g. start time(s), duration(s), and repetition period(s)) that are to be
transferred to the NG-RAN. The PCF may provide several QoS Parameter sets with
applicability times associated to these QoS Parameter sets. The PCF may also
include information about the data volume to be expected during applicable QoS
time periods.
7\. The PCF sends the PCC rule(s) with the information determined in step 6 to
the SMF.
8\. The SMF determines based on the PCC Rule(s) QoS profiles with QoS
Profiles\' Timing Map and optional data volume(s) and provisions them to the
NG RAN. The PCF may also provide time dependent PDRs to the UPF.
9\. NG RAN executes time dependent QoS as per the specified QoS profiles in
the specified QoS Profiles\' Timing.
NOTE: Coordination is needed with RAN for the NG RAN impacts aspects.
10-13. Responses to the requests of steps 1, 3, 5, and 7 are sent back to the
respective NF service consumers.
#### 6.38.2.2 Procedure for UEs\' staggering with notification to the AI/ML
application server
Procedure as depicted in figure 6.38.2.2-1 is based on enhancing the procedure
for solution #23 while introducing UEs\' staggering functionality.
When the Federated Learning Assistance Function provides suggested UEs to the
AF, it also provides suggested times for the federated learning cycles with
those UEs back to the AF. AF select UEs and times from the list of suggested
UEs and suggested times, and request QoS to 5GC for those UEs with QoS timing
information as described in clause 6.38.2.1. The Federated Learning Assistance
Function selects PCFs handling involved UEs, and requests those PCFs to
authorize the QoS required for the model transfer separately for each involved
UE. The Federated Learning Assistance Function provides time(s) and optionally
periodicity when the model transfer to/from the UE will occur to the PCF. The
actions triggered by the PCF are as described for procedure in clause
6.38.2.1.
Figure 6.38.2.2-1: UEs\' staggering with notification to AF
The procedure follows the procedure depicted for solution #23 with the
following additions:
1\. The AF provides QoS requirements (e.g. bandwidth required, PER, 5GS Delay,
GBR) with time dependency information (e.g. bandwidth required, PER, 5GS
Delay, GBR, Model transfer periodicity etc.) to the NEF. Alternatively (not
shown in the Figure), the AF may send traffic pattern information (e.g. model
size, model transfer periodicity, Start time(s), duration(s), stop time(s)).
8\. The Federated learning Assistance Function select UEs for the federated
learning from the group of UEs and determines the times for models download
for the different UEs to be suggested to AF.
9\. The Federated Learning Assistance Function provides a list of suggested
UEs to the AF together with suggested times for the different UEs.
10\. AF select UEs and times from the list of suggested UEs and suggested
times, and request QoS to 5GC for those UEs with QoS timing information as
described in clause 6.38.2.1.
12-13. The Federated Learning Assistance Function determine times for new
suggested UEs and provide the information to the AF.
### 6.38.3 Impacts on services, entities and interfaces
AF:
\- Provides time dependency information to the NEF in addition to existing QoS
requirements. Alternatively, provides traffic pattern information.
Federated Learning Assistance Function: Maps traffic pattern information to
QoS profile and time information.
PCF:
\- Derives PCC rules with QoS applicability times, based on different QoS
profiles with different time information.
SMF:
\- Provisions the PCC rules with QoS applicability time to the NG-RAN and time
dependent PDRs to the UPF.
NG-RAN:
\- Schedules time dependent QoSs.
NOTE: Coordination is needed with RAN for the NG RAN impacts aspects.
UPF:
\- Enforces time dependent PDRs.
## 6.39 Solution #39: 5GC information assistance to FL members\' selection
### 6.39.1 Description
This solution addresses Key Issue #7 \"5GS Assistance to Federated Learning
Operation\" on assistance to selection of UEs for FL operation and on how to
monitor and expose a UE performance for the purpose of FL operations or to
support performance KPIs defined in clause 7.10 of TS 22.261 [2], that is part
of KI#6.
This solution is based on the principles as follows:
\- The FL group management is under the control of the AF; and
\- The 5GC NF just provides some network information to help the AF to select
and manage the group of UEs which will be part of FL operation; and
\- How the AF selects and manages the group of UEs which will be part of FL
operation based on the network information is out of 3GPP scope.
To request the network information from the 5GC NF, the AF may provide an Area
of Interest and/or a UE group ID to reduce the signalling of network
information exposure. Take the FL assisted Word Query Suggestion Model as an
example, the AF for Gboard on Android (i.e. the Google Keyboard) may provide
TAC (Type Allocation Code) as an External UE group ID to 5GC NF to request the
UE\'s network information if the UE is an Android terminal. Furthermore, there
are hundreds of millions of Android UEs in the 5G network, so to save the
signalling of network information exposure, the AF may also provide an AoI to
5GC NF to request the UE\'s network information if the UE is located in the
AoI or about to enter the AoI.
The assistance network information which can be provided by 5GC NFs to assist
FL members\' selection by AF is shown in Table 6.39.1-1.
Table 6.39.1-1: Information which can be provided by 5GC NFs for FL members\'
selection
Network Information 5GC NF Description Actions of AF (examples)
* * *
UE locations (1..max) AMF UE positions AF only selects the UEs which are
located in the requested AoI to join the FL group. >UE location TA or cells
that the UE enters (NOTE 1)  
>Timestamp A time stamp when the AMF detects the UE enters this location  
CM state AMF The NAS signalling Connection state of the UE with the AMF,
including CM-IDLE state and CM-CONNECTED state AF only selects the UEs which
are in CM-CONNECTED state to join the FL group. UE Reachability AMF Whether
the UE is reachable When the number of the connected UEs is not enough, AF may
select the UEs which are in IDLE state but are reachable to join the FL group.
UE Mobility NWDAF Statistics or predictions on UE Mobility. AF only selects
the UEs which are about to enter (UE mobility predictions) the requested AoI
to join the FL group. UE Abnormal behaviour NWDAF Statistics or predictions on
UE Abnormal behaviour. AF does not select the UEs with abnormal behaviour to
join the FL group. NOTE 1: UE location includes either the last known location
or the current location, under the conditions defined in Table 4.15.3.1-1 in
TS 23.502 [4].
To subscribe to the UE locations, CM state and UE Reachability from AMF, the
Event IDs \"Location Report\", \"Connectivity state changes\", \"UE
reachability status\" as defined in clause 5.2.2.3.1 of TS 23.502 [4] are used
respectively. Instead of the \"Location Report\", the \"UE moving in or out of
a subscribed \"Area Of Interest\"\" event can also be used to monitor if a UE
is located in the requested AoI.
To subscribe to the UE Mobility analytics and Abnormal behaviour related
network data analytics from NWDAF, the Analytics ID \"UE Mobility\" as defined
in clause 6.7.2 of TS 23.288 [6] and \"Abnormal behaviour\" as defined in
clause 6.7.5 of TS 23.288 [6] are used respectively.
NOTE: Which network information is requested by the AF depends on the FL
member selection criteria at the AF.
Table 6.39.1-2. Information that 5GC NFs can provide to the AI/ML server for
performance monitoring of a UE involved in an AI/ML operation
+------------------+--------+------------------+------------------+ | Network | 5GC NF | Description | Actions of AF | | Information | | | (examples) | +==================+========+==================+==================+ | Notification | PCF | The AF request | AF receives QoS | | control | | for QoS for the | Notification | | | | AI/ML operation | Control then use | | | | on e.g. AI/ML | it a) decide on | | | | model split or | AI/ML model | | | | AI/ML model | split; or b) | | | | download or | select the model | | | | AI/ML model | to download to | | | | generation by | the UE; or c) | | | | the FL member. | for re-selection | | | | The AF request | of those UEs | | | | notifications | that contribute | | | | when the GBR, | to ML model | | | | the PDB or the | generation. | | | | PER of the QoS | | | | | profile can no | Calculate the | | | | longer be (or | communication | | | | can be again) be | service | | | | guaranteed by | availability, | | | | NG-RAN. | for this the AF | | | | | checks the GBFR, | | | | The NG-RAN needs | PDB and PER of | | | | to send a | the Alternative | | | | notification | QoS profile, | | | | then checks if | e.g. PER set to | | | | GFBR, PDB and | 10^-3^ | | | | PER matches any | corresponds to | | | | Alternative QoS | 99.999 | | | | Profile in the | communication | | | | priority order | service | | | | and notifies | availability | | | | SMF, PCF and the | according to the | | | | AF. | require QoS. | +------------------+--------+------------------+------------------+
To subscribe to Notification control, the AF provides Alternative QoS profile
in the AF request with requested QoS to the PCF, may be via NEF when the AF is
untrusted, that triggers the subscription to the Notification on QoS targets
can no longer (or can again) be fulfilled. This subscription also triggers the
request for notifications of Resource allocation outcome, either successful or
unsuccessful, when the resource allocation is unsuccessful the notification on
QoS targets is not subscribed either.
### 6.39.2 Procedures
Figure 6.39.2: Procedure for 5GS assistance to FL members\' selection
The AF ensures that the UEs associated to the UE group ID have application
users consent in place and then follows the following procedure.
1a-5a. The procedure in clause 6.1.1.2 of TS 23.288 [6] for UE-related
analytics subscribe by AFs via NEF are re-used.
1b-5b. The procedure in clause 4.15.3.2.3 of TS 23.502 [4] for UE-related
event notifications subscribe by AFs via NEF are re-used.
After having notification from the 5G network, the AF selects AI/ML user
members for FL operation. Then the AF initiates the
Nnef_AFSessionWithQoS_Create/Notify/Update/Revoke procedure in TS 23.502 [4]
clause 4.15.6.6 for selected UEs for AI/ML operation.
In step 1a or step 1b, AF can include user consent indication and the UE
filtering policy (e.g. UE group ID, Expected number of UE for reporting,
validity conditions of areas of interest and time) in the subscription service
operation, and NWDAF or AMF can derive the notifications based on the UE
filtering policy.
With user consent indication and the UE filtering policy (e.g. UE group ID),
the NEF checks with UDM for the user consent of the requested Analytics and
Events Exposure Notifications before proceed step 3a and 2b. The NEF only
indicates the list of UEs with granted user consent to NWDAF or UDM. The NEF
also subscribes to the UDM with user consent change notification. If user
consent changes for the UE, the NEF notifies the AF indicating the UE ID with
proper cause value.
In step 3a and step 2b, the user consent indication is indicated to NWDAF and
UDM, respectively. With the user consent indication and target list of UEs for
Analytics and Event Exposure, the UDM does not check user consent again. If
target list of UEs is not indicated, i.e. for any UEs, the user consent
indication triggers requested NF, e.g. NWDAF, UDM, to check user consent of
UEs that meet the validity conditions, e.g. Area of Interest, time.
Alternatively, the AF can request to check user consent for Event/Analytics
Exposure before proceeding step 1a-5a and step 1b-5b by subscribing to a new
Event notification of user consent change by using the procedure in clause
4.15.3.2.3 of TS 23.502 [4] for UE-related event notifications.
NOTE 1: Whether and how the AF can indicate one or more purpose(s) needs to
cooperate with SA WG3.
NOTE 2: The user consent checking for the UE related 5GC information or
analytics exposure to 3rd party AF when there are potentially more than one
user consent enforcement points would need to be investigated by SA WG3.
Whether a user consent indication or one or more purposes from AF or a new AF
request message can be used to trigger user consent checking would need to be
investigated by SA WG3.
The procedure for AF request for QoS is reused as defined in TS 23.502 [4]
clause 4.15.6.6, the steps below describe how AI/ML AF consumes the
Nnef_AFSessionwithQoS or Npcf_PolicyAuthorization services. When the AI/ML
server requests QoS maps the performance requirements described in clause 7.10
of TS 22.261 [2] as follows:
\- Experience Data Rate UL/DL into Requested Guaranteed Bitrate, Requested
Maximum Bitrate,
\- Calculate from the maximum end to end latency the latency in 5GS then map
it into Requested 5GS Delay.
\- Reliability into Requested Packet Error Rate.
The AI/ML AF requests QoS Notification Control that is used to help the AF to
manage the communication with the UE. The AF subscribes to \"QoS targets can
no longer (or can again) be fulfilled\", the AF may provide a list of
Alternative QoS parameter for example:
\- If the UE communication with the AI/ML mode is for decisions on the AI/ML
model split, then the AF will provide one Alternative QoS parameter for each
different split point between the UE and the AI/ML server.
\- If the UE communication with the AI/ML model is for decisions on the AI/ML
model to be downloaded, then the AF will provide one Alternative QoS parameter
for each different AI/ML model that can be used for image-recognition.
Figure 6.39.2-2: Procedure for 5GS assistance to AI/ML operations
1\. The AF sends a request to reserve resources for an AF session using
Nnef_AFsessionWithQoS_Create request message (UE IP address, AF Identifier,
Flow description(s) or External Application Identifier, QoS reference, QoS
parameters, Alternative Service Requirements) to the NEF. The AF may, instead
of a QoS Reference, map the experience data rate UL/DL into the Requested
Guaranteed Bitrate, Requested Maximum Bitrate, the maximum e2e latency is
split to the UE to UPF latency then mapped into the Requested 5GS Delay,
Reliability mapped into Requested Packet Error Rate and Requested Alternative
QoS Parameter Set(s) or Alternative Service Requirements.
2\. The NEF authorizes the AF requests, then contact the PCF that serves the
SM Policy association for the provided UE IP address, triggering the
Npcf_PolicyAuthorization_Create request and provides the UE address, AF
Identifier, Flow description(s), the individual QoS parameters, QoS Reference
and the Alternative Service Requirements. If the AF is trusted, the the AF
uses the Npcf_PolicyAuthorization_Create request message to interact directly
with PCF to request reserving resources for an AF session. The PCF that serves
the SM policy association is found by querying BSF using the UE IP address.
3\. If the request is authorized, the PCF derives the required QoS parameters
based on the information provided by the NEF and notifies the result to the
NEF using Npcf_PolicyAuthorization_Create request, The PCF derives the
Alternative QoS parameter set(s) from the one or more QoS reference parameters
or the Requested Alternative QoS Parameter Set(s) contained in the Alternative
Service Requirements in the same prioritized order. The PCF sends PCC rules to
the SMF with the QoS parameters including the Alternative QoS parameter
set(s).
4\. The PCF sends the Npcf_PolicyAuthorization_Update response message
directly to the AF
5\. The NEF sends a Nnef_AFsessionWithQoS_Create response message to the AF.
Result indicates whether the request is granted or not.
6\. The NEF shall send a Npcf_PolicyAuthorization_Subscribe message to the PCF
to subscribe to notifications of Resource allocation status and to QoS targets
can no longer (or can again) be fulfilled.
7\. When the the establishment of the transmission resources corresponding to
the QoS succeeded or failed, the PCF sends Npcf_PolicyAuthorization_Notify
message to the NEF notifying about the event.
8\. The NEF sends Nnef_AFsessionWithQoS_Notify message wto indicate that
resources are reserved, this includes provisioning of Alternative QoS Profiles
to NG-RAN.
### 6.39.3 Impacts on services, entities and interfaces
AF:
\- Support to subscribe the Event IDs \"Location Report\", \"Connectivity
state changes\", \"UE reachability status\", and/or \"UE moving in or out of a
subscribed \"Area Of Interest\"\" by AMF, via NEF.
\- Support to subscribe the Analytics IDs \"UE Mobility\" and \"Abnormal
behaviour\" by NWDAF, via NEF.
\- Including the UE filtering policy in the subscription service operation.
\- AF request for QoS including subscription to resource allocation outcome
and QoS targets can no longer (or can again) be fulfilled.
\- AF maps performance KPIs into QoS parameters exposed by NEF or by PCF, i.e.
Requested GBR, MBR, PDB and PER.
\- Including user selection indication for
AnalyticsExposure_Subscribe/EventExposure Subscribe.
NEF:
\- Support to check user consent if receiving user selection indication in
AnalyticsExposure_Subscribe or EventExposure Subscribe from AF.
\- Support to subscribe the new Event ID \"user consent changes\" from UDM for
Event Exposure.
\- Support to notify the AF with the UE ID and the proper cause of
notification when user consent of a UE is changed.
UDM:
\- Support to store user consent for Event/Analytics Exposure in subscription
information.
## 6.40 Solution #40: Flexible Federated Learning Operation over 5GS
### 6.40.1 Description
#### 6.40.1.1 Overview
The solution addresses Key Issue #7: 5GS Assistance to Federated Learning
Operation as well as Key Issue #6: QoS and Policy Enhancements. The solution
introduces flexibility in the FL operation by addressing group QoS aspects of
the FL operation, introducing FL operation configuration recommendations to
the AF by the 5GC, and enabling UE-initiated requests for FL operation.
The application server may derive group QoS requirements for the UEs selected
for the FL operation that may work as a criteria for joining the FL operation.
That is, the UEs participating in the FL operation which cannot meet the group
QoS requirement may become stragglers in the FL task. The group QoS
requirement may consist of required QoS parameters per UE or per multiple UEs.
To support such group QoS requirement concept in 5GS, the solution enables AF
to request the group QoS requirements for a list of candidate UEs (i.e. group
QoS) and obtain the list of selected UEs that have been provisioned with QoS
Flows that meet the group QoS requirements.
In addition, the FL operation of an AI/ML-based application over the 5GS
encounters suffers from rigidity constraints when all UEs are expected to
provide their updated models within strict delay boundaries for the
application server to update and distribute the global model. This has
implications for the group QoS, which can be significantly affected by these
boundaries. This solution thus proposes a more flexible FL operation by virtue
of the following functional enablers:
i. Enabling the UEs to engage in FL where synchronous operation is utilized by
the application server, where the application server needs to wait for all
local updates from the UEs before the aggregation takes place, and
asynchronous mode operation, where the application server can aggregate models
and provide a global model update as soon as a new model update arrives. In
addition, hybrid modes are possible, e.g. application server would wait for
selected group of UEs sharing a set of local models/model updates but not wait
for other UEs sharing their models/model updates before the aggregation of
models (or models updates) into a global model.
ii. Enabling the UEs to request joining an already existing FL group/session,
which may be used as part of an asynchronous FL aggregation mode where the UEs
may decide when to provide their model updates if the network authorizes it.
This solution relies on a new 5GC entity supporting the flexible application
federated learning operation, which is proposed to be named Application
Federated Learning Support Function (AFLSF). The proposal of such NF
effectively means the 5GC is aware that an application FL operation is taking
place, and the AF is requesting 5GC assistance for this. This entity could be
a standalone NF or co-located with another 5GC NF. The AFLSF is in charge of
informing and/or recommending the FL configuration to the application server.
Furthermore, the information to derive the group QoS requirements may be
limited in the application server and the QoS requirements can also be
significantly affected by the aggregation mode of the FL operation, so the
AFLSF may conduct analytics and provide recommendation on the group QoS
requirements to the application server. While the aggregation mode decision,
UE model sharing operation and selection of UEs participating in the FL
operation are all proposed to happen at the application layer. The level of
synchronization required among UEs when sharing their trained models with the
application server is meant to depend on the 5GS overall state, hence the
AFLSF providing the recommendation.
In addition, an AI/ML session identifier (AMSID) is introduced and UE-
initiated request is proposed to support the flexible FL operation. The UE is
provided with an AI/ML session identifier (AMSID) either by the AF or the
AFLSF. Then, the UE which needs to perform FL would send the AMSID in a NAS
message and a network node verifies if the AMSID is valid to be used for FL.
This verification may be performed against existing FL UE context which
contains the set of valid AMSID, and/or whether the UE is allowed to perform
FL. Other conditions may also exist in the UE context e.g. the location where
FL is allowed to be performed by the UE, the time of the day, etc. This
information may be available at the network either from the UDM (e.g.
subscription) or from an interaction between the Application Function (AF) and
the network optionally via a Network Exposure Function (NEF). The network then
determines if the UE is allowed to perform FL and if so the network grants the
UE\'s request which may be a request to establish/modify a PDU session with a
certain QoS profile. The network may apply specific QoS parameters for the
UE\'s session as per information that is associated with the AMSID.
#### 6.40.1.2 Allocation of an AMSID to the UE
It is proposed that a selected UE which is to engage in FL should be provided
with a new identifier which represents the AI/ML session identity. The UE may
receive the AMSID from the AF or from the AFLSF.
In case the AF is responsible to allocate the AMSID to the UE, the allocation
may be performed via application layer signalling that is out of scope of
3GPP.
Alternatively, the AFLSF may be responsible to allocate an AMSID to the UE, or
coordinate with the AF to allocate the AMSID. To achieve this, the following
overall behaviour and actions are proposed:
\- The AF communicates with the 5GC to indicate which UE(s) should be provided
with the AMSID. The AF indicates which UE is selected to the AFLSF, optionally
via another network node if required.
\- In addition to identifying which UE should be provided with an AMSID, the
AF may also provide other conditions that need to be met before the UE is
allowed to engage in FL. These conditions may include any combination of the
following, noting that other potential conditions may also be defined:
\- Location of the UE where the FL is allowed
\- Time of the day, etc. at which the UE can/should connect to be part of a FL
procedure
\- The duration and frequency of the FL operation. For example, the UE should
connect at a certain time T and can only continue to be part of a FL procedure
after X units of time have elapsed, etc. The AF may also provide indication of
when a UE may or may not re-join an ongoing FL training session after it does
not provide a model update during a FL iteration.
\- Whether a certain number of UEs need to also be available at the same time
(or at separate/different designated time) for FL, etc.
\- The subscription information may determine which UE (or group(s) of UEs) is
allowed to perform FL, and whether FL may be performed for one group only, or
more than one group at any time, etc.
Similarly to other IDs used across the 5GS, the uniqueness of the AMSID is
ensured by the entity that allocates it, namely the AF or the 5GC entity, i.e.
the AFLSF. If the AF is independently responsible for the AMSID allocation,
then the mechanism to guarantee uniqueness is out of 3GPP scope. If the AFLSF
(or any 5GC NF) is responsible for the allocation (on its own, or in
coordination with the AF), then a potential way to guarantee the uniqueness of
AMSID is by receiving an allocation proposal from the AF and/or using a
combination of the PLMN ID plus the group ID referring to the participants in
the FL operation. In addition, other identifiers may be used in the AMSID
allocation such as AF ID, other AI/ML session identifiers, etc.
If the AFLSF allocates the AMSID, once the AFLSF identifies a UE for FL, the
AFLSF may allocate at least one AMSID and saves it in the UE context, where
the context may also contain any other conditions that have been listed
earlier e.g. location of UE where this AMSID allows the UE to engage in FL,
time of the day, etc.
The allocated AMSID may be associated with a validity timer and/or validity
location that indicate when and potentially where a FL session is valid. The
AFLSF (or the AF, if this is provided over the application layer) may update
the UE with different conditions that are associated with an AMSID if they
change, or may provide a new AMSID if the validity timer and/or validity
location expire.
Once allocated, the AFLSF provides this information (i.e. at least the AMSID
and optionally with other conditions as listed earlier) to the UE using the
following method:
\- The AMSID information (which may include other conditions as listed
earlier) may be provided to the UE via the application layer, where the AFSLF
may first provide this information to the AF which in turn sends it to the UE
via application layer signalling.
In addition, the UE may also have local policies or other configuration
information that recommend/specify when the UE should engage in FL or when the
UE should initiate a request for FL. For example, the UE may be configured
with information that indicates when the UE should engage in FL, optionally
for a particular AMSID. The UE should use the AMSID according to the
conditions that are provided, if any. For example, the UE may:
\- use an AMSID with a specific slice (S-NSSAI) and/or DNN if this information
is provided with the AMSID, or may use the AMSID only if the a PDU session has
been established with the provided S-NSSAI and/or DNN
\- use the AMSID for a certain validity period if a validity timer is
provided, or
\- use the AMSID in a certain location if location information is provided
such that the location information describes the validity of the AMSID (noting
that the location information may be in the form of a list of tracking area
identity list or any other type of location information)
\- use the AMSID as a specific time or location, or when other conditions are
met -- where these conditions may be defined accordingly
Note that any combination of the above conditions may be verified or enforced
by the UE in order to use the AMSID.
The AMSID is subsequently used by the UE when it determines to use FL as
described in clause 6.40.2.3. At that stage, a session management procedure is
triggered where the request of the UE to join the FL operation is forwarded by
the SMF to the AFLSF and a validation is performed by the AFLSF, which
provides a recommendation to the AF. If the request is accepted/validated, the
AFLSF response to the SMF may include QoS recommendation for the session.
Alternatively, an application layer message can be triggered by the UE to join
the FL operation. Then the AF requests a validation/recommendation to AFLSF
including the AMSID for the UE to join the FL. The AFLSF provides a response
to the AF including the information that the request to join the FL for the UE
is accepted/validated. The AF may request the network to provide QoS for the
joined UE.
### 6.40.2 Procedures
#### 6.40.2.1 Procedure for group QoS request for FL by AF
The signalling flow for the AF to request the network to provide group QoS for
a list of UEs (e.g. request to provide a same QoS for a list of UEs) is based
on the signalling flow in Figure 4.15.6.6-1 of TS 23.502 [4] with the
following differences and clarifications:
\- In step 1, AF may include group QoS request indicator, a list of UE
addresses, Group identifier (either Internal Group Identifier or External
Group Identifier), the group QoS requirements in Nnef_AFsessionWithQoS_Create
request message to request the QoS setup for UEs in the list of UE addresses
based on the group QoS requirements for UEs in the list of UE addresses.
\- In step 3, if the NEF received group QoS request indication and the list of
UE addresses with more than one UEs from the AF, the NEF discovers PCF(s) for
the list of UE addresses from BSF as defined in 6.40.2.4. NEF sends
Npcf_PolicyAuthorization_Update request to each PCF with the list of UEs
served by the PCF in addition to group QoS request indicator, AF Identifier,
Flow description(s), the QoS Reference or individual QoS parameters and the
optional Alternative Service Requirements received from the AF.
\- In step 4, if the PCF received the request with group QoS request
indication and the list of UE addresses from the NEF in step 3, the PCF
processes the request as a multiple request from NEF with a single UE address.
The PCF notifies the result per UE to the NEF.
#### 6.40.2.2 Procedure for enabling FL operation configuration recommendation
by AFLSF
Figure 6.40.2.2-1: Procedure for enabling FL operation configuration
recommendation by AFLSF
The procedure for enabling FL operation configuration recommendation by AFLSF
in Figure 6.40.2.2-1 is described step-by-step below.
1\. The application server acting as AF determines to use FL to train a global
model to be distributed and used by multiple UEs.
2\. The AF requests 5GC assistance for FL operation (via NEF if AF is
untrusted for the operator) using services provided by the AFLSF or NEF (e.g.
Naflsf_FL_assistance_request/Nnef_FL_assistance_request or
Naflsf_FL_assistance_subscribe/ Nnef_FL_assistance_subscribe). The request
message (or subscription request message) may optionally include FL
configuration parameters relevant to the 5GS as described in clause 6.40.1.1.
These parameters may include a list of UEs or group of UEs for the complete FL
operation (i.e. one list for all FL iterations) or one list per FL iteration,
the maximum number of allowed iterations, a time window for model aggregation,
QoS requirements, AMSID, target area(s), time validity, a minimum number of
awaited models before global model update, UE continuous training flag.\ The
description of potential input parameters to the service requesting 5GC
assistance for FL can be found in the following:
\- List/Group of UEs: external or internal ID of the UEs participating in the
application FL operation. The same list/group can be provided for the complete
FL operation, or a different list may be provided for each iteration of the FL
operation.
\- Maximum number of learning iterations: the maximum iterations of model
exchanges from the UEs to the application server and vice versa. The maximum
number of iterations may not be reached if e.g. the training error criterion
is met before the maximum number of iterations is reached.
\- A time window for model aggregation: maximum time that an application
server can wait to receive local models from UEs to provide an update of the
global model. If the time window is zero, then the application server operates
in fully asynchronous mode.
\- Minimum number of awaited models: number of local UE models the application
server requires to receive within the model aggregation time window to provide
an update of the global model.
\- Continuous training flag: flag indicating whether UEs are allowed to
continue performing training once they have shared their local model and
before they receive an update of the global model.
\- QoS requirements: QoS requirements being requested by the AF for the FL
operation to meets its performance.
\- AMSID: identification of AI/ML session identifier to be used for the
application FL operation.
\- Target area(s): area(s) where UEs should be located to be selected for FL
operation.
\- Operation time validity: time during which the FL operation may be
performed
3\. The AFLSF subscribes to or requests NWDAF analytics to get assistance on
the determination of the FL configuration recommendation. Those analytics
include but may not be restricted to UE communication analytics and DN
performance analytics, which provide statistics and/or predictions on user
plane traffic that may help profiling UEs by the AFLSF and determine if and
how they can be part of a FL group.
4\. The AFLSF may consume the event exposure service Nsmf_EventExposure from
SMF to collect available information relevant to the UE and the user plane
status, which may help profiling UEs by the AFLSF and determine if and how
they can be part of the FL group. Hence, the AFLSF may subscribe to user plane
status information event, UE communications trends event, UE session behaviour
trends event. The AFLSF may also subscribe to the QoS Monitoring report event,
which should be made available in the context of AI/ML-based services in
addition to the previously supported URLLC.
5\. The AFLSF may consume the event exposure service Namf_EventExposure from
AMF to collect available information relevant to the UE, which may help
profiling UEs by the AFLSF and determine if and how they can be part of a FL
group. Hence, the AFLSF may subscribe to UE location trends event, UE moving
in or out of area of interest event, UE loss of communication event, UE
reachability status event.
6\. Based on the collected inputs, the AFLSF derives a FL configuration
recommendation based on the assistance request from the AF in step 2. The
AFLSF may also derive an AMSID according to clause 6.40.1.2 if it doesn\'t
have a suitable one yet. The AMSID is associated with the UEs which have been
recommended for FL operation.
7\. A response is provided by the AFLSF notify service operation (e.g.
Naflsf_FL_assistance_notify) to the AF via NEF if needed with a notification
indicating the FL configuration parameters suggested by the AFLSF. The
notification may contain some or all of the parameters mentioned in step 2 and
described in clause 6.40.1.1. The AF may confirm whether the AFLSF
recommendation has been accepted.
8\. AF requests the network to provide group QoS for a list of UEs as
described in clause 6.40.2.1.
9\. The application FL operation takes place between the application server at
the AF and the UE.
#### 6.40.2.3 Procedure for UE-initiated request to join an AI/ML session for
FL
##### 6.40.2.3.1 Using a session management request
Figure 6.40.2.3.1-1: Procedure for UE-initiated request to join an AI/ML
session for FL
The procedure for UE-initiated request to join an AI/ML session for FL in
Figure 6.40.2.3.1-1 is described step-by-step below.
1\. An AMSID is allocated to the UE according to the description of clause
6.40.1.2 when the AF selects the UE for application FL operation.
2\. The UE decides to request to join an AI/ML session for FL. The decision is
made by the application, thus it is out of 3GPP scope. The decision may be
done if the UE has been allowed to participate in FL operation using
asynchronous aggregation mode.
3\. The UE sends a session management request message including the AMSID
towards the SMF indicating the request to use FL.
4\. The SMF sends a validation request to the AFLSF for the AMSID to be used
by the UE in order to determine whether the UE is allowed to engage in FL
using the AMSID.
5\. When the AFLSF receives an AMSID from the SMF, the AFLSF validates if the
AMSID can be used for the UE:
\- The AFLSF may indicate whether the request should be granted or not. The
AFLSF may also indicate the QoS parameters to use for the session and provide
that to the SMF.
\- The above may require the AFLSF checking whether the AMSID can be used
based on previous interactions of the AFLSF with the AF.
6\. The AFLSF may provide an updated recommendation to the AF to select the UE
for the FL operation indicating the AMSID, and the AF may confirm if the
recommendation is accepted.
7\. The AFLSF provides a validation response to the SMF indicating whether the
UE request to join the FL operation using the AMSID is authorized. If the
request is authorized, the validation response may include the AMSID, required
QoS, etc.
8\. If the SMF determines that the UE is allowed to use FL as per the AMSID
being allowed, then the SMF may accept the PDU session management request with
the QoS that is indicated by the AFLSF.
9\. The UE starts the FL process after the establishment of the user plane
resources.
##### 6.40.2.3.2 Using an application layer request
Figure 6.40.2.3.2-1: Procedure for UE-initiated request to join an AI/ML
session for FL
The procedure for UE-initiated request to join an AI/ML session for FL in
Figure 6.40.2.3.2-1 is described step-by-step below.
1\. An AMSID is allocated to the UE according to the description of clause
6.40.1.2 when the AF selects the UE for application FL operation.
2\. The UE decides to request to join an AI/ML session for FL. The decision is
made by the application, thus it is out of 3GPP scope. The decision may be
done if the UE has been allowed to participate in FL operation using
asynchronous aggregation mode.
3\. The UE sends a request to join AI/ML session including AMSID towards the
AF via application layer.
4\. The AF sends a validation request to the AFLSF for the AMSID to be used by
the UE in order to determine whether the UE is allowed to engage in FL using
the AMSID. The AF requests to the 5GC using services provided by the AFLSF or
NEF (e.g. Naflsf_FL_assistance_request/Nef_FL_assistance_request). The request
message includes an AMSID from the UE, a list of UEs, and join indication.
There may be more than one UE to want to join the same AMSID when the AF sends
the request.
5\. When the AFLSF receives the request from AF, the AFLSF validates if the
AMSID can be used for the UE:
\- The AFLSF may indicate whether the request should be granted or not. The
AFLSF may also indicate the QoS parameters to use for the session to the AF.
\- The above may require the AFLSF checking whether the AMSID can be used
based on previous interactions of the AFLSF with the AF.
6\. The AFLSF provides response to the AF whether the AMSID can be used for
the UE. The response may include the AMSID, required QoS, etc.
7\. The AF confirms that the request from UE to join the AI/ML session for FL
with the AMSID is authorized. The AF may request the network to provide QoS
for the newly joined UE.
8\. The UE starts the FL process after the establishment of the user plane
resources.
#### 6.40.2.4 Procedure for multiple PCF discovery
BSF supports PCF discovery for multiple UEs, which can be used for AF to
create or update QoS for the multiple UEs (e.g. for FL operation). The support
of PCF discovery for multiple UEs can be achieved by the following
enhancements:
\- (Consumer NF registration to BSF) When registering to the BSF, the PCF
includes in Nbsf_Management_Register request message group identifier of the
UE in addition to UE ID and PCF address. The BSF stores the group identifier,
UE ID, PCF address.
\- (PCF Discovery of BSF) When Consumer NF wants to discover PCF address based
on the group identifier or the list of UE IDs, Consumer NF provides in
Nbsf_Management_Discovery request message a group identifier or a list of UE
IDs. When the Nbsf management discovery request contains group identifier or a
list of UE IDs, the BSF finds the PCF address(es) for each UE within the group
identified by the group identifier or the PCF address(es) for each UE within
the list of UE IDs. Then, the BSF returns to the Consumer NF with the PCF
address per UE(s).
### 6.40.3 Impacts on services, entities and interfaces
AF:
\- Provides FL configuration parameters to the 5GC (NEF if AF is untrusted, or
AFLSF is AF is trusted) via FL assistance services.
\- Sends validation request to the 5GC for the UE to join the FL with the
AMSID.
NEF:
\- Provides request/subscription services for FL assistance operation and
consumes AFLSF services.
AFLSF:
\- Implicit awareness of application FL operation
\- Provides request/subscription services for FL assistance operation
\- Subscribes to NWDAF analytics, AMF/SMF event exposure
\- Handling of AMSID validation request
SMF:
\- Sends validation request to AFLSF for the AMSID to be used by the UE.
BSF:
\- Discovery of PCF address is enhanced to support discovery of PCF
address(es) based on the group id for UE
\- Discovery of PCF address is enhanced to support discovery of PCF
address(es) based on a list of UE IDs as an inputUE:
\- Requests to join an AI/ML session for FL.
UE:
\- May include the AMSID in the session management request to indicate the
request to join the FL.
## 6.41 Solution #41: Solution for supporting aggregated UE performance
monitoring and exposure for a group of UEs
### 6.41.1 Description
This solution aims to address the key issue #7 to support aggregated UE
performance monitoring and exposure for a group of UEs. The proposed solution
is suitable for any group based AIML operations, including Federated Learning
operations.
Regarding UE performance, we focus on the QoS parameters, such as packet
latency, bit rate, packet drop rate. Those QoS parameters are already
specified as part of the output parameters of DN Performance Analytics in
clause 6.14 of TS 23.288 [6]. However, current output parameters of DN
Performance analytics need to be extended to include aggregated parameters.
Therefore, the solution proposes to add the following Analytics subsets in DN
Performance Analytics:
\- aggregated traffic rate;
\- variance of the traffic rate;
\- variance of packet delay;
\- variance of packet loss rate.
\- the UEs in the group whose traffic rate, packet delay and loss rate higher
or lower than a threshold, respectively, where the threshold can be specified
by the Analytics consumer in the Analytics request. When the analytics
consumer specifies the SUPImax (defined in TS 23.288 [6]) parameter, NWDAF
only reports the top N UEs whose QoS parameters are higher or lower than the
threshold, where N equals to SUPImax.
The extended output parameters do not require any changes on the current input
data of the DN performance Analytics.
When the AF requests analytics for a group of UEs (i.e. UEs involved in the
same FL application procedure) then the AF provides the list of UE IDs and the
corresponding Analytics subsets shown above in the Analytics Subscription
request to the NWDAF.
### 6.41.2 Procedures
The procedure is the same as clause 6.14.4 of TS 23.288 [6], where the
analytics consumer is the AF (via NEF) and the Target of Analytics Reporting
is a group of UEs which are participating the AIML operations.
### 6.41.3 Impacts on services, entities and interfaces
\- The output of the DN Performance Analytics is extended with more
parameters.
## 6.42 Solution #42: FL operation support by 5GS based on AF session with
required QoS provided by Application Server
### 6.42.1 Description
This solution maps to KI#7 and KI#6 described in clause 5.
Based on KI#7 objective, Federated Learning between UE(s) and Application
Function requires significant computation both on UE and Model provider
Application Function to execute one round/iteration of the FL task. For each
iteration the server selects FL members (UEs) that will participate in this
iteration, perform relevant configuration, download the global model, relevant
model parameters and then wait for the UE(s) to report back with the updated
local model. Only if enough UE(s) report back, the iteration will be
considered successful else the iteration may be abandoned. Given this, to
ensure most of the iteration are successful to in turn generate an optimum
global model i.e. to avoid straggling devices (devices which do not report
back in time or do not respond on configuration by the server) it is
beneficial if 5GS can expose relevant network status/information to aid the
Application Function to select the FL members with best chance for a
successful iteration. The selection of devices for a given iteration is in the
scope of AF. However, the 5GS can aid the AF to make intelligent decisions
(best chance for a successful iteration within a given period) regarding FL
member selection.
The following is the assumption in this solution:
\- How the candidate list of UE(s) is selected to participate in each
iteration of Federated Learning is in scope of the Application Function.
The following outlines the salient features of this solution:
\- The AF sends a request to reserve resources for AF session to the NEF which
includes AIML group information, AIML group performance information. The AIML
group information consists of External Group ID or list of candidate UEs
selected by the AF to participate in an FL iteration, Area of Interest. The
AIML group performance information includes Maximum latency for the AIML
group, Maximum packet loss rate in UL, Maximum packet loss rate in DL,
Duration for the requested QoS, Minimum number of UEs in the AIML group.
\- If multiple UE(s) from the AF group is served by the same PCF, the NEF may
trigger a Npcf_GroupPolicyAuthorization_Create request towards the PCF with UE
address(es), AF Identifier, Flow description(s), AIML Group performance
information, AIML session indicator as input parameters. The NEF includes AIML
session indicator if the Nnef_GroupAFsessionWithQoS_Create request in step 1
includes the AIML Group Performance container.
\- If the PCF determines that the SMF serving the UE needs updated policy
information, the PCF issues a Npcf_SMPolicyControl_UpdateNotify request with
updated policy information about the PDU Session. The QoS flow binding shall
ensure that, when the PCF provisions the PCC rule in SMF which contains the
AIML group performance information and AIML session indicator, the PCC rule is
bound to a new QoS Flow and no other PCC rule is bound to this QoS Flow.
The procedure for AF request for required QoS for the potential list of UE(s)
that are selected by AF for participation in an iteration of Federated
Learning is illustrated in Figure 6.42.2-1.
### 6.42.2 Procedures
Figure 6.42.2-1: Procedure for AF request for required QoS for the potential
list of UE(s) that are selected by AF
1\. The AF sends a request to reserve resources for AF session using
Nnef_GroupAFsessionWithQoS_Create request message (AF Identifier, Flow
description(s) or External Application Identifier, QoS reference, DNN,
S-NSSAI, AIML group information, AIML group performance information) to the
NEF. The AIML group information consists of External Group ID or list of
candidate UEs selected by the AF to participate in an FL iteration, Area of
Interest. The AIML group performance information includes Minimum and Maximum
latency for the AIML group, Minimum and Maximum packet loss rate in UL,
Minimum and Maximum packet loss rate in DL, Duration for the requested QoS,
Minimum number of UEs in the AIML group. Maximum Requested bandwidth DL/UL is
the maximum bandwidth in DL/UL for all the UEs included in the AIML group
information. Maximum latency for the AIML group is the maximum reporting delay
acceptable for all the UEs included in the AIML group information. Maximum
packet loss rate in UL/DL is the maximum packet loss rate acceptable for all
the UEs included in the ALML group information. Duration for the requested QoS
is the time for which requested QoS is required for all the UEs included in
the AIML group information. Minimum number of UEs in the AIML group indicates
the minimum number of UEs which for which the requested QoS can be provided
for the list of UEs included in the AIML group information.
Editor\'s note: It is FFS whether additional parameters are sent from AF as
AIML group performance information.
2\. The NEF assigns a Transaction Reference ID to the
Nnef_GroupAFsessionWithQoS_Create request. The NEF authorizes the AF request
and may apply policies to control the overall amount of QoS authorized for the
AF. If the authorization is not granted, the NEF replies to the AF with a
Result value indicating that the authorization failed.
3\. The NEF uses the External Group ID or list of UE addresses in step 1 to
sends a Nbsf_Management_Discovery request to BSF to discover the PCF(s)
serving the UEs of the indicated group in the AF request.
If the AF is considered to be trusted by the operator, the AF uses the
Npcf_PolicyAuthorization_Create request message to interact directly with
PCF(s) to request reserving resources for an AF session or sends a
Nbsf_Management_Discovery request to BSF to discover the PCF(s) serving the
UEs.
4\. The BSF performs PCF discovery based on the input provided by the NEF in
step 3.
5\. The BSF sends a Nbsf_Management_Discovery response including the list of
PCF(s) serving the UEs of the indicated in AIML group information provided by
the AF.
If the AF is trusted by the operator, the BSF sends a
Nbsf_Management_Discovery response including the list of PCF(s) associating to
the UEs of the AIML group provided by the AF, in which each PCF may be
associated to different UEs of the indicated group.
6\. If multiple UE(s) from the AF group is served by the same PCF, the NEF may
trigger a Npcf_GroupPolicyAuthorization_Create request towards the PCF with UE
address(es), AF Identifier, Flow description(s), AIML Group performance
information, AIML session indicator as input parameters. The NEF includes AIML
session indicator if the Nnef_GroupAFsessionWithQoS_Create request in step 1
includes the AIML Group Performance container.
7\. For request received from the NEF in step 6, the PCF determines whether
the request is authorized and notifies the NEF if the request is not
authorized. If the request is authorized, PCF derives the required QoS
parameters based on the information provided in the ALML group performance
container and determines whether this QoS is allowed (according to the PCF
configuration) and notifies the result to the NEF.
When the PCF authorizes the service information from the AF, it generates a
PCC rule by deriving the QoS parameters of the PCC rule based on the service
information, AIML Group performance information and includes the AIML session
indicator.
If multiple UE(s) from the AF group is served by the same PCF, the PCF sends
Npcf_GroupAuthorization_Create response with the result (success or failure)
associated with the list of UEs for which policy authorization was successful
and reason for failure for the list of UEs for which policy authorization
failed.
If the AF is trusted by the operator, the PCF sends the
Npcf_GroupPolicyAuthorization_Create response message directly to the AF.
If the PCF determines that the SMF serving the UE needs updated policy
information, the PCF issues a Npcf_SMPolicyControl_UpdateNotify request with
updated policy information about the PDU Session. The QoS flow binding shall
ensure that, when the PCF provisions the PCC rule in SMF which contains the
AIML group performance information and AIML session indicator, the PCC rule is
bound to a new QoS Flow and no other PCC rule is bound to this QoS Flow.
Steps 6 and 7 are repeated for all the PCFs identified in step 5.
8\. The NEF keeps track of the result included step 7 from all the PCFs
identified in step 5. If minimum UEs in the group with requested QoS parameter
is provided in step1, and the results from all PCFs matches or exceeds the
minimum UEs in the group with requested QoS parameter, the NEF sends a
Nnef_GroupAFsessionWithQoS_Create response message (Transaction Reference ID,
Result, list of UEs in the AIML group for which the requested QoS is allowed)
to the AF where the Result indicates that the request is granted. The UEs in
the AIML group for which the QoS is allowed is included in the response only
when the response from PCF(s) to NEF in step 7 indicates requested QoS for
UE(s) is not allowed for all the UEs belonging to the AIML group provided as
input in step 1.
9\. The NEF shall send a Npcf_PolicyAuthorization_Subscribe message to the
PCF(s) to subscribe to notifications of Resource allocation status. The PCF
responds with a Subscription Corelation ID which allows the NEF to track all
the subscription notification unique to each UE in step 8.
10\. When the event condition is met, e.g. the establishment of the
transmission resources corresponding to the QoS update succeeded or failed,
the QoS target can no longer be fulfilled, QoS monitoring parameters the PCF
sends Npcf_PolicyAuthorization_Notify message to the NEF notifying about the
event. The PCF includes the event information and Notification correlation
information which identifies the AIML group AF session.
If the operator trusts the AF, the PCF(s) sends the
Npcf_PolicyAuthorization_Notify message directly to AF.
11\. When the NEF receives the Npcf_PolicyAuthorization_Notify for all the UEs
for the request was granted in step 8, the NEF sends
Nnef_GroupAFsessionWithQoS_Notify message with the event reported by the
PCF(s) to the AF i.e. QoS resource allocated for all the UEs for which the
request was granted in step 8 with the Transaction Reference ID.
### 6.42.3 Impacts on services, entities and interfaces
NEF:
\- New service operation to assist resource reservation for list of UEs
provided by the AF.
\- Provides AIML session indicator to the PCF.
BSF:
\- Extend support for BSF management discovery service operation to discover
the serving PCF(s) to include list of UEs provided by the AF.
PCF:
\- New service operation for group policy authorization when multiple UEs are
served by the same PCF.
\- Handles the policy authorization request from the NEF and generates PCC
rule by deriving the QoS parameters of the PCC rule based on the service
information, AIML Group performance information and includes the AIML session
indicator.
## 6.43 Solution #43: FL member selection
### 6.43.1 Description
This solution is proposed to address Key Issue #7: 5GS Assistance to Federated
Learning Operation.
This solution proposed that application server determine the UE groups for FL
operation based on the user consent subscription information, UE\'s location,
end to end delay and packet drop for the UE.
### 6.43.2 Procedures
#### 6.43.2.1 Procedure for AF directly collection information for FL member
selection
Figure 6.43.2.1-1: Procedure for FL member selection
1\. The AF retrieves the user consent subscription data, indicating whether
the network is allowed to expose UE related 5GC information, for the UEs in
the candidate list from the UDM (via NEF if AF is untrusted) by invoking
Nudm_SDM_Get service operation.
2\. [Optional]The AF requests the location reporting of the UEs from the AMF
(via NEF if AF is untrusted) by invoking Namf_EventExposure_Subscribe
(Location Reporting).
The AF should maintain the candidate UE list itself before FL member
selection, and include the Target UE Identifier(s) for the UEs in the
candidate list in the request as described in clause 5.6.7 of TS 23.501 [3],
which is same for step 2 and step 3.
3\. The AF initiates direct notification of Qos Monitoring procedure for delay
information for the UEs in the candidate list, as defined in steps 1a-5 of
clause 6.4.2.1 of TS 23.548 [10].
4\. The AF requests user plane information, e.g. Throughput UL/DL, Packet
transmission, Packet retransmission, for the UEs in the candidate list from
UPF.
NOTE 1: How to collect data from UPF will depend on the outcome of FS-UPEAS
SID.
5\. The AF selects FL members based on user consent subscription data from
UDM, UE location from AMF, and delay and packet drop information reporting
from UPF.
NOTE 2: AF may keep monitoring the information from AMF/UPF/UDM to update FL
members.
### 6.43.3 Impacts on services, entities and interfaces
AF:
\- Supporting user consent subscription data collection from UDM.
\- Supporting FL member selection based on the information from AMF, UDM and
UPF.
UDM:
\- Supporting user consent information of whether the network is allowed to
expose UE related 5GC information.
UPF:
\- Supporting to report user plane information to AF.
## 6.44 Solution #44: 5G assisted FL member selection for application request
### 6.44.1 Description
This solution is applied to KI#7: 5GS Assistance to Federated Learning
Operation.
This solution supports AF sends request to 5GS for a list of UEs with one or
multiple restriction criterial, for example:
\- UEs in Connected state.
\- UEs in different location information.
\- UE QoS monitoring threshold.
\- Service Experience threshold.
The AIML function maybe co-located with NEF or deployed standalone and used
for external exposure to assist 5G AIML service. AIML function / NEF sends
assistance information request to 5GC according to the restriction criterial
that received from AF and determines / reduces the UE list according to the
feedback from 5GC. For example, AIML function / NEF requests AMF to provide
the UEs activated status and location information, AIML function / NEF
requests PCF to provide the QoS monitoring information and NWDAF to provide
Service Experience analytics, AIML function / NEF reduces the UE list step by
step based on all these received information from AMF and NWDAF, and sends the
final potential UE list to AF.
### 6.44.2 Procedures
Figure 6.44.2-1: 5G assisted FL member selection for application request with
restriction criterial
1\. AF sends the request to the AIML NF / NEF with the Target of reporting set
as UE ID list 1 and the restriction criterial as described in clause 6.44.1.
2\. AIML NF / NEF may send Namf_EventExposure_Subscribe message to AMF(s) and
the event type sets to UE reachability and UE location for the UE ID list 1
that received from AF.
3\. AMF(s) send the UE reachability and UE location information to AIML NF /
NEF. AIML NF / NEF filters the UE ID list 2 from UE ID list 1 based on the
received UE reachability and UE location information from AMF(s) and the
restriction criterial from AF.
4\. AIML NF / NEF sends Npcf_EventExposure_Subscribe message to PCF(s) to
request to QoS monitoring information (e.g, the UL and DL Packet delay) for UE
ID list 2.
5\. PCF responses the QoS monitoring information for UE ID list 2 to AIML NF /
NEF. AIML NF / NEF filters the UE ID list 3 from UE ID list 2 based on the
received QoS monitoring information and the restriction criterial from AF.
6\. AIML NF / NEF sends Nnwdaf_AnalyticsSubscription_Subscribe to NWDAF(s) to
request the UE QoS monitoring prediction for the UE ID list 2.
7\. NWDAF sends the requested analytics result to AIML NF / NEF for UE list 3.
AIML NF / NEF filters UE ID list 4 from UE ID list 3 based on the received
Analytics result and the restriction criterial from AF.
NOTE 1: Steps 2-3, steps 4-5 and steps 6-7 may be performed in different
sequence which depends on AIML NF / NEF implementation.
NOTE 2: This solution can also applied to other restriction criterial that
requested by AF.
8\. AIML NF / NEF sends the UE ID list 4 to AF.
### 6.44.3 Impacts on services, entities and interfaces
AI ML NF:
\- receive request from AF for a list of UE with the restriction criterial.
\- determines the UE list based on the received information from 5GC and the
restriction criterial from AF.
\- expose the potential UE list to AF.
## 6.45 Solution #45: Improving FL performance by selecting central
application server with 5GC\'s assistance
### 6.45.1 Description
This solution addresses the following aspect of Key Issue #7 \"5GS Assistance
to Federated Learning Operation\".
\- How to assist AF to increase the FL performance (e.g. to manage latency
divergence) among UEs when the application server receives the local ML model
training information from different UEs in order to perform global model
update.
In federated learning, an increase of communication delay for anyone of member
UE will cause a delay for overall FL progress. In application AI/ML based FL,
the member UEs may be served by different application servers. Figure 6.45.1-1
presents an example that FL central server may distributed in different area.
Figure 6.45.1-1: Using Different Application Server as Central Server
NOTE: It is assumed that there is only one central server in each round of FL.
It is obvious that using different application server as FL central server
will achieve different performance (e.g. overall packet delay, traffic rate,
etc.). To improve the overall performance of FL, how to select appropriate
central server of application AI/ML based FL should be considered. The AF
should be able to determine the best central server for one or multiple rounds
of FL with 5GC\'s assistance to improve the overall FL performance. During FL
operation, due to the member UE\'s mobility, the AF should be able to change
the central server dynamically. On the other hand, due to UE mobility, UE
status and application behavior changes, it is not optimal if some member UEs
are still served by the chosen central server, the AF may change the member
UE(s) dynamically and change central server in parallel.
### 6.45.2 Procedures
Figure 6.45.2-1: Procedure of FL Central Server Selection
1-2. The AF sends Analytics subscription to the NWDAF via NEF. The parameters
should include:
\- Analytics ID(s) (\"DN Performance\" is mandatory, \"UE Mobility\",
\"Network Performance\" and others are optional);
\- Member UE(s);
\- Application ID(s);
\- Application server instance address(es);
\- The target time period;
\- A flag indicating that whether suggested server list is required;
\- Other parameters related to the Analytics ID(s);
3\. The NWDAF collects data from related NF(s) and derives the analytics. The
input data of \"DN performance\" are mainly provided by the AF. The input data
of other Analytics ID (e.g. \"UE Mobility\", \"Network Performance\" ) may be
provided by other NFs (e.g. AMF, NRF). This may include:
\- Time delay between member UE(s) and the application servers;
\- Maximum latency divergence between member UE(s) and different application
server;
\- Traffic rate for member UE(s) communicating with the application servers;
\- Packet loss rate of communications between member UE(s) and the application
servers;
\- Other results related to the analytics ID(s);
Optionally, the NWDAF derives the suggested list of application server(s)
(sorting in descending order) according to the above analytics based on the
AF\'s requirement in step 1.
NOTE 1: How the AF assists NWDAF to do \"DN performance\" analytics is out of
the scope of this study.
4-5. The NWDAF sends the analytics report or the suggested list of application
server(s) to the AF via NEF.
6\. The AF selects the best application server as the FL central server based
on local internal logic and the analytics results or the suggested list
received from NWDAF. The AF may update the subscription to NWDAF based on the
final decision.
7\. Optionally, the AF may send policy related information (e.g. AM or SM
policies related information) to PCF.
8\. The AF sends notify to the selected central server with the FL related
information. The central server starts FL with the member UE(s).
9-10. The AF sends Analytics subscription to the NWDAF via NEF for the member
UE(s). The parameters may include:
\- Analytics ID(s) (\"DN Performance\", \"UE Mobility\", \"Abnormal
behaviour\", \"Network Performance\");
\- Member UE(s);
\- Application ID(s);
\- Application server instance address(es);
\- The target time period;
\- Other parameters related to the Analytics ID(s).
11\. The NWDAF collects data from related NF(s) (e.g. AF, AMF, NRF, SMF) and
derives the analytics.
12-13. The NWDAF sends the analytics report to the AF via NEF.
14\. The AF selects the best member UE(s) as the FL clients based on local
internal logic and the analytics results received from NWDAF. The AF may
update the subscription to NWDAF based on the final decision.
15\. Optionally, the AF may send policy related information (e.g. AM or SM
policies related information) to PCF.
16-17. The NWDAF may continuously send new analytics report or new suggested
list of application server(s) based on the subscription of the AF in step 1
and 9.
18\. The AF may reselect the central server and member UE(s) based on local
internal logic and information received from NWDAF.
19\. If the central server changed, the AF sends notification to the original
server and the new central server. The original central server then may send
the FL context to the new central server. The new central server continues the
FL with member UE(s). Similarly, if the member UE(s) changed, the AF sends
notification to the original member UE(s) and the new member UE(s). The
original member UE(s) then may send the FL context to the new member UE(s).
The new member UE(s) continues the FL with central server.
NOTE 2: How the new central server and the new member UE(s) get the FL context
should be determined by AF.
### 6.45.3 Impacts on services, entities and interfaces
NWDAF:
\- Derive the latency divergence in \"DN Performance\".
\- [OPTIONAL] Derive the suggested list of application server based on the
analytics result.
AF:
\- Determine the best application server based on internal logic and
information received from NWDAF.
\- Determine the best member UE(s) based on internal logic and information
received from NWDAF.
## 6.46 Solution #46: 5GS assistance for FL member selection based on UE\'s
location and direction
This contribution addresses KI#7 on \"5GS Assistance to Federated Learning
Operation\" by providing 5GS assistance for FL member selection based on UE\'s
location and direction.
### 6.46.1 Description
The example shown in Figure 6.46.1-1 is very common for vehicles since they
can only move on the road which makes that geographically close vehicles tend
to have similar data sets from in-vehicle cameras or sensors. To avoid to
select these nodes with similar data sets for FL training, 5GC needs to ensure
that the distance between each candidate UE provided to the FL server is
adequately apart.
Moreover, in Figure 6.46.1-1, car1 and car2 have the same location information
from 5GC point of view since they are in the same cell, however they are
running at different direction on the road and may have different data sets
from in-vehicle camera. For location based FL member selection, this situation
need to be considered which means finer granularity (e.g. cell level instead
of TA level) and more specifically defined (e.g. same or opposite direction)
of location information is needed.
Figure 6.46.1-1: Recognition of traffic accident
### 6.46.2 Procedures
Figure 6.46.2-1: 5GS assistance for FL member selection based on UE\'s
location and direction
NOTE: The functionality of the NEF has been extended in this solution in order
to support the assistance of the FL member selection for the given FL
operation.
**Step 1:**
In order to select the UEs with different data sets which are within the FL
coverage area, the AF requests 5GS assistance to support the UE selection by
considering the UE\'s current location and direction. AF includes the External
Group Identifier and the following filtering info as part of the FL UE
selection request:
**FL Coverage Area:** The FL training server\'s coverage area, i.e. the
coverage area of the FL training server where the selected UEs participate in
the FL operation.
When providing a target area for FL, the AF may provide sub-areas (e.g. cell
1,2,3), and provide a maximum number of UEs (e.g. 2) that should take part in
FL from each sub-area.
\- Direction: Select the UE with the different direction in the FL coverage
Area.
**Step 2:**
NEF translates the External Group Identifier to Internal Group Identifier (the
procedure as defined in clause 4.13.2 of TS 23.502 [4]).
**Steps 3-4:**
In order to locate the group of UEs which are associated with the AF and are
within the FL training server coverage (i.e. FL coverage area), and more
specifically, they can be identified to be located at the sub-area of the FL
coverage area, for each sub-area of the FL coverage area, the NEF invokes
Namf_EventExposure_Subscribe service operation with the Internal Group
Identifier, event ID = Number of UEs present in a geographical area. AMF will
provide a list of UEs that are within the sub-area of the FL coverage area to
the NEF using the Namf_EventExposure_Notify service operation.
**Step 5:**
In order to identify the appropriate NWDAF which can provide UE mobility
analytic output in order to get the UE direction, the NEF needs to select the
suitable NWDAF by initiating the NWDAF discovery request (Analytics ID = UE
mobility, AOI = Target AOI) with Internal Group Identifier.
**Steps 6-7:**
The NEF invokes NWDAF Analytics Info request (Internal Group Identifier,
Analytics ID = UE mobility, Filters include \"AOI (e.g. cell 1, 2, 3))\").
NWDAF will then provide a list of UEs and UE\'s location in the order of which
the UE passes through to the NEF. Then the NEF gets the corresponding
statistics of UE mobility and the UE\'s direction (as defined in clause 6.7.2
of TS 23.288 [6]).
**Steps 8-9:**
Based on the step 3-4, the NEF knows the list of UE in the FL coverage area
and each UE\'s location within the sub-area. Based on the step 6-7, NEF will
know the direction of each UE. NEF selects the candidate UEs based on the
request from AF. For example, the NEF selects two UEs in each cell and the NEF
selects the UE with the different direction within the FL coverage Area. The
NEF notifies AF for such UE candidate list.
NOTE: Example of how NWDAF can retrieve UE\'s direction can be found in
solution #26 from TR 23.700‑81 [11].
**Steps 10:**
The NEF also needs to consider the list of UEs which are now within the FL
coverage area, but may move out of the FL coverage area. Therefore, for each
UE in the candidate list in steps 8-9, the NEF invokes the
Namf_EventExposure_Notify service with UE ID = SUPI, Event ID=UE moving in/out
of AOI (PRA) to keep track the movement of the UE(s) in/out of the AOI.
**Steps 11-12:**
If step 10 identifies any UE which is moving out of the FL coverage area, the
NEF may further notify AF of the given UE which is moving out the coverage.
**Step 13:**
When AF completes the FL operation, it terminates the 5GS assistance support
for the UE selection based on the UE\'s location and direction.
### 6.46.3 Impacts on services, entities and interfaces
NEF:
\- New service operation to provide the candidate UE selection function.
\- Select the candidate UE list based on the Interested area information,
maximum number of UEs in sub-area and UE direction request provided by AF.
AF:
\- Request NEF to provide the candidate UE list based on the Interested area
information, maximum number of UEs in sub-area and UE direction.
NWDAF:
\- If multiple UE locations are provided, they will be in the order of which
the UE passes through.
## 6.47 Solution #47: Composite exposure service for 5GS assistance to FL
member selection
### 6.47.1 Description
Editor\'s note: Trusted AF scenario (to perform this functionality at existing
NFs or a new NF) is FFS.
Several kinds of 5GS exposure information have been proposed to assist FL
member selection in TR 23.700-80 such as EventExposure from AMF, PCF, SMF/UPF
and AnalyticsExposure from NWDAF in solution #17, #18, #19, #21 and #24. A
combination of these exposures are often necessary according to various FL
member selection policies of actual use cases.
This solution proposes a new service (CompositeExposure) of NEF which combines
current EventExposure service and AnalyticsExposure service. AF can indicate
multiple Event ID(s) and Analytics ID(s) according to different FL member
selection policies. For each Event ID and Analytics ID, NEF provides the
service as defined in clause 5.2.6 of TS 23.502 [4] to gather the information
from the corresponding NFs. Then NEF replied to AF with UE information that
has matched all indicated Event ID(s) and Analytics ID(s).
### 6.47.2 Procedures
Figure 6.47.2-1: Composite exposure service for 5GS assistance to FL member
selection
**Step 1:**
AF requests to subscribe Nnef_CompositeExposure service indicating parameters
as follows:
\- UE list (GPSIs, SUPIs, External Group Identifiers, IP addresses).
\- Analytics ID(s), Analytics Filter Information and etc. as defined in clause
5.2.6.16.2 of TS 23.502 [4].
\- Event ID(s), Event Filter(s) and etc. as defined in clause 5.2.6.2.2 of TS
23.502 [4].
\- Area info (TA/Cell ID, geographical area).
\- Expiry time.
**Steps 2-3:**
NEF operates Nnef_AnalyticsExposure service as defined in clause 5.2.6.16 of
TS 23.502 [4].
NOTE: If AF sends UE ID set as IP addresses, NEF retrieves the corresponding
SUPIs using the procedure in clause 4.15.10 of TS 23.502 [4].
**Steps 4-5:**
AF operates Nnef_EventExposure service as defined in clause 5.2.6.16 of TS
23.502 [4].
**Step 6:**
NEF selects candidate UEs based on the results of steps 2-5.
**Step 7:**
NEF replies to AF with the following information.
\- Candidate UE list.
\- Event information (defined on a per Event ID basis).
\- Analytic information (defined on a per Analytic ID basis).
### 6.47.3 Impacts on Existing Nodes and Functionality
NEF:
\- Provide new service operation of composite exposure.
AF:
\- Request NEF to provide the candidate UE list by indicating necessary Event
ID(s) and Analytics ID(s).
# 7 Evaluation
## 7.1 Key Issue #1: Monitoring of network resource utilization for support of
Application AI/ML operations
Six different solutions have been proposed to address aspects of or the
complete description of Key Issue #1 in clause 5.1. These solutions as
identified in clause 6.0 are #1, #11, #16, #28, #34, and #37. Solutions #16
and #37 being very similar this evaluation only considers solution #37. While
the scope of solution #28 is rather broad and apply to general architecture
framework of which the discussions should be deferred to the end of the
conclusion phase, solutions #1, #11, #34, and #37 are more focused on specific
aspects of KI#1.
A set of architecture principles proposed in the context of the above
solutions have been identified for KI#1, and this evaluation clause is
structured around those identified principles rather than the individual
solutions themselves.
The following list shows positively evaluated architecture principles as
potential basis for normative work along the corresponding proposing solutions
and their relation to the principle:
\- **Maximizing the reuse of existing 5GS mechanisms with extensions, when
needed, to assist the AF to monitor the 5G network resource utilization**.
\- Solution #1 proposes reutilizing the procedures in clauses 4.15.16.6,
4.16.5 and 4.4.2.2 of TS 23.502 [4] to facilitate monitoring of resources that
are relevant in the context of AI/ML-based services and applications.
\- Solution #11 and Solution #34 propose the existing NWDAF framework in TS
23.288 [6] to be reused for AF resource monitoring purposes in the context of
AI/ML-based services and applications as well as specific NWDAF analytics
enhancements for application AI/ML traffic status.
\- Solution#37 proposes to reuse existing UPF Exposure Service by introducing
a new event type \"Bit Rate Reporting per QoS Flow\" to the existing consumer
\"NEF\" for this service.
\- **Support aggregated bit rate monitoring to assist AF to conduct the
Application AI/ML operation according to the SLA**.
\- Solution #37 propose monitoring the aggregated bit rate among a set of QoS
flows of the group of UEs that are part of the FL operation.
\- **Support QoS monitoring for AI/ML-based services triggered by AF to assist
AF to conduct the application AI/ML operation according to the SLA**.
\- Solution #1 proposes the existing QoS monitoring mechanism in TS 23.502 [4]
currently applicable to assist URLLC services to be used, and enhanced, in the
context of AI/ML-based services and applications. Based on the outcome of the
moderated discussions, more discussions and better understandings are needed
to justify the new monitoring parameters.
\- **New monitoring parameters available at AF**.
\- Solution #1 proposes traffic/data volume and session inactivity time as new
monitoring parameters to be available at the AF to assist with the operation
of the AI/ML application. The monitoring procedures are based on UPF event
exposure.
\- **AF monitoring of availability of network resources to assist the
application in training of its AI/ML algorithms**.
Furthermore, an additional set of architecture principles have also been
identified in the context of KI#1 that do not appear suitable towards
normative work. Those architecture principles as well as evaluation views for
each principle can be found below:
\- **Support for AF resource utilization request from NWDAF, PCF, SMF, where
the AF can request the network resource utilization related information from
NWDAF, PCF and SMF**. It is not clear what is the purpose of AF being aware of
which 5GC NF is producing the information, and the principle lacks a
description of what type of network resources it is referring to.
**\- Network monitoring of resource usage by the operator to ensure there is a
balance between the AI/ML traffic and other service traffic.** While the
architecture principle holds true in general for 5GS, it is unclear whether
this TR and the follow up normative work should develop solutions in line with
this principle or it is out of scope.
\- **Control plane resource usage monitoring is also required, in addition, to
the user plane, to avoid signalling storms**. It does not seem necessary to
develop new congestion control mechanisms beyond what is already existing, and
it is currently unclear what other control plane resources are meant by the
principle.
The following table is to evaluate the applicable solutions in KI#1 with
regards to the proposed criteria. Some extra criteria were added on top of
what have been discussed during the moderated evaluation in order to provide a
more completed considerations when evaluating this KI#1:
Table 7.1-1: Evaluation of KI#1 solutions
+----+-----------+-----------+-----------+-----------+-----------+ | | E | So | Sol | Sol | Sol | | | valuation | lution#1 | ution#11 | ution#34 | ution#37 | | | Criteria | | | | | +====+===========+===========+===========+===========+===========+ | 1 | Suggest | Proposed | Proposed | Proposed | No | | | to | to extend | to | to | | | | leverage | existing | leverage | leverage | | | | and/or | NWDAF | the AF | the NWDAF | | | | extending | analytic | Influence | analytic | | | | the | m | for | to | | | | existing | echanisms | traffic | monitor | | | | NWDAF | to | routing | the | | | | analytics | monitor | feature | existing | | | | to assist | DN | to | Ap | | | | AF to | per | support | plication | | | | monitor | formance, | the | AI/ML | | | | the UE\'s | UE | tra | data | | | | data | comm | nsmission | transfer | | | | tra | unication | of the | and to | | | | nsmission | & QoS | Ap | report | | | | per | susta | plication | the | | | | formance, | inability | AI/ML | ongoing | | | | i.e. | | traffic | pe | | | | impact to | The | which | rformance | | | | NWDAF. | m | also | to the | | | | | onitoring | triggers | AF. | | | | | is done | \"some\" | | | | | | in order | NWDAF | | | | | | to | analytics | | | | | | prepare | to | | | | | | for the | m | | | | | | upcoming | onitoring | | | | | | Ap | the UE\'s | | | | | | plication | pe | | | | | | AI/ML | rformance | | | | | | tran | to assist | | | | | | smission. | the | | | | | | | traffic | | | | | | | routing. | | | +----+-----------+-----------+-----------+-----------+-----------+ | 2 | Suggest | Proposed | No | No | Proposed | | | to | to | | | to extend | | | leverage | leverage | | | the | | | other | PC, SMF | | | existing | | | mechanism | and UDF | | | UPF event | | | besides | etc. to | | | exposure | | | NWDAF to | monitor | | | with new | | | obtain | UL/DL & | | | event to | | | UE\'s | round | | | report | | | per | trip | | | the UE\'s | | | formance, | delay, | | | on-going | | | i.e. no | tra | | | bit rate | | | NWDAF | ffic/data | | | per | | | impact. | volume, | | | iodically | | | | session | | | to NEF. | | | | i | | | NEF will | | | | nactivity | | | then | | | | timer. | | | aggregate | | | | | | | the group | | | | | | | of UEs | | | | | | | bit rate | | | | | | | and | | | | | | | compare | | | | | | | it | | | | | | | against | | | | | | | the | | | | | | | Group-MBS | | | | | | | threshold | | | | | | | to ensure | | | | | | | the group | | | | | | | pe | | | | | | | rformance | | | | | | | does not | | | | | | | exceed | | | | | | | the | | | | | | | a | | | | | | | ggregated | | | | | | | t | | | | | | | hroughput | | | | | | | per | | | | | | | formance. | | | | | | | If | | | | | | | exceeded, | | | | | | | NEF will | | | | | | | notify | | | | | | | the AF | | | | | | | for this | | | | | | | new | | | | | | | event. | +----+-----------+-----------+-----------+-----------+-----------+ | 3 | Support | No | No | No | Yes | | | a | | | | | | | ggregated | | | | | | | bit rate | | | | | | | m | | | | | | | onitoring | | | | | | | to assist | | | | | | | AF to | | | | | | | conduct | | | | | | | the | | | | | | | Ap | | | | | | | plication | | | | | | | AI/ML | | | | | | | operation | | | | | | | according | | | | | | | to the | | | | | | | SLA. | | | | | | | | | | | | | | NOTE: | | | | | | | Corr | | | | | | | esponding | | | | | | | to | | | | | | | Pri | | | | | | | nciple#3 | | | | | | | which | | | | | | | receives | | | | | | | general | | | | | | | support | | | | | | | during | | | | | | | the | | | | | | | Moderated | | | | | | | AP | | | | | | | Dis | | | | | | | cussions. | | | | | +----+-----------+-----------+-----------+-----------+-----------+ | 4 | Support | No | No | No | Yes | | | a | | | | | | | ggregated | | | | | | | pe | | | | | | | rformance | | | | | | | m | | | | | | | onitoring | | | | | | | reporting | | | | | | | for | | | | | | | opt | | | | | | | imization | | | | | | | (e.g. | | | | | | | m | | | | | | | inimizing | | | | | | | s | | | | | | | ignalling | | | | | | | o | | | | | | | verhead). | | | | | +----+-----------+-----------+-----------+-----------+-----------+ | 5 | Support | Yes | Yes | Yes | Partially | | | QoS | | (Built-in | | (focus on | | | m | | to the AF | | bit rate | | | onitoring | | Influence | | mon | | | for | | to | | itoring). | | | AI | | Traffic | | | | | /ML-based | | Routing | | | | | services | | me | | | | | triggered | | chanism). | | | | | by AF to | | | | | | | assist AF | | | | | | | to | | | | | | | conduct | | | | | | | the | | | | | | | Ap | | | | | | | plication | | | | | | | AI/ML | | | | | | | operation | | | | | | | according | | | | | | | to the | | | | | | | SLA. | | | | | | | | | | | | | | NOTE: | | | | | | | Corr | | | | | | | esponding | | | | | | | to | | | | | | | Pri | | | | | | | nciple#4 | | | | | | | which | | | | | | | receives | | | | | | | general | | | | | | | support | | | | | | | during | | | | | | | the | | | | | | | Moderated | | | | | | | AP | | | | | | | Dis | | | | | | | cussions. | | | | | +----+-----------+-----------+-----------+-----------+-----------+ | 6 | Both the | Yes | Yes | Yes | Yes | | | network | | | | | | | and the | | | | | | | AF have | | | | | | | the need | | | | | | | to | | | | | | | monitor | | | | | | | usage of | | | | | | | network | | | | | | | resources | | | | | | | for AI/ML | | | | | | | training | | | | | | | traffic. | | | | | | | | | | | | | | NOTE: | | | | | | | Corr | | | | | | | esponding | | | | | | | to | | | | | | | Pri | | | | | | | nciple#7 | | | | | | | which | | | | | | | receives | | | | | | | general | | | | | | | support | | | | | | | during | | | | | | | the | | | | | | | Moderated | | | | | | | AP | | | | | | | Dis | | | | | | | cussions. | | | | | +----+-----------+-----------+-----------+-----------+-----------+ | 7 | Assist AF | Trigger | Leverage | Not | Not | | | to | AF | the | s | s | | | perform | session | imbedded | pecified. | pecified. | | | QoS | request | procedure | | | | | policy | to update | of the AF | | | | | mod | UE\'s QoS | Influence | | | | | ification | confi | to modify | | | | | on the UE | guration. | the QoS | | | | | after | | policy | | | | | m | | when | | | | | onitoring | | needed. | | | | | the UE\'s | | | | | | | per | | | | | | | formance. | | | | | | | | | | | | | | NOTE: Not | | | | | | | specific | | | | | | | to this | | | | | | | KI. | | | | | +----+-----------+-----------+-----------+-----------+-----------+ | 8 | A | No | No | No | Yes | | | pplicable | | | | | | | to FL | | | | | | | \"agg | | | | | | | regated\" | | | | | | | pe | | | | | | | rformance | | | | | | | mo | | | | | | | nitoring. | | | | | +----+-----------+-----------+-----------+-----------+-----------+ | 9 | Proposed | No | No | No | No | | | mechanism | | | | | | | (e.g. | | | | | | | gating, | | | | | | | QoS | | | | | | | policy | | | | | | | modi | | | | | | | fication, | | | | | | | etc.) to | | | | | | | be used | | | | | | | by AF or | | | | | | | by 5GC to | | | | | | | respond | | | | | | | to the | | | | | | | UE\'s | | | | | | | pe | | | | | | | rformance | | | | | | | mo | | | | | | | nitoring. | | | | | | | | | | | | | | NOTE: Not | | | | | | | specific | | | | | | | to this | | | | | | | KI. | | | | | +----+-----------+-----------+-----------+-----------+-----------+ | 10 | AF | May be | No | Yes | No | | | m | | | | | | | onitoring | NOTE: It | NOTE: | NOTE: | NOTE: | | | of | has | M | M | M | | | ava | d | onitoring | onitoring | onitoring | | | ilability | ependency | is | is | is | | | of | on R18 | focusing | focusing | focusing | | | network | FS_UPEAS | on the | on the | on | | | resources | outcome | traffic | tra | whether | | | to assist | which is | route | nsmission | the | | | the | still | c | status | pr | | | ap | under | ondition. | (e.g. | e-defined | | | plication | study. | | location, | Group-MBR | | | in | | | QoS, | threshold | | | training | | | load, | has been | | | of its | | | c | exceeded | | | AI/ML | | | ongestion | by the | | | al | | | etc.). | group | | | gorithms. | | | | tran | | | | | | | smission. | +----+-----------+-----------+-----------+-----------+-----------+ | | **Pros:** | Able to | Able to | Able to | Able to | | | | leverage | reuse | leverage | reuse the | | | | the | existing | the | existing | | | | existing | AF | existing | UPF | | | | NWDAF | Influence | NWDAF | exposure | | | | analytics | mechanism | analytics | mechanism | | | | to adjust | to | to assist | to | | | | the QoS | m | the AF to | monitor | | | | policy | onitoring | continue | the bit | | | | and to | the | m | rate for | | | | assist | on-going | onitoring | the | | | | the AF\'s | Ap | the UE | selected | | | | decision | plication | load, QoS | group of | | | | (e.g. UE | AI/ML | c | UEs to | | | | s | operation | ondition, | support | | | | election) | and to | network | a | | | | before | adjust | per | ggregated | | | | starting | the QoS | formance, | m | | | | the | policy to | etc. | onitoring | | | | ap | adapt to | during | request | | | | plication | the UE\'s | the | from AF. | | | | AI/ML | changing | ap | | | | | operation | c | plication | The | | | | with the | ondition. | AI/ML | m | | | | proper | | o | onitoring | | | | UE. | | peration. | can be | | | | | | | applied | | | | | | | before or | | | | | | | during | | | | | | | the | | | | | | | Ap | | | | | | | plication | | | | | | | AI/ML | | | | | | | o | | | | | | | peration. | | | | | | | | | | | | | | The | | | | | | | mechanism | | | | | | | can | | | | | | | support | | | | | | | FL | | | | | | | operation | | | | | | | for | | | | | | | a | | | | | | | ggregated | | | | | | | bit rate | | | | | | | m | | | | | | | onitoring | | | | | | | with | | | | | | | minimum | | | | | | | s | | | | | | | ignalling | | | | | | | overhead | | | | | | | between | | | | | | | the 5GC | | | | | | | and AF. | +----+-----------+-----------+-----------+-----------+-----------+ | | **Cons:** | Not | No | No | Limited | | | | always | a | a | to the | | | | efficient | ssistance | ssistance | a | | | | as the | to the AF | to the AF | ggregated | | | | m | on | on | bit rate | | | | onitoring | learning | learning | m | | | | is mainly | the UE\'s | the UE\'s | onitoring | | | | done on | pe | pe | only. | | | | per UE | rformance | rformance | | | | | basis to | before | before | | | | | report to | starting | starting | | | | | the AF, | the | the | | | | | i.e. | Ap | Ap | | | | | s | plication | plication | | | | | ignalling | AI/ML | AI/ML | | | | | overheads | o | o | | | | | could be | peration. | peration. | | | | | high. | | | | | | | | Not | Not | | | | | | always | always | | | | | | efficient | efficient | | | | | | as the | as the | | | | | | m | m | | | | | | onitoring | onitoring | | | | | | is mainly | is mainly | | | | | | done on | done on | | | | | | per UE | per UE | | | | | | basis to | basis to | | | | | | collect | report to | | | | | | User | the AF, | | | | | | E | i.e. | | | | | | xperience | s | | | | | | and/or DN | ignalling | | | | | | pe | overheads | | | | | | rformance | could be | | | | | | from the | high. | | | | | | AF, i.e. | | | | | | | s | Not all | | | | | | ignalling | pe | | | | | | overheads | rformance | | | | | | could be | /resource | | | | | | high. | m | | | | | | | onitoring | | | | | | Not all | are | | | | | | pe | ne | | | | | | rformance | cessarily | | | | | | /resource | done by | | | | | | m | the | | | | | | onitoring | NWDAF. | | | | | | are | | | | | | | ne | | | | | | | cessarily | | | | | | | produced | | | | | | | by the | | | | | | | NWDAF. | | | | | | | | | | | | | | There is | | | | | | | no | | | | | | | on-going | | | | | | | feedback | | | | | | | from the | | | | | | | 5GC to | | | | | | | the AF to | | | | | | | monitor | | | | | | | each | | | | | | | UE\'s | | | | | | | pe | | | | | | | rformance | | | | | | | for | | | | | | | part | | | | | | | icipating | | | | | | | in the | | | | | | | Ap | | | | | | | plication | | | | | | | AI/ML | | | | | | | o | | | | | | | peration. | | | +----+-----------+-----------+-----------+-----------+-----------+
## 7.2 Key Issue #2: 5GC information exposure to UE
Table 7.2-1: Evaluated based on the NAS based solution vs IEAF/AF based
solution
+---------+---------+---------+---------+---------+---------+---------+ | Eva | Suggest | Suggest | Suggest | Suggest | Pros: | Cons: | | luation | to use | to use | to use | to use | | | | C | NAS | IEAF/AF | NAS | IEAF/AF | | | | riteria | based | based | based | based | | | | | s | s | s | s | | | | | olution | olution | olution | olution | | | | | to | to | to | to | | | | | sub | sub | sub | sub | | | | | scribe/ | scribe/ | scribe/ | scribe/ | | | | | request | request | request | request | | | | | to | to | to | to | | | | | network | network | network | network | | | | | info | info | info | info | | | | | rmation | rmation | rmation | rmation | | | | | and | and | and | and NAS | | | | | expose | expose | IEAF/AF | based | | | | | network | network | based | s | | | | | info | info | s | olution | | | | | rmation | rmation | olution | to | | | | | to UE | to UE | to | expose | | | | | | | expose | network | | | | | | | network | info | | | | | | | info | rmation | | | | | | | rmation | to UE | | | | | | | to UE | | | | +=========+=========+=========+=========+=========+=========+=========+ | Solu | Not | The UE | Only | Only | Less | | | tion#2 | men | Appl | me | me | com | | | | tioned. | ication | ntioned | ntioned | plexity | | | | | Client | IEAF | IEAF | for UE | | | | | can | based | based | to | | | | | Sub | so | so | request | | | | | scribe/ | lution. | lution. | the | | | | | Request | | | info | | | | | to | | | rmation | | | | | NWDAF | | | via the | | | | | via | | | IEAF. | | | | | IEAF to | | | | | | | | request | | | Due to | | | | | the | | | the | | | | | info | | | a | | | | | rmation | | | nalytic | | | | | from | | | info | | | | | 5GC, | | | rmation | | | | | and the | | | from | | | | | an | | | NWDAF | | | | | alytics | | | are all | | | | | result | | | user | | | | | of | | | plane | | | | | NWDAF | | | data, | | | | | can be | | | so it | | | | | de | | | is more | | | | | livered | | | pr | | | | | to the | | | eferred | | | | | UE | | | to use | | | | | Appl | | | the | | | | | ication | | | user | | | | | via | | | plane | | | | | DCAF. | | | to | | | | | | | | deliver | | | | | | | | the | | | | | | | | data. | | +---------+---------+---------+---------+---------+---------+---------+ | Solu | P | Not | Only | Only | Solu | Impact | | tion#3 | roposed | men | me | me | tion#3 | the NAS | | | to | tioned. | ntioned | ntioned | le | sign | | | l | | NAS | NAS | verages | alling. | | | everage | | based | based | e | The UE | | | the SMF | | so | so | xisting | can | | | serving | | lution. | lution. | NAS | enable | | | the PDU | | | | sig | an | | | Session | | | | nalling | alytics | | | for | | | | and SM | info | | | AI/ML | | | | pro | rmation | | | based | | | | cedures | e | | | service | | | | to | xposure | | | s/appli | | | | enable | to UE | | | cations | | | | network | during | | | p | | | | commun | PDU | | | rovides | | | | ication | Session | | | an | | | | with | Establ | | | alytics | | | | the UE | ishment | | | info | | | | with | pr | | | rmation | | | | b | ocedure | | | o | | | | uilt-in | and PDU | | | btained | | | | NAS | Session | | | from | | | | se | Modif | | | the | | | | curity. | ication | | | NWDAF | | | | | pr | | | to the | | | | | ocedure | | | UE. The | | | | | which | | | UE can | | | | | will | | | enable | | | | | impact | | | an | | | | | these | | | alytics | | | | | two | | | info | | | | | proc | | | rmation | | | | | edures. | | | e | | | | | | | | xposure | | | | | The SMF | | | to UE | | | | | should | | | during | | | | | und | | | PDU | | | | | erstand | | | Session | | | | | or | | | Establ | | | | | re | | | ishment | | | | | cognize | | | pr | | | | | the | | | ocedure | | | | | newly | | | and PDU | | | | | int | | | Session | | | | | roduced | | | Modif | | | | | par | | | ication | | | | | ameters | | | pr | | | | | in UE | | | ocedure | | | | | r | | | which | | | | | equest, | | | will | | | | | | | | impact | | | | | Massive | | | these | | | | | network | | | two | | | | | an | | | proc | | | | | alytics | | | edures. | | | | | notif | | | | | | | | ication | | | | | | | | may | | | | | | | | cause | | | | | | | | control | | | | | | | | plane | | | | | | | | cong | | | | | | | | estion. | | | | | | | | | | | | | | | | It | | | | | | | | r | | | | | | | | equires | | | | | | | | to | | | | | | | | define | | | | | | | | new | | | | | | | | inte | | | | | | | | raction | | | | | | | | between | | | | | | | | UE NAS | | | | | | | | and UE | | | | | | | | Appl | | | | | | | | ication | | | | | | | | Client | | | | | | | | for | | | | | | | | data | | | | | | | | ex | | | | | | | | posure. | +---------+---------+---------+---------+---------+---------+---------+ | Solu | Only | For the | Only | The | No need | Carry | | tion#4 | me | request | me | request | for 5GC | the | | | ntioned | phase, | ntioned | is | to | same | | | that | the AF | that | based | tr | concern | | | network | sub | network | on AF | anslate | as | | | info | scribes | info | and the | UE\'s | Solu | | | rmation | to the | rmation | notif | request | tion#2 | | | e | NWDAF | e | ication | as in | w.r.t. | | | xposure | on | xposure | is | Solu | IEAF | | | to UE | behalf | to UE | based | tion#2 | related | | | via | of UE | via | on NAS. | and | issues. | | | NAS. | in | NAS. | | hence | | | | | cluding | | | less | Impact | | | | UE | | | com | the NAS | | | | iden | | | plexity | sign | | | | tifier, | | | for UE | alling. | | | | An | | | to | The | | | | alytics | | | request | an | | | | ID, | | | the | alytics | | | | Area of | | | info | info | | | | In | | | rmation | rmation | | | | terest, | | | via the | e | | | | Notif | | | AF. | xposure | | | | ication | | | | to UE | | | | Target | | | The | during | | | | Address | | | network | PDU | | | | (+ | | | info | Session | | | | c | | | rmation | Modif | | | | allback | | | e | ication | | | | URI), | | | xposure | pro | | | | Target | | | to UE | cedure. | | | | UE IP | | | via NAS | | | | | A | | | may | Massive | | | | ddress, | | | have | network | | | | UE\'s | | | rel | an | | | | subsc | | | atively | alytics | | | | ription | | | low | notif | | | | corr | | | notif | ication | | | | elation | | | ication | may | | | | ID, and | | | delay. | cause | | | | the | | | | control | | | | an | | | | plane | | | | alytics | | | | cong | | | | data of | | | | estion. | | | | NWDAF | | | | | | | | can be | | | | It | | | | de | | | | r | | | | livered | | | | equires | | | | by the | | | | to | | | | AF to | | | | define | | | | the UE | | | | new | | | | over | | | | inte | | | | appl | | | | raction | | | | ication | | | | between | | | | layer. | | | | UE NAS | | | | | | | | and UE | | | | | | | | Appl | | | | | | | | ication | | | | | | | | Client | | | | | | | | for | | | | | | | | data | | | | | | | | ex | | | | | | | | posure. | +---------+---------+---------+---------+---------+---------+---------+ | Solu | P | If the | Based | Both | Similar | Sup | | tion#5 | roposed | info | on | NAS | conside | porting | | | to let | rmation | policy | based | rations | both UP | | | SMF on | d | or | s | as the | and CP | | | behalf | elivery | access | olution | Solu | so | | | of the | mode | to | and | tion#2 | lutions | | | UE to | in | Network | IEAF/AF | and | may | | | su | dicates | Ana | based | Solu | bring | | | bscribe | the UE | lytics, | s | tion#3 | higher | | | s | may use | e.g. | olution | for the | com | | | pecific | only | showing | are | pros. | plexity | | | An | \"UP\" | high CP | men | | to the | | | alytics | or | load, | tioned. | | network | | | to the | \" | the SMF | The UE | | and the | | | NWDAF. | Both\", | may | may | | UE over | | | The UE | the UE | route | provide | | pr | | | p | may | An | its | | oposals | | | rovides | request | alytics | cap | | add | | | the | a PDU | of | ability | | ressing | | | input | Session | Network | (NA | | UP or | | | pa | Establ | E | S/IEAF) | | CP only | | | rameter | ishment | xposure | upon | | sol | | | r | to | notif | regist | | utions. | | | equired | enable | ication | ration. | | It | | | for | conne | through | AMF | | needs | | | these | ctivity | the UP, | checks | | nego | | | An | toward | either | if the | | tiation | | | alytics | an AF | d | UE is | | of the | | | during | (e.g. | irectly | allowed | | UE | | | the PDU | IEAF) | through | to | | cap | | | Session | and | the UPF | request | | ability | | | Establ | request | (via | and get | | support | | | ishment | An | N4) or | Network | | for | | | Request | alytics | through | E | | network | | | or it | and/or | and AF | xposure | | ex | | | may | Event | such as | infor | | posure. | | | provide | Notif | IEAF. | mation, | | | | | the | ication | | and | | E | | | input | and | | whether | | xisting | | | par | have | | no | | NAS | | | ameters | those | | tificat | | pro | | | using | An | | ions/re | | cedures | | | UL NAS | alytics | | sponses | | are | | | TR | and | | can be | | e | | | ANSPORT | Event | | sent | | xtended | | | m | Notif | | over | | to | | | essage, | ication | | the CP, | | enable | | | through | de | | UP or | | author | | | the | livered | | both. | | ization | | | AMF. | over | | | | for | | | The SMF | the UP, | | | | d | | | sends | using | | | | elivery | | | PDU | the | | | | of | | | Session | IEAF or | | | | Network | | | Establ | other | | | | an | | | ishment | AF as | | | | alytics | | | accept | an | | | | and to | | | in | anchor. | | | | de | | | cluding | | | | | termine | | | the | | | | | d | | | an | | | | | elivery | | | alytics | | | | | mec | | | results | | | | | hanism, | | | or the | | | | | either | | | AMF | | | | | CP or | | | send | | | | | UP. | | | the DL | | | | | | | | NAS | | | | | Similar | | | tr | | | | | concern | | | ansport | | | | | as the | | | in | | | | | Solu | | | cluding | | | | | tion#2 | | | the | | | | | and | | | an | | | | | Solu | | | alytics | | | | | tion#3 | | | r | | | | | for the | | | esults. | | | | | cons. | +---------+---------+---------+---------+---------+---------+---------+ | Solu | Pa | Pa | Pa | The | Same | | | tion#8 | rtially | rtially | rtially | reques | benefit | | | | app | appl | appl | t/subsc | as | | | | licable | icable. | icable. | ription | Solut | | | | as the | | The AF | is | ion#4. | | | | s | For 5GC | can | based | | | | | olution | info | notify | on AF | Limited | | | | uses | rmation | the UE | and the | impact | | | | NAS to | that | in | notif | on NAS | | | | expose | relate | option | ication | sig | | | | network | to an | B for | to the | nalling | | | | info | AF | 5GC | UE is | for AF | | | | rmation | Sess | infor | based | Sess | | | | to UE | ion/PDU | mation. | on NAS | ion/PDU | | | | in | S | | in | Session | | | | option | ession, | | option | s | | | | A. | the AF | | A and | pecific | | | | | on | | via AF | infor | | | | | behalf | | in | mation, | | | | | of UE | | option | while | | | | | sub | | B. | reusing | | | | | scribes | | | e | | | | | via the | | | xisting | | | | | PCF. | | | NFs and | | | | | The SMF | | | pro | | | | | sends | | | cedures | | | | | an AF | | | for QoS | | | | | Sess | | | change | | | | | ion/PDU | | | notifi | | | | | Session | | | cation. | | | | | s | | | | | | | | pecific | | | The | | | | | notif | | | network | | | | | ication | | | info | | | | | to the | | | rmation | | | | | AF via | | | e | | | | | the | | | xposure | | | | | PCF. | | | to UE | | | | | For | | | via NAS | | | | | other | | | may | | | | | info, | | | have | | | | | the AF | | | rel | | | | | d | | | atively | | | | | irectly | | | low | | | | | sub | | | notif | | | | | scribes | | | ication | | | | | the | | | delay. | | | | | info to | | | | | | | | the | | | | | | | | N | | | | | | | | F/NWDAF | | | | | | | | for the | | | | | | | | UE, and | | | | | | | | the | | | | | | | | N | | | | | | | | F/NWDAF | | | | | | | | n | | | | | | | | otifies | | | | | | | | the AF | | | | | | | | di | | | | | | | | rectly. | | | | | | | | | | | | | | | | The AF | | | | | | | | may | | | | | | | | inform | | | | | | | | the UE, | | | | | | | | via | | | | | | | | appl | | | | | | | | ication | | | | | | | | layer | | | | | | | | communi | | | | | | | | cation, | | | | | | | | about | | | | | | | | the | | | | | | | | ass | | | | | | | | istance | | | | | | | | info | | | | | | | | rmation | | | | | | | | based | | | | | | | | on the | | | | | | | | r | | | | | | | | eceived | | | | | | | | info | | | | | | | | rmation | | | | | | | | from | | | | | | | | 5GS and | | | | | | | | local | | | | | | | | config | | | | | | | | uration | | | | | | | | for | | | | | | | | option | | | | | | | | B. | | | | | +---------+---------+---------+---------+---------+---------+---------+ | Solut | Not | Not | Not | UE and | The | The | | ion#29 | men | men | men | AI/ML | network | request | | | tioned. | tioned. | tioned. | appl | info | is not | | | | | | ication | rmation | from UE | | | | | | servers | e | di | | | | | | ne | xposure | rectly, | | | | | | gotiate | to UE | instead | | | | | | the | via NAS | it is | | | | | | AI/ML | may | from | | | | | | task to | have | UDM | | | | | | be | rel | when | | | | | | pe | atively | the | | | | | | rformed | low | subsc | | | | | | and the | notif | ription | | | | | | task | ication | data of | | | | | | related | delay. | the | | | | | | para | | AI/ML | | | | | | meters, | | task is | | | | | | AF | | c | | | | | | p | | hanged. | | | | | | rovides | | This | | | | | | the | | s | | | | | | subsc | | olution | | | | | | ription | | only | | | | | | data of | | me | | | | | | the | | ntioned | | | | | | AI/ML | | how to | | | | | | task to | | send | | | | | | UDM via | | the | | | | | | NEF. | | info | | | | | | When | | rmation | | | | | | the | | to the | | | | | | subsc | | UE, and | | | | | | ription | | hence | | | | | | data of | | it is | | | | | | the | | only a | | | | | | AI/ML | | partial | | | | | | task is | | so | | | | | | c | | lution. | | | | | | hanged, | | | | | | | | the UDM | | | | | | | | notify | | | | | | | | SMF. | | | | | | | | SMF | | | | | | | | det | | | | | | | | ermines | | | | | | | | the | | | | | | | | reco | | | | | | | | mmended | | | | | | | | service | | | | | | | | trans | | | | | | | | mission | | | | | | | | time | | | | | | | | d | | | | | | | | uration | | | | | | | | and | | | | | | | | exposes | | | | | | | | such | | | | | | | | pa | | | | | | | | rameter | | | | | | | | to UE | | | | | | | | via | | | | | | | | NAS. | | | | | | | | | | | | | | | | Other | | | | | | | | option | | | | | | | | is the | | | | | | | | PCF | | | | | | | | r | | | | | | | | equests | | | | | | | | an | | | | | | | | alytics | | | | | | | | from | | | | | | | | NWDAF | | | | | | | | and | | | | | | | | then | | | | | | | | exposes | | | | | | | | network | | | | | | | | info | | | | | | | | rmation | | | | | | | | (i.e. | | | | | | | | info | | | | | | | | rmation | | | | | | | | based | | | | | | | | on | | | | | | | | network | | | | | | | | ana | | | | | | | | lytics) | | | | | | | | to the | | | | | | | | UE | | | | | | | | using | | | | | | | | UE | | | | | | | | policy. | | | +---------+---------+---------+---------+---------+---------+---------+ | Solut | Not | The UE | Not | Only | Sub-set | Carry | | ion#30 | men | Appl | men | me | of the | the | | | tioned. | ication | tioned. | ntioned | solu | same | | | | Client | | DCAF | tion#2 | concern | | | | can | | based | with | as | | | | Sub | | so | similar | Solut | | | | scribe/ | | lution. | c | ion#2. | | | | Request | | | onsider | | | | | to | | | ations. | | | | | NWDAF | | | | | | | | via | | | | | | | | IEAF to | | | | | | | | request | | | | | | | | the | | | | | | | | info | | | | | | | | rmation | | | | | | | | from | | | | | | | | 5GC. | | | | | +---------+---------+---------+---------+---------+---------+---------+ | Solut | P | Not | Only | Only | Same | NAS | | ion#31 | roposed | men | me | me | ad | sig | | | to | tioned. | ntioned | ntioned | vantage | nalling | | | l | | NAS | NAS | as | is | | | everage | | based | based | s | e | | | the AMF | | so | so | olution | xtended | | | for | | lution. | lution. | #3 | to | | | provi | | | | except | support | | | sioning | | | | using | the new | | | of | | | | AM NAS. | par | | | AI/ML | | | | The | ameters | | | ass | | | | s | for | | | istance | | | | olution | d | | | info | | | | le | elivery | | | rmation | | | | verages | of | | | to UE | | | | e | AI/ML | | | based | | | | xisting | ass | | | on the | | | | NAS | istance | | | an | | | | sig | infor | | | alytics | | | | nalling | mation. | | | from | | | | to | | | | the | | | | enable | Massive | | | NWDAF. | | | | network | network | | | UE | | | | commun | an | | | r | | | | ication | alytics | | | equests | | | | with | notif | | | AI/ML | | | | the UE | ication | | | ass | | | | with | may | | | istance | | | | b | cause | | | info | | | | uilt-in | control | | | rmation | | | | NAS | plane | | | in the | | | | se | cong | | | regis | | | | curity. | estion. | | | tration | | | | | | | | pro | | | | | It | | | cedure. | | | | | r | | | AMF | | | | | equires | | | sub | | | | | to | | | scribes | | | | | define | | | to | | | | | new | | | NWDAF | | | | | inte | | | for a | | | | | raction | | | UE and | | | | | between | | | support | | | | | UE NAS | | | a NAS | | | | | and UE | | | message | | | | | Appl | | | to | | | | | ication | | | deliver | | | | | Client | | | results | | | | | for | | | to UE. | | | | | data | | | | | | | | ex | | | | | | | | posure. | +---------+---------+---------+---------+---------+---------+---------+
Table 7.2-2: Evaluated based on other specific criteria
+---------+---------+---------+---------+---------+---------+---------+ | Eva | The | The | Support | Support | Pros: | Cons: | | luation | author | di | for | the | | | | C | ization | scovery | M | AI/ML | | | | riteria | control | and | ultiple | tra | | | | | or | nego | IEAFs | nslator | | | | | network | tiation | | ( | | | | | consent | of the | | AIML-T) | | | | | for | UE | | | | | | | network | cap | | | | | | | info | ability | | | | | | | rmation | support | | | | | | | or data | for | | | | | | | an | network | | | | | | | alytics | ex | | | | | | | e | posure. | | | | | | | xposure | | | | | | | | to the | | | | | | | | UE | | | | | | +=========+=========+=========+=========+=========+=========+=========+ | Solu | The | Not | There | Not | S | Dep | | tion#2 | NWDAF | men | could | men | olution | endency | | | det | tioned. | be more | tioned. | #2 | on | | | ermines | | than | | suggest | SA WG3 | | | the | | one | | to | to | | | author | | IEAF to | | support | f | | | ization | | support | | the | inalize | | | info | | the | | author | the | | | rmation | | given | | ization | secured | | | for the | | appl | | control | user | | | UE | | ication | | or | plane | | | based | | at | | network | based | | | on | | di | | consent | a | | | local | | fferent | | for | pproach | | | policy | | service | | network | to | | | and the | | areas. | | info | expose | | | network | | The | | rmation | network | | | consent | | NWDAF | | or data | info to | | | as a UE | | can use | | an | UE. | | | subsc | | the NRF | | alytics | | | | ription | | to | | e | Need | | | data | | d | | xposure | further | | | from | | iscover | | to the | disc | | | the UDM | | the | | UE. The | ussions | | | about | | IEAF | | network | to | | | whether | | serving | | can | und | | | the UE | | the UE | | prevent | erstand | | | has | | cur | | the UE | the | | | sub | | rently. | | from | ne | | | scribed | | | | re | cessity | | | to the | | | | ceiving | to | | | service | | | | the | support | | | that | | | | info | m | | | ob | | | | rmation | ultiple | | | taining | | | | which | IEAF s. | | | some | | | | is not | Needs | | | s | | | | related | further | | | pecific | | | | to the | dis | | | an | | | | UE | cussion | | | alytics | | | | itself. | on DEC | | | ID from | | | | | dep | | | n | | | | | loyment | | | etwork. | | | | | cases. | +---------+---------+---------+---------+---------+---------+---------+ | Solu | The | The SMF | Not | Not | S | | | tion#3 | author | p | men | men | olution | | | | ization | rovides | tioned. | tioned. | #3 | | | | control | 5GC | | | s | | | | and | info to | | | upports | | | | network | the UE | | | the | | | | consent | only | | | author | | | | are | when | | | ization | | | | pe | the UE | | | control | | | | rformed | r | | | or | | | | by the | equests | | | network | | | | SMF | it. | | | consent | | | | based | (E | | | for | | | | on | nabling | | | data | | | | subsc | request | | | an | | | | ription | for | | | alytics | | | | data. | an | | | e | | | | | alytics | | | xposure | | | | | info | | | to the | | | | | rmation | | | UE. The | | | | | e | | | network | | | | | xposure | | | can | | | | | from | | | prevent | | | | | the UE | | | the UE | | | | | can be | | | from | | | | | con | | | re | | | | | sidered | | | ceiving | | | | | as UE | | | the | | | | | capa | | | info | | | | | bility) | | | rmation | | | | | | | | which | | | | | | | | is not | | | | | | | | related | | | | | | | | to the | | | | | | | | UE | | | | | | | | itself. | | +---------+---------+---------+---------+---------+---------+---------+ | Solu | Not | Not | Not | Not | | | | tion#4 | men | men | men | men | | | | | tioned. | tioned. | tioned. | tioned. | | | +---------+---------+---------+---------+---------+---------+---------+ | Solu | There | The UE | Not | Not | S | In | | tion#5 | should | may | men | men | olution | order | | | be a | i | tioned. | tioned. | #5 | to | | | Network | ndicate | | | suggest | support | | | con | its | | | to | both CP | | | trolled | cap | | | support | and UP | | | me | ability | | | the | so | | | chanism | during | | | author | lution, | | | to | the | | | ization | ne | | | enable | Regis | | | control | gotiate | | | the UE | tration | | | or | the UE | | | access | pr | | | network | cap | | | to data | ocedure | | | consent | ability | | | col | by | | | for | with | | | lection | in | | | network | the | | | as a | cluding | | | info | network | | | whole | a new | | | rmation | to | | | or more | IE, | | | or data | support | | | s | e.g. | | | an | the | | | pecific | \" | | | alytics | AIML | | | data | Network | | | e | service | | | coll | E | | | xposure | is | | | ection, | xposure | | | to the | needed. | | | through | capa | | | UE. The | | | | data | bility. | | | network | | | | col | The UE | | | can | | | | lection | may | | | prevent | | | | po | also | | | the UE | | | | licies, | i | | | from | | | | that | ndicate | | | re | | | | p | whether | | | ceiving | | | | ertains | it is | | | the | | | | to | capable | | | info | | | | certain | of | | | rmation | | | | Network | re | | | which | | | | c | ceiving | | | is not | | | | apabili | Network | | | related | | | | ties/se | E | | | to the | | | | rvices, | xposure | | | UE | | | | O | Cap | | | itself. | | | | perator | ability | | | | | | | p | Notifi | | | It | | | | olicies | cations | | | p | | | | may be | and or | | | rovides | | | | used to | An | | | a | | | | de | alytics | | | f | | | | termine | over | | | lexible | | | | which | the CP, | | | me | | | | an | UP or | | | chanism | | | | alytics | both\". | | | that | | | | a UE is | The UE | | | allows | | | | allowed | cap | | | both CP | | | | to | ability | | | and UP | | | | c | may be | | | altern | | | | ollect. | used by | | | atives. | | | | | the | | | | | | | | AMF/UDM | | | | | | | | to | | | | | | | | de | | | | | | | | termine | | | | | | | | whether | | | | | | | | to | | | | | | | | check | | | | | | | | if the | | | | | | | | UE is | | | | | | | | allowed | | | | | | | | to | | | | | | | | request | | | | | | | | and get | | | | | | | | Network | | | | | | | | E | | | | | | | | xposure | | | | | | | | infor | | | | | | | | mation, | | | | | | | | and | | | | | | | | whether | | | | | | | | no | | | | | | | | tificat | | | | | | | | ions/re | | | | | | | | sponses | | | | | | | | can be | | | | | | | | sent | | | | | | | | over | | | | | | | | the CP, | | | | | | | | UP or | | | | | | | | both. | | | | | +---------+---------+---------+---------+---------+---------+---------+ | Solu | Not | UE and | Not | Not | The | TBD | | tion#8 | men | AF make | men | men | nego | | | | tioned. | some | tioned. | tioned. | tiation | | | | | negot | | | happens | | | | | iations | | | in the | | | | | in the | | | app | | | | | appl | | | layer | | | | | ication | | | which | | | | | layer | | | will | | | | | to | | | have | | | | | de | | | less | | | | | termine | | | comp | | | | | that | | | lexity. | | | | | 5GC | | | Appli | | | | | info | | | cations | | | | | rmation | | | in the | | | | | is | | | UE may | | | | | r | | | reuse | | | | | equired | | | the | | | | | for the | | | same | | | | | UE\'s | | | me | | | | | local | | | chanism | | | | | d | | | to | | | | | ecision | | | trigger | | | | | on | | | ada | | | | | appl | | | ptation | | | | | ication | | | to | | | | | AI/ML | | | po | | | | | ope | | | tential | | | | | rations | | | QoS | | | | | and UE | | | change | | | | | allows | | | and to | | | | | AF to | | | QoS | | | | | su | | | change | | | | | bscribe | | | notific | | | | | the 5GC | | | ations. | | | | | info | | | This | | | | | rmation | | | may | | | | | on | | | s | | | | | behalf | | | implify | | | | | of | | | appl | | | | | itself. | | | ication | | | | | | | | layer | | | | | | | | impleme | | | | | | | | ntation | | | | | | | | e.g. | | | | | | | | im | | | | | | | | plement | | | | | | | | pro | | | | | | | | cedures | | | | | | | | to | | | | | | | | prepare | | | | | | | | ada | | | | | | | | ptation | | | | | | | | when | | | | | | | | QoS | | | | | | | | change | | | | | | | | is | | | | | | | | pr | | | | | | | | edicted | | | | | | | | and | | | | | | | | finally | | | | | | | | execute | | | | | | | | ada | | | | | | | | ptation | | | | | | | | when | | | | | | | | QoS | | | | | | | | a | | | | | | | | ctually | | | | | | | | change. | | | | | | | | | | | | | | | | It uses | | | | | | | | b | | | | | | | | uilt-in | | | | | | | | NAS | | | | | | | | s | | | | | | | | ecurity | | | | | | | | mec | | | | | | | | hanism. | | +---------+---------+---------+---------+---------+---------+---------+ | Solut | Not | If UE | Not | Not | TBD | Unclear | | ion#29 | men | has | men | men | | the | | | tioned. | ability | tioned. | tioned. | | benefit | | | | to | | | | for the | | | | perform | | | | new | | | | AI/ML | | | | in | | | | s | | | | dicator | | | | ervice, | | | | and | | | | it will | | | | need | | | | i | | | | further | | | | ndicate | | | | disc | | | | to | | | | ussion. | | | | request | | | | | | | | AI/ML | | | | | | | | service | | | | | | | | notifi | | | | | | | | cation. | | | | | +---------+---------+---------+---------+---------+---------+---------+ | Solut | Not | Not | Not | The | The | If the | | ion#30 | men | men | men | AIML-T | tra | AIML-T | | | tioned. | tioned. | tioned. | is | nslator | resides | | | | | | resp | can | at the | | | | | | onsible | effe | 3rd | | | | | | for | ctively | party | | | | | | tran | ensure | domain, | | | | | | slating | that | it may | | | | | | (m | the | in | | | | | | apping) | core | troduce | | | | | | the | network | more | | | | | | Appl | unde | sig | | | | | | ication | rstands | nalling | | | | | | layer | the | o | | | | | | AI/ML | UE\'s | verhead | | | | | | related | request | because | | | | | | r | and | the 5GC | | | | | | equests | also | cannot | | | | | | r | the raw | apply | | | | | | eceived | a | any | | | | | | from | nalysis | fi | | | | | | UE(s) | ID will | ltering | | | | | | to the | not | before | | | | | | r | d | info | | | | | | equests | irectly | rmation | | | | | | for 5GC | e | is sent | | | | | | and | xposure | to the | | | | | | con | to the | AF. | | | | | | verting | UE. | | | | | | | the | | | | | | | | info | | | | | | | | rmation | | | | | | | | or | | | | | | | | an | | | | | | | | alytics | | | | | | | | p | | | | | | | | roduced | | | | | | | | at 5GC | | | | | | | | to | | | | | | | | AI/ML | | | | | | | | ass | | | | | | | | istance | | | | | | | | info | | | | | | | | rmation | | | | | | | | for | | | | | | | | UE(s). | | | | | | | | The | | | | | | | | AI/ML | | | | | | | | tra | | | | | | | | nslator | | | | | | | | could | | | | | | | | be | | | | | | | | int | | | | | | | | egrated | | | | | | | | into | | | | | | | | IEAF/AF | | | | | | | | or NEF. | | | +---------+---------+---------+---------+---------+---------+---------+ | Solut | The | Not | Not | Not | The | | | ion#31 | author | men | men | men | s | | | | ization | tioned. | tioned. | tioned. | olution | | | | control | The UE | | | s | | | | and | may | | | upports | | | | network | i | | | the | | | | consent | ndicate | | | author | | | | are | its | | | ization | | | | pe | cap | | | control | | | | rformed | ability | | | or | | | | by the | during | | | network | | | | AMF | the | | | consent | | | | based | Regis | | | for | | | | on UE | tration | | | data | | | | subsc | pr | | | an | | | | ription | ocedure | | | alytics | | | | data | by | | | e | | | | from | in | | | xposure | | | | UDM. | cluding | | | to the | | | | The | request | | | UE. The | | | | NWDAF | for | | | network | | | | may | AI/ML | | | can | | | | further | ass | | | prevent | | | | check | istance | | | the UE | | | | author | infor | | | from | | | | ization | mation. | | | re | | | | of a | The AMF | | | ceiving | | | | s | can | | | the | | | | pecific | check | | | info | | | | an | the | | | rmation | | | | alytics | in | | | which | | | | IDs for | clusion | | | is not | | | | the UE. | of such | | | related | | | | | par | | | to the | | | | | ameters | | | UE | | | | | to | | | itself. | | | | | de | | | | | | | | termine | | | | | | | | UE\'s | | | | | | | | capa | | | | | | | | bility, | | | | | | | | and | | | | | | | | further | | | | | | | | confirm | | | | | | | | if the | | | | | | | | UE is | | | | | | | | allowed | | | | | | | | to | | | | | | | | request | | | | | | | | and get | | | | | | | | AI/ML | | | | | | | | ass | | | | | | | | istance | | | | | | | | info | | | | | | | | rmation | | | | | | | | by | | | | | | | | re | | | | | | | | ferring | | | | | | | | to | | | | | | | | subsc | | | | | | | | ription | | | | | | | | data. | | | | | +---------+---------+---------+---------+---------+---------+---------+
## 7.3 Key Issue #3: 5GC Information Exposure to authorized 3rd party for
Application Layer AI/ML Operation
There are 7 solutions which have been proposed to address KI#3, i.e.
Solution#6, Solution#7, Solution#8, Solution#28, Solution#32, Solution#33, and
Solution#34. Among them, there are 4 solutions (solutions #6, #8, #32, #34)
using NWDAF to analyse Application AI/ML traffic transmission and expose
analytic results to the AF.
Solution#28 is proposed as the overall architecture framework and should only
be further considered when all the KIs are getting close to be concluded.
Solution #6 proposes that 5GC NWDAF defines new FL analytics on expected
latency for candidate FL members, with input parameters (e.g. Candidate FL
members, Local model size, Aggregated model size, etc.) provided by AI/ML
application server. It is consumed by AI/ML application server to do FL
members selection. User consent checking for each member from UDM should be
done by NWDAF before exposing the analytics.
Solution #7 proposes that 5GS provide the supported UL/DL data rate to AI/ML
application server to make the decision on AI/ML operation, e.g. to determine
the splitting point for AI/ML model splitting, or to determine the AI/ML model
and the size of parameter for AI/ML model downloading. It requires the RAN
node to estimate the supported UL/DL data rate based on the channel condition
between RAN node and UE, the bandwidth available for the UE and other factors,
and then the RAN sends data rate monitoring results to UPF over user plane,
which will be exposed to AI/ML application server by UPF via SMF or exposed to
local AF directly/via NEF. Coordination with RAN WGs may be required.
Solution #8 addresses both KI#2 and KI#3, it proposes that 5G NF/NWDAF
provides 5GC information or analytics to UE(KI#2) or AF(KI#3) for the purpose
of triggering decisions on AI/ML operation or application adaptation. For
KI#3, AF subscribes for network information or data analytics from 5GC for the
UE, and NF/NWDAF notifies AF about the non-AF Session/PDU Session specific
network information or data analytics.
Solution #32 proposes that 5GC NWDAF provides enhanced \"DN Performance\",
\"Observed Service Experience\" analytics to assist AF to make AI/ML decisions
for split inference. New inputs and new outputs for these existing analytics
IDs are defined in this solution, for example, Statistics/predictions on
network performance between AI/ML processing entities and traffic rate for UL,
on packet delay for UL and on packet loss rate for UL from the UE to each
AI/ML processing entity(s).
Solution #33 proposes a mechanism to enable the network operator to have the
control for which UE is allowed for participation in the Application layer
AI/ML operation. The 5G system can expose the network authorization status of
the UE to the AF for the UE participation in the corresponding Application
AI/ML operation. Such awareness of the network authorization status for the UE
can assist the AF\'s decision for the UE selection for the corresponding
Application AI/ML operation. Network authorization status for the UE is newly
defined and stored as subscription information of UE in the UDM.
Solution #34 proposes that AF requests the NWDAF to provide the analytics
(e.g. \"User Data Congestion\", \"Service Experience\", \"NF load
information\") to obtain the prediction/statistics for the Application AI/ML
traffic transmission status. Then, the analytics results (e.g. NF resource
usage, NF load, QoS flow level data for the Application AI/ML traffic) can be
exposed to the AF to assist the Application AI/ML traffic transmission.
Table 7.3-1: Evaluations of solutions for KI#3
+---------+---------+---------+---------+---------+---------+---------+ | Agreed | S | S | S | S | S | S | | A | olution | olution | olution | olution | olution | olution | | Ps/Eval | #6 | #7 | #8 | #32 | #33 | #34 | | C | | | | | | | | riteria | | | | | | | +=========+=========+=========+=========+=========+=========+=========+ | **Pr | Co | Pros: | Pros: | Pros: | N/A | Pros: | | inciple | mments: | | | | | | | #1:** | | - No | - No | - No | | - No | | Appl | This | need | requ | requ | | requ | | ication | s | for | irement | irement | | irement | | AI/ML | olution | aw | from | from | | from | | de | is | areness | this | this | | this | | cisions | s | of the | s | s | | s | | and | pecific | Appl | olution | olution | | olution | | their | for the | ication | for 5GC | for 5GC | | for 5GC | | i | FL | AI/ML | to be | to be | | to be | | nternal | ope | op | aware | aware | | aware | | op | ration. | eration | of the | of the | | of the | | eration | This | type | AF | AF | | AF | | logic | s | | i | i | | i | | reside | olution | | nternal | nternal | | nternal | | at the | also | | logic. | logic. | | logic. | | AF and | require | | | | | | | UE | to | | | | | | | appl | develop | | | | | | | ication | a | | | | | | | client | \"new\" | | | | | | | and is | an | | | | | | | out of | alytics | | | | | | | scope | | | | | | | | of 3GPP | | | | | | | +---------+---------+---------+---------+---------+---------+---------+ | **P | Pros: | Cons: | Pros: | Pros: | Pros: | Pros: | | rincipl | | | | | | | | e#9:** | - This | - As | - | - | - | - | | The 5GS | p | the | Ad | Ad | A | Ad | | ass | roposal | s | equate. | equate. | llowing | equate. | | istance | may | olution | | | the | | | support | save | r | | | network | | | for the | the | equires | | | o | | | Appl | amount | RAN | | | perator | | | ication | of | support | | | to | | | AI/ML | si | for the | | | first | | | op | gnaling | data | | | i | | | eration | since | rate | | | dentify | | | shall | the | mon | | | the UE | | | not | ob | itoring | | | who | | | consume | jective | on per | | | does | | | more | of this | QoS | | | not | | | network | s | flow, | | | have | | | re | olution | it | | | the | | | sources | is to | imposes | | | right | | | than it | e | si | | | subsc | | | is | valuate | gnaling | | | ription | | | nec | the 5GC | ov | | | to | | | essary. | r | erheads | | | access | | | | esource | between | | | network | | | | avail | RAN and | | | r | | | | ability | 5GC. | | | esource | | | | to | | | | to | | | | support | | | | support | | | | the FL | | | | the | | | | oper | | | | s | | | | ational | | | | pecific | | | | requi | | | | Appl | | | | rements | | | | ication | | | | via the | | | | AI/ML | | | | 5GC | | | | op | | | | an | | | | eration | | | | alytics | | | | (not | | | | to | | | | based | | | | assist | | | | on the | | | | the FL | | | | op | | | | op | | | | eration | | | | eration | | | | type) | | | | ex | | | | as AF | | | | ecution | | | | is not | | | | of the | | | | aware | | | | 5GS at | | | | of the | | | | the | | | | UE\'s | | | | s | | | | 5G | | | | pecific | | | | subscr | | | | target | | | | iption, | | | | time | | | | this | | | | window. | | | | would | | | | Hence, | | | | help to | | | | there | | | | prevent | | | | is no | | | | any | | | | need | | | | unne | | | | for AF | | | | cessary | | | | to | | | | si | | | | su | | | | gnaling | | | | bscribe | | | | over | | | | to | | | | the | | | | ind | | | | intra | | | | ividual | | | | and | | | | info | | | | inter | | | | from | | | | si | | | | 5GC and | | | | gnaling | | | | to have | | | | for 5GC | | | | the 5GC | | | | to | | | | to | | | | assist | | | | expose | | | | the AF | | | | di | | | | to | | | | fferent | | | | select | | | | info to | | | | the | | | | the AF. | | | | target | | | | | | | | UE to | | | | | | | | support | | | | | | | | the | | | | | | | | Appl | | | | | | | | ication | | | | | | | | AI/ML | | | | | | | | ope | | | | | | | | ration. | | +---------+---------+---------+---------+---------+---------+---------+ | **Pr | Pros: | Pros: | Pros: | Pros: | N/A. | Pros: | | inciple | | | | | | | | #10:** | - This | - | - | - | | - | | The | s | Reuse | Reuse | Ex | | Ex | | support | olution | e | e | tending | | tending | | of 5GS | p | xisting | xisting | e | | e | | to | roposes | me | me | xisting | | xisting | | AI/M | to | chanism | chanism | NWDAF | | NWDAF | | L-based | extend | to | to | an | | an | | s | the | report | su | alytics | | alytics | | ervices | e | and to | bscribe | s | | s | | should | xisting | predict | and | ervices | | ervices | | strive | NWDAF | QoS | notify | to | | to | | to | functi | flow\'s | the | expose | | expose | | re-use | onality | perfo | non-AF | DN | | User | | e | to | rmance. | Sess | perf | | Data | | xisting | support | | ion/PDU | ormance | | Cong | | NFs and | the new | | Session | and | | estion, | | pro | Ana | | s | Service | | NF Lord | | cedures | lytics. | | pecific | Exp | | Info | | with | | | and | erience | | rmation | | ne | | | A | to AF. | | and | | cessary | | | F_Sess | | | Service | | enhan | | | ion/PDU | | | Exp | | cements | | | Session | | | erience | | in | | | s | | | to AF. | | order | | | pecific | | | | | to | | | network | | | | | fulfil | | | info | | | | | the | | | rmation | | | | | service | | | or data | | | | | requi | | | ana | | | | | rement. | | | lytics. | | | | +---------+---------+---------+---------+---------+---------+---------+ | **RAN | N/A. | Yes. | None. | None. | None. | None. | | i | | | | | | | | mpact** | | | | | | | +---------+---------+---------+---------+---------+---------+---------+ | **Pract | Yes.. | Yes. | Yes. | Yes. | Yes. | Yes. | | icality | | | | | | | | and | Pros: | Pros: | Pros: | | Pros: | | | use | | | | | | | | fulness | - The | - The | - The | | - | | | of the | ass | data | QoS | | E | | | e | istance | rate | Sustain | | nabling | | | xposure | info | info | ability | | the | | | of | could | could | an | | network | | | ass | be | be | alytics | | o | | | istance | useful | useful | could | | perator | | | info | as long | to | be | | to | | | rmation | as we | assist | useful | | first | | | for the | can | the | to | | i | | | target | figure | Appl | assist | | dentify | | | Appl | out how | ication | the | | the UE | | | ication | NWDAF | AI/ML | Appl | | who | | | AI/ML | can | data | ication | | does | | | op | derive | tr | model | | not | | | eration | the | ansfer. | do | | have | | | (e.g. | ass | | wnload. | | the | | | Model | istance | NOTE: | | | right | | | do | info. | Is it | - The | | subsc | | | wnload, | | ne | UE | | ription | | | data | | cessary | M | | to | | | spl | | to | obility | | access | | | itting, | | l | an | | network | | | traffic | | everage | alytics | | r | | | in | | the RAN | could | | esource | | | ference | | traffic | be | | to | | | etc.)** | | rate | useful | | support | | | | | mon | to | | the | | | | | itoring | assist | | s | | | | | info to | the | | pecific | | | | | support | Appl | | Appl | | | | | the | ication | | ication | | | | | Appl | AI/ML | | AI/ML | | | | | ication | model | | op | | | | | AI/ML | tr | | eration | | | | | data | aining. | | (not | | | | | tr | | | based | | | | | ansfer? | | | on the | | | | | | | | op | | | | | | | | eration | | | | | | | | type) | | | | | | | | as AF | | | | | | | | is not | | | | | | | | aware | | | | | | | | of the | | | | | | | | UE\'s | | | | | | | | 5G | | | | | | | | subscr | | | | | | | | iption. | | +---------+---------+---------+---------+---------+---------+---------+
For \'_Principle#12: Although the network does not need to know about
internals of AI/ML aspects of working of the application, it needs to be able
to distinguish AI/ML related traffic from rest of the user services related
traffic. In that sense the network is not completely agnostic of AI/ML
traffic_ \', there is no relevant information given by the solutions listed in
the table. Therefore, Principle#12 is not evaluated in the table.
As for the Solution#7, in reality, this Solution#7 should be closer to KI#1
than KI#3. Solution#7 not only has dependency on RAN, but it also imposes the
signalling overheads over NGAP. It is unclear why this solution approach with
RAN dependency is necessary to derive the data rate performance without any
obvious benefit when it is compared to other solutions.
For user consent checking support, Solution #39 and Solution #43 propose that
AF requests for triggering user consent checking in 5GC for Event/Analytics
Exposure.
Solution #39 proposes that AF ensures that the UEs associated to the UE group
ID have application users consent in place and then reuse existing
Event/Analytics exposure mechanisms such as UE location, CM state, UE
reachability, etc. to supports 5GC assistance for application FL operation.
The AF request for Event/Analytics Exposure includes user consent indication
to enable NEF for user consent checking from UDM which stores user consent for
Event/Analytics Exposure in subscription information. Alternatively, a new AF
request message is proposed to check user consent for Event/Analytics Exposure
before proceeding existing Event/Analytics exposure mechanisms.
Solution #43 proposes that AF retrieves the user consent subscription data,
indicating whether the network is allowed to expose UE related 5GC information
for Event/Analytics Exposure, for the UEs in the candidate list from the UDM
directly or via NEF.
## 7.4 Key Issue #4: Enhancing External Parameter Provisioning
Five different solutions are addressing aspects of key issue #4. Solutions #9,
#35 and #36 are addressing only Key Issue #4. Solution #29 addresses both Key
Issue #4 and Key Issue #2.
Solutions #28 is more general and addresses aspects of all Key Issues and
should be evaluated outside KI#4.
Solution #35 has no impact on services, entities, and interfaces. It proposes
to reuse procedures for AF session with specific QoS as in clause 4.15.6.6 and
clause 4.15.6.6a of TS 23.502 [4], with specific QoS parameters for the AF
session, for some type of AI/ML operations. It also proposes to negotiate and
apply a policy for background data transfer as per procedures in clause
4.16.7.2 and clause 4.15.6.8 of TS 23.502 [4], for some other types of AI/ML
operations.
In solution #9, the AF provides configuration information required for AI/ML
operations related area-based to the PCF, via NEF and UDR, using the service
specific parameter provisioning procedure as defined in clause 4.15.6.7 of TS
23.502 [4].
In solution #29, the AI/ML AF provisions AI/ML task related parameters (UE ID
or UE group ID, AI/ML application identifier, AI/ML task identifier, AI/ML
task duration, AI/ML task valid time) to the 5GS (UDR), reusing procedure for
external parameter provisioning from clause 4.15.6.2 of TS 23.502 [4].
In solution #36, the AI/ML AF provides AI/ML assisted expected UE behaviour
parameters to the 5GS (UDR), possibly associated with a probability assertion
(i.e. confidence) and optionally other parameters (e.g. the level of
accuracy), reusing procedure for external parameter provisioning from clause
4.15.6.2 of TS 23.502 [4]. AMF and SMF can then further use these provisioned
parameters for their own procedures.
In solution #28, the AI/ML AF provisions an AaaML service profile in 5GS
(UDR). AaaML service profile contains objective of target AaaML operation,
input of provisioned service parameter(s), and expected output.
The following principles are proposed as potential basis for further
evaluation of the solutions:
\- **AI/ML AF providing specific policy parameters related to the AI/ML
operation type to the 5GC, instead of 5GC deriving such policy parameters from
AI/ML operation type:**
None of the solutions propose to provision the AI/ML operation type to the
5GC. Solution #29 proposes an AI/ML task identifier but 5GC does not use the
information, rather it forwards this to the UE.
Solutions #9 and #29 propose that AI/ML AF provisions configuration
information.
More discussion is needed on the exact configuration parameters needed for
each AI/ML operation type.
**\- AI/ML AF provides one or more AI/ML assisted Expected UE Behaviour
parameter(s) and can provide at least probability assertions/confidence levels
and accuracy levels to each of them:**
This is specific to solution #36.
More discussion is needed on the specific parameters (existing and new ones)
to be provisioned, and the related scenarios for using these parameters in the
5GC NFs.
## 7.5 Key Issue #5: 5GC Enhancements to enable Application AI/ML Traffic
Transport
The following table summarize the similarity and differences among the 3
solutions to address KI#5.
Table 7.5-1: Evaluation of KI#5 solutions
+----------------+----------------+----------------+----------------+ | Evaluation | Solution#10 | Solution#11 | Solution#13 | | Criteria | | | | +================+================+================+================+ | Ability to | Solution#10 | Solution#11 | Solution#13 | | define the | leverages the | does not | does not | | application | existing BDT | provide any | provide any | | AI/ML data | Negotiation | specific info | specific info | | transfer | mechanism to | on how to | on how to | | window | enable the AF | support the | support the | | negotiation | and the | negotiated | negotiated | | mechanism to | 5GC/PCF to | planned or | planned or | | support | negotiate the | event driven | event driven | | planned or | \"Desired Time | data transfer | data transfer | | event driven | Window\" for | window. | window. | | AI/ML data | the | | However, | | transfer. | application | | Solution#13 | | | time transfer | | extends the AF | | NOTE: | which may be | | Influence | | Corresponding | scheduled in | | Traffic | | to | advance by the | | Routing | | Principle#2 | AF or | | feature which | | in the | initiated by | | supports | | Moderated AP | the AF when it | | existing | | Discussions | receives | | parameter | | for KI#5. | notification | | \"Temporal | | | from the event | | validity | | | that AF has | | condition\" to | | | subscribed | | apply timing | | | from the 5GC | | control to | | | (e.g. | | influence the | | | Group-MBR | | traffic | | | threshold has | | routing of the | | | been | | application | | | exceeded). | | AI/ML traffic. | | | | | | | | With the BDT | | Solution#13 | | | mechanism, it | | also | | | can plan for | | introduces | | | the resource | | additional | | | reservation | | AI/ML | | | for the data | | Transport | | | transmission | | Configuration | | | for a group of | | with the | | | UEs even | | associated | | | before the PDU | | \"Time | | | sessions are | | validity\" to | | | established. | | the AF | | | | | Influence | | | | | Traffic | | | | | Routing | | | | | procedure | | | | | which also | | | | | provides some | | | | | form of timing | | | | | control on the | | | | | data | | | | | transmission. | +----------------+----------------+----------------+----------------+ | Enhanced the | No | Yes. | Yes | | existing AF | | | | | Traffic | For AI/ML data | It proposed to | It proposed to | | Routing | transmission | extend the | extend the | | Influence | that requires | existing AF | existing AF | | mechanism. | some support | Influence | Influence | | | for the | Traffic | Traffic | | NOTE: | influence of | Routing | Routing | | Corresponding | the traffic | mechanism to | mechanism to | | to | routing, | leverage and | support | | Principle#4 | leveraging the | extend the | additional | | in the | AF Influence | User | AI/ML | | Moderated AP | of Traffic | Experience | Transport | | Discussions | Routing | Analytics and | Configuration | | for KI#5. | feature could | DN Performance | to UE | | | be useful. | Analytic by | discovery of | | | | coordinating | the | | | | with the R18 | Application | | | | eNA Phase 3 | AI/ML server. | | | | work to | | | | | support the | | | | | traffic | | | | | routing | | | | | decision. | | +----------------+----------------+----------------+----------------+ | Extending the | Nothing was | Yes. | Nothing was | | Service | mentioned on | | mentioned on | | Experience and | these specific | | this specific | | DN performance | aspect. | | aspect. | | analytics to | | | | | support the | | | | | Application | | | | | AI/ML traffic | | | | | transport. | | | | | | | | | | NOTE: | | | | | Corresponding | | | | | to | | | | | Principle#2 | | | | | in the | | | | | Moderated AP | | | | | Discussions | | | | | for KI#5 | | | | +----------------+----------------+----------------+----------------+ | Ability to | Solution#10 | Built-in | Built-in | | support | has proposed | capability in | capability in | | different | QoS extensions | the existing | the existing | | transport | to the | AF Influence | AF Influence | | requirements | existing BDP | of traffic | of traffic | | for the | mechanism to | routing | routing | | application | support QoS | mechanism to | mechanism to | | AI/ML traffic | parameters: | support all 5G | support all 5G | | in the form of | | QoS. | QoS. | | QoS as | Packet Delay | | | | requested by | Budget for | | | | the AF. | UL/DL per UE; | | | | | | | | | NOTE: | Packet Error | | | | Corresponding | Rate for UL/DL | | | | to | per UE; | | | | Principle#13 | | | | | in the | Packet Loss | | | | Moderated AP | Rate for UL/DL | | | | Discussions | per UE; | | | | for KI#5. | | | | | | Guaranteed | | | | | Bitrate for | | | | | UL/DL per UE. | | | +----------------+----------------+----------------+----------------+ | Pros: | Matured | Built-in | Built-in | | | existing | mechanism in | mechanism in | | | mechanism to | AF Influence | AF Influence | | | support the | of traffic | of traffic | | | negotiated | routing | routing | | | planned and | mechanism to | mechanism to | | | event driven | impact traffic | impact traffic | | | data transfer | path. | path. | | | operation. | | | | | | | Introducing | | | Enable 5GC to | | AI/ML | | | support | | Transport | | | network | | Configuration | | | resource | | to support UE | | | reservation | | discovery of | | | for the future | | the | | | PDU sessions | | Application | | | for a group of | | AI/ML server. | | | UEs while it | | | | | also allows | | | | | per UE per PDU | | | | | session BDT | | | | | policy (e.g. | | | | | QoS policy) | | | | | update | | | | | /modification. | | | +----------------+----------------+----------------+----------------+ | Cons: | Not necessary | Solution#11 | Solution#13 | | | the efficient | does not | does not | | | Application | provide any | provide any | | | AI/ML data | specific info | specific info | | | transport | on how to | on how to | | | mechanism for | support the | support the | | | specific UE. | negotiated | negotiated | | | | planned or | planned or | | | If additional | event driven | event driven | | | 5GC analytic | data transfer | data transfer | | | is required, | window | window | | | the procedure | negotiation. | negotiation. | | | needs to be | | | | | updated. | | | +----------------+----------------+----------------+----------------+
## 7.6 Key Issue #6: QoS and Policy enhancements
**This Evaluation is related to the following requirements described in
KI#6:** \"In order to conclude whether the 5G system meets QoS performance
requirements as specified in clause 7.10 of TS 22.261 [2], this study needs to
determine whether any additional QoS and/or policy enhancements to the 5G
system are required\".
**The criteria for evaluation of solutions is as follows:**
\- Whether a solution addresses the KI description, what aspects if not all.
\- Impacts in the system, NF and NF services impacted, procedure impacted.
\- Completeness of the solution, whether open issues are identified or
Editor´s notes are listed.
### 7.6.1 QoS performance measurement assistance to Application AI/ML
operation
Table 7.6.1-1 lists solutions that addresses how to map performance KPIs into
5GS QoS parameters and the procedure to perform QoS Monitoring for the UE to
AI/ML application traffic to perform both the AI/ML split, AI/ML download and
federated learning as defined in KI#6.
Table 7.6.1-1: Mapping performance KPIs into QoS parameters. Procedure for
Monitoring QoS parameters
+-------------+-------------+-------------+-------------+-------------+ | Solution | Covers KI | Impacts on | C | Open | | | r | NFs | ompleteness | issu | | | equirements | | | es/Editor´s | | | | | | Note (NOTE | | | | | | 1) | +=============+=============+=============+=============+=============+ | #1 | Covers | Nnef_AFses | No open | None | | | Delay | sionWithQoS | issues. | identified. | | | | for QoS | | | | | | monitoring | | | | | | on delay | | | | | | and | | | | | | Nnef_Ev | | | | | | entExposure | | | | | | to | | | | | | subscribe | | | | | | to PDU | | | | | | Session | | | | | | Inactivity | | | | | | time and | | | | | | data usage | | | | | | information | | | | | | for the | | | | | | AIML | | | | | | traffic. | | | | | | | | | | | | Impacts AF, | | | | | | NEF and | | | | | | SMF/UPF | | | +-------------+-------------+-------------+-------------+-------------+ | #7 | Covers | Impacts | Not | How to | | | Delay and | Nnef_AFSe | complete | request QoS | | | Bitrate and | ssiowithQoS | yet. | monitoring | | | procedure. | (QoS | | only | | | | reference | Unclear how | without | | | | is | the AF | requesting | | | | mandatory) | request QoS | QoS is | | | | and | Monitoring, | performed | | | | Npcf_SMPo | given that | in not | | | | licyControl | the QoS | defined. | | | | | reference | | | | | Impacts | is | NOTE: There | | | | RAN, SMF, | mandatory | is no RAN | | | | UPF, PCF, | parameter | impact. | | | | NEF and AF | in | | | | | | Nnef_AFSes | | | | | | sionwithQoS | | | | | | and the QoS | | | | | | parameters | | | | | | in the PCC | | | | | | rule are | | | | | | mandatory. | | +-------------+-------------+-------------+-------------+-------------+ | #15 | Covers | Impacts UE, | Not | Editor\'s | | | Delay, | UPF, SMF, | complete | note: | | | Bitrate and | AF. | yet. | Whether and | | | R | | | how to | | | eliability. | It extends | New | support new | | | Covers the | existing | services | UE | | | procedure. | PMF with | are not | measurement | | | | new | described. | should | | | | fu | | coordinate | | | | nctionality | | with RAN | | | | to monitor | | group. | | | | and do | | | | | | analytics. | | Editor\'s | | | | | | note: How | | | | Defines new | | to support | | | | services | | the | | | | and service | | c | | | | operations | | o-existence | | | | for PMF | | of ATSSS | | | | monitoring | | and AIMLsys | | | | | | with PMF | | | | | | needs | | | | | | further | | | | | | cla | | | | | | rification. | | | | | | | | | | | | Open issue: | | | | | | Lack of | | | | | | details to | | | | | | describe | | | | | | how the new | | | | | | NF obtain | | | | | | the QoS | | | | | | monitoring | | | | | | r | | | | | | equirements | | | | | | form AF for | | | | | | the target | | | | | | QoS Flow(s) | | | | | | prior to | | | | | | trigger the | | | | | | PMF for the | | | | | | QoS | | | | | | monitoring. | +-------------+-------------+-------------+-------------+-------------+ | NOTE 1: The | | | | | | evaluation | | | | | | needs | | | | | | updates | | | | | | when the | | | | | | Editor´s | | | | | | Note or | | | | | | open issues | | | | | | are | | | | | | resolved. | | | | | +-------------+-------------+-------------+-------------+-------------+
Based on the evaluations above, it can be stated that the AI/ML application
request to monitor the latency provides the Requested 5GS Delay for the AI/ML
application traffic in the procedure for Setting up an AF session with
required QoS procedure as well as the subscription for QoS measurement. This
follows the existing procedure for Setting up (or Update) an AF session with
required QoS procedure.
Monitoring other QoS parameters such as packet loss rate or bandwidth is not
described to a level that can be evaluated yet. However, monitoring if the
bitrate can be achieved using the existing GBFR can or cannot be fulfilled
that is already supported with and without provisioning of Alternative QoS
requirements.
Based on the above, the proposal is that the monitoring and reporting resource
utilization is performed for those performance KPIs described in clause 7.10
of TS 22.261 [2], those are Max. allowed UL/DL end to end latency into 5GS
Requested latency then provided in the AF request for QoS procedures.
### 7.6.2 Monitoring Group-MBR
There is one solution that proposes that the MNO checks the SLA for the Group-
MBR threshold for the given AI/ML application for FL traffic and to notify the
AF when such threshold is crossed, this KI is more towards the KI#1 and KI#7,
and lesser towards KI#6. It may also be discussed if it fits KI#7 that request
to monitor and expose a UE or a group of UEs performance (e.g. aggregated QoS
parameters) as described in TS 22.261 [2] related to FL operations. It is
proposed to evaluate this Group-MBR monitoring solution in KI#1.
Table 7.6.2-2: Mapping performance KPIs into QoS parameters. Procedure for
Monitoring QoS parameters
+----------+----------+----------+----------+----------+----------+ | Solution | Covers | Ap | Impacts | Comp | Open | | | TR/TS | plicable | on NFs | leteness | issues/E | | | requ | to the | | | ditor\'s | | | irements | r | | | Note | | | | eal-time | | | | | | | mo | | | | | | | nitoring | | | | | | | (i.e. | | | | | | | on-going | | | | | | | mo | | | | | | | nitoring | | | | | | | during | | | | | | | the | | | | | | | ML/FL | | | | | | | op | | | | | | | eration) | | | | +==========+==========+==========+==========+==========+==========+ | #1 | R | | Not | Proposes | No | | | eporting | | listed | to | E | | | pre | | yet | expose | ditor\'s | | | dictions | | | A | Note | | | of | | | nalytics | listed. | | | changing | | | on e.g. | | | | network | | | DN | | | | co | | | perf | | | | nditions | | | ormance, | | | | | | | UE | | | | | | | commun | | | | | | | ication, | | | | | | | QoS | | | | | | | sustain | | | | | | | ability. | | | | | | | | | | | | | | QoS | | | | | | | Sustai | | | | | | | nability | | | | | | | exposes | | | | | | | pre | | | | | | | dictions | | | | | | | on | | | | | | | bitrate | | | | | | | per 5QI | | | | | | | that can | | | | | | | be used | | | | | | | for the | | | | | | | AI/ML | | | | | | | server | | | | | | | to know | | | | | | | an | | | | | | | average | | | | | | | expected | | | | | | | bitrate | | | | | | | for the | | | | | | | AI/ML | | | | | | | app | | | | | | | lication | | | | | | | traffic | | | | | | | when a | | | | | | | UE is | | | | | | | that | | | | | | | cell and | | | | | | | the DN | | | | | | | per | | | | | | | formance | | | | | | | provides | | | | | | | bit | | | | | | | rate, | | | | | | | latency | | | | | | | and | | | | | | | rel | | | | | | | iability | | | | | | | although | | | | | | | it will | | | | | | | be | | | | | | | specific | | | | | | | for Edge | | | | | | | c | | | | | | | omputing | | | | | | | AI/ML | | | | | | | appli | | | | | | | cations. | | +----------+----------+----------+----------+----------+----------+ | #26 | R | | States | Proposes | No | | | eporting | | that | that the | E | | | pre | | there | AI/ML | ditor\'s | | | dictions | | are no | app | Note | | | of | | impacts | lication | listed. | | | changing | | | request | | | | network | | | de | How the | | | co | | | termines | PCF can | | | nditions | | | the list | estimate | | | | | | of UEs | that QoS | | | | | | for the | r | | | | | | FL | esources | | | | | | o | will be | | | | | | peration | a | | | | | | based on | llocated | | | | | | the | or not | | | | | | pre | at the | | | | | | dictions | time of | | | | | | on | the | | | | | | whether | AI/ML | | | | | | there | o | | | | | | will | peration | | | | | | a | is an | | | | | | vailable | open | | | | | | QoS for | issue. | | | | | | the | | | | | | | c | | | | | | | andidate | | | | | | | list of | | | | | | | UEs, | | | | | | | however | | | | | | | the | | | | | | | NWDAF | | | | | | | does not | | | | | | | provide | | | | | | | Network | | | | | | | per | | | | | | | formance | | | | | | | inf | | | | | | | ormation | | | | | | | on QoS | | | | | | | level so | | | | | | | far. | | +----------+----------+----------+----------+----------+----------+
Based on the above, the proposal is that Analytics ID(s) on both the UE
communication and QoS Sustainability are used to predict the location of the
UE when the UE to AI/ML communication is performed, and the QoS Sustainability
indicate changes on the QoS related to this 5QI. These two proposals may be
useful to assist the AF to prepare for the initial Application AI/ML
operation.
### 7.6.3 Other topics
#### 7.6.3.1 QoS request for a group of UEs
Sol #40 proposes to support a group QoS request using Nnef_AFsessionwithQoS
including the list of UE IP addresses or group identifiers for each of the
group members. The NEF checks the PCF serving the PDU Session for this UE IP
address using BSF as per current procedures. Also, the BSF extension is
proposed to support discovery of serving PCF(s) based on the list of UE IP
addresses so that the NEF does not have to contact BSF multiple times.
Sol #42 proposes that the AF request resources to NEF including AIML group
information, AIML group performance information. The AIML group information
consists of External Group ID or list of candidate UEs selected by the AF to
participate in an FL. The AIML group performance information includes Maximum
latency for the AIML group, Maximum packet loss rate in UL, Maximum packet
loss rate in DL, Duration for the requested QoS, Minimum number of UEs in the
AIML group. The proposal is to define a new Nnef_GroupAFsessionWithQoS and
Npcf_GroupPolicyAuthorization.
Sol#42 has larger impacts compared with Sol#40 that also allows to request QoS
for the candidate members of the FL. It is assumed that the UEs that are
candidate to be part of the FL have a PDU Session Established, given that
there has been a selection of the list of candidates based on other criteria
than QoS such as location. As such it is recommended to use Sol#40 to request
QoS for a group of UEs that has a PDU Session Established. Note that if there
are any requirement to request QoS for members that may not be connected, then
conclusions in GMEC study, Key Issue #3: NEF exposure framework for
provisioning of traffic characteristics and monitoring of performance
characteristics should be considered, as this is resolved there.
On the group performance information, the AF can provide 5GS QoS Parameters,
e.g. Maximum latency is mapped to Requested 5GS Delay. The Maximum Packet Loss
rate can be added to the list of 5GS QoS Parameters that are exposed, as the
Maximum Packet Loss Rate is part of the 5GS QoS parameter defined in TS 23.501
[3].
Solution #38 proposes that AF provides time dependency information to the NEF
in addition to existing QoS requirements when requesting to setup an AF
session. Alternatively, the AF provides traffic pattern information which are
converted into QoS profiles and time information by a dedicated FL assistance
function (as proposed also in solution #23). Then PCF derives PCC rules with
QoS applicability times, based on different QoS profiles with different time
information received either from NEF or from FL assistance function, and
provides these PCC rules to the SMF. The SMF then determines QoS profiles and
provisions QoS profiles with QoS applicability time to the NG-RAN and time
dependent PDRs to the UPF, and NG-RAN then schedules time dependent QoSs.
## 7.7 Key Issue #7: 5GS Assistance to Federated Learning Operation
One of major goals with proposals addressing KI#7 is developing solutions to
provide external exposure data to assist in the selection of FL members,
therefore an evaluation may be made by classifying solutions in the way they
propose the 5GC exposure mechanism.
Therefore, solutions may be classified, based on the entity (NF or NFs)
providing data to AF either directly or through the NEF, as:
\- Class 1 (exposure coordinated by NEF):
\- Sol #17, sol#18, sol#21, sol#37, sol#39, sol#43, sol#46, sol#42 and sol#47
belong to this class.
\- Class 2 (exposure generated by NWDAF):
\- Sol #6, sol#19, sol#22, sol#24, sol#27, sol#41, and sol#45 belong to this
class.
\- Class 3 (exposure coordinated by a newly defined AI/ML assistance
function):
\- Sol #23, sol#25, sol#28, sol#40, sol#44 belong to class this class.
Sol#6 supports assistance to selection of UEs for FL operation and assistance
on increasing FL performance on KI#7 by providing new analytic/prediction
information for FL operation such as expected QoS, suggested time window and
geographical distribution for each UE in target UE list. It assumes that AI/ML
application server provides specific parameters which can be understood by
3GPP network such as candidate UE list, slice information, traffic pattern
(model size, number of iterations, and time interval), and QoS requirements
and NWDAF provides exposure of analytics information after interaction with
PCF, AMF, and UDM to acquire status information relating to those parameters.
Given that the AIML operation is conducted on a single slice according to
clause 4.2, and considering that the AF is providing other parameters, e.g.
SUPI and Group Id, it is not clear why the AF needs to provide the S-NSSAI
and/or how the network slice information is used by the 5GC. It proposes that
analytic information is provided by NWDAF to AF per time window. Analytics may
be provided per iteration and/or on average, as suggested by the AF.
Sol#16 and Sol#37 both solution address monitoring of Group-MBR. This is an
important aspect that needs to be covered, however Sol#37 seems to offer a
more complete and straightforward approach by comparing the monitoring results
against a Group-MBR threshold provisioned by the AF in the 5GC. This approach
also results in reduced in a cleaner impact to NFs, where the NEF can
aggregate bit-rate provide by the SMF and compare them against a threshold.
Note: Monitoring Group-MBR is discussed under KI#1
Sol #17 supports assistance to selection of UEs for FL operation based on
result of QoS monitoring in area or interest. It introduces UE filtering
policy such as UE address(es), monitoring area, time interval, etc in order to
select target UE. And it proposes to enhance NEF to handle new analytic
operation such as selection of candidate UE based on UE filtering policy and
result of QoS monitoring.
Sol #18 supports assistance to selection of UEs for FL operation based on
analytic on UE\'s mobility in the target area. Similarly, to sol#17, it
proposes UE filtering policy for UE selection, but it is focused on Area of
Interest and enhancement of NEF to handle new analytic operation such as
selection of candidate UE based on UE filtering policy and UE mobility
analytic.
Sol #19 supports assistance to selection of UEs by providing enhanced analytic
information on UE\'s mobility by NWDAF. It proposes to enhance existing UE\'s
mobility analytic to include activation status of target application by adding
interaction between PCF and NWDAF. The service operation between NWDAF and PCF
is reusing existing service operation.
Sol #21 supports assistance for FL operation by providing event exposure on
performance of group of UEs. It proposes to enhance NEF to support event
exposure as group performance type but service operation between NEF and other
NF e.g. PCF is performed per UE granularity.
Sol#22 supports assistance to selection of UEs for FL operation by providing
new analytic such as suggestion of VN group with policy information including
AM policy and SM policy. It proposes to enhance NWDAF to handle VN group
decision, member selection, and derivation of relating policy. It assumes that
AI/ML application server provides specific parameters which can be understood
by 3GPP network such as candidate UE list, area information, S-NSSAI/DNN, and
performance requirements.
Sol #23 supports assistance for FL operation by providing new service through
a newly defined dedicated NF for Federated Learning assistance function
(FLAF). It proposes that AI/ML AF request assistance to FLAF (via NEF) with
detailed input parameters such as candidate UE\'s list and target location,
and timing information and FLAF provides new analytics such as list of
suggested UEs for FL operation.
Sol #24 supports assistance to selection of UEs by providing enhanced analytic
information on WLAN performance per UE by NWDAF. It proposes to enhance
existing WLAN performance analytic to WLAN performance analytics per UE
granularity for a certain period and area. It only impacts NWDAF and AF.
Sol#25 supports assistance to selection of UEs for FL operation and assistance
on increasing FL performance on KI#7 by introducing AIML NF which is used to
response/notify with 5GS assistance information for external exposure. It
provides detail input parameters for FL operation from AI/ML App server with
subscription for AIML assistance information for FL operation and AIML NF/NEF
provides exposure of updated assistance information e.g. new recommended UEs
based on analytic information from NWDAF. It does not provide how the AIML NF
may derives assistance information from the existing analytic information from
NWDAF.
Sol #27 supports assistance to selection of UEs by providing enhanced analytic
information on QoS sustainability and Service exposure analytics by NWDAF. It
proposes to enhance existing QoS sustainability to include a single UE level
granularity and to enhance Service Experience analytics to include success
rates of transmission of FL traffic for some time. It may require more input
data from OAM to provide RAN throughput per UE and may impact UE with new QoE
metrics relating to FL data.
Sol #28 provided list of AI/ML services for assistance of FL operation. And it
proposes the framework how to interact between AIML AF and AIML assistance
network function based on service-based architecture.
Sol #39 supports assistance for FL operation by providing existing event
exposure and analytics such as UE location, CM state, UE reachability, etc. It
analysed list of event exposure for FL member selection and proposes to reuse
current event exposure.
Sol #40 supports assistance to flexible selection of UEs for FL operation,
assistance on increasing FL performance on KI#7 and introduces AFLSF
(Application Federated Learning Support Function). It proposes to support a
group QoS request in which the required QoS for multiple UEs can be requested
via both a single service operation for the UEs in a FL group, and an
enhancement of the PCF discovery of BSF. It also proposes AFLSF to provide
assistance for FL configuration to the AF, and suggestion of candidate UE\'s
list satisfying group QoS requirements. It also proposes UE-initiated request
to join AIML session via 5GS which is embedded in session management request.
It still for further study, whether the AFLSF requires awareness of FL
operation modes to conduct the functionality described in the solution.
Sol #41 supports aggregated UE performance monitoring and exposure, by
extending performance parameters provided by the NWDAF within the DN
Performance analytics, by adding aggregated parameters such as aggregated
traffic rate, and variance of traffic rate, packet delay and packet loss, as
well as information of UEs that are too fast or slow.
Sol #42 supports assistance to selection of UEs for FL operation and
assistance on increasing FL performance on KI#7 by allowing the AF to include
the AIML group information, and the AIML group performance information in the
Nnef_GroupAFsessionWithQoS_Create request. When multiple UE(s) from the AF
group are served by the same PCF, the NEF includes AIML Group performance
information and AIML session indicator as input parameters in the
Npcf_GroupPolicyAuthorization_Create request towards the PCF. When the PCF
determines that the SMF needs updated policy information, the PCF provisions
the PCC rule in SMF which contains AIML session indicator. With the AIML
session indicator included in the PCC rule, the QoS flow binding ensures that
the PCC rule is bound to a new QoS Flow and no other PCC rule is bound to this
QoS Flow.
Sol #43 supports assistance to selection of UEs directly or via NEF, firstly
by checking user consent data from UDM, then the UE location collected from
AMF (optional), delay obtained by reusing QoS Monitoring procedure from UPF,
Throughput UL/DL, Packet transmission, Packet retransmission information by
reusing event exposure from UPF.
Sol #44 supports assistance to selection of UEs for FL operation by a new
AI/ML assistance network function which is responsible for analysing of
exposure data from other NF including NWDAF and exposure of assistance
information for FL operation to the AF which may include selecting of UE list
for FL operation. It proposes that AF to provide restriction criteria for
selection of UE, but no other input parameters are provided.
Sol #45 supports assistance on FL performance by providing analytic
information on DN Performance of each application server and with possible
combination with other analytics such as UE Mobility and Network Performance.
It proposes to enhance existing DN performance analysis to provide analytics
of latency divergence between UEs and application servers.
Sol #46 supports assistance to selection of UEs for FL operation based on
analytic on UE\'s mobility including moving direction. Similarly, to sol#18,
it proposes UE filtering policy for UE selection with FL coverage and
enhancement of NEF to handle some analytic operation such as selection of
candidate UE based on UE filtering policy and UE mobility analytic.
Sol #47 supports assistance to selection of UEs for FL operation by composite
event exposure. It proposes an enhancement of NEF to analyse composite
analytic data for selection of candidate UE. It does not require enhancement
of event exposure from other NF.
Those solutions that are related to the selection of FL member UEs can be
further grouped into two groups depending on whether a solution introduces a
new so called FL Member Selection Assistance Functionality or not. Here the
new functionality can be defined as a functionality that is hosted by one of
5GC NFs (i.e., NEF, NWDAF or a new NF) and receives a request from the AIML AF
to provide a list of candidate UEs based on the request from the AF to perform
FL member selection. The 5GC NF offering the new functionality then triggers
the corresponding 5GC procedures to derive the set of candidate UE list as
part of the assistance to be reported back to the AIML AF.
\- Solutions #17, #18, #19, #22, #23, #25, #28, #40, #44, #46 and #47 propose
to support such a new functionality.
\- Solutions #6, #24, #27, #39, #42 and #43 propose to reuse the existing or
enhanced exposures.
With the proposed new FL Member Selection Assistance Functionality, less
signalling between the AIML AF and 5GC may be expected, and AF can utilize a
list of candidate UEs provided by 5GC for determining the final FL member UEs
whereas more complexity on 5GC to offer the new functionality will be
required. Supporting this new functionality does not preclude AF requesting
5GC information directly to the relevant NFs.
Without the proposed new FL Member Selection Assistance Functionality, the
AIML AF should directly request/receive the necessary 5GC information to/from
the relevant NFs possibly via NEF and determine the FL member UEs on its own.
This is how it is supported from the previous release and no more impact other
than enhancing the already existing exposures is expected.
**Observation 1:** The newly proposed FL Member Selection Assistance
Functionality can be helpful to reduce signalling between 5GC and AF and to
help the AIML AF select the FL member UEs.
**Observation 2:** Even if the new functionality is supported, AF should be
able to directly use 5GC exposures (events, analytics) and determine the FL
member UEs without the new assistance functionality.
Among those solutions supporting the new functionality, they can be further
categorized into three groups depending on where the FL Member Selection
Assistance Functionality is accommodated.
\- NEF: #17, #18, #46, #47
\- NWDAF: #19, #22
\- A new dedicated NF: #23, #25, #28, #40, #44
**Observation 3:** The new FL Member Selection Assistance Functionality may
include some procedures that have nothing to do with analytics such as
checking user consent. Hence hosting the new functionality on NWDAF should be
avoided not to lose its primary purpose.
**Observation 4:** Defining a new NF eventually entails a lot of system
impacts and the need for defining a new NF is not well justified to support FL
member selection assistance. Instead, NEF as a gateway between 5GC and AF can
be enhanced to support such a new functionality with enhanced or new service
operations.
### 7.7.1 Evaluation for solutions based on the Performance
monitoring/exposure
For KI#7, one of major goal is How to monitor and expose a UE or a group of
UEs performance to AF. There are some solutions to achieve this goal, as:
\- Sol # 21 supports assistance for FL operation by providing event exposure
on performance of group of UEs (e.g., maximum UL,DL or RTT delay among UEs in
the target group). It proposes to enhance NEF to support event exposure as
group performance type but service operation between NEF and other NF e.g. PCF
is performed per UE granularity.
\- Sol #41 supports assistance for FL operation by exposing the analysed
performance of group of UEs (e.g., aggregated traffic rate of UEs in target
group, variance of traffic rate of the target group). It proposes to extend
performance parameters provided by the NWDAF within the DN Performance
analytics, by adding aggregated parameters such as aggregated traffic rate,
and variance of traffic rate, packet delay and packet loss.
Table 7.7.1-1: Summary of KI#7 solution evaluations for performance
monitoring/exposure
+--------------+--------------------------+--------------------------+ | | A UE or a group of UEs | 5GC Assistance | | | performance monitoring | Objectives Summary | | | and exposure to assist | | | | the FL operation | | +==============+==========================+==========================+ | Solution#21 | AF Inputs (from AF to | Assistance Objective: | | | PCF(s) via NEF): | | | | | - Assisting AF to | | | - Addresses of UEs, | monitor the aggregated | | | Event ID to be measured | UEs\' measured | | | (e.g., \"QoS Monitoring | performance and the | | | parameters\", \"UL | group of UEs\' | | | packet delay\"), Group | performance for FL | | | Performance Type to | operation | | | represent the operation | | | | to calculate the group | 5GC Assistance | | | performance based on the | Operation: | | | aggregated UEs | | | | performance (e.g., | - NEF aggregates UEs\' | | | \"max\"), Group | performance for other | | | Reporting Mode (e.g., | NFs (e.g., PCFs) per UE | | | \"Group Member\") | granularity, makes group | | | | performance by the | | | Output (to AF): | aggregated UEs\' | | | | performance and | | | - Aggregated Group | exposures the group | | | performance on the set | performance to AF | | | of target UEs according | | | | to the requested Group | Performance type: | | | Performance Type (i.e. | | | | max, min, mean or sum of | - Longest, shortest QoS | | | values) | monitoring parameters | | | | (e.g., UL/DL packet | | | | delay and RTT) among UEs | | | | in the target group | | | | | | | | - Sum or mean value of | | | | UEs\' QoS monitoring | | | | parameters | +--------------+--------------------------+--------------------------+ | Solution#41 | AF Inputs (from AF to | Assistance Objective: | | | NWDAF via NEF): | | | | | - Assisting AF to | | | - List of UE IDs in the | monitor the aggregated | | | target group, the | UEs\' performance for FL | | | extended analytics | operation | | | subsets (Aggregated | | | | traffic rate, Variance | 5GC Assistance | | | of the traffic rate, | Operation: | | | Variance of packet delay | | | | and Variance of packet | - NWDAF provides DN | | | loss rate) in DN | Performance analytics | | | Performance analytics | service with the | | | | extended analytics | | | Output (to AF): | subsets (i.e., | | | | aggregated traffic rate, | | | - Aggregated UEs\' | variance of the traffic | | | performance on the set | rate, variance of packet | | | of target UEs according | delay) and exposes the | | | to the requested | aggregated UEs\' | | | analytics subset | performance to AF | | | (Aggregated traffic | | | | rate, Variance of the | Performance type: | | | traffic rate, Variance | | | | of packet delay and | - Aggregated UEs\' | | | Variance of packet loss | traffic rate | | | rate) | | | | | - Variance of the | | | | traffic rate among UEs | | | | | | | | - Variance of packet | | | | delay among UEs | | | | | | | | - Variance of packet | | | | loss rate among UEs | +--------------+--------------------------+--------------------------+
## 7.8 Usage of analytics
### 7.8.1 Overview
Table 7.8.1-1 lists the existing solutions in TR 23.700-80, which refer to
either specific analytics ID from TS 23.288 [6], with possible enhancements,
or to new proposed analytics IDs.
Table 7.8.1-1: Usage of analytics in solutions
+-------------+--------------+------------------+------------------+ | Solution # | Key Issue # | Existing | New analytics ID | | | | analytics ID | | | | | with possible | | | | | enhancements | | +=============+==============+==================+==================+ | **#1** | #1 | DN performance, | N/A | | | | UE | | | | #6 | communication, | | | | | QoS | | | | | sustainability | | +-------------+--------------+------------------+------------------+ | **#2** | #2 | QoS | N/A | | | | Sustainability, | | | | | Slice load, NF | | | | | load, User Data | | | | | Congestion, | | | | | Network | | | | | Performance | | +-------------+--------------+------------------+------------------+ | **#3** | #2 | QoS | N/A | | | | Sustainability, | | | | | User Data | | | | | Congestion | | +-------------+--------------+------------------+------------------+ | **#5** | #2 | NW performance | N/A | +-------------+--------------+------------------+------------------+ | **#6** | #3 | NW performance | FL analytics on | | | | with possible | expected latency | | | #7 | enhancement | for candidate FL | | | | e.g., maximum | members: | | | | load that a gNB | | | | | (absolute | - Inputs: | | | | available | Candidate FL | | | | throughput) can | members, local | | | | accept. | model size, | | | | | aggregated model | | | | | size, expected | | | | | number of | | | | | iterations and | | | | | time interval | | | | | between | | | | | iterations, | | | | | preferred time | | | | | window(s) when | | | | | FL training | | | | | operation for | | | | | the group needs | | | | | to be performed, | | | | | FL transmission | | | | | start time | | | | | indicates when | | | | | FL training | | | | | operation | | | | | prefers to | | | | | start, S-NSSAI, | | | | | request for | | | | | geographical | | | | | distribution of | | | | | the UEs, QoS | | | | | requirements. | | | | | | | | | | - Outputs: | | | | | Candidate | | | | | members\' | | | | | expected latency | | | | | performance, per | | | | | iteration and/or | | | | | on average, | | | | | geographical | | | | | distribution of | | | | | the member UEs, | | | | | QoS flow level | | | | | data (QFI, QoS | | | | | flow Bit Rate, | | | | | QoS flow Packet | | | | | Delay, Packet | | | | | transmission, | | | | | Packet | | | | | retransmission) | | | | | of QoS for the | | | | | FL traffic | | | | | transmission. | +-------------+--------------+------------------+------------------+ | **#8** | #2 | QoS | N/A | | | | Sustainability, | | | | #3 | UE Mobility | | +-------------+--------------+------------------+------------------+ | **#10** | #5 | Network | N/A | | | | Performance with | | | | | enhancements: | | | | | | | | | | - output | | | | | analytics: | | | | | Average packet | | | | | delay for UL/DL; | | | | | Average packet | | | | | error rate for | | | | | UL/DL; Average | | | | | packet loss rate | | | | | for UL/DL; | | | | | Average bitrate | | | | | for UL/DL. | | +-------------+--------------+------------------+------------------+ | **#11** | #1, #5 | Service | N/A | | | | Experience, DN | | | | | Performance with | | | | | enhancements: | | | | | | | | | | - Inputs: | | | | | QFI(s) of the | | | | | QoS flow(s) | | | | | carrying the | | | | | Application | | | | | AI/ML traffic as | | | | | part of | | | | | Analytics Filter | | | | | Information. | | | | | | | | | | - output | | | | | analytics: | | | | | contain the QoS | | | | | flow level data | | | | | (e.g., QFI, QoS | | | | | flow Bit Rate, | | | | | QoS flow Packet | | | | | Delay) of the | | | | | QoS flow(s) | | | | | carrying the | | | | | Application | | | | | AI/ML traffic. | | +-------------+--------------+------------------+------------------+ | **#12** | #5 | Service | N/A | | | | Experience, DN | | | | | Performance | | +-------------+--------------+------------------+------------------+ | **#18** | #7 | UE mobility | N/A | +-------------+--------------+------------------+------------------+ | **#19** | #7 | UE mobility with | N/A | | | | enhancements: | | | | | | | | | | - Inputs: | | | | | location | | | | | requirements | | | | | from AF includes | | | | | a list of | | | | | location | | | | | information and | | | | | the required | | | | | number of UEs | | | | | that are in | | | | | these areas, | | | | | | | | | | - Outputs: the | | | | | NWDAF provides | | | | | UEs list | | | | | according to the | | | | | list. | | +-------------+--------------+------------------+------------------+ | **#22** | #7 | Network | Application of | | | | Performance, UE | federated | | | | mobility, User | learning | | | | Data Congestion, | analytics to | | | | DN performance | select the | | | | | appropriate | | | | | members. Based | | | | | on the analytics | | | | | results, the | | | | | NWDAF may also | | | | | suggest a VN | | | | | group data and | | | | | assistant | | | | | information for | | | | | the related | | | | | policies. | +-------------+--------------+------------------+------------------+ | **#23** | #3 | Observed Service | New analytics | | | | Experience, | from NWDAF if | | | #7 | Network | the Federated | | | | Performance, UE | Learning | | | | related | Assistance | | | | analytics, User | Function is | | | | Data Congestion, | located in | | | | Dispersion | NWDAF. Outputs | | | | | to be suggested | | | | | UEs for FL. | +-------------+--------------+------------------+------------------+ | **#24** | #7 | WLAN performance | N/A | | | | with | | | | | enhancements: | | | | | | | | | | - per UE | | | | | granularity | | +-------------+--------------+------------------+------------------+ | **#25** | #7 | UE | N/A | | | | Communication, | | | | | UE Mobility, | | | | | User Data | | | | | Congestion, QoS | | | | | Sustainability | | | | | | | | | | WLAN performance | | | | | with | | | | | enhancements: | | | | | | | | | | - per UE | | | | | granularity | | +-------------+--------------+------------------+------------------+ | **#26** | #7 | Network | N/A | | | | Performance, UE | | | | | related | | | | | analytics | | +-------------+--------------+------------------+------------------+ | **#27** | #7 | UE mobility, UE | N/A | | | | Communication, | | | | | User Data | | | | | Congestion, | | | | | Abnormal | | | | | behaviour | | | | | | | | | | QoS | | | | | Sustainability | | | | | with | | | | | enhancements: | | | | | input data from | | | | | OAM need to be | | | | | extended to | | | | | include | | | | | \"Throughput for | | | | | DL and UL per | | | | | UE, Packet delay | | | | | for DL and UL | | | | | per RAB/DRB per | | | | | UE, Packet loss | | | | | rate for DL and | | | | | UL per RAB/DRB | | | | | per UE in | | | | | TS | | | | | 37.320 [12]\" | | | | | for the | | | | | analytics | | | | | information in | | | | | the UE level | | | | | granularity. | | | | | | | | | | Service | | | | | Experience with | | | | | enhancements: | | | | | | | | | | - Inputs: from | | | | | UE (via AF) and | | | | | AF, success | | | | | rates for model | | | | | update and | | | | | distribution. | | +-------------+--------------+------------------+------------------+ | **#29** | #2 | Network | N/A | | | | Performance, NF | | | | #4 | load | | | | | information, | | | | | Service | | | | | Experience, UE | | | | | communication | | | | | with | | | | | enhancements. | | | | | | | | | | - Inputs: | | | | | collecting | | | | | additional input | | | | | data, i.e., | | | | | information | | | | | about the | | | | | Application | | | | | AI/ML operations | | | | | in the UE per | | | | | application | | | | | (e.g., whether | | | | | AI/ML operation | | | | | is enabled or | | | | | not for the | | | | | application, the | | | | | Application | | | | | AI/ML operation | | | | | type), | | | | | | | | | | - Outputs: | | | | | including the | | | | | above collected | | | | | information in | | | | | the output | | | | | analytics. | | +-------------+--------------+------------------+------------------+ | **#31** | #2 | Slice Load, NF | N/A | | | | load, Network | | | | | Performance. | | +-------------+--------------+------------------+------------------+ | **#32** | #3 | DN Performance, | N/A | | | | Observed Service | | | | | Experience, with | | | | | enhancements: | | | | | | | | | | - Inputs: The | | | | | data of | | | | | end-to-end | | | | | network | | | | | performance | | | | | (e.g., latency, | | | | | throughput, | | | | | packet loss | | | | | rate) between | | | | | each pair of | | | | | AI/ML processing | | | | | entities in two | | | | | adjacent layers. | | | | | | | | | | - Outputs: | | | | | Statis | | | | | tics/predictions | | | | | on network | | | | | performance | | | | | (e.g. latency, | | | | | throughput, | | | | | packet loss | | | | | rate) between | | | | | each pair of | | | | | AI/ML processing | | | | | entities in two | | | | | adjacent layers, | | | | | statis | | | | | tics/predictions | | | | | on traffic rate | | | | | for UL from the | | | | | UE to each AI/ML | | | | | processing | | | | | entity(s), | | | | | statis | | | | | tics/predictions | | | | | on packet delay | | | | | for UL from the | | | | | UE to each AI/ML | | | | | processing | | | | | entity(s), | | | | | statis | | | | | tics/predictions | | | | | on packet loss | | | | | rate for UL from | | | | | the UE to each | | | | | AI/ML processing | | | | | entity(s), | | | | | service | | | | | Experience when | | | | | some specific | | | | | endpoints are in | | | | | the splitting ML | | | | | operations. | | +-------------+--------------+------------------+------------------+ | **#34** | #1 | User data | N/A | | | | congestion, | | | | #3 | Service | | | | | experience, NF | | | | | load with new | | | | | outputs: | | | | | | | | | | QoS flow level | | | | | data (QFI, QoS | | | | | flow Bit Rate, | | | | | QoS flow Packet | | | | | Delay, Packet | | | | | transmission, | | | | | Packet | | | | | retransmission), | | | | | as the | | | | | stati | | | | | stics/prediction | | | | | of QoS for the | | | | | Application | | | | | AI/ML traffic | | | | | transmission. | | +-------------+--------------+------------------+------------------+ | **#36** | #4 | UE mobility, UE | N/A | | | | communication, | | | | | NF load | | +-------------+--------------+------------------+------------------+ | **#39** | #7 | UE Mobility, | N/A | | | | Abnormal | | | | | behaviour | | +-------------+--------------+------------------+------------------+ | **#40** | #6 | UE | N/A | | | | communication, | | | | #7 | DN performance | | +-------------+--------------+------------------+------------------+ | **#41** | #7 | DN Performance | N/A | | | | enhanced with | | | | | Analytics | | | | | subsets: | | | | | | | | | | - aggregated | | | | | traffic rate; | | | | | | | | | | - variance of | | | | | the traffic | | | | | rate; | | | | | | | | | | - variance of | | | | | packet delay; | | | | | | | | | | - variance of | | | | | packet loss | | | | | rate. | | | | | | | | | | To support | | | | | aggregated UE | | | | | performance | | | | | monitoring and | | | | | exposure for a | | | | | group of UEs. | | +-------------+--------------+------------------+------------------+ | **#44** | #7 | Service | N/A | | | | experience | | +-------------+--------------+------------------+------------------+ | **#45** | #7 | DN Performance, | N/A | | | | UE Mobility, | | | | | Abnormal | | | | | behaviour, | | | | | Network | | | | | Performance with | | | | | enhancements: | | | | | | | | | | - Inputs: Time | | | | | delay between | | | | | member UE(s) and | | | | | the application | | | | | servers, Maximum | | | | | latency | | | | | divergence | | | | | between member | | | | | UE(s) and | | | | | different | | | | | application | | | | | server, Traffic | | | | | rate for member | | | | | UE(s) | | | | | communicating | | | | | with the | | | | | application | | | | | servers, Packet | | | | | loss rate of | | | | | communications | | | | | between member | | | | | UE(s) and the | | | | | application | | | | | servers. | | | | | | | | | | DN performance | | | | | with | | | | | enhancements: | | | | | | | | | | - Outputs: | | | | | suggested list | | | | | of application | | | | | servers. | | +-------------+--------------+------------------+------------------+ | **#46** | #7 | UE mobility with | N/A | | | | enhancements: | | | | | | | | | | - Inputs: list | | | | | of locations | | | | | | | | | | - Outputs: | | | | | NWDAF will | | | | | provide a list | | | | | of UEs and UE\'s | | | | | location in the | | | | | order of which | | | | | the UE passes | | | | | through to the | | | | | NEF. Then the | | | | | NEF gets the | | | | | corresponding | | | | | statistics of UE | | | | | mobility and the | | | | | UE\'s direction. | | +-------------+--------------+------------------+------------------+
### 7.8.2 Usage of analytics for assistance to federated learning
Solution #6 proposes new FL analytics on expected latency for candidate FL
members, which includes, as outputs, candidate members\' expected latency
performance (per iteration and/or on average), geographical distribution of
the member UEs and QoS flow level data (QFI, QoS flow Bit Rate, QoS flow
Packet Delay, Packet transmission, Packet retransmission) of QoS for the FL
traffic transmission.
The geographical distribution of UEs is also proposed in solutions with UE
mobility analytics enhancements, e.g., solution #19 or solution #46. It is
recommended to introduce information on geographical distribution of member
UEs as part of enhanced UE mobility analytics outputs.
The QoS flow level data is also proposed as part of Service Experience and DN
Performance analytics (in solution #11) and User Data Congestion, Service
Experience and NF load analytics (solution #34). NF load analytics are not
intended to be used by external AFs, hence QoS flow level data should not be
considered for NF load analytics.
Solution #22 proposes new Application federated learning analytics to select
the appropriate FL members. Based on the analytics results, the NWDAF may also
suggest a VN group data and assistant information for the related policies. It
is unclear which policies the NWDAF would provide from current description of
the solution.
Solution #23 briefly refers to new analytics from NWDAF if the Federated
Learning Assistance Function is located in NWDAF without providing much
information on the expected outputs of these analytics beyond suggested UEs\'
list.
Solutions #24 and #25 propose to extend WLAN performance analytics with per UE
granularity.
Solution #27 proposes to enhance QoS sustainability analytics with more OAM
data from TS 37.320 as an existing OAM specification to allow the analytics
outputs on a per UE granularity, which does not require any enhancement of
OAM. It also proposes to add new inputs from UE (via AF) and from AF on the
success rates for model update and distribution, with the intention to add
this information to \"customized MOS at AF or QoE metrics at UE (via AF)\". It
is unclear why this information would need to be provided by 5GC to the AF
while the AF knows this information already.
Solution #29 is leveraging information on the Application AI/ML operations in
the UE per application. This solution is dependent on the overall principle
whether operation types are known to the 5GS.
Solution #41 enhances DN Performance analytics with aggregated traffic rate,
variance of the traffic rate, variance of packet delay and variance of packet
loss rate.
Solution #45 proposed that NWDAF provides to the AF a suggested list of
application servers to increase the FL performance (e.g. to manage latency
divergence). Selection of application servers is not in scope for Key Issue
#7.
# 8 Conclusion
## 8.0 General Architecture Principles
The following general architecture principles are agreed as conclusions:
\- Principle #1: Application AI/ML decisions and their internal operation
logic reside at the AF and UE application client and is out of scope of 3GPP.
If the AF wants to know the Application layer AI/ML capability in UE
application client, this can be done via interaction between the AF and the UE
application client, which is out of the 3GPP scope.
\- Principle #2: The AF does not include the application AI/ML operation type
in the request sent to 5GC to request assistance for the application AI/ML
operation.
\- Principle #3: UE capability indication to support specific Application\'s
AI/ML operation type is not required.
\- Principle #4: 5GC shall not waste the network resources to provide
assistance for UEs which do not have proper subscription, e.g., mobility
restriction, DNN, S-NSSAI, etc.
\- Principle #5: Based on application logic, it is the application decision
whether to request assistance from 5GC.
\- Principle #6: The 5GC could provide assistance to AF for UE selection
\- Principle #7: The support of 5GS to AI/ML-based services should strive to
re-use existing NFs and procedures with necessary enhancements in order to
fulfil the service requirement.
NOTE 1: More clarifications on the system parameters for the Application AI/ML
services are needed as part of the specific KI discussions.
\- Principle #8: The architecture to support AI/ML-based services should be
backward compatible with related 5GS features. It should also be designed to
enable future extensions.
\- Principle #9: Although the network does not need to know about internals of
AI/ML services, it needs to be able to distinguish AI/ML related traffic from
rest of the user services related traffic. In that sense the network is not
completely agnostic of AI/ML traffic.
NOTE 2: While AI/ML traffic is considered as a new traffic category, it is
assumed that existing detection mechanisms will be used to distinguish AI/ML
related traffic from the rest of the user services related traffic.
\- Principle #10: The architecture/procedure to support AI/ML-based services
and applications should avoid unnecessary signalling in the mobile network
and/or between 5GC and AF. The principle should also apply for 5GS assistance
to the AF monitoring of the application AI/ML operation utilization of network
resources.
\- Principle #11: Mobile network security and privacy (both UEs and mobile
networks) are important and solutions should avoid sensitive information
exposure from the mobile networks.
NOTE 3: This principle requires involvement from SA WG3.
NOTE 4: The user consent checking procedure regarding for this Study Item will
be sync up with SA3's conclusion during normative work.
## 8.1 Key Issue #1: Monitoring of network resource utilization for support of
Application AI/ML operations
It is proposed that the architecture principles and specific mechanisms below
are considered for the normative work on monitoring of network resource
utilization for support of application AI/ML operations:
\- NWDAF-based procedures and data analytics as described in TS 23.288 [6] for
the Observed Service Experience, User Data Congestion, DN performance
Analytics, UE Communication Analytics can be used by the AF as assistance
information for Application AI/ML operation. No normative work is required to
enhance these analytics for this key issue.
\- When aggregated bit rate monitoring is requested for a set of QoS flows of
a group of UEs against the pre-defined Group MBR threshold, the UPF exposure
extension proposed by Solution#37 with the new event type \'Bit Rate Reporting
per QoS Flow\' consumed by NEF as described in Solution #37 is a simple useful
tool to be supported to monitor the aggregated throughput performance for the
specific Application AI/ML operation.
\- AF knowledge on the session inactivity time with new monitoring parameters
to recognize the current system performance respective to a given UE as
described in Solution#1 is to be supported to assist Application AI/ML
application operation. The monitoring procedures are based on UPF event
exposure as described in Solution #1. No new normative work is expected at SMF
and UPF for this aspect.
\- How the UPF reports traffic/data volume is determined in UPEAS SID. Only
after UPEAS study work is completed, AIMLsys will determine if the
traffic/data volume is required to report from 5GC to AF.
It is understood that AI/ML applications can be assisted by enabling the
monitoring of available resources in the network as above, however this is out
of the scope of 3GPP.
## 8.2 Key Issue #2: 5GC information exposure to UE
No normative work will be progressed in Rel-18 for Key Issue #2.
NOTE: To facilitate Application AI/ML operation, how and which information are
exposed from the AI/ML application server to the UE application via
application layer is out of 3GPP scope.
## 8.3 Key Issue #3: 5GC Information Exposure to authorized 3rd party for
Application Layer AI/ML Operation
Proposal for the conclusions for KI#3 are based on solution evaluation in
Clause 7.3 and to be used as basis for normative work based on the following
principles: i.e.
\- The user consent is required for the UE related information or data
analytics to be exposed to the 3rd party.
NOTE 1: The user consent checking procedure to verify the data exposure to AF
will be sync up with SA3\'s conclusion during normative work.
\- UL/DL data rate exposure to AF based on AF request for data rate monitoring
with solution without RAN impact.
\- The AF could subscribe AF Session/ PDU Session related information for the
specific AF Session and reuse the existing notification and subscription
mechanism.
NOTE 2: UL/DL data rate exposure to AF may consider the conclusions of
FS_UPEAS KI#2.
## 8.4 Key Issue #4: Enhancing External Parameter Provisioning
It is proposed that the specific mechanisms below proposed by KI#4 solutions
are considered for the normative work on enhancing external parameter
provisioning to support application AI/ML operations:
\- The following new parameters related to expected UE behaviour can be
provisioned by the AF to the 5GC:
\- Confidence and/or accuracy levels for entries of the expected UE behaviour
parameters in Table 4.15.6.3-1 of TS 23.502 [4]. A confidence and/or accuracy
threshold may also be provided by the NF requesting expected UE behaviour
parameters UDM, indicating that certain confidence and/or level of accuracy
must be met for the parameter(s) to be notified by UDM to the NF.
\- Expected Inactivity Time of AIML traffic, provided as a time interval.
Confidence and/or accuracy levels may be provided for this new parameter.
## 8.5 Key Issue #5: 5GC Enhancements to enable Application AI/ML Traffic
Transport
First Step: AI/ML data transfer window negotiation mechanism: It is agreed to
consider the following principles some of them are based on solution#10, this
principle are the basis for KI#5 conclusions:
When the AF requests the network to provide QoS with individual QoS
parameters, one or more Requested Alternative QoS Parameter Set(s) in a
prioritized order. Each Requested Alternative QoS Parameter Set is comprised
of the following individual parameters: Requested 5GS Delay and Requested
Guaranteed Flow Bitrate.
\- Principle 1: A new Application Data Transfer (ADT) policy is adopted to
support application data transfer. The ADT policy includes a list of
recommended time window(s) with predicted QoS parameters per UE per time
window for the Application data transfer to start. The predicted QoS
corresponds to one of the Requested QoS or Requested Alternative QoS that was
requested by the AF.
\- Principle 2: The AF includes QoS requirements and possibly Alternative QoS
Profile(s) with a combination of QoS parameters to which the application data
traffic transmission is able to adapt , in the ADT policy negotiation request.
NOTE 1: The Alternative QoS Profile also includes the GFBR, however this is
part of the AF request for ADT negotiation as it is not possible to derive a
GFBR from the Network Performance Analytics and the Data Network Performance
Analytics.
NOTE 2: AF includes the expected minimum QoS requirement from the network.
\- Principle 3: The PCF uses the extended Network Performance Analytics of
NWDAF to derive the candidate time window(s) that may fulfil the requirements
requested from AF. The PCF generates the list of ADT policies and feedback it
to the AF. The QoS parameters in the ADT policy are determined by PCF based on
the list of individual QoS parameters and the requested Alternative QoS
Profile(s) from the AF.
\- The Network Performance Analytics support the following analytics outputs
(other outputs may be discussed during normative phase). If and how to extend
Network Performance Analytics and which input data to use will be discussed in
normative phase.
\- Overall Average and Maximum Packet Delay for UL/DL per UE per time window;
\- Overall Average and Maximum Packet Loss Rate for UL/DL per UE per time
window;
\- Overall Average, Minimum and Maximum Traffic rate for UL/DL per UE per time
window.
\- Principle 5: The AF selects one of the ADT policies provided by PCF which
may most fit for its requirement and indicate it to the PCF.
\- The Application traffic could be non GBR type or GBR type. The AF can
provide Alternative QoS profile(s) for GBR flows only.
Second step - Application Data Transmission:
\- When the Application AI/ML begins e.g. to transport intermediate data,
local training data, inference results, or model performance data, through
5GS, the AF can leverage the either existing service
Nnef_AFsessionWithQoS_Create request message as described in clause 4.15.6.6
of TS 23.502 [4], including the specific QoS parameters for the AF session or
new AF service which will be further determined during the normative phase.
Charging for Application AIML traffic transport:
\- Based on operator policy, charging of different Application AI/ML traffic
needs to be perform, however, do not expect any normative work on this aspect
in the SA WG2 specifications.
NOTE 3: An alignment can be required (if any) in the normative based on the
outcome of SA WG5.
The AF configuration information used for application AI/ML transport is
provisioned by the AF to the UE via application layer and may contain AF
address(es), so no normative work is required.
The resolution of the AF address from a FQDN to the IP address of the AF or
any associated AI/ML application server(s) is performed using the DNS server
address for the PDU Session that is provided to the UE as defined in clause
5.6.10.1 of TS 23.501 [3].
No normative work is needed to provide authentication information to the UE
for the UE to AI/ML traffic exchange.
## 8.6 Key Issue #6: QoS and Policy enhancements
It is recommended to use the following conclusions based on solution
evaluation in Clause 7.6 as the basis for the normative work on \"KI #6 QoS
and Policy enhancements\".
### 8.6.1 QoS performance measurement assistance to Application AI/ML
operation
The monitoring and reporting resource utilization is performed for those
performance KPIs and provided to the AF request for QoS procedures. The KPIs
are described in clause 7.10 of TS 22.261 [2], i.e. Max. allowed UL/DL end to
end latency etc.
\- The Guarantee Bit Rate is to be monitored using the existing reporting on
whether GFBR can or cannot be fulfilled as defined in clause 5.7.2.4.1a of TS
23.501 [3] (Notification control with no Alternative QoS), which is already
supported.
\- Existing QoS monitoring mechanism for URLLC services is reused for AI/ML
traffic.
\- The AF can consume UE Communication Analytics for assisting the AI/ML
application operations.
The AF may provide additional QoS parameter sets in
Nnef_AFsessionWithQoS_Create service operation, together with timing (start
time, duration) information for each QoS parameter set, and the PCF controls
the timing that is provided by the AF and derives PCC rules according to the
different QoS parameter sets and provides these rules to the SMF at the time
indicated by the AF.
### 8.6.2 QoS request for a group of UEs
For AIML each of the members of the group has a PDU Session established, and
the members of the group have been selected using procedures defined in
conclusions to KI#7, such as location or QoS monitoring. In order to request
QoS for the AIML communication with each of the members of the group,
extensions to the procedure for the AF request with QoS, and
Nnef_AFsessionwithQoS to provide a list of UE IP address are required. The QoS
parameters that are provided apply for each of the UE to AIML application
communication (i.e. the QoS parameters are not related to the aggregated QoS
for all FL members), as such those are provided to the PCF in the
Npcf_PolicyAuthorization. For the scenario where there are more than one PCFs
serving the list of UEs whose group QoS is requested, extensions to BSF
management discovery to provide a list of PCF addresses based on the UE
addresses are supported.
No requirements to provide QoS for a group of UEs that have no PDU Session
Established, as those cannot be selected as group members based on QoS
monitoring, however if this is a requirement, conclusions on in GMEC study,
Key Issue #3: NEF exposure framework for provisioning of traffic
characteristics and monitoring of performance characteristics applies, as this
is resolved there.
No new 5G QoS parameter is required to be introduced to support group related
Application AI/ML operation over 5GS.
### 8.6.3 Performance KPIs mapping to 5GS QoS parameters
It is concluded on the performance KPIs mapping to 5GS QoS parameters:
\- The 5GS should bind the AI/ML traffic to distinct QoS flow (i.e. not
sharing QoS flow with other applications).
\- Whether existing 5QI values can be applied for AI/ML traffic or new 5QI
values should be defined can be decided during normative phase.
## 8.7 Key Issue #7: 5GS Assistance to Federated Learning Operation
\- The new member selection assistance functionality will be specified in the
normative phase. The new member selection assistance functionality is defined
as a functionality offered by the 5GC upon receiving a request from the AF to
provide a list of candidate UEs and additional information.
\- The new member selection assistance functionality can be used by the AI/ML
based application to select FL members.
\- The new member selection assistance functionality can provide a list of
recommended UEs based on the parameters contained in the request from the AF.
\- The AF includes the following parameters as part of the request service
operation to the 5GC:
\- UE list (a UE or a UE list).
\- The 5GC provides the following parameters as part of the response service
operation to the AF:
\- List(s) of candidate UEs which can be selected by the AF.
NOTE 1: Any further parameters to be contained in the request/response from/to
the AF and the procedure for selecting the list of candidate UEs will be
discussed in the normative.
\- The new member selection assistance functionality will be hosted in NEF.
NOTE 2: If this new member selection assistance functionality is not used, AF
can select the AI/ML members based on existing network exposure information as
described in clause 4.15 of TS 23.502 [4].
NOTE 3: How to support the trusted AF with member selection assistance
functionality will be addressed during the normative phase.
### 8.7.1 Performance monitoring/exposure
For the Key Issue #7 on performance monitoring/exposure, the following
principle is proposed for the normative work.
\- The group of UEs performances are provided by NEF to AF to assist the FL
operation. These performances correspond to the QoS monitoring parameters, as
defined in clause 6.1.3.18 of TS 23.503 [5].
### 8.7.2 Analytics to Assist Federated Learning Operation
_AF can request NWDAF (via NEF if needed) to provide existing, enhanced or new
analytics to assist with federated learning operation._ NWDAF Analytics
services will be enhanced as follows:
\- New latency performance analytics are introduced for NWDAF.
NOTE 1: The specific input and output parameters for the latency performance
analytics among the group of UEs to assist the Application AI/ML FL operation
will be determined during the normative phase.
\- UE mobility analytics are enhanced as follows: a list of areas can be
provided by the AF, which helps the NWDAF to provide UE\'s direction and
geographical distribution of the UEs to the AF.
\- WLAN performance analytics are enhanced to allow analytics outputs on a per
UE granularity. For UEs\' list provided by the AF, the NWDAF can provide WLAN
performance analytics per UE granularity to assist AF to determine the final
list of member UEs.
\- QoS sustainability analytics enhancements from eNA_Ph3 normative work can
be used.
NOTE 2: Whether QoS sustainability analytics need to be enhanced on a per UE
granularity or Service Experience analytics can be used can be discussed
during the normative phase.
\- DN performance analytics are enhanced to include aggregated UE\'s traffic
rate, variance of the traffic rate among UEs, variance of packet delay among
UEs, variance of packet loss rate among UEs as well as top UEs who cannot meet
the traffic rate, packet delay and loss rate threshold.
#