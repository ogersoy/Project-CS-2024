# Foreword {#foreword-1}
This Technical Specification has been produced by the 3rd Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
In the present document, modal verbs have the following meanings:
**shall** indicates a mandatory requirement to do something
**shall not** indicates an interdiction (prohibition) to do something
The constructions \"shall\" and \"shall not\" are confined to the context of
normative provisions, and do not appear in Technical Reports.
The constructions \"must\" and \"must not\" are not used as substitutes for
\"shall\" and \"shall not\". Their use is avoided insofar as possible, and
they are not used in a normative context except in a direct citation from an
external, referenced, non-3GPP document, or so as to maintain continuity of
style when extending or modifying the provisions of such a referenced
document.
**should** indicates a recommendation to do something
**should not** indicates a recommendation not to do something
**may** indicates permission to do something
**need not** indicates permission not to do something
The construction \"may not\" is ambiguous and is not used in normative
elements. The unambiguous constructions \"might not\" or \"shall not\" are
used instead, depending upon the meaning intended.
**can** indicates that something is possible
**cannot** indicates that something is impossible
The constructions \"can\" and \"cannot\" are not substitutes for \"may\" and
\"need not\".
**will** indicates that something is certain or expected to happen as a result
of action taken by an agency the behaviour of which is outside the scope of
the present document
**will not** indicates that something is certain or expected not to happen as
a result of action taken by an agency the behaviour of which is outside the
scope of the present document
**might** indicates a likelihood that something will happen as a result of
action taken by some agency the behaviour of which is outside the scope of the
present document
**might not** indicates a likelihood that something will not happen as a
result of action taken by some agency the behaviour of which is outside the
scope of the present document
In addition:
**is** (or any other verb in the indicative mood) indicates a statement of
fact
**is not** (or any other negative verb in the indicative mood) indicates a
statement of fact
The constructions \"is\" and \"is not\" do not indicate requirements.
# 1 Scope
The present document specifies the stage 2 of the Ranging based services and
Sidelink positioning in 5G System for commercial, V2X and public safety use
cases in in-coverage, partial coverage, and out-of-coverage of 5G network
using 5G NR PC5 RAT.
Radio aspects of Ranging based services and Sidelink positioning in 5GS are
defined in TS 38.355 [12] and TS 38.305 [5].
Security aspects of Ranging based services and Sidelink positioning in 5GS are
defined in TS 33.533 [13].
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 23.501: \"System architecture for the 5G System (5GS)\".
[3] 3GPP TS 23.502: \"Procedures for the 5G System (5GS)\".
[4] 3GPP TS 23.503: \"Policy and charging control framework for the 5G System
(5GS); Stage 2\".
[5] 3GPP TS 38.305: \"NG Radio Access Network (NG-RAN); Stage 2 functional
specification of User Equipment (UE) positioning in NG-RAN\".
[6] 3GPP TS 23.287: \"Architecture enhancements for 5G System (5GS) to support
Vehicle-to-Everything (V2X) services\".
[7] 3GPP TS 23.304: \"Proximity based Services (ProSe) in the 5G System
(5GS)\".
[8] 3GPP TS 23.273: \"5G System (5GS) Location Services (LCS); Stage 2\".
[9] 3GPP TS 37.355: \"LTE Positioning Protocol (LPP)\".
[10] 3GPP TS 23.222: \"Common API Framework for 3GPP Northbound APIs\".
[11] 3GPP TS 33.122: \"Security aspects of Common API Framework (CAPIF) for
3GPP northbound APIs\".
[12] 3GPP TS 38.355: \"NR; Sidelink Positioning Protocol (SLPP); Protocol
Specification\".
[13] 3GPP TS 33.533: \"Security aspects of ranging based services and Sidelink
positioning\".
[14] 3GPP TS 23.032: \"Universal Geographical Area Description (GAD)\".
# 3 Definitions of terms and abbreviations
## 3.1 Terms
For the purposes of the present document, the terms given in TR 21.905 [1] and
the following apply. A term defined in the present document takes precedence
over the definition of the same term, if any, in TR 21.905 [1].
**Located UE:** A SL Reference UE of which the location is known or is able to
be known using Uu based positioning. A Located UE can be used to determine the
location of a Target UE using Sidelink Positioning.
**Network-based Operation:** Operation of Ranging/Sidelink Positioning with
the involvement of 5GC NFs for the service request handling and result
calculation.
**Positioning:** A functionality, which detects a geographical location and
optionally, velocity (of e.g. a mobile terminal).
**Ranging:** Refers to the determination of the distance between two UEs or
more UEs and/or the direction of one UE (i.e. Target UE) from another UE (i.e.
SL Reference UE) via PC5 interface.
**Ranging/SL Positioning Application Identifier:** A globally unique
identifier identifying a specific Ranging/SL Positioning application, which
can be mapped to a V2X service type or a ProSe identifier.
**Relative position:** An estimate of the UE position relative to other
network elements or relative to other UEs.
**Relative velocity:** An estimate of the UE velocity relative to another UE.
**SL Reference UE:** A UE, supporting positioning of target UE, e.g. by
transmitting and/or receiving reference signals for positioning, providing
positioning-related information, etc. using Sidelink.
NOTE 1: SL Reference UE is understood as \"Anchor UE\" in RAN WGs.
**Sidelink Positioning:** Positioning UE using PC5 to obtain absolute
position, relative position, or ranging information.
**SL Positioning Client UE:** A third-party UE, other than SL Reference UE and
Target UE, which initiates Ranging/Sidelink positioning service request on
behalf of the application residing on it.
NOTE 2: The SL Positioning Client UE does not have to support Ranging/Sidelink
positioning capability, but a communication between the SL Positioning Client
UE and SL Reference UE/Target UE has to be established, either via PC5 or via
5GC, for the transmission of the service request and the result.
**SL Positioning Server UE:** A UE offering method determination, assistant
data distribution and/or location calculation functionalities for Sidelink
Positioning and Ranging based service. It interacts with other UEs over PC5 as
necessary in order to determine Ranging/SL Position method, distribute
assistant data and calculate the location of the Target UE. Target UE or SL
Reference UE can act as SL Positioning Server UE if any of the functionalities
is supported.
**Target UE:** A UE whose distance, direction and/or position is measured with
the support from one or multiple SL Reference UEs using Sidelink in the
Ranging based service and Sidelink positioning.
**UE-only Operation:** Operation of Ranging/Sidelink Positioning in which the
service request handling and result calculation are performed by UE.
NOTE 3: For UE-only Operation, the communication among UEs are over PC5.
**User Info ID** : The User Info ID is configured for Ranging/SL Positioning
UE Discovery based on the policy of the HPLMN or via the Ranging/SL
Positioning application server that allocates it. The definition of values of
User Info ID is out of scope of this specification.
**Application Layer ID:** An identifier identifying a Ranging/Sidelink
Positioning-enabled UE within the context of a specific application. The
format of this identifier is outside the scope of 3GPP.
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in TR 21.905
[1] and the following apply. An abbreviation defined in the present document
takes precedence over the definition of the same abbreviation, if any, in TR
21.905 [1].
LPP LTE Positioning Protocol
RSPP Ranging/SL Positioning Protocol
# 4 Architecture model and concepts
## 4.1 General concept
Ranging based service provides the distance between two UEs or more UEs and/or
the direction of one UE (i.e. Target UE) from another UE (i.e. SL Reference
UE) via PC5 operations.
Sidelink Positioning provides absolute location, relative position, or Ranging
information of a UE by using PC5 for the positioning. A Located UE can be used
to determine the absolute location of a Target UE using Sidelink Positioning.
The operation of Ranging/Sidelink Positioning can be performed with Network-
assisted Operation, Network-based Operation or UE-only Operation:
\- In the Network-based Operation, 5GC NF(s) is involved for the service
request handling and result calculation.
\- In the UE-only Operation, the service request handling and result
calculation are performed by UE.
\- In the Network-assisted Operation, 5GC NF(s) is involved for the service
request handling and assist UE for the result calculation.
The Ranging/Sidelink Positioning service request can be initiated by a UE
(i.e. SL Positioning Client UE, Target UE, SL Reference UE), a 5GC NF, an LCS
Client or an AF.
When the direct Ranging/Sidelink positioning between the SL Reference UE and
Target UE cannot be supported, Ranging/Sidelink Positioning between a SL
Reference UE and a Target UE over PC5 may use assistance of another UE.
## 4.2 Architectural reference model
### 4.2.1 Non-roaming reference architecture
Figure 4.2.1-1 shows the high-level view of the non-roaming 5G System
architecture for Ranging based services and Sidelink Positioning with service-
based interfaces within the Control Plane.
Figure 4.2.1-1: Reference architecture for Ranging based services and Sidelink
positioning for non-roaming and same PLMN operation in SBI representation
Figure 4.2.1-2: Non-roaming reference architecture for Location Services with
ranging and Sidelink positioning in reference point representation
NOTE: The full 5GS architecture is defined in TS 23.501 [2].
### 4.2.2 Roaming reference architecture
Figure 4.2.2-1 shows the high-level view of the roaming 5G System architecture
for Ranging based services and Sidelink Positioning with service-based
interfaces within the Control Plane. In this figure, UE A use a subscription
of the HPLMN.
Figure 4.2.2-1: Reference architecture for Ranging based services and Sidelink
positioning for roaming and same PLMN operation
### 4.2.3 Inter-PLMN reference architecture
Figure 4.2.3-1 shows a reference architecture for Ranging based services and
Sidelink Positioning for Inter-PLMN non-roaming operation. In this case, the
UE A and UE B have subscriptions from different PLMNs, i.e. PLMN-A and PLMN-B
respectively.
Figure 4.2.3-1: Reference architecture for Ranging based services and Sidelink
positioning for inter-PLMN operations
Figure 4.2.3-2 shows a reference architecture for Ranging based services and
Sidelink Positioning for Inter-PLMN roaming operation. In this case, the UE A
and UE B have subscriptions from different PLMNs, i.e. PLMN-A and PLMN-B
respectively. UE A is roaming and registered to PLMN-C.
Figure 4.2.3-1: Reference architecture for Sidelink Positioning and Ranging-
based services for inter-PLMN operation with roaming
### 4.2.4 Reference points
**SR1:** The reference point between the Sidelink (SL) Positioning and Ranging
function in the UE and the SL Positioning/Ranging Server. This reference point
is out of scope of this specification. It may be used for the configuration
and application layer signalling.
**SR5:** The reference point between the Sidelink (SL) Positioning and Ranging
function in UEs. It is carried over PC5-U of the PC5 reference point.
**PC5:** The reference point between the UEs. It also supports the Sidelink
Positioning and Ranging operation defined by RAN WGs.
**N1:** In addition to the relevant functions defined in TS 23.501 [2] for N1,
in the case of Ranging/SL Positioning Service, it is also used to convey the
Ranging/SL Positioning policy and parameters (including service authorization)
from AMF to UE, and to convey the UE\'s Ranging/SL Positioning Capability from
UE to AMF.
**N2:** In addition to the relevant functions defined in TS 23.501 [2] for N2,
in the case of Ranging/SL Positioning Service it is also used to convey the
Ranging/SL Positioning policy and parameters (including service authorization)
from AMF to NG-RAN.
**NL10:** In addition to the relevant functions defined in TS 23.273 [8], in
the case of Ranging/SL Positioning Service, it used by LMF to get the location
of Located UE/Reference UE from GMLC using the Application Layer ID.
### 4.2.5 Service-based interfaces
**Nlmf:** In addition to the relevant services defined in TS 23.273 [8], if
the LMF support Ranging/SL Positioning service, it may be used to provide
service to other NFs related to it.
**Ngmlc:** In addition to the relevant services defined in TS 23.273 [8], if
the GMLC support Ranging/SL Positioning service, it may be used to get the
location of Located UE/Reference UE from GMLC using the Application Layer ID
in case of Sidelink Positioning and Ranging operation.
**Nudm:** In addition to the relevant services defined in TS 23.501 [2] for
Nudm, in the case of Ranging/SL Positioning service, services provided by UDM
are used to get the related subscription information to AMF during Initial
registration procedure or UE Configuration Update (UCU) procedure to inform
AMF subscription information has changed.
**Npcf:** In addition to the relevant services defined in TS 23.501 [2] for
Npcf, in the case of Ranging/SL Positioning service, services provided by
H-PCF are used to provide SL Positioning and Ranging Service related
parameters to V-PCF for UE and NG-RAN in the roaming case.
**Nudr:** In addition to the relevant services defined in TS 23.501 [2] for
Nudr, in the case of Ranging/SL Positioning service, services provided by UDR
are used to notify the PCF and the UDM of the update of the SL Positioning and
Ranging-based service related information.
**Namf:** In addition to the relevant services defined in TS 23.501 [2] for
Namf, in the case of Ranging/SL Positioning service, services provided by AMF
are consumed by PCF to provide the Ranging/SL Positioning service related
parameters for the UE and the NG-RAN to AMF, and to enable the AMF create or
update UE context related to Ranging/SL Positioning service.
**Nnef:** In addition to the relevant services defined in TS 23.501 [2] for
Nnef, in the case of Ranging/SL Positioning service, services provided by NEF
are used by the Application Server to update Ranging/SL Positioning service
related information of 5GC.
**Nnrf:** In addition to the relevant services defined in TS 23.501 [2] for
Nnrf, in the case of Ranging/SL Positioning service, services provided by NRF
are used to discover the PCF that supports Ranging/SL Positioning.
## 4.3 Functional entities
### 4.3.1 UE
In addition to the functions defined in TS 23.287 [6] and TS 23.304 [7], the
UE may support the following functions:
\- Reporting the following Ranging/SL Positioning Capabilities to 5GC over the
N1 reference point:
\- Capability of supporting Ranging/SL Positioning over PC5;
NOTE: Based on Ranging/SL Positioning control, a UE capable of Ranging/SL
Positioning may take different roles in the operation, e.g. Target UE, SL
Reference UE, Located UE.
\- Capability of supporting SL Positioning Server UE over PC5.
\- Procedures for Ranging/SL Positioning over PC5.
\- Procedures to Network based SL Positioning, and Network assisted SL
Positioning.
\- Procedures to UE-only SL Positioning.
\- Procedures to Ranging/SL Positioning service exposure.
\- Indicating UE Policy Provisioning Request in UE Policy Container for UE
triggered Ranging/SL Positioning Policy provisioning, which requests one or
multiple types of policies/parameters as listed below:
\- Policy/parameters for Ranging/SL Positioning over PC5;
\- Policy/parameters for Located UE;
\- Policy/parameters for Target UE in addition to the functions defined in TS
23.273 [8] clause 4.3.5;
\- Policy/parameters for SL Positioning Client UE;
\- Policy/parameters for SL Positioning Server UE.
\- Receiving the Ranging/SL Positioning Policy from 5GC over N1 reference
point.
\- Configuration of parameters for Ranging/SL Positioning over PC5. These
parameters can be pre-configured in the UE, or, if in coverage, provisioned or
updated by signalling over the N1 reference point from the PCF in the HPLMN or
over SR1 reference point from the Ranging/SL Positioning Application Server.
### 4.3.2 PCF
In addition to the functions defined in TS 23.501 [2] and TS 23.503 [4], the
PCF includes functions to provision the UE with necessary policies and
parameters to use Ranging/SL Positioning services, as part of the UE
Ranging/SL Positioning Policy information as defined in TS 23.503 [4] clause
4.2.2:
\- Authorization policy and parameters for Ranging/SL Positioning over PC5;
\- Authorization policy and parameters for Network based SL Positioning, and
Network assisted SL Positioning;
\- Authorization policy and parameters for Ranging/SL Positioning service
exposure.
The PCF may update the Ranging/SL Positioning policy and parameters to the UE
under certain conditions.
When receiving the Ranging/SL Positioning Capability in
Npcf_UEPolicyControl_Create Request from the AMF or when receiving the updated
subscription data from UDR, the PCF generates the PC5 QoS parameters for RSPP
transport over PC5 reference point used by NG-RAN corresponding to a UE as
defined in clause 5.4.2 of TS 23.287 [6].
### 4.3.3 AMF
In addition to the functions defined in TS 23.287 [6] and TS 23.304 [7], the
AMF performs the following functions:
\- Select a PCF supporting Ranging/SL Positioning Policy/Parameter
provisioning based on indication of Ranging/SL Positioning Capability as part
of the \"5GMM capability\" in the Registration Request.
\- Store the Ranging/SL Positioning Capability.
\- Select the LMF supporting Ranging/SL positioning and forward the Ranging/SL
Positioning Capability of Target UE to LMF.
\- Select a GMLC supporting Ranging/SL positioning and request the GMLC for
Ranging/SL Positioning result.
\- Forward the Ranging/SL Positioning Capability to PCF.
\- Obtain from UDM the subscription information related to Ranging/SL
positioning and store them as part of the UE context data.
\- Provision the NG-RAN with indication about the UE authorization status
about Ranging/SL Positioning over PC5.
\- Provision the NG-RAN with PC5 QoS parameters related to RSPP transport over
PC5.
### 4.3.4 UDM
In addition to the functions defined in TS 23.287 [6] and TS 23.304 [7], the
UDM performs the following functions:
\- Subscription management for Ranging/SL Positioning over PC5.
\- Subscription management for Network based SL Positioning, and Network
assisted SL Positioning.
\- Subscription management for Ranging/SL Positioning service exposure.
### 4.3.5 UDR
In addition to the functions defined in TS 23.287 [6] and TS 23.304 [7], the
UDR performs the following functions:
\- Stores Ranging/SL Positioning service parameters.
\- Stores the mapping between Application Layer ID and GPSI provisioned by AF
in application data.
### 4.3.6 NRF
In addition to the functions defined in TS 23.287 [6] and TS 23.304 [7], the
NRF performs the following functions:
\- PCF discovery by considering Ranging/SL Positioning Capability.
\- LMF discovery by considering Ranging/SL Positioning Capability.
### 4.3.7 NEF
In addition to the functions defined in TS 23.287 [6] and TS 23.304 [7], the
NEF supports the following:
\- To enable AFs to provide service specific information to the 3GPP network,
the NEF supports additional service parameters for Ranging/SL Positioning
policy which can use the description of the clause 6.2.5 in TS 23.304 [7].
\- Interacting with GMLC for AFs and UEs in Ranging/SL Positioning procedures
to perform 5GC-MT-LR (e.g. Forward location request from the AF including GPSI
or Application Layer ID).
\- Update the UE subscription data stored in the UDR with Onboarding Enrolment
Information.
\- Provide the GMLC with the GPSI of the UE based on Application Layer ID
mapping information stored in UDR application data.
\- Provide the GMLC with the Application Layer ID based on GPSI of the UE
mapping information stored in UDR application data.
\- Request UDR to store as application data the GPSI and Application Layer ID
mapping information provisioned by AF.
### 4.3.8 LMF
In addition to the functions defined in TS 23.273 [8], the LMF supports the
following:
\- The Network based SL Positioning and Network assisted SL Positioning;
\- Trigger Ranging/Sidelink positioning.
\- Exchange the Ranging/Sidelink Positioning capability.
\- Exchange the Ranging/Sidelink Positioning assistant data.
\- Exchange Ranging/Sidelink positioning signal measurement data/result.
\- Support of receiving stored Ranging/Sidelink Positioning capability from
AMF and support of providing updated Ranging/Sidelink Positioning capability
to AMF.
\- Determine Ranging/SL positioning method based on the positioning QoS
requirement, UE's Ranging/Sidelink Positioning capability.
\- Determine the required QoS for Located UE positioning.
\- In case if the scheduled location time is absent, optionally determine the
same scheduled location time for the Ranging/SL positioning and the
positioning of the Located UE(s).
\- Determine the location of the Target UE based on the Ranging/SL positioning
measurement data or result reported by Target UE and the location of Located
UE(s).
\- Interaction with GMLC to get the location of Located UE/SL Reference UE
using the Application Layer ID.
\- Delivering the Ranging/Sidelink positioning service request/response for
the Ranging service exposure to UE.
### 4.3.9 GMLC
In addition to the functions defined in TS 23.273 [8], the GMLC supports the
following:
\- enable trusted AFs and NFs to perform MT-LR by accessing GMLC directly with
additional service parameters for Ranging/SL Positioning.
\- enable AFs and NFs to perform MT-LR by accessing GMLC through NEF with
additional service parameters for Ranging/SL Positioning.
\- determine the serving AMF instances for the UEs involved in the Ranging/SL
Positioning request and forward the request to respective serving AMF.
\- receive response from AMF and event reports from and return Ranging/SL
Positioning result to NFs and AFs.
\- perform Application Layer ID to GPSI or GPSI to Application Layer ID
resolution by querying NEF.
### 4.3.10 AF
In addition to the functions defined in TS 23.501 [2], the AF supports the
following:
\- provision mapping between Application Layer ID and GPSI to UDR in
application data.
## 4.4 Location Results
### 4.4.1 General
Location results that may be obtained for a target UE are summarized here and
defined in more detail in TS 23.032 [14].
### 4.4.2 Range and Direction
A range refers to a straight line distance between the target UE and another
UE, such as another target UE, a Located UE or a SL Reference UE. A direction
refers to a direction to the target UE from another UE, such as another target
UE, a Located UE or a SL Reference UE. A direction may also refer to a
direction from the target UE to another UE, such as another target UE, a
Located UE or a SL Reference UE.
### 4.4.3 Relative Location
A relative location refers to the location of a target UE relative to a
network element or another UE. The relative location can be in 2 dimensions or
3 dimensions.
### 4.4.4 Relative Velocity
A relative velocity refers to the velocity of a target UE relative to another
UE. A relative velocity of a target UE includes a radial component equal to a
rate of change of a range between the target UE and the other UE and a
transverse component at right angles to the radial component.
# 5 High level functionality and features
## 5.1 Authorization and Provisioning for Ranging/SL positioning service
### 5.1.1 Authorisation and policy/parameter provisioning to UE
#### 5.1.1.1 General
In 5GS, the parameters for Ranging/SL positioning service may be made
available to the UE in following ways:
\- provisioned in the ME; or
\- configured in the UICC; or
\- provisioned in the ME and configured in the UICC; or
\- provided or updated by the Ranging/SL positioning Application Server via
PCF and/or PC1 reference point; or
\- provided or updated by the PCF to the UE.
The UE shall apply any given parameter in the following priority order:
\- provided or updated by the PCF (regardless whether the parameter is
determined by the PCF itself or provided by the Ranging/SL positioning
Application Server to the PCF), if available, otherwise;
\- provided or updated by the Ranging/SL positioning Application Server via
SR1 reference point, if available, otherwise;
\- configured in the UICC, if available, otherwise;
\- provisioned in the ME, if available.
The parameters provided or updated by the Ranging/SL positioning Application
Server via SR1 reference point may need to be complemented with configuration
data from other sources listed above.
NOTE: The Ranging/SL positioning Application Server can provision the same
Ranging/SL positioning parameters via 5GC or directly to the UE via SR1
reference point, and can revoke (e.g. delete) the Ranging/SL positioning
parameters via 5GC in order for the provisioning via SR1 reference point to
take effect.
The basic principles of service authorization and provisioning for Ranging/SL
positioning service are as follows:
\- The PCF in the HPLMN may configure a list of PLMNs where the UE is
authorized to use Ranging/SL positioning.
\- The UE is authorized to use Ranging/SL positioning only in the PLMN(s)
indicated by the PCF, and the equivalent PLMNs thereof.
\- The PCF in the HPLMN merges authorization information from home and other
PLMNs and provides the UE with the final authorization information.
\- The PCF in the VPLMN or HPLMN may revoke the authorization (via H-PCF when
roaming) at any time by using the UE Configuration Update procedure for
transparent UE Policy delivery procedure defined in clause 4.2.4.3 of TS
23.502 [3].
\- The Ranging/SL positioning Policy/parameters provisioning to UE is
controlled by the PCF and may be triggered by UE. The PCF provisions one or
more of the Policy/parameters as specified in clause 5.1.1.2.
#### 5.1.1.2 Policy/Parameter provisioned to UE
The following sets of information for Ranging/SL positioning service is
provisioned to the UE:
\- When the UE is served by NG-RAN, the PLMNs in which the UE is authorized to
perform Ranging/SL positioning service over PC5 reference point for acquiring
relative distance, relative direction, high accuracy relative distance and
high accuracy relative direction.
\- When the UE is not served by NG-RAN, indicates whether the UE is authorized
to perform Ranging/SL positioning service over PC5 reference point for
acquiring relative distance, relative direction, high accuracy relative
distance and high accuracy relative direction.
\- The mapping between Ranging/SL positioning services (e.g. ProSe
identifiers, V2X service types) and Ranging/SL positioning QoS parameters as
defined in clause 5.7.2.
\- The mapping between Ranging/SL positioning services (e.g. ProSe
identifiers, V2X service types) and PQI values for RSPP transport QoS as
defined in clause 5.7.3.
\- The authorized Ranging/SL Positioning role per PLMN, e.g. Target UE, SL
Reference UE, Located UE, SL Positioning Client UE, and SL Positioning Server
UE.
\- When the UE is not served by NG-RAN, indicates the authorized Ranging/SL
positioning role, e.g. Target UE, SL Reference UE, Located UE and SL
Positioning server UE.
\- When the UE is served by NG-RAN and when Network-based Operation is not
supported by the 5GC network, whether it is allowed to use UE-only operation
to perform Ranging/ SL Positioning.
### 5.1.2 Authorisation and policy/parameter provisioning to NG-RAN
The \"Ranging/Sidelink Positioning authorised\" information and the RSPP
transport QoS parameters shall be provided to the NG-RAN node for scheduled
resource allocation mode resource management.
The \"Ranging/Sidelink Positioning authorised\" information includes one or
more of the following:
\- whether the UE is authorized to act as a SL Reference UE;
\- whether the UE is authorized to act as a Target UE;
\- whether the UE is authorized to act as a Located UE;
\- whether the UE is authorized to act as a SL Positioning Server UE.
The RSPP transport QoS parameters include parameters defined in clause 5.7.3,
which are generated by the PCF and are provided to the AMF when receiving the
Ranging/Sidelink Positioning Capability in Npcf_UEPolicyControl_Create Request
from the AMF or when receiving the updated subscription data from UDR.
During registration, the UE includes the Ranging/Sidelink Positioning
Capability as defined in clause 4.3.1 as part of the \"5GMM capability\" in
the Registration Request message. AMF determines whether the UE is authorised
to use Ranging based services and Sidelink positioning based on UE\'s
Ranging/Sidelink Positioning Capability and the Ranging/Sidelink Positioning
Service Authorisation included in the subscription data received from UDM. The
AMF stores the Ranging/Sidelink Positioning Capability in the UE context.
If the UE is authorised to use Ranging based services and Sidelink
positioning, the \"Ranging/Sidelink Positioning authorised\" information and
the RSPP transport QoS parameters shall be provided from the AMF to the NG-RAN
node in a NGAP message during Registration procedure, Service Request
procedure and N2 Handover procedure, and from source NG-RAN node to target NG-
RAN node over Xn during Xn Handover procedure as defined in clause 6.3.
## 5.2 Ranging/Sidelink Positioning UE Discovery & Selection
### 5.2.1 General
Both Model A and Model B discovery as defined in clause 6.3.2 of TS 23.304 [7]
are supported for the 5G ProSe capable UEs discovery (including commercial and
public safety use cases). During Ranging/SL Positioning UE direct discovery,
the discovery type indicates \"Ranging/Sidelink Positioning\"; During
Ranging/SL Positioning Group Member Discovery, the Application Layer Group ID
indicates a Ranging/Sidelink Positioning group that the UE belongs to.
NOTE: The discovery type and content value are designed for Ranging/Sidelink
Positioning UE discovery that depends on stage 3.
Procedures for V2X communication over PC5 reference point as defined in TS
23.287 [6] are supported for the V2X capable UEs discovery. When unicast mode
V2X communication procedure as defined in clause 6.3.3 of TS 23.287 [6] is
used, the Service Type in Layer-2 link establishment procedure indicates
\"Ranging/Sidelink Positioning\"; when broadcast mode or groupcast mode V2X
communication procedure as defined in clause 6.3.1 or clause 6.3.2 of TS
23.287 [6] is used, Service Type indicates \"Ranging/Sidelink Positioning\".
The role(s) of the discovered UE (e.g. Target UE, SL Reference UE, SL
Positioning Server UE, Located UE) is (are) included in discovery message (for
5G ProSe capable UE) and unicast link establishment messages (for V2X capable
UE) as RSPP specific meta data. More details on this and other information
conveyed during discovery can be found in clause 6.4.
The procedures for Ranging/Sidelink Positioning UE Discovery & Selection are
defined in clause 6.4.
### 5.2.2 Located UE Discovery & Selection
When Sidelink Positioning is applied for Target UE in a 5GC-MO-LR or 5GC-MT-LR
procedure, Located UE(s) is discovered and selected:
\- When LMF determines to apply Sidelink Positioning for Target UE, LMF
triggers the Target UE to perform discovery of the Located UE.
\- When the Target UE determines to apply Sidelink Positioning, the Target UE
triggers the discovery of the Located UE.
The LMF may be pre-configured with the list of candidate Located UEs including
e.g. the capability, stationary information and location information of the
Located UE(s), e.g. RSU or the operator deployed Located UE. The LMF may
provide to the Target UE a list of candidate Located UE(s) as assistance data.
The discovery of Located UEs follows the same principles as specified in
clause 5.2.1. The UE can indicate its role \"Located UE\" in its list of
supported roles during discovery, if it is authorized to be a Located UE in a
given PLMN as per the Authorization and Provisioning for Ranging/SL
positioning service as specified in clause 5.1.
Editor\'s note: Privacy aspects of sharing the location of a Located UE (e.g.
to any Target UE) and exposing information about such privacy aspects during
discovery (e.g. to facilitate Located UE selection by a Target UE) needs to be
aligned with SA WG3.
A Target UE may discover and select one or more Located UEs to be used in the
Ranging/SL positioning procedures as specified in clauses 5.3 to 5.5.
Multiple candidate Located UEs may be discovered, in that case, the Located
UE(s) is selected from the candidate Located UE list. The Located UE(s) is
selected based on:
\- Candidate list of Located UE(s), if available
\- Capabilities of the candidate Located UE(s), e.g. the supported Sidelink
Positioning methods
\- The required positioning QoS
\- Whether the serving PLMN of candidate Located UE(s) is same with serving
PLMN of Target UE
When LMF determines SL positioning for target UE and trigger the discovery of
the Located UE, LMF can decide that LMF or target UE selects Located UEs. If
the decision is LMF selecting Located UEs, Target UE sends the multiple
discovered candidate Located UEs to the LMF for the selection. After the LMF
determines the selected Located UE(s), the LMF sends the selected Located
UE(s) to the Target UE.
In this release of the specification, for UE Positioning assisted by Sidelink
Positioning and involving 5GC, the Target UE shall discover and select Located
UEs that are in the same serving PLMN of the Target UE as described in clause
5.5.1.
LMF needs to provide located UE for discovery when AF request ranging between
two UEs. Additionally, LMF may be provisioned with Located UEs that may be
sent to target UE as candidate list of located UEs.
NOTE: The role of being \"Located UE\" is dynamic and can change over time, in
particular if the Located UE is moving. Hence, the discovery results need to
be refreshed if there is a (significant) delay between discovery and
initiating of a ranging procedure with a discovered Located UE. How often this
is done is up to UE implementation.
### 5.2.3 SL Positioning Server UE Discovery & Selection
SL Positioning Server UE Discovery & Selection is performed by the Target UE,
when it meets one or more of the following criteria:
\- The Target UE and the discovered SL Reference UEs are currently not served
by a network supporting Ranging/SL Positioning (e.g. because they are out-of-
coverage or the serving network does not support Ranging/SL Positioning). The
Ranging/SL Positioning Support is configured in the AMF according to network
capabilities. If AMF receives Ranging/SL Positioning Capability from UE, AMF
may include Ranging/SL Positioning Support indicator in the Registration
Accept message to indicate that the serving network supports Ranging/SL
Positioning. SL Reference UE and Target UE may indicate whether its serving
network supports Ranging/SL Positioning or not to each other. The indication
of serving network not supporting Ranging/SL Positioning can be reused to
notify each other when UE has no NAS connection available.
Editor\'s note: Need to determine if such indication is provided during
discovery or capability exchange, and whether or not it requires RAN WG2
involvement.
\- The Target UE is not capable of performing SL Positioning Server UE
functionalities.
\- The SL Reference UEs are not capable of performing SL Positioning Server UE
functionalities.
The discovery of SL Positioning Server UE follows the same principles as
specified in clause 5.2.1. The UE can indicate its role "SL Positioning Server
UE" in its list of supported roles during discovery, if it is authorized to be
a SL Positioning Server UE in a given PLMN as per the Authorization and
Provisioning for Ranging/SL positioning service as specified in clause 5.1.
The Target UE shall discover and select a SL Positioning Server UEs that are
in the same or different serving PLMN of the Target UE and the SL Reference
UE(s).
Editor\'s note: Other criteria for the selection of SL Positioning Server UE
is FFS, and can be coordinated with RAN WGs.
## 5.3 Ranging/SL Positioning control
### 5.3.1 General
Any UE supporting Ranging/SL Positioning, e.g. Target UE, SL Reference UE,
Sidelink Positioning Server UE, shall have a Ranging/SL Positioning layer,
which is above the AS layer and handles service requests received from
application layer to control the Ranging/SL Positioning operation. The
Ranging/SL Positioning layer provides the support of authorization and
provisioning as described in clause 5.1, the UE discovery and selection as
described in clause 5.2, the Ranging/SL Positioning Protocol (RSPP) defined in
TS 38.355 [12], and the protocols between UE and LMF for Ranging/SL
Positioning. Ranging/SL Positioning layer supports the Ranging/SL Positioning
service sessions for one time or periodic ranging, ranging for distance or
direction measurement or both. The Ranging/SL Positioning layer provides the
ranging parameters to AS layer, including one time or periodic ranging,
ranging for distance or direction measurement or both.
NOTE 1: The Ranging/SL Positioning Protocol (RSPP) mention above corresponds
to Sidelink Positioning Protocol (SLPP) in RAN.
Editor\'s note: The protocol used between UE and LMF will be decided by RAN
and could be an extension of LPP, a new protocol or both.
The RSPP is exchanged over SR5 over PC5-U reference point between UEs (i.e.
Target UE, SL Reference UE, Located UE and SL Positioning Server UE) to manage
the Ranging/SL Positioning service sessions between UEs or among a group of
UEs. Multiple UEs may be involved in a single Ranging/Sidelink Positioning
session. When the Ranging/SL Positioning service session is among a group of
UEs, the RSPP may provide group related identifier information for the PC5
transport layer handling. The transport of the RSPP over PC5-U is specified in
clause 5.3.2. The RSPP supports the following functions:
\- exchange the Ranging/Sidelink Positioning capability;
\- exchange the Ranging/Sidelink Positioning assistant data;
\- exchange Ranging/Sidelink positioning measurement data/result.
NOTE 2: Group management is out-of-scope of this specification.
NOTE 3: RSPP signalling negotiation determines whether measurement results or
Ranging/Sidelink Positioning results are exchanged over the SR5.
NOTE 4: The Ranging/Sidelink positioning supports the scheduled location time
feature.
A LMF shall be involved when at least one of the Target UE and the SL
Reference UE are in the network coverage and the serving network is capable to
support ranging functionalities. The details of Network based Ranging/SL
Positioning operation, and Network assisted SL Positioning are described in
detail in clause 5.5. When Network assisted Ranging/SL Positioning is used,
the use of RSPP is necessary for Ranging/SL Positioning control.
A SL Positioning Server UE can be discovered and selected for result
calculation, method determination, assistant data distribution and SL
Reference UE selection in case of out-of-coverage or for UE-only Operation if
the serving network does not support Ranging/SL Positioning. If the LMF
capable for Ranging/SL Positioning is reachable by Target UE and/or SL
Reference UE, the LMF can still decide that a SL Positioning Server UE, Target
UE or SL Reference UE executes the result calculation. A SL Positioning Server
UE can be co-located with a Target UE or SL Reference UE.
Editor\'s note: Functionalities of the SL Positioning Server UE will be
determined by RAN WGs.
### 5.3.2 Transport of RSPP over PC5
#### 5.3.2.1 General
Depending on type of the UE (e.g. V2X capable or 5G ProSe capable), V2X
Communication procedures as defined in TS 23.287 [6] or 5G ProSe Direct
Communication procedures as defined in TS 23.304 [7] are used for the RSPP
transport between UEs over PC5:
\- For V2X capable UEs, policies and parameters defined in TS 23.287 [6]
clause 5.1.2.1 are used to determine the corresponding transport
configurations for the RSPP signalling. The V2X service type shall take the
value(s) defined for \"Ranging/SL Positioning Protocol\" in corresponding
format in different regions, e.g. ITS-AID, PSID, or AID as described in TS
23.287 [6] clause 3.1.
\- For 5G ProSe capable UEs, policies and parameters defined in TS 23.304 [7]
clause 5.1.3.1 applies. To determine the parameters, the ProSe services (i.e.
ProSe identifiers) shall take the value(s) defined for \"Ranging/SL
Positioning Protocol\" in corresponding format described in TS 23.304 [7]
clause 3.1.
NOTE: For a UE that is both V2X capable and 5G ProSe capable, separate RSPP
sessions will be used, i.e. no V2X and 5G ProSe cross communication is
supported.
Depends on the policy and parameter configuration on the UE, the RSPP may be
transported using different communication mode over PC5 (i.e. broadcast mode,
groupcast mode or unicast mode), with associated QoS configurations.
Procedures defined in clause 6.3 of TS 23.287 [6] and clause 5.3 of TS 23.304
[7] are used to support the corresponding communicated modes.
RSPP messages are common for V2X capable UEs and 5G ProSe capable UEs. PC5-U
is used as the transport layer for RSPP. The RSPP message is carried using
\"Non-IP\" PDCP SDU type for V2X capable UEs as defined in clause 6.1.1 of TS
23.287 [6], and \"Unstructured\" PDCP SDU type for 5G ProSe capable UEs as
defined in clause 6.1.2.2 of TS 23.304 [7].
#### 5.3.2.2 Identifiers used for RSPP transport over PC5
As defined in clause 5.6.1 of TS 23.287 [6] and clause 5.8.2 of TS 23.304 [7],
multiple identifiers need to be determined for the PC5 operations, depending
on the communication mode used.
For broadcast mode, the destination Layer-2 ID and source Layer-2 ID(s) are
chosen based on UE configuration, as defined in clause 5.6.1.2 of TS 23.287
[6] and clause 5.8.2.2 of TS 23.304 [7].
For groupcast mode, the RSPP may provide the group identifier information. The
UE converts the provided group identifier information to a destination Layer-2
ID. If the RSPP does not provide the group information, the UE determines the
destination Layer-2 ID based on configuration of the mapping between V2X
Service type or ProSe Identifier and Layer-2 ID. Details of the identifier
determination are described in clause 5.6.1.3 of TS 23.287 [6] and clause
5.8.2.3 of TS 23.304 [7].
For unicast mode, the UE needs to establish a unicast link to the peer UE. To
support the mechanisms as defined in clause 5.6.1.4 of TS 23.287 [6] and
clause 5.8.2.4 of TS 23.304 [7], the RSPP needs to provide the Application
Layer IDs of the UE and the peer UE, and to be used in the PC5 unicast link
establishment procedure. When the Application Layer ID changes, the Layer-2
IDs used for the unicast link shall also be changed.
NOTE: The Application Layer ID to be used is determined by RSPP layer
signalling.
Based on privacy configurations, the UE may periodically change its source
Layer 2 ID, as defined in TS 23.287 [6] and TS 23.304 [7].
### 5.3.3 Protocols between UE and LMF
Editor\'s note: This clause defines protocols between UE and LMF. The protocol
used between UE and LMF will be decided by RAN and could be an extension of
LPP, a new protocol or both.
## 5.4 Void
## 5.5 UE Positioning assisted by Sidelink Positioning and involving 5GC
### 5.5.1 General
This feature is used to estimate the location of a Target UE with the
assistance of the network by using the location of one or more Located UEs and
the distance and/or direction between the Target UE and the Located UE(s) ,
i.e. the 5GC-MO-LR and 5GC-MT-LR services. For location service requests for
relative positioning/range/direction between two or more UEs, i.e. SL-MO-
LR/SL-MT-LR, the principles are described in clause 5.6.
For Sidelink Positioning and Ranging, UE assisted mode, UE based mode or
standalone mode can be used to estimate the distance and/or direction between
the UE and the Located UE(s). These modes are the same as those defined in TS
23.273 [8].
UE assisted mode, UE based mode or Network based positioning can be used to
estimate the location of the Located UE as specified in TS 23.273 [8].
When 5GC is involved for Sidelink Positioning, there can be Network based
Operation for Sidelink Positioning (see clauses 5.5.2, 5.5.3) and Network-
assisted Operation for SL Positioning (see clauses 5.5.4, 5.5.5). When 5GC is
not involved for Sidelink Positioning there may be UE-only Operation for
Sidelink Positioning (see clause 5.11).
The Network based SL Positioning and Network-assisted SL Positioning each has
two cases:
\- When the Target UE can establish a NAS signalling connection (see clauses
5.5.2, 5.5.4); or
\- When the Target UE cannot establish a NAS signalling connection (see
clauses 5.5.3, 5.5.5).
In this Release, UE Positioning using SL Positioning involving 5GC is only
supported when Target UE and Located UE are registered in the same PLMN i.e.
no support for inter PLMN UE Positioning using SL Positioning when the Target
UE and Located UE are registered in different PLMNs. Roaming is supported when
Target UE and Located UE are registered in the same PLMN, e.g. Target UE is
registered in a VPLMN and Located UE is registered in its HPLMN.
### 5.5.2 Network based SL Positioning for UE with NAS connection
A UE with a NAS connection is in RM-REGISTERED state. The UE can enter CM-
Connected state by performing UE triggered Service Request for 5GC-MO-LR or
performing Network triggered Service Request for 5GC-NI-LR or 5GC-MT-LR. As
the Target UE can establish a NAS signalling connection with the AMF, the
functionality specified in TS 23.273 [8] for location services can be reused
including e.g. 5GC-MO-LR, 5GC-MT-LR and 5GC-NI-LR with the additional
functionality captured in this clause.
NOTE 1: Target UE can establish a NAS signalling connection directly or
indirectly via a ProSe L2 UE-to-Network Relay.
\- The Location Service is triggered via the AMF serving the Target UE. The
location request comes either from an AF/external client via the GMLC, a 5G
NF, or the Target UE.
\- The LTE positioning protocol (LPP) as specified in TS 37.355 [9] is used
between the Target UE and the LMF. When LCS procedures are used to estimate
the location of the Located UE, LPP is used between Located UE and LMF.
Editor\'s note: RAN WGs will determine whether and what enhancements and the
subset functionalities of LPP are needed to support Network based SL
positioning including an 5GC-MT-LR, 5GC-MO-LR and 5GC-NI-LR.
\- Either the Target UE or LMF determines if UE Positioning using SL
positioning will be applied, if 5GC-MO-LR/5GC-MT-LR service is triggered. When
LMF determines that UE Positioning using SL positioning is used, LMF may
trigger the Target UE to perform the discovery of Located UE(s).
\- The Target UE discovers Located UE(s) for UE Positioning using SL
positioning. Optionally, to assist the Target UE the LMF may provide to the
Target UE a list of candidate Located UE(s). In this case the LMF maintains
the candidate list of Located UE(s) including e.g. the capability and location
information of the Located UE(s). The Target UE selects the Located UE(s), and
reports the UE identity i.e. Application Layer ID of the selected Located
UE(s) to LMF.
\- The Target UE and Located UE(s) perform Ranging/SL positioning. The Target
UE includes the UE identity i.e. Application Layer ID of the Located UE(s) to
the LMF together with the Ranging measurement data or estimation result. The
LMF may interact with GMLC to get the location of Located UE.
Editor\'s note: The security impact will be coordinated with SA WG3.
\- The LMF uses the location of Located UE(s) together with the Ranging/SL
positioning measurement data or estimation results reported by Target UE and
optionally also by Located UEs to estimate the location of the Target UE.
\- LMF may either determine the absolute location of the Target UE in
geographic coordinate or local coordinate expressed by a coordinate ID. For
the latter case, Coordinate ID may be provided by LCS client or AF and used
for Located UE selection by the Target UE. Coordinate ID should be considered
for Located UE selection if Coordinate ID is received from LMF to determine
the Target UE location in local coordinates.
\- In case the location of Located UE(s) is not known, the LMF interacts with
GMLC a required QoS to get the location of Located UE. The Ranging/SL
positioning and the positioning of the Located UE(s) can be scheduled with the
same time using the scheduled location time, as specified in TS 23.273 [8], to
improve the Target UE positioning accuracy.
NOTE 2: The LMF may need to compensate the time difference of the positioning
of Target UE and Located UE with additional information, e.g. velocity.
\- The LMF provides the UE location estimate to the Target UE over LPP, or to
the AMF, and AMF forwards the UE location to the GMLC, or to the 5GC NF
according to legacy functionality.
### 5.5.3 Network based SL positioning for UE without NAS connection
When Target UE cannot establish the NAS connection with AMF due to the Target
UE being out of coverage and at least one of the discovered Located UEs can
establish NAS connection for 5GC-MO-LR, the following principles are applied:
NOTE 1: 5GC-MT-LR is not applicable in this release of the specification.
\- The Target UE performs the Located UE\'s discovery and selection.
\- The Target UE and Located UE(s) perform Ranging/SL positioning.
\- The Target UE selects at least one of the Located UEs that can use SL-MO-LR
service for SL Positioning.
\- The Target UE may transmit its ranging measurement data/results to the
Located UE(s).
\- Each Located UE that can establish the NAS connection may report the
Ranging/SL positioning measurement data or result and the routing identifier
from Target UE to the LMF via the serving AMF of the Located UE. This may
include ranging measurement data/results received from the Target UE. The
endpoints for LPP messages are the LMF and the Located UE(s).
NOTE 2: The routing identifier indicates an LMF that manages the Target UE
positioning, and also used to assist the LMF in identifying the Target UE
positioning, as defined in clause 6.3.1 of TS 23.273 [8].
\- The LMF may use the received information (i.e. Ranging/SL positioning
measurement or estimation result with the same routing identifier) and the
location of Located UE(s) to calculate the location of the Target UE, and
provide the resulting location via the Located UE to the Target UE.
\- If a LMF is aware of multiple Located UEs associated with the same Target
UE based on the same routing identifier, it may perform the calculation using
all information from these Located UEs.
\- The LMF may use the received information (i.e. Ranging/SL positioning
measurement data/result and the same routing identifier) and the location of
Located UE(s) to calculate the location of the Target UE, and provide the
resulting location via the Located UE that initiates the 5GC-MO-LR procedure
to the Target UE. In case the LMF has the Target UE context, the LMF may
provide the resulting location via the GMLC to the LCS Client or AF as
specified in TS 23.273 [8] clause 6.3. In case the UE context was deleted,
then this functionality cannot be performed.
Editor\'s note: Security aspects require confirmation from SA WG3.
### 5.5.4 Network-assisted SL Positioning for UE with NAS connection
For Network-assisted SL Positioning for UE with NAS connection, the procedure
is similar to that of the Network based SL Positioning for UE with NAS
connection (in clause 5.5.2), with the following exceptions:
\- The LMF may decide to choose a SL Positioning Server UE, e.g. Target UE, or
Located UE, for result calculation, as described in clause 5.3.1.
\- The LMF may provide assistance information to the SL Positioning Server UE
to assist the Sidelink Positioning result calculation.
Editor\'s note: The contents of the assistance information will be defined
based on RAN WG conclusions.
### 5.5.5 Network-assisted SL Positioning for UE without NAS connection
For Network-assisted SL Positioning for UE without NAS connection, the
procedure is similar to that of the Network based SL Positioning for UE
without NAS connection (in clause 5.5.3), with the following exceptions:
\- The LMF may decide to choose a SL Positioning Server UE, e.g. Located UE,
for result calculation, as described in clause 5.3.1.
\- The LMF may provide assistance information to the SL Positioning Server UE
to assist the Sidelink Positioning result calculation.
Editor\'s note: The contents of the assistance information will be defined
based on RAN WG conclusions.
## 5.6 Ranging/SL Positioning service exposure
### 5.6.1 General
Ranging/SL Positioning service can be exposed to the authorized SL Positioning
Client UE, 5GC NF or AF to obtain the relative position or distance/direction
result between two or more UEs capable of Ranging/SL Positioning.
Ranging/SL Positioning service also can be used by the authorized 5GC NF, AF
or the LCS client to obtain the absolute position of Target UE if the 5GC NF,
AF or the LCS client determines that Ranging/SL Positioning is applicable.
The Ranging/SL Positioning service request includes the identifiers of the two
or more UEs. When the service exposure is via 5GC, the GMLC will translate the
target UE\'s identifiers into SUPI. When the service exposure is via PC5 or
through 5GC U-plane, the identifiers can be Ranging/SL Positioning application
specific Application Layer IDs.
The request may include the required QoS, the required location results (e.g.
absolute locations, relative locations or distances and/or directions related
to the UEs).
The service request may further include periodic or trigger event parameters,
e.g. the time interval between successive location reports and the total
number of reports, the trigger events, the duration of event reporting, the
minimum and maximum time intervals between successive event reports, the
maximum event sampling interval, whether location estimates shall be included
in event reports, and whether only one location report is required or more
than one. Trigger events can be;
\- the relative position/distance between at least one pair of UEs of the
indicated UEs is less than the threshold;
\- the relative position/distance between at least one pair of UEs of the
indicated UEs exceeds the threshold;
\- the relative positions/distances between all UEs are less than the
threshold; or
\- the relative positions/distances between all UEs exceed the threshold.
### 5.6.2 Service exposure to SL Positioning Client UE
#### 5.6.2.1 General
The Ranging/SL Positioning service may be exposed to an authorized SL
Positioning Client UE. The Client UE can initiate the Ranging/SL Positioning
service through PC5 or through the 5GC network, e.g. based on PC5 or Uu
availability.
#### 5.6.2.2 Ranging/SL Positioning service exposure through PC5
For Ranging/SL Positioning service exposure to a UE through PC5 in the
following way:
\- SL Positioning Client UE discovers one of the two or more UEs described in
clause 5.6.1, e.g. the SL Reference UE(s) or Target UE(s), using the
Ranging/SL Positioning application specific Application Layer IDs;
\- SL Positioning Client UE invokes the Ranging/SL Positioning service request
to the discovered UE, e.g. SL Reference UE/Target UE, with the attributes
described in clause 5.6.1. This request includes in the User Info field the
Application Layer ID of the SL Positioning Client UE, and the SL Reference
UE(s) and Target UE(s). The Ranging/SL Positioning service request/response is
conveyed by PC5-U and handled in the Ranging/SL Positioning layer. The
signalling is handled as application layer traffic by V2X layer or 5G ProSe
layer.
\- The UE providing the exposure service triggers the authorization of SL
Positioning Client UE for the Ranging/SL Positioning service invocation,
performs the Ranging/SL positioning control between SL Reference UE and Target
UE (as defined in clause 5.3), and returns the Ranging/SL positioning result
to SL Positioning Client UE.
Editor\'s note: Privacy handling on Ranging /SL Positioning service exposure
through PC5 will be aligned with SA WG3.
#### 5.6.2.3 Ranging/SL Positioning service exposure through 5GC U-plane
When Ranging/SL Positioning service exposure to the SL Positioning Client UE
is provided through the user plane of 5GC, the following procedures are
carried out:
\- The SL Positioning Client UE is provisioned with the Onboarding Enrolment
Information during the registration procedure. The Onboarding Enrolment
Information is specified in TS 33.122 [11].
\- The SL Positioning Client UE invokes the Application exposure API over the
application layer as specified in clause 6.7.1.2.
\- The authorization of the SL positioning Client UE for Ranging and SL
Positioning service invocation is performed to check that the SL Reference
UE\'s and Target UE\'s privacy criteria are met, following the same the
procedures as service exposure to the AF in clause 6.7.2.
#### 5.6.2.4 Ranging/SL Positioning service exposure through 5GC C-plane
When Ranging/SL Positioning service exposure to the SL Positioning Client UE
is provided through the control plane of 5GC, the following procedures are
carried out:
\- The SL Positioning Client UE invokes the Ranging/SL Positioning service
exposure via the SL-MO-LR procedure with Sidelink Positioning for relative
positioning as defined in clause 7.1.2.3.
\- The AMF based on the request selects a GMLC and forwards the Ranging/SL
positioning request to the GMLC for the Ranging/SL Positioning service with
the SL Positioning Client UE ID, i.e. SUPI.
\- The AMF sends the Ranging/SL positioning result to the SL positioning
client UE when it receives the result from the GMLC.
Editor\'s note: The procedure for Privacy handling on Ranging /SL Positioning
service exposure through the 5GC network by 5GC-MO-LR will be aligned with
SA3. This includes the authorization of the SL positioning client UE for
Ranging and Sidelink positioning service invocation of two other UEs.
NOTE: In this release, for the control plane-based procedure, the SL
Positioning Client UE and the UE who provides the exposure service are
registered in the same PLMN.
### 5.6.3 Service Exposure to the AF and 5GC NF
The 5GS Ranging/SL Positioning service may be exposed to the AF either via
direct interaction with the GMLC or via the NEF for an AF in untrusted domain.
Thus, the ranging AF may contact GMLC directly or via NEF to provide a ranging
or Sidelink positioning operation request.
The service exposure in clause 5.5 of TS 23.273 [8] is reused with
enhancements. The request may include the attributes as described in clause
5.6.1. The result is returned by the GMLC to the AF directly or via NEF if
needed. The detailed procedure is specified in clause 6.7.2.
The Ranging/SL Positioning result calculation is performed by LMF or UEs. When
absolute positioning for one Target UE is requested, procedure as described in
clause 5.5 is carried out.
The Ranging/SL Positioning service request may be initiated by a 5GC NF. In
this case, the 5GC NF interacts with the GMLC directly.
## 5.7 QoS Handling
### 5.7.1 General
QoS of Ranging/SL Positioning includes two aspects:
\- Ranging/SL Positioning QoS, which refers to the quality requirement of the
Ranging/SL Positioning result
\- RSPP transport QoS, which refers to the quality requirement of the PC5-U
communication for transmitting RSPP traffic.
### 5.7.2 Handling of Ranging/SL Positioning QoS
Ranging/SL Positioning QoS requirement may be provided in the Ranging/SL
Positioning service request generated at the application layer, and is
provided from the application layer to the Ranging/SL Positioning layer.
Ranging/SL Positioning QoS requirement may be included in the Ranging/SL
Positioning Service request from SL Positioning Client UE.
The Ranging/SL Positioning layer maps the Ranging/SL Positioning QoS
requirement to the Ranging/SL Positioning QoS parameters and provides the
Ranging/SL Positioning QoS parameters to the AS layer. If there is no received
Ranging/SL Positioning QoS requirement from the application layer, the
Ranging/SL Positioning layer determines the Ranging/SL Positioning QoS
parameters based on the Ranging/SL positioning Policy/parameters as configured
in the clause of 5.1.
Ranging/SL Positioning QoS information contains attributes defined in clause
4.1b of TS 23.273 [8] with the following additions:
\- The accuracy attribute also includes
\- the relative horizontal accuracy, and the relative vertical accuracy for
relative positioning;
\- the distance accuracy and direction accuracy for Ranging.
\- Range, which indicates the applicability of the QoS attributes in the
Ranging/SL Positioning operation over PC5.
Ranging/SL Positioning QoS information is used for determination of Ranging/SL
Positioning method. The Ranging/SL Positioning methods are defined in TS
38.355 [12].
### 5.7.3 Handling of RSPP transport QoS
The V2X/ProSe layer handles the RSPP traffic as the V2X/ProSe application data
packets for the QoS treatment. QoS handling mechanism of V2X as defined in
clause 5.4 of TS 23.287 [6] or QoS handling mechanism of 5G ProSe as defined
in clause 5.6.1 of TS 23.304 [7] is reused.
PQI values as defined in TS 23.287 [6] and TS 23.304 [7] may be reused for
RSPP transport QoS.
## 5.8 Subscription to Ranging/SL Positioning
The subscription information in the UDM contains information to give the user
permission to use 5G Ranging/SL Positioning.
At any time, the operator can amend or remove the UE subscription rights from
subscription information in the UDM, or to revoke the user\'s permission to
use Ranging/SL Positioning.
The following subscription information is defined for Ranging/SL Positioning:
\- subscription for UE acting as Target UE.
\- subscription for UE acting as SL Reference UE.
\- subscription for UE acting as Located UE.
\- Ranging/SL positioning QoS parameters.
\- the list of the PLMNs authorized for Ranging/SL Positioning services,
including:
\- the list of the PLMNs where the UE is authorised for perform Ranging/SL
positioning service over PC5 reference point.
\- the list of the PLMNs where the UE is authorised for Ranging/SL positioning
service with Direct Discovery Model A, i.e. to announce or monitor or both.
\- the list of the PLMNs where the UE is authorised for Ranging/SL positioning
service with Direct Discovery Model B, i.e. to perform Discoverer operation or
Discoveree operation or both.
## 5.9 Charging
Editor\'s note: The charging solutions for the support of Ranging based
services and Sidelink Positioning is expected to be defined by SA5, and SA2
will make the alignment based on the outcome of the SA WG5 work.
## 5.10 Security
Editor\'s note: The security impacts for the support of Ranging based services
and Sidelink Positioning, e.g. privacy protection and service access
authorization, will be defined based on SA WG3 feedback.
## 5.11 UE-only Operation for SL Positioning using Located UE
When LMF is not involved for SL Positioning/Ranging, e.g. the LMF in the
serving network does not support SL Positioning, UE-only Operation SL
Positioning is used, including Target UE as SL Positioning Server UE and
Target UE not as SL Positioning Server UE.
When Target UE as SL Positioning Server UE, the following principles applies:
\- The Target UE performs the Located UE\'s discovery and selection.
\- The Target UE obtains the location of the Located UE(s), and the Located
UE(s) may trigger a 5GC-MO-LR to retrieve its location. The Target UE uses the
location of Located UE(s) together with the Ranging/SL positioning measurement
data or result to estimate its own location.
\- The Ranging/Sidelink positioning and the positioning of the Located UE(s)
can be scheduled with the same scheduled location time (as per TS 23.273 [8])
to improve the Target UE positioning accuracy.
NOTE: Security and privacy aspects require confirmation from SA WG3.
When Target UE not as SL Positioning Server UE, the following principles
applies:
\- The Target UE performs the SL Positioning Server UE\'s discovery and
selection.
\- The SL Positioning Server UE can optionally determine to use the location
of Located UE(s) together with the Ranging/SL positioning measurement data or
result to estimate the location of Target UE.
\- The Ranging/Sidelink positioning and the positioning of the Located UE(s)
can be scheduled with the same scheduled location time (as per TS 23.273 [8])
to improve the Target UE positioning accuracy.
## 5.12 Support of Concurrent Ranging/Sidelink Positioning Requests
Concurrent Ranging/Sidelink Positioning Requests occur when any entity (e.g.
UE, AMF, LMF, GMLC, NEF) receives/initiates multiple Ranging/Sidelink
Positioning requests in the procedures defined in clause 6 for the estimate of
the same Target UE and SL Reference UE within a time period. The multiple
concurrent requests may be combined at the entities by executing one of the
requests and using the same result information to satisfy the other requests
without fully executing the latter.
The mechanism specified in clause 5.7 of TS 23.273 [8] applies with the
following enhancements:
\- SL Reference UE ID, i.e. Application Layer ID, requested result content
(i.e. distance and/or direction) and the scheduled time, if available, shall
be considered for the entities to determine whether to combine the
Ranging/Sidelink Positioning Requests.
# 6 Functional description and information flows
## 6.1 Void
## 6.2 Procedures for Service Authorization and Provisioning to UE
### 6.2.1 General
The procedures for service authorization and provisioning to UE may be
initiated by the PCF (as described in clause 6.2.2), by the UE (as described
in clause 6.2.4), or by the AF (as described in clause 6.2.5).
### 6.2.2 PCF based Service Authorization and Provisioning to UE
For PCF based Service Authorization and Provisioning to UE, the Registration
procedures as defined in clause 4.2.2.2 of TS 23.502 [3], UE Policy
Association Establishment procedure as defined in clause 4.16.11 of TS 23.502
[3] and UE Policy Association Modification procedure as defined in clause
4.16.12 of TS 23.502 [3] apply with the following additions:
\- If the UE indicates Ranging/SL Positioning Capability in the Registration
Request message and if the UE is authorized to use Ranging/SL Positioning
service based on subscription data, the AMF selects the PCF which supports
Ranging/SL Positioning Policy/Parameter provisioning as described in clause
6.2.3 and establishes a UE policy association with the PCF for Ranging/SL
Positioning Policy/Parameter delivery. The AMF reports the authorized
Ranging/SL Positioning Capability to the selected PCF, which may determine the
Ranging/SL Positioning Policy/Parameter based on the UE\'s authorized
Ranging/SL Positioning Capability.
The PCF may update the Ranging/SL Positioning Policy/parameters to the UE in
following conditions:
\- UE Mobility, e.g. UE moves from one PLMN to another PLMN. This is achieved
by using the procedure of UE Policy Association Modification initiated by the
AMF, as defined in clause 4.16.12.1 of TS 23.502 [3].
\- When there is a subscription change in the list of PLMNs where the UE is
authorized to perform Ranging/SL Positioning services. This is achieved by
using UE Policy Association Modification initiated by the PCF procedure as
defined in clause 4.16.12.2 of TS 23.502 [3].
\- When there is a change of service specific parameter (including path
selection policy) as described in clause 6.2.5 (performing the procedure in
clause 4.15.6.7 of TS 23.502 [3]).
\- When the timer associated with some Policy/parameter expires.
\- When the UE determines that the Ranging/SL Positioning Policy/parameter(s)
is invalid and performs UE triggered Policy Provisioning procedure to the PCF.
If the serving PLMN is removed from the list of PLMNs in the service
authorization parameters, the service authorization is revoked in the UE.
When the UE is roaming, the change of subscription resulting in updates of the
service authorization parameters are transferred to the UE by H-PCF via V-PCF.
The UE may perform Ranging/SL Positioning UE triggered Policy Provisioning
procedure to the PCF, after Registration procedure has been completed, as
specified in clause 6.2.4 when the UE determines the Ranging/SL Positioning
Policy/Parameter is invalid (e.g. Policy/Parameter is outdated, missing or
invalid).
When the UE disables a Ranging/SL Positioning capability, the PCF may stop
updating the corresponding Ranging/SL Positioning Policy/parameter(s) and when
the UE enables a Ranging/SL Positioning capability the PCF may need to provide
or update the corresponding Ranging/SL Positioning Policy/parameter(s).
### 6.2.3 PCF discovery
PCF discovery and selection mechanism defined in clause 6.3.7.1 of TS 23.501
[2] applies with the following addition to enable a PCF instance is selected
for Ranging/SL Positioning service and for UE:
\- Based on the indication from the UE and/or UE subscription data during the
Registration procedure as specified in clause 6.5.2, the AMF may include the
Ranging/SL Positioning Capability indication in the Nnrf_NFDiscovery_Request
message as the optional input parameter. If provided, the NRF takes the
information into account for discovering the PCF instance.
### 6.2.4 Procedure for UE triggered Ranging/SL Positioning Policy
provisioning
The procedure for UE triggered Ranging/SL Positioning Policy provisioning for
V2X as specified in clause 6.2.4 of TS 23.287 [6] or for ProSe in clause 6.2.4
of TS 23.304 [7] is used to provide the 5G Ranging/SL Positioning
Policy/Parameter as part of ProSe Policy or V2X Policy to UE.
### 6.2.5 AF-based service parameter provisioning for Ranging/SL Positioning
over control plane
For Ranging/SL Positioning service parameter provisioning (i.e. creating,
updating and deleting), the procedure defined in clause 4.15.6.7 of TS 23.502
[3] is performed with the following considerations:
\- The AF in TS 23.502 [3] is considered as Ranging/SL Positioning Application
Server in this specification.
\- Service Description indicates Ranging/SL Positioning service domain
information.
\- Service Parameters include parameters for Ranging/SL Positioning service.
The detailed information on the parameters is described in clause 5.1.2.
NOTE: It is assumed that the Ranging/SL Positioning service domain information
is set based on the Service Level Agreement with the operator.
## 6.3 Procedures for Service Authorization to NG-RAN
### 6.3.1 General
In order to support PC5 radio resource control in NG-RAN, UE authorization
status about Ranging/SL Positioning over PC5 and PC5 QoS parameters related to
RSPP transport need to be made available in NG-RAN. This clause describes the
corresponding procedures and aspects.
### 6.3.2 Registration procedure
The Registration procedure for UE is performed as defined in TS 23.502 [3]
clause 4.2.2.2 with the following additions:
\- The UE includes the Ranging/SL Positioning Capability as defined in clause
4.3.1 as part of the \"5GMM capability\" in the Registration Request message.
The AMF stores the Ranging/SL Positioning Capability for Ranging/SL
Positioning operation.
\- If the Ranging/SL Positioning Capability is included in the \"5GMM
capability\", the 5G ProSe Capability as defined in TS 23.304 [7] or the V2X
Capability as defined in TS 23.287 [6] shall also be included.
\- The AMF obtains the Ranging/SL positioning subscription data as part of the
user subscription data from UDM during UE Registration procedure using
Nudm_SDM service as defined in clause 4.2.2.2.2 of TS 23.502 [3].
\- The AMF determines whether the UE is authorised to use Ranging/SL
positioning services based on UE\'s Ranging/SL Positioning Capability and the
Ranging/SL positioning Service Authorisation included in the subscription data
received from UDM. The AMF stores the authorized Ranging/SL Positioning
Capability.
\- The AMF sends the authorized Ranging/SL Positioning Capability for
Ranging/SL positioning operation to PCF. Based on the received Ranging/SL
Positioning Capability from the AMF, the PCF provides the PC5 QoS parameters
related to RSPP transport to AMF. The AMF stores such information as part of
the UE context.
\- If the UE is authorised to use Ranging/SL positioning services, then the
AMF shall include in a NGAP message sent to NG-RAN:
\- \"Ranging/SL Positioning authorised\" information, including one or more of
the following:
\- whether the UE is authorized to use Ranging/SL Positioning over PC5;
\- whether the UE is authorized to act as a Located UE;
\- whether the UE is authorized to act as a SL Positioning Server UE.
\- the PC5 QoS parameters related to RSPP transport used by the NG-RAN for the
resource management of UE\'s PC5 transmission for Ranging/SL Positioning
services in network scheduled mode.
\- If the UE is authorised to use Ranging/SL positioning services, then the
AMF should not initiate the release of the signalling connection after the
completion of the Registration procedure. The release of the signalling
connection relies on the decision of NG-RAN, as specified in TS 23.502 [3].
### 6.3.3 Service Request procedure
The Service Request procedures for UE in CM-IDLE state are performed as
defined in TS 23.502 [3] clause 4.2.3.2 and clause 4.2.3.3 with the following
additions:
\- If the UE is authorised to use Ranging/SL positioning services, then the
AMF shall include \"Ranging/SL Positioning authorised\" information in the
NGAP message, indicating the UE is authorised to use Ranging/SL positioning
services as described in clause 6.3.2.
\- The AMF sends the PC5 QoS parameters related to RSPP transport to NG-RAN
via N2 signalling. The PC5 QoS parameters related to RSPP transport may be
stored in the UE context after the registration procedure. If the UE is
authorised to use Ranging/SL positioning services but AMF does not have PC5
QoS parameters related to RSPP transport available, the AMF fetches the PC5
QoS parameters related to RSPP transport from the PCF.
### 6.3.4 N2 Handover procedure
The N2 based handover procedures for UE are performed as defined in TS 23.502
[3] clause 4.9.1.3 with the following additions:
\- If the UE is authorised to use Ranging/SL positioning services, then the
target AMF shall send the \"Ranging/SL Positioning authorised\" information
and PC5 QoS parameters related to RSPP transport to the target NG-RAN in the
NGAP Handover Request message.
### 6.3.5 Xn Handover procedure
The Xn based handover procedures for UE are performed as defined in TS 23.502
[3] clause 4.9.1.2 with the following additions:
\- If the \"Ranging/SL Positioning authorised\" information is included in the
UE context, then the source NG-RAN shall include a \"Ranging/SL Positioning
authorised\" information and PC5 QoS parameters related to RSPP transport in
the XnAP Handover Request message to the target NG-RAN.
\- If the \"Ranging/SL Positioning authorised\" information is included in the
UE context, then the AMF shall send the \"Ranging/SL Positioning authorised\"
information and PC5 QoS parameters related to RSPP transport to the target NG-
RAN in the Path Switch Request Acknowledge message.
### 6.3.6 Subscriber Data Update Notification to AMF
The procedure of Subscriber Data Update Notification to AMF is performed as
defined in TS 23.502 [3] clause 4.5.1 with the following additions:
\- The Nudm_SDM_Notification service operation may contain the Ranging/SL
positioning service Authorisation.
\- The AMF updates the UE Context with the above new Ranging/SL positioning
service subscription data.
\- When the AMF updates UE context stored at NG-RAN, the UE context contains
the Ranging/SL positioning service subscription data.
### 6.3.7 Delivery of PC5 QoS parameters related to RSPP transport to NG-RAN
The UE Policy Association Establishment procedure and UE Policy Association
Modification procedure, as defined in TS 23.502 [3], is used to provide the
AMF with PC5 QoS parameters related to RSPP transport used by NG-RAN. When
receiving the Ranging/SL Positioning Capability in Npcf_UEPolicyControl_Create
Request from the AMF or when receiving the updated subscription data from UDR,
the PCF generates the PC5 QoS parameters related to RSPP transport used by NG-
RAN corresponding to a UE.
The (V-)PCF provides the information to the AMF as follows:
\- In the roaming case, the H-PCF includes the PC5 QoS parameters related to
RSPP transport used by NG-RAN in the Npcf_UEPolicyControl_Create Response
message or Npcf_UEPolicyControl UpdateNotify Request message sent to V-PCF in
an N2 PC5 policy container, and V-PCF relays this N2 PC5 policy container as
the N2 container in the Namf_Communication_N1N2MessageTransfer message sent to
AMF.
\- In the non-roaming case, the PCF includes the PC5 QoS parameters related to
RSPP transport used by NG-RAN in an N2 container in
Namf_Communication_N1N2MessageTransfer message sent to AMF.
When the AMF receives the N2 PC5 policy container from (V-)PCF, the AMF stores
such information as part of the UE context.
In the UE Configuration Update procedure triggered by UE Policy Association
Establishment or UE Policy Association Modification:
\- The AMF forwards the PC5 QoS parameters related to RSPP transport in the
NGAP message to the NG-RAN if a N2 PC5 policy container is received in the
Namf_Communication_N1N2MessageTransfer message.
NOTE 1: If the PC5 QoS parameters related to RSPP transport are provided to
both NG-RAN and UE, both the N2 PC5 Policy Container and the UE Policy
Container are included in the Namf_Communication_N1N2MessageTransfer message.
NOTE 2: Non-UE specific PC5 QoS parameters, e.g. default PC5 QoS parameters,
can also be locally configured in NG-RAN. How such configuration is performed
is out of scope of this specification.
## 6.4 Procedures for UE Discovery
### 6.4.1 General
The procedure for Ranging/Sidelink Positioning UE discovery with 5G ProSe
capable UE uses both Model A discovery and Model B discovery as defined in
clause 6.3.2 of TS 23.304 [7].
The procedure for Ranging/Sidelink Positioning UE discovery with V2X capable
UE uses the procedures for V2X communication over PC5 reference point as
defined in TS 23.287 [6].
NOTE: Application layer discovery is used for Ranging/Sidelink Positioning UE
discovery with V2X capable UE that is out of scope of this specification.
### 6.4.2 Ranging/SL Positioning UE discovery with 5G ProSe capable UE
#### 6.4.2.1 Ranging/SL Positioning UE direct discovery
As defined for the Model A and Model B discovery in TS 23.304 [7]:
\- Model A uses a single discovery protocol message (Announcement).
\- Model B uses two discovery protocol messages (Solicitation and Response).
Figure 6.4.2.1-1 illustrates the procedure for Ranging/SL Positioning UE
discovery with 5G ProSe capable UE using Model A discovery.
Figure 6.4.2.1-1: Ranging/SL Positioning UE discovery in Model A
1\. The Announcing UE (UE-1) sends a Ranging/SL Positioning Announcement
message. The Ranging/SL Positioning Announcement message includes the Type of
Discovery Message, security protection element, RSPP metadata information, and
the User Info ID of Announcing UE.
The Destination Layer-2 ID used to send the Ranging/SL Positioning
Announcement message is configured in clause 5.2.
The Source Layer-2 ID to send the Ranging/SL Positioning Announcement message
is self-assigned by the Announcing UE.
Announcing UE sends the Announcement message only if it is authorized to be
the corresponding UE role in RSPP metadata information.
For the Announcing UE acting as Located UE, Ranging/SL Positioning
Announcement message also includes the serving PLMN of Announcing UE.
The User Info ID of Announcing UE is the Announcing UE\'s Application Layer
ID.
A Monitoring UE determines the Destination Layer-2 ID for signalling reception
based on the configuration in clause 5.2.
A Monitoring UE selects the Announcing UE based on the information received in
step 1.
Editor\'s note: The RSPP metadata information (e.g. the role(s) of the
Announcing UE) is included as the metadata in the Announcement message, which
value is determined by RAN WG2.
Editor\'s note: How the RSPP metadata information is used to convey that a UE
is a "Located UE" needs to be aligned with RAN WG2.
Figure 6.4.2.1-2 illustrates the procedure for Ranging/SL Positioning UE
discovery with 5G ProSe capable in Model B discovery.
Figure 6.4.2.1-2: Ranging/SL Positioning UE discovery in Model B
1\. The Discoverer UE (UE-1) sends a Ranging/SL Positioning Solicitation
message. The Ranging/SL Positioning Solicitation message includes the Type of
Discovery Message, security protection element, optionally User Info ID of
Discoveree UE, Target Info, User Info ID of Discoverer UE and optionally RSPP
metadata information.
The Destination Layer-2 ID used to send the Ranging/SL Positioning
Solicitation message is configured in clause 5.2.
The Source Layer-2 ID to send the Ranging/SL Positioning Solicitation message
is self-assigned by the Discoverer UE.
Discoveree UE sends the Response message only if it is authorized to be the
corresponding UE role in the solicitation message.
For the discovered Role being Located UE, Ranging/SL Positioning Response
message also includes the serving PLMN of Discoveree UE.
The User Info ID of Discoverer UE is the discoverer UE\'s Application Layer
ID.
User Info ID of Discoveree UE is to identify a specific UE that the discoverer
UE would like to discover, which is identified by Discoveree UE\'s Application
Layer ID.
A Discoveree UE determines the Destination Layer-2 ID for signalling reception
based on the configuration in clause 5.2.
Editor\'s note: The RSPP metadata information (e.g. the specific Role(s) to be
discovered) is included as the metadata in the Solicitation message, which
value is determined by RAN WG2.
2 The Discoveree UE that matches the Ranging/SL Positioning solicitation
message (e.g. RSPP metadata information) responds to the Discoverer UE with
the Ranging/SL Positioning Response message. The Ranging/SL Positioning
Response message includes Type of Discovery Message, security protection
element, RSPP metadata information, user Info ID of the Discoveree UE.
The Source Layer-2 ID used to send the Ranging/SL Positioning Response message
is specified in clause 5.2.
The Destination Layer-2 ID is set to the Source Layer-2 ID of the received
Ranging/SL Positioning Solicitation message.
The User Info ID of Discoveree UE is the Discoveree UE\'s Application Layer
ID.
Editor\'s note: The RSPP metadata information (e.g. the role(s) of the
Discoveree UE) is included as the metadata in the Announcement message, which
value is determined by RAN WG2.
#### 6.4.2.2 Ranging/SL Positioning group member discovery with 5G ProSe
capable UE
Figure 6.4.2-1 illustrates the procedure for Ranging/SL Positioning group
member discovery with 5G ProSe capable in Model A discovery.
Figure 6.4.2.2-1: Ranging/SL Positioning group member discovery in Model A
1\. The Announcing UE sends a Ranging/SL Positioning Group member discovery
Announcement message. The Announcement message includes the Type of Discovery
Message, User info ID of the Announcer UE, Group ID and RSPP metadata
information.
The Destination Layer-2 ID used to send and receive the Ranging/SL Positioning
Group member discovery Announcement message is described in clause 5.8.1.2 of
TS 23.304 [7].
The Source Layer-2 ID used to send and the Ranging/SL Positioning Group member
discovery Announcement message is self-assigned by the Announcing UE.
Announcing UE sends the Announcement message only if it is authorized to be
the corresponding UE role in RSPP metadata information.
For the Announcing UE acting as Located UE, Ranging/SL Positioning Group
member discovery Announcement message also includes the serving PLMN of
Announcing UE.
The User Info ID of Announcing UE is the Announcing UE\'s Application Layer
ID.
Editor\'s note: The RSPP metadata information (e.g. the role(s) of the
Announcing UE) is included as the metadata in the Announcement message, which
value is determined by RAN WG2.
Figure 6.4.2.2-2 illustrates the procedure for Ranging/SL Positioning Group
member discovery with 5G ProSe capable in Model B discovery.
Figure 6.4.2.2-2: Ranging/SL Positioning Group member discovery in Model B
1\. The Discoverer UE (UE-1) sends a Ranging/SL Positioning Group member
discovery Solicitation message. The Solicitation message includes the Type of
Discovery Message, User Info ID of Discoverer, Group ID, optionally User Info
ID of Discoveree UE and optionally RSPP metadata information.
The Destination Layer-2 ID used to send and receive the Solicitation message
is described in clause 5.8.1.2 of TS 23.304 [7].
The Source Layer-2 ID to send the Ranging/SL Positioning Solicitation message
is self-assigned by the Discoverer UE.
The User Info ID of Discoverer UE is the Discoverer UE\'s Application Layer
ID.
User Info ID of Discoveree UE is to identify a specific UE that the discoverer
UE would like to discover, which is identified by Discoveree UE\'s Application
Layer ID.
Editor\'s note: The RSPP metadata information (e.g. the specific Role(s) to be
discovered) is included as the metadata in the Solicitation message, which
value is determined by RAN WG2.
2 The Discoveree UE that matches the values of the parameters (including Group
ID and User Info ID of Discoveree UE) contained in the Ranging/SL Positioning
Group member discovery solicitation message, responds to the Discoverer UE
with the Ranging/SL Positioning Group member discovery Response message. The
Ranging/SL Positioning Response message includes Type of Discovery Message,
the User Info ID of Discoveree, the RSPP metadata information and the Group
ID.
The Source Layer-2 ID used to send the Ranging/SL Positioning Group member
discovery Response message is self-assigned.
The Destination Layer-2 ID is set to the Source Layer-2 ID of the received
Ranging/SL Positioning Group member discovery Solicitation message.
Discoveree UE sends the Response message only if it is authorized to be the
corresponding UE role in the solicitation message.
For the discovered Role being Located UE, Ranging/SL Positioning Group member
discovery Response message also includes the serving PLMN of Discoveree UE.
The User Info ID of Discoveree UE is the Discoveree UE\'s Application Layer
ID.
Editor\'s note: The RSPP metadata information (e.g. the role(s) of the
Discoveree UE) is included as the metadata in the Announcement message, which
value is determined by RAN WG2.
### 6.4.3 Ranging/SL Positioning UE discovery with V2X capable UE
The procedure for Ranging/SL Positioning UE discovery and selection with V2X
capable UE uses the procedures of Layer-2 link establishment over PC5
reference point in clause 6.3.3 of TS 23.287 [6] as basis with following
differences and clarifications:
\- The Service Type in Layer-2 link establishment procedure indicates
\"Ranging/Sidelink Positioning\" service, the Policy/Parameter provisioning
for \"Ranging/Sidelink Positioning\" service is defined in clause 5.2.
\- In step3, the UE determines the destination Layer-2 ID based on the
configuration in clause 5.2 for the RSPP transport. The V2X service info
indicates \"Ranging/Sidelink Positioning\" in the Direct Communication Request
message. The Direct Communication Request message may include the RSPP
metadata information.
Editor\'s note: The RSPP metadata information (e.g. the specific Role(s) of to
be discovered) is included as the metadata in the Direct Communication Request
message, which value is determined by RAN WG2.
\- In step 4, the QoS info is for the RSPP transport.
\- In step 5, the Direct Communication Accept message includes the RSPP
metadata information for the Ranging/Sidelink Service oriented Layer-2 link
establishment.
Editor\'s note: The RSPP metadata information (e.g. the role(s) of the
response UE) is included as the metadata in the Direct Communication Accept
message, which value is determined by RAN WG2.
## 6.5 Procedure for UE Positioning assisted by Sidelink Positioning and
involving 5GC
### 6.5.1 Procedures for Network based SL Positioning for UE with NAS
connection
#### 6.5.1.1 MO-LR Procedure for Network based SL Positioning for UE with NAS
connection
UE can trigger 5GC-MO-LR and the LMF determines that SL positioning will be
used to determine the absolute location of the UE as specified in 5GC-MO-LR
procedure using SL positioning in clause 6.20.2 of TS 23.273 [8] or the UE can
trigger SL-MO-LR procedure defined in clause 6.20.1 of TS 23.273 [8] is
performed with the following adaptations:
\- UE1 is the Target UE, and UE2/.../UEn is the Located UE.
\- It is indicated in step 8 that location calculation assistance by the
network is needed and absolute location is required.
#### 6.5.1.2 MT-LR Procedure for Network based SL Positioning for UE with NAS
connection
5GC-MT-LR using SL positioning procedure as defined in clause 6.20.5 of TS
23.273 [8] is performed with the following adaptations:
\- The LMF performs the absolute location estimation.
### 6.5.2 Procedures for Network based SL positioning for UE without NAS
connection
The procedures for Network based SL positioning for UE without NAS connection
apply to the following cases:
\- when the Target UE initiates 5GC-MO-LR request to obtain its own absolute
location and cannot establish a NAS connection or cannot be served by a
Ranging/SL positioning capable LMF
\- when the target UE detects an event configured by the network during an
initial 5GC-MT-LR procedure when the Target UE has the NAS connection
The procedures for Network based SL positioning for UE without NAS connection
takes the SL-MO-LR procedure in TS 23.273 [8] as baseline with following
adaptations based on the functionalities described in clause 5.5.3:
\- UEx (one of the UE2/.../UEn) is the Target UE that cannot set up a NAS
connection or that cannot be served by a Ranging/SL positioning capable LMF,
and UE1 is Located UE that is in coverage and can be served by a Ranging/SL
positioning capable LMF.
NOTE: UE1 as the Located UE can be multiple.
\- In step2, it is the UEx (Target UE) that performs UE1 (Located UE)
discovery.
\- In step 6, when the UEx(Target UE) initiates SL-MO-LR service request to
UE1(Located UE), the UEx(Target UE) requests UE1(Located UE) to return its
absolute location and may indicate whether the absolute location should be
transferred to an LCS client or AF. For transfer to an LCS Client or AF,
Target UE ID and the Deferred routing ID may be included.
\- It is the UE 1 as the Located UE that performs the SL-MO-LR with the step
8\~23 with following adaptions:
\- In Step 8: UE1(Located UE) sends SL-MO-LR request which indicates that the
Target UE's absolute location is required, may indicate that the location
calculation assistance by the network is needed, and may indicate that
location results need to be transferred to the LCS client or AF for UEx
(Target UE). For transfer to the LCS Client or AF, the Target UE ID, i.e.
Application Layer ID and the Deferred routing ID may be included along with
the SL-MO-LR request. The SL positioning measurement data may be included in
step 8.
\- The LMF determines the network based calculation taking the obtained
capability of UE in step 10 and step 11 into account.
\- The LMF requests for the location information from the UE1(Located UE) in
step14.
\- The step17 for UE based calculate is not needed.
\- The UE1(Located UE) returns the SL location measurement data to the LMF in
step18.
\- When SL positioning measurement data was provided in step 8, step 12\~17
may be omitted.
\- The LMF calculates the location result (i.e. the absolute Location of
Target UE) based on the SL location measurement data and the location of the
UE1(Located UE) in step19, and provides the location of UEx(Target UE) to the
UE1 (Located UE) in step 22.
\- In case the LMF has the valuable UEx(Target UE) context based on the
Deferred routing ID, then the LMF provides the resulting location of the
UEx(Target UE) via the GMLC to the LCS Client or AF in step 22. In case the
UEx(Target UE) context was deleted, transferring location of the UEx(Target
UE) to the LCS Client or AF is not proceeded.
\- The UE1 (Located UE) returns the absolute location result (i.e. the
absolute Location of Target UE) to the UEx(Target UE) in step23 over PC5.
### 6.5.3 Procedures for Network-assisted SL Positioning for UE with NAS
connection
#### 6.5.3.1 MO-LR Procedure for Network-assisted SL Positioning for UE with
NAS connection
The procedures defined in this clause apply to Network-assisted SL Positioning
for UE with NAS connection, as defined in clause 5.5.4, when the service
request is initiated by the Target UE.
If the Located UE(s) is known to the Target UE (e.g. based on Located UE
discovery and selection), SL-MO-LR procedure defined in clause 6.20.1 of TS
23.273 [8] is performed with the following adaptations:
\- UE1 is the Target UE, and UE2/.../UEn is the Located UE. UE1 provides
application layer ID of UE2/.../UEn as the Located UE ID in the SL-MO-LR
request.
\- It is indicated in step 8 that absolute location of UE1 is required.
\- It is indicated in step 14 that Network-assisted SL Positioning is applied
and optionally the selected SL Positioning Server UE, e.g. Target UE or
Located UE, for result calculation.
\- In step 18, the response includes absolute location of UE1.
\- Step 19 and step 20 are skipped.
If the Located UE(s) is not known to the Target UE, 5GC-MO-LR procedure using
SL positioning defined in clause 6.20.2 of TS 23.273 [8] is performed.
#### 6.5.3.2 MT-LR Procedure for Network-assisted SL Positioning for UE with
NAS connection
The procedures defined in this clause apply to Network-assisted SL Positioning
for UE with NAS connection, as defined in clause 5.5.4, when the service
request is initiated by the AF or LCS Client.
5GC-MT-LR procedure using SL positioning defined in clause 6.20.5 of TS 23.273
[8] is performed.
### 6.5.4 Procedures for Network-assisted SL Positioning for UE without NAS
connection
The Procedures for Network-assisted SL Positioning for UE without NAS
connection take the Procedures for Network based SL positioning for UE without
NAS connection in clause 6.5.2 as baseline with following adaptations based on
the functionalities defined in clause 5.5.5:
\- In Step 8: UE1 (Located UE) may indicate that the assistance data or
location calculation assistance is needed.
\- The LMF determines the UE based calculation taking the obtained capability
of UE in step 10 and step 11 into account.
\- The LMF provides the assistance data to UE1 (Located UE) in step 12\~13,
and requests the UE1 (Located UE) to return the result to the LMF if the UE1
(Located UE) is the SL location server UE enabled in step14.
\- If the UE1 (Located UE) is not SL server UE enabled, the LMF may select a
SL Positioning Server UE to calculate the result, in this case the LMF
provides the assistant data and the location of the UE1 (Located UE) to the
selected SL Positioning Server UE in step 12-13, and ask for returning the
calculation result in step14.
\- The UE1 (Located UE) or a selected SL location server UE retunes the
calculation result (i.e. the Target UE's absolute location) to the LMF in
step18.
## 6.6 Procedure of UE only Sidelink Positioning for Target UE using Located
UE
This procedure is used to acquire absolute location of Target UE using Located
UE, where LMF is not involved for SL Positioning/Ranging. The Located UE is
assumed to already know its absolute location or can get its absolute location
via the legacy 5GC-MO-LR Procedure, and its privacy profile allows its
location to be shared with the Target UE.
Procedures for Ranging/Sidelink Positioning control (UE-only operation)
defined in clause 6.8 applies with the following adaptations:
\- UE1 is the Target UE, and UE2 is the Located UE
\- Step1, the service request from Target UE application layer indicates that
absolute location of the Target UE is required
\- Before step 6, target UE sends a scheduled location time (Time T) to each
Located UE. If the absolution location of Located UE is not known, 5GC-MO-LR
procedure is triggered, as specified in clause 6.2 of TS 23.273 [8], with the
Time T included in the 5GC-MO-LR Request.
\- Ranging/Sidelink positioning between target UE and located UE is scheduled
with the Time T.
\- Step 7, absolute location of the Target UE is calculated.
## 6.7 Procedures for Ranging/SL Positioning service exposure
### 6.7.1 Procedures for service exposure to SL Positioning Client UE
#### 6.7.1.1 Procedures for Ranging/SL Positioning service exposure through
PC5
Figure 6.7.1-1. Service exposure to SL Positioning Client UE via PC5
1\. When a Ranging/SL Positioning service is triggered, SL Positioning Client
UE may perform discovery procedure for the Ranging/SL Positioning service
defined in clause 6.2 with following updates:
\- When SL positioning service is triggered, the client UE tries to discover
the target UE and/or a SL Reference UE. When Model B discovery used, in the
Solicitation message, target UE\'s user info is included and role of target UE
and role of SL Reference UE are indicated in the RSPP metadata.
\- When Ranging service is triggered, the client UE tries to discover UE1
and/or UE2. When Model B discovery used, in the Solicitation message, UE1\'s
user info and UE2\'s user info are included and role of target UE is indicated
in the RSPP metadata.
During discovery for SL positioning service, the information of SL Reference
UE is acquired.
2\. If discovery procedure succeeds, the SL Positioning Client UE establishes
a PC5 connection with the discovered UE.
3\. The SL Positioning Client UE is informed of UE\'s status information
indicating that UE has NAS connection or no NAS connection from the discovered
UE(s).
Editor\'s note: Need to determine if such indication is provided during
discovery or step 3, and whether or not it requires RAN WG2 involvement.
The SL Positioning Client UE may receive list of SL Reference UE(s) from
target UE over the PC5 connection.
4\. Based on UE\'s status information, the SL Positioning Client UE down
selects UE(s) to perform SL Positioning operation and select a UE (here UE1)
to receive SL Positioning Service Request. The SL Positioning Client UE sends
a SL Positioning Service Request which includes info of SL Positioning Client
UE, info of Target UE and info of SL Reference UE for SL positioning, and info
of SL Positioning Client UE, info of UE1 and info of UE2 for Ranging.
5\. Authorization check of the client UE for the service request may be
performed via SL Positioning Server UE or 5GC or internally by UE1 or target
UE.
6\. The UE which received SL Positioning Service Request (here UE1) selects
LMF or SL Positioning Server UE based on its status whether UE has NAS
connection. Ranging/SL Positioning operation is performed as described in
clause 6.8 among target UE, SL Reference UE and SL Positioning Server UE or
LMF.
7\. The Ranging/SL Positioning result is provided to the SL Positioning client
UE by UE1.
#### 6.7.1.2 Procedure for Ranging/SL Positioning service exposure through 5GC
network
##### 6.7.1.2.1 General
For Ranging/SL Positioning service exposure to a SL Positioning Client UE
through network two alternative procedures may be used i.e. user plane-based
procedure via NEF, or control plane-based procedure is used.
##### 6.7.1.2.2 Procedure for Ranging/SL Positioning service exposure through
5GC network via NEF
Figure 6.7.1.2.2-1: Exposure procedure to SL Positioning Client UE via NEF
Precondition: UE subscription data in the UDR has been updated by the NEF with
the Onboarding Enrolment Information when the UE subscription was updated with
SL Positioning Client UE authorized information.
1\. The Client UE register and obtains the Onboarding Enrolment Information
i.e. IP address and onboarding credentials (Root CA certificate and OAuth 2.0
access token) as specified in clause 6.1 of TS 33.122 [11] and provides this
to higher layer/application layer. The UE can either receives the Onboarding
Enrolment Information during the registration procedure as part of the
policy/parameter provisioning for all authorized Ranging/SL Positioning
services or during UE triggered Policy Provisioning procedure to the PCF as
described in clause 6.2.2.
2\. The Application in Client UE performs the Onboarding procedure with the
NEF as specified in TS 33.122 [11] clause 6.1 taking the role as API Invoker.
3\. The Application in Client UE invokes an Nnef_EventExposure_Subscribe
service operation towards the NEF and includes the identification of the
Target UE and SL Reference UE (e.g. SUPI or GPSI) and details of the
Ranging/Sidelink location request such as whether a current or last know
immediate location or a deferred location is requested, the location accuracy
and response time, maximum age of location, LDR request information and other
information applicable to the type of request.
4\. The NEF invokes an Ngmlc_Location_ProvideLocation Request service
operation towards the GMLC. The service operation may include all of the
information received in step 3.
5\. The GMLC triggers the SL-MT-LR procedure as specified in clause 6.20.3 of
TS 23.273 [8] and obtains the Ranging/Sidelink positioning result with the
following adaptations:
\- UE1 is the Target UE, and UE2/.../UEn is the SL Reference UE or Located UE.
\- It is indicated in step 1 that relative location or Ranging information is
required.
6\. The GMLC invokes the Ngmlc_Location_ProvideLocation Response service
operation towards the NEF to return the Ranging/Sidelink positioning result.
7\. The NEF returns the Ranging/Sidelink positioning result to the Application
in the Client UE.
##### 6.7.1.2.3 Procedure for Ranging/SL Positioning service exposure through
5GC network via control plane
Figure 6.7.1.2.3-1: Exposure through 5GC network via control plane
1\. The application layer of the SL Positioning Client UE triggers the SL
Positioning Client UE to request the network to perform the Ranging/SL
positioning between two more UEs, e.g. between the UE1 and UE2. If the SL
Positioning Client UE in CM-IDLE state, it firstly triggers the service
request procedure to enter CM-CONNECTED state.
2\. The SL Positioning Client UE sends the SL-MO-LR request to the AMF1 in the
UL NAS TRANSPORT message for the Ranging/SL Positioning operation.
The SL-MO-LR request includes the parameters as defined in clause 5.6.1 for
the Ranging/SL positioning service requirement: UE-1 ID (e.g. UE1\'s GPSI),
UE-2 ID (e.g. UE2\'s GPSI), Ranging/SL Positioning service type, Requested
Quality, etc. The Ranging/SL Positioning service type indicates the distance
between two UEs or more UEs and/or the direction and/or relative positioning
of one UE (i.e. Target UE) from another UE (i.e. SL Reference UE) via PC5
interface. The Requested Quality may include delay, accuracy, etc.
3\. Based on the request type, the AMF1 may select a GMLC supporting
Ranging/SL Positioning using NRF query or configuration in AMF1, and forwards
the SL-MO-LR to the GMLC for Ranging/SL Positioning result via
Ngmlc_Location_ProvideRanging_Request, the AMF includes the SL Positioning
Client UE ID, i.e. SUPI, in the request.
Editor\'s note: Service operation provided, including authorization of the SL
Positioning Client UE, by GMLC for Ranging/SL Positioning is FFS.
4\. SL-MT-LR procedure defined in clause 6.20.3 of TS 23.273 [8] is performed,
with the following adaptations:
\- step 4: it is indicated in step 4 that relative positioning or ranging
information is required.
\- step 5: GMLC selects the AMF (i.e. AMF2 if the serving AMF is not the same
as serving the SL Positioning Client UE) serving either UE1 or UE2.
5\. The GMLC returns the result to the AMF1 via
Ngmlc_Location_ProvideRanging_Response.
6\. The AMF1 returns the result to the SL Positioning Client UE via DL NAS
TRANSPORT message.
### 6.7.2 Procedures for Service Exposure to the AF
SL-MT-LR procedure defined in clause 6.20.3 of TS 23.273 [8] is performed for
Service Exposure to the 5GC NF, AF or the LCS Client.
## 6.8 Procedures of Ranging/Sidelink Positioning control
Either UE-only Operation or Network-based Operation is applied in the
Ranging/Sidelink Positioning control procedures.
UE-only Operation as specified in this clause is applied for the following
cases:
\- Neither Target UE nor SL Reference UE is served by NG-RAN.
\- Network-based Operation is not supported by the 5GC network:
\- When Network-based Operation is not supported by the 5GC network,
indication on whether the UE is allowed to use UE-only operation to perform
Ranging/ SL Positioning is included in the Policy/Parameter provisioned to UE
as defined in clause 5.1.1.2, and is provisioned to the UE as defined in
clause 5.1.1.1. The Target UE will take it into account to initiate UE-only
operation procedure.
\- SL-MO-LR request is rejected by the network.
For any other cases, Network-based Operation as specified in clauses 6.20 of
TS 23.273 [8] is applied.
Figure 6.8.1-1 Procedures for Ranging/Sidelink Positioning control (UE-only
operation)
1\. UE1 (i.e. Target UE) may receive a Ranging/SL Positioning Service request
from:
1a. SL Positioning Client UE over PC5 during procedures for Ranging/SL
Positioning service exposure through PC5 as defined in clause 6.6.1.1.
For absolute location, the service request includes the SL Positioning Client
UE\'s user info and Target UE\'s user info, and required positioning QoS.
For relative location or ranging information, the service request includes the
SL Positioning Client UE\'s user info, Target UE\'s user info, SL Reference
UE\'s user info(UE2/.../UEn), and Ranging/SL Positioning QoS information.
1b. RSPP application layer.
The service request includes type of the result (i.e. absolute location,
relative location or ranging information) and the required QoS.
2\. UE1 discovers UE2/.../UEn (i.e. SL Reference UEs/Located UEs) as defined
in clause 6.4, if needed.
NOTE 1: Details of security related procedures during UE discovery are
developed by SA WG3.
3\. If none of UE1/.../UEn are served by NG-RAN or the serving network does
not support Ranging/SL Positioning, , UE-only Operation is applied.
4\. UE1 and UE2/.../UEn perform capability exchange. Step 4 may be performed
during step 5 and step 6 with coordination of SL Positioning Server UE.
5\. If UE1 does not support SL Positioning Server functionalities, a SL
Positioning Server UE (either co-located with a SL Reference UE/Located UE, or
operated by a separate UE) is discovered (if not yet discovered in step 2) and
selected. If a SL Positioning Server UE that is co-located with a SL Reference
UE/Located UE or operated by a separate UE, UE1 discovers and selects the SL
Positioning Server UE as described in clause 6.4 and requests SL Positioning
Server UE to participate in the Ranging/Sidelink positioning.
NOTE 2: Details of security and privacy related procedures during SL
Positioning Server UE discovery and operation are developed by SA WG3.
6\. Sidelink Positioning assistant data is transferred among UE1/ .../UEn and
the SL Positioning Server UE.
7\. SL-PRS measurement is performed between UE1 and UE2/.../UEn and possibly
also amongst UE2/.../UEn.
8\. SL-PRS measurement data is transferred to the SL Positioning Server UE or
is transferred to UE1 if it supports SL Positioning Server functionalities, in
order to perform result calculation. Based on the type of the result received
in step 1, absolute location, relative location or ranging information is
calculated at the UE.
NOTE 3: Details of step 4-8 are developed by RAN WGs.
9\. Ranging/SL Positioning result is transferred to:
9a. SL Positioning Client UE over PC5 during procedures for Ranging/SL
Positioning service exposure through PC5 as defined in clause 6.6.1.1;
9b. RSPP application layer.
#