# Foreword
This Technical Report has been produced by the 3rd Generation Partnership
Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
In the present document, modal verbs have the following meanings:
**shall** indicates a mandatory requirement to do something
**shall not** indicates an interdiction (prohibition) to do something
The constructions \"shall\" and \"shall not\" are confined to the context of
normative provisions, and do not appear in Technical Reports.
The constructions \"must\" and \"must not\" are not used as substitutes for
\"shall\" and \"shall not\". Their use is avoided insofar as possible, and
they are not used in a normative context except in a direct citation from an
external, referenced, non-3GPP document, or so as to maintain continuity of
style when extending or modifying the provisions of such a referenced
document.
**should** indicates a recommendation to do something
**should not** indicates a recommendation not to do something
**may** indicates permission to do something
**need not** indicates permission not to do something
The construction \"may not\" is ambiguous and is not used in normative
elements. The unambiguous constructions \"might not\" or \"shall not\" are
used instead, depending upon the meaning intended.
**can** indicates that something is possible
**cannot** indicates that something is impossible
The constructions \"can\" and \"cannot\" are not substitutes for \"may\" and
\"need not\".
**will** indicates that something is certain or expected to happen as a result
of action taken by an agency the behaviour of which is outside the scope of
the present document
**will not** indicates that something is certain or expected not to happen as
a result of action taken by an agency the behaviour of which is outside the
scope of the present document
**might** indicates a likelihood that something will happen as a result of
action taken by some agency the behaviour of which is outside the scope of the
present document
**might not** indicates a likelihood that something will not happen as a
result of action taken by some agency the behaviour of which is outside the
scope of the present document
In addition:
**is** (or any other verb in the indicative mood) indicates a statement of
fact
**is not** (or any other negative verb in the indicative mood) indicates a
statement of fact
The constructions \"is\" and \"is not\" do not indicate requirements.
# 1 Scope
The objective of this Technical Report is to study whether and how to enable
3GPP support for DetNet such that a mapping is provided between the central
DetNet controller entity (as defined in IETF) and the 5G system. Mapping
involves translation of DetNet traffic profile and flow specification to 5GS
QoS parameters and TSCAI. The study also considers which information needs to
be exposed from the 5G system to the DetNet controller.
The study scope assumes the following:
\- Only IP based DetNet is in the scope of the work; MPLS based DetNet is out
of scope.
\- DetNet over Ethernet TSN is not in the scope of the work as it can be
supported based on existing 3GPP and IETF standards.
\- It is out of scope to support for edge DetNet node functions in the 3GPP
network.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] IETF RFC 8655: \"Deterministic Networking Architecture\".
[3] IETF RFC 8939: \"Deterministic Networking (DetNet) Data Plane: IP\".
[4] IETF RFC 9016: \"Flow and Service Information Model for Deterministic
Networking (DetNet)\".
[5] draft-ietf-detnet-yang: \"Deterministic Networking (DetNet) YANG Model\".
[6] IETF RFC 8344: \"A YANG Data Model for IP Management\".
[7] IETF RFC 8343: \"A YANG Data Model for Interface Management\".
[8] IETF RFC 6241: \"Network Configuration Protocol (NETCONF) \".
[9] IETF RFC 8040: \"RESTCONF Protocol\".
[10] IETF RFC 6021: \"Common YANG Data Types\".
[11] IETF RFC 8349: \"A YANG Data Model for Routing Management (NMDA
Version)\".
[12] 3GPP TS 23.501: \"System architecture for the 5G System (5GS); Stage 2\".
[13] 3GPP TS 23.502: \"Procedures for the 5G System; Stage 2\".
[14] 3GPP TS 23.503: \"Policy and charging control framework for the 5G System
(5GS); Stage 2\".
[15] 3GPP TS 29.514: \"5G System; Policy Authorization Service; Stage 3\".
# 3 Definitions of terms and abbreviations
## 3.1 Terms
For the purposes of the present document, the terms given in TR 21.905 [1]
apply.
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in TR 21.905
[1] and the following apply. An abbreviation defined in the present document
takes precedence over the definition of the same abbreviation, if any, in TR
21.905 [1].
DetNet Deterministic Networking
# 4 Architecture Assumptions
The study has the following architecture assumptions:
\- DetNet may be used in combination with time synchronization mechanisms as
defined in Rel-17 but does not require usage of these mechanisms.
\- Since synchronization mechanisms that can be used are out of the scope in
IETF DetNet specifications, the time synchronization framework in Release 17
is not modified for this study.
\- Existing 3GPP routing mechanisms can be re-used for DetNet; no new routing
function in the 3GPP system is to be defined.
\- The existing filtering mechanisms can be re-used in the UE and in the UPF
to identify the traffic for QoS differentiation.
\- It is out of scope to extend 3GPP multicast mechanisms, but the existing
multicast capabilities can be re-used for DetNet communications.
\- IP based DetNet traffic is carried in PDU Sessions of IP type.
\- The mapping functionality for DetNet is realized in the TSCTSF.
\- The solutions should reuse the functionality of the TSC framework defined
in Release 17 where applicable.
\- The study considers 5GS acting as a DetNet node in the DetNet domain. Use
cases where the 5GS acts as a sub-network (see RFC 8655 [2] clause 4.1.2) are
also possible but do not require additional 3GPP standardization. A special
case where the 5GS can act as a sub-network is when the 5GS acts as a TSN
network, which is already supported based on 3GPP Release 16-17.
\- The study considers the DetNet forwarding sub-layer related functions that
are applicable to the 5GS. For the IP case according to RFC 8939 [3] clause 1,
no service sub-layer function needs to be defined.
\- The granularity of the 5GS DetNet node is per UPF for each network
instance.
\- The solutions shall not have any 5G AN and UE impacts
The 5G System is extended to support the following:
\- The UE is part of the 5GS logical DetNet Node, thus is not a DetNet Node or
End System on its own
The reference architecture is shown as below:
Editor\'s note: It is FFS whether the NEF can be used between the DetNet
controller and the TSCTSF.
Editor\'s note: The protocol interactions between TSCTSF and the DetNet
controller are FFS.
# 5 Key Issues
## 5.1 Key Issue #1: 5GS DetNet node reporting
### 5.1.1 Description
Clause 4.8 of IETF RFC 8655 [2] describes the Resources, Capabilities, and
Adjacencies which may be reported by DetNet node to DetNet CPF (Controller
Plane Function).
For this Key Issue, the following areas should be studied:
\- which information the 5GS needs to report;
\- how the 5GS collects the information to report.
The solution should clarify whether the NEF could be deployed between the
TSCTSF and the DetNet controller.
## 5.2 Key Issue #2: Provisioning DetNet configuration from the DetNet
controller to 5GS
### 5.2.1 Description
A DetNet controller may provide DetNet configuration as defined in ietf-detnet
YANG module to the 5GS acting as a DetNet node. This key issue will study how
to map the DetNet configuration.
The DetNet controller communicates with the 5G system through TSCTSF. DetNet
Flow-Related Parameters may be provided by the DetNet controller as defined in
draft-ietf-detnet-yang [5]. The TSCTSF should map the parameters provided by
the DetNet controller into 5G QoS parameters or other parameters e.g. TSCAI to
configure 5GS flows for the DetNet traffic.
This KI will address:
\- Which parameters provided by the DetNet controller should be mapped into
which 5G parameters.
\- How the 5GS finds the PDU Sessions corresponding to the given DetNet
configuration.
\- What mechanisms are used in 5GS to configure the system according to the
configuration provided by the DetNet controller.
The solution should clarify whether the NEF could be deployed between the
TSCTSF and the DetNet controller.
# 6 Solutions
## 6.1 Solution #1 for Key Issue #1: Node and neighbour information reporting
to DetNet controller
### 6.1.1 Introduction
The 5GS may report information about the node and its interfaces which
correspond to the PDU Sessions (device side) and UPF interfaces (network
side). The reporting from the TSCTSF to the DetNet controller also referred to
as CPF, Controller Plane Function) is carried out using IETF protocols.
The assumed architecture is shown in the figure below. On the device side, we
typically have an end host as a DetNet system that makes use of the DetNet
functionality. Note that the end host does not have to be DetNet aware.
Figure 6.1.1-1: Architecture for DetNet integration of 5GS
### 6.1.2 Functional Description
**Information to report**
A DetNet node may report the following information. There can be multiple
options regarding the detailed use of parameters, and the choice is up to the
needs of the given implementation and deployment.
\- The interfaces of the 5GS acting as a DetNet node can be reported based on
the YANG model in RFC 8344 [6]. That model is in turn based on RFC 8343 [7].
The model includes for each interface
\- if-Index and name to identify the interface (see below for more details);
\- type of the interface, which can identify whether it is a 3GPP interface on
the device side or a fixed interface on the network side;
\- IP address and subnet;
\- when available in the case of network side interfaces, list of neighbour IP
address and link layer address (which could be based on ARP or Ipv6 neighbour
discovery). In the case of device side interfaces the solution does not assume
neighbours; only the hosts that are reachable with the assigned IP address(es)
on the given PDU Session are reachable.
\- In addition to the list of interfaces, the 5GS node itself also needs to be
identified. There can be alternatives:
\- The identification can be based on a YANG parameter of host type as defined
in RFC 6021 [10] which can be either an IP address or a domain name. With this
approach, the host is identified towards the DetNet controller, and the host
identification is also provided together with the configuration.
\- Alternatively, the DetNet node may also be identified by the IP address
terminating the interface on the TSCTSF towards the DetNet controller, but in
that case that IP address needs to be different for each logical DetNet node
which is on a per UPF granularity.
\- It is useful for the DetNet controller to be able to identify that the 5GS
node is a 3GPP defined 5GS system, rather than a router with fixed interfaces
only. This knowledge can be useful for the DetNet controller to consider for
the QoS that can be provided for a flow. There can be several alternatives how
this is determined in the DetNet controller. The alternatives below may be
used depending on the needs of the deployment; the specification does not need
to mandate a given mechanism.
\- The interface type (as mentioned above) may indicate a 3GPP interface. A
node having a 3GPP interface can be considered a 5GS system for a DetNet
controller.
\- If the 5GS DetNet node is identified by a domain name, that domain name may
include a substring that identify the node as a 5GS node.
\- The DetNet controller may be pre-configured with a list or range of the
node addresses or names that correspond to 5GS nodes.
The reporting from the 5GS node to the DetNet controller is performed using
YANG data models that can be carried using Netconf RFC 6241 [8] or Restconf
RFC 8040 [9]. Given that DetNet is an IETF solution that can be used for a
number of link layer technologies, IETF protocols are assumed at the DetNet
controller.
The solution does not require an NEF between the DetNet controller and the
TSCTSF, since the DetNet controller is assumed to be trusted by the operator
and can influence the QoS of the traffic flows. A NEF anyway cannot intercept
the messages carried over Netconf or Restconf, which may be encrypted using
TLS.
**Collection of the information**
The information about 5GS acting as a DetNet node is provided to the TSCTSF
within the 3GPP system as follows.
\- For each PDU Session, the UPF generates a port number that is unique to the
given UPF in the given network instance, similarly as in the Release 17 case.
The port number is sent via the SMF and PCF to the TSCTSF. Similarly, a port
number is generated for each interface on the UPF in the network side. The
port number is used as the if-Index. Based on the if-Index, the name is
generated, e.g. by using the if-Index as a string, possibly adding a substring
prefix or postfix based on configuration. Note that the if-Index and the name
of the interface contain essentially the same information, but both can be
provided, since the name is used as the key in the YANG model, while if-Index
is usually considered as the basis for interface management of IP nodes.
\- For each PDU Session, the allocated IP address is sent to the TSCTSF as in
Release 17. Similarly, for each network interface of the UPF, the IP address
and subnet is sent to the TSCTSF.
In the case of interfaces that correspond to the PDU Sessions, the information
about the port number as well as the IP address is delivered to the TSCTSF
without requiring a PMIC container from the UE. It can be useful to be able to
use DetNet even without having to require a PMIC, which makes the DetNet
solution easier to deploy (but using a PMIC is not excluded, e.g. for time
synch purposes). Based on configuration in the PCF for a given DNN, S-NSSAI,
the TSCTSF is notified of the information.
In the case of interfaces that correspond to the network side interfaces of
the UPF, the information is carried in the PMIC, together with the port number
and user plane node ID that is sent outside of the PMIC. The PMIC in this case
includes the IP address, the subnet, and the neighbour information (list of
neighbour IP addresses when available).
The UPF also provides a user plane node ID. This can be constructed based on
an IP address of the UPF, or also using the DNN, S-NSSAI or network instance
known at the UPF, or it can be derived in other ways. The TSCTSF uses the user
plane node ID provided by the UPF, and may optionally update it as needed
(e.g. convert it to a domain name string, or map it to an IP address used for
a network management protocol), to determine the host identification used for
the given 5GS node.
### 6.1.3 Procedures
The charts below show a high level view of the procedures. Only the relevant
steps are discussed, unaffected steps are not shown in the figures and not
discussed in the explanations.
For the device side ports of the 5GS node, the PDU Session Establishment
procedure is used with the following extensions. (Similar extensions possible
for the PDU Session Modification and PDU Session Release procedure.) The
functionality is based on the Release 16-17 IioT functions.
Figure 6.1.3-1: Signalling at PDU Session Establishment
1\. In the N4 Session Establishment Request, the SMF requests the UPF to
provide port and node information. The SMF request may be based on
configuration for the given DNN, S-NSSAI.
2\. The UPF provides a port number that identifies the given port
corresponding to the PDU Session in the logical 5GS node, and provides a user-
plane node ID.
3\. As part of the SMF initiated SM Policy Association Modification procedure,
the SMF provides node and port information to the PCF, including the port
number and the user plane node ID as well as the UE IP address. For this,
based on configuration for the given DNN, S-NSSAI, the SMF is armed for
reporting this information to the PCF.
4\. As part of the SMF initiated SM Policy Association Modification procedure,
the PCF reports the node and port information to the TSCTSF.
5\. The TSCTSF provides information about the change in the 5GS node state,
including information that is derived from the info received in the previous
step. The detailed signalling for this step may depend on the actual IETF
protocol used between the TSCTSF and the DetNet controller plane function
(CPF). The update of the information may take place immediately based on a
notification mechanism from the TSCTSF to the CPF, or it may take place when
the CPF requests for the information.
For the network side ports of the 5GS node, as in Releases 16-17, the N4
Session Level Reporting Procedure from the UPF to the SMF is used followed by
the SMF initiated SM Policy Association Modification procedure. The signalling
is extended with the relevant new parameters as illustrated below.
Figure 6.1.3-2: Signalling for updating node and port information
1\. As part of N4 reporting, the UPF provides a port and node information.
This includes the port number that identifies the given port, and provides a
user-plane node ID. The UPF also provides the IP address and subnet that is
used on the given interface, the type of the interface, and if available, the
IP addresses of the neighbours. This information can be included in the PMIC.
2\. As part of the SMF initiated SM Policy Association Modification procedure,
the SMF provides node and port information to the PCF, including the port
number and the user plane node ID and other information provided by the UPF.
For this, based on configuration for the given DNN, S-NSSAI, the SMF is armed
for reporting this information to the PCF.
3\. As part of the SMF initiated SM Policy Association Modification procedure,
the PCF reports the node and port information to the TSCTSF.
4\. The TSCTSF provides information about the change in the 5GS node state,
including information that is derived from the info received in the previous
step. The detailed signalling for this step may depend on the actual IETF
protocol used between the TSCTSF and the DetNet controller plane function
(CPF). The update of the information may take place immediately based on a
notification mechanism from the TSCTSF to the CPF, or it may take place when
the CPF requests for the information.
### 6.1.4 Impacts on existing entities and interfaces
UPF:
\- Provide node and interface information, optionally neighbour information.
Generation of PMIC.
SMF:
\- Configuration update to trigger signalling.
TSCTSF:
\- Map collected information to IETF YANG models and provide to CPF.
## 6.2 Solution #2 for Key Issue #1: Network function enhancement to support
5GS DetNet node reporting
### 6.2.1 Introduction
In 5G mobile network, in order to realize DetNet deterministic forwarding
mechanism and ensure the certainty of wide area, the DetNet control plane
requires the DetNet node to report relevant information to the DetNet control
plane before issuing the strategy.
IETF RFC 8655 [2] stipulates that DetNet nodes need to report corresponding
information to DetNet control plane, including recognization of adjacent
DetNet nodes.
Therefore, as a DetNet node, 5GS system should also report corresponding
information to the DetNet control plane to assist the DetNet control plane in
making corresponding forwarding strategy.
This report puts forward the method for the DetNet control plane to obtain the
topology of adjacent 5GS DetNet node, and defines the mechanism of 5GS as a
DetNet node to the DetNet control plane. An enhanced architecture supporting
the reporting of mobile network information to DetNet control layer is
designed. The architecture enhances the functions of NEF, SMF, and UPF
respectively, so as to support the information collection, subscription and
reporting of DetNet capability.
### 6.2.2 Functional Description
Figure 6.2.2-1: Enhanced architecture and network function
As shown in the figure1, the 3GPP exposure architecture is enhanced to support
DetNet node reporting. Extend NEF function to support the capability exposure
of DetNet node, and extend SMF, and UPF to support DetNet information
reporting function. The related network functions are enhanced to support
following features:
\- Extend NEF function to support the exposure of DetNet capability:
\- Receive the capability exposure subscription from DetNet control plane, and
report related ability to it;
\- Forward DetNet information reporting requirements to SMF based on DetNet
controller subscription, including reporting contents, reporting frequency,
indication of direct notification from UPF, etc..
\- Enhance the function of NEF to support the authentication of DetNet
controller.
\- The signalling protocol between NEF and DetNet control uses IETF Netconf
[8] or Restconf [9].
\- Expand SMF to support DetNet information reporting function. Based on the
reporting requirements issued by NEF, SMF receives DetNet related information
reported by UPF on N4 interface, and sends it to NEF as required.
\- Expand UPF to support DetNet information reporting function, and report the
following information through N4 interface, or via network exposure service:
\- Identity and link with adjacent DetNet nodes: the identification of
surrounding nodes can be obtained through routing broadcast messages on N6.
\- When the PDU session is established, the UPF detects the DetNet node on the
N6 interface, associates it with the PDU session, and sends the information to
the SMF in the N4 PDU session update message, and the SMF forwards it to the
NEF for external reporting.
The collection and reporting methods of network information are as follows:
\- Reporting method of adjacent DetNet nodes for the UPF:
\- UPF obtains identification of DetNet nodes around the N6 interface through
BGP and other routing broadcast messages.
\- UPF reports the identification and link of adjacent DetNet nodes to SMF
through N4 interface, then opens the information to DetNet control plane.
\- The UPF reports the identification and link of adjacent DetNet nodes
information to the SMF on the N4 interface. And the SMF forwards the
information to the NEF. There are no impacts on the PCF and TSCTSF.
### 6.2.3 Procedures
Figure 6.2.3-1: Subscription and reporting process of DetNet ability opening
1\. Before issuing the forwarding strategy, or based on the need of periodic
collection of the DetNet capability, the DetNet control plane subscribes the
capability exposure to NEF, which includes the information to be reported
,reporting frequency and triggers.
2\. NEF forwards the requested capability reporting requirements to SMF.
3\. SMF subscribes the capability reporting of DetNet from UPF.
4\. According to the subscription request, UPF collects the relevant
information of DetNet on the network side, including N6 interface topology;
UPF may report the identification and link of adjacent DetNet nodes to NEF
directly via network exposure service if received indication of direct
notification from NEF.
5\. SMF integrates the reporting messages received on the N4 interface to form
the reporting data of 5GS as a DetNet node, such as adjacent nodes, which can
be collected by NEF and be reported to the DetNet controller.
6\. NEF reports corresponding information to DetNet control plane.
7\. The DetNet control plane generates the DetNet forwarding strategy based on
the received reports.
In the above figure, steps 1-3 is the capability reporting subscription
procedure, and steps 4-6 is the capability reporting procedure.
### 6.2.4 Impacts on existing entities and interfaces
The new requirements are mainly aimed at the functional enhancement of NEF,
SMF and UPF modules.
Extend NEF to achieve:
\- Receiving subscription information from DetNet control plane and reporting
related capabilities to the outside,
\- Based on subscription requirements, send DetNet information reporting
requirements to SMF, including the information to be reported, reporting
frequency, etc.
Extend SMF to achieve:
\- Based on the reporting requirements issued by NEF, SMF receives DetNet
related information reported by UPF on N4 interface.
\- Comprehensively process relevant information and send it to NEF according
to the required frequency or conditions.
Extend UPF to achieve:
\- Report the identity and link with adjacent DetNet nodes through N4
interface.
\- The UPF reports the identification and link of adjacent DetNet nodes
information to the SMF on the N4 interface. And the SMF forwards the
information to the NEF. There are no impacts on the PCF and TSCTSF.
### 6.2.5 Solution evaluation
\- Adjust the strategy in time when the network capability changes.
\- Better ensure the implementation of certainty on WAN.
\- Without significantly changing the original framework, the information
requirements of DetNet control plane can be met by expanding the existing
network function.
## 6.3 Solution #3 for Key Issue #2: Mapping from DetNet YANG model to 3GPP
configuration
### 6.3.1 Introduction
The assumed architecture is shown in the figure below. On the device side, we
typically have an end host as a DetNet system that makes use of the DetNet
functionality. Note that the end host does not have to be DetNet aware.
Figure 6.3.1-1: DetNet logical reference architecture distribution in 5GC
The main principles of the solution are as follows.
\- In the DetNet YANG model (draft-ietf-detnet-yang [5]), the forwarding sub-
layer configuration and the traffic profile are for the mapping.
\- The forwarding sub-layer configuration identifies the flow and the
incoming, outgoing interfaces. Based on this information, the PDU Session and
the flow direction (uplink, downlink or whether it is UE to UE) can be
determined.
\- The DetNet traffic requirements in the traffic profile include the max-
latency, min-bandwidth and the max-loss, which can be converted to the 3GPP
delay, GFBR and PER requirements.
\- The YANG model as currently defined in IETF only includes the end to end
traffic requirements. There are two options: the TSCTSF may either derive the
per 5GS requirements from the end to end requirements, or the DetNet YANG
model is extended for the 5GS to include also the requirements specific to the
5GS.
\- The DetNet traffic specification is used to determine the periodicity and
the bandwidth requirement of the flow.
### 6.3.2 Functional Description
**Parameters to consider from the DetNet controller**
The YANG model in draft-ietf-detnet-yang [5] describes the parameters that are
used by the DetNet nodes to set up the configuration for DetNet. As the 5GS
realizes the forwarding sub-layer, it is the forwarding sub-layer
configuration that needs to be considered in the YANG model. In addition, the
YANG configuration can provide the Traffic Profile that includes the traffic
requirements and the traffic specification that could be used by the 5GS
system.
The DetNet YANG model contains the following parameters in the traffic
requirements referenced in the forwarding sub-layer which can be mapped to
3GPP parameters.
\- Max-latency, which relates to the required delay in the 5GS.
\- Min-bandwidth, which relates to the guaranteed bitrate that is needed for
the flow (GFBR).
\- Max-loss, which relates to the PER that is being proposed to be added as a
new parameter in the release 18 in the 5TRS_URLLC study that can be provided
to the 5GS.
The DetNet YANG model also contains other parameters in the traffic profile
that is referenced in the forwarding sub-layer which do not easily map to 3GPP
parameters: max-latency-variation, max-consecutive-loss-tolerance, max-mis-
ordering. There is no straightforward 3GPP mapping for these parameters as
their definition differs from the current 3GPP parameters. Hence it is
proposed not to standardize any mapping for these parameters in the current
release.
The traffic specification referenced in the forwarding sub-layer includes the
following parameters that can be mapped.
\- Interval: this corresponds to the periodicity in the 3GPP system.
\- max-pkts-per-interval, max-payload-size: can be used to determine the
maximum burst size; together with the interval parameter, the required
bandwidth can be calculated, which corresponds to the MFBR.
The traffic specification can also contain min-pkts-per-interval, min-payload-
size, which do not map to any 3GPP parameters hence these are not proposed to
be supported in the standardized mapping.
The TSCTSF can use the Interval to generate the periodicity value in the
TSCAI.
Regarding the traffic requirements, it must be noted that the current DetNet
YANG model includes only the end to end traffic requirements (e.g. in terms of
maximal latency), and not the per node requirements that need to be realized
by a given node. Even though it is the per node requirements that matter for
the configuration of a given node, that information is currently not included
in the IETF model as of today.
Based on the current IETF YANG model as currently defined, two main options
can be used by the 5GS acting as a DetNet node.
\- The TSCTSF derives the per node traffic requirements from the end to end
traffic requirements using a pre-configured mapping in the TSCTSF, based on
the knowledge of the given deployment. E.g. take a given fraction of the end
to end requirements and/or subtract a constant that corresponds to the rest of
the network.
\- Extend the IETF YANG model with additional parameters that apply to the 5GS
system on a per node basis. The YANG modelling language allows for
extensibility. That can be achieved by a 3GPP defined YANG model that imports
the IETF defined DetNet YANG model and adds the needed per node parameters. In
that way, the model used by 5GS remains compatible with IETF DetNet, but
allows for the DetNet controller to provide the traffic requirements on a per
node basis when the DetNet controller is prepared for this and when it is
aware that the DetNet node is a 5GS. (That knowledge can be available based on
the exposure solution in Key Issue #1.)
Editor\'s note: Whether and How to map the E2E traffic requirement is FFS.
Editor\'s note: Whether and How to Extend the IETF YANG model is FFS.
**Identification of the PDU Sessions**
The TSCTSF receives the DetNet YANG forwarding configuration, which refers to
the incoming and outgoing interfaces in 5GS. These are based on the interface
identification that is provided in the reporting from the 5GS to the DetNet
controller as part of Key Issue #1 solution. The interface is identified by
its name, which is derived from the if-Index, which in turn is based on the
port number that is set by the UPF. The TSCTSF stores the mapping between the
port number (if-Index and the corresponding interface name) and the PDU
Session, hence the PDU Session can be identified. The incoming and outgoing
interfaces also identify whether the flow is uplink or downlink, hence flow
direction is known, and also whether it is a UE to UE flow.
The TSCTSF may also perform a verification whether the 3GPP system routes the
given flow as defined in the DetNet forwarding sub-layer. Note that it is out
of scope of the current study to update the 3GPP system\'s routing based on
the DetNet configuration, but it can be possible to verify in the TSCTSF
whether the incoming and outgoing interfaces in the DetNet configuration
correspond to a valid routing in the 3GPP system. As an example, the TSCTSF
may verify whether the destination IP address in a downlink flow towards a
given interface corresponding to a PDU Session is the same IP address that is
assigned for the same PDU Session. As another example, the TSCTSF may be
preconfigured with the knowledge whether or not UE to UE routing is enabled or
not. The TSCTSF may also verify other parameters of the configuration, and
indicate that the configuration for the flow is not accepted if the
configuration is outside of the supported range, based on TSCTSF
preconfiguration. As a result of this optional verification, the TSCTSF may
decide to accept or reject a given DetNet configuration.
In the case of a UE to UE flow, if the system allows for such traffic, the
TSCTSF generates separate requests on PDU Session basis towards the PCF(s) for
the uplink and the downlink legs of the flow.
**3GPP configuration for DetNet**
The PCF receives the relevant QoS requirements from the TSCTSF as well as the
flow description as determined by the TSCTSF based on the DetNet
configuration. The stage 3 definition of the flow description is extended
according to the needs of DetNet, also including the DSCP value and optionally
Ipv6 flow label and Ipsec SPI. The PCF determines the 3GPP QoS parameters
based on the QoS requirements provided by the TSCTSF. The PCF may also
consider the DSCP value in the flow description. The PCF may establish new QoS
flows or modify existing QoS flows as needed.
**Deployment option: configuration of the implementation specific routing
functionality on N6**
Below we clarify a possible deployment option that does not require additional
3GPP specification.
The UPF node may have routing functionality on the N6 interface side which is
implementation specific. The 3GPP specifications are not responsible for
setting the routing on the N6 interface side. In deployments where the
implementation specific routing functionality on the N6 side also needs to be
configured for DetNet, direct configuration can be used between the CPF and
the routing functionality co-located with the UPF. This case can be modelled
with a single interface between the UPF and the router; when the UPF and the
router are co-located in the same physical node, then the interface between
them can be modelled as a single virtual interface. This optional deployment
is shown in the figure below. There is no need to use this option in
deployments where there is no need for routing configuration by the CPF on the
N6 side.
Figure 6.3.2-1: Optional deployment scenario with CPF control of N6 routing
**Other considerations**
The solution does not require an NEF between the DetNet controller and the
TSCTSF, since the DetNet controller is assumed to be trusted by the operator
and can influence the QoS of the traffic flows.
### 6.3.3 Procedures
The figure illustrates the procedure for the mapping of the DetNet
configuration.
Figure 6.3.3-1: Signalling for setting up YANG configuration for DetNet
1\. The DetNet controller provides YANG configuration to the TSCTSF. The
TSCTSF uses the identity of the incoming and outgoing interfaces to determine
the affected PDU Session(s) and whether the flow is uplink or downlink. (For
this, the information collected in the solution to Key Issue #1 is used.) The
TSCTSF also determines if the flow is UE to UE in which case two PDU Sessions
will be affected for the flow and can also verify whether the specified
routing is applicable. The TSCTSF maps the configuration as described above
and calculates the delay and PER requirements and the TSC Assistance Container
for each flow description.
2\. The TSCTSF provides the mapped parameters and the flow description to the
PCF(s) on PDU Session basis.
3\. The PCF(s) determines, based on the parameters received from the TSCTSF,
whether the existing QoS flows need to be modified or a new QoS flow needs to
be created. Additionally, the TSC Assistance Container is provided to the SMF.
4\. The PCF responds to the TSCTSF, which includes information about the
success of the configuration.
5\. The TSCTSF provides a response to the CPF regarding the success of the
configuration setup. Optionally, it can be possible to provide 3GPP specific
status codes to provide additional information if the requested configuration
could not be set up.
If the status of the flow changes later on for any reason, the TSCTSF notifies
the CPF. Upon release of a PDU Session that is part of the existing DetNet
configuration, the PCF notifies the TSCTSF for the PDU Session release, and
TSCTSF notifies the CPF on status of the flow.
### 6.3.4 Impacts on existing entities and interfaces
TSCTSF: Maintains mapping between the port number in a UPF and the PDU Session
and the associated interface in the DetNet configuration. Mapping of DetNet
parameters and providing information to the DetNet controller whether the
configuration is accepted.
PCF:
\- Stage 3 definition of flow description parameter is extended.
## 6.4 Solution #4 for Key Issue #2: DetNet Flow Mapping
### 6.4.1 Introduction
This contribution discusses about which parameters should be mapped into which
5G parameters to support the interworking between 5GS and DetNet controller.
This contribution proposes an alternative mapping between DetNet flow and QoS
flow.
According to clause 5 of IETF RFC 9016 [4], the DetNet Flow-related parameters
in the information model used in the DetNet controller can be classified into
3 categories: DetNet Flow identification parameters (including DnFlowID,
DnFlowFormat and DnFlowSpecification etc.), DetNet Traffic Specification
parameters (DnTrafficSpecification) and DetNet Flow requirements (e.g.
DnFlowRequirements). DetNet Traffic Specification parameters parameters can be
mapped into QFI and Packet Filter Sets to identify the DetNet Flow. The
configuration that is sent to the 5GS is based on the Yang model in draft-
ietf-detnet-yang [5]. Part of the DetNet Traffic Specification parameters and
DetNet Flow requirements can be mapped into 5GS QoS related requirements (e.g.
5QI related QoS requirements and TSCAI related TSC requirements).
The DetNet Flow requirements provided by the DetNet controller are all per
DetNet Flow parameters for the whole DetNet network. Some of the parameters of
the requirements (e.g. maximum latency of the DetNet Flow) cannot be mapped to
5GS QoS requirements directly and the status/capability information of the
other nodes in the DetNet flow path is needed.
### 6.4.2 Functional Description
The TSC architecture defined in clause 4.4.8.3 of TS 23.501 [12] is reused for
support of DetNet functions by the following function enhancement.
\- New DetNet AF is introduced to help TSCTSF support DetNet flow mapping. The
DetNet controller sends the DetNet related parameters of the DetNet flow to
DetNet AF and DetNet AF maps them to 5GS QoS requirements or TSC requirements
and send the requirements to TSCTSF. Then TSCTSF interacts with PCF to
configure the TSC QoS flow which is mapped to the DetNet flow.
NOTE: This solution follows the Rel-17 architecture for AF requested support
of Time Sensitive Communication and Time Synchronization defined in clause
4.4.8.3 of TS 23.501 [12]. Double mapping is used: DetNet controller interacts
with DetNet AF using the IETF protocol defined in RFC 9016 [4] and draft-ietf-
detnet-yang [5], and DetNet AF interacts with TSCTSF using the Rel-17 TSCTSF
interfaces defined for TSC services. NEF may be deployed between the DetNet AF
and TSCTSF according to the current architecture.
PCF generates the QoS related policy and distributes the policy to SMF based
on the current Policy control framework. TSCTSF generates the TSCAI according
to the requirements sent by DetNet AF.
Table 6.4.2-1 shows the mapping between DetNet related parameters and 5GS QoS
parameters.
Table 6.4.2-1: Mapping between DetNet related parameters and 5GS parameters
+----------------------+----------------------+----------------------+ | DetNet related | 5GS requirement | Whether the DetNet | | parameters | category | related parameters | | | | are node level info | | | | or Detnet flow level | | | | (NOTE 2) | +======================+======================+======================+ | M | TBD | Y | | axPacketsPerInterval | | | | and Max PayloadSize | | | +----------------------+----------------------+----------------------+ | MinBandwidth | QoS requirement | Y | +----------------------+----------------------+----------------------+ | MaxLatency | QoS requirement | N | +----------------------+----------------------+----------------------+ | MaxLoss | QoS requirement | N | +----------------------+----------------------+----------------------+ | MaxCons | TBD (NOTE 1) | N | | ecutiveLossTolerance | | | +----------------------+----------------------+----------------------+ | Interval | TSC information | Y | +----------------------+----------------------+----------------------+ | Next hop information | TSC information | Y | | | (Flow direction) | | +----------------------+----------------------+----------------------+ | MinPayloadSize | TBD | Y | +----------------------+----------------------+----------------------+ | M | TBD | Y | | inPacketsPerInterval | | | +----------------------+----------------------+----------------------+ | MaxLatencyVariation | TBD | N | +----------------------+----------------------+----------------------+ | MaxMisordering | TBD | N | +----------------------+----------------------+----------------------+ | NOTE 1: TBD means no | | | | current 5GS | | | | parameters can be | | | | used for the mapping | | | | of DetNet related | | | | parameters. | | | | | | | | NOTE 2: Indicates | | | | whether the DetNet | | | | related parameters | | | | can be used as node | | | | level parameters to | | | | configure the 5GS | | | | QoS.. Y=yes, N=No. | | | +----------------------+----------------------+----------------------+
Editor\'s note: Whether and how the DetNet related parameters marked as TBD in
the table should be mapped to 5GS requirements is FFS.
The DetNet Flow requirements provided by the DetNet controller are all per
DetNet Flow parameters for the whole DetNet network. The parameters in table
6.4.2-1 with value \'N\' in the third column can not be mapped to 5GS QoS
parameters directly and the status/capability information of the other nodes
in the DetNet flow path is needed.
Editor\'s note: Whether and how to get the other DetNet nodes\' information to
support DetNet network is FFS.
### 6.4.3 Procedures
The existing policy control framework is reused. The only enhancement is that
the DetNet AF can provide the mapped 5GS QoS requirements/ TSC requirements to
to TSCTSF for support of DetNet flow transmission. The detailed procedure is
shown in Figure 6.4.3-1:
Figure 6.4.3-1 QoS flow configuration for DetNet
1\. The DetNet controller provides YANG configuration with the DetNet node ID
(i.e. UPF node IP address) to the DetNet AF. The DetNet AF finds the mapped UE
address according to the DetNet node ID, route interface information (DS-TT or
NW-TT IP address as ingress/egress interface), Next hop information in YANG
configuration (neighbouring DetNet node IP addresses). The DetNet AF maps the
configuration as described above and calculates the TSC requirements for each
DetNet flow.
2\. The DetNet AF provides the mapped TSC requirements to TSCTSF (optionally
via NEF).
3\. The TSCTSF calculates and provides the mapped QoS parameters, TSCAC and
the flow description to the PCF(s) according to the TSC requirements.
4\. The PCF(s) determines, based on the parameters received from the TSCTSF,
whether the existing QoS flows need to be modified or a new QoS flow needs to
be created. TSCAC is provided to the SMF.
5\. The PCF responds to the TSCTSF with the result of the configuration.
6\. The TSCTSF provides a response to the DetNet AF.
NOTE: Step 2 to 6 refer to the clause 4.15.6.6 of TS 23.502 [13] for setting
up TSC AF session with required QoS.
7\. DetNet AF responds to DetNet controller.
### 6.4.4 Impacts on existing entities and interfaces
DetNet AF:
\- Support of mapping DetNet flow related parameters to 5GS QoS requirements
and TSC requirements and sending the parameters to TSCTSF (optionally via
NEF).
## 6.5 Solution #5 for Key Issue #2: Provisioning DetNet traffic to 5GS
parameters
### 6.5.1 Introduction
This solution describes how 5GS maps DetNet configuration parameters given
from the DetNet controller into 5GS parameters to handle DetNet traffic. There
are assumptions for the solution:
\- DetNet Flow-Related Parameters as defined in draft-ietf-detnet-yang [5] is
used as DetNet configuration parameters for DetNet traffic.
\- DetNet controller is located in either a different domain from the 5GS or
the same trust domain as the 5GS.
### 6.5.2 Functional Description
5GS does not support edge DetNet node functions and DetNet service sub-layer
functions, according to the scope and architecture assumptions in this TR,
That is, the 5GS supports the DetNet node functions and DetNet forwarding sub-
layer related functions except for service sub-layer functions. As a result,
this solution uses DetNet Flow-Related Parameters from the DetNet controller
as DetNet configuration parameters for DetNet traffic (Table 6.5.2-1).
Table 6.5.2-1: DetNet configuration parameters for DetNet traffic
+----------------+----------------+----------------+----------------+ | Parameters | Descriptions | 5GS Parameters | | +================+================+================+================+ | **DetNet Flow | | | | | attributes** | | | | +----------------+----------------+----------------+----------------+ | DnFlo | S | IP Packet | | | wSpecification | ourceIpAddress | Filter Set | | +----------------+----------------+----------------+----------------+ | | Destin | - Source IP | | | | ationIpAddress | address | | +----------------+----------------+----------------+----------------+ | | Ipv6FlowLabel | - Destination | | | | | IP address | | +----------------+----------------+----------------+----------------+ | | Dscp | - Flow label | | +----------------+----------------+----------------+----------------+ | | Protocol | - Type of | | | | | Service / | | | | | Traffic class | | +----------------+----------------+----------------+----------------+ | | SourcePort | - Protocol ID | | | | | | | | | | - Source port | | +----------------+----------------+----------------+----------------+ | | D | - Destination | | | | estinationPort | port | | +----------------+----------------+----------------+----------------+ | | IPSecSpi | - Security | | | | | parameter | | | | | index | | +----------------+----------------+----------------+----------------+ | DnTraffi | Interval | The period of | Periodicity | | cSpecification | | time in which | | | | | the traffic | | | | | specification | | | | | is specified | | +----------------+----------------+----------------+----------------+ | | MaxPack | The maximum | Maximum data | | | etsPerInterval | number of | burst size | | | | packets that | (MDBV) | | | | the Ingress | | | | | will transmit | | | | | in one | | | | | Interval | | +----------------+----------------+----------------+----------------+ | | MaxPayloadSize | The maximum | | | | | payload size | | | | | that the | | | | | Ingress will | | | | | transmit | | +----------------+----------------+----------------+----------------+ | | MinPayloadSize | The minimum | | | | | payload size | | | | | that the | | | | | Ingress will | | | | | transmit | | +----------------+----------------+----------------+----------------+ | | MinPack | The minimum | | | | etsPerInterval | number of | | | | | packets that | | | | | the Ingress | | | | | will transmit | | | | | in one | | | | | Interval | | +----------------+----------------+----------------+----------------+ | DnFlowStatus | Dn | | | | | IngressStatus: | | | | | None, Ready, | | | | | Failed, | | | | | OutOfService | | | +----------------+----------------+----------------+----------------+ | | D | | | | | nEgressStatus: | | | | | None, Ready, | | | | | PartialFailed, | | | | | Failed, | | | | | OutOfService | | | +----------------+----------------+----------------+----------------+ | | FailureCode | | | +----------------+----------------+----------------+----------------+ | **DetNet Flow | | | | | Requirement | | | | | attributes** | | | | +----------------+----------------+----------------+----------------+ | DnFl | MinBandwidth | | GFBR | | owRequirements | | | | +----------------+----------------+----------------+----------------+ | | MaxLatency | The maximum | PDB | | | | latency from | | | | | Ingress to | | | | | Egress(es) for | | | | | a single | | | | | packet of the | | | | | DetNet flow | | +----------------+----------------+----------------+----------------+ | | MaxLa | The difference | | | | tencyVariation | between the | | | | | minimum and | | | | | the maximum | | | | | end-to-end, | | | | | one-way | | | | | latency | | +----------------+----------------+----------------+----------------+ | | MaxLoss | The maximum | PER | | | | Packet Loss | | | | | Rate (PLR) | | | | | requirement | | | | | for the DetNet | | | | | flow between | | | | | the Ingress | | | | | and Egress(es) | | | | | and the loss | | | | | measurement | | | | | interval | | +----------------+----------------+----------------+----------------+ | | MaxConsecutiv | The maximum | | | | eLossTolerance | number of | | | | | consecutive | | | | | packets whose | | | | | loss can be | | | | | tolerated | | +----------------+----------------+----------------+----------------+ | | MaxMisordering | The tolerable | | | | | maximum number | | | | | of packets | | | | | that can be | | | | | received out | | | | | of order | | +----------------+----------------+----------------+----------------+
The TSCTSF converts DetNet configuration parameters for DetNet traffic into
5GS QoS parameters and TSCAI, such as Interval into Periodicity and
MaxPacketsPerInterval and MaxPayloadSize combined into MDBV. Due to the lack
of any minimum values for payload size or packets in the 5GS specification,
MinPayloadSize and MinPacketsPerInterval cannot currently be mapped into 5G
parameters.
In DnFlowRequirements, the MaxLatency, MaxLatencyVariation, MaxLoss,
MaxConsecutiveLossTolerance, and MaxMisordering attributes specify
requirements not in a single DetNet node but throughout the DetNet flow path.
Therefore, if IETF DetNet specifications define explicit requirements on a
DetNet node to enable DnFlowRequirements, how to provision them within the 5GS
is dependent on the IETF DetNet specifications. At the moment, the 5GS may
allow for the translation of MinBandwidth to GFBR, MaxLatency to PDB, and
MaxLoss to PER.
### 6.5.3 Procedures
This solution considers both the case where the DetNet controller is in a
different domain from the 5GS and the case where it is in the same trust
domain as the 5GS. Depending on whether the DetNet controller is within the
5GS domain or not, the NEF may be employed. The NEF may optionally be used,
according to the TR\'s conclusion.
#### 6.5.3.1 DetNet controller in a different domain from the 5GS
Using the Setting up an AF session with required QoS procedure as described in
Figure 4.15.6.6-1 of TS 23.502 [13], the DetNet controller sends to the NEF
DetNet configuration parameters defined in clause 6.5.2. The interface between
the DetNet controller and the NEF in this situation is different from the
procedure described in TS 23.502 [13].
Figure 6.5.3.1-1: Required TSC QoS procedure for DetNet traffic
The procedure of Setting up an AF session with required QoS in Figure
4.15.6.6-1 of TS 23.502 [13] is performed to handle DetNet traffic with the
following modifications and clarifications:
1\. The DetNet controller sends DetNet configuration parameters to the NEF.
3a. If the NEF receives DetNet configuration parameters from theDetNet
controller, the NEF forwards these received parameters in the
Ntsctsf_QoSandTSCAssistance_Create request message with additional DetNet
configuration parameters to the TSCTSF.
NOTE: This procedure works if the DetNet controller provides YANG
configuration via Restconf in accordance with IETF DetNet specifications.
#### 6.5.3.2 DetNet controller in the same trust domain as the 5GS
Without the NEF, the DetNet controller directly sends to the TSCTSFDetNet
configuration parameters.
Figure 6.5.3.2-1: Procedure of requesting TSC QoS for DetNet traffic
1\. If the DetNet controller is considered to be trusted by the operator, it
sends DetNet configuration parameters to interact directly with TSCTSF.
NOTE: This procedure works if the DetNet controller provides YANG
configuration via Restconf in accordance with IETF DetNet specifications.
### 6.5.4 Impacts on existing entities and interfaces
**TSCTSF:**
\- Needs to support to accept YANG configuration via Restconf from the DetNet
controller.
\- Needs to support converting DetNet configuration parameters into 5GS QoS
parameters.
**NEF:**
\- (Optional) May support to accept YANG configuration via Restconf from the
DetNet controller.
## 6.6 Solution #6 for Key Issue #2: Solution for provisioning DetNet
configuration from the DetNet controller to 5GS
### 6.6.1 Introduction
The goal of FS_DetNet is to achieve deterministic packet forwarding in the
wide area network. In order to support DetNet deterministic forwarding
mechanism in 5G mobile network and realize wide area certainty, it is
necessary to study how to map DetNet parameters to 5GS parameters.
IETF RFC 9016 [4] defines the information model of the DetNet flow, draft-
ietf-detnet-yang [5] defines the configuration, including DetNet flow
description, and differentiate service requirements. Clause 5.7 of TS 23.501
[12] defines QoS models and parameters.
This contribution proposes an enhanced architecture to support the
interworking between 5GS and DetNet network. This architecture enhances the
function of TSCTSF to support DetNet flow mapping.
The architecture proposed by this contribution is based on 5GS QoS framework,
and maps the DetNet flow to QoS flow. This contribution proposes a QoS
parameter mapping method supporting wide area mobile deterministic networks.
It also introduces an implementation procedure of DetNet business flow under
5GS QoS framework.
### 6.6.2 Functional Description
Figure 6.6.2-1: Enhanced architecture
As shown in Figure 1, the TSC architecture based on 3GPP Rel-17 supports
DetNet function by the following function enhancement:
\- Enhance the function of TSCTSF to support DetNet flow mapping.
\- Realize the information interaction between TSCTSF and DetNet control plane
through NEF.
\- Enhance the function of NEF to support the transmission of DetNet flow
configuration. The DetNet controller sends the DetNet related parameters of
the DetNet flow to NEF and NEF transports them to TSCTSF.
\- Enhance the function of NEF to support the authentication of DetNet
controller.
\- Enhance the function of NEF to convert the IETF protocols Netconf [8] or
Restconf [9] on the interface between DetNet controller and NEF to HTTP
protocol on N85 interface.
The DetNet controller transmits the forwarding requirements of the DetNet flow
to TSCTSF. TSCTSF completes the QoS mapping from the service requirements of
the DetNet flow to 5GS QoS flow.
\- Generate QoS policies for deterministic service forwarding and forward them
to PCF. According to the framework of policy control, PCF sets up the QoS.
Then it can realize the certainty of wide area.
DetNet controller distributes the information model of the DetNet flow to NEF,
using IETF protocols Netconf [8] or Restconf [9].
\- NEF sends the information model of the DetNet flow to TSCTSF over N85.
Figure 6.6.2-2: Function and mapping method in the TSCTSF
Based on 5GS QoS management framework, the mapping relationship between DetNet
flow and 5GS QoS flow is shown in Figure 2:
\- The DetNet IP flow description identifies the DetNet flow; it can be mapped
to Packet filter Set under 5GS QoS framework.
\- The traffic specification requirements of DetNet flow are specific service
requirements for specific flows. It can be mapped to QoS profile under 5GS QoS
framework. The specific mapping methods are as follows:
\- The minimum guaranteed bandwidth is mapped to GFBR in QoS profile.
\- The maximum delay is mapped to 5QI-PDB in QoS profile.
\- The maximum packet loss is mapped to 5QI-Error Rate in QoS profile.
The above mapping functions are executed by the DetNet flow mapping function
extended in TSCTSF.
DetNet controller determines the end-to-end path and ensures the end-to-end
requirements of the DetNet flow. 5GS should strictly ensure the requirements.
### 6.6.3 Procedures
As shown in Figure 3, it introduces how the DetNet service flow is implemented
on the enhanced architecture.
Figure 6.6.3-1: Implementation process of DetNet flow forwarding under 5GS QoS
framework
\- DetNet controller sends deterministic transmission requirements and
parameters to 5GS.
\- The enhanced parameter mapping function on TSCTSF maps DetNet service
requirements into 5GS QoS flow parameters.
\- TSCTSF sends the mapped QoS policy(include flow description, and QoS
requirements for the service flow as 3GPP Qos framework required) to PCF.
\- PCF sends QoS policy to SMF.
\- SMF send QoS policy to the user plane for execution.
\- Transmit wide area deterministic service, fulfilled DetNet service
requirements.
### 6.6.4 Impacts on existing entities and interfaces
The suggested solution mainly focuses on the TSCTSF function enhancement and
5GS QoS framework extension.
Enhance the function of TSCTSF to support:
\- Maps DetNet flow requirements to 5GS requirements.
Use DetNet controller to achieve:
\- Realize the information interaction between TSCTSF and DetNet control plane
through NEF.
\- NEF: the impacts are FFS.
### 6.6.5 Solution evaluation
\- On the basis of the 5GS QoS framework, support DetNet service and DetNet
deterministic wide area forwarding through function enhancement.
\- Implement the mapping mechanism from DetNet parameters to mobile network
parameters.
\- Support the interworking between mobile network and DetNet network.
\- Realize the L3 deterministic forwarding on mobile network.
## 6.7 Solution #7 for Key Issue #2: Detnet configuration mapping to 5GS
parameters
### 6.7.1 Introduction
This solution is for Key Issue #2, Provisioning DetNet configuration from the
DetNet controller to 5GS.
\- Which parameters provided by the DetNet controller should be mapped into
which 5G parameters.
\- How the 5GS finds the PDU Sessions corresponding to the given DetNet
configuration.
\- What mechanisms are used in 5GS to configure the system according to the
configuration provided by the DetNet controller.
This solution follow the assumption in clause 4.
\- Existing 3GPP routing mechanisms can be re-used for DetNet; no new routing
function in the 3GPP system is to be defined.
\- The existing filtering mechanisms can be re-used in the UE and in the UPF
to identify the traffic for QoS differentiation.
\- IP based DetNet traffic is carried in PDU Sessions of IP type.
\- The mapping functionality for DetNet is realized in the TSCTSF.
\- The solutions should reuse the functionality of the TSC framework defined
in Release 17 where applicable.
\- The solutions shall not have any 5G AN and UE impacts
### 6.7.2 Functional Description
In this solution, the TSCTSF receives the configuration from Detnet controller
and map it to service requirement and TSCAC.
Figure 6.7.2-1: Parameters mapping
The Detnet flow-related parameters is defined in RFC 9016 [4], and expressed
in draft-ietf-detnet-yang [5].
The service requirement needed for PCF is defined in clause 5.6.2.7
(MediaComponent) and clause 5.6.2.8 (MediaSubComponent) of TS 29.514 [15]. The
TSCAC is defined in TS 23.501 [12].
The table 6.7.2-1 show the mapping relation between Detnet configuration
defined in clause 5 of RFC 9016 [4] and 5G QoS parameters (service requirement
and TSCAC).
Table 6.7.2-1: Mapping between DetNet parameters and 5GS parameters
+-------------+-------------+-------------+-------------+-------------+ | DetNet | 5G Qos | Note | | | | parameters | parameters | | | | +=============+=============+=============+=============+=============+ | **DetNet | | | | | | flows | | | | | | a | | | | | | ttributes** | | | | | +-------------+-------------+-------------+-------------+-------------+ | clause 5.1 | DnFlowID | | N/A | | +-------------+-------------+-------------+-------------+-------------+ | clause 5.2 | Dn | | N/A | IP | | | PayloadType | | | | +-------------+-------------+-------------+-------------+-------------+ | clause 5.3 | D | | N/A | IP | | | nFlowFormat | | | | +-------------+-------------+-------------+-------------+-------------+ | | DnFlowSp | | | | | | ecification | | | | +-------------+-------------+-------------+-------------+-------------+ | | a. | | | | | | Sour | | | | | | ceIpAddress | | | | +-------------+-------------+-------------+-------------+-------------+ | | b. | | | | | | Destinati | | | | | | onIpAddress | | | | +-------------+-------------+-------------+-------------+-------------+ | clause 5.4 | c. | TS 29 | MediaS | Applied for | | | Ip | .514 [15] | ubComponent | both | | | v6FlowLabel | | | | +-------------+-------------+-------------+-------------+-------------+ | | d. Dscp | | | south and | | | | | | north | +-------------+-------------+-------------+-------------+-------------+ | | e. | | | interface | | | Protocol | | | | +-------------+-------------+-------------+-------------+-------------+ | | f. | | | | | | SourcePort | | | | +-------------+-------------+-------------+-------------+-------------+ | | g. | | | | | | Dest | | | | | | inationPort | | | | +-------------+-------------+-------------+-------------+-------------+ | | h. | | | | | | IPSecSpi | | | | +-------------+-------------+-------------+-------------+-------------+ | | **Traffic | | | | | | Sp | | | | | | ecification | | | | | | of the | | | | | | DetNet | | | | | | Flow** | | | | +-------------+-------------+-------------+-------------+-------------+ | | Interval | | Periodicity | | | | | | in TSCAC | | +-------------+-------------+-------------+-------------+-------------+ | Clause 5.5 | MaxPackets | | Used for | | | | PerInterval | | calculate | | | | | | the | | | | | | maxT | | | | | | scBurstSize | | +-------------+-------------+-------------+-------------+-------------+ | | Max | | Used for | | | | PayloadSize | | calculate | | | | | | the | | | | | | maxT | | | | | | scBurstSize | | +-------------+-------------+-------------+-------------+-------------+ | | Min | | ? | | | | PayloadSize | | | | +-------------+-------------+-------------+-------------+-------------+ | | MinPackets | | ? | | | | PerInterval | | | | +-------------+-------------+-------------+-------------+-------------+ | Clause 5.6 | DnFl | | ? | End to End? | | | owEndpoints | | | | +-------------+-------------+-------------+-------------+-------------+ | Clause 5.7 | DnFlowRank | TS 29 | t | | | | | .514 [15] | scPrioLevel | | +-------------+-------------+-------------+-------------+-------------+ | Clause 5.8 | D | TS 29 | fStatus | | | | nFlowStatus | .514 [15] | | | +-------------+-------------+-------------+-------------+-------------+ | **DetNet | | | | | | flows | | | | | | requirement | | | | | | a | | | | | | ttributes** | | | | | +-------------+-------------+-------------+-------------+-------------+ | Clause 5.9 | DnFlowR | | | | | | equirements | | | | +-------------+-------------+-------------+-------------+-------------+ | | M | | GFBR | | | | inBandwidth | | | | +-------------+-------------+-------------+-------------+-------------+ | | MaxLatency | | Use this | End to End? | | | | | parameters | | | | | | to | | | | | | determine | | | | | | the 5GS | | | | | | node | | | | | | latency | | | | | | | | | | | | Note 3 | | +-------------+-------------+-------------+-------------+-------------+ | | MaxLaten | | ? | | | | cyVariation | | | | +-------------+-------------+-------------+-------------+-------------+ | | MaxLoss | TS 29 | maxPacke | | | | | .514 [15] | tLossRateDl | | | | | | | | | | | | maxPacke | | | | | | tLossRateUl | | +-------------+-------------+-------------+-------------+-------------+ | | MaxCo | TS 23 | Survival | | | | nsecutiveLo | .501 [12] | time | | | | ssTolerance | | | | +-------------+-------------+-------------+-------------+-------------+ | | Max | | ? | | | | Misordering | | | | +-------------+-------------+-------------+-------------+-------------+ | Clause 5.10 | DnFlowBiDir | | ? | | +-------------+-------------+-------------+-------------+-------------+ | NOTE 1: | | | | | | \"?\" show | | | | | | how to map | | | | | | is unclear. | | | | | | | | | | | | NOTE 2: | | | | | | \"End to | | | | | | End\" means | | | | | | this value | | | | | | is not the | | | | | | parameters | | | | | | for Detnet | | | | | | node. | | | | | | | | | | | | NOTE 3: | | | | | | TSCTSF use | | | | | | MaxLatency | | | | | | and | | | | | | co | | | | | | nfiguration | | | | | | to | | | | | | determine | | | | | | the 5GS | | | | | | detnet node | | | | | | latency. | | | | | +-------------+-------------+-------------+-------------+-------------+
The TSCTSF uses the incoming and outgoing interfaces in the draft-ietf-detnet-
yang [5] to determine the related PDU Session (s) and Flow direction. If the
incoming and outgoing interface are related the UE side, the TSCTSF separate
it to two PDU Sessions, one for UL and one for DL.
NOTE: For the IP type traffic, the incoming interface is optional. If there is
no incoming interface for UL traffic, the TSCTSF determine the PDU session
according to configuration, topology information learned from KI#1 and source
IP address in the DnFlowSpecification.
Editor\'s note: How the map the end to end Detnet parameters to 5GS parameters
is FFS.
Editor\'s note: Which parameters in the table are carried in draft-ietf-
detnet-yang [5] to Detnet node is FFS.
### 6.7.3 Procedures
The procedure in clauses 4.15.6 and 4.15.6.6a of TS 23.502 [13] are re-used
with the following enhancement:
\- The Detnet controller send the Detnet configuration to TSCTSF.
NOTE: In this solution, there is no NEF between TSCTSF and Detnet controller..
### 6.7.4 Impacts on existing entities and interfaces
TSCTSF:
\- mapping DetNet flow configuration to 5GS QoS requirements and TSC
parameters.
Editor\'s note: Additional impacts are FFS.
## 6.8 Solution #8 for Key Issues #1 and #2: 5GS DetNet Node IP Operation,
Management and Exposure
### 6.8.1 Introduction
The 5G System supports IETF DetNet deterministic networking by abstracting the
whole 5GS as a DetNet Node. The 5GS DetNet Node is comprised of a single UPF
and a number of UEs connected to it with IP PDU Sessions. It supports DetNet
IP data plane and forwarding sublayer operations, essentially acting as an IP
router with specific QoS and management capabilities that are exposed to the
DetNet controller.
No UE impact is required even though the device including the UE may support
also DS TT for the sake of taking benefit from Rel-17 TSC related Time synch
work. While the UE is logically part of the 5GS DetNet Node, the device
including the UE may also act as a separate DetNet capable IP router node as
depicted in Figure 6.8.1-2.
The architecture of the 5GS DetNet Node is shown in Figure 6.8.1-1.
Figure 6.8.1â€‘1: 5GS DetNet Node
Figure 6.8.1â€‘2: 5GS DetNet Node and a separate 5G Mobile Device DetNet Node
with a logical link between them
The externally visible interfaces of the 5GS DetNet Node are located either at
the UPF and supported by a NW-TT (2) or at the UEs and for UEs they may be
supported by a DS-TT (1) when Rel-17 TSC features are required. Both UPF and
UE side interfaces may be connected to other DetNet Nodes, which may be IP
routers or hosts. Each interface has a distinct identity and is configured
with Ipv4 and/or Ipv6 address information.
The 5GS DetNet Node is able to forward IP packets between any of its
interfaces according to DetNet IP data plane requirements. The TSCTSF maps the
configuration between the DetNet controller and the 5GS DetNet Node,
maintaining the overall configuration, capability and state information of the
Node. It exposes the 5GS DetNet Node\'s interfaces and their associated IP
address and IP forwarding information to the DetNet controller. It receives
DetNet flow information including flow identification and QoS requirements
from the DetNet controller and sets up the 5G user plane accordingly.
The 5GS DetNet Node may support PTP time synchronization if the 5GS is
configured to act as a PTP instance (operating as a boundary clock, peer-to-
peer transparent clock or end-to-end transparent clock according to 3GPP
Release 17 procedures applicable to IP PDU Sessions). The PTP time
synchronization processes are orthogonal to DetNet IP QoS or IP routing
(forwarding) procedure but both can be used together with the same TSCTSF, and
NW-TT instances. Support of PTP time synchronization is not further detailed
in the solution as it relies on Rel-17 features.
The granularity of the 5GS DetNet Router is per UPF for each network instance
or DNN/S-NSSAI.
### 6.8.2 Functional Description
5GS acts as a DetNet Node supporting IP Data Plane and forwarding sub-layer
functionality. To support IP Data Plane, it acts as a Layer 3 IP Router. When
integrated with IETF DetNet network, 5GS acts as one or more DetNet Nodes of
the DetNet network (more than one DetNet node when there are more than one
UPF). The 5GS DetNet Node is composed of one or more interfaces on a single
UPF (i.e. PSA) side supported by NW-TT, the user plane tunnel between the UEs
and the UPF (including 5G RAN and possibly intermediate UPF(s)), the
interfaces on the UE side and possibly the DS-TT (s) when Rel-17 TSC time
synchronization is needed. For each 5GS DetNet Node of a DetNet network, the
interfaces on NW-TT support the connectivity to the DetNet network, and the
interfaces on UE side are associated to the PDU Session providing connectivity
to the DetNet network.
The 5GS DetNet Node operation and management follow the procedures of 5GS
Bridge and Support of integration with TSN as described in clause 5.28 of TS
23.501 [12] with the following differences and clarifications:
\- The logical networking entity is called 5GS DetNet Node and it has a unique
Node ID.
\- 5GS DetNet Node supports IP packet forwarding as an IP router and uses IP
PDU Sessions.
\- TSCTSF takes the role of the 5GS DetNet Node control and management entity
and implements the control and management interface to the DetNet controller.
\- Port numbers are used to create interface IDs that uniquely identify IP
interfaces on UE and NW-TT.
\- The association between the UE/ IP address and (Ipv6) prefix, 5GS DetNet
Node ID and port number based interface ID is maintained at TSCTSF and further
used to assist to bind the DetNet flow IP traffic with the UE\'s IP PDU
session.
**5GS DetNet Node Interface IP addressing and IP Routing information
management**
The User Plane Node and Port Management Information Container data models are
extended with IP address and IP routing/forwarding information.
For each UPF/NW-TT side interface the following information is provided:
\- Type of interface.
\- MAC address.
\- IP address (Ipv4 and/or Ipv6).
\- IP Prefix (Ipv4 and/or Ipv6).
\- Neighbour MAC and IP addresses.
\- MTU size.
\- IP forwarding table entries where this interface or one of its directly
connected neighbours is the next hop.
For each UE side interface the following information is provided:
\- Type of interface = \"3GPP\" (or any new type identifier allocated for this
purpose):
\- information specific to \"3GPP\" interface type i.e. Role = \"Network\".
\- For Ipv4: UE Ipv4 address.
\- For Ipv6: UE interface id and Ipv6 Prefix.
\- MTU size.
\- IP forwarding table entries where this interface is the next hop based on
framed route and Ipv6 prefix delegation information.
This allows the TSCTSF to learn for each DetNet Node interface the interface
type, its IP address information and on UPF/NW-TT interfaces also neighbour
information additionally useful for topology discovery.
The DetNet controller needs to be aware of the data path taken by IP flows
exchanged between Detnet hosts in order to be able to manage the QoS/resource
reservation across the whole end-to-end path. For instance, the DetNet
controller needs to know that if the 5GS DetNet Node receives an IP packet
with a particular destination IP address from one of its UE interfaces, from
which egress interface to which next hop DetNet Node it will forward it.
For this purpose, for the UPF/NW-TT side interfaces, also the IP forwarding
table entries are optionally provided including the following information:
\- IP address/prefix;
\- address/prefix length;
\- Destination IP interface or next hop IP address.
NOTE 1: Additionally, other information about the routes can be included such
as cost or delay, or the source of the routing information (static vs.
dynamic).
NOTE 2: All the above information can be included in Port Management
Information Containers (PMIC) while it might be more efficient to use User
Plane Node Management Information Containers (UMIC) to exchange the
information for all NW-TT interfaces in a single container.
While NW-TT is not necessary for IP routing/forwarding on N6, in the solution
NW-TT is used for exposing the interface and interface specific
routing/forwarding information to TSCTSF.
On UE side interfaces, also the following is optionally exposed to the TSCTSF
for each interface:
\- Framed routes associated with the interface.
\- Ipv6 prefixes delegated via the interface.
**TSCTSF exposing information to the DetNet controller**
After it has learned about the 5GS DetNet Node interfaces and their
IProuting/forwarding information, the TSCTSF combines all the information into
a single representation and makes it available for the DetNet controller. The
information can be exposed to the DetNet controller using IETF RFC 8343, 8344
and 8345 YANG data models. RFC 8343 YANG may need to be extended with new
interface type \"3GPP\" and any new information associated with it.
Based on this information the DetNet controller learns 5GS DetNet Node
interfaces, their IP addresses and IP prefixes, and the 5GS DetNet Node IP
routing/forwarding- status. Using this information and similar information
collected from the other DetNet IP data plane nodes, the DetNet controller is
able to determine with DetNet traffic flows with given source and destination
addresses are to be forwarded via the 5GS DetNet Node and which ingress and
egress interfaces they will use.
The way to exchange PMIC and UMIC between the TSCTSF and the NW-TT (via PCF,
SMF, etc.) is as defined in Rel-17 for TSC. The difference is that the content
of the PMIC/UMIC may differ as explained above.
### 6.8.3 Procedures
Figure 6.8.3â€‘1
1\. PDU Session Establishment as defined clause 4.3.2.2.1-1 of TS 23.502 [13]
is used to establish a PDU Session serving for TSC.
The SMF may determine the need to use dedicated resources (e.g. dedicated
UPF(s)) for the 5GS DetNet Router based on local policies associated with the
DNN and/or S-NSSAI.
During this procedure, the SMF selects a UPF, which supports functions as
defined in clause 5.28.1 of TS 23.501 [12], for the PDU Session.
During this procedure, the SMF receives the allocated port number for UE IP
interface and user-plane Node ID from the UPF: The UPF allocates the port
number for UE, after receiving N4 Session Establishment Request message. The
UPF retrieves also the user-plane Node ID (from the NW-TT) and provides its
value to the SMF via N4 Session Level Reporting.
During this procedure the SMF may also receive the UE-DS-TT residence time (if
a DS TT is supported)
2\. The SMF sends the information received in step 1 to the TSCTSF via PCF
(via Npcf_SMPolicyControl service as defined in clause 4.16 of TS 23.502
[13]). The TSCTSF stores the binding relationship between 5GS user-plane Node
ID, port number and UE IP address for future configuration. The TSCTSF
requests creation (using the Npcf_PolicyAuthorization service as defined in
clause 4.16.5.1 of TS 23.502 [13]) of a new AF session associated with the UE
IP address and may subscribe for TSC events over the newly created AF session.
Using the 5GS user-plane Node ID the TSCTSF subscribes with the NW-TT for
receiving user plane node management information changes for the 5GS DetNet
Node indicated by the 5GS user-plane Node ID as described in clause 5.28.3.1
of TS 23.501 [12].
After receiving a User plane node Management Information Container (UMIC)
containing the NW-TT port numbers, the TSCTSF subscribes with the NW-TT for
receiving NW-TT port management information changes for the NW-TT port
indicated by each of the NW-TT port numbers as described in clause 5.28.3.1 of
TS 23.501 [12].
The TSCTSF can use any Npcf session (any PDU Session) to subscribe with the
NW-TT for node or port management information notifications. Similarly, the
UPF can use any N4 session (any PDU Session) to send node or port management
information notifications.
3\. The TSCTSF learns the port management capabilities and interface
information of each NW-TT interface. If NW-TT interfaces have locally
available IP address or IP routing information, the TSCTSF learns it from the
NW-TT.
4\. The TSCTSF now has the up-to-date IP address and IP routing information of
each UE and NW-TT interface. It combines it and makes it available for the
DetNet controller.
### 6.8.4 Impacts on services, entities and interfaces
TSCTSF:
\- Learns IP addressing and IP routing information on NW-TT using extended
Port Management Information Container data model.
\- Maintains the 5GS DetNet Node interface, IP addressing and IP routing
information base.
\- Exposes the 5GS DetNet Node interface, IP addressing and IP routing
information to the DetNet controller.
SMF:
\- None.
NW-TT:
\- Maintains IP address management and IP routing (forwarding) configuration
for the NW-TT related IP interface(s). Provides information to TSCTSF using
extended User Plane Node and Port Management Information Container data
models.
# 7 Conclusions
## 7.1 General
The following bullet points summarize the principles for the way forward:
\- YANG models over Netconf or Restconf are used between the TSCTSF and the
DetNet controller.
\- 3GPP does not standardize any signalling mechanism to include the NEF into
the signalling path between the TSCTSF and the DetNet controller. If NEF
functionality is desired, the relevant functions such as the authentication,
authorization and potential throttling of signalling can be achieved by
including such functionality in the TSCTSF depending on the needs of the given
deployment.
\- The TSCTSF terminates the interface towards the DetNet controller. The
TSCTSF collects and provides exposure information to the DetNet controller.
The TSCTSF collects the information from the UPF/NW-TT and the SMF with
extensions to the 5GC data models or information elements as required. The
entity reporting UPF N6 interface related information to the TSCTSF is NW-TT
as in Rel-17 TSC.
\- The TSCTSF may use the e2e traffic requirements in the YANG configuration,
and based on a pre-configured mapping, derive 5GS requirements from them.
\- It can be possible for the 5GS to verify in the TSCTSF whether the explicit
routing information provided by the DetNet controller is in line with the 5GS
mapping of IP addresses to PDU sessions. Apart from the verification, the 5GS
routing is not modified by the DetNet controller in line with the agreed scope
of the work.
\- Based on existing specifications, 5GS DetNet Node can forward via its UE
side interface IP packets destined not only to the UE\'s IP address or prefix
but also to other IP prefixes according to 3GPP framed routes or prefixes
delegated to the UE by Ipv6 prefix delegation. To facilitate this, the
additional IP addresses used for framed routes and Ipv6 prefix delegation are
exposed by the SMF to the TSCTSF and by TSCTSF to the DetNet controller.
The following figure illustrates the DetNet architecture.
Figure 7.1-1: DetNet Architecture
## 7.2 Key Issue #1: 5GS DetNet node reporting
The 5GS is exposed by the TSCTSF to the DetNet controller as a router on a per
UPF granularity. The node may be identified by a Node ID. The interfaces
correspond to the PDU Sessions (and to the network side interfaces (i.e.
including the interfaces of UPF and NW-TT). Each interface is identified by an
interface identifier.
The following information may be reported from TSCTSF to DetNet controller for
each interface.
\- Type of interface.
\- IP address.
\- subnet (prefix length).
\- Neighbour address (in case of network side interfaces).
\- MAC address (in case of network side interfaces).
\- MTU size.
The TSCTSF collects the information from the UPF/NW-TT and the SMF re-using
the existing procedures in Rel-17 TSC, with the addition of new parameters as
needed.
## 7.3 Key Issue #2: Provisioning DetNet configuration from the DetNet
controller to 5GS
The parameters are mapped in the TSCTSF as follows.
NOTE 1: See Clause 7.1 on mapping the end to end requirement to per node
requirement.
\- Max-latency to Required delay.
\- Min-bandwidth to GFBR.
\- Max-loss to Required PER (new in Rel-18).
\- Max-consecutive-loss-tolerance to Survival time - when such mapping is
possible, such as when there is only a single packet per interval. Interval to
Periodicity (in TSC info).
\- max-pkts-per-interval * (max-payload-size + protocol header size) to Max
burst size.
\- max-pkts-per-interval * (max-payload-size + protocol header size)/ Interval
to MFBR.
\- DetNet flow specification to 3GPP flow description (also including the DSCP
value and optionally Ipv6 flow label and Ipsec SPI).
The TSCTSF uses the identity of the incoming and outgoing interfaces to
determine the affected PDU Session(s) and whether the flow is uplink or
downlink. The TSCTSF also determines if the flow is UE to UE in which case two
PDU Sessions will be affected for the flow; in that case the TSCTSF breaks up
the requirements to individual requirements for the PDU Sessions. The TSCTSF
provides the parameters to the PCF re-using the existing procedures in Rel-17
TSC, with the addition of PER.
NOTE 2: For the IP type traffic, the incoming interface is optional. If there
is no incoming interface for UL traffic, the TSCTSF may determine the PDU
session according to configuration, topology information (e.g. Next Hop
information and so on) learned from KI#1 and source IP address in the DetNet
configuration.
The TSCTSF provides a response to the DetNet controller regarding the success
of the configuration setup. Optionally, if 3GPP may defines a new YANG module
that extends the IETF DetNet YANG module, the 5GS may provide 3GPP specific
status codes for additional information if the requested configuration could
not be set up.
If the status of the flow changes later on for any reason, the TSCTSF notifies
the DetNet controller. Upon release of a PDU Session that is part of the
existing DetNet configuration, the PCF notifies the TSCTSF for the PDU Session
release, and TSCTSF notifies the DetNet controller on status of the flow.
NOTE 3: 3GPP specifications do not support/ consider routing on the N6
interface, which can be explicitly set by the DetNet controller. The 3GPP
specifications do not support the control of the N6 routing, since that has
been considered out of scope of 3GPP.
#