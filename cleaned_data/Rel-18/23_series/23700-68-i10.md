# Foreword
This Technical Report has been produced by the 3rd Generation Partnership
Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
In the present document, modal verbs have the following meanings:
**shall** indicates a mandatory requirement to do something
**shall not** indicates an interdiction (prohibition) to do something
The constructions \"shall\" and \"shall not\" are confined to the context of
normative provisions, and do not appear in Technical Reports.
The constructions \"must\" and \"must not\" are not used as substitutes for
\"shall\" and \"shall not\". Their use is avoided insofar as possible, and
they are not used in a normative context except in a direct citation from an
external, referenced, non-3GPP document, or so as to maintain continuity of
style when extending or modifying the provisions of such a referenced
document.
**should** indicates a recommendation to do something
**should not** indicates a recommendation not to do something
**may** indicates permission to do something
**need not** indicates permission not to do something
The construction \"may not\" is ambiguous and is not used in normative
elements. The unambiguous constructions \"might not\" or \"shall not\" are
used instead, depending upon the meaning intended.
**can** indicates that something is possible
**cannot** indicates that something is impossible
The constructions \"can\" and \"cannot\" are not substitutes for \"may\" and
\"need not\".
**will** indicates that something is certain or expected to happen as a result
of action taken by an agency the behaviour of which is outside the scope of
the present document
**will not** indicates that something is certain or expected not to happen as
a result of action taken by an agency the behaviour of which is outside the
scope of the present document
**might** indicates a likelihood that something will happen as a result of
action taken by some agency the behaviour of which is outside the scope of the
present document
**might not** indicates a likelihood that something will not happen as a
result of action taken by some agency the behaviour of which is outside the
scope of the present document
In addition:
**is** (or any other verb in the indicative mood) indicates a statement of
fact
**is not** (or any other negative verb in the indicative mood) indicates a
statement of fact
The constructions \"is\" and \"is not\" do not indicate requirements.
# 1 Scope
The scope of the present document is to investigate solutions to support of
RRC INACTIVE state with extended DRX cycle longer than 10.24s to enrich the
power saving function as studied in TR 38.875 [5].
This study will address the following objective:
Support for enabling of eDRX cycle that is longer than 10.24s in RRC_INACTIVE
state with following two aspects:
1) Study the support of the eDRX cycle that is longer than 10.24s and up to
10485.76s for RRC_INACTIVE state for RAN paging (e.g. PTW and eDRX cycle
values).
2) Study the MT signalling and data handling for UE with long eDRX cycle in
RRC_INACTIVE state.
# 2 References {#references-1}
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 23.501: \"System Architecture for the 5G System; Stage 2\".
[3] 3GPP TS 23.502: \"Procedures for the 5G System; Stage 2\".
[4] 3GPP TS 38.300: \"NR; NR and NG-RAN Overall Description; Stage 2\".
[5] 3GPP TR 38.875: \"Study on support of reduced capability NR devices\".
[6] 3GPP TS 38.413: \"NG-RAN; NG Application Protocol (NGAP)\".
# 3 Definitions of terms and abbreviations
## 3.1 Terms
For the purposes of the present document, the terms given in TR 21.905 [1]
apply.
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in TR 21.905
[1] apply.
# 4 Architectural Assumptions and Requirements
The following architectural assumptions and requirements apply:
\- The current 3GPP system architecture in TS 23.501 [2] and TS 23.502 [3] is
applied.
\- Solutions are applicable to UE accessing 5GC via gNB.
# 5 Key Issues
## 5.1 Key Issue #1: Enabling long eDRX cycle support in RRC_INACTIVE state
### 5.1.1 General description
To enable the support of long eDRX cycle (e.g. longer than 10.24s) in
RRC_INACTIVE state with the power saving benefit studied in TR 38.875 [5],
following aspects need to be studied:
\- How the long eDRX cycle values which are longer than 10.24s are supported
in RRC_INACTIVE state.
\- How MT signalling and data are handled for a UE with a long eDRX cycle
value in RRC_INACTIVE state, e.g. enhancement to enable extended MT data
buffering for UE in RRC_INACTIVE state.
NOTE 1: RRC_INACTIVE is defined as \"CM-CONNECTED with RRC_INACTIVE\" in
current 3GPP specification (See clause 5.3.3.2.5 of TS 23.501 [2] and clause
9.2.2.1 of TS 38.300 [4]). Solutions for CM-IDLE state are not excluded under
this KI.
NOTE 2: Coordination with RAN WGs is needed for the KI.
# 6 Solutions
## 6.1 Solution #1: Power saving enhancement with long eDRX cycle support for
UE in CM-CONNECTED with RRC_INACTIVE state
### 6.1.1 Introduction
The solution applies to Key Issue #1 and covers both sub-aspects of the key
issue.
### 6.1.2 Functional Description
The solution is based on existing Rel-17 long eDRX support for NR RedCap
device in CM-IDLE mode with the following enhancement:
\- eDRX cycle value for CM-CONNECTED with RRC_INACTIVE state is extended from
10.24s up to 10485.76s (i.e. same eDRX cycle value range as for CM-IDLE mode).
\- AMF is aware of UE RRC state and long eDRX parameters applied for UE in
CM_CONNECTTED with RRC_INACTIVE state based on information notified by RAN.
\- AMF also notifies the SMF/UPF to start data buffering/delivery since UE is
not reachable or reachable due to power saving. The UPF/SMF is responsible for
data buffering and triggers the MT data notification even in case of existing
of N3 tunnel.
\- Based on the eDRX parameters for CM-CONNECTED with RRC_INACTIVE state, AMF
can deduce the needed information and handle MT signalling and MT data the
same way as UE is in CM-IDLE while UE is not reachable, i.e. the existing
HLcom solutions can be applied to UE in power saving state when UE is in
either in CM-IDLE or in CM_CONNECTED with RRC_INACTIVE state as long as AMF
knows the information related to power saving.
\- Based on the CN notification related to MT signalling or data, RAN triggers
the paging when UE is reachable.
\- UE performs both AS and NAS level mobility and periodic AS update based on
existing Rel-17 functions.
\- If extra AMF selection logic is needed for applying long eDRX in
CM_CONNECTED with RRC_INACTIVE state, existing mechanisms (e.g., S-NSSAI) can
be deployed by the operation based on configuration.
### 6.1.3 Procedures
#### 6.1.3.1 Notification of eDRX information between CN and gNB
This is an updated procedure based on clause 4.8.3 of TS 23.502 [3].
Figure 6.1.3.1-1: RRC state transition notification
1\. The AMF sends a N2 Request to the NG-RAN (i.e. gNB) to request the RRC
state transition report as described in TS 38.413 [6] (e.g. when AMF provides
RRC Inactive Assistance Information for UE with reduced NR capability and has
negotiated extended DRX longer than 10.24s).
2\. The NG-RAN sends the UE Notification message to report the current RRC
state for the UE (i.e. RRC Inactive state or RRC Connected state).
When NG-RAN reports RRC Inactive state for a UE using extended DRX longer than
10.24s in RRC Inactive state, the NG-RAN includes also the extended DRX
information (i.e. eDRX cycle value and Paging Time Window) which triggers CN
based MT signalling and data handling as in step 3 below.
2b. When the AMF has requested reporting about subsequent state transitions,
the NG-RAN sends subsequent UE Notification messages to the AMF at every RRC
state transition until the UE transitions to CM-IDLE or NG-RAN receives a
Cancel UE State Notification message from the AMF.
NOTE: If the NG-RAN receives downlink data when executing step 3a/3b, the
handling of such downlink data is implementation dependent.
3a. If the AMF receives extended DRX information when UE enters RRC Inactive
state, the AMF stores the extended DRX information for RRC Inactive state and
sends the Nsmf_PDUSession_UpdateSMContext request to the SMF enabling the data
buffering. When UE enters RRC Connected state, the AMF also sends
Nsmf_PDUSession_UpdateSMContext request to SMF enabling the data delivery.
3b. If data buffering is handled in UPF, the SMF updates the UPF with proper
rules for MT data handling.
3c. The SMF sends the Nsmf_PDUSession_UpdateSMContext response.
4\. The AMF can send a Cancel UE State Notification message to inform the NG-
RAN that it should terminate notifications for a given UE when such report is
not needed.
#### 6.1.3.2 Network triggered Connection Resume procedure
This is an updated procedure based on clause 4.8.2.2a of TS 23.502 [3] with
enhancement for UE in CM-CONNECTED with RRC_INACTIVE state and eDRX is longer
than 10.24s.
The Network Triggered Connection Resume in RRC Inactive procedure is used when
the network needs to signal (e.g. the N1 NAS PDU and/or downlink user plane
PDU) with a UE in the RRC Inactive state. When the procedure is triggered by
other NFs (e.g. SMSF, LMF, GMLC), the UPF (or SMF) in the following figure
should be replaced by the respective NF (the corresponding services operations
used by other NFs when they communicate with AMF may also be different from
the service operation used by SMF/UPF). During the procedure, the NG-RAN (i.e.
gNB) sends a RAN Paging to the UE in order to trigger the Connection Resume in
RRC Inactive procedure.
Figure 6.1.3.2-1a: Network Triggered Connection Resume for UE in RRC Inactive
Figure 6.1.3.2-1b: Network Triggered Connection Resume for UE in RRC Inactive
1\. When downlink data is received and the SMF/UPF is requested to perform
buffering as specified in clause 6.1.3.1 above, UPF/SMF checks with AMF for
the possibility of data delivery, similar to step 2 of clause 4.24.2 of TS
23.502 [3] with the following differences:
\- If AMF determines that UE is not reachable in RRC INACTIVE state, the AMF
provides the Estimated Maximum Wait time in the response message based on the
stored extended DRX information for RRC INACTIVE in AMF (see clause 6.1.3.1
above). This handling is similar to CM-IDLE with eDRX. When the AMF provides
the Estimated Maximum Wait time, it can consider the time needed for RRC level
procedures (e.g. RRC RNA update procedure) when UE wakes up from the eDRX
cycle.
2\. When the AMF determines the UE reachable based on the stored extended DRX
inform for RRC INACTIVE, the AMF informs SMF/UPF to deliver data. The NG-RAN
receives downlink data (e.g. the N1 NAS PDU and/or the user plane PDU) for a
UE in RRC INACTIVE State, the NG-RAN buffers the downlink data and triggers
RAN Paging message.
As an alternative option, the AMF may notify the NG-RAN of MT service which
can trigger the NG-RAN Paging. Then step for downlink data delivery will be
executed after UE enters RRC_CONNECTED mode as show in figure 6.1.3.2-1b above
when SMF/UPF receives the notification as specified in step 3 of clause
6.1.3.1 above.
3\. The NG-RAN sends the RAN Paging message to the UE.
4\. If the UE is in RRC Inactive State, based on the RAN paging, the UE
initiates the UE Triggered Connection Resume in RRC Inactive procedure (see
clause 4.8.2.2 of TS 23.502 [3]). In case of RRC Resume failure, a NAS
procedure is triggered by UE to enter RRC_CONNECTED state.
### 6.1.4 Impacts on services, entities and interfaces
AMF:
\- eDRX parameters for RRC_INACTIVE state exchange on NGAP interface.
\- Estimated Maximum Wait time calculation based on eDRX parameters from
RRC_INACTIVE state.
\- Notification of MT service on NGAP interface (only needed if option as
described in figure 6.1.3.2-1b is used).
gNB:
\- eDRX parameters for RRC_INACTIVE state exchange on NGAP interface.
\- Notification of MT service on NGAP interface which triggers the RAN Paging
(only needed if option as described in figure 6.1.3.2-1b is used).
SMF:
\- Supports data buffering/delivery Indication from AMF even in case of the N3
tunnel existence.
UPF:
\- none.
## 6.2 Solution #2: Long eDRX with RAN buffering
### 6.2.1 Introduction
This solution relates the KI#1 and proposes a solution where RAN initiates
either extended buffering of MT data or notification to the AMF for UE
unavailability due to use of long eDRX in RRC-Inactive.
### 6.2.2 Functional Description
This solution addresses KI#1 and the following principles are used:
\- Allow eDRX >10,24s for RRC-Inactive.
\- RAN anchor node configures the UE with eDRX value and PTW to be used during
RRC-Inactive when releasing the UE to RRC-Inactive.
\- The CM idle mode eDRX and PTW configuration are provided to NG-RAN in the
RRC Inactive Assistance Information as described in TS 23.501 [2] and TS
38.413 [6].
\- RAN is responsible for paging and will apply RAN paging strategy
considering the UE PTW configuration.
\- RAN either buffers MT data if it finds it feasible or triggers the UE
context release (N2 msg).
NOTE 1: The N2 message could be the UE Context Release Request message which
RAN use to notify the AMF of RAN paging failure. The message may need to be
extended to include that the failure was due to eDRX configuration. TSG RAN3
is responsible for N2 messages and their format.
\- If MT NAS message can\'t be delivered to the UE within the NAS
retransmission timer range i.e. \10.24s
### 6.4.1 Description
This solution proposes, for the case of RRC Inactive and eDRX>10.24s, to
combine:
\- On the RAN/RRC side, maintain RRC-Inactive state for fast resume procedure.
\- On the CN/NAS side, use CM IDLE which implicitly already supports proper
handling of high latency communications (HLcom) when the UE is unreachable for
an extended period of time.
Currently, this CM and RRC state pair has not been defined, therefore this
solution proposes how to support it with as minimal impact as possible
compared to existing Rel-17 solutions.
The UE and AMF negotiate support of CM-IDLE with RRC inactive and idle mode
extended DRX during registration procedure. The AMF provides indication of
support of CM-IDLE with RRC Inactive along with the existing extended DRX
information in the \"RRC Inactive Assistance Information\" (see clause
5.3.3.25 of TS 23.501 [2]).
Editor\'s note: Whether eDRX cycle and PTW values for RRC inactive and for RRC
idle are the same or can be different, and how this affects the detailed
content of UE/NW negotiation of parameters for eDRX in RRC inactive, is FFS.
When the UE is moved to CM-IDLE with RRC-Inactive, the NG-RAN initiates N2
suspend procedure towards the 5GC. When the UE moves back to RRC-Connected,
the NG-RAN initiates N2 resume procedure.
When the UE is in CM-IDLE with RRC Inactive, all currently defined 5GC
features related to UE being unreachable for CM-ILDE with extended DRX apply
with the following addition:
\- The AMF may send N2 paging message only towards the NG-RAN node where N2
suspension occurred with indication of paging in RRC Inactive with CM_IDLE,
and the NG-RAN node performs RAN paging in the RAN notification area.
\- The AMF may e.g. if initial attempt(s) to reach UE using RAN paging fail,
try regular CN paging, i.e. send N2 paging message without indication of RRC
Inactive with CM-IDLE. In this case the RAN performs regular CN paging.
From UE perspective, when the UE enters RRC-Inactive with CM-IDLE, the
behaviour is the same as for RRC-Inactive with CM-CONNECTED, i.e.:
\- If the UE receives RAN paging, it attempts RRC resume procedure.
\- If RRC resume fails the UE falls back to CM-IDLE with RRC Idle and
initiates RRC connection establishment request.
\- If the UE receives CN paging, it moves to CM-IDLE with RRC Idle and
initiates RRC connection establishment request.
\- If the UE steps outside RAN notification area, the UE initiates RAN
Notification Area Update.
\- The UE performs periodic RAN notification Area Update.
\- The UE performs periodic registration update.
### 6.4.2 Procedures
#### 6.4.2.1 N2 suspend for UE entering RRC inactive with eDRX>10.24s
Figure 6.4.2.1-1: N2 Suspend for RRC Inactive / CM-IDLE
0\. Based on the information received from the AMF, the NG-RAN node may decide
to move the UE to CM-IDLE with RRC inactive if the NG-RAN intends to configure
the UE with extended DRX longer than 10.24 seconds.
1\. The NG-RAN shall initiate N2 suspend procedure as defined in clause 4.8.1
of TS 23.502 [3] with the addition of: NG-RAN provides RRC Inactive with CM-
IDLE indication and provides RRC inactive eDRX cycle length and PTW. The AMF
shall enter CM-IDLE with RRC inactive state.
2\. The NG-RAN initiates RRC release with suspend indication towards the UE
with eDRX>10.24s and RRC Inactive with CM-IDLE indication. The UE and the NG-
RAN enters CM-IDLE with RRC inactive.
#### 6.4.2.2 UE paging and resume
When the UE is in CM-IDLE with RRC Inactive, all mobile terminated data
handling, high latency communication, and network initiated procedures follow
the procedures defined in TS 23.502 [3] when the UE is in CM-IDLE except for
UE paging and connection resume.
Figure 6.4.2.2-1: UE paging and resume procedure
1\. There is a trigger to page the UE, e.g. due to mobile terminated data,
steps 1-3 of Network Triggered Service Request (clause 4.2.3.3 of TS 23.502
[3],). The AMF determines the start of PTW as provided by NG-RAN, and sends N2
paging message only towards the NG-RAN node where N2 suspension occurred with
indication of paging in RRC Inactive with CM_IDLE.
2\. The NG-RAN initiates RAN paging in the RAN notification area.
3\. When the UE receives RAN paging, it initiates RRC resume procedure from
RRC inactive.
4 The NG-RAN proceeds with Steps 2-4 of clause 4.8.2 of TS 23.502 [3].
(Optional) Fallback to CN paging
5\. If e.g. AMF initiated RAN paging fails, or e.g. due to paging
retransmission strategy, the AMF may initiate CN paging.
6\. If the UE receives CN paging, the UE moves to RRC idle/CM idle and
initiates service request procedure.
### 6.4.3 Impacts on services, entities and interfaces
UE:
\- Support of RRC inactive with CM-IDLE.
RAN:
\- Extend N2 Suspend and N2 Resume procedures to CM-IDLE with RRC inactive
with eDRX cycle and PTW indication.
\- Extend the RRC Release message to release the UE to RRC-Inactive with CM-
Idle.
\- Support AMF triggered RAN paging.
AMF:
\- Support of RRC inactive with CM-IDLE.
\- Support of N2 paging with RRC inactive indication to trigger RAN paging.
\- Extend the RRC-Inactive assistance information with the support for RRC-
Inactive with CM-idle indication.
\- Extend N2 suspend and N2 resume procedure to enter CM-IDLE with RRC
inactive and CM-CONNECTED respectively.
## 6.5 Solution #5: Enabling UPF buffering per NG-RAN request for UE in
RRC_Inactive state with long eDRX cycle
### 6.5.1 Description
This solution resolves Key Issue #1.
In this solution, after the UE enters into RRC_inactive state with long eDRX
cycle, and when the NG-RAN receives MT data over the N3 tunnel, the NG-RAN
buffers the MT data and sends a suspend indication to the network. When the
network receives the suspend indication it starts the MT data buffering in the
UPF. When the UE becomes reachable again, the NG-RAN triggers the paging
procedure and the UE enters into RRC_connected state. The NG-RAN then forwards
the buffered MT data to the UE. If the NG-RAN has sent the suspend indication
to the network, it sends resume indication to the network to disable the UPF
buffering and start the delivery of MT data to the NG-RAN.
When the NG-RAN node receives N1 NAS message and it determines that it is not
possible to transfer the N1 NAS message to the UE before the NAS
retransmission timer expires, it sends N1 NAS Message Transfer Failure message
to the AMF, with a cause value that the UE is temporarily not reachable and an
expected waiting time value. The AMF starts a timer. Before the timer expires
the AMF stops sending any further N1 NAS message to the NG-RAN. After the
timer expires, the AMF starts to send the N1 NAS message to the NG-RAN and the
NG-RAN triggers the paging procedure.
When the UE becomes RRC_connected state due to any MO data or signalling, the
NG-RAN sends resume indication to the network to enable the N1 message
delivery and disable the UPF buffering. Then the network starts to transfer
the buffered MT data or N1 NAS message to the NG-RAN.
When the UE moves outside of the RNA it triggers RNA update and the data
buffered in the last serving NG-RAN node can be forwarded to the target NG-RAN
node.
### 6.5.2 Procedures
#### 6.5.2.1 MT data handling of UE with long eDRX in RRC_Inactive state
Figure 6.5.2.1-1: High level procedure for MT data handling of UE with long
eDRX in RRC_Inactive state
1\. The MT data is sent to NG-RAN from the UPF over the N3 user plane
connection.
2\. Since the NG-RAN knows the UE is in eDRX cycle and not reachable for
paging, it starts to buffer the downlink data.
3\. The NG-RAN may determine to enabler the MT data buffering in the UPF (e.g.
when the remaining UE unreachable time is long enough or when the RAN buffer
will be overflown), it sends N2 Suspend Request to AMF, including an
indication to enable the MT data buffer in UPF and keep the UE in CM-CONNECTED
state. The NG-RAN may also provide an Expected Waiting Time so the UPF can
determine the buffer time.
4\. The AMF sends Nsmf_PDUSession_UpdateSMContext request to the SMF to enable
MT data buffering in UPF. The AMF provides the Expected Waiting Time to the
SMF. The AMF keeps the UE in the CM-CONNECTED state, i.e. keeping the N1 and
N2 connection in the UE context.
5\. The SMF sends N4 Session Modification procedure to enable the MT data
buffering in UPF. The UPF starts to buffer further MT data while still keeping
the N3 tunnel towards the NG-RAN, i.e. the UPF doesn\'t remove the N3 GTP-U
tunnel endpoint identity in NG-RAN. The SMF use the Expected Waiting Time to
set the buffer timer in the UPF.
6\. The SMF sends Nsmf_PDUSession_UpdateSMContext Response to AMF.
7\. The AMF sends N2 Suspend Response to the NG-RAN.
8\. After step 5, the UPF starts to buffer further downlink data.
9\. When the eDRX timer expires, the NG-RAN determines that the UE is
reachable again. If there is any downlink data buffered in the NG-RAN, the NG-
RAN sends paging request in all the cells of the RNA (RAN Notification Area).
10\. When the UE receives paging request, it sends RRC Connection Resume
request to the NG-RAN to resume the RRC connection.
11\. The NG-RAN sends RRC Connection Resume to the UE to resume the RRC
connection.
12\. The UE sends RRC Connection Resume Complete to the NG-RAN. After this
step, the RRC connection between the UE and NG-RAN is resumed.
13\. The NG-RAN sends the buffered MT data to UE via the user plane connection
between UE and NG-RAN.
14\. If the NG-RAN has sent N2 Suspend Request to AMF in step 3, it sends N2
Resume Request to AMF to enable the MT data transfer over N3 user plane
connection.
15\. The AMF sends Nsmf_PDUSession_UpdateSMContext request to the SMF to
enable MT data transferring.
16\. The SMF sends N4 Session Modification procedure to enable the MT data
transferring in UPF.
17\. The SMF sends Nsmf_PDUSession_UpdateSMContext Response to AMF.
18\. The AMF sends N2 Suspend Response to the NG-RAN.
19\. The UPF stops the MT data buffering.
20\. The UPF sends the buffered MT data and further received MT data towards
the NG-RAN via the N3 user plane connection between the NG-RAN and UPF.
#### 6.5.2.2 MT N1 message handling of UE with long eDRX in RRC_Inactive state
Figure 6.5.2.2-1: high level procedure for MT N1 message handling of UE with
long eDRX in RRC_Inactive state
1\. The AMF determines to send N1 NAS message to the UE, so it sends N1
Message Transfer to the NG-RAN.
2\. Since the NG-RAN knows the UE is in eDRX cycle and based on the remaining
unreachable time, the UE is not reachable before the NAS retransmission timer
expires, the NG-RAN rejects the N1 Message Transfer, with a cause value
indicating that the UE is temporarily not reachable. The NG-RAN may also
include an Expected Waiting Time in the rejection message.
3\. Based on implementation the AMF may reject the request which triggers the
N1 message. The rejection message may include an Expected Waiting Time
received from the NG-RAN.
4\. The AMF starts a timer according to the received Expected Waiting Time
from NG-RAN. Before the timer expires the AMF doesn\'t try to deliver any
further N1 NAS message to the NG-RAN. The AMF keeps the UE in the CM-CONNECTED
state, i.e. keeping the N1 and N2 connection in the UE context.
5\. When the timer expires, and the AMF receives further request for N1 NAS
message delivery it sends N1 Message Transfer to the NG-RAN.
6\. The NG-RAN determines that the UE is reachable and it sends Paging request
in the RNA.
7\. When the UE receives paging request, it sends RRC Connection Resume
request to the NG-RAN to resume the RRC connection.
8\. The NG-RAN sends RRC Connection Resume to the UE.
9\. The UE sends RRC Connection Resume Complete to the NG-RAN. After this
step, the RRC connection between the UE and NG-RAN is resumed.
10\. The NG-RAN sends the N1 NAS message to the UE over the RRC connection.
### 6.5.3 Impacts on services, entities and interfaces
NG-RAN, when the UE is in RRC_Inactive state:
\- After receiving and buffering the MT data, the NG-RAN sends suspend
indication to AMF to enable the UPF buffering.
\- Reject the N1 message transfer with cause value and expected waiting time
value.
\- When the UE becomes in RRC_connected state, the NG-RAN sends resume
indication to AMF to disable the UPF buffering and enable the delivery of MT
data and MT N1 message.
AMF:
\- Handling of suspend indication and resume indication from NG-RAN.
\- Handling of N1 message transfer failure.
SMF:
\- Handling of suspend indication and resume indication from AMF.
UPF:
\- Enable/Disable the UPF buffering while keeping the N3 tunnel.
## 6.6 Solution #6: Converged Solution for handling RRC inactive with
eDRX>10.24s.
### 6.6.1 Introduction
The solution applies to Key Issue #1 and covers both sub-aspects of the key
issue. The solution is meant to converge Solutions #1 (clause 6.1), #3 (clause
6.3), and #4 (clause 6.4).
### 6.6.2 Functional Description
If the AMF has indicated support of eDRX>10.24s for CM-CONNECTED with RRC
Inactive, and has provided idle mode eDRX cycle length, the NG-RAN (i.e. gNB)
may at any point configure the UE with eDRX>10.24s when moving the UE to CM-
CONNECTED with RRC Inactive.
NOTE: Whether the NG-RAN needs to use same eDRX cycle length as in idle mode
eDRX, will be determined in normative phase based on RAN WGs feedback.
When the UE is moved to RRC-Inactive with eDRX>10.24s, the NG-RAN notifies the
AMF via N2 signalling. The AMF enters a substate of CM-CONNECTED, denoted
\"CM-CONNECTED with RRC Inactive and eDRX>10.24s\". In this state, the AMF
follows similar behaviour as for CM-IDLE when the UE is unreachable when
interacting with other NFs.
When the UE is CM-CONNECTED with RRC Inactive state and eDRX>10.24s, DL data
is buffered in CN and NAS procedures are not executed, except paging procedure
when UE is considered reachable by AMF, until the UE returns to RRC-Connected
state.
When the UE moves back to RRC-Connected, the NG-RAN notifies the AMF via N2
signalling.
UE performs both AS and NAS level mobility and periodic AS update based on
existing Rel-17 functions.
### 6.6.3 Procedures
#### 6.6.3.1 UE entering CM-CONNECTED with RRC Inactive and eDRX>10.24s
Figure 6.6.3.1-1: UE entering CM-CONNECTED with RRC Inactive and eDRX>10.24s.
1\. The UE initiates the Registration Procedure and the eDRX parameters in CM-
IDLE state are negotiated.
2\. The AMF sends the Inactive Assistance Information to the NG-RAN. The eDRX
parameters in CM-IDLE state are included as defined in clause 5.3.3.2.5 of TS
23.501 [2]. The AMF also includes support of CM CONNECTED with RRC Inactive
and eDRX>10.24s.
3\. Before transitioning the UE into RRC_Inactive state, NG-RAN determines the
eDRX parameters for UE in RRC_Inactive state.
4\. When the NG-RAN decides to transition the UE to RRC Inactive state with
eDRX>10.24s, the NG-RAN sends N2 message to AMF indicating the UE is
transitioning to RRC Inactive with eDRX>10.24s.
NOTE 1: Whether the N2 message to be used is a new message or an existing
message, e.g. N2 notification, will be decided during normative work.
5\. For each of the PDU sessions for which user plane resources have been
activated, the AMF invokes Nsmf_PDUSession_UpdateSMContext Request (PDU
Session ID, Cause, Operation type, User Location Information, Age of Location
Information, N2 SM Information (Secondary RAT usage data)) towards SMF. The
Operation Type is set to a value that indicates to stop user plane DL data
transmissions towards the UE and enable data buffering. The SMF starts data
buffering for MT data if the data buffering is handled in SMF.
NOTE 2: Whether an existing Operation Type is used, e.g. \"UP Suspend\", or
another value is used can be decided during normative work.
6\. If data buffering is handled in UPF, the SMF updates the UPF with proper
rules for MT data handling.
7\. The SMF sends the Nsmf_PDUSession_UpdateSMContext response.
8\. The AMF sends N2 response to NG-RAN confirming CM-CONNECTED with RRC
Inactive and eDRX>10.24s state. The AMF enters CM-CONNECTED with RRC Inactive
and eDRX>10.24s state.
9\. NG-RAN initiates RRC Release with Suspend procedure configuring
eDRX>10.24s. The UE enters CM connected with RRC Inactive and UE performs both
AS and NAS level mobility and periodic AS update based on existing Rel-17
functions.
#### 6.6.3.2 UE triggered Connection Resume procedure
Figure 6.6.3.2-1 shows the call flow for UE triggered Connection Resume
procedure when the UE is in CM-CONNECTED with RRC Inactive and eDRX>10.24s.
Figure 6.6.3.2-1: UE Triggered Connection Resume procedure
1\. UE to NG-RAN: RRC message (Resume ID).
The UE initiates the transition from RRC Inactive state to RRC Connected
state, see TS 38.300 [4]. The UE provides its Resume ID needed by the NG-RAN
to access the UE\'s stored Context.
2\. [Conditional] NG-RAN performs UE Context Retrieval.
UE Context Retrieval is performed when the UE Context associated with the UE
attempting to resume its connection is not locally available at the accessed
NG-RAN. The UE Context Retrieval procedure via NG-RAN is specified in TS
38.300 [4].
NOTE 1: Steps 1 and 2 are the same as steps 1 and 2 in 4.8.2.2 of TS 23.502
[3], with no impact.
3a. [Conditional] N2 Path switch procedure.
If the accessed NG-RAN is not the same as the NG-RAN that configured RRC
Inactive, the accessed NG-RAN node initiates N2 Path Switch procedure, i.e.
steps 1 to 8 of clause 4.9.1.2.2 and including Xn data forwarding.
3b. [Conditional] RRC Connected indication
3b.1 If the NG-RAN is the same as the NG-RAN that configured RRC Inactive (and
still has UE context locally), the NG-RAN send N2 message to AMF indicating
the UE is in CM-CONNECTED.
NOTE 2: Whether this message is new or an existing one, e.g. N2 notification
message, is to be decided during normative work.
3b.2 The AMF invokes Nsmf_PDUSession_UpdateSMContext Request indicating the UE
has resumed RRC connection for each SMF that applies.
3b.3 N4 session modification procedure is triggered by SMF. If data buffering
is handled in UPF, the SMF updates the UPF with appropriate rules to no longer
buffer data.
3b.4 The SMF sends the Nsmf_PDUSession_UpdateSMContext response.
3b.5 The AMF sends N2 response to NG-RAN confirming CM-CONNECTED.
4\. NG-RAN sends RRC message to UE confirming to the UE that the UE has
entered RRC Connected state.
NOTE 3: Steps 3 and 4 can be executed in parallel.
#### 6.6.3.3 Network triggered Connection Resume procedure
When the UE is in CM-CONNECTED with RRC Inactive and eDRX>10.24s, all mobile
terminated data handling, high latency communication, between AMF, SMF, UPF,
SMSF and any other NF follow same signalling flow as for CM-IDLE.
Network triggered Connection Resume procedure may be triggered by MT data, or
a network initiated NAS procedure from SMF and UPF as shown in Figure
6.6.3.3-1. When the procedure is triggered by other NFs (e.g., SMSF, LMF,
GMLC), the UPF (or SMF) in the following figure should be replaced by the
respective NF (the corresponding service operations used by other NFs when
they communicate with AMF may also be different from the service operations
used by SMF/UPF).
During the procedure, the NG-RAN (i.e. gNB) sends a RAN Paging to the UE based
on N2 message from AMF in order to trigger the UE triggered Connection Resume
procedure in clause 6.6.3.2.
Figure 6.6.3.3-1: Network Triggered Connection Resume procedure
1\. There is a trigger in the AMF to Resume the RRC Connection for a UE.
1a. When downlink data is received and the SMF/UPF is requested to perform
buffering as specified in clause 6.6.3.1 above, UPF/SMF checks with AMF for
the possibility of data delivery, similar to step 2 of clause 4.24.2 of TS
23.502 [3] with the following differences:
\- If AMF is in CM-CONNECTED with RRC Inactive and eDRX>10.24s, and determines
that UE is not reachable in RRC INACTIVE state based on the information
provided from NG-RAN in clause 6.6.3.1, the AMF provides the Estimated Maximum
Wait time in the response message based on the stored extended DRX information
for RRC INACTIVE in AMF (see clause 6.6.3.1). This handling is similar to CM-
IDLE with eDRX. When the AMF provides the Estimated Maximum Wait time, it can
consider the time needed for RRC level procedures (e.g. RRC RNA update
procedure) when UE wakes up from the eDRX cycle.
1b. A need for network initiated NAS procedure or N2 procedure, including the
case of MT data delivery, may be triggered in the AMF if the AMF consider UE
is reachable when the UE state is CM-CONNECTED with RRC Inactive and
eDRX>10.24s.
2\. The AMF sends N2 message to NG-RAN with request for the UE to be
transitioned to RRC connected. The N2 message is triggered by either pending
DL data buffered in the CN or pending MT NAS message as specified in step 1b.
NOTE: The N2 message is new or an existing one, e.g. N2 notification message,
is to be decided during normative work.
3 The NG-RAN performs RAN paging.
4\. When the UE receives RAN paging, it initiates Connection Resume, which
triggers UE triggered Connection Resume procedure (see clause 6.6.3.2).
5a. User Plane PDUs are sent from UPF.
5b. AMF starts Network initiated NAS procedure, transmits DL NAS PDU and
starts the corresponding NAS retransmission timer, or starts N2 procedure.
### 6.6.4 Impacts on services, entities and interfaces
AMF:
\- eDRX parameters for RRC_INACTIVE state exchange on NGAP interface.
\- Estimated Maximum Wait time calculation based on eDRX parameters from
RRC_INACTIVE state.
\- Notification of MT service on NGAP interface.
\- New CM-CONNECTED substate, and potentially new N2 message.
gNB:
\- eDRX parameters for RRC_INACTIVE state exchange on NGAP interface.
\- Notification of MT service on NGAP interface which triggers the RAN Paging.
\- Potentially new N2 message.
SMF:
\- Supports data buffering/delivery Indication from AMF even in case of the N3
tunnel existence.
UPF:
\- none.
# 7 Evaluation
## 7.1 General
There are six solutions proposed to address the objective to enable long eDRX
when the UE is in RRC-Inactive. The table below is to provide an overview of
these solution. The solutions being:
**Solution 1:** Power saving enhancement with long eDRX cycle support for UE
in CM-CONNECTED with RRC_INACTIVE state.
**Solution 2:** Long eDRX with RAN buffering.
**Solution 3:** Solution #3: MT signalling and data handling for UE with long
eDRX cycle in RRC_Inactive state and UPF buffering.
**Solution 4:** RRC Inactive with CM-IDLE for eDRX>10.24s.
**Solution 5:** Enabling UPF buffering per NG-RAN request for UE in
RRC_Inactive state with long eDRX cycle.
**Solution 6:** Converged solution for handling RRC inactive with eDRX>10.24s.
Table 7.1-1
+---------+---------+---------+---------+---------+---------+---------+ | | **S |** S | **S |** S | **S |** S | | | olution | olution | olution | olution | olution | olution | | | #1**| #2** | #3**| #4** | #5**| #6** | +=========+=========+=========+=========+=========+=========+=========+ | State | RRC | RRC | RRC | RRC | RRC | RRC | | Combina | Inactiv | Inactiv | Inactiv | In | Inactiv | I | | tion(s) | e/CM-Co | e/CM-Co | e/CM-Co | active/ | e/CM-Co | nactive | | | nnected | nnected | nnected | CM-Idle | nnected | /CM-Co | | | | | | | | nnected | | | | | | | | and | | | | | | | | long | | | | | | | | eDRX | | | | | | | | (New | | | | | | | | AMF | | | | | | | | sub | | | | | | | | -state) | +---------+---------+---------+---------+---------+---------+---------+ | Node | RAN (at | RAN (at | RAN (at | RAN (at | RAN (at | RAN (at | | that | RRC | RRC | RRC | RRC | RRC | RRC | | co | R | R | R | R | R | R | | nfigure | elease) | elease) | elease) | elease) | elease) | elease) | | the UE | | | | | | | | eDRX in | | | | | | | | RRC-I | | | | | | | | nactive | | | | | | | +---------+---------+---------+---------+---------+---------+---------+ | AMF | Yes | No | Yes | Yes | Yes | Not | | aw | | | | | | exp | | areness | | | | | | licitly | | of | | | | | | (AMF | | RRC-I | | | | | | aware | | nactive | | | | | | of long | | state | | | | | | eDRX.) | | needed | | | | | | | | in | | | | | | | | CM-CO | | | | | | | | NNECTED | | | | | | | +---------+---------+---------+---------+---------+---------+---------+ | User | UPF/SMF | RAN or | UPF | UPF/SMF | RAN and | UPF/SMF | | data | | UPF/SMF | | | UPF | | | Bu | | | | | | | | ffering | | If RAN | | | RAN | | | | | fails | | | sends a | | | | | to | | | N2 | | | | | buffer | | | Suspend | | | | | ac | | | request | | | | | cording | | | i | | | | | to | | | ndicate | | | | | con | | | start | | | | | figured | | | of | | | | | eDRX, | | | CN/UPF | | | | | RAN | | | bu | | | | | will | | | ffering | | | | | i | | | after | | | | | nitiate | | | re | | | | | AN | | | ceiving | | | | | release | | | DL | | | | | pr | | | data(re | | | | | ocedure | | | maining | | | | | towards | | | eDRX | | | | | the CN. | | | Timer). | | | | | UE is | | | | | | | | moved | | | | | | | | to | | | | | | | | CM-Idle | | | | | | | | in the | | | | | | | | CN and | | | | | | | | the | | | | | | | | state | | | | | | | | in the | | | | | | | | UE | | | | | | | | remains | | | | | | | | as | | | | | | | | CM-Con | | | | | | | | nected. | | | | | +---------+---------+---------+---------+---------+---------+---------+ | MT | AMF is | AMF -> | AMF is | AMF is | AMF -> | AMF is | | Sig | aware | RAN | aware | aware | RAN | aware | | nalling | of eDRX | forward | of | of eDRX | forward | of eDRX | | | info | NAS | buffer | info | NAS | info | | | rmation | msg. | timer | rmation | msg. | rmation | | | | | ( | | | | | | | If the | initial | | If the | | | | | UE is | and | | UE is | | | | | not | re | | not | | | | | re | -buffer | | re | | | | | achable | timers) | | achable | | | | | then: | | | then: | | | | | RAN -> | | | RAN -> | | | | | AMF | | | AMF | | | | | r | | | Notif | | | | | eleases | | | ication | | | | | UE | | | that UE | | | | | context | | | is in | | | | | with | | | eDRX | | | | | Notif | | | cycle | | | | | ication | | | (re | | | | | that UE | | | maining | | | | | is in | | | eDRX | | | | | eDRX | | | Timer). | | | | | cycle. | | | UE | | | | | UE is | | | remains | | | | | moved | | | in | | | | | to | | | RRC-I | | | | | C | | | nactive | | | | | M-Idle. | | | and | | | | | | | | CM-Con | | | | | AMF may | | | nected. | | | | | try | | | AMF | | | | | again | | | suspend | | | | | later | | | MT | | | | | based | | | sig | | | | | on eDRX | | | nalling | | | | | info | | | based | | | | | rmation | | | on | | | | | | | | Timer. | | +---------+---------+---------+---------+---------+---------+---------+ | UE RRC | UE may | N/A | UE may | UE is | N/A | UE is | | Release | be | | be | r | | r | | timing. | r | | r | eleased | | eleased | | | eleased | | eleased | after | | after | | | before | | before | AMF | | AMF | | | AMF is | | AMF is | r | | r | | | n | | n | esponds | | esponds | | | otified | | otified | to the | | to the | | | | | | N2 | | N2 | | | | | | suspend | | request | | | | | | as | | | | | | | | sp | | | | | | | | ecified | | | | | | | | in | | | | | | | | claus | | | | | | | | e 4.8.1 | | | | | | | | of | | | | | | | | T | | | | | | | | S 23.50 | | | | | | | | 2 [3] | | | +---------+---------+---------+---------+---------+---------+---------+ | Sig | RAN-> | None | RAN-> | RAN-> | None, | RAN-> | | nalling | AMF | | AMF | AMF | when | AMF | | when UE | Notif | | Notif | Suspend | the | Suspend | | moves | ication | | ication | message | tra | message | | from | (eDRX | | (buffer | (eDRX | nsition | (eDRX | | RRC | config) | | timer) | config) | occurs. | config) | | Co | | | | | | | | nnected | AMF-> | | AMF-> | AMF-> | During | AMF-> | | to RRC | SMF -> | | SMF -> | SMF -> | the | SMF -> | | I | UPF PDU | | UPF PDU | UPF PDU | RRC_I | UPF PDU | | nactive | session | | session | session | nactive | session | | | modif | | modif | modif | period | modif | | | ication | | ication | ication | RAN-> | ication | | | | | (buffer | | AMF | | | | | | timer) | | Suspend | | | | | | | | message | | | | | | | | (eDRX | | | | | | | | config) | | | | | | | | | | | | | | | | AMF-> | | | | | | | | SMF -> | | | | | | | | UPF PDU | | | | | | | | session | | | | | | | | modif | | | | | | | | ication | | | | | | | | may | | | | | | | | occur. | | +---------+---------+---------+---------+---------+---------+---------+ | Sig | RAN-> | None | RAN-> | RAN-> | Only if | RAN-> | | nalling | AMF | | AMF | AMF | RAN | AMF | | when UE | Notif | | Notif | Resume | sent a | Resume | | moves | ication | | ication | message | N2 | message | | from | | | and | | Suspend | | | RRC | AMF-> | | then | AMF-> | request | AMF-> | | I | SMF -> | | AMF-> | SMF -> | to | SMF -> | | nactive | UPF PDU | | SMF -> | UPF PDU | start | UPF PDU | | to RRC | session | | UPF PDU | session | of DL | session | | Co | modif | | session | modif | data | modif | | nnected | ication | | modif | ication | buf | ication | | | | | ication | | fering, | | | | | | for MO | | then | | | | | | tr | | RAN | | | | | | iggered | | will | | | | | | con | | send a | | | | | | nection | | N2 | | | | | | resume. | | Resume | | | | | | | | request | | | | | | | | once | | | | | | | | the UE | | | | | | | | is in | | | | | | | | RRC-Co | | | | | | | | nnected | | | | | | | | state. | | +---------+---------+---------+---------+---------+---------+---------+ | Info | AMF | None | AMF | AMF | AMF | AMF | | rmation | commu | | commu | commu | commu | commu | | ex | nicates | EN: It | nicates | nicates | nicates | nicates | | changed | with | is FFS | with | with | with | with | | among | other | whether | other | other | other | other | | NFs | NFs on | and how | NFs on | NFs on | NFs on | NFs on | | | the UE | the AMF | the UE | the UE | the UE | the UE | | | reach | may | reach | reach | reach | reach | | | ability | support | ability | ability | ability | ability | | | the | UE | based | the | based | the | | | same | reach | on the | same | N1 | same | | | way as | ability | bu | way as | message | way as | | | in | notif | ffering | in | t | in | | | CM-IDLE | ication | info | CM-IDLE | ransfer | CM-IDLE | | | modes | based | rmation | modes | failure | modes | | | d | on IDLE | p | d | p | d | | | educing | mode | rovided | educing | rovided | educing | | | UE | eDRX | by gNB. | UE | by gNB | UE | | | reach | info | | reach | and may | reach | | | ability | rmation | | ability | reject | ability | | | info | also in | | info | r | info | | | rmation | CM-Con | | rmation | equests | rmation | | | based | nected. | | based | from | based | | | on gNB | | | on gNB | other | on gNB | | | p | | | p | NFs | p | | | rovided | | | rovided | based | rovided | | | eDRX | | | eDRX | on it. | eDRX | | | value. | | | value. | | value. | +---------+---------+---------+---------+---------+---------+---------+ | Paging | SMF/ | RAN | UPF | AMF | Based | AMF | | | UPF | trigger | f | send a | on MT | send a | | | f | paging | orwards | paging | data/N1 | paging | | | orwards | based | b | request | message | request | | | b | on UE | uffered | with | b | with | | | uffered | eDRX | data | new | uffered | new | | | data | config | based | ind | in RAN, | ind | | | based | uration | on | ication | RAN | ication | | | on | | \ | to | trigger | to | | | Es | If UE | "buffer | trigger | paging | trigger | | | timated | does | timer\" | RAN | based | RAN | | | Maximum | not | to | paging. | on UE | paging. | | | Wait | respond | trigger | | eDRX | | | | time to | data | RAN | If UE | configu | If UE | | | trigger | will be | paging. | does | ration. | does | | | RAN | d | | not | The UPF | not | | | paging | ropped. | If UE | respond | f | respond | | | | | does | AMF can | orwards | AMF can | | | If UE | Op | not | e | b | e | | | does | tional: | respond | scalate | uffered | scalate | | | not | RAN may | data | CN | data | CN | | | respond | e | will be | paging | based | paging | | | data | scalate | d | within | on | within | | | will be | to AMF | ropped. | RA. | \"_| RA. | | | dropped | for | | |_ buffer | | | | | paging | | | tim | | | | | within | | | er**\". | | | | | RA. | | | | | | | | | | | If UE | | | | | | | | does | | | | | | | | not | | | | | | | | respond | | | | | | | | MT | | | | | | | | data/N1 | | | | | | | | will be | | | | | | | | dropped | | | | | | | | if the | | | | | | | | buffer | | | | | | | | in RAN | | | | | | | | is | | | | | | | | ove | | | | | | | | rflown. | | +---------+---------+---------+---------+---------+---------+---------+ | M | UE | UE | UE | UE | UE | UE | | obility | trigger | trigger | trigger | trigger | trigger | trigger | | within | RNAU | RNAU | RNAU | RNAU | RNAU | RNAU | | RNA | | | | | | | | | New RAN | New RAN | New RAN | New RAN | New RAN | New RAN | | | node | node | node | node | node | node | | | fetch | fetch | fetch | fetch | fetch | fetch | | | UE | UE | UE | UE | UE | UE | | | context | context | context | context | context | context | | | from | from | from | from | from | from | | | anchor | anchor | anchor | anchor | anchor | anchor | | | RAN | RAN | RAN | RAN | RAN | RAN | | | node | node | node | node | node | node | | | and | and | and | and | and | and | | | perform | perform | perform | perform | perform | perform | | | path | path | path | path | path | path | | | switch | switch | switch | switch | switch | switch | +---------+---------+---------+---------+---------+---------+---------+ | M | UE | UE | UE | UE | UE | UE | | obility | trigger | trigger | trigger | trigger | trigger | trigger | | outside | RNAU | RNAU | RNAU | RNAU | RNAU | RNAU | | RNA | | | | | | | | | RAN | a) RAN | a) RAN | RAN | RAN | RAN | | | fetch | fetch | fetch | fetch | fetch | fetch | | | UE | UE | UE | UE | UE | UE | | | context | context | context | context | context | context | | | if Xn. | if Xn. | if Xn. | if Xn. | if Xn. | if Xn. | | | | | | | | | | | If RAN | b) RAN | b) RAN | If RAN | If RAN | If RAN | | | is | fetch | fetch | is | is | is | | | unable | UE | UE | unable | unable | unable | | | to | context | context | to | to | to | | | fetch | via AMF | via AMF | fetch | fetch | fetch | | | the UE | (b | (b | the UE | the UE | the UE | | | c | uffered | uffered | c | c | c | | | ontext, | data | data | ontext, | ontext, | ontext, | | | RAN | will be | will be | RAN | RAN | RAN | | | release | for | for | release | release | release | | | UE to | warded) | warded) | UE to | UE to | UE to | | | RRC | | | RRC | RRC | RRC | | | Idle. | If RAN | If RAN | Idle. | Idle. | Idle. | | | | is | is | | | | | | No UE | unable | unable | No UE | No UE | No UE | | | state | to | to | state | state | state | | | change | fetch | fetch | change | change | change | | | notif | the UE | the UE | notif | notif | notif | | | ication | c | c | ication | ication | ication | | | to CN | ontext, | ontext, | to CN | to CN | to CN | | | | RAN | RAN | | | | | | If UE | release | release | If UE | If UE | If UE | | | has MO | UE to | UE to | has MO | has MO | has MO | | | data, | RRC | RRC | data | data | data | | | the UE | Idle. | Idle. | the UE | the UE | the UE | | | will | | | will | will | will | | | perform | No UE | No UE | perform | perform | perform | | | SR from | state | state | SR from | SR from | SR from | | | Idle | change | change | Idle | Idle | Idle | | | | notif | notif | | | | | | | ication | ication | | | | | | | to CN | to CN | | | | | | | | | | | | | | | If UE | If UE | | | | | | | has MO | has MO | | | | | | | data | data | | | | | | | the UE | the UE | | | | | | | will | will | | | | | | | perform | perform | | | | | | | SR from | SR from | | | | | | | Idle | Idle | | | | +---------+---------+---------+---------+---------+---------+---------+ | UE | UE | UE | UE | UE | UE | UE | | sig | p | p | p | p | p | p | | nalling | erforms | erforms | erforms | erforms | erforms | erforms | | in | only | only | only | p | only | only | | RRC-I | p | p | p | eriodic | p | p | | nactive | eriodic | eriodic | eriodic | update | eriodic | eriodic | | | update | update | update | sig | update | update | | | sig | sig | sig | nalling | sig | sig | | | nalling | nalling | nalling | at both | nalling | nalling | | | at AS. | at AS. | at AS. | AS and | at AS. | at AS. | | | | | | NAS. | | | +---------+---------+---------+---------+---------+---------+---------+
## 7.2 Key Aspects
### 7.2.1 Overview
RRC-Inactive/CM-Connected was specified in Rel-15 as a new efficient state for
5G UEs. The key benefits for RRC-Inactive/CM-Connected compared to RRC-
Idle/CM-Idle are the following:
\- UE can resume the AS connection without performing e.g. AS security setup,
and save several RRC message interactions between the UE and RAN.
\- There is no RAN and CN interaction when the UE change state RRC-Inactive
to/from RRC-Connected, if not required.
\- User plane reconfiguration is not needed.
The area in which the UE move around in without the UE needs to perform Update
due to mobility maybe much smaller than compared to RRC-Idle. In RRC-Inactive
the area is defined by the Radio Notification Area (RNA) consisting of a set
of RAN nodes. In RRC-Idle then the area is the whole Registered Area (RA)
consisting of a set of Tracking Areas. This may result in more frequent
Updates due to mobility.
### 7.2.2 Buffering of Downlink data
Two methods of buffering are proposed in the solutions with the main
difference being DL data buffering in RAN or in the CN. Solution 2 and
solution 5 allow buffering of the DL data in RAN. Solutions 1, 3, 4, 5 and 6
allows DL data in the Core Network either in the SMF or UPF in RRC_INACATIVE
state.
#### 7.2.2.1 Core Network DL data buffering
To enable DL data buffering in the Core Network, the RAN needs to signal to
the AMF that the UE has changed its RRC state to RRC-Inactive with long eDRX.
This initial N2 message will trigger the communication among CN NFs i.e. the
AMF uses the Nsmf_PDUSession_UpdateSMContext Request to trigger the SMF to
start the modification procedure towards UPF. Solution 4 and 6 ends these
steps after the N2 response from the AMF to the RAN which allows the RAN to
release the UE to RRC-Inactive. Solution 1 and 3 performs the these steps
either after the UE is released or in parallel to that the UE is released. For
solution 1 and 3 there is a risk that DL data can be forwarded to RAN after
the UE is released which means that this DL data needs to be buffered in RAN
or discarded by RAN.
The UE CM state in the AMF after this indication from RAN differs. Solutions
1, 3 and 5 leave the AMF in CM-CONNECTED state, the AMF knows that the UE is
not reachable due to long eDRX and can apply the same procedures specified for
UE that is unreachable in CM-IDLE state. Solution 4 moves the AMF to CM-IDLE
with RRC-Inactive where selected CM-IDLE state procedures are applicable.
Solution 6 moves the AMF to new substate of CM-CONNECTED state where the AMF
can apply the same procedures specified for UE that is unreachable in CM-IDLE
state. Solution 2 can move the UE to CM-IDLE based on a RANs decision and
allow the CN to buffer using the existing procedures, however the UE is no
longer in RRC_Inactive.
The advantage of DL data buffering in UPF/SMF is that it has already been
specified for 5G-CIoT devices. It is expected that the existing HLcom
mechanism can be re-used for extended CN buffering.
The negative side is that enabling CN buffering would require RAN/CN
interaction, exchanging 5- 6 messages every time the UE change RRC state from
RRC-Connected to RRC-Inactive and 6 more messages every time the UE resumes to
RRC-Connected. This RAN/CN signalling is independent of whether or not any DL
data was sent to the UE.
#### 7.2.2.2 RAN DL data buffering
RAN is specified from Rel-15 to buffer DL data when the UE is released to RRC-
Inactive.
The advantage of having the DL data buffering in RAN is that this is legacy
behaviour for a UE in RRC-Inactive. There is no RAN/CN interaction when the UE
change RRC state between RRC-Connected - RRC-Inactive - RRC-Connected. Thus,
extending this capability means extending the buffering capacity of RAN .
Furthermore, Solution 2 allows a deployment where RAN decides whether to
support extended buffering or not. If the RAN chooses to not support extended
buffering, then CN buffering (HLcom) is used instead by releasing the UE to
CM-IDLE state. In that case, the RAN informs the AMF. Solution 5 reuses
existing RAN buffer capability(e.g. around 1.28 or 2.56s). When the RAN
determines that it cannot buffer any more downlink data, it informs the AMF to
start CN buffering. The CN is not impacted if the RAN receives very few
downlink packets during the UE unreachable time.
The negative side with RAN buffering for a UE in RRC-Inactive is that legacy
buffering is only for typically around 1.28 or 2.56s, which now will be
extended to a much longer time. This may affect the accumulated amount of data
to be buffered.
### 7.2.3 Mobile Terminated signalling
#### 7.2.3.1 AMF aware of RRC-Inactive with long eDRX
Solution 1, 3 and 6 makes the AMF aware of the non-reachability in CM-
Connected by the N2 message sent from RAN when the UE is released to RRC-
Inactive with long eDRX. This allows the AMF to schedule DL NAS message
considering the UE power save state in RAN. Solutions 1 and 3 expect the AMF
to run a subset of idle mode procedures in CM-CONNECTED state. Solution 6 uses
new CM-state in the AMF to run a subset of CM-IDLE state procedures in that
new state.
Solution 4 allows the same behaviour but avoids violating CM-CONNECTED state
design principles in the AMF by introducing a new state combination RRC-
Inactive/CM-IDLE with behaviour that is a subset of the AMF CM-IDLE behaviour.
Solution 5 allows the same indication to be issued by the RAN only on event
driven basis if there is DL NAS message towards the UE in long eDRX. The
advantage of this approach is that if eDRX is configured for a UE and the RAN
does not receive DL NAS message for the UE, then the AMF will never be aware
that the UE is using long eDRX power saving. When the UE becomes reachable the
RAN can trigger RAN paging without CN involvement. This may reduce the
signalling latency.
#### 7.2.3.2 AMF unaware of RRC-Inactive with long eDRX
In Solution 2 and 5 the AMF is unaware of that the UE is in RRC-Inactive state
and may not be reachable for a DL NAS message. That may result in that the DL
NAS message is sent towards the UE at a timing when the UE will not monitor
POs until the NAS retransmission timer expires.
To handle this, solution 5 proposes that RAN sends a notification as a
response to the DL NAS message informing the AMF about the UE power save. This
is the event discussed in 7.2.2.1. The AMF may try again once the UE is
reachable again. The UE remains in RRC-Inactive/CM-Connected state in the
network.
To handle the above situation, solution 2 reuses the legacy RAN paging failure
and RAN initiate the AN release procedure. The negative effect with using the
RAN paging failure is that the UE is moved to CM-Idle in the CN and RRC-Idle
in RAN, but the UE is still locally in RRC-Inactive/CM-Connected. When the UE
tries to resume the RRC connection it will be rejected, and the UE will need
to perform RRC establishment procedure followed by NAS Service Request if the
UE has UL data to transmit.
### 7.2.4 UE mobility outside RNA without Xn reference point.
The UE will wake-up after the long eDRX and search for a suitable cell and
resynchronize to the network. This will be done prior to the PTW. When the UE
detects that it is outside the RNA it will perform RNA update due to mobility
and the new RAN node will try to fetch the UE context based on the I-RNTI. If
there is no Xn and the RAN node is unable to fetch the UE context the RAN node
will reject the RRC Resume (RNAU) and the UE is moved to RRC-Idle. RAN does
not inform the AMF about this. The UE will need to perform RRC establishment
procedure followed by NAS Service Request if the UE has UL data to transmit.
This is legacy behaviour and applies to all solutions.
For solutions 4 and 6 the above does not affect the handling of the buffered
DL data as the DL data is buffered in the CN and the CN can use legacy CN
paging after the initial RAN based paging in the old RAN node failed.
Typically, the same applies to solution 1 and 3. This may cause additional
signalling latency.
Solutions 1, 2, 3 and 5 may have buffered DL data in the old RAN node and this
data will be lost if nothing is done to forward the data to the new RAN node.
Solution 1 proposes that the handling of the buffered DL data is done based on
implementation. Solution 2 and 3 propose to specify CN assisted UE context/DL
data forwarding from the old RAN node to the new RAN node.
### 7.2.5 High Latency Communication with RRC-Inactive
In solution 1, 3, 4 and 6, RAN informs the AMF and triggers CN buffering every
time the UE is released to RRC-Inactive with long eDRX, These solutions can
support the specified HLcom features in clause 5.31.8 of TS 23.501 [2]
depending on if the extended buffering is done in the SMF or UPF. To support
Downlink Data Delivery Status then the buffering needs to be done in the SMF.
To support of UE Reachability and Availability after DDN failure notification
buffering in the UPF is enough.
Solution 2 does not inform the AMF when the UE is released to RRC-Inactive
when RAN handles the MT data/signalling, do not support the HLcom features as
defined in clause 5.31.8 of TS 23.501 [2] when the UE is in CM-Connected. In
solution 5 the RAN may also decide to inform the AMF to start the CN MT
data/signalling handling and after that the HLcom feature in the CN can be
applied.
UE reachability notification can be supported even if the AMF is not informed
about UE RRC state change. A solution that is based on that the AMF is aware
of the negotiated long eDRX for CM-IDLE is described in Solution #2a in clause
6.2a.
# 8 Conclusions
## 8.1 Conclusions for Key Issue #1: Enabling long eDRX cycle support in
RRC_INACTIVE state
The following aspects are concluded as principles for the normative work:
\- It is agreed to support MT data signalling handling in CN when the UE is
unreachable due to long extended DRX in RRC inactive.
\- When the gNB sends an indication to the CN and provides unreachability
information (e.g., eDRX values negotiated between UE and gNB for RRC_INACTIVE
state), the CN applies the HLcom functionality based on gNB provided
unreachability information (as described in solution #6).
\- If the gNB has indicated the UE has entered RRC_INACTIVE to the CN, the gNB
also notifies the CN about the RRC State transition back to RRC_CONNECTED (as
described in solution #6).
NOTE 1: When to send the indication to the AMF is up to gNB implementation.
NOTE 2: If the indication of UE transition to RRC_INACTIVE is not sent (or
sent after UE has entered RRC_INACTIVE) by the gNB then until CN receives it
the CN cannot apply HLcom functionality and other NFs will not be aware of the
UE reachability, and certain HLcom related services provided to the AF via NEF
would not be available. Downlink data transmitted from the UPF to RAN might be
discarded and not delivered to the UE.
NOTE 3: Further coordination with RAN WGs may be needed during the normative
phase.
#