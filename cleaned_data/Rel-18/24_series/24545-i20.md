# Foreword
This Technical Specification has been produced by the 3rd Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
In the present document, modal verbs have the following meanings:
**shall** indicates a mandatory requirement to do something
**shall not** indicates an interdiction (prohibition) to do something
The constructions \"shall\" and \"shall not\" are confined to the context of
normative provisions, and do not appear in Technical Reports.
The constructions \"must\" and \"must not\" are not used as substitutes for
\"shall\" and \"shall not\". Their use is avoided insofar as possible, and
they are not used in a normative context except in a direct citation from an
external, referenced, non-3GPP document, or so as to maintain continuity of
style when extending or modifying the provisions of such a referenced
document.
**should** indicates a recommendation to do something
**should not** indicates a recommendation not to do something
**may** indicates permission to do something
**need not** indicates permission not to do something
The construction \"may not\" is ambiguous and is not used in normative
elements. The unambiguous constructions \"might not\" or \"shall not\" are
used instead, depending upon the meaning intended.
**can** indicates that something is possible
**cannot** indicates that something is impossible
The constructions \"can\" and \"cannot\" are not substitutes for \"may\" and
\"need not\".
**will** indicates that something is certain or expected to happen as a result
of action taken by an agency the behaviour of which is outside the scope of
the present document
**will not** indicates that something is certain or expected not to happen as
a result of action taken by an agency the behaviour of which is outside the
scope of the present document
**might** indicates a likelihood that something will happen as a result of
action taken by some agency the behaviour of which is outside the scope of the
present document
**might not** indicates a likelihood that something will not happen as a
result of action taken by some agency the behaviour of which is outside the
scope of the present document
In addition:
**is** (or any other verb in the indicative mood) indicates a statement of
fact
**is not** (or any other negative verb in the indicative mood) indicates a
statement of fact
The constructions \"is\" and \"is not\" do not indicate requirements.
# 1 Scope
The present document specifies the protocol aspects for the location
management capability of SEAL to support vertical applications (e.g. V2X) over
the 3GPP system.
The present document is applicable to the user equipment (UE) supporting the
location management client functionality as described in 3GPP TS 23.434 [4],
to the application server supporting the location management server
functionality as described in 3GPP TS 23.434 [4] and to the application server
supporting the vertical application server (VAL server) functionality as
defined in the specific vertical application service (VAL service)
specifications.
NOTE 1: The specification of the VAL server for a specific VAL service is out
of scope of present document.
NOTE 2: Non-3GPP access used by the UE is out of scope of the present
document.
# 2 References {#references-1}
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document in the same
Release as the present document.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 23.003: \"Numbering, addressing and identification\".
[3] 3GPP TS 23.032: \"Universal Geographical Area Description (GAD)\".
[4] 3GPP TS 23.434: \"Service Enabler Architecture Layer for Verticals (SEAL);
Functional architecture and information flows\".
[5] 3GPP TS 24.229: \"IP multimedia call control protocol based on Session
Initiation Protocol (SIP) and Session Description Protocol (SDP); Stage 3\".
[6] 3GPP TS 24.547: \"Identity management - Service Enabler Architecture Layer
for Verticals (SEAL); Protocol specification\".
[7] Void.
[8] IETF RFC 3261: \"SIP: Session Initiation Protocol\".
[9] IETF RFC 4825: \"The Extensible Markup Language (XML) Configuration Access
Protocol (XCAP)\".
[10] IETF RFC 6050: \"A Session Initiation Protocol (SIP) Extension for the
Identification of Services\".
[11] IETF RFC 6665: \"SIP-Specific Event Notification\".
[12] Void
[13] IETF RFC 6750: \"The OAuth 2.0 Authorization Framework: Bearer Token
Usage\".
[14] IETF RFC 3428: \"Session Initiation Protocol (SIP) Extension for Instant
Messaging\".
[15] 3GPP TS 24.379: \"Mission Critical Push To Talk (MCPTT) call control
Protocol specification\".
[16] IETF RFC 7231 : \"Hypertext Transfer Protocol (HTTP/1.1): Semantics and
Content\".
[17] 3GPP TS 29.122: \"T8 reference point for northbound Application
Programming Interfaces (APIs)\".
[18] 3GPP TS 29.549: \"Service Enabler Architecture Layer for Verticals
(SEAL); Application Programming Interface (API) specification\".
[19] IETF RFC 7159: \"The JavaScript Object Notation (JSON) Data Interchange
Format\".
[20] IETF RFC 7230: \"Hypertext Transfer Protocol (HTTP/1.1): Message Syntax
and Routing\".
[21] IETF RFC 7252: \"The Constrained Application Protocol (CoAP)\".
[22] IETF RFC 7959: \"Block-Wise Transfers in the Constrained Application
Protocol (CoAP)\".
[23] IETF RFC 7641: \"Observing Resources in the Constrained Application
Protocol (CoAP)\".
[24] IETF RFC 8132: \"PATCH and FETCH Methods for the Constrained Application
Protocol (CoAP)\".
[25] IETF RFC 8323: \"CoAP (Constrained Application Protocol) over TCP, TLS,
and WebSockets\".
[26] IETF RFC 8949: \"Concise Binary Object Representation (CBOR)\".
[27] IETF RFC 9177: \"Constrained Application Protocol (CoAP) Block-Wise
Transfer Options Supporting Robust Transmission\".
[28] IETF RFC 8610: \"Concise Data Definition Language (CDDL): A Notational
Convention to Express Concise Binary Object Representation (CBOR) and JSON
Data Structures\".
[29] 3GPP TS 24.546: \"Configuration management - Service Enabler Architecture
Layer for Verticals (SEAL); Protocol specification\".
[30] OMA OMA-TS-XDM_Core-V2_1-20120403-A: \"XML Document Management (XDM)
Specification\".
[31] IETF RFC 4122: \"A Universally Unique IDentifier (UUID) URN Namespace\".
[32] IETF RFC 6086: \"Session Initiation Protocol (SIP) INFO Method and
Package Framework\".
[33] 3GPP TS 29.572: \"5G System; Location Management Services; Stage 3\".
[34] 3GPP TS 29.641: \"3GPP registry for Service Names and Port Numbers\".
# 3 Definitions of terms and abbreviations
## 3.1 Terms
For the purposes of the present document, the terms given in 3GPP TR 21.905
[1] and the following apply. A term defined in the present document takes
precedence over the definition of the same term, if any, in 3GPP TR 21.905
[1].
**SEAL location management client** : An entity that provides the client side
functionalities corresponding to the SEAL location management service.
**SEAL location management server** : An entity that provides the server side
functionalities corresponding to the SEAL location management service.
For the purposes of the present document, the following terms and definitions
given in 3GPP TS 23.434 [4] apply:
**SEAL client**
**SEAL server**
**SEAL service**
**VAL server**
**VAL service**
**VAL user**
**Vertical**
**Vertical application**
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in 3GPP TR
21.905 [1] and the following apply. An abbreviation defined in the present
document takes precedence over the definition of the same abbreviation, if
any, in 3GPP TR 21.905 [1].
SCEF Service Capability Exposure Function
CoAP Constrained Application Protocol
SEAL Service Enabler Architecture Layer for verticals
SLM-C SEAL Location Management Client
SLM-S SEAL Location Management Server
SLMP SEAL Off-network Location Management Protocol
VAL Vertical Application Layer
# 4 General description
Location management is a SEAL service that provides the location management
related capabilities to one or more vertical applications. The present
document enables a SEAL location management client (SLM-C) and a VAL server
that communicate with a SEAL location management server (SLM-S).
# 5 Functional entities
## 5.1 SEAL location management client (SLM-C)
The SLM-C functional entity acts as the application client for location
management related transactions. To be compliant with the HTTP procedures in
the present document the SLM-C:
a) shall support the role of XCAP client as specified in IETF RFC 4825 [9];b)
shall support the role of XDMC as specified in OMA OMA-TS-XDM_Core-V2_1 [30];
c) shall support the location management procedures in clause 6.2;
d) shall support the off-network location management procedure in clause 6.3;
and
e) shall support HTTP client and HTTP server functionalities as specified in
IETF RFC 7230 [20].
To be compliant with the CoAP procedures in the present document the SLM-C:
a) shall support the role of CoAP client as specified in IETF RFC 7252 [21];
b) shall support FETCH method of CoAP as specified in IETF RFC 8132 [24];
c) shall support the capability to observe resources as specified in IETF RFC
7641 [23];
d) shall support the block-wise transfer as specified in IETF RFC 7959 [22];
e) may support the robust block transfer as specified in IETF RFC 9177 [27];
f) should support CoAP over TCP and Websocket as specified in IETF RFC 8323
[25];
g) shall support CBOR encoding as specified in IETF RFC 8949 [26]; and
h) shall support the procedures in clause 6.2.
NOTE 1: The security mechanism to be supported for the CoAP procedures is
described in 3GPP TS 24.547 [6].
NOTE 2: Support for TCP for the CoAP procedures is required if the client
connects over the network which blocks or impedes the use of UDP, e.g. when
NATs are present in the communication path.
NOTE 3: The CoAP protocol supports mechanism for reliable message exchange
over UDP. Use of TCP can also be beneficial if reliable transport is required
for other reasons, e.g. better observability of resources. Usage of CoAP over
TCP is an implementation choice.
NOTE 4: Support for the robust block transfer mechanism for the CoAP
procedures is beneficial in environments where packet loss is highly
asymmetrical and where performance optimization of block transfers is
required.
## 5.2 SEAL location management server (SLM-S)
## 5.2 SEAL location management server (SLM-S)
The SLM-S is a functional entity used to provide location management supported
within the vertical application layer. To be compliant with the HTTP
procedures in the present document the SLM-S:
a) shall support the role of XCAP server as specified in IETF RFC 4825 [9];
b) shall support the role of XDMS as specified in OMA OMA-TS-XDM_Core-V2_1
[30];
c) shall support the location management procedures in clause 6.2; and
d) shall support HTTP client and HTTP server functionalities as specified in
IETF RFC 7230 [20].
To be compliant with the CoAP procedures in the present document the SLM-C:
a) shall support the role of CoAP server as specified in IETF RFC 7252 [21];
b) shall support FETCH method of CoAP as specified in IETF RFC 8132 [24];
c) shall support the capability to observer resources as specified in IETF RFC
7641 [23];
d) shall support the block-wise transfer as specified in IETF RFC 7959 [22];
e) shall support the robust block transfer as specified in IETF RFC 9177 [27];
f) shall support CoAP over TCP and Websocket as specified in IETF RFC 8323
[25];
g) shall support CBOR encoding as specified in IETF RFC 8949 [26]; and
h) shall support the procedures in clause 6.2.
NOTE: The security mechanism to be supported for the CoAP procedures is
described in 3GPP TS 24.547 [6].
# 6 Location management procedures
## 6.1 General
## 6.2 On-network procedures
### 6.2.1 General
#### 6.2.1.1 Authenticated identity in HTTP request
Upon receiving an HTTP request, the SLM-S shall authenticate the identity of
the sender of the HTTP request is authorized as specified in 3GPP TS 24.547
[6], and if authentication is successful, the SLM-S shall use the identity of
the sender of the HTTP request as an authenticated identity.
#### 6.2.1.2 Boot up procedure
Upon device boot up, the SLM-C in the UE shall send HTTP POST message to SLM-S
containing the call back URI (where the SLM-S can send request message to
SLM-C) in a JavaScript Object Notation (JSON) structure as specified in IETF
RFC 7159 [19].
#### 6.2.1.3 Authenticated identity in CoAP request
Upon receiving a CoAP request, the SLM-S shall authenticate the identity of
the sender of the CoAP request as specified in 3GPP TS 24.547 [6], and if
authentication is successful, the SLM-S shall use the identity of the sender
of the CoAP request as an authenticated identity.
### 6.2.2 Event-triggered location reporting procedure
#### 6.2.2.1 General
The SLM-C sends a location reporting configuration request when it needs to
fetch location reporting configuration from the SLM-S.
The SLM-C sends a location report when at least one of the trigger criteria is
fulfilled. To send the location report the SLM-C can use an appropriate HTTP
or CoAP request message.
If a location reporting trigger is met, the SLM-C checks if the minimum-
report-interval timer is running. If the timer is running, the SLM-C waits
until the timer expires. When the minimum-report-interval timer expires, the
SLM-C:
a) shall send a location information report as specified in clause 6.2.2.2 for
HTTP and in 6.2.2.4 for CoAP if any of the reporting triggers are still met.
#### 6.2.2.2 SLM client HTTP procedure
##### 6.2.2.2.1 Fetching location reporting configuration
In order to fetch location reporting configuration, the SLM-C shall send an
HTTP GET request message according to procedures specified in IETF RFC 7231
[16]. In the HTTP GET request message, the SLM-C:
a) shall set the Request-URI to the URI identifying the XML document to be
fetched. In the Request-URI;
1) the \"auid\" is set to specific VAL service identity; and
2) the document selector is set to a document URI pointing to the location
reporting configuration document; and
b) shall include an Authorization header field with the \"Bearer\"
authentication scheme set to an access token of the \"bearer\" token type as
specified in IETF RFC 6750 [13].
Upon receiving an HTTP 200 (OK) response from the SLM-S containing:
a) a Content-Type header field set to \"application/vnd.3gpp.seal-location-
info+xml\"; and
b) an application/vnd.3gpp.seal-location-info+xml MIME body with a
\ element included in the \ root element;
the SLM-C:
a) shall store the content of the \ elements;
b) shall set the location reporting triggers accordingly; and
c) shall start the minimum-report-interval timer.
##### 6.2.2.2.2 Location reporting
In order to report the location information, the SLM-C shall send an HTTP POST
request message according to procedures specified in IETF RFC 7231 [16]. In
the HTTP POST request message, the SLM-C:
a) shall set the Request-URI to the URI included in the received HTTP response
message for location report configuration;
b) shall include a Content-Type header field set to
\"application/vnd.3gpp.seal-location-info+xml\";
c) shall include an application/vnd.3gpp.seal-location-info+xml MIME body and
in the \ root element:
1) shall include an \ element with a \ child element
set to the identity of the VAL user for location report; and
2) shall include a \ element and, if the report was triggered by a
location request, include the \ attribute set to the value of the
\ attribute in the received request. The \ element:
i) shall include a \ child element set to the value of each
\ value of the triggers that have been met; and
ii) shall include the location reporting elements corresponding to the
triggers that have been met;
d) shall set the minimum-report-interval timer to the minimum-report-interval
time and start this timer; and
e) shall reset all the trigger criteria for location reporting.
#### 6.2.2.3 SLM server HTTP procedure
##### 6.2.2.3.1 Fetching location reporting configuration
Upon receiving of an HTTP GET request where the Request-URI of the HTTP GET
request identifies a location reporting configuration document as specified in
the specific vertical application, the SLM-S:
a) shall determine the identity of the sender of the received HTTP GET request
as specified in clause 6.2.1.1, and:
1) if the identity of the sender of the received HTTP GET request is not
authorized to fetch requested configuration document, shall respond with a
HTTP 403 (Forbidden) response to the HTTP GET request and skip rest of the
steps;
b) shall support handling an HTTP GET request from a SLM-C according to
procedures specified in IETF RFC 4825 [9] \"GET Handling\".
c) shall generate an HTTP 200 (OK) response according to IETF RFC 7231 [16].
In the HTTP 200 (OK) response message, the SLM-S:
1) shall include a Content-Type header field set to
\"application/vnd.3gpp.seal-location-info+xml\";
2) shall include an application/vnd.3gpp.seal-location-info+xml MIME body and
in the \ root element:
i) shall include an \ element with a \ child element
set to the identity of the VAL user requesting for location reporting
configuration;
ii) shall include a \ element which shall include at least one
of the followings:
A) the location reporting elements which are requested;
B) a \ child element which provides the triggers for the
SLM-C to request a location report as described in clause 7;
C) a \child element specifying the minimum time
between consecutive reports. The value is given in seconds;
D) the \ element specifying the location access
type for which the location information is requested; and
E) the \ element specifying the positioning method for
which the location information is requested; and
3) shall include the \ attribute where defined for the sub-
elements defining the trigger criterion; and
d) shall send the HTTP 200 (OK) response towards the SLM-C.
##### 6.2.2.3.2 Location reporting
Upon reception of an HTTP POST request message containing:
a) a Content-Type header field set to \"application/vnd.3gpp.seal-location-
info+xml\"; and
b) an application/vnd.3gpp.seal-location-info+xml MIME body with a \
element included in the \ root element;
where the Request-URI of the HTTP POST request identifies an element of a XML
document as specified in application usage of the specific vertical
application, the SLM-S:
a) shall determine the identity of the sender of the received HTTP POST
request as specified in clause 6.2.1.1; and
1) if the identity of the sender of the received HTTP POST request is not
authorized to obtain location information of another VAL user, shall respond
with a HTTP 403 (Forbidden) response to the HTTP POST request and shall skip
rest of the steps; and
2) shall support handling an HTTP POST request from a SLM-C according to
procedures specified in IETF RFC 4825 [9] where the Request-URI of the HTTP
POST request identifies an element of XML document as specified in application
usage of the specific vertical application. The SLM-S:
i) shall store the received location information of the reporting SLM-C; and
ii) shall use the location information as needed.
NOTE: The \ element contains the event triggering identity in the
location information report from the VAL client, and can contain location
information.
#### 6.2.2.4 SLM client CoAP procedure
##### 6.2.2.4.1 Fetching location reporting configuration
In order to fetch trigger configuration, the SLM-C shall send a CoAP GET
request message to the SLM-S according to procedures specified in IETF RFC
7252 [21]. In the CoAP GET request, the SLM-C:
a) shall set the CoAP URI identifying the trigger configuration to be fetched
according to the resource definition in Annex B.3.1.2.2;
1) the \"apiRoot\" is set to the SLM-S URI;
2) the \"valServiceId\" is set to specific VAL service; and
3) the \"val-tgt-ue\" query option is set to either the VAL user identity or
VAL UE identity for which the trigger configuration is applicable;
b) shall include an Accept option set to \"application/vnd.3gpp.seal-location-
configuration+cbor\"; and
c) shall send the request protected with the relevant ACE profile (OSCORE
profile or DTLS profile) as described in 3GPP TS 24.547 [6].
Upon receiving a CoAP 2.05 (Content) response from the SLM-S containing:
a) a Content-Format option set to \"application/vnd.3gpp.seal-location-
configuration+cbor\"; and
b) including a \"LocationReportConfiguration\" object,
the SLM-C:
a) shall store the content of the \"LocationReportConfiguration\" object;
b) shall set the location reporting triggers accordingly; and
c) shall start the minimum-report-interval timer.
##### 6.2.2.4.2 Location reporting
In order to report the location information, the SLM-C shall send a CoAP PUT
request message according to procedures specified in IETF RFC 7252 [21]. In
the CoAP PUT request message, the SLM-C:
a) shall set the CoAP URI identifying the location report to be sent according
to the resource definition in Annex B.3.1.2.3;
1) the \"apiRoot\" is set to the SLM-S URI; and
2) the \"valTgtUe\" is set to either the VAL user identity or VAL UE identity
for which the location is reported; and
b) shall include a Content-Format option set to \"application/vnd.3gpp.seal-
location-info+cbor\";
c) shall include a \"LocationReport\" object:
1) shall include a \"triggerIds\" attribute set to the value of each trigger
ID value of the triggers that have been met; and
2) shall include a \"locInfo\" object corresponding to the triggers that have
been met;
d) shall send the request protected with the relevant ACE profile (OSCORE
profile or DTLS profile) as described in 3GPP TS 24.547 [6].
e) shall set the minimum-report-interval timer to the minimum-report-interval
time and start this timer; and
f) shall reset all the trigger criteria for location reporting.
#### 6.2.2.5 SLM server CoAP procedre
##### 6.2.2.5.1 Fetching location reporting configuration
Upon receiving of a CoAP GET request where the CoAP URI of the CoAP GET
request identifies a trigger configuration as specified in Annex
B.3.1.2.2.3.1, the SLM-S:
a) shall determine the identity of the sender of the received CoAP GET request
as specified in clause 6.2.1.2, and:
1) if the identity of the sender of the received CoAP GET request is not
authorized to fetch requested trigger configuration, shall respond with a CoAP
4.03 (Forbidden) response to the CoAP GET request and skip rest of the steps;
b) shall generate a CoAP 2.05 (Content) response according to IETF RFC 7252
[21]. In the CoAP 2.05 (Content) response message, the SLM-S:
1) shall include a Content-Format option set to \"application/vnd.3gpp.seal-
location-configuration+cbor\"; and
2) shall include a \"LocationReportConfiguration\" object:
i) shall include a \"locationType\" attribute which is requested; and
ii) shall include at least one of the followings:
A) a \"triggeringCriteria\" object which provides the triggers for the SLM-C
to request a location report; and
B) a \"minimum-interval-length\" attribute specifying the minimum time between
consecutive reports. The value is given in seconds; and
iii) may include a \"requestedLocAccessType\" attribute specifying the
location access type for which the location information is requested; and
iv) may include a \"requestedPosMethod\" attribute specifying the positioning
method for which the location information is requested; and
c) shall send the CoAP 2.05 (Content) response towards the SLM-C.
##### 6.2.2.5.2 Location reporting
Upon reception of a CoAP PUT request message where the CoAP URI of the CoAP
PUT request identifies a location report as specified in Annex B.3.1.2.3.3.1,
and containing:
a) a Content-Format option set to \"application/vnd.3gpp.seal-location-
info+cbor\"; and
b) a \"LocationReport\" object;
the SLM-S:
a) shall determine the identity of the sender of the received CoAP PUT request
as specified in clause 6.2.1.2; and
1) if the identity of the sender of the received CoAP PUT request is not
authorized to report location information, shall respond with a CoAP 4.03
(Forbidden) response to the CoAP PUT request and shall skip rest of the steps;
and
2) shall support handling a CoAP PUT request from a SLM-C:
i) shall store the received location information of the reporting SLM-C; and
ii) shall use the location information as needed.
NOTE: The \"LocationReport\" object contains the event triggering identity in
the location information report from the VAL client, and can contain location
information.
### 6.2.3 On-demand location reporting procedure
#### 6.2.3.1 SLM client HTTP procedure
Upon receiving an HTTP POST request containing:
a) an Accept header field set to \"application/vnd.3gpp.seal-location-
info+xml\";
b) a Content-Type header field set to \"application/vnd.3gpp.seal-location-
info+xml\";
c) an application/vnd.3gpp.seal-location-info+xml MIME body with a \
element included in the \ root element;
the SLM-C:
a) may send a location report as specified in clause 6.2.2.2.2.
#### 6.2.3.2 SLM server HTTP procedure
If the SLM-S needs to request the SLM-C to report its location, the SLM-S
shall generate an HTTP POST request according to procedures specified in IETF
RFC 7231 [16]. The SLM-S:
a) shall include a Request-URI set to the URI corresponding to the identity of
the SLM-C;
b) shall include an Accept header field set to \"application/vnd.3gpp.seal-
location-info+xml\";
c) shall include a Content-Type header field set to
\"application/vnd.3gpp.seal-location-info+xml\";
d) shall include an application/vnd.3gpp.seal-location-info+xml MIME body and
in the \ root element:
1) shall include a \ element with a \ child
element set to the identity of the VAL user whose location is requested;
2) shall include a \ element, and in the \ element:
i) shall include a \ attribute;
ii) may include the location reporting elements which are requested;
iii) may include \ element; and
iv) may include \ element; and
e) shall send the HTTP POST request as specified in IETF RFC 7231 [16].
NOTE: Push notification service can be used to send HTTP POST request to the
client. Details about the push notification service is out of scope this
specification.
#### 6.2.3.3 SLM client CoAP procedure
Upon receiving an CoAP GET request where the CoAP URI of the CoAP GET request
identifies the location resource as specified in Annex B.4.1.2.2.3.1, and
containing:
a) a Content-Formatoption set to \"application/vnd.3gpp.seal-location-
info+cbor\", and
b) a \"RequestedLocation\" object;
the SLM-C shall generate a CoAP 2.05 (Content) response according to IETF RFC
7252 [21]. In the CoAP 2.05 (Content) response message, the SLM-C:
a) shall include a Content-Format option set to \"application/vnd.3gpp.seal-
location-info+cbor\";
b) shall include a \"LocationReport\" object:
1) shall include a \"locInfo\" object containing the location information; and
c) shall send the CoAP 2.05 (Content) response towards the SLM-S.
#### 6.2.3.4 SLM server CoAP procedure
If the SLM-S needs to request the SLM-C to report its location, the SLM-S
shall generate a CoAP GET request according to procedures specified in IETF
RFC 7252 [21]. The SLM-S:
a) shall set the CoAP URI identifying the location to be retrieved according
to the resource definition in Annex B.4.1.2.2.3.1;
1) the \"apiRoot\" is set to the SLM-C URI;
b) shall include a Content-Format option set to \"application/vnd.3gpp.seal-
location-info+cbor\";
c) shall include a \"RequestedLocation\" object:
1) shall include a \"valTgtUes\" object set to the identity of the VAL users
or VAL UEs whose location information is requested;
2) may include a \"locationType\" attribute which is requested;
3) may include a \"requestedLocAccessType\" object set to the identifies of
the location access type for which the location information is requested; and
4) may include a \"requestedPosMethod\" object set to the identifies the
positioning method for which the location information is requested; and
d) shall send the request protected with the relevant ACE profile (OSCORE
profile or DTLS profile) as described in 3GPP TS 24.547 [6].
### 6.2.4 Client-triggered or VAL server-triggered location reporting
procedure
#### 6.2.4.1 SLM client HTTP procedure
Upon receiving a request from a VAL user to obtain the location information of
another VAL user or to update the location reporting trigger, the SLM-C shall
send an HTTP POST request according to procedures specified in IETF RFC 7231
[16]. In the HTTP POST request, the SLM-C:
a) shall set the Request-URI to the URI included in the received HTTP response
message for location report configuration;
b) shall include a Content-Type header field set to
\"application/vnd.3gpp.seal-location-info+xml\"; and
c) shall include an application/vnd.3gpp.seal-location-info+xml MIME body and
in the \ root element:
1) shall include an \ element with a \ child element
set to the identity of the VAL user which requests the location report;
2) shall include a \ element with a \ child
element set to the identity of the VAL user for which a location report is
requested. The VAL user should belong to the same VAL service as the identity
of the VAL user which requests the location report; and
3) a \ element which shall include at least one of the
followings:
i) an \ child element to indicate that an
immediate location report is required;
ii) the location reporting elements which are requested;
iii) a \ child element which indicate a specified
location trigger criteria to send the location report;
iv) a \child element specifying the minimum time
between consecutive reports. The value is given in seconds; and
v) if an \ element is set to required, an
\ child element set to the information of the endpoint of the
requesting VAL server to which the location report notification has to be
sent.
Upon reception of an HTTP POST request message containing:
a) a Content-Type header field set to \"application/vnd.3gpp.seal-location-
info+xml\"; and
b) an application/vnd.3gpp.seal-location-info+xml MIME body with a \
element included in the \ root element;
where the Request-URI of the HTTP POST request identifies an element of a XML
document as specified in application usage of the specific vertical
application, the SLM-C shall follow the procedure as specified in clause
6.2.2.3.2.
#### 6.2.4.2 SLM server HTTP procedure
Upon reception of an HTTP POST request where the Request-URI of the HTTP POST
request identifies an element of a XML document as specified in application
usage of the specific vertical application, the SLM-S:
a) shall determine the identity of the sender of the received HTTP POST
request as specified in clause 6.2.1.1 and;
1) if the identity of the sender of the received HTTP POST request is not
authorized to obtain location information of another VAL user, shall respond
with a HTTP 403 (Forbidden) response to the HTTP POST request and shall skip
rest of the steps; and
2) shall support handling an HTTP POST request from a SLM-C according to
procedures specified in IETF RFC 4825 [9] where the Request-URI of the HTTP
POST request identifies an element of XML document as specified in application
usage of the specific vertical application. Depending on the information
specified by the HTTP POST request, the SLM-S initiates either an event-
triggered location reporting procedure as specified in clause 6.2.2.2 or an
on-demand location reporting procedure as specified in clause 6.2.2.3 for
providing the SLM-C with the location of the requested VAL user; and
b) For on-demand location report request, upon receiving the location
information of the SLM-C, the SLM-S sends location report to the requesting
SLM-C or VAL server as specified in clause 6.2.2.2.
#### 6.2.4.3 SLM client CoAP procedure
Upon receiving a request from a VAL user to obtain the location information of
another VAL user, the SLM-C shall:
a) if trigger configuration is provided, send a CoAP FETCH request according
to procedures specified in IETF RFC 8132 [24] to SLM-S to observe the location
information of another VAL user; and
b) otherwise, send a CoAP GET request according to procedure specified in in
IETF RFC 7252 [21] to SLM-S to retrieve the location information of another
VAL user.
In the CoAP FETCH request, the SLM-C shall:
a) set the CoAP URI identifying the location information to be observed
according to the resource definition in Annex B.3.1.2.4.3.1;
1) the \"apiRoot\" is set to the SLM-S URI;
b) include an Accept option set to \"application/vnd.3gpp.seal-location-
info+cbor\";
c) set an Observe option to 0 (Register);
d) set a Content-Format option set to \"application/vnd.3gpp.seal-location-
configuration+cbor\";
e) include a \"LocationReportConfiguration\" object:
1) shall include a \"valTgtUes\" object set to the identity of the observed
VAL users;
2) shall include a \"locationType\" attribute which is requested; and
3) shall include at least one of the following:
i) a \"triggeringCriteria\" object which provides the triggers for the SLM-C
to request a location report as described in Annex X; and
ii) a \"minimum-interval-length\" attribute specifying the minimum time
between consecutive reports. The value is given in seconds; and
4) may include a \"requestedLocAccessType\"object set to the identifies of the
location access type for which the location information is requested; and
5) may include a \"requestedPosMethod\" object set to the identifies the
positioning method for which the location information is requested; and
f) shall send the request protected with the relevant ACE profile (OSCORE
profile or DTLS profile) as described in 3GPP TS 24.547 [6].
In the CoAP GET request, the SLM-C shall:
a) set the CoAP URI identifying the location information to be fetched
according to the resource definition in Annex B.3.1.2.4.3.2;
1) the \"apiRoot\" is set to the SLM-S URI; and
2) the \"val-tgt-ue\" query option is set to either the VAL user identity or
VAL UE identity for which the location is requested;
b) include an Accept option set to \"application/vnd.3gpp.seal-location-
info+cbor\"; and
c) send the request protected with the relevant ACE profile (OSCORE profile or
DTLS profile) as described in 3GPP TS 24.547 [6].
Upon receiving a CoAP 2.05 (Content) response from the SLM-S containing:
a) a Content-Format option set to \"application/vnd.3gpp.seal-location-
info+cbor\"; and
b) including one or more \"LocationReport\" objects,
the SLM-C:
a) shall store the content of the received \"LocationReport\" object(s).
#### 6.2.4.4 SLM server CoAP procedure
Upon reception of a CoAP FETCH request message where the CoAP URI of the CoAP
FETCH request identifies a location resource as specified in B.3.1.2.4.3.1,
and containing:
a) an Accept option set to \"application/vnd.3gpp.seal-location-info+cbor\";
b) a Content-Format option set to \"application/vnd.3gpp.seal-location-
configuration+cbor\";
c) an Observe option; and
d) a \"LocationReportConfiguration\" object;
the SLM-S:
a) shall determine the identity of the sender of the received CoAP FETCH
request as specified in clause 6.2.1.2; and
1) if the identity of the sender of the received CoAP FETCH request is not
authorized to obtain location information of another VAL user, shall respond
with a CoAP 4.03 (Forbidden) response to the CoAP FETCH request and shall skip
rest of the steps; and
2) shall generate a series of CoAP 2.05 (Content) response according to IETF
RFC 8132 [24]. In the CoAP 2.05 (Content) response message, the SLM-S:
i) shall include a Content-Format option set to \"application/vnd.3gpp.seal-
location-info+cbor\"; and
ii) shall include one or more \"LocationReport\" objects corresponding to the
triggers that have been met; and
b) shall send the CoAP 2.05 (Content) response towards the SLM-C.
Upon reception of a CoAP GET request message where the CoAP URI of the CoAP
GET request identifies a location resource as specified in B.3.1.2.4.3.2, and
containing:
a) an Accept option set to \"application/vnd.3gpp.seal-location-info+cbor\";
and
b) a Content-Format option set to \"application/vnd.3gpp.seal-location-
configuration+cbor\".
the SLM-S:
a) shall determine the identity of the sender of the received CoAP GET request
as specified in clause 6.2.1.2; and
1) if the identity of the sender of the received CoAP GET request is not
authorized to obtain location information of another VAL user, shall respond
with a CoAP 4.03 (Forbidden) response to the CoAP GET request and shall skip
rest of the steps;
b) shall generate a CoAP 2.05 (Content) response according to IETF RFC 7252
[21]. In the CoAP 2.05 (Content) response message, the SLM-S:
1) shall include a Content-Format option set to \"application/vnd.3gpp.seal-
location-info+cbor\"; and
2) shall include a \"LocationReport\" object corresponding to the triggers
that have been met; and
c) shall send the CoAP 2.05 (Content) response towards the SLM-C.
### 6.2.5 Location reporting triggers configuration cancel procedure
#### 6.2.5.1 SLM client HTTP procedure
Upon receiving an HTTP POST request containing:
a) a Content-Type header field set to \"application/vnd.3gpp.seal-location-
info+xml\"; and
b) an application/vnd.3gpp.seal-location-info+xml MIME body with a
\ element included in the \ root element, which
has none of child elements;
the SLM-C:
a) shall delete the content of the \ elements;
b) shall stop the location reporting; and
c) shall generate an HTTP 200 (OK) response to the received HTTP POST request
message according to IETF RFC 7231 [16] and shall send it towards SLM-S.
#### 6.2.5.2 SLM server HTTP procedure
Upon receiving an HTTP POST request containing:
a) a Content-Type header field set to \"application/vnd.3gpp.seal-location-
info+xml\"; and
b) an application/vnd.3gpp.seal-location-info+xml MIME body with a
\ element included in the \ root element, which
has none of child elements;
the SLM-S:
a) shall include a Request-URI set to the URI corresponding to the identity of
the SLM-C;
b) shall include a Content-Type header field set to
\"application/vnd.3gpp.seal-location-info+xml\";
c) shall include an application/vnd.3gpp.seal-location-info+xml MIME body and
in the \ root element:
1) shall include an \ element with a \ child element
set to the identity of the VAL user for location reporting event triggers
configuration cancellation;
2) shall include a \ element which shall not include any child
element; and
d) shall send the HTTP POST request as specified in IETF RFC 7231 [16].
Upon receiving response from the SLM-C, the SLM-S shall generate an HTTP 200
(OK) response to the received HTTP POST request message according to IETF RFC
7231 [16] and shall send it towards VAL server.
#### 6.2.5.3 VAL Server procedure
The VAL Server (or authorized VAL user) may cancel the location reporting
triggers configuration for the SLM-C by generatiing an HTTP POST request
message according to procedures specified in IETF RFC 7231 [16]. The VAL
server:
a) shall include a Request-URI set to the URI corresponding to the identity of
the SLM-S;
b) shall include a Content-Type header field set to
\"application/vnd.3gpp.seal-location-info+xml\";
c) shall include an application/vnd.3gpp.seal-location-info+xml MIME body and
in the \ root element:
1) shall include a \ element set to the identity of the VAL user
for location reporting event triggers configuration cancellation;
2) shall include a \ element which shall not include any child
element; and
d) shall send the HTTP POST request as specified in IETF RFC 7231 [16].
#### 6.2.5.4 SLM client CoAP procedure
Upon receiving an CoAP DELETE request where the CoAP URI of the CoAP DELETE
request identifies a location reporting configuration resource as specified in
B.4.1.2.2.3.3, the SLM-C:
a) shall delete the content of the trigger configuration object;
b) shall stop the location reporting; and
c) shall generate a CoAP 2.02 (Deleted) response to the received CoAP DELETE
request message according to IETF RFC 7252 [21] and shall send it towards
SLM-S.
#### 6.2.5.5 SLM server CoAP procedure
Upon receiving an HTTP POST request containing from VAL server:
a) a Content-Type header field set to \"application/vnd.3gpp.seal-location-
info+xml\"; and
b) an application/vnd.3gpp.seal-location-info+xml MIME body with a
\ element included in the \ root element, which
has none of child elements,
the SLM-S shall send a CoAP DELETE request message to the SLM-C. In the CoAP
DELETE request, the SLM-S:
a) shall set the CoAP URI identifying the trigger configuration to be deleted
according to the resource definition in Annex B.4.1.2.2.3.3;
1) the \"apiRoot\" is set to the SLM-C URI; and
2) \"valServiceId\" is set to the specific VAL service identity; and
b) shall send the request protected with the relevant ACE profile (OSCORE
profile or DTLS profile) as described in 3GPP TS 24.547 [6].
Upon receiving a response from the SLM-C, the SLM-S shall generate an HTTP 200
(OK) response to the received HTTP POST request message according to IETF RFC
7231 [16] and shall send it towards VAL server.
### 6.2.6 Location information subscription procedure
The VAL service will use the same identity which has been authenticated by VAL
service with SIP core using SIP based REGISTER message. If VAL service do not
support SIP protocol, then HTTP based method needs to be used.
#### 6.2.6.1 VAL server procedure
##### 6.2.6.1.1 SIP based procedure
##### 6.2.6.1.1.1 Create subscription {#create-subscription .H6}
In order to subscribe location information of one or more VAL users or VAL
UEs, if VAL server supports SIP, the VAL server shall generate an initial SIP
MESSAGE request according to 3GPP TS 24.229 [5] and IETF RFC 3428 [14]. In the
SIP MESSAGE request, the VAL server:
a) shall set the Request-URI to the public service identity identifying the
originating SLM-S serving the VAL server;
b) shall include the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.seal\"
(coded as specified in 3GPP TS 24.229 [5]), in a P-Preferred-Service header
field according to IETF RFC 6050 [10];
c) shall include an application/vnd.3gpp.seal-location-info+xml MIME body and
in the \ root element;
1) shall include an \ element with a \ child element
set to the identity of the VAL server which requests the location information
subscription;
2) shall include a \ element which:
i) shall include an \ element with one or more \
child elements set to the identities of the VAL users whose location
information is requested;
ii) shall include a \ element specifying the time
between consecutive reports. The value is given in seonds;
iii) shall include an \ element specifying the time when the VAL
server wants to receive the current status and later notification; and
iv) may include a \ element to indicate that supplementary
location information is required; and
v) a \ element specifying the location QoS as specified in TS
29.572 [33] clause 6.1.6.2.13 if the VAL users whose location information is
requested; and
d) shall send the SIP MESSAGE request towards the SLM-S according to 3GPP TS
24.229 [5].
Upon receiving a SIP MESSAGE with an application/vnd.3gpp.seal-location-
info+xml MIME body, the VAL server:
a) shall store the Subcription expiry value set in \ element; and
b) may start subscription refresh timer and set expiry time for the
subscription refresh timer to the 2/3 of Subcription expiry value.
NOTE: It is upto implementation to refressh subscribe upon expiry of
subscription refresh timer.
##### 6.2.6.1.1.2 Deleting subscription {#deleting-subscription .H6}
In order to delete the subscription as identified by the subscription
identifier, the VAL server:
a) shall generate a SIP MESSAGE request according to 3GPP TS 24.229 [5] and
IETF RFC 3428 [14];
b) shall include an application/vnd.3gpp.seal-location-info+xml MIME body and
in the \ root element, the VAL server:
1) a \ element set to the subscription identifier
value which uniqly identified the subscription; and
2) set an \ element to zero;
c) shall send the SIP MESSAGE request towards the SLM-S according to 3GPP TS
24.229 [5].
Upon receiving a SIP MESSAGE with an application/vnd.3gpp.seal-location-
info+xml MIME body containing \ element along with
\ element set to zero, the VAL server:
a) shall delete the subscription related data.
##### 6.2.6.1.2 HTTP based procedure
##### 6.2.6.1.2.1 Create subscription {#create-subscription-1 .H6}
If VAL server does not support SIP, the VAL server shall send an HTTP POST
request to the SLM-S according to procedures specified in IETF RFC 7231 [16].
In the HTTP POST request message, the VAL server:
a) shall include a Request-URI set to the URI corresponding to the identity of
the SLM-S;
b) shall include an Accept header field set to \"application/vnd.3gpp.seal-
location-info+xml\";
c) shall include a Content-Type header field set to
\"application/vnd.3gpp.seal-location-info+xml\";
d) shall include an application/vnd.3gpp.seal-location-info+xml MIME body and
in the \ root element;
1) shall include an \ element with a \ child element
set to the identity of the VAL server which requests the location information
subscription; and
2) shall include a \ element as described in clause 6.2.6.1.1.1;
and
e) shall send the HTTP POST request towards the SLM-S as specified in IETF RFC
7231 [16].
Upon receiving an HTTP POST request with an application/vnd.3gpp.seal-
location-info+xml MIME body, the VAL server:
a) shall store the Subcription expiry value set in \ element; and
b) may start subscription refresh timer and set expiry time for the
subscription refresh timer to the 2/3 of Subcription expiry value.
NOTE: It is upto implementation to refressh subscribe upon expiry of
subscription refresh timer.
##### 6.2.6.1.2.2 Delete subscription {#delete-subscription .H6}
In order to delete the subscription as identified by the subscription
identifier, the VAL server shall generate an HTTP POST request according to
procedures specified in IETF RFC 7231 [16]. In the HTTP POST request message,
the VAL server:
a) shall include an application/vnd.3gpp.seal-location-info+xml MIME body and
in the \ root element:
1) shall include a \ element set to the subscription
identifier value which uniqly identified the subscription; and
2) shall include an \ element set to zero;
b) shall send the HTTP POST request towards the SLM-S as specified in IETF RFC
7231 [16].
Upon receiving an HTTP POST with an application/vnd.3gpp.seal-location-
info+xml MIME body containing \ element along with
\ element set to zero, the VAL server:
a) shall delete the subscription related data.
#### 6.2.6.2 Server procedure
##### 6.2.6.2.1 SIP based procedure
##### 6.2.6.2.1.1 Create subscription {#create-subscription-2 .H6}
Upon receiving a SIP MESSAGE request such that:
a) Request-URI of the SIP MESSAGE request contains the public service identity
identifying the SLM-S of the served VAL server;
b) the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.seal\" (coded as specified
in 3GPP TS 24.229 [5]), in a P-Asserted-Service header field according to IETF
RFC 6050 [10]; and
c) the SIP MESSAGE request contains an application/vnd.3gpp.seal-location-
info+xml MIME body with an \ element included in the \ root element;
the SLM-S:
a) shall identify the served VAL user ID in the \ element of the
application/ vnd.3gpp.seal-location-info+xml MIME body of the SIP MESSAGE
request;
b) if the Request-URI of the SIP MESSAGE request contains the public service
identity identifying the SLM-S serving the VAL server, shall identify the
originating VAL user ID from public user identity in the P-Asserted-Identity
header field of the SIP MESSAGE request;
c) if the originating VAL user ID is different than the served VAL user ID,
shall send a 403 (Forbidden) response and shall not continue with the rest of
the steps; and
d) shall generate a 200 (OK) response to the SIP MESSAGE request according to
3GPP TS 24.229 [5] and send it towards VAL server.
e) shall store all users information contained in \ element of
\ element;
f) shall store the expiry time for the subscription to the \
value; if the expiry time value as present in \ element is not
acceptable to the SLM-S, the SLM-S may change the expiry time value to a lower
value;
g) shall store the time interval value to the \ element;
h) shall store the requested location QoS to the \ element;
i) shall store the supplementary location information indication of the
\ element;
j) shall generate and assign a unique integer as subscription identifier to
the subscription request received from VAL server;
k) shall generate a SIP MESSAGE request according to 3GPP TS 24.229 [5] and
IETF RFC 3428 [14].
l) In the SIP MESSAGE, the SLM-S shall include an application/vnd.3gpp.seal-
location-info+xml MIME body and in the \ root element;
1) shall include a \ element which shall include:
i) a \ element set to the unique subscription
identifier which is assigned to the subscription request;
ii) an \ element set to the accepted expiry time value; and
iii) if the VAL users whose location information is requested as present in
\ element is not fully acceptable to the SLM-S, the SLM-S may
change the VAL users to a subset and shall include an \ with
one or more \ child elements set to the identities of the new VAL
users;
m) shall send the SIP MESSAGE request towards the VAL server according to 3GPP
TS 24.229 [5]; and
n) shall start the timer TLM-1 (subscription expiry) and set the expiry time
of the timer to the expiry time for the subscription.
o) shall start the timer TLM-2 (notification interval) timer and set the
internal time of the timer to the \ element value.
##### 6.2.6.2.1.2 Delete subscription {#delete-subscription-1 .H6}
Upon receiving a SIP MESSAGE with an application/vnd.3gpp.seal-location-
info+xml MIME body containing \ element along with
\ element set to zero, the SLM-S:
a) shall generate a SIP 200 (OK) response and send it towards VAL server;
b) shall delete all information related to subscription;
c) shall generate a SIP MESSAGE request according to 3GPP TS 24.229 [5] and
IETF RFC 3428 [14].
d) In the SIP MESSAGE, the SLM-S shall include an application/vnd.3gpp.seal-
location-info+xml MIME body and in the \ root element;
1) shall include a \ element which shall include:
i) a \ element set to the unique subscription
identifier which is assigned to the subscription request;
d) shall send the SIP MESSAGE request towards the VAL server according to 3GPP
TS 24.229 [5];
e) shall stop TLM-1 (subscription expiry) timer if it is running; and
f) shall stop TLM-2 (notification interval) timer if it is running.
##### 6.2.6.2.1.3 Expiry of TLM-1 (subscription expiry) {#expiry-of-
tlm-1-subscription-expiry .H6}
On expiry of TLM-1 (subscription expiry) timer, the SLM-S shall consider the
subscription terminated and shall inform VAL server about subscription
terminated. In order to notify the VAL server about the termination of the
subscription, the SLM-S:
a) shall generate a SIP MESSAGE request according to 3GPP TS 24.229 [5] and
IETF RFC 6086 [32];
b) shall include in the SIP MESSAGE request, an application/vnd.3gpp.seal-
location-info+xml MIME body and in the \ root element, the VAL
server:
1) a \ element set to the subscription identifier
value which uniqly identified the subscription; and
2) set an \ element to zero;
c) shall send the SIP MESSAGE request towards the VAL server according to 3GPP
TS 24.229 [5].
##### 6.2.6.2.1.4 Expiry of TLM-2 (notification interval) timer {#expiry-of-
tlm-2-notification-interval-timer .H6}
On expiry of TLM-2 (notification interval) timer, the SLM-S shall check if any
notification is pending to send or not. The SLM-S should follow procedure
described in clause 6.2.7.2 to send notification if any pending notifications
are present.
##### 6.2.6.2.2 HTTP based procedure
Upon receiving an HTTP POST request containing:
a) an Accept header field set to \"application/vnd.3gpp.seal-location-
info+xml\";
b) a Content-Type header field set to \"application/vnd.3gpp.seal-location-
info+xml\";
c) an application/vnd.3gpp.seal-location-info+xml MIME body with a
\ element included in the \ root element;
the SLM-S:
a) shall determine the identity of the sender of the received HTTP POST
request as specified in clause 6.2.1.1; and
1) if the identity of the sender of the received HTTP POST request is not
authorized to subscribe location information of another VAL user or VAL UE,
shall respond with a HTTP 403 (Forbidden) response to the HTTP POST request
and shall skip rest of the steps;
2) shall support handling an HTTP POST request from a SLM-C according to
procedures specified in IETF RFC 4825 [9] \"POST Handling\";
3) may initiate location reporting configuration with the location management
client of the UE for immediate reporting as specified in clause 6.2.3.2; and
4) may subscribe for the location of the UE as specified in clause 4.4.2.2.2
of 3GPP TS 29.122 [17];
b) shall store the expiry time for the subscription to the \
value. If the expiry time value as present in \ element is not
acceptable to the SLM-S, the SLM-S may change the expiry time value to a lower
value;
c) shall store the time interval value to the \ element.
if the time interval value as present in \ element is
not acceptable to the SLM-S, the SLM-S may change the time interval value to a
lower value;
d) shall store the requested location QoS to the \ element;
e) shall store the supplementary location information indication of the
\ element;
f) shall generate and assign a unique integer as subscription identifier to
the subscription request received from VAL server;
g) shall store the users information contained in the \ elements
of \ element. If the VAL users whose location information is
requested as present in \ element is not fully acceptable to
the SLM-S, the SLM-S may change the VAL users to a subset and store the
identities of the new VAL users;
h) shall generate an HTTP 200 (OK) response according to IETF RFC 7231 [16].
In the HTTP 200 (OK) message, the SLM-S:
1) shall include an application/vnd.3gpp.seal-location-info+xml MIME body and
in the \ root element:
i) a \ element set to the unique subscription
identifier which is assigned to the subscription request;
ii) an \ element set to the accepted expiry time value; and
iii) if the VAL users whose location information is requested as present in
\ element is not fully acceptable to the SLM-S, the SLM-S may
change the VAL users to a subset and shall include an \ with
one or more \ child elements set to the identities of the new VAL
users;
i) shall send the HTTP 200 (OK) message towards the VAL server according to
IETF RFC 7231 [16];
j) shall start the timer TLM-1 (subscription expiry) and set the expiry time
of the timer to the expiry time for the subscription; and
k) shall start the timer TLM-2 (notification interval) timer and set the
internal time of the timer to the \ element value.
Upon receiving an HTTP POST request with an application/vnd.3gpp.seal-
location-info+xml MIME body containing \ element
along with \ element set to zero, the SLM-S:
a) shall delete all information related to subscription;
b) shall generate an HTTP 200 (OK) message according to IETF RFC 7231 [16]. In
the HTTP 200 (OK) message, the SLM-S shall include an
application/vnd.3gpp.seal-location-info+xml MIME body and in the \ root element;
1) shall include a \ element which shall include:
i) a \ element set to the unique subscription
identifier which is assigned to the subscription request;
d) shall send the HTTP 200 (OK) message towards the VAL server according to
IETF RFC 7231 [16];
e) shall stop TLM-1 (subscription expiry) timer if it is running; and
f) shall stop TLM-2 (notification interval) timer if it is running.
### 6.2.7 Event-triggered location information notification procedure
NOTE: The SLM-C will use the same identity which has been authenticated by VAL
service with SIP core using SIP based REGISTER message. If VAL service do not
support SIP protocol, then HTTP based method needs to be used.
#### 6.2.7.1 SLM client HTTP or SIP procedure
Upon receiving a SIP NOTIFY request containing an application/vnd.3gpp.seal-
location-info+xml MIME body with a \ element included in the
\ root element, or an HTTP POST request message containing:
a) a Content-Type header field set to \"application/vnd.3gpp.seal-location-
info+xml\"; and
b) an application/vnd.3gpp.seal-location-info+xml MIME body with a
\ element included in the \ root element;
the SLM-C:
a) shall store the received location information; and
b) may share the information to a group or to another VAL user or VAL UE.
#### 6.2.7.2 SLM server HTTP or SIP procedure
In order to nitify the subscriber about the location information report, the
SLM-S:
a) shall generate an application/vnd.3gpp.seal-location-info+xml MIME body
containing:
1) an \ element with a \ child element set to the
identity of the VAL user which subscribed to location of another VAL user or
VAL UE; and
2) a \ element which shall include:
i) an \ element with one or more \ child
elements set to the identities of the VAL users whose location information
needs to be notified;
ii) a \ element set to the value of each \ value of
the triggers that have been met; and
iii) a \ element containing one or more \ elements.
The \ shall include:
A) a \ element set to the identity of the VAL user whose location
information needs to be notified; and
B) the latest location information corresponding to the VAL user; and
b) if SLM-C supports SIP, shall send a SIP NOTIFY request according to 3GPP TS
24.229 [5] and IETF RFC 6665 [11] with the constructed
application/vnd.3gpp.seal-location-info+xml MIME body;
c) if SLM-C does not support SIP, shall send an HTTP POST request message to
the SLM-C according to procedures specified in IETF RFC 7231 [16] with the
constructed application/vnd.3gpp.seal-location-info+xml MIME body and an
Content-Type header field set to \"application/vnd.3gpp.seal-location-
info+xml\".
#### 6.2.7.3 SLM client CoAP procedure
Upon receiving a CoAP 2.05 (Content) response to a CoAP FETCH request message
used to observe a location resource as specified in Annex B.3.1.2.4.3.1, and
containing:
a) a Content-Type option set to \"application/vnd.3gpp.seal-location-
info+cbor\"; and
b) one or more \"LocationReport\" object,
the SLM-C:
a) shall store the received location information; and
b) may share the information to a group or to another VAL user or VAL UE.
#### 6.2.7.4 SLM server CoAP procedure
In order to notify the subscriber about the location information report, the
SLM-S shall send a CoAP 2.05 (Content) response to SLM-C in response to a CoAP
FETCH request message used to observe a location resource as specified in
Annex B.3.1.2.4.3.1. In the CoAP 2.05 (Content) response, the SLM-S:
a) shall include one or more \"LocationReport\" objects, each
\"LocationReport\" object containing:
1) \"valTgtUe\" attribute set to the identity of the VAL user whose location
information is notified;
2) \"triggerIds\" attribute set to the value of each \"triggerId\" value of
the triggers that have been met; and
3) \"locInfo\" attribute set to the location information.
### 6.2.8 On-demand usage of location information procedure
#### 6.2.8.1 VAL server procedure
If the VAL server needs to request UE location information, the VAL server
shall send an HTTP POST request to the SLM-S according to procedures specified
in IETF RFC 7231 [16]. In the HTTP POST request message, the VAL server:
a) shall include a Request-URI set to the URI corresponding to the identity of
the SLM-S;
b) shall include an Accept header field set to \"application/vnd.3gpp.seal-
location-info+xml\";
c) shall include a Content-Type header field set to
\"application/vnd.3gpp.seal-location-info+xml\";
d) shall include an application/vnd.3gpp.seal-location-info+xml MIME body and
in the\ root element:
1) shall include an \ element with a \ child element
set to the identity of the VAL server which requests the location information;
2) shall include an \ element with one or more \
child elements set to the identities of the VAL users whose location
information is requested; and
3) may include a \ element set to the requested location QoS as
specified in TS 29.572 [33] clause 6.1.6.2.13 if the VAL users whose location
information is requested.
4) may include the location reporting elements which are requested.
Upon receiving an HTTP 200 (OK) response from the SLM-S containing:
a) a Content-Type header field set to \"application/vnd.3gpp.seal-location-
info+xml\"; and
b) an application/vnd.3gpp.seal-location-info+xml MIME body with a \
element included in the \ root element;
the VAL server:
a) shall store the received location information; and
b) may share the information to a group or to another VAL user or VAL UE.
#### 6.2.8.2 Server procedure
Upon receiving an HTTP POST request containing:
a) an Accept header field set to \"application/vnd.3gpp.seal-location-
info+xml\";
b) a Content-Type header field set to \"application/vnd.3gpp.seal-location-
info+xml\"; and
c) an application/vnd.3gpp.seal-location-info+xml MIME body with the
\ root element which contains an \ element
and optionally, \ element;
the SLM-S:
a) shall determine the identity of the sender of the received HTTP POST
request as specified in clause 6.2.1.1; and
1) if the identity of the sender of the received HTTP POST request is not
authorized to obtain location information of another VAL user, shall respond
with a HTTP 403 (Forbidden) response to the HTTP POST request and shall skip
rest of the steps; and
b) shall support handling an HTTP POST request from the VAL server according
to procedures specified in IETF RFC 4825 [9] \"POST Handling\";
c) shall generate an HTTP 200 (OK) response according to IETF RFC 7231 [16].
In the HTTP 200 (OK) response message, the SLM-S:
1) shall include a Content-Type header field set to
\"application/vnd.3gpp.seal-location-info+xml\";
2) shall include an application/vnd.3gpp.seal-location-info+xml MIME body and
in the \ root element:
i) shall include an \ element with a \ child element
set to the identity of the VAL user for location reporting configuration;
ii) an \ element with one or more \ child
elements set to the identities of the VAL users whose location information is
requested;
iii) a \ element containing one or more \ elements.
The \ contains a \ element set to the identity
of the VAL user in the requested-identity-list and the latest location
information corresponding to the VAL user; and
d) shall send an HTTP 200 (OK) response towards the VAL server.
### 6.2.9 Query list of users based on location
#### 6.2.9.1 SLM client HTTP procedure
The procedure defined in this clause can be used by SEAL server to query list
of users based on given geolocation area.
In order to query the list of users based on given geolocation area, the
client shall send an HTTP POST request message according to procedures
specified in IETF RFC 7231 [16]. In the HTTP POST request message, the SLM-C:
a) shall set the Request-URI to the URI corresponding to the identity of the
SEAL server;
b) shall include a Content-Type header field set to
\"application/vnd.3gpp.seal-location-info+xml\"; and
c) shall include an application/vnd.3gpp.seal-location-info+xml MIME body and
in the \ root element:
1) shall include an \ element with a \ child element
set to the identity of the SEAL server querying list of users; and
2) shall include an \ element with a \
child element or an \ child element.
#### 6.2.9.2 SLM server HTTP procedure
Upon reception of an HTTP POST request containing:
a) a Content-Type header field set to \"application/vnd.3gpp.seal-location-
info+xml\"; and
b) an application/vnd.3gpp.seal-location-info+xml MIME body with a \ element included in the \ root element;
the SLM-S:
a) shall authorize the identity of the sender of the received HTTP POST
request; and
1) if the identity of the sender of the received HTTP POST request is not
authorized to obtain list of users based on given geolocation area, shall
respond with a HTTP 403 (Forbidden) response to the HTTP POST request and
shall skip rest of the steps;
b) shall generate the list of users who are currently available in requested
geographical area; and
c) shall send an HTTP 200 (OK) response message to SLM-C. In the HTTP 200 (OK)
response message, the SLM-S:
1) shall generate an application/vnd.3gpp.seal-location-info+xml MIME body
containing:
i) an \ element with a \ child element set to the
identity of the SEAL server querying list of users; and
ii) a \ element which shall include:
A) an \ element with one or more \ child
elements set to the identities of the VAL users to be queried;
#### 6.2.9.3 SLM client CoAP procedure
In order to query the list of users based on given geolocation area, the SLM-C
shall send an CoAP FETCH request message to SLM-S according to procedures
specified in IETF RFC 8132 [24]. In the CoAP FETCH request message, the SLM-C:
a) shall set the CoAP URI identifying the UE information to be fetched
according to the resource definition in Annex B.3.1.2.5.3.1;
1) the \"apiRoot\" is set to the SLM-S URI;
b) shall include an Accept option set to \"application/vnd.3gpp.seal-location-
area-info+cbor\";
c) shall include a Content-Format option set to \"application/vnd.3gpp.seal-
location-area-query+cbor;
d) shall include a \"LocationAreaQuery\" object including the geolocation
area; and
e) shall send the request protected with the relevant ACE profile (OSCORE
profile or DTLS profile) as described in 3GPP TS 24.547 [6].
#### 6.2.9.4 SLM server CoAP procedure
Upon reception of an CoAP FETCH request where the CoAP URI of the CoAP GET
request identifies a location area information resource as specified in Annex
B.3.1.2.5.3.1, and containing:
a) an Accept option set to \"application/vnd.3gpp.seal-location-area-
info+cbor\";
b) a Content-Format option set to \"application/vnd.3gpp.seal-location-area-
query+cbor\"; and
c) a \"LocationAreaQuery\" object,
the SLM-S:
a) shall authorize the identity of the sender of the received CoAP FETCH
request; and
1) if the identity of the sender of the received CoAP FETCH request is not
authorized to obtain list of users based on given geolocation area, shall
respond with a CoAP 4.03 (Forbidden) response to the CoAP FETCH request and
shall skip rest of the steps;
b) shall generate the list of users who are currently available in requested
geographical area; and
c) shall send an CoAP 2.05 (Content) response message to SLM-C. In the CoAP
2.05 (Content) response message, the SLM-S:
1) shall generate an \"application/vnd.3gpp.seal-location-area-info+cbor\"
MIME body with a \"UeInfos\" object containing a \"ueList\" object with one or
more \"UeInfo\" objects set to the identities of the VAL users and their
corresponding locations.
### 6.2.10 Location area monitoring information procedure
In order to subscribe for monitoring location area, the SLM-C sends
subscription requrest as specified in clause 5.2.6 and clause 6 of 3GPP TS
29.549 [18].
### 6.2.11 Location profiling for supporting location service enablement
#### 6.2.11.1 SLM client HTTP procedure
Upon receiving an HTTP POST request containing:
a) an Accept header field set to \"application/vnd.3gpp.seal-location-
info+xml\";
b) a Content-Type header field set to \"application/vnd.3gpp.seal-location-
info+xml\"; and
c) an application/vnd.3gpp.seal-location-info+xml MIME body with a \
element included in the \ root element;
the SLM-C:
a) may send a location report as specified in clause 6.2.2.2.2.
#### 6.2.11.2 SLM server HTTP procedure
If the SLM-S needs to request the SLM-C to report its location, the SLM-S
shall generate an HTTP POST request according to procedures specified in IETF
RFC 7231 [16]. The SLM-S:
a) shall include a Request-URI set to the URI corresponding to the identity of
the SLM-C;
b) shall include an Accept header field set to \"application/vnd.3gpp.seal-
location-info+xml\";
c) shall include a Content-Type header field set to
\"application/vnd.3gpp.seal-location-info+xml\";
d) shall include an application/vnd.3gpp.seal-location-info+xml MIME body and
in the \ root element:
1) shall include a \ element with a \ child
element set to the identity of the VAL user whose location is requested; and
2) shall include a \ element:
i) shall include a \ attribute;
ii) may include the location reporting elements which are requested;
iii) may include \ element; and
iv) may include \ element; and
e) shall send the HTTP POST request as specified in IETF RFC 7231 [16].
NOTE: Push notification service can be used to send HTTP POST request to the
client. Details about the push notification service is out of scope this
specification.
#### 6.2.11.3 SLM client CoAP procedure
Upon receiving an CoAP GET request where the CoAP URI of the CoAP GET request
identifies the location resource as specified in Annex B.4.1.2.2.3.1, and
containing:
a) an Accept option set to \"application/vnd.3gpp.seal-location-info+cbor\",
the SLM-C shall generate a CoAP 2.05 (Content) response according to IETF RFC
7252 [21]. In the CoAP 2.05 (Content) response message, the SLM-C:
a) shall include a Content-Format option set to \"application/vnd.3gpp.seal-
location-info+cbor\";
b) shall include one or more \"LocationReport\" objects, each
\"LocationReport\" object containing:
1) \"valTgtUe\" attribute set to the identity of the VAL user whose location
information is notified;
2) \"triggerIds\" attribute set to the value of each \"triggerId\" value of
the triggers that have been met; and
3) \"locInfo\" attribute set to the location information; and
c) shall send the CoAP 2.05 (Content) response towards the SLM-S.
#### 6.2.11.4 SLM server CoAP procedure
If the SLM-S needs to request the SLM-C to report its location profile and the
derivation of the requested location information report, the SLM-S shall
generate a CoAP GET request according to procedures specified in IETF RFC 7252
[21]. The SLM-S:
a) shall set the CoAP URI identifying the location to be retrieved according
to the resource definition in Annex B.4.1.2.2.3.1;
1) the \"apiRoot\" is set to the SLM-C URI;
b) shall include an Accept option set to \"application/vnd.3gpp.seal-location-
info+cbor\";
c) shall include a \"RequestedLocation\" object:
1) shall include a \"valTgtUes\" object set to the identity of the VAL users
or VAL UEs whose location information is requested;2) may include a
\"locationType\" attribute which is requested;
3) may include a \"requestedLocAccessType\" object set to the identifies of
the location access type for which the location information is requested; and
4) may include a \"requestedPosMethod\" object set to the identifies the
positioning method for which the location information is requested; and
d) shall send the request protected with the relevant ACE profile (OSCORE
profile or DTLS profile) as described in 3GPP TS 24.547 [6].
### 6.2.12 Location service registration procedure
#### 6.2.12.1 SLM client HTTP procedure
The SLM-C sends a location service registration request when it needs to
register the available location service to the SLM-S to report the UE's
location capabilities before the SLM-S requesting the location information. In
order to send the location service registration request, the SLM-C shall send
an HTTP POST request message according to procedures specified in IETF RFC
7231 [16]. In the HTTP POST request message, the SLM-C:
a) shall include a Request-URI set to the URI corresponding to the identity of
the SLM-S.
b) shall include an Authorization header field with the \"Bearer\"
authentication scheme set to an access token of the \"bearer\" token type as
specified in IETF RFC 6750 [13];
c) shall include an application/vnd.3gpp.seal-location-info+xml MIME body and
in the \ root element:
1) shall include a \ element with a \ child
element set to the identity of the VAL user or VAL group to which the location
reporting configuration is targeted or identity of the VAL UE;
2) may include a \ element specifying the information of
the location capabilities of VAL UE for which the location service is
registered. In the \ element, the SLM-C shall include at
least one of the followings:
i) a \ child element specifying the identity of the
available location access type of the VAL UE; and/or
ii) a \child element specifying the identity of the
available positioning methods of the VAL UE;
#### 6.2.12.2 SLM server HTTP procedure
Upon receiving an HTTP POST request containing:
a) an Accept header field set to \"application/vnd.3gpp.seal-location-
info+xml\";
b) a Content-Type header field set to \"application/vnd.3gpp.seal-location-
info+xml\";
c) an application/vnd.3gpp.seal-location-info+xml MIME body with a \ element included in the \ root element;
the SLM-S:
a) shall determine the identity of the sender of the received HTTP POST
request as specified in clause 6.2.1.1; and
1) if the identity of the sender of the received HTTP POST request is not
authorized to register any location services, shall respond with a HTTP 403
(Forbidden) response to the HTTP POST request and shall skip rest of the
steps;
2) shall support handling an HTTP POST request from a SLM-C according to
procedures specified in IETF RFC 4825 [9] \"POST Handling\";
3) may authorize the identity of the available location access type of the VAL
UE if received from SLM-C; and/or
4) may authorize the identity of the available positioning methods of the VAL
UE if received from SLM-C;
b) shall generate an HTTP 200 (OK) response according to IETF RFC 7231 [16]
and send the HTTP 200 (OK) response towards the SLM-C.
#### 6.2.12.3 SLM client CoAP procedure
In order to register the available location services to the SLM-S to report
the UE's location capabilities before the SLM-S requesting the location
information, the SLM-C shall send a CoAP POST request message to the SLM-S
according to procedures specified in IETF RFC 7252 [21]. In the CoAP POST
request, the SLM-C:
a) shall include a CoAP URI set to the URI corresponding to the identity of
the SLM-S as specified in clause B.3.1.2.6;
1) the \"apiRoot\" is set to the SLM-S URI;
2) the \"valServiceId\" is set to specific VAL service; and
b) shall include an Accept option set to \"application/vnd.3gpp.seal-location-
configuration+cbor\"; and
c) may include a \"location-capability\" object which shall include at least
one of the followings:
1) the \"location-access-type\" is set to the identity of the available
location access type of the VAL UE;
2) the \"positioning-method \" is set to the identity of the available
positioning methods of the VAL UE; and/or
c) shall send the request protected with the relevant ACE profile (OSCORE
profile or DTLS profile) as described in 3GPP TS 24.547 [6].
#### 6.2.12.4 SLM server CoAP procedre
Upon receiving of a CoAP POST request where the CoAP URI of the CoAP POST
request identifies a registration as specified in clause B.3.1.2.6, the SLM-S:
a) shall determine the identity of the sender of the received CoAP POST
request as specified in clause 6.2.1.2, and:
1) if the identity of the sender of the received CoAP POST request is not
authorized to register any location services, shall respond with a CoAP 4.03
(Forbidden) response to the CoAP POST request and skip rest of the steps;
b) may authorize the location-capability which shall include at least one of
the followings:
1) the identity of the available location access type of the VAL UE if
received from SLM-C; and/or
2) the identity of the available positioning methods of the VAL UE if received
from SLM-C;
c) shall generate a CoAP 2.05 (Content) response according to IETF RFC 7252
[21] and send the CoAP 2.05 (Content) response towards the SLM-C.
### 6.2.13 Location service registration update procedure
#### 6.2.13.1 SLM client HTTP procedure
The SLM-C sends a location service registration update request when it needs
to update its supported location service (e.g. location access type, position
methods) which has registered to the SLM-S before. In order to send the
location service registration update request, the SLM-C shall send an HTTP PUT
request message according to procedures specified in IETF RFC 7231 [16]. In
the HTTP PUT request message, the SLM-C:
a) shall include a Request-URI set to the URI corresponding to the identity of
the SLM-S.
b) shall include an Authorization header field with the \"Bearer\"
authentication scheme set to an access token of the \"bearer\" token type as
specified in IETF RFC 6750 [13]; and
c) shall include an application/vnd.3gpp.seal-location-info+xml MIME body and
in the \ root element:
1) shall include a \ element with a \ child
element set to the identity of the VAL user or VAL group to which the location
reporting configuration is targeted or identity of the VAL UE; and
2) may include a \ element specifying the information of
the location capabilities of VAL UE for which the location service is
registered. In the \ element, the SLM-C may include:
i) a \ child element specifying the identity of the
available location access type of the VAL UE; and/or
ii) a \child element specifying the identity of the
available positioning methods of the VAL UE.
#### 6.2.13.2 SLM server HTTP procedure
Upon receiving an HTTP PUT request containing:
a) an Accept header field set to \"application/vnd.3gpp.seal-location-
info+xml\";
b) a Content-Type header field set to \"application/vnd.3gpp.seal-location-
info+xml\"; and
c) an application/vnd.3gpp.seal-location-info+xml MIME body with a \ element included in the \ root element;
the SLM-S:
a) shall determine the identity of the sender of the received HTTP PUT request
as specified in clause 6.2.14.1; and
1) if the identity of the sender of the received HTTP PUT request is not
authorized to register any location services, shall respond with a HTTP 403
(Forbidden) response to the HTTP PUT request and shall skip rest of the steps;
2) shall support handling an HTTP PUT request from a SLM-C according to
procedures specified in IETF RFC 4825 [9] \"PUT Handling\";
3) may authorize the identity of the available location access type of the VAL
UE if received from SLM-C; and/or
4) may authorize the identity of the available positioning methods of the VAL
UE if received from SLM-C; and
b) shall generate an HTTP 204 (No Content) response according to IETF RFC 7231
[16] and send the HTTP 204 (No Content) response towards the SLM-C.
#### 6.2.13.3 SLM client CoAP procedure
In order to update the available location service of the SLM-C (e.g. location
access type, position methods) which has registered to the SLM-S before, the
SLM-C shall send a CoAP PUT request message to the SLM-S according to
procedures specified in IETF RFC 7252 [21]. In the CoAP PUT request, the
SLM-C:
a) shall include a CoAP URI set to the URI corresponding to the identity of
the SLM-S as specified in clause B.3.1.2.6 with:
1) the \"apiRoot\" set to the SLM-S URI; and
2) the \"valServiceId\" set to specific VAL service; and
b) shall include an Accept option set to \"application/vnd.3gpp.seal-location-
configuration+cbor\"; and
c) may include a \"location-capability\" object:
1) may include a \"location-access-type\" is set to the identity of the
available location access type of the VAL UE; and
2) may include a \"positioning-method \" is set to the identity of the
available positioning methods of the VAL UE; and/or
d) shall send the request protected with the relevant ACE profile (OSCORE
profile or DTLS profile) as described in 3GPP TS 24.547 [6].
#### 6.2.13.4 SLM server CoAP procedre
Upon receiving of a CoAP PUT request where the CoAP URI of the CoAP PUT
request identifies a registration update as specified in clause B.3.1.2.6, the
SLM-S:
a) shall determine the identity of the sender of the received CoAP PUT request
as specified in clause 6.2.1.2, and:
1) if the identity of the sender of the received CoAP PUT request is not
authorized to update any location services, shall respond with a CoAP 4.03
(Forbidden) response to the CoAP PUT request and skip rest of the steps;
b) may authorize the location-capability including:
1) the identities of the available location access type of the VAL UE if
received from SLM-C; and/or
2) the identities of the available positioning methods of the VAL UE if
received from SLM-C;
c) shall generate a CoAP 2.04 (Changed) response according to IETF RFC 7252
[21] and send the CoAP 2.04 (Changed) response towards the SLM-C.
### 6.2.14 Location service deregistration procedure
#### 6.2.14.1 SLM client HTTP procedure
The SLM-C sends a location service deregistration request when it needs to
deregister the available location services (e.g. location access type,
position methods) which have registered to the SLM-S before. In order to send
the location service deregistration request, the SLM-C shall send an HTTP POST
request message according to procedures specified in IETF RFC 7231 [16]. In
the HTTP POST request message, the SLM-C:
a) shall include a Request-URI set to the URI corresponding to the identity of
the SLM-S;
b) shall include an Authorization header field with the \"Bearer\"
authentication scheme set to an access token of the \"bearer\" token type as
specified in IETF RFC 6750 [13]; and
c) shall include an application/vnd.3gpp.seal-location-info+xml MIME body and
in the \ root element shall include a \ element
set to the identity of the VAL user or the VAL UE for location service
deregistration.
#### 6.2.14.2 SLM server HTTP procedure
Upon receiving an HTTP POST request containing:
a) an Accept header field set to \"application/vnd.3gpp.seal-location-
info+xml\";
b) a Content-Type header field set to \"application/vnd.3gpp.seal-location-
info+xml\";
the SLM-S:
a) shall determine the identity of the sender of the received HTTP POST
request as specified in clause 6.2.14.1; and
1) if the identity of the sender of the received HTTP POST request is not
authorized to deregister any location services, shall respond with a HTTP 403
(Forbidden) response to the HTTP POST request and shall skip rest of the
steps; and
2) shall support handling an HTTP POST request from a SLM-C according to
procedures specified in IETF RFC 4825 [9] \" POST Handling\"; and
b) shall generate an HTTP 204 (No Content) response according to IETF RFC 7231
[16] and send the HTTP 204 (No Content) response towards the SLM-C.
#### 6.2.14.3 SLM client CoAP procedure
In order to deregister the available location services of the SLM-C (e.g.
location access type, position methods) which have registered to the SLM-S
before, the SLM-C shall send a CoAP GET request message to the SLM-S according
to procedures specified in IETF RFC 7252 [21]. In the CoAP GET request, the
SLM-C:
a) shall include a CoAP URI set to the URI corresponding to the identity of
the SLM-S as specified in clause B.3.1.2.7;
1) the \"apiRoot\" is set to the SLM-S URI;
2) the \"valServiceId\" is set to specific VAL service; and
b) shall include an Accept option set to \"application/vnd.3gpp.seal-location-
configuration+cbor\"; and
c) shall include a \"valTgtUes\" object set to the identity of the VAL user or
the VAL UE for location service deregistration;
d) shall send the request protected with the relevant ACE profile (OSCORE
profile or DTLS profile) as described in 3GPP TS 24.547 [6].
#### 6.2.14.4 SLM server CoAP procedure
Upon receiving of a CoAP GET request where the CoAP URI of the CoAP GET
request identifies a deregistration as specified in clause B.3.1.2.7, the
SLM-S:
a) shall determine the identity of the sender of the received CoAP GET request
as specified in clause 6.2.1.2, and:
1) if the identity of the sender of the received CoAP GET request is not
authorized to deregister any services, shall respond with a CoAP 4.03
(Forbidden) response to the CoAP GET request and skip rest of the steps;
b) shall generate a CoAP 2.04 (Changed) response according to IETF RFC 7252
[21] and send the CoAP 2.04 (Changed) response towards the SLM-C.
### 6.2.15 Update location reporting configuration
#### 6.2.15.1 SLM client HTTP procedure
Upon receiving an HTTP PUT request containing:
a) a Content-Type header field set to \"application/vnd.3gpp.seal-location-
info+xml\"; and
b) an application/vnd.3gpp.seal-location-info+xml MIME body with a
\ element included in the \ root element, which
has none of child elements;
the SLM-C:
a) shall update the content of the \ elements; and
b) shall generate an HTTP 204 (No Content) response to the received HTTP PUT
request message according to IETF RFC 7231 [16] and shall send it towards
SLM-S.
#### 6.2.15.2 SLM server HTTP procedure
If the SLM-S needs to request the SLM-C to update the location reporting
configuration information, the SLM-S shall generate an HTTP PUT request
according to procedures specified in IETF RFC 7231 [16]. The SLM-S:
a) shall include a Request-URI set to the URI corresponding to the identity of
the SLM-C;
b) shall include a Content-Type header field set to
\"application/vnd.3gpp.seal-location-info+xml\";
c) shall include an application/vnd.3gpp.seal-location-info+xml MIME body and
in the \ root element:
1) shall include an \ element with a \ child element
set to the identity of the VAL user for location reporting event triggers
configuration cancellation; and
2) shall include a \ element; and
d) shall send the HTTP PUT request as specified in IETF RFC 7231 [16].
#### 6.2.15.3 SLM client CoAP procedure
Upon receiving an CoAP PUT request where the CoAP URI of the CoAP PUT request
identifies a location reporting configuration resource as specified in clause
B.4.1.2.2.3.2, the SLM-C:
a) shall update the content of the trigger configuration object; and
b) shall generate a CoAP 2.04 (Changed) response to the received CoAP PUT
request message according to IETF RFC 7252 [21] and shall send it towards
SLM-S.
#### 6.2.15.4 SLM server CoAP procedure
If the SLM-S needs to request the SLM-C to update the location reporting
configuration information, the SLM-S shall send a CoAP PUT request message to
the SLM-C. In the CoAP PUT request, the SLM-S:
a) shall set the CoAP URI identifying the trigger configuration to be updated
according to the resource definition in clause B.4.1.2.2.3.2;
1) the \"apiRoot\" is set to the SLM-C URI; and
2) the \"valServiceId\" is set to the specific VAL service identity; and
b) include a \"LocationReportConfiguration\" object;
1) shall include a \"valTgtUes\" object set to the identity of the observed
VAL users; and
2) shall include at least one of the following:
i) a \"locationType\" attribute which is requested;
ii) a \"requestedLocAccessType\" attribute which is requested;
iii) a \"requestedPosMethod\" attribute which is requested;
iv) a \"triggeringCriteria\" object which provides the triggers for the SLM-C
to request a location report as described in clause B.2.3.3; and
v) a \"minimum-interval-length\" attribute specifying the minimum time between
consecutive reports. The value is given in seconds; and
c) shall send the request protected with the relevant ACE profile (OSCORE
profile or DTLS profile) as described in 3GPP TS 24.547 [6].
## 6.3 Off-network procedures
### 6.3.1 General
#### 6.3.1.1 SEAL Off-network Location Management message transport
In order to send the request, response or acknowledgement, the SEAL location
management client:
1) shall send the message as a UDP message to the local IP address of the VAL
user, to UDP port 65400, with an IP time-to-live set to 255; and
2) shall treat UDP messages received on the port 65400 as received messages.
The SEAL Off-network Location Management message is the entire payload of the
UDP message.
#### 6.3.1.2 Basic Message Control
##### 6.3.1.2.1 General
The figure 6.3.1.2.1-1 gives an overview of the main states and transitions on
the UE for sending a SEAL Off-network Location Management message.
Figure 6.3.1.2.1-1: Basic state machine to send SEAL Off-network Location
Management message
##### 6.3.1.2.2 State: Start
This state exists for the SLM-C, when the SLM-C decides the SEAL Off-network
Location Management message.
##### 6.3.1.2.2.1 Send Message (With Ack/Response expected) {#send-message-
with-ackresponse-expected .H6}
When SLM-C sends a SEAL Off-network Location Management message for which
response or acknowledgement from the target UE is expected, the SLM-C:
a) shall set counter C101 to the value 1;
b) shall start the timer T101 (waiting for ack/resp);
c) shall send the message to the target UE; and
d) shall enter the state \"Waiting for Ack/Resp\".
##### 6.3.1.2.3 State: Waiting for Ack/Resp
This state exists for the SLM-C, when the SLM-C has already sent the SEAL Off-
network Location Management message, and waiting to receive which response or
acknowledgement.
##### 6.3.1.2.3.1 Timer T101 Expired {#timer-t101-expired .H6}
Upon expiry of the timer T101 where current value of the counter C101 is less
than N, the SLM-C:
a) shall increment the value of the counter C101 by 1;
b) shall restart the timer T101 (waiting for ack/resp);
c) shall send the message to the target UE; and
d) shall remain in the state \"Waiting for Ack/Resp\".
##### 6.3.1.2.3.2 Timer T101 Expired (N times) {#timer-t101-expired-n-times
.H6}
Upon expiry of the timer T101 where current value of the counter C101 is
greater than or equal to N, the SLM-C:
a) shall consider the message sending as failure;
b) shall stop the timer T101 (waiting for ack/resp);
c) shall inform the VAL user about the failure of the message; and
d) shall enter the state \"Stop\".
##### 6.3.1.2.3.2 Acknowledgement Received or Response Received
{#acknowledgement-received-or-response-received .H6}
Upon receiving response of the message or acknowledgement of the message, the
SLM-C:
a) shall stop the timer T101 (waiting for ack/resp);
b) shall enter the state \"Stop\"; and
c) shall inform the VAL user about the success of the message.
##### 6.3.1.2.4 State: Stop
This state exists for the SLM-C, when the procedure to send the SEAL Off-
network Location Management message is completed, and no further response or
acknowledgement is expected.
#### 6.3.1.3 Sending acknowledgement
The SLM-C:
a) shall generate the Off-network location management message according to
clause 8.1.2 by setting:
i) the Message type IE to \"LOCATION MANAGEMENT ACK\";
ii) the Originating VAL user ID IE to its own VAL user ID;
iii) the Terminating VAL user ID IE to the VAL user ID of the target VAL user;
iv) the Message I D IE to the value of the Message ID of the received message;
and
b) shall send the message as specified in clause 6.3.1.2.
### 6.3.2 Event-triggered location reporting procedure
#### 6.3.2.1 Location reporting trigger configuration
##### 6.3.2.1.1 Client originating procedure
Upon receiving a request from a VAL user to configure the location information
trigger to another VAL user, the SLM-C:
a) shall generate the Off-network location management message according to
clause 8.1.2. In the Off-network location management message:
i) shall set the Message type IE to \"LOCATION REPORTING TRIGGER CONFIGURATION
REQUEST\";
ii) shall set the Originating VAL user ID IE to its own VAL user ID;
iii) shall set the Terminating VAL user ID IE to the VAL user ID of the target
VAL user;
iv) shall generate an application/vnd.3gpp.seal-location-info+xml MIME body
and in the \ root element including a \ element
with at least one of the followings:
1) the location reporting elements which are requested;
2) a \ child element which indicate a specified location
trigger criteria to send the location report; or
3) a \child element specifying the minimum time
between consecutive reports. The value is given in seconds; and
v) shall set the Location Management Data IE to the application/vnd.3gpp.seal-
location-info+xml MIME body; and
vi) shall set the Message ID IE to the unique identity of this message; and
b) shall send the message as specified in clause 6.3.1.2.
Upon reception of Off-network location management message containing a Message
type IE set to \"LOCATION REPORTING TRIGGER CONFIGURATION RESPONSE\", the
SLM-C shall send the acknowledgement message as specified in clause 6.3.1.3.
##### 6.3.2.1.2 Client terminating procedure
Upon reception of Off-network location management message containing a Message
type IE set to \"LOCATION REPORTING TRIGGER CONFIGURATION REQUEST\", the
SLM-C:
a) shall store the content of the \ elements;
b) shall set the location reporting triggers accordingly;
c) shall start the minimum-report-interval timer;
d) shall generate the Off-network location management message according to
clause 8.1.2 by setting:
i) the Message type IE to \"LOCATION REPORTING TRIGGER CONFIGURATION
RESPONSE\";
ii) the Originating VAL user ID IE to its own VAL user ID; and
iii) the Terminating VAL user ID IE to the VAL user ID of the originating VAL
user;
iv) the Message ID IE to the unique identity of this message; and
v) the Reply-to message ID IE to the value of the Message ID of the received
message; and
e) shall send the message as specified in clause 6.3.1.2.
#### 6.3.2.2 Location reporting
##### 6.3.2.2.1 Client originating procedure
In order to report the location information, the SLM-C:
a) shall generate the Off-network location management message according to
clause 8.1.2. In the Off-network location management message:
i) shall set the Message type IE to \"LOCATION REPORT\";
ii) shall set the Originating VAL user ID IE to its own VAL user ID;
iii) shall set the Terminating VAL user ID IE to the VAL user ID of the target
VAL user;
iv) shall generate an application/vnd.3gpp.seal-location-info+xml MIME body
and in the \ root element:
1) shall include a \ element and, in the \ element:
A) shall include a \ child element set to the value of each
\ value of the triggers that have been met; and
B) shall include the location reporting elements corresponding to the triggers
that have been met; and
2) if the report was triggered by a location request, include the \
attribute set to the value of the \ attribute in the received
request; and
v) shall set the Location Management Data IE to the application/vnd.3gpp.seal-
location-info+xml MIME body; and
vi) shall set the Message ID IE to the unique identity of this message;
b) shall send the message as specified in clause 6.3.1.2;
c) shall set the minimum-report-interval timer to the minimum-report-interval
time and start this timer; and
d) shall reset all the trigger criteria for location reporting.
##### 6.3.2.2.2 Client terminating procedure
Upon reception of Off-network location management message containing a Message
type IE set to \"LOCATION REPORT\", the SLM-C:
a) shall acknowledged by the acknowledgement message as specified in clause
6.3.1.3.
b) shall store the received location information of the reporting SLM-C; and
c) shall use the location information as needed.
#### 6.3.2.3 Location reporting trigger cancel
##### 6.3.2.3.1 Client originating procedure
Upon receiving a request from a VAL user to cancel the location information
trigger to another VAL user, the SLM-C:
a) shall generate the Off-network location management message according to
clause 8.1.2. In the Off-network location management message:
i) shall set the Message type IE to \"LOCATION REPORTING TRIGGER CANCEL
REQUEST\";
ii) shall set the Originating VAL user ID IE to its own VAL user ID;
iii) shall set the Terminating VAL user ID IE to the VAL user ID of the target
VAL user;
iv) shall generate an application/vnd.3gpp.seal-location-info+xml MIME body
and in the \ root element including a \ element
which shall not include any child element;:
v) shall set the Location Management Data IE to the application/vnd.3gpp.seal-
location-info+xml MIME body; and
vi) shall set the Message ID IE to the unique identity of this message; and
b) shall send the message as specified in clause 6.3.1.2.
Upon reception of Off-network location management message containing a Message
type IE set to \"LOCATION REPORTING TRIGGER CANCEL RESPONSE\", the SLM-C shall
acknowledge the acknowledgement message as specified in clause 6.3.1.3.
##### 6.3.2.3.2 Client terminating procedure
Upon reception of Off-network location management message containing a Message
type IE set to \"LOCATION REPORTING TRIGGER CANCEL REQUEST\", the SLM-C:
a) shall delete the content of the \ elements;
b) shall stop the location reporting;
d) shall generate the Off-network location management message according to
clause 8.1.2 by setting:
i) the Message type IE to \"LOCATION REPORTING TRIGGER CANCEL RESPONSE\";
ii) the Originating VAL user ID IE to its own VAL user ID;
iii) the Terminating VAL user ID IE to the VAL user ID of the originating VAL
user;
iv) the Message ID IE to the unique identity of this message; and
v) the Reply-to message ID IE to the value of the Message ID of the received
message; and
e) shall send the message as specified in clause 6.3.1.2.
### 6.3.3 On-demand location reporting
#### 6.3.3.1 Client originating procedure
Upon receiving a request from a VAL user to request the location information
from another VAL user, the SLM-C:
a) shall generate the Off-network location management message according to
clause 8.1.2. In the Off-network location management message:
i) shall set the Message type IE to \"LOCATION REQUEST (ON-DEMAND)\";
ii) shall set the Originating VAL user ID IE to its own VAL user ID;
iii) shall set the Terminating VAL user ID IE to the VAL user ID of the target
VAL user;
iv) shall generate an application/vnd.3gpp.seal-location-info+xml MIME body
and in the \ root element shall include a \
element which shall include at least one of the followings:
1) an \ child element to indicate that an
immediate location report is required; and
2) the location reporting elements which are requested;
v) shall set the Location Management Data IE to the application/vnd.3gpp.seal-
location-info+xml MIME body;
vi) shall set the Message ID IE to the unique identity of this message; and
b) shall send the message as specified in clause 6.3.1.2.
Upon reception of Off-network location management message containing a Message
type IE set to \"ON-DEMAND LOCATION RESPONSE\", the SLM-C shall send the
acknowledgement message as specified in clause 6.3.1.3.
#### 6.3.3.2 Client terminating procedure
Upon reception of Off-network location management message containing a Message
type IE set to \"ON-DEMAND LOCATION REQUEST\", the SLM-C:
a) shall generate the Off-network location management message according to
clause 8.1.2. In the Off-network location management message:
i) shall set the Message type IE to \"LOCATION RESPONSE (ON-DEMAND)\";
ii) shall set the Originating VAL user ID IE to its own VAL user ID;
iii) shall set the Terminating VAL user ID IE to the VAL user ID of the
originating VAL user;
iv) shall generate an application/vnd.3gpp.seal-location-info+xml MIME body
and in the \ root element:
1) shall include a \ element and, if the report was triggered by a
location request, include the \ attribute set to the value of the
\ attribute in the received request. The \ element:
A) shall include a \ child element set to the value of each
\ value of the triggers that have been met; and
B) shall include the location reporting elements corresponding to the triggers
that have been met; and
v) shall set the Location Management Data IE to the application/vnd.3gpp.seal-
location-info+xml MIME body;
vi) shall set the Message ID IE to the unique identity of this message; and
vii) shall set the Reply-to message ID IE to the value of the Message ID of
the received message; and
b) shall send the message as specified in clause 6.3.1.2.
# 7 Coding
## 7.1 General
This clause specifies the coding to enable an SLM-C and an SLM-S to
communicate.
## 7.2 Application unique ID
The AUID shall be set to the VAL service ID as specified in specific VAL
service specification.
## 7.3 Structure
The location management document shall conform to the XML schema described in
clause 7.4.
The \ element shall be the root element of the
SEALLocationManagement document.
The \ element shall include at least one of the following:
a) an \ element;
b) a \ element;
c) a \ element;
d) a \ element;
e) a \ element;
f) a \ element;
g) a \ element;
h) a \ element;
i) a \ element;
j) a \ element; or
k) a \ element.
The \ element shall include one of the following:
a) a \ element may include a \ element; or
b) a \ element.
The \ element:
a) shall include an \ element which shall include:
1) one or more \ elements;
b) shall include a \ element;
c) shall include a \ element;
d) shall include an \ element; and
e) a \ element may include:
1) a \ element;
2) a \ element;
3) a \ element;
4) a \ element;
5) a \ element;or
6) a \ element.
f) may include a \ element.
The \ element shall include:
a) an \ element which shall include:
1) one or more \ elements;
b) a \ element; and
c) a \ element containing one or more \ elements.
The \ element shall include:
1) a \ element;
2) a \ element, which shall include at least one of the
following sub-elements:
i) a \ element;
ii) a \ element;
iii) an \ element;
iv) an \ element; or
v) a \ element;
The \ element shall contain a \ attribute. The \
shall include:
a) a \ element; and
b) a \ element which shall include at least one of the
following:
1) a \ element;
2) a \ element;
3) a \ element; or
4) a \ element.
The \ element includes:
a) a \ element including:
1) a \ element;
2) a \ element;
3) an \ element;
4) an \ element; or
5) a \ element;
b) a \ element shall include at least one of the
following sub-elements:
1) a \ element shall include one of the following sub-elements:
i) an \ element shall include a \ element;
ii) an \ element shall include a \ element;
and
iii) an \ element include a \ element;
2) a \ element shall include one of the following sub-
elements:
i) an \ element shall include a \
element;
ii) an \ element shall include a \
element; and
iii) an \ element shall include a \
element;
3) a \ element shall include one of the following sub-elements:
i) an \ element shall include a \ element;
ii) an \element shall include a \ element;
and
iii) an \ element shall include a \ element;
4) an \ element shall include one of the following sub-
elements:
i) an \ element shall include a \ element;
ii) an \ element shall include a \
element; and
iii) an \ element shall include a \
element;
5) an \ element shall include one of the following sub-
elements:
i) an \ element shall include a \ element;
ii) an \ element shall include a \
element; and
iii) an \ element shall include a \
element;
6) a \ element shall include a \ element;
7) a \ element shall include a \ element;
8) a \ element shall include one of the following
sub-elements:
i) an \ element shall include a \ element;
ii) a \ element shall include a \
element; and
iii) an \, an optional element specifying that any other
application signalling event than initial-log-on and location-configuration-
received triggers a request for a location report. This element contains a
mandatory \ attribute that shall be set to a unique string;
9) a \ element shall include one of the following
sub-elements:
i) an \ element shall include a \ element;
ii) an \ element shall include the following sub-element:
A) a \ element shall include the following two sub-
elements:
I) a \ element shall include a \ element; and
II) an \ element shall include a \ element;
iii) an \ element shall include a \
element;
c) a \ element;
d) optionally, a \ element; and
e) optionally, a \ element.
The \ element:
a) shall include a \ attribute;
b) may include a \ element including:
1) a \ element;
2) a \ element;
3) an \ element;
4) an \ element; or
5) a \ element;
> c) may include \ element; and
>
> d) may include \ element.
The \ element shall include one of the following sub-
elements:
a) a \ element may include a \ element; or
b) a \ element.
The \ element shall include at least one of the following sub-
elements:
a) an \ element;
b) a \ element which shall include at least one of the
following sub-elements:
1) a \ element;
2) a \ element;
3) an \ element; or
4) a \ element;
c) a \ element shall include at least one of the
following sub-elements:
1) a \ element shall include one of the following sub-elements:
i) an \ element shall include a \ element;
ii) a \ element shall include a \ element;
and
iii) an \ element include a \ element;
2) a \ element shall include one of the following sub-
elements:
i) an \ element shall include a \
element;
ii) an \ element shall include a \
element; and
iii) an \ element shall include a \
element;
3) a \ element shall include one of the following sub-elements:
i) an \ element shall include a \ element;
ii) an \element shall include a \ element;
and
iii) an \ element shall include a \ element;
4) an \ element shall include one of the following sub-
elements:
i) an \ element shall include a \ element;
ii) an \ element shall include a \
element; and
iii) an \ element shall include a \
element;
5) an \ element shall include one of the following sub-
elements:
i) an \ element shall include a \ element;
ii) an \ element shall include a \
element; and
iii) an \ element shall include a \
element;
6) a \ element shall include a \ element;
7) a \ element shall include a \ element;
8) a \ element shall include one of the following
sub-elements:
i) an \ element shall include a \ element;
ii) a \ element shall include a \
element; and
iii) an \, an optional element specifying that any other
application signalling event than initial-log-on and location-configuration-
received triggers a request for a location report. This element contains a
mandatory \ attribute that shall be set to a unique string;
9) a \ element shall include one of the following
sub-elements:
i) an \ element shall include a \ element;
ii) an \ element shall include the following sub-element:
A) a \ element shall include the following two sub-
elements:
I) a \ element shall include a \ element; and
II) an \ element shall include a \ element;
iii) an \ element shall include a \
element;
d) a \ element; and
e) an \ element.
The \ element shall include at least one of the
following:
a) a \ element; or
b) an \ element.
The \ element may include:
a) an \ element which shall include:
1) one or more \ elements;
The \ element may include:
a) a \ element; or
b) a \ element.
The \ element may include:
a) a \ element;
b) a \ element;
c) a \ element;
d) a \ element;
e) a \ element;or
f) a \ element.
## 7.4 XML schema
### 7.4.1 General
This clause defines the XML schema for location information.
### 7.4.2 XML schema
\
\
\
\
\
\Root element, contains all information related to location
configuration, registration,location request and location reporting for the
SEAL service\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\ \
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
## 7.5 Data semantics
The \ element is the root element of the XML document. The
\ element contains the \, \,
\, \, \ and \ sub-elements.
\ is a mandatory element used to include the identity of a VAL user,
a VAL client or a VAL group. The \ element contains one of following
sub-elements:
a) \, an element contains the identity of the VAL user. This
element contains an optional \ attribute that contains the
identity of the VAL client; or
b) \, an element contains the group identity of a set of VAL
users or VAL clients according to the VAL service.
\ contains the following sub-elements:
a) \, an element contains one or more \
elements. Each \ element contains the identity of the VAL user
whose location information is requested.
b) \, an element specifying the interval time the SLM-S
needs to wait before sending location reports. The value is given in seconds.
c) \, an element specifying the value to uniquely
identify the subscription.
d) \, an element specifying expiry time for subscription in
seconds.
e) \, an element specifying the location QoS as specified in TS
29.572 [33] clause 6.1.6.2.13 contains the following sub-elements:
1) a \ element;
2) a \ element;
3) a \ element;
4) a \ element;
5) a \ element;or
6) a \ element.
f) \, an element specifying that supplementary location
information is required.
\ contains the following sub-elements:
a) \, an element contains one or more \
elements. Each \ element contains the identity of the VAL user
whose location information needs to be notified.
b) \, an element which can occur multiple times that contains the
value of the \ attribute associated with a trigger that has fired;
and
c) \, an element contains one or more \ elements.
Each \ element contains the following sub-elements:
1) \, an element contains the identity of a VAL user in the
identities list;
2) \, an element contains at least one of the following sub-
elements:
i) \, an optional element containing the NR cell global
identity (NCGI) of the serving cell coded as specified in clause 19.6A in 3GPP
TS 23.003 [2];
ii) \, an optional element that can occur multiple times.
It contains the NCGI of any neighbouring cell the SLM-C can detect;
iii) \, an optional element containing the MBMS service
area id the SLM-C is using coded as specified in clause 15.3 in 3GPP TS 23.003
[2] for service area identifier (SAI);
iv) \ element, an optional element specifying that the MBSFN area
Id needs to be reported; and
v) \, an optional element containing the longitude,
latitude coded as specified in clause 6.1 in 3GPP TS 23.032 [3] and altitude
coded as specified in clause 6.3 in 3GPP TS 23.032 [3].
\ is a mandatory element used to include the location report. It
contains a \ attribute. The \ attribute is used to
return the value in the \ attribute in the \ element. The
\ element contains the following sub-elements:
a) \, a mandatory element which can occur multiple times that
contain the value of the \ attribute associated with a trigger
that has fired; and
b) \, a mandatory element that contains the location
information. The \ element contains the following sub-
elements:
1) \, an optional element containing the NR cell global
identity (NCGI) of the serving cell coded as specified in clause 19.6A in 3GPP
TS 23.003 [2];
2) \, an optional element that can occur multiple times. It
contains the NCGI of any neighbouring cell the SLM-C can detect;
3) \, an optional element containing the MBMS service
area id the SLM-C is using coded as specified in clause 15.3 in 3GPP TS 23.003
[2] for service area identifier (SAI); and
4) \, an optional element containing the longitude,
latitude coded as specified in clause 6.1 in 3GPP TS 23.032 [3] and altitude
coded as as specified in clause 6.3 in 3GPP TS 23.032 [3].
\ is an element with a \ attribute. The \
element is used to request a location report. The value of the \
attribute is returned in the corresponding \ attribute in order to
correlate the request and the report.
\ is a mandatory element used to include the identity of a
VAL user, a VAL client or a VAL group for which a location report is
requested. The \ element contains one of following sub-
elements:
a) \, an element contains the identity of the VAL user. This
element contains an optional \ attribute that contains the
identity of the VAL client; or
b) \, an element contains the group identity of a set of VAL
users or VAL clients according to the VAL service.
\ is an element with a \ attribute that
can have the value \"Full\" or \"Update\" . The value \"Full\" means that the
\ element contains the full location configuration which
replaces any previous location configuration. The value \"Update\" means that
the location configuration is an addition to any previous location
configuration. To remove configuration elements a \"Full\" configuration is
needed. The \ element contains the following sub-elements:
a) \, an optional element that specifies the location
information. The \ has the sub-elements:
1) \, an optional element containing the NR cell global identity
(NCGI) of the serving cell coded as specified in clause 19.6A in 3GPP TS
23.003 [2];
2) \, an optional element that can occur multiple times. It
contains the NCGI of any neighbouring cell the SLM-C can detect;
3) \, an optional element containing the MBMS service
area id that the SLM-C is using. The MBMS service area id is coded as
specified in clause 15.3 in 3GPP TS 23.003 [2] for service area identifier
(SAI);
4) \, an optional element specifying that the MBSFN area id
that needs to be reported;
5) \, an optional element containing the
longitude, latitude coded as specified in clause 6.1 in 3GPP TS 23.032 [3] and
altitude coded as specified in clause 6.3 in 3GPP TS 23.032 [3]; and
b) \, an optional element specifying the triggers for the
SLM-C to request a location report of a VAL user, a VAL client or a VAL group.
The \ element contains at least one of the following sub-
elements:
1) \, an optional element specifying what cell changes trigger
the request for a location report. This element consists of the following sub-
elements:
i) \, an optional element. The presence of this element
specifies that any cell change is a trigger. This element contains a mandatory
\ attribute that shall be set to a unique string;
ii) \, an optional element specifying an NCGI which when
entered triggers a request for alocation report coded as specified in clause
19.6A in 3GPP TS 23.003 [2]. This element contains a mandatory \
attribute that shall be set to a unique string; and
iii) \, an optional element specifying an NCGI which when
exited triggers a request for a location report coded as specified in clause
19.6A in 3GPP TS 23.003 [2]. This element contains a mandatory \
attribute that shall be set to a unique string;
2) \, an optional element specifying what tracking area
changes trigger a request for a location report. This element consists of the
following sub-elements:
i) \, an optional element. The presence of this
element specifies that any tracking area change is a trigger. This element
contains a mandatory \ attribute that shall be set to a unique
string;
ii) \, an optional element specifying a tracking
area identity coded as specified in clause 19.4.2.3 in 3GPP TS 23.003 [2]
which when entered triggers a request for a location report. This element
contains a mandatory \ attribute that shall be set to a unique
string; and
iii) \, an optional element specifying a tracking
area identity coded as specified in clause 19.4.2.3 in 3GPP TS 23.003 [2]
which when exited triggers a request for alocation report. This element
contains a mandatory \ attribute that shall be set to a unique
string;
3) \, an optional element specifying what PLMN changes trigger a
request for a location report. This element consists of the following sub-
elements:
i) \, an optional element. The presence of this element
specifies that any PLMN change is a trigger. This element contains a mandatory
\ attribute that shall be set to a unique string;
ii) \, an optional element specifying a PLMN id (MCC+MNC)
coded as specified in 3GPP TS 23.003 [2] which when entered triggers a request
for a location report. This element contains a mandatory \
attribute that shall be set to a unique string; and
iii) \, an optional element specifying a PLMN id (MCC+MNC)
coded as specified in 3GPP TS 23.003 [2] which when exited triggers a location
report. This element contains a mandatory \ attribute that shall
be set to a unique string;
4) \, an optional element specifying what MBMS changes trigger
location reporting. This element consists of the following sub-elements:
i) \, an optional element. The presence of this element
specifies that any MBMS SA change is a trigger for a request for a location
report. This element contains a mandatory \ attribute that shall
be set to a unique string;
ii) \, an optional element specifying an MBMS service
area id which when entered triggers a request for a location report. The MBMS
service area id is coded as specified in clause 15.3 in 3GPP TS 23.003 [2] for
service area identifier (SAI). This element contains a mandatory \
attribute that shall be set to a unique string; and
iii) \, an optional element specifying an MBMS service
area id which when exited triggers a request a location report. The MBMS
service area id is coded as specified in clause 15.3 in 3GPP TS 23.003 [2] for
service area identifier (SAI). This element contains a mandatory \
attribute that shall be set to a unique string;
5) \, an optional element specifying what MBSFN changes
trigger a request for a location report. This element consists of the
following sub-elements:
i) \, an optional element. The presence of this element
specifies that any MBSFN area change is a trigger for a request for a location
report. This element contains a mandatory \ attribute that shall
be set to a unique string;
ii) \, an optional element specifying an MBSFN area
which when entered triggers a request for a location report. This element
contains a mandatory \ attribute that shall be set to a unique
string; and
iii) \, an optional element specifying an MBSFN area
which when exited triggers a request for a location report. This element
contains a mandatory \ attribute that shall be set to a unique
string;
6) \, an optional element specifying that periodic request
for a location report shall be sent. The value in seconds specifies the
reporting interval. This element contains a mandatory \ attribute
that shall be set to a unique string;
7) \, an optional element specifying that the travelled
distance shall trigger a request for a location report. The value in metres
specified the travelled distance. This element contains a mandatory \ attribute that shall be set to a unique string;
8) \, an optional element specifying what
application signalling events triggers a request for a location report. The
\ element has the following sub-elements:
i) \, an optional element specifying that an initial log on
triggers a request for a location report. This element contains a mandatory
\ attribute that shall be set to a unique string;
ii) \, an optional element specifying that a
received location configuration triggers a request for a location report. This
element contains a mandatory \ attribute that shall be set to a
unique string; and
iii) \, an optional element specifying that any other
application signalling event than initial-log-on and location-configuration-
received triggers a request for a location report. This element contains a
mandatory \ attribute that shall be set to a unique string;
9) \, an optional element specifying what
geographical are changes trigger a request for a location reporting. This
element consists of the following sub-elements:
i) \, an optional element. The presence of this element
specifies that any geographical area change is a trigger. This element
contains a mandatory \ attribute that shall be set to a unique
string;
ii) \, an optional element specifying a geographical area
which when entered triggers a location report. This element contains a
mandatory \ attribute that shall be set to a unique string. The
\ element has the following sub-elements:
A) \, an optional element containing a \
attribute and the following two subelements:
I) \, an optional element specifying the area as a polygon
specified in clause 5.2 in 3GPP TS 23.032 [2]; and
II) \, an optional element specifying the area as an
ellipsoid arc specified in clause 5.7 in 3GPP TS 23.032 [2]; and
iii) \, an optional element specifying a geographical
area which when exited triggers a request for a location report. This element
contains a mandatory \ attribute that shall be set to a unique
string.
c) \, a mandatory element specifying the minimum time
the SLM-C needs to wait between sending location reports. The value is given
in seconds;
d) \, an optional element specifying the identities
of the location access type for which the location information is requested;
and
e) \, an optional element specifying the identities of
the positioning method for which the location information is requested.
\ is a mandatory element used to include the requested
location report. The \ element contains at least one of the
following sub-elements:
a) \, presence of the element indicates that an
immediate location report is required;
b) \, an optional element that contains the location
information. The \ element contains the following sub-
elements:
1) \, an optional element containing the NR cell global
identity (NCGI) of the serving cell coded as specified in clause 19.6A in 3GPP
TS 23.003 [2];
2) \, an optional element that can occur multiple times. It
contains the NCGI of any neighbouring cell the SLM-C can detect;
3) \, an optional element containing the MBMS service
area id that the SLM-C is using. The MBMS service area id is coded as
specified in clause 15.3 in 3GPP TS 23.003 [2] for service area identifier
(SAI); and
4) \, an optional element containing the longitude,
latitude coded as specified in clause 6.1 in 3GPP TS 23.032 [3] and altitude
coded as as specified in clause 6.3 in 3GPP TS 23.032 [3].
c) \, a mandatory element specifying the triggers for the
SLM-C to request a location report of a VAL user, a VAL client or a VAL group.
The \ element contains at least one of the following sub-
elements:
1) \, an optional element specifying what cell changes trigger
the request for a location report. This element consists of the following sub-
elements:
i) \, an optional element. The presence of this element
specifies that any cell change is a trigger. This element contains a mandatory
\ attribute that shall be set to a unique string;
ii) \, an optional element specifying an NCGI which when
entered triggers a request for alocation report coded as specified in clause
19.6A in 3GPP TS 23.003 [2]. This element contains a mandatory \
attribute that shall be set to a unique string; and
iii) \, an optional element specifying an NCGI which when
exited triggers a request for a location report coded as specified in clause
19.6A in 3GPP TS 23.003 [2]. This element contains a mandatory \
attribute that shall be set to a unique string;
2) \, an optional element specifying what tracking area
changes trigger a request for a location report. This element consists of the
following sub-elements:
i) \, an optional element. The presence of this
element specifies that any tracking area change is a trigger. This element
contains a mandatory \ attribute that shall be set to a unique
string;
ii) \, an optional element specifying a tracking
area identity coded as specified in clause 19.4.2.3 in 3GPP TS 23.003 [2]
which when entered triggers a request for a location report. This element
contains a mandatory \ attribute that shall be set to a unique
string; and
iii) \, an optional element specifying a tracking
area identity coded as specified in clause 19.4.2.3 in 3GPP TS 23.003 [2]
which when exited triggers a request for alocation report. This element
contains a mandatory \ attribute that shall be set to a unique
string;
3) \, an optional element specifying what PLMN changes trigger a
request for a location report. This element consists of the following sub-
elements:
i) \, an optional element. The presence of this element
specifies that any PLMN change is a trigger. This element contains a mandatory
\ attribute that shall be set to a unique string;
ii) \, an optional element specifying a PLMN id (MCC+MNC)
coded as specified in 3GPP TS 23.003 [2] which when entered triggers a request
for a location report. This element contains a mandatory \
attribute that shall be set to a unique string; and
iii) \, an optional element specifying a PLMN id (MCC+MNC)
coded as specified in 3GPP TS 23.003 [2] which when exited triggers a location
report. This element contains a mandatory \ attribute that shall
be set to a unique string;
4) \, an optional element specifying what MBMS changes trigger
location reporting. This element consists of the following sub-elements:
i) \, an optional element. The presence of this element
specifies that any MBMS SA change is a trigger for a request for a location
report. This element contains a mandatory \ attribute that shall
be set to a unique string;
ii) \, an optional element specifying an MBMS service
area id which when entered triggers a request for a location report. The MBMS
service area id is coded as specified in clause 15.3 in 3GPP TS 23.003 [2] for
service area identifier (SAI). This element contains a mandatory \
attribute that shall be set to a unique string; and
iii) \, an optional element specifying an MBMS service
area id which when exited triggers a request a location report. The MBMS
service area id is coded as specified in clause 15.3 in 3GPP TS 23.003 [2] for
service area identifier (SAI). This element contains a mandatory \
attribute that shall be set to a unique string;
5) \, an optional element specifying what MBSFN changes
trigger a request for a location report. This element consists of the
following sub-elements:
i) \, an optional element. The presence of this element
specifies that any MBSFN area change is a trigger for a request for a location
report. This element contains a mandatory \ attribute that shall
be set to a unique string;
ii) \, an optional element specifying an MBSFN area
which when entered triggers a request for a location report. This element
contains a mandatory \ attribute that shall be set to a unique
string; and
iii) \, an optional element specifying an MBSFN area
which when exited triggers a request for a location report. This element
contains a mandatory \ attribute that shall be set to a unique
string;
6) \, an optional element specifying that periodic request
for a location report shall be sent. The value in seconds specifies the
reporting interval. This element contains a mandatory \ attribute
that shall be set to a unique string;
7) \, an optional element specifying that the travelled
distance shall trigger a request for a location report. The value in metres
specified the travelled distance. This element contains a mandatory \ attribute that shall be set to a unique string;
8) \, an optional element specifying what
application signalling events triggers a request for a location report. The
\ element has the following sub-elements:
i) \, an optional element specifying that an initial log on
triggers a request for a location report. This element contains a mandatory
\ attribute that shall be set to a unique string;
ii) \, an optional element specifying that a
received location configuration triggers a request for a location report. This
element contains a mandatory \ attribute that shall be set to a
unique string; and
iii) \, an optional element specifying that any other
application signalling event than initial-log-on and location-configuration-
received triggers a request for a location report. This element contains a
mandatory \ attribute that shall be set to a unique string;
9) \, an optional element specifying what
geographical are changes trigger a request for a location reporting. This
element consists of the following sub-elements:
i) \, an optional element. The presence of this element
specifies that any geographical area change is a trigger. This element
contains a mandatory \ attribute that shall be set to a unique
string;
ii) \, an optional element specifying a geographical area
which when entered triggers a location report. This element contains a
mandatory \ attribute that shall be set to a unique string. The
\ element has the following sub-elements:
A) \, an optional element containing a \
attribute and the following two subelements:
I) \, an optional element specifying the area as a polygon
specified in clause 5.2 in 3GPP TS 23.032 [3]; and
II) \, an optional element specifying the area as an
ellipsoid arc specified in clause 5.7 in 3GPP TS 23.032 [3]; and
iii) \, an optional element specifying a geographical
area which when exited triggers a request for a location report. This element
contains a mandatory \ attribute that shall be set to a unique
string;
d) \, an optional element that defaults to 0 if
absent otherwise indicates the interval time between consecutive reports. The
value is given in seconds.
e) \, an optional element specifying information of the
endpoint of the requesting VAL server to which the location report
notification has to be sent. It is provided if Immediate Report Indicator is
set to required.
\ contains at least one of the following sub-elements:
a) \, an optional element specifying the area as a polygon
specified in clause 5.2 in 3GPP TS 23.032 [3]; and
b) \, an optional element specifying the area as an
Ellipsoid Arc specified in clause 5.7 in 3GPP TS 23.032 [3].
\ contains the following sub-elements:
a) \, an optional element contains one or more \
elements. Each \ element contains the identity of the VAL user to
be queried.
\ contains the following sub-elements:
a) \, an optional element specifying the identity of the
available access type of the VAL UE; and
b) \, an optional element specifying the identity of the
available positioning methods of the VAL UE.
\ element is a optionally element used to indicate the location
Quality of Service as specified in TS 29.572 [33] clause 6.1.6.2.13 for which
the location information is requested and it may contains the following sub-
elements:
a) a \ element;
b) a \ element;
c) a \ element;
d) a \ element;
e) a \ element;or
f) a \ element.
The recipient of the XML ignores any unknown element and any unknown
attribute.
## 7.6 MIME type
The MIME type for the LocationInfo document shall be
\"application/vnd.3gpp.seal-location-info+xml\".
## 7.7 IANA registration template
Your Name:
\
Your Email Address:
\
Media Type Name:
Application
Subtype name:
vnd.3gpp.seal-location-info+xml
Required parameters:
None
Optional parameters:
\"charset\" the parameter has identical semantics to the charset parameter of
the \"application/xml\" media type as specified in section 9.1 of IETF RFC
7303.
Encoding considerations:
binary.
Security considerations:
Same as general security considerations for application/xml media type as
specified in section 9.1 of IETF RFC 7303. In addition, this media type
provides a format for exchanging information in SIP, so the security
considerations from IETF RFC 3261 apply.
The information transported in this media type does not include active or
executable content.
Mechanisms for privacy and integrity protection of protocol parameters exist.
Those mechanisms as well as authentication and further security mechanisms are
described in 3GPP TS 24.229.
This media type does not include provisions for directives that institute
actions on a recipient\'s files or other resources.
This media type does not include provisions for directives that institute
actions that, while not directly harmful to the recipient, may result in
disclosure of information that either facilitates a subsequent attack or else
violates a recipient\'s privacy in any way.
This media type does not employ compression.
Interoperability considerations:
Same as general interoperability considerations for application/xml media type
as specified in section 9.1 of IETF RFC 7303. Any unknown XML elements and any
unknown XML attributes are to be ignored by recipient of the MIME body.
Published specification:
3GPP TS 24.545 \"Location Management - Service Enabler Architecture Layer for
Verticals (SEAL)\" version 16.0.0, available via
http://www.3gpp.org/specs/numbering.htm.
Applications which use this media type:
Applications supporting the SEAL location management as described in the
published specification.
Fragment identifier considerations:
The handling in section 5 of IETF RFC 7303 applies.
Restrictions on usage:
None
Provisional registration? (standards tree only):
N/A
Additional information:
1\. Deprecated alias names for this type: none
2\. Magic number(s): none
3\. File extension(s): none
4\. Macintosh File Type Code(s): none
5\. Object Identifier(s) or OID(s): none
Intended usage:
Common
Person to contact for further information:
\- Name: \
\- Email: \
\- Author/Change controller:
i) Author: 3GPP CT1 Working Group/3GPP_TSG_CT_WG1\@LIST.ETSI.ORG
ii) Change controller: \/\
# 8 SEAL Off-network Location Management protocol message formats
## 8.1 Functional definitions and contents
### 8.1.1 General
The following clauses describe the SEAL Off-network Location Management
message functional definition and contents. The standard format of a MONP
message and the encoding rules for each type of information element as
documented in Annex I of 3GPP TS 24.379 [15] is used to describe Off-network
location management message and information elements.
### 8.1.2 Off-network location management message
#### 8.1.2.1 Message definition
This message is used between SEAL location management clients (of UE-1 and
UE-2) to send request, response or acknowledgement. The Message Type IE
identifies the request, response, or acknowledgement. For contents of the
message see Table 8.1.2.1-1.
Message type: Off-network location management message
Direction: UE to other UE
Table 8.1.2.1-1: Off-network location reporting trigger configuration message
content
+-----+--------------------------+---------------------+----------+--------+--------+ | IEI | Information Element | Type/Reference | Presence | Format | Length | +=====+==========================+=====================+==========+========+========+ | | Message Type | Message Type | M | V | 1 | | | | | | | | | | | 8.2.2 | | | | +-----+--------------------------+---------------------+----------+--------+--------+ | | Originating VAL user ID | VAL user ID\ | M | LV-E | 3-x | | | | 8.2.3 | | | | +-----+--------------------------+---------------------+----------+--------+--------+ | | Terminating VAL user ID | VAL User ID\ | M | LV-E | 3-x | | | | 8.2.3 | | | | +-----+--------------------------+---------------------+----------+--------+--------+ | | Message ID | Message ID\ | M | V | 16 | | | | 8.2.6 | | | | +-----+--------------------------+---------------------+----------+--------+--------+ | 30 | Reply-to message ID | Reply-to message ID | O | TV | 17 | | | | | | | | | | | 8.2.7 | | | | +-----+--------------------------+---------------------+----------+--------+--------+ | 78 | Location Management Data | Message Data | O | TLV-E | 4-x | | | | | | | | | | | 8.2.4 | | | | +-----+--------------------------+---------------------+----------+--------+--------+ | 20 | Cause | Cause | O | TLV | 3-x | | | | | | | | | | | 8.2.5 | | | | +-----+--------------------------+---------------------+----------+--------+--------+
## 8.2 General message format and information elements coding
### 8.2.1 General
### 8.2.2 Message type
The purpose of the Message type information element is to identify the type of
the message.
The value part of the Message type information element is coded as shown in
Table 8.2.2-1.
The Message type information element is a type 3 information element with a
length of 1 octet.
Table 8.2.2-1: Message types
Bits
* * *
8 7 6 5 4 3 2 1
0 0 0 0 0 0 0 1 LOCATION REPORTING TRIGGER CONFIGURATION REQUEST 0 0 0 0 0 0 1
0 LOCATION REPORTING TRIGGER CONFIGURATION RESPONSE 0 0 0 0 0 0 1 1 LOCATION
MANAGEMENT ACK 0 0 0 0 0 1 0 0 LOCATION REPORT 0 0 0 0 0 1 0 1 LOCATION
REPORTING TRIGGER CANCEL REQUEST 0 0 0 0 0 1 1 0 LOCATION REPORTING TRIGGER
CANCEL RESPONSE 0 0 0 0 0 1 1 1 LOCATION REQUEST (ON-DEMAND) 0 0 0 0 1 0 0 0
LOCATION RESPONSE (ON-DEMAND)
All other values are reserved.
### 8.2.3 VAL user ID
The VAL user ID information element is used to indicate a VAL user ID.
The VAL user ID information element is coded as shown in Figure 8.2.3-1 and
Table 8.2.3-1.
The VAL user ID information element is a type 6 information element.
8 7 6 5 4 3 2 1
* * *
Length of VAL user ID contents octet 1  
octet 2  
octet 3  
VAL user ID contents  
octet n
Figure 8.2.3-1: VAL user ID information element
Table 8.2.3-1: VAL user ID information element
VAL user ID is contained in octet 3 to octet n; Max value of 65535 octets.
* * *
### 8.2.4 Message Data
The Message data information element is used to send message specific data
based on Message Type IE;
The Message data information element is coded as shown in Figure 8.2.4-1 and
Table 8.2.4-1.
The Message data information element is a type 6 information element.
8 7 6 5 4 3 2 1
* * *
Message data IEI octet 1  
Length of Message data contents octet 2  
octet 3  
octet 4  
Message data contents  
octet n
Figure 8.2.4-1: Message data information element
Table 8.2.4-1: Message data information element
Message data is contained in octet 4 to octet n; Max value of 65535 octets.
* * *
The Message data information element contains the seal-location-info+xml
defined in clause 7.4.
### 8.2.5 Cause
The Cause information element is used to provide short cause of the failure;
The Cause information element is coded as shown in Figure 8.2.5-1 and Table
8.2.5-1.
The Cause information element is a type 4 information element.
8 7 6 5 4 3 2 1
* * *
Cause IEI octet 1  
Length of Cause contents octet 2  
octet 3  
Cause  
octet 127
Figure 8.2.5-1: Cause information element
Table 8.2.5-1: Cause information element
Cause is contained in octet 3 to octet n; Max value of 127 octets.
* * *
### 8.2.6 Message ID
The Message ID information element uniquely identifies a message.
The Message ID information element is coded as shown in Figure 8.2.6-1 and
Table 8.2.6-1.
The Message ID information element is a type 3 information element with a
length of 16 octets.
+------------------+----------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +==================+==========+===+===+===+===+===+===+===+ | Message ID value | octet 1 | | | | | | | | | | | | | | | | | | | | octet 16 | | | | | | | | +------------------+----------+---+---+---+---+---+---+---+
Figure 8.2.6-1: Message ID value
Table 8.2.6-1: Message ID value
+----------------------------------------------------------------------+ | Message ID value (octet 1 to 16) | | | | The Message ID contains a number uniquely identifying a message. The | | value is a universally unique identifier as specified in | | IETF RFC 4122 [31]. | +----------------------------------------------------------------------+
### 8.2.7 Reply-to message ID
The Reply-to message ID information element is used to associate a message
within a conversation that is a reply to an existing message in a
conversation.
The Reply-to message ID information element is coded as shown in Figure
8.2.7-1 and Table 8.2.7-1.
The Reply-to message ID information element is a type 3 information element
with a length of 17 octets.
+---------------------------+----------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +===========================+==========+===+===+===+===+===+===+===+ | Reply-to message ID IEI | octet 1 | | | | | | | | +---------------------------+----------+---+---+---+---+---+---+---+ | Reply-to message ID value | octet 2 | | | | | | | | | | | | | | | | | | | | octet 17 | | | | | | | | +---------------------------+----------+---+---+---+---+---+---+---+
Figure 8.2.7-1: Reply-to message ID value
Table 8.2.7-1: Reply-to message ID value
+----------------------------------------------------------------------+ | Reply-to message ID value (octet 2 to 17) | | | | The Reply-to message ID contains a number uniquely identifying a | | message. The value is a universally unique identifier as specified | | in IETF RFC 4122 [31]. | +----------------------------------------------------------------------+
###### ## Annex A (normative): Timers
# A.1 General
This clause provides a brief description of the timers used in this
specification.
# A.2 On network timers
The table A.2-1 provides a description of the timers used in this
specification, specifies the timer values, describes the reason for starting
of the timer, normal stop and the action on expiry.
Table A.2-1: On network timers
Timer Timer value Cause of start Normal stop On expiry
* * *
TLM-1 (subscription expiry) The timer value is negotiated between SLM-C and
SLM-S while creating or modifying subscription. The SLM-S starts the timer
upon sending response to create subscription request message towards SLM-C; On
sending response to delete subscription request message towards SLM-C;
Consider that the subscription associated with the timer is terminated and
shall delete all data related to the subscription. TLM-2 (notification
interval) The timer value is set by user in create subscription request
message in \element. The SLM-S starts timer each time
after sending location information notification. On sending response to delete
subscription request message towards SLM-C; If any location information data
is pending to be notified then the SLM-S sends the notification.
# A.3 Off-network timers
The table A.3-1 provides a description of the off-network timers used in this
specification, specifies the timer values, describes the reason for starting
of the timer, normal stop and the action on expiry.
Table A.3-1: Off-network timers
+-------------+-------------+-------------+-------------+-------------+ | Timer | Timer value | Cause of | Normal stop | On expiry | | | | start | | | +=============+=============+=============+=============+=============+ | T101 | Default | The SLM-C | Reception | Send again | | (waiting | value: 150 | sends a | of an | the SEAL | | for | m | SEAL | expected | off-network | | ack/resp) | illiseconds | off-network | response or | location | | | | location | ackn | management | | | Maximum | management | owledgement | message. | | | value: 10 | message for | to a SEAL | | | | seconds | which | off-network | | | | | response or | location | | | | | ackn | management | | | | | owledgement | message. | | | | | from the | | | | | | target UE | | | | | | is | | | | | | expected. | | | +-------------+-------------+-------------+-------------+-------------+
###### ## Annex B (normative): CoAP resource representation and encoding
# B.1 General
The information in this annex provides a normative description of CoAP
resource representation and encoding.
The general rules for resource URI structure, cache usage, error handling, and
common data types are described in Annex C.1 of 3GPP TS 24.546 [29].
# B.2 Data types applicable to multiple resource representations
This clause defines structured data types, simple data types, and enumerations
that are applicable to several APIs defined for CoAP resource representations
in the present specification.
## B.2.1 Referenced structured data types
Table B.2.1-1 lists structured data types referenced by multiple CoAP resource
representations and defined in other specifications.
Table B.2.1-1: Referenced Structured Data Types
Data type Reference Description
* * *
ValTargetUe 3GPP TS 24.546 [29] Information identifying a VAL user ID or VAL
UE ID. GeographicalCoordinates 3GPP TS 24.546 [29] Defines geographical
coordinates. GeographicArea 3GPP TS 24.546 [29] Defines a geographical area.
## B.2.2 Referenced simple data types
Table B.2.2-1 lists simple datatypes referenced by multiple CoAP resource
representations and defined in other specifications.
Table B.2.2-1: Referenced Simple Data Types
* * *
Type name Reference Description Uinteger 3GPP TS 24.546 [29] Unsigned integer,
i.e. only value 0 and values above 0 are permissible. CellId 3GPP TS 24.546
[29] String representing a unique identifier of a cell. TaId 3GPP TS 24.546
[29] String representing a unique identifier of a tracking area. PlmnId 3GPP
TS 24.546 [29] String representing a unique identifier of a PLMN. MbmsSaId
3GPP TS 24.546 [29] String representing a unique identifier of a MBMS serving
area. MbsfnAreaId 3GPP TS 24.546 [29] String representing a unique identifier
of a MSFN area.
* * *
## B.2.3 Common structured data types
### B.2.3.1 Type: BaseTrigger
Table B.2.3.1-1: Definition of type CellChange
Attribute name Data type P Cardinality Description Applicability
* * *
triggerId TriggerId M 1 The unique identity of the trigger criterion.
### B.2.3.2 Type: LocationReportConfiguration
Table B.2.3.2-1: Definition of type LocationReportConfiguration
Attribute name Data type P Cardinality Description Applicability
* * *
valTgtUes array(ValTargetUe) M 1..N VAL users to whom the configuration
information is applied  
locationType Accuracy M 1 The type of location information is requested.  
triggeringCriteria TriggeringCriteriaType O 0..1 The triggering criteria
associated with this configuration.  
minimumIntervalLength Uinteger O 0..1 The minimum time between consecutive
reports.  
requestedLocAccessType LocationAccessType O 0..1 The identities of the
location access type for which the location information is requested  
requestedPosMethod PositioningMethod O 0..1 The identities of the positioning
method for which the location information is requested
### B.2.3.3 Type: TriggeringCriteriaType
Table B.2.3.3-1: Definition of type TriggeringCriteriaType
Attribute name Data type P Cardinality Description Applicability
* * *
cellChange CellChange O 0..1 The triggers for cell change.  
trackingAreaChange TrackingAreaChange O 0..1 The triggers for tracking area
change.  
plmnChange PlmnChange O 0..1 The triggers for PLMN change.  
mbmsSaChange MbmsSaChange O 0..1 The triggers for MBMS serving area change.  
mbsfnAreaChange MbsfnAreaChange O 0..1 The triggers for MBSFN area change.  
periodicReport PeriodicReport O 0..1 The triggers for periodic reporting.  
travelledDistance TravelledDistance O 0..1 The triggers for the distance that
is travelled.  
verticalAppEvent VerticalAppEvent O 0..1 The triggers for events generated by
vertical application.  
geographicalAreaChange GeographicalAreaChange O 0..1 The triggers for
geographical area change.
### B.2.3.4 Type: CellChange
Table B.2.3.4-1: Definition of type CellChange
Attribute name Data type P Cardinality Description Applicability
* * *
anyCellChange BaseTrigger O 0..1 The trigger of any cell change.  
enterSpecificCells SpecificCells O 0..1 The trigger of entering one or more
cells.  
exitSpecificCells SpecificCells O 0..1 The trigger of existing one or more
cells.
### B.2.3.5 Type: SpecificCells
Table B.2.3.5-1: Definition of type SpecificCells
Attribute name Data type P Cardinality Description Applicability
* * *
triggerId TriggerId M 1 The unique identity of the trigger criterion.  
cells array(CellId) M 1 The specific cell list.
### B.2.3.6 Type: TrackingAreaChange
Table B.2.3.6-1: Definition of type TrackingAreaChange
Attribute name Data type P Cardinality Description Applicability
* * *
anyTrackingAreaChange BaseTrigger O 0..1 The trigger of any tracking area
change.  
enterSpecificTrackingAreas SpecificTrackingAreas O 0..1 The trigger of
entering one or more tracking areas.  
exitSpecificTrackingAreas SpecificTrackingAreas O 0..1 The trigger of existing
one or more tracking areas.
### B.2.3.7 Type: SpecificTrackingAreas
Table B.2.3.7-1: Definition of type SpecificTrackingAreas
Attribute name Data type P Cardinality Description Applicability
* * *
triggerId TriggerId M 1 The unique identity of the trigger criterion.  
trackingAreas array(TaId) M 1 The specific tracking area list.
### B.2.3.8 Type: PlmnChange
Table B.2.3.8-1: Definition of type PlmnChange
Attribute name Data type P Cardinality Description Applicability
* * *
AnyPlmnChange BaseTrigger O 0..1 The trigger of any PLMN change.  
EnterSpecificPlmns SpecificPlmns O 0..1 The trigger of entering one or more
PLMNs.  
ExitSpecificPlmns SpecificPlmns O 0..1 The trigger of existing one or more
PLMNs.
### B.2.3.9 Type: SpecificPlmns
Table B.2.3.9-1: Definition of type SpecificPlmns
Attribute name Data type P Cardinality Description Applicability
* * *
triggerId TriggerId M 1 The unique identity of the trigger criterion.  
plmns array(PlmnId) M 1 The specific PLMN list.
### B.2.3.10 Type: MbmsSaChange
Table B.3.1.10-1: Definition of type MbmsSaChange
Attribute name Data type P Cardinality Description Applicability
* * *
anyPlmnChange BaseTrigger O 0..1 The trigger of any MBMS serving area change.  
enterSpecificPlmns SpecificMbmsSas O 0..1 The trigger of entering one or more
MBMS serving areas.  
exitSpecificPlmns SpecificMbmsSas O 0..1 The trigger of existing one or more
MBMS serving areas.
### B.2.3.11 Type: SpecificMbmsSas
Table B.2.3.11-1: Definition of type SpecificMbmsSas
Attribute name Data type P Cardinality Description Applicability
* * *
triggerId TriggerId M 1 The unique identity of the trigger criterion.  
mbmsSas array(MbmsSaId) M 1 The specific MBMS serving area list.
### B.2.3.12 Type: MbsfnAreaChange
Table B.2.3.12-1: Definition of type MbsfnAreaChange
Attribute name Data type P Cardinality Description Applicability
* * *
anyPlmnChange BaseTrigger O 0..1 The trigger of any MBSFN area change.  
enterSpecificMbsfnAreas SpecificMbsfnAreas O 0..1 The trigger of entering one
or more MBSFN areas.  
exitSpecificPlmn SpecificMbsfnAreas O 0..1 The trigger of existing one or more
MBSFN areas.
### B.2.3.13 Type: SpecificMbsfnAreas
Table B.2.3.13-1: Definition of type SpecificMbsfnAreas
Attribute name Data type P Cardinality Description Applicability
* * *
triggerId TriggerId M 1 The unique identity of the trigger criterion.  
mbsfnAreas array(MbsfnAreaId) M 1 The specific MBSFN area list.
### B.2.3.14 Type: PeriodicReport
Table B.2.3.14-1: Definition of type PeriodicReport
Attribute name Data type P Cardinality Description Applicability
* * *
triggerId TriggerId M 1 The unique identity of the trigger criterion.  
interval Uinteger M 1 The time interval for location reporting.
### B.2.3.15 Type: TravelledDistance
Table B.2.3.15-1: Definition of type TravelledDistance
Attribute name Data type P Cardinality Description Applicability
* * *
triggerId TriggerId M 1 The unique identity of the trigger criterion.  
distance Uinteger M 1 The distance interval for location reporting.
### B.2.3.16 Type: VerticalAppEvent
Table B.2.3.16-1: Definition of type VerticalAppEvent
Attribute name Data type P Cardinality Description Applicability
* * *
initialLogOn BaseTrigger O 0..1 The event of initial log-on.  
locConfigReceived BaseTrigger O 0..1 The event of location configuration being
received.  
anyOtherEvent BaseTrigger O 0..1 Any other event.
### B.2.3.17 Type: GeographicalAreaChange
Table B.2.3.17-1: Definition of type GeographicalAreaChange
Attribute name Data type P Cardinality Description Applicability
* * *
AnyGeoAreaChange BaseTigger O 0..1 The trigger of any geographical area
change.  
EnterSpecificGeoAreas SpecificGeoAreas O 0..1 The trigger of entering one or
more geographical areas.  
ExitSpecificGeoAreas SpecificGeoAreas O 0..1 The trigger of existing one or
more geographical areas.
### B.2.3.18 Type: SpecificGeoAreas
Table B.2.3.18-1: Definition of type SpecificGeoAreas
Attribute name Data type P Cardinality Description Applicability
* * *
triggerId TriggerId M 1 The unique identity of the trigger criterion.  
geoAreas array(GeographicArea) M 1 The specific geographical area list.
### B.2.3.19 Type: LocationReport
Table B.2.3.20-1: Definition of type LocationReport
Attribute name Data type P Cardinality Description Applicability
* * *
valTgtUe ValTargetUe M 1 VAL user who reports the location information.  
triggerIds array(TriggerId) M 1..N The triggers that have been met for this
location report.  
locInfo LocationInfo M 1 The location information in this report.
### B.2.3.20 Type: LocationInfo
Table B.2.3.21-1: Definition of type LocationInfo
Attribute name Data type P Cardinality Description Applicability
* * *
cellId CellId O 0..1 Current cell.  
neighbouringCellIds array(CellId) O 0..N The neighbouring cells of current
cell.  
mbmsSaId MbmsSaId O 0..1 Current MBMS serving area.  
mbsfnAreaId MbsfnAreaId O 0..1 Current MBSFN area.  
currentCoordinate GeographicalCoordinates O 0..1 Current geographical
coordinate.
### B.2.3.21 Type: RequestedLocation
Table B.2.3.21-1: Definition of type RequestedLocation
Attribute name Data type P Cardinality Description Applicability
* * *
valTgtUes array(ValTargetUe) M 1..N VAL users or VAL UEs whose location
information is requested  
locationType Accuracy O 0..1 The type of location information is requested.  
requestedLocAccessType LocationAccessType O 0..1 The identities of the
location access type for which the location information is requested.  
requestedPosMethod PositioningMethod O 0..1 The identities of the positioning
method for which the location information is requested.
## B.2.4 Common simple data types
Table B.2.4-1: Simple data types applicable to multiple CoAP resource
representations
* * *
Type name Description TriggerId String representing a unique identifier of a
trigger criterion.
* * *
## B.2.5 Common enumerations
### B.2.5.1 Enumeration: Accuracy
Table B.2.5.1-1: Accuracy
Enumeration value Description Applicability
* * *
CURRENT_SERVING_NCGI Current cell.  
NEIGHBOURING_NCGI The neighbouring cells of current cell.  
MBMS_SA Current MBMS serving area.  
MBSFN_AREA Current MBSFN area.  
CURRENT_GEOGRAPHICAL_COORDINATE Current geographical coordinate.
### B.2.5.2 Enumeration: LocationAccessType
Table B.2.5.2-1: LocationAccessType
Enumeration value Description Applicability
* * *
\"3GPP_ACCESS\" 3GPP access  
\"NON_3GPP_ACCESS\" Non-3GPP access
### B.2.5.3 Enumeration: PositioningMethod
Table B.2.5.3-1: PositioningMethod
Enumeration value Description Applicability
* * *
\"CELLID\" Cell ID positioning method  
\"ECID\" Enhanced cell ID methods based on LTE signals  
\"OTDOA\" Observed time difference of arrival positioning based on LTE signals  
\"BAROMETRIC_PRESSURE\" Positioning method based on barometric Pressure Sensor  
\"WLAN\" WLAN positioning  
\"BLUETOOTH\" Bluetooth positioning  
\"MBS\" Terrestrial Beacon System (TBS) positioning based on MBS signals  
\"MOTION_SENSOR\" Positioning method based on motion Sensor  
\"DL_TDOA\" Downlink Time Difference of Arrival (DL-TDOA) based on NR signals  
\"DL_AOD\" Downlink Angle-of-Departure (DL-AoD) based on NR signals  
\"MULTI-RTT\" Multi-Round Trip Time Positioning (Multi-RTT based on NR
signals).  
\"NR_ECID\" NR enhanced cell ID methods (NR E-CID) based on NR signals.  
\"UL_TDOA\" Uplink Time Difference of Arrival (UL-TDOA) based on NR signals  
\"UL_AOA\" Uplink Angle of Arrival (UL-AoA), including the Azimuth of Arrival
(A-AoA) and the Zenith of Arrival (Z-AoA) based on NR signals.  
\"NETWORK_SPECIFIC\" Network specific position methods.
# B.3 Resource representation and APIs for location reporting provided by
SLM-S
## B.3.1 SU_LocationReporting API provided by SLM-S
### B.3.1.1 API URI
The CoAP URIs used in CoAP requests from SLM-S towards the SLM-C shall have
the Resource URI structure as defined in Annex C.1.1 of 3GPP TS 24.546 [29]
with the following clarifications:
\- the \ shall be \"su-lr\";
\- the \ shall be \"v1\"; and
\- the \ shall be set as described in clause B.3.1.2.
### B.3.1.2 Resources
#### B.3.1.2.1 Overview
Figure B.3.1`.2.1-1: Resource URI structure of the SU_LocationReporting API
provided by SLM-S
Table B.3.1.2.1-1 provides an overview of the resources and applicable CoAP
methods.
Table B.3.1.2.1-1: Resources and methods overview
Resource name Resource URI CoAP method Description
* * *
Registration /val-services/{valServiceId}/registration POST Register the
available location services of the SLM-C. Deregistration /val-
services/{valServiceId}/deregistration GET Deregister the available location
services of the SLM-C which have registed to the SLM-S before. Trigger
Configurations /val-services/{valServiceId}/trigger-configurations GET
Retrieve trigger configuration of the SLM-C for a given VAL service, according
to query criteria. Location Report /location-reports/{valTgtUe} PUT Report
location information of the SLM-C. Locations /locations FETCH Observe the
location information of another SLM-C. GET Retrieve location information of
another SLM-C. Location Area Information /location-area-info FETCH Query the
information, e.g., user information based on the specific location area.
#### B.3.1.2.2 Resource: Trigger Configurations
##### B.3.1.2.2.1 Description
The Trigger Configurations resource allows a SLM-C to retrieve the trigger
configuration for its own from SLM-S.
##### B.3.1.2.2.2 Resource Definition
Resource URI: **{apiRoot}/su-lr/\ /val-
services/{valServiceId}/trigger-configurations**
This resource shall support the resource URI variables defined in the table
B.3.1.2.2.2-1.
Table B.3.1.2.2.2-1: Resource URI variables for this resource
Name Data Type Definition
* * *
apiRoot string See Annex C.1.1 of 3GPP TS 24.546 [29]. apiVersion string See
clause B.3.1.1. valServiceId string Identifier of a VAL service.
##### B.3.1.2.2.3 Resource Standard Methods
##### B.3.1.2.2.3.1 GET {#b.3.1.2.2.3.1-get .H6}
This operation retrieves the trigger configuration.
This method shall support URI query options specified in table
B.3.1.2.2.3.1-1, the response data structures and response codes specified in
table B.3.1.2.2.3.1-1.
Table B.2.1.2.3.3.1-1: URI query options supported by the GET Request on this
resource
* * *
Name Data type P Cardinality Description val-tgt-ue string M 1 The identifier
of VAL UE owns the trigger configuration. NOTE: Other request options also
apply in accordance with normal CoAP procedures.
* * *
Table B.3.1.2.2.3.1-2: Data structures supported by the GET Response payload
on this resource
+---------------+---+-------------+--------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+--------------+---------------+ | L | M | 1 | 2.05 Content | The trigger | | ocationReport | | | | configuration | | Configuration | | | | information. | +---------------+---+-------------+--------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | CoAP error | | | | | | status codes | | | | | | for the GET | | | | | | Request | | | | | | listed in | | | | | | table C.1.3-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 24.546 [29] | | | | | | shall also | | | | | | apply. | | | | | +---------------+---+-------------+--------------+---------------+
#### B.3.1.2.3 Resource: Location Reports
##### B.3.1.2.3.1 Description
The Location Reports resource allows a SLM-C to report its own location
information to SLM-S.
##### B.3.1.2.3.2 Resource Definition
Resource URI: **{apiRoot}/su-lr/\ /location-reports/{valTgtUe}**
This resource shall support the resource URI variables defined in the table
B.3.1.2.3.2-1.
Table B.3.1.2.3.2-1: Resource URI variables for this resource
Name Data Type Definition
* * *
apiRoot string See Annex C.1.1 of 3GPP TS 24.546 [29]. apiVersion string See
clause B.3.1.1. valTgtUe string The identifier of VAL UE owns the location
information.
##### B.3.1.2.3.3 Resource Standard Methods
##### B.3.1.2.3.3.1 PUT {#b.3.1.2.3.3.1-put .H6}
This operation sends a location report.
This method shall support the request data structures specified in table
B.3.1.2.3.3.1-1, the response data structures and response codes specified in
table B.3.1.2.3.3.1-2.
Table B.3.1.2.3.3.1-1: Data structures supported by the PUT Request payload on
this resource
* * *
Data type P Cardinality Description LocationReport M 1 The location report to
be sent.
* * *
Table B.3.1.2.3.3.1-2: Data structures supported by the PUT Response payload
on this resource
+---------------+---+-------------+--------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+--------------+---------------+ | L | O | 0..1 | 2.04 Changed | The location | | ocationReport | | | | report was | | | | | | created | | | | | | successfully. | +---------------+---+-------------+--------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | CoAP error | | | | | | status codes | | | | | | for the PUT | | | | | | method listed | | | | | | in | | | | | | table C.1.3-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 24.546 [29] | | | | | | shall also | | | | | | apply. | | | | | +---------------+---+-------------+--------------+---------------+
#### B.3.1.2.4 Resource: Locations
##### B.3.1.2.4.1 Description
The Locations resource allows a SLM-C to retrieve the location information of
another SLM-C. This resource is observable.
##### B.3.1.2.4.2 Resource Definition
Resource URI: **{apiRoot}/su-lr/\ /locations**
This resource shall support the resource URI variables defined in the table
B.3.1.2.4.2-1.
Table B.3.1.2.4.2-1: Resource URI variables for this resource
Name Data Type Definition
* * *
apiRoot string See Annex C.1.1 of 3GPP TS 24.546 [29]. apiVersion string See
clause B.3.1.1.
##### B.3.1.2.4.3 Resource Standard Methods
##### B.3.1.2.4.3.1 FETCH {#b.3.1.2.4.3.1-fetch .H6}
This operation the location information of other SLM-Cs.
This method shall support:
\- the request options specified in table B.3.1.2.4.3.1-1;
\- the request data structures specified in table B.3.1.2.4.3.1-2;
\- the response data structures and response codes specified in table
B.3.1.2.4.3.1-3; and
\- the response options specified in table B.3.1.2.4.3.1-4.
Table B.3.1.2.4.3.1-1: Options supported by the FETCH Request on this resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Observe | Uinteger | O | 0..1 | When set to 0 | | | | | | (Register) it | | | | | | extends the GET | | | | | | request to | | | | | | subscribe to | | | | | | the changes of | | | | | | this resource. | | | | | | | | | | | | When set to 1 | | | | | | (Deregister) it | | | | | | cancels the | | | | | | subscription. | +-----------------+-----------+---+-------------+-----------------+ | NOTE: Other | | | | | | request options | | | | | | also apply in | | | | | | accordance with | | | | | | normal CoAP | | | | | | procedures. | | | | | +-----------------+-----------+---+-------------+-----------------+
Table B.3.1.2.3.3.1-2: Data structures supported by the FETCH Request payload
on this resource
* * *
Data type P Cardinality Description LocationReportConfiguration O 0..1 The
trigger configuration information.
* * *
Table B.3.1.2.4.3.1-3: Data structures supported by the FETCH Response payload
on this resource
+---------------+---+-------------+--------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+--------------+---------------+ | array(Lo | O | 0..N | 2.05 Content | The location | | cationReport) | | | | information | | | | | | based on the | | | | | | request from | | | | | | the SLM-C. | +---------------+---+-------------+--------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | CoAP error | | | | | | status codes | | | | | | for the FETCH | | | | | | Request | | | | | | listed in | | | | | | table C.1.3-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 24.546 [29] | | | | | | shall also | | | | | | apply. | | | | | +---------------+---+-------------+--------------+---------------+
Table B.3.1.2.4.3.1-4: Options supported by the 2.05 Response Code on this
resource
* * *
Name Data type P Cardinality Description Observe Uinteger O 0..1 Sequence
number of the notification. NOTE: Other response options also apply in
accordance with normal CoAP procedures.
* * *
##### B.3.1.2.4.3.2 GET {#b.3.1.2.4.3.2-get .H6}
This operation retrieves the location information of another SLM-C.
This method shall support:
\- the URI query options specified in table B.3.1.2.4.3.2-1; and
\- the response data structures and response codes specified in table
B.3.1.2.4.3.2-2.
Table B.3.1.2.4.3.2-1: URI query options supported by the GET Request on this
resource
* * *
Name Data type P Cardinality Description val-tgt-ue string M 1 The VAL UE owns
the location information.
* * *
Table B.3.1.2.4.3.2-2: Data structures supported by the GET Response payload
on this resource
+---------------+---+-------------+--------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+--------------+---------------+ | L | O | 0..1 | 2.05 Content | The location | | ocationReport | | | | information | | | | | | based on the | | | | | | request from | | | | | | the SLM-C. | +---------------+---+-------------+--------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | CoAP error | | | | | | status codes | | | | | | for the GET | | | | | | Request | | | | | | listed in | | | | | | table C.1.3-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 24.546 [29] | | | | | | shall also | | | | | | apply. | | | | | +---------------+---+-------------+--------------+---------------+
#### B.3.1.2.5 Resource: Location Area Information
##### B.3.1.2.5.1 Description
The UE Information resource allows a SLM-C to query a list of users based on a
specified location from SLM-S.
##### B.3.1.2.5.2 Resource Definition
Resource URI: **{apiRoot}/su-lr/\ /location-area-info**
This resource shall support the resource URI variables defined in the table
B.3.1.2.5.2-1.
Table B.3.1.2.5.2-1: Resource URI variables for this resource
Name Data Type Definition
* * *
apiRoot string See Annex C.1.1 of 3GPP TS 24.546 [29]. apiVersion string See
clause B.3.1.1.
##### B.3.1.2.5.3 Resource Standard Methods
##### B.3.1.2.5.3.1 FETCH {#b.3.1.2.5.3.1-fetch .H6}
This operation queries the relevant information based on a specific location.
This method shall support:
\- the request data structures specified in table B.3.1.2.5.3.1-1; and
\- the response data structures and response codes specified in table
B.3.1.2.5.3.1-2.
Table B.3.1.2.5.3.1-1: Data structures supported by the FETCH Request payload
on this resource
* * *
Data type P Cardinality Description LocationAreaQuery M 1 The specific
location area for query.
* * *
Table B.3.1.2.5.3.1-2: Data structures supported by the FETCH Response payload
on this resource
+---------------+---+-------------+--------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+--------------+---------------+ | Loc | O | 0..1 | 2.05 Content | The query | | ationAreaInfo | | | | result was | | | | | | returned | | | | | | successfully. | +---------------+---+-------------+--------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | CoAP error | | | | | | status codes | | | | | | for the FETCH | | | | | | method listed | | | | | | in | | | | | | table C.1.3-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 24.546 [29] | | | | | | shall also | | | | | | apply. | | | | | +---------------+---+-------------+--------------+---------------+
#### B.3.1.2.6 Resource: Registration
##### B.3.1.2.6.1 Description
The Registration resource allows a SLM-C to register the available location
services to SLM-S.
##### B.3.1.2.6.2 Resource Definition
Resource URI: **{apiRoot}/su-lr/\ /val-
services/{valServiceId}/registration**
This resource shall support the resource URI variables defined in the table
B.3.1.2.6.2-1.
Table B.3.1.2.6.2-1: Resource URI variables for this resource
Name Data Type Definition
* * *
apiRoot string See clause C.1.1 of 3GPP TS 24.546 [29]. apiVersion string See
clause B.3.1.1. valServiceId string Identifier of a VAL service.
##### B.3.1.2.6.3 Resource Standard Methods
##### B.3.1.2.6.3.1 POST {#b.3.1.2.6.3.1-post .H6}
This operation retrieves the allowed registration.
This method shall support the request data structures the request data
structures and request codes specified in table B.3.1.2.6.3.1-1.
Table B.3.1.2.6.3.1-1: Data structures supported by the POST Request payload
on this resource
* * *
Data type P Cardinality Description LocationCapability O 0..1 The information
of location capability of VAL UE for which the location service is registered.
* * *
#### B.3.1.2.7 Resource: Deregistration
##### B.3.1.2.7.1 Description
The Deregistration resource allows a SLM-C to deregister the available
location services which have registered to the SLM-S before.
##### B.3.1.2.7.2 Resource Definition
Resource URI: **{apiRoot}/su-lr/\ /val-
services/{valServiceId}/deregistration**
This resource shall support the resource URI variables defined in the table
B.3.1.2.7.2-1.
Table B.3.1.2.7.2-1: Resource URI variables for this resource
Name Data Type Definition
* * *
apiRoot string See clause C.1.1 of 3GPP TS 24.546 [29]. apiVersion string See
clause B.3.1.1. valServiceId string Identifier of a VAL service.
##### B.3.1.2.7.3 Resource Standard Methods
##### B.3.1.2.7.3.1 GET {#b.3.1.2.7.3.1-get .H6}
This operation deletes the available location services of the SLM-C.
This method shall support URI query options specified in table
B.3.1.2.7.3.1-1, the response data structures and response codes specified in
table B.3.1.2.7.3.1-1
Table B.3.1.2.7.3.1-1: Data structures supported by the GET Request payload on
this resource
* * *
Data type P Cardinality Description val-tgt-ue M 1 The identifier of the VAL
user or the VAL UE for location service deregistration
* * *
### B.3.1.3 Data Model
#### B.3.1.3.1 General
Table B.3.1.3.1-1 specifies the data types defined specifically for the
SU_LocationReporting API service provided by SLM-S.
Table B.3.1.3.1-1: SU_LocationReporing API provided by SLM-S specific Data
Types
Data type Section defined Description Applicability
* * *
ValTargetUe B.2.1 Information identifying a VAL user ID or VAL UE ID.  
GeographicArea B.2.1 Defines a geographical area.  
BaseTrigger B.2.3.1 The unique identity of the trigger criterion.  
LocationReportConfiguration B.2.3.2 The configuration for location reporting.  
TriggeringCriteriaType B.2.3.3 The triggering criteria of location reporting.  
CellChange B.2.3.4 The triggers of cell change.  
SpecificCells B.2.3.5 The specific cell list.  
TrackingAreaChange B.2.3.6 The triggers of tracking area change.  
SpecificTrackingAreas B.2.3.7 The specific tracking are list.  
PlmnChange B.2.3.8 The triggers of PLMN change.  
SpecificPlmns B.2.3.9 The specific PLMN list.  
MbmsSaChange B.2.3.10 The triggers of MBMS serving area change.  
SpecificMbmsSas B.2.3.11 The specific MBMS serving area list.  
MbsfnAreaChange B.2.3.12 The triggers of MBSFN area change.  
SpecificMbsfnAreas B.2.3.13 The specific MBSFN are list.  
PeriodicReport B.2.3.14 The trigger of periodical reporting.  
TravelledDistance B.2.3.15 The trigger of travelled distance.  
VerticalAppEvent B.2.3.16 The triggers of specific vertical application
events.  
GeographicalAreaChange B.2.3.17 The triggers of geographical area change.  
SpecificGeoAreas B.2.3.18 The specific list of geographical areas.  
LocationReport B.2.3.19 The location report information.  
LocationInfo B.2.3.20 The location information.  
LocationAreaQuery B.3.1.3.2.1 The specific location area.  
LocationAreaInfo B.3.1.3.2.2 The location-based query result.  
UeInfo B.3.1.3.2.3 The UE information.
Table B.3.1.3.1-2 specifies the simple data types defined specifically for the
SU_LocationReporting API service provided by SLM-S.
Table B.3.1.3.1-2: SU_LocationReporing API provided by SLM-S specific Simple
Data Types
Data type Section defined Description
* * *
Uinteger B.2.1 Information identifying a VAL user ID or VAL UE ID. TriggerId
B.2.4 String representing a unique identifier of a trigger criterion. CellId
B.2.4 String representing a unique identifier of a cell. TaId B.2.4 String
representing a unique identifier of a tracking area. PlmnId B.2.4 String
representing a unique identifier of a PLMN. MbmsSaId B.2.4 String representing
a unique identifier of a MBMS serving area. MbsfnAreaId B.2.4 String
representing a unique identifier of a MSFN area.
Table B.3.1.3.1-3 specifies the enumerations defined specifically for the
SU_LocationReporting API service provided by SLM-S.
Table B.3.1.3.1-3: SU_LocationReporing API provided by SLM-S specific
Enumeration
Data type Section defined Description
* * *
Accuracy B.2.5 The accuracy of location information.
#### B.3.1.3.2 Structured data types
##### B.3.1.3.2.1 Type: LocationAreaQuery
Table B.3.1.3.2.1-1: Definition of type LocationAreaQuery
Attribute name Data type P Cardinality Description Applicability
* * *
geoArea GeographicArea M 1 The specific location area.
##### B.3.1.3.2.2 Type: LocationAreaInfo
Table B.3.1.3.2.2-1: Definition of type LocationAreaInfo
Attribute name Data type P Cardinality Description Applicability
* * *
ueList array(UeInfo) M 1 The list of users inside the specific location area.  
valReqUe ValTargetUe O 0..1 VAL user information.
##### B.3.1.3.2.3 Type: UeInfo
Table B.3.1.3.2.3-1: Definition of type UeInfo
Attribute name Data type P Cardinality Description Applicability
* * *
ueId ValTargetUe M 1 VAL user information.  
ueLoc LocationInfo M 1 Location information of the VAL user.
##### B.3.1.3.2.3 Type: LocationCapability
Table B.3.1.3.2.3-1: Definition of type LocationCapability
Attribute name Data type P Cardinality Description Applicability
* * *
locationAccessType LocationAccessType O 0..1 The identities of the available
location access type of the VAL UE.  
positioningMethod PositioningMethod O 0..1 The identities of the available
positioning methods of the VAL UE.
#### B.3.1.3.3 Simple data types and enumerations
None.
### B.3.1.4 Error Handling
General error responses are defined in Annex C.1.3 of 3GPP TS 24.546 [29].
### B.3.1.5 CDDL Specification
#### B.3.1.5.1 Introduction
The data model described in clause B.3.1.3 shall be binary encoded in the CBOR
format as described in IETF RFC 8949 [26].
Clause B.3.1.5.2 uses the Concise Data Definition Language described in IETF
RFC 8610 [28] and provides corresponding representation of the
SU_LocationReporting API provided by SLM-S data model.
#### B.3.1.5.2 CDDL document
;;; LocationAreaQuery
LocationAreaQuery = {
geoArea: GeographicArea
}
;;; LocationAreaInfo
LocationAreaInfo = {
? valReqUe: ValTargetUe
? ueList: [* UeInfo]
}
;;; UeInfo
UeInfo = {
? ueId: ValTargetUe
? ueLoc: LocationInfo
}
;;; LocationReportConfiguration
;;+ Represents Location reporting configuration information.
LocationReportConfiguration = {
valTgtUes: [* ValTargetUe]
locationType: Accuracy
? triggeringCriteria: [* TriggeringCriteriaType]
? minimumIntervalLength: Uinteger
? AccessType: [* AccessTypeType]
? PositioningMethod: [* PositioningMethodType]
}
;;; Accuracy
Accuracy = \"CURRENT_SERVING_NCGI\" / \"NEIGHBOURING_NCGI\" / \"MBMS_SA\" /
\"MBSFN_AREA\" / \"CURRENT_GEOGRAPHICAL_COORDINATE\"
;;; TriggeringCriteriaType
TriggeringCriteriaType = {
? cellChange: CellChange
? trackingAreaChange: TrackingAreaChange
? plmnChange: PlmnChange
? mbmsSaChange: MbmsSaChange
? mbsfnAreaChange: MbsfnAreaChange
? periodicReport: PeriodicReport
? travelledDistance: TravelledDistance
? verticalAppEvent: VerticalAppEvent
? geographicalAreaChange: GeographicalAreaChange
}
;;; CellChange
CellChange = {
? anyCellChange: BaseTrigger
? enterSpecificCells: SpecificCells
? exitSpecificCells: SpecificCells
}
;;; SpecificCells
SpecificCells = {
triggerId: TriggerId
cells: [* CellId]
}
;;; TrackingAreaChange
TrackingAreaChange = {
? anyTrackingAreaChange: BaseTrigger
? enterSpecificTrackingAreas: SpecificTrackingAreas
? exitSpecificTrackingAreas: SpecificTrackingAreas
}
;;; SpecificTrackingAreas
SpecificTrackingAreas = {
triggerId: TriggerId
trackingAreas: [* TaId]
}
;;; PlmnChange
PlmnChange = {
? AnyPlmnChange: BaseTrigger
? EnterSpecificPlmns: SpecificPlmns
? ExitSpecificPlmns: SpecificPlmns
}
;;; SpecificPlmns
SpecificPlmns = {
triggerId: TriggerId
plmns: [* PlmnId]
}
;;; MbmsSaChange
MbmsSaChange = {
? anyPlmnChange: BaseTrigger
? enterSpecificPlmns: SpecificMbmsSas
? exitSpecificPlmns: SpecificMbmsSas
}
;;; SpecificMbmsSas
SpecificMbmsSas = {
triggerId: TriggerId
mbmsSas: [* MbmsSaId]
}
;;; MbsfnAreaChange
MbsfnAreaChange = {
? anyPlmnChange: BaseTrigger
? enterSpecificMbsfnAreas: SpecificMbsfnAreas
? exitSpecificPlmn: SpecificMbsfnAreas
}
;;; SpecificMbsfnAreas
SpecificMbsfnAreas = {
triggerId: TriggerId
mbsfnAreas: [* MbsfnAreaId]
}
;;; PeriodicReport
PeriodicReport = {
triggerId: TriggerId
interval: Uinteger
}
;;; TravelledDistance
TravelledDistance = {
triggerId: TriggerId
distance: Uinteger
}
;;; VerticalAppEvent
VerticalAppEvent = {
? initialLogOn: BaseTrigger
? locConfigReceived: BaseTrigger
? anyOtherEvent: BaseTrigger
}
;;; GeographicalAreaChange
GeographicalAreaChange = {
? AnyGeoAreaChange: BaseTrigger
? EnterSpecificGeoAreas: SpecificGeoAreas
? ExitSpecificGeoAreas: SpecificGeoAreas
}
;;; SpecificGeoAreas
SpecificGeoAreas = {
triggerId: TriggerId
geoAreas: [* GeographicArea]
}
;;; RequestedLocation
RequestedLocation = {
valTgtUes: [* ValTargetUe]
? locationType: Accuracy
? requestedLocAccessType: [* LocationAccessTypeType]
? requestedPosMethod: [* PositioningMethodType]
}
;;; LocationReport
LocationReport = {
valTgtUe: ValTargetUe
triggerIds: [* TriggerId]
locInfo: LocationInfo
}
;;; LocationInfo
LocationInfo = {
? cellId: CellId
? neighbouringCellIds: [* CellId]
? mbmsSaId: MbmsSaId
? mbsfnAreaId: MbsfnAreaId
? currentCoordinate: GeographicalCoordinates
}
;;; BaseTrigger
BaseTrigger = {
triggerId: TriggerId
}
;;; TriggerId
;;+ Unique identifier of a trigger.
TriggerId = text
;;; ValTargetUe
;;+ Represents information identifying a VAL user ID or a VAL UE ID.
valUserId = {
valUserId: text ; Unique identifier of a VAL user.
}
valUeId = {
valUeId: text ; Unique identifier of a VAL UE.
}
ValTargetUe = valUserId / valUeId
;;; Uinteger
;;+ Unsigned Integer, i.e. only value 0 and integers above 0 are permissible.
Uinteger = int .ge 0
;;; GeographicArea
;;+ Geographic area specified by different shape.
GeographicArea = Point / PointUncertaintyCircle / PointUncertaintyEllipse /
Polygon / PointAltitude / PointAltitudeUncertainty / EllipsoidArc
;;; GADShape
;;+ Common base type for GAD shapes.
GADShape = {
shape: SupportedGADShapes
}
;;; Point
;;+ Ellipsoid Point.
Point = {
\~GADShape
point: GeographicalCoordinates
}
;;; PointUncertaintyCircle
;;+ Ellipsoid point with uncertainty circle.
PointUncertaintyCircle = {
\~GADShape
point: GeographicalCoordinates
uncertainty: Uncertainty
}
;;; PointUncertaintyEllipse
;;+ Ellipsoid point with uncertainty ellipse.
PointUncertaintyEllipse = {
\~GADShape
point: GeographicalCoordinates
uncertaintyEllipse: UncertaintyEllipse
confidence: Confidence
}
;;; Polygon
;;+ Polygon.
Polygon = {
\~GADShape
pointList: PointList
}
;;; PointAltitude
;;+ Ellipsoid point with altitude.
PointAltitude = {
\~GADShape
point: GeographicalCoordinates
altitude: Altitude
}
;;; PointAltitudeUncertainty
;;+ Ellipsoid point with altitude and uncertainty ellipsoid.
PointAltitudeUncertainty = {
\~GADShape
point: GeographicalCoordinates
altitude: Altitude
uncertaintyEllipse: UncertaintyEllipse
uncertaintyAltitude: Uncertainty
confidence: Confidence
}
;;; EllipsoidArc
;;+ Ellipsoid Arc.
EllipsoidArc = {
\~GADShape
point: GeographicalCoordinates
innerRadius: InnerRadius
uncertaintyRadius: Uncertainty
offsetAngle: Angle
includedAngle: Angle
confidence: Confidence
}
;;; GeographicalCoordinates
;;+ Geographical coordinates.
GeographicalCoordinates = {
lon: -180.0..180.0
lat: -90.0..90.0
}
;;; UncertaintyEllipse
;;+ Ellipse with uncertainty.
UncertaintyEllipse = {
semiMajor: Uncertainty
semiMinor: Uncertainty
orientationMajor: Orientation
}
;;; PointList
;;+ List of points.
PointList = [3*15 GeographicalCoordinates]
;;; Altitude
;;+ Indicates value of altitude.
Altitude = -32767.0..32767.0
;;; Angle
;;+ Indicates value of angle.
Angle = 0..360
;;; Uncertainty
;;+ Indicates value of uncertainty.
Uncertainty = float32 .ge 0
;;; Orientation
;;+ Indicates value of orientation angle.
Orientation = 0..180
;;; Confidence
;;+ Indicates value of confidence.
Confidence = 0..100
;;; InnerRadius
;;+ Indicates value of the inner radius.
InnerRadius = (0..327675) .and int32
;;; SupportedGADShapes
;;+ Indicates supported GAD shapes.
SupportedGADShapes = \"POINT\" / \"POINT_UNCERTAINTY_CIRCLE\" /
\"POINT_UNCERTAINTY_ELLIPSE\" / \"POLYGON\" / \"POINT_ALTITUDE\" /
\"POINT_ALTITUDE_UNCERTAINTY\" / \"ELLIPSOID_ARC\" /
\"LOCAL_2D_POINT_UNCERTAINTY_ELLIPSE\" /
\"LOCAL_3D_POINT_UNCERTAINTY_ELLIPSOID\" / text
;;; CellId
;;+ Unique identifier of a cell.
CellId = text
;;; TaId
;;+ Unique identifier of a tracking area.
TaId = text
;;; PlmnId
;;+ Unique identifier of a PLMN.
PlmnId = text
;;; MbmsSaId
;;+ Unique identifier of a MBMS serving area.
MbmsSaId = text
;;; MbsfnAreaId
;;+ Unique identifier of a MBSFN area.
MbsfnAreaId = text
### B.3.1.6 Media Types
The media type for a trigger configuration or location report configuration
shall be \"application/vnd.3gpp.seal-location-configuration+cbor\".
The media type for a location information or location report shall be
\"application/vnd.3gpp.seal-location-info+cbor\".
The media type for a location area query shall be \"application/vnd.3gpp.seal-
location-area-query+cbor\".
The media type for a location area information shall be
\"application/vnd.3gpp.seal-location-area-info+cbor\".
### B.3.1.7 Media Type registration for application/vnd.3gpp.seal-location-
configuration+cbor
Type name: application
Subtype name: vnd.3gpp.seal-location-configuration+cbor
Required parameters: none
Optional parameters: none
Encoding considerations: Must be encoded as using IETF RFC 8949 [26]. See
\"LocationReportConfiguration\" data type in B.2.3.2 for details.
Security considerations: See Section 10 of IETF RFC 8949 [26] and Section 11
of IETF RFC 7252 [21].
Interoperability considerations: Applications must ignore any key-value pairs
that they do not understand. This allows backwards-compatible extensions to
this specification.
Published specification: 3GPP TS 24.545 \"Location Management - Service
Enabler Architecture Layer for Verticals (SEAL); Protocol specification\",
available via http://www.3gpp.org/specs/numbering.htm.
Applications that use this media type: Applications supporting the SEAL
location management procedures as described in the published specification.
Fragment identifier considerations: Fragment identification is the same as
specified for \"application/cbor\" media type in IETF RFC 8949 [26]. Note that
currently that RFC does not define fragmentation identification syntax for
\"application/cbor\".
Additional information:
Deprecated alias names for this type: N/A
Magic number(s): N/A
File extension(s): none
Macintosh file type code(s): none
Person & email address to contact for further information: \, \
Intended usage: COMMON
Restrictions on usage: None
Author: 3GPP CT1 Working Group/3GPP_TSG_CT_WG1\@LIST.ETSI.ORG
Change controller: \/\
### B.3.1.8 Media Type registration for application/vnd.3gpp.seal-location-
info+cbor
Type name: application
Subtype name: vnd.3gpp.seal-location-info+cbor
Required parameters: none
Optional parameters: none
Encoding considerations: Must be encoded as using IETF RFC 8949 [26]. See
\"LocationReports\" data type in clause B.2.3.19 for details.
Security considerations: See Section 10 of IETF RFC 8949 [26] and Section 11
of IETF RFC 7252 [21].
Interoperability considerations: Applications must ignore any key-value pairs
that they do not understand. This allows backwards-compatible extensions to
this specification.
Published specification: 3GPP TS 24.545 \"Location Management - Service
Enabler Architecture Layer for Verticals (SEAL); Protocol specification\",
available via http://www.3gpp.org/specs/numbering.htm.
Applications that use this media type: Applications supporting the SEAL
location management procedures as described in the published specification.
Fragment identifier considerations: Fragment identification is the same as
specified for \"application/cbor\" media type in IETF RFC 8949 [26]. Note that
currently that RFC does not define fragmentation identification syntax for
\"application/cbor\".
Additional information:
Deprecated alias names for this type: N/A
Magic number(s): N/A
File extension(s): none
Macintosh file type code(s): none
Person & email address to contact for further information: \, \
Intended usage: COMMON
Restrictions on usage: None
Author: 3GPP CT1 Working Group/3GPP_TSG_CT_WG1\@LIST.ETSI.ORG
Change controller: \/\
### B.3.1.9 Media Type registration for application/vnd.3gpp.seal-location-
area-query+cbor
Type name: application
Subtype name: vnd.3gpp.seal-location-area-query+cbor
Required parameters: none
Optional parameters: none
Encoding considerations: Must be encoded as using IETF RFC 8949 [26]. See
\"LocationAreaQuery\" data type in clause B.3.1.3.2.1 for details.
Security considerations: See Section 10 of IETF RFC 8949 [26] and Section 11
of IETF RFC 7252 [21].
Interoperability considerations: Applications must ignore any key-value pairs
that they do not understand. This allows backwards-compatible extensions to
this specification.
Published specification: 3GPP TS 24.545 \"Location Management - Service
Enabler Architecture Layer for Verticals (SEAL); Protocol specification\",
available via http://www.3gpp.org/specs/numbering.htm.
Applications that use this media type: Applications supporting the SEAL
location management procedures as described in the published specification.
Fragment identifier considerations: Fragment identification is the same as
specified for \"application/cbor\" media type in IETF RFC 8949 [26]. Note that
currently that RFC does not define fragmentation identification syntax for
\"application/cbor\".
Additional information:
Deprecated alias names for this type: N/A
Magic number(s): N/A
File extension(s): none
Macintosh file type code(s): none
Person & email address to contact for further information: \, \
Intended usage: COMMON
Restrictions on usage: None
Author: 3GPP CT1 Working Group/3GPP_TSG_CT_WG1\@LIST.ETSI.ORG
Change controller: \/\
### B.3.1.10 Media Type registration for application/vnd.3gpp.seal-location-
area- info+cbor
Type name: application
Subtype name: vnd.3gpp.seal-location-area-info+cbor
Required parameters: none
Optional parameters: none
Encoding considerations: Must be encoded as using IETF RFC 8949 [26]. See
\"LocationAreaInfo\" data type in clause B.3.1.3.2.2 for details.
Security considerations: See Section 10 of IETF RFC 8949 [26] and Section 11
of IETF RFC 7252 [21].
Interoperability considerations: Applications must ignore any key-value pairs
that they do not understand. This allows backwards-compatible extensions to
this specification.
Published specification: 3GPP TS 24.545 \"Location Management - Service
Enabler Architecture Layer for Verticals (SEAL); Protocol specification\",
available via http://www.3gpp.org/specs/numbering.htm.
Applications that use this media type: Applications supporting the SEAL
location management procedures as described in the published specification.
Fragment identifier considerations: Fragment identification is the same as
specified for \"application/cbor\" media type in IETF RFC 8949 [26]. Note that
currently that RFC does not define fragmentation identification syntax for
\"application/cbor\".
Additional information:
Deprecated alias names for this type: N/A
Magic number(s): N/A
File extension(s): none
Macintosh file type code(s): none
Person & email address to contact for further information: \, \
Intended usage: COMMON
Restrictions on usage: None
Author: 3GPP CT1 Working Group/3GPP_TSG_CT_WG1\@LIST.ETSI.ORG
Change controller: \/\
# B.4 Resource representation and APIs for location reporting provided by
SLM-C
## B.4.1 SU_LocationReporting API provided by SLM-C
### B.4.1.1 API URI
The CoAP URIs used in CoAP requests from SLM-S towards the SLM-C shall have
the Resource URI structure as defined in Annex C.1.1 of 3GPP TS 24.546 [29]
with the following clarifications:
\- the \ shall be \"su-lr-c\";
\- the \ shall be \"v1\"; and
\- the \ shall be set as described in clause B.4.1.2.
### B.4.1.2 Resources
#### B.4.1.2.1 Overview
Figure B.4.1.2.1-1: Resource URI structure of the SU_LocationReporting API
provided by SLM-C
Table B.4.1.2.1-1 provides an overview of the resources and applicable CoAP
methods.
Table B.4.1.2.1-1: Resources and methods overview
Resource name Resource URI CoAP method Description
* * *
Trigger Configuration /val-services/{valServiceId}/trigger-configuration GET
Retrieve trigger configuration of the SLM-C for a given VAL service, according
to query criteria. PUT Update trigger configuration of the SLM-C for a given
VAL service, according to query criteria. DELETE Delete trigger configuration
of the SLM-C for a given VAL service, according to query criteria. Location
/location GET Retrieve location information of the SLM-C.
#### B.4.1.2.2 Resource: Trigger Configuration
##### B.4.1.2.2.1 Description
The Trigger Configuration resource allows a SLM-S to manage the trigger
configuration of a SLM-C.
##### B.4.1.2.2.2 Resource Definition
Resource URI: **{apiRoot}/su-lr-c/\ /val-
services/{valServiceId}/trigger-configuration**
This resource shall support the resource URI variables defined in the table
B.4.1.2.2.2-1.
Table B.4.1.2.2.2-1: Resource URI variables for this resource
Name Data Type Definition
* * *
apiRoot string See Annex C.1.1 of 3GPP TS 24.546 [29]. apiVersion string See
clause B.3.1.1. valServiceId string Identifier of a VAL service.
##### B.4.1.2.2.3 Resource Standard Methods
##### B.4.1.2.2.3.1 GET {#b.4.1.2.2.3.1-get .H6}
This operation retrieves the trigger configuration.
This method shall support the response data structures and response codes
specified in table B.4.1.2.2.3.1-1.
Table B.4.1.2.2.3.1-1: Data structures supported by the GET Response payload
on this resource
+---------------+---+-------------+--------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+--------------+---------------+ | L | M | 0..1 | 2.05 Content | The trigger | | ocationReport | | | | configuration | | Configuration | | | | information. | +---------------+---+-------------+--------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | CoAP error | | | | | | status codes | | | | | | for the GET | | | | | | Request | | | | | | listed in | | | | | | table C.1.3-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 24.546 [29] | | | | | | shall also | | | | | | apply. | | | | | +---------------+---+-------------+--------------+---------------+
##### B.4.1.2.2.3.2 PUT {#b.4.1.2.2.3.2-put .H6}
This operation updates the trigger configuration.
This method shall support the request data structures specified in table
B.4.1.2.2.3.2-1 and the response data structures and response codes specified
in table B.4.1.2.2.3.2-2.
Table B.4.1.2.2.3.2-1: Data structures supported by the PUT Request payload on
this resource
* * *
Data type P Cardinality Description LocationReportConfiguration M 1 Updated
details of the trigger configuration.
* * *
Table B.4.1.2.2.3.2-2: Data structures supported by the PUT Response payload
on this resource
+---------------+---+-------------+--------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+--------------+---------------+ | L | O | 1 | 2.04 Changed | The trigger | | ocationReport | | | | configuration | | Configuration | | | | updated | | | | | | successfully | | | | | | and the | | | | | | updated | | | | | | trigger | | | | | | configuration | | | | | | may be | | | | | | returned in | | | | | | the response. | +---------------+---+-------------+--------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | CoAP error | | | | | | status codes | | | | | | for the PUT | | | | | | method listed | | | | | | in | | | | | | table C.1.3-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 24.546 [29] | | | | | | shall also | | | | | | apply. | | | | | +---------------+---+-------------+--------------+---------------+
##### B.4.1.2.2.3.3 DELETE {#b.4.1.2.2.3.3-delete .H6}
This operation deletes the trigger configuration.
This method shall support the response data structures and response codes
specified in table B.4.1.2.2.3.3-1.
Table B.4.1.2.2.3.3-1: Data structures supported by the DELETE Response
payload on this resource
+---------------+---+-------------+--------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+--------------+---------------+ | n/a | | | 2.02 Deleted | The trigger | | | | | | configuration | | | | | | is deleted. | +---------------+---+-------------+--------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | CoAP error | | | | | | status codes | | | | | | for the | | | | | | DELETE method | | | | | | listed in | | | | | | table C.1.3-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 24.546 [29] | | | | | | shall also | | | | | | apply. | | | | | +---------------+---+-------------+--------------+---------------+
#### B.4.1.2.3 Resource: Location
##### B.4.1.2.3.1 Description
The Location resource allows a SLM-S to retrieve the location information of a
SLM-C.
##### B.4.1.2.3.2 Resource Definition
Resource URI: **{apiRoot}/su-lr-c/\ /location**
This resource shall support the resource URI variables defined in the table
B.4.1.2.3.2-1.
Table B.4.1.2.3.2-1: Resource URI variables for this resource
Name Data Type Definition
* * *
apiRoot string See Annex C.1.1 of 3GPP TS 24.546 [29]. apiVersion string See
clause B.4.1.1.
##### B.4.1.2.3.3 Resource Standard Methods
##### B.4.1.2.3.3.1 GET {#b.4.1.2.3.3.1-get .H6}
This operation retrieves the location information.
This method shall support the request and response data structures. The
request codes specified in table B.4.1.2.3.3-1 and response codes specified in
table B.4.1.2.3.3-2.
Table B.4.1.2.3.3.3-1: Data structures supported by the GET Request payload on
this resource
* * *
Data type P Cardinality Description Requested Location M 1 The location
information based on the request from the SLM-S.
* * *
Table B.4.1.2.3.3-2: Data structures supported by the GET Response payload on
this resource
+---------------+---+-------------+--------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+--------------+---------------+ | L | M | 0..1 | 2.05 Content | The location | | ocationReport | | | | information | | | | | | of the SLM-C. | +---------------+---+-------------+--------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | CoAP error | | | | | | status codes | | | | | | for the GET | | | | | | Request | | | | | | listed in | | | | | | table C.1.3-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 24.546 [29] | | | | | | shall also | | | | | | apply. | | | | | +---------------+---+-------------+--------------+---------------+
### B.4.1.3 Data Model
#### B.4.1.3.1 General
Table B.4.1.3.1-1 specifies the data types defined specifically for the
SU_LocationReporting API service provided by SLM-C.
Table B.4.1.3.1-1: SU_LocationReporing API provided by SLM-C specific Data
Types
Data type Section defined Description Applicability
* * *
ValTargetUe B.2.1 Information identifying a VAL user ID or VAL UE ID.  
GeographicArea B.2.1 Defines a geographical area.  
BaseTrigger B.2.3.1 The unique identity of the trigger criterion.  
LocationReportConfiguration B.2.3.2 The configuration for location reporting.  
TriggeringCriteriaType B.2.3.3 The triggering criteria of location reporting.  
CellChange B.2.3.4 The triggers of cell change.  
SpecificCells B.2.3.5 The specific cell list.  
TrackingAreaChange B.2.3.6 The triggers of tracking area change.  
SpecificTrackingAreas B.2.3.7 The specific tracking are list.  
PlmnChange B.2.3.8 The triggers of PLMN change.  
SpecificPlmns B.2.3.9 The specific PLMN list.  
MbmsSaChange B.2.3.10 The triggers of MBMS serving area change.  
SpecificMbmsSas B.2.3.11 The specific MBMS serving area list.  
MbsfnAreaChange B.2.3.12 The triggers of MBSFN area change.  
SpecificMbsfnAreas B.2.3.13 The specific MBSFN are list.  
PeriodicReport B.2.3.14 The trigger of periodical reporting.  
TravelledDistance B.2.3.15 The trigger of travelled distance.  
VerticalAppEvent B.2.3.16 The triggers of specific vertical application
events.  
GeographicalAreaChange B.2.3.17 The triggers of geographical area change.  
SpecificGeoAreas B.2.3.18 The specific list of geographical areas.  
LocationReport B.2.3.19 The location report information.  
LocationInfo B.2.3.20 The location information.
Table B.4.1.3.1-2 specifies the simple data types defined specifically for the
SU_LocationReporting API service provided by SLM-C.
Table B.4.1.3.1-2: SU_LocationReporing API provided by SLM-C specific Simple
Data Types
Data type Section defined Description
* * *
Uinteger B.2.1 Information identifying a VAL user ID or VAL UE ID. TriggerId
B.2.4 String representing a unique identifier of a trigger criterion. CellId
B.2.4 String representing a unique identifier of a cell. TaId B.2.4 String
representing a unique identifier of a tracking area. PlmnId B.2.4 String
representing a unique identifier of a PLMN. MbmsSaId B.2.4 String representing
a unique identifier of a MBMS serving area. MbsfnAreaId B.2.4 String
representing a unique identifier of a MSFN area.
Table B.4.1.3.1-3 specifies the enumerations defined specifically for the
SU_LocationReporting API service provided by SLM-C.
Table B.4.1.3.1-3: SU_LocationReporing API provided by SLM-C specific
Enumeration
Data type Section defined Description
* * *
Accuracy B.2.5 The accuracy of location information.
### B.4.1.4 Error Handling
General error responses are defined in clause C.1.3 of 3GPP TS 24.546 [23].
### B.4.1.5 CDDL Specification
#### B.4.1.5.1 Introduction
The data model described in clause B.4.1.3 shall be binary encoded in the CBOR
format as described in IETF RFC 8949 [26].
Clause B.4.1.5.2 uses the Concise Data Definition Language described in IETF
RFC 8610 [28] and provides corresponding representation of the
SU_LocationReporting API provided by SLM-C data model.
#### B.4.1.5.2 CDDL document
;;; LocationReportConfiguration
;;+ Represents Location reporting configuration information.
LocationReportConfiguration = {
valTgtUes: [* ValTargetUe]
locationType: Accuracy
? triggeringCriteria: [* TriggeringCriteriaType]
? minimumIntervalLength: Uinteger
}
;;; Accuracy
Accuracy = \"CURRENT_SERVING_NCGI\" / \"NEIGHBOURING_NCGI\" / \"MBMS_SA\" /
\"MBSFN_AREA\" / \"CURRENT_GEOGRAPHICAL_COORDINATE\"
;;; TriggeringCriteriaType
TriggeringCriteriaType = {
? cellChange: CellChange
? trackingAreaChange: TrackingAreaChange
? plmnChange: PlmnChange
? mbmsSaChange: MbmsSaChange
? mbsfnAreaChange: MbsfnAreaChange
? periodicReport: PeriodicReport
? travelledDistance: TravelledDistance
? verticalAppEvent: VerticalAppEvent
? geographicalAreaChange: GeographicalAreaChange
}
;;; CellChange
CellChange = {
? anyCellChange: BaseTrigger
? enterSpecificCells: SpecificCells
? exitSpecificCells: SpecificCells
}
;;; SpecificCells
SpecificCells = {
triggerId: TriggerId
cells: [* CellId]
}
;;; TrackingAreaChange
TrackingAreaChange = {
? anyTrackingAreaChange: BaseTrigger
? enterSpecificTrackingAreas: SpecificTrackingAreas
? exitSpecificTrackingAreas: SpecificTrackingAreas
}
;;; SpecificTrackingAreas
SpecificTrackingAreas = {
triggerId: TriggerId
trackingAreas: [* TaId]
}
;;; PlmnChange
PlmnChange = {
? AnyPlmnChange: BaseTrigger
? EnterSpecificPlmns: SpecificPlmns
? ExitSpecificPlmns: SpecificPlmns
}
;;; SpecificPlmns
SpecificPlmns = {
triggerId: TriggerId
plmns: [* PlmnId]
}
;;; MbmsSaChange
MbmsSaChange = {
? anyPlmnChange: BaseTrigger
? enterSpecificPlmns: SpecificMbmsSas
? exitSpecificPlmns: SpecificMbmsSas
}
;;; SpecificMbmsSas
SpecificMbmsSas = {
triggerId: TriggerId
mbmsSas: [* MbmsSaId]
}
;;; MbsfnAreaChange
MbsfnAreaChange = {
? anyPlmnChange: BaseTrigger
? enterSpecificMbsfnAreas: SpecificMbsfnAreas
? exitSpecificPlmn: SpecificMbsfnAreas
}
;;; SpecificMbsfnAreas
SpecificMbsfnAreas = {
triggerId: TriggerId
mbsfnAreas: [* MbsfnAreaId]
}
;;; PeriodicReport
PeriodicReport = {
triggerId: TriggerId
interval: Uinteger
}
;;; TravelledDistance
TravelledDistance = {
triggerId: TriggerId
distance: Uinteger
}
;;; VerticalAppEvent
VerticalAppEvent = {
? initialLogOn: BaseTrigger
? locConfigReceived: BaseTrigger
? anyOtherEvent: BaseTrigger
}
;;; GeographicalAreaChange
GeographicalAreaChange = {
? AnyGeoAreaChange: BaseTrigger
? EnterSpecificGeoAreas: SpecificGeoAreas
? ExitSpecificGeoAreas: SpecificGeoAreas
}
;;; SpecificGeoAreas
SpecificGeoAreas = {
triggerId: TriggerId
geoAreas: [* GeographicArea]
}
;;;AccessTypeType
AccessType = \"3GPP_ACCESS\" / \"NON_3GPP_ACCESS\" / text
;;;PositioningMethodType
AccessType = \"CELLID\" / \"ECID\" / \"OTDOA\" / \"BAROMETRIC_PRESSURE\" /
\"WLAN\" / \"BLUETOOTH\" / \"MBS\" / \"MOTION_SENSOR\" / \"DL_TDOA\" /
\"DL_AOD\" / \"MULTI-RTT\" / \"NR_ECID\" / \"UL_TDOA\" / \"UL_AOA\" /
\"NETWORK_SPECIFIC\" / text
;;; LocationReport
LocationReport = {
valTgtUe: ValTargetUe
triggerIds: [* TriggerId]
locInfo: LocationInfo
}
;;; LocationInfo
LocationInfo = {
? cellId: CellId
? neighbouringCellIds: [* CellId]
? mbmsSaId: MbmsSaId
? mbsfnAreaId: MbsfnAreaId
? currentCoordinate: GeographicalCoordinates
}
;;; BaseTrigger
BaseTrigger = {
triggerId: TriggerId
}
;;; TriggerId
;;+ Unique identifier of a trigger.
TriggerId = text
;;; ValTargetUe
;;+ Represents information identifying a VAL user ID or a VAL UE ID.
valUserId = {
valUserId: text ; Unique identifier of a VAL user.
}
valUeId = {
valUeId: text ; Unique identifier of a VAL UE.
}
ValTargetUe = valUserId / valUeId
;;; Uinteger
;;+ Unsigned Integer, i.e. only value 0 and integers above 0 are permissible.
Uinteger = int .ge 0
;;; GeographicArea
;;+ Geographic area specified by different shape.
GeographicArea = Point / PointUncertaintyCircle / PointUncertaintyEllipse /
Polygon / PointAltitude / PointAltitudeUncertainty / EllipsoidArc
;;; GADShape
;;+ Common base type for GAD shapes.
GADShape = {
shape: SupportedGADShapes
}
;;; Point
;;+ Ellipsoid Point.
Point = {
\~GADShape
point: GeographicalCoordinates
}
;;; PointUncertaintyCircle
;;+ Ellipsoid point with uncertainty circle.
PointUncertaintyCircle = {
\~GADShape
point: GeographicalCoordinates
uncertainty: Uncertainty
}
;;; PointUncertaintyEllipse
;;+ Ellipsoid point with uncertainty ellipse.
PointUncertaintyEllipse = {
\~GADShape
point: GeographicalCoordinates
uncertaintyEllipse: UncertaintyEllipse
confidence: Confidence
}
;;; Polygon
;;+ Polygon.
objecv5 = {
pointList: PointList
}
Polygon = {
\~GADShape
pointList: PointList
}
;;; PointAltitude
;;+ Ellipsoid point with altitude.
PointAltitude = {
\~GADShape
point: GeographicalCoordinates
altitude: Altitude
}
;;; PointAltitudeUncertainty
;;+ Ellipsoid point with altitude and uncertainty ellipsoid.
PointAltitudeUncertainty = {
\~GADShape
point: GeographicalCoordinates
altitude: Altitude
uncertaintyEllipse: UncertaintyEllipse
uncertaintyAltitude: Uncertainty
confidence: Confidence
}
;;; EllipsoidArc
;;+ Ellipsoid Arc.
EllipsoidArc = {
\~GADShape
point: GeographicalCoordinates
innerRadius: InnerRadius
uncertaintyRadius: Uncertainty
offsetAngle: Angle
includedAngle: Angle
confidence: Confidence
}
;;; GeographicalCoordinates
;;+ Geographical coordinates.
GeographicalCoordinates = {
lon: -180.0..180.0
lat: -90.0..90.0
}
;;; UncertaintyEllipse
;;+ Ellipse with uncertainty.
UncertaintyEllipse = {
semiMajor: Uncertainty
semiMinor: Uncertainty
orientationMajor: Orientation
}
;;; PointList
;;+ List of points.
PointList = [3*15 GeographicalCoordinates]
;;; Altitude
;;+ Indicates value of altitude.
Altitude = -32767.0..32767.0
;;; Angle
;;+ Indicates value of angle.
Angle = 0..360
;;; Uncertainty
;;+ Indicates value of uncertainty.
Uncertainty = float32 .ge 0
;;; Orientation
;;+ Indicates value of orientation angle.
Orientation = 0..180
;;; Confidence
;;+ Indicates value of confidence.
Confidence = 0..100
;;; InnerRadius
;;+ Indicates value of the inner radius.
InnerRadius = (0..327675)
;;; SupportedGADShapes
;;+ Indicates supported GAD shapes.
SupportedGADShapes = \"POINT\" / \"POINT_UNCERTAINTY_CIRCLE\" /
\"POINT_UNCERTAINTY_ELLIPSE\" / \"POLYGON\" / \"POINT_ALTITUDE\" /
\"POINT_ALTITUDE_UNCERTAINTY\" / \"ELLIPSOID_ARC\" /
\"LOCAL_2D_POINT_UNCERTAINTY_ELLIPSE\" /
\"LOCAL_3D_POINT_UNCERTAINTY_ELLIPSOID\" / text
;;; CellId
;;+ Unique identifier of a cell.
CellId = text
;;; TaId
;;+ Unique identifier of a tracking area.
TaId = text
;;; PlmnId
;;+ Unique identifier of a PLMN.
PlmnId = text
;;; MbmsSaId
;;+ Unique identifier of a MBMS serving area.
MbmsSaId = text
;;; MbsfnAreaId
;;+ Unique identifier of a MBSFN area.
MbsfnAreaId = text
### B.4.1.6 Media Types
See clause B.3.1.6.
###### ## Annex C (Informative): IANA UDP port registration form
This annex contains information to be provided to IANA for SEAL Off-network
Location Management Protocol (SLMP) UDP port registration. The following
information is to be used to register SLMP user port number and service name
in the \"IANA Service Name and Transport Protocol Port Number Registry\" and
specifically \"Service Name and Transport Protocol Port Number Registry\".
This registration form can be found at: https://www.iana.org/form/ports-
services.
+----------------------------------+----------------------------------+ | Assignee Name | \ | +==================================+==================================+ | Assignee E-mail | \ | +----------------------------------+----------------------------------+ | Contact Person | \ | +----------------------------------+----------------------------------+ | Contact E-mail | \ | +----------------------------------+----------------------------------+ | Resources required | Port number and service name | +----------------------------------+----------------------------------+ | Transport Protocols | UDP | +----------------------------------+----------------------------------+ | Service Code | | +----------------------------------+----------------------------------+ | Service Name | SLMP | +----------------------------------+----------------------------------+ | Desired Port Number | | +----------------------------------+----------------------------------+ | Description | Service Enabler Architecture | | | Layer for Verticals (SEAL) | | | Off-network Location Management | | | Protocol (SLMP) is a 3GPP | | | control protocol used by a SEAL | | | Location Management Client | | | (SLM-C) hosted on a User | | | Equipment (UE). SLMP facilitates | | | the SEAL location management | | | service functionality between | | | SLM-C hosted on UEs | | | communicating using IP using a | | | single physical network segment, | | | separated from Internet and any | | | other IP network. The network | | | segment is wireless network | | | segment and UEs are mobile | | | devices. | +----------------------------------+----------------------------------+ | Reference | 3GPP TS 24.545 | +----------------------------------+----------------------------------+ | Defined TXT keys | N/A | +----------------------------------+----------------------------------+ | If broadcast/multicast is used, | SLMP does not used | | how and what for? | broadcast/multicast. | +----------------------------------+----------------------------------+ | If UDP is requested, please | The number of SLMP messages that | | explain how traffic is limited, | need to be sent between SEAL | | and whether the protocol reacts | Location Management clients | | to congestion. | (SLM-C) depends upon the number | | | of members of the SEAL group. | | | SLMP employs a message control | | | mechanism which includes a | | | back-off mechanism to defer | | | transmission of another SLMP | | | message once a SLMP message is | | | received. SLMP implements a | | | timer-based mechanism once a | | | SLMP message is sent waiting for | | | SLMP message response. SLMP | | | controls the number of messages | | | transmitted within a certain, | | | configurable amount of time, | | | thus averting congestion. At | | | maximum a few SLMP messages per | | | second are expected in | | | communication between SLMP | | | clients. SLMP does not support | | | any reaction to congestion. | +----------------------------------+----------------------------------+ | If UDP is requested, please | SLMP is not used solely for | | indicate whether the service is | discovery of hosts supporting | | solely for the discovery of | this protocol. | | hosts supporting this protocol. | | +----------------------------------+----------------------------------+ | Please explain how your protocol | SLMP does not support | | supports versioning. | versioning. | +----------------------------------+----------------------------------+ | If your request is for more than | N/A | | one transport, please explain in | | | detail how the protocol differs | | | over each transport. | | +----------------------------------+----------------------------------+ | Please describe how your | SLMP does not support security. | | protocol supports security. Note | SLMP relies on the security | | that presently there is no IETF | mechanisms of the lower layers. | | consensus on when it is | | | appropriate to use a second port | | | for an insecure version of a | | | protocol. | | +----------------------------------+----------------------------------+ | Please explain why a unique port | As a general principle, 3GPP | | assignment is necessary as | protocols use assigned User | | opposed to a port in range | Ports, e.g. GTP-C uses UDP port | | (49152-65535) or existing port. | number 2123, GTP-U uses UDP port | | | number 2152, S1AP uses SCTP port | | | number 36412, X2AP uses SCTP | | | port number 36422, WLCP uses | | | 36411. A dynamic port number | | | (i.e. 49152 to 65535) cannot be | | | used for the SLMP because of the | | | nature of communication on a | | | single physical network segment, | | | separated from Internet and any | | | other IP network. The | | | requirement of SLMP to | | | continuously listen for incoming | | | messages needs an always active | | | listener port. There is no local | | | server that is administering the | | | use of emphemeral ports in the | | | SLMP architecture, so there | | | would be no way for one SLMP | | | client to know that a port is | | | already being used by another | | | SLMP client. | +----------------------------------+----------------------------------+ | Please explain the state of | Protocol standard definition. No | | development of your protocol. | implementation exists yet. | +----------------------------------+----------------------------------+ | If SCTP is requested, is there | N/A | | an existing TCP and/or UDP | | | service name or port number | | | assignment? If yes, provide the | | | existing service name and port | | | number. | | +----------------------------------+----------------------------------+ | What specific SCTP capability is | N/A | | used by the application such | | | that a user who has the choice | | | of both TCP (and/or UDP) and | | | SCTP ports for this application | | | would choose SCTP? See [RFC | | | 4960] | | | (http://www.iana.org/go/rfc4960) | | | section 7.1. | | +----------------------------------+----------------------------------+ | Please provide any other | This protocol is between the UEs | | information that would be | communicating using IP over a | | helpful in understanding how | single physical network segment, | | this protocol differs from | separated from Internet and any | | existing assigned services | other IP network. SEAL location | | | management service functionality | | | offered by the SLM clients | | | (SLM-C) hosted by the UEs is to | | | support vertical applications | | | (e.g. V2X) over the 3GPP system. | | | The need of listening for | | | incoming messages requires an | | | active listener port. | | | | | | This differs from existing | | | protocols in 3GPP where UDP | | | ports have been requested, as | | | those protocols have been either | | | between the UE and network or | | | between network elements. | +----------------------------------+----------------------------------+
NOTE: The UDP port number of SLMP has been assigned by 3GPP rather than IANA
using a 3GPP allocated port number as specfied by 3GPP TS 29.641 [34].
###### ## Annex C (normative): Counters
# C.1 General
This clause provides a brief description of the counters used in this
specification.
# C.2 Off-network counters
The table C.2-1 lists the counters used by off-network procedures, their
default upper limits and the action to take upon reaching the upper limit. The
counters start at 1.
Table C.2-1: Off-network counters
+----------------+----------------+----------------+----------------+ | Counter | Upper Limit | Associated | Upon reaching | | | | timer | the upper | | | | | limit | +================+================+================+================+ | C101 | Default value: | T101 | Stop timer | | | 5 | | T101. | | (waiting for | | | | | ack/resp) | Maximum value: | | | | | implementation | | | | | dependent | | | +----------------+----------------+----------------+----------------+
#