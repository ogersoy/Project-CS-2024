# Foreword
This Technical Specification has been produced by the 3rd Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
In the present document, modal verbs have the following meanings:
**shall** indicates a mandatory requirement to do something
**shall not** indicates an interdiction (prohibition) to do something
The constructions \"shall\" and \"shall not\" are confined to the context of
normative provisions, and do not appear in Technical Reports.
The constructions \"must\" and \"must not\" are not used as substitutes for
\"shall\" and \"shall not\". Their use is avoided insofar as possible, and
they are not used in a normative context except in a direct citation from an
external, referenced, non-3GPP document, or so as to maintain continuity of
style when extending or modifying the provisions of such a referenced
document.
**should** indicates a recommendation to do something
**should not** indicates a recommendation not to do something
**may** indicates permission to do something
**need not** indicates permission not to do something
The construction \"may not\" is ambiguous and is not used in normative
elements. The unambiguous constructions \"might not\" or \"shall not\" are
used instead, depending upon the meaning intended.
**can** indicates that something is possible
**cannot** indicates that something is impossible
The constructions \"can\" and \"cannot\" are not substitutes for \"may\" and
\"need not\".
**will** indicates that something is certain or expected to happen as a result
of action taken by an agency the behaviour of which is outside the scope of
the present document
**will not** indicates that something is certain or expected not to happen as
a result of action taken by an agency the behaviour of which is outside the
scope of the present document
**might** indicates a likelihood that something will happen as a result of
action taken by some agency the behaviour of which is outside the scope of the
present document
**might not** indicates a likelihood that something will not happen as a
result of action taken by some agency the behaviour of which is outside the
scope of the present document
In addition:
**is** (or any other verb in the indicative mood) indicates a statement of
fact
**is not** (or any other negative verb in the indicative mood) indicates a
statement of fact
The constructions \"is\" and \"is not\" do not indicate requirements.
# 1 Scope
The present document specifies the operations and information coding for the
Non-Access Stratum (NAS) layer protocol for supporting the Location Services
(LCS) in the NG-RAN.
The present document is applicable to the User Equipment (UE) and to the
Access and Mobility Management Function (AMF) or Location Management Function
(LMF) in the 5G System (5GS).
The present document is developed in accordance to the general principles
stated in 3GPP TS 23.273 [2].
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 23.273: \"5G System (5GS) Location Services (LCS); Stage 2\".
[3] 3GPP TS 24.501: \"Non-Access-Stratum (NAS) protocol for 5G System (5GS);
Stage 3\".
[4] 3GPP TS 37.355: \"LTE Positioning Protocol (LPP)\".
[5] 3GPP TS 24.080: \"Mobile radio interface layer 3 supplementary services
specification; Formats and coding\".
[6] 3GPP TS 29.572: \"5G System; Location Management Services; Stage 3\".
[7] 3GPP TS 38.305: \"Stage 2 functional specification of User Equipment (UE)
positioning in NG-RAN\".
[8] 3GPP TS 22.261: \"Service requirements for the 5G system; Stage 1\".
# 3 Definitions of terms, symbols and abbreviations
## 3.1 Terms
For the purposes of the present document, the terms given in 3GPP TR 21.905
[1] and the following apply. A term defined in the present document takes
precedence over the definition of the same term, if any, in 3GPP TR 21.905
[1].
For the purposes of the present document, the following terms and definitions
given in 3GPP TS 22.261 [8] apply:
**satellite NG-RAN**
**UE operating as PRU: From the UE perspective, a UE which supports PRU
functionality and operates as PRU. From the network perspective, the UE
allowed to operate as a PRU based on the UE subscription data and the PRU
state is ON.**
## 3.2 Symbols
## 3.3 Abbreviations
For the purposes of the present document, the abbreviations given in 3GPP TR
21.905 [1] and the following apply. An abbreviation defined in the present
document takes precedence over the definition of the same abbreviation, if
any, in 3GPP TR 21.905 [1].
5GCN 5G Core Network
5GS 5G System
AMF Access and Mobility Management Function
DL Downlink
IE Information Element
GMLC Gateway Mobile Location Centre
LCS Location Services
LDR Location Deferred Request
LMF Location Management Function
LPP LTE Positioning Protocol
MO-LR Mobile Originated Location Request
MT-LR Mobile Terminated Location Request
NAS Non-access Stratum
PRU Positioning Reference Unit
SNPN Stand-alone Non-Public Network
UE User Equipment
UL Uplink
# 4 General
## 4.1 Overview
### 4.1.1 NAS aspect
To enable transfer of Location Services (LCS) signaling messages between the
5G core network (5GCN) and the UE, two Payload container types are defined in
the downlink (DL NAS TRANSPORT message) and the uplink (UL NAS TRANSPORT
message or CONTROL PLANE SERVICE REQUEST message). The message protocol and
procedures are described in 3GPP TS 24.501 [3].
### 4.1.2 LCS aspect
LCS uses the defined payload container to transfer LCS signalling messages
between the UE and the network.
The corresponding LCS signaling messages include:
a) LTE Positioning Protocol (LPP) messages (see 3GPP TS 37.355 [4])
\- Both downlink and uplink LPP messages are supported
\- Routing information is transported as the Additional information IE in
UL/DL NAS TRANSPORT message for LPP messages (see 3GPP TS 24.501 [3])
b) Location services messages
\- Messages for MO-LR operations (see 3GPP TS 24.080 [5])
\- Messages for LocationNotification operations (see 3GPP TS 24.080 [5])
\- Messages for EventReport operations (see 3GPP TS 24.080 [5])
\- Messages for PeriodicTriggeredInvoke operations (see 3GPP TS 24.080 [5])
\- Messages for CancelDeferredLocation operations (see 3GPP TS 24.080 [5])
\- Messages for MSCancelDeferredLocation operations (see 3GPP TS 24.080 [5])
\- Messages for LocationPrivacySetting operations (see 3GPP TS 24.080 [5])
\- Messages for PRU-Association operations (see 3GPP TS 24.080 [5])
\- Routing information associated with the LMF is transported as the
Additional information IE in UL/DL NAS TRANSPORT message or CONTROL PLANE
SERVICE REQUEST message (see clause 5.2.2.6.1) for Location services messages
that are transported between the UE and the LMF (see 3GPP TS 24.501 [3])
The Routing information transported as the Additional Information IE can be
Routing identifier in the current specification, which includes immediate
routing identifier and deferred routing identifier. The immediate routing
identifier transported as the Additional Information IE is the Correlation ID,
which is allocated by the AMF and can be used in the UL/DL NAS TRANSPORT
message (see clause 5.2 and clause 5.3). The deferred routing identifier
transported as the Additional Information IE can be used in the UL NAS
TRANSPORT and CONTROL PLANE SERVICE REQUEST message for the AMF routing the
LCS messages to the particular LMF (see clause 5.2.2).
The messages for PeriodicTriggeredInvoke operations can be used to enable the
location events reporting over user plane connection, and the messages for
EventReport operations can be used for the cumulative event report, as
described in clause 6.16.1 of 3GPP TS 23.273 [2]. The location events
reporting over user plane connection is defined in 3GPP TS 24.572 [xx]).
## 4.2 LCS Support capabilities
### 4.2.1 UE support of LCS
The UE announces to the network its ability to support LCS notification
mechanism or LPP messages or both, using the 5GMM capability IE defined in
3GPP TS 24.501 [3].
The UE supporting LCS notification mechanism and LPP messages may support PRU
(defined in 3GPP TS 38.305 [7]). The UE's ability to support PRU is stored in
the UDM (see 3GPP TS 23.273 [2]) without any indication in 5GMM capability IE
defined in 3GPP TS 24.501 [3].
A UE accessing 5G network via satellite NG-RAN shall not operate as a PRU.
### 4.2.2 Network support of LCS
The network announces to the UE its ability to support LCS in 5GC using the
5GS network feature support IE defined in 3GPP TS 24.501 [3]. The information
is taken into account by the UE, in addition to UE\'s LCS capabilities, for
the UE to determine whether to initiate MO-LR procedure in NG-RAN as specified
in 3GPP TS 23.273 [3], clause 6.2.
NOTE: An SNPN can provide Location Services except for the cases of
interworking with EPC, roaming, and direct access to SNPN via non-3GPP access,
which are not supported in an SNPN.
# 5 Support of LCS signalling
## 5.1 General
This clause defines the NG-RAN LCS operations (clause 5.2) and the format and
coding of the messages (clause 5.3).
The messages defined in this clause can be transported in the UL/DL NAS
Transport message defined in 3GPP TS 24.501 [3].
## 5.2 LCS operations
### 5.2.1 Network initiated location services operations
#### 5.2.1.1 Supplementary Services Location Notification
##### 5.2.1.1.1 General
The supplementary services Location Notification operation enables the AMF to
trigger the end-user notification verification process on the UE using NAS
signalling. The supplementary services messages are transported using the DL
NAS Transport message and the UL NAS Transport message defined in 3GPP TS
24.501 [3]. UE Location Privacy Indication information may be included in
Location Notification Return Result to indicate whether subsequent LCS
requests will be allowed or disallowed by the UE. Figure 5.2.1.1.1.1
illustrates an example of the NAS signalling transport applicable to a 5GC-MT-
LR procedure for immediate or deferred location.
Figure 5.2.1.1.1.1: NAS signalling transport for Supplementary Services
Location Notification
NOTE: The optional Additional Information IE of the DL/UL NAS Transport
message is not included when the LCS Location Notification signalling is
transported in the Payload container.
##### 5.2.1.1.2 Normal operation
The network invokes a location notification procedure by sending a REGISTER
message containing an LCS-LocationNotification invoke component to the UE as
defined in 3GPP TS 24.080 [5]. This may be sent either to request verification
for a 5GC-MT-LR or to notify the UE about an already authorized 5GC-MT-LR.
In case of privacy verification, the UE shall respond to the request by
sending a RELEASE COMPLETE message containing the user\'s response and
optionally UE Location Privacy Indication information in a return result
component (see figure 5.2.1.1.2.1).
If the timer T(LCSN) defined in 3GPP TS 24.080 [5] expires in the network
before any response from the UE (e.g. due to no response from the user), the
network shall interpret this by applying the default treatment defined in 3GPP
TS 23.273 [2] (i.e. disallow location if barred by subscription or allow
location if allowed by subscription).
In the case of location notification, the UE shall terminate the dialogue
immediately by sending a RELEASE COMPLETE message containing a
LocationNotification return result.
If the UE is unable to process the request received from the network, it shall
return an error indication by sending a RELEASE COMPLETE message containing a
return error component. Error values are specified in 3GPP TS 24.080 [5].
**UE Network**
**REGISTER**
**\
**
**Facility (Return result = LCS-LocationNotification (verificationResponse,
locationPrivacyIndication, validTimePeriod))**
**RELEASE COMPLETE**
**\- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - \- -
- - - - - - - - - - - >**
**Facility (Return error (Error))**
**RELEASE COMPLETE**
**\- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - \- -
- - - - - - - - - - - >**
**Facility (Reject (Invoke_problem))**
**RELEASE COMPLETE**
**\ 
Facility (Return result = LCS-PeriodicTriggered)
RELEASE COMPLETE
\- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - \- -
- - - - - - - - - ->
Facility (Return error (Error))
RELEASE COMPLETE
\- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - \- -
- - - - - - - - - ->
Facility (Reject (Invoke_problem))
RELEASE COMPLETE
\ NOTE 1: The mappedLcs-QoS is obtained by the UE in 5GS and used for location
> service continuity from 5GS to EPS for periodic or triggered location event
> reporting.
NOTE 2: If h-gmlc-address as defined in 3GPP TS 24.080 [5] is received in the
LCS PeriodicTriggered Invoke message, it is used for a EPC-(H)GLMC during the
procedure of location service continuity between EPS and 5GS.
NOTE 3: If reportingIndaication as defined in 3GPP TS 24.080 [5] is received
in the LCS PeriodicTriggered Invoke message, it is used for Event Reporting
procedure whenthe UE is inside or outside the EventReportAllowedArea.
#### 5.2.1.4 Supplementary Services Cancel Deferred Location
##### 5.2.1.4.1 General
The supplementary services Cancel Deferred Location operation enables the AMF
to cancel ongoing periodic or triggered location in a target UE using NAS
signalling as described in 3GPP TS 23.273 [2] clause 6.3.3. The supplementary
services Cancel Deferred Location messages are transported using the DL NAS
Transport message and the UL NAS Transport message defined in 3GPP TS 24.501
[3]. Figure 5.2.1.4.1-1 illustrates an example of the NAS signalling
transport.
Figure 5.2.1.4.1.1: NAS signalling transport for Cancel Deferred Location
NOTE: The optional Additional Information IE of the DL/UL NAS Transport
message is not included when the LCS CancelDeferredLocation signalling is
transported in the Payload container.
##### 5.2.1.4.2 Normal operation
The AMF invokes a cancel deferred location procedure by sending a REGISTER
message containing an LCS-CancelDeferredLocation invoke component to the UE as
defined in 3GPP TS 24.080 [5].
The UE shall terminate the ongoing periodic or triggered location if this can
be identified from the information in the LCS-CancelDeferredLocation invoke
component.
The UE shall then return a RELEASE COMPLETE message containing an LCS-
CancelDeferredLocation return result component (see figure 5.2.1.4.2.1).
If the UE is unable to process the request received from the network or cannot
identify the ongoing periodic or triggered location to be terminated, it shall
return an error indication by sending a RELEASE COMPLETE message containing a
return error component. Error values are specified in 3GPP TS 24.080 [5].
**UE Network**
REGISTER
\
Facility (Return result = LCS-CancelDeferredLocation)
RELEASE COMPLETE
\- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - \- -
- - - - - - - - - ->
Facility (Return error (Error))
RELEASE COMPLETE
\- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - \- -
- - - - - - - - - ->
Facility (Reject (Invoke_problem))
RELEASE COMPLETE
\**
**Facility (Return result = PRU-disassociation)**
**Figure 5.2.1.5.2.1: Network initiated PRU disassociation procedure**
Editor's Note: It is FFS whether return error message is needed for PRU
disassociation procedure.
### 5.2.2 Mobile initiated location services operations
#### 5.2.2.1 Mobile Originiated Location Request(MO-LR)
##### 5.2.2.1.1 General
The supplementary services MO-LR operation enables the UE to launch MO
positioning session or request location assistance data using NAS signaling.
The NAS signaling are transported using the DL NAS Transport message and the
Uplink NAS Transport message defined in 3GPP TS 24.501 [3]. Figure 5.2.2.1.1-1
illustrates an example of the NAS signaling transport for an MO-LR session.
Figure 5.2.2.1.1-1: NAS signaling transport for MO-LR
NOTE: The optional Additional Information IE of the UL/DL NAS TRANSPORT
message is not included when the MO-LR signaling is transported in the Payload
container.
##### 5.2.2.1.2 Normal operation
The UE invokes a MO-LR by sending a REGISTER message to the network containing
a LCS-MOLR invoke component. SS Version Indicator value 1 or above shall be
used.
The receiving network entity shall initiate the handling of location request
in the network. The network shall pass the result of the location procedure to
the UE by sending a FACILITY message to the UE containing a LCS-MOLR return
result component. When location estimate is kept in the network entity and
this information satisfies the requested accuracy and the requested maximum
age of location, then the network may reuse this information and the
positioning measurement procedure may be skipped.
The network shall pass the result of the location procedure to the UE only if
the location estimate is given in a format that the UE supports, as indicated
by either the presence (and content) or the absence of the parameter
supportedGADShapes, which may be sent by the UE in the LCS-MOLR operation.
The UE may terminate the dialogue by sending a RELEASE COMPLETE message in the
case of single location request (see figure 5.2.2.1.1-1). The UE may also
initiate another location request operation by sending a FACILITY message to
the network containing a LCS-MOLR invoke component (see figure 5.2.2.1.1-2).
After the last location request operation the UE shall terminate the dialogue
by sending a RELEASE COMPLETE message.
If the network is unable to successfully fulfil the request received from the
UE (e.g. to provide a location estimate or location assistance information),
it shall clear the transaction by sending a RELEASE COMPLETE message
containing a return error component. Error values are specified in 3GPP TS
24.080 [5]. If the network is unable to provide a location estimate due to
lack of support in the UE for the type of shape of the location estimate, then
it shall use the error Facility Not Supported.
If the network has returned a result to the UE in a FACILITY message but,
after some PLMN administered time period has elapsed, has not received either
a new location request operation in a FACILITY message or a RELEASE COMPLETE
message from the UE, the network may clear the transaction by sending a
RELEASE COMPLETE message.
During the MO-LR operation the UE shall run a timer T(LCSL). This timer is
started when the operation is sent, and stopped when a response is received
from the network. If this timer expires the UE shall assume that the operation
has failed, and may terminate the dialogue by sending a RELEASE COMPLETE
message, and shall inform the user of the failure.
**UE Network**
REGISTER
\------------------------------------------------------------------------------------------------------------------------>
Facility (Invoke = LCS-MOLR (molr-Type, lcs-QoS, lcsClientExternalID, mlc-
Number, supportedGADShapes, lcsServiceTypeID, ageOfLocationInfo, locationType,
pseudonymIndicator, h-gmlc-address,multiplePositioningProtocolPDUs,
scheduledLocTime))
FACILITY
\
Figure 5.2.2.1.1-1: Single mobile originated location request
**\ **
**UE Network**
REGISTER
\------------------------------------------------------------------------------------------------------------------------>
Facility (Invoke = LCS-MOLR Request (molr-Type, lcs-QoS, lcsClientExternalID,
mlc-Number, supportedGADShapes, lcsServiceTypeID, ageOfLocationInfo,
locationType, pseudonymIndicator, h-gmlc-address,
multiplePositioningProtocolPDUs, scheduledLocTime))
FACILITY
\
Facility (Invoke = LCS-MOLR (molr-Type, lcs-QoS, lcsClientExternalID, mlc-
Number, supportedGADShapes, lcsServiceTypeID, ageOfLocationInfo, locationType,
pseudonymIndicator, h-gmlc-address, multiplePositioningProtocolPDUs))
FACILITY
\
Figure 5.2.2.1.1-2: Multiple mobile originated location requests
NOTE 1: Only the following IEs defined in MO-LR operations in 3GPP TS 24.080
[5] are used for NG-RAN LCS:
\- molr-Type
\- lcs-QoS
\- lcsServiceTypeID
\- ageOfLocationInfo
\- locationType
\- mlc-Number
\- lcsClientExternalID
\- pseudonymIndicator
\- supportedGADShapes
\- multiplePositioningProtocolPDUs
\- locationEstimate
\- add-LocationEstimate
\- h-gmlc-address
\- decipheringKeys
\- scheduledLocTime
\- velocityEstimate
NOTE 2: multiplePositioningProtocolPDUs IE is added to the MO-LR Request to
allow for passing multiple UE positioning information LPP messages (e.g. UE
location measurements or UE capabilities) to the LMF for NG-RAN LCS. Its ASN.1
description is given in 3GPP TS 24.080 [5], where the maximum number of LPP
messages is specified. There is one or more types of multiple LPP messages can
be encapsulated in one multiplePositioningProtocolPDUs IE.
#### 5.2.2.2 UE initiated Cancel Deferred Location
##### 5.2.2.2.1 General
The supplementary services MSCancelDeferredLocation operation enables the UE
to cancel ongoing periodic or triggered location in a target LMF using NAS
signalling as described in 3GPP TS 23.273 clause 6.3.2 [2]. The supplementary
services MCancelDeferredLocation messages are transported using the UL NAS
TRANSPORT message and the DL NAS TRANSPORT message defined in 3GPP TS 24.501
[3]. The deferred routing identifier in the Additional information IE of the
UL NAS TRANSPORT message for the cancellation of periodic or triggered
location event reporting can be an LMF ID.
Figure 5.2.2.2.1-1: NAS signaling transport for UE initiated Cancel Deferred
Location
##### 5.2.2.2.2 Normal operation
The UE invokes a cancel deferred location procedure by sending a REGISTER
message containing a LCS-MSCancelDeferredLocation invoke component to the LMF
as defined in 3GPP TS 24.080 [5].
The LMF shall terminate the ongoing periodic or triggered location if this can
be identified from the information in the LCS-MSCancelDeferredLocation invoke
component.
The LMF shall then return a RELEASE COMPLETE message containing an LCS-
MSCancelDeferredLocation return result component (see Figure 5.2.2.2.2-1).
NOTE: If the UE has requested the cancellation of the deferred location
procedure for the location events reporting over user plane connection and the
UE receives the acknowledgment of the cancellation from the LMF, the UE
releases the user plane connection to the LCS Client or AF if the release has
not been yet initiated.
If the LMF is unable to process the request received from the UE or can not
identify the ongoing periodic or triggered location to be terminated, it shall
return an error indication by sending a RELEASE COMPLETE message containing a
return error component. Error values are specified in 3GPP TS 24.080 [5].
**UE Network**
REGISTER
\------------------------------------------------------------------------------------------------------------------------>
Facility (Invoke = LCS-MSCancelDeferredLocation (referenceNumberExt, h-gmlc-
callBackUri))
RELEASE COMPLETE
\
Figure 5.2.2.2.2-1: Cancel Deferred Location
NOTE: Only the following IEs defined in MSCancelDeferredLocation operations in
3GPP TS 24.080 [5] are used for NG-RAN LCS:
\- referenceNumberExt
\- h-gmlc-callBackUri
#### 5.2.2.3 UE initiated Positioning Information Transport
The UE sends LPP message and the associated Routing identifier in the UL NAS
Transport message (refer to 3GPP TS 24.501 [3] and 3GPP TS 23.273 [2] clause
6.11.1). Figure 5.2.2.3-1 illustrates an example of the NAS signalling
transport for uplink LPP messages.
Figure 5.2.2.3-1: NAS signalling transport for uplink LPP messages
#### 5.2.2.4 UE initiated Event Reporting Procedure
##### 5.2.2.4.1 General
The supplementary services EventReport operation enables the UE to report the
periodic or triggered location event invoked by the LMF via LCS
PeriodicTriggered Invoke operation as described in clause 6.3.1 of 3GPP TS
23.273 [2] when some certain events are detected in the UE. The UE sends
supplementary services EventReport message when the UE is inside or outside
the EventReportAllowedArea based on the reportingIndication if received in LCS
PeriodicTriggered Invoke message as described in clause 5.2.1.3. The
supplementary services EventReport message is transferred to the LMF via the
serving AMF in a UL NAS TRANSPORT message defined in 3GPP TS 24.501 [3]. A
response from the LMF may be returned to the UE via the serving AMF and be
transferred to the UE in a DL NAS TRANSPORT message. The deferred routing
identifier in the Additional information IE of the UL NAS TRANSPORT for
reporting the periodic or triggered location event can be an LMF ID. If the
serving LMF is changed, the deferred routing identifier may be included in the
EventReport Acknowledgement message (refer to clause 6.3.1 of 3GPP TS 23.273
[2]).
The supplementary services EventReport message enables the UE to send the
cumulative event report over control plane for the periodic or triggered
location event with user plane connection invoked by the LMF as described in
clause 6.16.1 of 3GPP TS 23.273 [2]. If the cumulative event report timer is
expired or the maximum number of events reporting counter is reached, based on
the received value from the LMF, the UE sets the eventType to active status of
location reporting over user plane connection and includes the number of
location reporting over user plane connection for the cumulative event report
in the supplementary services EventReport message as defined in 3GPP TS 24.080
[5].
Editor\'s Note: (CR 0015, eLCS_Ph3) The IE for cumulative event report e.g.,
the number of location reporting over user plane connection, needs further
alignment with 3GPP TS 24.080 [5].
Figure 5.2.2.4.1-1 illustrates an example of the NAS signalling transport for
EventReport messages,
Figure 5.2.2.4.1-1: NAS signalling transport for EventReport messages
##### 5.2.2.4.2 Normal operation
The UE invokes an EventReport procedure by sending a REGISTER message
containing an EventReport component to the LMF as defined in 3GPP TS 24.080
[5].
The LMF shall return a supplementary services acknowledgement of event report
if it can handle this event report.
The LMF shall then return a RELEASE COMPLETE message containing an EventReport
Acknowledge component (see Figure 5.2.2.4.2-1).
If the LMF is unable to process the request received from the UE or can not
identify the ongoing periodic or triggered location to be terminated, it shall
return an error indication by sending a RELEASE COMPLETE message containing a
return error component. Error values are specified in 3GPP TS 24.080 [5].
**UE Network**
REGISTER
\------------------------------------------------------------------------------------------------------------------------>
Facility (Invoke = LCS-EventReport (eventType, referenceNumberExt, h-gmlc-
callBackUri, lcs-QoS, locationInfo, supportedGADShapes,
multiplePositioningProtocolPDUs, terminationCause,
locationReportingOverUPCounter))
RELEASE COMPLETE
\
Figure 5.2.2.4.2-1: EventReport
NOTE: Only the following IEs defined in EventReport operations in 3GPP TS
24.080 [5] are used for NG-RAN LCS:
\- eventType
\- referenceNumberExt
\- h-gmlc-callBackUri
\- lcs-QoS
\- locationInfo
\- supportedGADShapes
\- multiplePositioningProtocolPDUs
\- terminationCause
\- locationReportingOverUPCounter
#### 5.2.2.5 UE Location Privacy Setting Procedure
##### 5.2.2.5.1 General
The supplmentary services LocationPrivacySetting operation enables the UE to
update the UE Location Privacy Indication information via UE Location Privacy
Setting procedure as described in clause 6.12.1 of 3GPP TS 23.273 [2] when the
UE has generated or updated the UE Location Privacy Indication. The
supplementary services LocationPrivacySetting message is transferred to the
serving AMF in a UL NAS TRANSPORT message and an acknowledgement from the
serving AMF may be returned to the UE in DL NAS TRANSPORT message defined in
3GPP TS 24.501 [3].
Figure 5.2.2.5.1-1 illustrates an example of the NAS signalling transport for
UE Location Privacy Setting procedure,
Figure 5.2.2.5.1-1: NAS signalling transport for LocationPrivacySetting
messages
##### 5.2.2.5.2 Normal operation
The UE invokes a Location Privacy Setting procedure by sending a REGISTER
message containing an LocationPrivacySetting message as defined in 3GPP TS
24.080 [5]. UE\'s Location Privacy Indication information is included in
LocationPrivacySetting message.
The AMF shall transfer the UE Location Privacy Indication information in
LocationPrivacySetting message to UDM and response a supplementary services
acknowledgement of LocationPrivacySetting message.
The AMF shall then return a RELEASE COMPLETE message containing a
LocationPrivacySetting Acknowledgement component (see figure 5.2.2.5.2-1) if
it can handle this LocationPrivacySetting message correctly.
If the AMF is unable to process the request received from the UE or can not
identify that provisioning the parameters of UE Location Privacy Setting
information to UDM is executed successfully, it shall return an error
indication by sending a RELEASE COMPLETE message containing a return error
component. Error values are specified in 3GPP TS 24.080 [5].
**UE Network**
REGISTER
\------------------------------------------------------------------------------------------------------------------------>
Facility (Invoke = LCS-LocationPrivacySetting (locationPrivacyIndication,
validTimePeriod, eventReportExpectedArea, areaUsageIndication)
RELEASE COMPLETE
\
Figure 5.2.2.5.2-1: LocationPrivacySetting
NOTE: Only the following IEs defined in LocationPrivacySetting operations in
3GPP TS 24.080 [5] are used for NG-RAN LCS:
\- locationPrivacyIndication
\- validTimePeriod
\- eventReportExpectedArea
\- areaUsageIndication
#### 5.2.2.6 UE initiated Event Reporting Procedure for Low Power Event
Reporting and Triggered 5GC-MT-LR
##### 5.2.2.6.1 General
The supplementary services EventReport operation enables the UE to report the
periodic or triggered location event invoked by the LMF via LCS
PeriodicTriggered Invoke operation as described in clause 6.7.1 of 3GPP TS
23.273 [2] when certain events are detected in the UE and when the UE supports
and the LMF allows the use of Control Plane CIoT 5GS Optimisation. The
supplementary services EventReport message is transferred to the LMF via the
serving AMF in a CONTROL PLANE SERVICE REQUEST message defined in 3GPP TS
24.501 [3]. A response from the LMF may be returned to the UE via the serving
AMF and be transferred to the UE in a DL NAS TRANSPORT message defined in 3GPP
TS 24.501 [3]. The deferred routing identifier in the Additional information
IE of the CONTROL PLANE SERVICE REQUEST message for reporting the periodic or
triggered location event can be an LMF ID. If the serving LMF is changed, the
deferred routing identifier may be included in the EventReport Acknowledgement
message (refer to clause 6.7.2 of 3GPP TS 23.273 [2]).
Figure 5.2.2.6.1-1 illustrates an example of the NAS signalling transport for
EventReport messages,
Figure 5.2.2.6.1-1: NAS signalling transport for EventReport messages using
Low Power Event Reporting and Triggered 5GC-MT-LR
##### 5.2.2.6.2 Normal operation
Normal operation is as described for the UE initiated Event Reporting
Procedure in clause 5.2.2.4.2.
5.2.2.7 PRU association procedure
5.2.2.7.1 General
The supplementary services PRU association operation enables the PRU to
associate with a serving LMF by using NAS signalling as decribed in clause
6.17.1 of 3GPP TS 23.273 [2]. The NAS signaling are transported using the DL
NAS Transport message and the Uplink NAS Transport message defined in 3GPP TS
24.501 [3].
The supplementary services PRU association operation also enables to perform a
PRU Association update to inform the serving LMF of the continued availability
of the PRU or to inform the serving LMF of change to the location of the PRU
(e.g. a change of tracking area or change of serving AMF) or a change of the
PRU positioning capabilities.
Figure 5.2.2.7.1-1 illustrates an example of the NAS signaling transport for a
PRU association procedure.
**Figure 5.2.2.7.1-1: NAS signalling transport for PRU association procedure**
5.2.2.7.2 Normal operation
The UE operating as PRU invokes a PRU association procedure by sending a
REGISTER message containing a PRU-association invoke component to the serving
LMF as defined in 3GPP TS 24.080 [5]. The PRU-association invoke component
shall include a type for the PRU association request whether it is initial PRU
association request or PRU association update, and the positioning
capabilities of the UE operating as PRU, and optionally the location
information if available. The UE operating as PRU may include the pre-
configured routing ID for an initial association, or the routing ID received
from the previous PRU association procedure in the UL NAS TRANSPORT message.
> Editor's Note: It is FFS the details of the UE operating as PRU's
> positioning capabilities.
The LMF shall return a RELEASE COMPLETE message containing a PRU-association
return result component if the LMF accepts the PRU association. The PRU-
association return result component shall indicate the conditions for
performing PRU association updates with the serving LMF. The conditions for
performing PRU association update may include a periodic PRU association
update timer and PRU association update based on a change of PRU location,
change of PRU TAI, change of serving AMF.
If the LMF is unable to process the PRU-association invoke component received
from the UE operating as PRU as specified in clause 6.17.1 of 3GPP TS 23.273
[2], the LMF shall return a RELEASE COMPLETE message containing reject
component. The reject component may include routing ID of the serving LMF if
new LMF is selected to serve the UE operating as PRU.
**UE Network**
**REGISTER**
**\------------------------------------------------------------------------------------------------------------------------
>**
**Facility (invoke = PRU association (PRUassociationType,
positioningCapabilities, locationOfPRU)**
**RELEASE COMPLETE**
**\
**
**Facility (invoke = PRU-disassociation (AckIndication))**
RELEASE COMPLETE
\<\- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
* * *
Facility (Return error (Error))
**RELEASE COMPLETE**
**\ <\- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - \- -
- - - - - - - - - - - -**
**Facility (return result = PRU-disassocation)**
**Figure 5.2.2.8.2-1: UE initiated PRU disassociation procedure**
## 5.3 LCS message and coding
### 5.3.1 Messages for Location services operations
The LCS message format and information elements coding for the MO-LR,
LocationNotification, EventReport, PeriodicTriggeredInvoke,
CancelDeferredLocation and LocationPrivacySetting operations (clause 5.2) are
defined in 3GPP TS 24.080 [5] for the following messages:
\- Register message
\- Facility message
\- Release Complete message
### 5.3.2 Messages for LTE Positioning Protocol (LPP)
#### 5.3.2.1 Downlink Positioning Information Transport using LPP messages
The AMF shall set the Payload container type to \"LPP message container\" in
the DL NAS TRANSPORT message.
The AMF includes a Routing identifier in the Additional information IE of the
DL NAS TRANSPORT message which identifies the LMF and the positioning session
between the AMF and LMF when a positioning session is being used.
The Routing identifier is the Correlation ID, which is defined in 3GPP TS
29.572 [6], so that the AMF can map the Routing identifier to the LMF and the
Correlation identifier when the AMF receives a UL NAS TRANSPORT message
including the responding LPP message.
#### 5.3.2.2 Uplink Positioning Information Transport using LPP messages
The UE shall set the Payload container type to \"LPP message container\" in
the UL NAS TRANSPORT message.
The UE includes a Routing identifier received in the Additional Information IE
of the DL NAS TRANSPORT message in the Additional Information IE of the UL NAS
TRANSPORT message. This association of the Routing Identifier is provided at
the LPP level: the UL NAS TRANSPORT message carries an LPP message that is a
response to or instigated by the LPP message in the DL NAS TRANSPORT message.
The Routing identifier is the Correlation ID, which is defined in 3GPP TS
29.572 [6], so that the AMF can map the Routing identifier to the Correlation
identifier when the AMF receives the UL NAS TRANSPORT message.
#