# Foreword
This Technical Specification has been produced by the 3rd Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document specifies the 5G Media Streaming (5GMS) architecture. The
5GMS supported services include MNO and third-party Downlink Media Streaming
Services, and MNO and third-party Uplink Media Streaming Services. The 5GMS
architecture supports related network and UE functions and APIs, backwards
compatible functions for EUTRAN deployments (with and without MBMS) and 5G
specific features.
NOTE: Support of 5G Media Streaming over MBMS with 5GC is not considered in
the current version of the present document.
The 5GMS architecture is functionally divided into independent components
enabling different deployments with various degrees of integration between 5G
MNOs and Content Providers. It is specified as a set of extensions to TS
23.501 \"System Architecture for the 5G System\".
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or non‑specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 23.501: \"System architecture for the 5G System (5GS)\".
[3] 3GPP TS 23.502: \"Procedures for the 5G System (5GS)\".
[4] 3GPP TS 23.503: \"Policy and charging control framework for the 5G System
(5GS); Stage 2\".
[5] Void
[6] 3GPP TS 26.307: \"Presentation layer for 3GPP services\".
[7] 3GPP TS 26.247: \"Transparent end-to-end Packet-switched Streaming Service
(PSS); Progressive Download and Dynamic Adaptive Streaming over HTTP (3GP-
DASH)\".
[8] 3GPP TS 26.234: \"Transparent end-to-end Packet-switched Streaming Service
(PSS); Protocols and codecs\".
[9] 3GPP TS 23.003: \"Technical Specification Group Core Network and
Terminals; Numbering, addressing and identification\".
[10] 3GPP TS 28.530: \"Management and orchestration; Concepts, use cases and
requirements\".
[11] 3GPP TS 28.531: \"Management and orchestration; Provisioning\".
[12] 3GPP TS 28.541: \"Management and orchestration; 5G Network Resource Model
(NRM); Stage 2 and stage 3\".
[13] 3GPP TS 23.222: \"Common API Framework for 3GPP Northbound APIs\".
[14] IETF RFC 1034: \"Domain names - concepts and facilities\".
[15] 3GPP TS 23.548: \"5G System Enhancements for Edge Computing; Stage 2\".
[16] 3GPP TS 23.558: \"Architecture for enabling Edge Applications\".
[17] 3GPP TS 28.538: \"Management and orchestration; Edge Computing
Management\".
[18] 3GPP TS 23.246: \"Multimedia Broadcast/Multicast Service (MBMS);
Architecture and functional description\".
[19] 3GPP TS 26.346: \"Multimedia Broadcast/Multicast Service (MBMS);
Protocols and codecs\".
[20] 3GPP TS 26.347: \"Multimedia Broadcast/Multicast Service (MBMS);
Application Programming Interface and URL\".
[21] 3GPP TS 26.348: \"Northbound Application Programming Interface (API) for
Multimedia Broadcast/Multicast Service (MBMS) at the xMB reference point\".
[22] 3GPP TS 26.531: \"Data collection and reporting; General description and
architecture\".
[23] 3GPP TS 23.288: \"Architecture enhancements for 5G System (5GS) to
support network data analytics services\".
[24] 3GPP TS 27.007: \"AT command set for User Equipment (UE)\".
[25] CTA-5005: \"Web Application Video Ecosystem -- DASH-HLS Interoperability
Specification\".
[26] 3GPP TS 26.511: \"5G Media Streaming (5GMS); Profiles, Codecs and
Formats\".
[27] ISO/IEC 23000-19: \"Information Technology Multimedia Application Format
(MPEG-A) -- Part 19: Common Media Application Format (CMAF) for segmented
media\".
[28] IETF RFC 8216: \"HTTP Live Streaming\".
[29] ISO/IEC 23009-1: \"Information Technology -- Dynamic Adaptive Streaming
Over HTTP (DASH) -- Part 1: Media Presentation Description and Segment
Formats\".
[30] 3GPP TS 26.502: \"5G Multicast-Broadcast User Service Architecture\".
[31] Void.
# 3 Definition of terms, symbols and abbreviations
## 3.1 Terms
For the purposes of the present document, the terms given in TR 21.905 [1] and
the following apply. A term defined in the present document takes precedence
over the definition of the same term, if any, in TR 21.905 [1].
**5GMS System: An assembly of Application Functions, Application Servers and
interfaces from the 5G Media Streaming architecture that support either
downlink media streaming services or uplink media streaming services, or
both.**
NOTE 1: The components of a 5GMS System may be provided by an MNO as part of a
5GS and/or by a 5GMS Application Provider.
**5GMS Application Provider:** A party that interacts with functions of the
5GMS System and supplies a 5GMS-Aware Application that interacts with
functions of the 5GMS System.
**5GMS-Aware Application: Application in the UE, provided by the 5GMS
Application Provider, that contains the service logic of the 5GMS application
service, and interacts with other 5GMS Client and Network functions via the
interfaces and APIs defined in the 5GMS architecture.**
NOTE 2: **Functionality of the 5GMS-Aware Application is outside the scope of
this specification**.
NOTE 3: A 5GMS-Aware Application associated with the delivery of either a
downlink or uplink related 5GMS service is referred to as a 5GMSd-Aware
Application or a 5GMSu-Aware Application, respectively.
**5GMS Client: A UE function that is either a 5GMSd Client or a 5GMSu Client,
or both.**
**5G Media Streaming Client for downlink (5GMSd Client):** UE function that
includes at least a 5G Media Streaming Player and a Media Session Handler for
downlink streaming and that may be accessed through well-defined
interfaces/APIs.
**5G Media Streaming Client for uplink (5GMSu Client):** **Originator of 5GMSu
service that includes at least a Media Streamer and a Media Session Handler
for uplink streaming and that may be accessed through well-defined
interfaces/APIs.**
**5GMSu Media Streamer: UE function that enables uplink delivery of streaming
media content to an Application Server function of the 5GMS Application
Provider, and which interacts with both the 5GMSu-Aware Application for media
capture and subsequent streaming, and the Media Session Handler for media
session control.**
NOTE 4: The 5GMSu Media Streamer receives a Media Streamer Entry to initiate
an uplink streaming session.
NOTE 5: The 5GMSu Media Streamer captures the media on the provided input
devices. The 5GMSu Media Streamer exposes some basic controls such as capture,
pause, and stop to the 5GMSu-Aware Application.
**Dynamic policy:** A Dynamic PCC Rule (c.f. TS 23.503 [4]) for an uplink or
downlink application flow during a media session.
**Egest Session** : An uplink media streaming session from the 5GMSu AS
towards the 5GMSu Application Provider.
**Ingest Session:** A session to upload the media content into a 5GMSd AS.
**Policy Template:** A collection of (semi-static) PCF/NEF API parameters
which are specific to the 5GMS Application Provider and also the resulting PCC
Rule.
**Policy Template Id** : Identifies the desired policy template, which is used
by 5GMSd AF to select the appropriate PCF/NEF API towards the 5G System so
that the PCF can compile the desired PCC Rule.
**Media Entry Point:** A Media Player Entry for downlink media streaming or a
Media Streamer Entry for uplink media streaming intended to be consumed by a
5GMS Media Stream Handler.
**Media Player Entry:** A document or a pointer to a document that defines a
downlink media streaming presentation e.g. MPD for DASH content or URL to a
video clip file intended to be consumed by a 5GMSd Media Player.
**Media Session Handler:** UE function that communicates with the 5GMS AF in
order to establish and control the delivery of a streaming media session in
the downlink or uplink direction, and which also exposes APIs to the 5GMS-
Aware Application and to the Media Player (for downlink streaming) or the
Media Streamer (for uplink streaming).
**Media Streamer Entry:** A pointer (e.g. in the form of a URL) that defines
an entry point of an uplink media streaming session intended to be consumed by
a 5GMSu Media Streamer.
**media streaming session: A session initiated by a 5GMS-Aware Application
that involves one or more media streams being delivered between the 5GMS AS
and the 5GMS Client via reference point M4.**
**presentation entry:** A document or a pointer to a document that defines an
application presentation e.g. an HTML5 document as defined in e.g. TS 26.307
[6].
**Provisioning Session: A data structure supplied at interface M1 by a 5GMS
Application Provider that configures the 5GMS features relevant to a set of
5GMS-Aware Applications.**
**5GMSd Media Player:** UE function that enables playback and rendering of a
media presentation based on a Media Player Entry and exposing some basic
controls such as play, pause, seek, stop to the 5GMSd-Aware Application.
NOTE 6: A 5GMSd Media Player is expected to include a Media Access Client,
Media Decoders, Media rendering/presentation, and possibly also a DRM Client a
Consumption Measurement and Logging Client and a Metrics Measurement and
Logging Client. The 5GMSd Media Player\'s Media Access Client receives a Media
Player Entry. The 5GMSd Media Player renders the media on the provided output
devices, such as a display in case of video.
NOTE 7: The 5GMSd Media Player is functionally similar to the combination of a
TS 26.247 [7] 3GP-DASH client and a TS 26.234 [8] PSS media decoder and
renderer.
**Service Access Information** : Set of parameters and addresses that are
needed by a 5GMS Client to activate the reception of a downlink media
streaming session or the transmission on an uplink media streaming session,
perform dynamic policy invocation, consumption reporting and/or metrics
reporting, and request AF-based network assistance.
**Service and Content Discovery: Functionality and procedures provided by a
5GMSd Application Provider to a 5GMS-Aware Application that enables the end
user to discover the available streaming service and content offerings and
select a specific service or content item for access.**
NOTE 8: The Service and Content Discovery functionality and procedures are
outside the scope of this specification.
**Service Announcement** : Procedures conducted between the 5GMS-Aware
Application and the 5GMS Application Provider such that the 5GMS-Aware
Application is able to obtain 5GMS Service Access Information, either directly
or in the form of a reference to that information.
**Service Data Flow:** As defined in TS 23.503 [4] (\"An aggregate set of
packet flows carried through the UPF that matches a service data flow
template\").
**Service Data Flow Description:** A set of parameters and/or parameter ranges
used by the 5GMS AF to create a Service Data Flow Template.
**Service Description** : A set of parameters and/or parameter ranges
describing the requirements of the streaming service, used by the Media Stream
Handler to follow the service requirements and associated with a Service
Operation Point.
**Service Operation Point** : An abstract set of parameters and/or parameter
ranges defining service requirements for media streaming that may be supported
by a Dynamic Policy in the 5GMS System and described as part of a Service
Description or provided as information to the Media Stream Handler.
**third party player:** Part of an application that uses APIs to exercise
selected 5GMSd functions to play back media content.
NOTE 9: Such APIs are for example defined in TS 26.307 [6] when using the
Media Source Extensions for media playback. This type of player is downloaded
by or built into an application, or it is downloaded with the Presentation
Entry (e.g. as a JavaScript library).
**third party uplink streamer:** Part of an application that uses APIs to
exercise selected 5GMSu functions to capture and stream media content.
NOTE 10: This type of streamer is typically implemented as downloadable
software.
## 3.2 Symbols
Void.
## 3.3 Abbreviations
For the purposes of the present document, the abbreviations given in TR 21.905
[1] and the following apply. An abbreviation defined in the present document
takes precedence over the definition of the same abbreviation, if any, in TR
21.905 [1].
5GC 5G Core Network
5GMS 5G Media Streaming
5GMSd 5G Media Streaming downlink
5GMSu 5G Media Streaming uplink
5GS 5G Systems
AF Application Function
ABR Adaptive Bit Rate
AMF Access and Mobility Function
API Application Programming Interface
App Application
AS Application Server
CAPIF Common API Framework
CDN Content Delivery Network
DASH Dynamic and Adaptive Streaming over HTTP
DN Data Network
DNAI Data Network Application Identifier
DNN Data Network Name
DRM Digital Rights Management
EPC Evolved Packet Core
EPS Evolved Packet System
EUTRAN Evolved Universal Terrestrial Radio Access Network
FLUS Framework for Live Uplink Streaming
FQDN Fully-Qualified Domain Name
GPU Graphics Processing Unit
GSM Global System for Mobile communication
HPLMN Home Public Land Mobile Network
HTTP HyperText Transfer Protocol
HTTPS HyperText Transfer Protocol Secure
LTE Long-Term Evolution
MBMS Multimedia Broadcast Multicast System
MNO Mobile Network Operator
MPD Media Presentation Description
MSISDN Mobile Station International Subscriber Directory Number
NA Network Assistance
NEF Network Exposure Function
NR New Radio
NSMF Network Slice Management Function
NSSAI Network Slice Selection Assistance Information
NSSP Network Slice Selection Policy
OAM Operations, Administration and Maintenance
OTT Over-The-Top
PCC Policy and Charging Control
PCF Policy and Charging Function
PDU Packet Data Unit
PSS Packet-switched Streaming Service
RAN Radio Access Network
SBA Service based Architecture
SLA Service Level Agreement
TCP Transmission Control Protocol
UPF User Plane Function
URL Unique Resource Identifier
URSP UE Route Selection Policy
# 4 Media Streaming architecture
## 4.0 Media Streaming features (informative)
### 4.0.1 Introduction
This clause defines a set of high-level features for supporting enhanced media
streaming in the 5G System. The functional architecture of this 5G Media
Streaming (5GMS) System is defined in clause 4.1 and is further specialised
for downlink media streaming (clause 4.2) and uplink media streaming (clause
4.3). Procedures for downlink media streaming are defined in clause 5 and
those for uplink media streaming in clause 6.
In the context of the present document, streaming is defined as the delivery
of time-continuous media as the predominant media. Streaming points to the
fact that the media is predominantly sent only in a single direction and
consumed as it is received. Additionally, the media content may be streamed as
it is produced, referred to as live streaming. If content is streamed that is
already produced, it is referred to as on-demand streaming.
References to Dynamic Adaptive Streaming over HTTP (MPEG‑DASH) [29] in the
present document apply equally to HTTP Live Streaming (HLS) [28] except where
noted otherwise. The term _Media Entry Point_ is used to refer generically to
an MPEG-DASH Media Presentation Description (MPD) but may be taken to apply
equally to alternative media presentation description formats such as an HLS
master playlist, unless noted otherwise.
Table 4.0.1‑1 lists the principal features of the 5GMS architecture along with
cross-references to relevant clauses defining its functions and procedures.
Table 4.0.1‑1: 5G Media Streaming feature index
Feature Feature description clause Procedure definition clause(s)
* * *
                                                                         Downlink media streaming         Uplink media streaming
Content hosting 4.0.2 5.4 Not applicable Content publishing 4.0.3 Not
applicable 6.2.3 Content preparation 4.0.4 Not defined Not defined Network
assistance 4.0.5 5.9 6.5, 6.7 Dynamic policies 4.0.6 5.8, 5.7.6 6.9 Remote
control 4.0.7 Not applicable 6.6 Consumption reporting 4.0.8 5.6 Not
applicable QoE metrics reporting 4.0.9 5.5 Not applicable Edge processing
4.0.10 8  
eMBMS delivery 4.0.11 5.10 Not applicable Data collection, reporting and
exposure 4.0.12 5.11 6.8 Service URL handling 4.0.13 9, 5.10.7 9
The following clauses introduce these features in terms of network-side
components (\"5GMS network services\") and a UE-side client component referred
to variously as the _5GMSd Client_ (for downlink media streaming), _5GMSu
Client_ (for uplink media streaming), or simply _5GMS Client_ (in the case of
features applicable to either downlink media streaming or uplink media
streaming).
### 4.0.2 Content hosting
The content hosting feature is applicable to downlink media streaming only. It
provides a service equivalent to a Content Delivery Network (CDN) deployed
inside or outside the Trusted DN. High-level procedures for this feature are
defined in clause 5.4.
Figure 4.0.2‑1: High-level arrangement for content hosting feature
When a 5GMSd Application Provider has provisioned the content hosting feature
for downlink media streaming:
1\. Media content is either retrieved by a network-side component of the 5GMS
System from a media origin at the 5GMSd Application Provider (pull-based
content ingest) or else it is published to a network-side component of the the
5GMS System by the 5GMSd Application Provider (push-based content ingest).
2\. The network-side component of the 5GMS System may cache this content for a
configurable period of time.
3\. Network-side components of the 5GMS System may manipulate the content
according to rules provisioned in Content Preparation Templates (see clause
4.0.4).
4\. The 5GMSd Client in the UE subsequently retrieves the (possibly
manipulated) media content as part of a downlink media streaming session. The
security of the content served to the 5GMSd Client by network-side components
of the 5GMS System may be guaranteed by a provisioned Server Certificate.
In addition, the use of content hosting by 5GMSd Clients is logged by the 5GMS
System and, if suitably provisioned, is exposed by it to subscribing 5GMSd
Application Providers in the form of events. This information is equivalent to
that contained in CDN access logs (see also clause 4.0.12).
### 4.0.3 Content publishing
The content publication feature is applicable to uplink media streaming only.
High-level procedures for this feature are defined in clause 6.2.3.
Figure 4.0.3‑1: High-level arrangement for content publishing feature
When a 5GMSu Application Provider has provisioned the content publishing
feature for uplink media streaming:
1\. Media content is published by the 5GMSu Client in the UE to a network-side
component of the 5GMS System as part of an uplink media streaming session. The
security of the content published to the 5GMS System may be guaranteed by a
provisioned Server Certificate.
2\. The network-side component of the 5GMS System may cache this content for a
configurable period of time.
3\. Network-side components of the 5GMS System may manipulate the content
according to rules provisioned in Content Preparation Templaes (see clause
4.0.4).
4\. A network-side component of the 5GMS System makes the media content
available for retrieval by the 5GMSu Application Provider (pull-based content
egest) or publishes it directly to the 5GMSu Application Provider (push-based
content egest).
### 4.0.4 Content preparation
The content preparation feature is applicable to both downlink media streaming
(where is is provisioned as part of the content hosting feature introduced in
clause 4.0.2) and uplink media streaming (where is is provisioned as part of
the content publishing feature introduced in clause 4.0.3). The content
preparation feature enables a 5GMS Application Provider to specify content
manipulation by network-side components of the 5GMS System according to
provisioned Content Preparation Templates.
When a 5GMSd Application Provider has provisioned the content preparation
feature for downlink media streaming:
1\. Network-side components of the 5GMS System may manipulate ingested media
content and may cache the manipulated content prior to serving it to the 5GMSd
Client in the UE.
When a 5GMSu Application Provider has provisioned the content preparation
feature for uplink media streaming:
1\. Network-side components of the 5GMS System may manipulate the media
content ingested from the 5GMSu Client in the UE and may cache the manipulated
content prior to egesting it to the 5GMSu Application Provider.
### 4.0.5 Network assistance
The network assistance feature is applicable to both downlink media streaming
and uplink media streaming. It enables the 5GMS Client in the UE to
interrogate or manipulate the network Quality of Service for an ongoing media
streaming session.
High-level procedures for this feature are defined in clause 5.9 (downlink
media streaming) and in clauses 6.1, 6.5 and 6.7 (uplink media streaming). The
network assistance feature is not explicitly provisioned by the 5GMS
Application Provider. It is either available for a particular media streaming
session or not, depending on system pre-configuration and/or policy.
Two mechanisms for obtaining network assistance are defined in the present
document: one based on interactions with the PCF via network-based components
of the 5GMS System (_AF-based network assistance_), the other based on ANBR
signalling interactions between the UE modem and the RAN (_ANBR-based network
assistance_).
Figure 4.0.5‑1: High-level arrangement for network assistance feature
The following AF-based network assistance sub-features are defined in this
release:
1\. _Bit rate recommendation (or throughput estimation)._ The 5GMS Client
requests an estimate from a network-side component of the 5GMS System of the
bit rate that can currently be offered by a media streaming session. The
network-side component interrogates the PCF on behalf of the 5GMS Client to
obtain this information about the PDU session corresponding to the media
streaming session.
The 5GMS Client uses this information to adjust its own streaming bit rate to
fit within the Quality of Service (QoS) envelope that the network is able to
offer, for example by switching to a different representation listed in its
Media Entry Point, or by adjusting the encoding bit rate for uplink streaming
to fits within this bit rate budget. The media streaming Quality of Experience
(QoE) is more stable and consistent as a consequence.
2\. _Delivery boost._ The 5GMS Client speculatively requests a temporary boost
to the bit rate of a media streaming session from a network-side component of
the 5GMS System. The network-side component requests a modification to the PDU
session corresponding to the media streaming session from the PCF on behalf of
the 5GMS Client. If there is sufficient spare network capacity to accommodate
the requested bit rate, it is granted by the 5GMS System on a temporary basis.
The 5GMS Client uses this temporary boost to speed up media streaming data
transfer, for example to replenish a depleted downlink streaming buffer or to
complete a download/upload faster than would otherwise be possible.
ANBR-based bit rate recommendation is also defined for downlink media
streaming (see clause 5.9.3).
ANBR-based delivery boost is also defined for uplink media streaming (see
clause 6.7).
In addition, the use of network assistance by 5GMS Clients is logged by the
5GMS System and, if suitably provisioned, is exposed by it to subscribing 5GMS
Application Providers in the form of events (see also clause 4.0.12).
### 4.0.6 Dynamic policies
The dynamic policies feature is applicable to both downlink media streaming
and uplink media streaming. It enables the 5GMS Client in the UE to manipulate
the network traffic handling policies for an ongoing media streaming session.
NOTE: The PCF is accessed via the NEF when the 5GMS network services are
deployed outside the Trusted DN.
Figure 4.0.6‑1: High-level arrangement for dynamic policies
Figure 4.0.6‑2: Domain model for dynamic policies
With reference to figure 4.0.6‑2, dynamic policies work as follows:
1\. A conceptual _Service Operation Point_ is an abstract set of requirements
that support a media streaming service (e.g., SD, HD, UHD). It is identified
by an _External reference_ that is used to tag _Policy Template_ resources
provisioned in the 5GMS System and _Service Descriptions_ included in _Media
Entry Point_ documents.
2\. The Service Operation Point is embodied in the 5G System by a _Policy
Template_ which is provisioned in the 5GMS network services by the 5GMS
Application Provider within the scope of an umbrella _Provisioning Session_. A
Policy Template may be defined as being applicable to a particular Data
Network and/or Network Slice. The Policy Template carries the _External
reference_ and Network QoS parameters corresponding to a single Service
Operation Point. (Any number of Policy Templates provisioned for different
Data Networks and/or Network Slices may reference the same Service Operation
Point.)
3\. The 5GMS Application Provider makes one or more _Media Entry Point_
documents (e.g. DASH MPDs) available for use by the 5GMS Client. To take
advantage of the dynamic policies feature, a Media Entry Point document
includes one or more _Service Descriptions_ , each identifying the streaming
requirements of a presentation that correspond to a single Service Operation
Point (e.g., SD, HD, UHD) and identified by means of an _External reference_.
The same Service Description may be included in more than one Media Entry
Point document in case a common Service Operation Point is applicable to
multiple media presentations.
4\. When a Media Entry Point is selected by the 5GMS Client at the start of a
media streaming session, the 5GMS Client retrieves Service Access Information
from a network-side component of the 5GMS System describing the set of
available Policy Templates provisioned in step 2 and exposes this to a
controlling application on the UE.
5\. At the start of a media streaming session, the controlling application on
the UE selects one of the Service Descriptions listed in the Media Entry Point
document that realises its preferred Service Operation Point. Either the Media
Player (when the Service Descriptions are within the Media Entry Point
document) or the controlling application (when the Service Descriptions are
not within the Media Entry Point document) informs the 5GMS Client of its
choice by passing the corresponding External reference to it.
6\. If there is a Policy Template available for the current media streaming
session with the indicated External reference, the 5GMS Client instantiates
this Policy Template by interacting with a network-side component of the 5GMS
System in order to realise the Service Operation Point described by the Policy
Template and the Service Description. The effect of this is that the
corresponding network Quality of Service is applied to the media streaming
session.
In addition, the use of dynamic policies by 5GMS Clients is logged by the 5GMS
System and, if suitably provisioned, is exposed by it to subscribing 5GMS
Application Providers in the form of events (see also clause 4.0.12).
### 4.0.7 Remote control
The remote control feature is applicable to uplink media streaming only. While
high-level procedures for integrating this feature into 5G Media Streaming are
specified in clause 6.6 of the present document, it is not further defined in
this release.
### 4.0.8 Consumption reporting
The consumption reporting feature is applicable to downlink media streaming
only in this release. It allows consumption of downlink media streaming to be
logged by the 5GMS System and exposed for analysis.
Figure 4.0.8‑1: High-level arrangement for consumption reporting feature
When a 5GMSd Application Provider has provisioned the consumption reporting
feature for downlink media streaming:
1\. The 5GMSd Client reports consumption of media that is part of downlink
media streaming sessions to a network-side component of the 5GMS System.
In addition, the data contained in consumption reports may be exposed by the
5GMS System in the form of events to subscribing 5GMS Application Providers
(see also clause 4.0.12).
### 4.0.9 QoE metrics reporting
The QoE metrics reporting feature is applicable to downlink media streaming
only in this release. It allows the Quality of Experience of media streaming
sessions to be logged by the 5GMS System and exposed for analysis.
Two mechanisms for reporting downlink QoE metrics are defined in the present
document: one that involves reports being sent to the OAM via the RAN (_RAN-
based QoE metrics reporting_ , see clause 5.5.2), the other involving reports
sent to the network-based components of the 5GMS System (_AF-based QoE metrics
reporting_ , see clause 5.5.3).
Figure 4.0.9‑1: High-level arrangement for QoE metrics reporting feature
When a 5GMS Application Provider has provisioned the QoE metrics reporting
feature for media streaming:
1\. The 5GMS Client reports QoE metrics that it has collected during media
streaming sessions to a network-side component of the 5GMS System.
In addition, the data contained in AF-based QoE metrics reports may be exposed
by the 5GMS System to subscribing 5GMS Application Providers in the form of
events (see also clause 4.0.12).
### 4.0.10 Edge processing
The edge processing feature is applicable to both downlink media streaming and
uplink media streaming. It enables the 5GMS Client in the UE to take advantage
of edge computing capabilities in the 5GMS System to support media streaming.
This feature is defined in clause 4.5 and high-level procedures are defined in
clause 8.
### 4.0.11 eMBMS delivery
The eMBMS delivery feature is applicable to downlink media streaming only. It
enables the 5GMS System to provision the delivery of downlink media streaming
content via eMBMS User Services sessions. This feature is defined in clause
4.6 and high-level procedures are defined in clause 5.10.
### 4.0.12 Data collection, reporting and exposure
The data collection, reporting and exposure feature is applicable to both
downlink media streaming and uplink media streaming. It enables the 5GMS
System to log data relating to media streaming sessions and to expose this to
subscribers in the form of _Events_. This feature is defined in clause 4.7 and
high-level procedures are defined in clause 5.11 (for downlink media
streaming) and clause 6.8 (for uplink media streaming).
### 4.0.13 Service URL handling
Service URL handling is applicable to downlink and uplink media streaming.
This feature is defined in clause 4.10 and high-level procedures are defined
in clause 9.
The intent of 3GPP Service URL handling is to launch UE functions based on the
execution of a URL. This enables 5G Media Streaming services to be announced
within a third-party application, a general web page, a messaging service or
shared via social messages using a 3GPP Service URL for 5GMS. When a service
is launched using a 3GPP Service URL for 5GMS, a 5GMS Client function for
media session handling is expected to be launched implicitly alongside, for
example, a primary media stream handling function.
## 4.1 General service architecture
The overall 5G Media Streaming Architecture is shown in Figure 4.1-1 below.
NOTE: The functions indicated by the yellow filled boxes are in scope of stage
3 specifications for 5GMS. The functions indicated by the grey boxes are
defined in 5G System specifications. The functions indicated by the blue boxes
are neither in scope of 5G Media Streaming nor 5G System specifications.
Figure 4.1-1: 5G Media Streaming within the 5G System
The 5GMS Application Provider uses 5GMS for streaming services. It provides a
5GMS Aware-Application on the UE to make use of 5GMS Client and network
functions using interfaces and APIs defined in 5GMS.
The architecture in Figure 4.1-1 represents the specified 5GMS functions
within the 5G System (5GS) as defined in TS 23.501 [2]. Three main functions
are defined:
\- **5GMS AF:** An Application Function similar to that defined in TS 23.501
[2] clause 6.2.10, dedicated to 5G Media Streaming.
\- **5GMS AS:** An Application Server dedicated to 5G Media Streaming.
\- **5GMS Client:** A UE internal function dedicated to 5G Media Streaming.
The 5GMS Client is a logical function and its subfunctions may be distributed
within the UE according to implementation choice.
5GMS AF and 5GMS AS are Data Network (DN) functions and communicate with the
UE via N6 as defined in TS 23.501 [2].
Functions in trusted DNs, e.g. a 5GMS AF in the Trusted DN, are trusted by the
operator\'s network as illustrated in Figure 4.2.3-5 of TS 23.501 [2].
Therefore, such AFs may directly communicate with the relevant 5G Core
functions.
Functions in external DNs, e.g. a 5GMS AF in the External DN, may only
communicate with 5G Core functions via the NEF using N33.
The present document specifies the according network architectures for 5GS.
The 5GMS architecture may be applied to an EPS although such an application is
not specified in the present document and is left to the discretion of
deployments and implementations.
The 5G Media Services Architecture maps the overall high-level architecture
shown in Figure 4.1-1 above to the general architecture shown in Figure 4.1-2
below.
NOTE: The 5GMS Client in the UE is depicted in the form of Media Session
Handler and Media Stream Handler constituent functions which expose APIs to
one another in the same way that those APIs are exposed to 5GMS-Aware
Applications. This UE architecture is not applicable generally; it is just as
valid to implement a 5GMS Client that does not expose interfaces M6 and M7
within the 5GMS Client. It is also valid for a 5GMS Client inside a UE to be
completely self-contained, such that all functionality typically implemented
in the 5GMS-Aware Application is embedded in the UE and thus interfaces M6 and
M7 are not exposed at all.
Figure 4.1-2: 5G Media Streaming general architecture
The remainder of the present document specifies stage 2 aspects of the media
streaming functional entities shown in the general architecture of Figure
4.1-2.
This architecture specification addresses two main scenarios as concerns each
individual media streaming operation:
\- **Downlink streaming:** The network is the origin of the media and the UE
acts as the consumption device.
**\- Uplink streaming:** The UE is the origin of the media and the network
acts as the consumption entity.
The functional entities and interfaces of the media streaming general
architecture need to be elaborated with specificities relating to downlink and
uplink streaming. For this purpose, corresponding descriptions add the suffix
\"d\" for downlink and \"u\" for uplink functionality as appropriate in each
case.
Clause 4.2 introduces the 5G Unicast Downlink Media Streaming architecture.
Clause 4.3 introduces the 5G Unicast Uplink Media Streaming architecture.
## 4.2 5G unicast downlink Media Streaming architecture
### 4.2.1 Standalone -- Non-Roaming
The 5GMSd Application Provider uses 5GMSd functions for downlink streaming
services. It provides a 5GMSd-Aware Application on the UE the ability to make
use of 5GMSd Client and network functions using 5GMSd interfaces and APIs.
The architecture in Figure 4.2.1-1 below represents the specified 5GMSd
functions within the 5G System (5GS) as defined in TS 23.501 [2]. Three main
functions are defined:
\- **5GMSd AF:** An Application Function similar to that defined in TS 23.501
[2] clause 6.2.10, dedicated to 5G Downlink Media Streaming.
\- **5GMSd AS:** An Application Server dedicated to 5G Downlink Media
Streaming.
\- **5GMSd Client:** A UE internal function dedicated to 5G Downlink Media
Streaming. The 5GMSd Client is a logical function and its subfunctions may be
distributed within the UE according to implementation choice.
5GMSd AF and 5GMSd AS are Data Network (DN) functions and communicate with the
UE via the User Plane Function (UPF) using the N6 reference point as defined
in TS 23.501 [2].
Functions in trusted DNs are trusted by the operator\'s network as illustrated
in Figure 4.2.3-5 of TS 23.501 [2]. Therefore, AFs in trusted DNs may directly
communicate with relevant 5G Core functions.
Functions in external DNs, i.e. 5GMSd AFs in external DNs, may only
communicate with 5G Core functions via the NEF using N33.
NOTE 1: The 5GMS architecture may be applied to an EPS although such an
application is not specified in the present document and is left to the
discretion of deployments and implementations.
Figure 4.2.1-1: Downlink 5G Media Streaming within 5G System
NOTE 2: The functions indicated by the yellow filled boxes are in scope of
stage 3 specifications for 5GMS. The functions indicated by the grey boxes are
defined in 5G System specifications. The functions indicated by the blue boxes
are neither in scope of 5G Media Streaming nor 5G System specifications.
The architecture in Figure 4.2.1-2 below represents the media architecture
connecting UE internal functions and related network functions.
Figure 4.2.1-2: Media architecture for unicast downlink media streaming
NOTE 3: As described in the NOTE of Figure 4.1-2, the functions indicated by
the yellow filled boxes are in scope of stage 3 for 5GMSd. The functions
indicated by the grey boxes are defined in 5GS. The interfaces indicated by
solid lines are in scope of stage 3 for 5GMSd. The interfaces indicated by
dashed lines are defined in 5GS. The interfaces indicated by dotted lines are
neither in scope of 5GS nor 5GMSd, but are considered as part of informative
call flows.
NOTE 4: Red ovals indicate API provider functions.
NOTE 5: The 5GMSd AF may also interact with the NEF for NEF-enabled API
access. However, within Release 16, the NEF is only used by the 5GMSd AF to
interact with the Policy and Charging Function (PCF) in 5GMS specifications.
NOTE 6: Some information might also be exchanged between 5GMSd entities and
the OAM, although the OAM is not explicitly shown in the architecture.
The following functions are defined:
\- 5G Media Streaming Client for downlink (**5GMSd Client**) on the UE:
Receiver of 5GMS downlink media streaming service that may be accessed through
well-defined interfaces/APIs. Alternatively, the UE may be implemented in a
self-contained manner such that interfaces M6d and M7d are not exposed at all.
\- The 5GMSd Client contains two subfunctions:
\- **Media Session Handler:** A function on the UE that communicates with the
5GMSd AF in order to establish, control and support the delivery of a media
session, and may perform additional functions such as consumption and QoE
metrics collection and reporting. The Media Session Handler may expose APIs
that can be used by the 5GMSd-Aware Application. The Media Session Handler may
be launched by a 3GPP-defined Service URL (see clause 4.10).
\- **Media Player:** A function on the UE that communicates with the 5GMSd AS
in order to stream the media content and may provide APIs to the 5GMSd-Aware
Application for media playback and to the Media Session Handler for media
session control.
\- **5GMSd-Aware Application:** The 5GMSd Client is typically controlled by an
external media application, e.g. an App, which implements external application
or content service provider specific logic and enables a media session to be
established. The 5GMSd-Aware Application is not defined within the 5G Media
Streaming specifications, but the function makes use of 5GMSd Client and
network functions using 5GMSd interfaces and APIs.
\- **5GMSd AS:** An Application Server which hosts 5G media functions. Note
that there may be different realizations of the 5GMSd AS, including the
distribution of 5GMSd AS functionality between different physical hosts, for
example in a Content Delivery Network (CDN).
The 5GMSd AS in this release supports the following features:
i. **Content Hosting** , including:
\- Ingesting media content from a 5GMSd Application Provider at reference
point M2d.
\- Caching media content to reduce the need to ingest the same content
repeatedly at reference point M2d.
\- A generic framework for content preparation.
\- Geographic restrictions on content access by the Media Player at reference
point M4d (\"geofencing\").
\- Domain Name aliasing at reference point M4d.
\- Support for server certificates at reference point M4d.
\- URL path rewriting at reference point M4d.
\- URL signing at reference point M4d.
NOTE 6a: The features of the 5GMSd AS cater primarily for media streaming
content. However, many of these features may also be used to support the
delivery of other types of content, for example web content.
\- **5GMSd Application Provider:** External application or content-specific
media functionality, e.g., media creation, encoding and formatting that uses
5GMSd interfaces to stream media to 5GMSd-Aware Applications.
\- **5GMSd AF:** An Application Function that provides various control
functions to the Media Session Handler on the UE and/or to the 5GMSd
Application Provider. It may relay or initiate a request for different Policy
or Charging Function (PCF) treatment or interact with other network functions
via the NEF.
NOTE 7: There may be multiple 5GMSd AFs present in a deployment and residing
within the Data Network , each exposing one or more APIs.
The following interfaces are defined for 5G Downlink Media Streaming:
\- M1d (5GMSd Provisioning API): External API, exposed by the 5GMSd AF which
enables the 5GMSd Application Provider to provision the usage of the 5G Media
Streaming System for downlink media streaming and to obtain feedback.
\- M2d (5GMSd Ingest API): Optional External API exposed by the 5GMSd AS used
when the 5GMSd AS in the trusted DN is selected to host content for the
streaming service.
\- M3d: Internal API used by a 5GMSd AF to configure and manage a 5GMSd AS
instance.
\- M4d (Media Streaming APIs): APIs exposed by a 5GMSd AS to the Media Player
to stream media content.
\- M5d (Media Session Handling API): APIs exposed by a 5GMSd AF to the Media
Session Handler for media session handling, control, reporting and assistance
that also include appropriate security mechanisms, e.g. authorization and
authentication.
\- M6d (UE Media Session Handling APIs): APIs exposed by a Media Session
Handler to the Media Player for client-internal communication, and exposed to
the 5GMSd-Aware Application enabling it to make use of 5GMS functions. This
API may be supported by a 3GPP-defined Service URL (see clause 4.10).
\- M7d (UE Media Player APIs): APIs exposed by a Media Player to the 5GMSd-
Aware Application and Media Session Handler to make use of the Media Player.
\- M8d: (Application API): application interface used for information exchange
between the 5GMSd-Aware Application and the 5GMSd Application Provider, for
example to provide Service Access Information to the 5GMSd-Aware Application.
This API is external to the 5G System and not specified by 5GMS.
NOTE 8: Non-Standalone, Roaming, Non-3GPP Access and EPC-5GC interworking
aspects are FFS.
The following subfunctions are identified as a part of a more detailed
breakdown of the 5GMSd AS for stage 3 specifications:
\- Adaptive Bit Rate (ABR) Encoder, Encryption and Encapsulator.
\- Manifest (e.g. MPD) Generator and Segment (e.g. DASH) Packager.
\- Origin Server.
\- CDN Server (e.g. Edge Servers).
\- DRM Server (e.g. DRM License Server).
\- Service Directory.
\- Content Guide Server.
\- Replacement content server (e.g. Ad content server).
\- Manifest Proxy, i.e. MPD modification server.
\- App Server.
\- Session Management Server.
A breakdown of 5GMSd functions in the UE is provided in clause 4.2.2 below.
### 4.2.2 5GMSd UE functions
The UE may include many detailed subfunctions that can be used individually or
controlled individually by the 5GMSd-Aware Application. This clause breaks
down several relevant identified subfunctions for which stage 3 specification
is available.
NOTE: This UE architecture is logical; the realization of reference points M6
and M7 inside the logical 5GMS Client is subject to implementation choice.
The 5GMSd-Aware Application itself may include many functions that are not
provided by the 5GMSd Client or by the 5G UE. Examples include service and
content discovery, notifications and social network integration. The 5GMSd-
Aware Application may also include functions that are equivalent to ones
provided by the 5GMSd Client and may only use a subset of the 5GMSd client
functions. The 5GMSd-Aware Application may act based on user input or may for
example also receive remote control commands from the 5GMSd Application
Provider through M8d.
With respect to Media Player functions, Figure 4.2.2-1 below shows more
detailed functional components of a UE for media player functions to access
the 5GMSd AS.
Figure 4.2.2-1: Downlink 5G Media Streaming UE functions (Media Player
centric)
The following subfunctions are identified as part of a more detailed breakdown
of the Media Player function:
\- **Media Access Client:** Accesses media content such as DASH-formatted
media segments.
\- **Media Decapsulation:** Extracts the elementary media streams for decoding
and provides media system related functions such as time synchronization,
capability signalling, accessibility signalling, etc.
\- **Consumption Measurement and Logging Client:** Performs the measurement
and logging of content consumption-related information in accordance with the
Consumption Reporting Configuration part of provisioning data, supplied by the
5GMSd Application Provider to the 5GMSd AF, and forwarded by the 5GMSd AF to
the Media Player via the Media Session Handler.
\- **Metrics Measurement and Logging Client:** Performs the measurement and
logging of QoE metrics in accordance with the Metrics Reporting Configuration
part of provisioning data, supplied by the 5GMSd Application Provider to the
5GMSd AF, and forwarded by the 5GMSd AF to the Media Player via the Media
Session Handler.
\- **DRM Client** (optional): When present, the DRM client might or might not
be a part of the Media Player. It provides a content protection mechanism with
its unique key management and key delivery system,
authentication/‌authorization, policy enforcement and entitlement check. The
DRM Client is not defined within 5G Media Streaming specifications.
\- **Media Decryption** (optional): When present, media decryption is
responsible to decrypt the media samples using the keys provided in the DRM
license, and further passing to the Media Decoder to enable playback of
encrypted media. The media decryption and media decoding could be implemented
on a general-purpose processor in software or hardware or, for a more secure
and robust architecture, the decryption, decoding and rendering could be
implemented on the hardware of secure processors.
\- **Media Decoder** : Decodes the media, such as audio or video.
\- **Media Presentation and Rendering:** Presents the media using an
appropriate output device and enables possible interaction with the media.
With respect to the Media Session Handler, Figure 4.2.2-2 below shows more
detailed functional components of a UE to access the 5GMSd AF.
Figure 4.2.2-2: Downlink 5G Media Streaming UE functions (control-centric)
NOTE 1: The yellow colour indicates here that the 3GPP has created
specifications for the function.
NOTE 2: A UE is a logical device which may correspond to the tethering of
multiple physical devices or other types of realizations.
The following subfunctions are identified as part of a more detailed breakdown
of Media Session Handler:
\- **Core Functions:** Realization of a \"session\" concept for media
communications, optionally spanning multiple stateless sessions. May
optionally interact with network-based 5GMSd AFs.
\- **Metrics Collection and Reporting:** executes the collection of QoE
metrics measurement logs from the Media Player and sending of metrics reports
to the 5GMSd AF for the purpose of metrics analysis or to enable potential
transport optimizations by the network.
\- **Consumption Collection and Reporting:** executes the collection of
content consumption measurement logs from the Media Player and sending of
consumption reports to a 5GMSd AF about the currently consumed media within
the available presentation, about the UE capabilities and about the
environment of the media session for potential transport optimizations by the
network or consumption report analysis.
\- **Dynamic Policy:** involves interacting with the 5GMSd AF to instantiate
Policy Templates that change the network Quality of Service for a media
streaming session. Policy Templates may be selected based on interactions with
the Media Player.
\- **Network Assistance:** downlink streaming delivery assisting functions
provided by the network to the 5GMSd Client and Media Player in the form of
bit rate recommendation (or throughput estimation) and/or delivery boost.
Network Assistance functionality may be supported by 5GMSd AF or ANBR-based
RAN signalling mechanisms. This function also includes the logging of ANBR-
based Network Assistance invocations and their reporting via reference point
R2, as defined in clause 4.7.1.
\- **Service URL Handling:** a UE function that handles 3GPP Service URLs (see
clause 4.10) to support the launch of 5GMSd services and associated functions
in the UE and in the network.
NOTE 2a: While this function may not be exclusive to 5GMS, this specification
only defines Service URL handling for 5GMS.
NOTE 3: Based on such a decomposition, additional interfaces and APIs may
exist in inside the UE:
\- Media control interface(s) to configure and interact with the different UE
media functions.
\- Media control interface for media session management.
\- Control interface for collection of logged QoE metrics measurements.
\- Control interface for collection of logged content consumption
measurements.
\- Decoded media samples are handed over to the media renderer.
\- Decrypted, compressed media samples are handed over to a trusted media
decoder.
\- In the case of encryption, the encrypted, compressed media samples are
handed over to the DRM Client.
NOTE 4: Non-Standalone, Roaming, Non-3GPP Access and EPC-5GC interworking
aspects are FFS.
### 4.2.3 Service Access Information for downlink media streaming
The Service Access Information is the set of parameters and addresses which
are needed by the 5GMSd Client to activate and control the reception of a
downlink streaming session, and to report service/content consumption and/or
QoE metrics.
The Service Access Information may be provided together with other service
announcement information using M8d. Alternatively, the 5GMSd Client fetches
the Service Access Information from the 5GMSd AF. The Service Access
Information may be provided as, or may be accessed via, a 3GPP-defined Service
URL that provides a unique resolvable identifier to the 5GMSd Provisioning
Session and that may also include a reference to the Media Player Entry.
Regardless of how it is provided, the Service Access Information contains
different information, depending on the collaboration model between the 5GMS
System and the 5GMSd Application Provider, and also depending on offered
features. Baseline parameters are listed in Table 4.2.3‑1 below:
Table 4.2.3-1: Parameters of baseline Service Access Information
Parameters Description
* * *
Provisioning Session identifier Unique identification of the M1d Provisioning
Session.
When the content hosting feature is activated for a downlink streaming
session, the parameters from Table 4.2.3-1a below can additionally be present.
Table 4.2.3-1a: Streaming Access parameters
+----------------------------------+----------------------------------+ | Parameters | Description | +==================================+==================================+ | Media Player Entries | A set of pointers to documents | | | that each define an equivalent | | | media presentation (see NOTE), | | | e.g. MPD for DASH content or URL | | | to a video clip file. | | | | | | Each member of the set may | | | specify additional details to | | | aid selection by the | | | MBMS Client, including content | | | type, profile indicators and | | | precedence. | | | | | | A Media Player Entry document | | | may additionally include Service | | | Descriptions, each one | | | identified by an _External | | | reference_ that enables it to be | | | matched with a Policy Template, | | | and each describing the set of | | | media streaming parameters | | | (e.g., bit rate, target latency) | | | that realise a Service Operation | | | Point. | | | | | | A Media Player Entry URL may be | | | embedded in a 3GPP Service URL. | +----------------------------------+----------------------------------+ | NOTE: An equivalent media | | | presentation is one which has | | | the same content but may result | | | in a different Quality of | | | Experience. | | +----------------------------------+----------------------------------+
When the consumption reporting feature is activated for a downlink streaming
session, the parameters from Table 4.2.3‑2 below are additionally present.
Table 4.2.3-2: Parameters for consumption reporting configuration
+--------------------+------------------------------------------------+ | Parameters | Description | +====================+================================================+ | Reporting interval | Identifies the interval between consumption | | | reports being sent by the Media Session | | | Handler. | +--------------------+------------------------------------------------+ | Server address | A list of 5GMSd AF addresses where the | | | consumption reports are sent by the Media | | | Session Handler. | +--------------------+------------------------------------------------+ | Sample percentage | The proportion of clients that shall report | | | media consumption. | | | | | | If not specified, all clients shall send | | | reports. | +--------------------+------------------------------------------------+ | Location reporting | Identify whether the Media Session Handler | | | provides location data to the 5GMSd AF (in | | | case of MNO or trusted third parties) | +--------------------+------------------------------------------------+
When the dynamic policy invocation feature is activated for a downlink
streaming session the parameters from Table 4.2.3‑3 below are additionally
present.
Table 4.2.3-3: Parameters for dynamic policy invocation configuration
Parameters Description
* * *
Server address A list of 5GMSd AF addresses (in the form of opaque URLs) which
offer the APIs for dynamic policy invocation sent by the 5GMS Media Session
Handler. Valid Policy Template Ids A list of Policy Template identifiers which
the 5GMSd Client is authorized to use. Service Data Flow Methods A list of
recommended Service Data Flow description methods (descriptors), e.g. 5-Tuple,
ToS, 2-Tuple, etc, which should be used by the Media Session Handler to
describe the Service Data Flows for the traffic to be policed. External
reference Additional identifier for this Policy Template, unique within the
scope of its Provisioning Session, that can be cross-referenced with external
metadata about the streaming session.
When the metrics collection and reporting feature is activated for a downlink
streaming session, one or more parameter sets for metrics configuration,
according to Table 4.2.3‑4, are additionally present. Each metrics
configuration set contains specific settings valid for that configuration,
which is typically metric scheme dependent, and collection and reporting shall
be done separately for each set.
Table 4.2.3-4: Parameters for each metrics configuration set
+-------------------------+-------------------------------------------+ | Parameters | Description | +=========================+===========================================+ | Scheme | The scheme associated with this metrics | | | configuration set. A scheme may be | | | associated with 3GPP or with a non-3GPP | | | entity. If not specified, a default 3GPP | | | metrics scheme shall apply. | | | | | | Metrics schemes shall be uniquely | | | identified by URIs. | +-------------------------+-------------------------------------------+ | Server address | A list of 5GMSd AF addresses to which | | | metric reports shall be sent for this | | | metrics configuration set. | +-------------------------+-------------------------------------------+ | DNN | The Data Network Name (DNN) which shall | | | be used when sending metrics report for | | | this metrics configuration set. | | | | | | If not specified, the default DNN shall | | | be used. | +-------------------------+-------------------------------------------+ | Slice scope | A list of network slice(s) for which | | | metrics collection and reporting shall be | | | executed for this metrics configuration | | | set. | | | | | | If not specified, the metrics collection | | | and reporting shall be done for all | | | network slices. | +-------------------------+-------------------------------------------+ | Reporting interval | The sending interval between metrics | | | reports for this metrics configuration | | | set. | | | | | | If not specified, a single final report | | | shall be sent after the streaming session | | | has ended. | +-------------------------+-------------------------------------------+ | Sample percentage | The proportion of streaming sessions that | | | shall report metrics for this metrics | | | configuration set. | | | | | | If not specified, reports shall be sent | | | for all sessions. | +-------------------------+-------------------------------------------+ | Streaming source filter | A list of content URL patterns for which | | | metrics reporting shall be done for this | | | metrics configuration set. | | | | | | If not specified, reporting shall be done | | | for all URLs. | +-------------------------+-------------------------------------------+ | Metrics | A list of metrics which shall be | | | collected and reported for this metrics | | | configuration set. | | | | | | For progressive download and DASH | | | streaming services, the listed metrics | | | are associated with the 3GPP metrics | | | scheme and shall correspond to one or | | | more of the metrics as specified in | | | clauses 10.3 and 10.4, respectively, of | | | TS 26.247 [7]. | | | | | | In addition, for the 3GPP metrics scheme | | | as applied to DASH streaming, the quality | | | reporting scheme and quality reporting | | | protocol as defined in clauses 10.5 and | | | 10.6, respectively, of [7] shall be | | | used. | | | | | | If not specified, a complete (or default | | | if applicable) set of metrics will be | | | collected and reported. | +-------------------------+-------------------------------------------+
When 5GMSd AF-based Network Assistance is activated for a downlink streaming
session the parameters from Table 4.2.3‑5 below shall be additionally present.
Table 4.2.3-5: Parameters for 5GMSd AF-based Network Assistance configuration
Parameters Description
* * *
Server address 5GMSd AF address that offers the APIs for 5GMSd AF-based
Network Assistance, accessed by the 5GMSd Media Session Handler. The server
address shall be an opaque URL, following the 5GMS URL format.
## 4.3 Uplink 5G Media Streaming architecture
### 4.3.1 Media architecture
The 5GMSu Application Provider uses 5GMSu functions for uplink streaming
services. It provides a 5GMSu-Aware Application on the UE the ability to make
use of 5GMSu Client and network functions using 5GMSu interfaces and APIs.
Figure 4.3.1-1: Media architecture for unicast uplink media streaming
NOTE 1: The functions indicated by the yellow filled boxes are in scope of
stage 3 specifications for 5GMS. The functions indicated by the grey boxes are
defined in 5G System specifications. The functions indicated by the blue boxes
are neither in scope of 5G Media Streaming nor 5G System specifications.
The architecture in Figure 4.3.1-1 above represents the specified 5GMSu
functions within the 5G System (5GS) as defined in TS 23.501 [2]. Three main
functions are defined:
\- **5GMSu AF:** An Application Function similar to that defined in TS 23.501
[2] clause 6.2.10, dedicated to 5G Uplink Media Streaming.
\- **5GMSu AS:** An Application Server dedicated to 5G Uplink Media Streaming.
\- **5GMSu Client:** A UE-internal function dedicated to 5G Uplink Media
Streaming.
5GMSu AF and 5GMSu AS are Data Network (DN) functions and communicate with the
UE via N6 as defined in TS 23.501 [2].
Functions in trusted DNs, e.g., a 5GMSu AF in the Trusted DN, are trusted by
the operator\'s network as illustrated in Figure 4.2.3-5 of TS 23.501 [2].
Therefore, such AFs may directly communicate with relevant 5G Core functions.
Functions in external DNs, e.g., a 5GMSu AF in the External DN, may only
communicate with 5G Core functions via the NEF using N33.
The architecture in Figure 4.3.1-2 below represents the media architecture
connecting UE internal functions and related network functions for 5G Uplink
Media Streaming.
Figure 4.3.1-2: Media architecture for unicast uplink media streaming
NOTE 2: The functions indicated by the yellow filled boxes are in scope of
stage 3 for 5GMSu. The functions indicated by the grey boxes are defined in
5GS. The interfaces indicated by solid lines are in scope of stage 3 for
5GMSu. The interfaces indicated by dashed lines are defined in 5GS. The
interfaces indicated by dotted lines are neither in scope of 5GS nor 5GMSu,
but are considered as part of informative call flows.
NOTE 3: Red ovals indicate API provider functions.
NOTE 4: The 5GMSu AF may also interact with the NEF for NEF-enabled API
access. However, within Release 16, the NEF is only used by the 5GMSu AF to
interact with the Policy and Charging Function (PCF) in 5GMS specifications.
NOTE 5: Some information might also be exchanged between 5GMSu entities and
the OAM, although the OAM is not explicitly shown in the architecture.
The following functions are defined:
\- 5G Media Streaming Client for uplink (**5GMSu Client**) on UE: Originator
of 5GMSu service that may be accessed through well-defined interfaces/APIs.
The UE may also be implemented in a self-contained manner such that interfaces
M6u and M7u are not exposed at all.
\- The 5GMSu Client contains two subfunctions:
\- **Media Session Handler:** A function on the UE that communicates with the
5GMSu AF in order to establish, control and support the delivery of a media
session, and that may perform QoE metrics reporting. The Media Session Handler
exposes APIs that can be used by the 5GMSu-Aware Application. The Media
Session Handler may be launched by a 3GPP-defined Service URL (see clause
4.10).
\- **Media Streamer:** A function on the UE that communicates with the 5GMSu
AS in order to perform uplink streaming of media content and provides a
service to both the 5GMSu-Aware Application for media capturing and uplink
streaming and the Media Session Handler for media session control.
\- **5GMSu-Aware Application:** The 5GMSu Client is typically controlled by an
external media application, e.g. an App, which implements external application
or content service provider specific logic and enables a media session to be
established. The 5GMSu-Aware Application is not defined within the 5G Media
Streaming specifications, but the function makes use of 5GMSu Client and
network functions using 5GMSu interfaces and APIs.
\- **5GMSu AS:** An Application Server which hosts 5G media functions. Note
that there may be different realizations of a 5GMSu AS, for example a Content
Delivery Network (CDN) server.
\- **5GMSu Application Provider:** External application or content-specific
media functionality, e.g., media storage, consumption, transcoding and
redistribution that uses 5GMSu interfaces to receive streaming media from
5GMSu Aware Applications.
\- **5GMSu AF:** An Application Function that provides various control
functions to the Media Session Handler on the UE and/or to the 5GMSu
Application Provider. It may relay or initiate a request for different Policy
or Charging Function (PCF) treatment or interact with other network functions
via the NEF.
NOTE 6: There may be multiple 5GMSu AFs present in a deployment and residing
within the Data, each exposing one or more APIs.
The following interfaces are defined for 5G Uplink Media Streaming:
\- M1u (5GMSu Provisioning API): External API, exposed by the 5GMSu AF and
which enables the 5GMSu Application Provider to provision the usage of the 5G
Media Streaming system for uplink media streaming and to obtain feedback.
\- M2u (5GMSu Publish API): Optional External API exposed by the 5GMSu AS used
when the 5GMSu AS in the trusted DN is selected to receive the content for the
streaming service.
\- M3u: Internal API used by a 5GMSu AF to configure and manage a 5GMSu AS
instance.
\- M4u (Uplink Media Streaming APIs): APIs exposed by a 5GMSu AS to the Media
Streamer to stream media content.
\- M5u (Media Session Handling API): APIs exposed by a 5GMSu AF to the Media
Session Handler for media session handling, control and assistance that also
include appropriate security mechanisms e.g. authorization and authentication,
and QoE metrics reporting.
\- M6u (UE Media Session Handling APIs): APIs that may be exposed by a Media
Session Handler to the Media Streamer for client-internal communication, and
to the 5GMSu-Aware Application to make use of 5GMSu functions. This API may be
supported by a 3GPP-defined Service URL (see clause 4.10).
\- M7u (UE Media Streamer APIs): APIs that may be exposed by a Media Streamer
to the 5GMSu-Aware Application and Media Session Handler to make use of the
Media Streamer, including configuration of QoE metrics to be measured and
logged, and the collection of metrics measurement logs.
\- M8u: (Application API): application interface used for information exchange
between the 5GMSu-Aware Application and the 5GMSu Application Provider, for
example to provide Service Access Information to the 5GMSu-Aware Application.
This API is external and not specified in the 5GMS architecture.
NOTE 7: Non-Standalone, Roaming, Non-3GPP Access and EPC-5GC interworking
aspects are FFS.
### 4.3.2 UE 5GMSu functions
The UE may include many detailed subfunctions that can be used individually or
controlled individually by the 5GMSu-Aware Application. This clause breaks
down several relevant identified subfunctions for which stage 3 specification
is available.
The 5GMSu-Aware Application itself may include many functions that are not
provided by the 5GMSu Client or to the 5G UE. Examples include peripheral
discovery, notifications and social network integration. The 5GMSu-Aware
Application may also include functions that are equivalent to ones provided by
the 5GMSu Client and may only use a subset of the 5GMSu Client functions.
With respect to the Media Streamer and Media Handler functions, Figure 4.3.2-1
shows more detailed functional components of a 5GMSu Client.
Figure 4.3.2-1: Uplink 5G Media Streaming UE functions
NOTE 1: A UE is a logical device which may correspond to the tethering of
multiple physical devices or other types of realizations.
The following subfunctions are identified as part of a more detailed breakdown
of the UE 5G Uplink Media Streaming functions:
\- **5GMSu-Aware Application:** application which is out of scope of the
present specification and which uses the UE 5G Uplink Media Streaming
functions and APIs.
\- **Media Capturing:** Devices such as video cameras or microphones that
transform an analogue media signal into digital media data.
\- **Media Encoder(s):** Compresses the media data.
\- **Media Upstream Client:** encapsulates encoded media data and pushes it
upstream.
\- **Network Assistance:** uplink streaming delivery assisting functions
provided by the network to the 5GMSu Client and Media Streamer in the form of
bit rate recommendation (or throughput estimation) and/or delivery boost.
Network Assistance functionality may be supported by 5GMSu AF or ANBR-based
RAN signalling mechanisms.
\- **Core Functions:** configures the 5GMSu AS for uplink streaming reception.
**\- Service URL Handling:** a UE function that handles 3GPP Service URLs (see
clause 4.10) to support the launch of 5GMSu services and associated functions
in the UE and in the network.
NOTE 2: While this function may not be exclusive to 5GMS, the present document
only defines Service URL handling for 5GMS.
Here are the roles of the different APIs of the UE 5G Uplink Media Streaming
functions:
\- M6u: API used to control the Core Functions and the Media Remote Control
function.
\- M7u: API used to configure, activate and stop the Media Capturing, Media
Encoding(s) and Media Upstream Client functions, and also to support metrics
configuration and collection functionality.
### 4.3.3 Service Access Information for uplink media streaming
The Service Access Information is the set of parameters and addresses which
are needed by the 5GMSu Client to activate and control the uplink streaming
session.
The Service Access Information may be provided by the 5GMSu Application
Provider to the 5GMSu-Aware Application together with other service
announcement information using M8u. Alternatively, the 5GMSu Client fetches
the Service Access Information from the 5GMSu AF at reference point M5u.
Regardless of how it is provided, the Service Access Information contains
different information, depending on the collaboration model between the 5GMS
System and the 5GMSu Application Provider (which are assumed to be independent
entities), and also depending on offered features. The Service Access
Information may be provided as, or may be accessed via, a 3GPP-defined Service
URL that provides a unique resolvable identifier to the 5GMSu media session
and that may also include a reference to the Media Entry Point.
Baseline parameters are listed in table 4.3.3‑1 below:
Table 4.3.3-1: Parameters of baseline Service Access Information
Parameters Description
* * *
Provisioning Session identifier Unique identification of the M1u Provisioning
Session.
The parameters from table 4.3.3-2 below shall also be present.
Table 4.3.3-2: Streaming Access parameters
+------------------------+--------------------------------------------+ | Parameters | Description | +========================+============================================+ | Media Streamer Entries | A set of entry points. Each entry point | | | consists of one of the following: | | | | | | a. A URL endpoint on the 5GMSu AS to | | | which media can be streamed directly at | | | M4u and its associated data, or | | | | | | b. The URL of a document that can be | | | downloaded from the 5GMSu AS which | | | contains the parameters for uplink media | | | streaming at M4u. | | | | | | A Media Streamer Entry document may | | | additionally include Service Descriptions, | | | each one identified by an _External | | | reference_ that enables it to be matched | | | with a Policy Template, and each | | | describing the set of media streaming | | | parameters (e.g., bit rate, target | | | latency) that realise a Service Operation | | | Point. | | | | | | A Media Streamer Entry URL may be embedded | | | in a 3GPP Service URL. | +------------------------+--------------------------------------------+
Each entry point is defined by its parameters and identifiers. The set shall
have at least one member.
When the dynamic policy invocation feature is activated for an uplink
streaming session the parameters from table 4.3.3‑3 below are additionally
present.
Table 4.3.3-3: Parameters for dynamic policy invocation configuration
Parameters Description
* * *
Server address A list of 5GMSu AF addresses (in the form of opaque URLs) which
offer the APIs for dynamic policy invocation sent by the 5GMS Media Session
Handler. Valid Policy Template Ids A list of Policy Template identifiers which
the 5GMSu Client is authorized to use. Service Data Flow Methods A list of
recommended Service Data Flow description methods (descriptors), e.g. 5-Tuple,
ToS, 2-Tuple, etc, which should be used by the Media Session Handler to
describe the Service Data Flows for the traffic to be policed. External
reference Additional identifier for this Policy Template, unique within the
scope of its Provisioning Session, that can be cross-referenced with external
metadata about the streaming session.
When 5GMSu AF-based Network Assistance is activated for an uplink streaming
session the parameters from table 4.3.3‑4 below shall be additionally present.
Table 4.3.3-4: Parameters for 5GMSu AF-based Network Assistance configuration
Parameters Description
* * *
Server address 5GMSu AF address that offers the APIs for 5GMSu AF-based
Network Assistance, accessed by the 5GMSu Media Session Handler. The server
address shall be an opaque URL, following the 5GMS URL format.
## 4.4 Network Slicing for Downlink Media Streaming
The 5GMS architecture offers the option to create aContent Hosting
Configuration for external 5GMSd AS(s) through a provisioning interface, as
described in clause 5.4. A Content Hosting Configuration is a 5GMS-optimized
configuration that is tailored to a third-party content or service provider to
leverage the capabilities of the 5G System to achieve optimized delivery of
media content.
Upon successful setup of a Content Hosting Configuration, the 5GMSd AF uses
the NSaaS to create or use an existing corresponding network slice, and
assigns the Content Hosting Configuration domain as the network slice
selection assistance information rule. This allows any traffic to and from the
Content Hosting Configuration domain to be mapped to the correct network slice
instance.
The concept of Network Slice as a Service (NSaaS) is defined in TS 28.530
[10]. NSaaS can be offered by an MNO to third-party providers in the form of a
service. This service allows the providers to use the network slice instance
as the end user and to manage the network slice instance via a management
interface exposed by the MNO. In turn, these providers offer their own
services, e.g. OTT service, on top of the network slice instance obtained from
the MNO.
The NSaaS offered by the MNO can be characterized by certain properties
(capabilities to satisfy service level requirements), e.g.
\- radio access technology,
\- bandwidth,
\- end-to-end latency,
\- reliability,
\- mobility,
\- density,
\- guaranteed / non-guaranteed QoS,
\- security level, etc.
The interface that is used for the creation and management of network slices
is defined in TS 28.531 [11] and the information elements are defined in TS
28.541 [12].
The network (HPLMN) may provision the UE with Network Slice Selection Policy
(NSSP) as part of the UE Route Selection Policy rules as described in TS
23.503 [4]. This ensures that the UE will request a particular network slice
when establishing the PDU session. Note that this mapping can also be
established through associating an Application with the Content Hosting
Configuration and the network slice, which in turn will be associated with a
PDU session that includes the Content Hosting Configuration domain as a
matching domain.
Once the PDU session is established using the network slice instance that
corresponds to the Content Hosting Configuration, the media distribution to
the UE may start. The network slice instance may be provisioned to support
processing and edge computing in addition to the appropriate QoS allocation.
The 5GMSd AF is responsible for ensuring appropriate traffic routing, e.g.
request the routing of traffic to a local access to a Data Network (identified
by a DNAI) that hosts the media processing compute instances.
## 4.5 5G Media Streaming architecture extensions for Edge Computing
### 4.5.1 Introduction
This clause defines an architecture that enables a 5GMS Application Provider
to provision resources in the Edge DN for an application through the M1
interface by configuring an _edge processing resource template_.
Media processing in the edge may be achieved in one of two different ways at
the application layer:
1\. _Client-driven management._ 5GMS-Aware Applications that are aware of the
edge processing can directly request an edge resource and discover the EAS
that is best suited to serve the application.
2\. _AF-driven management._ The 5GMS AF automatically allocates edge resources
for new media streaming sessions on behalf of the application using
information in the 5GMS Provisioning Session.
An Edge-enabled 5GMS Client as defined in this clause leverages the SA6 Edge
Computing capabilities defined in TS 23.558 [16]. Other realizations are
possible, but are outside the scope of the present document.
### 4.5.2 5G Media Streaming combined with Edge Computing
The 5GMS architecture is extended to add support for media processing in the
edge. The extended architecture is an integration of the 5GMS architecture
defined in the present document with the architecture for enabling Edge
Applications defined in TS 23.558 [16], and the Edge Computing management
architecture defined in TS 28.538 [17]. The extended architecture is depicted
in figure 8.2-1.
Figure 4.5.2-1: Reference edge-enabled 5GMS media architecture
Based on the extended architecture, the following assumptions shall apply:
1\. A 5GMS AF that is edge-enabled shall support EES functionality including:
\- EDGE-1 API for supporting registration and provisioning of EEC functions,
and discovery by them of EAS instances.
\- EDGE-3 API towards the EAS function of 5GMS AS instances.
\- EDGE-6 API for registering with an ECS function.
\- EDGE-9 API for media session relocation.
2\. A 5GMS AF that is edge-enabled shall be capable of determining (using
information in the 5GMS Provisioning Session) whether a media streaming
session meets the eligibility criteria for using edge resources.
3\. A 5GMS AF that is edge-enabled may perform compute resource allocation
using the MnS-C interface.
4\. A 5GMS AS that is edge-enabled shall support EAS functionality including
the EDGE-3 API for registration with the EES.
5\. A Media Session Handler that is edge-enabled should support EEC
functionality including:
\- Invoking the EES function using the EDGE‑1 API.
\- Invoking the ECS function using the EDGE‑4 API.
\- EDGE-5 API exposed to the Application Client.
6\. A Media Session Handler that is edge-enabled shall be capable of
determining (using 5GMS Service Access Information) whether a media streaming
session meets the eligibility criteria for requesting edge resources.
7\. A 5GMS-Aware Application that is edge-enabled shall support Application
Client functionality and should invoke the ECS function using the EDGE‑5 API.
The extended 5GMS architecture supports both client-driven as well as AF-
driven management of the edge processing session.
The 5GMS Application Provider may request the deployment of edge resources as
part of the Provisioning Session.
\- In the client-driven approach, the 5GMS-Aware Application and/or the Media
Session Handler cover and locate a suitable 5GMS AS instance in the Edge DN.is
aware of the support of edge processing in the network and takes steps, such
as using the EDGE-5 APIs, to discover and locate a suitable 5GMS AS instance
in the Edge DN.
\- In the AF-driven approach, the 5GMS Application Provider configures the
5GMS AF to automatically deploy edge processing for the media sessions of the
corresponding Provisioning Session based on the provisioned edge processing
resource template. The 5GMS-Aware Application may not be aware of the edge
deployment and the EAS is discovered through other means, such as DNS
resolution with support from the EASDF as specified in [15].
### 4.5.3 Provisioning and Service Information
The provisioning step allows a 5GMS Application Provider to configure
information about its edge processing requirements for media streaming
sessions.
The following information shall be configurable by the 5GMS Application
Provider over reference point M1:
\- Condition for activation of edge processing, e.g. the traffic descriptors,
application identifier, geographic location of the UE, etc.
\- Selection of client-driven or AF-driven management.
\- EAS profile information for each EAS that will serve the application, such
as the service KPIs, geographical location, and service continuity support.
The EAS profile is defined in clause 8.2.4 of TS 23.558 [16].
\- Application context relocation tolerance and requirements.
For client-driven edge processing, an edge-enabled 5GMS AF shall support
sharing any required configuration information about edge processing with the
Media Session Handler through Service Access Information at reference point
M5, and the EEC embedded in the Media Session Handler shall support processing
this configuration information. This enables the EEC embedded in the Media
Session Handler to request edge processing for a streaming session from the
EES embedded in the 5GMS AF, realising reference point EDGE‑1.
### 4.5.4 Edge application context for 5GMS functions
#### 4.5.4.1 5GMS AF context
The following application state may be subject to transfer during the
application context relocation of an edge-deployed 5GMS AF instance:
\- The EEC context maintained by the EES, as defined in clause 8.2.8 of TS
23.558 [16].
\- The session context maintained by the 5GMS AF, including the currently
selected dynamic QoS and charging policy, any associated event subscriptions,
the associated edge configuration, the consumption reporting configuration,
QoE reporting configuration.
\- Other internal context information such as traffic identification and
steering information to support dynamic QoS and charging policies, history of
network assistance and dynamic policy.
NOTE: Not all context data needs to be transferred during every context
relocation operation.
#### 4.5.4.2 5GMS AS context
The following application state may be subject to transfer during the
application context relocation of an edge-deployed 5GMS AS instance:
\- The media stream context maintained by the 5GMS AS, which includes
configuration for uplink streaming endpoint and any collected QoE reports.
## 4.6 5G Downlink Media Streaming via eMBMS
### 4.6.1 Architecture for 5G Downlink Media Streaming over eMBMS
Figure 4.6.1-1 below depicts an architecture for downlink 5G Media Streaming
via eMBMS that combines the functions and reference points of the 5GMS System
with those of the MBMS System.
Figure 4.6.1-1: Architecture for downlink 5G Media Streaming over eMBMS
This arrangement allows 5GMS-based downlink media streaming to be deployed as
an MBMS-aware Application on top of eMBMS as defined in TS 23.246 [18], TS
26.346 [19], TS 26.347 [20] and TS 26.348 [21].
In this case:
1\. The 5GMSd AF configures the delivery of 5GMSd content to an MBMS Client in
the UE by creating a Service as defined in TS 26.348 [21], clause 5.3. In
order to additionally deliver this content over an MBMS User Service, the
5GMSd AF invokes xMB-C control plane procedures on the BM SC as specified in
clauses 5.3 and 5.4 of TS 26.348 [21] and, as a result, content is ingested by
the BM-SC from the 5GMSd AS using the xMB-U File Distribution procedures
specified in clause 5.5.2 of TS 26.348 [21] to allow xMB-C Session types
_Application_ and _Files_.
2\. The 5GMSd Client acts as eMBMS-Aware Application (as defined in TS 26.347
[20]) for the MBMS Client. Thus, the _MBMS Client_ is controlled by the 5GMSd
Client via the Media Streaming Service API specified in clause 6.3 of TS
26.347 [20] or via the File Delivery Application Service API specified in
clause 6.2 of TS 26.347 [20]. (This interaction is labelled MBMS-API-C in
figure 4.6.1‑1 above.)
3\. The MBMS Client receives media and other objects from the BM‑SC according
to the MBMS Download Delivery Method specified in clause 7 of TS 26.346 [19].
If an uplink is available to the MBMS Client, and if associated delivery
procedures as specified in clause 9.3 of TS 26.346 [19] are activated, the
MBMS Client uses the associated delivery procedures to recover damaged media
objects received from the BM-SC for xMB-C Session type _Files_.
4\. The _Media Server_ function interfaces with the MBMS Client per figure 5.1
of TS 26.347 [20], and shall expose the content received (and possibly
repaired) by the MBMS Client to the 5GMSd Client via the HTTP client-to-
application interface specified in clause 7.2 of TS 26.347 [20]. (This
interaction is labelled MBMS-API-U in figure 4.6.1‑1 above.)
5\. The media player sends requests according to the signalled object
availability times in the manifest. In case a media object transmitted via the
MBMS User Service is not received by the MBMS Client by the object
availability times, or if it cannot be repaired in time for consumption by the
5GMS Client, the Media Server returns an error or a partial object in response
to the Media Player\'s request for the media object, and the Media Player may
instead attempt to retrieve the media object, or ranges of it, from the 5GMSd
AS at reference point M4d, if available. The object shall be available for the
application for a well-defined time duration.
NOTE: Details on determining the availability time requirements of the
application are deferred to stage-3.
The usage of existing reference points to support these scenarios is
documented in the following clauses. Procedures for 5GMS via eMBMS are defined
in clause 5.10.
### 4.6.2 Usage of 5GMS reference points for eMBMS-based delivery
#### 4.6.2.1 Usage of M1d
Reference point M1d is used as defined in clauses 4.1 to 4.4.
In addition, the content provider shall authorize via M1d that 5GMS content
may be distributed via eMBMS.
The translation of M1d information to eMBMS delivery provisioning is left to
implementation.
NOTE: The 5GMS Application Provider may provision specific use-cases (high
velocity, specific reception area, indoor/outdoor/mobile users) at reference
point M1d. These service requirements are translated by the 5GMSd AF into
specific xMB-C calls to provision the BM‑SC with a service that has the
correct parameters for a specific location.
#### 4.6.2.2 Usage of M2d
Reference point M2d is be used as defined in clauses 4.1 to 4.4.
#### 4.6.2.3 Usage of M3d
Reference point M3d is used as defined in clauses 4.1 to 4.4.
#### 4.6.2.4 Usage of M4d
Reference point M4d is used as defined in clauses 4.1 to 4.4.
#### 4.6.2.5 Usage of M5d
Reference point M5d is used as defined in sub-clauses 4.1 to 4.4.
In addition, for 5GMS content to be distributed via eMBMS:
\- The 5GMS Service Access Information shall include the relevant information
of the eMBMS Service Announcement in order to bootstrap reception of the MBMS
service, typically via a service identifier (i.e., the serviceId attribute of
the bundleDescription.userServiceDescription element of the USD - see TS
26.346 [19]). This is passed by the Media Session Handler to the MBMS Client
via reference point MBMS-API-C [20].
When this information is present in the Service Access Information and when
the UE is MBMS-capable, the 5GMSd Client shall invoke the MBMS Client to
initiate reception of the corresponding MBMS User Service.
\- The 5GMS Service Access Information shall include relevant information from
the eMBMS Service Announcement in order for the Media Session Handler to:
i) Collect metrics of the MBMS service from the MBMS Client and report them to
the 5GMSd AF using an appropriate metrics reporting scheme.
ii) Collect media consumption information from the MBMS Client and submit it
to the 5GMSd AF in 5GMS consumption reports..
#### 4.6.2.6 Usage of M6d
Reference point M6d is used as defined in clauses 4.1 to 4.4.
#### 4.6.2.7 Usage of M7d
Reference point M7d is used as defined in clauses 4.1 to 4.4.
#### 4.6.2.8 Usage of M8d
Reference point M8d is used as defined in clauses 4.1 to 4.4.
### 4.6.3 Usage of MBMS reference points and interfaces
#### 4.6.3.1 Usage of xMB-C
The 5GMSd AF provisions MBMS User Services in the BM‑SC as defined in clauses
5.3 and 5.4 of TS 26.348 [21].
#### 4.6.3.2 Usage of xMB-U
The BM‑SC ingests content from the 5GMSd AS using the push-based ingest
method.
#### 4.6.3.3 Usage of MBMS User Services and Delivery Methods
The MBMS User Service Announcement as defined in TS 26.346 is used to
advertise the availability of 5GMS content delivered via eMBMS.
A _Generic application service_ (as defined in clause 5.7 of TS 26.346 [19])
is provisioned in the BM‑SC and the application service entry point instance
is a downlink 5GMS streaming manifest, for example a DASH MPD or HLS playlist.
NOTE: The support of multiple manifests for the same media streaming session
is not covered in 5GMS. Hybrid DASH/HLS is supported in eMBMS. Usage together
with 5GMS is left to implementation.
#### 4.6.3.4 Usage of MBMS-API-C
The MBMS Client operates according to the procedures defined in clause 6.3 of
TS 26.347 [20] at reference point MBMS-API-C when communicating with the 5GMSd
Client.
The MBMS Client exposes information to the Media Session Handler to manage the
reception of MBMS User Services.
The Media Session Handler configures the MBMS Client for consumption and QoE
metrics reporting.
The MBMS Client provides consumption and QoE metrics reports to the Media
Session Handler.
#### 4.6.3.5 Usage of MBMS-API-U
The MBMS Client operates according to the procedures defined in clause 7 of TS
26.347 [20] at reference point MBMS-API-U when communicating with the 5GMSd
Client.
The MBMS Client provides the streaming manifest, as well as updates of the
manifest, to the 5GMSd Client and implements policies for hybrid services
based on clause 7 of TS 26.347 [20].
The MBMS Client exposes fully- and partially-received media objects to the
Media Player in the 5GMSd Client.
## 4.7 Data collection, reporting and exposure for 5GMS
### 4.7.1 Reference architecture instantiation
The abstract data collection and reporting architecture defined in clause 4 of
TS 26.531 [22] and depicted in figure 4.2‑1 of TS 26.531 [22] is instantiated
in the 5G Media Streaming architecture as shown in figure 4.7.1‑1 and as
defined below.
Figure 4.7.1‑1: Data collection and reporting architecture instantiation for
5G Media Streaming
The functional elements in this instantiation are defined as follows:
\- The role of the _Application Service Provider_ in the abstract architecture
is played by the 5GMS Application Provider.
\- The _Data Collection AF_ for 5G Media Streaming is instantiated in the 5GMS
AF.
\- The _Direct Data Collection Client_ for 5G Media Streaming is instantiated
in the Media Session Handler. This takes logical responsibility for the UE
data collection activities of the _Metrics Collection & Reporting_ and
_Consumption Collection & Reporting_ subfunctions and the subsequent reporting
of this UE data via reference point M5. It also takes logical responsibility
for the logging of ANBR-based Network Assistance invocations by the _Network
Assistance_ subfunction and their subsequent reporting to the Data Collection
AF instantiated in the 5GMS AF via reference point R2.
\- The _Provisioning AF_ of the Application Service Provider is not
instantiated in the 5GMS architecture. Data collection and reporting is
instead provisioned using the procedures defined in the present document.
\- The _Indirect Data Collection Client_ is not instantiated in the 5GMS
architecture. Indirect reporting of UE data is outside the scope of 5G Media
Streaming.
\- The role of the _AS_ data collection client in the abstract reference
architecture is played by 5GMS AS. This may be deployed as a trusted AS within
the 5G System or deployed externally.
\- The _Event Consumer AF_ is instantiated in the 5GMS Application Provider as
a consumer of 5G Media Streaming events from the Data Collection AF.
The reference points as defined as follows in this instantiation:
**R1** This reference point is not instantiated in the 5GMS architecture.
**M1** Provisioning of data collection and reporting features in the Data
Collection AF.
**R2** Direct data reporting by the Direct Data Collection Client to the Data
Collection AF of ANBR-based Network Assistance invocations.
For the provision of QoE metrics and consumption reports, R2 is instead
logically realised by the combination of the following components:
> \- Internal interfaces between the Direct Data Reporting Client and its
> subordinate functions, namely Metrics Collection & Reporting and Consumption
> Reporting & Reporting.,
>
> \- Internal interface between the Media Session Handler and its subordinate
> Direct Data Collection Client function.
>
> \- Reference point M5, as defined below.
>
> \- Internal interface between the 5GMS AF and its subordinate Data
> Collection AF function.
**M5** Direct data reporting by the Direct Data Collection Client to the Data
Collection AF, via the Media Session Handler and 5GMS AF.
**R3** This reference point is not instantiated in the 5GMS architecture.
**R4** Media streaming access reporting by the 5GMS AS to the Data Collection
AF.
**R5** Event exposure by the Data Collection AF to subscribing NWDAF [23]
instances.
**R6** Event exposure by the Data Collection AF to subscribing Event Consumer
AF instances in the 5GMS Application Provider.
**R7** This reference point is not instantiated in the 5GMS architecture.
**M6** Configuration of 5GMS-related data reporting by the 5GMS-Aware
Application.
**R8** This reference point is not instantiated in the 5GMS architecture.
### 4.7.2 UE data reporting for 5GMS
#### 4.7.2.1 UE data reporting procedures for downlink media streaming
The following UE data reporting procedures are in scope for the instantiation
of the abstract data collection and reporting architecture in the downlink
5GMS architecture:
1\. The procedures defined in clause 5.5 shall be used by the Direct Data
Collection Client instantiated in the Media Session Handler to report _QoE
metrics for downlink media streaming_ to the Data Collection AF instantiated
in the 5GMSd AF.
2\. The procedures defined in clause 5.6 shall be used by the Direct Data
Collection Client instantiated in the Media Session Handler to report
_consumption of downlink media streaming_ to the Data Collection AF
instantiated in the 5GMSd AF.
3.- Invocations of the _downlink dynamic policy_ procedures defined in clause
5.8 shall be logged by the 5GMSd AF and reported to its subordinate Data
Collection AF.
4\. Invocations of the _AF-based downlink Network Assistance_ procedures
defined in clause 5.9.2 shall be logged by the 5GMSd AF and reported to its
subordinate Data Collection AF during active AF-based Network Assistance
sessions.
5\. The procedures defined in clause 5.11.1 and 5.11.2 shall be used by the
5GMSd AS to report _downlink media streaming access_ _activity_ to the Data
Collection AF instantiated in the 5GMSd AF via reference point R4.
6\. The procedures defined in clause 4.7.2.3 shall be used by the Direct Data
Collection Client instantiated in the Media Session Handler to report
invocations of the _ANBR-based downlink Network Assistance_ procedures to the
Data Collection AF instantiated in the 5GMSd AF via reference point R2.
#### 4.7.2.2 UE data reporting procedures for uplink media streaming
The following UE data reporting procedures are in scope for the instantiation
of the abstract data collection and reporting architecture in the uplink 5GMS
architecture:
1\. Invocations of the _AF-based uplink Network Assistance_ procedures defined
in clause 6.5 shall be logged by the 5GMSu AF and reported to its subordinate
Data Collection AF during active AF-based Network Assistance sessions.
2\. The procedures defined in clause 4.7.2.3 shall be used by the Direct Data
Collection Client instantiated in the Media Session Handler to report
invocations of the _ANBR-based uplink Network Assistance_ procedures to the
Data Collection AF instantiated in the 5GMSu AF via reference point R2. .
3\. The procedures defined in clause 6.8.1 and 6.8.2 shall be used by the
5GMSu AS to report _uplink media streaming access_ _activity_ to the Data
Collection AF instantiated in the 5GMSu AF via reference point R4.
#### 4.7.2.3 UE data reporting of ANBR-based Network Assistance invocations
Invocations of ANBR-based Network Assistance by the Media Session Handler for
both downlink and uplink media streaming shall be reported by the Network
Assistance subfunction of the Direct Data Collection Client to the Data
Collection AF at reference point R2 according to the reporting requirements
indicated in a data collection client configuration it has previously obtained
at this reference point.
ANBR-based Network Assistance invocation reports shall contain the following
parameters:
\- Timestamp of the invocation.
\- UE identification, e.g. the GPSI or current IP address.
\- The DNN and S-NSSAI.
\- UE location.
\- Recommended bit rate.
### 4.7.3 UE data processing for 5GMS
#### 4.7.3.1 UE data processing procedures for downlink media streaming
The following restriction dimensions and aggregation functions defined in
clause 4.5.2 of TS 26.531 [22] may be provisioned in a Data Access Profile as
part of a 5GMSd Provisioning Session and shall, as a consequence, be applied
to reported UE data prior to exposing it to event consumers.
Table 4.7.3.1‑1: Valid processing of downlink media streaming UE data by the
Data Collection AF
| Restriction dimension | Aggregation function |  |  |  |  |  |  |   
---|---|---|---|---|---|---|---|---|---  
| Time | User | Location | None | Count | Mean | Maximum | Minimum | Sum  
QoE metrics for downlink media streaming | Yes | Yes | Yes | Yes | Yes (NOTE 1) | Yes (NOTE 1) | Yes (NOTE 1) | Yes (NOTE 1) | Yes (NOTE 1)  
Consumption of downlink media streaming | Yes | Yes | Yes | Yes | Yes (NOTE 2) | No | No | No | No  
Downlink dynamic policy invocations | Yes | Yes | Yes | Yes | Yes (NOTE 3) | No | No | No | No  
AF-based downlink Network Assistance invocations | Yes | Yes | Yes | Yes | Yes (NOTE 3) | Yes (NOTE 4) | Yes (NOTE 4) | Yes (NOTE 4) | No  
ANBR-based downlink Network Assistance invocations | Yes | Yes | Yes | Yes | Yes (NOTE 3) | Yes (NOTE 4) | Yes (NOTE 4) | Yes (NOTE 4) | No  
Downlink media streaming access activity | Yes | Yes | Yes | Yes | Yes (NOTE 2) | No | No | No | No  
NOTE 1: Aggregation functions applied individually to all exposed metrics within the scope of the applicable restriction dimension(s). NOTE 2: Number of downlink media streaming sessions within the scope of the applicable restriction dimension(s). NOTE 3: Number of invocations within the scope of the applicable restriction dimension(s). NOTE 4: Aggregation functions applied to bit rate recommendations within the scope of the applicable restriction dimension(s). |  |  |  |  |  |  |  |  |   
#### 4.7.3.2 UE data processing procedures for uplink media streaming
The following restriction dimensions and aggregation functions defined in
clause 4.5.2 of TS 26.531 [22] may be provisioned in a Data Access Profile as
part of a 5GMSu Provisioning Session and shall, as a consequence, be applied
to reported UE data prior to exposing it to event consumers.
Table 4.7.3.2‑1: Valid processing of uplink media streaming UE data by the
Data Collection AF
| Restriction dimension | Aggregation function |  |  |  |  |  |  |   
---|---|---|---|---|---|---|---|---|---  
| Time | User | Location | None | Count | Mean | Maximum | Minimum | Sum  
AF-based uplink Network Assistance invocations | Yes | Yes | Yes | Yes | Yes (NOTE 1) | Yes (NOTE 2) | Yes (NOTE 2) | Yes (NOTE 2) | No  
ANBR-based uplink Network Assistance invocations | Yes | Yes | Yes | Yes | Yes (NOTE 1) | Yes (NOTE 2) | Yes (NOTE 2) | Yes (NOTE 2) | No  
Uplink media streaming access activity | Yes | Yes | Yes | Yes | Yes (NOTE 3) | No | No | No | No  
NOTE 1: Number of invocations within the scope of the applicable restriction dimension(s). NOTE 2: Aggregation functions applied to bit rate recommendations within the scope of the applicable restriction dimension(s). NOTE 3: Number of uplink media streaming sessions within the scope of the applicable restriction dimension(s). |  |  |  |  |  |  |  |  |   
### 4.7.4 Event exposure of 5GMS UE data
#### 4.7.4.1 Event exposure for downlink media streaming UE data
The following types of events are exposed by the Data Collection AF
instantiated in the 5GMSd AF:
1\. _QoE metrics for downlink media streaming_ reported by the Media Session
Handler to the Data Collection AF instantiated in the 5GMSd AF, as defined in
clauses 4.7.4.3 and 4.7.4.4.
2\. _Consumption of downlink media streaming_ reported by the Media Session
Handler to the Data Collection AF instantiated in the 5GMSd AF, as defined in
clauses 4.7.4.3 and 4.7.4.5.
3.- Invocations of _downlink dynamic policies_ in the 5GMSd AF by the Media
Session Handler, as defined in clauses 4.7.4.3 and 4.7.4.6.
4\. Invocations of _AF-based downlink Network Assistance_ in the 5GMSd AF by
the Media Session Handler, as defined in clauses 4.7.4.3 and 4.7.4.7.
5\. _Downlink media streaming access activity_ reported by the 5GMSd AS to the
Data Collection AF instantiated in the 5GMSd AF, as defined in clauses 4.7.4.3
and 4.7.4.8.
6\. Invocations of _ANBR-based downlink Network Assistance_ reported by the
Direct Data Collection Client instantiated in the Media Session Handler to the
Data Collection AF instantiated in the 5GMSd AF, as defined in clauses 4.7.4.3
and 4.7.4.7.
High-level procedures for downlink media streaming event exposure are defined
in clause 5.11.3.
#### 4.7.4.2 Event exposure for uplink media streaming UE data
The following types of events are exposed by the Data Collection AF
instantiated in the 5GMSd AF:
1\. Invocations of _AF-based uplink Network Assistance_ in the 5GMSd AF by the
Media Session Handler, as defined in clauses 4.7.4.3 and 4.7.4.7.
2\. Invocations of _ANBR-based uplink Network Assistance_ reported by the
Direct Data Collection Client instantiated in the Media Session Handler to the
Data Collection AF instantiated in the 5GMSu AF, as defined in clauses 4.7.4.3
and 4.7.4.7.
3\. _Uplink media streaming access activity_ reported by the 5GMSu AS to the
Data Collection AF instantiated in the 5GMSu AF, as defined in clauses 4.7.4.3
and 4.7.4.8.
High-level procedures for uplink media streaming event exposure are defined in
clause 6.8.3.
#### 4.7.4.3 Common baseline parameters for event exposure
The Data Collection AF shall include the following common baseline parameters
in each event it exposes to event consumers:
Table 4.7.4.3‑1: Common baseline parameters for event collections
+--------------------------+-------------+--------------------------+ | Parameter | Cardinality | Description | +==========================+=============+==========================+ | Collection timestamp | 1..1 | The date--time at which | | | | this collection was | | | | exposed by the Data | | | | Collection AF as an | | | | event to its subscribed | | | | event consumers. | +--------------------------+-------------+--------------------------+ | Start timestamp | 1..1 | Date--time of earliest | | | | data sample included in | | | | or summarised by this | | | | collection. | +--------------------------+-------------+--------------------------+ | End timestamp | 1..1 | Date--time of latest | | | | data sample included in | | | | or summarised by this | | | | collection. | +--------------------------+-------------+--------------------------+ | Sample count | 1..1 | The number of data | | | | samples included in or | | | | summarised by this | | | | collection. | | | | | | | | (Where summary records | | | | are included in the | | | | collection, the number | | | | of records in the | | | | collection differs from | | | | this number.) | +--------------------------+-------------+--------------------------+ | Media streaming | 1..1 | Indicating whether this | | direction | | collection relates to | | | | downlink media streaming | | | | sessions or to uplink | | | | media streaming | | | | sessions. | +--------------------------+-------------+--------------------------+ | Record summarisation | 1..* | Nature of the records | | descriptor | | included in this | | | | collection. One or more | | | | of the following | | | | aggregation functions | | | | are used to generate | | | | records: | | | | | | | | _\- None:_ Collection | | | | includes a separate | | | | record for each data | | | | sample. | | | | | | | | _\- Count:_ collection | | | | describes only the | | | | number of data samples | | | | between _Start | | | | timestamp_ and _End | | | | timestamp_ with no | | | | individual records | | | | provided. | | | | | | | | _\- Mean:_ Collection | | | | includes a record | | | | summarising the mean | | | | average value of data | | | | samples over a certain | | | | time period. | | | | | | | | _\- Minimum:_ Collection | | | | includes a record | | | | summarising the smallest | | | | value of data samples | | | | over a certain time | | | | period. | | | | | | | | _\- Maximum:_ Collection | | | | includes a record | | | | summarising the largest | | | | value of data samples | | | | over a certain time | | | | period. | | | | | | | | _\- Sum:_ Collection | | | | includes a record | | | | summarising the sum of | | | | data sample values over | | | | a certain time period. | | | | | | | | As specified in the | | | | following clauses, not | | | | all aggregation | | | | functions are applicable | | | | to all types of media | | | | streaming event. | +--------------------------+-------------+--------------------------+ | Records | 0..* | A set of records, each | | | | one describing a UE data | | | | sample or summarising a | | | | set of UE data samples. | +--------------------------+-------------+--------------------------+
And for each record in the collection:
> Table 4.7.4.3‑2: Common baseline parameters for event records
+--------------------------+-------------+--------------------------+ | Parameter | Cardinality | Description | +==========================+=============+==========================+ | Record type | 1..1 | Indicating the nature of | | | | information carried in | | | | this record: | | | | | | | | - Individual data | | | | sample record. | | | | | | | | - Mean parameter values | | | | summary record. | | | | | | | | - Minimum parameter | | | | values summary record. | | | | | | | | - Maximum parameter | | | | values summary record. | | | | | | | | - Sum parameter values | | | | summary record. | | | | | | | | Not all record types are | | | | applicable to all types | | | | of media streaming | | | | event. | +--------------------------+-------------+--------------------------+ | Record timestamp | 1..1 | The date--time at which | | | | the UE data carried in | | | | this record was sampled | | | | or summarised. | +--------------------------+-------------+--------------------------+ | Provisioning Session | 0..1 | The Provisioning Session | | identifier | | to which this record | | | | pertains. | | | | | | | | Present only for | | | | individual data sample | | | | record type. | +--------------------------+-------------+--------------------------+ | Media streaming session | 0..1 | A value synthesised by | | identifier | | the 5GMS System that | | | | uniquely identifies the | | | | media streaming session | | | | to which this record | | | | pertains. | | | | | | | | Present only for | | | | individual data sample | | | | record type. | +--------------------------+-------------+--------------------------+ | UE identification | 0..1 | GPSI of the requesting | | | | UE or a stable globally | | | | unique string | | | | identifying the | | | | requesting Media Session | | | | Handler. | | | | | | | | Present only for | | | | individual data sample | | | | record type and only | | | | when exposure is | | | | permitted by the data | | | | exposure restrictions in | | | | force for the event type | | | | in question. | +--------------------------+-------------+--------------------------+ | Data Network Name | 0..1 | Identifying the Data | | | | Network of the M4 media | | | | streaming session. | | | | | | | | Present only for | | | | individual data sample | | | | record type. | +--------------------------+-------------+--------------------------+ | Slice identification | 0..1 | The S-NSSAI identifying | | | | the Network Slice of the | | | | M4 media streaming | | | | session. | | | | | | | | Present only for | | | | individual data sample | | | | record type. | +--------------------------+-------------+--------------------------+ | UE location | 0..1 | The location of the UE | | | | for the data sample | | | | described by this | | | | record. | | | | | | | | Present only for | | | | individual data sample | | | | record type and only | | | | when exposure is | | | | permitted by the data | | | | exposure restrictions in | | | | force for the event type | | | | in question. | +--------------------------+-------------+--------------------------+
#### 4.7.4.4 Event exposure of QoE metrics UE data
For QoE metrics reported to the 5GMSd AF by the Media Session Handler, the
Data Collection AF shall include the following parameters (derived from the
baseline parameters defined in table 4.7.4.3‑1) in each event it exposes to
event consumers:
Table 4.7.4.4‑1: Parameters for QoE metrics collection
+--------------------------+-------------+--------------------------+ | Parameter | Cardinality | Description | +==========================+=============+==========================+ | Collection timestamp | 1..1 | The date--time at which | | | | the collection was | | | | exposed by the Data | | | | Collection AF as an | | | | event to its subscribed | | | | event consumers. | +--------------------------+-------------+--------------------------+ | Start timestamp | 1..1 | Date--time of the | | | | earliest QoE metrics | | | | report included in or | | | | summarised by this | | | | collection. | +--------------------------+-------------+--------------------------+ | End timestamp | 1..1 | Date--time of the latest | | | | QoE metrics report | | | | included in or | | | | summarised by this | | | | collection. | +--------------------------+-------------+--------------------------+ | Sample count | 1..1 | The number of QoE | | | | metrics reports included | | | | in or summarised by this | | | | collection. | | | | | | | | (Where summary records | | | | are included in the | | | | collection, the number | | | | of records in the | | | | collection differs from | | | | this number.) | +--------------------------+-------------+--------------------------+ | Media streaming | 1..1 | Collections of QoE | | direction | | metrics records only | | | | apply to downlink media | | | | streaming. | +--------------------------+-------------+--------------------------+ | Record summarisation | 1..* | Nature of the records | | descriptor | | included in this | | | | collection. One or more | | | | of the following | | | | aggregation functions | | | | are used to generate | | | | records: | | | | | | | | _\- None:_ Collection | | | | includes a separate | | | | record for each QoE | | | | metrics report. | | | | | | | | _\- Count:_ Collection | | | | describes only the | | | | number of QoE metrics | | | | reports between _Start | | | | timestamp_ and _End | | | | timestamp_ with no | | | | individual records | | | | provided. | | | | | | | | _\- Mean:_ Collection | | | | includes a record | | | | summarising the mean | | | | average value of each | | | | QoE metric over a | | | | certain time period. | | | | | | | | _\- Minimum:_ Collection | | | | includes a record | | | | summarising the smallest | | | | value of each QoE metric | | | | over a certain time | | | | period. | | | | | | | | _\- Maximum:_ Collection | | | | includes a record | | | | summarising the largest | | | | value of each QoE metric | | | | over a certain time | | | | period. | | | | | | | | _\- Sum:_ Collection | | | | includes a record | | | | summarising the sum of | | | | the QoE metric values | | | | over a certain time | | | | period. | +--------------------------+-------------+--------------------------+ | Records | 0..* | A set of QoE metrics | | | | events, each one | | | | describing a QoE metrics | | | | report or summarising a | | | | set of QoE metrics | | | | reports. | +--------------------------+-------------+--------------------------+
And for each record in the collection the following parameters shall be
included, extending the baseline parameter set defined in table 4.7.4.3‑2:
> Table 4.7.4.4‑2: Parameters for QoE metrics event
+-------------+-------------+-------------+-------------+-------------+ | Parameter | Cardinality | Description | | | +=============+=============+=============+=============+=============+ | Record type | 1..1 | Indicating | | | | | | the nature | | | | | | of | | | | | | information | | | | | | carried in | | | | | | this QoE | | | | | | metrics | | | | | | event: | | | | | | | | | | | | - | | | | | | Individual | | | | | | QoE metrics | | | | | | report | | | | | | record. | | | | | | | | | | | | - Mean | | | | | | parameter | | | | | | values | | | | | | summary | | | | | | record. | | | | | | | | | | | | - Minimum | | | | | | parameter | | | | | | values | | | | | | summary | | | | | | record. | | | | | | | | | | | | - Maximum | | | | | | parameter | | | | | | values | | | | | | summary | | | | | | record. | | | | | | | | | | | | - Sum | | | | | | parameter | | | | | | values | | | | | | summary | | | | | | record. | | | +-------------+-------------+-------------+-------------+-------------+ | Record | 1..1 | For | | | | timestamp | | individual | | | | | | QoE metrics | | | | | | report | | | | | | records, | | | | | | the | | | | | | date--time | | | | | | at which | | | | | | the parent | | | | | | QoE metrics | | | | | | report was | | | | | | generated | | | | | | by the | | | | | | Media | | | | | | Session | | | | | | Handler. | | | | | | | | | | | | Otherwise, | | | | | | the | | | | | | date--time | | | | | | at which | | | | | | the summary | | | | | | record was | | | | | | generated | | | | | | by the Data | | | | | | Collection | | | | | | AF | | | | | | i | | | | | | nstantiated | | | | | | in the | | | | | | 5GMS AF. | | | +-------------+-------------+-------------+-------------+-------------+ | P | 0..1 | The | | | | rovisioning | | P | | | | Session | | rovisioning | | | | identifier | | Session to | | | | | | which this | | | | | | QoE metrics | | | | | | record | | | | | | pertains. | | | | | | | | | | | | Present | | | | | | only for | | | | | | individual | | | | | | QoE metrics | | | | | | report | | | | | | record | | | | | | type. | | | +-------------+-------------+-------------+-------------+-------------+ | Media | 0..1 | A value | | | | streaming | | synthesised | | | | session | | by the 5GMS | | | | identifier | | System that | | | | | | uniquely | | | | | | identifies | | | | | | the media | | | | | | streaming | | | | | | session to | | | | | | which this | | | | | | QoE metrics | | | | | | record | | | | | | pertains. | | | | | | | | | | | | Present | | | | | | only for | | | | | | individual | | | | | | QoE metrics | | | | | | report | | | | | | record | | | | | | type. | | | +-------------+-------------+-------------+-------------+-------------+ | UE | 0..1 | GPSI of the | | | | ide | | UE or a | | | | ntification | | stable | | | | | | globally | | | | | | unique | | | | | | string | | | | | | identifying | | | | | | the Media | | | | | | Session | | | | | | Handler | | | | | | that | | | | | | reported | | | | | | QoE | | | | | | metrics, | | | | | | co | | | | | | rresponding | | | | | | to the | | | | | | reporting | | | | | | client | | | | | | identifier | | | | | | described | | | | | | in | | | | | | cl | | | | | | ause 4.7.5. | | | | | | | | | | | | Present | | | | | | only for | | | | | | individual | | | | | | QoE metrics | | | | | | report | | | | | | record | | | | | | type, and | | | | | | only when | | | | | | exposure is | | | | | | permitted | | | | | | by the data | | | | | | exposure | | | | | | r | | | | | | estrictions | | | | | | in force. | | | +-------------+-------------+-------------+-------------+-------------+ | Data | 0..1 | Identifying | | | | Network | | the Data | | | | Name | | Network of | | | | | | the M4 | | | | | | media | | | | | | streaming | | | | | | session for | | | | | | which the | | | | | | QoE metrics | | | | | | were | | | | | | reported. | | | | | | | | | | | | Present | | | | | | only for | | | | | | individual | | | | | | QoE metrics | | | | | | report | | | | | | record | | | | | | type. | | | +-------------+-------------+-------------+-------------+-------------+ | Slice | 0..1 | The S-NSSAI | | | | ide | | identifying | | | | ntification | | the Network | | | | | | Slice of | | | | | | the M4 | | | | | | media | | | | | | streaming | | | | | | session for | | | | | | which the | | | | | | QoE metrics | | | | | | were | | | | | | reported. | | | | | | | | | | | | Present | | | | | | only for | | | | | | individual | | | | | | QoE metrics | | | | | | report | | | | | | record | | | | | | type. | | | +-------------+-------------+-------------+-------------+-------------+ | UE location | 0..1 | The | | | | | | location of | | | | | | the UE when | | | | | | the QoE | | | | | | metrics | | | | | | were | | | | | | collected. | | | | | | | | | | | | Present | | | | | | only for | | | | | | individual | | | | | | QoE metrics | | | | | | report | | | | | | record | | | | | | type, and | | | | | | only when | | | | | | exposure is | | | | | | permitted | | | | | | by the data | | | | | | exposure | | | | | | r | | | | | | estrictions | | | | | | in force. | | | +-------------+-------------+-------------+-------------+-------------+ | Record | 1..1 | A | | | | subtype | | full | | | | | | y-qualified | | | | | | URI that | | | | | | uniquely | | | | | | identifies | | | | | | the QoE | | | | | | metrics | | | | | | reporting | | | | | | scheme and | | | | | | QoE metrics | | | | | | event | | | | | | described | | | | | | by this | | | | | | record. | | | | | | This is | | | | | | formed by | | | | | | co | | | | | | ncatenating | | | | | | a metrics | | | | | | reporting | | | | | | scheme | | | | | | identifier | | | | | | (such as | | | | | | the URN | | | | | | specified | | | | | | in | | | | | | clause 10.5 | | | | | | of | | | | | | TS 26.247 | | | | | | [7]) with | | | | | | a term | | | | | | identifier | | | | | | dis | | | | | | criminating | | | | | | the type of | | | | | | QoE metric. | | | +-------------+-------------+-------------+-------------+-------------+ | QoE metrics | 1..1 | A list of | | | | list | | QoE metrics | | | | | | of a single | | | | | | type | | | | | | derived | | | | | | from a | | | | | | single UE | | | | | | data | | | | | | report. | | | +-------------+-------------+-------------+-------------+-------------+ | | Sample | 0..1 | The moment | | | | timestamp | | in time at | | | | | | which this | | | | | | QoE metric | | | | | | was | | | | | | sampled. | | +-------------+-------------+-------------+-------------+-------------+ | | Sample | 0..1 | The time | | | | duration | | duration | | | | | | over which | | | | | | this QoE | | | | | | metric was | | | | | | sampled. | | +-------------+-------------+-------------+-------------+-------------+ | | Media | 0..1 | The time | | | | timestamp | | point in | | | | | | the media | | | | | | at which | | | | | | this QoE | | | | | | metric was | | | | | | sampled. | | +-------------+-------------+-------------+-------------+-------------+ | | QoE metrics | 1..1 | A set of | | | | | | name--value | | | | | | pairs | | | | | | associated | | | | | | with this | | | | | | QoE metric. | | +-------------+-------------+-------------+-------------+-------------+ | | | Metric key | 1..1 | A token | | | | | | that | | | | | | uniquely | | | | | | identifies | | | | | | the type of | | | | | | metric | | | | | | within the | | | | | | scope of | | | | | | the _Record | | | | | | subtype_. | +-------------+-------------+-------------+-------------+-------------+ | | | Metric | 0..1 | The value | | | | value | | of the | | | | | | metric. | +-------------+-------------+-------------+-------------+-------------+
#### 4.7.4.5 Event exposure of consumption reporting UE data
For media consumption reported to the 5GMSd AF by the Media Session Handler,
the Data Collection AF shall include the following parameters (derived from
the baseline parameters defined in table 4.7.4.3‑1) in each event it exposes
to event consumers:
Table 4.7.4.5‑1: Parameters for consumption reporting units collection
+--------------------------+-------------+--------------------------+ | Parameter | Cardinality | Description | +==========================+=============+==========================+ | Collection timestamp | 1..1 | The date--time at which | | | | the collection was | | | | exposed by the Data | | | | Collection AF as an | | | | event to its subscribed | | | | event consumers. | +--------------------------+-------------+--------------------------+ | Start timestamp | 1..1 | Date--time of the | | | | earliest consumption | | | | reporting unit included | | | | in or summarised by this | | | | collection. | +--------------------------+-------------+--------------------------+ | End timestamp | 1..1 | Date--time of the latest | | | | consumption reporting | | | | unit included in or | | | | summarised by this | | | | collection. | +--------------------------+-------------+--------------------------+ | Sample count | 1..1 | The number of | | | | consumption reporting | | | | unit records included in | | | | or summarised by this | | | | collection. | | | | | | | | (Where summary records | | | | are included in the | | | | collection, the number | | | | of records in the | | | | collection differs from | | | | this number.) | +--------------------------+-------------+--------------------------+ | Media streaming | 1..1 | Collections of | | direction | | consumption reporting | | | | units only apply to | | | | downlink media | | | | streaming. | +--------------------------+-------------+--------------------------+ | Record summarisation | 1..* | Nature of the records | | descriptor | | included in this | | | | collection. One or more | | | | of the following | | | | aggregation functions | | | | are used to generate | | | | records: | | | | | | | | _\- None:_ Collection | | | | includes a separate | | | | record for each | | | | consumption reporting | | | | unit. | | | | | | | | _\- Count:_ Collection | | | | describes only the | | | | number of consumption | | | | reporting units between | | | | _Start timestamp_ and | | | | _End timestamp_ with no | | | | individual records | | | | provided. | | | | | | | | _\- Mean:_ Not applicable | | | | to consumption | | | | reporting. | | | | | | | | _\- Minimum:_ Not | | | | applicable to | | | | consumption reporting. | | | | | | | | _\- Maximum:_ Not | | | | applicable to | | | | consumption reporting. | | | | | | | | _\- Sum:_ Not applicable | | | | to consumption | | | | reporting. | +--------------------------+-------------+--------------------------+ | Records | 0..* | A set of consumption | | | | reporting events, each | | | | one describing a | | | | consumption reporting | | | | unit. | +--------------------------+-------------+--------------------------+
And for each record in the collection the following parameters shall be
included, extending the baseline parameter set defined in table 4.7.4.3‑2:
> Table 4.7.4.5‑2: Parameters for consumption reporting event
+--------------------------+-------------+--------------------------+ | Parameter | Cardinality | Description | +==========================+=============+==========================+ | Record type | 1..1 | Indicating the nature of | | | | information carried in | | | | this consumption | | | | reporting event: | | | | | | | | - Individual | | | | consumption reporting | | | | unit record. | +--------------------------+-------------+--------------------------+ | Record timestamp | 1..1 | The date--time at which | | | | this consumption | | | | reporting unit began. | +--------------------------+-------------+--------------------------+ | Provisioning Session | 0..1 | The Provisioning Session | | identifier | | to which this | | | | consumption reporting | | | | unit record pertains. | | | | | | | | Present only for | | | | individual consumption | | | | reporting unit record | | | | type. | +--------------------------+-------------+--------------------------+ | Media streaming session | 0..1 | A value synthesised by | | identifier | | the 5GMS System that | | | | uniquely identifies the | | | | media streaming session | | | | to which this | | | | consumption reporting | | | | unit record pertains. | | | | | | | | Present only for | | | | individual consumption | | | | reporting unit record | | | | type. | +--------------------------+-------------+--------------------------+ | UE identification | 0..1 | GPSI of the UE or a | | | | stable globally unique | | | | string identifying the | | | | Media Session Handler | | | | that reported media | | | | consumption, | | | | corresponding to the | | | | reporting client | | | | identifier described in | | | | clause 4.7.4. | | | | | | | | Present only for | | | | individual consumption | | | | reporting unit record | | | | type, and only when | | | | exposure is permitted by | | | | the data exposure | | | | restrictions in force. | +--------------------------+-------------+--------------------------+ | Data Network Name | 0..1 | Identifying the Data | | | | Network of the M4 media | | | | streaming session for | | | | which media consumption | | | | was reported. | | | | | | | | Present only for | | | | individual consumption | | | | reporting unit record | | | | type. | +--------------------------+-------------+--------------------------+ | Slice identification | 0..1 | The S-NSSAI identifying | | | | the Network Slice of the | | | | M4 media streaming | | | | session for which media | | | | consumption was | | | | reported. | | | | | | | | Present only for | | | | individual consumption | | | | reporting unit record | | | | type. | +--------------------------+-------------+--------------------------+ | UE location | 0..1 | The location of the UE | | | | when media was consumed. | | | | | | | | Present only for | | | | individual consumption | | | | reporting unit record | | | | type, and only when | | | | exposure is permitted by | | | | the data exposure | | | | restrictions in force. | +--------------------------+-------------+--------------------------+ | Duration | 1..1 | The duration of this | | | | consumption reporting | | | | unit. | +--------------------------+-------------+--------------------------+ | Media endpoint | 0..1 | The IP address and port | | identifier | | number of the M4d | | | | endpoint used to access | | | | the media during this | | | | consumption reporting | | | | unit. | | | | | | | | Present only when | | | | exposure is permitted by | | | | the data exposure | | | | restrictions in force | | | | for the event in | | | | question. | +--------------------------+-------------+--------------------------+ | Media Player Entry URL | 1..1 | The Media Player Entry | | | | URL to which this | | | | consumption reporting | | | | unit pertains. | +--------------------------+-------------+--------------------------+ | Media component | 1..1 | A token (e.g., an | | identifier | | MPEG‑DASH representation | | | | identifier) identifying | | | | the media component of | | | | the Media Player Entry | | | | that was consumed during | | | | this consumption | | | | reporting unit. | +--------------------------+-------------+--------------------------+
#### 4.7.4.6 Event exposure of dynamic policy invocation UE data
For dynamic policy invocations on the 5GMS AF by the Media Session Handler,
the Data Collection AF shall include the following parameters (derived from
the baseline parameters defined in table 4.7.4.3‑1) in each event it exposes
to event consumers:
Table 4.7.4.6‑1: Parameters for dynamic policy invocations collection
+--------------------------+-------------+--------------------------+ | Parameter | Cardinality | Description | +==========================+=============+==========================+ | Collection timestamp | 1..1 | The date--time at which | | | | the collection was | | | | exposed by the Data | | | | Collection AF as an | | | | event to its subscribed | | | | event consumers. | +--------------------------+-------------+--------------------------+ | Start timestamp | 1..1 | Date--time of the | | | | earliest dynamic policy | | | | invocation included in | | | | or summarised by this | | | | collection. | +--------------------------+-------------+--------------------------+ | End timestamp | 1..1 | Date--time of the latest | | | | dynamic policy | | | | invocation included in | | | | or summarised by this | | | | collection. | +--------------------------+-------------+--------------------------+ | Sample count | 1..1 | The number of dynamic | | | | policy invocations | | | | included in or | | | | summarised by this | | | | collection. | | | | | | | | (Where summary records | | | | are included in the | | | | collection, the number | | | | of records in the | | | | collection differs from | | | | this number.) | +--------------------------+-------------+--------------------------+ | Media streaming | 1..1 | Indicating whether this | | direction | | collection of dynamic | | | | policy invocations | | | | relates to downlink | | | | media streaming sessions | | | | or to uplink media | | | | streaming sessions. | +--------------------------+-------------+--------------------------+ | Record summarisation | 1..* | Nature of the records | | descriptor | | included in this | | | | collection. One or more | | | | of the following | | | | aggregation functions | | | | are used to generate | | | | records: | | | | | | | | _\- None:_ Collection | | | | includes a separate | | | | record for each dynamic | | | | policy invocation. | | | | | | | | _\- Count:_ Collection | | | | describes only the | | | | number of dynamic policy | | | | invocations between | | | | _Start timestamp_ and | | | | _End timestamp_ with no | | | | individual records | | | | provided. | | | | | | | | _\- Mean:_ Not applicable | | | | to dynamic policy | | | | invocations. | | | | | | | | _\- Minimum:_ Not | | | | applicable to dynamic | | | | policy invocations. | | | | | | | | _\- Maximum:_ Not | | | | applicable to dynamic | | | | policy invocations. | | | | | | | | _\- Sum:_ Not applicable | | | | to dynamic policy | | | | invocations. | +--------------------------+-------------+--------------------------+ | Records | 0..* | A set of dynamic policy | | | | invocation events, each | | | | one describing a dynamic | | | | policy invocation. | +--------------------------+-------------+--------------------------+
And for each record in the collection the following parameters shall be
included, extending the baseline parameter set defined in table 4.7.4.3‑2:
> Table 4.7.4.6‑2: Parameters for dynamic policy invocation event
+-------------+-------------+-------------+-------------+-------------+ | Parameter | Cardinality | Description | | | +=============+=============+=============+=============+=============+ | Record type | 1..1 | Indicating | | | | | | the nature | | | | | | of | | | | | | information | | | | | | carried in | | | | | | this | | | | | | dynamic | | | | | | policy | | | | | | invocation | | | | | | event: | | | | | | | | | | | | - | | | | | | Individual | | | | | | dynamic | | | | | | policy | | | | | | invocation | | | | | | record. | | | +-------------+-------------+-------------+-------------+-------------+ | Record | 1..1 | The | | | | timestamp | | date--time | | | | | | at which | | | | | | the dynamic | | | | | | policy was | | | | | | invoked by | | | | | | the Media | | | | | | Session | | | | | | Handler. | | | +-------------+-------------+-------------+-------------+-------------+ | P | 0..1 | The | | | | rovisioning | | P | | | | Session | | rovisioning | | | | identifier | | Session to | | | | | | which this | | | | | | record | | | | | | pertains. | | | | | | | | | | | | Present | | | | | | only for | | | | | | individual | | | | | | dynamic | | | | | | policy | | | | | | invocation | | | | | | record | | | | | | type. | | | +-------------+-------------+-------------+-------------+-------------+ | Media | 0..1 | A value | | | | streaming | | synthesised | | | | session | | by the 5GMS | | | | identifier | | System that | | | | | | uniquely | | | | | | identifies | | | | | | the media | | | | | | streaming | | | | | | session to | | | | | | which this | | | | | | record | | | | | | pertains. | | | | | | | | | | | | Present | | | | | | only for | | | | | | individual | | | | | | dynamic | | | | | | policy | | | | | | invocation | | | | | | record | | | | | | type. | | | +-------------+-------------+-------------+-------------+-------------+ | UE | 0..1 | GPSI of the | | | | ide | | UE or a | | | | ntification | | stable | | | | | | globally | | | | | | unique | | | | | | string | | | | | | identifying | | | | | | the Media | | | | | | Session | | | | | | Handler | | | | | | that | | | | | | i | | | | | | nstantiated | | | | | | the dynamic | | | | | | policy. | | | | | | | | | | | | Present | | | | | | only for | | | | | | individual | | | | | | dynamic | | | | | | policy | | | | | | invocation | | | | | | record type | | | | | | and only | | | | | | when | | | | | | exposure is | | | | | | permitted | | | | | | by the data | | | | | | exposure | | | | | | r | | | | | | estrictions | | | | | | in force. | | | +-------------+-------------+-------------+-------------+-------------+ | Data | 0..1 | Identifying | | | | Network | | the Data | | | | Name | | Network of | | | | | | the M4 | | | | | | media | | | | | | streaming | | | | | | session for | | | | | | which the | | | | | | dynamic | | | | | | policy was | | | | | | in | | | | | | stantiated. | | | | | | | | | | | | Present | | | | | | only for | | | | | | individual | | | | | | dynamic | | | | | | policy | | | | | | invocation | | | | | | record | | | | | | type. | | | +-------------+-------------+-------------+-------------+-------------+ | Slice | 0..1 | The S-NSSAI | | | | ide | | identifying | | | | ntification | | the Network | | | | | | Slice of | | | | | | the M4 | | | | | | media | | | | | | streaming | | | | | | session on | | | | | | which the | | | | | | dynamic | | | | | | policy was | | | | | | in | | | | | | stantiated. | | | | | | | | | | | | Present | | | | | | only for | | | | | | individual | | | | | | dynamic | | | | | | policy | | | | | | invocation | | | | | | record | | | | | | type. | | | +-------------+-------------+-------------+-------------+-------------+ | UE location | 0..1 | The | | | | | | location of | | | | | | the UE when | | | | | | the dynamic | | | | | | policy was | | | | | | in | | | | | | stantiated. | | | | | | | | | | | | Present | | | | | | only for | | | | | | individual | | | | | | dynamic | | | | | | policy | | | | | | invocation | | | | | | record type | | | | | | and only | | | | | | when | | | | | | exposure is | | | | | | permitted | | | | | | by the data | | | | | | exposure | | | | | | r | | | | | | estrictions | | | | | | in force. | | | +-------------+-------------+-------------+-------------+-------------+ | Policy | 1..1 | Identifying | | | | Template | | the Policy | | | | identifier | | Template | | | | | | i | | | | | | nstantiated | | | | | | by the | | | | | | Media | | | | | | Session | | | | | | Handler. | | | +-------------+-------------+-------------+-------------+-------------+ | Service | 0..* | The set of | | | | Data Flow | | Service | | | | d | | Data Flows | | | | escriptions | | to which | | | | | | the Media | | | | | | Session | | | | | | Handler | | | | | | requested | | | | | | that the | | | | | | Policy | | | | | | Template be | | | | | | applied. | | | | | | | | | | | | Present | | | | | | only for | | | | | | individual | | | | | | dynamic | | | | | | policy | | | | | | invocation | | | | | | record type | | | | | | and only | | | | | | when | | | | | | exposure is | | | | | | permitted | | | | | | by the data | | | | | | exposure | | | | | | r | | | | | | estrictions | | | | | | in force. | | | | | | | | | | | | If present, | | | | | | at least a | | | | | | domain name | | | | | | or one | | | | | | packet | | | | | | filter | | | | | | shall be | | | | | | populated. | | | +-------------+-------------+-------------+-------------+-------------+ | | Domain name | 0..1 | A set of | | | | | | Service | | | | | | Data Flows | | | | | | described | | | | | | in terms of | | | | | | a target | | | | | | 5GMS AS | | | | | | host name | | | | | | at | | | | | | reference | | | | | | point M4. | | +-------------+-------------+-------------+-------------+-------------+ | | Packet | 0..* | A set of | | | | filters | | Service | | | | | | Data Flows | | | | | | identified | | | | | | in terms of | | | | | | their | | | | | | layer 3 | | | | | | and/or | | | | | | layer 4 | | | | | | protocol | | | | | | parameters | | | | | | at | | | | | | reference | | | | | | point M4. | | +-------------+-------------+-------------+-------------+-------------+ | | | Source IP | 0..1 | An IP | | | | address | | address | | | | | | from which | | | | | | layer 3 | | | | | | packets are | | | | | | sent. | +-------------+-------------+-------------+-------------+-------------+ | | | Destination | 0..1 | An IP | | | | IP address | | address to | | | | | | which | | | | | | layer 3 | | | | | | packets are | | | | | | addressed. | +-------------+-------------+-------------+-------------+-------------+ | | | Protocol | 0..1 | A layer 4 | | | | number | | protocol | | | | | | number | | | | | | e | | | | | | ncapsulated | | | | | | by IP | | | | | | packets | | | | | | (e.g., TCP, | | | | | | UDP). | +-------------+-------------+-------------+-------------+-------------+ | | | Source port | 0..1 | A source | | | | | | port of | | | | | | layer 4 | | | | | | protocol | | | | | | data units | | | | | | (e.g., TCP | | | | | | segments, | | | | | | UDP | | | | | | datagrams). | +-------------+-------------+-------------+-------------+-------------+ | | | Destination | 0..1 | A | | | | port | | destination | | | | | | port of | | | | | | layer 4 | | | | | | protocol | | | | | | data units | | | | | | (e.g., TCP | | | | | | segments, | | | | | | UDP | | | | | | datagrams). | +-------------+-------------+-------------+-------------+-------------+ | | | Type | 0..1 | An IPv4 | | | | of Service | | Type of | | | | or | | Service or | | | | Tr | | IPv6 | | | | affic Class | | Traffic | | | | | | Class, | | | | | | including | | | | | | mask. | +-------------+-------------+-------------+-------------+-------------+ | | | Flow label | 0..1 | An IPv6 | | | | | | flow label. | +-------------+-------------+-------------+-------------+-------------+ | | | Security | 0..1 | An IPsec | | | | Parameter | | Security | | | | Index | | Parameter | | | | | | Index. | +-------------+-------------+-------------+-------------+-------------+ | Requested | 0..1 | The network | | | | QoS | | QoS | | | | parameters | | parameters | | | | | | (if any) | | | | | | requested | | | | | | by the | | | | | | Media | | | | | | Session | | | | | | Handler. | | | +-------------+-------------+-------------+-------------+-------------+ | | Maximum | 1..1 | The maximum | | | | requested | | bit rate | | | | bit rate | | requested. | | +-------------+-------------+-------------+-------------+-------------+ | | Minimum | 0..1 | The minimum | | | | desired bit | | bit rate | | | | rate | | desired. | | +-------------+-------------+-------------+-------------+-------------+ | | Minimum | 1..1 | The minimum | | | | requested | | bit rate | | | | bit rate | | requested. | | +-------------+-------------+-------------+-------------+-------------+ | | Desired | 0..1 | The packet | | | | packet | | latency | | | | latency | | requested. | | +-------------+-------------+-------------+-------------+-------------+ | | Desired | 0..1 | The packet | | | | packet loss | | loss rate | | | | rate | | requested. | | +-------------+-------------+-------------+-------------+-------------+ | Enforcement | 0..1 | The policy | | | | method | | enforcement | | | | | | method | | | | | | indicated | | | | | | by the | | | | | | 5GMS AF. | | | +-------------+-------------+-------------+-------------+-------------+ | Enforcement | 0..1 | The | | | | bit rate | | enforcement | | | | | | bit rate | | | | | | (if any) | | | | | | indicated | | | | | | by the | | | | | | 5GMS AF. | | | +-------------+-------------+-------------+-------------+-------------+
#### 4.7.4.7 Event exposure of Network Assistance UE data
For invocations of both AF-based Network Assistance and ANBR-based Network
Assistance on the 5GMS AF by the Media Session Handler, the Data Collection AF
shall include the following parameters (derived from the baseline parameters
defined in table 4.7.4.3‑1) in each event it exposes to event consumers:
Table 4.7.4.7‑1: Parameters for Network Assistance invocations collection
+--------------------------+-------------+--------------------------+ | Parameter | Cardinality | Description | +==========================+=============+==========================+ | Collection timestamp | 1..1 | The date--time at which | | | | the collection was | | | | exposed by the Data | | | | Collection AF as an | | | | event to its subscribed | | | | event consumers. | +--------------------------+-------------+--------------------------+ | Start timestamp | 1..1 | Date--time of the | | | | earliest Network | | | | Assistance invocation | | | | included in or | | | | summarised by this | | | | collection. | +--------------------------+-------------+--------------------------+ | End timestamp | 1..1 | Date--time of the latest | | | | Network Assistance | | | | invocation included in | | | | or summarised by this | | | | collection. | +--------------------------+-------------+--------------------------+ | Sample count | 1..1 | The number of Network | | | | Assistance invocations | | | | included in or | | | | summarised by this | | | | collection. | | | | | | | | (Where summary records | | | | are included in the | | | | collection, the number | | | | of records in the | | | | collection differs from | | | | this number.) | +--------------------------+-------------+--------------------------+ | Media streaming | 1..1 | Indicating whether this | | direction | | collection of Network | | | | Assistance invocations | | | | relates to downlink | | | | media streaming sessions | | | | or to uplink media | | | | streaming sessions. | +--------------------------+-------------+--------------------------+ | Record summarisation | 1..* | Nature of the records | | descriptor | | included in this | | | | collection. One or more | | | | of the following | | | | aggregation functions | | | | are used to generate | | | | records: | | | | | | | | _\- None:_ Collection | | | | includes a separate | | | | record for each Network | | | | Assistance invocation. | | | | | | | | _\- Count:_ Collection | | | | describes only the | | | | number of Network | | | | Assistance invocations | | | | between _Start | | | | timestamp_ and _End | | | | timestamp_ with no | | | | individual records | | | | provided. | | | | | | | | _\- Mean:_ Collection | | | | includes a record | | | | summarising the mean | | | | average value of each | | | | QoS parameter over a | | | | certain time period. | | | | | | | | _\- Minimum:_ Collection | | | | includes a record | | | | summarising the smallest | | | | value of each QoS | | | | parameter over a certain | | | | time period. | | | | | | | | _\- Maximum:_ Collection | | | | includes a record | | | | summarising the largest | | | | value of each QoS | | | | parameter over a certain | | | | time period. | | | | | | | | _\- Sum:_ Not applicable | | | | to Network Assistance | | | | invocations. | +--------------------------+-------------+--------------------------+ | Records | 0..* | A set of Network | | | | Assistance invocation | | | | events, each one | | | | describing a Network | | | | Assistance invocation or | | | | summarising a set of | | | | Network Assistance | | | | invocations. | +--------------------------+-------------+--------------------------+
And for each record in the collection the following parameters shall be
included, extending the baseline parameter set defined in table 4.7.4.3‑2:
> Table 4.7.4.7‑2: Parameters for Network Assistance invocation event
+-------------+-------------+-------------+-------------+-------------+ | Parameter | Cardinality | Description | | | +=============+=============+=============+=============+=============+ | Record type | 1..1 | Indicating | | | | | | the nature | | | | | | of | | | | | | information | | | | | | carried in | | | | | | this | | | | | | Network | | | | | | Assistance | | | | | | invocation | | | | | | event: | | | | | | | | | | | | - | | | | | | Individual | | | | | | Network | | | | | | Assistance | | | | | | invocation | | | | | | record. | | | | | | | | | | | | - Mean | | | | | | parameter | | | | | | values | | | | | | summary | | | | | | record. | | | | | | | | | | | | - Minimum | | | | | | parameter | | | | | | values | | | | | | summary | | | | | | record. | | | | | | | | | | | | - Maximum | | | | | | parameter | | | | | | values | | | | | | summary | | | | | | record. | | | +-------------+-------------+-------------+-------------+-------------+ | Record | 1..1 | For | | | | timestamp | | individual | | | | | | records, | | | | | | the | | | | | | date--time | | | | | | at which | | | | | | Network | | | | | | Assistance | | | | | | was invoked | | | | | | by the | | | | | | Media | | | | | | Session | | | | | | Handler. | | | | | | | | | | | | Otherwise, | | | | | | the | | | | | | date--time | | | | | | at which | | | | | | the summary | | | | | | record was | | | | | | generated | | | | | | by the Data | | | | | | Collection | | | | | | AF | | | | | | i | | | | | | nstantiated | | | | | | in the | | | | | | 5GMS AF. | | | +-------------+-------------+-------------+-------------+-------------+ | P | 0..1 | The | | | | rovisioning | | P | | | | Session | | rovisioning | | | | identifier | | Session to | | | | | | which this | | | | | | record | | | | | | pertains. | | | | | | | | | | | | Present | | | | | | only for | | | | | | individual | | | | | | Network | | | | | | Assistance | | | | | | invocation | | | | | | record | | | | | | type. | | | +-------------+-------------+-------------+-------------+-------------+ | Media | 0..1 | A value | | | | streaming | | synthesised | | | | session | | by the 5GMS | | | | identifier | | System that | | | | | | uniquely | | | | | | identifies | | | | | | the media | | | | | | streaming | | | | | | session to | | | | | | which this | | | | | | record | | | | | | pertains. | | | | | | | | | | | | Present | | | | | | only for | | | | | | individual | | | | | | Network | | | | | | Assistance | | | | | | invocation | | | | | | record | | | | | | type. | | | +-------------+-------------+-------------+-------------+-------------+ | UE | 0..1 | GPSI of the | | | | ide | | UE or a | | | | ntification | | stable | | | | | | globally | | | | | | unique | | | | | | string | | | | | | identifying | | | | | | the Media | | | | | | Session | | | | | | Handler | | | | | | that | | | | | | requested | | | | | | Network | | | | | | A | | | | | | ssistance.. | | | | | | | | | | | | Present | | | | | | only for | | | | | | individual | | | | | | Network | | | | | | Assistance | | | | | | invocation | | | | | | record type | | | | | | and only | | | | | | when | | | | | | exposure is | | | | | | permitted | | | | | | by the data | | | | | | exposure | | | | | | r | | | | | | estrictions | | | | | | in force. | | | +-------------+-------------+-------------+-------------+-------------+ | Data | 0..1 | Identifying | | | | Network | | the Data | | | | Name | | Network of | | | | | | the M4 | | | | | | media | | | | | | streaming | | | | | | session for | | | | | | which | | | | | | Network | | | | | | Assistance | | | | | | was sought. | | | | | | | | | | | | Present | | | | | | only for | | | | | | individual | | | | | | Network | | | | | | Assistance | | | | | | invocation | | | | | | record | | | | | | type. | | | +-------------+-------------+-------------+-------------+-------------+ | Slice | 0..1 | The S-NSSAI | | | | ide | | identifying | | | | ntification | | the Network | | | | | | Slice of | | | | | | the M4 | | | | | | media | | | | | | streaming | | | | | | session on | | | | | | which | | | | | | Network | | | | | | Assistance | | | | | | was sought. | | | | | | | | | | | | Present | | | | | | only for | | | | | | individual | | | | | | Network | | | | | | Assistance | | | | | | invocation | | | | | | record | | | | | | type. | | | +-------------+-------------+-------------+-------------+-------------+ | UE location | 0..1 | The | | | | | | location of | | | | | | the UE when | | | | | | Network | | | | | | Assistance | | | | | | was sought. | | | | | | | | | | | | Present | | | | | | only for | | | | | | individual | | | | | | Network | | | | | | Assistance | | | | | | invocation | | | | | | record type | | | | | | and only | | | | | | when | | | | | | exposure is | | | | | | permitted | | | | | | by the data | | | | | | exposure | | | | | | r | | | | | | estrictions | | | | | | in force. | | | +-------------+-------------+-------------+-------------+-------------+ | Record | 1..1 | Indicating | | | | subtype | | which of | | | | | | the | | | | | | following | | | | | | Network | | | | | | Assistance | | | | | | features | | | | | | was invoked | | | | | | by the UE: | | | | | | | | | | | | - Bit rate | | | | | | rec | | | | | | ommendation | | | | | | solicited | | | | | | from | | | | | | 5GMS AF by | | | | | | Media | | | | | | Session | | | | | | Handler. | | | | | | | | | | | | - Delivery | | | | | | boost | | | | | | requested | | | | | | from | | | | | | 5GMS AF by | | | | | | Media | | | | | | Session | | | | | | Handler. | | | | | | | | | | | | - Bit rate | | | | | | rec | | | | | | ommendation | | | | | | solicited | | | | | | from RAN | | | | | | modem by | | | | | | Media | | | | | | Session | | | | | | Handler. | | | | | | | | | | | | - Delivery | | | | | | boost | | | | | | requested | | | | | | from RAN | | | | | | modem by | | | | | | Media | | | | | | Session | | | | | | Handler. | | | +-------------+-------------+-------------+-------------+-------------+ | Policy | 0..1 | Identifying | | | | Template | | the Policy | | | | identifier | | Template | | | | | | (if any) | | | | | | referenced | | | | | | by the | | | | | | Media | | | | | | Session | | | | | | Handler in | | | | | | the Network | | | | | | Assistance | | | | | | Session. | | | +-------------+-------------+-------------+-------------+-------------+ | Service | 1..* | The set of | | | | Data Flow | | Service | | | | d | | Data Flows | | | | escriptions | | for which | | | | | | the Media | | | | | | Session | | | | | | Handler | | | | | | sought | | | | | | Network | | | | | | Assistance. | | | | | | | | | | | | Present | | | | | | only for | | | | | | individual | | | | | | Network | | | | | | Assistance | | | | | | invocation | | | | | | record type | | | | | | and only | | | | | | when | | | | | | exposure is | | | | | | permitted | | | | | | by the data | | | | | | exposure | | | | | | r | | | | | | estrictions | | | | | | in force. | | | | | | | | | | | | If present, | | | | | | at least a | | | | | | domain name | | | | | | or one | | | | | | packet | | | | | | filter | | | | | | shall be | | | | | | populated. | | | +-------------+-------------+-------------+-------------+-------------+ | | Domain name | 0..1 | A set of | | | | | | Service | | | | | | Data Flows | | | | | | described | | | | | | in terms of | | | | | | a target | | | | | | 5GMS AS | | | | | | host name | | | | | | at | | | | | | reference | | | | | | point M4. | | +-------------+-------------+-------------+-------------+-------------+ | | Packet | 0..* | A set of | | | | filters | | Service | | | | | | Data Flows | | | | | | identified | | | | | | in terms of | | | | | | their | | | | | | layer 3 | | | | | | and/or | | | | | | layer 4 | | | | | | protocol | | | | | | parameters | | | | | | at | | | | | | reference | | | | | | point M4. | | +-------------+-------------+-------------+-------------+-------------+ | | | Source IP | 0..1 | An IP | | | | address | | address | | | | | | from which | | | | | | layer 3 | | | | | | packets are | | | | | | sent. | +-------------+-------------+-------------+-------------+-------------+ | | | Destination | 0..1 | An IP | | | | IP address | | address to | | | | | | which | | | | | | layer 3 | | | | | | packets are | | | | | | addressed. | +-------------+-------------+-------------+-------------+-------------+ | | | Protocol | 0..1 | A layer 4 | | | | number | | protocol | | | | | | number | | | | | | e | | | | | | ncapsulated | | | | | | by IP | | | | | | packets | | | | | | (e.g., TCP, | | | | | | UDP). | +-------------+-------------+-------------+-------------+-------------+ | | | Source port | 0..1 | A source | | | | | | port of | | | | | | layer 4 | | | | | | protocol | | | | | | data units | | | | | | (e.g., TCP | | | | | | segments, | | | | | | UDP | | | | | | datagrams). | +-------------+-------------+-------------+-------------+-------------+ | | | Destination | 0..1 | A | | | | port | | destination | | | | | | port of | | | | | | layer 4 | | | | | | protocol | | | | | | data units | | | | | | (e.g., TCP | | | | | | segments, | | | | | | UDP | | | | | | datagrams). | +-------------+-------------+-------------+-------------+-------------+ | | | Type | 0..1 | An IPv4 | | | | of Service | | Type of | | | | or | | Service or | | | | Tr | | IPv6 | | | | affic Class | | Traffic | | | | | | Class, | | | | | | including | | | | | | mask. | +-------------+-------------+-------------+-------------+-------------+ | | | Flow label | 0..1 | An IPv6 | | | | | | flow label. | +-------------+-------------+-------------+-------------+-------------+ | | | Security | 0..1 | An IPsec | | | | Parameter | | Security | | | | Index | | Parameter | | | | | | Index. | +-------------+-------------+-------------+-------------+-------------+ | Requested | 0..1 | The network | | | | QoS | | QoS | | | | parameters | | parameters | | | | | | (if any) | | | | | | requested | | | | | | from the | | | | | | 5GMS AF or | | | | | | RAN by the | | | | | | Media | | | | | | Session | | | | | | Handler. | | | +-------------+-------------+-------------+-------------+-------------+ | | Maximum | 1..1 | The maximum | | | | requested | | bit rate | | | | bit rate | | requested. | | +-------------+-------------+-------------+-------------+-------------+ | | Minimum | 0..1 | The minimum | | | | desired bit | | bit rate | | | | rate | | desired. | | +-------------+-------------+-------------+-------------+-------------+ | | Minimum | 1..1 | The minimum | | | | requested | | bit rate | | | | bit rate | | requested. | | +-------------+-------------+-------------+-------------+-------------+ | | Desired | 0..1 | The packet | | | | packet | | latency | | | | latency | | requested. | | +-------------+-------------+-------------+-------------+-------------+ | | Desired | 0..1 | The packet | | | | packet loss | | loss rate | | | | rate | | requested. | | +-------------+-------------+-------------+-------------+-------------+ | Recommended | 0..1 | The network | | | | QoS | | QoS | | | | parameters | | parameters | | | | | | (if any) | | | | | | recommended | | | | | | by the | | | | | | 5GMS AF or | | | | | | RAN to the | | | | | | Media | | | | | | Session | | | | | | Handler. | | | +-------------+-------------+-------------+-------------+-------------+ | | Maximum | 1..1 | The maximum | | | | recommended | | bit rate | | | | bit rate | | recommended | | | | | | by the | | | | | | 5GMS AF or | | | | | | RAN. | | +-------------+-------------+-------------+-------------+-------------+ | | Minimum | 1..1 | The minimum | | | | recommended | | bit rate | | | | bit rate | | recommended | | | | | | by the | | | | | | 5GMS AF or | | | | | | RAN. | | +-------------+-------------+-------------+-------------+-------------+
#### 4.7.4.8 Event exposure of media streaming access activity UE data
For media streaming access reported by the 5GMS AS, the Data Collection AF
shall include the following parameters (derived from the baseline parameters
defined in table 4.7.4.3‑1) in each event it exposes to event consumers:
Table 4.7.4.8‑1: Parameters for media streaming accesses collection
+--------------------------+-------------+--------------------------+ | Parameter | Cardinality | Description | +==========================+=============+==========================+ | Collection timestamp | 1..1 | The date--time at which | | | | the collection was | | | | exposed by the Data | | | | Collection AF as an | | | | event to its subscribed | | | | event consumers. | +--------------------------+-------------+--------------------------+ | Start timestamp | 1..1 | Date--time of the | | | | earliest media streaming | | | | access record included | | | | in or summarised by this | | | | collection. | +--------------------------+-------------+--------------------------+ | End timestamp | 1..1 | Date--time of the latest | | | | media streaming access | | | | record included in or | | | | summarised by this | | | | collection. | +--------------------------+-------------+--------------------------+ | Sample count | 1..1 | The number of media | | | | streaming access records | | | | included in or | | | | summarised by this | | | | collection. | | | | | | | | (Where summary records | | | | are included in the | | | | collection, the number | | | | of records in the | | | | collection differs from | | | | this number.) | +--------------------------+-------------+--------------------------+ | Media streaming | 1..1 | Indicating whether this | | direction | | collection of media | | | | access records relates | | | | to downlink media | | | | streaming sessions or to | | | | uplink media streaming | | | | sessions. | +--------------------------+-------------+--------------------------+ | Record summarisation | 1..* | Nature of the records | | descriptor | | included in this | | | | collection. One or more | | | | of the following | | | | aggregation functions | | | | are used to generate | | | | records: | | | | | | | | _\- None:_ Collection | | | | includes a separate | | | | record for each media | | | | streaming access. | | | | | | | | _\- Count:_ Collection | | | | describes only the | | | | number of media | | | | streaming accesses | | | | between _Start | | | | timestamp_ and _End | | | | timestamp_ with no | | | | individual records | | | | provided. | | | | | | | | _\- Mean:_ Not applicable | | | | to media streaming | | | | access. | | | | | | | | _\- Minimum:_ Not | | | | applicable to media | | | | streaming access. | | | | | | | | _\- Maximum:_ Not | | | | applicable to media | | | | streaming access. | | | | | | | | _\- Sum:_ Not applicable | | | | to media streaming | | | | access. | +--------------------------+-------------+--------------------------+ | Records | 0..* | A set of media streaming | | | | access events, each one | | | | describing a media | | | | streaming access. | +--------------------------+-------------+--------------------------+
And for each record in the collection the following parameters shall be
included, extending the baseline parameter set defined in table 4.7.4.3‑2:
> Table 4.7.4.8‑2: Parameters for media streaming access event
+----------------+----------------+----------------+----------------+ | Parameter | Cardinality | Description | | +================+================+================+================+ | Record type | 1..1 | Indicating the | | | | | nature of | | | | | information | | | | | carried in | | | | | this media | | | | | streaming | | | | | access event: | | | | | | | | | | - Individual | | | | | media | | | | | streaming | | | | | access record. | | +----------------+----------------+----------------+----------------+ | Record | 1..1 | The date--time | | | timestamp | | at which media | | | | | was accessed | | | | | by the Media | | | | | Stream Handler | | | | | (Media Player | | | | | or Media | | | | | Streamer). | | +----------------+----------------+----------------+----------------+ | Provisioning | 0..1 | The | | | Session | | Provisioning | | | identifier | | Session to | | | | | which this | | | | | media | | | | | streaming | | | | | access record | | | | | pertains. | | | | | | | | | | Present only | | | | | for individual | | | | | media | | | | | streaming | | | | | access record | | | | | type. | | +----------------+----------------+----------------+----------------+ | Media | 0..1 | A value | | | streaming | | synthesised by | | | session | | the 5GMS | | | identifier | | System that | | | | | uniquely | | | | | identifies the | | | | | media | | | | | streaming | | | | | session to | | | | | which this | | | | | media | | | | | streaming | | | | | access record | | | | | pertains. | | | | | | | | | | Present only | | | | | for individual | | | | | media | | | | | streaming | | | | | access record | | | | | type. | | +----------------+----------------+----------------+----------------+ | UE | 0..1 | GPSI of the UE | | | identification | | or a stable | | | | | globally | | | | | unique string | | | | | identifying | | | | | the 5GMS | | | | | Client that | | | | | accessed | | | | | media. | | | | | | | | | | Present only | | | | | for individual | | | | | media | | | | | streaming | | | | | access record | | | | | type, and only | | | | | when exposure | | | | | is permitted | | | | | by the data | | | | | exposure | | | | | restrictions | | | | | in force. | | +----------------+----------------+----------------+----------------+ | Data Network | 0..1 | Identifying | | | Name | | the Data | | | | | Network of the | | | | | M4 media | | | | | streaming | | | | | session for | | | | | which media | | | | | streaming | | | | | access was | | | | | reported. | | | | | | | | | | Present only | | | | | for individual | | | | | media | | | | | streaming | | | | | access record | | | | | type. | | +----------------+----------------+----------------+----------------+ | Slice | 0..1 | The S-NSSAI | | | identification | | identifying | | | | | the Network | | | | | Slice of the | | | | | M4 media | | | | | streaming | | | | | session for | | | | | which media | | | | | streaming | | | | | access was | | | | | reported. | | | | | | | | | | Present only | | | | | for individual | | | | | media | | | | | streaming | | | | | access record | | | | | type. | | +----------------+----------------+----------------+----------------+ | UE location | 0..1 | The location | | | | | of the UE when | | | | | media was | | | | | accessed. | | | | | | | | | | Present only | | | | | for individual | | | | | media | | | | | streaming | | | | | access record | | | | | type, and only | | | | | when exposure | | | | | is permitted | | | | | by the data | | | | | exposure | | | | | restrictions | | | | | in force. | | +----------------+----------------+----------------+----------------+ | Media Stream | 1..1 | The endpoint | | | Handler | | address of the | | | endpoint | | Media Stream | | | address | | Handler that | | | | | accessed the | | | | | 5GMS AS. | | +----------------+----------------+----------------+----------------+ | Application | 1..1 | The endpoint | | | Server | | address of the | | | endpoint | | 5GMS AS that | | | address | | was accessed. | | +----------------+----------------+----------------+----------------+ | Request | 1..1 | Details of the | | | message | | Media Stream | | | | | Handler | | | | | request | | | | | message for | | | | | this media | | | | | access. | | +----------------+----------------+----------------+----------------+ | | Request method | 1..1 | The request | | | | | method. | +----------------+----------------+----------------+----------------+ | | Request URL | 1..1 | The URL of the | | | | | requested | | | | | resource | | | | | r | | | | | epresentation. | +----------------+----------------+----------------+----------------+ | | Protocol | 1..1 | The protocol | | | version | | version. | +----------------+----------------+----------------+----------------+ | | Range | 0..1 | The range of | | | | | the resource | | | | | representation | | | | | requested, if | | | | | any. | +----------------+----------------+----------------+----------------+ | | Size | 1..1 | The total size | | | | | of the request | | | | | message. | +----------------+----------------+----------------+----------------+ | | Body size | 1..1 | The size of | | | | | the request | | | | | message body, | | | | | which may be | | | | | zero. | +----------------+----------------+----------------+----------------+ | | Media content | 0..1 | The media | | | type | | content type | | | | | of the request | | | | | message body, | | | | | if any. | +----------------+----------------+----------------+----------------+ | | User agent | 0..1 | The user agent | | | | | identifying | | | | | the requesting | | | | | Media Stream | | | | | Handler, if | | | | | any. | +----------------+----------------+----------------+----------------+ | | User identity | 0..1 | A token | | | | | identifying | | | | | the user that | | | | | made the | | | | | request, if | | | | | any. | +----------------+----------------+----------------+----------------+ | | Referer | 0..1 | A URL that the | | | | | Media Stream | | | | | Handler | | | | | reported being | | | | | referred from, | | | | | if any. | +----------------+----------------+----------------+----------------+ | Cache status | 0..1 | An indication | | | | | of whether the | | | | | response was | | | | | present in the | | | | | 5GMS AS cache | | | | | (if | | | | | implemented) | | | | | and, if so, | | | | | whether the | | | | | cache item was | | | | | fresh or | | | | | stale. | | | | | | | | | | Applicable to | | | | | downlink media | | | | | streaming | | | | | only. | | +----------------+----------------+----------------+----------------+ | Response | 1..1 | Details of the | | | message | | 5GMS AS | | | | | response | | | | | message for | | | | | this media | | | | | access. | | +----------------+----------------+----------------+----------------+ | | Response code | 1..1 | The response | | | | | code. | +----------------+----------------+----------------+----------------+ | | Size | 1..1 | The total size | | | | | of the | | | | | response | | | | | message. | +----------------+----------------+----------------+----------------+ | | Body size | 1..1 | The size of | | | | | the response | | | | | message body, | | | | | which may be | | | | | zero. | +----------------+----------------+----------------+----------------+ | | Media content | 0..1 | The media | | | type | | content type | | | | | of the | | | | | response | | | | | message body, | | | | | if any. | +----------------+----------------+----------------+----------------+ | Processing | 1..1 | The time that | | | latency | | was taken for | | | | | the 5GMS AS to | | | | | service the | | | | | request and | | | | | send the | | | | | response | | | | | message. | | +----------------+----------------+----------------+----------------+ | Connection | 0..1 | Cumulative | | | metrics | | metrics about | | | | | the | | | | | performance of | | | | | the transport | | | | | connection at | | | | | reference | | | | | point M4. | | +----------------+----------------+----------------+----------------+ | | Mean network | 1..1 | A rolling mean | | | round-trip | | average of the | | | time | | network | | | | | round-trip | | | | | time measured | | | | | for media | | | | | accesses at | | | | | reference | | | | | point M4. | +----------------+----------------+----------------+----------------+ | | Network | 1..1 | The variation | | | round-trip | | in _Mean | | | time variation | | network | | | | | round-trip | | | | | time_ during | | | | | its averaging | | | | | period. | +----------------+----------------+----------------+----------------+ | | Congestion | 1..1 | The sampled | | | window size | | size of the | | | | | connection | | | | | window for the | | | | | underlying | | | | | transport | | | | | connection at | | | | | reference | | | | | point M4 when | | | | | the request | | | | | was processed | | | | | by the | | | | | 5GMS AS. | +----------------+----------------+----------------+----------------+
## 4.8 Downlink media streaming to Media Players with multiple formats
This clause considers downlink streaming in which a 5GMSd Application Provider
publishes the same service in different media formats, all to be ingested by
the same logical 5GMSd AS. The different media formats of the service are
described by different presentation manifests (e.g. Dynamic Adaptive Streaming
over HTTP [29] and HTTP Live Streaming [28]) but are described by a common
Content Hosting Configuration (see clause 5.4) under a single Provisioning
Session (see clause 5.3). The different media formats may or may not share the
media resources described by their respective presrentation manifests.
Where the different media formats do share the same media objects (for
example, an ISO MPEG Common Media Application Format (CMAF) presentation [27]
according to the content format specified in TS 26.511 [26]) the same CMAF
content may then provided to different kinds of Media Player, for example HTTP
Live Streaming [28] and Dynamic Adaptive Streaming over HTTP [29], requiring
different presentation manifest formats. This approach is aligned with
CTA-5005 [25], which primarily focusses on creating interoperable CMAF content
such that it can be used at the same time with DASH and HLS to the greatest
possible extent.
The deployment architecture for this scenario is documented in figure 4.8-1.
In this case, the 5GMSd Application Provider provisions a single downlink
media streaming session and triggers the content to be served to 5GMS Clients
that consume different media formats, indicated in the figure with an
asterisk.
\- Provisioning and content ingest shall support the ability to serve
different formats.
\- Provisioning and content ingest shall support the possibility that
different formats may share common media files, for example CMAF to be used
for DASH and HLS.
Figure 4.8-1: Deployment architecture for downlink media streaming to Media
Players with different formats
## 4.9 Downlink 5G Media Streaming via MBS
### 4.9.1 Architecture for downlink 5G Media Streaming over MBS
Figure 4.9.1-1 below depicts an architecture for downlink 5G Media Streaming
via MBS as defined in TS 26.502 [30] that combines the functions and reference
points of the 5GMS System with those of the MBS System. In the simple case,
the 5GMSd AF is deployed in a Trusted DN together with the MBS System
according to the collaboration model in clause A.3 of [30] and _Nmbsf_ service
operations on the MBSF are invoked by the 5GMSd AF directly at reference point
Nmb10. In other deployments, as for example shown in clauses A.4 and A.5 of
[30], the 5GMS System may be external to the MBS System. In this case, the
service operations on the MBSF are instead invoked on the NEF at reference
point N33, and the NEF then communicates with the MBSF at reference point
Nmb5.
Figure 4.9.1-1: Architecture for 5G Media Streaming over MBS
This arrangement allows 5GMS-based downlink media streaming to be deployed as
an MBS-Aware Application on top of the MBS System as defined in TS 26.502
[30].
In this case:
1\. The 5GMSd AF configures the delivery of 5GMSd content to an MBS Client in
the UE by provisioning an MBS User Service as defined in clause 4.5.1 of TS
26.502 [30]. In order to additionally deliver this content over one or more
MBS Distribution Session, the 5GMSd AF invokes control plane procedures on the
MBSF as specified in clause 7.2 of [30] and, as a result, content is ingested
by the MBSTF from the 5GMSd AS using the pull-based object ingest procedures
at reference point Nmb8 specified in clause 6.1 of [30].
NOTE 1: Push-based ingest of 5GMS content by the MBSTF at reference point Nmb8
is not enabled in the current release. 5GMS only supports pull based content
acquisition at reference point M4.
NOTE 2: 5GMSd AS and MBS AS share similar functions and may be deployed in a
single physical node.
2\. The 5GMSd Client acts as MBS-Aware Application (as defined in TS 26.502
[30]) for the MBS Client. Thus, the _MBS Client_ is controlled by the 5GMSd
Client via the MBS-6 API.
3\. The MBSTF Client receives media and other objects from the MBSTF according
to the Object Distribution Method specified in clause 6.1 of TS 26.502 [30].
If Object Repair as specified in clause 4.2.6 of TS 26.502 [30] is available
in the MBS System, the MBS Client uses the unicast repair delivery procedures
to recover damaged objects received from the MBSTF by interacting at reference
point MBS‑4‑UC.
4\. The _Media Server_ subfunction of the MBSTF Client provides a media server
interface and shall expose the content received (and possibly repaired) by the
MBS Client to the Media Player in the 5GMSd Client via reference point MBS-7
using interactions equivalent to those defined at reference point M4d.
5\. The Media Player sends requests according to the signalled object
availability times in the manifest. In case a media object transmitted via an
MBS Distribution Session is not received by the MBS Client by the object
availability times, or if it cannot be repaired in time for consumption by the
5GMSd Client, the Media Server in the MBS Client returns either an error or
else a partial object in response to the Media Player\'s request for the media
object. In this case, the Media Player may instead attempt to retrieve the
media object, or ranges of it, from the 5GMSd AS at reference point M4d, if
available. The object shall be available for download from the 5GMSd AS for a
well-defined time period.
NOTE 3: Details on determining the availability time requirements of the
application are deferred to stage 3.
The usage of existing reference points to support these scenarios is
documented in the following clauses. Procedures for 5GMS via MBS are defined
in clause 5.12.
### 4.9.2 Usage of 5GMS reference points for MBS-based delivery
#### 4.9.2.1 Usage of M1
Reference point M1 is used as defined in clauses 4.1 to 4.4.
In addition, the 5GMSd Application Provider shall authorize via M1 that 5GMS
content may be distributed via MBS.
The translation of M1 information to MBS delivery provisioning by the 5GMSd AF
is left to implementation.
NOTE: The 5GMS Application Provider may provision specific use-cases (high
velocity, specific reception area, indoor/outdoor/mobile users) at reference
point M1d. These service requirements are translated by the 5GMSd AF into
specific _Nmbsf_ service operations to provision the MBSF with a service that
has the correct parameters for a specific location.
#### 4.9.2.2 Usage of M2d
Reference point M2d is be used as defined in clauses 4.1 to 4.4.
#### 4.9.2.3 Usage of M3d
Reference point M3d is used as defined in clauses 4.1 to 4.4.
#### 4.9.2.4 Usage of M4d
Reference point M4d is used as defined in clauses 4.1 to 4.4.
#### 4.9.2.5 Usage of M5
Reference point M5 is used as defined in clauses 4.1 to 4.4.
When 5GMS content is distributed via MBS, the 5GMSd Service Access Information
shall additionally include:
1\. Relevant information of the MBS Service Announcement in order to bootstrap
reception of the MBS service, typically via an external service identifier.
This is passed by the Media Session Handler to the MBS Client via reference
point MBS-6.
When this information is present in the Service Access Information and when
the UE is MBS-capable, the 5GMSd Client shall invoke the MBS Client to
initiate reception of the corresponding MBS User Service.
2\. Relevant information from the MBS Service Announcement in order for the
Media Session Handler to:
a) Collect metrics of the MBS User Service from the MBS Client and report them
to the 5GMSd AF using an appropriate metrics reporting scheme.
b) Collect media consumption information from the MBS Client and submit it to
the 5GMSd AF in 5GMS consumption reports.
#### 4.9.2.6 Usage of M6d
Reference point M6d is used as defined in clauses 4.1 to 4.4.
#### 4.9.2.7 Usage of M7d
Reference point M7d is used as defined in clauses 4.1 to 4.4.
#### 4.9.2.8 Usage of M8d
Reference point M8d is used as defined in clauses 4.1 to 4.4.
### 4.9.3 Usage of MBS reference points and interfaces
#### 4.9.3.1 Usage of Nmbsf service at Nmb10 and Nmb5+N33
The 5GMSd AF provisions MBS User Services in the MBSF as defined in clauses
5.3 of TS 26.502 [30]. In case the 5GMSd AF is in a Trusted DN together with
the MBS System according to the collaboration model in clause A.3 of [30],
_Nmbsf_ service operations shall be invoked directly at reference point Nmb10.
Where the 5GMSd AF is deployed outside the Trusted DN, as for example shown in
_Nmbsf_ service operations shall instead be invoked via the NEF at reference
points N33+Nmb5.
#### 4.9.3.2 Usage of Nmb8
The MBSTF ingests content from the 5GMSd AS using the pull-based ingest method
at reference point Nmb8.
#### 4.9.3.3 Usage of MBS User Services and Distribution Methods
Real-time object streaming as defined in clause 6.1 of TS 26.502 [30] is
provisioned in the MBSTF by the MBSF acting on the provisioning instructions
of the 5GMSd AF. The application service entry point instance is a downlink
5GMS streaming manifest, for example a DASH MPD or HLS playlist.
The MBS User Service Announcement as defined in clause 4.2.4 of TS 26.502 [30]
is used to advertise the availability of 5GMS content delivered via MBS.
#### 4.9.3.4 Usage of MBS-6
The 5GMSd Client plays the role of an MBS-Aware Application and operates
according to the procedures defined in clauses 5.2 and 5.5 of TS 26.502 [30]
when communicating with the MBSF Client at reference point MBS-6.
The MBSF Client exposes information to the Media Session Handler at this
reference point to manage the reception of MBS User Services.
The Media Session Handler configures the MBSF Client for reception reporting.
The MBSF Client provides reception reports to the Media Session Handler.
#### 4.9.3.5 Usage of MBS-7
The 5GMSd Client plays the role of an MBS-Aware Application and operates
according to the procedures defined in clause 5.2 of TS 26.502 [30] when
communicating with the MBSTF Client at reference point MBS‑7.
The MBSTF Client provides the entry point document, as well as updates of the
entry point document, to the 5GMSd Client at this reference point.
The MBSTF Client exposes fully- and partially-received media objects to the
Media Player in the 5GMSd Client.
## 4.10 3GPP Service URL handling
### 4.10.1 General
Where there is a facility for an application or service to launch a UE
function on the same UE via a URL request, it is convenient to use such a
mechanism to launch media session handling for a 5G Media Streaming session.
In this case, the Media Session Handler can be launched implicitly as a result
of a request for a URL with a prefix that matches a value previously
registered with the UE Operating System by the Media Session Handler. Media
streaming may also be launched as a by-product of the URL request by embedding
a Media Entry Point in the URL. This enables 5G Media Streaming sessions to be
launched by any UE application (not just a 5GMS-Aware Application), or from a
link in a web page.
If the Media Session Handler is not available on the UE, or if the Media
Session Handler is not able to resolve the service, then the 3GPP Service URL
shall resolve to an endpoint on the 5GMS AF which may respond to the URL
request, for example by redirecting the application to a Media Entry Point.
This clause defines the baseline requirements for a 3GPP Service URL that can
be used to activate a 5G Media Streaming session in line with step 5 of clause
5.1 (for downlink Media Streaming), and steps 4 and 6 of clause 6.1 (for
uplink Media Streaming). The detailed baseline procedure for handling these
3GPP Service URLs is defined in clause 9.
### 4.10.2 Baseline parameters of 3GPP Service URL for 5G Media Streaming
The parameters in table 4.10.2-1 may be included explicitly or implicitly in
the 3GPP Service URL when it is used to launch a 5G Media Streaming session:
Table 4.10.2-1: Baseline parameters of 3GPP Service URL for 5G Media Streaming
+------------------------------+------+------------------------------+ | Parameter | Use | Description | +==============================+======+==============================+ | Service type | M | Uniquely indicating either | | | | downlink 5G Media Streaming | | | | or uplink 5G Media | | | | Streaming. | +------------------------------+------+------------------------------+ | External application | M | A globally unique | | identifier | | application identifier | | | | nominated by the 5GMS | | | | Application Provider that | | | | resolves to a Provisioning | | | | Session in the 5GMS System. | +------------------------------+------+------------------------------+ | 5GMS AF endpoint addresses | 0..N | Endpoint address(es) for | | | | 5GMS AF instance(s) to be | | | | used by the Media Session | | | | Handler at reference point | | | | M5. Any of the provided | | | | addresses may be used for | | | | media session handling of | | | | this 3GPP Service URL. | | | | | | | | Present only in the case | | | | where the 5GMS AF is | | | | deployed outside the Trusted | | | | DN. | +------------------------------+------+------------------------------+ | Media Entry Point URLs | 0..N | URLs of Media Entry Points | | | | on a 5GMS AS to be launched | | | | by the Media Session Handler | | | | after successful initiation | | | | of media session handling | | | | and establishment of | | | | communication with the Media | | | | Stream Handler (Media Player | | | | or Media Streamer). | +------------------------------+------+------------------------------+ | Acceptable media types | C | Indicating a set of media | | | | types acceptable to the | | | | 5GMS-Aware Application for a | | | | 5G Media Streaming session. | | | | | | | | Present if no Media Entry | | | | Point is provided. This | | | | value is used by the Media | | | | Session Handler to select | | | | the appropriate Media Entry | | | | Point provided by the 5GMS | | | | AF. | +------------------------------+------+------------------------------+ | Acceptable media profiles | C | Indicating a set of | | | | acceptable conformance | | | | profiles for a 5G Media | | | | Streaming session. | | | | | | | | Present if no Media Entry | | | | Point is provided. This | | | | value is used by the Media | | | | Session Handler to select | | | | the appropriate Media Entry | | | | Point provided by the 5GMS | | | | AF. | +------------------------------+------+------------------------------+
The 3GPP Service URL for 5G Media Streaming may also include information to
support handling of eMBMS or MBS delivery.
# 5 Procedures for downlink Media Streaming
## 5.1 General
The downlink streaming procedures follow the general high-level workflow
depicted in Figure 5.1‑1 below, starting from provisioning and ingest session
preparation to the actual content streaming sessions. The **Ingest Session**
refers to the time interval during which media content is uploaded to the
5GMSd AS. The **Provisioning Session** refers to the time interval during
which the 5GMSd Client can access the media content and the 5GMSd Application
Provider can control and monitor the media content and its delivery.
Interactions between the 5GMSd AF and the 5GMSd Application Provider may occur
at any time while the Provisioning Session is active.
Figure 5.1-1: High-level procedure for downlink media streaming
The 5GMSd provisioning API at M1d allows selection of media session handling
(M5d) and media streaming (M4d) options, including whether the media content
is hosted on trusted 5GMSd AS instances. of provisioned 5GMSd features is
captured in a Provisioning Session (see clause 5.3) that is uniquely
identified in the 5GMS System by a Provisioning Session identifier. The
Provisioning Session information may include Content Hosting Configurations,
Content Preparation Templates, Server Certificates, Policy Templates, a
Consumption Reporting Configuration, Metrics Reporting Configurations, Edge
Resources Configurations and Event Data Processing Configurations.
The Consumption Reporting and/or Metrics Reporting Configuration information
provisioned over M1d and passed to the 5GMSd Client by the 5GMSd AF over M5d
determines the UE data to be collected by the 5GMSd Client and subsequently
reported to the 5GMSd AF. The 5GMSd Application Provider is additionally able
to provision Event Data Processing Configurations that specify data processing
instructions for subsequent manipulation by the 5GMSd AF of UE data, whether
reported by the 5GMSd Client or otherwise obtained, and rules for restricting
the subsequent exposure by the 5GMSd AF of UE data to event consumers
including the NWDAF defined in TS 23.288 [23] and/or the 5GMSd Application
Provider.
The 5GMSd AF selects the M5d interface features according to the provisioning
option. The Media Session Handling interface exposed by the 5GMSd AF can be
used for core session handling; configuring content consumption measurement,
logging, collection and reporting; configuring QoE metrics measurement,
logging collection and reporting; requesting different policy and charging
treatments; or 5GMSd AF-based Network Assistance.
When the media content is hosted by trusted 5GMSd AS instances, then the 5GMSd
AF selects and configures the 5GMSd AS. Interactions between a 5GMSd AF and a
5GMSd AS (M3d interactions) take place for content hosting configuration,
including 5GMS Ingest (M2d) and Media Streaming (M4d) resource reservations.
The 5GMSd AS allocates M2d and M4d resources and communicates resource
identifiers back to the 5GMSd AF. The 5GMSd AF provides information about the
provisioned resources (in form of resource identifiers) for Media Session
Handling (M5d), the 5GMSd Ingest (M2d) and the Media Streaming (M4d), to the
5GMSd Application Provider. The resource identifiers for Media Session
Handling and Media Streaming are needed by the 5GMSd Client to access the
5GMSd functions.
When Content Hosting is provided by a 5GMSd AS in the external DN, then the
M3d interface is not used and the 5GMSd AF does not provide 5GMS Ingest (M2d)
and Media Streaming (M4d) resource reservations. M3d procedures are not
standardized.
5GMSd Clients can (in principle) start streaming media as soon as the
corresponding content is ingested by activating a unicast downlink streaming
session. However, it may take some time until the media content is available
for Media Streaming (via the Media Streaming API) or the distribution
availability might be based on a provisioned schedule. The unicast downlink
streaming session for a given UE (or \"for each UE\") is active from the time
at which the 5GMSd-Aware Application activates the reception of a streaming
service until its termination.
The 5GMSd-Aware Application receives application data from the 5GMSd
Application Provider before receiving the downlink streaming media. The
application data contains Service Access Information, which acts as an entry
point for the 5GMSd Client to start the downlink streaming session. The 5GMSd
Client may either receive a reference to that Service Access Information or
the full Service Access Information from the 5GMSd Application Provider.
Steps:
1\. The 5GMSd Application Provider creates a Provisioning Session with the
5GMSd AF and starts provisioning the usage of the 5G Media Streaming System.
During the establishment phase, the used features are negotiated and detailed
configurations are exchanged. The 5GMSd AF receives Service Access Information
for M5d (Media Session Handling) and, where media content hosting is
negotiated, Service Access Information for M2d (Ingestion) and M4d (Media
Streaming) as well. This information is needed by the 5GMSd Client to access
the service. Depending on the provisioning, only a reference to the Service
Access Information might be supplied.
2\. When Content Hosting is offered and selected there may be interactions
between the 5GMSd AF and the 5GMSd AS at reference point M3d, e.g., to
configure Server Certificates and/or Content Preparation Templates and to
allocate 5GMSd content ingest and distribution resources by providing a
Content Hosting Configuration. The 5GMSd AS provides resource identifiers for
the allocated resources to the 5GMSd AF, which then provides the information
to the 5GMSd Application Provider.
3\. The 5GMSd Application Provider starts the Ingest Session by ingesting
content. In case of live services, the content is continuously ingested. In
case of on-demand streaming services, the content may be uploaded once and
then updated later on.
NOTE 1: A 5GMSd AS in the external Data Network may provide the Content
Hosting.
4\. The 5GMSd Application Provider provides the Service Announcement
Information to the 5GMSd-Aware Application. The service announcement includes
either the whole Service Access Information (i.e. details for Media Session
Handling (M5d) and for Media Streaming access (M4d)) or a reference to the
Service Access Information or pre-configured information. When only a
reference is included, the 5GMSd Client fetches (in step 6) the Services
Access Information when needed. In a specific case, the 5GMSd service may be
announced using a 3GPP Service URL (see clause 4.10) that will launch the
service as defined in clause 9.
5\. When the 5GMSd-Aware Application decides to begin streaming, the Service
Access Information (all or a reference) is provided to the 5GMSd Client. The
5GMSd Client activates the unicast downlink streaming session.
6\. (Optional) In case the 5GMSd Client received only a reference to the
Service Access Information, then it acquires the Service Access Information
from the 5GMSd AF.
NOTE 2: Pre-caching of Service Access Information may also be supported by the
5GMS Client to speed up the activation of the service.
7\. The 5GMSd Client uses the Media Session Handling API exposed by the 5GMSd
AF at M5d. The Media Session Handling API is used for configuring content
consumption measurement, logging, collection and reporting; configuring QoE
metrics measurement, logging, collection and reporting; requesting different
policy and charging treatments; or 5GMSd AF-based Network Assistance. The
actual time of API usage depends on the feature and interactions that may be
used during the media content reception.
8\. The 5GMSd Client activates reception of the media content.
## 5.2 Baseline procedure for unicast downlink Media Streaming session
establishment
### 5.2.1 General
This clause describes the baseline procedure for establishing a unicast
downlink media streaming session. This baseline procedure assumes that the
5GMSd AF and the 5GMSd AS both reside in the external DN and that there are no
interactions between the 5GMSd AF and the 5G System.
### 5.2.2 Progressive download of on-demand content
This baseline procedure describes the establishment of a unicast downlink
streaming session. A streaming session may use 3GP File Format (Progressive
Download), 3GP Timed Text or other (potentially non-3GPP defined) formats.
Figure 5.2-1: High Level Procedure for progressive download for on-demand
media
Prerequisites:
\- The 5GMSd Application Provider has provisioned the 5G Media Streaming
System and has set up content ingest.
\- The 5GMSd-Aware Application has received the service announcement from the
5GMSd Application Provider.
Steps:
1: The 5GMSd-Aware Application triggers the Service Announcement and Service
and Content Discovery procedure. The Service Announcement includes either the
whole Service Access Information (i.e. details for Media Session Handling
(M5d) and for Media Streaming access (M4d)) or a reference to the Service
Access Information.
NOTE: The Service and Content Discovery procedure only involves the 5GMSd-
Aware Application and the 5GMSd Application Provider and hence is out of scope
of the present document.
2: A Media Player Entry is selected.
3: The 5GMSd-Aware Application triggers the Media Session Handler to start the
playback. The Media Player Entry is provided to the Media Session Handler.
4: When the 5GMS-Aware Application has received only a reference to the
Service Access Information (see step 1), the Media Session Handler interacts
with the 5GMSd AF to acquire the whole Service Access Information.
5: The Media Session Handler triggers the Media Player to start the session.
6: The Media Player establishes the transport session.
7: The Media Player sends the request for the progressive download content.
8: The Media Player receives the initialization information of the progressive
download content. The initialization information contains configuration
parameters for reception of the media and, optionally, also DRM information.
9: The Media Player configures the rendering pipeline for media playback.
10: The Media Player notifies the Media Session Handler, providing the
transport session information and some media content related information.
11: Optional: The Media Player acquires a DRM License from the 5GMSd
Application Provider.
12: The Media Player receives media content and puts it into the rendering
pipeline.
13: The Media Player continuously receives and plays back the media content.
### 5.2.3 DASH streaming
It is assumed here that the key information to initialize the media decoding
and rendering pipeline is present in the Media Player Entry (or referenced by
the Media Player Entry). The intention is to provide the 5GMSd Client with
information to set up the media decoding and rendering pipeline in such a way
that no pipeline reset is needed during the session. Implementations need to
consider that parts of the information are provided with the initialization
segments.
It is assumed that the client is enabled to use the same media decoding and
rendering pipeline during the session.
Figure 5.2-2: High-level procedure for DASH content
Prerequisites:
\- The 5GMSd Application Provider has provisioned the 5G Media Streaming
System and has setup content ingest.
\- The 5GMSd Aware Application has received the service announcement from the
5GMS Application Provider.
Steps:
1: The 5GMSd Aware Application triggers the Service Announcement and Service
and Content Discovery procedure. The Service and Content Discovery procedure
only involves the App and the external Application Server. The Service
Announcement includes either the whole Service Access Information (i.e.
details for Media Session Handling (M5d) and for Media Streaming access (M4d))
or a reference to the service access information.
2: A media content item is selected.
3: The 5GMSd-Aware Application triggers the 5GMSd Client to start media
playback. The Media Player Entry is provided to the 5GMSd Client.
4: When the 5GMS-Aware Application has received only a reference to the
Service Access Information (see step 1), the Media Session Handler interacts
with the 5GMSd AF to acquire the whole Service Access Information.
5: In parallel, the Media Player is invoked to start media access and
playback.
6: The Media Player establishes the transport session for acquiring the MPD
referenced by the Media Player Entry.
7: The Media Player requests the MPD.
8: The Media Player receives the MPD.
9: The Media Player processes the MPD. It determines for example the number of
needed transport sessions for media acquisition. The Media Player should be
able to use the MPD information to initialize the media pipelines for each
media stream. The MPD should also contain information to initialize the DRM
client, when DRM is used.
10: The Media Player notifies the Media Session Handler about the MPD. The
notification may contain parameters from the MPD.
11: Optional: the Media Player acquires the necessary DRM information, for
example a DRM License.
12: The Media Player configures the media playback pipeline.
13: The Media Player establishes the necessary transport sessions for the
content. For example, the Media Player may establish one transport session for
each media component (audio, video, etc) and possibly additional transport
sessions for other media representations.
14: The Media Player notifies the Media Session Handler that it is ready to
commence playback and optionally provides transport session parameters.
15: The Media Player requests initialization information. The Media Player
repeats this step for each required initialization segment.
16: The Media Player receives the initialization information.
17: The Media Player requests media segments according to the MPD.
18: the Media Player receives media segments and puts the information into the
appropriate media rendering pipeline.
19: Previous steps are repeated according to the MPD information.
NOTE: The Media Player can interact with multiple instances of the 5GMSd AS.
The Media Player can be made aware of the 5GMSd AS instances via the manifest.
### 5.2.4 Procedures for downlink streaming to Media Players with different
presentation manifests
Figure 5.2.4-1 illustrates a high-level procedure for downlink streaming to
Media Players with different presentation manifests. The extensions compared
to the DASH streaming in clause 5.2.3 are indicated in bold.
The procedure makes the following assumptions:
\- Common media segments (e.g. based on CMAF [27]) are shared between multiple
Media Players requiring different presentation formats (see clause 4.8).
\- Key information to initialize the media decoding and rendering pipeline is
present in the Media Player Entries (or referenced by the Media Player
Entries).
Figure 5.2.4-1: High-level procedure for CMAF content shared by different
Media Players
Steps:
1: The 5GMSd Application Provider provisions the 5G Media Streaming System,
including content hosting.
2: The 5GMSd-Aware Application triggers the Service Announcement and Service
and Content Discovery procedure with the 5GMSd Application Provider. The
Service Announcement includes either the whole Service Access Information
(i.e. details for Media Session Handling (M5d) and for Media Streaming access
(M4d) **which may include a Media Entry Point URL for each of the different
available presentation manifests,** or a reference to the Service Access
Information.
3: A media content item is selected.
4: The 5GMSd-Aware Application triggers the 5GMSd Client to initiate the **5G
Media Streaming Service**.
When the 5GMS-Aware Application has received only a reference to the Service
Access Information (see step 1):
5: The Media Session Handler interacts with the 5GMSd AF to acquire the whole
Service Access Information. **The Service Access Information may include a
Media Entry Point URL for each of the different available presentation
manifests**.
**6:** **The Media Session Handler provides the Media Entry Points to the
5GMS-Aware Application. The information may indicate a precedence order for
these Media Entry Points.**
Then:
**7: The 5GMSd-Aware Application queries the Media Player capabilities for
different manifests. If multiple streaming formats are supported, a preferred
one may be indicated in the response.**
**8: The 5GMSd-Aware Application selects one of the Media Entry Points based
on the information provided in steps 5 and 6 above.**
**9: The 5GMSd-Aware Application informs the Media Session Handler about the
streaming format of the chosen Media Entry Point, for example for Consumption
Reporting purposes.**
10: In parallel, the Media Player is invoked with the **selected Media Entry
Point** to start media access and playback.
Steps 11 to 24 are identical to steps 6 to 19, respectively, in clause 5.2.3.
## 5.3 Provisioning Session for Media Streaming
### 5.3.1 Domain model
The M1d baseline domain model is depicted in Figure 5.3.1-1 overleaf. It
consists of a Provisioning Session, which contains at least one of the
following:
\- A Content Hosting Configuration,
\- A Consumption Reporting Configuration which defines consumption
measurement, logging, collection and reporting functionality,
\- A Policy Template,
\- A Metrics Reporting Configuration which defines QoE metrics measurement,
logging, collection and reporting functionality,
\- An _Edge Resources Configuration_ specifying the requirements for edge
processing as defined in TS 23.548 [15] and TS 23.558 [16] in support of the
Provisioning Session, including eligibility criteria that indicate the
circumstances in which edge computing is to be used for Media Streaming
sessions associated with this Provisioning Session and parameters indicating
the tolerance of the application for relocation of the Edge AS, or
\- An _Event Data Processing Configuration_ which contains data manipulation
instructions to be performed on UE data by the Data Collection AF including,
but not limited to, reporting format conversion, data normalisation, domain-
specific anonymisation of data and (dis)aggregation of data into exposed
events. This entity includes one or more _Data Access Profiles_ , each one
defining a specific access level for controlling the event information exposed
to an event consumer.
Each Provisioning Session is uniquely identified within the 5GMS System by a
Provisioning Session identifier.
When a certain 5GMS feature is selected, the 5GMSd AF compiles the resulting
Service Access Information so that the 5GMSd Client can access the services
via M4d and/or M5d.
Figure 5.3.1-1: M1d provisioning domain model
### 5.3.2 Baseline provisioning procedure
The present clause describes the baseline procedure to provision the features
using the 5GMS System.
NOTE 1: SLA negotiations between the 5GMSd Application Provider and the 5GMS
System provider are outside the scope of the present specification and are
included in the figure below for illustrative purposes only.
Figure 5.3.2-1: High-level procedure for provisioning the 5GMS System\ for
downlink media streaming sessions
Steps:
1\. The 5GMSd Application Provider discovers the address (URL) of the 5GMSd AF
(M1d) for Session Provisioning.
2\. The 5GMSd Application Provider authenticates itself with the system. This
procedure reuses existing authentication/authorization procedures, e.g. as
defined for CAPIF [13].
3\. The 5GMSd Application Provider creates a Provisioning Session, providing
its 5GMSd Application Provider identifier as input. 5GMSd Application Provider
queries the capabilities and authorized features.
4\. The 5GMSd Application Provider specifies one or more 5GMSd features in the
Provisioning Session. A set of authorized features is activated, such as
content consumption measurement, logging, collection and reporting; QoE
metrics measurement, logging, collection and reporting; dynamic policy;
network assistance; and content hosting (including ingest).
One or more _External service identifiers_ are supplied by the 5GMSd
Application Provider to support the later retrieval of Service Access
Information from the 5GMSd AF by the Media Session Handler.
When the content hosting feature is offered and selected, the 5GMS Application
Provider configures the content hosting behaviour of the 5GMSd AS. This
Content Hosting Configuration is specified in clause 5.4 and includes
selecting the ingest protocol and format, caching and proxying of media
objects, content preparation, access protection (e.g. URL signing) and
indicating a target distribution area (e.g. through geofencing).
When the dynamic policy feature is offered and selected, the 5GMSd Application
Provider specifies a set of policies which can be invoked for the unicast
downlink streaming session. The UE becomes aware of the selected policies in
the form of a list of valid Policy Template Ids.
When the content consumption measurement, logging, collection and reporting
feature is offered and selected, the 5GMSd Application Provider indicates the
desired reporting interval. When the 5GMSd Application Provider has delegated
Service Access Information handling to the 5GMS System, then location
reporting is also selected or de-selected.
When the QoE metrics measurement, logging, collection and reporting feature is
offered and selected, the 5GMSd Application Provider provides configuration
input on the QoE post processing. When the 5GMSd Application Provider has
delegated Service Access Information handling to the 5GMS System, then more
detailed metrics reporting is configured.
When the edge computing feature is offered and selected, the 5GMSd Application
Provider provides one or more Edge Resources Configurations that can be used
to support either client-driven management or Application Provider-driven
management of edge resources associated with the Provisioning Session.
When the event data processing feature is offered and selected, the 5GMSd
Application Provider provides one or more Event Data Processing Configurations
that determine how, in the scope of the Provisioning Session, content
consumption and QoE metrics collected from the UE and application logs
collected from the 5GMSd AS are processed into events and exposed to
subscribers.
5\. When content hosting is desired, the 5GMSd AF interacts with the 5GMSd AS
at reference point M3d to allocate M2d resources and to configure the ingest
format by means of a Content Hosting Configuration (defined in clause 5.4)
which may reference Server Certificates and Content Preparation Templates, as
required. The 5GMSd AS responds with the M2d content ingest address.
6\. The 5GMSd AF compiles the Service Access Information. The Service Access
Information contains access details and options such as the Provisioning
Session identifier, M5d (Media Session Handling) addresses for content
consumption reporting, QoE metrics reporting, dynamic policy, network
assistance, etc. When content hosting is offered and has been selected in step
4, then also M4d (Media Streaming) information such as the DASH MPD is
included.
7\. The 5GMSd AF provides the results to the 5GMSd Application Provider.
a. When the 5GMSd Application Provider has selected full Service Access
Information, then the results are provided in the form of addresses and
configurations for M2d (Ingest), M5d (Media Session Handling) and M4d (Media
Streaming).
b. When the 5GMSd Application Provider delegated the Service Access
Information handling to the 5GMS System, then a reference to the Service
Access Information (e.g., a URL) is provided. The Media Session Handler
fetches the full Service Access Information later from the 5GMSd AF.
8\. When content hosting is offered and has been selected in step 4, the 5GMSd
Application Provider can start supplying content at the M2d ingest interface.
In the case of progressive download or on-demand DASH sessions, the 5GMSd
Application Provider makes the content assets available. In the case of Live
DASH streaming sessions, the 5GMSd Application Provider starts supplying the
live content.
9\. The 5GMSd Application Provider executes Service Announcement and updates
the UEs (during the lifetime of the Provisioning Session).
Optional:
10\. The 5GMSd Application Provider may update the Provisioning Session.
Depending on the parameters of the Provisioning Session:
11\. The 5GMSd AF may send event-related or periodic notifications to the
5GMSd Application Provider.
According to schedule, or upon request:
12\. The 5GMSd Application Provider may manually terminate the Provisioning
Session (at any time). All associated resources are released. Content may be
removed from the 5GMSd AS. The 5GMSd Application Provider may configure a
schedule for Provisioning Session termination.
13\. The 5GMSd AF sends a notification upon Provisioning Session termination.
The 5GMSd AF may request the creation or reuse of one or more network slices
for distributing the content of the provisioned session. If more than one
network slice is provisioned for the distribution of the content of a session,
the list of allowed S‑NSSAIs shall be conveyed to the target UEs (e.g. through
URSP or through M5d or M8d).
NOTE 2: The 5GMSd AS(s) serving the content are only accessible through the
DNN(s) used by the network slice(s) provisioned for the distribution of that
content.
## 5.4 Content Hosting Configuration for downlink Media Streaming
### 5.4.1 General
The 5G Media Streaming architecture defines an interface (M1d) for
provisioning which offers the procedures to configure content ingest for
downlink media streaming over 5G. Once a Provisioning Session is established
using the API at interface M1d, content hosting can be configured. The control
part of the ingest interface may be performed through the NEF. Ingested
content is accessible from the 5GMSd AS at interface M4d through a new
location identifier.
The M2d interface supports the ingest of the following types of content:
\- Live streaming content.
\- On-demand streaming content.
\- Static files such as images, scene descriptions, etc.
The 5GMSd AF provides an API at interface M1d that allows a 5GMSd Application
Provider to create/update/delete a Content Hosting Configuration. A Content
Hosting Configuration contains all the parameters for a particular content
ingest and distribution setup.
NOTE: In the current version of the present document, the M2d ingest interface
only supports unicast downlink streaming.
### 5.4.2 Media ingest procedure
The media ingest procedure is illustrated in figure 5.4‑1:
Figure 5.4-1: Media ingest procedure
The steps are as follows:
1: _Initialization:_ the 5GMSd Application Provider discovers the entry point
and authenticates itself with the 5GMSd AF.
2: _Create Content Hosting Configuration:_ the 5GMSd Application Provider
creates a new Content Hosting Configuration for all media formats of its
content through the 5GMSd AF. The configuration specifies a domain name,
supplies a certificate for HTTPS access to the content, sets the caching rules
per media type, indicates the distribution area (e.g. through geofencing),
distribution protocol, the desired content preparation, URL signing, etc. Upon
successful configuration, the 5GMSd AF responds with a Content Hosting
Configuration identifier, and the location of the 5GMSd AS to which to send
the content (if using the push mode).
3: _Provision 5GMSd AS instance(s):_ The 5GMSd AF configures the related 5GMSd
AS instance(s) to prepare for media ingest for that particular Content Hosting
Configuration. As well as configuring any necessary Server Certificates and/or
Content Preparation Templates, this step may involve instructing the 5GMSd AS
instance(s) to set appropriate caching rules, to perform URL signature
validation and to limit access through geofencing. The 5GMSd AS(s) responds
indicating whether the configuration was successful or not.
In case of partial failure, the configuration shall be removed from all 5GMS
AS(s) that succeeded.
4: _Confirm configuration information:_ The 5GMSd AF communicates the Content
Hosting Configuration of the 5GMSd AS(s) back to the 5GMSd Application
Provider for further media push or pull.
In the case where not all requested media formats could be accommodated during
the previous step, the 5GMSd AF shall indicate these in the failure response.
5: _Publish Media Player Entries:_ The 5GMSd Application Provider shall then
publish the Media Player Entries to the 5GMSd-Aware Application to enable
access to the content, possibly in different formats.
6: _Media ingest:_ The 5GMSd AS(s) may start pulling or receiving content (if
using push mode) from the 5GMSd Application Provider. The 5GMSd AS performs
the requested content preparation prior to providing access to the content.
NOTE: Pull of media content from the external 5GMSd AS(s) may be triggered by
a request from the 5MGSd Client.
The 5GMSd Application Provider may update a Content Hosting Configuration
subsequently to modify some of its parameters. The subset of parameters that
can be updated may be limited by the 5GMSd AF.
## 5.5 Metrics collection and reporting
### 5.5.1 General
Metrics collection and reporting can be done in different ways, depending on
the relationship between the Application Provider and the 5GMS System
operator. The following clauses show simplified signalling examples for two
different use-cases.
### 5.5.2 RAN-based reporting procedure
In the first use-case, shown in Figure 5.5.2-1 below, the 5GMS System operator
controls the metrics collection and reporting using the RAN-based
configuration method. In this case the metrics are configured via the RAN and
the control plane, independent of 5GMS functional support.
Figure 5.5.2-1: Metrics collection and reporting via RAN-based configuration
The different steps are explained below:
1: Overall metrics configuration is done on the network level, for instance
defining which geographical areas that shall have metrics collection active,
which metrics to collect, and how metrics shall be reported. If per-slice
metrics collection and reporting is supported, a slice scope may be present in
the metrics configuration, indicating the specific slice instance(s) for
metrics collection and reporting.
2: The metrics configuration(s) is/are sent from the OAM to the RAN, which
does not forward that information to the UE at this stage.
3: Time passes, and it is assumed that the UE moves around during that period.
4: The UE enters an area (cell, location area, etc.,) which is inside the
geographical constraint. This is discovered by the RAN, and it now needs to
activate metrics collection and reporting for the UE.
5: The actual metrics configuration is sent from the RAN to the Media Session
Handler, via the control plane.
6: Additional time passes, and the UE has a metrics configuration, but no
streaming session has started.
7: A streaming session is started.
8: The session setup is done in conjunction with signalling transactions (not
shown here).
8a: If a slice scope is included in the metrics configuration set, the Media
Session Handler shall check the running slice which is carrying the current
media streaming (e.g. via the AT Command +CGDCONT [24] or the specific traffic
mapping with URSP [4]). If the running slice is within the slice scope, the
metrics collection and reporting shall be excuted. Additionally, the running
slice shall also be included into the metrics reports.
9: A new metrics collection job is created in the Media Player.
10: A reference to the new metrics collection job is returned.
11: The configuration for the metrics collection job is sent to the Media
Player (i.e. which metrics should be measured) along with the measurement
resolution interval). The metrics reporting interval timer is activated in the
Media Session Handler.
12: Media is delivered and rendered, and...
13: ...more media is delivered...
14: The configured metrics reporting interval has elapsed, and the Media
Session Handler now requests the collected metrics from the Media Player.
15: The Media Player returns the collected metrics.
16: The metrics are reported via the control plane.
17: The session continues...
18: more media is delivered, and then the session is finished.
19: The Media Session Handler requests the final metrics collected.
20: The Media Player returns the final collected metrics.
21: The metrics are reported to the OAM via the control plane.
21a: The OAM may determine the per-slice QoE metrics based on the metrics
reports and the slice scope.
22: The metrics collection job is deleted.
23: Time passes, the UE moves around.
24: The UE leaves the geographical area specified by the metrics
configuration.
25: The RAN sends metrics (de)configuration to the UE, to stop future metrics
collection.
### 5.5.3 5GMSd AF-based reporting procedure
The second use-case, shown in figure 5.5.3-1 below, illustrates a scenario
where the metrics collection and reporting is configured by the 5GMSd AF. In
this example, it is assumed that the metrics configuration provided by the
5GMSd AF comprises instructions/rules regarding metrics collection (i.e.
measurement and logging) and reporting for two different schemes - one that is
non-3GPP-defined and initially sourced from the 5GMSd AS, and the other scheme
that is defined by 3GPP and initially sourced from an OAM Server belonging to
the 5GMS System operator. Each metrics scheme requires the 5GMSd Client to
perform metrics collection and subsequent metrics reporting to the 5GMSd AF
according to the configuration rules of that scheme. Furthermore, it is
assumed that the 5GMSd AF is required to deliver metrics reports obtained from
the 5GMSd Client to separate destination entities, upon optionally having
performed post-processing of the original report information, according to the
configuration rules of each metrics scheme. The 5GMSd AF and 5GMSd AS
functions can be either trusted or untrusted.
Figure 5.5.3-1: Metrics collection and reporting via 5GMSd AF-based
configuration
The message sequence steps are described below:
1: The 5GMSd AF is provisioned with two separate sets of metrics reporting
configuration information - metrics scheme_1 as defined by the 5GMSd
Application Provider and metrics scheme_2 as defined by 3GPP, each pertaining
to metrics collection by the Media Player, retrieval of those collected
metrics from the Media Player by the Media Session Handler, and the generation
and delivery of metrics reports from the Media Session Handler to the 5GMSd
AF. The 5GMSd AF is similarly provisioned with two separate sets of metrics
reporting configuration information, associated with the metrics schemes 1 and
2, regarding required post-processing functionality and subsequent and
separate delivery of processed metrics reports to the 5GMSd Application
Provider and to the OAM Server.
2: The 5GMSd-Aware Application triggers the Service Announcement and Content
Discovery procedure. The Service Announcement includes the whole Service
Access Information that contains metric configuration info for metrics schemes
1 and 2, with their associated metrics collection configurations acquired by
the Media Player and metrics collection configurations acquired by the Media
Session Handler.
3: Time passes until the 5GMSd UE initiates session establishment and media
playback.
4: The 5GMSd-Aware Application informs the Media Player of impending media
playback.
5a: The Media Player requests the establishment of a streaming session with
the Media Session Handler which acknowledges the request.
5b: The Media Session Handler requests the establishment of a streaming
session with the 5GMSd AF which confirms the streaming session establishment.
5c: The Media Session Handler informs the Media Player the successful set-up
of the streaming session.
6: Media playback pipeline is set up between the Media Player, the 5GMSd AS
and the 5GMSd Application Provider.
7: The Media Session Handler queries the Media Player on its capability to
perform metrics collection (measurement and logging function) in accordance
with both schemes 1 and 2 as defined by its metrics configuration.
8: The Media Player acknowledges its support for the collection of the
required metrics of all configured schemes.
During the course of media playback, steps 9-18 below may be repeated,
depending on the duration of the playback and the frequency of metrics
reporting as set by the metrics configuration for each of the two schemes.
9: Assuming a live streaming service, media content is delivered via push
ingest from the 5GMSd Application Provider to the 5GMSd AS.
10: The Media Player fetches media content from the 5GMSd AS and begins media
playback.
11: The Media Player notifies the Media Session Handler of the start of media
playback, causing the Media Session Handler to initialize and begin countdown
of separate metrics reporting interval timers for schemes 1 and 2.
12: Upon expiration of timer_1 (associated with scheme_1), the Media Session
Handler retrieves the logged metrics measurements from the Media Player
according to scheme_1.
13: In accordance with its metrics reporting configuration as provisioned in
step 2, a metrics report for scheme_1 is sent from the Media Session Handler
to the 5GMSd AF.
14: Upon expiration of timer_2 (associated with scheme_2), the Media Session
Handler retrieves the logged metrics measurements from the Media Player
according to scheme_2.
15: In accordance with its metrics reporting configuration as provisioned in
step 2, a metrics report for scheme_2 is sent from the Media Session Handler
to the 5GMSd AF.
16: In accordance with its metrics reporting configuration as provisioned in
step 1, the 5GMSd AF performs separate post-processing in accordance with
schemes 1 and 2 (e.g. filtering, aggregation, reformatting) of the received
types of metrics reports.
Furthermore, in accordance with its metrics reporting configuration as
provisioned in step 1:
17: The 5GMSd AF sends a processed metrics report in accordance with scheme_1
to the 5GMSd Application Provider.
18: The 5GMSd AF sends a processed metrics report in accordance with scheme_2
to the OAM Server.
Upon the termination of media playback (as notified by the 5GMSd-Aware
Application to the Media Player) a final round of metrics collection and
reporting is performed:
19: The Media Session Handler obtains the latest metrics measurements from the
Media Player in accordance with schemes 1 and 2. These procedures might occur
prior to the nominal expiration of the metrics reporting interval timers.
20: Final metrics reports, in accordance with schemes 1 and 2 are sent by the
Media Session Handler to the 5GMSd AF. These procedures might occur prior to
the expiration of the nominal metrics reporting intervals.
21: The 5GMSd AF performs post-processing of the received final metrics
reports in accordance with schemes 1 and 2.
22: Same as step 17.
23: Same as step 18.
NOTE: Although not explicitly shown or described in Figure 5.3.3-1, should the
5GMSd AF represent an untrusted network entity and the OAM Server represent a
trusted network entity, the delivery of processed metrics reports from the
5GMSd AF to the OAM Server, as depicted in steps 18 and 23, must be mediated
by the NEF (Network Exposure Function).
### 5.5.4 Metrics reporting configuration parameters
Table 4.2.3-4 in clause 4.2.3 describes the metrics reporting configuration
parameters used in step 5 of Figure 5.5.2-1 and step 3a of Figure 5.5.3-1.
Note that some of the parameters are only relevant for a specific reporting
option, as shown in Table 5.5.4-1 below.
Table 5.5.4-1: Metrics reporting configuration parameters and options
**Parameters** **Relevance in RAN-based reporting?** **Relevance in 5GMSd AF-
based reporting?**
* * *
Server address No Yes Scheme No (default 3GPP) Yes DNN No Yes Reporting
interval Yes Yes Sample percentage Yes Yes Streaming source filter Yes Yes
Slice scope Yes No Metrics Yes (3GPP-defined) Yes (3GPP-defined or non-3GPP
defined)
## 5.6 Consumption reporting
### 5.6.1 Consumption reporting procedure
Figure 5.6-1: Consumption reporting
Steps:
The first phase is the initialisation phase:
1: The 5GMSd-Aware Application is started.
2: A media content item is selected.
3: The 5GMSd-Aware Application triggers the Media Session Handler to start
content playback. The Media Player Entry is provided.
4: The 5GMSd AF initializes the parameters for the consumption reporting
configuration (e.g. frequency).
5: The Media Session Handler triggers consumption reporting.
6: The Media Session Handler starts the Media Player with the Media Player
Entry.
The second phase is media playback:
The user preferences may be changed:
7: The 5GMSd-Aware Application selects/changes the user preferences.
8: The Media Player transmits consumption reporting user preferences to the
Media Session Handler.
When media is playing, the consumption reporting parameters may be updated.
9: The 5GMSd AF updates the consumption reporting parameters.
When media is playing:
10: The Media Player regularly accesses to the media content.
11: In case of changes to the consumed media properties, the Media Player
transmits the changes to the Media Session Handler.
12: The Media Session Handler regularly sends report(s) to the 5GMSd AF.
The last phase is to stop the media:
13: The 5GMSd-Aware Application triggers the Media Session Handler to stop
content playback.
14: The Media Session Handler stops consumption reporting.
15: The Media Session Handler may send final consumption report(s) to the
5GMSd AF.
17: The Media Session Handler stops the Media Player.
### 5.6.2 Consumption reporting parameters
Table 4.2.3‑2 describes the parameters used in step 4 of clause 5.6.1.
Table 5.6.2-2 below describes the additional parameters used in steps 13 or 16
of clause 5.6.1.
Table 5.6.2-2: Additional consumption reporting parameters
+---------------------------------+-----------------------------------+ | Parameters | Description | +=================================+===================================+ | Media Player Entry pointer | Identify the Media Player Entry. | | | | | | In the case of DASH, the Media | | | Player Entry pointer can be a URL | | | of the MPD. | +---------------------------------+-----------------------------------+ | Consumption reporting client ID | Identify the identifier of the UE | | | that consumes the data. | +---------------------------------+-----------------------------------+ | Location type | Identify the UE location type. | | | | | | This parameter is only used when | | | the location reporting is enabled | | | for the UE or for the Downlink | | | Streaming session with a | | | condition that the UE allows to | | | share its location within | | | operator\'s trust domain. | | | | | | The location type can be CGI, | | | ECGI or NCGI as defined in TS | | | 23.003 [9]. | +---------------------------------+-----------------------------------+ | Location | Identify the UE location. | | | | | | This parameter is only used when | | | location reporting is enabled for | | | the UE or for the Downlink | | | Streaming session, and when the | | | UE allows its location to be | | | shared within the Network | | | Operator\'s trust domain. | +---------------------------------+-----------------------------------+ | Media consumed | Identifies the media consumed. | | | | | | In the case of DASH, the | | | AdaptationSet\@id may be used. | +---------------------------------+-----------------------------------+ | Start time | The time when media consumption | | | started. | +---------------------------------+-----------------------------------+ | Duration | The duration of media consumption | | | relative to the start time. | +---------------------------------+-----------------------------------+
### 5.6.3 Triggering consumption reporting
If consumption reporting is supported and activated, the 5GMSd Client shall
send a consumption report when any of the following conditions is met:
\- Start of 5GMS consumption of a Downlink Streaming session;
\- Stop of 5GMS consumption of a Downlink Streaming session;
\- Upon determining the need to report ongoing 5GMS consumption
\- Reports are sent at periodic intervals determined by the _reporting
interval_ attribute of the consumption reporting configuration specified in
Table 4.2.3‑2.
\- Upon determining a location change if location reporting is requested by
the 5GMSd AF and is allowed to be reported by the UE.
NOTE: Whenever a consumption report is sent, the 5GMSd Client is expected to
reset its corresponding reporting interval timer to the value of that
attribute and begin countdown of the timer. Whenever the 5GMSd Client stops
consumption of the same session, it is expected to disable its corresponding
reporting interval timer.
## 5.7 Establishing a Unicast Downlink Media Streaming Session with 5GMSd AF
interactions for dynamic policy updates
### 5.7.1 General
This clause describes the provisioning for dynamic policy invocation and the
establishment of a unicast downlink streaming session using the dynamic policy
API. The establishment of the unicast downlink media streaming session uses
5GMSd AF interactions, as described in steps 4 to 8 of clause 5.1. The dynamic
policy API allows separate handling of Service Data Flows within the same PDU
Session. The Media Session Handler provides a Policy Template Id together with
Service Data Flow Descriptions when requesting a dynamic policy. An example
Policy Template Id value is \"background_data\".
The Media Session Handler provides needed information to the 5GMSd AF, so that
the 5GMSd AF can combine the semi-static parameters from a Policy Template
(which is associated with the Policy Template Id) with the API parameters to
trigger a dynamic PCC rule update using the NEF or PCF.
The 5GMSd AF may trigger, for example, the \"AF session with required QoS
procedure\" (see TS 23.502 [3] clause 4.15.6.6) for updating QoS related
dynamic PCC rules. For changing charging related rules, the 5GMSd AF may
trigger the \"Change the chargeable party during the session\" procedure (see
TS 23.502 [3] clause 4.15.6.5).
### 5.7.2 Provisioning
The provisioning for the dynamic policy procedure follows generally the
procedure from clause 5.3. Specifically, the Dynamic Policy feature is
activated and, as result, the 5GMSd Application Provider is able to provision
one or more Policy Templates.
The domain model of M1d and M5d APIs is depicted in Figure 5.7.2-1.
Realization of the dependencies between M1d and M5d data entries are up to
implementation.
NOTE: Multiple M5d 5GMSd AF nodes may reference the same M1d resource.
Figure 5.7.2-1: Domain model for dynamic policies
A Policy Template is identified by a Policy Template Id and contains semi-
static parameters, including the API entry for the PCF/NEF interactions. The
list of provisioned Policy Template Ids is communicated as valid Policy
Template Ids to the Media Session Handler. The Media Session Handler uses one
of the valid Policy Template Ids when invoking a dynamic policy.
### 5.7.3 Progressive Download of On-Demand Content
This procedure describes the establishment of a unicast downlink media
streaming session with 5GMSd AF interactions for dynamic policy updates. A
streaming session may use 3GP File Format (Progressive Download), 3GP Timed
Text or other (potentially non-3GPP defined) formats.
Figure 5.7-1: High Level Procedure for progressive download for on-demand
media
Prerequisites:
\- The 5GMSd Application Provider has provisioned the 5G Media Streaming
System and has set up content ingest.
\- The 5GMSd-Aware Application has received the Service Announcement from the
5GMSd Application Provider.
\- The Service Access Information contains detailed information for the policy
related interactions. Specifically, the information includes URL(s) for the
5GMSd AF, an identifier of the 5GMS Provisioning Session and a list of
authorized Policy Type indications for that specific application.
\- The 5GMSd Application Provider has agreed an SLA with the Network Operator
defining the possible QoS levels and their charging rates (see TS 23.503 [4]
clause 6.1.3.22). The PCF is configured with the corresponding QoS parameters
and charging information.
Steps:
1: The 5GMSd-Aware Application triggers the Service Announcement and Content
Discovery procedure. The Service Announcement includes either the whole
Service Access Information (i.e. details for Media Session Handling (M5d) and
for Media Streaming access (M4d)) or a reference to the Service Access
Information. The configuration parameters are listed in Table 5.7.4-1.
NOTE: The Service and Content Discovery procedure only involves the 5GMSd-
Aware Application and the external Application Server, and hence is out of
scope of the present document.
2: A Media Player Entry is selected.
3: The 5GMSd-Aware Application triggers the Media Session Handler to start
media playback. The Media Player Entry is provided to the Media Session
Handler.
4: When the 5GMSd-Aware Application has received a reference to the Service
Access Information (see step 1), the Media Session Handler interacts with the
5GMSd AF to acquire the whole Service Access Information.
5: The Media Session Handler triggers the Media Player to start the session.
6: The Media Player establishes the transport session, e.g. a TCP connection.
7: The Media Player notifies the Media Session Handler about the Service Data
Flow Description(s) of the transport session established in the previous step
(see TS 23.502 [3]), as defined in the Service Access Information. This can be
for example 5-tuples.
8: The Media Session Handler requests that a dynamic policy be applied to the
media session. The request includes at least the Provisioning Session
identifier, the Service Data Flow Description(s) and the Policy Template
identifier (see Table 5.7.4‑1) to be applied to the described transport
session. In some cases, a QoS specification is also provided, containing
desired QoS information. The 5GMSd AF uses the Policy Template indication for
the related procedure and to identify the related network function.
9: This step applies when the 5GMSd AF resides in the trusted Data Network.
Depending on the Policy Template, the step is executed either:
a. When the Policy Template relates to QoS, the 5GMSd AF may either directly
interact with the PCF or may use a NEF service:
\- when directly interacting with the PCF, the 5GMSd AF uses the
Npcf_PolicyAuthorization Service as defined in TS 23.502 [3] clause 5.2.5.3).
\- when interacting via the NEF with the PCF, continue at step 10a.
b. When the Policy Template relates to a different charging scheme, the 5GMSd
AF may either directly interact with the PCF or may use a NEF service:
\- when directly interacting with the PCF, the 5GMSd AF uses the
Npcf_PolicyAuthorization Service as defined in TS 23.502 [3] clause 5.2.5.3).
\- when interacting via the NEF with the PCF, continue at step 10b.
10: This step applies when the 5GMSd AF resides in the external Data Network.
Depending on the Policy Template, the step is executed either:
a. When the Policy Template relates to QoS, the 5GMSd AF may use the
Nnef_AFsessionWithQoS service as defined in TS 23.502 [3] clause 5.2.6.9. (The
complete call flow is described in TS 23.502 [3] clause 4.15.6.6.)
b. When the Policy Template relates to a different charging scheme, the 5GMSd
AF may use the Nnef_ChargeableParty service as defined in TS 23.502 [3] clause
5.2.6.8. (The complete call flow is described in TS 23.502 [3] clause 4.15.6.4
and clause 4.15.6.5.) The Policy Template may contain the Sponsor Information
(values, based on SLA negotiation) and Background Data Transfer Reference ID.
The Flow description is provided by the Media Session Handler at API
invocation.
11: The Media Session Handler queries the status of the dynamic policy
invocation. The response contains status information (policy accepted,
rejected, etc) and information on policy enforcement such as the enforcement
method and enforcement bit rate.
12: The Media Session Handler notifies the Media Player according to the
response from the 5GMSd AF (see Table 5.6.4-2).
13: The Media Player sends the request for the progressive download content.
14: The Media Player receives the initialization information of the
progressive download content. The initialization information contains
configuration parameters for reception of the media, and optionally also DRM
information.
15: The Media Player configures the rendering pipeline for media playback.
16: The Media Player notifies the Media Session Handler, providing the
transport session information and some media content related information.
17: Optional: Media Player acquires a DRM License from as the 5GMSd
Application Provider.
18: The Media Player receives media content and puts it into the rendering
pipeline.
19: The Media Player continues to receive and play back the media content.
### 5.7.4 DASH Streaming
It is assumed here that the key information to initialize the media decoding
and rendering pipeline is present in the Media Player Entry (or referenced by
the Media Player Entry). The intention is to provide the client with
information to setup the media decoding and rendering pipeline in such a way
that no pipeline reset is needed during the session. Implementations need to
consider that parts of the information are provided with the initialization
segments.
It is assumed that the client is enabled to use the same media decoding and
rendering pipeline during the session.
Figure 5.7-2: High Level Procedure for DASH content
Prerequisites:
\- The 5GMSd Application Provider has provisioned the 5G Media Streaming
System and has set up content ingest.
\- The 5GMSd-Aware Application has received the service announcement from the
5GMSd Application Provider.
\- The Service Announcement Information contains detailed information for the
policy related interactions. Specifically, the information includes URLs for
the 5GMSd AF, an identifier of the Provisioning Session and a list of
authorized Policy Type indications for that specific application.
\- The 5GMSd Application Provider has agreed an SLA with the Network Operator
defining the possible QoS levels and their charging rates (see TS 23.503 [4]
clause 6.1.3.22). The PCF is configured with the corresponding QoS parameters
and charging information.
Steps:
1: The 5GMSd-Aware Application triggers the Service Announcement and Content
Discovery procedure. The Content Discovery procedure only involves the App
5GMSd-Aware Application and the 5GMSd Application Provider. The Service
Announcement includes either the whole Service Access Information (i.e.
details for Media Session Handling (M5d) and for Media Streaming access (M4d))
or a reference to the Service Access Information. The configuration parameters
are listed in Table 5.7.4-1.
2: A media content item is selected.
3: The 5GMSd-Aware Application triggers the Media Session Handler to start
media playback. The Media Player Entry is provided to the Media Session
Handler.
4: When the 5GMS-Aware Application has received only a reference to the
Service Access Information (see step 1), the Media Session Handler interacts
with the 5GMSd AF to acquire the whole Service Access Information.
5: The Media Session Handler triggers the Media Player to start the session.
6: The Media Player establishes a transport session for acquiring the MPD
referenced by the Media Player Entry.
7: The Media Player requests the MPD.
8: The Media Player receives the MPD.
9: The Media Player processes the MPD. It determines, for example, the number
of needed transport sessions for media acquisition. The Media Player should be
able to use the MPD information to initialize the media pipelines for each
media stream. The MPD should also contain information to start the DRM client
initialization, when DRM is used.
10: The Media Player notifies the Media Session Handler about the MPD. The
notification may contain parameters from the MPD.
11: (Optional) the Media Player acquires the necessary DRM information, for
example a DRM License.
12: The Media Player configures the media rendering pipeline.
13: The Media Player establishes the necessary transport session(s) for
acquiring the content. For example, the Media Player may establish one
transport session for each media component (audio, video, etc) and possibly
additional transport sessions for other media representations.
14: The Media Session Handler is notified about the established transport
session(s) for the content by providing the Service Data Flow Description of
the application flows as defined in the Service Access Information. This can
be for example 5-tuples.
15: The Media Session Handler requests that a dynamic policy be applied to the
media session. The request includes at least the Provisioning Session
identifier, the Service Data Flow Description(s) and the Policy Template
identifier (see Table 5.7.4-1), to be applied to the described transport
session. In some cases, a QoS specification is also provided, containing
desired QoS information. The 5GMSd AF uses the Policy Template for the related
procedure and to identify the related network function.
NOTE: The Media Session Handler may add and remove Service Data Flow
description(s) from the dynamic policy resource during the lifetime of the
Media Streaming Session.
16: This step applies when the 5GMSd AF resides in the trusted Data Network.
Depending on the Policy Template, the step is executed either:
a. When the Policy Template relates to QoS, the 5GMSd AF may either directly
interact with the PCF or may use a NEF service:
\- when directly interacting with the PCF, the 5GMSd AF uses the
Npcf_PolicyAuthorization service as defined in TS 23.502 [3] clause 5.2.5.3).
\- when interacting via the NEF with the PCF, continue at step 17a.
b. When the Policy Template relates to a different charging scheme, the 5GMSd
AF may either directly interact with the PCF or may use a NEF service:
\- when directly interacting with the PCF, the 5GMSd AF uses the
Npcf_PolicyAuthorization service as defined in TS 23.502 [3] clause 5.2.5.3).
\- when interacting via the NEF with the PCF, continue at step 17b.
17: This step applies when the 5GMSd AF resides in the external Data Network.
Depending on the Policy Template, the step is executed either:
a. When the Policy Template relates to QoS, the 5GMSd AF may use the
Nnef_AFsessionWithQoS service as defined in TS 23.502 [3] clause 5.2.6.9. (The
complete call flow is described in TS 23.502 clause 4.15.6.6.)
b. When the Policy Template relates to a different charging scheme, the 5GMSd
AF may use the Nnef_ChargeableParty service as defined in TS 23.502 [3] clause
5.2.6.8. (The complete call flow is described in TS 23.502 clause 4.15.6.4 and
clause 4.15.6.5.) The Policy Template may contain the Sponsor Information
(values, based on SLA negotiation) and Background Data Transfer Reference ID.
The Flow Description is provided by the Media Session Handler at API
invocation.
18: The Media Session Handler queries the status of the dynamic policy
invocation. The response contains status information (policy accepted,
rejected, etc) and information on policy enforcement such as the enforcement
method and enforcement bit rate.
19: The Media Session Handler updates the configuration of the Media Player
according to the response from the 5GMSd AF (See Table 5.6.4-2).
20: The Media Player requests a DASH initialization segment. The Media Player
repeats this step for each required initialization segment.
21: The Media Player receives the initialization segments.
22: The Media Player requests DASH media segments according to the MPD.
23: The Media Player receives media segments and feeds them into the
appropriate media rendering pipeline.
24: Previous steps are repeated according to the MPD information.
### 5.7.5 Parameters for dynamic policy invocation configuration
Table 5.7.5-1: Status information dynamic policy
**Parameters** **Description**
* * *
Policy Enforcement Information about the policy enforcement system.
### 5.7.6 Dynamic Policy selection for downlink media streaming based on
Service Operation Point signalling
This clause provides an extension to the general call flow in clause 5.2.3 in
order to address the usage of Service Descriptions to select a Dynamic Policy
in downlink 5G Media Streaming services that supports the requirements of an
abstract Service Operation Point. Details are shown in figure 5.7.6‑1.
Figure 5.7.6-1: High-level procedure for DASH content streaming\ with Service
Operation Point handling
Prerequisites:
\- The 5GMSd Application Provider has provisioned the content hosting feature
in the 5G Media Streaming System.
\- The 5GMSd-Aware Application has received the Service Announcement from the
5GMSd Application Provider.
Extended Steps:
1\. Policy Templates are provisioned in the 5GMSd AF.
12\. The Media Player informs the 5GMS-Aware Application about the set of
Service Descriptions associated with the Media Player Entry document for the
content selected in step 3. Each Service Description is identified by a
different _External reference_.
13\. The 5GMSd-Aware Application selects one of the available Service
Descriptions.
14\. The Media Player provides the _External reference_ of the selected
Service Description to the Media Session Handler.
15\. The Media Session Handler selects a Dynamic Policy with a matching
_External reference_.
21\. The Media Player provides Operation Point metrics to the Media Session
Handler.
22\. The Media Session Handler sends Service Operation Point measurements and
events to the 5GMSd AF.
### 5.7.7 Use of Service Operation Point signalling to optimise delivery of
low-latency live media streaming services (informative)
#### 5.7.7.1 5GMS System acts as a CDN
In this case, the specific aspects are as follows:
> 1\. A provisioning agreement is struck between the 5GMSd Application
> Provider and the operator of the 5GMS System in the form of one or several
> Service Operation Points expressed as Service Descriptions and/or Policy
> Templates. (Service Descriptions may be derived from Policy Templates if the
> latter are omitted, or _vice versa_.)
>
> 2\. DASH or HLS content is provided externally. Media Entry Point documents
> are annotated with Service Descriptions. The content is published to the
> 5GMS System for distribution over downlink media streaming.
>
> 3\. Content is ingested by the 5GMSd AS at reference point M2d such that the
> latency requirements can be met.
>
> 4\. The 5GMS System distributes the ingested content according to the
> provisioning agreement, i.e. meeting bit rate and latency requirements of
> the agreed Service Operation Point.
NOTE: The path between an (external) 5GMS Application Provider and the 5GMSd
AS is subject to a separate transport-level agreement.
> 5\. The Service Operation Point metrics collated by the 5GMSd AF are used by
> the 5GMS System to determine whether the agreed Service Operation Point has
> been satisfied, or whether the Policy Templates need to be adjusted so that
> it can be satisfied.
For low-latency streaming where the 5GMS System acts as a CDN, the basic call
flow documented in clause 5.7.6 is extended as follows.
Extended steps:
1\. Policy Templates suitable for supporting low-latency media streaming are
provisioned in the 5GMSd AF.
2\. Media ingest supports a low-latency protocol, e.g. segment content is
provided in chunks.
14\. 5GMSd-Aware Application selects a low-latency Service Description and
provides its _External reference_ to the Media Session Handler.
17\. The Media Player configures itself for low-latency playback based on the
low-latency Service Description selected in step 14.
> 21\. The Media Player operates in a low-latency media delivery mode.
#### 5.7.7.2 5GMSd AS deployed in an external DN
In this case, the specific aspects are as follows:
> 1\. A provisioning agreement is struck between the 5GMS Application Provider
> and the operator of the 5GMS System in the form of one or several Service
> Operation Points expressed as Service Descriptions and/or Policy Templates.
> (Service Descriptions may be derived from Policy Templates if the latter are
> omitted, or _vice versa_.)
>
> NOTE: The path between the externally deployed 5GMSd AS and the 5G System
> may be subject to a separate transport-level agreement.
>
> 2\. The 5GMSd AS external.
>
> 3\. Content ingest by the 5GMSd AS is out of scope.
>
> 4\. The 5GMS System distributes the content according to the agreed
> provisioning agreement, i.e. meeting bit rate and latency requirements of
> the agreed Service Operation Point.
>
> 5\. The Service Operation Point metrics collated by the 5GMSd AF are used by
> the 5GMS System to determine whether the agreed Service Operation Point has
> been satisfied, or whether the Policy Templates need to be adjusted so that
> it can be satisfied.
For low-latency streaming where the 5GMSd AS is deployed in an external DN,
the basic call flow documented in clause 5.7.6 is extended as follows.
Extended steps:
1\. Policy Templates suitable for supporting low-latency media streaming are
provisioned in the 5GMSd AF.
14\. 5GMSd-Aware Application selects a low-latency Service Description.
17\. The Media Player configures itself for low-latency playback based on the
low-latency Service Description selected in step 14.
> 21\. The Media Player operates in a low-latency media delivery mode.
## 5.8 Dynamic Policy based on Network Slicing for Downlink Media Streaming
### 5.8.1 Procedure
The 5GMSd Application Provider requests the assignment of more than one
network slice for the distribution of the service. The 5GMSd Application
Provider indicates the desired network slice features that correspond to the
Service Access Information. Upon successful assignment of the network slices
for the service, the 5GMSd AF shall respond with the list of allowed S-NSSAIs
to the 5GMSd Application Provider.
Figure 5.8.1-1 is the flowchart diagram for this procedure.
Figure 5.8.1-1: Dynamic Policy based on Network Slicing for Downlink Streaming
Pre-requisites:
1\. The UE knows how to access the network slice(s) associated with a
particular Provisioning Session.
2\. The 5GMSd AS(s) serving the content for the particular Provisioning
Session shall be accessible through the DNN(s) associated to the network
slice(s) provisioned for the distribution of that content.
The steps are as follows:
1\. The 5GMSd-Aware Application triggers media playback by invoking the Media
Player with the Media Player Entry for the selected content.
2\. The Media Player requests the manifest from the 5GMSd AS.
3\. The Media Player notifies the Media Session Handler about the upcoming
media session and may request specific 5GMSd AF-based Network Assistance for
that session, when not already established.
4\. The Media Session Handler retrieves information from the 5GMSd AF to
assist with the route selection for the session. This may include information
about the network slices, the DNNs, any pre-authorized QoS guarantees for that
Provisioning Session. The Media Session Handler gets information about the
operation point selection from the Media Player as described in step 4.
5\. The Media Session Handler and the UE Policy Management in the UE perform
the route selection procedure using information such as the playback operation
point, the traffic descriptors. The UE Policy Management will use the matching
filter to retrieve the Route Selection descriptor, which provides the DNN, and
the S-NSSAI(s), identifying the network slice(s) to be used for this
Provisioning Session.
6\. The UE reuses an existing PDU session with the selected S-NSSAI and DNN
from step 5, or requests the establishment of a new PDU session with the
identified parameters, if one doesn\'t exist already.
7\. The streaming of the media content at the target operation point starts.
## 5.9 Downlink Network Assistance
### 5.9.1 Introduction
The Network Assistance (NA) feature enables a UE that is receiving a downlink
media stream to improve the QoE of the media streaming session, by being able
to make use of two distinct facilities.
The first facility is **bit rate recommendation** (**throughput estimation**).
This enables the UE to start a downlink streaming session at the most
appropriate bit rate for the network conditions at hand, or to obtain a
recommendation from the network which will remain valid until further notice
during a media streaming session. The recommended bit rate is based on network
estimations or predictions of available link bandwidth. This function is
provided as an additional tool to support the UE, in addition to the common
approach of the UE performing its own estimation based on measurement of the
downlink traffic in the past.
The second facility is the **delivery boost**. The 5GMSd Client uses this
function to indicate to the network that a temporary boost, i.e., a temporary
increase of network throughput for this client is needed in order to avoid the
risk of media playback stalling due to buffer under-run, which could otherwise
occur during the next media segment or soon after. Throughput boosting may
also be used at the start of a playback session to shorten the time to start
media playback, giving a better experience for the user.
Network Assistance for downlink media streaming may be offered to the UE in
one of two ways:
\- Based on interaction between the UE and the 5GMSd AF, with a subsequent
interaction between the 5GMSd AF and the PCF (or the NEF);
\- Based on interaction between the UE and the RAN, re-using the ANBR-based
RAN signalling.
The UE shall not use both approaches on the same Network Assistance session.
Figure 5.9.1-1 depicts the Network Assistance feature in the context of the
5GMS architecture, showing the scope of both approaches.
Figure 5.9.1-1: Downlink Network Assistance alternative approaches
### 5.9.2 5GMSd AF-based downlink Network Assistance
The Network Assistance (NA) feature enables a UE to receive a bit rate
recommendation from the 5GMSd AF that provides the NA server function. The
5GMSd AF provides the response with an estimation of throughput, or the
recommend­ation of a bit rate which will remain valid until further notice.
The UE uses this estimation to derive the most suitable bit rate for its
downlink content session from the versions that might be available. The
network is expected to commit resources to be able to fulfil the
recommendation, although no guarantee for the bandwidth estimation can be
assumed. The 5GMSd Client may provide additional information, such as
available media versions, in terms of the required bit rates, to the 5GMSd AF.
The second facility is the delivery boost. The 5GMSd Client uses this function
to indicate to the network that a temporary boost, i.e. a temporary increase
of network throughput for this client, is needed.
Each interaction for the 5GMSd AF-based downlink Network Assistance procedures
consists of two steps in sequence:
1\. Between the UE (Media Session Handler) and the 5GMSd AF using a 5GMS API
at interface M5d;
2\. Between the 5GMSd AF and the PCF (or the NEF):
\- using the Npcf_PolicyAuthorization procedure or Nnef_AFSessionWithQoS
procedure to request modification of the PDU session with the requested QoS
information.
\- using the Npcf_PolicyAuthorization notification service or Nnef Monitoring
Event procedure to receive QoS changes. The 5GMSd AF receives these policy
change notifications asynchronously.
Network Assistance is performed within dedicated NA sessions that are a part
of the Media Session Handler procedures. Only 5GMSd Clients that have been
granted an NA session by the 5GMSd AF may execute the NA bit rate
recommendation and boost request procedures. This enables the 5GMSd AF to
enforce policies that could include the access to NA by certain 5GMSd Clients
only, such that authorisation to use NA facilities can be verified once at the
granting of an NA session, and does not need to be verified for each NA
request from the 5GMSd Client.
The procedures for 5GMSd AF-based downlink Network Assistance are:
1\. NA session initiation. The 5GMSd Client requests to initiate an NA session
with the 5GMSd AF. If the request fulfils any pre-requisites for access to NA
functionality, for example policy and charging, then the 5GMSd AF responds
with a confirmation that the NA session has been established.
2\. NA throughput estimation. The 5GMSd Client requests a throughput
estimation for a downlink media session from the 5GMSd AF. A unique identifier
for the downlink media session is provided by the 5GMSd Client.
If the set of available bit rates in the downlink media session is provided
with the request then the 5GMSd AF responds with the recommended bit rate
based on its throughput estimation. If the throughput estimation is lower than
the lowest value from the set of available bit rates, then the actual
throughput estimation is provided.
If no set of available bit rates is provided with the request then the 5GMSd
AF responds with the throughput estimation.
3\. NA delivery boost. The 5GMSd Client requests from the AF a downlink
delivery boost. A unique identifier for the downlink media session is provided
by the 5GMSd Client.
4\. NA session termination. The 5GMSd Client requests to terminate an NA
session with the 5GMSd AF. The unique identifier of the NA session to be
terminated is provided by the 5GMSd Client.
The AF responds positively if the indicated session could be terminated, and
negatively otherwise.
### 5.9.3 ANBR-based downlink Network Assistance
This approach for the downlink Network Assistance feature is based upon the
exchange of the bit rate recommendation message and bit rate recommendation
query message between the RAN and UE as described in TS 38.321 [9]. In this
case the Network Assistance function in the 5GMSd Client utilises a UE-
internal facility to access the RAN modem driver to access ANBR signalling
operations and to receive corresponding responses from the network. Hence,
this control interface is outside the scope of the 5GMS architecture.
The RAN in this architecture contains control plane and user plane entities
that interact with peer control plane and user plane entities in the UE.
\- The control plane interactions involve the sending by the RAN of downlink
bit rate recommendations to the UE, which may occur either independently, or
in response to a boost request from the UE, via the exchange of the bit rate
recommendation message and bit rate recommendation query message between the
RAN and UE as described in TS 38.321 [9]. This control interface is outside
the scope of the 5GMS architecture.
\- The user plane interaction pertains to downlink streaming media transport
over interface M4d.
## 5.10 5GMS via eMBMS
### 5.10.1 General
This clause defines procedures for different use cases and scenarios when 5GMS
is using eMBMS for delivery as introduced in clause 4.6.
### 5.10.2 Procedures for 5GMS content delivered exclusively via eMBMS
In this case, 5GMS media data is exclusively delivered via eMBMS, i.e. media
content is not delivered via reference point M4d, but only via MBMS User
Services. The 5GMSd Client acts as an MBMS-Aware Application.
The call flow in Figure 5.10.2 1 extends the call flow defined in clause 5.3.2
to address the delivery of 5GMS media data exclusively via eMBMS. Aspects
specific to this use-case are indicated in bold.
Figure 5.10.2-1: High-level procedure for DASH content delivery via eMBMS
Prerequisites (step 0):
\- The 5GMSd Application Provider has provisioned the 5G Media Streaming
System, including content ingest **and the authorization to distribute 5GMS
content via eMBMS**.
\- **The 5GMS AF has informed the BM-SC about the availability of 5GMS
content** by provisioning an MBMS service **and has obtained relevant
information from the eMBMS Service Announcement (such as the MBMS service
identifier).**
\- The BM‑SC is ingesting content **from the 5GMS AS** , using either pull
mode or push mode.
\- The BM‑SC has broadcast the MBMS Service Announcement, **including an
indication that the content is 5GMS content**.
Steps:
1: The 5GMSd-Aware Application triggers the Service Announcement procedure and
the 5GMS Service and Content Discovery procedure at reference point M8.
2: A media content item is selected.
3: The 5GMSd-Aware Application triggers the 5GMSd Client to start media
playback. The Media Player Entry is provided to the 5GMSd Client.
4: If the 5GMS-Aware Application has received only a reference to the Service
Access Information (see step 1), the Media Session Handler interacts with the
5GMSd AF to acquire the whole Service Access Information. **This includes
relevant information from the eMBMS Service Announcement (such as the MBMS
service identifier) in order to bootstrap reception of the MBMS service.**
**5-11: The Media Session Handler acts as an MBMS-Aware Application and
initiates service acquisition. For details, see TS 26.347 [18]. This
establishes a transport session for the MPD and the Content.**
NOTE: The MPD and Initialization Segment(s) are forwarded by the MBMS Client
to the Media Server to enable their subsequent delivery to the Media Player
upon request.
12: The Media SessionHandler provides the MPD URL to the Media Player either
directly or through the 5GMSd-Aware Application.
13: The Media Player is invoked to start media access and playback.
14: The Media Player retrieves the Media Player Entry resource (an MPD) from
the proxy Media Server.
15: The Media Player processes the retrieved MPD. It determines, for example,
the number of transport sessions needed for media acquisition. The Media
Player should be able to use the MPD information to initialize the media
pipelines for each media stream (see step 18). When DRM is used (see step 17)
the MPD should also contain sufficient information to initialize the DRM
client.
16: The Media Player notifies the Media Session Handler about the start of a
new downlink media streaming session. The notification may include parameters
from the MPD.
17: Optional: The Media Player acquires any necessary DRM information, for
example a DRM License.
18: The Media Player configures the media playback pipeline.
19: The Media Player retrieves initialization segment(s) referenced by the
MPD.
**20-25: Content is delivered using DASH-over-MBMS. Session Announcement
updates are provided to the MBMS Client as necessary. MPD updates and Segments
are pushed to the media server. The Media Player retrieves media segments from
the proxy Media Server according to the MPD and forwards them to the
appropriate media rendering pipeline.**
### 5.10.3 5GMS Consumption Reporting procedures for eMBMS
In this case, 5GMS consumption reporting is used to report consumption of
5GMSd content via an eMBMS service.
NOTE: eMBMS consumption reporting is disabled in this case.
The call flow in Figure 5.10.3‑1 extends the call flow defined in clause 5.6.1
to address consumption reporting. Aspects specific to this use-case are
indicated in bold.
Figure 5.10.3-1: Consumption reporting for 5GMS via eMBMS
Prerequisites (step 0):
\- The 5GMSd Application Provider has provisioned the 5G Media Streaming
System, including content ingest, consumption reporting **and the permission
to distribute 5GMS content via eMBMS**.
\- The BM‑SC is ingesting content **from the 5GMS AS** , using either pull
mode or push mode.
\- eMBMS media delivery is established.
\- Consumption reporting is established.
Steps:
The user preferences relating to consumption reporting may be changed:
1: The 5GMSd-Aware Application selects/changes the user preferences.
2: The Media Player transmits consumption reporting user preferences to the
Media Session Handler.
The first phase is initialisation.
3: The 5GMSd-Aware Application is started.
4: A media content item is selected.
5: The 5GMSd-Aware Application triggers the Media Session Handler to start
content playback. The Media Player Entry is provided.
6: If the 5GMS-Aware Application has received only a reference to the Service
Access Information, the Media Session Handler interacts with the 5GMSd AF to
acquire the whole Service Access Information. **This includes a client
consumption reporting configuration** including parameters such as reporting
frequency.
**7: The MBMS service is initiated.**
8: The Media Session Handler triggers consumption reporting in the Media
Player.
9: The Media Session Handler starts the Media Player with the Media Player
Entry.
The second phase is media playback.
When media is playing, the consumption reporting parameters may be updated by
the 5GMSd AF.
10: The Media Session Handler acquires updated Service Access Information from
the 5GMSd AF including updated consumption reporting parameters.
When media is playing:
**11:** Media content is accessed through different networks, **possibly via
eMBMS** or unicast.
12: The Media Player transmits information about the media streaming resources
consumed to the Media Session Handler, **including the source of the media**.
13: The Media Session Handler regularly sends consumption report(s) to the
5GMSd AF, **including information about the delivery network from which the
media was acquired**.
**14: The Media Player provides an update to the Media Session Handler about
the consumed media streaming resources, for example a change in the delivery
network.**
The last phase is to stop the media:
15: The 5GMSd-Aware Application triggers the Media Session Handler to stop
content playback.
16: The Media Session Handler stops the Media Player.
17: The Media Session Handler stops consumption reporting in the Media Player.
18: The Media Session Handler may send final consumption report(s) to the
5GMSd AF.
### 5.10.4 5GMS Metrics Reporting procedures for eMBMS
In this case, 5GMS metrics reporting is used to report 5GMS and eMBMS metrics
to the 5GMSd AF.
NOTE: eMBMS metrics reporting is disabled in this case.
The call flow in Figure 5.10.4‑1 extends the call flow defined in clause 5.5.3
to address metrics reporting. Aspects specific to this use-case are indicated
in bold.
Figure 5.10.4-1: Metrics reporting for 5GMS via eMBMS
Prerequisites (step 0):
\- The 5GMSd Application Provider has provisioned the 5G Media Streaming
System, including content ingest, metrics reporting **and the permission to
distribute 5GMS content via eMBMS**.
\- The BM-SC is ingesting content **from the 5GMS AS** , using either pull
mode or push mode.
\- eMBMS media delivery is established.
\- Metrics reporting is established.
Steps:
The user preferences relating to metrics reporting may be changed:
1: The 5GMSd-Aware Application selects/changes the user preferences.
2: The Media Player transmits metrics reporting user preferences to the Media
Session Handler.
The first phase is initialisation.
3: The 5GMSd-Aware Application is started.
4: A media content item is selected.
5: The 5GMSd-Aware Application triggers the Media Session Handler to start
content playback. The Media Player Entry is provided.
6: If the 5GMS-Aware Application has received only a reference to the Service
Access Information, the Media Session Handler interacts with the 5GMSd AF to
acquire the whole Service Access Information. **This includes a client metrics
reporting configuration** including parameters such as reporting frequency.
**7: The MBMS service is initiated.**
8: The Media Session Handler **triggers metrics collection by the MBMS
Client** and by the Media Player.
9: The Media Session Handler starts the Media Player with the Media Player
Entry.
The second phase is media playback.
When media is playing, the metrics reporting parameters may be updated by the
5GMSd AF.
10: The Media Session Handler acquires updated Service Access Information from
the 5GMSd AF including updated metrics reporting parameters.
When media is playing:
**11:** Media content is accessed through different networks, **possibly via
eMBMS** or unicast.
**12: The Media Player provides DASH metrics to the Media Session Handler.**
**13: The MBMS Client provides MBMS metrics to the Media Session Handler using
MBMS-API-C.**
14: The Media Session Handler regularly sends metrics report(s) to the 5GMSd
AF, **including information about the delivery network from which the media
was acquired**.
The last phase is to stop the media:
15: The 5GMSd-Aware Application triggers the Media Session Handler to stop
content playback.
16: The Media Session Handler **stops metrics collection in the MBMS Client**
and the Media Player.
17: The Media Session Handler stops metrics reporting.
18: The Media Session Handler may send final metrics report(s) to the 5GMSd
AF.
### 5.10.5 Procedures for Hybrid Services: 5GMS content delivery via 5G System
and eMBMS
#### 5.10.5.1 General
Hybrid services refer to the case for which a basic service is available on
eMBMS and at the same time on unicast. The service on unicast may be richer
and extended and may provide additional user experiences. For the hybrid use
cases, the content is statically provisioned on different delivery networks.
Hybrid services predominantly refer to the case for which the delivery
manifest differentiates between resources accessible on unicast via M4d and
resources accessible through eMBMS, in this case through MBMS-API-U.
These resources are differentiated in the delivery manifest through different
DNs, for example different Base URLs in DASH MPDs, or in HLS by providing
different pathways. The 5GMS Client, in particular the Media Player in
collaboration with the Media Session Handler and the MBMS Client, dynamically
selects the delivery network from which to acquire media content according to
reception conditions, user preferences or other policies. Content is
provisioned such that the 5GMS Client is able to provide a seamless user
experience when switching between different delivery networks.
The call flow in Figures 5.10.5-1, 5.10.5 2 and 5.10.5 3 extends that defined
in clause 5.6.1 to address generic hybrid use cases. Specific additional use
cases are presented in the remainder of clause 5.10.5.
Figure 5.10.5-1: High-level procedure for hybrid delivery of DASH content
Steps:
1: The 5GMSd Application Provider triggers 5GMS provisioning and permits
hybrid distribution of the media content.
2: As a consequence, the 5GMSd AF provisions MBMS delivery. The MBMS Delivery
Session is set up.and the BM SC informs the 5GMS AF about the content ingest
endpoints.
3: The 5GMSd AS modifies the Media Player Entry (typically a media
presentation manifest) under the direction of the 5GMSd AF to indicate that
content is available either on a the MBMS Client\'s local Media Server or on
5GMSd AS.
4: The modified presentation manifest and the ingest endpoints are provided to
the 5GMSd Application Provider. The manifest may also be updated by the 5GMSd
Application Service Provider.
5: The media content is announced to the 5GMSd-Aware Application and the
application requests the entry points for the service.
6: The 5GMSd AS begins ingesting content from the 5GMSd Application Provider
and the BM SC may, in turn, begin ingesting this content from the 5GMSd AS.
**Figure 5.10.5-2: High-level procedure for hybrid delivery of DASH content
(continued)**
7: The BM SC starts one or more MBMS Delivery Sessions.
8: The media content is selected by the 5GMSd-Aware Application.
9: The application initiates the media streaming session through Media Session
Handler.
10: The Media Session Handler initiates the MBMS streaming services.
11: The media session handler through the information from the MBMS Client
informs the 5GMSd-Aware Application that the service is ready.
Figure 5.10.5-3: High-level procedure for hybrid delivery of DASH content
(continued)
12: The 5GMSd-Aware Application starts media playback.
13: The Media Player Entry (typically a media presentation manifest ) is
acquired by the Media Player. It may be available from the local Media Server
(populated by the MBMS Client) or from the 5GMSd AS, or even from both.
14: The Media Player processes the Media Player Entry and identifies that
content is available from different data networks (the local Media Server and
the 5GMSd AS).
15: Under the control of the 5GMSd-Aware Application, the Media Player selects
the content and different content options.
16: The Media Player continuously checks with the Media Session Handler \- and
possibly forwarded to the MBMS Client if the MBMS User Service data is
available - how to use the different content. This depends on the hybrid
scenario. Different policies may be considered.
17: The Media Player requests initialization information either from the local
Media Server or from the 5GMSd AS. The Media Player repeats this step for each
required initialization segment.
18: The Media Player receives the initialization information.
19: The Media Player requests media segments according to the Media Player
Entry, either from the local Media Server or from the 5GMSd AS.
20: The Media Player receives media segments and puts the information into the
appropriate media rendering pipeline.
Steps 13-20 are repeated according to the Media Player Entry information.
#### 5.10.5.2 Interactive service
In a specific hybrid scenario, an interactive service may be provided via 5GMS
while the main media content resources are delivered via eMBMS exclusively. In
this case, the following instantiations apply:
\- In step 2, the media presentation manifest (MPD) only points to content in
the local Media Server.
\- Step 13 as well as steps 17-20 are all terminated on the local Media
Server.
#### 5.10.5.3 Session continuity
In a specific hybrid scenario, the service is made available via both 5GMS and
eMBMS delivery networks, but only one Representation of each Adaptation Set is
provided via eMBMS. In this case, the following instantiations apply:
\- In step 2, one Representation of each Adaptation Set is distributed via
eMBMS.
\- As long as the streaming service is accessible over eMBMS, the Media Player
selects the media content in step 13 as well as steps 17-20 from the local
Media Server; content is not available from the 5GMSd AS.
\- If the streaming service becomes unavailable via eMBMS, the Media Player
switches to accessing the media content in step 13 as well as steps 17-20 from
the 5GMSd AS.
\- Once the streaming service becomes available again via eMBMS, the Media
Player switches back to accessing the media content in step 13 as well as
steps 17-20 from the local Media Server.
#### 5.10.5.4 Time-shifted viewing
In a specific hybrid scenario, the service is made available via both 5GMS and
eMBMS delivery networks, but only one Representation of each Adaptation Set is
provided via eMBMS. The content is retained by the 5GMS AS for a period of
time to support time shifted access. In this case, the following
instantiations apply:
\- In step 2, one Representation is of each Adaptation Set is distributed via
eMBMS.
\- If the streaming service is accessible via eMBMS and the user is consuming
content at the live edge, the Media Player selects the media content in the
step 13 as well as steps 17-20 from the local Media Server; content is not
available from the 5GMSd AS.
\- If the user switches to time-shift viewing mode or streaming service
becomes unavailable via eMBMS, the Media Player switches to accessing the
media content in the step 13 as well as steps 17-20 from the 5GMSd AS.
\- Once the streaming service becomes available again via eMBMS and the user
returns to the live edge, the Media Player switches back to accessing the
media content in the step 13 as well as steps 17-20 from the local Media
Server.
#### 5.10.5.5 Content or component replacement
In a specific hybrid scenario, the service is made available via both 5GMS and
eMBMS delivery networks, but only one Representation of selected Adaptation
Sets is provided via eMBMS. Some Adaptation Sets are only available via 5GMS.
In another case, two or more content alternatives may exist for a period of
time, but only one alternative is provided over eMBMS.
In this case, the following instantiations apply:
\- In step 2, the MPD is generated to define the different content
alternatives.
\- If the streaming service is accessible over eMBMS and the user watches
content available on broadcast, the Media Player selects the media content in
step 13 as well as steps 17-20 from the local Media Server; content is not
available from the 5GMSd AS.
\- If the user switches content or content components, the Media Player
switches to accessing the media content in the step 13 as well as steps 17-20
from the 5GMSd AS. If only a component is replaced, the Media Player accesses
media content from the local Media Server and the 5GMSd AS at the same time.
### 5.10.6 Procedures for dynamic provisioning of 5GMS content delivery via
eMBMS
#### 5.10.6.1 General
In this scenario the same content is distributed via eMBMS (for example using
a broadcast network in receive-only mode) and via a 5GMS System. The resources
of the broadcast system are statically configured. eMBMS-based distribution
may, for example, be used only for services in high demand, and the resources
and quality of the service distributed through broadcast may be adjusted
according to demand. Demand may be identified through 5GMS Consumption
Reporting.
The call flow in Figures 5.10.6 1 and 5.10.6 2 extends that defined in clause
5.6.1 to address generic use cases for broadcast-on-demand. Specific
additional use cases are presented in the remainder of clause 5.10.6.
Figure 5.10.6.1-1: High-level procedure for DASH content delivered via eMBMS
broadcast-on-demand
Steps:
1: The 5GMS Application Provider provisions one or more MBMS services and
permits broadcast distribution of the media content.
2: As a consequence, the 5GMSd AF provisions MBMS delivery and the BM SC
informs the 5GMS AF about the resources it will use to ingest media content.
NOTE: This step may happen later, up to (and possibly as part of) step 15, for
example only when demand is identified.
3: The media content is announced to the 5GMSd-Aware Application and the
application request the entry points for the service.
4: The 5GMSd AS starts to ingest content from the 5GMSd Application Provider.
5: Consumption Reporting is applied for the 5GMSd session.
Media playback initially uses unicast 5G Media Streaming:
6: The media content is selected by the 5GMSd-Aware Application.
7: The 5GMSd-Aware Application triggers the start of media playback by the
Media Player.
8: The media presentation manifest (e.g. DASH MPD) is requested by the Media
Player from the 5GMSd AS.
9: The Media Player processes the media presentation manifest and identifies
that the media content is available on the 5GMS AS
10: The Media Player, under the control of the application, selects the media
content and different content options.
11: Media content is received from the 5GMSd AS via reference point M4d.
12: The Media Player informs the Media Session Handler about the consumed
media content.
13: The Media Session Handler sends consumption reports to the 5GMSd AF.
Subsequently, media playback switches to eMBMS:
14: By analysing the consumption reports submitted to it in the previous step,
the 5GMSd AF identifies a high level of demand for the service.
15: Additional MBMS delivery sessions are provisioned to add delivery of the
service via eMBMS.
16: The BM SC starts ingesting media content from the 5GMSd AS.
17: MBMS delivery starts.
18: The 5GMSd AF informs the Media Session Handler that MBMS delivery is
initiated and provides the Service Success Information.
19: MBMS content reception is initiated by the Media Session Handler.
20: Once the service is ready, the content delivered on MBMS is used by the
Media Player. Consumption reporting continues. Specific cases may use
different policies, similar to the hybrid case in clause 5.10.5.
Figure 5.10.6.1-2: High-level procedure for DASH content delivered via eMBMS
broadcast-on-demand (continued)
#### 5.10.6.2 Operation modes
At least the following operation modes are supported based on the general
procedures in clause 5.10.6.1:
1\. Every 5GMS media service is mapped to exactly one MBMS User Service.
Whether the MBMS User Service is announced and delivered or not depends on
service demand. The MBMS Delivery Session is adjusted dynamically - for
example the Delivery Session is disabled, or the bit rate is changed \-
depending on service demand and/or content requirements.
2\. A set of MBMS User Services and MBMS Delivery Sessions is defined in the
initial provisioning. 5GMS media services are dynamically mapped to statically
configured MBMS User Services based on demand and content requirements.
3\. Components of the 5GMS User Service, for example audio service components
for different languages, are assigned dynamically to MBMS delivery depending
on demand.
### 5.10.7 Service URL handling procedures for 5GMSd via eMBMS in Receive-Only
Mode (ROM)
In an extension to the procedures provided in clauses 5.10.2 and 9.1, this
clause defines a call flow in order to initiate a 5GMSd streaming session
delivered via eMBMS without needing to contact the network, for example as
done in Receive-Only Mode (ROM).
The call flow in figure 5.13.2-1 extends those defined in clauses 5.10.2 and
9.1 to address 3GPP Service URL handling. Aspects specific to this use-case
are indicated in bold.
Figure 5.10.2-1: High-level procedure for DASH content delivery via eMBMS with
3GPP Service URL
Prerequisites (step 0):
\- The 5GMSd Application Provider has provisioned the 5GMSd System, including
content ingest and the authorization to distribute 5GMSd content via eMBMS.
\- The 5GMSd AF has informed the BM-SC about the availability of 5GMSd content
by provisioning an MBMS service and has obtained relevant information from the
eMBMS Service Announcement (such as the MBMS service identifier).
\- **Based on the information, the 5GMSd Application Provider has generated a
3GPP Service URL with sufficient information for the Media Session Handler and
MBMS Client to access the service.**
\- The BM‑SC is ingesting content from the 5GMSd AS.
\- The BM‑SC has broadcast the MBMS Service Announcement, including an
indication that the content is 5GMSd content.
Steps:
1: The 5GMSd-Aware Application triggers the Service Announcement procedure and
the 5GMS Service and Content Discovery procedure at reference point M8. **The
information returned to the 5GMSd-Aware Application includes a 3GPP Service
URL indicating a 5GMS-based service and also includes relevant information
from the eMBMS Service Announcement (such as the MBMS service identifier).**
2: A media content item is selected.
3: The 5GMSd-Aware Application triggers the 5GMSd Client to start media
playback**. The 3GPP Service URL describing the service is requested and the
Media Session Handler handles it.**
4: **The Media Session Handler uses the Service URL information to extract
relevant information from the eMBMS Service Announcement (such as the MBMS
service identifier) in order to bootstrap reception of the MBMS service.**
**5: The Media Session Handler provides the Service Access information to the
MBMS Client**.
Finally, the MBMS Service is launched as defined in steps 5--25 of clause
5.10.2.
## 5.11 Procedures for downlink media streaming data collection, reporting and
exposure
### 5.11.1 Configuration of 5GMSd AS data collection client for downlink media
streaming access reporting
The 5GMSd AS obtains its data collection client configuration at reference
point R4 as part of its initialisation procedure, as shown in figure 5.11.1‑1.
Figure 5.11.1‑1: Data collection client configuration\ for downlink media
streaming access reporting
The 5GMSd AS shall periodically refresh its data collection client
configuration and act appropriately on any changes in the configuration.
### 5.11.2 Downlink media streaming access activity reporting by 5GMSd AS
The 5GMSd AS shall use the procedure shown in figure 5.10.2‑1 to report
downlink media streaming access to the Data Collection AF instantiated in the
5GMSd AF when the data collection client configuration obtained using the
procedure in clause 5.10.1 indicates that it should do so.
Figure 5.10.2‑1: Downlink media streaming access reporting
The data report defined in clause 4.6.1 of TS 26.531 [22] shall be used by the
5GMSd AS to report the activity of downlink media streaming access by the
Media Player. Each downlink access logged by the 5GMSd AS in relation to such
activity shall be reported as a single record in a report submitted to the
Data Collection AF at reference point R4. The parameters included in the data
report are defined in clause 5.11.4. The frequency of reporting is defined in
clause 5.11.5.
### 5.11.3 Downlink media streaming access event exposure
Figure 5.11.3‑1: Downlink media streaming access event exposure
The 5GMS System shall follow the procedures for event reporting defined in
clause 4.15.1 of TS 23.502 [3]. In the context of downlink media streaming:
\- The role of _event provider NF_ (also referred to in [3] as _event provider
NF_ , _event provider_ , or _NF producer_) is performed by the 5GMSd AF and
its subordinate Data Collection AF or the NEF.
\- The role of _event consumer NF_ (also referred to in [3] as _consumer NF_ ,
_NF service consumer_ , or _NF consumer_) is performed by the NWDAF, the NEF
and/or the Event Consumer AF of the 5GMSd Application Provider.
When one of the abovementioned event consumer entities subscribes to event
reporting at the 5GMSd AF:
\- Event subscription parameters contained in _Event Reporting Information_
(such as maximum number of reports, maximum duration of reporting, sampling
ratio, partitioning criteria, etc. as defined in clause 4.15.1 of [3]) shall
be limited or superseded by similar or identical rules optionally set by a
5GMSd Application Provider in the Event Data Processing Configuration of the
5GMSd AF Provisioning Session, as defined in clause 5.3.1 of the present
document.
\- UE targeting rules contained in the _Target of Event Reporting_ (see clause
4.15.1 of [3]) shall be limited or superseded by similar or identical rules
optionally set by a 5GMSd Application Provider in Data Access Profiles in the
Event Data Processing Configuration of the 5GMSd AF Provisioning Session, as
defined in clause 5.3.1 of the present document.
### 5.11.4 Downlink media streaming access reporting parameters
Table 5.11.4‑1 below describes the parameters reported by the 5GMSd AS in
clause 5.11.2 for each downlink media streaming access.
Table 5.11.4-1: Downlink media streaming access reporting parameters
+--------------------------+-------------+--------------------------+ | Parameter | Cardinality | Description | +==========================+=============+==========================+ | Date-time | 1..1 | The date and time of | | | | access. | +--------------------------+-------------+--------------------------+ | UE identity | 1..1 | A unique identifier of | | | | the UE accessing the | | | | 5GMSd AS, such as the | | | | source IP address and | | | | port number of the Media | | | | Player. | +--------------------------+-------------+--------------------------+ | 5GMSd AS service | 1..1 | The service endpoint on | | endpoint | | the 5GMSd AS to which | | | | the Media Player is | | | | connected for this | | | | access, such as the | | | | server IP address and | | | | port number. | +--------------------------+-------------+--------------------------+ | Session identifier | 0..1 | An identifier for the | | | | HTTP session on which | | | | the Media Player request | | | | was made for this | | | | access. | +--------------------------+-------------+--------------------------+ | HTTP request method | 1..1 | The HTTP method used for | | | | this access. | +--------------------------+-------------+--------------------------+ | HTTP request URL | 1..1 | The URL requested by the | | | | Media Player for this | | | | access. | +--------------------------+-------------+--------------------------+ | HTTP request version | 1..1 | The HTTP version | | | | requested by the Media | | | | Player for this access. | +--------------------------+-------------+--------------------------+ | HTTP request range | 0..1 | The value of the Range | | | | HTTP request header, if | | | | present for this access. | +--------------------------+-------------+--------------------------+ | HTTP request size | 1..1 | The total number of | | | | bytes in the HTTP client | | | | request message from the | | | | Media Player for this | | | | access. | +--------------------------+-------------+--------------------------+ | HTTP User Agent | 0..1 | A string describing the | | | | Media Player that made | | | | this access. | +--------------------------+-------------+--------------------------+ | User identity | 0..1 | A string identifying the | | | | user that made the | | | | access. | +--------------------------+-------------+--------------------------+ | Referrer URL | 0..1 | The URL that the Media | | | | Player reports being | | | | referred from. | +--------------------------+-------------+--------------------------+ | Cache status | 0..1 | An indication of whether | | | | the 5GMSd AS is able to | | | | serve the requested URL | | | | from cache for this | | | | access (a hit) or | | | | whether there is a stale | | | | object cached (expired) | | | | or the requested URL is | | | | not present in cache | | | | (miss). | | | | | | | | For non-caching | | | | implementations of the | | | | 5GMSd AS, the status is | | | | miss for all accesses. | +--------------------------+-------------+--------------------------+ | HTTP response code | 1..1 | The HTTP response code | | | | issued by the 5GMSd AS | | | | for this access. | +--------------------------+-------------+--------------------------+ | HTTP response size | 1..1 | The total number of | | | | bytes returned by the | | | | 5GMSd AS in the HTTP | | | | response message for | | | | this access. | +--------------------------+-------------+--------------------------+ | HTTP response body size | 1..1 | The number of bytes | | | | returned by the 5GMSd AS | | | | in the HTTP response | | | | body for this access. | +--------------------------+-------------+--------------------------+ | HTTP response content | 0..1 | The MIME content type of | | type | | the HTTP response | | | | message returned by the | | | | 5GMSd AS for this | | | | access. | +--------------------------+-------------+--------------------------+ | Processing latency | 1..1 | The time taken by the | | | | 5GMSd AS to respond to | | | | the Media Player | | | | request, measured from | | | | the first byte of the | | | | HTTP request being | | | | processed by the | | | | 5GMSd AS to the last | | | | byte of the response | | | | being sent. | +--------------------------+-------------+--------------------------+ | Mean network round-trip | 1..1 | A rolling mean average | | time | | of the network | | | | round-trip time for the | | | | HTTP session on which | | | | the access was received. | +--------------------------+-------------+--------------------------+ | Network round-trip time | 1..1 | The variance in the | | variance | | average network | | | | round-trip time for the | | | | HTTP session on which | | | | the access was received. | +--------------------------+-------------+--------------------------+ | Transport congestion | 1..1 | The current size (in | | window size | | bytes) of the congestion | | | | window for the transport | | | | connection supporting | | | | the HTTP session on | | | | which the access was | | | | received. | +--------------------------+-------------+--------------------------+
### 5.11.5 Triggering downlink media streaming access reporting
Reports shall be sent by the 5GMSd AS to the Data Collection AS as indicated
in the data collection client configuration obtained using the procedure
defined in clause 5.11.1.
## 5.12 5GMS via MBS
### 5.12.1 General
This clause defines procedures for different use cases and scenarios when 5GMS
uses MBS for delivery as introduced in clause 4.9. In all scenarios, the 5GMSd
Client acts as an MBS-Aware Application.
The scenarios presented are not considered to be comprehensive and complete
for all possible functionalities. For example, while MBS defines its own
metrics reporting, the MBS client may also provide information to the Media
Session Handler that integrates relevant data in 5GMS metrics reporting. MBS
and 5GMS metrics reporting may run in parallel.
The MBSTF terminates the MBS Distribution Session and includes a proxy Media
Server that it is assumed can be accessed by the Media Player using common
methods, typically HTTP GET requests.
### 5.12.2 Procedures for 5GMS content delivered exclusively via MBS
In this scenario, 5GMS content is delivered exclusively via the MBS System,
i.e. content is not delivered via reference point M4d, but only via MBS User
Services. However, the MBSTF Client may perform unicast object repair
operations via reference point MBS-4-UC, if available.
The call flow in figure 5.12.2 1 extends that defined in clause 5.3.2 to
address the delivery of 5GMS content exclusively via MBS. Aspects specific to
this use-case are indicated in bold.
Figure 5.12.2-1: High-level procedure for DASH content delivery via MBS
Prerequisites (step 0):
\- The 5GMSd Application Provider has provisioned the 5G Media Streaming
System, including content ingest **and the authorization to distribute 5GMS
content via MBS**.
\- **The 5GMS AF has informed the MBSF about the availability of 5GMS
content** by provisioning an MBS service **and has obtained relevant
information from the MBS Service Announcement (such as the MBS service
identifier).**
\- The MBSTF is ingesting content **from the 5GMS AS** , using pull based
object acquisition.
\- The MBSTF distributes the MBS User Service Announcement via the MBS User
Service Announcement Channel at reference point MBS‑4‑MC, **possibly including
an indication that the content is 5GMS content**.
Steps:
1: The 5GMSd-Aware Application triggers the Service Announcement procedure and
the 5GMS Service and Content Discovery procedure at reference point M8.
2: A media content item is selected.
3: The 5GMSd-Aware Application triggers the 5GMSd Client to start media
playback. The Media Player Entry documents are provided to the 5GMSd Client.
4: If the 5GMS-Aware Application has received only a reference to the Service
Access Information (see step 1), the Media Session Handler interacts with the
5GMSd AF to acquire the whole Service Access Information. **This includes
relevant information from the MBS Service Announcement (such as the MBS
service identifier) in order to bootstrap reception of the MBS service.**
**5--11: The 5GMSd Client acts as an MBS-Aware Application and its Media
Session Handler initiates service acquisition per TS 26.502 [30]. This
establishes a transport session for the Media Player Entry and the Content.**
NOTE: The Media Player Entry and Initialization Segment(s) are made available
by the MBSTF Client\'s proxy Media Server for subsequent request by the Media
Player.
12: The Media Session Handler provides the Media Player Entry URL to the Media
Player either directly or through the 5GMSd-Aware Application.
13: The Media Player is invoked by the 5GMSd-Aware Application to start media
access and playback.
14: The Media Player retrieves the Media Player Entry resource (e.g. MPD) from
the proxy Media Server.
15: The Media Player processes the retrieved Media Player Entry. It
determines, for example, the number of transport sessions needed for media
acquisition. The Media Player should be able to use the Media Player Entry
information to initialize the media rendering pipeline(s) for each media
stream (see step 17).
16: The Media Player notifies the Media Session Handler about the start of a
new downlink media streaming session. The notification may include parameters
from the Media Player Entry.
17: The Media Player configures the media rendering pipeline(s).
18: The Media Player retrieves initialization segment(s) referenced by the
Media Player Entry.
**19-25: Content is delivered using Object Streaming (see clause 6.1 of TS
26.502 [30]). Session Announcement updates are provided to the MBS Client as
necessary. The MBSTF receives the MBS User Service Announcement via reference
point MBS‑4‑MC and hands it to the MBSF for processing. MPD updates and media
segments received from the MBSTF are made available by the MBSTF Client\'s
proxy Media Server. The Media Player retrieves media segments from the proxy
Media Server in the MBSTF Client according to the Media Player Entry** **and
forwards them to the appropriate media rendering pipeline.**
### 5.12.3 5GMS consumption reporting procedures for MBS
In this scenario, 5GMS consumption reporting is used to report consumption of
5GMSd content via an MBS service.
NOTE: MBS User Services Reception Reporting (see clause 4.2.5 of TS 26.502
[30]) may continue in parallel with 5GMS consumption reporting.
The call flow in figure 5.12.3‑1 extends the that defined in clause 5.6.1 to
address consumption reporting. Aspects specific to this use-case are indicated
in bold.
Figure 5.12.3-1: Consumption reporting for 5GMS via MBS
Prerequisites (step 0):
\- The 5GMSd Application Provider has provisioned the 5G Media Streaming
System, including content ingest, consumption reporting **and the permission
to distribute 5GMS content via MBS**.
\- The MBSTF is ingesting content **from the 5GMS AS** , using either pull
mode or push mode.
\- MBS media delivery is established.
\- Consumption reporting is established.
Steps:
The user preferences relating to consumption reporting may be changed:
1: The 5GMSd-Aware Application selects/changes the user preferences.
2: The Media Player transmits consumption reporting user preferences to the
Media Session Handler.
The first phase is initialisation.
3: The 5GMSd-Aware Application is started.
4: A media content item is selected.
5: The 5GMSd-Aware Application triggers the Media Session Handler to initiate
media session handling and content playback. The Media Player Entry is
provided.
6: If the 5GMS-Aware Application has received only a reference to the Service
Access Information, the Media Session Handler interacts with the 5GMSd AF to
acquire the whole Service Access Information. **This includes a client
consumption reporting configuration** including parameters such as reporting
frequency.
**7: The MBS service reception is initiated by the Media Session Handler.**
8: The Media Session Handler triggers consumption reporting in the Media
Player.
9: The Media Player is invoked by the 5GMSd-Aware Application to start media
access and playback.
The second phase is media playback.
When media is playing, the consumption reporting parameters may be updated by
the 5GMSd AF.
10: The Media Session Handler acquires updated Service Access Information from
the 5GMSd AF including updated consumption reporting parameters.
When media is playing:
**11:** Media content is accessed through different networks, **possibly via
MBS** or unicast.
12: The Media Player transmits information about the media streaming resources
consumed to the Media Session Handler, **including the source of the media**.
13: The Media Session Handler regularly sends consumption report(s) to the
5GMSd AF, **including information about the delivery network from which the
media was acquired**.
**14: The Media Player provides an update to the Media Session Handler about
the consumed media streaming resources, for example a change in the delivery
network.**
The last phase is to terminate the media streaming session:
15: The 5GMSd-Aware Application triggers the Media Session Handler to stop
content playback.
16: The Media Session Handler stops the Media Player.
17: The Media Session Handler stops consumption reporting in the Media Player.
18: The Media Session Handler may send final consumption report(s) to the
5GMSd AF.
### 5.12.4 5GMS content delivery via 5G System and MBS
#### 5.12.4.1 General
This clause addresses cases for which a 5GMS service is available on MBS and
at the same time on unicast. The service on unicast may be richer and extended
and may provide additional user experiences. It is assumed that the content is
statically provisioned on either MBS or on unicast.
Services addressed in this clause predominantly refer to the case for which
the delivery manifest differentiates between resources accessible via unicast
downlink media streaming at reference point M4d and resources accessible
through MBS, in this case through MBS-API-U.
These resources are differentiated in the delivery manifest through different
Data Networks, for example different Base URLs in DASH MPDs, or in HLS by
providing different pathways. The 5GMSd Client, in particular the Media Player
in collaboration with the Media Session Handler and the MBS Client,
dynamically selects the delivery network from which to acquire media content
according to reception conditions, user preferences or other policies. Content
is provisioned such that the 5GMSd Client is able to provide a seamless user
experience when switching between different delivery networks.
The call flow in figures 5.12.4-1, 5.12.4-2 and 5.12.4- 3 extends that defined
in clause 5.6.1 to address generic hybrid use cases. Specific additional use
cases are presented in the remainder of clause 5.12.4.
Figure 5.12.4-1: High-level procedure 5GMS content delivery via 5G System and
MBS
Steps:
1: The 5GMSd Application Provider triggers 5GMS provisioning and permits
concurrent 5GMS and MBS distribution of the media content.
2: As a consequence, the 5GMSd AF provisions MBS delivery. The MBS Delivery
Session is set up.and the MBSF informs the 5GMS AF about the content ingest
endpoints.
3: The 5GMSd AS modifies the Media Player Entry (typically a media
presentation manifest) under the direction of the 5GMSd AF to indicate that
content is available either on a the MBS Client\'s local Media Server or on
5GMSd AS.
4: The modified presentation manifest and the ingest endpoints are provided to
the 5GMSd Application Provider. The manifest may also be updated by the 5GMSd
Application Service Provider.
5: The media content is announced to the 5GMSd-Aware Application and the
application requests the entry points for the service.
6: The 5GMSd AS begins ingesting content from the 5GMSd Application Provider
and the MBSTF may, in turn, begin ingesting this content from the 5GMSd AS.
**Figure 5.12.4-2: High-level procedure** 5GMS content delivery via 5G System
and MBS **(continued)**
7: The MBSTF starts one or more MBS Delivery Sessions.
8: The media content is selected by the 5GMSd-Aware Application.
9: The application initiates the media streaming session through Media Session
Handler.
10: The Media Session Handler initiates the MBS streaming services.
11: The media session handler through the information from the MBS Client
informs the 5GMSd-Aware Application that the service is ready.
{width="5.197916666666667in" height="4.335416666666666in"}
Figure 5.12.4-3: High-level procedure for 5GMS content delivery via 5G System
and MBS (continued)
12: The 5GMSd-Aware Application starts media playback.
13: The Media Player Entry (typically a media presentation manifest) is
acquired by the Media Player. It may be available from the local Media Server
(populated by the MBS Client) or from the 5GMSd AS, or even from both.
14: The Media Player processes the Media Player Entry and identifies that
content is available from different data networks (the local Media Server and
the 5GMSd AS).
15: Under the control of the 5GMSd-Aware Application, the Media Player selects
the content and different content options.
16: The Media Player continuously checks with the Media Session Handler \- and
possibly forwarded to the MBS Client if the MBS User Service data is available
- how to use the different content. This depends on the hybrid scenario.
Different policies may be considered.
17: The Media Player requests initialization information either from the local
Media Server or from the 5GMSd AS. The Media Player repeats this step for each
required initialization segment.
18: The Media Player receives the initialization information.
19: The Media Player requests media segments according to the Media Player
Entry, either from the local Media Server or from the 5GMSd AS.
20: The Media Player receives media segments and puts the information into the
appropriate media rendering pipeline.
Steps 13-20 are repeated according to the Media Player Entry information.
#### 5.12.4.2 Interactive service
In a specific 5GMS content delivery via 5G System and MBS cenario, an
interactive service may be provided via 5GMS while the main media content
resources are delivered via MBS exclusively. In this case, the following
instantiations apply:
\- In step 2, the Media Entry Point document (e.g. MPD) only points to content
in the local proxy Media Server.
\- Step 13 as well as steps 17-20 are all terminated on the local proxy Media
Server.
#### 5.12.4.3 Session continuity
In a specific 5GMS content delivery via 5G System and MBS scenario, the
service is made available via both 5GMS and MBS delivery networks, but only
one Representation of each Adaptation Set is provided via MBS. In this case,
the following instantiations apply:
\- In step 2, one Representation of each Adaptation Set is distributed via
MBS.
\- As long as the streaming service is accessible over MBS, the Media Player
selects the media content in step 13 as well as steps 17--20 from the local
proxy Media Server; content is not available from the 5GMSd AS.
\- If the streaming service becomes unavailable via MBS, the Media Player
switches to accessing the media content in step 13 as well as steps 17--20
from the 5GMSd AS.
\- Once the streaming service becomes available again via MBS, the Media
Player switches back to accessing the media content in step 13 as well as
steps 17--20 from the local proxy Media Server.
#### 5.12.4.4 Time-shifted viewing
In a specific 5GMS content delivery via 5G System and MBS scenario, the
service is made available via both 5GMS and MBS delivery networks, but only
one Representation of each Adaptation Set is provided via MBS. The content is
retained by the 5GMSd AS for a period of time to support time shifted access.
In this case, the following instantiations apply:
\- In step 2, one Representation is of each Adaptation Set is distributed via
MBS.
\- If the streaming service is accessible via MBS and the user is consuming
content at the live edge, the Media Player selects the media content in the
step 13 as well as steps 17--20 from the local proxy Media Server; content is
not available from the 5GMSd AS.
\- If the user switches to time-shift viewing mode or streaming service
becomes unavailable via MBS, the Media Player switches to accessing the media
content in the step 13 as well as steps 17--20 from the 5GMSd AS.
\- Once the streaming service becomes available again via MBS and the user
returns to the live edge, the Media Player switches back to accessing the
media content in the step 13 as well as steps 17--20 from the local proxy
Media Server.
#### 5.12.4.5 Content or component replacement
In a specific 5GMS content delivery via 5G System and MBS scenario, the
service is made available via both 5GMS and MBS delivery networks, but only
one Representation of selected Adaptation Sets is provided via MBS. Some
Adaptation Sets are only available via 5GMS. In another case, two or more
content alternatives may exist for a period of time, but only one alternative
is provided over MBS.
In this case, the following instantiations apply:
\- In step 2, the MPD is generated to define the different content
alternatives.
\- If the streaming service is accessible over MBS and the user watches
content available on broadcast, the Media Player selects the media content in
step 13 as well as steps 17--20 from the local proxy Media Server; content is
not available from the 5GMSd AS.
\- If the user switches content or content components, the Media Player
switches to accessing the media content in the step 13 as well as steps 17--20
from the 5GMSd AS. If only a component is replaced, the Media Player accesses
media content from the local proxy Media Server and the 5GMSd AS at the same
time.
### 5.12.5 Procedures for dynamic provisioning of 5GMS content delivery via
MBS
#### 5.12.5.1 General
In this scenario the same content is distributed via MBS and via a 5GMS
System. The resources of the MBS System are statically configured. MBS-based
distribution may, for example, be used only for services in high demand, and
the resources and quality of the service distributed through broadcast may be
adjusted according to demand. Demand may be identified through 5GMS
Consumption Reporting.
The call flow in figures 5.12.5-1 and 5.12.5.-2 extends that defined in clause
5.12.1 to address generic use cases for MBS-on-demand. Specific additional use
cases are presented in the remainder of clause 5.12.5.
Figure 5.12.5.1-1: High-level procedure for DASH content delivered via MBS-on-
demand
Steps:
1: The 5GMS Application Provider provisions one or more 5GMSd services and
permits broadcast distribution of the media content.
2: As a consequence, the 5GMSd AF provisions MBS delivery and the MBSF informs
the 5GMSd AF about the resources it will use to ingest media content.
NOTE: This step may happen later, up to (and possibly as part of) step 15, for
example only when demand is identified.
3: The media content is announced to the 5GMSd-Aware Application and the
application request the entry points for the service.
4: The 5GMSd AS starts to ingest content from the 5GMSd Application Provider.
5: Consumption Reporting is applied for the downlink media streaming session.
Media playback initially uses unicast 5G Media Streaming:
6: The media content is selected by the 5GMSd-Aware Application.
7: The 5GMSd-Aware Application triggers the start of media playback by the
Media Player.
8: The Media Entry Point docuent (e.g. DASH MPD) is requested by the Media
Player from the 5GMSd AS.
9: The Media Player processes the media presentation manifest and identifies
that the media content is available on the 5GMSd AS
10: The Media Player, under the control of the application, selects the media
content and different content options.
11: Media content is received from the 5GMSd AS via reference point M4d.
12: The Media Player informs the Media Session Handler about the consumed
media content.
13: The Media Session Handler sends consumption reports to the 5GMSd AF.
Subsequently, media playback switches to MBS:
14: By analysing the consumption reports submitted to it in the previous step,
the 5GMSd AF identifies a high level of demand for the service.
15: Additional MBS Distribution Sessions are provisioned to add delivery of
the service via MBS.
16: The MBSTF starts ingesting media content from the 5GMSd AS.
17: MBS media distribution starts.
18: The 5GMSd AF informs the Media Session Handler that MBS media distribution
is initiated by providing updated Service Access Information.
19: MBS content reception is initiated by the Media Session Handler.
20: Once the service is ready, the content delivered on MBS is used by the
Media Player. Consumption reporting continues. Specific cases may use
different policies, similar to the hybrid case in clause 5.12.5.
Figure 5.12.5.1-2: High-level procedure for DASH content delivered via MBS-on-
demand (continued)
#### 5.12.5.2 Operation modes
At least the following operation modes are supported based on the general
procedures in clause 5.12.5.1:
1\. Every 5GMS media service is mapped to exactly one MBS User Service.
Whether the MBS User Service is announced and delivered or not depends on
service demand. The MBS Distribution Session is adjusted dynamically \-- for
example the MBS Distribution Session is disabled, or the bit rate is changed
-- depending on service demand and/or content requirements.
2\. A set of MBS User Services and MBS Distribution Sessions is defined in the
initial provisioning. Downlink media streaming components are dynamically
mapped to statically configured MBS Distribution Services based on demand and
content requirements.
3\. Components of the downlink media streaming session, for example audio
service components for different languages, are assigned dynamically to MBS
Distribution Sessions depending on demand.
# 6 Procedures for uplink Media Streaming
## 6.1 General
The procedures for uplink media streaming allow a 5GMSu Application Provider
to create, modify, establish and delete sessions. Uplink media streaming
sessions exist between a 5GMSu Client and a 5GMSu AS.
The uplink streaming procedures follow a general high-level workflow, starting
from provisioning to the actual uplink streaming sessions. The Egest Session
refers to the time period during which media content is uplink streamed to the
5GMSu AS and optionally egested from there to the 5GMS Application Provider.
The Provisioning Session refers to the time period during which the 5GMSu
Client is permitted to upload stream media content. Interactions between the
5GMSu AF and the 5GMSu Application Provider may occur at any time while the
Provisioning Session is active.
The 5GMSu Provisioning API allows the selection of Media Session Handling
(M5u) and Uplink Streaming (M4u) options, including whether the media content
is published to trusted 5GMSu ASs. The 5GMSu AF selects the M5u interface
according to the provisioning option. The Media Session Handling interface
exposed by the 5GMSu AF can be used for metrics reporting, requesting
different policy and charging treatments, or 5GMSu AF-based Network
Assistance.
When the 5GMSu AF and 5GMSu AS reside in the same DN, then the 5GMSu AF
selects the 5GMSu AS. Interactions between a 5GMSu AF and a 5GMSu AS (M3u
interactions) take place for Content Egest (M2u) and Uplink Streaming (M4u)
resource reservations. The 5GMSu AS allocates M2u and M4u resources and
communicates resource identifiers back to the 5GMSu AF. The 5GMSu AF provides
information about the provisioned resources (in the form of resource
identifiers) for Media Session Handling, Content Egest, and Uplink Streaming
to the 5GMSu Application Provider. The resource identifiers for Media Session
Handling and Uplink Streaming are needed by the 5GMSu Client to access the
selected features.
5GMSu Client can (in principle) start the uplink streaming by activating its
uplink streaming session. The uplink streaming session for a given UE (or for
each UE) is active from the time at which the 5GMSu-Aware Application
activates the transmission of an uplink streaming service until its
termination.
The 5GMSu-Aware Application receives application metadata from the 5GMSu
Application Provider before transmitting the uplink streaming media. The
application metadata contains Service Access Information, which acts as an
entry point for the 5GMSu Client to start the uplink streaming session. The
5GMSu Client may either receive the Service Access Information from the 5GMSu
Application Provider (using a not standardized interface) or instructions for
a remote control session through the 5GMS-Aware Application.
The Network Assistance (NA) feature enables a UE that is receiving an uplink
media stream to improve the QoE of the media streaming session, by being able
to make use of two distinct facilities.
The first facility is **bit rate recommendation** (**throughput estimation**).
This enables the UE to start an uplink streaming session at the most
appropriate bit rate for the network conditions at hand, or to obtain a
recommendation from the network which will remain valid until further notice
during a media streaming session. The recommended bit rate is based on network
estimations or predictions of available link bandwidth. This function is
provided as an additional tool to support the UE, in addition to the common
approach of the UE performing its own estimation based on measurement of the
uplink traffic in the past.
The second facility is the **delivery boost**. The 5GMSu Client uses this
function to indicate to the network that a temporary boost, i.e., a temporary
increase of network throughput for this client is needed, for example in order
to prevent the uplink media streaming buffer in the Media Streamer from
overflowing.
Network Assistance may be offered to the UE in one of two ways:
\- Based on interaction between the UE and the 5GMSu AF, with a subsequent
interaction between the 5GMSu AF and the PCF (or the NEF), as defined in
clause 6.5.
\- Based on interaction between the UE and the RAN, re-using the ANBR-based
RAN signalling as defined in clause 6.7.
The UE shall not use both approaches on the same Network Assistance session.
Figure 6.1-1 provides a basic high-level call flow for uplink streaming. The
corresponding collaboration scenario is defined in clause A.10.
Figure 6.1-1: High-level call flow for uplink media streaming
Steps:
1\. The 5GMSu Application Provider provisions the 5GMSu AF at reference point
M1u, including a Content Publishing Configuration for content egest and,
optionally, Content Preparation Templates.
2\. When Content Publishing is offered and selected, there may be interactions
between the 5GMSu AF and the 5GMSu AS at reference point M3u, e.g., to
configure Server Certificates and/or Content Preparation Templates and to
confirm the availability of resources for Content Preparation and Content
Egest by providing a Content Publishing Configuration (defined in clause
6.2.3). The 5GMSu AS provides resource identifiers for the allocated resources
to the 5GMSu AF, which then provides the information to the 5GMSu Application
Provider.
At some later point in time:
3\. The 5GMSu Application Provider provides Service Access Information to the
5GMS-Aware Application at reference point M8u.
4\. When the 5GMSu-Aware Application decides to activate an uplink media
streaming session, the Service Access Information is provided to the 5GMSu
Client.
5\. The 5GMSu Client requests the 5GMSu AF to initialise uplink media
streaming (M5u).
Alternatively:
6\. The 5GMS-Aware Application requests the 5GMSu Client to start an uplink
streaming session (M6u/M7u).
7\. The 5GMSu Client requests Service Access Information from the 5GSMu AF at
reference point M5u.
Then:
8\. The 5GMSu Client starts the Egest Session by activating the uplink
streaming session.
9\. Uplink media streaming starts from the 5GMSu Client to the 5GMSu AS via
reference point M4u.
10\. If content preparation was provisioned in step 1, the uplinked media may
be manipulated by the 5GMSu AS prior to egest.
11\. Media streaming egest starts from the 5GMSu AS to the 5GMSu Application
Provider at reference point M2u.
Clauses A.11 to A.15 define additional collaboration scenarios for uplink
streaming. The call flow for each collaboration scenario is also included in
each clause.
## 6.2 Preparing for uplink Media Streaming
### 6.2.1 Introduction
Before streaming media data in the uplink direction, a set of parameters are
provisioned at the 5GMSu AF/AS and at the 5GMSu Client. On the 5GMSu AF/AS,
the M1u API is used for session provisioning. On the UE side, the M8u or M5u
API is used for provisioning.
### 6.2.2 Provisioning session for uplink streaming
#### 6.2.2.1 Domain model
The M1u baseline domain model is depicted in figure 6.2.2.1-1 overleaf. It
consists of a Provisioning Session, which contains at least one of the
following:
\- A Content Publishing Configuration,
\- A Policy Template,
\- One or more Content Preparation Templates,
\- An _Edge Resources Configuration_ specifying the requirements for edge
processing as defined in TS 23.548 [15] and TS 23.558 [16] in support of the
Provisioning Session, including eligibility criteria that indicate the
circumstances in which edge computing is to be used for Media Streaming
sessions associated with this Provisioning Session and parameters indicating
the tolerance of the application for relocation of the Edge AS, or
Each Provisioning Session is uniquely identified within the 5GMS System by a
Provisioning Session identifier.
When a certain 5GMS feature (such as content publishing configuration, policy
template, content preparation template or edge resource configuration) is
selected, the 5GMSu AF compiles the resulting Service Access Information that
the 5GMSu Client needs to have to access the services via M5u.
Figure 6.2.2.1-1: M1u provisioning domain model
#### 6.2.2.2 Baseline provisioning procedure
This clause describes the baseline procedure to provision the features using
the 5GMS System.
NOTE 1: SLA negotiations between the 5GMSu Application Provider and the 5GMS
System provider are outside the scope of the present specification and are
included in the figure below for illustrative purposes only.
Figure 6.2.2.2-1: High-level procedure for provisioning the 5GMS System\ for
uplink media streaming sessions
Steps:
1\. The 5GMSu Application Provider authenticates itself with the system. This
procedure reuses existing authentication/authorization procedures, e.g., as
defined for CAPIF [13].
2\. The 5GMSu Application Provider creates a Provisioning Session, providing
its 5GMSu Application Provider identifier as input. 5GMSu Application Provider
queries the capabilities and authorized features.
3\. The 5GMSuApplication Provider specifies one or more 5GMSu features in the
Provisioning Session. A set of authorized features is activated, such as
content dynamic policy; network assistance; and content publishing (including
egest).
When the content publishing feature is offered and selected, the 5GMS
Application Provider provides a Content Publishing Configuration to configure
the content publishing behaviour of the 5GMSu AS (see next step), including
selecting the uplink ingest protocol and format, content preparation and egest
protocol and format.
When the dynamic policy feature is offered and selected, the 5GMSu Application
Provider specifies a set of policies which can be invoked for the uplink
streaming session. The UE becomes aware of the selected policies in the form
of a list of valid Policy Template Ids.
When the edge computing feature is offered and selected, the 5GMSu Application
Provider provides one or more Edge Resources Configurations that can be used
to support either client-driven management or Application Provider-driven
management of edge resources associated with the Provisioning Session.
4\. When content publication is desired, the 5GMSu AF interacts with the 5GMSu
AS at reference point M3u to configure any necessary Server Certificates
and/or Content Publishing Templates and to allocate resources for M2u egest
protocol and format by means of a Content Publishing Configuration. The 5GMSu
AS responds to the 5GMSu AF with the M2u content egest address.
5\. The 5GMSu AF compiles the Service Access Information. The Service Access
Information contains access details and options such as the Provisioning
Session identifier, M5u (Media Session Handling) addresses for uplink entry
point, dynamic policy, network assistance, etc.
6\. The 5GMSu AF provides the results to the 5GMSu Application Provider.
The following steps:
7\. When the 5GMSu Application Provider has selected full Service Access
Information, the results are provided in the form of addresses and
configurations for M2u (content egest), M5u (Media Session Handling) and M4u
(Media Uplink Streaming). The 5GMSu Application Provider provides a subset of
this information to the 5GMSu-Aware Application through M8u.
8\. When the 5GMSu-Aware Application decides to activate the streaming service
transmission, the Service Access Information is provided to the 5GMSu Client.
9\. The 5GMSu Client requests the 5GMSu AF to initialise uplink media
streaming (M5u), including reservation of any resources required for content
preparation.
Or, alternatively:
10\. The 5GMS-Aware Application requests the 5GMSu Client to start an uplink
streaming session (M6u/M7u).
11\. When the 5GMSu Application Provider has delegated Service Access
Information handling to the 5GMS System, a reference to the Service Access
Information (e.g. an URL) is provided. The Media Session Handler fetches the
full Service Access Information later from the 5GMSu AF.
Then:
12\. The 5GMSu Client streams the content to the 5GMSu AS.
13\. When content publishing is offered and has been selected in step 4, the
5GMSu Application Provider can start retrieving the content from the M2u egest
interface.
Optionally:
14\. The 5GMSu Application Provider may update the Provisioning Session.
According to schedule, or upon request by the 5GMSu-Aware Application:
15\. The 5GMSu Application Provider may manually terminate the Provisioning
Session (at any time). All associated resources are released. Content may be
removed from the 5GMSu AS. The 5GMSd Application Provider may configure a
schedule for Provisioning Session termination.
16\. The 5GMSu AF sends a notification to the 5GMSu Client upon Provisioning
Session termination.
The 5GMSu AF may request the creation or reuse of one or more network slices
for ingesting the content of the provisioned session. If more than one network
slice is provisioned for the ingest of the content of a session, the list of
allowed S‑NSSAIs shall be conveyed to the target UE (e.g. through URSP or
through M8u, step 7, or M5u, step 10).
NOTE 2: The 5GMSu AS receiving the content is only accessible through the
DNN(s) used by the network slice(s) provisioned for the distribution of that
content.
### 6.2.3 Content Publishing Configuration for uplink streaming
#### 6.2.3.1 General
The 5G Media Streaming architecture defines a reference point (M1u) for
provisioning which offers the procedures to configure content egest for uplink
media streaming over a 5GMS System. Once a Provisioning Session is established
using the API at reference point M1u, content publishing may be configured.
Content can then be uplink streamed by the Media Streamer in the 5GMSu Client
to the 5GMSu AS through reference point M4u. The uploaded (and possibly
processed) content is accessible via reference point M2u for egest.
Reference point M2u supports the egest of the following types of content:
\- Live streaming content.
\- On-demand streaming content. i.e. the content that previously streamed from
the UE to 5GMSu AS and is stored in 5GMSu AS.
\- Static files such as images, scene descriptions, etc. associated with the
uplink streaming content.
The 5GMSu AF provides an API at reference point M1u that allows a 5GMSu
Application Provider to create/update/delete a Content Publishing
Configuration. A Content Publishing Configuration contains all the parameters
for a particular content ingest uplink and egest setup, and optionally
references one or more Content Preparation Templates.
#### 6.2.3.2 Media egest procedure
The media egest procedure is as follows:
Figure 6.2.3-1: Media egest procedure
The steps are as follows:
1: _Initialization:_ the 5GMSu Application Provider discovers the M1u endpoint
address and authenticates itself with the 5GMSu AF.
2: _Create Content Publishing Configuration:_ the 5GMSu Application Provider
creates a new Content Publishing Configuration through the 5GMSu AF. The
configuration specifies path, protocol, entry point, the egest push/pull mode,
and possibly one or more content preparation templates. Upon successful
configuration, the 5GMSu AF responds with a Content Publishing Configuration
identifier, and the location of the 5GMSu AS from which to pull the content
(if using the pull mode).
3: _Provision 5GMSu AS instance(s):_ The 5GMSu AF configures the related 5GMSu
AS instance(s) for a particular Content Publishing Configuration via reference
point M3u. This step may involve instructing the 5GMSu AS to establish one or
more content preparation processes declared in Content Preparation Templates.
The 5GMSu AS(s) responds whether the configuration was successful or not.
4: _Confirm provisioning:_ Upon successful provisioning, the 5GMSu AF responds
with a Content Publishing Configuration identifier, and the location of the
5GMSu AS from which to pull the content (if using the pull mode).
One of the following steps:
5: _Provide the uplink entry point:_ The 5GMSu Application Provider publishes
the uplink entry point to the 5GMSu-Aware Application through reference point
M8u to enable it to begin uplink streaming to the 5GMSu AS.
or:
6: The 5GMSu Client acquires the uplink entry point as part of Service Access
Information through reference point M5u.
7: The 5GMSu-Aware Application requests the 5GMSu Client to start the uplink
streaming.
8: The 5GMSu Client starts uplink streaming of the content to the 5GMSu AS via
reference point M4u.
9: _Media egest:_ The 5GMSu Application Provider may start pulling or
receiving content (if using push mode) from the 5GMSu AS. The 5GMSu AS
performs the requested content preparation prior to making the uplink content
ready for being pulled by or pushed to the 5GMSu Application Provider.
NOTE: Pulling media content from the 5GMSu AS may be triggered by a request
from the 5MGSu Client through M8u.
The 5GMSu Application Provider may update a Content Publishing Configuration
subsequently to modify some of its parameters. The subset of parameters that
can be updated may be limited by the 5GMSu AF.
## 6.3 Establishment of an uplink Media Streaming session
The procedure allows a Media Streamer to establish an uplink streaming session
with a 5GMSu AS.
Figure 6.3-1: Uplink Streaming Session Establishment
Steps:
1: During provisioning, the Media Streamer component of the 5GMSu Client is
provisioned with basic information, such as the 5GMSu AF and 5GMSu AS
addresses.
2: The 5GMSu-Aware Application acquires Service Access Information via
reference point M8u or M5u according to the one of the procedures defined in
clause 6.2.2.2.
3: The 5GMSu-Aware Application instructs the 5GMSu Client to start uplink
media streaming according to one of the procedures defined in clause 6.2.2.2.
4: The 5GMSu Client establishes the uplink transport session.
5: The 5GMSu Client establishes the uplink media streaming session.
When client assistance is provisioned:
6: The 5GMSu Client establishes the assistance channel to the provisioned
5GMSu AF(s).
When server assistance is desired (e.g. for QoS or charging):
7: The 5GMSu AS establishes an assistance session with the 5GMSu AF.
8: The 5GMSu Client streams the content up to the 5GMSu AS.
## 6.4 Termination of an uplink Media Streaming session
The procedure defines the termination of an uplink media streaming session.
Figure 6.4-1: Uplink streaming session teardown
Steps:
1\. An uplink media streaming session is active and should be terminated.
2\. The 5GMSu-Aware Application sends a Stop command to the 5GMSu Client.
3\. The 5GMSu Client stops the capturing process.
4\. The uplink transport session is released.
When client assistance was established:
5\. The 5GMSu AF is notified that the uplink media streaming session is
terminated.
When server assistance was established:
6\. The 5GMSu AS is notified the 5GMSu AF that the uplink media streaming
session is terminated.
## 6.5 Providing 5GMSu AF-based Network Assistance
The procedure a 5GMSu Client uses to obtain network assistance from a 5GMSu AF
is defined in figure 6.5‑1 below.
Figure 6.5-1: Providing 5GMSu AF-based Network Assistance
Steps:
1: An uplink streaming session is active. A Network Assistance Session is
established with the 5GMSu AF.
2: The Media Session Handler in the 5GMSu Client requests assistance
information from the 5GMSu AF.
2a: The 5GMSu AF interacts with the PCF (or, if the AF is deployed outside the
Trusted DN, with the PCF via the NEF) to obtain the requested assistance
information.
3: The assistance information is returned to the Media Session Handler in the
5GMSu Client.
4: The Media Streamer in the 5GMSu Client takes an appropriate action based on
the information received.
## 6.6 Providing Remote Control
The procedure defines the remote control from a Remote Controller through the
5GMSu-Aware Application.
NOTE: The remote controller may be a network-based function or a UE-based
function.
Figure 6.6-1: High-level procedure for remote control of a 5GMS uplink
streaming session
Steps:
1\. The 5GMSu Application Provider creates a Provisioning Session at reference
point M1u, providing its 5GMSu Application Provider identifier as input. 5GMSu
Application Provider queries the capabilities and authorized features.
2\. The 5GMSu Application Provider requests Content Publish Configuration
provisioning at reference point M1u.
3\. The 5GMSu AF interacts with the 5GMSu AS at reference point M3u to
allocate resources for the M2u egest protocol and format. Then the 5GMSu AS
responds with the M2u address.
4\. The 5GMSu AF compiles the Service Access Information. The Service Access
Information contains access details and options such as the Provisioning
Session identifier, and M5u (Media Session Handling) address for an uplink
entry point.
5\. The 5GMSu AF provides the results of the provisioning request (step 1) to
the 5GMSu Application Provider via reference point M1u.
a. When the 5GMSu Application Provider has selected full-Service Access
Information, the results are provided in the form of addresses and
configurations for M2u (egest), M5u (Media Session Handling), M4u (Media
Uplink Streaming).
b. When the 5GMSu Application Provider has delegated the Service Access
Information handling to the 5GMS System, then a reference to the Service
Access Information (e.g. an URL) is provided. The Media Session Handler
fetches the full-Service Access Information later from the 5GMSu AF.
6\. The 5GMSu-Aware Application, the 5GMSu Application Provider and the third
party Remote Controller negotiate the communication protocol and the command
dictionary for remote control, and reach an agreement (if any).
7\. The 5GMSu Application Provider announces the uplink streaming service to
the 5GMSu-Aware Application at reference point M8u (during the lifetime of the
Provisioning Session).
8\. The 5GMSu Application Provider sends the remote control information to the
Remote Controller.
9\. The Remote Controller sends a remote control command to the 5GMSu-Aware
Application using the protocol negotiated in step 6.
10\. Based on the received the remote control command, the 5GMSu-Aware
Application sends a corresponding request to the 5GMSu Client.
11\. The 5GMSu Client takes the required action based on the received request.
12\. The 5GMSu Client acknowledges execution of the received request to the
5GMSu-Aware Application, including the results (if any).
13\. The 5GMSu-Aware Application acknowledges execution of the remote control
command to the Remote Controller, including the results (if any).
## 6.7 RAN Signalling based Support for Uplink Network Assistance
Figure 6.7-1 depicts an uplink streaming architecture where RAN signalling is
employed to support uplink Network Assistance functionality.
The RAN in the architecture contains control plane and user plane entities
that interact with peer control and user plane entities in the UE, in the
request/response for boost of the uplink streaming data rate, and subsequent
media transport. The user plane functionality as shown in Figure 6.7-1 (solid
line going from UE to RAN to 5GMSu AS) illustrates the scheduling/passthrough
functionality associated with user plane communications, governed by the RAN,
as result of the uplink assistance messaging over the control plane (shown by
dotted line between the UE and RAN). It is assumed in this case that 5GMSu AF-
based Network Assistance is not utilized.
It should be noted that although the 5GMSu AF is not utilized when RAN
signalling based network assistance is performed, it is assumed that there is
a higher level network entity which coordinates and tracks network assistance
performed using RAN signalling versus application signalling for individual
UEs.
Figure 6.7-1: RAN Signalling based Uplink Network Assistance
## 6.8 Procedures for uplink media streaming data collection, reporting and
exposure
### 6.8.1 Configuration of 5GMSu AS data collection client for uplink media
streaming access reporting
The 5GMSu AS obtains its data collection client configuration at reference
point R4 as part of its initialisation procedure, as shown in figure 6.8.1‑1.
Figure 6.8.1‑1: Data collection client configuration\ for uplink media
streaming access reporting
The 5GMSu AS shall periodically refresh its data collection client
configuration and act appropriately on any changes in the configuration.
### 6.8.2 Uplink media streaming access reporting by 5GMSu AS
The 5GMSu AS shall use the procedure shown in figure 6.8.2‑1 to report uplink
media streaming access to the Data Collection AF instantiated in the 5GMSu AF
when the data collection client configuration obtained using the procedure in
clause 6.8.1 indicates that it should do so.
Figure 6.8.2‑1: Uplink media streaming access reporting
The data report defined in clause 4.6.1 of TS 26.531 [22] shall be used by the
5GMSu AS to report the activity of uplink media streaming access by the Media
Streamer. Each uplink access logged by the 5GMSu AS in relation to such
activity shall be reported as a single record in a report submitted to the
Data Collection AF at reference point R4. The parameters included in the data
report are defined in clause 6.8.4. The frequency of reporting is defined in
clause 6.8.5.
### 6.8.3 Uplink media streaming access event exposure
Figure 6.8.3‑1: Uplink media streaming access event exposure
The 5GMS System shall follow the procedures for event reporting defined in
clause 4.15.1 of TS 23.502 [3]. In the context of uplink media streaming:
\- The role of _event provider NF_ (also referred to in [3] as _event provider
NF_ , _event provider_ , or _NF producer_) is performed by the 5GMSu AF and
its subordinate Data Collection AF.
\- The role of _event consumer NF_ (also referred to in [3] as _consumer NF_ ,
_NF service consumer_ , or _NF consumer_) is performed by the NWDAF, the NEF
and/or the Event Consumer AF of the 5GMSd Application Provider.
When one of the abovementioned event consumer entities subscribes to event
reporting at the 5GMSu AF:
\- Event subscription parameters contained in _Event Reporting Information_
(such as maximum number of reports, maximum duration of reporting, sampling
ratio, partitioning criteria, etc. as defined in clause 4.15.1 of [3]) shall
be limited or superseded by similar or identical rules optionally set by a
5GMSu Application Provider in the Event Data Processing Configuration of the
5GMSu AF Provisioning Session, as defined in clause 5.3.1 of the present
document.
\- UE targeting rules contained in the _Target of Event Reporting_ (see clause
4.15.1 of [3]) shall be limited or superseded by similar or identical rules
optionally set by a 5GMSd Application Provider in Data Access Profiles in the
Event Data Processing Configuration of the 5GMSd AF Provisioning Session, as
defined in clause 5.3.1 of the present document.
### 6.8.4 Uplink media streaming access reporting parameters
Table 6.8.4‑1 below describes the parameters reported by the 5GMSu AS in
clause 6.8.2 for each downlink media streaming access.
Table 6.8.4-1: Uplink media streaming access reporting parameters
Parameter Cardinality Description
* * *
Date-time 1..1 The date and time of access. UE identity 1..1 A unique
identifier of the UE accessing the 5GMSu AS, such as the source IP address and
port number of the Media Streamer. 5GMSu AS service endpoint 1..1 The service
endpoint on the 5GMSu AS to which the Media Streamer is connected for this
access, such as the server IP address and port number. Session identifier 0..1
An identifier for the HTTP session on which the Media Streamer request was
made for this access. HTTP request method 1..1 The HTTP method used for this
access. HTTP request URL 1..1 The URL requested by the Media Streamer for this
access. HTTP request version 1..1 The HTTP version requested by the Media
Streamer for this access. HTTP request range 0..1 The value of the Range HTTP
request header, if present for this access. HTTP request size 1..1 The total
number of bytes in the HTTP client request message from the Media Streamer for
this access. HTTP request body size 1..1 The number of bytes supplied by the
Media Streamer in the HTTP request body for this access. HTTP request content
type 0..1 The MIME content type of the HTTP request message supplied by the
Media Streamer for this access. HTTP User Agent 0..1 A string describing the
Media Streamer that made this access. User identity 0..1 A string identifying
the user that made the access. Referrer URL 0..1 The URL that the Media
Streamer reports being referred from. HTTP response code 1..1 The HTTP
response code issued by the 5GMSu AS for this access. HTTP response size 1..1
The total number of bytes returned by the 5GMSu AS in the HTTP response
message for this access. HTTP response body size 1..1 The number of bytes
returned by the 5GMSu AS in the HTTP response body for this access. HTTP
response content type 0..1 The MIME content type of the HTTP response message
returned by the 5GMSu AS for this access. Processing latency 1..1 The time
taken by the 5GMSu AS to respond to the Media Streamer request, measured from
the first byte of the HTTP request being processed by the 5GMSu AS to the last
byte of the response being sent. Mean network round-trip time 1..1 A rolling
mean average of the network round-trip time for the HTTP session on which the
access was received. Network round-trip time variance 1..1 The variance in the
average network round-trip time for the HTTP session on which the access was
received. Transport congestion window size 1..1 The current size (in bytes) of
the congestion window for the transport connection supporting the HTTP session
on which the access was received.
### 6.8.5 Triggering uplink media streaming access reporting
Reports shall be sent by the 5GMSu AS to the Data Collection AF as indicated
in the data collection client configuration obtained using the procedure
defined in clause 6.8.1.
## 6.9 Dynamic Policy selection for uplink media streaming based on Service
Operation Point signalling
This clause provides an extension to the general call flow in clause 6.2.3 in
order to address the usage of Service Descriptions to select a Dynamic Policy
in uplink 5G Media Streaming services that supports the requirements of an
abstract Service Operation Point. Details are shown in figure 6.9‑1.
Figure 6.9-1: High-level procedure for uplink media streaming\ with Service
Operation Point handling
Steps:
1\. Policy Templates are provisioned in the 5GMSd AF and various
configurations are performed.
2\. Either the 5GMSu-Aware Application acquires Service Access Information
from the 5GMSu Application Provider via reference point M8u, or else Service
Access Information is acquired by the 5GMSu Client from the 5GMSu AF via
reference point M5u (as defined in steps 7--11 of figure 6.2.2.2-1).
3\. The 5GMSu Client acquires the Media Entry Point from the 5GMSu AS.
4\. The 5GMSu Client processes the Media Entry Point to discover the set of
available Service Descriptions, each one identified by a different _External
reference_.
5\. The 5GMSu Client notifies the 5GMSu Application about the available
Service Descriptions.
6\. The 5GMSu Application selects a Service Description and notifies the 5GMSu
Client by supplying its _External reference_.
7\. The 5GMSu Client selects a Dynamic Policy with a matching _External
reference_.
8\. The 5GMSu Client configures its capture and encoding according to the
selected Service Description.
9\. A transport session is established by the 5GMSu Client for uplink media
streaming.
10\. Media is streamed to the 5GMSu AS via the uplink.
# 7 5GMS network media processing
## 7.1 General
A 5GMS Application Provider may request media processing to be performed on
its media data. This can be instantiated as part of the Uplink or Downlink
streaming.
The media processing is performed according to one or more Content Preparation
Templates by a set of 5GMS AS instances, which may need to build complex media
processing workflows. The 5GMS AF coordinates the media processing and ensures
that the appropriate QoS and traffic handling for the session are provided.
## 7.2 Media processing procedures for downlink media streaming
As part of setting up a Content Hosting Configuration for downlink media
streaming, a 5GMSd Application Provider may request custom processing to be
performed.
The following processing operations may be available:
\- Adaptive Bit Rate (ABR) Encoding, Encryption and Encapsulation.
\- MPD (e.g., MPD) Generator and Segment (e.g., DASH) Packager.
\- Content Replacement (e.g., Ad insertion, blackouts, regional content):
\- MPD (e.g., MPD) modification.
\- App Server: other content enrichment functions such as Closed Caption
insertion, object detection, content filtering, etc.
The procedures are as follows:
Figure 7.2-1: Media processing procedures for downlink media streaming
The steps are as follows:
1\. Upon setting up a Content Hosting Configuration, the 5GMSd Application
Provider requests media processing to be set up. The 5GMSd Application
Provider provides a description of the type and placement of the processing.
The 5GMS System may only allow a shortlisted set of media processing functions
to be used by the 5GMSd Application Provider.
2\. The 5GMSd AF provisions via reference point M3d a selected set of 5GMSd AS
instance(s) to fulfil the requested media processing in the appropriate
placement by means of one or more Content Preparation Templates references by
a Content Hosting Configuration. Depending on the configuration, one or
multiple AS instance(s) may be involved. The Content Hosting Configuration may
also reference Server Certificates configured at reference point M3d.
3\. The 5GMSd AS instance(s) confirm successful provisioning to the 5GMSd AF.
4\. The 5GMSd AF confirms the successful creation of the Content Hosting
Configuration with the requested media processing to the external Media
application server.
5\. A 5GMSd Client sends a request for media content to one of the 5GMSd AS
instance(s) listed in the provisioned Content Hosting Configuration (see
clause 5.4).
6\. If it does not already have a copy of the requested media cached, the
5GMSd AS fetches the media from the 5GMSd Application Provider.
7\. The 5GMSd AS processes the ingested media based on the media processing
workflow configured by the Content Preparation Template(s) provisioned in step
2.
8\. The 5GMSd AS serves the requested media to the 5GMSd Client after
successful media processing.
Different variants of these procedures may be possible, depending on the type
of processing, the placement of the processing, and the characteristics of the
Content Hosting Configuration.
## 7.3 Media processing procedures for uplink media streaming
The 5GMSu AF instructs the 5GMSu AS to perform processing of the media
according to the provided media processing document.
The procedure is defined as follows:
Figure 7.3-1: Media pocessing pProcedures for uplink media streaming
The steps are as follows:
1\. _Setup of uplink streaming configuration_ : The 5GMSu Application Provider
sends a request to start an uplink session to the 5GMSu AF. The request
contains a description of the media processing that is to be performed by the
5GMSu AS in the form of one or more Content Preparation Templates referenced
by a Content Publishing Configuration. Depending on the configuration one
5GMSu AS may be involved.
2\. _Provision 5GMSu AS_ : The 5GMSu AF parses the media processing
description and provisions the 5GMSu AS that will perform the requested
processing via reference point M3u. If the requested processing is not
accepted, the session creation fails.
3\. _5GMSu AS ready_ : The 5GMSu AS confirms the correct configuration and
informs the 5GMSu AF that it is ready to receive and process media as
requested.
4\. _Confirm uplink streaming configuration_ : The 5GMSu AF confirms the
successful creation of the uplink streaming configuration to the 5GMSu
Application Provider.
5\. _Uplink streaming session starts_ : the session is triggered in the 5GMSu
Client.
6\. _Uplink media streaming_ : Media content is streamed from the 5GMSu Client
to the 5GMSu AS.
7\. The 5GMSu AS process(es) the received media based on the provisioned media
processing workflow configured in step 2.
# 8 Procedures for 5GMS Edge Processing
## 8.1 Procedure for client-driven management of 5GMS Edge Processing
Figure 8.1-1 outlines a detailed call flow for client-driven session
establishment.
Figure 8.1-1: Client-driven session establishment
The **Edge Computing Provisioning** phase is a provisioning phase, that may be
repeated several times (e.g. to extend edge processing coverage to new
geographical areas or to increase the capacity of an already provisioned
area). All steps in this phase are optional and performed on need basis. The
steps are:
1\. **Spawn ECS:** In this step, a new ECS is instantiated to manage new or
increased demand for edge processing.
2\. **Spawn 5GMS AF:** In this step, a new 5GMS AF that is edge-enabled is
instantiated to handle new or increased demand for media sessions with edge
processing.
3\. **EES Configuration:** The EES is configured for a specific Edge Data
Network.
4\. **EES Registration with ECS:** The EES registers with the ECS that is in
authority over the target EDN.
The **5GMS Application Provider Provisioning** phase is performed prior to the
establishment of any related media streaming sessions by the 5GMS Application
Provider. Subsequent updates to the provisioning session are possible.
5\. **Create Provisioning Session:** In this step, the 5GMS Application
Provider creates a new provisioning session.
6\. **Provision 5GMS features:** In this step, the 5GMS Application Provider
may create different configurations such as Content Hosting, Reporting, Edge
Processing, etc.
The 5GMS-Aware Application initiates a new media streaming session:
7\. **Application Initialization:** The user launches the 5GMS-Aware
Application. The application performs any required initialization steps.
8\. **Start session:** The 5GMS-Aware Application invokes the Media Streamer
with appropriate streaming access parameters.
9\. **Session starting event:** The application informs the Media Session
Handler about the start of a new 5GMS session.
10\. **Retrieve Service Access Information:** The Media Session Handler
retrieves Service Access Information from the 5GMS AF appropriate to the 5GMS
session.
11\. **Determine eligibility for requesting edge resources:** Using
information from the Service Access Information, the Media Session Handler
determines whether the media streaming session is eligible for requesting edge
resources.
If the eligibility criteria are met in the previous step, the UE discovers an
EAS instance offering 5GMS AS functionality in the **Client-based Edge
Computing Discovery** phase:
12\. **Locate candidate\"5GMS AS\" EAS instances:** The Media Session Handler
(potentially triggered by a request from the 5GMS-Aware Application) asks its
embedded EEC to discover the location of one or more suitable EAS instances
offering the \"5GMS AS\" capability that are able to serve the application.
13\. **Locate local EES:** The EEC queries the ECS for a suitable EES.
14\. **Register with EES:** The EEC registers with the selected EES.
15\. **Request list of \"5GMS AS\" EAS instances:** The EEC contacts the EES
to query for one or more EAS instances offering the \"5GMS AS\" capability
that can serve the session, using EAS discovery filters (see Table 8.5.4.2-2
in [16]) obtained as a part of the Service Access Information and/or provided
by the Application Client, e.g. \"5GMS AS\" for EAS type, appropriate values
for service feature(s), and other EAS characteristics.
The optional sub-flow is for provisioning an additional 5GMS AS instance if a
suitable EAS instance offering the \"5GMS AS\" capability cannot be located.
The steps are:
16\. **Check resource template:** The 5GMS AF checks the provisioned edge
processing resource template for the related application to determine the edge
resource requirements of the application.
17\. **Instantiate new EAS/5MGS AS:** The 5GMS AF requests the MnS to
instantiate a new \"5GMS AS\" EAS instance using the specified requirements in
the provisioned edge processing resource template and parameters provided in
the query by the EEC.
18\. **Spawn 5GMS AS instance:** The MnS creates a new instance of the EAS
offering **\"** 5GMS AS**\"** capability with the requested placement and
resources.
19\. **EAS configuration:** The newly instantiated **\"** 5GMS AS**\"** EAS
instance is configured, after which it _is discoverable through DNS procedures
or the discovery procedures as defined in TS 23.558 [16]_.
20\. **Register EAS with EES:** The newly instantiated EAS instance registers
itself with the triggering EES.
21\. **Configure provisioned features:** This may include configuring and
launching the server-side application in the 5GMS AS.
Completion of Client-based Edge Computing Discovery phase:
22\. **List of suitable \"5GMS AS\" EAS instances:** The EES/5GMS AF responds
to the EEC with a list of \"5GMS AS\" EAS instances and their characteristics
in an EAS discovery response (see Table 8.5.3.3-1 in [16]). Every EAS instance
in the list satisfies the requirements defined in the provisioned edge
processing resource template.
23\. **Select preferred \"5GMS AS\" EAS instance:** The AC and/or EEC/Media
Session Handler select(s) a \"5GMS AS\" EAS instance from the provided list,
based on the AC\'s desired criteria.
In the case where the media entry point provided in the Service Access
Information includes a host name, the EEC/Media Session Handler inserts a
record into the UE\'s local DNS resolver that resolves this host name to the
IP address of the chosen EAS instance.
After the successful discovery of a \"5GMS AS\" EAS instance, the actual
streaming session may start:
24\. **Media transfer:** The 5GMS-Aware Application connects to the selected
EAS \"5GMS AS\" and the streaming starts.
In the case where the media entry point provided in the Service Access
Information includes a host name, before connecting, the Media Stream Handler
first resolves this to the IP address of the EAS instance selected in step 23.
25\. **Method calls and notifications:** Supporting information about the 5GMS
session is passed from the Media Stream Handler to the Media Session Handler.
26\. **Reporting, network assistance, and dynamic policy:** The Media Session
Handler exchanges supporting information about the 5GMS session with the 5GMS
AF.
27\. **End session:** the 5GMS-Aware Application informs the Media Session
Handler that the 5GMS session has ended.
28\. **Session ending event:** The Media Streamer informs the Media Session
Handler about the end of the 5GMS session.
29\. **Final reporting:** The Media Session Handler performs any final
reporting to the 5GMS AF.
## 8.2 Procedure for AF-driven management of 5GMS Edge Processing
Figure 8.2-1 outlines a detailed call flow for the AF-driven management of
edge processing. In clause 8.1, the optional provisioning of an additional
5GMS AS instance occurs in response to an explicit call from the Application
Client to an on-board EEC, whereas in this procedure the provisioning of an
additional 5GMS AS instance is initiated by the 5GMS AF. This occurs, if
needed, as part of and in response to Application Provider provisioning, and
subsequently when needed to support the dynamically changing demands of
eligible media streaming sessions. The 5GMS AS instance may also be
reprovisioned at any time during the lifetime of the 5GMS Provisioning Session
in response to changing demand levels (not illustrated for brevity).
Figure 8.3.2-1: AF-driven management of 5GMS edge processing
The **Edge Computing Provisioning** phase is a provisioning phase, that may be
repeated several times (e.g. to extend edge processing coverage to new
geographical areas or to increase the capacity of an already provisioned
area). All steps in this phase are optional and performed on need basis. Steps
1-4 are identical to those described in clause 8.1 above.
The **5GMS Application Provider Provisioning** phase is performed prior to the
establishment of any related media streaming sessions by the 5GMS Application
Provider. Subsequent updates to the provisioning session are possible. Steps
5-6 are identical to those described in clause 8.1 above.
The optional sub-flow to provision an additional 5GMS AS instance may be
repeated multiple times on need basis to add new capacity, to increase
existing capacity for edge processing or to reallocate underused edge
processing resources to other tasks. The edge processing capacity is tailored
for the specific 5GMS Application Provider based on the information in the
Provisioning Session. Steps 7-12 are identical to steps 16-21 described in
clause 8.1 above with the following exception:
\- In step 7, based on the eligibility criteria in the edge resource template,
the 5GMS AF shall determine whether the media streaming session is eligible to
use edge resources.
After successful discovery, the actual streaming session may start in the 5GMS
Session phase. Steps 13-15 are identical to steps 8-10 described in clause 8.1
above, and steps 16-21 are identical to steps 24-29.
NOTE: In this call flow, the Application Client (AC) and EEC are not used to
discover the 5GMS AS location. Instead, a Media Player Entry may be provided
to the Media Session Handler by the 5GMS AF in the Service Access Information
at M5 (step 15), or otherwise the location of the 5GMS AS is provided directly
to the 5GMS-Aware Application via (out of scope) interface M8.
# 9 Procedures for Service URL handling
## 9.1 Baseline procedure
The launch of a 5GMS session using a 3GPP Service URL (see clause 4.10) is
shown in figure 9.1-1. In this procedure, the Application is not assumed to be
a 5GMS-Aware Application.
Figure 9.1-1 Baseline procedure for 3GPP Service URL Handling
The call flow is as follows:
1\. The 5GMS Application Provider provisions media streaming services at
reference point M1 and provides one or more _External service identifiers_ to
the 5GMS AF as part of the Provisioning Session.
2\. The 5GMS Application Provider generates a unique 3GPP Service URL that
includes one of the provisioned _External service identifiers_. Additional
service announcement parameters, including a Media Entry Point URL, may also
be embedded in this 3GPP Service URL.
3\. The Application discovers the set of currently available media services at
reference point M8.
4\. The user selects a media service in the Application that is offered as a
3GPP Service URL.
5\. The Application requests the 3GPP Service URL corresponding to the media
service. If the Media Session Handler is available, it handles and resolves
the URL.
NOTE: If the Media Session Handler is not available, the 3GPP Service URL
request may be handled by the 5GMS AF as a fallback. In this case, the 5GMS AF
may provide a Media Entry Point corresponding the 3GPP Service URL or reject
the request.
6\. The Media Session Handler may collect additional service parameters from
the 5GMS AF. In particular, Service Access Information may be retrieved from
the 5GMS AF using the _External service identifier_ extracted from the 3GPP
Service URL to identify the Provisioning Session of interest.
7\. If the 3GPP Service URL requested in step 4 contains an embedded Media
Entry Point URL, or if a Media Entry Point URL was obtained in step 5 or 6 the
Media Session Handler launches the Media Stream Handler.
Alternatively, the Application may launch the Media Stream Handler directly
itself using any Media Entry Point it obtained in preceding steps that is
supported by the 5GMS Client.
8\. Inter-Process Communication is established between the Media Stream
Handler and the Media Session Handler.
9\. Media streaming occurs between the Media Player, 5GMS AS and the 5GMS
Application Provider.
###### ## Annex A (informative): Usage Guidelines for collaboration scenarios
# A.0 General
This annex describes a set of collaboration scenarios and deployment options
of the 5G Media Streaming architecture. The intention is to illustate
different deployment options.
Note that the scenarios focus on the ownership of the functions. Scalability
realizations such as a CDN are not illustrated. As result of the scalability
considerations, the M4-serving 5GMS AS and/or M5-serving 5GMS AF:
\- May consist of multiple (physical) servers, which may be addressed using a
single FQDN. A load balancer forwards client requests to one of these servers.
Forwarding may be via HTTP redirects or transparent towards the client.
\- May consist of multiple (physical) servers, where different servers, or
different groups of servers, may be addressed with different FQDNs. The client
may be made aware of this via the manifest (i.e. listing multiple base URLs).
NOTE: In this case the servers may be managed by the same or different parties
(e.g. MNO and/or 5GMS Application Provider).
\- May be addressed with a single FQDN. For example, the MNO AS is mostly
transparent and acts as a proxy/cache.
NOTE: In every collaboration scenario of this Annex, any step which differs
from the baseline call flow is shown in **bold text**.
# A.1 Downlink media streaming with AS deployed in an external Data Network
(OTT)
The collaboration scenario shown in figure A.1-1 represents a typical OTT
collaboration scenario, where only the 5GMSd AS is deployed and which resides
in an external Data Network. In this collaboration scenario, neither the 5GMSd
AF nor the Media Session Handler function of the 5GMSd Client is
present/necessary for downlink media streaming operation. All Service
Announcement Information is delivered at reference point M8d from the 5GMSd
Application Provider to the 5GMSd-Aware Application. The latter then passes
the Service Acess Information contained in the service announcement to the
Media Player to enable downstream media streaming session establishment and
media transfer. In addition, M8d is used for UE application-level data
reporting from the 5GMSd Aware Application to the 5GMSd Application Provider.
The Provisioning API (M1d′) and Ingest API (M2d′) may follow 5GMS
specifications.
Figure A.1-1: Downlink media streaming with AF and AS in an external Data
Network
The interfaces M1d′ and M2d′ may be similar to interfaces M1d and M2d
respectively. Interface M4d follows 3GPP specifications.
NOTE: Although a single logical 5GMSd AS exposes both the M2d′ (Ingest) and
M4d (Downlink Streaming) interfaces, these APIs may, in a real deployment, be
implemented on different physical servers (with different FQDNs). Furthermore,
a large number of serving nodes, each with its own FQDN may offer the M4d
service, following CDN scaling principles.
# A.2 Downlink media streaming with both AF and AS deployed in the trusted
Data Network
This collaboration scenario shown in figure A.2-1 represents a MNO CDN
scenario, where the CDN is used for ingest and delivery of the content. In
this collaboration scenario, similar to that in clause A.1, the Media Session
Handler is not present/necessary for downlink media streaming operation since
all Service Access Information is delivered at reference point M8d from the
5GMSd Application Provider to the 5GMSd-Aware Application, and in turn the
Service Access Information is passed to the Media Player. Similarly, M8d is
used for UE application-level data reporting from the 5GMSd-Aware Application
to the 5GMSd Application Provider. The 5GMSd AF is present in this scenario to
obtain Service Access Information from the 5GMSd Application Provider (at
M1d), and in turn, passes that information to the 5GMSd AS.
Figure A.2-1: Downlink media streaming with AF and AS in the trusted Data
Network
# A.3 Downlink media streaming with both AF and AS deployed in an external
Data Network (OTT)
The collaboration scenario shown in figure A.3-1 represents a typical OTT
collaboration scenario, where the 5GMSd AF and 5GMSd AS are deployed in an
external Data Network. The 5GMSd AF interacts with the NEF via N33. The
Provisioning API (M1d′) and Ingest API (M2d′) may follow 5GMS specifications.
Figure A.3-1: Downlink media streaming with AF and AS in an external Data
Network (OTT)
NOTE 1: The M5d API may be exposed using a different FQDN than the M1d′ API
exposing function.
NOTE 2: The M5d API may be exposed using several FQDNs, e.g. for different M5d
assistance services.
# A.4 Downlink media streaming with AF deployed in the trusted Data Network
and AS deployed in an external Data Network
This collaboration scenario shown in figure A.4-1 depicts a content hosting
function in the external Data Network, e.g. using a third-party CDN in
collaboration with MNO offered assistance and network services. The
Provisioning API (M1d′) and Ingest API (M2d′) may follow 5GMS specifications.
Figure A.4-1: Downlink media streaming with AF in the trusted Data Network and
AS in external Data Network
Interfaces M1d′ and M2d′ may be similar to interfaces M1d and M2d
respectively. Interface M4d follows 5GMS specifications.
# A.5 Downlink media streaming with AS deployed in an external Data Network,
provisioned by AF deployed in the trusted Data Network
The collaboration scenario shown in figure A.5-1 is similar to that depicted
in clause A.4 with the difference that the external content hosting function
(5GMSd AS) is provisioned from a 5GMSd AF which is located in a trusted Data
Network. It is expected that a 5GMSd AF and 5GMSd AS from different providers
are interconnected using an M3d interface. The Ingest API (M2d′) may follow
5GMS specifications.
Figure A.5-1: Downlink media streaming with AS in external Data Network,
provisioned by AF in the trusted Data Network
Interface M2d′ may be similar to interface M2d. All other interfaces depicted
follow 3GPP specifications.
# A.6 Downlink media streaming with AS deployed in the trusted Data Network,
provisioned by AF deployed in an external Data Network
The collaboration scenario shown in figure A.6-1 is similar to those depicted
in clauses A.4 and A.5 with the difference that the trusted content hosting
function (5GMSd AS) is provisioned from an external 5GMSd AF. It is expected
that a 5GMSd AF and 5GMSd AS from different providers are interconnected using
an M3d interface. The Provisioning API (M1d′) may follow 5GMS specifications.
Interactions between the externally-deployed 5GMSd AF and the PCF are proxied
via the NEF at reference point N33.
Figure A.6-1: Downlink media streaming with AS in the trusted Data Network,
provisioned by AF in external Data Network
The interface at reference point M1d′ may be similar to that defined at
reference point M1d. All other interfaces depicted follow 3GPP specifications.
# A.7 Downlink media streaming with both AF and AS deployed in the trusted
Data Network and AF interaction with PCF
The collaboration scenario shown in figure A.7-1 represents a MNO CDN scenario
(similar to that in clause A.2) where the CDN is used for ingest and delivery
of the content. Additional 5GMS features are used which require interaction
with the PCF.
Figure A.7-1: Downlink media streaming with AF and AS in the trusted Data
Network
# A.8 Downlink media streaming with AFs deployed in two separate trusted Data
Networks sharing AS in an external Data Network
The collaboration scenario shown in figure A.8-1 represents a multi-MNO
distribution scenario where an external CDN (5GMSd AS) is used to deliver
content through multiple 5GMSd capable PLMNs. Additional 5GMSd features are
used from the serving 5GMS System which need interactions with the PCF of the
serving PLMN. The Provisioning API (M1d′) and Ingest API (M2d′) may follow
5GMS specifications.
Figure A.8-1: Downlink media streaming with AFs in two trusted Data Networks
sharing AS in external Data Network
# A.9 Downlink media streaming with both AF and AS deployed in external Data
Network and AS delivering content through two trusted Data Networks (OTT)
This collaboration scenario shown in figure A.9-1 represents a multi-MNO
distribution scenario where an external CDN (5GMSd AS) is used to deliver
content through multiple 5GMSd-capable PLMNs. Additional 5GMSd features are
used from the serving 5GMSd system which need interactions with the NEF of the
serving PLMN. The Provisioning API (M1d′) and Ingest API (M2d′) may follow
5GMS specifications.
Figure A.9-1: Downlink media streaming with AF and AS in external Data Network
delivering through two trusted Data Networks (OTT)
# A.10 Uplink media streaming using content preparation with both AF and AS
deployed in the trusted Data Network
In this collaboration scenario shown in figure A.10-1, both the 5GMSu AS and
5GMSu reside in the trusted Data Network. Additionally, reference point M2u is
used for content egest to the external 5GMSu Application Provider.
Figure A.10-1: Uplink media streaming with AF and AS in trusted Data Network
Figure A.10‑2 provides a high-level call flow for this collaboration scenario.
Figure A.10-2: Call flow for uplink media streaming using content preparation
with AF and AS in trusted Data Network
Steps:
1\. The 5GMSu Application Provider creates a Provisioning Session with the
5GMSu AF.
**2\. The 5GMSu Application Provider requests the 5GMSu AF to create one
Content Publishing Configuration that defines the instructions for content
egest (M1u).**
**3\. The 5GMSu AF, based on the received Content Publishing Configuration,
requests the 5GMSu AS to confirm the availability of content resources for
content preparation (M3u).**
**4\. The 5GMSu AF acknowledges the successful creation of the Content
Publishing Configuration to the 5GMSu Application Provider (M1u).**
At some later point in time:
5\. The 5GMSu Application Provider provides Service Access Information to the
5GMS-Aware Application at reference point M8u.
6\. The 5GMS-Aware Application requests the 5GMSu Client to start an uplink
streaming session (M6u/M7u).
**7\. The 5GMSu Client requests that the 5GMSu AF initialises uplink media
streaming, including any content preparation required by the Content
Publishing Configuration (M5u).**
Alternatively:
8\. The 5GMS-Aware Application requests the 5GMSu Client to start an uplink
streaming session (M6u/M7u).
9\. The 5GMSu Client requests Service Access Information from the 5GSMu AF at
reference point M5u.
As a consequence:
**10\. The 5GMSd AF requests initialisation of the content preparation process
by the 5GMSd AS (M3u).**
**11\. The 5GMSd AS initialises the content preparation process, if it is not
already running.**
**12\. The 5GMSd AF acknowledges the initialisation of the content preparation
process (M3u).**
Then:
13\. The 5GMSu Client performs media session handling for the uplink streaming
session (M5u).
14\. Uplink media streaming starts from the 5GMSu Client to the 5GMSu AS
(M4u).
**15\. If content preparation was successfully initialized at step 11 or
before, the uplinked media may be manipulated by the 5GMSu AS prior to
egest.**
16\. Media streaming egest starts from the 5GMSu AS to the 5GMSu Application
Provider (M2u).
Finally:
**17\. The 5GMSu AS releases its resources after observing a period of
interactivity.**
NOTE: This step is implementation dependent.
# A.11 Uplink media streaming using content preparation (media plane only)
with both AF and AS deployed in the trusted Data Network
This scenario pertains to a collaboration in the uplink media plane only for
which the 5GMSu AS is deployed in the trusted Data Network. Here, the 5GMS
System is assumed to offer uplink streaming capabilities as a service to an
external 5GMSu Application Provider. This collaboration scenario is analogous
to the scenario in clause A.2 in terms of the use of M8u (as opposed to M8d in
clause A.2) for the delivery of Service Access Information from the 5GMSu
Application Provider to the 5GMSu Client via the 5GMSu Aware Application, and
the reporting of UE application data from the 5GMSu-Aware Application to the
5GMSu Application Provider.
NOTE: Although provisioning at reference point M1u is shown between the
(external) 5GMSu Application Provider and the 5GMSu AF, due to the absence of
reference point M5u in this collaboration, there is no control interaction
between the 5GMSu Client and the 5GMS System during an uplink streaming
session.
Figure A.11-1: Uplink media streaming (media plane only) with AF and AS in the
trusted Data Network
Figure A.11‑2 provides a high-level call flow for this collaboration scenario.
> Figure A.11-2: Uplink media streaming using content preparation (media plane
> only) with AF and AS in the trusted Data Network
Steps:
1\. The 5GMSu Application Provider creates a Provisioning Session for uplink
streaming with the 5GMSu AF.
**2\. The 5GMSu Application Provider creates a Content Publishing
Configuration as part of the Provisioning Session that defines the
instructions for content egest (M1u).**
**3\. The 5GMSu AF, based on the received Content Publishing Configuration,
requests the 5GMSu AS to instantiate the content preparation process (M3u).**
**4\. The 5GMSu AS initialises the content preparation process.**
**5\. The 5GMSu AS acknowledges the initialisation of the required process
(M3u).**
**6\. The 5GMSu AF acknowledges the successful creation of the Content
Publishing Configuration to the 5GMSu Application Provider (M1u).**
At some later point in time:
7\. The 5GMSu Application Provider optionally provides Service Access
Information to the 5GMS-Aware Application (M8).
8\. The 5GMS-Aware Application requests the 5GMSu Client to start an uplink
streaming session (M6u/M7u).
9\. Uplink media streaming starts from the 5GMSu Client to the 5GMSu AS (M4u).
**10\. If content preparation was initialized in step 4, the uplinked media
may be manipulated by the 5GMSu AS prior to egest.**
11\. Media streaming egest starts from the 5GMSu AS to the 5GMSu Application
Provider (M2u).
Finally:
**12\. The 5GMSu AS releases its resources after observing a period of
inactivity.**
NOTE: This step is implementation-dependent.
# A.12 Uplink media streaming using content preparation (media plane only)
with provisioning and AS in the external domain
This scenario pertains to a media plane only collaboration for which the 5GMSu
AS is deployed in the external domain and the 5GMSu AF is not involved.
Specifically, reference points M1′ and/or M2u′ do not follow 3GPP
specifications. This collaboration scenario is analogous to the scenario in
A.1 in that neither the 5GMSu AF nor the Media Session Handler function of the
5GMSu Client is present/necessary for uplink media streaming operation.
Similar to the collaboration scenario in A.11, M8u is used for the delivery of
Service Access Information from the 5GMSu Application Provider to the 5GMSu
Client via the 5GMSu Aware Application, and the reporting of UE application
data from the 5GMSu Aware Application to the 5GMSu Application Provider. The
Provisioning API (M1u′) and Ingest API (M2u′) may follow 5GMS specifications.
Figure A.12-1: Uplink media streaming (media plane only) with provisioning and
AS in the external domain
Figure A.12‑2 provides a high-level call flow for this collaboration scenario.
Figure A.12-2: Call flow for Uplink media streaming using content preparation
(media plane only) with provisioning and AS in the external domain
Steps:
1\. The 5GMSu Application Provider creates a Provisioning Session for uplink
streaming with the 5GMSu AF (M1u′).
**2\. The Provisioning function requests the 5GMSu AS to initialise the
required content preparation process (M3u′).**
**3\. The 5GMSu AS initialises the content preparation process.**
**4\. The 5GMSu AS acknowledges the initialisation of the required process
(M3u′).**
5\. The Provisioning function acknowledges the successful creation of the
Provisioning Session to the 5GMSu Application Provider (M1u′).
At some later point in time:
6\. The 5GMSu Application Provider provides Service Access Information to the
5GMS-Aware Application (M8).
7\. The 5GMS-Aware Application requests the 5GMSu Client to start an uplink
streaming session (M6u/M7u).
8\. Uplink media streaming starts from the 5GMSu Client to the 5GMSu AS (M4u).
**9\. If content preparation was initialized in step 3, the uplinked media may
be manipulated by the 5GMSu AS prior to egest.**
10\. Media streaming egest starts from the 5GMSu AS to the 5GMSu Application
Provider (M2u).
Finally:
**11\. The 5GMSu AS releases its resources after observing a period of
inactivity.**
NOTE: This step is implementation-dependent.
# A.13 Uplink media streaming using content preparation with AF in the trusted
Data Network and AS in the external domain
In this collaboration scenario, both the 5GMSu AS and 5GMSu AF are present.
The 5GMSu AS resides in the external domain. While it employs 5GMS protocol
and format for uplink media reception from the 5GMSu Client (M4u), norit
performs content egest to the 5GMSu Application Provider over a M2u-like
(M2u') protocol and format (and therefore it is called 5GMSu-like AS). The
5GMSu AF is used to interact with the 5GMSu Application Provider at the
reference point M1 for uplink media streaming provisioning System, and to
interact with the Media Session Handler of the 5GMSu Client for providing
Service Access Information, dynamic policy invocation and/or other uplink
media streaming related functionality such as metrics reporting and network
assistance). The Provisioning API (M1u′) and Ingest API (M2u′) may follow 5GMS
specifications.
Figure A.13-1: Uplink media streaming AF in the trusted Data Network and AS in
the external domain
Figure A.13‑2 provides a high-level call flow for this collaboration scenario.
Figure A.13-2: Call flow for uplink media streaming using content preparation
with AF in the trusted Data Network and AS in the external domain
Steps:
1\. The 5GMSu Application Provider creates a Provisioning Session with its
internal Provisioning function (M1u′).
**2\. The Provisioning function requests the 5GMSu-like AS to initialise the
required content preparation process instantiation (M3u′).**
**3\. The 5GMSu-like AS instantiates the content preparation process.**
**4\. The 5GMSu-like AS acknowledges the Provisioning the instantiation of
required process (M3u′).**
5\. The Provisioning function acknowledges successful provisioning to the
5GMSu Application Provider (M1u′).
6\. The 5GMSu Application Provider creates a Provisioning Session for uplink
streaming with the 5GMSu AF.
At some later point in time:
7\. The 5GMSu Application Provider provides Service Access Information to the
5GMS-Aware Application at reference point M8u.
8\. The 5GMS-Aware Application requests the 5GMSu Client to start an uplink
streaming session (M6u/M7u).
**9\. The 5GMSu Client requests that the 5GMSu AF initialises uplink media
streaming (M5u).**
NOTE: This step is redundant in this collaboration, but occurs in order that
other collaborations are supported.
Alternatively:
10\. The 5GMS-Aware Application requests the 5GMSu Client to start an uplink
streaming session (M6u/M7u).
11\. The 5GMSu Client requests Service Access Information from the 5GSMu AF at
reference point M5u.
At some later point in time:
12\. Uplink media streaming starts from the 5GMSu Client to the 5GMSu-like AS
(M4u′).
**13\. If content preparation was initialized in step 3, the uplinked media
may be manipulated by the 5GMSu AS prior to egest.**
14\. Media streaming egest starts from the 5GMSu-like AS to the 5GMSu
Application Provider (M2u′).
Finally:
**15\. The 5GMSu AS releases its resources after observing a period of
inactivity.**
NOTE: This step is implementation dependent.
# A.14 Uplink media streaming using content preparation with AF and AS in the
external domain
In this collaboration scenario, both the 5GMSu AS and 5GMSu AF are present and
follow 3GPP specifications. Both the 5GMSu AS and 5GMSu AF reside in the
external DN/domain. The Provisioning API (M1u′) and Ingest API (M2u′) may
follow 5GMS specifications.
Figure A.13-1: Uplink media streaming with AF and AS in the external domain
Figure A.14‑2 provides a high-level call flow for this collaboration scenario.
Figure A.14-2: Call flow for uplink media streaming using content preparation
with AF and AS in the external domain
Steps:
1\. The 5GMSu Application Provider creates a Provisioning Session for uplink
streaming with the 5GMSu AF (M1u′).
**2\. The 5GMSu Application Provider creates a Content Publishing
Configuration as part of the Provisioning Session that defines the
instructions for content egest (M1u′).**
**3\. The 5GMSu AF, based on the received publishing configuration, requests
the 5GMSu AS to confirm the availability of content resources for egest
(M3u).**
**4\. The 5GMSu AF acknowledges the successful creation of the Content
Publishing Configuration to the 5GMSu Application Provider (M1u′).**
At some later point in time:
**5\. The 5GMSu Application Provider requests that the 5GMSu AF initialises
the content preparation process (M1u′).**
**6\. The 5GMSd AF requests initialisation of the content preparation process
(M3u).**
**7\. The 5GMSd AS initialises the content preparation process, if is not
already running (M3u).**
**8\. The 5GMSd AS acknowledges the initialisation of the content preparation
process (M3u).**
**9\. The 5GMSu AF acknowledges the initialisation of the cotent preparation
process (M1u′).**
10\. The 5GMSu Application Provider provides Service Access Information to the
5GMS-Aware Application (M8).
11\. The 5GMS-Aware Application requests the 5GMSu Client to start an uplink
streaming session (M6u/M7u).
**12\. The 5GMSu Client requests that the 5GMSu AF initialises uplink media
streaming (M5u).**
NOTE: This step is redundant in this collaboration, but occurs in order that
other collaborations are supported.
Alternatively:
13\. The 5GMS-Aware Application requests the 5GMSu Client to start an uplink
streaming session (M6u/M7u).
14\. The 5GMSu Client requests Service Access Information from the 5GSMu AF
(M5u).
**15\. The 5GMSd AF requests initialisation of the content preparation process
(M3u).**
**16\. The 5GMSd AS initialises the content preparation process, if is not
already running (M3u).**
**17\. The 5GMSd AF acknowledges the initialisation of the content preparation
process (M3u).**
18\. The 5GMSMu AF provides Service Access Information to the 5GMSu Client
(M5u).
Then:
19\. Uplink media streaming starts from the 5GMSu Client to the 5GMSu AS via
reference point M4u.
**20\. If content preparation was initialized in step 7 or 16, the uplinked
media may be manipulated by the 5GMSu AS prior to egest.**
21\. Media streaming egest starts from the 5GMSu AS to the 5GMSu Application
Provider (M2u′).
Finally:
**22\. The 5GMSu AS releases its resources after observing a period of
inactivity.**
NOTE: This step is implementation-dependent.
# A.15 Hybrid uplink and downlink media streaming using content preparation
This scenario represents a hybrid end-to-end form of collaboration across
uplink media streaming and downlink media streaming services. An external 5GMS
Application Provider relies on the 5GMS System to support both the uplink
streaming media transmission by 5GMSu Clients and subsequent distribution of
that content via downlink media streaming for reception by 5GMSd Clients
within the same 5GMS System.
Figure A.15-1: Hybrid uplink and downlink media streaming
Figure A.15-2 shows the call flow for this scenario. To simplify the call
flow, the content preparation process is omitted.
Figure A.15-2: Call flow for hybrid uplink and downlink media streaming using
content preparation
Steps:
1\. The 5GMSd Application Provider creates a Provisioning Session with the
5GMSd AF (M1d).
2\. The 5GMSd Application Provider provisions the 5GMSD AF with a Content
Hosting Configuration.
3\. The 5GMSdAF, based on the received Content Hosting Configuration, requests
the 5GMSd AS to confirm the availability of distribution resources (M3d).
4\. The 5GMSd AF acknowledges to the 5GMSd Application Provider the successful
creation of the Content Hosting Configuration (M1d).
5\. The 5GMS Application Provider creates a Provisioning Session with the
5GMSu AF (M1u).
**6\. The 5GMSu AF requests the 5GMSu AS to confirm the uplink resources
availability (M3u).**
7\. The 5GMSu AF acknowledges to the 5GMSu Application Provider of the
successful provisioning (M1u).
At some later point in time:
8\. The 5GMSu Application Provider provides Service Access Information to the
5GMS-Aware Application at reference point M8u.
9\. The 5GMS-Aware Application requests the 5GMSu Client to start an uplink
streaming session (M6u/M7u).
**10\. The 5GMSu Client requests that the 5GMSu AF initialises uplink media
streaming (M5u).**
Alternatively:
11\. The 5GMS-Aware Application requests the 5GMSu Client to start an uplink
streaming session (M6u/M7u).
12\. The 5GMSu Client requests Service Access Information from the 5GSMu AF at
reference point M5u.
At some later point in time:
13\. Uplink media streaming starts from the 5GMSu Client to the 5GMSu-like AS
(M4u′).
14\. Media streaming egest starts from the 5GMSu-like AS to the 5GMSu
Application Provider (M2u′).
**15\. If content preparation was provisioned in step 6, the uplinked media
may be manipulated by the 5GMSu AS prior to being streamed to the 5GMSd AS.**
16\. The 5GMSu AS streams the content to the 5GMSd AS (I2, not specified).
Steps 17--21 concern the 5GMS downlink streaming process:
17\. The 5GMS Application Provider optionally provides the service access
information to the 5GMSd-Aware Application (M8d).
18\. The 5GMS-Aware Application requests the 5GMSd Client to start an uplink
streaming session (M6d/M7d).
19\. If Service Access Information was not provided in step 14, the 5GMSd
Client requests this information from the 5GSMd AF (M5d).
20\. The 5GMSd Client requests the start of the downlink streaming session
from the 5GSMd AF (M5d).
> 21\. The downlink media streaming starts (M4d).
Finally:
**22\. The 5GMSu AS releases its uplink content preparation resources after
observing a period of interactivity.**
> **23\. The 5GMSd AS releases its downlink content preparation resources
> after observing a period of interactivity.**
NOTE: Steps 22 and 23 are implementation-dependent.
###### ## Annex B (informative): MNO-specific Service Access Information
acquisition
# B.1 General
A 5GMSd Application Provider may offer its content via multiple Access
Networks from different operators. Each access network can consist of a 5G
System and one or more 5G Media Streaming Architecture components, in
particular its own 5GMSd AFs. The 5GMSd AFs of that access network use their
own FQDNs and potentially their own URL root path elements. When a 5GMSd-Aware
Application is deployed in different 5G Systems the 5GMSd Client needs to
acquire Service Access Information that resolves to the 5GMSd AF endpoint
address(es) appropriate for the serving 5G System. The Service Access
Information contains the URLs and API parameters of the configured 5GMSd AFs
and ASs of that 5G Media Streaming System.
There are different ways to resolve the matching service access information.
This annex focuses on two solutions where the 5GMSd Client fetches the Service
Access Information from a 5GMSd AF within the Trusted DN of the serving mobile
network.
# B.2 Deployment with DNS-based resolution
Figure B.2-1 depicts the deployment for DNS-based resolution of the 5GMSd AF
in the Trusted DN of the MNO which is currently providing connectivity to the
5GMSd Client. The DNS functions are defined in RFC 1034 [14].
Figure B.2-1: DNS based resolution of 5GMSd AF in trusted DN
For the DNS-based resolution mechanism, the 5GMSd Client is provisioned with a
Service Access Information URL, for example dynamically via M8d or statically
within the code of the 5GMSd-Aware Application. The Service Access Information
URL contains an FQDN from the 5GMSd Application Provider or a global URL in
the GSMA domain (i.e. in the \"3gppnetworks.org\" domain).
Figure B.2-2: Message Sequence Chart for DNS-based resolution
Steps:
1: The 5GMSd-Aware Application is provisioned (among other parameters) with a
URL of the 5GMSd AF from which to acquire Service Access Information. The
5GMSd-Aware Application provides this URL to the 5GMSd Client upon start.
2: The 5GMSd Client uses DNS to resolve the FQDN of the URL. The 5GMSd Client
sends a DNS request to the DNS server in the Trusted DN.
3: The DNS server in the trusted DN is not responsible for the FQDN and the
DNS server forwards the DNS request to a DNS server in the external DN
responsible for the FQDN. This may be the DNS server of the 5GMSd Application
Provider or a GSMA DNS server.
4: Based on information from the originating network, the external DNS creates
a response. The response may be a CNAME redirect (i.e. FQDN from the serving
mobile network responsibility) or an IP address (preferably an IP Anycast
Address).
5: The DNS server forwards the DNS response to the 5GMSd Client.
6: When the 5GMSd Client received another FQDN with the response (i.e. a CNAME
DNS record), then the 5GMSd Client resolves the FQDN to an IP address. The
resolved IP address should be an IP address of an 5GMSd AF in the Trusted DN.
7: The 5GMSd Client issues a request to the resolved 5GMSd AF in order to
acquire the Service Access Information.
8: The 5GMSd AF provides the Service Access Information in its response to the
5GMSd Client. The Service Access Information contains URLs and parameters
according to provisioned 5GMS features.
9: When needed, the 5GMSd Client uses the acquired Service Access Information
to activate the needed 5GMSd feature(s).
# B.3 Deployment with HTTPS-based resolution
Figure B.3-1 depicts the deployment for HTTPS-based resolution of the 5GMSd AF
in the Trusted DN of the MNO which is currently providing connectivity to the
5GMSd Client.
NOTE: The process of resolving IP addresses from FQDNs is not depicted in this
deployment architecture.
Figure B.3-1: HTTPS based resolution of 5GMSd AF in Trusted DN
For the HTTPS-based resolution mechanism, the 5GMSd Client is provisioned with
a Service Access Information URL, for example dynamically via M8d or
statically within the code of the 5GMSd-Aware Application. The Service Access
Information URL contains an FQDN of a 5GMSd AF within the 5GMSd Application
Provider domain, which acts as a request redirector.
Figure B.3-2: Message Sequence Chart for HTTPS based resolution
Steps:
1: The 5GMSd-Aware Application is provisioned (among other parameters) with a
URL of the 5GMSd AF from which to aquire Service Access Information. The
5GMSd-Aware Application passes this URL to the 5GMSd Client upon start.
2: The 5GMSd Client uses DNS to resolve the FQDN of the URL.
3: The 5GMSd Client issues a request to the resolved 5GMSd AF in order to
acquire the Service Access Information.
4: Based on information from the originating network (e.g. visible IP of the
5GMSd Client), the 5GMSd AF in the External DN creates an HTTPS redirection
response. The 5GMSd AF looks up the according FQDN of the 5GMSd AF in the
trusted DN and sends an HTTPS redirection response to the 5GMSd Client.
When the 5GMSd AF in the External DN does not offer 5GMS features, or if the
5GMS features are not provisioned it instead provides a response containing an
HTTP error message.
NOTE: Instead of redirecting a 5GMSd Client to the 5GMSd AF in the Trusted DN,
the External 5GMSd AF may directly provide the Service Access Information in
the above step. In this case, the 5GMSd Application Provider needs to update
its 5GMSd AF according to changes within the Trusted DN, e.g. changes of
FQDNs.
5: The 5GMSd Client issues a request to the resolved 5GMSd AF in order to
acquire the Service Access Information.
6: The 5GMSd AF provides the Service Access Information in its response to the
5GMSd Client. The Service Access Information contains URLs and parameters
according to provisioned 5GMS features.
7: When needed, the 5GMSd Client uses the acquired Service Access Information
to activate the needed 5GMSd feature(s).
###### ## Annex C (informative): Collaboration Models for 5GMS via eMBMS
# C.1 Introduction
For 5GMS via eMBMS as introduced in clauses 4.6 and 5.10, different deployment
collaboration scenarios of the architecture as provided in clause 4.6 may be
considered. In all cases, the same UE architecture is used, but different
network side operation modes are considered, including the following parties:
\- _5G Mobile Network Operator:_ A party that offers 5G System reference
points to a content provider.
\- _5G Broadcast Network Operator:_ A party that offers eMBMS reference points
to a third party.
\- _5GMS Content Provider:_ A party that provides 5GMS content.
\- _5GMS Network Operator:_ A party that offers 5GMS System reference points
to a content provider.
\- _5G Broadcast Service Provider:_ A party that offers 5GMS content via eMBMS
and also provides the same content to a 5G Mobile Network Operator.
\- _5GMS Service Provider:_ A party that distributes 5GMS content via a 5G
System and via eMBMS.
# C.2 Collaboration 5GMS-MBMS 1: 5GMS Content Provider uses different delivery
networks
Figures C.2-1 illustrates a collaboration in which the 5GMS Content Provider
uses different delivery networks.
Figure C.2-1: Collaboration 5GMS-MBMS 1: 5GMS Content Provider uses different
delivery networks
# C.3 Collaboration 5GMS-MBMS 2: 5GMS Network Operator offloads to 5G
Broadcast Network Operator
Figure C.3-1 illustrates a collaboration in which a 5GMS Network Operator
offloads to a 5G Broadcast Network Operator.
Figure C.3-1: Collaboration 5GMS-MBMS 2: 5GMS Network Operator offloads to 5G
Broadcast Network Operator
# C.4 Collaboration 5GMS-MBMS 3: 5GMS Service Operator includes MBMS network
Figure C.4-1 illustrates a collaboration in which a 5GMS Service Operator
includes an MBMS network.
Figure C.4-1: Collaboration 5GMS-MBMS 3: 5GMS Service Operator includes MBMS
network
# C.5 Collaboration 5GMS-MBMS 4: 5G Broadcast Service Provider offloads to 5G
MNO
Figure C.5-1 illustrates a collaboration in which a 5G Broadcast Service
Provider offloads to a 5G Mobile Network Operator.
Figure C.5-1: Collaboration 5GMS-MBMS 4: 5G Broadcast Service Provider
offloads to 5G MNO
###### ## Annex D (informative): Use Cases for 5GMS event exposure
# D.1 Introduction
This annex describes Use Cases related to the exposure of events relating to
5G Media Streaming by the Data Collection AF instantiated in the 5GMS AF.
# D.2 Controlling Event exposure
## D.2.1 Data exposure restrictions
The 5GMS Application Provider wishes to limit the level of access that
different classes of Event consumer subscribers have to UE data reported to
and subsequently exposed by the Data Collection AF. These restrictions are
expressed in the form of data processing instructions that it provisions in
the Data Collection AF instantiated in the 5GMS AF along the dimensions
described below. Each set of data processing instructions applies to a
particular Event ID and Event consumer type:
\- Time-based restriction determines the granularity of access along the time
axis, ranging from the finest granularity which permits Event consumer access
to individual events as they occur, to the coarsest granularity which combines
all event data into a single aggregated value.
\- User-based restriction controls access based on end-user grouping. Such
restriction ranges from the fine granularity which permits Event consumer
access to individual events related to individual end users, through medium
granularity which aggregates collected event data at the level of user groups,
to coarse granularity which bundles the data across all users.
\- Location-based restriction defines access based on the geographical
location of the data collection client at which the UE data was collected.
Fine-grained control allows the Event consumer to access individual events,
irrespective of the location. Medium-grained control aggregates collected
event data for a defined geographical area. Coarse-grained control aggregates
all event data to produce a single aggregated value for all locations.
For example, the 5GMS Application Provider decides that its own Event Consumer
AF is granted the finest-grained access to event data by all of the above
dimensions. On the other hand, according to the \"silver\" business agreement
it has established with the Mobile Network Operator, the NWDAF is granted
medium-grained access to event data, while based under a \"bronze\" business
agreement it has established with another Application Service Provider, the
Event Consumer AF of that third-party ASP is granted only coarse-grained
access to event data.
## D.2.2 Event subscription filters
A certain Event consumer is only interested in receiving events for a specific
user or group(s) of users, or a specific application or UEs at a certain
location. It expresses these preferences in the form of filters when
subscribing to the event at the Data Collection AF.
# D.3 QoE metrics for downlink media streaming
The Use Case for exposing QoE metrics for downlink media streaming as an event
is in clause 6.4 of TS 23.288 [23].
# D.4 Consumption of downlink media streaming
The 5GMSd Client collates feedback reports on currently consumed downlink
media streaming content according to a provisioned Consumption Reporting
Configuration it obtains from the Service Access Information for its
Provisioning Session. The consumption reports include the media player entry
point URL, the start time, duration and UE locations. The Media Session
Handler sends the consumption reports to 5GMSd AF for subsequent event
exposure to subscibed Event consumers.
The 5GMSd Application Provider subscribes to downlink media streaming
consumption events from the Data Collection AF, specifying an appropriate
application filter in its subscription request. To drill down into downlink
media streaming consumption at a finer geographical granularity, a location
filter is also specified as part of the subscription. To analyse use of a new
application feature in isolation as part of a beta testing programme, a user
group filter corresponding to the test population is also specified. With the
exposed event, the 5GMSd Applcation Provider performs data analytics to
determine, for example, which media content is most popular in the 5GMS
System, which media content is most popular at a specific location, or which
portions of the media content are consumed. This helps the 5GMSd Application
Provider to optimise distribution of the most popular media content in the
5GMS System.
Alternatively, the NWDAF subscribes to this event for data analytics, exposing
the results to the 5GMSd Application Provider.
# D.5 Invocation of dynamic policies
The Media Session Handler invokes the Dynamic Policy API on the 5GMS AF via M5
to request a specific policy and charging treatment to be applied to a
particular media streaming application data flow. As a result, the 5GMS AF
invokes appropriate service operations on Network Functions in the 5G Core,
e.g. Npcf_PolicyAuthorization or Nnef_AFSessionWithQoS, to effect the
requested network QoS policy change. The 5GMS AF obtains status information
(policy accepted, rejected, etc.) about these service operation invocations,
and policy enforcement information, such as the enforcement method selected
and the enforcement bit rate. After recording the invocation of the dynamic
policies, the 5GMS AF reports these records to its subordinate Data Collection
AF for exposure to subscribed Event consumers.
The event for invocation of dynamic polices may include the timestamp when the
Media Session Handler invokes the dynamic function in 5GMS AF, the requested
policy template identifier, the status information, etc.
The Event Consumer AF within the 5GMS Application Provider or the NWDAF
subscribes to events of this type from the Data Collection AF, specifying the
relevant application filter and any relevant location and/or user filters in
its subscription request. Using the details about the invocations for dynamic
policies, the 5GMS Application Provider or the NWDAF analyse the network
quality provided by the 5G System and the dynamic network requirements for
this media streaming service.
Alternatively, the NWDAF subscribes to the event, specifying any relevant
filters, and exposes analytics results to the 5GMS Application Provider,
enabling the 5GMS Application Provider to optimise the media streaming
service, e.g. by provisioning more appropriate policy templates or by
negotiating more suitable Service Level Agreement (SLA) with the MNO.
# D.6 Invocation of Network Assistance
The AF-based Network Assistance feature enables a UE to receive a bit rate
recommendation from a 5GMS AF providing the Network Assistance server
function.
The 5GMS AF uses the Npcf_PolicyAuthorization notification or
Nnef_MonitoringEvent procedure to receive notifications of network QoS
changes, e.g. estimation of throughput, recommendation of a bit rate. The 5GMS
AF receives these policy change notifications asynchronously.
The 5GMS AF reports the invocation of AF-based network assistance to its
subordinate Data Collection AF, including information about requested QoS and
recommended QoS. The Data Collection AF subsequently exposes this UE data to
the Event Consumer AF within the 5GMS Application Provider. Using this
information, the 5GMS Application Provider is able to optimise the use of the
5GMS System, e.g. by performing dynamic congestion window adjustment.
Data collection and reporting may also be used in case the UE implements ANBR-
based Network Assistance. In this case the Direct Data Reporting Client
reports the invocations of ANBR-based Network Assistance directly to the 5GMS
AF's subordinate Data Collection AF.
The NWDAF subscribes to events of this type at the Data Collection AF,
specifying the relevant application filter and any relevant location and/or
user filters. Based on the requested QoS and recommended QoS in the exposed
events, the NWDAF analyses whether the current network deployment or status
can support the currently provisioned media streaming services, and exposes
these results to the OAM for better network optimization.
# D.7 Media streaming access activity
## D.7.1 Downlink media streaming access activity
In downlink 5G Media Streaming, the 5GMSd AS acts as a CDN (e.g., edge server)
in the hosting and delivery of streaming media content that it has ingested.
The corresponding media streaming access activity (i.e., CDN access logs)
available at the 5GMSd AS are reported to the Data Collection AF instantiated
in the 5GMSd AF for subsequent event exposure to the Event Consumer AF in the
5GMSd Application Provider.
The 5GMSd Application Provider uses information in the exposed events (e.g.
the number of unique users and the access history for different media content
items) to improve its CDN content distribution. It specifies the relevant
application filter and any relevant location and/or user filters in its
subscription request to the Data Collection AF.
Alternatively, the NWDAF subscribes to events of this type, specifying the
relevant application filter and any relevant location and/or user filters, and
analyses the total volume of data delivered by the 5GMSd AS or the average
response time for downlink media requests in order to optimise the 5GMS System
deployment or to demonstrate to the 5GMSd Application Provider that the SLA
for downlink media streaming has been satisfied.
#