# Foreword
This Technical Report has been produced by the 3rd Generation Partnership
Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
In the present document, modal verbs have the following meanings:
**shall** indicates a mandatory requirement to do something
**shall not** indicates an interdiction (prohibition) to do something
The constructions \"shall\" and \"shall not\" are confined to the context of
normative provisions, and do not appear in Technical Reports.
The constructions \"must\" and \"must not\" are not used as substitutes for
\"shall\" and \"shall not\". Their use is avoided insofar as possible, and
they are not used in a normative context except in a direct citation from an
external, referenced, non-3GPP document, or so as to maintain continuity of
style when extending or modifying the provisions of such a referenced
document.
**should** indicates a recommendation to do something
**should not** indicates a recommendation not to do something
**may** indicates permission to do something
**need not** indicates permission not to do something
The construction \"may not\" is ambiguous and is not used in normative
elements. The unambiguous constructions \"might not\" or \"shall not\" are
used instead, depending upon the meaning intended.
**can** indicates that something is possible
**cannot** indicates that something is impossible
The constructions \"can\" and \"cannot\" are not substitutes for \"may\" and
\"need not\".
**will** indicates that something is certain or expected to happen as a result
of action taken by an agency the behaviour of which is outside the scope of
the present document
**will not** indicates that something is certain or expected not to happen as
a result of action taken by an agency the behaviour of which is outside the
scope of the present document
**might** indicates a likelihood that something will happen as a result of
action taken by some agency the behaviour of which is outside the scope of the
present document
**might not** indicates a likelihood that something will not happen as a
result of action taken by some agency the behaviour of which is outside the
scope of the present document
In addition:
**is** (or any other verb in the indicative mood) indicates a statement of
fact
**is not** (or any other negative verb in the indicative mood) indicates a
statement of fact
The constructions \"is\" and \"is not\" do not indicate requirements.
# 1 Scope
The present document studies potential enhancements for the management of
Trace/MDT based on the existing 5G data collection job \"TraceJob\" specified
in TS 28.621 (stage 1) [2], TS 28.622 (stage 2) [3], TS 28.623 (stage 3) [4]
and the Trace/MDT management framework specified in TS 32.421 (stage 1) [5],
TS 32.422 (stage 2) [6] and TS 32.423 (stage 3) [7]. The document provides
conclusions and recommendations on the next steps in the standardization.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 28.621: \"Telecommunication management; Generic Network Resource
Model (NRM) Integration Reference Point (IRP); Requirements\"
[3] 3GPP TS 28.622: \"Telecommunication management; Generic Network Resource
Model (NRM) Integration Reference Point (IRP); Information Service (IS)\"
[4] 3GPP TS 28.623: \"Telecommunication management; Generic Network Resource
Model (NRM) Integration Reference Point (IRP); Solution Set (SS) definitions\"
[5] 3GPP TS 32.421: \"Telecommunication management; Subscriber and equipment
trace; Trace concepts and requirements\".
[6] 3GPP TS 32.422: \"Telecommunication management; Subscriber and equipment
trace; Trace control and configuration management\".
[7] 3GPP TS 32.423: \"Telecommunication management; Subscriber and equipment
trace; Trace data definition and management\".
[8] 3GPP TS 38.423: \" NG-RAN; Xn application protocol (XnAP)\".
[9] 3GPP TS 37.320: "Radio measurement collection for Minimization of Drive
Tests (MDT); Overall description; Stage 2".
[10] 3GPP TS 38.413: "NG-RAN; NG Application Protocol (NGAP)".
[11] 3GPP TS 28.532: \"Management and orchestration; Generic management
services\".
[12] 3GPP TS 28.552: \"5G performance measurements\"
[13] 3GPP TS 38.314: \"Layer 2 measurements\"
[14] 3GPP TS 38.300: \"NR and NG-RAN Overall description; Stage-2\"
[15] R3-230850 \-- \"Summary of offline discussion on MRO\"
[16] 3GPP TS 28.554: \"5G end to end Key Performance Indicators (KPI)\"
# 3 Definitions of terms, symbols and abbreviations
## 3.1 Terms
For the purposes of the present document, the terms given in TR 21.905 [1] and
the following apply. A term defined in the present document takes precedence
over the definition of the same term, if any, in TR 21.905 [1].
## 3.2 Symbols
Void
## 3.3 Abbreviations
For the purposes of the present document, the abbreviations given in TR 21.905
[1] and the following apply. An abbreviation defined in the present document
takes precedence over the definition of the same abbreviation, if any, in TR
21.905 [1].
IOC Information Object Class
MDT Minimization of Drive Tests
PDCP Packet Data Convergence Protocol
RCEF RRC Connection Establishment Failure
RLF Radio Link Failure
RRC Radio Resource Control
SBMA Service Based Management Architecture
UDM Unified Data Management
# 4 Possible Solutions for Alignment of TraceJob and PerfMetricJob
## 4.1 Key issue #1: Reporting of Collected Management Data
## 4.1 Key issue #1: Reporting of Collected Management Data
### 4.1.1 Description
Management data refers to data produced by radio access network functions,
core network functions or management functions and used for management
purposes. Management data specified by 3GPP for 5G management is classified
into 5G performance measurements as defined by TS 28.552 [12], 5G end to end
key performance indicators as defined by TS 28.554 [16] and Trace, MDT, RLF
and RCEF data as defined by TS 32.422 [6]. The combined performance
measurements and key performance indicators are also called **performance
metrics**. The combined Trace, MDT, RLF and RCEF data are also called **trace
metrics**.
For reporting of performance metrics three different reporting methods are
specified, cf. attribute reportingCtrl in PerfMetricJob of TS 28.622 [3].
\- File based reporting where the MnS producer stores the produced files on
the MnS producer; the location of the reported files is selected by the MnS
producer. The MnS consumer will be informed about the availability of new
files and the file location via notifyFileReady notification, if a
subscription is in place.\ In case the preparation of a file fails,
notifyFilePreparationError notification is sent instead.
The applied attributes for this reporting method are:
1\. fileReportingPeriod: time window during which collected measurements are
stored into the same file before the file is closed and a new file is opened.
\- File based reporting where the produced files are stored on a MnS consumer.
The file location is provided with attribute fileLocation. No notification is
emitted by the MnS producer.
The applied attributes for this reporting method are:
1\. fileLocation: location on the MnS consumer where the files shall be
stored.
2\. fileReportingPeriod: time window during which collected measurements shall
be stored into the same file before the file is closed and a new file is
opened
\- Stream based reporting where the MnS producer shall stream the data to the
configured location\ \ The applied attributes for this reporting method are:\
1\. streamTarget: location to which the MnS producer shall stream the data
For reporting of trace metrics (trace, MDT, RLF and RCEF data) two reporting
methods are specified, cf. attribute tjTraceReportingFormat in TraceJob of TS
28.622 [3]:
\- File based reporting: The attribute tjTraceCollectionEntityAddress is used
to specify the IP address to which the trace records shall be transferred.
Since the property \"isWritable\" for this attribute is TRUE, it could be
updated by MnS consumer as well as the MnS producer.
The time and criteria when the trace files are sent to the trace collection
entity (TCE) is vendor specific, see TS 32.422 [6] clause 6 to 9 for MDT,
Trace, RLF and RCEF Reporting, accordingly. Only for MDT reporting it is
specified that \"the Trace Records shall be sent to the TCE latest by 2 hours
(the exact time is FFS) after the Trace Session deactivation.\"
\- Streaming reporting: The attribute tjStreamingTraceConsumerUri specifies
the streaming target.
### 4.1.2 Problem Statement
The reporting methods for file-based reporting specified for PerfMetricJob and
TraceJob differ:
While in case of PerfMetricJob a fileReportingPeriod is defined, in case of
TraceJob there are for Immediate MDT measurements the parameters
tjMDTReportInterval(conditional for M1 in NR), tjMDTCollectionPeriodRrmNR
(conditional for M4 and M5 in NR), tjMDTCollectionPeriodM6NR (conditional for
M6 in NR) and tjMDTCollectionPeriodM7NR (conditional for M7 in NR) specified.
These parameters define the interval between two periodical Mx measurements of
same type. However, they do not specify when the file from gNB is sent to
TCE.\ For job type TRACE_ONLY, RLF_REPORT_ONLY and RCEF_REPORT_ONLY no
reporting period is specified.\ For job type LOGGED_MDT_ONLY, the parameter
tjMDTLoggingInterval, determines the interval between two periodic downlink
pilot strength measuremetns when UE is in RRC IDLE or RRC INACTIVE mode. The
UE indicates availability of MDT measurement results, once it goes to RRC
CONNECTED mode.
In case of PerfMetricJob there is a choice whether the MnS consumer or
producer selects the location where the files shall be stored. In case the MnS
producer selects the location, the MnS consumer will be informed via
notifyFileReady notification about the availability of new files or via
notifyFilePreparationError notification about a failure during file
preparation, if an appropriate subscription is in place.\ In case of TraceJob
the location where the files shall be stored can be modified by MnS consumer
and MnS producer. The generic \"File data reporting service\" is defined in TS
28.532 [11] clause 11.6 and includes the notifyFileReady and
notifyFilePreparationError notifications. However, these are not listed in the
description of TraceJob IOC.
### 4.1.3 Potential Solution
For this potential solution, notifications applicable for the trace job shall
be enhanced. The notifications \"notifyFileReady\" and
\"notifyFilePreparationError\" along with the common notifications defined in
clause 4.5 of TS 28.622 [3] are applicable for _TraceJob_ IOC.
### 4.1.4 Conclusion
An update is needed in TS 28.622 [3] clause 4.3.30.4.
# 5 Possible solutions for TraceJob enhancements in the context of SBMA
## 5.1 Key issue #1: name containment in case of handover for signalling-based
trace activation
### 5.1.1 Description
A TraceJob can be name-contained by SubNetwork, ManagedElement, or
ManagedFunction, see clause 4.3.30.1 in TS 28.622 [3].
In case of signalling based trace activation, the activation is done for a
specific UE, by indicating the IMSI, IMEI(SV), IMEI-TAC or SUPI. The logging
of management data will continue even if the UE is handed over to another
cell.
Considering MDT trace sessions at handover for immediate MDT in NG-RAN, see
clause 4.10 in TS 32.422 [6], in case of signalling based trace activation,
the gNB propagates the Trace Session parameters together with the MDT specific
parameters to the target cell. During handover procedure the target gNB sends
the UE CONTEXT RELEASE message to indicate to the source gNB that radio and
control plane resources for the associated UE context are allowed to be
released, see TS 38.423 [8].
### 5.1.2 Problem Statement
In RAN, during handover procedure the configuration parameters for trace are
propagated to the gNB where the UE is associated to.
In the NRM, the TraceJob managed object instance (MOI) is name contained by a
SubNetwork, ManagedElement, or ManagedFunction instance. It is not specified
how to treat TraceJob MOI in NRM in case of handover for signalling based
trace activation.
### 5.1.3 Potential Solution
In case of signalling based trace activation in NR, the trace configuration of
the immediate MDT is triggered from the 3GPP management system to the 5G core
function by indicating the IMSI, IMEI(SV), IMEI-TAC or SUPI. The core function
(UDM) configures the NG-RAN for immediate MDT subsequently. The TraceJob
corresponding to this signalling-based trace activation is name contained in
the UDM. In case of handover scenarios, the serving gNB propagates the Trace
session parameters together with the MDT specific parameters to the target
gNB. The call is still handled by the same UDM in the core network. Hence the
same name containment in the NRM would be able to manage the trace
configuration post the handover of the call to the target cell.
In case of Management based activations, the TraceJob can be name-contained by
any entity of the RAN or the core depending on the entity on which the
activation is triggered. In this case, the existing name-containment by
SubNetwork, ManagedElement or ManagedFunction would be appropriate as the
management-based trace activation can be performed to any entity that can be
name-contained by the listed entities.
In case of signalling based activation, the TraceJob is name-contained by UDM
in the 5G core network as the trace activation is initiated by the core
network in this scenario. In case of handovers across multiple NG-RANs, the
name-containment is handled by the UDM in this case.
The existing specification mentions that a trace job can be name contained by
SubNetwork, ManagedElement, or ManagedFunction. Based on the discussion above,
in case of signalling based trace activation, the TraceJob is name-contained
by the UDM. It is required to state this explicitly as this helps in the
product implementation.
### 5.1.4 Conclusion
As discussed in 5.1.3, the TraceJob definition may be enhanced to mention that
the TraceJob can be name-contained in the UDM in case of signalling based
trace activation. A change is needed in TS 28.622 [3] clause 4.3.30.
## 5.2 Key issue #2: Gaps in Signalling Trace Activation
### 5.2.1 Description
In case of signalling trace activation, the initial message exchange is
missing from the collected trace record because it happens before the trace
activation message arrives at the base station from the core.
Considering Figure 4.1.2.15.1.1 of TS 32.422 [6], which is shown as Figure
5.2.1-1 in this TR, it is obvious that steps 3 -- 5 are missing from the
collected trace record because AMF sends the Start Trace message over NG
interface in step 9.
{width="6.842361111111111in" height="7.159722222222222in"}
> Figure 5.2.1-1 Trace activation in 5GC following the Registration procedure
### 5.2.2 Problem Statement
Especially for troubleshooting or debugging purposes the messages of the
initial phase of network acquisition are of significant interest. In case of
signalling based trace activation, these messages are not captured in the
trace record.
The potential solution needs to be compatible with SBMA.
### 5.2.3 Potential solution
For this potential solution NG-RAN buffers exchanged messages when UE starts
communication. When tracing is triggered, NG-RAN adds all buffered messages to
the trace record. As an example, illustrated by Figure 5.2.1-1 above, steps 3
-- 5 will be buffered in the NG-RAN.
If the UE is not requested to be traced at the point on which NG-RAN typically
receives trace activation, step 9 in Figure 5.2.1-1 above, NG-RAN discards the
data from the buffer.
To minimize the negative performance impacts in cases the operators don\'t
want to activate the trace, the buffering behaviour can be configured via OAM.
### 5.2.4 Conclusion
An update is needed in TS 32.422 [6] clause 4.1.2.
## 5.3 Key issue #3: Structuring of TraceJob IOC
### 5.3.1 Description
A _TraceJob_ instance represents the trace control and configuration
parameters of a particular Trace Job to request trace metrics including trace
messages, immediate measurements, logged MDT measurements, logged MBSFN MDT
measurements, RLF and RCEF reports. The list of attributes contains more than
30 attributes. Most of these parameters are dependent on certain conditions.
### 5.3.2 Problem statement
As described in the definition of IOC _TraceJob_ , see clause 4.3.30.1 in TS
28.622 [3], only a few parameters are applied independently which kind of data
is requested. Most parameters are only configured dependent on the selected
value of attribute _jobType_. A structure in the list of attributes to reflect
the dependency on the job type (Immediate MDT only, Logged MDT only, Trace
only, Immediate MDT and Trace, RLF reports only, RCEF reports only or Logged
MBSFN MDT) is missing.
### 5.3.3 Potential solution
The attributes of the existing TraceJob may be structured based on the jobType
attribute (See clause 5.9a of TS 32.422 [6]). The attributes those are common
to all the different types of jobType are associated to the TraceJob and no
change made to them. These include plmnTarget, traceReportingConsumerUri,
traceCollectionEntityIpAddress, traceReference,
traceRecordingSessionReference, traceReportingFormat, traceTarget.
Subsequently, the remaining attributes are structured based on the jobType.
The following new datatypes may be introduced under TraceJob IOC for the
purpose of structuring, TraceConfig and MDTConfig. The TraceConfig datatype
may contain the attributes specific to the jobType Trace and combined Trace
and Immediate MDT. These include listOfInterfaces, listOfNeTypes, traceDepth,
triggeringEvents.
The MDTConfig datatype may contain the attributes common to immediate and
logged MDT types. These include attributes such as anonymizationOfMdtData,
areaScope and sensorInformation. Apart from that, the attributes specific to
the immediate and logged MDT are structured inside the new datatypes
ImmediateMdtConfig and LoggedMdtConfig respectively. Other attributes are
structured into one of the MDT datatypes based on their definition.
In principle, the TraceJob may be structured to contain the common attributes
and two new datatypes for trace and MDT configuration. MDT configuration is
further structured into ImmediateMDT and LoggedMDT configurations. The
proposed approach enables the consumer to only configure what needs to be
collected without having to know the details of other kinds of trace types.
### 5.3.4 Conclusion
As discussed in 5.3.3, the TraceJob may be restructured to align with
different jobTypes. The clause 4.3.30.2 of TS 28.622 [3] may be modified to
incorporate this change. Furthermore, four (4) new datatypes may be added
under clause 4.3 of TS 28.622 [3]. Appropriate changes are to be performed at
Stage 3 in TS 28.623 [4] to reflect the restructuring at Stage 2.
# 6 Possible Solutions for MDT Enhancements
## 6.1 Management of Data Collection Enhancements of MDT
### 6.1.1 Key issue #1: Alignment of "Report Amount" parameter for Immediate
MDT measurements
#### 6.1.1.1 Description
In case of NR, in RRC_CONNECTED state, UE supports Immediate MDT measurements
as described in TS 37.320 [9] clause 5.4.1. The measurements to be performed
for Immediate MDT are defined in TS 37.320 [9] clause 5.4.1.1. These
measurements include DL signal quantity measurements, PDCP SDU data volume
measurements, UE throughput measurements, power headroom measurements, packet
delay and packet loss rate measurements.
The NGAP procedures and the information elements used on NG interface are
defined in TS 38.413 [10] clause 8 and 9. As part of Radio Network Layer
related IEs, M1, M4, M5, M6 and M7 measurement configurations are defined for
NG interface. All these measurement configurations include the "Report Amount"
IE.
#### 6.1.1.2 Problem Statement
The Immediate MDT specific configuration parameters in the management system
are specified in TS 32.422 [6] clause 5.10. The configuration parameter
"Report Amount" is also described as part of the same. This parameter defines
the number of measurement reports that shall be taken for periodical reporting
while UE is in connected mode. According to TS 32.422 [6] clause 5.10.6, the
parameter "Report Amount" is applicable only to M1 measurement in NR.
According to TS 38.413 [10] clause 9.3.1, the IE "Report Amount" can be
configured for M1, M4, M5, M6 and M7 measurements separately.
There is a misalignment in terms of the configurability of the parameter
"Report Amount" for the different Immediate MDT measurements.
#### 6.1.1.3 Potential Solutions
##### 6.1.1.3.1 Single configuration parameter Report Amount for M1, M4, M5,
M6 and M7
For this potential solution enhance the definition of the configuration
parameter Report Amount in clause 5.10.6 in TS 32.422 [6] for the NR Immediate
MDT measurements M4, M5, M6 and M7 besides M1.
Advantages:
> \- The definition and the configured values are the same for Report Amount
> configuration parameter across the different measurement types. Having only
> one common configuration parameter is enough. Configuring only one parameter
> is less effort than configuring up to five.
\- There will be no \"repeated\" definitions of this configuration parameter
for multiple measurement types.
Disadvantages:
> \- Trace Job IOC can trigger multiple different measurements for Immediate
> MDT as M1, M4, M5, M6 and M7 in one single job. This solution allows to
> configure only one Report Amount value for all the triggered Immediate MDT
> measurements. Different values for Report Amount parameter cannot be
> configured for different types of Immediate MDT measurements with this
> solution.
##### 6.1.1.3.2 Individual configuration parameter Report Amount for M1, M4,
M5, M6 and M7
For this potential solution the Report Amount configuration parameter shall be
defined individually in TS 32.422 [6] for all the applicable Immediate MDT
measurement types. This solution is like the way the _Collection Period_
parameter is currently defined for M6 and M7 separately. The management system
shall configure the _Report Amount_ configuration parameter for all the
applicable Immediate MDT measurement types individually.
Advantages:
> \- Different Immediate MDT measurement types shall be configured with
> different Report Amount IE individually and shall be reported accordingly.
>
> \- Alignment with NGAP specification TS 38.413 [10] where Report Amount IE
> can also be configured individually for all the applicable Immediate MDT
> measurement types.
Disadvantages:
\- There will be multiple sections defining the Report Amount configuration
parameter for the different applicable Immediate MDT measurement types.
As a potential solution to this problem, "Report Amount" parameter shall be
defined individually for all the applicable Immediate MDT measurements (M1,
M4, M5, M6 and M7). This provides the flexibility to configure different
Immediate MDT measurements with different \"Report Amount\" value to the Trace
MnS Consumer.
Trace job defined in TS 28.622 [3] shall be enhanced with new \"Report
Amount\" IE for each of the applicable Immediate MDT measurements.
#### 6.1.1.4 Conclusion
Based on the discussion in clause 6.1.1.3, it is recommended to use the
approach described in 6.1.1.3.2 to use separate parameters for Report Amount
for M1, M4, M5, M6 and M7 for the mentioned advantages.
An update is needed in TS 28.622 [3] (Clauses 4.3.30.1, 4.3.30.2, 4.3.30.3,
4.4.1), TS 28.623 [4] (clause C.4.3) and 32.422 [6] (clauses 4.1.1.6a,
4.1.2.12.2, 4.1.2.12.3, 4.4, 5.10.6).
### 6.1.2 Key issue #2: Reporting of per direction per DRB per UE MDT
measurements
#### 6.1.2.1 Description
The Immediate MDT measurements during RRC_CONNECTED state are described in TS
32.422 [6] clause 5.10.3 and TS 37.320 [9] clause 5.4.1. The measurements on
PDCP data volume and average UE throughput measurements are defined in TS
28.552 [12]. The measurements on packet delay and packet loss measurements are
defined in 38.314 [13]. These measurements are defined per direction (UL/DL),
per DRB and per UE.
The trace data file XML schema is defined in 32.423 [7] clause A.2.2. This
specifies the XML schema including the header information and different trace
content including MDT measurements.
#### 6.1.2.2 Problem Statement
In the trace data file XML schema defined in TS 32.423 [7] clause A.2.2, the
MDT measurements are represented by the element name \"meas\". This element is
optional, and multiple entries of the element can be present representing
multiple MDT measurements to be reported. This element is explained by the
attributes name, changeTime, vendorSpecific, targetCell, and ueLocation. These
attributes characterize the MDT measurement along with the actual value of the
measurement. The characterization of MDT measurement do not include
information like the direction (DL/UL) and the DRB. The immediate MDT
measurements M4, M5, M6, and M7 are defined per direction and per DRB.
The existing trace data file XML schema for MDT measurements do not have a
means to report measurements those are measured per direction and per DRB.
#### 6.1.2.3 Potential Solution
For the potential solution to this issue, the existing trace data file XML
schema may be enhanced to include per DRB and per direction information as
part of the existing element \"meas\". The existing element \"meas\" may be
enhanced with optional attributes, \"direction\" and \"drb\" information.
These optional attributes inside \"meas\" element in the XML schema may be
used to indicate the measurement along with the direction (UL/DL) and the DRB
number. The attribute \"direction\" may be defined as a Boolean value of
\"UL\" or \"DL\" indicating the measurement corresponds to Uplink or Downlink
respectively. The attribute \"drb\" may be defined as an integer representing
the DRB number of the corresponding measurement.
#### 6.1.2.4 Conclusion
An update is needed in clause A.1 of TS 32.423 [7] with the definition of new
optional attributes proposed along with the allowed values in the table for
XML trace file parameters.
An update is also needed in clause A.2.2, updating the XML schema of the trace
file to include the proposed new optional parameters.
## 6.2 Management of MDT for NPN
### 6.2.1 Key issue #1: Support of management and signalling based traceMDT
collection for NPN networks
#### 6.2.1.1 Description
As part of SON MDT enhancements for Non-Public Networks, RAN3 has agreed to
support the following functionalities. Those are:
\- support of signalling based MDT and Management based MDT for NPNs
\- support both immediate MDT and logged MDT for NPN
\- user consent handling for NPNs, in particular SNPNs
\- area scope for NPNs
\- support of NPNs in RLF Report and other UE reports used for SON and MDT
To support the above functionalities in the trace management system, a study
is needed in SA5 to understand the current functionalities and the changes
needed to support the required functionalities. The trace MDT collections are
currently specified in 32.421 [5] and 32.422 [6]. The Trace Job IOC defined in
28.622 [3] (stage 2) and 28.623 [4] (stage 3).
#### 6.2.1.2 Problem Statement
The following problems have been identified to support traceMDT collection for
Non-Public Networks.
\- There are no requirements (business and specification level) to support
traceMDT collection in Non-Public Networks.
\- Existing methods are not sufficient to uniquely identify the Non-Public
Networks.
\- Existing procedures in trace starting mechanism to match the PLMN ID is
insufficient to support the traceMDT collection in SNPN in case of management-
based activation.
\- For user consent, considering only the RPLMN ID of the UE for matching the
trace reference PLMN (PLMN portion of the Trace Reference) is not a sufficient
criterion to select a UE for management-based MDT in a Non-Public Network.
\- Existing area scope definition is not sufficient to cover the new dimension
introduced by PNI-NPN on closed access groups (CAGs).
#### 6.2.1.3 Potential Solution
The following solutions are proposed to the problems described above.
\- Enhance the requirements of the trace management system to support the
traceMDT collection for Non-Public Networks
\- Enhance the existing methods to include the appropriate identifiers, NID
and CAG ID for SNPN and PNI-NPN respectively.
\- Enhance the procedures for trace collection to match the PLMN ID along with
the appropriate identifiers NID and CAG ID for SNPN and PNI-NPN respectively
in case of management-based activation.
\- Enhance the procedures for activation of management-based MDT to also
consider the identifiers like NID and CAGID for SNPN and PNI-NPN respectively
for UE selection.
\- Area scope definition need to be enhanced to contain the CAG IDs as an
allowed means to specify the area scope for PNI-NPN.
#### 6.2.1.4 Conclusions
Based on the proposals described above, below are changes needed in the
mentioned specifications.
\- Requirements needs to be added in 32.421 [5] to support the traceMDT
collection for NPN networks.
\- Clause 5.6 in 32.422 [6] needs to be updated to include NID and CAG ID for
composing the Trace Reference parameter for SNPN and PNI-NPN respectively.
\- Trace procedures in clauses 4.2.2.10 and 4.2.2.11 of 32.422 [6] needs to be
updated to include the appropriate identifiers for SNPN and PNI-NPN for the
selection of UEs in case of management-based activation in Non-Public
Networks.
\- Clause 4.9.2 of TS 32.422 [6] needs to be updated to include NPN specific
identifiers for UE selection criteria along with the PLMN ID.
\- Clause 5.10.2 of 32.422 [6], the definition of Area Scope parameter need to
be updated to include the list of CAG IDs as an allowed means of specifying
the area scope.
\- For the above-mentioned points, corresponding changes in clause 4.3.30 of
28.622 [6] and stage 3 changes in 28.623 [7] needs to be made.
### 6.2.2 Key issue #2: Support of RLF and RCEF reports for NPN networks
#### 6.2.2.1 Description
As part of SON MDT enhancements for Non-Public Networks, RAN3 has agreed to
support the following functionalities to support RLF and RCEF reports in NPN.
#### 6.2.2.2 Problem Statement
The following problems have been identified to support traceMDT collection for
NPN networks.
\- There are no requirements (business and specification level) to support RLF
and RCEF reports for NPN networks.
\- The existing methods of trace activation and deactivation for RLF and RCEF
reports are to be studied for impacts to support NPN
#### 6.2.2.3 Potential Solution
Based on the requirements described in the preceding clause, the following are
proposed as solutions.
\- Business level and specification level requirements are to be added to TS
32.421 [5] to support the NPN for RLF and RCEF reports.
\- No changes required specifically in the trace activation and deactivations
mechanisms for RLF and RCEF reports. The existing procedures are covering the
NPNs as well.
#### 6.2.2.4 Conclusion
Based on the proposals above, following changes are prescribed.
\- Requirements needs to be added in 32.421 [5] to support the RLF and RCEF
reports for NPN networks.
## 6.3 Management of MDT for MRO
### 6.3.1 Key issue #1: Support of MDT for MRO during inter-system inter-RAT
handover for voice fallback
#### 6.3.1.1 Description
Regarding the inter-system inter-RAT handover for voice fallback scenario,
RAN3 has discussed the following cases that are considered for MRO
enhancements.
Case 1: After failure (Hand Over Failure / Radio Link Failure) of inter-system
inter-RAT handover from NR to E-UTRAN for voice fallback, a suitable E-UTRA
cell is selected, and the UE tries RRC connection setup procedure for the
voice service in the E-UTRA cell.
Case 2: After failure (Hand Over Failure) of inter-system inter-RAT handover
from NR to E-UTRAN for voice fallback, in case no suitable E-UTRA cell can be
selected, the UE reverts to the configuration of the source PCell in NR and
initiates RRC re-establishment procedure in NR.
#### 6.3.1.2 Problem Statement
For the identified cases for inter-system inter-RAT handover for voice
fallback scenario, RAN3 proposed changes to the description of the different
types of connection failure under clause 15.5.2.2.3 in [x]. The changes agreed
by RAN3 propose a new kind of connection failure in addition to the existing
kinds, such as inter-system too late and inter-system too early handovers as
captured in [15].
In case 1, the UE tries RRC connection setup procedure for the voice service
in E-UTRA cell and this scenario is out of scope of this document since this
would be treated as a new call in the E-UTRA cell. In case 2, the UE could not
find a suitable E-UTRA cell and reverts to the configuration of the source
PCell in NR. The management of MDT for the new call established in NR is to be
studied for the agreed new scenario for both management-based MDT and
signalling-based MDT activation mechanisms.
#### 6.3.1.3 Potential solution
Regarding the case 2, in case of management-based MDT activation, if the gNB
(source PCell) where the UE is attempting a RRC connection is activated for
management MDT, the MDT data collection for this call may be performed as
described in clause 4.1.1.9 in [6].
In case of signalling based activation, for the new call established in the
source PCell, the Initial Context Setup Request from AMF to gNB would contain
the MDT configuration based on the MDT configuration on the UDM. UDM forwards
the MDT configurations to AMF and SMF. AMF then forwards the MDT configuration
to the gNB as described in clause 4.1.2.17 in [6].
#### 6.3.1.4 Conclusion
For the case relevant to the scope of this document, two activation mechanisms
are possible. For both management and signalling based activation mechanisms,
from the solution discussed in the above section, the existing methods in [6]
addresses all the relevant scenarios covered by case 2. Since the existing
methods cover the scenario proposed in the problem statement, there is no need
for proposing a new solution to this key issue.
# 7 Conclusions and Recommendations
## 7.1 Conclusions
The following issues are identified in the present document so far:
\- Use case of alignment of Trace and PerfMetric job have been analysed and
necessary changes have been identified for TraceJob IOC.
\- The key issue of Name Containment in case of Handover for Signalling Based
Trace Activation has been analyzed and the necessary updates have been
proposed to the TraceJob description.
\- Key issue of the gaps in Signalling based trace activation has been
analysed and the necessary updates have been proposed to the activation
procedures.
\- The key issue of the structuring of the TraceJob IOC has been analyzed and
the necessary changes have been proposed to the attributes of the TraceJob
IOC.
\- The key issue of the report amount has been analyzed and necessary changes
to the definition of the Report Amount parameter has been identified.
\- The key issue of reporting of the UE MDT measurements per DRB per direction
per UE has been analyzed and necessary updates have been proposed to the XML
schema of the trace file.
\- The key issue of support of management and signalling based MDT collection
for NPN networks has been studied and the necessary changes have been proposed
to trace specifications to incorporate the identifiers for NPN.
\- The key issue of support of RLF and RCEF reports for NPN networks have been
analyzed and necessary updates to requirements have been proposed.
## 7.2 Recommendations
Enhance the Network Resource Model in TS 28.622 [3] and the Trace
specifications 32.421 [5], 32.422 [6] and 32.423 [7]:
\- Update TraceJob IOC with the applicable notifications mechanisms.
\- Update TraceJob IOC description with the name-containment information for
handover in signalling based trace activation.
\- Update signalling based trace activation procedures to capture the initial
messages in case of signalling based trace activation.
\- Update TraceJob IOC parameters to structure them based on the jobTypes.
\- Enhance Report Amount parameter to support M4, M5, M6 and M7.
\- Update the XML schema for Trace to include the per DRB per direction and
per UE information.
\- Update the business level requirements and add the required identifiers for
S-NPN and PNI-NPN.
\- Update the business level requirements for to support RLF and RCEF reports
for NPN networks.
#