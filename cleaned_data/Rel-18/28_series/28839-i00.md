# Foreword
This Technical Report has been produced by the 3rd Generation Partnership
Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
In the present document, modal verbs have the following meanings:
**shall** indicates a mandatory requirement to do something
**shall not** indicates an interdiction (prohibition) to do something
The constructions \"shall\" and \"shall not\" are confined to the context of
normative provisions, and do not appear in Technical Reports.
The constructions \"must\" and \"must not\" are not used as substitutes for
\"shall\" and \"shall not\". Their use is avoided insofar as possible, and
they are not used in a normative context except in a direct citation from an
external, referenced, non-3GPP document, or so as to maintain continuity of
style when extending or modifying the provisions of such a referenced
document.
**should** indicates a recommendation to do something
**should not** indicates a recommendation not to do something
**may** indicates permission to do something
**need not** indicates permission not to do something
The construction \"may not\" is ambiguous and is not used in normative
elements. The unambiguous constructions \"might not\" or \"shall not\" are
used instead, depending upon the meaning intended.
**can** indicates that something is possible
**cannot** indicates that something is impossible
The constructions \"can\" and \"cannot\" are not substitutes for \"may\" and
\"need not\".
**will** indicates that something is certain or expected to happen as a result
of action taken by an agency the behaviour of which is outside the scope of
the present document
**will not** indicates that something is certain or expected not to happen as
a result of action taken by an agency the behaviour of which is outside the
scope of the present document
**might** indicates a likelihood that something will happen as a result of
action taken by some agency the behaviour of which is outside the scope of the
present document
**might not** indicates a likelihood that something will not happen as a
result of action taken by some agency the behaviour of which is outside the
scope of the present document
In addition:
**is** (or any other verb in the indicative mood) indicates a statement of
fact
**is not** (or any other negative verb in the indicative mood) indicates a
statement of fact
The constructions \"is\" and \"is not\" do not indicate requirements.
# 1 Scope
The present document studies the charging aspects for the support of Time
Sensitive Networking based on requirements from TS 22.261 [2] and TS 22.104
[7] of 5G system and vertical domains, the architecture, functional and
protocol to enable Time Sensitive Communication and Time Synchronization,
described in TS 23.501 [3], TS 23.502 [4], TS 23.503 [5], TR 23.734 [6] and TS
24.519 [8].
The following are studied:
\- possible charging scenarios and requirements for 5G System integration as a
bridge in TSN network;
\- possible charging scenarios and requirements for the Time Sensitive
Communications and Time Synchronization service;
\- possible new charging aspects for the following key items:
\- QoS requirements for TSN (e.g. support for TSC QoS Flows, QoS mapping from
TSN QoS information to 5GS QoS profile);
\- Edge computing scenario support in TSN Transport (e.g. DS-TT and NW-TT);
\- charging enhancement (e.g. new triggers) due to policy control for TSN
traffic which may impact the charging;
\- potential charging solutions for the above charging scenarios and
requirements and taking in account TSN application requirements (e.g. instance
survival time).
# 2 References {#references-1}
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or non‑specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 22.261: \"Service requirements for the 5G system; Stage 1\".
[3] 3GPP TS 23.501: \"System architecture for the 5G System (5GS); Stage 2\".
[4] 3GPP TS 23.502: \"Procedures for the 5G System (5GS); Stage 2\".
[5] 3GPP TS 23.503: \"Policy and charging control framework for the 5G System
(5GS); Stage 2\".
[6] 3GPP TR 23.734: \"Study on enhancement of 5G System (5GS) for vertical and
Local Area Network (LAN) services\".
[7] 3GPP TS 22.104: \"Service requirements for cyber-physical control
applications in vertical domains\".
[8] 3GPP TS 24.519: \"5G System (5GS); Time-Sensitive Networking (TSN)
Application Function (AF) to Device-Side TSN Translator (DS-TT) and Network-
Side TSN Translator (NW-TT) protocol aspects; Stage 3.\"
[9] 3GPP TS 32.254: \"Telecommunication management; Charging management;
Exposure function Northbound Application Program Interfaces (APIs) charging\".
[10] 3GPP TR 32.255: \"Telecommunication management; Charging management; 5G
data connectivity domain charging; Stage 2\".
# 3 Definitions of terms, symbols and abbreviations
## 3.1 Terms
For the purposes of the present document, the terms given in TR 21.905 [1] and
the following apply. A term defined in the present document takes precedence
over the definition of the same term, if any, in TR 21.905 [1].
**survival time:** time that an application consuming a communication service
may continue without an anticipated message. as defined in TS 22.261 [2]
## 3.2 Symbols
For the purposes of the present document, the following symbols apply:
N84 Reference point between TSCTSF and NEF
N85 Reference point between TSCTSF and NEF
N86 Reference point between TSCTSF and AF
N87 Reference point between TSCTSF and UDR
Ntsctsf Service-based interface exhibited by TSCTSF
## 3.3 Abbreviations
For the purposes of the present document, the abbreviations given in TR 21.905
[1] and the following apply. An abbreviation defined in the present document
takes precedence over the definition of the same abbreviation, if any, in TR
21.905 [1].
5GS 5G System
ASTI Access Stratum TIme
CNC Centralized Network Configuration
DS-TT Device-Side TSN Translator
MNO Mobile Network Operator
NW-TT Network-Side TSN Translator
TS Time Synchronization
TSC Time Sensitive Communications
TSCTSF Time Sensitive Communication and Time Synchronization function
TSN Time-Sensitive Networking
TSN AF Time Sensitive Networking Application Function
TSN-SC TSN Service Customer
TSN-SP TSN Service Provider
# 4 Background
## 4.1 General
As per the requirements described in TS 22.261 [2] and TS 22.104 [7] about
clock synchronization, time-sensitive communication, the corresponding
description to support of integration with TSN and enablers for Time Sensitive
Communications and Time Synchronization are specified in TS 23.501 [3], clause
5.27 and clause 5.28:
\- 5GS acts as a Layer 2 Ethernet Bridge. When integrated with IEEE TSN
network, 5GS functions acts as one or more TSN Bridges of the TSN network. The
configuration of the 5GS Bridge can be provided by TSN AF and CNC.
\- 5G System features that can be used independently or in combination to
enable time-sensitive communication and time synchronization.
Figure 4.1-1 describes the architecture for 5GS appearing as TSN bridge,
specified in clause 4.4.8.2 of TS 23.501 [3] and figure 4.1-2 describes the
architecture for AF requested support of Time Sensitive Communication and Time
Synchronization, specified in clause 4.4.8.3 of TS 23.501 [3].
Figure 4.1-1: System architecture view with 5GS appearing as TSN bridge
Figure 4.1-2: Architecture to enable Time Sensitive Communication and\ Time
Synchronization services
## 4.2 Business Roles for the TSN Charging
5G system as the 5GS Bridge to support the integration with TSN, the TSN
charging can be built upon the business roles as following, related to 5G
Bridge management, TSN traffic transmission over the PDU Session:
\- Mobile Network Operator (MNO): provides 5GS system as the 5GS Bridge.
\- TSN Service Provider (TSN-SP): provides communication services for TSN
Bridge use, e.g. enterprise.
\- TSN Service Customer (TSN-SC): consumes communication services for TSN
Bridge use, e.g. end user, enterprise.
5G System features that can be used independently or in combination to enable
time-sensitive communication and time synchronization, the TSN charging can be
built upon the business roles as following, related to the time
synchronization configuration and capability, including the exposure of the
time sensitive service, time-sensitive communication:
\- Mobile Network Operator (MNO): provides the 5GS system features.
\- TS Service Provider (TS-SP): provides communication services for time-
sensitive communication and time synchronization, e.g. enterprise.
\- TS Service Customer (TS-SC): consumes communication services for time-
sensitive communication and time synchronization, e.g. end user, enterprise.
In deployments, there could be business scenarios where one or more of the
business roles are supported by a single enterprise. The present document does
not impose any restrictions to the possible deployment scenarios.
# 5 Charging scenarios and potential requirements
## 5.1 Exposure of Time Synchronization
### 5.1.1 General
5G system supports time synchronization service that can be activated and
deactivated by AF. In order to enable Time Sensitive Communication AF
requested time sensitive communication and time synchronization services, The
TSCTSF/NEF exposes 5GS capability to support Time Synchronization service. The
TSCTSF (directly or via NEF) exposes the 5GS and/or UE availability and
capabilities for synchronization service to the AF as described in TS 23.502
[4].
Exposure of time synchronization comprises the following capabilities:
\- The AF may learn 5GS and/or UE availability and capabilities for time
synchronization service.
\- The AF controls activation and deactivation of the time synchronization
service for the target UE(s).
### 5.1.2 Use Case
#### 5.1.2.1 Use Case #1.1 Exposure of Time Synchronization Service
TS-SC actives the time synchronization service via AF and the AF provides
request to the NEF and the NEF forwards the parameters to the TSCTSF. The AF
trusted by the operator provides these parameters to the TSCTSF directly.
TS-SC de-actives the time synchronization service via AF and the AF provides
request to the NEF and the NEF forwards the parameters to the TSCTSF or
directly to TSCTSF.
The 5GS provides the requested 5GS and/or UE availability and capabilities for
TS-SC.
The MNO may charge the TS-SC based on the exposure events for Time
Synchronization Service.
The corresponding potential charging requirements and key issues: REQ-
CH_ETS-01, REQ-CH_ ETS -02, and the Key Issue #1a, Key Issue #1b.
### 5.1.3 Potential charging requirements
**REQ-CH_ETS-01:** The 5GS charging system should support the Exposure of Time
Synchronization charging per 5GS bridge.
**REQ-CH_ETS-02:** The 5GS charging system should support the Exposure of Time
Synchronization charging per TSN.
### 5.1.4 Key issues
The following key issues are identified:
\- **Key Issue #1a:** Identify the charging scenarios and network function
which can be support the Exposure of Time Synchronization charging.
\- **Key Issue #1b:** Identify the charging information which can be support
the Exposure of Time Synchronization charging.
## 5.2 Enablers for Time Sensitive Communications and Time Synchronization
### 5.2.1 General
5G System features can be used independently or in combination to enable time-
sensitive communication and time synchronization as specified in TS 23.501
[3], including the following:
\- Delay-critical GBR.
\- A hold and forward mechanism to schedule traffic.
\- TSC Assistance Information: describes TSC flow traffic characteristics.
\- Time Synchronization: describes how 5GS can operate as a PTP Relay.
### 5.2.2 Use Case
#### 5.2.2.1 Use Case #2.1 Enablers for Time Sensitive Communications and Time
Synchronization
If the AF is considered to be trusted by the operator, the AF could interact
directly with TSCTSF, using the same service as the NEF for Time Sensitive
Communications and Time Synchronization. The TSCTSF (directly or via NEF)
exposes the 5GS and/or UE availability and capabilities for synchronization
service to the AF as described in clause 4.15.9.2 of TS 23.502 [4].
For supporting time synchronization service requested by TS-SC, the 5GS is
configured to operate in one or multiple PTP instances, including the support
for derivation of Uu time synchronization error budget.
For supporting transmission gate schedules requested by TS-SC, the 5GS Bridge
is required to provide Bridge Delays for each port pair and traffic class of
the 5GS bridge to an TSN system.
For supporting the TSC traffic characteristics requested by TS-SC, TSC QoS
Flows use a Delay-critical GBR resource type and TSC Assistance Information.
The MNO may charge the TS-SC based on the enabler event for Time
Synchronization Service.
The corresponding potential charging requirements and key issues: REQ-
CH_ETS-01, and the Key Issue #2a, Key Issue #2b.
### 5.2.3 Potential charging requirements
**REQ-CH_ENTS-01:** The 5GS charging system should support the Exposure of
Time Synchronization charging per TSN.
### 5.2.4 Key issues
The following key issues are identified:
\- **Key Issue #2a:** Identify the charging scenarios and network function
which can be support the enabler of Time Synchronization charging.
\- **Key Issue #2b:** Identify the charging information which can be support
the enabler of Time Synchronization charging.
## 5.3 Time Sensitive Communication
### 5.3.1 General
The Time Sensitive Communication related features are supported based on AF
request are described in TS 23.501 [3]. For each 5GS Bridge of a TSN network,
the port on NW-TT support the connectivity to the TSN network, the ports on
DS-TT side are associated to the PDU Session providing connectivity to the TSN
network. The TSN End station/TSN Bridge support the Time Sensitive
Communication over the 5GS bridge, via the DS-TT, UE, UPF, NW-TT based on the
PDU session.
The granularity of the 5GS TSN bridge is per UPF for each network instance or
DNN/S-NSSAI.
### 5.3.2 Use Case
#### 5.3.2.1 Use Case #3.1 Time Sensitive Communication via TSN 5GS Bridge
During the PDU session, Time sensitive communication between the TSN End
stations via DS-TT and NW-TT.
If the TSN AF determines that the TSN stream is for UE-Network communication.
The UE1/DS-TT sends the traffic data from TSN stations via UPF/NW-TT to TSN
network for the Time Sensitive Communication over TSN 5GS Bridge.
If the TSN AF determines that the TSN stream is for UE-UE communication (i.e.
ingress and egress ports are in DS‑TTs), the TSN AF divides the stream into
one uplink stream and one or more downlink streams and provides the streams on
AF Session basis to the PCF(s). The SMF applies local switching in order to
enable UPF locally forward uplink stream from one PDU session as downlink
stream in another PDU session.
The MNO may charge the UE based on the traffic data volume.
The MNO may charge the TSN based on the traffic data volume.
The corresponding potential charging requirements and key issues: REQ-
CH_TSC-01, REQ-CH_TSC-02, REQ-CH_TSC-03 and the Key Issue #3a, Key Issue #3b.
### 5.3.3 Potential charging requirements
**REQ-CH_TSC-01:** The 5GS charging system should support the data
connectivity charging for Time Sensitive Communication per 5GS bridge.
**REQ-CH_TSC-02:** The 5GS charging system should support the data
connectivity charging for Time Sensitive Communication per TSN.
**REQ-CH_TSC-03:** The 5GS charging system should support the data
connectivity charging for Time Sensitive Communication per UE based on the
data volume.
### 5.3.4 Key issues
The following key issues are identified:
\- **Key Issue #3a:** Identify the charging scenarios and network function
which can be support the Time Sensitive Communication charging.
\- **Key Issue #3b:** Identify the charging information which can be support
the Time Sensitive Communication charging.
## 5.4 5GS Bridge Management and Configuration Charging
### 5.4.1 General
To support of integration with TSN, the 5GS acts as a Layer 2 Ethernet Bridge.
The TSN AF in 5GS is responsible to receive the bridge information of 5GS
Bridge from 5GS, as well as register or update this information to the TSN
CNC. The bridge information of 5GS Bridge is used by the TSN network (via TSN
CNC) to make appropriate management and configuration for the 5GS Bridge.
### 5.4.2 Use Case
#### 5.4.2.1 Use Case #4.1 TSN 5GS Bridge management charging
When the TSN Service Customer (TSN-SC) initiates the TSN services, the 5GS
reports the 5GS Bridge information and receiving the configuration via TSN AF
to the TSN network, including but not limited to the following aspects
specified in TS 23.501 [3].
\- 5GS Bridge information.
\- Capabilities of 5GS Bridge.
\- Topology of 5GS Bridge.
\- Traffic classes and their priorities per port.
\- Stream Parameters in order to support PSFP.
The MNO can charge TSN-SP for the interaction between the 5GS and TSN for the
5GS bridge management.
The corresponding potential charging requirements and key issues: REQ-CH_BC-01
and the Key Issue #4a, Key Issue #4b.
#### 5.4.2.2 Use Case #4.2 TSN 5GS Bridge configuration charging
Based on the agreement between the TSN Service Provider (TSN-SP) and MNO, the
pre-configuration of 5GS bridge may be deployed in the PCF or UPF.
When the TSN Service Customer (TSN-SC) initiates the TSN services, the TSN
network can configure the 5GS Bridge via TSN AF or TSCTSF, including but not
limited to the following aspects specified in TS 23.501 [3]:
\- Bridge ID of 5GS Bridge.
\- Configuration information of scheduled traffic on ports of DS-TT and NW-TT.
\- Chassis ID of 5GS Bridge.
\- Traffic forwarding information.
\- Configuration information per stream.
The MNO can charge TSN-SP for the interaction between the 5GS and TSN for the
5GS bridge configuration during PDU session.
The corresponding potential charging requirements and key issues: REQ-
CH_BC-02and the Key Issue #4c, Key Issue #4d.
### 5.4.3 Potential charging requirements
**REQ-CH_BC-01:** The 5GS charging system should support the 5GS bridge
management charging per 5GS bridge.
**REQ-CH_BC-02:** The 5GS charging system should support the 5GS bridge
configuration charging per 5GS bridge.
### 5.4.4 Key issues
The following key issues are identified:
\- **Key Issue #4a:** Identify the charging scenarios and network function
which can be support the 5GS bridge management charging.
\- **Key Issue #4b:** Identify the charging information which can be support
the 5GS bridge management charging.
\- **Key Issue #4c:** Identify the charging scenarios and network function
which can be support the 5GS bridge configuration charging.
\- **Key Issue #4d:** Identify the charging information which can be support
the 5GS bridge configuration charging.
# 6 Key issues
## 6.1 General
For supporting of the exposure of Time Synchronization charging, the key
issues are identified from the corresponding use cases and potential charging
requirements as described in clause 5.1.
For supporting of the Enablers for Time Sensitive Communications and Time
Synchronization, the key issues are identified from the corresponding use
cases and potential charging requirements as described in clause 5.2.
For supporting of the Time Sensitive Communication, the key issues are
identified from the corresponding use cases and potential charging
requirements as described in clause 5.3.
For supporting of 5GS Bridge Management and Configuration Charging, the key
issues are identified from the corresponding use cases and potential charging
requirements as described in clause 5.4.
## 6.2 Key issues and solutions mapping
The mapping between the key issues and the potential solutions are present as
shown in table 6.2-1.
Table 6.2-1: Mapping of Potential Solutions to Key Issues
Solutions Key Issues
* * *
                                                                                         1a           1b   2a   2b   3a   3b   4a   4b   4c   4d
Solution #1: Exposure of Time Synchronization Service via NEF √ √  
Solution #2: 5GS Bridge management and configuration charging via SMF √ √  
Solution #3: 5GS Bridge management and configuration charging √ √ √ √ Solution
#4: Time Sensitive Communications charging from TSN station to TSN station √ √  
Solution #5: Time Sensitive Communications charging √ √  
Solution #6: Enablers for TSC and TS Charging √ √  
Solution #7: Exposure of Time Synchronization Service with trusted AF √ √
# 7 Solutions for Key issues
## 7.1 Solution #1: Exposure of Time Synchronization Service via NEF
### 7.1.1 General
The solution #1, addresses the Key Issue #1a and #1b, covering the REQ-
CH_ETS-02.
Based on the clause 4.15.9.2 Exposure of UE availability for Time
Synchronization service, specified in TS 23.502 [4], the AF subscribes to
notifications and to explicitly cancel a previous subscription for UE
availability for time synchronization service, via the following NEF services:
\- Nnef_TimeSynchronization create or update time synchronization
configuration as well as to activate and deactivate the time synchronization
service for which the NEF uses service operations provided by TSCTSF.
Described in TS 23.501 [3], clause 5.27.1.8.
\- Nnef_ASTI service to control the 5G access stratum time distribution
configuration, for which the NEF uses service operations provided by TSCTSF.
Described in TS 23.501 [3], clause 5.27.1.8.
\- Nnef_AFsessionWithQoS to reserve resources for an AF session. Described in
TS 23.503 [5], clause 6.1.3.22.
### 7.1.2 Architecture description
**Figure 7.1.2-1: NEF converged charging architecture**
### 7.1.3 Flow description
Figure 7.1.3-1 describes the high-level charging procedure for Time
Synchronization service based on NEF.
Figure 7.1.3-1: AF Request via NEF using PEC
> 1\. NEF receives a Time Synchronization Service Request from an AF,
> including a list of UE identities (GPSIs) or Groups of UEs identified by an
> External Group Identifier that further define the subset of the target UEs
> and AF-Service-Identifier, or DNN and optionally S-NSSAI which used to
> indicate the TS-SC. The subscriber may be identified by the External Group
> Identifier
>
> 2\. NEF performs the actions needed to fulfil the Time Synchronization
> Service Request.
>
> 3\. If authorized, the NEF continues the Time Synchronization Service
> Request processing and sends the Time Synchronization Service Response to
> the AF.
>
> 3ch-a. The NEF sends Charging Data Request [Event] to CHF for the received
> Time Synchronization Service Request.
>
> 3ch-b. The CHF creates a CDR for this Time Synchronization Service Request.
>
> 3ch-c. The CHF acknowledges by sending Charging Data Response [Event] to the
> NEF.
## 7.2 Solution #2: 5GS Bridge management and configuration charging via SMF
### 7.2.1 General
The solution #2, addresses the Key Issue #4a and #4b, covering the **REQ-
CH_BC-01**.
Based on the clause 4.3.2 and clause 4.3.3 Non-roaming and Roaming with Local
Breakout for UE requested PDU Session Establishment and PDU modification,
specified in TS 23.502 [4], the SMF supports 5GS Bridge management and
configuration.
### 7.2.2 Architecture description
**Figure 7.2.2-1: SMF converged charging architecture**
### 7.2.3 Flow description
Figure 7.2.3-1 describes the high-level charging procedure for 5GS bridge
information reporting based on SMF during the PDU session establishment.
Figure 7.2.3-1: 5GS Bridge management and configuration charging via\ SMF
during the PDU session establishment
> 1-9. PDU session establishment charging, based on figure 5.2.2.2.2-1 of TS
> 32.255 [10] description. During SM Policy Association, the PCF may provide
> policy control request trigger for 5GS Bridge Information as defined in
> clause 6.1.3.5 of TS 23.503 [5]. The SMF may perform a Session Management
> Policy Modification procedure to report some event to the PCF that has
> previously subscribed.
>
> 9ch-a. The SMF sends Charging Data Request [Initial] to CHF for start of the
> PDU session.
>
> 9ch-b. The CHF open a CDR for this PDU session.
>
> 9ch-c. The CHF acknowledges by sending Charging Data Response [Initial] to
> the SMF. The CHF may provide charging related trigger for 5GS Bridge
> Information reporting. e.g. enable/disable the trigger or change the
> category.
>
> 10-20. PDU session establishment, figure 4.3.2.2.1-1 in TS 23.502 [4]
> description.
>
> 20ch-a. When the trigger for 5GS Bridge information available is armed, the
> SMF sends Charging Data Request [Update] to CHF, in order to support the
> integrate with IEEE TSN, if the 5GS Bridget information available is
> immediate report, with 5GS Bridge information (e.g. 5GS user-plane Node ID,
> port number of the DS-TT port, MAC address of the DS-TT Ethernet port for
> Ethernet PDU Session type, UE IP address for IP PDU Session type and UE-DS-
> TT Residence Time (if available) as provided by the UE).
>
> 20ch-b. The CHF updates the CDR for 5GS Bridget information available.
>
> 20ch-c. The CHF acknowledges by sending Charging Data Response [Update] to
> the SMF.
Figure 7.2.3-2 describes the high-level charging procedure for 5GS bridge
management and configuration charging based on SMF during the PDU session
modification.
Figure 7.2.3-2: 5GS Bridge management and configuration charging\ during the
PDU session modification
  1. PDU session establishment as described in TS 23.502 [4] clause > 4.3.2.2 UE Requested PDU Session Establishment.
  2. SMF establish the charging session for start of the PDU session.
  3. SMF receive the configuration of 5GS bridge from CNC.
  4. The PDU session may be modified because the configuration request > from CNC.
> 4ch-a. The SMF sends Charging Data Request [Update] to CHF for PDU session
> modification, with the trigger QoS change.
>
> 4ch-b. The CHF update a CDR for the configuration request from CNC.
>
> 4ch-c. The CHF acknowledges by sending Charging Data Response [Update] to
> the SMF.
  1. SMF reports the 5GS bridge information to the CNC.
> 5ch-a. The SMF sends Charging Data Request [Update] to CHF for the reporting
> of the configuration.
>
> 5ch-b. The CHF updates a CDR.
>
> 5ch-c. The CHF acknowledges by sending Charging Data Response [Update] to
> the SMF.
## 7.3 Solution #3: 5GS Bridge management and configuration charging
### 7.3.1 General
The solution #3, addresses the Key Issue #4a, Key Issue #4b, Key Issue #4c and
#4d, covering the **REQ-CH_BC-01** and **REQ-CH_BC-02**.
Based on the clause 6.2.32 of TS 23.501 [3], the TSN AF supports control plane
translator functionality for the integration of the 5GS with a TSN network,
this involves e.g.:
\- 5GS Bridge management.
\- Port and bridge management information exchange with DS-TT or NW-TT.
\- Interactions with the CNC for 5GS Bridge configuration and reporting.
\- Determining the TSC Assistance Container and TSN QoS information by mapping
TSN Stream(s).
TSN AF can support the 5GS Bridge management and configuration charging via
the interactions with the CNC.
### 7.3.2 Architecture description
**Figure 7.3.2-1: TSN AF converged charging architecture**
### 7.3.3 Flow description
Figure 7.3.3-1 describes the high-level charging procedure for 5GS bridge
management and configuration charging based on TSN AF interaction with the PCF
and CNC. In this case, the TSN AF, PCF and CHF belong to the same MNO.
Figure 7.3.3-1: 5GS bridge management and configuration charging via TSN AF
> 1\. TSN AF receives the 5GS bridge management and configuration from CNC.
> The capabilities of each port on UE/DS-TT side and UPF/NW-TT side are
> integrated as part of the configuration of the 5GS Bridge and are notified
> to TSN AF and delivered to CNC for TSN bridge registration and modification.
>
> 2\. TSN AF forwards the 5GS bridge management and configuration to PCF.
>
> 2ch-a. The TSN AF sends Charging Data Request [Event] to CHF for the request
> from the CNC about the 5GS bridge and configuration.
>
> 2ch-b. The CHF creates a CDR for the request from CNC.
>
> 2ch-c. The CHF acknowledges by sending Charging Data Response [Event] to the
> TSN AF.
>
> 3\. PCF sends the 5GS bridge management and configuration response to the
> TSN AF.
>
> 4\. TSN AF forwards the 5GS bridge management and configuration response to
> the CNC.
Note: The different solution for having the CHF and TNS AF belonging to
different enterprises is not addressed in the present document.
## 7.4 Solution #4: Time Sensitive Communications charging from TSN station to
TSN station
### 7.4.1 General
The solution #4, addresses the Key Issue #3a and #3b, covering the **REQ-
CH_TSC-01, REQ-CH_TSC-02** and **REQ‑CH_TSC-03**.
Based on the clause 5.28.1 of TS 23.501[3], 5.28.1 5GS bridge management,
there is only one PDU Session per DS-TT port for a given UPF. All PDU Sessions
which connect to the same TSN network via a specific UPF are grouped into a
single 5GS bridge.
For time sensitive communications, the following options are present in figure
7.4.1-1:
\- TSN Bridge/End station to TSN Bridge/End station: based on the PDU session
1B, UE1-DS_TT interact with the UPF-B/NW-TT. based on the PDU session 2B,
UE2-DS-TT interact with the UPF-B/NW-TT. The UPF-B/NW-TT is responsible for
the traffic communication between TSN Bridget/End stations. The SMF applies
local switching in order to enable UPF locally forward uplink stream from one
PDU session as downlink stream in another PDU session.
Figure 7.4.1-1: TSC for TSN Station to TSN Station
### 7.4.2 Architecture description
Figure 7.4.2-1: SMF converged charging architecture
\"UE CCS\" performs charging functionalities for individual UEs, and includes
in particular:
\- CHF exposing Nchf services associated to individual UEs.
\"TSN CCS\" performs charging functionalities for TS-SC, and includes in
particular:
\- CHF exposing Charging service(s) associated to the TS-SC.
Nchf interface is used for interaction between CHF (UE CCS) and CHF (TSN CCS).
Deployments can choose to collocate TSN CCS with UE CCS.
### 7.4.3 Flow description
#### 7.4.3.0 General
The traffic data of Time sensitive communication is transferred on the 5GS
Bridge. The granularity of the 5GS TSN bridge is per UPF for each network
instance or DNN/S-NSSAI. The bridge ID of the 5GS TSN bridge is bound to the
UPF ID of the UPF.
#### 7.4.3.1 TSN Bridge/End station to TSN Bridge/End station of the Time
Sensitive Communication
Figure 7.4.3.1-1 describes the high-level charging procedure for TSN
Bridge/End station to TSN Bridge/End station of the Time Sensitive
Communication based on SMF during the PDU session.
Figure 7.4.3.1-1: TSC for TSN Bridge/End station to TSN Bridge/End station
1-3. UE 1 and UE 2 performs the Time Sensitive Communications on the same 5GS
bridge.
> 4\. UPF sends the usage reporting for the Time sensitive communications.
>
> 5ch-a. The SMF sends Charging Data Request [Initial] to the UE CHF for the
> TSN stream delivery with the 5GS Bridge id and related 5GS bridge
> information based on the trigger event specified in TS 32.255 [10].
>
> 5ch-b. The UE CHF creates a CDR.
>
> 5ch-c. The UE CHF acknowledges by sending Charging Data Response [Initial]
> to the SMF.
>
> 6ch-a. If traffic data volume is related to the TSC, for example 5G Bridge
> ID, the UE CHF sends Charging Data Request [Initial] to the TSN CHF for the
> TSN stream delivery with the 5GS Bridge id and related 5GS bridge
> information.
>
> 6ch-b. The TSN CHF creates a CDR for the start of the TSN stream.
>
> 6ch-c. The TSN CHF acknowledges by sending Charging Data Response [Initial]
> to the UE CHF.
For Time Sensitive Communications service, the message flows for the PDU
session establishment, PDU session modification, PDU session release of 5G
data connectivity charging would be the same as in clauses 5.2.2.13.2.1,
5.2.2.13.3.1 and 5.2.2.13.4.1 of TS 32.255 [10].
TSN CCS or billing domain aggregates the volume usage per 5GS bridge via 5GS
bridge Id for TSC based on the accumulation of usage reporting via the 5GS
bridge.
## 7.5 Solution #5: Time Sensitive Communications charging
### 7.5.1 General
The solution #5, addresses the Key Issue #3a and #3b, covering the **REQ-
CH_TSC-01, REQ-CH_TSC-02** and **REQ-CH_TSC-03**.
Based on the clause 5.28.1 in TS 23.501 [3], 5.28.15GS bridge management,
there is only one PDU Session per DS-TT port for a given UPF. All PDU Sessions
which connect to the same TSN network via a specific UPF are grouped into a
single 5GS bridge.
For time sensitive communications, the following options are present in figure
7.5.1-1:
\- TSN Bridge/End station to the TSN System: based on the PDU session 1A, the
UE1-DS_TT and TSN system transfers the TSN stream via the UPF-A/NW-TT on the
5GS Bridge A.
Figure 7.5.1-1: TSC for TSN Station to TSN system
### 7.5.2 Architecture description
Figure 7.5.2-1: SMF converged charging architecture
\"UE CCS\" performs charging functionalities for individual UEs, and includes
in particular:
\- CHF exposing Nchf services associated to individual UEs.
\- quota management for the individual UEs.
\"TSN CCS\" performs charging functionalities for TS-SC, and includes in
particular:
\- CHF exposing Charging service(s) associated to the TS-SC.
\- quota management for the TS-SC.
Nchf interface is used for interaction between CHF (UE CCS) and CHF (TSN CCS).
Deployments can choose to collocate TSN CCS with UE CCS.
### 7.5.3 Flow description
#### 7.5.3.0 General
The traffic data of Time sensitive communication is transferred on the 5GS
Bridge. The granularity of the 5GS TSN bridge is per UPF for each network
instance or DNN/S-NSSAI. The bridge ID of the 5GS TSN bridge is bound to the
UPF ID of the UPF.
#### 7.5.3.1 TSN Bridge/End station to the TSN System of the Time Sensitive
Communication
Figure 7.5.3.1-1 describes the high-level charging procedure for TSN
Bridge/End station to the TSN System of the Time Sensitive Communication based
on SMF during the PDU session.
Figure 7.5.3.1-1: TSC for TSN Bridge/End station to TSN System
> 1\. SMF collects the usage of the TSN stream and reports the charging data
> information per UE per PDU session from UPF.
>
> 2ch-a. The SMF sends Charging Data Request [Initial, Requested Quota] to the
> UE CHF for the TSN stream delivery with the 5GS Bridge id and related 5GS
> bridge information based on the trigger event specified in TS 32.255[10].
>
> 2ch-b. The UE CHF creates a CDR.
>
> 2ch-c. The UE CHF acknowledges by sending Charging Data Response [Initial,
> Granted Quota] to the SMF.
>
> 3ch-a. If traffic data volume is related to the TSC, for example 5G Bridge
> ID, the UE CCS sends Charging Data Request [Initial] to TSN CHF for the
> request for the TSC on the 5GS bridge.
>
> 3ch-b. The TSN CHF creates a CDR for the request for TSC.
>
> 3ch-c. The TSN CHF acknowledges by sending Charging Data Response [Initial,
> Granted Quota] to the UE CHF.
NOTE: If the charged party is the individual UE, the step 3ch-a, 3ch-b and
3ch-c is not required.
For Time Sensitive Communications service, the message flows for the PDU
session establishment, PDU session modification, PDU session release of 5G
data connectivity charging would be the same as in clauses 5.2.2.13.2.1,
5.2.2.13.3.1 and 5.2.2.13.4.1 of TS 32.255 [10].
The UE CCS charges the volume usage per UE based on the charging information
reporting for the UE.
TSN CCS or billing domain aggregates the volume usage per 5GS bridge via 5GS
bridge Id for TSC based on the accumulation of usage reporting per UE via the
5GS bridge.
TSN CCS or billing domain aggregates the volume usage per TSN via UPF ID for
TSC based on the accumulation of usage reporting per UE via the 5GS bridge of
TSN.
## 7.6 Solution #6: Enablers for TSC and TS Charging
### 7.6.1 General
The solution #6, addresses the Key Issue #2a and #2b, covering the **REQ-
CH_ETS-01**.
Based on the clause 5.2.27 TSCTSF Services in TS 23.502 [4], TSCTSF Services
and Service Operations are present in table 7.6.1-1.
The NF consumer AF invokes the TSCTSF service directly or via NEF based on the
whether the AF is considered to be trusted by the operator or not.
Table 7.6.1-1: NF Services provided by the TSCTSF
+----------------------------------+---------------------+---------------------+ | Service Name | Operation Semantics | Example Consumer(s) | +==================================+=====================+=====================+ | **Ntsctsf_TimeSynchronization** | Request/Response | AF, NEF | | | | | | | Subscribe/Notify | | +----------------------------------+---------------------+---------------------+ | **Ntsctsf_ASTI** | Request/Response | AF, NEF | +----------------------------------+---------------------+---------------------+ | **Ntsctsf_QoSandTSCAssistance** | Request/Response | AF, NEF | | | | | | | Subscribe/Notify | | +----------------------------------+---------------------+---------------------+
For the Time Synchronization service charging, if the NEF charging described
in clause 7.1 solution #1 is supported, TSCTSF(CTF) charging is not required.
If the AF is trusted party, interacting with TSCTSF without NEF, the
TSCTSF(CTF) charging may be supported.
### 7.6.2 Architecture description
Figure 7.6.2-1: TSCTSF converged charging architecture - CEF
### 7.6.3 Flow description
#### 7.6.3.1 TSCTSF directly interact with the AF
If the AF is considered to be trusted by the operator, the TSCTSF sends the
Ntsctsf_TimeSynchronization message directly to the AF. Figure 7.6.3.1-1
describes the high-level charging procedure for enablers for TSC and TS
Charging based on TSCTSF.
Figure 7.6.3.1-1: 5GS Bridge management charging via SMF
> 1\. TSCTSF receives a Time Synchronization Service Request/subscribe message
> from an AF, including a list of UE identities (GPSIs) or Groups of UEs
> identified by an External Group Identifier that further define the subset of
> the target UEs and AF-Service-Identifier, or DNN and optionally S-NSSAI
> which used to indicate the TS-SC.
>
> 2\. TSCTSF performs the actions needed to fulfil the Time Synchronization
> Service Request/subscribe and If authorized, the TSCTSF sends the Time
> Synchronization Service Response/notify message.
>
> 2ch-a. The TSCTSF sends Charging Data Request [Event] to CHF for the
> received Time Synchronization Service Request/subscribe.
>
> 2ch-b. The CHF creates a CDR for this Time Synchronization Service
> Request/subscribe.
>
> 2ch-c. The CHF acknowledges by sending Charging Data Response [Event] to the
> TSCTSF.
## 7.7 Solution #7: Exposure of Time Synchronization Service with trusted AF
### 7.7.1 General
The solution #7, addresses the Key Issue #1a and #1b, covering the REQ-
CH_ETS-02.
The TS 23.501 [3] clause 4.4.8.3 states that if the AF is considered to be
trusted by the operator, the AF could interact directly with TSCTSF. The TS
23.502 [4], clause 5.2.27, describes the TSCTSF services that either the AF or
NEF can consume:
\- Ntsctsf_TimeSynchronization_: create update and delete time synchronization
configuration and to activate and deactivate the time synchronization service,
further described in TS 23.501 [3], clause 5.27.1.8.
\- Ntsctsf_ASTI_: control the 5G access stratum time distribution
configuration, further described in TS 23.501 [3], clause 5.27.1.8.
\- Ntsctsf_QoSandTSCAssistance_: specific QoS and provide assistance for
handling traffic characterized by TSC QoS parameters, further described in TS
23.503 [5], clause 6.1.3.22.
### 7.7.2 Architecture description
Figure 7.7.2-1: AF converged charging architecture
### 7.7.3 Flow description
Figure 7.7.3-1 describes the AF session with required QoS update procedure,
based on figure 4.15.6.6-1 TS 23.502 [4] description.
Figure 7.7.3-1: AF Request directly to TSCTSF using PEC
> 1 to 4b. Start and determination that TSCTSF needs to be invoked, implying
> that steps 3a, 3b, 4a, 4b, 5, 6a, 7a, 7b, and 8 from figure 4.15.6.6-1 of TS
> 23.502 [4] are applicable.
>
> 4ch-a. The AF sends Charging Data Request [Event] to CHF for the received
> Ntsctsf_QoSandTSCAssistance_Create response.
>
> 4ch-b. The CHF creates a CDR.
>
> 4ch-c. The CHF acknowledges by sending Charging Data Response [Event] to the
> AF.
>
> 6a to 6b. From figure 4.15.6.6a-1 of TS 23.502 [4].
>
> 6ch-a. The AF sends Charging Data Request [Event] to CHF for the received
> Ntsctsf_QoSandTSCAssistance_Notify.
>
> 6ch-b. The CHF creates a CDR.
>
> 6ch-c. The CHF acknowledges by sending Charging Data Response [Event] to the
> AF.
Note: the subscriber id is not addressed in the present document.
## 7.8 Solution Evaluation
The solution #1, solution #6 and solution #7 solve the key issue #1a, #1b, #2a
and #2b.
\- Solution #1 proposed to reuse the NEF functionality to support the time
synchronization service exposure charging. The AF invokes the TSC and TS
services via NEF when the AF is considered to not be trusted by the operator.
For the trusted AF, the NEF cannot trigger the charging because the service
interactions are directly from trusted AF to the TSCTSF.
\- Solution #6 proposed to add a new TSCTSF(CTF). The AF invokes the TSCTSF
service directly or via NEF based on the whether the AF is considered to be
trusted by the operator or not. The TSCTSF(CTF) charging can be supported for
the enabler of TSC and TS charging when the AF is trusted party or not-trusted
party.
\- Solution #7 proposed to trusted AF to support the times sensitive
communication and time synchronization service invocation charging. If the AF
is considered to not be trusted by the operator, the AF(CTF) does not work.
The solution #4 and solution #5 solve the key issue #3a and #3b.
\- Solution #4 proposed to reuse the SMF to identify TSC traffic and support
data connectivity charging for TSN Station to TSN station
\- Solution #5 proposed to reuse the SMF to identify TSC traffic and support
data connectivity charging for TSN Station to TSN system.
The solution #2 and solution #3 solve the key issue #4a, #4b, #4c and #4d.
\- Solution #2 proposed to reuse the SMF for the 5GS bridge information and
configuration reporting, which is different from the SMF current supported
functionality, data connectivity. The SMF should distinguish the 5GS bridge
management and configuration charging information from the usage reporting.
\- Solution #3 proposed to add a new TSN AF (CTF) for the 5GS bridge
management and configuration charging reporting.
## 7.9 Solution conclusions
For key issue #1a, #1b, #2a and #2b, the solution #1 and solution #6 proposed
to be selected for normative work. The enhancement of NEF charging specified
in TS 32.254 [9] for solution #1 is required.
For key issue #3a and #3b, the solution # 4 and #5 proposed to be selected for
normative work. The enhancement of SMF charging specified in TS 32.255 [10]
for solution #4 and #5 is required.
For key issue #4a, #4b, #4c and #4d, the solution #3 proposed to be selected
for normative work.
A new charging specification is concluded to specify the new consumer
TSCTSF(CTF).
#