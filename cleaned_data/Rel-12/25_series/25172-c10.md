# Foreword
This Technical Specification has been produced by the 3rd Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document establishes the minimum performance requirements for
A-GANSS for FDD mode of UTRA for the User Equipment (UE) that supports
A-GANSS. It includes the minimum performance requirements for both UE‑based
and UE‑assisted A‑GANSS. The minimum performance requirements also include
combinations of A-GPS and A-GANSS.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or non‑specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TS 25.101: \"User Equipment (UE) radio transmission and reception
(FDD)\".
[2] 3GPP TS 25.104: \"Base Station (BS) radio transmission and reception
(FDD)\".
[3] IS-GPS-200, Revision D, \"Navstar GPS Space Segment/Navigation User
Interfaces\", March 7^th^, 2006.
[4] IS-GPS-705, \"Navstar GPS Space Segment/User Segment L5 Interfaces\",
September 22, 2005.
[5] IS-GPS-800, \"Navstar GPS Space Segment/User Segment L1C Interfaces\",
September 4, 2008.
[6] IS-QZSS, \"Quasi Zenith Satellite System Navigation Service Interface
Specifications for QZSS\", Ver.1.1, July 31, 2009.
[7] \"Galileo OS Signal in Space ICD (OS SIS ICD)\", Draft 0, Galileo Joint
Undertaking, May 23^rd^, 2006.
[8] \"Global Navigation Satellite System GLONASS Interface Control Document\",
Version 5.1, 2008.
[9] \"Specification for the Wide Area Augmentation System (WAAS) \", US
Department of Transportation, Federal Aviation Administration,
DTFA01-96-C-00025, 2001.
[10] 3GPP TS 25.171: \"Requirements for support of Assisted Global Positioning
System (A-GPS) Frequency Division Duplex (FDD)\".
[11] 3GPP TS 34.171: \"Terminal Conformance Specification, Assisted Global
Positioning System (A-GPS) (FDD)\".
[12] 3GPP TS 34.172: \"Terminal Conformance Specification, Assisted Galileo
and Additional Navigation Satellite Systems (A-GANSS) (FDD)\".
[13] 3GPP TS 34.109: \"Special conformance testing functions\".
[14] 3GPP TS 25.331: \"Radio Resource Control (RRC) protocol specification\".
[15] ETSI TR 102 273-1-2: \"Electromagnetic compatibility and Radio spectrum
Matters (ERM); Improvement on Radiated Methods of Measurement (using test
site) and evaluation of the corresponding measurement uncertainties; Part 1:
Uncertainties in the measurement of mobile radio equipment characteristics;
Sub-part 2: Examples and annexes\".
[16] P. Axelrad, R.G. Brown, \"GPS Navigation Algorithms\", in Chapter 9 of
\"Global Positioning System: Theory and Applications\", Volume 1, B.W.
Parkinson, J.J. Spilker (Ed.), Am. Inst. of Aeronautics and Astronautics Inc.,
1996.
[17] S.K. Gupta, \"Test and Evaluation Procedures for the GPS User
Equipment\", ION-GPS Red Book, Volume 1, p. 119.
[18] 3GPP TS 25.215: \"Physical layer; Measurements (FDD)\".
[19] BeiDou Navigation Satellite System Signal In Space Interface Control
Document Open Service Signal B1I(Version 1.0), China Satellite Navigation
Office, December 2012.
# 3 Definitions, symbols, abbreviations and test tolerances
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
3GPP TS 25.101 [1], 3GPP TS 25.104 [2] and the following apply:
**Horizontal Dilution Of Precision (HDOP):** measure of position determination
accuracy that is a function of the geometrical layout of the satellites used
for the fix, relative to the receiver antenna.
## 3.2 Symbols
For the purposes of the present document, the following symbol applies:
> B1I BeiDou B1I navigation signal with carrier frequency of 1561.098 MHz.
>
> _c_ Speed of light.
>
> E1 Galileo E1 navigation signal with carrier frequency of 1575.420 MHz.
>
> E5 Galileo E5 navigation signal with carrier frequency of 1191.795 MHz.
>
> E6 Galileo E6 navigation signal with carrier frequency of 1278.750 MHz.
>
> G1 GLONASS navigation signal in the L1 sub-bands with carrier frequencies
> 1602 MHz ± k × 562.5 kHz.
>
> G2 GLONASS navigation signal in the L2 sub-bands with carrier frequencies
> 1246 MHz ± k × 437.5 kHz.
>
> k GLONASS channel number, k = -7...13.
>
> L1 C/A GPS or QZSS L1 navigation signal carrying the Coarse/Acquisition code
> with carrier frequency of 1575.420 MHz.
>
> L1C GPS or QZSS L1 Civil navigation signal with carrier frequency of
> 1575.420 MHz.
>
> L2C GPS or QZSS L2 Civil navigation signal with carrier frequency of
> 1227.600 MHz.
>
> L5 GPS or QZSS L5 navigation signal with carrier frequency of 1176.450 MHz.
>
> **G** Geometry Matrix.
>
> $\rho_{\text{GNSS}_{m},i}$ Measured pseudo-range of satellite _i_ of
> GNSS~m~.
>
> **W** Weighting Matrix.
>
> $1_{\text{GNSS}_{m},i}$ Line of sight unit vector from the user to the
> satellite _i_ of GNSS~m~.
>
> $x$ State vector of user position and clock bias.
## 3.3 Abbreviations
For the purposes of the present document, the following abbreviations apply:
A-GANSS Assisted‑Galileo and Additional Navigation Satellite Systems
A‑GNSS Assisted‑GNSS
A-GPS Assisted‑Global Positioning System
AWGN Additive White Gaussian Noise
BDS BeiDou Navigation Satellite System
C/A Coarse/Acquisition
DUT Device Under Test
ECEF Earth-Centered, Earth-Fixed
ECI Earth-Centered-Inertial
FDD Frequency Division Duplex
GEO Geostationary Earth Orbit
GLONASS GLObal\'naya NAvigatsionnaya Sputnikovaya Sistema (Engl.: Global
Navigation Satellite System)
GNSS Global Navigation Satellite System
GPS Global Positioning System
GSS GNSS System Simulator
HDOP Horizontal Dilution Of Precision
ICD Interface Control Document
IGSO Inclined Geosynchronous Satellite Orbit
IS Interface Specification
LOS Line Of Sight
MEO Medium Earth Orbit
QZS Quasi-Zenith Satellite
QZSS Quasi-Zenith Satellite System
RF Radio Frequency
RRC Radio Resource Control
SBAS Space Based Augmentation System
SFN System Frame Number
SS FDD System Simulator
SV Space Vehicle
TBD To Be Determined
TOD Time Of Day
TOW Time Of Week
TTFF Time To First Fix
UE User Equipment
UTRA Universal Terrestrial Radio Access
UTRAN Universal Terrestrial Radio Access Network
WLS Weighted Least Squares
WGS‑84 World Geodetic System 1984
## 3.4 Test tolerances
The requirements given in the present document make no allowance for
measurement uncertainty. The test specification 3GPP TS 34.172 [12] defines
test tolerances. These test tolerances are individually calculated for each
test. The test tolerances are then added to the limits in the present document
to create test limits. The measurement results are compared against the test
limits as defined by the shared risk principle.
Shared Risk is defined in ETR 273-1-2 [15], subclause 6.5.
# 4 General
## 4.1 Introduction
The present document defines the minimum performance requirements for both
UE‑based and UE‑assisted FDD A‑GANSS terminals. The minimum performance
requirements also include combinations of A-GPS and A-GANSS.
## 4.2 Measurement parameters
### 4.2.1 UE‑based A-GANSS measurement parameters
In case of UE-based A-GANSS, the measurement parameters are contained in the
RRC UE POSITIONING POSITION ESTIMATE INFO IE. The measurement parameter in
case of UE-based A-GANSS is the horizontal position estimate reported by the
UE and expressed in latitude/longitude.
### 4.2.2 UE‑assisted A-GANSS measurement parameters
In case of UE-assisted A-GANSS, the measurement parameters are contained in
the RRC UE POSITIONING GANSS MEASURED RESULTS IE. The measurement parameters
in case of UE-assisted A-GANSS are the UE GANSS code measurements, as
specified in 3GPP TS 25.215 [18]. The UE GANSS code measurements that may be
combined with UE GPS code phase measurements as specified in 3GPP TS 25.215
[18] are converted into a horizontal position estimate using the procedure
detailed in Annex F.
## 4.3 Response time
Max Response Time is defined as the time starting from the moment that the UE
has received the final RRC measurement control message containing reporting
criteria different from \"No Reporting\" sent before the UE sends the
measurement report containing the position estimate or the GANSS and GPS
measured result, and ending when the UE starts sending the measurement report
containing the position estimate or the GPS and GANSS measured result on the
Uu interface. The response times specified for all test cases are Time-to-
First-Fix (TTFF) unless otherwise stated, i.e. the UE shall not re‑use any
information on GANSS and GPS time, location or other aiding data that was
previously acquired or calculated and stored internally in the UE. A dedicated
test message \'RESET UE POSITIONING STORED INFORMATION\' has been defined in
TS 34.109 [13] clause 5.4 for the purpose of deleting this information and is
detailed in subclause B.1.10.
## 4.4 Time assistance
Time assistance is the provision of GANSS reference time to the UE from the
network via RRC messages. Currently two different GANSS time assistance
methods can be provided by the network.
a) Coarse time assistance is always provided by the network and provides
current GANSS time to the UE. The time provided is within ±2 seconds of GANSS
system time. It is signalled to the UE by means of the GANSS Day and GANSS TOD
fields in the GANSS Reference Time assistance data IE.
b) Fine time assistance is optionally provided by the network and adds the
provision to the UE of the relationship between the GANSS system time and the
current UTRAN time. The accuracy of this relationship is ±10 μs of the actual
relationship. This addresses the case when the network can provide an improved
GANSS time accuracy. It is signalled to the UE by means of the SFN and UTRAN
GANSS timing of cell frames fields in the GANSS Reference Time assistance data
IE.
The specific GANSS system time is identified through the GANSS Time ID field
of the GANSS Reference Time IE. In case where several GANSS are used in the
tests, only one GANSS Time ID is used to determine the Time of Day. For all
the constellations, the GANSS Time Model assistance and UTC Model assistance
shall be available at the system simulator, as specified in Annex E.
The time of applicability of time assistance is the beginning of the System
Frame of the message containing the GANSS Reference time.
### 4.4.1 Use of fine time assistance
The use of fine time assistance to improve the GANSS performance of the UE is
optional for the UE, even when fine time assistance is signalled by the
network. Thus, there are a set minimum performance requirements defined for
all UEs and additional minimum performance requirements that are valid for
fine time assistance capable UEs only. These requirements are specified in
subclause 5.1.2.
## 4.5 RRC states
The minimum A-GANSS performance requirements are specified in clause 5 for
different RRC states that include Cell_DCH and Cell_FACH. Cell_PCH and URA_PCH
states are for further study. The test and verification procedures are
separately defined in Annex B.
## 4.6 2D position error
The 2D position error is defined by the horizontal difference in meters
between the ellipsoid point reported or calculated from the UE Measurement
Report and the actual position of the UE in the test case considered.
## 4.7 User equipment supporting multiple constellations
Minimum performance requirements are defined for each global GANSS
constellation (Galileo, Modernized GPS,GLONASS and BDS). UEs supporting
multiple global constellations shall meet the minimum performance requirements
for a combined scenario where each UE supported constellation is simulated.
NOTE: For test cases where signals from \"GPS\" and \"Modernized GPS\" are
included, \"GPS\" and \"Modernized GPS\" are considered as a single
constellation, unless otherwise specified.
## 4.8 User equipment supporting multiple signals
For UEs supporting multiple signals, different minimum performance
requirements may be associated with different signals. The satellite simulator
shall generate all signals supported by the UE. Signals not supported by the
UE do not need to be simulated. The relative power levels of each signal type
for each GNSS are defined in Table 4.8-1. The individual test scenarios in
clause 5 define the reference signal power level for each satellite. The power
level of each simulated satellite signal type shall be set to the reference
signal power level defined in each test scenario in clause 5 plus the relative
power level defined in Table 4.8-1.
Table 4.8-1: Relative signal power levels for each signal type for each GNSS
* * *
                                                           Galileo   GPS/Modernized GPS   GLONASS   QZSS      SBAS   BDS
Signal power levels relative to reference power levels E1 0 dB L1 C/A 0 dB G1
0 dB L1 C/A 0 dB L1 0 dB B1I D1 0 dB D2 +5 dB E6 +2 dB L1C +1.5 dB G2 -6 dB
L1C +1.5 dB  
E5 +2 dB L2C -1.5 dB L2C -1.5 dB  
L5 +3.6 dB L5 +3.6 dB
* * *
NOTE 1: For test cases which involve \"Modernized GPS\", the satellite
simulator shall also generate the GPS L1 C/A signal if the UE supports \"GPS\"
in addition to \"Modernized GPS\".
NOTE 2: The signal power levels in the Test Parameter Tables represent the
total signal power of the satellite per channel not e.g. pilot and data
channels separately.
NOTE 3: For test cases which involve \"BDS\", D1 represents MEO/IGSO
satellites B1I signal type and D2 represents GEO satellites B1I signal type.
# 5 A-GANSS minimum performance requirements
The A-GANSS minimum performance requirements are defined by assuming that all
relevant and valid assistance data is received by the UE in order to perform
GPS and GANSS measurements and/or position calculation. This clause does not
include nor consider delays occurring in the various signalling interfaces of
the network.
In the following subclauses the minimum performance requirements are based on
availability of the assistance data information and messages defined in
Annexes D and E.
The requirements in CELL_PCH and URA_PCH states are for further study.
## 5.1 Sensitivity
A sensitivity requirement is essential for verifying the performance of
A-GANSS receiver in weak satellite signal conditions. In order to test the
most stringent signal levels for the satellites the sensitivity test case is
performed in AWGN channel. This test case verifies the _performance of the
first position estimate, when the UE is provided with only coarse time
assistance and when it is additionally supplied with fine time assistance._
### 5.1.1 Coarse time assistance
In this test case 6 satellites are generated for the terminal. AWGN channel
model is used.
Table 5.1.1-1: Test parameters
* * *
System Parameters Unit Value Number of generated satellites per system - See
Table 5.1.1-2 Total number of generated satellites - 6 HDOP range 1.4 to 2.1
Propagation conditions - AWGN GANSS coarse time assistance error range seconds
±2 Galileo Reference high signal power level dBm -142 Reference low signal
power level dBm -147 GPS^(1)^ Reference high signal power level dBm -142
Reference low signal power level dBm -147 GLONASS Reference high signal power
level dBm -142 Reference low signal power level dBm -147 BDS Reference high
signal power level dBm -136 Reference low signal power level dBm -145 Note 1:
\"GPS\" here means GPS L1 C/A, Modernized GPS, or both, dependent on UE
capabilities.
* * *
Table 5.1.1-2: Power level and satellite allocation
* * *
                                                                                                                          **Satellite allocation for each constellation**                             
                                                                                                                          **GNSS-1^(1)^**                                   **GNSS-2**   **GNSS-3**
Single constellation High signal level 1 - - Low signal level 5 - - Dual
constellation High signal level 1 - - Low signal level 2 3 - Triple
constellation High signal level 1 - - Low signal level 1 2 2 Note 1: For GPS
capable receivers, GNSS-1, i.e. the system having the satellite with high
signal level, shall be GPS.
* * *
#### 5.1.1.1 Minimum requirements (coarse time assistance)
The position estimates shall meet the accuracy and response time specified in
table 5.1.1.1-1.
Table 5.1.1.1-1: Minimum requirements (coarse time assistance)
* * *
System Success rate 2-D position error Max response time All 95 % 100 m 20 s
* * *
### 5.1.2 Fine time assistance
This requirement is only valid for fine time assistance capable UEs. In this
requirement 6 satellites are generated for the terminal. AWGN channel model is
used.
Table 5.1.2-1: Test parameters
* * *
**System** **Parameters** **Unit** **Value** Number of generated satellites
per system - See Table 5.1.2-2 Total number of generated satellites - 6 HDOP
range 1.4 to 2.1 Propagation conditions - AWGN GANSS coarse time assistance
error range seconds ±2 GANSS fine time assistance error range μs ±10 Galileo
Reference signal power level dBm -147 GPS^(1)^ Reference signal power level
dBm -147 GLONASS Reference signal power level dBm -147 BDS Reference signal
power level dBm -147 Note 1: \"GPS\" here means GPS L1 C/A, Modernized GPS, or
both, dependent on UE capabilities.
* * *
Table 5.1.2-2: Satellite allocation
* * *
                         Satellite allocation for each constellation            
                         GNSS-1                                        GNSS-2   GNSS-3
Single constellation 6 - - Dual constellation 3 3 - Triple constellation 2 2 2
* * *
#### 5.1.2.1 Minimum requirements (fine time assistance)
The position estimates shall meet the accuracy and response time requirements
in table 5.1.2.1-1.
Table 5.1.2.1-1: Minimum requirements for fine time assistance capable
terminals
* * *
System Success rate 2-D position error Max response time All 95 % 100 m 20 s
* * *
## 5.2 Nominal accuracy
Nominal accuracy requirement verifies the accuracy of A-GANSS position
estimate in ideal conditions. The primarily aim of the test is to ensure good
accuracy for a position estimate when satellite signal conditions allow it.
This test case verifies the performance of the first _position estimate_.
In this requirement 6 satellites are generated for the terminal. If SBAS is to
be tested one additional satellite shall be generated. AWGN channel model is
used. The number of simulated satellites for each constellation is as defined
in table 5.2-2.
Table 5.2-1: Test parameters
+------------------+------------------+---------+-----------------+ | System | Parameters | Unit | Value | +------------------+------------------+---------+-----------------+ | | Number of | - | See Table 5.2-2 | | | generated | | | | | satellites per | | | | | system | | | +------------------+------------------+---------+-----------------+ | | Total number of | - | 6 or 7^(2)^ | | | generated | | | | | satellites | | | +------------------+------------------+---------+-----------------+ | | HDOP Range | - | 1.4 to 2.1 | +------------------+------------------+---------+-----------------+ | | Propagation | - | AWGN | | | conditions | | | +------------------+------------------+---------+-----------------+ | | GANSS coarse | seconds | ±2 | | | time assistance | | | | | error range | | | +------------------+------------------+---------+-----------------+ | GPS^(1)^ | Reference signal | dBm | -128.5 | | | power level for | | | | | all satellites | | | +------------------+------------------+---------+-----------------+ | Galileo | Reference signal | dBm | -127 | | | power level for | | | | | all satellites | | | +------------------+------------------+---------+-----------------+ | GLONASS | Reference signal | dBm | -131 | | | power level for | | | | | all satellites | | | +------------------+------------------+---------+-----------------+ | QZSS | Reference signal | dBm | -128.5 | | | power level for | | | | | all satellites | | | +------------------+------------------+---------+-----------------+ | SBAS | Reference signal | dBm | -131 | | | power level for | | | | | all satellites | | | +------------------+------------------+---------+-----------------+ | BDS | Reference signal | dBm | -133 | | | power level for | | | | | all satellites | | | +------------------+------------------+---------+-----------------+ | Note 1: \"GPS\" | | | | | here means GPS | | | | | L1 C/A, | | | | | Modernized GPS, | | | | | or both, | | | | | dependent on UE | | | | | capabilities. | | | | | | | | | | Note 2: 7 | | | | | satellites apply | | | | | only for SBAS | | | | | case. | | | | +------------------+------------------+---------+-----------------+
If QZSS is supported, one of the GPS satellites will be replaced by a QZSS
satellite with respective signal support.
If SBAS is supported, the SBAS satellite with the highest elevation will be
added to the scenario.
Table 5.2-2: Satellite allocation
* * *
                                                                               Satellite allocation for each constellation                               
                                                                               GNSS 1^(1)^                                   GNSS 2^(1)^   GNSS 3^(1)^   SBAS
Single constellation 6 -- -- 1 Dual constellation 3 3 -- 1 Triple
constellation 2 2 2 1 Note 1: GNSS refers to global systems i.e., GPS,
Galileo, GLONASS and BDS.
* * *
### 5.2.1 Minimum requirements (nominal accuracy)
The position estimates shall meet the accuracy and response time requirements
in table 5.2.1-1.
Table 5.2.1-1: Minimum requirements
* * *
System Success rate 2-D position error Max response time All 95 % 15 m 20 s
* * *
## 5.3 Dynamic range
The aim of a dynamic range requirement is to ensure that a GANSS receiver
performs well when visible satellites have rather different signal levels.
Strong satellites are likely to degrade the acquisition of weaker satellites
due to their cross‑correlation products. Hence, it is important in this test
case to keep use AWGN in order to avoid loosening the requirements due to
additional margin because of fading channels. This test case verifies the
_performance of the first position estimate._
In this requirement 6 satellites are generated for the terminal. Two different
reference power levels, denoted as \"high\" and \"low\" are used for each
GNSS. The allocation of \"high\" and \"low\" power level satellites depends on
the number of supported GNSSs and it is defined in Table 5.3-2. AWGN channel
model is used.
Table 5.3-1: Test parameters
* * *
System Parameters Unit Value Number of generated satellites per system - See
Table 5.3-2 Total number of generated satellites - 6 HDOP Range - 1.4 to 2.1
Propagation conditions - AWGN GANSS coarse time assistance error range seconds
±2 Galileo Reference high signal power level dBm -127.5 Reference low signal
power level dBm -147 GPS^(1)^ Reference high signal power level dBm -129
Reference low signal power level dBm -147 GLONASS Reference high signal power
level dBm -131.5 Reference low signal power level dBm -147 BDS Reference high
signal power level dBm -133.5 Reference low signal power level dBm -145 Note
1: \"GPS\" here means GPS L1 C/A, Modernized GPS, or both, dependent on UE
capabilities.
* * *
Table 5.3-2: Power level and satellite allocation
* * *
                                                                               Satellite allocation for each constellation                               
                                                                               GNSS 1^(1)^                                   GNSS 2^(1)^   GNSS 3^(1)^
Single constellation High signal level 2 -- -- Low signal level 4 -- -- Dual
constellation High signal level 1 1 -- Low signal level 2 2 -- Triple
constellation High signal level 1 1 1 Low signal level 1 1 1 Note 1: GNSS
refers to global systems i.e., GPS, Galileo, GLONASS and BDS.
* * *
### 5.3.1 Minimum requirements (dynamic range)
The position estimates shall meet the accuracy and response time requirements
in table 5.3.1-1.
Table 5.3.1-1: Minimum requirements
* * *
System Success rate 2-D position error Max response time All 95 % 100 m 20 s
* * *
## 5.4 Multi-path scenario
_The purpose of the test case is to_ verify the receiver\'s tolerance to
multipath while keeping the test setup simple. This test case verifies the
_performance of the first position estimate._
In this test 6 satellites are generated for the terminal. Some of the
satellites have a one tap channel representing the Line-Of-Sight (LOS) signal.
The other satellites have a two-tap channel, where the first tap represents
the LOS signal and the second represents a reflected and attenuated signal as
specified in Annex C.2. The number of satellites generated for each GNSS as
well as the channel model used depends on the number of systems supported by
the UE and is defined in table 5.4-2. The channel model as specified in Annex
C.2 further depends on the generated signal.
Table 5.4-1: Test parameter
* * *
**System** **Parameters** **Unit** **Value** Number of generated satellites
per system - See Table 5.4-2 Total number of generated satellites - 6 HDOP
range 1.4 to 2.1 Propagation conditions - AWGN GANSS coarse time assistance
error range seconds ±2 Galileo Reference signal power level dBm -127 GPS^(1)^
Reference signal power level dBm -128.5 GLONASS Reference signal power level
dBm -131 BDS Reference signal power level dBm -133 Note 1: \"GPS\" here means
GPS L1 C/A, Modernized GPS, or both, dependent on UE capabilities.
* * *
Table 5.4-2: Channel model allocation
* * *
                         Channel model allocation for each constellation                     
                         GNSS-1                                            GNSS-2   GNSS-3
Single constellation One-tap channel 2 -- -- Two-tap channel 4 -- -- Dual
constellation One-tap channel 1 1 -- Two-tap channel 2 2 -- Triple
constellation One-tap channel 1 1 1 Two-tap channel 1 1 1
* * *
### 5.4.1 Minimum requirements (multi-path scenario)
The position estimates shall meet the accuracy and response time requirements
in table 5.4.1-1.
Table 5.4.1-1: Minimum requirements
* * *
System Success rate 2-D position error Max response time All 95 % 100 m 20 s
* * *
## 5.5 Moving scenario and periodic update
_The purpose of the test case is to verify_ the receiver\'s capability to
produce GANSS measurements or location fixes on a regular basis, and to follow
when it is located in a vehicle that slows down, turns or accelerates. A good
tracking performance is essential for certain location services. A moving
scenario with periodic update is well suited for verifying the tracking
capabilities of an A-GANSS receiver in changing UE speed and direction. In the
requirement the UE moves on a rectangular trajectory, which imitates urban
streets. AWGN channel model is used. This test is not performed as a Time to
First Fix (TTFF) test.
In this requirement 6 satellites are generated for the terminal. The UE is
requested to use periodical reporting with a reporting interval of 2 seconds.
The UE moves on a rectangular trajectory of 940 m by 1440 m with rounded
corner defined in figure 5.5-1. The initial reference is first defined
followed by acceleration to final speed of 100 km/h in 250 m. The UE then
maintains the speed for 400 m. This is followed by deceleration to final speed
of 25 km/h in 250 m. The UE then turn 90 degrees with turning radius of 20 m
at 25 km/h. This is followed by acceleration to final speed of 100 km/h in 250
m. The sequence is repeated to complete the rectangle.
Table 5.5-1: Trajectory Parameters
* * *
Parameter Distance (m) Speed (km/h) l11, l15, l21, l25 20 25 l12, l14, l22,
l24 250 25 to 100 and 100 to 25 l13 400 100 l23 900 100
* * *
{width="4.266666666666667in" height="2.564583333333333in"}
Figure 5.5-1: Rectangular trajectory of the moving scenario and periodic
update test case
Table 5.5-2: Test Parameters
* * *
**System** **Parameters** **Unit** **Value** Number of generated satellites
per system - See Table 5.5-3 Total number of generated satellites - 6 HDOP
Range per system - 1.4 to 2.1 Propagation conditions - AWGN GANSS coarse time
assistance error range seconds ±2 Galileo Reference signal power level for all
satellites dBm -127 GPS^(1)^ Reference signal power level for all satellites
dBm -128.5 GLONASS Reference signal power level for all satellites dBm -131
BDS Reference signal power level for all satellites dBm -133 Note 1: \"GPS\"
here means GPS L1 C/A, Modernized GPS, or both, dependent on UE capabilities.
* * *
Table 5.5-3: Satellite allocation
* * *
                                                                               Satellite allocation for each constellation                 
                                                                               GNSS 1^(1)^                                   GNSS 2^(1)^   GNSS 3^(1)^
Single constellation 6 -- -- Dual constellation 3 3 -- Triple constellation 2
2 2 Note 1: GNSS refers to global systems i.e., GPS, Galileo, GLONASS and BDS.
* * *
### 5.5.1 Minimum requirements (moving scenario and periodic update)
The position estimates shall meet the accuracy requirement of table 5.5.1-1
with the periodical reporting interval defined in table 5.5.1-1 after the
first reported position estimates.
NOTE: In the actual testing the UE may report error messages until it has been
able to acquire GPS/GANSS measured results or a position estimate. The test
equipment shall only consider the first measurement report different from an
error message as the first position estimate in the requirement in table
5.5.1-1.
Table 5.5.1-1: Minimum requirements
* * *
System Success rate 2-D position error Periodical reporting interval All 95 %
50 m 2 s
* * *
###### ## Annex A (normative): Test cases
# A.1 Conformance tests
The conformance tests are specified in 3GPP TS 34.172 [12]. Statistical
interpretation of the requirements is described in clause A.2.
# A.2 Requirement classification for statistical testing
Requirements in the present document are either expressed as absolute
requirements with a single value stating the requirement, or expressed as a
success rate. There are no provisions for the statistical variations that will
occur when the parameter is tested.
Annex B lists the test parameters needed for the tests. The test will result
in an outcome of a test variable value for the DUT inside or outside the test
limit. Overall, the probability of a \"good\" DUT being inside the test
limit(s) and the probability of a \"bad\" DUT being outside the test limit(s)
should be as high as possible. For this reason, when selecting the test
variable and the test limit(s), the statistical nature of the test is
accounted for.
When testing a parameter with a statistical nature, a confidence level has to
be set. The confidence level establishes the probability that a DUT passing
the test actually meets the requirement and determines how many times a test
has to be repeated. The confidence levels are defined for the final tests in
3GPP TS 34.172 [12].
###### ## Annex B (normative): Test conditions
# B.1 General
This annex specifies the additional parameters that are needed for the test
cases specified in clause 5 and applies to all tests unless otherwise stated.
## B.1.1 Parameter values
Additionally, amongst all the listed parameters (see Annex E), the following
values for some important parameters are to be used in the measurement control
message.
Table B.1.1-1: Parameter values
* * *
Information element Value - TTFF tests (except nominal accuracy test) Value -
TTFF tests (nominal accuracy test) Value - Periodic tests Measurement
Reporting Mode Periodical reporting Periodical reporting Periodical reporting
Amount of reporting 1 1 Infinite (see Note) Reporting interval 20 000 ms 20
000 ms 2 000 ms Horizontal accuracy 51.2 m 7.7 m 24.5 m Vertical accuracy 102
m 102 m 102 m Note: Infinite means during the complete test time.
* * *
In the Sensitivity test case with Fine Time Assistance, the following
parameter values are used.
Table B.1.1-2: Parameters for fine time assistance test
* * *
Information element Value T~UTRAN-GPS~ drift rate 0 T~UTRAN-GANSS~ drift rate
0 UE Positioning GPS Reference Time Uncertainty 10.2 μs GANSS TOD Uncertainty
10.2 μs
* * *
## B.1.2 Time assistance
For every Test Instance in each TTFF test case, the GANSS/GPS Reference Time
shall have a random offset, relative to GANSS/GPS system time, within the
error range of Coarse Time Assistance defined in the test case. This offset
value shall have a uniform random distribution.
In addition, for every Fine Time Assistance Test Instance the IE UTRAN
GPS/GANSS timing of cell frames shall have a random offset, relative to the
true value of the relationship between the two time references, within the
error range of Fine Time Assistance defined in the test case. This offset
value shall have a uniform random distribution.
For the Moving Scenario and Periodic Update Test Case the GANSS/GPS Reference
Time shall be set to the nominal value.
## B.1.3 GANSS reference time
For every Test Instance in each TTFF test case, the GANSS reference time (and
GPS reference time, if applicable) shall be advanced so that, at the time the
fix is made, it is at least 2 minutes later than the previous fix.
## B.1.4 Reference and UE locations
There is no limitation on the selection of the reference location, consistent
with achieving the required HDOP for the Test Case. For each test instance the
reference location shall change sufficiently such that the UE shall have to
use the new assistance data. The uncertainty of the semi-major axis is 3 km.
The uncertainty of the semi-minor axis is 3 km. The orientation of major axis
is 0 degrees. The uncertainty of the altitude information is 500 m. The
confidence factor is 68 %.
For every Test Instance in each TTFF test case, the UE location shall be
randomly selected to be within 3 km of the Reference Location. The Altitude of
the UE shall be randomly selected between 0 m to 500 m above WGS‑84 reference
ellipsoid. These values shall have uniform random distributions.
For test cases which include satellites from regional systems, such as QZSS
and SBAS, the reference location shall be selected within the defined coverage
area of the systems.
## B.1.5 Satellite constellation and assistance data
The satellite constellation shall consist of 24 satellites for GLONASS; 27
satellites for GPS, Modernized GPS and Galileo; 3 satellites for QZSS; 2
satellites for SBAS and 35 satellites for BDS (5 GEO, 27 MEO, 3 IGSO). Almanac
assistance data shall be available for all these satellites. At least 7 of the
satellites per GPS, Modernized GPS, Galileo, GLONASS and BDS constellation
shall be visible to the UE (that is, above 15 degrees elevation with respect
to the UE). At least 1 of the satellites for QZSS shall be within 15 degrees
of zenith; and at least 1 of the satellites for SBAS shall be visible to the
UE. For BDS with reference location in Asia, at least 1 of the visible
satellites shall be a GEO (above 15 degrees elevation with respect to the UE).
All other satellite specific assistance data shall be available for all
visible satellites. In each test, signals are generated for only 6 satellites
(or 7 if SBAS is included). The HDOP for the test shall be calculated using
these satellites. The simulated satellites for GPS, Modernized GPS, Galileo,
GLONASS and BDS shall be selected from the visible satellites for each
constellation consistent with achieving the required HDOP for the test. For
BDS with reference location in Asia, 1 of the simulated satellites shall be a
GEO.
NOTE: Currently up to 30 BDS satellites (maximum 22 MEO) can be supported.
## B.1.6 Atmospheric delay
Typical Ionospheric and Tropospheric delays shall be simulated and the
corresponding values inserted into the Ionospheric Model IEs.
## B.1.7 Sensors
The minimum performance requirements shall be met without the use of any data
coming from sensors that can aid the positioning.
## B.1.8 Information elements
The information elements that are available to the UE in all the test cases
are listed in Annex E.
## B.1.9 GNSS signals
The GNSS signal is defined at the A-GNSS antenna connector of the UE. For UE
with integral antenna only, a reference antenna with a gain of 0 dBi is
assumed.
## B.1.10 RESET UE POSITIONING STORED INFORMATION Message
In order to ensure each Test Instance in each TTFF test is performed under
Time to First Fix (TTFF) conditions, a dedicated test signal (_RESET UE
POSITIONING STORED INFORMATION_) defined in TS 34.109 [13] clause 5.4 shall be
used.
When the UE receives the \'_RESET UE POSITIONING STORED INFORMATION_ \'
signal, with the IE _UE POSITIONING TECHNOLOGY_ set to _AGNSS_ it shall:
\- discard any internally stored GPS and GANSS reference time, reference
location, and any other aiding data obtained or derived during the previous
test instance (e.g. expected ranges and Doppler);
\- accept or request a new set of reference time or reference location or
other required information, as in a TTFF condition;
\- calculate the position or perform GNSS measurements using the \'new\'
reference time or reference location or other information.
## B.1.11 GNSS system time offsets
If more than one GNSS is used in a test, the accuracy of the GNSS-GNSS Time
Offsets used at the system simulator shall be better than 3 ns.
###### ## Annex C (normative): Propagation conditions
# C.1 Static propagation conditions
The propagation for the static performance measurement is an Additive White
Gaussian Noise (AWGN) environment. No fading and multi-paths exist for this
propagation model.
# C.2 Multi-path case
Doppler frequency difference between direct and reflected signal paths is
applied to the carrier and code frequencies. The Carrier and Code Doppler
frequencies of LOS and multi-path for GANSS signals are defined in table
C.2-1.
Table C.2-1: Multipath case
* * *
Initial Relative Delay\ Carrier Doppler frequency of tap [Hz] Code Doppler
frequency of tap [Hz] Relative mean Power [dB] [m]
0 Fd Fd / N 0
X Fd-0.1 (Fd-0.1) /N Y
Note: Discrete Doppler frequency is used for each tap.
* * *
Where the X and Y depends on the GNSS signal type and is shown in table C.2-2,
and N is the ratio between the transmitted carrier frequency of the signals
and the transmitted chip rate as shown in table C.2-3 (where k in table C.2-3
is the GLONASS frequency channel number).
Table C.2-2: Relative Delay and Attenuation of Non Line of Sight Signals
* * *
System Signals X [m] Y [dB] Galileo E1 125 -4.5 E5a 15 -6 E5b 15 -6
GPS/Modernized GPS L1 C/A 150 -6 L1C 125 -4.5 L2C 150 -6 L5 15 -6 GLONASS G1
275 -12.5 G2 275 -12.5 BDS B1I 75 -4.5
* * *
Table C.2-3: Ratio between the transmitted carrier frequency of the signals
and the transmitted chip rate
* * *
System Signals N Galileo E1 1540 E5a 115 E5b 118 GPS/Modernized GPS L1 C/A
1540 L1C 1540 L2C 1200 L5 115 GLONASS G1 3135.03 + k ⋅ 1.10 G2 2438.36 + k ⋅
0.86 BDS B1I 763
* * *
The initial carrier phase difference between taps shall be randomly selected
between 0 and 2π. The initial value shall have uniform random distribution.
###### ## Annex D (normative): Measurement sequence chart
# D.1 General
The measurement Sequence Charts that are required in all the test cases, are
defined in this clause.
# D.2 TTFF measurement sequence chart
The measurement sequence chart for the TTFF test cases, for both UE-assisted
and UE-based GANSS, is defined in this subclause.
Figure D.2-1: Measurement Sequence Chart for the TTFF Test Cases
(a) The system simulator sends a RESET UE POSITIONING STORED INFORMATION
message with the IE _UE POSITIONING TECHNOLOGY_ set to _AGNSS._
(b) The system simulator sends a RRC MEASUREMENT CONTROL message without
assistance data including the following information elements:\ \ _MEASUREMENT
COMMAND_ Setup\ CHOICE _MEASUREMENT TYPE_ UE positioning measurement\ UE
POSITIONING REPORTING QUANTITY\ >Method Type set to either \'UE assisted\' or
\'UE based\', dependent on the test case;\ >Positioning Methods set to
\'GPS\';\ >Horizontal Accuracy as defined in Annex B;\ >Vertical Accuracy as
defined in Annex B;\ >Additional Assistance Data Request TRUE\ >GANSS
Positioning Methods set according to the UE capabilities and test case;\
MEASUREMENT VALIDITY\ >UE state All states\ CHOICE REPORTING CRITERIA
Periodical reporting criteria\ >Amount of reporting 1 (see Annex B);\
>Reporting interval 20 seconds (see Annex B);
(c) The UE responds with a RRC MEASUREMENT REPORT message including the _UE
POSITIONING ERROR_ IE with \'Error Reason\' set to \'Assistance data
missing\', and including a request for additional GPS and/or GANSS assistance
data.
(d) -- (e) The system simulator provides the requested assistance data that
are available as defined in Annex E in one or more RRC MEASUREMENT CONTROL
messages with MEASUREMENT COMMAND IE set to \'modify\' and the CHOICE
REPORTING CRITERIA set to \'no reporting\' in all but the last RRC MEASUREMENT
CONTROL message. The last RRC MEASUREMENT CONTROL message which is required to
deliver the entire set of requested assistance data in step (c) includes the
CHOICE REPORTING CRITERIA set to \'Periodical reporting criteria\' as defined
in step (b).
(f) The UE sends a RRC MEASUREMENT REPORT message including the IE UE
POSITIONING MEASURED RESULTS with UE POSITIONING POSITION ESTIMATE INFO
present in case of UE-based, or UE POSITIONING GPS MEASURED RESULTS and/or UE
POSITIONING GANSS MEASURED RESULTS present in case of UE-assisted GANSS.
Steps (a) to (f) are repeated for each test instance.
# D.3 Periodic update measurement sequence chart
The measurement sequence chart for the Moving Scenario and Periodic Update
test case, for both UE-assisted and UE-based GANSS, is defined in this
subclause.
Figure D.3-1: Measurement Sequence Chart for the Moving Scenario and Periodic
Update Test Case
(a) The system simulator sends a RESET UE POSITIONING STORED INFORMATION
message with the IE _UE POSITIONING TECHNOLOGY_ set to _AGNSS._
(b) The system simulator sends a RRC MEASUREMENT CONTROL message without
assistance data including the following information elements:\ \ _MEASUREMENT
COMMAND_ Setup\ CHOICE _MEASUREMENT TYPE_ UE positioning measurement\ UE
POSITIONING REPORTING QUANTITY\ >Method Type set to either \'UE assisted\' or
\'UE based\', dependent on the test case;\ >Positioning Methods set to
\'GPS\';\ >Horizontal Accuracy as defined in Annex B;\ >Vertical Accuracy as
defined in Annex B;\ >Additional Assistance Data Request TRUE\ >GANSS
Positioning Methods set according to the UE capabilities and test case;\
MEASUREMENT VALIDITY\ >UE state All states\ CHOICE REPORTING CRITERIA
Periodical reporting criteria\ >Amount of reporting infinite (see Annex B);\
>Reporting interval 2 seconds (see Annex B);
(c) The UE responds with a RRC MEASUREMENT REPORT message including the _UE
POSITIONING ERROR_ IE with \'Error Reason\' set to \'Assistance data
missing\', and including a request for additional GPS and/or GANSS assistance
data.
(d) -- (e) The system simulator provides the requested assistance data that
are available as defined in Annex E in one or more RRC MEASUREMENT CONTROL
messages with MEASUREMENT COMMAND IE set to \'modify\' and the CHOICE
REPORTING CRITERIA set to \'no reporting\' in all but the last RRC MEASUREMENT
CONTROL message. The last RRC MEASUREMENT CONTROL message which is required to
deliver the entire set of requested assistance data in step (c) includes the
CHOICE REPORTING CRITERIA set to \'Periodical reporting criteria\' as defined
in step (b).
(f) The UE sends a RRC MEASUREMENT REPORT message including the IE UE
POSITIONING MEASURED RESULTS with UE POSITIONING POSITION ESTIMATE INFO
present in case of UE-based, or UE POSITIONING GPS MEASURED RESULTS and/or UE
POSITIONING GANSS MEASURED RESULTS present in case of UE-assisted GANSS.
(g) -- (i) The UE continues to provide RRC MEASUREMENT REPORT messages as in
step (g) until the moving trajectory has been completed.
NOTE: The UE may report error messages at step (f) until it has been able to
acquire GNSS signals.
###### ## Annex E (normative): Assistance data required for testing
# E.1 Introduction
This annex defines the assistance data IEs available at the SS in all test
cases. The assistance data shall be given for satellites as defined in B.1.5.
The information elements are given with reference to 3GPP TS 25.331 [14],
where the details are defined.
# E.2 GPS assistance data
The GPS L1 C/A assistance data are as defined in 3GPP TS 25.171 [10], Annex E.
# E.3 GANSS assistance data
**a) UE Positioning GANSS Reference Time IE.** This information element is
defined in subclause 10.3.7.96o of 3GPP TS 25.331 [14].
Table E.3-1: GANSS reference time IE
* * *
Name of the IE Fields of the IE All tests except Sensitivity Fine Time
Assistance Sensitivity Fine Time Assistance test UE Positioning GANSS
Reference Time  
GANSS Day Yes Yes GANSS TOD Yes Yes GANSS TOD Uncertainty Yes Yes GANSS Time
ID Yes Yes UTRAN GANSS Reference Time  
>UTRAN GANSS Timing of Cell Frames Yes >CHOICE mode Yes >>FDD Yes >>>Primary
CPICH Info Yes >SFN Yes T~UTRAN-GANSS~ Drift Rate Yes
* * *
**b) UE Positioning GANSS Reference UE Position IE.** This information element
is defined in subclause 10.3.8.4c of 3GPP TS 25.331 [14].
Table E.3-2: GANSS reference location IE
* * *
Name of the IE Fields of the IE UE Positioning GANSS Reference UE Position
Ellipsoid point with Altitude and uncertainty ellipsoid
* * *
**c) UE Positioning GANSS Ionospheric Model IE.** This information element is
defined in subclause 10.3.7.92a of 3GPP TS 25.331 [14].
Table E.3-3: GANSS ionospheric model IE
* * *
Name of the IE Fields of the IE UE Positioning GANSS Ionospheric Model
* * *
**d) UE Positioning GANSS Additional Ionospheric Model IE.** This information
element is defined in subclause 10.3.7.92b of 3GPP TS 25.331 [14].
Table E.3-4: GANSS additional ionospheric model IE
* * *
Name of the IE Fields of the IE UE Positioning GANSS Additional Ionospheric
Model
* * *
**e) UE Positioning GANSS Time Model IE.** This information element **is only
required for multi system tests** , and is defined in subclause 10.3.7.97a of
3GPP TS 25.331 [14].
Table E.3-5: GANSS time model IE
+---------------------------------+-------------------------------------+ | Name of the IE | Fields of the IE | +---------------------------------+-------------------------------------+ | UE Positioning GANSS Time Model | | +---------------------------------+-------------------------------------+ | | GNSS_TOD_ID | | | | | | For each GNSS included in the test. | +---------------------------------+-------------------------------------+
**f) UE Positioning GANSS Navigation Model IE.** This information element is
defined in subclause 10.3.7.94a of 3GPP TS 25.331 [14].
Table E.3-6: GANSS navigation model IE
* * *
Name of the IE Fields of the IE UE Positioning GANSS Navigation Model
* * *
**g) UE Positioning GANSS Additional Navigation Models IE.** This information
element is defined in subclause 10.3.7.94b of 3GPP TS 25.331 [14].
Table E.3-7: GANSS navigation model IE
* * *
Name of the IE Fields of the IE UE Positioning GANSS Navigation Model
* * *
Table E.3-8: GANSS clock and orbit model choices
* * *
GANSS Clock and Orbit Model Choice Galileo Model-1 Modernized GPS Model-3
GLONASS Model-4 QZSS QZS-L1 Model-2 QZSS QZS-L1C/L2C/L5 Model-3 SBAS Model-5
BDS Model-6
* * *
**h) UE Positioning GANSS Reference Measurement Information IE.** This
information element is defined in subclause 10.3.7.88b of 3GPP TS 25.331 [14].
Table E.3-9: GANSS reference measurement information IE
* * *
Name of the IE Fields of the IE UE Positioning GANSS Reference Measurement
Information  
SatID Doppler (0^th^ order term) Doppler (1^st^ order term) Doppler
Uncertainty Code Phase Integer Code Phase Code Phase Search Window Azimuth
Elevation
* * *
**i) UE Positioning GANSS Almanac IE.** This information element is defined in
subclause 10.3.7.89a of 3GPP TS 25.331 [14].
Table E.3-10: GANSS almanac model IE
* * *
Name of the IE Fields of the IE UE Positioning GANSS Almanac
* * *
Table E.3-11: GANSS almanac choices
* * *
GANSS Almanac Model Choice Galileo Model-1 Modernized GPS Model-3,4 GLONASS
Model-5 QZSS QZS-L1 Model-2 QZSS QZS-L1C/L2C/L5 Model-3,4 SBAS Model-6 BDS
Model-7
* * *
**j) UE Positioning GANSS UTC Model IE.** This information element is defined
in subclause 10.3.7.97c of 3GPP TS 25.331 [14].
Table E.3-12: GANSS UTC model IE
* * *
Name of the IE Fields of the IE UE Positioning GANSS UTC Model
* * *
**k) UE Positioning GANSS Additional UTC Models IE.** This information element
is defined in subclause 10.3.7.97d of 3GPP TS 25.331 [14].
Table E.3-13: GANSS additional UTC model IE
* * *
Name of the IE Fields of the IE UE Positioning GANSS Additional UTC Models IE
* * *
Table E.3-14: GANSS UTC model choices
* * *
GANSS UTC Model Choice Galileo UE Positioning GANSS UTC Model Modernized GPS
Model-1 GLONASS Model-2 QZSS QZS-L1 UE Positioning GANSS UTC Model QZSS
QZS-L1C/L2C/L5 Model-1 SBAS Model-3 BDS Model-4
* * *
**l) UE Positioning GANSS Auxiliary Information IE.** This information element
is defined in subclause 10.3.7.97f of 3GPP TS 25.331 [14].
Table E.3-15: GANSS auxiliary information IE
* * *
Name of the IE Fields of the IE UE Positioning GANSS Auxiliary Information IE
* * *
###### ## Annex F (normative): Converting UE-assisted measurement reports into
position estimates
# F.1 Introduction
To convert the UE measurement reports in case of UE-assisted mode of A-GANSS
into position errors, a transformation between the \"measurement domain\"
(code-phases, etc.) into the \"state\" domain (position estimate) is
necessary. Such a transformation procedure is outlined in the following
clauses. The details can be found in [3], [4], [5], [6], [7], [8], [9], [16]
and [17].
# F.2 UE measurement reports
In case of UE-assisted A-GANSS, the measurement parameters are contained in
the RRC UE POSITIONING GANSS MEASURED RESULTS IE (subclause 10.3.7.93a in 3GPP
TS 25.331 [14]). In case the UE provides also measurements on the GPS L1 C/A
signal, the measurement parameters are contained in the RRC UE POSITIONING GPS
MEASURED RESULTS IE (subclause 10.3.7.93 in 3GPP TS 25.331 [14]). The
measurement parameters required for calculating the UE position are:
1) Reference Time: The UE has two choices for the Reference Time:
a) \"UE GANSS Timing of Cell Frames\" and/or \"UE GPS Timing of Cell Frames\";
b) \"GANSS TOD msec\" and/or \"GPS TOW msec\" if GPS L1 C/A signal
measurements are also provided.
NOTE: It is not expected that an UE will ever report both a GANSS TOD and a
GPS TOW. However if two time stamps are provided and they derive from
different user times, be aware that no compensation is made for this
difference and this could affect the location accuracy.
2) Measurement Parameters for each GANSS and GANSS Signal: 1 to
\:
a) \"Satellite ID\"; mapping according to table 10.3.7.88b in 3GPP TS 25.331
[14];
b) \"GANSS Code Phase\";
c) \"GANSS Integer Code Phase\";
d) \"GANSS Integer Code Phase Extension\";
e) \"Code Phase RMS Error\";
3) Additional Measurement Parameters in case of GPS L1 C/A signal measurements
are also provided: 1 to \:
a) \"Satellite ID (SV PRN)\";
b) \"Whole GPS chips\";
c) \"Fractional GPS Chips\";
d) \"Pseudorange RMS Error\".
Additional information required at the system simulator:
1) \"UE Positioning GANSS Reference UE Position\" or \"UE Positioning GPS
Reference UE Position\" (subclause 10.3.8.4c in 3GPP TS 25.331 [14]):\ Used
for initial approximate receiver coordinates.
2) \"UE Positioning GANSS Navigation Model\" and \"UE Positioning GANSS
Additional Navigation Models\" (subclauses 10.3.7.94a and 10.3.7.94b in 3GPP
TS 25.331 [14]):\ Contains the ephemeris and clock correction parameters as
specified in the relevant ICD of each supported GANSS; used for calculating
the satellite positions and clock corrections.
3) \"UE Positioning GANSS Ionospheric Model\" (subclause 10.3.7.92a in 3GPP TS
25.331 [14]):\ Contains the ionospheric parameters which allow the single
frequency user to utilize the ionospheric model as specified in [7] for
computation of the ionospheric delay.
4) \"UE Positioning GANSS Additional Ionospheric Model\" (subclause 10.3.7.92b
in 3GPP TS 25.331 [14]):\ Contains the ionospheric parameters which allow the
single frequency user to utilize the ionospheric model as specified in [6] for
computation of the ionospheric delay.
5) \"UE Positioning GANSS Time Model\" (subclause 10.3.7.97a in 3GPP TS 25.331
[14]):\ Contains the GNSS-GNSS Time Offset for each supported GANSS. Note,
that \"UE Positioning GANSS Time Model\" IE contains only the sub-ms part of
the offset. Any potential integer seconds offset may be obtained from \"UE
Positioning GPS UTC Model\" (subclause 10.3.7.97 in 3GPP TS 25.331 [14]), \"UE
Positioning GANSS UTC Model\" (subclause 10.3.7.97c in 3GPP TS 25.331 [14]),
or \"UE Positioning GANSS Additional UTC Models\" (subclause 10.3.7.97d in
3GPP TS 25.331 [14]).
6) \"UE Positioning GPS Navigation Model\" (subclause 10.3.7.94 in 3GPP TS
25.331 [14]):\ Contains the GPS ephemeris and clock correction parameters as
specified in [3]; used for calculating the GPS satellite positions and clock
corrections in case of GPS L1 C/A signal measurements are the only GPS
measurements provided in addition to GANSS measurements.
7) \"UE Positioning GPS Ionospheric Model\" (subclause 10.3.7.92 in 3GPP TS
25.331 [14]):\ Contains the ionospheric parameters which allow the single
frequency user to utilize the ionospheric model as specified in [3] for
computation of the ionospheric delay.
# F.3 Weighted Least Squares (WLS) position solution
The WLS position solution problem is concerned with the task of solving for
four unknowns; _xu, yu, zu_ the receiver coordinates in a suitable frame of
reference (usually ECEF) and _bu_ the receiver clock bias relative to the
selected GNSS specific system time. It typically requires the following steps:
**Step 1: Formation of pseudo-ranges**
The observation of code phase reported by the UE for each satellite SVi is
related to the pseudo-range/_c_ modulo the \"GANSS Code Phase Ambiguity\", or
modulo 1 ms (the length of the C/A code period) in case of GPS L1 C/A signal
measurements. For the formation of pseudo-ranges, the integer number of
milliseconds to be added to each code-phase measurement has to be determined
first. Since 1 ms corresponds to a travelled distance of 300 km, the number of
integer ms can be found with the help of reference location and satellite
ephemeris. The distance between the reference location and each satellite SVi
at the time of measurement is calculated, and the integer number of
milliseconds to be added to the UE code phase measurements is obtained.
**Step 2: Correction of pseudo-ranges for the GNSS-GNSS time offsets**
In case the UE reports measurements for more than a single GNSS, the pseudo-
ranges are corrected for the time offsets between the GNSSs relative to the
selected reference time using the GNSS-GNSS time offsets available at the
system simulator:
$\rho_{\text{GNSS}_{m},i} \equiv \rho_{\text{GNSS}_{m},i} - c \cdot
(t_{\text{GNSS}_{k}} - t_{\text{GNSS}_{m}})$,
where $\rho_{\text{GNSS}_{m},i}$is the measured pseudo-range of satellite _i_
of GNSS~m~. The system time $t_{\text{GNSS}_{k}}$of GNSS~k~ is the reference
time frame, and$(t_{\text{GNSS}_{k}} - t_{\text{GNSS}_{m}})$is the available
GNSS-GNSS time offset, and _c_ is the speed of light.
**Step 3: Formation of weighting matrix**
The UE reported \"Code Phase RMS Error\" and/or \"Pseudorange RMS Error\"
values are used to calculate the weighting matrix for the WLS algorithm
described in [16]. According to 3GPP TS 25.331 [14], the encoding for these
fields is a 6 bit value that consists of a 3 bit mantissa, Xi and a 3 bit
exponent, Yi for each SVi of GNSS~j~:
$w_{\text{GNSS}_{j},i} = \text{RMSError} = 0\text{.}5 \times \left( 1 +
\frac{X_{i}}{8} \right)2^{Y_{i}}$
The weighting Matrix **W** is defined as a diagonal matrix containing the
estimated variances calculated from the \"Code Phase RMS Error\" and/or
\"Pseudorange RMS Error\" values:
$W = \text{diag}\left{
\frac{1}{w_{\text{GNSS}_{1},1}^{2}},\frac{1}{w_{\text{GNSS}_{1},2}^{2}},\cdots,\frac{1}{w_{\text{GNSS}_{1},n}^{2}},\cdots,\frac{1}{w_{\text{GNSS}_{m},1}^{2}},\frac{1}{w_{\text{GNSS}_{m},2}^{2}},\cdots,\frac{1}{w_{\text{GNSS}_{m},l}^{2}}
\right}$
**Step 4: WLS position solution**
The WLS position solution is described in e.g., [16] and usually requires the
following steps:
1) Computation of satellite locations at time of transmission using the
ephemeris parameters and user algorithms defined in the relevant ICD of the
particular GNSS. The satellite locations are transformed into WGS-84 reference
frame, if needed.
2) Computation of clock correction parameters using the parameters and
algorithms as defined in the relevant ICD of the particular GNSS.
3) Computation of atmospheric delay corrections using the parameters and
algorithms defined in the relevant ICD of the particular GNSS for the
ionospheric delay, and using the Gupta model defined in [17] p. 121 equation
(2) for the tropospheric delay. For GNSSs which do not natively provide
ionospheric correction models (e.g., GLONASS), the ionospheric delay is
determined using the available ionospheric model (see subclause F.2) adapted
to the particular GNSS frequency.
4) The WLS position solution starts with an initial estimate of the user state
(position and clock offset). The Reference Location is used as initial
position estimate. The following steps are required:
a) Calculate geometric range (corrected for Earth rotation) between initial
location estimate and each satellite included in the UE measurement report.
b) Predict pseudo-ranges for each measurement including clock and atmospheric
biases as calculated in 1) to 3) above and defined in the relevant ICD of the
particular GNSS and [16].
c) Calculate difference between predicted and measured pseudo-ranges
$\text{Δρ}$.
d) Calculate the \"Geometry Matrix\" **G** as defined in [16]:
$G \equiv \begin{bmatrix} \- {\hat{1}}_{\text{GNSS}_{1},1}^{T} & 1 \ \-
{\hat{1}}_{\text{GNSS}_{1},2}^{T} & 1 \ \vdots & \vdots \ \-
{\hat{1}}_{\text{GNSS}_{1},n}^{T} & 1 \ \vdots & \vdots \ \-
{\hat{1}}_{\text{GNSS}_{m},1}^{T} & 1 \ \- {\hat{1}}_{\text{GNSS}_{m},2}^{T} &
1 \ \vdots & \vdots \ \- {\hat{1}}_{\text{GNSS}_{m},l}^{T} & 1 \
\end{bmatrix}$ with ${\hat{1}}_{\text{GNSS}_{m},i} \equiv
\frac{r_{s_{\text{GNSS}_{m},i}} - {\hat{r}}_{u}}{\left|
r_{s_{\text{GNSS}_{m},i}} - {\hat{r}}_{u} \right|}$ where **r** s~GNSS _m,i_ ~
is the satellite position vector for SVi of GNSS _~m~_ (calculated in 1)
above), and ${\hat{r}}_{u}$is the estimate of the user location.
e) Calculate the WLS solution according to [16]:
$\Delta\hat{x} = \left( G^{T}\text{WG} \right)^{- 1}G^{T}\text{WΔρ}$
f) Adding the $\Delta\hat{x}$to the initial state estimate gives an improved
estimate of the state vector:
$\hat{x} \rightarrow \hat{x} + \Delta\hat{x}$.
5) This new state vector $\hat{x}$can be used as new initial estimate and the
procedure is repeated until the change in $\hat{x}$is sufficiently small.
**Step 5: Transformation from Cartesian coordinate system to Geodetic
coordinate system**
The state vector $\hat{x}$ calculated in Step 4 contains the UE position in
ECEF Cartesian coordinates together with the UE receiver clock bias relative
to the selected GNSS system time. Only the user position is of further
interest. It is usually desirable to convert from ECEF coordinates _xu, yu,
zu_ to geodetic latitude ϕ , longitude λ and altitude _h_ on the WGS84
reference ellipsoid.
**Step 6: Calculation of \"2-D Position Errors\"**
The latitude ϕ / longitude λ obtained after Step 5 is used to calculate the
2-D position error.
#