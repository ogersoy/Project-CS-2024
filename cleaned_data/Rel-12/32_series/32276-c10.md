# Foreword
This Technical Specification has been produced by the 3^rd^ Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document is part of a series of documents that specify charging
functionality and charging management in GSM/UMTS networks. The GSM/UMTS core
network charging architecture and principles are specified in TS 32.240 [1],
which provides an umbrella for other charging management TSs that specify:
\- the content of the Charging Data Records (CDRs) per domain / subsystem /
service (offline charging);
\- the content of real-time charging messages per domain / subsystem / service
(online charging);
\- the functionality of online and offline charging for those domains /
subsystems / services;
\- the interfaces that are used in the charging framework to transfer the
charging information (i.e. CDRs or charging events).
The complete document structure for these TSs is defined in TS 32.240 [1].
The present document specifies the online charging description for Voice Call
Service (VCS) charging from a Proxy Function, based on the functional
description of the Voice Call Service charging in the EU Roaming Regulations
III specifications [298, 299].
The concept of voice call is interpreted as any CS call, whatever the
teleservice used (speech, 3.1 kHz audio, Fax, or CS data) except CS video
telephony calls (BS 37, 64 kbit/s unrestricted digital info mode).
Voice over LTE is not included in this definition. This charging specification
includes the online charging architecture and scenarios specific to VCS
charging from a Proxy Function, as well as the mapping of the common 3GPP
charging architecture specified in TS 32.240 [1] onto VCS. It further
specifies the charging events for online charging. The present document is
related to other 3GPP charging TSs as follows:
\- The common 3GPP charging architecture is specified in TS 32.240 [1];
\- The 3GPP Diameter application that is used for VCS online charging is
specified in TS 32.299 [50].
Offline charging for the VCS is solely based on TS 32.250 [10] and is outside
the scope of the present document.
All references, abbreviations, definitions, descriptions, principles and
requirements, used in the present document, that are common across 3GPP TSs,
are defined in TR 21.905 [100] \"Vocabulary for 3GPP Specifications\".
Those that are common across charging management in GSM/UMTS domains, services
or subsystems are provided in the umbrella document TS 32.240 [1] and are
copied into clause 3 of the present document for ease of reading. Finally,
those items that are specific to the present document are defined exclusively
in the present document.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TS 32.240: \"Telecommunication management; Charging management;
Charging Architecture and Principles\".
[2]-[9] Void.
[10] 3GPP TS 32.250: \"Telecommunication management; Charging management;
Circuit Switched (CS) domain charging\".
[11] 3GPP TS 32.251: \"Telecommunication management; Charging management;
Packet Switched (PS) domain charging\".
[12]-[19] Void.
[20] 3GPP TS 32.260: \"Telecommunication management; Charging management; IP
Multimedia Subsystem (IMS) charging\".
[21]-[29] Void.
[30] 3GPP TS 32.270: \"Telecommunication management; Charging management;
Multimedia Messaging Service (MMS) charging\".
[31]-[49] Void.
[50] 3GPP TS 32.299: \"Telecommunication management; Charging management;
Diameter charging application\".
[51]-[55] Void.
[56] 3GPP TS 32.293: \"Telecommunication management; Charging management;
Proxy Function\".
[57]-[99] Void.
[100] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[101] Void.
[102] Void.
[103] 3GPP TS 23.002: \"Network Architecture\".
[104]-[199] Void.
[200]-[206] Void.
[207] 3GPP TS 23.078: \"Customized Applications for Mobile network Enhanced
Logic (CAMEL); Stage 2\".
[208]-[211] Void.
[212] 3GPP TS 29.078: \"Customized Applications for Mobile network Enhanced
Logic (CAMEL); CAMEL Application Part (CAP) specification\".
[213]-[233] Void.
[234] 3GPP TS 29.163: \"Interworking between the IP Multimedia (IM) Core
Network (CN) subsystem and Circuit Switched (CS) networks\".
[232]-[297] Void.
[298] EU Roaming regulation III; Structural Solutions; High Level Technical
Specifications
[299] EU Roaming regulation III; Interface & Protocol; Detailed Technical
Specifications
[300]-[399] Void.
[400]-[499] Void.
[500]-[599] Void.
# 3 Definitions, symbols and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
TR 21.905 [100] and the following apply. A term defined in the present
document takes precedence over the definition of the same term, if any, in TR
21.905 [100].
**CAMEL:** network feature that provides the mechanisms to support operator
specific services even when roaming outside HPLMN.
**CAMEL subscription information:** identifies a subscriber as having CAMEL
services.
**chargeable event:** activity utilizing telecommunication network resources
and related services for:
\- user to user communication (e.g. a single call, a data communication
session or a short message); or
\- user to network communication (e.g. service profile administration); or
\- inter-network communication (e.g. transferring calls, signalling, or short
messages); or
\- mobility (e.g. roaming or inter-system handover); and
\- that the network operator may want to charge for.
As a minimum, a chargeable event characterises the resource / service usage
and indicates the identity of the involved end user(s).
**charged party:** user involved in a chargeable event who has to pay parts or
the whole charges of the chargeable event, or a third party paying the charges
caused by one or all users involved in the chargeable event, or a network
operator.
**charging:** function within the telecommunications network and the
associated OCS/BD components whereby information related to a chargeable event
is collected, formatted, transferred and evaluated in order to make it
possible to determine usage for which the charged party may be billed (offline
charging) or the subscriber's account balance may be debited (online
charging).
**charging event:** set of charging information forwarded by the CTF towards
the CDF (offline charging) or towards the OCS (online charging). Each charging
event matches exactly one chargeable event.
**charging function:** entity inside the core network domain, subsystem or
service that is involved in charging for that domain, subsystem or service.
**Circuit Switched (CS) domain:** domain within GSM / UMTS in which
information is transferred in circuit switched mode.
**credit control:** mechanism which directly interacts in real-time with an
account and controls or monitors the charges, related to the service usage.
Credit control is a process of: checking if credit is available, credit
reservation, deduction of credit from the end user account when service is
completed and refunding of reserved credit not used.
**domain:** part of a communication network that provides network resources
using a certain bearer technology.
**GSM only:** qualifier indicating that this clause or paragraph applies only
to a GSM system. For multi-system cases this is determined by the current
serving radio access network.
**in GSM,...:** qualifier indicating that this paragraph applies only to GSM
System.
**in UMTS,...:** qualifier indicating that this paragraph applies only to UMTS
System.
**\"middle tier\" (charging) TS:** term used for the 3GPP charging TSs that
specify the domain / subsystem / service specific, online and offline,
charging functionality. These are all the TSs in the numbering range from TS
32.250 to TS 32.279, e.g. TS 32.250 [10] for the CS domain, or TS 32.270 [30]
for the MMS service. Currently, there is only one \"tier 1\" TS in 3GPP, which
is TS 32.240 [1] that specifies the charging architecture and principles.
Finally, there are a number of top tier TSs in the 32.29x numbering range
([50] ff) that specify common charging aspects such as parameter definitions,
encoding rules, the common billing domain interface or common charging
applications.
**online charging:** charging mechanism where charging information **can**
affect, in real-time, the service rendered and therefore a direct interaction
of the charging mechanism with bearer/session/service control is required.
**Online Charging System:** the entity that performs real-time credit control.
Its functionality includes transaction handling, rating, online correlation
and management of subscriber account balances.
**real-time:** real-time charging and billing information is to be generated,
processed, and transported to a desired conclusion in less than 1 second.
**successful call:** connection that reaches the communication or data
transfer phase e.g. the \"answered\" state for speech connections. All other
connection attempts are regarded as unsuccessful.
**tariff period:** part of one (calendar) day during which a particular tariff
is applied. Defined by the time at which the period commences (the switch-over
time) and the tariff to be applied after switch-over.
**tariff:** set of parameters defining the network utilisation charges for the
use of a particular bearer / session / service.
**UMTS only:** qualifier indicating that this clause or paragraph applies only
to a UMTS system. For multi-system cases this is determined by the current
serving radio access network.
**voice call:** any CircuitSwitched call, whatever the teleservice used
(speech, 3.1 kHz audio, Fax, or CS data) except CS video telephony calls (BS
37, 64 kbit/s unrestricted digital info mode). Voice over LTE is not included
in this definition.
## 3.2 Symbols
For the purposes of the present document, the following symbols apply:
B Interface between a VLR and its associated MSC(s).
C Interface between an HLR and an MSC.
CAP Reference point for CAMEL between a network element with integrated SSF
and the OCS.
D Interface between an HLR and a VLR.
Ge Reference point between a gprsSSF and a gsmSCF.
Gr Interface between an SGSN and an HLR.
Ro Online charging reference point between a Proxy Function and the OCS.
## 3.3 Abbreviations
For the purposes of the present document, the abbreviations given in TR 21.905
[100] and the following apply. An abbreviation defined in the present document
takes precedence over the definition of the same abbreviation, if any, in TR
21.905 [100].
3GPP 3^rd^ Generation Partnership Project
CAMEL Customized Applications for Mobile network Enhanced Logic
CAP CAMEL Application Part
CCA Credit Control Answer
CCR Credit Control Request
CS Circuit Switched
CTF Charging Trigger Function
DCCA Diameter Credit Control Application
DP Detection Point
EU European Union
GMSC Gateway MSC
gsmSCF GSM Service Control Function
gsmSRF GSM Specialized Resource Function
gsmSSF GSM Service Switching Function
GSM Global System for Mobile communication
HLR Home Location Register
HPLMN Home PLMN
IMSI International Mobile Subscriber Identity
ISDN Integrated Services Digital Network
MF Mobile Forwarded
MO Mobile Originated
MS Mobile Station
MSC Mobile services Switching Centre
MSISDN Mobile Station ISDN number
MT Mobile Terminated
OCS Online Charging System
PLMN Public Land Mobile Network
UMTS Universal Mobile Telecommunications System
VCS Voice Call Service
VLR Visitor Location Register
# 4 Architecture considerations
## 4.1 High level Voice Call Service (VCS) architecture
The high level 3G logical architecture in TS 23.002 [103] is used for CS
domain charging as in TS 32.250 [10]. Figure 4.1.1 shows the CAMEL entities as
described in TS 23.002 [103]. Refer to TS 23.002 [103] for a description of
the reference points not covered in the present document.
NOTE: Most CAMEL-specific interfaces have no particular name. They are
designated by the name of the two entities they link together, e.g. \"the
gsmSSF-gsmSCF interface\".
NOTE: The bold lines are used for interfaces supporting user data only, the
dashed lines are used for interfaces supporting signalling only.
Figure 4.1.1: Configuration of CAMEL entities
CS domain online charging is implemented by CAMEL techniques as described in
TS 23.078 [207] and TS 29.078 [212], i.e. outside the scope of the 32 series
of charging TSs.
## 4.2 VCS charging - Offline charging architecture
Not specified in the present document.
## 4.3 VCS charging - Online charging architecture
As an alternative to direct CAMEL-based online charging of subscribers for
voice calls, an online charging interface between a voice Proxy Function and
the OCS is established. The concept of voice call shall be interpreted as any
CS call, whatever the teleservice used (speech, 3.1 kHz audio, Fax, or CS
data) except CS video telephony calls (BS 37, 64 kbit/s unrestricted digital
info mode). The voice control architecture is shown in Figure 4.3.1.
Figure 4.3.1: VCS from a Proxy Function online charging architecture
The signalling between the CS domain elements and a voice Proxy Function is
implemented by CAMEL techniques as described in TS 23.078 [207] and TS 29.078
[212], i.e. outside the scope of the 32 series of charging TSs. The interface
between a voice Proxy Function and the OCS utilizes Diameter Ro for the voice
call service online charging as specified in the present document and utilizes
the Proxy Function for mapping between CAMEL and Diameter as specified in TS
32.293 [56].
# 5 VCS charging principles and scenarios
## 5.1 VCS charging principles
The charging functions specified for VCS charging relate to:
\- mobile originating calls;
\- mobile terminating calls;
\- mobile forwarded calls.
## 5.2 VCS charging - Offline charging scenarios
### 5.2.1 Basic principles
Not specified in the present document.
### 5.2.2 Rf message flows
Not specified in the present document.
### 5.2.3 CDR generation
Not specified in the present document.
### 5.2.4 Ga record transfer flows
Not specified in the present document.
### 5.2.5 Bx CDR file transfer
Not specified in the present document.
## 5.3 VCS charging - Online charging scenarios
### 5.3.1 Basic principles
VCS online charging may be performed by the Proxy Function using the common
_Debit / Reserve Units_ operation specified in TS 32.299 [50]. The Proxy
Function shall be able to perform online charging for the following:
\- charging information related to voice calls;
Session based online charging (SCUR) with centralized rating and centralized
unit determination is required in the Proxy Function. The _Debit/ Reserve
Units Request_ and _Debit / Reserve Units Response_ messages are specified for
SCUR in TS 32.299 [50]. The _Debit / Reserve Units Request_ messages are
issued towards the OCS when certain conditions (chargeable events) are met and
_Debit / Reserve Units Response_ messages are received from the OCS in
response. The VCS charging specific contents and purpose of each of these
messages, as well as the chargeable events that trigger them, are described in
the following subclauses. A detailed formal description of the online charging
parameters defined in the present document can be found in TS 32.299 [50].
Further information on the general principles of the common 3GPP online
charging application can also be found in TS 32.299 [50] and TS 32.240 [1].
Since an operator is able to determine if charging is started at three
different points in the progress of a voice call: call attempt, called party
alerting, or called party answer, a configuration option is defined in the
Proxy Function for this determination. On the Diameter interface, as defined
below, the OCS is contacted on call attempt. This allows the OCS to identify
the user account status and authorize (or not) the voice call attempt prior to
utilizing network resources to transport the call. At this time, a quota is
also requested. The Proxy Function starts depleting the quota at the
configured point progress of the call. The time this occurs is stored as the
start of charging time delivered in the next update _Debit / Reserve Units
Request_ message to the OCS.
The following chargeable events are defined for VCS charging:
\- Voice call attempt. Upon encountering this event, an initial _Debit /
Reserve Units Request_ message, indicating the start of the voice call, is
sent towards the OCS to authorize the voice call attempt. The Proxy Function
requests quota for voice call, setting the service-identifier to the value
representing the type of voice call to be charged. Depending on operator
configuration, the Proxy Function shall begin quota deduction and store the
current time as start of charging time.
\- Voice call answered. No message is sent. Depending on operator
configuration, the Proxy Function shall begin quota deduction and save the
current time as start of charging time.
\- Voice call not answered -- MO/MF only (e.g., busy, no answer, not
reachable, route select failure). Upon encountering this event, corresponding
counts for the voice call are closed and a terminate _Debit / Reserve Units
Request_ message, indicating the end of the voice call, is triggered. If the
operator configuration has indicated that charging has started prior to
answer, the start of charging time is provided with the used service units.
\- Voice call not answered and call is conditionally forwarded -- MT only
(e.g., call forwarding on not reachable). Corresponding counts for the voice
call are closed and an update _Debit / Reserve Units Request_ message is
triggered. If the operator configuration has indicated that charging has
started prior to answer, the start of charging time is provided with the used
service units. The subsequent response indicates if charging for terminating
leg is to be maintained.
\- Voice call not answered and call is not conditionally forwarded -- MT only
(e.g., busy, no answer, not reachable, route select failure). Upon
encountering this event, corresponding counts for the voice call are closed
and a termination _Debit / Reserve Units Request_ message, indicating the end
of the voice call, is triggered. If the operator configuration has indicated
that charging has started prior to answer, the start of charging time is
provided with the used service units.
\- End of voice call. Upon encountering this event, a terminate _Debit /
Reserve Units Request_ message, indicating the end of the voice call, is sent
towards the OCS together with the final counts. The start of charging time is
provided with the used service units.
\- Ro specific chargeable events (e.g. threshold reached, quota exhaustion,
validity time reached, forced re-authorization). Corresponding counts for the
voice call are closed and an update _Debit / Reserve Units Request_ message is
triggered according the rules defined in TS 32.299 [50].
\- Change of charging condition: E.g. user location change. When this event is
encountered and the corresponding re-authorization trigger is armed, all
current counts are captured and sent towards the OCS with an update _Debit and
Reserve Units Request_ message.
Editors's note: The encounter of this event in conjunction with the ability of
the Trigger AVP is ffs.
\- Tariff time change. When this event is encountered, all current counts are
captured and a new counts are started. The counts are sent to the OCS in next
_Debit and Reserve Units Request_ message.
Management intervention may also force trigger a chargeable event.
The OCS online charging function may use the Furnish Charging Information
procedure to add online charging session specific information to the CDR
generated by the MSC as currently supported for CAMEL as specified in TS
23.078 [207]
In case the OCS fails, the Proxy Function shall support the Failure Handling
procedure and Failover mechanism described in TS 32.299 [50]. These mechanisms
give flexibility to have different failure handling scenarios when the OCS
fails.
Three different actions shall be supported when the failure handling mechanism
is executed:
\- Terminate: The online session is finished. The associated voice call is
terminated (answered calls) or not established (new calls). Failover for
ongoing voice calls is not supported. Failover for new voice calls is always
supported.
\- Retry&Terminate: The online session is finished. The associated voice call
is terminated (answered calls) or not established (new calls). Failover for
ongoing voice calls is supported. Failover for new voice calls is always
supported.
\- Continue: The online session is finished. The associated voice call is
established (new calls) or not terminated (ongoing calls). Failover for
ongoing voice calls is supported. Failover for new voice calls is always
supported. It shall be operator configurable to limit the maximum duration of
the voice call in this situation.
The OCS may request session re-authorization of active quota.
The OCS may request service termination synchronously in response to a
_Reserve Units Request_ or asynchronously via Diameter Abort-Session-Request.
In either case, the voice Proxy Function shall initiate termination of the
voice call using CAMEL procedures, as specified in TS 23.078 [207].
The OCS may specify a termination action, as per TS 32.299 [50] clause 5.3.3
and clause 6.5.3, for the voice Proxy Function on consumption of the final
granted units. The only action supported is TERMINATE.
The following capabilities defined in TS 32.299 [50] are not applicable to VCS
charging:
\- Credit pooling
\- Envelope reporting
\- Online control of offline charging information
\- Support of multiple service
NOTE: The Multiple Operation and Multiple Unit Operation information elements
are utilized as per Table 6.2.2.1. Only one service is supported per VCS
charging session.
### 5.3.2 Ro message flows
#### 5.3.2.1 Ro messages
An initial, update and terminate _Debit and Reserve Units Request_ message, as
defined in TS 32.299 [50], is used by the Proxy Function to transfer the
collected charging information towards the OCS. The _Debit and Reserve Units
Response_ message is used by the OCS to assign quotas for the service
identifier, and to instruct the Proxy Function whether to continue or
terminate a voice call.
The following clauses describe the trigger conditions for the chargeable
events described in clause 5.3.1. These chargeable events correspond to the
triggers for collection of charging information and _Debit and Reserve Units
Request message_ transmission towards the OCS. The responses from the OCS are
also specified in the clauses below.
#### 5.3.2.2 Triggers for starting and stopping a VCS credit control session
A initial _Debit and Reserve Units Request_ is sent to OCS when a voice call
is attempted.
A terminate _Debit and Reserve Units Request_ is sent to OCS when:
\- voice call is not answered (MO/MF)
\- voice call not answered and not conditionally forwarded (MT)
\- voice call is terminated
\- voice call termination is indicated by the OCS (e.g. Credit Limit Reached)
\- Abort-Session-Request is received from the OCS, this also results in voice
call termination.
#### 5.3.2.3 Triggers for providing interim information for a VCS credit
control session
An update _Debit / Reserve Units Request_ is sent to OCS when:
\- Voice call not answered and call is conditionally forwarded (MT) ;
\- Granted quota runs out;
\- Validity time for granted quota expires;
\- Update is requested by the OCS;
\- Change of charging conditions occur and according to re-authorisation
trigger, re-authorisation is needed;
\- Management intervention.
#### 5.3.2.4 Furnish Charging Information procedure
The OCS online charging function may use this procedure to add online charging
session specific information to the CDR maintained by the originating MSC by
means of the _Debit and Reserve Units Request_ operation. The Furnish Charging
Information can be sent either in one _Debit and Reserve Units Response_
message or several _Debit and Reserve Units Response_ messages with append
indicator.
The OCS online charging function can send multiple concatenated Furnish
Charging Information elements per online charging session.
The total maximum of free format data Furnish Charging Information is 160
octets.
#### 5.3.2.5 Support of Failure Situations
In case the OCS fails the Proxy Function must support the Failure Handling
procedure and Failover mechanism described in TS 32.299 [50].
According to TS 32.299 [50], timer Tx determines the maximum interval the
Proxy Function shall wait for an answer to each credit control request sent to
the OCS. When Tx expires, Proxy Function shall execute the Failover and
Failure Handling mechanisms according to the behaviour described in TS 32.299
[50].
Three different actions shall be supported when the failure handling mechanism
is executed:
\- Terminate: The online session is finished. The associated voice call is
terminated (answered calls) or not established (new calls). Failover for
ongoing voice calls is not supported. Failover for new voice calls is always
supported.
\- Retry&Terminate: The online session is finished. The associated voice call
is terminated (answered calls) or not established (new calls). Failover for
ongoing voice calls is supported. Failover for new voice calls is always
supported.
\- Continue: The online session is finished. The associated voice call is
established (new calls) or not terminated (ongoing calls). Failover for
ongoing voice calls is supported. Failover for new voice calls is always
supported. It shall be operator configurable to limit the maximum duration of
the voice call in this situation.
# 6 Definition of charging information
## 6.1 Data description for VCS charging - Offline charging
### 6.1.1 Rf message contents
Not specified in the present document.
### 6.1.2 Ga message contents
Not specified in the present document.
### 6.1.3 CDR description on the Bx interface
Not specified in the present document.
## 6.2 Data description for VCS charging - Online charging
### 6.2.1 Ro message contents
Voice call service online charging uses the _Debit Units and Reserve Units_
operation defined in TS 32.299 [50]. The _Debit and Reserve Units Request
message_ triggers the rating of the voice call service and reserves units on
the user\'s account. The _Debit and Reserve Units Response_ message is a
response including any reserved units or an error code if the user is out of
credit. Detailed information about the diameter online charging application is
described in TS 32.299 [50].
The _Debit and Reserve Units Request_ message for the \"intermediate
interrogation\" and \"final interrogation\" reports the actual number of
\"units\" that were used, from what was previously reserved. This determines
the actual amount debited from the subscriber\'s account.
The following clauses describe the different fields used in the VCS charging
messages.
Table 6.2.1.1 describes the use of these messages for online charging.
Table 6.2.1.1: Online charging messages reference table
* * *
Message Source Destination  
Debit and Reserve Units Request Proxy Function OCS  
Debit and Reserve Units Response OCS Proxy Function
* * *
#### 6.2.2 Debit / Reserve Units Request message
Table 6.2.2.1 illustrates the basic structure of a _Debit / Reserve Units
Request_ message from the Proxy Function as used for voice call service online
charging.
Table 6.2.2.1: _Debit / Reserve Units Request_ message contents
+----------------------------+----------+----------------------------+ | Information Element | Category | Description | +----------------------------+----------+----------------------------+ | Session Identifier | M | Used as described in TS | | | | 32.299 [50]. | +----------------------------+----------+----------------------------+ | Originator Host | M | Used as described in TS | | | | 32.299 [50]. | +----------------------------+----------+----------------------------+ | Originator Domain | M | Used as described in TS | | | | 32.299 [50]. | +----------------------------+----------+----------------------------+ | Destination Domain | M | Used as described in TS | | | | 32.299 [50]. | +----------------------------+----------+----------------------------+ | Operation Identifier | M | Used as described in TS | | | | 32.299 [50]. | +----------------------------+----------+----------------------------+ | Operation Token | M | Used as described in TS | | | | 32.299 [50]. | +----------------------------+----------+----------------------------+ | Operation Type | M | Used as described in TS | | | | 32.299 [50]. | +----------------------------+----------+----------------------------+ | Operation Number | M | Used as described in TS | | | | 32.299 [50]. | +----------------------------+----------+----------------------------+ | Destination Host | OC | Used as described in TS | | | | 32.299 [50]. | +----------------------------+----------+----------------------------+ | User Name | OC | Used as described in TS | | | | 32.299 [50]. | +----------------------------+----------+----------------------------+ | Origination State | OC | Used as described in TS | | | | 32.299 [50]. | +----------------------------+----------+----------------------------+ | Origination Timestamp | OC | Used as described in TS | | | | 32.299 [50]. | +----------------------------+----------+----------------------------+ | Subscriber Identifier | OC | Used as described in TS | | | | 32.299 [50]. | | | | | | | | As a minimum the MSISDN | | | | and IMSI shall be | | | | included. | +----------------------------+----------+----------------------------+ | Termination Cause | OC | Used as described in TS | | | | 32.299 [50]. | +----------------------------+----------+----------------------------+ | ~~Requested Action~~ | ~~-~~ | Not used for VCS charging. | +----------------------------+----------+----------------------------+ | Multiple Operation | OM | Used as described in TS | | | | 32.299 [50]. | +----------------------------+----------+----------------------------+ | Multiple Unit Operation | OC | Used as described in TS | | | | 32.299 [50]. | +----------------------------+----------+----------------------------+ | Subscriber Equipment | OC | Used as described in TS | | Number | | 32.299 [50]. | +----------------------------+----------+----------------------------+ | Proxy Information | OC | Used as described in TS | | | | 32.299 [50]. | +----------------------------+----------+----------------------------+ | Route Information | OC | Used as described in TS | | | | 32.299 [50]. | +----------------------------+----------+----------------------------+ | Service Information | OM | Described in clause | | | | 6.3.1.1 | +----------------------------+----------+----------------------------+
#### 6.2.3 Debit / Reserve Units Response message
Table 6.2.3.1 illustrates the basic structure of a Debit / Reserve Units
Response message as used for the Proxy Function as used for voice call service
online charging. This message is always used by the OCS as specified below.
Table 6.2.3.1: Debit / Reserve Units Response message
* * *
Information Element Category Description Session Identifier M Used as
described in TS 32.299 [50]. Operation Result M Used as described in TS 32.299
[50]. Originator Host M Used as described in TS 32.299 [50]. Originator Domain
M Used as described in TS 32.299 [50]. Operation Identifier M Used as
described in TS 32.299 [50]. Operation Type M Used as described in TS 32.299
[50]. Operation Number M Used as described in TS 32.299 [50]. Operation
Failover OC Used as described in TS 32.299 [50]. Multiple Unit Operation OC
Used as described in TS 32.299 [50]. Operation Failure Action OC Used as
described in TS 32.299 [50]. Operation Event Failure Action - Not used for VCS
charging. Redirection Host OC Used as described in TS 32.299 [50]. Redirection
Host Usage OC Used as described in TS 32.299 [50]. Redirection Cache Time OC
Used as described in TS 32.299 [50]. Proxy Information OC Used as described in
TS 32.299 [50]. Route Information OC Used as described in TS 32.299 [50].
Failed Parameter OC Used as described in TS 32.299 [50]. Service Information
OC Described in in clause 6.3.1.1.
* * *
## 6.3 VCS charging specific parameters
### 6.3.1 Definition of VCS charging information
#### 6.3.1.1 VCS charging information assignment for Service Information
The VCS information element used for voice call service charging is provided
in the Service Information information element.
Table 6.3.1.1.1: Service Information used for VCS charging
+-------------------------+----------+----------------------------+ | Information Element | Category | Description | +-------------------------+----------+----------------------------+ | Service Information | OM | A set of information | | | | elements holding the | | | | specific parameters as | | | | defined in TS 32.299 | | | | [50]. | +-------------------------+----------+----------------------------+ | IMS Information | OC | This is a structured | | | | information element and | | | | holds IMS specific | | | | parameters. The complete | | | | structure is defined in TS | | | | 32.260 [20]. | +-------------------------+----------+----------------------------+ | Node Functionality | M | This information element | | | | contains the function of | | | | the node: i.e. | | | | "Proxy-Function". | +-------------------------+----------+----------------------------+ | Role Of Node | O~M~ | This information element | | | | specifies whether the | | | | Proxy Function is serving | | | | an Originating (MO) call, | | | | a Terminating (MT) call, | | | | or an Forwarding (MF) | | | | call. | +-------------------------+----------+----------------------------+ | Calling Party Address | OM | This information element | | | | contains the Calling Part | | | | Number converted from the | | | | CS domain to a Tel or SIP | | | | URI as per TS | | | | 29.163 [234] for the | | | | P-Asserted-Identity | | | | header. | | | | | | | | NOTE: The address | | | | presentation restriction | | | | indication would be | | | | utilized for the | | | | transformation as per TS | | | | 29.163 [234] but would | | | | not be included directly | | | | for charging purposes as | | | | this is not currently | | | | utilized for CS domain or | | | | IMS charging. | +-------------------------+----------+----------------------------+ | Called Party Address | OC | This information element | | | | contains the Called Party | | | | Number converted from the | | | | CS domain to a Tel or SIP | | | | URI as per TS | | | | 29.163 [234] for the | | | | Request-URI. For an MO | | | | call, this IE contains the | | | | Called Party Number after | | | | processing by the Proxy | | | | Function (e.g., number | | | | normalization). It is | | | | included only when | | | | different from the | | | | contents of the Requested | | | | Party Address IE. | +-------------------------+----------+----------------------------+ | Requested Party Address | OC | This information element | | | | contains the Called Party | | | | BCD Number converted from | | | | the CS domain to a Tel or | | | | SIP URI as per TS | | | | 29.163 [234] for the | | | | Request-URI. This IE is | | | | included only for an MO | | | | call. | +-------------------------+----------+----------------------------+ | Service Specific Info | OC | This field contains | | | | service specific data. | +-------------------------+----------+----------------------------+ | PS Information | O~C~ | This is a structured | | | | information element and | | | | holds PS specific | | | | parameters. The complete | | | | structure is defined in TS | | | | 32.251 [11]. | +-------------------------+----------+----------------------------+ | User Location Info | OC | Used based on the | | | | definition in TS 32.251 | | | | [11]. | +-------------------------+----------+----------------------------+ | MS TimeZone | OC | Used based on the | | | | definition in TS 32.251 | | | | [11]. | +-------------------------+----------+----------------------------+ | User Location Info Time | OC | Used based on the | | | | definition in TS 32.251 | | | | [11]. | +-------------------------+----------+----------------------------+ | VCS Information | OM | A set of information | | | | element holding the VCS | | | | parameters. The details | | | | are defined in clause | | | | 6.3.1.2. | +-------------------------+----------+----------------------------+
#### 6.3.1.2 Definition of the VCS information
VCS specific charging information is provided within the VCS Information.
Table 6.3.1.2.1: Structure of the VCS Information
* * *
Information Element Category Description Bearer Capability OC This IE
indicates the type of the bearer capability connection to the user. This IE
includes several fields: info transfer capability, coding standard, info
transfer rates, transfer mode, establishment configuration, structure, user
info layer 1 protocol, layer 1 identity, user rate, negotiation, sync/async,
flow control, and several others. Network Call Reference Number OM This IE
gives the network call reference number assigned to the call by the GMSC/MSC.
It must be combined with the identity of the MSC that allocated it in order to
unambiguously identify the call. MSC Address OM This IE identifies the
international E.164 address of the MSC that generated the network call
reference number. Basic Service Code OC This IE indicates the type of basic
service utilized. This can be either a bearer service or a teleservice. Bearer
Service OC This IE indicates the bearer service utilized. Teleservice OC This
IE indicates the teleservice utilized. ISUP Location Number OC This IE
indicates the location number of the served user. It containsan E.164 number
as transported in ISUP. VLR Number OC This IE identifies the international
E.164 address of the VLR serving the user. Forwarding Pending OC This IE
indicates that the MSC received a forwarded-to-number and that the call will
be forwarded due to GSM supplementary service call forwarding in the GMSC.
This is applicable to MT calls only. ISUP Cause OC This IE indicates the
reason the call was released. Call Start Time OC This IE contains the initial
time at the MSC initiating the dialog. Start of Charging OC This IE contains
the time origin for charging and may be equivalent to the time call setup is
initiated or the time the call is answered depending on configuration in the
Voice Proxy. It is only sent when call setup is successful. Call Stop Time OC
This IE contains the time when the call is released. Free Format Data OC This
IE contains online charging specific information that is to be included in
CDRs generated by the MSC.
* * *
Table 6.3.1.2.2: Structure of the Multiple Unit Operation for VCS
* * *
Information Element Category Description Granted Service Unit OC This IE
contains the amount of granted service units for a particular category. Tariff
Time Change OC This IE contains the switch time when the tariff will be
changed. CC Time OC This IE contains the amount of granted time. CC Money -
Not used in VCS. CC Total Octets - Not used in VCS. CC Input Octets - Not used
in VCS CC Output Octets - Not used in VCS CC Service Specific Units - Not used
in VCS. Requested Service Unit OC This IE contains an indication that units
are needed for a particular category. CC Time - Not used in VCS. CC Total
Octets - Not used in VCS. CC Input Octets - Not used in VCS CC Output Octets -
Not used in VCS CC Service Specific Units - Not used in VCS. Used Service Unit
OC This IE contains the amount of used non-monetary service units measured for
a particular category to a particular quota type. Reporting Reason OC Used as
defined in TS 32.299 [50], clause 7.2. Tariff Change Usage OC This IE
identifies the reporting period for the used service unit, i.e. before, after
or during tariff change. CC Time OC This IE contains the amount of used time.
CC Total Octets - Not used in VCS. CC Input Octets - Not used in VCS CC Output
Octets - Not used in VCS CC Service Specific Units - Not used in VCS. Event
Charging Time Stamp - Not used in VCS. Service Identifier OC This IE contains
identity of the used service. This ID with the Service-Context-ID together
forms an unique identification of the service. Rating Group OC This IE
contains the identifier of a rating group. G-S-U Pool Reference - Not used in
VCS Validity Time OC This IE contains the time in order to limit the validity
of the granted quota for a given category instance. Result Code - Not used in
VCS. Final Unit Indication OC This IE indicates that the Granted Service Unit
contains the final units for the service as defined in TS 32.299 [50]. Final
Unit Action M Used as defined in TS 32.299 [50], Restriction Filter Rule - Not
used in VCS. Filter Id - Not used in VCS. Redirect Server - Not used in VCS.
Redirect Address Type - Not used in VCS. Redirect Server Address - Not used in
VCS. Time Quota Threshold - Not used in VCS. Volume Quota Threshold - Not used
in VCS. Unit Quota Threshold - Not used in VCS. Quota Holding Time - Not used
in VCS. Quota Consumption Time - Not used in VCS. Reporting Reason OC Used as
defined in TS 32.299 [50], clause 7.2. Trigger - Not used in VCS. PS Furnish
Charging Information - Not used in VCS. Refund Information Not used in VCS. AF
Correlation Information - Not used in VCS. Envelope - Not used in VCS. Envelop
Reporting - Not used in VCS. Time Quota Mechanism - Not used in VCS. Service
Specific Info - Not used in VCS. QoS Information - Not used in VCS.
* * *
#### 6.3.1.3 Support of Charging Information in VCS offline charging
Not specified in the present document.
#### 6.3.1.4 Support of Charging Information in VCS online charging
Table 6.3.1.4.1 specifies per Operation type, the charging data that are sent
by the Proxy Function in the _Debit / Reserve Units Request message_ for the
different call types MO, MT, and MF.
Table 6.3.1.4.1: Supported fields in _Debit / Reserve Units Request_ message
* * *
Information Element Node Type Proxy Function  
Call Type MO MT MF Supported Operation Types I/U/T I/U/T I/U/T Session
Identifier IUT IUT IUT  
Originator Host IUT IUT IUT  
Originator Domain IUT IUT IUT  
Destination Domain IUT IUT IUT  
Operator Identifier IUT IUT IUT  
Operation Token IUT IUT IUT  
Operation Type IUT IUT IUT  
Operation Number IUT IUT IUT  
Destination Host IUT IUT IUT  
User Name IUT IUT IUT  
Origination State IUT IUT IUT  
Origination Timestamp IUT IUT IUT  
Subscriber Identifier IUT IUT IUT  
Termination Cause --T --T --T  
Requested Action - - -  
Multiple Operation IUT IUT IUT  
Multiple Unit Operation IUT IUT IUT  
Subscriber Equipment Number IUT IUT IUT  
Proxy Information IUT IUT IUT  
Route Information IUT IUT IUT  
Service Information IUT IUT IUT  
**Service Information with IMS Information**  
Node Functionality IUT IUT IUT  
Role of Node IUT IUT IUT  
Calling Party Address IUT IUT IUT  
Called Party Address IUT IUT IUT  
Requested Party Address IUT - -  
Service Specific Info IUT IUT IUT  
**Service Information with PS Information**  
User Location Info IUT IUT IUT  
MS TimeZone IUT IUT IUT  
User Location Info Time IUT IUT IUT  
Service Information with VCS Information  
Bearer Capability IUT IUT IUT  
Network Call Reference Number IUT IUT IUT  
MSC Address IUT IUT IUT  
Basic Service Code IUT IUT IUT  
ISUP Location Number IUT IUT IUT  
VLR Number IUT IUT IUT  
Forwarding Pending - IUT -  
ISUP Cause --T --T --T  
Call Start Time IUT IUT IUT  
Start of Charging IUT IUT IUT  
Call Stop Time --T --T --T  
Free Format Data - - -  
**Multiple Unit Operation**  
Granted Service Unit - - -  
Requested Service Unit IU- IU- IU-  
CC Time - - -  
CC Total Octets - - -  
CC Input Octets - - -  
CC Output Octets - - -  
CC Service Specific Units - - -  
Used Service Unit -UT -UT -UT  
Reporting Reason -UT -UT -UT  
Tariff Change Usage -UT -UT -UT  
CC Time -UT -UT -UT  
CC Total Octets - - -  
CC Input Octets - - -  
CC Output Octets - - -  
CC Service Specific Units - - -  
Event Charging Time Stamp - - -  
Service Identifier IUT IUT IUT  
Rating Group IUT IUT IUT  
G-S-U Pool Reference - - -  
Validity Time - - -  
Result Code - - -  
Final Unit Indication - - -  
Final Unit Action - - -  
Restriction Filter Rule - - -  
Filter Id - - -  
Redirect Server - - -  
Redirect Address Type - - -  
Redirect Server Address - - -  
Time Quota Threshold - - -  
Volume Quota Threshold - - -  
Unit Quota Threshold - - -  
Quota Holding Time - - -  
Quota Consumption Time - - -  
Reporting Reason -UT -UT -UT  
Trigger - - -  
PS Furnish Charging Information - - -  
Refund Information - - -  
AF Correlation Information - - -  
Envelope - - -  
Envelop Reporting - - -  
Time Quota Mechanism - - -  
Service Specific Info --- --- ---  
QoS Information - - -
* * *
Table 6.3.1.4.2 specifies per Operation type, the charging data that are sent
in the _Debit / Reserve Units Response message_ for the different call types
MO, MT, and MF.
Table 6.3.1.4.2: Supported fields in _Debit / Reserve Units Response_ message
* * *
Information Element Node Type Proxy Function Proxy Function Proxy Function
Call Type MO MT MF Supported Operation Types I/U/T I/U/T I/U/T Session
Identifier IUT IUT IUT  
Operation Result IUT IUT IUT  
Originator Host IUT IUT IUT  
Originator Domain IUT IUT IUT  
Operation Identifier IUT IUT IUT  
Operation Type IUT IUT IUT  
Operation Number IUT IUT IUT  
Operation Failover IUT IUT IUT  
Multiple Unit Operation IUT IUT IUT  
Operation Failure Action IUT IUT IUT  
Operation Event Failure Action - - -  
Redirection Host IUT IUT IUT  
Redirection Host Usage IUT IUT IUT  
Redirection Cache Time IUT IUT IUT  
Proxy Information IUT IUT IUT  
Route Information IUT IUT IUT  
Failure Parameter IUT IUT IUT  
Service Information IUT IUT IUT  
**Service Information with IMS Information**  
Node Functionality - - -  
Role of Node - - -  
Calling Party Address - - -  
Called Party Address - - -  
Requested Party Address - - -  
Service Specific Info - - -  
**Service Information with PS Information**  
User Location Info - - -  
MS TimeZone - - -  
User Location Info Time - - -  
Service Information with VCS Information  
Bearer Capability - - -  
Network Call Reference Number - - -  
MSC Address - - -  
Basic Service Code - - -  
ISUP Location Number - - -  
VLR Number - - -  
Forwarding Pending - - -  
ISUP Cause - - -  
Call Start Time - - -  
Start of Charging - - -  
Call Stop Time - - -  
Free Format Data IUT IUT IUT  
**Multiple Unit Operation**  
Granted Service Unit IU- IU- IU-  
Tariff Time Change IU- IU- IU-  
CC Time IU- IU- IU-  
CC Total Octets - - -  
CC Input Octets - - -  
CC Output Octets - - -  
CC Service Specific Units - - -  
Requested Service Unit - - -  
Used Service Unit - - -  
Service Identifier IU- IU- IU-  
Rating Group IU- IU- IU-  
G-S-U Pool Reference - - -  
Validity Time IU- IU- IU-  
Result Code - - -  
Final Unit Indication IU- IU- IU-  
Final Unit Action IU- IU- IU-  
Restriction Filter Rule - - -  
Filter Id - - -  
Redirect Server - - -  
Redirect Address Type - - -  
Redirect Server Address - - -  
Time Quota Threshold - - -  
Volume Quota Threshold - - -  
Unit Quota Threshold - - -  
Quota Holding Time - - -  
Quota Consumption Time - - -  
Reporting Reason - - -  
Trigger - - -  
PS Furnish Charging Information - - -  
Refund Information - - -  
AF-Correlation Information - - -  
Envelope - - -  
Envelop Reporting - - -  
Time Quota Mechanism - - -  
Service Specific Info - - -  
QoS Information - - -
* * *
### 6.3.2 Formal VCS charging parameter description
#### 6.3.2.1 VCS CDR parameters
Not specified in the present document.
#### 6.3.2.2 VCS AVPs
The detailed charging event parameter definitions are specified in 3GPP TS
32.299 [50].
## 6.4 Bindings for VCS Charging
This clause describes the mapping between the charging information messages
and fields described for VCS Charging and the Diameter messages and AVPs.
As defined in TS 32.299 [50], the corresponding Diameter Credit-Control
Application (DCCA) commands for the _Debit and Reserve Units Request_ message
is Credit-Control-Request (CCR) and for the _Debit and Reserve Units Response_
message is Credit-Control-Answer (CCA).
Table 6.4.1 specifies the bindings for parameters used for VCS Charging for
the _Debit and Reserve Units_ operation defined in this document.
Table 6.4.1: Bindings between Information Elements and AVPs
* * *
Information Element AVP IMS Information IMS-Information Node Functionality
Node-Functionality Role of Node Role-of-Node Calling Party Address Calling-
Party-Address Called Party Address Called-Party-Address Requested Party
Address Requested-Party-Address PS Information PS-Information User Location
Info 3GPP-User-Location-Info MS TimeZone 3GPP-MS-TimeZone User Location Info
Time User-Location-Info-Time VCS Information VCS-Information Bearer Capability
Bearer-Capability Network Call Reference Number Network-Call-Reference-Number
MSC Address MSC-Address Basic Service Code Basic-Service-Code Bearer Service
Bearer-Service Teleservice Teleservice ISUP Location Number ISUP-Location-
Number VLR Number VLR-Number Forwarding Pending Forwarding-Pending ISUP Cause
ISUP-Cause Call Start Time Start-Time Start of Charging Start-of-Charging Call
Stop Time Stop-Time Free Format Data PS-Free-Format-Data Multiple Unit
Operation Multiple-Services-Credit-Control Granted Service Unit Granted-
Service-Unit Tariff Time Change Tariff-Time-Change CC Time CC-Time Requested
Service Unit Requested-Service-Unit Used Service Unit Used-Service-Unit Tariff
Change Usage Tariff-Change-Usage Service Identifier Service-Identifier Rating
Group Rating-Group Final Unit Indication Final-Unit-Indication Final Unit
Action Final-Unit-Action
* * *
###### ## Annex A (informative): Relationship of VCS chargeable events to
CAMEL events
# A.1 General
There is a similarity to the chargeable events identified in the present
document in clause 5.3.1, to those events defined for use in CAMEL in TS
23.078 [207]. This relationship, provided for information only, is identified
in Table A.1.1. The table focuses on CAMEL Phase 2, but is also generally
applicable to later phases. This relationship does not imply a specific
implementation in the voice Proxy Function as there could be multiple ways to
implement voice call charging using CAMEL techniques. As an example, the end
of voice call could be detected by explicit notification of a listed event in
an Event Report BCSM; receipt of an Apply Charging Report with call inactive
indication; or receipt of Call Information Report.
Table A.1.1. Relationship of VCS chargeable events to CAMEL events
+----------------+----------------+----------------+----------------+ | Event | BCSM Event for | BCSM Event for | BCSM Event for | | | MO | MT | MF | +----------------+----------------+----------------+----------------+ | Voice call | DP2 Collected | DP12 | DP2 | | attempt | Info | Term | C | | | | inating_Attem | ollected_Info | | | | pt_Authorized | | +----------------+----------------+----------------+----------------+ | Voice call | DP7 O_Answer | DP15 T-Answer | DP7 O_Answer | | answered | | | | +----------------+----------------+----------------+----------------+ | Voice call not | DP4 | This event is | DP4 | | answered | Route_S | not | Route_S | | | elect_Failure | applicable, | elect_Failure | | | | see subsequent | | | | DP5 O_Busy | events in | DP5 O_Busy | | | | table. | | | | DP6 | | DP6 | | | O_No_Answer | | O_No_Answer | | | | | | | | DP10 | | DP10 | | | O_Abandon | | O_Abandon | +----------------+----------------+----------------+----------------+ | Voice call not | Not applicable | DP13 T_Busy | Not applicable | | answered and | | | | | call is | | DP14 | | | conditionally | | T_No_Answer | | | forwarded | | | | +----------------+----------------+----------------+----------------+ | Voice call not | Not applicable | DP13 T_Busy | Not applicable | | answered and | | | | | call is not | | DP14 | | | conditionally | | T_No_Answer | | | forwarded | | | | | | | DP18 | | | | | T_Abandon | | +----------------+----------------+----------------+----------------+ | End of voice | DP9 | DP17 | DP9 | | call | O_Disconnect | T_Disconnect | O_Disconnect | +----------------+----------------+----------------+----------------+
#