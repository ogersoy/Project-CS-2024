# Foreword
This Technical Specification has been produced by the 3^rd^ Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
Y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document specifies the coding, multiplexing and mapping to
physical channels for E-UTRA.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or non‑specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 36.211: \"Evolved Universal Terrestrial Radio Access (E-UTRA);
Physical channels and modulation\".
[3] 3GPP TS 36.213: \"Evolved Universal Terrestrial Radio Access (E-UTRA);
Physical layer procedures\".
[4] 3GPP TS 36.306: \"Evolved Universal Terrestrial Radio Access (E-UTRA);
User Equipment (UE) radio access capabilities\".
[5] 3GPP TS36.321, \"Evolved Universal Terrestrial Radio Access (E-UTRA);
Medium Access Control (MAC) protocol specification\"
[6] 3GPP TS36.331, \"Evolved Universal Terrestrial Radio Access (E-UTRA);
Radio Resource Control (RRC) protocol specification\"
# 3 Definitions, symbols and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
[1] and the following apply. A term defined in the present document takes
precedence over the definition of the same term, if any, in [1].
Definition format
**\ **: \.
## 3.2 Symbols
For the purposes of the present document, the following symbols apply:
$N_{\text{RB}}^{\text{DL}}$ Downlink bandwidth configuration, expressed in
number of resource blocks [2]
$N_{\text{RB}}^{\text{UL}}$ Uplink bandwidth configuration, expressed in
number of resource blocks [2]
$N_{\text{RB}}^{\text{SL}}$ Sidelink bandwidth configuration, expressed in
number of resource blocks [2]
$N_{\text{sc}}^{\text{RB}}$ Resource block size in the frequency domain,
expressed as a number of subcarriers
$N_{\text{symb}}^{\text{PUSCH}}$ Number of SC-FDMA symbols carrying PUSCH in a
subframe
$N_{\text{symb}}^{\text{PUSCH-initial}}$ Number of SC-FDMA symbols carrying
PUSCH in the initial PUSCH transmission subframe
$N_{\text{symb}}^{\text{UL}}$ Number of SC-FDMA symbols in an uplink slot
$N_{\text{symb}}^{\text{SL}}$ Number of SC-FDMA symbols in a sidelink slot
$N_{\text{SRS}}$ Number of SC-FDMA symbols used for SRS transmission in a
subframe (0 or 1).
## 3.3 Abbreviations
For the purposes of the present document, the following abbreviations apply:
BCH Broadcast channel
CFI Control Format Indicator
CP Cyclic Prefix
CSI Channel State Information
DCI Downlink Control Information
DL-SCH Downlink Shared channel
EPDCCH Enhanced Physical Downlink Control channel
FDD Frequency Division Duplexing
HI HARQ indicator
MCH Multicast channel
PBCH Physical Broadcast channel
PCFICH Physical Control Format Indicator channel
PCH Paging channel
PDCCH Physical Downlink Control channel
PDSCH Physical Downlink Shared channel
PHICH Physical HARQ indicator channel
PMCH Physical Multicast channel
PMI Precoding Matrix Indicator
PRACH Physical Random Access channel
PSBCH Physical Sidelink Broadcast Channel
PSCCH Physical Sidelink Control Channel
PSDCH Physical Sidelink Discovery Channel
PSSCH Physical Sidelink Shared Channel PUCCH Physical Uplink Control channel
PUSCH Physical Uplink Shared channel
RACH Random Access channel
RI Rank Indication
SCI Sidelink Control Information
SL-BCH Sidelink Broadcast Channel
SL-DCH Sidelink Discovery Channel
SL-SCH Sidelink Shared Channel
SR Scheduling Request
SRS Sounding Reference Signal
TDD Time Division Duplexing
TPMI Transmitted Precoding Matrix Indicator
UCI Uplink Control Information
UL-SCH Uplink Shared channel
# 4 Mapping to physical channels
## 4.1 Uplink
Table 4.1-1 specifies the mapping of the uplink transport channels to their
corresponding physical channels. Table 4.1-2 specifies the mapping of the
uplink control channel information to its corresponding physical channel.
Table 4.1-1
* * *
**TrCH** **Physical Channel** UL-SCH PUSCH RACH PRACH
* * *
Table 4.1-2
* * *
**Control information** **Physical Channel** UCI PUCCH, PUSCH
* * *
## 4.2 Downlink
Table 4.2-1 specifies the mapping of the downlink transport channels to their
corresponding physical channels. Table 4.2-2 specifies the mapping of the
downlink control channel information to its corresponding physical channel.
Table 4.2-1
* * *
**TrCH** **Physical Channel** DL-SCH PDSCH BCH PBCH PCH PDSCH MCH PMCH
* * *
Table 4.2-2
* * *
**Control information** **Physical Channel** **CFI** **PCFICH** **HI**
**PHICH** DCI PDCCH, EPDCCH
* * *
## 4.3 Sidelink
Table 4.3-1 specifies the mapping of the sidelink transport channels to their
corresponding physical channels. Table 4.3-2 specifies the mapping of the
sidelink control information to its corresponding physical channel.
Table 4.3-1
* * *
**TrCH** **Physical Channel** SL-SCH PSSCH SL-BCH PSBCH SL-DCH PSDCH
* * *
Table 4.3-2
* * *
**Control information** **Physical Channel** **SCI** **PSCCH**
* * *
# 5 Channel coding, multiplexing and interleaving
Data and control streams from/to MAC layer are encoded /decoded to offer
transport and control services over the radio transmission link. Channel
coding scheme is a combination of error detection, error correcting, rate
matching, interleaving and transport channel or control information mapping
onto/splitting from physical channels.
## 5.1 Generic procedures
This section contains coding procedures which are used for more than one
transport channel or control information type.
### 5.1.1 CRC calculation
Denote the input bits to the CRC computation
by$a_{0},a_{1},a_{2},a_{3},\text{.}\text{.}\text{.},a_{A - 1}$, and the parity
bits by$p_{0},p_{1},p_{2},p_{3},\text{.}\text{.}\text{.},p_{L - 1}$. _A_ is
the size of the input sequence and _L_ is the number of parity bits. The
parity bits are generated by one of the following cyclic generator
polynomials:
\- g~CRC24A~(_D_) = [_D_ ^24^ + _D_ ^23^ + _D_ ^18^ + _D_ ^17^ + _D_ ^14^ +
_D_ ^11^ + _D_ ^10^ + _D_ ^7^ + _D_ ^6^ + _D_ ^5^ + _D_ ^4^ + _D_ ^3^ + _D_ \+
1] and;
\- g~CRC24B~(_D_) = [_D_ ^24^ + _D_ ^23^ + _D_ ^6^ + _D_ ^5^ + _D_ \+ 1] for a
CRC length _L_ = 24 and;
\- g~CRC16~(_D_) = [_D_ ^16^ + _D_ ^12^ + _D_ ^5^ + 1] for a CRC length _L_ =
16.
\- g~CRC8~(_D_) = [_D_ ^8^ + _D_ ^7^ + _D_ ^4^ + _D_ ^3^ + _D_ \+ 1] for a CRC
length of _L_ = 8.
The encoding is performed in a systematic form, which means that in GF(2), the
polynomial:
yields a remainder equal to 0 when divided by the corresponding length-24 CRC
generator polynomial, g~CRC24A~(_D_) or g~CRC24B~(_D_), the polynomial:
yields a remainder equal to 0 when divided by g~CRC16~(_D_), and the
polynomial:
yields a remainder equal to 0 when divided by g~CRC8~(_D_).
The bits after CRC attachment are denoted
by$b_{0},b_{1},b_{2},b_{3},\text{.}\text{.}\text{.},b_{B - 1}$, where _B_ =
_A_ \+ _L_. The relation between _a~k~_ and _b~k~_ is:
$b_{k} = a_{k}$ for _k_ = 0, 1, 2, ..., _A_ -1
$b_{k} = p_{k - A}$ for _k_ = _A_ , _A_ +1, _A_ +2,..., _A_ +_L_ -1.
### 5.1.2 Code block segmentation and code block CRC attachment
The input bit sequence to the code block segmentation is denoted
by$b_{0},b_{1},b_{2},b_{3},\text{.}\text{.}\text{.},b_{B - 1}$, where _B_ >
0\. If _B_ is larger than the maximum code block size _Z_ , segmentation of
the input bit sequence is performed and an additional CRC sequence of _L_ = 24
bits is attached to each code block. The maximum code block size is:
\- _Z_ = 6144.
If the number of filler bits _F_ calculated below is not 0, filler bits are
added to the beginning of the first block.
> Note that if _B \  block.
The filler bits shall be set to \ at the input to the encoder.
Total number of code blocks _C_ is determined by:
if $B \leq Z$
_L_ = 0
Number of code blocks: $C = 1$
$B^{'} = B$
else
_L_ = 24
Number of code blocks: $C = \left\lceil \frac{B}{\left( Z - L \right)}
\right\rceil$.
$B^{'} = B + C \cdot L$
end if
The bits output from code block segmentation, for _C_ ≠ 0, are denoted
by$c_{r0},c_{r1},c_{r2},c_{r3},\text{.}\text{.}\text{.},c_{r\left( K_{r} - 1
\right)}$ , where _r_ is the code block number, and _K~r~_ is the number of
bits for the code block number _r_.
Number of bits in each code block (applicable for _C_ ≠ 0 only):
First segmentation size: $K_{+}$= minimum _K_ in table 5.1.3-3 such that $C
\cdot K \geq B^{'}$
> if $C = 1$
>
> the number of code blocks with length $K_{+}$ is $C_{+}$=1, $K_{-} = 0$,
> $C_{-} = 0$
>
> else if $C > 1$
Second segmentation size: $K_{-}$= maximum _K_ in table 5.1.3-3 such that $K  Number of segments of size$K_{-}$: $C_{-} = \left\lfloor \frac{C \cdot K_{+}
> - B^{'}}{\Delta_{K}} \right\rfloor$.
>
> Number of segments of size$K_{+}$_:_ $C_{+} = C - C_{-}$.
end if
Number of filler bits: $F = C_{+} \cdot K_{+} + C_{-} \cdot K_{-} - B^{'}$
for _k =_ 0 to _F_ -1 -- Insertion of filler bits
$c_{0k}\text{=$
end for
_k_ = _F_
_s_ = 0
for _r_ = 0 to _C_ -1
if $r  if _C_ >1
>
> The sequence
> $c_{r0},c_{r1},c_{r2},c_{r3},\text{.}\text{.}\text{.},c_{r\left( K_{r} - L -
> 1 \right)}$ is used to calculate the CRC parity bits
> $p_{r0},p_{r1},p_{r2},\text{.}\text{.}\text{.},p_{r\left( L - 1 \right)}$
> according to section 5.1.1 with the generator polynomial g~CRC24B~(_D_). For
> CRC calculation it is assumed that filler bits, if present, have the value
> 0.
>
> while$k 
> end while
>
> end if
$k = 0$
end for
### 5.1.3 Channel coding
The bit sequence input for a given code block to channel coding is denoted
by$c_{0},c_{1},c_{2},c_{3},\text{.}\text{.}\text{.},c_{K - 1}$, where _K_ is
the number of bits to encode. After encoding the bits are denoted
by$d_{0}^{(i)},d_{1}^{(i)},d_{2}^{(i)},d_{3}^{(i)},\text{.}\text{.}\text{.},d_{D
- 1}^{(i)}$, where _D_ is the number of encoded bits per output stream and _i_
indexes the encoder output stream. The relation between $c_{k}$ and
$d_{k}^{(i)}$ and between _K_ and _D_ is dependent on the channel coding
scheme.
The following channel coding schemes can be applied to TrCHs:
\- tail biting convolutional coding;
\- turbo coding.
Usage of coding scheme and coding rate for the different types of TrCH is
shown in table 5.1.3-1. Usage of coding scheme and coding rate for the
different control information types is shown in table 5.1.3-2.
The values of _D_ in connection with each coding scheme:
\- tail biting convolutional coding with rate 1/3: _D = K_ ;
\- turbo coding with rate 1/3: _D_ = _K_ \+ 4.
The range for the output stream index _i_ is 0, 1 and 2 for both coding
schemes.
Table 5.1.3-1: Usage of channel coding scheme and coding rate for TrCHs.
* * *
TrCH Coding scheme Coding rate UL-SCH Turbo coding 1/3 DL-SCH  
PCH  
MCH  
SL-SCH  
SL-DCH  
BCH Tail biting convolutional coding 1/3 SL-BCH
* * *
Table 5.1.3-2: Usage of channel coding scheme and coding rate for control
information.
* * *
Control Information Coding scheme Coding rate DCI Tail biting convolutional
coding 1/3 CFI Block code 1/16 HI Repetition code 1/3 UCI Block code variable
Tail biting convolutional coding 1/3 SCI Tail biting convolutional coding 1/3
* * *
#### 5.1.3.1 Tail biting convolutional coding
A tail biting convolutional code with constraint length 7 and coding rate 1/3
is defined.
The configuration of the convolutional encoder is presented in figure 5.1.3-1.
The initial value of the shift register of the encoder shall be set to the
values corresponding to the last 6 information bits in the input stream so
that the initial and final states of the shift register are the same.
Therefore, denoting the shift register of the encoder
by$s_{0},s_{1},s_{2},\text{.}\text{.}\text{.},s_{5}$, then the initial value
of the shift register shall be set to
Figure 5.1.3-1: Rate 1/3 tail biting convolutional encoder.
The encoder output streams$d_{k}^{(0)}$, $d_{k}^{(1)}$ and $d_{k}^{(2)}$
correspond to the first, second and third parity streams, respectively as
shown in Figure 5.1.3-1.
#### 5.1.3.2 Turbo coding
##### 5.1.3.2.1 Turbo encoder
The scheme of turbo encoder is a Parallel Concatenated Convolutional Code
(PCCC) with two 8-state constituent encoders and one turbo code internal
interleaver. The coding rate of turbo encoder is 1/3. The structure of turbo
encoder is illustrated in figure 5.1.3-2.
The transfer function of the 8-state constituent code for the PCCC is:
_G_(_D_) = {width="0.69375in" height="0.5555555555555556in"},
where
_g_ ~0~(_D_) = 1 + _D_ ^2^ + _D_ ^3^,
_g_ ~1~(_D_) = 1 + _D_ \+ _D_ ^3^.
The initial value of the shift registers of the 8-state constituent encoders
shall be all zeros when starting to encode the input bits.
The output from the turbo encoder is
for $k = 0,1,2,\text{.}\text{.}\text{.},K - 1$.
If the code block to be encoded is the 0-th code block and the number of
filler bits is greater than zero, i.e., _F_ > 0, then the encoder shall set
_c~k~_ , = 0, _k_ = 0,...,(_F_ -1) at its input and shall set
$d_{k}^{(0)}\text{=$, _k_ = 0,...,(_F_ -1) and
$d_{k}^{(1)}\text{=$, _k_ = 0,...,(_F_ -1) at its output.
The bits input to the turbo encoder are denoted
by$c_{0},c_{1},c_{2},c_{3},\text{.}\text{.}\text{.},c_{K - 1}$, and the bits
output from the first and second 8-state constituent encoders are denoted by
$z_{0},z_{1},z_{2},z_{3},\text{.}\text{.}\text{.},z_{K -
1}$and$z_{0}^{'},z_{1}^{'},z_{2}^{'},z_{3}^{'},\text{.}\text{.}\text{.},z_{K -
1}^{'}$, respectively. The bits output from the turbo code internal
interleaver are denoted by$c_{0}^{'},c_{1}^{'},\text{.}\text{.}\text{.},c_{K -
1}^{'}$, and these bits are to be the input to the second 8-state constituent
encoder.
Figure 5.1.3-2: Structure of rate 1/3 turbo encoder (dotted lines apply for
trellis termination only).
##### 5.1.3.2.2 Trellis termination for turbo encoder
Trellis termination is performed by taking the tail bits from the shift
register feedback after all information bits are encoded. Tail bits are padded
after the encoding of information bits.
The first three tail bits shall be used to terminate the first constituent
encoder (upper switch of figure 5.1.3-2 in lower position) while the second
constituent encoder is disabled. The last three tail bits shall be used to
terminate the second constituent encoder (lower switch of figure 5.1.3-2 in
lower position) while the first constituent encoder is disabled.
The transmitted bits for trellis termination shall then be:
> $d_{K}^{(0)} = x_{K}$, $d_{K + 1}^{(0)} = z_{K + 1}$, $d_{K + 2}^{(0)} =
> x_{K}^{'}$, $d_{K + 3}^{(0)} = z_{K + 1}^{'}$
>
> $d_{K}^{(1)} = z_{K}$, $d_{K + 1}^{(1)} = x_{K + 2}$, $d_{K + 2}^{(1)} =
> z_{K}^{'}$, $d_{K + 3}^{(1)} = x_{K + 2}^{'}$
>
> $d_{K}^{(2)} = x_{K + 1}$, $d_{K + 1}^{(2)} = z_{K + 2}$, $d_{K + 2}^{(2)} =
> x_{K + 1}^{'}$, $d_{K + 3}^{(2)} = z_{K + 2}^{'}$
##### 5.1.3.2.3 Turbo code internal interleaver
The bits input to the turbo code internal interleaver are denoted
by$c_{0},c_{1},\text{.}\text{.}\text{.},c_{K - 1}$, where _K_ is the number of
input bits. The bits output from the turbo code internal interleaver are
denoted by$c_{0}^{'},c_{1}^{'},\text{.}\text{.}\text{.},c_{K - 1}^{'}$.
The relationship between the input and output bits is as follows:
$c_{i}^{'} = c_{\Pi\left( i \right)}$, _i_ =0, 1,..., (_K_ -1)
where the relationship between the output index _i_ and the input index
$\Pi(i)$ satisfies the following quadratic form:
The parameters $f_{1}$ and $f_{2}$ depend on the block size _K_ and are
summarized in Table 5.1.3-3.
Table 5.1.3-3: Turbo code internal interleaver parameters.
* * *
_i_ _K_ _i_ _K_ _i_ _K_ _i_ _K_  
1 40 3 10 48 416 25 52 95 1120 67 140 142 3200 111 240 2 48 7 12 49 424 51 106
96 1152 35 72 143 3264 443 204 3 56 19 42 50 432 47 72 97 1184 19 74 144 3328
51 104 4 64 7 16 51 440 91 110 98 1216 39 76 145 3392 51 212 5 72 7 18 52 448
29 168 99 1248 19 78 146 3456 451 192 6 80 11 20 53 456 29 114 100 1280 199
240 147 3520 257 220 7 88 5 22 54 464 247 58 101 1312 21 82 148 3584 57 336 8
96 11 24 55 472 29 118 102 1344 211 252 149 3648 313 228 9 104 7 26 56 480 89
180 103 1376 21 86 150 3712 271 232 10 112 41 84 57 488 91 122 104 1408 43 88
151 3776 179 236 11 120 103 90 58 496 157 62 105 1440 149 60 152 3840 331 120
12 128 15 32 59 504 55 84 106 1472 45 92 153 3904 363 244 13 136 9 34 60 512
31 64 107 1504 49 846 154 3968 375 248 14 144 17 108 61 528 17 66 108 1536 71
48 155 4032 127 168 15 152 9 38 62 544 35 68 109 1568 13 28 156 4096 31 64 16
160 21 120 63 560 227 420 110 1600 17 80 157 4160 33 130 17 168 101 84 64 576
65 96 111 1632 25 102 158 4224 43 264 18 176 21 44 65 592 19 74 112 1664 183
104 159 4288 33 134 19 184 57 46 66 608 37 76 113 1696 55 954 160 4352 477 408
20 192 23 48 67 624 41 234 114 1728 127 96 161 4416 35 138 21 200 13 50 68 640
39 80 115 1760 27 110 162 4480 233 280 22 208 27 52 69 656 185 82 116 1792 29
112 163 4544 357 142 23 216 11 36 70 672 43 252 117 1824 29 114 164 4608 337
480 24 224 27 56 71 688 21 86 118 1856 57 116 165 4672 37 146 25 232 85 58 72
704 155 44 119 1888 45 354 166 4736 71 444 26 240 29 60 73 720 79 120 120 1920
31 120 167 4800 71 120 27 248 33 62 74 736 139 92 121 1952 59 610 168 4864 37
152 28 256 15 32 75 752 23 94 122 1984 185 124 169 4928 39 462 29 264 17 198
76 768 217 48 123 2016 113 420 170 4992 127 234 30 272 33 68 77 784 25 98 124
2048 31 64 171 5056 39 158 31 280 103 210 78 800 17 80 125 2112 17 66 172 5120
39 80 32 288 19 36 79 816 127 102 126 2176 171 136 173 5184 31 96 33 296 19 74
80 832 25 52 127 2240 209 420 174 5248 113 902 34 304 37 76 81 848 239 106 128
2304 253 216 175 5312 41 166 35 312 19 78 82 864 17 48 129 2368 367 444 176
5376 251 336 36 320 21 120 83 880 137 110 130 2432 265 456 177 5440 43 170 37
328 21 82 84 896 215 112 131 2496 181 468 178 5504 21 86 38 336 115 84 85 912
29 114 132 2560 39 80 179 5568 43 174 39 344 193 86 86 928 15 58 133 2624 27
164 180 5632 45 176 40 352 21 44 87 944 147 118 134 2688 127 504 181 5696 45
178 41 360 133 90 88 960 29 60 135 2752 143 172 182 5760 161 120 42 368 81 46
89 976 59 122 136 2816 43 88 183 5824 89 182 43 376 45 94 90 992 65 124 137
2880 29 300 184 5888 323 184 44 384 23 48 91 1008 55 84 138 2944 45 92 185
5952 47 186 45 392 243 98 92 1024 31 64 139 3008 157 188 186 6016 23 94 46 400
151 40 93 1056 17 66 140 3072 47 96 187 6080 47 190 47 408 155 102 94 1088 171
204 141 3136 13 28 188 6144 263 480
* * *
### 5.1.4 Rate matching
#### 5.1.4.1 Rate matching for turbo coded transport channels
The rate matching for turbo coded transport channels is defined per coded
block and consists of interleaving the three information bit
streams$d_{k}^{(0)}$, $d_{k}^{(1)}$ and$d_{k}^{(2)}$, followed by the
collection of bits and the generation of a circular buffer as depicted in
Figure 5.1.4-1. The output bits for each code block are transmitted as
described in section 5.1.4.1.2.
Figure 5.1.4-1. Rate matching for turbo coded transport channels.
The bit stream $d_{k}^{(0)}$is interleaved according to the sub-block
interleaver defined in section 5.1.4.1.1 with an output sequence defined as
$v_{0}^{(0)},v_{1}^{(0)},v_{2}^{(0)},\text{.}\text{.}\text{.},v_{K_{\Pi} -
1}^{(0)}$and where$K_{\Pi}$ is defined in section 5.1.4.1.1.
The bit stream $d_{k}^{(1)}$ is interleaved according to the sub-block
interleaver defined in section 5.1.4.1.1 with an output sequence defined
as$v_{0}^{(1)},v_{1}^{(1)},v_{2}^{(1)},\text{.}\text{.}\text{.},v_{K_{\Pi} -
1}^{(1)}$.
The bit stream $d_{k}^{(2)}$ is interleaved according to the sub-block
interleaver defined in section 5.1.4.1.1 with an output sequence defined
as$v_{0}^{(2)},v_{1}^{(2)},v_{2}^{(2)},\text{.}\text{.}\text{.},v_{K_{\Pi} -
1}^{(2)}$.
The sequence of bits $e_{k}$ for transmission is generated according to
section 5.1.4.1.2.
##### 5.1.4.1.1 Sub-block interleaver
The bits input to the block interleaver are denoted by
$d_{0}^{(i)},d_{1}^{(i)},d_{2}^{(i)},\text{.}\text{.}\text{.},d_{D -
1}^{(i)}$, where _D_ is the number of bits. The output bit sequence from the
block interleaver is derived as follows:
(1) Assign $C_{\text{subblock}}^{\text{TC}} = \text{32}$to be the number of
columns of the matrix. The columns of the matrix are numbered 0, 1,
2,...,$C_{\text{subblock}}^{\text{TC}} - 1$from left to right.
(2) Determine the number of rows of the
matrix$R_{\text{subblock}}^{\text{TC}}$, by finding minimum integer
$R_{\text{subblock}}^{\text{TC}}$ such that:
The rows of rectangular matrix are numbered 0, 1,
2,...,$R_{\text{subblock}}^{\text{TC}} - 1$from top to bottom.
(3) If$\left( R_{\text{subblock}}^{\text{TC}} \times
C_{\text{subblock}}^{\text{TC}} \right) > D$, then $N_{D} = \left(
R_{\text{subblock}}^{\text{TC}} \times C_{\text{subblock}}^{\text{TC}} - D
\right)$ dummy bits are padded such that _y~k~_ = \ for _k_ = 0,
1,..., _N~D\ ~_ \- 1. Then, $y_{N_{D} + k} = d_{k}^{(i)}$, _k_ = 0, 1,..., _D_
-1, and the bit sequence _y~k~_ is written into the$\left(
R_{\text{subblock}}^{\text{TC}} \times C_{\text{subblock}}^{\text{TC}}
\right)$ matrix row by row starting with bit _y_ ~0~ in column 0 of row 0:
For $d_{k}^{(0)}$and$d_{k}^{(1)}$:
(4) Perform the inter-column permutation for the matrix based on the
pattern$\left\langle P\left( j \right) \right\rangle_{j \in \left{
0,1,\text{.}\text{.}\text{.},C_{\text{subblock}}^{\text{TC}} - 1 \right}}$
that is shown in table 5.1.4-1, where P(_j_) is the original column position
of the _j_ -th permuted column. After permutation of the columns, the inter-
column permuted$\left( R_{\text{subblock}}^{\text{TC}} \times
C_{\text{subblock}}^{\text{TC}} \right)$ matrix is equal to
$\begin{bmatrix} y_{P(0)} & y_{P(1)} & y_{P(2)} & \cdots &
y_{P(C_{\text{subblock}}^{\text{TC}} - 1)} \ y_{P(0) +
C_{\text{subblock}}^{\text{TC}}} & y_{P(1) + C_{\text{subblock}}^{\text{TC}}}
& y_{P(2) + C_{\text{subblock}}^{\text{TC}}} & \cdots &
y_{P(C_{\text{subblock}}^{\text{TC}} - 1) + C_{\text{subblock}}^{\text{TC}}} \
\vdots & \vdots & \vdots & \ddots & \vdots \ y_{P(0) +
(R_{\text{subblock}}^{\text{TC}} - 1) \times C_{\text{subblock}}^{\text{TC}}}
& y_{P(1) + (R_{\text{subblock}}^{\text{TC}} - 1) \times
C_{\text{subblock}}^{\text{TC}}} & y_{P(2) + (R_{\text{subblock}}^{\text{TC}}
- 1) \times C_{\text{subblock}}^{\text{TC}}} & \cdots &
y_{P(C_{\text{subblock}}^{\text{TC}} - 1) + (R_{\text{subblock}}^{\text{TC}} -
1) \times C_{\text{subblock}}^{\text{TC}}} \ \end{bmatrix}$
(5) The output of the block interleaver is the bit sequence read out column by
column from the inter-column permuted $\left( R_{\text{subblock}}^{\text{TC}}
\times C_{\text{subblock}}^{\text{TC}} \right)$matrix. The bits after sub-
block interleaving are denoted
by$v_{0}^{(i)},v_{1}^{(i)},v_{2}^{(i)},\text{.}\text{.}\text{.},v_{K_{\Pi} -
1}^{(i)}$, where $v_{0}^{(i)}$ corresponds to$y_{P(0)}$,$v_{1}^{(i)}$
to$y_{P(0) + C_{\text{subblock}}^{\text{TC}}}$... and$K_{\Pi} = \left(
R_{\text{subblock}}^{\text{TC}} \times C_{\text{subblock}}^{\text{TC}}
\right)$.
For$d_{k}^{(2)}$:
(4) The output of the sub-block interleaver is denoted
by$v_{0}^{(2)},v_{1}^{(2)},v_{2}^{(2)},\text{.}\text{.}\text{.},v_{K_{\Pi} -
1}^{(2)}$, where $v_{k}^{(2)} = y_{\pi(k)}$ and where
> The permutation function _P_ is defined in Table 5.1.4-1.
Table 5.1.4-1 Inter-column permutation pattern for sub-block interleaver.
* * *
Number of columns $C_{\text{subblock}}^{\text{TC}}$ Inter-column permutation
pattern 32 \
* * *
##### 5.1.4.1.2 Bit collection, selection and transmission
The circular buffer of length $K_{w} = 3K_{\Pi}$ for the _r_ -th coded block
is generated as follows:
$w_{k} = v_{k}^{(0)}$ for _k_ = 0,..., $K_{\Pi} - 1$
$w_{K_{\Pi} + 2k} = v_{k}^{(1)}$ for _k_ = 0,..., $K_{\Pi} - 1$
$w_{K_{\Pi} + 2k + 1} = v_{k}^{(2)}$ for _k_ = 0,..., $K_{\Pi} - 1$
Denote the soft buffer size for the transport block by _N_ ~IR~ bits and the
soft buffer size for the _r_ -th code block by _N~cb~_ bits. The size _N~cb~_
is obtained as follows, where _C_ is the number of code blocks computed in
section 5.1.2:
\- $N_{\text{cb}} = \text{min}\left( \left\lfloor \frac{N_{\text{IR}}}{C}
\right\rfloor,K_{w} \right)$ for DL-SCH and PCH transport channels
\- $N_{\text{cb}} = K_{w}$ for UL-SCH, MCH, SL-SCH and SL-DCH transport
channels
For UE category 0, for DL-SCH associated with SI-RNTI and RA-RNTI and PCH
transport channel, _N~cb~_ is always equal to _K~w~_.
where _N_ ~IR~ is equal to:
where:
If the UE signals _ue-CategoryDL-r12 indicating UE category 0_ , or if the UE
signals _ue-CategoryDL-r12_ indicating UE category 14 and is configured by
higher layers with _altCQI-Table-r12_ for the DL cell, _N_ ~soft~ is the total
number of soft channel bits according to the UE category indicated by _ue-
CategoryDL-r12_. Otherwise, if the UE signals _ue-Category-v11a0,_ and is
configured by higher layers with _altCQI-Table-r12_ for the DL cell, _N_
~soft~ is the total number of soft channel bits according to the UE category
indicated by _ue-Category-v11a0._ Otherwise, if the UE signals _ue-
Category-v1020_ , and is configured with transmission mode 9 or transmission
mode 10, or is configured with transmission mode 3 or transmission mode 4 and
the higher layer parameter _maxLayersMIMO-r10_ is configured to fourLayers,
for the DL cell, _N_ ~soft~ is the total number of soft channel bits [4]
according to the UE category indicated by _ue-Category-v1020_ [6]. Otherwise,
_N_ ~soft~ is the total number of soft channel bits [4] according to the UE
category indicated by _ue-Category_ (without suffix) [6].
If _N_ ~soft~ = 35982720 or _47431680_ ,
_K~C~_ = 5,
elseif _N_ ~soft~ = 7308288 and the UE is configured by higher layers with
_altCQI-Table-r12_ ,
> if the UE is capable of supporting no more than a maximum of two spatial
> layers for the DL cell in the transmission mode configured for the UE, or if
> the configured maximum number of layers indicated by the _maxLayersMIMO-r10_
> field is no more than two,
_K~C~_ = 3
else
_K~C~_ = 3/2
end if.
elseif _N_ ~soft~ = 3654144 and the UE is capable of supporting no more than a
maximum of two spatial layers for the DL cell, or if the configured maximum
number of layers indicated by the _maxLayersMIMO-r10_ field is no more than
two,
_K~C~_ = 2
else
_K~C~_ = 1
End if.
_K_ ~MIMO~ is equal to 2 if the UE is configured to receive PDSCH
transmissions based on transmission modes 3, 4, 8, 9 or 10 as defined in
section 7.1 of [3], and is equal to 1 otherwise.
_M_ ~DL_HARQ~ ­is the maximum number of DL HARQ processes as defined in
section 7 of [3].
_M_ ~limit~ ­is a constant equal to 8.
Denoting by _E_ the rate matching output sequence length for the _r_ -th coded
block, and _rv~idx~_ the redundancy version number for this transmission
(_rv~idx~_ = 0, 1, 2 or 3), the rate matching output bit sequence is $e_{k}$,
_k_ = 0,1,..., $E - 1$.
Define by _G_ the total number of bits available for the transmission of one
transport block.
Set$G^{'} = G/\left( N_{L} \cdot Q_{m} \right)$ where _Q~m~_ is equal to 2 for
QPSK, 4 for 16QAM, 6 for 64QAM and 8 for 256QAM, and where
\- For transmit diversity:
_\- N~L~_ is equal to 2,
\- Otherwise:
_\- N~L~_ is equal to the number of layers a transport block is mapped onto
Set$\gamma = G^{'}\text{mod}C$, where _C_ is the number of code blocks
computed in section 5.1.2.
if $r \leq C - \gamma - 1$
set$E = N_{L} \cdot Q_{m} \cdot \left\lfloor \frac{G^{'}}{C} \right\rfloor$
else
set$E = N_{L} \cdot Q_{m} \cdot \left\lceil \frac{G^{'}}{C} \right\rceil$
end if
Set$k_{0} = R_{\text{subblock}}^{\text{TC}} \cdot \left( 2 \cdot \left\lceil
\frac{N_{\text{cb}}}{8R_{\text{subblock}}^{\text{TC}}} \right\rceil \cdot
\text{rv}_{\text{idx}} + 2 \right)$, where $R_{\text{subblock}}^{\text{TC}}$
is the number of rows defined in section 5.1.4.1.1.
Set _k_ = 0 and _j_ = 0
while { _k_ \$
$e_{k} = w_{(k_{0} + j)\text{mod}N_{\text{cb}}}$
_k_ = _k_ +1
end if
_j_ = _j_ +1
end while
#### 5.1.4.2 Rate matching for convolutionally coded transport channels and
control information
The rate matching for convolutionally coded transport channels and control
information consists of interleaving the three bit streams, $d_{k}^{(0)}$,
$d_{k}^{(1)}$ and $d_{k}^{(2)}$, followed by the collection of bits and the
generation of a circular buffer as depicted in Figure 5.1.4-2. The output bits
are transmitted as described in section 5.1.4.2.2.
Figure 5.1.4-2. Rate matching for convolutionally coded transport channels and
control information.
The bit stream $d_{k}^{(0)}$ is interleaved according to the sub-block
interleaver defined in section 5.1.4.2.1 with an output sequence defined as
$v_{0}^{(0)},v_{1}^{(0)},v_{2}^{(0)},\text{.}\text{.}\text{.},v_{K_{\Pi} -
1}^{(0)}$ and where $K_{\Pi}$ is defined in section 5.1.4.2.1.
The bit stream $d_{k}^{(1)}$ is interleaved according to the sub-block
interleaver defined in section 5.1.4.2.1 with an output sequence defined
as$v_{0}^{(1)},v_{1}^{(1)},v_{2}^{(1)},\text{.}\text{.}\text{.},v_{K_{\Pi} -
1}^{(1)}$.
The bit stream $d_{k}^{(2)}$ is interleaved according to the sub-block
interleaver defined in section 5.1.4.2.1 with an output sequence defined
as$v_{0}^{(2)},v_{1}^{(2)},v_{2}^{(2)},\text{.}\text{.}\text{.},v_{K_{\Pi} -
1}^{(2)}$.
The sequence of bits $e_{k}$ for transmission is generated according to
section 5.1.4.2.2.
##### 5.1.4.2.1 Sub-block interleaver
The bits input to the block interleaver are denoted
by$d_{0}^{(i)},d_{1}^{(i)},d_{2}^{(i)},\text{.}\text{.}\text{.},d_{D -
1}^{(i)}$, where _D_ is the number of bits. The output bit sequence from the
block interleaver is derived as follows:
(1) Assign$C_{\text{subblock}}^{\text{CC}} = \text{32}$to be the number of
columns of the matrix. The columns of the matrix are numbered 0, 1,
2,...,$C_{\text{subblock}}^{\text{CC}} - 1$from left to right.
(2) Determine the number of rows of the
matrix$R_{\text{subblock}}^{\text{CC}}$, by finding minimum integer
$R_{\text{subblock}}^{\text{CC}}$ such that:
The rows of rectangular matrix are numbered 0, 1,
2,...,$R_{\text{subblock}}^{\text{CC}} - 1$from top to bottom.
(3) If$\left( R_{\text{subblock}}^{\text{CC}} \times
C_{\text{subblock}}^{\text{CC}} \right) > D$, then$N_{D} = \left(
R_{\text{subblock}}^{\text{CC}} \times C_{\text{subblock}}^{\text{CC}} - D
\right)$ dummy bits are padded such that _y~k~_ = \ for _k_ = 0,
1,..., _N~D\ ~_ \- 1. Then, $y_{N_{D} + k} = d_{k}^{(i)}$, _k_ = 0, 1,..., _D_
-1, and the bit sequence _y~k~_ is written into the$\left(
R_{\text{subblock}}^{\text{CC}} \times C_{\text{subblock}}^{\text{CC}}
\right)$ matrix row by row starting with bit _y_ ~0~ in column 0 of row 0:
(4) Perform the inter-column permutation for the matrix based on the
pattern$\left\langle P\left( j \right) \right\rangle_{j \in \left{
0,1,\text{.}\text{.}\text{.},C_{\text{subblock}}^{\text{CC}} - 1 \right}}$
that is shown in table 5.1.4-2, where P(_j_) is the original column position
of the _j_ -th permuted column. After permutation of the columns, the inter-
column permuted$\left( R_{\text{subblock}}^{\text{CC}} \times
C_{\text{subblock}}^{\text{CC}} \right)$ matrix is equal to
$\begin{bmatrix} y_{P(0)} & y_{P(1)} & y_{P(2)} & \cdots &
y_{P(C_{\text{subblock}}^{\text{CC}} - 1)} \ y_{P(0) +
C_{\text{subblock}}^{\text{CC}}} & y_{P(1) + C_{\text{subblock}}^{\text{CC}}}
& y_{P(2) + C_{\text{subblock}}^{\text{CC}}} & \cdots &
y_{P(C_{\text{subblock}}^{\text{CC}} - 1) + C_{\text{subblock}}^{\text{CC}}} \
\vdots & \vdots & \vdots & \ddots & \vdots \ y_{P(0) +
(R_{\text{subblock}}^{\text{CC}} - 1) \times C_{\text{subblock}}^{\text{CC}}}
& y_{P(1) + (R_{\text{subblock}}^{\text{CC}} - 1) \times
C_{\text{subblock}}^{\text{CC}}} & y_{P(2) + (R_{\text{subblock}}^{\text{CC}}
- 1) \times C_{\text{subblock}}^{\text{CC}}} & \cdots &
y_{P(C_{\text{subblock}}^{\text{CC}} - 1) + (R_{\text{subblock}}^{\text{CC}} -
1) \times C_{\text{subblock}}^{\text{CC}}} \ \end{bmatrix}$
(5) The output of the block interleaver is the bit sequence read out column by
column from the inter-column permuted$\left( R_{\text{subblock}}^{\text{CC}}
\times C_{\text{subblock}}^{\text{CC}} \right)$matrix. The bits after sub-
block interleaving are denoted
by$v_{0}^{(i)},v_{1}^{(i)},v_{2}^{(i)},\text{.}\text{.}\text{.},v_{K_{\Pi} -
1}^{(i)}$, where $v_{0}^{(i)}$ corresponds to$y_{P(0)}$, $v_{1}^{(i)}$
to$y_{P(0) + C_{\text{subblock}}^{\text{CC}}}$... and $K_{\Pi} = \left(
R_{\text{subblock}}^{\text{CC}} \times C_{\text{subblock}}^{\text{CC}}
\right)$
Table 5.1.4-2 Inter-column permutation pattern for sub-block interleaver.
* * *
Number of columns $C_{\text{subblock}}^{\text{CC}}$ Inter-column permutation
pattern 32 \
* * *
This block interleaver is also used in interleaving PDCCH modulation symbols.
In that case, the input bit sequence consists of PDCCH symbol quadruplets [2].
##### 5.1.4.2.2 Bit collection, selection and transmission
The circular buffer of length $K_{w} = 3K_{\Pi}$ is generated as follows:
$w_{k} = v_{k}^{(0)}$ for _k_ = 0,..., $K_{\Pi} - 1$
$w_{K_{\Pi} + k} = v_{k}^{(1)}$ for _k_ = 0,..., $K_{\Pi} - 1$
$w_{2K_{\Pi} + k} = v_{k}^{(2)}$ for _k_ = 0,..., $K_{\Pi} - 1$
Denoting by _E_ the rate matching output sequence length, the rate matching
output bit sequence is $e_{k}$, _k_ = 0,1,..., $E - 1$.
Set _k_ = 0 and _j_ = 0
while { _k_ \$
$e_{k} = w_{j\text{mod}K_{w}}$
_k_ = _k_ +1
end if
_j_ = _j_ +1
end while
### 5.1.5 Code block concatenation
The input bit sequence for the code block concatenation block are the
sequences $e_{\text{rk}}$, for $r = 0,\text{.}\text{.}\text{.},C - 1$ and $k =
0,\text{.}\text{.}\text{.},E_{r} - 1$. The output bit sequence from the code
block concatenation block is the sequence $f_{k}$ for $k =
0,\text{.}\text{.}\text{.},G - 1$.
The code block concatenation consists of sequentially concatenating the rate
matching outputs for the different code blocks. Therefore,
Set $k = 0$ and $r = 0$
while $r  \text{11}$ with
$O_{1} = \left\lceil \frac{O}{2} \right\rceil$ and $O_{2} = O - \left\lceil
\frac{O}{2} \right\rceil$.
\- $M_{\text{sc}}^{\text{PUSCH-initial}(x)},x = \left{ 1,2 \right}$ are the
scheduled bandwidths for PUSCH transmission in the initial sub-frame for the
first and second transport block, respectively, expressed as a number of
subcarriers in [2], and
\- $N_{\text{symb}}^{\text{PUSCH-initial}(x)},x = \left{ 1,2 \right}$are the
number of SC-FDMA symbols per subframe for initial PUSCH transmission for the
first and second transport block given by $N_{\text{symb}}^{\text{PUSCH-
initial}(x)} = \left( 2 \cdot \left( N_{\text{symb}}^{\text{UL}} - 1 \right) -
N_{\text{SRS}}^{(x)} \right),x = \left{ 1,2 \right}$, where
\- $N_{\text{SRS}}^{(x)},x = \left{ 1,2 \right}$ is equal to 1
\- if UE configured with one UL cell is configured to send PUSCH and SRS in
the same subframe for initial transmission, or
\- if UE transmits PUSCH and SRS in the same subframe in the same serving cell
for initial transmission of transport block \"_x\"_ , or
\- if the PUSCH resource allocation for initial transmission of transport bock
\"_x\"_ even partially overlaps with the cell-specific SRS subframe and
bandwidth configuration defined in section 5.5.3 of [2], or
\- if the subframe for initial transmission of transport block \"_x_ \" in the
same serving cell is a UE-specific type-1 SRS subframe as defined in Section
8.2 of [3], or
\- if the subframe for initial transmission of transport block \"_x_ \" in the
same serving cell is a UE-specific type-0 SRS subframe as defined in section
8.2 of [3] and the UE is configured with multiple TAGs.
\- Otherwise $N_{\text{SRS}}^{(x)},x = \left{ 1,2 \right}$ is equal to 0.
\- $M_{\text{sc}}^{\text{PUSCH} - \text{initial}(x)},x = \left{ 1,2 \right}$,
$C^{(x)},x = \left{ 1,2 \right}$, and $K_{r}^{(x)},x = \left{ 1,2 \right}$ are
obtained from the initial PDCCH or EPDCCH for the corresponding transport
block.
For HARQ-ACK, $Q_{\text{ACK}} = Q_{m} \cdot Q^{'}$ and
$\beta_{\text{offset}}^{\text{PUSCH}} = \beta_{\text{offset}}^{\text{HARQ} -
\text{ACK}}$, where $Q_{m}$is the modulation order of a given transport block,
and $\beta_{\text{offset}}^{\text{HARQ} - \text{ACK}}$ shall be determined
according to [3] depending on the number of transmission codewords for the
corresponding PUSCH.
For rank indication, $Q_{\text{RI}} = Q_{m} \cdot Q^{'}$ and
$\beta_{\text{offset}}^{\text{PUSCH}} = \beta_{\text{offset}}^{\text{RI}}$,
where$Q_{m}$is the modulation order of a given transport block, and
$\beta_{\text{offset}}^{\text{RI}}$ shall be determined according to [3]
depending on the number of transmission codewords for the corresponding PUSCH,
and on the uplink power control subframe set for the corresponding PUSCH when
two uplink power control subframe sets are configured by higher layers for the
cell.
For HARQ-ACK
\- Each positive acknowledgement (ACK) is encoded as a binary \'1\' and each
negative acknowledgement (NACK) is encoded as a binary \'0\'
\- If HARQ-ACK feedback consists of 1-bit of information, i.e., $\lbrack
o_{0}^{\text{ACK}}\rbrack$, it is first encoded according to Table 5.2.2.6-1.
\- If HARQ-ACK feedback consists of 2-bits of information, i.e., $\lbrack
o_{0}^{\text{ACK}}o_{1}^{\text{ACK}}\rbrack$ with $o_{0}^{\text{ACK}}$
corresponding to HARQ-ACK bit for codeword 0 and $o_{1}^{\text{ACK}}$
corresponding to that for codeword 1, or if HARQ-ACK feedback consists of
2-bits of information as a result of the aggregation of HARQ-ACK bits
corresponding to two DL cells with which the UE is configured by higher
layers, or if HARQ-ACK feedback consists of 2-bits of information
corresponding to two subframes for TDD, it is first encoded according to Table
5.2.2.6-2 where $o_{2}^{\text{ACK}} = (o_{0}^{\text{ACK}} +
o_{1}^{\text{ACK}})\text{mod}2$.
Table 5.2.2.6-1: Encoding of 1-bit HARQ-ACK.
* * *
_Q~m~_ Encoded HARQ-ACK 2  
4  
6
* * *
Table 5.2.2.6-2: Encoding of 2-bit HARQ-ACK.
* * *
_Q~m~_ Encoded HARQ-ACK 2  
4  
6
* * *
\- If HARQ-ACK feedback consists of $3 \leq O^{\text{ACK}} \leq \text{11}$
bits of information as a result of the aggregation of HARQ-ACK bits
corresponding to one or more DL cells with which the UE is configured by
higher layers, i.e.,
$o_{0}^{\text{ACK}}o_{1}^{\text{ACK}},\text{.}\text{.}\text{.},o_{O^{\text{ACK}}
- 1}^{\text{ACK}}$, then a coded bit sequence
${\overset{\sim}{q}}_{0}^{\text{ACK}}{\overset{\sim}{q}}_{1}^{\text{ACK}},\text{.}\text{.}\text{.},{\overset{\sim}{q}}_{\text{31}}^{\text{ACK}}$
is obtained by using the bit sequence
$o_{0}^{\text{ACK}}o_{1}^{\text{ACK}},\text{.}\text{.}\text{.},o_{O^{\text{ACK}}
- 1}^{\text{ACK}}$ as the input to the channel coding block described in
section 5.2.2.6.4. In turn, the bit sequence
$q_{0}^{\text{ACK}},q_{1}^{\text{ACK}},q_{2}^{\text{ACK}},\text{.}\text{.}\text{.},q_{Q_{\text{ACK}}
- 1}^{\text{ACK}}$ is obtained by the circular repetition of the bit sequence
${\overset{\sim}{q}}_{0}^{\text{ACK}}{\overset{\sim}{q}}_{1}^{\text{ACK}},\text{.}\text{.}\text{.},{\overset{\sim}{q}}_{\text{31}}^{\text{ACK}}$
so that the total bit sequence length is equal to$Q_{\text{ACK}}$.
\- If HARQ-ACK feedback consists of $\text{11}  20 when TDD is used in all the configured serving cell(s) of the UE,
or if _k_ > 21 when FDD is used in at least one of the configured serving
cells with TDD primary cell, spatial bundling is applied to all subframes in
all cells and the multiplexing of HARQ-ACK bits is performed according to the
following pseudo-code
Set _c_ = 0 -- cell index: lower indices correspond to lower RRC indices of
corresponding cell
Set _j_ = 0 -- HARQ-ACK bit index
while c \ 1 Wideband CQI codeword 0 4 4 4 4 Wideband
CQI codeword 1 0 4 0 4 Precoding matrix indicator
* * *
Table 5.2.2.6.1-1A: Fields for channel quality information feedback for
wideband CQI reports (transmission mode 9 configured with PMI/RI reporting
with 8 antenna ports and transmission mode 10 configured with PMI/RI reporting
with 8 antenna ports).
* * *
Field Bit width  
Rank = 1 Rank = 2 Rank = 3 Rank = 4 Wideband CQI codeword 0 4 4 4 4 Wideband
CQI codeword 1 0 4 4 4 Wideband first PMI _i_ 1 4 4 2 2 Subband second PMI _i_
2 4 _N_ 4 _N_ 4 _N_ 3 _N_
**Field** **Bit width**  
Rank = 5 Rank = 6 Rank = 7 Rank = 8 Wideband CQI codeword 0 4 4 4 4 Wideband
CQI codeword 1 4 4 4 4 Wideband first PMI i1 2 2 2 0 Subband second PMI i2 0 0
0 0
* * *
Table 5.2.2.6.1-1B: Fields for channel quality information feedback for
wideband CQI reports with 4 antenna ports (transmission mode 8, transmission
mode 9 and transmission mode 10 configured with PMI/RI reporting, 4 antenna
ports and _alternativeCodeBookEnabledFor4TX-r12=TRUE_)
* * *
Field Bit width  
Rank = 1 Rank = 2 Rank = 3 Rank = 4 Wideband CQI codeword 0 4 4 4 4 Wideband
CQI codeword 1 0 4 4 4 Wideband first PMI _i_ 1 4 4 0 0 Subband second PMI _i_
2
* * *
Table 5.2.2.6.1-2 shows the fields and the corresponding bit width for the
rank indication feedback for wideband CQI reports for PDSCH transmissions
associated with transmission mode 4, transmission mode 8 configured with
PMI/RI reporting, transmission mode 9 configured with PMI/RI reporting with
2/4/8 antenna ports, and transmission mode 10 configured with PMI/RI reporting
with 2/4/8 antenna ports.
Table 5.2.2.6.1-2: Fields for rank indication feedback for wideband CQI
reports\ (transmission mode 4, transmission mode 8 configured with PMI/RI
reporting, transmission mode 9 configured with PMI/RI reporting with 2/4/8
antenna ports, and transmission mode 10 configured with PMI/RI reporting with
2/4/8 antenna ports).
* * *
Field Bit width  
2 antenna ports 4 antenna ports 8 antenna ports  
Max 1or 2 layers Max 4 layers Max 1or 2 layers Max 4 layers Max 8 layers Rank
indication 1 1 2 1 2 3
* * *
The channel quality bits in Table 5.2.2.6.1-1, Table 5.2.2.6.1-1A and Table
5.2.2.6.1-1B form the bit sequence
$o_{0},o_{1},o_{2},\text{.}\text{.}\text{.},o_{O - 1}$ with $o_{0}$
corresponding to the first bit of the first field in the table, $o_{1}$
corresponding to the second bit of the first field in the table, and $o_{O -
1}$ corresponding to the last bit in the last field in the table. The field of
PMI shall be in the increasing order of the subband index [3]. The first bit
of each field corresponds to MSB and the last bit LSB. The RI bits sequence in
Table 5.2.2.6.1-2 is encoded according to section 5.2.2.6.
##### 5.2.2.6.2 Channel quality information formats for higher layer
configured subband CQI reports
Table 5.2.2.6.2-1 shows the fields and the corresponding bit width for the
channel quality information feedback for higher layer configured report for
PDSCH transmissions associated with transmission mode 1, transmission mode 2,
transmission mode 3, transmission mode 7, transmission mode 8 configured
without PMI/RI reporting, transmission mode 9 configured without PMI/RI
reporting or configured with 1 antenna port, and transmission mode 10
configured without PMI/RI reporting or configured with 1 antenna port. $N$ in
Table 5.2.2.6.2-1 is defined in section 7.2 of [3].
Table 5.2.2.6.2-1: Fields for channel quality information feedback for higher
layer configured subband CQI reports (transmission mode 1, transmission mode
2, transmission mode 3, transmission mode 7, transmission mode 8 configured
without PMI/RI reporting, transmission mode 9 configured without PMI/RI
reporting or configured with 1 antenna port, and transmission mode 10
configured without PMI/RI reporting or configured with 1 antenna port)
* * *
Field Bit width Wide-band CQI codeword 4 Subband differential CQI
* * *
Table 5.2.2.6.2-2, Table 5.2.2.6.2-2A and Table 5.2.2.6.2-2B show the fields
and the corresponding bit widths for the channel quality information feedback
for higher layer configured report for PDSCH transmissions associated with
transmission mode 4, transmission mode 5, transmission mode 6, transmission
mode 8 configured with PMI/RI reporting, transmission mode 9 configured with
PMI/RI reporting with 2/4/8 antenna ports, and transmission mode 10 configured
with PMI/RI reporting with 2/4/8 antenna ports. $N$ in Table 5.2.2.6.2-2,
Table 5.2.2.6.2-2A and Table 5.2.2.6.2-2B is defined in section 7.2 of [3].
Table 5.2.2.6.2-2: Fields for channel quality information feedback for higher
layer configured subband CQI reports (transmission mode 4, transmission mode
5, transmission mode 6, transmission mode 8 configured with PMI/RI reporting
except with _alternativeCodeBookEnabledFor4TX-r12=TRUE_ , transmission mode 9
configured with PMI/RI reporting with 2/4 antenna ports except with
_alternativeCodeBookEnabledFor4TX-r12=TRUE_ , and transmission mode 10
configured with PMI/RI reporting with 2/4 antenna ports except with
_alternativeCodeBookEnabledFor4TX-r12=TRUE_)
* * *
Field Bit width  
2 antenna ports 4 antenna ports  
Rank = 1 Rank = 2 Rank = 1 Rank > 1 Wide-band CQI codeword 0 4 4 4 4 Subband
differential CQI codeword 0  
Wide-band CQI codeword 1 0 4 0 4 Subband differential CQI codeword 1 0 0  
Precoding matrix indicator 2 1 4 4
* * *
Table 5.2.2.6.2-2A: Fields for channel quality information feedback for higher
layer configured subband CQI reports (transmission mode 9 configured with
PMI/RI reporting with 8 antenna ports and transmission mode 10 configured with
PMI/RI reporting with 8 antenna ports).
* * *
Field Bitwidth  
Rank = 1 Rank = 2 Rank = 3 Rank = 4 Wideband CQI codeword 0 4 4 4 4 Subband
differential CQI codeword 0  
Wideband CQI codeword 1 0 4 4 4 Subband differential CQI codeword 1 0  
Wideband first PMI _i_ 1 4 4 2 2 Wideband second PMI _i_ 2 4 4 4 3
**Field** **Bitwidth**  
Rank = 5 Rank = 6 Rank = 7 Rank = 8 Wideband CQI codeword 0 4 4 4 4 Subband
differential CQI codeword 0  
Wideband CQI codeword 1 4 4 4 4 Subband differential CQI codeword 1  
Wideband first PMI i1 2 2 2 0 Wideband second PMI i2 0 0 0 0
* * *
Table 5.2.2.6.2-2B: Fields for channel quality information feedback for higher
layer configured subband CQI reports with 4 antenna ports (transmission modes
8, 9 and 10 configured with PMI/RI reporting, 4 antenna ports and
_alternativeCodeBookEnabledFor4TX-r12=TRUE_)
* * *
Field Bitwidth  
Rank = 1 Rank = 2 Rank = 3 Rank = 4 Wideband CQI codeword 0 4 4 4 4 Subband
differential CQI codeword 0  
Wideband CQI codeword 1 0 4 4 4 Subband differential CQI codeword 1 0  
Wideband first PMI _i_ 1 4 4 0 0 Wideband second PMI _i_ 2 4 4 4 4
* * *
Table 5.2.2.6.2-2C, Table 5.2.2.6.2-2D and Table 5.2.2.6.2-2E show the fields
and the corresponding bit widths for the channel quality information feedback
for higher layer configured report for PDSCH transmissions associated with
transmission mode 4, transmission mode 6, transmission mode 8 configured with
subband PMI/RI reporting, transmission mode 9 configured with subband PMI/RI
reporting with 2/4/8 antenna ports, and transmission mode 10 configured with
subband PMI/RI reporting with 2/4/8 antenna ports. $N$ in Table 5.2.2.6.2-2C,
Table 5.2.2.6.2-2D and Table 5.2.2.6.2-2E is defined in section 7.2 of [3].
Table 5.2.2.6.2-2C: Fields for channel quality information feedback for higher
layer configured subband CQI and subband PMI reports\ (transmission mode 4 and
transmission mode 6 configured with subband PMI reporting, transmission mode 8
configured with subband PMI reporting except with
_alternativeCodeBookEnabledFor4TX-r12=TRUE_ , transmission mode 9 and
transmission 10 configured with subband PMI reporting with 2/4 antenna ports
except with _alternativeCodeBookEnabledFor4TX-r12=TRUE_).
* * *
Field Bit width  
2 antenna ports 4 antenna ports  
Rank = 1 Rank = 2 Rank = 1 Rank = 2 Rank = 3 Rank = 4 Wide-band CQI codeword 0
4 4 4 4 4 4 Subband differential CQI codeword 0  
Wide-band CQI codeword 1 0 4 0 4 4 4 Subband differential CQI codeword 1 0 0  
Subband precoding matrix indicator
* * *
Table 5.2.2.6.2-2D: Fields for channel quality information feedback for higher
layer configured subband CQI and subband PMI reports with 8 antenna ports
(transmission mode 9 configured with subband PMI reporting and transmission
mode 10 configured with subband PMI reporting)
* * *
Field Bitwidth  
Rank = 1 Rank = 2 Rank = 3 Rank = 4 Wideband CQI codeword 0 4 4 4 4 Subband
differential CQI codeword 0  
Wideband CQI codeword 1 0 4 4 4 Subband differential CQI codeword 1 0  
Wideband first PMI _i_ 1 4 4 2 2 Subband second PMI _i_ 2
**Field** **Bitwidth**  
Rank = 5 Rank = 6 Rank = 7 Rank = 8 Wideband CQI codeword 0 4 4 4 4 Subband
differential CQI codeword 0  
Wideband CQI codeword 1 4 4 4 4 Subband differential CQI codeword 1  
Wideband first PMI i1 2 2 2 0 Subband second PMI i2 0 0 0 0
* * *
Table 5.2.2.6.2-2E: Fields for channel quality information feedback for higher
layer configured subband CQI and subband PMI reports with 4 antenna ports
(transmission modes 8, 9 and 10 configured with subband PMI reporting, 4
antenna ports and _alternativeCodeBookEnabledFor4TX-r12=TRUE_ )
* * *
Field Bitwidth  
Rank = 1 Rank = 2 Rank = 3 Rank = 4 Wideband CQI codeword 0 4 4 4 4 Subband
differential CQI codeword 0  
Wideband CQI codeword 1 0 4 4 4 Subband differential CQI codeword 1 0  
Wideband first PMI _i_ 1 4 4 0 0 Subband second PMI _i_ 2
* * *
Table 5.2.2.6.2-3 shows the fields and the corresponding bit width for the
rank indication feedback for higher layer configured subband CQI reports for
PDSCH transmissions associated with transmission mode 3, transmission mode 4,
transmission mode 8 configured with PMI/RI reporting, transmission mode 9
configured with PMI/RI reporting with 2/4/8 antenna ports, and transmission
mode 10 configured with PMI/RI reporting with 2/4/8 antenna ports.
Table 5.2.2.6.2-3: Fields for rank indication feedback for higher layer
configured subband CQI reports\ (transmission mode 3, transmission mode 4,
transmission mode 8 configured with PMI/RI reporting, transmission mode 9
configured with PMI/RI reporting with 2/4/8 antenna ports, and transmission
mode 10 configured with PMI/RI reporting with 2/4/8 antenna ports).
* * *
Field Bit width  
2 antenna ports 4 antenna ports 8 antenna ports  
Max 1or 2 layers Max 4 layers Max 1or 2 layers Max 4 layers Max 8 layers Rank
indication 1 1 2 1 2 3
* * *
The channel quality bits in Table 5.2.2.6.2-1, Table 5.2.2.6.2-2, Table
5.2.2.6.2-2A, Table 5.2.2.6.2-2B, Table 5.2.2.6.2-2C, Table 5.2.2.6.2-2D, and
Table 5.2.2.6.2-2E form the bit sequence
$o_{0},o_{1},o_{2},\text{.}\text{.}\text{.},o_{O - 1}$ with $o_{0}$
corresponding to the first bit of the first field in each of the tables,
$o_{1}$ corresponding to the second bit of the first field in each of the
tables, and $o_{O - 1}$ corresponding to the last bit in the last field in
each of the tables. The field of the PMI and subband differential CQI shall be
in the increasing order of the subband index [3]. The first bit of each field
corresponds to MSB and the last bit LSB. The RI bits sequence in Table
5.2.2.6.2-3 is encoded according to section 5.2.2.6.
##### 5.2.2.6.3 Channel quality information formats for UE selected subband
CQI reports
Table 5.2.2.6.3-1 shows the fields and the corresponding bit widths for the
channel quality information feedback for UE selected subband CQI for PDSCH
transmissions associated with transmission mode 1, transmission mode 2,
transmission mode 3, transmission mode 7, transmission mode 8 configured
without PMI/RI reporting, transmission mode 9 configured without PMI/RI
reporting or configured with 1 antenna port, and transmission mode 10
configured without PMI/RI reporting or configured with 1 antenna port. $L$ in
Table 5.2.2.6.3-1 is defined in section 7.2 of [3].
Table 5.2.2.6.3-1: Fields for channel quality information feedback for UE
selected subband CQI reports (transmission mode 1, transmission mode 2,
transmission mode 3, transmission mode 7, transmission mode 8 configured
without PMI/RI reporting, transmission mode 9 configured without PMI/RI
reporting or configured with 1 antenna port, and transmission mode 10
configured without PMI/RI reporting or configured with 1 antenna port)
* * *
Field Bit width Wide-band CQI codeword 4 Subband differential CQI 2 Position
of the M selected subbands
* * *
Table 5.2.2.6.3-2, Table 5.2.2.6.3-2A and Table 5.2.2.6.3-2B show the fields
and the corresponding bit widths for the channel quality information feedback
for UE selected subband CQI for PDSCH transmissions associated with
transmission mode 4, transmission mode 6, transmission mode 8 configured with
PMI/RI reporting, transmission mode 9 configured with PMI/RI reporting with
2/4/8 antenna port, and transmission mode 10 configured with PMI/RI reporting
with 2/4/8 antenna ports. $L$ in Table 5.2.2.6.3-2, Table 5.2.2.6.3-2A and
Table 5.2.2.6.3-2B is defined in section 7.2 of [3].
Table 5.2.2.6.3-2: Fields for channel quality information feedback for UE
selected subband CQI reports\ (transmission mode 4, transmission mode 6,
transmission mode 8 configured with PMI/RI reporting except with
_alternativeCodeBookEnabledFor4TX-r12=TRUE_ , transmission mode 9 configured
with PMI/RI reporting with 2/4 antenna ports except with
_alternativeCodeBookEnabledFor4TX-r12=TRUE_ , and transmission mode 10
configured with PMI/RI reporting with 2/4 antenna ports except with
_alternativeCodeBookEnabledFor4TX-r12=TRUE_)
* * *
Field Bit width  
2 antenna ports 4 antenna ports  
Rank = 1 Rank = 2 Rank = 1 Rank > 1 Wide-band CQI codeword 0 4 4 4 4 Subband
differential CQI codeword 0 2 2 2 2 Wide-band CQI codeword 1 0 4 0 4 Subband
differential CQI codeword 1 0 2 0 2 Position of the M selected subbands  
Precoding matrix indicator 4 2 8 8
* * *
Table 5.2.2.6.3-2A: Fields for channel quality information feedback for UE
selected subband CQI reports (transmission mode 9 configured with PMI/RI
reporting with 8 antenna ports and transmission mode 10 configured with PMI/RI
reporting with 8 antenna ports).
* * *
Field Bit width  
Rank = 1 Rank = 2 Rank = 3 Rank = 4 Rank = 5 Rank = 6 Rank = 7 Rank = 8 Wide-
band CQI codeword 0 4 4 4 4 4 4 4 4 Subband differential CQI codeword 0 2 2 2
2 2 2 2 2 Wide-band CQI codeword 1 0 4 4 4 4 4 4 4 Subband differential CQI
codeword 1 0 2 2 2 2 2 2 2 Position of the M selected subbands  
Wideband first PMI _i_ 1 4 4 2 2 2 2 2 0 Wideband second PMI i2 4 4 4 3 0 0 0
0 Subband second PMI _i_ 2 4 4 4 3 0 0 0 0
* * *
Table 5.2.2.6.3-2B: Fields for channel quality information feedback for UE
selected subband CQI reports with 4 antenna ports (transmission modes 8, 9 and
10 configured with PMI/RI reporting, 4 antenna ports and
_alternativeCodeBookEnabledFor4TX-r12=TRUE_)
* * *
Field Bit width  
Rank = 1 Rank = 2 Rank = 3 Rank = 4 Wide-band CQI codeword 0 4 4 4 4 Subband
differential CQI codeword 0 2 2 2 2 Wide-band CQI codeword 1 0 4 4 4 Subband
differential CQI codeword 1 0 2 2 2 Position of the M selected subbands  
Wideband first PMI _i_ 1 4 4 0 0 Wideband second PMI i2 4 4 4 4 Subband second
PMI _i_ 2 4 4 4 4
* * *
Table 5.2.2.6.3-3 shows the fields and the corresponding bit widths for the
rank indication feedback for UE selected subband CQI reports for PDSCH
transmissions associated with transmission mode 3, transmission mode 4,
transmission mode 8 configured with PMI/RI reporting, transmission mode 9
configured with PMI/RI reporting with 2/4/8 antenna ports, and transmission
mode 10 configured with PMI/RI reporting with 2/4/8 antenna ports.
Table 5.2.2.6.3-3: Fields for rank indication feedback for UE selected subband
CQI reports\ (transmission mode 3, transmission mode 4, transmission mode 8
configured with PMI/RI reporting, transmission mode 9 configured with PMI/RI
reporting with 2/4/8 antenna ports and transmission mode 10 configured with
PMI/RI reporting with 2/4/8 antenna ports).
* * *
Field Bit width  
2 antenna ports 4 antenna ports 8 antenna ports  
Max 1or 2 layers Max 4 layers Max 1or 2 layers Max 4 layers Max 8 layers Rank
indication 1 1 2 1 2 3
* * *
The channel quality bits in Table 5.2.2.6.3-1, Table 5.2.2.6.3-2, Table
5.2.2.6.3-2A and Table 5.2.2.6.3-2B form the bit sequence
$o_{0},o_{1},o_{2},\text{.}\text{.}\text{.},o_{O - 1}$ with $o_{0}$
corresponding to the first bit of the first field in each of the tables,
$o_{1}$ corresponding to the second bit of the first field in each of the
tables, and $o_{O - 1}$ corresponding to the last bit in the last field in
each of the tables. The field of PMI shall start with the wideband PMI
followed by the PMI for the M selected subbands. The first bit of each field
corresponds to MSB and the last bit LSB. The RI bits sequence in Table
5.2.2.6.3-3 is encoded according to section 5.2.2.6.
##### 5.2.2.6.4 Channel coding for CQI/PMI information in PUSCH
The channel quality bits input to the channel coding block are denoted by
$o_{0},o_{1},o_{2},o_{3},\text{.}\text{.}\text{.},o_{O - 1}$ where _O_ is the
number of bits. The number of channel quality bits depends on the transmission
format. When PUCCH-based reporting format is used, the number of CQI/PMI bits
is defined in section 5.2.3.3.1 for wideband reports and in section 5.2.3.3.2
for UE selected subbands reports. When PUSCH-based reporting format is used,
the number of CQI/PMI bits is defined in section 5.2.2.6.1 for wideband
reports, in section 5.2.2.6.2 for higher layer configured subbands reports and
in section 5.2.2.6.3 for UE selected subbands reports.
The channel quality information is first coded using a (32, _O_) block code.
The code words of the (32, _O_) block code are a linear combination of the 11
basis sequences denoted M~i,n~ and defined in Table 5.2.2.6.4-1.
**Table 5.2.2.6.4-1: Basis sequences for (32,_O_) code.**
* * *
i M~i,0~ M~i,1~ M~i,2~ M~i,3~ M~i,4~ M~i,5~ M~i,6~ M~i,7~ M~i,8~ M~i,9~
M~i,10~ 0 1 1 0 0 0 0 0 0 0 0 1 1 1 1 1 0 0 0 0 0 0 1 1 2 1 0 0 1 0 0 1 0 1 1
1 3 1 0 1 1 0 0 0 0 1 0 1 4 1 1 1 1 0 0 0 1 0 0 1 5 1 1 0 0 1 0 1 1 1 0 1 6 1
0 1 0 1 0 1 0 1 1 1 7 1 0 0 1 1 0 0 1 1 0 1 8 1 1 0 1 1 0 0 1 0 1 1 9 1 0 1 1
1 0 1 0 0 1 1 10 1 0 1 0 0 1 1 1 0 1 1 11 1 1 1 0 0 1 1 0 1 0 1 12 1 0 0 1 0 1
0 1 1 1 1 13 1 1 0 1 0 1 0 1 0 1 1 14 1 0 0 0 1 1 0 1 0 0 1 15 1 1 0 0 1 1 1 1
0 1 1 16 1 1 1 0 1 1 1 0 0 1 0 17 1 0 0 1 1 1 0 0 1 0 0 18 1 1 0 1 1 1 1 1 0 0
0 19 1 0 0 0 0 1 1 0 0 0 0 20 1 0 1 0 0 0 1 0 0 0 1 21 1 1 0 1 0 0 0 0 0 1 1
22 1 0 0 0 1 0 0 1 1 0 1 23 1 1 1 0 1 0 0 0 1 1 1 24 1 1 1 1 1 0 1 1 1 1 0 25
1 1 0 0 0 1 1 1 0 0 1 26 1 0 1 1 0 1 0 0 1 1 0 27 1 1 1 1 0 1 0 1 1 1 0 28 1 0
1 0 1 1 1 0 1 0 0 29 1 0 1 1 1 1 1 1 1 0 0 30 1 1 1 1 1 1 1 1 1 1 1 31 1 0 0 0
0 0 0 0 0 0 0
* * *
The encoded CQI/PMI block is denoted by
$b_{0},b_{1},b_{2},b_{3},\text{.}\text{.}\text{.},b_{B - 1}$ where $B =
\text{32}$ and
$b_{i} = \sum_{n = 0}^{O - 1}{\left( o_{n} \cdot M_{i,n} \right)\text{mod}2}$
where _i_ = 0, 1, 2, ..., _B_ -1.
The output bit sequence is obtained by circular repetition of the encoded
CQI/PMI block as follows
$q_{i} = b_{\left( i\text{mod}B \right)}$ where _i_ = 0, 1, 2, ...,
_N~L·~Q~CQI~_ -1, where _N~L~_ is the number of layers the corresponding UL-
SCH transport block is mapped onto.
#### 5.2.2.6.5 Channel coding for more than 11 bits of HARQ-ACK information
The HARQ-ACK bits input to the channel coding block are denoted by
$o_{0}^{\text{ACK}}o_{1}^{\text{ACK}},\text{.}\text{.}\text{.},o_{O^{\text{ACK}}
- 1}^{\text{ACK}}$ where $\text{11}  0$, or if $k_{b} +
O^{\text{CSI}} + O^{\text{SR}} > \text{22}$ and $k \leq k_{\text{max}}$, then
\- $O^{\text{ACK}} = k$
else,
\- $O^{\text{ACK}} = k_{b}$.
If $O^{\text{ACK}} = k$, the multiplexing of HARQ-ACK bits is performed
according to the following pseudo-code:
Set _c_ = 0 -- cell index: lower indices correspond to lower RRC indices of
corresponding cell
Set _j_ = 0 -- HARQ-ACK bit index
while c \ 1 Wide-band CQI 4 4 4 4 Spatial differential
CQI 0 3 0 3 Precoding matrix indicator 2 1 4 4
* * *
Table 5.2.3.3.1-2A and Table 5.2.3.3.1-2B show the fields and the
corresponding bit widths for the channel quality and precoding matrix
information feedback for wideband reports for PDSCH transmissions associated
with transmission mode 9 configured with PMI/RI reporting except with
_alternativeCodeBookEnabledFor4TX-r12=TRUE_ , and transmission mode 10
configured with PMI/RI reporting except with
_alternativeCodeBookEnabledFor4TX-r12=TRUE_.
Table 5.2.3.3.1-2A: UCI fields for transmission of wideband CQI and precoding
information (i2)\ (transmission mode 9 configured with PMI/RI reporting except
with _alternativeCodeBookEnabledFor4TX-r12=TRUE_ , and transmission mode 10
configured with PMI/RI reporting except with
_alternativeCodeBookEnabledFor4TX-r12=TRUE_)
* * *
Field Bit width
                                          2 antenna ports   4 antenna ports   8 antenna ports
                                          Rank = 1          Rank = 2          Rank = 1          Rank \> 1   Rank = 1   Rank = 2,3   Rank = 4   Rank \> 4
Wide-band CQI 4 4 4 4 4 4 4 4
Spatial differential CQI 0 3 0 3 0 3 3 3
Wide-band PMI (2 or 4 antenna ports)\ 2 1 4 4 4 4 3 0 or i2 (8 antenna ports)
* * *
Table 5.2.3.3.1-2B: UCI fields for transmission of wideband CQI and precoding
information (i1, i2) for transmission mode 9 configured with PMI/RI reporting
with 8 antenna ports and transmission mode 10 configured with PMI/RI reporting
with 8 antenna ports
* * *
Field Bit width  
8 antenna ports  
Rank = 1 Rank = 2 Rank = 3 Rank =4 Rank = 5 Rank = 6 Rank = 7 Rank = 8 Wide-
band CQI 4 4 4 4 4 4 4 4 Spatial differential CQI 0 3 3 3 3 3 3 3 i1 3 3 1 1 2
2 2 0 Wide-band i2 1 1 3 3 0 0 0 0
* * *
Table 5.2.3.3.1-2C and Table 5.2.3.3.1-2D show the fields and the
corresponding bit widths for the channel quality and precoding matrix
information feedback for wideband reports for PDSCH transmissions for 4
antenna ports associated with transmission modes 8, 9 and 10 configured with
PMI/RI reporting and _alternativeCodeBookEnabledFor4TX-r12=TRUE_.
Table 5.2.3.3.1-2C: UCI fields for transmission of wideband CQI and precoding
information (i2) with 4 antenna ports (transmission modes 8, 9 and 10
configured with PMI/RI reporting, 4 antenna ports and
_alternativeCodeBookEnabledFor4TX-r12=TRUE_)
* * *
Field Bit width  
4 antenna ports  
Rank = 1 Rank = 2 Rank = 3 Rank = 4 Wide-band CQI 4 4 4 4 Spatial differential
CQI 0 3 3 3 Wideband i2 4 4 4 4
* * *
Table 5.2.3.3.1-2D: UCI fields for transmission of wideband CQI and precoding
information (i1, i2) with 4 antenna ports (transmission modes 8, 9 and 10
configured with PMI/RI reporting, 4 antenna ports and
_alternativeCodeBookEnabledFor4TX-r12=TRUE_)
* * *
Field Bit width  
4 antenna ports  
Rank = 1 Rank = 2 Rank = 3 Rank = 4 Wide-band CQI 4 4 4 4 Spatial differential
CQI 0 3 3 3 i1 2 2 0 0 Wideband i2 2 2 4 4
* * *
Table 5.2.3.3.1-3 shows the fields and the corresponding bit widths for the
rank indication feedback for wideband reports for PDSCH transmissions
associated with transmission mode 3, transmission mode 4, transmission mode 8
configured with PMI/RI reporting, transmission mode 9 configured with PMI/RI
reporting with 2/4/8 antenna ports, and transmission mode 10 configured with
PMI/RI reporting with 2/4/8 antenna ports.
Table 5.2.3.3.1-3: UCI fields for rank indication feedback for wideband
reports (transmission mode 3, transmission mode 4, transmission mode 8
configured with PMI/RI reporting, transmission mode 9 configured with PMI/RI
reporting with 2/4/8 antenna ports, and transmission mode 10 configured with
PMI/RI reporting with 2/4/8 antenna ports).
* * *
Field Bit width  
2 antenna ports 4 antenna ports 8 antenna ports  
Max 1or 2 layers Max 4 layers Max 1or 2 layers Max 4 layers Max 8 layers Rank
indication 1 1 2 1 2 3
* * *
Table 5.2.3.3.1-3A shows the fields and the corresponding bit widths for the
joint transmission of rank indication and i1 for wideband reports for PDSCH
transmissions associated with transmission mode 9 and transmission mode 10.
Table 5.2.3.3.1-3A: UCI fields for joint report of RI and i1 (transmission
mode 9 configured with PMI/RI reporting with 2/4/8 antenna ports except with
_alternativeCodeBookEnabledFor4TX-r12 =TRUE_ and transmission mode 10
configured with PMI/RI reporting with 2/4/8 antenna ports except with
_alternativeCodeBookEnabledFor4TX-r12 =TRUE_)
* * *
Field Bit width  
2 antenna ports 4 antenna ports 8 antenna ports  
Max 1or 2 layers Max 4 layers Max 1or 2 layers Max 4 layers Max 8 layers Rank
indication 1 1 2 4 5 5 i1 - - -
* * *
Table 5.2.3.3.1-3B shows the fields and the corresponding bit widths for the
joint transmission of rank indication and i1 for wideband reports for PDSCH
transmissions associated with transmission modes 8, 9 and 10 configured with
PMI/RI reporting with 4 antenna ports and
_alternativeCodeBookEnabledFor4TX-r12 =TRUE_.
Table 5.2.3.3.1-3B: UCI fields for joint report of RI and i1 with 4 antenna
ports (transmission modes 8, 9 and 10 configured with PMI/RI reporting, 4
antenna ports and _alternativeCodeBookEnabledFor4TX-r12=TRUE_)
* * *
Field Bit width  
4 antenna ports  
Max 1or 2 layers Max 4 layers Rank indication and i1 4 5
* * *
The channel quality bits in Table 5.2.3.3.1-1 through Table 5.2.3.3.1-3B form
the bit sequence $a_{0},a_{1},a_{2},a_{3},\text{.}\text{.}\text{.},a_{A - 1}$
with $a_{0}$ corresponding to the first bit of the first field in each of the
tables, $a_{1}$ corresponding to the second bit of the first field in each of
the tables, and $a_{A - 1}$ corresponding to the last bit in the last field in
each of the tables. The first bit of each field corresponds to MSB and the
last bit LSB. The RI feedback for one bit is mapped according to Table
5.2.2.6-5 with $o_{0}^{\text{RI}}$ replaced by $a_{0}$. The RI feedback for
two bits is mapped according to Table 5.2.2.6-6 with $o_{0}^{\text{RI}}$,
$o_{1}^{\text{RI}}$ replaced by $a_{0},a_{1}$. The RI feedback for three bits
is mapped according to Table 5.2.2.6-7 with $o_{0}^{\text{RI}}$,
$o_{1}^{\text{RI}}$, $o_{2}^{\text{RI}}$ replaced by $a_{0},a_{1},a_{2}$. The
mapping for the jointly coded RI and i1 is provided in Table 7.2.2-1E of [3].
When multiplexed with UL-SCH, the channel coding and multiplexing for the
transmission configurations in Table 5.2.3.3.1-3, Table 5.2.3.3.1-3A and Table
5.2.3.3.1-3B is performed assuming RI transmission in section 5.2.2.6. All
other transmission configurations in this section are coded and multiplexed
assuming CQI/PMI transmission in section 5.2.2.6.
##### 5.2.3.3.2 Channel quality information formats for UE-selected sub-band
reports
Table 5.2.3.3.2-1 shows the fields and the corresponding bit widths for the
sub-band channel quality information feedback for UE-selected sub-band reports
for PDSCH transmissions associated with transmission mode 1, transmission mode
2, transmission mode 3, transmission mode 7, transmission mode 8 configured
without PMI/RI reporting, transmission mode 9 configured without PMI/RI
reporting or configured with 1 antenna port, and transmission mode 10
configured without PMI/RI reporting or configured with 1 antenna port.
Table 5.2.3.3.2-1: UCI fields for channel quality information feedback for UE-
selected sub-band CQI reports (transmission mode 1, transmission mode 2,
transmission mode 3, transmission mode 7, transmission mode 8 configured
without PMI/RI reporting, transmission mode 9 configured without PMI/RI
reporting or configured with 1 antenna port, and transmission mode 10
configured without PMI/RI reporting or configured with 1 antenna port)
* * *
Field Bit width Sub-band CQI 4 Sub-band label 1 or 2
* * *
Table 5.2.3.3.2-2 shows the fields and the corresponding bit widths for the
sub-band channel quality information feedback for UE-selected sub-band reports
for PDSCH transmissions associated with transmission mode 4, transmission mode
5, transmission mode 6, and transmission mode 8 configured with PMI/RI
reporting except with _alternativeCodeBookEnabledFor4TX-r12=TRUE_.
Table 5.2.3.3.2-2: UCI fields for channel quality information feedback for UE-
selected sub-band reports (transmission mode 4, transmission mode 5,
transmission mode 6 and transmission mode 8 configured with PMI/RI reporting
except with _alternativeCodeBookEnabledFor4TX-r12=TRUE_)
* * *
Field Bit width  
2 antenna ports 4 antenna ports  
Rank = 1 Rank = 2 Rank = 1 Rank > 1 Sub-band CQI 4 4 4 4 Spatial differential
CQI 0 3 0 3 Sub-band label 1 or 2 1 or 2 1 or 2 1 or 2
* * *
Table 5.2.3.3.2-2A and Table 5.2.3.3.2-2B show the fields and the
corresponding bit widths for the sub-band channel quality information feedback
for UE-selected sub-band reports for PDSCH transmissions associated with
transmission mode 9 configured with PMI/RI reporting with 2/4/8 antenna ports
except with _alternativeCodeBookEnabledFor4TX-r12=TRUE,_ and transmission mode
10 configured with PMI/RI reporting with 2/4/8 antenna ports except with
_alternativeCodeBookEnabledFor4TX-r12=TRUE_.
Table 5.2.3.3.2-2C shows the fields and the corresponding bit widths for the
sub-band channel quality information feedback for UE-selected sub-band reports
for PDSCH transmissions associated with transmission modes 8, 9 and 10
configured with PMI/RI reporting and _alternativeCodeBookEnabledFor4TX-r12
=TRUE_.
Table 5.2.3.3.2-2A: UCI fields for channel quality information feedback for
UE-selected sub-band reports (transmission mode 9 configured with PMI/RI
reporting with 2/4 antenna ports except with
_alternativeCodeBookEnabledFor4TX-r12=TRUE,_ and transmission mode 10
configured with PMI/RI reporting with 2/4 antenna ports except with
_alternativeCodeBookEnabledFor4TX-r12=TRUE_)
* * *
Field Bit width  
2 antenna ports 4 antenna ports  
Rank = 1 Rank = 2 Rank = 1 Rank > 1 Wide-band CQI 0 0 0 0 Sub-band CQI 4 4 4 4
Spatial differential CQI 0 3 0 [3]{.underline} Wide-band i2 0 0 0 0 Sub-band
i2 0 0 0 0 Sub-band label 1 or 2 1 or 2 1 or 2 1 or 2
* * *
Table 5.2.3.3.2-2B: UCI fields for channel quality feedback for UE-selected
sub-band reports (transmission mode 9 configured with PMI/RI reporting with 8
antenna ports and transmission mode 10 configured with PMI/RI reporting with 8
antenna ports)
* * *
Field Bit width  
8 antenna ports  
Rank = 1 Rank = 2, 3 Rank = 4 Rank = 5, 6, 7 Rank = 8  
PTI=0 PTI=1 PTI=0 PTI=1 PTI=0 PTI=1 PTI=0 PTI=1 PTI=0 PTI=1 Wide-band CQI 4 0
4 0 4 0 4 0 4 0 Sub-band CQI 0 4 0 4 0 4 0 4 0 4 Spatial differential CQI 0 0
3 3 3 3 3 3 3 3 Wide-band i2 4 0 4 0 3 0 0 0 0 0 Sub-band i2 0 4 0 2 0 2 0 0 0
0 Sub-band label 0 1 or 2 0 1 or 2 0 1 or 2 0 1 or 2 0 1 or 2
* * *
Table 5.2.3.3.2-2C: UCI fields for channel quality feedback for UE-selected
sub-band reports with 4 antenna ports (transmission modes 8, 9 and 10
configured with PMI/RI reporting, 4 antenna ports and
_alternativeCodeBookEnabledFor4TX-r12=TRUE_)
* * *
Field Bit width  
4 antenna ports  
Rank = 1 Rank = 2 Rank = 3 Rank=4  
PTI=0 PTI=1 PTI=0 PTI=1 PTI=1 PTI=1 Wide-band CQI 4 0 4 0 0 0 Sub-band CQI 0 4
0 4 4 4 Spatial differential CQI 0 0 3 3 3 3 Wide-band i2 4 0 4 0 0 0 Sub-band
i2 0 4 0 2 2 2 Sub-band label 0 1 or 2 0 1 or 2 1 or 2 1 or 2
* * *
Table 5.2.3.3.2-3 shows the fields and the corresponding bit widths for the
wide-band channel quality and precoding matrix information feedback for UE-
selected sub-band reports for PDSCH transmissions associated with transmission
mode 4, transmission mode 5, transmission mode 6 and transmission mode 8
configured with PMI/RI reporting except with
_alternativeCodeBookEnabledFor4TX-r12=TRUE_.
Table 5.2.3.3.2-3: UCI fields for channel quality information feedback for UE-
selected sub-band CQI reports (transmission mode 4, transmission mode 5,
transmission mode 6 and transmission mode 8 configured with PMI/RI reporting
except with _alternativeCodeBookEnabledFor4TX-r12=TRUE_)
* * *
Field Bit width  
2 antenna ports 4 antenna ports  
Rank = 1 Rank = 2 Rank = 1 Rank > 1 Wide-band CQI 4 4 4 4 Spatial differential
CQI 0 3 0 3 Precoding matrix indicator 2 1 4 4
* * *
Table 5.2.3.3.2-3A and Table 5.2.3.3.2-3B show the fields and the
corresponding bit widths for the wide-band channel quality and precoding
matrix information feedback for UE-selected sub-band reports for PDSCH
transmissions associated with transmission mode 9 configured with PMI/RI
reporting with 2/4/8 antenna ports except with
_alternativeCodeBookEnabledFor4TX-r12=TRUE_ and transmission mode 10
configured with PMI/RI reporting with 2/4/8 antenna ports except with
_alternativeCodeBookEnabledFor4TX-r12=TRUE_.
Table 5.2.3.3.2-3C shows the fields and the corresponding bit widths for the
wide-band channel quality and precoding matrix information feedback for UE-
selected sub-band reports for PDSCH transmissions associated with transmission
modes 8, 9 and 10 configured with PMI/RI reporting, 4 antenna ports and
_alternativeCodeBookEnabledFor4TX-r12=TRUE._
Table 5.2.3.3.2-3A: UCI fields for wide-band channel quality and precoding
matrix information feedback for UE-selected sub-band reports (transmission
mode 9 configured with PMI/RI reporting with 2/4 antenna ports except with
_alternativeCodeBookEnabledFor4TX-r12=TRUE,_ and transmission mode 10
configured with PMI/RI reporting with 2/4 antenna ports except with
_alternativeCodeBookEnabledFor4TX-r12=TRUE_)
* * *
Field Bit width  
2 antenna ports 4 antenna ports  
Rank = 1 Rank = 2 Rank = 1 Rank > 1 Wide-band CQI 4 4 4 4 Spatial differential
CQI 0 3 0 3 i1 0 0 0 0 Wide-band i2 2 1 4 4
* * *
Table 5.2.3.3.2-3B: UCI fields for wide-band channel quality and precoding
matrix information feedback for UE-selected sub-band reports (transmission
mode 9 configured with PMI/RI reporting with 8 antenna ports and transmission
mode 10 configured with PMI/RI reporting with 8 antenna ports)
* * *
Field Bit width  
8 antenna ports  
Rank = 1 Rank = 2 Rank = 3  
PTI=0 PTI=1 PTI=0 PTI=1 PTI=0 PTI=1 Wide-band CQI 0 4 0 4 0 4 Spatial
differential CQI 0 0 0 3 0 3 i1 4 0 4 0 2 0 Wide-band i2 0 4 0 4 0 4
Field Bit width  
8 antenna ports  
Rank = 4 Rank = 5, 6, 7 Rank = 8  
PTI=0 PTI=1 PTI=0 PTI=1 PTI=0 PTI=1 Wide-band CQI 0 4 0 4 0 4 Spatial
differential CQI 0 3 0 3 0 3 i1 2 0 2 0 0 0 Wide-band i2 0 3 0 0 0 0
* * *
Table 5.2.3.3.2-3C: UCI fields for wide-band channel quality and precoding
matrix information feedback for UE-selected sub-band reports with 4 antenna
ports (transmission modes 8, 9 and 10 configured with PMI/RI reporting and
_alternativeCodeBookEnabledFor4TX-r12=TRUE_)
* * *
Field Bit width  
4 antenna ports  
Rank = 1 Rank = 2 Rank = 3 Rank=4  
PTI=0 PTI=1 PTI=0 PTI=1 PTI=1 PTI=1 Wide-band CQI 0 4 0 4 4 4 Spatial
differential CQI 0 0 0 3 3 3 i1 4 0 4 0 0 0 Wide-band i2 0 4 0 4 4 4
* * *
Table 5.2.3.3.2-4 shows the fields and the corresponding bit width for the
rank indication feedback for UE-selected sub-band reports for PDSCH
transmissions associated with transmission mode 3, transmission mode 4, and
transmission mode 8 configured with PMI/RI reporting except with
_alternativeCodeBookEnabledFor4TX-r12=TRUE_.
Table 5.2.3.3.2-4: UCI fields for rank indication feedback for UE-selected
sub-band reports (transmission mode 3, transmission mode 4, and transmission
mode 8 configured with PMI/RI reporting except with
_alternativeCodeBookEnabledFor4TX-r12=TRUE_).
* * *
Field Bit width  
2 antenna ports 4 antenna ports  
Max 1or 2 layers Max 4 layers Rank indication 1 1 2
* * *
Table 5.2.3.3.2-4A and Table 5.2.3.3.2-4B show the fields and the
corresponding bit width for the rank indication and precoder type indication
(PTI) feedback for UE-selected sub-band reports for PDSCH transmissions
associated with transmission mode 8 configured with PMI/RI reporting and
_alternativeCodeBookEnabledFor4TX-r12 =TRUE_ , transmission mode 9 configured
with PMI/RI reporting with 2/4/8 antenna ports and transmission mode 10
configured with PMI/RI reporting with 2/4/8 antenna ports.
Table 5.2.3.3.2-4A: UCI fields for joint report of RI and PTI (transmission
mode 9 configured with PMI/RI reporting with 2/4/8 antenna ports except with
_alternativeCodeBookEnabledFor4TX-r12=TRUE,_ and transmission mode 10
configured with PMI/RI reporting with 2/4/8 antenna ports except with
_alternativeCodeBookEnabledFor4TX-r12=TRUE_)
* * *
Field Bit width  
2 antenna ports 4 antenna ports 8 antenna ports  
Max 1or 2 layers Max 4 layers Max 1or 2 layers Max 4 layers Max 8 layers Rank
indication 1 1 2 1 2 3 Precoder type indication - - - 1 1 1
* * *
Table 5.2.3.3.2-4B: UCI fields for joint report of RI and PTI with 4 antenna
ports (transmission mode 8, transmission mode 9 and transmission mode 10
configured with PMI/RI reporting and
_alternativeCodeBookEnabledFor4TX-r12=TRUE_)
* * *
Field Bit width  
4 antenna ports  
Max 1or 2 layers Max 4 layers Rank indication 1 2 Precoder type indication 1 1
* * *
The channel quality bits in Table 5.2.3.3.2-1 through Table 5.2.3.3.2-4B form
the bit sequence $a_{0},a_{1},a_{2},a_{3},\text{.}\text{.}\text{.},a_{A - 1}$
with $a_{0}$ corresponding to the first bit of the first field in each of the
tables, $a_{1}$ corresponding to the second bit of the first field in each of
the tables, and $a_{A - 1}$ corresponding to the last bit in the last field in
each of the tables. The first bit of each field corresponds to MSB and the
last bit LSB. The RI feedback for one bit is mapped according to Table
5.2.2.6-5 with $o_{0}^{\text{RI}}$ replaced by $a_{0}$. The RI feedback for
two bits is mapped according to Table 5.2.2.6-6 with $o_{0}^{\text{RI}}$,
$o_{1}^{\text{RI}}$ replaced by $a_{0},a_{1}$. The RI feedback for three bits
is mapped according to Table 5.2.2.6-7 with $o_{0}^{\text{RI}}$,
$o_{1}^{\text{RI}}$, $o_{2}^{\text{RI}}$ replaced by $a_{0},a_{1},a_{2}$.
When multiplexed with UL-SCH, the channel coding and multiplexing for the
transmission configurations in Table 5.2.3.3.2-4, Table 5.2.3.3.2-4A and Table
5.2.3.3.2-4B is performed assuming RI transmission in section 5.2.2.6. All
other transmission configurations in this section are coded and multiplexed
assuming CQI/PMI transmission in section 5.2.2.6.
#### 5.2.3.4 Channel coding for UCI channel quality information and HARQ-ACK
This section defines the channel coding scheme for the simultaneous
transmission of channel quality information and HARQ-ACK information in a
subframe.
When normal CP is used for uplink transmission, the channel quality
information is coded according to section 5.2.3.3 with input bit sequence
$a_{0}^{'},a_{1}^{'},a_{2}^{'},a_{3}^{'},\text{.}\text{.}\text{.},a_{A^{'} -
1}^{'}$ and output bit sequence
$b_{0}^{'},b_{1}^{'},b_{2}^{'},b_{3}^{'},\text{.}\text{.}\text{.},b_{B^{'} -
1}^{'}$, where $B^{'} = \text{20}$. The HARQ-ACK bits are denoted by
$a_{0}^{''}$ in case one HARQ-ACK bit or $a_{0}^{''},a_{1}^{''}$ in case two
HARQ-ACK bits are reported per subframe. Each positive acknowledgement (ACK)
is encoded as a binary \'1\' and each negative acknowledgement (NACK) is
encoded as a binary \'0\'.
The output of this channel coding block for normal CP is denoted by
$b_{0},b_{1},b_{2},b_{3},\text{.}\text{.}\text{.},b_{B - 1}$, where
In case one HARQ-ACK bit is reported per subframe:
$b_{B^{'}} = a_{0}^{''}$ and $B = \left( B^{'} + 1 \right)$
In case two HARQ-ACK bits are reported per subframe:
$b_{B^{'}} = a_{0}^{''},b_{B^{'} + 1} = a_{1}^{''}$ and $B = \left( B^{'} + 2
\right)$
When extended CP is used for uplink transmission, the channel quality
information and the HARQ-ACK bits are jointly coded. The HARQ-ACK bits are
denoted by $a_{0}^{''}$ in case one HARQ-ACK bit or $\left\lbrack
a_{0}^{''},a_{1}^{''} \right\rbrack$ in case two HARQ-ACK bits are reported
per subframe.
The channel quality information denoted by
$a_{0}^{'},a_{1}^{'},a_{2}^{'},a_{3}^{'},\text{.}\text{.}\text{.},a_{A^{'} -
1}^{'}$ is multiplexed with the HARQ-ACK bits to yield the sequence
$a_{0},a_{1},a_{2},a_{3},\text{.}\text{.}\text{.},a_{A - 1}$ as follows
and
$a_{A^{'}} = a_{0}^{''}$ and $A = \left( A^{'} + 1 \right)$ in case one HARQ-
ACK bit is reported per subframe, or
$a_{A^{'}} = a_{0}^{''}$, $a_{\left( A^{'} + 1 \right)} = a_{1}^{''}$ and $A =
\left( A^{'} + 2 \right)$ in case two HARQ-ACK bits are reported per subframe.
The sequence $a_{0},a_{1},a_{2},a_{3},\text{.}\text{.}\text{.},a_{A - 1}$ is
encoded according to section 5.2.3.3 to yield the output bit sequence
$b_{0},b_{1},b_{2},b_{3},\text{.}\text{.}\text{.},b_{B - 1}$ where $B =
\text{20}$.
### 5.2.4 Uplink control information on PUSCH without UL-SCH data
When control data are sent via PUSCH without UL-SCH data, the following coding
steps can be identified:
\- Channel coding of control information
\- Control information mapping
\- Channel interleaver
#### 5.2.4.1 Channel coding of control information
Control data arrives at the coding unit in the form of channel quality
information (CQI and/or PMI), HARQ-ACK and rank indication. Different coding
rates for the control information are achieved by allocating different number
of coded symbols for its transmission. When the UE transmits HARQ-ACK bits or
rank indicator bits, it shall determine the number of coded symbols $Q^{'}$
for HARQ-ACK or rank indicator as
where $O$ is the number of HARQ-ACK bits as defined in section 5.2.2.6, or
rank indicator bits, $O_{\text{CQI} - \text{MIN}}$ is the number of CQI bits
including CRC bits assuming rank equals to 1 for all serving cells for which
an aperiodic CSI report is triggered [3], $M_{\text{sc}}^{\text{PUSCH}}$ is
the scheduled bandwidth for PUSCH transmission in the current subframe
expressed as a number of subcarriers in [2], and
$N_{\text{symb}}^{\text{PUSCH}}$is the number of SC-FDMA symbols in the
current PUSCH transmission sub-frame given by{width="1.875in"
height="0.2638888888888889in"}, where $N_{\text{SRS}}$is equal to 1 if UE is
configured to send PUSCH and SRS in the same subframe for the current
subframe, or if the PUSCH resource allocation for the current subframe even
partially overlaps with the cell-specific SRS subframe and bandwidth
configuration defined in section 5.5.3 of [2], or if the current subframe is a
UE-specific type-1 SRS subframe as defined in Section 8.2 of [3], or if the
current subframe is a UE-specific type-0 SRS subframe as defined in section
8.2 of [3] and the UE is configured with multiple TAGs. Otherwise
$N_{\text{SRS}}$is equal to 0.
For HARQ-ACK information $Q_{\text{ACK}} = Q_{m} \cdot Q^{'}$ and
[$\beta_{\text{offset}}^{\text{PUSCH}} = \beta_{\text{offset}}^{\text{HARQ} -
\text{ACK}}/\beta_{\text{offset}}^{\text{CQI}}$], where
$\beta_{\text{offset}}^{\text{HARQ} - \text{ACK}}$ shall be determined
according to [3].
For rank indication $Q_{\text{RI}} = Q_{m} \cdot Q^{'}$ and
[$\beta_{\text{offset}}^{\text{PUSCH}} =
\beta_{\text{offset}}^{\text{RI}}/\beta_{\text{offset}}^{\text{CQI}}$], where
$\beta_{\text{offset}}^{\text{RI}}$ shall be determined according to [3].
For CQI and/or PMI information $Q_{\text{CQI}} =
N_{\text{symb}}^{\text{PUSCH}} \cdot M_{\text{sc}}^{\text{PUSCH}} \cdot Q_{m}
- Q_{\text{RI}}$.
The channel coding and rate matching of the control data is performed
according to section 5.2.2.6. The coded output sequence for channel quality
information is denoted by
$q_{0},q_{1},q_{2},q_{3},\text{.}\text{.}\text{.},q_{Q_{\text{CQI}} - 1}$, the
coded vector sequence output for HARQ-ACK is denoted by
${\underline{q}}_{0}^{\text{ACK}},{\underline{q}}_{1}^{\text{ACK}},{\underline{q}}_{2}^{\text{ACK}},\text{.}\text{.}\text{.},{\underline{q}}_{Q_{\text{ACK}}^{'}
- 1}^{\text{ACK}}$ and the coded vector sequence output for rank indication is
denoted by
${\underline{q}}_{0}^{\text{RI}},{\underline{q}}_{1}^{\text{RI}},{\underline{q}}_{2}^{\text{RI}},\text{.}\text{.}\text{.},{\underline{q}}_{Q_{\text{RI}}^{'}
- 1}^{\text{RI}}$.
#### 5.2.4.2 Control information mapping
The input are the coded bits of the channel quality information denoted by
$q_{0},q_{1},q_{2},q_{3},\text{.}\text{.}\text{.},q_{Q_{\text{CQI}} - 1}$. The
output is denoted by
${\underline{g}}_{0},{\underline{g}}_{1},{\underline{g}}_{2},{\underline{g}}_{3},\text{.}\text{.}\text{.},{\underline{g}}_{H^{'}
- 1}$, where $H = Q_{\text{CQI}}$ and $H^{'} = \frac{H}{Q_{m}}$, and
where${\underline{g}}_{i}$, $i = 0,\text{.}\text{.}\text{.},H^{'} - 1$ are
column vectors of length $Q_{m}$. _H_ is the total number of coded bits
allocated for CQI/PMI information.
The control information shall be mapped as follows:
Set _j_ , _k_ to 0
while $j $
1 \
2 \
4 \
* * *
#### 5.3.1.2 Channel coding
Information bits are delivered to the channel coding block. They are denoted
by$c_{0},c_{1},c_{2},c_{3},\text{.}\text{.}\text{.},c_{K - 1}$ , where _K_ is
the number of bits, and they are tail biting convolutionally encoded according
to section 5.1.3.1.
After encoding the bits are denoted
by$d_{0}^{(i)},d_{1}^{(i)},d_{2}^{(i)},d_{3}^{(i)},\text{.}\text{.}\text{.},d_{D
- 1}^{(i)}$, with$i = 0,1,\text{\ and\ }2$, and where _D_ is the number of
bits on the _i_ -th coded stream, i.e., $D = K$.
#### 5.3.1.3 Rate matching
A tail biting convolutionally coded block is delivered to the rate matching
block. This block of coded bits is denoted
by$d_{0}^{(i)},d_{1}^{(i)},d_{2}^{(i)},d_{3}^{(i)},\text{.}\text{.}\text{.},d_{D
- 1}^{(i)}$, with$i = 0,1,\text{\ and\ }2$, and where _i_ is the coded stream
index and _D_ is the number of bits in each coded stream. This coded block is
rate matched according to section 5.1.4.2.
After rate matching, the bits are denoted
by$e_{0},e_{1},e_{2},e_{3},\text{.}\text{.}\text{.},e_{E - 1}$, where _E_ is
the number of rate matched bits as defined in section 6.6.1 of [2].
### 5.3.2 Downlink shared channel, Paging channel and Multicast channel
Figure 5.3.2-1 shows the processing structure for each transport block for the
DL-SCH, PCH and MCH transport channels. Data arrives to the coding unit in the
form of a maximum of two transport blocks every transmission time interval
(TTI) per DL cell. The following coding steps can be identified for each
transport block of a DL cell:
\- Add CRC to the transport block
\- Code block segmentation and code block CRC attachment
\- Channel coding
\- Rate matching
\- Code block concatenation
The coding steps for PCH and MCH transport channels, and for one transport
block of DL-SCH are shown in the figure below. The same processing applies for
each transport block on each DL cell.
Figure 5.3.2-1: Transport block processing for DL-SCH, PCH and MCH.
#### 5.3.2.1 Transport block CRC attachment
Error detection is provided on transport blocks through a Cyclic Redundancy
Check (CRC).
The entire transport block is used to calculate the CRC parity bits. Denote
the bits in a transport block delivered to layer 1
by$a_{0},a_{1},a_{2},a_{3},\text{.}\text{.}\text{.},a_{A - 1}$, and the parity
bits by$p_{0},p_{1},p_{2},p_{3},\text{.}\text{.}\text{.},p_{L - 1}$. _A_ is
the size of the transport block and _L_ is the number of parity bits. The
lowest order information bit _a_ ~0~ is mapped to the most significant bit of
the transport block as defined in section 6.1.1 of [5].
The parity bits are computed and attached to the transport block according to
section 5.1.1 setting _L_ to 24 bits and using the generator polynomial
g~CRC24A~(_D_).
#### 5.3.2.2 Code block segmentation and code block CRC attachment
The bits input to the code block segmentation are denoted by
$b_{0},b_{1},b_{2},b_{3},\text{.}\text{.}\text{.},b_{B - 1}$ where _B_ is the
number of bits in the transport block (including CRC).
Code block segmentation and code block CRC attachment are performed according
to section 5.1.2.
The bits after code block segmentation are denoted
by$c_{r0},c_{r1},c_{r2},c_{r3},\text{.}\text{.}\text{.},c_{r\left( K_{r} - 1
\right)}$, where _r_ is the code block number and _K~r~_ is the number of bits
for code block number _r_.
#### 5.3.2.3 Channel coding
Code blocks are delivered to the channel coding block. They are denoted
by$c_{r0},c_{r1},c_{r2},c_{r3},\text{.}\text{.}\text{.},c_{r\left( K_{r} - 1
\right)}$ , where _r_ is the code block number, and _K~r~_ is the number of
bits in code block number _r_. The total number of code blocks is denoted by
_C_ and each code block is individually turbo encoded according to section
5.1.3.2.
After encoding the bits are denoted
by$d_{r0}^{(i)},d_{r1}^{(i)},d_{r2}^{(i)},d_{r3}^{(i)},\text{.}\text{.}\text{.},d_{r\left(
D_{r} - 1 \right)}^{(i)}$, with$i = 0,1,\text{\ and\ }2$, and where $D_{r}$ is
the number of bits on the _i_ -th coded stream for code block number _r_ ,
i.e.$D_{r} = K_{r} + 4$.
#### 5.3.2.4 Rate matching
Turbo coded blocks are delivered to the rate matching block. They are denoted
by$d_{r0}^{(i)},d_{r1}^{(i)},d_{r2}^{(i)},d_{r3}^{(i)},\text{.}\text{.}\text{.},d_{r\left(
D_{r} - 1 \right)}^{(i)}$, with$i = 0,1,\text{\ and\ }2$, and where _r_ is the
code block number, _i_ is the coded stream index, and $D_{r}$ is the number of
bits in each coded stream of code block number _r_. The total number of code
blocks is denoted by _C_ and each coded block is individually rate matched
according to section 5.1.4.1.
After rate matching, the bits are denoted
by$e_{r0},e_{r1},e_{r2},e_{r3},\text{.}\text{.}\text{.},e_{r\left( E_{r} - 1
\right)}$, where _r_ is the coded block number, and where $E_{r}$ is the
number of rate matched bits for code block number _r_.
#### 5.3.2.5 Code block concatenation
The bits input to the code block concatenation block are denoted by
$e_{r0},e_{r1},e_{r2},e_{r3},\text{.}\text{.}\text{.},e_{r\left( E_{r} - 1
\right)}$ for $r = 0,\text{.}\text{.}\text{.},C - 1$ and where $E_{r}$ is the
number of rate matched bits for the _r_ -th code block.
Code block concatenation is performed according to section 5.1.5.
The bits after code block concatenation are denoted
by$f_{0},f_{1},f_{2},f_{3},\text{.}\text{.}\text{.},f_{G - 1}$, where _G_ is
the total number of coded bits for transmission. This sequence of coded bits
corresponding to one transport block after code block concatenation is
referred to as one codeword in section 6.3.1 of [2]. In case of multiple
transport blocks per TTI, the transport block to codeword mapping is specified
according to section 5.3.3.1.5, 5.3.3.1.5A or 5.3.3.1.5B, depending on the DCI
Format.
### 5.3.3 Downlink control information
A DCI transports downlink, uplink or sidelink scheduling information, requests
for aperiodic CQI reports, notifications of MCCH change [6] or uplink power
control commands for one cell and one RNTI. The RNTI is implicitly encoded in
the CRC.
Figure 5.3.3-1 shows the processing structure for one DCI. The following
coding steps can be identified:
\- Information element multiplexing
\- CRC attachment
\- Channel coding
\- Rate matching
The coding steps for DCI are shown in the figure below.
Figure 5.3.3-1: Processing for one DCI.
#### 5.3.3.1 DCI formats
The fields defined in the DCI formats below are mapped to the information bits
_a_ ~0~ to _a~A~_ ~-1~ as follows.
Each field is mapped in the order in which it appears in the description,
including the zero-padding bit(s), if any, with the first field mapped to the
lowest order information bit _a_ ~0~ and each successive field mapped to
higher order information bits. The most significant bit of each field is
mapped to the lowest order information bit for that field, e.g. the most
significant bit of the first field is mapped to _a_ ~0~.
##### 5.3.3.1.1 Format 0
DCI format 0 is used for the scheduling of PUSCH in one UL cell.
The following information is transmitted by means of the DCI format 0:
\- Carrier indicator -- 0 or 3 bits. This field is present according to the
definitions in [3].
\- Flag for format0/format1A differentiation -- 1 bit, where value 0 indicates
format 0 and value 1 indicates format 1A
\- Frequency hopping flag -- 1 bit as defined in section 8.4 of [3]. This
field is used as the MSB of the corresponding resource allocation field for
resource allocation type 1.
\- Resource block assignment and hopping resource allocation -- $\left\lceil
\text{log}_{2}(N_{\text{RB}}^{\text{UL}}(N_{\text{RB}}^{\text{UL}} +
1\frac{)}{2}) \right\rceil$ bits
\- For PUSCH hopping (resource allocation type 0 only):
\- _N~UL_hop~_ MSB bits are used to obtain the value of
${\overset{\sim}{n}}_{\text{PRB}}(i)$ as indicated in section 8.4 of [3]
> \- $\left( \left\lceil
> \text{log}_{2}(N_{\text{RB}}^{\text{UL}}(N_{\text{RB}}^{\text{UL}} +
> 1\frac{)}{2}) \right\rceil - N_{\text{UL_hop}} \right)$ bits provide the
> resource allocation of the first slot in the UL subframe
>
> \- For non-hopping PUSCH with resource allocation type 0:
>
> \- $\left( \left\lceil
> \text{log}_{2}(N_{\text{RB}}^{\text{UL}}(N_{\text{RB}}^{\text{UL}} +
> 1\frac{)}{2}) \right\rceil \right)$ bits provide the resource allocation in
> the UL subframe as defined in section 8.1.1 of [3]
>
> \- For non-hopping PUSCH with resource allocation type 1:
>
> \- The concatenation of the frequency hopping flag field and the resource
> block assignment and hopping resource allocation field provides the resource
> allocation field in the UL subframe as defined in section 8.1.2 of [3]
\- Modulation and coding scheme and redundancy version -- 5 bits as defined in
section 8.6 of [3]
\- New data indicator -- 1 bit
\- TPC command for scheduled PUSCH -- 2 bits as defined in section 5.1.1.1 of
[3]
\- Cyclic shift for DM RS and OCC index -- 3 bits as defined in section
5.5.2.1.1 of [2]
\- UL index -- 2 bits as defined in sections 5.1.1.1, 7.2.1, 8 and 8.4 of [3]
(this field is present only for TDD operation with uplink-downlink
configuration 0)
\- Downlink Assignment Index (DAI) -- 2 bits as defined in section 7.3 of [3]
(this field is present only for cases with TDD primary cell and either TDD
operation with uplink-downlink configurations 1-6 or FDD operation)
\- CSI request -- 1 or 2 bits as defined in section 7.2.1 of [3]. The 2-bit
field applies to
\- UEs that are configured with more than one DL cell and when the
corresponding DCI format is mapped onto the UE specific search space given by
the C-RNTI as defined in [3];
\- UEs that are configured by higher layers with more than one CSI process and
when the corresponding DCI format is mapped onto the UE specific search space
given by the C-RNTI as defined in [3];
\- UEs that are configured with two CSI measurement sets by higher layers with
the parameter _csi-MeasSubframeSet,_ and when the corresponding DCI format is
mapped onto the UE specific search space given by the C-RNTI as defined in
[3];
otherwise the 1-bit field applies
\- SRS request -- 0 or 1 bit. This field can only be present in DCI formats
scheduling PUSCH which are mapped onto the UE specific search space given by
the C-RNTI as defined in [3]. The interpretation of this field is provided in
section 8.2 of [3]
\- Resource allocation type -- 1 bit. This field is only present if
$N_{\text{RB}}^{\text{UL}} \leq N_{\text{RB}}^{\text{DL}}$. The interpretation
of this field is provided in section 8.1 of [3]
If the number of information bits in format 0 mapped onto a given search space
is less than the payload size of format 1A for scheduling the same serving
cell and mapped onto the same search space (including any padding bits
appended to format 1A), zeros shall be appended to format 0 until the payload
size equals that of format 1A.
##### 5.3.3.1.2 Format 1
DCI format 1 is used for the scheduling of one PDSCH codeword in one cell.
The following information is transmitted by means of the DCI format 1:
\- Carrier indicator -- 0 or 3 bits. This field is present according to the
definitions in [3].
\- Resource allocation header (resource allocation type 0 / type 1) -- 1 bit
as defined in section 7.1.6 of [3]
If downlink bandwidth is less than or equal to 10 PRBs, there is no resource
allocation header and resource allocation type 0 is assumed.
\- Resource block assignment:
> \- For resource allocation type 0 as defined in section 7.1.6.1 of [3]:
>
> \- $\left\lceil \frac{N_{\text{RB}}^{\text{DL}}}{P} \right\rceil$bits
> provide the resource allocation
>
> \- For resource allocation type 1 as defined in section 7.1.6.2 of [3]:
>
> \- $\left\lceil \text{log}_{2}\left( P \right) \right\rceil$ bits of this
> field are used as a header specific to this resource allocation type to
> indicate the selected resource blocks subset
>
> \- 1 bit indicates a shift of the resource allocation span
>
> \- $\left( \left\lceil \frac{N_{\text{RB}}^{\text{DL}}}{P} \right\rceil -
> \left\lceil \text{log}_{2}\left( P \right) \right\rceil - 1 \right)$ bits
> provide the resource allocation
>
> where the value of P depends on the number of DL resource blocks as
> indicated in section 7.1.6.1 of [3]
\- Modulation and coding scheme -- 5 bits as defined in section 7.1.7 of [3]
\- HARQ process number -- 3 bits (for cases with FDD primary cell), 4 bits
(for cases with TDD primary cell)
\- New data indicator -- 1 bit
\- Redundancy version -- 2 bits
\- TPC command for PUCCH -- 2 bits as defined in section 5.1.2.1 of [3]
\- Downlink Assignment Index -- number of bits as specified in Table
5.3.3.1.2-2.
\- HARQ-ACK resource offset (this field is present when this format is carried
by EPDCCH. This field is not present when this format is carried by PDCCH) --
2 bits as defined in section 10.1 of [3]. The 2 bits are set to 0 when this
format is carried by EPDCCH on a secondary cell, or when this format is
carried by EPDCCH on the primary cell scheduling PDSCH on a secondary cell and
the UE is configured with PUCCH format 3 for HARQ-ACK feedback.
If the UE is not configured to decode PDCCH or EPDCCH with CRC scrambled by
the C-RNTI and the number of information bits in format 1 is equal to that for
format 0/1A, one bit of value zero shall be appended to format 1.
If the UE is configured to decode PDCCH or EPDCCH with CRC scrambled by the
C-RNTI and the number of information bits in format 1 is equal to that for
format 0/1A for scheduling the same serving cell and mapped onto the UE
specific search space given by the C-RNTI as defined in [3], one bit of value
zero shall be appended to format 1.
If the number of information bits in format 1 carried by PDCCH belongs to one
of the sizes in Table 5.3.3.1.2-1, one or more zero bit(s) shall be appended
to format 1 until the payload size of format 1 does not belong to one of the
sizes in Table 5.3.3.1.2-1 and is not equal to that of format 0/1A mapped onto
the same search space.
Table 5.3.3.1.2-1: Ambiguous Sizes of Information Bits.
* * *
{12, 14, 16 ,20, 24, 26, 32, 40, 44, 56}
* * *
Table 5.3.3.1.2-2: Number of bits for Downlink Assignment Index.
+---------+-----------------------------------------------------------+ | Number\ | | | of bits | | +---------+-----------------------------------------------------------+ | 2 | This field is present for FDD or TDD operation, for cases | | | with TDD primary cell. | | | | | | If the UL/DL configuration of all TDD serving cells is | | | same and the UE is not configured to decode PDCCH with | | | CRC scrambled by _eimta-RNTI_ , then this field only | | | applies to serving cell with UL/DL configuration 1-6 | | | | | | If at least two TDD serving cells have different UL/DL | | | configurations or the UE is configured to decode PDCCH | | | with CRC scrambled by _eimta-RNTI_ , then this field | | | applies to a serving cell with DL-reference UL/DL | | | configuration 1-6 as defined in section 10.2 of [3] | +---------+-----------------------------------------------------------+ | 0 | This field is not present for FDD or TDD operation, for | | | cases with FDD primary cell. | +---------+-----------------------------------------------------------+
##### 5.3.3.1.3 Format 1A
DCI format 1A is used for the compact scheduling of one PDSCH codeword in one
cell and random access procedure initiated by a PDCCH order. The DCI
corresponding to a PDCCH order can be carried by PDCCH or EPDCCH.
The following information is transmitted by means of the DCI format 1A:
\- Carrier indicator -- 0 or 3 bits. This field is present according to the
definitions in [3].
\- Flag for format0/format1A differentiation -- 1 bit, where value 0 indicates
format 0 and value 1 indicates format 1A
Format 1A is used for random access procedure initiated by a PDCCH order only
if format 1A CRC is scrambled with C-RNTI and all the remaining fields are set
as follows:
> \- Localized/Distributed VRB assignment flag -- 1 bit is set to \'0\'
>
> \- Resource block assignment -- $\left\lceil
> \text{log}_{2}(N_{\text{RB}}^{\text{DL}}(N_{\text{RB}}^{\text{DL}} +
> 1\frac{)}{2}) \right\rceil$bits, where all bits shall be set to 1
>
> \- Preamble Index -- 6 bits
>
> \- PRACH Mask Index -- 4 bits, [5]
>
> \- All the remaining bits in format 1A for compact scheduling assignment of
> one PDSCH codeword are set to zero
Otherwise,
\- Localized/Distributed VRB assignment flag -- 1 bit as defined in 7.1.6.3 of
[3]
\- Resource block assignment -- $\left\lceil
\text{log}_{2}(N_{\text{RB}}^{\text{DL}}(N_{\text{RB}}^{\text{DL}} +
1\frac{)}{2}) \right\rceil$bits as defined in section 7.1.6.3 of [3]:
> \- For localized VRB:
>
> $\left\lceil
> \text{log}_{2}(N_{\text{RB}}^{\text{DL}}(N_{\text{RB}}^{\text{DL}} +
> 1\frac{)}{2}) \right\rceil$bits provide the resource allocation
>
> \- For distributed VRB:
>
> \- If $N_{\text{RB}}^{\text{DL}}  scrambled by RA-RNTI, P-RNTI, or SI-RNTI
>
> \- $\left\lceil
> \text{log}_{2}(N_{\text{RB}}^{\text{DL}}(N_{\text{RB}}^{\text{DL}} +
> 1\frac{)}{2}) \right\rceil$bits provide the resource allocation
>
> \- Else
>
> \- 1 bit, the MSB indicates the gap value, where value 0 indicates
> $N_{\text{gap}} = N_{\text{gap,1}}$ and **value 1 indicates**
> $N_{\text{gap}} = N_{\text{gap,2}}$
>
> \- $(\left\lceil
> \text{log}_{2}(N_{\text{RB}}^{\text{DL}}(N_{\text{RB}}^{\text{DL}} +
> 1\frac{)}{2}) \right\rceil - 1)$ bits provide the resource allocation,
>
> where $N_{\text{gap}}$ is defined in [2].
\- Modulation and coding scheme -- 5bits as defined in section 7.1.7 of [3]
\- HARQ process number -- 3 bits (for cases with FDD primary cell) , 4 bits
(for cases with TDD primary cell)
\- New data indicator -- 1 bit
\- If the format 1A CRC is scrambled by RA-RNTI, P-RNTI, or SI-RNTI:
> \- If $N_{\text{RB}}^{\text{DL}} \geq \text{50}$ and Localized/Distributed
> VRB assignment flag is set to 1
>
> \- the new data indicator bit indicates the gap value, where value 0
> indicates $N_{\text{gap}} = N_{\text{gap,1}}$ **and value 1 indicates**
> $N_{\text{gap}} = N_{\text{gap,2}}$.
\- Else the new data indicator bit is reserved.
\- Else
\- The new data indicator bit as defined in [5]
\- Redundancy version -- 2 bits
\- TPC command for PUCCH -- 2 bits as defined in section 5.1.2.1 of [3]
\- If the format 1A CRC is scrambled by RA-RNTI, P-RNTI, or SI-RNTI:
\- The most significant bit of the TPC command is reserved.
\- The least significant bit of the TPC command indicates column of the TBS
table defined of [3].
\- If least significant bit is 0 then = 2 else= 3.
\- Else
\- The two bits including the most significant bit indicates the TPC command
\- Downlink Assignment Index -- number of bits as specified in Table
5.3.3.1.2-2.
\- SRS request -- 0 or 1 bit. This field can only be present in DCI formats
scheduling PDSCH which are mapped onto the UE specific search space given by
the C-RNTI as defined in [3]. The interpretation of this field is provided in
section 8.2 of [3]
\- HARQ-ACK resource offset (this field is present when this format is carried
by EPDCCH. This field is not present when this format is carried by PDCCH) --
2 bits as defined in section 10.1 of [3]. The 2 bits are set to 0 when this
format is carried by EPDCCH on a secondary cell, or when this format is
carried by EPDCCH on the primary cell scheduling PDSCH on a secondary cell and
the UE is configured with PUCCH format 3 for HARQ-ACK feedback.
If the UE is not configured to decode PDCCH or EPDCCH with CRC scrambled by
the C-RNTI, and the number of information bits in format 1A is less than that
of format 0, zeros shall be appended to format 1A until the payload size
equals that of format 0.
If the UE is configured to decode PDCCH or EPDCCH with CRC scrambled by the
C-RNTI and the number of information bits in format 1A mapped onto a given
search space is less than that of format 0 for scheduling the same serving
cell and mapped onto the same search space, zeros shall be appended to format
1A until the payload size equals that of format 0, except when format 1A
assigns downlink resource on a secondary cell without an uplink configuration
associated with the secondary cell.
If the number of information bits in format 1A carried by PDCCH belongs to one
of the sizes in Table 5.3.3.1.2-1, one zero bit shall be appended to format
1A.
When the format 1A CRC is scrambled with a RA-RNTI, P-RNTI, or SI-RNTI then
the following fields among the fields above are reserved:
> \- HARQ process number
>
> \- Downlink Assignment Index (used for cases with TDD primary cell and
> either FDD operation or TDD operation, and is not present for cases with FDD
> primary cell and either FDD operation or TDD operation)
##### 5.3.3.1.3A Format 1B
DCI format 1B is used for the compact scheduling of one PDSCH codeword in one
cell with precoding information.
The following information is transmitted by means of the DCI format 1B:
\- Carrier indicator -- 0 or 3 bits. The field is present according to the
definitions in [3].
\- Localized/Distributed VRB assignment flag -- 1 bit as defined in section
7.1.6.3 of [3]
\- Resource block assignment -- $\left\lceil
\text{log}_{2}(N_{\text{RB}}^{\text{DL}}(N_{\text{RB}}^{\text{DL}} +
1\frac{)}{2}) \right\rceil$bits as defined in section 7.1.6.3 of [3]
> \- For localized VRB:
>
> $\left\lceil
> \text{log}_{2}(N_{\text{RB}}^{\text{DL}}(N_{\text{RB}}^{\text{DL}} +
> 1\frac{)}{2}) \right\rceil$bits provide the resource allocation
>
> \- For distributed VRB:
>
> \- For $N_{\text{RB}}^{\text{DL}} 
> \- $\left\lceil
> \text{log}_{2}(N_{\text{RB}}^{\text{DL}}(N_{\text{RB}}^{\text{DL}} +
> 1\frac{)}{2}) \right\rceil$bits provide the resource allocation
>
> \- For $N_{\text{RB}}^{\text{DL}} \geq \text{50}$
>
> \- 1 bit, the MSB indicates the gap value, where value 0 indicates
> $N_{\text{gap}} = N_{\text{gap,1}}$ and **value 1 indicates**
> $N_{\text{gap}} = N_{\text{gap,2}}$
>
> \- $(\left\lceil
> \text{log}_{2}(N_{\text{RB}}^{\text{DL}}(N_{\text{RB}}^{\text{DL}} +
> 1\frac{)}{2}) \right\rceil - 1)$ bits provide the resource allocation
\- Modulation and coding scheme -- 5bits as defined in section 7.1.7 of [3]
\- HARQ process number -- 3 bits (for cases with FDD primary cell) , 4 bits
(for cases with TDD primary cell)
\- New data indicator -- 1 bit
\- Redundancy version -- 2 bits
\- TPC command for PUCCH -- 2 bits as defined in section 5.1.2.1 of [3]
\- Downlink Assignment Index -- number of bits as specified in Table
5.3.3.1.2-2.
\- TPMI information for precoding -- number of bits as specified in Table
5.3.3.1.3A-1
> TPMI information indicates which codebook index is used in Table 6.3.4.2.3-1
> or Table 6.3.4.2.3-2 of [2] corresponding to the single-layer transmission.
>
> \- PMI confirmation for precoding -- 1 bit as specified in Table
> 5.3.3.1.3A-2
\- HARQ-ACK resource offset (this field is present when this format is carried
by EPDCCH. This field is not present when this format is carried by PDCCH) --
2 bits as defined in section 10.1 of [3]. The 2 bits are set to 0 when this
format is carried by EPDCCH on a secondary cell, or when this format is
carried by EPDCCH on the primary cell scheduling PDSCH on a secondary cell and
the UE is configured with PUCCH format 3 for HARQ-ACK feedback.
If PMI confirmation indicates that the eNodeB has applied precoding according
to PMI(s) reported by the UE, the precoding for the corresponding RB(s) in
subframe _n_ is according to the latest PMI(s) in an aperiodic CSI reported on
or before subframe _n-_ 4.
Table 5.3.3.1.3A-1: Number of bits for TPMI information.
* * *
Number of antenna ports\ Number\ at eNodeB of bits
2 2
4 4
* * *
Table 5.3.3.1.3A-2: Content of PMI confirmation.
+---------------------------+-----------------------------------------+ | Bit field mapped to index | Message | +---------------------------+-----------------------------------------+ | 0 | Precoding according to the indicated | | | TPMI in the TPMI information field | +---------------------------+-----------------------------------------+ | 1 | Precoding using the precoder(s) | | | according to PMI(s) indicated in the | | | latest aperiodic CSI report. | | | | | | For aperiodic CSI mode 2-2: | | | | | | - Precoding of scheduled resource | | | blocks belonging to the reported | | | preferred M subband(s), use precoder(s) | | | according to the preferred M subband | | | PMI(s) indicated in the latest | | | aperiodic CSI report; | | | | | | - Precoding of scheduled resource | | | blocks not belonging to the reported | | | preferred M subband(s), precoding using | | | a precoder according to the wideband | | | PMI indicated in the latest aperiodic | | | CSI report. | +---------------------------+-----------------------------------------+
If the number of information bits in format 1B is equal to that for format
0/1A for scheduling the same serving cell and mapped onto the UE specific
search space given by the C-RNTI as defined in [3], one bit of value zero
shall be appended to format 1B.
If the number of information bits in format 1B carried by PDCCH belongs to one
of the sizes in Table 5.3.3.1.2-1, one or more zero bit(s) shall be appended
to format 1B until the payload size of format 1B does not belong to one of the
sizes in Table 5.3.3.1.2-1 and is not equal to that of format 0/1A mapped onto
the same search space.
##### 5.3.3.1.4 Format 1C
DCI format 1C is used for very compact scheduling of one PDSCH codeword,
notifying MCCH change [6] , and reconfiguring TDD.
The following information is transmitted by means of the DCI format 1C:
If the format 1C is used for very compact scheduling of one PDSCH codeword
\- 1 bit indicates the gap value, where value 0 indicates $N_{\text{gap}} =
N_{\text{gap,1}}$ and value 1 indicates $N_{\text{gap}} = N_{\text{gap,2}}$
\- For$N_{\text{RB}}^{\text{DL}}  Else
\- UL/DL configuration indication:
UL/DL configuration number 1, UL/DL configuration number 2,..., UL/DL
configuration number _I_
Where each UL/DL configuration is 3 bits, , $L_{\text{format\ 1c}}$ is equal
to the payload size of format 1C used for very compact scheduling of one PDSCH
codeword. The parameter _eimta-UL-DL-ConfigIndex_ provided by higher layers
determines the index to the UL/DL configuration indication for a serving cell.
\- Zeros are added until the size is equal to that of format 1C used for very
compact scheduling of one PDSCH codeword
##### 5.3.3.1.4A Format 1D
DCI format 1D is used for the compact scheduling of one PDSCH codeword in one
cell with precoding and power offset information.
The following information is transmitted by means of the DCI format 1D:
\- Carrier indicator -- 0 or 3 bits. The field is present according to the
definitions in [3].
\- Localized/Distributed VRB assignment flag -- 1 bit as defined in section
7.1.6.3 of [3]
\- Resource block assignment -- $\left\lceil
\text{log}_{2}(N_{\text{RB}}^{\text{DL}}(N_{\text{RB}}^{\text{DL}} +
1\frac{)}{2}) \right\rceil$bits as defined in section 7.1.6.3 of [3]:
> \- For localized VRB:
>
> $\left\lceil
> \text{log}_{2}(N_{\text{RB}}^{\text{DL}}(N_{\text{RB}}^{\text{DL}} +
> 1\frac{)}{2}) \right\rceil$bits provide the resource allocation
>
> \- For distributed VRB:
>
> \- For $N_{\text{RB}}^{\text{DL}} 
> \- $\left\lceil
> \text{log}_{2}(N_{\text{RB}}^{\text{DL}}(N_{\text{RB}}^{\text{DL}} +
> 1\frac{)}{2}) \right\rceil$bits provide the resource allocation
>
> \- For $N_{\text{RB}}^{\text{DL}} \geq \text{50}$
>
> \- 1 bit, the MSB indicates the gap value, where value 0 indicates
> $N_{\text{gap}} = N_{\text{gap,1}}$ and **value 1 indicates**
> $N_{\text{gap}} = N_{\text{gap,2}}$
>
> \- $(\left\lceil
> \text{log}_{2}(N_{\text{RB}}^{\text{DL}}(N_{\text{RB}}^{\text{DL}} +
> 1\frac{)}{2}) \right\rceil - 1)$ bits provide the resource allocation
\- Modulation and coding scheme -- 5bits as defined in section 7.1.7 of [3]
\- HARQ process number -- 3 bits (for cases with FDD primary cell), 4 bits
(for cases with TDD primary cell)
\- New data indicator -- 1 bit
\- Redundancy version -- 2 bits
\- TPC command for PUCCH -- 2 bits as defined in section 5.1.2.1 of [3]
\- Downlink Assignment Index -- number of bits as specified in Table
5.3.3.1.2-2.
\- TPMI information for precoding -- number of bits as specified in Table
5.3.3.1.4A-1
> TPMI information indicates which codebook index is used in Table 6.3.4.2.3-1
> or Table 6.3.4.2.3-2 of [2] corresponding to the single-layer transmission.
\- Downlink power offset -- 1 bit as defined in section 7.1.5 of [3]
\- HARQ-ACK resource offset (this field is present when this format is carried
by EPDCCH. This field is not present when this format is carried by PDCCH) --
2 bits as defined in section 10.1 of [3]. The 2 bits are set to 0 when this
format is carried by EPDCCH on a secondary cell, or when this format is
carried by EPDCCH on the primary cell scheduling PDSCH on a secondary cell and
the UE is configured with PUCCH format 3 for HARQ-ACK feedback.
Table 5.3.3.1.4A-1: Number of bits for TPMI information.
* * *
Number of antenna ports\ Number\ at eNodeB of bits
2 2
4 4
* * *
If the number of information bits in format 1D is equal to that for format
0/1A for scheduling the same serving cell and mapped onto the UE specific
search space given by the C-RNTI as defined in [3], one bit of value zero
shall be appended to format 1D.
If the number of information bits in format 1D carried by PDCCH belongs to one
of the sizes in Table 5.3.3.1.2-1, one or more zero bit(s) shall be appended
to format 1D until the payload size of format 1D does not belong to one of the
sizes in Table 5.3.3.1.2-1 and is not equal to that of format 0/1A mapped onto
the same search space.
##### 5.3.3.1.5 Format 2
The following information is transmitted by means of the DCI format 2:
\- Carrier indicator -- 0 or 3 bits. The field is present according to the
definitions in [3].
\- Resource allocation header (resource allocation type 0 / type 1) -- 1 bit
as defined in section 7.1.6 of [3]
If downlink bandwidth is less than or equal to 10 PRBs, there is no resource
allocation header and resource allocation type 0 is assumed.
\- Resource block assignment:
> \- For resource allocation type 0 defined in section 7.1.6.1 of [3]:
>
> \- $\left\lceil \frac{N_{\text{RB}}^{\text{DL}}}{P} \right\rceil$bits
> provide the resource allocation
>
> \- For resource allocation type 1 as defined in section 7.1.6.2 of [3]:
>
> \- $\left\lceil \text{log}_{2}\left( P \right) \right\rceil$ bits of this
> field are used as a header specific to this resource allocation type to
> indicate the selected resource blocks subset
>
> \- 1 bit indicates a shift of the resource allocation span
>
> \- $\left( \left\lceil \frac{N_{\text{RB}}^{\text{DL}}}{P} \right\rceil -
> \left\lceil \text{log}_{2}\left( P \right) \right\rceil - 1 \right)$ bits
> provide the resource allocation
where the value of P depends on the number of DL resource blocks as indicated
in section 7.1.6.1 of [3]
\- TPC command for PUCCH -- 2 bits as defined in section 5.1.2.1 of [3]
\- Downlink Assignment Index -- number of bits as specified in Table
5.3.3.1.2-2.
\- HARQ process number - 3 bits (for cases with FDD primary cell), 4 bits (for
cases with TDD primary cell)
\- Transport block to codeword swap flag -- 1 bit
In addition, for transport block 1:
> \- Modulation and coding scheme -- 5 bits as defined in section 7.1.7 of [3]
>
> \- New data indicator -- 1 bit
>
> \- Redundancy version -- 2 bits
In addition, for transport block 2:
> \- Modulation and coding scheme -- 5 bits as defined in section 7.1.7 of [3]
>
> \- New data indicator -- 1 bit
>
> \- Redundancy version -- 2 bits
\- Precoding information -- number of bits as specified in Table 5.3.3.1.5-3
\- HARQ-ACK resource offset (this field is present when this format is carried
by EPDCCH. This field is not present when this format is carried by PDCCH) --
2 bits as defined in section 10.1 of [3]. The 2 bits are set to 0 when this
format is carried by EPDCCH on a secondary cell, or when this format is
carried by EPDCCH on the primary cell scheduling PDSCH on a secondary cell and
the UE is configured with PUCCH format 3 for HARQ-ACK feedback.
If both transport blocks are enabled, the transport block to codeword mapping
is specified according to Table 5.3.3.1.5‑1.
In case one of the transport blocks is disabled as specified in section
7.1.7.2 of [3], the transport block to codeword swap flag is reserved and the
transport block to codeword mapping is specified according to Table
5.3.3.1.5‑2.
Table 5.3.3.1.5-1: Transport block to codeword mapping\ (two transport blocks
enabled).
* * *
transport block\ codeword 0\ codeword 1\ to codeword\ (enabled) (enabled) swap
flag value
0 transport block 1 transport block 2
1 transport block 2 transport block 1
* * *
Table 5.3.3.1.5-2: Transport block to codeword mapping\ (one transport block
enabled).
* * *
transport block 1 transport block 2 codeword 0\ codeword 1\ (enabled)
(disabled)
enabled disabled transport block 1 -
disabled enabled transport block 2 -
* * *
The interpretation of the precoding information field depends on the number of
enabled codewords according to Table 5.3.3.1.5-4 and Table 5.3.3.1.5-5. Note
that TPMI indicates which codebook index is used in Table 6.3.4.2.3-1 or Table
6.3.4.2.3-2 of [2]. For a single enabled codeword, indices 18 to 34 inclusive
in Table 5.3.3.1.5-5 are only supported for retransmission of the
corresponding transport block if that transport block has previously been
transmitted using two layers with closed-loop spatial multiplexing.
If the number of information bits in format 2 carried by PDCCH belongs to one
of the sizes in Table 5.3.3.1.2-1, one zero bit shall be appended to format 2.
Some entries in Table 5.3.3.1.5-4 and Table 5.3.3.1.5-5 are used for
indicating that the eNodeB has applied precoding according to PMI(s) reported
by the UE. In these cases the precoding for the corresponding RB(s) in
subframe _n_ is according to the latest PMI(s) in an aperiodic CSI reported on
or before subframe _n_ -4. For aperiodic CSI mode 2-2: Precoding of scheduled
resource blocks belonging to the reported preferred M subband(s) use
precoder(s) according to the preferred M subband PMI indicated by the latest
aperiodic CSI report; Precoding of scheduled resource blocks not belonging to
the reported preferred M subband(s) use a precoder according to the wideband
PMI indicated by the latest aperiodic CSI report.
Table 5.3.3.1.5-3: Number of bits for precoding information.
* * *
Number of antenna ports at eNodeB Number of bits for precoding information 2 3
4 6
* * *
Table 5.3.3.1.5-4: Content of precoding information field for 2 antenna ports.
+----------------+----------------+----------------+----------------+ | One codeword: | Two codewords: | | | | | | | | | Codeword 0 | Codeword 0 | | | | enabled, | enabled, | | | | | | | | | Codeword 1 | Codeword 1 | | | | disabled | enabled | | | +----------------+----------------+----------------+----------------+ | **Bit field |** Message**|** Bit field | **Message** | | mapped to | | mapped to | | | index**| | index** | | +----------------+----------------+----------------+----------------+ | 0 | 2 layers: | 0 | 2 layers: | | | Transmit | | Precoding | | | diversity | | corresponding | | | | | to precoder | | | | | matrix | | | | | $\frac{1}{2}\ | | | | | begin{bmatrix} | | | | | 1 & 1 \ | | | | | 1 & \- 1 \ | | | | | \end{bmatrix}$ | +----------------+----------------+----------------+----------------+ | 1 | 1 layer: | 1 | 2 layers: | | | Precoding | | Precoding | | | corresponding | | corresponding | | | to precoding | | to precoder | | | vector | | matrix | | | $\frac{\ | | $\frac{1}{2}\ | | | begin{bmatrix} | | begin{bmatrix} | | | 1 & 1 \ | | 1 & 1 \ | | | \ | | j & \- j \ | | | end{bmatrix}^{ | | \end{bmatrix}$ | | | T}}{\sqrt{2}}$ | | | +----------------+----------------+----------------+----------------+ | 2 | 1 layer: | 2 | 2 layers: | | | Precoding | | Precoding | | | corresponding | | according to | | | to precoder | | the latest PMI | | | vector | | report on | | | $\frac{\ | | PUSCH, using | | | begin{bmatrix} | | the | | | 1 & \- 1 \ | | precoder(s) | | | \ | | indicated by | | | end{bmatrix}^{ | | the reported | | | T}}{\sqrt{2}}$ | | PMI(s) | +----------------+----------------+----------------+----------------+ | 3 | 1 layer: | 3 | reserved | | | Precoding | | | | | corresponding | | | | | to precoder | | | | | vector | | | | | $\frac{\ | | | | | begin{bmatrix} | | | | | 1 & j \ | | | | | \ | | | | | end{bmatrix}^{ | | | | | T}}{\sqrt{2}}$ | | | +----------------+----------------+----------------+----------------+ | 4 | 1 layer: | 4 | reserved | | | Precoding | | | | | corresponding | | | | | to precoder | | | | | vector | | | | | $\frac{\ | | | | | begin{bmatrix} | | | | | 1 & \- j \ | | | | | \ | | | | | end{bmatrix}^{ | | | | | T}}{\sqrt{2}}$ | | | +----------------+----------------+----------------+----------------+ | 5 | 1 layer: | 5 | reserved | | | | | | | | Precoding | | | | | according to | | | | | the latest PMI | | | | | report on | | | | | PUSCH, using | | | | | the | | | | | precoder(s) | | | | | indicated by | | | | | the reported | | | | | PMI(s), | | | | | | | | | | if RI=2 was | | | | | reported, | | | | | using 1^st^ | | | | | column | | | | | multiplied by | | | | | of all | | | | | precoders | | | | | implied by the | | | | | reported | | | | | PMI(s) | | | +----------------+----------------+----------------+----------------+ | 6 | 1 layer: | 6 | reserved | | | | | | | | Precoding | | | | | according to | | | | | the latest PMI | | | | | report on | | | | | PUSCH, using | | | | | the | | | | | precoder(s) | | | | | indicated by | | | | | the reported | | | | | PMI(s), | | | | | | | | | | if RI=2 was | | | | | reported, | | | | | using 2^nd^ | | | | | column | | | | | multiplied by | | | | | of all | | | | | precoders | | | | | implied by the | | | | | reported | | | | | PMI(s) | | | +----------------+----------------+----------------+----------------+ | 7 | reserved | 7 | reserved | +----------------+----------------+----------------+----------------+
Table 5.3.3.1.5-5: Content of precoding information field for 4 antenna ports.
+----------------+----------------+----------------+----------------+ | One codeword: | Two codewords: | | | | | | | | | Codeword 0 | Codeword 0 | | | | enabled, | enabled, | | | | | | | | | Codeword 1 | Codeword 1 | | | | disabled | enabled | | | +----------------+----------------+----------------+----------------+ | **Bit field |** Message**|** Bit field | **Message** | | mapped to | | mapped to | | | index**| | index** | | +----------------+----------------+----------------+----------------+ | 0 | 4 layers: | 0 | 2 layers: | | | Transmit | | TPMI=0 | | | diversity | | | +----------------+----------------+----------------+----------------+ | 1 | 1 layer: | 1 | 2 layers: | | | TPMI=0 | | TPMI=1 | +----------------+----------------+----------------+----------------+ | 2 | 1 layer: | | | | | TPMI=1 | | | +----------------+----------------+----------------+----------------+ | | | 15 | 2 layers: | | | | | TPMI=15 | +----------------+----------------+----------------+----------------+ | 16 | 1 layer: | 16 | 2 layers: | | | TPMI=15 | | Precoding | | | | | according to | | | | | the latest PMI | | | | | report on | | | | | PUSCH using | | | | | the | | | | | precoder(s) | | | | | indicated by | | | | | the reported | | | | | PMI(s) | +----------------+----------------+----------------+----------------+ | 17 | 1 layer: | 17 | 3 layers: | | | Precoding | | TPMI=0 | | | according to | | | | | the latest PMI | | | | | report on | | | | | PUSCH using | | | | | the | | | | | precoder(s) | | | | | indicated by | | | | | the reported | | | | | PMI(s) | | | +----------------+----------------+----------------+----------------+ | 18 | 2 layers: | 18 | 3 layers: | | | TPMI=0 | | TPMI=1 | +----------------+----------------+----------------+----------------+ | 19 | 2 layers: | | | | | TPMI=1 | | | +----------------+----------------+----------------+----------------+ | | | 32 | 3 layers: | | | | | TPMI=15 | +----------------+----------------+----------------+----------------+ | 33 | 2 layers: | 33 | 3 layers: | | | TPMI=15 | | Precoding | | | | | according to | | | | | the latest PMI | | | | | report on | | | | | PUSCH using | | | | | the | | | | | precoder(s) | | | | | indicated by | | | | | the reported | | | | | PMI(s) | +----------------+----------------+----------------+----------------+ | 34 | 2 layers: | 34 | 4 layers: | | | Precoding | | TPMI=0 | | | according to | | | | | the latest PMI | | | | | report on | | | | | PUSCH using | | | | | the | | | | | precoder(s) | | | | | indicated by | | | | | the reported | | | | | PMI(s) | | | +----------------+----------------+----------------+----------------+ | 35 -- 63 | reserved | 35 | 4 layers: | | | | | TPMI=1 | +----------------+----------------+----------------+----------------+ | | | | | +----------------+----------------+----------------+----------------+ | | | 49 | 4 layers: | | | | | TPMI=15 | +----------------+----------------+----------------+----------------+ | | | 50 | 4 layers: | | | | | Precoding | | | | | according to | | | | | the latest PMI | | | | | report on | | | | | PUSCH using | | | | | the | | | | | precoder(s) | | | | | indicated by | | | | | the reported | | | | | PMI(s) | +----------------+----------------+----------------+----------------+ | | | 51 -- 63 | Reserved | +----------------+----------------+----------------+----------------+
##### 5.3.3.1.5A Format 2A
The following information is transmitted by means of the DCI format 2A:
\- Carrier indicator -- 0 or 3 bits. The field is present according to the
definitions in [3].
\- Resource allocation header (resource allocation type 0 / type 1) -- 1 bit
as defined in section 7.1.6 of [3]
> If downlink bandwidth is less than or equal to 10 PRBs, there is no resource
> allocation header and resource allocation type 0 is assumed.
\- Resource block assignment:
> \- For resource allocation type 0 as defined in section 7.1.6.1 of [3]
>
> \- $\left\lceil \frac{N_{\text{RB}}^{\text{DL}}}{P} \right\rceil$bits
> provide the resource allocation
>
> \- For resource allocation type 1 as defined in section 7.1.6.2 of [3]
>
> \- $\left\lceil \text{log}_{2}\left( P \right) \right\rceil$ bits of this
> field are used as a header specific to this resource allocation type to
> indicate the selected resource blocks subset
>
> \- 1 bit indicates a shift of the resource allocation span
>
> \- $\left( \left\lceil \frac{N_{\text{RB}}^{\text{DL}}}{P} \right\rceil -
> \left\lceil \text{log}_{2}\left( P \right) \right\rceil - 1 \right)$ bits
> provide the resource allocation
where the value of P depends on the number of DL resource blocks as indicated
in section 7.1.6.1 of [3]
\- TPC command for PUCCH -- 2 bits as defined in section 5.1.2.1 of [3]
\- Downlink Assignment Index -- number of bits as specified in Table
5.3.3.1.2-2.
\- HARQ process number - 3 bits (for cases with FDD primary cell), 4 bits (for
cases with TDD primary cell)
\- Transport block to codeword swap flag -- 1 bit
In addition, for transport block 1:
> \- Modulation and coding scheme -- 5 bits as defined in section 7.1.7 of [3]
>
> \- New data indicator -- 1 bit
>
> \- Redundancy version -- 2 bits
In addition, for transport block 2:
> \- Modulation and coding scheme -- 5 bits as defined in section 7.1.7 of [3]
>
> \- New data indicator -- 1 bit
>
> \- Redundancy version -- 2 bits
\- Precoding information -- number of bits as specified in Table 5.3.3.1.5A-1
\- HARQ-ACK resource offset (this field is present when this format is carried
by EPDCCH. This field is not present when this format is carried by PDCCH) --
2 bits as defined in section 10.1 of [3]. The 2 bits are set to 0 when this
format is carried by EPDCCH on a secondary cell, or when this format is
carried by EPDCCH on the primary cell scheduling PDSCH on a secondary cell and
the UE is configured with PUCCH format 3 for HARQ-ACK feedback.
If both transport blocks are enabled, the transport block to codeword mapping
is specified according to Table 5.3.3.1.5‑1.
In case one of the transport blocks is disabled, the transport block to
codeword swap flag is reserved and the transport block to codeword mapping is
specified according to Table 5.3.3.1.5‑2.
The precoding information field is defined according to Table 5.3.3.1.5A‑2.
For a single enabled codeword, index 1 in Table 5.3.3.1.5A-2 is only supported
for retransmission of the corresponding transport block if that transport
block has previously been transmitted using two layers with large delay CDD.
For transmission with 2 antenna ports, the precoding information field is not
present. The number of transmission layers is equal to 2 if both codewords are
enabled; transmit diversity is used if codeword 0 is enabled while codeword 1
is disabled.
If the number of information bits in format 2A carried by PDCCH belongs to one
of the sizes in Table 5.3.3.1.2-1, one zero bit shall be appended to format
2A.
Table 5.3.3.1.5A-1: Number of bits for precoding information.
* * *
Number of antenna ports at eNodeB Number of bits for precoding information 2 0
4 2
* * *
Table 5.3.3.1.5A-2: Content of precoding information field for 4 antenna
ports.
+----------------+----------------+----------------+----------------+ | **One |** Two | | | | codeword:**| codewords:** | | | | | | | | | **Codeword 0 |** Codeword 0 | | | | enabled,**| enabled,** | | | | | | | | | Codeword 1 | **Codeword 1 | | | | disabled | enabled** | | | +----------------+----------------+----------------+----------------+ | **Bit field |** Message**|** Bit field | **Message** | | mapped to | | mapped to | | | index**| | index** | | +----------------+----------------+----------------+----------------+ | 0 | 4 layers: | 0 | 2 layers: | | | Transmit | | precoder | | | diversity | | cycling with | | | | | large delay | | | | | CDD | +----------------+----------------+----------------+----------------+ | 1 | 2 layers: | 1 | 3 layers: | | | precoder | | precoder | | | cycling with | | cycling with | | | large delay | | large delay | | | CDD | | CDD | +----------------+----------------+----------------+----------------+ | 2 | reserved | 2 | 4 layers: | | | | | precoder | | | | | cycling with | | | | | large delay | | | | | CDD | +----------------+----------------+----------------+----------------+ | 3 | reserved | 3 | reserved | +----------------+----------------+----------------+----------------+
##### 5.3.3.1.5B Format 2B
The following information is transmitted by means of the DCI format 2B:
\- Carrier indicator -- 0 or 3 bits. The field is present according to the
definitions in [3].
\- Resource allocation header (resource allocation type 0 / type 1) -- 1 bit
as defined in section 7.1.6 of [3]
> If downlink bandwidth is less than or equal to 10 PRBs, there is no resource
> allocation header and resource allocation type 0 is assumed.
\- Resource block assignment:
> \- For resource allocation type 0 as defined in section 7.1.6.1 of [3]
>
> \- $\left\lceil \frac{N_{\text{RB}}^{\text{DL}}}{P} \right\rceil$bits
> provide the resource allocation
>
> \- For resource allocation type 1 as defined in section 7.1.6.2 of [3]
>
> \- $\left\lceil \text{log}_{2}\left( P \right) \right\rceil$ bits of this
> field are used as a header specific to this resource allocation type to
> indicate the selected resource blocks subset
>
> \- 1 bit indicates a shift of the resource allocation span
>
> \- $\left( \left\lceil \frac{N_{\text{RB}}^{\text{DL}}}{P} \right\rceil -
> \left\lceil \text{log}_{2}\left( P \right) \right\rceil - 1 \right)$ bits
> provide the resource allocation
where the value of P depends on the number of DL resource blocks as indicated
in section [7.1.6.1] of [3]
\- TPC command for PUCCH -- 2 bits as defined in section 5.1.2.1 of [3]
\- Downlink Assignment Index -- number of bits as specified in Table
5.3.3.1.2-2.
\- HARQ process number - 3 bits (for cases with FDD primary cell), 4 bits (for
cases with TDD primary cell)
\- Scrambling identity-- 1 bit as defined in section 6.10.3.1 of [2]
\- SRS request -- [0-1] bit. This field can only be present for TDD operation
and if present is defined in section 8.2 of [3]
In addition, for transport block 1:
> \- Modulation and coding scheme -- 5 bits as defined in section 7.1.7 of [3]
>
> \- New data indicator -- 1 bit
>
> \- Redundancy version -- 2 bits
In addition, for transport block 2:
> \- Modulation and coding scheme -- 5 bits as defined in section 7.1.7 of [3]
>
> \- New data indicator -- 1 bit
>
> \- Redundancy version -- 2 bits
\- HARQ-ACK resource offset (this field is present when this format is carried
by EPDCCH. This field is not present when this format is carried by PDCCH) --
2 bits as defined in section 10.1 of [3]. The 2 bits are set to 0 when this
format is carried by EPDCCH on a secondary cell, or when this format is
carried by EPDCCH on the primary cell scheduling PDSCH on a secondary cell and
the UE is configured with PUCCH format 3 for HARQ-ACK feedback.
If both transport blocks are enabled, the number of layers equals two;
transport block 1 is mapped to codeword 0; and transport block 2 is mapped to
codeword 1. Antenna ports 7 and 8 are used for spatial multiplexing.
In case one of the transport blocks is disabled, the number of layers equals
one; the transport block to codeword mapping is specified according to Table
5.3.3.1.5‑2; and the antenna port for single-antenna port transmission is
according to Table 5.3.3.1.5B-1.
Table 5.3.3.1.5B-1: Antenna port for single-antenna port transmission (one
transport block disabled).
* * *
New data indicator of the disabled transport block Antenna port 0 7 1 8
* * *
If the number of information bits in format 2B carried by PDCCH belongs to one
of the sizes in Table 5.3.3.1.2-1, one zero bit shall be appended to format
2B.
##### 5.3.3.1.5C Format 2C
The following information is transmitted by means of the DCI format 2C:
\- Carrier indicator -- 0 or 3 bits. The field is present according to the
definitions in [3].
\- Resource allocation header (resource allocation type 0 / type 1) -- 1 bit
as defined in section 7.1.6 of [3]
> If downlink bandwidth is less than or equal to 10 PRBs, there is no resource
> allocation header and resource allocation type 0 is assumed.
\- Resource block assignment:
> \- For resource allocation type 0 as defined in section 7.1.6.1 of [3]
>
> \- $\left\lceil \frac{N_{\text{RB}}^{\text{DL}}}{P} \right\rceil$bits
> provide the resource allocation
>
> \- For resource allocation type 1 as defined in section 7.1.6.2 of [3]
>
> \- $\left\lceil \text{log}_{2}\left( P \right) \right\rceil$ bits of this
> field are used as a header specific to this resource allocation type to
> indicate the selected resource blocks subset
>
> \- 1 bit indicates a shift of the resource allocation span
>
> \- $\left( \left\lceil \frac{N_{\text{RB}}^{\text{DL}}}{P} \right\rceil -
> \left\lceil \text{log}_{2}\left( P \right) \right\rceil - 1 \right)$ bits
> provide the resource allocation
where the value of _P_ depends on the number of DL resource blocks as
indicated in section [7.1.6.1] of [3]
\- TPC command for PUCCH -- 2 bits as defined in section 5.1.2.1 of [3]
\- Downlink Assignment Index -- number of bits as specified in Table
5.3.3.1.2-2.
\- HARQ process number - 3 bits (for cases with FDD primary cell), 4 bits (for
cases with TDD primary cell)
\- Antenna port(s), scrambling identity and number of layers -- 3 bits as
specified in Table 5.3.3.1.5C-1 where _n~SCID~_ is the scrambling identity for
antenna ports 7 and 8 defined in section 6.10.3.1 of [2]
\- SRS request -- [0-1] bit. This field can only be present for TDD operation
and if present is defined in section 8.2 of [3]
In addition, for transport block 1:
> \- Modulation and coding scheme -- 5 bits as defined in section 7.1.7 of [3]
>
> \- New data indicator -- 1 bit
>
> \- Redundancy version -- 2 bits
In addition, for transport block 2:
> \- Modulation and coding scheme -- 5 bits as defined in section 7.1.7 of [3]
>
> \- New data indicator -- 1 bit
>
> \- Redundancy version -- 2 bits
\- HARQ-ACK resource offset (this field is present when this format is carried
by EPDCCH. This field is not present when this format is carried by PDCCH) --
2 bits as defined in section 10.1 of [3]. The 2 bits are set to 0 when this
format is carried by EPDCCH on a secondary cell, or when this format is
carried by EPDCCH on the primary cell scheduling PDSCH on a secondary cell and
the UE is configured with PUCCH format 3 for HARQ-ACK feedback.
If both transport blocks are enabled; transport block 1 is mapped to codeword
0; and transport block 2 is mapped to codeword 1.
In case one of the transport blocks is disabled; the transport block to
codeword mapping is specified according to Table 5.3.3.1.5‑2. For the single
enabled codeword, Value = 4, 5, 6 in Table 5.3.3.1.5C-1 are only supported for
retransmission of the corresponding transport block if that transport block
has previously been transmitted using two, three or four layers, respectively.
If the number of information bits in format 2C carried by PDCCH belongs to one
of the sizes in Table 5.3.3.1.2-1, one zero bit shall be appended to format
2C.
Table 5.3.3.1.5C-1: Antenna port(s), scrambling identity and number of layers
indication
+------------------+------------------+---------+------------------+ | One Codeword: | Two Codewords: | | | | | | | | | Codeword 0 | Codeword 0 | | | | enabled, | enabled, | | | | | | | | | Codeword 1 | Codeword 1 | | | | disabled | enabled | | | +------------------+------------------+---------+------------------+ | Value | Message | Value | Message | +------------------+------------------+---------+------------------+ | **_0_** | **_1 layer, port |_** 0** _|_** 2 layers, | | | 7, n~SCID~=0** _| | ports 7-8, | | | | | n~SCID~=0_** | +------------------+------------------+---------+------------------+ | **_1_** | **_1 layer, port |_** 1** _|_** 2 layers, | | | 7, n~SCID~=1** _| | ports 7-8, | | | | | n~SCID~=1_** | +------------------+------------------+---------+------------------+ | **_2_** | **_1 layer, port |_** 2** _|_** 3 layers, | | | 8, n~SCID~=0** _| | ports 7-9_** | +------------------+------------------+---------+------------------+ | **_3_** | **_1 layer, port |_** 3** _|_** 4 layers, | | | 8, n~SCID~=1** _| | ports 7-10_** | +------------------+------------------+---------+------------------+ | **_4_** | **_2 layers, |_** 4** _|_** 5 layers, | | | ports 7-8** _| | ports 7-11_** | +------------------+------------------+---------+------------------+ | **_5_** | **_3 layers, |_** 5** _|_** 6 layers, | | | ports 7-9** _| | ports 7-12_** | +------------------+------------------+---------+------------------+ | **_6_** | **_4 layers, |_** 6** _|_** 7 layers, | | | ports 7-10** _| | ports 7-13_** | +------------------+------------------+---------+------------------+ | **_7_** | **_Reserved_** | **_7_** | **_8 layers, | | | | | ports 7-14_** | +------------------+------------------+---------+------------------+
##### 5.3.3.1.5D Format 2D
The following information is transmitted by means of the DCI format 2D:
\- Carrier indicator -- 0 or 3 bits. The field is present according to the
definitions in [3].
\- Resource allocation header (resource allocation type 0 / type 1) -- 1 bit
as defined in section 7.1.6 of [3]
> If downlink bandwidth is less than or equal to 10 PRBs, there is no resource
> allocation header and resource allocation type 0 is assumed.
\- Resource block assignment:
> \- For resource allocation type 0 as defined in section 7.1.6.1 of [3]
>
> \- $\left\lceil \frac{N_{\text{RB}}^{\text{DL}}}{P} \right\rceil$bits
> provide the resource allocation
>
> \- For resource allocation type 1 as defined in section 7.1.6.2 of [3]
>
> \- $\left\lceil \text{log}_{2}\left( P \right) \right\rceil$ bits of this
> field are used as a header specific to this resource allocation type to
> indicate the selected resource blocks subset
>
> \- 1 bit indicates a shift of the resource allocation span
>
> \- $\left( \left\lceil \frac{N_{\text{RB}}^{\text{DL}}}{P} \right\rceil -
> \left\lceil \text{log}_{2}\left( P \right) \right\rceil - 1 \right)$ bits
> provide the resource allocation
where the value of _P_ depends on the number of DL resource blocks as
indicated in section [7.1.6.1] of [3]
\- TPC command for PUCCH -- 2 bits as defined in section 5.1.2.1 of [3]
\- Downlink Assignment Index -- number of bits as specified in Table
5.3.3.1.2-2.
\- HARQ process number - 3 bits (for cases with FDD primary cell), 4 bits (for
cases with TDD primary cell)
\- Antenna port(s), scrambling identity and number of layers -- 3 bits as
specified in Table 5.3.3.1.5C-1 where _n~SCID~_ is the scrambling identity for
antenna ports 7 and 8 defined in section 6.10.3.1 of [2]
\- SRS request -- [0-1] bit. This field can only be present for TDD operation
and if present is defined in section 8.2 of [3]
In addition, for transport block 1:
> \- Modulation and coding scheme -- 5 bits as defined in section 7.1.7 of [3]
>
> \- New data indicator -- 1 bit
>
> \- Redundancy version -- 2 bits
In addition, for transport block 2:
> \- Modulation and coding scheme -- 5 bits as defined in section 7.1.7 of [3]
>
> \- New data indicator -- 1 bit
>
> \- Redundancy version -- 2 bits
\- PDSCH RE Mapping and Quasi-Co-Location Indicator -- 2 bits as defined in
sections 7.1.9 and 7.1.10 of [3]
\- HARQ-ACK resource offset (this field is present when this format is carried
by EPDCCH. This field is not present when this format is carried by PDCCH) --
2 bits as defined in section 10.1 of [3]. The 2 bits are set to 0 when this
format is carried by EPDCCH on a secondary cell, or when this format is
carried by EPDCCH on the primary cell scheduling PDSCH on a secondary cell and
the UE is configured with PUCCH format 3 for HARQ-ACK feedback.
If both transport blocks are enabled; transport block 1 is mapped to codeword
0; and transport block 2 is mapped to codeword 1.
In case one of the transport blocks is disabled; the transport block to
codeword mapping is specified according to Table 5.3.3.1.5‑2. For the single
enabled codeword, Value = 4, 5, 6 in Table 5.3.3.1.5C-1 are only supported for
retransmission of the corresponding transport block if that transport block
has previously been transmitted using two, three or four layers, respectively.
If the number of information bits in format 2D carried by PDCCH belongs to one
of the sizes in Table 5.3.3.1.2-1, one zero bit shall be appended to format
2D.
##### 5.3.3.1.6 Format 3
DCI format 3 is used for the transmission of TPC commands for PUCCH and PUSCH
with 2-bit power adjustments.
The following information is transmitted by means of the DCI format 3:
\- TPC command number 1, TPC command number 2,..., TPC command number _N_
where $N = \left\lfloor \frac{L_{\text{format\ 0}}}{2} \right\rfloor$, and
where $L_{\text{format\ 0}}$ is equal to the payload size of format 0 before
CRC attachment when format 0 is mapped onto the common search space, including
any padding bits appended to format 0. The parameter _tpc-Index_ provided by
higher layers determines the index to the TPC command for a given UE.
If $\left\lfloor \frac{L_{\text{format\ 0}}}{2} \right\rfloor  UE port 1 \
* * *
#### 5.3.3.3 Channel coding
Information bits are delivered to the channel coding block. They are denoted
by $c_{0},c_{1},c_{2},c_{3},\text{.}\text{.}\text{.},c_{K - 1}$ , where _K_ is
the number of bits, and they are tail biting convolutionally encoded according
to section 5.1.3.1.
After encoding the bits are denoted by
$d_{0}^{(i)},d_{1}^{(i)},d_{2}^{(i)},d_{3}^{(i)},\text{.}\text{.}\text{.},d_{D
- 1}^{(i)}$, with $i = 0,1,\text{\ and\ }2$, and where _D_ is the number of
bits on the _i_ -th coded stream, i.e., $D = K$.
#### 5.3.3.4 Rate matching
A tail biting convolutionally coded block is delivered to the rate matching
block. This block of coded bits is denoted by
$d_{0}^{(i)},d_{1}^{(i)},d_{2}^{(i)},d_{3}^{(i)},\text{.}\text{.}\text{.},d_{D
- 1}^{(i)}$, with $i = 0,1,\text{\ and\ }2$, and where _i_ is the coded stream
index and _D_ is the number of bits in each coded stream. This coded block is
rate matched according to section 5.1.4.2.
After rate matching, the bits are denoted by
$e_{0},e_{1},e_{2},e_{3},\text{.}\text{.}\text{.},e_{E - 1}$, where _E_ is the
number of rate matched bits.
### 5.3.4 Control format indicator
Data arrives each subframe to the coding unit in the form of an indicator for
the time span, in units of OFDM symbols, of the DCI carried by PDCCH in that
subframe of the corresponding DL cell. The CFI takes values CFI = 1, 2 or 3.
For system bandwidths $N_{\text{RB}}^{\text{DL}} > \text{10}$, the span of the
DCI carried by PDCCH in units of OFDM symbols, 1, 2 or 3, is given by the CFI.
For system bandwidths $N_{\text{RB}}^{\text{DL}} \leq \text{10}$, the span of
the DCI carried by PDCCH in units of OFDM symbols, 2, 3 or 4, is given by
CFI+1.
The coding flow is shown in Figure 5.3.4-1.
Figure 5.3.4-1 Coding for CFI.
#### 5.3.4.1 Channel coding
The control format indicator is coded according to Table 5.3.4-1.
Table 5.3.4-1: CFI code words.
+--------------+------------------------------------------------------+ | **CFI** | CFI code word | | | | | | \ | +--------------+------------------------------------------------------+ | 1 | \ | +--------------+------------------------------------------------------+ | 2 | \ | +--------------+------------------------------------------------------+ | 3 | \ | +--------------+------------------------------------------------------+ | 4 (Reserved) | \ | +--------------+------------------------------------------------------+
### 5.3.5 HARQ indicator (HI)
Data arrives to the coding unit in the form of indicators for HARQ
acknowledgement for one transport block.
The coding flow is shown in Figure 5.3.5-1.
Figure 5.3.5-1 Coding for HI.
#### 5.3.5.1 Channel coding
The HI is coded according to Table 5.3.5-1, where for a positive
acknowledgement HI = 1 and for a negative acknowledgement HI = 0.
Table 5.3.5-1: HI code words.
+--------+-----------------------------+ | **HI** | HI code word | | | | | | \ | +--------+-----------------------------+ | 0 | \ | +--------+-----------------------------+ | 1 | \ | +--------+-----------------------------+
## 5.4 Sidelink transport channels and control information
### 5.4.1 Sidelink broadcast channel
Figure 5.4.1-1 shows the processing structure for the SL-BCH transport
channel. Data arrives to the coding unit in the form of a maximum of one
transport block. The following coding steps can be identified:
\- Add CRC to the transport block
\- Channel coding
\- Rate matching
The coding steps for SL-BCH transport channel are shown in the figure below.
In addition, after rate matching PUSCH interleaving is applied according to
sections 5.2.2.7 and 5.2.2.8 without any control information in order to apply
a time-first rather than frequency-first mapping, where $C_{\text{mux}} = 2
\cdot \left( N_{\text{symb}}^{\text{SL}} - 3 \right)$ and the sequence of bits
_f_ is equal to _e_.
Figure 5.4.1-1: Transport channel processing for SL-BCH.
#### 5.4.1.1 Transport block CRC attachment
Error detection is provided on transport blocks through a Cyclic Redundancy
Check (CRC).
The entire transport block is used to calculate the CRC parity bits. Denote
the bits in a transport block delivered to layer 1
by$a_{0},a_{1},a_{2},a_{3},\text{.}\text{.}\text{.},a_{A - 1}$, and the parity
bits by$p_{0},p_{1},p_{2},p_{3},\text{.}\text{.}\text{.},p_{L - 1}$. _A_ is
the size of the transport block and _L_ is the number of parity bits. The
lowest order information bit _a_ ~0~ is mapped to the most significant bit of
the transport block as defined in section 6.1.1 of [5].
The parity bits are computed and attached according to section 5.1.1 setting
_L_ to 16 bits, resulting in the sequence of
bits$c_{0},c_{1},c_{2},c_{3},\text{.}\text{.}\text{.},c_{K - 1}$ where $c_{k}
= b_{k}$ for _k_ = 0, 1, 2, ..., _K_ -1 and _K=A+L_.
#### 5.4.1.2 Channel coding
Information bits are delivered to the channel coding block. They are denoted
by $c_{0},c_{1},c_{2},c_{3},\text{.}\text{.}\text{.},c_{K - 1}$ , where _K_ is
the number of bits, and they are tail biting convolutionally encoded according
to section 5.1.3.1.
After encoding the bits are denoted by
$d_{0}^{(i)},d_{1}^{(i)},d_{2}^{(i)},d_{3}^{(i)},\text{.}\text{.}\text{.},d_{D
- 1}^{(i)}$, with$i = 0,1,\text{\ and\ }2$, and where _D_ is the number of
bits on the _i_ -th coded stream, i.e., $D = K$.
#### 5.4.1.3 Rate matching
A tail biting convolutionally coded block is delivered to the rate matching
block. This block of coded bits is denoted
by$d_{0}^{(i)},d_{1}^{(i)},d_{2}^{(i)},d_{3}^{(i)},\text{.}\text{.}\text{.},d_{D
- 1}^{(i)}$, with$i = 0,1,\text{\ and\ }2$, and where _i_ is the coded stream
index and _D_ is the number of bits in each coded stream. This coded block is
rate matched according to section 5.1.4.2.
After rate matching, the bits are denoted
by$e_{0},e_{1},e_{2},e_{3},\text{.}\text{.}\text{.},e_{E - 1}$, where _E_ is
the number of rate matched bits as defined in section 9.6.1 of [2].
### 5.4.2 Sidelink shared channel
The processing of the sidelink shared channel follows the downlink shared
channel according to section 5.3.2, with the following differences:
\- Data arrives to the coding unit in the form of a maximum of one transport
block every transmission time interval (TTI)
\- In the step of code block concatenation, the sequence of coded bits
corresponding to one transport block after code block concatenation is
referred to as one codeword in section 9.3.1 of [2].
\- PUSCH interleaving is applied according to sections 5.2.2.7 and 5.2.2.8
without any control information in order to apply a time-first rather than
frequency-first mapping, where $C_{\text{mux}} = 2 \cdot \left(
N_{\text{symb}}^{\text{SL}} - 1 \right)$.
### 5.4.3 Sidelink control information
An SCI transports sidelink scheduling information for one destination ID.
The processing for one SCI follows the downlink control information according
to section 5.3.3, with the following differences:
\- In the step of CRC attachment, no scrambling is performed.
\- PUSCH interleaving is applied according to sections 5.2.2.7 and 5.2.2.8
without any control information in order to apply a time-first rather than
frequency-first mapping, where $C_{\text{mux}} = 2 \cdot \left(
N_{\text{symb}}^{\text{SL}} - 1 \right)$ and the sequence of bits _f_ is equal
to _e_.
#### 5.4.3.1 SCI formats
The fields defined in the SCI formats below are mapped to the information bits
_a_ ~0~ to _a~A~_ ~-1~ as follows.
Each field is mapped in the order in which it appears in the description, with
the first field mapped to the lowest order information bit _a_ ~0~ and each
successive field mapped to higher order information bits. The most significant
bit of each field is mapped to the lowest order information bit for that
field, e.g. the most significant bit of the first field is mapped to _a_ ~0~.
##### 5.4.3.1.1 SCI format 0
SCI format 0 is used for the scheduling of PSSCH.
The following information is transmitted by means of the SCI format 0:
\- Frequency hopping flag -- 1 bit as defined in section 14.1.1 of [3].
\- Resource block assignment and hopping resource allocation -- $\left\lceil
\text{log}_{2}(N_{\text{RB}}^{\text{SL}}(N_{\text{RB}}^{\text{SL}} +
1\frac{)}{2}) \right\rceil$ bits
\- For PSSCH hopping:
\- _N~SL_hop~_ MSB bits are used to obtain the value of
${\overset{\sim}{n}}_{\text{PRB}}(i)$ as indicated in section 8.4 of [3]
\- $\left( \left\lceil
\text{log}_{2}(N_{\text{RB}}^{\text{SL}}(N_{\text{RB}}^{\text{SL}} +
1\frac{)}{2}) \right\rceil - N_{\text{SL_hop}} \right)$ bits provide the
resource allocation in the subframe
\- For non-hopping PSSCH:
\- $\left( \left\lceil
\text{log}_{2}(N_{\text{RB}}^{\text{SL}}(N_{\text{RB}}^{\text{SL}} +
1\frac{)}{2}) \right\rceil \right)$ bits provide the resource allocation in
the subframe as defined in section 8.1.1 of [3]
\- Time resource pattern -- 7 bits as defined in section 14.1.1 of [3].
\- Modulation and coding scheme -- 5 bits as defined in section 14.1.1 of [3]
\- Timing advance indication -- 11 bits as defined in section 14.2.1 of [3]
\- Group destination ID -- 8 bits as defined by higher layers
### 5.4.4 Sidelink discovery channel
The processing of the sidelink discovery channel follows the downlink shared
channel according to section 5.3.2, with the following differences:
\- Data arrives to the coding unit in the form of a maximum of one transport
block every transmission time interval (TTI)
\- In the step of code block concatenation, the sequence of coded bits
corresponding to one transport block after code block concatenation is
referred to as one codeword in section 9.5.1 of [2].
\- PUSCH interleaving is applied according to sections 5.2.2.7 and 5.2.2.8
without any control information in order to apply a time-first rather than
frequency-first mapping, where $C_{\text{mux}} = 2 \cdot \left(
N_{\text{symb}}^{\text{SL}} - 1 \right)$.
#