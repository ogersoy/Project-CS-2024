# Foreword
This Technical Report has been produced by the 3^rd^ Generation Partnership
Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
Y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
This technical report describes key issues and solutions for optimized
offloading of traffic to WLAN access when PS mobility between 3GPP RAT takes
place. The technical report analyzes the user and service impact due to
mobility between 3GPP RATs. The technical report analyzes the key issues and
solutions in order to identify whether current mechanisms documented in SA2
specifications are sufficient, identify potential inefficiencies, and identify
whether additional solutions are needed to address the key issues.
The technical report also describes proposed extensions to ANDSF in order to
enable policy differentiation for 3GPP RATs (**e.g.** E-UTRAN versus UTRAN,
**GERAN** versus **UTRAN) with respect to WLAN, in order** to enable a UE to
distinguish preferences of WLAN with respect to specific 3GPP RATs upon
acquiring connectivity (e.g. PDN creation in a 3GPP RAT or WLAN, or
establishing NSWO connectivity) or upon mobility.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 23.402: \"Architecture enhancements for non-3GPP accesses\".
[3] 3GPP TS 24.312: \"Access Network Discovery and Selection Function (ANDSF)
Management Object (MO)\".
[4] 3GPP TS 22.368: \"Service requirements for Machine-Type Communications
(MTC); Stage 1\".
# 3 Definitions and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
TR 21.905 [1] and TS 22.368 [4] apply.
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in TR 21.905
[1] apply.
# 4 Key Issues
## 4.1 Key Issue 1: ANDSF WLAN preferences with respect to specific 3GPP RATs
In the EPS, ANDSF has defined mechanisms that enable devices to determine
which access technology is preferable for certain IP traffic under specific
conditions (e.g. through the use of ISRP). At present ANDSF does not provide
for mechanisms to indicate preferences with granularity at the 3GPP RAT level
within network policies. This restricts the ability for the operator to
provide policies that favour a specific 3GPP RAT over another one with
reference to the WLAN preference.
Key issue 1 is described based on the following scenario. A multi-mode UE
supporting 3GPP RATs and WLAN may be connected to both a 3GPP access and WLAN,
or only to one of the two accesses. When RAT mobility occurs, the UE uses
ANDSF policies to determine whether IP traffic should be routed over the 3GPP
access or over WLAN. The UE applies the ANDSF policies that indicate that for
certain IP traffic a 3GPP access is preferable to WLAN independently of the
RAT type. In this scenario, the operator determines that, for certain IP
traffic, WLAN is preferable to certain 3GPP access technologies (e.g. for
certain traffic, WLAN may be preferable to UTRAN) but other 3GPP access
technologies (e.g. E-UTRAN) are preferable to WLAN. In this scenario, the
operator desires to indicate to the UE which 3GPP RAT types are preferable to
WLAN and for which 3GPP RAT types WLAN is preferable.
## 4.2 Key Issue 2: Undesired bearer handling
In the EPS, support of connectivity over WLAN has been specified as part of
the Non-3GPP access support. EPS specifications have defined procedures for
obtaining connectivity over trusted and untrusted WLAN, and for handover of IP
traffic to and from 3GPP access technologies and WLAN. Mobility of IP traffic
between 3GPP RATs (e.g. a PS handover between E-UTRAN and GERAN or UTRAN) may
lead to loss, degradation or suspension of EPS bearers that in some scenarios
could otherwise be transported over WLAN. A number of scenarios are described
below.
At present, it is not clear whether mechanisms currently specified for
mobility of IP traffic between a 3GPP RAT and WLAN allow to mitigate the
impact on the service and the user experience caused by the potential loss,
degradation or suspension of bearers resulting during mobility between 3GPP
RATs. Moreover, it is not clear whether optimizations can be achieved and
would be beneficial in order to avoid additional handovers of IP traffic to
WLAN right after mobility between 3GPP RATs.
### 4.2.1 Scenario 1: Loss of bearers during inter-RAT 3GPP PS handover
In this scenario, a multi-mode UE supporting 3GPP RATs and WLAN may be
connected to both a 3GPP access and WLAN, or only to a 3GPP access. A PS
handover is performed (e.g. from E-UTRAN to UTRAN or GERAN, or from UTRAN to
GERAN) and as a result of the handover one of the following scenarios takes
place:
\- One or more bearers are dropped, e.g. due to insufficient resources in the
target system, network policies, etc, thus interrupting services
\- The QoS associated to one or more bearers is decreased, e.g. due to
insufficient resources in the target system, thus impacting services and the
user experience
In this scenario, the bearers impacted by the PS handover correspond to IP
traffic that, based on ANDSF policies, could have been transported over WLAN.
### 4.2.2 Scenario 2: Undesirable inter-RAT 3GPP PS handover
In this scenario, a multi-mode UE supporting 3GPP RATs and WLAN may be
connected to both a 3GPP access and WLAN, or only to a 3GPP access. A PS
handover is performed (e.g. from E-UTRAN to UTRAN or GERAN, or from UTRAN to
GERAN) and as a result, based on policies in the UE (e.g. ANDSF policies), the
UE decides that certain IP traffic needs to be moved to WLAN. The UE then
implements existing mechanisms for moving IP traffic to WLAN.
### 4.2.3 Scenario 3: PS bearer suspension during CSFB
In this scenario, a multi-mode UE supporting 3GPP RATs and WLAN is connected
to E-UTRAN and may be connected to WLAN. The UE is combined attached to
E-UTRAN. The operator may desire to provide the UE with ANDSF policies
indicating that for certain IP traffic, E-UTRAN is preferable to WLAN and
therefore the UE uses E-UTRAN for such traffic. CSFB is triggered and the UE
moves to a GERAN cell with no DTM. The PS services are suspended by the UE and
remain suspended for the duration of the CS service and for as long as the UE
remains over GERAN with no DTM.
In this scenario, the bearers impacted by the UE moving to a GERAN cell with
no DTM during CSFB correspond to IP traffic that, based on ANDSF policies,
could have been transported over WLAN.
NOTE: This scenario may be already covered by UE implementations compliant
with 3GPP specifications that interpret PS bearer suspension as unavailability
of 3GPP access.
## 4.3 Key Issue 3: Ping-pong offloading to WLAN
Key issue 3 relates to key issue 1 and assumes that a solution to key issue 1
has been provided.
NOTE: This key issue should be addressed as a part of the solutions of some
other key issues, but no separate solution addressing only this key issue is
expected.
As result of 3GPP RAT mobility (e.g. from E-UTRAN to UTRAN) or CSFB, some IP
traffic could be transported over WLAN due to undesirable bearer handling as
described in clause 4.1.2. After offloading over WLAN, it is not clear whether
and when it would be beneficial to move the offloaded IP traffic back to
original 3GPP RAT when e.g. RAT mobility to the original RAT (e.g. E-UTRAN) is
performed again in a short period of time, or the CS service was of short
duration.
### 4.3.1 Scenario 1: Return back to the original 3GPP RAT
In this scenario, the operator determines that, for certain IP traffic, WLAN
is preferable to UTRAN, but E-UTRAN is preferable to WLAN. When the bearers
impacted by the PS handover (from E-UTRAN to UTRAN) correspond to IP traffic
that, based on ANDSF policies, could have been transported over WLAN as
described in clause 4.1.2, the device based on current ANDSF and 3GPP
procedures may handover such IP traffic from UTRAN to WLAN. If the PS handover
from UTRAN to E-UTRAN occurs again, according to the policies it is preferred
that the offloaded IP traffic is transported over E-UTRAN again due to E-UTRAN
being preferable to WLAN. In this scenario handing such traffic over back to
E-UTRAN may increase overall signalling. In this case, it is not clear whether
and when it would be beneficial for the offloaded IP traffic to be handed over
to E-UTRAN again.
### 4.3.2 Scenario 2: Undesirable WiFi offload during short CSFB call
In this scenario, when the UE performs CSFB, it is possible that the UE
returns from GERAN or UTRAN to E-UTRAN after the CS service is terminated. If
the CS service is of short duration, the UE may remain in GERAN or UTRAN for a
brief period of time before returning to the E-UTRAN.
A multi-mode UE supporting 3GPP RATs and WLAN connects to LTE and accesses PS
service only, i.e., the UE is not routing IP traffic simultaneously over
multiple radio access interfaces. When a CS service is triggered, the UE falls
back to the GERAN or UTRAN. At the same time, the UE has ANDSF policies that
trigger the UE to offload some IP traffic to WLAN. If the CS service is of
short duration, the UE may remain in GERAN or UTRAN for a brief period of time
before returning to the E-UTRAN and, based on ANDSF policies, the UE may move
the offloaded traffic from WLAN back to E-UTRAN. Since e.g. the establishment
of the connectivity over WLAN may take a while during the offloading, or since
the CS service may be of short duration, the impact on the user experience,
and unnecessary signalling and UE power consumption may happen.
# 5 Architecture Assumptions
Editor\'s note: This clause will describe the work assumptions for Optimized
Offloading to WLAN in 3GPP-RAT mobility.
\- ANDSF policy is only visible to the terminal and ANDSF server and the
network decision to perform intra and inter 3GPP RAT handover shall not be
impacted by ANDSF.
[]{#__RefHeading___Toc366693780 .anchor}6 Solutions
## 6.1 Solution 1
### 6.1.1 Description
In this solution ANDSF ISRP are enhanced to enable the operator to provide
policies that distinguish between different 3GPP RATs.
The ANDSF MO in TS 24.312 [3] is extended. At present the ISRP indicates the
priority/preference of access technologies only according to the following
leaf (only ForFlowBased ISRP shown, a similar leaf is present also in
ForServiceBased rules) .
5.7.23A _\ _/ISRP/_\ _/ForFlowBased/_\ _/RoutingRule/_\ _/\
AccessTechnology
The AccessTechnology leaf indicates a prioritized access technology.
> \- Occurrence: One
>
> \- Format: int
>
> \- Access Types: Get, Replace
>
> \- Values: \
Possible values for the Access technology are specified in table 5.7.23A.1.
Table 5.7.23A.1: Possible values for the AccessTechnology leaf
* * *
Value Description 0 Reserved 1 3GPP 2 Reserved 3 WLAN 4-255 Reserved
* * *
This solution suggests enhancing the ANDSF ISRP (e.g. either by modifying this
leaf or adding new leafs, with stage 3 deciding how to implement the
enhancements) in order to enable the operator to express the RAT type
preference by adding a differentiation between a 3GPP RAT (e.g. GERAN, UTRAN,
E-UTRAN) and WLAN while it still allows policies that express generic 3GPP
access to remain unchanged.
It is agreed that differentiation between different types of cells in the same
RAT (e.g. R99 UTRAN versus HSPA) is not supported.
In some scenarios the active ISRP policy enhanced as proposed in this solution
may indicate that LTE is preferable to Wi-Fi but that Wi-Fi is preferable to
UTRAN, but the RFSP provided to the UE may indicate that UTRAN is preferable
for camping to LTE, OR the RAN policies for connected mode UE may push the UE
from LTE to UTRAN just after the UE establishes LTE connectivity.
In such scenarios, conflict between these policies might happen. E.g., if the
UE is connected to UTRAN based on RAN policies and Wi-Fi coverage becomes
available, then ISRP policies would trigger the UE to move the traffic to Wi-
Fi. If the UE moves all the traffic to Wi-Fi based on ISRP, and
[if]{.underline} the device detaches from UTRAN, when later on LTE becomes
available the UE may, based on ISRP, decide to handover traffic back to LTE
and perform an handover attach. The RAN would then push the UE to UTRAN and a
ping-pong happens. However it is agreed that the scenarios in which the UE
that is connected to UTRAN at the time the traffic is moved to Wi-Fi, detaches
from UTRAN, are very limited (e.g. the need to access CS services is an
example). In addition, when this happens, the UE implementation can detect the
ping-pong situation and avoid it, e.g. by implementing timers to avoid going
back to LTE or moving to Wi-Fi for a certain period of time. UE
implementations already implement solutions against ping-pong today.
On the contrary, in this scenario if the UE remains connected to 3GPP (e.g. at
least for CS services) after moving all PS traffic to WLAN through handover of
PDN connections or IP flow mobility, then there is no conflict since such UE
will be camping in UTRAN based on RAN policies and traffic can remain over Wi-
Fi.
It is agreed to not make similar enhancements to ANDSF ISMP. When a UE is only
connected to either 3GPP access or WLAN access but not both at the same time,
as is the case when ISMP is applied, the solution has a risk of creating ping-
pong effects. The reason is that it is not feasible to fully ensure
consistency between the enhanced ANDSF policies proposed in this solution with
the 3GPP RAT selection strategies deployed in a network. For example, a UE
with an ANDSF policy that prioritizes E-UTRAN over WLAN and WLAN over UTRAN,
may connect to a network where the RAT selection strategies results in that
UTRAN is preferred over E-UTRAN even if E-UTRAN access is available. Such a UE
may ping-pong between E-UTRAN, UTRAN and WLAN. Even though it could be
possible to configure the Subscriber Profile ID for RAT/Frequency Priority
(SPID) and ANDSF policies in a consistent way, this would not address all
scenarios. For example, the RAT selection strategy may be PLMN specific in
roaming cases or be based on dynamic information such as the load of the
different RATs. Therefore it is proposed to not make similar enhancements to
ISMP where the UE is assumed to be only connected to one access at a time.
### 6.1.2 Impact on existing nodes or functionality
The UE and the ANDSF server must support any modifications to the ANDSF MO
defined for this functionality.
## 6.2 Solution 2
### 6.2.1 Description
Solution 2 addresses key issue 2, scenario 1.
In this solution, it is assumed that the device adopts implementation-
dependent mechanism to determine that, upon release of the bearers
corresponding to a PDN connection, the device may not release the EPS bearer
context for such PDN connection if ANDSF policies indicate that WLAN is
preferable and, if WLAN is connected and available, can be used for the PDN
connection. In this case, the device may trigger the handover of such PDN
connection or mobility of IP flows to WLAN.
Note: the UE may trigger the handover of such PDN connections or mobility of
IP flows to WLAN taking into account policies e.g. obtained from ANDSF policy,
after the UE receives the command to perform the handover.
In this solution, it is also assumed that an implementation-dependent solution
is adopted in the network so that, when PS HO is performed from E-UTRAN to a
target RAT and some PDN connections will be disconnected as a result of the
handover, the network delays the disconnection of the PDN connection and the
related bearers.
As an example, the network could delay the disconnection of the related
bearers using an implementation-dependent timer.
Editor\'s note: It is FFS whether this is implemented in the MME or the PDN
GW.
The solution can be implemented in the standards indicating that \"upon
triggering the deletion of EPS bearers, the network may delay the EPS bearers
disconnection in the core network based on an implementation dependent
timer\".
### 6.2.2 Impact on existing nodes or functionality
No standards impacts on existing nodes and functionality result from this
solution.
## 6.3 Solution 3
### 6.3.1 Description
Editor\'s note: This solution addresses Key issue 2, Scenario 3
When the device performs CSFB procedures to a GERAN cell with no DTM or the
network does not support PS HO because of operator policy, the device triggers
the handover of PDN connections to WLAN, if WLAN is available. During the
handover procedure, a correct implementation of the PDN GW allows the handover
to take place and considers the suspended PS bearers as resumed.
The solution can be implemented by modifying TS 23.402 to indicate in a note
that when the PDN GW receives the signalling related to the handover of a PDN
connection from 3GPP to WLAN and the PS bearers are suspended, then the PDN GW
considers the bearers as resumed and performs the handover.
In addition, a note can be added to TS 23.272 to indicate that upon
termination of CS services, if the PDN connections have been handed over to
WLAN the device does not need to resume the PS traffic over the current cell.
Editor\'s note: The details of the information flows are FFS.
### 6.3.2 Impact on existing nodes or functionality
This solution requires that the logic of the MME, the SGW and the PDN GW allow
the handover of PDN connections whose bearers are suspended to be handed over
to WLAN.
## 6.4 Solution 4
### 6.4.1 Description
This solution addresses scenario 1 and scenario 2 of Key Issue 3, with
assumption that a solution on key issue 1 has been provided.
This solution suggests that, a UE can use an implementation-dependent
hysteresis mechanism (e.g. based on a timer) to prevent that the mobility to
the original RAT (e.g. E-UTRAN) is performed again in a short period of time.
### 6.4.2 Impact on existing nodes or functionality
This solution does not introduce any standard impact on the UE and the ANDSF
server except supporting the ANDSF MO defined for a solution on key issue 1.
Solution 4 can be implemented in standards by means of notes indicating
recommendation on the UE behaviour on hysteresis handling.
# 7 Evaluation of solutions
Editor\'s note: This clause contains the evaluation of solutions based on the
objectives.
## 7.1 Solution 1
The solution requires the operator to define policies that contain specific
RAT indications to define the priority.
When evaluating ANDSF rules, the device is required to consider the specific
RAT type of the target cell for mobility events, and of the current cell for
non-mobility events.
The UE and the ANDSF server must support the new MO.
The solution does not introduce any new functionality in the RAN or the core
network besides the ANDSF server.
## 7.2 Solution 2
Solution 2 can be achieved via implementation-dependent means in the UE and
core network.
Solution 2 can be implemented in standards by means of notes indicating
optional recommendation on the UE and the network behaviour.
## 7.3 Solution 3
The solution does not require any modification to EPS entities, and can be
implemented by a few notes in existing specifications.
The solution allows the device to resume the IP traffic as soon as the
handover from 3GPP to WLAN is performed.
## 7.4 Solution 4
With assumption that a solution on key issue 1 has been provided, Solution 4
can be achieved via an implementation-dependent hysteresis mechanism (e.g.
based on an implementation dependent timer) in the UE.
# 8 Conclusions
The following mapping between key issues and solutions has been identified:
Table 8-1: Mapping of FS_WORM key issues to solutions
* * *
Key issue Solution Key Issue 1 Solution 1 Key issue 2 (Scenario 1) Solution 2
Key issue 2 (Scenario 2) There is no action identified for this scenario. Key
issue 2 (Scenario 3) Solution 3 Key issue 3 (Scenario 1) Solution 4 Key issue
3 (Scenario 2) Solution 4
* * *
It can be observed:
\- That there is at most one candidate solution for each of the key issues.
\- There is no solution for Key issue 2 (Scenario 2).
\- This topic was discussed. However, no agreement was reached to include a
solution in the TR.
Given the above observations it has been concluded that the following changes
to technical specifications should be completed:
\- Solution 1 (Key issue 1):
\- Normative description of ANDSF modification and associated procedural text
to be added.
\- Solution 2 (Key Issue 2, Scenario 1):
\- Note to be added to appropriate specifications.
\- Solution 3 (Key issue 2, Scenario 3)
\- Note to be added to appropriate specifications.
\- Solution 4 (Key issue 3, Scenario 1 and 2)
\- Note to be added to appropriate specifications.
#