# Foreword
This Technical Report has been produced by the 3^rd^ Generation Partnership
Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document investigates relevant scenarios and possible solutions to
enhance the CS/PS Coordination in a shared UTRAN/GERAN network as currently
specified in TS 23.251 [2].
Within this technical report relevant mobility scenarios shall be investigated
and it shall be evaluated per scenario if any issues with CS/PS Coordination
can be expected. The investigation shall be done for non-supporting UEs and
for any UE in shared networks where no Multiple PLMN list is broadcasted.
Solutions to solve found issues shall be evaluated and agreed for subsequent
normative specification.
The scenarios that need to be handled will at least include:
\- CS handover to UTRAN/GERAN (DTM/non-DTM for GERAN);
\- PS Handover to UTRAN/GERAN (DTM/non-DTM for GERAN);
\- Redirection;
\- Cell reselection;
\- CSFB;
\- rSRVCC and SRVCC;
\- PLMN selection at handover based on UE capability;
\- Registration to PS domain in a shared network after CS only registration
has been performed.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 23.251: \"Network sharing; Architecture and functional
description\".
[3] 3GPP TS 22.042: \"Network Identity and TimeZone (NITZ); Service
description; Stage 1\".
[4] 3GPP TS 23.216: \"Single Radio Voice Call Continuity (SRVCC); Stage 2\".
[5] 3GPP TS 25.413: \"UTRAN Iu interface Radio Access Network Application Part
(RANAP) signalling\".
# 3 Definitions and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
TR 21.905 [1] and the following apply.\ A term defined in the present document
takes precedence over the definition of the same term, if any, in TR 21.905
[1].
Definition format (Normal)
**\ :** \.
**example:** text used to clarify abstract rules by applying them literally.
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in TR 21.905
[1] and the following apply.\ An abbreviation defined in the present document
takes precedence over the definition of the same abbreviation, if any, in TR
21.905 [1].
Abbreviation format (EW)
\ \
# 4 General issues with CS/PS coordination
In conventional networks, the same CN operator always serves the UE in CS and
PS domains. In a shared network the same conclusion is valid as for
conventional networks with respect to registration with CS and PS domains and
the UE shall always register with the same operator for the CS and PS domains.
If the CS/PS coordination fails i.e. separate CS and PS requests are accepted
by different sharing operators, the UE will receive a TMSI pointing to one
sharing operator and a P-TMSI pointing to another sharing operator. In both
cases the Common PLMN will be used, so for basic connectivity and service
there should be no problem. The RAN will route subsequent messages based on
the temporary identifiers. From the sharing operator\'s point of view the UE
will be registered and receive service for either CS only or PS only. Charging
will be received from separate operators for CS and PS.
Additional affects from incorrect CS/PS coordination are:
i. The network name presented to the end user will be according to the name
corresponding to the Common PLMN. If Network Identity and TimeZone (TS 22.042
[3]) is used to provide an the operator name to the UE for displaying to the
user, either the network providing CS service or the network providing PS
service will be displayed depending on which domain registration is completed
successfully last. Thus, it is unpredictable which name will be displayed.
ii. The tariff information sent to the UE e.g. via SMS, if any, will come from
the home operators. The information may come separate for CS and for PS
services. If the tariffs from both serving operators differ, the end user will
assume the tariff of the displayed network applies. The consequence in such a
cases is that the end user will assume being charged according to one tariff
while in reality charged according to the tariff of another operator. However
a more likely scenario may be that the roamed to tariffs are identical for all
permitted networks in a country.
iii. The equivalent PLMN list used will be provided by one operator and it is
unpredictable which as the latest received will be used by the UE. The
equivalent PLMN list can change back and forth between the list provided by
the CS domain operator and the PS domain operator, and it is thus
unpredictable what PLMN the UE can reselect to if e.g. reselecting to LTE.
iv. When operators are not using coordinated NRIs between different networks,
between different areas within a shared network or if NRI coordination method
is used but the UE provided NRI is from an area or network that doesn't belong
to the coordinated NRIs or an NRI is absent, the network-initiated CS/PS
coordination process is used as part of UE mobility procedures between such
areas or networks. This process guarantee the coordination of UE\'s serving
operator in the target CS and PS domains but may result in change of the
serving CN operator for the UE compared to the CN operator used before the
mobility procedure. For Visited-GGSN/PDNWG roaming this will imply a change of
user IP address, which may in turn have end-user service impacts (many
applications can handle a change of IP address but this is not always true)
and result in negative effects on the user perception of operators sharing
networks. Frequent mobility events for which the network-initiated CS/PS
coordination process is evoked may lead to excessive signalling, for example
between UEs and application servers to handle the change of the UE\'s IP
address.
# 5 Scenarios
## 5.1 CS Handover to UTRAN/GERAN Scenarios
Below scenarios cover CS handover to UTRAN/GERAN for non-supporting UE\'s and
for network not broadcasting multiple PLMN list. For the GERAN cases it covers
both DTM and non-DTM.
### 5.1.1 GERAN MOCN, non DTM, no combined procedures
This scenario is CS Handover, non-DTM, MOCN and no combined update procedures.
#### 5.1.1.1 Description
Figure 5.1.1.1-1: CS Handover to shared GERAN network, non-DTM, MOCN, no
combined procedures, CS handover is performed to a shared GERAN network
1 (1a) Source RAN selects the target CS operator and sends Relocation Required
to source MSC. (1b) Source MSC sends a Handover Request to the target MSC.
2 UE goes idle.
3 (3a) The UE sends a Location Update Request to the target BSS.
Pool Centric: (3b) the target BSS selects CS operator using MOCN redirection
procedure incl. CS/PS coordination as specified in TS 23.251 [2].
Operator Centric: (3b) the target BSS selects target MSC based on coordinated
NRI. If the NRI is not coordinated the target BSS selects CS operator using
MOCN redirection procedure incl. CS/PS coordination.
4 (4a) The UE sends a Routing Area Update Request to the target BSS.
Pool Centric: (4b) The target BSS selects PS operator using MOCN redirection
procedure incl. CS/PS coordination as specified in TS 23.251 [2].
Operator Centric: (4b) the target BSS selects target SGSN based on coordinated
NRI. If the NRI is not coordinated the target BSS selects PS operator using
MOCN redirection procedure incl. CS/PS coordination.
#### 5.1.1.2 Identified issues
**Pool Centric:**
No risk for incorrect CS/PS Coordination as target BSS selects CS and PS
operator using MOCN redirect procedure i.e. CS/PS coordination achieved after
step 3 and 4 is performed.
Operator change can occur after CS handover when UE goes idle and the Location
Update is triggered in step 3.
**Operator Centric:**
There are no issues when NRIs are coordinated, but for uncoordinated NRIs the
subsequent LAU after the call has ended the serving operator may change.
### 5.1.2 GERAN MOCN, non-DTM, combined procedures
This scenario is CS Handover, non-DTM, MOCN and combined procedures.
#### 5.1.2.1 Description
Figure 5.1.2.1-1: CS Handover to shared GERAN network, non-DTM, MOCN, combined
procedures
1 CS handover is performed to a shared GERAN network. (1a) Source RAN selects
the target CS operator and sends Relocation Required to source MSC. (1b)
Source MSC sends a Handover Request to the target MSC.
2 UE goes idle.
3 (3a) The UE sends a Routing Area Update Request (Update Type) to target
SGSN. Update Type indicates Combined RA/LA update. (3b) Target BSS which
selects PS operator using MOCN redirection procedure incl. CS/PS coordination.
(3c) After PS operator is selected in the MOCN Redirect Procedure the target
CS operator (target MSC) is selected by target SGSN and sends Location Update
Request to selected target MSC.
#### 5.1.2.2 Identified issues
No risk for incorrect CS/PS coordination after MOCN Redirect procedure (step
3b) with combined RA/LA updates (step 3c).
After the UE goes idle (step 2) a change of CS operator can occur as the
target SGSN makes a new selection of CS operator in step 3c.
### 5.1.3 GERAN GWCN, non-DTM, no combined procedures
This scenario is CS Handover, non-DTM, GWCN and no combined update procedures.
#### 5.1.3.1 Description
Figure 5.1.3.1-1: CS Handover to shared GERAN network, non-DTM, GWCW, no
combined procedures
1 CS handover is performed to a shared GERAN network. (1a) Source RAN selects
the target CS operator and sends Relocation Required to source MSC. (1b)
Source MSC sends a Handover Request to the target GWCN MSC. The target GWCN
MSC routes the request to the target operator based on selected PLMN.
2 UE goes idle
3 (3a) UE sends a Location Update Request to target BSS. (3b) The target BSS
selects target MSC and sends the Location Update Request to the target MSC.
(3c) The target GWCN MSC routes the request to CS operator based on:
i IMSI; or
ii Old LAI + Old TMSI (NRI coordination)
4 (4a) The UE sends a Routing Area Update Request to the target BSS. (4b) The
target BSS selects target SGSN and sends the Routing Area Update Request to
the target SGSN. (4c) The target GWCN SGSN routes the request to PS operator
based on:
i IMSI; or
ii Old RAI + Old P-TMSI (NRI coordination)
#### 5.1.3.2 Identified issues
Risk for incorrect CS/PS coordination as target MSC and target SGSN internally
and independently selects/routes the request to one of the sharing operators
in the node.
If the Location Update procedure (step 3) and the Routing Area Update
procedure (step 4) uses the same selection criteria (i.e. IMSI in both MSC and
SGSN or old LAI + old TMSI/old RAI + old P-TMSI) there should not be any risk
for incorrect CS/PS coordination.
A further problem is valid if the UE handover from a non-NRI coordinated area
or no NRI exist in handover from 2G/3G network as NRI is not mandatory in a
non-pooled 2G/3G network thus preventing CSPS Coordination.
### 5.1.4 GERAN GWCN, non-DTM, combined procedures
This scenario is CS Handover, non-DTM, GWCN and combined update procedures.
#### 5.1.4.1 Description
Figure 5.1.4.1-1: CS Handover to shared GERAN network, non-DTM, GWCN, combined
procedures
1 CS handover is performed to a shared GERAN network. (1a) Source RAN selects
the target CS operator and sends Relocation Required to source MSC. (1b)
Source MSC sends a Handover Request to the target GWCN MSC. The target GWCN
MSC routes the request to the target operator based on selected PLMN.
2 UE goes idle
3 (3a) The UE sends a Routing Area Update Request (Update Type) to target
SGSN. Update Type indicates Combined RA/LA update. (3b) The target BSS selects
target SGSN and sends the Routing Area Update Request to the target GWCN SGSN.
(3c) The target GWCN SGSN selects/routes the request to the target PS operator
based on:
i IMSI; or
ii Old RAI + Old P-TMSI (NRI coordination)
4 The target SGSN selects target GWCN MSC and sends (3d) Location Update
Request to the target GWCN MSC. Target GWCN MSC selects operator based on
\"Selected CN operator\" sent over Gs.
#### 5.1.4.2 Identified issues
No risk for incorrect CS/PS coordination as operator selection is made in the
PS domain by the target RAN (step 3b) followed by target SGSN selecting the CS
operator in the combined procedure and indicating selected operator over Gs
(step 3c).
### 5.1.5 UTRAN/GERAN MOCN, no combined procedures
This scenario is CS Handover, DTM, MOCN and no combined update procedures.
#### 5.1.5.1 Description
Figure 5.1.5.1-1: CS Handover to shared UTRAN/GERAN network, DTM, MOCN, no
combined procedures
1 CS handover is performed to a shared UTRAN/GERAN network. (1a) Source RAN
selects the target CS operator and sends Relocation Required to source MSC.
(1b) Source MSC sends a Handover Request to the target MSC.
2 (2a) The UE sends a Routing Area Update Request to the target BSS/RNC.\ Pool
Centric: (2b) the target BSS/RNC selects PS operator using MOCN redirection
procedure incl. CS/PS coordination as specified in TS 23.251 [2].\ Operator
Centric: (2b) the target BSS/RNC selects target SGSN based on coordinated NRI.
If the NRI is not coordinated the target BSS/RNC selects PS operator using
MOCN redirection procedure incl. CS/PS coordination
3 UE goes idle
4 (4a) The UE sends a Location Update Request to the target BSS/RNC.\ Pool
Centric: (4b) the target BSS/RNC selects CS operator using MOCN redirection
procedure incl. CS/PS coordination as specified in TS 23.251 [2].\ Operator
Centric: The target BSS/RNC selects target MSC based on coordinated NRI. If
the NRI is non-coordinated the target BSS/RNC selects CS operator using MOCN
redirection procedure incl. CS/PS coordination
#### 5.1.5.2 Identified issues
**Pool Centric:**
No risk for incorrect CS/PS Coordination as target BSS/RNC selects CS and PS
operator using MOCN redirect procedure i.e. CS/PS coordination achieved after
step 4 is performed.
After step 2 the PS operator can differ from the CS operator.
Operator change can occur after CS handover when UE goes idle and the Location
Update is performed in step 4.
**Operator Centric:**
There are no issues when NRIs are coordinated, but for uncoordinated NRIs, a
user may not be CS/PS coordinated during the ongoing CS call and as a result
of the subsequent LAU after the call has ended the serving operator may
change.
### 5.1.6 UTRAN/GERAN MOCN, combined procedures
This scenario is CS Handover, DTM, MOCN and combined update procedures.
#### 5.1.6.1 Description
Figure 5.1.6.1-1: CS Handover to shared UTRAN/GERAN network, DTM, MOCN,
combined procedures
1 CS handover is performed to a shared UTRAN/GERAN network. (1a) Source RAN
selects the target CS operator and sends Relocation Required to source MSC.
(1b) Source MSC sends a Handover Request to the target MSC.
2 (2a) The UE sends a Routing Area Update Request to the target BSS/RNC. (2b)
The target BSS/RNC selects PS operator using MOCN redirection procedure as
specified in TS 23.251 [2].
3 UE goes idle.
4 (4a) The UE sends an Area Update Request (Update Type) to target SGSN.
Update Type indicates Combined RA/LA update. (4b) Target RNC/BSS which selects
PS operator using MOCN redirection procedure as specified in TS 23.251 [2].
(4c) After PS operator is selected in the MOCN Redirect Procedure the target
CS operator (target MSC) is selected by target SGSN and sends Location Update
Request to selected target MSC.
#### 5.1.6.2 Identified issues
No risk for incorrect CS/PS coordination as operator selection is made in the
PS domain by the target RNC/BSS followed by target SGSN selecting the CS
operator in the combined procedure and indicating selected operator over Gs
after step 4 is performed.
After step 2 the PS operator can differ from the CS operator.
Operator change can occur after CS handover when UE goes idle and the Location
Update is performed in step 4.
### 5.1.7 UTRAN/GERAN GWCN, no combined procedures
This scenario is CS Handover, DTM, GWCN and no combined update procedures.
#### 5.1.7.1 Description
Figure 5.1.7.1-1: CS Handover to shared UTRAN/GERAN network, DTM, GWCN, no
combined procedures
1 CS handover is performed to a shared UTRAN/GERAN network. (1a) Source RAN
selects the target CS operator and sends Relocation Required to source MSC.
(1b) Source MSC sends a Handover Request to the target GWCN MSC. The target
GWCN MSC routes the request to the target operator based on selected PLMN.
2 (2a) The UE sends a Routing Area Update Request to the target BSS/RNC. (2b)
The target BSS/RNC selects target SGSN and sends the Routing Area Update
Request to the target SGSN. (2c) The target GWCN SGSN routes the request to PS
operator based on:
i IMSI; or
ii Old RAI + Old P-TMSI (NRI coordination)
3 UE goes idle
4 (4a) UE sends a Location Update Request to target RNC/BSS. (4b) The target
RNC/BSS selects target MSC and sends the Location Update Request to the target
MSC. (4c) The target GWCN MSC routes the request to CS operator based on:
i IMSI; or
ii Old LAI + Old TMSI (NRI coordination)
#### 5.1.7.2 Identified issues
Risk for incorrect CS/PS coordination as target MSC and target SGSN internally
and independently selects/routes the request to one of the sharing operators
in the node.
If the Routing Area Update procedure (step 2) and the Location Update
procedure (step 4) uses the same selection criteria (i.e. IMSI in both MSC and
SGSN or old LAI + old TMSI/old RAI + old P-TMSI) there should not be any risk
for incorrect CS/PS coordination.
A further problem is that a UE handover from LTE may not have a valid Old LAI
and Old TMSI thus preventing CS/PS coordination according to method 4ii (NRI
coordination). The same issue is also valid if the UE handover from a non-NRI
coordinated area or no TMSI exist in handover from 2G/3G network as TMSI is
not mandatory in a non-pooled 2G/3G network thus excluding method 3ii and 4ii.
In the Routing Area Update in step 2 a different PS operator can be selected
compared to the CS operator selected in the CS Handover procedure (step 1)
i.e. incorrect CS/PS coordination.
### 5.1.8 UTRAN/GERAN GWCN, combined procedures
This scenario is CS Handover, DTM, GWCN and combined update procedures.
#### 5.1.8.1 Description
Figure 5.1.8.1-1: CS Handover to shared UTRAN/GERAN network, DTM, GWCN,
combined procedures
1 CS handover is performed to a shared UTRAN/GERAN network. (1a) Source RAN
selects the target CS operator and sends Relocation Required to source MSC.
(1b) Source MSC sends a Handover Request to the target GWCN MSC. The target
GWCN MSC routes the request to the target operator based on selected PLMN.
2 (2a) The UE sends a Routing Area Update Request to the target BSS/RNC. (2b)
The target BSS/RNC selects target SGSN and sends the Routing Area Update
Request to the target SGSN. (2c) The target GWCN SGSN selects/routes the
request to the target PS operator based on:
i IMSI; or
ii Old RAI + Old P-TMSI (NRI coordination)
3 UE goes idle
4 (4a) The UE sends a Routing Area Update Request (Update Type) to target
SGSN. Update Type indicates Combined RA/LA update. (4b) The target RNC/BSS
selects target SGSN and sends the Routing Area Update Request to the target
GWCN SGSN. (4c) The target GWCN SGSN selects/routes the request target
operator. The target GWCN SGSN selects/routes the request to CS operator based
on:
i IMSI; or
ii Old RAI + Old P-TMSI (NRI coordination)
The target SGSN selects target GWCN MSC and sends (4d) Location Update Request
to the target GWCN MSC. Target GWCN MSC selects operator based on \"Selected
CN operator\" sent over Gs.
#### 5.1.8.2 Identified issues
No risk for incorrect CS/PS coordination as operator selection is made in the
PS domain by the source RAN (step 4b) followed by target SGSN selecting the CS
operator in the combined procedure and indicating selected operator over Gs.
In the Routing Area Update in step 2 a different PS operator can be selected
compared to the CS operator selected in the CS Handover procedure (step 1).
## 5.2 PS Handover to UTRAN/GERAN Scenarios
### 5.2.1 GERAN MOCN, non-DTM, no combined update procedures
This scenario is PS Handover, non-DTM, MOCN and no combined update procedure.
The Scenarios are valid for non-supporting UEs and for network not
broadcasting multiple PLMN list.
#### 5.2.1.1 Description
Figure 5.2.1.1-1: PS Handover to shared GERAN network, non-DTM, MOCN, no
combined update procedure
1 PS handover is performed to a shared GERAN network. (1a) Source RAN selects
the target PS operator and sends Handover Required (Target Cell Identifier) to
source SGSN/MME. Source SGSN/MME request the target CN to establish resources
in the Target BSS and Target SGSN.
2 UE sends a RAU Request to target SGSN. (2b) As the UE is in connected mode
the RAU Request is sent to the target SGSN as selected in step 1a.
3 UE goes idle.
4 The UE sends a Location Update Request to the target BSS.
Pool Centric: The target BSS selects CS operator using MOCN redirection
procedure incl. CS/PS coordination as specified in TS 23.251 [2].
Operator Centric: The target BSS selects target MSC based on coordinated NRI.
If the NRI is not coordinated the target BSS selects CS operator using MOCN
redirection procedure incl. CS/PS coordination. After this step no RAU will be
performed as no RA change has occurred.
#### 5.2.1.2 Identified issues
**Pool Centric:**
Risk for incorrect CS/PS coordination as operator selection is made
independently in the PS domain by source RAN (step 1a) and in the CS domain by
target BSS (step 4b).
Even if a RAU is performed after step 4 (due to changed RA) no CS/PS
coordination will be done as no MOCN redirection procedure will be triggered
in the PS domain as the UE is already registered in an SGSN in the shared
network.
There will be CS/PS uncoordinated users. These users will stay uncoordinated
until the next pool change.
**Operator Centric:**
Risk for incorrect CS/PS coordination as operator selection is made
independently in the PS domain by source RAN (step 1a) and in the CS domain by
target BSS (step 4b).
Even if a RAU is performed after step 4 (due to changed RA) no CS/PS
coordination will be done as no MOCN redirection procedure will be triggered
in the PS domain as the UE is already registered in an SGSN in the shared
network.
For uncoordinated NRIs, there will be CS/PS uncoordinated users. These users
will stay uncoordinated since NRIs from the CS and PS domains are considered
coordinated in the target network.
### 5.2.2 Pool Centric: PS Handover to GERAN with no DTM support, user is SGs
registered in the target network, no change of MSC pool
In this case the target network is GERAN without DTM. The source network is
EUTRAN. The UE is SGs registered to operator A and the target cell belongs to
the registered MSC pool. In the PS domain there is a change of pool. The
signalling flow is valid only for a target MOCN. Only non-combined update
procedures are used, i.e. the Gs is not used in the target network.
The UE has done attach to operator A in a non-shared network or in a shared
network in which the UE is a \"supporting UE\". This is the source network. In
the signalling flows there is a MSC A1 and MSC A2, which are MSCs of operator
A. The MSC B denotes an MSC of the partner operator B. The UE is assumed to be
registered to MSC A1 in source network. The target MSC is MSC A2 when there is
a change of pool in CS domain and MSC A1 when there is no change of pool. The
same analogy applies to the PS domain but the source node is MME A1.
#### 5.2.2.1 Description
Figure 5.2.2.1-1: PS Handover to GERAN with no DTM support, user is SGs
registered in the target network, no change of MSC pool using the pool centric
approach for CS/PS coordination.
1 PS Handover is performed to operator A. The associated RAU is sent on the
same signalling connection to the same operator as the handover.
2 PS session ends.
3 The UE performs a LAU and the LAU is routed to operator A since the NRI was
generated by an MSC of operator A as part of the SGs registration. . Since
there is no change of pool, there is no CS/PS coordination initiated.
#### 5.2.2.2 Identified issues
There are no CS/PS coordination issues with this use case.
### 5.2.3 Operator Centric: PS Handover to a GERAN without DTM support, user
is SGs registered in the target network
In this case the target network is GERAN without DTM. The source network is
EUTRAN. The UE is SGs registered to operator A and the target cell belongs to
the network in which UE is SGs registered. The CS domain and PS domain NRIs
are coordinated within the target network. Hence, the NRI for CS domain is
always coordinated, since UE is already SGs registered in target network. In
the PS domain the source MMEC and the target NRI may be coordinated or
uncoordinated. In the PS domain there is a change of pool. In the CS domain
there may be a change of pool (if target cell does not belong to the SGs
registered MSC pool). The signalling flow shows a target MOCN, but the results
are also valid for a target GWCN. Only non-combined update procedures are
used, i.e. the Gs is not used in the target network.
The UE has done attach to operator A in a non-shared network or in a shared
network in which the UE is a \"supporting UE\". This is the source network. In
the signalling flows there is a MSC A1 and MSC A2, which are MSCs of operator
A. The MSC B denotes an MSC of the partner operator B. The UE is assumed to be
registered to MSC A1 in source network. The target MSC is MSC A2 when there is
a change of pool in CS domain and MSC A1 when there is no change of pool. The
same analogy applies to the PS domain but the source node is MME A1.
#### 5.2.3.1 Description
Figure 5.2.3.1-1: PS Handover to a GERAN without DTM support, user is SGs
registered in the target network using the operator centric approach for CS/PS
coordination.
1 PS Handover is performed to operator A. The associated RAU is sent on the
same signalling connection to the same operator as the handover.
2 PS session ends.
3 The UE performs a LAU (if necessary) and the LAU is routed to operator A
since the NRI was generated by an MSC of operator A as part of the SGs
registration. This thus works even if there is a change of pool in the target
network.
#### 5.2.3.2 Identified issues
There are no CS/PS coordination issues with this use case.
### 5.2.4 GERAN MOCN, non-DTM combined update procedures
This scenario is PS Handover, non-DTM, MOCN and combined update procedures.
#### 5.2.4.1 Description
Figure 5.2.4.1-1: PS Handover to shared GERAN network, non-DTM, MOCN, combined
update procedures
1 PS handover is performed to a shared GERAN network. (1a) Source RAN selects
the target PS operator and sends Handover Required (Target Cell Identifier) to
source SGSN/MME. Source SGSN/MME request the target CN to establish resources
in the Target BSS and Target SGSN.
2 (2a) The UE sends a Routing Area Update Request (Update Type) to target BSS.
(2b) As the UE is in connected mode the RAU Request is sent to the target SGSN
as selected in step 1a. Update Type indicates Combined RA/LA update. (2c) The
target SGSN selects target CS operator (target MSC) and sends Location Update
Request to selected target MSC.
3 UE goes idle and no additional Location Update is performed due to the
combined RA/LA procedure.
#### 5.2.4.2 Identified issues
No risk for incorrect CS/PS coordination as operator selection is made in the
PS domain by the source RAN (step 1a) followed by target SGSN selecting the CS
operator in the combined update procedure (step 2c).
### 5.2.5 GERAN GWCN, non-DTM, no combined update procedures
This scenario is PS Handover, non-DTM, GWCN and no combined update procedure.
#### 5.2.5.1 Description
Figure 5.2.5.1-1: PS Handover to shared GERAN network, non-DTM, GWCN, no
combined update procedure
1 PS handover is performed to a shared GERAN network. (1a) Source RAN selects
the target PS operator and sends Handover Required (Target Cell Identifier) to
source SGSN/MME. Source SGSN/MME request the target CN to establish resources
in the Target BSS and Target SGSN. (1c) The target GWCN SGSN routes the
request to the target operator based on the Selected PLMN ID in the Forward
Relocation Request message (1b).
2 UE sends a RAU Request to target SGSN. (2b) As the UE is in connected mode
the RAU Request is sent to the target SGSN/target operator as selected in step
1a.
3 UE goes idle
4 (4a) UE sends a Location Update Request to target BSS. (4b) The target BSS
selects target MSC and sends the Location Update Request to the target MSC.
(4c) The target GWCN MSC routes the request to CS operator based on:
i IMSI; or
ii Old LAI + Old TMSI (NRI coordination)
#### 5.2.5.2 Identified issues
Risk for incorrect CS/PS coordination as operator selection is made
independently in the PS domain by source RAN (step 1a) and in the CS domain by
target MSC (step 4c).
Even if a RAU is performed after step 4 (due to changed RA) there will be no
re-selection of operator in the GWCN SGSN as the UE is already registered with
a valid NRI in its P-TMSI i.e. no CS/PS coordination will be done after step 4
even if the CS and PS operator selection is incorrect.
A further problem is that a UE handover from LTE may not have a valid Old LAI
and Old TMSI thus preventing CS/PS coordination according to method 4ii (NRI
coordination). The same issue is also valid if the UE handover from a non-NRI
coordinated area or no NRI exist in handover from 2G/3G network as NRI is not
mandatory in a non-pooled 2G/3G network.
### 5.2.6 GERAN GWCN, non-DTM, combined update procedures
This scenario is PS Handover, non-DTM, GWCN and with combined update
procedures.
#### 5.2.6.1 Description
Figure 5.2.6.1-1: PS Handover to shared GERAN network, non-DTM, GWCN, with
combined update procedures
1 PS handover is performed to a shared GERAN network. (1a) Source RAN selects
the target PS operator and sends Handover Required (Target Cell Identifier) to
source SGSN/MME. Source SGSN/MME request the target CN to establish resources
in the Target BSS and Target SGSN. (1c) The target GWCN SGSN routes the
request to the target operator based on the Selected PLMN ID in the Forward
Relocation Request message (1b).
2 (2a) The UE sends a Routing Area Update Request (Update Type) to target
SGSN. (2b) As the UE is in connected mode the RAU Request is sent to the
target SGSN as selected in step 1a. Update Type indicates Combined RA/LA
update. (2c) The target SGSN selects target CS operator (target MSC) and sends
Location Update Request to selected target GWCN MSC. (2d) Target GWCN MSC
selects operator based on \"Selected CN operator\" sent over Gs.
3 UE goes idle and no additional Location Update is performed due to the
combined RA/LA procedure.
#### 5.2.6.2 Identified issues
No risk for incorrect CS/PS coordination as operator selection is made in the
PS domain by the source RAN (step 1a) followed by target SGSN selecting the CS
operator in the combined update procedure and indicating selected operator
over Gs.
### 5.2.7 UTRAN/GERAN MOCN, no combined update procedures
This scenario is PS Handover, DTM, MOCN and no combined update procedures.
#### 5.2.7.1 Description
Figure 5.2.7.1-1: PS Handover to shared UTRAN/GERAN network, DTM, MOCN, no
combined update procedures
1 PS handover is performed to a shared UTRAN/GERAN network. (1a) Source RAN
selects the target PS operator and sends Handover Required (Target RNC
Identifier/ Target Cell Identifier) to source SGSN/MME. Source SGSN/MME
request the target CN to establish resources in the Target RNC/BSS and Target
SGSN.
2 UE sends a RAU Request to target SGSN. (2b) As the UE is in connected mode
the RAU Request is sent to the target SGSN as selected in step 1a.
3 (3a) The UE sends a Location Update Request to the target BSS/RNC.\ Pool
Centric: (3b) The target BSS/RNC selects CS operator using MOCN redirection
procedure as specified in TS 23.251 [2].\ Operator Centric: (3b) The target
BSS selects target MSC based on coordinated NRI. If the NRI is not coordinated
the target BSS selects CS operator using MOCN redirection procedure incl.
CS/PS coordination.
4 UE goes idle and no Location Update or Routing Area Update is performed as
this is already done in step 2 and step 3.
#### 5.2.7.2 Identified issues
**Pool Centric:**
Risk for incorrect CS/PS coordination as operators are selected independently
in source RAN (PS operator) in step 1 and target RNC/BSS (CS operator) in step
3.
There will be CS/PS uncoordinated users. These users will stay uncoordinated
until the next pool change.
**Operator Centric:**
Risk for incorrect CS/PS coordination as operators are selected independently
in source RAN (PS operator) in step 1 and target RNC/BSS (CS operator) in step
3.
For the uncoordinated NRI case, there will be CS/PS uncoordinated users. These
users will stay uncoordinated since NRIs from the CS and PS domains are
considered coordinated in the target network.
### 5.2.8 Pool Centric: PS Handover to UTRAN or GERAN with DTM support, user
is SGs registered in the target network, no change of MSC pool
In this case the target network is GERAN with DTM or UTRAN. The source network
is EUTRAN. The UE is SGs registered to operator A and the target cell belongs
to the registered MSC pool. In the PS domain there is a change of pool. The
signalling flow is valid only for a target MOCN. Only non-combined update
procedures are used, i.e. the Gs is not used in the target network.
The UE has done attach to operator A in a non-shared network or in a shared
network in which the UE is a \"supporting UE\". This is the source network. In
the signalling flows there is a MSC A1 and MSC A2, which are MSCs of operator
A. The MSC B denotes an MSC of the partner operator B. The UE is assumed to be
registered to MSC A1 in source network. The target MSC is MSC A2 when there is
a change of pool in CS domain and MSC A1 when there is no change of pool. The
same analogy applies to the PS domain but the source node is MME A1.
#### 5.2.8.1 Description
Figure 5.2.8.1-1: PS Handover to UTRAN or GERAN with DTM support, user is SGs
registered in the target network, no change of MSC pool using the pool centric
approach for CS/PS coordination.
1 PS Handover is performed to operator A. The subsequent RAU is sent on the
same signalling connection to the same operator as the handover.
2 The UE performs a LAU and the LAU is routed to operator A since the NRI was
generated by an MSC of operator A as part of the SGs registration. Since there
is no change of pool, there is no CS/PS coordination initiated.
#### 5.2.8.2 Identified issues
There are no CS/PS coordination issues with this use case.
### 5.2.9 Operator Centric: PS Handover to a UTRAN or GERAN with DTM support,
user is SGs registered in the target network
In this case the target network is GERAN with DTM or UTRAN. The source network
is EUTRAN. The UE is SGs registered to operator A and the target cell belongs
to the network in which UE is SGs registered. The CS domain and PS domain NRIs
are coordinated within the target network. Hence, the NRI for CS domain is
always coordinated, since UE is already SGs registered in target network. In
the PS domain the source MMEC and the target NRI may be coordinated or
uncoordinated. In the PS domain there is a change of pool. In the CS domain
there may be a change of pool (if target cell does not belong to the SGs
registered MSC pool). The signalling flow shows a target MOCN, but the results
are also valid for a target GWCN. Only non-combined update procedures are
used, i.e. the Gs is not used in the target network.
The UE has done attach to operator A in a non-shared network or in a shared
network in which the UE is a \"supporting UE\". This is the source network. In
the signalling flows there is a MSC A1 and MSC A2, which are MSCs of operator
A. The MSC B denotes an MSC of the partner operator B. The UE is assumed to be
registered to MSC A1 in source network. The target MSC is MSC A2 when there is
a change of pool in CS domain and MSC A1 when there is no change of pool. The
same analogy applies to the PS domain but the source node is MME A1.
#### 5.2.9.1 Description
Figure 5.2.9.1-1: PS Handover to a UTRAN or GERAN with DTM support, user is
SGs registered in the target network using the operator centric approach for
CS/PS coordination.
1 PS Handover is performed to operator A. The subsequent RAU is sent on the
same signalling connection to the same operator as the handover.
2 The UE performs a LAU and the LAU is routed to operator A since the NRI was
generated by an MSC of operator A as part of the SGs registration. This thus
works even if there is a change of pool in the target network.
#### 5.2.9.2 Identified issues
There are no CS/PS coordination issues with this use case.
### 5.2.10 UTRAN/GERAN MOCN, combined update procedures
This scenario is PS Handover, DTM, MOCN and combined update procedures.
#### 5.2.10.1 Description
Figure 5.2.10.1-1: PS Handover to shared UTRAN/GERAN network, DTM, MOCN,
combined update procedures
1 PS handover is performed to a shared UTRAN/GERAN network. (1a) Source RAN
selects the target PS operator and sends Handover Required (Target RNC
Identifier/ Target Cell Identifier) to source SGSN/MME. Source SGSN/MME
request the target CN to establish resources in the Target RNC/BSS and Target
SGSN.
2 (2a) The UE sends a Routing Area Update Request (Update Type) to target
RNC/BSS. (2b) As the UE is in connected mode the RAU Request is sent to the
target SGSN as selected in step 1a. Update Type indicates Combined RA/LA
update. (2c) The target SGSN selects target CS operator (target MSC) and sends
Location Update Request to selected target MSC.
3 UE goes idle and no additional Location Update is performed due to the
combined RA/LA procedure.
#### 5.2.10.2 Identified issues
No risk for incorrect CS/PS coordination as operator selection is made in the
PS domain by the source RAN (A) followed by target SGSN selecting the CS
operator in the combined update procedure (B).
### 5.2.11 UTRAN/GERAN GWCN, no combined update procedures
This scenario is PS Handover, DTM, GWCN and no combined update procedures.
#### 5.2.11.1 Description
Figure 5.2.11.1-1: PS Handover to shared UTRAN/GERAN network, DTM, GWCN, no
combined update procedures
1 PS handover is performed to a shared UTRAN/GERAN network. (1a) Source RAN
selects the target PS operator and sends Handover Required (Target RNC
Identifier/ Target Cell Identifier) to source SGSN/MME. Source SGSN/MME
request the target CN to establish resources in the Target RNC/BSS and Target
SGSN. (1c) The target GWCN SGSN routes the request to the target operator
based on the Selected PLMN ID in the Forward Relocation Request message (1b).
2 UE sends a RAU Request to target SGSN. (2b) As the UE is in connected mode
the RAU Request is sent to the target SGSN/target operator as selected in step
1a.
3 (3a) UE sends a Location Update Request to target RNC/BSS. (3b) The target
RNC/BSS selects target MSC and sends the Location Update Request to the target
MSC. (3c) The target GWCN MSC routes the request to CS operator based on:
i IMSI; or
ii Old LAI + Old TMSI (NRI coordination)
#### 5.2.11.2 Identified issues
Risk for incorrect CS/PS coordination as operator selection is made
independently in the PS domain by source RAN (step 1a) and in the CS domain by
target MSC (step 3c).
A further problem is that a UE handover from LTE may not have a valid Old LAI
and Old TMSI thus preventing CS/PS coordination according to method 3ii (NRI
coordination). The same issue is also valid if the UE handover from a non-NRI
coordinated area or no NRI exist in handover from 2G/3G network as NRI is not
mandatory in a non-pooled 2G/3G network.
### 5.2.12 UTRAN/GERAN GWCN, combined update procedures
This scenario is PS Handover, DTM, GWCN and combined update procedures.
#### 5.2.12.1 Description
Figure 5.2.12.1-1: PS Handover to shared UTRAN/GERAN network, DTM, GWCN,
combined update procedures
1 PS handover is performed to a shared UTRAN/GERAN network. (1a) Source RAN
selects the target PS operator and sends Handover Required (Target RNC
Identifier/ Target Cell Identifier) to source SGSN/MME. Source SGSN/MME
request the target CN to establish resources in the Target RNC/BSS and Target
SGSN. (1c) The target GWCN SGSN routes the request to the target operator
based on the Selected PLMN ID in the Forward Relocation Request message (1b).
2 (2a) The UE sends a Routing Area Update Request (Update Type) to target
SGSN. (2b) As the UE is in connected mode the RAU Request is sent to the
target SGSN as selected in step 1a. Update Type indicates Combined RA/LA
update. (2c) The target SGSN selects target CS operator (target MSC) and sends
Location Update Request to selected target GWCN MSC. (2d) Target GWCN MSC
selects operator based on \"Selected CN operator\" sent over Gs.
3 UE goes idle and no additional Location Update is performed due to the
combined RA/LA procedure.
#### 5.2.12.2 Identified issues
No risk for incorrect CS/PS coordination as operator selection is made in the
PS domain by the source RAN (step 1a) followed by target SGSN selecting the CS
operator in the combined update procedure and indicating selected operator
over Gs.
## 5.3 SRVCC with SGs registration scenarios
See section 5.9 for merged SGs and non-SGs Registered scenarios.
According to TS 23.216 [4], TMSI reallocation performed by the \'MSC Server
enhanced for (v)SRVCC\' is a mandatory part of the SRVCC procedure unless the
UE is already registered in the MSC (due to SGs). As the UE during the SRVCC
procedure becomes registered in the \'MSC Server enhanced for (v)SRVCC\' it
doesn\'t matter if the UE is SGs registered or not before the SRVCC procedure
starts. Hence the scenarios with SGs registration can be described together
with the relevant non-SGs Registered scenarios section 5.9
## 5.4 CS Fallback scenarios
Editor\'s note: Further studies are needed in order to ensure that the
scenarios for a target GERAN with and without DTM support and target UTRAN
will have the same outcome (as claimed in the current text).
### 5.4.1 Operator Centric: CS fallback using redirect, user is SGs registered
in the target network
In this scenario the source network is EUTRAN. The UE is SGs registered to
operator A and the target cell belongs to the network in which UE is SGs
registered. The CS domain and PS domain NRIs are coordinated within the target
network. Hence, the NRI for CS domain is always coordinated, since UE is
already SGs registered in target network. In the PS domain the source MMEC and
the target NRI may be coordinated or uncoordinated. RAN treats any provided
NRI (irrespectively of its origin) as valid for routing. In the PS domain
there is a change of pool. In the CS domain there may be a change of pool (if
target cell does not belong to the SGs registered MSC pool). The signalling
flow shows a target MOCN, but the results are also valid for a target GWCN.
Only non-combined update procedures are used, i.e. the Gs is not used in the
target network.
We assume a target GERAN without DTM in the signalling flow. With DTM, or if
target is UTRAN, the RAU will take place between item 2 and 3 in the
signalling flow, but the outcome of the RAU is the same. Hence, the result
after the call is the same with DTM. With DTM or with target UTRAN, and
uncoordinated NRIs the UE is uncoordinated during the call.
The UE has done attach to operator A in a non-shared network or in a shared
network in which the UE is a \"supporting UE\". This is the source network. In
the signalling flows there is a MSC A1 and MSC A2, which are MSCs of operator
A. The MSC B denotes an MSC of the partner operator B. The UE is assumed to be
registered to MSC A1 in source network. The target MSC is MSC A2 when there is
a change of pool in CS domain and MSC A1 when there is no change of pool. The
same analogy applies to the PS domain but the source node is MME A1.
#### 5.4.1.1 Description
Figure5.4.1.1-1: CS fallback using redirect, user is SGs registered in the
target network, using the operator centric approach for CS/PS coordination.
1 The EUTRAN triggers CSFB procedures towards operator A using redirect.
2 If the UE detects that it is in a new LA, a LAU is performed before the CS
session is established. Since the NRI was allocated by operator A as part of
the SGs registration procedure this LAU is always routed to operator A and no
CS/PS will take place.
3 The CS call is established.
4 The CS call is ended
5 The UE performs a LAU (if necessary) and the LAU is routed to operator A
since the NRI was allocated by operator A as part of the SGs registration
procedure.
**[With coordinated NRIs:]{.underline}**
6 The UE performs a RAU and the RAU is routed to operator A since the NRIs are
coordinated.
**[With non-coordinated NRIs:]{.underline}**
6 The UE performs a RAU. CS/PS coordination is triggered and the users are
distributed between the two operators in the PS domain.
#### 5.4.1.2 Identified issues
For the uncoordinated NRI case, there will be uncoordinated users. These users
will stay uncoordinated since NRIs from the CS and PS domains are considered
coordinated in the target network.
### 5.4.2 Operator Centric: CS fallback using redirect, user is not SGs
registered in the target network
In this case the source network is EUTRAN. The UE is SGs registered to
operator A, but the target cell does not belong to the network in which UE is
registered. Hence, in both the CS and the PS domain there is a change of pool
between source and target network. Both CS domain and PS domain NRIs are
coordinated in source and target network, or both are uncoordinated. RAN
treats any provided NRI (irrespectively of its origin) as valid for routing.
The signalling flow shows a target MOCN, but the results are also valid for a
target GWCN. Only non-combined update procedures are used, i.e. the Gs is not
used in the target network.
In the signalling flow we assume that the target network is GERAN with DTM or
UTRAN. At target GERAN without DTM the RAU will take place after call ends,
but the outcome of the RAU is same. Hence, the result after the call is the
same without DTM.
The UE has done attach to operator A in a non-shared network or in a shared
network in which the UE is a \"supporting UE\". This is the source network. In
the signalling flows there is a MSC A1 and MSC A2, which are MSCs of operator
A. The MSC B denotes an MSC of the partner operator B. The UE is assumed to be
registered to MSC A1 in source network. The target MSC is MSC A2 when there is
a change of pool in CS domain and MSC A1 when there is no change of pool. The
same analogy applies to the PS domain but the source node is MME A1.
#### 5.4.2.1 Description
Figure 5.4.2.1-1: CS fallback using redirect, user is not SGs registered in
the target network, using the operator centric approach for CS/PS coordination
1 The EUTRAN triggers CSFB procedures towards operator A using redirect.
**[With coordinated NRIs:]{.underline}**
2 The UE performs a LAU and the LAU is routed to operator A since the NRI was
allocated by operator A as part of the SGs registration procedure.
3 The call is established.
4 The UE performs a RAU and the RAU is routed to operator A since the NRIs are
coordinated.
**[With non-coordinated NRIs:]{.underline}**
2 The UE performs a LAU. CS/PS coordination is triggered and the users are
distributed between the two operators in the CS domain.
3 a. If the CS/PS coordination process directed the UE to operator A, the call
is established
b. If the CS/PS coordination process directed the UE to operator B, the call
setup will fail in most networks since core networks in MOCN usually are not
connected to each other.
4 The UE performs a RAU. CS/PS coordination is triggered and the users are
distributed between the two operators in the PS domain.
#### 5.4.2.2 Identified issues
For the uncoordinated NRI case, call setups can fail because these users are
directed to operator B as a result of the CS/PS coordination process. All
users will be CS/PS coordinated but operator may change except for the case of
GWCN for the uncoordinated NRI case if the same CN operator selection criteria
are not used in target MSC and target SGSN.
### 5.4.3 Operator Centric: CS fallback using PS handover, user is SGs
registered in the target network
In this case the source network is EUTRAN. The UE is SGs registered to
operator A and the target cell belongs to the network in which UE is SGs
registered. The CS domain and PS domain NRIs are coordinated within the target
network. Hence, the NRI for CS domain is always coordinated, since UE is
already SGs registered in target network. In the PS domain the source MMEC and
the target NRI may be coordinated or uncoordinated. RAN treats any provided
NRI (irrespectively of its origin) as valid for routinIn the PS domain there
is a change of pool. In the CS domain there may be a change of pool (if target
cell does not belong to the SGs registered MSC pool). The signalling flow
shows a target MOCN, but the results are also valid for a target GWCN. Only
non-combined update procedures are used, i.e. the Gs is not used in the target
network.
The target network is GERAN or UTRAN. The signalling flow is same with and
without DTM. Without DTM the PS session is suspended and the LAU will take
place as in the signalling flow below.
The UE has done attach to operator A in a non-shared network or in a shared
network in which the UE is a \"supporting UE\". This is the source network. In
the signalling flows there is a MSC A1 and MSC A2, which are MSCs of operator
A. The MSC B denotes an MSC of the partner operator B. The UE is assumed to be
registered to MSC A1 in source network. The target MSC is MSC A2 when there is
a change of pool in CS domain and MSC A1 when there is no change of pool. The
same analogy applies to the PS domain but the source node is MME A1.
#### 5.4.3.1 Description
Figure 5.4.3.1-1: CS fallback using PS handover, user is SGs registered in the
target network, using the operator centric approach for CS/PS coordination
1 The EUTRAN triggers CSFB procedures towards operator A using PS handover. PS
Handover is performed. The subsequent RAU is sent on the same signalling
connection to the same operator as the handover.
2 If the UE detects that it is in a new LA, a LAU is performed before the CS
session is established. Since the NRI was allocated by operator A as part of
the SGs registration this LAU is always routed to operator A and no CS/PS will
take place.
3 The CS call is established.
4 The CS call ends.
5 The UE performs a LAU (if necessary) and the LAU is routed to operator A
since the NRI was allocated by operator A as part of the SGs registration.
#### 5.4.3.2 Identified issues
There are no issues with this use case.
### 5.4.4 Operator Centric: CS fallback using PS handover but not to the SGs
registered network
In this case the source network is EUTRAN. The UE is SGs registered to
operator A, but the target cell does not belong to the network in which UE is
SGs registered. In both the CS and the PS domain there is a change of pool
between source and target network. Both CS domain and PS domain NRIs are
coordinated in source and target network, or both are uncoordinated. The
signalling flow shows a target MOCN, but the results are also valid for a
target GWCN. Only non-combined update procedures are used, i.e. the Gs is not
used in the target network.
The target network is GERAN or UTRAN. The signalling flow is same with and
without DTM. Without DTM the PS session is suspended and the LAU will take
place between as in the signalling flow below.
The UE has done attach to operator A in a non-shared network or in a shared
network in which the UE is a \"supporting UE\". This is the source network. In
the signalling flows there is a MSC A1 and MSC A2, which are MSCs of operator
A. The MSC B denotes an MSC of the partner operator B. The UE is assumed to be
registered to MSC A1 in source network. The target MSC is MSC A2 when there is
a change of pool in CS domain and MSC A1 when there is no change of pool. The
same analogy applies to the PS domain but the source node is MME A1.
#### 5.4.4.1 Description
Figure 5.4.4.1-1: CS fallback using PS handover but not to the SGs registered
network, using the operator centric approach for CS/PS coordination
1 The EUTRAN triggers CSFB procedures towards operator A using PS handover. PS
Handover is performed. The subsequent RAU is sent on the same signalling
connection to the same operator as the handover.
**[With coordinated NRIs:]{.underline}**
2 The UE performs a LAU and the LAU is routed to operator A since the NRI was
allocated by operator A as part of the SGs registration procedure.
3 The CS call is established.
**[With non-coordinated NRIs:]{.underline}**
2 The UE performs a LAU. CS/PS coordination is triggered and the users are
distributed between the two operators in the CS domain.
3 a. If the CS/PS coordination process directed the UE to operator A, the call
is established
b. If the CS/PS coordination process directed the UE to operator B, the call
setup will fail in most networks since core networks in MOCN usually are not
connected to each other.
#### 5.4.4.2 Identified issues
For the uncoordinated NRI case, call setups can fail because the users are
directed to operator B as a result of the CS/PS coordination process. These
users will also be CS/PS uncoordinated due to the CS/PS coordination in the CS
domain and stay uncoordinated since NRIs from the CS and PS domains are
considered coordinated in the target network.
### 5.4.5 Pool Centric: CS fallback using redirect to the SGs registered MSC
pool
In this case the source network is EUTRAN. The UE is SGs registered to
operator A and the target cell is in the registered MSC pool. In the PS domain
there is a change of pool.
We assume a target GERAN without DTM in the signalling flow. With DTM, or if
target is UTRAN, the RAU will take place between item 2. and 3. in the
signalling flow, but the outcome of the RAU is the same. Hence, the result
after the call should be the same with DTM. With DTM or with target UTRAN, and
uncoordinated NRIs the UE is uncoordinated during the call. The signalling
flow is valid only for a target MOCN. Only non-combined update procedures are
used, i.e. the Gs is not used in the target network.
The UE has done attach to operator A in a non-shared network or in a shared
network in which the UE is a \"supporting UE\". This is the source network. In
the signalling flows there is a MSC A1 and MSC A2, which are MSCs of operator
A. The MSC B denotes an MSC of the partner operator B. The UE is assumed to be
registered to MSC A1 in source network. The target MSC is MSC A2 when there is
a change of pool in CS domain and MSC A1 when there is no change of pool. The
same analogy applies to the PS domain but the source node is MME A1.
#### 5.4.5.1 Description
Figure5.4.5.1-1: CS fallback using redirect to the SGs registered MSC pool,
using the operator centric approach for CS/PS coordination
1 The EUTRAN triggers CSFB procedures towards operator A using redirect.
2 If the UE detects that it is in a new LA, a LAU is performed before the CS
session is established. Since the NRI was allocated by operator A as part of
the SGs registration procedure and there is no change of pool, this LAU is
always routed to operator A and no CS/PS will take place.
3 The CS call is established.
4 The CS call is ended
5 The UE performs a LAU (if necessary) and the LAU is routed to operator A
since the NRI was allocated by operator A as part of the SGs registration
procedure and there is no change of pool.
6 The UE performs a RAU. CS/PS coordination is triggered and the users are
distributed between the two operators in the PS domain.
#### 5.4.5.2 Identified issues
There will be uncoordinated users. These users will stay uncoordinated until
the next pool change.
### 5.4.6 Pool Centric: CS fallback using redirect with change of MSC pool
In this case the source network is EUTRAN. The UE is SGs registered to
operator A and the target cell is [not]{.underline} in the registered MSC
pool. Hence, in both the CS and the PS domain there is a change of pool
between source and target network.
In the signalling flow we assume that the target network is GERAN with DTM or
UTRAN. At target GERAN without DTM the RAU will take place after call ends,
but the outcome of the RAU is same. Hence, the result after the call is the
same without DTM. The signalling flow is valid only for a target MOCN. Only
non-combined update procedures are used, i.e. the Gs is not used in the target
network.
The UE has done attach to operator A in a non-shared network or in a shared
network in which the UE is a \"supporting UE\". This is the source network. In
the signalling flows there is a MSC A1 and MSC A2, which are MSCs of operator
A. The MSC B denotes an MSC of the partner operator B. The UE is assumed to be
registered to MSC A1 in source network. The target MSC is MSC A2 when there is
a change of pool in CS domain and MSC A1 when there is no change of pool. The
same analogy applies to the PS domain but the source node is MME A1.
#### 5.4.6.1 Description
Figure 5.4.6.1-1: CS fallback using redirect with change of MSC pool, using
the pool centric approach for CS/PS coordination
1 The EUTRAN triggers CSFB procedures towards operator A using redirect.
2 The UE performs a LAU. CS/PS coordination is triggered and the users are
distributed between the two operators in the CS domain.
3 a. If the CS/PS coordination process directed the UE to operator A, the call
is established\ b. If the CS/PS coordination process directed the UE to
operator B, the call setup will fail in most networks since core networks in
MOCN usually are not connected to each other.
4 The UE performs a RAU. CS/PS coordination is triggered and the users are
distributed between the two operators in the PS domain.
#### 5.4.6.2 Identified issues
Call setups can fail because these users are directed to operator B as a
result of the CS/PS coordination process. All users will be CS/PS coordinated.
### 5.4.7 Pool Centric: CS fallback using PS handover, no change of MSC pool
In this case the source network is EUTRAN. The UE is SGs registered to
operator A and the target cell is in the registered MSC pool. In the PS domain
there is a change of pool. The target network is GERAN or UTRAN. The
signalling flow is same with and without DTM. Without DTM the PS session is
suspended and the LAU will take place between as in the signalling flow below.
The signalling flow is valid only for a target MOCN. Only non-combined update
procedures are used, i.e. the Gs is not used in the target network.
The UE has done attach to operator A in a non-shared network or in a shared
network in which the UE is a \"supporting UE\". This is the source network. In
the signalling flows there is a MSC A1 and MSC A2, which are MSCs of operator
A. The MSC B denotes an MSC of the partner operator B. The UE is assumed to be
registered to MSC A1 in source network. The target MSC is MSC A2 when there is
a change of pool in CS domain and MSC A1 when there is no change of pool. The
same analogy applies to the PS domain but the source node is MME A1.
#### 5.4.7.1 Description
Figure 5.4.7.1-1: CS fallback using PS handover, no change of MSC pool, using
the pool centric approach for CS/PS coordination
1 The EUTRAN triggers CSFB procedures towards operator A using PS handover. PS
Handover is performed. The subsequent RAU is sent on the same signalling
connection to the same operator as the handover
2 If the UE detects that it is in a new LA, a LAU is performed before the CS
session is established. Since the NRI was allocated by operator A as part of
the SGs registration procedure and there is no change of pool, this LAU is
always routed to operator A and no CS/PS will take place.
3 The CS call is established.
4 The CS call ends.
5 The UE performs a LAU (if necessary) and the LAU is routed to operator A
since the NRI was allocated by operator A as part of the SGs registration
procedure and there is no change of pool.
#### 5.4.7.2 Identified issues
There are no issues with this use case.
### 5.4.8 Pool Centric: CS fallback using PS handover, change of MSC pool
In this case the source network is EUTRAN. The UE is SGs registered to
operator A and the target cell is [not]{.underline} in the registered MSC
pool. Hence, in both the CS and the PS domain there is a change of pool
between source and target network. The target network is GERAN or UTRAN. The
signalling flow is same with and without DTM. Without DTM the PS session is
suspended and the LAU will take place between as in the signalling flow below.
The signalling flow is valid only for a target MOCN. Only non-combined update
procedures are used, i.e. the Gs is not used in the target network.
The UE has done attach to operator A in a non-shared network or in a shared
network in which the UE is a \"supporting UE\". This is the source network. In
the signalling flows there is a MSC A1 and MSC A2, which are MSCs of operator
A. The MSC B denotes an MSC of the partner operator B. The UE is assumed to be
registered to MSC A1 in source network. The target MSC is MSC A2 when there is
a change of pool in CS domain and MSC A1 when there is no change of pool. The
same analogy applies to the PS domain.
#### 5.4.8.1 Description
Figure 5.4.8.1-1: CS fallback using PS handover, change of MSC pool, using the
pool centric approach for CS/PS coordination
1 The EUTRAN triggers CSFB procedures towards operator A using PS handover. PS
Handover is performed. The subsequent RAU is sent on the same signalling
connection to the same operator as the handover.
2 The UE performs a LAU. CS/PS coordination is triggered and the users are
distributed between the two operators in the CS domain.
3 a. If the CS/PS coordination process directed the UE to operator A, the call
is established\ b. If the CS/PS coordination process directed the UE to
operator B, the call setup will fail in most networks since core networks in
MOCN usually are not connected to each other.
#### 5.4.8.2 Identified issues
Call setups can fail because the users are directed to operator B as a result
of the CS/PS coordination process. These users will be CS/PS uncoordinated and
stay uncoordinated until the next pool change.
## 5.5 PLMN selection at handover based on UE capability
In the following scenarios the target network (CN and RAN) is always
supporting broadcasting of multiple PLMN list as it is only then the UE\'s
capability with regards to its support for network sharing that could make a
difference. In a target network that does not support broadcasting of multiple
PLMN list all UEs are treated and behave as shared network non-supporting UEs
regardless of their actual capability.
### 5.5.1 PLMN selection at handover to GERAN based on UE capability
#### 5.5.1.1 Description
From TS 23.251 [2], Release 12, clause 5.2b.
For _handover_ to a GERAN shared network:
\- _The target BSS needs to know whether or not the UE supports GERAN network
sharing._
_\- the source RAN determines a core network operator to be used in the target
network and indicates the selected target core network operator PLMN ID to the
source core network node. The target MSC/SGSN indicates the selected target
core network operator to target BSC._
_\- At CS handover the target BSC (BSS-B) shall, for a GERAN supporting UE,
provide PLMN index information corresponding to the selected target PLMN-id
via the source RAN. When the UE arrives in the target cell the target BSC
shall indicate the RAI corresponding to the selected PLMN._
_\- At PS handover the target BSC (BSS-B) shall, for a GERAN supporting UE,
provide PLMN index information corresponding to the selected target PLMN-id
via the source RAN. The target BSC shall also via the source RAN indicate the
RAI corresponding to the selected PLMN._
_\- At normal RAU in connected mode after completing a handover, the target
BSC is informed of the PLMN index corresponding to the selected target PLMN
when the UE appears in the target access._
#### 5.5.1.2 Identified issues
No issues have been identified.
### 5.5.2 PLMN selection at handover from E-UTRAN to UTRAN based on UE
capability
#### 5.5.2.1 Description
From TS 23.251 [2], Release 12, clause 5.2a.
In case of handover to a _shared_ network:
\- _the source eNodeB determines a core network operator to be used in the
target network based on current PLMN in use, or other information present in
the eNodeB, the source eNodeB shall at handover indicate that selected core
network operator to the MME as part of the TAI/RAI sent in the HO required
message. The selected target core network operator should be the same as the
one in use. This is accomplished by not changing the serving PLMN if the PLMN
in use is supported in the target cell. If the PLMN in use is not supported in
the target cell the eNB selects the target PLMN based on either (i) pre-
configured information in the eNB, or (ii) the Equivalent PLMNs list (see TS
36.413 [14]) provided by the MME._
A supporting target UTRAN network shall be configured to broadcast at least
two PLMNs, the Common PLMN (which also could serve as a dedicated PLMN) and a
separate dedicated PLMN.
The target network shall select a serving PLMN for the UE, either the common
PLMN or a dedicated PLMN. A supporting target network selects a dedicated PLMN
as all LTE capable UEs also are supporting UEs in UTRAN.
#### 5.5.2.2 Identified issues
No issues have been identified.
### 5.5.3 PLMN selection at handover from UTRAN/GERAN to UTRAN, based on UE
capability.
#### 5.5.3.1 General description
From TS 23.251 [2], Release 12, clause 5.2.
_In case of relocation to a shared network:_
> _\- the source RNC determines a core network operator to be used in the
> target network, including the selection of PLMN(s) to support SRVCC
> functionality from CS domain to PS, based on available shared networks
> access control information, current PLMN in use, Anchor PLMN, or similar
> information present in the node, the source RNC shall at relocation indicate
> that selected core network operator to the source core network node as part
> of the TAI/RAI sent in Target ID in the Relocation Required message. The
> selected target core network operator should be the same as the one in use.
> If the source core network operator is not supported in the target cell the
> RNC selects the target PLMN based on either (i) pre-configured information
> in the RNC, or (ii) the SNA (Shared Network Area) Access Information IE (see
> TS 25.413 [13]) provided by the SGSN. When the RNC triggers the enhanced
> relocation and selects a new PLMN, the selected PLMN is indicated to the
> SGSN during the following RA update procedure._
From TS 23.251 [2], Release 12, clause 5.2b.
For handover to a shared network from GERAN:
\- _the source BSC determines a core network operator to be used in the target
network, including the selection of PLMN(s) to support SRVCC functionality
from CS domain to PS, based on current PLMN in use, Anchor PLMN, or other
information present in the BSC. The selected target core network operator
should be the same as the one in use. If the source core network operator is
not supported in the target cell the BSC selects the target PLMN based on pre-
configured information in the BSC._
_\- the source BSC shall indicate the target core network operator PLMN ID to
the source core network node as part of the TAI/RAI sent in the Target Cell
Identifier IE/Target RNC Identifier IE/Target eNodeB Identifier IE in the PS-
Handover-Required message (TS 48.018 [24]) and in the LAI sent in the Cell
Identifier List IE in the Handover Required message (TS 48.008 [25])._
A target UTRAN network supporting broadcasting of multiple PLMN list shall be
configured to use at least two PLMNs, the Common PLMN (which also could serve
as a dedicated PLMN) and a separate dedicated PLMN.
In the following description it is at some instances mentioned the case of an
invalid CS-NRI. This can e.g. occur when the source CS network does not use
TMSI, and when the source CS network is not part of the NRI coordinated area.
#### 5.5.3.2 PLMN selection at concurrent CS and PS handover from UTRAN/GERAN
to UTRAN, based on UE capability, MOCN, non-combined update procedure
This use case is CS and PS Handover, MOCN and non-combined update procedure
##### 5.5.3.2.1 Description
Figure 5.5.3.2.1-1: Concurrent CS and PS Handover, MOCN and non-combined
update procedure
1 Handover is performed to a UTRAN network supporting broadcasting of multiple
PLMN list. Source RAN selects the target CS or PS operator and sends Handover
Required (Target Network Identifier) to source core node. Source core node
requests the target CN to establish handover resources in target RAN and
target core nodes.
2 UE sends a RAU Request using RRC message UPLINK DIRECT TRANSFER which does
not convey information about a selected PLMN. Target RNC selects a PLMN and
includes it as part of RANAP signaling transport of the RAU Request sent to
SGSN.
3 UE goes idle in CS domain.
4 UE sends a LAU Request to target RNC. If the PLMN selected at step 2 is the
Common PLMN the RNC selects CS operator using MOCN redirection procedure incl.
CS/PS coordination as specified in TS 23.251 [2]. If the PLMN selected at step
2 is a dedicated PLMN the RNC selects an MSC serving that PLMN.
##### 5.5.3.2.2 Identified issues
In step 1 the target CN provides the target RNC with the serving PLMN but this
is done without knowing if the UE is network sharing supporting or non-
supporting. And as the RAU in step 2 is sent in connected mode, it will over
RRC be sent by a Direct Transfer message. This means that it will not be
possible by a network sharing supporting UE to indicate a Selected PLMN. And
as a consequence neither the RNC nor the CN will know if the UE is a network
sharing supporting or non-supporting. The RNC needs to know the UE\'s network
sharing capability to properly select PLMN (Common PLMN for a network sharing
non-supporting UE and a Dedicated PLMN for a network sharing supporting UE)
for the current RAI sent to the CN in the RANAP message that includes the NAS
RAU message. This presents the target RNC with two options:
(1) If the RNC decides to use the Common PLMN for the current RAI, the UE will
receive this PLMN in the RAU Accept from the CN and thus store it as
Registered PLMN. After going to Idle mode in the CS domain, step 3, the UE
will then send the LAU Request in step 4. If the UE has an invalid CS-NRI the
RNC will then use the MOCN redirection incl. CS/PS coordination procedure to
select CS operator. This can result in an incorrect CS/PS coordination.
(2) If the RNC for the current RAI instead uses the Dedicated PLMN of the
serving PS domain, the UE will receive this PLMN in the RAU Accept from the CN
and thus store it as Registered PLMN. After going to Idle mode in the CS
domain, step 3, the UE will then send the LAU Request in step 4. The RNC will
then use the Dedicated PLMN to select the CS operator and CS/PS coordination
is achieved.
For a network sharing non-supporting UE both option (1) and (2) risk an
incorrect CS/PS coordination when going to Idle in both CS and PS domain in
step 3. The reason is that the UE has not yet made a LAU and if it has an
invalid CS-NRI then the MOCN redirection incl. CS/PS coordination procedure
will be applied for the CS domain. But for the PS domain the UE has due to the
RAU in step 2 already been registered in the PS domain.
For a network sharing supporting UE both option (1) and (2) may result in a
change of serving operator when the UE enters Idle mode in both CS and PS
domain as the operator chosen by the UE may not be the same as the serving
operator chosen by the source RAN during handover.
With use of option (2) a network sharing non-supporting as well as a
supporting UE may in signalling for the LAU Request at step 4 select a PLMN
which differs from the PLMN the UE was registered by at step 2. Both a network
sharing supporting and a non-supporting UE indicate a PLMN change by the RRC
IE IDNNS sent to RNC as part of step 4. A PLMN change may cause a change of
operator but CS/PS coordination is achieved.
#### 5.5.3.3 PLMN selection at concurrent CS and PS handover from UTRAN/GERAN
to UTRAN, based on UE capability, MOCN, combined update procedure
This use case is CS and PS Handover, MOCN and combined update procedure
##### 5.5.3.3.1 Description
Figure 5.5.3.3.1-1: Concurrent CS and PS Handover, MOCN and combined update
procedure
1 PS handover is performed to a UTRAN network supporting broadcasting of
multiple PLMN list. Source RAN selects the target CS and PS operator and sends
Handover Required (Target Network Identifier) to source core node. Source core
node requests the target CN to establish handover resources in target RAN and
target core nodes.
2 UE sends a RAU Request using RRC message UPLINK DIRECT TRANSFER which does
not convey information about a selected PLMN. Target RNC selects a PLMN and
includes it as part of RANAP signaling transport of the RAU Request sent to
SGSN.
3 UE goes idle in CS domain.
4 UE sends a RAU Request indicating Combined RA / LA Update with IMSI Attach
to target RNC. The RNC selects the SGSN that was associated with the UE at
step 2. The SGSN selects an operator for CS domain and performs CS
registration at the selected MSC.
##### 5.5.3.3.2 Identified issues
In step 1 the target CN provides the target RNC with the serving PLMN but this
is done without knowing if the UE is network sharing supporting or non-
supporting. And as the RAU in step 2 is sent in connected mode, it will over
RRC be sent by a Direct Transfer message. This means that it will not be
possible by a network sharing supporting UE to indicate a Selected PLMN. And
as a consequence neither the RNC nor the CN will know if the UE is network
sharing supporting or non-supporting. The RNC needs to know the UE\'s network
sharing capability to properly select PLMN (Common PLMN for a network sharing
non-supporting UE and a Dedicated PLMN for a supporting UE) for the current
RAI sent to the CN in the RANAP message that includes the NAS RAU message.
This presents the target RNC with two options:
(1) If the RNC decides to use the Common PLMN for the current RAI, the UE will
receive this PLMN in the RAU Accept from the CN and thus store it as
Registered PLMN. After going to Idle mode in the CS domain, step 3,the UE will
then send the Combined RA/LA Update Request in step 4. By using the Selected
CN operator IE in the Location Update over Gs the target SGSN selects the same
operator in the CS domain as is used in the PS domain. CS/PS coordination is
thus achieved.
(2) If the RNC for the current RAI instead uses the Dedicated PLMN of the
serving PS domain, the UE will receive this PLMN in the RAU Accept from the CN
and thus store it as Registered PLMN. After going to Idle mode in the CS
domain, step 3, the UE will then send the Combined RA/LA Update Request in
step 4. By using the Selected CN operator IE in the Location Update over Gs
the target SGSN selects the same operator in the CS domain as is used in the
PS domain. CS/PS coordination is thus achieved.
For a network sharing non-supporting UE when the UE enters Idle mode in both
CS and PS domain a combined RAU will occur and CS/PS coordination is thus
achieved. This is valid for both option (1) and (2). Serving operator is kept
as the UE has, due to the RAU in step 2, already been registered in the PS
domain.
For a network sharing supporting UE both option (1) and (2) may result in a
change of serving operator when the UE enters Idle mode in both CS and PS
domain as the operator chosen by the UE may not be the same as the serving
operator chosen by the source RAN during handover.
With use of option (2) a network sharing non-supporting as well as a
supporting UE may in signalling for the LAU Request at step 4 select a PLMN
which differs from the PLMN the UE was registered by at step 2. Both a network
sharing supporting and a non-supporting UE indicate a PLMN change by the RRC
IE IDNNS sent to RNC as part of step 4. A PLMN change may cause a change of
operator but CS/PS coordination is achieved.
#### 5.5.3.4 PLMN selection at concurrent CS and PS handover from UTRAN/GERAN
to UTRAN, based on UE capability, GWCN, non-combined update procedure
This scenario is CS and PS Handover, GWCN and non-combined update procedure.
##### 5.5.3.4.1 Description
Figure 5.5.3.4.1-1: Concurrent CS and PS Handover, GWCN and non-combined
update procedure
1 Handover is performed to a UTRAN network supporting broadcasting of multiple
PLMN list. Source RAN selects the target CS and PS operator and sends Handover
Required (Target Network Identifier) to source core node. Source core node
requests the target CN to establish handover resources in target RAN and
target core nodes.
2 UE sends a RAU Request using RRC message UPLINK DIRECT TRANSFER which does
not convey information about a selected PLMN. Target RNC selects a PLMN and
includes it as part of RANAP signaling transport of the RAU Request sent to
SGSN.
3 UE goes idle in CS domain.
4 UE sends a LAU Request to target RNC. If the PLMN selected at step 2 is the
Common PLMN the GWCN MSC selects CS operator based on local policy (Pool
centric) or based on NRI-coordination and local policy (Operator centric) as
specified in TS 23.251 [2]. If the PLMN selected at step 2 is a dedicated PLMN
the GWCN MSC selects a CS operator serving that PLMN.
##### 5.5.3.4.2 Identified issues
In step 1 the target CN provides the target RNC with the serving PLMN but this
is done without knowing if the UE is network sharing supporting or non-
supporting. And as the RAU in step 2 is sent in connected mode, it will over
RRC be sent by a Direct Transfer message. This means that it will not be
possible by a network sharing supporting UE to indicate a Selected PLMN. And
as a consequence neither the RNC nor the CN will know if the UE is network
sharing supporting or non-supporting. The RNC needs to know the UE capability
to properly select PLMN (Common PLMN for a non-supporting UE and a Dedicated
PLMN for a supporting UE) for the current RAI sent to the CN in the RANAP
message that includes the NAS RAU message. This presents the target RNC with
two options:
(1) If the RNC decides to use the Common PLMN for the current RAI, the UE will
receive this PLMN in the RAU Accept from the CN and thus store it as
Registered PLMN. After going to Idle mode in the CS domain, step 3, the UE
will then send the LAU Request in step 4. Selection of CS operator in the GWCN
CN node can then not be based on the PLMN as that is commonly used. Nor can it
be based on the CS-NRI if that is invalid. This can result in an incorrect
CS/PS coordination.
(2) If the RNC for the current RAI instead uses the Dedicated PLMN of the
serving PS domain, the UE will receive this PLMN in the RAU Accept from the CN
and thus store it as Registered PLMN. After going to Idle mode in the CS
domain, step 3, the UE will then send the LAU Request in step 4. The RNC will
then use the Dedicated PLMN to select the CS operator and CS/PS coordination
is achieved.
For a network sharing non-supporting UE option (1) risk an incorrect CS/PS
coordination if instead the UE goes to Idle in both CS and PS domain in step
3. The reason is that the UE has not yet made a LAU and if it has an invalid
CS-NRI then the GWCN CN node has nothing to base the CS operator selection
upon. But for the PS domain the UE has due to the RAU in step 2 already been
registered in the PS domain.
For a network sharing supporting UE both option (1) and (2) may result in a
change of serving operator when the UE enters Idle mode in both CS and PS
domain as the operator chosen by the UE may not be the same as the serving
operator chosen by the source RAN during handover.
With use of option (2) a network sharing non-supporting as well as a
supporting UE may in signalling for the LAU Request at step 4 select a PLMN
which differs from the PLMN the UE was registered by at step 2. Both a network
sharing supporting and a non-supporting UE indicate a PLMN change by the RRC
IE IDNNS sent to RNC as part of step 4. A PLMN change may cause a change of
operator but CS/PS coordination is achieved.
#### 5.5.3.5 PLMN selection at concurrent CS and PS handover from UTRAN/GERAN
to UTRAN, based on UE capability, GWCN, combined update procedure
This use case is CS and PS Handover, GWCN and combined update procedure.
5.5.3.5.1 Description
Figure 5.5.3.5.1-1: Concurrent CS and PS Handover, GWCN and combined update
procedure
1 Handover is performed to a UTRAN network supporting broadcasting of multiple
PLMN list. Source RAN selects the target CS and PS operator and sends Handover
Required (Target Network Identifier) to source core node. Source core node
requests the target CN to establish handover resources in target RAN and
target core nodes.
2 UE sends a RAU Request using RRC message UPLINK DIRECT TRANSFER which does
not convey information about a selected PLMN. Target RNC selects a PLMN and
includes it as part of RANAP signaling transport of the RAU Request sent to
SGSN.
3 UE goes idle in CS domain.
4 UE sends a RAU Request indicating Combined RA / LA Update with IMSI Attach
to target RNC. The RNC selects the SGSN that was associated with MS at step 2.
The SGSN selects an operator for CS domain and sends information about
selected operator to the MSC. The MSC performs CS registration at the selected
operator.
##### 5.5.3.5.2 Identified issues
In step 1 the target CN provides the target RNC with the serving PLMN but this
is done without knowing if the UE is network sharing supporting or non-
supporting. And as the RAU in step 2 is sent in connected mode, it will over
RRC be sent by a Direct Transfer message. This means that it will not be
possible by a network sharing supporting UE to indicate a Selected PLMN. And
as a consequence neither the RNC nor the CN will know if the UE is network
sharing supporting or non-supporting. The RNC needs to know the UE\'s network
sharing capability to properly select PLMN (Common PLMN for a network sharing
non-supporting UE and a Dedicated PLMN for a supporting UE) for the current
RAI sent to the CN in the RANAP message that includes the NAS RAU message.
This presents the target RNC with two options:
(1) If the RNC decides to use the Common PLMN for the current RAI, the UE will
receive this PLMN in the RAU Accept from the CN and thus store it as
Registered PLMN. After going to Idle mode in the CS domain, step 3, the UE
will then send the Combined RA/LA Update Request in step 4. By using the
Selected CN operator IE in the Location Update over Gs the target SGSN selects
the same operator in the CS domain as is used in the PS domain. CS/PS
coordination is thus achieved.
(2) If the RNC for the current RAI instead uses the Dedicated PLMN of the
serving PS domain, the UE will receive this PLMN in the RAU Accept from the CN
and thus store it as Registered PLMN. After going to Idle mode in the CS
domain, step 3, the UE will then send the Combined RA/LA Update Request in
step 4. By using the Selected CN operator IE in the Location Update over Gs
the target SGSN selects the same operator in the CS domain as is used in the
PS domain. CS/PS coordination is thus achieved.
For a network sharing non-supporting UE when the UE enters Idle mode in both
CS and PS domain and changes LA a Combined RA/LA Update will occur and CS/PS
coordination is thus achieved. This is valid for both option (1) and (2).
Serving operator is kept as the UE has, due to the RAU in step 2, already been
registered in the PS domain.
For a network sharing supporting UE both option (1) and (2) may result in a
change of serving operator when the UE enters Idle mode in both CS and PS
domain as the operator chosen by the UE may not be the same as the serving
operator chosen by the source RAN during handover.
With use of option (2) a network sharing non-supporting as well as a
supporting UE may in signalling for the LAU Request at step 4 select a PLMN
which differs from the PLMN the UE was registered by at step 2. Both a network
sharing supporting and a non-supporting UE indicate a PLMN change by the RRC
IE IDNNS sent to RNC as part of step 4. A PLMN change may cause a change of
operator but CS/PS coordination is achieved.
#### 5.5.3.6 PLMN selection at PS handover from UTRAN/GERAN to UTRAN, based on
UE capability, MOCN, non-combined update procedure
This use case is PS Handover, MOCN and non-combined update procedure
##### 5.5.3.6.1 Description
Figure 5.5.3.6.1-1: PS Handover, MOCN and non-combined procedure
1 Handover is performed to a UTRAN network supporting broadcasting of multiple
PLMN list. Source RAN selects the target PS operator and sends Handover
Required (Target Network Identifier) to source core node. Source core node
requests the target CN to establish handover resources in target RAN and
target core node. Target RNC sends UTRAN MOBILITY INFORMATION, including
serving PLMN, to the UE.
2 UE sends a LAU Request using RRC message INITIAL DIRECT TRANSFER in which
only a network sharing supporting UE includes the PLMN identity IE indicating
the serving PLMN received in step 1. If the PLMN identity IE is included the
RNC selects an MSC/CS operator serving that PLMN. Otherwise the RNC uses the
Common PLMN and selects MSC/CS operator based on MOCN redirection procedure
incl. CS/PS coordination as specified in TS 23.251 [2].
3 UE sends a RAU Request using RRC message UPLINK DIRECT TRANSFER which does
not convey information about a selected PLMN. Target RNC includes the serving
PLMN received in step 1 as part of RANAP signaling transport of the RAU
Request sent to SGSN.
4 UE goes Idle.
##### 5.5.3.6.2 Identified issues
In step 1 the target CN provides the target RNC with the serving PLMN but this
is done without knowing if the UE is network sharing supporting or non-
supporting. The RNC will in the UTRAN MOBILITY INFORMATION send the serving
Common and Dedicated PLMN to the UE regardless of if the UE is a network
sharing supporting UE or non-supporting UE, as the UE\'s network sharing
capability is not known to the RNC. When the RNC receives the LAU Request in
step 2 it gives the following alternatives:
(1) Common PLMN is used as serving PLMN and the UE is network sharing non-
supporting.\ Selection of CS operator cannot be based on the PLMN as that is
commonly used. Nor can it be based on the CS-NRI if that is invalid. This can
result in a failed CS/PS coordination.
(2) Dedicated PLMN is used as serving PLMN and the UE is a network sharing
non-supporting UE.\ The RNC selects a CS operator serving the dedicated PLMN
and CS/PS coordination is thus achieved. Serving operator is kept as the UE
due to the LAU in step 2 and RAU in step 3, will be registered in both the CS
and the PS domain. When the UE enters Idle mode in both CS and PS domain and
at a subsequent LAU/RAU the UE will change PLMN. A changed PLMN may due to
handling of the IDNNS result in a change of serving operator but CS/PS
coordination is achieved.
(3) Dedicated PLMN is used as serving PLMN and the UE is a supporting UE.\ The
RNC selects a CS operator serving the dedicated PLMN and CS/PS coordination is
thus achieved. Serving operator may change when the UE enters Idle mode in
both CS and PS domain as the operator chosen by the UE may not be the same as
the serving operator chosen by the source RAN during handover.
#### 5.5.3.7 PLMN selection at PS handover from UTRAN/GERAN to UTRAN, based on
UE capability, MOCN, combined update procedure
This use case is PS Handover, MOCN and combined update procedures.
##### 5.5.3.7.1 Description
Figure 5.5.3.7.1-1: PS Handover, MOCN and combined update procedure
1 PS handover is performed to a sUTRAN network supporting broadcasting of
multiple PLMN list. Source RAN selects the target PS operator and sends
Handover Required (Target Network Identifier) to source core node. Source core
node requests the target CN to establish handover resources in target RAN and
target core node. Target RNC sends UTRAN MOBILITY INFORMATION, including
serving PLMN, to the UE.
2 UE sends a RAU Request indicating Combined RA / LA Update to target RNC,
using RRC message UPLINK DIRECT TRANSFER which does not convey information
about a selected PLMN. The target RNC selects the SGSN that was associated
with the UE at step 1. Target RNC includes the serving PLMN received in step 1
as part of RANAP signaling transport of the combined RAU Request sent to SGSN.
The SGSN selects an operator for CS domain and performs CS registration at the
selected MSC.
3 UE goes idle.
##### 5.5.3.7.2 Identified issues
No issues have been identified regarding CS /PS coordination but as the SGSN
at step 1 and the RNC at step 2 does not know if the UE is network sharing
supporting or non-supporting it is not possible to properly select serving
PLMN.\ A network sharing non-supporting UE will after step 3 change PLMN if a
Dedicated PLMN was provided in step 1. Serving operator may then also change.\
A network sharing supporting UE will after step 3 change PLMN if Common PLMN
was provided in step 1. Serving operator may then also change.
#### 5.5.3.8 PLMN selection at PS handover from UTRAN/GERAN to UTRAN, based on
UE capability, GWCN, non-combined update procedure
This use case is PS Handover, GWCN and non-combined update procedure.
##### 5.5.3.8.1 Description
Figure 5.5.3.8.1-1: PS Handover, GWCN and non-combined update procedure
1 Handover is performed to a UTRAN network supporting broadcasting of multiple
PLMN list. Source RAN selects the target PS operator and sends Handover
Required (Target Network Identifier) to source core node. Source core node
requests the target CN to establish handover resources in target RAN and
target core node. Target RNC sends UTRAN MOBILITY INFORMATION, including
serving PLMN, to the UE.
2 UE sends a LAU Request using RRC message INITIAL DIRECT TRANSFER in which
only a network sharing supporting UE includes the PLMN identity IE indicating
the serving PLMN received in step 1. If the PLMN received in the PLMN identity
IE is a Dedicated PLMN the RNC selects an MSC serving that PLMN. Otherwise the
PLMN identity IE is the Common PLMN. The GWCN MSC selects an operator.
3 UE sends a RAU Request to target SGSN.
4 UE goes idle.
##### 5.5.3.8.2 Identified issues
In step 1 the target CN provides the target RNC with the serving PLMN but this
is done without knowing if the UE is network sharing supporting or non-
supporting. The RNC will in the UTRAN MOBILITY INFORMATION send the serving
Common and Dedicated PLMN to the UE regardless of if the UE is a network
sharing supporting UE or non-supporting UE, as the UE\'s network sharing
capability is not known to the RNC. When the RNC receives the LAU Request in
step 2 it gives the following alternatives:
(1) Common PLMN is used as serving PLMN and the UE is network sharing non-
supporting.
Selection of CS operator in the GWCN MSC cannot be based on the PLMN as that
is commonly used. Nor can it be based on the CS-NRI if that is invalid. This
can result in an incorrect CS/PS coordination.
(2) Dedicated PLMN is used as serving PLMN and the UE is a network sharing
non-supporting UE.
The GWCN MSC selects a CS operator serving the dedicated PLMN and CS/PS
coordination is thus achieved. Serving operator is kept as the UE due to the
LAU in step 2 and RAU in step 3, will be registered in both the CS and the PS
domain. When the UE enters Idle mode in both CS and PS domain and at a
subsequent LAU/RAU the UE will change PLMN. A changed PLMN may due to handling
of the IDNNS result in a change of serving operator but CS/PS coordination is
achieved.
(3) Dedicated PLMN is used as serving PLMN and the UE is a network sharing
supporting UE.
The GWCN MSC selects a CS operator serving the dedicated PLMN and CS/PS
coordination is thus achieved. Serving operator may change when the UE enters
Idle mode in both CS and PS domain as the operator chosen by the UE may not be
the same as the serving operator chosen by the source RAN during handover.
#### 5.5.3.9 PLMN selection at PS handover from UTRAN/GERAN to UTRAN, based on
UE capability, GWCN, combined update procedure
This use case is PS Handover, GWCN and with combined update procedures.
##### 5.5.3.9.1 Description
Figure 5.5.3.9.1-1: PS Handover, GWCN and combined update procedure
1 PS handover is performed to a UTRAN network supporting broadcasting of
multiple PLMN list. Source RAN selects the target PS operator and sends
Handover Required (Target Network Identifier) to source core node. Source core
node requests the target CN to establish handover resources in target RAN and
target core node. Target RNC sends UTRAN MOBILITY INFORMATION, including
serving PLMN, to the UE.
2 UE sends a RAU Request indicating Combined RA / LA Update to target RNC,
using RRC message UPLINK DIRECT TRANSFER which does not convey information
about a selected PLMN. The target RNC selects the SGSN that was associated
with the UE at step 1. Target RNC includes the serving PLMN received in step 1
as part of RANAP signaling transport of the combined RAU Request sent to SGSN.
The SGSN selects an operator for CS domain and sends information about
selected operator to the MSC. The MSC performs CS registration at the selected
operator.
3 UE goes idle.
##### 5.5.3.9.2 Identified issues
No issues have been identified regarding CS /PS coordination but as the SGSN
at step 1 and the RNC at step 2 does not know if the UE is network sharing
supporting or non-supporting it is not possible to properly select serving
PLMN.
A network sharing non-supporting UE will after step 3 change PLMN if a
Dedicated PLMN was provided in step 1. The change is indicated via RRC IE
IDNNS. Serving operator may then also change.
A network sharing supporting UE may after step 3 change PLMN. Serving operator
may then also change.
#### 5.5.3.10 PLMN selection at CS handover from UTRAN/GERAN to UTRAN, based
on UE capability, MOCN, non-combined update procedure
This use case is CS Handover, MOCN and non-combined update procedures.
##### 5.5.3.10.1 Description
Figure 5.5.3.10.1-1: CS Handover, MOCN and non-combined update procedure
1 Handover is performed to a UTRAN network supporting broadcasting of multiple
PLMN list. Source RAN selects the target CS operator and sends Handover
Required (Target Network Identifier) to source core node. Source core node
requests the target CN to establish handover resources in target RAN and
target core node. Target RNC sends UTRAN MOBILITY INFORMATION, including
serving PLMN, to the UE.
2 UE sends a RAU Request using RRC message INITIAL DIRECT TRANSFER in which
only a network sharing supporting UE includes the PLMN identity IE indicating
the serving PLMN received in step 1. If the PLMN identity IE is included the
RNC selects an SGSN/PS operator serving that PLMN. Otherwise the RNC uses the
Common PLMN and selects SGSN /PS operator based on MOCN redirection procedure
incl. CS/PS coordination as specified in TS 23.251 [2].
3 UE goes idle.
4 UE sends a LAU Request using RRC message INITIAL DIRECT TRANSFER in which
only a network sharing supporting UE includes a selected PLMN identity. If the
PLMN identity IE is included the RNC selects an MSC/CS operator serving that
PLMN. Otherwise the RNC uses the Common PLMN and selects MSC/CS operator based
on the MOCN redirection procedure incl. CS/PS coordination as specified in TS
23.251 [2].
##### 5.5.3.10.2 Identified issues
A network sharing non-supporting UE risk an incorrect CS/PS coordination at
step 2 until step 4 as the operator selected for CS by source RAN may not be
the same operator as selected for PS. However, after step 4 CS/PS coordination
is achieved due to MOCN redirection procedure incl. CS/PS coordination in both
PS domain (step 2) and CS domain (step 4).
A network sharing supporting UE may after step 3 change PLMN if the
PLMN/operator chosen by the UE is not the same as the serving PLMN/operator
chosen by the source RAN during handover.
#### 5.5.3.11 PLMN selection at CS handover from UTRAN/GERAN to UTRAN, based
on UE capability, MOCN, combined update procedure
This use case is CS Handover, MOCN and combined update procedures.
##### 5.5.3.11.1 Description
Figure 5.5.3.11.1-1: CS Handover, MOCN and combined update procedure
1 Handover is performed to a UTRAN network supporting broadcasting of multiple
PLMN list. Source RAN selects the target CS operator and sends Handover
Required (Target Network Identifier) to source core node. Source core node
requests the target CN to establish handover resources in target RAN and
target core node. Target RNC sends UTRAN MOBILITY INFORMATION, including
serving PLMN, to the UE.
2 UE sends a RAU Request using RRC message INITIAL DIRECT TRANSFER in which
only a network sharing supporting UE includes the PLMN identity IE indicating
the serving PLMN received in step 1. If the PLMN identity IE is included the
RNC selects an SGSN/PS operator serving that PLMN. Otherwise the RNC uses the
Common PLMN and selects SGSN/PS operator based on MOCN redirection procedure
incl. CS/PS coordination as specified in TS 23.251 [2].
3 UE goes idle.
4 UE sends a RAU Request indicating Combined RA / LA Update with IMSI Attach
to target RNC using RRC message INITIAL DIRECT TRANSFER in which only a
network sharing supporting UE includes a selected PLMN identity. If the PLMN
received in the PLMN identity IE is a Dedicated PLMN the RNC selects an SGSN
serving that PLMN. Otherwise the RNC uses the Common PLMN and selects SGSN/PS
operator based on the NRI sent by the UE and provided to the UE in step 2. The
SGSN selects an MSC and performs CS registration at the selected MSC.
##### 5.5.3.11.2 Identified issues
A network sharing non-supporting UE risk an incorrect CS/PS coordination at
step 2 until step 4 as the operator selected for CS handover by source RAN may
not be the same operator as selected for PS. However, after step 4 CS/PS
coordination is achieved due to combined registration.
A network sharing supporting UE may after step 3 change PLMN if the
PLMN/operator chosen by the UE is not the same as the serving PLMN/operator
chosen by the source RAN during handover.
#### 5.5.3.12 PLMN selection at CS handover from UTRAN/GERAN to UTRAN, based
on UE capability, GWCN, non-combined update procedure
This use case is CS Handover, GWCN and non-combined update procedures.
##### 5.5.3.12.1 Description
Figure 5.5.3.12.1-1: CS Handover, GWCN and non-combined update procedure
1 Handover is performed to a shared UTRAN network. Source RAN selects the
target CS operator and sends Handover Required (Target Network Identifier) to
source core node. Source core node requests the target CN to establish
handover resources in target RAN and target core node. Target RNC sends UTRAN
MOBILITY INFORMATION, including serving PLMN, to the UE.
2 UE sends a RAU Request to target RNC using RRC message INITIAL DIRECT
TRANSFER in which only a network sharing supporting UE includes a selected
PLMN identity IE. If the PLMN received in the PLMN identity IE is a Dedicated
PLMN the RNC selects an SGSN serving that PLMN. Otherwise the PLMN identity IE
is the Common PLMN. SGSN selects a PS operator.
3 UE goes idle.
4 UE sends a LAU Request using RRC message INITIAL DIRECT TRANSFER in which
only a network sharing supporting UE includes a selected PLMN identity IE. If
the PLMN received in the PLMN identity IE is a Dedicated PLMN the RNC selects
an SGSN serving that PLMN. Otherwise the PLMN identity IE is the Common PLMN.
MSC selects a CS operator.
##### 5.5.3.12.2 Identified issues
A network sharing non-supporting UE risk an incorrect CS/PS coordination at
step 2 until step 4 as the operator selected for CS handover by source RAN may
not be the same operator as selected by the GWCN SGSN for PS. However, after
step 4 CS/PS coordination may be achieved by coordinating the operator
selection done in the GWCN SGSN in step 2 with the operator selection done in
the GWCN MSC in step to 4
A network sharing supporting UE may after step 3 change PLMN if the
PLMN/operator chosen by the UE is not the same as the serving PLMN/operator
chosen by the source RAN during handover.
#### 5.5.3.13 PLMN selection at CS handover from UTRAN/GERAN to UTRAN, based
on UE capability, GWCN, combined update procedure
This use case is CS Handover, GWCN and combined update procedures.
##### 5.5.3.13.1 Description
Figure 5.5.3.13.1-1: CS Handover, GWCN and combined update procedure
1 Handover is performed to a UTRAN network supporting broadcasting of multiple
PLMN list. Source RAN selects the target CS operator and sends Handover
Required (Target Network Identifier) to source core node. Source core node
requests the target CN to establish handover resources in target RAN and
target core node. Target RNC sends UTRAN MOBILITY INFORMATION, including
serving PLMN, to the UE.
2 UE sends a RAU Request using RRC message INITIAL DIRECT TRANSFER in which
only a network sharing supporting UE includes the PLMN identity IE indicating
the serving PLMN received in step 1. If the PLMN received in the PLMN identity
IE is a Dedicated PLMN the RNC selects an SGSN serving that PLMN. Otherwise
the PLMN identity IE is the Common PLMN. The target RNC selects and SGSN.
Target RNC includes the serving PLMN received in step 1 as part of RANAP
signaling transport of the RAU Request sent to SGSN. SGSN selects a PS
operator.
3 UE goes idle.
4 UE sends a RAU Request indicating Combined RA / LA Update with IMSI Attach
to target RNC using RRC message INITIAL DIRECT TRANSFER in which only a
supporting UE includes a selected PLMN identity. If the PLMN received in the
PLMN identity IE is a Dedicated PLMN the RNC selects an SGSN serving that
PLMN. Otherwise the PLMN identity IE is the Common PLMN. The target RNC
selects the SGSN where the UE is PS-registered and sends the RAU Request to
the SGSN. SGSN selects an MSC and performs CS registration.
##### 5.5.3.13.2 Identified issues
A network sharing non-supporting UE risk an incorrect CS/PS coordination at
step 2 until step 4 as the operator selected for CS handover by source RAN may
not be the same operator as selected for PS. However, after step 4 CS/PS
coordination is achieved due to combined update registration procedure.
A network sharing supporting UE may after step 3 change PLMN if the
PLMN/operator chosen by the UE is not the same as the serving PLMN/operator
chosen by the source RAN during handover.
## 5.6 Concurrent CS and PS Handover from UTRAN/GERAN to UTRAN/GERAN Scenarios
### 5.6.1 Concurrent CS and PS Handover from UTRAN/GERAN to UTRAN/GERAN, MOCN,
no combined procedure
This scenario is concurrent CS and PS Handover, MOCN and no combined update
procedure. The scenarios are valid for network not broadcasting multiple PLMN
list.
#### 5.6.1.1 Description
Figure 5.6.1.1-1: Concurrent CS and PS Handover, MOCN and no combined
procedure
1\. Handover is performed to a shared UTRAN/GERAN network. Source RAN selects
the target CS or PS operator and sends Handover Required (Target Network
Identifier) to source core node. Source core node requests the target CN to
establish handover resources in target RAN and target core node.
2\. UE sends a RAU Request to target SGSN. (2b) As the UE is in connected mode
the RAU Request is sent to the target SGSN as selected in step 1.
3\. UE goes idle in CS domain.
4\. (4a) The UE sends a Location Update Request to the target RNC/BSS. (4b)
The target RNC/BSS selects CS operator using MOCN redirection procedure incl.
CS/PS coordination as specified in TS 23.251 [2]. After this step no RAU will
be performed as no RA change has occurred.
#### 5.6.1.2 Identified issues
Risk for incorrect CS/PS coordination when UE goes Idle in CS domain in step
3. The reason is that the UE makes a LAU with MOCN redirection incl. CS/PS
coordination procedure in the CS domain. But for the PS domain the UE has due
to the RAU in step 2 already been registered in the PS domain.
### 5.6.2 Concurrent CS and PS Handover from UTRAN/GERAN to UTRAN/GERAN, MOCN,
combined procedure
This scenario is concurrent CS and PS Handover, MOCN and combined update
procedure. The scenarios are valid for non-supporting shared target networks.
#### 5.6.2.1 Description
Figure 5.6.2.1-1: Concurrent CS and PS Handover, MOCN and combined procedure
1\. PS handover is performed to a shared UTRAN/GERAN network. Source RAN
selects the target CS and PS operator and sends Handover Required (Target
Network Identifier) to source core node. Source core node requests the target
CN to establish handover resources in target RAN and target core node.
2\. UE sends a RAU Request to target SGSN. (2b) As the UE is in connected mode
the RAU Request is sent to the target SGSN as selected in step 1.
3\. UE goes idle in CS domain.
4\. UE sends a RAU Request indicating Combined RA / LA Update with IMSI Attach
to target RNC/BSS. The RNC/BSS selects the SGSN that was associated with the
UE at step 2. The SGSN selects an operator for CS domain and sends information
about selected operator to the MSC. The MSC performs CS registration at the
selected operator.
#### 5.6.2.2 Identified issues
No risk for incorrect CS/PS coordination. When the UE enters Idle mode in CS
domain a combined RAU will occur and CS/PS coordination is thus achieved.
Serving operator is kept as the UE has, due to the RAU in step 2, already been
registered in the PS domain.
### 5.6.3 Concurrent CS and PS Handover from UTRAN/GERAN to UTRAN/GERAN, GWCN,
no combined procedure
This scenario is concurrent CS and PS Handover, GWCN and no combined update
procedure. The Scenarios are valid for non-supporting shared target networks.
#### 5.6.3.1 Description
Figure 5.6.3.1-1: Concurrent CS and PS Handover, GWCN and no combined
procedure
1\. Handover is performed to a shared UTRAN/GERAN network. Source RAN selects
the target CS and PS operator and sends Handover Required (Target Network
Identifier) to source core node. Source core node requests the target CN to
establish handover resources in target RAN and target core node.
2\. UE sends a RAU Request to target SGSN. (2b) As the UE is in connected mode
the RAU Request is sent to the target SGSN/target operator as selected in step
1.
3\. UE goes idle in CS domain.
4\. (4a) UE sends a Location Update Request to target RNC/BSS. (4b) The target
RNC/BSS selects target MSC and sends the Location Update Request to the target
MSC. (4c) The target GWCN MSC routes the request to CS operator based on local
policy.
#### 5.6.3.2 Identified issues
Risk for incorrect CS/PS coordination after going to idle mode in the CS
domain, step 3, the UE will use the Common PLMN when sending the LAU Request
in step 4. Selection of CS operator in the target GWCN MSC node can then not
be based on the PLMN as that is a common PLMN. Nor can it be based on the CS-
NRI if that is invalid.
### 5.6.4 Concurrent CS and PS Handover from UTRAN/GERAN to UTRAN/GERAN, GWCN,
combined procedure
This scenario is concurrent CS and PS Handover, GWCN and combined update
procedure. The Scenarios are valid for non-supporting shared target networks.
#### 5.6.4.1 Description
Figure 5.6.4.1-1: Concurrent CS and PS Handover, GWCN and combined procedure
1\. Handover is performed to a shared UTRAN/GERAN network. Source RAN selects
the target CS and PS operator and sends Handover Required (Target Network
Identifier) to source core node. Source core node requests the target CN to
establish handover resources in target RAN and target core node.
2\. UE sends a RAU Request to target SGSN. (2b) As the UE is in connected mode
the RAU Request is sent to the target SGSN/target operator as selected in step
1.
3 UE goes idle in CS domain.
4\. UE sends a RAU Request indicating Combined RA / LA Update with IMSI Attach
to target RNC/BSS. The RNC/BSS selects the SGSN that was associated with MS at
step 2. The SGSN selects an operator for CS domain and performs CS
registration at the selected MSC.
#### 5.6.4.2 Identified issues
No risk for incorrect CS/PS coordination. When the UE enters Idle mode in CS
domain a Combined RA/LA Update will occur and CS/PS coordination is thus
achieved. Serving operator is kept as the UE has in step 2 already been
registered in the PS domain.
## 5.7 Cell reselection scenarios
### 5.7.1 Operator Centric: Cell reselection to UTRAN or GERAN, user is SGs
registered in the target network
In this scenario the target network is GERAN or UTRAN. The source network is
EUTRAN. The UE is SGs registered to operator A and the target cell belongs to
the network in which UE is SGs registered. The CS domain and PS domain NRIs
are coordinated within the target network. Hence, the NRI for CS domain is
always coordinated, since UE is already SGs registered in target network. In
the PS domain the source MMEC and the target NRI may be coordinated or
uncoordinated. RAN treats any provided NRI (irrespectively of its origin) as
valid for routing. In the PS domain there is a change of pool. In the CS
domain there may be a change of pool (if target cell does not belong to the
SGs registered MSC pool).In this case DTM and no DTM should give same
signalling procedure. The signalling flow shows a target MOCN, but the results
are also valid for a target GWCN. Only non-combined update procedures are
used, i.e. the Gs is not used in the target network.
The UE has done attach to operator A in a non-shared network or in a shared
network in which the UE is a \"supporting UE\". This is the source network. In
the signalling flows there is a MSC A1 and MSC A2, which are MSCs of operator
A. The MSC B denotes an MSC of the partner operator B. The UE is assumed to be
registered to MSC A1 in source network. The target MSC is MSC A2 when there is
a change of pool in CS domain and MSC A1 when there is no change of pool. The
same analogy applies to the PS domain but the source node is MME A1.
#### 5.7.1.1 Description
Figure 5.7.1.1-1: Cell reselection to UTRAN or GERAN, user is SGs registered
in the target network, using the operator centric approach for CS/PS
coordination
1 The UE initiates a cell reselection in E-UTRAN towards a 2G or 3G network.
The details of this procedure is not important.
2 The UE performs a LAU (if necessary) and the LAU is routed to operator A
since the NRI was generated by an MSC of operator A as part of the SGs
registration.
**[With coordinated NRIs:]{.underline}**
3 The UE performs a RAU and the RAU is routed to operator A since the NRIs are
coordinated.
**[With non-coordinated NRIs:]{.underline}**
3 The UE performs a RAU. CS/PS coordination is triggered and the users are
distributed between the two operators in the PS domain.
#### 5.7.1.2 Identified issues
For uncoordinated NRIs, there will be uncoordinated users. These users will
stay uncoordinated since NRIs from the CS and PS domains are considered
coordinated in the target network.
### 5.7.2 Operator Centric: Cell reselection to UTRAN or GERAN, user is not
registered in the CS domain of the target network
In this scenario the target network is GERAN or UTRAN and the source network
is UTRAN, GERAN or EUTRAN. If source network is EUTRAN, the UE is SGs
registered to operator A, but the target cell does not belong to the network
in which UE is SGs registered. In both the CS and the PS domain there is a
change of pool between source and target network. Both CS domain and PS domain
NRIs are coordinated in source and target network, or both are uncoordinated.
RAN treats any provided NRI (irrespectively of its origin) as valid for
routing. In this case DTM and no DTM should give same signalling procedure.
The signalling flow shows a target MOCN, but the results are also valid for a
target GWCN. Only non-combined update procedures are used, i.e. the Gs is not
used in the target network.
The UE has done attach to operator A in a non-shared network or in a shared
network in which the UE is a \"supporting UE\". This is the source network. In
the signalling flows there is a MSC A1 and MSC A2, which are MSCs of operator
A. The MSC B denotes an MSC of the partner operator B. The UE is assumed to be
registered to MSC A1 in source network. The target MSC is MSC A2 when there is
a change of pool in CS domain and MSC A1 when there is no change of pool. The
same analogy applies to the PS domain.
#### 5.7.2.1 Description
Figure 5.7.2.1-1: Cell reselection to UTRAN or GERAN, user is not registered
in the CS domain of the target network, using the operator centric approach
for CS/PS coordination
1 The UE initiates a cell reselection towards a 2G or 3G network. The details
of this procedure are not important.
**[With coordinated NRIs:]{.underline}**
2 The UE performs a LAU and the LAU is routed to operator A since the NRIs are
coordinated.
3 The UE performs a RAU and the RAU is routed to operator A since the NRIs are
coordinated.
**[With non-coordinated NRIs:]{.underline}**
2 The UE performs a LAU. CS/PS coordination is triggered and the users are
distributed between the two operators in the CS domain.
3 The UE performs a RAU. CS/PS coordination is triggered and the users are
distributed between the two operators in the PS domain.
#### 5.7.2.2 Identified issues
For uncoordinated NRIs, the operator may change. In case of GWCN for the
uncoordinated NRI case, if the same CN operator selection criteria are not
used in target MSC and target SGSN users may become CS/PS uncoordinated.
### 5.7.3 Pool Centric: Cell reselection to UTRAN or GERAN, user is SGs
registered in the target network, no change of MSC pool
In this scenario the target network is GERAN or UTRAN. The source network is
EUTRAN. The UE is SGs registered to operator A and the target cell belongs to
the registered MSC pool. In the PS domain there is a change of pool. In this
case DTM and no DTM should give same signalling procedure. The signalling flow
is valid only for a target MOCN. Only non-combined update procedures are used,
i.e. the Gs is not used in the target network.
The UE has done attach to operator A in a non-shared network or in a shared
network in which the UE is a \"supporting UE\". This is the source network. In
the signalling flows there is a MSC A1 and MSC A2, which are MSCs of operator
A. The MSC B denotes an MSC of the partner operator B. The UE is assumed to be
registered to MSC A1 in source network. The target MSC is MSC A2 when there is
a change of pool in CS domain and MSC A1 when there is no change of pool. The
same analogy applies to the PS domain but the source node is MME A1.
#### 5.7.3.1 Description
Figure 5.7.3.1-1: Cell reselection to UTRAN or GERAN, user is SGs registered
in the target network, no change of MSC pool, using the operator centric
approach for CS/PS coordination
1 The UE initiates a cell reselection in E-UTRAN towards a 2G or 3G network.
The details of this procedure are not important.
2 The UE performs a LAU and the LAU is routed to operator A since the NRI was
generated by an MSC of operator A as part of the SGs registration.
3 The UE performs a RAU. CS/PS coordination is triggered and the users are
distributed between the two operators in the PS domain.
#### 5.7.3.2 Identified issues
There will be uncoordinated users. These users will stay uncoordinated until
the next pool change.
### 5.7.4 Pool Centric: Cell reselection to UTRAN or GERAN, change of MSC pool
In this scenario the target network is GERAN or UTRAN and the source network
is UTRAN, GERAN or EUTRAN. If source network is EUTRAN, the UE is SGs
registered to operator A, but the target cell does not belong to the
registered MSC pool. In both the CS and the PS domain there is a change of
pool between source and target network. In this case DTM and no DTM should
give same signalling procedure. The signalling flow is valid only for a target
MOCN. Only non-combined update procedures are used, i.e. the Gs is not used in
the target network.
The UE has done attach to operator A in a non-shared network or in a shared
network in which the UE is a \"supporting UE\". This is the source network. In
the signalling flows there is a MSC A1 and MSC A2, which are MSCs of operator
A. The MSC B denotes an MSC of the partner operator B. The UE is assumed to be
registered to MSC A1 in source network. The target MSC is MSC A2 when there is
a change of pool in CS domain and MSC A1 when there is no change of pool. The
same analogy applies to the PS domain.
#### 5.7.4.1 Description
Figure 5.7.4.1-1: Cell reselection to UTRAN or GERAN, change of MSC pool,
using the operator centric approach for CS/PS coordination
1 The UE initiates a cell reselection towards a 2G or 3G network. The details
of this procedure are not important.
2 The UE performs a LAU. CS/PS coordination is triggered and the users are
distributed between the two operators in the CS domain.
3 The UE performs a RAU. CS/PS coordination is triggered and the users are
distributed between the two operators in the PS domain.
#### 5.7.4.2 Identified issues
The operator may change.
## 5.8 Redirection scenarios
### 5.8.1 Operator Centric: Redirect to UTRAN or GERAN, user is SGs registered
in the target network
In this scenario the target network is GERAN or UTRAN. The source network is
EUTRAN. The UE is SGs registered to operator A and the target cell belongs to
the network in which UE is SGs registered. The CS domain and PS domain NRIs
are coordinated within the target network. Hence, the NRI for CS domain is
always coordinated, since UE is already SGs registered in target network. In
the PS domain the source MMEC and the target NRI may be coordinated or
uncoordinated. RAN treats any provided NRI (irrespectively of its origin) as
valid for routing. In the PS domain there is a change of pool. In the CS
domain there may be a change of pool (if target cell does not belong to the
SGs registered MSC pool). In this case DTM and no DTM should give same
signalling procedure. The signalling flow shows a target MOCN, but the results
are also valid for a target GWCN. Only non-combined update procedures are
used, i.e. the Gs is not used in the target network.
The UE has done attach to operator A in a non-shared network or in a shared
network in which the UE is a \"supporting UE\". This is the source network. In
the signalling flows there is a MSC A1 and MSC A2, which are MSCs of operator
A. The MSC B denotes an MSC of the partner operator B. The UE is assumed to be
registered to MSC A1 in source network. The target MSC is MSC A2 when there is
a change of pool in CS domain and MSC A1 when there is no change of pool. The
same analogy applies to the PS domain but the source node is MME A1.
#### 5.8.1.1 Description
Figure 5.8.1.1-1: Redirect to UTRAN or GERAN, user is SGs registered in the
target network using the operator centric approach for CS/PS coordination
1 EUTRAN initiates a redirect towards a 2G or 3G network.
2 The UE performs a LAU (if necessary) and the LAU is routed to operator A
since the NRI was generated by an MSC of operator A as part of the SGs
registration.
**[With coordinated NRIs:]{.underline}**
3 The UE performs a RAU and the RAU is routed to operator A since the NRIs are
coordinated.
**[With uncoordinated NRIs:]{.underline}**
3 The UE performs a RAU. CS/PS coordination is triggered and the users are
distributed between the two operators in the PS domain.
#### 5.8.1.2 Identified issues
For uncoordinated NRIs, there will be uncoordinated users. These users will
stay uncoordinated since NRIs from the CS and PS domains are considered
coordinated in the target network.
### 5.8.2 Operator Centric: Redirect to UTRAN or GERAN, user is not registered
in the CS domain of the target network
In this scenario the target network is GERAN or UTRAN and the source network
is UTRAN, GERAN or EUTRAN. If source network is EUTRAN, the UE is SGs
registered to operator A, but the target cell does not belong to the network
in which UE is SGs registered. In both the CS and the PS domain there is a
change of pool between source and target network. Both CS domain and PS domain
NRIs are coordinated in source and target network, or both are uncoordinated.
RAN treats any provided NRI (irrespectively of its origin) as valid for
routing. In this case DTM and no DTM should give same signalling procedure.
The signalling flow shows a target MOCN, but the results are also valid for a
target GWCN. Only non-combined update procedures are used, i.e. the Gs is not
used in the target network.
The UE has done attach to operator A in a non-shared network or in a shared
network in which the UE is a \"supporting UE\". This is the source network. In
the signalling flows there is a MSC A1 and MSC A2, which are MSCs of operator
A. The MSC B denotes an MSC of the partner operator B. The UE is assumed to be
registered to MSC A1 in source network. The target MSC is MSC A2 when there is
a change of pool in CS domain and MSC A1 when there is no change of pool. The
same analogy applies to the PS domain.
#### 5.8.2.1 Description
Figure 5.8.2.1-1: Redirect to UTRAN or GERAN, user is not registered in the CS
domain of the target network, using the operator centric approach for CS/PS
coordination
1\. The source network (GERAN, UTRAN or EUTRAN) initiates a redirect towards a
2G or 3G network.
**[With coordinated NRIs:]{.underline}**
2\. The UE performs a LAU and the LAU is routed to operator A since the NRI
was generated by an MSC of operator A as part of the SGs registration.
3\. The UE performs a RAU and the RAU is routed to operator A since the NRI
was generated by an SGSN of operator A.
**[With uncoordinated NRIs:]{.underline}**
2\. The UE performs a LAU. CS/PS coordination is triggered and the users are
distributed between the two operators in the CS domain.
3\. The UE performs a RAU. CS/PS coordination is triggered and the users are
distributed between the two operators in the PS domain.
#### 5.8.2.2 Identified issues
For uncoordinated NRIs, the operator may change. In case of GWCN for the
uncoordinated NRI case, if the same CN operator selection criteria are not
used in target MSC and target SGSN users may become CS/PS uncoordinated.
### 5.8.3 Pool Centric: Redirect to UTRAN or GERAN, user is SGs registered in
the target network, no change of MSC pool
In this scenario the target network is GERAN or UTRAN. The source network is
EUTRAN. The UE is SGs registered to operator A and the target cell belongs to
the registered MSC pool. In the PS domain there is a change of pool.In this
case DTM and no DTM should give same signalling procedure. The signalling flow
is valid only for a target MOCN. Only non-combined update procedures are used,
i.e. the Gs is not used in the target network.
The UE has done attach to operator A in a non-shared network or in a shared
network in which the UE is a \"supporting UE\". This is the source network. In
the signalling flows there is a MSC A1 and MSC A2, which are MSCs of operator
A. The MSC B denotes an MSC of the partner operator B. The UE is assumed to be
registered to MSC A1 in source network. The target MSC is MSC A2 when there is
a change of pool in CS domain and MSC A1 when there is no change of pool. The
same analogy applies to the PS domain but the source node is MME A1.
#### 5.8.3.1 Description
Figure 5.8.3.1-1: Redirect to UTRAN or GERAN, user is SGs registered in the
target network, no change of MSC pool using the pool centric approach for
CS/PS coordination
1\. EUTRAN initiates a redirect towards a 2G or 3G network.
2\. The UE performs a LAU and the LAU is routed to operator A since the NRI
was generated by an MSC of operator A as part of the SGs registration.
3\. The UE performs a RAU. CS/PS coordination is triggered and the users are
distributed between the two operators in the PS domain.
#### 5.8.3.2 Identified issues
There will be uncoordinated users. These users will stay uncoordinated until
the next pool change.
### 5.8.4 Pool Centric: Redirect to UTRAN or GERAN, change of MSC pool
In this case the target network is GERAN or UTRAN and the source network is
UTRAN, GERAN or EUTRAN. If source network is EUTRAN, the UE is SGs registered
to operator A, but the target cell does not belong to the registered MSC pool.
In both the CS and the PS domain there is a change of pool between source and
target network. In this case DTM and no DTM should give same signalling
procedure. The signalling flow is valid only for a target MOCN. Only non-
combined update procedures are used, i.e. the Gs is not used in the target
network.
The UE has done attach to operator A in a non-shared network or in a shared
network in which the UE is a \"supporting UE\". This is the source network. In
the signalling flows there is a MSC A1 and MSC A2, which are MSCs of operator
A. The MSC B denotes an MSC of the partner operator B. The UE is assumed to be
registered to MSC A1 in source network. The target MSC is MSC A2 when there is
a change of pool in CS domain and MSC A1 when there is no change of pool. The
same analogy applies to the PS domain.
#### 5.8.4.1 Description
Figure 5.8.4.1-1: Redirect to UTRAN or GERAN, change of MSC pool using the
pool centric approach for CS/PS coordination
1\. The source network (GERAN, UTRAN or EUTRAN) initiates a redirect towards a
2G or 3G network.
2\. The UE performs a LAU. CS/PS coordination is triggered due to the change
of pool and the users are distributed between the two operators in the CS
domain.
3\. The UE performs a RAU. CS/PS coordination is triggered and the users are
distributed between the two operators in the PS domain.
#### 5.8.4.2 Identified issues
The operator may change.
## 5.9 EUTRAN to UTRAN/GERAN mobility for SGs registered and non-SGs
registered users scenario
### 5.9.1 Operator Centric: SRVCC
In this scenario the source network is EUTRAN. As part of the SRVCC procedure
the UE will be registered in an \'MSC Server enhanced for (v)SRVCC\' of the
target network. The \'MSC Server enhanced for (v)SRVCC\' and the \'target
MSC\' may or may not be the same node. In the PS domain there is a change of
pool. In the PS domain the source MMEC and the target NRI may be coordinated
or uncoordinated. RAN treats any provided NRI (irrespectively of its origin)
as valid for routing. We assume a target GERAN without DTM in the signalling
flow. With DTM, or if target is UTRAN, the RAU will take place between item 1.
and 2. in the signalling flow, but the outcome of the RAU is the same. Hence,
the result after the call should be the same with DTM or if target is UTRAN.
The signalling flow shows a target MOCN, but the results are also valid for a
target GWCN. Only non-combined procedures are used, i.e. the Gs is not used in
the target network.
The UE has done attach to operator A in a non-shared network or in a shared
network in which the UE is a \"supporting UE\". This is the source network. In
the signalling flows there is a MSC A1 and MSC A2, which are MSCs of operator
A. The MSC A1 is an \'MSC Server enhanced for (v)SRVCC\' and the MCS A2 is not
an \'MSC Server enhanced for (v)SRVCC\'. The MSC B denotes an MSC of the
partner operator B. The target MSC is MSC A1 when the UE is registered in the
target MSC and MSC A2 when the UE is not registered in the target MSC.
#### 5.9.1.1 Description
Figure 5.9.1.1-1: SRVCC, using the operator centric approach for CS/PS
coordination
1\. SRVCC is performed to operator A. If the UE is not already registered in
an \'MSC Server enhanced for (v)SRVCC\' in the target network the TMSI
reallocation procedure is performed and the UE will be registered in an \'MSC
Server enhanced for (v)SRVCC\'.
2\. The CS call is ended.
**[Target MSC is MSC A1:]{.underline}**
In the end of the SRVCC procedure (step 1) the UE is or will be registered in
an \'MSC Server enhanced for (v)SRVCC\' which is equal to MSC A1 thus no LAU
is required.
**[With coordinated PS-NRIs:]{.underline}**
3\. The UE performs a RAU and the RAU is routed to operator A since the PS-
NRIs are coordinated.
**[With non-coordinated PS-NRIs:]{.underline}**
3\. The UE performs a RAU. CS/PS coordination is triggered and the users are
distributed between the two operators in the PS domain.
**[Target MSC is MSC A2:]{.underline}**
3\. In the end of the SRVCC procedure (step 1) the UE is or will be registered
in an \'MSC Server enhanced for (v)SRVCC\' which is not equal to MSC A2. Thus
the UE performs a LAU and the LAU is routed to an MSC of operator A since the
CS-NRIs are coordinated. Through the TMSI reallocation the UE is provided with
a CS-NRI allocated within the target network.
**[With coordinated PS-NRIs:]{.underline}**
4\. The UE performs a RAU and the RAU is routed to operator A since the NRIs
are coordinated.
**[With non-coordinated PS-NRIs:]{.underline}**
4\. The UE performs a RAU. CS/PS coordination is triggered and the users are
distributed between the two operators in the PS domain.
#### 5.9.1.2 Identified issues
For coordinated PS-NRIs, the registration in the CS domain of the target
network leads to users becoming CS/PS uncoordinated. They will stay
uncoordinated since both CS- and PS-NRIs are assumed to be coordinated in the
target network.
For uncoordinated PS-NRIs, the registration in the CS domain of the target
network leads to users becoming CS/PS uncoordinated. They will stay
uncoordinated since both CS- and PS-NRIs are assumed to be coordinated in the
target network.
In case of GWCN for the uncoordinated NRI case, if the same CN operator
selection criteria are not used in source RAN and target SGSN users may become
CS/PS uncoordinated.
### 5.9.2 Operator Centric: PS handover to UTRAN or GERAN with DTM support,
user is not SGs registered
In this scenario the source network is EUTRAN. The UE is not SGs registered so
there will be a new registration in the CS pool of the target network. In the
PS domain there is a change of pool. In the PS domain the source MMEC and the
target NRI may be coordinated or uncoordinated. RAN treats any provided NRI
(irrespectively of its origin) as valid for routing. The target network is
GERAN with DTM or UTRAN. The signalling flow shows a target MOCN, but the
results are also valid for a target GWCN. Only non-combined procedures are
used, i.e. the Gs is not used in the target network.
The UE has done attach to operator A in a non-shared network or in a shared
network in which the UE is a \"supporting UE\". This is the source network. In
the signalling flows there is a MSC A1 and MSC A2, which are MSCs of operator
A. The MSC B denotes an MSC of the partner operator B. The UE is assumed to be
registered to MME A1 in source network. The target SGSN is SGSN A2.
#### 5.9.2.1 Description
Figure 5.9.2.1-1: PS handover to UTRAN or GERAN with DTM support, user is not
SGs registered, using the operator centric approach for CS/PS coordination
1\. PS handover is performed to operator A.
**[With coordinated NRIs:]{.underline}**
2\. a. The UE performs a LAU. If the NRI comes from coordinated area of
operator A, then the LAU is forwarded to operator A and accepted. No CS/PS
coordination is performed.
b. The UE performs a LAU. If the NRI comes from coordinated area of operator
B, then the LAU is forwarded to operator B and accepted. No CS/PS coordination
is performed.
c. The UE performs a LAU. If the NRI does not come from a coordinated area at
all, then CS/PS coordination is performed and the users are distributed
between the two operators in the CS domain.
**[With non-coordinated NRIs:]{.underline}**
2\. The UE performs a LAU. CS/PS coordination is triggered and the users are
distributed between the two operators in the CS domain.
#### 5.9.2.2 Identified issues
For both coordinated NRIs and for uncoordinated NRIs, there will be CS/PS
uncoordinated users. They will stay uncoordinated since NRIs are assumed to be
coordinated in the target network.
### 5.9.3 Operator Centric: PS handover to GERAN with no DTM support, user is
not SGs registered
In this scenario the source network is EUTRAN. The UE is not SGs registered so
there will be a new registration in the CS pool of target network. In the PS
domain there is a change of pool. In the PS domain the source MMEC and the
target NRI may be coordinated or uncoordinated. RAN treats any provided NRI
(irrespectively of its origin) as valid for routing. The target network is
GERAN without DTM. The signalling flow shows a target MOCN, but the results
are also valid for a target GWCN. Only non-combined procedures are used, i.e.
the Gs is not used in the target network.
The UE has done attach to operator A in a non-shared network or in a shared
network in which the UE is a \"supporting UE\". This is the source network. In
the signalling flows there is a MSC A1 and MSC A2, which are MSCs of operator
A. The MSC B denotes an MSC of the partner operator B. The UE is assumed to be
registered to MSC A1 in source network. The UE is assumed to be registered to
MME A1 in source network. The target SGSN is SGSN A2.
#### 5.9.3.1 Description
Figure 5.9.3.1-1: PS handover to GERAN with no DTM support, user is not SGs
registered, using the operator centric approach for CS/PS coordination
1\. PS handover is performed to operator A.
2\. PS session ends.
**[With coordinated NRIs:]{.underline}**
3\. a. The UE performs a LAU. If the NRI comes from coordinated area of
operator A, then the LAU is forwarded to operator A and accepted. No CS/PS
coordination is performed.
b. The UE performs a LAU. If the NRI comes from coordinated area of operator
B, then the LAU is forwarded to operator B and accepted. No CS/PS coordination
is performed.
c. The UE performs a LAU. If the NRI does not come from a coordinated area at
all, then CS/PS coordination is performed and the users are distributed
between the two operators in the CS domain.
**[With non-coordinated NRIs:]{.underline}**
3\. The UE performs a LAU. CS/PS coordination is triggered and the users are
distributed between the two operators in the CS domain.
#### 5.9.3.2 Identified issues
For both coordinated NRIs and for uncoordinated NRIs, there will be CS/PS
uncoordinated users. They will stay uncoordinated since NRIs are assumed to be
coordinated in the target network.
### 5.9.4 Operator Centric: Redirect and Cell reselection, user is not SGs
registered
The source network is EUTRAN. The UE is not SGs registered so there will be a
new registration in the CS pool of target network. In the PS domain there is a
change of pool. In the PS domain the source MMEC and the target NRI may be
coordinated or uncoordinated. RAN treats any provided NRI (irrespectively of
its origin) as valid for routing. The target network is GERAN or UTRAN. In
this case DTM and no DTM should give same signalling procedure. The signalling
flow shows a target MOCN, but the results are also valid for a target GWCN.
Only non-combined procedures are used, i.e. the Gs is not used in the target
network.
The UE has done attach to operator A in a non-shared network or in a shared
network in which the UE is a \"supporting UE\". This is the source network. In
the signalling flows there is a MSC A1 and MSC A2, which are MSCs of operator
A. The MSC B denotes an MSC of the partner operator B. The UE is assumed to be
registered to MSC A1 in source network. The UE is assumed to be registered to
MME A1 in source network. The goal is to become registered in MSC A2 and SGSN
A2 in the target network.
#### 5.9.4.1 Description
Figure 5.9.4.1-1: Redirect and Cell reselection, user is not SGs registered,
using the operator centric approach for CS/PS coordination
1\. Redirection or cell reselection is initiated to operator A from EUTRAN.
**[With coordinated NRIs:]{.underline}**
2\. a. The UE performs a LAU. If the NRI comes from coordinated area of
operator A, then the LAU is forwarded to operator A and accepted. No CS/PS
coordination is performed.
b. The UE performs a LAU. If the NRI comes from coordinated area of operator
B, then the LAU is forwarded to operator B and accepted. No CS/PS coordination
is performed.
c. The UE performs a LAU. If the NRI does not come from a coordinated area at
all, then CS/PS coordination is performed and the users are distributed
between the two operators in the CS domain.
3\. The UE performs RAU and the RAU is routed to operator A since the NRIs are
coordinated.
**[With non-coordinated NRIs:]{.underline}**
2\. The UE performs a LAU. CS/PS coordination is triggered and the users are
distributed between the two operators in the CS domain.
3\. The UE performs a RAU. CS/PS coordination is triggered and the users are
distributed between the two operators in the PS domain.
#### 5.9.4.2 Identified issues
For coordinated NRIs, there will be CS/PS uncoordinated users. They will stay
uncoordinated since NRIs are assumed to be coordinated in the target network.
For uncoordinated NRIs, there is a CS/PS coordination procedure in both
domains so all users will be CS/PS coordinated. There may be a change of
serving operator. In case of GWCN for the uncoordinated NRI case, if the same
CN operator selection criteria are not used in target MSC and target SGSN
users may become CS/PS uncoordinated.
### 5.9.5 Pool Centric: SRVCC
In this scenario the source network is EUTRAN. As part of the SRVCC procedure
the UE will be registered in an \'MSC Server enhanced for (v)SRVCC\' of the
target network. The \'MSC Server enhanced for (v)SRVCC\' and the \'target
MSC\' may or may not be the same node. In the PS domain there is a change of
pool. We assume a target GERAN without DTM in the signalling flow. With DTM,
or if target is UTRAN, the RAU will take place between item 1. and 2. in the
signalling flow, but the outcome of the RAU is the same. Hence, the result
after the call should be the same with DTM or if target is UTRAN. The
signalling flow is valid only for a target MOCN. Only non-combined procedures
are used, i.e. the Gs is not used in the target network.
The UE has done attach to operator A in a non-shared network or in a shared
network in which the UE is a \"supporting UE\". This is the source network. In
the signalling flows there is a MSC A1 and MSC A2, which are MSCs of operator
A. The MSC A1 is an \'MSC Server enhanced for (v)SRVCC\' and the MCS A2 is not
an \'MSC Server enhanced for (v)SRVCC\'. The MSC B denotes an MSC of the
partner operator B. The target MSC is MSC A1 when the UE is registered in the
target MSC and MSC A2 when the UE is not registered in the target MSC.
#### 5.9.5.1 Description
Figure 5.9.5.1-1: SRVCC, using the pool centric approach for CS/PS
coordination
1\. SRVCC is performed to operator A. If the UE is not already registered in
an \'MSC Server enhanced for (v)SRVCC\' in the target network the TMSI
reallocation procedure is performed and the UE will be registered in an \'MSC
Server enhanced for (v)SRVCC\'.
2\. The CS call is ended.
**[Target MSC is MSC A1:]{.underline}**
In the end of the SRVCC procedure (step 1) the UE is or will be registered in
an \'MSC Server enhanced for (v)SRVCC\' which is equal to MSC A1 thus no LAU
is required.
3\. The UE performs a RAU. CS/PS coordination is triggered and the users are
distributed between the two operators in the PS domain.
**[Target MSC is MSC A2:]{.underline}**
3\. In the end of the SRVCC procedure (step 1) the UE is or will be registered
in an \'MSC Server enhanced for (v)SRVCC\' which is not equal to MSC A2. Thus
the UE performs a LAU. CS/PS coordination is triggered and the users are
distributed between the two operators in the CS domain.
4\. The UE performs a RAU. CS/PS coordination is triggered and the users are
distributed between the two operators in the PS domain.
#### 5.9.5.2 Identified issues
If the target MSC is the same node as the \'MSC Server enhanced for (v)SRVCC\'
then users become CS/PS uncoordinated.
If the target MSC is not the same node as the MSC Server enhanced for
(v)SRVCC\' there will be CS/PS uncoordinated users during the call, but
coordinated after the call ends. The operator may change.
In case of GWCN for the uncoordinated NRI case, if the same CN operator
selection criteria are not used in source RAN and target SGSN users may become
CS/PS uncoordinated.
### 5.9.6 Pool Centric: PS handover to UTRAN or GERAN with DTM support, user
is not SGs registered
In this scenario the source network is EUTRAN. The UE is not SGs registered so
there will be a new registration in the CS pool of the target network. In the
PS domain there is a change of pool. The target network is GERAN with DTM or
UTRAN. The signalling flow is valid only for a target MOCN. Only non-combined
procedures are used, i.e. the Gs is not used in the target network.
The UE has done attach to operator A in a non-shared network or in a shared
network in which the UE is a \"supporting UE\". This is the source network. In
the signalling flows there is a MSC A1 and MSC A2, which are MSCs of operator
A. The MSC B denotes an MSC of the partner operator B. The UE is assumed to be
registered to MME A1 in source network. The target SGSN is SGSN A2.
#### 5.9.6.1 Description
Figure 5.9.6.1-1: PS handover to UTRAN or GERAN with DTM support, user is not
SGs registered, using the pool centric approach for CS/PS coordination
1\. PS handover is performed to operator A.
2\. The UE performs a LAU. CS/PS coordination is triggered and the users are
distributed between the two operators in the CS domain.
#### 5.9.6.2 Identified issues
There will be CS/PS uncoordinated users. These users will stay uncoordinated
until the next pool change.
### 5.9.7 Pool Centric: PS handover to GERAN with no DTM support, user is not
SGs registered
In this scenario the source network is EUTRAN. The UE is not SGs registered so
there will be a new registration in the CS pool of target network. In the PS
domain there is a change of pool. The target network is GERAN without DTM. The
signalling flow is valid only for a target MOCN. Only non-combined procedures
are used, i.e. the Gs is not used in the target network.
The UE has done attach to operator A in a non-shared network or in a shared
network in which the UE is a \"supporting UE\". This is the source network. In
the signalling flows there is a MSC A1 and MSC A2, which are MSCs of operator
A. The MSC B denotes an MSC of the partner operator B. The UE is assumed to be
registered to MSC A1 in source network. The UE is assumed to be registered to
MME A1 in source network. The target SGSN is SGSN A2.
#### 5.9.7.1 Description
Figure 5.9.7.1-1: PS handover to GERAN with no DTM support, user is not SGs
registered, using the pool centric approach for CS/PS coordination
1\. PS handover is performed to operator A.
2\. PS session ends.
3\. The UE performs a LAU. CS/PS coordination is triggered and the users are
distributed between the two operators in the CS domain.
#### 5.9.7.2 Identified issues
There will be CS/PS uncoordinated users. These users will stay uncoordinated
until the next pool change.
### 5.9.8 Pool Centric: Redirect or Cell reselection, user is not SGs
registered
The source network is EUTRAN. The UE is not SGs registered so there will be a
new registration in the CS pool of target network. In the PS domain there is a
change of pool. The target network is GERAN or UTRAN. In this case DTM and no
DTM should give same signalling procedure. The signalling flow is valid only
for a target MOCN. Only non-combined procedures are used, i.e. the Gs is not
used in the target network.
The UE has done attach to operator A in a non-shared network or in a shared
network in which the UE is a \"supporting UE\". This is the source network. In
the signalling flows there is a MSC A1 and MSC A2, which are MSCs of operator
A. The MSC B denotes an MSC of the partner operator B. The UE is assumed to be
registered to MSC A1 in source network. The UE is assumed to be registered to
MME A1 in source network. The target SGSN in redirect is SGSN A2.
#### 5.9.8.1 Description
Figure 5.9.8.1-1: Redirect or Cell reselection, user is not SGs registered,
using the pool centric approach for CS/PS coordination
1\. Redirection or cell reselection is initiated to operator A from EUTRAN.
2\. The UE performs a LAU. CS/PS coordination is triggered and the users are
distributed between the two operators in the CS domain.
3\. The UE performs a RAU. CS/PS coordination is triggered and the users are
distributed between the two operators in the PS domain.
#### 5.9.8.2 Identified issues
The operator may change.
## 5.10 PS Attach after CS mobility
The source network is UTRAN or GERAN and the target network is GERAN. Both CS
domain and PS domain NRIs are coordinated in source and target network
(operator centric model). The signalling flow shows a target MOCN. Only non-
combined procedures are used, i.e. the Gs is not used in the target network.
The UE has not done any previous PS attach and is CS attached to operator A in
a non-shared network or in a shared network where no Multiple PLMN list is
broadcasted. A CS operator for this UE is selected by the network (source
network). UE then moved to another area that is served by a different GERAN
(e.g. due to CS Handover, Idle mode mobility, or Redirection, etc) and this
GERAN is under MOCN configuration. UE then performs the PS attach or RAU
procedure in this network (target network).
In the signalling flows below, there is a MSC A1 and MSC A2, which are MSCs of
operator A. The MSC B denotes an MSC of the partner operator B. The UE is
assumed to be registered to MSC A1 in source network. The target MSC is MSC A2
when there is a change of pool-area in CS domain and MSC A1 when there is no
change of pool-area. The same analogy applies to the PS domain.
### 5.10.1 Description
Figure 5.10.1-1: PS attach after CS mobility in in target network
1\. LAU was performed and UE selected the CS operator MSC A (in a shared
network in which UE is a \"supporting UE\"). After LAU UE goes to IDLE and UE
moves to another pool-area (e.g., IDLE mode mobility), served by a different
RAN.
**[With coordinated NRIs:]{.underline}**
2\. The UE performs a GPRS Attach . UE has no NRI (no previous registration).
PS operator is selected by BSC; some users will be served by operator B in PS
domain and operator A continue serve CS domain. These users will stay CS/PS
uncoordinated as long as they have valid TMSI and (P)TMSI (NRIs allocated by
currently serving CS node and PS node). Subsequent RAU/LAU will not trigger
CS/PS coordination.
**[With non-coordinated NRIs:]{.underline}**
2\. The UE performs a GPRS Attach . UE has no NRI (no previous registration).
PS operator is selected by BSC; some users will be served by operator B in PS
domain and operator A continue serve CS domain. These users will stay CS/PS
uncoordinated as long as they have valid TMSI and (P) TMSI (NRIs allocated by
currently serving CS node and PS node). Subsequent RAU/LAU will not trigger
CS/PS coordination.
Another similar scenario is that:
1\. UE performs a CS attach in 3G. UE is a supporting UE and 3G network is
broadcasting the multiple PLMN(s) so UE selects CN-A for CS service and the CS
attach to CN-A is successful. UE disabled the GPRS so no PS attach was made.
2\. UE moves to 2G with MOCN configuration. CS location update is based on
TMSI (NRI) received from UE so it is routed to CN-A accordingly.
3\. UE now enables GPRS. It has no valid P-TMSI. BSC routes the GPRS Attach
using IMSI hash. This can lead to some users being CS/PS uncoordinated.
4\. Hence, there are uncoordinated CS/PS users.
5.10.2 Identified issues
A user may not be CS/PS coordinated; this is because in source network UE may
select different CS operator of what outcome BSC selection algorithm gives for
PS domain registration.
# 6\. Summary of Identified Issues
## 6.1 Identified Issues for CS Handover
Table 6.1-1: Identified Issues for CS Handover
+----------------------------------+----------------------------------+ | 5.1.1 GERAN MOCN, non DTM, no | Pool centric:\ | | combined update procedures | No risk for incorrect CSPS | | | Coordination\ | | | Operator change can occur after | | | UE goes idle | | | | | | Operator centric:\ | | | No risk for incorrect CSPS | | | Coordination\ | | | For uncoordinated NRIs operator | | | change can occur after UE goes | | | idle. | +----------------------------------+----------------------------------+ | 5.1.2 GERAN MOCN, non-DTM, | No risk for incorrect CSPS | | combined update procedures | Coordination | | | | | | Operator change can occur after | | | UE goes idle | +----------------------------------+----------------------------------+ | 5.1.3 GERAN GWCN, non-DTM, no | **Risk for incorrect CS/PS | | combined update procedures | coordination as target MSC and | | | target SGSN internally and | | | independently selects/routes the | | | request to one of the sharing | | | operators in the node. If same | | | selection criteria are used | | | there should not be any risk for | | | incorrect CS/PS coordination.** | | | | | | A further problem is valid if | | | the UE handover from a non-NRI | | | coordinated area or no NRI exist | | | in handover from 2G/3G network | | | as NRI is not mandatory in a | | | non-pooled 2G/3G network thus | | | preventing CSPS Coordination. | +----------------------------------+----------------------------------+ | 5.1.4 GERAN GWCN, non-DTM, | No risk for incorrect CS/PS | | combined update procedures | coordination | +----------------------------------+----------------------------------+ | 5.1.5 UTRAN/GERAN MOCN, no | Pool centric:\ | | combined update procedures | No risk for incorrect CS/PS | | | Coordination\ | | | PS operator can differ from the | | | CS operator during ongoing CS | | | call.\ | | | Operator change can occur after | | | UE goes idle. | | | | | | Operator:\ | | | No risk for incorrect CS/PS | | | Coordination\ | | | For uncoordinated NRIs PS | | | operator can differ from the CS | | | operator during ongoing CS | | | call.\ | | | For uncoordinated NRIs operator | | | change can occur after UE goes | | | idle. | +----------------------------------+----------------------------------+ | 5.1.6 UTRAN/GERAN MOCN, combined | No risk for incorrect CS/PS | | update procedures | coordination | | | | | | PS operator can differ from the | | | CS operator during ongoing CS | | | call. | | | | | | Operator change can occur after | | | UE goes | +----------------------------------+----------------------------------+ | 5.1.7 UTRAN/GERAN GWCN, no | **Risk for incorrect CS/PS | | combined update procedures | coordination as target MSC and | | | target SGSN internally and | | | independently selects/routes the | | | request to one of the sharing | | | operators in the node. If the | | | same selection criteria are used | | | in target MSC and target SGSN | | | there should not be any risk for | | | incorrect CS/PS coordination.** | | | | | | A further problem is valid if | | | the UE handover from a non-NRI | | | coordinated area or no NRI exist | | | in handover from 2G/3G network | | | as NRI is not mandatory in a | | | non-pooled 2G/3G network thus | | | preventing CSPS Coordination. | | | | | | PS operator can differ from the | | | CS operator during ongoing CS | | | call. | +----------------------------------+----------------------------------+ | 5.1.8 UTRAN/GERAN GWCN, combined | No risk for incorrect CS/PS | | update procedures | coordination. | | | | | | PS operator can differ from the | | | CS operator during ongoing CS | | | call. | +----------------------------------+----------------------------------+
## 6.2 Identified Issues for PS Handover
Table 6.2-1: Identified Issues for PS Handover
+----------------------------------+----------------------------------+ | 5.2.1 GERAN MOCN, non-DTM, no | **[Pool centric:\ | | combined update procedures | ]{.underline}Risk for incorrect | | | CS/PS coordination as operator | | | selection is made independently | | | in by source RAN (PS operator) | | | and by target BSS (CS | | | operator).** | | | | | | **[Operator | | | centric:]{.underline}\ | | | Risk for incorrect CS/PS | | | coordination as operator | | | selection is made independently | | | in by source RAN (PS operator) | | | and by target BSS (CS | | | operator).** | +----------------------------------+----------------------------------+ | 5.2.2 Pool Centric: PS Handover | There are no CS/PS coordination | | to GERAN with no DTM support, | issues with this use case. | | user is SGs registered in the | | | target network, no change of MSC | | | pool | | +----------------------------------+----------------------------------+ | 5.2.3 Operator Centric: PS | There are no CS/PS coordination | | Handover to a GERAN without DTM | issues with this use case. | | support, user is SGs registered | | | in the target network | | +----------------------------------+----------------------------------+ | 5.2.4 GERAN MOCN, non-DTM | No risk for incorrect CS/PS | | combined update procedures | coordination | +----------------------------------+----------------------------------+ | 5.2.5 GERAN GWCN, non-DTM, no | **Risk for incorrect CS/PS | | combined update procedures | coordination as operator | | | selection is made independently | | | by source RAN (PS operator) and | | | by target MSC (CS operator).** | | | | | | A further problem is that a UE | | | handover from LTE may not have a | | | valid Old LAI and Old TMSI thus | | | preventing CS/PS coordination | | | using the NRI coordination | | | method. The same issue is also | | | valid if the UE handover from a | | | non-NRI coordinated area or no | | | NRI exist in handover from 2G/3G | | | network as NRI is not mandatory | | | in a non-pooled 2G/3G network. | +----------------------------------+----------------------------------+ | 5.2.6 GERAN GWCN, non-DTM, | No risk for incorrect CS/PS | | combined update procedures | coordination | +----------------------------------+----------------------------------+ | 5.2.7 UTRAN/GERAN MOCN, no | **[Pool Centric:\ | | combined update procedures | ]{.underline}Risk for incorrect | | | CS/PS coordination as operators | | | are selected independently in | | | source RAN (PS operator) and | | | target RNC/BSS (CS operator).** | | | | | | **[Operator Centric:\ | | | ]{.underline}Risk for incorrect | | | CS/PS coordination as operators | | | are selected independently in | | | source RAN (PS operator) and | | | target RNC/BSS (CS operator).** | +----------------------------------+----------------------------------+ | 5.2.8 Pool Centric: PS Handover | There are no CS/PS coordination | | to UTRAN or GERAN with DTM | issues with this use case. | | support, user is SGs registered | | | in the target network, no change | | | of MSC pool | | +----------------------------------+----------------------------------+ | 5.2.9 Operator Centric: PS | There are no CS/PS coordination | | Handover to a UTRAN or GERAN | issues with this use case. | | with DTM support, user is SGs | | | registered in the target network | | +----------------------------------+----------------------------------+ | 5.2.10 UTRAN/GERAN MOCN, | No risk for incorrect CS/PS | | combined update procedures | coordination | +----------------------------------+----------------------------------+ | 5.2.11 UTRAN/GERAN GWCN, no | **Risk for incorrect CS/PS | | combined update procedures | coordination as operator | | | selection is made independently | | | by source RAN (PS operator) and | | | by target MSC (CS operator).** | | | | | | A further problem is that a UE | | | handover from LTE may not have a | | | valid Old LAI and Old TMSI thus | | | preventing CS/PS coordination | | | using the NRI coordination | | | method. The same issue is also | | | valid if the UE handover from a | | | non-NRI coordinated area or no | | | NRI exist in handover from 2G/3G | | | network as NRI is not mandatory | | | in a non-pooled 2G/3G network. | +----------------------------------+----------------------------------+ | 5.2.12 UTRAN/GERAN GWCN, | No risk for incorrect CS/PS | | combined update procedures | coordination. | +----------------------------------+----------------------------------+
## 6.3 Void
## 6.4 Identified Issues for CS fallback
Table 6.4-1: Identified Issues for CS fallback
+----------------------------------+----------------------------------+ | 5.4.1 Operator Centric: CS | **For the uncoordinated NRI | | fallback using redirect, user is | case, there will be | | SGs registered in the target | uncoordinated users.** These | | network | users will stay uncoordinated | | | since NRIs from the CS and PS | | (MOCN and GWCN, no combined | domains are considered | | update procedures) | coordinated in the target | | | network. | +----------------------------------+----------------------------------+ | 5.4.2 Operator Centric: CS | **For the uncoordinated NRI | | fallback using redirect, user is | case, call setups can fail | | not SGs registered in the target | because these users are directed | | network | to operator B as a result of the | | | CS/PS coordination process** , | | (MOCN and GWCN, no combined | except for the case of GWCN for | | update procedures) | the uncoordinated NRI case if | | | the same CN operator selection | | | criteria are not used in target | | | MSC and target SGSN. | +----------------------------------+----------------------------------+ | 5.4.3 Operator Centric: CS | There are no issues with this | | fallback using PS handover, user | use. | | is SGs registered in the target | | | network | | | | | | (MOCN and GWCN, no combined | | | update procedures) | | +----------------------------------+----------------------------------+ | 5.4.4 Operator Centric: CS | **For the uncoordinated NRI case | | fallback using PS handover but | call setups can fail because the | | not to the SGs registered | users are directed to operator B | | network | as a result of the CS/PS | | | coordination process.** These | | (MOCN and GWCN, no combined | users will also be CS/PS | | update procedures) | uncoordinated due to the CS/PS | | | coordination in the CS domain | | | and stay uncoordinated since | | | NRIs from the CS and PS domains | | | are considered coordinated in | | | the target network. | +----------------------------------+----------------------------------+ | 5.4.5 Pool Centric: CS fallback | **There will be uncoordinated | | using redirect to the SGs | users.** These users will stay | | registered MSC pool | uncoordinated until the next | | | pool change. | | (MOCN, no combined update | | | procedures) | | +----------------------------------+----------------------------------+ | 5.4.6 Pool Centric: CS fallback | **Call setups can fail because | | using redirect with change of | these users are directed to | | MSC pool\ | operator B as a result of the | | \ | CS/PS coordination process**. | | (MOCN, no combined update | All users will be CS/PS | | procedures) | coordinated. | +----------------------------------+----------------------------------+ | 5.4.7 Pool Centric: CS fallback | There are no issues with this | | using PS handover, no change of | use case. | | MSC pool | | | | | | (MOCN, no combined update | | | procedures) | | +----------------------------------+----------------------------------+ | 5.4.8 Pool Centric: CS fallback | **Call setups can fail because | | using PS handover, change of MSC | the users are directed to | | pool | operator B as a result of the | | | CS/PS coordination process.** | | (MOCN, no combined update | These users will be CS/PS | | procedures) | uncoordinated and stay | | | uncoordinated until the next | | | pool change. | +----------------------------------+----------------------------------+
## 6.5 Summary of identified issues
Table 6.5-1: Summary of identified issues
+----------------------------------+----------------------------------+ | 5.5.1 PLMN selection at handover | No issues have been identified | | to GERAN based on UE capability | | +----------------------------------+----------------------------------+ | 5.5.2 PLMN selection at handover | No issues have been identified | | from E-UTRAN to UTRAN based on | | | UE capability | | +----------------------------------+----------------------------------+ | 5.5.3.2 PLMN selection at | **Risk for incorrect CS/PS | | concurrent CS and PS handover | Coordination** | | from UTRAN/GERAN to UTRAN, based | | | on UE capability, MOCN, | Risk of change of serving PLMN | | non-combined update procedure | | +----------------------------------+----------------------------------+ | 5.5.3.3 PLMN selection at | No issues have been identified | | concurrent CS and PS handover | | | from UTRAN/GERAN to UTRAN, based | Risk of change of serving PLMN | | on UE capability, MOCN, combined | | | update procedure | | +----------------------------------+----------------------------------+ | 5.5.3.4 PLMN selection at | **Risk for incorrect CS/PS | | concurrent CS and PS handover | Coordination** | | from UTRAN/GERAN to UTRAN, based | | | on UE capability, GWCN, | Risk of change of serving PLMN | | non-combined update procedure | | +----------------------------------+----------------------------------+ | 5.5.3.5 PLMN selection at | No issues have been identified | | concurrent CS and PS handover | | | from UTRAN/GERAN to UTRAN, based | Risk of change of serving PLMN | | on UE capability, GWCN, combined | | | update procedure | | +----------------------------------+----------------------------------+ | 5.5.3.6 PLMN selection at PS | **Risk for incorrect CS/PS | | handover from UTRAN/GERAN to | Coordination** | | UTRAN, based on UE capability, | | | MOCN, non-combined update | Risk of change of serving PLMN | | procedure | | +----------------------------------+----------------------------------+ | 5.5.3.7 PLMN selection at PS | No issues have been identified | | handover from UTRAN/GERAN to | | | UTRAN, based on UE capability, | Risk of change of serving PLMN | | MOCN, combined update procedure | | +----------------------------------+----------------------------------+ | 5.5.3.8 PLMN selection at PS | **Risk for incorrect CS/PS | | handover from UTRAN/GERAN to | Coordination** | | UTRAN, based on UE capability, | | | GWCN, non-combined update | Risk of change of serving PLMN | | procedure | | +----------------------------------+----------------------------------+ | 5.5.3.9 PLMN selection at PS | No issues have been identified | | handover from UTRAN/GERAN to | | | UTRAN, based on UE capability, | Risk of change of serving PLMN | | GWCN, combined update procedure | | +----------------------------------+----------------------------------+ | 5.5.3.10 PLMN selection at CS | Temporarily incorrect CS/PS | | handover from UTRAN/GERAN to | Coordination | | UTRAN, based on UE capability, | | | MOCN, non-combined update | Risk of change of serving PLMN | | procedure | | +----------------------------------+----------------------------------+ | 5.5.3.11 PLMN selection at CS | Temporarily incorrect CS/PS | | handover from UTRAN/GERAN to | Coordination | | UTRAN, based on UE capability, | | | MOCN, combined update procedure. | Risk of change of serving PLMN | +----------------------------------+----------------------------------+ | 5.5.3.12: PLMN selection at CS | Temporarily incorrect CS/PS | | handover from UTRAN/GERAN to | Coordination | | UTRAN, based on UE capability, | | | GWCN, non-combined update | Risk of change of serving PLMN | | procedure | | +----------------------------------+----------------------------------+ | 5.5.3.13: PLMN selection at CS | Temporarily incorrect CS/PS | | handover from UTRAN/GERAN to | Coordination | | UTRAN, based on UE capability, | | | GWCN, combined update procedure | Risk of change of serving PLMN | +----------------------------------+----------------------------------+
## 6.6 Identified Issues for concurrent CS and PS Handover
Table 6.6-1: Identified Issues for concurrent CS and PS Handover
* * *
5.6.1 Concurrent CS and PS Handover from UTRAN/GERAN to UTRAN/GERAN, MOCN, no
combined update procedure **Risk for incorrect CS/PS coordination when going
idle in CS domain as the UE makes a LAU with MOCN redirection incl. CS/PS
coordination. But for the PS domain the UE has due to previous RAU already
been registered in the PS domain.** 5.6.2 Concurrent CS and PS Handover from
UTRAN/GERAN to UTRAN/GERAN, MOCN, combined update procedure No risk for
incorrect CS/PS coordination 5.6.3 Concurrent CS and PS Handover from
UTRAN/GERAN to UTRAN/GERAN, GWCN, no combined update procedure **Risk for
incorrect CS/PS coordination after going to idle mode in the CS domain as the
UE will use the Common PLMN when sending the LAU Request. Selection of CS
operator in the target GWCN MSC node can then not be based on the PLMN as that
is a common PLMN.** 5.6.4 Concurrent CS and PS Handover from UTRAN/GERAN to
UTRAN/GERAN, GWCN, combined update procedure No risk for incorrect CS/PS
coordination.
* * *
## 6.7 Identified Issues for cell reselection
Table 6.7-1: Identified Issues for cell reselection
+----------------------------------+----------------------------------+ | 5.7.1 Operator Centric: Cell | **For uncoordinated NRIs, there | | reselection to UTRAN or GERAN, | will be uncoordinated users.** | | user is SGs registered in the | These users will stay | | target network\ | uncoordinated since NRIs from | | \ | the CS and PS domains are | | (MOCN and GWCN, no combined | considered coordinated in the | | update procedures) | target network. | +----------------------------------+----------------------------------+ | 5.7.2 Operator Centric: Cell | For uncoordinated NRIs, the | | reselection to UTRAN or GERAN, | operator may change. | | user is not registered in the CS | | | domain of the target network | **In case of GWCN for the | | | uncoordinated NRI case, if the | | (MOCN and GWCN, no combined | same CN operator selection | | update procedures) | criteria are not used in target | | | MSC and target SGSN users may | | | become CS/PS uncoordinated.** | +----------------------------------+----------------------------------+ | 5.7.3 Pool Centric: Cell | **There will be uncoordinated | | reselection to UTRAN or GERAN, | users.** These users will stay | | user is SGs registered in the | uncoordinated until the next | | target network, no change of MSC | pool change. | | pool | | | | | | (MOCN, no combined update | | | procedures) | | +----------------------------------+----------------------------------+ | 5.7.4 Pool Centric: Cell | The operator may change. | | reselection to UTRAN or GERAN, | | | change of MSC pool | | | | | | (MOCN, no combined update | | | procedures) | | +----------------------------------+----------------------------------+
## 6.8 Identified Issues for redirection
Table 6.8-1: Identified Issues for redirection
+----------------------------------+----------------------------------+ | 5.8.1 Operator Centric: Redirect | **For uncoordinated NRIs, there | | to UTRAN or GERAN, user is SGs | will be uncoordinated users.** | | registered in the target network | These users will stay | | | uncoordinated since NRIs from | | (MOCN and GWCN, no combined | the CS and PS domains are | | update procedures) | considered coordinated in the | | | target network. | +----------------------------------+----------------------------------+ | 5.8.2 Operator Centric: Redirect | For uncoordinated NRIs, the | | to UTRAN or GERAN, user is not | operator may change. | | registered in the CS domain of | | | the target network | **In case of GWCN for the | | | uncoordinated NRI case, if the | | (MOCN and GWCN, no combined | same CN operator selection | | update procedures) | criteria are not used in target | | | MSC and target SGSN users may | | | become CS/PS uncoordinated.** | +----------------------------------+----------------------------------+ | 5.8.3 Pool Centric: Redirect to | **There will be uncoordinated | | UTRAN or GERAN, user is SGs | users.** These users will stay | | registered in the target | uncoordinated until the next | | network, no change of MSC pool | pool change. | | | | | (MOCN, no combined update | | | procedures) | | +----------------------------------+----------------------------------+ | 5.8.4 Pool Centric: Redirect to | The operator may change. | | UTRAN or GERAN, change of MSC | | | pool | | | | | | (MOCN, no combined update | | | procedures) | | +----------------------------------+----------------------------------+
## 6.9 Identified Issues for EUTRAN to UTRAN/GERAN mobility for SGs registered
and non-SGs registered users use case
Table 6.9-1: Identified Issues for EUTRAN to UTRAN/GERAN mobility for SGs
registered and non-SGs registered users use case
+----------------------------------+----------------------------------+ | 5.9.1 Operator Centric: SRVCC, | For uncoordinated PS-NRIs, there | | user is not SGs registered | will be CS/PS uncoordinated | | | users **and they will stay | | (MOCN and GWCN, no combined | uncoordinated since both CS- and | | update procedures) | PS-NRIs are assumed to be | | | coordinated**. | | | | | | **In case of GWCN for the | | | uncoordinated NRI case, if the | | | same CN operator selection | | | criteria are not used in source | | | RAN and target SGSN users may | | | become CS/PS uncoordinated.** | +----------------------------------+----------------------------------+ | 5.9.2 Operator Centric: PS | **For both coordinated NRIs and | | handover to UTRAN or GERAN with | for uncoordinated NRIs, there | | DTM support, user is not SGs | will be CS/PS uncoordinated | | registered | users.** They will stay | | | uncoordinated since NRIs are | | (MOCN and GWCN, no combined | assumed to be coordinated in the | | update procedures) | target network. | +----------------------------------+----------------------------------+ | 5.9.3 Operator Centric: PS | For both coordinated NRIs and | | handover to GERAN with no DTM | for uncoordinated NRIs, there | | support, user is not SGs | will be CS/PS uncoordinated | | registered | users. They will stay | | | uncoordinated since NRIs are | | (MOCN and GWCN, no combined | assumed to be coordinated in the | | update procedures) | target network. | +----------------------------------+----------------------------------+ | 5.9.4 Operator Centric: Redirect | For coordinated NRIs, there will | | and Cell reselection, user is | be CS/PS uncoordinated users. | | not SGs registered | They will stay uncoordinated | | | since NRIs are assumed to be | | (MOCN and GWCN, no combined | coordinated in the target | | update procedures) | network. | | | | | | For uncoordinated NRIs, there is | | | a CS/PS coordination procedure | | | in both domains so all users | | | will be CS/PS coordinated. There | | | may be a change of serving | | | operator. In case of GWCN for | | | the uncoordinated NRI case, if | | | the same CN operator selection | | | criteria are not used in target | | | MSC and target SGSN users may | | | become CS/PS uncoordinated. | +----------------------------------+----------------------------------+ | 5.9.5 Pool Centric: SRVCC, user | **If the target MSC is the same | | is not SGs registered | node as the \'MSC Server | | | enhanced for (v)SRVCC\' then | | (MOCN, no combined update | users become CS/PS | | procedures) | uncoordinated.** | | | | | | **If the target MSC is not the | | | same node as the MSC Server | | | enhanced for (v)SRVCC\' there | | | will be CS/PS uncoordinated | | | users during the call, but | | | coordinated after the call | | | ends.** The operator may change. | | | | | | **In case of GWCN for the | | | uncoordinated NRI case, if the | | | same CN operator selection | | | criteria are not used in source | | | RAN and target SGSN users may | | | become** **CS/PS | | | uncoordinated.** | +----------------------------------+----------------------------------+ | 5.9.6 Pool Centric: PS handover | **There will be CS/PS | | to UTRAN or GERAN with DTM | uncoordinated users.** These | | support, user is not SGs | users will stay uncoordinated | | registered | until the next pool change. | | | | | (MOCN, no combined update | | | procedures) | | +----------------------------------+----------------------------------+ | 5.9.7 Pool Centric: PS handover | **There will be CS/PS | | to GERAN with no DTM support, | uncoordinated users.** These | | user is not SGs registered | users will stay uncoordinated | | | until the next pool change. | | (MOCN, no combined update | | | procedur | | | | | | es) | | +----------------------------------+----------------------------------+ | 5.9.8 Pool Centric: Redirect or | The operator may change. | | Cell reselection, user is not | | | SGs registered | | | | | | (MOCN, no combined update | | | procedures) | | +----------------------------------+----------------------------------+
## 6.10 Identified Issues for PS Attach after CS mobility use case
Table 6.10-1: Identified Issues for PS Attach after CS mobility use case
+----------------------------------+----------------------------------+ | 5.10 PS Attach after CS mobility | UE has valid TMSI and non-valid | | | P-TMSI prior to entering the | | | target network. For both | | | coordinated and non-coordinated | | | NRIs configured network, the PS | | | domain registration at target | | | network may lead to CS/PS being | | | uncoordinated. | | | | | | **Pool centric:** | | | | | | Risk for incorrect CS/PS | | | coordination as operator | | | selection is made independently | | | by source RAN (CS operator) and | | | by target BSS (PS operator). | | | These users will stay | | | uncoordinated until the next | | | pool change. | | | | | | **Operator Centric:** | | | | | | These users will stay | | | uncoordinated since NRIs from | | | the CS and PS domains are | | | considered coordinated in the | | | target network. | +----------------------------------+----------------------------------+
# 7 Solutions
## 7.1 Alternative Solution #1: CS/PS coordination in the RAN based on old
LAI/RAI/NRI for the operator-centric approach
### 7.1.1 Description of Solution #1
The CS/PS coordination procedure in RAN is extended to allow the RNC/BSC to
base the CS/PS coordination process not only on a deterministic IMSI hash, but
also on the combination of the old LAI (for the CS domain), old RAI (for the
PS domain) and the associated NRI. To make this possible, these parameters
would have to be communicated to the RAN from a CN operator when CS/PS
coordination is initiated (i.e. together with the IMSI in the Reroute Command
with CS/PS coordination flag set).
RAN would have a local configuration to determine, from the signalled
parameters referred to above which operator actually served in source network
before the mobility event took place. It can then route the registration
message to the same CN operator as was serving the UE previously. This CN
operator can then accept the user since it knows that CS/PS coordination has
already been performed by the RAN. In practice, this means that the outcome
for all the operator-centric uncoordinated NRI cases in the present document
will be the same as if for the operator-centric NRI coordinated cases.
The old LAI/old RAI and associated NRI would be added to the Redirection
Indication in RANAP (clause 9.2.3.36 of TS 25.413 [5]):
**9.2.3.36 Redirection Indication**
This IE is used by a CN to request rerouting by the RNC to another CN
operator. It is only used in MOCN configuration for network sharing non-
supporting UEs.
+---------+---------+-------+---------+---------+---------+---------+ | I | P | Range | IE type | Se | Crit | A | | E/Group | resence | | and | mantics | icality | ssigned | | Name | | | re | desc | | Crit | | | | | ference | ription | | icality | +---------+---------+-------+---------+---------+---------+---------+ | Initial | M | | 9.2.3.5 | The | YES | ignore | | NAS-PDU | | | | initial | | | | | | | | NAS-PDU | | | | | | | | r | | | | | | | | eceived | | | | | | | | from UE | | | +---------+---------+-------+---------+---------+---------+---------+ | Reject | M | | ENU | This IE | YES | ignore | | Cause | | | MERATED | lists | | | | Value | | | | cause | | | | | | | (PLMN | values | | | | | | | not | which | | | | | | | a | meaning | | | | | | | llowed, | is | | | | | | | l | defined | | | | | | | ocation | in TS | | | | | | | area | 24.008 | | | | | | | not | [8] | | | | | | | a | with | | | | | | | llowed, | the | | | | | | | roaming | ex | | | | | | | not | ception | | | | | | | allowed | of | | | | | | | in this | \"CS/PS | | | | | | | l | coord | | | | | | | ocation | ination | | | | | | | area, | req | | | | | | | no | uired\" | | | | | | | s | that | | | | | | | uitable | will | | | | | | | cell in | never | | | | | | | l | be | | | | | | | ocation | fo | | | | | | | area, | rwarded | | | | | | | GPRS | to the | | | | | | | s | UE. | | | | | | | ervices | | | | | | | | not | | | | | | | | allowed | | | | | | | | in this | | | | | | | | PLMN, | | | | | | | | CS/PS | | | | | | | | coord | | | | | | | | ination | | | | | | | | re | | | | | | | | quired, | | | | | | | | | | | | | | | | ..., | | | | | | | | | | | | | | | | Network | | | | | | | | f | | | | | | | | ailure, | | | | | | | | Not | | | | | | | | aut | | | | | | | | horized | | | | | | | | for | | | | | | | | this | | | | | | | | CSG) | | | | +---------+---------+-------+---------+---------+---------+---------+ | NAS | O | | 9 | | YES | ignore | | S | | | .2.3.34 | | | | | equence | | | | | | | | Number | | | | | | | +---------+---------+-------+---------+---------+---------+---------+ | Pe | O | | 9.2.3.1 | | YES | Ignore | | rmanent | | | | | | | | NAS UE | | | | | | | | I | | | | | | | | dentity | | | | | | | +---------+---------+-------+---------+---------+---------+---------+ | Old LAI | O | | x.x.x.x | | ... | ... | +---------+---------+-------+---------+---------+---------+---------+ | Old RAI | O | | x.x.x.x | | ... | ... | +---------+---------+-------+---------+---------+---------+---------+ | NRI | O | | x.x.x.x | | ... | ... | +---------+---------+-------+---------+---------+---------+---------+
The RAN uses the PLMN information of the old LAI/RAI to determine the source
operator. If the source network is a shared network with only a Common PLMN or
the UE is a non-supporting UE in the source network, the RAN must also take
into account the NRI value to determine the source operator. Note that in this
case NRIs must be aligned and \"coordinated\" within the source shared network
otherwise that network would not operate correctly - thus it is possible for
the target RAN to determine the source operator using the Common PLMN and the
NRI - it just requires additional information regarding the NRI split of the
source network. For other cases, the NRI would only be used to route the
registration message back to the same node (if possible) so that unnecessary
context transfers can be avoided.
A RAN not supporting this extension would just perform the CS/PS coordination
based on the IMSI hash as before so there are no backwards compatibility
issues with an updated core network but a non-updated RAN. The core network
also does not expect anything special as part of the signalling from the RAN
based on this extension. In case the old LAI/RAI and associated NRI come from
a network that is not part of the shared network or partner networks (as
determined by the RAN using its local configuration), the CS/PS coordination
process would simply revert to the deterministic IMSI hash. Any initial attach
messages should be subjected to the deterministic IMSI hash in order to
increase the likelihood that users are CS/PS coordinated. Since the CN node
can determine whether the registration message is an initial attach message,
it can just opt to not include the old LAI/RAI and NRI in the redirection
indication, triggering an IMSI-hash based CS/PS coordination in the RAN or it
can be left to the RAN to recognize non-partner networks.
As an example how the approach works, we consider the PSHO procedure with non-
coordinated NRIs.
Figure 2.1-1: PS handover to UTRAN/GERAN with DTM in the operator-centric
approach with non-coordinated NRIs. The CS/PS coordination in the RAN is
allowed to take old LAI and old NRI in to account
1\. PS handover is performed by the source network to operator A in the shared
network.
2\. The UE performs a Routing Area Update Request towards the network. The RAN
sends the signalling message towards the SGSN of operator A since there
already is an existing signalling connection towards this node.
3\. The SGSN of operator A accepts the user and sends a Routing Area Update
Accept message to the UE. The user is now served by operator A in the PS
domain.
4\. a) The UE performs a Location Updating Request in the target network.
b) The RAN bases the routing of the message on the NRI provided by the UE.
Since the NRIs are not coordinated between the source and target network, this
may lead to the RAN routing the message towards the \"wrong\" operator, in
this case operator B.
c) The RAN sends the Location Updating Request to an MSC of operator B.
5\. The MSC of operator B determines (e.g. by examining the old LAI and NRI
provided by the UE) that this user shall be subjected to CS/PS coordination.
6\. The MSC of operator B sends a Reroute command with a CS/PS coordination
indication, including the IMSI, old LAI and old NRI (as provided by the UE) of
the user to the RAN.
7\. Instead of using the deterministic IMSI hash, the RAN maps the old LAI and
old NRI into an appropriate operator to forward the Location Updating Request
message towards. This mapping is done in the RAN based on local configuration.
Mappings between the old NRIs and the NRIs in the target network for a
specific operator can be used by the RAN to send the message to the same node
(of possible). The message is forwarded to an MSC of operator A.
8\. The RAN forwards the registration message to the core network operator
determined in step 7.
9\. The MSC from operator A can now accept the user since it knows CS/PS
coordination has been performed.
10\. The MSC of operator A sends a Location Updating Accept message to the UE.
The UE is now served by operator A in the CS domain and is therefore CS/PS
coordinated, keeping the same serving operator as in the source network.
Thus, with a very small change to the signalling, we remove the problem of
non-coordinated NRIs since the target network can handle this case just like
the coordinated NRI case. The local configuration needed in the RAN to just
determine the operator that served the user in the source network is limited,
in fact, if the source network is non-shared only an analysis of the PLMN-id
of the old LAI/RAI would be needed (and thus no configuration needed at all).
This would, however, no enable the RAN to route the registration message back
to the same core node and thereby reduce the number of context transfers - if
this is desirable a mapping between NRIs in the target and the source network
is needed as well. Strictly speaking, for this scenario, it could be viewed as
an optimization, CS/PS coordination would be achieved anyway. If the source
network uses a Common PLMN-id only or the UE was a non-supporting UE in the
source network, an analysis of the PLMN-id in the old LAI/RAI is not
sufficient and the NRI mapping is needed in order to determine the serving
operator in the source network.
### 7.1.2 Evaluation of Solution #1
The described approach addresses many but not all of the operator-centric
scenarios with non-coordinated NRIs in the sense that the outcome of the CS/PS
coordination process will be the same as if the NRIs were coordinated in the
scenarios. The limitation of the operator-centric approach to handle cases in
which users are not CS/PS coordinated in the source network are not removed by
this solution, including the case when the UE is registered in one domain
only, since in these scenarios there will be CS/PS uncoordinated users even if
operators can coordinate NRIs. The general assumption for all operator-centric
approaches; the limitation that the source network at handover must select a
target operator with a result that is equal to an operator selection performed
by the target shared network is not removed by this solution.
This solution is not applicable to any GWCN scenarios since they do not make
use of the redirect functionality. By implementing the same local
configuration for determining the correct serving operator based on old
LAI/old RAI and NRIs in the core nodes in a GWCN, there are no issues for
these cases either with non-coordinated NRIs.
This solution is not applicable to any of the pool centric scenarios.
For Gs-enabled networks, the approach works the same. The same local
configuration needs to be in the target network since it cannot be guaranteed
that UEs always use combined procedures. If combined procedures are used, the
approach works for the initial routing of the message for the PS domain.
## 7.2 Alternative Solution #2: HSS based query
### 7.2.1 Description of Solution #2
The starting point is that the UE has a valid NRI for one of the domain due to
previous registration (e.g, the user has selected the operator manually
earlier at 3G network for CS and disabled the PS function before moving to the
2G MOCN shared area).
The principle is that when the CN is performing Update Location Request to
HLR, HLR will indicate if the current registering PLMN is mismatching with the
other registered domain and optionally return back to the CN the PLMN ID of
the other registered domain. This information can then be used by RAN to find
the correct domain.
The following figure shows a high level call flows with this solution:
Figure 7.2.1-1: CS/PS coordination using HLR info
1\. UE has valid NRI to point to the CS core network (CS CN 1). The CS PLMN
stored in the HLR is CS CN1.
2\. UE performs a LAU as it enters into a new LA.
3\. RAN checks the NRI and routes to the corresponding MSC (CS CN 1) as the
NRI is valid. No RAF is sent here
4\. Normal LAU processing.
5\. UE starts the PS attach or RAU with no valid NRI.
6\. PS CN node selection is done e.g. with round robin as normally since there
is no valid NRI in P-TMSI, and RAN node indicates need for rerouting as
normally (RAF-Redirect Attempt Flag included).
7\. PS CN -X tries to register this UE by sending Update Location Request to
HLR.
8\. HLR checks the last registered CS domain and noticed that the PS domain
does not match with the registered CS domain PLMN. It continues to accept this
registration but send the new indication to PS CN-X that CS/PS is mis-matched,
and optionally the other registered PLMN ID).
9\. Because of \"CS/PS mis-matched\" flag, it asks the RAN to perform re-
direction to another PS CN node. It sends the other registered PLMN ID if
received.
10\. RAN node, uses the \"other registered PLMN ID\" information to find the
correct PS node (PS CN 1) for PS registration. If the \"other registered PLMN
ID \" is not received, then this step 6 to 9 will continue until the correct
PS CN node is selected.
11\. Normal PS Attach or RAU procedure continues.
This solution works the same way if the PS is registered previously and CS
domain is being registered later.
In the HLR, the logic of sending \"CS/PS mis-matched\" flag can be based on
the following:
Figure 7.2.1-2: logic on sending Mis-match flag in HLR
In normal state, the CS/PS PLMN are coordinated. When UE enters a new visited
network, the first ULR will not cause the HLR to send the \"CS/PS Mis-
matched\" flag as HLR will process this ULR like currently does today and then
enter into \"mis-match checking state\". In this state, the HLR will check the
PLMN for the other domain when ULR is received. If it is not the same then HLR
will include mis-match flag and return back to \"mis-match checking state\".
If the PLMN ID matches the other domain then CS/PS is coordinated and it
returns to CS/PS coordinated stated.
### 7.2.2 Evaluation of Solution #2
The solution impacts MSC, SGSN, BSC, RNC, and HLR.
For BSC/RNC, the impact is only due to the support of the optional \"other
registered PLMN ID\" information from the core network.
If this is supported:
\- BSC/RAN selects the next CN node to register based on the received \"other
registered PLMN ID\".
For MSC/SGSN:
\- When receives the \"CS/PS mis-matched\" flag from HLR, it asks the RAN node
to reselect other CN node (PLMN).
\- Forward the \"other registered PLMN ID\" is received.
For HLR:
\- Support the sending of new flag and optionally the \"other registered PLMN
ID\" info, and the associated logic to send this info to registering CN node.
Other considerations:
1\. This solution impacts the HPLMN of the roamer. It requires HPLMN to change
the HSS\' logic to support the VPLMN network sharing issue.
2\. From solution deployment standpoint, requirement HPLMN\'s support to solve
VPLMN network sharing issue may deem unrealistic.
3\. How this solution will work in conjunction with other solution(s) to solve
other uses cases listed in this TR is FFS.
4\. How does this solution handle the case when RAU and LAU is being done at
the same time is FFS.
## 7.3 Alternative Solution #3: Storing IMSI/PLMN info in RAN
### 7.3.1 Description of Solution #3
The starting point is that the UE has a valid NRI for one of the domain due to
previous registration (e.g, the user has selected the operator manually
earlier at 3G network for CS and disabled the PS function before moving to the
2G MOCN shared area).
The principle is that the BSC will query the registered domain for the
IMSI/PLMN pair and this information is stored internally for CS/PS
coordination purpose with the other domain.
The following figure shows a high level call flows with this solution:
Figure 7.3.1-1: CS/PS coordination using stored IMSI/PLMN info
1\. UE has valid NRI to point to the CS core network (CS CN 1).
2\. UE performs a LAU as it enters into a new LA.
3\. RAN checks the NRI and routes to the corresponding MSC (CS CN 1). It
requests CS CN1 for IMSI/PLMN pair info with a new flag - IMSI/PLMN Request.
As an option, RAN can only send this flag if it can determine that the UE is
new in this area (i.e. checking the \"old LAI\" against its internal LA/RA
configuration).
4\. When LAU with the new flag and valid NRI is received by CS CN 1, CS CN 1
would send existing RANAP/BSSAP message Common ID with the IMSI of the
subscriber and Selected PLMN ID (both IEs exist already in the standardized
message). RAN then store this IMSI/PLMN info locally.
5\. CS CN 1 continues to process the LAU as normal and LAU accept is return to
UE via RAN.
6\. UE starts the PS attach or RAU with no valid NRI.
7\. PS CN node selection is done e.g. with round robin as normally since there
is no valid NRI in P-TMSI, and RAN node indicates need for rerouting as
normally (RAF-Redirect Attempt Flag included).
8\. PS CN -X will based on Redirect Attempt Flag and missing IMSI in the
initial message require CS/PS coordination as normally, and gives the IMSI to
RAN node at the same time.
9\. When IMSI is received from PS CN-X as part of CS/PS coordination, then RAN
node would based on the stored IMSI - Selected PLMN ID route the subscriber to
the same PS operator (PS CN 1) as where the CS was routed
10\. Normal PS Attach or RAU procedure continues.
This solution works the same way if the PS is registered previously and CS
domain is being registered later.
### 7.3.2 Evaluation of Solution #3
The solution impacts MSC, SGSN, BSC, and RNC.
For BSC/RNC:
\- Sends IMSI/PLMN request flag to PS/CS Core (or optionally based on old
LAI/RAI checking).
\- Store the IMSI/PLMN info from CS/PS Core.
\- Query the stored info to determine the proper CS/PS domain for
registration.
\- Remove the IMSI/PLMN info when it has determined that the UE has registered
to both PS/CS domain, or based of implementation (e.g. pre-define period).
For MSC/SGSN:
\- When receives a IMSI/PLMN Request flag, it needs to respond back to RAN via
a Common ID message with IMSI/PLMN pair info.
Other considerations:
1\. This solution requires the RAN to store the IMSI/PLMN info when UE is in
IDLE state.
2\. How long should this data be stored and what if the UE never performs the
other domain registration via this same RAN is FFS.
3\. How this solution will work in conjunction with other solution(s) to solve
other uses cases listed in this TR is FFS (e.g. handover, DTM, etc.).
4\. How does this solution handle the case when RAU and LAU is being done at
the same time is FFS.
## 7.4 Alternative Solution #4
### 7.4.1 Description of Solution #4
#### 7.4.1.1 Introduction
As been analysed in clause 5 and 6, for a number of mobility scenarios it has
been found that existing specification do not handle/solve the CS/PS
coordination. Nor does the existing specification, for some of the analysed
scenarios, guarantee that a selection of target network operator done by
source network is respected during and after CS Handover and SRVCC. These
problems have been found irrespective of if the \'Operator centric\' or the
\'Pool centric\' method is applied.
Common for the above possible incorrect CS/PS coordination is that the source
network (mostly source RAN, but at SGs registration source CN) selects the
target operator for one of the domains while target operator for the other
domain is selected by the target RAN or in case of GWCN by target CN.
Change of target network operator occurs due to lack of synchronisation
between the UE and the target network during CS Handover or SRVCC.
To solve the above issues, a solution is needed where the target RAN or, in
case of GWCN, target CN selects the same operator for the idle mode domain as
was already selected for the connected mode domain. The solution needs also to
provide a mechanism that makes the UE stick to the selected target network
operator.
Below follows a proposal to a solution of the issues. First is presented the
general principles of the proposal followed by how these are implemented in
the four basic mechanisms, LAU and Attach/RAU in MOCN, and LAU and Attach/RAU
in GWCN. The last parts presents how these basic mechanisms are applied in the
PS Handover, CS Handover, concurrent CS and PS Handover, CSFB and SRVCC
procedures.
#### 7.4.1.2 General principles of the proposal
The proposed solution is based on four steps when receiving idle mode
signalling such as Attach, RAU or LAU from a UE.
1) Firstly the RAN node will check if the UE, for the addressed (CS or PS)
domain, is already registered in a CN node and if so then of course use that
node. Same as in legacy.
2) Secondly for UEs that are not registered in the addressed domain, the RAN
node will check if the UE is already registered in the non-addressed domain.
3) Thirdly for UEs that are registered in the non-addressed domain the serving
operator will be obtained and used when registering the UE in the addressed
domain.
4) Finally for UEs that are not registered in the non-addressed domain,
selection of CN node and operator for the addressed domain is based on either
the Operator centric method or the Pool centric method. Although IMSI is
already received it shall only be used at initial routing if the Pool centric
method is applied. Otherwise, using IMSI at initial routing will bypass the
Operator centric method.
By use of these four steps the same target operator will be used in the CS
domain and in the PS domain.
Below are described the four basic mechanisms that are supporting the general
principles outlined above. It should be noted that each of these mechanisms
are used regardless which procedure that is causing their respective
initiation.
##### 7.4.1.2.1 Attach/RAU in MOCN
The below figure shows how the proposed solution achieves CS/PS coordination
in MOCN when receiving an Attach or RAU request. The Attach or RAU request may
have been preceded by CS Handover, concurrent CS and PS Handover (for RAU),
CSFB or SRVCC. A RAU included in or following PS Handover will always be
routed to the SGSN where the UE is already registered.
Figure 7.4.1.2.1-1: CS/PS coordination at Attach/RAU in MOCN
1\. When the target RAN node receives an Attach/RAU Request it routes the
request to an available SGSN. The request shall include the Redirect Attempt
flag (as in legacy) and a new parameter indicating that Operator centric
method shall not be invoked by the CN. If the Attach/RAU includes a PS-NRI
with a direct match to an SGSN then that SGSN is selected by the RAN node,
illustrated by scenario A in the figure. If the PS-NRI is absent or is not
directly matching any SGSN, an SGSN suitable to retrieve UE information could
be selected randomly.
2\. If the UE is served by the selected SGSN then the UE shall be kept and a
\'Redirection Completed\' indication shall be included in the response to the
RAN node. The procedure ends.
3\. If the UE is not served by the selected SGSN then \'Redirection
Indication\' with \'CS/PS coordination Required\' and IMSI shall be included
in the response to the RAN node (as in legacy). Note that the Operator centric
method shall not be invoked by the SGSN at this stage, see step 1.
NOTE: The new indicator in step 1 can be included in the response to indicate
to the RAN node to separate states i.e. steps 1 or 6.
4\. The target RAN shall send requests to all connected MSCs to inquire if the
UE is served by any of the MSCs and then retrieve the PLMN of the selected
(serving) target operator.
5\. If the UE is served by one of the connected MSCs, illustrated by scenario
B in the figure, then the RAN node shall select an SGSN from the operator
retrieved in step 4. The RAN node shall for this case not include the Redirect
Attempt flag when sending the LAU to the SGSN (thus inhibiting redirection).
6\. If the UE is not served by any of the connected MSCs, illustrated by
scenario C in the figure, then the RAN node shall include the Redirect Attempt
flag when sending the RAU to the selected SGSN. Selection of SGSN shall be
based upon the Operator or Pool centric method. Note that the selection shall
not be based upon IMSI when using the Operator centric method. Nor shall the
new parameter introduced in step 1 be included. Performing step 6 in this way
makes it possible to apply either Operator or Pool centric CS/PS coordination
in the SGSN.
7\. UE concludes the Attach/RAU procedure.
#### 7.4.1.3 PS Handover
During PS Handover the RAU execution enables synchronization of the PS-NRI in
the UE with the selected operator in the PS domain. The by source RAN selected
operator for the PS domain will thereby be kept, remains to select the same
operator for the CS domain.
For DTM while the PS domain is in connected mode a LAU request will be handled
as described in section A.1 for MOCN or as in A.2 for GWCN, thus selecting the
same operator for CS domain as is already selected for the PS domain.
For non-DTM and when the PS domain turn to idle mode a LAU request will be
handled as described in section A.1 for MOCN or as in A.2 for GWCN, thus
selecting the same operator for CS domain as is already selected for the PS
domain.
NOTE**:** A consequence of step 1) in section A.1 for MOCN or as in A.2 for
GWCN, is that at PS Handover into a shared network it is required that the
source network selects the same operator for PS as is already selected for CS
via a possible SGs registration. This is only required at PS Handover into a
target network where the UE is already SGs registered.
At combined update procedure target SGSN will select the operator for CS
domain, thus selecting the same operator for CS domain as is already selected
for the PS domain.
#### 7.4.1.4 CS Handover
During a CS call, for GSM with DTM or for WCDMA, a RAU request will be handled
as described in section 7.4.1.2.1 for MOCN or as in A.3 for GWCN, thus
selecting the same operator for PS domain as is currently in use in the CS
domain.
After the CS call is finished a LAU request will be handled as described in
section A.1 for MOCN or as in A.2 for GWCN, thus selecting the same operator
for CS domain as is already selected for the PS domain.
At combined update procedure the combined RA/LA Update RAU request will be
handled as described in section 7.4.1.2.1 for MOCN or as in A.3 for GWCN, thus
selecting the same operator for PS domain as is currently in use in the CS
domain.
For GSM without DTM then both LAU and RAU request will occur after the CS call
has ended and a new operator might be selected. If this is not desirable then
the Operator centric solution shall be applied (see section A.1 / 7.4.1.2.1
step 6 for MOCN or section A.2 / A.3 step 6 for GWCN).
At combined update procedure target SGSN will select the operator for CS
domain, thus selecting the same operator for CS domain as is already selected
for the PS domain.
#### 7.4.1.5 Concurrent CS and PS Handover
During PS Handover the RAU execution enables synchronization of the PS-NRI in
the UE with the selected operator in the PS domain. After the CS call is
finished a LAU request will be handled as described in section A.1 for MOCN or
as in A.2 for GWCN, thus selecting the same operator for CS domain as is
already selected for the PS domain.
At combined update procedure target SGSN will select the operator for CS
domain, thus selecting the same operator for CS domain as is already selected
for the PS domain.
#### 7.4.1.6 CSFB
At CSFB the UE will either appear in the CS domain in its previously
registered LA or in another LA. In the first case the UE is already registered
at the serving MSC/operator due to the previous SGs registration and a LAU is
not required. In the second case the UE shall do a LAU and will thereby get
registered at the serving MSC/operator in the new LA.
**[CSFB without PS Handover]{.underline}**
If the UE ends up in its already registered LA then the UE will be served by
the selected target MSC/operator and remains registered in that MSC also after
the call has ended. The RAU request will occur either directly (at CSFB to GSM
with DTM or to WCDMA) or after the CS call has ended (at CSFB to GSM without
DTM). Regardless, the RAU will be handled as described in clause 7.4.1.2.1 for
MOCN or as in A.3 for GWCN, thus selecting the same operator for PS domain as
is already selected for the CS domain.
If the UE ends up in a LA different to its registered LA then there is a risk
of changing operator when selecting operator at LAU. If this is not desirable
then the Operator centric solution shall be applied (see clause A.1 step 6 for
MOCN or clause A.2 step 6 for GWCN). The RAU request will occur either
directly (at CSFB to GSM with DTM or to WCDMA) or after the CS call has ended
(at CSFB to GSM without DTM). Regardless, the RAU will be handled as described
in clause 7.4.1.2.1 for MOCN or as in A.3 for GWCN, thus selecting the same
operator for PS domain as is already selected for the CS domain.
After the CS call is finished, at combined update procedure, the combined
RA/LA Update RAU request will be handled as described in clause 7.4.1.2.1 for
MOCN or as in A.3 for GWCN, thus selecting the same operator for PS domain as
is currently in use in the CS domain.
**[CSFB with PS Handover]{.underline}**
For CSFB with PS Handover into a shared network it is required that the source
network selects the same operator for the PS domain as is already selected for
CS via the SGs registration.
If the UE ends up in its already registered LAI then the UE will be served by
the selected target MSC/operator and remains registered at that MSC/operator
also after the call has ended. Selecting the same operator for PS domain as is
already selected for CS via the SGs registration will thus give a correct
CS/PS coordination.
If the UE ends up in a LAI different to its registered LAI then a LAU shall be
performed. The LAU request will be handled as described in clause A.1 for MOCN
or as in A.2 for GWCN, thus selecting the same operator for CS domain as is
already selected for the PS domain.
After the CS call is finished, at combined update procedure, target SGSN will
select the operator for CS domain, thus selecting the same operator for CS
domain as is already selected for the PS domain.
#### 7.4.1.7 SRVCC
TMSI reallocation performed by the \'MSC Server enhanced for (v)SRVCC\' is a
mandatory part of the SRVCC procedure unless the UE is already registered in
the MSC (due to SGs). The UE will thus get registered in the \'MSC Server
enhanced for (v)SRVCC\' and by that registered at the CS operator selected by
the source RAN.
**[SRVCC without PS Handover]{.underline}**
If the \'MSC Server enhanced for (v)SRVCC\' is the same node as the \'target
MSC\' then the UE remains registered in the selected target MSC/operator also
after the call has ended. For SRVCC to GSM without DTM the RAU request will
occur after the CS call is finished and will be treated as described in clause
7.4.1.2.1 for MOCN or as in A.3 for GWCN, thus selecting the same operator for
PS domain as is already selected for the CS domain.
After the CS call is finished, at combined update procedure, the combined
RA/LA Update RAU request will be handled as described in clause 7.4.1.2.1 for
MOCN or as in A.3 for GWCN, thus selecting the same operator for PS domain as
is currently in use in the CS domain.
If the \'MSC Server enhanced for (v)SRVCC\' and the \'target MSC\' are
different nodes then there is a risk of changing serving operator when
selecting operator at LAU after end of the CS call. This risk occur at SRVCC
to a target GSM network without DTM as the UE is not yet registered in the PS
domain. If this is not desirable then the Operator centric solution shall be
applied (see clause A.1 step 6 for MOCN or clause A.2 step 6 for GWCN).
For SRVCC to GSM with DTM or to WCDMA, a RAU request during the CS call will
be treated as described in clause 7.4.1.2.1 for MOCN or as in A.3 for GWCN,
thus selecting the same operator for PS domain as is currently in use in the
CS domain. After the CS call is finished a LAU request will be treated as
described in clause A.1 for MOCN or as in A.2 for GWCN, thus selecting the
same operator for CS domain as is already selected for the PS domain. After
the CS call is finished, at combined update procedure, target SGSN will select
the operator for CS domain, thus selecting the same operator for CS domain as
is already selected for the PS domain.
**[SRVCC with PS Handover]{.underline}**
For SRVCC with PS Handover the Target ID indicates the same selected operator
for both CS and PS domain. During PS Handover the RAU is used to synchronize
the PS-NRI in the UE with the selected operator in the PS domain. After the CS
call is finished a LAU request will be treated as described in clause A.1 for
MOCN or as in A.2 for GWCN, thus selecting the same operator for CS domain as
is already selected for the PS domain. After the CS call is finished, at
combined update procedure, target SGSN will select the operator for CS domain,
thus selecting the same operator for CS domain as is already selected for the
PS domain.
#### 7.4.1.8 Cell reselection
At cell reselection the UE performs both a LAU and a RAU request in that
order. The LAU request will be handled as described in clause A.1 for MOCN or
as in A.2 for GWCN. The RAU request will be handled as described in clause
7.4.1.2.1 for MOCN or as in A.3 for GWCN.
When using the Pool centric method CS/PS coordination is achieved but a new
operator might be selected.
When using the Operator centric method CS/PS coordination is achieved. For the
Operator centric method the serving operator is kept if both CS- and PS-NRI
are present and coordinated between source and target. For the general case of
non-coordinated NRIs in the operator centric approach, the serving operator
may change In case of no CS registration in source network, the serving
operator may change irrespectively of whether NRIs are coordinated or not..
At combined update procedure target SGSN will select operator for the CS
domain, thus CS/PS coordination is achieved. When using the Pool centric
method a new operator might be selected. When using the Operator centric
method the serving operator is kept only in case the PS-NRI is present and
coordinated between source and target network.
### 7.4.2 Evaluation of Solution #4
This solution is able to achieve CS/PS coordination for all scenarios of
clause 5, both for the operator centric deployment and the pool centric
deployment, and it also handles both MOCN and GWCN. For the case of non-
coordinated NRIs in the operator centric approach, the solution may lead to a
change of serving operator, for example in the cases of cell reselection and
redirect scenarios.
\- If the UE is registered at a location served by the shared network, there
is no change of operator (ref.: TS 23.251 [2] clause 4.2.4, 5.2, 5.2a, and
5.2b).
\- For the case when the UE enters the shared network in connected mode in one
domain and in idle mode in the other domain, the target RAN node may by node
internal logic perform CS/PS coordination and thus avoid to query the
connected mode domain.
CS/PS coordination is achieved but there is a risk of operator change in the
two scenarios of CS Handover to GERAN without DTM support and SRVCC to GERAN
without DTM support.
\- For CS Handover without DTM this is due to that there is no synchronisation
in the CS domain (no LAU during the call) and at the same time no RAU to
synchronise the PS domain. The LAU after the call is finished may then cause a
change of operator.
The risk of changing operator at CS Handover to GERAN without DTM can be
avoided by applying the Operator centric method for this case i.e. a
coordination of the CS-NRI allocated to the UE in the source network with CS-
NRIs used by the MSCs of the selected target operator.
\- For SRVCC without DTM the issue occur when the \"target MSC\" and the \"MSC
Server enhanced for (v)SRVCC\" are not the same node. For this case the UE
will not be synchronized with the \"target MSC\" but instead with the \"MSC
Server enhanced for (v)SRVCC\" (see TS 23.216). The LAU performed after the
call may cause a change of operator.
The risk of changing operator at SRVCC to GERAN without DTM can be avoided by
having support for the Sv interface in all MSCs in a shared network or as an
alternative applying the Operator centric method i.e. a coordination of the
CS-NRI provided by \"MSC Server enhanced for (v)SRVCC\" (at TMSI reallocation
during SRVCC) with CS-NRIs used by the MSCs of the selected target operator.
The proposed solution adds signalling from the RAN node to query nodes of the
opposite domain for a UE registration. The impact from this signalling is
however limited.
\- At step 1 the RAN node sends the UE request to a core node which based on
NAS layer information may be able to determine if the UE is registered by the
node. Scenario A in the figures applies when the UE is already registered at
current location. In that case there is no additional signalling.
This means that mobility within the shared network does not need to generate
additional signalling.
\- When the UE is not registered by the shared network, the flow continues as
either scenario B or scenario C as illustrated by figure 7.4.1.2.1-1.
## 7.5 Alternative Solution #5
### 7.5.1 Description of Solution #5
#### 7.5.1.1 Introduction
This proposal is in greater parts a merge of solution #1 and solution #4. In
addition the proposal includes a solution on how to keep serving operator at
cell reselection when the UE lacks registration in source CS domain.
As has been analysed in section 5 and 6, for a number of mobility scenarios it
has been found that existing specification do not handle/solve the CS/PS
coordination. These problems have been found irrespective of if the 'Operator
centric' or the 'Pool centric' methods (as currently described in TS23.251) is
applied. Nor does the existing specification, for some of the analysed
scenarios, guarantee that a selection of target network operator done by
source network is respected during some mobility procedures.
Common for the above possible incorrect CS/PS coordination is that the source
network (mostly source RAN, but at SGs registration source CN) selects the
target operator for one of the domains while target operator for the other
domain is selected by the target RAN or in case of GWCN by target CN.
Change of target network operator occurs due to lack of synchronisation
between the UE and the target network during CS Handover. Lack of
synchronisation occurs also when the UE in the source network is only
registered in either the CS domain (no data roaming) or the PS domain (in LTE
without SGs registration).
To solve the above issues, a solution is needed where the target RAN or, in
case of GWCN, target CN selects the same operator for the idle mode domain as
was already selected for the connected mode domain or that was selected in the
opposite domain [in the source network]{.underline}. The solution needs also
to provide a mechanism that makes the UE stick to the selected target network
operator.
Below follows a proposal to a solution of the issues. First is presented the
general principles of the proposal followed by a detailed proposal.
#### 7.5.1.2 General principles of the proposal
The proposed solution is based on the below steps when receiving idle mode
signalling such as Attach, RAU or LAU from a UE.
The flow of steps is executed in order and ended once an operator has been
selected:
1) First the RAN node checks if the UE, for the addressed (CS or PS) domain,
is already registered in a CN node, and if so then use that node and operator.
If the UE is roaming within the shared network the serving operator is kept as
stated in chapter 4.2.4 in TS 23.251. Otherwise the CN node provides the RAN
node with old LAI/RAI, CS/PS-NRI and indicating if UE is attaching. The
information makes it possible for the RAN node to conclude whether the UE is
roaming within an operator coordinated area as described in section 7.1 of
this document.\ An operator coordinated area is an area for which an old
LAI/CS-NRI (for the CS domain) and an old RAI/PS-NRI (for the PS domain) from
sharing partners networks can always be mapped to an operator in the shared
network, even if the NRIs themselves cannot be coordinated (as in Appendix A.1
in TS23.251).
2) For UEs that are roaming within an operator coordinated area and not
performing an initial attach the RAN node selects serving operator based on
the operator coordinated area in the addressed domain and forwards the
registration message to that operator.
3) If the UE is making an initial attach or if the UE is not coming from an
operator coordinated area, the RAN node checks if the UE is already registered
in the non-addressed domain, either in the shared target network or in the
MMEs belonging to the sharing operators as described in section 7.4 of this
document. If the UE is registered in the non-addressed domain then that
serving operator is used when registering the UE in the addressed domain.
4) Finally for UEs that still have not been allocated to an operator above,
selection of CN node and operator for the addressed domain is based on the
operator coordinated area if UE is roaming in such area and not performing an
initial attach, whereas for initial attach or not from operator coordinated
area the operator is determined based on IMSI analysis.
During the registration procedure the RAN node continuously optionally checks
if there is an ongoing registration in the non-addressed domain. If the
information from CN to RAN from either or both the CS or the PS domain
indicates that the UE is roaming within an operator coordinated area and not
performing an initial attach the serving operator is selected based on the
operator coordinated area. Otherwise the operator is determined based on IMSI
analysis. This may be used to optimize parallel registrations.
Step 1), 3) and 4) are enough to solve all issues in this TR.
By using step 1), 3) and 4), the same operator will be kept in target network
as in source network at roaming within an operator coordinated area.
Performing step 2) can be included to reduce the opposite domain inquiry.
When serving operator is selected based on the operator coordinated area this
must be applied for both CS and PS domain. Selecting serving operator based on
the operator coordinated area for one domain and selecting serving operator
based on IMSI analysis for the other domain may lead to incorrect CS/PS
coordination. If idle mode mobility from LTE to the shared network is
supported for UEs that are not SGs registered, it will be necessary to
retrieve registration information from MMEs otherwise serving operator may not
be kept or CS/PS coordination can not guaranteed.
#### 7.5.1.3 Detailed description of the proposal
Figure 7.5.1.3-1: Flow diagram for CSPS Coordination
A. When the target RAN node receives an idle mode signalling from a UE it
routes the request based on the NRI provided by the UE.
B. If the UE is served by the selected CN node (e.g. periodic updates or
mobility within a pool) then the UE shall be kept and a 'Redirection
Completed' indication shall be included in the response to the RAN node. It
shall also be possible for an operator to configure the CN node to accept a
user directly even if the user is not registered in the CN node. This would be
applicable when the user cannot be served by any of the other sharing
operators (for example for home subscribers of the operator of the CN node).
The procedure ends.
NOTE: As stated in TS 23.251, 4.2.4\ _After initial access to the shared
network the UE does not change to another available CN operator as long as the
selected CN operator is available to serve the UE\'s location. Only the
network selection procedures specified in TS 23.122 [4] may cause a
reselection of another available CN operator. Also the network does not move
the UE to another available CN operator, e.g. by handover, as long as the
selected CN operator is available to serve the UE\'s location. Furthermore the
UE does not change to another CN node as long as the selected CN node is
available to serve the UE\'s location._ \ \ When the UE is CS registered in a
shared network by an MME, this legacy behaviour applies also in a scenario
where the UE after an access and domain change appears in a different Location
Area in the shared network compared to the Location Area where the UE is
registered. This means that serving operator for the CS domain is kept at
CSFB.
C. If the UE is not served by the selected CN node then 'Redirection
Indication' with 'CS/PS coordination Required' and IMSI is included in the
response to the RAN node. Old LAI/CS-NRI (for the CS domain) or old RAI/PS-NRI
(for the PS domain) or an indication whether the UE is attaching in the
current domain, is also included.
D. By use of the information received in step C the RAN node is able to
conclude if the UE is
a) coming from an operator coordinated area, or
b) coming from an area that is not an operator coordinated area, or if the UE
is making an initial attach
This information will be used in later steps to take appropriate actions
depending on options implemented in the network.
E. If the result is a) in the analysis in step D, the RAN node selects a core
node of the identified operator and forwards the message. The procedure ends.
NOTE: In case the UE in the source network is registered in both CS and PS
domains in an operator coordinated area, the serving operator in source
network is kept in both domains and CS/PS coordination is achieved.\ \
However, when applying step E and if the UE lacks CS registration in the
source network (as with source LTE and no SGs registration, the issue
described in Section 5.9) then achieving a successful CS/PS coordination and
keeping serving operator will be dependent upon the PS domain registration.
For that reason it becomes necessary to check if the UE is registered in the
PS domain (see step F) and if so use that operator also in the CS domain. For
example at cell reselection from a source LTE to a target GSM network without
DTM there will, during CS registration, be no registration in the PS domain
within the shared target network. Therefore a check must also been done in all
possible source networks of the sharing operators otherwise users will become
CS/PS uncoordinated. The lack of CS registration in the source network implies
an initial attach in the target network and therefore step E will not be
performed but rather step F below.\ \ A similar situation can occur when the
UE lacks PS registration (as with no Data roaming for the UE) but for normal
cases the UE is already registered in the target shared network in the CS
domain when the PS registration occur. Checking in the source networks is then
not necessary.
F. If step E is not applied, or if an operator is not selected in step E the
RAN node sends requests to all connected CN nodes or by a possible
optimization to one CN node per operator in the opposite domain in the target
shared network, to inquire if the UE is served by the opposite domain. To not
risk a change of serving operator for cases described in step E (i.e. when
attaching in CS) then it is also necessary to check in the source MMEs, of the
sharing operators, if the UE is registered in the PS domain. Checking the
source MMEs is done by relaying requests from target RAN via the CN in the
target shared network. However in deployments where these cases are not
applicable (e.g. always CS registration in source networks) or when it is
sufficient to achieve CS/PS coordination, then the source networks need not to
be checked.
NOTE: Checking CN nodes in the opposite domain in the target shared network is
also used at e.g. CS and PS Handover when not coming from an operator
coordinated area. For such cases the idle mode domain registration needs to
select the same operator as is already in use for the connected domain.
> If the UE is registered in the opposite domain then the RAN node retrieves
> the PLMN of the selected (serving) target operator and selects the same
> operator for the current domain. If the UE is not registered in the opposite
> domain then the RAN node selects operator based on an IMSI analysis.
G. The UE is registered in a CN node belonging to the selected operator. The
procedure ends.
If during execution of step E or F, a registration in the opposite domain
occurs, then the RAN node can optionally make the selection as follows:
\- If the UE for the opposite domain comes from an operator coordinated area
and not performing an initial attach, then the RAN node, for both domains,
selects serving operator based on this information from the opposite domain.
\- If the UE for the opposite domain does not come from an operator
coordinated area or is attaching, but the UE for the current domain:
> comes from an operator coordinated area and not performing an initial attach
> , then the RAN node, for both domains, selects serving operator based on
> this information from the current domain.
> does not come from an operator coordinated area or is attaching then the RAN
> node, for both domains, selects serving operator based on IMSI analysis.
For parallel registrations in the CS and PS domains the above means that CS/PS
coordination is achieved and that serving operator is kept.
# 8 Conclusion
It is concluded based on evaluation of solutions in section 7 that solution #5
is selected as the basis for further normative work.
In some scenarios signalling to every CN node within a CN-node-pool area will
be introduced by the new procedures for retrieving operator ID from the
opposite domain. In some error cases (e.g. Attach following failure of
competing local network) this additional signalling must be taken into
consideration not to cause overload.
Further work will occur via normative CRs and there will be no further
additions, alignments or corrections to the technical report.
###### ### Annex A: Additional flows to Alternative Solution #4
# A.1 LAU in MOCN
The below figure shows how the proposed solution achieves CS/PS coordination
in MOCN when receiving a LAU request. The LAU request may have been preceded
by PS Handover, CS Handover, concurrent CS and PS Handover, CSFB or SRVCC.
Figure A.1-1: CS/PS coordination at LAU in MOCN
1\. When the target RAN node receives a LAU Request it routes the request to
an available MSC. The request shall include the Redirect Attempt flag (as in
legacy) and a new parameter indicating that Operator centric method shall not
be invoked by the CN. If the LAU includes a CS-NRI with a direct match to an
MSC then that MSC is selected by the RAN node, illustrated by scenario A in
the figure. If the CS-NRI is absent or is not directly matching any MSC, an
MSC suitable to retrieve UE information could be selected randomly.
2\. If the UE is served by the selected MSC then the UE shall be kept and a
\'Redirection Completed\' indication shall be included in the response to the
RAN node. The procedure ends.
3\. If the UE is not served by the selected MSC then \'Redirection
Indication\' with \'CS/PS Coordination Required\' and IMSI shall be included
in the response to the RAN node as in legacy. Note that the Operator centric
method shall not be invoked by the MSC at this stage, see step 1.
NOTE: The new indicator in step 1 can be included in the response to indicate
to the RAN node to separate states i.e. steps 1 or 6.
4\. The target RAN shall send requests to all connected SGSNs to inquire if
the UE is served by any of the SGSNs and then retrieve the PLMN ID of the
selected (serving) target operator.
5\. If the UE is served by one of the connected SGSNs, illustrated by scenario
B in the figure, then the RAN node shall select an MSC from the operator
retrieved in step 4. The RAN node shall for this case not include the Redirect
Attempt flag when sending the LAU to the MSC (thus inhibiting redirection).
6\. If the UE is not served by any of the connected SGSNs, illustrated by
scenario C in the figure, then the RAN node shall include the Redirect Attempt
flag when sending the LAU to the selected MSC. Selection of MSC shall be based
upon the Operator or Pool centric method. Note that the selection shall not be
based upon IMSI when using the Operator centric method. Nor shall the new
parameter introduced in step 1 be included. Performing step 6 in this way
makes it possible to apply either Operator or Pool centric CS/PS coordination
in the MSC.
# A.2 LAU in GWCN
The below figure shows how the proposed solution achieves CS/PS coordination
in GWCN when receiving a LAU request. The LAU request may have been preceded
by PS Handover, CS Handover, concurrent CS and PS Handover, CSFB or SRVCC.
Figure A.2-1: CS/PS coordination at LAU in GWCN
The following is new functionality/signalling:
1\. When the target RAN node receives a LAU Request it routes the request to
an available MSC and operator. The request shall include a new parameter
indicating that Operator centric method shall not be invoked by the CN or any
other method in order to keep the UE unless the UE is already registered in
the MSC. If the LAU includes a CS-NRI with a direct match to an MSC and
operator then that MSC/operator is selected by the RAN node, illustrated by
scenario A in the figure. If the CS-NRI is absent or is not directly matching
any MSC/operator, an MSC/operator suitable to retrieve UE information could be
selected randomly.
2\. If the UE is served by the selected MSC/operator then the UE shall be kept
and a \'Redirection Completed\' indication shall be included in the response
to the RAN node. The procedure ends.
3\. If the UE is not served by the selected MSC/operator then \'Redirection
Indication\' with \'CS/PS coordination Required\' and IMSI shall be included
in the response to the RAN node. Note that at this stage the MSC shall not
invoke the Operator centric method or any other method in order to keep the
UE, see step 1.
4\. The target RAN shall send requests to all connected SGSNs to inquire if
the UE is served by any of the SGSNs and then retrieve the PLMN of the
selected (serving) target operator.
5\. The LAU request is sent to the MSC and if the UE is served by an operator
in one of the connected SGSNs, illustrated by scenario B in the figure, then
the RAN node shall include the operator identity (the PLMN retrieved in step
4). Note that the new parameter introduced in step 1 shall not be included.
6\. Selection of operator in the MSC shall be based upon the received PLMN. If
PLMN is not received, illustrated by scenario C in the figure, then selection
of operator is based upon either the Operator centric method or e.g. IMSI
hashing for the Pool centric method.
# A.3 RAU in GWCN
The below figure shows how the proposed solution achieves CS/PS coordination
in GWCN when receiving an Attach or RAU request. The Attach or RAU request may
have been preceded by CS Handover, concurrent CS and PS Handover (for RAU),
CSFB or SRVCC. A RAU included in or following PS Handover will always be
routed to the operator where the UE is already registered.
Figure A.3-1: CS/PS coordination at Attach/RAU in GWCN
1\. When the target RAN node receives an Attach/RAU Request it routes the
request to an available SGSN and operator. The request shall include a new
parameter indicating that Operator centric method shall not be invoked by the
CN or any other method in order to keep the UE unless the UE is already
registered in the SGSN. If the Attach/RAU includes a PS-NRI with a direct
match to an SGSN and operator then that SGSN/operator is selected by the RAN
node, illustrated by scenario A in the figure. If the PS-NRI is absent or is
not directly matching any SGSN/operator, an SGSN/operator suitable to retrieve
UE information could be selected randomly.
2\. If the UE is served by the selected SGSN/operator then the UE shall be
kept and a \'Redirection Completed\' indication shall be included in the
response to the RAN node. The procedure ends.
3\. If the UE is not served by the selected SGSN/operator then \'Redirection
Indication\' with \'CS/PS coordination Required\' and IMSI shall be included
in the response to the RAN node. Note that at this stage the SGSN shall not
invoke the Operator centric method or any other method in order to keep the
UE, see step 1.
4\. The target RAN shall send requests to all connected MSCs to inquire if the
UE is served by any of the MSCs and then retrieve the PLMN of the selected
(serving) target operator.
5\. The Attach/RAU request is sent to the SGSN and if the UE is served by an
operator in one of the connected MSCs, illustrated by scenario B in the
figure, then the RAN node shall include the operator identity (the PLMN
retrieved in step 4). Note that the new parameter introduced in step 1 shall
not be included.
6\. Selection of operator in the SGSN shall be based upon the received PLMN.
If PLMN is not received, illustrated by scenario C in the figure, then
selection of operator is based upon either the Operator centric method or e.g.
IMSI hashing in the Pool centric method.
7\. UE concludes the Attach/RAU procedure.
#