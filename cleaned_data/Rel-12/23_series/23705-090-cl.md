# Foreword
This Technical Report has been produced by the 3^rd^ Generation Partnership
Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document studies and defines system enhancements for user plane
congestion management based on the Stage-1 normative requirements defined in
3GPP TS 22.101 [3].
Based on the technical analysis, any needed enhancements/updates to 3GPP
functions and interfaces are identified.
Normative specifications will be developed based on the conclusions of the
present document.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] Void.
[3] 3GPP TS 22.101: \"Service aspects; Service principles\".
[4] 3GPP TS 23.060: \"General Packet Radio Service (GPRS); Service
description; Stage 2\".
[5] 3GPP TR 23.800: \"Study on Application Based Charging (ABC); Stage 2\".
[6] 3GPP TS 24.312: \"Access Network Discovery and Selection Function (ANDSF)
Management Object (MO)\".
[7] 3GPP TS 29.212: \"Policy and Charging Control (PCC); Reference points\".
[8] 3GPP TS 23.401: \"General Packet Radio Service (GPRS) enhancements for
Evolved Universal Terrestrial Radio Access Network (E-UTRAN) access\".
[9] 3GPP TR 22.805: \"Feasibility study on user plane congestion management\".
[10] 3GPP TS 23.402: \"Architecture enhancements for non-3GPP accesses\".
[11] 3GPP TS 23.203: \"Policy and charging control architecture\".
[12] IETF Internet-Draft, draft-quinn-nsh: \"Network Service Header\". Work in
progress.
[13] 3GPP TS 29.303: \"Domain Name System Procedures\".
# 3 Definitions and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
TR 21.905 [1] and the following apply.\ A term defined in the present document
takes precedence over the definition of the same term, if any, in TR 21.905
[1].
**RAN user plane congestion:** RAN user plane congestion occurs when the
demand for RAN resources exceeds the available RAN capacity to deliver the
user data for a period of time. RAN user plane congestion leads, for example,
to packet drops or delays, and may or may not result in degraded end-user
experience.
NOTE 1: Short-duration traffic bursts is a normal condition at any traffic
load level, and is not considered to be RAN user plane congestion. Likewise, a
high-level of utilization of RAN resources (based on operator configuration)
is considered a normal mode of operation and might not be RAN user plane
congestion.
NOTE 2: RAN user plane congestion includes user plane congestion that occurs
over the air interface (e.g. LTE-Uu), in the radio node (e.g. eNB) and/or over
the backhaul interface between RAN and CN (e.g. S1-u).
**User-impacting congestion:** User-impacting congestion occurs when a service
that is delivered to a user over the default bearer or a dedicated bearer does
not meet the user\'s expected service experience due to RAN user plane
congestion. The expectation for a service delivery is highly dependent on the
particular service or application. The expected service experience may also
differ between subscriber groups (e.g. a premium subscriber may have higher
expectations than a subscriber with the cheapest subscription). RAN resource
shortage where the RAN can still fulfil the user expectations for a service
delivery is not considered to be user-impacting congestion; it is rather an
indication for full RAN resource utilization, and as such a normal mode of
operation.
NOTE 3: It is up to the operator to determine when a service satisfies the
user\'s expected service experience.
**Unattended traffic:** see definition for \"Unattended Data Traffic\" in [3].
See also the discussion in clause 4.9.1 in [9].
**Attended traffic:** see definition for \"Attended Data Traffic\" in [3]. See
also the discussion in clause 4.9.1 in [9].
## 3.3 Abbreviations
For the purposes of the present document, the abbreviations given in TR 21.905
[1] and the following apply.\ An abbreviation defined in the present document
takes precedence over the definition of the same abbreviation, if any, in TR
21.905 [1].
UPCON User Plane CONgestion management
# 4 Assumptions and architectural requirements
## 4.1 Assumptions
Editor\'s Note: This clause will define the underlying assumptions of the
work.
## 4.2 Architectural requirements
Editor\'s Note: This clause will define the architectural requirements based
on the normative stage-1 requirements defined in TS 22.101.
# 5 Key issues
Editor\'s Note: For each key issue identified, the clause will capture the
\"General description and assumptions\" (subclause 1). Different architecture
solutions to address the key issues will be documented in Clause 6.
Editor\'s Note: The key issues defined in this clause are intended to help the
architecture solution definition (e.g. by providing some guidelines for the
solution descriptions). It is not expected that all the key issues defined
here are relevant for all solutions. Solutions defined in Clause 6 shall
clearly define which of the key issues they cover and address.
## 5.1 Key issue #1: RAN user plane congestion mitigation
### 5.1.1 General description and assumptions
The majority of mobile data traffic (e.g. Internet or over-the-top services
traffic) is currently delivered over the default bearers. This key issue
addresses aspects how the system can effectively mitigate RAN user plane
congestion in order to overcome the negative impact on the perceived service
quality for such data traffic.
The congestion mitigation measures include traffic prioritization, traffic
reduction and limitation of traffic, and shall be able to manage user plane
traffic across a range of variables including the user\'s subscription, the
type of application, and the type of content.
A key challenge for congestion mitigation is to support subscribers with
different service requirements (e.g. premium, flat rate or roaming users) and
application traffic with different traffic characteristics (e.g. long-lived
and short-lived traffic flows) without increasing the system-wide signalling
overhead significantly.
The following aspects should be considered by a solution addressing this key
issue:
\- The type of congestion mitigation measures, i.e. QoS/QoE control/adjustment
through traffic prioritization, traffic reduction or traffic limitation based
on the congestion status.
\- The location of congestion mitigation measures (e.g. in UE, in RAN, in
Core, in both, or in connected IP networks such as IMS or Packet-switched
Streaming Service).
\- The criteria to decide which flows will be subject of traffic mitigation
measures (e.g. the user\'s subscription class, the type of application or the
type of content).
\- The information that are needed to effectively enforce the mitigation
measure (e.g. the RAN congestion status, the impacted users, the type of
traffic -- e.g. attended vs. unattended) and how this information could be
obtained.
NOTE: Depending on the congestion mitigation measure and enforcement point,
different information is needed.
\- The way operators are able to control congestion mitigation through
policies.
## 5.2 Key issue #2: RAN user plane congestion awareness
### 5.2.1 General description and assumptions
NOTE 1: This key issue does not exclude any solution proposal; solution
proposals that do not require any form of RAN user plane congestion awareness
do not need to address this key issue.
NOTE 2: Congestion awareness means awareness of congestion onset, continuance
and abatement.
In order to address RAN user plane congestion, the following system
capabilities are required according to TS 22.101 [3]:
\- allow the network \"to adjust the QoS of existing connections/flows and
apply relevant policies to new connections/flows depending on the RAN user
plane congestion status and the subscriber\'s profile\";
\- allow the network \"to reduce the user plane traffic load (e.g. by
compressing images or by adaptation for streaming applications)\" based on RAN
congestion status and according to operator policies; and
\- allow the network \"to limit traffic from operator-controlled and/or third-
party services based on RAN user plane congestion status for a UE\".
Editor\'s Note: It is FFS how to derive architecture requirements from this
system level requirements.
To support these system capabilities, some network elements outside the RAN
may need to become aware of the congestion status.
The following aspects should be considered by solutions that propose some form
of RAN congestion awareness:
\- Where in the network is awareness of RAN user plane congestion required?
\- What information on the congestion (e.g. severity of congestion, etc.) is
required to enforce appropriate mitigation measures?
\- Which level of granularity for congestion awareness is required?
\- In case the congestion status needs to be reported from the RAN towards
other system entities:
\- What is congestion and how is it detected?
\- How often and when does the congestion status need to be indicated?
NOTE 3: Short-term congestion should not be indicated.
\- What information needs to be indicated (e.g. severity of congestion or cell
information), also taking into account the balance between
signalling/processing overhead and benefits (e.g. preciseness)?
\- How is the congestion status be indicated, i.e. in the user plane or in the
control plane) and over which interfaces?
## 5.3 Key issue #3: Differentiated treatment for non-deducible service data
flows in case of RAN user plane congestion
### 5.3.1 General description and assumptions
A very common way of dealing with RAN user plane congestion is to throttle
certain customers and/or application data flows to preserve higher priority
traffic. This requires the ability to enforce per subscriber and/or per
application QoS policies.
To some extent the current 3GPP QoS architecture already supports this
feature. To that purpose a combination of the following mechanisms can be
used:
  * Different QCI values, with different Priority levels, can be > allocated to the bearers (in particular the default bearer) opened > by different classes of subscribers. As an example the operator > could use QCI 8 for the default bearer of a \"premium\" subscriber > and QCI 9 for the default bearer of a "basic" subscriber.
  * Different applications, or different data flows exchanged by a > specific application (e.g. video, audio, file sharing and chat), > can be mapped to different bearers. As an example, for a specific > class of subscribers, or for any subscriber, the operator could > map Internet applications like browsing, ftp and peer-to-peer file > sharing to the default bearer, and use dedicated bearers with > higher priority for data flows, like for example media streaming, > that would benefit of preferential treatment in case of congestion > in RAN.
With this approach differentiated treatment for specific applications, or
application data flows, in case of RAN user plane congestion can be achieved
if such applications, or application data flows, can be mapped to separate
bearers; unfortunately this is problematic for applications exchanging data
flows for which Service Data Flow (SDF) templates cannot be deduced. Non-
deducible SDFs cannot be described by SDF templates or can be described by SDF
templates but these SDF templates cannot be applied to unambiguously or
efficiently control the application traffic. Applications with non-deducible
SDFs are for example those using (potentially many) very short-lived parallel
UDP and/or TCP data flows, for which service data flow filters detected via
ADC (Application Detection and Control) rules are too short-lived to allow PCC
system to control them using SDF templates. Other examples can be found in
subclause 5.1 of 3GPP TR 23.800 [5].
Based on current specifications, for applications with non-deducible SDFs
mapping different applications, or application data flows, to different
bearers to achieve traffic handling differentiation is possible using
predefined PCC rules provisioned into the PCEF, but this approach has the
following limitations:
  * It only works in the downlink direction.
  * It requires application detection to be performed by the PCEF. > Deployment scenarios where application detection is performed by a > TDF are not supported.
  * Roaming scenarios with local-breakout are not supported.
The target of this key issue is to study possible solutions to achieve
differentiated treatment in case of congestion in RAN for applications, or
application data flows, with non-deducible SDFs. Solutions addressing this key
issue should allow for traffic handling differentiation in both uplink and
downlink direction and should support scenarios with TDF as well as roaming
with local-breakout.
NOTE 1: What is the feasible level of granularity for traffic handling
differentiation depends on the application and the transport layer on which
the application is layered. For example differentiating the treatment of
individual application data flows is not feasible for the applications that
multiplex multiple data flows over a single TCP connection, because slowing
down or dropping segments for one of the data flows would cause head-of-line
blocking for all other data flows sharing the same TCP connection.
NOTE 2: Whether there are use cases of operator\'s interest requiring support
for differentiated treatment of application data flows multiplexed over a
single TCP or UDP flow is to be determined.
## 5.4 Key issue #4: Video delivery control for congestion mitigation
### 5.4.1 General description and assumptions
Mobile network operators identify mobile video as one of the main contributing
factors to congestion in mobile networks.
Reducing the rate of video applications during congestion periods is a very
effective congestion mitigation measure and can reduce the traffic load in a
congested RAN significantly. It should be noted that various approaches exist
to reduce video flow rates in the network today, ranging from simple bandwidth
limitation or scheduling for adaptive video applications (e.g. DASH) to
explicit rate adaptation using CDN, video transcoding or change of manifest
file(s) for adaptive streaming protocols. The most appropriate approach
depends on the precise video application (e.g. adaptive versus non-adaptive
video codecs) and transport protocol (e.g. TCP vs. UDP).
The 3GPP community continues to support the existing end-to-end adaptive
bitrate video streaming technologies, specifically 3GP-DASH defined by 3GPP
and also adopted by MPEG.
Since the user\'s service experience depends a lot on the video flow rate
(e.g. low rates result typically in a poor service experience), it is
important that the operator can control according to the subscription level
what delivery rate it provides for a particular user under a certain load
situation. For example, during a low congestion period, an operator may still
want to offer its gold level subscribers a very good video service experience,
whereas a certain reduction of the video quality is acceptable for silver and
bronze level subscribers (e.g. the next lower video codec). However, when the
congestion becomes more severe, the operator may also want to limit the video
flow rate of its gold level subscribers somehow, while still maintaining a
better video quality than for its silver and bronze level subscribers.
This key issue is about how the operator can manage (based on RAN, Core
Network and/or application layer mechanisms) the delivery of individual video
application flows, according to the user\'s subscription level and current RAN
congestion level. Solutions for different video application types (adaptive
and non-adaptive) and transport protocols (TCP and UDP) are considered.
NOTE 1: Interaction of potential solutions with existing end-to-end adaptation
mechanisms (TCP, DASH etc.) should be documented.
NOTE 2: If different solutions for different video application types are
adopted, the network shall be able to identify the type of traffic and the
correct mitigation measure.
## 5.5 Key issue #5: Uplink traffic prioritization
5.5.1 General description and assumptions
One key aspect of RAN congestion mitigation is the capability for the system
to prioritize certain traffic. There are two types of prioritization:
1\. Per-flow prioritization:
\- It should be possible to identify, differentiate and prioritize uplink
traffic from different applications in order to provide these applications
with appropriate service quality during RAN user plane congestion.
2\. Per-user prioritization:
\- It should be possible to prioritize uplink traffic from different users
based on subscription type, e.g., differentiate between traffic
generated/received by gold users vs. normal users.
There are certain applications that generate much traffic in the uplink
direction, like peer-to-peer applications, gaming, video conferencing, etc.
Solutions should be considered for both uplink traffic and downlink traffic.
If different solutions are used for UL and for DL, coexistence of the
solutions should be evaluated. For instance, solutions could allow that a bi-
directional data flow receives equal priority (e.g. high/low) in both uplink
and downlink, particularly for the case when both directions are congested.
Similar applies for per-user prioritization.
For uplink, techniques for per-user prioritization and per-flow prioritization
may be performed in different entities. For instance, the eNB could perform
per-user prioritization, since it is in charge of providing UL scheduling
grants to each UE, while the UE may be involved in performing per-flow
prioritization based on operator/NW instructions.
# 6 Solutions
Editor\'s Note: This clause is intended to document architecture solutions.
Each solution should clearly describe which of the key issues it covers and
how.
## 6.1 CN-based solutions for RAN user plane congestion management
### 6.1.1 General architectural requirements
The following is the list of architectural requirements to address RAN user
plane congestion by CN-based solutions:
1\. The network shall support RAN user plane congestion information transfer
from the RAN to the Core Network.
2\. The solutions shall specify the RAN user plane congestion information sent
to the Core Network.
3\. The Core Network shall be able to use the RAN user plane congestion
information in order to select and apply congestion mitigation measures for
addressing the RAN user plane congestion.
NOTE: Usage of RAN user plane congestion information will be described as part
of the CN-based solution\'s description, e.g., optimization over all
flows/users in a cell.
4\. The solutions shall address UE mobility aspects.
5\. The solutions shall address roaming UEs.
6\. The solutions should avoid additional overload in the network (e.g.
signalling overload).
7\. The solutions should document interaction aspects between RAN, CN and
transport layer/application layer congestion mitigation measures, if
applicable. Performance aspects (e.g., measurement averaging time) may be
provided.
8\. The solutions should document whether the mitigation measures are
applicable for uplink and/or downlink traffic.
### 6.1.2 General description, assumptions and principles
This solution addresses key issues #1 and #2 on congestion mitigation and
congestion awareness. If not indicated otherwise, the term \"congestion\"
refers to "RAN user plane congestion". The solution is based on the following
principles:
Congestion Detection:
  1. The RAN informs relevant CN function(s) about the RAN user plane > congestion.
> NOTE: The RAN implementation for predicting or detecting RAN user plane
> congestion is outside the scope of 3GPP.
>
> Editor\'s Note: The semantics of the congestion notification of RAN user
> plane congestion is FFS.
>
> Editor\'s Note: It is FFS how different levels of congestion can be derived.
>
> Editor\'s Note: It is FFS whether per cell or per bearer granularity is used
> for congestion feedback.
  1. Congestion is indicated to the CN in order to enable CN function(s) > to mitigate congestion (e.g. by enforcing mitigation measures that > reduce/limit/block some traffic transmit to/from impacted users).
  2. The CN is made aware of which users are contributing to or are > affected by the RAN user plane congestion.
  3. Congestion (abatement) should be indicated in a lightweight but > timely way.
Congestion Mitigation:
  1. The user plane congestion management solution supports one or more > of the required congestion mitigation schemes (i.e. traffic > prioritization, limiting, gating and reduction on application and > service-level) to allow flexible operator deployment based on > their operational requirements.
  2. Decisions to apply congestion mitigation measures on user traffic > may take into account operator policies and subscriber > information.
  3. Congestion mitigation measures based on traffic prioritization, > limiting and reduction are enforced in the CN. They may also be > applied at the service level, based on operator policies. > Congestion mitigation based on traffic prioritization may also be > applied in the RAN in order to take into account real-time radio > channel information. Congestion mitigation should not negatively > impact the service experience of users who are not in a congested > RAN area.
### 6.1.3 High-level operation and procedures
A high level view of operation and procedures of the proposed solution is
shown in Figure 6.1.3-1.
{width="5.872916666666667in" height="3.4402777777777778in"}
Figure 6.1.3-1: User-plane congestion management - high-level view.
NOTE 1: The numbers do not necessarily imply a temporal order.
NOTE 2: Step 5a and 5b are optional for solutions that are based on a CN only
approach.
1\. Congestion prediction/detection based on actual resource shortage or
predictive algorithms in the RAN (P1).
2\. Congestion indication to the CN (P2, P3, P4).
3\. Selection of mitigation measures (e.g. policy rule provisioning) (P5, P6).
4\. CN-based congestion mitigation (e.g. traffic limitation, gating,
compression) (P5, P7).
5\. Measures for RAN-based congestion mitigation (P5, P7).
a. Optional Service/QoS information to enable traffic differentiation in the
RAN based on existing QoS measures.
> Editor\'s note: It is FFS how RAN user plane congestion awareness can also
> be exploited to optimize the performance of potentially agreed RAN-based
> congestion mitigation solutions. For example, the congestion information
> could be used to enable packet classification required to mark downlink
> packets, in order to minimize the performance impacts on the GGSN/PGW or the
> TDF.
b. Optional RAN-based congestion mitigation (e.g. traffic prioritization,
scheduling).
### 6.1.4 RAN congestion detection solutions
#### 6.1.4.1 General description, assumptions, and principles
The following terms are introduced:
\- The **congestion level** , which is derived in a RAN node based on RAN
measurements.
\- RAN user plane Congestion Information (**RCI)** , which indicates the
congestion level from RAN to the CN.
The congestion information should provide the CN with sufficient information
to apply the appropriate congestion mitigation measures.
RAN user plane detection and reporting is based on the following principles:
> P1) The complexity in the RAN should be low.
>
> P2) RCIs indicate the level of RAN user plane congestion as a scalar value
> to the CN.
>
> P3) Operators should be able to flexibly configure the detection parameters
> of the congestion levels indicated in the RCI.
This is achieved as following:
\- The congestion level is detected in the RAN node. Congestion level should
provide a meaningful metric for the severity of the congestion. The congestion
level is derived based on operator configurations.
\- The congestion level is indicated to the CN as a scalar value in the RCI.
The CN performs congestion mitigation by deciding which congestion mitigation
measure is taken according to the current RCI (e.g. by activating a policy for
congestion mitigation according to the reported RCI).
#### 6.1.4.2 High-level operation and procedures
Figure 6.1.4.2-1: High-level operational principle of RAN congestion detection
and reporting.
The high-level operation steps are as following:
1\. The RAN detects the congestion level, based on monitoring of RAN resources
and related metrics. Averaging over time and/or over bearer/UE-specific
metrics should be applied in order to derive a stable expression of
congestion. The congestion level is determined based on operator
configurations.
2\. The RCI is reported to the CN as a scalar value. How this information is
sent, and whether RCIs are reported per bearer or cell is not part of this
solution.
NOTE: The mobile operator configures the policies for congestion mitigation in
the CN in such a way that it reacts appropriately to the RCI, i.e. by
activating a policy for congestion mitigation according to the received RCI.
In the operator\'s network, both RAN and CN should have a consistent
interpretation of RCI values.
### 6.1.5 RAN congestion reporting solutions
#### 6.1.5.1 Solution 1.5.1: RAN user plane congestion reporting by GTP-U
extension
##### 6.1.5.1.1 General description, assumptions, and principles
The RAN nodes include the RAN Congestion Information (RCI) in a GTP-U header
extension of the uplink packet to convey the RAN user plane congestion
information to the CN GWs such as GGSN/PGW.
\- Additionally, the location of the congested RAN, such as the CELL ID, may
also be included in the extension.
Editor\'s Note: Whether the Cell ID and what additional information is
required to be provided along with RCI is FFS.
The user plane core network nodes such as the GGSN/PGW will inspect the GTP-U
header and obtain the congestion information. Therefore, the GGSN/PGW node
will know which of the served users/bearers are affected by the congestion.
Editor\'s Note: How to deliver the RCI within the CN with PMIP-based S5/S8 is
FFS.
The congestion is detected based on the monitoring of the RAN network
elements. Once the congestion is detected, the RCI is included in all the
uplink GTP-U packets.
NOTE: In case where there is no uplink traffic, then the current RCI is
indicated to the CN once the next uplink packet is sent.
For the home routed roaming case, it should be possible to configure the VPLMN
so that the RCI is not reported from VPLMN to HPLMN.
Editor\'s Note: Whether in case of home routed roaming it is sufficient to
disable reporting of RCI for all HPLMNs or whether it is required to
enable/disable RCI reporting for specific HPLMNs and how to achieve this is
FFS.
In RAN sharing scenario, the RAN nodes decide whether CN entities require RCI
in GTP-U header or not based on per PLMN configuration. Moreover, the RAN
nodes need to generate the congestion information in consideration of RAN
sharing configuration.
The CN performs congestion mitigation measures based on received RCI.
##### 6.1.5.1.2 High-level operation and procedures
The solution procedures are the following (see Figure 6.1.5.1.2-1):
1) The congestion indicator is reflected in the uplink data traffic packet.
The packet header is included with the RCI (RAN Congestion Information) which
includes the level of congestion and potentially also the location information
(e.g. Cell ID)
2) The GGSN/PGW investigates the GTP-U header and obtains the congestion
information.
3) The GGSN/PGW may report the congestion information to other network nodes:
a) Event reporting over Gx in order to inform the PCRF shall be implemented as
defined in the subclause 6.1.5.1.3.1;
b) RCI transfer to the TDF shall be implemented as defined in the subclause
6.1.5.1.3.3.
Figure 6.1.5.1.2-1: User-plane congestion management -- high-level view.
##### 6.1.5.1.3 Congestion information transfer from the GGSN/PGW to other
core network entities
###### 6.1.5.1.3.1 Event reporting over Gx
In order to enable dynamic policy control for user plane congestion management
as described in the subclause 6.1.5.1.4, the reporting step 3a is assumed to
be done by an extension of the PCC event trigger reporting mechanism over Gx.
The following definition is used:
> **User Plane congestion event report:** A notification provided by the PCEF
> to the PCRF indicating the occurrence/change of user plane congestion status
> in case the PCRF has subscribed for the corresponding User plane congestion
> event trigger; it contains at minimum the RCI and may contain information
> about the scope.
The following assumption is taken:
  * The PCRF shall be able to subscribe to User Plane congestion event triggers based on severity levels.
Editor\'s note: equivalent functionality for PMIP is FFS.
###### 6.1.5.1.3.2 Event reporting over Rx
The PCRF may also provide -- subject to agreement with the AF provider \-- an
indication related to the RAN congestion status to the AF.
Editor\'s Note: It is FFS whether the indication to the AF consists of a
maximum bitrate and/or the RCI and/or other information.
In order to enable an Application Function (AF) to receive such indication, an
AF shall be able to subscribe to notifications from the PCRF. If an AF
subscribes to receiving notifications, then the PCRF shall subscribe to
receiving RAN congestion information over Gx for the same IP-CAN session as
specified in the previous section.
###### 6.1.5.1.3.3 RCI transfer to the TDF
###### # 6.1.5.1.3.3.1 General
If usage of congestion mitigation measures per congestion level may be
required without PCRF involvement, the RCI transfer from the GGSN/PGW to the
TDF may be implemented by using one of the methods illustrated in the
following sections.
Editor\'s Note: The applicability of congestion mitigation measures per
congestion level without PCRF involvement need to be evaluated.
In case of RCI transfer to the TDF without PCRF, the granularity of applying
the RCI value is per application. In contrast, if RCI is transferred to the
PCRF, or if enforcement is performed by the PCEF, the granularity of applying
the RCI may be also per bearer.
Editor\'s Note: It is FFS how the PGW determines whether or not TDF is applied
for a given traffic flow.
###### # 6.1.5.1.3.3.2 Reporting RCI in DSCP / tunnelled DSCP
The PGW/GGSN reports the RCI as a marking in the DSCP IP header towards the
TDF.
NOTE 1: Marking of DSCP bits for this purpose can interfere with appropriate
traffic handling in some operator transport networks. The DSCP marking may
also get remarked by routing entities within the operator networks.
Editor\'s Note: It is FFS whether usage of DSCP marking is appropriate in case
of providing RCI.
To avoid interference with DSCP markings used in operator's transport
networks, alternatively the PGW/GGSN may tunnel packets to the TDF and report
the RCI within the DSCP of the inner IP packet. This ensures that DSCP
markings used in the operator's network can still be applied to the outer DSCP
field of the tunnel in order to keep the transport network unaffected.
Examples of tunnels which may be used are: GRE, IP-in-IP tunnel, depending on
implementation. The TDF is required to replace the DSCP marking with operator
defined values based on configuration.
NOTE 2: Since in this solution, once the congestion is detected, the RCI is
included in all uplink GTP-U packets, the transfer of RCI from the GGSN/PGW to
the TDF shall be supported for all uplink IP packets.
NOTE 3: Usage of DSCP / tunnelled DSCP can be done in case only the RCI needs
to be reported to the TDF.
###### # 6.1.5.1.3.3.3 Reporting RCI as a Network Service Header
The PGW/GGSN reports the RCI and may report other information, e.g. cell ID or
RAT type to the TDF as context data using a Network Service Header (NSH) [12].
The NSH must be removed by the TDF.
NOTE: A Network Service Header (NSH) supports adding metadata to a packet. The
packets and the NSH are then encapsulated in an outer header for transport.
One example for NSH encapsulation is GRE as illustrated in section 5 of [12].
The details of how to encode RCI and optionally cell ID and RAT type as NSH
context data is up to Stage 3.
##### 6.1.5.1.4 Policy control of congestion mitigation
###### 6.1.5.1.4.1 General
The following behaviour is foreseen:
\- As long as PCEF/TDF has activated congestion mitigation policy available,
it should apply a mitigation measure with matching congestion level on
affected traffic;
\- The enhancement of congestion mitigation handling with congestion
mitigation policies in the PCEF can be done as exemplarily shown in Figure
6.1.5.1.4.1-1. Similar principle is applicable for the TDF in case TDF
receives RCI as defined by the subclause 6.1.5.1.3.3.
Figure 6.1.5.1.4.1-1: possible behaviour of congestion mitigation policies in
PCEF (in combination with dynamic policy handling).
The PCRF is always able to request and receive all congestion reports of
interest for its policy decisions. In case, the PCRF chooses not to subscribe
to all congestion reports (for optimisation reasons), it may not be aware of
the currently enforced congestion mitigation policy.
###### 6.1.5.1.4.2 Assumptions for extensions of policies for congestion
mitigation
There may be a PCC/ADC rules that are provided by the PCRF in advance and
activated by the PCEF/TDF in case of receiving appropriate RCI.
Editor\'s Note: The applicability of congestion mitigation measures per
congestion level without PCRF involvement need to be evaluated.
With this solution, the following definition is used for extension of the
policy framework:
**User plane congestion mitigation policy:** A set of information describing
actions in the user plane (in the PCEF/TDF) with the target to reduce the
(overall or specific) amount of RAN user plane congestion or to minimize
service disruption/service degradation experienced by the user, and,
optionally, the corresponding conditions under which they shall be performed.
Such a policy may be provisioned statically in the PCEF, predefined in the
PCEF/TDF and de/activated dynamically by the PCRF or provisioned dynamically
by the PCRF to the PCEF/TDF. A user plane congestion mitigation policy may
refer to a level of congestion. It may also contain an event trigger for a
subsequent user plane congestion report.
NOTE: Static user plane congestion mitigation policies apply in case of no PCC
deployment. For static user plane congestion mitigation policies the same
restrictions apply as for current static PCC (defined in [8] subclause 4.7.5
and [10] subclause 4.10.4).
With this solution, the following assumptions for extension of policies are
used:
\- Support of User Plane congestion event report;
\- For user plane congestion mitigation, an enhancement of existing PCC/ADC
rules structure/or structure of those rules applicability should be defined.
They should contain congestion mitigation measures/or corresponding PCC/ADC
Rule that can be enforced depending on the different RAN user plane congestion
situation (e.g., different PCC/ADC rule per each congestion level).
Editor\'s Note: It is FFS whether the above mentioned enhancement will be
implemented by extending the existing PCC/ADC Rules structure (e.g. a
different enforcement actions per each congestion level within the single rule
or a different PCC/ADC Rules applicable per each one of the congestion
levels).
##### 6.1.5.1.5 Impact on existing entities and interfaces
The RAN nodes (BSC/RNC/eNodeB):
  * Enhancement of S1-U interface for inclusion of congestion information in uplink packets.
NOTE: Stage 3 header extensions of GTP-U to include congestion information
(e.g., RCI and Cell ID) are done by CT4.
The GGSN/PGW:
  * Recognize the congestion indicator;
  * Support congestion event trigger subscription and event report to the PCRF;
  * Support of enhancements for PCC rules as defined in subclause 6.1.5.1.4.1;
  * In case of TDF deployment, support the transfer of RCI to the TDF;
The PCRF:
  * Support congestion event trigger subscription and receiving of event report;
  * Support congestion reporting to AF
The AF:
  * Support subscription to and receiving of congestion traffic plane events;
  * Support the congestion mitigation directly or indirectly.
The TDF:
  * Recognize the congestion indicator;
  * Support of enhancements for ADC rules as defined in subclause 6.1.5.1.4.1.
##### 6.1.5.1.6 Solution evaluation
**The advantages of the solution are the following:**
\- No architecture impact. There is no new control plane interface and new
network element is introduced.
\- No mandatory new signalling is introduced over the control plane.
Furthermore, there is no additional signalling in case of mobility or other
RAN-related procedures required.
\- Indicates congestion information on a per-bearer granularity.
**The disadvantages of the solution are the following:**
\- Processing of RCI bring extra burden in the P-GW/GGSN.
\- A new signalling channel, piggybacked to the user plane, is introduced to
the architecture piggybacked over the user plane.
\- Introduce signalling if P-GW/GGSN trigger event report to the PCRF.
**Additional considerations:**
\- The amount of the information transferred in one uplink packet is limited
by the size of the packet.
#### 6.1.5.2 Solution 1.5.2: C-plane signalling for RAN user plane congestion
reporting
##### 6.1.5.2.1 Clarification of terminologies
_RAN user plane Congestion Information (RCI):_ This is the information about
RAN user plane congestion, e.g., RAN user plane congestion level, RAN user
plane congested direction (radio uplink/downlink).
_RCI signalling:_ The signalling is used as the means for conveying RCI from
RAN to CN. The signalling can be done on a per EPS bearer/PDP context basis or
in an aggregate way as described below.
_\- EPS bearer/PDP context level RCI signalling:_ RCI will be conveyed from
the RAN to the CN for each EPS bearer/PDP context. For instance, if RCI is
specified on a cell level basis, a signalling message will be sent per EPS
bearer/PDP context even if all messages include the same RCI. The number of
signalling messages is equal to the number of EPS bearers/PDP contexts that
are being served by the same cell.
_\- Aggregating RCI signalling:_ A single signalling message contains the RCI
for multiple EPS bearers/PDP contexts belonging to the same UE or even the RCI
for EPS bearers of multiple UEs that are served by the same cell.
NOTE 1: The details of \"aggregating RCI signalling\" are described in
subclause 6.1.5.2.3.2.
NOTE 2: Each PDP context is mapped to a RAB context for RNC.
##### 6.1.5.2.2 General description, assumptions, and principles
This solution addresses the key issue on \"RAN user plane congestion
awareness\".
This solution provides an aggregating RCI signalling mechanism for the RAN to
report the RAN user plane congestion information to the CN by using:
For E-UTRAN:
\- Existing C-plane signalling interfaces: S1-MME, S11, S5/S8, Gx, Rx, and Sd;
and
\- Existing C-plane signalling protocols: S1-AP, GTP-C and DIAMETER.
For UTRAN accessing EPC via S4:
\- Existing C-plane signalling interfaces: Iu-PS, S4, S5/S8, Gx, Rx and Sd;
\- Existing C-plane signalling protocols: RANAP, GTP-C and DIAMETER.
For the E-UTRAN case, when the eNodeB is congested, the eNodeB sends the RAN
user plane congestion information to the PCRF via the MME, the SGW and the
PGW. The PCRF then decides whether to initiate the IP-CAN Session Modification
procedure in order to assist the RAN to mitigate the RAN user plane congestion
situation. In addition the PCRF decides whether to forward congestion
information to the AF and TDF.
Depending on the operator\'s congestion mitigation policy, it may not be
necessary to have \"RCI signalling\" for all EPS bearers. An operator shall be
able to specify policy for RCI signalling for individual EPS bearers/PDP
contexts, e.g., activating or deactivating the RCI signalling for the EPS
bearer/PDP context. According to the policy for RCI signalling, the eNodeB/RNC
sends the RCI to the PCRF only for those EPS bearers/PDP contexts that have
\"RCI signalling\" activated.
NOTE 1: Policy for RCI signalling is not used to configure eNodeB/RNC to send
either an EPS bearer/PDP context level RCI signalling or an aggregating RCI
signalling. Policy for RCI is used to activate or deactivate the RCI
signalling for the EPS bearer/PDP context. Choosing which EPS bearer/PDP
context to be activated for RCI signalling is out of scope of solution, since
it is operator and vendor specific.
Policy for \"RCI signalling\" can be configured either statically or
dynamically.
\- Static configuration: The policy for \"RCI signalling\" is pre-defined and
stored in advance at the eNodeB/RNC and the MME/SGSN, for example, via the OAM
plane or manually configured when deploying the eNodeB/RNC and the MME/SGSN.
\- Dynamic configuration: The policy for \"RCI signalling\" is decided by the
PCRF and can be updated dynamically. The policy for \"RCI signalling\" shall
be included in the EPS/PDP bearer context information.
In this solution, only the dynamic configuration for EPS bearer/PDP context
level RCI signalling is discussed, since static configuration for EPS
bearer/PDP context level RCI signalling is not necessarily to be standardized.
The signalling for the RAN user plane congestion information from the
eNodeB/RNC towards the PCRF shall be done on a per EPS bearer/PDP context
basis. For congestion event reporting on Gx and policy control of congestion
mitigation considerations in subclauses 6.1.5.1.3 and 6.1.5.1.4 apply except
for RCI transfer to the TDF by using on-path P-GW-TDF communication.
The policy for \"RCI signalling\" shall include \"Reporting action for RCI
signalling (e.g., start, stop)\". To further reduce RCI signalling messages
and to avoid unnecessary RCI signalling messages that may not lead to any
decision at the PCEF/PCRF, the policy for \"RCI signalling\" may include
conditions that trigger the eNodeB/RNC to send a RCI signalling message:
\- Minimal bit rate of incoming traffic carried over the EPS bearer/PDP
context: Operator may decide not to apply a congestion mitigation measure for
the EPS bearer/PDP context that carries little amount of traffic (e.g.,
chatting), and thus no RCI signalling for such EPS bearer/PDP context.
\- Minimal congestion level that an operator is interested in for the given
EPS bearer/PDP context.
NOTE 2: In case, there is no policy for RCI signalling available at the
eNodeB/RNC, it behaves according to operator\'s configuration.
The RCI should include:
\- Congestion level;
\- User identity (e.g., eNB UE S1AP ID and MME UE S1AP ID on S1-MME interface,
IMSI on Iu-PS, S11, S5/S8 and Gx interfaces );
\- EPS bearer ID/NSAPI/RAB ID (Iu-PS interface);
\- Direction of user plane congested direction (e.g., radio uplink, radio
downlink);
\- Optionally user location information (e.g., Cell ID);
NOTE 3: How the congestion level is specified is out of scope of the solution
description.
##### 6.1.5.2.3 High-level operation and procedures
The solution consists of two procedures:
\- Procedure for dynamic configuration of policy for RCI signalling from the
PCRF to the eNodeB/RNC;
\- Procedure for \"RCI signalling\" from the eNodeB/RNC to the PCRF.
###### 6.1.5.2.3.1 Procedure for dynamic configuration of policy for \"RCI
signalling\"
###### # 6.1.5.2.3.1.1 E-UTRAN case
The following procedures specified in TS 23.401 are used to convey the policy
for \"RCI signalling\" from the PCRF to the eNodeB.
\- Procedure for E-UTRAN Initial Attach (subclause 5.3.2.1): In step 14 to 17,
the policy for "EPS bearer level RCI signalling" is included in the EPS bearer
context information.
\- Procedure for Dedicated bearer activation (subclause 5.4.1): In step 1 to
4, the policy for \"EPS bearer level RCI signalling\" is included in the EPS
bearer context information.
\- Procedure for PDN GW initiated bearer modification with bearer QoS update
(subclause 5.4.2.1): In step 1 to 4, the policy for \"EPS bearer level RCI
signalling\" is included in the EPS bearer context information.
\- Procedure for UE requested PDN connectivity (subclause 5.10.2): In step 4
to 7, the policy for \"EPS bearer level RCI signalling\" is included in the
EPS bearer context information.
The procedures mentioned above are mainly used for conveying policy for RCI
signalling when establishing a new EPS bearer or when modifying QoS parameters
of existing EPS bearers.
If an operator decides to only update the policy for \"RCI signalling\" of
existing EPS bearer, e.g., from deactivating to activating the RCI signalling,
or vice versa, a new procedure as shown in the Figure 6.1.5.2.3.1.1-1 is
needed.
{width="5.65625in" height="3.00625in"}
Figure 6.1.5.2.3.1.1-1: Updating policy for \"RCI signalling\".
1) Based on the operator\'s policy, the PCRF decides to activate the \"RCI
signalling\".
2) The PCRF sends PCC rules that apply to the given bearer with the policy for
\"RCI signalling\" to the PGW.
3) The PGW forwards the EPS bearer context information with the policy for
\"RCI signalling\" to the SGW.
4) The SGW forwards the EPS bearer context information with the policy for
\"RCI signalling\" to the MME. The MME stores the policy.
5) The MME forwards the EPS bearer context information with the policy for
\"RCI signalling\" to the eNodeB. The eNodeB stores the policy.
6) The eNodeB acknowledges the policy for RCI signalling to MME.
7) The MME acknowledges the policy for RCI signalling to SGW.
8) The SGW acknowledges the policy for RCI signalling to PGW.
9) The PGW acknowledges the policy for RCI signalling to PCRF.
Figure 6.1.5.2.3.1.1-1 depicts an example for activating RCI signalling. For
deactivating the \"RCI signalling\" of the EPS bearer, the same procedure as
described in Figure 6.1.5.2.3.1.1-1 is applied. The only difference is that
the \"Reporting Action\" for the policy for \"RCI signalling\" is to be set to
\"Stop\" instead.
For the case of intra E-UTRAN handover, the same procedures as specified in
subclause 5.5.1 in TS 23.401 are used to transfer the EPS bearer context
information, which includes the policy for \"RCI signalling\", from the source
eNodeB to the target eNodeB.
For the case of home routed roaming, when MME receives the policy for RCI
signalling message from the SGW, MME shall figure out whether the UE is served
by a PGW in a different PLMN (e.g. looking into the APN information).
According to the roaming agreement between VPLMN and HPLMN operators, MME
decides whether to further provision the policy to eNodeB. If RCI signalling
is not allowed to be shared with the HPLMN operator, MME shall discard the
policy for \"RCI signalling\" received from SGW.
NOTE: In case there is no policy for RCI signalling available at the eNodeB
for the roaming UE, it behaves according to operator\'s configuration.
###### # 6.1.5.2.3.1.2 Case of UTRAN using S4
The following procedures specified in TS 23.060 are used to convey the policy
for \"RCI signalling\" from the PCRF to the RNC:
\- Procedure for PDP context activation using S4 (clause 9.2.2.1A): in step C
and D, the policy for \"RCI signalling\" is included in the EPS bearer
context.
\- Procedure for secondary PDP context activation using S4 (clause
9.2.2.1.1A): in step C and D, the policy for \"RCI signalling\" is included in
the EPS bearer context.
\- Procedure for network requested secondary PDP context activation using S4
(clause 9.2.2.3A): in step 1, 2, 6a, 6b, the policy for \"RCI signalling\" is
included in the EPS bearer context and RNC RAB context.
\- Procedure for SGSN initiated EPS bearer modification using S4 (clause
9.2.3.1A): in step C and D, the policy for \"RCI signalling\" is included in
the EPS bearer context.
\- Procedure for PGW initiated EPS bearer modification using S4 (clause
9.2.3.2A): in step A and B, the policy for \"RCI signalling\" is included in
the EPS bearer context.
\- Procedure for execution part of MS initiated modification procedure using
S4 (clause 9.2.3.3B): in step A and B, the policy for \"RCI signalling\" is
included in the EPS bearer context.
The procedures mentioned above are mainly used for conveying policy for RCI
signalling when establishing a new EPS bearer/PDP context or when modifying
QoS parameters of an existing EPS bearer/PDP context.
If an operator decides to only update the policy for "RCI signalling" of
existing EPS bearer/PDP context (e.g., from deactivation to activation of the
RCI signalling, or vice versa), a new procedure similar to the one depicted in
Figure 6.1.5.2.3.1.1-1 is needed. However, in case of UTRAN using S4, the SGW
forwards the policy for \"RCI signalling\" to the RNC via the S4-SGSN. S4-SGSN
and RNC store the policy in the PDP context and in the relative RNC RAB
context respectively.
For the case of home routed roaming, S4-SGSN shall detect whether the UE is
served by a PGW in a different PLMN (e.g., looking into the APN information).
According to the roaming agreement between VPLMN and HPLMN operators, S4-SGSN
decides whether to further provision the policy to RNC. If RCI signalling is
not allowed to be shared with the HPLMN operator, S4-SGSN shall discard the
policy for \"RCI signalling\" received from SGW.
NOTE: In case there is no policy for RCI signalling available at the RNC for
the roaming UE, it behaves according to operator's configuration.
###### 6.1.5.2.3.2 Procedure for aggregating RCI signalling
###### # 6.1.5.2.3.2.1 E-UTRAN case
Figure 6.1.5.2.3.2.1-1 illustrates the procedure for conveying RAN user plane
congestion information to the CN.
1) The eNodeB monitors its RAN user plane congestion situation and detects
whether it is congested or not.
2) Once RAN user plane congestion is detected, the eNodeB sends the RAN user
plane congestion information to the MME by a new S1-AP message or via a new
information element in an existing S1-AP message. RCI delivered over S1-MME
includes:
\- Congestion level;
\- List of user\'s identities (eNB UE S1AP ID and MME UE S1AP ID) of UEs that
are located in the same cell and have \"RCI signalling\" activated at least
for one EPS bearer;
\- EPS bearer ID(s) of UEs that have RCI signalling activated;
\- Direction of user plane congestion (e.g., radio uplink, radio downlink).
For each EPS bearer of all UEs in the list sent by the eNodeB, the MME stores
the congestion level and direction of user plane congestion.
3) For each UE in the list sent by the eNodeB and for each active PDN
connection belonging to the same UE, the MME notifies the SGW about the RAN
user plane congestion information by a new GTP-C message or by a new parameter
in an existing GTP-C message. RCI delivered over S11 includes congestion
level, user identity (IMSI), EPS bearer ID(s), direction of user plane
congestion (e.g., radio uplink, radio downlink), optionally user location
information (e.g., Cell ID).
4) The SGW notifies the PGW about the RCI by a new GTP-C message or by a new
parameter in an existing GTP-C message. RCI delivered over S5/S8 includes
congestion level, user identity (IMSI), EPS bearer ID(s), direction of user
plane congestion (e.g., radio uplink, radio downlink), optionally user
location information (e.g., Cell ID).
NOTE 1: In case that the UE is served by multiple PGWs, the number of the RCI
signalling message(s) should be equal to the number of PGWs serving this UE
via this SGW.
5) The PGW acknowledges the notification of RAN user plane congestion to SGW.
6) The SGW acknowledges the notification of RAN user plane congestion to MME.
7) The PGW notifies the PCRF about the RCI.
8) The PCRF acknowledges the notification of RAN user plane congestion to PGW.
9) The PCRF makes a decision on how to mitigate the RAN user plane congestion
and may initiate IP-CAN Session Modification procedure in order to provide
mitigation policies to the PCEF/TDF or decides to forward congestion
information to the AF and/or TDF.
{width="5.479861111111111in" height="3.236111111111111in"}
Figure 6.1.5.2.3.2.1-1: Procedure for RAN user plane congestion notification
from the E-UTRAN to the CN.
In case that the RAN user plane congestion level is changed or abated, the
same procedure as described in Figure 6.1.5.2.3.2.1-1 is applied. The only
difference is that the value for congestion level parameter is now set with a
new value.
For the case of intra E-UTRAN handover, the same procedures as specified in
subclause 5.5.1 in TS 23.401 [8] are used to transfer the bearer context
information from the source eNodeB to the target eNodeB. The bearer context
information includes the policy for RCI signalling and the congestion level of
the source eNodeB. This enables the target eNodeB to know whether the RAN user
plane congestion information shall be reported to CN for the newly handover
UE. If the RCI signalling is activated and there is a change in congestion
level comparing with the source eNodeB, the target eNodeB sends an aggregating
RCI signalling to the MME as described in step 2.
For the case of a UE which performs the Service Request procedure, as
specified in subclause 5.3.4.1 in TS 23.401 [8], the MME sends the bearer
context information to the eNodeB via the existing S1-AP Initial Context Setup
Request message. The bearer context information also includes the policy for
RCI signalling and the RAN user plane congestion level that are stored at the
MME. The eNodeB uses the same procedure as described in Figure 6.1.5.2.3.2-1
to report the RAN user plane congestion notification to the PCRF, if the RCI
signalling is activated and congestion level of the current serving eNodeB
changes comparing with the previous congestion level received from the MME.
NOTE 2: When to send the aggregating RCI signalling to MME from eNB can be
configured by the operator.
Editor\'s Note: Supporting of PMIP-based S5/S8 is FFS.
###### # 6.1.5.2.3.2.2 Case of UTRAN accessing EPC via S4
When the RNC detects RAN user plane congestion, RNC sends the RAN user plane
congestion information to the PGW via S4-SGSN and SGW. The PGW notifies the
PCRF about the RCI over the Gx interface.
###### 6.1.5.2.3.3 PS handover consideration
For the case of handover (e.g., intra UTRAN, intra E-UTRAN, inter-RAT), the
policy for RCI Signalling is transferred from the source RAN node (e.g., RNC,
eNB) to the target RAN node (e.g., RNC, eNB). The relative context information
(e.g., EPS bearer/RNC RAB) includes the policy for RCI signalling and the
congestion level of the source RAN node. This enables the target RAN node to
know whether the RAN user plane congestion information shall be reported to CN
for the newly handover-in UE. If the RCI signalling is activated and there is
a change in congestion level comparing with the source RAN node, the target
RAN node notifies CN about the new congestion level.
###### 6.1.5.2.3.4 MM state transition consideration
Handling the MM state transition from PMM-IDLE/ECM_IDLE to PMM-
CONNECTED/ECM_CONNECTED is as follows.
For the case that UE initiates the Service Request procedure in E-UTRAN, as
specified in sub-clause 5.3.4.1 in TS 23.401 [8], the MME sends the S1-AP
Initial Context Setup Request message including the policy for RCI signalling
and the previous RAN user plane congestion level that were stored on the MME.
The eNodeB reports the RAN user plane congestion notification, if the RCI
signalling is activated and the congestion level of the current serving eNodeB
changes comparing with the previous congestion level received from the MME.
For the case that UE initiates the Service Request procedure in UTRAN
accessing EPC via S4, as specified in sub-clause 6.1.2 in TS 23.060 [4], the
S4-SGSN sends the Radio Access Bearer Assignment Request message to RNC
including the policy for RCI signalling and the previous RAN user plane
congestion level that were stored on the S4-SGSN. The RNC reports the RAN user
plane congestion notification, if the RCI signalling is activated and the
congestion level of the current serving RNC changes comparing with the
previous congestion level received from the S4-SGSN.
##### 6.1.5.2.4 Impact on existing entities and interfaces
S4-SGSN:
\- Receive, enforce and pass down the policy of RAN user plane congestion
report;
\- Receive RCI from RNC, report RCI to SGW;
\- Store the previous congestion level for each UE.
RNC:
\- Receive and enforce the policy of RAN user plane congestion report;
\- Report RCI to S4-SGSN;
Iu-PS:
\- Convey the policy for \"RCI signalling\" from S4-SGSN to RNC (in case of
dynamic configuration);
\- Report RCI from RNC to S4-SGSN.
S4:
\- Convey the policy for \"RCI signalling\" from SGW to S4-SGSN (in case of
dynamic configuration);
\- Report RCI from S4-SGSN to SGW.
##### 6.1.5.2.5 Solution evaluation
> **Advantages:**
\- No new network element, new interface, or new protocol is introduced
\- Support reporting RCI for multiple cells under the same eNB
\- RCI reporting signaling overhead doesn't exist on S1-MME interface as the
signaling aggregation is introduced
\- Give RAN node the intelligence to report RCI per EPS bearer level by using
dynamic policy control
\- Support congestion reporting restriction for home routed roaming UE either
in a static or dynamic way
\- Support congestion reporting restriction for RAN sharing
\- Future extension to RCI is comparably easy (e.g., only adding a new AVP)
\- Satisfy the requirement on timely notification of congestion onset, update
and abatement.
> **Disadvantages:**
\- Introduce additional C-plane signalling when sending a congestion reporting
from the eNodeB to PCRF/PCEF over C-plane interfaces (S1-MME, S11, S5/S8)
\- Introduce additional C-plane signalling when updating policy for RCI
signalling of existing EPS bearer (only in case of dynamic configuration of
policy for RCI signalling)
\- Introduce additional processing logic for MME to parse the received
notification message into several messages according to the number of UE and
UE's PDN connections
\- Introduce extra control plane processing at network nodes (eNodeB, MME,
SGW, PGW) for C-plane, for example:
\- MME has to parse the received RCI signalling message into several messages
according to the number of UE and UE's PDN connections
#### 6.1.5.3 Solution 1.5.3: RPPF based RAN user plane congestion reporting
##### 6.1.5.3.1 General description, assumptions, and principles
This solution addresses the key issue of \"RAN user plane congestion
awareness\".
A new logical function entity, RAN Payload Perceive Function (RPPF), is
proposed to collect RAN user plane congestion information and further report
to PCRF for the purpose of congestion mitigation.
The PCRF may then report over Rx UE congestion information to applications
that have subscribed to this information
A new reference point Np is introduced between RPPF and PCRF to pass on the
RAN user plane congestion information to PCRF.
##### 6.1.5.3.2 High-level operation and procedures
###### 6.1.5.3.2.1 Architecture
Figure 6.1.5.3.2-1 shows the proposed UPCON architecture.
Figure 6.1.5.3.2-1: UPCON Architecture.
New Reference Point:
Np: The reference point between RPPF and PCRF.
RAN User Plane Congestion Information (RUCI) includes following information
elements:
(1) Congestion/Abatement location information (e.g. Cell ID);
(2) Congestion level
Editor\'s Note: It is FFS to determine if more information is needed (e.g. to
optimize the congestion mitigation operation)
The functionality of RPPF:
\- Collecting and processing RAN\'s cell congestion information from OAM;
\- Communicating with PCRFs serving the PLMN for RAN user plane congestion
information reporting.
Editor\'s Note: It is FFS whether RPPF can collect information from entities
other than OAM.
Editor\'s Note: It is FFS which mechanism is used to determine the UE location
in order to be able to determine the UEs affected by congestion of specific
cells.
###### 6.1.5.3.2.2 Procedure to Report RAN User Plane Congestion Information
to CN
Figure 6.1.5.3.2.1-1: Procedure to Report RAN User Plane Congestion
Information to CN.
1\. Based on network operation policy, for example, an event/report will be
sent to RPPF due to radio node/cell user plane congestion or abatement is
reached to a pre-configured engineered thresholds with the indication of the
affected area (e.g. Cell); another example is that RPPF may solicit the RAN
User Plane Congestion Information based on an engineered interval.
2\. RPPF reports the RUCI-PCRF congestion status to PCRFs that serve the PLMN.
##### 6.1.5.3.3 Impacts on existing entities and interfaces
The impact on PCRF:
  * The PCRF should be enhanced to collect RUCI from RPPF;
  * The PCRF should be enhanced to determine congestion policy based on RUCI, subscriber profile, type of application, type of content, etc.
##### 6.1.5.3.4 Solution evaluation
Editor\'s note: It is FFS.
#### 6.1.5.4 Solution 1.5.4: Integrated on-path and off-path RAN user plane
congestion reporting
##### 6.1.5.4.1 General description, assumptions, and principles
This solution addresses the key issue of \"RAN user plane congestion
awareness\".
A new logical function entity, RAN Congestion Awareness Function (RCAF), that
is equivalent to the RPPF in Solution 1.5.3, collects the on-going RAN user
plane performance status at cell level from OAM system which would be further
assembled prior to reporting it to the PCRF as RAN user plane Congestion
Status (RCS). RAN user plane Congestion information is provided per-bearer by
means of Solution 1.5.1 (RAN User Plane congestion reporting by GTP-U
extension) as described in subclause 6.1.5.1.
Depending on the operator's congestion mitigation policy (e.g. bearer
bandwidth, traffic class etc.), an operator specifies the individual EPS
bearer(s) of a given UE with the on-path RCI reporting activated.
Consequently, based on operator's policy, the eNodeB sends the RCI only for
those EPS bearers that have \"RCI reporting\" enabled.
During the bearer establishment, RCI reporting or ULI reporting (if enabled),
the PCRF learns about which cell serves the UE that it hosts. Such UE\'s
location information (i.e. ECGI) can then identify the target cell which could
be used by the PCRF to determine which RCAF it should register with in order
to receive/solicit the RCS report.
For the case of dynamic policy control, when the PCRF receives the RCI
reporting regarding the congestion or abatement notification for a given UE\'s
EPS bearer, the PCRF verifies the on-path RCI information against the off-path
RCS in order to determine the appropriate congestion mitigation/abatement
status for the given UE\'s EPS bearer over the Gx or Sd interface. Both RCI
and RCS are indexed by the same ECGI. It is possible that the PCRF may choose
not to respond to the RCI based on the spatial analysis and assessment from
RCS report for the corresponding UE\'s EPS bearer. Such spatial analysis and
assessment are network implementation decision and outside of 3GPP scope. In
addition, the PCRF may then report UE congestion information to Application
Functions that have subscribed to this information over Rx interface.
The reference point Np is introduced by Solution 1.5.3 between the RCAF and
PCRF to pass on the RCS to the PCRF.
##### 6.1.5.4.2 High-level operation and procedures
###### 6.1.5.4.2.1 Architecture
Figure 6.1.5.4.2.1-1 shows the proposed UPCON architecture, which is based on
Figure 6.1.5.3.2-1.
Figure 6.1.5.4.2.1-1: UPCON architecture.
New Reference Point:
Np: The reference point between the RCAF and the PCRF to convey the RAN user
plane Congestion Status (RCS).
RCS includes following information elements:
(1) Congestion/abatement location information (i.e. ECGI);
(2) Congestion level or abatement status w.r.t. non-GBR traffic
(3) Optionally, the time and spatial integration factors. For example, if the
congestion status is averaged over 10 minutes, then we put \"10\" in the
\"temporal integration factor\" attribute. If the congestion status is
averaged over 5 neighbor cells around the target cell, then we put \"5\" in
the \"spatial integration factor\".
The functionality of the RCAF:
\- Collecting and processing RAN's cell congestion and abatement information
from OAM to provide the spatial congestion/abatement status for given cell and
its neighbouring cells;
\- Communicating with the PCRF for RCS reporting/solicitation
NOTE: The capability of the RCAF to perform spatial/temporal integration
depends on the availability of the required information via OAM interfaces.
Given that the interface between the RCAF and the OAM is not standardized, the
details of this are beyond the scope of 3GPP.
###### 6.1.5.4.2.2 Procedure for integrated on-path and off-path congestion
reporting
###### # 6.1.5.4.2.2.1 Dynamic Policy-based RCI activation/de-activation
Depending on the operator\'s policy, the PCRF may activate the RCI reporting
on specific bearer for a given UE during the bearer establishment via IP-CAN
session establishment, bearer modification via IP-CAN session modification or
bearer release via IP-CAN session termination. It may not be necessary to have
\"RCI reporting\" activated for all EPS bearers. According to the activation
status for RCI reporting, the eNodeB sends the RCI to the PCRF only for those
EPS bearers that have \"RCI reporting\" activated. In addition, the eNodeB
sends the RCI only when the specific pre-determined congestion or abatement
level is based on operator\'s policy.
Figure 6.1.5.4.2.2.1-1 and Figure 6.1.5.4.2.2.1-2 show example how to convey
the policy from the PCRF to the eNodeB during the E-UTRAN Initial Attach and
Detach procedures. Some other procedures can also be used to convey the policy
as discussed in subclause 6.1.5.2.3.1.
For the case of intra E-UTRAN handover, the same procedures as specified in
subclause 5.5.1 in TS 23.401 are used to transfer the EPS bearer context
information, which includes the policy for \"RCI signalling\", from the source
eNodeB to the target eNodeB.
Figure 6.1.5.4.2.2.1-1: Example of PCRF policy-based activation of on-path RCI
reporting for a given EPS bearer due to UE attach.
Figure 6.1.5.4.2.2.1-2: Example of PCRF policy-based de-activation of on-path
RCI reporting for a given EPS bearer due to UE detach.
NOTE: It is possible for the PCRF to modify RCI activation or de-activation.
###### # 6.1.5.4.2.2.2 RCAF discovery
The PCRF identifies and registers with the target RCAF that serves the
corresponding cell/neighbouring cells for its UEs using one of three
approaches below:
a) referring to the UE\'s location information which is obtained during the
IP-CAN session establishment procedure (i.e. during the UE attachment) or
during the RCI reporting;
b) pre-configuring the target RCAF to serve the PCRF for RCS reporting (e.g.,
based on a geographical region);
c) referring to the UE location information reporting, if ULI is enabled.
###### # 6.1.5.4.2.2.3 Procedure for RAN user plane congestion/abatement
information coordination in CN
This subclause describes the integrated off-path and on-path procedures.
Off-path procedures (see Figure 6.1.5.4.2.2.3-1):
A) Based on network operation policy, RAN OAM events/reports are sent to the
RCAF, for example, due to RAN user plane congestion or abatement level being
reached to a pre-configured engineered threshold with the indication of the
affected area (e.g. a group of cells).
B) The RCAF obtains the spatial congestion/abatement status of a group of
neighbouring cells collected from A), it then further assembles and derives
the spatial congestion or abatement status into RCS prior to reporting it to
the PCRF. Based on the mechanisms as described in 6.1.5.4.2.2.2, the PCRF is
able to identify and register with the appropriate RCAF for subscribing the
RCS that is corresponding to congestion/abatement status for its target UE's
serving cell and the associated neighbouring cells.
NOTE 1: The PCRF subscribes to the RCAF for RCS spatial congestion/abatement
reporting on per cell basis. The PCRF determines the target RCAF based on its
area of interest (i.e. a list of cells for the UEs served by PCRF) and
performs registration and de-registration accordingly.
Figure 6.1.5.4.2.2.3-1: Procedure to report RAN user plane congestion
information to CN.
On-path procedures:
1) & 2) The RCI (RAN Congestion Information) may be sent uplink from RAN
towards the CN if the RCI has been previously activated by the PCRF on the
specific EPS bearer for the given UE. The RCI includes the level of congestion
and the location information of the UE (i.e. ECGI).
3) The GGSN/PGW obtains the RCI and reports to the PCRF.
4) The PCRF verifies the RCI received from 3) compared against the
corresponding RCS (e.g. identified by the same ECGI) in order to verify the
congestion/abatement status w.r.t. the given UE\'s EPS bearer, by either:
(a) referring to the RCS that has been received, or
(b) soliciting the latest RCS from the corresponding RCAF based on the ECGI
info obtained from the RCI (e.g. the RCS corresponding to the target cell is
not available).
NOTE 2: The congestion/abatement indication for RCS is at the cell level which
reflects the medium to long term congestion status, whereas, the
congestion/abatement indication for RCI is per UE\'s bearer level which
reflects the short term congestion status for the given UE's bearer at the
local cell.
> It is possible that PCRF may not respond to every reported RCI if it
> determines that there is no need to apply the congestion
> mitigation/abatement policy. For example, RCAF collects congestion/abatement
> status for cell, neighbouring cells, and region level congestion at 15, 30,
> 60 minute time intervals from OAM and performs the spatial and temporal
> combining of the congestion pattern. The PCRF can take such information from
> RCAF into account when deciding the level and duration of mitigation when it
> receives congestion indication via on-path RCI reporting. The mitigation
> response for example can be softened if congestion is localized and only
> recent to a more severe response when congestion is widespread in that
> region and is longer term. Therefore, if the RCS indicates that the UE's
> attached cell and neighbouring cells are not congested but RCIs received
> indicate congestion, the PCRF, depending on the operator's policies on the
> RCS report, may determine that the congestion is transient and not enforce
> any congestion mitigation. If, however, both the RCS and RCIs indicate the
> definite congestion impacting the UE, the PCRF may enforce congestion
> mitigation.
Figure 6.1.5.4.2.2.3-2: Integrated on-path & off-path user-plane congestion
management -- high-level view.
NOTE 3: RCI must include the UE's location information in the congested RAN
(i.e. ECGI) in order to verify the congestion/abatement status with the
corresponding RCS. With regard to RCS, the OAM system is expected to provide
satisfactory level of location information on congestion and its abatement
event to handle deployment scenarios involving small cells, carrier
aggregation etc.
NOTE 4: The details on how UE's location information is provided to the core
when CA or small cell are enabled is to be specified by RAN3.
In the case RAN sharing, two RAN sharing deployment scenarios are considered:
\- Gateway Core Network (GWCN) sharing;
\- Multi-Operator Core Network (MOCN) sharing.
In both types of deployment, the RCAF belongs to where the OAM system is
located (e.g., RAN operator). Given that the RAN operator has the OAM system
for its RAN, a shared RCAF or a dedicated RCAF may be deployed for each CN
operator partner. . According to each operator partner's entitlement on the
radio resource sharing, RAN reports the radio resource utilization and
performance status to OAM. OAM will then pass on such info to the respective
RCAFs.
The RCAF then, for example, collects and/or calculates the
congestion/abatement information based on the radio resource sharing agreement
with each CN operator partner. The RCAF then conveys the RUCI as described
above to the corresponding PCRFs that serve the respective operators.
##### 6.1.5.4.3 Impacts on existing entities and interfaces
The impact on PCRF:
\- The PCRF is required to be enhanced to determine the RCI policy for the
bearer(s) of the specific UE based on the cell status information in the RCS
received from the RCAF.
\- As for the incoming on-path RCI processing at the PCRF, it is the same as
6.1.5.2.3 or 6.1.5.3.3 depending on which solution is selected. However, the
design of this solution remains the same and is agnostic to the to-be selected
solution.
\- The PCRF is required to be enhanced with a logic to determine, based on the
combination of RCS and RCI, whether to apply congestion mitigation.
The impact on RAN:
\- It is required to be able to enable RCI reporting activation and then to
report RCI to the core network when it reaches the specified engineered
traffic congestion or abatement level; in addition, the RCI must include the
UE\'s location information (e.g. ECGI).
NOTE 1: The exact impact of RCI towards RAN nodes and core network is
dependent on the solution selection of the on-path congestion/abatement
awareness notification and is orthogonal to the integrated framework as
defined by this solution.
NOTE 2: It is expected that the RAN can determine whether a UE\'s poor
performance is a result of congestion or poor radio coverage and apply the
appropriate congestion measures accordingly.
NOTE 3: With respect to the RCI reporting solution impact, Solution 1.5.1: RAN
User Plane congestion reporting by GTP-U extension as described in subclause
6.1.5.1.4.1 should be referred.
#### 6.1.5.5 Solution 1.5.5: off-path based RAN user plane congestion
reporting
##### 6.1.5.5.1 General description, assumptions, and principles
This solution addresses the key issue of \"RAN user plane congestion
awareness\".
A new logical function entity, RAN Congestion Awareness Function (RCAF)), is
added to report RAN User Plane Congestion Information (RUCI) to PCRF for the
purpose of congestion mitigation. For this purpose the RCAF
\- collects raw user plane congestion information from the RAN OAM. The RAN
OAM corresponds to OSS level features of the RAN operator (the RAN OAM is not
assumed to be located within the ENB/RNC/Node B);
\- determines the list of impacted UE;
\- Integrates the RAN congestion status with an integration time fitting with
Core Network mitigation tools (e.g. to provide the PCRF only information on
sustained congestion );
\- Provides \"spatial\" integration of the RAN congestion information (as due
to mobility and to UE being possibly served by multiple cells, the RUCI
associated with a cell should depend on the congestion status in the
neighbouring cells);
The PCRF may then provide policies for congestion mitigation as illustrated in
section 6.1.6.1.2.
##### 6.1.5.5.2 High-level operation and procedures
###### 6.1.5.5.2.1 Architecture
Figure 6.1.5.5.2.1-1 shows the proposed UPCON architecture.
Figure 6.1.5.5.2.1-1: UPCON architecture.
The following reference points are added:
\- Np: The reference point between RCAF and PCRF. Over Np, RAN User Plane
Congestion Information (RUCI) is sent from RCAF to PCRF.
\- Nq/Nq\': Via Nq, the MME provides the RCAF with the list of UEs (IMSIs) in
a given eNB ID/ECGI and for each of these IMSI(s) the APNs of the active PDN
connections. The Nq\' reference point between RCAF and SGSN is used, for a set
of IMSI(s), to provide the RCAF with the list of APNs of the active PDN
connections of each of these IMSIs. No congestion information is sent over
Nq/Nq\'.
The RCAF belongs to the RAN operator. In case of a RAN sharing (MOCN or GWCN)
configuration, Np is an inter-operator reference point. In a MOCN
configuration, Nq/Nq\' is also an inter-operator interface. Whether Np and
Nq/Nq\' apply in these cases is subject to inter-operator agreements.
RAN User Plane Congestion Information (RUCI) is defined over Np and includes
following information:
(1) Congestion/abatement location information (e.g. ENB ID or Cell ID or 3G
Service Area ID);
(2) Congestion level;
(3) The validity time of the information. When this time has elapsed and no
further congestion information has been received, the congestion is assumed to
be over.
(4) IMSI.
The functionality of RCAF:
\- Collecting and processing RAN\'s cell congestion information from OAM;
\- Communicating with PCRFs serving the impacted UEs for RAN user plane
congestion information reporting.
###### 6.1.5.5.2.2 Procedure to report RAN user plane congestion information
to CN
Figure 6.1.5.5.2.2-1: Procedure to report RAN user plane congestion
information to CN.
1\. An event/report is sent to RCAF due to a change of radio node/cell user
plane congestion status (a pre-configured congestion / congestion abatement
threshold has been reached). This notification contains the indication of the
affected area (e.g. ENB-ID or service area ID) as well as the congestion
level; The RCAF may also solicit the RAN User Plane Congestion Information
based on a configured interval. A (set of) RCAF is assumed to serve a
geographical area.
2\. The RCAF determines the list of UEs impacted by the RAN Congestion in a
cell. This is further described in sub-clause 6.1.5.5.2.3. The RCAF may, based
on local policies, further process the information received from the RAN in
order to build the RUCI, e.g. the RCAF may:
\- Integrate the RAN congestion status upon time (to provide the PCRF only
with sustained congestion levels);
\- Provide \"spatial\" integration of the RAN congestion information (as due
to mobility and to UE being possibly served by multiple cells (due e.g. to
Rel12 multi-cell carrier aggregation), the RUCI associated with a cell may
depend on the congestion status in the neighbouring cells);
\- (for LTE) As many RAN features (carrier aggregation, CoMP, ...) may involve
multiple cells of an eNB and as intra-eNB mobility reporting is generally not
activated (to save signalling), RUCI at eNB level may provide enough
information. This does however not preclude RUCI reporting at cell level;
\- In case of Network sharing the RCAF and the PCRF belong to different
operators. The RCAF may apply local policies related to the information it
sends to PCRFs of different operators.
\- The RCAF uses the IMSI to determine the PLMN of UE and hence whether it
should apply local policies related to the information it sends to PCRFs of
different operators.
\- The RUCI being sent may also depend on the relative RAN usage of the
various operators sharing RAN resources.
3\. The RCAF reports the RUCI congestion status to PCRFs that are serving the
impacted UEs. This is further described in sub-clause 6.1.5.5.2.4.
###### 6.1.5.5.2.3 Determination of the list of UE impacted by a change of
RUCI in a cell
When the RCAF has received RAN congestion information from the RAN OAM, the
following applies:
In case of EUTRAN, the RCAF subscribes onto the MME to get the list of UEs in
the affected area. To achieve this, the RCAF constructs a TAI-based FQDN for
MME discovery.
NOTE 1: It is assumed that the RCAF receives the TAIs supported by the
affected area from the RAN\'s OAM.
NOTE 2: Based on the existing mechanism to discover an MME based on the TAI
(see TS 29.303 subclause 5.4 [13]) it is assumed that a new Service Parameter
for the Nq interface will be specified.
The RCAF receives the list of MMEs serving the TAIs supported by the affected
area and establishes the Nq interface towards those MMEs. Once the Nq
interface has been established the RCAF queries via Nq for the list of UEs in
the affected area. The MMEs provide the list of IMSIs and the list of APNs of
the active PDN connections of each of those IMSIs to the RCAF. The RCAF does
not need to remember the list of IMSI(s) (and their activated APN) as it is
refreshed each time the RCAF interacts with the MME.
NOTE 3: The list of APNs of the UEs' active PDN connections is leveraged to
determine the serving PCRFs.
For EUTRAN, the RCAF also indicates whether it requests the list of UEs per
ECGI or eNB ID. Consequently, depending on the level of granularity requested
by the RCAF, the MME may need (or does not need) to activate location
reporting over S1-AP.
NOTE 4: Whether the RCAF requests the list of UEs per ECGI or eNB ID is based
on local configuration.
In case of UTRAN, the RCAF is assumed to receive the list of UEs (IMSIs)
impacted by a change of RUCI in a cell from the RAN's OAM. The RAN OAM is
assumed to have received this information from the RAN (the IMSI is sent by
the SGSN over Iu in RANAP Common Id message). Thus, in UTRAN the RCAF queries
the SGSN only for the APNs of the active PDN connections of a given impacted
IMSI.
To achieve this, the RCAF constructs a RAI-based FQDN for SGSN discovery.
NOTE 5: It is assumed that the RCAF receives the RAIs supported by the
affected area from the RAN's OAM.
NOTE 6: Based on the existing mechanism to discover an SGSN based on the RAI
(see TS 29.303 subclause 5.5.2 [13]) it is assumed that a new Service
Parameter for the Nq\' interface will be specified.
The RCAF receives the list of SGSNs serving the RAIs supported by the affected
area and establishes the Nq\' interface towards those SGSNs. Once the Nq\'
interface has been established the RCAF passes the list of UEs (IMSIs) in the
congested area to the SGSNs. The SGSNs provide the list of APNs of the active
PDN connections of each of the reported IMSIs to the RCAF.
NOTE 7: The list of APNs of the UEs\' active PDN connections is leveraged to
determine the serving PCRFs.
NOTE 8: The details of whether the RCAF needs to query the MME/SGSN regularly
or whether the MME/SGSN updates the RCAF regularly without further explicit
requests from the RCAF is up to Stage 3.
NOTE 9: As both temporal and "spatial" integration are provided, the RUCI sent
to the PCRF does not intend to provide the PCRF with information on the
instantaneous congestion status in a given cell. This is in line with the fact
that this information is to be used to act on a sustained congestion status in
an area. It cannot be excluded that in some cases the PCRF still considers
that a fast moving UE is in a congested area while the UE has already moved to
a non-congested area.
NOTE 10: In some scenarios the CN may not know all the cells / ENB a given UE
is using (multi-site CA, small cells. As a consequence the RUCI reporting may
not reflect the actual congestion status of all the cells from which the UE is
currently using resources.
###### 6.1.5.5.2.4 Reporting RUCI to PCRFs
The RCAF reports RUCI per IMSI/APN to the PCRFs: Based on the list of impacted
UEs (IMSIs) and on the list of APNs of their active PDN connections, the RCAF
notifies the PCRFs serving those UEs and APN(s).
In networks with multiple PCRFs a DRA is typically deployed. RCAF use the DRA
to contact the PCRF(s).This is based on following existing functionality
described in TS 23.203/29.213:
\- When Gx gets established, the DRA \"assigns\" a PCRF for a given IMSI/APN
combination and remembers the relationship (IMSI, APN, selected PCRF).
\- Based on this relationship DRAs support finding the PCRF serving an
IMSI/APN combination.
##### 6.1.5.5.3 Impacts on existing entities and interfaces
A new node RCAF is added in the architecture.
The impact on PCRF:
\- The PCRF is enhanced to support Np in order to receive RUCI from RCAF;
\- The PCRF should be enhanced to consider RUCI while making congestion policy
decision, along with subscriber profile, type of application, type of content,
etc.
Impact on MME/SGSN:
\- MME/SGSN are enhanced to support the Nq/Nq' interface;
\- The RCAF queries the MME/SGSN to get the list of UEs/active APNs served by
a given area of interest;
\- The MME/SGSN issues the related notifications;
Impacts on RAN:
\- OAM to provide RCAF with relevant cell information including the cell load.
##### 6.1.5.5.4 Solution evaluation
This CN based solution allows the PCRF to receive RAN congestion information.
The RCAF can integrate RAN congestion information both in time and**/or**
space (allowing to aggregate RAN congestion information of neighbour
cells/ENB).
This solution does not require work from the RAN WG but entails the definition
of a new functional entity (the RCAF) in the architecture. It requires
modifications only on the PCRF and on the MME/SGSN (no modification of the
SGW/PGW are needed) and does not impact the user plane processing.
### 6.1.6 RAN congestion mitigation solutions
#### 6.1.6.1 Solution 1.6.1: Policy-based congestion mitigation
##### 6.1.6.1.1 General description, assumptions, and principles
This solution addresses key issues #1 (\"RAN user plane congestion
mitigation\") and #4 (\"Video delivery control for congestion mitigation\").
It describes a general scheme how PCRF can be involved for congestion
mitigation based on policy decisions, with the PCRF providing policies to
different network entities performing congestion mitigation, based on
congestion awareness.
This solution focuses only on policy-based congestion mitigation, and does
thus not depend on how congestion awareness is achieved in the PCRF (e.g. if
the congestion information is signalled off-path or if they are indicated on-
path via the P-GW).
NOTE: The term \"congestion information\" is used here as a generic term and
the detailed information elements are left to the congestion awareness
solution.
##### 6.1.6.1.2 High-level operation and procedures
Figure 6.1.6.1.2-1: Overview of congestion mitigation based on policy
decisions.
NOTE 1: The numbers do not necessarily imply a temporal order.
NOTE 2: If TDF is deployed, congestion mitigation policies may be provisioned
to both PCEF and/or TDF.
The procedural steps are:
1\. The PCRF provides policies for congestion mitigation to one or more of the
following network entities:
a) to the PCEF (over the Gx interface);
b) to the TDF (over the Sd interface) ;
c) to the AF (over the Rx interface);
NOTE 3: In this Release, only scenario when PCRF and AF are in the same
operator's network is considered.
> The policies can be provisioned before RAN user plane congestion occurs or
> after the PCRF becomes aware of the congestion status (e.g. onset,
> abatement, level of RAN user plane congestion). All the existing variants of
> policy provisioning (predefined and activated/de-activated dynamically and
> provided dynamically) may be used for congestion mitigation;
NOTE 4: In case of network configurations without PCRF involvement, the PCEF
and/or TDF can enforce static congestion mitigation policies upon receipt of a
congestion notification from the RAN. Different policies may be configured for
different congestion levels. Static policies usage by the PCEF is defined by
the TS 23.401 [8] subclause 4.7.5 and by the TS 23.402 [10] subclause 4.10.4.
Editor\'s Note: The applicability of static congestion mitigation policies
without PCRF involvement need to be evaluated.
2\. The PCRF may also provide -- subject to agreement with the AF provider --
an indication related to the RAN congestion status to the AF.
Editor\'s Note: It is FFS whether the indication to the AF consists of a
maximum bitrate and/or the RCI and/or other information.
3\. Congestion mitigation is performed in different network entities according
to the policy decision by the PCRF:
a/b) The PCEF/TDF can perform bandwidth limitation, prioritization and traffic
gating according to the provided policies.
c) The AF (e.g. an application server or proxy) can directly or indirectly
support the congestion mitigation, e.g. by adapting the sending rate, through
media transcoding or compression, or by delaying push services.
d) Based on policies provided by the PCRF, the PCEF/TDF may also perform
actions to support congestion mitigation measures in the RAN, e.g. the policy
can control when packet marking (such as e.g. proposed by RAN-based Solutions
for RAN user plane congestion management solutions) should be performed.
e) The PCRF may limit/reject the authorization of new requests for application
flows, based on current procedures.
##### 6.1.6.1.4 Impact on existing entities and interfaces
PCEF/TDF:
\- Support of PCC/ADC Rules extensions, if required, in case of GTP-U based
solutions has already been defined in the subclause 6.1.5.1.5.
AF:
\- Support subscription to and receiving of congestion traffic plane events;
and
\- Supports the congestion mitigation directly or indirectly;
##### 6.1.6.1.5 Solution evaluation
## 6.2 RAN-based solutions for RAN user plane congestion management
### 6.2.1 Solution 2.1: Flow priority-based traffic differentiation on the
same QCI (FPI)
#### 6.2.1.1 General description, assumptions, and principles
This solution addresses the key issue on \"RAN user plane congestion
mitigation\". The solution also addresses certain aspects of the key issue on
\"Video delivery control for congestion mitigation\" and certain aspects of
the key issue on \"Differentiated treatment for non-deducible service data
flows in case of RAN user plane congestion\".
Based on operator's policies and on the information collected after some form
of packet inspection (e.g. shallow packet inspection, L7 DPI, heuristic
analysis or others) performed either by the GGSN/PGW or by the TDF, the
GGSN/PGW marks each user plane data packet delivered in the downlink direction
with a Flow Priority Indicator (FPI) identifying the relative priority of the
packet compared to other packets mapped to the same QCI.
For GTP-based interfaces the FPI marking is provided in the GTP-U header of
downlink user plane packets.
NOTE 1: The FPI could be defined as a new GTP-U extension header, completely
independent from the SCI, or as an enhancement of the GTP-U extension header
specified in Rel-11 to convey the SCI. The details are up to stage 3.
Editor\'s note: If and how the approach can be exploited also in the uplink
direction is FFS.
Editor\'s note: How to deliver the FPI to the RAN with PMIP-based S5/S8 is
FFS.
The range of valid FPI values shall be standardized.
The usage of the FPI is expected to be useful for Non-GBR QCIs only.
NOTE 2: According to 3GPP TS 23.203, services using a GBR QCI and sending at a
rate smaller than or equal to GBR can in general assume that congestion
related packet drops will not occur.
The FPI is not intended to replace the QCI, and no conflicts are foreseen
between the FPI and the QCI. The FPI complements the QCI as described below:
  * Both the FPI marking of each user plane packet and the Priority > level associated to a Service Data Flow (SDF) aggregate via its > QCI are used to differentiate between IP flows of the same UE, and > are also used to differentiate between IP flows of different UEs.
  * Via its QCI an SDF aggregate is associated with a Priority level and > a Packet Delay Budget (PDB). As defined in subclause 6.1.7.2 of > [11], if the target set by the PDB can no longer be met for one > or more SDF aggregate(s) across all UEs that have sufficient radio > channel quality then a scheduler shall give precedence to meeting > the PDB of SDF aggregates with higher Priority level.
  * If the target set by the PDB can no longer be met for one or more > packet(s) belonging to SDF aggregate(s) with the same Priority > level (across all UEs that have sufficient radio channel quality) > then a scheduler should give precedence to meeting the PDB for the > packets with higher FPI.
NOTE 3: The details of scheduling are out of scope of 3GPP but implementations
are assumed to ensure that starvation of flows with lower FPI is avoided.
If the usage of the FPI is enabled in the RAN, the packets that do not include
any FPI marking should be scheduled according to a default FPI pre-configured
in the RAN. The default FPI may be configured per PLMN.
NOTE 4: The default FPI pre-configured in the RAN allows support of home
routed roaming scenarios where the FPI is used in the VPLMN but not in the
HPLMN. The default FPI pre-configured in RAN also enables deployment scenarios
where, based on operator\'s configuration, only downlink user plane packets
belonging to specific applications, or application data flows, are marked by
the GGSN/PGW with the FPI, while the rest of traffic is not marked. If the
usage of the FPI is not enabled in the RAN, the RAN shall ignore the Flow
Priority Indicator if received over the S1-U, S12 or other interface, i.e. the
RAN shall treat the user plane packet normally.
The usage of the FPI, in conjunction with the QCI, to prioritize user plane
data packets has the following characteristics and peculiarities:
  * It is applicable to any RAT, i.e. A/Gb mode GERAN, UTRAN and > E-UTRAN.
  * Delivery of the FPI in downlink user plane data packets should be > supported for both GTP-based and PMIP-based S5/S8.
  * Information to enable charging differentiated on the FPI assigned to > the packet flow should be included in charging records and > transferred over online/offline charging interfaces. This is > because the FPI can be used for traffic handling differentiation, > hence may affect the user experience of the customer and may be > used by the operator to create different service profiles. The > flow/application-based charging function of PCC is used to fulfil > this purpose. To enable differentiated charging for this purpose, > the operator may assign different charging-keys or different > charging-key/service-identifier pairs to the PCC/ADC rules > matching the respective service data flows/detected application > traffic.
  * It should be possible for the GGSN/PGW to set the FPI based on > subscription. Support for PCC control of the feature is therefore > necessary.
If both Rel-11 SIRIG (see subclause 5.3.5.3 of 3GPP TS 23.060 [4]) and the
solution described in this section are enabled in an operator\'s network,
considering that the SCI is defined only for A/Gb mode GERAN while the FPI is
applicable to any RAT, the following occurs:
  * Both the SCI and the FPI are delivered to A/Gb mode GERAN.
  * Only the FPI is delivered to UTRAN and E-UTRAN.
The SCI and the FPI provide complementary information to the RAN:
  * The SCI indicates the type of application that generated the user > plane packet and may be used by A/Gb mode GERAN to optimize > resource allocation, e.g. to avoid allocating more time slots than > what the application actually needs.
  * The FPI indicates the priority of the user plane packet and may be > used by A/Gb mode GERAN to decide which traffic flows should be > served first in case of congestion.
Editor\'s note: It is FFS if it would be beneficial for the solution described
in this section to extend the applicability of the SCI to all RATs. With the
GGSN/PGW delivering both the SCI and the FPI over any RAT, the RAN would
become aware of both the priority and the application type associated to each
user plane packet. If and how that could be used to allow for more efficient
packet scheduling in case of RAN user plane congestion is to be determined.
Editor\'s note: The interactions between SCI and FPI in case both are
delivered to the RAN are FFS.
As discussed for SIRIG during the Rel-11 timeframe, from a deployment
perspective it would be beneficial to also support scenarios where the packet
classification required to properly set the FPI is performed by a TDF, rather
than the GGSN/PGW. To that purpose a mechanism is required to transfer the
outcome of the packet classification process from the TDF to the GGSN/PGW, so
that the GGSN/PGW can then use that information to mark packets in the
downlink direction. Possible tunnelling/marking mechanisms that could be used
to solve this issue are described in 3GPP TR 23.800 [5] Annex B.
The following tunnelling/marking solutions are under consideration to be used
between the TDF and the GGSN/PGW in order to classify packets detected by the
TDF:
\- DSCP
NOTE 5: Marking of DSCP bits for this purpose can interfere with appropriate
traffic handling in some operator transport networks. The DSCP marking may
also get remarked by routing entities within the operator networks.
\- Tunnel which carries DSCP marking implemented in the inner IP packet header
In case of Tunnel which carries DSCP marking implemented in the inner IP
packet header option, original DSCP markings used in operator\'s network are
used in the outer DSCP field of the tunnel in order to keep the transport
network unaffected. The examples of the tunnels which may carry the DSCP
marking are: GRE, IP-in-IP tunnel, depending on implementation.
Editor\'s note: The additional tunnelling options (e.g. GTP-U) are FFS and can
be exploited in the future.
Editor\'s note: It is FFS if and how RAN user plane congestion awareness can
be exploited to optimize the solution described in this section. For example
an option to be investigated is the possibility to enable the packet
classification required to properly set the FPI only in case of RAN user plane
congestion, in order to minimize the performance impacts on the GGSN/PGW or
the TDF.
#### 6.2.1.2 High-level operation and procedures
Overall the solution would work as described below (see Figures 6.2.1.2-1 and
6.2.1.2-2):
  * In case the packet classification is performed by the GGSN/PGW, upon > packet classification the GGSN/PGW derives the FPI to be provided > in downlink user plane data packets based on configuration or > based on the FPI parameters received from the PCRF within the > corresponding PCC Rule. In case the packet classification is > performed by the TDF based on configuration or based on ADC rules > received from the PCRF, the TDF marks the packet according to the > result of the packet classification. Then, GGSN/PGW performs FPI > marking based on PCC rules which take into account the result of > packet inspection received from the TDF and then provides the FPI > marking in the downlink user plane data packets.
  * When receiving the FPI in a user plane packet, the SGSN, or the > Serving Gateway (SGW), copies it, without modifying its value, > into a correspondent information element over Gb, Iu or S1. In > order to support roaming scenarios, the FPI should be forwarded > over Gb, Iu or S1 together with the HPLMN ID and additional > information, added by the SGSN or SGW, which indicates whether the > FPI is assigned by a GGSN/PGW in the Home PLMN, by a GGSN/PGW in > the Visited PLMN or by a GGSN/PGW for which the FPIs are > coordinated across the different operator group PLMNs and the > serving PLMN of the SGSN or SGW (Operator Group GGSN). Absence of > additional information is an indication of a VPLMN provided FPI.
NOTE: The SGSN or SGW determines and indicates \"Operator Group GGSN\" based
on local configuration.
  * For roaming subscribers, based on local configuration, and taking > into account the HPLMN ID and the GGSN/PGW location information > provided by the SGSN or SGW, the RAN may remap the FPI received in > the downlink user plane packet to a value locally configured in > the RAN. The RAN uses the FPI associated to each downstream user > plane packet and the QoS parameters associated to the bearer, such > as the QCI, to prioritize the packets delivered over the air > interface.
Editor\'s note: The current description of the usage of the FPI in roaming
scenarios is aligned with what was defined in Rel-11 for SIRIG, where
remapping of the SCI values in downlink user plane packets is performed by the
GERAN access in VPLMN. Considering that the FPI, differently from Rel-11 SCI,
is applicable to all RATs, it is FFS whether other solutions should be
considered (e.g. remapping of the FPI at the SGW, usage of GTP firewalls, or
others).
{width="5.379166666666666in" height="3.4923611111111112in"}
Figure 6.2.1.2-1: RAN congestion mitigation based on the FPI with packet
classification performed by the GGSN/PGW.
{width="6.677777777777778in" height="3.5458333333333334in"}
Figure 6.2.1.2-2: RAN congestion mitigation based on the FPI with packet
classification performed by the TDF.
#### 6.2.1.3 Impact on existing entities and interfaces
GGSN and PGW:
  * Marking of the Flow Priority Indicator (FPI) in downlink user plane > data packets based on the configuration or the policies received > from the PCRF and the information collected after some form of > packet inspection.
  * Inclusion of the information needed to enable charging based on FPI > when reporting over online/offline charging interfaces and when > performing credit control over online charging interfaces.
  * In case the TDF is deployed for packet classification, taking into > account the received packet classification for determining the FPI > value which is then provided in the downlink user plane data > packets.
TDF:
  * Marking of the downlink user plane data packets based on the > configuration or the policies received from the PCRF and the > information collected after some form of packet inspection.
  * Inclusion of the information needed to enable charging based on FPI > when reporting over online/offline charging interfaces and when > performing credit control over online charging interfaces.
  * Inclusion of the FPI in CDRs and transfer the FPI over > online/offline charging interfaces.
NOTE: This can be done if TDF marks the classified packets in the same way as
PCEF will mark FPI in the downlink packets. This can be achieved by having
appropriate configuration at the TDF or appropriate ADC Rule setting by the
PCRF.
SGSN and SGW:
  * When receiving the FPI in a packet, the SGSN, or SGW, copies it, > without modifying its value, into a correspondent information > element over Gb, Iu or S1.
  * Together with the FPI, the SGSN, or SGW, provides to the RAN the > HPLMN ID and additional information, which indicates whether the > FPI is assigned by a GGSN/PGW in the Home PLMN, by a GGSN/PGW in > the Visited PLMN or by a GGSN/PGW for which the FPIs are > coordinated across the different operator group PLMNs and the > serving PLMN of the SGSN or SGW (Operator Group GGSN).
PCRF:
  * Provision of PCC/ADC Rules to control FPI marking on per subscriber > and/or per application basis.
OCS and OFCS:
  * Support for charging differentiation on the applied FPI based on the > principles for PCC flow/application based charging.
BSC, RNC and eNodeB:
  * Usage of the FPI, in conjunction with the QCI, to prioritize the > packets delivered over the air interface.
Editor\'s note: The impacts on existing entities and interfaces with PMIP-
based S5/S8 are FFS.
#### 6.2.1.4 Solution evaluation
Editor\'s note: The solution evaluation is FFS.
### 6.2.2 Solution 2.2: Flow and bearer QoS differentiation by RAN congestion
handling description (FQI)
#### 6.2.2.1 General description, assumptions, and principles
Editor\'s Note: This subclause should identify the key issues address by this
solution.
This solution addresses key issues #1, #2 and certain aspects of key issues
#3, #4 and #5. The solution applies to non-GBR bearers.
The PGW/GGSN may mark downlink data packets with FQI -- Flow QoS Index,
identifying a specific RAN treatment that these packets should receive. The
marking is done based on operator\'s policies and on the information collected
after some form of packet inspection (e.g. shallow packet inspection, L7 DPI,
heuristic analysis or others) performed either by the GGSN/PGW itself or by
the TDF. There is full flexibility in how the traffic flows are mapped to FQI
markings in the core network. A number of criteria can be used such as:
\- Service category (such as web, file download, video, etc.)
\- Application (such as YouTube, Skype, etc.)
\- Subscription (such as Gold, Silver, Bronze)
\- Header fields (such as a range of IP addresses or port numbers)
\- Usage policies (such as heavy user, light user)
\- Any combination of the above.
For GTP-based interfaces the FQI marking is provided by the GGSN/PGW in the
GTP-U header of downlink user plane packets.
In case the TDF performs packet inspection, the GGSN/PGW performs FQI marking
based on PCC rules which take into account the result of packet inspection
received from the TDF and then provide the FQI in the downlink user plane data
packets within the GTP-U header.
Editor\'s Note: How to deliver the FQI to the RAN with PMIP-based S5/S8 is
FFS.
The RAN handling of a given traffic class at a certain congestion level is
described by the RAN Congestion Handling Descriptor (RCHD) as will be
described below. The traffic class of a flow belonging to a specific user is
determined by the combination of QCI corresponding to the radio bearer and the
FQI packet marking of the traffic flow. For each QCI, a traffic class is also
defined by the QCI in combination with no FQI packet marking. For each traffic
class, separate RCHDs are provided for the set of congestion levels {low,
high}. Hence, the RCHD describes the RAN handling per QCI, per FQI, per
congestion level.
Editor\'s Note: The number of congestion levels to be defined is FFS.
NOTE 1: One example for defining downlink traffic classes is that traffic
flows with QCI=9 are differentiated by different FQI values. Another example
for defining both downlink and uplink traffic classes is that traffic flows
are differentiated into bearers with non-standardized QCI values, and no FQI
marking is used. Other examples for defining traffic classes using a
combination of FQI and QCI values (both standardized and non-standardized) are
also possible.
NOTE 2: Certain QCIs may be excluded from the RCHD based description. In that
case, QoS differentiation is based on the QCI only.
In case of congestion, i.e., when the resource demand of traffic flows exceeds
the available capacity, the RAN performs allocation of resources as described
by the QCI characteristics and the RCHDs of the flows. The QCI based
differentiation is applied first. The RAN then tries to allocate resources as
described by the RCHDs of the flows corresponding to the lowest congestion
level, within the bounds of the QCI characteristics; if that is not feasible
it tries to apply the RCHDs at a higher congestion level. The RAN applies the
lowest congestion level to the set of traffic flows that is feasible within
the bounds of the QCI characteristics. Hence the QCI characteristics of
traffic flows always take precedence over the RCHDs of the traffic flows in
determining the resource sharing.
The RCHD shall be capable of expressing a bitrate which corresponds to the
minimal amount of resources allocated to the given traffic flow at a given
congestion level. The bitrates corresponding to the lowest congestion level
that is feasible in the current resource situation are applied observing the
QCI based constraints of the bearers. Once the RAN determines that the bitrate
target cannot be achieved on a given congestion level, it tries to apply the
bitrates for the next higher congestion level. The RCHD may express the RAN
handling by other parameters as well, instead of or in addition to the
bitrate.
The allocation of the remaining resources above the targets described by the
lowest feasible congestion level RCHD, or the allocation of the resources if
even the highest congestion level is not feasible, is implementation specific.
However, it shall be possible to allocate these remaining resources such that
if flow A has higher bitrate targets than flow B at the lowest feasible
congestion level, or at the highest congestion level if none of the congestion
levels are feasible, then flow A is assigned more resources compared to flow
B. In this way, the operator can have control over how the remaining resources
area allocated.
The RCHD may also describe how the radio channel quality is taken into account
in the resource allocation under congestion. A user with a worse channel
quality may experience a different performance at a given congestion level
compared to a user with a better channel quality. By taking the channel
quality into account, it may be possible to control whether a user with worse
channel quality is being compensated by additional radio resources and to what
extent such a compensation is done. Hence, RCHD parameters such as for example
the bitrate may be combined with the consideration of the radio channel
quality to determine the actual resource sharing.
The parameters applied for the selected RCHD are considered over an averaging
period. The details of how the averaging is performed are implementation
specific. The averaging may e.g., take into account how the packet arrivals
are distributed over time.
In addition to enabling differentiated handling in congestion scenarios the
RCHD may also be used to express an optimized handling of a certain traffic
class to the RAN. Besides the RAN handling for general best effort traffic,
the use of different RCHDs can for example make it possible to express an
optimized handling for a certain types of application/service classes in order
to further improve the radio resource utilization and/or user experience.
The RCHD is realized by one or more vendor defined parameters that are
configurable via O&M. The RAN is required to enable the configuration of the
RCHD on a per QCI, per FQI, per congestion level granularity. The
standardization of the FQI values themselves are not necessary. Consistency of
the RAN handling in a multivendor environment is ensured by the requirement
for the same granularity of RCHD configuration, by the requirement that RCHD
is capable of expressing a bitrate which corresponds to the minimal amount of
resources allocated to the given traffic flow at a given congestion level, and
by the requirement that the RAN applies the lowest congestion level\'s RCHD
that is feasible.
Regarding the relationship of FQI and rel-11 SCI, FQI is backwards compatible
to SCI for GERAN and can be regarded as an evolution of SCI. The SCI is
typically associated with service category or application based
classification, whereas the FQI is meant to allow any type of classification.
FQI allows operators to explicitly and quantitatively set the RAN handling at
different levels of congestion, which is not supported by SCI. SCI is intended
for application specific RAN optimizations, which is possible, although not
required by the FQI approach.
It is suggested that the rel-11 SCI mechanism for GERAN is evolved to the
rel-12 FQI concept. The rel-11 GERAN SCI based treatment may need to be
evolved to implement the RCHD based handling as described above. This
evolution is useful in order to harmonize the packet marking treatment for all
3GPP RATs according to the UPCON approach. This evolution is backwards
compatible: as long as the packet marking formatting is backwards compatible
on stage 3 level, rel-11 SCI implementations and rel-12 FQI implementations
can co-exist in the same network, no matter whether some RAN nodes or some CN
nodes are of a different release. This means that if there are existing GERAN
realizations of SCI which can improve the radio resource efficiency, they can
continue to be used in the context of the FQI approach.
The following tunnelling/marking solutions are under consideration to be used
between the TDF and the GGSN/PGW in order to classify packets detected by the
TDF:
\- DSCP;
NOTE 3: Marking of DSCP bits for this purpose can interfere with appropriate
traffic handling in some operator transport networks. The DSCP marking may
also get remarked by routing entities within the operator networks.
\- Tunnel which carries DSCP marking implemented in the inner IP packet
header;
In case of Tunnel which carries DSCP marking implemented in the inner IP
packet header option, original DSCP markings used in operator\'s network are
used in the outer DSCP field of the tunnel in order to keep the transport
network unaffected. The examples of the tunnels which may carry the DSCP
marking are: GRE, IP-in-IP tunnel, depending on implementation.
Editor\'s note: The additional tunnelling options (e.g. GTP-U) are FFS and can
be exploited in the future.
Information to enable charging differentiated on the FQI assigned to the
packet flow should be included in charging records and transferred over
online/offline charging interfaces. This is because the FQI can be used for
traffic handling differentiation, hence may affect the user experience of the
customer and may be used by the operator to create different service profiles.
The flow/application-based charging function of PCC is used to fulfil this
purpose. To enable differentiated charging for this purpose, the operator may
assign different charging-keys or different charging-key/service-identifier
pairs to the PCC/ADC rules matching the respective service data flows/detected
application traffic.
#### 6.2.2.2 High-level operation and procedures
Overall the solution would work as described below:
\- In case the packet classification is performed by the GGSN/PGW, upon packet
classification the GGSN/PGW derives the FQI to be provided in downlink user
plane data packets based on configuration or based on the FQI parameter
received from the PCRF within the corresponding PCC Rule.
\- In case the packet classification is performed by the TDF, upon packet
classification, the TDF marks the downlink packets according to the result of
the packet classification based on configuration or based on the ADC rule
received from the PCRF. Then, GGSN/PGW performs FQI marking based on PCC rules
which take into account the result of packet inspection received from the TDF.
\- When receiving the FQI in user plane packet, the SGSN, or the Serving
Gateway (SGW), copies it, without modifying its value, into a correspondent
information element over Gb, Iu or S1.
\- In the roaming case, the SGSN or the SGW may remap the FQI to a value used
in the VPLMN based on a roaming agreement, or in the absence of a roaming
agreement to a value that may be based on the HPLMN. The GGSN/PGW in the HPLMN
may also set the FQI based on the VPLMN. The usage of these options can be
determined by operator configuration.
Editor\'s Note: The solution for the roaming case can use either way. Further
study on roaming can be addressed in later releases.
\- The RAN handling is determined by the QCI and the RCHD for the given
combination of QCI and FQI of the traffic flow for the given congestion level,
as described above.
#### 6.2.2.3 Impact on existing entities and interfaces
GGSN and PGW:
  * Marking of the Flow QoS Index (FQI) in downlink user plane data > packets based on the configuration or the policies received from > the PCRF and the information collected after some form of packet > inspection.
  * Inclusion of the information needed to enable charging based on FQI > when reporting over online/offline charging interfaces and when > performing credit control over online charging interfaces.
  * In case the TDF is deployed for packet classification, taking into > account the received packet classification for determining the FQI > value which is then provided in the downlink user plane data > packets.
TDF:
  * Marking of the downlink user plane data packets based on the > configuration or the policies received from the PCRF and the > information collected after some form of packet inspection.
  * Inclusion of the information needed to enable charging based on FQI > when reporting over online/offline charging interfaces and when > performing credit control over online charging interfaces.
NOTE: This can be done if TDF marks the classified packets in the same way as
PCEF will mark FQI in the downlink packets. This can be achieved by having
appropriate configuration at the TDF or appropriate ADC Rule setting by the
PCRF.
SGSN and SGW:
  * When receiving the FQI in a packet, the SGSN, or SGW, copies it, > without modifying its value, into a correspondent information > element over Gb, Iu or S1.
PCRF:
  * Provision of PCC/ADC Rules to control FQI marking.
OCS and OFCS:
  * Support for charging differentiation on the applied FQI based on the > principles for PCC flow/application based charging.
BSC, RNC and eNodeB:
  * Realize packet treatment taking into account the RCHD for the > different congestion levels which can be set via vendor specific > QoS parameters for a combination of QCI and FQI.
Editor\'s Note: The impacts on existing entities and interfaces with PMIP-
based S5/S8 are FFS.
#### 6.2.2.4 Solution evaluation
Editor\'s Note: The solution evaluation is FFS.
#### 6.2.2.5 RAN impacts
The following impacts are expected for RAN groups:
  * Evaluate the feasibility of the proposed RCHD approach for the RAN > handling of traffic flows using the minimal bitrates in the RCHDs > to determine the congestion level.
  * Identify the appropriate specifications and include a description of > the RAN handling based on the text above.
### 6.2.3 Solution 2.3: Enhancing existing bearer concepts
#### 6.2.3.1 Solution principles
This solution is targeting to solve RAN user plane congestion mitigation by
re-using and enhancing the existing bearer concept to cope with RAN overload
situations. This solution is based on the following principles and pre-
requisites:
\- The Core Network is in charge of subscriber and service management (policy
control) and is not required to be aware of RAN resources or cell load
situation.
\- The RAN takes care of congestion handling, resource management (RRM) and
performs resource allocations (policy enforcement).
\- The QoS and priority on a per subscriber or service level (= policy) is
delivered from the Core Network to the RAN via bearer specific signalling.
\- The UE supports multiple dedicated bearers, which can be pre-established,
e.g. established at time of attachment to the network. Dedicated bearers are
used on a per need basis and it is up to the operator how many are pre-
established. At least one dedicated bearer is required for moving traffic from
the default bearer.
\- Deep Packet Inspection functionality in the network (via PCEF enhanced with
ADC or TDF) is used to identify application traffic and classify/mark data
packets. On a per need basis and at any time this functionality could also be
used for radio bearer reconfiguration, e.g. addition of a new dedicated bearer
fitting to the detected application class.
\- The PCEF performs the bearer binding based on the configured PCC rules and
packet classification, i.e. traffic flows are allocated to certain (pre-
established) dedicated bearers in downlink direction based on SDF rules and
the actual packet marking. These dedicated bearers are adapted to carry
certain types of applications e.g. by using pre-defined QCI and ARP values.
NOTE 1: If the Deep Packet Inspection functionality is integrated in the PCEF,
the PCEF can use it for evaluating the bearer binding for SDFs detected via
pre-defined PCC rules.
> \- In case the Deep Packet Inspection is performed by the TDF, the TDF
> classifies the packets and applies corresponding markings. Then the PCEF,
> upon receiving those marked packets, performs the bearer binding based on
> the configured PCC rules and packet classification, i.e. traffic flows are
> allocated to certain (pre-established) dedicated bearers in downlink
> direction based on SDF rules and the actual packet marking. These dedicated
> bearers are adapted to carry certain types of applications e.g. by using
> pre-defined QCI and ARP values.
>
> \- In uplink direction the UE can, without the need for an update of
> installed TFTs, use the same bearer as the network used in downlink
> direction for a certain flow. This is applicable in case of DSCP based
> marking performed by the PCEF. In such a case it is also under consideration
> that TDF, in order to apply marking of packets sent to the PCEF, uses either
\- DSCP
NOTE 2: Marking of DSCP bits for this purpose can interfere with appropriate
traffic handling in some operator transport networks. The DSCP marking may
also get remarked by routing entities within the operator networks.
\- Tunnel which carries DSCP marking implemented in the inner IP packet header
In case of Tunnel which carries DSCP marking implemented in the inner IP
packet header option, original DSCP markings used in operator\'s network are
used in the outer DSCP field of the tunnel in order to keep the transport
network unaffected. The examples of the tunnels which may carry the DSCP
marking are: GRE, IP-in-IP tunnel, depending on implementation.
The solution also addresses the following limitation with the current EPS
bearer concept:
\- An application uses (potentially many) very short-lived parallel UDP and/or
TCP data flows, for which service data flow filters detected via ADC/PCC rules
are too short-lived to allow PCC system to control them using SDF templates
(aka application with non-deducible service data flows).
#### 6.2.3.2 High-level operation and procedures
The EPS bearer concept allows establishing dedicated bearers in addition to
the default bearer. Different QoS parameters (QCI and ARP) can be assigned to
each dedicated bearer. This guides the radio scheduler to assign resources to
each bearer according to the bearer\'s priority and the actual cell load, thus
is able to reduce the throughput of low-priority traffic in case of
congestion.
The radio scheduler is able to differentiate any multi-rate traffic mix, it
estimates the resources required for GBR bearers and shares the remaining
resources between non-GBR bearers according to traffic priority.
A dedicated non-GBR bearer may carry several applications requiring similar
QoS treatment in CN and RAN. The core network can be aware of applications and
their QoS requirements by using DPI functionality and assigns applications
with similar QoS and priority requirements to one dedicated bearer. This
allows the RAN to reduce the throughput of low-priority applications (carried
in appropriate dedicated bearers) once congestion occurs without explicit
notification and assistance of the core network.
The number of established dedicated bearers per UE, e.g. based on subscriber
priority (bronze, silver, gold), is determined by operator policies. Operator
can also determine whether and which of the dedicated bearers are pre-
established, e.g. at time of attachment to the network.
The basic concept of this solution as shown in the following figure is to
combine the load-aware functionality in the RAN (eNB/NodeB) with the
application and policy awareness of the core, which is enhanced by DPI
functionality to detect certain applications. Two configurations are possible,
PCEF enhanced with ADC and TDF:
Figure 6.2.3.2-1: Reference architecture with PCEF enhanced with ADC.
Figure 6.2.3.2-2: Reference architecture with TDF.
In order to limit the need for frequent bearer modifications each UE may have
a small number of pre-allocated dedicated bearers (at a minimum, one pre-
allocated dedicated non-GBR bearer would be needed for selected UEs). In case
of PCEF enhanced with ADC, the application detection is done as part of the
SDF filter evaluation, which may implicitly entail usage of DPI functionality.
In case of TDF, the application detection is provided by the TDF which
classifies the packets and applies corresponding marks. The PCEF has SDF
filters configured using those marks and the SDF filter evaluation leads to
appropriately assigning the marked packets to the pre-established bearers.
This can be achieved by using filter rules including ToS classification
according to TS 29.212 [7] and marking the packets with DSCPs accordingly.
The allocation/modification of bearers can be further optimized when triggered
by subscriber policy which reflects service subscription information; either
controlled by the PCRF or pre-defined via local policies in the PCEF.
Inactivity timers can be used to remove idle bearers. Dedicated bearers may
consume network resources; however with intelligent management the total
number of active dedicated bearers can be controlled.
In addition, if the UE performs automatic flow mapping to bearers in uplink
direction (which is a new functionality in the UE) allows for reusing the
downlink QoS bearer optimization also for uplink congestion mitigation.
Table 6.2.3.2-1: Example of flow tracking for automated bearer mapping.
* * *
Remote IP local port remote port protocol DSCP dedicated bearer life time
state state 199.239.136.200 51452 80 TCP 12 1 60s active 85.183.195.96 51455
80 TCP 12 1 70s active 74.125.43.149 51459 80 UDP 12 1 70s active 2.18.175.139
51470 80 TCP 14 2 30s active
* * *
The UE can learn how flows must be mapped to dedicated bearers by simply
tracking the flows in downlink direction and assign corresponding packets in
uplink direction to the same bearers. The flow table (see example in Table
6.2.3.2-1) contains all flows detected in dedicated bearers (downlink
direction, i.e. mapped by packet core). In uplink packets are mapped according
to flow table entries stored in the UE. In that sense each entry emulates an
uplink filter, which is not created by signalling, i.e. flow table entries
take precedence over TFT filters in the UE. DSCP value is reflected into
uplink packets to comply with TFT verification rules in the core network. Flow
entries which are aged out can be actively removed by the UE (e.g. TCP FIN
packet can trigger flow removal).
Optionally, if the core receives RAN congestion information in band or out
band signalling, the information can also be used adjusting the bearer
configurations dynamically and at any time, e.g. establishing a new dedicated
bearer for certain application traffic.
#### 6.2.3.3 Impact on existing entities and interfaces
For subscriber differentiation based on subscription data, the solution
doesn\'t require any standardisation effort in case of DSCP marking usage.
TDF/PCEF:
\- For application differentiation, the DPI functionality is required in the
network. The DPI functionality can be part of a TDF or a PCEF enhanced by ADC.
\- In case of TDF, the derived marking is based on configuration or based on
the new parameter received from the PCRF within the corresponding ADC Rule.
UE:
\- Needs to support multiple dedicated bearers.
\- For uplink congestion mitigation the UE needs to automatically assign
packets from certain flows to the corresponding bearers in uplink direction.
Editor\'s Note: It is for further study, what are the standardization impacts
on the UE.
#### 6.2.3.4 Solution evaluation
\- This solution offers an alternative way to solve key issue #1, i.e. RAN
user plane congestion mitigation by re-using and enhancing (e.g. using DPI
functionality in the network or improve uplink bearer usage) the existing
bearer concept, i.e. no or only minor standardisation effort is required.
\- It fully supports congestion handling on subscriber- and application-level.
\- Standardized interfaces and procedures for multi-vendor support are re-
used. No new interfaces or protocols are required.
\- No impacts on RAN foreseen as the existing bearer based QoS control concept
are re-used.
\- It does not rely on any form of RAN congestion awareness in the core, i.e.
no feedback loop is needed and there is no issue with signalling load towards
and in the core network. If RAN congestion information is indicated to the CN,
bearer usage can be adapted and optimized.
\- It works also for fast changing load and congestion situations in RAN. It
is much more responsive to congestion and scalable than any feedback-based
solution.
\- It allows the radio scheduler a full visibility about the traffic demand,
so RAN can work in full buffer model and can allocate traffic to available
resources according the current radio conditions. It allows the RAN to react
on congestion situations without assistance from CN.
\- It does not support content-level optimization or adaptation mechanisms, as
these are typically building on core network functions. Application-level
adjustments would require congestion feedback towards the core network.
\- It requires the capability of the UE to support multiple dedicated bearers
which is guaranteed within EPS. The number of different prioritisation levels
is limited to the UEs capability to support several established dedicated
bearers. Furthermore, it depends on operator\'s bearer configuration policies,
e.g. the VPLMN operator might have different bearer policies than the HPLMN
operator.
\- In order to replicate the optimised downlink QoS control in uplink, the UE
is required to perform automatic flow mapping in uplink direction. This
requires that the traffic aggregate can be unambiguously identified by the
IP-5-tuple.
\- In respect to application detection, this solution has the same
implications (i.e. DPI processing load or issues with non-deducible service
data flows) as in-bearer marking solutions (e.g. SCI or FPI).
\- The proposed multiple dedicated bearer solution allows for re-use of the
bearer based QoS mechanism in RAN and CN, thus going beyond pure in-bearer
packet prioritisation.
### 6.2.4 Solution 2.4: Differentiation of IP flows based on flow level QCI
#### 6.2.4.1 General description, assumptions, and principles
This solution addresses the key issue on \"RAN user plane congestion
mitigation\". The solution also addresses certain aspects of the key issue on
\"Video delivery control for congestion mitigation\" and certain aspects of
the key issue on \"Differentiated treatment for non-deducible service data
flows in case of RAN user plane congestion\".
This solution is a further enhancement of Solution 2.1. In Solution 2.1, the
downlink traffic flows within a single QCI can be prioritized based on the FPI
value assigned by the DPI. Since a single QCI is bound to a single PDB (Packet
Delay Budget), if different applications require different PDB values, then
multiple QCI values and therefore also multiple bearers are required with
Solution 2.1.
This solution addresses the above limitation in Solution 2.1; the same
(default) bearer can be used to carry applications with different PDB
requirements, and therefore the NAS/RRC signalling related to the bearer
establishment can be reduced.
Only the differences to the Solution 2.1 are highlighted here.
#### 6.2.4.2 High-level operation and procedures
The FPI is defined here as traffic flow level QCI. Both the QCI marking of
each user plane packet and the Priority level associated to a Service Data
Flow (SDF) aggregate via its bearer level QCI are used to differentiate
between IP flows of the same UE, and are also used to differentiate between IP
flows of different UEs.
\- If the usage of the traffic flow QCI is enabled in the RAN, and if the user
plane packet is marked with QCI value, then RAN uses this QCI value for
scheduling as defined in subclause 6.1.7.2 of [11].
\- If the packet does not include any QCI marking, or if the RAN does not
support the usage of traffic flow QCI, the packets should be scheduled
according to a bearer level QCI in the RAN as defined in subclause 6.1.7.2 of
3GPP TS 23.203 [11]. The default FPI is not needed in this solution.
If the UE has multiple bearers with different bearer level QCIs, the traffic
flows in different bearers can be assigned the same flow level QCI value. In
this case the RAN treats these traffic flows with equal priority.
With this solution a single bearer can carry packets associated via its
traffic flow level QCI into different Packet Delay Budget (PDB) and Packet
error loss rate (PELR) values.
#### 6.2.4.3 Impact on existing entities and interfaces
GGSN and PGW
  * See solution 2.1.
TDF
\- See solution 2.1
SGSN and SGW
  * See solution 2.1, except the HPLMN ID is not needed.
PCRF
  * See solution 2.1.
BSC, RNC and eNodeB
  * Usage of the flow QCI, in conjunction with the bearer QCI, to > prioritize the packets delivered over the air interface
NOTE: The per flow differentiation mechanism may not be able to use the same
QoS implementation in the RAN node as the implementation for bearer QoS. In
that case, it is not possible to implement the same QoS behaviour for the
bearer based QCI and the flow based QCI.
OCS and OFCS:
  * No impacts.
#### 6.2.4.4 Solution evaluation
Editor\'s note: The solution evaluation is FFS.
Compared to the Solution 2.1, this solution has less impact to BSC, RNC and
eNodeB as the prioritization is based on QCI and not a new factor. The
solution has less impact to SGW/SGSN, as the HPLMN ID is not needed. The
solution does not have impact to OCS/OCFS as the QCI is not a new factor for
charging.
## 6.3 UE-based solutions for RAN user plane congestion management
### 6.3.1 Solutions for uplink congestion management
### 6.3.2 Solutions for handling of unattended traffic
#### 6.3.2.1 Solution 3.2.1: Unattended traffic limitation in the UE in case
of RAN congestion
##### 6.3.2.1.1 General description, assumptions, and principles
This solution addresses part of Key issue #1, in particular, limiting
unattended traffic in case of RAN congestion.
Whether an application is running in the foreground or in the background of a
device, and therefore whether the traffic the application generates is
attended or unattended, is currently only known at the UE. How the UE can
detect such traffic is implementation dependent, but techniques may include
detecting the UE is not used by the user, e.g. the phone is in a pocket or
left on a desk, or detecting applications that are running on the background,
e.g., not being displayed to the user.
If the UEs were required to provide to the RAN or CN, for each flow, whether
the traffic flow is attended or unattended, this is very likely to produce
undesired overhead**.** One possibility is that the UE indicates whether the
UE itself is attended or unattended, where all flow are considered attended or
unattended respectively, but that would be a very coarse indication and
possibly not very useful.
On the other hand, the UE can have the capability of knowing the UE situation
(user present/ not present), which application is requesting a connection, and
whether the application is running on the background or in foreground (e.g.
being displayed to the user).
This document proposes a solution where the UE is responsible for blocking
unattended traffic when the network requests it and based on configuration.
##### 6.3.2.1.2 High-level operation and procedures
The solution works on two levels:
  * Dynamic indication to UE based on RAN congestion:
\- Network indication to block transmission of certain unattended traffic
\- This indication is dynamic.
Editor\'s Note: It is TBD whether this indication is an indication of
congestion or an explicit indication to not initiate unattended traffic. It is
also TBD whether the indication is provided by the RAN or CN. Given ongoing
work in RAN2 for 3GPP-WLAN radio interworking, it is FFS whether parts of the
design adopted in RAN2 can be reused for this solution.
Editor\'s Note: Security aspects and network operational impacts of providing
such indication need further evaluation.
\- There may also be a time indication of how long to block unattended
traffic.
  * Configuration in UE:
\- The UE is configured with which applications are subject to being blocked
when the NW sends indication above, which application are exempt and
optionally default actions for application not explicitly identified.
\- Operators may configure the device, e.g. via OMA DM, using application ID
similar as defined for DIDA in TS 24.312 [6] subclause 5.7.
Editor\'s Note: The details of how the UE is configured are FFS.
The UE behaves as follows. When the UE receives an indication to block
unattended traffic, for each application, it checks the configuration for the
particular application ID and:
\- If the application is subject to being blocked and is identified as
unattended, the UE internally blocks uplink traffic generated by the
application.
\- If the application is exempt from being blocked or is identified as
attended, the UE does not block uplink traffic generated by the application.
There is no application impact in this solution.
Editor\'s Note: It is FFS what the implications are to the applications if the
keepalive messages are being blocked when the application is unattended.
Although this solution has direct impact on uplink transmission reduction, it
can also reduce traffic load in the downlink. For instance, there are many
applications that pull data from the network periodically without user
interaction (e.g. e-mail, Facebook, etc.). In that case, the uplink traffic of
the request is not large, but potentially the downlink traffic caused by the
update may be substantial.
##### 6.3.2.1.3 Impact on existing entities and interfaces
UE:
\- Support indication from network.
\- Identify and block traffic based on network indication and configuration in
the UE.
\- Support of new OMA DM configuration.
eNB:
\- May have impact depending on how indication is provided to the UE.
MME:
\- May have impact depending on how indication is provided to the UE.
S-GW:
\- May have impact depending on how indication is provided to the UE.
P-GW:
\- May have impact depending on how indication is provided to the UE.
##### 6.3.2.1.4 Solution evaluation
# 7 Evaluation
Editor\'s note: this clause contains the evaluation of various solutions.
# 8 Conclusions
Editor\'s Note: The clause will capture agreed conclusions from the key issues
and architecture solutions clauses.
#