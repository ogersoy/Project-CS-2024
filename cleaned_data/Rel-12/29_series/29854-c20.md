# Foreword
This Technical Report has been produced by the 3^rd^ Generation Partnership
Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document analyses the use cases for the need of update of
subscription data shared by multiple subscribers, the existing mechanisms in
3GPP networks which is or may be used for shared data update, possible
solutions and impact on the existing interfaces and relevant elements.
The recommendation of the document is used to decide whether it is required to
standardize any solution, and which is the final preferred solution if further
standardization is needed.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 29.272: \"Evolved Packet System; MME and SGSN Related Interfaces
Based on Diameter Protocol\".
[3] 3GPP TS 29.328 \"IP Multimedia (IM) Subsystem Sh interface; signalling
flows and message contents\".
[4] 3GPP TS 29.002: \"Mobile Application Part (MAP) specification\".
[5] 3GPP TR 23.769: \"Group based Enhancements\".
[6] 3GPP TS 29.228: \"IP Multimedia (IM) Subsystem Cx and Dx interface;
signalling flows and message contents\".
# 3 Definitions, symbols and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
TR 21.905 [1] and the following apply.\ A term defined in the present document
takes precedence over the definition of the same term, if any, in TR 21.905
[1].
# 4 Scenarios and Existing Mechanisms
## 4.1 Introduction
This section describes the use cases for which multiple subscribers may share
the same data and the data if modified need to be updated for all related
subscribers, and the existing mechanisms for each use case.
## 4.2 Share of IMS Service Data
### 4.2.1 Introduction
In the 3GPP IMS network, the service data is owned by the application server
and it could be stored in the HSS as Repository Data, which implies that
contents are unknown (i.e. transparent) to HSS. Therefore, even if some parts
of the service data could be shared by multiple subscribers, this is unknown
to HSS. On the other hand, from an HSS perspective data is accessible and
manageable per subscriber, as per existing 3GPP specifications. This means
that when some data needs to be modified, it requires an update operation per
subscriber, even if this data is also part of other subscribers' data set.
Handling of shared IMS Service Data among multiple individual subscribers is
not defined in 3GPP but implementation specific solutions are currently
supporting this possibility.
### 4.2.2 Existing Mechanisms
So far the subscription to notification mechanism over Sh interface is defined
for the HSS to notify the AS of the update of the subscription data.
Wildcarded Public User Identity can be taken as another mechanism to address
the share of service data under some specific conditions, i.e. a Wildcarded
Public User Identity represents a collection of Public User Identities that
share the same service profile and same service data, and are included in the
same implicit registration set.
### 4.2.3 Drawbacks
Depending on how implementation specific solutions manage the handling of
shared IMS service data, if the shared IMS Service Data is stored as
subscription data by a lot of subscribers, with the existing subscription to
notification mechanism over Sh interface, massive amount of messages conveying
the same updated service data will be exchanged over Sh interface since the
notification of the update would be applied to multiple subscribers and the
update over Sh interface has to be done per subscriber.
The mechanism with Wildcarded Public User Identity is not applicable in the
case the Public User Identities of the subscribers are independent of each
other, or not satisfying any of the conditions for Wildcarded Public User
Identity.
## 4.3 Share of IMS Service Profile
### 4.3.1 Introduction
In the 3GPP IMS network, part of the IMS Service Profile data may be shared by
multiple Public User Identities of a single user, and they may be shared by
multiple subscribers as well. In the case the shared part of the IMS Service
Profile data is updated, the HSS needs to send the updated Service Profile per
impacted subscriber to the S-CSCFs where the relevant user registered. This
may create massive signalling over Cx interface, especially considering that
all Service Profiles related to the Public User Identities belonging to an
implicit registration set have to be downloaded to the S-CSCF even if only a
small part of the Service Profile is updated.
### 4.3.2 Existing Mechanisms
Over IMS Cx interface, a SiFC feature is defined. If the SiFC feature is
supported by the HSS and S-CSCF, the HSS shall download the identifiers of the
shared iFC sets. If either the HSS or the S-CSCF does not support the SiFC
feature, the HSS shall download the complete iFCs. A Shared iFC Set points to
a set of Initial Filter Criteria which may be shared by several Service
Profiles locally administered and stored at the S-CSCF and the HSS, and the
network operator is responsible for keeping the local databases in the S-CSCFs
and HSSs consistent. When receiving the identifiers of the shared iFC sets,
the S-CSCF maps the downloaded identifiers onto the shared iFC sets. The SiFC
identifiers within the service profiles for each subscriber are not changed,
thus there is no need for the HSS to send extra message to update the
subscription in the S-CSCF, and the signalling load and traffic can be saved a
lot.
Wildcarded Public User Identity can be taken as another mechanism to address
the share of service profile under some specific conditions, i.e. a Wildcarded
Public User Identity represents a collection of Public User Identities that
share the same service profile and same service data, and are included in the
same implicit registration set.
### 4.3.3 Drawbacks
Shared iFC feature can be taken as an optimization to alleviate the signalling
load between the HSS and S-CSCF, and may also save storage resource in the HSS
and S-CSCF for the iFCs, especially in the case the same Shared iFC set is
shared by multiple subscribers. However over IMS Cx interface, update of
Shared iFC is limited to a specific IMS subscriber who may have multiple
public user identities and multiple Service Profiles sharing the iFCs. If the
Shared iFC identifiers which are shared by multiple subscribers are updated,
the HSS still needs to update the S-CSCF per subscriber basis.
The mechanism with Wildcarded Public User Identity is not applicable in the
case the Public User Identities of the subscribers are independent of each
other, or not satisfying any of the conditions for Wildcarded Public User
Identity.
## 4.4 Share of CS/PS/EPS Subscription Data
### 4.4.1 Introduction
In the CS/PS/EPS network, some of the CS/PS/EPS subscription data may be
shared by multiple subscribers, e.g. the CAMEL data can be shared by multiple
CS or PS subscribers, and the APN Configuration may be shared by multiple PS
or EPS subscribers. Especially if a new service is to be deployed or a new APN
Configuration is to be applied, the same subscription data may be applied to
multiple subscribers.
In this case, even if some parts of the service data could be shared by
multiple subscribers, from an HSS/HLR perspective data is accessible and
manageable per subscriber, as per existing 3GPP specifications. This means
that when some data needs to be modified, it requires an update operation per
subscriber, even if this data is as well part of other subscribers' data set.
However, some implementation dependant solutions may internally define some
common data to be shared by multiple subscribers, although this is not covered
by existing 3GPP specifications. In this case, if the shared subscription data
is updated, by implementation dependant means the HLR/HSS could be able to
identify that this common data update affects multiple subscribers. Therefore
the HLR/HSS needs to send the updated subscription data per impacted
subscriber to the VLR/SGSN/MME/3GPP AAA Server where the relevant user is
registered. This may create massive signalling over D/Gr/S6a/S6d/SWx
interfaces. It may be beneficial to introduce some mechanisms to alleviate the
signalling between the HLR/HSS and VLR/SGSN/MME/3GPP AAA Server.
### 4.4.2 Existing Mechanisms
There is no specific mechanism in CS/PS/EPS network which can be used to
reduce the signalling traffic between the HLR/HSS and serving nodes for update
of subscription data which might be shared by multiple subscribers. The update
can be done only per subscriber over D/Gr/S6a/S6d/SWx interfaces, i.e. if part
of the subscription data is updated, whatever it is shared by multiple
subscriber or not, the HLR/HSS initiates Insert or Delete Subscriber Data
procedure or Profile Update procedure for each relevant subscriber.
### 4.4.3 Drawbacks
The existing mechanism for update of subscription data may create massive
signalling over D/Gr/S6a/S6d/SWx interfaces.
# 5 Alternative Solutions
## 5.1 Introduction
This section describes alternative solutions which can be used for
subscription data update shared by multiple subscribers in CS/PS/EPS/IMS
networks.
## 5.2 Description of Impacted Data
### 5.2.1 Introduction
This clause describes alternative mechanisms for identification of the
impacted data that is shared by multiple subscribers. These alternative
mechanisms can be applied to one or more of the alternative solutions.
### 5.2.2 Identification with Service Indication
This alternative only applies to Sh interface.
In IMS for Sh interface, one set of IMS service related transparent data can
be identified by Service Indication as defined in the 3GPP TS 29.328 [3]. The
Service Indication can be used to identify the impacted data over Sh interface
shared by multiple subscribers.
### 5.2.3 Identification by Data in the Request
This alternative only applies to Sol-B (see clause 5.5). In this case the
subscription data shared by multiple subscribers when updated is included in
the notification sent by the HSS. Therefore, the receiver can update the data
for the impacted subscribers.
### 5.2.4 Identification for All
In the case the subscription data shared by multiple subscribers are updated,
the HSS/HLR may include whole subscription data in the notification sent (as
in Sol-B, see clause 5.5) or it can only notify that whole subscription data
(in which the updated shared data are included) shall be retrieved (as in
Sol-A, see clause 5.4). The receiver can either update or retrieve whole
subscription data for the impacted subscribers.
## 5.3 Description of impacted users
### 5.3.1 Introduction
This clause does not describe an alternative solution on its own, but
alternative mechanisms when using a command to indicate an update of shared
data from multiple users, as considered in the following solutions:
  * Sol-A Shared data update notification (see clause 5.4);
  * Sol-B Direct download of shared data update by the HSS (see clause 5.5).
An important point is to identify the impacted users which may be quite
numerous. The objective is that such a command only identifies users for which
there is a shared data update; otherwise, e.g. if applied to more or even all
users, this may generate useless subscription data retrieval procedures.
### 5.3.2 Identification through a list of users
When data shared by multiple users is updated, the affected users can be
identified using a list of User-IDs AVPs (or equivalent AVPs).
As an example, in its current definition, the Reset command over S6a/d allows
to contain an indefinite number of User-ID AVPs. Each of them contains the
leading digits of an IMSI which, in a HSS, identifies a set of subscribers.
Nothing prevents to use all the digits of an IMSI, allowing identifying an
individual user. So if a Reset command would be used for a shared data update
it could contain a list of impacted users. In practice and for implementation
reasons, such a list will be limited in the number of User-ID AVPs, so the
proposal would be to use one or several Reset commands, each containing an
acceptable amount of User-Ids AVPs identifying individual users (and possibly
ranges of users) for which there is an update of shared data.
### 5.3.3 Identification through pre-configured Group IDs
In order to easily identify the potentially numerous subscribers impacted by
e.g. an update of shared data, subscribers can be pre-configured with one or
several Group IDs.
For example, for S6a/S6d interface, the Group IDs to which a subscriber
belongs would be sent as part of the subscription data within S6a/S6d ULA. A
Reset command containing a Group ID then impacts only those subscribers that
subscribe to the conveyed Group.
This principle of using a Group ID can be applied to other commands and
interfaces.
### 5.3.4 Identification through User Id List
This proposal applies to CS/PS/EPS, and only in case RSR/RSA command pair is
reused.
The User Id parameter as defined for Reset procedure comprises the leading
digits of an IMSI, and it identifies the set of subscribers whose IMSIs begin
with the User-Id. This parameter can be reused to identify the subscribers
sharing the same subscription data.
However, this method is only able to identify sets of subscribers that are
identified by the same IMSI leading digits.
### 5.3.5 Identification for All Subscribers
There might be the case that all of the subscribers belonging to the HSS share
the same subscription data when they have subscribed to the same corresponding
services, e.g. the services identified by the Service-Indication over IMS Sh
interface. In this case there is no need to introduce specific identification
for the subscribers, i.e. the update of the subscription data would be applied
to all subscribers having the corresponding services.
## 5.4 Sol-A Shared data update notification
### 5.4.1 Overview
In the CS/PS/EPS network, HSS/HLR Reset procedure is defined for the
restoration of the location and subscriber data in the VLR/SGSN/MME in the
case the HSS/HLR restarts. When an HSS/HLR restarts, it sends to each
VLR/SGSN/MME where one or more of its users are registered a Reset message, as
a notification from HSS/HLR that informs corresponding subscriber data is
invalid. When receiving the Reset message from the HSS/HLR, the VLR/SGSN/MME
marks the location of the subscriber as invalid, and initiates update location
procedure towards the HSS/HLR upon any activity for that user. During the
update location procedure, the HSS/HLR downloads the subscriber data to the
VLR/SGSN/MME.
This solution proposes to apply same principle, i.e. the HSS/HLR sends a
notification to the VLR/SGSN/MME to inform that data shared by multiple
subscribers is modified. This notification does not include modified data.
A similar mechanism can be applied to IMS Sh and Cx interfaces, where the HSS
sends a notification to the AS or S-CSCF.
### 5.4.2 Description
#### 5.4.2.1 Share of IMS Service Data
This solution proposes the HSS sends a notification to the AS to inform that
data shared by multiple subscribers is modified, while this notification does
not include modified data.
The command pair Reset-Request/Answer (RSR/RSA) as defined in the 3GPP TS
29.272 [2] can be introduced to IMS Sh Diameter applications to support the
update of subscription data shared by multiple subscribers stored in the IMS
AS:
  * The HSS sends a Reset request to inform the IMS AS that subscription data are updated in the HSS and the update is applied to all subscribers or a subset of subscribers belonging to the HSS.
  * When receiving the Reset request, the IMS AS shall retrieve the corresponding service data for each impacted subscriber upon any activity for that user.
The parameter User Id List as defined in the command pair Reset-Request/Answer
(RSR/RSA) in the 3GPP TS 29.272 [2] can be reused for update of IMS
subscription data shared by a subset of subscribers belonging to the HSS. In
the CS/PS/EPS, the User Id in the list comprises the leading digits of an
IMSI, and it identifies the set of subscribers whose IMSIs begin with the
User-Id. In the IMS, IMSI may not be available, therefore other ways to
identify a set of subscribers might be needed, e.g. by use of the sub-domains
contained in the IMS Private User Identity or IMS Public User Identity shared
by the set of subscribers, or alternatives described in clause 5.3.
In the HSS, one set of IMS service related transparent data can be identified
by Service Indication as defined in the 3GPP TS 29.328 [3], as described in
clause 5.2.2. The Service Indication can be introduced into the RSR command.
#### 5.4.2.2 Share of IMS Service Profile
This solution proposes the HSS sends a notification to the S-CSCF to inform
that data shared by multiple subscribers is modified, while this notification
does not include modified data.
A proposal is to reuse the existing command pair Reset-Request/Answer
(RSR/RSA) as defined in the 3GPP TS 29.272 [2]. RSR/RSA can be introduced to
Cx Diameter applications to support the update of subscription data shared by
multiple subscribers stored in the S-CSCF:
  * The HSS sends a Reset request to inform the S-CSCF that subscription data are updated in the HSS and the update is applied to all subscribers or a subset of subscribers belonging to the HSS.
  * When receiving the Reset request, the S-CSCF shall send SAR with SAT set to NO_ASSIGNMENT to the HSS for download of the user profile for each impacted subscriber upon any activity for that user.
  * If the S-CSCF is unable to identify the impacted subscriber by the Reset request or unable to mark the impacted subscriber as to be updated, the S-CSCF shall return DIAMETER_UNABLE_TO_COMPLY to the HSS, and the HSS will proceed as the update of the subscriber data failed. The HSS may proceed with individual subscriber data update.
  * If the HSS returns DIAMETER_UNABLE_TO_COMPLY due to database error or other reasons, which is the only error code described in the 3GPP TS 29.228 [6] for the SAR/SAA procedure when the SAT within the SAR is set to NO_ASSIGNMENT. In this case, the S-CSCF can wait for some time and send the request again.
  * For identification of impacted users refer to clause 5.4.2.1
A second proposal is to reuse the existing Cx command pair PPR/PPA, as defined
in 3GPP TS 29.228 [6], with addition of a new indication that identifies the
command is used for shared data update. PPR needs modification to be able to
identify impacted subscribers to which shared data update applies.
#### 5.4.2.3 Share of CS/PS/EPS Subscription Data
The MAP_RESET service as defined in the 3GPP TS 29.002 [4] over D and Gr can
be reused by the HSS/HLR for update of subscription data shared by multiple
subscribers stored in the VLR/SGSN without any further specification.
The command pair Reset-Request/Answer (RSR/RSA) as defined in the 3GPP TS
29.272 [2] over S6a/S6d can be reused by the HSS/HLR for update of
subscription data shared by multiple subscribers stored in the SGSN/MME
without any further specification.
If the SGSN/MME is unable to identify the impacted subscriber by the Reset
request or unable to mark the impacted subscriber as to be restored, the
SGSN/MME shall return DIAMETER_UNABLE_TO_COMPLY to the HSS, and the HSS will
proceed as the update of the subscriber data failed. The HSS may proceed with
individual subscriber data update.
If the subsequent update location procedure initiated by the SGSN/MME upon
user activity fails for whatever reasons, the SGSN/MME would perform the error
handling procedure as normal.
### 5.4.3 Impacts on Existing Interfaces
#### 5.4.3.1 Share of IMS Service Data
To support the update of subscription data shared by multiple subscribers, the
IMS Sh interface needs to support a new command pair Reset-Request/Answer
(RSR/RSA) as defined in the 3GPP TS 29.272 [2], which may need to create new
Diameter Application Identifiers for Cx and Sh respectively. The HSS and the
IMS AS need to be enhanced to support corresponding behaviours as described in
the clause 5.4.2.1.
#### 5.4.3.2 Share of IMS Service Profile
To support the update of subscription data shared by multiple subscribers, the
IMS Cx interface may reuse the existing Cx command pair PPR/PPA, as defined in
3GPP TS 29.228 [6], with addition of a new indication that identifies the
command is used for shared data update. PPR needs modification to be able to
identify impacted subscribers to which shared data update applies. The HSS and
the S-CSCF need to be enhanced to support corresponding behaviours as
described in the clause 5.4.2.12.
#### 5.4.3.3 Share of CS/PS/EPS Subscription Data
The HSS/HLR can reuse the existing HSS/HLR Reset procedure for update of
subscription data shared by multiple subscribers stored in the VLR/SGSN/MME.
## 5.5 Sol-B Direct download of shared data update by the HSS
### 5.5.1 Overview
In this solution, the updated shared subscription data are directly downloaded
by the HSS to the relevant serving node through one or a few commands. Such a
command contains the updated data and the information identifying the impacted
users.
### 5.5.2 Description
#### 5.5.2.1 Description over S6a/d
Two commands can be reused for this purpose:
  * The Reset command as described in 5.2 but with the additional Subscription-Data AVP containing the updated subscription data. The identification of the impacted users can be done according to the clause 5.3 (e.g. a Group ID or a list of User-IDs AVPs);
  * The Insert Subscription Data (ISD) command with the Subscription-Data AVP as described in 3GPP TS 29.272 [2] and an additional information, identifying the impacted users according to clause 5.3.
The use of existing command avoids to create a new Diameter application.
When receiving the Reset or IDR with the additional Subscription-Data AVP from
the HSS for shared data update, the SGSN/MME shall return DIAMETER_SUCCESS
only if all of the impacted subscribers' data are updated successfully.
Otherwise, the SGSN/MME shall return the error code matching the first error
case.
If the specific shared data update is related to subscribers serving by
multiple SGSN/MMEs, and one of the SGSN/MMEs returns an error to the IDR
request, the HSS shall treat the data update as failure for all the impacted
subscribers serving by the SGSN/MMEs, and trigger corresponding actions as for
normal IDR.
#### 5.5.2.2 Description over Cx and Sh
The Push-Profile-Request (PPR) command can be reused for this purpose over Cx
interface with shared user data and an additional information, identifying the
impacted users according to clause 5.3.
When receiving the PPR command from the HSS for shared data update, the S-CSCF
shall return DIAMETER_SUCCESS only if all of the impacted subscribers' data
are updated successfully. Otherwise, the S-CSCF shall return the error code
matching the first error case.
If the specific shared data update is related to subscribers serving by
multiple S-CSCFs, and one of the S-CSCF returns an error to the PPR request,
the HSS shall treat the data update as failure for all the impacted
subscribers serving by the S-CSCF, and trigger corresponding actions as for
normal PPR.
The Push-Notification-Request (PNR) command can be reused for this purpose
over Sh interface with shared user data and an additional information,
identifying the impacted users according to clause 5.3.
The use of existing commands avoid to create new Diameter applications.
## 5.6 Sol-C New subscribers to store shared data
### 5.6.1 Overview
This solution focusses on shared IMS Service Data (see clause 4.2).
It takes profit of existing mechanisms to be able to avoid potential massive
amount of Sh notifications.
### 5.6.2 Description
An AS can subscribe to be notified by HSS over Sh on subscriber data
modification for one specific subscriber, i.e. subscription to notification
mechanism over Sh interface is defined per subscriber.
Taking profit of this existing mechanism, and without any modification, a new
subscriber can be defined in HSS whose subscriber data is the IMS Service Data
that is shared among multiple subscribers. This new subscriber can only be
used for this purpose, it does not exist from an IMS management point of view,
e.g. it cannot be registered. Then, this new subscriber is just meant to be
used as a data container, let's call it data-container-subscriber from now on
in this document. Therefore, user identity to identify a data-container-
subscriber should not be allowed to be used as a real IMS user. Different
alternatives could be considered to achieve this goal, like the following:
  * PSI could be used as the data-container-subscriber identification.
  * A pre-configured prefix could be used as part of an IMS Public User Identity, e.g. sip:common-service-data-1\@example.com
Then, any subscriber that shares data stored in a data-container-subscriber,
instead of storing this shared data as part of its own subscriber data, it
will simply index the data-container-subscriber. The easiest way to do so is
to store the data-container-subscriber identity as part of its subscriber
data, e.g. as a new Repository Data.
The AS has to subscribe to notifications on changes on both individual
subscribers and data-container-subscribers, in order to always have up to date
data. Then, when shared data is modified, it only affects the single data-
container-subscriber and then HSS can notify AS with one single Sh
notification.
Then, when a subscriber data is required, the AS checks whether this
subscriber data includes a data-container-subscriber identity, if so the AS
needs to provide this data-container subscriber data as part of the requested
subscriber data. Therefore, one single Sh notification is enough, potential
massive notifications are avoided.
### 5.6.3 Impacts on Existing Interfaces
No impacts.
## 5.7 Sol-D Shared data stored in the IMS AS
### 5.7.1 Overview
This solution focuses on shared IMS Service Data (see clause 4.2).
Similar as Sol-C, but with storing the shared data in the IMS AS.
### 5.7.2 Description
This solution is similar as Sol-C but with some modifications.
In the Sol-C, the HSS stores the shared data with data-container-subscriber,
while data-container-subscriber identity is stored as part of the service data
of each subscriber that shares this data, and it notifies the IMS Application
Servers of the data update of the shared subscribers.
In the Sol-D, the data-container-subscriber is stored in the local database of
the IMS Application Servers by provisioning. Instead of use of subscription to
notification mechanism over Sh interface to keep data consistency of a data-
container-subscriber between the HSS and the IMS Application Servers as
described for Sol-C, the update of the shared data contained in a data-
container-subscriber can be done in the IMS Application Servers by
provisioning, similar as the way applied to the shared iFC between the HSS and
the S-CSCF in the case the shared iFC is supported by both the HSS and the
S-CSCF. When a subscriber data is required, the IMS AS checks whether this
subscriber data includes a data-container-subscriber identity, if so the IMS
AS obtains this data-container subscriber data from its local database and
provides it as part of the requested subscriber data. Update of the data-
container subscriber data is done in the AS by provisioning, without
introducing any Sh signalling.
### 5.7.3 Impacts on Existing Interfaces
No impacts.
# 6 Recommendation and Conclusion
## 6.1 Introduction
This section compares the alternative solutions and concludes on a final
solution for future specification.
## 6.2 Comparison Analysis
### 6.2.1 Existing Mechanisms
Existing mechanisms such as Shared iFC and Wildcard Public User Identity are
more or less related to the update of subscription data shared by multiple
subscribers or multiple Public User Identities, however, the drawback with
each mechanism as described in section 4 limits its use as a generic solution
to address the update of subscription data shared by multiple subscribers.
The subscription to notification mechanism over Sh interface could be used to
address the update of subscription data shared by multiple subscribers stored
in the IMS AS, but it may introduce massive traffic over Sh interface since
the notification would be applied to multiple subscribers. Another way might
be for the HSS to support a mechanism to control the pace for the
notifications, but it is inefficient and may not be able to provide the
service to the subscribers on time, e.g. one subscriber is using the service
but the TAS did not receive the notification yet.
### 6.2.2 New Alternative Solutions
#### 6.2.2.1 Introduction
There are three alternative solutions described in the TR and all of them can
be used for subscription data update shared by multiple subscribers in
CS/PS/EPS/IMS networks. The following is some analysis on each one.
#### 6.2.2.2 Sol-A Shared data update notification
For the **MAP D and Gr interfaces** , the existing Reset command pair could be
reused for this purpose, however some enhancements are needed to identify
impacted users. However, it is recommended to do not impact legacy VLRs or
Gn/Gp SGSNs, since CS/GPRS networks are mature enough and widely deployed,
there is not much value to upgrade these networks. Therefore, this
recommendation invalidates Sol-A for Gr/D interfaces.
For **S6a/S6d interfaces** , the existing Reset command pair is proposed to be
reused, however there are some drawbacks to consider:
\- Impacted user identification:
> Reset command pair is proposed to be enhanced to include impacted user
> identification, with the introduction of a Group ID. This requires MME/SGSN
> to store Group ID per each subscriber and check every time to identify
> whether the subscriber data has been modified.
\- Impacted data identification:
> Reset command pair is proposed to notify about shared data update. It is
> proposed that the notification informs that whole user profile is updated,
> what simplifies the solution.
\- One single notification from HSS implies massive signaling from MME/SGSN
> There are some use cases that require that modified shared data is updated
> immediately in MME/SGSN, for example, reduction of UE AMBR or removal of the
> authorization to use a specified PDN. With the existing mechanism, if some
> shared data is updated for multiple users, the HSS needs to send an
> individual IDR/IDA command pair for each impacted user to the MME/SGSN.
> Although, the HSS does not know whether or not the data requires immediate
> applicability, at reception of data update it is up the MME/SGSN to decide
> when to retrieve that data.
>
> However, with the proposed solution, the notification of data update may
> impact a high amount of users, then the MME/SGSN shall manage at once
> whether or not which one may require immediate applicability, and if so, a
> high amount of data retrievals may be requested, what implies potential
> massive signalling between the MME/SGSN and HSS, and high demanding
> processing needs for MME/SGSN.
>
> Apart from that, update of subscriber data in the MME/SGSN may require some
> signalling towards other network entities (e.g. UE, SGWs). Therefore, if
> immediate data applicability is required, and it demands extra signalling,
> there is a risk of massive signalling expanded to other network interfaces.
> This may depend on the data being modified (even on its value) and the
> implications on functionality to be executed.
>
> Therefore, in order to avoid harmful network implications, that on the hand
> would need to be studied at stage 2, the proposal is to limit this new
> functionality (shared data update notification) to data (and values) that
> will not imply (by any means) any interaction from the MME/SGSN to any other
> network entities. The data update shall be limited to the MME/SGSN internal
> data.
\- Members of the same group could be split among multiple serving nodes
> A serving node may or not support the feature and then the HSS should behave
> differently applying shared data mechanism only towards supporting serving
> nodes, and send individual IDRs to users registered in the non-supporting
> serving nodes.
>
> Apart from that, the user may roam, and then serving node support may vary.
> This increases complexity.
\- Timing limitations derived from this massive update shall be identified.
If only considering the case that some data are shared by all subscribers
belonging to a single HSS or an UDR or UDRs when UDC architecture is applied,
Sol-A can be used without any enhancement to the existing HSS Reset procedure,
then the drawback regarding impacted user identification and members of the
same group split among multiple serving nodes become invalid, since there is
no need to identify the impacted users and all MME/SGSNs support HSS Reset
procedure. For other drawbacks, e.g. massive signaling from MME/SGSN and
possible signalling from MMES/GSN towards other network entities (e.g. UE,
SGWs), and timing limitations derived from this massive update, they can be
relieved if the HSS Reset for shared data update are performed in a time
period when there is less traffic, e.g. during midnight.
In IMS, a notification by HSS that informs that subscriber data is updated,
like with the HSS Reset procedure, is not supported so far. To apply this
solution, this new procedure needs to be defined for IMS **Sh and Cx
interfaces** first, either with reuse of existing commands over Cx/Sh
interfaces if possible, or with introduction of a new command pair as Reset-
Request/Answer (RSR/RSA) as defined in the 3GPP TS 29.272 [2], for the HSS to
inform the IMS AS and S-CSCF to retrieve subscription data upon any user
activity. The advantage with reuse of existing commands, e.g. PPR/PPA, with
addition of a new indication for shared data update, is that it can be avoided
to create a new Diameter application.
For **Cx interface** , same drawbacks mentioned for S6a/S6d are analyzed:
\- Impacted user identification:
> PPR command is proposed to be enhanced to include impacted user
> identification, with the introduction of a Group ID. This requires S-CSCF to
> store Group ID per each subscriber and check every time to identify whether
> the subscriber data has been modified.
\- Impacted data identification:
> PPR command is proposed to notify about shared data update. . It is proposed
> that the notification informs that whole user profile is updated, what
> simplifies the solution.
\- One single notification from HSS
> Data in S-CSCF does not require immediate applicability, what simplifies
> this drawback. Updated data will be applied based on individual subscriber
> events. Harmful network implications are avoided in this case since the
> update of the whole user profile is managed as internal data by S-CSCF,
> without any interaction with any other node.
\- Members of the same group could be split among multiple S-CSCFs:
> An S-CSCF may or not support the feature and then the HSS should behave
> differently applying shared data mechanism only towards supporting S-CSCF,
> and send individual PPRs to users registered in the non-supporting S-CSCFs.
>
> The S-CSCF is always located in the same network as the HSS, then there are
> not roaming implications in this case.
\- Timing limitations derived from this massive update shall be identified.
> In this case, since updated data will be applied based on individual
> subscriber events, timing is not considered an issue from a protocol
> perspective.
For **Sh interface** , at least existing notification needs to be enhanced to
include impacted user identification, with the introduction of a Group ID,
apart from that, some of the drawbacks mentioned to other interfaces need
further analysis. Therefore, solution C is preferred since it does not require
any impact.
#### 6.2.2.3 Sol-B Direct download of shared data update by the HSS
Compared with Sol-A, Sol-B has some advantage with saving traffic between the
HSS and the serving nodes over D/Gr/S6a/S6d.
For the **MAP D and Gr interfaces** , the existing commands could be reused
for this purpose, however some enhancements are needed to identify impacted
users. However, it is recommended to do not impact legacy VLRs or Gn/Gp SGSNs,
since CS/GPRS networks are mature enough and widely deployed, there is not
much value to upgrade these networks. Therefore, this recommendation
invalidates Sol-A for Gr/D interfaces.
For **S6a/S6d interfaces** there are important issues with this solution, as
described for Sol-A in clause 6.2.2.2:
\- Impacted user identification:
> IDR command is proposed to be enhanced for impacted user identification,
> with the introduction of a Group ID. This requires MME/SGSN to store Group
> ID per each subscriber and when an IDR (for a Group ID) is received, the
> MME/SGSN shall be able to index individual subscribers.
\- Impacted data identification:
> IDR command is proposed to notify about shared data update. It is proposed
> to include whole user profile, what simplifies the solution.
\- One single message from HSS implies massive signalling from MME/SGSN
> As mentioned for SolA, there are some use cases that require that modified
> shared data is updated immediately in MME/SGSN, and the MME/SGSN may require
> some signalling towards other network entities (e.g. UE, SGWs). Therefore,
> there a risk of massive signalling expanded to other network interfaces.
> This may depend on the data being modified (even on its value) and the
> implications on functionality to be executed.
>
> Therefore, in order to avoid harmful network implications, that on the hand
> would need to be studied at stage 2, the proposal is to limit this new
> functionality (shared data update) to data (and values) that will not imply
> (by any means) any interaction from the MME/SGSN to any other network
> entities. The data update shall be limited to the MME/SGSN internal data.
\- Members of the same group could be split among multiple serving nodes:
> Serving node may or not support the feature: then HSS should behave
> differently applying shared data mechanism only towards supporting serving
> nodes, and send individual IDRs to users registered in the non-supporting
> serving nodes. A partial failure in this case should be managed as well.
>
> User may roam, and then serving node support may vary. This increases
> complexity.
\- Timing limitation derived from this massive update shall be identified.
It may not be usual for subscribers if handover to non-3GPP access is allowed
to share the whole EPS subscription data, especially for the key subscription
data in EPS, i.e. APN configurations, in which PDN GW identity allocated for a
specific APN is included. The PDN GW identity may be different for the
subscribers within the group who share other parts of the APN configuration
data. In this case sol-B is not useful for shared data update over S6a/S6d,
even not considering other drawbacks.
Apart from that, there are related ongoing SA2 activities in relation to WI
Group based enhancement (SP-140305) partly documented in 3GPP TR 23.769 [5]
that should be taken into account.
For **Cx interface** , same drawbacks mentioned for S6a/S6d are analyzed:
\- Impacted user identification:
> PPR command is proposed to be enhanced for impacted user identification,
> with the introduction of a Group ID. This requires the S-CSCF to store Group
> ID per each subscriber and when a PPR (for a Group ID) is received, the
> S-CSCF shall be able to index individual subscribers.
\- Impacted data identification:
> PPR command is proposed to notify about shared data update. It is proposed
> to include whole user profile, what simplifies the solution.
\- One single notification from HSS
> Data in S-CSCF does not require immediate applicability, what simplifies
> this drawback. Updated data will be applied based on individual subscriber
> events. Harmful network implications are avoided in this case since the
> update of the whole user profile is managed as internal data by S-CSCF,
> without any interaction with any other nodes.
\- Members of the same group could be split among multiple S-CSCFs:
> An S-CSCF may or not support the feature and then the HSS should behave
> differently applying shared data mechanism only towards supporting S-CSCF,
> and send individual PPRs to users registered in the non-supporting S-CSCFs.
>
> The S-CSCF is always located in the same network as the HSS, then there are
> not roaming implications in this case.
\- Timing limitations derived from this massive update shall be identified.
> In this case, since updated data will be applied based on individual
> subscriber events, timing is not considered an issue from a protocol
> perspective.
For **Sh interface** , at least existing notification needs to be enhanced to
include impacted user identification, with the introduction of a Group ID,
apart from that, some of the drawbacks mentioned to other interfaces need
further analysis. Therefore, solution C is preferred since it does not require
any impact.
#### 6.2.2.4 Sol-C New subscribers to store shared data
This solution introduces a dummy subscriber over Sh interface, whose
subscriber data is the IMS Service Data that is shared among multiple
subscribers. The dummy subscriber identity can be stored as part of the
subscriber data for the subscribers who share the data stored with the dummy
subscriber. The HSS notifies the AS of the update of the dummy subscriber data
when the shared data is modified and the AS can update all subscriber data
having the dummy subscriber data or just refer to the data stored with the
dummy subscriber. With storing the dummy identity as one kind of new
Repository Data of the subscribers, this solution would have no impact on the
interface.
With this solution, though there might not have impact on the messages and
parameters as defined in the corresponding specifications, it requires a new
behaviour in the AS, since it needs to identify whether a subscriber contains
some shared-data and read it from the dummy subscriber.
#### 6.2.2.5 Sol-D Shared data stored in the IMS AS
In the Sol-C, a dummy subscriber identity is stored as part of the subscriber
data for the subscribers who share the data stored with the dummy subscriber,
and the HSS notifies the IMS AS of the update of the dummy subscriber data
when the shared data is modified. In solution D, the dummy subscriber data is
stored in the local database of the IMS AS and updated by provisioning, and it
is updated in the IMS AS directly, without notifying the update of the dummy
subscriber data from the HSS to the IMS AS. The HSS may not even store the
shared data contained with the dummy subscriber.
In the Sol-D, though there might not have impact on the messages and
parameters as defined in the corresponding specifications, it requires a new
behaviour in the IMS AS, since it needs to store the dummy subscriber data and
identify whether a subscriber contains some shared-data and read it from the
dummy subscriber.
### 6.2.3 Identification of impacted Users
Table 6.2.3-1: Provides a comparism of solutions as described in clause 5.3.
* * *
Criteria Evaluation  
List of Users (see clause 5.3.2) Group IDs (see clause 5.3.3) User ID List
(see clause 5.3.4) All Subscribers (see clause 5.3.5 1\. Message Length For
very long lists of users the message length will increase significantly.
minimal variable (dependency with criterium 2; the better here, the worse
there) minimal 2\. Identifying exactly the impacted users exact exact variable
(dependency with criterium 1, the better here, the worse there) exact 3\.
Applicability on roaming interfaces yes yes (if Group IDs are globaly unique)
yes yes
* * *
### 6.2.4 Identification of Impacted Data
There are three alternative mechanisms for identification of impacted data
described in the TR. The options are summarized in the following table.
Table 6.2.4-1: Provides a comparism of three alternative mechanisms for
identification of impacted data
* * *
Interfaces Evaluation  
Identification with Service Indication (see clause 5.2.2) Identification by
Data in the Request (see clause 5.2.3) Identification for All (see clause
5.2.4) IMS Sh Applicable. Partly applicable (for Repository data update). Not
applicable. IMS Cx Not applicable. Partly applicable (for shared iFC update).
Applicable. D/Gr (for GnGp-SGSN) Not applicable. Applicable. Applicable.
S6a/S6d/Gr (for IWF with MME/S4-SGSN) Not applicable. Applicable. Applicable.
* * *
## 6.3 Recommendation and Conclusion
### 6.3.1 Identification of impacted Users
It is recommended to make use of Group IDs (see clause 5.3.3) when identifying
the impacted users.
In the case the shared data update is to be applied to all subscribers
belonging to an HSS or an UDR or UDRs if UDC architecture is applied, there is
no need to introduce Group IDs to each subscriber's data. When UDC
architecture does not apply, the HSS Identity will serve as kind of Group Id.
### 6.3.2 Recommendation and Conclusion for S6a/S6d Interfaces
As described in clause 6.2.2.3, Sol-B is not useful for shared data update of
the subscribers if handover to non-3GPP access is allowed over S6a/S6d,
considering PDN GW in the APN configurations may be different for the
subscribers within the group who share other parts of the subscription data.
It might be used for the subscribers with 3GPP access only, e.g. MTC
subscribers. This needs further study of the data (and/or specific data
values) that do not require signalling towards other network entities, the
impact on HSS to identify the subscribers for which non-3GPP access is allowed
or not, and how to group the different kinds of shared data to be shared. The
outcome of the ongoing work in SA2 on GROUPE and its impact on the shared data
update also need to be taken into account.
As described in clause 6.2.2.2, Sol-A can be used without any enhancement to
the existing HSS Reset procedure, for the case that some data shared by all
subscribers belonging to a single HSS are updated. The HSS Reset for shared
data update can be performed in a time period when there is less traffic, e.g.
during midnight, to relieve some of the drawbacks. If UDC architecture is to
be considered, grouping subscribers sharing some data by HSS identity may not
be applicable, since the subscriber data would be stored in the UDR and the
HSS FE may change for a specific subscriber. Group IDs as described in clause
5.3.3 might be needed to identify the impacted subscribers.
Taking all the above into account, it is recommended in this TR to only
consider the case that data are shared by all subscribers belonging to either
a single HSS or a single UDR or UDRs when UDC architecture is applied, and to
apply Sol-A for the shared data update without any enhancement to the existing
HSS Reset procedure.
### 6.3.3 Recommendation and Conclusion for IMS Sh Interface
With introduction of dummy subscribers and store the dummy subscriber
identities as repository data of the subscribers who share the service data
stored with the dummy subscribers, Sol-C and Sol-D have some advantages
compared with other two solutions, i.e. no impact on the interface, and easy
to be implemented.
It is proposed to apply Sol-C to IMS Sh interface and continue with some
specification work on documentation of this solution in the Sh specifications,
and provide the possible form of the dummy subscriber identities in order that
the HSS and the AS could identify the dummy subscribers.
Sol-D applicability depends on Operator provisioning model. If the dummy
subscriber data can be stored in the local database of the AS and updated by
provisioning, Sol-D can be applied.
### 6.3.4 Identification of Impacted Data
It is recommended:
\- Reuse Service Indication for Identification of Impacted Data over IMS Sh
interface.
\- Use identification for all for Identification of Impacted Data over IMS Cx
interface.
Editor's Note: The conclusion on identification of impacted data on S6a/S6d is
still to be investigated.
### 6.3.5 Recommendation and Conclusion for D/Gr (for GnGp-SGSN) Interfaces
For the MAP D and Gr interfaces, it is recommended to do not impact legacy
VLRs or Gn/Gp SGSNs, since CS/GPRS networks are mature enough and widely
deployed, there is not much value to upgrade these networks. This
recommendation invalidates both Sol-A and Sol-B for Gr/D interfaces. See
clause 6.2.2. Therefore, any alternative solution that requires impacts in
legacy VLRs or Gn/Gp SGSNs will not be valid, an then the recommendation is to
exclude MAP D and Gr (for GnGp-SGSN) interface from this study.
### 6.3.6 Recommendation and Conclusion for IMS Cx
Compared with Sol-A, Sol-B has some advantages of saving signalling between
the S-CSCF and the HSS. If the whole user profile, excluding the Public User
Identities in the IMS subscription, is to be shared by multiple subscribers,
Sol-B can be applied as long as the impacted users can be identified by the
PPR.
If only parts of the user profile are to be shared, to simplify the solution
and avoid much impact on Cx interface, Sol-A can be a better choice by reuse
of existing command pair, i.e. PPR/PPA, with addition of a new indication for
shared data update. A new command pair is possible to be introduced if
considering some AVPs in the existing PPR mandatory to be present, e.g.
Private User Identity, are not applicable to the shared data update.
While considering the impact of Sol-A and Sol-B on the HSS and the S-CSCF and
Cx interface, and there is existing mechanism for shared data update, such as
shared iFC, it is proposed to not apply any solution to Cx interface. This
does not preclude any further study on the need of a new mechanism for shared
data update over Cx interface.
#