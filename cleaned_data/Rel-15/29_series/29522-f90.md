# Foreword
This Technical Specification has been produced by the 3^rd^ Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present specification describes the protocol for the **NEF Northbound**
interface between the NEF and the AF. The **NEF Northbound** interface and the
related stage 2 functional requirements are defined in 3GPP TS 23.502 [2].
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 23.502: \"Procedures for the 5G system\".
[3] 3GPP TS 23.501: \"System Architecture for the 5G\".
[4] 3GPP TS 29.122: \"T8 reference point for northbound Application
Programming Interfaces (APIs)\".
[5] Open API Initiative, \"OpenAPI 3.0.0 Specification\",
https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.0.md.
[6] 3GPP TS 33.501: \"Security architecture and procedures for 5G System\".
[7] 3GPP TS 29.514: \"5G System; Policy Authorization Service; Stage 3\".
[8] 3GPP TS 29.571: \"5G System; Common Data Types for Service Based
Interfaces; Stage 3\".
[9] 3GPP TS 29.521: \"5G System; Binding Support Management Service; Stage
3\".
[10] Void.
[11] 3GPP TS 23.222: \"Common API Framework for 3GPP Northbound APIs; Stage
2\".
[12] 3GPP TS 29.222: \"Common API Framework for 3GPP Northbound APIs; Stage
3\".
[13] IETF RFC 6749: \"The OAuth 2.0 Authorization Framework\".
[14] 3GPP TS 33.122: \"Security Aspects of Common API Framework for 3GPP
Northbound APIs\".
[15] Void.
[16] IETF RFC 5246: \"The Transport Layer Security (TLS) Protocol Version
1.2\".
[17] 3GPP TS 29.503: \"5G System; Unified Data Management Services; Stage 3\".
[18] 3GPP TS 29.518: \"5G System; Access and Mobility Management Services;
Stage 3\".
[19] 3GPP TS 29.554: \"5G System; Background Data Transfer Policy Control
Service; Stage 3\".
[20] 3GPP TS 29.504: \"5G System; Unified Data Repository Services; Stage 3\".
[21] 3GPP TR 21.900: \"Technical Specification Group working methods\".
# 3 Definitions and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
3GPP TR 21.905 [1] and the following apply. A term defined in the present
document takes precedence over the definition of the same term, if any, in
3GPP TR 21.905 [1].
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in 3GPP TR
21.905 [1] and the following apply. An abbreviation defined in the present
document takes precedence over the definition of the same abbreviation, if
any, in 3GPP TR 21.905 [1].
AF Application Function
BDT Background Data Transfer
CAPIF Common API Framework
CP Communication Pattern
DN Data Network
DNAI DN Access Identifier
DNN Data Network Name
GPSI Generic Public Subscription Identifier
NEF Network Exposure Function
PCF Policy Control Function
PCRF Policy and Charging Rule Function
PFD Packet Flow Description
PFDF Packet Flow Description Function
REST Representational State Transfer
SCEF Service Capability Exposure Function
S-NSSAI Single Network Slice Selection Assistance Information
UDR Unified Data Repository
UP User Plane
# 4 **NEF Northbound** Interface
## 4.1 Overview
The **NEF Northbound** interface is between the NEF and the AF. It specifies
RESTful APIs that allow the AF to access the services and capabilities
provided by 3GPP network entities and securely exposed by the NEF.
This document also specifies the procedures triggered at the NEF by API
requests from the AF and by event notifications received from 3GPP network
entities.
The stage 2 level requirements and signalling flows for the **NEF Northbound**
interface are defined in 3GPP TS 23.502 [2].
The **NEF Northbound** interface supports the following procedures:
\- Procedures for Monitoring
\- Procedures for Device Triggering
\- Procedures for resource management of Background Data Transfer
\- Procedures for CP Parameters Provisioning
\- Procedures for PFD Management
\- Procedures for Traffic Influence
\- Procedures for changing the chargeable party at session set up or during
the session
\- Procedures for setting up an AF session with required QoS
Which correspond to the following services respectively, supported by the NEF
as defined in 3GPP TS 23.502 [2]:
\- Nnef_EventExposure service
\- Nnef_Trigger service
\- Nnef_BDTPNegotiation service
\- Nnef_ParameterProvision service
\- Nnef_PFDManagement service
\- Nnef_TrafficInfluence service
\- Nnef_ChargeableParty service
\- Nnef_AFsessionWithQoS service
NOTE: For Nnef_PFDManagement service, only the
Nnef_PFDManagement_Create/Update/Delete service operations are applicable for
the NEF Northbound interface.
## 4.2 Reference model
The **NEF Northbound** interface resides between the NEF and the AF as
depicted in figure 4.2.1. The overall NEF architecture is depicted in 3GPP TS
23.502 [2]. An AF can get services from multiple NEFs, and an NEF can provide
service to multiple AFs.
NOTE: The AF can be provided by the third party.
Figure 4.2-1: Reference Architecture for the Nnef Service; SBI representation
Figure 4.2-2: Reference Architecture for the Nnef Service; reference point
representation
## 4.3 Functional elements
### 4.3.1 NEF
The Network Exposure Function (NEF) is a functional element that supports the
following functionalities:
\- The NEF shall securely expose network capabilities and events provided by
3GPP NFs to AF.
\- The NEF shall provide a means for the AF to securely provide information to
3GPP network and may authenticate, authorize and assist in throttling the AF.
\- The NEF shall be able to translate the information received from the AF to
the one sent to internal 3GPP NFs, and vice versa.
\- The NEF shall support to expose information (collected from other 3GPP NFs)
to the AF.
\- The NEF may support a PFD Function which allows the AF to provision PFD(s)
and may store and retrieve PFD(s) in the UDR. The NEF further provisions
PFD(s) to the SMF.
A specific NEF instance may support one or more of the functionalities
described above and consequently an individual NEF may support a subset of the
APIs specified for capability exposure.
NOTE: The NEF can access the UDR located in the same PLMN as the NEF.
### 4.3.2 AF
The Application Function (AF) may interact with the 3GPP Core Network via the
NEF in order to access network capabilities.
## 4.4 Procedures over **NEF Northbound** Interface
### 4.4.1 Introduction
All procedures that operate across the **NEF Northbound** interface, as
specified in 3GPP TS 23.502 [2], are specified in the following subclauses.
### 4.4.2 Procedures for Monitoring
The procedures for monitoring as described in subclause 4.4.2 of 3GPP TS
29.122 [4] shall be applicable in 5GS with the following differences:
\- description of the SCS/AS applies to the AF;
\- description of the SCEF applies to the NEF;
\- description of the HSS applies to the UDM, and the NEF shall interact with
the UDM by using Nudm_EventExposure service as defined in 3GPP TS 29.503 [17];
\- description of the MME/SGSN applies to the AMF, and the NEF shall interact
with the AMF by using Namf_EventExposure service as defined in 3GPP TS 29.518
[18];
\- description about the PCRF is not applicable.
\- description about the change of IMSI-IMEI(SV) association monitoring event
applies to the change of SUPI-PEI association monitoring event.
\- when \"monitoringType\" sets to \"LOCATION_REPORTING\" within the
MonitoringEventSubscription data type as defined in subclause 5.3.2.1.2 of
3GPP TS 29.122 [4] during the monitoring event subscription, only
\"CGI_ECGI\", \"TA_RA\" and \"GEO_AREA\" within the Accuracy data type as
defined in subclause 5.3.2.4.7 of 3GPP TS 29.122 [4], are applicable for 5G
MonitoringEvent API.
### 4.4.3 Procedures for Device Triggering
The procedures for device triggering as described in subclause 4.4.6 of 3GPP
TS 29.122 [4] shall be applicable in 5G with the following differences:
\- description of the SCS/AS applies to the AF;
\- description of the SCEF applies to the NEF;
\- description of the HSS applies to the UDM;
\- the NEF shall interact with the UDM by using the
Nudm_SubscriberDataManagement service and the Nudm_UEContextManagement service
as defined in 3GPP TS 29.503 [17]; and
\- the NEF acts as MTC-IWF.
### 4.4.4 Procedures for resource management of Background Data Transfer
The procedures for resource management of Background Data Transfer (BDT) in
5GS are described in subclause 4.4.3 3GPP TS 29.122 [4] with the following
differences:
\- description of the SCS/AS applies to the AF;
\- description of the SCEF applies to the NEF;
\- description of the PCRF applies to the PCF; and
\- the NEF shall interact with the PCF by using Npcf_BDTPolicyControl service
as defined in 3GPP TS 29.554 [19].
### 4.4.5 Procedures for CP Parameters Provisioning
The procedures for CP parameters provisioning as described in subclause 4.4.9
of 3GPP TS 29.122 [4] shall be applicable in 5G with the following
differences:
\- description of the SCS/AS applies to the AF;
\- description of the SCEF applies to the NEF;
\- description of the HSS applies to the UDM;
\- the NEF shall interact with the UDM by using Nudm_ParameterProvision
service as defined in 3GPP TS 29.503 [17].
### 4.4.6 Procedures for PFD Management
The procedures for PFD management as described in subclause 4.4.10 of 3GPP TS
29.122 [4] shall be applicable for 5GS with the following differences:
\- description of the SCS/AS applies to the AF;
\- description of the SCEF applies to the NEF; and
\- the NEF (PFDF) shall interact with the UDR for PFD management by using
Nudr_DataRepository service as defined in 3GPP TS 29.504 [20]. The PFDF is
functionality within the NEF.
### 4.4.7 Procedures for Traffic Influence
#### 4.4.7.1 General
In order to create a resource for the Traffic Influence, the AF shall send an
HTTP POST message to the NEF to the resource \"Traffic Influence
Subscription\", the body of the HTTP POST message may include the AF Service
Identifier, external Group Identifier, any UE Indication, the UE address,
GPSI, DNN, S-NSSAI, Application Identifier or traffic filtering information,
Subscribed Event, Notification destination address, a list of geographic zone
identifier(s), AF Transaction Identifier, a list of DNAI(s), routing profile
ID(s) or N6 traffic routing information, Indication of application relocation
possibility, type of notifications, Temporal validity conditions. The
Notification destination address shall be included if the Subscribed Event is
included in the HTTP request message.
In order to update an existing traffic influence subscription, the AF shall
send an HTTP PUT or PATCH message to the resource \"Individual Traffic
Influence Subscription\" requesting to change the traffic influence
parameters.
In order to delete an existing traffic influence subscription, the AF shall
send an HTTP DELETE message to the NEF to the resource \"Individual Traffic
Influence Subscription\".
Upon receipt of the HTTP request from the AF, if the AF is authorized, the NEF
shall perform the mapping as described in 3GPP TS 23.501 [3], and then perform
as described in subclause 4.4.7.2 if the request is identified by UE address
or perform as described in subclause 4.4.7.3 if the request is not identified
by UE address.
If the NEF receives a UP management event notification from the SMF indicating
the subscribed event is detected, the NEF shall send an HTTP POST message
including the notified event (e.g. UP path has changed) to the AF.
The AF shall respond with an HTTP response to confirm the notification
destination received during creation of the subscription.
#### 4.4.7.2 AF request identified by UE address
Upon receipt of the above AF request which is for an individual UE identified
by IP or Ethernet address, the NEF may interact with the BSF to retrieve the
related PCF information by invoking the Nbsf_Management_Discovery service
operation as described in 3GPP TS 29.521 [9], if the NEF receives an error
code from the BSF, the NEF shall not create, update or delete the resource and
shall respond to the AF with a proper error status code.
After receiving a successful response from the BSF, the NEF shall interact
with the PCF by invoking the Npcf_PolicyAuthorization service as described in
3GPP TS 29.514 [7]. After receiving a successful response from the PCF, the
NEF shall,
\- for the HTTP POST request, create a resource \"Individual Traffic Influence
Subscription\" which represents the traffic influence subscription, addressed
by a URI that contains the AF Identifier and an NEF-created subscription
identifier, and shall respond to the AF with a 201 Created status code,
including a Location header field containing the URI for the created resource.
The AF shall use the URI received in the Location header in subsequent
requests to the NEF to refer to this traffic influence subscription.
\- for the HTTP PUT or PATCH request, update a resource \"Individual Traffic
Influence Subscription\" which represents the traffic influence subscription,
and shall responds to the AF with a 200 OK status code.
\- for the HTTP DELETE request, remove all properties of the resource and
delete the corresponding active resource \"Individual Traffic Influence
Subscription\" which represents the traffic influence subscription, then shall
responds to the AF with a 204 No Content status code.
If the NEF receives a response with an error code from the PCF, the NEF shall
not create, update or delete the resource and shall respond to the AF with a
proper error status code.
#### 4.4.7.3 AF request not identified by UE address
For AF request not identified by UE address, it may target an individual UE, a
group of UEs or any UE. For an individual UE identified by GPSI, or a group of
UEs identified by External Group Identifier, the NEF shall interact with the
UDM by invoking the Nudm_SubscriberDataManagement service as described in 3GPP
TS 29.503 [17] to retrieve the SUPI or Internal Group Identifier.
The NEF shall interact with the UDR by invoking the Nudr_DataRepository
service as described in 3GPP TS 29.504 [20], if the NEF receives an error code
from the UDR, the NEF shall not create, update or delete the resource and
shall respond to the AF with a proper error status code.
After receiving a successful response from the UDR, the NEF shall,
\- for the HTTP POST request, create a resource \"Individual Traffic Influence
Subscription\" which represents the traffic influence subscription, addressed
by a URI that contains the AF Identifier and an NEF-created subscription
identifier, and shall respond to the AF with a 201 Created status code,
including a Location header field containing the URI for the created resource.
The AF shall use the URI received in the Location header in subsequent
requests to the NEF to refer to this traffic influence subscription.
\- for the HTTP PUT or PATCH request, update a resource \"Individual Traffic
Influence Subscription\" which represents the traffic influence subscription,
and shall responds to the AF with a 200 OK status code.
\- for the HTTP DELETE request, delete the corresponding active resource
\"Individual Traffic Influence Subscription\" which represents the traffic
influence subscription, and shall responds to the AF with a 204 No Content
status code.
### 4.4.8 Procedures for changing the chargeable party at session set up or
during the session
The procedures for changing the chargeable party at session set up or during
the session in 5GS are described in subclause 4.4.4 of 3GPP TS 29.122 [4] with
the following differences:
\- description of the SCS/AS applies to the AF;
\- description of the SCEF applies to the NEF;
\- description of the PCRF applies to the PCF; and
\- the NEF may interact with BSF by using Nbsf_Management_Discovery service
(as defined in 3GPP TS 29.521 [9]) to retrieve the PCF address; and
\- the NEF shall interact with the PCF by using Npcf_PolicyAuthorization
service as defined in 3GPP TS 29.514 [7].
### 4.4.9 Procedures for setting up an AF session with required QoS
The procedures for setting up an AF session with required QoS in 5GS are
described in subclause 4.4.13 of 3GPP TS 29.122 [4] with the following
differences:
\- description of the SCS/AS applies to the AF;
\- description of the SCEF applies to the NEF;
\- description of the PCRF applies to the PCF; and
\- the NEF may interact with BSF by using Nbsf_Management_Discovery service
(as defined in 3GPP TS 29.521 [9]) to retrieve the PCF address; and
\- the NEF shall interact with the PCF by using Npcf_PolicyAuthorization
service as defined in 3GPP TS 29.514 [7];
\- description about the INDICATION_OF_SUCCESSFUL_RESOURCES_ALLOCATION event
and INDICATION_OF_FAILED_RESOURCES_ALLOCATION event apply to the
SUCCESSFUL_RESOURCES_ALLOCATION event and FAILED_RESOURCES_ALLOCATION event
respectively.
# 5 **NEF Northbound** APIs
## 5.1 Introduction
The **NEF Northbound** APIs are a set of APIs defining the related procedures
and resources for the interaction between the NEF and the AF.
## 5.2 Information applicable to several APIs
The usage of HTTP and content type, as specified in subclauses 5.2.2 and 5.2.3
of 3GPP TS 29.122 [4] respectively, shall be applicable for NEF Northbound
APIs.
The notification, error handling, feature negotiation, HTTP custom headers as
specified in subclauses 5.2.5, 5.2.6, 5.2.7, 5.2.8 of 3GPP TS 29.122 [4]
respectively, shall be applicable for NEF Northbound APIs except that the SCEF
is replaced by the NEF and the SCS/AS is replaced by the AF.
The conventions for Open API specification files as specified in subclause
5.2.10 of 3GPP TS 29.122 [4] shall be applicable for NEF Northbound APIs.
## 5.3 Reused APIs
This subclause describes the northbound APIs which are applicable for both EPS
and 5GS.
Table 5.3.1-1: Reused APIs applicable for both EPS and 5GS
+-------------------------+-------------------------------------------+ | API Name | Differences | +-------------------------+-------------------------------------------+ | ResourceManagementOfBdt | The \"LocBdt_5G\" feature as described | | | in subclause 5.4.4 of | | | 3GPP TS 29.122 [4] may only be | | | supported in 5G. | +-------------------------+-------------------------------------------+ | PfdManagement | | +-------------------------+-------------------------------------------+ | MonitoringEvent | The | | | \"Number_ | | | of_UEs_in_an_area_notification_5G\" | | | feature as described in subclause 5.3.4 | | | of 3GPP TS 29.122 [4] may only be | | | supported in 5G. | +-------------------------+-------------------------------------------+ | DeviceTriggering | | +-------------------------+-------------------------------------------+ | CpProvisioning | The \"ExpectedUMT_5G\" feature as | | | described in subclause 5.10.4 of | | | 3GPP TS 29.122 [4] may only be | | | supported in 5G. | +-------------------------+-------------------------------------------+ | ChargeableParty | - The \"EthChgParty_5G\" feature as | | | described in subclause 5.5.4 of | | | 3GPP TS 29.122 [4] may only be | | | supported in 5G. | | | | | | - The events (i.e. LOSS_OF_BEARER, | | | RECOVERY_OF_BEARER and | | | RELEASE_OF_BEARER) do not apply for 5G. | +-------------------------+-------------------------------------------+ | AsSessionWithQoS | - The \"EthAsSessionQoS_5G\" feature as | | | described in subclause 5.14.4 of | | | 3GPP TS 29.122 [4] may only be | | | supported in 5G. | | | | | | - The events (i.e. LOSS_OF_BEARER, | | | RECOVERY_OF_BEARER and | | | RELEASE_OF_BEARER) do not apply for 5G. | +-------------------------+-------------------------------------------+
## 5.4 TrafficInfluence API
### 5.4.1 Resources
#### 5.4.1.1 Overview
This subclause describes the structure for the Resource URIs as shown in
figure 5.4.1.1-1 and the resources and HTTP methods used for the
TrafficInfluence API.
Figure 5.4.1.1-1: Resource URI structure of the TrafficInfluence API
Table 5.4.1.1-1 provides an overview of the resources and HTTP methods
applicable for the TrafficInfluence API.
Table 5.4.1.1-1: Resources and methods overview
* * *
Resource name Resource URI HTTP method Description Traffic Influence
Subscription {apiRoot}/3gpp-traffic-Influence/v1/{afId}/subscriptions GET Read
all subscriptions for a given AF POST Create a new subscription to traffic
influence Individual Traffic Influence Subscription {apiRoot}/3gpp-traffic-
Influence/v1/{afId}/subscriptions/{subscriptionId} GET Read the subscription
to the traffic influence PUT Modify all of the properties of an existing
subscription to an traffic influence PATCH Modify part of the properties of an
existing subscription to an traffic influence DELETE Delete the subscription
to the traffic influence
* * *
#### 5.4.1.2 Resource: Traffic Influence Subscription
##### 5.4.1.2.1 Introduction
This resource allows a AF to read all active traffic influence subscribtions
for the given AF.
##### 5.4.1.2.2 Resource Definition
Resource URI: **{apiRoot}/3gpp-traffic-influence/v1/{afId}/subscriptions**
This resource shall support the resource URI variables defined in table
5.4.1.2.2-1.
Table 5.4.1.2.2-1: Resource URI variables for this resource
* * *
Name Definition apiRoot Subclause 5.2.4 of 3GPP TS 29.122 [4]. afId Identifier
of the AF of type string.
* * *
##### 5.4.1.2.3 Resource Methods
###### 5.4.1.2.3.1 General
The following subclauses specify the resource methods supported by the
resource as described in subclause 5.4.1.2.3.
###### 5.4.1.2.3.2 GET
The GET method allows to read all active subscriptions for a given AF. The AF
shall initiate the HTTP GET request message and the NEF shall respond to the
message.
This method shall support the URI query parameters specified in table
5.4.1.2.3.2-1.
Table 5.4.1.2.3.2-1: URI query parameters supported by the GET method on this
resource
* * *
Name Data type P Cardinality Description N/A
* * *
This method shall support the request data structures specified in table
5.4.1.2.3.2-2 and the response data structures and response codes specified in
table 5.4.1.2.3.2-3.
Table 5.4.1.2.3.2-2: Data structures supported by the GET Request Body on this
resource
* * *
Data type P Cardinality Description N/A
* * *
Table 5.4.1.2.3.2-3: Data structures supported by the GET Response Body on
this resource
* * *
Data type P Cardinality Response codes Description array(TrafficInfluSub) M
0..N 200 OK The subscription information for the AF in the request URI are
returned. NOTE: The mandatory HTTP error status codes for the GET method
listed in table 5.2.6-1 of 3GPP TS 29.122 [4] also apply.
* * *
###### 5.4.1.2.3.3 POST
The POST method creates a new subscription resource to traffic influence
subscription for a given AF. The AF shall initiate the HTTP POST request
message and the NEF shall respond to the message. The NEF shall construct the
URI of the created resource.
This method shall support the request data structures specified in table
5.4.1.2.3.3-1 and the response data structures and response codes specified in
table 5.4.1.2.3.3-2.
Table 5.4.1.2.3.3-1: Data structures supported by the POST Request Body on
this resource
* * *
Data type P Cardinality Description TrafficInfluSub M 1 Parameters to register
a subscription to influencing traffic routing and/or notification about UP
management events with the NEF.
* * *
Table 5.4.1.2.3.3-2: Data structures supported by the POST Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | Tr | M | 1 | 201 Created | The | | afficInfluSub | | | | subscription | | | | | | was created | | | | | | successfully. | | | | | | | | | | | | The URI of | | | | | | the created | | | | | | resource | | | | | | shall be | | | | | | returned in | | | | | | the | | | | | | \"Location\" | | | | | | HTTP header. | +---------------+---+-------------+---------------+---------------+ | > NOTE: The | | | | | | > mandatory | | | | | | > HTTP error | | | | | | > status | | | | | | > codes for | | | | | | > the POST | | | | | | > method | | | | | | > listed in | | | | | | > | | | | | | table 5.2.6-1 | | | | | | > of | | | | | | > 3GPP TS | | | | | | 29.122 [4] | | | | | | > also apply. | | | | | +---------------+---+-------------+---------------+---------------+
#### 5.4.1.3 Resource: Individual Traffic Influence Subscription
##### 5.4.1.3.1 Introduction
This resource allows a AF to register a subscription to influencing traffic
routing and/or notification about UP management events with the NEF.
##### 5.4.1.3.2 Resource Definition
Resource URI: **{apiRoot}/3gpp-traffic-
influence/v1/{afId}/subscriptions/{subscriptionId}**
This resource shall support the resource URI variables defined in table
5.4.1.3.2-1.
Table 5.4.1.3.2-1: Resource URI variables for this resource
* * *
Name Definition apiRoot Subclause 5.2.4 of 3GPP TS 29.122 [4]. afId Identifier
of the AF of type string. subscriptionId Identifier of the subscription
resource of type string.
* * *
##### 5.4.1.3.3 Resource Methods
###### 5.4.1.3.3.1 General
The following subclauses specify the resource methods supported by the
resource as described in subclause 5.4.1.3.3.
###### 5.4.1.3.3.2 GET
The GET method allows to read the active subscription for a given AF and
subscription Id. The AF shall initiate the HTTP GET request message and theNEF
shall respond to the message.
This method shall support the URI query parameters specified in table
5.4.1.3.3.2-1.
Table 5.4.1.3.3.2-1: URI query parameters supported by the GET method on this
resource
* * *
Name Data type P Cardinality Description N/A
* * *
This method shall support the request data structures specified in table
5.4.1.3.3.2-2 and the response data structures and response codes specified in
table 5.4.1.3.3.2-3.
Table 5.4.1.3.3.2-2: Data structures supported by the GET Request Body on this
resource
* * *
Data type P Cardinality Description N/A
* * *
Table 5.4.1.3.3.2-3: Data structures supported by the GET Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | Tr | M | 1 | 200 OK | The | | afficInfluSub | | | | subscription | | | | | | information | | | | | | for the AF in | | | | | | the request | | | | | | URI are | | | | | | returned. | +---------------+---+-------------+---------------+---------------+ | > NOTE: The | | | | | | > mandatory | | | | | | > HTTP error | | | | | | > status | | | | | | > codes for | | | | | | > the GET | | | | | | > method | | | | | | > listed in | | | | | | > | | | | | | table 5.2.6-1 | | | | | | > of | | | | | | > 3GPP TS | | | | | | 29.122 [4] | | | | | | > also apply. | | | | | +---------------+---+-------------+---------------+---------------+
###### 5.4.1.3.3.3 PUT
The PUT method modifies an existing subscription resource to update a
subscription. The AF shall initiate the HTTP PUT request message and the NEF
shall respond to the message.
This method shall support the request data structures specified in table
5.4.1.3.3.3-1 and the response data structures and response codes specified in
table 5.4.1.3.3.3-2.
Table 5.4.1.3.3.3-1: Data structures supported by the PUT Request Body on this
resource
* * *
Data type P Cardinality Description TrafficInfluSub M 1 Modify an existing
subscription to influencing traffic routing and/or notification about UP
management events with the NEF.
* * *
Table 5.4.1.3.3.3-2: Data structures supported by the PUT Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | Tr | M | 1 | 200 OK | The | | afficInfluSub | | | | subscription | | | | | | was updated | | | | | | successfully. | +---------------+---+-------------+---------------+---------------+ | > NOTE: The | | | | | | > mandatory | | | | | | > HTTP error | | | | | | > status | | | | | | > codes for | | | | | | > the PUT | | | | | | > method | | | | | | > listed in | | | | | | > | | | | | | table 5.2.6-1 | | | | | | > of | | | | | | > 3GPP TS | | | | | | 29.122 [4] | | | | | | > also apply. | | | | | +---------------+---+-------------+---------------+---------------+
###### 5.4.1.3.3.4 PATCH
The PATCH method allows to change some properties of an existing traffic
influence subscription. The AF shall initiate the HTTP PATCH request message
and the NEF shall respond to the message.
This method shall support the request data structures specified in table
5.4.1.3.3.4-1 and the response data structures and response codes specified in
table 5.4.1.3.3.4-2.
Table 5.4.1.3.3.4-1: Data structures supported by the PATCH Request Body on
this resource
* * *
Data type P Cardinality Description TrafficInfluSubPatch M 1 Partial update of
a subscription to influencing traffic routing and/or notifications about UP
management events with the NEF.
* * *
Table 5.4.1.3.3.4-2: Data structures supported by the PATCH Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | Tr | M | 1 | 200 OK | The | | afficInfluSub | | | | subscription | | | | | | was modified | | | | | | successfully. | +---------------+---+-------------+---------------+---------------+ | > NOTE: The | | | | | | > mandatory | | | | | | > HTTP error | | | | | | > status | | | | | | > codes for | | | | | | > the PATCH | | | | | | > method | | | | | | > listed in | | | | | | > | | | | | | table 5.2.6-1 | | | | | | > of | | | | | | > 3GPP TS | | | | | | 29.122 [4] | | | | | | > also apply. | | | | | +---------------+---+-------------+---------------+---------------+
###### 5.4.1.3.3.5 DELETE
The DELETE method deletes the traffic influence subscription for a given AF.
The AF shall initiate the HTTP DELETE request message and the NEF shall
respond to the message.
This method shall support the URI query parameters specified in table
5.4.1.3.3.5-1.
Table 5.4.1.3.3.5-1: URI query parameters supported by the DELETE method on
this resource
* * *
Name Data type P Cardinality Description N/A
* * *
This method shall support the request data structures specified in table
5.4.1.3.3.5-2 and the response data structures and response codes specified in
table 5.4.1.3.3.5-3.
Table 5.4.1.3.3.5-2: Data structures supported by the DELETE Request Body on
this resource
* * *
Data type P Cardinality Description N/A
* * *
Table 5.4.1.3.3.5-3: Data structures supported by the DELETE Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | N/A | | | 204 No | The | | | | | Content | subscription | | | | | | was | | | | | | terminated | | | | | | successfully. | +---------------+---+-------------+---------------+---------------+ | > NOTE: The | | | | | | > mandatory | | | | | | > HTTP error | | | | | | > status | | | | | | > codes for | | | | | | > the DELETE | | | | | | > method | | | | | | > listed in | | | | | | > | | | | | | table 5.2.6-1 | | | | | | > of | | | | | | > 3GPP TS | | | | | | 29.122 [4] | | | | | | > also apply. | | | | | +---------------+---+-------------+---------------+---------------+
### 5.4.2 Notifications
#### 5.4.2.1 Introduction
Upon receipt of a UP management event notification from the SMF indicating the
subscribed event (e.g. a DNAI has changed) is detected, the NEF shall send an
HTTP POST message including the notified event to the AF. The NEF and the AF
shall support the notification mechanism as described in subclause 5.2.5 of
3GPP TS 29.122 [4].
#### 5.4.2.2 Event Notification
URI: **{notificationDestination}**
The operation shall support the URI variables defined in table 5.4.2.2-1.
Table 5.4.2.2-1: URI variables
* * *
Name Definition notificationDestination Callback reference provided by the AF
during creation of the subscription within the TrafficInfluSub data type as
defined in Table 5.4.3.3.2-1.
* * *
#### 5.4.2.3 Operation Definition
##### 5.4.2.3.1 Notification via HTTP POST
This method shall support the request data structures specified in table
5.4.2.3.1-1 and the response data structures and response codes specified in
table 5.4.2.3.1-2.
Table 5.4.2.3.1-1: Data structures supported by the POST Request Body on this
resource
* * *
Data type P Cardinality Description EventNotification M 1 The UP management
event notification is provided by the NEF to the AF.
* * *
Table 5.4.2.3.1-2: Data structures supported by the POST Response Body on this
resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | N/A | | | 204 No | The event | | | | | Content | notification | | | | | | is received | | | | | | successfully. | +---------------+---+-------------+---------------+---------------+ | > NOTE: The | | | | | | > mandatory | | | | | | > HTTP error | | | | | | > status | | | | | | > codes for | | | | | | > the POST | | | | | | > method | | | | | | > listed in | | | | | | > | | | | | | table 5.2.6-1 | | | | | | > of | | | | | | > 3GPP TS | | | | | | 29.122 [4] | | | | | | > also apply. | | | | | +---------------+---+-------------+---------------+---------------+
##### 5.4.2.3.2 Notification via Websocket
If supported by both AF and NEF and successfully negotiated, the
EventNotification may alternatively be delivered through the Websocket
mechanism as defined in subclause 5.2.5.4 of 3GPP TS 29.122 [4].
### 5.4.3 Data Model
#### 5.4.3.1 General
This subclause specifies the application data model supported by the
TrafficInfluence API.
#### 5.4.3.2 Reused data types
The data types reused by the TrafficInfluence API from other specifications
are listed in table 5.4.3.2-1.
Table 5.4.3.2-1: Re-used Data Types
* * *
Data type Reference Comments Dnai 3GPP TS 29.571 [8] Identifies a DNAI.
DnaiChangeType 3GPP TS 29.571 [8] Describes the types of DNAI change. Dnn 3GPP
TS 29.571 [8] Identifies a DNN. EthFlowDescription 3GPP TS 29.514 [7] Contains
the Ethernet data flow information. ExternalGroupId 3GPP TS 29.122 [4]
External Group Identifier for a user group. FlowInfo 3GPP TS 29.122 [4]
Contains the IP data flow information. Gpsi 3GPP TS 29.571 [8] Identifies a
GPSI. Ipv4Addr 3GPP TS 29.122 [4] Identifies an IPv4 address. Ipv6Addr 3GPP TS
29.122 [4] Identifies an IPv6 address. Ipv6Prefix 3GPP TS 29.571 [8]
Identifies an IPv6 Prefix. Link 3GPP TS 29.122 [4] Identifies a referenced
resource. MacAddr48 3GPP TS 29.571 [8] Identifies a MAC address. Port 3GPP TS
29.122 [4] Identifies a port number. RouteToLocation 3GPP TS 29.571 [8]
Describes the traffic routes to the locations of the application. Snssai 3GPP
TS 29.571 [8] Identifies the S-NSSAI. SupportedFeatures 3GPP TS 29.571 [8]
Used to negotiate the applicability of the optional features defined in table
5.4.4-1. TemporalValidity 3GPP TS 29.514 [7] Indicates the time interval(s)
during which the AF request is to be applied WebsockNotifConfig 3GPP TS 29.122
[4] Contains the configuration parameters to set up notification delivery over
Websocket protocol.
* * *
#### 5.4.3.3 Structured data types
##### 5.4.3.3.1 Introduction
This clause defines the structured data types to be used in resource
representations.
##### 5.4.3.3.2 Type: TrafficInfluSub
This type represents a traffic influence subscription. The same structure is
used in the subscription request and subscription response.
Table 5.4.3.3.2-1: Definition of type TrafficInfluSub
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | | | | | | | | | | | | | | (NOTE 1) | +-----------+-----------+---+-----------+-----------+-----------+ | af | string | O | 0..1 | I | | | ServiceId | | | | dentifies | | | | | | | a service | | | | | | | on behalf | | | | | | | of which | | | | | | | the AF is | | | | | | | issuing | | | | | | | the | | | | | | | request. | | +-----------+-----------+---+-----------+-----------+-----------+ | afAppId | string | O | 0..1 | I | | | | | | | dentifies | | | | | | | an | | | | | | | app | | | | | | | lication. | | | | | | | | | | | | | | (NOTE 3) | | +-----------+-----------+---+-----------+-----------+-----------+ | afTransId | string | O | 0..1 | I | | | | | | | dentifies | | | | | | | an NEF | | | | | | | N | | | | | | | orthbound | | | | | | | interface | | | | | | | tra | | | | | | | nsaction, | | | | | | | generated | | | | | | | by the | | | | | | | AF. | | +-----------+-----------+---+-----------+-----------+-----------+ | a | boolean | O | 0..1 | I | | | ppReloInd | | | | dentifies | | | | | | | whether | | | | | | | an | | | | | | | ap | | | | | | | plication | | | | | | | can be | | | | | | | relocated | | | | | | | once a | | | | | | | location | | | | | | | of the | | | | | | | ap | | | | | | | plication | | | | | | | has been | | | | | | | selected. | | | | | | | Set to | | | | | | | \"true\" | | | | | | | if it can | | | | | | | be | | | | | | | r | | | | | | | elocated; | | | | | | | otherwise | | | | | | | set to | | | | | | | \ | | | | | | | "false\". | | | | | | | Default | | | | | | | value is | | | | | | | \"false\" | | | | | | | if | | | | | | | omitted. | | +-----------+-----------+---+-----------+-----------+-----------+ | dnn | Dnn | O | 0..1 | I | | | | | | | dentifies | | | | | | | a DNN. | | +-----------+-----------+---+-----------+-----------+-----------+ | snssai | Snssai | O | 0..1 | I | | | | | | | dentifies | | | | | | | an | | | | | | | S-NSSAI. | | +-----------+-----------+---+-----------+-----------+-----------+ | extern | Extern | O | 0..1 | I | | | alGroupId | alGroupId | | | dentifies | | | | | | | a group | | | | | | | of users. | | | | | | | | | | | | | | (NOTE 2) | | +-----------+-----------+---+-----------+-----------+-----------+ | anyUeInd | boolean | O | 0..1 | I | | | | | | | dentifies | | | | | | | whether | | | | | | | the AF | | | | | | | request | | | | | | | applies | | | | | | | to any | | | | | | | UE. This | | | | | | | attribute | | | | | | | shall set | | | | | | | to | | | | | | | \"true\" | | | | | | | if | | | | | | | a | | | | | | | pplicable | | | | | | | for any | | | | | | | UE, | | | | | | | o | | | | | | | therwise, | | | | | | | set to | | | | | | | \ | | | | | | | "false\". | | | | | | | | | | | | | | (NOTE 2) | | +-----------+-----------+---+-----------+-----------+-----------+ | subscri | arra | O | 1..N | I | | | bedEvents | y(Subscri | | | dentifies | | | | bedEvent) | | | the | | | | | | | re | | | | | | | quirement | | | | | | | to be | | | | | | | notified | | | | | | | of the | | | | | | | event(s). | | +-----------+-----------+---+-----------+-----------+-----------+ | gpsi | Gpsi | O | 0..1 | I | | | | | | | dentifies | | | | | | | a user. | | | | | | | | | | | | | | (NOTE 2) | | +-----------+-----------+---+-----------+-----------+-----------+ | ipv4Addr | Ipv4Addr | O | 0..1 | I | | | | | | | dentifies | | | | | | | the IPv4 | | | | | | | address. | | | | | | | | | | | | | | (NOTE 2) | | +-----------+-----------+---+-----------+-----------+-----------+ | ipDomain | string | O | 0..1 | The IPv4 | | | | | | | address | | | | | | | domain | | | | | | | id | | | | | | | entifier. | | | | | | | | | | | | | | The | | | | | | | attribute | | | | | | | may only | | | | | | | be | | | | | | | provided | | | | | | | if the | | | | | | | ipv4Addr | | | | | | | attribute | | | | | | | is | | | | | | | present. | | +-----------+-----------+---+-----------+-----------+-----------+ | ipv6Addr | Ipv6Addr | O | 0..1 | I | | | | | | | dentifies | | | | | | | the IPv6 | | | | | | | address. | | | | | | | | | | | | | | (NOTE 2) | | +-----------+-----------+---+-----------+-----------+-----------+ | macAddr | MacAddr48 | O | 0..1 | I | | | | | | | dentifies | | | | | | | the MAC | | | | | | | address. | | | | | | | (NOTE 2) | | +-----------+-----------+---+-----------+-----------+-----------+ | dn | DnaiC | O | 0..1 | I | | | aiChgType | hangeType | | | dentifies | | | | | | | a type of | | | | | | | not | | | | | | | ification | | | | | | | regarding | | | | | | | UP path | | | | | | | m | | | | | | | anagement | | | | | | | event. | | +-----------+-----------+---+-----------+-----------+-----------+ | notif | Link | C | 0..1 | Contains | | | icationDe | | | | the | | | stination | | | | Callback | | | | | | | URL to | | | | | | | receive | | | | | | | the | | | | | | | not | | | | | | | ification | | | | | | | from the | | | | | | | NEF. | | | | | | | | | | | | | | It shall | | | | | | | be | | | | | | | present | | | | | | | if the | | | | | | | \" | | | | | | | subscribe | | | | | | | dEvents\" | | | | | | | is | | | | | | | present. | | +-----------+-----------+---+-----------+-----------+-----------+ | reque | boolean | O | 0..1 | Set to | Notific | | stTestNot | | | | true by | ation_te | | ification | | | | the | st_event | | | | | | SCS/AS to | | | | | | | request | | | | | | | the NEF | | | | | | | to send a | | | | | | | test | | | | | | | not | | | | | | | ification | | | | | | | as | | | | | | | defined | | | | | | | in | | | | | | | subclaus | | | | | | | e 5.2.5.3 | | | | | | | of | | | | | | | 3GP | | | | | | | P TS 29.1 | | | | | | | 22 [4]. | | | | | | | Set to | | | | | | | false or | | | | | | | omitted | | | | | | | o | | | | | | | therwise. | | +-----------+-----------+---+-----------+-----------+-----------+ | websockNo | WebsockNo | O | 0..1 | Conf | Notif | | tifConfig | tifConfig | | | iguration | ication_ | | | | | | p | websocket | | | | | | arameters | | | | | | | to set up | | | | | | | not | | | | | | | ification | | | | | | | delivery | | | | | | | over | | | | | | | Websocket | | | | | | | protocol. | | +-----------+-----------+---+-----------+-----------+-----------+ | self | Link | C | 0..1 | Link to | | | | | | | the | | | | | | | created | | | | | | | resource. | | | | | | | | | | | | | | This | | | | | | | parameter | | | | | | | shall be | | | | | | | supplied | | | | | | | by the | | | | | | | NEF in | | | | | | | HTTP | | | | | | | responses | | | | | | | that | | | | | | | include | | | | | | | an object | | | | | | | of | | | | | | | Traffi | | | | | | | cInfluSub | | | | | | | type | | +-----------+-----------+---+-----------+-----------+-----------+ | traff | array( | O | 1..N | I | | | icFilters | FlowInfo) | | | dentifies | | | | | | | IP packet | | | | | | | filters. | | | | | | | | | | | | | | (NOTE 3) | | +-----------+-----------+---+-----------+-----------+-----------+ | ethTraff | array(E | O | 1..N | I | | | icFilters | thFlowDes | | | dentifies | | | | cription) | | | Ethernet | | | | | | | packet | | | | | | | filters. | | | | | | | | | | | | | | (NOTE 3) | | +-----------+-----------+---+-----------+-----------+-----------+ | traf | arra | O | 1..N | I | | | ficRoutes | y(RouteTo | | | dentifies | | | | Location) | | | the N6 | | | | | | | traffic | | | | | | | routing | | | | | | | req | | | | | | | uirement. | | +-----------+-----------+---+-----------+-----------+-----------+ | tempV | array | O | 0..N | Indicates | | | alidities | (Temporal | | | the time | | | | Validity) | | | in | | | | | | | terval(s) | | | | | | | during | | | | | | | which the | | | | | | | AF | | | | | | | request | | | | | | | is to be | | | | | | | applied. | | +-----------+-----------+---+-----------+-----------+-----------+ | validG | arra | O | 1..N | I | | | eoZoneIds | y(string) | | | dentifies | | | | | | | a | | | | | | | g | | | | | | | eographic | | | | | | | zone that | | | | | | | the AF | | | | | | | request | | | | | | | applies | | | | | | | only to | | | | | | | the | | | | | | | traffic | | | | | | | of UE(s) | | | | | | | located | | | | | | | in this | | | | | | | specific | | | | | | | zone. | | +-----------+-----------+---+-----------+-----------+-----------+ | suppFeat | Supporte | C | 0..1 | Indicates | | | | dFeatures | | | the list | | | | | | | of | | | | | | | Supported | | | | | | | features | | | | | | | used as | | | | | | | described | | | | | | | in | | | | | | | subclau | | | | | | | se 5.4.4. | | | | | | | | | | | | | | This | | | | | | | attribute | | | | | | | shall be | | | | | | | provided | | | | | | | in the | | | | | | | POST | | | | | | | request | | | | | | | and in | | | | | | | the | | | | | | | response | | | | | | | of | | | | | | | s | | | | | | | uccessful | | | | | | | resource | | | | | | | creation. | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE 1: | | | | | | | P | | | | | | | roperties | | | | | | | marked | | | | | | | with a | | | | | | | feature | | | | | | | as | | | | | | | defined | | | | | | | in | | | | | | | subcla | | | | | | | use 5.4.4 | | | | | | | are | | | | | | | a | | | | | | | pplicable | | | | | | | as | | | | | | | described | | | | | | | in | | | | | | | subcla | | | | | | | use 5.2.7 | | | | | | | of | | | | | | | 3GP | | | | | | | P TS 29.1 | | | | | | | 22 [4]. | | | | | | | If no | | | | | | | feature | | | | | | | is | | | | | | | i | | | | | | | ndicated, | | | | | | | the | | | | | | | related | | | | | | | property | | | | | | | applies | | | | | | | for all | | | | | | | the | | | | | | | features. | | | | | | | | | | | | | | NOTE 2: | | | | | | | One of | | | | | | | i | | | | | | | ndividual | | | | | | | UE | | | | | | | i | | | | | | | dentifier | | | | | | | (i.e. | | | | | | | \"gpsi\", | | | | | | | " | | | | | | | macAddr", | | | | | | | \"i | | | | | | | pv4Addr\" | | | | | | | or | | | | | | | \"ipv | | | | | | | 6Addr\"), | | | | | | | External | | | | | | | Group | | | | | | | I | | | | | | | dentifier | | | | | | | (i.e. | | | | | | | \" | | | | | | | externalG | | | | | | | roupId\") | | | | | | | or any UE | | | | | | | i | | | | | | | ndication | | | | | | | \"a | | | | | | | nyUeInd\" | | | | | | | shall be | | | | | | | included. | | | | | | | | | | | | | | NOTE 3: | | | | | | | One of | | | | | | | \"a | | | | | | | fAppId\", | | | | | | | \"traffic | | | | | | | Filters\" | | | | | | | or | | | | | | | \"e | | | | | | | thTraffic | | | | | | | Filters\" | | | | | | | shall be | | | | | | | included. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
##### 5.4.3.3.3 Type: TrafficInfluSubPatch
This type represents a subscription of traffic influence parameters provided
by the AF to the NEF. The structure is used for HTTP PATCH request.
Table 5.4.3.3.3-1: Definition of type TrafficInfluSubPatch
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +-----------+-----------+---+-----------+-----------+-----------+ | a | boolean | O | 0..1 | I | | | ppReloInd | | | | dentifies | | | | | | | whether | | | | | | | an | | | | | | | ap | | | | | | | plication | | | | | | | can be | | | | | | | relocated | | | | | | | once a | | | | | | | location | | | | | | | of the | | | | | | | ap | | | | | | | plication | | | | | | | has been | | | | | | | selected. | | | | | | | | | | | | | | (NOTE) | | +-----------+-----------+---+-----------+-----------+-----------+ | traff | array( | O | 1..N | I | | | icFilters | FlowInfo) | | | dentifies | | | | | | | IP packet | | | | | | | filters. | | +-----------+-----------+---+-----------+-----------+-----------+ | ethTraff | array(E | O | 1..N | I | | | icFilters | thFlowDes | | | dentifies | | | | cription) | | | Ethernet | | | | | | | packet | | | | | | | filters. | | +-----------+-----------+---+-----------+-----------+-----------+ | traf | arra | O | 1..N | I | | | ficRoutes | y(RouteTo | | | dentifies | | | | Location) | | | the N6 | | | | | | | traffic | | | | | | | routing | | | | | | | req | | | | | | | uirement. | | | | | | | | | | | | | | (NOTE) | | +-----------+-----------+---+-----------+-----------+-----------+ | tempV | array | O | 1..N | Indicates | | | alidities | (Temporal | | | the time | | | | Validity) | | | in | | | | | | | terval(s) | | | | | | | during | | | | | | | which the | | | | | | | AF | | | | | | | request | | | | | | | is to be | | | | | | | applied. | | | | | | | | | | | | | | (NOTE) | | +-----------+-----------+---+-----------+-----------+-----------+ | validG | arra | O | 1..N | I | | | eoZoneIds | y(string) | | | dentifies | | | | | | | a | | | | | | | g | | | | | | | eographic | | | | | | | zone that | | | | | | | the AF | | | | | | | request | | | | | | | applies | | | | | | | only to | | | | | | | the | | | | | | | traffic | | | | | | | of UE(s) | | | | | | | located | | | | | | | in this | | | | | | | specific | | | | | | | zone. | | | | | | | | | | | | | | (NOTE) | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE: The | | | | | | | value of | | | | | | | the | | | | | | | property | | | | | | | shall be | | | | | | | set to | | | | | | | NULL for | | | | | | | removal. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
##### 5.4.3.3.4 Type: EventNotification
Table 5.4.3.3.4-1: Definition of type EventNotification
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | | | | | | | | | | | | | | (NOTE 1) | +-----------+-----------+---+-----------+-----------+-----------+ | afTransId | string | O | 0..1 | I | | | | | | | dentifies | | | | | | | an NEF | | | | | | | N | | | | | | | orthbound | | | | | | | interface | | | | | | | tra | | | | | | | nsaction, | | | | | | | generated | | | | | | | by the | | | | | | | AF. | | +-----------+-----------+---+-----------+-----------+-----------+ | dn | DnaiC | M | 1 | I | | | aiChgType | hangeType | | | dentifies | | | | | | | the type | | | | | | | of | | | | | | | not | | | | | | | ification | | | | | | | regarding | | | | | | | UP path | | | | | | | m | | | | | | | anagement | | | | | | | event. | | +-----------+-----------+---+-----------+-----------+-----------+ | sourceTra | RouteT | O | 0..1 | I | | | fficRoute | oLocation | | | dentifies | | | | | | | the N6 | | | | | | | traffic | | | | | | | routing | | | | | | | in | | | | | | | formation | | | | | | | a | | | | | | | ssociated | | | | | | | to the | | | | | | | source | | | | | | | DNAI. | | | | | | | | | | | | | | May be | | | | | | | present | | | | | | | if the | | | | | | | \ | | | | | | | "subscrib | | | | | | | edEvent\" | | | | | | | sets to | | | | | | | \"U | | | | | | | P_PATH_ | | | | | | | CHANGE\". | | | | | | | (NOTE 3) | | +-----------+-----------+---+-----------+-----------+-----------+ | subscr | Subscr | M | 1 | I | | | ibedEvent | ibedEvent | | | dentifies | | | | | | | a UP path | | | | | | | m | | | | | | | anagement | | | | | | | event the | | | | | | | AF | | | | | | | requested | | | | | | | to be | | | | | | | notified | | | | | | | of. | | +-----------+-----------+---+-----------+-----------+-----------+ | targetTra | RouteT | O | 0..1 | I | | | fficRoute | oLocation | | | dentifies | | | | | | | the N6 | | | | | | | traffic | | | | | | | routing | | | | | | | in | | | | | | | formation | | | | | | | a | | | | | | | ssociated | | | | | | | to the | | | | | | | target | | | | | | | DNAI. | | | | | | | | | | | | | | May be | | | | | | | present | | | | | | | if the | | | | | | | \ | | | | | | | "subscrib | | | | | | | edEvent\" | | | | | | | sets to | | | | | | | \"U | | | | | | | P_PATH_ | | | | | | | CHANGE\". | | | | | | | (NOTE 3) | | +-----------+-----------+---+-----------+-----------+-----------+ | s | Dnai | O | 0..1 | Source DN | | | ourceDnai | | | | Access | | | | | | | Id | | | | | | | entifier. | | | | | | | Shall be | | | | | | | included | | | | | | | for event | | | | | | | \" | | | | | | | UP_PATH\ | | | | | | | _CHANGE\" | | | | | | | if the | | | | | | | DNAI | | | | | | | changed | | | | | | | (NOTE 2, | | | | | | | NOTE 3). | | +-----------+-----------+---+-----------+-----------+-----------+ | t | Dnai | O | 0..1 | Target DN | | | argetDnai | | | | Access | | | | | | | Id | | | | | | | entifier. | | | | | | | Shall be | | | | | | | included | | | | | | | for event | | | | | | | \" | | | | | | | UP_PATH\ | | | | | | | _CHANGE\" | | | | | | | if the | | | | | | | DNAI | | | | | | | changed | | | | | | | (NOTE 2, | | | | | | | NOTE 3). | | +-----------+-----------+---+-----------+-----------+-----------+ | gpsi | Gpsi | O | 0..1 | I | | | | | | | dentifies | | | | | | | a user. | | +-----------+-----------+---+-----------+-----------+-----------+ | srcU | Ipv4Addr | O | 0..1 | The IPv4 | | | eIpv4Addr | | | | Address | | | | | | | of the | | | | | | | served UE | | | | | | | for the | | | | | | | source | | | | | | | DNAI. | | +-----------+-----------+---+-----------+-----------+-----------+ | srcUeI | I | O | 0..1 | The Ipv6 | | | pv6Prefix | pv6Prefix | | | Address | | | | | | | Prefix of | | | | | | | the | | | | | | | served UE | | | | | | | for the | | | | | | | source | | | | | | | DNAI. | | +-----------+-----------+---+-----------+-----------+-----------+ | tgtU | Ipv4Addr | O | 0..1 | The IPv4 | | | eIpv4Addr | | | | Address | | | | | | | of the | | | | | | | served UE | | | | | | | for the | | | | | | | target | | | | | | | DNAI. | | +-----------+-----------+---+-----------+-----------+-----------+ | tgtUeI | I | O | 0..1 | The Ipv6 | | | pv6Prefix | pv6Prefix | | | Address | | | | | | | Prefix of | | | | | | | the | | | | | | | served UE | | | | | | | for the | | | | | | | target | | | | | | | DNAI. | | +-----------+-----------+---+-----------+-----------+-----------+ | ueMac | MacAddr48 | O | 0..1 | UE MAC | | | | | | | address | | | | | | | of the | | | | | | | served | | | | | | | UE. | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE 1: | | | | | | | P | | | | | | | roperties | | | | | | | marked | | | | | | | with a | | | | | | | feature | | | | | | | as | | | | | | | defined | | | | | | | in | | | | | | | subcla | | | | | | | use 5.4.4 | | | | | | | are | | | | | | | a | | | | | | | pplicable | | | | | | | as | | | | | | | described | | | | | | | in | | | | | | | subcla | | | | | | | use 5.2.7 | | | | | | | of | | | | | | | 3GP | | | | | | | P TS 29.1 | | | | | | | 22 [4]. | | | | | | | If no | | | | | | | feature | | | | | | | is | | | | | | | i | | | | | | | ndicated, | | | | | | | the | | | | | | | related | | | | | | | property | | | | | | | applies | | | | | | | for all | | | | | | | the | | | | | | | features. | | | | | | | | | | | | | | NOTE 2: | | | | | | | If the | | | | | | | DNAI is | | | | | | | not | | | | | | | changed | | | | | | | while the | | | | | | | N6 | | | | | | | traffic | | | | | | | routing | | | | | | | in | | | | | | | formation | | | | | | | is | | | | | | | changed, | | | | | | | the | | | | | | | \"sou | | | | | | | rceDnai\" | | | | | | | attribute | | | | | | | and | | | | | | | \"tar | | | | | | | getDnai\" | | | | | | | attribute | | | | | | | shall not | | | | | | | be | | | | | | | provided. | | | | | | | | | | | | | | NOTE 3: | | | | | | | The | | | | | | | change | | | | | | | from the | | | | | | | UP path | | | | | | | status | | | | | | | where no | | | | | | | DNAI | | | | | | | applies | | | | | | | to a | | | | | | | status | | | | | | | where a | | | | | | | DNAI | | | | | | | applies | | | | | | | indicates | | | | | | | the | | | | | | | a | | | | | | | ctivation | | | | | | | of the | | | | | | | related | | | | | | | AF | | | | | | | request | | | | | | | and | | | | | | | therefore | | | | | | | only the | | | | | | | target | | | | | | | DNAI and | | | | | | | N6 | | | | | | | traffic | | | | | | | routing | | | | | | | in | | | | | | | formation | | | | | | | is | | | | | | | provided | | | | | | | in the | | | | | | | event | | | | | | | noti | | | | | | | fication; | | | | | | | the | | | | | | | change | | | | | | | from the | | | | | | | UP path | | | | | | | status | | | | | | | where a | | | | | | | DNAI | | | | | | | applies | | | | | | | to a | | | | | | | status | | | | | | | where no | | | | | | | DNAI | | | | | | | applies | | | | | | | indicates | | | | | | | the | | | | | | | de-a | | | | | | | ctivation | | | | | | | of the | | | | | | | related | | | | | | | AF | | | | | | | request | | | | | | | and | | | | | | | therefore | | | | | | | only the | | | | | | | source | | | | | | | DNAI and | | | | | | | N6 | | | | | | | traffic | | | | | | | routing | | | | | | | in | | | | | | | formation | | | | | | | is | | | | | | | provided | | | | | | | in the | | | | | | | event | | | | | | | noti | | | | | | | fication. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
#### 5.4.3.4 Simple data types and enumerations
##### 5.4.3.4.1 Introduction
This subclause defines simple data types and enumerations that can be
referenced from data structures defined in the previous subclauses.
##### 5.4.3.4.2 Simple data types
The simple data types defined in table 5.4.3.4.2-1 shall be supported.
Table 5.4.3.4.2-1: Simple data types
* * *
Type Name Type Definition Description Applicability
* * *
##### 5.4.3.4.3 Enumeration: SubscribedEvent
The enumeration SubscribedEvent represents the type of UP patch management
events of which the AF requests to be notified. It shall comply with the
provisions defined in table 5.4.3.4.3-1.
Table 5.4.3.4.3-1: Enumeration SubscribedEvent
* * *
Enumeration value Description UP_PATH_CHANGE The AF requests to be notified
when the UP path changes for the PDU session.
* * *
### 5.4.4 Used Features
The table below defines the features applicable to the TrafficInfluence API.
Those features are negotiated as described in subclause 5.2.7 of 3GPP TS
29.122 [4].
Table 5.4.4-1: Features used by TrafficInfluence API
* * *
Feature number Feature Name Description 1 Notification_websocket The delivery
of notifications over Websocket is supported as described in 3GPP TS 29.122
[4]. This feature requires that the Notification_test_event feature is also
supported. 2 Notification_test_event The testing of notification connection is
supported as described in 3GPP TS 29.122 [4].
* * *
# 6 Security
TLS (IETF RFC 5246 [16]) shall be used to support the security communication
between the NEF and the AF over NEF Northbound interface as defined in
subclause 12 of 3GPP TS 33.501 [6]. The access to the SCEF northbound APIs
shall be authorized by means of OAuth2 protocol (see IETF RFC 6749 [13]),
based on local configuration, using the \"Client Credentials\" authorization
grant. If OAuth2 is used, a client, prior to consuming services offered by the
NEF Northbound APIs, shall obtain a \"token\" from the authorization server.
# 7 Using Common API Framework
## 7.1 General
When CAPIF is used with an NEF that is used for external exposure, the NEF
shall support the following as defined in 3GPP TS 29.222 [12]:
\- the API exposing function and related APIs over CAPIF-2/2e and CAPIF-3
reference points;
\- the API publishing function and related APIs over CAPIF-4 reference point;
\- the API management function and related APIs over CAPIF-5 reference point;
and
\- at least one of the security methods for authentication and authorization,
and related security mechanisms.
In a centralized deployment as defined in 3GPP TS 23.222 [11], where the CAPIF
core function and API provider domain functions are co-located, the
interactions between the CAPIF core function and API provider domain functions
may be independent of CAPIF-3, CAPIF-4 and CAPIF-5 reference points.
## 7.2 Security
When CAPIF is used for external exposure, before invoking the API exposed by
the NEF, the AF as API invoker shall negotiate the security method (PKI, TLS-
PSK or OAUTH2) with CAPIF core function and ensure the NEF has enough
credential to authenticate the AF (see 3GPP TS 29.222 [12], subclause 5.6.2.2
and subclause 6.2.2.2).
If PKI or TLS-PSK is used as the selected security method between the AF and
the NEF, upon API invocation, the NEF shall retrieve the authorization
information from the CAPIF core function as described in 3GPP TS 29.222 [12],
subclause 5.6.2.4.
As indicated in 3GPP TS 33.122 [14], the access to the NEF northbound APIs may
be authorized by means of the OAuth2 protocol (see IETF RFC 6749 [13]), using
the \"Client Credentials\" authorization grant, where the CAPIF core function
(see 3GPP TS 29.222 [12]) plays the role of the authorization server.
NOTE 1: In this release, only \"Client Credentials\" authorization grant is
supported.
If OAuth2 is used as the selected security method between the AF and the NEF,
the AF, prior to consuming services offered by the NEF northbound APIs, shall
obtain a \"token\" from the authorization server, by invoking the
Obtain_Authorization service, as described in 3GPP TS 29.222 [12], subclause
5.6.2.3.2.
The NEF northbound APIs do not define any scopes for OAuth2 authorization. It
is the NEF responsibility to check whether the AF is authorized to use an API
based on the \"token\". Once the NEF verifies the \"token\", it shall check
whether the NEF identifier in the \"token\" matches its own published
identifier, and whether the API name in the \"token\" matches its own
published API name. If those checks are passed, the AF has full authority to
access any resource or operation for the invoked API.
NOTE 2: For aforementioned security methods, the NEF needs to apply admission
control according to access control policies after performing the
authorization checks.
###### ## Annex A (normative): OpenAPI representation for **NEF Northbound**
APIs
# A.1 General
This Annex is based on the OpenAPI 3.0.0 specification [5] and provides
corresponding representations of all APIs defined in the present
specification.
NOTE 1: An OpenAPIs representation embeds JSON Schema representations of HTTP
message bodies.
This Annex shall take precedence when being discrepant to other parts of the
specification with respect to the encoding of information elements and methods
within the API(s).
NOTE 2: The semantics and procedures, as well as conditions, e.g. for the
applicability and allowed combinations of attributes or values, not expressed
in the OpenAPI definitions but defined in other parts of the specification
also apply.
Informative copies of the OpenAPI specification files contained in this 3GPP
Technical Specification are available on the public 3GPP file server in the
following locations (see clause 5B of the 3GPP TR 21.900 [21] for further
information):
\- https://www.3gpp.org/ftp/Specs/archive/OpenAPI/\/, and
\- https://www.3gpp.org/ftp/Specs/\/\/OpenAPI/.
NOTE 3: To fetch the OpenAPI specification files after CT#83 plenary meeting
for Release 15 in the above links \ must be replaced with the date
the CT Plenary occurs, in the form of year-month (yyyy-mm), e.g. for CT#83
meeting \ must be replaced with value \"2019-03\" and \ must
be replaced with value \"Rel-15\".
# A.2 TrafficInfluence API
openapi: 3.0.0
info:
title: 3gpp-traffic-influence
version: 1.0.4
description: \|
API for AF traffic influence
Â© 2020, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI, TTA,
TTC).
All rights reserved.
externalDocs:
description: 3GPP TS 29.522 V15.6.0; 5G System; Network Exposure Function
Northbound APIs.
url: \'http://www.3gpp.org/ftp/Specs/archive/29_series/29.522/\'
security:
\- {}
\- oAuth2ClientCredentials: []
servers:
\- url: \'{apiRoot}/3gpp-traffic-influence/v1\'
variables:
apiRoot:
default: https://example.com
description: apiRoot as defined in subclause 5.2.4 of 3GPP TS 29.122.
paths:
/{afId}/subscriptions:
parameters:
\- name: afId
in: path
description: Identifier of the AF
required: true
schema:
type: string
get:
summary: read all of the active subscriptions for the AF
tags:
\- TrafficInfluence API SCS/AS level GET Operation
responses:
\'200\':
description: OK.
content:
application/json:
schema:
type: array
items:
\$ref: \'#/components/schemas/TrafficInfluSub\'
\'400\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/404\'
\'406\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/406\'
\'429\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29122_CommonData.yaml#/components/responses/default\'
post:
summary: Creates a new subscription resource
tags:
\- TrafficInfluence API Subscription level POST Operation
requestBody:
description: Request to create a new subscription resource
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/TrafficInfluSub\'
callbacks:
notificationDestination:
\'{request.body#/notificationDestination}\':
post:
requestBody: # contents of the callback message
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/EventNotification\'
responses:
\'204\':
description: No Content (successful notification)
\'400\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29122_CommonData.yaml#/components/responses/default\'
responses:
\'201\':
description: Created (Successful creation of subscription)
content:
application/json:
schema:
\$ref: \'#/components/schemas/TrafficInfluSub\'
headers:
Location:
description: \'Contains the URI of the newly created resource\'
required: true
schema:
type: string
\'400\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29122_CommonData.yaml#/components/responses/default\'
/{afId}/subscriptions/{subscriptionId}:
parameters:
\- name: afId
in: path
description: Identifier of the AF
required: true
schema:
type: string
\- name: subscriptionId
in: path
description: Identifier of the subscription resource
required: true
schema:
type: string
get:
summary: read an active subscriptions for the SCS/AS and the subscription Id
tags:
\- TrafficInfluence API Subscription level GET Operation
responses:
\'200\':
description: OK (Successful get the active subscription)
content:
application/json:
schema:
\$ref: \'#/components/schemas/TrafficInfluSub\'
\'400\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/404\'
\'406\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/406\'
\'429\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29122_CommonData.yaml#/components/responses/default\'
put:
summary: Updates/replaces an existing subscription resource
tags:
\- TrafficInfluence API subscription level PUT Operation
requestBody:
description: Parameters to update/replace the existing subscription
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/TrafficInfluSub\'
responses:
\'200\':
description: OK (Successful update of the subscription)
content:
application/json:
schema:
\$ref: \'#/components/schemas/TrafficInfluSub\'
\'400\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29122_CommonData.yaml#/components/responses/default\'
patch:
summary: Updates/replaces an existing subscription resource
tags:
\- TrafficInfluence API subscription level PATCH Operation
requestBody:
required: true
content:
application/merge-patch+json:
schema:
\$ref: \'#/components/schemas/TrafficInfluSubPatch\'
responses:
\'200\':
description: OK. The subscription was modified successfully.
content:
application/json:
schema:
\$ref: \'#/components/schemas/TrafficInfluSub\'
\'400\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29122_CommonData.yaml#/components/responses/default\'
delete:
summary: Deletes an already existing subscription
tags:
\- TrafficInfluence API Subscription level DELETE Operation
responses:
\'204\':
description: No Content (Successful deletion of the existing subscription)
\'400\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/404\'
\'429\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29122_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29122_CommonData.yaml#/components/responses/default\'
components:
securitySchemes:
oAuth2ClientCredentials:
type: oauth2
flows:
clientCredentials:
tokenUrl: \'{tokenUrl}\'
scopes: {}
schemas:
TrafficInfluSub:
type: object
properties:
afServiceId:
type: string
description: Identifies a service on behalf of which the AF is issuing the
request.
afAppId:
type: string
description: Identifies an application.
afTransId:
type: string
description: Identifies an NEF Northbound interface transaction, generated by
the AF.
appReloInd:
type: boolean
description: Identifies whether an application can be relocated once a
location of the application has been selected.
dnn:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Dnn\'
snssai:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Snssai\'
externalGroupId:
\$ref: \'TS29122_CommonData.yaml#/components/schemas/ExternalGroupId\'
anyUeInd:
type: boolean
description: Identifies whether the AF request applies to any UE. This
attribute shall set to \"true\" if applicable for any UE, otherwise, set to
\"false\".
subscribedEvents:
type: array
items:
\$ref: \'#/components/schemas/SubscribedEvent\'
minItems: 1
description: Identifies the requirement to be notified of the event(s).
gpsi:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Gpsi\'
ipv4Addr:
\$ref: \'TS29122_CommonData.yaml#/components/schemas/Ipv4Addr\'
ipDomain:
type: string
ipv6Addr:
\$ref: \'TS29122_CommonData.yaml#/components/schemas/Ipv6Addr\'
macAddr:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/MacAddr48\'
dnaiChgType:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DnaiChangeType\'
notificationDestination:
\$ref: \'TS29122_CommonData.yaml#/components/schemas/Link\'
requestTestNotification:
type: boolean
description: Set to true by the SCS/AS to request the NEF to send a test
notification as defined in subclause 5.2.5.3. Set to false or omitted
otherwise.
websockNotifConfig:
\$ref: \'TS29122_CommonData.yaml#/components/schemas/WebsockNotifConfig\'
self:
\$ref: \'TS29122_CommonData.yaml#/components/schemas/Link\'
trafficFilters:
type: array
items:
\$ref: \'TS29122_CommonData.yaml#/components/schemas/FlowInfo\'
minItems: 1
description: Identifies IP packet filters.
ethTrafficFilters:
type: array
items:
\$ref:
\'TS29514_Npcf_PolicyAuthorization.yaml#/components/schemas/EthFlowDescription\'
minItems: 1
description: Identifies Ethernet packet filters.
trafficRoutes:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/RouteToLocation\'
minItems: 1
description: Identifies the N6 traffic routing requirement.
tempValidities:
type: array
items:
\$ref:
\'TS29514_Npcf_PolicyAuthorization.yaml#/components/schemas/TemporalValidity\'
validGeoZoneIds:
type: array
items:
type: string
minItems: 1
description: Identifies a geographic zone that the AF request applies only to
the traffic of UE(s) located in this specific zone.
suppFeat:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures\'
allOf:
\- oneOf:
\- required: [afAppId]
\- required: [trafficFilters]
\- required: [ethTrafficFilters]
\- oneOf:
\- required: [ipv4Addr]
\- required: [ipv6Addr]
\- required: [macAddr]
\- required: [gpsi]
\- required: [externalGroupId]
\- required: [anyUeInd]
anyOf:
\- not:
required: [subscribedEvents]
\- required: [notificationDestination]
TrafficInfluSubPatch:
type: object
properties:
appReloInd:
type: boolean
description: Identifies whether an application can be relocated once a
location of the application has been selected.
nullable: true
trafficFilters:
type: array
items:
\$ref: \'TS29122_CommonData.yaml#/components/schemas/FlowInfo\'
minItems: 1
description: Identifies IP packet filters.
ethTrafficFilters:
type: array
items:
\$ref:
\'TS29514_Npcf_PolicyAuthorization.yaml#/components/schemas/EthFlowDescription\'
minItems: 1
description: Identifies Ethernet packet filters.
trafficRoutes:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/RouteToLocation\'
minItems: 1
description: Identifies the N6 traffic routing requirement.
tempValidities:
type: array
items:
\$ref:
\'TS29514_Npcf_PolicyAuthorization.yaml#/components/schemas/TemporalValidity\'
minItems: 1
nullable: true
validGeoZoneIds:
type: array
items:
type: string
minItems: 1
description: Identifies a geographic zone that the AF request applies only to
the traffic of UE(s) located in this specific zone.
nullable: true
EventNotification:
type: object
properties:
afTransId:
type: string
description: Identifies an NEF Northbound interface transaction, generated by
the AF.
dnaiChgType:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DnaiChangeType\'
sourceTrafficRoute:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/RouteToLocation\'
subscribedEvent:
\$ref: \'#/components/schemas/SubscribedEvent\'
targetTrafficRoute:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/RouteToLocation\'
sourceDnai:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Dnai\'
targetDnai:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Dnai\'
gpsi:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Gpsi\'
srcUeIpv4Addr:
\$ref: \'TS29122_CommonData.yaml#/components/schemas/Ipv4Addr\'
srcUeIpv6Prefix:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv6Prefix\'
tgtUeIpv4Addr:
\$ref: \'TS29122_CommonData.yaml#/components/schemas/Ipv4Addr\'
tgtUeIpv6Prefix:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv6Prefix\'
ueMac:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/MacAddr48\'
required:
\- dnaiChgType
\- subscribedEvent
SubscribedEvent:
anyOf:
\- type: string
enum:
\- UP_PATH_CHANGE
\- type: string
description: >
Possible values are
\- UP_PATH_CHANGE: The AF requests to be notified when the UP path changes for
the PDU session.
#