# Foreword
This Technical Specification has been produced by the 3^rd^ Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present specification provides the stage 3 definition of the Session
Management Event Exposure Service (Nsmf_EventExposure) of the 5G System.
The stage 2 definition and procedures of the Session Management Event Exposure
Service are contained in 3GPP TS 23.502 [3] and 3GPP TS 23.503 [6]. The 5G
System Architecture is defined in 3GPP TS 23.501 [2].
Stage 3 call flows for policy and charging control use cases are provided in
3GPP TS 29.513 [7].
The Technical Realization of the Service Based Architecture and the Principles
and Guidelines for Services Definition of the 5G System are specified in 3GPP
TS 29.500 [4] and 3GPP TS 29.501 [5].
The Session Management Event Exposure Service is provided by the Session
Management Function (SMF). This service exposes events related to PDU Sessions
observed at the SMF.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 23.501: \"System Architecture for the 5G System; Stage 2\".
[3] 3GPP TS 23.502: \"Procedures for the 5G System; Stage 2\".
[4] 3GPP TS 29.500: \"5G System; Technical Realization of Service Based
Architecture; Stage 3\".
[5] 3GPP TS 29.501: \"5G System; Principles and Guidelines for Services
Definition; Stage 3\".
[6] 3GPP TS 23.503: \"Policy and Charging Control Framework for the 5G System;
Stage 2\".
[7] 3GPP TS 29.513: \"5G System; Policy and Charging Control signalling flows
and QoS parameter mapping; Stage 3\".
[8] IETF RFC 7540: \"Hypertext Transfer Protocol Version 2 (HTTP/2)\".
[9] IETF RFC 8259: \"The JavaScript Object Notation (JSON) Data Interchange
Format\".
[10] OpenAPI, \"OpenAPI 3.0.0 Specification\", https://github.com/OAI/OpenAPI-
Specification/blob/master/versions/3.0.0.md.
[11] 3GPP TS 29.571: \"5G System; Common Data Types for Service Based
Interfaces Stage 3\".
[12] 3GPP TS 29.510: \"5G System; Network Function Repository Services; Stage
3\".
[13] 3GPP TS 29.518: \"5G System; Access and Mobility Management Services;
Stage 3\".
[14] 3GPP TS 29.512: \"5G System; Session Management Policy Control Service;
Stage 3\".
[15] 3GPP TS 33.501: \"Security architecture and procedures for 5G system\".
[16] IETF RFC 6749: \"The OAuth 2.0 Authorization Framework\".
[18] IETF RFC 7807: \"Problem Details for HTTP APIs\".
[19] 3GPP TR 21.900: \"Technical Specification Group working methods\".
# 3 Definitions and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
3GPP TR 21.905 [1] and the following apply. A term defined in the present
document takes precedence over the definition of the same term, if any, in
3GPP TR 21.905 [1].
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in 3GPP TR
21.905 [1] and the following apply. An abbreviation defined in the present
document takes precedence over the definition of the same abbreviation, if
any, in 3GPP TR 21.905 [1].
AF Application Function
AMBR Aggregate Maximum Bit Rate
AMF Access and Mobility Management Function
API Application Programming Interface
DNAI DN Access Identifier
GPSI Generic Public Subscription Identifier
GUAMI Globally Unique AMF Identifier
HTTP Hypertext Transfer Protocol
JSON JavaScript Object Notation
NEF Network Exposure Function
NF Network Function
NRF Network Repository Function
SMF Session Management Function
SUPI Subscription Permanent Identifier
PCF Policy Control Function
PRA Presence Reporting Area
UPF User Plane Function
# 4 Session Management Event Exposure Service
## 4.1 Service Description
### 4.1.1 Overview
The Session Management Event Exposure Service, as defined in 3GPP TS 23.502
[3] and 3GPP TS 23.503 [6], is provided by the Session Management Function
(SMF).
This service:
\- allows consumer NFs to subscribe and unsubscribe for events on a PDU
session; and
\- notifies consumer NFs with a corresponding subscription about observed
events on the PDU session.
The types of observed events include:
\- UP path change (e,g, addition and/or removal of PDU session anchor);
\- access type change;
\- PLMN change;
\- PDU session release; and
\- UE IP address/prefix change.
### 4.1.2 Service Architecture
The 5G System Architecture is defined in 3GPP TS 23.501 [2]. The Policy and
Charging related 5G architecture is also described in 3GPP TS 29.513 [7].
The Session Management Event Exposure Service (Nsmf_EventExposure) is part of
the Nsmf service-based interface exhibited by the Session Management Function
(SMF),
Known consumer of the Nsmf_EventExposure service are:
\- Network Exposure Function (NEF)
\- Access and Mobility Management Function (AMF).
\- Application Function (AF)
The PCF accesses the Session Management Event Exposure Service at the SMF via
the N7 Reference point.
NOTE: The PCF can implicitly subscribe on behalf of the AF and NEF to the
UP_PATH_CH event by including the information on AF subscription within the
PCC rule.
The AMF accesses the Session Management Event Exposure Service at the SMF via
the N11 Reference point.
Figure 4.1.2-1: Reference Architecture for the Nsmf_EventExposure Service; SBI
representation
Figure 4.1.2-2: Reference Architecture for the Nsmf_EventExposure Service:
reference point representation
### 4.1.3 Network Functions
#### 4.1.3.1 Session Management Function (SMF)
The Session Management function (SMF) provides:
\- Session Management e.g. Session establishment, modification and release;
\- UE IP address allocation & management;
\- Selection and control of UP function;
\- Termination of interfaces towards Policy control functions; and
\- Control part of policy enforcement and QoS.
#### 4.1.3.2 NF Service Consumers
The Network Exposure Function (NEF);
\- provides a means to securely expose the services and capabilities provided
by 3GPP network functions for e.g. 3rd parties or internal exposure.
The Access and Mobility Management function (AMF) provides:
\- Registration management;
\- Connection management;
\- Reachability management; and
\- Mobility Management.
The Application Function (AF)
\- interacts with the 3GPP Core Network to provide services.
## 4.2 Service Operations
### 4.2.1 Introduction
Table 4.2.1-1: Operations of the Nsmf_EventExposure Service
* * *
Service operation name Description Initiated by Notify Report UE PDU session
related event(s) to the NF service consumer which has subscribed to the event
report service. SMF Subscribe This service operation is used by an NF service
consumer to subscribe for event notifications on a specified PDU session, or
for all PDU Sessions of one UE, a group of UE(s) or any UE, or to modify a
subscription. NF service consumer UnSubscribe This service operation is used
by an NF service consumer to unsubscribe from event notifications. NF service
consumer
* * *
### 4.2.2 Nsmf_EventExposure_Notify Service Operation
#### 4.2.2.1 General
The Nsmf_EventExposure_Notify service operation enables notification to NF
service consumers that the previously subscribed event on the related PDU
session occurred.
The following procedure using the Nsmf_EventExposure_Notify service operation
is supported:
\- notification about subscribed events.
#### 4.2.2.2 Notification about subscribed events
Figure 4.2.2.2-1 illustrates the notification about subscribed events.
Figure 4.2.2.2-1: Notification about subscribed events
If the SMF observes PDU Session related event(s) for which an NF service
consumer has subscribed to, the SMF shall send an HTTP POST request with
\"{notifUri}\" as previously provided by the NF service consumer within the
corresponding subscription as URI and NsmfEventExposureNotification data
structure as request body that shall include:
\- Notification correlation ID provided by the NF service consumer during the
subscription, or as provided by the PCF for implicit subscription of UP path
change as defined in subclause 4.2.6.2.6.2 of 3GPP TS 29.512 [14], as
\"notifId\" attribute; and
\- information about the observed event(s) within the \"eventNotifs\"
attribute that shall contain for each observed event an \"EventNotification\"
data structure that shall include:
1\. the Event Trigger as \"event\" attribute;
2\. for a UP path change notification:
a) type of notification (\"EARLY\" or \"LATE\") as \"dnaiChgType\" attribute;
b) source DNAI and/or target DNAI as \"sourceDnai\" attribute and
\"targetDnai\" attribute if DNAI is changed, respectively (NOTE 3); and
c) if the PDU Session type is IP, for the source DNAI IP address/prefix of the
UE as \"sourceUeIpv4Addr\" attribute or \"sourceUeIpv6Prefix\" attribute; and
d) if the PDU Session type is IP, for the target DNAI IP address/prefix of the
UE as \"targetUeIpv4Addr\" attribute or \"targetUeIpv6Prefix\" attribute;
e) if available (NOTE 3), for the source DNAI, N6 traffic routing information
related to the UE as \"sourceTraRouting\" attribute;
f) if available (NOTE 3), for the target DNAI, N6 traffic routing information
related to the UE as \"targetTraRouting\" attribute; and
g) if the PDU Session type is Ethernet, the MAC address of the UE in the
\"ueMac\" attribute;
NOTE 1: UP path change notification, i.e. DNAI change notification and/or N6
traffic routing information change notification, can be the result of an
implicit subscription of the PCF on behalf of the NEF/AF as part of setting
PCC rule(s) via the Npcf_SMPolicyControl service (see subclause 4.2.6.2.6.2 of
3GPP TS 29.512 [14]).
NOTE 2: If the DNAI is not changed while the N6 traffic routing information
change, the source DNAI and target DNAI are not provided.
NOTE 3: The change from the UP path status where no DNAI applies to a status
where a DNAI applies indicates the activation of the related AF request and
therefore only the target DNAI and N6 traffic routing information is provided
in the event notification; the change from the UP path status where a DNAI
applies to a status where no DNAI applies indicates the de-activation of the
related AF request and therefore only the source DNAI and N6 traffic routing
information is provided in the event notification.
3\. for a UE IP address change:
a) added new UE IP address or prefix as \"adIpv4Addr\" attribute or
\"adIpv6Prefix\" attribute, respectively; and/or
b) released UE IP address or prefix as \"reIpv4Addr\" attribute or
\"reIpv6Prefix\" attribute, respectively;
4\. for an access type change:
a) new access type as \"accType\" attribute;
5\. for a PLMN Change:
a) new PLMN as \"plmnId\" attribute;
6\. for a PDU Session Release:
a) ID of the released PDU session as \"pduSeId\" attribute;
7\. the time at which the event was observed encoded as \"timeStamp\"
attribute;
8\. the SUPI as the \"supi\" attribute if the subscription applies to a group
of UE(s) or any UE; and
9\. if available, the GPSI as the \"gpsi\" attribute if the subscription
applies to a group of UE(s) or any UE.
Upon the reception of the HTTP POST request with \"{notifUri}\" as URI and an
NsmfEventExposureNotification data structure as request body, the NF shall
send an \"204 No Content\" HTTP response for a succesfull processing.
If the NF service consumer is not able to handle the Notification but knows by
implementation specific means that another service consumer is able to handle
the notification, it shall reply with an HTTP \"307 temporary redirect\" error
response pointing to the new NF service consumer URI. If the NF service
consumer is not able to handle the Notification but another unknown service
consumer could possibly handle the notification, it shall reply with an HTTP
\"404 Not found\" error response.
NOTE 4: An AMF as service consumer can change.
If the SMF receives a \"307 temporary redirect\" response, the SMF shall
resend the failed event notification request using the received URI in the
Location header field as Notification URI. Subsequent event notifications,
triggered after the failed one, shall be sent to the Notification URI provided
by the NF service consumer during the corresponding subscription
creation/update.
If the SMF becomes aware that a new NF service consumer is requiring
notifications (e.g. via the \"404 Not found\" response, or via
Namf_Communication service AMFStatusChange Notifications, see 3GPP TS 29.518
[13], or via link level failures or via the Nnrf_NFDiscovery Service (using
the service name and GUAMI obtained during the creation of the subscription)
to query the other AMFs within the AMF set) specified in 3GPP TS 29.510 [12]),
and the SMF knows alternate or backup IPv4 or IPv6 Addess(es) where to send
Notifications (e.g. via \"altNotifIpv4Addrs\" or \"altNotifIpv6Addrs\"
attributes received when the subscription was created), the SMF shall exchange
the authority part of the Notification URI with one of those addresses and
shall use that URI in any subsequent communication.
If the SMF received a \"404 Not found\" response, the SMF should resend the
failed notification to that URI.
### 4.2.3 Nsmf_EventExposure_Subscribe Service Operation
#### 4.2.3.1 General
This service operation is used by an NF service consumer to subscribe for
event notifications on a specified PDU Session, or for all PDU Sessions of one
UE, group of UE(s) or any UE, or to modify an existing subscription. The
following are the types of events for which a subscription can be made:
\- UP path change;
\- PDU Session release;
\- Change of Access Type;
\- PLMN change; and
\- UE IP address change.
The following procedures using the Nsmf_EventExposure_Subscribe service
operation are supported:
\- creating a new subscription;
\- modifying an existing subscription.
#### 4.2.3.2 Creating a new subscription
Figure 4.2.3.2-1 illustrates the creation of a subscription.
Figure 4.2.3.2-1: Creation of a subscription
To subscribe to event notifications, the NF service consumer shall send an
HTTP POST request with: \"{apiRoot}/nsmf-event-exposure/v1/subscriptions/\" as
Resource URI and the NsmfEventExposure data structure as request body that
shall include:
\- if the subscription applies to events related to a single PDU session for a
UE, the PDU Session ID of that PDU session as \"pduSeId\" attribute and the UE
identification as \"supi\" or \"gpsi\" attribute;
\- if the subscription applies to events not related to a single PDU session,
identification of UEs to which the subscription applies via:
a) identification of a single UE by SUPI as \"supi\" attribute or GPSI as
\"gpsi\" attribute;
b) identification of a group of UE(s) via a \"groupId\" attribute; or
c) identification of any UE via the \"anyUeInd\" attribute set to true;
NOTE: The identification of any UE does not apply for local breakout roaming
scenarios where the SMF is located in the VPLMN and the NF service consumer is
located in the HPLMN.
\- an URI where to receive the requested notifications as \"notifUri\"
attribute;
\- a Notification Correlation Identifier assigned by the NF service consumer
for the requested notifications as \"notifId\" attribute; and
\- if the NF service consumer is an AMF, the GUAMI encoded as \"guami\"
attribute:
\- a description of the subscribed events as \"eventSubs\" attribute that for
each event shall include:
a) an event identifier as \"event\" attribute; and
b) for event UP path change, whether the subscription is for early, late, or
early and late notifications of UP path reconfiguration in the \"dnaiChgType\"
attribute;
The NsmfEventExposure data structure as request body may also include:
\- Alternate or backup IPv4 Addess(es) where to send Notifications encoded as
\" altNotifIpv4Addrs\" attribute;
\- Alternate or backup IPv6 Addess(es) where to send Notifications encoded as
\" altNotifIpv6Addrs\" attribute;
\- if the NF service consumer is an AMF, the name of a service produced by the
AMF that expects to receive the notification about subscribed events encoded
as \"serviceName\" attribute;
\- Immediate reporting flag as \"ImmeRep\" attribute;
\- event notification method (periodic, one time, on event detection) as
\"notifMethod\" attribute;
\- Maximum Number of Reports as \"maxReportNbr\" attribute;
\- Monitoring Duration as \"expiry\" attribute; and/or
\- Repetition Period for periodic reporting as \"repPeriod\" attribute.
Upon the reception of an HTTP POST request with: \"{apiRoot}/nsmf-event-
exposure/v1/subscriptions/\" as Resource URI and NsmfEventExposure data
structure as request body, the SMF shall:
\- create a new subscription;
\- assign a subscription correlation ID;
\- select an expiry time that is equal or less than a possible expiry time in
the request;
\- store the subscription;
\- send a HTTP \"201 Created\" response with NsmfEventExposure data structure
as response body and a Location header field containing the URI of the created
individual subscription resource, i.e. {apiRoot}/nsmf-event-
exposure/v1/subscriptions/{subId}; and
\- if the \"ImmeRep\" attribute is included and set to true in the request,
the SMF shall immediately notify the NF service consumer of the curret
available value(s) using the Nsmf_EventExposure_Notify service operation, as
defined in subclause 4.2.2.1.
If the SMF received an GUAMI, the SMF may subscribe to GUAMI changes using the
AMFStatusChange service operation of the Namf_Communication service specified
in 3GPP TS 29.518 [13], and it may use the Nnrf_NFDiscovery Service specified
in 3GPP TS 29.510 [12] (using the obtained GUAMI and possibly service name) to
query the other AMFs within the AMF set.
#### 4.2.3.3 Modifying an existing subscription
Figure 4.2.3.3-1 illustrates the modification of an existing subscription.
Figure 4.2.3.3-1: Modification of an existing subscription
To modify an existing subscription to event notifications, the NF service
consumer shall send an HTTP PUT request with: \"{apiRoot}/nsmf-event-
exposure/v1/subscriptions/{**subId**}\" as Resource URI, where \"{**subId**}\"
is the subscription correlation ID of the existing subscription, and
NsmfEventExposure data structure as request body as described in subclause
4.2.3.2.
NOTE 1: An alternate NF service consumer than the one that requested the
generation of the subscription resource can send the PUT. For instance, an AMF
as service consumer can change.
NOTE 2: The \"notifUri\" attribute within the NsmfEventExposure data structure
can be modified to request that subsequent notifications are sent to a new NF
service consumer.
Upon the reception of an HTTP PUT request with: \"{apiRoot}/nsmf-event-
exposure/v1/subscriptions/{**subId**}\" as Resource URI and NsmfEventExposure
data structure as request body, the SMF shall:
\- store the subscription; and
\- send a HTTP \"200 OK\" response with NsmfEventExposure data structure as
response body.
### 4.2.4 Nsmf_EventExposure_UnSubscribe Service Operation
#### 4.2.4.1 General
This service operation is used by an NF service consumer to unsubscribe from
event notifications.
The following procedure using the Nsmf_EventExposure_UnSubscribe service
operation is supported:
\- unsubscription from event notifications.
#### 4.2.4.2 Unsubscription from event notifications
Figure 4.2.4.2-1 illustrates the unsubscription from event notifications.
Figure 4.2.4.2-1: Unsubscription from event notifications
To unsubscribe from event notifications, the NF service consumer shall send an
HTTP DELETE request with: \"{apiRoot}/nsmf-event-
exposure/v1/subscriptions/{**subId**}\" as Resource URI, where \"{**subId**}\"
is the subscription correlation ID of the existing subscription that is to be
deleted.
Upon the reception of the HTTP DELETE request with: \"{apiRoot}/nsmf-event-
exposure/v1/subscriptions/{**subId**}\" as Resource URI, the SMF shall:
\- remove the corresponding subscription; and
\- send an HTTP \"204 No Content\" response.
# 5 Nsmf_EventExposure API
## 5.1 Introduction
The Session Management Event Exposure Service shall use the Nsmf_EventExposure
API.
The request URI used in HTTP request from the NF service consumer towards the
SMF shall have the structure defined in subclause 4.4.1 of 3GPP TS 29.501 [5],
i.e.:
**{apiRoot}/{apiName}/{apiVersion}/{apiSpecificResourceUriPart}**
with the following components:
\- The {apiRoot} shall be set as described in 3GPP TS 29.501 [5].
\- The {apiName} shall be \"nsmf-event-exposure\".
\- The {apiVersion} shall be \"v1\".
\- The {apiSpecificResourceUriPart} shall be set as described in subclause
5.3.
## 5.2 Usage of HTTP
### 5.2.1 General
HTTP/2, IETF RFC 7540 [8], shall be used as specified in clause 5 of 3GPP TS
29.500 [4].
HTTP/2 shall be transported as specified in subclause 5.3 of 3GPP TS 29.500
[4].
The OpenAPI [10] specification of HTTP messages and content bodies for the
Nsmf_EventExposure is contained in Annex A.
### 5.2.2 HTTP standard headers
#### 5.2.2.1 General
See subclause 5.2.2 of 3GPP TS 29.500 [4] for the usage of HTTP standard
headers.
#### 5.2.2.2 Content type
JSON, IETF RFC 8259 [9], shall be used as content type of the HTTP bodies
specified in the present specification as specified in subclause 5.4 of 3GPP
TS 29.500 [4]. The use of the JSON format shall be signalled by the content
type \"application/json\".
\"Problem Details\" JSON object shall be used to indicate additional details
of the error in a HTTP response body and shall be signalled by the content
type \"application/problem+json\", as defined in IETF RFC 7807 [18].
### 5.2.3 HTTP custom headers
The mandatory HTTP custom header fields specified in subclause 5.2.3.2 of 3GPP
TS 29.500 [4] shall be applicable.
## 5.3 Resources
### 5.3.1 Resource Structure
Figure 5.3.1-1: Resource URI structure of the Nsmf_EventExposure API
Table 5.3.1-1 provides an overview of the resources and applicable HTTP
methods.
Table 5.3.1-1: Resources and methods overview
* * *
Resource name Resource URI HTTP method or custom operation Description
SMF Notification Subscriptions {apiRoot}/\ POST Create a new Individual SMF
Notification Subscription resource. nsmf-event-exposure/\  
v1/\  
subscriptions
Individual SMF Notification Subscription {apiRoot}/\ GET Read an Individual
SMF Notification Subscription resource. nsmf-event-exposure/\  
v1/\  
subscriptions/\  
{subId}
                                                                     PUT                               Modify an existing Individual SMF Notification Subscription resource.
                                                                     DELETE                            Delete an Individual SMF Notification Subscription resource and cancel the related subscription.
* * *
### 5.3.2 Resource: SMF Notification Subscriptions
#### 5.3.2.1 Description
The SMF Notification Subscriptions resource represents all subscriptions to
the SMF event exposure service at a given SMF.
#### 5.3.2.2 Resource definition
Resource URI: {apiRoot}/nsmf-event-exposure/v1/subscriptions
This resource shall support the resource URI variables defined in table
5.3.2.2-1.
Table 5.3.2.2-1: Resource URI variables for this resource
* * *
Name Definition apiRoot See subclause 5.1
* * *
#### 5.3.2.3 Resource Standard Methods
##### 5.3.2.3.1 POST
This method shall support the URI query parameters specified in table
5.3.2.3.1-1.
Table 5.3.2.3.1-1: URI query parameters supported by the POST method on this
resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
5.3.2.3.1-2 and the response data structures and response codes specified in
table 5.3.2.3.1-3.
Table 5.3.2.3.1-2: Data structures supported by the POST Request Body on this
resource
* * *
Data type P Cardinality Description NsmfEventExposure M 1 Create a new
Individual SMF Notification Subscription resource.
* * *
Table 5.3.2.3.1-3: Data structures supported by the POST Response Body on this
resource
* * *
Data type P Cardinality Response codes Description NsmfEventExposure M 1 201
Created The creation of an Individual SMF Notification Subscription resource
is confirmed and a representation of that resource is returned. NOTE: The
mandatory HTTP error status codes for the POST method listed in Table
5.2.7.1-1 of 3GPP TS 29.500 [4] also apply.
* * *
#### 5.3.2.4 Resource Custom Operations
None.
### 5.3.3 Resource: Individual SMF Notification Subscription
#### 5.3.3.1 Description
The SMF Notification Subscriptions resource represents a single subscription
to the SMF event exposure service.
#### 5.3.3.2 Resource definition
Resource URI: {apiRoot}/nsmf-event-exposure/v1/subscriptions/{**subId**}
This resource shall support the resource URI variables defined in table
5.3.3.2-1.
Table 5.3.3.2-1: Resource URI variables for this resource
* * *
Name Definition apiRoot See subclause 5.1 subId String identifying a
subscription to the SMF event exposure service formatted as defined for the
SubId type in table 5.6.3.2-1.
* * *
#### 5.3.3.3 Resource Standard Methods
##### 5.3.3.3.1 GET
This method shall support the URI query parameters specified in table
5.3.3.3.1-1.
Table 5.3.3.3.1-1: URI query parameters supported by the GET method on this
resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
5.3.3.3.1-2 and the response data structures and response codes specified in
table 5.3.3.3.1-3.
Table 5.3.3.3.1-2: Data structures supported by the GET Request Body on this
resource
* * *
Data type P Cardinality Description n/a
* * *
Table 5.3.3.3.1-3: Data structures supported by the GET Response Body on this
resource
* * *
Data type P Cardinality Response codes Description NsmfEventExposure M 1 200
OK A representation of the SMF Notification Subscription matching the subId is
returned. NOTE: The mandatory HTTP error status codes for the GET method
listed in Table 5.2.7.1-1 of 3GPP TS 29.500 [4] also apply.
* * *
##### 5.3.3.3.2 PUT
This method shall support the URI query parameters specified in table
5.3.3.3.2-1.
Table 5.3.3.3.2-1: URI query parameters supported by the PUT method on this
resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
5.3.3.3.2-2 and the response data structures and response codes specified in
table 5.3.3.3.2-3.
Table 5.3.3.3.2-2: Data structures supported by the PUT Request Body on this
resource
* * *
Data type P Cardinality Description NsmfEventExposure M 1 Modify the existing
Individual SMF Notification Subscription resource matching the subId according
to the representation in the NsmfEventExposure
* * *
Table 5.3.3.3.2-3: Data structures supported by the PUT Response Body on this
resource
* * *
Data type P Cardinality Response codes Description NsmfEventExposure M 1 200
OK Successful case: The Individual SMF Notification Subscription resource
matching the subId was modified and a representation is returned. n/a 204 No
Content Successful case: The Individual SMF Notification Subscription resource
matching the subId was modified. NOTE: The mandatory HTTP error status codes
for the PUT method listed in Table 5.2.7.1-1 of 3GPP TS 29.500 [4] also apply.
* * *
##### 5.3.3.3.3 DELETE
This method shall support the URI query parameters specified in table
5.3.3.3.3-1.
Table 5.3.3.3.3-1: URI query parameters supported by the DELETE method on this
resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
5.3.3.3.3-2 and the response data structures and response codes specified in
table 5.3.3.3.3-3.
Table 5.3.3.3.3-2: Data structures supported by the DELETE Request Body on
this resource
* * *
Data type P Cardinality Description n/a
* * *
Table 5.3.3.3.3-3: Data structures supported by the DELETE Response Body on
this resource
* * *
Data type P Cardinality Response codes Description n/a 204 No Content
Successful case: The Individual SMF Notification Subscription resource
matching the subId was deleted. NOTE: The manadatory HTTP error status code
for the DELETE method listed in Table 5.2.7.1-1 of 3GPP TS 29.500 [4] also
apply.
* * *
#### 5.3.3.4 Resource Custom Operations
None.
## 5.4 Custom Operations without associated resources
None.
## 5.5 Notifications
### 5.5.1 General
Notifications shall comply to subclause 6.2 of 3GPP TS 29.500 [4] and
subclause 4.6.2.3 of 3GPP TS 29.501 [5].
### 5.5.2 Event Notification
#### 5.5.2.1 Description
The Event Notification is used by the SMF to report one or several observed
Events to a NF service consumer that has subscribed to such Notifications via
the Individual SMF Notification Subscription Resource.
#### 5.5.2.2 Target URI
The Notification URI **\"{notifUri}\"** shall be used with the resource URI
variables defined in table 5.5.2.2-1.
Table 5.5.2.2-1: Resource URI variables for this resource
* * *
Name Definition notifUri String formatted as URI with the Notification Uri as
assigned within the Individual SMF Notification Subscription Resource and
described within the NsmfEventExposure type (see table 5.6.2.2-1).
* * *
#### 5.5.2.3 Standard Methods
##### 5.5.2.3.1 POST
This method shall support the URI query parameters specified in table
5.5.2.3.1-1.
Table 5.5.2.3.1-1: URI query parameters supported by the POST method on this
resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
5.5.2.3.1-2 and the response data structures and response codes specified in
table 5.5.2.3.1-3.
Table 5.5.2.3.1-2: Data structures supported by the POST Request Body on this
resource
* * *
Data type P Cardinality Description NsmfEventExposureNotification M 1 Provides
Information about observed events
* * *
Table 5.5.2.3.1-3: Data structures supported by the POST Response Body on this
resource
* * *
Data type P Cardinality Response codes Description n/a 204 No Content The
receipt of the Notification is acknowledged. n/a 307 temporary redirect The NF
service consumer shall generate a Location header field containing a URI
pointing to another NF service consumer to which the notification should be
send. ProblemDetails M 1 404 Not Found The NF service consumer can use this
response when the notification can be sent to another host. NOTE: The
mandatory HTTP error status codes for the POST method listed in Table
5.2.7.1-1 of 3GPP TS 29.500 [4] also apply.
* * *
## 5.6 Data Model
### 5.6.1 General
This subclause specifies the application data model supported by the API.
Table 5.6.1-1 specifies the data types defined for the Nsmf_EventExposure
service based interface protocol.
Table 5.6.1-1: Nsmf_EventExposure specific Data Types
* * *
Data type Section defined Description Applicability EventNotification 5.6.2.5
Describes notifications about a single event that occurred.  
EventSubscription 5.6.2.4 Represents the subscription to a single event  
NotificationMethod 5.6.3.4 Represents the notification methods that can be
subscribed  
NsmfEventExposure 5.6.2.2 Represents an Individual SMF Notification
Subscription resource  
NsmfEventExposureNotification 5.6.2.3 Describes Notifications about events
that occurred.  
SmfEvent 5.6.3.3 Represents the types of events that can be subscribed  
SubId 5.6.3.2 Identifies an Individual SMF Notification Subscription.
* * *
Table 5.6.1-2 specifies data types re-used by the Nsmf_EventExposure service
based interface protocol from other specifications, including a reference to
their respective specifications and when needed, a short description of their
use within the Nsmf_EventExposure service based interface.
Table 5.6.1-2: Nsmf_EventExposure re-used Data Types
* * *
Data type Reference Comments Applicability AccessType 3GPP TS 29.571 [11]  
DateTime 3GPP TS 29.571 [11]  
Dnai 3GPP TS 29.571 [11]  
DnaiChangeType 3GPP TS 29.571 [11] Describes the types of DNAI change.  
DurationSec 3GPP TS 29.571 [11]  
Gpsi 3GPP TS 29.571 [11]  
GroupId 3GPP TS 29.571 [11]  
Guami 3GPP TS 29.571 [11] Globally Unique AMF Identifier  
Ipv4Addr 3GPP TS 29.571 [11]  
Ipv6Addr 3GPP TS 29.571 [11]  
Ipv6Prefix 3GPP TS 29.571 [11]  
MacAddr48 3GPP TS 29.571 [11] MAC Address.  
PduSessionId 3GPP TS 29.571 [11]  
PlmnId 3GPP TS 29.571 [11]  
ProblemDetails 3GPP TS 29.571 [11]  
RouteToLocation 3GPP TS 29.571 [11] A traffic route to/from an DNAI  
Supi 3GPP TS 29.571 [11]  
SupportedFeatures 3GPP TS 29.571 [11] Used to negotiate the applicability of
the optional features defined in table 5.8-1.  
Uinteger 3GPP TS 29.571 [11]  
Uri 3GPP TS 29.571 [11]
* * *
### 5.6.2 Structured data types
#### 5.6.2.1 Introduction
This subclause defines the structures to be used in resource representations.
#### 5.6.2.2 Type NsmfEventExposure
Table 5.6.2.2-1: Definition of type NsmfEventExposure
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +-----------+-----------+---+-----------+-----------+-----------+ | supi | Supi | C | 0..1 | Sub | | | | | | | scription | | | | | | | Permanent | | | | | | | I | | | | | | | dentifier | | | | | | | (NOTE) | | +-----------+-----------+---+-----------+-----------+-----------+ | gpsi | Gpsi | C | 0..1 | Generic | | | | | | | Public | | | | | | | Sub | | | | | | | scription | | | | | | | I | | | | | | | dentifier | | | | | | | (NOTE) | | +-----------+-----------+---+-----------+-----------+-----------+ | anyUeInd | boolean | C | 0..1 | This IE | | | | | | | shall be | | | | | | | present | | | | | | | if the | | | | | | | event | | | | | | | sub | | | | | | | scription | | | | | | | is | | | | | | | a | | | | | | | pplicable | | | | | | | to any | | | | | | | UE. | | | | | | | Default | | | | | | | value | | | | | | | \"false\" | | | | | | | is used, | | | | | | | if not | | | | | | | present | | | | | | | (NOTE) | | +-----------+-----------+---+-----------+-----------+-----------+ | groupId | GroupId | C | 0..1 | I | | | | | | | dentifies | | | | | | | a group | | | | | | | of UEs. | | | | | | | (NOTE) | | +-----------+-----------+---+-----------+-----------+-----------+ | pduSeId | Pdu | C | 0..1 | PDU | | | | SessionId | | | session | | | | | | | ID (NOTE) | | +-----------+-----------+---+-----------+-----------+-----------+ | subId | SubId | C | 0..1 | Sub | | | | | | | scription | | | | | | | ID.\ | | | | | | | This | | | | | | | parameter | | | | | | | shall be | | | | | | | supplied | | | | | | | by the | | | | | | | SMF in | | | | | | | HTTP | | | | | | | responses | | | | | | | that | | | | | | | include | | | | | | | an object | | | | | | | of | | | | | | | NsmfEven | | | | | | | tExposure | | | | | | | type. | | +-----------+-----------+---+-----------+-----------+-----------+ | notifId | string | M | 1 | Not | | | | | | | ification | | | | | | | Co | | | | | | | rrelation | | | | | | | ID | | | | | | | assigned | | | | | | | by the NF | | | | | | | service | | | | | | | consumer. | | +-----------+-----------+---+-----------+-----------+-----------+ | notifUri | Uri | M | 1 | I | | | | | | | dentifies | | | | | | | the | | | | | | | recipient | | | | | | | of | | | | | | | Noti | | | | | | | fications | | | | | | | sent by | | | | | | | the SMF. | | +-----------+-----------+---+-----------+-----------+-----------+ | altNotif | array( | O | 1..N | Alternate | | | Ipv4Addrs | Ipv4Addr) | | | or backup | | | | | | | IPv4 | | | | | | | A | | | | | | | ddess(es) | | | | | | | where to | | | | | | | send | | | | | | | Notif | | | | | | | ications. | | +-----------+-----------+---+-----------+-----------+-----------+ | altNotif | array( | O | 1..N | Alternate | | | Ipv6Addrs | Ipv6Addr) | | | or backup | | | | | | | IPv6 | | | | | | | A | | | | | | | ddess(es) | | | | | | | where to | | | | | | | send | | | | | | | Notif | | | | | | | ications. | | +-----------+-----------+---+-----------+-----------+-----------+ | eventSubs | array( | M | 1..N | S | | | | EventSubs | | | ubscribed | | | | cription) | | | events | | +-----------+-----------+---+-----------+-----------+-----------+ | ImmeRep | boolean | O | 0..1 | It is | | | | | | | included | | | | | | | and set | | | | | | | to true | | | | | | | if the | | | | | | | immediate | | | | | | | reporting | | | | | | | of the | | | | | | | current | | | | | | | status of | | | | | | | the | | | | | | | s | | | | | | | ubscribed | | | | | | | event, if | | | | | | | available | | | | | | | is | | | | | | | required. | | +-----------+-----------+---+-----------+-----------+-----------+ | no | Notificat | O | 0..1 | If | | | tifMethod | ionMethod | | | \"noti | | | | | | | fMethod\" | | | | | | | is not | | | | | | | supplied, | | | | | | | the | | | | | | | default | | | | | | | value | | | | | | | \"ON_ | | | | | | | EVENT_DE | | | | | | | TECTION\" | | | | | | | applies. | | +-----------+-----------+---+-----------+-----------+-----------+ | max | Uinteger | O | 0..1 | If | | | ReportNbr | | | | omitted, | | | | | | | there is | | | | | | | no limit. | | +-----------+-----------+---+-----------+-----------+-----------+ | expiry | DateTime | C | 0..1 | This | | | | | | | attribute | | | | | | | indicates | | | | | | | the | | | | | | | expiry | | | | | | | time of | | | | | | | the | | | | | | | subs | | | | | | | cription, | | | | | | | after | | | | | | | which the | | | | | | | SMF shall | | | | | | | not send | | | | | | | any event | | | | | | | noti | | | | | | | fications | | | | | | | and the | | | | | | | sub | | | | | | | scription | | | | | | | becomes | | | | | | | invalid. | | | | | | | It may be | | | | | | | included | | | | | | | in an | | | | | | | event | | | | | | | sub | | | | | | | scription | | | | | | | request | | | | | | | and may | | | | | | | be | | | | | | | included | | | | | | | in an | | | | | | | event | | | | | | | sub | | | | | | | scription | | | | | | | response | | | | | | | based on | | | | | | | operator | | | | | | | policies. | | | | | | | If an | | | | | | | expiry | | | | | | | time was | | | | | | | included | | | | | | | in the | | | | | | | request, | | | | | | | then the | | | | | | | expiry | | | | | | | time | | | | | | | returned | | | | | | | in the | | | | | | | response | | | | | | | should be | | | | | | | less than | | | | | | | or equal | | | | | | | to that | | | | | | | value. If | | | | | | | the | | | | | | | expiry | | | | | | | time is | | | | | | | not | | | | | | | included | | | | | | | in the | | | | | | | response, | | | | | | | the NF | | | | | | | Service | | | | | | | Consumer | | | | | | | shall not | | | | | | | associate | | | | | | | an expiry | | | | | | | time for | | | | | | | the | | | | | | | subs | | | | | | | cription. | | +-----------+-----------+---+-----------+-----------+-----------+ | repPeriod | Du | C | 0..1 | Is | | | | rationSec | | | supplied | | | | | | | for | | | | | | | not | | | | | | | ification | | | | | | | Method | | | | | | | \"pe | | | | | | | riodic\". | | +-----------+-----------+---+-----------+-----------+-----------+ | guami | Guami | C | 0..1 | The | | | | | | | Globally | | | | | | | Unique | | | | | | | AMF | | | | | | | I | | | | | | | dentifier | | | | | | | (GUAMI) | | | | | | | shall be | | | | | | | provided | | | | | | | by an AMF | | | | | | | as | | | | | | | service | | | | | | | consumer. | | +-----------+-----------+---+-----------+-----------+-----------+ | se | string | O | 0..1 | If the NF | | | rviceName | | | | service | | | | | | | consumer | | | | | | | is an | | | | | | | AMF, it | | | | | | | should | | | | | | | provide | | | | | | | the name | | | | | | | of a | | | | | | | service | | | | | | | produced | | | | | | | by the | | | | | | | AMF that | | | | | | | makes use | | | | | | | of the | | | | | | | not | | | | | | | ification | | | | | | | about | | | | | | | s | | | | | | | ubscribed | | | | | | | events. | | +-----------+-----------+---+-----------+-----------+-----------+ | supporte | Supporte | C | 0..1 | List of | | | dFeatures | dFeatures | | | Supported | | | | | | | features | | | | | | | used as | | | | | | | described | | | | | | | in | | | | | | | subcl | | | | | | | ause 5.8. | | | | | | | | | | | | | | This | | | | | | | parameter | | | | | | | shall be | | | | | | | supplied | | | | | | | by NF | | | | | | | service | | | | | | | consumer | | | | | | | and SMF | | | | | | | in the | | | | | | | POST | | | | | | | request | | | | | | | that | | | | | | | request | | | | | | | the | | | | | | | creation | | | | | | | of an SMF | | | | | | | Not | | | | | | | ification | | | | | | | Subs | | | | | | | criptions | | | | | | | resource | | | | | | | and the | | | | | | | related | | | | | | | reply, | | | | | | | resp | | | | | | | ectively. | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE: If | | | | | | | the event | | | | | | | sub | | | | | | | scription | | | | | | | applies | | | | | | | for a | | | | | | | specific | | | | | | | PDU | | | | | | | session, | | | | | | | the PDU | | | | | | | session | | | | | | | of a | | | | | | | single UE | | | | | | | (pduSeId, | | | | | | | and | | | | | | | g | | | | | | | psi/supi) | | | | | | | shall be | | | | | | | included; | | | | | | | otherwise | | | | | | | one and | | | | | | | only one | | | | | | | of a | | | | | | | single UE | | | | | | | (gp | | | | | | | si/supi), | | | | | | | a group | | | | | | | of UEs | | | | | | | ( | | | | | | | groupId), | | | | | | | or | | | | | | | anyUeInd | | | | | | | set to | | | | | | | true | | | | | | | shall be | | | | | | | included. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
#### 5.6.2.3 Type NsmfEventExposureNotification
Table 5.6.2.3-1: Definition of type NsmfEventExposureNotification
* * *
Attribute name Data type P Cardinality Description Applicability notifId
string M 1 Notification correlation ID used to identify the subscription which
the notification is corresponding to. It shall be set to the same value as the
"notifId\" attribute of NsmfEventExposure data type or the value of
\"notifCorreId\" within the UpPathChgEvent data type defined in 3GPP TS 29.512
[14].  
eventNotifs array(EventNotification) M 1..N Notifications about Individual
Events
* * *
#### 5.6.2.4 Type EventSubscription
Table 5.6.2.4-1: Definition of type EventSubscription
* * *
Attribute name Data type P Cardinality Description Applicability event
SmfEvent M 1 Subscribed events  
dnaiChgType DnaiChangeType C 0..1 For event UP path change, whether the
subscription is for early, late, or early and late DNAI change notification
shall be supplied.
* * *
#### 5.6.2.5 Type EventNotification
Table 5.6.2.5-1: Definition of type EventNotification
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +-----------+-----------+---+-----------+-----------+-----------+ | event | SmfEvent | M | 1 | Event | | | | | | | that is | | | | | | | notified. | | +-----------+-----------+---+-----------+-----------+-----------+ | timeStamp | DateTime | M | 1 | Time at | | | | | | | which the | | | | | | | event is | | | | | | | observed. | | +-----------+-----------+---+-----------+-----------+-----------+ | supi | Supi | C | 0..1 | Sub | | | | | | | scription | | | | | | | Permanent | | | | | | | Id | | | | | | | entifier. | | | | | | | It is | | | | | | | included | | | | | | | when the | | | | | | | sub | | | | | | | scription | | | | | | | applies | | | | | | | to a | | | | | | | group of | | | | | | | UE(s) or | | | | | | | any UE. | | +-----------+-----------+---+-----------+-----------+-----------+ | gpsi | Gpsi | C | 0..1 | I | | | | | | | dentifies | | | | | | | a GPSI. | | | | | | | It shall | | | | | | | contain | | | | | | | an | | | | | | | MSISDN. | | | | | | | It is | | | | | | | included | | | | | | | when it | | | | | | | is | | | | | | | available | | | | | | | and the | | | | | | | sub | | | | | | | scription | | | | | | | applies | | | | | | | to a | | | | | | | group of | | | | | | | UE(s) or | | | | | | | any UE. | | +-----------+-----------+---+-----------+-----------+-----------+ | s | Dnai | C | 0..1 | Source DN | | | ourceDnai | | | | Access | | | | | | | Id | | | | | | | entifier. | | | | | | | Shall be | | | | | | | included | | | | | | | for event | | | | | | | \"UP_P | | | | | | | ATH_CH\" | | | | | | | if the | | | | | | | DNAI | | | | | | | changed | | | | | | | (NOTE 1, | | | | | | | NOTE 2). | | +-----------+-----------+---+-----------+-----------+-----------+ | t | Dnai | C | 0..1 | Target DN | | | argetDnai | | | | Access | | | | | | | Id | | | | | | | entifier. | | | | | | | Shall be | | | | | | | included | | | | | | | for event | | | | | | | \"UP_P | | | | | | | ATH_CH\" | | | | | | | if the | | | | | | | DNAI | | | | | | | changed | | | | | | | (NOTE 1, | | | | | | | NOTE 2). | | +-----------+-----------+---+-----------+-----------+-----------+ | dn | DnaiC | C | 0..1 | DNAI | | | aiChgType | hangeType | | | Change | | | | | | | Type. | | | | | | | Shall be | | | | | | | included | | | | | | | for event | | | | | | | \"UP_PA | | | | | | | TH_CH\". | | +-----------+-----------+---+-----------+-----------+-----------+ | sourceU | Ipv4Addr | O | 0..1 | The IPv4 | | | eIpv4Addr | | | | Address | | | | | | | of the | | | | | | | served UE | | | | | | | for the | | | | | | | source | | | | | | | DNAI. May | | | | | | | be | | | | | | | included | | | | | | | for event | | | | | | | \"UP_PA | | | | | | | TH_CH\". | | +-----------+-----------+---+-----------+-----------+-----------+ | sourceUeI | I | O | 0..1 | The Ipv6 | | | pv6Prefix | pv6Prefix | | | Address | | | | | | | Prefix of | | | | | | | the | | | | | | | served UE | | | | | | | for the | | | | | | | source | | | | | | | DNAI. May | | | | | | | be | | | | | | | included | | | | | | | for event | | | | | | | \"UP_PA | | | | | | | TH_CH\". | | +-----------+-----------+---+-----------+-----------+-----------+ | targetU | Ipv4Addr | O | 0..1 | The IPv4 | | | eIpv4Addr | | | | Address | | | | | | | of the | | | | | | | served UE | | | | | | | for the | | | | | | | target | | | | | | | DNAI. May | | | | | | | be | | | | | | | included | | | | | | | for event | | | | | | | \"UP_PA | | | | | | | TH_CH\". | | +-----------+-----------+---+-----------+-----------+-----------+ | targetUeI | I | O | 0..1 | The Ipv6 | | | pv6Prefix | pv6Prefix | | | Address | | | | | | | Prefix of | | | | | | | the | | | | | | | served UE | | | | | | | for the | | | | | | | target | | | | | | | DNAI. May | | | | | | | be | | | | | | | included | | | | | | | for event | | | | | | | \"UP_PA | | | | | | | TH_CH\". | | +-----------+-----------+---+-----------+-----------+-----------+ | sourceT | RouteT | C | 0..1 | N6 | | | raRouting | oLocation | | | traffic | | | | | | | routing | | | | | | | in | | | | | | | formation | | | | | | | for the | | | | | | | source | | | | | | | DNAI. | | | | | | | Shall be | | | | | | | included | | | | | | | for event | | | | | | | \"UP_P | | | | | | | ATH_CH\" | | | | | | | if | | | | | | | available | | | | | | | (NOTE 2). | | +-----------+-----------+---+-----------+-----------+-----------+ | targetT | RouteT | C | 0..1 | N6 | | | raRouting | oLocation | | | traffic | | | | | | | routing | | | | | | | in | | | | | | | formation | | | | | | | for the | | | | | | | target | | | | | | | DNAI. | | | | | | | Shall be | | | | | | | included | | | | | | | for event | | | | | | | \"UP_P | | | | | | | ATH_CH\" | | | | | | | if | | | | | | | available | | | | | | | (NOTE 2). | | +-----------+-----------+---+-----------+-----------+-----------+ | ueMac | MacAddr48 | O | 0..1 | UE MAC | | | | | | | address. | | | | | | | May be | | | | | | | included | | | | | | | for event | | | | | | | \"UP_PA | | | | | | | TH_CH\". | | +-----------+-----------+---+-----------+-----------+-----------+ | a | Ipv4Addr | O | 0..1 | Added | | | dIpv4Addr | | | | IPv4 | | | | | | | Add | | | | | | | ress(es). | | | | | | | May be | | | | | | | included | | | | | | | for event | | | | | | | \"UE_ | | | | | | | IP_CH\". | | +-----------+-----------+---+-----------+-----------+-----------+ | adI | I | O | 0..1 | Added | | | pv6Prefix | pv6Prefix | | | Ipv6 | | | | | | | Address | | | | | | | Pr | | | | | | | efix(es). | | | | | | | May be | | | | | | | included | | | | | | | for event | | | | | | | \"UE_ | | | | | | | IP_CH\". | | +-----------+-----------+---+-----------+-----------+-----------+ | r | Ipv4Addr | O | 0..1 | Removed | | | eIpv4Addr | | | | IPv4 | | | | | | | Add | | | | | | | ress(es). | | | | | | | May be | | | | | | | included | | | | | | | for event | | | | | | | \"UE_ | | | | | | | IP_CH\". | | +-----------+-----------+---+-----------+-----------+-----------+ | reI | I | O | 0..1 | Removed | | | pv6Prefix | pv6Prefix | | | Ipv6 | | | | | | | Address | | | | | | | Pr | | | | | | | efix(es). | | | | | | | May be | | | | | | | included | | | | | | | for event | | | | | | | \"UE_ | | | | | | | IP_CH\". | | +-----------+-----------+---+-----------+-----------+-----------+ | plmnId | PlmnId | C | 0..1 | New PLMN | | | | | | | ID. Shall | | | | | | | be | | | | | | | included | | | | | | | for event | | | | | | | \"PL | | | | | | | MN_CH\". | | +-----------+-----------+---+-----------+-----------+-----------+ | accType | A | C | 0..1 | New | | | | ccessType | | | Access | | | | | | | Type. | | | | | | | Shall be | | | | | | | included | | | | | | | for event | | | | | | | \"AC_ | | | | | | | TY_CH\". | | +-----------+-----------+---+-----------+-----------+-----------+ | pduSeId | Pdu | C | 0..1 | PDU | | | | SessionId | | | session | | | | | | | ID. Shall | | | | | | | be | | | | | | | included | | | | | | | for event | | | | | | | \"PDU_SE | | | | | | | S_REL\". | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE 1: | | | | | | | If the | | | | | | | DNAI is | | | | | | | not | | | | | | | changed | | | | | | | while the | | | | | | | N6 | | | | | | | traffic | | | | | | | routing | | | | | | | in | | | | | | | formation | | | | | | | is | | | | | | | changed, | | | | | | | the | | | | | | | \"sou | | | | | | | rceDnai\" | | | | | | | attribute | | | | | | | and | | | | | | | \"tar | | | | | | | getDnai\" | | | | | | | attribute | | | | | | | shall not | | | | | | | be | | | | | | | provided. | | | | | | | | | | | | | | NOTE 2: | | | | | | | The | | | | | | | change | | | | | | | from the | | | | | | | UP path | | | | | | | status | | | | | | | where no | | | | | | | DNAI | | | | | | | applies | | | | | | | to a | | | | | | | status | | | | | | | where a | | | | | | | DNAI | | | | | | | applies | | | | | | | indicates | | | | | | | the | | | | | | | a | | | | | | | ctivation | | | | | | | of the | | | | | | | related | | | | | | | AF | | | | | | | request | | | | | | | and | | | | | | | therefore | | | | | | | only the | | | | | | | target | | | | | | | DNAI and | | | | | | | N6 | | | | | | | traffic | | | | | | | routing | | | | | | | in | | | | | | | formation | | | | | | | is | | | | | | | provided | | | | | | | in the | | | | | | | event | | | | | | | noti | | | | | | | fication; | | | | | | | the | | | | | | | change | | | | | | | from the | | | | | | | UP path | | | | | | | status | | | | | | | where a | | | | | | | DNAI | | | | | | | applies | | | | | | | to a | | | | | | | status | | | | | | | where no | | | | | | | DNAI | | | | | | | applies | | | | | | | indicates | | | | | | | the | | | | | | | de-a | | | | | | | ctivation | | | | | | | of the | | | | | | | related | | | | | | | AF | | | | | | | request | | | | | | | and | | | | | | | therefore | | | | | | | only the | | | | | | | source | | | | | | | DNAI and | | | | | | | N6 | | | | | | | traffic | | | | | | | routing | | | | | | | in | | | | | | | formation | | | | | | | is | | | | | | | provided | | | | | | | in the | | | | | | | event | | | | | | | noti | | | | | | | fication. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
### 5.6.3 Simple data types and enumerations
#### 5.6.3.1 Introduction
This subclause defines simple data types and enumerations that can be
referenced from data structures defined in the previous subclauses.
#### 5.6.3.2 Simple data types
The simple data types defined in table 5.6.3.2-1 shall be supported.
Table 5.6.3.2-1: Simple data types
* * *
Type Name Type Definition Description Applicability SubId string Identifies an
Individual SMF Notification Subscription. To enable that the value is used as
part of a URI, the string shall only contain characters allowed according to
the \"lower-with-hyphen\" naming convention defined in 3GPP TS 29.501 [5]. In
an OpenAPI [10] schema, the format shall be designated as \"SubId\".
* * *
#### 5.6.3.3 Enumeration: SmfEvent
Table 5.6.3.3-1: Enumeration SmfEvent
* * *
Enumeration value Description Applicability AC_TY_CH Access Type Change  
UP_PATH_CH UP Path Change  
PDU_SES_REL PDU Session Release  
PLMN_CH PLMN Change  
UE_IP_CH UE IP address change
* * *
#### 5.6.3.4 Enumeration: NotificationMethod
The enumeration NotificationMethod represents the notification methods that
can be subscribed. It shall comply with the provisions defined in table
5.6.3.4-1.
Table 5.6.3.4-1: Enumeration NotificationMethod
* * *
Enumeration value Description Applicability PERIODIC The notification is
periodically sent.  
ONE_TIME The notification is only sent one time.  
ON_EVENT_DETECTION The notification is sent each time the event is detected.
* * *
## 5.7 Error handling
### 5.7.1 General
For the Nsmf_EventExposure API, HTTP error responses shall be supported as
specified in subclause 4.8 of 3GPP TS 29.501 [5]. Protocol errors and
application errors specified in table 5.2.7.2-1 of 3GPP TS 29.500 [4] shall be
supported for an HTTP method if the corresponding HTTP status codes are
specified as mandatory for that HTTP method in table 5.2.7.1-1 of 3GPP TS
29.500 [4].
In addition, the requirements in the following subclauses are applicable for
the Nsmf_EventExposure API.
### 5.7.2 Protocol Errors
No specific procedures for the Nsmf_EventExposure service are specified.
### 5.7.3 Application Errors
The application errors defined for the Nsmf_EventExposure service are listed
in Table 5.7.3-1.
Table 5.7.3-1: Application errors
* * *
Application Error HTTP status code Description
* * *
## 5.8 Feature negotiation
The optional features in table 5.8-1 are defined for the Nsmf_EventExposure
API. They shall be negotiated using the extensibility mechanism defined in
subclause 6.6 of 3GPP TS 29.500 [4].
Table 5.8-1: Supported Features
* * *
Feature number Feature Name Description
* * *
## 5.9 Security
As indicated in 3GPP TS 33.501 [15] and 3GPP TS 29.500 [4], the access to the
Nsmf_EventExposure API may be authorized by means of the OAuth2 protocol (see
IETF RFC 6749 [16]), based on local configuration, using the \"Client
Credentials\" authorization grant, where the NRF (see 3GPP TS 29.510 [12])
plays the role of the authorization server.
If OAuth2 is used, an NF Service Consumer, prior to consuming services offered
by the Nsmf_EventExposure API, shall obtain a \"token\" from the authorization
server, by invoking the Access Token Request service, as described in 3GPP TS
29.510 [12], subclause 5.4.2.2.
NOTE: When multiple NRFs are deployed in a network, the NRF used as
authorization server is the same NRF that the NF Service Consumer used for
discovering the Nsmf_EventExposure service.
The Nsmf_EventExposure API defines a single scope \"nsmf-event-exposure\" for
the entire service, and it does not define any additional scopes at resource
or operation level.
###### ## Annex A (normative): OpenAPI specification
# A.1 General
The present Annex contains an OpenAPI [10] specification of HTTP messages and
content bodies used by the Nsmf_EventExposure API.
This Annex shall take precedence when being discrepant to other parts of the
specification with respect to the encoding of information elements and methods
within the API.
NOTE 1: The semantics and procedures, as well as conditions, e.g. for the
applicability and allowed combinations of attributes or values, not expressed
in the OpenAPI definitions but defined in other parts of the specification
also apply.
Informative copies of the OpenAPI specification file contained in this 3GPP
Technical Specification are available on the public 3GPP file server in the
following locations (see clause 5B of the 3GPP TR 21.900 [19] for further
information):
\- https://www.3gpp.org/ftp/Specs/archive/OpenAPI/\/, and
\- https://www.3gpp.org/ftp/Specs/\/\/OpenAPI/.
NOTE 2: To fetch the OpenAPI specification file after CT#83 plenary meeting
for Release 15 in the above links \ must be replaced with the date
the CT Plenary occurs, in the form of year-month (yyyy-mm), e.g. for CT#83
meeting \ must be replaced with value \"2019-03\" and \ must
be replaced with value \"Rel-15\".
# A.2 Nsmf_EventExposure API
openapi: 3.0.0
info:
version: 1.0.4
title: Nsmf_EventExposure
description: \|
Session Management Event Exposure Service.
Â© 2019, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI, TTA,
TTC).
All rights reserved.
externalDocs:
description: 3GPP TS 29.508 V15.7.0; 5G System; Session Management Event
Exposure Service.
url: http://www.3gpp.org/ftp/Specs/archive/29_series/29.508/
servers:
\- url: \'{apiRoot}/nsmf-event-exposure/v1\'
variables:
apiRoot:
default: https://example.com
description: apiRoot as defined in subclause 4.4 of 3GPP TS 29.501
security:
\- {}
\- oAuth2ClientCredentials:
\- nsmf-event-exposure
paths:
/subscriptions:
post:
operationId: CreateIndividualSubcription
summary: Create an individual subscription for event notifications from the
SMF
tags:
\- Subscriptions (Collection)
requestBody:
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/NsmfEventExposure\'
responses:
\'201\':
description: Created.
headers:
Location:
description: \'Contains the URI of the newly created resource, according to
the structure: {apiRoot}/nsmf-event-exposure/v1/subscriptions/{subId}\'
required: true
schema:
type: string
content:
application/json:
schema:
\$ref: \'#/components/schemas/NsmfEventExposure\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
callbacks:
myNotification:
\'{\$request.body#/notifUri}\':
post:
requestBody:
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/NsmfEventExposureNotification\'
responses:
\'204\':
description: No Content, Notification was successful.
\'307\':
description: Temporary Redirect
headers:
Location:
description: \'The URI pointing to the endpoint of another NF service consumer
to which the notification should be sent.\'
required: true
schema:
type: string
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
/subscriptions/{subId}:
get:
operationId: GetIndividualSubcription
summary: Read an individual subscription for event notifications from the SMF
tags:
\- IndividualSubscription (Document)
parameters:
\- name: subId
in: path
description: Event Subscription ID
required: true
schema:
type: string
responses:
\'200\':
description: OK. Resource representation is returned
content:
application/json:
schema:
\$ref: \'#/components/schemas/NsmfEventExposure\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'406\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/406\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
put:
operationId: ReplaceIndividualSubcription
summary: Replace an individual subscription for event notifications from the
SMF
tags:
\- IndividualSubscription (Document)
requestBody:
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/NsmfEventExposure\'
parameters:
\- name: subId
in: path
description: Event Subscription ID
required: true
schema:
type: string
responses:
\'200\':
description: OK. Resource was successfully modified and representation is
returned
content:
application/json:
schema:
\$ref: \'#/components/schemas/NsmfEventExposure\'
\'204\':
description: No Content. Resource was successfully modified
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
delete:
operationId: DeleteIndividualSubcription
summary: Delete an individual subscription for event notifications from the
SMF
tags:
\- IndividualSubscription (Document)
parameters:
\- name: subId
in: path
description: Event Subscription ID
required: true
schema:
type: string
responses:
\'204\':
description: No Content. Resource was successfully deleted
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
components:
securitySchemes:
oAuth2ClientCredentials:
type: oauth2
flows:
clientCredentials:
tokenUrl: \'{nrfApiRoot}/oauth2/token\'
scopes:
nsmf-event-exposure: Access to the Nsmf_EventExposure API
schemas:
NsmfEventExposure:
description: Represents an Individual SMF Notification Subscription resource.
The serviveName property corresponds to the serviceName in the main body of
the specification**.**
type: object
properties:
supi:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Supi\'
gpsi:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Gpsi\'
anyUeInd:
type: boolean
description: Any UE indication. This IE shall be present if the event
subscription is applicable to any UE. Default value \"false\" is used, if not
present.
groupId:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/GroupId\'
pduSeId:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PduSessionId\'
subId:
\$ref: \'#/components/schemas/SubId\'
notifId:
type: string
description: Notification Correlation ID assigned by the NF service consumer.
notifUri:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uri\'
altNotifIpv4Addrs:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv4Addr\'
description: Alternate or backup IPv4 address(es) where to send Notifications.
minItems: 1
altNotifIpv6Addrs:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv6Addr\'
description: Alternate or backup IPv6 address(es) where to send Notifications.
minItems: 1
eventSubs:
type: array
items:
\$ref: \'#/components/schemas/EventSubscription\'
minItems: 1
description: Subscribed events
ImmeRep:
type: boolean
notifMethod:
\$ref: \'#/components/schemas/NotificationMethod\'
maxReportNbr:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uinteger\'
expiry:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DateTime\'
repPeriod:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DurationSec\'
guami:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Guami\'
serviveName:
type: string
description: If the NF service consumer is an AMF, it should provide the name
of a service produced by the AMF that makes use of notifications about
subscribed events.
supportedFeatures:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures\'
required:
\- notifId
\- notifUri
\- eventSubs
NsmfEventExposureNotification:
type: object
properties:
notifId:
type: string
description: Notification correlation ID
eventNotifs:
type: array
items:
\$ref: \'#/components/schemas/EventNotification\'
minItems: 1
description: Notifications about Individual Events
required:
\- notifId
\- eventNotifs
EventSubscription:
type: object
properties:
event:
\$ref: \'#/components/schemas/SmfEvent\'
dnaiChgType:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DnaiChangeType\'
required:
\- event
EventNotification:
type: object
properties:
event:
\$ref: \'#/components/schemas/SmfEvent\'
timeStamp:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DateTime\'
supi:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Supi\'
gpsi:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Gpsi\'
sourceDnai:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Dnai\'
targetDnai:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Dnai\'
dnaiChgType:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DnaiChangeType\'
sourceUeIpv4Addr:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv4Addr\'
sourceUeIpv6Prefix:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv6Prefix\'
targetUeIpv4Addr:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv4Addr\'
targetUeIpv6Prefix:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv6Prefix\'
sourceTraRouting:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/RouteToLocation\'
targetTraRouting:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/RouteToLocation\'
ueMac:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/MacAddr48\'
adIpv4Addr:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv4Addr\'
adIpv6Prefix:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv6Prefix\'
reIpv4Addr:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv4Addr\'
reIpv6Prefix:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv6Prefix\'
plmnId:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PlmnId\'
accType:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/AccessType\'
pduSeId:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PduSessionId\'
required:
\- event
\- timeStamp
SubId:
type: string
format: SubId
description: Identifies an Individual SMF Notification Subscription. To enable
that the value is used as part of a URI, the string shall only contain
characters allowed according to the \"lower-with-hyphen\" naming convention
defined in 3GPP TS 29.501. In an OpenAPI schema, the format shall be
designated as \"SubId\".
SmfEvent:
anyOf:
\- type: string
enum:
\- AC_TY_CH
\- UP_PATH_CH
\- PDU_SES_REL
\- PLMN_CH
\- UE_IP_CH
\- type: string
description: >
This string provides forward-compatibility with future
extensions to the enumeration but is not used to encode
content defined in the present version of this API.
description: >
Possible values are
\- AC_TY_CH: Access Type Change
\- UP_PATH_CH: UP Path Change
\- PDU_SES_REL: PDU Session Release
\- PLMN_CH: PLMN Change
\- UE_IP_CH: UE IP address change
NotificationMethod:
anyOf:
\- type: string
enum:
\- PERIODIC
\- ONE_TIME
\- ON_EVENT_DETECTION
\- type: string
description: >
This string provides forward-compatibility with future
extensions to the enumeration but is not used to encode
content defined in the present version of this API.
description: >
Possible values are
\- PERIODIC
\- ONE_TIME
\- ON_EVENT_DETECTION
#