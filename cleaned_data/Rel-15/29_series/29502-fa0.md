# Foreword
This Technical Specification has been produced by the 3rd Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document specifies the stage 3 protocol and data model for the
Nsmf Service Based Interface. It provides stage 3 protocol definitions and
message flows, and specifies the API for each service offered by the SMF other
than the Session Management Event Exposure service.
The 5G System stage 2 architecture and procedures are specified in 3GPP TS
23.501 [2] and 3GPP TS 23.502 [3].
The Technical Realization of the Service Based Architecture and the Principles
and Guidelines for Services Definition are specified in 3GPP TS 29.500 [4] and
3GPP TS 29.501 [5].
The Session Management Event Exposure Service is specified in 3GPP TS 29.508
[6].
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 23.501: \"System Architecture for the 5G System; Stage 2\".
[3] 3GPP TS 23.502: \"Procedures for the 5G System; Stage 2\".
[4] 3GPP TS 29.500: \"5G System; Technical Realization of Service Based
Architecture; Stage 3\".
[5] 3GPP TS 29.501: \"5G System; Principles and Guidelines for Services
Definition; Stage 3\".
[6] 3GPP TS 29.508: \"5G System; Session Management Event Exposure Service;
Stage 3\".
[7] 3GPP TS 24.501: \"Non-Access-Stratum (NAS) protocol for 5G System (5GS);
Stage 3\".
[8] 3GPP TS 24.007: \"Mobile radio interface signalling layer 3; General
aspects\".
[9] 3GPP TS 38.413: \"NG Radio Access Network (NG-RAN); NG Application
Protocol (NGAP)\".
[10] IETF RFC 2387: \"The MIME Multipart/Related Content-type\".
[11] IETF RFC 8259: \"The JavaScript Object Notation (JSON) Data Interchange
Format\".
[12] IETF RFC 2045: \"Multipurpose Internet Mail Extensions (MIME) Part One:
Format of Internet Message Bodies\".
[13] 3GPP TS 29.571: \"5G System; Common Data Types for Service Based
Interfaces; Stage 3\".
[14] IETF RFC 7540: \"Hypertext Transfer Protocol Version 2 (HTTP/2)\".
[15] OpenAPI Initiative, \"OpenAPI 3.0.0 Specification\",
https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.0.md.
[16] 3GPP TS 29.274: \"3GPP Evolved Packet System (EPS); Evolved General
Packet Radio Service (GPRS) Tunnelling Protocol for Control plane (GTPv2-C);
Stage 3\".
[17] 3GPP TS 33.501: \"Security architecture and procedures for 5G system\".
[18] IETF RFC 6749: \"The OAuth 2.0 Authorization Framework\".
[19] 3GPP TS 29.510: \"Network Function Repository Services; Stage 3\".
[20] 3GPP TS 29.518: \"5G System; Access and Mobility Management Service;
Stage 3\".
[21] 3GPP TS 23.380: \"IMS Restoration Procedures\".
[22] 3GPP TS 32.422: \"Telecommunication management; Subscriber and equipment
trace; Trace control and configuration management\".
[23] IETF RFC 7807: \"Problem Details for HTTP APIs\".
[24] 3GPP TS 23.527: \"5G System; Restoration Procedures\".
[25] 3GPP TS 32.255: \"Charging management; 5G data connectivity domain
charging; stage 2\".
[26] 3GPP TS 32.291: \"Charging management; 5G system, charging service; Stage
3\".
[27] 3GPP TS 24.301: \"Non-Access-Stratum (NAS) protocol for Evolved Packet
System (EPS); Stage 3\".
[28] 3GPP TR 21.900: \"Technical Specification Group working methods\".
# 3 Definitions and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
3GPP TR 21.905 [1] and the following apply. A term defined in the present
document takes precedence over the definition of the same term, if any, in
3GPP TR 21.905 [1].
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in 3GPP TR
21.905 [1] and the following apply. An abbreviation defined in the present
document takes precedence over the definition of the same abbreviation, if
any, in 3GPP TR 21.905 [1].
DNN Data Network Name
HR Home Routed
JSON Javascript Object NotationNAS Non-Access Stratum
LADN Local Area Data Network
SM Session Management
SMF Session Management Function
# 4 Overview
## 4.1 Introduction
Within the 5GC, the SMF offers services to the AMF, other SMF (V-SMF or
H-SMF), PCF and NEF via the Nsmf service based interface (see 3GPP TS 23.501
[2] and 3GPP TS 23.502 [3]).
Figure 4.1-1 provides the reference model (in service based interface
representation and in reference point representation), with focus on the SMF
and the scope of the present specification.
Figure 4.1-1: Reference model -- SMF
The functionalities supported by the SMF are listed in clause 6.2.2 of 3GPP TS
23.501 [2].
# 5 Services offered by the SMF
## 5.1 Introduction
The SMF supports the following services.
Table 5.1-1: NF Services provided by SMF
Service Name Description Example Consumer
* * *
Nsmf_PDUSession This service manages the PDU sessions and uses the policy and
charging rules received from the PCF. The service operations exposed by this
NF service allows the consumer NFs to establish, modify and delete the PDU
sessions. V-SMF, H-SMF, AMF Nsmf_EventExposure This service exposes the events
happening on the PDU sessions to the consumer NFs. PCF, NEF, AMF
The Nsmf_EventExposure service is specified in 3GPP TS 29.508 [6].
## 5.2 Nsmf_PDUSession Service
### 5.2.1 Service Description
The Nsmf_PDUSession service operates on the PDU Sessions. The service
operations exposed by this service allow other NFs to establish, modify and
release the PDU Sessions. The following are the key functionalities of this NF
service:
\- Creation, modification and deletion of SM contexts for PDU Sessions upon
receiving N1 message notification from AMF carrying the NAS SM messages; an SM
context represents an association between the NF Service Consumer (e.g. AMF)
and the SMF for a PDU session;
\- Retrieval of SM contexts of PDU sessions, e.g. to move PDU sessions towards
the EPC using the N26 interface;
\- Creation, modification and deletion of PDU sessions between the V-SMF and
H-SMF, in HR roaming scenarios;
\- Association of policy and charging rules with PDU Sessions and binding the
policy and charging rules to flows;
\- Interacting with the UPF over N4 for creating, modifying and releasing user
plane sessions;
\- Process user plane events from the UPF and apply the corresponding policy
and charging rules.
The Nsmf_PDUSession service supports the following service operations.
Table 5.2.1-1: Service operations supported by the Nsmf_PDUSession service
+----------------+----------------+----------------+----------------+ | Service | Description | Operation | Example | | Operations | | | Consumer(s) | | | | Semantics | | +================+================+================+================+ | Create SM | Create an SM | Re | AMF | | Context | context in | quest/Response | | | | SMF, or in | | | | | V-SMF in HR | | | | | roaming | | | | | scenarios, for | | | | | a PDU session. | | | +----------------+----------------+----------------+----------------+ | Update SM | Update the SM | Re | AMF | | Context | context of a | quest/Response | | | | PDU session | | | | | and/or provide | | | | | the SMF with | | | | | N1 or N2 SM | | | | | information | | | | | received from | | | | | the UE or from | | | | | the AN. | | | +----------------+----------------+----------------+----------------+ | Release SM | Release the SM | Re | AMF | | Context | context of a | quest/Response | | | | PDU session | | | | | when the PDU | | | | | session has | | | | | been released. | | | +----------------+----------------+----------------+----------------+ | Notify SM | Notify the NF | Su | AMF | | Context Status | Service | bscribe/Notify | | | | Consumer about | | | | (see NOTE 1) | the status of | | | | | an SM Context | | | | | of a PDU | | | | | session (e.g. | | | | | the SM Context | | | | | is released | | | | | within the | | | | | SMF). | | | +----------------+----------------+----------------+----------------+ | Retrieve SM | Retrieve an SM | Re | AMF | | Context | context of a | quest/Response | | | | PDU session | | | | (see NOTE 2) | from SMF, or | | | | | from V-SMF in | | | | | HR roaming | | | | | scenarios, for | | | | | 5GS to EPS | | | | | mobility. | | | +----------------+----------------+----------------+----------------+ | Create | Create a PDU | Re | V-SMF | | | session in the | quest/Response | | | | H-SMF, in HR | | | | | roaming | | | | | scenarios. | | | +----------------+----------------+----------------+----------------+ | Update | Update a PDU | Re | V-SMF, H-SMF | | | session in the | quest/Response | | | | H-SMF or | | | | | V-SMF, in HR | | | | | roaming | | | | | scenarios. | | | +----------------+----------------+----------------+----------------+ | Release | Release a PDU | Re | V-SMF | | | session in the | quest/Response | | | | H-SMF, in HR | | | | | roaming | | | | | scenarios. | | | +----------------+----------------+----------------+----------------+ | Notify Status | Notify the NF | Su | V-SMF | | | Service | bscribe/Notify | | | (see NOTE 3) | Consumer about | | | | | the status of | | | | | a PDU session | | | | | (e.g. the PDU | | | | | session is | | | | | released due | | | | | to local | | | | | reasons within | | | | | the H-SMF). | | | +----------------+----------------+----------------+----------------+ | NOTE 1: This | | | | | corresponds to | | | | | the | | | | | SMConte | | | | | xtStatusNotify | | | | | service | | | | | operation | | | | | defined in | | | | | 3GPP TS | | | | | 23.502 [3]. | | | | | | | | | | NOTE 2: This | | | | | corresponds to | | | | | the | | | | | ContextRequest | | | | | service | | | | | operation | | | | | defined in | | | | | 3GPP TS | | | | | 23.502 [3]. | | | | | | | | | | NOTE 3: This | | | | | corresponds to | | | | | the | | | | | StatusNotify | | | | | service | | | | | operation | | | | | defined in | | | | | 3GPP TS | | | | | 23.502 [3]. | | | | +----------------+----------------+----------------+----------------+
### 5.2.2 Service Operations
#### 5.2.2.1 Introduction
See Table 5.2.1-1 for an overview of the service operations supported by the
Nsmf_PDUSession service.
#### 5.2.2.2 Create SM Context service operation
##### 5.2.2.2.1 General
The Create SM Context service operation shall be used to create an individual
SM context, for a given PDU session, in the SMF, or in the V-SMF for HR
roaming scenarios.
It is used in the following procedures:
\- UE requested PDU Session Establishment (see clause 4.3.2 of 3GPP TS 23.502
[3]);
\- EPS to 5GS Idle mode mobility or handover using N26 interface (see clause
4.11.1 of 3GPP TS 23.502 [3]);
\- EPS to 5GS mobility without N26 interface (see clause 4.11.2.3 3GPP TS
23.502 [3]);
\- Handover of a PDU session between 3GPP access and non-3GPP access, when the
target AMF does not know the SMF resource identifier of the SM context used by
the source AMF, e.g. when the target AMF is not in the PLMN of the N3IWF (see
clause 4.9.2.3.2 of 3GPP TS 23.502 [3]), or when the UE is roaming and the
selected N3IWF is in the HPLMN (see clause 4.9.2.4.2 of 3GPP TS 23.502 [3]);
\- Handover from EPS to 5GC-N3IWF (see clause 4.11.3.1 of 3GPP TS 23.502 [3]);
\- Handover from EPC/ePDG to 5GS (see clause 4.11.4.1 of 3GPP TS 23.502 [3]).
There shall be only one individual SM context per PDU session.
The NF Service Consumer (e.g. AMF) shall create an SM context by using the
HTTP POST method as shown in Figure 5.2.2.2.1-1.
Figure 5.2.2.2.1-1: SM context creation
1\. The NF Service Consumer shall send a POST request to the resource
representing the SM contexts collection resource of the SMF. The payload body
of the POST request shall contain:
\- a representation of the individual SM context resource to be created;
\- the Request Type IE, if it is received from the UE and if the request
refers to an existing PDU session or an existing Emergency PDU session; the
Request Type IE may be included otherwise;
\- the Old PDU Session ID, if it is received from the UE (i.e. for a PDU
session establishment for the SSC mode 3 operation);
\- the indication that the UE is inside or outside of the LADN (Local Area
Data Network) service area, if the DNN corresponds to a LADN;
\- a subscription for SM context status notification;
\- the servingNfId identifying the serving AMF;
\- trace control and configuration parameters, if trace is to be activated
(see 3GPP TS 32.422 [22]).
> For the UE requested PDU Session Establishment procedure in home routed
> roaming scenario (see clause 4.3.2.2.2 of 3GPP TS 23.502 [3]), the NF
> Service Consumer shall provide the URI of the Nsmf_PDUSession service of the
> H-SMF in the hSmfUri IE and may provide the URI of the Nsmf_PDUSession
> service of additional H-SMFs. The V-SMF shall try to create the PDU session
> using the hSmfUri IE. If due to communication failure on the N16 interface
> the V-SMF does not receive any response from the H-SMF, then:
\- depending on operator policy, the V-SMF may try reaching the hSmfUri via an
alternate path; or
\- if additional H-SMF URI is provided, the V-SMF may try to create the PDU
session on one of the additional H-SMF(s) provided.
The payload body of the POST request may further contain:
\- the name of the AMF service to which SM context status notification are to
be sent (see clause 6.5.2.2 of 3GPP TS 29.500 [4]), encoded in the serviceName
attribute.
2a. On success, \"201 Created\" shall be returned, the payload body of the
POST response shall contain the representation describing the status of the
request and the \"Location\" header shall be present and shall contain the URI
of the created resource. The authority and/or deployment-specific string of
the apiRoot of the created resource URI may differ from the authority and/or
deployment-specific string of the apiRoot of the request URI received in the
POST request.\ \ If the Request Type was received in the request and set to
EXISTING_PDU_SESSION or EXISTING_EMERGENCY_PDU_SESSION (i.e. indicating that
this is a request for an existing PDU session or an existing emergency PDU
session), the SMF shall identify the existing PDU session or emergency PDU
session based on the PDU Session ID; in this case, the SMF shall not create a
new SM context but instead update the existing SM context and provide the
representation of the updated SM context in the \"201 Created\" response to
the NF Service Consumer.
The POST request shall be considered as colliding with an existing SM context
if:
\- it includes the same SUPI, or PEI for an emergency registered UE without a
UICC or without an authenticated SUPI, and the same PDU Session ID as for an
existing SM context; and
\- this is a request to establish a new PDU session, i.e. the RequestType is
absent in the request or is present and set to INITIAL_REQUEST or
INITIAL_EMERGENCY_REQUEST.
A POST request that collides with an existing SM context shall be treated as a
request for a new SM context. Before creating the new SM context, the SMF
should delete the existing SM context locally and any associated resources in
the UPF and PCF. If the smContextStatusUri of the existing SM context differs
from the smContextStatusUri received in the POST request, the SMF shall also
send an SM context status notification (see clause 5.2.2.5) targeting the
smContextStatusUri of the existing SM context to notify the release of the
existing SM context. For a HR PDU session, if the H-SMF URI in the request is
different from the H-SMF URI of the existing PDU session, the V-SMF should
also delete the existing PDU session in the H-SMF by invoking the Release
service operation (see clause 5.2.2.9).
If the Request Type was received in the request and indicates this is a
request for a new PDU session (i.e. INITIAL_REQUEST) and if the Old PDU
Session ID was also included in the request, the SMF shall identify the
existing PDU session to release and to which the new PDU session establishment
relates, based on the Old PDU Session ID.
If no GPSI IE is provided in the request, e.g. for a PDU session moved from
another access or another system, and the SMF knows that a GPSI is already
associated with the PDU session (or a GPSI is received from h-SMF for a HR PDU
session), the SMF shall include the GPSI in the response.
2b. If the request does not include the \"UE presence in LADN service area\"
indication and the SMF determines that the DNN corresponds to a LADN, then the
SMF shall consider that the UE is outside of the LADN service area. The SMF
shall reject the request if the UE is outside of the LADN service area.
On failure, or redirection during a UE requested PDU Session Establishment,
one of the HTTP status code listed in Table 6.1.3.2.3.1-3 shall be returned.
For a 4xx/5xx response, the message body shall contain an SmContextCreateError
structure, including:
\- a ProblemDetails structure with the \"cause\" attribute set to one of the
application error listed in Table 6.1.3.2.3.1-3;
\- N1 SM information (PDU Session Reject), if the request included N1 SM
information, except if the error prevents the SMF from generating a response
to the UE (e.g. invalid request format).
##### 5.2.2.2.2 EPS to 5GS Idle mode mobility using N26 interface
The NF Service Consumer (e.g. AMF) shall request the SMF to move a UE EPS PDN
connection to 5GS using N26 interface, as follows.
Figure 5.2.2.2.2-1: EPS to 5GS Idle mode mobility using N26 interface
1\. The NF Service Consumer shall send a POST request towards the SMF (+PGW-C)
of each UE EPS PDN connection, as specified in clause 5.2.2.2.1, with the
following additional information:
\- UE EPS PDN connection, including the EPS bearer contexts, received from the
MME, representing the individual SM context resource to be created;
\- the pduSessionsActivateList attribute, including the PDU Session ID of all
the PDU session(s) to be re-activated;
\- the epsBearerCxtStatus attribute, indicating the status of all the EPS
bearer contexts in the UE, if corresponding information is received in the
Registration Request from the UE.
2a. Upon receipt of such a request, if:
\- a corresponding PDU session is found based on the EPS bearer contexts
(after invoking a Create service operation towards the H-SMF, for a Home
Routed PDU session);
\- the default EPS bearer context of the corresponding PDU session is not
reported as inactive by the UE in the epsBearerCtxStatus attribute, if
received; and
\- it is possible to proceed with moving the PDN connection to 5GS,
then the SMF shall return a 201 Created response including the following
information:
\- PDU Session ID corresponding to the default EPS bearer ID of the EPS PDN
connection;
\- the allocatedEbiList attribute, containing the EBI(s) allocated to the PDU
session;
and, if the PDU session that is derived by the SMF based on the EPS bearer
contexts was requested to be re-activated, i.e. if the PDU Session ID was
present in the pduSessionsActivateList:
\- the upCnxState attribute set to ACTIVATING;
\- N2 SM information to request the 5G-AN to assign resources to the PDU
session (see PDU Session Resource Setup Request Transfer IE in clause 9.3.4.1
of 3GPP TS 38.413 [9]), including (among others) the transport layer address
and tunnel endpoint of the uplink termination point for the user plane data
for this PDU session (i.e. UPF\'s GTP-U F-TEID for uplink traffic).
The \"Location\" header shall be present in the POST response and shall
contain the URI of the created SM context resource.
If the epsBearerCxtStatus attribute is received in the request, the SMF shall
check whether some EPS bearer(s) of the corresponding PDU session have been
deleted by the UE but not notified to the EPS, and if so, the SMF shall
release these EPS bearers, corresponding QoS rules and QoS flow level
parameters locally, as specified in clause 4.11.1.3.3 of 3GPP TS 23.502 [3].\
\ The NF Service Consumer (e.g. AMF) shall store the association of the PDU
Session ID and the SMF ID, and store the allocated EBI(s) associated to the
PDU Session ID.
NOTE: The behaviour specified in this step also applies if the POST request
collides with an existing SM context, i.e. if the POST request includes the
same SUPI, or PEI for an emergency registered UE without a UICC or without an
authenticated SUPI, and the default EPS bearer ID received in the UE EPS PDN
connection is the same as in the existing SM context.
2b. Same as step 2b of figure 5.2.2.2.1-1. Steps 3 to 4 are skipped in this
case.
If the SMF determines that seamless session continuity from EPS to 5GS is not
supported for the PDU session, the SMF shall set the \"cause\" attribute in
the ProblemDetails structure to \"NO_EPS_5GS_CONTINUITY\".
If the default EPS bearer context of the PDU session is reported as inactive
by the UE in the epsBearerCtxStatus attribute, the SMF shall set the \"cause\"
attribute in the ProblemDetails structure to \"DEFAULT_EPS_BEARER_INACTIVE\".
3\. Same as step 3 of figure 5.2.2.3.2.2-1, if the SMF returned a 201 Created
response with the upConnectionState set to ACTIVATING and N2 SM Information,
4\. Same as step 4 of figure 5.2.2.3.2.2-1.
##### 5.2.2.2.3 EPS to 5GS Handover Preparation using N26 interface
The NF Service Consumer (e.g. AMF) shall request the SMF to handover a UE EPS
PDN connection to 5GS using N26 interface, as follows.
Figure 5.2.2.2.3-1: EPS to 5GS handover using N26 interface
1\. The NF Service Consumer shall send a POST request, as specified in clause
5.2.2.2.1, with the following additional information:
\- UE EPS PDN connection, including the EPS bearer contexts, representing the
individual SM context resource to be created;
\- hoState attribute set to PREPARING (see clause 5.2.2.3.4.1);
\- targetId identifying the target RAN Node ID and TAI based on the Target ID
IE received in the Forward Relocation Request message from the source MME.
NOTE 1: The Target ID IE can be set to the Target NG-RAN Node ID containing a
Global RAN Node ID and selected TAI with 3-octets length, or the Target eNB ID
containing a Global eNB ID and selected TAI with 2-octets length; for the
latter case, the NF Service Consumer, i.e. the AMF needs determine a value for
the Target NG-RAN Node ID and TAI with 3-octets length based on the local
configuration to be provided to the SMF.
2a. Upon receipt of such a request, if a corresponding PDU session is found
based on the EPS bearer contexts (after invoking a Create service operation
towards the H-SMF, for a Home Routed PDU session) and it is possible to
proceed with handing over the PDN connection to 5GS, the SMF shall return a
201 Created response including the following information:
\- hoState attribute set to PREPARING and N2 SM information to request the
target 5G-AN to assign resources to the PDU session, as specified in step 2 of
Figure 5.2.2.3.4.2-1;
\- PDU Session ID corresponding to the default EPS bearer ID of the EPS PDN
connection;
\- allocatedEbiList, containing the EBI(s) allocated to the PDU session.
The \"Location\" header shall be present in the POST response and shall
contain the URI of the created SM context resource.\ \ The NF Service Consumer
(e.g. AMF) shall store the association of the PDU Session ID and the SMF ID,
and store the allocated EBI(s) associated to the PDU Session ID.
NOTE 2: The behaviour specified in this step also applies if the POST request
collides with an existing SM context, i.e. if the POST request includes the
same SUPI, or PEI for an emergency registered UE without a UICC or without an
authenticated SUPI, and the default EPS bearer ID received in the UE EPS PDN
connection is the same as in the existing SM context.
2b. Same as step 2b of figure 5.2.2.2.1-1 with the following additions. Steps
3 to 4\' are skipped in this case.
If the SMF determines that seamless session continuity from EPS to 5GS is not
supported for the PDU session, the SMF shall set the \"cause\" attribute in
the ProblemDetails structure to \"NO_EPS_5GS_CONTINUITY\".
When receiving a 4xx/5xx response from the SMF, the NF service consumer (e.g.
the AMF) shall regard the hoState of the SM Context to be NONE.
#### 5.2.2.3 Update SM Context service operation
##### 5.2.2.3.1 General
The Update SM Context service operation shall be used to update an individual
SM context and/or provide N1 or N2 SM information received from the UE or the
AN, for a given PDU session, towards the SMF, or the V-SMF for HR roaming
scenarios.
It is used in the following procedures:
\- PDU Session modification (see clause 4.3.3 of 3GPP TS 23.502 [3]);
\- UE or network requested PDU session release (see clause 4.3.4.2 and clause
4.3.4.3 of 3GPP TS 23.502 [3]);
\- Activation or Deactivation of the User Plane connection of an existing PDU
session, i.e. establishment or release of the N3 tunnel between the AN and
serving CN (see clause 5.6.8 of 3GPP TS 23.501 [2] and clauses 4.2.2.2, 4.2.3
and 4.2.6 of 3GPP TS 23.502 [3]);
\- Xn and N2 Handover procedures (see clauses 4.9.1 of 3GPP TS 23.502 [3]);
\- Handover between 3GPP and untrusted non-3GPP access procedures (see clause
4.9.2 of 3GPP TS 23.502 [3]);
\- Inter-AMF change due to AMF planned maintenance or AMF failure (see clause
5.21.2 of 3GPP TS 23.501 [2]), or inter-AMF mobility in CM-IDLE mode (see
clause 4.2.2.2 of 3GPP TS 23.502 [3]);
\- RAN Initiated QoS Flow Mobility (see clause 4.14.1 of 3GPP TS 23.502 [3]
and clause 8.2.5 of 3GPP TS 38.413 [9]);
\- All procedures requiring to provide N1 or N2 SM information to the SMF,
e.g. UE requested PDU Session Establishment procedure (see clause 4.3.2.2 of
3GPP TS 23.502 [3]), session continuity procedure (see clause 4.3.5 of 3GPP TS
23.502 [3]);
\- EPS to 5GS Idle mode mobility or handover using N26 interface (see clause
4.11 of 3GPP TS 23.502 [3]);
\- 5GS to EPS Handover using N26 interface (see clause 4.11.1.2 of 3GPP TS
23.502 [3]);
\- PDU Session Reactivation during P-CSCF Restoration procedure via AMF (see
clause 5.8.4.3 of 3GPP TS 23.380 [21]);
\- AMF requested PDU session release due to a change of the set of network
slices for a UE where a network slice instance is no longer available (see
clause 4.3.4.2 of 3GPP TS 23.502 [3]);
\- AMF receives an \"initial request\" with PDU Session Id which already
exists in PDU session context of the UE (see clause 5.4.5.2.5 of 3GPP TS
24.501 [7]);
\- Secondary RAT Usage Data Reporting (see clause 4.21 of 3GPP TS 23.502 [3]).
The NF Service Consumer (e.g. AMF) shall update an individual SM context
and/or provide N1 or N2 SM information to the SMF by using the HTTP POST
method (modify custom operation) as shown in Figure 5.2.2.3.1-1.
Figure 5.2.2.3.1-1: SM context update
1\. The NF Service Consumer shall send a POST request to the resource
representing the individual SM context resource in the SMF. The payload body
of the POST request shall contain the modification instructions and/or the N1
or N2 SM information. If the request contains EBI(s) to revoke, then the SMF
shall disassociate the EBI(s) with the QFI(s) with which they are associated.
2a. On success, \"204 No Content\" or \"200 OK\" shall be returned; in the
latter case, the payload body of the POST response shall contain the
representation describing the status of the request and/or N1 or N2 SM
information.
The SMF may indicate to the NF Service Consumer that it shall release EBI(s)
that were assigned to the PDU session by including the releaseEbiList IE, e.g.
when a QoS flow is released.
2b. On failure, one of the HTTP status code listed in Table 6.1.3.3.3.2-3
shall be returned. For a 4xx/5xx response, the message body shall contain an
SmContextUpdateError structure, including:
\- a ProblemDetails structure with the \"cause\" attribute set to one of the
application error listed in Table 6.1.3.3.3.2-3;
\- N1 SM information, if the SMF needs and can return a response to the UE;
\- N2 SM information, if the SMF needs and can return a response to the NG-
RAN.
The following clauses specify additional requirements applicable to specific
scenarios.
##### 5.2.2.3.2 Activation and Deactivation of the User Plane connection of a
PDU session
###### 5.2.2.3.2.1 General
The upCnxState attribute of an SM context represents the state of the User
Plane connection of the PDU session. The upCnxState attribute may take the
following values:
\- ACTIVATED: a N3 tunnel is established between the 5G-AN and UPF (F-TEIDs
assigned for both uplink and downlink traffic);
\- DEACTIVATED: no N3 tunnel is established between the 5G-AN and UPF;
\- ACTIVATING: a N3 tunnel is being established (5G-AN\'s F-TEID for downlink
traffic is not assigned yet).
Clauses 5.2.2.3.2.2 and 5.2.2.3.2.3 specify how the NF Service Consumer (e.g.
AMF) request the SMF to activate or deactivate the User Plane connection of
the PDU session, e.g. upon receiving a Service Request from the UE requesting
to activate a PDU session or upon an AN release procedure respectively.
In scenarios where the SMF takes the initiative to activate or deactivate the
User Plane connection of the PDU session, e.g. during a Network Triggered
Service Request or CN-initiated selective deactivation of the User Plane
connection of a PDU session respectively, the SMF invokes the
Namf_N1N2MessageTransfer procedure with the inclusion of N2 SM Information
(and optionally of a N1 SM Container) as specified in 3GPP TS 23.502 [3] to
request the establishment or release of the PDU session\'s resources in the
5G-AN. The Update SM Context service operation is then used as specified in
clause 5.2.2.3.1 to transfer the response to the SMF.
Clause 5.2.2.3.2.4 specifies how the NF Service Consumer (e.g. AMF) indicates
to the SMF that the access type of a PDU session can be changed from non-3GPP
access to 3GPP access, during a Network Triggered Service Request initiated
for a PDU session associated to the non-3GPP access, if the PDU Session for
which the UE was paged or notified is in the List Of Allowed PDU Sessions
provided by the UE and if the AMF has received N2 SM Information only or N1 SM
Container and N2 SM Information for that PDU session from the SMF in step 3a
of clause 4.2.3.3 of 3GPP TS 23.502 [3].
###### 5.2.2.3.2.2 Activation of User Plane connectivity of a PDU session
The NF Service Consumer (e.g. AMF) shall request the SMF to activate the User
Plane connection of an existing PDU session, i.e. establish the N3 tunnel
between the 5G-AN and UPF, as follows.
Figure 5.2.2.3.2.2-1: Activation of the User Plane connection of a PDU session
1\. The NF Service Consumer shall request the SMF to activate the user plane
connection of the PDU session by sending a POST request, as specified in
clause 5.2.2.3.1, with the following information:
\- the upCnxState attribute set to ACTIVATING;
\- the user location and access type associated to the PDU session, if
modified;
\- the indication that the UE is inside or outside of the LADN service area,
if the DNN of the established PDU session corresponds to a LADN;
\- other information, if necessary.
2a. Upon receipt of such a request, if the SMF can proceed with activating the
user plane connection of the PDU session (see clause 4.2.3 of 3GPP TS 23.501
[2], the SMF shall set the upCnxState attribute to ACTIVATING and shall return
a 200 OK response including the following information:
\- upCnxState attribute set to ACTIVATING;
\- N2 SM information to request the 5G-AN to assign resources to the PDU
session (see PDU Session Resource Setup Request Transfer IE in clause 9.3.4.1
of 3GPP TS 38.413 [9]), including the transport layer address and tunnel
endpoint of the uplink termination point for the user plane data for this PDU
session (i.e. UPF\'s GTP-U F-TEID for uplink traffic).
If the SMF finds the PDU session already activated when receiving the request
in step 1, the SMF shall delete the N3 tunnel information and update the UPF
accordingly (see step 8a of clause 4.2.3.2 of 3GPP TS 23.502 [3]).
2b. If the request does not include the \"UE presence in LADN service area\"
indication and the SMF determines that the DNN corresponds to a LADN, then the
SMF shall consider that the UE is outside of the LADN service area. The SMF
shall reject the request if the UE is outside of the LADN service area.
If the SMF cannot proceed with activating the user plane connection of the PDU
session (e.g. if the PDU session corresponds to a PDU session of SSC mode 2
and the SMF decides to change the PDU Session Anchor), the SMF shall return an
error response, as specified for step 2b of figure 5.2.2.3.1-1. For a 4xx/5xx
response, the SmContextUpdateError structure shall include the following
additional information:
\- upCnxState attribute set to DEACTIVATED.
3\. If the SMF returned a 200 OK response, the NF Service Consumer (e.g. AMF)
shall subsequently update the SM context in the SMF by sending POST request,
as specified in clause 5.2.2.3.1, with the following information:
\- N2 SM information received from the 5G-AN (see PDU Session Resource Setup
Response Transfer IE in clause 9.3.4.2 of 3GPP TS 38.413 [9]), including the
transport layer address and tunnel endpoint of one or two downlink termination
point(s) and the associated list of QoS flows for this PDU session (i.e.
5G-AN\'s GTP-U F-TEID(s) for downlink traffic), if the 5G-AN succeeded in
establishing resources for the PDU sessions; or
\- N2 SM information received from the 5G-AN (see PDU Session Resource Setup
Unsuccessful Transfer IE in clause 9.3.4.16 of 3GPP TS 38.413 [9]), including
the Cause of the failure, if resources failed to be established for the PDU
session.
Upon receipt of this request, the SMF shall:
\- update the UPF with the 5G-AN\'s F-TEID(s) and set the upCnxState attribute
to ACTIVATED, if the 5G-AN succeeded in establishing resources for the PDU
sessions; or
\- consider that the activation of the User Plane connection has failed and
set the upCnxState attribute to DEACTIVATED\" otherwise.
4\. The SMF shall then return a 200 OK response including the upCnxState
attribute representing the final state of the user plane connection. If the
activation of the User Plane connection failed due to insufficient resources,
the cause IE shall be included in the response and set to
\"INSUFFICIENT_UP_RESOURCES\".
###### 5.2.2.3.2.3 Deactivation of User Plane connectivity of a PDU session
The NF Service Consumer (e.g. AMF) shall request the SMF to deactivate the
User Plane connectivity of an existing PDU session, i.e. release the N3
tunnel, as follows.
Figure 5.2.2.3.2.2-1: Deactivation of the User Plane connection of a PDU
session
1\. The NF Service Consumer shall request the SMF to deactivate the user plane
connection of the PDU session by sending a POST request, as specified in
clause 5.2.2.3.1, with the following information:
\- upCnxState attribute set to DEACTIVATED;
\- user location and user location timestamp;
\- cause of the user plane deactivation; the cause may indicate a cause
received from the 5G-AN or due to an AMF internal event;
\- other information, if necessary.
2\. Upon receipt of such a request, the SMF shall deactivate release the N3
tunnel of the PDU session, set the upCnxState attribute to DEACTIVATED and
return a 200 OK response including the upCnxState attribute set to
DEACTIVATED.
###### 5.2.2.3.2.4 Changing the access type of a PDU session from non-3GPP
access to 3GPP access during a Service Request procedure
The NF Service Consumer (e.g. AMF) shall indicate to the SMF that the access
type of a PDU session can be changed as follows:
Figure 5.2.2.3.2.4-1: Indicating that the access type of a PDU session can be
changed
1\. The NF Service Consumer shall indicate that the access type of a PDU
session can be changed by sending a POST request, as specified in clause
5.2.2.3.1, with the following information:
\- anTypeCanBeChanged attribute set to \"true\";
\- other information, if necessary.
2a. Same as step 2a of figure 5.2.2.3.1-1. In HR roaming scenarios, the V-SMF
shall invoke the Update service operation towards the H-SMF to notify that the
access type of the PDU session can be changed (see clause 5.2.2.8.2.2).
2b. Same as step 2b of figure 5.2.2.3.1-1.
NOTE: This is used during a Service Request procedure (see clause 4.2.3.2 of
3GPP TS 23.502 [3]), in response to paging or NAS notification indicating
non-3GPP access, if the PDU Session for which the UE was paged or notified is
in the List Of Allowed PDU Sessions provided by the UE and if the AMF has
received N2 SM Information only or N1 SM Container and N2 SM Information for
that PDU session from the SMF in step 3a of clause 4.2.3.3 of 3GPP TS 23.502
[3].
If the PDU Session is moved from the non-3GPP access to 3GPP access (i.e. N3
tunnel for the PDU Session is established successfully), the SMF and NF
Service Consumer (e.g. AMF) updates the associated access of the PDU Session.
##### 5.2.2.3.3 Xn Handover
The NF Service Consumer (e.g. AMF) shall request the SMF to switch the
downlink N3 tunnel of the PDU session towards a new GTP tunnel endpoint as
follows.
Figure 5.2.2.3.3-1: Xn handover
1\. The NF Service Consumer shall request the SMF to switch the downlink N3
tunnel of the PDU session towards a new GTP tunnel endpoint by sending a POST
request, as specified in clause 5.2.2.3.1, with the following information:
\- the indication that the PDU session is to be switched;
\- N2 SM information received from the target 5G-AN (see Path Switch Request
Transfer IE in clause 9.3.4.8 of 3GPP TS 38.413 [9]), including the new
transport layer address and tunnel endpoint of the downlink termination point
for the user data for this PDU session (i.e. 5G-AN\'s GTP-U F-TEID for
downlink traffic);
\- additional N2 SM information received from the source 5G-AN (see Secondary
RAT Data Usage Report Transfer IE in clause 9.3.4.23 of 3GPP TS 38.413 [9]),
if any;
\- the user location associated to the PDU session;
\- the indication that the UE is inside or outside of the LADN service area,
if the DNN of the established PDU session corresponds to a LADN;
\- other information, if necessary.
2a. If the SMF can proceed with switching the user plane connection of the PDU
session, the SMF shall return a 200 OK response including the following
information:
\- N2 SM information (see Path Switch Request Acknowledge Transfer IE in
clause 9.3.4.9 of 3GPP TS 38.413 [9]), including the transport layer address
and tunnel endpoint of the uplink termination point for the user data for this
PDU session (i.e. UPF\'s GTP-U F-TEID for uplink traffic).
If the request does not include the \"UE presence in LADN service area\"
indication and the SMF determines that the DNN corresponds to a LADN, then the
SMF shall consider that the UE is outside of the LADN service area. The SMF
shall proceed as specified in clause 5.6.5 of 3GPP TS 23.501 [2].
2b. If the SMF cannot proceed with switching the user plane connection of the
PDU session, the SMF shall return an error response, as specified for step 2b
of figure 5.2.2.3.1-1, including:
\- N2 SM information (see Path Switch Request Unsuccessul Transfer IE in
clause 9.3.4.20 of 3GPP TS 38.413 [9]), including the cause of the failure.
For a PDU session that is rejected by the target RAN (i.e. a PDU session
indicated as failed to setup in the PATH SWITCH REQUEST), the NF Service
Consumer (e.g. AMF) shall indicate the failure to setup the PDU session in the
target RAN as follows.
Figure 5.2.2.3.3-2: Xn handover -- PDU session rejected by the target RAN
1\. The NF Service Consumer shall indicate to the SMF that the PDU session
could not be setup in the target RAN by sending a POST request, as specified
in clause 5.2.2.3.1, with the following information:
\- the indication that the PDU session failed to be switched;
\- N2 SM information received from the target 5G-AN (see Path Switch Request
Setup Failed Transfer IE in clause 9.3.4.15 of 3GPP TS 38.413 [9]), including
the cause why the session could not be setup;
\- additional N2 SM information received from the source 5G-AN (see Secondary
RAT Data Usage Report Transfer IE in clause 9.3.4.23 of 3GPP TS 38.413 [9]),
if any;
\- other information, if necessary.
2a. Upon receipt of such a request, the SMF shall return a \"204 No Content\"
response. The SMF shall decide whether to release the PDU session or
deactivate the user plane connection of the PDU session, as specified in
clause 4.9.1.2 of 3GPP TS 23.502 [3].
2b. Same as step 2b of figure 5.2.2.3.1-1.
##### 5.2.2.3.4 N2 Handover
###### 5.2.2.3.4.1 General
The hoState attribute of an SM context represents the handover state of the
PDU session. The hoState attribute may take the following values:
\- NONE: no handover is in progress for the PDU session;
\- PREPARING: a handover is in preparation for the PDU session; SMF is
preparing the N3 tunnel between the target 5G-AN and UPF, i.e. the UPF\'s
F-TEID is assigned for uplink traffic;
\- PREPARED: a handover is prepared for the PDU session; SMF is updated for
the N3 tunnel between the target 5G-AN and UPF, with the target 5G-AN\'s
F-TEID to be assigned for downlink traffic upon handover execution;
\- COMPLETED: the handover is completed (successfully);
\- CANCELLED: the handover is cancelled.
###### 5.2.2.3.4.2 N2 Handover Preparation
The NF Service Consumer (e.g. T-AMF) shall request the SMF to prepare the
handover of an existing PDU session, i.e. prepare the N3 tunnel between the
target 5G-AN and UPF, as follows.
Figure 5.2.2.3.4.2-1: N2 Handover Preparation
1\. The NF Service Consumer shall request the SMF to prepare the handover of
the PDU session by sending a POST request, as specified in clause 5.2.2.3.1,
with the following information:
\- updating the hoState attribute of the individual SM Context resource in the
SMF to PREPARING;
\- targetId identifying the target RAN Node ID and TAI received in the
Handover Required from the source NG-RAN;
\- targetServingNfId set to the target AMF Id, for a N2 handover with AMF
change;
\- N2 SM information received from the source NG-RAN (see Handover Required
Transfer IE in clause 9.3.4.14 of 3GPP TS 38.413 [9]), indicating whether a
direct path is available.
\- other information, if necessary.
2a. Upon receipt of such a request, if the SMF can proceed with preparing the
handover of the PDU session (see clause 4.9.1.3 of 3GPP TS 23.501 [2]), the
SMF shall set the hoState attribute to PREPARING and shall return a 200 OK
response including the following information:
\- hoState attribute set to PREPARING;
\- N2 SM information to request the target 5G-AN to assign resources to the
PDU session (see PDU Session Resource Setup Request Transfer IE in clause
9.3.4.1 of 3GPP TS 38.413 [9]), including (among others) the transport layer
address and tunnel endpoint of the uplink termination point for the user plane
data for this PDU session (i.e. UPF\'s GTP-U F-TEID for uplink traffic).
The SMF shall store the targetServingNfId, if received in the request, but the
SMF shall still consider the AMF (previously) received in the servingNfId IE
as the serving AMF for the UE.
2b. If the SMF cannot proceed with preparing the handover of the PDU session
(e.g. the UE moves into a non-allowed service area), the SMF shall return an
error response, as specified in step 2b of figure 5.2.2.3.1-1.\ \ When
receiving a 4xx/5xx response from the SMF, the NF service consumer (e.g. the
AMF) shall regard the hoState of the SM Context to be NONE.
3\. If the SMF returned a 200 OK response in step 2a, the NF Service Consumer
(e.g. AMF) shall subsequently update the SM context in the SMF by sending POST
request, as specified in clause 5.2.2.3.1, with the following information:
\- hoState attribute set to PREPARED;
\- N2 SM information received from the target 5G-AN (see Handover Request
Acknowledge Transfer IE in clause 9.3.4.11 of 3GPP TS 38.413 [9]), including
(among others) the transport layer address and tunnel endpoint of the downlink
termination point for the user data for this PDU session (i.e. target 5G-AN\'s
GTP-U F-TEID for downlink traffic), if the target 5G-AN succeeded in
establishing resources for the PDU session;
\- N2 SM information received from the target 5G-AN (see Handover Resource
Allocation Unsuccessful Transfer IE in clause 9.3.4.19 of 3GPP TS 38.413 [9]),
including the Cause of the failure, if resources failed to be established for
the PDU sessions.
4a. If the target 5G-AN succeeded in establishing resources for the PDU
sessions, the SMF shall set the hoState attribute to PREPARED and return a 200
OK response including the following information:
\- hoState attribute to PREPARED;
\- N2 SM information (see Handover Command Transfer IE in clause 9.3.4.10 of
3GPP TS 38.413 [9]) containing DL forwarding tunnel information to be sent to
the source 5G-AN by the AMF if direct or indirect data forwarding applies (see
step 11f of clause 4.9.1.3.2 of 3GPP TS 23.502 [3]).
4b. If the SMF cannot proceed with preparing the handover of the PDU session
(e.g. the target 5G-AN failed to establish resources for the PDU session), the
SMF shall set the hoState to NONE, release resources reserved for the handover
to the target 5G-AN, and return an error response as specified in step 2b of
figure 5.2.2.3.1-1. For a 4xx/5xx response, the SmContextUpdateError structure
shall include the following additional information:
\- N2 SM information (see Handover Preparation Unsuccessful Transfer IE in
clause 9.3.4.18 of 3GPP TS 38.413 [9]) indicating the cause of the failure;
\- the cause in the error attribute set to
HANDOVER_RESOURCE_ALLOCATION_FAILURE, if the target 5G-AN failed to establish
resources for the PDU session.
When receiving a 4xx/5xx response from the SMF, the NF service consumer (e.g.
the AMF) shall regard the hoState of the SM Context to be NONE.
If the handover preparation fails completely on the target 5G-AN (i.e. target
5G-AN returns a NGAP HANDOVER_FAILURE), the (T-)AMF shall request the SMF to
cancel the handover of the PDU session as described in clause 5.2.2.3.4.4.
###### 5.2.2.3.4.3 N2 Handover Execution
The NF Service Consumer (e.g. T-AMF) shall request the SMF to complete the
execution the handover of an existing PDU session, upon being notified by the
target 5G-AN that the handover to the target 5G-AN has been successful, as
follows.
Figure 5.2.2.3.4.3-1: N2 Handover Execution
1\. The NF Service Consumer shall request the SMF to complete the execution of
the handover of the PDU session by sending a POST request, as specified in
clause 5.2.2.3.1, with the following information:
\- updating the hoState attribute of the individual SM Context resource in the
SMF to COMPLETED;
\- servingNfId set to the new serving AMF Id, for a N2 handover with AMF
change;
\- the indication that the UE is inside or outside of the LADN service area,
if the DNN of the established PDU session corresponds to a LADN;
\- N2 SM information received from the source 5G-AN (see Secondary RAT Data
Usage Report Transfer IE in clause 9.3.4.23 of 3GPP TS 38.413 [9]), if any;
\- other information, if necessary.
2\. Upon receipt of such a request, the SMF shall return a 200 OK response
including the following information:
\- hoState attribute set to COMPLETED.
The SMF shall complete the execution of the handover, e.g. switch the PDU
session towards the downlink termination point for the user data received from
the target 5G-AN (i.e. target 5G-AN\'s GTP-U F-TEID for downlink traffic), set
the hoState to NONE and delete any stored targetServingNfId.
If the request does not include the \"UE presence in LADN service area\"
indication and the SMF determines that the DNN corresponds to a LADN, then the
SMF shall consider that the UE is outside of the LADN service area. The SMF
shall proceed as specified in clause 5.6.5 of 3GPP TS 23.501 [2].
The (T-)AMF shall request the SMF to complete the execution of the handover of
the PDU session only for those PDU sessions that successfully completed the
handover procedure. If there are PDU sessions that failed to handover due to
timeout of SMF responses in any step of the handover preparation phase (e.g.
if the Update SM Context Response arrived too late or not at all during the
handover preparation phase, see step 7 of clause 4.9.1.3.3 of 3GPP TS 23.502
[3]), then the (T-)AMF shall inform the SMF about this failure, by sending a
POST request with the cause attribute set to \"HO_FAILURE\" for every such PDU
session, upon receipt of the NGAP HANDOVER NOTIFY. The SMF shall then release
the resources prepared for the handover and consider that the PDU session is
deactivated and that the handover attempt is terminated for the PDU session.
If the handover fails completely on the target 5G-AN due to the execution
phase not completed successfully (i.e. missing NGAP HANDOVER NOTIFY), the
(T-)AMF shall request the SMF to cancel the handover of the PDU session as
described in clause 5.2.2.3.4.4.
###### 5.2.2.3.4.4 N2 Handover Cancellation
The NF Service Consumer (e.g. T-AMF) shall request the SMF to cancel the
handover of an existing PDU session, e.g. upon receipt of such a request from
the source 5G-AN, as follows.
Figure 5.2.2.3.4.3-1: N2 Handover Cancellation
1\. The NF Service Consumer shall request the SMF to cancel the execution of
the handover of the PDU session by sending a POST request, as specified in
clause 5.2.2.3.1, with the following information:
\- updating the hoState attribute of the individual SM Context resource in the
SMF to CANCELLED;
\- cause information;
\- other information, if necessary.
2\. Upon receipt of such a request, the SMF return a 200 OK response including
the following information:
\- hoState attribute set to CANCELLED.
The SMF shall cancel the execution of the handover, e.g. release resources
reserved for the handover to the target 5G-AN, set the hoState to NONE and
delete any stored targetServingNfId.
##### 5.2.2.3.5 Handover between 3GPP and untrusted non-3GPP access procedures
###### 5.2.2.3.5.1 General
The handover of a PDU session between 3GPP and untrusted non-3GPP access shall
be supported as specified in clause 4.9.2 of 3GPP TS 23.502 [3]. Such a
handover may involve:
\- the same AMF, or a target AMF in the same PLMN as the source AMF (see
clauses 4.9.2.1, 4.9.2.2, 4.9.2.3.1 and 4.9.2.4.1 of 3GPP TS 23.502 [3]). The
Update SM Context service operation is used in these cases; or
\- a target AMF in a different PLMN than the source AMF (see clauses 4.9.2.3.2
and 4.9.2.4.2 of 3GPP TS 23.502 [3]). The Create SM Context service operation
is used in this case (see clause 5.2.2.2).
For a Home-Routed PDU session, the target AMF may be located in the VPLMN, or
in the HPLMN when the N3IWF is in the HPLMN.
###### 5.2.2.3.5.2 Handover of a PDU session without AMF change or with target
AMF in same PLMN
In these scenarios, the same V-SMF is used before and after the handover.
The NF Service Consumer (e.g. AMF) shall request the SMF to handover an
existing PDU session from 3GPP access to untrusted non-3GPP access, or vice-
versa, as follows.
Figure 5.2.2.3.5.2-1: Handover between 3GPP and untrusted non-3GPP access
1\. The NF Service Consumer shall request the SMF to handover an existing PDU
session from 3GPP access to untrusted non-3GPP access, or vice-versa, by
sending a POST request, as specified in clause 5.2.2.3.1, with the following
information:
\- updating the anType attribute of the individual SM Context resource in the
SMF to the target access type, i.e. to 3GPP_ACCESS or NON_3GPP_ACCESS;
\- other information, if necessary.
2a. Same as step 2a of Figure 5.2.2.3.1-1.
2b. If the SMF cannot proceed with handing over the PDU session to the target
access type, the SMF shall return an error response, as specified for step 2b
of figure 5.2.2.3.1-1. For a 4xx/5xx response, the SmContextUpdateError
structure shall include the following additional information:
\- N1 SM Information to reject the UE request.
##### 5.2.2.3.6 Inter-AMF change or mobility
The NF Service Consumer (e.g. new AMF) shall inform the SMF that it has taken
over the role of serving the UE (e.g. it has taken the responsibility of the
signalling towards the UE), when so required by 3GPP TS 23.501 [2] and 3GPP TS
23.502 [3], as follows.
Figure 5.2.2.3.6-1: Inter-AMF change or mobility
1\. The NF Service Consumer shall update the SMF with the new serving AMF, by
sending a POST request, as specified in clause 5.2.2.3.1, with the following
information:
\- servingNfId set to the new serving AMF Id;
\- other information, if necessary, e.g. to activate the user plane connection
of the PDU session (see clause 5.2.2.3.2.2).
2a. Same as step 2a of Figure 5.2.2.3.1-1.
2b. Same as step 2b of figure 5.2.2.3.1-1.
##### 5.2.2.3.7 RAN Initiated QoS Flow Mobility
The NF Service Consumer (e.g. AMF) shall request the SMF to transfer QoS flows
to and from Secondary RAN node, or more generally, handle a NG-RAN PDU Session
Resource Modify Indication, as follows.
Figure 5.2.2.3.7-1: RAN Initiated QoS Flow Mobility
1\. The NF Service Consumer shall request the SMF to modify the PDU session,
as requested by the NG-RAN, by sending a POST request, as specified in clause
5.2.2.3.1, with the following information:
\- N2 SM information received from the 5G-AN (see PDU Session Resource Modify
Indication Transfer IE in clause 9.3.4.6 of 3GPP TS 38.413 [9]), including the
transport layer information for the QoS flows of this PDU session (i.e.
5G-AN\'s GTP-U F-TEIDs for downlink traffic);
\- other information, if necessary.
2a. Upon receipt of such a request, if the SMF can proceed with switching the
QoS flows of the PDU session, the SMF shall return a 200 OK response including
the following information:
\- N2 SM information (see PDU Session Resource Modify Confirm Transfer IE in
clause 9.3.4.7 of 3GPP TS 38.413 [9]), including the list of QoS flows which
were modified successfully.
2b. If the SMF cannot proceed with switching the QoS flows of the PDU session,
the SMF shall return an error response, as specified for step 2b of figure
5.2.2.3.1-1, including:
\- N2 SM information (see PDU Session Resource Modify Confirm Transfer IE in
clause 9.3.4.7 of 3GPP TS 38.413 [9]), including the list of QoS flows which
failed to be modified.
##### 5.2.2.3.8 EPS to 5GS Handover using N26 interface
###### 5.2.2.3.8.1 General
The NF Service Consumer (e.g. AMF) shall request the SMF to handover a UE EPS
PDN connection to 5GS using N26 interface, following the same requirements as
specified for N2 handover in clause 5.2.2.3.4 with the modifications specified
in this clause.
###### 5.2.2.3.8.2 EPS to 5GS Handover Preparation
The requirements specified in clause 5.2.2.3.4.2 shall apply with the
following modifications.
Figure 5.2.2.3.8.2-1: EPS to 5GS Handover Preparation
1\. Same as step 1 of Figure 5.2.2.2.3-1.
2a. Same as step 2 of Figure 5.2.2.2.3-1.
2b. Same as step 2b of figure 5.2.2.3.1-1.
3\. Same as step 3 of Figure 5.2.2.3.4.2-1.
4a. Same as step 4 of Figure 5.2.2.3.4.2-1, with the following modifications:\
\ The 200 OK response shall not include N2 SM information for DL forwarding
tunnel setup, but shall additionally contain:
\- the epsBearerSetup IE(s), containing the list of EPS bearer context(s)
successfully handed over to the 5GS and the CN tunnel information for data
forwarding, generated based on the list of accepted QFI(s) received from the
5G-RAN;
4b. Same as step 2b of figure 5.2.2.3.4.2-1.
###### 5.2.2.3.8.3 EPS to 5GS Handover Execution
The requirements specified in clause 5.2.2.3.4.3 shall apply, with the
following modifications.
In step 2 of Figure 5.2.2.3.4.3-1, for a Home Routed PDU session, the SMF
shall complete the execution of the handover by initiating an Update service
operation towards the H-SMF in order to switch the PDU session towards the
V-UPF (see clause 5.2.2.8.2.3).
###### 5.2.2.3.8.4 EPS to 5GS Handover Cancellation
The requirements specified in clause 5.2.2.3.4.4 shall apply.
##### 5.2.2.3.9 5GS to EPS Handover using N26 interface
The NF Service Consumer (e.g. AMF) shall request the SMF to establish indirect
data forwarding tunnels during a 5GS to EPS handover, as follows.
Figure 5.2.2.3.9-1: 5GS to EPS Handover using N26 interface (data forwarding
tunnels setup)
1\. The NF Service Consumer shall send a POST request, as specified in clause
5.2.2.3.1, with the following information:
\- dataForwarding IE set to true;
\- EPS bearer contexts received from the MME in the Forward Relocation
Response.
2a. Upon receipt of such a request, the SMF shall map the EPS bearers for Data
Forwarding to the 5G QoS flows based on the association between the EPS bearer
ID(s) and QFI(s) for the QoS flow(s), and shall return a 200 OK response
including the following information:
\- N2 SM information providing the 5G-AN with the CN transport layer address
and tunnel endpoint (i.e. UPF\'s GTP-U F-TEID) for Data Forwarding and the QoS
flows for Data Forwarding for this PDU session.
2b. If the SMF cannot proceed with the request, the SMF shall return an error
response, as specified for step 2b of figure 5.2.2.3.1-1.
If no resources can be assigned in EPS for any PDU session attempted to be
handed over, the AMF shall update the SMF with the information that the
handover preparation failed by sending a POST request with the cause attribute
set to \"HO_FAILURE\" and with an empty list of EPS bearer contexts (and
without the dataForwarding IE). The SMF shall then release the resources
prepared for the handover and proceed with the PDU session as if no handover
procedure had taken place.
##### 5.2.2.3.10 P-CSCF Restoration Procedure via AMF
The requirements specified in clause 5.2.2.3.1 shall apply with the following
modifications.
1\. Same as step 1 of Figure 5.2.2.3.1-1, with the following modifications.
The POST request shall contain:
\- the release IE set to true;
\- the cause IE set to REL_DUE_TO_REACTIVATION.
##### 5.2.2.3.11 AMF requested PDU Session Release due to duplicated PDU
Session Id
When the AMF receives an \"initial request\" with PDU Session Id which already
exists in PDU session context of the UE (see clause 5.4.5.2.5 of 3GPP TS
24.501 [7]), the AMF shall request the SMF to release the existing PDU
Session; upon subsequent receipt of an SM context status notification
indicating that the SM context has been deleted in the SMF, the AMF shall
release the stored context for the PDU session and proceed with the \"initial
request\" with the PDU Session Id.
The requirements for releasing the existing PDU Session specified in clause
5.2.2.3.1 shall apply with the following modifications.
1\. Same as step 1 of Figure 5.2.2.3.1-1, with the following modifications.
The POST request shall contain:
\- the release IE set to true;
\- the cause IE set to REL_DUE_TO_DUPLICATE_SESSION_ID.
NOTE: The SMF does not send NAS signaling to UE for the PDU session release in
this procedure.
##### 5.2.2.3.12 AMF requested PDU Session Release due to slice not available
The requirements specified in clause 5.2.2.3.1 shall apply with the following
modifications.
1\. Same as step 1 of Figure 5.2.2.3.1-1, with the following modifications.
The POST request shall contain:
\- the release IE set to true;
\- the cause IE set to REL_DUE_TO_SLICE_NOT_AVAILABLE.
#### 5.2.2.4 Release SM Context service operation
##### 5.2.2.4.1 General
The Release SM Context service operation shall be used to release the SM
Context of a given PDU session, in the SMF, or in the V-SMF for HR roaming
scenarios, in the following procedures:
\- UE initiated Deregistration (see clause 4.2.2.3.2 of 3GPP TS 23.502 [3]);
\- Network initiated Deregistration, e.g. AMF initiated deregistration (see
clause 4.2.2.3.3 of 3GPP TS 23.502 [3]), UDM triggered deregistration by
sending Deregistration notification with initial Registration indication (see
clause 4.2.2.2.2 of 3GPP TS 23.502 [3]);
\- Network requested PDU session release (see clause 4.3.4.2 of 3GPP TS 23.502
[3]), e.g. AMF initiated release when:
\- there is a mismatch of the PDU session status between the UE and the AMF or
when a required user plane security enforcement cannot be fulfilled by the NG-
RAN; or
\- there is a change of the set of network slices for a UE where a network
slice instance is no longer available (as described in 3GPP TS 23.501 [2],
clause 5.15.5.2.2) and the PDU session is not activated;
\- 5GS to EPS Idle mode mobility or handover for a Home Routed PDU session, to
release the SM context in the V-SMF only, for the PDU sessions that are
transferred to EPC;
\- 5GS to EPS handover using N26 interface and 5GS to EPS Idle mode mobility
using N26, to release the PDU session not transferred to EPC (see clauses
4.11.1.2.1 and 4.11.1.3.2 of 3GPP TS 23.502 [3]).
The NF Service Consumer (e.g. AMF) shall release the SM Context of a given PDU
session by using the HTTP \"release\" custom operation as shown in Figure
5.2.2.4.1-1.
Figure 5.2.2.4.1-1: SM context release
1\. The NF Service Consumer shall send a POST request to the resource
representing the individual SM context to be deleted. The payload body of the
POST request shall contain any data that needs to be passed to the SMF and/or
N2 SM information (if Secondary RAT usage data needs to be reported).\ \ For a
5GS to EPS Idle mode mobility or handover, for a Home Routed PDU session
associated with 3GPP access and with assigned EBI(s), the POST request shall
contain the vsmfReleaseOnly indication.
For a 5GS to EPS Idle mode mobility or handover, for a Home Routed PDU session
associated with 3GPP access and with no assigned EBI(s), the POST request
shall not contain the vsmfReleaseOnly indication to release the PDU session in
the V-SMF and H-SMF.
2a. On success, the SMF shall return a \"204 No Content\" response with an
empty payload body in the POST response.
If the POST request contains a vsmfReleaseOnly indication (i.e. for a 5GS to
EPS Idle mode mobility or handover, for a Home Routed PDU session with
assigned EBI(s)), the V-SMF shall release its SM context and corresponding PDU
session resource locally, i.e. without signalling towards the H-SMF.
2b. On failure, one of the HTTP status code listed in Table 6.1.3.3.4.3.2-2
shall be returned. For a 4xx/5xx response, the message body shall include a
ProblemDetails structure with the \"cause\" attribute set to one of the
application error listed in Table 6.1.3.3.4.3.2-2.
#### 5.2.2.5 Notify SM Context Status service operation
##### 5.2.2.5.1 General
The Notify SM Context Status service operation shall be used by the SMF to
notify the NF Service Consumer about the status of an SM context related to a
PDU session (e.g. when the SM context is released and the release is not
triggered by a Release SM Context Request, or when the SM context is moved to
another system) in the SMF, or the V-SMF for HR roaming scenarios.
It is used in the following procedures:
\- UE requested PDU Session Establishment procedure, when the PDU session
establishment fails after the Create SM Context response (see clause 4.3.2.2
of 3GPP TS 23.502 [3]);
\- UE or Network requested PDU session release (see clause 4.3.4.2 of 3GPP TS
23.502 [3]), e.g. SMF initiated release;
\- Handover of a PDU Session procedure between untrusted non-3GPP to 3GPP
access (see clauses 4.9.2.3.2 and 4.9.2.4.2 of 3GPP TS 23.502 [3]);
\- Interworking procedures without N26 interface, e.g. 5GS to EPS Mobility
(see clause 4.11.2.2 of 3GPP TS 23.502 [3]);
\- Handover from 5GC-N3IWF to EPS (see clause 4.11.3.2 of 3GPP TS 23.502 [3]);
\- Handover from 5GS to EPC/ePDG (see clause 4.11.4.2 of 3GPP TS 23.502 [3]).
The SMF shall notify the NF Service Consumer by using the HTTP POST method as
shown in Figure 5.2.2.5.1-1.
Figure 5.2.2.5.1-1: SM context status notification
1\. The SMF shall send a POST request to the SM Context Status callback
reference provided by the NF Service Consumer during the subscription to this
notification. The payload body of the POST request shall contain the
notification payload.
If the notification is triggered by PDU session handover, the notification
payload shall contain the Cause IE with the value \"PDU_SESSION_HANDED_OVER\".
2a. On success, \"204 No Content\" shall be returned and the payload body of
the POST response shall be empty.
If the SMF indicated in the request that the SM context resource is released,
the NF Service Consumer shall release its association with the SMF for the PDU
session and release the EBI(s) that were assigned to the PDU session.
2b. On failure or redirection, one of the HTTP status code listed in Table
6.1.3.7.3.1-2 shall be returned. For a 4xx/5xx response, the message body
shall contain a ProblemDetails structure with the \"cause\" attribute set to
one of the application error listed in Table 6.1.3.7.3.1-2.
If the NF Service Consumer (e.g. AMF) is not able to handle the notification
but knows by implementation specific means that another NF Service Consumer
(e.g. AMF) is able to handle the notification (e.g. AMF deployment with Backup
AMF), it shall reply with an HTTP \"307 temporary redirect\" error response
pointing to the URI of the new NF Service Consumer. If the NF Service Consumer
is not able to handle the notification but another unknown NF Service Consumer
could possibly handle the notification (e.g. AMF deployment with UDSF), it
shall reply with an HTTP \"404 Not found\" error response.
If the SMF receives a \"307 temporary redirect\" response, the SMF shall use
this URI as Notification URI in subsequent communication and shall resend the
notification to that URI.
If the SMF becomes aware that a new NF Service Consumer (e.g. AMF) is
requiring notifications (e.g. via the \"404 Not found\" response or via
Namf_Communication service AMFStatusChange Notifications, or via link level
failures, see clause 6.5.2 of 3GPP TS 29.500 [4]), and the SMF knows alternate
or backup Address(es) where to send Notifications (e.g. via the GUAMI and/or
backupAmfInfo received when the SM context was established or via
AMFStatusChange Notifications, or via the Nnrf_NFDiscovery service specified
in 3GPP TS 29.510 [19] using the service name and GUAMI or backupAMFInfo
obtained during the creation of the SM context, see clause 6.5.2.2 of 3GPP TS
29.500 [4]), the SMF shall exchange the authority part of the corresponding
Notification URI with one of those addresses and shall use that URI in
subsequent communication; the SMF shall resend the notification to that URI.
#### 5.2.2.6 Retrieve SM Context service operation
##### 5.2.2.6.1 General
The Retrieve SM Context service operation shall be used to retrieve an
individual SM context, for a given PDU session, from the SMF, or from the
V-SMF for HR roaming scenarios.
It is used in the following procedures:
\- 5GS to EPS handover using N26 interface (see clause 4.11.1.2.1 of 3GPP TS
23.502 [3]), for PDU sessions associated with 3GPP access;
\- 5GS to EPS Idle mode mobility using N26 interface (see clause 4.11.1.3.2 of
3GPP TS 23.502 [3]), for PDU sessions associated with 3GPP access.
The NF Service Consumer (e.g. AMF) shall retrieve an SM context by using the
HTTP POST method (retrieve custom operation) as shown in Figure 5.2.2.6.1-1.
Figure 5.2.2.6.1-1: SM context retrieval
1\. The NF Service Consumer shall send a POST request to the resource
representing the individual SM context to be retrieved. The POST request may
contain a payload body with the following parameters:
\- target MME capabilities, if available, to allow the SMF to determine
whether to include EPS bearer contexts for non-IP PDN type or not.
2a. On success, \"200 OK\" shall be returned; the payload body of the POST
response shall contain the mapped EPS bearer contexts.\ \ If the target MME
capabilities were provided in the request parameters, and if the target MME
supports the non-IP PDN type, the SMF shall return, for a PDU session with PDU
session type \"Ethernet\" or \"Unstructured\", an EPS bearer context with the
\"non-IP\" PDN type.
2b. On failure, one of the HTTP status code listed in Table 6.1.3.3.4.4.2-2
shall be returned. For a 4xx/5xx response, the message body shall contain a
ProblemDetails structure with the \"cause\" attribute set to one of the
application error listed in Table 6.1.3.3.4.4.2-2.
#### 5.2.2.7 Create service operation
##### 5.2.2.7.1 General
The Create service operation shall be used to create an individual PDU session
in the H-SMF for HR roaming scenarios.
It is used in the following procedures:
\- UE requested PDU Session Establishment (see clause 4.3.2.2.2 of 3GPP TS
23.502 [3]);
\- EPS to 5GS Idle mode mobility or handover using N26 interface (see clause
4.11 of 3GPP TS 23.502 [3]);
\- EPS to 5GS mobility without N26 interface (see clause 4.11.2.3 3GPP TS
23.502 [3]);
\- Handover of a PDU session between 3GPP access and non-3GPP access, when the
target AMF does not know the SMF resource identifier of the SM context used by
the source AMF, e.g. when the target AMF is not in the PLMN of the N3IWF (see
clause 4.9.2.3.2 of 3GPP TS 23.502 [3]);
\- Handover from EPS to 5GC-N3IWF (see clause 4.11.3.1 of 3GPP TS 23.502 [3]);
\- Handover from EPC/ePDG to 5GS (see clause 4.11.4.1 of 3GPP TS 23.502 [3]).
The NF Service Consumer (e.g. V-SMF) shall create a PDU session by using the
HTTP POST method as shown in Figure 5.2.2.7.1-1.
Figure 5.2.2.7.1-1: PDU session creation
1\. The NF Service Consumer shall send a POST request to the resource
representing the PDU sessions collection resource of the H-SMF. The payload
body of the POST request shall contain:
\- a representation of the individual PDU session resource to be created;
\- the Request Type IE, if it is received from the UE and if the request
refers to an existing PDU session or an existing Emergency PDU session; the
Request Type may be included otherwise;
\- the vsmfId IE identifying the serving SMF;
\- the vcnTunnelInfo;
\- the anType;
\- a URI ({vsmfPduSessionUri}) representing the PDU session resource in the
V-SMF, for possible use by the H-SMF to subsequently modify or release the PDU
session.
As specified in clause 4.3.2.2.2 of 3GPP TS 23.502 [3], the NF Service
Consumer shall be able to receive an Update request before receiving the
Create Response, e.g. for EPS bearer ID allocation (see clause 4.11.1.4.1 of
3GPP TS 23.502 [3]) or Secondary authorization/authentication (see clause
4.3.2.3 of 3GPP TS 23.502 [3]).
2a. On success, \"201 Created\" shall be returned, the payload body of the
POST response shall contain:
\- the representation describing the status of the request;
\- the QoS flow(s) to establish for the PDU session;
\- the epsPdnCnxInfo IE and, for each EPS bearer, an epsBearerInfo IE, if the
PDU session is associated to (or handed over to) the 3GPP access type and may
be moved to EPS during its lifetime;
\- the \"Location\" header containing the URI of the created resource.
The payload body of the POST response may also contain the upSecurity,
maxIntegrityProtectedDataRateUl and maxIntegrityProtectedDataRateDl IEs, if
the PDU session is associated to (or handed over to) the 3GPP access type.
The authority and/or deployment-specific string of the apiRoot of the created
resource URI may differ from the authority and/or deployment-specific string
of the apiRoot of the request URI received in the POST request.
If an Update Request was sent to the V-SMF before the Create Response, the URI
in the \"Location\" header and in the hsmfPduSessionUri IE of the H-SMF
initiated Update Request shall be the same. If the Request Type was received
in the request and set to EXISTING_PDU_SESSION or
EXISTING_EMERGENCY_PDU_SESSION (i.e. indicating that this is a request for an
existing PDU session or an existing emergency PDU session), the SMF shall
identify the existing PDU session or emergency PDU session based on the PDU
Session ID; in this case, the SMF shall not create a new PDU session or
emergency PDU session but instead update the existing PDU session or emergency
PDU session and provide the representation of the updated PDU session or
emergency PDU session in the response to the NF Service Consumer.
The POST request shall be considered as colliding with an existing PDU session
context if:
\- it includes the same SUPI, or PEI for an emergency registered UE without a
UICC or without an authenticated SUPI, and the same PDU Session ID as for an
existing PDU session context; and
\- this is a request to establish a new PDU session, i.e. the RequestType is
absent in the request or is present and set to INITIAL_REQUEST or
INITIAL_EMERGENCY_REQUEST.
A POST request that collides with an existing PDU session context shall be
treated as a request for a new PDU session context. Before creating the new
PDU session context, the SMF should delete the existing PDU session context
locally and any associated resources in the UPF and PCF. If the
vsmfPduSessionUri of the existing PDU session context differs from the
vsmfPduSessionUri received in the POST request, the SMF shall also send a
status notification (see clause 5.2.2.10) targeting the vsmfPduSessionUri of
the existing PDU session context to notify the release of the existing PDU
session context.
If the Request Type was received in the request and indicates this is a
request for a new PDU session (i.e. INITIAL_REQUEST) and if the Old PDU
Session ID was also included in the request, the SMF shall identify the
existing PDU session to be released and to which the new PDU session
establishment relates, based on the Old PDU Session ID.
The NF Service Consumer shall store any epsPdnCnxInfo and EPS bearer
information received from the H-SMF.
If the response received from the H-SMF contains the alwaysOnGranted attribute
set to true, the V-SMF shall check and determine whether the PDU session can
be established as an always-on PDU session based on local policy.
If no GPSI IE is provided in the request, e.g. for a PDU session moved from
another access or another system, and the SMF knows that a GPSI is already
associated with the PDU session, the SMF shall include the GPSI in the
response.
If one or more requested QoS flow(s) fail to be established, the V-SMF shall
send an Update Request including the qosFlowsRelNotifyList attribute to report
the failure to the H-SMF (see clause 5.2.2.8.2.2), or a Release Request to
release the PDU session if no QoS flow can be established (see clause
5.2.2.9).
2b. On failure, or redirection during a UE requested PDU Session
Establishment, one of the HTTP status code listed in Table 6.1.3.5.3.1-3 shall
be returned. For a 4xx/5xx response, the message body shall contain a
PduSessionCreateError structure, including:
\- a ProblemDetails structure with the \"cause\" attribute set to one of the
application error listed in Table 6.1.3.5.3.1-3;
\- the n1SmCause IE with the 5GSM cause that the H-SMF proposes the V-SMF to
return to the UE, if the request included n1SmInfoFromUe;
\- n1SmInfoToUe with any information to be sent to the UE (in the PDU Session
Establishment Reject).
##### 5.2.2.7.2 EPS to 5GS Idle mode mobility
The requirements specified in clause 5.2.2.7.1 shall apply with the following
modifications.
1\. Same as step 1 of Figure 5.2.2.7.1-1, with the following additions.
The POST request shall contain:
\- the list of EPS Bearer Ids received from the MME;
\- the PGW S8-C F-TEID received from the MME;
\- the epsBearerCxtStatus attribute, indicating the status of all the EPS
bearer contexts in the UE, if corresponding information has been received in
the Create SM Context request (see clause 5.2.2.2.2).
2a. Same as step 2 of Figure 5.2.2.7.1-1, with the following modifications.\ \
If:
\- the H-SMF finds a corresponding PDU session based on the EPS Bearer Ids and
PGW S8-C F-TEID received in the request;
\- the default EPS bearer context of the corresponding PDU session is not
reported as inactive by the UE in the epsBearerCtxStatus attribute, if
received; and
\- the H-SMF can proceed with moving the PDN connection to 5GS,
then the H-SMF shall return a 201 Created response including the following
additional information:
\- PDU Session ID corresponding to the EPS PDN connection;
\- other PDU session parameters, such as PDU Session Type, Session AMBR, QoS
flows information.
If the epsBearerCxtStatus attribute is received in the request, the H-SMF
shall check whether some EPS bearer(s) of the corresponding PDU session have
been deleted by the UE but not notified to the EPS, and if so, the SMF shall
release these EPS bearers, corresponding QoS rules and QoS flow level
parameters locally, as specified in clause 4.11.1.3.3 of 3GPP TS 23.502 [3].
NOTE: The behaviour specified in this step also applies if the POST request
collides with an existing PDU session context, i.e. if the POST request
includes the same SUPI, or PEI for an emergency registered UE without a UICC
or without an authenticated SUPI, and the received EPS bearer ID is the same
as in the existing PDU session context.
2b. Same as step 2b of Figure 5.2.2.7.1-1, with the following additions.
If the H-SMF determines that seamless session continuity from EPS to 5GS is
not supported for the PDU session, the H-SMF shall set the \"cause\" attribute
in the ProblemDetails structure to \"NO_EPS_5GS_CONTINUITY\".
If the default EPS bearer context of the PDU session is reported as inactive
by the UE in the epsBearerCtxStatus attribute, the SMF shall set the \"cause\"
attribute in the ProblemDetails structure to \"DEFAULT_EPS_BEARER_INACTIVE\".
##### 5.2.2.7.3 EPS to 5GS Handover Preparation
The requirements specified in clause 5.2.2.7.1 shall apply with the following
modifications.
1\. Same as step 1 of Figure 5.2.2.7.1-1, with the following modifications.
The POST request shall contain:
\- the list of EPS Bearer Ids received from the MME;
\- the PGW S8-C F-TEID received from the MME;
\- the hoPreparationIndication IE set to \"true\", to indicate that a handover
preparation is in progress and the PGW-C/SMF shall not switch the DL user
plane of the PDU session yet.
2a. Same as step 2 of Figure 5.2.2.7.1-1, with the following modifications.
If the SMF finds a corresponding PDU session based on the EPS Bearer Ids and
PGW S8-C F-TEID received in the request, and if it can proceed with the
procedure, the SMF shall return a 201 Created response including the following
information:
\- PDU Session ID corresponding to the EPS PDN connection;
\- other PDU session parameters, such as PDU Session Type, Session AMBR, QoS
flows information.
The SMF shall not switch the DL user plane of the PDU session, if the
hoPreparationIndication IE was set to \"true\" in the request.
NOTE: The behaviour specified in this step also applies if the POST request
collides with an existing PDU session context, i.e. if the POST request
includes the same SUPI, or PEI for an emergency registered UE without a UICC
or without an authenticated SUPI, and the received EPS bearer ID is the same
as in the existing PDU session context.
2b. Same as step 2b of Figure 5.2.2.7.1-1, with the following additions.
If the H-SMF determines that seamless session continuity from EPS to 5GS is
not supported for the PDU session, the H-SMF shall set the \"cause\" attribute
in the ProblemDetails structure to \"NO_EPS_5GS_CONTINUITY\".
#### 5.2.2.8 Update service operation
##### 5.2.2.8.1 General
The Update service operation shall be used in HR roaming scenarios to:
\- update an individual PDU session in the H-SMF and/or provide the H-SMF with
information received by the V-SMF in N1 SM signalling from the UE;
\- update an individual PDU session in the V-SMF and/or provide information
necessary for the V-SMF to send N1 SM signalling to the UE.
It is invoked by the V-SMF in the following procedures:
\- UE or visited network requested PDU session modification (see clause
4.3.3.3 of 3GPP TS 23.502 [3]);
\- UE requested PDU session release (see clause 4.3.4.3 of 3GPP TS 23.502
[3]);
\- EPS to 5GS handover execution using N26 interface (see clause 4.11 of 3GPP
TS 23.502 [3]);
\- Handover between 3GPP and untrusted non-3GPP access procedures (see clause
4.9.2 of 3GPP TS 23.502 [3]), for a Home Routed PDU session, without AMF
change or with target AMF in same PLMN;
\- All procedures requiring to provide the H-SMF with information received by
the V-SMF in N1 SM signalling from the UE to the H-SMF;
\- Secondary RAT Usage Data Reporting (see clause 4.21 of 3GPP TS 23.502 [3]).
It is invoked by the H-SMF in the following procedures:
\- Home network requested PDU session modification (see clause 4.3.3.3 of 3GPP
TS 23.502 [3]);
\- Home network requested PDU session release (see clause 4.3.4.3 of 3GPP TS
23.502 [3]);
\- All procedures requiring to provide information necessary for the V-SMF to
send N1 SM signalling to the UE;
\- EPS Bearer ID allocation or revocation (see clauses 4.11.1.4.1 and
4.11.1.4.3 of 3GPP TS 23.502 [3]);
\- Secondary authorization/authentication by an DN-AAA server (see clause
4.3.2.3 of of 3GPP TS 23.502 [3]).
##### 5.2.2.8.2 Update service operation towards H-SMF
###### 5.2.2.8.2.1 General
The NF Service Consumer (e.g. V-SMF) shall update a PDU session in the H-SMF
and/or provide the H-SMF with information received by the V-SMF in N1 SM
signalling from the UE, by using the HTTP POST method (modify custom
operation) as shown in Figure 5.2.2.8.2-1.
Figure 5.2.2.8.2-1: PDU session update towards H-SMF
1\. The NF Service Consumer shall send a POST request to the resource
representing the individual PDU session resource in the H-SMF. The payload
body of the POST request shall contain:
\- the requestIndication IE indicating the request type;
\- the modification instructions and/or the information received by the V-SMF
in N1 signalling from the UE.
2a. On success, \"204 No Content\" or \"200 OK\" shall be returned; in the
latter case, the payload body of the POST response shall contain the
representation describing the status of the request and/or information
necessary for the V-SMF to send N1 SM signalling to the UE.
2b. On failure, one of the HTTP status code listed in Table 6.1.3.3.3.2-3
shall be returned. For a 4xx/5xx response, the message body shall contain a
HsmfUpdateError structure, including:
\- a ProblemDetails structure with the \"cause\" attribute set to one of the
application error listed in Table 6.1.3.3.3.2-3;
\- the n1SmCause IE with the 5GSM cause the H-SMF proposes the V-SMF to return
to the UE, if the request included n1SmInfoFromUe;
\- n1SmInfoToUe binary data, if the SMF needs to return NAS SM information
which the V-SMF does not need to interpret;
\- the procedure transaction id that was that received in the request, if this
is a response sent to a UE requested PDU session modification.
###### 5.2.2.8.2.2 UE or visited network requested PDU session modification
The requirements specified in clause 5.2.2.8.2.1 shall apply with the
following modifications.
1\. Same as step 1 of Figure 5.2.2.8.2-1, with the following modifications.
The POST request shall contain:
\- the requestIndication set to UE_REQ_PDU_SES_MOD, and the modifications
requested by the UE, e.g. UE requested QoS rules or UE requested Qos flow
descriptions, in an N1 SM container IE as specified in clause 5.2.3.1, for a
UE requested PDU session modification; or
\- the requestIndication set to NW_REQ_PDU_SES_MOD, and the modifications
requested by the visited network or the notifications initiated by the visited
network, for a visited network requested PDU session modification, e.g. to:
\- report the release of QoS flow(s) or notify QoS flow(s) whose targets QoS
are no longer fulfilled;
\- report that the user plane security enforcement with a value Preferred is
not fulfilled or is fulfilled again;
\- report that access type of the PDU session can be changed; in this case,
the anTypeCanBeChanged attribute shall be set to \"true\".
###### 5.2.2.8.2.3 UE requested PDU session release
The requirements specified in clause 5.2.2.8.2.1 shall apply with the
following modifications.
1\. Same as step 1 of Figure 5.2.2.8.2-1, with the following modifications.
The POST request shall contain:
\- the requestIndication set to UE_REQ_PDU_SES_REL.
###### 5.2.2.8.2.4 EPS to 5GS Handover Execution
The requirements specified in clause 5.2.2.8.2.1 shall apply with the
following modifications.
1\. Same as step 1 of Figure 5.2.2.8.2-1, with the following modifications.
The POST request shall contain:
\- the list of EPS Bearer Ids successfully handed over to 5GS;
\- the hoPreparationIndication IE set to \"false\", to indicate that there is
no handover preparation in progress anymore and that the PGW-C/SMF shall
switch the DL user plane of the PDU session.
2\. Same as step 2 of Figure 5.2.2.8.2-1, with the following modifications.
The SMF shall return a 200 OK response. The SMF shall switch the DL user plane
of the PDU session using the N9 tunnel information that has been received in
the vcnTunnelInfo, if the hoPreparationIndication IE was set to \"false\" in
the request.
If the handover preparation failed (e.g. the target 5G-AN failed to establish
resources for the PDU session), the requirements specified in clause
5.2.2.8.2.1 shall apply with the following modifications.
1\. Same as step 1 of Figure 5.2.2.8.2-1, with the following modifications.
The POST request shall contain:
\- the cause attribute set to \"HO_FAILURE\";
\- an empty list of EPS Bearer Ids;
\- the hoPreparationIndication IE set to \"false\", to indicate that there is
no handover preparation in progress anymore.
2\. Same as step 2 of Figure 5.2.2.8.2-1, with the following modifications.
The H-SMF shall return a 200 OK response. The H-SMF shall release the
resources prepared for the handover.
###### 5.2.2.8.2.5 Handover between 3GPP and untrusted non-3GPP access (Home
Routed PDU session)
For Handover between 3GPP and untrusted non-3GPP access procedures, for a Home
Routed PDU session, without AMF change or with the target AMF in the same
PLMN, the requirements specified in clause 5.2.2.8.2.1 shall apply with the
following modifications.
1\. Same as step 1 of Figure 5.2.2.8.2-1, with the following modifications.
The POST request shall contain the anType set to the target access type, i.e.
to 3GPP_ACCESS or NON_3GPP_ACCESS.
The requestIndication IE shall be set to PDU_SES_MOB.
2a. Same as step 2a of Figure 5.2.2.8.2-1, with the following modifications.
The payload body of the POST response shall include:
\- all QoS information for the QoS Flow(s) applicable to the PDU Session for
the target access type, so that when sending the PDU Session Establishment
Accept, the V-SMF can include all QoS information (e.g. QoS Rule(s) in N1 SM
container, QFI(s) and QoS Profile(s) in N2 SM information) for the QoS Flow(s)
acceptable according to VPLMN policies; and
\- the epsPdnCnxInfo IE and, for each EPS bearer, an epsBearerInfo IE, if the
PDU session may be moved to EPS during its lifetime, for a handover from
non-3GPP access to 3GPP access.
The payload body of the POST response may also contain the upSecurity,
maxIntegrityProtectedDataRateUl and maxIntegrityProtectedDataRateDl IEs during
a handover from non-3GPP access to 3GPP access.
Upon receipt of the 200 OK response, the V-SMF shall delete any above
information received earlier for the source access type and use the new
information received for the target access type (see clause 6.1.6.2.12).
NOTE: As specified in clause 4.11.1.4.3 of 3GPP TS 23.502 [3], the AMF, the
SMF and the UE release locally the EBI(s) allocated to a PDU Session handed
over from 3GPP access to non-3GPP access.
For a handover from non-3GPP access to 3GPP access, if the PDU session may be
moved to EPS during its lifetime, the H-SMF may send an Update Request towards
the V-SMF to request the allocation of EBIs prior to step 2a.
If one or more requested QoS flow(s) fail to be established in the target
access type, the V-SMF shall send an Update Request including the
qosFlowsRelNotifyList attribute to report the failure to the H-SMF (see clause
5.2.2.8.2.2), or a Release Request to release the PDU session if no QoS flow
can be established (see clause 5.2.2.9).
###### 5.2.2.8.2.6 P-CSCF Restoration Procedure via AMF (Home Routed PDU
session)
The requirements specified in clause 5.2.2.8.2.1 shall apply with the
following modifications.
1\. Same as step 1 of Figure 5.2.2.8.2-1, with the following modifications:
The POST request shall contain:
\- the requestIndication IE set to NW_REQ_PDU_SES_REL;
\- the cause IE set to REL_DUE_TO_REACTIVATION.
##### 5.2.2.8.3 Update service operation towards V-SMF
###### 5.2.2.8.3.1 General
The NF Service Consumer (e.g. H-SMF) shall update a PDU session in the V-SMF
and/or provide information necessary for the V-SMF to send N1 SM signalling to
the UE, or request to allocate or revoke EPS Bearer ID(s) for the PDU session,
by using the HTTP \"modify\" custom operation as shown in Figure
5.2.2.8.3.1-1.
Figure 5.2.2.8.3.1-1: PDU session update towards V-SMF
1\. The NF Service Consumer shall send a POST request to the resource
representing the individual PDU session resource in the V-SMF. The payload
body of the POST request shall contain:
\- the requestIndication IE indicating the request type;
\- the modification instructions and/or the information necessary for the
V-SMF to send N1 SM signalling to the UE;
\- the hsmfPduSessionUri IE if the Update Request is sent to the V-SMF before
the Create Response, and the H-SMF PDU session resource URI has not been
previously provided to the V-SMF; in this case, the supportedFeatures IE shall
also be included if at least one optional feature defined in clause 6.1.8 is
supported.
2a. On success, \"204 No Content\" or \"200 OK\" shall be returned; in the
latter case, the payload body of the POST response shall contain the
representation describing the status of the request and/or information
received by the V-SMF in N1 signalling from the UE.
2b. On failure, one of the HTTP status code listed in Table 6.1.3.7.4.2.2-1
shall be returned. For a 4xx/5xx response, the message body shall contain a
VsmfUpdateError structure, including:
\- a ProblemDetails structure with the \"cause\" attribute set to one of the
application error listed in Table 6.1.3.7.4.2.2-1;
\- the n1SmCause IE with the 5GSM cause returned by the UE, if available;
\- n1SmInfoFromUe and/or unknownN1SmInfo binary data, if NAS SM information
has been received from the UE that needs to be transferred to the H-SMF or
that the V-SMF does not comprehend;
\- the procedure transaction id received from the UE, if available.
###### 5.2.2.8.3.2 Home network requested PDU session modification
The requirements specified in clause 5.2.2.8.3.1 shall apply with the
following modifications.
1\. Same as step 1 of Figure 5.2.2.8.3-1, with the following modifications.
The requestIndication shall be set to NW_REQ_PDU_SES_MOD.
As part of the modification instructions, the NF Service Consumer may request
to modify QoS parameters applicable at the PDU session level (e.g. modify the
authorized Session AMBR values) or at the QoS flow level (e.g. modify the MFBR
of a particular QoS flow).\ \ The NF Service Consumer may request to
establish, modify and/or release QoS flows by including the
qosFlowsAddModifyRequestList IE and/or the qosFlowsReleaseRequestList IE in
the payload body.
The NF Service Consumer may include epsBearerInfo IE(s), if the PDU session
may be moved to EPS during its lifetime and the EPS Bearer(s) information has
changed (e.g. a new EBI has been assigned or the mapped EPS bearer QoS for an
existing EBI has changed).
The NF Service Consumer may include the revokeEbiList IE to request the V-SMF
to release some EBI(s) and delete any corresponding EPS bearer context stored
in the V-SMF. The V-SMF shall disassociate the EBI(s) with the QFI(s) with
which they are associated.
2\. Same as step 2 of Figure 5.2.2.8.3-1, with the following modifications.
The V-SMF may accept all or only a subset of the QoS flows requested to be
created or modified within the request.\ \ The list of QoS flows which have
been successfully setup or modified, and those which failed to be so, if any,
shall be included in the qosFlowsAddModifyList IE and/or the
qosFlowsFailedtoAddModifyList IE respectively.
If the NG-RAN rejects the establishment of a voice QoS flow due to EPS
Fallback for IMS voice (see clause 4.13 of 3GPP TS 23.502 [3]), the V-SMF
shall return the cause indicating that \"mobility due to EPS fallback for IMS
voice is on-going\" for the corresponding flow in the
qosFlowsFailedtoAddModifyList IE.
The list of QoS flows which have been successfully released, and those which
failed to be so, if any, shall be included in the qosFlowsReleaseList and/or
qosFlowsFailedtoReleaseList IE respectively.\ \ For a QoS flow which failed to
be modified, the V-SMF shall fall back to the configuration of the QoS flow as
it was configured prior to the reception of the PDU session update request
from the NF Service Consumer.
The V-SMF shall store any EPS bearer information received from the H-SMF. If
the revokeEbiList IE is present in the request, the V-SMF shall request delete
the corresponding EPS bearer contexts and request the AMF to release the EBIs
listed in this IE.
If the request received from the H-SMF contains the alwaysOnGranted attribute
set to true, the V-SMF shall check and determine whether the PDU session can
be established as an always-on PDU session based on local policy.
###### 5.2.2.8.3.3 Home network requested PDU session release
The requirements specified in clause 5.2.2.8.3.1 shall apply with the
following modifications.
1\. Same as step 1 of Figure 5.2.2.8.3-1, with the following modifications.
The requestIndication shall be set to NW_REQ_PDU_SES_REL.
2\. Same as step 2 of Figure 5.2.2.8.3-1, with the following modifications.
If the requestIndication in the request is set to NW_REQ_PDU_SES_REL, the
V-SMF shall initiate the release of RAN resources allocated for the PDU
session if any and shall send a PDU session release command to the UE.
The V-SMF shall not release the SM context for the PDU session.
NOTE: The SM context will be released when receiving Status notification from
the H-SMF indicating the PDU session is released in the H-SMF.
###### 5.2.2.8.3.4 Handover between 3GPP and untrusted non-3GPP access, from
5GC-N3IWF to EPS or from 5GS to EPC/ePDG
The requirements specified in clause 5.2.2.8.3.1 shall apply with the
following modifications.
1\. Same as step 1 of Figure 5.2.2.8.3-1, with the following modifications.
The NF Service Consumer shall request the source V-SMF to release the
resources in the VPLMN without sending a PDU session release command to the
UE, by setting the requestIndication IE to NW_REQ_PDU_SES_REL and the Cause IE
indicating \"Release due to Handover\", in the following scenarios:
\- Handover of a PDU session between 3GPP and untrusted non-3GPP access, when
the UE is roaming and the selected N3IWF is in the HPLMN (see clause 4.9.2.4.2
of 3GPP TS 23.502 [3]);
\- Handover from 5GC-N3IWF to EPS (see clause 4.11.3.2 of 3GPP TS 23.502 [3]);
\- Handover from 5GS to EPC/ePDG (see clause 4.11.4.2 of 3GPP TS 23.502 [3]).
2\. Same as step 2 of Figure 5.2.2.8.3-1, with the following modifications.
If the requestIndication in the request is set to NW_REQ_PDU_SES_REL and if
the Cause IE indicates \"Release due to Handover\", the V-SMF shall initiate
the release of RAN resources reserved for the PDU session if any but shall not
send a PDU session release command to the UE.
The V-SMF shall not release the SM context for the PDU session.
NOTE: The SM context will be released when receiving Status notification from
the H-SMF indicating the PDU session is released in the H-SMF.
###### 5.2.2.8.3.5 EPS Bearer ID assignment
The requirements specified in clause 5.2.2.8.3.1 shall apply with the
following modifications.
1\. Same as step 1 of Figure 5.2.2.8.3-1, with the following modifications.
The requestIndication shall be set to EBI_ASSIGNMENT_REQ.
The NF Service Consumer may include the assignEbiList IE to request the
allocation of EBI(s). The NF Service Consumer may include the revokeEbiList IE
to request the V-SMF to release some EBI(s) and delete any corresponding EPS
bearer context stored in the V-SMF. The V-SMF shall disassociate the EBI(s)
with the QFI(s) with which they are associated.
Upon receipt of this request, the V-SMF shall request the AMF to assign (and
release if required) EBIs (see clause 5.2.2.6 of 3GPP TS 29.518 [20].
2a. Same as step 2a of Figure 5.2.2.8.3-1, with the following modifications.
If the AMF has successfully assigned all or part of the requested EBIs, the
SMF shall respond with the status code 200 OK, and include the list of EBIs
successfully allocated, those which failed to be so if any, and the list of
EBIs released for this PDU session at AMF if any, in the assignedEbiList IE,
the failedtoAssignEbiList IE and/or the releasedEbiList IE respectively.
2b. Same as step 2b of Figure 5.2.2.8.3-1, with the following modifications.
For a 4xx/5xx response, the message body shall contain a VsmfUpdateError
structure, including the list of EBIs which failed to be allocated in the
failedtoAssignEbiList IE.
#### 5.2.2.9 Release service operation
##### 5.2.2.9.1 General
The Release service operation shall be used to request an immediate and
unconditional deletion of an invidual PDU session resource in the H-SMF, in HR
roaming scenarios.
It is invoked by the V-SMF in the following procedures:
\- UE initiated Deregistration (see clause 4.2.2.3.2 of 3GPP TS 23.502 [3]);
\- Network initiated Deregistration (see clause 4.2.2.3.2 of 3GPP TS 23.502
[3]), e.g. AMF initiated deregistration;
\- visited network requested PDU Session release (see clause 4.3.4.3 of 3GPP
TS 23.502 [3]), e.g. AMF initiated release when there is a mismatch of the PDU
session status between the UE and the AMF or when a required user plane
security enforcement cannot be fulfilled by the NG-RAN;
\- 5GS to EPS handover using N26 interface and 5GS to EPS Idle mode mobility
using N26, to release the PDU session not transferred to EPC (see clauses
4.11.1.2.1 and 4.11.1.3.2 of 3GPP TS 23.502 [3]).
The NF Service Consumer (e.g. V-SMF) shall release a PDU session in the H-SMF
by using the HTTP \"release\" custom operation as shown in Figure 5.2.2.9.1-1.
Figure 5.2.2.9.1-1: Pdu session release
1\. The NF Service Consumer shall send a POST request to the resource
representing the individual PDU session resource in the H-SMF. The payload
body of the POST request shall contain any data that needs to be passed to the
H-SMF.
2a. On success, the H-SMF shall return a \"204 No Content\" response with an
empty payload body in the POST response.
2b. On failure, one of the HTTP status code listed in Table 6.1.3.6.4.3.2-2
shall be returned. For a 4xx/5xx response, the message body shall contain a
ProblemDetails structure with the \"cause\" attribute set to one of the
application error listed in Table 6.1.3.6.4.3.2-2.
#### 5.2.2.10 Notify Status service operation
##### 5.2.2.10.1 General
The Notify Status service operation shall be used to notify the NF Service
Consumer about the status of a PDU session (e.g. when the PDU session is
released and the release is not triggered by a Release Request, or when the
PDU session is moved to another system), in HR roaming scenarios.
It is used in the following procedures:
\- Home network requested PDU Session release (see clause 4.3.4.3 of 3GPP TS
23.502 [3]), e.g. H-SMF initiated release.
\- Handover of a PDU Session procedure from 3GPP to untrusted non-3GPP access
(see clause 4.9.2.4.2 of 3GPP TS 23.502 [3]);
\- Interworking procedures without N26 interface, e.g. 5GS to EPS Mobility
(see clause 4.11.2.2 of 3GPP TS 23.502 [3]);
\- Handover from 5GC-N3IWF to EPS (see clause 4.11.3.2 of 3GPP TS 23.502 [3]);
\- Handover from 5GS to EPC/ePDG (see clause 4.11.4.2 of 3GPP TS 23.502 [3]);
The H-SMF shall notify the NF Service Consumer (e.g. V-SMF) by using the HTTP
POST method as shown in Figure 5.2.2.10-1.
Figure 5.2.2.10-1: PDU session status notification
1\. The H-SMF shall send a POST request to the resource representing the
individual PDU session resource in the V-SMF. The payload body of the POST
request shall contain the notification payload, with the status information.
If the notification is triggered by PDU session handover, the notification
payload shall contain the Cause IE with value \"PDU_SESSION_HANDED_OVER\".
2a. On success, \"204 No Content\" shall be returned and the payload body of
the POST response shall be empty.
If the H-SMF indicated in the request that the PDU session in the H-SMF is
released, the NF Service Consumer (i.e. the V-SMF) shall release the SM
context for the PDU session.
2b. On failure, one of the HTTP status code listed in Table 6.1.3.7.3.1-2
shall be returned. For a 4xx/5xx response, the message body shall contain a
ProblemDetails structure with the \"cause\" attribute set to one of the
application error listed in Table 6.1.3.7.3.1-2.
### 5.2.3 General procedures
#### 5.2.3.1 Transfer of NAS SM information between UE and H-SMF for Home
Routed PDU sessions
##### 5.2.3.1.1 General
As specified in clause 4.3.1 of 3GPP TS 23.502 [3], for Home Routed PDU
sessions, there is NAS SM information that the V-SMF and H-SMF need to
interpret, and NAS SM information that the V-SMF only needs to transfer
between the UE and H-SMF but which it does not need to interpret.
NAS SM information that only needs to be transferred between the UE and H-SMF
by the V-SMF can be extended in later versions or releases of the NAS
specification, e.g. defining new fields or values within existing IEs, and the
extensions should not impact the V-SMF.
Besides, in HR roaming scenarios, the V-SMF and H-SMF can comply to different
versions or releases of the NAS specification. It should be possible to
support new SM features only requiring support from the H-SMF without
impacting the V-SMF, when the H-SMF complies with a more recent release than
the V-SMF, e.g. defining new NAS SM IEs in signalling from the UE to the H-SMF
and/or signalling from the H-SMF to the UE.
##### 5.2.3.1.2 V-SMF Behaviour
The V-SMF shall transfer NAS SM information that it only needs to transfer to
the H-SMF (i.e. known IEs, and IEs that have an unknown value not set to
\"reserved\" according to the release to which the V-SMF complies, that only
need to be forwarded by the V-SMF) in n1SmInfoFromUe binary data within the
HTTP payload. This carries N1 SM IE(s), encoded as specified in 3GPP TS 24.501
[7], including the Type field and, for TLV or TLV-E IEs, the Length field.
NOTE 1: N1 SM IEs defined without a Type field need to be defined over N16 as
specific IEs.
The V-SMF shall transfer NAS SM information that it does not comprehend (i.e.
unknown IEs, or known IEs to be interpreted by the V-SMF that have an unknown
value not set to \"reserved\" according to the release to which the V-SMF
complies) in unknownN1SmInfo binary data within the HTTP payload. This carries
N1 SM IE(s), encoded as specified in 3GPP TS 24.501 [7], including the Type
field and, for TLV or TLV-E IEs, the Length field.
When receiving n1SmInfoToUe binary data in the HTTP payload from the H-SMF,
the V-SMF shall parse all the N1 SM IEs received in the binary data and
construct the NAS SM message to the UE according to 3GPP TS 24.501 [7]. The
V-SMF shall append unknown NAS SM IEs received in the binary data at the end
of the NAS SM message it sends to the UE.
NOTE 2: The V-SMF can infer the length of an unknown IE based on the IEI
value. See clause 11.2.4 of 3GPP TS 24.007 [8].
The V-SMF shall comprehend, and be able to encode at their right place in a
given NAS message, all the IEs of the version of the NAS specification it
implements that do not need to be interpreted by the V-SMF and which precede
the last interpreted IE that the V-SMF implements in a NAS message.
NOTE 3: The V-SMF encodes comprehended IEs at their right place in the NAS SM
message
##### 5.2.3.1.3 H-SMF Behaviour
When receiving unknownN1SmInfo binary data in the HTTP payload from the V-SMF,
the H-SMF shall process any N1 SM IE received in this binary data that do not
require to be interpreted by the V-SMF. Other N1 SM IEs shall be dropped, e.g.
IEs that the H-SMF comprehends but which require to be interpreted by the
V-SMF.
The H-SMF shall transfer NAS SM information which the V-SMF does not need to
interpret (i.e. that it only needs to transfer to the UE) in n1SmInfoToUe
binary data within the HTTP payload. This carries N1 SM IE(s), encoded as
specified in 3GPP TS 24.501 [7], including the Type field and, for TLV or
TLV-E IEs, the Length field.
NOTE 1: N1 SM IEs defined without a Type field need to be defined over N16 as
specific IEs.
The NAS SM IEs in n1SmInfoToUe binary data shall be encoded in the same order
as specified in 3GPP TS 24.501 [7].
N1 SM information which does not require to be interpreted by the V-SMF is
information that is not defined as specific IEs over N16.
# 6 API Definitions
## 6.1 Nsmf_PDUSession Service API
### 6.1.1 API URI
The Nsmf_PDUSession service shall use the Nsmf_PDUSession API.
The request URI used in HTTP request from the NF service consumer towards the
NF service producer shall have the structure defined in clause 4.4.1 of 3GPP
TS 29.501 [5], i.e.:
**{apiRoot}/\ /{apiVersion}/\**
with the following components:
\- The {apiRoot} shall be set as described in 3GPP TS 29.501 [5].
\- The \ shall be \"nsmf-pdusession\".
\- The {apiVersion} shall be \"v1\".
\- The \ shall be set as described in clause
6.1.3.
### 6.1.2 Usage of HTTP
#### 6.1.2.1 General
HTTP/2, as defined in IETF RFC 7540 [14], shall be used as specified in clause
5 of 3GPP TS 29.500 [4].
HTTP/2 shall be transported as specified in clause 5.3 of 3GPP TS 29.500 [4].
HTTP messages and bodies for the Nsmf_PDUSession service shall comply with the
OpenAPI [15] specification contained in Annex A.
#### 6.1.2.2 HTTP standard headers
##### 6.1.2.2.1 General
The usage of HTTP standard headers shall be supported as specified in clause
5.2.2 of 3GPP TS 29.500 [4].
##### 6.1.2.2.2 Content type
The following content types shall be supported:
\- the JSON format (IETF RFC 8259 [11]). The use of the JSON format shall be
signalled by the content type \"application/json\". See also clause 5.4 of
3GPP TS 29.500 [4].
\- the Problem Details JSON Object (IETF RFC 7807 [23]). The use of the
Problem Details JSON object in a HTTP response body shall be signalled by the
content type \"application/problem+json\".
NOTE: \"application/json\" is used in a response that includes a payload body
containing an application-specific data structure, see clause 4.8 of 3GPP TS
29.501 [5].
Multipart messages shall also be supported (see clause 6.1.2.4) using the
content type \"multipart/related\", comprising:
\- one JSON body part with the \"application/json\" content type; and
\- one or two binary body parts with 3gpp vendor specific content subtypes.
The 3gpp vendor specific content subtypes defined in Table 6.1.2.2.2-1 shall
be supported.
Table 6.1.2.2.2-1: 3GPP vendor specific content subtypes
* * *
content subtype Description vnd.3gpp.ngap Binary encoded payload, encoding NG
Application Protocol (NGAP) IEs, as specified in clause 9.3 of 3GPP TS 38.413
[9] (ASN.1 encoded). vnd.3gpp.5gnas Binary encoded payload, encoding a 5GS NAS
message or 5G NAS IEs, as specified in 3GPP TS 24.501 [7]. NOTE: Using 3GPP
vendor content subtypes allows to describe the nature of the opaque payload
(e.g. NGAP or 5GS NAS information) without having to rely on metadata in the
JSON payload.
* * *
See clause 6.1.2.4 for the binary payloads supported in the binary body part
of multipart messages.
#### 6.1.2.3 HTTP custom headers
##### 6.1.2.3.1 General
In this release of the specification, no specific custom headers are defined
for the Nsmf_PDUSession service.
For 3GPP specific HTTP custom headers used across all service based
interfaces, see clause 5.2.3 of 3GPP TS 29.500 [4].
#### 6.1.2.4 HTTP multipart messages
HTTP multipart messages shall be supported, to transfer opaque N1 and/or N2
SMpayloads, in the following service operations (and HTTP messages):
\- Create SM Context Request and Response (POST);
\- Update SM Context Request and Response (POST);
\- Release SM Context Request (POST);
\- Create Request and Response (POST);
\- Update Request and Response (POST (modify)).
HTTP multipart messages shall include one JSON body part and one or two binary
body parts comprising:
\- an N1 SM payload, an N2 SM payload or both, over N11 (see clause 6.1.6.4);
\- one or two N1 SM payloads, over N16 (see clause 6.1.6.4);
\- one or two N2 SM payloads over N11 (see clause 5.2.2.3.3).
The JSON body part shall be the \"root\" body part of the multipart message.
It shall be encoded as the first body part of the multipart message. The
\"Start\" parameter does not need to be included.
The multipart message shall include a \"type\" parameter (see IETF RFC 2387
[10]) specifying the media type of the root body part, i.e.
\"application/json\".
NOTE: The \"root\" body part (or \"root\" object) is the first body part the
application processes when receiving a multipart/related message, see IETF RFC
2387 [10]. The default root is the first body within the multipart/related
message. The \"Start\" parameter indicates the root body part, e.g. when this
is not the first body part in the message.
For each binary body part in a HTTP multipart message, the binary body part
shall include a Content-ID header (see IETF RFC 2045 [12]), and the JSON body
part shall include an attribute, defined with the RefToBinaryData type, that
contains the value of the Content-ID header field of the referenced binary
body part.
Examples of multipart/related messages can be found in Annex B.
#### 6.1.2.5 HTTP/2 request retries
The principles specified in clause 5.2.8 of 3GPP TS 29.500 [4] shall be
applied with the following modifications.
The NF Service Consumer may retry any HTTP POST request on the same resource
through a new TCP connection after a TCP connection failure.
The SMF shall support handling repeated retries successfully.
NOTE: See clauses 5.2.2.2 and 5.2.2.7 for the handling by the SMF of an HTTP
POST request that would have already been processed by the SMF and that would
be retried by the NF Service Consumer.
HTTP conditional requests are not supported by the Nsmf_PDUSession service in
this version of the API.
### 6.1.3 Resources
#### 6.1.3.1 Overview
Figure 6.1.3.1-1 describes the resource URI structure of the Nsmf_PDUSession
API.
Figure 6.1.3.1-1: Resource URI structure of the Nsmf_PDUSession API
NOTE: The sm-contexts and pdu-sessions collection resources can be distributed
on different processing instances or hosts. Thus, the authority and/or
deployment-specific string of the apiRoot of the created individual sm context
and pdu-session resources\' URIs can differ from the authority and/or
deployment-specific string of the apiRoot of the sm-contexts and pdu-sessions
distributed collections\' URIs.
Table 6.1.3.1-1 provides an overview of the resources and applicable HTTP
methods.
Table 6.1.3.1-1: Resources and methods overview
+----------------+----------------+----------------+----------------+ | Resource name | Resource URI | HTTP method or | Description | | | | custom | | | | | operation | (service | | | | | operation) | +================+================+================+================+ | SM contexts | {apiRoot | POST | Create SM | | | }/nsmf-pdusess | | Context | | collection | ion/{apiVersio | | | | | n}/sm-contexts | | | +----------------+----------------+----------------+----------------+ | Individual SM | {api | retrieve | Retrieve SM | | context | Root}/nsmf-pdu | (POST) | Context | | | session/{apiVe | | | | | rsion}/sm-cont | | | | | exts/{smContex | | | | | tRef}/retrieve | | | +----------------+----------------+----------------+----------------+ | | {a | modify | Update SM | | | piRoot}/nsmf-p | | Context | | | dusession/{api | (POST) | | | | Version}/sm-co | | | | | ntexts/{smCont | | | | | extRef}/modify | | | +----------------+----------------+----------------+----------------+ | | {apiRoot}/ | release | Release SM | | | nsmf-pd | | Context | | | usession/{apiV | (POST) | | | | ersion}/sm-con | | | | | texts/{smConte | | | | | xtRef}/release | | | +----------------+----------------+----------------+----------------+ | PDU sessions | {apiRoot} | POST | Create | | collection | /nsmf-pdusessi | | | | | on/{apiVersion | | | | (H-SMF) | }/pdu-sessions | | | +----------------+----------------+----------------+----------------+ | Individual PDU | {api | modify | Update | | session | Root}/nsmf-pdu | | | | | session/{apiVe | (POST) | (initiated by | | (H-SMF) | rsion}/pdu-ses | | V-SMF) | | | sions/{pduSess | | | | | ionRef}/modify | | | +----------------+----------------+----------------+----------------+ | | {apiR | release | Release | | | oot}/nsmf-pdus | | | | | ession/{apiVer | (POST) | | | | sion}/pdu-sess | | | | | ions/{pduSessi | | | | | onRef}/release | | | +----------------+----------------+----------------+----------------+ | Individual PDU | {vsmfPduSess | modify | Updated | | session | ionUri}/modify | | | | | | (POST) | (initiated by | | (V-SMF) | | | H-SMF) | +----------------+----------------+----------------+----------------+ | | {vsmf | POST | Notify Status | | | PduSessionUri} | | | +----------------+----------------+----------------+----------------+
#### 6.1.3.2 Resource: SM contexts collection
##### 6.1.3.2.1 Description
This resource represents the collection of the individual SM contexts created
in the SMF.
This resource is modelled with the Collection resource archetype (see clause
C.2 of 3GPP TS 29.501 [5]).
##### 6.1.3.2.2 Resource Definition
Resource URI: **{apiRoot}/nsmf-pdusession/{apiVersion}/sm-contexts**
This resource shall support the resource URI variables defined in table
6.1.3.2.2-1.
Table 6.1.3.2.2-1: Resource URI variables for this resource
Name Definition
* * *
apiRoot See clause 6.1.1. apiVersion See clause 6.1.1.
##### 6.1.3.2.3 Resource Standard Methods
###### 6.1.3.2.3.1 POST
This method creates an individual SM context resource in the SMF, or in V-SMF
in HR roaming scenarios.
This method shall support the URI query parameters specified in table
6.1.3.2.3.1-1.
Table 6.1.3.2.3.1-1: URI query parameters supported by the POST method on this
resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
6.1.3.2.3.1-2 and the response data structures and response codes specified in
table 6.1.3.2.3.1-3.
Table 6.1.3.2.3.1-2: Data structures supported by the POST Request Body on
this resource
* * *
Data type P Cardinality Description SmContextCreateData M 1 Representation of
the SM context to be created in the SMF.
* * *
Table 6.1.3.2.3.1-3: Data structures supported by the POST Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | SmConte | M | 1 | 201 Created | Successful | | xtCreatedData | | | | creation of | | | | | | an SM | | | | | | context. | +---------------+---+-------------+---------------+---------------+ | | | | 307 Temporary | Temporary | | | | | Redirect | redirection, | | | | | | during a UE | | | | | | requested PDU | | | | | | Session | | | | | | E | | | | | | stablishment. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing a | | | | | | different | | | | | | URI. The URI | | | | | | shall be an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance | | | | | | within the | | | | | | SMF that was | | | | | | selected by | | | | | | the AMF. | +---------------+---+-------------+---------------+---------------+ | | | | 308 Permanent | Permanent | | | | | Redirect | redirection, | | | | | | during a UE | | | | | | requested PDU | | | | | | Session | | | | | | E | | | | | | stablishment. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing a | | | | | | different | | | | | | URI. The URI | | | | | | shall be an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance | | | | | | within the | | | | | | SMF that was | | | | | | selected by | | | | | | the AMF. | +---------------+---+-------------+---------------+---------------+ | SmConte | M | 1 | 400 Bad | The \"cause\" | | xtCreateError | | | Request | attribute | | | | | | shall be set | | | | | | to one of the | | | | | | errors | | | | | | defined in | | | | | | Table | | | | | | 5.2.7.2-1 of | | | | | | 3GPP TS | | | | | | 29.500 [4]. | +---------------+---+-------------+---------------+---------------+ | SmConte | M | 1 | 403 Forbidden | The \"cause\" | | xtCreateError | | | | attribute | | | | | | shall be set | | | | | | to one of the | | | | | | following | | | | | | application | | | | | | error: | | | | | | | | | | | | - | | | | | | N1_SM_ERROR | | | | | | | | | | | | - | | | | | | S | | | | | | NSSAI_DENIED | | | | | | | | | | | | - | | | | | | DNN_DENIED | | | | | | | | | | | | - | | | | | | PD | | | | | | UTYPE_DENIED | | | | | | | | | | | | - | | | | | | SSC_DENIED | | | | | | | | | | | | - | | | | | | SUBSCRI | | | | | | PTION_DENIED | | | | | | | | | | | | - | | | | | | DNN_N | | | | | | OT_SUPPORTED | | | | | | | | | | | | - | | | | | | PDUTYPE_N | | | | | | OT_SUPPORTED | | | | | | | | | | | | - | | | | | | SSC_N | | | | | | OT_SUPPORTED | | | | | | | | | | | | - | | | | | | HOME\ | | | | | | _ROUTED_ROAM | | | | | | ING_REQUIRED | | | | | | | | | | | | - | | | | | | OU | | | | | | T_OF_LADN_ | | | | | | SERVICE_AREA | | | | | | | | | | | | - | | | | | | NO_EPS_5G | | | | | | S_CONTINUITY | | | | | | | | | | | | - | | | | | | INT | | | | | | EGRITY_PROTE | | | | | | CTED_MDR_NO | | | | | | T_ACCEPTABLE | | | | | | | | | | | | - | | | | | | DEFA | | | | | | ULT_EPS_BEA | | | | | | RER_INACTIVE | | | | | | | | | | | | See table | | | | | | 6.1.7.3-1 for | | | | | | the | | | | | | description | | | | | | of these | | | | | | errors. | +---------------+---+-------------+---------------+---------------+ | SmConte | M | 1 | 404 Not Found | The \"cause\" | | xtCreateError | | | | attribute | | | | | | shall be set | | | | | | to one of the | | | | | | following | | | | | | application | | | | | | error: | | | | | | | | | | | | - | | | | | | CONTEX | | | | | | T_NOT_FOUND | | | | | | | | | | | | See table | | | | | | 6.1.7.3-1 for | | | | | | the | | | | | | description | | | | | | of these | | | | | | errors. | +---------------+---+-------------+---------------+---------------+ | SmConte | M | 1 | 500 Internal | The \"cause\" | | xtCreateError | | | Server Error | attribute | | | | | | shall be set | | | | | | to one of the | | | | | | errors | | | | | | defined in | | | | | | Table | | | | | | 5.2.7.2-1 of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | or to one of | | | | | | the following | | | | | | application | | | | | | errors: | | | | | | | | | | | | - | | | | | | INSU | | | | | | FFICIENT_RES | | | | | | OURCES_SLICE | | | | | | | | | | | | - | | | | | | INSUFFICI | | | | | | ENT_RESOURCE | | | | | | S_SLICE_DNN | | | | | | | | | | | | See table | | | | | | 6.1.7.3-1 for | | | | | | the | | | | | | description | | | | | | of these | | | | | | errors. | +---------------+---+-------------+---------------+---------------+ | SmConte | M | 1 | 503 Service | The \"cause\" | | xtCreateError | | | Unavailable | attribute | | | | | | shall be set | | | | | | to one of the | | | | | | errors | | | | | | defined in | | | | | | Table | | | | | | 5.2.7.2-1 of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | or to one of | | | | | | the following | | | | | | application | | | | | | errors: | | | | | | | | | | | | - | | | | | | DN | | | | | | N_CONGESTION | | | | | | | | | | | | - | | | | | | S_NSSA | | | | | | I_CONGESTION | | | | | | | | | | | | See table | | | | | | 6.1.7.3-1 for | | | | | | the | | | | | | description | | | | | | of these | | | | | | errors. | +---------------+---+-------------+---------------+---------------+ | SmConte | M | 1 | 504 Gateway | The \"cause\" | | xtCreateError | | | Timeout | attribute | | | | | | shall be set | | | | | | to one of the | | | | | | following | | | | | | application | | | | | | error: | | | | | | | | | | | | - | | | | | | PEER_NO | | | | | | T_RESPONDING | | | | | | | | | | | | - | | | | | | NET | | | | | | WORK_FAILURE | | | | | | | | | | | | See table | | | | | | 6.1.7.3-1 for | | | | | | the | | | | | | description | | | | | | of these | | | | | | errors. | +---------------+---+-------------+---------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the POST | | | | | | method listed | | | | | | in Table | | | | | | 5.2.7.1-1 of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | other than | | | | | | those | | | | | | specified in | | | | | | the table | | | | | | above also | | | | | | apply, with a | | | | | | P | | | | | | roblemDetails | | | | | | data type | | | | | | (see clause | | | | | | 5.2.7 of | | | | | | 3GPP TS 2 | | | | | | 9.500 [4]). | | | | | +---------------+---+-------------+---------------+---------------+
##### 6.1.3.2.4 Resource Custom Operations
None.
#### 6.1.3.3 Resource: Individual SM context
##### 6.1.3.3.1 Description
This resource represents an individual SM context created in the SMF.
This resource is modelled with the Document resource archetype (see clause C.1
of 3GPP TS 29.501 [5]).
##### 6.1.3.3.2 Resource Definition
Resource URI: **{apiRoot}/nsmf-pdusession/****{apiVersion}/sm-
contexts/{smContextRef}**
This resource shall support the resource URI variables defined in table
6.1.3.3.2-1.
Table 6.1.3.3.2-1: Resource URI variables for this resource
Name Definition
* * *
apiRoot See clause 6.1.1. apiVersion See clause 6.1.1. smContextRef SM context
reference assigned by the SMF during the Create SM Context service operation.
##### 6.1.3.3.3 Resource Standard Methods
None.
##### 6.1.3.3.4 Resource Custom Operations
###### 6.1.3.3.4.1 Overview
Table 6.1.3.3.4.1-1: Custom operations
Custom operaration URI Mapped HTTP method Description
* * *
{resourceUri}/modify POST Update SM Context service operation.
{resourceUri}/release POST Release SM Context service operation.
{resourceUri}/retrieve POST Retrieve SM Context service operation
###### 6.1.3.3.4.2 Operation: modify
###### # 6.1.3.3.4.2.1 Description
###### # 6.1.3.3.4.2.2 Operation Definition
This custom operation updates an individual SM context resource and/or provide
N1 or N2 SM information received from the UE or the AN, for a given PDU
session, towards the SMF, or in V-SMF in HR roaming scenario.
This operation shall support the request data structures specified in table
6.1.3.3.4.2.2-1 and the response data structure and response codes specified
in table 6.1.3.3.4.2.2-2.
Table 6.1.3.3.4.2.2-1: Data structures supported by the POST Request Body on
this resource
Data type P Cardinality Description
* * *
SmContextUpdateData M 1 Representation of the updates to apply to the SM
context.
Table 6.1.3.3.4.2.2-2: Data structures supported by the POST Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +===============+===+=============+===============+===============+ | SmConte | C | 0..1 | 200 OK | Successful | | xtUpdatedData | | | | update of the | | | | | | SM context, | | | | | | when the SMF | | | | | | needs to | | | | | | return | | | | | | information | | | | | | in the | | | | | | response. | +---------------+---+-------------+---------------+---------------+ | | | | 204 No | Successful | | | | | Content | update of the | | | | | | SM context, | | | | | | when the SMF | | | | | | does not need | | | | | | to return | | | | | | information | | | | | | in the | | | | | | response. | +---------------+---+-------------+---------------+---------------+ | SmConte | M | 1 | 400 Bad | The \"cause\" | | xtUpdateError | | | Request | attribute | | | | | | shall be set | | | | | | to one of the | | | | | | errors | | | | | | defined in | | | | | | Table | | | | | | 5.2.7.2-1 of | | | | | | 3GPP TS | | | | | | 29.500 [4]. | +---------------+---+-------------+---------------+---------------+ | SmConte | M | 1 | 403 Forbidden | The \"cause\" | | xtUpdateError | | | | attribute | | | | | | shall be set | | | | | | to one of the | | | | | | following | | | | | | application | | | | | | error: | | | | | | | | | | | | - | | | | | | N1_SM_ERROR | | | | | | | | | | | | - | | | | | | N2_SM_ERROR | | | | | | | | | | | | - | | | | | | SUBSCRI | | | | | | PTION_DENIED | | | | | | | | | | | | - | | | | | | OU | | | | | | T_OF_LADN_ | | | | | | SERVICE_AREA | | | | | | | | | | | | - | | | | | | P | | | | | | RIORITIZED_S | | | | | | ERVICES_ONLY | | | | | | | | | | | | - | | | | | | PD | | | | | | U_SESSION_A | | | | | | NCHOR_CHANGE | | | | | | | | | | | | See table | | | | | | 6.1.7.3-1 for | | | | | | the | | | | | | description | | | | | | of these | | | | | | errors. | +---------------+---+-------------+---------------+---------------+ | SmConte | M | 1 | 404 Not Found | The \"cause\" | | xtUpdateError | | | | attribute | | | | | | shall be set | | | | | | to one of the | | | | | | following | | | | | | application | | | | | | error: | | | | | | | | | | | | - | | | | | | CONTEX | | | | | | T_NOT_FOUND | | | | | | | | | | | | See table | | | | | | 6.1.7.3-1 for | | | | | | the | | | | | | description | | | | | | of these | | | | | | errors. | +---------------+---+-------------+---------------+---------------+ | SmConte | M | 1 | 500 Internal | The \"cause\" | | xtUpdateError | | | Server Error | attribute | | | | | | shall be set | | | | | | to one of the | | | | | | errors | | | | | | defined in | | | | | | Table | | | | | | 5.2.7.2-1 of | | | | | | 3GPP TS | | | | | | 29.500 [4]. | +---------------+---+-------------+---------------+---------------+ | SmConte | M | 1 | 503 Service | The \"cause\" | | xtUpdateError | | | Unavailable | attribute | | | | | | shall be set | | | | | | to one of the | | | | | | errors | | | | | | defined in | | | | | | Table | | | | | | 5.2.7.2-1 of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | or to one of | | | | | | the following | | | | | | application | | | | | | errors: | | | | | | | | | | | | - | | | | | | DN | | | | | | N_CONGESTION | | | | | | | | | | | | - S-NSSAI_ | | | | | | CONGESTION | | | | | | | | | | | | See table | | | | | | 6.1.7.3-1 for | | | | | | the | | | | | | description | | | | | | of these | | | | | | errors. | +---------------+---+-------------+---------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the POST | | | | | | method listed | | | | | | in Table | | | | | | 5.2.7.1-1 of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | other than | | | | | | those | | | | | | specified in | | | | | | the table | | | | | | above also | | | | | | apply, with a | | | | | | P | | | | | | roblemDetails | | | | | | data type | | | | | | (see clause | | | | | | 5.2.7 of | | | | | | 3GPP TS 2 | | | | | | 9.500 [4]). | | | | | +---------------+---+-------------+---------------+---------------+
###### 6.1.3.3.4.3 Operation: release
###### # 6.1.3.3.4.3.1 Description
###### # 6.1.3.3.4.3.2 Operation Definition
This custom operation releases an individual SM context resource in the SMF,
or in V-SMF in HR roaming scenario
This operation shall support the request data structures specified in table
6.1.3.3.4.3.2-1 and the response data structure and response codes specified
in table 6.1.3.3.4.3.2-2.
Table 6.1.3.3.4.3.2-1: Data structures supported by the POST Request Body on
this resource
* * *
Data type P Cardinality Description SmContextReleaseData C 0..1 Representation
of the data to be sent to the SMF when releasing the SM context.
* * *
Table 6.1.3.3.4.3.2-2: Data structures supported by the POST Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | | | | 204 No | Successful | | | | | Content | release of an | | | | | | SM context. | +---------------+---+-------------+---------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the POST | | | | | | method listed | | | | | | in Table | | | | | | 5.2.7.1-1 of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | other than | | | | | | those | | | | | | specified in | | | | | | the table | | | | | | above also | | | | | | apply, with a | | | | | | P | | | | | | roblemDetails | | | | | | data type | | | | | | (see clause | | | | | | 5.2.7 of | | | | | | 3GPP TS 2 | | | | | | 9.500 [4]). | | | | | +---------------+---+-------------+---------------+---------------+
###### 6.1.3.3.4.4 Operation: retrieve
###### # 6.1.3.3.4.4.1 Description
###### # 6.1.3.3.4.4.2 Operation Definition
This custom operation retrieves an individual SM context resource from the
SMF, or from the V-SMF in HR roaming scenario.
This operation shall support the request data structures specified in table
6.1.3.3.4.4.2-1 and the response data structure and response codes specified
in table 6.1.3.3.4.4.2-2.
Table 6.1.3.3.4.4.2-1: Data structures supported by the POST Request Body on
this resource
* * *
Data type P Cardinality Description SmContextRetrieveData O 0..1 Optional
parameters used to retrieve the SM context, e.g. target MME capabilities.
* * *
Table 6.1.3.3.4.4.2-2: Data structures supported by the POST Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | SmContext | M | 1 | 200 OK | Successful | | RetrievedData | | | | retrieval of | | | | | | the SM | | | | | | context. | +---------------+---+-------------+---------------+---------------+ | P | M | 1 | 403 Forbidden | The \"cause\" | | roblemDetails | | | | attribute | | | | | | shall be set | | | | | | to one of the | | | | | | following | | | | | | application | | | | | | error: | | | | | | | | | | | | - | | | | | | TARGET_MM | | | | | | E_CAPABILITY | | | | | | | | | | | | See table | | | | | | 6.1.7.3-1 for | | | | | | the | | | | | | description | | | | | | of these | | | | | | errors. | +---------------+---+-------------+---------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the POST | | | | | | method listed | | | | | | in Table | | | | | | 5.2.7.1-1 of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | other than | | | | | | those | | | | | | specified in | | | | | | the table | | | | | | above also | | | | | | apply, with a | | | | | | P | | | | | | roblemDetails | | | | | | data type | | | | | | (see clause | | | | | | 5.2.7 of | | | | | | 3GPP TS 2 | | | | | | 9.500 [4]). | | | | | +---------------+---+-------------+---------------+---------------+
#### 6.1.3.5 Resource: PDU sessions collection (H-SMF)
##### 6.1.3.5.1 Description
This resource represents the collection of the individual PDU sessions created
in the H-SMF.
This resource is modelled with the Collection resource archetype (see clause
C.2 of 3GPP TS 29.501 [5]).
##### 6.1.3.5.2 Resource Definition
Resource URI: **{apiRoot}/nsmf-pdusession/{apiVersion}/pdu-sessions**
This resource shall support the resource URI variables defined in table
6.1.3.5.2-1.
Table 6.1.3.5.2-1: Resource URI variables for this resource
Name Definition
* * *
apiRoot See clause 6.1.1. apiVersion See clause 6.1.1.
##### 6.1.3.5.3 Resource Standard Methods
###### 6.1.3.5.3.1 POST
This method creates an individual PDU session resource in the H-SMF.
This method shall support the URI query parameters specified in table
6.1.3.5.3.1-1.
Table 6.1.3.5.3.1-1: URI query parameters supported by the POST method on this
resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
6.1.3.5.3.1-2 and the response data structures and response codes specified in
table 6.1.3.5.3.1-3.
Table 6.1.3.5.3.1-2: Data structures supported by the POST Request Body on
this resource
* * *
Data type P Cardinality Description PduSessionCreateData M 1 Representation of
the PDU session to be created in the H-SMF.
* * *
Table 6.1.3.5.3.1-3: Data structures supported by the POST Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | PduSessi | M | 1 | 201 Created | Successful | | onCreatedData | | | | creation of a | | | | | | PDU session. | +---------------+---+-------------+---------------+---------------+ | | | | 307 Temporary | Temporary | | | | | Redirect | redirection, | | | | | | during a UE | | | | | | requested PDU | | | | | | Session | | | | | | E | | | | | | stablishment. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing a | | | | | | different | | | | | | URI. The URI | | | | | | shall be an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance | | | | | | within the | | | | | | SMF that was | | | | | | selected by | | | | | | the AMF. | +---------------+---+-------------+---------------+---------------+ | | | | 308 Permanent | Permanent | | | | | Redirect | redirection, | | | | | | during a UE | | | | | | requested PDU | | | | | | Session | | | | | | E | | | | | | stablishment. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing a | | | | | | different | | | | | | URI. The URI | | | | | | shall be an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance | | | | | | within the | | | | | | SMF that was | | | | | | selected by | | | | | | the AMF. | +---------------+---+-------------+---------------+---------------+ | PduSessi | M | 1 | 400 Bad | The \"cause\" | | onCreateError | | | Request | attribute | | | | | | shall be set | | | | | | to one of the | | | | | | errors | | | | | | defined in | | | | | | Table | | | | | | 5.2.7.2-1 of | | | | | | 3GPP TS | | | | | | 29.500 [4]. | +---------------+---+-------------+---------------+---------------+ | PduSessi | M | 1 | 403 Forbidden | The \"cause\" | | onCreateError | | | | attribute | | | | | | shall be set | | | | | | to one of the | | | | | | following | | | | | | application | | | | | | error: | | | | | | | | | | | | - | | | | | | N1_SM_ERROR | | | | | | | | | | | | - | | | | | | S | | | | | | NSSAI_DENIED | | | | | | | | | | | | - | | | | | | DNN_DENIED | | | | | | | | | | | | - | | | | | | PD | | | | | | UTYPE_DENIED | | | | | | | | | | | | - | | | | | | SSC_DENIED | | | | | | | | | | | | - | | | | | | SUBSCRI | | | | | | PTION_DENIED | | | | | | | | | | | | - | | | | | | DNN_N | | | | | | OT_SUPPORTED | | | | | | | | | | | | - | | | | | | PDUTYPE_N | | | | | | OT_SUPPORTED | | | | | | | | | | | | - | | | | | | SSC_N | | | | | | OT_SUPPORTED | | | | | | | | | | | | - | | | | | | NO_EPS_5G | | | | | | S_CONTINUITY | | | | | | | | | | | | - | | | | | | INT | | | | | | EGRITY_PROTE | | | | | | CTED_MDR_NO | | | | | | T_ACCEPTABLE | | | | | | | | | | | | See table | | | | | | 6.1.7.3-1 for | | | | | | the | | | | | | description | | | | | | of these | | | | | | errors. | +---------------+---+-------------+---------------+---------------+ | PduSessi | M | 1 | 404 Not Found | The \"cause\" | | onCreateError | | | | attribute | | | | | | shall be set | | | | | | to one of the | | | | | | following | | | | | | application | | | | | | error: | | | | | | | | | | | | - | | | | | | CONTEX | | | | | | T_NOT_FOUND | | | | | | | | | | | | See table | | | | | | 6.1.7.3-1 for | | | | | | the | | | | | | description | | | | | | of these | | | | | | errors. | +---------------+---+-------------+---------------+---------------+ | PduSessi | M | 1 | 500 Internal | The \"cause\" | | onCreateError | | | Server Error | attribute | | | | | | shall be set | | | | | | to one of the | | | | | | errors | | | | | | defined in | | | | | | Table | | | | | | 5.2.7.2-1 of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | or to one of | | | | | | the following | | | | | | application | | | | | | errors: | | | | | | | | | | | | - | | | | | | INSUFFIC_RES | | | | | | OURCES_SLICE | | | | | | | | | | | | - | | | | | | INSUF | | | | | | FIC_RESOURCE | | | | | | S_SLICE_DNN | | | | | | | | | | | | See table | | | | | | 6.1.7.3-1 for | | | | | | the | | | | | | description | | | | | | of these | | | | | | errors. | +---------------+---+-------------+---------------+---------------+ | PduSessi | M | 1 | 503 Service | The \"cause\" | | onCreateError | | | Unavailable | attribute | | | | | | shall be set | | | | | | to one of the | | | | | | errors | | | | | | defined in | | | | | | Table | | | | | | 5.2.7.2-1 of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | or to one of | | | | | | the following | | | | | | application | | | | | | errors: | | | | | | | | | | | | - | | | | | | DN | | | | | | N_CONGESTION | | | | | | | | | | | | - S-NSSAI_ | | | | | | CONGESTION | | | | | | | | | | | | See table | | | | | | 6.1.7.3-1 for | | | | | | the | | | | | | description | | | | | | of these | | | | | | errors. | +---------------+---+-------------+---------------+---------------+ | PduSessi | M | 1 | 504 Gateway | The \"cause\" | | onCreateError | | | Timeout | attribute | | | | | | shall be set | | | | | | to one of the | | | | | | following | | | | | | application | | | | | | error: | | | | | | | | | | | | - | | | | | | PEER_NO | | | | | | T_RESPONDING | | | | | | | | | | | | - | | | | | | NET | | | | | | WORK_FAILURE | | | | | | | | | | | | See table | | | | | | 6.1.7.3-1 for | | | | | | the | | | | | | description | | | | | | of these | | | | | | errors. | +---------------+---+-------------+---------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the POST | | | | | | method listed | | | | | | in Table | | | | | | 5.2.7.1-1 of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | other than | | | | | | those | | | | | | specified in | | | | | | the table | | | | | | above also | | | | | | apply, with a | | | | | | P | | | | | | roblemDetails | | | | | | data type | | | | | | (see clause | | | | | | 5.2.7 of | | | | | | 3GPP TS 2 | | | | | | 9.500 [4]). | | | | | +---------------+---+-------------+---------------+---------------+
##### 6.1.3.5.4 Resource Custom Operations
###### 6.1.3.5.4.1 Overview
Table 6.1.3.5.4.1-1: Custom operations
Custom operaration URI Mapped HTTP method Description
* * *
n/a
#### 6.1.3.6 Resource: Individual PDU session (H-SMF)
##### 6.1.3.6.1 Description
This resource represents an individual PDU session created in the H-SMF.
This resource is modelled with the Document resource archetype (see clause C.1
of 3GPP TS 29.501 [5]).
##### 6.1.3.6.2 Resource Definition
Resource URI: **{apiRoot}/nsmf-pdusession/{apiVersion}/pdu-
sessions/{pduSessionRef}**
This resource shall support the resource URI variables defined in table
6.1.3.6.2-1.
Table 6.1.3.6.2-1: Resource URI variables for this resource
Name Definition
* * *
apiRoot See clause 6.1.1. apiVersion See clause 6.1.1. pduSessionRef PDU
session reference assigned by the H-SMF during the Create service operation.
##### 6.1.3.6.3 Resource Standard Methods
None.
##### 6.1.3.6.4 Resource Custom Operations
###### 6.1.3.6.4.1 Overview
Table 6.1.3.6.4.1-1: Custom operations
Custom operation URI Mapped HTTP method Description
* * *
{resourceUri}/modify POST Update service operation. {resourceUri}/release POST
Release service operation.
###### 6.1.3.6.4.2 Operation: modify
###### # 6.1.3.6.4.2.1 Description
###### # 6.1.3.6.4.2.2 Operation Definition
This custom operation updates an individual PDU session resource in the H-SMF
and/or provide the H-SMF with information received by the V-SMF in N1 SM
signalling from the UE.
This operation shall support the request data structures specified in table
6.1.3.6.4.2.2-1 and the response data structure and response codes specified
in table 6.1.3.6.4.2.2-2.
Table 6.1.3.6.4.2.2-1: Data structures supported by the POST Request Body on
this resource
Data type P Cardinality Description
* * *
HsmfUpdateData M 1 Representation of the updates to apply to the PDU session.
Table 6.1.3.6.4.2.2-2: Data structures supported by the POST Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +===============+===+=============+===============+===============+ | Hs | C | 0..1 | 200 OK | This case | | mfUpdatedData | | | | represents a | | | | | | successful | | | | | | update of the | | | | | | PDU session, | | | | | | when the | | | | | | H-SMF needs | | | | | | to return | | | | | | information | | | | | | in the | | | | | | response. | +---------------+---+-------------+---------------+---------------+ | | | | 204 No | This case | | | | | Content | represents a | | | | | | successful | | | | | | update of the | | | | | | PDU session, | | | | | | when the | | | | | | H-SMF does | | | | | | not need to | | | | | | return | | | | | | information | | | | | | in the | | | | | | response. | +---------------+---+-------------+---------------+---------------+ | Hs | M | 1 | 400 Bad | The \"cause\" | | mfUpdateError | | | Request | attribute | | | | | | shall be set | | | | | | to one of the | | | | | | errors | | | | | | defined in | | | | | | Table | | | | | | 5.2.7.2-1 of | | | | | | 3GPP TS | | | | | | 29.500 [4]. | +---------------+---+-------------+---------------+---------------+ | Hs | M | 1 | 403 Forbidden | The \"cause\" | | mfUpdateError | | | | attribute | | | | | | shall be set | | | | | | to one of the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | - | | | | | | N1_SM_ERROR | | | | | | | | | | | | - | | | | | | SUBSCRI | | | | | | PTION_DENIED | | | | | | | | | | | | - | | | | | | PD | | | | | | U_SESSION_A | | | | | | NCHOR_CHANGE | | | | | | | | | | | | See table | | | | | | 6.1.7.3-1 for | | | | | | the | | | | | | description | | | | | | of these | | | | | | errors. | +---------------+---+-------------+---------------+---------------+ | Hs | M | 1 | 404 Not Found | The \"cause\" | | mfUpdateError | | | | attribute | | | | | | shall be set | | | | | | to one of the | | | | | | following | | | | | | application | | | | | | error: | | | | | | | | | | | | - | | | | | | CONTEX | | | | | | T_NOT_FOUND | | | | | | | | | | | | See table | | | | | | 6.1.7.3-1 for | | | | | | the | | | | | | description | | | | | | of these | | | | | | errors. | +---------------+---+-------------+---------------+---------------+ | Hs | M | 1 | 500 Internal | The \"cause\" | | mfUpdateError | | | Server Error | attribute | | | | | | shall be set | | | | | | to one of the | | | | | | errors | | | | | | defined in | | | | | | Table | | | | | | 5.2.7.2-1 of | | | | | | 3GPP TS | | | | | | 29.500 [4]. | +---------------+---+-------------+---------------+---------------+ | Hs | M | 1 | 503 Service | The \"cause\" | | mfUpdateError | | | Unavailable | attribute | | | | | | shall be set | | | | | | to one of the | | | | | | errors | | | | | | defined in | | | | | | Table | | | | | | 5.2.7.2-1 of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | or to one of | | | | | | the following | | | | | | application | | | | | | errors: | | | | | | | | | | | | - | | | | | | DN | | | | | | N_CONGESTION | | | | | | | | | | | | - S-NSSAI_ | | | | | | CONGESTION | | | | | | | | | | | | See table | | | | | | 6.1.7.3-1 for | | | | | | the | | | | | | description | | | | | | of these | | | | | | errors. | +---------------+---+-------------+---------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the POST | | | | | | method listed | | | | | | in Table | | | | | | 5.2.7.1-1 of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | other than | | | | | | those | | | | | | specified in | | | | | | the table | | | | | | above also | | | | | | apply, with a | | | | | | P | | | | | | roblemDetails | | | | | | data type | | | | | | (see clause | | | | | | 5.2.7 of | | | | | | 3GPP TS 2 | | | | | | 9.500 [4]). | | | | | +---------------+---+-------------+---------------+---------------+
###### 6.1.3.6.4.3 Operation: release
###### # 6.1.3.6.4.3.1 Description
###### # 6.1.3.6.4.3.2 Operation Definition
This custom operation releases an individual PDU session resource in the
H-SMF, in HR roaming scenario.
This operation shall support the request data structures specified in table
6.1.3.6.4.3.2-1 and the response data structure and response codes specified
in table 6.1.3.6.4.3.2-2.
Table 6.1.3.6.4.3.2-1: Data structures supported by the POST Request Body on
this resource
* * *
Data type P Cardinality Description ReleaseData C 0..1 Representation of the
data to be sent to the H-SMF when releasing the PDU session.
* * *
Table 6.1.3.6.4.3.2-2: Data structures supported by the POST Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | | | | 204 No | Successful | | | | | Content | release of a | | | | | | PDU session. | +---------------+---+-------------+---------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the POST | | | | | | method listed | | | | | | in Table | | | | | | 5.2.7.1-1 of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | other than | | | | | | those | | | | | | specified in | | | | | | the table | | | | | | above also | | | | | | apply, with a | | | | | | P | | | | | | roblemDetails | | | | | | data type | | | | | | (see clause | | | | | | 5.2.7 of | | | | | | 3GPP TS 2 | | | | | | 9.500 [4]). | | | | | +---------------+---+-------------+---------------+---------------+
#### 6.1.3.7 Resource: Individual PDU session (V-SMF)
##### 6.1.3.7.1 Description
This resource represents an individual PDU session created in the V-SMF.
This resource is modelled with the Document resource archetype (see clause C.1
of 3GPP TS 29.501 [5]).
##### 6.1.3.7.2 Resource Definition
Resource URI: **{vsmfPduSessionUri}**
This resource shall support the resource URI variables defined in table
6.1.3.7.2-1.
Table 6.1.3.7.2-1: Resource URI variables for this resource
Name Definition
* * *
vsmfPduSessionUri PDU session reference assigned by the V-SMF during the
Create service operation.
##### 6.1.3.7.3 Resource Standard Methods
###### 6.1.3.7.3.1 POST
This method sends a status notification to the NF Service Consumer.
This method shall support the URI query parameters specified in table
6.1.3.7.3.1-1.
Table 6.1.3.7.3.1-1: URI query parameters supported by the POST method on this
resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
6.1.3.7.3.1-2 and the response data structures and response codes specified in
table 6.1.3.7.3.1-3.
Table 6.1.3.7.3.1-2: Data structures supported by the POST Request Body on
this resource
* * *
Data type P Cardinality Description StatusNotification M 1 Representation of
the status notification.
* * *
Table 6.1.3.7.3.1-3: Data structures supported by the POST Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | | | | 204 No | Successful | | | | | Content | notification | | | | | | of status | | | | | | change | +---------------+---+-------------+---------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the POST | | | | | | method listed | | | | | | in Table | | | | | | 5.2.7.1-1 of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | other than | | | | | | those | | | | | | specified in | | | | | | the table | | | | | | above also | | | | | | apply, with a | | | | | | P | | | | | | roblemDetails | | | | | | data type | | | | | | (see clause | | | | | | 5.2.7 of | | | | | | 3GPP TS 2 | | | | | | 9.500 [4]). | | | | | +---------------+---+-------------+---------------+---------------+
##### 6.1.3.7.4 Resource Custom Operations
###### 6.1.3.7.4.1 Overview
Table 6.1.3.7.4.1-1: Custom operations
Custom operation URI Mapped HTTP method Description
* * *
{vsmfPduSessionUri}/modify POST Update service operation (initiated by H-SMF)
###### 6.1.3.7.4.2 Operation: modify
###### # 6.1.3.7.4.2.1 Description
###### # 6.1.3.7.4.2.2 Operation Definition
This custom operation modifies an individual PDU session resource in the
V-SMF, in HR roaming scenario.
This operation shall support the request data structures specified in table
6.1.3.7.4.2.2-1 and the response data structure and response codes specified
in table 6.1.3.7.4.2.2-2.
Table 6.1.3.7.4.2.2-1: Data structures supported by the POST Request Body on
this resource
* * *
Data type P Cardinality Description VsmfUpdateData M 1 Representation of the
updates to apply to the PDU session.
* * *
Table 6.1.3.7.4.2.2-2: Data structures supported by the POST Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | Vs | M | 1 | 200 OK | This case | | mfUpdatedData | | | | represents a | | | | | | successful | | | | | | update of the | | | | | | PDU session, | | | | | | when the | | | | | | V-SMF needs | | | | | | to return | | | | | | information | | | | | | in the | | | | | | response. | +---------------+---+-------------+---------------+---------------+ | | | | 204 No | This case | | | | | Content | represents a | | | | | | successful | | | | | | update of the | | | | | | PDU session, | | | | | | when the | | | | | | V-SMF does | | | | | | not need to | | | | | | return | | | | | | information | | | | | | in the | | | | | | response. | +---------------+---+-------------+---------------+---------------+ | Vs | M | 1 | 400 Bad | The \"cause\" | | mfUpdateError | | | Request | attribute | | | | | | shall be set | | | | | | to one of the | | | | | | errors | | | | | | defined in | | | | | | Table | | | | | | 5.2.7.2-1 of | | | | | | 3GPP TS | | | | | | 29.500 [4]. | +---------------+---+-------------+---------------+---------------+ | Vs | M | 1 | 403 Forbidden | The \"cause\" | | mfUpdateError | | | | attribute | | | | | | shall be set | | | | | | to one of the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | - | | | | | | N1_SM_ERROR | | | | | | | | | | | | - | | | | | | UNABLE\ | | | | | | _TO_PAGE_UE | | | | | | | | | | | | - | | | | | | UE_NO | | | | | | T_RESPONDING | | | | | | | | | | | | - | | | | | | REJ | | | | | | ECTED_BY_UE | | | | | | | | | | | | - | | | | | | RE | | | | | | JECTED_DUE_ | | | | | | VPLMN_POLICY | | | | | | | | | | | | - | | | | | | HO_TAU\ | | | | | | _IN_PROGRESS | | | | | | | | | | | | - | | | | | | E | | | | | | BI_EXHAUSTED | | | | | | | | | | | | - | | | | | | EBI | | | | | | _REJECTED_L | | | | | | OCAL_POLICY, | | | | | | if the EBI | | | | | | allocation | | | | | | was rejected | | | | | | due to local | | | | | | policies at | | | | | | the AMF as | | | | | | specified in | | | | | | clause | | | | | | 4.11.1.4.1 of | | | | | | 3GPP TS | | | | | | 23.502 [3]. | | | | | | | | | | | | - | | | | | | EBI_REJEC | | | | | | TED_NO_N26, | | | | | | if the EBI | | | | | | allocation | | | | | | was rejected | | | | | | when the AMF | | | | | | is in a | | | | | | serving PLMN | | | | | | that does not | | | | | | support | | | | | | 5GS-EPS | | | | | | interworking | | | | | | procedures | | | | | | with N26 | | | | | | interface as | | | | | | specified in | | | | | | clause | | | | | | 5.17.2.3.1 of | | | | | | 3GPP TS | | | | | | 23.501 [2]. | | | | | | | | | | | | See table | | | | | | 6.1.7.3-1 for | | | | | | the | | | | | | description | | | | | | of these | | | | | | errors. | +---------------+---+-------------+---------------+---------------+ | Vs | M | 1 | 404 Not Found | The \"cause\" | | mfUpdateError | | | | attribute | | | | | | shall be set | | | | | | to one of the | | | | | | following | | | | | | application | | | | | | error: | | | | | | | | | | | | - | | | | | | CONTEX | | | | | | T_NOT_FOUND | | | | | | | | | | | | See table | | | | | | 6.1.7.3-1 for | | | | | | the | | | | | | description | | | | | | of these | | | | | | errors. | +---------------+---+-------------+---------------+---------------+ | Vs | M | 1 | 500 Internal | The \"cause\" | | mfUpdateError | | | Server Error | attribute | | | | | | shall be set | | | | | | to one of the | | | | | | errors | | | | | | defined in | | | | | | Table | | | | | | 5.2.7.2-1 of | | | | | | 3GPP TS | | | | | | 29.500 [4]. | +---------------+---+-------------+---------------+---------------+ | Vs | M | 1 | 503 Service | The \"cause\" | | mfUpdateError | | | Unavailable | attribute | | | | | | shall be set | | | | | | to one of the | | | | | | errors | | | | | | defined in | | | | | | Table | | | | | | 5.2.7.2-1 of | | | | | | 3GPP TS | | | | | | 29.500 [4]. | +---------------+---+-------------+---------------+---------------+ | Vs | M | 1 | 504 Gateway | The \"cause\" | | mfUpdateError | | | Timeout | attribute | | | | | | shall be set | | | | | | to one of the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | - | | | | | | PEER_NO | | | | | | T_RESPONDING | | | | | | | | | | | | - | | | | | | NET | | | | | | WORK_FAILURE | | | | | | | | | | | | See table | | | | | | 6.1.7.3-1 for | | | | | | the | | | | | | description | | | | | | of these | | | | | | errors. | +---------------+---+-------------+---------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the POST | | | | | | method listed | | | | | | in Table | | | | | | 5.2.7.1-1 of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | other than | | | | | | those | | | | | | specified in | | | | | | the table | | | | | | above also | | | | | | apply, with a | | | | | | P | | | | | | roblemDetails | | | | | | data type | | | | | | (see clause | | | | | | 5.2.7 of | | | | | | 3GPP TS 2 | | | | | | 9.500 [4]). | | | | | +---------------+---+-------------+---------------+---------------+
### 6.1.4 Custom Operations without associated resources
None.
### 6.1.5 Notifications
#### 6.1.5.1 General
This clause specifies the notifications provided by the Nsmf_PDUSession
service.
The delivery of notifications shall be supported as specified in clause 6.2 of
3GPP TS 29.500 [4] for Server-initiated communication.
Table 6.1.5.1-1: Notifications overview
+----------------+----------------+----------------+----------------+ | Notification | Resource URI | HTTP method or | Description | | | | custom | | | | | operation | (service | | | | | operation) | +================+================+================+================+ | SM context | {smCon | POST | Notify SM | | status | textStatusUri} | | Context Status | | notification | | | | | | (NF Service | | | | | Consumer | | | | | provided | | | | | callback | | | | | reference) | | | +----------------+----------------+----------------+----------------+
#### 6.1.5.2 SM Context Status Notification
##### 6.1.5.2.1 Description
If the NF Service Consumer (e.g AMF) has provided the callback URI for getting
notified about change of SM context status, the SMF shall notify the NF
Service Consumer when the SM context status information is updated.
##### 6.1.5.2.2 Notification Definition
The POST method shall be used for SM context status notification and the URI
shall be the callback reference provided by the NF Service Consumer during the
subscription to this notification.
Resource URI: **{smContextStatusUri}**
Support of URI query parameters is specified in table 6.1.5.2.2-1.
Table 6.1.5.2.2-1: URI query parameters supported by the POST method
* * *
Name Data type P Cardinality Description n/a
* * *
Support of request data structures is specified in table 6.1.5.2.2-2, and
support of response data structures and response codes is specified in table
6.1.5.2-3.
Table 6.1.5.2.2-2: Data structures supported by the POST Request Body
* * *
Data type P Cardinality Description SmContextStatusNotification M 1
Representation of the SM context status notification.
* * *
Table 6.1.5.2.2-3: Data structures supported by the POST Response Body
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | Successful | | | | | Content | notification | | | | | | of the SM | | | | | | context | | | | | | status change | +---------------+---+-------------+---------------+---------------+ | n/a | | | 307 Temporary | The NF | | | | | Redirect | service | | | | | | consumer | | | | | | shall | | | | | | generate a | | | | | | Location | | | | | | header field | | | | | | containing a | | | | | | URI pointing | | | | | | to the | | | | | | endpoint of | | | | | | another NF | | | | | | service | | | | | | consumer to | | | | | | which the | | | | | | notification | | | | | | should be | | | | | | sent. | +---------------+---+-------------+---------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the POST | | | | | | method listed | | | | | | in Table | | | | | | 5.2.7.1-1 of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | other than | | | | | | those | | | | | | specified in | | | | | | the table | | | | | | above also | | | | | | apply, with a | | | | | | P | | | | | | roblemDetails | | | | | | data type | | | | | | (see clause | | | | | | 5.2.7 of | | | | | | 3GPP TS 2 | | | | | | 9.500 [4]). | | | | | +---------------+---+-------------+---------------+---------------+
### 6.1.6 Data Model
#### 6.1.6.1 General
This clause specifies the application data model supported by the API.
Table 6.1.6.1-1 specifies the data types defined for the Nsmf service based
interface protocol.
Table 6.1.6.1-1: Nsmf specific Data Types
Data type Clause defined Description
* * *
SmContextCreateData 6.1.6.2.2 Information within Create SM Context Request
SmContextCreatedData 6.1.6.2.3 Information within Create SM Context Response
SmContextUpdateData 6.1.6.2.4 Information within Update SM Context Request
SmContextUpdatedData 6.1.6.2.5 Information within Update SM Context Response
SmContextReleaseData 6.1.6.2.6 Information within Release SM Context Request
SMContextRetrieveData 6.1.6.2.7 Information within Retrieve SM Context Request
SmContextStatusNotification 6.1.6.2.8 Information within Notify SM Context
Status Request PduSessionCreateData 6.1.6.2.9 Information within Create
Request PduSessionCreatedData 6.1.6.2.10 Information within Create Response
HsmfUpdateData 6.1.6.2.11 Information within Update Request towards H-SMF
HsmfUpdatedData 6.1.6.2.12 Information within Update Response from H-SMF
ReleaseData 6.1.6.2.13 Information within Release Request HsmfUpdateError
6.1.6.2.14 Error within Update Response from H-SMF VsmfUpdateData 6.1.6.2.15
Information within Update Request towards V-SMF VsmfUpdatedData 6.1.6.2.16
Information within Update Response from V-SMF StatusNotification 6.1.6.2.17
Information within Notify Status Request QosFlowItem 6.1.6.2.18 Individual QoS
flow QosFlowSetupItem 6.1.6.2.19 Individual QoS flow to setup
QosFlowAddModifyRequestItem 6.1.6.2.20 Individual QoS flow requested to be
created or modified QosFlowReleaseRequestItem 6.1.6.2.21 Individual QoS flow
requested to be released QosFlowProfile 6.1.6.2.22 QoS flow profile
GbrQosFlowInformation 6.1.6.2.23 GBR QoS flow information QosFlowNotifyItem
6.1.6.2.24 Notification related to a QoS flow SMContextRetrievedData
6.1.6.2.27 Information within Retrieve SM Context Response TunnelInfo
6.1.6.2.28 Tunnel Information StatusInfo 6.1.6.2.29 Status of SM context or of
PDU session VsmfUpdateError 6.1.6.2.30 Error within Update Response from V-SMF
EpsPdnCnxInfo 6.1.6.2.31 EPS PDN Connection Information from H-SMF to V-SMF
EpsBearerInfo 6.1.6.2.32 EPS Bearer Information from H-SMF to V-SMF
PduSessionNotifyItem 6.1.6.2.33 Notification related to a PDU session
EbiArpMapping 6.1.6.2.34 EBI to ARP mapping SmContextCreateError 6.1.6.2.35
Error within Create SM Context Response SmContextUpdateError 6.1.6.2.36 Error
within Update SM Context Response PduSessionCreateError 6.1.6.2.37 Error
within Create Response MmeCapabilities 6.1.6.2.38 MME capabilities GtpTeid
6.1.6.3.2 GTP Tunnel Endpoint Identifier ProcedureTransactionId 6.1.6.3.2
Procedure Transaction Identifier EpsPdnCnxContainer 6.1.6.3.2 UE EPS PDN
Connection container from SMF to AMF EpsBearerId 6.1.6.3.2 EPS Bearer Id
EpsBearerContainer 6.1.6.3.2 EPS Bearer container from SMF to AMF UpCnxState
6.1.6.3.3 User Plane Connection State HoState 6.1.6.3.4 Handover State
RequestType 6.1.6.3.5 Request Type in Create (SM context) service operation.
RequestIndication 6.1.6.3.6 Request Indication in Update (SM context) service
operation. NotificationCause 6.1.6.3.7 Cause for generating a notification
Cause 6.1.6.3.8 Cause information ResourceStatus 6.1.6.3.9 Status of SM
context or PDU session resource DnnSelectionMode 6.1.6.3.10 DNN Selection Mode
EpsInterworkingIndication 6.1.6.3.11 EPS Interworking Indication N2SmInfoType
6.1.6.3.12 N2 SM Information Type MaxIntegrityProtectedDataRate 6.1.6.3.13
Maximum Integrity Protected Data Rate
Table 6.1.6.1-2 specifies data types re-used by the Nsmf service based
interface protocol from other specifications, including a reference to their
respective specifications and when needed, a short description of their use
within the Nsmf service based interface.
Table 6.1.6.1-2: Nsmf re-used Data Types
Data type Reference Comments
* * *
Uint32 3GPP TS 29.571 [13] Unsigned 32-bit integers Ipv4Addr 3GPP TS 29.571
[13] IPv4 Address Ipv6Prefix 3GPP TS 29.571 [13] IPv6 Prefix Uri 3GPP TS
29.571 [13] Uniform Resource Identifier Supi 3GPP TS 29.571 [13] Subscription
Permanent Identifier Pei 3GPP TS 29.571 [13] Permanent Equipment Identifier
Gpsi 3GPP TS 29.571 [13] General Public Subscription Identifier AccessType
3GPP TS 29.571 [13] Access Type (3GPP or non-3GPP access) SupportedFeatures
3GPP TS 29.571 [13] Supported features Qfi 3GPP TS 29.571 [13] QoS Flow
Identifier pduSessionId 3GPP TS 29.571 [13] PDU Session Identifier
pduSessionType 3GPP TS 29.571 [13] PDU Session Type Ambr 3GPP TS 29.571 [13]
PDU Session Aggregate Maximum Bit Rate 5Qi 3GPP TS 29.571 [13] 5G QoS
Identifier Arp 3GPP TS 29.571 [13] Allocation and Retention Priority
ReflectiveQoSAttribute 3GPP TS 29.571 [13] Reflective QoS Attribute Dynamic5Qi
3GPP TS 29.571 [13] QoS characteristics for a 5QI that is neither standardized
nor pre-configured. NonDynamic5Qi 3GPP TS 29.571 [13] QoS characteristics that
replace the default QoS characteristics for a standardized or pre-configured
5QI. PacketLossRate 3GPP TS 29.571 [13] Packet Loss Rate NotificationControl
3GPP TS 29.571 [13] Notification Control Dnn 3GPP TS 29.571 [13] Data Network
Name Snssai 3GPP TS 29.571 [13] Single Network Slice Selection Assistance
Information NfInstanceId 3GPP TS 29.571 [13] NF Instance Identifier
UserLocation 3GPP TS 29.571 [13] User Location TimeZone 3GPP TS 29.571 [13]
Time Zone ProblemDetails 3GPP TS 29.571 [13] Error description UpSecurity 3GPP
TS 29.571 [13] User Plane Security Policy Enforcement information
RefToBinaryData 3GPP TS 29.571 [13] Cross-Reference to binary data encoded
within a binary body part in an HTTP multipart message. Guami 3GPP TS 29.571
[13] **Globally Unique AMF ID** BackupAmfInfo 3GPP TS 29.571 [13] Backup AMF
Information PresenceState 3GPP TS 29.571 [13] Indicates the UE presence in or
out of a LADN service area TraceData 3GPP TS 29.571 [13] Trace control and
configuration parameters PlmnId 3GPP TS 29.571 [13] PLMN Identity RatType 3GPP
TS 29.571 [13] RAT Type NgApCause 3GPP TS 29.571 [13] NGAP Cause 5GMmCause
3GPP TS 29.571 [13] 5G MM Cause DurationSec 3GPP TS 29.571 [13] Duration in
units of seconds AdditionalQosFlowInfo 3GPP TS 29.571 [13] Additional QoS Flow
Information NfGroupId 3GPP TS 29.571 [13] Network Function Group Id
SecondaryRatUsageReport 3GPP TS 29.571 [13] Secondary RAT Usage Report
SecondaryRatUsageInfo 3GPP TS 29.571 [13] Secondary RAT Usage Information
ServiceName 3GPP TS 29.510 [19] Service Name NgRanTargetId 3GPP TS 29.518 [20]
NG-RAN Target Id RoamingChargingProfile 3GPP TS 32.291 [26] Roaming Charging
Profile
#### 6.1.6.2 Structured data types
##### 6.1.6.2.1 Introduction
This clause defines the structures to be used in resource representations.
##### 6.1.6.2.2 Type: SmContextCreateData
Table 6.1.6.2.2-1: Definition of type SmContextCreateData
+---------------+---------------+---+-------------+---------------+ | Attribute | Data type | P | Cardinality | Description | | name | | | | | +===============+===============+===+=============+===============+ | supi | Supi | C | 0..1 | This IE shall | | | | | | be present, | | | | | | except if the | | | | | | UE is | | | | | | emergency | | | | | | registered | | | | | | and UICCless. | | | | | | | | | | | | When present, | | | | | | it shall | | | | | | contain the | | | | | | subscriber | | | | | | permanent | | | | | | identify. | +---------------+---------------+---+-------------+---------------+ | unauth | boolean | C | 0..1 | This IE shall | | enticatedSupi | | | | be present if | | | | | | the SUPI is | | | | | | present in | | | | | | the message | | | | | | but is not | | | | | | authenticated | | | | | | and is for an | | | | | | emergency | | | | | | registered | | | | | | UE. | | | | | | | | | | | | When present, | | | | | | it shall be | | | | | | set as | | | | | | follows: | | | | | | | | | | | | > \- true: | | | | | | > un | | | | | | authenticated | | | | | | > SUPI; | | | | | | > | | | | | | > \- false | | | | | | > (default): | | | | | | > | | | | | | authenticated | | | | | | > SUPI. | +---------------+---------------+---+-------------+---------------+ | pei | Pei | C | 0..1 | This IE shall | | | | | | be present if | | | | | | the UE is | | | | | | emergency | | | | | | registered | | | | | | and it is | | | | | | either | | | | | | UIClless or | | | | | | the SUPI is | | | | | | not | | | | | | a | | | | | | uthenticated. | | | | | | | | | | | | For all other | | | | | | cases, this | | | | | | IE shall be | | | | | | present if it | | | | | | is available. | | | | | | | | | | | | When present, | | | | | | it shall | | | | | | contain the | | | | | | permanent | | | | | | equipment | | | | | | identifier. | +---------------+---------------+---+-------------+---------------+ | gpsi | Gpsi | C | 0..1 | This IE shall | | | | | | be present if | | | | | | it is | | | | | | available. | | | | | | When present, | | | | | | it shall | | | | | | contain the | | | | | | user\'s GPSI. | +---------------+---------------+---+-------------+---------------+ | pduSessionId | PduSessionId | C | 0..1 | This IE shall | | | | | | be present, | | | | | | except during | | | | | | an EPS to 5GS | | | | | | Idle mode | | | | | | mobility or | | | | | | handover | | | | | | using the N26 | | | | | | interface. | | | | | | | | | | | | When present, | | | | | | it shall | | | | | | contain the | | | | | | PDU Session | | | | | | ID. | +---------------+---------------+---+-------------+---------------+ | dnn | Dnn | C | 0..1 | This IE shall | | | | | | be present, | | | | | | except during | | | | | | an EPS to 5GS | | | | | | Idle mode | | | | | | mobility or | | | | | | handover | | | | | | using the N26 | | | | | | interface. | | | | | | | | | | | | When present, | | | | | | it shall | | | | | | contain the | | | | | | requested | | | | | | DNN. | +---------------+---------------+---+-------------+---------------+ | sNssai | Snssai | C | 0..1 | This IE shall | | | | | | be present | | | | | | during the | | | | | | PDU session | | | | | | establishment | | | | | | procedure. In | | | | | | this case, it | | | | | | shall contain | | | | | | the requested | | | | | | S-NSSAI for | | | | | | the serving | | | | | | PLMN. This | | | | | | corresponds | | | | | | to an S-NSSAI | | | | | | from the | | | | | | allowed | | | | | | NSSAI. | | | | | | | | | | | | This IE shall | | | | | | also be | | | | | | present | | | | | | during an EPS | | | | | | to 5GS idle | | | | | | mode mobility | | | | | | or handover | | | | | | using the N26 | | | | | | interface. In | | | | | | this case, it | | | | | | shall contain | | | | | | the S-NSSAI | | | | | | configured in | | | | | | the AMF for | | | | | | EPS | | | | | | interworking. | +---------------+---------------+---+-------------+---------------+ | hplmnSnssai | Snssai | C | 0..1 | This IE shall | | | | | | be present | | | | | | for a roaming | | | | | | PDU session, | | | | | | except during | | | | | | an EPS to 5GS | | | | | | idle mode | | | | | | mobility or | | | | | | handover | | | | | | using the N26 | | | | | | interface. | | | | | | | | | | | | When present, | | | | | | it shall | | | | | | contain the | | | | | | requested | | | | | | S-NSSAI for | | | | | | the HPLMN. | | | | | | This | | | | | | corresponds | | | | | | to an S-NSSAI | | | | | | from the | | | | | | Mapping Of | | | | | | Allowed NSSAI | | | | | | corresponding | | | | | | to the SNSSAI | | | | | | value | | | | | | included in | | | | | | the sNssai | | | | | | IE. | +---------------+---------------+---+-------------+---------------+ | servingNfId | NfInstanceId | M | 1 | This IE shall | | | | | | contain the | | | | | | identifier of | | | | | | the serving | | | | | | NF (e.g. | | | | | | serving AMF). | +---------------+---------------+---+-------------+---------------+ | guami | Guami | C | 0..1 | This IE shall | | | | | | contain the | | | | | | serving | | | | | | AMF\'s GUAMI. | | | | | | | | | | | | It shall be | | | | | | included if | | | | | | the NF | | | | | | service | | | | | | consumer is | | | | | | an AMF. | +---------------+---------------+---+-------------+---------------+ | serviceName | ServiceName | O | 0..1 | When present, | | | | | | this IE shall | | | | | | contain the | | | | | | name of the | | | | | | AMF service | | | | | | to which SM | | | | | | context | | | | | | status | | | | | | notifications | | | | | | are to be | | | | | | sent (see | | | | | | clause | | | | | | 6.5.2.2 of | | | | | | 3GPP TS 2 | | | | | | 9.500 [4]). | | | | | | This IE may | | | | | | be included | | | | | | if the NF | | | | | | service | | | | | | consumer is | | | | | | an AMF. | +---------------+---------------+---+-------------+---------------+ | s | PlmnId | M | 1 | This IE shall | | ervingNetwork | | | | contain the | | | | | | serving core | | | | | | network | | | | | | operator PLMN | | | | | | ID. | +---------------+---------------+---+-------------+---------------+ | requestType | RequestType | C | 0..1 | This IE shall | | | | | | be present if | | | | | | the request | | | | | | relates to an | | | | | | existing PDU | | | | | | session or an | | | | | | existing | | | | | | emergency PDU | | | | | | session, | | | | | | except during | | | | | | an EPS to 5GS | | | | | | idle mode | | | | | | mobility or | | | | | | handover | | | | | | using the N26 | | | | | | interface. It | | | | | | may be | | | | | | present | | | | | | otherwise. | | | | | | | | | | | | When present, | | | | | | it shall | | | | | | indicate | | | | | | whether the | | | | | | request | | | | | | refers to a | | | | | | new PDU | | | | | | session or | | | | | | emergency PDU | | | | | | session, or | | | | | | to an | | | | | | existing PDU | | | | | | session or | | | | | | emergency PDU | | | | | | session. | +---------------+---------------+---+-------------+---------------+ | n1SmMsg | Re | C | 0..1 | This IE shall | | | fToBinaryData | | | be present | | | | | | and reference | | | | | | the N1 SM | | | | | | Message | | | | | | binary data | | | | | | (see clause | | | | | | 6.1.6.4.2), | | | | | | except during | | | | | | an EPS to 5GS | | | | | | Idle mode | | | | | | mobility or | | | | | | handover | | | | | | using N26. | +---------------+---------------+---+-------------+---------------+ | anType | AccessType | M | 1 | This IE shall | | | | | | indicate the | | | | | | Access | | | | | | Network Type | | | | | | to which the | | | | | | PDU session | | | | | | is to be | | | | | | associated. | +---------------+---------------+---+-------------+---------------+ | ratType | RatType | C | 0..1 | This IE shall | | | | | | be present | | | | | | and indicate | | | | | | the RAT Type | | | | | | used by the | | | | | | UE, if | | | | | | available. | +---------------+---------------+---+-------------+---------------+ | p | PresenceState | C | 0..1 | This IE shall | | resenceInLadn | | | | be present if | | | | | | the DNN | | | | | | corresponds | | | | | | to a LADN. | | | | | | When present, | | | | | | it shall be | | | | | | set to \"IN\" | | | | | | or \"OUT\" to | | | | | | indicate that | | | | | | the UE is in | | | | | | or out of the | | | | | | LADN service | | | | | | area. | +---------------+---------------+---+-------------+---------------+ | ueLocation | UserLocation | C | 0..1 | This IE shall | | | | | | contain the | | | | | | UE location | | | | | | information, | | | | | | if it is | | | | | | available. | | | | | | See NOTE. | +---------------+---------------+---+-------------+---------------+ | ueTimeZone | TimeZone | C | 0..1 | This IE shall | | | | | | contain the | | | | | | UE Time Zone, | | | | | | if it is | | | | | | available. | +---------------+---------------+---+-------------+---------------+ | addUeLocation | UserLocation | O | 0..1 | Additional UE | | | | | | location. | | | | | | | | | | | | This IE may | | | | | | be present, | | | | | | if anType | | | | | | indicates a | | | | | | non-3GPP | | | | | | access and | | | | | | valid 3GPP | | | | | | access user | | | | | | location | | | | | | information | | | | | | is available. | | | | | | | | | | | | When present, | | | | | | it shall | | | | | | contain: | | | | | | | | | | | | - the last | | | | | | known 3GPP | | | | | | access user | | | | | | location; and | | | | | | | | | | | | - the | | | | | | timestamp, if | | | | | | available, | | | | | | indicating | | | | | | the UTC time | | | | | | when the | | | | | | addUeLocation | | | | | | information | | | | | | was acquired. | | | | | | | | | | | | (NOTE) | +---------------+---------------+---+-------------+---------------+ | smCon | Uri | M | 1 | This IE shall | | textStatusUri | | | | include the | | | | | | callback URI | | | | | | to receive | | | | | | notification | | | | | | of SM context | | | | | | status. | +---------------+---------------+---+-------------+---------------+ | hSmfUri | Uri | C | 0..1 | This IE shall | | | | | | be present in | | | | | | HR roaming | | | | | | scenarios. | | | | | | When present, | | | | | | it shall | | | | | | contain the | | | | | | URI of the | | | | | | Nsm | | | | | | f_PDUSession | | | | | | service of | | | | | | the selected | | | | | | H-SMF. The | | | | | | URI shall be | | | | | | formatted as | | | | | | specified in | | | | | | clause 6.1.1. | +---------------+---------------+---+-------------+---------------+ | ol | PduSessionId | C | 0..1 | This IE shall | | dPduSessionId | | | | be present if | | | | | | this | | | | | | information | | | | | | is received | | | | | | from the UE. | | | | | | | | | | | | When present, | | | | | | it shall | | | | | | contain the | | | | | | old PDU | | | | | | Session ID | | | | | | received from | | | | | | the UE. See | | | | | | clauses | | | | | | 4.3.2.2.1 and | | | | | | 4.3.5.2 of | | | | | | 3GPP TS | | | | | | 23.502 [3]. | +---------------+---------------+---+-------------+---------------+ | pduSession | array( | C | 1..N | This IE shall | | sActivateList | PduSessionId) | | | be present, | | | | | | during an EPS | | | | | | to 5GS Idle | | | | | | mode mobility | | | | | | using the N26 | | | | | | interface, if | | | | | | the UE | | | | | | indicated PDU | | | | | | session(s) to | | | | | | be activated | | | | | | in the | | | | | | Registration | | | | | | Request. | | | | | | | | | | | | When present, | | | | | | it shall | | | | | | indicate all | | | | | | the PDU | | | | | | session(s) | | | | | | requested to | | | | | | be | | | | | | re-activated | | | | | | by the UE. | +---------------+---------------+---+-------------+---------------+ | ueEps | EpsPd | C | 0..1 | This IE shall | | PdnConnection | nCnxContainer | | | be present, | | | | | | during an EPS | | | | | | to 5GS Idle | | | | | | mode mobility | | | | | | or handover | | | | | | using the N26 | | | | | | interface. | | | | | | | | | | | | When present, | | | | | | it shall | | | | | | contain an | | | | | | MME/SGSN UE | | | | | | EPS PDN | | | | | | connection | | | | | | including the | | | | | | EPS bearer | | | | | | context(s). | +---------------+---------------+---+-------------+---------------+ | hoState | HoState | C | 0..1 | This IE shall | | | | | | be present | | | | | | during an EPS | | | | | | to 5GS | | | | | | handover | | | | | | using N26 | | | | | | interface, to | | | | | | request the | | | | | | preparation | | | | | | of a handover | | | | | | of the PDU | | | | | | session. | | | | | | | | | | | | When present, | | | | | | it shall be | | | | | | set as | | | | | | specified in | | | | | | clause | | | | | | 5.2.2.2.3. | +---------------+---------------+---+-------------+---------------+ | addi | array(Uri) | O | 1..N | This IE may | | tionalHsmfUri | | | | be present in | | | | | | HR roaming | | | | | | scenarios. | | | | | | When present, | | | | | | it shall | | | | | | contain an | | | | | | array of URI | | | | | | of the | | | | | | Nsm | | | | | | f_PDUSession | | | | | | service of | | | | | | the | | | | | | additional | | | | | | H-SMFs | | | | | | discovered by | | | | | | the AMF for | | | | | | the given | | | | | | DNN, | | | | | | hplmnSnssai | | | | | | and for this | | | | | | PDU session. | | | | | | If provided, | | | | | | the V-SMF | | | | | | shall use | | | | | | these | | | | | | additional | | | | | | H-SMF(s) if | | | | | | the V-SMF is | | | | | | not able to | | | | | | receive any | | | | | | response from | | | | | | the H-SMF | | | | | | identified by | | | | | | hSmfUri. | | | | | | | | | | | | The URI shall | | | | | | be formatted | | | | | | as specified | | | | | | in clause | | | | | | 6.1.1. | +---------------+---------------+---+-------------+---------------+ | pcfId | NfInstanceId | O | 0..1 | When present, | | | | | | this IE shall | | | | | | contain the | | | | | | identifier of | | | | | | the PCF | | | | | | selected by | | | | | | the AMF for | | | | | | the UE (for | | | | | | Access and | | | | | | Mobility | | | | | | Policy | | | | | | Control); it | | | | | | shall be the | | | | | | V-PCF in LBO | | | | | | roaming and | | | | | | the H-PCF in | | | | | | HR roaming. | +---------------+---------------+---+-------------+---------------+ | nrfUri | Uri | O | 0..1 | This IE may | | | | | | be present to | | | | | | indicate the | | | | | | NRF to use | | | | | | for PCF | | | | | | selection | | | | | | within the | | | | | | same network | | | | | | slice | | | | | | instance. | | | | | | When present, | | | | | | the SMF shall | | | | | | use the NRF | | | | | | URI to select | | | | | | the PCF. | +---------------+---------------+---+-------------+---------------+ | supp | Supp | C | 0..1 | This IE shall | | ortedFeatures | ortedFeatures | | | be present if | | | | | | at least one | | | | | | optional | | | | | | feature | | | | | | defined in | | | | | | clause 6.1.8 | | | | | | is supported. | +---------------+---------------+---+-------------+---------------+ | selMode | Dnn | C | 0..1 | This IE shall | | | SelectionMode | | | be present if | | | | | | it is | | | | | | available. | | | | | | When present, | | | | | | it shall | | | | | | indicate | | | | | | whether the | | | | | | requested DNN | | | | | | corresponds | | | | | | to an | | | | | | explicitly | | | | | | subscribed | | | | | | DNN or to the | | | | | | usage of a | | | | | | wildcard | | | | | | subscription. | +---------------+---------------+---+-------------+---------------+ | backupAmfInfo | array(B | C | 1..N | This IE shall | | | ackupAmfInfo) | | | be included | | | | | | if the NF | | | | | | service | | | | | | consumer is | | | | | | an AMF and | | | | | | the AMF | | | | | | supports the | | | | | | AMF | | | | | | management | | | | | | without UDSF | | | | | | for the | | | | | | following | | | | | | cases: | | | | | | | | | | | | - First | | | | | | interaction | | | | | | with SMF. | | | | | | | | | | | | - | | | | | | Modification | | | | | | of the | | | | | | B | | | | | | ackupAmfInfo. | +---------------+---------------+---+-------------+---------------+ | traceData | TraceData | C | 0..1 | This IE shall | | | | | | be included | | | | | | if trace is | | | | | | required to | | | | | | be activated | | | | | | (see | | | | | | 3GPP TS 32 | | | | | | .422 [22]). | +---------------+---------------+---+-------------+---------------+ | udmGroupId | NfGroupId | O | 0..1 | When present, | | | | | | it shall | | | | | | indicate the | | | | | | identity of | | | | | | the UDM group | | | | | | serving the | | | | | | UE. | +---------------+---------------+---+-------------+---------------+ | rou | string | O | 0..1 | When present, | | tingIndicator | | | | it shall | | | | | | indicate the | | | | | | Routing | | | | | | Indicator of | | | | | | the UE. | +---------------+---------------+---+-------------+---------------+ | epsIn | EpsInterwork | O | 0..1 | The AMF may | | terworkingInd | ingIndication | | | provide the | | | | | | indication | | | | | | when a | | | | | | PGW-C+SMF is | | | | | | selected to | | | | | | serve the PDU | | | | | | Session. | | | | | | | | | | | | When present, | | | | | | this IE shall | | | | | | indicate | | | | | | whether the | | | | | | PDU session | | | | | | may possibly | | | | | | be moved to | | | | | | EPS and | | | | | | whether N26 | | | | | | interface to | | | | | | be used | | | | | | during EPS | | | | | | interworking | | | | | | procedures. | | | | | | | | | | | | The AMF may | | | | | | derive the | | | | | | value of the | | | | | | indication | | | | | | from | | | | | | different | | | | | | sources, like | | | | | | UE radio | | | | | | capabilities | | | | | | (e.g. \"S1 | | | | | | mode | | | | | | supported\"), | | | | | | UE | | | | | | subscription | | | | | | data (e.g. | | | | | | \"Core | | | | | | Network Type | | | | | | Restriction | | | | | | to EPC\" and | | | | | | \ | | | | | | "Interworking | | | | | | with EPS | | | | | | Indication\" | | | | | | for the DNN) | | | | | | and | | | | | | co | | | | | | nfigurations. | +---------------+---------------+---+-------------+---------------+ | indirectF | boolean | C | 0..1 | The AMF shall | | orwardingFlag | | | | include this | | | | | | indication | | | | | | during N26 | | | | | | based | | | | | | Handover | | | | | | procedure | | | | | | from EPS to | | | | | | 5GS (see | | | | | | 3GPP TS | | | | | | 23.502 [3], | | | | | | clause | | | | | | 4.11.1.2.2), | | | | | | to inform the | | | | | | SMF of the | | | | | | applicability | | | | | | or | | | | | | non- | | | | | | applicability | | | | | | of indirect | | | | | | data | | | | | | forwarding. | | | | | | | | | | | | When present, | | | | | | it shall be | | | | | | set as | | | | | | follows: | | | | | | | | | | | | > \- True: | | | | | | > indirect | | | | | | > data | | | | | | > forwarding | | | | | | > is | | | | | | > applicable | | | | | | > | | | | | | > \- False: | | | | | | > indirect | | | | | | > data | | | | | | > forwarding | | | | | | > is not | | | | | | > applicable | +---------------+---------------+---+-------------+---------------+ | targetId | NgRanTargetId | C | 0..1 | This IE shall | | | | | | be present | | | | | | during an EPS | | | | | | to 5GS | | | | | | handover | | | | | | preparation | | | | | | using the N26 | | | | | | interface, | | | | | | when the | | | | | | hoState IE is | | | | | | set to the | | | | | | value | | | | | | \ | | | | | | "PREPARING\". | | | | | | | | | | | | When present, | | | | | | it shall | | | | | | contain the | | | | | | Target ID | | | | | | identifying | | | | | | the target | | | | | | RAN Node ID | | | | | | and TAI | | | | | | received in | | | | | | the Forward | | | | | | Relocation | | | | | | Request from | | | | | | the Source | | | | | | MME. | +---------------+---------------+---+-------------+---------------+ | epsBe | EpsBearer | C | 0..1 | This IE shall | | arerCtxStatus | ContextStatus | | | be present | | | | | | during an EPS | | | | | | to 5GS idle | | | | | | mode mobility | | | | | | using the N26 | | | | | | interface, if | | | | | | received in | | | | | | the | | | | | | Registration | | | | | | Request from | | | | | | the UE. | | | | | | | | | | | | When present, | | | | | | it shall be | | | | | | set to the | | | | | | value | | | | | | received from | | | | | | the UE. | +---------------+---------------+---+-------------+---------------+ | NOTE: In | | | | | | shared | | | | | | networks, | | | | | | when the | | | | | | message is | | | | | | sent from the | | | | | | VPLMN to the | | | | | | HPLMN, the | | | | | | PLMN ID that | | | | | | is | | | | | | communicated | | | | | | in this IE | | | | | | shall be that | | | | | | of the | | | | | | selected Core | | | | | | Network | | | | | | Operator.\ | | | | | | In shared | | | | | | networks, | | | | | | when the AMF | | | | | | and SMF | | | | | | pertain to | | | | | | the same | | | | | | PLMN, the | | | | | | Primary PLMN | | | | | | ID shall be | | | | | | communicated | | | | | | in the ECGI | | | | | | or NCGI to | | | | | | the SMF. The | | | | | | Core Network | | | | | | Operator PLMN | | | | | | ID shall be | | | | | | communicated | | | | | | in the TAI | | | | | | and the | | | | | | Serving | | | | | | Network. | | | | | +---------------+---------------+---+-------------+---------------+
##### 6.1.6.2.3 Type: SMContextCreatedData
Table 6.1.6.2.3-1: Definition of type SmContextCreatedData
+---------------+---------------+---+-------------+---------------+ | Attribute | Data type | P | Cardinality | Description | | name | | | | | +===============+===============+===+=============+===============+ | hsmfUri | Uri | C | 0..1 | This IE shall | | | | | | be present in | | | | | | HR roaming | | | | | | scenarios if | | | | | | the | | | | | | addi | | | | | | tionalHsmfUri | | | | | | IE was | | | | | | received in | | | | | | the request | | | | | | and the V-SMF | | | | | | established | | | | | | the PDU | | | | | | session | | | | | | towards an | | | | | | alternative | | | | | | SMF listed in | | | | | | the | | | | | | addi | | | | | | tionalHsmfUri | | | | | | IE. When | | | | | | present, it | | | | | | shall contain | | | | | | the URI of | | | | | | the H-SMF | | | | | | towards which | | | | | | the PDU | | | | | | session was | | | | | | established. | +---------------+---------------+---+-------------+---------------+ | pduSessionId | PduSessionId | C | 0..1 | This IE shall | | | | | | be present, | | | | | | during an EPS | | | | | | to 5GS Idle | | | | | | mode mobility | | | | | | or handover | | | | | | using the N26 | | | | | | interface. | | | | | | | | | | | | When present, | | | | | | it shall be | | | | | | set to the | | | | | | PDU Session | | | | | | ID. | +---------------+---------------+---+-------------+---------------+ | sNssai | Snssai | C | 0..1 | This IE shall | | | | | | be present | | | | | | during an EPS | | | | | | to 5GS Idle | | | | | | mode mobility | | | | | | or handover | | | | | | using the N26 | | | | | | interface. | | | | | | | | | | | | When present, | | | | | | it shall | | | | | | contain the | | | | | | S-NSSAI | | | | | | assigned to | | | | | | the PDU | | | | | | session. | +---------------+---------------+---+-------------+---------------+ | upCnxState | UpCnxState | C | 0..1 | This IE shall | | | | | | be present if | | | | | | the SMF was | | | | | | requested to | | | | | | activate the | | | | | | user plane | | | | | | connection of | | | | | | the PDU | | | | | | session in | | | | | | the | | | | | | corresponding | | | | | | request. | | | | | | | | | | | | When present, | | | | | | it shall be | | | | | | set as | | | | | | specified in | | | | | | clause | | | | | | 5.2.2.2.2. | +---------------+---------------+---+-------------+---------------+ | n2SmInfo | Re | C | 0..1 | This IE shall | | | fToBinaryData | | | be present if | | | | | | N2 SM | | | | | | Information | | | | | | needs to be | | | | | | sent to the | | | | | | AN. | +---------------+---------------+---+-------------+---------------+ | n2SmInfoType | N2SmInfoType | C | 0..1 | This IE shall | | | | | | be present if | | | | | | \"n2SmInfo\" | | | | | | attribute is | | | | | | present. | | | | | | | | | | | | When present, | | | | | | this IE shall | | | | | | indicate the | | | | | | NG AP IE type | | | | | | for the NG AP | | | | | | SMF related | | | | | | IE container | | | | | | carried in | | | | | | \"n2SmInfo\" | | | | | | attribute. | +---------------+---------------+---+-------------+---------------+ | all | array(E | C | 1..N | This IE shall | | ocatedEbiList | biArpmapping) | | | be present if | | | | | | the consumer | | | | | | NF is an AMF | | | | | | and | | | | | | Inter-system | | | | | | mobility | | | | | | happens. When | | | | | | present, it | | | | | | shall contain | | | | | | an array of | | | | | | EBI to ARP | | | | | | mappings | | | | | | currently | | | | | | allocated to | | | | | | the PDU | | | | | | session. | +---------------+---------------+---+-------------+---------------+ | hoState | HoState | C | 0..1 | This IE shall | | | | | | be present if | | | | | | the SMF was | | | | | | requested to | | | | | | prepare an | | | | | | EPS to 5GS | | | | | | handover for | | | | | | the PDU | | | | | | session in | | | | | | the | | | | | | corresponding | | | | | | request. | | | | | | | | | | | | When present, | | | | | | it shall be | | | | | | set as | | | | | | specified in | | | | | | clause | | | | | | 5.2.2.2.3. | +---------------+---------------+---+-------------+---------------+ | gpsi | Gpsi | C | 0..1 | This IE shall | | | | | | be present if | | | | | | no GPSI IE is | | | | | | provided in | | | | | | the request, | | | | | | e.g. for a | | | | | | PDU session | | | | | | moved from | | | | | | another | | | | | | access or | | | | | | another | | | | | | system, and | | | | | | the SMF knows | | | | | | that a GPSI | | | | | | is already | | | | | | associated | | | | | | with the PDU | | | | | | session (or a | | | | | | GPSI is | | | | | | received from | | | | | | h-SMF for a | | | | | | HR PDU | | | | | | session). | | | | | | | | | | | | When present, | | | | | | it shall | | | | | | contain the | | | | | | user\'s GPSI | | | | | | associated | | | | | | with the PDU | | | | | | session. | +---------------+---------------+---+-------------+---------------+ | smfServ | string | O | 0..1 | When present, | | iceInstanceId | | | | this IE shall | | | | | | contain the | | | | | | serv | | | | | | iceInstanceId | | | | | | of the SMF | | | | | | service | | | | | | instance | | | | | | serving the | | | | | | PDU session | | | | | | Context. | | | | | | | | | | | | This IE may | | | | | | be used by | | | | | | the AMF to | | | | | | identify PDU | | | | | | session | | | | | | contexts | | | | | | affected by a | | | | | | failure or | | | | | | restart of | | | | | | the SMF | | | | | | service | | | | | | instance (see | | | | | | clause 6.2 of | | | | | | 3GPP TS 23 | | | | | | .527 [24]). | +---------------+---------------+---+-------------+---------------+ | recoveryTime | DateTime | O | 0..1 | Timestamp | | | | | | when the SMF | | | | | | service | | | | | | instance | | | | | | serving the | | | | | | PDU session | | | | | | was | | | | | | (re)started | | | | | | (see clause | | | | | | 6.3 of | | | | | | 3GPP TS 23 | | | | | | .527 [24]). | +---------------+---------------+---+-------------+---------------+ | supp | Supp | C | 0..1 | This IE shall | | ortedFeatures | ortedFeatures | | | be present if | | | | | | at least one | | | | | | optional | | | | | | feature | | | | | | defined in | | | | | | clause 6.1.8 | | | | | | is supported. | +---------------+---------------+---+-------------+---------------+
##### 6.1.6.2.4 Type: SMContextUpdateData
Table 6.1.6.2.4-1: Definition of type SmContextUpdateData
+---------------+---------------+---+-------------+---------------+ | Attribute | Data type | P | Cardinality | Description | | name | | | | | +===============+===============+===+=============+===============+ | pei | Pei | C | 0..1 | This IE shall | | | | | | be present if | | | | | | it is | | | | | | available and | | | | | | has not been | | | | | | provided | | | | | | earlier to | | | | | | the SMF. | | | | | | | | | | | | When present, | | | | | | this IE shall | | | | | | contain the | | | | | | permanent | | | | | | equipment | | | | | | identifier. | +---------------+---------------+---+-------------+---------------+ | servingNfId | NfInstanceId | C | 0..1 | This IE shall | | | | | | be present | | | | | | upon | | | | | | inter-AMF | | | | | | change or | | | | | | mobility, or | | | | | | upon a N2 | | | | | | handover | | | | | | execution | | | | | | with AMF | | | | | | change. | | | | | | | | | | | | When present, | | | | | | it shall | | | | | | contain the | | | | | | identifier of | | | | | | the serving | | | | | | NF (e.g. | | | | | | AMF). | +---------------+---------------+---+-------------+---------------+ | smCon | Uri | C | 0..1 | This IE shall | | textStatusUri | | | | be present if | | | | | | the | | | | | | servingNfId | | | | | | IE is | | | | | | present. It | | | | | | may be | | | | | | present | | | | | | otherwise. | | | | | | | | | | | | When present, | | | | | | this IE shall | | | | | | include the | | | | | | callback URI | | | | | | to receive | | | | | | notification | | | | | | of SM context | | | | | | status. | +---------------+---------------+---+-------------+---------------+ | guami | Guami | C | 0..1 | This IE shall | | | | | | be present if | | | | | | the | | | | | | servingNfId | | | | | | of AMF is | | | | | | present. | | | | | | | | | | | | When present, | | | | | | it shall | | | | | | contain the | | | | | | serving | | | | | | AMF\'s GUAMI. | +---------------+---------------+---+-------------+---------------+ | s | PlmnId | C | 0..1 | This IE shall | | ervingNetwork | | | | be present if | | | | | | the | | | | | | servingNfId | | | | | | IE is | | | | | | present. | | | | | | | | | | | | When present, | | | | | | it shall | | | | | | contain the | | | | | | serving core | | | | | | network | | | | | | operator PLMN | | | | | | ID. | +---------------+---------------+---+-------------+---------------+ | backupAmfInfo | array(B | C | 1..N | This IE shall | | | ackupAmfInfo) | | | be included | | | | | | for the | | | | | | modification | | | | | | of the | | | | | | BackupAmfInfo | | | | | | if the NF | | | | | | service | | | | | | consumer is | | | | | | an AMF and | | | | | | the AMF | | | | | | supports the | | | | | | AMF | | | | | | management | | | | | | without UDSF. | | | | | | | | | | | | For deleting | | | | | | the | | | | | | b | | | | | | ackupAmfInfo, | | | | | | it shall | | | | | | contain the | | | | | | Null value. | +---------------+---------------+---+-------------+---------------+ | anType | AccessType | C | 0..1 | This IE shall | | | | | | be present | | | | | | upon a change | | | | | | of the Access | | | | | | Network Type | | | | | | associated to | | | | | | the PDU | | | | | | session, e.g. | | | | | | during a | | | | | | handover of | | | | | | the PDU | | | | | | session | | | | | | between 3GPP | | | | | | access and | | | | | | untrusted | | | | | | non-3GPP | | | | | | access (see | | | | | | clause | | | | | | 5.2.2.3.5.2). | | | | | | | | | | | | When present, | | | | | | this IE shall | | | | | | indicate the | | | | | | Access | | | | | | Network Type | | | | | | to which the | | | | | | PDU session | | | | | | is to be | | | | | | associated. | +---------------+---------------+---+-------------+---------------+ | ratType | RatType | C | 0..1 | This IE shall | | | | | | be present | | | | | | and indicate | | | | | | the RAT Type | | | | | | used by the | | | | | | UE, if | | | | | | available, | | | | | | upon a change | | | | | | of RAT Type. | +---------------+---------------+---+-------------+---------------+ | p | PresenceState | C | 0..1 | This IE shall | | resenceInLadn | | | | be present | | | | | | during a | | | | | | Service | | | | | | Request | | | | | | procedure | | | | | | (see clause | | | | | | 5.2.2.3.2.2) | | | | | | ), an Xn | | | | | | handover (see | | | | | | clause | | | | | | 5.2.2.3.3) or | | | | | | a N2 handover | | | | | | execution | | | | | | (see clause | | | | | | 5.2.2.3.4.3), | | | | | | if the DNN of | | | | | | the PDU | | | | | | session | | | | | | corresponds | | | | | | to a LADN. | | | | | | When present, | | | | | | it shall be | | | | | | set to \"IN\" | | | | | | or \"OUT\" to | | | | | | indicate that | | | | | | the UE is in | | | | | | or out of the | | | | | | LADN service | | | | | | area. | +---------------+---------------+---+-------------+---------------+ | ueLocation | UserLocation | C | 0..1 | This IE shall | | | | | | be present if | | | | | | it is | | | | | | available and | | | | | | if it needs | | | | | | to be | | | | | | reported to | | | | | | the SMF (e.g. | | | | | | the user | | | | | | location has | | | | | | changed or | | | | | | the user | | | | | | plane of the | | | | | | PDU session | | | | | | is | | | | | | deactivated). | | | | | | | | | | | | When present, | | | | | | this IE shall | | | | | | contain: | | | | | | | | | | | | - the UE | | | | | | location | | | | | | information; | | | | | | and | | | | | | | | | | | | - the | | | | | | timestamp, if | | | | | | available, | | | | | | indicating | | | | | | the UTC time | | | | | | when the | | | | | | UeLocation | | | | | | information | | | | | | was acquired. | | | | | | | | | | | | See NOTE. | +---------------+---------------+---+-------------+---------------+ | ueTimeZone | TimeZone | C | 0..1 | This IE shall | | | | | | be present if | | | | | | it is | | | | | | available, | | | | | | the UE Time | | | | | | Zone has | | | | | | changed and | | | | | | needs to be | | | | | | reported to | | | | | | the SMF. | | | | | | | | | | | | When present, | | | | | | this IE shall | | | | | | contain the | | | | | | UE Time Zone. | +---------------+---------------+---+-------------+---------------+ | addUeLocation | UserLocation | O | 0..1 | Additional UE | | | | | | location. | | | | | | | | | | | | This IE may | | | | | | be present, | | | | | | if anType | | | | | | indicates a | | | | | | non-3GPP | | | | | | access and a | | | | | | valid 3GPP | | | | | | access user | | | | | | location | | | | | | information | | | | | | is available. | | | | | | | | | | | | When present, | | | | | | it shall | | | | | | contain: | | | | | | | | | | | | - the last | | | | | | known 3GPP | | | | | | access user | | | | | | location; and | | | | | | | | | | | | - the | | | | | | timestamp, if | | | | | | available, | | | | | | indicating | | | | | | the UTC time | | | | | | when the | | | | | | addUeLocation | | | | | | information | | | | | | was acquired. | | | | | | | | | | | | See NOTE. | +---------------+---------------+---+-------------+---------------+ | upCnxState | UpCnxState | C | 0..1 | This IE shall | | | | | | be present to | | | | | | request the | | | | | | activation or | | | | | | the | | | | | | deactivation | | | | | | of the user | | | | | | plane | | | | | | connection of | | | | | | the PDU | | | | | | session. | | | | | | | | | | | | When present, | | | | | | it shall be | | | | | | set as | | | | | | specified in | | | | | | clause | | | | | | 5.2.2.3.2. | +---------------+---------------+---+-------------+---------------+ | hoState | HoState | C | 0..1 | This IE shall | | | | | | be present to | | | | | | request the | | | | | | preparation, | | | | | | execution or | | | | | | cancellation | | | | | | of a handover | | | | | | of the PDU | | | | | | session. | | | | | | | | | | | | When present, | | | | | | it shall be | | | | | | set as | | | | | | specified in | | | | | | clause | | | | | | 5.2.2.3.4. | +---------------+---------------+---+-------------+---------------+ | toBeSwitched | boolean | C | 0..1 | This IE shall | | | | | | be present | | | | | | during an Xn | | | | | | Handover (see | | | | | | clause | | | | | | 5.2.2.3.3) to | | | | | | request to | | | | | | switch the | | | | | | PDU session | | | | | | to a new | | | | | | downlink N3 | | | | | | tunnel | | | | | | endpoint. | | | | | | | | | | | | When present, | | | | | | it shall be | | | | | | set as | | | | | | follows: | | | | | | | | | | | | > \- true: | | | | | | > request to | | | | | | > switch to | | | | | | > the PDU | | | | | | > session. | | | | | | > | | | | | | > \- false | | | | | | > (default): | | | | | | > no request | | | | | | > to switch | | | | | | > the PDU | | | | | | > session. | +---------------+---------------+---+-------------+---------------+ | faile | boolean | C | 0..1 | This IE shall | | dToBeSwitched | | | | be present | | | | | | during an Xn | | | | | | Handover (see | | | | | | clause | | | | | | 5.2.2.3.3) if | | | | | | the PDU | | | | | | session | | | | | | failed to be | | | | | | setup in the | | | | | | target RAN. | | | | | | | | | | | | When present, | | | | | | it shall be | | | | | | to true to | | | | | | indicate that | | | | | | the PDU | | | | | | session | | | | | | failed to be | | | | | | setup in the | | | | | | target RAN. | +---------------+---------------+---+-------------+---------------+ | n1SmMsg | Re | C | 0..1 | This IE shall | | | fToBinaryData | | | be present if | | | | | | N1 SM | | | | | | Information | | | | | | has been | | | | | | received from | | | | | | the UE. | | | | | | | | | | | | When present, | | | | | | this IE shall | | | | | | reference the | | | | | | N1 SM Message | | | | | | binary data | | | | | | (see clause | | | | | | 6.1.6.4.2). | +---------------+---------------+---+-------------+---------------+ | n2SmInfo | Re | C | 0..1 | This IE shall | | | fToBinaryData | | | be present if | | | | | | N2 SM | | | | | | Information | | | | | | has been | | | | | | received from | | | | | | the AN. | | | | | | | | | | | | When present, | | | | | | this IE shall | | | | | | reference the | | | | | | N2 SM | | | | | | Information | | | | | | binary data | | | | | | (see clause | | | | | | 6.1.6.4.3). | +---------------+---------------+---+-------------+---------------+ | n2SmInfoType | N2SmInfoType | C | 0..1 | This IE shall | | | | | | be present if | | | | | | \"n2SmInfo\" | | | | | | attribute is | | | | | | present. | | | | | | | | | | | | When present, | | | | | | this IE shall | | | | | | indicate the | | | | | | NG AP IE type | | | | | | for the NG AP | | | | | | SMF related | | | | | | IE container | | | | | | carried in | | | | | | \"n2SmInfo\" | | | | | | attribute. | +---------------+---------------+---+-------------+---------------+ | targetId | NgRanTargetId | C | 0..1 | This IE shall | | | | | | be present | | | | | | during a N2 | | | | | | handover | | | | | | preparation, | | | | | | when the | | | | | | hoState IE is | | | | | | set to the | | | | | | value | | | | | | \ | | | | | | "PREPARING\". | | | | | | | | | | | | When present, | | | | | | it shall | | | | | | contain the | | | | | | Target ID | | | | | | identifying | | | | | | the target | | | | | | RAN Node ID | | | | | | and TAI | | | | | | received in | | | | | | the Handover | | | | | | Required from | | | | | | the Source | | | | | | RAN. | +---------------+---------------+---+-------------+---------------+ | targ | NfInstanceId | C | 0..1 | This IE shall | | etServingNfId | | | | be present | | | | | | during a N2 | | | | | | handover | | | | | | preparation | | | | | | with AMF | | | | | | change, when | | | | | | the hoState | | | | | | IE is set to | | | | | | the value | | | | | | \ | | | | | | "PREPARING\". | | | | | | | | | | | | When present, | | | | | | it shall | | | | | | contain the | | | | | | identifier of | | | | | | the target | | | | | | serving NF | | | | | | (e.g. AMF). | +---------------+---------------+---+-------------+---------------+ | d | boolean | C | 0..1 | This IE shall | | ataForwarding | | | | be present | | | | | | and set as | | | | | | specified in | | | | | | clause | | | | | | 5.2.2.3.9 | | | | | | during a 5GS | | | | | | to EPS | | | | | | handover. | | | | | | | | | | | | When present, | | | | | | it shall be | | | | | | set as | | | | | | follows: | | | | | | | | | | | | - true: | | | | | | setup the | | | | | | indirect data | | | | | | forwarding | | | | | | tunnels; | | | | | | | | | | | | - false | | | | | | (default): | | | | | | indirect data | | | | | | forwarding | | | | | | tunnels are | | | | | | not required | | | | | | to be setup | | | | | | (see | | | | | | claus | | | | | | e 5.2.2.3.9). | +---------------+---------------+---+-------------+---------------+ | e | array(EpsBea | C | 0..N | This IE shall | | psBearerSetup | rerContainer) | | | be present | | | | | | during a 5GS | | | | | | to EPS | | | | | | handover | | | | | | using the N26 | | | | | | interface. | | | | | | | | | | | | When present, | | | | | | it shall | | | | | | include the | | | | | | EPS bearer | | | | | | context(s) | | | | | | successfully | | | | | | setup in EPS. | | | | | | The array | | | | | | shall be | | | | | | empty if no | | | | | | resource was | | | | | | successfully | | | | | | allocated in | | | | | | EPS for any | | | | | | PDU session. | +---------------+---------------+---+-------------+---------------+ | revokeEbiList | array | C | 1..N | This IE shall | | | (EpsBearerId) | | | be present to | | | | | | request the | | | | | | SMF to revoke | | | | | | some EBIs | | | | | | (see clause | | | | | | 4.11.1.4.1 of | | | | | | 3GPP TS 2 | | | | | | 3.502 [3]). | | | | | | When present, | | | | | | it shall | | | | | | contain the | | | | | | EBIs to | | | | | | revoke. | +---------------+---------------+---+-------------+---------------+ | release | boolean | C | 0..1 | This IE shall | | | | | | be used to | | | | | | indicate a | | | | | | network | | | | | | initiated PDU | | | | | | session | | | | | | release is | | | | | | requested. | | | | | | | | | | | | This IE shall | | | | | | be present | | | | | | and set as | | | | | | specified in | | | | | | clause | | | | | | 5.2.2.3.10 | | | | | | during P-CSCF | | | | | | restoration | | | | | | procedure, in | | | | | | clause | | | | | | 5.2.2.3.11 | | | | | | during AMF | | | | | | requested PDU | | | | | | Session | | | | | | Release due | | | | | | to duplicated | | | | | | PDU Session | | | | | | Id, and in | | | | | | clause | | | | | | 5.2.2.3.12 | | | | | | during AMF | | | | | | requested PDU | | | | | | Session | | | | | | Release due | | | | | | to slice not | | | | | | available. | | | | | | | | | | | | When present, | | | | | | it shall be | | | | | | set as | | | | | | follows: | | | | | | | | | | | | - true: PDU | | | | | | session | | | | | | release is | | | | | | required; | | | | | | | | | | | | - false | | | | | | (default): | | | | | | PDU session | | | | | | release is | | | | | | not required. | +---------------+---------------+---+-------------+---------------+ | cause | Cause | O | 0..1 | When present, | | | | | | this IE shall | | | | | | indicate the | | | | | | cause for the | | | | | | requested | | | | | | modification, | | | | | | e.g. the NF | | | | | | Service | | | | | | Consumer | | | | | | cause for | | | | | | requesting to | | | | | | deactivate | | | | | | the user | | | | | | plane | | | | | | connection of | | | | | | the PDU | | | | | | session. | +---------------+---------------+---+-------------+---------------+ | ngApCause | NgApCause | C | 0..1 | This IE shall | | | | | | be present, | | | | | | if the | | | | | | information | | | | | | is available. | | | | | | When present, | | | | | | this IE shall | | | | | | indicate the | | | | | | cause for the | | | | | | requested | | | | | | modification, | | | | | | e.g. the NGAP | | | | | | cause for | | | | | | requesting to | | | | | | deactivate | | | | | | the user | | | | | | plane | | | | | | connection of | | | | | | the PDU | | | | | | session. | +---------------+---------------+---+-------------+---------------+ | 5 | 5GMmCause | C | 0..1 | This IE shall | | gMmCauseValue | | | | be included | | | | | | if the AMF | | | | | | received a | | | | | | 5GMM cause | | | | | | code from the | | | | | | UE during any | | | | | | network | | | | | | initiated PDU | | | | | | session | | | | | | modification | | | | | | or release | | | | | | procedure. | | | | | | (e.g 5GMM | | | | | | Status | | | | | | message in | | | | | | response to a | | | | | | Downlink NAS | | | | | | Transport | | | | | | message | | | | | | carrying 5GSM | | | | | | payload). | +---------------+---------------+---+-------------+---------------+ | sNssai | Snssai | C | 0..1 | This IE shall | | | | | | be present, | | | | | | during an EPS | | | | | | to 5GS idle | | | | | | mode mobility | | | | | | or handover | | | | | | using the N26 | | | | | | interface, if | | | | | | the S-NSSAI | | | | | | for the | | | | | | serving PLMN | | | | | | derived from | | | | | | the S-NSSAI | | | | | | of the home | | | | | | PLMN differs | | | | | | from the | | | | | | S-NSSAI | | | | | | provided in | | | | | | the Create SM | | | | | | Context | | | | | | Request. | | | | | | | | | | | | When present, | | | | | | it shall | | | | | | contain the | | | | | | S-NSSAI for | | | | | | the serving | | | | | | PLMN. | +---------------+---------------+---+-------------+---------------+ | traceData | TraceData | C | 0..1 | This IE shall | | | | | | be included | | | | | | if trace is | | | | | | required to | | | | | | be activated, | | | | | | modified or | | | | | | deactivated | | | | | | (see | | | | | | 3GPP TS 32 | | | | | | .422 [22]). | | | | | | | | | | | | For trace | | | | | | modification, | | | | | | it shall | | | | | | contain a | | | | | | complete | | | | | | replacement | | | | | | of trace | | | | | | data. | | | | | | | | | | | | For trace | | | | | | deactivation, | | | | | | it shall | | | | | | contain the | | | | | | Null value. | +---------------+---------------+---+-------------+---------------+ | epsIn | EpsInterwork | O | 0..1 | This IE may | | terworkingInd | ingIndication | | | be present if | | | | | | the | | | | | | indication | | | | | | has been | | | | | | provided | | | | | | during the | | | | | | PDU session | | | | | | creation, and | | | | | | its value has | | | | | | changed after | | | | | | session | | | | | | creation or | | | | | | last update. | | | | | | | | | | | | When present, | | | | | | this IE shall | | | | | | indicate | | | | | | whether the | | | | | | PDU session | | | | | | may possibly | | | | | | be moved to | | | | | | EPS and | | | | | | whether N26 | | | | | | interface to | | | | | | be used | | | | | | during EPS | | | | | | interworking | | | | | | procedures. | +---------------+---------------+---+-------------+---------------+ | anTyp | boolean | C | 0..1 | This IE shall | | eCanBeChanged | | | | be present | | | | | | and set to | | | | | | true to | | | | | | indicate that | | | | | | the Access | | | | | | Network Type | | | | | | associated to | | | | | | the PDU | | | | | | session can | | | | | | be changed | | | | | | (see clause | | | | | | 5.2.2.3.2.4), | | | | | | during a | | | | | | Service | | | | | | Request | | | | | | procedure | | | | | | (see clause | | | | | | 4.2.3.2 of | | | | | | 3GPP TS 23 | | | | | | .502 [3])), | | | | | | in response | | | | | | to paging or | | | | | | NAS | | | | | | notification | | | | | | indicating | | | | | | non-3GPP | | | | | | access, when | | | | | | the PDU | | | | | | Session for | | | | | | which the UE | | | | | | was paged or | | | | | | notified is | | | | | | in the List | | | | | | Of Allowed | | | | | | PDU Sessions | | | | | | provided by | | | | | | the UE, and | | | | | | the AMF | | | | | | received N2 | | | | | | SM | | | | | | Information | | | | | | only or N1 SM | | | | | | Container and | | | | | | N2 SM | | | | | | Information | | | | | | from the SMF | | | | | | in step 3a of | | | | | | c | | | | | | lause 4.2.3.3 | | | | | | of | | | | | | 3GPP TS | | | | | | 23.502 [3]. | | | | | | | | | | | | When present, | | | | | | it shall be | | | | | | set as | | | | | | follows: | | | | | | | | | | | | - true: the | | | | | | access type | | | | | | of the PDU | | | | | | session can | | | | | | be changed. | | | | | | | | | | | | - false: the | | | | | | access type | | | | | | of the PDU | | | | | | session | | | | | | cannot be | | | | | | changed | | | | | | (default). | +---------------+---------------+---+-------------+---------------+ | n2SmInfoExt1 | Re | C | 0..1 | This IE shall | | | fToBinaryData | | | be present if | | | | | | more than one | | | | | | N2 SM | | | | | | Information | | | | | | has been | | | | | | received from | | | | | | the AN. | | | | | | | | | | | | When present, | | | | | | this IE shall | | | | | | reference the | | | | | | N2 SM | | | | | | Information | | | | | | binary data | | | | | | (see clause | | | | | | 6.1.6.4.3). | +---------------+---------------+---+-------------+---------------+ | n2S | N2SmInfoType | C | 0..1 | This IE shall | | mInfoTypeExt1 | | | | be present if | | | | | | \"n | | | | | | 2SmInfoExt1\" | | | | | | attribute is | | | | | | present. | | | | | | | | | | | | When present, | | | | | | this IE shall | | | | | | indicate the | | | | | | NG AP IE type | | | | | | for the NG AP | | | | | | SMF related | | | | | | IE container | | | | | | carried in | | | | | | \"n | | | | | | 2SmInfoExt1\" | | | | | | attribute. | +---------------+---------------+---+-------------+---------------+ | NOTE: In | | | | | | shared | | | | | | networks, | | | | | | when the | | | | | | message is | | | | | | sent from the | | | | | | VPLMN to the | | | | | | HPLMN, the | | | | | | PLMN ID that | | | | | | is | | | | | | communicated | | | | | | in this IE | | | | | | shall be that | | | | | | of the | | | | | | selected Core | | | | | | Network | | | | | | Operator.\ | | | | | | In shared | | | | | | networks, | | | | | | when the AMF | | | | | | and SMF | | | | | | pertain to | | | | | | the same | | | | | | PLMN, the | | | | | | Primary PLMN | | | | | | ID shall be | | | | | | communicated | | | | | | in the ECGI | | | | | | or NCGI to | | | | | | the SMF. The | | | | | | Core Network | | | | | | Operator PLMN | | | | | | ID shall be | | | | | | communicated | | | | | | in the TAI | | | | | | and the | | | | | | Serving | | | | | | Network. | | | | | +---------------+---------------+---+-------------+---------------+
##### 6.1.6.2.5 Type: SMContextUpdatedData
Table 6.1.6.2.5-1: Definition of type SmContextUpdatedData
+---------------+---------------+---+-------------+---------------+ | Attribute | Data type | P | Cardinality | Description | | name | | | | | +===============+===============+===+=============+===============+ | upCnxState | UpCnxState | C | 0..1 | This IE shall | | | | | | be present if | | | | | | the SMF was | | | | | | requested to | | | | | | activate or | | | | | | deactivate | | | | | | the user | | | | | | plane | | | | | | connection of | | | | | | the PDU | | | | | | session in | | | | | | the | | | | | | corresponding | | | | | | request. | | | | | | | | | | | | When present, | | | | | | it shall be | | | | | | set as | | | | | | specified in | | | | | | clause | | | | | | 5.2.2.3.2. | +---------------+---------------+---+-------------+---------------+ | hoState | HoState | C | 0..1 | This IE shall | | | | | | be present if | | | | | | the SMF was | | | | | | requested to | | | | | | prepare, | | | | | | execute or | | | | | | cancel a | | | | | | handover for | | | | | | the PDU | | | | | | session in | | | | | | the | | | | | | corresponding | | | | | | request. | | | | | | | | | | | | When present, | | | | | | it shall be | | | | | | set as | | | | | | specified in | | | | | | clause | | | | | | 5.2.2.3.4. | +---------------+---------------+---+-------------+---------------+ | r | array | C | 1..N | This IE shall | | eleaseEbiList | (EpsBearerId) | | | be present if | | | | | | the SMF | | | | | | determines | | | | | | that some | | | | | | EBIs are not | | | | | | needed. When | | | | | | present, it | | | | | | shall contain | | | | | | the EBIs to | | | | | | be released. | +---------------+---------------+---+-------------+---------------+ | all | array(E | C | 1..N | This IE shall | | ocatedEbiList | biArpMapping) | | | be present if | | | | | | the consumer | | | | | | NF is an AMF | | | | | | and | | | | | | Inter-system | | | | | | mobility | | | | | | happens. When | | | | | | present, it | | | | | | shall contain | | | | | | an array of | | | | | | EBI to ARP | | | | | | mappings | | | | | | currently | | | | | | allocated to | | | | | | the PDU | | | | | | session. | +---------------+---------------+---+-------------+---------------+ | mo | array(E | C | 1..N | This IE shall | | difiedEbiList | biArpMapping) | | | be present if | | | | | | a PDU session | | | | | | modification | | | | | | procedure | | | | | | resulted in | | | | | | the change of | | | | | | ARP for a QoS | | | | | | flow that was | | | | | | already | | | | | | allocated an | | | | | | EBI. | +---------------+---------------+---+-------------+---------------+ | n1SmMsg | Re | C | 0..1 | This IE shall | | | fToBinaryData | | | be present if | | | | | | N1 SM | | | | | | Information | | | | | | needs to be | | | | | | sent to the | | | | | | UE. | | | | | | | | | | | | When present, | | | | | | this IE shall | | | | | | reference the | | | | | | N1 SM Message | | | | | | binary data | | | | | | (see clause | | | | | | 6.1.6.4.2). | +---------------+---------------+---+-------------+---------------+ | n2SmInfo | Re | C | 0..1 | This IE shall | | | fToBinaryData | | | be present if | | | | | | N2 SM | | | | | | Information | | | | | | needs to be | | | | | | sent to the | | | | | | AN. | | | | | | | | | | | | When present, | | | | | | this IE shall | | | | | | reference the | | | | | | N2 SM | | | | | | Information | | | | | | binary data | | | | | | (see clause | | | | | | 6.1.6.4.3). | +---------------+---------------+---+-------------+---------------+ | n2SmInfoType | N2SmInfoType | C | 0..1 | This IE shall | | | | | | be present if | | | | | | \"n2SmInfo\" | | | | | | attribute is | | | | | | present. | | | | | | | | | | | | When present, | | | | | | this IE shall | | | | | | indicate the | | | | | | NG AP IE type | | | | | | for the NG AP | | | | | | SMF related | | | | | | IE container | | | | | | carried in | | | | | | \"n2SmInfo\" | | | | | | attribute. | +---------------+---------------+---+-------------+---------------+ | e | array(EpsBea | C | 1..N | This IE shall | | psBearerSetup | rerContainer) | | | be present | | | | | | during an EPS | | | | | | to 5GS | | | | | | handover | | | | | | using the N26 | | | | | | interface. | | | | | | | | | | | | When present, | | | | | | it shall | | | | | | include the | | | | | | EPS bearer | | | | | | context(s) | | | | | | successfully | | | | | | handed over | | | | | | to 5GS. | +---------------+---------------+---+-------------+---------------+ | d | boolean | C | 0..1 | This IE shall | | ataForwarding | | | | be present if | | | | | | it was | | | | | | present in | | | | | | the | | | | | | corresponding | | | | | | request. | | | | | | | | | | | | When present, | | | | | | it shall be | | | | | | set as | | | | | | specified in | | | | | | clause | | | | | | 5.2.2.3.9. | +---------------+---------------+---+-------------+---------------+ | cause | Cause | C | 0..1 | This IE shall | | | | | | be present if | | | | | | the | | | | | | activation of | | | | | | the User | | | | | | Plane | | | | | | connection | | | | | | failed due to | | | | | | insufficient | | | | | | resources | | | | | | (see clause | | | | | | 5.2.2.3.2.2). | +---------------+---------------+---+-------------+---------------+
##### 6.1.6.2.6 Type: SMContextReleaseData
Table 6.1.6.2.6-1: Definition of type SmContextReleaseData
+---------------+---------------+---+-------------+---------------+ | Attribute | Data type | P | Cardinality | Description | | name | | | | | +===============+===============+===+=============+===============+ | cause | Cause | C | 0..1 | This IE shall | | | | | | be present, | | | | | | if the | | | | | | information | | | | | | is available. | | | | | | When present, | | | | | | this IE shall | | | | | | indicate the | | | | | | NF Service | | | | | | Consumer | | | | | | cause for the | | | | | | requested SM | | | | | | context | | | | | | release. | +---------------+---------------+---+-------------+---------------+ | ngApCause | NgApCause | C | 0..1 | This IE shall | | | | | | be present, | | | | | | if the | | | | | | information | | | | | | is available. | | | | | | When present, | | | | | | this IE shall | | | | | | indicate the | | | | | | NGAP cause | | | | | | for the | | | | | | requested SM | | | | | | context | | | | | | release. | +---------------+---------------+---+-------------+---------------+ | 5 | 5GMmCause | C | 0..1 | This IE shall | | gMmCauseValue | | | | be included | | | | | | if the PDU | | | | | | session is | | | | | | released by | | | | | | the AMF due | | | | | | to any 5GMM | | | | | | failure. When | | | | | | present, this | | | | | | IE shall | | | | | | contain the | | | | | | 5GMM cause | | | | | | code value | | | | | | received from | | | | | | the UE. | +---------------+---------------+---+-------------+---------------+ | ueLocation | UserLocation | C | 0..1 | This IE shall | | | | | | be present, | | | | | | if available. | | | | | | | | | | | | When present, | | | | | | it shall | | | | | | contain the | | | | | | UE Time Zone | | | | | | information. | | | | | | See NOTE. | +---------------+---------------+---+-------------+---------------+ | ueTimeZone | TimeZone | C | 0..1 | This IE shall | | | | | | be present, | | | | | | if available. | | | | | | | | | | | | When present, | | | | | | it shall | | | | | | contain the | | | | | | UE location | | | | | | information. | +---------------+---------------+---+-------------+---------------+ | addUeLocation | UserLocation | O | 0..1 | Additional UE | | | | | | location. | | | | | | | | | | | | This IE may | | | | | | be present, | | | | | | if anType | | | | | | previously | | | | | | reported is a | | | | | | non-3GPP | | | | | | access and a | | | | | | valid 3GPP | | | | | | access user | | | | | | location | | | | | | information | | | | | | is available. | | | | | | | | | | | | When present, | | | | | | it shall | | | | | | contain: | | | | | | | | | | | | - the last | | | | | | known 3GPP | | | | | | access user | | | | | | location; and | | | | | | | | | | | | - the | | | | | | timestamp, if | | | | | | available, | | | | | | indicating | | | | | | the UTC time | | | | | | when the | | | | | | addUeLocation | | | | | | information | | | | | | was acquired. | | | | | | | | | | | | See NOTE. | +---------------+---------------+---+-------------+---------------+ | vs | boolean | C | 0..1 | This IE shall | | mfReleaseOnly | | | | be present | | | | | | and set to | | | | | | \"true\" | | | | | | during a 5GS | | | | | | to EPS Idle | | | | | | mode mobility | | | | | | or handover, | | | | | | for a Home | | | | | | Routed PDU | | | | | | session | | | | | | associated | | | | | | with 3GPP | | | | | | access and | | | | | | with assigned | | | | | | EBI(s). When | | | | | | present, it | | | | | | shall be set | | | | | | as follows: | | | | | | | | | | | | > \- true: | | | | | | > release the | | | | | | > SM context | | | | | | > and PDU | | | | | | > session in | | | | | | > the V-SMF | | | | | | > only; | | | | | | > | | | | | | > \- false | | | | | | > (default): | | | | | | > release the | | | | | | > SM context | | | | | | > and PDU | | | | | | > session in | | | | | | > V-SMF and | | | | | | > H-SMF. | +---------------+---------------+---+-------------+---------------+ | n2SmInfo | Re | C | 0..1 | This IE shall | | | fToBinaryData | | | be present if | | | | | | N2 SM | | | | | | Information | | | | | | has been | | | | | | received from | | | | | | the AN. | | | | | | | | | | | | When present, | | | | | | this IE shall | | | | | | reference the | | | | | | N2 SM | | | | | | Information | | | | | | binary data | | | | | | (see clause | | | | | | 6.1.6.4.3). | +---------------+---------------+---+-------------+---------------+ | n2SmInfoType | N2SmInfoType | C | 0..1 | This IE shall | | | | | | be present if | | | | | | \"n2SmInfo\" | | | | | | attribute is | | | | | | present. | | | | | | | | | | | | When present, | | | | | | this IE shall | | | | | | indicate the | | | | | | NG AP IE type | | | | | | for the NG AP | | | | | | SMF related | | | | | | IE container | | | | | | carried in | | | | | | \"n2SmInfo\" | | | | | | attribute. | +---------------+---------------+---+-------------+---------------+ | NOTE: In | | | | | | shared | | | | | | networks, | | | | | | when the | | | | | | message is | | | | | | sent from the | | | | | | VPLMN to the | | | | | | HPLMN, the | | | | | | PLMN ID that | | | | | | is | | | | | | communicated | | | | | | in this IE | | | | | | shall be that | | | | | | of the | | | | | | selected Core | | | | | | Network | | | | | | Operator.\ | | | | | | In shared | | | | | | networks, | | | | | | when the AMF | | | | | | and SMF | | | | | | pertain to | | | | | | the same | | | | | | PLMN, the | | | | | | Primary PLMN | | | | | | ID shall be | | | | | | communicated | | | | | | in the ECGI | | | | | | or NCGI to | | | | | | the SMF. The | | | | | | Core Network | | | | | | Operator PLMN | | | | | | ID shall be | | | | | | communicated | | | | | | in the TAI | | | | | | and the | | | | | | Serving | | | | | | Network. | | | | | +---------------+---------------+---+-------------+---------------+
##### 6.1.6.2.7 Type: SMContextRetrieveData
Table 6.1.6.2.7-1: Definition of type SmContextRetrieveData
Attribute name Data type P Cardinality Description
* * *
targetMmeCap MmeCapabilities C 0..1 This IE shall be present if it is
available. When present, it shall contain the target MME capabilities.
##### 6.1.6.2.8 Type: SMContextStatusNotification
Table 6.1.6.2.8-1: Definition of type SmContextStatusNotification
Attribute name Data type P Cardinality Description
* * *
statusInfo StatusInfo M 1 This IE shall contain status information about the
SM context.
##### 6.1.6.2.9 Type: PduSessionCreateData
Table 6.1.6.2.9-1: Definition of type PduSessionCreateData
+---------------+---------------+---+-------------+---------------+ | Attribute | Data type | P | Cardinality | Description | | name | | | | | +===============+===============+===+=============+===============+ | supi | Supi | C | 0..1 | This IE shall | | | | | | be present, | | | | | | except if the | | | | | | UE is | | | | | | emergency | | | | | | registered | | | | | | and UICCless. | | | | | | | | | | | | When present, | | | | | | it shall | | | | | | contain the | | | | | | subscriber | | | | | | permanent | | | | | | identify. | +---------------+---------------+---+-------------+---------------+ | unauth | boolean | C | 0..1 | This IE shall | | enticatedSupi | | | | be present if | | | | | | the SUPI is | | | | | | present in | | | | | | the message | | | | | | but is not | | | | | | authenticated | | | | | | and is for an | | | | | | emergency | | | | | | registered | | | | | | UE. | | | | | | | | | | | | When present, | | | | | | it shall be | | | | | | set as | | | | | | follows: | | | | | | | | | | | | > \- true: | | | | | | > un | | | | | | authenticated | | | | | | > SUPI; | | | | | | > | | | | | | > \- false | | | | | | > (default): | | | | | | > | | | | | | authenticated | | | | | | > SUPI. | +---------------+---------------+---+-------------+---------------+ | pei | Pei | C | 0..1 | This IE shall | | | | | | be present if | | | | | | the UE is | | | | | | emergency | | | | | | registered | | | | | | and it is | | | | | | either | | | | | | UIClless or | | | | | | the SUPI is | | | | | | not | | | | | | a | | | | | | uthenticated. | | | | | | | | | | | | For all other | | | | | | cases, this | | | | | | IE shall be | | | | | | present if it | | | | | | is available. | | | | | | | | | | | | When present, | | | | | | it shall | | | | | | contain the | | | | | | permanent | | | | | | equipment | | | | | | identifier. | +---------------+---------------+---+-------------+---------------+ | pduSessionId | PduSessionId | C | 0..1 | This IE shall | | | | | | contain the | | | | | | PDU Session | | | | | | ID, except | | | | | | during an EPS | | | | | | to 5GS Idle | | | | | | mode mobility | | | | | | or handover | | | | | | using the N26 | | | | | | interface. | +---------------+---------------+---+-------------+---------------+ | dnn | Dnn | M | 1 | This IE shall | | | | | | contain the | | | | | | requested | | | | | | DNN. | +---------------+---------------+---+-------------+---------------+ | sNssai | Snssai | C | 0..1 | This IE shall | | | | | | be present, | | | | | | except during | | | | | | an EPS to 5GS | | | | | | idle mode | | | | | | mobility or | | | | | | handover | | | | | | using the N26 | | | | | | interface. | | | | | | | | | | | | When present, | | | | | | it shall | | | | | | contain the | | | | | | requested | | | | | | S-NSSAI | | | | | | mapped to the | | | | | | HPLMN S-NSSAI | | | | | | by the VPLMN. | +---------------+---------------+---+-------------+---------------+ | vsmfId | NfInstanceId | M | 1 | This IE shall | | | | | | contain the | | | | | | identifier of | | | | | | the serving | | | | | | SMF. | +---------------+---------------+---+-------------+---------------+ | s | PlmnId | M | 1 | This IE shall | | ervingNetwork | | | | contain the | | | | | | serving core | | | | | | network | | | | | | operator PLMN | | | | | | ID. | +---------------+---------------+---+-------------+---------------+ | requestType | RequestType | C | 0..1 | This IE shall | | | | | | be present if | | | | | | the request | | | | | | relates to an | | | | | | existing PDU | | | | | | session or an | | | | | | existing | | | | | | emergency PDU | | | | | | session, | | | | | | except during | | | | | | an EPS to 5GS | | | | | | idle mode | | | | | | mobility or | | | | | | handover | | | | | | using the N26 | | | | | | interface. It | | | | | | may be | | | | | | present | | | | | | otherwise. | | | | | | | | | | | | When present, | | | | | | it shall | | | | | | indicate | | | | | | whether the | | | | | | request | | | | | | refers to a | | | | | | new PDU | | | | | | session or | | | | | | emergency PDU | | | | | | session, or | | | | | | to an | | | | | | existing PDU | | | | | | session or | | | | | | emergency PDU | | | | | | session. | +---------------+---------------+---+-------------+---------------+ | epsBearerId | array | C | 1..N | This IE shall | | | (EpsBearerId) | | | be present | | | | | | during an EPS | | | | | | to 5GS Idle | | | | | | mode mobility | | | | | | or handover | | | | | | preparation | | | | | | using the N26 | | | | | | interface. | | | | | | | | | | | | When present, | | | | | | it shall | | | | | | contain the | | | | | | list of EPS | | | | | | bearer Id(s) | | | | | | received from | | | | | | the MME. | +---------------+---------------+---+-------------+---------------+ | pgwS8cFteid | Bytes | C | 0..1 | This IE shall | | | | | | be present | | | | | | during an EPS | | | | | | to 5GS Idle | | | | | | mode mobility | | | | | | or handover | | | | | | preparation | | | | | | using the N26 | | | | | | interface. | | | | | | | | | | | | When present, | | | | | | it shall | | | | | | contain | | | | | | B | | | | | | ase64-encoded | | | | | | characters, | | | | | | encoding the | | | | | | PGW S8 F-TEID | | | | | | for Control | | | | | | Plane as | | | | | | specified in | | | | | | Figure 8.22-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.274 [16] | | | | | | (starting | | | | | | from | | | | | | octet 1), | | | | | | received from | | | | | | the MME. | +---------------+---------------+---+-------------+---------------+ | vsmf | Uri | M | 1 | This IE shall | | PduSessionUri | | | | include the | | | | | | URI | | | | | | representing | | | | | | the PDU | | | | | | session in | | | | | | the V-SMF. | +---------------+---------------+---+-------------+---------------+ | vcnTunnelInfo | TunnelInfo | M | 1 | This IE shall | | | | | | contain the | | | | | | N9 tunnel | | | | | | information | | | | | | on the | | | | | | visited CN | | | | | | side. | +---------------+---------------+---+-------------+---------------+ | anType | AccessType | M | 1 | This IE shall | | | | | | indicate the | | | | | | Access | | | | | | Network Type | | | | | | to which the | | | | | | PDU session | | | | | | is to be | | | | | | associated. | +---------------+---------------+---+-------------+---------------+ | ratType | RatType | C | 0..1 | This IE shall | | | | | | be present | | | | | | and indicate | | | | | | the RAT Type | | | | | | used by the | | | | | | UE, if | | | | | | available. | +---------------+---------------+---+-------------+---------------+ | ueLocation | UserLocation | C | 0..1 | This IE shall | | | | | | contain the | | | | | | UE location | | | | | | information, | | | | | | if it is | | | | | | available. | | | | | | See NOTE. | +---------------+---------------+---+-------------+---------------+ | ueTimeZone | TimeZone | C | 0..1 | This IE shall | | | | | | contain the | | | | | | UE Time Zone, | | | | | | if it is | | | | | | available. | +---------------+---------------+---+-------------+---------------+ | addUeLocation | UserLocation | O | 0..1 | Additional UE | | | | | | location. | | | | | | | | | | | | This IE may | | | | | | be present, | | | | | | if anType | | | | | | indicates a | | | | | | non-3GPP | | | | | | access and a | | | | | | valid 3GPP | | | | | | access user | | | | | | location | | | | | | information | | | | | | is available. | | | | | | | | | | | | When present, | | | | | | it shall | | | | | | contain: | | | | | | | | | | | | - the last | | | | | | known 3GPP | | | | | | access user | | | | | | location; and | | | | | | | | | | | | - the | | | | | | timestamp, if | | | | | | available, | | | | | | indicating | | | | | | the UTC time | | | | | | when the | | | | | | addUeLocation | | | | | | information | | | | | | was acquired. | | | | | | | | | | | | See NOTE. | +---------------+---------------+---+-------------+---------------+ | gpsi | Gpsi | C | 0..1 | This IE shall | | | | | | be present if | | | | | | it is | | | | | | available. | | | | | | When present, | | | | | | it shall | | | | | | contain the | | | | | | user\'s GPSI. | +---------------+---------------+---+-------------+---------------+ | n | Re | C | 0..1 | This IE shall | | 1SmInfoFromUe | fToBinaryData | | | be present if | | | | | | the V-SMF has | | | | | | received | | | | | | known N1 SM | | | | | | information | | | | | | from the UE | | | | | | that does not | | | | | | need to be | | | | | | interpreted | | | | | | by the V-SMF. | | | | | | When present, | | | | | | this IE shall | | | | | | reference the | | | | | | n | | | | | | 1SmInfoFromUe | | | | | | binary data | | | | | | (see clause | | | | | | 6.1.6.4.4). | +---------------+---------------+---+-------------+---------------+ | un | Re | C | 0..1 | This IE shall | | knownN1SmInfo | fToBinaryData | | | be present if | | | | | | the V-SMF has | | | | | | received | | | | | | unknown N1 SM | | | | | | information | | | | | | from the UE. | | | | | | When present, | | | | | | this IE shall | | | | | | reference the | | | | | | un | | | | | | knownN1SmInfo | | | | | | binary data | | | | | | (see clause | | | | | | 6.1.6.4.4). | +---------------+---------------+---+-------------+---------------+ | supp | Supp | C | 0..1 | This IE shall | | ortedFeatures | ortedFeatures | | | be present if | | | | | | at least one | | | | | | optional | | | | | | feature | | | | | | defined in | | | | | | clause 6.1.8 | | | | | | is supported. | +---------------+---------------+---+-------------+---------------+ | hPcfId | NfInstanceId | O | 0..1 | When present, | | | | | | this IE shall | | | | | | contain the | | | | | | identifier of | | | | | | the H-PCF | | | | | | selected by | | | | | | the AMF for | | | | | | the UE (for | | | | | | Access and | | | | | | Mobility | | | | | | Policy | | | | | | Control). | +---------------+---------------+---+-------------+---------------+ | hoPreparat | boolean | C | 0..1 | This IE shall | | ionIndication | | | | be present | | | | | | during an EPS | | | | | | to 5GS | | | | | | handover | | | | | | preparation | | | | | | using the N26 | | | | | | interface. | | | | | | | | | | | | When present, | | | | | | it shall be | | | | | | set as | | | | | | follows: | | | | | | | | | | | | > \- true: an | | | | | | > EPS to 5GS | | | | | | > handover | | | | | | > preparation | | | | | | > is in | | | | | | > progress; | | | | | | > the | | | | | | > PGW-C/SMF | | | | | | > shall not | | | | | | > switch the | | | | | | > DL user | | | | | | > plane of | | | | | | > the PDU | | | | | | > session | | | | | | > yet. | | | | | | > | | | | | | > \- false: | | | | | | > there is no | | | | | | > on-going | | | | | | > EPS to 5GS | | | | | | > handover | | | | | | > preparation | | | | | | > in | | | | | | > progress. | | | | | | > If a | | | | | | > handover | | | | | | > preparation | | | | | | > was in | | | | | | > progress, | | | | | | > the | | | | | | > handover | | | | | | > has been | | | | | | > completed. | | | | | | > The | | | | | | > PGW-C/SMF | | | | | | > shall | | | | | | > switch the | | | | | | > DL user | | | | | | > plane of | | | | | | > the PDU | | | | | | > session | | | | | | > using the | | | | | | > N9 tunnel | | | | | | > information | | | | | | > that has | | | | | | > been | | | | | | > received in | | | | | | > the | | | | | | > v | | | | | | cnTunnelInfo. | | | | | | | | | | | | It shall be | | | | | | set to | | | | | | \"true\" | | | | | | during an EPS | | | | | | to 5GS | | | | | | handover | | | | | | preparation | | | | | | using the N26 | | | | | | interface. | +---------------+---------------+---+-------------+---------------+ | selMode | Dnn | C | 0..1 | This IE shall | | | SelectionMode | | | be present if | | | | | | it is | | | | | | available. | | | | | | When present, | | | | | | it shall | | | | | | indicate | | | | | | whether the | | | | | | requested DNN | | | | | | corresponds | | | | | | to an | | | | | | explicitly | | | | | | subscribed | | | | | | DNN or to the | | | | | | usage of a | | | | | | wildcard | | | | | | subscription. | +---------------+---------------+---+-------------+---------------+ | alwa | boolean | C | 0..1 | This IE shall | | ysOnRequested | | | | be present | | | | | | and set to | | | | | | true if the | | | | | | UE requests | | | | | | to setup an | | | | | | always-on PDU | | | | | | session and | | | | | | this is | | | | | | allowed by | | | | | | local policy | | | | | | in the V-SMF. | | | | | | | | | | | | When present, | | | | | | it shall be | | | | | | set as | | | | | | follows: | | | | | | | | | | | | > \- true: | | | | | | > request for | | | | | | > an | | | | | | > always-on | | | | | | > PDU session | | | | | | > | | | | | | > \- false | | | | | | > (default): | | | | | | > not a | | | | | | > request for | | | | | | > an | | | | | | > always-on | | | | | | > PDU session | +---------------+---------------+---+-------------+---------------+ | udmGroupId | NfGroupId | O | 0..1 | When present, | | | | | | it shall | | | | | | indicate the | | | | | | identity of | | | | | | the UDM group | | | | | | serving the | | | | | | UE. | +---------------+---------------+---+-------------+---------------+ | rou | string | O | 0..1 | When present, | | tingIndicator | | | | it shall | | | | | | indicate the | | | | | | Routing | | | | | | Indicator of | | | | | | the UE. | +---------------+---------------+---+-------------+---------------+ | epsIn | EpsInterwork | O | 0..1 | This IE may | | terworkingInd | ingIndication | | | be present if | | | | | | the | | | | | | indication | | | | | | has been | | | | | | received from | | | | | | AMF and is | | | | | | allowed to be | | | | | | forwarded to | | | | | | H-SMF by | | | | | | operator | | | | | | c | | | | | | onfiguration. | | | | | | | | | | | | When present, | | | | | | this IE shall | | | | | | indicate | | | | | | whether the | | | | | | PDU session | | | | | | may possibly | | | | | | be moved to | | | | | | EPS and | | | | | | whether N26 | | | | | | interface to | | | | | | be used | | | | | | during EPS | | | | | | interworking | | | | | | procedures. | +---------------+---------------+---+-------------+---------------+ | vSmfServ | string | O | 0..1 | When present, | | iceInstanceId | | | | this IE shall | | | | | | contain the | | | | | | serv | | | | | | iceInstanceId | | | | | | of the V-SMF | | | | | | service | | | | | | instance | | | | | | serving the | | | | | | PDU session. | | | | | | | | | | | | This IE may | | | | | | be used by | | | | | | the H-SMF to | | | | | | identify PDU | | | | | | sessions | | | | | | affected by a | | | | | | failure or | | | | | | restart of | | | | | | the V-SMF | | | | | | service (see | | | | | | clauses 6.2 | | | | | | and 6.3 of | | | | | | 3GPP TS 23 | | | | | | .527 [24]). | +---------------+---------------+---+-------------+---------------+ | recoveryTime | DateTime | O | 0..1 | Timestamp | | | | | | when the | | | | | | V-SMF service | | | | | | instance | | | | | | serving the | | | | | | PDU session | | | | | | was | | | | | | (re)started | | | | | | (see clause | | | | | | 6.3 of | | | | | | 3GPP TS 23 | | | | | | .527 [24]). | +---------------+---------------+---+-------------+---------------+ | roamingCh | RoamingCh | O | 0..1 | Roaming | | argingProfile | argingProfile | | | Charging | | | | | | Profile | | | | | | applicable in | | | | | | the VPLMN | | | | | | (see clauses | | | | | | 5.1.9.1, | | | | | | 5.2.1.7 and | | | | | | 5.2.2.12.2 of | | | | | | 3GPP TS 32 | | | | | | .255 [25]). | +---------------+---------------+---+-------------+---------------+ | chargingId | string | O | 0..1 | Charging ID | | | | | | (see clauses | | | | | | 5.1.9.1 of | | | | | | 3GPP TS 32 | | | | | | .255 [25]). | +---------------+---------------+---+-------------+---------------+ | ol | PduSessionId | C | 0..1 | This IE shall | | dPduSessionId | | | | be present if | | | | | | this | | | | | | information | | | | | | is received | | | | | | from the UE | | | | | | and the same | | | | | | SMF is | | | | | | selected for | | | | | | SSC mode 3. | | | | | | | | | | | | When present, | | | | | | it shall | | | | | | contain the | | | | | | old PDU | | | | | | Session ID | | | | | | received from | | | | | | the UE. See | | | | | | clauses | | | | | | 4.3.2.2.1 and | | | | | | 4.3.5.2 of | | | | | | 3GPP TS | | | | | | 23.502 [3]. | +---------------+---------------+---+-------------+---------------+ | epsBe | EpsBearer | C | 0..1 | This IE shall | | arerCtxStatus | ContextStatus | | | be present | | | | | | during an EPS | | | | | | to 5GS idle | | | | | | mode mobility | | | | | | using the N26 | | | | | | interface, if | | | | | | received in | | | | | | the Create SM | | | | | | Context | | | | | | request. | | | | | | | | | | | | When present, | | | | | | it shall be | | | | | | set to the | | | | | | value | | | | | | received in | | | | | | the Create SM | | | | | | Context | | | | | | request. | +---------------+---------------+---+-------------+---------------+ | amfNfId | NfInstanceId | C | 0..1 | This IE shall | | | | | | be present | | | | | | unless the | | | | | | PDU session | | | | | | is related to | | | | | | regulatory | | | | | | prioritized | | | | | | service. | | | | | | | | | | | | When present, | | | | | | it shall | | | | | | contain the | | | | | | identifier of | | | | | | the serving | | | | | | AMF during | | | | | | UE-requested | | | | | | PDU Session | | | | | | Establishment | | | | | | Procedure. | | | | | | See clauses | | | | | | 4.3.2.2.2 of | | | | | | 3GPP TS | | | | | | 23.502 [3]. | +---------------+---------------+---+-------------+---------------+ | guami | Guami | C | 0..1 | This IE shall | | | | | | be present if | | | | | | the amfNfId | | | | | | is present. | | | | | | | | | | | | When present, | | | | | | it shall | | | | | | contain the | | | | | | serving | | | | | | AMF\'s GUAMI. | +---------------+---------------+---+-------------+---------------+ | maxIn | Max | C | 0..1 | This IE shall | | tegrityProtec | IntegrityProt | | | be present if | | tedDataRateUl | ectedDataRate | | | it is | | | | | | available. | | | | | | | | | | | | When present, | | | | | | it shall | | | | | | indicate the | | | | | | maximum | | | | | | integrity | | | | | | protected | | | | | | data rate | | | | | | supported by | | | | | | the UE for | | | | | | uplink. | +---------------+---------------+---+-------------+---------------+ | maxIn | Max | C | 0..1 | This IE shall | | tegrityProtec | IntegrityProt | | | be present if | | tedDataRateDl | ectedDataRate | | | it is | | | | | | available. | | | | | | | | | | | | When present, | | | | | | it shall | | | | | | indicate the | | | | | | maximum | | | | | | integrity | | | | | | protected | | | | | | data rate | | | | | | supported by | | | | | | the UE for | | | | | | downlink. | +---------------+---------------+---+-------------+---------------+ | NOTE: In | | | | | | shared | | | | | | networks, the | | | | | | PLMN ID that | | | | | | is | | | | | | communicated | | | | | | in this IE | | | | | | shall be that | | | | | | of the | | | | | | selected Core | | | | | | Network | | | | | | Operator. | | | | | +---------------+---------------+---+-------------+---------------+
##### 6.1.6.2.10 Type: PduSessionCreatedData
Table 6.1.6.2.10-1: Definition of type PduSessionCreatedData
+---------------+---------------+---+-------------+---------------+ | Attribute | Data type | P | Cardinality | Description | | name | | | | | +===============+===============+===+=============+===============+ | p | P | M | 1 | This IE shall | | duSessionType | duSessionType | | | indicate the | | | | | | selected PDU | | | | | | type. | +---------------+---------------+---+-------------+---------------+ | sscMode | string | M | 1 | This IE shall | | | | | | indicate the | | | | | | SSC mode | | | | | | applicable to | | | | | | the PDU | | | | | | session. | | | | | | | | | | | | When present, | | | | | | it shall be | | | | | | encoded as | | | | | | one character | | | | | | in | | | | | | hexadecimal | | | | | | re | | | | | | presentation, | | | | | | taking a | | | | | | value of | | | | | | \"0\" to | | | | | | \"7\", | | | | | | representing | | | | | | the 3 bits of | | | | | | the SSC mode | | | | | | value of the | | | | | | SSC mode IE | | | | | | specified in | | | | | | clause | | | | | | 9.11.4.16 of | | | | | | 3GPP TS | | | | | | 24.501 [7]. | | | | | | | | | | | | Pattern: | | | | | | \" | | | | | | \^[0-7]\$\" | | | | | | | | | | | | Example: SSC | | | | | | mode 3 shall | | | | | | be encoded as | | | | | | \"3\". | | | | | | | | | | | | See NOTE. | +---------------+---------------+---+-------------+---------------+ | hcnTunnelInfo | TunnelInfo | M | 1 | This IE shall | | | | | | contain the | | | | | | N9 tunnel | | | | | | information | | | | | | on the home | | | | | | CN side. | +---------------+---------------+---+-------------+---------------+ | sessionAmbr | Ambr | M | 1 | This IE shall | | | | | | contain the | | | | | | Session AMBR | | | | | | granted to | | | | | | the PDU | | | | | | session. | +---------------+---------------+---+-------------+---------------+ | qosF | array(QosF | M | 1..N | This IE shall | | lowsSetupList | lowSetupItem) | | | contain the | | | | | | set of QoS | | | | | | flow(s) to | | | | | | establish for | | | | | | the PDU | | | | | | session. It | | | | | | shall contain | | | | | | at least the | | | | | | Qos flow | | | | | | associated to | | | | | | the default | | | | | | Qos rule. | +---------------+---------------+---+-------------+---------------+ | h | NfInstanceId | M | 1 | This IE shall | | SmfInstanceId | | | | contain the | | | | | | identifier of | | | | | | the home SMF. | +---------------+---------------+---+-------------+---------------+ | pduSessionId | PduSessionId | C | 0..1 | This IE shall | | | | | | be present | | | | | | during an EPS | | | | | | to 5GS Idle | | | | | | mode mobility | | | | | | or handover | | | | | | preparation | | | | | | using the N26 | | | | | | interface. | | | | | | | | | | | | When present, | | | | | | it shall be | | | | | | set to the | | | | | | PDU Session | | | | | | ID. | +---------------+---------------+---+-------------+---------------+ | sNssai | Snssai | C | 0..1 | This IE shall | | | | | | be present | | | | | | during an EPS | | | | | | to 5GS Idle | | | | | | mode mobility | | | | | | or handover | | | | | | using the N26 | | | | | | interface. | | | | | | | | | | | | When present, | | | | | | it shall | | | | | | contain the | | | | | | S-NSSAI | | | | | | assigned to | | | | | | the PDU | | | | | | session in | | | | | | the Home | | | | | | PLMN. | +---------------+---------------+---+-------------+---------------+ | enable | boolean | C | 0..1 | This IE shall | | PauseCharging | | | | be present, | | | | | | based on | | | | | | operator\'s | | | | | | policy, to | | | | | | enable the | | | | | | use of Pause | | | | | | of Charging | | | | | | for the PDU | | | | | | session (see | | | | | | clause 4.4.4 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 3.502 [3]). | | | | | | | | | | | | When present, | | | | | | it shall be | | | | | | set as | | | | | | follows: | | | | | | | | | | | | > \- true: | | | | | | > enable | | | | | | > Pause of | | | | | | > Charging; | | | | | | > | | | | | | > \- false | | | | | | > (default): | | | | | | > disable | | | | | | > Pause of | | | | | | > Charging. | +---------------+---------------+---+-------------+---------------+ | ueIpv4Address | Ipv4Addr | C | 0..1 | This IE shall | | | | | | be present if | | | | | | the H-SMF | | | | | | assigns a UE | | | | | | IPv4 address | | | | | | to the PDU | | | | | | session. | +---------------+---------------+---+-------------+---------------+ | ueIpv6Prefix | Ipv6Prefix | C | 0..1 | This IE shall | | | | | | be present if | | | | | | the H-SMF | | | | | | assigns a UE | | | | | | IPv6 prefix | | | | | | to the PDU | | | | | | session. | +---------------+---------------+---+-------------+---------------+ | n1SmInfoToUe | Re | C | 0..1 | This IE shall | | | fToBinaryData | | | be present if | | | | | | the H-SMF | | | | | | needs to send | | | | | | N1 SM | | | | | | information | | | | | | to the UE | | | | | | that does not | | | | | | need to be | | | | | | interpreted | | | | | | by the V-SMF. | | | | | | When present, | | | | | | this IE shall | | | | | | reference the | | | | | | n1SmInfoToUe | | | | | | binary data | | | | | | (see clause | | | | | | 6.1.6.4.4). | +---------------+---------------+---+-------------+---------------+ | epsPdnCnxInfo | EpsPdnCnxInfo | C | 0..1 | This IE shall | | | | | | be present if | | | | | | the PDU | | | | | | session may | | | | | | be moved to | | | | | | EPS during | | | | | | its lifetime. | +---------------+---------------+---+-------------+---------------+ | epsBearerInfo | array(E | C | 1..N | This IE shall | | | psBearerInfo) | | | be present if | | | | | | the PDU | | | | | | session may | | | | | | be moved to | | | | | | EPS during | | | | | | its lifetime. | +---------------+---------------+---+-------------+---------------+ | supp | Supp | C | 0..1 | This IE shall | | ortedFeatures | ortedFeatures | | | be present if | | | | | | at least one | | | | | | optional | | | | | | feature | | | | | | defined in | | | | | | clause 6.1.8 | | | | | | is supported. | +---------------+---------------+---+-------------+---------------+ | max | Max | C | 0..1 | This IE shall | | IntegrityProt | IntegrityProt | | | be present if | | ectedDataRate | ectedDataRate | | | the | | | | | | upSecurity IE | | | | | | is present | | | | | | and indicates | | | | | | that | | | | | | integrity | | | | | | protection is | | | | | | preferred or | | | | | | required. | | | | | | | | | | | | When present, | | | | | | it shall | | | | | | indicate the | | | | | | maximum | | | | | | integrity | | | | | | protected | | | | | | data rate for | | | | | | uplink. | | | | | | | | | | | | If the | | | | | | maxIn | | | | | | tegrityProtec | | | | | | tedDataRateDl | | | | | | _IE is | | | | | | absent_ , this | | | | | | IE applies to | | | | | | both uplink | | | | | | and downlink. | +---------------+---------------+---+-------------+---------------+ | maxIn | Max | C | 0..1 | This IE may | | tegrityProtec | IntegrityProt | | | be present if | | tedDataRateDl | ectedDataRate | | | the | | | | | | upSecurity IE | | | | | | is present | | | | | | and indicates | | | | | | that | | | | | | integrity | | | | | | protection is | | | | | | preferred or | | | | | | required. | | | | | | | | | | | | When present, | | | | | | it shall | | | | | | indicate the | | | | | | maximum | | | | | | integrity | | | | | | protected | | | | | | data rate for | | | | | | downlink. | +---------------+---------------+---+-------------+---------------+ | al | boolean | C | 0..1 | This IE shall | | waysOnGranted | | | | be present if | | | | | | the | | | | | | alwa | | | | | | ysOnRequested | | | | | | IE was | | | | | | received in | | | | | | the request | | | | | | or if the | | | | | | H-SMF | | | | | | determines, | | | | | | based on | | | | | | local policy, | | | | | | that the PDU | | | | | | session needs | | | | | | to be | | | | | | established | | | | | | as an | | | | | | always-on PDU | | | | | | session. | | | | | | | | | | | | When present, | | | | | | it shall be | | | | | | set as | | | | | | follows: | | | | | | | | | | | | > \- true: | | | | | | > always-on | | | | | | > PDU session | | | | | | > granted. | | | | | | > | | | | | | > \- false | | | | | | > (default): | | | | | | > always-on | | | | | | > PDU session | | | | | | > not | | | | | | > granted. | +---------------+---------------+---+-------------+---------------+ | gpsi | Gpsi | C | 0..1 | This IE shall | | | | | | be present if | | | | | | no GPSI IE is | | | | | | provided in | | | | | | the request, | | | | | | e.g. for a | | | | | | PDU session | | | | | | moved from | | | | | | another | | | | | | access or | | | | | | another | | | | | | system, and | | | | | | the SMF knows | | | | | | that a GPSI | | | | | | is already | | | | | | associated | | | | | | with the PDU | | | | | | session. | | | | | | | | | | | | When present, | | | | | | it shall | | | | | | contain the | | | | | | user\'s GPSI | | | | | | associated | | | | | | with the PDU | | | | | | session. | +---------------+---------------+---+-------------+---------------+ | upSecurity | UpSecurity | O | 0..1 | When present, | | | | | | this IE shall | | | | | | indicate the | | | | | | security | | | | | | policy for | | | | | | integrity | | | | | | protection | | | | | | and | | | | | | encryption | | | | | | for the user | | | | | | plane of the | | | | | | PDU session. | +---------------+---------------+---+-------------+---------------+ | roamingCh | RoamingCh | O | 0..1 | Roaming | | argingProfile | argingProfile | | | Charging | | | | | | Profile | | | | | | selected by | | | | | | the HPLMN | | | | | | (see clauses | | | | | | 5.1.9.1, | | | | | | 5.2.1.7 and | | | | | | 5.2.2.12.2 of | | | | | | 3GPP TS 32 | | | | | | .255 [25]). | +---------------+---------------+---+-------------+---------------+ | hSmfServ | string | O | 0..1 | When present, | | iceInstanceId | | | | this IE shall | | | | | | contain the | | | | | | serv | | | | | | iceInstanceId | | | | | | of the H-SMF | | | | | | service | | | | | | instance | | | | | | serving the | | | | | | PDU session. | | | | | | | | | | | | This IE may | | | | | | be used by | | | | | | the V-SMF to | | | | | | identify PDU | | | | | | sessions | | | | | | affected by a | | | | | | failure or | | | | | | restart of | | | | | | the H-SMF | | | | | | service (see | | | | | | clause 6.2 of | | | | | | 3GPP TS 23 | | | | | | .527 [24]). | +---------------+---------------+---+-------------+---------------+ | recoveryTime | DateTime | O | 0..1 | Timestamp | | | | | | when the | | | | | | H-SMF service | | | | | | instance | | | | | | serving the | | | | | | PDU session | | | | | | was | | | | | | (re)started | | | | | | (see clause | | | | | | 6.3 of | | | | | | 3GPP TS 23 | | | | | | .527 [24]). | +---------------+---------------+---+-------------+---------------+ | ueIp | string | C | 0..1 | This IE shall | | v6InterfaceId | | | | be present if | | | | | | the H-SMF has | | | | | | assigned IPv6 | | | | | | interface | | | | | | identifier to | | | | | | the UE during | | | | | | the PDU | | | | | | session | | | | | | establishment | | | | | | for the | | | | | | Home-routed | | | | | | Roaming | | | | | | scenario. | | | | | | | | | | | | When present, | | | | | | it shall | | | | | | encode the UE | | | | | | IPv6 | | | | | | Interface | | | | | | Identifier to | | | | | | be used by | | | | | | the UE for | | | | | | its | | | | | | link-local | | | | | | address | | | | | | configuration | | | | | | with 16 | | | | | | hexadecimal | | | | | | digits. | | | | | | | | | | | | Pattern: | | | | | | \"\^[A-Fa-f | | | | | | 0-9]{16}\$\" | +---------------+---------------+---+-------------+---------------+ | NOTE: This IE | | | | | | contains | | | | | | information | | | | | | that the | | | | | | V-SMF only | | | | | | needs to | | | | | | transfer to | | | | | | the UE | | | | | | (without | | | | | | int | | | | | | erpretation). | | | | | | It is sent as | | | | | | a separate IE | | | | | | rather than | | | | | | within the | | | | | | n1SmInfoToUE | | | | | | binary data | | | | | | because the | | | | | | Selected SSC | | | | | | mode IE is | | | | | | defined as a | | | | | | \"V\" IE | | | | | | (i.e. without | | | | | | a Type field) | | | | | | in the NAS | | | | | | PDU Session | | | | | | Establishment | | | | | | Accept | | | | | | message. | | | | | +---------------+---------------+---+-------------+---------------+
##### 6.1.6.2.11 Type: HsmfUpdateData
Table 6.1.6.2.11-1: Definition of type HsmfUpdateData
+---------------+---------------+---+-------------+---------------+ | Attribute | Data type | P | Cardinality | Description | | name | | | | | +===============+===============+===+=============+===============+ | requ | Requ | M | 1 | This IE shall | | estIndication | estIndication | | | indicate the | | | | | | request type. | +---------------+---------------+---+-------------+---------------+ | pei | Pei | C | 0..1 | This IE shall | | | | | | be present if | | | | | | it is | | | | | | available and | | | | | | has not been | | | | | | provided | | | | | | earlier to | | | | | | the H-SMF. | | | | | | | | | | | | When present, | | | | | | this IE shall | | | | | | contain the | | | | | | permanent | | | | | | equipment | | | | | | identifier. | +---------------+---------------+---+-------------+---------------+ | vcnTunnelInfo | TunnelInfo | C | 1 | This IE shall | | | | | | be present if | | | | | | the N9 tunnel | | | | | | information | | | | | | on the | | | | | | visited CN | | | | | | side provided | | | | | | earlier to | | | | | | the H-SMF has | | | | | | changed. | | | | | | | | | | | | When present, | | | | | | this IE shall | | | | | | contain the | | | | | | new N9 tunnel | | | | | | information | | | | | | on the | | | | | | visited CN | | | | | | side. | +---------------+---------------+---+-------------+---------------+ | s | PlmnId | C | 0..1 | This IE shall | | ervingNetwork | | | | contain the | | | | | | serving core | | | | | | network | | | | | | operator PLMN | | | | | | ID, if it has | | | | | | changed. | +---------------+---------------+---+-------------+---------------+ | anType | AccessType | C | 0..1 | This IE shall | | | | | | be present if | | | | | | the Access | | | | | | Network Type | | | | | | provided | | | | | | earlier to | | | | | | the H-SMF has | | | | | | changed, e.g. | | | | | | during a | | | | | | handover of | | | | | | the PDU | | | | | | session | | | | | | between 3GPP | | | | | | access and | | | | | | untrusted | | | | | | non-3GPP | | | | | | access (see | | | | | | clause | | | | | | 5.2.2.8.2.5). | | | | | | | | | | | | When present, | | | | | | this IE shall | | | | | | indicate the | | | | | | new Access | | | | | | Network Type | | | | | | to which the | | | | | | PDU session | | | | | | is to be | | | | | | associated. | +---------------+---------------+---+-------------+---------------+ | ratType | RatType | C | 0..1 | This IE shall | | | | | | be present | | | | | | and indicate | | | | | | the RAT Type | | | | | | used by the | | | | | | UE, if | | | | | | available, | | | | | | upon a change | | | | | | of RAT Type. | +---------------+---------------+---+-------------+---------------+ | ueLocation | UserLocation | C | 0..1 | This IE shall | | | | | | be present if | | | | | | it is | | | | | | available, | | | | | | the UE | | | | | | Location has | | | | | | changed and | | | | | | needs to be | | | | | | reported to | | | | | | the H-SMF. | | | | | | | | | | | | When present, | | | | | | this IE shall | | | | | | contain: | | | | | | | | | | | | - the new UE | | | | | | location | | | | | | information; | | | | | | and | | | | | | | | | | | | - the | | | | | | timestamp, if | | | | | | available, | | | | | | indicating | | | | | | the UTC time | | | | | | when the | | | | | | UeLocation | | | | | | information | | | | | | was acquired. | | | | | | | | | | | | (NOTE 1) | +---------------+---------------+---+-------------+---------------+ | ueTimeZone | TimeZone | C | 0..1 | This IE shall | | | | | | be present if | | | | | | it is | | | | | | available, | | | | | | the UE Time | | | | | | Zone has | | | | | | changed and | | | | | | needs to be | | | | | | reported to | | | | | | the H-SMF. | | | | | | | | | | | | When present, | | | | | | this IE shall | | | | | | contain the | | | | | | new UE Time | | | | | | Zone. | +---------------+---------------+---+-------------+---------------+ | addUeLocation | UserLocation | O | 0..1 | Additional UE | | | | | | location. | | | | | | | | | | | | This IE may | | | | | | be present, | | | | | | if anType | | | | | | indicates a | | | | | | non-3GPP | | | | | | access and a | | | | | | valid 3GPP | | | | | | access user | | | | | | location | | | | | | information | | | | | | is available. | | | | | | | | | | | | When present, | | | | | | it shall | | | | | | contain: | | | | | | | | | | | | - the last | | | | | | known 3GPP | | | | | | access user | | | | | | location; and | | | | | | | | | | | | - the | | | | | | timestamp, if | | | | | | available, | | | | | | indicating | | | | | | the UTC time | | | | | | when the | | | | | | addUeLocation | | | | | | information | | | | | | was acquired. | | | | | | | | | | | | (NOTE 1) | +---------------+---------------+---+-------------+---------------+ | pauseCharging | boolean | C | 0..1 | This IE shall | | | | | | be present if | | | | | | the H-SMF | | | | | | enabled the | | | | | | use of Pause | | | | | | Pause of | | | | | | Charging for | | | | | | the PDU | | | | | | session | | | | | | during the | | | | | | PDU session | | | | | | establishment | | | | | | and | | | | | | | | | | | | Pause of | | | | | | Charging | | | | | | needs to be | | | | | | started or | | | | | | stopped (see | | | | | | clause 4.4.4 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 3.502 [3]). | | | | | | | | | | | | When present, | | | | | | it shall be | | | | | | set as | | | | | | follows: | | | | | | | | | | | | > \- true: to | | | | | | > Start Pause | | | | | | > of | | | | | | > Charging; | | | | | | > | | | | | | > \- false: | | | | | | > to Stop | | | | | | > Pause of | | | | | | > Charging. | +---------------+---------------+---+-------------+---------------+ | pti | Procedure | C | 0..1 | This IE shall | | | TransactionId | | | be present if | | | | | | the | | | | | | requ | | | | | | estIndication | | | | | | indicates a | | | | | | UE requested | | | | | | PDU session | | | | | | modification | | | | | | or release. | | | | | | When present, | | | | | | it shall | | | | | | contain the | | | | | | PTI value | | | | | | received from | | | | | | the UE. | +---------------+---------------+---+-------------+---------------+ | n | Re | C | 0..1 | This IE shall | | 1SmInfoFromUe | fToBinaryData | | | be present if | | | | | | the V-SMF has | | | | | | received | | | | | | known N1 SM | | | | | | information | | | | | | from the UE | | | | | | that does not | | | | | | need to be | | | | | | interpreted | | | | | | by the V-SMF. | | | | | | When present, | | | | | | this IE shall | | | | | | reference the | | | | | | n | | | | | | 1SmInfoFromUe | | | | | | binary data | | | | | | (see clause | | | | | | 6.1.6.4.4). | +---------------+---------------+---+-------------+---------------+ | un | Re | C | 0..1 | This IE shall | | knownN1SmInfo | fToBinaryData | | | be present if | | | | | | the V-SMF has | | | | | | received | | | | | | unknown N1 SM | | | | | | information | | | | | | from the UE. | | | | | | When present, | | | | | | this IE shall | | | | | | reference the | | | | | | un | | | | | | knownN1SmInfo | | | | | | binary data | | | | | | (see clause | | | | | | 6.1.6.4.4). | +---------------+---------------+---+-------------+---------------+ | qosFlows | array | C | 1..N | This IE shall | | RelNotifyList | (QosFlowItem) | | | be present if | | | | | | QoS flows | | | | | | have been | | | | | | released. | +---------------+---------------+---+-------------+---------------+ | qosFl | array(QosFl | C | 1..N | This IE shall | | owsNotifyList | owNotifyItem) | | | be present if | | | | | | the QoS | | | | | | targets for | | | | | | GBR QoS | | | | | | flow(s) are | | | | | | not fulfilled | | | | | | anymore or | | | | | | when they are | | | | | | fulfilled | | | | | | again. | +---------------+---------------+---+-------------+---------------+ | NotifyList | a | C | 1..N | Description | | | rray(PduSessi | | | of | | | onNotifyItem) | | | notifications | | | | | | related to | | | | | | the PDU | | | | | | session. This | | | | | | IE shall be | | | | | | present if | | | | | | the NG-RAN | | | | | | has | | | | | | established | | | | | | user plane | | | | | | resources for | | | | | | the PDU | | | | | | session that | | | | | | do not fulfil | | | | | | the User | | | | | | Plane | | | | | | Security | | | | | | Enforcement | | | | | | with a value | | | | | | Preferred, or | | | | | | when the user | | | | | | plane | | | | | | security | | | | | | enforcement | | | | | | is fulfilled | | | | | | again. | +---------------+---------------+---+-------------+---------------+ | epsBearerId | array | C | 0..N | This IE shall | | | (EpsBearerId) | | | be present | | | | | | during an EPS | | | | | | to 5GS | | | | | | handover | | | | | | execution | | | | | | using the N26 | | | | | | interface. | | | | | | | | | | | | When present, | | | | | | it shall | | | | | | contain the | | | | | | list of EPS | | | | | | bearer Id(s) | | | | | | successfully | | | | | | handed over | | | | | | to 5GS. The | | | | | | array shall | | | | | | be empty if | | | | | | no resource | | | | | | was | | | | | | successfully | | | | | | allocated in | | | | | | 5GS for any | | | | | | PDU session. | +---------------+---------------+---+-------------+---------------+ | hoPreparat | boolean | C | 0..1 | This IE shall | | ionIndication | | | | be present | | | | | | during an EPS | | | | | | to 5GS | | | | | | handover | | | | | | preparation | | | | | | and handover | | | | | | execution | | | | | | using the N26 | | | | | | interface. | | | | | | | | | | | | When present, | | | | | | it shall be | | | | | | set as | | | | | | follows: | | | | | | | | | | | | > \- true: an | | | | | | > EPS to 5GS | | | | | | > handover | | | | | | > preparation | | | | | | > is in | | | | | | > progress; | | | | | | > the | | | | | | > PGW-C/SMF | | | | | | > shall not | | | | | | > switch the | | | | | | > DL user | | | | | | > plane of | | | | | | > the PDU | | | | | | > session | | | | | | > yet. | | | | | | > | | | | | | > \- false: | | | | | | > there is no | | | | | | > on-going | | | | | | > EPS to 5GS | | | | | | > handover | | | | | | > preparation | | | | | | > in | | | | | | > progress. | | | | | | > If a | | | | | | > handover | | | | | | > preparation | | | | | | > was in | | | | | | > progress, | | | | | | > the | | | | | | > handover | | | | | | > has been | | | | | | > completed. | | | | | | > The | | | | | | > PGW-C/SMF | | | | | | > shall | | | | | | > switch the | | | | | | > DL user | | | | | | > plane of | | | | | | > the PDU | | | | | | > session | | | | | | > using the | | | | | | > N9 tunnel | | | | | | > information | | | | | | > that has | | | | | | > been | | | | | | > received in | | | | | | > the | | | | | | > v | | | | | | cnTunnelInfo. | | | | | | | | | | | | It shall be | | | | | | set to | | | | | | \"true\" | | | | | | during an EPS | | | | | | to 5GS | | | | | | handover | | | | | | preparation | | | | | | using the N26 | | | | | | interface. | | | | | | | | | | | | It shall be | | | | | | set to | | | | | | \"false\" | | | | | | during an EPS | | | | | | to 5GS | | | | | | handover | | | | | | execution | | | | | | using the N26 | | | | | | interface. | +---------------+---------------+---+-------------+---------------+ | revokeEbiList | array | C | 1..N | This IE shall | | | (EpsBearerId) | | | be present to | | | | | | request the | | | | | | H-SMF to | | | | | | revoke some | | | | | | EBIs (see | | | | | | clause | | | | | | 4.11.1.4.1 of | | | | | | 3GPP TS 2 | | | | | | 3.502 [3]). | | | | | | When present, | | | | | | it shall | | | | | | contain the | | | | | | EBIs to | | | | | | revoke. | +---------------+---------------+---+-------------+---------------+ | cause | Cause | C | 0..1 | This IE shall | | | | | | be present | | | | | | and set as | | | | | | specified in | | | | | | clause | | | | | | 5.2.2.8.2.6 | | | | | | during P-CSCF | | | | | | restoration | | | | | | procedure for | | | | | | home-routed | | | | | | PDU session. | | | | | | | | | | | | When present, | | | | | | this IE shall | | | | | | indicate the | | | | | | NF Service | | | | | | Consumer | | | | | | cause of the | | | | | | requested | | | | | | modification. | +---------------+---------------+---+-------------+---------------+ | ngApCause | NgApCause | C | 0..1 | This IE shall | | | | | | be present, | | | | | | if the | | | | | | information | | | | | | is available | | | | | | and if this | | | | | | information | | | | | | is permitted | | | | | | to be sent to | | | | | | the H-SMF | | | | | | operator | | | | | | according to | | | | | | the V-SMF | | | | | | operator\'s | | | | | | policy. When | | | | | | present, this | | | | | | IE shall | | | | | | indicate the | | | | | | NGAP cause | | | | | | for the | | | | | | requested | | | | | | modification. | +---------------+---------------+---+-------------+---------------+ | 5 | 5GMmCause | C | 0..1 | The V-SMF | | gMmCauseValue | | | | shall include | | | | | | this IE if it | | | | | | received it | | | | | | from the AMF | | | | | | and if this | | | | | | information | | | | | | is permitted | | | | | | to be sent to | | | | | | the H-SMF | | | | | | operator | | | | | | according to | | | | | | the V-SMF | | | | | | operator\'s | | | | | | policy. | +---------------+---------------+---+-------------+---------------+ | alwa | boolean | C | 0..1 | This IE shall | | ysOnRequested | | | | be present | | | | | | and set to | | | | | | true if the | | | | | | UE requests | | | | | | to change the | | | | | | PDU session | | | | | | to an | | | | | | always-on PDU | | | | | | session and | | | | | | this is | | | | | | allowed by | | | | | | local policy | | | | | | in the V-SMF. | | | | | | | | | | | | When present, | | | | | | it shall be | | | | | | set as | | | | | | follows: | | | | | | | | | | | | > \- true: | | | | | | > request for | | | | | | > an | | | | | | > always-on | | | | | | > PDU session | | | | | | > | | | | | | > \- false | | | | | | > (default): | | | | | | > not a | | | | | | > request for | | | | | | > an | | | | | | > always-on | | | | | | > PDU session | +---------------+---------------+---+-------------+---------------+ | epsIn | EpsInterwork | O | 0..1 | This IE may | | terworkingInd | ingIndication | | | be present if | | | | | | the | | | | | | indication | | | | | | has been | | | | | | received from | | | | | | AMF and is | | | | | | allowed to be | | | | | | forwarded to | | | | | | H-SMF by | | | | | | operator | | | | | | c | | | | | | onfiguration. | | | | | | | | | | | | When present, | | | | | | this IE shall | | | | | | indicate | | | | | | whether the | | | | | | PDU session | | | | | | may possibly | | | | | | be moved to | | | | | | EPS and | | | | | | whether N26 | | | | | | interface to | | | | | | be used | | | | | | during EPS | | | | | | interworking | | | | | | procedures. | +---------------+---------------+---+-------------+---------------+ | secondaryR | arra | O | 1..N | This IE may | | atUsageReport | y(SecondaryRa | | | be present to | | | tUsageReport) | | | report usage | | | | | | data for a | | | | | | secondary RAT | | | | | | for QoS | | | | | | flows. | | | | | | | | | | | | (NOTE 2) | +---------------+---------------+---+-------------+---------------+ | secondar | ar | O | 1..N | This IE may | | yRatUsageInfo | ray(Secondary | | | be present to | | | RatUsageInfo) | | | report usage | | | | | | data for a | | | | | | secondary RAT | | | | | | for QoS flows | | | | | | and/or the | | | | | | whole PDU | | | | | | session. | +---------------+---------------+---+-------------+---------------+ | anTyp | boolean | C | 0..1 | This IE shall | | eCanBeChanged | | | | be present | | | | | | and set to | | | | | | true to | | | | | | indicate that | | | | | | the Access | | | | | | Network Type | | | | | | associated to | | | | | | the PDU | | | | | | session can | | | | | | be changed | | | | | | (see clause | | | | | | 5.2.2.8.2.2), | | | | | | during a | | | | | | Service | | | | | | Request | | | | | | procedure | | | | | | (see clauses | | | | | | 4.2.3.2 and | | | | | | 4.3.3.3 of | | | | | | 3GPP TS 23 | | | | | | .502 [3])), | | | | | | in response | | | | | | to paging or | | | | | | NAS | | | | | | notification | | | | | | indicating | | | | | | non-3GPP | | | | | | access, when | | | | | | the PDU | | | | | | Session for | | | | | | which the UE | | | | | | was paged or | | | | | | notified is | | | | | | in the List | | | | | | Of Allowed | | | | | | PDU Sessions | | | | | | provided by | | | | | | the UE, and | | | | | | the AMF | | | | | | received N2 | | | | | | SM | | | | | | Information | | | | | | only or N1 SM | | | | | | Container and | | | | | | N2 SM | | | | | | Information | | | | | | from the SMF | | | | | | in step 3a of | | | | | | c | | | | | | lause 4.2.3.3 | | | | | | of | | | | | | 3GPP TS | | | | | | 23.502 [3]. | | | | | | | | | | | | When present, | | | | | | it shall be | | | | | | set as | | | | | | follows: | | | | | | | | | | | | - true: the | | | | | | access type | | | | | | of the PDU | | | | | | session can | | | | | | be changed. | | | | | | | | | | | | - false | | | | | | (default): | | | | | | the access | | | | | | type of the | | | | | | PDU session | | | | | | cannot be | | | | | | changed. | +---------------+---------------+---+-------------+---------------+ | NOTE 1: In | | | | | | shared | | | | | | networks, the | | | | | | PLMN ID that | | | | | | is | | | | | | communicated | | | | | | in this IE | | | | | | shall be that | | | | | | of the | | | | | | selected Core | | | | | | Network | | | | | | Operator. | | | | | | | | | | | | NOTE 2: An | | | | | | SMF complying | | | | | | with this | | | | | | version of | | | | | | the | | | | | | specification | | | | | | should report | | | | | | secondary RAT | | | | | | usage using | | | | | | the | | | | | | secondar | | | | | | yRatUsageInfo | | | | | | attribute | | | | | | that replaces | | | | | | the | | | | | | secondaryR | | | | | | atUsageReport | | | | | | attribute. | | | | | +---------------+---------------+---+-------------+---------------+
##### 6.1.6.2.12 Type: HsmfUpdatedData
Table 6.1.6.2.12-1: Definition of type HsmfUpdatedData
+---------------+---------------+---+-------------+---------------+ | Attribute | Data type | P | Cardinality | Description | | name | | | | | +===============+===============+===+=============+===============+ | n1SmInfoToUe | Re | C | 0..1 | This IE shall | | | fToBinaryData | | | be present if | | | | | | the H-SMF | | | | | | needs to send | | | | | | N1 SM | | | | | | information | | | | | | to the UE | | | | | | that does not | | | | | | need to be | | | | | | interpreted | | | | | | by the V-SMF. | | | | | | When present, | | | | | | this IE shall | | | | | | reference the | | | | | | n1SmInfoToUe | | | | | | binary data | | | | | | (see clause | | | | | | 6.1.6.4.4). | +---------------+---------------+---+-------------+---------------+ | qosF | array(QosF | C | 1..N | This IE shall | | lowsSetupList | lowSetupItem) | | | be present | | | | | | during a | | | | | | handover | | | | | | between 3GPP | | | | | | and non-3GPP | | | | | | accesses. | | | | | | | | | | | | When present, | | | | | | it shall | | | | | | contain the | | | | | | set of QoS | | | | | | flow(s) to | | | | | | establish for | | | | | | the PDU | | | | | | session for | | | | | | the target | | | | | | access type. | | | | | | | | | | | | (NOTE) | +---------------+---------------+---+-------------+---------------+ | sessionAmbr | Ambr | C | 0..1 | This IE shall | | | | | | be present | | | | | | during a | | | | | | handover | | | | | | between 3GPP | | | | | | and non-3GPP | | | | | | accesses. | | | | | | | | | | | | When present, | | | | | | this IE shall | | | | | | contain the | | | | | | Session AMBR | | | | | | authorized | | | | | | for the PDU | | | | | | session for | | | | | | the target | | | | | | access type. | | | | | | | | | | | | (NOTE) | +---------------+---------------+---+-------------+---------------+ | epsPdnCnxInfo | EpsPdnCnxInfo | C | 0..1 | This IE shall | | | | | | be present | | | | | | during a | | | | | | handover from | | | | | | non-3GPP | | | | | | access to | | | | | | 3GPP access, | | | | | | if the PDU | | | | | | session may | | | | | | be moved to | | | | | | EPS during | | | | | | its lifetime. | | | | | | | | | | | | (NOTE) | +---------------+---------------+---+-------------+---------------+ | epsBearerInfo | array(E | C | 1..N | This IE shall | | | psBearerInfo) | | | be present | | | | | | during a | | | | | | handover from | | | | | | non-3GPP | | | | | | access to | | | | | | 3GPP access, | | | | | | if the PDU | | | | | | session may | | | | | | be moved to | | | | | | EPS during | | | | | | its lifetime. | | | | | | | | | | | | When present, | | | | | | it shall | | | | | | include the | | | | | | complete | | | | | | epsBearerInfo | | | | | | IE(s) for all | | | | | | EBIs. | | | | | | | | | | | | (NOTE) | +---------------+---------------+---+-------------+---------------+ | pti | Procedure | C | 0..1 | This IE shall | | | TransactionId | | | be present | | | | | | during a | | | | | | handover | | | | | | between 3GPP | | | | | | and non-3GPP | | | | | | accesses. | | | | | | | | | | | | When present, | | | | | | it shall | | | | | | contain the | | | | | | PTI value | | | | | | received in | | | | | | the | | | | | | corresponding | | | | | | request. | +---------------+---------------+---+-------------+---------------+ | upSecurity | UpSecurity | O | 0..1 | This IE may | | | | | | be present | | | | | | during a | | | | | | handover from | | | | | | non-3GPP | | | | | | access to | | | | | | 3GPP access, | | | | | | to indicate | | | | | | the security | | | | | | policy for | | | | | | integrity | | | | | | protection | | | | | | and | | | | | | encryption | | | | | | for the user | | | | | | plane of the | | | | | | PDU session | | | | | | in the target | | | | | | access type. | | | | | | | | | | | | (NOTE) | +---------------+---------------+---+-------------+---------------+ | maxIn | Max | C | 0..1 | This IE shall | | tegrityProtec | IntegrityProt | | | be present if | | tedDataRateUl | ectedDataRate | | | the | | | | | | upSecurity IE | | | | | | is present | | | | | | and indicates | | | | | | that | | | | | | integrity | | | | | | protection is | | | | | | preferred or | | | | | | required. | | | | | | | | | | | | When present, | | | | | | it shall | | | | | | indicate the | | | | | | maximum | | | | | | integrity | | | | | | protected | | | | | | data rate for | | | | | | uplink. | | | | | | | | | | | | (NOTE) | +---------------+---------------+---+-------------+---------------+ | maxIn | Max | C | 0..1 | This IE shall | | tegrityProtec | IntegrityProt | | | be present if | | tedDataRateDl | ectedDataRate | | | the | | | | | | upSecurity IE | | | | | | is present | | | | | | and indicates | | | | | | that | | | | | | integrity | | | | | | protection is | | | | | | preferred or | | | | | | required. | | | | | | | | | | | | When present, | | | | | | it shall | | | | | | indicate the | | | | | | maximum | | | | | | integrity | | | | | | protected | | | | | | data rate for | | | | | | downlink. | | | | | | | | | | | | (NOTE) | +---------------+---------------+---+-------------+---------------+ | NOTE: During | | | | | | a handover | | | | | | between 3GPP | | | | | | and non-3GPP | | | | | | accesses, the | | | | | | V-SMF shall | | | | | | delete any | | | | | | corresponding | | | | | | information | | | | | | received | | | | | | earlier for | | | | | | the source | | | | | | access type | | | | | | and use the | | | | | | new | | | | | | information | | | | | | received for | | | | | | the target | | | | | | access type. | | | | | +---------------+---------------+---+-------------+---------------+
##### 6.1.6.2.13 Type: ReleaseData
Table 6.1.6.2.13-1: Definition of type ReleaseData
+---------------+---------------+---+-------------+---------------+ | Attribute | Data type | P | Cardinality | Description | | name | | | | | +===============+===============+===+=============+===============+ | cause | Cause | C | 0..1 | This IE shall | | | | | | be present, | | | | | | if the | | | | | | information | | | | | | is available. | | | | | | When present, | | | | | | this IE shall | | | | | | indicate the | | | | | | NF Service | | | | | | Consumer | | | | | | cause for the | | | | | | requested PDU | | | | | | session | | | | | | release. | +---------------+---------------+---+-------------+---------------+ | ngApCause | NgApCause | C | 0..1 | This IE shall | | | | | | be present, | | | | | | if the | | | | | | information | | | | | | is available | | | | | | and if this | | | | | | information | | | | | | is permitted | | | | | | to be sent to | | | | | | the H-SMF | | | | | | operator | | | | | | according to | | | | | | the V-SMF | | | | | | operator\'s | | | | | | policy. When | | | | | | present, this | | | | | | IE shall | | | | | | indicate the | | | | | | NGAP cause | | | | | | for the | | | | | | requested PDU | | | | | | session | | | | | | release. | +---------------+---------------+---+-------------+---------------+ | 5 | 5GMmCause | C | 0..1 | The V-SMF | | gMmCauseValue | | | | shall include | | | | | | this IE if it | | | | | | received it | | | | | | from the AMF | | | | | | and if this | | | | | | information | | | | | | is permitted | | | | | | to be sent to | | | | | | the H-SMF | | | | | | operator | | | | | | according to | | | | | | the V-SMF | | | | | | operator\'s | | | | | | policy. | +---------------+---------------+---+-------------+---------------+ | ueLocation | UserLocation | C | 0..1 | This IE shall | | | | | | be present, | | | | | | if available. | | | | | | | | | | | | When present, | | | | | | it shall | | | | | | contain the | | | | | | UE location | | | | | | information. | +---------------+---------------+---+-------------+---------------+ | ueTimeZone | TimeZone | C | 0..1 | This IE shall | | | | | | be present, | | | | | | if available. | | | | | | | | | | | | When present, | | | | | | it shall | | | | | | contain the | | | | | | UE location | | | | | | information. | +---------------+---------------+---+-------------+---------------+ | addUeLocation | UserLocation | O | 0..1 | Additional UE | | | | | | location. | | | | | | | | | | | | This IE may | | | | | | be present, | | | | | | if anType | | | | | | previously | | | | | | reported is a | | | | | | non-3GPP | | | | | | access and a | | | | | | valid 3GPP | | | | | | access user | | | | | | location | | | | | | information | | | | | | is available. | | | | | | | | | | | | When present, | | | | | | it shall | | | | | | contain: | | | | | | | | | | | | - the last | | | | | | known 3GPP | | | | | | access user | | | | | | location; and | | | | | | | | | | | | - the | | | | | | timestamp, if | | | | | | available, | | | | | | indicating | | | | | | the UTC time | | | | | | when the | | | | | | addUeLocation | | | | | | information | | | | | | was acquired. | +---------------+---------------+---+-------------+---------------+ | secondaryR | arra | O | 1..N | This IE may | | atUsageReport | y(SecondaryRa | | | be present to | | | tUsageReport) | | | report usage | | | | | | data for a | | | | | | secondary RAT | | | | | | for QoS | | | | | | flows. | | | | | | | | | | | | (NOTE) | +---------------+---------------+---+-------------+---------------+ | secondar | ar | O | 1..N | This IE may | | yRatUsageInfo | ray(Secondary | | | be present to | | | RatUsageInfo) | | | report usage | | | | | | data for a | | | | | | secondary RAT | | | | | | for QoS flows | | | | | | and/or the | | | | | | whole PDU | | | | | | session. | +---------------+---------------+---+-------------+---------------+ | NOTE: An SMF | | | | | | complying | | | | | | with this | | | | | | version of | | | | | | the | | | | | | specification | | | | | | should report | | | | | | secondary RAT | | | | | | usage using | | | | | | the | | | | | | secondar | | | | | | yRatUsageInfo | | | | | | attribute | | | | | | that replaces | | | | | | the | | | | | | secondaryR | | | | | | atUsageReport | | | | | | attribute. | | | | | +---------------+---------------+---+-------------+---------------+
##### 6.1.6.2.14 Type: HsmfUpdateError
Table 6.1.6.2.14-1: Definition of type HsmfUpdateError
+---------------+---------------+---+-------------+---------------+ | Attribute | Data type | P | Cardinality | Description | | name | | | | | +===============+===============+===+=============+===============+ | error | P | M | 1 | More | | | roblemDetails | | | information | | | | | | on the error | | | | | | shall be | | | | | | provided in | | | | | | the \"cause\" | | | | | | attribute of | | | | | | the | | | | | | \"Pro | | | | | | blemDetails\" | | | | | | structure. | +---------------+---------------+---+-------------+---------------+ | pti | Procedure | C | 0..1 | This IE shall | | | TransactionId | | | be present if | | | | | | this is a | | | | | | response sent | | | | | | to a UE | | | | | | requested PDU | | | | | | session | | | | | | modification. | | | | | | When present, | | | | | | it shall | | | | | | contain the | | | | | | PTI value | | | | | | received in | | | | | | the | | | | | | corresponding | | | | | | request. | +---------------+---------------+---+-------------+---------------+ | n1smCause | string | C | 0..1 | This IE shall | | | | | | be present if | | | | | | the request | | | | | | included | | | | | | n1 | | | | | | SmInfoFromUe. | | | | | | | | | | | | When present, | | | | | | it shall | | | | | | contain the | | | | | | 5GSM cause | | | | | | the H-SMF | | | | | | proposes the | | | | | | V-SMF to | | | | | | return to the | | | | | | UE. It shall | | | | | | be encoded as | | | | | | two | | | | | | characters in | | | | | | hexadecimal | | | | | | r | | | | | | epresentation | | | | | | with each | | | | | | character | | | | | | taking a | | | | | | value of | | | | | | \"0\" to | | | | | | \"9\" or | | | | | | \"A\" to | | | | | | \"F\", and | | | | | | represent the | | | | | | cause value | | | | | | of the 5GSM | | | | | | cause IE | | | | | | specified in | | | | | | clause | | | | | | 9.11.4.2 of | | | | | | 3GPP TS | | | | | | 24.501 [7]. | | | | | | | | | | | | Pattern: | | | | | | \"\^[A- | | | | | | F0-9]{2}\$\" | | | | | | | | | | | | Example: the | | | | | | cause | | | | | | \"Invalid | | | | | | mandatory | | | | | | information\" | | | | | | shall be | | | | | | encoded as | | | | | | \"60\". | | | | | | | | | | | | See NOTE. | +---------------+---------------+---+-------------+---------------+ | n1SmInfoToUe | Re | C | 0..1 | This IE shall | | | fToBinaryData | | | be present if | | | | | | the H-SMF | | | | | | needs to send | | | | | | N1 SM | | | | | | information | | | | | | to the UE | | | | | | that does not | | | | | | need to be | | | | | | interpreted | | | | | | by the V-SMF. | | | | | | When present, | | | | | | this IE shall | | | | | | reference the | | | | | | n1SmInfoToUe | | | | | | binary data | | | | | | (see clause | | | | | | 6.1.6.4.4). | +---------------+---------------+---+-------------+---------------+ | backOffTimer | DurationSec | O | 0..1 | When present, | | | | | | this IE shall | | | | | | indicate a | | | | | | Back-off | | | | | | timer value, | | | | | | in seconds, | | | | | | that the | | | | | | V-SMF may use | | | | | | when | | | | | | rejecting the | | | | | | NAS message | | | | | | towards the | | | | | | UE. | +---------------+---------------+---+-------------+---------------+ | recoveryTime | DateTime | O | 0..1 | Timestamp | | | | | | when the | | | | | | H-SMF service | | | | | | instance was | | | | | | (re)started | | | | | | (see clause | | | | | | 6.3 of | | | | | | 3GPP TS 23 | | | | | | .527 [24]). | +---------------+---------------+---+-------------+---------------+ | NOTE: This IE | | | | | | contains | | | | | | information | | | | | | that the | | | | | | V-SMF shall | | | | | | transfer to | | | | | | the UE | | | | | | without | | | | | | in | | | | | | terpretation. | | | | | | It is sent as | | | | | | a separate IE | | | | | | rather than | | | | | | within the | | | | | | n1SmInfoToUE | | | | | | binary data | | | | | | because the | | | | | | 5GSM cause IE | | | | | | is defined as | | | | | | a \"V\" IE | | | | | | (i.e. without | | | | | | a Type field) | | | | | | in the NAS | | | | | | PDU Session | | | | | | Modification | | | | | | Reject | | | | | | message. | | | | | +---------------+---------------+---+-------------+---------------+
##### 6.1.6.2.15 Type: VsmfUpdateData
Table 6.1.6.2.15-1: Definition of type VsmfUpdateData
+---------------+---------------+---+-------------+---------------+ | Attribute | Data type | P | Cardinality | Description | | name | | | | | +===============+===============+===+=============+===============+ | requ | Requ | M | 1 | This IE shall | | estIndication | estIndication | | | indicate the | | | | | | request type. | +---------------+---------------+---+-------------+---------------+ | sessionAmbr | Ambr | C | 1 | This IE shall | | | | | | be present if | | | | | | the Session | | | | | | AMBR | | | | | | authorized | | | | | | for the PDU | | | | | | session is | | | | | | modified. | | | | | | When present, | | | | | | it shall | | | | | | contain the | | | | | | new Session | | | | | | AMBR | | | | | | authorized | | | | | | for the PDU | | | | | | session. | +---------------+---------------+---+-------------+---------------+ | qosFlowsAddM | array(Qo | C | 1..N | This IE shall | | odRequestList | sFlowAddModif | | | be present if | | | yRequestItem) | | | QoS flows are | | | | | | requested to | | | | | | be | | | | | | established | | | | | | or modified. | +---------------+---------------+---+-------------+---------------+ | qosFlowsR | array( | C | 1..N | This IE shall | | elRequestList | QosFlowReleas | | | be present if | | | eRequestItem) | | | QoS flows are | | | | | | requested to | | | | | | be released. | +---------------+---------------+---+-------------+---------------+ | epsBearerInfo | array(E | C | 1..N | This IE shall | | | psBearerInfo) | | | be present if | | | | | | the PDU | | | | | | session may | | | | | | be moved to | | | | | | EPS during | | | | | | its lifetime | | | | | | and the | | | | | | ePSBearerInfo | | | | | | has changed. | | | | | | | | | | | | When present, | | | | | | it shall only | | | | | | include | | | | | | epsBearerInfo | | | | | | IE(s) for new | | | | | | EBI or for | | | | | | EBIs for | | | | | | which the | | | | | | epsBearerInfo | | | | | | has changed. | | | | | | The complete | | | | | | epsBearerInfo | | | | | | shall be | | | | | | provided for | | | | | | an EBI that | | | | | | is included | | | | | | (i.e. the | | | | | | epsBearerInfo | | | | | | newly | | | | | | received for | | | | | | a given EBI | | | | | | replaces any | | | | | | epsBearerInfo | | | | | | previously | | | | | | received for | | | | | | this EBI). | +---------------+---------------+---+-------------+---------------+ | assignEbiList | array(Arp) | C | 1..N | This IE shall | | | | | | be present if | | | | | | the H-SMF | | | | | | requests EBIs | | | | | | to be | | | | | | assigned. | +---------------+---------------+---+-------------+---------------+ | revokeEbiList | array | C | 1..N | This IE shall | | | (EpsBearerId) | | | be present if | | | | | | the H-SMF | | | | | | requests the | | | | | | V-SMF to | | | | | | revoke some | | | | | | EBI(s). When | | | | | | present, it | | | | | | shall contain | | | | | | the EBIs to | | | | | | revoke. | +---------------+---------------+---+-------------+---------------+ | mo | array(E | C | 1..N | This IE shall | | difiedEbiList | biArpMapping) | | | be present if | | | | | | a PDU session | | | | | | modification | | | | | | procedure | | | | | | resulted in | | | | | | the change of | | | | | | ARP for a QoS | | | | | | flow that was | | | | | | already | | | | | | allocated an | | | | | | EBI. | +---------------+---------------+---+-------------+---------------+ | pti | Procedure | C | 0..1 | This IE shall | | | TransactionId | | | be present if | | | | | | the request | | | | | | is sent in | | | | | | response to a | | | | | | UE requested | | | | | | PDU session | | | | | | modification | | | | | | or release. | | | | | | When present, | | | | | | it shall | | | | | | contain the | | | | | | PTI value | | | | | | received in | | | | | | the | | | | | | corresponding | | | | | | request. | +---------------+---------------+---+-------------+---------------+ | n1SmInfoToUe | Re | C | 0..1 | This IE shall | | | fToBinaryData | | | be present if | | | | | | the H-SMF | | | | | | needs to send | | | | | | N1 SM | | | | | | information | | | | | | to the UE | | | | | | that does not | | | | | | need to be | | | | | | interpreted | | | | | | by the V-SMF. | | | | | | When present, | | | | | | this IE shall | | | | | | reference the | | | | | | n1SmInfoToUe | | | | | | binary data | | | | | | (see clause | | | | | | 6.1.6.4.4). | +---------------+---------------+---+-------------+---------------+ | al | boolean | C | 0..1 | This IE shall | | waysOnGranted | | | | be present | | | | | | if: | | | | | | | | | | | | > \- an | | | | | | > alwa | | | | | | ysOnRequested | | | | | | > IE was | | | | | | > received in | | | | | | > an earlier | | | | | | > V-SMF | | | | | | > initiated | | | | | | > Update | | | | | | > request to | | | | | | > change the | | | | | | > PDU session | | | | | | > to an | | | | | | > always-on | | | | | | > PDU | | | | | | > session; or | | | | | | > | | | | | | > \- the | | | | | | > H-SMF | | | | | | > determines, | | | | | | > based on | | | | | | > local | | | | | | > policy, | | | | | | > that the | | | | | | > PDU session | | | | | | > needs to be | | | | | | > established | | | | | | > as an | | | | | | > always-on | | | | | | > PDU | | | | | | > session. | | | | | | | | | | | | When present, | | | | | | it shall be | | | | | | set as | | | | | | follows: | | | | | | | | | | | | > \- true: | | | | | | > always-on | | | | | | > PDU session | | | | | | > granted. | | | | | | > | | | | | | > \- false | | | | | | > (default): | | | | | | > always-on | | | | | | > PDU session | | | | | | > not | | | | | | > granted. | +---------------+---------------+---+-------------+---------------+ | hsmf | Uri | C | 0..1 | This IE shall | | PduSessionUri | | | | be included | | | | | | if: | | | | | | | | | | | | > \- an | | | | | | > Update | | | | | | > Request is | | | | | | > sent to the | | | | | | > V-SMF | | | | | | > before the | | | | | | > Create | | | | | | > Response | | | | | | > (e.g. for | | | | | | > EPS bearer | | | | | | > ID | | | | | | > allocation | | | | | | > as | | | | | | > specified | | | | | | > in clause | | | | | | > 4.11.1.4.1 | | | | | | > of | | | | | | > 3GPP TS | | | | | | 23.502 [3], | | | | | | > or for | | | | | | > Secondary | | | | | | > au | | | | | | thorization/a | | | | | | uthentication | | | | | | > as | | | | | | > specified | | | | | | > in clause | | | | | | > 4.3.2.3 of | | | | | | > 3GPP TS 2 | | | | | | 3.502 [3]), | | | | | | > and | | | | | | > | | | | | | > \- the | | | | | | > H-SMF PDU | | | | | | > Session | | | | | | > Resource | | | | | | > URI has not | | | | | | > been | | | | | | > previously | | | | | | > provided to | | | | | | > the V-SMF. | | | | | | | | | | | | This IE shall | | | | | | not be | | | | | | included | | | | | | otherwise. | | | | | | | | | | | | When present, | | | | | | this IE shall | | | | | | include the | | | | | | URI | | | | | | representing | | | | | | the PDU | | | | | | session | | | | | | resrouce in | | | | | | the H-SMF. | +---------------+---------------+---+-------------+---------------+ | supp | Supp | C | 0..1 | This IE shall | | ortedFeatures | ortedFeatures | | | be present if | | | | | | \"hsmfPd | | | | | | uSessionUri\" | | | | | | IE is present | | | | | | and at least | | | | | | one optional | | | | | | feature | | | | | | defined in | | | | | | clause 6.1.8 | | | | | | is supported. | +---------------+---------------+---+-------------+---------------+ | cause | Cause | O | 0..1 | When present, | | | | | | this IE shall | | | | | | indicate the | | | | | | cause for the | | | | | | requested | | | | | | modification. | +---------------+---------------+---+-------------+---------------+ | n1smCause | string | O | 0..1 | When present, | | | | | | this IE shall | | | | | | contain the | | | | | | 5GSM cause | | | | | | the H-SMF | | | | | | proposes the | | | | | | V-SMF to send | | | | | | to the UE. It | | | | | | shall be | | | | | | encoded as | | | | | | two | | | | | | characters in | | | | | | hexadecimal | | | | | | r | | | | | | epresentation | | | | | | with each | | | | | | character | | | | | | taking a | | | | | | value of | | | | | | \"0\" to | | | | | | \"9\" or | | | | | | \"A\" to | | | | | | \"F\", and | | | | | | represent the | | | | | | cause value | | | | | | of the 5GSM | | | | | | cause IE | | | | | | specified in | | | | | | clause | | | | | | 9.11.4.2 of | | | | | | 3GPP TS | | | | | | 24.501 [7]. | | | | | | | | | | | | Example: the | | | | | | cause | | | | | | \"Invalid | | | | | | mandatory | | | | | | information\" | | | | | | shall be | | | | | | encoded as | | | | | | \"60\". | | | | | | | | | | | | See NOTE. | +---------------+---------------+---+-------------+---------------+ | backOffTimer | DurationSec | O | 0..1 | When present, | | | | | | this IE shall | | | | | | indicate a | | | | | | Back-off | | | | | | timer value, | | | | | | in seconds, | | | | | | that the | | | | | | V-SMF may use | | | | | | when sending | | | | | | the NAS | | | | | | message (PDU | | | | | | Session | | | | | | Release | | | | | | Command) | | | | | | towards the | | | | | | UE. | +---------------+---------------+---+-------------+---------------+ | NOTE: This IE | | | | | | contains | | | | | | information | | | | | | that the | | | | | | V-SMF shall | | | | | | transfer to | | | | | | the UE | | | | | | without | | | | | | in | | | | | | terpretation. | | | | | | It is sent as | | | | | | a separate IE | | | | | | rather than | | | | | | within the | | | | | | n1SmInfoToUE | | | | | | binary data | | | | | | because the | | | | | | 5GSM cause IE | | | | | | is defined as | | | | | | a \"V\" IE | | | | | | (i.e. without | | | | | | a Type field) | | | | | | in the NAS | | | | | | PDU Session | | | | | | Release | | | | | | Command | | | | | | message. | | | | | +---------------+---------------+---+-------------+---------------+
##### 6.1.6.2.16 Type: VsmfUpdatedData
Table 6.1.6.2.16-1: Definition of type VsmfUpdatedData
+---------------+---------------+---+-------------+---------------+ | Attribute | Data type | P | Cardinality | Description | | name | | | | | +===============+===============+===+=============+===============+ | qosFl | array | C | 1..N | This IE shall | | owsAddModList | (QosFlowItem) | | | be present if | | | | | | QoS flows | | | | | | have been | | | | | | successfully | | | | | | established | | | | | | or modified. | +---------------+---------------+---+-------------+---------------+ | qo | array | C | 1..N | This IE shall | | sFlowsRelList | (QosFlowItem) | | | be present if | | | | | | QoS flows | | | | | | have been | | | | | | successfully | | | | | | released. | +---------------+---------------+---+-------------+---------------+ | qosFlowsFaile | array | C | 1..N | This IE shall | | dtoAddModList | (QosFlowItem) | | | be present if | | | | | | QoS flows | | | | | | failed to be | | | | | | established | | | | | | or modified. | +---------------+---------------+---+-------------+---------------+ | qosFlowsFa | array | C | 1..N | This IE shall | | iledtoRelList | (QosFlowItem) | | | be present if | | | | | | QoS flows | | | | | | failed to be | | | | | | released. | +---------------+---------------+---+-------------+---------------+ | n | Re | C | 0..1 | This IE shall | | 1SmInfoFromUe | fToBinaryData | | | be present if | | | | | | the V-SMF has | | | | | | received | | | | | | known N1 SM | | | | | | information | | | | | | from the UE | | | | | | that does not | | | | | | need to be | | | | | | interpreted | | | | | | by the V-SMF. | | | | | | When present, | | | | | | this IE shall | | | | | | reference the | | | | | | n | | | | | | 1SmInfoFromUe | | | | | | binary data | | | | | | (see clause | | | | | | 6.1.6.4.4). | +---------------+---------------+---+-------------+---------------+ | un | Re | C | 0..1 | This IE shall | | knownN1SmInfo | fToBinaryData | | | be present if | | | | | | the V-SMF has | | | | | | received | | | | | | unknown N1 SM | | | | | | information | | | | | | from the UE. | | | | | | When present, | | | | | | this IE shall | | | | | | reference the | | | | | | un | | | | | | knownN1SmInfo | | | | | | binary data | | | | | | (see clause | | | | | | 6.1.6.4.4). | +---------------+---------------+---+-------------+---------------+ | ueLocation | UserLocation | C | 0..1 | This IE shall | | | | | | be present if | | | | | | it is | | | | | | available and | | | | | | QoS flows | | | | | | have been | | | | | | successfully | | | | | | established, | | | | | | modified or | | | | | | released. | | | | | | | | | | | | When present, | | | | | | this IE shall | | | | | | contain the | | | | | | UE location | | | | | | information. | +---------------+---------------+---+-------------+---------------+ | ueTimeZone | TimeZone | C | 0..1 | This IE shall | | | | | | be present if | | | | | | it is | | | | | | available and | | | | | | QoS flows | | | | | | have been | | | | | | successfully | | | | | | established, | | | | | | modified or | | | | | | released. | | | | | | | | | | | | When present, | | | | | | this IE shall | | | | | | contain the | | | | | | new UE Time | | | | | | Zone. | +---------------+---------------+---+-------------+---------------+ | addUeLocation | UserLocation | O | 0..1 | Additional UE | | | | | | location. | | | | | | | | | | | | This IE may | | | | | | be present, | | | | | | if anType | | | | | | previously | | | | | | reported is a | | | | | | non-3GPP | | | | | | access and a | | | | | | valid 3GPP | | | | | | access user | | | | | | location | | | | | | information | | | | | | is available. | | | | | | | | | | | | When present, | | | | | | it shall | | | | | | contain: | | | | | | | | | | | | - the last | | | | | | known 3GPP | | | | | | access user | | | | | | location; and | | | | | | | | | | | | - the | | | | | | timestamp, if | | | | | | available, | | | | | | indicating | | | | | | the UTC time | | | | | | when the | | | | | | addUeLocation | | | | | | information | | | | | | was acquired. | +---------------+---------------+---+-------------+---------------+ | as | array(E | C | 1..N | This IE shall | | signedEbiList | biArpMapping) | | | be present if | | | | | | the AMF | | | | | | assigned the | | | | | | requested | | | | | | EBI(s). When | | | | | | present, it | | | | | | shall contain | | | | | | the EBIs that | | | | | | were | | | | | | successfully | | | | | | assigned. | +---------------+---------------+---+-------------+---------------+ | failedTo | array(Arp) | C | 1..N | This IE shall | | AssignEbiList | | | | be present if | | | | | | the AMF | | | | | | failed to | | | | | | assign EBIs | | | | | | for a set of | | | | | | ARPs. | +---------------+---------------+---+-------------+---------------+ | re | array | C | 1..N | This IE shall | | leasedEbiList | (EpsBearerId) | | | be present if | | | | | | the NF | | | | | | Service | | | | | | Consumer | | | | | | requested the | | | | | | revoke EBI(s) | | | | | | or if the AMF | | | | | | revoked | | | | | | already | | | | | | assigned | | | | | | EBI(s) for | | | | | | this PDU | | | | | | session | | | | | | towards the | | | | | | V-SMF. This | | | | | | IE shall | | | | | | contain the | | | | | | list of | | | | | | EBI(s) | | | | | | released for | | | | | | this PDU | | | | | | session at | | | | | | the AMF. | +---------------+---------------+---+-------------+---------------+ | secondaryR | arra | O | 1..N | This IE may | | atUsageReport | y(SecondaryRa | | | be present to | | | tUsageReport) | | | report usage | | | | | | data for a | | | | | | secondary RAT | | | | | | for QoS | | | | | | flows. | | | | | | | | | | | | (NOTE) | +---------------+---------------+---+-------------+---------------+ | secondar | ar | O | 1..N | This IE may | | yRatUsageInfo | ray(Secondary | | | be present to | | | RatUsageInfo) | | | report usage | | | | | | data for a | | | | | | secondary RAT | | | | | | for QoS flows | | | | | | and/or the | | | | | | whole PDU | | | | | | session. | +---------------+---------------+---+-------------+---------------+ | NOTE: An SMF | | | | | | complying | | | | | | with this | | | | | | version of | | | | | | the | | | | | | specification | | | | | | should report | | | | | | secondary RAT | | | | | | usage using | | | | | | the | | | | | | secondar | | | | | | yRatUsageInfo | | | | | | attribute | | | | | | that replaces | | | | | | the | | | | | | secondaryR | | | | | | atUsageReport | | | | | | attribute. | | | | | +---------------+---------------+---+-------------+---------------+
##### 6.1.6.2.17 Type: StatusNotification
Table 6.1.6.2.17-1: Definition of type StatusNotification
Attribute name Data type P Cardinality Description
* * *
statusInfo StatusInfo M 1 This IE shall contain status information about the
PDU session.
##### 6.1.6.2.18 Type: QosFlowItem
Table 6.1.6.2.18-1: Definition of type QosFlowItem
Attribute name Data type P Cardinality Description
* * *
qfi Qfi M 1 This IE shall contain the QoS Flow Identifier. cause Cause O 0..1
When present, this IE shall contain cause information.
##### 6.1.6.2.19 Type: QosFlowSetupItem
Table 6.1.6.2.19-1: Definition of type QosFlowSetupItem
Attribute name Data type P Cardinality Description
* * *
qfi Qfi M 1 This IE shall contain the QoS Flow Identifier. qosRules Bytes M 1
This IE shall contain the QoS Rule(s) associated to the QoS flow to be sent to
the UE. It shall be encoded as the Qos rules IE specified in clause 9.11.4.13
of 3GPP TS 24.501 [7] (starting from octet 4). ebi EpsBearerId C 0..1 This IE
shall be included when an EPS Bearer ID is allocated for the QoS Flow for
interworking with EPS. When present, this IE shall contain the allocated EPS
Bearer ID. qosFlowDescription Bytes O 0..1 When present, this IE shall contain
the description of the QoS Flow level Qos parameters to be sent to the UE. It
shall be encoded as the Qos flow descriptions IE specified in clause 9.11.4.12
of 3GPP TS 24.501 [7] (starting from octet 1), encoding one single Qos flow
description for the QoS flow to be set up. qosFlowProfile QosFlowProfile O
0..1 When present, this IE shall contain the description of the QoS Flow level
Qos parameters.
##### 6.1.6.2.20 Type: QosFlowAddModifyRequestItem
Table 6.1.6.2.20-1: Definition of type QosFlowAddModifyRequestItem
+---------------+---------------+---+-------------+---------------+ | Attribute | Data type | P | Cardinality | Description | | name | | | | | +===============+===============+===+=============+===============+ | qfi | Qfi | M | 1 | This IE shall | | | | | | contain the | | | | | | QoS Flow | | | | | | Identifier. | +---------------+---------------+---+-------------+---------------+ | ebi | EpsBearerId | C | 0..1 | This IE shall | | | | | | be included | | | | | | when the EPS | | | | | | Bearer ID | | | | | | associated | | | | | | with a QoS | | | | | | Flow is | | | | | | modified. | | | | | | When present, | | | | | | this IE shall | | | | | | contain the | | | | | | EPS Bearer | | | | | | ID. | +---------------+---------------+---+-------------+---------------+ | qosRules | Bytes | O | 0..1 | When present, | | | | | | this IE shall | | | | | | contain the | | | | | | QoS Rule(s) | | | | | | to be sent to | | | | | | the UE. It | | | | | | shall be | | | | | | encoded as | | | | | | the Qos rules | | | | | | IE specified | | | | | | in clause | | | | | | 9.11.4.13 of | | | | | | 3GPP TS | | | | | | 24.501 [7] | | | | | | (starting | | | | | | from | | | | | | octet 4). | +---------------+---------------+---+-------------+---------------+ | qosFl | Bytes | O | 0..1 | When present, | | owDescription | | | | this IE shall | | | | | | contain the | | | | | | description | | | | | | of the QoS | | | | | | Flow level | | | | | | Qos | | | | | | parameters to | | | | | | be sent to | | | | | | the UE. It | | | | | | shall be | | | | | | encoded as | | | | | | the Qos flow | | | | | | descriptions | | | | | | IE specified | | | | | | in clause | | | | | | 9.11.4.12 of | | | | | | 3GPP TS | | | | | | 24.501 [7] | | | | | | (starting | | | | | | from | | | | | | octet 1), | | | | | | encoding one | | | | | | single Qos | | | | | | flow | | | | | | description | | | | | | for the QoS | | | | | | flow to be | | | | | | added or | | | | | | modified. | +---------------+---------------+---+-------------+---------------+ | q | Q | O | 0..1 | When present, | | osFlowProfile | osFlowProfile | | | this IE shall | | | | | | contain the | | | | | | description | | | | | | of the QoS | | | | | | Flow level | | | | | | QoS | | | | | | parameters. | | | | | | | | | | | | When | | | | | | modifying a | | | | | | QoS flow, the | | | | | | IE shall only | | | | | | contain the | | | | | | QoS Flow | | | | | | profile\'s | | | | | | attributes | | | | | | which are | | | | | | modified. | +---------------+---------------+---+-------------+---------------+
##### 6.1.6.2.21 Type: QosFlowReleaseRequestItem
Table 6.1.6.2.21-1: Definition of type QosFlowReleaseRequestItem
Attribute name Data type P Cardinality Description
* * *
qfi Qfi M 1 This IE shall contain the QoS Flow Identifier. qosRules Bytes O
0..1 When present, this IE shall contain the QoS Rule(s) to be sent to the UE.
It shall be encoded as the Qos rules IE specified in clause 9.11.4.13 of 3GPP
TS 24.501 [7] (starting from octet 4). qosFlowDescription Bytes O 0..1 When
present, this IE shall contain the description of the QoS Flow level Qos
parameters to be sent to the UE. It shall be encoded as the Qos flow
descriptions IE specified in clause 9.11.4.12 of 3GPP TS 24.501 [7] (starting
from octet 1), encoding one single Qos flow description for the QoS flow to be
released.
##### 6.1.6.2.22 Type: QosFlowProfile
Table 6.1.6.2.22-1: Definition of type QosFlowProfile
+---------------+---------------+---+-------------+---------------+ | Attribute | Data type | P | Cardinality | Description | | name | | | | | +===============+===============+===+=============+===============+ | 5qi | 5Qi | M | 1 | This IE shall | | | | | | contain the | | | | | | 5G QoS | | | | | | Identifier | | | | | | (5QI) of the | | | | | | QoS flow. | +---------------+---------------+---+-------------+---------------+ | nonDynamic5Qi | NonDynamic5Qi | C | 0..1 | When present, | | | | | | this IE shall | | | | | | indicate the | | | | | | QoS | | | | | | Ch | | | | | | aracteristics | | | | | | for a | | | | | | standardized | | | | | | or | | | | | | p | | | | | | re-configured | | | | | | 5QI for | | | | | | downlink and | | | | | | uplink. | | | | | | | | | | | | See NOTE 1. | +---------------+---------------+---+-------------+---------------+ | dynamic5Qi | Dynamic5Qi | C | 0..1 | When present, | | | | | | this IE shall | | | | | | indicate the | | | | | | QoS | | | | | | Ch | | | | | | aracteristics | | | | | | for a | | | | | | Non | | | | | | -standardised | | | | | | or not | | | | | | p | | | | | | re-configured | | | | | | 5QI for | | | | | | downlink and | | | | | | uplink. | | | | | | | | | | | | See NOTE 1. | +---------------+---------------+---+-------------+---------------+ | arp | Arp | C | 0..1 | This IE shall | | | | | | be present | | | | | | when | | | | | | establishing | | | | | | a QoS flow; | | | | | | it may be | | | | | | present when | | | | | | modifying a | | | | | | QoS flow. | | | | | | | | | | | | When present, | | | | | | this IE shall | | | | | | contain the | | | | | | Allocation | | | | | | and Retention | | | | | | Priority | | | | | | (ARP) | | | | | | assigned to | | | | | | the QoS flow. | +---------------+---------------+---+-------------+---------------+ | g | GbrQosFl | C | 0..1 | This IE shall | | brQosFlowInfo | owInformation | | | be present | | | | | | when | | | | | | establishing | | | | | | a GBR QoS | | | | | | flow or if | | | | | | the GBR QoS | | | | | | flow | | | | | | information | | | | | | is modified. | +---------------+---------------+---+-------------+---------------+ | rqa | Reflectiv | O | 0..1 | This IE may | | | eQoSAttribute | | | be present | | | | | | for a non-GBR | | | | | | QoS flow and | | | | | | it shall be | | | | | | ignored | | | | | | otherwise. | | | | | | When present, | | | | | | it shall | | | | | | indicate | | | | | | whether | | | | | | certain | | | | | | traffic on | | | | | | this QoS flow | | | | | | may be | | | | | | subject to | | | | | | Reflective | | | | | | QoS. | +---------------+---------------+---+-------------+---------------+ | addition | Addition | O | 0..1 | This IE may | | alQosFlowInfo | alQosFlowInfo | | | be present | | | | | | for a non-GBR | | | | | | QoS flow. | | | | | | When present, | | | | | | this IE | | | | | | indicates | | | | | | that traffic | | | | | | for this QoS | | | | | | flow is | | | | | | likely to | | | | | | appear more | | | | | | often than | | | | | | traffic for | | | | | | other flows | | | | | | established | | | | | | for the PDU | | | | | | session. See | | | | | | clause | | | | | | 9.3.1.12 of | | | | | | 3GPP TS | | | | | | 38.413 [9]. | +---------------+---------------+---+-------------+---------------+ | NOTE 1: | | | | | | Either the | | | | | | nonDynamic5Qi | | | | | | IE or the | | | | | | dynamic5Qi IE | | | | | | may be | | | | | | present when | | | | | | establishing | | | | | | a QoS flow. | | | | | | Either the | | | | | | nonDynamic5Qi | | | | | | IE or the | | | | | | dynamic5Qi IE | | | | | | may be | | | | | | present when | | | | | | modifying a | | | | | | QoS flow; | | | | | | when present, | | | | | | the received | | | | | | nonDynamic5Qi | | | | | | IE or | | | | | | dynamic5Qi IE | | | | | | shall replace | | | | | | any value | | | | | | received | | | | | | previously | | | | | | for this IE. | | | | | +---------------+---------------+---+-------------+---------------+
##### 6.1.6.2.23 Type: GbrQosFlowInformation
Table 6.1.6.2.23-1: Definition of type GbrQosFlowInformation
Attribute name Data type P Cardinality Description
* * *
maxFbrDl BitRate M 1 This IE shall contain the Maximum Bit Rate in Downlink.
See 3GPP TS 23.501 [2]. maxFbrUl BitRate M 1 This IE shall contain the Maximum
Bit Rate in Uplink. See 3GPP TS 23.501 [2]. guaFbrDl BitRate M 1 This IE shall
contain the Guaranted Bit Rate in Downlink. See 3GPP TS 23.501 [2]. guaFbrUl
BitRate M 1 This IE shall contain the Guaranted Bit Rate in Uplink. See 3GPP
TS 23.501 [2]. notifControl NotificationControl O 0..1 When present, this IE
shall indicate whether notifications are requested from the RAN when the GFBR
can no longer (or again) be fulfilled for a QoS flow during the lifetime of
the QoS flow. See 3GPP TS 23.501 [2]. maxPacketLossRateDl PacketLossRate O
0..1 When present, this IE shall indicate the maximum rate for lost packets
that can be tolerated in the downlink direction. See 3GPP TS 23.501 [2].
maxPacketLossRateUl PacketLossRate O 0..1 When present, this IE shall
indicatethe maximum rate for lost packets that can be tolerated in the Uplink
direction. See 3GPP TS 23.501 [2].
##### 6.1.6.2.24 Type: QosFlowNotifyItem
Table 6.1.6.2.24-1: Definition of type QosFlowNotifyItem
Attribute name Data type P Cardinality Description
* * *
qfi Qfi M 1 This IE shall contain the QoS Flow Identifier. notificationCause
NotificationCause M 1
##### 6.1.6.2.25 Type: Void
##### 6.1.6.2.26 Type: Void
##### 6.1.6.2.27 Type: SMContextRetrievedData
Table 6.1.6.2.27-1: Definition of type SmContextRetrievedData
Attribute name Data type P Cardinality Description
* * *
ueEpsPdnConnection EpsPdnCnxContainer M 1 This IE shall contain an MME/SGSN UE
EPS PDN Connection including the mapped EPS bearer context(s).
##### 6.1.6.2.28 Type: TunnelInfo
Table 6.1.6.2.28-1: Definition of type TunnelInfo
+----------------+-----------+---+-------------+-----------------+ | Attribute name | Data type | P | Cardinality | Description | +================+===========+===+=============+=================+ | ipv4Addr | Ipv4Addr | C | 0..1 | When present, | | | | | | this IE shall | | | | | | contain the GTP | | | | | | tunnel IPv4 | | | | | | address. | | | | | | | | | | | | At least one of | | | | | | the ipv4Addr or | | | | | | ipv6Addr shall | | | | | | be present. | | | | | | Both may be | | | | | | present. | +----------------+-----------+---+-------------+-----------------+ | ipv6Addr | Ipv6Addr | C | 0..1 | When present, | | | | | | this IE shall | | | | | | contain the GTP | | | | | | tunnel IPv6 | | | | | | address. | | | | | | | | | | | | At least one of | | | | | | the ipv4Addr or | | | | | | ipv6Addr shall | | | | | | be present. | | | | | | Both may be | | | | | | present. | +----------------+-----------+---+-------------+-----------------+ | gtpTeid | Teid | M | 1 | This IE shall | | | | | | contain the | | | | | | 4-octet GTP | | | | | | tunnel endpoint | | | | | | identifier. | | | | | | | | | | | | If both | | | | | | ipv4Addr and | | | | | | ipv6Addr are | | | | | | present, the | | | | | | TEID shall be | | | | | | shared by both | | | | | | addresses. | +----------------+-----------+---+-------------+-----------------+
##### 6.1.6.2.29 Type: StatusInfo
Table 6.1.6.2.29-1: Definition of type StatusInfo
Attribute name Data type P Cardinality Description
* * *
resourceStatus ResourceStatus M 1 This IE shall indicate the status of the SM
context or PDU session resource. cause Cause O 0..1 When present, this IE
shall indicate the cause for the resource status change.
##### 6.1.6.2.30 Type: VsmfUpdateError
Table 6.1.6.2.30-1: Definition of type VsmfUpdateError
+---------------+---------------+---+-------------+---------------+ | Attribute | Data type | P | Cardinality | Description | | name | | | | | +===============+===============+===+=============+===============+ | error | P | M | 1 | More | | | roblemDetails | | | information | | | | | | on the error | | | | | | shall be | | | | | | provided in | | | | | | the \"cause\" | | | | | | attribute of | | | | | | the | | | | | | \"Pro | | | | | | blemDetails\" | | | | | | structure. | +---------------+---------------+---+-------------+---------------+ | pti | Procedure | C | 0..1 | This IE shall | | | TransactionId | | | be present if | | | | | | available. | | | | | | When present, | | | | | | it shall | | | | | | contain the | | | | | | PTI value | | | | | | received from | | | | | | the UE. | +---------------+---------------+---+-------------+---------------+ | n1smCause | string | C | 0..1 | This IE shall | | | | | | be present if | | | | | | available. | | | | | | | | | | | | When present, | | | | | | it shall | | | | | | contain the | | | | | | 5GSM cause | | | | | | received from | | | | | | the UE. | | | | | | | | | | | | It shall be | | | | | | encoded as | | | | | | two | | | | | | characters in | | | | | | hexadecimal | | | | | | r | | | | | | epresentation | | | | | | with each | | | | | | character | | | | | | taking a | | | | | | value of | | | | | | \"0\" to | | | | | | \"9\" or | | | | | | \"A\" to | | | | | | \"F\", and | | | | | | represent the | | | | | | cause value | | | | | | of the 5GSM | | | | | | cause IE | | | | | | specified in | | | | | | clause | | | | | | 9.11.4.2 of | | | | | | 3GPP TS | | | | | | 24.501 [7]. | | | | | | | | | | | | Pattern: | | | | | | \"\^[A- | | | | | | F0-9]{2}\$\" | | | | | | | | | | | | Example: the | | | | | | cause | | | | | | \"Invalid | | | | | | mandatory | | | | | | information\" | | | | | | shall be | | | | | | encoded as | | | | | | \"60\". | | | | | | | | | | | | See NOTE. | +---------------+---------------+---+-------------+---------------+ | n | Re | C | 0..1 | This IE shall | | 1SmInfoFromUe | fToBinaryData | | | be present if | | | | | | the V-SMF has | | | | | | received | | | | | | known N1 SM | | | | | | information | | | | | | from the UE | | | | | | that does not | | | | | | need to be | | | | | | interpreted | | | | | | by the V-SMF. | | | | | | When present, | | | | | | this IE shall | | | | | | reference the | | | | | | n | | | | | | 1SmInfoFromUe | | | | | | binary data | | | | | | (see clause | | | | | | 6.1.6.4.4). | +---------------+---------------+---+-------------+---------------+ | un | Re | C | 0..1 | This IE shall | | knownN1SmInfo | fToBinaryData | | | be present if | | | | | | the V-SMF has | | | | | | received | | | | | | unknown N1 SM | | | | | | information | | | | | | from the UE. | | | | | | When present, | | | | | | this IE shall | | | | | | reference the | | | | | | un | | | | | | knownN1SmInfo | | | | | | binary data | | | | | | (see clause | | | | | | 6.1.6.4.4). | +---------------+---------------+---+-------------+---------------+ | failedTo | array(Arp) | C | 1..N | This IE shall | | AssignEbiList | | | | be present if | | | | | | the AMF | | | | | | failed to | | | | | | assign the | | | | | | requested | | | | | | EBIs. | +---------------+---------------+---+-------------+---------------+ | ngApCause | NgApCause | C | 0..1 | This IE shall | | | | | | be present, | | | | | | if the | | | | | | information | | | | | | is available | | | | | | and if this | | | | | | information | | | | | | is permitted | | | | | | to be sent to | | | | | | the H-SMF | | | | | | operator | | | | | | according to | | | | | | the V-SMF | | | | | | operator\'s | | | | | | policy. | +---------------+---------------+---+-------------+---------------+ | 5 | 5GMmCause | C | 0..1 | The V-SMF | | gMmCauseValue | | | | shall include | | | | | | this IE if it | | | | | | received it | | | | | | from the AMF | | | | | | and if this | | | | | | information | | | | | | is permitted | | | | | | to be sent to | | | | | | the H-SMF | | | | | | operator | | | | | | according to | | | | | | the V-SMF | | | | | | operator\'s | | | | | | policy. | +---------------+---------------+---+-------------+---------------+ | recoveryTime | DateTime | O | 0..1 | Timestamp | | | | | | when the | | | | | | V-SMF service | | | | | | instance was | | | | | | (re)started | | | | | | (see clause | | | | | | 6.3 of | | | | | | 3GPP TS 23 | | | | | | .527 [24]). | +---------------+---------------+---+-------------+---------------+ | NOTE: This IE | | | | | | is sent as a | | | | | | separate IE | | | | | | rather than | | | | | | within the | | | | | | n | | | | | | 1SmInfoFromUE | | | | | | binary data | | | | | | because the | | | | | | 5GSM cause IE | | | | | | is defined as | | | | | | a \"V\" IE | | | | | | (i.e. without | | | | | | a Type field) | | | | | | in the NAS | | | | | | PDU Session | | | | | | Modification | | | | | | Command | | | | | | Reject | | | | | | message. | | | | | +---------------+---------------+---+-------------+---------------+
##### 6.1.6.2.31 Type: EpsPdnCnxInfo
Table 6.1.6.2.31-1: Definition of type EpsPdnCnxInfo
Attribute name Data type P Cardinality Description
* * *
pgwS8cFteid Bytes M 1 Base64-encoded characters, encoding the PGW S8 F-TEID
for Control Plane as specified in Figure 8.22-1 of 3GPP TS 29.274 [16]
(starting from octet 1). pgwNodeName Bytes C 0..1 Base64-encoded characters,
encoding the PGW FQDN IE as specified in Figure 8.66-1 of 3GPP TS 29.274 [16]
(starting from octet 1). It shall be present, if it is available.
linkedBearerId EpsBearerId C 0..1 An implementation complying with this
version of the specification shall include this attribute and set it to the
default bearer ID associated with the PDU session moved to EPS.
##### 6.1.6.2.32 Type: EpsBearerInfo
Table 6.1.6.2.32-1: Definition of type EpsBearerInfo
Attribute name Data type P Cardinality Description
* * *
ebi EpsBearerId M 1 EPS Bearer ID pgwS8uFteid Bytes M 1 Base64-encoded
characters, encoding the PGW S8 F-TEID for User Plane as specified in Figure
8.22-1 of 3GPP TS 29.274 [16] (starting from octet 1). bearerLevelQoS Bytes M
1 Base64-encoded characters, encoding the Bearer QoS IE as specified in Figure
8.15-1 of 3GPP TS 29.274 [16] (starting from octet 1).
##### 6.1.6.2.33 Type: PduSessionNotifyItem
Table 6.1.6.2.33-1: Definition of type PduSessionNotifyItem
Attribute name Data type P Cardinality Description
* * *
notificationCause NotificationCause M 1
##### 6.1.6.2.34 Type: EbiArpMapping
Table 6.1.6.2.34-1: Definition of type EbiArpMapping
Attribute name Data type P Cardinality Description
* * *
epsBearerId EpsBearerId M 1 This IE shall contain the EPS bearer identities.
arp Arp M 1 This IE shall contain the ARP corresponding to the EBI.
##### 6.1.6.2.35 Type: SmContextCreateError
Table 6.1.6.2.35-1: Definition of type SmContextCreateError
+---------------+---------------+---+-------------+---------------+ | Attribute | Data type | P | Cardinality | Description | | name | | | | | +===============+===============+===+=============+===============+ | error | P | M | 1 | More | | | roblemDetails | | | information | | | | | | on the error | | | | | | shall be | | | | | | provided in | | | | | | the \"cause\" | | | | | | attribute of | | | | | | the | | | | | | \"Pro | | | | | | blemDetails\" | | | | | | structure. | +---------------+---------------+---+-------------+---------------+ | n1SmMsg | Re | C | 0..1 | This IE shall | | | fToBinaryData | | | be present, | | | | | | if an N1 SM | | | | | | information | | | | | | is received | | | | | | in the | | | | | | request and | | | | | | the SMF is | | | | | | able to | | | | | | return N1 SM | | | | | | information | | | | | | to the UE. | | | | | | | | | | | | When present, | | | | | | it shall | | | | | | reference the | | | | | | N1 SM Message | | | | | | binary data | | | | | | (see clause | | | | | | 6.1.6.4.2). | +---------------+---------------+---+-------------+---------------+ | recoveryTime | DateTime | O | 0..1 | Timestamp | | | | | | when the SMF | | | | | | service | | | | | | instance was | | | | | | (re)started | | | | | | (see clause | | | | | | 6.3 of | | | | | | 3GPP TS 23 | | | | | | .527 [24]). | +---------------+---------------+---+-------------+---------------+
##### 6.1.6.2.36 Type: SMContextUpdateError
Table 6.1.6.2.36-1: Definition of type SmContextUpdateError
+---------------+---------------+---+-------------+---------------+ | Attribute | Data type | P | Cardinality | Description | | name | | | | | +===============+===============+===+=============+===============+ | error | P | M | 1 | More | | | roblemDetails | | | information | | | | | | on the error | | | | | | shall be | | | | | | provided in | | | | | | the \"cause\" | | | | | | attribute of | | | | | | the | | | | | | \"Pro | | | | | | blemDetails\" | | | | | | structure. | +---------------+---------------+---+-------------+---------------+ | n1SmMsg | Re | C | 0..1 | This IE shall | | | fToBinaryData | | | be present, | | | | | | if N1 SM | | | | | | information | | | | | | needs to be | | | | | | returned to | | | | | | the UE. | | | | | | | | | | | | When present, | | | | | | it shall | | | | | | reference the | | | | | | N1 SM Message | | | | | | binary data | | | | | | (see clause | | | | | | 6.1.6.4.2). | +---------------+---------------+---+-------------+---------------+ | n2SmInfo | Re | C | 0..1 | This IE shall | | | fToBinaryData | | | be present, | | | | | | if N2 SM | | | | | | information | | | | | | needs to be | | | | | | returned to | | | | | | the NG-RAN. | | | | | | | | | | | | When present, | | | | | | it shall | | | | | | reference the | | | | | | N2 SM Message | | | | | | binary data | | | | | | (see clause | | | | | | 6.1.6.4.3). | +---------------+---------------+---+-------------+---------------+ | n2SmInfoType | N2SmInfoType | C | 0..1 | This IE shall | | | | | | be present if | | | | | | \"n2SmInfo\" | | | | | | attribute is | | | | | | present. | | | | | | | | | | | | When present, | | | | | | this IE shall | | | | | | indicate the | | | | | | NG AP IE type | | | | | | for the NG AP | | | | | | SMF related | | | | | | IE container | | | | | | carried in | | | | | | \"n2SmInfo\" | | | | | | attribute. | +---------------+---------------+---+-------------+---------------+ | upCnxState | UpCnxState | C | 0..1 | This IE shall | | | | | | be present if | | | | | | the SMF was | | | | | | requested to | | | | | | activate or | | | | | | deactivate | | | | | | the user | | | | | | plane | | | | | | connection of | | | | | | the PDU | | | | | | session in | | | | | | the | | | | | | corresponding | | | | | | request. | | | | | | | | | | | | When present, | | | | | | it shall be | | | | | | set as | | | | | | specified in | | | | | | clause | | | | | | 5.2.2.3.2. | +---------------+---------------+---+-------------+---------------+ | recoveryTime | DateTime | O | 0..1 | Timestamp | | | | | | when the SMF | | | | | | service | | | | | | instance was | | | | | | (re)started | | | | | | (see clause | | | | | | 6.3 of | | | | | | 3GPP TS 23 | | | | | | .527 [24]). | +---------------+---------------+---+-------------+---------------+
##### 6.1.6.2.37 Type: PduSessionCreateError
Table 6.1.6.2.37-1: Definition of type PduSessionCreateError
+---------------+---------------+---+-------------+---------------+ | Attribute | Data type | P | Cardinality | Description | | name | | | | | +===============+===============+===+=============+===============+ | error | P | M | 1 | More | | | roblemDetails | | | information | | | | | | on the error | | | | | | shall be | | | | | | provided in | | | | | | the \"cause\" | | | | | | attribute of | | | | | | the | | | | | | \"Pro | | | | | | blemDetails\" | | | | | | structure. | +---------------+---------------+---+-------------+---------------+ | n1smCause | string | C | 0..1 | This IE shall | | | | | | be present if | | | | | | the request | | | | | | included | | | | | | n1 | | | | | | SmInfoFromUe. | | | | | | | | | | | | When present, | | | | | | it shall | | | | | | contain the | | | | | | 5GSM cause | | | | | | the H-SMF | | | | | | proposes the | | | | | | V-SMF to | | | | | | return to the | | | | | | UE. It shall | | | | | | be encoded as | | | | | | two | | | | | | characters in | | | | | | hexadecimal | | | | | | r | | | | | | epresentation | | | | | | with each | | | | | | character | | | | | | taking a | | | | | | value of | | | | | | \"0\" to | | | | | | \"9\" or | | | | | | \"A\" to | | | | | | \"F\", and | | | | | | represent the | | | | | | cause value | | | | | | of the 5GSM | | | | | | cause IE | | | | | | specified in | | | | | | clause | | | | | | 9.11.4.2 of | | | | | | 3GPP TS | | | | | | 24.501 [7]. | | | | | | | | | | | | Pattern: | | | | | | \"\^[A- | | | | | | F0-9]{2}\$\" | | | | | | | | | | | | Example: the | | | | | | cause | | | | | | \"Invalid | | | | | | mandatory | | | | | | information\" | | | | | | shall be | | | | | | encoded as | | | | | | \"60\". | | | | | | | | | | | | (NOTE) | +---------------+---------------+---+-------------+---------------+ | n1SmInfoToUe | Re | C | 0..1 | This IE shall | | | fToBinaryData | | | be present if | | | | | | the H-SMF | | | | | | needs to send | | | | | | N1 SM | | | | | | information | | | | | | to the UE | | | | | | that does not | | | | | | need to be | | | | | | interpreted | | | | | | by the V-SMF. | | | | | | When present, | | | | | | this IE shall | | | | | | reference the | | | | | | n1SmInfoToUe | | | | | | binary data | | | | | | (see clause | | | | | | 6.1.6.4.4). | +---------------+---------------+---+-------------+---------------+ | backOffTimer | DurationSec | O | 0..1 | When present, | | | | | | this IE shall | | | | | | indicate a | | | | | | Back-off | | | | | | timer value, | | | | | | in seconds, | | | | | | that the | | | | | | V-SMF may use | | | | | | when | | | | | | rejecting the | | | | | | NAS message | | | | | | towards the | | | | | | UE. | +---------------+---------------+---+-------------+---------------+ | recoveryTime | DateTime | O | 0..1 | Timestamp | | | | | | when the | | | | | | H-SMF service | | | | | | instance was | | | | | | (re)started | | | | | | (see clause | | | | | | 6.3 of | | | | | | 3GPP TS 23 | | | | | | .527 [24]). | +---------------+---------------+---+-------------+---------------+ | NOTE: This IE | | | | | | contains | | | | | | information | | | | | | that the | | | | | | V-SMF may | | | | | | transfer to | | | | | | the UE | | | | | | without | | | | | | in | | | | | | terpretation. | | | | | | It is sent as | | | | | | a separate IE | | | | | | rather than | | | | | | within the | | | | | | n1SmInfoToUE | | | | | | binary data | | | | | | because the | | | | | | 5GSM cause IE | | | | | | is defined as | | | | | | a \"V\" IE | | | | | | (i.e. without | | | | | | a Type field) | | | | | | in the NAS | | | | | | PDU Session | | | | | | Establishment | | | | | | Reject | | | | | | message. | | | | | +---------------+---------------+---+-------------+---------------+
##### 6.1.6.2.38 Type: MmeCapabilities
Table 6.1.6.2.38-1: Definition of type MmeCapabilities
+----------------+-----------+---+-------------+-----------------+ | Attribute name | Data type | P | Cardinality | Description | +================+===========+===+=============+=================+ | nonIpSupported | boolean | C | 0..1 | This IE shall | | | | | | be present if | | | | | | non-IP PDN type | | | | | | is supported. | | | | | | It may be | | | | | | present | | | | | | otherwise. When | | | | | | present, this | | | | | | IE shall be set | | | | | | as follows: | | | | | | | | | | | | > \- true: | | | | | | > non-IP PDN | | | | | | > type is | | | | | | > supported; | | | | | | > | | | | | | > \- false | | | | | | > (default): | | | | | | > non-IP PDN | | | | | | > type is not | | | | | | > supported. | +----------------+-----------+---+-------------+-----------------+
##### 6.1.6.2.39 Type: Void
#### 6.1.6.3 Simple data types and enumerations
##### 6.1.6.3.1 Introduction
This clause defines simple data types and enumerations that can be referenced
from data structures defined in the previous clauses.
##### 6.1.6.3.2 Simple data types
The simple data types defined in table 6.1.6.3.2-1 shall be supported.
Table 6.1.6.3.2-1: Simple data types
+------------------------+-----------------+------------------------+ | Type Name | Type Definition | Description | +------------------------+-----------------+------------------------+ | ProcedureTransactionId | integer | Unsigned integer | | | | representing a | | | | Procedure Transaction | | | | Identity, within the | | | | range 0 to 255, as | | | | specified in | | | | 3GPP TS 24.007 [8]. | +------------------------+-----------------+------------------------+ | EpsBearerId | integer | Integer identifying an | | | | EPS bearer, within the | | | | range 0 to 15, as | | | | specified in clause | | | | 11.2.3.1.5, bits 5 to | | | | 8, of | | | | 3GPP TS 24.007 [8]. | +------------------------+-----------------+------------------------+ | EpsPdnCnxContainer | string | String with format | | | | \"byte\" as defined in | | | | OpenAPI | | | | Specification [15], | | | | i.e. base64-encoded | | | | characters, encoding | | | | the UeEpsPdnConnection | | | | IE specified in Table | | | | 7.3.1-2 or Table | | | | 7.3.6-2 of | | | | 3GPP TS 29.274 [16] | | | | for the N26 interface. | +------------------------+-----------------+------------------------+ | EpsBearerContainer | string | String with format | | | | \"byte\" as defined in | | | | OpenAPI | | | | Specification [15], | | | | i.e. base64-encoded | | | | characters, encoding | | | | the Bearer Context IE | | | | specified in Table | | | | 7.3.2-2 of | | | | 3GPP TS 29.274 [16]. | +------------------------+-----------------+------------------------+ | Teid | string | 4-octet GTP tunnel | | | | endpoint identifier, | | | | as defined in | | | | 3GPP TS 29.274 [16], | | | | in hexadecimal | | | | representation. Each | | | | character in the | | | | string shall take a | | | | value of \"0\" to | | | | \"9\" or \"a\" to | | | | \"f\" or \"A\" to | | | | \"F\" and shall | | | | represent 4 bits. The | | | | most significant | | | | character representing | | | | the 4 most significant | | | | bits of the TEID shall | | | | appear first in the | | | | string, and the | | | | character representing | | | | the 4 least | | | | significant bit of the | | | | TEID shall appear last | | | | in the string. | | | | | | | | Pattern: | | | | \"[A-Fa-f0-9]{8}\" | | | | | | | | Example: | | | | | | | | A GTP TEID 0x5BD60076 | | | | shall be encoded as | | | | \"5BD60076\". | +------------------------+-----------------+------------------------+ | EpsBearerContextStatus | String | EPS bearer context | | | | status, as defined in | | | | octets 3 and 4 of the | | | | EPS bearer context | | | | status IE in clause | | | | 9.9.2.1 of | | | | 3GPP TS 24.301 [27], | | | | in hexadecimal | | | | representation. Each | | | | character in the | | | | string shall take a | | | | value of \"0\" to | | | | \"9\" or \"a\" to | | | | \"f\" or \"A\" to | | | | \"F\" and shall | | | | represent 4 bits. The | | | | most significant | | | | character representing | | | | the 4 most significant | | | | bits of the EPS bearer | | | | context status shall | | | | appear first in the | | | | string, and the | | | | character representing | | | | the 4 least | | | | significant bit of the | | | | EPS bearer context | | | | status shall appear | | | | last in the string. | | | | | | | | Pattern: | | | | \' | | | | \^[A-Fa-f0-9]{4}\$\' | | | | | | | | Example: | | | | | | | | An EPS bearer context | | | | status IE where only | | | | the EBIs 2, 5, 6 and 9 | | | | are active shall be | | | | encoded as \"6402\". | +------------------------+-----------------+------------------------+
##### 6.1.6.3.3 Enumeration: UpCnxState
The enumeration UpCnxState represents the state of the user plane connection
of a PDU session. It shall comply with the provisions defined in table
6.1.6.3.3-1.
Table 6.1.6.3.3-1: Enumeration UpCnxState
Enumeration value Description
* * *
\"ACTIVATED\" A N3 tunnel is established between the 5G-AN and UPF
\"DEACTIVATED\" No N3 tunnel is established between the 5G-AN and UPF.
\"ACTIVATING\" A N3 tunnel is being established (the 5G-AN\'s F-TEID for
downlink traffic is not assigned yet).
##### 6.1.6.3.4 Enumeration: HoState
The enumeration HoState represents the handover state of a PDU session. It
shall comply with the provisions defined in table 6.1.6.3.4-1.
Table 6.1.6.3.4-1: Enumeration HoState
Enumeration value Description
* * *
\"NONE\" No handover is in progress for the PDU session. \"PREPARING\" A
handover is in preparation for the PDU session; see clause 5.2.2.3.4.1.
\"PREPARED\" A handover is prepared for the PDU session; see clause
5.2.2.3.4.1. \"COMPLETED\" The handover is completed. \"CANCELLED\" The
handover is cancelled.
##### 6.1.6.3.5 Enumeration: RequestType
The enumeration RequestType indicates the type of a PDU session creation
request. It shall comply with the provisions defined in table 6.1.6.3.5-1.
Table 6.1.6.3.5-1: Enumeration RequestType
Enumeration value Description
* * *
\"INITIAL_REQUEST\" Request to establish a new PDU session.
\"EXISTING_PDU_SESSION\" Request referring to an existing PDU session.
\"INITIAL_EMERGENCY_REQUEST\" Request to establish a new PDU session for
Emergency Services. \"EXISTING_EMERGENCY_PDU_SESSION\" Request referring to an
existing PDU session for Emergency Services.
##### 6.1.6.3.6 Enumeration: RequestIndication
The enumeration RequestIndication indicates the request type. It shall comply
with the provisions defined in table 6.1.6.3.6-1.
Table 6.1.6.3.6-1: Enumeration RequestIndication
Enumeration value Description
* * *
\"UE_REQ_PDU_SES_MOD\" UE Requested PDU Session Modification
\"UE_REQ_PDU_SES_REL\" UE Requested PDU Session Release \"PDU_SES_MOB\" PDU
Session Mobility (e.g. between 3GPP and non-3GPP access, or from EPS to 5GS
with N26 interface) \"NW_REQ_PDU_SES_AUTH\" Network Requested PDU Session
Authentication \"NW_REQ_PDU_SES_MOD\" Network Requested PDU Session
Modification \"NW_REQ_PDU_SES_REL\" Network Requested PDU Session Release
\"EBI_ASSIGNMENT_REQ\" EPS Bearer ID Assignment Request or EPS Bearer ID
Revocation Request
##### 6.1.6.3.7 Enumeration: NotificationCause
The enumeration NotificationCause indicates the cause of a notification. It
shall comply with the provisions defined in table 6.1.6.3.7-1.
Table 6.1.6.3.7-1: Enumeration NotificationCause
Enumeration value Description
* * *
\"QOS_FULFILLED\" The QoS targets are fulfilled again for the GBR QoS flow.
\"QOS_NOT_FULFILLED\" The QoS targets are no longer fulfilled for the GBR QoS
flow. \"UP_SEC_FULFILLED\" The user plane security enforcement \"Preferred\"
is fulfilled again for the PDU session. \"UP_SEC_NOT_FULFILLED\" The user
plane security enforcement \"Preferred\" is not fulfilled for the PDU session.
##### 6.1.6.3.8 Enumeration: Cause
The enumeration Cause indicates a cause information. It shall comply with the
provisions defined in table 6.1.6.3.8-1.
Table 6.1.6.3.8-1: Enumeration Cause
Enumeration value Description
* * *
\"REL_DUE_TO_HO\" Release due to Handover \"EPS_FALLBACK\" Mobility due to EPS
fallback for IMS voice is on-going. \"REL_DUE_TO_UP_SEC\" Release due to user
plane Security requirements that cannot be fulfilled. \"DNN_CONGESTION\"
Release due to the DNN based congestion control. \"S_NSSAI_CONGESTION\"
Release due to the S-NSSAI based congestion control.
\"REL_DUE_TO_REACTIVATION\" Release due to PDU session reactivation.
\"5G_AN_NOT_RESPONDING\" The 5G AN did not respond to the request initiated by
the network. \"REL_DUE_TO_SLICE_NOT_AVAILABLE\" Release due to the associated
S-NSSAI becomes no longer available. \"REL_DUE_TO_DUPLICATE_SESSION_ID\"
Release due to a UE request to establish a new PDU session with an identical
PDU session Id. \"PDU_SESSION_STATUS_MISMATCH\" Release due to mismatch of PDU
Session status between UE and AMF. \"HO_FAILURE\" Handover preparation failure
\"INSUFFICIENT_UP_RESOURCES\" Failure to activate the User Plane connection of
a PDU session due to insufficient user plane resources.
\"PDU_SESSION_HANDED_OVER\" The PDU session is handed over to another system
or access.
##### 6.1.6.3.9 Enumeration: ResourceStatus
The enumeration ResourceStatus indicates the status of an SM context or PDU
session resource. It shall comply with the provisions defined in table
6.1.6.3.9-1.
Table 6.1.6.3.9-1: Enumeration ResourceStatus
Enumeration value Description
* * *
\"RELEASED\" The SM context or PDU session resource is released.
##### 6.1.6.3.10 Enumeration: DnnSelectionMode
The enumeration DnnSelectionMode indicates whether the DNN of a PDU session
being established corresponds to an explicitly subscribed DNN or to the usage
of a wildcard subscription. It shall comply with the provisions defined in
table 6.1.6.3.10-1.
Table 6.1.6.3.10-1: Enumeration DnnSelectionMode
Enumeration value Description
* * *
\"VERIFIED\" UE or network provided DNN, subscription verified
\"UE_DNN_NOT_VERIFIED\" UE provided DNN, subscription not verified
\"NW_DNN_NOT_VERIFIED\" Network provided DNN, subscription not verified
##### 6.1.6.3.11 Enumeration: EpsInterworkingIndication
The enumeration EpsInterworkingIndication indicates whether and how the PDU
session will possibly be moved to EPS.
Table 6.1.6.3.11-1: Enumeration EpsInterworkingIndication
Enumeration value Description
* * *
\"NONE\" The PDU session cannot be moved EPS. \"WITH_N26\" The PDU session may
possibly be moved to EPS, with N26 interface supported during EPS interworking
procedures. \"WITHOUT_N26\" The PDU session may possibly be moved to EPS,
without N26 interface supported during EPS interworking procedures.
##### 6.1.6.3.12 Enumeration: N2SmInfoType
Table 6.1.6.3.12-1: Enumeration N2SmInfoType
Enumeration value Description
* * *
\"PDU_RES_SETUP_REQ\" PDU Session Resource Setup Request Transfer
\"PDU_RES_SETUP_RSP\" PDU Session Resource Setup Response Transfer
\"PDU_RES_SETUP_FAIL\" PDU Session Resource Setup Unsuccessful Transfer
\"PDU_RES_REL_CMD\" **_PDU Session Resource Release Command Transfer_**
\"PDU_RES_REL_RSP\" **_PDU Session Resource Release Response Transfer_**
\"PDU_RES_MOD_REQ\" **_PDU Session Resource Modify Request Transfer_**
\"PDU_RES_MOD_RSP\" **_PDU Session Resource Modify Response Transfer_**
\"PDU_RES_MOD_FAIL\" **_PDU Session Resource Modify Unsuccessful Transfer_**
\"PDU_RES_NTY\" **_PDU Session Resource Notify Transfer_** \"PDU_RES_NTY_REL\"
**_PDU Session Resource Notify Released Transfer_** \"PDU_RES_MOD_IND\" **_PDU
Session Resource Modify Indication Transfer_** \"PDU_RES_MOD_CFM\" **_PDU
Session Resource Modify Confirm Transfer_** \"PATH_SWITCH_REQ\" Path Switch
Request Transfer \"PATH_SWITCH_SETUP_FAIL\" Path Switch Request Setup Failed
Transfer \"PATH_SWITCH_REQ_ACK\" Path Switch Request Acknowledge Transfer
\"PATH_SWITCH_REQ_FAIL\" Path Switch Request Unsuccessful Transfer
\"HANDOVER_REQUIRED\" Handover Required Transfer \"HANDOVER_CMD\" Handover
Command Transfer \"HANDOVER_PREP_FAIL\" Handover Preparation Unsuccessful
Transfer \"HANDOVER_REQ_ACK\" Handover Request Acknowledge Transfer
\"HANDOVER_RES_ALLOC_FAIL\" Handover Resource Allocation Unsuccessful Transfer
\"SECONDARY_RAT_USAGE\" Secondary RAT Data Usage Report Transfer
##### 6.1.6.3.13 Enumeration: MaxIntegrityProtectedDataRate
Table 6.1.6.3.13-1: Enumeration MaxIntegrityProtectedDataRate
Enumeration value Description
* * *
\"64_KBPS\" 64 kbps \"MAX_UE_RATE\" Full data rate
#### 6.1.6.4 Binary data
##### 6.1.6.4.1 Introduction
This clause defines the binary data that shall be supported in a binary body
part in an HTTP multipart message (see clauses 6.1.2.2.2 and 6.1.2.4).
##### 6.1.6.4.2 N1 SM Message
N1 SM Message shall encode a 5GS NAS SM message as specified in 3GPP TS 24.501
[7], using the vnd.3gpp.5gnas content-type.
N1 SM Message may encode any 5GS NAS SM message specified in 3GPP TS 24.501
[7], as summarized in Table 6.1.6.4.2-1.
Table 6.1.6.4.2-1: N1 SM Message content
+-----------------------------------------+------------------------+ | 5GS NAS message | Reference | | | | | | (3GPP TS 24.501 [7]) | +=========================================+========================+ | PDU session establishment request | 8.3.1 | +-----------------------------------------+------------------------+ | PDU session establishment accept | 8.3.2 | +-----------------------------------------+------------------------+ | PDU session establishment reject | 8.3.3 | +-----------------------------------------+------------------------+ | PDU session authentication command | 8.3.4 | +-----------------------------------------+------------------------+ | PDU session authentication complete | 8.3.5 | +-----------------------------------------+------------------------+ | PDU session authentication result | 8.3.6 | +-----------------------------------------+------------------------+ | PDU session modification request | 8.3.7 | +-----------------------------------------+------------------------+ | PDU session modification reject | 8.3.8 | +-----------------------------------------+------------------------+ | PDU session modification command | 8.3.9 | +-----------------------------------------+------------------------+ | PDU session modification complete | 8.3.10 | +-----------------------------------------+------------------------+ | PDU session modification command reject | 8.3.11 | +-----------------------------------------+------------------------+ | PDU session release request | 8.3.12 | +-----------------------------------------+------------------------+ | PDU session release reject | 8.3.13 | +-----------------------------------------+------------------------+ | PDU session release command | 8.3.14 | +-----------------------------------------+------------------------+ | PDU session release complete | 8.3.15 | +-----------------------------------------+------------------------+ | 5GSM status | 8.3.16 | +-----------------------------------------+------------------------+
##### 6.1.6.4.3 N2 SM Information
N2 SM Information shall encode NG Application Protocol (NGAP) IEs, as
specified in clause 9.3 of 3GPP TS 38.413 [9] (ASN.1 encoded), using the
vnd.3gpp.ngap content-type.
N2 SM Information may encode any NGAP SMF related IE specified in 3GPP TS
38.413 [9], as summarized in Table 6.1.6.4.3-1.
Table 6.1.6.4.3-1: N2 SM Information content
+----------------------+----------------------+----------------------+ | N2 SM IE | Reference | Related NGAP message | | | | | | | (3 | | | | GPP TS 38.413 [9]) | | +======================+======================+======================+ | PDU Session Resource | 9.3.4.1 | PDU Session Resource | | Setup Request | | Setup Request | | Transfer | | | | | | Initial Context | | | | Setup Request | | | | | | | | Handover Request | +----------------------+----------------------+----------------------+ | PDU Session Resource | 9.3.4.2 | PDU Session Resource | | Setup Response | | Setup Response | | Transfer | | | | | | Initial Context | | | | Setup Response | +----------------------+----------------------+----------------------+ | PDU Session Resource | 9.3.4.16 | PDU Session Resource | | Setup Unsuccessful | | Setup Response | | Transfer | | | | | | Initial Context | | | | Setup Response | +----------------------+----------------------+----------------------+ | **_PDU Session | 9.3.4.12 | PDU Session Resource | | Resource Release | | Release Command | | Command Transfer_** | | | +----------------------+----------------------+----------------------+ | **_PDU Session | 9.3.4.21 | PDU Session Resource | | Resource Release | | Release Response | | Response Transfer_** | | | +----------------------+----------------------+----------------------+ | **_PDU Session | 9.3.4.3 | PDU Session Resource | | Resource Modify | | Modify Request | | Request Transfer_** | | | +----------------------+----------------------+----------------------+ | **_PDU Session | 9.3.4.4 | PDU Session Resource | | Resource Modify | | Modify Response | | Response Transfer_** | | | +----------------------+----------------------+----------------------+ | PDU Session Resource | 9.3.4.17 | PDU Session Resource | | Modify Unsuccessful | | Modify Response | | Transfer | | | +----------------------+----------------------+----------------------+ | **_PDU Session | 9.3.4.5 | PDU Session Resource | | Resource Notify | | Notify | | Transfer_** | | | +----------------------+----------------------+----------------------+ | PDU Session Resource | 9.3.4.13 | PDU Session Resource | | Notify Released | | Notify | | Transfer | | | +----------------------+----------------------+----------------------+ | **_PDU Session | 9.3.4.6 | PDU Session Resource | | Resource Modify | | Modify Indication | | Indication | | | | Transfer_** | | | +----------------------+----------------------+----------------------+ | **_PDU Session | 9.3.4.7 | PDU Session Resource | | Resource Modify | | Modify Confirm | | Confirm Transfer_** | | | +----------------------+----------------------+----------------------+ | Path Switch Request | 9.3.4.8 | Path Switch Request | | Transfer | | | +----------------------+----------------------+----------------------+ | Path Switch Request | 9.3.4.15 | Path Switch Request | | Setup Failed | | | | Transfer | | | +----------------------+----------------------+----------------------+ | Path Switch Request | 9.3.4.9 | Path Switch Request | | Acknowledge Transfer | | Acknowledge | +----------------------+----------------------+----------------------+ | Path Switch Request | 9.3.4.20 | Path Switch Request | | Unsuccessful | | Acknowledge | | Transfer | | | | | | Path Switch Request | | | | Failure | +----------------------+----------------------+----------------------+ | **_Handover Required | 9.3.4.14 | Handover Required | | Transfer_** | | | +----------------------+----------------------+----------------------+ | Handover Request | 9.3.4.11 | Handover Request | | Acknowledge Transfer | | Acknowledge | +----------------------+----------------------+----------------------+ | Handover Resource | 9.3.4.19 | Handover Request | | Allocation | | Acknowledge | | Unsuccessful | | | | Transfer | | | +----------------------+----------------------+----------------------+ | Handover Command | 9.3.4.10 | Handover Command | | Transfer | | | +----------------------+----------------------+----------------------+ | Handover Preparation | 9.3.4.18 | Handover Command | | Unsuccessful | | | | Transfer | | | +----------------------+----------------------+----------------------+ | Secondary RAT Data | 9.3.4.23 | Secondary RAT Data | | Usage Report | | Usage Report | | Transfer | | | +----------------------+----------------------+----------------------+
##### 6.1.6.4.4 n1SmInfoFromUe, n1SmInfoToUe, unknownN1SmInfo
n1SmInfoFromUe, n1SmInfoToUe and unknownN1SmInfo shall encode one or more NAS
SM IEs, including the Type and Length fields, as specified in 3GPP TS 24.501
[7], using the vnd.3gpp.5gnas content-type.
Clause 5.2.3.1 specifies the information that shall be included in these
payloads.
n1SmInfoFromUe and n1SmInfoToUe may encode the 5GS NAS IEs listed in tables
6.1.6.4.4-1 and 6.1.6.4.4-2.
Table 6.1.6.4.4-1: n1SmInfoFromUE content
+----------------------+----------------------+----------------------+ | 5GS NAS IE | Reference | Related NAS SM | | | | message | | | (3 | | | | GPP TS 24.501 [7]) | | +======================+======================+======================+ | Message type | 9.7 | All NAS SM messages | +----------------------+----------------------+----------------------+ | PDU session type | 9.11.4.11 | PDU Session | | | | Establishment | | | | Request | +----------------------+----------------------+----------------------+ | SSC mode | 9.11.4.16 | PDU Session | | | | Establishment | | | | Request | +----------------------+----------------------+----------------------+ | Maximum number of | 9.11.4.9 | PDU Session | | supported packet | | Establishment | | filters | | Request | | | | | | | | PDU Session | | | | Modification Request | +----------------------+----------------------+----------------------+ | Integrity protection | 9.11.4.7 | PDU Session | | maximum data rate | | Modification Request | | | | | | | | (NOTE 3) | +----------------------+----------------------+----------------------+ | SM PDU DN request | 9.11.4.15 | PDU Session | | container | | Establishment | | | | Request | +----------------------+----------------------+----------------------+ | Extended protocol | 9.11.4.6 | PDU Session | | configuration | | Establishment | | options | | Request | | | | | | | | PDU Session | | | | Authentication | | | | Complete | | | | | | | | PDU Session | | | | Modification Request | | | | | | | | PDU Session | | | | Modification | | | | Complete | | | | | | | | PDU Session | | | | Modification Command | | | | Reject | | | | | | | | PDU Session Release | | | | Request | | | | | | | | PDU Session Release | | | | Complete | +----------------------+----------------------+----------------------+ | EAP message | 9.11.2.2 | PDU Session | | | | Authentication | | | | Complete | +----------------------+----------------------+----------------------+ | Requested QoS rules | 9.11.4.13 | PDU Session | | | | Modification Request | +----------------------+----------------------+----------------------+ | Requested QoS flow | 9.11.4.12 | PDU Session | | descriptions | | Modification Request | +----------------------+----------------------+----------------------+ | 5GSM cause | 9.11.4.2 | PDU Session | | | | Modification Request | | | | | | | | PDU Session Release | | | | Request | | | | | | | | PDU Session Release | | | | Complete | | | | | | | | (NOTE 2) | +----------------------+----------------------+----------------------+ | 5GSM capability | 9.11.4.1 | PDU Session | | | | Establishment | | | | Request | | | | | | | | PDU Session | | | | Modification Request | | | | | | | | (NOTE 1) | +----------------------+----------------------+----------------------+ | Mapped EPS bearer | 9.11.4.8 | PDU Session | | contexts | | Modification Request | +----------------------+----------------------+----------------------+ | NOTE 1: The 5GSM | | | | capability IE shall | | | | be encoded as | | | | received from the | | | | UE. It may contain | | | | UE capabilities that | | | | the V-SMF only needs | | | | to transfer to the | | | | H-SMF, e.g. support | | | | of reflective QoS, | | | | or support of | | | | multi-homed IPv6 PDU | | | | session, and/or | | | | capabilities to be | | | | interpreted and used | | | | by the V-SMF. | | | | | | | | NOTE 2: The 5GSM | | | | cause IE shall be | | | | encoded as received | | | | from the UE.\ | | | | This information is | | | | defined as a \"V\" | | | | IE (i.e. without a | | | | Type field) in other | | | | NAS messages, e.g. | | | | PDU Session | | | | Modification Command | | | | Reject message, in | | | | which case it shall | | | | be sent as a | | | | separate n1SmCause | | | | IE over N16 and not | | | | within the | | | | n1SmInfoToUE binary | | | | data. | | | | | | | | NOTE 3: This | | | | information is | | | | defined as a \"V\" | | | | IE (i.e. without a | | | | Type field) in other | | | | NAS messages, e.g. | | | | PDU Session | | | | Establishment | | | | Request, in which | | | | case it shall be | | | | sent as separate | | | | maximum integrity | | | | protected data rate | | | | IEs over N16 and not | | | | within the | | | | n1SmInfoToUE binary | | | | data. | | | +----------------------+----------------------+----------------------+
Table 6.1.6.4.4-2: n1SmInfoToUE parameters
+----------------------+----------------------+----------------------+ | 5GS NAS IE | Reference | Related NAS SM | | | | message | | | (3 | | | | GPP TS 24.501 [7]) | | +======================+======================+======================+ | Message type | 9.7 | All NAS SM messages | +----------------------+----------------------+----------------------+ | RQ timer value | 9.11.2.3 | PDU Session | | | | Establishment Accept | | | | | | | | PDU Session | | | | Modification Command | +----------------------+----------------------+----------------------+ | EAP message | 9.11.2.2 | PDU Session | | | | Establishment Accept | | | | | | | | PDU Session | | | | Establishment Reject | | | | | | | | PDU Session | | | | Authentication | | | | Command | | | | | | | | PDU Session | | | | Authentication | | | | Result | | | | | | | | PDU Session Release | | | | Command | +----------------------+----------------------+----------------------+ | Allowed SSC mode | 9.11.4.5 | PDU Session | | | | Establishment Reject | +----------------------+----------------------+----------------------+ | Extended protocol | 9.11.4.6 | PDU Session | | configuration | | Establishment Accept | | options | | | | | | PDU Session | | | | Establishment Reject | | | | | | | | PDU Session | | | | Authentication | | | | Command | | | | | | | | PDU Session | | | | Authentication | | | | Result | | | | | | | | PDU Session | | | | Modification Reject | | | | | | | | PDU Session | | | | Modification Command | | | | | | | | PDU Session Release | | | | Reject | | | | | | | | PDU Session Release | | | | Command | +----------------------+----------------------+----------------------+ | 5GSM cause | 9.11.4.2 | PDU Session | | | | Establishment Accept | | | | | | | | PDU Session | | | | Modification Command | | | | | | | | See NOTE. | +----------------------+----------------------+----------------------+ | Mapped EPS bearer | 9.11.4.8 | PDU Session | | contexts | | Establishment Accept | | | | | | | | PDU Session | | | | Modification Command | +----------------------+----------------------+----------------------+ | NOTE: This IE | | | | indicates the 5GSM | | | | cause the H-SMF | | | | requires the V-SMF | | | | to send to the UE. | | | | The V-SMF shall | | | | transfer the | | | | received value to | | | | the UE without | | | | interpretation.\ | | | | This information is | | | | defined as a \"V\" | | | | IE (i.e. without a | | | | Type field) in other | | | | NAS messages, e.g. | | | | PDU Session | | | | Establishment Reject | | | | message, in which | | | | case it shall be | | | | sent as a separate | | | | n1SmCause IE over | | | | N16 and not within | | | | the n1SmInfoToUE | | | | binary data. | | | +----------------------+----------------------+----------------------+
The Message Type shall be present and encoded as the first 5GS NAS IE in any
n1SmInfoFromUe, n1SmInfoToUe and unknownN1SmInfo binary data, to enable the
receiver to decode the 5GS NAS IEs.
NOTE: The Information Element Identifier (see clause 11.2.1.1.3 of 3GPP TS
24.007 [8]) of a 5GS NAS IE uniquely identifies an IE in a given message.
### 6.1.7 Error Handling
#### 6.1.7.1 General
HTTP error handling shall be supported as specified in clause 5.2.4 of 3GPP TS
29.500 [4].
#### 6.1.7.2 Protocol Errors
Protocol errors handling shall be supported as specified in clause 5.2.7 of
3GPP TS 29.500 [4].
#### 6.1.7.3 Application Errors
The common application errors defined in Table 5.2.7.2-1 of 3GPP TS 29.500 [4]
may be used for the Nsmf_PDUSession service.
The following application errors listed in Table 6.1.7.3-1 are specific to the
Nsmf_PDUSession service.
Table 6.1.7.3-1: Application errors
+----------------------+----------------------+----------------------+ | Application Error | HTTP status code | Description | +======================+======================+======================+ | N1_SM_ERROR | 403 Forbidden | This indicates that | | | | an error, other than | | | | those listed in this | | | | table, was detected | | | | when processing the | | | | N1 SM information | | | | received in the | | | | request, e.g. N1 SM | | | | protocol error. | +----------------------+----------------------+----------------------+ | SNSSAI_DENIED | 403 Forbidden | The subscriber does | | | | not have the | | | | necessary | | | | subscription to | | | | access the SNSSAI. | +----------------------+----------------------+----------------------+ | DNN_DENIED | 403 Forbidden | The subscriber does | | | | not have the | | | | necessary | | | | subscription to | | | | access the DNN. | +----------------------+----------------------+----------------------+ | PDUTYPE_DENIED | 403 Forbidden | The subscriber does | | | | not have the | | | | necessary | | | | subscription for the | | | | requested PDU | | | | session type. | +----------------------+----------------------+----------------------+ | SSC_DENIED | 403 Forbidden | The subscriber does | | | | not have the | | | | necessary | | | | subscription for the | | | | requested SSC mode. | +----------------------+----------------------+----------------------+ | SUBSCRIPTION_DENIED | 403 Forbidden | This indicates an | | | | error, other than | | | | those listed in this | | | | table, due to lack | | | | of necessary | | | | subscription to | | | | serve the UE | | | | request. | +----------------------+----------------------+----------------------+ | DNN_NOT_SUPPORTED | 403 Forbidden | The DNN is not | | | | supported by the | | | | SMF. | +----------------------+----------------------+----------------------+ | PDU | 403 Forbidden | The requested PDU | | TYPE_NOT_SUPPORTED | | session type is not | | | | supported by the SMF | | | | for the PDN | | | | corresponding to the | | | | DNN. | +----------------------+----------------------+----------------------+ | SSC_NOT_SUPPORTED | 403 Forbidden | The requested SSC | | | | mode is not | | | | supported by the SMF | | | | for the PDN | | | | corresponding to the | | | | DNN. | +----------------------+----------------------+----------------------+ | HOME_ROUTE | 403 Forbidden | It is used in LBO | | D_ROAMING_REQUIRED | | roaming, if the | | | | V-SMF is not able to | | | | process some part of | | | | the N1 SM | | | | information that | | | | requires Home Routed | | | | Roaming. | +----------------------+----------------------+----------------------+ | OUT_OF\ | 403 Forbidden | The PDU session | | _LADN_SERVICE_AREA | | corresponds to a | | | | LADN and the UE is | | | | outside of the LADN | | | | Service Area. | +----------------------+----------------------+----------------------+ | N2_SM_ERROR | 403 Forbidden | This indicates that | | | | an error, other than | | | | those listed in this | | | | table, was detected | | | | when processing the | | | | N2 SM information | | | | received in the | | | | request, e.g. N2 SM | | | | protocol error. | +----------------------+----------------------+----------------------+ | PRIORIT | 403 Forbidden | The SMF was notified | | IZED_SERVICES_ONLY | | that the UE is | | | | reachable only for | | | | regulatory | | | | prioritized service | | | | and the PDU Session | | | | to be activated is | | | | not for a regulatory | | | | prioritized service. | +----------------------+----------------------+----------------------+ | PDU_SES | 403 Forbidden | The SMF decided to | | SION_ANCHOR_CHANGE | | change the PDU | | | | Session Anchor for | | | | the PDU Session. | +----------------------+----------------------+----------------------+ | TAR | 403 Forbidden | A request to | | GET_MME_CAPABILITY | | retrieve an SM | | | | context is rejected | | | | due to the target | | | | MME not capable to | | | | support the PDU | | | | session. | +----------------------+----------------------+----------------------+ | NO_ | 403 Forbidden | It is used during an | | EPS_5GS_CONTINUITY | | EPS to 5GS Idle mode | | | | mobility or | | | | handover, if the PDU | | | | session does not | | | | support seamless | | | | session continuity | | | | to 5GS. | +----------------------+----------------------+----------------------+ | UNABLE_TO_PAGE_UE | 403 Forbidden | The request is | | | | rejected due to a | | | | temporarily | | | | inability to page | | | | the UE. | +----------------------+----------------------+----------------------+ | UE_NOT_RESPONDING | 403 Forbidden | The UE did not | | | | respond to the | | | | request initiated by | | | | the network, e.g. | | | | paging. | +----------------------+----------------------+----------------------+ | REJECTED_BY_UE | 403 Forbidden | The request is | | | | rejected by the UE. | +----------------------+----------------------+----------------------+ | REJECTED | 403 Forbidden | The request is | | _DUE_VPLMN_POLICY | | rejected due to | | | | VPLMN operator | | | | policy. | +----------------------+----------------------+----------------------+ | H | 403 Forbidden | The request is | | O_TAU_IN_PROGRESS | | rejected temporarily | | | | due to a mobilty | | | | procedure in | | | | progress. | +----------------------+----------------------+----------------------+ | IN | 403 Forbidden | The integrity | | TEGRITY_PROTECTED_ | | protected maximum | | MDR_NOT_ACCEPTABLE | | data rate value | | | | provided by the UE | | | | is not acceptable | | | | for the PDU session | | | | based on local | | | | policy at the SMF. | | | | This error is | | | | applicable when the | | | | UP Security Policy | | | | for the PDU Session | | | | is determined to | | | | have Integrity | | | | Protection set to | | | | \"Required\". | | | | | | | | An NF service | | | | consumer that | | | | receives this error | | | | cause may use it for | | | | maintaining KPIs. | +----------------------+----------------------+----------------------+ | EBI_EXHAUSTED | 403 Forbidden | The allocation of | | | | EPS Bearer ID failed | | | | due to exhaustion of | | | | EBI as the maximum | | | | number of EBIs has | | | | already been | | | | allocated to the UE. | +----------------------+----------------------+----------------------+ | EBI_REJ | 403 Forbidden | The allocation of | | ECTED_LOCAL_POLICY | | EPS Bearer ID was | | | | rejected due to | | | | local policy in the | | | | Serving PLMN. | +----------------------+----------------------+----------------------+ | EB | 403 Forbidden | The allocation of | | I_REJECTED_NO_N26 | | EPS Bearer ID was | | | | rejected when the | | | | AMF is in a serving | | | | PLMN that does not | | | | support 5GS-EPS | | | | interworking | | | | procedures with N26 | | | | interface. | +----------------------+----------------------+----------------------+ | DEFAULT_E | 403 Forbidden | It is used during | | PS_BEARER_INACTIVE | | EPS to 5GS mobility | | | | if the default EPS | | | | bearer context of | | | | the PDU session is | | | | reported as inactive | | | | by the UE in the | | | | epsBearerCtxStatus | | | | attribute. | +----------------------+----------------------+----------------------+ | HANDOVER_RESOURCE\ | 403 Forbidden | It is used during a | | _ALLOCATION_FAILURE | | N2 handover | | | | preparation or an | | | | EPS to 5GS handover | | | | preparation, if no | | | | resource is | | | | allocated by the | | | | target NG-RAN for | | | | the PDU session. | +----------------------+----------------------+----------------------+ | CONTEXT_NOT_FOUND | 404 Not Found | It is used when no | | | | context | | | | corresponding to the | | | | request exists in | | | | the SMF. | +----------------------+----------------------+----------------------+ | INSUFFICIE | 500 Internal Server | The request cannot | | NT_RESOURCES_SLICE | Error | be provided due to | | | | insufficient | | | | resources for the | | | | specific slice. | +----------------------+----------------------+----------------------+ | INSUFFICIENT_R | 500 Internal Server | The request cannot | | ESOURCES_SLICE_DNN | Error | be provided due to | | | | insufficient | | | | resources for the | | | | specific slice and | | | | DNN. | +----------------------+----------------------+----------------------+ | DNN_CONGESTION | 503 Service | The SMF has detected | | | Unavailable | congestion for the | | | | requested DNN and | | | | performs overload | | | | control for that DNN | | | | which does not allow | | | | the PDU session to | | | | be established. | +----------------------+----------------------+----------------------+ | S_NSSAI_CONGESTION | 503 Service | The SMF has detected | | | Unavailable | congestion for the | | | | requested S-NSSAI | | | | and performs | | | | overload control for | | | | that S-NSSAI which | | | | does not allow the | | | | PDU session to be | | | | established. | +----------------------+----------------------+----------------------+ | P | 504 Gateway Timeout | No response is | | EER_NOT_RESPONDING | | received from a | | | | remote peer, e.g. | | | | from the H-SMF for a | | | | HR PDU session. | +----------------------+----------------------+----------------------+ | NETWORK_FAILURE | 504 Gateway Timeout | The request is | | | | rejected due to a | | | | network problem. | +----------------------+----------------------+----------------------+
### 6.1.8 Feature Negotiation
The feature negotiation mechanism specified in clause 6.6 of 3GPP TS 29.500
[4] shall be used to negotiate the optional features applicable between the
SMF and the NF Service Consumer, for the Nsmf_PDUSession service, if any.
The NF Service Consumer shall indicate the optional features it supports for
the Nsmf_PDUSession service, if any, by including the supportedFeatures
attribute in the HTTP POST request when requesting the SMF to create an SM
context or a PDU session resource.
The SMF shall determine the supported features for the created SM context or
PDU session resource as specified in clause 6.6 of 3GPP TS 29.500 [4] and
shall indicate the supported features by including the supportedFeatures
attribute in the representation of the SM context or PDU session resource it
returns in the HTTP response confirming the creation of the resource.
The syntax of the supportedFeatures attribute is defined in clause 5.2.2 of
3GPP TS 29.571 [13].
The following features are defined for the Nsmf_PDUSession service.
Table 6.1.8-1: Features of supportedFeatures attribute used by Nsmf_PDUSession
service
+-------------------------------------+---------+-----+-------------+ | Feature Number | Feature | M/O | Description | +-------------------------------------+---------+-----+-------------+ | | | | | +-------------------------------------+---------+-----+-------------+ | Feature number: The order number of | | | | | the feature within the | | | | | s**upportedFeatures attribute | | | | | (starting with 1).** | | | | | | | | | | **Feature: A short name that can be | | | | | used to refer to the bit and to the | | | | | feature.** | | | | | | | | | | **M/O: Defines if the | | | | | implementation of the feature is | | | | | mandatory (** \"**M** \"**) or | | | | | optional (** \"**O** \"**).** | | | | | | | | | | Description: A clear textual | | | | | description of the feature. | | | | +-------------------------------------+---------+-----+-------------+
### 6.1.9 Security
As indicated in 3GPP TS 33.501 [17] and 3GPP TS 29.500 [4], the access to the
Nsmf_PDUSession API may be authorized by means of the OAuth2 protocol (see
IETF RFC 6749 [18]), based on local configuration, using the \"Client
Credentials\" authorization grant, where the NRF (see 3GPP TS 29.510 [19])
plays the role of the authorization server.
If OAuth2 authorization is used, an NF Service Consumer, prior to consuming
services offered by the Nsmf_PDUSession API, shall obtain a \"token\" from the
authorization server, by invoking the Access Token Request service, as
described in 3GPP TS 29.510 [19], clause 5.4.2.2.
NOTE 1: When multiple NRFs are deployed in a network, the NRF used as
authorization server is the same NRF that the NF Service Consumer used for
discovering the Nsmf_PDUSession service.
NOTE 2: The security credentials for accessing a child resource URI of an sm-
contexts or pdu-sessions collection distributed on different processing
instances or hosts are the same as for accessing the collection URI.
The Nsmf_PDUSession API defines a single scope \"nsmf-pdusession\" for the
entire service, and it does not define any additional scopes at resource and
operation level.
###### ## Annex A (normative): OpenAPI specification
## A.1 General
This Annex specifies the formal definition of the Nsmf_PDUSession service. It
consists of OpenAPI 3.0.0 specifications, in YAML format.
This Annex takes precedence when being discrepant to other parts of the
specification with respect to the encoding of information elements and methods
within the API(s).
NOTE 1: The semantics and procedures, as well as conditions, e.g. for the
applicability and allowed combinations of attributes or values, not expressed
in the OpenAPI definitions but defined in other parts of the specification
also apply.
Informative copies of the OpenAPI specification files contained in this 3GPP
Technical Specification are available on the public 3GPP file server in the
following locations (see clause 5B of the 3GPP TR 21.900 [28] for further
information):
\- https://www.3gpp.org/ftp/Specs/archive/OpenAPI/\/, and
\- https://www.3gpp.org/ftp/Specs/\/\/OpenAPI/.
NOTE 2: To fetch the OpenAPI specification file after CT#83 plenary meeting
for Release 15 in the above links \ must be replaced with the date
the CT Plenary occurs, in the form of year-month (yyyy-mm), e.g. for CT#83
meeting \ must be replaced with value \"2019-03\" and \ must
be replaced with value \"Rel-15\".
## A.2 Nsmf_PDUSession API
openapi: 3.0.0
info:
version: \'1.0.6\'
title: \'Nsmf_PDUSession\'
description: \|
SMF PDU Session Service.
Â© 2021, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI, TTA,
TTC).
All rights reserved.
externalDocs:
description: 3GPP TS 29.502 V15.10.0; 5G System; Session Management Services;
Stage 3
url: http://www.3gpp.org/ftp/Specs/archive/29_series/29.502/
servers:
\- url: \'{apiRoot}/nsmf-pdusession/v1\'
variables:
apiRoot:
default: https://example.com
description: apiRoot as defined in clause 4.4 of 3GPP TS 29.501. The sm-
contexts and pdu-sessions resources can be distributed on different processing
instances or hosts. Thus the authority and/or deployment-specific string of
the apiRoot of the created individual sm context and pdu-session resources\'
URIs may differ from the authority and/or deployment-specific string of the
apiRoot of the sm-contexts and pdu-sessions collections\' URIs.
security:
\- {}
\- oAuth2ClientCredentials:
\- nsmf-pdusession
paths:
/sm-contexts:
post:
summary: Create SM Context
tags:
\- SM contexts collection
operationId: PostSmContexts
requestBody:
description: representation of the SM context to be created in the SMF
required: true
content:
multipart/related:
schema:
type: object
properties: # Request parts
jsonData:
\$ref: \'#/components/schemas/SmContextCreateData\'
binaryDataN1SmMessage:
type: string
format: binary
encoding:
jsonData:
contentType: application/json
binaryDataN1SmMessage:
contentType: application/vnd.3gpp.5gnas
headers:
Content-Id:
schema:
type: string
callbacks:
smContextStatusNotification:
\'{\$request.body#/smContextStatusUri}\':
post:
requestBody: # contents of the callback message
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/SmContextStatusNotification\'
responses:
\'204\':
description: successful notification
\'307\':
description: temporary redirect
headers:
Location:
required: true
description: \'A URI pointing to the endpoint of another NF service consumer
to which the notification should be sent\'
schema:
type: string
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
responses:
\'201\':
description: successful creation of an SM context
content:
application/json: # message without binary body part
schema:
\$ref: \'#/components/schemas/SmContextCreatedData\'
multipart/related: # message with binary body part(s)
schema:
type: object
properties: # Request parts
jsonData:
\$ref: \'#/components/schemas/SmContextCreatedData\'
binaryDataN2SmInformation:
type: string
format: binary
encoding:
jsonData:
contentType: application/json
binaryDataN2SmInformation:
contentType: application/vnd.3gpp.ngap
headers:
Content-Id:
schema:
type: string
headers:
Location:
description: \'Contains the URI of the newly created resource, according to
the structure: {apiRoot}/nsmf-pdusession/{apiVersion}/sm-
contexts/{smContextRef}\'
required: true
schema:
type: string
\'307\':
description: temporary redirect
headers:
Location:
description: \'An alternative URI of the resource located on an alternative
service instance within the SMF that was selected by the AMF\'
required: true
schema:
type: string
\'308\':
description: permanent redirect
headers:
Location:
description: \'An alternative URI of the resource located on an alternative
service instance within the SMF that was selected by the AMF\'
required: true
schema:
type: string
\'400\':
description: unsuccessful creation of an SM context - bad request
content:
application/json: # message without binary body part
schema:
\$ref: \'#/components/schemas/SmContextCreateError\'
multipart/related: # message with binary body part(s)
schema:
type: object
properties: # Request parts
jsonData:
\$ref: \'#/components/schemas/SmContextCreateError\'
binaryDataN1SmMessage:
type: string
format: binary
encoding:
jsonData:
contentType: application/json
binaryDataN1SmMessage:
contentType: application/vnd.3gpp.5gnas
headers:
Content-Id:
schema:
type: string
\'403\':
description: unsuccessful creation of an SM context - forbidden
content:
application/json: # message without binary body part
schema:
\$ref: \'#/components/schemas/SmContextCreateError\'
multipart/related: # message with binary body part(s)
schema:
type: object
properties: # Request parts
jsonData:
\$ref: \'#/components/schemas/SmContextCreateError\'
binaryDataN1SmMessage:
type: string
format: binary
encoding:
jsonData:
contentType: application/json
binaryDataN1SmMessage:
contentType: application/vnd.3gpp.5gnas
headers:
Content-Id:
schema:
type: string
\'404\':
description: unsuccessful creation of an SM context - not found
content:
application/json: # message without binary body part
schema:
\$ref: \'#/components/schemas/SmContextCreateError\'
multipart/related: # message with binary body part(s)
schema:
type: object
properties: # Request parts
jsonData:
\$ref: \'#/components/schemas/SmContextCreateError\'
binaryDataN1SmMessage:
type: string
format: binary
encoding:
jsonData:
contentType: application/json
binaryDataN1SmMessage:
contentType: application/vnd.3gpp.5gnas
headers:
Content-Id:
schema:
type: string
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
description: unsuccessful creation of an SM context - internal server error
content:
application/json: # message without binary body part
schema:
\$ref: \'#/components/schemas/SmContextCreateError\'
multipart/related: # message with binary body part(s)
schema:
type: object
properties: # Request parts
jsonData:
\$ref: \'#/components/schemas/SmContextCreateError\'
binaryDataN1SmMessage:
type: string
format: binary
encoding:
jsonData:
contentType: application/json
binaryDataN1SmMessage:
contentType: application/vnd.3gpp.5gnas
headers:
Content-Id:
schema:
type: string
\'503\':
description: unsuccessful creation of an SM context - service unavailable
content:
application/json: # message without binary body part
schema:
\$ref: \'#/components/schemas/SmContextCreateError\'
multipart/related: # message with binary body part(s)
schema:
type: object
properties: # Request parts
jsonData:
\$ref: \'#/components/schemas/SmContextCreateError\'
binaryDataN1SmMessage:
type: string
format: binary
encoding:
jsonData:
contentType: application/json
binaryDataN1SmMessage:
contentType: application/vnd.3gpp.5gnas
headers:
Content-Id:
schema:
type: string
\'504\':
description: unsuccessful creation of an SM context - gateway timeout
content:
application/json: # message without binary body part
schema:
\$ref: \'#/components/schemas/SmContextCreateError\'
multipart/related: # message with binary body part(s)
schema:
type: object
properties: # Request parts
jsonData:
\$ref: \'#/components/schemas/SmContextCreateError\'
binaryDataN1SmMessage:
type: string
format: binary
encoding:
jsonData:
contentType: application/json
binaryDataN1SmMessage:
contentType: application/vnd.3gpp.5gnas
headers:
Content-Id:
schema:
type: string
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
/sm-contexts/{smContextRef}/retrieve:
post:
summary: Retrieve SM Context
tags:
\- Individual SM context
operationId: RetrieveSmContext
parameters:
\- name: smContextRef
in: path
description: SM context reference
required: true
schema:
type: string
requestBody:
description: parameters used to retrieve the SM context
required: false
content:
application/json:
schema:
\$ref: \'#/components/schemas/SmContextRetrieveData\'
responses:
\'200\':
description: successful retrieval of an SM context
content:
application/json:
schema:
\$ref: \'#/components/schemas/SmContextRetrievedData\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
/sm-contexts/{smContextRef}/modify:
post:
summary: Update SM Context
tags:
\- Individual SM context
operationId: UpdateSmContext
parameters:
\- name: smContextRef
in: path
description: SM context reference
required: true
schema:
type: string
requestBody:
description: representation of the updates to apply to the SM context
required: true
content:
application/json: # message without binary body part
schema:
\$ref: \'#/components/schemas/SmContextUpdateData\'
multipart/related: # message with binary body part(s)
schema:
type: object
properties: # Request parts
jsonData:
\$ref: \'#/components/schemas/SmContextUpdateData\'
binaryDataN1SmMessage:
type: string
format: binary
binaryDataN2SmInformation:
type: string
format: binary
binaryDataN2SmInformationExt1:
type: string
format: binary
encoding:
jsonData:
contentType: application/json
binaryDataN1SmMessage:
contentType: application/vnd.3gpp.5gnas
headers:
Content-Id:
schema:
type: string
binaryDataN2SmInformation:
contentType: application/vnd.3gpp.ngap
headers:
Content-Id:
schema:
type: string
binaryDataN2SmInformationExt1:
contentType: application/vnd.3gpp.ngap
headers:
Content-Id:
schema:
type: string
responses:
\'200\':
description: successful update of an SM context with content in the response
content:
application/json: # message without binary body part
schema:
\$ref: \'#/components/schemas/SmContextUpdatedData\'
multipart/related: # message with binary body part(s)
schema:
type: object
properties: # Request parts
jsonData:
\$ref: \'#/components/schemas/SmContextUpdatedData\'
binaryDataN1SmMessage:
type: string
format: binary
binaryDataN2SmInformation:
type: string
format: binary
encoding:
jsonData:
contentType: application/json
binaryDataN1SmMessage:
contentType: application/vnd.3gpp.5gnas
headers:
Content-Id:
schema:
type: string
binaryDataN2SmInformation:
contentType: application/vnd.3gpp.ngap
headers:
Content-Id:
schema:
type: string
\'204\':
description: successful update of an SM context without content in the
response
\'400\':
description: unsuccessful update of an SM context - bad request
content:
application/json: # message without binary body part
schema:
\$ref: \'#/components/schemas/SmContextUpdateError\'
multipart/related: # message with binary body part(s)
schema:
type: object
properties: # Request parts
jsonData:
\$ref: \'#/components/schemas/SmContextUpdateError\'
binaryDataN1SmMessage:
type: string
format: binary
binaryDataN2SmInformation:
type: string
format: binary
encoding:
jsonData:
contentType: application/json
binaryDataN1SmMessage:
contentType: application/vnd.3gpp.5gnas
headers:
Content-Id:
schema:
type: string
binaryDataN2SmInformation:
contentType: application/vnd.3gpp.ngap
headers:
Content-Id:
schema:
type: string
\'403\':
description: unsuccessful update of an SM context - forbidden
content:
application/json: # message without binary body part
schema:
\$ref: \'#/components/schemas/SmContextUpdateError\'
multipart/related: # message with binary body part(s)
schema:
type: object
properties: # Request parts
jsonData:
\$ref: \'#/components/schemas/SmContextUpdateError\'
binaryDataN1SmMessage:
type: string
format: binary
binaryDataN2SmInformation:
type: string
format: binary
encoding:
jsonData:
contentType: application/json
binaryDataN1SmMessage:
contentType: application/vnd.3gpp.5gnas
headers:
Content-Id:
schema:
type: string
binaryDataN2SmInformation:
contentType: application/vnd.3gpp.ngap
headers:
Content-Id:
schema:
type: string
\'404\':
description: unsuccessful update of an SM context - not found
content:
application/json: # message without binary body part
schema:
\$ref: \'#/components/schemas/SmContextUpdateError\'
multipart/related: # message with binary body part(s)
schema:
type: object
properties: # Request parts
jsonData:
\$ref: \'#/components/schemas/SmContextUpdateError\'
binaryDataN1SmMessage:
type: string
format: binary
binaryDataN2SmInformation:
type: string
format: binary
encoding:
jsonData:
contentType: application/json
binaryDataN1SmMessage:
contentType: application/vnd.3gpp.5gnas
headers:
Content-Id:
schema:
type: string
binaryDataN2SmInformation:
contentType: application/vnd.3gpp.ngap
headers:
Content-Id:
schema:
type: string
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
description: unsuccessful update of an SM context - Internal server error
content:
application/json: # message without binary body part
schema:
\$ref: \'#/components/schemas/SmContextUpdateError\'
multipart/related: # message with binary body part(s)
schema:
type: object
properties: # Request parts
jsonData:
\$ref: \'#/components/schemas/SmContextUpdateError\'
binaryDataN1SmMessage:
type: string
format: binary
binaryDataN2SmInformation:
type: string
format: binary
encoding:
jsonData:
contentType: application/json
binaryDataN1SmMessage:
contentType: application/vnd.3gpp.5gnas
headers:
Content-Id:
schema:
type: string
binaryDataN2SmInformation:
contentType: application/vnd.3gpp.ngap
headers:
Content-Id:
schema:
type: string
\'503\':
description: unsuccessful update of an SM context - Service Unavailable
content:
application/json: # message without binary body part
schema:
\$ref: \'#/components/schemas/SmContextUpdateError\'
multipart/related: # message with binary body part(s)
schema:
type: object
properties: # Request parts
jsonData:
\$ref: \'#/components/schemas/SmContextUpdateError\'
binaryDataN1SmMessage:
type: string
format: binary
binaryDataN2SmInformation:
type: string
format: binary
encoding:
jsonData:
contentType: application/json
binaryDataN1SmMessage:
contentType: application/vnd.3gpp.5gnas
headers:
Content-Id:
schema:
type: string
binaryDataN2SmInformation:
contentType: application/vnd.3gpp.ngap
headers:
Content-Id:
schema:
type: string
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
/sm-contexts/{smContextRef}/release:
post:
summary: Release SM Context
tags:
\- Individual SM context
operationId: ReleaseSmContext
parameters:
\- name: smContextRef
in: path
description: SM context reference
required: true
schema:
type: string
requestBody:
description: representation of the data to be sent to the SMF when releasing
the SM context
required: false
content:
application/json: # message without binary body part
schema:
\$ref: \'#/components/schemas/SmContextReleaseData\'
multipart/related: # message with binary body part(s)
schema:
type: object
properties: # Request parts
jsonData:
\$ref: \'#/components/schemas/SmContextReleaseData\'
binaryDataN2SmInformation:
type: string
format: binary
encoding:
jsonData:
contentType: application/json
binaryDataN2SmInformation:
contentType: application/vnd.3gpp.ngap
headers:
Content-Id:
schema:
type: string
responses:
\'204\':
description: successful release of an SM context without content in the
response
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
/pdu-sessions:
post:
summary: Create
tags:
\- PDU sessions collection
operationId: PostPduSessions
requestBody:
description: representation of the PDU session to be created in the H-SMF
required: true
content:
application/json: # message without binary body part
schema:
\$ref: \'#/components/schemas/PduSessionCreateData\'
multipart/related: # message with binary body part(s)
schema:
type: object
properties: # Request parts
jsonData:
\$ref: \'#/components/schemas/PduSessionCreateData\'
binaryDataN1SmInfoFromUe:
type: string
format: binary
binaryDataUnknownN1SmInfo:
type: string
format: binary
encoding:
jsonData:
contentType: application/json
binaryDataN1SmInfoFromUe:
contentType: application/vnd.3gpp.5gnas
headers:
Content-Id:
schema:
type: string
binaryDataUnknownN1SmInfo:
contentType: application/vnd.3gpp.5gnas
headers:
Content-Id:
schema:
type: string
callbacks:
statusNotification:
\'{\$request.body#/vsmfPduSessionUri}\':
post:
summary: Notify Status
tags:
\- Individual PDU session (V-SMF)
operationId: NotifyStatus
requestBody:
description: representation of the status notification
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/StatusNotification\'
responses:
\'204\':
description: successful notificationof the status change
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
update:
\'{\$request.body#/vsmfPduSessionUri}/modify\':
post:
summary: Update (initiated by H-SMF)
tags:
\- Individual PDU session (V-SMF)
operationId: ModifyPduSession
requestBody:
description: representation of updates to apply to the PDU session
required: true
content:
application/+json: # message without binary body part
schema:
\$ref: \'#/components/schemas/VsmfUpdateData\'
multipart/related: # message with binary body part(s)
schema:
type: object
properties: # Request parts
jsonData:
\$ref: \'#/components/schemas/VsmfUpdateData\'
binaryDataN1SmInfoToUe:
type: string
format: binary
encoding:
jsonData:
contentType: application/json
binaryDataN1SmInfoToUe:
contentType: application/vnd.3gpp.5gnas
headers:
Content-Id:
schema:
type: string
responses:
\'200\':
description: successful update of a PDU session with content in the response
content:
application/json: # message without binary body part
schema:
\$ref: \'#/components/schemas/VsmfUpdatedData\'
multipart/related: # message with binary body part(s)
schema:
type: object
properties: # Request parts
jsonData:
\$ref: \'#/components/schemas/VsmfUpdatedData\'
binaryDataN1SmInfoFromUe:
type: string
format: binary
binaryDataUnknownN1SmInfo:
type: string
format: binary
encoding:
jsonData:
contentType: application/json
binaryDataN1SmInfoFromUe:
contentType: application/vnd.3gpp.5gnas
headers:
Content-Id:
schema:
type: string
binaryDataUnknownN1SmInfo:
contentType: application/vnd.3gpp.5gnas
headers:
Content-Id:
schema:
type: string
\'204\':
description: successful update of a PDU session without content in the
response
\'400\':
\$ref: \'#/components/responses/VsmfUpdateError\'
\'403\':
\$ref: \'#/components/responses/VsmfUpdateError\'
\'404\':
\$ref: \'#/components/responses/VsmfUpdateError\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'#/components/responses/VsmfUpdateError\'
\'503\':
\$ref: \'#/components/responses/VsmfUpdateError\'
\'504\':
\$ref: \'#/components/responses/VsmfUpdateError\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
responses:
\'201\':
description: successful creation of a PDU session
content:
application/json: # message without binary body part
schema:
\$ref: \'#/components/schemas/PduSessionCreatedData\'
multipart/related: # message with binary body part(s)
schema:
type: object
properties: # Request parts
jsonData:
\$ref: \'#/components/schemas/PduSessionCreatedData\'
binaryDataN1SmInfoToUe:
type: string
format: binary
encoding:
jsonData:
contentType: application/json
binaryDataN1SmInfoToUe:
contentType: application/vnd.3gpp.5gnas
headers:
Content-Id:
schema:
type: string
headers:
Location:
description: \'Contains the URI of the newly created resource, according to
the structure: {apiRoot}/nsmf-pdusession/{apiVersion}/pdu-
sessions/{pduSessionRef}\'
required: true
schema:
type: string
\'307\':
description: temporary redirect
headers:
Location:
description: \'An alternative URI of the resource located on an alternative
service instance within the SMF that was selected by the AMF\'
required: true
schema:
type: string
\'308\':
description: permanent redirect
headers:
Location:
description: \'An alternative URI of the resource located on an alternative
service instance within the SMF that was selected by the AMF\'
required: true
schema:
type: string
\'400\':
\$ref: \'#/components/responses/PduSessionCreateError\'
\'403\':
\$ref: \'#/components/responses/PduSessionCreateError\'
\'404\':
\$ref: \'#/components/responses/PduSessionCreateError\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'#/components/responses/PduSessionCreateError\'
\'503\':
\$ref: \'#/components/responses/PduSessionCreateError\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
/pdu-sessions/{pduSessionRef}/modify:
post:
summary: Update (initiated by V-SMF)
tags:
\- Individual PDU session (H-SMF)
operationId: UpdatePduSession
parameters:
\- name: pduSessionRef
in: path
description: PDU session reference
required: true
schema:
type: string
requestBody:
description: representation of the updates to apply to the PDU session
required: true
content:
application/json: # message without binary body part
schema:
\$ref: \'#/components/schemas/HsmfUpdateData\'
multipart/related: # message with binary body part(s)
schema:
type: object
properties: # Request parts
jsonData:
\$ref: \'#/components/schemas/HsmfUpdateData\'
binaryDataN1SmInfoFromUe:
type: string
format: binary
binaryDataUnknownN1SmInfo:
type: string
format: binary
encoding:
jsonData:
contentType: application/json
binaryDataN1SmInfoFromUe:
contentType: application/vnd.3gpp.5gnas
headers:
Content-Id:
schema:
type: string
binaryDataUnknownN1SmInfo:
contentType: application/vnd.3gpp.5gnas
headers:
Content-Id:
schema:
type: string
responses:
\'200\':
description: successful update of a PDU session with content in the response
content:
application/json: # message without binary body part
schema:
\$ref: \'#/components/schemas/HsmfUpdatedData\'
multipart/related: # message with binary body part(s)
schema:
type: object
properties: # Request parts
jsonData:
\$ref: \'#/components/schemas/HsmfUpdatedData\'
binaryDataN1SmInfoToUe:
type: string
format: binary
encoding:
jsonData:
contentType: application/json
binaryDataN1SmInfoToUe:
contentType: application/vnd.3gpp.5gnas
headers:
Content-Id:
schema:
type: string
\'204\':
description: successful update of a PDU session without content in the
response
\'400\':
\$ref: \'#/components/responses/HsmfUpdateError\'
\'403\':
\$ref: \'#/components/responses/HsmfUpdateError\'
\'404\':
\$ref: \'#/components/responses/HsmfUpdateError\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'#/components/responses/HsmfUpdateError\'
\'503\':
\$ref: \'#/components/responses/HsmfUpdateError\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
/pdu-sessions/{pduSessionRef}/release:
post:
summary: Release
tags:
\- Individual PDU session (H-SMF)
operationId: ReleasePduSession
parameters:
\- name: pduSessionRef
in: path
description: PDU session reference
required: true
schema:
type: string
requestBody:
description: representation of the data to be sent to H-SMF when releasing the
PDU session
required: false
content:
application/json:
schema:
\$ref: \'#/components/schemas/ReleaseData\'
responses:
\'204\':
description: successful release of a PDU session
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
components:
securitySchemes:
oAuth2ClientCredentials:
type: oauth2
flows:
clientCredentials:
tokenUrl: \'{nrfApiRoot}/oauth2/token\'
scopes:
nsmf-pdusession: Access to the nsmf-pdusession API
schemas:
#
# STRUCTURED DATA TYPES
#
SmContextCreateData:
type: object
properties:
supi:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Supi\'
unauthenticatedSupi:
type: boolean
default: false
pei:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Pei\'
gpsi:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Gpsi\'
pduSessionId:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PduSessionId\'
dnn:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Dnn\'
sNssai:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Snssai\'
hplmnSnssai:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Snssai\'
servingNfId:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/NfInstanceId\'
guami:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Guami\'
serviceName:
\$ref: \'TS29510_Nnrf_NFManagement.yaml#/components/schemas/ServiceName\'
servingNetwork:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PlmnId\'
requestType:
\$ref: \'#/components/schemas/RequestType\'
n1SmMsg:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/RefToBinaryData\'
anType:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/AccessType\'
ratType:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/RatType\'
presenceInLadn:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PresenceState\'
ueLocation:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/UserLocation\'
ueTimeZone:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/TimeZone\'
addUeLocation:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/UserLocation\'
smContextStatusUri:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uri\'
hSmfUri:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uri\'
additionalHsmfUri:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uri\'
minItems: 1
oldPduSessionId:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PduSessionId\'
pduSessionsActivateList:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PduSessionId\'
minItems: 1
ueEpsPdnConnection:
\$ref: \'#/components/schemas/EpsPdnCnxContainer\'
hoState:
\$ref: \'#/components/schemas/HoState\'
pcfId:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/NfInstanceId\'
nrfUri:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uri\'
supportedFeatures:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures\'
selMode:
\$ref: \'#/components/schemas/DnnSelectionMode\'
backupAmfInfo:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/BackupAmfInfo\'
minItems: 1
traceData:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/TraceData\'
udmGroupId:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/NfGroupId\'
routingIndicator:
type: string
epsInterworkingInd:
\$ref: \'#/components/schemas/EpsInterworkingIndication\'
indirectForwardingFlag:
type: boolean
targetId:
\$ref: \'TS29518_Namf_Communication.yaml#/components/schemas/NgRanTargetId\'
epsBearerCtxStatus:
\$ref: \'#/components/schemas/EpsBearerContextStatus\'
required:
\- servingNfId
\- servingNetwork
\- anType
\- smContextStatusUri
SmContextCreatedData:
type: object
properties:
hSmfUri:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uri\'
pduSessionId:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PduSessionId\'
sNssai:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Snssai\'
upCnxState:
\$ref: \'#/components/schemas/UpCnxState\'
n2SmInfo:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/RefToBinaryData\'
n2SmInfoType:
\$ref: \'#/components/schemas/N2SmInfoType\'
allocatedEbiList:
type: array
items:
\$ref: \'#/components/schemas/EbiArpMapping\'
minItems: 1
hoState:
\$ref: \'#/components/schemas/HoState\'
gpsi:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Gpsi\'
smfServiceInstanceId:
type: string
recoveryTime:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DateTime\'
supportedFeatures:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures\'
SmContextUpdateData:
type: object
properties:
pei:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Pei\'
servingNfId:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/NfInstanceId\'
guami:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Guami\'
servingNetwork:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PlmnId\'
backupAmfInfo:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/BackupAmfInfo\'
minItems: 1
nullable: true
anType:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/AccessType\'
ratType:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/RatType\'
presenceInLadn:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PresenceState\'
ueLocation:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/UserLocation\'
ueTimeZone:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/TimeZone\'
addUeLocation:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/UserLocation\'
upCnxState:
\$ref: \'#/components/schemas/UpCnxState\'
hoState:
\$ref: \'#/components/schemas/HoState\'
toBeSwitched:
type: boolean
default: false
failedToBeSwitched:
type: boolean
n1SmMsg:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/RefToBinaryData\'
n2SmInfo:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/RefToBinaryData\'
n2SmInfoType:
\$ref: \'#/components/schemas/N2SmInfoType\'
targetId:
\$ref: \'TS29518_Namf_Communication.yaml#/components/schemas/NgRanTargetId\'
targetServingNfId:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/NfInstanceId\'
smContextStatusUri:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uri\'
dataForwarding:
type: boolean
default: false
epsBearerSetup:
type: array
items:
\$ref: \'#/components/schemas/EpsBearerContainer\'
minItems: 0
revokeEbiList:
type: array
items:
\$ref: \'#/components/schemas/EpsBearerId\'
minItems: 1
release:
type: boolean
default: false
cause:
\$ref: \'#/components/schemas/Cause\'
ngApCause:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/NgApCause\'
5gMmCauseValue:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/5GMmCause\'
sNssai:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Snssai\'
traceData:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/TraceData\'
epsInterworkingInd:
\$ref: \'#/components/schemas/EpsInterworkingIndication\'
anTypeCanBeChanged:
type: boolean
default: false
n2SmInfoExt1:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/RefToBinaryData\'
n2SmInfoTypeExt1:
\$ref: \'#/components/schemas/N2SmInfoType\'
SmContextUpdatedData:
type: object
properties:
upCnxState:
\$ref: \'#/components/schemas/UpCnxState\'
hoState:
\$ref: \'#/components/schemas/HoState\'
releaseEbiList:
type: array
items:
\$ref: \'#/components/schemas/EpsBearerId\'
minItems: 1
allocatedEbiList:
type: array
items:
\$ref: \'#/components/schemas/EbiArpMapping\'
minItems: 1
modifiedEbiList:
type: array
items:
\$ref: \'#/components/schemas/EbiArpMapping\'
minItems: 1
n1SmMsg:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/RefToBinaryData\'
n2SmInfo:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/RefToBinaryData\'
n2SmInfoType:
\$ref: \'#/components/schemas/N2SmInfoType\'
epsBearerSetup:
type: array
items:
\$ref: \'#/components/schemas/EpsBearerContainer\'
minItems: 1
dataForwarding:
type: boolean
cause:
\$ref: \'#/components/schemas/Cause\'
SmContextReleaseData:
type: object
properties:
cause:
\$ref: \'#/components/schemas/Cause\'
ngApCause:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/NgApCause\'
5gMmCauseValue:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/5GMmCause\'
ueLocation:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/UserLocation\'
ueTimeZone:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/TimeZone\'
addUeLocation:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/UserLocation\'
vsmfReleaseOnly:
type: boolean
default: false
n2SmInfo:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/RefToBinaryData\'
n2SmInfoType:
\$ref: \'#/components/schemas/N2SmInfoType\'
SmContextStatusNotification:
type: object
properties:
statusInfo :
\$ref: \'#/components/schemas/StatusInfo\'
required:
\- statusInfo
PduSessionCreateData:
type: object
properties:
supi:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Supi\'
unauthenticatedSupi:
type: boolean
default: false
pei:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Pei\'
pduSessionId:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PduSessionId\'
dnn:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Dnn\'
sNssai:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Snssai\'
vsmfId:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/NfInstanceId\'
servingNetwork:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PlmnId\'
requestType:
\$ref: \'#/components/schemas/RequestType\'
epsBearerId:
type: array
items:
\$ref: \'#/components/schemas/EpsBearerId\'
minItems: 1
pgwS8cFteid:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Bytes\'
vsmfPduSessionUri:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uri\'
vcnTunnelInfo:
\$ref: \'#/components/schemas/TunnelInfo\'
anType:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/AccessType\'
ratType:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/RatType\'
ueLocation:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/UserLocation\'
ueTimeZone:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/TimeZone\'
addUeLocation:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/UserLocation\'
gpsi:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Gpsi\'
n1SmInfoFromUe:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/RefToBinaryData\'
unknownN1SmInfo:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/RefToBinaryData\'
supportedFeatures:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures\'
hPcfId:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/NfInstanceId\'
hoPreparationIndication:
type: boolean
selMode:
\$ref: \'#/components/schemas/DnnSelectionMode\'
alwaysOnRequested:
type: boolean
default: false
udmGroupId:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/NfGroupId\'
routingIndicator:
type: string
epsInterworkingInd:
\$ref: \'#/components/schemas/EpsInterworkingIndication\'
vSmfServiceInstanceId:
type: string
recoveryTime:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DateTime\'
roamingChargingProfile:
\$ref:
\'TS32291_Nchf_ConvergedCharging.yaml#/components/schemas/RoamingChargingProfile\'
chargingId:
type: string
oldPduSessionId:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PduSessionId\'
epsBearerCtxStatus:
\$ref: \'#/components/schemas/EpsBearerContextStatus\'
amfNfId:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/NfInstanceId\'
guami:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Guami\'
maxIntegrityProtectedDataRateUl:
\$ref: \'#/components/schemas/MaxIntegrityProtectedDataRate\'
maxIntegrityProtectedDataRateDl:
\$ref: \'#/components/schemas/MaxIntegrityProtectedDataRate\'
required:
\- dnn
\- vsmfId
\- servingNetwork
\- vsmfPduSessionUri
\- vcnTunnelInfo
\- anType
PduSessionCreatedData:
type: object
properties:
pduSessionType:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PduSessionType\'
sscMode:
type: string
pattern: \'\^[0-7]\$\'
hcnTunnelInfo:
\$ref: \'#/components/schemas/TunnelInfo\'
sessionAmbr:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ambr\'
qosFlowsSetupList:
type: array
items:
\$ref: \'#/components/schemas/QosFlowSetupItem\'
minItems: 1
hSmfInstanceId:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/NfInstanceId\'
pduSessionId:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PduSessionId\'
sNssai:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Snssai\'
enablePauseCharging:
type: boolean
default: false
ueIpv4Address:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv4Addr\'
ueIpv6Prefix:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv6Prefix\'
n1SmInfoToUe:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/RefToBinaryData\'
epsPdnCnxInfo:
\$ref: \'#/components/schemas/EpsPdnCnxInfo\'
epsBearerInfo:
type: array
items:
\$ref: \'#/components/schemas/EpsBearerInfo\'
minItems: 1
supportedFeatures:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures\'
maxIntegrityProtectedDataRate:
\$ref: \'#/components/schemas/MaxIntegrityProtectedDataRate\'
maxIntegrityProtectedDataRateDl:
\$ref: \'#/components/schemas/MaxIntegrityProtectedDataRate\'
alwaysOnGranted:
type: boolean
default: false
gpsi:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Gpsi\'
upSecurity:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/UpSecurity\'
roamingChargingProfile:
\$ref:
\'TS32291_Nchf_ConvergedCharging.yaml#/components/schemas/RoamingChargingProfile\'
hSmfServiceInstanceId:
type: string
recoveryTime:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DateTime\'
ueIpv6InterfaceId:
type: string
pattern: \'\^[A-Fa-f0-9]{16}\$\'
required:
\- pduSessionType
\- sscMode
\- hcnTunnelInfo
\- sessionAmbr
\- qosFlowsSetupList
\- hSmfInstanceId
HsmfUpdateData:
type: object
properties:
requestIndication:
\$ref: \'#/components/schemas/RequestIndication\'
pei:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Pei\'
vcnTunnelInfo:
\$ref: \'#/components/schemas/TunnelInfo\'
servingNetwork:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PlmnId\'
anType:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/AccessType\'
ratType:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/RatType\'
ueLocation:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/UserLocation\'
ueTimeZone:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/TimeZone\'
addUeLocation:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/UserLocation\'
pauseCharging:
type: boolean
pti:
\$ref: \'#/components/schemas/ProcedureTransactionId\'
n1SmInfoFromUe:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/RefToBinaryData\'
unknownN1SmInfo:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/RefToBinaryData\'
qosFlowsRelNotifyList:
type: array
items:
\$ref: \'#/components/schemas/QosFlowItem\'
minItems: 1
qosFlowsNotifyList:
type: array
items:
\$ref: \'#/components/schemas/QosFlowNotifyItem\'
minItems: 1
NotifyList:
type: array
items:
\$ref: \'#/components/schemas/PduSessionNotifyItem\'
minItems: 1
epsBearerId:
type: array
items:
\$ref: \'#/components/schemas/EpsBearerId\'
minItems: 0
hoPreparationIndication:
type: boolean
revokeEbiList:
type: array
items:
\$ref: \'#/components/schemas/EpsBearerId\'
minItems: 1
cause:
\$ref: \'#/components/schemas/Cause\'
ngApCause:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/NgApCause\'
5gMmCauseValue:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/5GMmCause\'
alwaysOnRequested:
type: boolean
default: false
epsInterworkingInd:
\$ref: \'#/components/schemas/EpsInterworkingIndication\'
secondaryRatUsageReport:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SecondaryRatUsageReport\'
minItems: 1
secondaryRatUsageInfo:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SecondaryRatUsageInfo\'
minItems: 1
anTypeCanBeChanged:
type: boolean
default: false
required:
\- requestIndication
HsmfUpdatedData:
type: object
properties:
n1SmInfoToUe:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/RefToBinaryData\'
qosFlowsSetupList:
type: array
items:
\$ref: \'#/components/schemas/QosFlowSetupItem\'
minItems: 1
sessionAmbr:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ambr\'
epsPdnCnxInfo:
\$ref: \'#/components/schemas/EpsPdnCnxInfo\'
epsBearerInfo:
type: array
items:
\$ref: \'#/components/schemas/EpsBearerInfo\'
minItems: 1
pti:
\$ref: \'#/components/schemas/ProcedureTransactionId\'
upSecurity:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/UpSecurity\'
maxIntegrityProtectedDataRateUl:
\$ref: \'#/components/schemas/MaxIntegrityProtectedDataRate\'
maxIntegrityProtectedDataRateDl:
\$ref: \'#/components/schemas/MaxIntegrityProtectedDataRate\'
ReleaseData:
type: object
properties:
cause:
\$ref: \'#/components/schemas/Cause\'
ngApCause:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/NgApCause\'
5gMmCauseValue:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/5GMmCause\'
ueLocation:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/UserLocation\'
ueTimeZone:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/TimeZone\'
addUeLocation:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/UserLocation\'
secondaryRatUsageReport:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SecondaryRatUsageReport\'
minItems: 1
secondaryRatUsageInfo:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SecondaryRatUsageInfo\'
minItems: 1
VsmfUpdateData:
type: object
properties:
requestIndication:
\$ref: \'#/components/schemas/RequestIndication\'
sessionAmbr:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ambr\'
qosFlowsAddModRequestList:
type: array
items:
\$ref: \'#/components/schemas/QosFlowAddModifyRequestItem\'
minItems: 1
qosFlowsRelRequestList:
type: array
items:
\$ref: \'#/components/schemas/QosFlowReleaseRequestItem\'
minItems: 1
epsBearerInfo:
type: array
items:
\$ref: \'#/components/schemas/EpsBearerInfo\'
minItems: 1
assignEbiList:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Arp\'
minItems: 1
revokeEbiList:
type: array
items:
\$ref: \'#/components/schemas/EpsBearerId\'
minItems: 1
modifiedEbiList:
type: array
items:
\$ref: \'#/components/schemas/EbiArpMapping\'
minItems: 1
pti:
\$ref: \'#/components/schemas/ProcedureTransactionId\'
n1SmInfoToUe:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/RefToBinaryData\'
alwaysOnGranted:
type: boolean
default: false
hsmfPduSessionUri:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uri\'
supportedFeatures:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures\'
cause:
\$ref: \'#/components/schemas/Cause\'
n1smCause:
type: string
backOffTimer:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DurationSec\'
required:
\- requestIndication
VsmfUpdatedData:
type: object
properties:
qosFlowsAddModList:
type: array
items:
\$ref: \'#/components/schemas/QosFlowItem\'
minItems: 1
qosFlowsRelList:
type: array
items:
\$ref: \'#/components/schemas/QosFlowItem\'
minItems: 1
qosFlowsFailedtoAddModList:
type: array
items:
\$ref: \'#/components/schemas/QosFlowItem\'
minItems: 1
qosFlowsFailedtoRelList:
type: array
items:
\$ref: \'#/components/schemas/QosFlowItem\'
minItems: 1
n1SmInfoFromUe:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/RefToBinaryData\'
unknownN1SmInfo:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/RefToBinaryData\'
ueLocation:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/UserLocation\'
ueTimeZone:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/TimeZone\'
addUeLocation:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/UserLocation\'
assignedEbiList:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Arp\'
minItems: 1
failedToAssignEbiList:
type: array
items:
\$ref: \'#/components/schemas/EpsBearerId\'
minItems: 1
releasedEbiList:
type: array
items:
\$ref: \'#/components/schemas/EpsBearerId\'
minItems: 1
secondaryRatUsageReport:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SecondaryRatUsageReport\'
minItems: 1
secondaryRatUsageInfo:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SecondaryRatUsageInfo\'
minItems: 1
StatusNotification:
type: object
properties:
statusInfo :
\$ref: \'#/components/schemas/StatusInfo\'
required:
\- statusInfo
QosFlowItem:
type: object
properties:
qfi:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Qfi\'
cause:
\$ref: \'#/components/schemas/Cause\'
required:
\- qfi
QosFlowSetupItem:
type: object
properties:
qfi:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Qfi\'
qosRules:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Bytes\'
ebi:
\$ref: \'#/components/schemas/EpsBearerId\'
qosFlowDescription:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Bytes\'
qosFlowProfile:
\$ref: \'#/components/schemas/QosFlowProfile\'
required:
\- qfi
\- qosRules
QosFlowAddModifyRequestItem:
type: object
properties:
qfi:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Qfi\'
ebi:
\$ref: \'#/components/schemas/EpsBearerId\'
qosRules:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Bytes\'
qosFlowDescription:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Bytes\'
qosFlowProfile:
\$ref: \'#/components/schemas/QosFlowProfile\'
required:
\- qfi
QosFlowReleaseRequestItem:
type: object
properties:
qfi:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Qfi\'
qosRules:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Bytes\'
qosFlowDescription:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Bytes\'
required:
\- qfi
QosFlowProfile:
type: object
properties:
5qi:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/5Qi\'
nonDynamic5Qi:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/NonDynamic5Qi\'
dynamic5Qi:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Dynamic5Qi\'
arp:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Arp\'
gbrQosFlowInfo:
\$ref: \'#/components/schemas/GbrQosFlowInformation\'
rqa:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/ReflectiveQoSAttribute\'
additionalQosFlowInfo:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/AdditionalQosFlowInfo\'
required:
\- 5qi
GbrQosFlowInformation:
type: object
properties:
maxFbrDl:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/BitRate\'
maxFbrUl:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/BitRate\'
guaFbrDl:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/BitRate\'
guaFbrUl:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/BitRate\'
notifControl:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/NotificationControl\'
maxPacketLossRateDl:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PacketLossRate\'
maxPacketLossRateUl:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PacketLossRate\'
required:
\- maxFbrDl
\- maxFbrUl
\- guaFbrDl
\- guaFbrUl
QosFlowNotifyItem:
type: object
properties:
qfi:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Qfi\'
notificationCause:
\$ref: \'#/components/schemas/NotificationCause\'
required:
\- qfi
\- notificationCause
SmContextRetrieveData:
type: object
properties:
targetMmeCap:
\$ref: \'#/components/schemas/MmeCapabilities\'
SmContextRetrievedData:
type: object
properties:
ueEpsPdnConnection:
\$ref: \'#/components/schemas/EpsPdnCnxContainer\'
required:
\- ueEpsPdnConnection
MmeCapabilities:
type: object
properties:
nonIpSupported:
type: boolean
default: false
TunnelInfo:
type: object
properties:
ipv4Addr:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv4Addr\'
ipv6Addr:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv6Addr\'
gtpTeid:
\$ref: \'#/components/schemas/Teid\'
required:
\- gtpTeid
StatusInfo:
type: object
properties:
resourceStatus:
\$ref: \'#/components/schemas/ResourceStatus\'
cause:
\$ref: \'#/components/schemas/Cause\'
required:
\- resourceStatus
EpsPdnCnxInfo:
type: object
properties:
pgwS8cFteid:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Bytes\'
pgwNodeName:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Bytes\'
linkedBearerId:
\$ref: \'#/components/schemas/EpsBearerId\'
required:
\- pgwS8cFteid
EpsBearerInfo:
type: object
properties:
ebi:
\$ref: \'#/components/schemas/EpsBearerId\'
pgwS8uFteid:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Bytes\'
bearerLevelQoS:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Bytes\'
required:
\- ebi
\- pgwS8uFteid
\- bearerLevelQoS
PduSessionNotifyItem:
type: object
properties:
notificationCause:
\$ref: \'#/components/schemas/NotificationCause\'
required:
\- notificationCause
EbiArpMapping:
type: object
properties:
epsBearerId:
\$ref: \'#/components/schemas/EpsBearerId\'
arp:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Arp\'
required:
\- epsBearerId
\- arp
SmContextCreateError:
type: object
properties:
error:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/ProblemDetails\'
n1SmMsg:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/RefToBinaryData\'
recoveryTime:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DateTime\'
required:
\- error
SmContextUpdateError:
type: object
properties:
error:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/ProblemDetails\'
n1SmMsg:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/RefToBinaryData\'
n2SmInfo:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/RefToBinaryData\'
n2SmInfoType:
\$ref: \'#/components/schemas/N2SmInfoType\'
upCnxState:
\$ref: \'#/components/schemas/UpCnxState\'
recoveryTime:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DateTime\'
required:
\- error
PduSessionCreateError:
type: object
properties:
error:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/ProblemDetails\'
n1smCause:
type: string
pattern: \'\^[A-F0-9]{2}\$\'
n1SmInfoToUe:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/RefToBinaryData\'
backOffTimer:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DurationSec\'
recoveryTime:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DateTime\'
required:
\- error
HsmfUpdateError:
type: object
properties:
error:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/ProblemDetails\'
pti:
\$ref: \'#/components/schemas/ProcedureTransactionId\'
n1smCause:
type: string
pattern: \'\^[A-F0-9]{2}\$\'
n1SmInfoToUe:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/RefToBinaryData\'
backOffTimer:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DurationSec\'
recoveryTime:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DateTime\'
required:
\- error
VsmfUpdateError:
type: object
properties:
error:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/ProblemDetails\'
pti:
\$ref: \'#/components/schemas/ProcedureTransactionId\'
n1smCause:
type: string
pattern: \'\^[A-F0-9]{2}\$\'
n1SmInfoFromUe:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/RefToBinaryData\'
unknownN1SmInfo:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/RefToBinaryData\'
failedToAssignEbiList:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Arp\'
minItems: 1
ngApCause:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/NgApCause\'
5gMmCauseValue:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/5GMmCause\'
recoveryTime:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DateTime\'
required:
\- error
#
# SIMPLE DATA TYPES
#
ProcedureTransactionId:
type: integer
minimum: 0
maximum: 255
EpsBearerId:
type: integer
minimum: 0
maximum: 15
EpsPdnCnxContainer:
type: string
EpsBearerContainer:
type: string
Teid:
type: string
pattern: \'\^[A-Fa-f0-9]{8}\$\'
EpsBearerContextStatus:
type: string
pattern: \'\^[A-Fa-f0-9]{4}\$\'
#
# ENUMERATIONS
#
UpCnxState:
anyOf:
\- type: string
enum:
\- ACTIVATED
\- DEACTIVATED
\- ACTIVATING
\- type: string
description: >
This string provides forward-compatibility with future
extensions to the enumeration but is not used to encode
content defined in the present version of this API.
description: >
Possible values are
\- ACTIVATED
\- DEACTIVATED
\- ACTIVATING
HoState:
anyOf:
\- type: string
enum:
\- NONE
\- PREPARING
\- PREPARED
\- COMPLETED
\- CANCELLED
\- type: string
description: >
This string provides forward-compatibility with future
extensions to the enumeration but is not used to encode
content defined in the present version of this API.
description: >
Possible values are
\- NONE
\- PREPARING
\- PREPARED
\- COMPLETED
\- CANCELLED
RequestType:
anyOf:
\- type: string
enum:
\- INITIAL_REQUEST
\- EXISTING_PDU_SESSION
\- INITIAL_EMERGENCY_REQUEST
\- EXISTING_EMERGENCY_PDU_SESSION
\- type: string
description: >
This string provides forward-compatibility with future
extensions to the enumeration but is not used to encode
content defined in the present version of this API.
description: >
Possible values are
\- INITIAL_REQUEST
\- EXISTING_PDU_SESSION
\- INITIAL_EMERGENCY_REQUEST
\- EXISTING_EMERGENCY_PDU_SESSION
RequestIndication:
anyOf:
\- type: string
enum:
\- UE_REQ_PDU_SES_MOD
\- UE_REQ_PDU_SES_REL
\- PDU_SES_MOB
\- NW_REQ_PDU_SES_AUTH
\- NW_REQ_PDU_SES_MOD
\- NW_REQ_PDU_SES_REL
\- EBI_ASSIGNMENT_REQ
\- type: string
description: >
This string provides forward-compatibility with future
extensions to the enumeration but is not used to encode
content defined in the present version of this API.
description: >
Possible values are
\- UE_REQ_PDU_SES_MOD
\- UE_REQ_PDU_SES_REL
\- PDU_SES_MOB
\- NW_REQ_PDU_SES_AUTH
\- NW_REQ_PDU_SES_MOD
\- NW_REQ_PDU_SES_REL
\- EBI_ASSIGNMENT_REQ
NotificationCause:
anyOf:
\- type: string
enum:
\- QOS_FULFILLED
\- QOS_NOT_FULFILLED
\- UP_SEC_FULFILLED
\- UP_SEC_NOT_FULFILLED
\- type: string
description: >
This string provides forward-compatibility with future
extensions to the enumeration but is not used to encode
content defined in the present version of this API.
description: >
Possible values are
\- QOS_FULFILLED
\- QOS_NOT_FULFILLED
\- UP_SEC_FULFILLED
\- UP_SEC_NOT_FULFILLED
Cause:
anyOf:
\- type: string
enum:
\- REL_DUE_TO_HO
\- EPS_FALLBACK
\- REL_DUE_TO_UP_SEC
\- DNN_CONGESTION
\- S_NSSAI_CONGESTION
\- REL_DUE_TO_REACTIVATION
\- 5G_AN_NOT_RESPONDING
\- REL_DUE_TO_SLICE_NOT_AVAILABLE
\- REL_DUE_TO_DUPLICATE_SESSION_ID
\- PDU_SESSION_STATUS_MISMATCH
\- HO_FAILURE
\- INSUFFICIENT_UP_RESOURCES
\- PDU_SESSION_HANDED_OVER
\- type: string
description: >
This string provides forward-compatibility with future
extensions to the enumeration but is not used to encode
content defined in the present version of this API.
description: >
Possible values are
\- REL_DUE_TO_HO
\- EPS_FALLBACK
\- REL_DUE_TO_UP_SEC
\- DNN_CONGESTION
\- S_NSSAI_CONGESTION
\- REL_DUE_TO_REACTIVATION
\- 5G_AN_NOT_RESPONDING
\- REL_DUE_TO_SLICE_NOT_AVAILABLE
\- REL_DUE_TO_DUPLICATE_SESSION_ID
\- PDU_SESSION_STATUS_MISMATCH
\- HO_FAILURE
\- INSUFFICIENT_UP_RESOURCES
\- PDU_SESSION_HANDED_OVER
ResourceStatus:
anyOf:
\- type: string
enum:
\- RELEASED
\- type: string
description: >
This string provides forward-compatibility with future
extensions to the enumeration but is not used to encode
content defined in the present version of this API.
description: >
Possible values are
\- RELEASED
DnnSelectionMode:
anyOf:
\- type: string
enum:
\- VERIFIED
\- UE_DNN_NOT_VERIFIED
\- NW_DNN_NOT_VERIFIED
\- type: string
description: >
This string provides forward-compatibility with future
extensions to the enumeration but is not used to encode
content defined in the present version of this API.
description: >
Possible values are
\- VERIFIED
\- UE_DNN_NOT_VERIFIED
\- NW_DNN_NOT_VERIFIED
EpsInterworkingIndication:
anyOf:
\- type: string
enum:
\- NONE
\- WITH_N26
\- WITHOUT_N26
\- type: string
description: >
This string provides forward-compatibility with future
extensions to the enumeration but is not used to encode
content defined in the present version of this API.
description: >
Possible values are
\- NONE
\- WITH_N26
\- WITHOUT_N26
N2SmInfoType:
anyOf:
\- type: string
enum:
\- PDU_RES_SETUP_REQ
\- PDU_RES_SETUP_RSP
\- PDU_RES_SETUP_FAIL
\- PDU_RES_REL_CMD
\- PDU_RES_REL_RSP
\- PDU_RES_MOD_REQ
\- PDU_RES_MOD_RSP
\- PDU_RES_MOD_FAIL
\- PDU_RES_NTY
\- PDU_RES_NTY_REL
\- PDU_RES_MOD_IND
\- PDU_RES_MOD_CFM
\- PATH_SWITCH_REQ
\- PATH_SWITCH_SETUP_FAIL
\- PATH_SWITCH_REQ_ACK
\- PATH_SWITCH_REQ_FAIL
\- HANDOVER_REQUIRED
\- HANDOVER_CMD
\- HANDOVER_PREP_FAIL
\- HANDOVER_REQ_ACK
\- HANDOVER_RES_ALLOC_FAIL
\- SECONDARY_RAT_USAGE
\- type: string
description: >
This string provides forward-compatibility with future
extensions to the enumeration but is not used to encode
content defined in the present version of this API.
description: >
Possible values are
\- PDU_RES_SETUP_REQ
\- PDU_RES_SETUP_RSP
\- PDU_RES_SETUP_FAIL
\- PDU_RES_REL_CMD
\- PDU_RES_REL_RSP
\- PDU_RES_MOD_REQ
\- PDU_RES_MOD_RSP
\- PDU_RES_MOD_FAIL
\- PDU_RES_NTY
\- PDU_RES_NTY_REL
\- PDU_RES_MOD_IND
\- PDU_RES_MOD_CFM
\- PATH_SWITCH_REQ
\- PATH_SWITCH_SETUP_FAIL
\- PATH_SWITCH_REQ_ACK
\- PATH_SWITCH_REQ_FAIL
\- HANDOVER_REQUIRED
\- HANDOVER_CMD
\- HANDOVER_PREP_FAIL
\- HANDOVER_REQ_ACK
\- HANDOVER_RES_ALLOC_FAIL
\- SECONDARY_RAT_USAGE
MaxIntegrityProtectedDataRate:
anyOf:
\- type: string
enum:
\- 64_KBPS
\- MAX_UE_RATE
\- type: string
description: >
This string provides forward-compatibility with future
extensions to the enumeration but is not used to encode
content defined in the present version of this API.
description: >
Possible values are
\- 64_KBPS
\- MAX_UE_RATE
#
# HTTP responses
#
responses:
\'PduSessionCreateError\':
description: unsuccessful creation of a PDU session
content:
application/json: # message without binary body part
schema:
\$ref: \'#/components/schemas/PduSessionCreateError\'
multipart/related: # message with binary body part(s)
schema:
type: object
properties: # Request parts
jsonData:
\$ref: \'#/components/schemas/PduSessionCreateError\'
binaryDataN1SmInfoToUe:
type: string
format: binary
encoding:
jsonData:
contentType: application/json
binaryDataN1SmInfoToUe:
contentType: application/vnd.3gpp.5gnas
headers:
Content-Id:
schema:
type: string
\'HsmfUpdateError\':
description: unsuccessful update of a PDU session
content:
application/json: # message without binary body part
schema:
\$ref: \'#/components/schemas/HsmfUpdateError\'
multipart/related: # message with binary body part(s)
schema:
type: object
properties: # Request parts
jsonData:
\$ref: \'#/components/schemas/HsmfUpdateError\'
binaryDataN1SmInfoToUe:
type: string
format: binary
encoding:
jsonData:
contentType: application/json
binaryDataN1SmInfoToUe:
contentType: application/vnd.3gpp.5gnas
headers:
Content-Id:
schema:
type: string
\'VsmfUpdateError\':
description: unsuccessful update of a PDU session
content:
application/json: # message without binary body part
schema:
\$ref: \'#/components/schemas/VsmfUpdateError\'
multipart/related: # message with binary body part(s)
schema:
type: object
properties: # Request parts
jsonData:
\$ref: \'#/components/schemas/VsmfUpdateError\'
binaryDataN1SmInfoFromUe:
type: string
format: binary
binaryDataUnknownN1SmInfo:
type: string
format: binary
encoding:
jsonData:
contentType: application/json
binaryDataN1SmInfoFromUe:
contentType: application/vnd.3gpp.5gnas
headers:
Content-Id:
schema:
type: string
binaryDataUnknownN1SmInfo:
contentType: application/vnd.3gpp.5gnas
headers:
Content-Id:
schema:
type: string
###### ## Annex B (Informative): HTTP Multipart Messages
## B.1 Example of HTTP multipart message
### B.1.1 General
This clause provides a (partial) example of HTTP multipart message. The
example does not aim to be a complete representation of the HTTP message, e.g.
additional information or headers can be included.
This Annex is informative and the normative descriptions in this specification
prevail over the description in this Annex if there is any difference.
### B.1.2 Example HTTP multipart message with N1 SM Message binary data
POST /example.com/nsmf-pdusession/v1/sm-contexts HTTP/2
Content-Type: multipart/related; boundary=----Boundary
Content-Length: xyz
\------Boundary
Content-Type: application/json
{
\"supi\": \"imsi-\\",
\"pduSessionId\": 235,
\"dnn\": \"\\",
\"sNssai\": {
\"sst\": 0
},
\"servingNfId\": \"\\",
\"n1SmMsg\": {
\"contentId\": \"n1msg\"
},
\"anType\": \"3GPP_ACCESS\",
\"smContextStatusUri\": \"\\"
}
\------Boundary
Content-Type: application/vnd.3gpp.5gnas
Content-Id: n1msg
{ ... N1 SM Message binary data ...}
\------Boundary
#