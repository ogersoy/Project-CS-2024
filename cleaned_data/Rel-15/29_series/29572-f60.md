# Foreword
This Technical Specification has been produced by the 3^rd^ Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document specifies the stage 3 protocol and data model for the
Nlmf Service Based Interface. It provides stage 3 protocol definitions and
message flows, and specifies the API for each service offered by the LMF.
The 5G System stage 2 architecture and procedures are specified in 3GPP TS
23.501 [2] and 3GPP TS 23.502 [3].
The Technical Realization of the Service Based Architecture and the Principles
and Guidelines for Services Definition are specified in 3GPP TS 29.500 [4] and
3GPP TS 29.501 [5].
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or non‑specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 23.501: \"System Architecture for the 5G System; Stage 2\".
[3] 3GPP TS 23.502: \"Procedures for the 5G System; Stage 2\".
[4] 3GPP TS 29.500: \"5G System; Technical Realization of Service Based
Architecture; Stage 3\".
[5] 3GPP TS 29.501: \"5G System; Principles and Guidelines for Services
Definition; Stage 3\".
[6] IETF RFC 4776: \"Dynamic Host Configuration Protocol (DHCPv4 and DHCPv6)
Option for Civic Addresses Configuration Information\".
[7] IETF RFC 5139: \"Revised Civic Location Format for Presence Information
Data Format Location Object (PIDF-LO)\".
[8] 3GPP TS 29.571: \"5G System; Common Data Types for Service Based
Interfaces; Stage 3\".
[9] 3GPP TS 33.501: \"Security architecture and procedures for 5G system\".
[10] IETF RFC 6749: \"The OAuth 2.0 Authorization Framework\".
[11] 3GPP TS 29.510: \"Network Function Repository Services; Stage 3\".
[12] IETF RFC 7540: \"Hypertext Transfer Protocol Version 2 (HTTP/2)\".[13]
IETF RFC 8259: \"The JavaScript Object Notation (JSON) Data Interchange
Format\".
[14] OpenAPI Initiative, \"OpenAPI 3.0.0 Specification\",
https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.0.md.
[15] IETF RFC 7807: \"Problem Details for HTTP APIs\".
[16] 3GPP TR 21.900: \"Technical Specification Group working methods\".
# 3 Definitions and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
3GPP TR 21.905 [1] and the following apply. A term defined in the present
document takes precedence over the definition of the same term, if any, in
3GPP TR 21.905 [1].
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in 3GPP TR
21.905 [1] and the following apply. An abbreviation defined in the present
document takes precedence over the definition of the same abbreviation, if
any, in 3GPP TR 21.905 [1].
LMF Location Management Function
# 4 Overview
The Location Management Function (LMF) is the network entity in the 5G Core
Network (5GC) supporting the following functionality:
\- Supports location determination for a UE.
\- Obtains downlink location measurements or a location estimate from the UE.
\- Obtains uplink location measurements from the NG RAN.
\- Obtains non-UE associated assistance data from the NG RAN.
Figure 4-1 provides the reference model (in service based interface
representation and in reference point representation), with focus on the LMF:
Figure 4-1: Reference model -- LMF
# 5 Services Offered by the LMF
## 5.1 Introduction
The LMF offers to other NFs the following services:
\- Nlmf_Location
## 5.2 Nlmf_Location Service
### 5.2.1 Service Description
The Nlmf_Location service enables an NF to request location determination
(current geodetic and optionally civic location) for a target UE.
### 5.2.2 Service Operations
#### 5.2.2.1 Introduction
The service operations defined for the Nlmf_Location service are as follows:
\- DetermineLocation: It provides UE location information to the consumer NF.
#### 5.2.2.2 DetermineLocation
##### 5.2.2.2.1 General
The following procedures are defined, using the \"DetermineLocation\" service
operation:
\- Retrieve UE Location
##### 5.2.2.2.2 Retrieve UE Location
This procedure allows a consumer NF to request the location information
(geodetic location and, optionally, civic location).
Figure 5.2.2.2.2-1: DetermineLocation Request
1\. The NF Service Consumer shall send an HTTP POST request to the resource
URI associated with the \"determine-location\" custom operation. The input
parameters for the request (external client type, LCS correlation identifier,
serving cell identifier, location QoS, supported GAD shapes....) shall be
included in the HTTP POST request body.
If UE LCS Capability is received in the request indicating LPP is not
supported by the UE, the LMF shall not send LPP messages to the UE in
subsequent positioning procedures.
2a. On success, \"200 OK\" shall be returned. The response body shall contain
the parameters related to the determined position of the UE (geodetic
position, civic location, positioning methods...).
2b. On failure, one of the HTTP status code listed in Table 6.1.4.2.2-2 shall
be returned. For a 4xx/5xx response, the message body shall contain a
ProblemDetails structure with the \"cause\" attribute set to one of the
application error listed in Table 6.1.4.2.2-2.
# 6 API Definitions
## 6.1 Nlmf_Location Service API
### 6.1.1 API URI
The Nlmf_Location service shall use the Nlmf_Location API.
The request URI used in HTTP request from the NF service consumer towards the
NF service producer shall have the structure defined in clause 4.4.1 of 3GPP
TS 29.501 [5], i.e.:
**{apiRoot}/\ /\/\**
with the following components:
\- The {apiRoot} shall be set as described in 3GPP TS 29.501 [5].
\- The \ shall be \"nlmf-loc\".
\- The \ shall be \"v1\".
\- The \ shall be set as described in clause
6.1.3.
### 6.1.2 Usage of HTTP
#### 6.1.2.1 General
HTTP/2, as defined in IETF RFC 7540 [12], shall be used as specified in clause
5 of 3GPP TS 29.500 [4].
HTTP/2 shall be transported as specified in clause 5.3 of 3GPP TS 29.500 [4].
HTTP messages and bodies for the Nlmf_Location service shall comply with the
OpenAPI [14] specification contained in Annex A.
#### 6.1.2.2 HTTP Standard Headers
##### 6.1.2.2.1 General
##### 6.1.2.2.2 Content type
The following content types shall be supported:
\- JSON, as defined in IETF RFC 8259 [13], shall be used as content type of
the HTTP bodies specified in the present specification as indicated in clause
5.4 of 3GPP TS 29.500 [4].
\- The Problem Details JSON Object (IETF RFC 7807 [15]). The use of the
Problem Details JSON object in a HTTP response body shall be signalled by the
content type \"application/problem+json\".
#### 6.1.2.3 HTTP custom headers
##### 6.1.2.3.1 General
The following HTTP custom headers shall be supported:
\- 3gpp-Sbi-Message-Priority: See 3GPP TS 29.500 [4], clause 5.2.3.2.2.
This API does not define any new HTTP custom headers.
### 6.1.3 Resources
#### 6.1.3.1 Overview
The structure of the Resource URIs of the Nlmf_Location service is shown in
figure 6.1.3.1-1.
Figure 6.1.3.1-1: Resource URI structure of the Nlmf_Location API
Table 6.1.3.1-1 provides an overview of the resources and applicable HTTP
methods.
Table 6.1.3.1-1: Resources and methods overview
+-----------------+-----------------+-----------------+-------------+ | Resource name | Resource URI | HTTP method or | Description | | | | custom | | | | | operation | | +=================+=================+=================+=============+ | De | {apiRoo | det | | | termineLocation | t}/nlmf-loc/\/det | (POST) | | | (Custom | ermine-location | | | | operation) | | | | +-----------------+-----------------+-----------------+-------------+
### 6.1.4 Custom Operations without associated resources
#### 6.1.4.1 Overview
Table 6.1.4.1-1: Custom operations without associated resources
Custom operation URI Mapped HTTP method Description
* * *
{apiRoot}/nlmf-loc/\/determine-location POST
#### 6.1.4.2 Operation: determine-location
##### 6.1.4.2.1 Description
This sublause will describe the custom operation and what it is used for, and
the custom operation\'s URI.
##### 6.1.4.2.2 Operation Definition
This operation shall support the response data structures and response codes
specified in tables 6.1.4.2.2-1 and 6.1.4.2.2-2.
Table 6.1.4.2.2-1: Data structures supported by the POST Request Body on this
resource
* * *
Data type P Cardinality Description InputData M 1 Input parameters to the
\"Deterrmine Location\" operation
* * *
Table 6.1.4.2.2-2: Data structures supported by the POST Response Body on this
resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | LocationData | M | 1 | 200 OK | This case | | | | | | represents | | | | | | the | | | | | | successful | | | | | | retrieval of | | | | | | the location | | | | | | of the UE. | | | | | | | | | | | | Upon success, | | | | | | a response | | | | | | body is | | | | | | returned | | | | | | containing | | | | | | the different | | | | | | parameters of | | | | | | the location | | | | | | data, such | | | | | | as: | | | | | | | | | | | | > \- | | | | | | > Geographic | | | | | | > Area | | | | | | > | | | | | | > \- Civic | | | | | | > Location | | | | | | > | | | | | | > \- | | | | | | > Positioning | | | | | | > methods | +---------------+---+-------------+---------------+---------------+ | P | M | 1 | 403 Forbidden | The \"cause\" | | roblemDetails | | | | attribute | | | | | | shall be set | | | | | | to one of the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | > \- | | | | | | > POSITI | | | | | | ONING_DENIED | | | | | | > | | | | | | > \- | | | | | | > UNSPECIFIED | | | | | | | | | | | | See table | | | | | | 6.1.7.3-1 for | | | | | | the | | | | | | description | | | | | | of these | | | | | | errors. | +---------------+---+-------------+---------------+---------------+ | P | M | 1 | 500 Internal | The \"cause\" | | roblemDetails | | | Server Error | attribute | | | | | | shall be set | | | | | | to the | | | | | | following | | | | | | application | | | | | | error: | | | | | | | | | | | | > \- | | | | | | > POSITI | | | | | | ONING_FAILED | | | | | | | | | | | | See table | | | | | | 6.1.7.3-1 for | | | | | | the | | | | | | description | | | | | | of these | | | | | | errors. | +---------------+---+-------------+---------------+---------------+ | P | M | 1 | 504 Gateway | The \"cause\" | | roblemDetails | | | Timeout | attribute | | | | | | shall be set | | | | | | to the | | | | | | following | | | | | | application | | | | | | error: | | | | | | | | | | | | > \- | | | | | | > UNRE | | | | | | ACHABLE_USER | | | | | | | | | | | | See table | | | | | | 6.1.7.3-1 for | | | | | | the | | | | | | description | | | | | | of this | | | | | | error. | +---------------+---+-------------+---------------+---------------+
### 6.1.5 Notifications
There are no notifications defined for the Nlmf_Location service in this
release of the specification.
### 6.1.6 Data Model
#### 6.1.6.1 General
This clause specifies the application data model supported by the API.
Table 6.1.6.1-1 specifies the data types defined for the Nlmf service based
interface protocol.
Table 6.1.6.1-1: Nlmf specific Data Types
Data type Clause defined Description
* * *
InputData 6.1.6.2.2  
LocationData 6.1.6.2.3  
GeographicalCoordinates 6.1.6.2.4  
GeographicArea 6.1.6.2.5  
Point 6.1.6.2.6  
PointUncertaintyCircle 6.1.6.2.7  
PointUncertaintyEllipse 6.1.6.2.8  
Polygon 6.1.6.2.9  
PointAltitude 6.1.6.2.10  
PointAltitudeUncertainty 6.1.6.2.11  
EllipsoidArc 6.1.6.2.12  
LocationQoS 6.1.6.2.13  
CivicAddress 6.1.6.2.14  
PositioningMethodAndUsage 6.1.6.2.15  
GnssPositioningMethodAndUsage 6.1.6.2.16  
VelocityEstimate 6.1.6.2.17  
HorizontalVelocity 6.1.6.2.18  
HorizontalWithVerticalVelocity 6.1.6.2.19  
HorizontalVelocityWithUncertainty 6.1.6.2.20  
HorizontalWithVerticalVelocityAndUncertainty 6.1.6.2.21  
UncertaintyEllipse 6.1.6.2.22  
UeLcsCapability 6.1.6.2.23 Indicates the LCS capability supported by the UE.
Altitude 6.1.6.3.2  
Angle 6.1.6.3.2  
Uncertainty 6.1.6.3.2  
Orientation 6.1.6.3.2  
Confidence 6.1.6.3.2  
Accuracy 6.1.6.3.2  
InnerRadius 6.1.6.3.2  
CorrelationID 6.1.6.3.2  
AgeOfLocationEstimate 6.1.6.3.2  
HorizontalSpeed 6.1.6.3.2  
VerticalSpeed 6.1.6.3.2  
SpeedUncertainty 6.1.6.3.2  
BarometricPressure 6.1.6.3.2  
ExternalClientType 6.1.6.3.3  
SupportedGADShapes 6.1.6.3.4  
ResponseTime 6.1.6.3.5  
PositioningMethod 6.1.6.3.6  
GnssMethod 6.1.6.3.7  
GnssId 6.1.6.3.8  
Usage 6.1.6.3.9  
LcsPriority 6.1.6.3.10  
VelocityRequested 6.1.6.3.11  
AccuracyFulfilmentIndicator 6.1.6.3.12  
VerticalDirection 6.1.6.3.13
Table 6.1.6.1-2 specifies data types re-used by the Nlmf service based
interface protocol from other specifications, including a reference to their
respective specifications and when needed, a short description of their use
within the Nlmf service based interface.
Table 6.1.6.1-2: Nlmf re-used Data Types
Data type Reference Comments
* * *
Supi 3GPP TS 29.571 [8]  
Pei 3GPP TS 29.571 [8]  
Gpsi 3GPP TS 29.571 [8]  
Ecgi 3GPP TS 29.571 [8]  
Ncgi 3GPP TS 29.571 [8]  
NfInstanceId 3GPP TS 29.571 [8]
#### 6.1.6.2 Structured data types
##### 6.1.6.2.1 Introduction
This clause defines the structures to be used in resource representations.
##### 6.1.6.2.2 Type: InputData
Table 6.1.6.2.2-1: Definition of type InputData
+---------------+---------------+---+-------------+---------------+ | Attribute | Data type | P | Cardinality | Description | | name | | | | | +===============+===============+===+=============+===============+ | exter | Exter | O | 0..1 | | | nalClientType | nalClientType | | | | +---------------+---------------+---+-------------+---------------+ | correlationID | CorrelationID | O | 0..1 | | +---------------+---------------+---+-------------+---------------+ | amfId | NfInstanceId | O | 0..1 | Indicates the | | | | | | AMF Instance | | | | | | serving the | | | | | | UE. LMF shall | | | | | | use the AMF | | | | | | Instance to | | | | | | forward LCS | | | | | | related N1/N2 | | | | | | messages to | | | | | | the UE/RAN. | +---------------+---------------+---+-------------+---------------+ | locationQoS | LocationQoS | O | 0..1 | | +---------------+---------------+---+-------------+---------------+ | suppo | array(Suppor | O | 1..N | | | rtedGADShapes | tedGADShapes) | | | | +---------------+---------------+---+-------------+---------------+ | supi | Supi | O | 0..1 | | +---------------+---------------+---+-------------+---------------+ | pei | Pei | O | 0..1 | | +---------------+---------------+---+-------------+---------------+ | gpsi | Gpsi | O | 0..1 | | +---------------+---------------+---+-------------+---------------+ | ecgi | Ecgi | O | 0..1 | When present, | | | | | | this IE shall | | | | | | indicate the | | | | | | identifier of | | | | | | the E-UTRAN | | | | | | cell serving | | | | | | the UE. (NOTE | | | | | | 2) | +---------------+---------------+---+-------------+---------------+ | ncgi | Ncgi | O | 0..1 | When present, | | | | | | this IE shall | | | | | | indicate the | | | | | | identifier of | | | | | | the NR cell | | | | | | serving the | | | | | | UE. (NOTE 2) | +---------------+---------------+---+-------------+---------------+ | priority | LcsPriority | O | 0..1 | | +---------------+---------------+---+-------------+---------------+ | velo | Velo | O | 0..1 | | | cityRequested | cityRequested | | | | +---------------+---------------+---+-------------+---------------+ | ueLcsCap | Ue | O | 0..1 | When present, | | | LcsCapability | | | this IE shall | | | | | | indicate the | | | | | | LCS | | | | | | capability | | | | | | supported by | | | | | | the UE. | +---------------+---------------+---+-------------+---------------+ | NOTE 1: At | | | | | | least one of | | | | | | the | | | | | | attributes | | | | | | defined in | | | | | | this table | | | | | | shall be | | | | | | present in | | | | | | the InputData | | | | | | structure. | | | | | | | | | | | | NOTE 2: | | | | | | Attribute | | | | | | \"ecgi\" and | | | | | | \"ncgi\" | | | | | | shall not be | | | | | | present at | | | | | | the same | | | | | | time. | | | | | +---------------+---------------+---+-------------+---------------+
##### 6.1.6.2.3 Type: LocationData
Table 6.1.6.2.3-1: Definition of type LocationData
Attribute name Data type P Cardinality Description
* * *
locationEstimate GeographicArea M 1  
accuracyFulfilmentIndicator AccuracyFulfilmentIndicator O 0..1  
ageOfLocationEstimate AgeOfLocationEstimate O 0..1  
velocityEstimate VelocityEstimate O 0..1  
civicAddress CivicAddress O 0..1  
positioningDataList array(PositioningMethodAndUsage) O 1..N  
gnssPositioningDataList array(GnssPositioningMethodAndUsage) O 1..N  
ecgi Ecgi O 0..1  
ncgi Ncgi O 0..1  
altitude Altitude O 0..1 Altitude of the positioning estimate. When the shape
used in \"locationEstimate\" supports conveying the altitude parameter, this
IE shall be absent. barometricPressure BarometricPressure O 0..1 If present,
this IE contains the barometric pressure measurement as reported by the target
UE.
##### 6.1.6.2.4 Type: GeographicalCoordinates
Table 6.1.6.2.4-1: Definition of type GeographicalCoordinates
+----------------+-----------+---+-------------+--------------------------+ | Attribute name | Data type | P | Cardinality | Description | +================+===========+===+=============+==========================+ | lon | number | M | 1 | Longitude (float value): | | | | | | | | | | | | Minimum: -180 | | | | | | | | | | | | Maximum: 180 | +----------------+-----------+---+-------------+--------------------------+ | lat | number | M | 1 | Latitude (float value): | | | | | | | | | | | | Minimum: -90 | | | | | | | | | | | | Maximum: 90 | +----------------+-----------+---+-------------+--------------------------+
##### 6.1.6.2.5 Type: GeographicArea
Table 6.1.6.2.5-1: Definition of type GeographicArea as a list of mutually
exclusive alternatives
Data type Cardinality Description
* * *
Point 1 Geographical area consisting of a single point, represented by its
longitude and latitude. PointUncertaintyCircle 1 Geographical area consisting
of a point and an uncertainty value. PointUncertaintyEllipse 1 Geographical
area consisting of a point, plus an uncertainty ellipse and a confidence
value. Polygon 1 Geographical area consisting of a list of points (between 3
to 15 points). PointAltitude 1 Geographical area consisting of a point and an
altitude value. PointAltitudeUncertainty 1 Geographical area consisting of a
point, an altitude value and an uncertainty value. EllipsoidArc 1 Geographical
are consisting of an ellipsoid arc.
##### 6.1.6.2.6 Type: Point
Table 6.1.6.2.6-1: Definition of type Point
Attribute name Data type P Cardinality Description
* * *
shape SupportedGADShapes M 1 It shall take the value \"POINT\". point
GeographicalCoordinates M 1
##### 6.1.6.2.7 Type: PointUncertaintyCircle
Table 6.1.6.2.7-1: Definition of type PointUncertaintyCircle
Attribute name Data type P Cardinality Description
* * *
shape SupportedGADShapes M 1 It shall take the value
\"POINT_UNCERTAINTY_CIRCLE\". point GeographicalCoordinates M 1  
uncertainty Uncertainty M 1
##### 6.1.6.2.8 Type: PointUncertaintyEllipse
Table 6.1.6.2.8-1: Definition of type PointUncertaintyEllipse
Attribute name Data type P Cardinality Description
* * *
shape SupportedGADShapes M 1 It shall take the value
\"POINT_UNCERTAINTY_ELLIPSE\". point GeographicalCoordinates M 1  
uncertaintyEllipse UncertaintyEllipse M 1  
confidence Confidence M 1
##### 6.1.6.2.9 Type: Polygon
Table 6.1.6.2.9-1: Definition of type Polygon
Attribute name Data type P Cardinality Description
* * *
shape SupportedGADShapes M 1 It shall take the value \"POLYGON\". pointList
array(GeographicalCoordinates) M 3..15 Array with up to15 items, where each
item is a \"point\".
##### 6.1.6.2.10 Type: PointAltitude
Table 6.1.6.2.10-1: Definition of type PointAltitude
Attribute name Data type P Cardinality Description
* * *
shape SupportedGADShapes M 1 It shall take the value \"POINT_ALTITUDE\". point
GeographicalCoordinates M 1  
altitude Altitude M 1
##### 6.1.6.2.11 Type: PointAltitudeUncertainty
Table 6.1.6.2.11-1: Definition of type PointAltitudeUncertainty
Attribute name Data type P Cardinality Description
* * *
shape SupportedGADShapes M 1 It shall take the value
\"POINT_ALTITUDE_UNCERTAINTY\". point GeographicalCoordinates M 1  
altitude Altitude M 1  
uncertaintyEllipse UncertaintyEllipse M 1  
uncertaintyAltitude Uncertainty M 1  
confidence Confidence M 1
##### 6.1.6.2.12 Type: EllipsoidArc
Table 6.1.6.2.12-1: Definition of type EllipsoidArc
Attribute name Data type P Cardinality Description
* * *
shape SupportedGADShapes M 1 It shall take the value \"ELLIPSOID_ARC\". point
GeographicalCoordinates M 1  
innerRadius InnerRadius M 1  
uncertaintyRadius Uncertainty M 1  
offsetAngle Angle M 1  
includedAngle Angle M 1  
confidence Confidence M 1
##### 6.1.6.2.13 Type: LocationQoS
Table 6.1.6.2.13-1: Definition of type LocationQoS
Attribute name Data type P Cardinality Description
* * *
hAccuracy Accuracy O 0..1 Horizontal accuracy vAccuracy Accuracy O 0..1
Vertical accuracy vertRequested boolean O 0..1 Vertical accuracy requested
(yes/no) responseTime ResponseTime O 0..1 Low delay vs. Delay tolerant
##### 6.1.6.2.14 Type: CivicAddress
Table 6.1.6.2.14-1: Definition of type CivicAddress
+----------------+-----------+---+-------------+-----------------+ | Attribute name | Data type | P | Cardinality | Description | +================+===========+===+=============+=================+ | country | string | M | 1 | The two-letter | | | | | | ISO 3166 | | | | | | country code in | | | | | | capital ASCII | | | | | | letters, e.g., | | | | | | DE or US | | | | | | | | | | | | IETF | | | | | | RFC 4776 [6] | +----------------+-----------+---+-------------+-----------------+ | A1 | string | O | 0..1 | National | | | | | | subdivisions | | | | | | (state, canton, | | | | | | region, | | | | | | province, | | | | | | prefecture) | | | | | | | | | | | | IETF | | | | | | RFC 4776 [6] | +----------------+-----------+---+-------------+-----------------+ | A2 | string | O | 0..1 | County, parish, | | | | | | gun (JP), | | | | | | district (IN) | | | | | | | | | | | | IETF | | | | | | RFC 4776 [6] | +----------------+-----------+---+-------------+-----------------+ | A3 | string | O | 0..1 | City, township, | | | | | | shi (JP) | | | | | | | | | | | | IETF | | | | | | RFC 4776 [6] | +----------------+-----------+---+-------------+-----------------+ | A4 | string | O | 0..1 | City division, | | | | | | borough, city | | | | | | district, ward, | | | | | | chou (JP) | | | | | | | | | | | | IETF | | | | | | RFC 4776 [6] | +----------------+-----------+---+-------------+-----------------+ | A5 | string | O | 0..1 | Neighbourhood, | | | | | | block | | | | | | | | | | | | IETF | | | | | | RFC 4776 [6] | +----------------+-----------+---+-------------+-----------------+ | A6 | string | O | 0..1 | Group of | | | | | | streets below | | | | | | the | | | | | | neighbourhood | | | | | | level | | | | | | | | | | | | IETF | | | | | | RFC 4776 [6] | +----------------+-----------+---+-------------+-----------------+ | PRD | string | O | 0..1 | Leading street | | | | | | direction | | | | | | | | | | | | IETF | | | | | | RFC 4776 [6] | +----------------+-----------+---+-------------+-----------------+ | POD | string | O | 0..1 | Trailing street | | | | | | suffix | | | | | | | | | | | | IETF | | | | | | RFC 4776 [6] | +----------------+-----------+---+-------------+-----------------+ | STS | string | O | 0..1 | Street suffix | | | | | | or type | | | | | | | | | | | | IETF | | | | | | RFC 4776 [6] | +----------------+-----------+---+-------------+-----------------+ | HNO | string | O | 0..1 | House number | | | | | | | | | | | | IETF | | | | | | RFC 4776 [6] | +----------------+-----------+---+-------------+-----------------+ | HNS | string | O | 0..1 | House number | | | | | | suffix | | | | | | | | | | | | IETF | | | | | | RFC 4776 [6] | +----------------+-----------+---+-------------+-----------------+ | LMK | string | O | 0..1 | Landmark or | | | | | | vanity address | | | | | | | | | | | | IETF | | | | | | RFC 4776 [6] | +----------------+-----------+---+-------------+-----------------+ | LOC | string | O | 0..1 | Additional | | | | | | location | | | | | | information | | | | | | | | | | | | IETF | | | | | | RFC 4776 [6] | +----------------+-----------+---+-------------+-----------------+ | NAM | string | O | 0..1 | Name (residence | | | | | | and office | | | | | | occupant) | | | | | | | | | | | | IETF | | | | | | RFC 4776 [6] | +----------------+-----------+---+-------------+-----------------+ | PC | string | O | 0..1 | Postal/zip code | | | | | | | | | | | | IETF | | | | | | RFC 4776 [6] | +----------------+-----------+---+-------------+-----------------+ | BLD | string | O | 0..1 | Building | | | | | | (structure) | | | | | | | | | | | | IETF | | | | | | RFC 5139 [7] | +----------------+-----------+---+-------------+-----------------+ | UNIT | string | O | 0..1 | Unit | | | | | | (apartment, | | | | | | suite) | | | | | | | | | | | | IETF | | | | | | RFC 5139 [7] | +----------------+-----------+---+-------------+-----------------+ | FLR | string | O | 0..1 | Floor | | | | | | | | | | | | IETF | | | | | | RFC 4776 [6] | +----------------+-----------+---+-------------+-----------------+ | ROOM | string | O | 0..1 | Room | | | | | | | | | | | | IETF | | | | | | RFC 5139 [7] | +----------------+-----------+---+-------------+-----------------+ | PLC | string | O | 0..1 | Place-type | | | | | | | | | | | | IETF | | | | | | RFC 5139 [7] | +----------------+-----------+---+-------------+-----------------+ | PCN | string | O | 0..1 | Postal | | | | | | community name | | | | | | | | | | | | IETF | | | | | | RFC 5139 [7] | +----------------+-----------+---+-------------+-----------------+ | POBOX | string | O | 0..1 | Post office box | | | | | | (P.O. box) | | | | | | | | | | | | IETF | | | | | | RFC 5139 [7] | +----------------+-----------+---+-------------+-----------------+ | ADDCODE | string | O | 0..1 | Additional code | | | | | | | | | | | | IETF | | | | | | RFC 5139 [7] | +----------------+-----------+---+-------------+-----------------+ | SEAT | string | O | 0..1 | Seat (desk, | | | | | | cubicle, | | | | | | workstation) | | | | | | | | | | | | IETF | | | | | | RFC 5139 [7] | +----------------+-----------+---+-------------+-----------------+ | RD | string | O | 0..1 | Primary road or | | | | | | street | | | | | | | | | | | | IETF | | | | | | RFC 5139 [7] | +----------------+-----------+---+-------------+-----------------+ | RDSEC | string | O | 0..1 | Road clause | | | | | | | | | | | | IETF | | | | | | RFC 5139 [7] | +----------------+-----------+---+-------------+-----------------+ | RDBR | string | O | 0..1 | Road branch | | | | | | | | | | | | IETF | | | | | | RFC 5139 [7] | +----------------+-----------+---+-------------+-----------------+ | RDSUBBR | string | O | 0..1 | Road sub-branch | | | | | | | | | | | | IETF | | | | | | RFC 5139 [7] | +----------------+-----------+---+-------------+-----------------+ | PRM | string | O | 0..1 | Road | | | | | | pre-modifier | | | | | | | | | | | | IETF | | | | | | RFC 5139 [7] | +----------------+-----------+---+-------------+-----------------+ | POM | string | O | 0..1 | Road | | | | | | post-modifier | | | | | | | | | | | | IETF | | | | | | RFC 5139 [7] | +----------------+-----------+---+-------------+-----------------+
EXAMPLE: The above structure follows the same label naming as in the XML
schema shown in IETF RFC 5139 [7]. The same example shown in XML in that RFC,
in chapter 5, would be equivalent to the following JSON document:
> {
>
> \"country\": \"AU\",
>
> \"A1\": \"NSW\",
>
> \"A3\": \"Wollongong\",
>
> \"A4\": \"North Wollongong\",
>
> \"RD\": \"Flinders\",
>
> \"STS\": \"Street\",
>
> \"RDBR\": \"Campbell Street\",
>
> \"LMK\": \"Gilligan\'s Island\",
>
> \"LOC\": \"Corner\",
>
> \"NAM\": \"Video Rental Store\",
>
> \"PC\": \"2500\",
>
> \"ROOM\": \"Westerns and Classics\",
>
> \"PLC\": \"store\",
>
> \"POBOX\": \"Private Box 15\"
>
> }
##### 6.1.6.2.15 Type: PositioningMethodAndUsage
Table 6.1.6.2.15-1: Definition of type PositioningMethodAndUsage
Attribute name Data type P Cardinality Description
* * *
method PositioningMethod M 1  
mode PositioningMode M 1  
usage Usage M 1
##### 6.1.6.2.16 Type: GnssPositioningMethodAndUsage
Table 6.1.6.2.16-1: Definition of type GnssPositioningMethodAndUsage
Attribute name Data type P Cardinality Description
* * *
mode PositioningMode M 1  
gnss GnssId M 1  
usage Usage M 1
##### 6.1.6.2.17 Type: VelocityEstimate
Table 6.1.6.2.17-1: Definition of type VelocityEstimate as a list of mutually
exclusive alternatives
Data type Cardinality Description
* * *
HorizontalVelocity 1 Velocity estimate including horizontal speed and bearing.
HorizontalWithVerticalVelocity 1 Velocity estimate including horizontal speed
and bearing, and also vertical speed and vertical direction.
HorizontalVelocityWithUncertainty 1 Velocity estimate including horizontal
speed and bearing; it also includes an uncertainty value.
HorizontalWithVerticalVelocityAndUncertainty 1 Velocity estimate including
horizontal speed and bearing, and also vertical speed and vertical direction;
it also includes uncertainty value for horizontal and vertical speeds.
##### 6.1.6.2.18 Type: HorizontalVelocity
Table 6.1.6.2.18-1: Definition of type HorizontalVelocity
Attribute name Data type P Cardinality Description
* * *
hSpeed HorizontalSpeed M 1 Horizontal speed in kilometres per hour. bearing
Angle M 1 Bearing angle in degrees, measured clockwise from North.
##### 6.1.6.2.19 Type: HorizontalWithVerticalVelocity
Table 6.1.6.2.19-1: Definition of type HorizontalWithVerticalVelocity
Attribute name Data type P Cardinality Description
* * *
hSpeed HorizontalSpeed M 1 Horizontal speed in kilometres per hour. bearing
Angle M 1 Bearing angel in degrees, measured clockwise from North. vSpeed
VerticalSpeed M 1 Vertical Seed in kilometres per hour. vDirection
VerticalDirection M 1 Vertical Direction: upward or downward.
##### 6.1.6.2.20 Type: HorizontalVelocityWithUncertainty
Table 6.1.6.2.20-1: Definition of type HorizontalVelocityWithUncertainty
Attribute name Data type P Cardinality Description
* * *
hSpeed HorizontalSpeed M 1 Speed in kilometres per hour. bearing Angle M 1
Bearing angel in degrees, measured clockwise from North. uncertainty
SpeedUncertainty M 1 Uncertainty of horizontal speed in kilometres per hour.
##### 6.1.6.2.21 Type: HorizontalWithVerticalVelocityAndUncertainty
Table 6.1.6.2.21-1: Definition of type
HorizontalWithVerticalVelocityAndUncertainty
Attribute name Data type P Cardinality Description
* * *
hspeed HorizontalSpeed M 1 Speed in kilometres per hour. bearing Angle M 1
Bearing angel in degrees, measured clockwise from North. vSpeed VerticalSpeed
M 1 Vertical Seed in kilometres per hour. vDirection VerticalDirection M 1
Vertical Direction: upwards or downwards. hUncertainty SpeedUncertainty M 1
Uncertainty of horizontal speed in kilometres per hour. vUncertainty
SpeedUncertainty M 1 Uncertainty of vertical speed in kilometres per hour.
##### 6.1.6.2.22 Type: UncertaintyEllipse
Table 6.1.6.2.22-1: Definition of type UncertaintyEllipse
Attribute name Data type P Cardinality Description
* * *
semiMajor Uncertainty M 1  
semiMinor Uncertainty M 1  
orientationMajor Orientation M 1
##### 6.1.6.2.23 Type: UeLcsCapability
Table 6.1.6.2.x-1: Definition of type UeLcsCapability
+----------------+-----------+---+-------------+-----------------+ | Attribute name | Data type | P | Cardinality | Description | +----------------+-----------+---+-------------+-----------------+ | lppSupport | boolean | O | 0..1 | Indicates | | | | | | whether the UE | | | | | | supports LPP or | | | | | | not. | | | | | | | | | | | | - true | | | | | | (default): LPP | | | | | | supported by | | | | | | the UE | | | | | | | | | | | | - false: LPP | | | | | | not supported | | | | | | by the UE | +----------------+-----------+---+-------------+-----------------+
#### 6.1.6.3 Simple data types and enumerations
##### 6.1.6.3.1 Introduction
This clause defines simple data types and enumerations that can be referenced
from data structures defined in the previous clauses.
##### 6.1.6.3.2 Simple data types
The simple data types defined in table 6.1.6.3.2-1 shall be supported.
Table 6.1.6.3.2-1: Simple data types
+-----------------------+-----------------+------------------------+ | Type Name | Type Definition | Description | +-----------------------+-----------------+------------------------+ | Altitude | number | Float value of the | | | | altitude, expressed in | | | | meters. | | | | | | | | Minimum = -32767. | | | | Maximum = 32767. | +-----------------------+-----------------+------------------------+ | Angle | integer | Integer value of the | | | | angle, expressed in | | | | degrees. | | | | | | | | Minimum = 0. Maximum = | | | | 360. | +-----------------------+-----------------+------------------------+ | Uncertainty | number | Float value of | | | | uncertainty, expressed | | | | in meters. | | | | | | | | Minimum = 0 | +-----------------------+-----------------+------------------------+ | Orientation | integer | Integer value of the | | | | orientation angle, | | | | expressed in degrees. | | | | | | | | Minimum = 0. Maximum = | | | | 180. | +-----------------------+-----------------+------------------------+ | Confidence | integer | Integer value of the | | | | confidence, expressed | | | | in percentage value. | | | | | | | | Minimum = 0. Maximum = | | | | 100. | +-----------------------+-----------------+------------------------+ | Accuracy | number | Float value of | | | | accuracy, expressed in | | | | meters. | | | | | | | | Minimum = 0 | +-----------------------+-----------------+------------------------+ | InnerRadius | integer | Integer value of the | | | | inner radius, | | | | expressed in meters. | | | | | | | | Minimum = 0. Maximum = | | | | 327675. | +-----------------------+-----------------+------------------------+ | CorrelationID | string | LCS Correlation ID. | | | | The correlation ID | | | | shall be of a minimum | | | | length of 1 character | | | | and maximum length of | | | | 255 characters. | +-----------------------+-----------------+------------------------+ | AgeOfLocationEstimate | integer | Integer value of the | | | | age of the location | | | | estimate, expressed in | | | | minutes. | | | | | | | | Minimum: 0. Maximum: | | | | 32767. | +-----------------------+-----------------+------------------------+ | HorizontalSpeed | number | Float value of | | | | horizontal speed, | | | | expressed in | | | | kilometres per hour. | | | | | | | | Minimum = 0. Maximum = | | | | 2047. | +-----------------------+-----------------+------------------------+ | VerticalSpeed | number | Float value of | | | | horizontal speed, | | | | expressed in | | | | kilometres per hour. | | | | | | | | Minimum = 0. Maximum = | | | | 255. | +-----------------------+-----------------+------------------------+ | SpeedUncertainty | number | Float value of speed | | | | uncertainty, expressed | | | | in kilometres per | | | | hour. | | | | | | | | Minimum = 0. Maximum = | | | | 255. | +-----------------------+-----------------+------------------------+ | BarometricPressure | integer | This IE specifies the | | | | measured uncompensated | | | | atmospheric pressure | | | | in units of Pascal | | | | (Pa). | | | | | | | | Minimum = 30000. | | | | Maximum = 115000. | +-----------------------+-----------------+------------------------+
##### 6.1.6.3.3 Enumeration: ExternalClientType
The enumeration ExternalClientType represents the different types of clients
of the location service.
Table 6.1.6.3.3-1: Enumeration ExternalClientType
Enumeration value Description
* * *
\"EMERGENCY_SERVICES\"  
\"VALUE_ADDED_SERVICES\"  
\"PLMN_OPERATOR_SERVICES\"  
\"LAWFUL_INTERCEPT_SERVICES\"  
\"PLMN_OPERATOR_BROADCAST_SERVICES\"  
\"PLMN_OPERATOR_OM\"  
\"PLMN_OPERATOR_ANONYMOUS_STATISTICS\"  
\"PLMN_OPERATOR_TARGET_MS_SERVICE_SUPPORT\"
##### 6.1.6.3.4 Enumeration: SupportedGADShapes
The enumeration SupportedGADShapes represents the different types, or shapes,
of geographic areas supported by the system.
Table 6.1.6.3.4-1: Enumeration SupportedGADShapes
Enumeration value Description
* * *
\"POINT\"  
\"POINT_UNCERTAINTY_CIRCLE\"  
\"POINT_UNCERTAINTY_ELLIPSE\"  
\"POLYGON\"  
\"POINT_ALTITUDE\"  
\"POINT_ALTITUDE_UNCERTAINTY\"  
\"ELLIPSOID_ARC\"
##### 6.1.6.3.5 Enumeration: ResponseTime
The enumeration ResponseTime represents the acceptable delay in the
determination of the location of the UE.
Table 6.1.6.3.5-1: Enumeration ResponseTime
Enumeration value Description
* * *
\"LOW_DELAY\"  
\"DELAY_TOLERANT\"
##### 6.1.6.3.6 Enumeration: PositioningMethod
The enumeration PositioningMethod represents the method used to determine the
location of the UE.
Table 6.1.6.3.6-1: Enumeration PositioningMethod
Enumeration value Description
* * *
\"CELLID\"  
\"ECID\"  
\"OTDOA\"  
\"BAROMETRIC_PRESSURE\"  
\"WLAN\"  
\"BLUETOOTH\"  
\"MBS\"  
\"MOTION_SENSOR\"
##### 6.1.6.3.7 Enumeration: PositioningMode
The enumeration PositioningMode represents the mode used to determine the
location of the UE when a certain positioning method is used.
Table 6.1.6.3.7-1: Enumeration PositioningMode
Enumeration value Description
* * *
\"UE_BASED\"  
\"UE_ASSISTED\"  
\"CONVENTIONAL\"
##### 6.1.6.3.8 Enumeration: GnssId
The enumeration GnssId represents the different GNSS systems.
Table 6.1.6.3.8-1: Enumeration GnssId
Enumeration value Description
* * *
\"GPS\"  
\"GALILEO\"  
\"SBAS\"  
\"MODERNIZED_GPS\"  
\"QZSS\"  
\"GLONASS\"
##### 6.1.6.3.9 Enumeration: Usage
The enumeration Usage represents the type of usage made of the location
measurement from the UE.
Table 6.1.6.3.9-1: Enumeration Usage
Enumeration value Description
* * *
\"UNSUCCESS\"  
\"SUCCESS_RESULTS_NOT_USED\"  
\"SUCCESS_RESULTS_USED_TO_VERIFY_LOCATION\"  
\"SUCCESS_RESULTS_USED_TO_GENERATE_LOCATION\"  
\"SUCCESS_METHOD_NOT_DETERMINED\"
##### 6.1.6.3.10 Enumeration: LcsPriority
The enumeration LcsPriority represents the priority of the LCS client.
Table 6.1.6.3.10-1: Enumeration LcsPriority
Enumeration value Description
* * *
\"HIGHEST_PRIORITY\"  
\"NORMAL_PRIORITY\"
##### 6.1.6.3.11 Enumeration: VelocityRequested
The enumeration VelocityRequested represents the indication of velocity
requirement.
Table 6.1.6.3.11-1: Enumeration VelocityRequested
Enumeration value Description
* * *
\"VELOCITY_IS_NOT_REQUESTED\"  
\"VELOCITY_IS_REQUESTED\"
##### 6.1.6.3.12 Enumeration: AccuracyFulfilmentIndicator
The enumeration AccuracyFulfilmentIndicator represents whether the requested
accuracy was fulfilled or not.
Table 6.1.6.3.12-1: Enumeration AccuracyFulfilmentIndicator
Enumeration value Description
* * *
\"REQUESTED_ACCURACY_FULFILLED\"  
\"REQUESTED_ACCURACY_NOT_FULFILLED\"
##### 6.1.6.3.13 Enumeration: VerticalDirection
The enumeration VerticalDirection represents the direction (upward/downward)
of the vertical speed.
Table 6.1.6.3.13-1: Enumeration VerticalDirection
Enumeration value Description
* * *
\"UPWARD\"  
\"DOWNWARD\"
### 6.1.7 Error Handling
#### 6.1.7.1 General
HTTP error handling shall be supported as specified in clause 5.2.4 of 3GPP TS
29.500 [4].
#### 6.1.7.2 Protocol Errors
Protocol errors handling shall be supported as specified in clause 5.2.7 of
3GPP TS 29.500 [4].
#### 6.1.7.3 Application Errors
The application errors defined for the Nlmf_Location service are listed in
Table 6.1.7.3-1.
Table 6.1.7.3-1: Application errors
Application Error HTTP status code Description
* * *
POSITIONING_DENIED 403 Forbidden The positioning procedure was denied.
UNSPECIFIED 403 Forbidden The request is rejected due to unspecified reasons.
POSITIONING_FAILED 500 Internal Server Error The positioning procedure failed.
UNREACHABLE_USER 504 Gateway Timeout The user could not be reached in order to
perform positioning procedure.
### 6.1.8 Security
As indicated in 3GPP TS 33.501 [9], the access to the Nlmf_Location API may be
authorized by means of the OAuth2 protocol (see IETF RFC 6749 [10]), using the
\"Client Credentials\" authorization grant, where the NRF (see 3GPP TS 29.510
[11]) plays the role of the authorization server.
If Oauth2 authorization is used, an NF Service Consumer, prior to consuming
services offered by the Nlmf_Location API, shall obtain a \"token\" from the
authorization server, by invoking the Access Token Request service, as
described in 3GPP TS 29.510 [11], clause 5.4.2.2.
NOTE: When multiple NRFs are deployed in a network, the NRF used as
authorization server is the same NRF that the NF Service Consumer used for
discovering the Nlmf_Location service.
The Nlmf_Location API defines scopes for OAuth2 authorization as specified in
3GPP TS 33.501 [9]; it defines a single scope consisting on the name of the
service (i.e., \"nlmf-loc\"), and it does not define any additional scopes at
resource or operation level.
###### ## Annex A (normative): OpenAPI specification
## A.1 General
This Annex specifies the formal definition of the Nlmf Service API. It
consists of an OpenAPI 3.0.0 specification, in YAML format.
This Annex takes precedence when being discrepant to other parts of the
specification with respect to the encoding of information elements and methods
within the API(s).
NOTE 1: The semantics and procedures, as well as conditions, e.g. for the
applicability and allowed combinations of attributes or values, not expressed
in the OpenAPI definitions but defined in other parts of the specification
also apply.
Informative copies of the OpenAPI specification files contained in this 3GPP
Technical Specification are available on the public 3GPP file server in the
following locations (see clause 5B of the 3GPP TR 21.900 [16] for further
information):
\- https://www.3gpp.org/ftp/Specs/archive/OpenAPI/\/, and
\- https://www.3gpp.org/ftp/Specs/\/\/OpenAPI/.
NOTE 2: To fetch the OpenAPI specification file after CT#83 plenary meeting
for Release 15 in the above links \ must be replaced with the date
the CT Plenary occurs, in the form of year-month (yyyy-mm), e.g. for CT#83
meeting \ must be replaced with value \"2019-03\" and \ must
be replaced with value \"Rel-15\".
## A.2 Nlmf_Location API
openapi: 3.0.0
info:
version: \'1.0.4\'
title: \'LMF Location\'
description: \|
LMF Location Service.
© 2019, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI, TTA,
TTC).
All rights reserved.
servers:
\- url: \'{apiRoot}/nlmf-loc/v1\'
variables:
apiRoot:
default: https://example.com
description: apiRoot as defined in clause 4.4 of 3GPP TS 29.501
security:
\- {}
\- oAuth2ClientCredentials:
\- nlmf-loc
paths:
/determine-location:
post:
summary: Determine Location of an UE
operationId: DetermineLocation
tags:
\- Determine Location
requestBody:
content:
application/json:
schema:
\$ref: \'#/components/schemas/InputData\'
required: true
responses:
\'200\':
description: Expected response to a valid request
content:
application/json:
schema:
\$ref: \'#/components/schemas/LocationData\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
\'504\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/504\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
components:
securitySchemes:
oAuth2ClientCredentials:
type: oauth2
flows:
clientCredentials:
tokenUrl: \'{nrfApiRoot}/oauth2/token\'
scopes:
nlmf-loc: Access to the Nlmf_Location API
schemas:
#
# COMPLEX TYPES
#
InputData:
type: object
not:
required: [ ecgi, ncgi ]
properties:
externalClientType:
\$ref: \'#/components/schemas/ExternalClientType\'
correlationID:
\$ref: \'#/components/schemas/CorrelationID\'
amfId:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/NfInstanceId\'
locationQoS:
\$ref: \'#/components/schemas/LocationQoS\'
supportedGADShapes:
type: array
items:
\$ref: \'#/components/schemas/SupportedGADShapes\'
minItems: 1
supi:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Supi\'
pei:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Pei\'
gpsi:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Gpsi\'
ecgi:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ecgi\'
ncgi:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ncgi\'
priority:
\$ref: \'#/components/schemas/LcsPriority\'
velocityRequested:
\$ref: \'#/components/schemas/VelocityRequested\'
ueLcsCap:
\$ref: \'#/components/schemas/UeLcsCapability\'
LocationData:
type: object
required:
\- locationEstimate
properties:
locationEstimate:
\$ref: \'#/components/schemas/GeographicArea\'
accuracyFulfilmentIndicator:
\$ref: \'#/components/schemas/AccuracyFulfilmentIndicator\'
ageOfLocationEstimate:
\$ref: \'#/components/schemas/AgeOfLocationEstimate\'
velocityEstimate:
\$ref: \'#/components/schemas/VelocityEstimate\'
civicAddress:
\$ref: \'#/components/schemas/CivicAddress\'
positioningDataList:
type: array
items:
\$ref: \'#/components/schemas/PositioningMethodAndUsage\'
minItems: 1
gnssPositioningDataList:
type: array
items:
\$ref: \'#/components/schemas/GnssPositioningMethodAndUsage\'
minItems: 1
ecgi:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ecgi\'
ncgi:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ncgi\'
altitude:
\$ref: \'#/components/schemas/Altitude\'
barometricPressure:
\$ref: \'#/components/schemas/BarometricPressure\'
GeographicArea:
anyOf:
\- \$ref: \'#/components/schemas/Point\'
\- \$ref: \'#/components/schemas/PointUncertaintyCircle\'
\- \$ref: \'#/components/schemas/PointUncertaintyEllipse\'
\- \$ref: \'#/components/schemas/Polygon\'
\- \$ref: \'#/components/schemas/PointAltitude\'
\- \$ref: \'#/components/schemas/PointAltitudeUncertainty\'
\- \$ref: \'#/components/schemas/EllipsoidArc\'
GADShape:
type: object
required:
\- shape
properties:
shape:
\$ref: \'#/components/schemas/SupportedGADShapes\'
discriminator:
propertyName: shape
mapping:
POINT: \'#/components/schemas/Point\'
POINT_UNCERTAINTY_CIRCLE: \'#/components/schemas/PointUncertaintyCircle\'
POINT_UNCERTAINTY_ELLIPSE: \'#/components/schemas/PointUncertaintyEllipse\'
POLYGON: \'#/components/schemas/Polygon\'
POINT_ALTITUDE: \'#/components/schemas/PointAltitude\'
POINT_ALTITUDE_UNCERTAINTY: \'#/components/schemas/PointAltitudeUncertainty\'
ELLIPSOID_ARC: \'#/components/schemas/EllipsoidArc\'
Point:
allOf:
\- \$ref: \'#/components/schemas/GADShape\'
\- type: object
required:
\- point
properties:
point:
\$ref: \'#/components/schemas/GeographicalCoordinates\'
PointUncertaintyCircle:
allOf:
\- \$ref: \'#/components/schemas/GADShape\'
\- type: object
required:
\- point
\- uncertainty
properties:
point:
\$ref: \'#/components/schemas/GeographicalCoordinates\'
uncertainty:
\$ref: \'#/components/schemas/Uncertainty\'
PointUncertaintyEllipse:
allOf:
\- \$ref: \'#/components/schemas/GADShape\'
\- type: object
required:
\- point
\- uncertaintyEllipse
\- confidence
properties:
point:
\$ref: \'#/components/schemas/GeographicalCoordinates\'
uncertaintyEllipse:
\$ref: \'#/components/schemas/UncertaintyEllipse\'
confidence:
\$ref: \'#/components/schemas/Confidence\'
Polygon:
allOf:
\- \$ref: \'#/components/schemas/GADShape\'
\- type: object
required:
\- pointList
properties:
pointList:
\$ref: \'#/components/schemas/PointList\'
PointAltitude:
allOf:
\- \$ref: \'#/components/schemas/GADShape\'
\- type: object
required:
\- point
\- altitude
properties:
point:
\$ref: \'#/components/schemas/GeographicalCoordinates\'
altitude:
\$ref: \'#/components/schemas/Altitude\'
PointAltitudeUncertainty:
allOf:
\- \$ref: \'#/components/schemas/GADShape\'
\- type: object
required:
\- point
\- altitude
\- uncertaintyEllipse
\- uncertaintyAltitude
\- confidence
properties:
point:
\$ref: \'#/components/schemas/GeographicalCoordinates\'
altitude:
\$ref: \'#/components/schemas/Altitude\'
uncertaintyEllipse:
\$ref: \'#/components/schemas/UncertaintyEllipse\'
uncertaintyAltitude:
\$ref: \'#/components/schemas/Uncertainty\'
confidence:
\$ref: \'#/components/schemas/Confidence\'
EllipsoidArc:
allOf:
\- \$ref: \'#/components/schemas/GADShape\'
\- type: object
required:
\- point
\- innerRadius
\- uncertaintyRadius
\- offsetAngle
\- includedAngle
\- confidence
properties:
point:
\$ref: \'#/components/schemas/GeographicalCoordinates\'
innerRadius:
\$ref: \'#/components/schemas/InnerRadius\'
uncertaintyRadius:
\$ref: \'#/components/schemas/Uncertainty\'
offsetAngle:
\$ref: \'#/components/schemas/Angle\'
includedAngle:
\$ref: \'#/components/schemas/Angle\'
confidence:
\$ref: \'#/components/schemas/Confidence\'
GeographicalCoordinates:
type: object
required:
\- lon
\- lat
properties:
lon:
type: number
format: float
minimum: -180
maximum: 180
lat:
type: number
format: float
minimum: -90
maximum: 90
UncertaintyEllipse:
type: object
required:
\- semiMajor
\- semiMinor
\- orientationMajor
properties:
semiMajor:
\$ref: \'#/components/schemas/Uncertainty\'
semiMinor:
\$ref: \'#/components/schemas/Uncertainty\'
orientationMajor:
\$ref: \'#/components/schemas/Orientation\'
PointList:
type: array
items:
\$ref: \'#/components/schemas/GeographicalCoordinates\'
minItems: 3
maxItems: 15
LocationQoS:
type: object
properties:
hAccuracy:
\$ref: \'#/components/schemas/Accuracy\'
vAccuracy:
\$ref: \'#/components/schemas/Accuracy\'
verticalRequested:
type: boolean
responseTime:
\$ref: \'#/components/schemas/ResponseTime\'
PositioningMethodAndUsage:
type: object
required:
\- method
\- mode
\- usage
properties:
method:
\$ref: \'#/components/schemas/PositioningMethod\'
mode:
\$ref: \'#/components/schemas/PositioningMode\'
usage:
\$ref: \'#/components/schemas/Usage\'
GnssPositioningMethodAndUsage:
type: object
required:
\- mode
\- gnss
\- usage
properties:
mode:
\$ref: \'#/components/schemas/PositioningMode\'
gnss:
\$ref: \'#/components/schemas/GnssId\'
usage:
\$ref: \'#/components/schemas/Usage\'
CivicAddress:
type: object
properties:
country:
type: string
A1:
type: string
A2:
type: string
A3:
type: string
A4:
type: string
A5:
type: string
A6:
type: string
PRD:
type: string
POD:
type: string
STS:
type: string
HNO:
type: string
HNS:
type: string
LMK:
type: string
LOC:
type: string
NAM:
type: string
PC:
type: string
BLD:
type: string
UNIT:
type: string
FLR:
type: string
ROOM:
type: string
PLC:
type: string
PCN:
type: string
POBOX:
type: string
ADDCODE:
type: string
SEAT:
type: string
RD:
type: string
RDSEC:
type: string
RDBR:
type: string
RDSUBBR:
type: string
PRM:
type: string
POM:
type: string
VelocityEstimate:
oneOf:
\- \$ref: \'#/components/schemas/HorizontalVelocity\'
\- \$ref: \'#/components/schemas/HorizontalWithVerticalVelocity\'
\- \$ref: \'#/components/schemas/HorizontalVelocityWithUncertainty\'
\- \$ref:
\'#/components/schemas/HorizontalWithVerticalVelocityAndUncertainty\'
HorizontalVelocity:
type: object
required:
\- hSpeed
\- bearing
properties:
hSpeed:
\$ref: \'#/components/schemas/HorizontalSpeed\'
bearing:
\$ref: \'#/components/schemas/Angle\'
HorizontalWithVerticalVelocity:
type: object
required:
\- hSpeed
\- bearing
\- vSpeed
\- vDirection
properties:
hSpeed:
\$ref: \'#/components/schemas/HorizontalSpeed\'
bearing:
\$ref: \'#/components/schemas/Angle\'
vSpeed:
\$ref: \'#/components/schemas/VerticalSpeed\'
vDirection:
\$ref: \'#/components/schemas/VerticalDirection\'
HorizontalVelocityWithUncertainty:
type: object
required:
\- hSpeed
\- bearing
\- hUncertainty
properties:
hSpeed:
\$ref: \'#/components/schemas/HorizontalSpeed\'
bearing:
\$ref: \'#/components/schemas/Angle\'
hUncertainty:
\$ref: \'#/components/schemas/SpeedUncertainty\'
HorizontalWithVerticalVelocityAndUncertainty:
type: object
required:
\- hSpeed
\- bearing
\- vSpeed
\- vDirection
\- hUncertainty
\- vUncertainty
properties:
hSpeed:
\$ref: \'#/components/schemas/HorizontalSpeed\'
bearing:
\$ref: \'#/components/schemas/Angle\'
vSpeed:
\$ref: \'#/components/schemas/VerticalSpeed\'
vDirection:
\$ref: \'#/components/schemas/VerticalDirection\'
hUncertainty:
\$ref: \'#/components/schemas/SpeedUncertainty\'
vUncertainty:
\$ref: \'#/components/schemas/SpeedUncertainty\'
UeLcsCapability:
type: object
properties:
lppSupport:
type: boolean
default: true
#
# SIMPLE TYPES
#
Altitude:
type: number
format: float
minimum: -32767
maximum: 32767
Angle:
type: integer
minimum: 0
maximum: 360
Uncertainty:
type: number
format: float
minimum: 0
Orientation:
type: integer
minimum: 0
maximum: 180
Confidence:
type: integer
minimum: 0
maximum: 100
Accuracy:
type: number
format: float
minimum: 0
InnerRadius:
type: integer
format: int32
minimum: 0
maximum: 327675
CorrelationID:
type: string
minLength: 1
maxLength: 255
AgeOfLocationEstimate:
type: integer
minimum: 0
maximum: 32767
HorizontalSpeed:
type: number
format: float
minimum: 0
maximum: 2047
VerticalSpeed:
type: number
format: float
minimum: 0
maximum: 255
SpeedUncertainty:
type: number
format: float
minimum: 0
maximum: 255
BarometricPressure:
type: integer
minimum: 30000
maximum: 115000
#
# ENUMS
#
ExternalClientType:
anyOf:
\- type: string
enum:
\- EMERGENCY_SERVICES
\- VALUE_ADDED_SERVICES
\- PLMN_OPERATOR_SERVICES
\- LAWFUL_INTERCEPT_SERVICES
\- PLMN_OPERATOR_BROADCAST_SERVICES
\- PLMN_OPERATOR_OM
\- PLMN_OPERATOR_ANONYMOUS_STATISTICS
\- PLMN_OPERATOR_TARGET_MS_SERVICE_SUPPORT
\- type: string
SupportedGADShapes:
anyOf:
\- type: string
enum:
\- POINT
\- POINT_UNCERTAINTY_CIRCLE
\- POINT_UNCERTAINTY_ELLIPSE
\- POLYGON
\- POINT_ALTITUDE
\- POINT_ALTITUDE_UNCERTAINTY
\- ELLIPSOID_ARC
\- type: string
ResponseTime:
anyOf:
\- type: string
enum:
\- LOW_DELAY
\- DELAY_TOLERANT
\- type: string
PositioningMethod:
anyOf:
\- type: string
enum:
\- CELLID
\- ECID
\- OTDOA
\- BAROMETRIC_PRESSURE
\- WLAN
\- BLUETOOTH
\- MBS
\- MOTION_SENSOR
\- type: string
PositioningMode:
anyOf:
\- type: string
enum:
\- UE_BASED
\- UE_ASSISTED
\- CONVENTIONAL
\- type: string
GnssId:
anyOf:
\- type: string
enum:
\- GPS
\- GALILEO
\- SBAS
\- MODERNIZED_GPS
\- QZSS
\- GLONASS
\- type: string
Usage:
anyOf:
\- type: string
enum:
\- UNSUCCESS
\- SUCCESS_RESULTS_NOT_USED
\- SUCCESS_RESULTS_USED_TO_VERIFY_LOCATION
\- SUCCESS_RESULTS_USED_TO_GENERATE_LOCATION
\- SUCCESS_METHOD_NOT_DETERMINED
\- type: string
LcsPriority:
anyOf:
\- type: string
enum:
\- HIGHEST_PRIORITY
\- NORMAL_PRIORITY
\- type: string
VelocityRequested:
anyOf:
\- type: string
enum:
\- VELOCITY_IS_NOT_REQUESTED
\- VELOCITY_IS_REQUESTED
\- type: string
AccuracyFulfilmentIndicator:
anyOf:
\- type: string
enum:
\- REQUESTED_ACCURACY_FULFILLED
\- REQUESTED_ACCURACY_NOT_FULFILLED
\- type: string
VerticalDirection:
type: string
enum:
\- UPWARD
\- DOWNWARD
externalDocs:
description: 3GPP TS 29.572 V15.6.0; 5G System; Location Management Services;
Stage 3
url: \'http://www.3gpp.org/ftp/Specs/archive/29_series/29.572/\'
#