# Foreword
This Technical Report has been produced by the 3rd Generation Partnership
Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# Introduction
This clause is optional. If it exists, it is always the second unnumbered
clause.
# 1 Scope
The present document provides the study on Policy and Charging for Volume
Based Charging, which is used to investigate and evaluate possible functional
enhancements.
The study shall investigate how to separate the volume usage between different
IMS based services (e.g. CAT and voice calls, 3PTY conference, Call waiting,
Call Hold).
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or non‑specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 29.212: \"Policy and Charging Control (PCC); Reference points\".
[3] 3GPP TS 29.213: \"Policy and Charging Control signalling flows and Quality
of Service (QoS) parameter mapping\".
[4] 3GPP TS 29.214: \"Policy and Charging Control over Rx reference point\".
[5] 3GPP TS 24.182: \"IP Multimedia Subsystem (IMS) Customized Alerting Tones
(CAT); Protocol specification\".
[6] 3GPP TS 24.605: \"Conference (CONF) using IP Multimedia (IM) Core Network
(CN) subsystem; Protocol specification\".
[7] 3GPP TS 24.147: \"Conferencing using the IP Multimedia (IM) Core Network
(CN) subsystem; Stage 3\".
[8] 3GPP TS 32.251: \"Telecommunication management; Charging management;
Packet Switched (PS) domain charging\".
[9] 3GPP TS 24.610: \"Communication HOLD (HOLD) using IP Multimedia (IM) Core
Network (CN) subsystem; Protocol specification\".
[10] 3GPP TS 24.615: \"Communication Waiting (CW) using IP Multimedia (IM)
Core Network (CN) subsystem; Protocol specification\".
# 3 Definitions, symbols and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
3GPP TR 21.905 [1] and the following apply. A term defined in the present
document takes precedence over the definition of the same term, if any, in
3GPP TR 21.905 [1].
## 3.2 Symbols
For the purposes of the present document, the following symbols apply:
## 3.3 Abbreviations
For the purposes of the present document, the abbreviations given in 3GPP TR
21.905 [1] and the following apply.\ An abbreviation defined in the present
document takes precedence over the definition of the same abbreviation, if
any, in 3GPP TR 21.905 [1].
3PTY Three Party
ARP Allocation and Retention Priority
AS Application Server
AVP Attribute Value Pair
CAT Customized Alerting Tones
CONF Conference calling
CW Communication Waiting
HOLD Communication HOLD
MMTEL Multimedia Telephony
NDUB Network Determined User Busy
PCC Policy and Charging Control
PCEF Policy and Charging Enforcement Function
PCRF Policy and Charging Rule Function
P-CSCF Proxy-Call Session Control Function
# 4 Volume based charging scenarios
## 4.1 Scenario 1 Customized Alerting Tones (CAT) scenario
3GPP TS 24.182 [5] defines the usage of SIP and SDP signalling to provide
Customized Alerting Tones. The CAT service is an operator specific service by
which an operator enables the subscriber to customize the media which is
played to the calling party during alerting of the called party. The media are
inserted by an application server (AS).
3GPP TS 24.182 [5] defines the following models to provide CAT:
\- **Forking Model** : The caller´s UE will for the same SDP offer receive an
SDP answer for the CAT early media and an SDP answer from the callee´s UE in
different SIP dialogues. (see Figure 4.1-1)
\- **Early Session Model** : The caller´s UE will send a SIP INVITE containing
an SDP offer and receive the corresponding answer from the callee´s UE for the
normal media and an SIP provisional response from the AS that contains an SDP
offer of the \"early session\" disposition type for the CAT early media. The
caller´s UE responds with a SIP PRACK message containing the SDP answer of the
\"early session\" disposition type. Only one SIP dialogue is used. (see Figure
4.1-2)
\- **Gateway model** : The caller´s UE will send a SIP INVITE and receive an
SDP answer from the AS for the CAT early media. After the callee has answered,
the caller´s UE will receive a new SDP offer containing an SDP offer for the
media towards the callee and will reply with an SDP answer. Only one SIP
dialogue is used. (see Figure 4.1-3)
Figure 4.1-1. Example callflows for CAT forking model (Figure A.3.2-1 of 3GPP
TS 24.182 [5])
Figure 4.1-2. Example callflows for CAT early session (Figure A.4.2-1 of 3GPP
TS 24.182 [5])
Figure 4.1-3. Example callflows for CAT gateway model (Figure A.5.1-1 of 3GPP
TS 24.182 [5])
For all models, the IMS Communication Service Identifier value for MMTEL will
be used in the SIP signalling and CAT early media and established media cannot
be distinguished based on this information. However, the CAT early media are
marked with the media-level \"a=content:g.3gpp.cat\" SDP attribute.
The SIP/SDP signalling for CAT will be translated by the P-CSCF into Rx
signalling towards the PCRF according to the Annex A of 3GPP TS 29.214 [4] and
Clause 6.2 of 3GPP TS 29.213 [3]. In particular:
\- The IMS Communication Service Identifier value for MMTEL will be provided
as AF-Application-Identifier.
\- The media-level \"a=content:g.3gpp.cat\" SDP attribute can be encapsulated
within the \"Codec-Data\" AVP for corresponding media components.
\- The forking model will be handled according to Annex A.3 of 3GPP TS 29.214
[4].
\- The early session model will be handled according to Annex A.7 of 3GPP TS
29.214 [4].
\- The gateway model will be handled according to Annex A.1 of 3GPP TS 29.214
[4].
\- For all three models a single Rx session will be used.
The PCRF can thus recognise whether media described in the Rx service
information are CAT early media or established media.
It is desirable that the PCRF configures the PCEF over the Gx interface (see
3GPP TS 29.212 [2]) in such a manner that separate charging records are
generated for the CAT early media and for the established media.
## 4.2 Scenario 2 3PTY conference scenario
SIP signalling for a 3PTY conference is described in 3GPP TS 24.605 [6] and
3GPP TS 24.147 [7]
A UE invoking a 3PTY conference will establish separate SIP dialogues to the
two peers and will put the media for both calls on hold using the SDP
direction attribute \"sendonly\" or \"inactive\" in an SDP offer sent towards
each of the peers. The UE will then establish a third SIP dialogue towards the
MRF to establish a conference. After that, the UE will invite the peers to
join the conference, either by sending SIP refer requests to the peers within
the corresponding SIP dialogues (see Figure 4.2-1), or by tasking the MRF to
send INVITE requests to the peers (see Figure 4.2-2).
The P-CSCF serving the UE can recognise the SIP dialogue toward the MRF via
the Conference-factory URI used as request URI, or via the \"isfocus\"
parameter in the SIP contact header within the SIP response.
The SIP/SDP signalling will be translated by the P-CSCF into Rx signalling
towards the PCRF according to the Annex A of 3GPP TS 29.214 [4] and Clause 6.2
of 3GPP TS 29.213 [3]. In particular:
\- The different Rx sessions will be used
\- The IMS Communication Service Identifier value for MMTEL will be provided
as AF-Application-Identifier.
\- The Rx session and media towards the conference server/MRF are not
explicitly marked.
\- Resource sharing among the media related to the different SIP dialogues can
be requested as specified in subclause A.12 of 3GPP TS 29.214 [4]
There is only a single IP CAN session and only one Gx session. As described
for the bearer binding mechanism (see 3GPP TS 29.214 [4]), the Bearer Binding
Function (BBF) located at the PCEF will evaluate whether it is possible to use
one of the existing IP-CAN bearers that has the same QoS class identifier and
ARP.
It is desirable to enable the PCEF to request the network to generate separate
CDR the usage between the UE and different parties and to recognise the media
components exchanged between the served UE and the MRF.
The PCEF provides the capability to categorise the service data flows within
IP-CAN bearer data traffic by rating group or combination of the rating group
and service id according to subclauses 5.2.1.3 and 5.3.1.2 of 3GPP TS 32.251
[8]. However, the PCRF could not supply different rating group or service id
for the different PCC rules in this scenario.
{width="6.247916666666667in" height="9.118055555555555in"}
Figure 4.2-1: The Call flow for 3PTY conference by sending REFER request
described in 3GPP TS 24.605 [6]
Figure 4.2-2: The Call flow for 3PTY conference sending INVITE request with
URI list described in 3GPP TS 24.605 [6]
If charging correlation is used, it is very hard for the charging system to
correlate the PS CDR and IMS CDR. There may be one PS CDR with multiple AF-
Correlation-Information.
## 4.3 Scenario 3 Communication HOLD (HOLD) scenario
3GPP TS 24.610 [9] defines the usage of SIP and SDP signalling to provide
Communication HOLD (HOLD) service. The HOLD service enables a user to suspend
the reception of media stream(s) of an established IP multimedia session, and
resume the media stream(s) at a later time. The media are inserted by the
communication origin or the AS.
3GPP TS 24.610 [9] defines HOLD communication and RESUME communication to
provide HOLD.
{width="6.6930555555555555in" height="4.346527777777778in"}
Figure 4.3-1. Example callflows for HOLD communication without announcement to
the held user (Figure A.1.1.1 of 3GPP TS 24.610 [9])
Figure 4.3-2. Example callflows for HOLD communication with announcement to
the held user (Figure A.1.2.1 of 3GPP TS 24.610 [9])
Figure 4.3-3. Example callflows for HOLD communication with modification of
the SDP answer (Figure A.1.3.1 of 3GPP TS 24.610 [9])
{width="6.6930555555555555in" height="4.346527777777778in"}
Figure 4.3-4. Example callflows for RESUME communication without announcement
to the held user (Figure A.2.1.1 of 3GPP TS 24.610 [9])
Figure 4.3-5. Example callflows for RESUME communication with announcement to
the held user (Figure A.2.2.1 of 3GPP TS 24.610 [9])
For all cases, The P-CSCF serving the UE can recognise the SIP dialogue toward
different SIP Call-IDs.
The SIP/SDP signalling will be translated by the P-CSCF into Rx signalling
towards the PCRF according to the Annex A of 3GPP TS 29.214 [4] and clause 6.2
of 3GPP TS 29.213 [3]. In particular:
\- The different Rx sessions will be used
\- The IMS Communication Service Identifier value for MMTEL will be provided
as AF-Application-Identifier.
\- The Rx session and media towards different communication dialogues are not
explicitly marked.
\- Resource sharing among the media related to the different SIP dialogues can
be requested as specified in subclause A.12 of 3GPP TS 29.214 [4]
There is only a single IP CAN session and only one Gx session. As described
for the bearer binding mechanism (see 3GPP TS 29.213 [3]), the Bearer Binding
Function (BBF) located at the PCEF will evaluate whether it is possible to use
one of the existing IP-CAN bearers that has the same QoS class identifier and
ARP.
It is desirable to enable the PCEF to request the network to generate separate
CDR the usage between different communication dialogues and to recognise the
media components exchanged between different communication dialogues.
The PCEF provides the capability to categorise the service data flows within
IP-CAN bearer data traffic by rating group or combination of the rating group
and service id according to subclauses 5.2.1.3 and 5.3.1.2 of 3GPP TS 32.251
[8]. However, the PCRF could not supply different rating group or service id
for the different PCC rules in this scenario. If charging correlation is used,
it is very hard for the charging system to correlate the PS CDR and IMS CDR.
There may be one PS CDR with multiple AF-Correlation-Information.
## 4.4 Scenario 4 Communication Waiting (CW) scenario
3GPP TS 24.615 [10] defines the usage of SIP and SDP signalling to provide
Communication Waiting (CW) service. The CW service enables a UE to be informed
that no resources are available for an incoming communication. The user then
has the choice of accepting, rejecting or ignoring the incoming communication
(as per basic communication procedures). The media are inserted by a different
communication origin.
3GPP TS 24.615 [10] defines the following cases to provide CW:
\- network based CW, i.e. sufficient information on the user is available at
the time a communication is to be delivered to the user, the network validates
the status of this user. If the status of the user is \"approaching NDUB\",
the network presents the waiting communication to the destination user; or
\- terminal based CW, the network may be informed of the communication waiting
situation upon receipt from the destination user of a communication waiting
indication.
Figure 4.4-1. Example callflows for Network based CW using an AS (Figure A.1.1
of 3GPP TS 24.615 [10])
Figure 4.4-2. Example callflows for Terminal based CW at the terminating side,
successful communication establishment (Figure A.2.1 of 3GPP TS 24.615 [10])
For all cases, The P-CSCF serving the UE can recognise the SIP dialogue toward
different SIP Call-IDs.
The SIP/SDP signalling will be translated by the P-CSCF into Rx signalling
towards the PCRF according to the Annex A of 3GPP TS 29.214 [4] and clause 6.2
of 3GPP TS 29.213 [3]. In particular:
\- The different Rx sessions will be used
\- The IMS Communication Service Identifier value for MMTEL will be provided
as AF-Application-Identifier.
\- The Rx session and media towards different communication dialogues are not
explicitly marked.
\- Resource sharing among the media related to the different SIP dialogues can
be requested as specified in subclause A.12 of 3GPP TS 29.214 [4]
There is only a single IP CAN session and only one Gx session. As described
for the bearer binding mechanism (see 3GPP TS 29.213 [3]), the Bearer Binding
Function (BBF) located at the PCEF will evaluate whether it is possible to use
one of the existing IP-CAN bearers that has the same QoS class identifier and
ARP.
It is desirable to enable the PCEF to request the network to generate separate
CDR the usage between different communication dialogues and to recognise the
media components exchanged between different communication origins.
The PCEF provides the capability to categorise the service data flows within
IP-CAN bearer data traffic by rating group or combination of the rating group
and service id according to subclauses 5.2.1.3 and 5.3.1.2 of 3GPP TS 32.251
[8]. However, the PCRF could not supply different rating group or service id
for the different PCC rules in this scenario.If charging correlation is used,
it is very hard for the charging system to correlate the PS CDR and IMS CDR.
There may be one PS CDR with multiple AF-Correlation-Information.
# 5 Requirements analysis and assumptions
5.1 Requirements analysis and assumptions for CT3
In order to support the volume based charging for IMS, all the IMS scenarios
as described in clause 4 should be supported. The requirements for CT3 have
been identified:
1) The PCRF shall be able to identify CAT media and normal media;
2) The PCRF shall be able to identify media related to different called
parties;
3) The PCEF shall be able to separate charging records generated for CAT media
and normal media;
4) The PCEF shall be able to separate charging records generated between the
UE and different parties.
5.2 Requirements analysis and assumptions for CT1
In order to support the volume based charging for IMS, all the IMS scenarios
as described in clause 4 should be supported. The requirements for CT1 have
been identified:
1) The P-CSCF shall be able to identify from the SIP signalling that the CAT
service is to be used so that the P-CSCF can provide a CAT service indication
to PCRF;
2) The P-CSCF shall be able to identify from the SIP signalling that the 3PTY
conference service is to be used so that the P-CSCF can provide a 3PTY
conference service indication to PCRF.
# 6 Alternative solutions for CT3
## 6.1 Solution 1: PCRF configuration solution addressing on requirement 2 and
4 for CT3
### 6.1.1 Introduction
This solution addresses requirement 2 and 4 for CT3 and specifically considers
how the PCRF identify media related to different called parties and how the
PCEF separate charging records generated between the UE and different parties.
### 6.1.2 Procedure and Function Description
Addressing requirement 2 for CT3:
The P-CSCF use Content-Type AVP within the Media-Component-Description AVP to
mark the IMS content type for the PCRF to identify the conference service
information.
The Content-Type AVP determines the IMS content type of a session component.
The following values are defined:
CONFERENCE (x)
This value is used to indicate that the content corresponding to the affected
media component is the conference.
NOTE 1: The Content-Type AVP is a new AVP and the name, the definition and the
encoding can be further analysed in the normative work.
The PCRF will be configured with a group of rating group(RG) or service
ID(SID) for one service (e.g. IMS Communication Service) based on the IMS
Communication Service Identifier within the AF-Application-Identifier AVP and
the IMS content type within the Content-Type AVP.
When the PCRF receives a new Rx session with the same IMS Communication
Service within the \"AF-Application-Identifier\" AVP as a previous one and
this previous Rx session still exists, the PCRF will select a different RG or
SID from the PCC rule related the previous Rx session to separate the volume
charging between the two Rx sessions. The PCEF will install the PCC rules with
the different RG and SID.
NOTE 2: When the new AVP is used and the indicator to identify conference
service is SDP a=content media-level attribute line, the a=content media-level
attribute line do not need to be included in the \"Codec-Data\" AVP to avoid
duplication of information. Otherwise, the \"Codec-Data\" AVP within the
Media-Component-Description AVP shall be used to mark the IMS content type for
the PCRF to identify the CAT service information This could be further
analysed in the normative work.
NOTE 3: If duplicated Rx session are used, the DUPLICATED_AF_SESSION Permanent
Failure can occur.
NOTE 4: The number configured for a group of rating groups or service IDs for
one service will limit the number that PCRF support Rx sessions when the
previous Rx session with same \"AF-Application-Identifier\" still exists.
Addressing requirement 4 for CT3:
The PCEF will separate charging records generated for the UE and different
parties based on the rating group(RG) or service ID(SID).
NOTE 5: When the PCRF update the RG or service ID(SID) for the existing PCC
rule, there can be some impact on the online and/or offline charging
mechanism. This could be updated in the normative work.
### 6.1.3 Analysis
This solution can address the requirement 2 and 4 for CT3 and specifically
considers how the PCRF identify media related to different called parties and
how the PCEF separate charging records generated between the UE and different
parties.
There are additional requirements on the P-CSCF:
The P-CSCF shall be able to indicate the PCRF to mark related media as the
conference service.
NOTE 1: Whether introducing a new AVP or reusing the Codec-Data AVP to
indicate the conference service will be studied in the normative work.
There are additional requirements on the PCRF:
The PCRF shall be able to be configured with a group of rating group(RG) or
service ID(SID) for one service (e.g. IMS Communication Service).
The PCRF shall be able to update the RG or service ID(SID) for the existing
PCC rule.
There is additional requirement on the PCEF:
The PCEF shall be able to separate charging records generated for the UE and
different parties based on the rating group(RG) or service ID(SID).
NOTE 2: When the PCRF update the RG or service ID(SID) for the existing PCC
rule, there can be some impact on the online and/or offline charging
mechanism. This could be further analysed in the normative work.
## 6.2 Solution 2: PCRF configuration solution addressing on requirement 1 and
3 for CT3
### 6.2.1 Introduction
This solution addresses requirement 1 and 3 for CT3 and specifically considers
how the PCRF identify CAT media and normal media and how the PCEF separate
charging records generated for CAT media and normal media.
### 6.2.2 Procedure and Function Description
Addressing requirement 1 for CT3:
The P-CSCF use Content-Type AVP within the Media-Component-Description AVP to
mark the IMS content type for the PCRF to identify the CAT service
information.The Content-Type AVP determines the IMS content type of a session
component. The following values are defined:
NO_CONTENT_DETAIL (0)
This value is used to indicate that no information about the IMS content type
is being provided. This is the default value applicable if the AVP is omitted.
CAT (1)
This value is used to indicate that the content corresponding to the affected
media component is CAT early media.
NOTE 1: The Content-Type AVP is a new AVP and the name, the definition and the
encoding can be updated in the normative work.
The PCRF will be configured with a group of rating group(RG) or service
ID(SID) for one service (e.g. IMS Communication Service) based on the IMS
Communication Service Identifier within the AF-Application-Identifier AVP, and
the IMS content type within the Content-Type AVP.
NOTE 2: When the new AVP is used and the indicator to identify CAT early media
is SDP a=content media-level attribute line, the a=content media-level
attribute line do not need to be included in the \"Codec-Data\" AVP to avoid
duplication of information. Otherwise, the \"Codec-Data\" AVP within the
Media-Component-Description AVP shall be used to mark the IMS content type for
the PCRF to identify the CAT service information This could be futher analysed
in the normative work.
Addressing requirement 3 for CT3:
The PCEF will separate charging records generated for CAT media and normal
media based on the rating group(RG) or service ID(SID).
NOTE 3: When the PCRF update the RG or service ID(SID) for the existing PCC
rule, there can be some impact on the online and/or offline charging
mechanism. This could be futher analysed in the normative work.
### 6.2.3 Analysis
This solution can address the requirement 1 and 3 for CT3 and specifically
considers how the PCRF identify CAT media and normal media and how the PCEF
separate charging records generated for CAT media and normal media.
When the feature is supported, the additional requirements are as follows.
There is additional requirement on the P-CSCF:
The P-CSCF shall be able to indicate the PCRF to mark the related media as the
CAT service.
NOTE 1: Whether introducing a new AVP or reusing the Codec-Data AVP to
indicate the CAT service will be studied in the normative work.
There are additional requirements on the PCRF:
The PCRF shall be able to be configured with a group of rating group(RG) or
service ID(SID) for one service (e.g. IMS Communication Service).
The PCRF shall be able to update the RG or service ID(SID) for the existing
PCC rule.
There is additional requirement on the PCEF:
The PCEF shall be able to separate charging records generated for CAT media
and normal media based on the rating group(RG) or service ID(SID).
NOTE 2: When the PCRF update the RG or service ID(SID) for the existing PCC
rule, there can be some impact on the online and/or offline charging
mechanism. This could be futher analysed in the normative work.
7 Alternative solutions for CT1
7.1 Solution 1: Convey CAT service indication in SDP
7.1.1 Introduction
This solution addresses the requirement on P-CSCF being able to identify that
the CAT service is to be used so that the P-CSCF can provide a CAT service
indication to PCRF.
The PCRF needs the CAT service indication to distinguish the media flow used
for CAT service from that used for other media during the session, thus the
CAT service indication should be bound to a particular media component over
the Rx interface. 3GPP TS 24.182 [5] specifies the use of a=content media-
level attribute with the value of \"g.3gpp.cat\" in the SDP which identifies
the corresponding media component is used for CAT service, this media-level
attribute can be used to convey CAT service indication.
7.1.2 Procedure and Function Description
7.1.2.1 General
When sending a SIP message with SDP related to the CAT media, the CAT AS
includes the a=content media-level attribute line with the value of
\"g.3gpp.cat\" under the corresponding media line. If the received SDP
contains such an a=content media-level attribute line, the P-CSCF includes a
CAT service indicatior in the Diameter message used for initial provisioning
or modification of session indication as described in subclause 6.2.
7.1.2.2 Procedure for CAT AS acting in forking model
If the CAT AS is acting in forking model as specified in 3GPP TS 24.182 [5],
the procedure of convey CAT service indication to PCRF is shown in Figure
7.1.2.2-1.
{width="5.954166666666667in" height="5.7027777777777775in"}
Figure 7.1.2.2-1: procedure of convey CAT service indication when forking
model
NOTE: The network entities and the messages which are not concerned is not
shown in the figure.
> **1-3 INVITE request (UE(MO) to UE(MT))**
UE(MO) sends a SIP INVITE request to UE(MT).
> **4 180 (Ringing) response (UE(MT) to CAT AS)**
UE(MT) sends a SIP 180 response to CAT AS.
> **5 18x response (CAT AS to P-CSCF(MO))**
CAT AS sends a SIP 18x response to the P-CSCF(MO). The SIP 18x response
contains the SDP of the CAT media. An a=content attribute line with value of
\"g.3gpp.cat\" is included in the SDP.
> **6 Diameter AAR (P-CSCF(MO) to PCRF)**
P-CSCF(MO) provides the session information to the PCRF, the CAT service
indication is contained in this message.
> **7 Diameter AAA (PCRF to P-CSCF(MO))**
PCRF respond to P-CSCF(MO) with AAA.
> **8 18x response (P-CSCF(MO) to UE(MO))**.
P-CSCF(MO) forwards the SIP 18x response to the UE(MO).
> **9-10 200 (OK) response (UE(MT) to P-CSCF(MO))**.
UE(MT) sends 200 (OK) response to the initial INVITE request, the SDP of media
used for the voice communication on the MT UE is included in the 200 (OK)
response.
> **11 Diameter AAR (P-CSCF(MO) to PCRF)**.
P-CSCF(MO) modifies the session information, the CAT service indication is not
included in this message.
> **12 Diameter AAA (PCRF to P-CSCF(MO))**.
PCRF respond to P-CSCF(MO) with AAA.
> **13 200 (OK) response (P-CSCF(MO) to UE(MO))**.
P-CSCF(MO) forwards the SIP 200 (OK) response to the UE(MO).
7.1.2.3 Procedure for CAT AS acting in early session model
If the CAT AS is acting in early session model as specified in 3GPP TS 24.182
[5], the procedure of convey CAT service indication to PCRF is shown in Figure
7.1.2.3-1.
{width="6.054861111111111in" height="5.798611111111111in"}
Figure 7.1.2.3-1: procedure of convey CAT service indication when early
session model
NOTE: The network entities and the messages which are not concerned is not
shown in the figure.
> **1-3 INVITE request (UE(MO) to UE(MT))**
UE(MO) sends a SIP INVITE request to UE(MT).
> **4 180 (Ringing) response (UE(MT) to CAT AS)**
UE(MT) sends a SIP 180 response to CAT AS.
> **5 18x response (CAT AS to P-CSCF(MO))**
CAT AS sends a SIP 18x response to the P-CSCF(MO). The SIP 18x response
contains the SDP of the CAT media. An a=content attribute line with value of
\"g.3gpp.cat\" is included in the SDP.
> **6 Diameter AAR (P-CSCF(MO) to PCRF)**
P-CSCF(MO) provides the session information to the PCRF, the CAT service, the
CAT service indication is not included in this message.
> **12 Diameter AAA (PCRF to P-CSCF(MO))**.
PCRF respond to P-CSCF(MO) with AAA.
> **13 200 (OK) response (P-CSCF(MO) to UE(MO))**.
P-CSCF(MO) forwards the SIP 200 (OK) response to the UE(MO).
7.1.2.4 Procedure for CAT AS acting in Gateway model
If the CAT AS is acting in Gateway model as specified in 3GPP TS 24.182 [5],
the procedure of convey CAT service indication to PCRF is shown in Figure
7.1.2.4-1.
{width="6.0680555555555555in" height="5.811805555555556in"}
Figure 7.1.2.4-1: procedure of convey CAT service indication when Gateway
model
> NOTE: The network entities and the messages which are not concerned is not
> shown in the figure.
>
> **1-3 INVITE request (UE(MO) to UE(MT))**
UE(MO) sends a SIP INVITE request to UE(MT).
> **4 180 (Ringing) response (UE(MT) to CAT AS)**
UE(MT) sends a SIP 180 response to CAT AS.
> **5 18x response (CAT AS to P-CSCF(MO))**
CAT AS sends a SIP 18x response to the P-CSCF(MO). The SIP 18x response
contains the SDP of the CAT media. An a=content attribute line with value of
\"g.3gpp.cat\" is included in the SDP.
> **6 Diameter AAR (P-CSCF(MO) to PCRF)**
P-CSCF(MO) provides the session information to the PCRF, the CAT service
indication is contained in this message.
> **7 Diameter AAA (PCRF to P-CSCF(MO))**
PCRF respond to P-CSCF(MO) with AAA.
> **8 18x response (P-CSCF(MO) to UE(MO))**.
P-CSCF(MO) forwards the SIP 18x response to the UE(MO).
> **9 200 (OK) response (UE(MT) to CAT AS)**.
UE(MT) sends 200 (OK) response to the initial INVITE request, the SDP of media
used for the voice communication on the MT UE is included in the 200 (OK)
response.
> **10-11 UPDATE request (CAT AS to UE(MO))**.
CAT AS sends SIP UPDATE request to the UE(MO) to update the SDP used for the
voice communication. The a=content attribute line with value of \"g.3gpp.cat\"
is not included in this SDP.
> **12 200 (OK) response (UE(MO) to P-CSCF(MO))**.
UE(MO) responds to the UPDATE request.
> **13 Diameter AAR (P-CSCF(MO) to PCRF)**.
P-CSCF(MO) modifies the session information, the CAT service indication is not
included in this message.
> **14 Diameter AAA (PCRF to P-CSCF(MO))**.
PCRF respond to P-CSCF(MO) with AAA.
> **15-17 The rest of the call flow**
7.1.3 Analysis
This solution can address the requirement on P-CSCF being able to identify
that the CAT service is to be used so that the P-CSCF can provide a CAT
service indication to PCRF
There is no additional requirement on IM CN subsystem functionalities which
are under remit of CT1.
7.2 Solution 2: Convey a conference service indication in SDP
7.2.1 Introduction
This solution addresses the requirement on P-CSCF being able to identify from
the SIP signalling that the conference service is to be used so that the
P-CSCF can provide a conference service indication to PCRF.
7.2.2 Procedure and Function Description
During the SDP negotiation procedure, the conference AS includes a=content
media-level attribute line with value of \"g.3gpp.conf\" in the SDP which is
related to the media component used for the conference.
If the received SDP contains such an a=content media-level attribute line with
value of \"g.3gpp.conf\", the P-CSCF includes a conference service indicatior
in the Diameter message used for initial provisioning or modification of
session indication as described in subclause 6.1.
7.2.3 Analysis
This solution can address the requirement on P-CSCF being able to identify
from the SIP signalling that the conference service is to be used so that the
P-CSCF can provide a conference service indication to PCRF.
There is additional requirement on the conference AS to include an a=content
media-level attribute line with value of \"g.3gpp.conf\" in the SDP related to
the media flow used for conference service.
# 8 Conclusions and recommendations
## 8.1 Conclusions and recommendations for CT3
The present document investigates some functional enhancements which can be
used by IMS services to separate the volume usage between different IMS based
services (e.g. CAT and voice calls, 3PTY conference, Communication waiting,
Communication Hold).
When the feature is supported the following is to be standardized during CT3
normative work:
Addressing requirement 1 for CT3:
The P-CSCF shall indicate the PCRF to mark related media as the CAT service.
NOTE 1: Whether introducing a new AVP or reusing the Codec-Data AVP to
indicate the CAT service will be studied in the normative work.
NOTE 2: If duplicated Rx session are used, the DUPLICATED_AF_SESSION Permanent
Failure can occur.
The PCRF could be configured with a group of rating groups or service IDs for
one service (e.g. IMS Communication Service). The PCRF will assign a different
rating group or service ID for the different identified media. The PCRF shall
be able to update the RG or service ID(SID) for the existing PCC rule.
NOTE 3: The number configured for a group of rating groups or service IDs for
one service will limit the number that PCRF support Rx sessions when the
previous Rx session with same \"AF-Application-Identifier\" still exists.
Whether the PCRF reject the coming new Rx session or not when the number of
group of rating groups or service IDs for one service reached the
configuration will be studied in the normative work.
Addressing requirement 2 for CT3:
The P-CSCF shall be able to indicate the PCRF to mark related media as
conference service.
NOTE 4: Whether introducing a new AVP or reusing the Codec-Data AVP to
indicate the conference service will be studied in the normative work.
The PCRF could be configured with a group of rating groups or service IDs for
one service (e.g. IMS Communication Service). The PCRF will assign a different
rating group or service ID for the identified media for the different parties.
The PCRF shall be able to update the RG or service ID(SID) for the existing
PCC rule.
NOTE 5: The number configured for a group of rating groups or service IDs for
one service will limit the number that PCRF support Rx sessions when the
previous Rx session with same \"AF-Application-Identifier\" still exists.
Whether the PCRF reject the coming new Rx session or not when the number of
group of rating groups or service IDs for one service reached the
configuration will be studied in the normative work.
Addressing requirement 3 for CT3:
The PCEF will separate charging records generated for the UE and different
parties based on the rating group(RG) or service ID(SID).
NOTE 6: When the PCRF update the RG or service ID(SID) for the existing PCC
rule, there can be some impact on the online and/or offline charging
mechanism. This could be futher analysed in the normative work.
Addressing requirement 4 for CT3:
The PCEF will separate charging records generated for CAT media and normal
media based on the rating group(RG) or service ID(SID).
NOTE 7: When the PCRF update the RG or service ID(SID) for the existing PCC
rule, there can be some impact on the online and/or offline charging
mechanism. This could be further analysed in the normative work.
## 8.2 Conclusions for CT1
8.2.1 Conclusion on the solution for convey CAT service indication
It is concluded to standardize the solution described in subclause 7.1.
No further normative work is needed in CT1.
8.2.2 Conclusion on the solution for convey call parties information
It is concluded to standardize the solution described in subclause 7.2.
The following is to be standardized during CT1 normative work:
a) a new a=content media-level attribute line value, e.g. \"g.3gpp.conf \";
b) the conference AS shall include a=content media-level attribute line with
value of \"g.3gpp.conf\" in the SDP used for conference media.
#