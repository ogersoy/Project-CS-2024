# Foreword
This Technical Report has been produced by the 3rd Generation Partnership
Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# Introduction
[TBA]
# 1 Scope
The present document ...[TBA]
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 23.501: \"System Architecture for the 5G System\".
[3] 3GPP TS 23.502: \"Procedures for the 5G System\".
[4] ETSI TS 102 796: \"Hybrid Broadcast Broadband TV\".
[5] 3GPP TS 26.346: \"Multimedia Broadcast/Multicast Service (MBMS); Protocols
and codecs\".
[6] 3GPP TS 26.234: \"Transparent end-to-end Packet-switched Streaming Service
(PSS); Protocols and codecs\".
[7] IETF RFC 4337: \"MIME Type Registration for MPEG-4\".
[8] IETF RFC 6381: \"The \'Codecs\' and \'Profiles\' Parameters for \"Bucket\"
Media Types\".
[9] ETSI GS MEC011: \"Mobile Edge Computing (MEC); Mobile Edge Platform
Application Enablement\".
[10] ETSI GS MEC009: \"Mobile Edge Computing (MEC); General Principles for
Mobile Edge Service APIs\".
[11] 3GPP TR 23.722 \"Study on Common API Framework for 3GPP Northbound
APIs\".
[12] 3GPP TS 26.247: \"Transparent end-to-end Packet-switched Streaming
Service (PSS); Progressive Download and Dynamic Adaptive Streaming over HTTP
(3GP-DASH)\".
[13] 3GPP TS 23.222: \"Functional architecture and information flows to
support Common API Framework for 3GPP Northbound APIs; Stage 2\".
# 3 Definitions and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
3GPP TR 21.905 [1] and the following apply. A term defined in the present
document takes precedence over the definition of the same term, if any, in
3GPP TR 21.905 [1].
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in 3GPP TR
21.905 [1] and the following apply. An abbreviation defined in the present
document takes precedence over the definition of the same abbreviation, if
any, in 3GPP TR 21.905 [1].
API Application Programming Interface
CMAF Common Media Application Format
DASH Dynamic Adaptive Streaming over HTTP
GPU Graphics Processing Unit
HbbTV Hybrid Broadcast Broadband TeleVision
HEVC High Efficiency Video Coding
HTML-5 HyperText Markup Language version 5
HW HardWare
ISO BMFF ISO Base Media File Format
MIME Multipurpose Internet Mail Extensions
OMAF Omnidirectional MediA Formal
OTT Over-The-Top
UL Up-Link
VR Virtual Reality
# 4 5G System Overview
## 4.1 Introduction
3GPP SA2 is progressing on the normative work on the specification of 5G
system architecture and procedures in TS 23.501 and TS 23.502 respectively. As
specified in TS 23.501, a number of network functions interface with each
other to provide connectivity services to a UE. Different network functions
play different roles (e.g., control plane, data plane entities) and help setup
sessions and route traffic from the UE to the intended destination. 5G system
architecture is based on separation of control and user plane thus allowing
independent scalability, evolution and flexible deployments e.g. centralized
location or distributed (remote) location. Other key principles and concepts
based on which the 5G system architecture is being defined are:
\- Wherever applicable, define procedures (i.e. the set of interactions
between network functions) as services, so that their re-use is possible.
\- Enable each network function (NF) to interact with other NF directly if
required.
\- Minimize dependencies between the Access Network (AN) and the Core Network
(CN). The architecture is defined with a converged core network with a common
AN - CN interface which integrates different 3GPP and non-3GPP access types.
\- Support a unified authentication framework.
\- Support \"stateless\" NFs, where the \"compute\" resource is decoupled from
the \"storage\" resource.
\- Support capability exposure.
\- Support concurrent access to local and centralized services. To support low
latency services and access to local data networks, UP functions can be
deployed close to the Access Network.
\- Support roaming with both Home routed traffic as well as Local breakout
traffic in the visited PLMN.
## 4.2 Network Functions and Interfaces
Table 1 shows different network functions currently defined in TS 23.501 [2]:
Table 1: Different Network Functions in 5G Architecture
* * *
Network Function Functional Description Authentication Server Function (AUSF)
Provides AUSF authentication server functionality as specified by 3GPP SA3
Access and Mobility Management Function (AMF) Terminates NAS signalling from
the UE and provides registration, connection, reachability, and mobility
management between the UE and 5G CN. It also helps with lawful interception,
transparent proxy for routing SM messages, access authentication and
authorization Unstructured Data Storage network function (UDSF) An optional
function that provides storage and retrieval of information as unstructured
data by any NF Network Exposure Function (NEF) Provides means for exposure of
services and capabilities of network functions and users; translation of
information exchanged between AF and internal network functions NF Repository
Function (NRF) Provides service discovery functions Network Slice Selection
Function (NSSF) Helps with selection of network slice instances service the
UE, determining Allowed NSSAI, and determining the AMF Set to be used to serve
the UE Policy Control function (PCF) Provides policy framework to govern
network behaviour and policy rules to control plane functions; implements a
front end to access subscription information relevant for policy decisions in
UDR Session Management Function (SMF) Provides session management
functionality such as session establishment, modification, and release
functionality; UE IP address allocation and management; selection and control
of UP function; traffic steering and policy enforcement; downlink data
notification; roaming functionality etc. Unified Data Management (UDM)
Supports functionality such as authentication credential handling, user
identification handling, access authorization, registration/mobility
management, subscription management, and SMS management. Unified Data
Repository (UDR) Supports storage and retrieval of subscription data by the
UDM front end; storage and retrieval of policy data by the PCF; storage and
retrieval of information as structured data, such as location data and
application data (including Packet Flow Descriptions (PFDs) for application
detection, application request information for multiple UEs), by the NEF User
Plane Function (UPF) Provides data plane functionality such as anchor point
for intra-/inter-RAT mobility, point of interconnect to data network, packet
routing and forwarding, packet inspection, traffic usage reporting, uplink
classifier and branching point functionality, QoS handling, traffic
verification, packet marking, and downlink packet buffering etc. Application
Function (AF) Interacts with 3GPP network to support application influence on
traffic routing, accessing Network Exposure Function, and interact with policy
framework for policy control SMS Function (SMSF) Provides functionality to
support SMS over NAS such as SMS subscription checking, SMS related CDR,
lawful interception etc. Non-3GPP InterWorking Function (N3IWF) Provides
functionality to connect non-3GPP network to 5G CN including IPSec tunnel
establishment with the UE, relaying uplink and downlink control-plane NAS
signalling between UE and AMF, relaying uplink and downlink user-plane packets
between UE and UPF, QoS enforcement for user-plane packets etc.
* * *
The network functions described above interface with each other as shown in
the system architecture below using a service based representation (as
described in TS 23.501). In service based representation, the interaction
between two network functions is viewed as an access of a service provided by
one NF to another NF. With this representation, service based interfaces exist
between network functions and can be shown as follows (as described in TS
23.501 [2]):
Figure 1: 5G System Architecture Using Service Based Interfaces
Table 2 lists the different service based interfaces defined in TS 23.501 [2]:
Table 2: Service based Interfaces
* * *
Interface Name Description Namf Service-based interface exhibited by AMF Nsmf
Service-based interface exhibited by SMF Nnef Service-based interface
exhibited by NEF Npcf Service-based interface exhibited by PCF Nudm Service-
based interface exhibited by UDM Naf Service-based interface exhibited by AF
Nnrf Service-based interface exhibited by NRF Nnssf Service-based interface
exhibited by NSSF Nausf Service-based interface exhibited by AUSF
* * *
The network functions within the 5G Control Plane described in Table 1
interact with each other using service-based interfaces described in Table 2.
Using its service-based interface, each network function may offer multiple
services to other authorized network functions. Network functions may interact
with other network functions by either using a request / response model or a
subscribe / notify model. Table 3 shows a brief description of services
provided by few network functions in the service based reference architecture
of Figure 1.
Table 3: Services provided by Different Network Functions
+----------------------+----------------------+----------------------+ | Network Function | Services | Supported Service | | (Service Provider) | | Operations and | | | | Service Consumers | +----------------------+----------------------+----------------------+ | AMF | Communication | This service enables | | | Service | an NF to communicate | | | | with the UE and/or | | | | the AN through the | | | | AMF. Consumers of | | | | such a service | | | | include SMF, SMSF, | | | | PCF, NEF, Peer AMF | +----------------------+----------------------+----------------------+ | | Event Exposure | This service enables | | | Service | other NFs to | | | | subscribe or get | | | | notified of the | | | | mobility related | | | | events and | | | | statistics. | | | | Consumers of such a | | | | service include SMF, | | | | NEF, PCF, UDM | +----------------------+----------------------+----------------------+ | | | | +----------------------+----------------------+----------------------+ | UDM | Subscriber Data | 1. Allow NF | | | Management | consumer to retrieve | | | | user subscription | | | | data when necessary | | | | | | | | 2. Provide updated | | | | user subscriber data | | | | to the subscribed NF | | | | consumer | | | | | | | | Consumers include | | | | AMF, SMF | +----------------------+----------------------+----------------------+ | | UE context | 1. provide the NF | | | management | consumer of the | | | | information related | | | | to UE\'s transaction | | | | information, e.g. | | | | UE\'s serving NF | | | | identity, UE status, | | | | etc. | | | | | | | | 2. allow the NF | | | | consumer to | | | | register, remove its | | | | information for the | | | | serving UE in the | | | | UDM | | | | | | | | Consumers include | | | | AMF, SMF, SMSF | +----------------------+----------------------+----------------------+ | | Authentication | Provide updated | | | | authentication | | | | related subscriber | | | | data to the | | | | subscribed NF | | | | consumer | | | | | | | | Consumer of such | | | | information includes | | | | AUSF | +----------------------+----------------------+----------------------+ | | | | +----------------------+----------------------+----------------------+ | PCF | Policy Control | PCF provides all the | | | | operations related | | | | to policy rule to NF | | | | consumers such as | | | | AMF SMF | +----------------------+----------------------+----------------------+ | | Event Notification | PCF provides the | | | | policy related | | | | information / event | | | | to subscribed NF | | | | consumer such as | | | | NEF, AF | +----------------------+----------------------+----------------------+ | | Policy Authorization | PCF authorises an AF | | | | request and to | | | | create policies as | | | | requested by the | | | | authorised AF for | | | | the PDU-CAN session | | | | to which the AF | | | | session is bound to. | | | | Consumers of such | | | | information include | | | | AF, NEF | +----------------------+----------------------+----------------------+ | | | | +----------------------+----------------------+----------------------+ | NRF | Management | Provides support for | | | | Discovery of NF, NF | | | | services. Known | | | | consumers include | | | | AMF, SMF, PCF, NEF, | | | | NRF, SMSF, AUSF, UDM | +----------------------+----------------------+----------------------+ | SMF | PDU Session | This service manages | | | | the PDU sessions and | | | | uses the policy and | | | | charging rules | | | | received from the | | | | PCF. The service | | | | operations exposed | | | | by this NF service | | | | allows the consumer | | | | NFs to handle the | | | | PDU sessions. | | | | Consumers of this | | | | service includes | | | | V-SMF, H-SMF, AMF | +----------------------+----------------------+----------------------+ | | Event Exposure | This service enables | | | | other NFs to | | | | subscribe or get | | | | notified of the | | | | mobility related | | | | events and | | | | statistics. | | | | Consumers of such a | | | | service include SMF, | | | | NEF, PCF, UDM | +----------------------+----------------------+----------------------+ | | | | +----------------------+----------------------+----------------------+ | SMSF | SM Service | This service allows | | | | AMF to authorize SMS | | | | and activate SMS for | | | | the served user on | | | | SMSF. Consumers of | | | | such service include | | | | AMF | +----------------------+----------------------+----------------------+
## 4.3 Non-Roaming Architecture
In addition to the service based representation as shown in Figure 1, the 5G
core network reference architecture can also be shown using a reference point
representation as shown in Figure 2.
Figure 2: Non-Roaming 5G System Architecture in reference point representation
Note 1: The network functions UDSF, NEF, NRF, and UDR are not shown in the
architecture diagram as any network function can interface with them directly
(or through other NFs) and use the services provided by them.
Note 2: The DN node in the above architecture diagram refers to the end data
network to which the UE wishes to connect to.
As shown in Figure 2 above, different network functions interface with each
other to provide connectivity services to the UE. Table 4 below provides a
brief description of the functionality of few significant reference points.
Table 4: Reference Point Functionality
* * *
Reference Point Description N1 Used for exchanging NAS signalling between the
UE and the core network. A separate NAS connection exists for each access the
UE uses to connect to the core network. A single NAS connection is used for
both Registration Management, Connection Management, and for SM-related
procedures for a UE. N2 Reference point used to connect core network to a
standalone 3GPP access or a non-3GPP access (through N3IWF). Used to exchange
the above N1 requests and responses between the UE and AMF. N3 Reference point
between the (R)AN node and UPF for transporting user plane traffic both in
uplink and downlink direction from/to the UE. N4 Reference point between SMF
and UPF and used for provisioning and configuring UPF network functions for
data plane. Session requests and responses are exchanged in between SMF and
UPF for exchanging data plane configuration information. N5 Reference point
between AF and PCF and used by application functions to configure policy and
traffic routing configuration so PDU sessions can be controlled as desired N7
Used by SMF and PCF for exchanging policy and QoS information to control PDU
sessions from/to the UE. N8 Reference point between AMF and UDM to exchange
information such as subscription profiles, service area restrictions,
Subscribed S-NSSAIs etc. for use during registration management and connection
management. N10 Reference point between SMF and UDM to exchange SMF level
subscription data, internal group identification information, supported SSC
modes and default SSC mode, default 5QI/ARP (to set QoS parameters for QoS
flow) etc. This information along with policy and QoS information from PCF
helps SMF configure user plane parameters for PDU sessions. N11 Reference
point between AMF and SMF and is used to carry SM-related NAS messages from/to
the UE.
* * *
## 4.4 Roaming Architecture
TS 23.501 also defines roaming reference architectures using service based and
reference point representations. There are two kinds of roaming scenarios that
are defined in TS 23.501 -- local break out and home-routed scenarios. In
local break out scenario, when a UE is roaming and in the VPLMN, the PDU
session traffic from the UE can be routed to DNN by the VPLMN. However, for
home routed scenario, the PDU session traffic from the UE are routed to the
DNN through the HPLMN. Figure 3 shows the roaming architecture for local
breakout scenario with AF in VPLMN in service based representation.
Figure 3: Roaming 5G System architecture- local breakout scenario with AF in
VPLMN in service-based interface representation
In Figure 3, the AF is inside the VPLMN. It is also possible that the AF can
be inside the HPLMN. Figure 4 shows the roaming architecture for local
breakout scenario with AF in HPLMN in service based representation.
Figure 4: Roaming 5G System architecture- local breakout scenario with AF in
HPLMN in service-based interface representation
Figure 3 and Figure 4 show the roaming architecture for local break out
scenario. Figure 5 below shows the roaming architecture for the home routed
scenario in service-based interface representation.
Figure 5: Roaming 5G System architecture - home routed scenario in service-
based interface representation
In addition to the service-based representation, TS 23.501 provides 5G system
roaming architectures for both the local breakout and home routed scenarios
using the reference point representation. In addition, TS 23.501 also
describes roaming architectures for both the local breakout and home routed
scenarios when the UE accesses the 5G core network using untrusted Non-3GPP
access.
## 4.5 High Level Features of 5G System for Media Delivery
### 4.5.1 Introduction
This clause describes few of the high level features of the 5G system that are
significant for media delivery and transport.
### 4.5.2 Usage of UL Classifiers for PDU Session
The Session Management Function (SMF) may insert an UL CL (uplink classifier)
in the data path of the PDU session. The UL CL is a functionality supported by
an UPF that aims at diverting (locally) some traffic matching traffic filters
provided by the SMF. The SMF may dynamically insert and remove an UL CL inside
a UPF for a PDU session. The SMF may include more than one UPF supporting the
UL CL functionality in the data path of a PDU session.
When a UPF with UL CL is inserted in the data path of the PDU session, the UL
CL forwards PDU session traffic to different PDU session anchors of the PDU
session. Each PDU session anchor provides a different access to the same DNN
for the PDU session. As a result, the UL CL provides forwarding of uplink
traffic to multiple PDU session anchors and merge of downlink traffic from
multiple PDU session anchors.
The insertion of an UPF with a UL CL in the data path of a PDU session is
depicted in Figure 6.
Figure 6: User plane Architecture for the Uplink Classifier
### 4.5.3 Support for Local Area Data Network
As described in TS 23.501, LADN provides local access to a DN (data network)
for a PDU session from the UE. The availability of LADN is informed to the UE
by the network and the UE is allowed to access the LADN only if the UE is in
the service area of the LADN. The LADN service areas are managed by the
network and the AMF inside the 5G core network keeps track of the mobility
information of the UE. The SMF gets to know about the UE location information
from the AMF and LADN service area, and it allows the UE to use the LADN as
long as it is in the LADN service area.
The UE can request a PDU session to the LADN and perform session establishment
procedures as described in TS 23.502. However, whenever the UE leaves the LADN
service area, the UE may not release the PDU session and use the same PDU
session when it gets back into the LADN service area.
### 4.5.4 Application Function Influence on Traffic Routing
The Application Functions (AF) may influence SMF routeing decisions made by
the SMF for traffic of PDU sessions. A trusted AF interacts directly with
other network functions inside the network. However, for an untrusted AF, all
traffic from the AF goes through the NEF before reaching the network functions
inside the network.
The requests from the AF are sent to the PCF which translates AF requests into
policies which are then configured in other network functions as appropriate
and ultimately applied to the PDU sessions.
An Application Function may:
\- Influence UPF (re)selection and allow routeing user traffic to a local
access to a Data Network.
\- Issue requests on behalf of applications not owned by the PLMN serving the
UE.
\- Be in charge of the (re)selection or relocation of the applications within
the local DN.
The requests from AF to influence routeing decisions may contain at least:
\- Information to identify the traffic to be routed (e.g., slicing
information, AF-Service-Identifier).
\- Information about the N6 traffic routing requirements for traffic
identified as defined in 1). This is provided in the form of a list of routing
profile IDs, corresponding each to a DNAI. Based on the routing profile ID the
PCF determines traffic steering policy IDs sent to SMF that each corresponds
to a steering behaviour which is preconfigured on the SMF or UPF.
\- Potential locations of applications towards which the traffic routing
should apply. The potential location of application is expressed as a list of
DNAI(s).
\- Information on the UE(s) whose traffic is to be routed.
\- Information on when (temporal validity condition) the traffic routing is to
apply.
\- Information on where (spatial validity condition) the UE(s) are to be when
the traffic routing applies.
\- AF subscription information to certain events such as notifications about
UPF path management events.
Based on the information received from the AF, the SMF may use that
information to:
\- (re)select UPF(s) for PDU sessions
\- activate mechanisms for traffic multi-homing or enforcement of an UL
Classifier (UL CL)
\- inform the Application Function of the (re)selection of the UP path
### 4.5.5 Support for Edge Computing
TS 23.501 describes 5G system support for edge computing by describing how
3^rd^ party services can be hosted closer to the edge of the core network and
the UE. The 5G system provides different functionality to support edge
computing such as the following:
\- User plane (re)selection
\- Local routing and traffic steering
\- Session and service continuity
\- AF influence on UPF (re)selection and traffic routing
\- Network capability exposure
\- QoS and charging
\- Support for Local Area Data Network (LADN)
Edge Computing offers application developers and content providers cloud-
computing capabilities and an IT service environment at the edge of the
network. This environment is characterized by ultra-low latency and high
bandwidth as well as real-time access to radio network information that can be
leveraged by applications. Operators can open their Network edge to authorized
third-parties, allowing them to flexibly and rapidly deploy innovative
applications and services towards mobile subscribers, enterprises and vertical
segments.
3GPP is evaluated ETSI MEC APIs (application enablement aspects in ETSI GS MEC
011 [9]) and API principles in ETSI GS MEC 009 [10]) specifications) in the
3GPP environment, as documented in 3GPP TR 23.722 [11] on \'Study on Common
API Framework for 3GPP Northbound APIs\'. 3GPP TS 23.222 [13] describes the
relationship between ETSI MEC APIs and Common API Framework for 3GPP
Northbound APIs (CAPIF).
### 4.5.6 Network slices in the 5G system
> 5G systems introduce the concept of network slice, i.e. a set of network
> resources for usage from a certain service [2]. Currently, TS 23.501
> specifies 3 types of network slices, as mentioned below:
Table 1: Standardised Slice/Service Type (SST) values
+---------------------------+-----------+---------------------------+ | Slice/Service type | SST value | Characteristics. | +---------------------------+-----------+---------------------------+ | eMBB (enhanced Mobile | 1 | Slice suitable for the | | Broadband) | | handling of 5G enhanced | | | | Mobile broadband, useful, | | | | but not limited to the | | | | general consumer space | | | | mobile broadband | | | | applications including | | | | streaming of High Quality | | | | Video, Fast large file | | | | transfers etc. It is | | | | expected this SST to aim | | | | at supporting High data | | | | rates and high traffic | | | | densities as outlined in | | | | Table 7.1-1 \"Performance | | | | requirements for high | | | | data rate and traffic | | | | density scenarios\" in | | | | TS 22.261. | +---------------------------+-----------+---------------------------+ | URLLC (ultra- reliable | 2 | Supporting ultra-reliable | | low latency | | low latency | | communications) | | communications for | | | | applications including, | | | | industrial automation, | | | | (remote) control systems. | | | | | | | | This SST is expected to | | | | aim at supporting the | | | | requirements in Table | | | | 7.2.2-1 \"Performance | | | | requirements for | | | | low-latency and | | | | high-reliability | | | | services.\" in TS 22.261 | | | | related to high | | | | reliability and low | | | | latency scenarios. | +---------------------------+-----------+---------------------------+ | MIoT (massive IoT) | 3 | Allowing the support of a | | | | large number and high | | | | density of IoT devices | | | | efficiently and cost | | | | effectively. | +---------------------------+-----------+---------------------------+
Support for all these types is not mandatory, and TS 23.501 [2] does not
mandate the exclusion of additional slice types.
Additionally, for a specific network slice type, multiple network slice
instances may be offered in an operator\'s 5G network, and there is no
normative specification on the number of network slice instances that may be
provided, nor on which applications should use which network slice instances.
TS 23.501 [2] further asserts that a network slice instance for a specific
UE\'s application is selected by the NSSF on the basis of the following
information provided by the UE to the 5G network during registration: (i) a
SST and, optionally (ii) a Slice Differentiation (SD), indicating a specific
slice instance. This information may be pre-configured in the UE or may have
been obtained by the UE during a previous registration process with the
network.
# 5 Mapping of Existing Media Services
## 5.1 Media Distribution Systems
### 5.1.1 Introduction
The figure 7 provides a potential extension to the 5G reference architecture
(as defined in TS 23.501) with media delivery related functions like CDN edge
and origin functions.
Editor\'s Note: other architectures and realizations are possible and will be
studied as part of this document.
{width="6.701388888888889in" height="3.167361111111111in"}
Figure 7: Media on 5G System Architecture
Most media distribution on 5G is based on Adaptive Bit Rate streaming with
HTTP 1.1 to deliver file based video content. A very common video container
format is fMP4 (also called ISO-BMFF) and MPEG2-TS. The new CMAF format is a
profile of fMP4 and can be used with different manifest formats.
Typically, media segments are addressed with URLs where the domain name
indicates the content provider name, i.e. the domain name of Content Origin.
The major components of media distribution are Content Preparation, Content
Origin, and Delivery. The media delivery network elements and their functions
are described in summery herein.
### 5.1.2 Media Distribution Functions
#### 5.1.2.1 Edge Media Delivery function
Edge Media Delivery is part of a CDN facing the clients and connects to 5G
packet core UPF through the N6 reference point. The function is typically a
HTTPS Reverse proxy/cache serving the UEs with content pulled from the CDN. It
also caches content and functions as a HTTPS server when serving UEs from the
pre-cached store. Content pre-caching is performed either on-demand when
requested by clients or by CDN operator management instruction that pre-fills
Edge Delivery with new content prior to the official launch of content. The
management and the content life cycle management of pre-cached assets are
handled via the Manager and Controller.
In case of cache miss, content is pulled with HTTP(s) from the CDN. When the
content is not in the cache, the Edge Delivery connects up-stream to a
Delivery Core that finally forwards the HTTP GET request to Content Origin.
Request Routing part of the CDN Control routes the request with HTTP
redirection to the location of the content.
Being HTTPS reverse Proxy / cache, Edge Delivery maintains the Certificate for
the CDN domain name.
Edge Media Delivery function are capable of redirecting client requests to
other Edge Media Delivery functions, based on various conditions. This
procedure is called in the following Request Redirection.
Beside the basic HTTP revers proxy /cache functions, an edge delivery function
may perform (depending on the collaboration scenario) manifest manipulation
e.g. as specified by SCTE-130 Ad Decision Manager where the decision to insert
ads into the manifest done by the SCT-130 Ad Decision Service. Manifest
Manipulation allows for the creation of custom manifests per content and
client in realtime.
Edge Delivery may provide differentiated media delivery on 3GPP access based
on type of content (live or VOD), streaming connection state, and type of
client device. Edge Delivery is state-full by keeping states on all connected
clients and their state in streaming.
The edge deliver may consider using the path knowledge between Edge Delivery
function and the UE in the transport protocol configuration.
#### 5.1.2.2 Delivery Core function
Delivery Core provides a mid-tier caching level in the CDN. Cache miss at Edge
Delivery is routed to Delivery Core, so that the Origin is shielded. Cache
miss in Delivery Core is routed to Content Origin (local or remote) one.
Routing upstream to Delivery Core or Origin is supported by content aware
Request Routing.
A remote Origin is configured with either origin FQDN or IP address, through
which Delivery Core can fetch the content managed remotely by Content
Provider.
In large CDNs, Delivery Core is required to shield Origin servers, both local
and remote.
Caching at Core Delivery is either on demand or prepositioned. The management
and the content life cycle management of pre-cached assets are handled via the
Manager and Controller.
#### 5.1.2.3 Content Origin function
Origin is the entry point to place content onto the CDN and provides typically
a permanent store for the managed assets of the CDN. It is the central access
point within the CDN. It is responsible for ABR delivery of the content
functioning as HTTP Server with a large file based storage.
VOD, Live-to-VOD and live / Linear assets are stored at Content Origin along
with their metadata (manifests). Live content is placed on Origin for a fairly
short-time. The management and the content life cycle management of assets in
Origin are handled via the Manager and Controller.
Assets at Origin are prepared beforehand and stored in fMP4 files, i.e.
transcoded, packaged in MBR streams for multi-screen video delivery. If
ingested VOD content from CP is in a different format, Origin repackages the
content into fMP4 format. To this end, Just in Time packaging (JITP) might be
used, i.e. packaging is done when clients request the content.
Origin for Server Side Ad Insertion provides manifest manipulation e.g. as
specified in SCTE-130 Ad Decision Manager. This is done for DVR services
particularly for private copy DVR.
#### 5.1.2.4 Content Preparation
##### 5.1.2.4.1 Live Linear Ingest
The main function of Live Linear Ingest is to prepare live streams for ABR
delivery. Those are the Encoder functions.
Ingest -- ingesting live channels including Audio, video, subtitles and
metadata. It supports ingestion of H.264 and H.265 video over IP as well as
other inputs like SDI inputs.
Transcoding -- Perform transcoding from single bit stream (MPEG2, H.264,
H.265) to multiple H.264 or H.265 ABR streams. Currently, H.264 codec is
widely used. However, H.265 is introduced more and more supporting UHD and
offering about double the data compression ratio at the same level of video
quality, or substantially improved video quality at the same bit rate.
Packager -- Perform content packaging for ABR multi-screen delivery. Packager
includes both segmentation and Encryption. Packager segments each bit rate
stream into segments. It also generates the manifest for the live stream. Each
segment is encrypted for DRM with Common Encryption (CENC). The encrypted
content as well as the manifest is pushed to Content Origin.
Packager creates manifests and may also insert Event Signalling and Messaging
(ESAM) or other markers. Packager may work in conjunction with a Placement
Opportunity Information Service (POIS).
##### 5.1.5.4.2 Control
##### 5.1.5.4.2.1 Request Routing {#request-routing .H6}
Request Routing function is responsible for end-user request routing within
the CDN. It is essentially provided by the Request Router or A-DNS depending
on whether it is HTTP based or DNS based request routing.
Request Router is stateless and supports rule-based HTTP redirection with
multiple redirection with multiple features like (Load balancing, node health-
check, Node bandwidth usage, GeoIP policy, Content awareness...).
In simple terms, the client requests content, the request hits first the
Request Router that selects the suitable Edge Delivery for the client and
route the request to it. In addition, Request Routing is used for steering the
internal traffic within CDN and up to the Content origin providing resiliency
and content awareness.
##### 5.1.5.4.2.2 Authoritative DNS {#authoritative-dns .H6}
A-DNS is an authoritative DNS server serving zones with content to Delivery
Edge mappings. This works in tandem with the Request Router in order to fulfil
external DNS resolution requests from the internet.
##### 5.1.5.4.3 VOD ingest
In charge of viewing and controlling the ingestion of VOD assets into the
Content Origin through distribution of individual tasks that detail all the
information associated with a particular asset throughout its processing.
VOD ingest provides service exposure to securely ingest the asset onto Content
Preparation and then into the Content Origin. This operation supports the
direction of the assets to Origin or Edge Delivery. Service Exposure handles
content life cycle management.
Metadata Ingest manages the ingestion of VOD metadata into the CDN.
VOD ingest may provide quality check, transcoding and packaging of VOD
content. VOD content is encrypted for DRM with Common Encryption (CENC). The
encrypted content is pushed to the Content Origin.
##### 5.1.5.4.4 Other files
The content preparation function may also prepare other files like HTML based
metadata and asset descriptions and asset images. These content files may
require dedicated preparation and processing functions.
## 5.2 Identified Issues in Mapping to 5G System
In mapping media distribution services to the 5G system, the following issues
have been identified, for which a set of solutions will be investigated as
part of the present document:
\- Resolving the appropriate / closest-by edge cache: the ability of
supporting edge caches for media services is one of the new functionalities
offered by 5G. There will likely be several edge caches in a 3GPP 5G network,
and it might be desirable to redirect UEs to one of these edge caches, e.g.
based on proximity to the UE or for load balancing or other reasons. Hence the
main question is how to redirect the user to the most appropriate edge cache.
DNS could be used for resolution (assuming a DNS server is present in the 5G
network). However, how long should a DNS entry be valid in this case? It seems
hard to decide on a fixed validity time for a DNS entry, since the validity of
a certain DNS entry may depend on the network the UE is using (3GPP or not)
and on how fast the UE is moving (and hence a new edge cache may become more
appropriate). UE mobility is maintained by the AMF, could the AMF help here?
\- 5G NF service exposure via the NEF: to enable media services, a number of
5G network function services need to be exposed by the NEF. For example, when
new edge caches are deployed or switched off, the corresponding DNS entries to
reach them may need to be updated in the DNS of the 5G network. The NEF will
likely expose a functionality to update the DNS entries. Additional
information that may be exposed is an overview of the available DANEs and
other functions or information relevant for media applications.
\- AF influence traffic routing in the 5G core: one of the new aspects
introduced by the 5G architecture is that AFs have the ability to influence
traffic routing in the 5G core, e.g. based on some application\'s requirement.
How are 3rd parties (e.g. CDNs) envisioned to use this functionality? Is it
useful for media services?
> When SAND [12] is deployed for over-the-top VoD, several gaps can be
> identified for the case when a DANE is managed by a third party. For what
> concerns the interfaces of the DANE to other network elements, the following
> gaps are highlighted:
1) What information does the DANE need to obtain in order to advice/inform the
media clients and how can the information be provided to it, and how should
the information be exposed to the DANE? For example: information on the
bandwidth / latency in the Access Network, Core Network and Data Network
towards the content source (may be origin or cache).
2) How can we ensure that once the DANE has decided e.g. a Shared Resource
Allocation, that the resources are also actually available/reserved for those
clients?
## 5.3 Potential Mapping to 5G System
### 5.3.1 Introduction
In this clause, a set of potential mapping options of existing media
distribution functions to the 5G system are described.
### 5.3.2 PSS Service Mappings
#### 5.3.2.1 Identified PSS Functions
3GPP offers Packet Switched Streaming Services (PSS) as a streaming solution
for mobile devices. It supports RTP-based as well HTTP-based streaming, in
addition to progressive download. These services usually consist of a set of
functions that are composed together to provide the media streaming service.
The following functions can be identified:
\- Streaming server: the server that acts as the origin server for the content
and which serves the content. The server may be a DASH server or an RTSP
server. Alternatively, it could be a regular HTTP server that hosts the media
content for progressive download.
\- Specified Support Functions:
\- Capability exchange: a server that host device profiles and provides access
to device information to the streaming server.
\- QoE reporting server: a server that collects quality of experience
measurements based on a set of QoE metrics that it agrees with the client
through the session setup procedure.
\- A Networked bookmark server: a server that stores bookmarks for specific
content and for a specific user and makes it available across devices.
\- DRM protection: a DRM license server is used to verify eligibility of a
user to consume content and to provide decryption keys in form of a license
for a limited period of time to allow decryption and consumption of the
content.
\- Scene description: an HTML5 document and its related resources are hosted
on an HTTP server to provide access to the content as part of an enriched
scene.
\- Network support: information may be provided by servers in the network to
assist the client in operating the streaming session.
\- Implicit Support Functions:
\- DNS address resolution: a DNS server provides DNS resolution for the
content URL. The resolution may take into account geographic proximity, load,
and other aspects for optimized support.
\- Load balancing: a load balancer may be used to redirect the requests from
the client to the closest and/or least loaded server to improve the quality of
experience.
\- Content distribution: a CDN may be used to scale the distribution of
content to a large number of users.
\- QoS management: the network may gather information about the pending or
ongoing streaming session and allocate resources to the session to meet some
target QoS targets.
Over the top streaming sessions may provide some of these functions through
the network and provide others externally, i.e. outside the mobile operator\'s
network.
#### 5.3.2.2 Mapping to the 5G system
Following the design principles of the 5G system, the aforementioned functions
should be designed according to the service-based design model and to enable
the functions to be virtualized.
The following table provides an initial mapping of the identified functions
and the 5G system functions:
Table 2: Mapping of Media Streaming Functions to 5G system functions
+----------------+----------------+----------------+----------------+ | Media | 5G System | 5G System | Description | | Streaming | Function | Interface to | | | Function | | | | +----------------+----------------+----------------+----------------+ | Streaming | AF | NEF | The streaming | | Server - | | | server may | | | | | reside within | | Control Plane | | | the MNO\'s | | | | | network as a | | | | | dedicated | | | | | application | | | | | function or it | | | | | may reside | | | | | externally and | | | | | interact with | | | | | the network | | | | | through the | | | | | NEF. | +----------------+----------------+----------------+----------------+ | Streaming | AF | UPF | Media data | | Server -- User | | | flows through | | Plane | | | the DN to the | | | | | UPF directly | | | | | or through one | | | | | or more AFs. | | | | | In the latter | | | | | case, the AF | | | | | may act as if | | | | | it were the | | | | | origin server. | +----------------+----------------+----------------+----------------+ | Capability | AF/UDR | | The user data | | exchange | | | repository | | | | | function may | | | | | be used to | | | | | store device | | | | | profiles and | | | | | user | | | | | preferences. | | | | | Alternatively, | | | | | this may be | | | | | performed by | | | | | an AF. | +----------------+----------------+----------------+----------------+ | QoE reporting | AF | | A reporting | | | | | server may be | | | | | implemented as | | | | | an application | | | | | function | | | | | within the | | | | | operator\'s | | | | | network. | +----------------+----------------+----------------+----------------+ | Networked | UDR/AF | | Bookmarks may | | bookmark | | | be stored as | | | | | part of a user | | | | | profile that | | | | | is accessed | | | | | through a | | | | | dedicated | | | | | networked | | | | | bookmark | | | | | application | | | | | function. | +----------------+----------------+----------------+----------------+ | DRM protection | AF/AUSF | | The license | | | | | server will | | | | | usually be | | | | | implemented as | | | | | a dedicated | | | | | application | | | | | function. The | | | | | authentication | | | | | server | | | | | function may | | | | | fulfil this | | | | | functionality | | | | | or support the | | | | | DRM AF. | +----------------+----------------+----------------+----------------+ | Scene | AF | | Scene | | description | | | description | | | | | may be offered | | | | | through an | | | | | HTTP server | | | | | that is | | | | | implemented as | | | | | an AF. | +----------------+----------------+----------------+----------------+ | Network | AF | NSSF | Congestion | | support | | | marking and | | | | | SAND | | | | | functionality | | | | | may be offered | | | | | through an AF | | | | | in concert | | | | | with the | | | | | network slice | | | | | selection | | | | | function. The | | | | | NSSF will | | | | | assign a | | | | | dedicated | | | | | slice that | | | | | understands | | | | | the nature of | | | | | the service | | | | | and offers | | | | | adequate | | | | | network | | | | | support. | +----------------+----------------+----------------+----------------+ | DNS | | NRF | The repository | | | | | function may | | | | | be configured | | | | | to perform | | | | | appropriate | | | | | DNS resolution | | | | | to locate | | | | | media | | | | | resources and | | | | | serve the | | | | | content | | | | | through the | | | | | closest edge | | | | | server. | +----------------+----------------+----------------+----------------+ | Load balancing | | SMF/NRF | Session | | | | | management is | | | | | used to assign | | | | | a session to | | | | | the most | | | | | appropriate | | | | | end point. NRF | | | | | may also be | | | | | used to | | | | | perform load | | | | | balancing. | +----------------+----------------+----------------+----------------+ | Content | AF | | CDN nodes are | | distribution | | | implemented as | | | | | application | | | | | functions that | | | | | operation at | | | | | the | | | | | application | | | | | layer and | | | | | support the | | | | | requested | | | | | protocols | | | | | (e.g. HTTP). | +----------------+----------------+----------------+----------------+ | QoS management | | PCF | The PCF in | | | | | conjunction | | | | | with other | | | | | functions will | | | | | ensure | | | | | appropriate | | | | | QoS allocation | | | | | to the network | | | | | slice that is | | | | | assigned for | | | | | the session. | +----------------+----------------+----------------+----------------+
It is to be noted that the reference points between the stated network
functions will need appropriate adjustments to fulfil the requirements of
media streaming services. These adjustments are subject to further study.
# 6 Mapping of New Media Services and Verticals
## 6.1 Introduction
[TBA]
## 6.2 Media Production
### 6.2.1 Introduction
The 5G System offers content providers a robust, high bitrate, low latency
uplink that can be leveraged to offer a contribution link for user generated
and professional content providers. As part of Release 15, a Framework for
Live Uplink Streaming (FLUS) has been specified to provide a flexible
framework for content providers to stream live content to a FLUS Sink. The
FLUS Sink can be discovered by the content provider based on that Sink\'s
capabilities.
A professional content provider may want to make use of the FLUS framework to
stream content with a high fidelity to the network and instruct the receiving
FLUS Sink to perform initial processing and then stream that content to the
content providers servers or store the content at the Sink for deferred
access.
The content provider acts as a FLUS Source and discovers a FLUS Sink that has
certain capabilities such as:
\- High bandwidth for very high quality video streams
\- Capabilities to recover from losses in the Uplink through support for FEC
and/or QoS
\- Storage capability or capability to stream content live to content
provider\'s network
\- Pre-processing capabilities, e.g. to encrypt content at the Sink
The FLUS Sink can be operated as an Application Function that has the
capabilities to communicate with the PCF to define the QoS policy for the
uplink stream. This AF may be configurable through the NEF and accessible
directly through the Data Network.
The Generic FLUS framework may be appropriate for this scenario, where the
content provider uses the RESTful API to create and manage the FLUS session.
## 6.2.2 FLUS Framework Usage in 5G
### 6.2.2.1 Identified FLUS Functions
The Framework for Live Uplink Streaming (FLUS) is an enabler for live media
streaming from a source entity to a sink entity, which supports an IMS-based
and a non-IMS-based instantiation. The system usually consists of a set of
functions that are composed together to provide the media streaming service.
The following functions can be identified:
\- FLUS Source: The FLUS source receives media content from one or more
capture devices. The capture devices are considered as parts of a UE or are
connected to it.
\- FLUS Sink: When the FLUS sink is located in a UE, the FLUS sink forwards
media content to a decoding and rendering function. When the FLUS sink is
located in the network, the FLUS sink may forward media content to a
processing or distribution sub-function.
\- Specified Support Functions:
\- FLUS control plane: FLUS control plane functionality including the
associated processing by FLUS sink of the uploaded media for subsequent
downstream distribution, and FLUS media instantiation selection.
\- Implicit Support Functions:
\- Rendering: a function that transforms media signals into appropriate
formats that can be displayed or played back, and therefore be watched or
listened by a user, e.g., by taking the direction of user\'s head into
account.
\- Processing: a function that changes the format of media signals for further
transmission or generation of a media signal from multiple input media
streams, e.g., for network based stitching or mixing.
\- Distribution: a function that forwards the media into other network or
devices.
### 6.2.2.2 Mapping to the 5G System
These functions of FLUS functions can be mapped to the 5G system functions as
follows:
Table 3: Mapping of FLUS Media Streaming Functions to 5G system functions
+----------------+----------------+----------------+----------------+ | Media | 5G System | 5G System | Description | | Streaming | Function | Interface to | | | Function | | | | +----------------+----------------+----------------+----------------+ | FLUS Source | UE | UPF | FLUS Source | | | | | may consist of | | | | | a conventional | | | | | UE supporting | | | | | modem | | | | | capability and | | | | | a media | | | | | front-end that | | | | | captures audio | | | | | and video | | | | | signals. The | | | | | media | | | | | front-end, | | | | | such as a 360 | | | | | camera, may be | | | | | physically | | | | | separated to | | | | | UE and | | | | | connected via | | | | | interfaces | | | | | that are out | | | | | of the scope | | | | | of 3GPP. | +----------------+----------------+----------------+----------------+ | FLUS Sink | UE | UPF | FLUS Sink | | | | | resides in a | | | | | conventional | | | | | UE that | | | | | supports | | | | | connectivity | | | | | and a media | | | | | front-end for | | | | | rendering and | | | | | playback. The | | | | | media | | | | | front-end, may | | | | | be a head | | | | | mounted | | | | | display, that | | | | | is physically | | | | | separate but | | | | | connected to | | | | | the UE via | | | | | interfaces | | | | | that are out | | | | | of the scope | | | | | of 3GPP. | +----------------+----------------+----------------+----------------+ | | AF | NEF | FLUS Sink in | | | | | network may | | | | | forward media | | | | | content to a | | | | | Processing and | | | | | Distribution | | | | | functions. | +----------------+----------------+----------------+----------------+ | FLUS Control | UE | IMS | FLUS control | | | | | is used to | | | | | establish and | | | | | control the | | | | | FLUS session | | | | | between FLUS | | | | | Source and | | | | | FLUS Sink. | | | | | | | | | | When the FLUS | | | | | Sink is a UE, | | | | | the control | | | | | happens | | | | | through the | | | | | IMS Core. | +----------------+----------------+----------------+----------------+ | | AF | PCF | A FLUS Sink in | | | | | the network | | | | | may connect to | | | | | the PCF to | | | | | assign | | | | | appropriate | | | | | QoS allocation | | | | | to the FLUS | | | | | session. | +----------------+----------------+----------------+----------------+ | Rendering | UE | | Media signals | | | | | may be | | | | | rendered at a | | | | | UE or a media | | | | | front-end | | | | | connected to | | | | | the UE via | | | | | interfaces | | | | | that are out | | | | | of the scope | | | | | of 3GPP. | +----------------+----------------+----------------+----------------+ | Processing | AF | NEF (optional) | An application | | | | | function (AF) | | | | | that offers to | | | | | host different | | | | | types of media | | | | | processing, | | | | | e.g. VR | | | | | stitching, | | | | | transcoding, | | | | | or | | | | | re-formatting | | | | | the video or | | | | | audio. | | | | | | | | | | The processing | | | | | may optionally | | | | | be exposed | | | | | through the | | | | | NEF, if the | | | | | service | | | | | provider is a | | | | | 3^rd^ party. | +----------------+----------------+----------------+----------------+ | Distribution | AF | NEF (optional) | An application | | | | | function (AF) | | | | | facilitating | | | | | the | | | | | distribution | | | | | of the FLUS | | | | | media, e.g. | | | | | through the | | | | | PSS or MBMS or | | | | | to external | | | | | sources. | | | | | | | | | | The | | | | | distribution | | | | | may optionally | | | | | be exposed | | | | | through the | | | | | NEF, if the | | | | | service | | | | | provider is a | | | | | 3^rd^ party. | +----------------+----------------+----------------+----------------+
## 6.3 AR and XR Services -- Use Cases and Context
### 6.3.1 Service Description
Augmented and Extended Reality is expected to grow significantly over the next
few years, based on different market studies. Many use cases and applications
are expected to be wireless on mobile and portable devices (including new form
factors such as AR glasses) requiring many different enablers that play
together to create immersive services and experiences. This includes, but is
not limited to:
  * highest visual quality in order provide realistic presentation in mixtures of real world and extended realities
  * highest sound quality in order provide in mixtures and interaction of real world and virtual sounds
  * intuitive and seamless interaction with real and virtual objects for a full immersive experience
Whereas AR and XR are expected to share certain requirements with Virtual
Reality as discussed in TR26.918 [X], especially eXtended reality (XR) is
considered an umbrella of VR and AR use cases, enabling seamless integration
of different worlds as shown in Figure 13.
Figure 1 From VR and AR to Extended reality (XR)
Use cases for extended reality include entertainment, infotainment, education,
healthcare, industrial use cases, etc. Also, in the SMARTER TR 22.891 [X], six
use cases discuss Augmented Reality at least as being a part of the
considerations. Also it is expected that extended realities will be more and
more supported by new form factors such as AR glasses with a multitude of
sensors, trackers, cameras, and microphones, as shown for example in Figure
14.
{width="6.561805555555556in" height="2.623611111111111in"}
Figure 2 Glance of a first responder glass
A substantial difference of XR to VR as studied in TR26.918 [X] is the
addition of significant uplink traffic, potentially associated with very low
latency requirements.
### 6.3.2 Potential Issues on AR/XR/VR (new)
While the growth perspectives are huge, studying the relevancy of
interoperability enablers for such new services requires detailed
understanding of use cases and requirements to address these issues. It also
requires understanding how emerging 5G core network and radio technologies can
successfully contribute to AR and XR services, for example to support latency
and/or bitrate requirements. Before initiating detailed normative work a
detailed analysis of use cases, requirements and especially the interop points
for are relevant. In particular, the following aspects should be considered:
  * Analysing the different technologies and equipment in place that > provide a Extended Reality experiences.
  * Collecting the associated use cases and identifying the 3GPP > service(s) they map to
  * Analysing and identifying the media formats (including audio and > video), interfaces and delivery procedures between client and > server required to offer such an experience
  * Identifying relevant client and network architectures and APIs that > support AR and XR use cases
  * Collecting key performance indicators for relevant AR and XR > services and the applied technology components.
  * Conducting subjective tests to estimate the audio and video formats > and encoding parameters required for ensuring the quality of > experience as considered necessary
  * Studying the processing requirements (both audio and video) and > associated issues such as spatial resolutions, frame rate, latency > and accuracy of field of "view" rotation.
  * Collecting information on market and standardization status and > communication with relevant 3GPP groups and external organizations
  * Drawing conclusions on the potential needs for standardization in > 3GPP.
It is considered important that 3GPP initiates a study on this matter.
### 6.3.3 Key Issue and Recommendations
Based on discussion in clause 6.3, it is proposed that 5G Media addresses
different device APIs:
\- APIs that enable access to functions that are defined by 3GPP and are
device internal.
\- APIs that enable to abstract complex 3GPP network functions with abstracted
APIs that can be accessed by third-party applications.
It is also recommended that 3GPP devices in 5G media provide a consistent
support for capability discovery. Suitable options may be:
\- Media Profile capability API as defined in clause 7.3.2.1.
\- ISO BMFF API as defined in clause 7.3.2.2.
Media Capability API work in 3GPP should be followed. Also, any work on MIME
parameters extensions may be considered if progressed.
Selection and profiling of the APIs that are needed to support immersive media
on the UE will be needed. In particular, the group needs to study requirements
on the UE to support the following functionalities:
  * Graphics processing APIs for processing and rendering media
  * Any potential new or updated Codec requirements to support immersive media
  * New media types such as Meshes and Point Clouds
  * Study different Scene Graph solutions as a potential addition to scene description in 3GPP
# 7 API Aspects
## 7.1 Introduction
[TBA]
## 7.2 Use Cases
### 7.2.1 Introduction
This clause documents a few use cases relevant for media distribution in the
context of 5G that are relevant for Device API aspects.
### 7.2.2 OTT Service Provider
An OTT service provider wants to distribute content to mobile devices. For
this purpose, it develops an application, but for optimized performance the
application wants to use broadly available capabilities on mobile phones. In
particular, the OTT service provider wants to deploy only a single content
encoding library. The OTT service provider reads the 3GPP user service
specifications and is interested in reusing:
\- the codecs that seem to be broadly available on devices and well tested,
but is unclear how to use and access the codecs defined in 3GPP
specifications.
\- A DASH client as it offers the service as DASH content library.
The content provider is unclear how he can develop applications for Android
and iOS reusing the above 3GPP device capabilities.
### 7.2.3 Browser-based consumption
In an extension to the use case above, the service provider does not want to
rely on user installing app, and wants to make sure that the content plays
back also on browsers. For this, it develops a progressive web application,
but wants to use also use the same content library. The content provider is
unclear how he can develop progressive web applications for browser to reuse
3GPP device capabilities.
### 7.2.4 Ad Insertion
In an extension to the use cases above, the content provider wants to do
targeted and personalized ad insertion. The service provider has a library of
content, but the ads are provided through a different library, typically
encoded with different codecs and formats, despite these codecs and formats
are also included in the 3GPP device capabilities.
The content provider is unclear how he can ensure that ad insertion with
different codecs works to it satisfaction.
### 7.2.5 Live Services
The service provider uses now the 3GPP codecs, but for certain live services
the latency of the content distribution is too high. The service provider
wants to use network functionalities to improve the latency of Live streaming
services without changing the streaming protocol. The service should be
available on different platforms including Android, iOS and web browsers.
### 7.2.6 VR Services
The service provider now introduces VR Service distribution. In order to
enable access and playback of the content, the app developer needs the
following functions, either from the service platform with proper APIs, or
integrated into the app:
\- A DASH client, unless the DASH client is part of the application, (type 3),
possibly with configuration APIs to supported optimized playback and
rendering.
\- OMAF metadata functionality to parse and extract the relevant information
or at the minimum to instruct playback in the media pipeline.
\- File format parsing functionality for video playback.
\- Decryption module, if the content is encrypted.
\- HEVC video decoder to decode the video content.
\- Secure rendering and GPU functionalities to generate viewports.
\- Sensors for viewport tracking.
\- Generally, the content provider prefers to use HW supported functionalities
to optimize speed, latency, power consumptions and overall performance. Each
of those above functions may be accessed with APIs.
## 7.3 Interoperability Considerations
### 7.3.1 Background
Whereas 3GPP services typically address interoperability on network
interfaces, in nowadays media architectures the protocols and formats are
typically decoupled. Figure 2 provides a basic idea on the OTT application.
Content conforms such that it can be played back on the 3GPP device. The app
uses instructions to download and access the content and controls the
presentation.
Figure 8: OTT application using 3GPP capabilities
An interop specification may primarily deal with the capability requirements
of 3GPP Conforming Device that is used by an OTT application using well
defined APIs in order to playback 3GPP Conforming content. The APIs may be
abstract in order to support different application and device interface
models. The media APIs also differentiate between devices supporting different
playback variants, primarily \"type 1\" and \"type 3\":
\- Type 1 Playback: The 3GPP device receives a manifest and downloads and
plays back the contained media based on the information in the manifest. An
OTT application may control the playback with limited control features.
\- Type 3 Playback: The OTT application receives a manifest, downloads the
media and uses media APIs in order to playback individual tracks of the media
experience. The application is controls of the download and playback of the
media using the well-defined track buffers.
The two models are shown in Figure 10 and Figure 9, respectively.
Figure 9: Type 3 type device
Figure 10: Abstracted device model for type 1
Initially focusing on type 3 playback, the application has access to the
streaming manifest and parses and processes the manifest. Based on the
information in the manifest, the application makes use of two primary high-
level APIs:
\- The control API: This API is primarily responsible for capability discovery
of the device platform, establishing and tearing down track buffers for
specific codecs, as well as to control the playback of media through track
buffer controls.
\- The media API: this API consists of one or multiple track buffers where the
track buffers can be dynamically established and removed. The track buffers
enable playback of content by the device platform.
It is expected that the application deals with manifest updates as well as
with providing/downloading the segments that are then provided using the media
APIs to the device platform for playback.
For 3GPP, the definition of such APIs as well as the necessary capability
exchange and so on would be beneficial, in an abstract manner. Important
instantiation would be:
\- HTML-5 Media APIs: https://www.w3.org/TR/html51/semantics-embedded-
content.html#the-media-elements
\- Android Framework APIs:
http://developer.android.com/reference/android/media/MediaCodec.html
In addition, such an application may be embedded into a framework of network
and device APIs as shown in Figure 5. The application may use proprietary
protocols and functions to connect and communicate with the app server. The
application may also use device internal APIs that abstract functionalities
that are provided by network functions on the device. Finally the application
may define well defined 3GPP codecs and local functions. Whereas many of the
orange parts already exist and are documented in 3GPP specs, the green parts
require new work and the blue parts are assumed out of scope.
Figure 11: Network and Device APIs
### 7.3.2 Potential Solutions for Capability Discovery
#### 7.3.2.1 Media Profile
The application uses the media profile for capability discovery. The media
profile may be provided in the manifest or the 3G-FF/CMAF/ISO BMFF Header in
the ftyp box. The application queries the device of the media profile that can
be played back using the MIME Type parameter as defined in IETF RFC 4337 [7]
and the profile sub-mime parameter as defined in RFC 6381 [8].
\/mp4 profile=\"\\"
The device may provide one of the following answers:
\- Yes: If yes is provided, then the playback requirements for this media
profile as documented in the present document are expected to be fulfilled.
\- No: If no is provided, then the playback of the media profile is not
supported by the device and the application will not playback this media
profile.
\- unknown: In this case the application should find other options to identify
if the media profile can be played back.
Note that the media profile does not support the configuration signalling and
requires an additional capability mechanism on which configuration is
preferably used.
#### 7.3.2.2 3G-FF/ISO BMFF/DASH/CMAF Header/Initialization Segment
In this case an API between the app and the platform exists, such that the
application queries the device if the content described in the 3G-FF/ISO
BMFF/DASH/CMAF Header/Initialization Segment header can be played back. This
has the advantages of being complete, accurate, future-proof, but the drawback
of not being human readable and possibly requires transmitting more
information than the other approaches.
Again, the device may provide one of the following answers:
\- Yes: If yes is provided, then the playback requirements for this media
profile as documented in the present document are expected to be fulfilled.
\- No: If no is provided, then the playback of the media profile is not
supported by the device and the application will not playback this media
profile.
\- unknown: In this case the application should find other options to identify
if the media profile can be played back
If a no or an unknown is provided, the response should provide an indication
based on what feature the device rejected the playback.
#### 7.3.2.3 MIME Sub-parameters
This option consists in using one or more MIME sub-parameters to describe the
different required capabilities (pre-decoding, decoding, and post-decoding).
It is the mostly used options today because it has the advantages of enabling
a progressive, detailed, compact and almost human readable signalling.
Post-decoding requirements are indicated in the ISO base media file format
with restricted schemes. For example, the \'resv\' sample entry type can be
used for video tracks that require certain post-decoding operations.
Similarly, pre-decoding requirements are indicated in the ISO base media file
format with the protected scheme.
In this case, the application uses the detailed MIME type string as defined in
RFC 6381 [8] for the communication with the device platform. The application
queries the device of the media profile can be played back using:
\- \/mp4 mime-subparameters
The device may provide one of the following answers:
\- Yes: If yes is provided, then the playback requirements for this media
profile as documented in the present document are expected to be fulfilled.
\- No: If no is provided, then the playback of the media profile is not
supported by the device and the application will not playback this media
profile.
\- unknown: In this case the application should find other options to identify
if the media profile can be played back
If a no or an unknown is provided, the response should provide an indication
based on what feature the device rejected the playback.
#### 7.3.2.4 Media Capabilities
Aligned with the Media Capabilities API (https://wicg.github.io/media-
capabilities/), an APIs exposing information about the decoding and encoding
capabilities of a device platform for a given format, but also output
capabilities of the current device to find the best match based on the
device\'s display may be used. The application would query a vector of
capabilities and if all required capabilities are supported, then the playback
may be initiated.
#### 7.3.2.5 Device Capability -- Persistent Item Solution
Another approach is to standardized device capabilities in a known format for
storage by the manufacturer and recall in some manner available to the
application. The preferred approach uses standardizes key-value pairs for
relevant player characteristics that can be communicated to servers via
JavaScript APIs or Objects. One proposal is to use the HTTP User Agent String
as described in HbbTV [4], clause 7.3.2.4. However, this approach is
considered problematic in terms of scalability and was therefore dispensed
during the development of the present document.
#### 7.3.2.6 Playback Capabilities
3GPP may define a dedicated capability code for the platform that matches
against the full requirements in the present document. While such an approach
may provide the most stringent interoperability, at the same time adding yet
another option to the already complex world of capability signalling was
dispensed during the development of the present document.
#### 7.3.2.7 MBMS Feature Tags
MBMS feature tags as defined in clause 11.9 of TS 26.346 [5] may be used. In
this case the MBMS client would, based on the information on the USD, query
the media platform on the support for features included in the feature tags.
#### 7.3.2.8 PSS Capability Exchange
PSS has defined a capability exchange framework (UAProf) in clause 5.2.3.3 of
TS 26.234 [6] that allows the PSS server to identify the client device and
then download a device capability profile that is associated with that device.
The profile document may be extended with additional capabilities either
permanently or during the session setup.
## 7.4 Key Issue and Recommendations
Based on discussion in clause 7.2 and 7.3, it is proposed that 5G Media
addresses different device APIs:
\- APIs that enable access to functions that are defined by 3GPP and are
device internal.
\- APIs that enable to abstract complex 3GPP network functions with abstracted
APIs that can be accessed by third-party applications.
It is also recommended that 3GPP devices in 5G media provide a consistent
support for capability discovery. Suitable options may be:
\- Media Profile capability API as defined in clause 7.3.2.1.
\- ISO BMFF API as defined in clause 7.3.2.2.
Media Capability API work in 3GPP should be followed. Also, any work on MIME
parameters extensions may be considered if progressed.
# 8 External Interface Aspects
## 8.1 Introduction
[TBA]
## 8.2 Interface to OTT Service Provider
To address the gaps identified in clause 5.2 on OTT SAND deployments, it may
be desirable to enable mechanisms that expose real-time network information
from the operator network to an OTT DANE. As one potential solution to realize
this goal, ETSI MEC APIs 009 - 011 can be considered. An OTT DANE may then use
the real-time network information towards deriving the relevant SAND PER
messages, as defined in 3GPP TS 26.247 [12].
# 9 Conclusions
Based on discussion in clause 7, it is proposed that for 5G Media different
device APIs are considered:
\- APIs that enable access to functions that are defined by 3GPP and are
device internal.
\- APIs that enable to abstract complex 3GPP network functions with abstracted
APIs that can be accessed by third-party applications.
It is also recommended that 3GPP devices in 5G media provide a consistent
support for capability discovery of 3GPP defined functionalities on the device
using common capability discovery API as defined in Android or Browser
environments. The capability aspects include codecs, formats, protocols,
rendering capabilities and other aspects that are specified by 3GPP terminal
capabilities.
\
###### ### Annex A: \
[TBA]
#