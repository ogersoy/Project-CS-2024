# Foreword
This Technical Specification has been produced by the 3^rd^ Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document provides the protocol details for telepresence using the
IP Multimedia (IM) Core Network (CN) subsystem based on the Session Initiation
Protocol (SIP), the Session Description Protocol (SDP), the Binary Floor
Control Protocol (BFCP) and the ControLling mUltiple streams for tElepresence
(CLUE) controlling multiple streams for telepresence based on service
requirements.
The present document addresses the areas of describing and negotiating IM
session with multiple media streams based on the IM CN subsystem, including
point to point calls as specified in 3GPP TS 24.229 [2] and multiparty
conferences as specified in 3GPP TS 24.147 [3], to facilitate the support of
telepresence.
The functionalities for conference policy control and the signalling between a
MRFC and a MRFP are not specified in this document.
Where possible, the present document specifies the requirements for this
protocol by reference to specifications produced by the IETF within the scope
of SIP, SDP, CLUE and BFCP, either directly, or as modified by 3GPP TS 24.229
[2].
The present document is applicable to Application Servers (ASs), Multimedia
Resource Function Controllers (MRFCs), Multimedia Resource Function Processors
(MRFP) and User Equipment (UE) providing IM session supporting telepresence
capabilities.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 24.229: \"Internet Protocol (IP) multimedia call control protocol
based on Session Initiation Protocol (SIP) and Session Description Protocol
(SDP); Stage 3\".
[3] 3GPP TS 24.147: \"Conferencing using the IP Multimedia (IM) Core Network
(CN) subsystem; Stage 3\".
[4] IETF RFC 8845 (January 2021): \"Framework for Telepresence Multi-
Streams\".
[5] IETF RFC 8850 (January 2021): \"Controlling Multiple Streams for
Telepresence (CLUE) Protocol Data Channel\".
[6] IETF RFC 8848 (January 2021): \" Session Signaling for Controlling
Multiple Streams for Telepresence (CLUE)\".
[7] IETF RFC 8841 (January 2021): \"Session Description Protocol (SDP)
Offer/Answer Procedures for Stream Control Transmission Protocol (SCTP) over
Datagram Transport Layer Security (DTLS) Transport\".
[8] IETF RFC 3264 (June 2002): \"An Offer/Answer Model with Session
Description Protocol (SDP)\".
[9] IETF RFC 8846 (January 2021): \"An XML Schema for the Controlling Multiple
Streams for Telepresence (CLUE) Data Model\".
[10] 3GPP TS 23.218: \"IP Multimedia (IM) session handling; IM call model;
Stage 2\".
[11] IETF RFC 8842 (January 2021): \"Session Description Protocol (SDP)
Offer/Answer Considerations for Datagram Transport Layer Security (DTLS) and
Transport Layer Security (TLS)\".
# 3 Definitions, symbols and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
3GPP TR 21.905 [1] and the following apply. A term defined in the present
document takes precedence over the definition of the same term, if any, in
3GPP TR 21.905 [1].
_**IM session:** An IP multimedia (IM) session is a set of multimedia senders
and receivers and the data streams flowing from senders to receivers. IP
multimedia sessions are supported by the IP multimedia CN Subsystem and are
enabled by IP connectivity bearers (e.g. GPRS as a bearer). A user may invoke
concurrent IP multimedia sessions._
_**Telepresence:** A conference with interactive audio-visual communications
experience between remote locations, where the users enjoy a strong sense of
realism and presence between all participants by optimizing a variety of
attributes such as audio and video quality, eye contact, body language,
spatial audio, coordinated environments and natural image size._
## 3.2 Symbols
## 3.3 Abbreviations
For the purposes of the present document, the abbreviations given in 3GPP TR
21.905 [1] and the following apply. An abbreviation defined in the present
document takes precedence over the definition of the same abbreviation, if
any, in 3GPP TR 21.905 [1].
AS Application Server
BFCP Binary Floor Control Protocol
CLUE ControLling mUltiple streams for tElepresence
DTLS Datagram Transport Layer Security
IMS IP Multimedia CN subsystem
MCC Multiple Content Capture
MRF Multimedia Resource Function
MRFC Multimedia Resource Function Controller
MRFP Multimedia Resource Function Processor
SCTP Stream Control Transmission Protocol
SDP Session Description Protocol
SIP Session Initiation Protocol
TP TelePresence
TP UE TelePresence User Equipment
UE User Equipment
# 4 Telepresence overview
## 4.1 General
As an architectural framework for provision of IP multimedia services, IMS is
capable of delivering various service functionalities and easing to integrate
with new kinds of application, such as telepresence. Compared to traditional
video conference, telepresence is a communication system with multiple
cameras, microphones and screens that has the characteristics of gaze
direction, eye contact, spatial audio and scaling images to true size, which
in all to achieve the immersive \"being there\" experience for participants.
IMS is using the IETF defined session control mechanism with the inherited
capability to negotiate multiple multimedia streams in one single session,
which could be applied as a basis for supporting telepresence in IMS that
always has the necessity of producing and rendering various media streams with
high qualities among the involved parties, even in the point to point case.
Based on the existing procedures as specified in 3GPP TS 24.229 [2] and 3GPP
TS 24.147 [3], this specification introduces updates and enhancements for IMS
by incorporating CLUE with SIP, SDP and BFCP to facilitate controlling
multiple spatially related media streams in an IM session supporting
telepresence.
To provide a \"being there\" experience for conversational audio and video
session between remote locations, a variety of information needs to be
coordinated, such as:
\- audio and video spatial information;
\- information to enable eye contact, gaze awareness, body language and
natural image size; and
\- information to coordinate the environments;
## 4.2 Spatial information
A spatial relationship is representative of the arrangement in space of two or
more objects in the same capture scene, in contrast to retain in time or other
relationships. It involves mainly both video and audio sources in telepresence
conferencing system.
For video, a spatial description of source video images sent in video streams,
which includes the order of images in the actual captured scene and may be in
two or three dimensions, enables a reproduction of the original scene at the
receiver side. For audio, a spatial description of source audio including the
point of capture, line of capture and capture sensitivity pattern (i.e. omni,
shotgun, cardioid, hyper-cardioid) enable a reproduction at the receiver side
in a spatially correct manner. Spatial matching may also be needed between
audio and video streams coming from a specific party.
When advertising video and audio media captures in an IM session supporting
telepresence, a TP UE as well as a TP enabled conference focus sends spatial
information, e.g. physical dimensions of the capture area for each video
capture, and associated audio captures spatial information. This allows the
receiving party to coordinate the capture scenarios and perform a proper
rendering. Consider a TP UE of a typical triple-screen/camera system as
example, of which each camera can provide one video capture for each 1/3
section of the room. Each capture has spatial information to indicate the
scope of view, where a capture showing a zoomed out view of the whole room has
the spatial information indicating a full global view.
## 4.3 Media information
The media information is enhanced in an IM session supporting telepresence by
introducing the source components of the media capture, e.g. the original
media captures like a camera or a composed media captures indicating a mix of
audio streams, a composed or switched media capture indicating the dynamic or
most appropriate subset of a \"whole\".
The enhanced media information enables a sender to describe the sources and a
receiver to choose which it wants to see. Taking the above example in
subclause 4.2, the TP UE can further provide a single capture representing the
active speaker based on voice activity detection, and a single capture
representing the active speaker with the other two captures composed as a
picture in picture. The media information can be used to distinguish the media
captures from each other.
Further media information may also be needed, such as simultaneity
constraints. For example, a room camera have two options which are zoomed-in
view and zoomed-out view, but there is no way to get them simultaneously.
## 4.4 Meeting description
Meeting description includes view information, language information, person
information and type, as described below which enable the receivers to choose
and render different captures.
\- View information: indicates a physical or logical region as captured;
\- Language information: used in case of multi-lingual and/or accessible
conferences;
\- Person information: provides specific information about people
participating within a multi-media conference; and
\- Person type: indicates the type of people participating within a multi-
media conference with respect to the meeting agenda.
In addition, there may be some descriptive information which contains a
relative priority between different captures, embedded textual information, or
additional complementary information.
## 4.5 Presentation
Presentation indicates resource sharing from one or more specific devices,
including slides, video, data and etc. Presentations may have unfixed sources,
which varies in placement and can be seen by all the involved parties.
## 4.6 Information usage
The information detailed above may be used to obtain a better experience
during an IM session between involved parties with different capabilities,
such as different number of devices, different picture aspect ratios, or
different number of media streams for sending and receiving.
The usage of the information depends on the application scenarios. The TP UE
described in the example of subclause 4.2 can provide at least 6 video
captures, the message for negotiation therefore needs to contain enough
parameters to describe the characteristics of each capture in order to allow
the receiving party to clearly differentiate the captures and provide a proper
rendering, e.g. spatial view, media composition, person information and type,
and etc.
Protocols adopted for IM session supporting telepresence, which exchanges
above information among involved parties, enables interoperability by handling
multiple streams in standardized way.
# 5 Protocol using SIP for telepresence
## 5.1 Introduction
SIP, as specified in 3GPP TS 24.229 [2] and 3GPP TS 24.147 [3], is used as the
basic session control protocol to create an IM session supporting
telepresence.
The usage of SIP for the point to point call supporting telepresence is
following the procedures as specified in 3GPP TS 24.229 [2]. The usage of SIP
for the multiparty conference supporting telepresence is following the
procedures as specified in 3GPP TS 24.147 [3].
To support an IM session supporting telepresence, a \"+sip.clue\" Contact
header field parameter is defined in clause 3 of IETF RFC 8848 [6].
## 5.2 Functional entities
### 5.2.1 User Equipment (UE)
For the purpose of IM session supporting telepresence, the TP UE shall
implement the role of a participant in both point to point call and multiparty
conference as described in subclause 5.3.1.
### 5.2.2 Media Resource Function Controller (MRFC)
For the purpose of IM session supporting telepresence, the MRFC shall support
the procedures as described in subclause 5.2.2 of 3GPP TS 24.147 [3].
### 5.2.3 Conferencing Application Server (Conferencing AS)
For the purpose of IM session supporting telepresence, the TP enabled
conferencing AS shall implement the role of a conference focus, as described
in subclause 5.3.2.
## 5.3 Role
### 5.3.1 Participant
During registration the TP UE follows the procedures specified in subclause
5.1.1 of 3GPP TS 24.229 [2] as a basis, and it shall include a \"+sip.clue\"
Contact header field parameter in the SIP REGISTER request.
To establish an IM session supporting telepresence, the TP UE shall use the
procedures as specified in subclause 5.1 of 3GPP TS 24.229 [2] for point to
point call, and follow the conference procedures as specified in subclause
5.3.1 of 3GPP TS 24.147 [3] for multiparty conference, in both the TP UE shall
include a \"+sip.clue\" Contact header field parameter in the SIP INVITE and
SIP UPDATE requests and responses.
### 5.3.2 Conference Focus
The TP conference focus follows the procedures specified in subclause 5.3.2 of
3GPP TS 24.147 [3] appropriate to the functional entity in which the
conference focus is implemented.
The TP conference focus shall include the \"+sip.clue\" Contact header field
parameter when generating a SIP request or response for the establishment of
an IM conference supporting telepesence.
# 6 Protocol using SDP for telepresence
## 6.1 Introduction
SDP, as specified in 3GPP TS 24.229 [2] and 3GPP TS 24.147 [3], is used to
establish multimedia streams in an IM session supporting telepresence.
In an IM session supporting telepresence, each party in the session usually
sends and receives multiple multimedia streams, which may not be symmetric due
to their different capabilities for media production and rendering.
## 6.2 Functional entities
### 6.2.1 User Equipment (UE)
For the purpose of IM session supporting telepresence, the TP UE shall
implement the role of a participant in both point to point call and multiparty
conference as described in subclause 6.3.1.
### 6.2.2 Media Resource Function Controller (MRFC)
For the purpose of IM session supporting telepresence, the MRFC shall support
the procedures described in subclause 6.2.2 of 3GPP TS 24.147 [3].
### 6.2.3 Conferencing Application Server (Conferencing AS)
For the purpose of IM session supporting telepresence, the TP enabled
conferencing AS shall act as a conference focus, as described in subclause
6.3.2. The TP conferencing AS may implement the role of a conference
participant as described in subclause 6.3.1.
## 6.3 Roles
### 6.3.1 Participant
#### 6.3.1.1 General
In addition to the procedures specified in subclause 6.3.1, the TP UE shall
support the point to point call procedures specified in subclause 6.1 of 3GPP
TS 24.229 [2], and the TP UE shall support the conference procedures specified
in subclause 6.3.1 of 3GPP TS 24.147 [3] appropriate to the functional entity
in which the participant is implemented for multiparty conference.
#### 6.3.1.2 Initiation of IM session supporting telepresence
##### 6.3.1.2.1 Origination procedures
To initiate an IM session supporting telepresence, the TP UE shall:
1) generate an SDP offer in the SIP request, containing basic media streams
and an establishment request for a DTLS/SCTP association used to realize a
CLUE data channel. The initial SDP offer message negotiates the port and
transport information for setting up the DTLS/SCTP association, via a separate
SDP \"m=\" line with a UDP/DTLS/SCTP or TCP/DTLS/SCTP proto value, together
with an SDP \"tls-id\" attribute, an SDP \"sctp-port\" attribute, an SDP
\"max-message-size\" attribute, and an SDP \"dcmap\" attribute to indicate
\"CLUE\" as the application protocol running over the data channel. The
procedures for establishment of the DTLS/SCTP association via SDP can be found
in IETF RFC 8841 [7], IETF RFC 8842 [11] and IETF RFC 8850 [5].
2) set up the DTLS/SCTP association used for a CLUE data channel with the
remote party, after receiving the SDP answer with information for CLUE data
channel establishment (e.g. an SDP \"m=\" line together with the SDP \"tls-
id\", \"sctp-port\" and \"max-message-size\" attributes to describe a
DTLS/SCTP association indicating the use of a data channel).
NOTE 1: If the TP UE receives the SIP response without a \"+sip.clue\" Contact
header field parameter, which means the remote party does not support CLUE
protocol, or if the TP UE receives the SDP answer without the support
information for DTLS/SCTP establishment (e.g. by setting the port number to
zero in the \"m=\" line describing a DTLS/SCTP association used to realize the
CLUE data channel), which means the remote party does not support the
DTLS/SCTP association to establish a CLUE data channel, then the session shall
fall back to a normal IM session.
NOTE 2: In the point to point cases, the TP UE can initiate CLUE negotiation
via the first SDP offer/answer when establishing an IM session or via the
update SDP offer/answer during an ongoing IM session depending on local
configuration.
NOTE 3: If the SDP \"max-message-size\" attribute contains a maximum message
size value of zero, it indicates the SCTP endpoint will handle messages of any
size, subject to memory capacity etc. If the SDP \"max-message-size\"
attribute is not present, the default value is 64K. Different attribute values
can be used in each direction.
As defined in IETF RFC 8848 [6] and IETF RFC 8850 [5], only a single CLUE data
channel is established within the same IM session supporting telepresence.
Once the CLUE data channel is connected, the TP UE shall trigger an updated
SDP offer/answer exchange to set up media streams for transmission of the
media captures as negotiated in subclause 7.3. When constructing the SDP offer
in both of point to point call and multiparty conference, the TP UE shall:
1) add a corresponding \"m=\" line for each encoding defined in CLUE messages,
using an associated \"label\" attribute for each \"m=\" line to identify the
each encoding in CLUE messages. In addition, mark the \"m=\" line(s) as send
only with an \"a=sendonly\" attribute or as inactive with an \"a=inactive\"
attribute used to represent the sender's encode ability and policies; and
2) use an SDP \"group\" session-level attribute to signal that the \"m=\"
line(s) are CLUE-controlled.
When the SDP offer is sent, the following SDP negotiation procedures shall
follow normal rules as defined in IETF RFC 3264 [8].
In the conference case, if a TP UE acting as a conference participant joins in
the conference, the TP UE shall follow the above steps to set up an IM session
supporting telepresence.
##### 6.3.1.2.2 Termination procedures
When receiving a SIP request to initiate an IM session supporting
telepresence, the TP UE shall:
1) send an SDP answer with information for CLUE data channel establishment
(e.g. an SDP \"m=\" line with a UDP/DTLS/SCTP or TCP/DTLS/SCTP proto value,
together with an SDP \"sctp-port\" attributan SDP \"tls-id\" attribute
according to procedures defined in IETF RFC 8842 [11], e, and an SDP \"dcmap\"
attributan SDP \"max-message-size\" attribute, e to indicate \"CLUE\" as the
application protocol running over the data channel), if telepresence is
supported for the session, i.e. by including a \"+sip.clue\" Contact header
field parameter in the SIP response.
NOTE: If the receiving UE does 1not support DTLS/SCTP for the request, it
shall reject the request for DTLS/SCTP establishment (e.g. by setting the port
number to zero in the \"m=\" line describing the DTLS/SCTP association used to
realize to the CLUE data channel). The session shall then proceed as a normal
IM session.
Once the CLUE data channel NOTE 2: If the SDP \"max-message-size\" attribute
contains a maximum message size value of zero, it indicates the SCTP endpoint
will handle messages of any size, subject to memory capacity etc. If the SDP
\"max-message-size\" attribute is not present, the default value is 64K.
Different attribute values can be used in each direction.
is connected, the TP UE shall perform the updated SDP offer/answer exchange to
set up media streams for transmission of the media captures as negotiated in
subclause 7.3.
In the conference case, when the TP UE acting as a conference participant
responds to a request to join in the conference, it also shall follow the
above steps to complete an IM session supporting telepresence.
#### 6.3.1.3 Session update
When an ongoing IM session supporting telepresence is updated, interaction of
CLUE protocol and SDP negotiations shall be performed according to clause 5 in
IETF RFC 8848 [6].
The update of an ongoing IM session supporting telepresence may result in a
session fallback to a normal IM session, by disabling CLUE according to
subclause 4.5.4.3 in IETF RFC 8848 [6].
#### 6.3.1.4 End of IM session supporting telepresence
To release an existing IM session supporting telepresence, the TP UE shall
generate a SIP BYE request for the session in accordance to the procedures
described in 3GPP TS 24.229 [2].
To cancel an IM session supporting telepresence currently being established,
the TP UE shall send a SIP CANCEL request to end the session.
### 6.3.2 Conference Focus
#### 6.3.2.1 General
In addition to the procedures specified in subclause 6.3.2, the conference
focus shall support the procedures specified in subclause 6.3.2 of 3GPP TS
24.147 [3] appropriate to the functional entity in which the conference focus
is implemented.
#### 6.3.2.2 Initiation of IM session supporting telepresence
##### 6.3.2.2.1 Origination procedures
The TP enabled conference focus shall follow the procedures as described in
subclause 6.3.1 to initiate an IM conference supporting telepresence.
Once CLUE data channels between the TP enabled conference focus and TP UEs are
connected, the TP enabled conference focus shall:
1) trigger an updated SDP offer/answer exchange to set up media streams for
transmission of the media captures between individual TP UE and the TP enabled
conference focus based on the received CLUE CONFIGURE messages; and
2) follow the procedures with TP UEs as described in subclause 6.3.1.2.
##### 6.3.2.2.2 Termination procedures
In the conference case, when the TP UE acting as a conference participant
requests to join in the conference, the TP enabled conference focus shall
follow the steps related to CLUE data channel establishment as described in
subclause 6.3.1.3, to complete an IM session supporting telepresence among the
other conference participants.
#### 6.3.2.3 Session update
The conference focus may initiate an update to the ongoing IM session
supporting telepresence as specified in subclause 6.3.1.3.
When the conference focus receives an update message to the ongoing IM session
supporting telepresence, the conference focus shall:
1) finalize the CLUE exchange and possible update of SDP offer/answer
according to clause 5 in IETF RFC 8848 [6]; and
2) if session update is needed between the TP enabled conference focus and
other participants in the same conference, the TP enabled conference focus
shall initiate the update procedures accordingly.
#### 6.3.2.4 End of IM session supporting telepresence
The TP enabled conference focus shall use the procedures as specified in
subclause 6.3.1.4 to end up an IM session supporting telepresence. The TP
enabled conference focus may trigger the procedures upon receiving a REFER
request to remove a conference participant from the ongoing IM conference
supporting telepresence.
When the TP enabled conference focus is aware that a participant has left an
IM conference supporting telepresence, the TP enabled conference focus shall
terminate the session with the leaving participant following the procedure
specified in subclause 5.3.2.6 of 3GPP TS 24.147 [3], and then:
1) initiate session update to remove media streams to those participants who
have configured media information from the leaving participant; and
2) send CLUE ADVERTISEMENT messages to notify the remaining participants of
the latest available media captures as described in subclause 7.3.1.2.
# 7 Protocol using CLUE for telepresence
## 7.1 Introduction
CLUE, as specified in IETF RFC 8845 [4], is used to advertise and configure
audio and video components comprising the media flows in an IM session
supporting telepresence.
A data channel for CLUE message, as defined in IETF RFC 8850 [5], is
negotiated via the first INVITE message when creating an IM session supporting
telepresence. With the establishment of that channel, the participants have
consented to use the CLUE protocol mechanisms to determine the capabilities of
the each of the endpoints with respect to multiple streams support. The
following exchange of CLUE messages of each participant\'s \"advertisement\"
and \"configure\" is to achieve a common view of media components sent and
received in the IM session supporting telepresence. A corresponding SDP
offer/answer may be needed to establish the media streams based on the user\'s
choice in CLUE messages.
## 7.2 Functional entities
### 7.2.1 User Equipment (UE)
The TP UE shall support both of the two roles in CLUE protocol, i.e. media
provider and media consumer, as described in subclauses 7.3.1 and 7.3.2.
Typically a TP UE acts as both media provider and media consumer in an IM
session supporting telepresence. However, a TP UE may only act as a media
provider if it only sends media streams but not to receive, or it may only act
as a media consumer if it only receive media streams.
### 7.2.2 Media Resource Function (MRF)
An MRF is split into the two functional entities, i.e. Multimedia Resource
Function Controller (MRFC) and Multimedia Resource Function Processor (MRFP),
as specified in clause 8 of 3GPP TS 23.218 [10].
The two functional entities in an IM session supporting telepresence, as part
of the TP enabled conference focus, together with a Conferencing AS shall
support both of the two roles in CLUE protocol, i.e. media provider and media
consumer, as specified in IETF RFC 8845 [4].
### 7.2.3 Conferencing Application Server (Conferencing AS)
A Conferencing AS as part of the TP enabled conference focus, together with an
MRF, shall support both of the two roles in CLUE protocol, i.e. media provider
and media consumer, as specified in IETF RFC 8845 [4].
NOTE: This document only considers the support of CLUE where the AS and the
MRF are collocated.
## 7.3 Roles
### 7.3.1 Media provider
#### 7.3.1.1 General
As specified in IETF RFC 8845 [4], a media provider representing an entity
that intends to send CLUE-controlled media streams, shall send CLUE
ADVERTISEMENT message to describe the content of the media and the media
streams encodings via encoding groups and individual encodings as specified in
clause 9 of IETF RFC 8845 [4]. A TP UE or a TP enabled conference focus acting
as a media provider shall send CLUE ADVERTISEMENT message and receive the
corresponding CLUE CONFIGURE message from the remote party. The detailed
information and format of CLUE messages can be found in IETF RFC 8846 [9].
#### 7.3.1.2 Media capture advertisement
##### 7.3.1.2.0 General
Once the CLUE data channel is connected during an IM session supporting
telepresence, the TP UE, or the TP enabled conference focus, acting as a media
provider shall send a CLUE ADVERTISEMENT message with multiple media captures
related to the video and audio content it can provide, and carry the
identities of these media captures together with information elements to
describe characteristics (see clause 4) of these media captures including
video capture spatial information in order to allow the remote party to select
the source(s) it wants to consume, according to IETF RFC 8845 [4].
The media provider may send a new CLUE ADVERTISEMENT message to update the
media captures anytime during the ongoing session, as specified in IETF RFC
8845 [4]. In the conference case, the TP enabled conference focus acting as a
media provider may further construct a new CLUE ADVERTISEMENT message to a TP
UE in the conference based on the media capture information received from the
other TP UEs.
When the media provider receives the CLUE CONFIGURE message, the media
provider shall trigger an updated SDP offer to establish the media streams
based on the latest received CLUE CONFIGURE message as described in subclause
6.3.1.
##### 7.3.1.2.1 Multiple content switching and composition
To provide media switching or composition for multiple contents with respect
to time and space during an IM session supporting telepresence, the acting
media provider, either the TP UE or the TP enabled conference focus, shall
include one or more Multiple Content Capture (MCC) that is composed of
multiple individual captures in the CLUE ADVERTISEMENT message, as defined in
subclause 7.2 of IETF RFC 8845 [4].
##### 7.3.1.2.2 Presentation Initiation
To create a presentation during an IM session supporting telepresence, the TP
UE or the TP enabled conference focus, acting as a media provider, shall set
the presentation attribute (see subclause 4.5) on one or more media captures
in the CLUE ADVERTISEMENT message, as defined in subclause 7.1.1. 7 of IETF
RFC 8845 [4].
When receiving the CLUE CONFIGURE message with presentation media captures,
the TP UE shall trigger an updated SDP offer as described in subclause 6.3.1
to establish the media stream.
### 7.3.2 Media consumer
#### 7.3.2.1 General
As specified in IETF RFC 8845 [4], a media consumer representing an entity
that intends to receive CLUE-controlled media streams, shall send CLUE
CONFIGURE message to specify the content and media streams it wants to
receive. A TP UE and a TP enabled conference focus acting as a media consumer
shall send CLUE CONFIGURE message to select the media captures based on the
latest received CLUE ADVERTISEMENT message. The detailed information and
format of CLUE messages can be found in IETF RFC 8846 [9].
#### 7.3.2.2 Media capture configuration
##### 7.3.2.2.0 General
Once the CLUE data channel is connected in both point to point cases and
conference cases, the TP UE acting as a media consumer shall:
1) be prepared to receive a CLUE ADVERTISEMENT message from a remote party;
2) select the media captures it wants to receive based on the information
elements of the media captures in the received CLUE ADVERTISEMENT message; and
3) send the selected media captures within a CLUE CONFIGURE message to the
remote party.
In the conference case, the TP enabled conference focus shall select the media
captures based on the CLUE CONFIGURE messages received from other TP UEs.
##### 7.3.2.2.1 Multiple content switching and composition
The TP UE or the TP enabled conference focus, acting as a media consumer, may
choose to have a switching or composed media by using of Multiple Content
Capture (MCC) via CLUE exchange as defined in subclause 7.2 of IETF RFC 8845
[4].
> EXAMPLE: A TP UE of a typical triple-screen/camera system can produce a
> composed capture representing the active speaker with the other two captures
> shown picture in picture, containing attributes to indicate the maximum
> number of individual captures and their relative positions in a composed
> image.
##### 7.3.2.2.2 Presentation selection
The TP UE or the TP enabled conference focus, acting as a media consumer, may
select a media capture with the attribute of presentation via CLUE exchange as
defined in subclause 7.1.1. 7 of IETF RFC 8845 [4].
# 8 Protocol for floor control for telepresence
## 8.1 Introduction
BFCP, as specified in 3GPP TS 24.147 [3], is used to offer floor control of
shared resources in an IM session supporting telepresence.
There is no special enhancement to BFCP in this document to support an IM
session supporting telepresence.
###### ## Annex A (informative): Example signalling flows
# A.1 Scope of signalling flows
This annex gives examples of signalling flows for an IM session supporting
telepresence based on the Session Initiation Protocol (SIP), SIP Events, the
Session Description Protocol (SDP) and the CLUE protocol.
These signalling flows provide detailed flows, which expand on the overview
conference information flows provided in 3GPP TS 24.147 [3].
These signalling flows are simplified in that they do not show the
interactions between Intermediate IMS networks, nor the interactions between
the AS and MRF.
# A.2 Key required to interpret signalling flows
The key to interpret signalling flows follows the description as specified in
annex A of 3GPP TS 24.147 [3].
# A.3 Flows demonstrating the creation of an IM conference supporting
telepresence
## A.3.1 Introduction
Clause A.3 covers the signalling flows that show how an IM conference
supporting telepresence is established in different scenarios.
## A.3.2 User creating an IM conference supporting telepresence
Figure A.3.2-1: User creating an IM conference supporting telepresence
Figure A.3.2-1 shows a user creating an IM conference supporting telepresence
by incorporating CLUE with the basic IMS SIP/SDP mechanism.
NOTE 1: In this example call flows, the CLUE data channel is established after
when the SIP 200 OK is received by UE#1, but it can be started earlier if
needed by the implementation.
The details of the flows are as follows:
1\. **SIP INVITE request (UE#1 to Intermediate IMS) -- see example in table
A.3.2-1**
Based on the IMS conference procedures as specified in subclause A.3.2.1 of
3GPP TS 24.147 [3], UE#1 initiates the SIP INVITE request message with a
\"+sip.clue\" Contact header field parameter which indicates the UE supports
CLUE protocol, the message further comprises a basic media session and a
request for a CLUE data channel (via an SDP \"m=\" line indicating a
UDP/DTLS/SCTP association, together with SDP \"sctp-port\" attribute
indicating the use of data channel, SDP \"max-message-size\" attribute
indicating the maximum SCTP user message size that the UE#1 is willing to
receive, and an SDP \"dcmap\" attribute to indicate \"CLUE\" as the
application protocol running over the data channel), to create an IM
conference supporting telepresence.
The SIP INVITE request is forwarded to Intermediate IMS.
Table A.3.2-1: SIP INVITE request (UE#1 to Intermediate IMS)
> INVITE sip:conference-factory1\@mrf1.home1.net SIP/2.0
>
> Via: SIP/2.0/UDP
> [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7
>
> Max-Forwards: 70
>
> Route: \,
> \
>
> P-Preferred-Identity: \"John Doe\" \
>
> P-Access-Network-Info: 3GPP-UTRAN-TDD; utran-cell-id-3gpp=234151D0FCE11
>
> Privacy: none
>
> From: \; tag=171828
>
> To: \
>
> Call-ID: cb03a0s09a2sdfglkj490333
>
> Cseq: 127 INVITE
>
> Require: sec-agree
>
> Proxy-Require: sec-agree
>
> Supported: precondition, 100rel, gruu, 199
>
> Security-Verify: ipsec-3gpp; q=0.1; alg=hmac-sha-1-96; spi-c=98765432;
> spi-s=87654321; port-c=8642; port-s=7531
>
> Contact:
> \;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6;comp=sigcomp;+sip.clue
>
> Allow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER, MESSAGE, SUBSCRIBE,
> NOTIFY
>
> Accept: application/sdp, application/3gpp-ims+xml
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 2987933615 2987933615 IN IP6 5555::aaa:bbb:ccc:ddd
>
> s=-
>
> c=IN IP6 5555::aaa:bbb:ccc:ddd
>
> t=0 0
>
> a=group CLUE 3
>
> m=video 3400 RTP/AVP 98 99
>
> b=AS:75
>
> a=curr:qos local none
>
> a=curr:qos remote none
>
> a=des:qos mandatory local sendrecv
>
> a=des:qos none remote sendrecv
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99:MPVMP4V-ES
>
> a=mid:1
>
> m=audio 3456 RTP/AVP 97 96
>
> b=AS:25.4
>
> a=curr:qos local none
>
> a=curr:qos remote none
>
> a=des:qos mandatory local sendrecv
>
> a=des:qos none remote sendrecv
>
> a=rtpmap:97 AMR
>
> a=fmtp:97 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:96 telephone-event
>
> a=maxtime:20
>
> a=mid:2
>
> m=application 54111 UDP/DTLS/SCTP webrtc-datachannel
>
> a=curr:qos local none
>
> a=curr:qos remote none
>
> a=des:qos mandatory local sendrecv
>
> a=des:qos none remote sendrecv
>
> a=tls-id:abc3de65cddef001be82
>
> a=max-message-size: 100000
>
> a=sctp-port: 5000
>
> a=setup:actpass
>
> a=connection:new
>
> a=fingerprint:SHA-1 \
>
> 4A:AD:B9:B1:3F:82:18:3B:54:02:12:DF:3E:5D:49:6B:19:E5:7C:AB
>
> a=dcmap:2 subprotocol=\"CLUE\"
>
> a=mid:3
**Contact:** contains the \"+sip.clue\" Contact header field parameter.
2\. **SIP 100 (Trying) response (Intermediate IMS to UE#1)**
Intermediate IMS responds to the SIP INVITE request (1) with a 100 (Trying)
provisional response.
3\. **SIP INVITE request (Intermediate IMS to MRF/AS)**
Intermediate IMS forwards the SIP INVITE request to the MRF/AS.
4\. SIP 100 **(Trying) response (MRF/AS to Intermediate IMS)**
The MRF/AS responds to the SIP INVITE request (3) with a 100 (Trying)
provisional response.
> 5\. **Allocate Conference URI**
The MRF/AS allocates a conference URI for the request, based on local
information and information gained from the conference-factory URI, as well as
information gained from other elements of the SIP signalling.
6\. **SIP 183 (Session Progress) response (MRF/AS to Intermediate IMS) \-- see
example in table A.3.2-2**
The MRF determines the set of codecs that it is capable of supporting for this
conference. It determines the intersection with those appearing in the SDP in
the SIP INVITE request.
The MRF determines the TP UE\'s support of telepresence by receiving the
\"+sip.clue\" Contact header field parameter of the SIP INVITE request, and it
also includes the same parameter in the response message. The media stream
capabilities of the destination as well as the connection information for a
CLUE data channel are returned in a SIP 183 (Session Progress) provisional
response and finally forwarded to UE#1.
Table A.3.2-2: SIP 183 (Session Progress) response (MRF/AS to Intermediate
IMS)
> SIP/2.0 183 Session Progress
>
> Via: SIP/2.0/UDP scscf1.home1.net;branch=z9hG4bK332b23.1, SIP/2.0/UDP
> pcscf1.visited1.net;branch=z9hG4bK240f34.1, SIP/2.0/UDP
> [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7
>
> Record-Route: \, \
>
> P-Asserted-Identity: \"Conference Server\" \
>
> P-Charging-Vector: icid-value=\"AyretyU0dm+6O2IrT5tAFrbHLso=023551024\";
> orig-ioi=home1.net; term-ioi=home1.net
>
> P-Charging-Function-Addresses: ccf=[5555::b99:c88:d77:e66];
> ccf=[5555::a55:b44:c33:d22]; ecf=[5555::1ff:2ee:3dd:4cc];
> ecf=[5555::6aa:7bb:8cc:9dd]
>
> Privacy: none
>
> From:
>
> To: \; tag=314159
>
> Call-ID:
>
> CSeq:
>
> Require: precondition, 100rel
>
> Contact: \;isfocus;+sip.clue
>
> Allow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER, MESSAGE, SUBSCRIBE,
> NOTIFY, PUBLISH
>
> RSeq: 9021
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 2987933623 2987933623 IN IP6 5555::aaa:bbb:ccc:ddd
>
> s=-
>
> c=IN IP6 5555::eee:fff:aaa:bbb
>
> t=0 0
>
> a=group CLUE 3
>
> m=video 10001 RTP/AVP 98 99
>
> b=AS:75
>
> a=curr:qos local none
>
> a=curr:qos remote none
>
> a=des:qos mandatory local sendrecv
>
> a=des:qos mandatory remote sendrecv
>
> a=conf:qos remote sendrecv
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
>
> a=mid:1
>
> m=audio 6544 RTP/AVP 97 96
>
> b=AS:25.4
>
> a=curr:qos local none
>
> a=curr:qos remote none
>
> a=des:qos mandatory local sendrecv
>
> a=des:qos mandatory remote sendrecv
>
> a=conf:qos remote sendrecv
>
> a=rtpmap:97 AMR
>
> a=fmtp:97 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:96 telephone-event
>
> a=maxptime:20
>
> a=mid:2
>
> m=application 62442 UDP/DTLS/SCTP webrtc-datachannel
>
> a=curr:qos local none
>
> a=curr:qos remote none
>
> a=des:qos mandatory local sendrecv
>
> a=des:qos mandatory remote sendrecv
>
> a=conf:qos remote sendrecv
>
> a=tls-id:dbc8de77cddef001be90
>
> a= max-message-size: 100000
>
> a=sctp-port: 5100
>
> a=setup:passive
>
> a=connection:new
>
> a=fingerprint:SHA-1 \
>
> AA:6F:C8:3F:37:78:7A:BE:A6:BE:2C:51:26:16:3F:D3:1E:DD:AD:32
>
> a=dcmap:2 subprotocol=\"CLUE\"
>
> a=mid:3
**Contact:** contains the \"+sip.clue\" Contact header field parameter.
7\. **Authorize QoS Resources**
Intermediate IMS node authorizes the resources necessary for this session. The
approval of QoS commitment either happens at this stage or after the 200 (OK)
response of SIP INVITE request (26) and SIP INVITE request (34) based on
operator local policy.
8\. **SIP 183 (Session Progress) response (Intermediate IMS to UE#1)**
Intermediate IMS forwards the SIP 183 (Session Progress) response to the
originating UE#1.
9\. **Resource reservation**
The originating UE#1 sets up the bearer in accordance with the media
description received SDP.
10 - 22. **Set up of basic media session**
The basic media session is processed as per the procedures defined in
subclause A.3.2.1 of 3GPP TS 24.147 [3].
23\. **CLUE channel establishment**
With the negotiated connection information in SDP, UE#1 and MRF establishes
the CLUE data channel between them.
24-25. **CLUE ADVERTISEMENT request (between UE#1 and MRF)**
UE#1 and MRF exchange their respective CLUE ADVERTISEMENT messages, each of
which contains the available media captures and information elements such as
spatial views, media switching, media compositions, and encodings to
facilitate capture selection and rendering.
26\. **SIP re-INVITE request (UE#1 to Intermediate IMS) --see example in table
A.3.2-3**
UE#1 initiates the SIP re-INVITE request adding new multiple media streams
with spatial views that are negotiated via a CLUE data channel.
For this example, it is assumed that UE#1 is a typical triple-screen/camera
system which can produce three video media streams.
> The SIP re-INVITE request is forwarded to Intermediate IMS.
Table A.3.2-3: SIP re-INVITE request (UE#1 to Intermediate IMS)
> INVITE sip:lmaa234269\@mrf1.home1.net;gr SIP/2.0
>
> Via: SIP/2.0/UDP
> [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7
>
> Max-Forwards: 70
>
> Route: \,
> \
>
> P-Preferred-Identity: \"John Doe\" \
>
> P-Access-Network-Info: 3GPP-UTRAN-TDD; utran-cell-id-3gpp=234151D0FCE11
>
> Privacy: none
>
> From: \; tag=171828
>
> To: \
>
> Call-ID: cb03a0s09a2sdfglkj490333
>
> Cseq: 127 INVITE
>
> Require: sec-agree
>
> Proxy-Require: sec-agree
>
> Supported: precondition, 100rel, gruu, 199
>
> Security-Verify: ipsec-3gpp; q=0.1; alg=hmac-sha-1-96; spi-c=98765432;
> spi-s=87654321; port-c=8642; port-s=7531
>
> Contact:
> \;gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6;comp=sigcomp;+sip.clue
>
> Allow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER, MESSAGE, SUBSCRIBE,
> NOTIFY
>
> Accept: application/sdp, application/3gpp-ims+xml
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 2987933615 2987933615 IN IP6 5555::aaa:bbb:ccc:ddd
>
> s=-
>
> c=IN IP6 5555::aaa:bbb:ccc:ddd
>
> t=0 0
>
> a=group CLUE 3 4 5 6 7
>
> m=video 3400 RTP/AVP 98 99
>
> b=AS:75
>
> a=curr:qos local none
>
> a=curr:qos remote none
>
> a=des:qos mandatory local sendrecv
>
> a=des:qos none remote sendrecv
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99:MPVMP4V-ES
>
> a=mid:1
>
> m=audio 3456 RTP/AVP 97 96
>
> b=AS:25.4
>
> a=curr:qos local none
>
> a=curr:qos remote none
>
> a=des:qos mandatory local sendrecv
>
> a=des:qos none remote sendrecv
>
> a=rtpmap:97 AMR
>
> a=fmtp:97 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:96 telephone-event
>
> a=maxptime:20
>
> a=mid:2
>
> m=application 54111 UDP/DTLS/SCTP webrtc-datachannel
>
> a=curr:qos local none
>
> a=curr:qos remote none
>
> a=des:qos mandatory local sendrecv
>
> a=des:qos none remote sendrecv
>
> a=tls-id:abc3de65cddef001be82
>
> a=max-message-size: 100000
>
> a=sctp-port: 5000
>
> a=setup:actpass
>
> a=connection:existing
>
> a=fingerprint:SHA-1 \
>
> 4A:AD:B9:B1:3F:82:18:3B:54:02:12:DF:3E:5D:49:6B:19:E5:7C:AB
>
> a=dcmap:2 subprotocol=\"CLUE\"
>
> a=mid:3
>
> m=video 3402 RTP/AVP 98 99
>
> b=AS:75
>
> a=curr:qos local none
>
> a=curr:qos remote none
>
> a=des:qos mandatory local send
>
> a=des:qos none remote recv
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99:MPVMP4V-ES
>
> a=label:enc1
>
> a=sendonly
>
> a=mid:4
>
> m=video 3404 RTP/AVP 98 99
>
> b=AS:75
>
> a=curr:qos local none
>
> a=curr:qos remote none
>
> a=des:qos mandatory local send
>
> a=des:qos none remote recv
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99:MPVMP4V-ES
>
> a=label:enc2
>
> a=sendonly
>
> a=mid:5
>
> m=video 3406 RTP/AVP 98 99
>
> b=AS:75
>
> a=curr:qos local none
>
> a=curr:qos remote none
>
> a=des:qos mandatory local send
>
> a=des:qos none remote recv
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99:MPVMP4V-ES
>
> a=label:enc3
>
> a=sendonly
>
> a=mid:6
>
> m=audio 3458 RTP/AVP 97 96
>
> b=AS:25.4
>
> a=curr:qos local none
>
> a=curr:qos remote none
>
> a=des:qos mandatory local send
>
> a=des:qos none remote recv
>
> a=rtpmap:97 AMR
>
> a=fmtp:97 mode-set=0,2,5,7; max-change-period=2
>
> a=rtpmap:96 telephone-event
>
> a=maxtime:20
>
> a=label:enc4
>
> a=sendonly
>
> a=mid:7
**Contact:** contains the \"+sip.clue\" Contact header field parameter.
27\. **SIP re-INVITE request (Intermediate IMS to MRF/AS)**
Intermediate IMS forwards the SIP re-INVITE request to MRF/AS.
28\. **CLUE CONFIGURE response (MRF to UE#1)**
The MRF sends a CLUE CONFIGURE message containing the selected media captures
based on the latest received CLUE ADVERTISEMENT message and the SDP offer
associated with the advertised media captures in SIP re-INVITE request.
NOTE 2: When having multiple users in the same meeting, the MRF can also
exchange the CLUE messages with other TP UEs based on reception of the CLUE
messages and the SDP offer/answer associated with the CLUE messages from UE#1.
29\. **SIP 200 (OK) response (MRF/AS to Intermediate IMS) -- see example in
table A.3.2-4**
After the success modification of the session, the MRF/AS sends a SIP 200 (OK)
final response to the SIP re-INVITE request (27) to Intermediate IMS based on
the selected media captures in a CLUE CONFIGURE message.
Table A.3.2-4: SIP 200 (OK) response (MRF/AS to Intermediate IMS)
> SIP/2.0 200 OK
>
> Via: SIP/2.0/UDP scscf1.home1.net;branch=z9hG4bK332b23.1, SIP/2.0/UDP
> pcscf1.visited1.net;branch=z9hG4bK240f34.1, SIP/2.0/UDP
> [5555::aaa:bbb:ccc:ddd]:1357;comp=sigcomp;branch=z9hG4bKnashds7
>
> Record-Route: \, \
>
> From:
>
> To:
>
> Call-ID:
>
> CSeq: 127 INVITE
>
> Contact: \;isfocus;+sip.clue
>
> Allow-Events: conference, pending-additions
>
> Content-Length: (...)
>
> v=0
>
> o=- 2987933623 2987933623 IN IP6 5555::aaa:bbb:ccc:ddd
>
> s=-
>
> c=IN IP6 5555::eee:fff:aaa:bbb
>
> t=0 0
>
> a=group CLUE 3 4 5 6 7
>
> m=video 10001 RTP/AVP 98 99
>
> b=AS:75
>
> a=curr:qos local none
>
> a=curr:qos remote none
>
> a=des:qos mandatory local sendrecv
>
> a=des:qos mandatory remote sendrecv
>
> a=conf:qos remote sendrecv
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
>
> a=mid:1
>
> m=audio 6544 RTP/AVP 97 96
>
> b=AS:25.4
>
> a=curr:qos local none
>
> a=curr:qos remote none
>
> a=des:qos mandatory local sendrecv
>
> a=des:qos mandatory remote sendrecv
>
> a=conf:qos remote sendrecv
>
> a=rtpmap:97 AMR
>
> a=fmtp:97 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:96 telephone-event
>
> a=maxptime:20
>
> a=mid:2
>
> m=application 62442 UDP/DTLS/SCTP webrtc-datachannel
>
> a=curr:qos local none
>
> a=curr:qos remote none
>
> a=des:qos mandatory local sendrecv
>
> a=des:qos mandatory remote sendrecv
>
> a=conf:qos remote sendrecv
>
> a=connection:new
>
> a=tls-id:dbc8de77cddef001be90
>
> a=max-message-size: 100000
>
> a=sctp-port: 5100
>
> a=setup:active
>
> a=connection:existing
>
> a=fingerprint:SHA-1 \
>
> AA:6F:C8:3F:37:78:7A:BE:A6:BE:2C:51:26:16:3F:D3:1E:DD:AD:32
>
> a=dcmap:2 subprotocol=\"CLUE\"
>
> a=mid:3
>
> m=video 10003 RTP/AVP 98 99
>
> b=AS:75
>
> a=curr:qos local none
>
> a=curr:qos remote none
>
> a=des:qos mandatory local recv
>
> a=des:qos none remote send
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99:MPVMP4V-ES
>
> a=label:enc1
>
> a=recvonly
>
> a=mid:4
>
> m=video 10005 RTP/AVP 98 99
>
> b=AS:75
>
> a=curr:qos local none
>
> a=curr:qos remote none
>
> a=des:qos mandatory local recv
>
> a=des:qos none remote send
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99:MPVMP4V-ES
>
> a=label:enc2
>
> a=recvonly
>
> a=mid:5
>
> m=video 10007 RTP/AVP 98 99
>
> b=AS:75
>
> a=curr:qos local none
>
> a=curr:qos remote none
>
> a=des:qos mandatory local recv
>
> a=des:qos none remote send
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99:MPVMP4V-ES
>
> a=label:enc3
>
> a=recvonly
>
> a=mid:6
>
> m=audio 6546 RTP/AVP 97 96
>
> b=AS:25.4
>
> a=curr:qos local none
>
> a=curr:qos remote none
>
> a=des:qos mandatory local recv
>
> a=des:qos mandatory remote send
>
> a=conf:qos remote sendrecv
>
> a=rtpmap:97 AMR
>
> a=fmtp:97 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:96 telephone-event
>
> a=maxptime:20
>
> a=label:enc4
>
> a=recvonly
>
> a=mid:7
**Contact:** contains the \"+sip.clue\" Contact header field parameter.
NOTE 3: SDP lines \"a=label:enc1\", \"a=label:enc2\", \"a=label:enc3\" and
\"a=label:enc4\" can be omitted since \"m=recvonly\" lines don\'t need to have
a label, as only \"m=sendonly\" lines are referenced by CLUE protocol
messages.
30\. **SIP 200 (OK) response (Intermediate IMS to UE#1)**
Intermediate IMS forwards the SIP 200 (OK) response to UE#1.
> 31-32.**ACK request (UE#1 to Intermediate IMS, till MRF/AS)**
UE#1 responding to the SIP 200 (OK) response (33) sends a SIP ACK request to
Intermediate IMS and till UE#1 as specified in sublcause A.3.2 of 3GPP TS
24.147 [3]. Accordingly, the UE#1 starts to send the media streams which are
configured by MRF/AS via the exchange of CLUE messages.
33\. **SIP re-INVITE request (MRF/AS to Intermediate IMS) --see example in
table A.3.2-5**
MRF/AS sends the SIP re-INVITE request adding new multiple media streams with
spatial views that are negotiated via a CLUE data channel.
For this example, it is assumed that MRF/AS can send two media streams based
on the negotiation of media captures via the exchange of CLUE messages.
> The SIP re-INVITE request is forwarded to Intermediate IMS.
Table A.3.2-5: SIP re-INVITE request (MRF/AS to Intermediate IMS)
> INVITE sip:user1_public1\@home2.net SIP/2.0
>
> Via: SIP/2.0/UDP mrf1.home1.net;branch=z9hG4bK23273846
>
> Max-Forwards: 70
>
> P-Charging-Vector: ####
>
> Privacy: none
>
> From: \;tag=171828
>
> To: \
>
> Call-ID: cb03a0s09a2sdfglkj490333
>
> Cseq: 127 INVITE
>
> Supported: precondition, 100rel
>
> Contact: \;isfocus;+sip.clue
>
> Allow: INVITE, ACK, CANCEL, BYE, PRACK, UPDATE, REFER, MESSAGE, SUBSCRIBE,
> NOTIFY, PUBLISH
>
> Allow-Events: conference, pending-additions
>
> Content-Type: application/sdp
>
> Content-Length: (...)
>
> v=0
>
> o=- 2987933623 2987933623 IN IP6 5555::aaa:bbb:ccc:ddd
>
> s=-
>
> c=IN IP6 5555::eee:fff:aaa:bbb
>
> t=0 0
>
> a=group CLUE 3 4 5 6 7 8 9 10
>
> m=video 10001 RTP/AVP 98 99
>
> b=AS:75
>
> a=curr:qos local none
>
> a=curr:qos remote none
>
> a=des:qos mandatory local sendrecv
>
> a=des:qos mandatory remote sendrecv
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99 MP4V-ES
>
> a=mid:1
>
> m=audio 6544 RTP/AVP 97 96
>
> b=AS:25.4
>
> a=curr:qos local none
>
> a=curr:qos remote none
>
> a=des:qos mandatory local sendrecv
>
> a=des:qos mandatory remote sendrecv
>
> a=rtpmap:97 AMR
>
> a=fmtp:97 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:96 telephone-event
>
> a=maxptime:20
>
> a=mid:2
>
> m=application 62442 UDP/DTLS/SCTP webrtc-datachannel
>
> a=curr:qos local none
>
> a=curr:qos remote none
>
> a=des:qos mandatory local sendrecv
>
> a=des:qos mandatory remote sendrecv
>
> a=setup:passive
>
> a=connection:new
>
> a=tls-id:dbc8de77cddef001be90
>
> a=max-message-size: 100000
>
> a=sctp-port: 5100
>
> a=connection:existing
>
> a=fingerprint:SHA-1 \
>
> AA:6F:C8:3F:37:78:7A:BE:A6:BE:2C:51:26:16:3F:D3:1E:DD:AD:32
>
> a=dcmap:2 subprotocol=\"CLUE\"
>
> a=mid:3
>
> m=video 10003 RTP/AVP 98 99
>
> b=AS:75
>
> a=curr:qos local none
>
> a=curr:qos remote none
>
> a=des:qos mandatory local recv
>
> a=des:qos none remote send
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99:MPVMP4V-ES
>
> a=label:enc1
>
> a=recvonly
>
> a=mid:4
>
> m=video 10005 RTP/AVP 98 99
>
> b=AS:75
>
> a=curr:qos local none
>
> a=curr:qos remote none
>
> a=des:qos mandatory local recv
>
> a=des:qos none remote send
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99:MPVMP4V-ES
>
> a=label:enc2
>
> a=recvonly
>
> a=mid:5
>
> m=video 10007 RTP/AVP 98 99
>
> b=AS:75
>
> a=curr:qos local none
>
> a=curr:qos remote none
>
> a=des:qos mandatory local recv
>
> a=des:qos none remote send
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99:MPVMP4V-ES
>
> a=label:enc3
>
> a=recvonly
>
> a=mid:6
>
> m=audio 6546 RTP/AVP 97 96
>
> b=AS:25.4
>
> a=curr:qos local none
>
> a=curr:qos remote none
>
> a=des:qos mandatory local recv
>
> a=des:qos mandatory remote send
>
> a=conf:qos remote sendrecv
>
> a=rtpmap:97 AMR
>
> a=fmtp:97 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:96 telephone-event
>
> a=maxptime:20
>
> a=label:enc4
>
> a=recvonly
>
> a=mid:7
>
> m=video 10009 RTP/AVP 98 99
>
> b=AS:75
>
> a=curr:qos local none
>
> a=curr:qos remote none
>
> a=des:qos mandatory local send
>
> a=des:qos none remote recv
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99:MPVMP4V-ES
>
> a=label:enc5
>
> a=sendonly
>
> a=mid:8
>
> m=video 10011 RTP/AVP 98 99
>
> b=AS:75
>
> a=curr:qos local none
>
> a=curr:qos remote none
>
> a=des:qos mandatory local send
>
> a=des:qos none remote recv
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99:MPVMP4V-ES
>
> a=label:enc6
>
> a=sendonly
>
> a=mid:9
>
> m=audio 6548 RTP/AVP 97 96
>
> b=AS:25.4
>
> a=curr:qos local none
>
> a=curr:qos remote none
>
> a=des:qos mandatory local send
>
> a=des:qos mandatory remote recv
>
> a=conf:qos remote sendrecv
>
> a=rtpmap:97 AMR
>
> a=fmtp:97 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:96 telephone-event
>
> a=maxptime:20
>
> a=label:enc7
>
> a=sendonly
>
> a=mid:10
**Contact:** contains the \"+sip.clue\" Contact header field parameter.
NOTE 4: SDP lines \"a=label:enc1\", \"a=label:enc2\", \"a=label:enc3\" and
\"a=label:enc4\" can be omitted since \"m=recvonly\" lines don\'t need to have
a label, as only \"m=sendonly\" lines are referenced by CLUE protocol
messages.
34\. **SIP re-INVITE request (Intermediate IMS to UE#1)**
The SIP re-INVITE request is forwarded to UE#1.
35\. **CLUE CONFIGURE response (UE#1 to MRF)**
UE#1 sends a CLUE CONFIGURE message containing the selected media captures
based on the latest received CLUE ADVERTISEMENTmessage and the SDP offer
associated with the advertised media captures in SIP re-INVITE request.
NOTE 5: When having multiple users in the same meeting, the MRF can also
exchange the CLUE messages with other TP UEs based on reception of the CLUE
messages and the SDP offer/answer associated with the CLUE messages from UE#1.
36\. **SIP 200 (OK) response (UE#1 to Intermediate IMS) -- see example in
table A.3.2-6**
After the success modification of the session, UE#1 sends a SIP 200 (OK) final
response to the SIP re-INVITE request (34) to Intermediate IMS based on the
selected media captures in a CLUE CONFIGURE message. UE#1 further deactivates
non-CLUE-controlled media streams according to subclause 4.5.4.1 of IETF RFC
8848 [6].
Table A.3.2-6: SIP 200 (OK) response (UE#1 to Intermediate IMS)
> SIP/2.0 200 OK
>
> Via: SIP/2.0/UDP
> pcscf1.visited1.net:5088;comp=sigcomp;branch=z9hG4bK240f34.1 SIP/2.0/UDP
> scscf1.home1.net;branch=z9hG4bK332b23.1, SIP/2.0/UDP
> icscf1.home1.net;branch=z9hG4bK241d17.2, SIP/2.0/UDP
> mrf1.home1.net;branch=z9hG4bK23273846
>
> Record-Route: \,
> \
>
> P-Access-Network-Info: 3GPP-UTRAN-TDD; utran-cell-id-3gpp=234151D0FCE11
>
> From:
>
> To:
>
> Call-ID:
>
> CSeq: 127 INVITE
>
> Contact:
> \;gr=urn:uuid:2ad8950e-48a5-4a74-8d99-ad76cc7fc74;comp=sigcomp;+sip.clue
>
> Content-Length: (...)
>
> v=0
>
> o=- 2987933615 2987933615 IN IP6 5555::aaa:bbb:ccc:ddd
>
> s=-
>
> c=IN IP6 5555::aaa:bbb:ccc:ddd
>
> t=0 0
>
> a=group CLUE 3 4 5 6 7 8 9 10
>
> m=video 0 RTP/AVP 98 99
>
> b=AS:75
>
> a=curr:qos local none
>
> a=curr:qos remote none
>
> a=des:qos mandatory local sendrecv
>
> a=des:qos none remote sendrecv
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99:MPVMP4V-ES
>
> a=mid:1
>
> m=audio 0 RTP/AVP 97 96
>
> b=AS:25.4
>
> a=curr:qos local none
>
> a=curr:qos remote none
>
> a=des:qos mandatory local sendrecv
>
> a=des:qos none remote sendrecv
>
> a=rtpmap:97 AMR
>
> a=fmtp:97 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:96 telephone-event
>
> a=maxptime:20
>
> a=mid:2
>
> m=application 51111 UDP/DTLS/SCTP webrtc-datachannel
>
> a=curr:qos local none
>
> a=curr:qos remote none
>
> a=des:qos mandatory local sendrecv
>
> a=des:qos none remote sendrecv
>
> a=tls-id:abc3de65cddef001be82
>
> a=max-message-size: 100000
>
> a=sctp-port: 5000
>
> a=setup:active
>
> a=connection:existing
>
> a=fingerprint:SHA-1 \
>
> 4A:AD:B9:B1:3F:82:18:3B:54:02:12:DF:3E:5D:49:6B:19:E5:7C:AB
>
> a=dcmap:2 subprotocol=\"CLUE\"
>
> a=mid:3
>
> m=video 3402 RTP/AVP 98 99
>
> b=AS:75
>
> a=curr:qos local none
>
> a=curr:qos remote none
>
> a=des:qos mandatory local send
>
> a=des:qos none remote recv
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99:MPVMP4V-ES
>
> a=label:enc1
>
> a=sendonly
>
> a=mid:4
>
> m=video 3404 RTP/AVP 98 99
>
> b=AS:75
>
> a=curr:qos local none
>
> a=curr:qos remote none
>
> a=des:qos mandatory local send
>
> a=des:qos none remote recv
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99:MPVMP4V-ES
>
> a=label:enc2
>
> a=sendonly
>
> a=mid:5
>
> m=video 3406 RTP/AVP 98 99
>
> b=AS:75
>
> a=curr:qos local none
>
> a=curr:qos remote none
>
> a=des:qos mandatory local send
>
> a=des:qos none remote recv
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99:MPVMP4V-ES
>
> a=label:enc3
>
> a=sendonly
>
> a=mid:6
>
> m=audio 3458 RTP/AVP 97 96
>
> b=AS:25.4
>
> a=curr:qos local none
>
> a=curr:qos remote none
>
> a=des:qos mandatory local send
>
> a=des:qos none remote recv
>
> a=rtpmap:97 AMR
>
> a=fmtp:97 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:96 telephone-event
>
> a=maxptime:20
>
> a=label:enc4
>
> a=sendonly
>
> a=mid:7
>
> m=video 3408 RTP/AVP 98 99
>
> b=AS:75
>
> a=curr:qos local none
>
> a=curr:qos remote none
>
> a=des:qos mandatory local recv
>
> a=des:qos none remote send
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99:MPVMP4V-ES
>
> a=label:enc5
>
> a=recvonly
>
> a=mid:8
>
> m=video 3410 RTP/AVP 98 99
>
> b=AS:75
>
> a=curr:qos local none
>
> a=curr:qos remote none
>
> a=des:qos mandatory local recv
>
> a=des:qos none remote send
>
> a=rtpmap:98 H263
>
> a=fmtp:98 profile-level-id=0
>
> a=rtpmap:99:MPVMP4V-ES
>
> a=label:enc6
>
> a=recvonly
>
> a=mid:9
>
> m=audio 3460 RTP/AVP 97 96
>
> b=AS:25.4
>
> a=curr:qos local none
>
> a=curr:qos remote none
>
> a=des:qos mandatory local recv
>
> a=des:qos none remote send
>
> a=rtpmap:97 AMR
>
> a=fmtp:97 mode-set=0,2,5,7; mode-change-period=2
>
> a=rtpmap:96 telephone-event
>
> a=maxptime:20
>
> a=label:enc7
>
> a=recvonly
>
> a=min:10
**Contact:** contains the \"+sip.clue\" Contact header field parameter.
NOTE 6: SDP lines \"a=label:enc5\", \"a=label:enc6\" and \"a=label:enc7\" can
be omitted since \"m=recvonly\" lines don\'t need to have a label, as only
\"m=sendonly\" lines are referenced by CLUE protocol messages.
37\. **SIP 200 (OK) response (Intermediate IMS to MRF/AS)**
Intermediate IMS forwards the SIP 200 (OK) response to the MRF/AS.
> 38-39. **SIP ACK request (MRF/AS to Intermediate IMS, till UE#1)**
The MRF/AS responding to the SIP 200 (OK) response (41) sends a SIP ACK
request sent to Intermediate IMS and till UE#1 as specified in subclause A.3.2
of 3GPP TS 24.147 [3]. Accordingly, the UE#1 starts to receive the media
streams which are configured by itself via the exchange of CLUE messages.
## A.3.3 User invited to an IM conference supporting telepresence
Subclause A.3.3 covers the signalling flows that inviting a TP UE getting
invited to an IM conference supporting telepresence, which may be triggered
for example after the conference focus receives a REFER request to invite a
user join the conference.
Figure A.3.3-1: A user invited to an IM conference supporting telepresence
Figure A.3.3-1 shows a user invited to an IM conference supporting
telepresence by incorporating CLUE tools with the basic IMS SIP/SDP mechanism.
# A.4 Flows demonstrating the update of an onging IM conference supporting
telepresence
Figure A.4-1 shows the example call flow of update during an ongoing IM
session supporting telepresence after multiple media streams been established
between UE#1and MRF/AS.
Figure A.4-1: Call flow of update during an onging IM conference supporting
telepresence
#