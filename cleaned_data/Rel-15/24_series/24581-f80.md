# Foreword
This Technical Specification has been produced by the 3rd Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document specifies the media plane control and transmission
control protocols and interactions with the media needed to support Mission
Critical Video (MCVideo) service.
The MCVideo service and its associated media plane control protocols can be
used for public safety applications and also for general commercial
applications (e.g., utility companies and railways).
The present document is applicable to User Equipment (UE) supporting MCVideo
client, and MCVideo server supporting media distribution function and
transmission control server.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 24.281:\"Mission Critical Video (MCVideo) call control; Protocol
specification\".
[3] IETF RFC 3550: \"RTP: A Transport Protocol for Real-Time Applications\".
[4] IETF RFC 3711: \"The Secure Real-time Transport Protocol (SRTP)\".
[5] 3GPP TS 24.481: \"Mission Critical Services (MCS) group management
Protocol specification\".
[6] 3GPP TS 24.483: \"Mission Critical Services (MCS) Management Object
(MO)\".
[7] 3GPP TS 24.484: \"Mission Critical Services (MCS) configuration management
protocol specification\".
[8] 3GPP TS 33.180: \"Security of the mission critical service\".
[9] IETF RFC 3830: \"MIKEY: Multimedia Internet KEYing\".
[10] IETF RFC 6509: \"MIKEY-SAKKE: Sakai-Kashar Key Encryption in Multimedia
Internet KEYing (MIKEY)\".
[11] 3GPP TS 23.281: \"Functional architecture and information flows to
support Mission Critical Video (MCVideo); Stage 2\".
[12] 3GPP TS 23.280: \"Common functional architecture to support mission
critical services; Stage 2\".
[13] 3GPP TS 26.346: \" Multimedia Broadcast/Multicast Service (MBMS);
Protocols and codecs\".
# 3 Definitions, symbols and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
3GPP TR 21.905 [1] and the following apply. A term defined in the present
document takes precedence over the definition of the same term, if any, in
3GPP TR 21.905 [1].
**Transmission request queue:** The transmission request queue used by the
transmission control server to queue received Transmission Request messages.
**Controlling MCVideo function:** The MCVideo server performing a controlling
role.
**Effective priority:** The priority decision determined by the transmission
control server based on multiple input parameters like transmission priority,
participant type, type of call etc. of the current transmission request and of
the current participant to which transmission is granted if any and the local
policy.
**MBMS bearer:** The service provided by the EPS to deliver the same IP
datagrams to multiple receivers in a designated location.
**MBMS subchannel:** A logical channel which uses resources of an activated
and announced MBMS bearer identified by the TMGI of the MBMS bearer and
additional parameters, like UDP port, associated to a group or the MBMS
subchannel used to e.g. inform when a transmission call is started or ended.
**Media plane control protocols:** Protocols in the media plane used for
transmission control, pre-established session call control and MBMS subchannel
control.
**Participating MCVideo function:** The MCVideo server performing a
participating role.
For the purposes of the present document, the following terms and definitions
given in 3GPP TS 23.281 [11] apply:
**Transmission control**
**Transmission participant**
**Transmission control server**
**Group call**
**MCVideo call**
**MCVideo server performing a controlling role**
**MCVideo server performing a participating role**
**MCVideo user**
**Mission critical video**
**Private call**
**SIP core**
For the purposes of the present document, the following terms and definitions
given in 3GPP TS 33.179 [14] apply:
**Client Server Key (CSK)**
**Client Server Key Identifier (CSK-ID)**
**Group Master Key (GMK)**
**Group Master Key Identifier (GMK-ID)**
**Multicast Key for Floor Control (MKFC)**
**Identifier of Multicast Key for Floor Control (MKFC-ID)**
**Multicast Signalling Key (MuSiK)**
**Multicast Signalling Key Identifier (MuSiK-ID)**
**Private Call Key (PCK)**
**Private Call Key Identifier (PCK-ID)**
**Signalling Protection Key (SPK)**
**Signalling Protection Key Identifier (SPK-ID)**
**MBMS SubChannel Control Key (MSCCK)**
**MBMS SubChannel Control Key Identifier (MSCCK-ID)**
For the purposes of the present document, the following terms and definitions
given in IETF RFC 3711 [16] apply:
**SRTP master key (SRTP-MK)**
**SRTP master key identifier (SRTP-MKI)**
**SRTP master salt (SRTP-MS)**
## 3.2 Symbols
## 3.3 Abbreviations
For the purposes of the present document, the abbreviations given in 3GPP TR
21.905 [1] and the following apply. An abbreviation defined in the present
document takes precedence over the definition of the same abbreviation, if
any, in 3GPP TR 21.905 [1].
AS Application Server
D2D Device to Device
DL Downlink
GCS AS Group Communication Service Application Server
GMK Group Management Key
GMS Group Management Server
GUK-ID Group User Key Identifier
IP Internet Protocol
MBMS Multimedia Broadcast and Multicast Service
MCVideo Mission Critical Video
MKI Master Key Identifier
PCK Private Call Key
PCK-ID Private Call Identifier
RFC Request For Comment
RTCP RTP Control Protocol
RTP Real-time Transport Protocol
SRTCP Secure RTCP
SRTP Secure RTP
SSRC Synchronization SouRCe
TEK Traffic-Encrypting Key
TMGI Temporary Mobile Group Identity
UE User Equipment
# 4 General
## 4.1 MCVideo media plane overview
### 4.1.1 Transmission Control
#### 4.1.1.1 General
In a video group call after the call is setup, at a given time multiple group
members (the allowed maximum simultaneous MCVideo transmitting group members
is configured in the group configuration data) are allowed to transmit videos
and all other affiliated group members are invited to accept the incoming
videos. Each of the other affiliated group members has the option to accept or
reject the incoming videos. After accepting the video, the affiliated group
member can end the video being received at any time. . The control action for
obtaining this mode of operation is known as transmission and reception
control. The direct actors of transmission and reception control are the
transmission participants and the transmission control server. A transmission
participant does the transmission and reception control related actions in the
MCVideo client. The transmission control server is the decision maker of the
transmission and reception control. In on-network the transmission control
server is in the MCVideo server with the controlling role. In off-network no
specific transmission control server exists. The current video transmitter
plays the role of transmission control server.
Transmission control actions in on-network are described in clause 4.1.1.2.
The differences for off-network transmission control are described in clause
4.1.1.3.
NOTE: End-user actions as operation of the video transmit, video transmission
end, video receive and video reception end button illustrates functionality
but no end-user actions are mandated by the present document.
#### 4.1.1.2 On-network transmission and reception control
At any point in time a group member can request permission to transmit.
When the allowed maximum simultaneous MCVideo transmitting group members is
not reached, a group member can click the video transmission send button,
meaning the request for permission to transmit. The transmission participant
entity of this user reflects this request to the transmission control server
by sending a Transmission Request message. If the transmission control server
decides to permit, it informs this permission for this request by sending a
Transmission Granted message to the requesting group member. The transmission
control server informs the initiation of the transmission to the other group
members by sending a Media Reception Notification message. Once the group
member receives the permission, a permission indication (permission tone) is
generated by the client to inform the user that the video starts being
transmitted. The media packets (encoded audio stream and video stream) are
sent to the controlling MCVideo server and from there they are distributed to
all receivers of this group. The click on the video transmission end button
indicates the user\'s intention to end transmitting. Once the video
transmission end button is clicked, the transmission participant sends a
Transmission End Request message to the transmission control server indicating
that this user has finished transmitting. This cycle, starting from the
Transmission Granted message and ending with Transmission End Request message,
is known as \'video transmission\'.
In the beginning of a call the initial transmit request can be implied by the
SIP message which initiates the call as specified in 3GPP TS 24.281 [2]
without any specific Transmission Request message.
A group member can also request permission to transmit media by sending a
Transmission Request message when the allowed maximum simultaneous MCVideo
transmitting group members is reached. The transmission control server can
resolve this request in several ways.
1\. If this request has higher priority than any one of the ongoing video
transmissions, the transmission control server revokes the ongoing video
transmission with lowest priority by sending a Transmission Revoke message to
the video transmitter of the video transmission with lowest priority. The
transmitter is interrupted and the current video transmission is ended by the
current transmission participant by sending a Transmission End Request
message. Then the transmission control server sends a Transmission Granted
message to the revoking user and send Media Reception Notification message to
other affiliated group members. Then a new video transmission starts.
2\. If this request does not have higher priority and transmission request
queueing is not used the transmission control server rejects this request by
sending a Transmission Deny message to the requester. Then a reject indication
(reject tone) is generated for the user. The ongoing video transmissions
continue.
3\. If request queueing is used the transmission control server sends
Transmission Queue Position Info message indicating that there is no
permission but the request is queued for potential permission when the current
video transmissions end. Then a \"queued\" indication is generated for the
user. The ongoing video transmissions continues.
When an affiliated group member receives the Media Reception Notification
message, if the maximum number of simultaneous video streams that can be
received is not reached, a warning indication (new video coming tone) is
generated by the client to inform the user that a new video transmission is
coming to be accepted. The click on the video receive button indicates the
user accepts the video, the transmission participant entity of this user sends
a Receive Media Request message to the transmission control server. If the
transmission control server determines to accept the Receive Media Request, a
Receive Media Response message is sent back to the requesting receiver. The
click on the video reception end button indicates the receiver\'s intention to
end the video reception. Once the video reception end button is clicked, the
transmission participant sends a Media Reception End Request message to the
transmission control server indicating that this user does not want to receive
the video transmission any more. Once receiving the Media Reception End
Request message, the transmission control server interacts with media
distribution function to stop sending the requesting video to the requesting
receiver. If no one receives the video any more, the transmission control
server can send Transmission End Request to the video transmitting user to end
the video transmitting.
If maximum number of simultaneous video streams that can be received towards
the affiliated group member is reached, the transmission participant can
resolve this Media Reception Notification in several ways.
1\. If this notification has higher priority than any one of the ongoing video
receptions, the transmission participant ends the ongoing video reception with
lowest priority by sending a Media Reception End Request message to the
transmission control server indicating that this user does not want to receive
the video transmission any more.. Then the transmission participant sends a
Transmission Granted message to the revoking user and send Media Reception
Notification message to other affiliated group members. Then the transmission
participant sends a Receive Media Request to the transmission control server
to receive the new video transmission. Then a new video reception starts.
2\. If this notification does not have higher priority, a warning indication
and a prompt (new video available but the maximum number of simultaneous video
streams that can be received is reached) is generated by the client to inform
the user that a new video transmission is available but the maximum number of
simultaneous video streams that can be received is reached, and prompts the
user to make a decision. If the user reject the new video transmission
invitation, the ongoing video receptions continue and the video transmission
is added to a recently invited group communications list locally for later
reception. If the user end the other ongoing video reception to accept the new
video transmission, then the transmission participant sends a Receive Media
Request to the transmission control server to receive the new video
transmission. Then a new video reception starts.
During the video transmissions, a queued user can ask its position in the
queue by sending a Transmission Queue Position Request message. Then the
transmission control server provides the information by sending Transmission
Queue Position Info message. A queued user can also remove itself from the
queue by sending a Transmission End Request message. This kind of message
exchange during the video transmissions does not affect the ongoing video
transmissions.
If request queueing is used, by the end of a video transmission, the
transmission control server gives the transmit permission to the first pending
request in the queue. For this, it sends the same messages as in the beginning
of a video transmission; Transmission Granted message to the permitted user
and Media Reception Notification message to other affiliated group members.
The permitted user is expected to click the video transmission send button
after the permission tone within a well-defined short period of time. If the
permitted user does not click the video transmission send button, the MCVideo
client loses the transmission permission.
If queueing is used the ordering in the queue is affected by the priority of
the users in the queue.
A transmission request with pre-emptive priority can be granted with revoking
the ongoing video transmitter with lowest priority.
During silence (when no video transmission is ongoing), the transmission
control server can send Transmission Idle message to all transmission
participants from time to time. The transmission control server sends
Transmission Idle message in the beginning of silence.
Some of the transmission control messages can be repeated as specified in
state machines specified in clause 6.
The call can be released after a long silence period.
#### 4.1.1.3 Off-network transmission control
This clause describes the special features for off-network transmission
control with respect to the on-network transmission control.
In off-network no specific transmission control server exists. All
transmission control messages are sent to all group members.
When a transmission control server gives transmission permission it sends a
Transmission Granted message. The information element which expresses the
group member, to which this transmission permission is given, implies to the
other group members that the transmission is taken. No other Media Reception
Notification message is sent.
After silence, a transmission participant asks for transmission permission by
sending a Transmission Request message. After a well-defined waiting period,
if no response is received, this transmission participant sends a Media
Reception Notification message indicating itself in the information element
which expresses the group member to which this transmission permission is
given and continues the video transmission.
In off-network, the Transmission Idle message is not used.
Some of the transmission control messages can be repeated as specified in the
state machines specified in clause 7.
#### 4.1.1.4 Determine on-network effective priority
The transmission control server can determine how to handle a received
Transmission Request message using a number of input parameters. Examples of
input parameters that the transmission control server can use are:
1\. the transmission priority, using the value of the Transmission Priority
field in the Transmission Request message;
2\. the \ element as specified in 3GPP TS 24.481 [5];
3\. the \ element as specified in 3GPP TS
24.484 [7];
4\. the participant type, using the \ element specified in
3GPP TS 24.481 [5] or, in case a non-controlling MCVideo function is attached
to a group call, the \ value in the Track Info field in the
Transmission Request message;
5\. the type of call indicated in the Transmission Indicator field;
6\. the effective priority of the transmission participant with the permission
to send media, and the current type of the call (e.g. normal, imminent-peril,
emergency, broadcast); and
7\. any other information in the group document specified in 3GPP TS 24.481
[5] or information stored in the controlling MCVideo function outside the
scope of the present document.
Using a local policy and the above input parameters the transmission control
server can determine that a transmission request is:
1\. pre-emptive such that the current transmission is overridden;
2\. pre-emptive such that the current transmission is revoked;
3\. not pre-emptive and put in the transmission request queue, if queueing was
negotiated; or
4\. not-pre-emptive and rejected, if queueing was not negotiated.
The transmission participant can determine how to handle a received Media
Reception Notification message using a number of input parameters. Examples of
input parameters that the transmission participant can use are:
1\. the transmission priority, using the value of the Transmission Priority
field in the Transmission Request message;
2\. the \ element as specified in 3GPP TS 24.481 [5];
3\. the \ element as specified in 3GPP TS
24.484 [7];
4\. the participant type, using the \ element specified in
3GPP TS 24.481 [5];
5\. the type of call indicated in the Transmission Indicator field;
6\. the effective priority of the transmission participant with the permission
to send media, and the current type of the call (e.g. normal, imminent-peril,
emergency, broadcast); and
7\. any other information in the group document specified in 3GPP TS 24.481
[5] or information stored in the controlling MCVideo function outside the
scope of the present document.
#### 4.1.1.5 Determine off-network effective priority
The transmission control participant can determine how to handle a received
Transmission Request message using the following input parameters:
1\. the transmission priority, using the value of the Transmission Priority
field in the Transmission Request message;
2\. the value of the
\"/\/\/Common/MCVideoGroupMemberList/\/UserPriority\" leaf node of
the sender of the Transmission Request message, present in group configuration
as specified in 3GPP TS 24.483 [6];
3\. the value of the \"/\/OffNetwork/NumLevelHierarchy\" leaf node present
in service configuration as specified in 3GPP TS 24.483 [6];
4\. the type of call indicated in the Transmission Indicator field; and
5\. the effective priority of the transmission participant with the permission
to send media, and the current type of the call (e.g. normal, imminent-peril,
emergency).
Using the policy as described in clause 7.2.1.2, and the above input
parameters the transmission control participant can determine that a
transmission request is:
1\. pre-emptive such that one of the on-going transmissions is revoked;
2\. not pre-emptive and put in the transmission request queue, if the value of
\"/\/\/OffNetwork/QueueUsage\" leaf node present in the group
configuration as specified in 3GPP TS 24.483 [6] is set to \"true\"; or
3\. not-pre-emptive and rejected, if the value of
\"/\/\/OffNetwork/QueueUsage\" leaf node present in the group
configuration as specified in 3GPP TS 24.483 [6] is set to \"false\".
### 4.1.2 MBMS subchannel control
#### 4.1.2.1 General
The participating MCVideo function can use an MBMS bearer for the DL
transmission of the media and the media control plane.
The participating MCVideo function decides to activate an MBMS bearer. After
the activation of the MBMS bearer, as specified in 3GPP TS 29.468 [6], the
TMGI of this MBMS bearer is announced to the MCVideo clients in the MBMS
service area of this MBMS bearer. This announcement enables the MCPVideo
client to listen (decode/demodulate) this MBMS bearer. The activation of an
MBMS bearer and the announcement of the TMGI create a pool of MBMS subchannel
resources without any association to a group or other purposes.
The criteria for a participating MCPVideo function to decide to activate and
use an MBMS bearer is implementation dependent.
An MBMS bearer can be used for the DL transmission for more than one group.
For this, additional parameters like destination UDP port are used for
enabling the differentiation of messages and packets belonging to different
groups over the same MBMS bearer by a receiving MCVideo client.
When a TMGI is announced a general purpose MBMS subchannel is created by
defining an association between the identity of the general purpose MBMS
subchannel (e.g. \'general purpose\') and the TMGI (of the activated and
announced MBMS bearer) together with the parameters (e.g. UDP port)
differentiating this general purpose MBMS subchannel in this MBMS bearer. The
parameters of this general purpose MBMS subchannel can be communicated to the
MCVideo clients in the MBMS service area of this MBMS bearer using unicast
over-the air transmission or can be pre-defined and stored in the MCVideo user
profile that is downloaded to the MCVideo UE.
#### 4.1.2.2 Start of a MCVideo transmission
When a MCVideo transmission starts, the participating MCVideo function can
allocate an MBMS subchannel for this group by defining an association between
this group (e.g. \'group id\') and the TMGI (of the activated and announced
MBMS bearer) with the parameters differentiating this MBMS subchannel in this
MBMS bearer. The parameters of this MBMS subchannel are sent using the general
purpose MBMS subchannel using the Map Group To Bearer message. The Map Group
To Bearer message is repeated as long as the communication is ongoing for
improving the reception probability and to allow MCVideo clients arriving late
to listen to the MBMS subchannel.
The Map Group To Bearer provides the multicast IP destination address and the
destination ports used to deliver the transmission control messages, the audio
and video media packets, the FEC repair packets.
#### 4.1.2.3 During a media transmission
If an MBMS subchannel exists, the participating MCVideo function forwards the
media plane control messages, received from the controlling MCVideo function
via MBMS subchannel for media plane control. Only transmission control
messages which are transmitted to more than one affiliated group member are
forwarded to the MBMS bearer (e.g. the Media transmission notification,
Transmission Idle and Transmission end notify messages). Transmission control
messages can be repeated as long as the transmission is on going for improving
the reception probability. The participating MCVideo function forwards the
media packets, received from the controlling MCVideo function, via the MBMS
subchannel for media.
Amongst all affiliated group members under this participating MCVideo
function, the participating MCVideo function is informed or is enabled to
deduce the group members which do not or cannot receive the MBMS subchannels.
The participating MCVideo function forwards the media packets and the media
plane control messages, received from the controlling MCVideo function, to the
group members which do not or cannot receive the MBMS subchannels, using
unicast bearers allocated for media and media plane control respectively.
#### 4.1.2.4 Ending the transmission
The participating MCVideo function can de-allocate an MBMS subchannel after a
configurable period of silence in the transmission by removing the association
to this group by sending the Unmap Group To Bearer message over this MBMS
subchannel. The de-allocation of the MBMS subchannel frees the parameters used
for differentiating this MBMS subchannel in this MBMS bearer. Therefore, the
resources of a de-allocated MBMS subchannel can be reallocated for a
transmission of another group.
NOTE: The participating MCVideo function will activate MBMS bearers with
general QoS characteristics suitable for MCVideo service and will map MBMS
subchannels for media or media plane control only to MBMS bearers that can
provide the QoS required by media or media plane control.
#### 4.1.2.5 MBMS bearer announcement over an MBMS bearer
The participating MCVideo function can activate an MBMS bearer that previously
has been announced over a unicast bearer by sending an MBMS bearer
announcement over an MBMS bearer. The MCVideo client acknowledges that it can
listen to the MBMS bearer by sending a listening status report.
## 4.2 Internal structure of media plane control entities
### 4.2.1 Controlling MCVideo function
According to 3GPP TS 23.281 [5] the controlling MCVideo function is divided
into a transmission control server and a media distribution function. In the
present document the internal structure of the MCVideo server is illustrated
in figure 4.2-1.
NOTE: The real internal structure of the MCVideo server is implementation
specific but a possible internal structure is shown to illustrate the
procedures.
Figure 4.2.1-1: Internal structure of transmission control in the controlling
MCVideo function
All entities in the controlling MCVideo function are assumed to have a direct
communication interface to the application and signalling plane. The interface
to the application and signaling plane carries information about SIP session
initialisation and SIP session release, SDP content, etc.
The reference point MCVideo-3 is described in 3GPP TS 23.281 [5].
The transmission and reception control interface towards the MCVideo client
receives and transmits the transmission control and reception control messages
from and to the MCVideo client via the participating MCVideo function. The
procedures are controlled by the state machines described in clause 6.3.5 and
clause 6.3.7. One transmission control state machine and one reception control
state machine are needed for each MCVideo client participating in an MCVideo
call.
The transmission and reception control arbitration logic is performing the
transmission and reception control. The transmission and reception control
arbitration logic is controlled by the state machines described in clause
6.3.4 and clause 6.3.5. One transmission control state machine and one
reception control ared needed per MCVideo call.
The transmission request queue is accessible both by the transmission and
reception control interface towards the MCVideo client for all MCVideo clients
in the call and the transmission and reception control arbitration logic.
The network media interface is receiving and sending media from and to the
associated MCVideo client via the participating MCVideo function. The network
media interface is out of scope of the present document. One network media
interface is needed for each MCVideo client participating in an MCVideo call.
The media distributor is controlled by the transmission and reception control
arbitration logic. The media distributor is out of scope of the present
document. One media distributor is needed per MCVideo call.
The internal interfaces are assumed to transport the following types of
information.
1\. The interface between the network media interface and the transmission and
reception control interface towards the MCVideo client:
a. Indication that the network media interface has started to receive media
packets from the associated MCVideo client or that media packets are no longer
received from the associated MCVideo client.
NOTE: It is an implementation option whether an indication e.g. is sent for
every received RTP media packet or only when the first packet is received and
then when no more RTP packets are received.
2\. The interface between the transmission and reception control interface
towards the MCVideo client and the transmission and reception control
arbitration logic:
a. Transmission control and reception control messages to and from the
associated MCVideo client, requests to create or delete the state machine
instance for the associated MCVideo client. The transmission control and
reception control messages to the transmission and reception control
arbitration logic are limited to transmission control and reception control
messages that will change the state of the transmission.
3\. The interface between the network media interface and the media
distributor:
a. Media to and from associated MCVideo clients. This interface is out of
scope of the present document.
4\. The interface between the transmission and reception control arbitration
logic and the media distributor:
a. Requests to start or stop distributing media to participants in the MCVideo
call. Indication that the media distributor has started to receive media
packets from the network media interface associated with the MCVideo client
with the permission to send media or that media packets are no longer received
from the network media interface from the associated MCVideo client.
5\. The interface between the transmission and reception control interface
towards the MCVideo client and the transmission request queue:
a. Requests to store received Transmission Request messages in the queue or
requests to remove Transmission Request messages from the queue and the queue
content for building the Transmission Queue Position Info message.
6\. The interface between the transmission and reception control arbitration
logic and the transmission request queue:
a. Requests to store received Transmission Request messages in the queue or
requests to remove Transmission Request messages from the queue. Indications
that the queue is modified.
### 4.2.2 MCVideo client
According to 3GPP TS 23.380 [x1] the MCVideo client is divided into a
transmission participant and a media mixer function. In the present document
the internal structure of the MCVideo client is illustrated in figure 4.2.2-1.
NOTE: The real internal structure of the MCVideo client is implementation
specific but a possible internal structure is shown to illustrate the logic
and the procedures.
Figure 4.2.2-1: Internal structure of the MCVideo client
All entities in the MCVideo client have a direct communication interface to
the application and signalling plane. The interface to the application and
signaling plane carries information about SIP session initialisation and SIP
session release, SDP content, etc.
The reference points MCVideo-4, MCVideo-6, MCVideo-7 and MCVideo-8 are
described in 3GPP TS 23.281 [11].
The transmission participant receives and sends transmission and reception
control message over the unicast bearer.
The media mixer receives and sends RTP media packets over the unicast bearer.
The media mixer indicates to the transmission participant when RTP media
packets are received and when RTP media packets are no longer received. The
transmission participant instructs the media mixer on how to handle media
received from the user or received from the network either over the unicast
bearer or over the MBMS bearer.
The MBMS interface receives RTP media packets over the MBMS bearer. The RTP
media packets are forwarded to the media mixer.
The MBMS interface receives transmission control messages and MBMS subchannel
control messages over the MBMS bearer. The MBMS interface forward received
transmission control messages to the transmission participants.
The transmission participant receives indication from the MCVideo client when
the MCVideo user has click the video transmit, the video transmission end, and
video receive or video reception end button. The MCVideo client can also
provide notification towards the MCVideo user. Video received from the MCVideo
user is, on instruction from the transmission participant, encoded by the
media mixer and sent as RTP media packets over the unicast bearer.
### 4.2.3 Participating MCVideo function
#### 4.2.3.1 General
The participating MCVideo function performs the participating role of an
MCVideo server as defined in 3GPP TS 23.281 [11]. The participating MCVideo
function uses media plane control (non-SIP) messages when taking part in the
transmission control and reception control procedures as specified in clause 6
and the use of MBMS Bearer procedures as specified in clause 10. In the sequel
the term \'controlling MCVideo function\' is used for the entity which
performs the controlling role of an MCVideo server.
The following clauses describe the assumed internal structure of a
participating MCVideo function and the role of the participating function in
the transmission control and reception control procedures and the use of MBMS
Bearer procedures..
#### 4.2.3.2 Internal structure of the participating MCVideo function
In the present document the internal structure of the participating MCVideo
function is illustrated in figure 4.2.3.2-1.
NOTE: The real internal structure of the participating MCVideo function is
implementation specific but a possible internal structure is shown to
illustrate the logic and the procedures.
Figure 4.2.3.2-1: Internal structure of the participating MCVideo function
All entities in the participating MCVideo function have a direct communication
interface to the application and signalling plane. The interface to the
application and signalling plane carries information about SIP session
initialisation and SIP session release, SDP content, etc.
The reference points MCVideo-3, MCVideo-4, MCVideo-7, MCVideo-8 and MCVideo-9
are described in 3GPP TS 23.281 [11].
The media and transmission control message distribution receives media control
messages and RTP media packets to and from the MCVideo client and the
controlling MCVideo function and the non-controlling MCVideo function. Media
plane control messages and RTP packets are forwarded as received when unicast
bearers are used. If MBMS bearers are used for transmission control messages,
MBMS subchannel control messages and RTP media packets are sent to the MBMS
bearer management.
The MBMS bearer management receives transmission control messages and RTP
media packets from the media when transmission control messages and RTP media
packets are sent over an MBMS bearer. MBMS bearer management also generates
MBMS subchannel control message. Transmission control message, RTP media
packets and MBMS subchannel control messages are sent to the GCS AS for
distribution over an MBMS bearer. The GCS AS is outside the scope of the
present specification.
#### 4.2.3.3 The roles of the participating MCVideo function
##### 4.2.3.3.1 For the transmission control procedures
When a transmission control or reception control message or a media packet is
received from an MCVideo client, in the MCVideo-4 and MCVideo-7 reference
points respectively, the participating MCVideo function forwards it to the
controlling MCVideo function over MCVideo-3 reference point or to the
application and signalling plane. When a transmission control message or a
media packet is received from the controlling MCVideo function, over MCVideo-3
reference point or the application and signalling plane, for MCVideo clients
which do not use an MBMS subchannel, the participating MCVideo function
forwards the transmission control message to the MCVideo client over the
MCVideo-4 and MCVideo-7 reference points respectively. For MCVidep clients
which use an MBMS subchannel, for transmission control messages directed to
all of these MCVideo clients and for media packets, the participating MCVideo
function forwards a single transmission control message or a single media
packet using the MBMS subchannel over MCVideo-9 and MCVideo-8 reference points
respectively.When MCVideo clients are listening to the MBMS subchannel
multiple copies of the same media packet destined to each individual MCVideo
client are sent by the controlling MCVideo function while the participating
MCVideo function only forwards one single media packet over the MBMS bearer.
Any optimizations for not sending the media packet from the controlling
MCVideo function to all MCVideo clients are out of scope of the present
document.
The participating MCVideo function can decide to apply forward error
correction to the media packets to protect them against loss, and reach the
QoS target. The participating MCVideo function can apply forward error
correction to the media packets before transmitting them over MBMS, or it can
ask the BM-SC to apply forward error correction application as described in
3GPP TS 23.280 [12].
The participating MCVideo function specifications related to the transmission
control and reception control are specified in clause 6.4 for unicast media
and media plane control.
##### 4.2.3.3.2 For the use of MBMS bearer procedures
In the initiation of a transmission, if the MBMS bearer management in the
participating MCVideo function decides to use MBMS subchannels for the media
plane control messages and the media packets, the participating MCVideo
function sends a Map Group To Bearer message over the MCVideo-9 reference
point, for indicating the association information between the group identity
of this call and the TMGI of the MBMS bearer and additional parameters
necessary for the identification of this MBMS subchannels using the general
purpose MBMS subchannel already associated for the transmission of this
information. In the termination of a transmission the participating MCVideo
function sends an Unmap Group To Bearer message for terminating the
association between the MBMS subchannels in use for this transmission and the
group identity.
The participating MCVideo function specifications related to the declaration
of the association between an MBMS bearer and related parameters and the MBMS
subchannels for media and media plane control are specified in clause 10.3.2
and clause 10.3.4.
### 4.2.4 Non-controlling MCVideo function of an MCVideo group
According to 3GPP TS 24.281 [2] clause 5.3 the MCVideo server can act in a
non-controlling MCVideo function of an MCVideo group role. In the present
document the internal structure of the non-controlling MCVideo function of an
MCVideo group is illustrated in figure 4.2.4-1.
NOTE: The real internal structure of the MCVideo server is implementation
specific but a possible internal structure is shown to illustrate the logic
and the procedures.
Figure 4.2.4-1: Internal structure of the non-controlling MCVideo function
All entities in the non-controlling MCVideo function of an MCVideo group are
assumed to have a direct communication interface to the application and
signalling plane. The interface to the application and signaling plane carries
information about SIP session initialisation and SIP session release, SDP
content, etc.
The transmission participant interface receives and transmits the transmission
control messages from and to the MCVideo client via the participating MCVideo
function or non-controlling MCVideo function. The procedures are controlled by
a state machine described in clause 6.5.5. One state machine is needed for
each MCVideo client participating in an MCVideo call. A non-controlling
MCVideo function is seen by the transmission participant interface as an
MCVideo client.
The transmission control server interface is distributing transmission control
messages to and from the transmission control server in the controlling
MCVideo function or non-controlling MCVideo function. The transmission control
server interface procedures are described in clause 6.5.4. One transmission
control server interface is needed per MCVideo call.
The network media interface is receiving and sending media from and to the
associated MCVideo client via the participating MCVideo function or non-
controlling MCVideo function. The network media interface is out of scope of
the present document. One network media interface is needed for each MCVideo
client participating in an MCVideo call. A non-controlling MCVideo function is
seen by the network media interface as an MCVideo client.
The media distributor is controlled by the transmission control server
interface. The media distributor is out of scope of the present document. One
media distributor is needed per MCVideo call.
The internal interfaces are assumed to transport the following type of
information.
1\. The interface between the network media interface and the transmission
participant interface:
a. Indication that the network media interface has started to receive media
packets from the associated MCVideo client and requests from the transmission
participant interface to forward received RTP packets towards the media
distributor or to stop forward RTP media packets to the media distributor.
NOTE: It is an implementation option whether an indication e.g. is sent for
every received RTP media packet or only when the first packet is received.
2\. The interface between the transmission participant interface and the
transmission control server interface:
a. Floor control messages to and from the associated transmission participant.
The transmission control messages to the transmission control server interface
are limited to transmission control messages that can result in an action
towards the transmission control server.
3\. The interface between the network media interface and the media
distributor:
a. RTP media packets to and from associated MCVideo clients. This interface is
out of scope of the present document.
4\. The interface between the transmission control server interface and the
media distributor:
a. Requests to start or stop distributing media to participants in the MCVideo
call. Indication that the media distributor has started to receive media
packets from the network media interface associated with the MCVideo client
with the permission to send media.
## 4.3 The media plane control channel
### 4.3.1 General
The media plane control channel is used for transport of messages associated
with the transmission control protocol, and the MBMS bearer management
protocol, all specified in the present document.
### 4.3.2 Control channel realization
The media plane control channel is realized by sending RTCP APP packets on top
of UDP/IP. RTCP APP packets are defined in IETF RFC 3550 [6]. The MCVideo
specific coding of the RTCP APP packets is defined in clause 8 of the present
document.
### 4.3.3 Establishing a media plane control channel
#### 4.3.3.1 General
The MCVideo client and the MCVideo server use the SDP offer/answer mechanism
in order to negotiate the establishment of the media plane control channel.
The SDP offer/answer procedures for negotiating media plane control channel
capabilities are specified in clause 14. The ABNF is defined in clause 12.
The media description (\"m=\" line) associated with the media plane control
channel shall have the values as described in table 4.3.3.1-1.
Table 4.3.3.1-1: Media plane control channel media description
Media description element Value
* * *
\ \"application\" \ RTCP port \ \"udp\" \ \"MCVideo\"
The port used for RTCP messages associated with the media plane control
channel shall be different than ports used for RTCP messages associated with
other \"m=\" lines (e.g. RTP) in the SDP.
NOTE 1: As RTCP is used to transport messages on the media plane control
channel, the \"m=\" line port value indicates an RTCP port. This is different
from cases where an \"m=\" line is associated with an RTP-based stream, and
the \"m=\" line port value indicates an RTP port.
NOTE 2: In case the media plane control channel uses a different IP address
than other media described in the SDP, a media plane control channel specific
\"c=\" line also needs to be associated with the \"m=\" line associated with
the media plane control channel.
The format of the optional SDP fmtp attribute, when associated with the media
plane control channel, is described in clause 12.
The example below shows an SDP media description for a media plane control
channel.
m=application 20032 udp MCVideo
a=fmtp:MCVideo mc_queueing;mc_priority=5;mc_reception_priority=5;mc_granted
# 5 Functional entities
## 5.1 General
This clause associates the functional entities with the MCVideo roles
described in the stage 2 architecture document (see 3GPP TS 23.281 [11]).
## 5.2 MCVideo client
### 5.2.1 Introduction
To be compliant with the procedures in the present document, an MCVideo client
shall:
1\. support the role of an MCVideo client as specified 3GPP TS 23.281 [11];
2\. support the on-network MCVideo client role as specified in 3GPP TS 24.281
[2];
3\. support the off-network MCVideo client role as specified in 3GPP TS 24.281
[2]; and
4\. support media plane security as specified in clause 13.
To be compliant with the on-network procedures in the present document, an
MCVideo client shall:
1\. provide the role of a transmission participant in on-network mode as
specified in clause 5.2.2;
2\. provide the media mixer function as described in clause 4.2.2 and support
the related procedures in clause 6.2;
3\. provide video transmit, video transmission end, video receive and video
reception end button events towards the on-network transmission participant as
specified in clause 6.2;
4\. provide means (sound, display, etc.) for indications towards the MCVideo
user as specified in clause 6.2;
5\. support negotiating media plane control channel media level attributes as
specified in clause 4.3; and
6\. when operating in systems that support MBMS functionality, provide the
MBMS interface as described in clause 4.2.2 and support the related MBMS
subchannel control procedure as specified in clause 10.3;
To be compliant with the off-network procedures in the present document, an
MCVideo client shall:
1\. provide the role of a transmission participant in off-network mode as
specified in clause 5.2.3;
2\. support the role of an off-network transmission participant as specified
in 3GPP TS 23.281 [11] and in the present specification;
3\. provide the media mixer function as described in clause 4.2.2 and support
the related procedures as specified in clause 7;
4\. provide video transmit, video transmission end, video receive and video
reception end button events towards the off-network transmission participant
as specified in clause 7; and
5\. provide means (sound, display, etc.) for indications towards the MCVideo
user as specified in clause 7.
### 5.2.2 Transmission participant in on-network mode
To be compliant with the on-network procedures in the present document, a
transmission participant in on-network mode shall:
1\. support the on-network transmission control procedures as defined in 3GPP
TS 23.281 [11];
2\. support acting as an on-network transmission participant as specified in
clause 6.2; and
3\. support the on-network mode transmission control protocol elements as
specified in the clause 8.
A transmission participant in on-network mode may:
1\. support queueing of transmission requests as specified in clause 6.2 and
clause 4.1.1.2.
### 5.2.3 Transmission participant in off-network mode
To be compliant with the off-network procedures in the present document, a
transmission participant in off-network mode shall:
1\. support off-network transmission control procedures as specified in 3GPP
TS 23.281 [11];
2\. support acting as an off-network transmission participant as specified in
clause 7;
3\. support acting as an off-network transmission control server as specified
in clause 7; and
4\. support the off-network mode transmission control protocol elements in
clause 8.
A transmission participant in off-network mode may:
1\. support queueing of transmission requests as specified in clause 7 and
clause 4.1.1.3.
## 5.3 Controlling MCVideo function
An MCVideo server providing the controlling MCVideo function shall:
1\. support the role of a controlling MCVideo function as specified in 3GPP TS
23.281 [11];
2\. support negotiating media plane control channel media level attributes as
specified in clause 4.3;
3\. provide transmission and reception control arbitration logic with an
interface to MCVideo clients as described in clause 4.2.1 and support the
related procedures as specified in clause 6.3;
4\. provided a network media interface as described in clause 4.2.1 and
support associated procedures as specified in clause 6.3;
5\. provide a media distributor with a transmission control interface towards
the MCVideo clients as described in clause 4.2.1 and support associated
procedures in clause 6.3;
6\. support the on-network mode transmission and reception control protocol
elements as specified in clause 8: and
7\. support media plane security as specified in clause 13.
An MCVideo server providing the controlling MCVideo function may:
1\. provide a transmission request queue as described in clause 4.2.1 and
support the related procedures as specified in clause 6.3 and clause 4.3.
## 5.4 Participating MCVideo function
An MCVideo server providing the participating MCVideo function shall:
1\. support the role of a participating MCVideo function as specified in 3GPP
TS 23.281 [11];
2\. distribute transmission control messages as described in clause 6.3 and
support associated procedures as specified in clause 6.4;
3\. support media plane security as specified in clause 13; and
4\. when operating in systems that support and employ MBMS functionality, act
as a GCS AS as specified in 3GPP TS 29.468 [6] and execute the related MBMS
subchannel control procedures as specified in clause 10.2.
# 6 On-network transmission control
## 6.1 General
This clause provides:
1\. the transmission participant procedures in clause 6.2;
2\. the transmission control server procedures in clause 6.3;
3\. the participating MCVideo function transmission control procedures in
clause 6.4; and
If media plane security is required, the MCVideo client, the controlling
MCVideo function, the participating MCVideo function and the non-controlling
MCVideo function shall perform the additionally procedures in clause 13.
## 6.2 Transmission participant procedures
### 6.2.1 Transmission participant procedures at MCVideo session
initialization
Based on the negotiations during the call establishment specified in 3GPP TS
24.281 [2], a new instance of the \'Transmission participant state transition
diagram for basic transmission control operation\', as specified in clause
6.2.4 and a new instance of the \'Transmission participant state transition
diagram for basic reception control operation\' as specified in clause 6.2.5,
shall be created for this call.
The SIP INVITE request sent by the application and signalling plane:
1\. shall be regarded an implicit Transmission request when an implicit
Transmission request is negotiated; and
2\. shall not be regarded as an implicit Transmission request in case of a
rejoin to an already on-going group call.
NOTE: The transmission participant can negotiate the use of prioritization of
the Transmission Media Request message. In that case, the transmission
participant can request permission to send media at a priority level that is
either the same as or lower than the highest priority that was permitted to
the participant in the MCVideo call initialization. If a transmission
participant is authorized for pre-emptive priority in the MCVideo call it is
good practise to always request permission to send RTP media packets at a
priority level that is lower than pre-emptive priority unless the user
explicitly requests to pre-empt the current RTP media packets sender.
### 6.2.2 Transmission participant procedures at MCVideo call release
The MCVideo call release (whether it is initiated by the transmission
participant or transmission control server) is a two-step procedure.
> Step 1 The transmission participant stops sending transmission control and
> reception control messages and the MCVideo client stops sending and
> receiving RTP media packets.
>
> Step 2 When the application and signalling plane has determined that the
> MCVideo call is released, the corresponding instance of the \'Transmission
> participant state transition diagram for basic transmission control
> operation\' as specified in clause 6.2.4 and the corresponding instance of
> the \'Transmission participant state transition diagram for basic reception
> control operation\' as specified in clause 6.2.5 are terminated and the
> transmission participant releases all the used resources.
The user plane can initiate the release step 1, but the application and
signalling plane always initiates the release step 2.
### 6.2.3 Transmission participant procedures at MCVideo call modification
Editor\'s Note: It is FFS whether adding or removing media streams during an
MCVideo call influences the transmission control procedures.
### 6.2.4 Transmission participant state transition diagram for basic
transmission control operation
#### 6.2.4.1 General
The transmission participant shall behave according to the state diagram and
the state transitions specified in this clause.
Figure 6.2.4.1-1 shows the state diagram for \'Transmission participant state
transition diagram for basic transmission control operation\'.
Figure 6.2.4.1-1: Transmission participant state transition diagram for basic
transmission control operation.
State details are explained in the following clauses.
If a transmission control message arrives in a state where there is no
specific procedure specified for received transmission control message, the
transmission participant shall discard the transmission control message and
shall remain in the current state.
NOTE: A badly formatted transmission control message received in any state is
ignored by the transmission participant and does not cause any change of the
current state.
#### 6.2.4.2 State: \'Start-stop\'
##### 6.2.4.2.1 General
When a new instance of the \'Transmission participant state transition diagram
for basic transmission control operation\' is initiated, before any
transmission control related input is applied, the state machine is in
\'Start-stop\' state. Similarly when the call is released the state machine
shall return to the \'Start-Stop state.
##### 6.2.4.2.2 MCVideo call initiated, originating MCVideo user
When a call is initiated as described in 3GPP TS 24.281 [2], the transmission
participant:
1\. shall create an instance of the \'Transmission participant state
transition diagram for basic transmission control operation\';
2\. if the originating transmission participant receives a transmission
control message before it receives the SIP 200 (OK) response, shall store the
transmission control message;
NOTE: The originating transmission participant might receive a transmission
control message before the SIP 200 (OK) response when initiating, joining or
rejoining a call because of processing delays of the SIP 200 (OK) response in
the SIP core.
3\. if the established MCVideo call is a chat group call and the SIP INVITE
request is not an implicit Transmission request, shall enter the \'U: has no
permission to transmit\' state;
4\. if for the established MCVideo call the SIP INVITE request is an implicit
Transmission request:
a. shall start timer T100 (Transmission Request) and initialise counter C100
(Transmission Request) to 1;
b. shall enter the \'U: pending request to transmit\' state; and
c. if the transmission participant has received and stored a transmission
control message before the reception of the SIP 200 (OK) response, shall act
as if the transmission control message was received in the \'U: pending
request to transmit\' state after entering the \'U: pending request to
transmit\' state; and
5\. if the established MCVideo call is a broadcast group call, shall enter the
\'U: has permission to transmit\' state.
When the transmission participant is rejoining an ongoing MCVideo call as
described in 3GPP TS 24.281 [2] the transmission participant shall enter the
\'U: has no permission to transmit\' state.
##### 6.2.4.2.3 MCVideo call established, terminating MCVideo user
When an MCVideo call is established, the terminating transmission participant:
1\. shall create an instance of a \'Transmission participant state transition
diagram for basic transmission control operation\'; and
2\. shall enter the \'U: has no permission to transmit\' state.
NOTE: From a transmission participant perspective the MCVideo call is
established when the application and signalling plane sends the SIP 200 (OK)
response.
#### 6.2.4.3 State: \'U: has no permission to transmit\'
##### 6.2.4.3.1 General
The transmission participant is in this state when the transmission
participant is not sending RTP media packets or is not waiting for a
transmission control message response.
In this state transmission control messages can be received.
##### 6.2.4.3.2 Send Transmission Request message (Click Transmission send
button)
Upon receiving an indication from the user to request permission to send
media, the transmission participant:
1\. void
2\. shall send the Transmission Request message toward the transmission
control server; The Transmission Request message:
a. if a different priority than the normal priority is required, shall include
the Transmission Priority field with the priority not higher than negotiated
with the transmission control server as specified in clause 14.3.3; and
b. if the Transmission request is a broadcast group call, system call,
emergency call or an imminent peril call, shall include a Transmission
Indicator field indicating the relevant call types;
3\. shall start timer T100 (Transmission Request) and initialise counter C100
(Transmission Request) to 1; and
4\. shall enter the \'U: pending request to transmit\' state.
##### 6.2.4.3.3 Receive Transmission Granted message (R: Transmission Granted)
Upon receiving a Transmission Granted message from the transmission control
server due to remote Transmission request, the transmission participant:
1\. if the first bit in the subtype of the Transmission Granted message is set
to \'1\' (Acknowledgment is required) as described in clause 9.2.2.1, shall
send a Transmission control Ack message. The Transmission control Ack message:
a. shall include the Message Type field set to \'1\' (Transmission Granted);
and
b. shall include the Source field set to \'0\' (the transmission participant
is the source);
2\. shall store the SSRC of granted transmission participant received in the
Transmission Granted message and use it in the RTP media packets until the
transmission is relased;
3\. shall provide Transmission granted notification to the user, if not
already done; and
4\. shall enter the \'U: has permission to transmit\' state.
##### 6.2.4.3.4 Void
#### 6.2.4.4 State: \'U: pending request to transmit\'
##### 6.2.4.4.1 General
The transmission participant is in this state when the transmission
participant is waiting for response to a Transmission Request message.
In this state transmission control messages can be received.
Timer T100 (Transmission Request) is running in this state.
##### 6.2.4.4.2 Receive Transmission rejected message (R: Transmission
rejected)
Upon receiving a Transmission rejected message, the transmission participant:
1\. if the first bit in the subtype of the Transmission rejected message is
set to \'1\' (Acknowledgment is required) as described in clause 9.2.2.1,
shall send a Transmission control Ack message. The Transmission control Ack
message:
a. shall include the Message Type field set to \'1\' (Transmission rejected);
and
b. shall include the Source field set to \'0\' (the transmission participant
is the source);
2\. shall provide Transmission rejected notification to the user;
3\. may display the Transmission rejected reason to the user using information
in the Reject Cause field;
4\. shall stop timer T100 ( Transmission Request); and
5\. shall enter the \'U: has no permission to transmit\' state.
##### 6.2.4.4.3 Timer T100 (Transmission request) expired
On expiry of timer T100 ( Transmission Request) less than the upper limit of
counter C100 (Transmission Request) times the timer is allowed to expire, the
transmission participant:
1\. shall send a Transmission Request message towards the transmission control
server. The Transmission Request message:
a. if a different priority than the normal priority is required, shall include
the Transmission Priority field with the priority not higher than negotiated
with the transmission control server as specified in clause 14.3.3; and
b. if the Transmission request is a broadcast group call, system call,
emergency call or an imminent peril call, shall include a Transmission
Indicator field indicating the relevant call types;
2\. shall restart timer T100 (Transmission request) and increment counter C100
(Transmission Request) by 1; and
3\. shall remain in the \'U: pending request to transmit\' state.
##### 6.2.4.4.4 Timer T100 (Transmission Request) expired N times
When timer T100 (Transmission Request) expires by the upper limit of counter
C100 (Transmission Request), the transmission participant:
1\. shall provide a Transmission request timeout notification to the user; and
2\. shall enter the \'U: has no permission to transmit\' state.
##### 6.2.4.4.5 Receive Queue Position Info message (R: Queue Position Info)
Upon receiving a Queue Position Info message, the transmission participant:
1\. if the first bit in the subtype of the Queue Position Info message is set
to \'1\' (Acknowledgment is required) as described in clause 9.2.2.1, shall
send a Transmission control Ack message. The Transmission control Ack message:
a. shall include the Message Type field set to \'5\' (Queue Position Info);
and
b. shall include the Source field set to \'0\' (the transmission participant
is the source);
2\. shall provide Transmission request queued notification to the MCVideo
user;
3\. may provide the queue position and priority to the MCVideo user; and
4\. shall enter the \'U: queued transmission\' state.
##### 6.2.4.4.6 Receive Transmission Granted message (R: Transmission Granted)
Upon receiving a Transmission Granted message from the transmission control
server, the transmission participant:
1\. if the first bit in the subtype of the Transmission Granted message is set
to \'1\' (Acknowledgment is required) as described in clause 9.2.2.1, shall
send a Transmission control Ack message. The Transmission control Ack message:
a. shall include the Message Type field set to \'0\' (Transmission Granted);
and
b. shall include the Source field set to \'0\' (the transmission participant
is the source);
2\. shall store the SSRC of granted transmission participant received in the
Transmission Granted message and use it in the RTP media packets until the
transmission is relased;
3\. shall provide Transmission granted notification to the user, if not
already done;
4\. shall stop timer T100 (Transmission Request); and
5\. shall enter the \'U: has permission to transmit\' state.
##### 6.2.4.4.7 Send Transmission end request message (Click Transmission end
button)
Upon receiving an indication from the user to end the Transmission request,
the transmission participant:
1\. shall send a Transmission end request message towards the transmission
control server. The Transmission end request message, if the session is a
broadcast call and if the session was established as a normal call, shall
include the Transmission Indicator with the A-bit set to \'1\' (Normal call);
2\. shall stop time T100 (Transmission Request)
3\. shall start timer T101 (Transmission End Request) and initialize counter
C101 (Transmission End Request) to 1; and
4\. shall enter the \'U: pending end of transmission\' state.
#### 6.2.4.5 State: \'U: has permission to transmit\'
##### 6.2.4.5.1 General
The transmission participant is in this state when the MCVideo client is
permitted to send RTP media.
In this state transmission control messages can be received.
In this state, the transmission participant can release permission to send RTP
media at any time, even before sending any media.
The MCVideo client could have already buffered media when it enters this
state.
NOTE: If the transmission participant was queued, the transmission participant
requests a confirmation from the MCVideo user before start sending media. If
confirmed, the media sending starts otherwise the permission to send media is
released.
##### 6.2.4.5.2 Send RTP media packets (S: RTP media)
Upon receiving indication from the MCVideo client that encoded video is
received from the user or if encoded video is already buffered, the
transmission participant:
1\. shall request the MCVideo client to start to forward encoded video to the
MCVideo server; and
2\. shall remain in the \'U: has permission to transmit\' state.
##### 6.2.4.5.3 Send Transmission end request message (Click Transmission end
button)
Upon receiving an indication from the user to end the permission to send RTP
media, the transmission participant:
1\. shall send a Transmission end request message towards the transmission
control server. The Transmission end request message, if the session is a
broadcast call and if the session was established as a normal call, shall
include the Transmission Indicator with the A-bit set to \'1\' (Normal call);
2\. shall start timer T101 (Transmission End Request) and initialize counter
C101 (Transmission End Request) to 1; and
3\. shall enter the \'U: pending end of transmission\' state.
##### 6.2.4.5.4 Void
##### 6.2.4.5.5 Receive Transmission Revoked message (R: Transmission Revoked)
Upon receiving a Transmission Revoked message, the transmission participant:
1\. shall inform the user that the permission to send RTP media is being
revoked;
2\. may give information to the user about the reason for revoking the
permission to send media:
3\. shall request the media in the MCVideo client discard any remaining
buffered RTP media packets and to stop forwarding of encoded video to the
MCVideo server; and
4\. if the revoke reason is:
a. terminate the RTP stream, shall enter the \'U: pending end of
transmission\' state:
i. shall send a Transmission end request message towards the transmission
control server; and
ii. shall start timer T101 (Transmission End Request) and initialize counter
C101 (Transmission End Request) to 1; or
b. queue the transmission, shall enter the \'U: queued transmission\' state:
i. shall send a Queue Position Request message towards the transmission
control server; and
ii. shall start timer T102 (Transmission Queue Position Request) and
initialize counter C102 (Queue Position Request) to 1.
##### 6.2.4.5.6 Receive Media reception notification message (R: Media
Reception notification)
Upon receiving a Media Reception notification message, the transmission
participant:
1\. shall inform the user about the media reception by another user; and
2\. shall remain in the \'U: has permission to transmit\' state.
##### 6.2.4.5.7 Receive Transmission End Rquest message (R: Transmission End
Request)
Upon receiving a Transmission End Request message from transmission control
server, the transmission participant:
1\. shall inform the user that the permission to send RTP media is being
revoked;
2\. may give information to the user about the reason for terminating the
permission to send media;
3\. shall request the media in the MCVideo client to discard any remaining
buffered RTP media packets and to stop forwarding of encoded video to the
MCVideo server; and
4\. shall send Transmission End Response message to the transmission control
server.
5\. if the session is not a broadcast group call or if the A-bit in the
Transmission Indicator field is set to \'1\' (Normal call), shall enter the
\'U: has no permission to transmit\' state; and
6\. if the session was initiated as a broadcast group call:
a. shall indicate to the MCVideo client the media transmission is completed;
and
b shall enter the \'Call releasing\' state.
#### 6.2.4.6 State: \'U: pending end of transmission\'
##### 6.2.4.6.1 General
The transmission participant is in this state when the transmission
participant is waiting for response to a Transmission end request message.
Timer T101 (Transmission End Request) is running or can be running in this
state.
##### 6.2.4.6.2 Timer T101 (Transmission End Request) expired
On expiry of timer T101 (Transmission End Request) less than the configurable
number of the upper limit of counter C101 (Transmission End Request) times,
the transmission participant:
1\. shall send a Transmission end request message towards the transmission
control server;
2\. shall restart timer T101 (Transmission End Request) and increment counter
C101 (Transmission End Request) by 1; and
3\. shall remain in state \'U: pending end of transmission\'.
##### 6.2.4.6.3 Timer T101 (Transmission End Request) expired N times
When timer T101 (Transmission End Request) expires by the upper limit of
counter C101 (Transmission End Request) times, the transmission participant:
1\. shall enter the \'U: has no permission to transmit\' state.
##### 6.2.4.6.4 Receive Transmission End Response message (R: Transmission end
response)
Upon receiving a Transmission end response message, the transmission
participant:
1\. if the first bit in the subtype of the Transmission end response message
to \'1\' (Acknowledgment is required) as described in clause 9.2.2.1, shall
send a Transmission control Ack message. The Transmission control Ack message:
a. shall include the Message Type field set to \'1\' (Transmission end
response); and
b. shall include the Source field set to \'0\' (the transmission participant
is the source);
2\. may provide a Transmission end notification to the MCVideo user;
3\. if the Transmission Indicator field is included and the B-bit set to \'1\'
(Broadcast group call), shall provide a notification to the user indicating
the type of call;
4\. shall stop timer T101 (Transmission End Request);
5\. if the session is not a broadcast group call or if the A-bit in the
Transmission Indicator field is set to \'1\' (Normal call), shall enter the
\'U: has no permission to transmit\' state; and
6\. if the session was initiated as a broadcast group call:
a. shall indicate to the MCVideo client the media transmission is completed;
and
b shall enter the \'Call releasing\' state.
##### 6.2.4.6.5 Void
#### 6.2.4.7 In any state
##### 6.2.4.7.1 General
This clause describes the actions to be taken in all states defined for the
basic state diagram with the exception of the \'Start-stop\' state and the
\'Call releasing\' state.
In this state RTP media packets can be received due to previous reception
control, RTP media packets can be sent due previous transmission control and
transmission control and reception control messages can be received.
##### 6.2.4.7.2 Receive MCVideo call release -- step 1 (R: MCVideo call
release - 1)
Upon receiving an MCVideo call release step 1 request from the application and
signalling plane when the MCVideo call is going to be released or when the
transmission participant is leaving the MCVideo call, the transmission
participant:
1\. shall stop sending transmission control messages;
2\. shall request the MCVideo client to stop sending RTP media packets; and
3\. shall enter the \'Call releasing\' state.
#### 6.2.4.8 State: \'Call releasing\'
##### 6.2.4.8.1 General
The transmission participant is in this state while waiting for the
application and signalling plane to finalize the disconnection of an MCVideo
call.
##### 6.2.4.8.2 Receive MCVideo call release -- step 2 (R: MCVideo call
release - 2)
Upon receiving an MCVideo call release step 2 request from the application and
signalling, the transmission participant:
1\. shall release all resources including any running timers associated with
the MCVideo call; and
2\. shall enter the \'Start-stop\' state and terminate the current instance of
the \'Transmission control state machine -- basic\'.
#### 6.2.4.9 State: \'U: queued transmission\'
##### 6.2.4.9.1 General
The transmission participant uses this state when a Transmission Media Request
message has been queued by the transmission control server, and is awaiting
the Transmission Granted message.
The timer T102 (Transmission Queue Position Request) can be running in this
state.
##### 6.2.4.9.2 Receive Queue Position Info message (R: Queue Position Info)
Upon receiving a Queue Position Info message, the transmission participant:
1\. if the first bit in the subtype of the Queue Position Info message is set
to \'1\' (Acknowledgment is required) as described in clause 9.2.2.1, shall
send a Transmission control Ack message. The Transmission control Ack message:
a. shall include the Message Type field set to \'5\' (Queue Position Info);
and
b. shall include the Source field set to \'0\' (the transmission participant
is the source);
2\. if the message indicates that the request has been queued or if a request
for the queue position was sent, the transmission participant:
a. may provide the queue position and priority (if available) to the MCVideo
user;
3\. shall stop the timer T102 (Transmission Queue Position Request), if
running; and
4\. shall remain in the \'U: queued transmission\' state.
##### 6.2.4.9.3 Send Queue Position Request message (S: Queue Position
Request)
Upon receipt of an indication from the MCVideo client to request the queue
position, the transmission participant:
1\. shall send the Queue Position Request message;
2\. shall start timer T102 (Transmission Queue Position Request) and
initialize counter C102 (Queue Position Request) to 1; and
3\. remain in the \'U: queued transmission\'\' state.
##### 6.2.4.9.4 Send Transmission end request message (Click Transmission end
button)
Upon receipt of an indication from the MCVideo client to cancel the media
transmit request from the queue, the transmission participant:
1\. shall send the Transmission end request message to the transmission
control server. The Transmission end request message, if the session is a
broadcast call and if the session was established as a normal call, shall
include the Transmission Indicator with the A-bit set to \'1\' (Normal call);
2\. shall start timer T101 (Transmission End Request) and initialize counter
C101 (Transmission End Request) to 1; and
3\. shall enter the \'U: pending end of transmission\' state.
##### 6.2.4.9.5 void
##### 6.2.4.9.6 Receive Transmission cancel request notify message (R:
Transmission Cancel Request Notify)
Upon receiving a Transmission cancel request notify message, the transmission
participant:
1\. if the first bit in the subtype of the Transmission cancel request notify
message is set to \'1\' (Acknowledgment is required) as described in clause
9.2.2.1, shall send a Transmission control Ack message. The Transmission
control Ack message:
a. shall include the Message Type field set to \'10\' (Transmission cancel
request notify); and
b. shall include the Source field set to \'0\' (the transmission participant
is the source);
2\. shall enter in the \'U: has no permission to transmit\' state.
##### 6.2.4.9.7 Timer T102 (Transmission Queue Position Request) expired
On expiry of timer T102 (Transmission Queue Position Request) less than the
upper limit of C102 (Queue Position Request) times, the transmission
participant:
1\. shall send a Queue Position Request message towards the transmission
control server;
2\. shall restart timer T102 (Transmission Queue Position Request) and
increment counter C102 (Queue Position Request) by 1; and
3\. shall remain in the \'U: queued transmission\'\' state.
##### 6.2.4.9.8 Timer T102 (Transmission Queue Position Request) expired N
times
When timer T102 (Transmission Queue Position Request) expires by the upper
limit of counter C102 (Queue Position Request) times, the transmission
participant:
1\. shall provide a queued timeout to the MCVideo client;
2\. send the Transmission End Request message to the transmission control
server;
3\. shall start timer T101 (Transmission End Request) and increment counter
C101 (Transmission End Request) by 1
4\. shall enter the \'U: pending end of transmission\' state.
##### 6.2.4.9.9 Receive Transmission Granted message (R: Transmission Granted)
Upon receiving a Transmission Granted message from the transmission control
server, the transmission participant:
1\. if the first bit in the subtype of the Transmission Granted message is set
to \'1\' (Acknowledgment is required) as described in clause 9.2.2.1, shall
send a Transmission control Ack message. The Transmission control Ack message:
a. shall include the Message Type field set to \'0\' (Transmission Granted);
and
b. shall include the Source field set to \'0\' (the transmission participant
is the source);
2\. shall store the SSRC of granted transmission participant received in the
Transmission Granted message and use it in the RTP media packets until the
transmission is relased;
3\. shall provide Transmission granted notification to the user, if not
already done;
4\. shall stop timer T102 (Transmission Queue position request); and
5\. shall enter the \'U: has permission to transmit\' state.
### 6.2.5 Transmission participant state transition diagram for reception
control operation
#### 6.2.5.1 General
The transmission participant shall behave according to the state diagrams and
the state transitions specified in this clause.
Figure 6.2.5.1-1 shows the state diagram for \'Transmission participant state
transition diagram for general reception control operation\'.
Figure 6.2.5.1-1: Transmission participant state transition diagram for
general reception control operation.
Figure 6.2.5.1-2 shows the state diagram for \'Transmission participant state
transition diagram for basic reception control operation\'.
Figure 6.2.5.1-2: Transmission participant state transition diagram for basic
reception control operation.
The reception control arbitration logic in the transmission control
participant shall keep one instance of the \'general reception control
operation\' state machine per MCVideo call and shall create one instance of
the \'basic reception control operation\' state machine for each \'receive
media request\' of the MCVideo user.
State details are explained in the following clauses.
If an RTP media packet arrives in a state where there is no specific procedure
specified for the RTP media packets or the received reception control message,
the transmission participant shall discard the reception control message or
the RTP media packet and shall remain in the current state.
NOTE: A badly formatted RTP packet or reception control message received in
any state is ignored by the transmission participant and does not cause any
change of the current state.
#### 6.2.5.2 State: \'Start-stop\'
##### 6.2.5.2.1 General
This state is part of \'Transmission participant state transition diagram for
general reception control operation\'. When a new instance of the
\'Transmission participant state transition diagram for general reception
control operation\' is initiated, before any reception control related input
is applied, the state machine is in \'Start-stop\' state. Similarly when the
call is released the state machine shall return to the \'Start-Stop state.
##### 6.2.5.2.2 MCVideo call established, terminating MCVideo user
When an MCVideo call is established, the terminating transmission participant:
1\. shall create an instance of a \'Transmission participant state transition
diagram for general reception control operation\'; and
2\. shall enter the \'U: reception controller\' state.
NOTE: From a transmission participant perspective the MCVideo call is
established when the application and signalling plane sends the SIP 200 (OK)
response.
##### 6.2.5.2.3 MCVideo call initiated, originating MCVideo user
When an MCVideo call is established, the originating transmission participant:
1\. shall create an instance of a \'Transmission participant state transition
diagram for general reception control operation\'; and
2\. shall enter the \'U: reception controller\' state.
NOTE: From a transmission participant perspective the MCVideo call is
established when the application and signalling plane receives the SIP 200
(OK) response.
#### 6.2.5.3 State: \'U: reception controller\'
##### 6.2.5.3.1 General
This state is part of the \'Transmission participant state transition diagram
for general reception control operation\'. The transmission participant is in
this state handles the incoming media transmission notifications and MCVideo
user\'s requests to receive media transmissions.
##### 6.2.5.3.2 Receive Media transmission notification message (R: Media
Transmission Notification)
Upon receiving the media transmission notification from the transmission
control server, the transmission participant:
1\. if the first bit in the subtype of the media transmission notification
message is set to \'1\' (Acknowledgment is required) as described in clause
9.2.2.1, shall send a Transmission control Ack message. The Transmission
control Ack message:
a. shall include the Message Type field set to \'6\' (Media transmission
notification); and
b. shall include the Source field set to \'0\' (the transmission participant
is the source);
2\. shall provide media transmission notification to the user;
3\. shall store the User ID and the SSRC of the user transmitting the media;
4\. if the Reception Mode field is set to \'0\' indicating automatic reception
mode:
a. shall create an instance of the \'Transmission participant state transition
diagram for basic reception control operation\';
b. shall map the stored User ID and the SSRC of the user transmitting the
media with the instance of \'Transmission participant state transition diagram
for basic reception control operation\' created in step a); and
c. shall enter the \'U: has permission to receive\' state;
5\. may display the details of the incoming media to the user; and
6\. shall remain in the \'U: reception controller\' state.
##### 6.2.5.3.3 Send Receive Media Request message (Click video receive
button)
Upon receiving an indication from the user to request permission to receive
media, the transmission participant:
1\. shall send the Receive Media Request message toward the transmission
control server; The Receive Media Request message:
a. if a different priority than the normal priority is required, shall include
the Reception Priority field with the priority not higher than negotiated with
the transmission control server as specified in clause 14.3.3; and
b. if the receive media request is a broadcast group call, system call,
emergency call or an imminent peril call, shall include a Transmission
Indicator field indicating the relevant call types;
2\. shall create an instance of the \'Transmission participant state
transition diagram for basic reception control operation\';
3\. shall map the stored User ID and the SSRC of the user transmitting the
media with instance of \'Transmission participant state transition diagram for
basic reception control operation\' created in step 2; and
4\. shall remain in the \'U: reception controller\' state.
##### 6.2.5.3.4 Receive Transmission end notify message (R: Transmission end
notify)
Upon receiving a Transmission end notify message, the transmission
participant:
1\. shall inform the user about the media transmission ended by another user;
and
2\. shall remain in the \'U: reception controller\' state.
##### 6.2.5.3.5 Receive MCVideo call release -- step 1 (R: MCVideo call
release - 1)
Upon receiving an MCVideo call release step 1 request from the application and
signalling plane when the MCVideo call is going to be released or when the
transmission participant is leaving the MCVideo call, the transmission
participant:
1\. shall stop receiving reception control messages;
2\. shall request the MCVideo client to stop receiving RTP media packets; and
3\. shall enter the \'Call releasing\' state.
#### 6.2.5.4 State: \'U: pending request to receive\'
##### 6.2.5.4.1 General
This state is part of the \'Transmission participant state transition diagram
for basic reception control operation\'. The transmission participant is in
this state when the transmission participant is waiting for response to a
Receive Media Request message.
In this state, the transmission participant can cancel the Receive Media
Request at any time, even before actually receiving response to a Receive
Media Request message.
The transmission participant shall start Timer T103 (Receive Media Request)
and initialize the counter C103 (Receive Media Request) to 1 on entering in
this state.
##### 6.2.5.4.2 Reception of Receive media response (rejected) message (R: RM
response (rejected))
Upon receiving a rejected response for Receive media request message, the
transmission participant:
1\. if the first bit in the subtype of the Receive media response message is
set to \'1\' (Acknowledgment is required) as described in clause 9.2.2.1,
shall send a Transmission control Ack message. The Transmission control Ack
message:
a. shall include the Message Type field set to \'7\' (Receive media response);
and
b. shall include the Source field set to \'0\' (the transmission participant
is the source);
2\. shall provide receive media rejected notification to the user;
3\. may display the receive media rejected reason to the user using
information in the Reject Cause field;
4\. shall stop timer T103 (Receive Media Request); and
5\. shall enter the \'terminated\' state.
##### 6.2.5.4.3 Timer T103 (Receive media request) expired
On expiry of timer T103 (Receive Media Request) less than the upper limit of
counter C103 (Receive Media Request) times the timer is allowed to expire, the
transmission participant:
1\. shall send a Receive Media Request message towards the transmission
control server. The Receive Media Request message:
a. if a different priority than the normal priority is required, shall include
the Reception Priority field with the priority not higher than negotiated with
the transmission control server as specified in clause 14.3.3; and
b. if the receive media request is a broadcast group call, system call,
emergency call or an imminent peril call, shall include a Transmission
Indicator field indicating the relevant call types;
2\. shall restart timer T103 (Receive media request) and increment counter
C103 (Receive Media Request) by 1; and
3\. shall remain in the \'U: pending request to receive\' state.
##### 6.2.5.4.4 Timer T103 (Receive Media Request) expired N times
When timer T103 (Receive Media Request) expires by the upper limit of counter
C103 (Receive Media Request), the transmission participant:
1\. shall provide a receive media request timeout notification to the user;
and
2\. shall enter the \'terminated\' state.
##### 6.2.5.4.5 Reception of Receive media response (granted) message (R: RM
response (granted))
Upon receiving a granted response for Receive media request message, the
transmission participant:
1\. if the first bit in the subtype of the Receive media response message is
set to \'1\' (Acknowledgment is required) as described in clause 9.2.2.1,
shall send a Transmission control Ack message. The Transmission control Ack
message:
a. shall include the Message Type field set to \'7\' (Receive media response);
and
b. shall include the Source field set to \'0\' (the transmission participant
is the source);
2\. shall provide receive media success notification to the user;
3\. if the Receive Media Indicator field is included and the B-bit is set to
\'1\' (Broadcast group call), shall provide a notification to the user
indicating the type of call;
4\. shall stop timer T103 (Receive Media Request); and
5\. shall enter the \'U: has permission to receive\' state.
##### 6.2.5.4.6 Media reception request cancel (Click video reception end
button)
Upon receiving an indication from the user to cancel the Receive Media
Request, the transmission participant:
1\. shall send a Media reception end request message towards the transmission
control server The Media reception end request message:
a. if the session is a broadcast call and if the session was established as a
normal call, shall include the Transmission Indicator with the A-bit set to
\'1\' (Normal call); and
b. shall include the SSRC of user transmitting the media in the Media
reception end request message;
2\. shall remove the indication that the participant is overriding without
revoke if this indication is stored;
3\. shall remove the indication that the participant is overridden without
revoke if this indication is stored;
4\. shall stop timer T103 (Receive Media Request);
5\. shall start timer T104 (Receive Media Release) and initialize counter C104
(Receive Media Release) to 1; and
6\. shall enter the \'U: pending reception release\' state.
#### 6.2.5.5 State: \'U: has permission to receive\'
##### 6.2.5.5.1 General
This state is part of the \'Transmission participant state transition diagram
for basic reception control operation\'. The transmission participant is in
this state when the MCVideo client is permitted to receive RTP media.
In this state, the transmission participant can end the reception of RTP media
at any time, even before actually receiving any media.
##### 6.2.5.5.2 Receive RTP media packets (R: RTP media)
Upon receiving indication from the transmission control server that encoded
video is received from the source, the transmission participant:
NOTE: RTP media packets can be received from multiple sources by the
transmission control server. The MCVideo client can differentiate between the
different sources using the SSRC in the received RTP media packets. How the
media mixer in the MCVideo client mixes the different RTP media stream sources
is out of scope of the present document.
1\. shall receive the encoded video from the MCVideo server; and
2\. shall remain in the \'U: has permission to receive\' state.
##### 6.2.5.5.3 Media reception end request message (Click video reception end
button)
Upon receiving an indication from the user to end the RTP media reception, the
transmission participant:
1\. shall send a Media reception end request message towards the transmission
control server The Media reception end request message:
a. if the session is a broadcast call and if the session was established as a
normal call, shall include the Transmission Indicator with the A-bit set to
\'1\' (Normal call); and
b. shall include the SSRC of user transmitting the media in the Media
reception end request message;
2\. shall remove the indication that the participant is overriding without
revoke if this indication is stored;
3\. shall remove the indication that the participant is overridden without
revoke if this indication is stored;
4\. shall start timer T104 (Receive Media Release) and initialize counter C104
(Receive Media Release) to 1; and
5\. shall enter the \'U: pending reception release\' state.
##### 6.2.5.5.4 Receive Media reception override notify message (R: Media Rx
override notify)
Upon receiving a Media reception override notify message, the transmission
participant:
1\. shall inform the user that the permission to receive a RTP media is being
overriden;
2\. may give information to the user about the reason for overriding the
received RTP media;
3\. shall send a Media reception end request message towards the transmission
control server;
4\. shall start timer T104 (Receive Media Release) and initialize counter C104
(Receive Media Release) to 1; and
5\. shall enter the \'U: pending reception release\' state.
##### 6.2.5.5.5 Receive Media reception end request message (R: MRE request)
Upon receiving a Media reception end request message, the transmission
participant:
1\. if the first bit in the subtype of the Media reception end request message
set to \"1\" (Acknowledgment is required) as described in clause 8.3.2, shall
send a Reception control Ack message. The Reception control Ack message:
a. shall include the Message Type field set to \'2\' (Media reception end
request);
b. shall include the Source field set to \'0\' (the transmission participant
is the source); and
c. shall include the Message Name field set to MCV2.
2\. shall inform the user that the receiving RTP media is being ended;
3\. may give information to the user about the reason for ending the received
RTP media;
4\. shall request the MCVideo client to discard any remaining buffered RTP
media packets and stop displaying to user;
5\. shall send a Media reception end response message towards the transmission
control server;
6\. may provide a Media reception end notification to the MCVideo user;
7\. if the Receive Media Indicator field is included and the B-bit set to
\'1\' (Broadcast group call), shall provide a notification to the user
indicating the type of call; and
8\. shall enter the \'terminated\' state.
##### 6.2.5.5.6 Void
#### 6.2.5.6 State: \'U: pending reception release\'
##### 6.2.5.6.1 General
This state is part of the \'Transmission participant state transition diagram
for basic reception control operation\'. The transmission participant is in
this state when the transmission participant is waiting for response to a MRE
request message.
Timer T104 (Receive Media Release) is running in this state.
##### 6.2.5.6.2 Timer T104 (Receive Media Release) expired
On expiry of timer T104 (Receive Media Release) less than the configurable
number of the upper limit of counter C104 (Receive Media Release) times, the
transmission participant:
1\. shall send a MRE request message towards the transmission control server;
2\. shall restart timer T104 (Receive Media Release) and increment counter
C104 (Receive Media Release) by 1; and
3\. shall remain in state \'U: pending reception release\'.
##### 6.2.5.6.3 Timer T104 (Receive media release) expired N times
When timer T104 (Receive media Release) expires by the upper limit of counter
C104 (Receive Media Release) times, the transmission participant:
1\. shall enter the \'terminated\' state.
##### 6.2.5.6.4 Receive Media Reception End Response message (R: MRE response)
Upon receiving a MRE response message, the transmission participant:
1\. if the first bit in the subtype of the MRE response message set to \'1\'
(Acknowledgment is required) as described in clause 9.2.2.1, shall send a
Transmission control Ack message. The Transmission control Ack message:
a. shall include the Message Type field set to \'3\' (Media reception end
response); and
b. shall include the Source field set to \'0\' (the transmission participant
is the source);
2\. may provide a Media reception end notification to the MCVideo user;
3\. if the Receive Media Indicator field is included and the B-bit set to
\'1\' (Broadcast group call), shall provide a notification to the user
indicating the type of call;
4\. shall stop timer T104 (Receive Media Release); and
5\. shall enter the \'terminated\'.
##### 6.2.5.6.5 Void
#### 6.2.5.7 Void
##### 6.2.5.7.1 Void
##### 6.2.5.7.2 Void
##### 6.2.5.7.3 Void
##### 6.2.5.7.4 Void
#### 6.2.5.8 State: \'U: terminated\'
##### 6.2.5.8.1 General
This state is part of the \'Transmission participant state transition diagram
for basic reception control operation\'. On entering this state, the
transmission participant:
1\. shall delete the instance of this basic reception control state machine;
and
2\. if the session was initiated as a broadcast group call, shall indicate to
the \'Transmission participant state transition diagram for general reception
control operation\' state machine to move to \'Call releasing\' state.
#### 6.2.5.9 State: \'Call releasing\'
##### 6.2.5.9.1 General
This state is part of the \'Transmission participant state transition diagram
for general reception control operation\'. The transmission participant is in
this state while waiting for the application and signalling plane to finalize
the disconnection of an MCVideo call.
##### 6.2.5.9.2 Receive MCVideo call release -- step 2 (R: MCVideo call
release - 2)
Upon receiving an MCVideo call release step 2 request from the application and
signalling, the transmission participant:
1\. shall release all resources including any running timers associated with
the MCVideo call;
2\. shall terminate all instance(s) of the \'Transmission participant state
transition diagram for basic reception control operation\'; and
3\. shall enter the \'Start-stop\' state and terminate the current instance of
the \'Transmission participant state transition diagram for general reception
control operation\'.
## 6.3 Transmission control server procedures
### 6.3.1 General
The transmission control server arbitration logic in the transmission control
server shall support the procedures in clauses 6.3.2 and 6.3.3 and shall
behave according to the transmission control server state transition diagram
for \'general transmission control operation\' in clause 6.3.4.
The transmission control interface towards the MCVideo client in the
transmission control server shall behave according to the transmission control
server state transition diagram for \'basic transmission control operation
towards the transmission participant\' as specified in clause 6.3.5.
The reception control arbitration logic in the transmission control server
shall support the procedures in clauses 6.3.2 and 6.3.3 and shall behave
according to the reception control server state transition diagram for
\'general reception control operation\' in clause 6.3.6.
The transmission control interface towards the MCVideo client in the
transmission control server shall behave according to the transmission control
server state transition diagram for \'basic reception control operation
towards the transmission participant\' as specified in clause 6.3.7.
### 6.3.2 Controlling MCVideo function procedures at MCVideo call
initialization
#### 6.3.2.1 General
The clause 6.3.2.2 describes the initial procedures when a new SIP session is
establishing a group session or a private session with transmission control.
#### 6.3.2.2 Initial procedures
When an MCVideo call is established a new instance of the transmission control
server state machine for \'general transmission control operation\' is
created.
For each MCVideo client added to the MCVideo call, a new instance of the
transmission control server state machine for \'basic transmission control
operation towards the transmission participant\' is added.
If the optional \"mc_queueing\" feature is supported and has been negotiated
as specified in clause 14, the transmission control server could queue the
implicit transmission control request for the media-transmission control
entity.
The original initial SIP INVITE request or SIP REFER request to establish an
MCVideo chat group call or to rejoin an ongoing MCVideo call is not handled as
an implicit transmission control request message by the transmission control
server unless explicitly stated in the SIP INVITE request or in the SIP REFER
request.
The permission to send media to the inviting MCVideo client due to implicit
transmission control request is applicable to both confirmed indication and
unconfirmed indication.
When the first unconfirmed indication is received from the invited
participating MCVideo function (see 3GPP TS 24.281 [2]) the transmission
control server optionally can give an early indication to send RTP media
packets, to the inviting MCVideo client.
If an early indication to send RTP media packets is given to the inviting
MCVideo client, the transmission participant is granted the permission to send
media and the MCVideo server buffers RTP media packets received from the
MCVideo client at least until the first invited MCVideo client accepts the
invitation or until the RTP media packet buffer exceeds it maximum limit to
store RTP media packets.
If the MCVideo server does not support or does not allow media buffering then
when an early indication to send RTP media packets is not given to the
inviting MCVideo client, the transmission participant is granted the
permission to send media when the first invited MCVideo client accepts the
media.
Before the transmission control server sends the first transmission control
message in the MCVideo call, the transmission control server has to assign
itself a SSRC identifier to be included in media transmission control messages
and quality feedback messages if the MCVideo server is supporting that option.
A suitable algorithm to generate the SSRC identifier is described in IETF RFC
3550 [3].
The transmission participant and the transmission control server can negotiate
the maximum priority level that the transmission participant is permitted to
request. The transmission control server can pre-empt the current sender based
on the negotiated maximum priority level that the transmission participant is
permitted to request and the priority level included in the Transmission Media
Request message.
NOTE: The maximum priority level that a transmission participant can use is
negotiated as specified in clause 14.3.3 and is based on group configuration
data retrieved by the controlling MCVideo function from the group management
server as described in 3GPP TS 24.481 [12] and service configuration data
retrieved by the controlling MCVideo function from the configuration
management server as described in 3GPP TS 24.484 [13].
The transmission participant and the transmission control server can negotiate
queueing of Transmission requests using the \"mc_queueing\" fmtp attribute as
described in clause 14. If queueing is supported and negotiated, the
transmission control server queues the transmission control request if a
Transmission Media Request message is received when another transmission
participant has the transmission and the priority of the current speaker is
the same or higher.
#### 6.3.2.3 Switching from a non-controlling MCVideo function mode to a
controlling MCVideo function mode
When the MCVideo server switches from the non-controlling MCVideo function
mode to controlling MCVideo function mode a new instance of the transmission
control server state machine for \'general transmission control operation\' is
created.
For each MCVideo client in the MCVideo call a new instance of the transmission
control server state machine for \'basic transmission control operation
towards the transmission participant\' is added.
Any transmission request in the passive transmission request queue is moved to
the active transmission request queue.
NOTE: The passive transmission request queue is a transmission request queue
used by the non-controlling MCVideo function as specified in clause 6.5.4 to
monitor transmission requests sent by transmission participants controlled by
the non-controlling MCVideo function.
### 6.3.3 MCVideo transmission control procedures at MCVideo call release
When an MCVideo client leaves an MCVideo call and the MCVideo call remains
ongoing with the other MCVideo clients, the transmission control server
follows a two-step procedure.
> Step 1 The MCVideo server stops sending transmission control messages and
> RTP media packets to the MCVideo client leaving the MCVideo call and .the
> MCVideo server discards transmission control messages and RTP media packets
> received from the MCVideo client leaving the MCVideo call.
>
> Step 2 When the application and signalling plane has determined that the
> MCVideo call with this transmission participant has been released, the
> corresponding instance of the transmission control server state machine for
> \'basic transmission control operation towards the transmission
> participant\' is released.
When an MCVideo call is released, the transmission control server follows a
two-step procedure.
> Step 1 The MCVideo server stops sending transmission control messages and
> RTP media packets to all transmission participants in the MCVideo call.
>
> Step 2 When the application and signalling plane has determined that the
> MCVideo call has been released, the corresponding instance of the
> transmission control server state machine for \'general transmission control
> operation\' are also terminated, along with any \'basic transmission control
> operation towards the transmission participant\' state machines for the
> transmission participants of this call.
The transmission control server state machine for general transmission control
operation initiates the MCVideo call release depending on the release policy
specified in 3GPP TS 24.281 [2].
### 6.3.4 Transmission control server state transition diagram for general
transmission control operation
#### 6.3.4.1 General
The transmission control server arbitration logic in the transmission control
server shall behave according to the state diagram and state transitions
specified in this clause.
Figure 6.3.4.1-1 shows the general transmission control operation states (G
states) and the state transition diagram.
Figure 6.3.4.1-1: Transmission control server state transition diagram for
\'general transmission control operation\'
The transmission control arbitration logic in the transmission control server
shall keep one instance of the \'general transmission control operation\'
state machine per MCVideo call.
If transmission control messages or RTP media packets arrives in a state where
there is no procedure specified in the following clauses the transmission
control arbitration logic in the transmission control server:
1\. shall discard the transmission control message;
2\. shall request the media distributor in the MCVideo server to discard any
received RTP media packet; and
3\. shall remain in the current state.
State details are explained in the following clauses.
#### 6.3.4.2 State: \'Start-stop\'
##### 6.3.4.2.1 General
When a new instance of the \'general transmission control operation\' state
machine is initiated, before any transmission control related input is
applied, the state machine is in \'Start-stop\' state. Similarly when the call
is released the state machine shall return to the \'Start-stop\' state or the
related MCVideo call is released.
##### 6.3.4.2.2 MCVideo call initialization
When an MCVideo call is initiated as specified in 3GPP TS 24.281 [2] and
1\. if a confirmed indication is required and at least one invited MCVideo
client has accepted the invitation;
2\. if a confirmed indication is not required; or
then the transmission control arbitration logic in the transmission control
server:
1\. shall create an instance of the \'general transmission control operation\'
state machine;
2\. shall wait for the \'basic transmission control operation towards the
transmission participant\' to be initialized before continuing the following
steps;
3\. when the \'basic transmission control operation towards the transmission
participant\' state machine is initialized and the initialised session is not
a temporary group session:
a. if the \"mc_granted\" fmtp attribute is not negotiated as specified in
clause 14:
i. if the transmission control server is granting an implicit Transmission
request at MCVideo call establishment, shall act as if a Transmission Media
Request message was received and perform the actions specified in clause
6.3.4.3.3; or
ii. if the transmission control server is not granting an implicit
Transmission request at MCVideo call establishment, shall enter the \'G:
Transmit Idle\' state as specified in clause 6.3.4.3.2; or
b. if the \"mc_granted\" fmtp attribute is negotiated as specified in clause
14, shall enter the \'G: Transmit Taken\' state as specified in clause
6.3.4.4.2.
#### 6.3.4.3 State: \'G: Transmit Idle\'
##### 6.3.4.3.1 General
The transmission control arbitration logic in the transmission control server
is in this state when no MCVideo user currently has permission to send media.
Timer T1 (Inactivity) and timer T2 (Transmit Idle) can be running when the
transmission control arbitration logic in the transmission control server is
in this state.
##### 6.3.4.3.2 Enter the \'G: Transmit Idle\' state
When entering this state from any state except the \'Start-stop\' state and if
no MCVideo client negotiated support of queueing Transmission requests as
described in clause 14, the transmission control arbitration logic in the
transmission control server:
1\. if the active Transmission request queue is empty the transmission control
server:
a. shall send Transmission Idle message to all transmission participants. The
Transmission Idle message:
i. shall include a Message Sequence Number field with a Message Sequence
Number value increased with 1; and
ii. if a group call is a broadcast group call, a system call, an emergency
call, an imminent peril call, or a temporary group session, shall include the
Transmission Indicator field with appropriate indications;
b. shall start timer T2 (Transmit Idle) and initialise counter C2 (Transmit
Idle) to 1;
c. shall start timer T1 (Inactivity);
d. shall set the general state to the \'G: Transmit Idle\' state; and
e. shall initialise counter Cx (Simultaneous transmission video) to 0.
2\. if the active Transmission request queue is not empty the transmission
control server:
a. shall select a queued Transmission request from the top of the active
Transmission request queue;
b. shall remove that queued Transmission request from the active Transmission
request queue; and
c. shall enter the \'G: Transmit Taken\' state as specified in the clause
6.3.4.4.2 with respect to that transmission participant.
##### 6.3.4.3.3 Receive Transmission Media Request message (R: Transmission
Media Request)
Upon receiving a Transmission request message (from a transmission participant
that is permitted to make a Transmission request) the transmission control
arbitration logic in the transmission control server:
1\. shall reject the request if one of the following conditions is fulfilled:
a. if there is only one MCVideo client in the MCVideo call; and
b. \ element is present in the \ element as
specified 3GPP TS 24.481 [12] for the associated transmission participant;
2\. if the Transmission request is rejected the transmission control server:
a. shall send the Transmission Reject message. The Transmission Reject
message:
i. shall include in the Reject Cause field the \ value:
A. cause #3 (Only one participant), if there is only one MCVideo client in the
MCVideo call; or
B. cause #5 (Receive only), if the \ element is present
in the \ element as specified in 3GPP TS 24.481 [12] for the associated
transmission participant;
ii. may include an additional text string explaining the reason for rejecting
the Transmission request in the \ value of the Reject Cause
field; and
b. shall remain in the \'G: Transmit Idle\' state; and
3\. if the Transmission request is granted the transmission control server:
a. shall stop timer T1 (Inactivity);
b. shall stop timer T2 (Transmit Idle);
c. shall store the SSRC of transmission participant granted the permission to
send media until the transmission is released associated to that Transmission
request;
d. shall enter the \'G: Transmit Taken\' state as specified in the clause
6.3.4.4.2.
##### 6.3.4.3.4 Timer T2 (Transmit Idle) expired
On expiry of timer T2 (Transmit Idle) the transmission control arbitration
logic in the transmission control server:
1\. shall restart timer T2 (Transmit Idle) and increment counter C2 (Transmit
Idle) by 1 if counter C2 (Transmit Idle) has not reached its upper limit;
2\. shall send a Transmission Idle message to all transmission participants in
the MCVideo call if counter C2 (Transmit Idle) has not reached its upper
limit. The Transmission Idle message:
a. shall include a Message Sequence Number field with a \ value increased with 1; and
3\. shall remain in the \'G: Transmit Idle\' state.
##### 6.3.4.3.5 Timer T1 (Inactivity) expired
On expiry of timer T1 (Inactivity) the transmission control arbitration logic
in the transmission control server based on a configurable service provider
policy either:
1\. shall indicate to the application and signalling plane that timer T1
(Inactivity) has expired;
2\. if the application and signalling planes initiates MCVideo call release,
shall enter the \'Releasing\' state; and
3\. if the application and signalling planes do not initiate MCVideo call
release:
a. should restart the T1 (Inactivity) timer; and
b. shall remain in the \'G: Transmit Idle\' state.
##### 6.3.4.3.6 Receive an implicit Transmission request (R: Implicit
Transmission request)
Upon receiving an implicit Transmission request due to an upgrade to an
emergency group call or due to an upgrade to imminent peril call, the
transmission control arbitration logic in the transmission control server:
1\. shall reject the request if there is only one MCVideo client in the
MCVideo call;
2\. if the Transmission request is rejected the transmission control server:
a. shall send the Transmission Reject message. The Transmission Reject
message:
i. shall include in the Reject Cause field the \ value cause #3
(Only one participant); and
ii. may include in the Reject Cause field an additional text string explaining
the reason for rejecting the Transmission request in the \
value; and
b. shall remain in the \'G: Transmit Idle\' state; and
3\. if the Transmission request is granted the transmission control server:
a. shall stop the timer T1 (Inactivity);
b. shall stop the timer T2 (Transmit Idle);
c. shall store the SSRC of transmission participant granted the permission to
send media until the transmission is released associated to that Transmission
request; and
d. shall enter the \'G: Transmit Taken\' state as specified in the clause
6.3.4.4.2.
#### 6.3.4.4 State: \'G: Transmit Taken\'
##### 6.3.4.4.1 General
The transmission control arbitration logic in the transmission control server
uses this state when it has permitted at least one of the MCVideo clients in
the MCVideo call to send media.
Timer T4 (Transmission Grant) is running to guarantee reliable delivery of the
Transmission Grant message, if the granted Transmission request was queued.
##### 6.3.4.4.2 Enter the \'G: Transmit Taken\' state
When entering this state the transmission control arbitration logic in the
transmission control server:
1\. shall send a Transmission Grant message to the requesting transmission
participant. The Transmission Grant message:
a. shall include the granted priority in the Transmission priority field;
b. shall increment counter Cx (Simultaneous transmission video) by 1 if
counter Cx (Simultaneous transmission video) has not reached its upper limit;
c. if a group call is a broadcast group call, system call, emergency call, an
imminent peril call or a temporary group session, shall include the
Transmission Indicator field with appropriate indications; and
d. shall include the SSRC of the granted transmission participant to be used
by the MCVideo user transmitting the media;
2\. shall start timer T4 (Transmission Granted) if the Transmission request
was queued and initialise the counter C4 (Transmission Grant) to 1;
3\. shall send Media Transmission notify message to the reception control
arbitration logic. The Media Transmission notification message:
a. shall include the granted MCVideo user\'s MCVideo ID in the User ID field,
if privacy is not requested;
b. shall include the granted MCVideo user\'s SSRC in the SSRC of transmitter
field;
c. shall include a Message Sequence Number field with a Message Sequence
Number value increased with 1;
d. if the session is a broadcast group call, shall include the Permission to
Request the Transmission field set to \'0\';
e. if the session is not a broadcast group call, may include the Permission to
Request the Transmission field set to \'1\';
f. if a group call is a broadcast group call, a system call, an emergency
call, an imminent peril call, or a temporary group session, shall include the
Transmission Indicator field with appropriate indications; and
g. shall initiate the \'general reception control operation\' state
machine;and
4\. shall enter the \'G: Transmit Taken\' state.
##### 6.3.4.4.5 Receive RTP media packets (R: RTP media)
Upon receiving an indication from the media distributor in the MCVideo server
that RTP media packets are received from the permitted MCVideo client, the
transmission control arbitration logic in the transmission control server:
1\. shall stop timer T4 (Transmission Grant), if running;
2\. shall instruct the media distributor to forward the RTP media packets to
MCVideo clients according to local policy and reception control machine state;
and
3\. shall remain in the \'G: Transmit Taken\' state.
##### 6.3.4.4.6 Receive Transmission End Request message (R: Transmission End
Request)
Upon receiving a Transmission End Request message the transmission control
arbitration logic in the transmission control server:
1\. shall decrement counter Cx (Simultaneous transmission video) by 1 if
counter Cx (Simultaneous transmission video) has not reached its lower limit;
2\. shall request the media distributor in the MCVideo server to stop
forwarding RTP media packets for the requesting participant;
3\. shall stop timer T4 (Transmission grant), if running;
4\. shall send a Transmission End Response message; and
5\. if Cx (Simultaneous transmission video) has reached it lower limit, shall
enter the \'G: Transmit Idle\' state as specified in the clause 6.3.4.3.2.
##### 6.3.4.4.7A Receive Transmission Media Request message without pre-
emptive priority (R: Transmission Media Request)
Upon receiving a Transmission Media Request message the transmission control
arbitration logic in the transmission control server:
1\. shall reject the request if one of the following conditions is fulfilled:
a. if the counter Cx (Simultaneous transmission video) has reached its upper
limit and did not negotiate queueing; and
b. \ element is present in the \ element as
specified 3GPP TS 24.481 [12] for the associated transmission participant;
2\. if the request is rejected the transmission control server:
a. shall send the Transmission Media Deny message. The Transmission Media Deny
message:
i. shall include in the Reject Cause field the \ value - cause
#5 (Receive only), if the \ element is present in the
\ element as specified in 3GPP TS 24.481 [12] for the associated
transmission participant;
ii. may include an additional text string explaining the reason for rejecting
the transmission request in the \ value of the Reject Cause
field; and
b. shall remain in the \'G: Transmission Taken\' state.
3\. if counter Cx (Simultaneous transmission video) has not reached its upper
limit:
a. if the Transmission Media request is granted the transmission control
server:
i. shall perform the actions specified in the clause 6.3.4.4.2;
##### 6.3.4.4.7 Receive Transmission Media Request message with pre-emptive
priority (R: pre-emptive Transmission Media Request)
On receipt of a Transmission request message with effective priority
indicating pre-emptive priority, the transmission control arbitration logic in
the transmission control server:
1\. if counter Cx (Simultaneous transmission video) has not reached its upper
limit:
i. shall perform the actions specified in the clause 6.3.4.4.2;
2\. if the counter Cx (Simultaneous transmission video) has not reached its
upper limit, and if the effective priority of the transmission participants
with permission to send media is not the pre-emptive priority, based on local
policy:
a. select one of the transmission participants with permission to send media
without the pre-emptive priority revoke the current speaker;
b. shall stop timer T4 (Transmission Grant), if running;
c. shall include a Reject Cause field with the \ value set to #4
(Media Transmission pre-empted) in the Transmission Revoke message sent in
clause 6.3.4.5.2;
d. shall enter the \'G: pending Transmission Revoke\' state as specified in
the clause 6.3.4.5.2;
e. shall insert the transmission participant into the active Transmission
request queue to the position in front of all queued requests, if not inserted
yet or update the position of the transmission participant in the active
Transmission request queue to the position in front of all other queued
requests, if already inserted; and
f. shall send a Queue Position Info message to the requesting transmission
participant, if negotiated support of queueing of Transmission requests as
specified in clause 14. The Queue Position Info message:
i. include the queue position and transmission priority in the Queue Info
field.
##### 6.3.4.4.8 Receive Transmission request message from permitted
transmission participant (R: Transmission Media Request)
Upon receiving a Transmission request message from the transmission
participant that has been granted permission to send media, the transmission
control arbitration logic in the transmission control server:
1\. shall send a Transmission Grant message to the previously granted
transmission participant. The Transmission Grant message:
a. shall include the granted priority in the Transmission priority field; and
2\. shall remain in the \'G: Transmit Taken\' state.
##### 6.3.4.4.9 Timer T4 (Transmission Grant) expired
On expiry of timer T4 (Transmission Grant), the transmission control
arbitration logic in the transmission control server:
1\. shall send a Transmission Grant message to the granted transmission
participant if counter C4 (Transmission Grant) has not reached its upper
limit: The Transmission Grant message:
a. shall include the granted priority in the Transmission priority field; and
b. if a group call is a broadcast group call, a system call, an emergency
call, an imminent peril call, or a temporary group session, shall include the
Transmission Indicator field with appropriate indications;
2\. shall start timer T4 (Transmission Grant) and increment counter C4
(Transmission Grant) by 1 if counter C4 (Transmission Grant) has not reached
its upper limit; and
3\. shall remain in the \'G: Transmit Taken\' state.
##### 6.3.4.4.10 Timer T4 (Transmission Grant) expired N times
When timer T4 (Transmission Grant) expires and counter C4 (Transmission Grant)
reaches its upper limit, the transmission control arbitration logic in the
transmission control server:
1\. shall remain in the \'G: Transmit Taken\' state.
##### 6.3.4.4.11 Permitted MCVideo client release (R: client release)
If the transmission control server receives an indication from the
transmission control interface towards the MCVideo client that the MCVideo
client has started to disconnect from the MCVideo call, the transmission
control arbitration logic in the transmission control server:
1\. if the counter Cx (Simultaneous transmission video) equals 1, shall enter
the \'G: Transmit Idle\' state as specified in the clause 6.3.4.3.2.
##### 6.3.4.4.12 Receive an implicit Transmission request (R: Implicit
Transmission request)
Upon receiving an implicit Transmission request due to an upgrade to an
emergency group call or due to an upgrade to imminent peril call, the
transmission control arbitration logic in the transmission control server:
1\. if counter Cx (Simultaneous transmission video) has not reached its upper
limit:
a. shall perform the actions specified in the clause 6.3.4.4.2;
2\. if counter Cx (Simultaneous transmission video) has reached its upper
limit:
a. select one of the transmission participants with permission to send media
without the pre-emptive priority or low effective priority;
b. shall stop timer T4 (Transmission Grant), if running;
c. shall set the Reject Cause field in the Transmission Revoke message to #4
(Media Transmission pre-empted);
d. shall enter the \'G: pending Transmission Revoke\' state as specified in
the clause 6.3.4.5.2;
e. shall insert the transmission participant into the active Transmission
request queue to the position in front of all queued requests, if not inserted
yet or update the position of the transmission participant in the active
Transmission request queue to the position in front of all other queued
requests, if already inserted; and
f. shall send a Transmission Queue Position Info message to the requesting
transmission participant, if negotiated support of queueing Transmission
requests as specified in clause 14. The Queue Position Request message:
i. shall include the queue position and transmission priority in the Queue
Info field; and
ii. if a group call is a broadcast group call, a system call, an emergency
call, an imminent peril call, or a temporary group session, shall include the
Transmission Indicator field with appropriate indications.
##### 6.3.4.4.13 Send Transmission End Request message (S: Transmission End
Request)
Upon receiving a Transmission End Request message, the transmission control
arbitration logic in the transmission control server:
1\. shall stop timer T4 (Transmission grant), if running;
2\. shall include a Reject Cause field with the \ value set to
#8 (No receiving participant),) in the Transmission End Request message sent
in clause 6.3.4.5.2;
i. may include an additional text string explaining the reason for rejecting
the Transmission request in the \ value of the Reject Cause
field; and
3\. shall enter the \'G: pending Transmission Revoke\' state as specified in
the clause 6.3.4.5.2.
#### 6.3.4.5 State: \'G: pending Transmission Revoke\'
##### 6.3.4.5.1 General
The transmission control arbitration logic in the transmission control server
uses this state after having sent a Transmission Revoke or Transmission End
Request message to the permitted transmission participant.
In this state the MCVideo server forwards RTP media packets to the other
transmission participants in the MCVideo call.
NOTE : As the functionality of both Transmission End Request message and
Transmission Revoke message sent from server is mostly same on client and
server side, currently the handling of Transmission End Request message is
added in \'G: pending Transmission Revoke\' state. A new state can also be
created later for this purpose if required.
##### 6.3.4.5.2 Enter the \'G: pending Transmission Revoke\' state
When entering this state the transmission control arbitration logic in the
transmission control server:
1\. shall send the Transmission Revoke or Transmission End Request message to
the permitted transmission participant. The Transmission Revoke or
Transmission End Request message:
a. shall include the reason for sending the Transmission Revoke or
Transmission End Request message in the \ value in the Reject
Cause field; and
b. if a group call is a broadcast group call, a system call, an emergency
call, an imminent peril call, or a temporary group session, shall include the
Transmission Indicator field with appropriate indications; and
2\. shall set the general state to \'G: pending Transmission Revoke\'.
##### 6.3.4.5.3 Receive RTP media packets (R: RTP media)
Upon receiving an indication from the media distributor in the MCVideo server
that RTP media packets are received from the permitted transmission
participant the transmission control server:
1\. shall instruct the media distributor to forward the RTP media packets to
MCVideo clients according to local policy; and
2\. shall remain in the \'G: pending Transmission Revoke\' state.
##### 6.3.4.5.4 Receive Transmission End Request message (R: Transmission End
Request)
Upon receiving a Transmission End Request message the transmission control
arbitration logic in the transmission control server:
1\. shall request the media distributor in the MCVideo server to stop
forwarding RTP media packets for the requesting transmission participant; and
2\. shall decrease Cx (Simultaneous transmission video) by 1 if Cx
(Simultaneous transmission video) has not reached it lower limit;
3\. shall send a Transmission End Response message;
4\. if Cx (Simultaneous transmission video) has reached lower limit, enter the
\'G: Transmit Idle\' state as specified in the clause 6.3.4.3.2.
5\. if Cx (Simultaneous transmission video) has not reached lower limit and if
the active Transmission request queue is not empty the transmission control
server:
a. shall select a queued Transmission request from the top of the active
Transmission request queue;
b. shall remove that queued Transmission request from the active Transmission
request queue; and
c. shall enter the \'G: Transmit Taken\' state as specified in the clause
6.3.4.4.2 with respect to that transmission participant.
##### 6.3.4.5.5 Void
##### 6.3.4.5.6 Void
##### 6.3.4.5.7 Receive Transmission End Response message (R: Transmission End
Response)
Upon receiving a Transmission End Response message, the transmission control
arbitration logic in the transmission control server:
1\. shall request the media distributor in the MCVideo server to stop
forwarding RTP media packets for the requesting transmission participant; and
2\. shall decrease Cx (Simultaneous transmission video) by 1 if Cx
(Simultaneous transmission video) has not reached its lower limit;
3\. if Cx (Simultaneous transmission video) has reached lower limit, enter the
\'G: Transmit Idle\' state as specified in the clause 6.3.4.3.2.
4\. if Cx (Simultaneous transmission video) has not reached lower limit and if
the active Transmission request queue is not empty the transmission control
server:
a. shall select a queued Transmission request from the top of the active
Transmission request queue;
b. shall remove that queued Transmission request from the active Transmission
request queue; and
c. shall enter the \'G: Transmit Taken\' state as specified in the clause
6.3.4.4.2 with respect to that transmission participant.
#### 6.3.4.6 In any state
##### 6.3.4.6.1 General
This clause describes the actions to be taken in all states defined for the
general state diagram with the exception of the \'Start-stop\' state.
##### 6.3.4.6.2 Receive MCVideo call release - 1
This clause is used by the transmission control arbitration logic in the
transmission control server when an MCVideo call is released.
Upon receiving an MCVideo call release step 1 request from the application and
signalling plane the transmission control arbitration logic in the
transmission control server:
1\. shall request the media distributor in the MCVideo server to stop sending
RTP media packets MCVideo clients; and
2\. shall enter the \'Releasing\' state.
#### 6.3.4.7 State: \'Releasing\'
##### 6.3.4.7.1 General
The transmission control arbitration logic in the transmission control server
uses this state while waiting for the application and signalling plane to
finalize the disconnection of an MCVideo call.
##### 6.3.4.7.2 Receive MCVideo call release - 2
Upon receiving an MCVideo call release step 2 request from the application and
signalling plane, the transmission control arbitration logic in the
transmission control server:
1\. shall release all resources reserved in the media plane including the
instances used for the \'Transmission control server state transition diagram
for general transmission control operation\', and \'Transmission control
server state transition diagram for basic transmission control operation
towards the transmission participant\' state machines and any running timers
associated with the state machines; and
2\. shall enter the \'Start-stop\' state.
### 6.3.5 Transmission control server state transition diagram for basic
transmission control operation towards the transmission participant
#### 6.3.5.1 General
The transmission control interface towards the MCVideo client in the
transmission control server shall behave according to the state diagram and
state transitions specified in this clause.
Figure 6.3.5.1-1 shows the states and state transitions for an associated
transmission participant in the transmission control server.
Figure 6.3.5.1-1: Transmission control server state transition diagram for
basic transmission control operation towards the transmission participant
The transmission control interface towards the MCVideo client in the
transmission control server shall create one instance of the \'basic
transmission control operations\' state machine towards the MCVideo client for
every transmission participant served by the transmission control server as
follows:
1\. For pre-arranged group call in case of an originating MCVideo call, the
\'basic transmission control operation towards the transmission participant\'
state machine shall be created when the MCVideo server sends the SIP 200 (OK)
response towards the originating MCVideo client.
2\. For pre-arranged group call in case of a terminating MCVideo call, the
\'basic transmission control operation towards the transmission participant\'
state machine shall be created when the transmission control server receives
the SIP 200 (OK) response.
3\. For chat group call the \'basic transmission control operation state
machine towards the transmission participant\' shall be created when the
MCVideo server sends the SIP 200 (OK) response to the received initial SIP
INVITE request.
The transmission participant associated to the \'basic transmission control
operation towards the transmission participant\' state machine is here
referred to as the \"associated transmission participant\".
The external inputs to the state machine are:
1\. directives coming from the transmission control arbitration logic;
2\. transmission messages sent by the transmission participants;
3\. media; and
4\. in certain cases, SIP messages used for call handling.
If transmission control messages or RTP media packets arrives in a state where
there is no procedure specified in the following clauses, the transmission
control interface towards the MCVideo client in the transmission control
server:
1\. shall discard the transmission control message;
2\. shall request the network media interface in the MCVideo server to discard
any received RTP media packet; and
3\. shall remain in the current state.
State details are explained in the following clauses.
#### 6.3.5.2 State: \'Start-stop\'
##### 6.3.5.2.1 General
When a new instance of the \'basic transmission control operations towards the
transmission participant\' state machine is created, before any transmission
control related input is applied, the state machine is in the \'Start-stop\'
state. Similarly when the call is released the state machine shall return to
the Start-Stop state.
An association between the transmission control server and a transmission
participant in the MCVideo client is created, when the state machine is
created; and
1\. in case of an originating MCVideo call, when the MCVideo server sends the
SIP 200 (OK) response to the originating MCVideo client; and
2\. in case of a terminating MCVideo call, when the transmission control
server receives the SIP 200 (OK) response sent from the terminating MCVideo
client.
##### 6.3.5.2.2 SIP Session initiated
When a SIP Session is established and if the session is a normal group call
session:
NOTE 1: Temporary group call is not supported in this release. Normal group
call contains pre-arranged group call, chat group call, broadcast group call.
1\. if an MCVideo client initiates an MCVideo call with an implicit
Transmission request, and the MCVideo call does not exist yet, the
transmission control interface towards the MCVideo client in the transmission
control server:
a. shall initialize a general state machine as specified in clause 6.3.4.2.2;
and
NOTE 2: In the clause 6.3.4.2.2 the \'general transmission control operation\'
state machine will continue with the initialization of the \'general
transmission control operation\' state machine.
b. shall enter the state \'U: permitted\' as specified in the clause
6.3.5.5.2;
2\. if the associated MCVideo client rejoins an ongoing MCVideo call without
an implicit Transmission request or initiates or joins a chat group call
without an implicit Transmission request or attempts to initiate an already
existing MCVideo call without an implicit Transmission request, and
a. if an MCVideo call already exists but no MCVideo client has the permission
to send a media, the transmission control interface towards the MCVideo client
in the transmission control server:
i. should send a Transmission Idle message to the MCVideo client. The
Transmission Idle message:
A. shall include a Message Sequence Number field with a Message Sequence
Number value increased with 1; and
B. if a group call is a broadcast group call, a system call, an emergency
call, an imminent peril call, or a temporary group session, shall include the
Transmission Indicator field with appropriate indications; and
ii. shall enter the state \'U: not permitted and Transmit Idle\' as specified
in the clause 6.3.5.5.2;
b. if an MCVideo call is initiated, the transmission control interface towards
the MCVideo client in the transmission control server:
i. shall enter the state \'U: not permitted and Transmit Idle\' as specified
in the clause 6.3.5.5.2; and
ii. shall initialize a general state machine as specified in clause 6.3.4.2.2;
and
NOTE 3: In the clause 6.3.4.2.2 the general state machine will continue with
the initialization of the general state machine.
c. if other MCVideo clients have the permission to send a media, the
transmission control interface towards the MCVideo client in the transmission
control server:
i. should send a Media Transmission Notify message to the reception control
arbitration logic. The Media Transmission Notify message:
A. shall include the granted MCVideo users MCVideo ID in the Granted Party\'s
Identity field, if privacy is not requested;
B. shall include a Message Sequence Number field with a \ value increased with 1;
C. if the session is a broadcast group call, shall include the Permission to
Request the transmission field set to \'0\';
D. if the session is not a broadcast group call, may include the Permission to
Request the transmission field set to \'1\'; and
E. if a group call is a broadcast group call, a system call, an emergency
call, an imminent peril call, or a temporary group session, shall include the
Transmission Indicator field with appropriate indications
F. initiates a instance of \'basic reception control operations towards the
transmission participant\' state machine.
ii. shall enter the \'U: not permitted and Transmit Taken\' state as specified
in the clause 6.3.5.4.2;
NOTE 3: For multiple MCVideo clients have the permission to send a media, the
following Media Transmission notify messages will be handle as in \'U: not
permitted and Media Transmission Notify\' state as specified in the clause
6.3.5.4.2.
3\. if the associated transmission participant attempts to initiate an already
existing MCVideo call with an implicit Transmission request, and
a. if no MCVideo client has the permission to send media, the transmission
control interface towards the MCVideo client in the transmission control
server:
i. shall processes the implicit Transmission request as if a Transmission
Media Request message was receive as specified in clause 6.3.4.3.3; and
ii. shall enter the state \'U: permitted\' as specified in the clause
6.3.5.5.2;b. if the MCVideo client negotiated support of queueing Transmission
requests as specified in clause 14 and if other MCVideo clients have the
permission to send media and if Cx (Simultaneous Transmission video) has not
reached it upper limit, the transmission control interface towards the MCVideo
client in the transmission control server:
i. shall processes the implicit Transmission request as if a Transmission
Media Request message was receive as specified in clause 6.3.4.4.12; and
ii. shall enter the state \'U: permitted\' as specified in the clause
6.3.5.5.2;
c. if the MCVideo client negotiated support of queueing Transmission requests
as specified in clause 14 and if other MCVideo clients have the permission to
send media and if Cx (Simultaneous Transmission video) has reached it upper
limit, the transmission control interface towards the MCVideo client in the
transmission control server:
i. shall set the priority level to the negotiated maximum priority level that
the MCVideo client is permitted to request, except for pre-emptive priority,
when high priority is used;
NOTE 4: The maximum transmission priority the transmission participant is
permitted to request is negotiated in the \"mc_priority\" fmtp attribute as
specified in clause 14.
NOTE 5: The initial implicit Transmission request will not result in pre-
emption when an MCVideo client is joining an ongoing MCVideo call. If the
MCVideo client wants to pre-empt the current MCVideo client that are sending
media, an explicit Transmission request with pre-emptive transmission priority
is required.
ii. shall insert the MCVideo client into the active Transmission request queue
to the position immediately following all queued Transmission requests with
the same transmission priority;
iii. shall send a Transmission Queue Position Info message to the MCVideo
client. The Transmission Queue Position Info message:
A shall include the queue position and transmission priority in the Queue Info
field; and
B. if a group call is a broadcast group call, a system call, an emergency
call, an imminent peril call, or a temporary group session, shall include the
Transmission Indicator field with appropriate indications;
iv. should send a Transmission Queue Position Info message with the updated
status to the MCVideo clients in the active Transmission request queue which
negotiated queueing of Transmission requests as specified in clause 14, which
have requested the queue status, whose queue position has been changed since
the previous Transmission Queue Position Info message and which is not the
joining MCVideo client. The Transmission Queue Position Info message:
A shall include the queue position and transmission priority in the Queue Info
field; and
B. if a group call is a broadcast group call, a system call, an emergency
call, an imminent peril call, or a temporary group session, shall include the
Transmission Indicator field with appropriate indications; and
v. shall enter the \'U: not permitted and Transmit Taken\' state as specified
in the clause 6.3.5.4.2; and
d. if the MCVideo client did not negotiate queueing of Transmission requests
and if other MCVideo clients have the permission to send a media and if Cx
(Simultaneous Transmission video) has reached it upper limit, the transmission
control interface towards the MCVideo client in the transmission control
server:
i. shall send a Media Transmission Notify message to the reception control
arbitration logic. The Media Transmission Notify message:
A. shall include the granted MCVideo users MCVideo ID in the Granted Party\'s
Identity field, if privacy is not requested;
B. shall include a Message Sequence Number field with a Message Sequence
Number value increased with 1;
C. if the session is a broadcast group call, shall include the Permission to
Request the transmission field set to \'0\';
D. if the session is not a broadcast group call, may include the Permission to
Request the transmission field set to \'1\'; and
E. if a group call is a broadcast group call, a system call, an emergency
call, an imminent peril call, or a temporary group session, shall include the
Transmission Indicator field with appropriate indications; and
F. shall initiate the general reception control state machine.
ii. shall enter the \'U: not permitted and Transmit Taken\' state as specified
in the clause 6.3.5.4.2; and
4\. if the MCVideo client is invited to the MCVideo call and
a. if other MCVideo clients have permission to send a media, the transmission
control interface towards the MCVideo client in the transmission control
server:
i. should send a Media Transmission Notify message to the the reception
control arbitration logic. The Media Transmission Notify message:
A. shall include the granted MCVideo users MCVideo ID in the Granted Party\'s
Identity field, if privacy is not requested;
B. shall include a Message Sequence Number field with a Message Sequence
Number value increased with 1;
C. if the session is a broadcast group call, shall include the Permission to
Request the transmission field set to \'0\';
D. if the session is not a broadcast group call, may include the Permission to
Request the transmission field set to \'1\'; and
E. if a group call is a broadcast group call, a system call, an emergency
call, an imminent peril call, or a temporary group session, shall include the
Transmission Indicator field with appropriate indications; and
F. shall initiate the general reception control state machine.
ii. shall enter the \'U: not permitted and Transmit Taken\' state as specified
in the clause 6.3.5.4.2; and
b. if no other MCVideo client has the permission to send a media; the
transmission control interface towards the MCVideo client in the transmission
control server:
i. should send a Transmission Idle message to the MCVideo client. The
Transmission Idle message:
A. shall include a Message Sequence Number field with a \ value increased with 1; and
B. if a group call is a broadcast group call, a system call, an emergency
call, an imminent peril call, or a temporary group session, shall include the
Transmission Indicator field with appropriate indications; and
ii. shall enter the \'U: not permitted and Transmit Idle\' state as specified
in the clause 6.3.5.3.2.
#### 6.3.5.3 State: \'U: not permitted and Transmit Idle\'
##### 6.3.5.3.1 General
The transmission control interface towards the MCVideo client in the
transmission control server uses this state when the associated transmission
participant is not permitted to send media.
##### 6.3.5.3.2 Enter state \'U: not permitted and Transmit Idle\'
When entering this state the transmission control interface towards the
MCVideo client in the transmission control server:
1\. shall set the state for the associated transmission participant to \'U:
not permitted and Transmit Idle\'.
##### 6.3.5.3.3 Send Media Transmission Notify message (S: Media Transmission
Notify)
When a Media Transmission Notify message is received from the transmission
control server arbitration logic, the transmission control interface towards
the MCVideo client in the transmission control server:
1\. shall forward the Media Transmission Notify message to the the reception
control arbitration logic;
2\. may set the first bit in the subtype of the Media Transmission Notify
message to \'1\' (Acknowledgment is required) as described in clause 9.2.2.1,
and
NOTE: It is an implementation option to handle the receipt of the Transmission
control Ack message and what action to take if the Transmission control Ack
message is not received.
3\. initiates a instance of \'basic reception control operations towards the
transmission participant\' state machine.
4\. shall enter the \'U: not permitted and Transmit Taken\' state as specified
in the clause 6.3.5.4.2.
##### 6.3.5.3.4 Receive Transmission Media Request message (R: Transmission
Media Request)
Upon receiving a Transmission Media Request message from the associated
transmission participant, the transmission control interface towards the
MCVideo client in the transmission control server:
1\. if the session is not a broadcast group call or if the session is a
broadcast group call and the associated transmission participant is the
initiator of the broadcast group call, shall forward the Transmission Media
Request message to the transmission control server arbitration logic;
NOTE 1: The Transmission Media Request message can contain a Transmission
Indicator field indicating that the Transmission request is an attempt to
upgrade a group call to a broadcast group call. If the transmission control
arbitration logic accepts the Transmission request, the ongoing group call
will be upgraded accordingly by the Transmission Grant message and, for other
participants, by the Media Transmission Notify message.
NOTE 2: Initiating a broadcast group call is done in the application and
signalling plane using SIP. Initiating or upgrading a call to an emergency
call or an imminent peril call is done in the application and signalling plane
using SIP.
2\. if the session is a broadcast group call and the associated transmission
participant is not the initiator of the broadcast group call, shall send a
Transmission Reject message to the associated transmission participant. The
Transmission Reject message:
a. shall include in the Reject Cause field the \ value cause #5
(Receive only);
b. may include in the Reject Cause field an additional text string explaining
the reason for rejecting the Transmission request in the \
value;
c. may set the first bit in the subtype of the Transmission Reject message to
\'1\' (Acknowledgment is required) as described in clause 9.2.2.1; and
NOTE 3: It is an implementation option to handle the receipt of the
Transmission control Ack message and what action to take if the Transmission
control Ack message is not received.
d. if a group call is a broadcast group call, a system call, an emergency
call, an imminent peril call, or a temporary group session, shall include the
Transmission Indicator field with appropriate indications; and
3\. shall remain in the \'U: not permitted and Transmit Idle\' state.
##### 6.3.5.3.5 Send Transmission Grant message (S: Transmission Grant)
When a Transmission Grant message is received from the transmission control
arbitration logic in the MCVideo server, the transmission control interface
towards the MCVideo client in the transmission control server:
1\. shall forward the Transmission Grant messages to the associated
transmission participant;
2\. may set the first bit in the subtype of the Transmission Grant message to
\'1\' (Acknowledgment is required) as described in clause 9.2.2.1; and
NOTE: It is an implementation option to handle the receipt of the Transmission
control Ack message and what action to take if the Transmission control Ack
message is not received.
3\. shall enter the state \'U: permitted\' as specified in clause 6.3.5.5.2.
##### 6.3.5.3.6 Send Transmission Reject message (S: Transmission Reject)
When a Transmission Reject message is received from the transmission control
arbitration logic in the MCVideo server, the transmission control interface
towards the MCVideo client in the transmission control server:
1\. shall forward the Transmission Reject messages to the associated
transmission participant;
2\. may set the first bit in the subtype of the Transmission Reject message to
\'1\' (Acknowledgment is required) as described in clause 9.2.2.1; and
NOTE: It is an implementation option to handle the receipt of the Transmission
control Ack message and what action to take if the Transmission control Ack
message is not received.
3\. shall remain in the \'U: not permitted and Transmit Idle\' state.
##### 6.3.5.3.7 Receive Transmission End Request message (R: Transmission End
Request)
Upon receiving a Transmission End Request message from the associated
transmission participant, the transmission control interface towards the
MCVideo client in the transmission control server:
1\. if the first bit in the subtype of the Transmission End Request message is
set to \'1\' (Acknowledgment is required) as described in clause 9.2.2.1,
shall send a Transmission control Ack message. The Transmission control Ack
message:
a. shall include the Message Type field set to \'4\' (Transmission End
Request); and
b. shall include the Source field set to \'2\' (the controlling MCVideo
function is the source);
2\. shall send a Transmission Idle message to the associated transmission
participant. The Transmission Idle message:
a. shall include a Message Sequence Number field with a \ value increased with 1;
b. may set the first bit in the subtype of the Transmission Idle message to
\'1\' (Acknowledgment is required) as described in clause 9.2.2.1; and
NOTE: It is an implementation option to handle the receipt of the Transmission
control Ack message and what action to take if the Transmission control Ack
message is not received.
c. if a group call is a broadcast group call, a system call, an emergency
call, an imminent peril call, or a temporary group session, shall include the
Transmission Indicator field with appropriate indications;
3\. shall use the SSRC in the received Transmission End Request message to
check if the transmission participant has a queued Transmission request;
4 if the transmission participant has a Transmission request in the queue,
shall remove the queued Transmission request from the queue; and
5\. shall remain in the state \'U: not permitted and Transmit Idle\' state.
##### 6.3.5.3.8 Receive RTP media packets (R: media)
Upon receiving an indication from the network media interface that RTP media
packets are received with payload from the associated transmission participant
and if Transmission End Request message was received in the previous \'U:
permitted\' state, the transmission control interface towards the MCVideo
client in the transmission control server:
NOTE: Reception of unauthorized RTP media packets can only happen if the
associated transmission participant is in an MCVideo client. If the associated
transmission participant is a transmission control server interface in a non-
controlling MCVideo function of an MCVideo group, the unauthorized RTP media
packets are handled in the non-controlling MCVideo function.
1\. shall request the network media interface in the MCVideo server to not
forward the received RTP media packets to the media distributor in the MCVideo
server;
2\. shall send a Transmission Revoke message to the associated transmission
participant. The Transmission Revoke message:
a. shall include the Reject Cause field with the \ value set to
#3 (No permission to send a Media Transmission); and
b. if a group call is a broadcast group call, a system call, an emergency
call, an imminent peril call, or a temporary group session, shall include the
Transmission Indicator field with appropriate indications; and
3\. shall enter the \'U: not permitted but sends media\' state as specified in
the clause 6.3.5.7.2.
##### 6.3.5.3.9 Receive an implicit Transmission request (R: Implicit
Transmission request)
When an ongoing session is upgraded to an emergency group call and when the
application and signalling plane indicates that a subsequent SDP offer
included the \"mc_implicit_request\" fmtp attribute as described in clause 14,
the transmission control interface towards the MCVideo client in the
transmission control server:
1\. shall indicate to the transmission control server arbitration logic that
an implicit Transmission request is received due to an upgrade to an emergency
group call; and
2\. shall remain in the \'U: not permitted and Transmit Idle\' state.
##### 6.3.5.3.10 Send Transmission Idle message (S: Transmit Idle)
When receiving a Transmission Idle message from the transmission control
server arbitration logic in the MCVideo server, the transmission control
interface towards the MCVideo client in the transmission control server:
1\. shall forward the Transmission Idle message to the associated transmission
participant;
2\. may set the first bit in the subtype of the Transmission Idle message to
\'1\' (Acknowledgment is required) as described in clause 9.2.2.1; and
NOTE: It is an implementation option to handle the receipt of the Transmission
control Ack message and what action to take if the Transmission control Ack
message is not received.
3\. shall remain in the \'U: not permitted and Transmit Idle\' state.
#### 6.3.5.4 State \'U: not permitted and transmit taken\'
##### 6.3.5.4.1 General
The transmission control interface towards the MCVideo client in the
transmission control server uses this state when another MCVideo client (i.e.
not the associated transmission participant) has been given permission to send
media.
In this state RTP media packets received from the media distributor in the
MCVideo server are forwarded to the associated transmission participant by the
network media interface in the MCVideo server.
##### 6.3.5.4.2 Enter state \'U: not permitted and Transmit Taken\'
When entering this state the transmission control server:
1\. shall set the state to \'U: not permitted and Transmit Taken\'.
2\. shall create the \'basic reception control operations towards the
transmission participant\' state machine as specified in clause 6.3.7.
##### 6.3.5.4.3 Send Transmission Idle message (S: Transmit Idle)
When receiving a Transmission Idle message from the transmission control
server arbitration logic in the MCVideo server, the transmission control
interface towards the MCVideo client in the transmission control server:
1\. shall forward the Transmission Idle message to the associated transmission
participant;
2\. may set the first bit in the subtype of the Transmission Idle message to
\'1\' (Acknowledgment is required) as described in clause 9.2.2.1;
NOTE: It is an implementation option to handle the receipt of the Transmission
control Ack message and what action to take if the Transmission control Ack
message is not received.
3\. shall enter the \'U: not permitted and Transmit Idle\' state as specified
in the clause 6.3.5.3.2.
##### 6.3.5.4.4 Receive Transmission Media Request message (R: Transmission
Media Request)
Upon receiving a Transmission Media Request message, without a Transmission
Indicator field or with the Transmission Indicator field included where the
D-bit (Emergency call) and the E-bit (Imminent peril call) are set to \'0\',
from the associated transmission participant, and if the MCVideo client did
not negotiate queueing of Transmission requests or did not include a priority
in the \"mc_priority\" fmtp attribute as specified in clause 14, the
transmission control interface towards the MCVideo client in the transmission
control server:
1\. if the Cx (Simultaneous transmission video) has reached it upper limit:
a. shall send a Transmission Reject message to the associated transmission
participant. The Transmission Reject message:
i. shall include in the Reject Cause field the \ value cause #1
(Another MCVideo client has permission);
ii. may include in the Reject Cause field an additional text string explaining
the reason for rejecting the Transmission request in the \
value;
iii. if a group call is a broadcast group call, a system call, an emergency
call, an imminent peril call, or a temporary group session, shall include the
Transmission Indicator field with appropriate indications;
b. may set the first bit in the subtype of the Transmission Reject message to
\'1\' (Acknowledgment is required) as described in clause 9.2.2.1; and
NOTE 1: It is an implementation option to handle the receipt of the
Transmission control Ack message and what action to take if the Transmission
control Ack message is not received.
2\. if the Cx (Simultaneous transmission video) has not reached it upper
limit:
a. shall perform the actions specified in the clause 6.3.4.4.7A;
3\. shall remain in the \'U: not permitted and Transmit Taken\' state.
Upon receiving a Transmission Media Request message from the associated
transmission participant and the session is a broadcast group call, the
transmission control interface towards the MCVideo client in the transmission
control server:
1\. shall send a Transmission Reject message to the associated transmission
participant. The Transmission Reject message:
a. shall include in the Reject Cause field the \ value cause #5
(Receive only);
b. may include in the Reject Cause field an additional text string explaining
the reason for rejecting the Transmission request in the \
value; and
c. if a group call is a broadcast group call, a system call, an emergency
call, an imminent peril call, or a temporary group session, shall include the
Transmission Indicator field with appropriate indications;
2\. may set the first bit in the subtype of the Transmission Reject message to
\'1\' (Acknowledgment is required) as described in clause 9.2.2.1; and
NOTE 2: It is an implementation option to handle the receipt of the
Transmission control Ack message and what action to take if the Transmission
control Ack message is not received.
3\. shall remain in the \'U: not permitted and Transmit Taken\' state.
Upon receiving a Transmission Media Request message from the associated
transmission participant and if the MCVideo client negotiated support of
queueing of Transmission requests or included a transmission priority in the
\"mc_priority\" or both as described in specified in clause 14 and according
to local policy, the transmission control interface towards the MCVideo client
in the transmission control server:
1\. shall determine the effective priority level as described in clause
4.1.1.4 by using the following parameters:
a. the transmission priority shall be:
i. the lower of the transmission priority included in Transmission Media
Request message and the negotiated maximum transmission priority that the
MCVideo client is permitted to request, if the MCVideo client negotiated
transmission priority \"mc_priority\" and transmission priority is included in
the Transmission Media Request message;
ii. the receive only transmission priority, if the MCVideo client negotiated
transmission priority in the \"mc_priority\" fmtp attribute and if the
negotiated maximum transmission priority that the MCVideo client is permitted
to request is \"receive only\";
iii. the default priority, if the MCVideo client negotiated transmission
priority in the \"mc_priority\" fmtp attribute, if the negotiated maximum
transmission priority that the MCVideo client is permitted to request is not
receive only and if the transmission priority is not included in the
Transmission Media Request message; and
iv. the default priority, if the MCVideo client did not negotiate transmission
priority in the \"mc_priority\" fmtp attribute; and
b. the type of the call shall be
i. if the Transmission Indicator field is included in the message and the
D-bit (Emergency call bit) is set to \'1\', determined to be an emergency
call;
ii. if the Transmission Indicator field is included in the message and the
E-bit (Imminent peril call) is set to \'1\', determined to be an imminent
peril call; and
iii. if the Transmission Indicator field is not included in the message or the
Transmission Indicator field is included and neither the D-bit (Emergency call
bit) nor the E-bit (Imminent peril call) is set to \'1\', determined to be a
normal call;
2\. if the effective priority is \"receive only\", the transmission control
interface towards the MCVideo client in the transmission control server:
a. shall send a Transmission Reject message to the transmission participant.
The Transmission Reject message:
i. shall include in the Reject Cause field the \ value cause #5
(Receive only) ;
ii. may include in the Reject Cause field an additional text string explaining
the reason for rejecting the Transmission request in the \
value;
iii. if the Transmission Media Request included a Track Info field, shall
include the received Track Info field; and
iv. if a group call is a broadcast group call, a system call, an emergency
call, an imminent peril call, or a temporary group session, shall include the
Transmission Indicator field with appropriate indications; and
b. shall remain in the \'U: not permitted and Transmit Taken\' state;
3\. shall use the SSRC in the received Transmission Media Request message to
check if the transmission participant has a queued Transmission request;
4\. if the transmission participant already has a queued Transmission request
with the same effective priority level, the transmission control interface
towards the MCVideo client in the transmission control server:
a. shall send a Transmission Queue Position Info message to the requesting
MCVideo client, if the MCVideo client negotiated support of queueing of
Transmission requests as specified in clause 14. The Transmission Queue
Position Info message:
i. shall include the queue position and transmission priority in the Queue
Info field;
ii. if a group call is a broadcast group call, a system call, an emergency
call, an imminent peril call, or a temporary group session, shall include the
Transmission Indicator field with appropriate indications; and
b. shall remain in the \'U: not permitted and Transmit Taken\' state
5\. if the effective priority level is pre-emptive and there are no other pre-
emptive requests in the active Transmission request queue and the effective
priority level of the current MCVideo client with permission to send a media
is not the pre-emptive priority, the transmission control interface towards
the MCVideo client in the transmission control server:
a. shall forward the Transmission Media Request message to the transmission
control server arbitration logic indicating that a Transmission Media Request
message with pre-emptive priority is received; and
b. shall remain in the \'U: not permitted and Transmit Taken\' state
NOTE 3: The Transmission control server arbitration logic initiates revoking
the permission to send media towards the current MCVideo client with the
permission to send media as specified in the clause 6.3.4.4.7;
Upon receiving a Transmission Media Request message from the associated
transmission participant and if the MCVideo client did not negotiate support
of queueing of Transmission requests as specified in clause 14, the effective
priority level is pre-emptive and either other pre-emptive request is queued
or the effective priority level of the current MCVideo client with permission
to send a media is the pre-emptive priority, the transmission control
interface towards the MCVideo client in the transmission control server:
1\. if the Cx (Simultaneous transmission video) has reached it upper limit:
a. shall send a Transmission Reject message to the associated transmission
participant. The Transmission Reject message:
i. shall include in the Reject Cause field the \ value cause #1
(Another MCVideo client has permission);
ii. may include in the Reject Cause field an additional text string explaining
the reason for rejecting the Transmission request in the \
value;
iii. if a group call is a broadcast group call, a system call, an emergency
call, an imminent peril call, or a temporary group session, shall include the
Transmission Indicator field with appropriate indications; and
2\. if the Cx (Simultaneous transmission video) has not reached it upper
limit:
a. shall perform the actions specified in the clause 6.3.4.4.7A;
3\. shall remain in the \'U: not permitted and Transmit Taken\' state.
Upon receiving a Transmission Media Request message from the associated
transmission participant and if the MCVideo client did not negotiate
\"queueing\" and the effective priority level is not pre-emptive, the
transmission control interface towards the MCVideo client in the transmission
control server:
1\. if the Cx (Simultaneous transmission video) has reached it upper limit:
a. shall send a Transmission Reject message to the associated transmission
participant. The Transmission Reject message:
i. shall include in the Reject Cause field the \ value cause #1
(Another MCVideo client has permission);
ii. may include in the Reject Cause field an additional text string explaining
the reason for rejecting the Transmission request in the \
value;
iii. if a group call is a broadcast group call, a system call, an emergency
call, an imminent peril call, or a temporary group session, shall include the
Transmission Indicator field with appropriate indications; and
2\. if the Cx (Simultaneous transmission video) has not reached it upper
limit:
a. shall perform the actions specified in the clause 6.3.4.4.7A;
3\. shall remain in the \'U: not permitted and Transmit Taken\' state.
Upon receiving a Transmission Media Request message from the associated
transmission participant and if the MCVideo client negotiated support of
queueing of Transmission requests as specified in clause 14 and the effective
priority level is not pre-emptive, the transmission control interface towards
the MCVideo client in the transmission control server:
1\. if the Cx (Simultaneous transmission video) has reached it upper limit:
a. shall insert the MCVideo client into the active Transmission request queue,
if not inserted yet, or update the position of the MCVideo client in the
active Transmission request queue, if already inserted, to the position
immediately following all queued requests at the same effective priority
level;
b. the transmission control server shall send a Transmission Queue Position
Info message to the transmission participant. The Transmission Queue Position
Info message:
i. shall include the queue position and transmission priority in the Queue
Info field;
ii. if the Transmission Media Request included a Track Info field, shall
include the received Track Info field; and
iii. if a group call is a broadcast group call, a system call, an emergency
call, an imminent peril call, or a temporary group session, shall include the
Transmission Indicator field with appropriate indications;
c. shall remain in the \'U: not permitted and Transmit Taken\' state; and
d. may set the first bit in the subtype of the Transmission Queue Position
message to \'1\' (Acknowledgment is required) as described in clause 9.2.2.1.
NOTE 4: It is an implementation option to handle the receipt of the
Transmission control Ack message and what action to take if the Transmission
control Ack message is not received.
2\. if the Cx (Simultaneous transmission video) has not reached it upper
limit:
a. shall perform the actions specified in the clause 6.3.4.4.7A;
##### 6.3.5.4.5 Receive Transmission End Request message (R: Transmission End
Request)
Upon receiving a Transmission End Request message from the associated
transmission participant and if the MCVideo client did not negotiate support
of queueing of Transmission requests or included a transmission priority in
the \"mc_priority\" fmtp attribute as specified in clause 14, the transmission
control interface towards the MCVideo client in the transmission control
server:
1\. if the first bit in the subtype of the Transmission End Request message is
set to \'1\' (Acknowledgment is required) as described in clause 9.2.2.1,
shall send a Transmission control Ack message. The Transmission control Ack
message:
a. shall include the Message Type field set to \'4\' (Transmission End
Request); and
b. shall include the Source field set to \'2\' (the controlling MCVideo
function is the source);
2\. shall send a Media Transmission Notify message to the reception control
arbitration logic. The Media Transmission Notify message:
a. shall include the granted MCVideo users MCVideo ID in the Granted Party\'s
Identity field, if privacy is not requested;
b. shall include a Message Sequence Number field with a \ value increased with 1;
c. shall include the Permission to Request the transmission field set to
\'0\', if the transmission participants are not allowed to request the
transmission;
d. may set the first bit in the subtype of the Media Transmission Notify
message to \'1\' (Acknowledgment is required) as described in clause 9.2.2.1;
and
NOTE 1: It is an implementation option to handle the receipt of the
Transmission control Ack message and what action to take if the Transmission
control Ack message is not received.
e. initiates a instance of \'basic reception control operations towards the
transmission participant\' state machine.
f. if a group call is a broadcast group call, a system call, an emergency
call, an imminent peril call, or a temporary group session, shall include the
Transmission Indicator field with appropriate indications; and
3\. shall remain in the \'U: not permitted and Transmit Taken\' state.
Upon receiving a Transmission End Request message from the associated
transmission participant and if the MCVideo client negotiated support of
queueing of Transmission requests as specified in clause 14, the transmission
control interface towards the MCVideo client in the transmission control
server:
1\. if the first bit in the subtype of the Transmission End Request message is
set to \'1\' (Acknowledgment is required) as described in clause 9.2.2.1,
shall send a Transmission control Ack message. The Transmission control Ack
message:
a. shall include the Message Type field set to \'4\' (Transmission End
Request); and
b. shall include the Source field set to \'2\' (the controlling MCVideo
function is the source);
2\. if
a. a Track Info field is included in the Transmission End Request message,
shall use the topmost \ value and the SSRC in the
received Transmission End Request message to check if the transmission
participant has a queued Transmission request; or
b. if a Track Info field is not included in the Transmission End Request
message, shall use the SSRC in the received Transmission End Request message
to check if the transmission participant has a queued Transmission request;
3\. shall remove the MCVideo client from the active Transmission request
queue, if the MCVideo client was in the active Transmission request queue;
4\. shall send a Media Transmission Notify message to the the reception
control arbitration logic. The Media Transmission Notify message:
a. shall include the granted MCVideo users MCVideo ID in the Granted Party\'s
Identity field, if privacy is not requested;
b. if the session is a broadcast group call, shall include the Permission to
Request the transmission field set to \'0\';
c. if the session is not a broadcast group call, may include the Permission to
Request the transmission field set to \'1\';
d. shall include a Message Sequence Number field with a \ value increased with 1; and
e. initiates a instance of \'basic reception control operations towards the
transmission participant\' state machine.
f. if a group call is a broadcast group call, a system call, an emergency
call, an imminent peril call, or a temporary group session, shall include the
Transmission Indicator field with appropriate indications;
5\. may set the first bit in the subtype of the Media Transmission Notify
message is set to \'1\' (Acknowledgment is required) as described in clause
9.2.2.1; and
NOTE 2: It is an implementation option to handle the receipt of the
Transmission control Ack message and what action to take if the Transmission
control Ack message is not received.
6\. shall remain in the \'U: not permitted and Transmit Taken\' state.
##### 6.3.5.4.6 Receive RTP media packets (R: media)
Upon receiving an indication from the network media interface in the MCVideo
server that RTP media packets with payload are received from the associated
transmission participant, the transmission control interface towards the
MCVideo client in the transmission control server:
NOTE: Reception of unauthorized RTP media packets can only happen if the
associated transmission participant is in an MCVideo client. If the associated
transmission participant is a transmission control server interface in a non-
controlling MCVideo function of an MCVideo group, the unauthorized RTP media
packets are handled in the non-controlling MCVideo function.
1\. shall request the network media interface to not forward the RTP media
packets to the media distributor in the MCVideo server;
2\. shall send a Transmission Revoke message to the associated transmission
participant. The Transmission Revoke message:
a. shall include the Reject Cause field with the Reject Cause value set to #3
(No permission to send a Media Transmission); and
b. if a group call is a broadcast group call, a system call, an emergency
call, an imminent peril call, or a temporary group session, shall include the
Transmission Indicator field with appropriate indications; and
3\. shall enter the \'U: not permitted but sends media\' state as specified in
the clause 6.3.5.7.2.
##### 6.3.5.4.7 Send Transmission Queue Position Info message (R: Transmission
Queue Position Request)
Upon receiving a Transmission Queue Position Request message from the
associated transmission participant, the transmission control interface
towards the MCVideo client in the transmission control server:
1\. shall send the Transmission Queue Position Info message. The Transmission
Queue Position Info message:
a. shall include the queue position and transmission priority in the Queue
Info field;
b. may include the first bit in the subtype of the Transmission Queue Position
Info message set to \'1\' (Acknowledgment is required) as described in clause
9.2.2.1; and
NOTE: It is an implementation option to handle the receipt of the Transmission
control Ack message and what action to take if the Transmission control Ack
message is not received.
c. if a group call is a broadcast group call, a system call, an emergency
call, an imminent peril call, or a temporary group session, shall include the
Transmission Indicator field with appropriate indications; and
3\. shall remain in the \'U: not permitted and Transmit Taken\' state.
##### 6.3.5.4.8 Receive an implicit Transmission request (R: Implicit
Transmission request)
When an ongoing session is upgraded to an emergency group call and when the
application and signalling plane indicates that a subsequent SDP offer
included the \"mc_implicit_request\" fmtp attribute as specified in clause 14,
the transmission control interface towards the MCVideo client in the
transmission control server:
1\. shall indicate to the transmission control server arbitration logic that
an implicit Transmission request is received due to an upgrade to an emergency
group call; and
2\. shall remain in the \'U: not permitted and Transmit Taken\' state.
##### 6.3.5.4.9 Send Transmission Grant message (S: Transmission Grant)
When a Transmission Grant message is received from the transmission control
arbitration logic in the MCVideo server, the transmission control interface
towards the MCVideo client in the transmission control server:
1\. shall forward the Transmission Grant messages to the associated
transmission participant;
2\. may set the first bit in the subtype of the Transmission Grant message to
\'1\' (Acknowledgment is required) as described in clause 9.2.2.1;
NOTE: It is an implementation option to handle the receipt of the Transmission
control Ack message and what action to take if the Transmission control Ack
message is not received.
3\. shall enter the state \'U: permitted\' as specified in clause 6.3.5.5.2.
##### 6.3.5.4.10 Send Media Transmission Notify message (S: Media Transmission
Notify)
When a Media Transmission Notify message is received from the transmission
control arbitration logic in the MCVideo server, if the G-bit in the
Transmission Indicator is set to \'1\' the transmission control interface
towards the MCVideo client in the transmission control server:
1\. shall forward the Media Transmission Notify message to the the reception
control arbitration logic;
2\. may set the first bit in the subtype of the Media Transmission Notify
message to \'1\' (Acknowledgment is required) as described in clause 9.2.2.1;
NOTE: It is an implementation option to handle the receipt of the Transmission
control Ack message and what action to take if the Transmission control Ack
message is not received.
3\. shall store an indication that the participant is listening to media from
two sources; and
4\. initiates a instance of \'basic reception control operations towards the
transmission participant\' state machine.
5\. shall remain in the \'U: not permitted and Transmit Taken\' state.
#### 6.3.5.5 State: \'U: permitted\'
##### 6.3.5.5.1 General
The transmission control interface towards the MCVideo client in the
transmission control server uses this state when the associated transmission
participant has been given permission to send media.
##### 6.3.5.5.2 Enter state \'U: permitted\'
When entering this state the transmission control interface towards the
MCVideo client in the transmission control server:
1\. shall set the state for the associated transmission participant to \'U:
permitted\'.
##### 6.3.5.5.3 Receive Transmission End Request message (R: Transmission End
Request)
Upon receiving a Transmission End Request message from the associated
transmission participant, the transmission control interface towards the
MCVideo client in the transmission control server:
1\. if the first bit in the subtype of the Transmission End Request message is
set to \'1\' (Acknowledgment is required) as described in clause 9.2.2.1,
shall send a Transmission control Ack message. The Transmission control Ack
message:
a. shall include the Message Type field set to \'4\' (Transmission End
Request); and
b. shall include the Source field set to \'2\' (the controlling MCVideo
function is the source);
2\. shall forward the Transmission End Request message to the general
transmission control operation state machine of the transmission control
arbitration logic in the MCVideo server with the first bit in the subtype of
the Transmission End Request message set to \'0\' (Acknowledgment is not
required), if not already set; and
3\. shall remain in the \'U: permitted\' state.
##### 6.3.5.5.3a Send Transmission End Response message (S: Transmission End
Response)
Upon receiving a Transmission End Response message from the transmission
control server, the transmission control interface towards the MCVideo client
in the transmission control server:
1\. shall forward the Transmission End Response message to the associated
transmission participant; and
2\. shall enter the state \'U: not permitted and Transmit Idle\'.
##### 6.3.5.5.4 Send Transmission Idle message (S: Transmit Idle)
Upon receiving the Transmission Idle message from the transmission control
server arbitration logic in the MCVideo server, the transmission control
interface towards the MCVideo client in the transmission control server:
1\. shall enter the \'U: not permitted and Transmit Idle\' state as specified
in the clause 6.3.5.3.2.
##### 6.3.5.5.5 Send Transmission Revoke message (S: Transmission Revoke)
When receiving the Transmission Revoke message from the transmission control
server arbitration logic in the MCVideo server, the transmission control
interface towards the MCVideo client in the transmission control server:
1\. shall forward the Transmission Revoke message to the transmission
participant;
2\. shall enter the state \'U pending Transmit Revoke\' as specified in the
clause 6.3.5.6.2.
##### 6.3.5.5.6 Receive RTP media packets (R: media)
Upon receiving an indication from the network media interface in the MCVideo
server that RTP media packets with payload are received from the associated
transmission participant, the transmission control interface towards the
MCVideo client in the transmission control server:
1\. shall request the network media interface in the MCVideo server to forward
RTP media packets to the media distributor in the MCVideo server.
##### 6.3.5.5.7 Receive Transmission Media Request message (R: Transmission
Media Request)
Upon receiving a Transmission Media Request message from the associated
transmission participant, the transmission control interface towards the
MCVideo client in the transmission control server:
1\. shall forward the Transmission Media Request message to the transmission
control server arbitration logic in the MCVideo server; and
b. shall instruct the media distributor to act as in clause 6.3.4.4.5.
2\. shall remain in the \'U: permitted\' state.
##### 6.3.5.5.8 Send RTP Media (S: media)
When RTP packets are received from the media distributor, the transmission
control interface towards the MCVideo client in the transmission control
server:
1\. shall forward the RTP packet to the associated transmission participant;
and
2\. shall remain in the \'U: permitted\' state.
##### 6.3.5.5.9 Send Media Transmission Notify message (S: Media Transmission
Notify)
When receiving the Media Transmission Notify message from the transmission
control server arbitration logic in the MCVideo server with the G-bit in the
Transmission Indicator set to \'1\', the transmission control interface
towards the MCVideo client in the transmission control server:
1\. shall send the Media Transmission Notify message to the the reception
control arbitration logic;
2\. shall remain in the \'U: permitted\' state.
3\. initiates a instance of \'basic reception control operations towards the
transmission participant\' state machine.
##### 6.3.5.5.10 Send Transmission End Request message (S: Transmission End
Request)
Upon receiving a Transmission End Request message from the transmission
control server, the transmission control interface towards the MCVideo client
in the transmission control server:
1\. shall forward the Transmission End Request message to the associated
transmission participant; and
2\. shall enter the state \'U pending Transmit Revoke\' as specified in the
clause 6.3.5.6.2.
#### 6.3.5.6 State: \'U: pending Transmit Revoke\'
##### 6.3.5.6.1 General
The transmission control interface towards the MCVideo client in the
transmission control server uses this state during the grace period after
sending the Transmission Revoke or Transmission End Request message.
In this state timer T3 (Transmission Revoke) is running.
NOTE : As the functionality of both Transmission End Request message and
Transmission Revoke message sent from server is mostly same on client and
server side, currently the handling of Transmission End Request message is
added in \'U: pending Transmit Revoke\' state and timer T3 (Transmission
Revoke) is also used for Transmission End Request message. A new state and
timer can also be created later for this purpose if required.
##### 6.3.5.6.2 Enter state \'U pending Transmit Revoke\'
When entering this state the transmission control interface towards the
MCVideo client in the transmission control server:
1\. shall start timer T3 (Transmission Revoke); and
2\. shall enter the state \'U: pending Transmit Revoke\'.
##### 6.3.5.6.3 Timer T3 (Transmission Revoke) expired
On expiry of timer T3 (Transmission Revoke) the transmission control interface
towards the MCVideo client in the transmission control server:
1\. shall retransmit the Transmission Revoke or Transmission End Request
message to the associated transmission participant. The Transmission Revoke or
Transmission End Request message:
a. shall include the same Rejection Cause field and the same Transmission
Indicator field as in the previous sent Transmission Revoke or Transmission
End Request message;
2\. shall start timer T3 (Transmission Revoke); and
3\. shall remain in the \'U: pending Transmit Revoke\' state.
NOTE: The number of times the transmission control server retransmits the
Transmission Revoke or Transmission End Request message and the action to take
when the transmission control server gives up is an implementation option.
However, it is recommended that the MCVideo client is disconnected from the
MCVideo call when the transmission control server gives up.
##### 6.3.5.6.4 Receive RTP media packets (R: media)
Upon receiving an RTP media packet with payload from the associated
transmission participant, the transmission control interface towards the
MCVideo client in the transmission control server:
1\. shall forward RTP media packets to the media distributor; and
2\. shall remain in the \'U: pending Transmit Revoke\' state.
##### 6.3.5.6.5 Receive Transmission End Request message (R: Transmission End
Request)
Upon receiving a Transmission End Request message from the associated
transmission participant, the transmission control interface towards the
MCVideo client in the transmission control server:
1\. if the first bit in the subtype of the Transmission End Request message is
set to \'1\' (Acknowledgment is required) as described in clause 9.2.2.1,
shall send a Transmission control Ack message. The Transmission control Ack
message:
a. shall include the Message Type field set to \'4\' (Transmission End
Request); and
b. shall include the Source field set to \'2\' (the controlling MCVideo
function is the source);
2\. shall forward the Transmission End Request message to the transmission
control server arbitration logic; and
b. shall remain in the state \'U: pending Transmit Revoke\'.
##### 6.3.5.6.5a Send Transmission End Response message (S: Transmission End
Response)
Upon receiving a Transmission End Response message from the transmission
control server, the transmission control interface towards the MCVideo client
in the transmission control server:
1\. shall forward the Transmission End Response message to the associated
transmission participant; and
2\. shall enter the state \'U: not permitted and Transmit Idle\'.
##### 6.3.5.6.6 Send Transmission Idle message (S: Transmit Idle)
Upon receiving a Transmission Idle message from the transmission control
server arbitration logic in the MCVideo server, the transmission control
interface towards the MCVideo client in the transmission control server:
NOTE 1: The Transmission Idle message is sent when there are no queued
Transmission requests.
1\. shall send the Transmission Idle message to the associated transmission
participant;
2\. may set the first bit in the subtype of the Transmission Idle message to
\'1\' (Acknowledgment is required) as described in clause 9.2.2.1; and
NOTE 2: It is an implementation option to handle the receipt of the
Transmission control Ack message and what action to take if the Transmission
control Ack message is not received.
3\. shall enter the \'U: not permitted and Transmit Idle\' state as specified
in the clause 6.3.5.3.2.
##### 6.3.5.6.7 Send Media Transmission Notify message (S: Media Transmission
Notify)
Upon receiving a Media Transmission Notify message from the transmission
control server arbitration logic in the MCVideo server, the transmission
control interface towards the MCVideo client in the transmission control
server:
NOTE 1: The Media Transmission Notify message is sent when there are queued
Transmission requests.
1\. shall send the Media Transmission Notify message to the associated
transmission participant the reception control arbitration logic;
2\. may set the first bit in the subtype of the Media Transmission Notify
message to \'1\' (Acknowledgment is required) as described in clause 9.2.2.1;
and
NOTE 2: It is an implementation option to handle the receipt of the
Transmission control Ack message and what action to take if the Transmission
control Ack message is not received.
3\. shall enter the \'U: not permitted and Transmit Taken\' state as specified
in the clause 6.3.5.3.2.
##### 6.3.5.6.8 Receive Transmission End Response message (R: Transmission End
Response)
Upon receiving a Transmission End Response message from the associated
transmission participant, the transmission control interface towards the
MCVideo client in the transmission control server:
> 1\. if the first bit in the subtype of the Transmission End Response message
> is set to \'1\' (Acknowledgment is required) as described in clause 9.2.2.1,
> shall send a Transmission control Ack message. The Transmission control Ack
> message:
>
> a. shall include the Message Type field set to \'1\' (Transmission End
> Response); and
>
> b. shall include the Source field set to \'2\' (the controlling MCVideo
> function is the source);
2\. shall stop timer T3 (Transmission Revoke) if it is running; and
3\. shall forward the Transmission End Response message to the transmission
control server arbitration logic; and
4\. shall enter the state \'U: not permitted and Transmit Idle\'.
#### 6.3.5.7 State \'U: not permitted but sends media\'
##### 6.3.5.7.1 General
The transmission control interface towards the MCVideo client in the
transmission control server uses this state when it receives RTP media packets
from the MCVideo client and the MCVideo client is not permitted to send media.
Timer T3 (Transmission Revoke) is running in this state.
##### 6.3.5.7.2 Enter state \'U: not permitted but sends media\'
When entering this state the transmission control interface towards the
MCVideo client in the transmission control server:
1\. shall start timer T3 (Transmission Revoke); and
2\. shall enter the state \'U: not permitted but sends media\'.
In this state the transmission control interface towards the MCVideo client in
the transmission control server:
1\. shall not request the network media interface in the MCVideo server to
forward RTP media packets from the MCVideo client to the media distributor in
the MCVideo server.
##### 6.3.5.7.3 Timer T3 (Transmission Revoke) expired
On expiry of timer T3 (Transmission Revoke), the transmission control
interface towards the MCVideo client in the transmission control server:
1\. shall send a Transmission Revoke message to the associated transmission
participant. The Transmission Revoke message:
a. shall include in the Rejection Cause field the \ value set
to #3 (No permission to send a Media Transmission); and
b. if a group call is a broadcast group call, a system call, an emergency
call, an imminent peril call, or a temporary group session, shall include the
Transmission Indicator field with appropriate indications;
2\. shall restart timer T3 (Transmission Revoke); and
3\. shall remain in the \'U: not permitted but sends media\' state.
NOTE: The number of times the transmission control server retransmits the
Transmission Revoke message and the action to take when the transmission
control server gives up is an implementation option. However, the recommended
action is that the MCVideo client is disconnected from the MCVideo call.
##### 6.3.5.7.4 Receive Transmission End Request message (R: Transmission End
Request)
Upon receiving a Transmission End Request message, the transmission control
interface towards the MCVideo client in the transmission control server:
1\. if the first bit in the subtype of the Transmission End Request message is
set to \'1\' (Acknowledgment is required) as described in clause 9.2.2.1,
shall send a Transmission control Ack message. The Transmission control Ack
message:
a. shall include the Message Type field set to \'4\' (Transmission End
Request); and
b. shall include the Source field set to \'2\' (the controlling MCVideo
function is the source);
2\. if the general state is \'G: Transmit Idle\', the transmission control
interface towards the MCVideo client in the transmission control server:
a. shall send the Transmission Idle message. The Transmission Idle message:
i. shall include a Message Sequence Number field with a Message Sequence
Number value increased with 1; and
ii. if a group call is a broadcast group call, a system call, an emergency
call, an imminent peril call, or a temporary group session, shall include the
Transmission Indicator field with appropriate indications; and
b. shall enter the \'U: not permitted and Transmit Idle\' state as specified
in the clause 6.3.5.3.2; and
3\. if the general state is \'G: Transmit Taken\', the transmission control
interface towards the MCVideo client in the transmission control server:
a. shall send a Media Transmission Notify message to the reception control
arbitration logic. The Media Transmission Notify message:
i. shall include the granted MCVideo users MCVideo ID in the Granted Party\'s
Identity field, if privacy is not requested;
ii. if the session is a broadcast group call, shall include the Permission to
Request the transmission field set to \'0\';
iii. if the session is not a broadcast group call, may include the Permission
to Request the transmission field set to \'1\';
iv. may include the first bit in the subtype of the Media Transmission Notify
message set to \'1\' (Acknowledgment is required) as described in clause
9.2.2.1; and
NOTE: It is an implementation option to handle the receipt of the Transmission
control Ack message and what action to take if the Transmission control Ack
message is not received.
v. if a group call is a broadcast group call, a system call, an emergency
call, an imminent peril call, or a temporary group session, shall include the
Transmission Indicator field with appropriate indications; and
c. shall enter the \'U: not permitted and Transmit Taken\' state as specified
in the clause 6.3.5.4.2.
d. initiates a instance of \'basic reception control operations towards the
transmission participant\' state machine.
#### 6.3.5.8 In any state
##### 6.3.5.8.1 General
This clause describes the actions to be taken in all states defined for the
basic state diagram with the exception of the \'Start-stop\' and \'Releasing\'
states.
##### 6.3.5.8.2 Receive MCVideo call release -- 1
Upon receiving an MCVideo call release step 1 request from the application and
signalling plane e.g. when the MCVideo call is going to be released or when
the MCVideo client leaves the MCVideo call, the transmission control interface
towards the MCVideo client in the transmission control server:
1\. shall stop sending transmission control messages to the associated
transmission participant;
2\. shall request the network media interface to stop sending RTP media
packets towards to the associated MCVideo client;
3\. shall ignore any transmission control messages received from the
associated transmission participant;
4\. shall request the network media interface to stop forwarding RTP media
packets from the associated MCVideo client to the media distributor in the
MCVideo server;
5\. shall indicate to the transmission control server arbitration logic in the
MCVideo server that the MCVideo client has started to disconnect from the
MCVideo call; and
6\. shall enter the \'Releasing\' state.
#### 6.3.5.9 State: \'Releasing\'
##### 6.3.5.9.1 General
The transmission control interface towards the MCVideo client in the
transmission control server uses this state while waiting for the application
and signalling plane to finalize the release of the MCVideo call or finalizing
the removal of the MCVideo client from the MCVideo call.
##### 6.3.5.9.2 Receive MCVideo call release - 2
Upon receiving an MCVideo call release step 2 request from the application and
signalling plane, the transmission control interface towards the MCVideo
client in the transmission control server:
1\. shall request the network media interface to release all resources
associated with this MCVideo client for this MCVideo call; and
2\. shall enter the \'Start-stop\' state and terminate the \'basic
transmission control operation towards the transmission participant\'\' state
machine associated with this transmission participant and this MCVideo call.
### 6.3.6 Transmission control server state transition for general reception
control
#### 6.3.6.1 General
The reception control arbitration logic in the transmission control server
shall behave according to the state diagram and state transitions specified in
this clause.
Figure 6.3.6.1-1 shows the general reception operation states (Gr states) and
the state transition diagram.
Figure 6.3.6.1-1: Transmission control server state transition diagram for
\'general reception control operation\'
The reception control arbitration logic in the transmission control server
shall keep one instance of the \'general transmission control operation\'
state machine per MCVideo call.
If transmission control messages or RTP media packets arrives in a state where
there is no procedure specified in the following clauses the transmission
control arbitration logic in the transmission control server:
1\. shall discard the transmission control message;
2\. shall request the media distributor in the MCVideo server to discard any
received RTP media packet; and
3\. shall remain in the current state.
State details are explained in the following clauses.
#### 6.3.6.2 State: \'Start-stop\'
##### 6.3.6.2.1 General
When a new instance of the \'general reception control operation\' state
machine is initiated, before any reception control related input is applied,
the state machine is in \'Start-stop\' state. Similarly when the call is
released the state machine shall return to the \'Start-stop\' state or the
related MCVideo call is released.
##### 6.3.6.2.2 MCVideo call initialization
When an MCVideo call is initiated as specified in 3GPP TS 24.281 [2] and
1\. if a confirmed indication is required and at least one invited MCVideo
client has accepted the invitation;
2\. if a confirmed indication is not required; or
then the reception control arbitration logic in the transmission control
server:
1\. shall create an instance of the \'general reception control operation\'
state machine;
2\. shall wait for the \'basic reception control operation towards the
transmission participant\' to be initialized before continuing the following
steps;
3\. when the \'basic reception control operation towards the transmission
participant\' state machine is initialized and the initialised session is not
a temporary group session:
a. shall enter the \'G: Reception Idle\' state as specified in clause
6.3.6.3.2; or
#### 6.3.6.3 State: \'Gr: Reception Idle\'
##### 6.3.6.3.1 General
The reception control arbitration logic in the transmission control server is
in this state when no MCVideo user currently accept the media invitation to
receive media.
Timer T5 (Inactivity) can be running when the reception control arbitration
logic in the transmission control server is in this state.
##### 6.3.6.3.2 Enter the \'Gr: Reception Idle\' state
When entering this state from any state except the \'Start-stop\' state, the
reception control arbitration logic in the transmission control server:
1\. shall start timer T5 (Reception Inactivity);
2\. shall initialise counter C7 (Reception Accepted) to 0;
3\. shall set the general state to the \'Gr: Reception Idle\' state;
##### 6.3.6.3.3 Receive Media Transmission Notify message (R: Media
Transmission Notify)
Upon receiving a media transmission request notify, the reception control
arbitration logic in the transmission control server:
1\. shall send the Media Transmission Notify message to all other transmission
participants. The Media Transmission Notify message:
a. if a group call is a broadcast group call, system call, emergency call, an
imminent peril call, shall include the Reception Mode field set to \'0\'
indicating automatic reception mode:
i. shall set the counter C11 (Count of Active Receivers for the stream),
associate with the transmitter by the total number of receiving MCVideo
clients who are participating in the call;
ii. shall store the SSRC of all the transmission participants who are
participating in the call until the reception of media associated with
Transmission notification is ended;
iii. shall set the C7 (Reception Accepted) value with a total number of active
receivers of each stream and an associated stream of the recieved media
transmission notification (i.e. Sum of all C11 counter values); and
iv. shall enter the \'Gr: Reception Accepted\' state; and
b. if a group call is not a broadcast group call, system call, emergency call
or an imminent peril call, shall include the Reception Mode field set to \'1\'
indicating manual reception mode:
i. shall start timer T11 (Stream Reception Idle) and associate it with the
transmitter SSRC or UserId;
ii. shall initialize counter C11(Count of active receivers for the stream) to
0 and associate it with the transmitter SSRC or UserId; and
iii. shall remain in \'Gr: Reception Idle\' state.
##### 6.3.6.3.4 Void
##### 6.3.6.3.5 Timer T5 (Reception Inactivity) expired
On expiry of timer T5 (Reception Inactivity) the reception control arbitration
logic in the transmission control server based on a configurable service
provider policy either:
1\. shall indicate to the application and signalling plane that timer T5
(Reception Inactivity) has expired;
2\. if the application and signalling planes initiates MCVideo call release,
shall enter the \'Releasing\' state; and
3\. if the application and signalling planes do not initiate MCVideo call
release:
a. should restart the T5 (Reception Inactivity) timer; and
b. shall remain in the \'G: Reception Idle\' state.
##### 6.3.6.3.6 Reception of Receive Media Request message (R: Receive Media
Request)
Upon receiving a Receive Media Request message, the reception control
arbitration logic in the transmission control server:
1\. if the Receive Media Request is rejected:
a. shall send the Receive Media Response (Rejected) message. The Receive Media
Response message:
i. the first bit in the subtype of the Receive media response message is set
to \'1\' (Acknowledgment is required) as described in clause 9.2.2.1, shall
send a Transmission control Ack message; and
ii. shall include the Result field set to 0 (Receive media rejected); and
b. shall remain in \'Gr: Reception Idle \' state; or
2\. if the Receive Media Request is granted:
a. shall stop timer T5 (Reception Inactivity);
b. shall stop timer T11(Stream Reception Idle) if running;
c. shall increment the counter C11 (Count of Active Receivers for the stream),
associated with the transmitter SSRC by 1;
d. shall store the SSRC of transmission participant requesting to receive
media until the reception is finished associated with that Transmission
request;
e. shall send the Receive Media Response message. The Receive Media Response
message:
i. the first bit in the subtype of the Receive media response message is set
to \'1\' (Acknowledgment is required) as described in clause 9.2.2.1, shall
send a Transmission control Ack message; and
ii. shall include the Result field set to 1 (Receive media granted);
f. shall increase C7 (Reception Accepted) by 1 if it has not reach its upper
limit; and
g. shall enter the \'Gr: Reception accepted\' state.
##### 6.3.6.3.7 Receive RTP media (R: RTP media)
Upon receiving RTP media, the reception control arbitration logic in the
transmission control server:
1\. shall instruct the media distributor to forward the RTP media packets to
MCVideo clients according to local policy:
a. If discard is specified in the local policy for transmission without
receiving MCVideo clients, shall discard the RTP packet;
b. If buffer is specified in the local policy for transmission without
receiving MCVideo clients, shall buffer the RTP packet;
2\. shall remain \'Gr: Reception Idle\' state.
##### 6.3.6.3.8 Receive Transmission End Notify message (R: Transmission End
Notify)
Upon receiving a Transmission End Notify, the reception control arbitration
logic in the transmission control server:
1\. shall send the Transmission End Notify message to all other transmission
participants.
2\. shall stop timer T11(Stream Reception Idle) associated with the
transmitter SSRC, if running;
3\. shall remain in \'Gr: Reception Idle\' state.
##### 6.3.6.3.9 Timer T11(Stream Reception Idle) expired
On expiry of timer T11 (Stream Reception Idle) the reception control
arbitration logic in the transmission control server
1\. shall communicate to the transmission control arbitration logic in
transmission control server to terminate the stream associated to the expired
timer T11.
2\. shall remain in the \'Gr: Reception Idle\' state.
NOTE: Terminating the stream by sending Transmission Revoke message or
Transmission End Request message is decided based on MCVideo server local
policy.
#### 6.3.6.4 State: \'Gr: Reception accepted\'
##### 6.3.6.4.1 General
The reception control arbitration logic in the transmission control server is
in this state when other MCVideo users currently accept the media invitation
to receive media.
##### 6.3.6.4.2 Enter the \'Gr: Reception Accepted\' state
When entering this state from any state except the \'Start-stop\' state, the
reception control arbitration logic in the transmission control server:
1\. shall stop timer T5 (Inactivity);
2\. shall set the general state to the \'Gr: Reception Accepted\' state;
##### 6.3.6.4.3 Reception of Receive Media Request message (R: Receive Media
Request)
Upon receiving a Receive Media Request message, the reception control
arbitration logic in the transmission control server:
1\. if the Receive Media Request is rejected:
a. shall send the Receive Media Response (Rejected) message. The Receive Media
Response message:
i. the first bit in the subtype of the Receive media response message is set
to \'1\' (Acknowledgment is required) as described in clause 9.2.2.1, shall
send a Transmission control Ack message; and
ii. shall include the Result field set to 0 (Receive media rejected); and
b. shall remain the \'Gr: Reception accepted\' state; or
2\. if the Receive Media Request is granted:
a. shall stop timer T5 (Inactivity);
b. shall stop timer T11(Stream Reception Idle) associated with the transmitter
SSRC, if running;
c. shall increment the counter C11 (Count of Active Receivers for the stream),
associated with the transmitter SSRC by 1;
d. shall store the SSRC of transmission participant requesting to receive
media until the reception is finished associated with that Transmission
request;
e. shall send the Receive Media Response (Granted) message. The Receive Media
Response message:
i. the first bit in the subtype of the Receive media response message is set
to \'1\' (Acknowledgment is required) as described in clause 9.2.2.1, shall
send a Transmission control Ack message; and
ii. shall include the Result field set to 1 (Receive media granted);
f. shall start timer T6 (Reception Granted);
g. shall increase C7 (Reception Accepted) by 1 if it has not reach its upper
limit; and
h. shall remain in \'Gr: Reception accepted\' state.
##### 6.3.6.4.4 Reception of Receive Media End Request message (R: Receive
Media End Request)
Upon receiving a Receive Media End Request message, the reception control
arbitration logic in the transmission control server:
1.. shall send the Receive Media End Response message. The Receive Media End
Response message:
a the first bit in the subtype of the Receive media end response message is
set to \'1\' (Acknowledgment is required) as described in clause 9.2.2.1,
shall send a Transmission control Ack message.
b shall include the Message Type field set to \'y\' (Receive media end
granted);
2\. shall stop timer T6 (Reception Granted);
3\. shall decrement the counter C11 (Count of Active Receivers for stream) by
1, if it has not reach its lower limit;
4\. if C11 has reached its lower limit, shall start timer T11 (Stream
Reception Idle);NOTE: Decision to start same timer T11 or a new timer, when
all the participants have stopped reception, can be taken based on MCVideo
server local policy.
5\. shall decrease C7 (Reception Accepted) by 1 if it has not reach its lower
limit;
6\. if C7 has not reached its lower limit, shall remain in \'Gr: Reception
accepted\' state;
7\. if C7 has reached its lower limit, shall enter the \'Gr: Reception Idle\'
state.
##### 6.3.6.4.5 Reception of Receive Media End Response message (R: Receive
Media End Response)
Upon receiving a Receive Media End Response message, the reception control
arbitration logic in the transmission control server:
1\. if the the first bit in the subtype of the Receive media end response
message is set to \'1\' (Acknowledgment is required) as described in clause
9.2.2.1, shall send a Transmission control Ack message.
2\. shall stop timer T6 (Reception Granted);
3\. shall decrement the counter C11 (Count of Active Receivers for the stream)
by 1, if it has not reach its lower limit;
4\. if C11 has reached its lower limit, shall start timer T11 (Stream
Reception Idle);
NOTE: Decision to start same timer T11 or a new timer, when all the
participants have stopped reception, can be taken based on MCVideo server
local policy.
5\. shall decrease C7 (Reception Accepted) by 1 if it has not reach its lower
limit;
6\. if C7 has not reached its lower limit, shall remain in \'Gr: Reception
accepted\' state.
7\. if C7 has reached its lower limit, shall enter the \'Gr: Reception Idle\'
state.
##### 6.3.6.4.6 Void
##### 6.3.6.4.7 Receive RTP media (R: RTP media)
Upon receiving a RTP media, the reception control arbitration logic in the
transmission control server:
1\. shall instruct the media distributor to forward the RTP media packets to
MCVideo clients according to local policy; and
2\. shall remain the \'Gr: Reception accepted\' state.
##### 6.3.6.4.8 Timer T6 (Reception Granted) expires
On expiry of timer T6 (Reception Granted) the reception control arbitration
logic in the transmission control server:
1\. shall send a Receive Media Response (Granted) message to the granted
transmission participant if counter C6 (Reception Granted) has not reached its
upper limit.
2\. shall start timer T6 (Reception Granted) and increment counter C6
(Reception Granted) by 1 if counter C6 (Reception Granted) has not reached its
upper limit; and
3\. shall remain in the \'G: Reception accepted\' state.
##### 6.3.6.4.9 Timer T6 (Reception Granted) expired N times
When timer T6 (Reception Granted) expires and counter C6 (Reception Granted)
reaches its upper limit, the reception control arbitration logic in the
transmission control server:
1\. shall remain in the \'G: Reception Accepted\' state.
##### 6.3.6.4.10 Receive Media Transmission Notify message (R: Media
Transmission Notify)
Upon receiving a media transmission request notify message from the reception
control arbitration logic in the transmission control server:
1\. shall send the Media Transmission Notify message to all other transmission
participants. The Media Transmission Notify message:
a. if a group call is a broadcast group call, system call, emergency call or
an imminent peril call, shall include the Reception Mode field set to \'0\'
indicating automatic reception mode;
i. shall set the counter C11 (Count of Active Receivers for the stream),
associated with the transmitter by the total number of receiving MCVideo
clients who are participating in the call;
ii shall store the SSRC of all the transmission participants who are
participating in the call until the reception of media associated with
Transmission notification is ended; and
iii shall set C7 (Reception Accepted) value with a total number of active
receivers of each stream and an associated stream of the recieved media
transmission notification (i.e. Sum of all C11 counter values); and
b. if a group call is not a broadcast group call, system call, emergency call
or an imminent peril call, shall include the Reception Mode field set to \'1\'
indicating manual reception mode:
i. shall start timer T11 (Stream Reception Idle) and associate it with the
transmitter SSRC or UserId present in Media Transmission Notify message; and
ii shall initialize a counter C11(Count of Active Receivers for the stream) to
0 and associate it with the transmitter SSRC or UserId present in Media
Transmission Notify message; and
2\. shall remain in the \'Gr: Reception Accepted\' state.
##### 6.3.6.4.12 Timer T11(Stream Reception Idle) expired
On expiry of timer T11 (Stream Reception Idle), the reception control
arbitration logic in the transmission control server
1\. shall communicate to the transmission control arbitration logic in
transmission control server to terminate the stream associated to the expired
timer T11.
2\. shall remain in \'Gr: Reception Accepted\' state.
> NOTE: Terminating the stream by sending Transmission Revoke message or
> Transmission End Request message is decided based on MCVideo server local
> policy.
#### 6.3.6.5 State: \'Gr: Any state\'
##### 6.3.6.5.1 General
This clause describes the actions to be taken in all states defined for the
general state diagram with the exception of the \'Start-stop\' state.
##### 6.3.6.5.2 Receive MCVideo call release - 1
This clause is used by the reception control arbitration logic in the
transmission control server when an MCVideo call is released.
Upon receiving an MCVideo call release step 1 request from the application and
signalling plane the transmission control arbitration logic in the
transmission control server:
1\. shall request the media distributor in the MCVideo server to stop sending
RTP media packets MCVideo clients; and
2\. shall enter the \'Releasing\' state.
#### 6.3.6.6 State: \'Gr: Releasing\'
##### 6.3.6.6.1 General
The reception control arbitration logic in the transmission control server
uses this state while waiting for the application and signalling plane to
finalize the disconnection of an MCVideo call.
##### 6.3.4.6.2 Receive MCVideo call release - 2
Upon receiving an MCVideo call release step 2 request from the application and
signalling plane, the reception control arbitration logic in the transmission
control server:
1\. shall release all resources reserved in the media plane including the
instances used for the \'transmission control server state transition diagram
for general reception control operation\', and \'Transmission control server
state transition diagram for basic reception control operation towards the
transmission participant\' state machines and any running timers associated
with the state machines; and
2\. shall enter the \'Start-stop\' state.
### 6.3.7 Transmission control server state transition for basic reception
control operations towards the transmission participant
#### 6.3.7.1 General
The reception control interface towards the MCVideo client in the transmission
control server shall behave according to the state diagram and state
transitions specified in this clause.
Figure 6.3.7.1-1 shows the states and state transitions for an associated
transmission participant in the transmission control server.
Figure 6.3.7.1-1: Transmission control server state transition diagram for
basic reception control operation towards the transmission participant
The reception control interface towards the MCVideo client in the transmission
control server shall create one instance of the \'basic reception control
operations\' state machine towards the MCVideo client for every transmission
participant served by the transmission control server as follows:
1\. For pre-arranged group call in case of an originating MCVideo call, the
\'basic reception control operation towards the transmission participant\'
state machine shall be created when the MCVideo server sends the SIP 200 (OK)
response towards the originating MCVideo client.
2\. For pre-arranged group call in case of a terminating MCVideo call, the
\'basic reception control operation towards the transmission participant\'
state machine shall be created when the transmission control server receives
the SIP 200 (OK) response.
3\. For chat group call the \'basic reception control operation state machine
towards the transmission participant\' shall be created when the MCVideo
server sends the SIP 200 (OK) response to the received initial SIP INVITE
request.
The transmission participant associated to the \'basic reception control
operation towards the transmission participant\' state machine is here
referred to as the \"associated transmission participant\".
The external inputs to the state machine are:
1\. directives coming from the reception control arbitration logic;
2\. transmission control messages sent by the transmission participants;
3\. media; and
4\. in certain cases, SIP messages used for call handling.
If transmission control messages or RTP media packets arrives in a state where
there is no procedure specified in the following clauses, the transmission
control interface towards the MCVideo client in the transmission control
server:
1\. shall discard the transmission control message;
2\. shall request the network media interface in the MCVideo server to discard
any received RTP media packet; and
3\. shall remain in the current state.
State details are explained in the following clauses.
#### 6.3.7.2 State: \'Start-stop\'
##### 6.3.7.2.1 General
When a new instance of the \'basic reception control operations towards the
transmission participant\' state machine is created, before any reception
control related input is applied, the state machine is in the \'Start-stop\'
state. Similarly when the call is released the state machine shall return to
the Start-Stop state.
An association between the transmission control server and a transmission
participant in the MCVideo client is created, when the state machine is
created; and
1\. in case of an originating MCVideo call, when the MCVideo server sends the
SIP 200 (OK) response to the originating MCVideo client; and
2\. in case of a terminating MCVideo call, when the transmission control
server receives the SIP 200 (OK) response sent from the terminating MCVideo
client.
##### 6.3.7.2.2 SIP Session initiated
When a SIP Session is established and if the session is a normal group call
session:
NOTE 1: Temporary group call is not supported in this release. Normal group
call contains pre-arranged group call, chat group call, broadcast group call.
1\. if an MCVideo client initiate an MCVideo call, and the MCVideo call does
not exist yet, the transmission control interface towards the MCVideo client
in the transmission control server:
a. shall initialize a general state machine as specified in clause 6.3.6.2.2;
and
NOTE 2: In the clause 6.3.6.2.2 the \'general reception control operation\'
state machine will continue with the initialization of the \'general reception
control operation\' state machine.
b. shall enter the state \'U: not permitted to receive\' as specified in the
clause 6.3.7.3.2; and
2\. if the associated transmission participant attempts to initiate an already
existing MCVideo call or MCVideo client rejoins an ongoing MCVideo call or if
the MCVideo client is invited to the MCVideo call
a if no MCVideo client has the permission to send media, the transmission
control interface towards the MCVideo client in the transmission control
server
i. shall enter the state \'U: not permitted to receive\' as specified in the
clause 6.3.7.3.2; and
b if other MCVideo clients have permission to send a media, the transmission
control interface towards the MCVideo client in the transmission control
server:
i. shall enter the state \'U: not permitted to receive\' as specified in the
clause 6.3.7.3.2; and
ii. shall send media transmission notification as specified in the clause
6.3.7.3.3.
NOTE 3: The usecases, the MCVideo client initiating new call, joining ongoing
call and re-joining ongoing call are applicable towards the originating
MCVideo client and for other usecases it is applicable towards the terminating
MCVideo client
The maximum reception priority of the transmission participant is permitted to
request is negotiated in the \"mc_reception_priority\" fmtp attribute as
specified in clause 14.
#### 6.3.7.3 State: \'U: not permitted to receive\'
##### 6.3.7.3.1 General
The transmission control interface towards the MCVideo client in the
transmission control server uses this state when the associated transmission
participant is not permitted to receive media.
##### 6.3.7.3.2 Enter state \'U: not permitted to receive\'
When entering this state, the transmission control interface towards the
MCVideo client in the transmission control server:
1\. shall set the state for the associated transmission participant to \'U:
not permitted to receive\';
2\. shall initialise counter C9 (Reception Active) to 0; and
3\. shall empty Active SSRC list.
##### 6.3.7.3.3 Send Media Transmission Notification message (S: Media
Transmission Notification)
When the transmission control server has received RTP media packets from
another transmission participant or upon receiving a Media Transmission
Notification message from the reception control arbitration logic, the
transmission control interface towards the MCVideo client in the transmission
control server:
1\. shall send the Media Transmission Notification message to the transmission
participant;
2\. shall include the User ID and the SSRC of user transmitting the media in
the Media Transmission Notification message;
3\. may set the first bit in the subtype of the Media Transmission
Notification message to \'1\' (Acknowledgment is required) as described in
clause 9.2.2.1; and
NOTE: It is an implementation option to handle the receipt of the Transmission
control Ack message and what action to take if the Transmission control Ack
message is not received.
4\. if the Reception Mode field is set to \'0\' indicating automatic reception
mode:
a. shall increase C9 (Reception Active) by \'1\' if it has not reached its
upper limit;
b. shall store the SSRC of transmission participant granted the permission to
send media in Active SSRC list until the associated transmission is ended
towards the participant; and
c. shall enter the state \'U: permitted to receive\' as specified in clause
6.3.7.4.2; and
5\. if the Reception Mode field is set to \'1\' indicating manual reception
mode:
a. shall remain in the \'U: not permitted to receive\' state as specified in
the clause 6.3.7.3.2.
##### 6.3.7.3.4 Reception of Receive Media Request message (R: Receive Media
Request)
Upon receiving a Receive Media Request message from the associated
transmission participant, the transmission control interface towards the
MCVideo client in the transmission control server:
1\. if the session is not a broadcast group call, shall forward the Receive
Media Request message to the reception control arbitration logic;
2\. if the reception control arbitration logic decides that the transmission
participant cannot receive media, shall send a Receive Media Response
(Rejected) message to the associated transmission participant. The Receive
Media Response (Rejected) message:
a. shall include in the Result field the \ value result#0
(Rejected)
b. shall include in the Reject Cause field the \ value:
i. cause#0 (Insufficient downlink bandwidth); or
ii. cause#1 (No permission to receive)
c. may include in the Reject Cause field an additional text string explaining
the reason for rejecting the Transmission request in the \
value;
d. may set the first bit in the subtype of the Transmission Response
(Rejected) message to \'1\' (Acknowledgment is required) as described in
clause 9.2.2.1; and
NOTE 3: It is an implementation option to handle the receipt of the
Transmission control Ack message and what action to take if the Transmission
control Ack message is not received.
e. if a group call is a broadcast group call, a system call, an emergency
call, an imminent peril call, or a temporary group session, shall include the
Transmission Indicator field with appropriate indications; and
3\. shall remain in the \'U: not permitted to receive\' state.
Upon receiving a Receive Media Request messagae from the associated
transmission participant including a Reception Priority field, the reception
priority shall be the lower of the reception priority included in Receive
Media Request message and the negotiated maximum reception priority that the
MCVideo client is permitted to request.
##### 6.3.7.3.5 Receive Media Reception End Response message (R: Media
Reception End Resonse)
Upon receiving the Media Reception End Response message from the transmission
participant, the transmission control interface towards the MCVideo client in
the transmission control server:
1\. shall release any downlink resources associated with the transmission
participant; and
2\. shall remain in the \'U: not permitted to receive\' state.
##### 6.3.7.3.6 Send Receive Media Response (Granted) message (S: Receive
Media Response (Granted))
When the reception control arbitration logic in the MCVideo server decides to
grant permission to the transmission participant to receive the media, the
transmission control interface towards the MCVideo client in the transmission
control server:
1\. shall send the Receive Media Response (Granted) message to the associated
transmission participant;
2\. may set the first bit in the subtype of the Receive Media Response
(Granted) message to \'1\' (Acknowledgment is required) as described in clause
9.2.2.1; and
NOTE: It is an implementation option to handle the receipt of the Transmission
control Ack message and what action to take if the Transmission control Ack
message is not received.
3\. shall increase C9 (Reception Active) by 1 if it has not reached its upper
limit;
4\. shall store the SSRC of transmission participant granted the permission to
send media in Active SSRC list until the associated transmission is ended
towards participant; and
5\. shall enter the state \'U: permitted to receive\' as specified in clause
6.3.7.4.2.
##### 6.3.7.3.7 Send Transmission End Notify message (S: Transmission End
Notify)
When transmission control server has stopped receiving RTP media packets from
another transmission participant on uplink or upon receiving a Transmission
End Notify message from the reception control arbitration logic, the
transmission control interface towards the MCVideo client in the transmission
control server:
1\. shall send the Transmission End Notify message to the transmission
participant;
2\. shall include the SSRC of the user transmitting the media in the
Transmission End Notify message; and
3\. shall remain in the \'U: not permitted to receive\' state.
#### 6.3.7.4 State: \'U: permitted to receive\'
##### 6.3.7.4.1 General
The transmission control interface towards the MCVideo client in the
transmission control server uses this state when the associated transmission
participant has been given permission to receive media.
##### 6.3.7.4.2 Enter state \'U: permitted to receive\'
When entering this state the transmission control interface towards the
MCVideo client in the transmission control server:
1\. shall set the state for the associated transmission participant to \'U:
permitted to receive\'.
##### 6.3.7.4.3 Send RTP media packets (S: RTP media)
Upon the decision of the reception control arbitration logic to permit the
transmission participant to receive a media in transmission, the transmission
control interface towards the MCVideo client in the transmission control
server:
1\. shall request the network media interface in the MCVideo server to forward
RTP media packets to the media distributor in the MCVideo server if received
packet SSRC is present in the Active SSRC list;
2\. shall discard the RTP media packets if received packet SSRC is not in the
Active SSRC list; and
3\. shall remain in the \'U: permitted to receive\' state.
##### 6.3.7.4.4 Receive Media Reception End Request message (R: Media
Reception End Request)
Upon receiving a Media Reception End Request message from the associated
transmission participant, the transmission control interface towards the
MCVideo client in the transmission control server:
1\. shall forward the Media Reception End Request message to the general
transmission control operation state machine of the transmission control
arbitration logic in the MCVideo server; and
2\. shall remain in the \'U: permitted to receive\' state.
##### 6.3.7.4.5 Send Media Transmission Notification message (S: Media
Transmission Notification)
When transmission control server has received RTP media packets from another
transmission participant on uplink or upon receiving a Media Transmission
Notification message from the reception control arbitration logic, the
transmission control interface towards the MCVideo client in the transmission
control server:
1\. shall send the Media Transmission Notification message to the transmission
participant;
2\. shall include the User ID and the SSRC of user transmitting the media in
the Media Transmission Notification;
3\. may set the first bit in the subtype of the Media Transmission
Notification message to \'1\' (Acknowledgment is required) as described in
clause 9.2.2.1;
NOTE: It is an implementation option to handle the receipt of the Transmission
control Ack message and what action to take if the Transmission control Ack
message is not received.
4\. if the Reception Mode field is set to \'0\' indicating automatic reception
mode:
a. shall increase C9 (Reception Active) by \'1\' if it has not reached its
upper limit; and
b. shall store the SSRC of transmission participant granted the permission to
send media in Active SSRC list until the associated transmission is ended
towards participant; and
5\. shall remain in the \'U: permitted to receive\' state.
##### 6.3.7.4.6 Send Media Reception Override Notify message (S: Media
Reception Override Notify)
When transmission control server has received RTP media packets from another
transmission participant on uplink and the transmission control server decides
that it cannot send the RTP media packet on downstream even if the user if
permitted to receive, the transmission control interface towards the MCVideo
client in the transmission control server:
1\. shall send the Media Reception Override Notify message to the transmission
participant;
2\. shall include the SSRC of the user transmitting the media in the Media
Reception Override Notify message; and
3\. shall remain in the \'U: permitted to receive\' state.
##### 6.3.7.4.7 Send Transmission End Notify message (S: Transmission End
Notify)
When transmission control server has stopped receiving RTP media packets from
another transmission participant on uplink or upon receiving a Transmission
End Notify message from the reception control arbitration logic, the
transmission control interface towards the MCVideo client in the transmission
control server:
1\. shall send the Transmission End Notify message to the transmission
participant;
2\. shall include the SSRC of the user transmitting the media in the
Transmission End Notify message;
3\. if SSRC of the user transmitting the media present in Active SSRC list
then shall decrease C9 (Reception Active) by 1 if it has not reach its lower
limit;
4\. shall remove SSRC of the user transmitting the media from Active SSRC
list; and
5\. if C9 has not reached it lower limit, shall remain in the \'U: permitted
to receive\' state; or
6\. if C9 has reached it lower limit, shall enter the \'U: not permitted to
receive\' state as specified in clause 6.3.7.3.2.
##### 6.3.7.4.8 Send Media Reception End Request message (S: Media Reception
End Request)
When the transmission control server determines to end sending the RTP media
packets on downlink to the transmission participant, the transmission control
interface towards the MCVideo client in the transmission control server:
1\. shall stop sending the RTP media packets to the transmission participant;
2\. shall send the Media Reception End Request message to the transmission
participant;
3\. shall include the SSRC of the user transmitting the media in the Media
Reception End Request message;
4\. if SSRC of the user transmitting the media present in Active SSRC list
then shall decrease C9 (Reception Active) by 1 if it has not reach its lower
limit;
5\. shall remove SSRC of the user transmitting the media from Active SSRC
list; and
6\. if C9 has not reached it lower limit, shall remain in the \'U: permitted
to receive\'; or
7\. if C9 has reached it lower limit, shall enter the \'U: not permitted to
receive\' state as specified in clause 6.3.7.3.2.
##### 6.3.7.4.9 Send Media Reception End Response message (S: Media Reception
End Response)
When the transmission control server determines to end sending the RTP media
packets on downlink to the transmission participant, the transmission control
interface towards the MCVideo client in the transmission control server:
1\. shall stop sending the RTP media packets to the transmission participant;
2\. shall send the Media Reception End Response message to the transmission
participant, may set the first bit in the subtype of the Media Reception End
Response message to \'1\' (Acknowledgment is required) as described in clause
9.2.2.1; and
NOTE 3: It is an implementation option to handle the receipt of the
Transmission control Ack message and what action to take if the Transmission
control Ack message is not received.
3\. if SSRC of the user transmitting the media present in Active SSRC list
then shall decrease C9 (Reception Active) by 1 if it has not reach its lower
limit;
4\. shall remove SSRC of the user transmitting the media from Active SSRC
list; and
5\. if C9 has not reached it lower limit, shall remain in the \'U: permitted
to receive\'; or
6\. if C9 has reached it lower limit, shall enter the \'U: not permitted to
receive\' state as specified in clause 6.3.7.3.2.
##### 6.3.7.4.10 Reception of Receive Media Request message (R: Receive Media
Request)
Upon receiving a Receive Media Request message from the associated
transmission participant, the transmission control interface towards the
MCVideo client in the transmission control server:
1\. shall reject the request if following condition is fulfilled and shall
skip the forwarding of Receive Media Request message to the reception control
server aribitration logic:
a. if the counter C9 (Reception Active) has reached its upper limit;
2\. if the session is not a broadcast group call, shall forward the Receive
Media Request message to the reception control server arbitration logic;
3\. if the reception control server arbitration logic decides that the
transmission participant cannot receive media, shall send a Receive Media
Response (Rejected) message to the associated transmission participant. The
Receive Media Response (Rejected) message:
a. shall include in the Result field the \ value result#0
(Rejected)
b. shall include in the Reject Cause field the \ value:
i. cause#0 (Insufficient downlink bandwidth); or
ii. cause#1 (No permission to receive) ; or
iii. cause#7 (Max no of simultaneous stream to receive is reached); and
c. may include in the Reject Cause field an additional text string explaining
the reason for rejecting the Transmission request in the \
value;
d. may set the first bit in the subtype of the Transmission Response
(Rejected) message to \'1\' (Acknowledgment is required) as described in
clause 9.2.2.1; and
NOTE 3: It is an implementation option to handle the receipt of the
Transmission control Ack message and what action to take if the Transmission
control Ack message is not received.
e. if a group call is a broadcast group call, a system call, an emergency
call, an imminent peril call, or a temporary group session, shall include the
Transmission Indicator field with appropriate indications; and
4\. shall remain in the \'U: permitted to receive\' state.
Upon receiving a Receive Media Request message from the associated
transmission participant including a Reception Priority field, the reception
priority shall be the lower of the reception priority included in Receive
Media Request message and the negotiated maximum reception priority that the
MCVideo client is permitted to request.
##### 6.3.7.4.11 Send Receive Media Response (Granted) message (S: Receive
Media Response (Granted))
When the reception control server arbitration logic in the MCVideo server
decides to grant permission to the transmission participant to receive the
media, the transmission control interface towards the MCVideo client in the
transmission control server:
1\. shall send the Receive Media Response (Granted) message to the associated
transmission participant;
2\. may set the first bit in the subtype of the Receive Media Response
(Granted) message to \'1\' (Acknowledgment is required) as described in clause
9.2.2.1; and
NOTE: It is an implementation option to handle the receipt of the Transmission
control Ack message and what action to take if the Transmission control Ack
message is not received.
3\. shall increase C9 (Reception Active) by 1 if it has not reach its upper
limit;
4\. shall store the SSRC of transmission participant granted the permission to
send media in Active SSRC list until the associated transmission is ended
towards participant; and
5\. shall remain in the \'U: permitted to receive\' state.
##### 6.3.7.4.12 Receive Media Reception End Response message (R: Media
Reception End Response)
Upon receiving the Media Reception End Response message from the transmission
participant, the transmission control interface towards the MCVideo client in
the transmission control server:
1\. shall release any downlink resources associated to requested media
reception to be ended for the transmission participant; and
2\. shall remain in the \'U: permitted to receive\' state.
## 6.4 Participating MCVideo function transmission control procedures
### 6.4.1 General
Once an on-demand MCVideo session is established or a pre-established session
is in use when the participating MCVideo function receives transmission
control messages from the transmission participant in the MCVideo client or
from the transmission control server in the controlling MCVideo function, the
behaviour of the participating MCVideo function is described in the following
clauses.
### 6.4.2 Receive transmission control messages
Upon receiving a transmission control message the participating MCVideo
function:
1\. shall immediately forward the transmission control message to the
transmission control server if the message is received from the transmission
participant;
2\. if an MBMS subchannel is not used for a transmission in the session the
transmission control message is associated with, shall immediately forward the
transmission control message to the transmission participant if the message is
received from the transmission control server; and
3\. if an MBMS subchannel is used for a transmission in the session the
transmission control message is associated with:
a. if
i. the transmission control message is not a Transmission Idle message or a
Media Transmission Notify message;
ii. the MCVideo client has not reported \"listening\" status as specified in
3GPP TS 24.281 [2] clause 14.2.3; or
iii. the MCVideo client has reported \"not-listening\" status as specified in
3GPP TS 24.281 [2] clause 14.2.3 in the latest received MBMS bearer listening
status report;
shall immediately forward the transmission control message to the transmission
participant; and
b. if
i. the MCVideo client has reported \"listening\" status as specified in 3GPP
TS 24.281 [2] clause 14.2.3 in the latest received MBMS bearer listening
status report; and
ii if the transmission control message is the Transmission Idle message or the
Media Transmission Notify message,
shall perform actions as specified in clause 10.2.
NOTE: When the Transmit Idle or Media Transmission Notify messages are
discarded the messages are sent to the MCVideo clients over the MBMS
subchannel allocated for the transmission as specified in clause 10.2.
### 6.4.3 Receive RTP media packets (R: RTP Media)
Upon receiving RTP media packets the participating MCVideo function:
1\. shall immediately forward the RTP media packet to the controlling MCVideo
function if the RTP packet is from an MCVideo client; and
2\. if an MBMS subchannel is not used for a transmission in the session the
RTP media packets are associated with, shall immediately forward the RTP media
packets to the MCVideo client if the RTP packet is from the controlling
MCVideo function or the non-controlling MCVideo function.
3\. if an MBMS subchannel is used for a transmission in the session the RTP
media packets are associated with and if RTP media packets are received from
the controlling MCVideo function or the non-controlling MCVideo function:
a. if
i. the MCVideo client has not reported \"listening\" status as specified in
3GPP TS 24.281 [2] clause 14.2.3; or
ii. the MCVideo client has reported \"not-listening\" status as specified in
3GPP TS 24.281 [2] clause 14.2.3 in the latest received MBMS bearer listening
status report,
shall immediately forward the RTP media packets to the MCVideo client; and
b. if the MCVideo client has reported \"listening\" status as specified in
3GPP TS 24.281 [2] clause 14.2.3 in the latest received MBMS bearer listening
status report, shall perform actions as specified in clause 10.2.
### 6.4.4 Release of session
When the participating function receives an indication from the application
and signalling plane that session release is initiated, the participating
MCVideo function:
1\. shall stop sending transmission control messages towards the transmission
participant and the transmission control server; and
2\. shall stop sending RTP media packets towards the MCVideo client and
towards the controlling MCVideo function.
When the participating MCVideo function receives an indication from the
application and signalling plane that the session is released, the
participating MCVideo function:
1\. in case of a pre-established session, shall perform the actions in clause
9.3.2; and
2\. in case of an on-demand session, shall release the media resources
associated with the session.
## 6.5 Non-controlling MCVideo function of an MCVideo group
### 6.5.1 General
The transmission control server interface in the non-controlling MCVideo
function of an MCVideo group shall support the procedures in clauses 6.5.2,
6.5.3 and 6.5.4.
The transmission participant interface in the non-controlling MCVideo function
of an MCVideo group shall support the procedures in clause 6.5.5.
### 6.5.2 The MCVideo call initialization procedure in the non-controlling
MCVideo function of an MCVideo group
#### 6.5.2.1 General
The clause 6.5.2.2 describes the initial procedures when a new SIP session is
establishing a group session.
The clause 6.5.2.3 describes the procedure for switching from a controlling
MCVideo function mode to a non-controlling MCVideo function mode.
#### 6.5.2.2 Initial procedures when a new SIP session is establishing a group
session
When receiving an indication from the application and signalling plane that a
group session is initiated, the transmission control server interface:
1\. shall initiate and store a message sequence number value with the value to
be used in the Message Sequence Number field in the Transmission Idle and
Transmission Arbitration Taken messages;
2\. shall for each MCVideo client in the MCVideo group controlled by the non-
controlling MCVideo function that are participating in the session:
a. generate a random temporary identifier between \'0\' and \'4294967295\';
b. store an association between the generated temporary identifier and the
transmission participant interface;
c. store information about capabilities negotiated in the \"mc_queueing\" and
\"mc_priority\" fmtp attributes as described in clause 14;
d. store information whether the MCVideo client requested privacy or not; and
e. initiate an instance of the \'transmission participant interface state
transition\' state machine as specified in clause 6.5.5; and
3\. shall perform the actions in the clause 6.5.4.
When receiving an indication from the application and signalling plane that an
MCVideo client has accepted an invitation to the session, the transmission
participant interface shall perform the actions in clause 6.5.5.
#### 6.5.2.3 Switching from a controlling MCVideo function mode to a non-
controlling MCVideo function mode
##### 6.5.2.3.1 Overview
The switching from working in a controlling MCVideo functional mode to a non-
controlling MCVideo functional mode is a 2-step procedure.
> Step 1 The controlling MCVideo function prepares for acting as a non-
> controlling MCVideo function. The step 1 procedure is specified in clause
> 6.5.2.3.2.\ \ Before continuing with step 2, the application and signalling
> plane needs to receive a confirmation that the SIP session between the
> transmission control server and the interface to the transmission control
> server is established.
>
> Step 2 The controlling MCVideo functions starts acting as a non-controlling
> MCVideo function. The step 2 procedure is specified in clause 6.5.2.3.3.
##### 6.5.2.3.2 Preparing for the switch to non-controlling MCVideo function
(Step 1)
When receiving a request from the application and signalling plane to prepare
for merging with another group session, the transmission control server:
1\. if in the \'G: transmit taken\' state, shall provide information about
current transmitter to the signalling and application plane;
NOTE: The signalling and application plane will use the information about the
current transmitter to send a transmission request in a SIP MESSAGE request as
specified in 3GPP TS 24.281 [2].
2\. shall release the instance used for \'general transmission control
operation\'; and
3\. shall for each MCVideo client in the MCVideo group controlled by the
controlling MCVideo function and participating in the session:
a. generate a random temporary identifier between \'0\' and \'4294967295\';
b. store an association between the generated temporary identifier and the
transmission participant interface;
c. store information about capabilities negotiated in the \"mc_queueing\" and
\"mc_priority\" fmtp attributes as specified in clause 14;
d. store information whether the MCVideo client requested privacy or not; and
e. initiate an instance of the \'transmission participant interface state
transition\' state machine as specified in clause 6.5.5.
##### 6.5.2.3.3 Start acting as a non-controlling MCVideo function (Step 2)
When receiving a request from the application and signalling plane to finalize
the switch to non-controlling MCVideo function behaviour, the transmission
control server:
1\. shall start acting as a transmission control server interface;
2\. if an active transmission request queue exists, for each queued
transmission request in the active transmission request queue:
NOTE: The active transmission request queue was built up when the non-
controlling MCVideo function was acting as a transmission control server.
a. shall send a Transmission Request message to the transmission control
server. The Transmission Request:
i. shall include all fields included by the transmission participant;
ii. if a Track Info field is included, shall include the temporary identifier
at the end of the \ value item; and
iii. if a Track Info field is not included, shall include a Track Info field
populated as follows:
A. shall include the \"mc_queueing\" fmtp attribute value negotiated as
specified in clause 14 in the \ value;
B. shall include a \ value based on the \
element specified in 3GPP TS 24.481 [12], if a value in the \ element is available, otherwise set the \ value to
\"unknown\"; and
C. shall include the temporary identifier as the first \ value;
3\. if an active ttransmission request queue exists, shall move the active
ttransmission request queue to a passive ttransmission request queue; and
4\. shall perform the actions in the clause 6.5.4.
When receiving an indication from the application and signalling plane that an
MCVideo client has joined the session, the transmission participant interface
shall perform the actions in clause 6.5.5.
### 6.5.3 The MCVideo call release procedure in the non-controlling MCVideo
function of an MCVideo group
When an MCVideo client leaves an MCVideo call and the MCVideo call remains
ongoing with the other MCVideo clients, the non-controlling MCVideo function
of an MCVideo group follows a two-step procedure:
> Step 1 The transmission participant interface stops sending transmission
> control messages and RTP media packets to the MCVideo client leaving the
> MCVideo call and the transmission participant interface discards
> transmission control messages and RTP media packets received from the
> MCVideo client leaving the MCVideo call; and
>
> Step 2 When the application and signalling plane has determined that the
> session with this transmission participant has been released, the
> corresponding instance of the \'transmission participant interface state
> transition\' state machine is released.
When an MCVideo call is released, the transmission control server interface
follows a two-step procedure:
> Step 1 The transmission control server interface stops sending transmission
> control messages and RTP media packets to MCVideo clients in the MCVideo
> call; and
>
> Step 2 When the application and signalling plane has determined that the
> MCVideo call has been released, resources in the transmission control server
> interface are released, along with all \'transmission participant interface
> state transition\' state machines.
The non-controlling MCVideo function of an MCVideo group can initiate an
MCVideo call release depending on the release policy specified in 3GPP TS
24.281 [2].
### 6.5.4 Floor control server interface procedures
#### 6.5.4.1 General
The transmission control server interface is stateless with regards to the
transmission control messages received and sent.
The following clauses specify what the transmission control server interface
shall do when receiving a transmission control message sent by the controlling
MCVideo function or received at the transmission participant interface and how
the transmission control server controls the media distribution function in
the non-controlling MCVideo function.
#### 6.5.4.2 Receiving a Transmission Request message
Upon receiving a Transmission Request message from one transmission
participant interface, the transmission control server interface:
1\. shall forward the Transmission Request message to the controlling MCVideo
function. The Transmission Request message:
a. shall include all fields included by the transmission participant;
b. if a Track Info field is included, shall include the temporary identifier
at the end of the \ value item; and
c. if a Track Info field is not included, shall include a Track Info field
populated as follows:
i. shall include the \"mc_queueing\" fmtp attribute value negotiated as
specified in clause 14 in the \ value;
ii. shall include a \ value based on the \
element specified in 3GPP TS 24.481 [12], if value in the \
element is available, otherwise set the \ value to
\"unknown\"; and
iii. shall include the temporary identifier as the first \ value; and
2\. if the value of the \ in the Track Info is \'1\' (the
transmission participant in the MCVideo client supports queueing), shall store
the outgoing Transmission Request message in the passive transmission request
queue.
#### 6.5.4.3 Receive Transmission Release message
Upon receiving a Transmission Release message from one transmission
participant interface, the transmission control server interface:
NOTE: A Transmission Release message can be received from the permitted
transmission participant and from any participant that is queued in the
transmission control server.
1\. shall forward a Transmission Release message to the controlling MCVideo
function. The Transmission Release message:
a. shall include all fields included by the transmission participant in the
Transmission Release message;
b. if a Track Info field is included, shall include the temporary identifier
at the end of the \ value item; and
c. if a Track Info field is not included, shall include a Track Info field as
follows:
i. shall include the \"mc_queueing\" fmtp attribute value negotiated as
specified in clause 14 in the \ value; and
ii. shall include the temporary identifier as the first \ value; and
2\. if a Transmission Request message received from this transmission
participant is in the passive transmission request queue, shall remove the
transmission request from the passive transmission request queue.
#### 6.5.4.4 Receive Queue Position Request message
Upon receiving a Queue Position Request message from one transmission
participant interface, the transmission control server interface:
1\. shall forward the Queue Position Request message to the controlling
MCVideo function. The Queue Position Request message:
a. shall include all fields included by the transmission participant;
b. if a Track Info field is included, shall include the temporary identifier
at the end of the \ value item; and
c. if a Track Info field is not included, shall include a Track Info field as
follows:
i. shall include the \"mc_queueing\" fmtp attribute value negotiated as
specified in clause 14 in the \ value; and
ii. shall include the temporary identifier as the first \ value.
#### 6.5.4.5 Receive Transmission Control Ack message
Upon receiving a Transmission Control Ack message from one transmission
participant interface the transmission control server interface:
1\. shall send the Transmission Control Ack message towards the controlling
MCVideo function. The Transmission Control Ack message:
a. shall include all fields included by the transmission participant in the
Transmission Control Ack message;
b. if a Track Info field is included, shall include the temporary identifier
at the end of the \ value item; and
c. if a Track Info field is not included, shall include a Track Info field
with temporary identifier as the first \.
#### 6.5.4.6 Receive Transmission Granted message
Upon receiving a Transmission Granted message sent from the controlling
MCVideo function, the transmission control server interface:
1\. shall send the Transmission Granted to the transmission participant
interface identified by the \ value at the end of the
Track Info field. The Floor Granted message:
a. shall include the fields as received with the following exceptions:
i. if the Track Info field only contains one \ value,
shall remove the Track Info field from the outgoing Transmission Granted
message; and
ii. if the Track Info field contains more than one \
value, shall remove the last \ value from the Track
Info field from the outgoing Transmission Granted message;
2\. shall send a Transmission Arbitration Taken message populated as specified
below to all participant interfaces with the exception of the transmission
participant interface to which the Floor Granted message is sent;
i. shall include the granted MCVideo user\'s MCVideo ID in the Granted
Party\'s Identity field and may include the functional alias of the granted
MCVideo user in the Functional Alias field, if privacy is not requested by the
granted transmission participant when the MCVideo client was invited to the
session;
NOTE 1: The privacy request was stored for each invited MCVideo client when
the MCVideo client accepted the invitation as specified in clause 6.5.2.
ii. shall include in the Message Sequence Number field the local \ value increased with 1;
iii. shall include the Permission to Request the Transmission field set to
\'0\', if the group call is a broadcast group call;
iv. may include the Permission to Request the Transmission field set to \'1\',
if the group call is not a broadcast group call; and
v. shall set the first bit in the subtype of the Transmission Arbitration
Taken message to \'0\' (acknowledgement is not required); and
NOTE 2: A Transmission Arbitration Taken message sent to all participants does
not require acknowledgement.
e. if the Transmission Indicator field was included in the Transmission
Granted message, shall include the received Transmission Indicator field; and
3\. if the Transmission Request message received from the transmission
participant is in the passive transmission request queue, shall remove the
transmission request from the passive transmission request queue.
#### 6.5.4.7 Receive Transmission Rejected message
Upon receiving a Transmission Rejected message sent from the controlling
MCVideo function, the transmission control server interface:
1\. shall use the \ value at the end of the Track Info
field to identify the transmission participant interface;
2\. if:
a. the Track Info field only contains one \ value,
shall remove the Track Info field from the outgoing Transmission Rejected
message; and
b. if the Track Info field contains more than one \
value, shall remove the last \ value from the Track
Info field;
3\. shall forward the Transmission Rejected message to the transmission
participant interface; and
4\. if the Transmission Request message received from the transmission
participant is in the passive transmission request queue, shall remove the
transmission request from the passive transmission request queue.
#### 6.5.4.8 Receive Transmission Idle message
Upon receiving a Transmission Idle message sent from the controlling MCVideo
function, the transmission control server interface:
NOTE 1: The Transmission Idle message can be either destined to transmission
participants in all MCVideo clients or is sent to the transmission participant
in a specific MCVideo client. In the latter case the Transmission Idle message
contains the Track Info field.
1\. if the Transmission Idle message contains a Track Info field;
a. shall use the \ value at the end of the Track Info
field to identify the transmission participant interface;
b. if:
i. the Track Info field only contains one \ value:
A. shall remove the Track Info field from the outgoing Transmission Idle
message;
B. shall increase the stored message sequence number value with 1; and
C. shall include in the Message Sequence Number field the local \ value increased with 1; and
ii. if the Track Info field contains more than one \
value, shall remove the last \ value from the Track
Info field; and
c. shall send the Transmission Idle message to the transmission participant
interface;
2\. if the Transmission Idle message does not contain a Track Info field;
a. shall set the first bit in the subtype of the Transmission Idle message to
\'0\' (acknowledgement is not required);
NOTE 2: A Transmission Idle message sent to all participants does not require
acknowledgement.
b shall send the Transmission Idle message to all transmission participant
interfaces. The Transmission Idle message:
i. shall include received fields; and
ii. shall include in the Message Sequence Number field the local \ value increased with 1; and
c. shall send a Transmission Ack message towards the controlling MCVideo
function if the first bit in the subtype of the received Transmission Idle
message is set to \'1\' (acknowledgement is required) as specified in clause
8.2.2. The Transmission Ack message:
i. shall include the Source field set to \'3\' (the non-controlling MCVideo
function is the source); and
ii. shall include the Message Type field set to \'5\' (Transmission Idle); and
3\. shall empty the passive transmission request queue.
#### 6.5.4.9 Receive Transmission Arbitration Taken message
Upon receiving a Transmission Arbitration Taken message sent from the
controlling MCVideo function, the transmission control server interface:
NOTE 1: The Transmission Arbitration Taken message can be either destined to
transmission participants in all MCVideo clients or is sent to the
transmission participant in a specific MCVideo client. In the latter case the
Transmission Arbitration Taken message contains the Track Info field.
1\. if the Transmission Arbitration Taken message contains a Track Info field;
a. shall use the \ value at the end of the Track Info
field to identify the transmission participant interface;
b. if the Track Info field only contains one \ value:
A. shall remove the Track Info field from the outgoing Transmission
Arbitration Taken message; and
B. shall include in the Message Sequence Number field the local \ value increased with 1;
c. if the Track Info field contains more than one \
value, shall remove the last \ value from the Track
Info field; and
d. shall send the Transmission Arbitration Taken message to the transmission
participant interface;
2\. if the Transmission Arbitration Taken message does not contain a Track
Info field:
a. shall set the first bit in the subtype of the Transmission Arbitration
Taken message to \'0\' (acknowledgement is not required);
NOTE 2: A Transmission Arbitration Taken message sent to all participants does
not require acknowledgement.
b. shall send the Transmission Arbitration Taken message to the transmission
participant interface;
3\. shall send a Transmission Ack message towards the controlling MCVideo
function if the first bit in the subtype of the received Transmission
Arbitration Taken message is set to \'1\' (acknowledgement is required) as
specified in clause 8.2.2. The Transmission Ack message:
i. shall include the Source field set to \'3\' (the non-controlling MCVideo
function is the source); and
ii. shall include the Message Type field set to \'2\' (Transmission
Arbitration Taken);
#### 6.5.4.10 Receive Transmission Revoked message
Upon receiving a Transmission Revoked message from the controlling MCVideo
function, the transmission control server interface:
1\. shall use the \ value at the end of the Track Info
field to identify the transmission participant interface;
2\. if:
a. the Track Info field only contains one \ value,
shall remove the Track Info field from the outgoing Transmission Revoked
message; and
b. if the Track Info field contains more than one \
value, shall remove the last \ value from the Track
Info field; and
3\. shall forward the Transmission Revoked message to the transmission
participant interface.
#### 6.5.4.11 Receive Queue Position Info message
Upon receiving a Queue Position Info message from the controlling MCVideo
function, the transmission control server interface:
1\. shall use the \ value at the end of the Track Info
field to identify the transmission participant interface;
2\. if:
a. the Track Info field only contains one \ value,
shall remove the Track Info field from the outgoing Queue Position Info
message; and
b. if the Track Info field contains more than one \
value, shall remove the last \ value from the Track
Info field; and
3\. shall forward the Queue Position Info message to the transmission
participant interface.
#### 6.5.4.12 Receive RTP media packets from controlling MCVideo function
Upon receiving an indication from the media distributor that RTP media packets
are received from the controlling MCVideo function, the transmission control
server interface:
1\. shall request the network media distributor to forward received RTP media
packets to all MCVideo clients in the session controlled by the non-
controlling MCVideo function where the SSRC of the received RTP media packets
are different from the SSRC used by the MCVideo client.
NOTE: If one of the MCVideo clients controlled by the non-controlling MCVideo
function is granted the transmission, media originated from that MCVideo
client is not distributed back to the MCVideo client granted the transmission.
#### 6.5.4.13 Receive RTP media packets from an MCVideo client
Upon receiving an indication from the media distribution function that RTP
media packets are received from one of the network media interfaces, the
transmission control server interface:
1\. shall request the network media distributor to forward received RTP media
packets towards the controlling MCVideo function.
NOTE: If RTP media packets are received from an MCVideo client not permitted
to send media, the transmission participant interface will send a Transmission
Revoked message to the transmission participant of the misbehaving MCVideo
client without involving the transmission control server interface.
#### 6.5.4.14 MCVideo session release step 1
Upon receiving an MCVideo call release step 1 request from the application and
signalling plane e.g. when the session is going to be released, the
transmission control interface:
1\. shall ignore transmission control messages from the transmission control
server;
2\. shall request the media distributor to stop distributing RTP media packets
to the network media interface of the MCVideo clients; and
3\. shall ignore any transmission control messages received from the
transmission participant interfaces.
#### 6.5.4.15 MCVideo session release step 2
Upon receiving an MCVideo call release step 2 request from the application and
signalling plane, the transmission control server interface:
1\. shall release all resources associated with this session.
#### 6.5.4.16 Receiving a split instruction (R: Split)
Upon receiving an instruction from the application and signalling plane to
split the ongoing group session, as specified in 3GPP TS 24.281 [2] in clause
9.2.1.5.2.4 for prearranged group call and in clause 9.2.2.5.1.4 for chat
group call, the transmission control server interface:
1\. shall perform the actions in clause 6.3.2.3.
### 6.5.5 Floor participant interface procedures
#### 6.5.5.1 General
The transmission participant interface shall behave according to the state
diagram and state transitions specified in this clause.
Figure 6.5.5.1-1 shows the general transmission control operation states (P
states) and the state transition diagram.
Figure 6.5.5.1-1: The \'transmission participant interface state transition\'
state diagram
The transmission participant interface shall keep one instance of the
\'transmission participant interface state transition\' state machine per
MCVideo client in a session.
The transmission participant associated to the \'transmission participant
interface state transition\' state machine is in the following clauses
referred to as the associated transmission participant.
If transmission control messages or RTP media packets arrives in a state where
there is no procedure specified in the following clauses the transmission
participant interface:
1\. shall discard the transmission control message;
2\. shall request the network media interface to discard any received RTP
media packet; and
3\. shall remain in the current state.
State details are explained in the following clauses.
#### 6.5.5.2 State: \'Start-Stop\'
##### 6.5.5.2.1 General
When a new instance of the Transmission participant interface state
transition\' state machine is initiated, before any transmission control
related input is applied, the state machine is in \'Start-stop\' state.
Similarly, when the session is released the state machine shall return to the
\'Start-stop\' state.
##### 6.5.5.2.2 Participant invited to session
When the transmission participant interface receives an indication from the
transmission control server interface that an MCVideo client has accepted the
invitation to a session (i.e. when the SIP 200 (OK) response to the initial
SIP INVITE request is received as specified in 3GPP TS 24.281 [2]) , the
transmission participant interface:
1\. shall enter the \'P: has no permission\' state.
#### 6.5.5.3 State: \'P: has no permission\'
##### 6.5.5.3.1 General
The transmission participant interface uses this state when the associated
transmission participant is not permitted to send media.
##### 6.5.5.3.2 Receive Transmission Idle message (R: Transmission Idle)
When the transmission participant interface receives a Transmission Idle
message from the transmission control server interface, the transmission
participant interface:
1\. shall send the Transmission Idle message to the transmission participant;
2\. if the first bit in the subtype of the Transmission Idle message is set to
\'1\' (acknowledgement is required) as specified in clause 9.2.2, shall store
an indication that a Transmission Ack message to a Transmission Idle message
is expected; and
3\. shall remain in the \'P: has no permission\' state.
##### 6.5.5.3.3 Receive Transmission Arbitration Taken message (R: Floor
Taken)
When the transmission participant interface receives a Transmission
Arbitration Taken message from the transmission control server interface, the
transmission participant interface:
1\. shall send the Transmission Arbitration Taken message to the transmission
participant;
2\. if the first bit in the subtype of the Transmission Arbitration Taken
message is set to \'1\' (acknowledgement is required) as specified in clause
9.2.2, shall store an indication that a Transmission Ack message to a
Transmission Arbitration Taken message is expected; and
3\. shall remain in the \'P: has no permission\' state.
##### 6.5.5.3.4 Receive Transmission Request message (R: Transmission Request)
When the transmission participant interface receives a Transmission Request
message from the transmission participant, the transmission participant
interface:
1\. shall send the Transmission Request message to the transmission control
server interface; and
2\. shall remain in the \'P: has no permission\' state.
##### 6.5.5.3.5 Receive Transmission Granted message (R: Transmission Granted)
When the transmission participant interface receives a Transmission Granted
message from the transmission control server interface, the transmission
participant interface:
1\. shall send the Transmission Granted message to the transmission
participant;
2\. if the first bit in the subtype of the Transmission Granted message is set
to \'1\' (acknowledgement is required) as specified in clause 9.2.2, shall
store an indication that a Transmission Ack message to a Transmission Granted
message is expected; and
3\. shall enter the \'P: has permission\' state.
##### 6.5.5.3.6 Receive Transmission Rejected message (R: Transmission
Rejected)
When the transmission participant interface receives a Transmission Rejected
message from the transmission control server interface, the transmission
participant interface:
1\. shall send the Transmission Rejected message to the transmission
participant;
2\. if the first bit in the subtype of the Transmission Rejected message is
set to \'1\' (acknowledgement is required) as specified in clause 9.2.2, shall
store an indication that a Transmission Ack message to a Transmission Rejected
message is expected; and
3\. shall remain in the \'P: has no permission\' state.
##### 6.5.5.3.7 Receive Queue Position Info message (R: Queue Position Info)
When the transmission participant interface receives a Queue Position Info
message from the transmission control server interface, the transmission
participant interface:
1\. shall send the Queue Position Info message to the transmission
participant;
2\. if the first bit in the subtype of the Queue Position Info message is set
to \'1\' (acknowledgement is required) as specified in clause 9.2.2, shall
store an indication that a Transmission Ack message to a Queue Position Info
message is expected; and
3\. shall remain in the \'P: has no permission\' state.
##### 6.5.5.3.8 Receive Queue Position Request message (R: Queue Position
Request)
When the transmission participant interface receives a Queue Position Request
message from the transmission participant, the transmission participant
interface:
1\. shall send the Queue Position Request message to the transmission control
server interface; and
2\. shall remain in the \'P: has no permission\' state.
##### 6.5.5.3.9 Receive RTP media packets (R: RTP media)
When the transmission participant interface receives an indication from the
network media interface that RTP media packets are received from the media
distributor, the transmission participant interface
1\. shall instruct the network media interface to send the received RTP media
packets towards the MCVideo client; and
2\. shall remain in the \'P: has no permission\' state.
When the transmission participant interface receives an indication from the
network media interface that RTP media packets are received from the MCVideo
client, the transmission participant interface
1\. shall send a Transmission Revoked message to the transmission participant.
The Transmission Revoked message:
a. shall include the Reject Cause field with the \ value set to
#3 (No permission to send a Media Burst);
2\. shall store that a Transmission Release message is expected from the
transmission participant; and
3\. shall remain in the \'P: has no permission\' state.
##### 6.5.5.3.10 Receive Transmission Release message (R: Transmission
Release)
When the transmission participant interface receives a Transmission Release
message from the transmission participant, the transmission participant
interface:
1\. if a Transmission Release message is not expected from the transmission
participant:
a. if the first bit in the subtype of the Transmission Release message is set
to \'1\' (acknowledgement is required) as specified in clause 9.2.2, based on
local policy:
i shall send a Transmission Ack message to the transmission participant and
set the first bit in the subtype of the Transmission Release message to \'0\'
(acknowledgement is not required) in the outgoing Transmission Release
message; or
ii. wait for the Transmission Ack from the transmission control server; and
b. shall forward the Transmission Release message to the transmission control
server interface;
2\. if a Transmission Release message is expected from the transmission
participant:
a. if the first bit in the subtype of the Transmission Release message is set
to \'1\' (acknowledgement is required) as specified in clause 9.2.2:
i. shall send a Transmission Ack message to the transmission participant; and
b. shall remove that a Transmission Release message is expected from the
transmission participant; and
3\. shall remain in the \'P: has no permission\' state.
##### 6.5.5.3.11 Receive split instruction (R: Split)
Upon receiving an instruction to split the ongoing MCVideo call, to the
transmission participant interface:
1\. shall create a new instance of the \'basic transmission control operation
towards the transmission participant\' state machine;
2\. shall move information associated with the instance used for
\'transmission participant interface state transition\' to the \'basic
transmission control operation towards the transmission participant\' state
machine;
NOTE: Which information that needs to be moved is an implementation option.
3\. shall enter the \'Start-stop\' state and terminate the \'transmission
participant state transition\' state machine associated with this transmission
participant and this session;
4\. if the state in \'general transmission control operation\' state machine
is \'G: Transmit Idle\' state; shall enter the \'U: not permitted and transmit
Idle\' state as specified in clause 6.3.5.3.2; and
5\. if the state in \'general transmission control operation\' state machine
is \'G: Transmit Taken\' state; shall enter the \'U: not permitted and
Transmit Taken\' state as specified in clause 6.3.5.4.2.
#### 6.5.5.4 State: \'P: has permission\'
##### 6.5.5.4.1 General
The transmission participant interface uses this state when the transmission
participant has permission to send media
##### 6.5.5.4.2 Receive RTP media packets
When the transmission participant interface receives an indication from the
network media interface that RTP media packets are received from the MCVideo
client, the transmission participant interface:
1\. shall instruct the media interface to forward received RTP media packets
towards the media distributor; and
2\. shall remain in the \'P: has permission\' state.
##### 6.5.5.4.3 Receive Transmission Release message
When the transmission participant interface receives a Transmission Release
message from the transmission participant, the transmission participant
interface:
1\. shall send the Transmission Release message to the transmission control
server interface; and
2\. shall remain in the \'P: has permission\' state.
##### 6.5.5.4.4 Receive Transmission Ack message
When the transmission participant interface receives a Transmission Ack
message from the transmission control server interface, the transmission
participant interface:
1\. shall send the Transmission Ack message to the transmission participant;
and
2\. shall remain in the \'P: has permission\' state.
##### 6.5.5.4.5 Receive Transmission Idle message
When the transmission participant interface receives a Transmission Idle
message from the transmission control server interface, the transmission
participant interface:
1\. shall send the Transmission Idle message to the transmission participant;
2\. if the first bit in the subtype of the Transmission Idle message is set to
\'1\' (acknowledgement is required), shall store an indication that a
Transmission Ack message to a Floor Idle messages is expected; and
3\. shall enter the \'P: has no permission\' state.
##### 6.5.5.4.6 Receive Transmission Arbitration Taken message
When the transmission participant interface receives a Transmission
Arbitration Taken message from the transmission control server interface, the
transmission participant interface:
1\. shall send the Transmission Arbitration Taken message to the transmission
participant;
2\. if the first bit in the subtype of the Transmission Arbitration Taken
message is set to \'1\' (acknowledgement is required), shall store an
indication that a Transmission Ack message to a Floor Taken messages is
expected; and
3\. shall enter the \'P: has no permission\' state.
##### 6.5.5.4.7 Receive Transmission Revoked message
When the transmission participant interface receives a Transmission Revoked
message from the transmission control server interface, the transmission
participant interface:
1\. shall send the Transmission Revoked message to the transmission
participant;
2\. if the first bit in the subtype of the Transmission Revoked message is set
to \'1\' (acknowledgement is required), shall store an indication that a
Transmission Ack message to a Transmission Revoked messages is expected; and
3\. shall remain in the \'P: has permission\' state.
##### 6.5.5.4.8 Receive split instruction (R: Split)
Upon receiving an instruction to split the ongoing MCVideo call, the
transmission participant interface:
1\. shall create a new instance of the \'basic transmission control operation
towards the transmission participant\' state machine as specified in clause
6.3.5;
2\. shall move information associated with the instance used for
\'transmission participant interface state transition\' to the \'basic
transmission control operation towards the transmission participant\' state
machine;
NOTE: Which information that needs to be moved is an implementation option.
3\. shall enter the \'Start-stop\' state and terminate the \'transmission
participant interface state transition\' state machine associated with this
transmission participant and this session; and
4\. shall enter the \'U: permitted\' state as specified in clause 6.3.5.5.2.
#### 6.5.5.5 In any state
##### 6.5.5.5.1 General
This clause describes the actions to be taken in all states defined for the
\'transmission participant interface state transition\' diagram with the
exception of the \'Start-stop\' and \'Releasing\' states.
##### 6.5.5.5.2 Receive Transmission Ack message (R: Transmission Ack)
If a Transmission Ack message is received from the transmission participant,
the transmission participant interface:
1\. if an indication exists that a Transmission Ack message is expected for
the message in the Message Type field;
a. shall forward the Transmission Ack message to the transmission control
server interface; and
b. shall remove the indication that a Transmission Ack message is expected for
the message in the Message Type field; and
NOTE: It is an implementation option what action to take if an indication
exists that a Transmission Ack message is expected for the message in the
Message Type field, but the Transmission Ack message is not received
2\. shall remain in the current state.
If a Transmission Ack message is received from the transmission control server
interface, the transmission participant interface:
1\. shall send the Transmission Ack message to the transmission participant;
and
2\. shall remain in the current state.
##### 6.5.5.5.3 MCVideo session release step 1 (MCVideo call release - 1)
Upon receiving an MCVideo call release step 1 request from the application and
signalling plane, e.g. when the session is going to be released or when the
MCVideo client leaves the session, the transmission participant interface:
1\. shall stop sending transmission control messages to the transmission
participant;
2\. shall request the network media interface to stop sending RTP media
packets towards to the MCVideo client;
3\. shall ignore any transmission control messages received from the
transmission participant;
4\. shall request the network media interface to stop forwarding RTP media
packets from the MCVideo client to the media distributor;
5\. shall indicate to the transmission control server interface that the
MCVideo client has started to disconnect from the session; and
6\. shall enter the \'P: Releasing\' state.
#### 6.5.5.6 State: \'P: Releasing\'
##### 6.5.5.6.1 General
The transmission participant interface uses this state while waiting for the
application and signalling plane to finalize the release of the session or to
finalize the removal of the MCVideo client from the session.
##### 6.5.5.6.2 MCVideo session release step 2 (MCVideo call release - 2)
Upon receiving an MCVideo call release step 2 request from the application and
signalling plane, the transmission participant interface:
1\. shall request the network media interface to release all resources
associated with this MCVideo client for this MCVideo call; and
2\. shall enter the \'Start-stop\' state and terminate the \'transmission
participant interface state transition\' state machine associated with this
transmission participant and this session.
# 7 Off-network MCVideo service media plane procedures
## 7.1 General
Transmission control in off-network can be performed in two ways:
\- Single arbitrator: transmission participants rely on a single participant
designated as transmission arbitrator for the arbitration of transmission
requests.
\- Self arbitration: each transmission participant arbitrates its own
transmission based on its view of the topology.
Both of the approaches, as appropriate for the deployment model, can be
adopted for a MCVideo group using the
\"/\/\/OffNetwork/MCVideo/ArbitrationApproach\" configuration parameter.
If the value of \"/\/\/OffNetwork/MCVideo/ArbitrationApproach\" leaf
node present in group configuration as specified in 3GPP TS 24.483 [4] is set
to:
\- \"single\", then single arbitrator approach applies; or
\- \"self\", then self arbitration approach applies.
In the single arbitrator approach, one MCVideo client assumes the
responsibility for arbitration of transmission requests for all group members
within range. All requests for transmission are directed to the arbitrator,
and the arbitrator checks the configured limits on the simultaneous
transmissions, and grants or denies the request. If an MCVideo client is out
of range of the current arbitrator, the MCVideo client is allowed to transmit
and also become a transmission arbitrator. If there is insufficient capacity
to carry an extra transmission i.e. the configured limit for simultaneous
transmissions is reached, the MCVideo client can request that an existing
transmitting MCVideo client is pre-empted; the pre-emption request is sent to
the transmission arbitrator.
In the self arbitration approach, each MCVideo client decides for itself
whether there is sufficient capacity to carry the transmission. If it
determines that there is insufficient capacity i.e. the configured limit for
simultaneous transmissions is reached, and from its perspective another
transmitting MCVideo client has a lower priority, the requesting MCVideo
client can send an override request directly to this other transmitting
MCVideo client, which will either accept the override request and give way, or
deny the override request.
In both the single arbitrator approach and the self arbitration approach, if
there is insufficient capacity to carry the communication i.e. the configured
limit on the simultaneous transmissions is reached, the MCVideo client can
report this to the MCVideo user. The MCVideo user can decide to transmit
anyway, and instruct the MCVideo client to proceed with the transmission.
## 7.2 Transmission participant procedures for single arbitrator approach
### 7.2.1 Transmission participant procedures at MCVideo session
initialisation
This clause applies when no active transmission control session exists.
Before a transmission control entity is initiated a state machine with a
single state, named as \'Start-stop\' state, shall exist. At \'Start-stop\'
state, when the MCVideo client receives a request of the MCVideo call control
entity to initiate the transmission control as originating client, then the
MCVideo client shall initiate a transmission control entity and the
transmission control entity shall enter into the \'O: transmission
arbitration\' state. Otherwise, if MCVideo client receives a request of the
MCVideo call control entity to initiate the transmission control as
terminating client, then the MCVideo client shall initiate a transmission
control entity and the transmission control entity for an MCVideo group call
shall enter into the \'O: silence\' state or for both MCVideo private call and
MCVideo broadcast call shall enter the \'O: has no permission\' state.
Once the session is initiated, the initial transmission control messages are
sent according to the state machine presented in clause 7.2.3. Normally, once
the session is started the originating MCVideo client has the transmission
implicitly. For an on-going off-network group call, if an MCVideo client joins
later, then it starts the transmission control session and takes the role of
transmission participant and enters \'O: silence\' state.
#### 7.2.1.2 Determine off-network transmission priority
In the absence of a mission critical organization\'s method for determining
off-network transmission priority, the following procedure shall be used.
Otherwise, the mission critical organization\'s method shall supersede this
clause.
Upon receiving a Transmission Request message, to determine the transmission
priority of the Transmission Request message, the transmission arbitrator:
1\. shall check the presence of Transmission priority field in the received
Transmission Request message. If present, the transmission arbitrator:
a. shall determine the transmission priority of the Transmission Request
message by choosing the lowest value from the following inputs:
i. the value of the Transmission priority field in the received Transmission
Request message;
ii. the value of the \"/_\
_/\/Common/MCPTTGroupMemberList/\/UserPriority\" leaf node of the
sender of the Transmission Request message, present in group configuration as
specified in 3GPP TS 24.483 [4]; and
iii. the value of the \"/\/OffNetwork/NumLevelHierarchy\" leaf node present
in service configuration as specified in 3GPP TS 24.483 [4]; and
2\. if the Transmission priority field is not present in the Transmission
Request message, the transmission arbitrator:
a. shall use the minimum value allowed for the Transmission priority as
transmission priority of the Transmission Request message.
Once the transmission priority of the Transmission Request message is
determined, to determine the effective priority of the Transmission Request
message, if the number of transmitters has reached maximum, the transmission
arbitrator:
1\. shall check the type of call indicated by the Transmission Indicator field
of the received Transmission Request message and:
a. if the type of call indicated by the Transmission Indicator field is Normal
call and:
i. if the current type of the call is normal, shall continue to check the next
input parameter from step 2; or
ii if the current type of the call is emergency or imminent-peril, shall deny
the transmission request and skip step 2;
b. if the type of call indicated by the Transmission Indicator field is
Imminent peril call and:
i. if the current type of the call is normal:
A. shall pre-empt a current transmitter;
B. shall grant the transmission request; and
C. shall skip step 2;
ii. if the current type of the call is imminent-peril, shall continue to check
the next input parameter from step 2; and
iii. if the current type of the call is emergency, shall deny the transmission
request and skip step 2;
c. if the type of the call indicated by the Transmission Indicator field is
Emergency call and:
i. if the current type of the call is normal or imminent-peril:
A. shall pre-empt a current transmitter; and
B. shall grant the transmission request;
C. shall skip step 2;
ii. if the current type of the call is emergency, shall continue to check the
next input parameter from step 2; and
2\. shall compare the determined transmission priority of the received
Transmission Request message to the effective priority of the current
transmitters (determined at the time of transmission grant to the current
transmitters) and:
a. if the effective priority of all the current transmitters are equal to or
higher than the determined transmission priority of the Transmission Request
message, shall deny the transmission request; and
b. if the determined transmission priority of the Transmission Request message
is higher than any of the current transmitters:
i. shall pre-empt a current transmitter with lower priority; and
ii. shall grant the transmission request.
### 7.2.2 Transmission participant procedures at MCVideo call release
This clause applies when an active transmission control session exists.
When the off-network call is released the transmission control session is
terminated. The off-network transmission control session can also be
terminated when no media transmission or reception takes place during
transmission control session hold time, T230 (Inactivity). The termination of
the transmission control session as a result of the expiry of timer T230
(Inactivity) may terminate the call session.
### 7.2.3 Transmission participant state diagram -- basic operation
#### 7.2.3.1 General
The transmission participant shall behave according to the state diagram and
the transitions specified in this clause.
The received transmission messages and the RTP media packets are inputs to the
state machine according to their arrival order. They are not ignored unless
otherwise stated.
The MCVideo client also provides input to the state machine as request to
transmit video (click video transmission send button) or as end of video
transmission (click video transmission end button).
Figure 7.2.3.1-1 show the \'Transmission participant state diagram -- basic
operation\'.
Figure 7.2.3.1-1: \'Transmission participant state diagram -- basic
operation\'
State details are explained in the following clauses.
If an RTP media packet or a transmission control message arrives in a state
where there is no specific procedure specified for the RTP media packet or the
received transmission control message, the transmission participant shall
discard the transmission control message or the RTP media packet and shall
remain in the current state.
NOTE: A badly formatted RTP packet or transmission control message received in
any state is ignored by the transmission participant and does not cause any
change of the current state.
#### 7.2.3.2 State: \'Start-stop\'
##### 7.2.3.2.1 General
When a new instance of the state machine is created, before any transmission
control related input is applied, the state machine is in the \'Start-stop\'
state. Similarly when the call is released or the transmission control session
is terminated, the state machine shall return to the \'Start-stop\' state.
##### 7.2.3.2.2 MCVideo call established -- originating MCVideo user
When an MCVideo call is established with session announcement including an
explicit transmission request, the originating transmission participant:
1\. shall create an instance of a transmission participant state transition
diagram for basic operation state machine;
2\. shall send Transmission Granted message towards other transmission
participants. The Transmission Granted message:
a. shall include the granted priority in the Transmission priority field;
b. shall include the MCVideo user\'s own MCVideo ID in the User ID field; and
c. if the transmission request is a broadcast group call, system call,
emergency call or an imminent peril call, shall include a Transmission
Indicator field indicating the relevant call types; and
3\. shall enter \'O: transmission arbitration\' state.
##### 7.2.3.2.3 MCVideo group call established -- terminating MCVideo user
When an MCVideo call is established the terminating transmission participant:
1\. shall create an instance of a transmission participant state transition
diagram for basic operation state machine;
2\. shall start timer T230 (Inactivity); and
3\. shall enter \'O: silence\' state.
##### 7.2.3.2.4 MCVideo private call established -- terminating MCVideo user
When an MCVideo private call is established the terminating transmission
participant:
1\. shall create an instance of a transmission participant state transition
diagram for basic operation state machine;
2\. shall start timer T203(End of RTP media); and
3\. shall enter \'O: has no permission\' state.
##### 7.2.3.2.5 Send Transmission Request message (click video transmission
send button)
If the transmission participant receives an indication from the MCVideo user
to send media, the transmission participant:
1\. shall create an instance of a transmission participant state transition
diagram for basic operation state machine;
2\. shall send the Transmission Request message to other transmission
participants. The Transmission Request message:
a. if a different priority than the normal priority is required, shall include
the Transmission Priority field with the requested priority in the
\ value;
b. shall include the MCVideo ID of the MCVideo user in the \ value of
the User ID field; and
c. if the transmission request is a broadcast group call, system call,
emergency call or an imminent peril call, shall include a Transmission
Indicator field indicating the relevant call types;
3\. shall initialise the counter C201 (Transmission request) with value set to
1;
4\. shall start the timer T201 (Transmission request); and
5\. shall enter \'O: pending request\' state.
##### 7.2.3.2.6 Receive Transmission Arbitration Taken message (R:
Transmission Arbitration Taken)
When a Transmission Arbitration Taken message is received, the transmission
participant:
1\. shall create an instance of a transmission participant state transition
diagram for basic operation state machine;
2\. may provide a transmission taken notification to the MCVideo user;
3\. shall set the stored current transmission arbitrator to Granted Party\'s
Identity value of the Granted Party\'s Identity field in the Transmission
Arbitration Taken message;
4\. shall start timer T203 (End of RTP media) and store the current
transmission arbitrator in transmitter list; and
5\. shall enter \'O: has no permission\' state.
##### 7.2.3.2.7 Receive Transmission Granted message (R: Transmission Granted
to other)
When a Transmission Granted message is received, the transmission participant:
1\. shall create an instance of a transmission participant state transition
diagram for basic operation state machine;
2\. may provide a transmission taken notification to the MCVideo user;
3\. shall set the stored current transmission arbitrator to the identity of
sender of Transmission Granted message;
4\. shall start timer T203 (End of RTP media) and store the user to whom the
transmission was granted in the Transmission Granted message in transmitter
list; and
5\. shall enter \'O: has no permission\' state.
##### 7.2.3.2.8 Receive RTP media (R: RTP media)
Upon receiving RTP media packets, the transmission participant:
1\. shall create an instance of a transmission participant state transition
diagram for basic operation state machine;
2\. may provide a transmission taken notification to the MCVideo user;
3\. shall restart timer T203 (End of RTP media);
4\. shall request the MCVideo client to start rendering received RTP media
packets; and
5\. shall enter \'O: has no permission\' state.
##### 7.2.3.2.9 MCVideo broadcast call established -- terminating MCVideo user
When an MCVideo broadcast call is established the terminating transmission
participant:
1\. shall create an instance of a transmission participant state transition
diagram for basic operation state machine;
2\. shall start timer T203 (End of RTP media); and
3\. shall enter \'O: has no permission\' state.
NOTE: In MCVideo broadcast call, only originating MCVideo user is allowed to
request transmission and transmit media. A Transmission Request message is
locally denied to terminating MCVideo user, if requested.
#### 7.2.3.3 State: \'O: silence\'
##### 7.2.3.3.1 General
When in this state the MCVideo client for the session is unaware of any
MCVideo client acting as a transmission arbitrator, has not itself initiated a
transmission control request and is not currently receiving RTP media packets.
Timer T230 (Inactivity) is running in this state.
##### 7.2.3.3.2 Send Transmission Request message (click video transmission
send button)
If the transmission participant receives an indication from the MCVideo user
to send media, the transmission participant:
1\. shall send the Transmission Request message to other transmission
participants. The Transmission Request message:
a. if a priority different than the default transmission priority is required,
shall include the Transmission Priority field with the requested priority in
the \ element;
b. shall include the MCVideo ID of the MCVideo user in the \ value of
the User ID field; and
c. if the transmission request is a broadcast group call, system call,
emergency call or an imminent peril call, shall include a Transmission
Indicator field indicating the relevant call types;
2\. shall initialise the counter C201 (Transmission request) with value set to
1;
3\. shall stop timer T230 (Inactivity);
4\. shall start timer T201 (Transmission Request); and
5\. shall enter \'O: pending request\' state.
##### 7.2.3.3.3 Receive RTP media (R: RTP media)
Upon receiving RTP media packets, the transmission participant:
1\. may provide a transmission taken notification to the MCVideo user;
2\. shall stop timer T230 (Inactivity);
3\. shall start timer T203 (End of RTP media) for the SSRC of RTP media
packet;
4\. shall request the MCVideo client to start rendering received RTP media
packets; and
5\. shall enter \'O: has no permission\' state.
##### 7.2.3.3.4 Receive Transmission Granted message (R: Transmission Granted
to other)
When a Transmission Granted message is received and if the User ID in the
Transmission Granted message does not match its own User ID, the transmission
participant:
1\. may provide a transmission taken notification to the MCVideo user;
2\. if the Transmission Indicator field is included and the B-bit is set to
\'1\' (Broadcast group call), shall provide a notification to the user
indicating that this is a broadcast group call;
3\. shall stop timer T230 (Inactivity);
4\. shall start timer T203 (End of RTP media) and store the identity of the
user, to whom the transmission was granted in the Transmission Granted
message, in transmitter list; and
5\. shall enter \'O: has no permission\' state.
##### 7.2.3.3.5 Receive Transmission Request message (R: Transmission Request)
The transition is used in private call only. When a Transmission Request
message is received, the transmission participant:
1\. shall send a Transmission Granted message toward the other transmission
participant. The Transmission Granted message:
a. shall include the MCVideo ID of the Transmission Request message received
in User ID value of the User ID field;
b. shall include the SSRC of the Transmission Request message received in the
SSRC of transmission control server field;
c. shall include the max duration as configured in the MCVideo client in the
OffNetwork/MaxDuration parameter in the \ value of the Duration
field; and
d. shall include the priority of the Transmission Request message received in
the \ value of the Transmission Priority field;
2\. shall stop timer T230 (Inactivity);
3\. shall start timer T205 (Transmission Granted); and
4\. shall enter \'O: pending delegated\' state.
##### 7.2.3.3.6 Receive Transmission Arbitration Taken message (R:
Transmission Arbitration Taken)
When a Transmission Arbitration Taken message is received, the transmission
participant:
1\. may provide a transmission taken notification to the MCVideo user;
2\. shall set the stored the current transmission arbitrator to Granted
Party\'s Identity value of the Granted Party\'s Identity field in the
Transmission Arbitration Taken message;
3\. shall stop timer T230 (Inactivity);
4\. shall start timer T203 (End of RTP media) and store the identity of the
current transmission arbitrator in transmitter list; and
5\. shall enter \'O: has no permission\' state.
##### 7.2.3.3.7 Timer T230 (Inactivity) expired
Upon expiry of timer T230 (Inactivity), the transmission participant:
1\. shall indicate to the call control that timer T230 (inactivity) has
expired;
2\. shall terminate the instance of transmission participant state transition
diagram; and
3\. shall enter \'Start-stop\' state.
#### 7.2.3.4 State: \'O: has no permission\'
##### 7.2.3.4.1 General
In this state the MCVideo client does not have permission to send media.
##### 7.2.3.4.2 Sending Transmission Request message (click video transmission
send button)
If the transmission participant receives an indication from the MCVideo user
that the MCVideo user wants to send media, the transmission participant:
1\. shall send the Transmission Request message to other clients. The
Transmission Request message:
a. if a priority different than the default transmission priority is required,
shall include the Transmission Priority field with the requested priority in
the \ element;
b. shall include the MCVideo ID of the MCVideo user in the User ID field; and
c. if the transmission request is a broadcast group call, system call,
emergency call or an imminent peril call, shall include a Transmission
Indicator field indicating the relevant call types;
2\. shall initialise the counter C201 (Transmission request) with value set to
1;
3\. shall start timer T201 (Transmission Request); and
4\. shall enter \'O: pending request\' state.
##### 7.2.3.4.3 Receive Transmission Release message (R: Transmission Release)
When a Transmission Release message is received and if the User ID in the
Transmission Release message matches with the stored User ID in transmitter
list, the transmission participant:
1\. may provide transmission released notification to the MCVideo user;
2\. shall request the MCVideo client to stop rendering received RTP media
packets;
3\. shall stop timer T203 (End of RTP media) for User ID in the Transmission
Release message;
4\. shall delete the User ID from the transmitter list;
5\. if there is no transmitter in transmitter list, shall start timer T230
(Inactivity) and enter \'O: silence\' state; or
6\. if there are transmitter(s) in transmitter list, shall remain in \'O: has
no permission\' state.
##### 7.2.3.4.4 Receive Transmission Arbitration Release message (R:
Transmission Arbitration Release)
When a Transmission Arbitration Release message is received and if the User ID
in the Transmission Arbitration Release message matches with the stored
current transmission arbitrator, the transmission participant:
1\. may provide transmission arbitration idle notification to the MCVideo
user;
2\. shall stop timer T203 (End of RTP media) for User ID in the Transmission
Arbitration Release message;
3\. shall delete the User ID in transmitter list;
4\. shall clear the stored current transmission arbitrator;
5\. if there is no User ID in transmitter list, shall start timer T230
(Inactivity) and enter \'O: silence\' state; or
6\. if there are transmitter(s) in transmitter list, shall remain in \'O: has
no permission\' state.
##### 7.2.3.4.5 Timer T203 (End of RTP media) expired
On expiry of T203 (End of RTP media) timer, the transmission participant:
1\. may provide transmission lost notification to the MCVideo user for the
User ID whose associated timer T203 (End of RTP media) expired;
3\. shall delete the associated User ID from the transmitter list;
4\. if there is no User ID in transmitter list, shall start timer T230
(Inactivity) and enter \'O: silence\' state; or
5\. if there are transmitter(s) in transmitter list, shall remain in \'O: has
no permission\' state.
##### 7.2.3.4.6 Receive Transmission Granted message (R: Transmission Granted
to other)
When a Transmission Granted message is received and if the \ value in
the User ID field does not match its own MCVideo ID, the transmission
participant:
1\. shall start timer T203 (End of RTP media) for the User ID;
2\. shall store the user to whom the transmission was granted in the
Transmission Granted message in transmitter list;
3\. may provide a transmission taken notification to the MCVideo user;
4\. if the Transmission Indicator field is included with the B-bit set to
\'1\' (Broadcast group call), shall provide a notification to the user
indicating that this is a broadcast group call; and
5\. shall remain in the \'O: has no permission\' state.
##### 7.2.3.4.7 Receive RTP media (R: RTP media)
Upon receiving RTP media packets and with SSRC not associated with any
transmitter stored in the transmitter list, the transmission participant:
1\. shall request the MCVideo client to render the received RTP media packets;
2\. shall store the SSRC of RTP media packet in the transmitter list as
unknown user;
3\. shall start timer T203 (End of RTP media) associated with the SSRC; and
4\. shall remain in \'O: has no permission\' state.
Otherwise, if SSRC of transmission participant sending the media matches the
stored SSRC of a user in transmitter list, the transmission participant:
1\. shall request the MCVideo client to render the received RTP media packets;
2\. shall restart timer T203 (End of RTP media) associated with the User ID;
and
3\. shall remain in \'O: has no permission\' state.
##### 7.2.3.4.8 Receive Transmission Arbitration Taken message (R:
Transmission Arbitration Taken)
When a Transmission Arbitration Taken message is received and there is no
stored current transmission arbitrator, the transmission participant:
1\. if the \ value in the User ID field in Transmission Arbitration
Taken message doesn\'t match with User ID in transmitter list, shall start
timer T203 (End of RTP media);
2\. shall store the value of \ field of the Transmission Arbitration
Taken message as the current transmission arbitrator; and
3\. shall remain in \'O: has no permission\' state.
##### 7.2.3.4.9 Receive Transmission Revoked message (R: Transmission Revoked)
When a Transmission Revoked message is received and if the User ID in the
Transmission Revoked message matches with a stored User ID in transmitter
list, the transmission participant:
1\. may provide transmission revoked notification to the MCVideo user;
2\. shall request the MCVideo client to stop rendering received RTP media
packets from the revoked user;
3\. shall stop timer T203 (End of RTP media) for User ID in the Transmission
Revoked message;
4\. shall delete the User ID inform the transmitter list;
5\. if the User ID in the Transmission Revoked message matches with the stored
User ID of current transmission arbitrator, shall clear current transmission
arbitrator;
6\. if there is no transmitter in transmitter list, shall start timer T230
(Inactivity) and enter \'O: silence\' state; or
7\. if there are transmitter(s) in transmitter list, shall remain in \'O: has
no permission\' state.
#### 7.2.3.5 State: \'O: transmission arbitration\'
##### 7.2.3.5.1 General
In this state the MCVideo client is acting as a transmission control server
(transmission arbitrator) and has the permission to send media.
Timer T206 (Stop talking warning) and timer T207 (Stop Talking) are running in
this state.
##### 7.2.3.5.2 Send RTP Media packets (S: RTP Media)
Upon receiving encoded media from the user or if encoded media is already
buffered the transmission participant:
1\. shall start timer T206 (Stop talking warning);
2\. shall request the MCVideo client to start sending RTP media packets
towards other MCVideo clients; and
3\. shall remain in \'O: transmission arbitration\' state.
##### 7.2.3.5.3 Receive Transmission Release message (R: Transmission Release)
When a Transmission Release message is received and if the User ID in the
Transmission Release message matches with a stored User ID in transmitter
list, the transmission participant:
1\. may provide transmission release notification to the MCVideo user;
2\. shall request the MCVideo client to stop rendering received RTP media
packets from the user;
3\. shall stop timer T203 (End of RTP media) associated with the User ID in
the Transmission Release message;
4\. shall delete the User ID from the transmitter list; and
5\. shall remain in \'O: transmission arbitration\' state.
##### 7.2.3.5.4 Receive Transmission Request message (R: Transmission Request)
Upon receiving a Transmission Request message which is not pre-emptive and if
the number of current transmitter have reached maximum then, the transmission
participant:
1\. shall send the Transmission Rejected message. The Transmission Rejected
message:
a. shall include in the Reject Cause field the \ value cause #1
(Transmission limit reached);
b. may include in the Reject Cause field an additional text string explaining
the reason for rejecting the transmission request in the \
value; and
c. shall include the User ID field received in the Transmission Request
message; and
2\. shall remain in \'O: transmission arbitration\' state.
Upon receiving a Transmission Request message which is not pre-emptive and if
the number of current transmitter have not reached the maximum limit, the
transmission participant:
1\. shall send the Transmission Granted message toward the other transmission
participants. The Transmission Granted message:
a. shall include the MCVideo ID of the granted transmission participant in the
User ID field;
b. shall include the SSRC of the granted transmission participant in the SSRC
of the granted transmission participant field; and
c. if the transmission request is a broadcast group call, system call,
emergency call or an imminent peril call, shall include a Transmission
Indicator field indicating the relevant call types;
2\. shall start timer T205 (Transmission Granted) and shall initiate counter
C205 (Transmission Granted ) to 1;
3\. shall remain in \'O: transmission arbitration\' state.
##### 7.2.3.5.5 Send Transmission Arbitration Release message (click video
transmission end button with empty transmitter list)
Upon receiving an indication from the MCVideo user to release permission to
send RTP media and there is no transmitter in transmitter list, the
transmission participant:
1\. shall stop timer T206 (Stop talking warning), if running;
2\. shall stop timer T207 (Stop talking), if running;
3\. shall send a Transmission Arbitration Release message towards other
transmission participants. The Transmission Arbitration Release message:
a. shall include the MCVideo ID of the MCVideo user in the User ID field; and
b. if the session is not initiated as a broadcast group call with the B-bit
set to \'1\' (Broadcast group call), shall include a Transmission Indicator
field set to \'0\' (normal call);
4\. shall start timer T230 (Inactivity); and
5\. shall enter \'O: silence\' state.
##### 7.2.3.5.6 Send Transmission Arbitration Release message (click video
transmission end button with non-empty transmitter list)
When no more encoded media is received from the user and if at least one
transmitter is present in the transmitter list , the transmission participant:
1\. shall stop timer T206 (Stop talking warning), if running;
2\. shall stop timer T207 (Stop talking), if running;
3\. shall request the MCVideo client to stop sending RTP media packets towards
other MCVideo clients;
4\. shall send the Transmission Arbitration Release message toward the other
transmission participants. The Transmission Arbitration Release message:
a. shall include the MCVideo ID of the MCVideo user in the User ID field;
b. shall include the MCVideo ID of the first transmission participant in the
transmitter list in the Next Arbitrator field;
c. shall remove the first transmission participant from the transmitter list;
d for the remaining transmission participants in the transmitter list:
i. shall include the MCVideo ID of the transmission participant in the User ID
field; and
ii. shall include the SSRC of the transmission participant in the SSRC of
transmission participant field; and
5\. shall start timer T208 (Transmission Arbitration Release) and shall
initiate counter C208 (Transmission Arbitration Release) to 1; and
6\. shall enter the \'O: pending delegated\' state.
##### 7.2.3.5.7 Receive Transmission Request message with pre-emption
indication and revoking self (R: Transmission Request with pre-emption)
Upon receiving a Transmission Request message which is pre-emptive and the
transmission arbitrator revokes self, the transmission participant:
1\. shall stop timer T206 (Stop talking warning), if running;
2\. shall stop timer T207 (Stop talking), if running;
3\. shall request the MCVideo client to stop sending RTP media packets towards
other MCVideo clients;
4\. shall send the Transmission Revoked message toward the other transmission
participants. The Transmission Revoked message:
a. shall include the MCVideo ID of the MCVideo user in the User ID field;
b. shall include in the Reject Cause field the \ value cause #1
(Transmission limit reached);
c. may include in the Reject Cause field an additional text string explaining
the reason for rejecting the transmission request in the \
value; and
d. if the session is not initiated as a broadcast group call with the B-bit
set to \'1\' (Broadcast group call), shall include a Transmission Indicator
field set to \'0\' (normal call);
5\. shall send the Transmission Granted message toward the other transmission
participants. The Transmission Granted message:
a. shall include the MCVideo ID of the granted transmission participant in the
User ID field;
b. shall include the SSRC of the granted transmission participant in the SSRC
of the granted transmission participant field;
c. shall include the MCVideo ID of the granted transmission participant in the
Next Arbitrator field; and
d for the transmission participants in the transmitter list:
i. shall include the MCVideo ID of the transmission participant in the User ID
field; and
ii. shall include the SSRC of the transmission participant in the SSRC of
transmission participant field;
6\. shall start timer T205 (Transmission Granted) and shall initiate counter
C205 (Transmission Granted) to 1; and
7\. shall enter the \'O: pending delegated\' state.
##### 7.2.3.5.8 Receive Transmission Request message with pre-emption
indication and revoking a transmitter (R: Transmission Request with pre-
emption)
Upon receiving a Transmission Request message which is pre-emptive and the
transmission arbitrator determines to revoke a transmitter from the
transmitter list, the transmission participant:
1\. shall request the MCVideo client to stop rendering RTP media packets from
the MCVideo user to be revoked;
2\. shall send the Transmission Revoked message toward the other transmission
participants. The Transmission Revoked message:
a. shall include the MCVideo ID of the MCVideo user to be revoked in the User
ID field;
b. shall include in the Reject Cause field the \ value cause #1
(Transmission limit reached);
c. may include in the Reject Cause field an additional text string explaining
the reason for rejecting the transmission request in the \
value; and
d. if the session is not initiated as a broadcast group call with the B-bit
set to \'1\' (Broadcast group call), shall include a Transmission Indicator
field set to \'0\' (normal call);
3\. shall send the Transmission Granted message toward the other transmission
participants. The Transmission Granted message:
a. shall include the MCVideo ID of the granted transmission participant in the
User ID field; and
b. shall include the SSRC of the granted transmission participant in the SSRC
of the granted transmission participant field;
4\. shall start timer T205 (Transmission Granted) and shall initiate counter
C205 (Transmission Granted) to 1; and
5\. shall remain in the current state.
##### 7.2.3.5.9 Transmission time limit warning (Timer T206 expires)
When timer T206 (Stop talking warning) expires, the transmission participant:
1\. may notify the MCVideo user that the transmission time limit is about to
reach;
2\. shall start timer T207 (Stop talking); and
3\. shall remain in the current state.
##### 7.2.3.5.10 Transmission time limit reached with transmitter(s) in
transmitter list (Timer T207 expires with transmitter(s))
When the timer T207 (Stop talking) expires and if at least one transmitter
information is stored in transmitter list, the transmission participant:
1\. shall request the MCVideo client to stop sending RTP media packets towards
other MCVideo clients;
2\. shall send the Transmission Arbitration Release message toward the other
transmission participants. The Transmission Arbitration Release message:
a. shall include the MCVideo ID of the MCVideo user in the User ID field;
b. shall include the MCVideo ID of the first transmission participant in the
transmitter list in the Next Arbitrator field;
c. shall remove the first transmission participant from the transmitter list;
d for the remaining transmission participants in the transmitter list:
i. shall include the MCVideo ID of the transmission participant in the User ID
field; and
ii. shall include the SSRC of the transmission participant in the SSRC of
transmission participant field; and
3\. shall start timer T208 (Transmission Arbitration Release) and shall
initiate counter C208 (Transmission Arbitration Release) to 1; and
4\. shall enter the \'O: pending delegated\' state.
##### 7.2.3.5.11 Transmission time limit reached with no transmitter in
transmitter list (Timer T207 expires with no transmitter)
When the timer T207 (Stop talking) expires and if no transmitter information
is stored in transmitter list, the transmission participant:
1\. shall send a Transmission Arbitration Release message towards other
transmission participants. The Transmission Arbitration Release message:
a. shall include the MCVideo ID of the MCVideo user in the User ID field; and
b. if the session is not initiated as a broadcast group call with the B-bit
set to \'1\' (Broadcast group call), shall include a Transmission Indicator
field set to \'0\' (normal call);
2\. shall start timer T230 (Inactivity); and
3\. shall enter \'O: silence\' state.
##### 7.2.3.5.12 Receive RTP media (R: RTP media)
Upon receiving RTP media packets and with SSRC not associated with any
transmitter stored in the transmitter list, the transmission participant:
1\. shall request the MCVideo client to render the received RTP media packets;
2\. shall store the SSRC of RTP media packet in the transmitter list as
unknown user;
3\. shall start timer T203 (End of RTP media) associated with the SSRC; and
4\. shall remain in \'O: transmission arbitration\' state.
Otherwise, if SSRC of transmission participant sending the media matches the
stored SSRC of a user in transmitter list, the transmission participant:
1\. shall request the MCVideo client to render the received RTP media packets;
2\. shall restart timer T203 (End of RTP media) associated with the User ID;
and
3\. shall remain in \'O: transmission arbitration\' state.
##### 7.2.3.5.13 Timer T205 (Transmission Granted) expired (timer T205
expired)
On expiry of timer T205 (Transmission Granted) and counter C205 (Transmission
Granted) is less than the upper limit, the transmission participant:
1\. shall send the Transmission Granted message toward the other transmission
participants. The Transmission Granted message:
a. shall include the MCVideo ID of the granted transmission participant in the
User ID field;
b. shall include the SSRC of the granted transmission participant in the SSRC
of the granted transmission participant field; and
c. if the transmission request is a broadcast group call, system call,
emergency call or an imminent peril call, shall include a Transmission
Indicator field indicating the relevant call types;
2\. shall restart timer T205 (Transmission Granted) and shall increment
counter C205 (Transmission Granted) by 1; and
3\. shall remain in the current state.
##### 7.2.3.5.14 Timer T205 (Transmission Granted) expired N times (Timer T205
expired N times)
On the expiry of timer T205 (Transmission Granted) for the configured upper
limit of counter C205 (Transmission Granted), the transmission participant:
1\. shall reset the value of counter C205 (Transmission Granted) to 1;
2\. shall remain in the current state.
##### 7.2.3.5.15 Timer T203 (End of RTP media) expired
On expiry of T203 (End of RTP media) timer, the transmission participant:
1\. may provide transmission lost notification to the MCVideo user.
2\. shall request the MCVideo client to stop rendering received RTP media
packets;
3\. shall remove the User ID matching with the SSRC of RTP media packet from
transmitter list; and
4\. shall remain in the current state.
#### 7.2.3.6 State: \'O: has permission\'
##### 7.2.3.6.1 General
In this state the MCVideo client has the permission to send media.
Timer T206 (Stop talking warning) and timer T207 (Stop Talking) are running in
this state.
##### 7.2.3.6.2 Send RTP Media packets (S: RTP Media)
Upon receiving encoded media from the user or if encoded media is already
buffered the transmission participant:
1\. shall start timer T206 (Stop talking warning);
2\. shall request the MCVideo client to start sending RTP media packets
towards other MCVideo clients; and
3\. shall remain in \'O: has permission\' state.
##### 7.2.3.6.3 Receive Transmission Release message (R: Transmission Release)
When a Transmission Release message is received and if the User ID in the
Transmission Release message matches with a stored User ID in transmitter
list, the transmission participant:
1\. may provide transmission released notification to the MCVideo user;
2\. shall request the MCVideo client to stop rendering received RTP media
packets;
3\. shall stop timer T203 (End of RTP media) for User ID in the Transmission
Release message;
4\. shall delete the User ID from the transmitter list; and
5\. shall remain in \'O: has permission\' state.
##### 7.2.3.6.4 Send Transmission Release message (click video transmission
end button)
Upon receiving an indication from the MCVideo user to release permission to
send RTP media, the transmission participant:
1\. shall stop timer T206 (Stop talking warning), if running;
2\. shall stop timer T207 (Stop talking), if running;
3\. shall send a Transmission Release message towards other transmission
participants. The Transmission Release message:
a. shall include the MCVideo ID of the MCVideo user in the User ID field; and
b. if the session is not initiated as a broadcast group call with the B-bit
set to \'1\' (Broadcast group call), shall include a Transmission Indicator
field set to \'0\' (normal call); and
4\. shall enter \'O: has no permission\' state.
##### 7.2.3.6.5 Receive RTP media (R: RTP media)
Upon receiving RTP media packets and with SSRC not associated with any
transmitter stored in the transmitter list, the transmission participant:
1\. shall request the MCVideo client to render the received RTP media packets;
2\. shall store the SSRC of RTP media packet in the transmitter list as
unknown user;
3\. shall start timer T203 (End of RTP media) associated with the SSRC; and
4\. shall remain in \'O: has permission\' state.
Otherwise, if SSRC of transmission participant sending the media matches the
stored SSRC of a user in transmitter list, the transmission participant:
1\. shall request the MCVideo client to render the received RTP media packets;
2\. shall restart timer T203 (End of RTP media) associated with the User ID;
and
3\. shall remain in \'O: has permission\' state.
##### 7.2.3.6.6 Transmission time limit warning (Timer T206 expires)
When timer T206 (Stop talking warning) expires, the transmission participant:
1\. may notify the MCVideo user that the transmition time limit is about to
reach;
2\. shall start timer T207 (Stop talking); and
3\. shall remain in the current state.
##### 7.2.3.6.7 Transmission time limit (Timer T207 expires)
When the timer T207 (Stop talking) expires, the transmission participant:
1\. shall send a Transmission Release message towards other transmission
participants. The Transmission Release message:
a. shall include the MCVideo ID of the MCVideo user in the User ID field; and
b. if the session is not initiated as a broadcast group call with the B-bit
set to \'1\' (Broadcast group call), shall include a Transmission Indicator
field set to \'0\' (normal call); and
2\. shall enter \'O: has no permission\' state.
##### 7.2.3.6.8 Timer T203 (End of RTP media) expired
On expiry of T203 (End of RTP media) timer, the transmission participant:
1\. may provide transmission lost notification to the MCVideo user.
2\. shall request the MCVideo client to stop rendering received RTP media
packets;
3\. shall delete the User ID matching with the SSRC of RTP media packet in
transmitter list; and
4\. shall remain in the current state.
##### 7.2.3.6.9 Receive Transmission Granted message (R: Transmission Granted
to other)
When a Transmission Granted message is received and if the \ value in
the User ID field does not match its own MCVideo ID, the transmission
participant:
1\. shall start timer T203 (End of RTP media) for the User ID;
2\. shall store the user to whom the transmission was granted in the
Transmission Granted message in transmitter list;
3\. may provide a transmission taken notification to the MCVideo user;
4\. shall remain in the \'O: has permission\' state.
##### 7.2.3.6.10 Receive Transmission Arbitration Taken message (R:
Transmission Arbitration Taken)
When a Transmission Arbitration Taken message is received and there is no
stored current transmission arbitrator, the transmission participant:
1\. if the \ value in the User ID field in Transmission Arbitration
Taken message doesn\'t match with User ID in transmitter list, shall start
timer T203 (End of RTP media);
2\. shall store the value of \ field of the Transmission Arbitration
Taken message as the current transmission arbitrator; and
3\. shall remain in \'O: has permission\' state.
##### 7.2.3.6.11 Receive Transmission Arbitration Release message with next
arbitrator to me (R: Transmission Arbitration Release with next arbitrator to
me)
When a Transmission Arbitration Release message is received and if the User ID
in the Transmission Arbitration Release message matches with the stored
current transmission arbitrator and Next Arbitrator matches with the own
MCVideo User ID, the transmission participant:
1\. shall send the Transmission Arbitration Taken message toward the other
transmission participants. The Transmission Arbitration Taken message:
a. shall include the transmission participant\'s own SSRC in the SSRC field;
b. shall include the transmission participant\'s own MCVideo ID in the User ID
field; and
2\. shall enter \'O: transmission arbitration\' state.
##### 7.2.3.6.12 Receive Transmission Revoked message (R: Transmission
Revoked)
When a Transmission Revoked message is received and if the User ID in the
Transmission Revoked message matches with a stored User ID in transmitter
list, the transmission participant:
1\. may provide transmission revoked notification to the MCVideo user;
2\. shall request the MCVideo client to stop rendering received RTP media
packets;
3\. shall stop timer T203 (End of RTP media) for User ID in the Transmission
Revoked message;
4\. shall delete the User ID in transmitter list;
5\. if the User ID in the Transmission Revoked message matches with the stored
User ID of current transmission arbitrator, shall clear current transmission
arbitrator; and
6\. shall remain in \'O: has permission\' state.
##### 7.2.3.6.13 Receive Transmission Arbitration Release message with next
arbitrator to other (R: Transmission Arbitration Release with next arbitrator
to other)
When a Transmission Arbitration Release message is received and if the User ID
in the Transmission Arbitration Release message matches with the stored
current transmission arbitrator and Next Arbitrator does not match with own
MCVideo User ID, the transmission participant:
1\. shall update the identity of the transmission arbitrator to the identity
of the user indicated in the Next Arbitrator field of the Transmission
Arbitration release message
2\. shall remain in the current state.
#### 7.2.3.7 State: \'O: pending request\'
##### 7.2.3.7.1 General
In this state the MCVideo client is waiting for a response to a Transmission
request message.
In this state timer T201 (Transmission Request) is running.
To resolve race condition between multiple simultaneous transmission requests,
the MCVideo client resets the counter associated with timer T201, if another
transmission request with higher priority or higher SSRC, in case the priority
is same, is received.
##### 7.2.3.7.2 Receive RTP media (R: RTP media)
Upon receiving RTP media packets and with SSRC not associated with any
transmitter stored in the transmitter list, the transmission participant:
1\. shall request the MCVideo client to render the received RTP media packets;
2\. shall store the SSRC of RTP media packet in the transmitter list as
unknown user;
3\. shall start timer T203 (End of RTP media) associated with the SSRC; and
4\. shall remain in \'O: pending request\' state.
Otherwise, if SSRC of transmission participant sending the media matches the
stored SSRC of a user in transmitter list, the transmission participant:
1\. shall request the MCVideo client to render the received RTP media packets;
2\. shall restart timer T203 (End of RTP media) associated with the User ID;
and
3\. shall remain in \'O: pending request\' state.
##### 7.2.3.7.3 Receive Transmission Rejected message (R: Transmission
Rejected)
Upon receiving Transmission Rejected message, if the \ value in the
User ID field matches its own MCVideo ID and User ID of transmission
participant sending the Transmission Rejected message matches the stored User
ID of current transmission arbitrator, the transmission participant:
Editor\'s Note: How a new participant obtains the identity of the transmission
arbitrator is FFS.
1\. shall stop the timer T201 (Transmission Request);
2\. shall provide transmission deny notification to the user;
3\. may display the transmission deny reason to the user using information in
the Reject Cause field; and
4\. shall enter \'O: has no permission\' state.
Otherwise, if the \ value in the User ID field matches its own
MCVideo ID and there is no stored the current transmission arbitrator, the
transmission participant:
1\. shall stop the timer T201 (Transmission Request);
2\. shall set the stored User ID of the current transmission arbitrator to the
value in the User ID of transmission control server field as received in the
Transmission Rejected message;
3\. shall provide transmission deny notification to the user;
4\. may display the transmission deny reason to the user using information in
the Reject Cause field; and
5\. shall enter \'O: has no permission\' state.
##### 7.2.3.7.4 Send Transmission Release message (click video transmission
end button with no transmitter)
When an indication from the MCVideo user to release the pending request for
the transmission is received and if there is no transmitter in transmitter
list, the transmission participant:
1\. shall send a Transmission Release message towards other transmission
participants. The Transmission Release message:
a. shall include the MCVideo ID of the MCVideo user in the \ value of
the User ID field; and
2\. shall stop the timer T201 (Transmission Request);
3\. shall start the timer T230 (Inactivity) and enter \'O: silence\' state;
##### 7.2.3.7.5 Send Transmission Release message (click video transmission
end button with transmitter)
When an indication from the MCVideo user to release the pending request for
the transmission is received and if at least one transmitter information is
stored in transmitter list, the transmission participant:
1\. shall send a Transmission Release message towards other transmission
participants. The Transmission Release message:
a. shall include the MCVideo ID of the MCVideo user in the \ value of
the User ID field; and
b. if the session is not initiated as a broadcast group call with the B-bit
set to \'1\' (Broadcast group call), shall include a Transmission Indicator
field set to \'0\' (normal call);
2\. shall stop the timer T201 (Transmission Request); and
3\. shall enter \'O: has no permission\' state;
##### 7.2.3.7.6 Send Transmission Arbitration Taken message (Timer T201
expired N times)
When timer T201 (Transmission Request) expires and counter C201 (Transmission
Request) reaches its upper limit, the transmission participant:
1\. shall send the Transmission Arbitration Taken message toward the other
transmission participants. The Transmission Arbitration Taken message:
a. shall include the transmission participant\'s own SSRC in the SSRC field;
b. shall include the transmission participant\'s own MCVideo ID in the User ID
field; and
c. if the transmission request is a broadcast group call, system call,
emergency call or an imminent peril call, shall include a Transmission
Indicator field indicating the relevant call types; and
2\. shall enter \'O: transmission arbitration\' state.
##### 7.2.3.7.7 Receive Transmission Granted message (R: Transmission Granted
to me)
Upon receiving Transmission Granted message and if the \ value in the
User ID field matches its own MCVideo ID and User ID of transmission
participant sending the Transmission Granted message matches the stored User
ID of current transmission arbitrator, the transmission participant:
1\. shall stop timer T201 (Transmission Request);
2\. may provide a transmission granted notification to the MCVideo user; and
3\. shall enter \'O: has permission\' state.
Otherwise, if the \ value in the User ID field matches its own
MCVideo ID and there is no stored User ID of the current transmission
arbitrator, the transmission participant:
1\. shall set the stored User ID of the current transmission arbitrator to
User ID of transmission participant sending the Transmission Granted message;
2\. shall stop timer T201 (Transmission Request);
3\. may provide a transmission granted notification to the MCVideo user; and
4\. shall enter \'O: has permission\' state.
##### 7.2.3.7.8 Receive Transmission Granted message with next arbitrator (R:
Transmission Granted with next arbitrator to me)
Upon receiving Transmission Granted message and if the \ value in the
User ID field matches its own MCVideo ID and User ID of transmission
participant sending the Transmission Granted message matches the stored User
ID of current transmission arbitrator, the transmission participant:
1\. shall stop timer T201 (Transmission Request);
2\. clear the stored current transmission arbitrator;
3\. shall store the transmitter list of the Transmission Granted message;
4\. may provide a transmission granted notification to the MCVideo user; and
5\. shall enter \'O: has permission\' state.
##### 7.2.3.7.9 Receive Transmission Granted message (R: Transmission Granted
to other)
When a Transmission Granted message is received and if the \ value in
the User ID field does not match its own MCVideo ID, the transmission
participant:
1\. shall start timer T203 (End of RTP media) for the User ID;
2\. shall store the user to whom the transmission was granted in the
Transmission Granted message in transmitter list;
3\. may provide a transmission taken notification to the MCVideo user;
4\. if the Transmission Indicator field is included with the B-bit set to
\'1\' (Broadcast group call), shall provide a notification to the user
indicating that this is a broadcast group call; and
> 5\. shall remain in \'O: pending request\' state.
##### 7.2.3.7.10 Timer T201 (Transmission Request) expired (Timer T201
expired)
On expiry of timer T201 (Transmission Request) if the counter C201
(Transmission Request) has not reached its upper limit, the transmission
participant:
1\. shall send the Transmission Request message to other transmission
participants. The Transmission Request message:
a. if a priority different than the default transmission priority is required,
shall include the Transmission Priority field with the requested priority in
the \ element;
b. shall include the MCVideo ID of the own MCVideo user in the User ID field;
and
c. if the transmission request is a broadcast group call, system call,
emergency call or an imminent peril call, shall include a Transmission
Indicator field indicating the relevant call types;
2\. shall restart the timer T201 (Transmission Request) and increment counter
C201 (Transmission Request) by 1; and
> 3\. shall remain in the \'O: pending request\' state.
##### 7.2.3.7.11 Receive Transmission Request message (R: Transmission
request)
Upon receiving Transmission Request message, if the priority of received
request is higher than priority of the transmission participant or if the SSRC
of received request is higher, if the priority is same, the transmission
participant:
1\. shall reset the value of the counter C201 (Transmission Request) to 1;
2\. shall re-start timer T201 (Transmission Request); and
3\. shall remain in \'O: pending request\' state.
##### 7.2.3.7.12 Receive Transmission Arbitration Taken message (R:
Transmission Arbitration Taken)
When a Transmission Arbitration Taken message is received and there is no
stored current transmission arbitrator, the transmission participant:
1\. if the \ value in the User ID field in Transmission Arbitration
Taken message doesn\'t match with User ID in transmitter list, shall start
timer T203 (End of RTP media);
2\. shall store the value of \ field of the Transmission Arbitration
Taken message as the current transmission arbitrator; and
3\. shall remain in \'O: pending request\' state.
##### 7.2.3.7.13 Receive Transmission Release message (R: Transmission
Release)
When a Transmission Release message is received and if the User ID in the
Transmission Release message matches with a stored User ID in transmitter
list, the transmission participant:
1\. may provide transmission released notification to the MCVideo user;
2\. shall request the MCVideo client to stop rendering received RTP media
packets;
3\. shall stop timer T203 (End of RTP media) for User ID in the Transmission
Release message;
4\. shall delete the User ID in transmitter list; and
5\. shall remain in \'O: pending request\' state.
##### 7.2.3.7.14 Receive Transmission Revoked message (R: Transmission
Revoked)
When a Transmission Revoked message is received and if the User ID in the
Transmission Revoked message matches with a stored User ID in transmitter
list, the transmission participant:
1\. may provide transmission revoked notification to the MCVideo user;
2\. shall request the MCVideo client to stop rendering received RTP media
packets;
3\. shall stop timer T203 (End of RTP media) for User ID in the Transmission
Revoked message;
4\. shall delete the User ID in transmitter list;
5\. if the User ID in the Transmission Revoked message matches with the stored
User ID of current transmission arbitrator, shall clear current transmission
arbitrator; and
6\. shall remain in \'O: pending request\' state.
#### 7.2.3.8 State: \'O: pending delegated\'
##### 7.2.3.8.1 General
In this state the MCVideo client is waiting for another client to take over
the role of transmission controller.
The timer T205 (Transmission Granted) and timer T208 (Transmission Arbitration
Release) are running in this state.
##### 7.2.3.8.2 Receive RTP media (R: RTP Media)
Upon receiving RTP media packets and with SSRC not associated with any
transmitter stored in the transmitter list, the transmission participant:
1\. shall request the MCVideo client to render the received RTP media packets;
2\. shall store the SSRC of RTP media packet in the transmitter list as
unknown user;
3\. shall start timer T203 (End of RTP media) associated with the SSRC; and
4\. shall remain in \'O: pending delegated\' state.
Otherwise, if SSRC of transmission participant sending the media matches the
stored SSRC of a user in transmitter list, the transmission participant:
1\. shall request the MCVideo client to render the received RTP media packets;
2\. shall restart timer T203 (End of RTP media) associated with the User ID;
and
3\. shall remain in \'O: pending delegated\' state.
##### 7.2.3.8.3 Timer T205 (Transmission Granted) expired (timer T205 expired)
On expiry of timer T205 (Transmission Granted) and counter C205 (Transmission
Granted) is less than the upper limit, the transmission participant:
1\. shall send the Transmission Granted message toward the other transmission
participants. The Transmission Granted message:
a. shall include the MCVideo ID of the granted transmission participant in the
User ID field;
b. shall include the SSRC of the granted transmission participant in the SSRC
of the granted transmission participant field;
c. shall include the MCVideo ID of the granted transmission participant in the
Next Arbitrator field;
d for the remaining transmission participants in the transmitter list:
i. shall include the MCVideo ID of the transmission participant in the User ID
field;
ii. shall include the SSRC of the transmission participant in the SSRC of
transmission participant field; and
e. if the transmission request is a broadcast group call, system call,
emergency call or an imminent peril call, shall include a Transmission
Indicator field indicating the relevant call types;
2\. shall restart timer T205 (Transmission Granted) and shall increment
counter C205 (Transmission Granted) by 1; and
3\. shall remain in \'O: pending delegated\' state.
##### 7.2.3.8.4 Timer T205 (Transmission Granted) expired N times with
transmitter(s) in the transmitter list (Timer T205 expired N times and
transmitter in transmitter list)
On the expiry of timer T205 (Transmission Granted) for the configured upper
limit of counter C205 (Transmission Granted) and if there is transmitter(s) in
transmitter list, the transmission participant:
1\. shall reset the value of counter C205 (Transmission Granted) to 1;
2\. shall send the Transmission Arbitration Release message toward the other
transmission participants. The Transmission Arbitration Release message:
a. shall include the MCVideo ID of the MCVideo user in the User ID field ;
b. shall include the MCVideo ID of the first transmission participant in the
transmitter list in the Next Arbitrator field;
c. shall remove the first transmission participant from the transmitter list;
d for the remaining transmission participants in the transmitter list:
i. shall include the MCVideo ID of the transmission participant in the User ID
field; and
ii. shall include the SSRC of the transmission participant in the SSRC of
transmission participant field; and
e. if the transmission request is a broadcast group call, system call,
emergency call or an imminent peril call, shall include a Transmission
Indicator field indicating the relevant call types;
3\. shall start timer T208 (Transmission Arbitration Release) and shall
initiate counter C208 (Transmission Arbitration Release) to 1; and
4\. shall remain in \'O: pending delegated\' state.
##### 7.2.3.8.5 Timer T205 (Transmission Granted) expired N times with no
transmitter in the transmitter list (Timer T205 expired N times and no
transmitter in transmitter list)
On the expiry of timer T205 (Transmission Granted) for the configured upper
limit of counter C205 (Transmission Granted) and if at least one transmitter
in transmitter list is stored, the transmission participant:
1\. shall reset the value of counter C205 (Transmission Granted) to 1;
2\. shall start timer T230 (Inactivity); and
. shall enter \'O: silence\' state.
##### 7.2.3.8.6 Click Video transmission send button
If the transmission participant receives an indication from the MCVideo user
to send media, the transmission participant:
1\. may notify the MCVideo user about rejection; and,
2\. shall remain in \'O: pending delegated\' state.
##### 7.2.3.8.7 Receive Transmission Release message (R: Transmission Release)
Upon receiving a Transmission Release message, the transmission participant:
1\. shall remove the sender of the Transmission Release message from the
transmitter list, if the User ID in the transmission release message matches a
User ID in the transmitter list; and
2\. shall remain in \'O: pending delegated\' state.
##### 7.2.3.8.8 Receive Transmission Request message (R: Transmission Request)
When a Transmission Request message is received, the transmission participant:
1\. shall send the Transmission Rejected message toward the other transmission
participant. The Transmission Rejected message:
a. shall include in the Reject Cause field the \ value cause #1
(Transmission limit reached);
b. may include in the Reject Cause field an additional text string explaining
the reason for rejecting the transmission request in the \
value; and
c. shall include the User ID field received in the Transmission Request
message; and
2\. shall remain in \'O: pending delegated\' state.
##### 7.2.3.8.9 Receive Transmission Arbitration Taken message (R:
Transmission Arbitration Taken)
When a Transmission Arbitration Taken message is received and if the User ID
in the Transmission Arbitration Taken message matches with the stored User ID
of next transmission arbitrator, the transmission participant:
1\. shall set the stored current transmission arbitrator to the \
value in the User ID field in the Transmission Arbitration Taken message; and
2\. shall remain in \'O: pending delegated\' state.
##### 7.2.3.8.10 Timer T208 (Transmission Arbitration Release) expired (timer
T208 expired)
On expiry of timer T208 (Transmission Arbitration Release) and counter C208
(Transmission Arbitration Release) is less than the upper limit, the
transmission participant:
1\. shall send the Transmission Arbitration Release message toward the other
transmission participants. The Transmission Arbitration Release message:
a. shall include the MCVideo ID of the MCVideo user in the User ID field;
b. shall include the MCVideo ID of the first transmission participant in the
transmitter list in the Next Arbitrator field;
c for the remaining transmission participants in the transmitter list:
i. shall include the MCVideo ID of the transmission participant in the User ID
field; and
ii. shall include the SSRC of the transmission participant in the SSRC of
transmission participant field; and
d. if the transmission request is a broadcast group call, system call,
emergency call or an imminent peril call, shall include a Transmission
Indicator field indicating the relevant call types;
2\. shall restart timer T208 (Transmission Arbitration Release) and shall
increment counter C208 (Transmission Arbitration Release) by 1; and
3\. shall remain in \'O: pending delegated\' state.
##### 7.2.3.8.11 Timer T208 (Transmission Arbitration Release) expired N times
with transmitter(s) in the transmitter list (Timer T208 expired N times and
transmitter in transmitter list)
On the expiry of timer T208 (Transmission Arbitration Release) for the
configured upper limit of counter C208 (Transmission Arbitration Release) and
if there is transmitter(s) in transmitter list, the transmission participant:
1\. shall reset the value of counter C208 (Transmission Arbitration Release)
to 1;
2\. shall send the Transmission Arbitration Release message toward the other
transmission participants. The Transmission Arbitration Release message:
a. shall include the MCVideo ID of the MCVideo user in the User ID field;
b. shall include the MCVideo ID of the first transmission participant in the
transmitter list in the Next Arbitrator field;
c. shall remove the first transmission participant from the transmitter list;
d for the remaining transmission participants in the transmitter list:
i. shall include the MCVideo ID of the transmission participant in the User ID
field; and
ii. shall include the SSRC of the transmission participant in the SSRC of
transmission participant field; and
e. if the transmission request is a broadcast group call, system call,
emergency call or an imminent peril call, shall include a Transmission
Indicator field indicating the relevant call types;
3\. shall start timer T208 (Transmission Arbitration Release) and shall
initiate counter C208 (Transmission Arbitration Release) to 1; and
4\. shall remain in \'O: pending delegated\' state.
##### 7.2.3.8.12 Timer T208 (Transmission Arbitration Release) expired N times
with no transmitter in the transmitter list (Timer T208 expired N times and no
transmitter in transmitter list)
On the expiry of timer T208 (Transmission Arbitration Release) for the
configured upper limit of counter C208 (Transmission Arbitration Release) and
if at least one transmitter in transmitter list is stored, the transmission
participant:
1\. shall reset the value of counter C208 (Transmission Granted) to 1;
2\. shall start timer T230 (Inactivity); and
3\. shall enter \'O: silence\' state.
#### 7.2.3.9 In any state
##### 7.2.3.9.1 General
This clause describes the actions to be taken in all states defined for the
basic state diagram with the exception of the \'Start-stop\' state.
##### 7.2.3.9.2 Receive MCVideo call release (R: MCVideo call release)
Upon receiving an MCVideo call release request from the application and
signalling plane when the MCVideo call is going to be released, the
transmission participant:
1\. shall stop sending transmission control messages towards other
transmission participants;
2\. shall request the MCVideo client to stop sending and receiving RTP media
packets;
3\. shall release all resources including any running timers associated with
the MCVideo call;
4\. shall terminate the instance of transmission participant state transition
diagram; and
5\. shall enter \'Start-stop\' state.
# 8 Communication release media plane procedures
# 9 Coding
## 9.1 Introduction
### 9.1.1 General
The media plane control protocols specified in the present document are based
on the RTCP Application Packets (RTCP: APP), as defined in IETF RFC 3550 [3],
but the media plane control messages do not conform to the rules for compound
RTCP packets or RTCP packet transmission.
Each media plane control message is one RTCP: APP packet. These RTCP: APP
packets are not to be sent in compound RTCP packets, but more than one media
plane control message can be sent in a single IP packet.
The three first 32-bit words in any of the media plane control protocols
defined in the present document are structured commonly as described in clause
9.1.2.
Outside tables, binary values are expressed with a decimal value with single
quotation marks e.g. 00000000 is \'0\', 00000001 is \'1\', 00000010 is \'2\'
and so on.
### 9.1.2 RTCP: APP message format
The definition of the fields in the RTCP APP packet is found in IETF RFC 3550
[3].
Table 9.1.2-1 shows the RTCP APP packet format.
Table 9.1.2-1: RTCP: APP message format
0 1 2 3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|V=2\|P\| Subtype \| PT=APP=204 \| length \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| SSRC \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| name (ASCII) \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| application-dependent data \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Secure RTCP message part \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
**[P]{.underline}**
The padding bit P is set to \'0\'.
**[Subtype:]{.underline}**
Dependent upon the relevant set of media plane control messages, as identified
by the Name field, the possible Subtype values are defined in the following
tables:
\- Name field = \"MCV0\" (i.e. Transmission control messages sent by the
transmission control participant to the transmission control server): Table
9.2.2.1-1;
\- Name field = \"MCV1\" (i.e. Transmission control messages sent by the
transmission control server and transmission control participant): Table
9.2.2.1-2;
\- Name field = \"MCV2\" (i.e. Transmission control messages sent by
transmission control participant to the transmission control server and by the
transmission control server to the transmission control participant): Table
9.2.2.1-3; and
\- Name field= \"MCV3\" (i.e. MBMS subchannel control): Table 9.2.2.1-4
\- Name field= \"MCV4\" (i.e. Notification control): Table 9.4.2-1.
**[Length]{.underline}**
The length field in the RTCP header is the length of the packet in 32-bit
words, not counting the first 32-bit word in which the length field resides.
NOTE: The length field can indicate message size longer than specified in this
version of the protocol. This can be the case e.g. if message is of later
version of this protocol.
**[SSRC]{.underline}**
The content of this field is described for each transmission control message
separately.
**[Name]{.underline}**
The 4-byte ASCII string in the RTCP header is used to define the set of media
plane control messages to be unique with respect to other APP packets that the
media plane might receive.
The present document specified the use of the following names:
1\. For the transmission control protocol messages sent by the client to the
server specified in the present document the ASCII name string is: MCV0;
2\. For the transmission control protocol messages sent by the server to the
client specified in the present document the ASCII name string is: MCV1; and
3\. For the transmission control protocol messages sent by both the client to
the server and the server to the client specified in the present document the
ASCII name string is: MCV2; and
4\. For the MBMS subchannel control protocol specified in the present document
the ASCII name string is: MCV3.
**[Application-dependent data]{.underline}**
The application-dependent data contains zero or more application specific data
fields is specified in clause 9.1.3.
This part is encrypted if SRTCP is used.
**[Secure RTCP message part]{.underline}**
The content of the secure RTCP message part is in specified in clause x and in
IETF RFC 3711 [4].
### 9.1.3 Application specific data field
.Each application specific data field is composed of:
1\. a field ID which is one octet long;
2\. a length value which is:
\- one octet long, if the field ID is less than 192; and
\- two octets long, if the field ID is equal to or greater than 192;
3\. a field value. The length in octets of the field value is indicated in the
length value; and
4\. a padding. The padding is zero, one, two, or three octets long. The value
of the padding octet(s) is set to zero by sender and ignored by receiver.
An application specific data field has always a multiple of 4 octets.
Table 9.1.3-1 shows the application dependent data field structure when the
field ID is less than 192. Table 9.1.3-2 shows the application dependent data
field structure when the field ID is equal to or greater than 192.
Table 9.1.3.-1: Application specific data field structure when the field ID is
less than 192
0 1 2 3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Field ID \| Length value \| \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ +
: \ :
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
Table 9.1.3.-2: Application specific data field structure when the field ID is
equal to or greater than 192
0 1 2 3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Field ID \| Length value \| \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ +
: \ :
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
### 9.1.4 Handling of unknown messages and fields
When an RTCP APP message is received, the receiver shall:
1\. ignore the whole message, if the subtype is unknown;
2\. ignore the unspecified fields in the message (e.g. specified in future
version of the protocol); and
3\. ignore the syntactically incorrect optional fields.
## 9.2 Transmission control
### 9.2.1 Introduction
The transmission control messages are coded as described in clause 9.1.2 where
the transmission control message is part of the application-dependent data.
For the transmission control protocol the ASCII name string is: MCVx (Mission
Critical Video x) with x=0, 1 or 2 as specified in clause 9.1.2.
A list of transmission control messages can be found in clause 9.2.2.1.
The transmission control specific fields are specified in clause 9.2.3.
### 9.2.2 Transmission control messages
#### 9.2.2.1 General
The table 9.2.2.1-1 provides a list of transmission control messages sent by
the transmission participant.
Table 9.2.2.1-1: Transmission control specific messages sent by the
transmission participant
Message name Subtype Reference Direction
* * *
Transmission Request x0000 Clause 9.2.4 Client server Transmission Release
x0010 Clause 9.2.7 Client server Queue Position Request x0011 Clause 9.2.11
Client server Receive media request x0100 Clause 9.2.14 Client server
Transmission cancel request x0101 Clause 9.2.17 Client server Remote
Transmission request x0111 Clause 9.2.22 Client server Remote Transmission
cancel request x1000 Clause 9.2.24 Client server NOTE: The transmission
control server is the server and the transmission participant is the client.
The table 9.2.2.1-2 provides a list of transmission control messages sent by
the transmission control server.
Table 9.2.2.1-2: Transmission control specific messages sent by the
transmission control server
Message name Subtype Reference Direction
* * *
Transmission Granted x0000 Clause 9.2.5 Server client Transmission Rejected
x0001 Clause 9.2.6 Server client Transmission Arbitration Taken x0010 Clause
9.2.8 Server client Transmission Arbitration Release x0011 Clause 9.2.9 Server
client Transmission Revoked x0100 Clause 9.2.10 Server client Queue Position
Info x0101 Clause 9.2.12 Server client Media transmission notification x0110
Clause 9.2.13 Server client Receive media response x0111 Clause 9.2.15 Server
client Media reception notification x1000 Clause 9.2.16 Server client
Transmission cancel response x1001 Clause 9.2.18 Server client Transmission
cancel request notify x1010 Clause 9.2.19 Server client Remote Transmission
response x1011 Clause 9.2.23 Server client Remote Transmission cancel response
x1100 Clause 9.2.25 Server client Media reception override notification x1101
Clause 9.2.28 Server client Transmission end notify x1110 Clause 9.2.29 Server
client Transmission idle 01111 Clause 9.2.30 Server client NOTE: The
transmission control server is the server and the transmission participant is
the client.
The table 9.2.2.1-3 provides a list of transmission control messages sent by
both the transmission control server and transmission control participant.
Table 9.2.2.1-3: Transmission control specific messages sent by both the
transmission control server and transmission control participant
Message name Subtype Reference Direction
* * *
Transmission end request x0000 Clause 9.2.20 Client server and Server client
Transmission end response x0001 Clause 9.2.21 Client server and Server client
Media reception end request x0010 Clause 9.2.26 Client server and Server
client Media reception end response x0011 Clause 9.2.27 Client server and
Server client Transmission control ack x0100 Clause 9.2.31 Client server and
Server client NOTE: The transmission control server is the server and the
transmission participant is the client.
For some messages the first bit (marked as x in the subtype) can be used to
indicate if the sender wants to have an acknowledgment. The x is coded as
follows:
\'0\' Acknowledgment is not required
\'1\' Acknowledgment is required
NOTE: Whether a message needs to be acknowledged or not is described in clause
6.
If an acknowledgment is required the Transmission control ack message is used
to acknowledge the message.
### 9.2.3 Transmission control specific fields
#### 9.2.3.1 Introduction
This clause describes the transmission control specific data fields.
The transmission control messages can include transmission control specific
data fields contained in the application-dependent data of the transmission
control message. The transmission control specific data fields follow the
syntax specified in clause 9.1.3.
Table 9.2.3.1-1 lists the available transmission control specific data fields
including the assigned field ID.
Table 9.2.3.1-1: Transmission control specific data fields
Field name Field ID Reference
* * *
                                           Decimal    Binary
Transmission Priority 000 00000000 Clause 9.2.3.2 Duration 001 00000001 Clause
9.2.3.3 Reject Cause 002 00000010 Clause 9.2.3.4 Queue Info 003 00000011
Clause 9.2.3.5 Granted Party\'s Identity 004 00000100 Clause 9.2.3.6
Permission to Request the Transmission 005 00000101 Clause 9.2.3.7 User ID 006
00000110 Clause 9.2.3.8 Queue Size 007 00000111 Clause 9.2.3.15 Message
Sequence-Number 008 00001000 Clause 9.2.3.9 Queued User ID 009 00001001 Clause
9.2.3.14 Source 010 00001010 Clause 9.2.3.12 Track Info 011 00001011 Clause
8.2.3.13 Message Type 012 00001100 Clause 9.2.3.10 Transmission Indicator 013
00001101 Clause 9.2.3.11 SSRC 014 00001110 Clause 9.2.3.16 Result 015 00001111
Clause 9.2.3.17 Message Name 016 00010000 Clause 9.2.3.18 Overriding ID 017
00010001 Clause 9.2.3.8 Overridden ID 018 00010010 Clause 9.2.3.8 Reception
Priority 019 00010011 Clause 9.2.3.19 MCVideo Group Identity 020 00010100
Clause 9.2.3.20 Reception Mode 022 00010110 Clause 9.2.3.21
The following clauses describe the coding of each field.
#### 9.2.3.2 Transmission Priority field
The Transmission Priority field describes the level of priority requested in a
Transmission Request message or granted in a Transmission Granted message. The
max transmission priority that can be requested in a Transmission Request
message is negotiated between the MCVideo client and the controlling MCVideo
function using the \"mc_priority\" fmtp parameter as specified in clause 14.
Table 9.2.3.2-1 describes the coding of the Transmission Priority field.
Table 9.2.3.2-1: Transmission Priority field coding
0 1 2 3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|Transmission \|Transmission \|Transmission \|spare \|
\|Priority \|Priority \|Priority \| \|
\|field ID value \|Length value \|value \| \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
The \ value is a binary value and is set
according to table 9.2.3.1-1.
The \ value is a binary value and has the value
\'2\' indicating the total length in octets of the \
value item and the spare bits.
The \ value consists of 8 bit parameter giving the
transmission priority (\'0\' to \'255\') where \'0\' is the lowest priority
and \'255\' is the highest priority. If the Transmission Priority field is not
included in the message the default priority is used as the Transmission
Priority value. The value of the default priority is \'0\'. The default
priority is sometimes referred to as normal priority. Whether a transmission
priority is pre-emptive or not is determined:
1\. for on-network by the transmission control server as described in clause
x.y; and
2\. for off-network by the transmission arbitrator as described in clause y.z.
The spare bits are set to zero.
#### 9.2.3.3 Duration field
The Duration field describes the time in seconds for which the granted party
is allowed to transmit.
Table 9.2.3.3-1 describes the coding of the Duration field.
Table 9.2.3.3-1: Duration field coding
0 1 2 3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|Duration \|Duration \|Duration value \|
\|field ID value \|length value \| \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
The \ value is a binary value and is set according to table
9.2.3.1-1.
The \ value is a binary value and has the value \'2\'
indicating the total length in octets of the \ value item.
The \ value is a binary value in seconds.
#### 9.2.3.4 Reject Cause field
The Reject Cause field contains a \ value and can contain a
\ value. The content of the \ value is
transmission control message dependent and is described per individual
transmission control message carrying the Reject Cause field.
Table 9.2.3.4-1 describes the coding of the Reject Cause field.
Table 9.2.3.4-1: Reject Cause field coding
0 1 2 3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|Reject Cause \|Reject Cause \|Reject Cause \|
\|field ID \|length \| \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
: Reject Phrase :
: \|
\| (Padding) \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
The \ value is a binary value and is set according to
table 9.2.3.1-1.
The \ value is a binary value and indicates the total
length in octets of the \ value and the \ value
items excluding any padding octets. If the length field is set to \'2\', there
is no \ value in the Reject Cause field.
The \ value is a 16 bit binary value as defined in clause
9.2.6.2 for Transmission Rejected message and as defined in clause 9.2.10.2
for Transmission Revoked message.
The \ value is a text string encoded the text string in the
SDES item CNAME as specified in IETF RFC 3550 [3].
If the length of the \ value is not (2 + multiple of 4) bytes,
the Reject Cause field is padded to (2 + multiple of 4) bytes. The value of
the padding bytes is set to zero. The padding bytes are ignored by the
receiver.
#### 9.2.3.5 Queue Info field
The Queue Info field includes information about the position for one MCVideo
client in the transmission control queue and the priority of the transmission
request.
Table 9.2.3.5-1 describes the coding of the Queue Info field.
Table 9.2.3.5-1: Queue Info field coding
0 1 2 3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|Queue Info \|Queue Info \|Queue Position \|Queue Priority \|
\|field ID \|length \|Info \| Level \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
The \ value is a binary value and is set according to
table 9.2.3.1-1.
The \ value is a binary value and has the value \'2\'
indicating the total length in octets of the \ value and
the \ value items.
The \ value is a binary value. The \
value has the value \'254\' if the MCVideo client is not queued. The \ value has the max value (\'255\') if the MCVideo client is
queued but the MCVideo server is unable to determine the queue position or if
MCVideo server policy is not to release information of the queue position to
the MCVideo client.
The \ value is coded as the \
value in clause 9.2.3.2.
#### 9.2.3.6 Granted Party\'s Identity field
The Granted Party\'s Identity field identifies the MCVideo user that is
granted to send media.
Table 9.2.3.6-1 describes the coding of the Granted Party\'s Identity field.
Table 9.2.3.6-1: Granted Party\'s Identity field coding
0 1 2 3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|Granted Party\'s\|Granted Party\'s\| Granted Party\'s Identity \|
\|Identity field \|Identity length\| :
\|ID \| \| :
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ :
: :
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
The \ value is a binary value and is set
according to table 9.2.3.1-1.
The \ value is coded as the \ value in clause 9.2.3.8.
The \ value is coded as the \ value in
clause 9.2.3.8.
If the length of the \ value is not (2 + multiple of 4)
bytes, the Granted Party\'s Identity field shall be padded to (2 + multiple of
4) bytes. The value of the padding bytes is set to zero. The padding bytes are
ignored by the receiver.
#### 9.2.3.7 Permission to Request the Transmission field
The Permission to Request the Transmission field indicates whether receiving
parties are allowed to request the transmission or not.
Table 9.2.3.7-1 describes the coding of the Permission to Request the
Transmission field.
Table 9.2.3.7-1: Permission to Request the Transmission field coding
0 1 2 3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|Permission to \|Permission to \| Permission to Request \|
\|Request the \|Request the \| the Transmission value \|
\|Transmission field ID \|Transmission length \| \|
\| \|value \| \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
The \ value is a binary value
and is set according to table 9.2.3.1-1.
The \ value is a binary value
and has the value \'2\' indicating the total length in octets of the
\ value item.
The \ value is binary and coded as
follows:
0 The receiver is not permitted to request transmission.
1 The receiver is permitted to request transmission.
#### 9.2.3.8 User ID field
The User ID field contains the MCVideo ID of an MCVideo user.
Table 9.2.3.8-1 describes the coding of the User ID field.
Table 9.2.3.8-1: User ID field coding
0 1 2 3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|User ID \|User ID \| User ID \|
\|field ID \|length \| \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ :
: :
: \|
\| Padding \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
The \ value is a binary value and is set according to table
9.2.3.1-1.
The \ value is a binary value and includes the value
indicating the length in octets of the \ value item except padding.
The \ value is coded as described in table 9.2.3.8-2.
Table 9.2.3.8-2: ABNF syntax of string values of the \ value
user-id = URI
If the length of the \ value is not (2 + multiple of 4) bytes User ID
field shall be padded to (2 + multiple of 4) bytes. The value of the padding
bytes is to zero. The padding bytes are ignored by the receiver.
#### 9.2.3.9 Message Sequence Number field
The Message Sequence Number field is used to bind a number of Transmission
Arbitration Taken or bind a number of Transmission Idle messages together.
Table 9.2.3.9-1 describes the coding of the Message Sequence Number field.
Table 9.2.3.9-1: Message Sequence Number field coding
0 1 2 3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|Message \|Message \|Message Sequence Number value \|
\|Sequence Number\|Sequence Number\| \|
\|field ID value \|length value \| \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
The \ value is a binary value and is set
according to table 9.2.3.1-1.
The \ value is a binary value and has the
value \'2\' indicating the total length in octets of the \ value item.
The \ value is a binary value. The \ value can be between \'0\' and \'65535\'. When the \'65535\' value is
reached, the \ value starts from \'0\' again.
#### 9.2.3.10 Message Type field
The Message Type field contains the transmission control message type of the
message that is acknowledged.
Table 9.2.3.10-1 describes the coding of the Message Type field.
Table 9.2.3.10-1: Message Type field coding
0 1 2 3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|Message Type \|Message Type \|Message Type \|Spare \|
\|field ID value \|Length value \|value \| \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
The \ value is a binary value and is set according to
table 9.2.3.1-1.
The \ value is a binary value and has the value \'2\'.
The \ value is an 8 bit binary value containing the binary value
consisting of the 5 bit message subtype as coded in table 9.2.2.1-1, table
9.2.2.1-2 and table 9.2.2.1-3 (including the first bit (used by some
transmission control messages to indicate that a Transmission control Ack
message is requested) of the five bit subtype) preceeded by \"000\".
The spare bits are set to zero.
#### 9.2.3.11 Transmission Indicator field
The Transmission Indicator contains additional information about a received
transmission control message.
Table 9.2.3.11-1 describes the coding of the Transmission Indicator field.
Table 9.2.3.11-1: Transmission Indicator field coding
0 1 2 3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|Transmission \|Transmission \|Transmission Indicator value \|
\|Indicator \|Indicator \| \|
\|field ID value \|Length value \| \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
The \ value is a binary value and is set
according to table 9.2.3.1-1.
The \ value is a binary value and has the value
\'2\'.
The \ value is a 16 bit bit-map named as shown in
table 9.2.3.11-2:
Table 9.2.3.11-2: Transmission Indicator bit marking
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|A\|B\|C\|D\|E\|F\|G\|H\|I\|J\|K\|L\|M\|N\|O\|P\|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
When set to 1, the bit has the following meaning:
A = Normal call
B = Broadcast group call
C = System call
D = Emergency call
E = Imminent peril call
NOTE 1: The indicators C, D and E are only informative. There are no
procedures specified for the C, D and E indicators in this release of the
present document and the use of the indicators are implementation specific.
Bits F to P are reserved for future use and are set to 0.
There can be more than one bit set to 1 at the same time. The local policy in
the transmission control server decides which combinations are possible and
the priority of the indications.
#### 9.2.3.12 Source field
The Source field contains the source of the message.
Table 9.2.3.12-1 describes the coding of the Source field.
Table 9.2.3.12-1: Source field coding
0 1 2 3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|Source \|Source \| Source \|
\|field ID \|length \| \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
The \ value is a binary value and is set according to table
9.2.3.1-1.
The \ value is a binary value and has the value 2 indicating
the total length in octets of the \ value item.
The \ value is a 16 bit binary value where:
\'0\' the transmission participant is the source
\'1\' the participating MCVideo function is the source
\'2\' the controlling MCVideo function is the source
\'3\' the non-controlling MCVideo function is the source
All other values are reserved for future use.
#### 9.2.3.13 Track Info field
The Track Info field contains the path a transmission control message has been
routed along with the priority and the queueing capability of the MCVideo
client.
Table 9.2.3.13-1 describes the coding of the Track Info field.
Table 9.2.3.13-1: Track Info field coding
0 1 2 3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|Track Info \|Track Info \|Queueing \|Participant \|
\|field ID \|length \|Capability \|Type Length \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Participant Type \|
: :
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Transmission Participant Reference 1 \|
: \| :
\| Transmission Participant Reference n \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
The \ value is a binary value and is set according to
table 8.2.3.1-2.
The \ value is a binary value and has a value indicating
the total length in octets of the \ value and one or more
\ value items.
The \ value is an 8 bit binary value where:
\'0\' the transmission participant in the MCVideo client does not support
queueing
\'1\' the transmission participant in the MCVideo client supports queueing
All other values are reserved for future use.
The \ value is 8 bit binary value set to the length
of the \ value.
The \ value is string coded as specified in table
9.2.3.13-1:
Table 9.2.3.13-2: ABNF syntax of values of the \ value
participant-type = 1*( %x20-7E / UTF8-NONASCII )
If the length of the \ value is not a multiple of 4 bytes,
the \ value is padded to a multiple of 4 bytes. The value of
the padding bytes is set to zero. The padding bytes are ignored by the
receiver.
NOTE 1: The content of the \ value is MCVideo service
provider specific and out of scope of the present document.
The \ value is a 32 bit binary value
containing a reference to the transmission participant in the non-controlling
MCVideo function of an MCVideo group.
NOTE 2: The reference to the transmission participant is a value only
understandable by the transmission control server interface in the non-
controlling MCVideo function of an MCVideo group.
#### 9.2.3.14 Queued User ID field
The Queued User ID field includes information about the identity of a queued
MCVideo user.
Table 9.2.3.14-1 describes the coding of the Queued User ID field.
Table 9.2.3.14-1: Queued User ID field coding
0 1 2 3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|Queued User ID \|Queued User ID\| Queued User ID \|
\|field ID \|length \| \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ :
: :
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
The \ value is a binary value and is set according to
table 9.2.3.1-1.
The \ value is coded as the \ value in
clause 9.2.3.8.
The \ value is coded as the \ value in clause
9.2.3.8.
If the length of the \ value is not (2 + multiple of 4) bytes,
the Queued User ID field shall be padded to (2 + multiple of 4) bytes. The
value of the padding bytes is set to zero. The padding bytes are ignored by
the receiver.
#### 9.2.3.15 Queue Size field
The Queue Size field contains the numbers of queued MCVideo clients in an
MCVideo call.
Table 9.2.3.15-1 describes the coding of the Queue size field.
Table 9.2.3.15-1: Queue Size field coding
0 1 2 3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|Queue Size \|Queue Size \|Queue Size \|
\|field ID \|length \| \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
The \ value is a binary value and is set according to
table 9.2.3.1-1.
The \ value is a binary value and has the value \'2\'
indicating the total length in octets of the \ value item.
The \ value is a 16 bit binary value.
#### 9.2.3.16 SSRC field
The content of the SSRC field is coded as specified in IETF RFC 3550 [3]. An
SSRC field can also have a Field ID and a length value. This clause specifies
an SSRC field including a Field ID and a length value.
Table 9.2.3.16-1: SSRC field coding
0 1 2 3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|SSRC \|SSRC \|SSRC \|
\|field ID \|length \| \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| SSRC \|Spare \|
\| \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
The \ value is a binary value and is set according to table
9.2.3.1-1.
The \ value is a binary value and has the value \'6\'.
The \ value is coded as the SSRC specified in IETF RFC 3550 [3].
The spare bits are set to zero.
#### 9.2.3.17 Result
The Result field conveys the result of the operation (e.g. success, failure).
Table 9.2.3.17-1 describes the coding of the Result field.
Table 9.2.3.17-1: Result field coding
0 1 2 3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|Result \|Result \|Result \|
\|field ID value \|Length value \|value \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
The \ value is a binary value and is set according to table
9.2.3.1-1.
The \ value is a binary value and has the value \'2\'
indicating the total length in octets of the \ value item and the
spare bits.
The \ value is binary and is coded as follows:
0 The receiver is not permitted (rejected) to receive the media transmission.
1 The receiver is permitted (granted) to receive the media transmission.
#### 9.2.3.18 Message Name field
The Message Name field contains the transmission control message name of the
message that is acknowledged.
Table 9.2.3.18-1 describes the coding of the Message Name field.
Table 9.2.3.18-1: Message Name field coding
0 1 2 3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|Message Name \|Message Name \|Message Name \|
\|field ID value \|Length value \|value \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Message Name value \| Spare \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
The \ value is a binary value and is set according to
table 9.2.3.1-1.
The \ value is a binary value and has the value \'6\'.
The \ value is as coded as the ascii name field in table
9.1.2-1.
The spare bits are set to zero.
#### 9.2.3.19 Reception Priority field
The Reception Priority field describes the level of reception priority
requested in a Reception Request message or granted in a Reception Granted
message. The max reception priority that can be requested in a Reception
Request message is negotiated between the transmission control participant and
the transmission control server as specified in clause 14.
Table 9.2.3.19-1 describes the coding of the Reception Priority field.
Table 9.2.3.19-1: Reception Priority field coding
0 1 2 3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|Reception \|Reception \|Reception \|spare \|
\|Priority \|Priority \|Priority \| \|
\|field ID value \|Length value \|value \| \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
The \ value is a binary value and is set
according to table 9.2.3.1-1.
The \ value is a binary value and has the value
\'2\' indicating the total length in octets of the \
value item and the spare bits.
The \ value consists of 8 bit parameter giving the
reception priority (\'0\' to \'255\') where \'0\' is the lowest reception
priority and \'255\' is the highest reception priority. If the Reception
Priority field is not included in the message the default reception priority
is used as the Reception Priority value. The value of the default reception
priority is \'0\'. The default reception priority is sometimes referred to as
normal reception priority.
The spare bits are set to zero.
#### 9.2.3.20 MCVideo Group Identity field
The MCVideo Group Identity field contains a URI identifying the group that an
MCVideo client is invited to.
Table 9.2.3.20-1 describes the coding of the MCVideo Group Identity field.
Table 9.2.3.20-1: MCVideo Group Identity field coding
0 1 2 3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|MCVideo Group \|MCVideo Group \|MCVideo Group Identity \|
\|identity field \|identity field \| \|
\|ID \|length \| \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ :
: (Padding) :
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
The \ value is a binary value and shall be
set according to table 9.2.3.1-1.
The \ value is a binary value indicating the
length in octets of the \ value item.
\ value contains the MCVideo group identity or the
temporary MCVideo group identity as defined in 3GPP TS 24.281 [2]. The
\ value shall be coded as specified in the table
9.2.3.20-2.
Table 9.2.3.20-2: ABNF syntax of string values of the \ value
mcvideo-group-identity = URI
If the length of the \ value is not (2 + multiple of
4) bytes, the \ value shall be padded to (2 + multiple
of 4) bytes. The value of the padding bytes should be set to zero. The padding
bytes shall be ignored.
#### 9.2.3.21 Reception Mode Field
Reception Mode indicates whether the receiving party is granted permission to
automatically receive RTP media packets from another transmission participant
or not.
Table 9.2.3.21-1 describes the coding of the Permission to Request the
Transmission field.
Table 9.2.3.21-1: Reception Mode field coding
0 1 2 3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|Reception \|Reception \|Reception Mode value \|
\|Mode \|Mode \| \|
\|field ID value \|Length value \| \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
The \ value is a binary value and is set according to
table 9.2.3.1-1.
The \ value is a binary value and has the value \'2\'
indicating the total length in octets of the \ value item.
The \ value is binary and coded as follows:
0 The receiver is granted permission to automatically receive media.
1 The receiver is not granted permission to automatically receive media.
### 9.2.4 Transmission Request message
The Transmission Request message is a request from a transmission participant
to get permission to send media.
Table 9.2.4-1 shows the content of the Transmission Request message.
Table 9.2.4-1: Transmission Request message
0 1 2 3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|V=2\|P\| Subtype \| PT=APP=204 \| length \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| SSRC of participant sending the Transmission Request message \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| name=MCV0 \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Transmission Priority field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
: User ID field :
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Transmission Indicator field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
With the exception of the three first 32-bit words the order of the fields are
irrelevant.
**[Subtype:]{.underline}**
The subtype is coded according to table 9.2.2.1-1.
**[Length:]{.underline}**
The length is coded as specified in to clause 9.1.2.
**[SSRC:]{.underline}**
The SSRC field carries the SSRC of the transmission participant sending the
Transmission Request message.
The content of the SSRC field is coded as specified in IETF RFC 3550 [3].
**[Transmission priority:]{.underline}**
The Transmission Priority field is coded as described in clause 9.2.3.2.
**[User ID:]{.underline}**
The User ID field is used in off-network only and is coded as described in
clause 9.2.3.8.
**[Transmission Indicator:]{.underline}**
The Transmission Indicator field is coded as described in clause 9.2.3.11.
### 9.2.5 Transmission Granted message
The Transmission Granted message is sent by the transmission control server to
inform the requesting transmission participant that it has been granted the
permission to send media.
Table 9.2.5-1 shows the content of the Transmission Granted message.
Table 9.2.5-1: Transmission Granted message
0 1 2 3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|V=2\|P\| Subtype \| PT=APP=204 \| length \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| SSRC of transmission control server \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| name=MCV1 \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Duration field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| SSRC of granted transmission participant field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Transmission Priority field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| User ID field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Queue Size field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| SSRC of queued transmission participant field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Queued User ID field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Queue Info field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Transmission Indicator field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
With the exception of the three first 32-bit words the order of the fields are
irrelevant. However, any set of Queue size field, SSRC of queued transmission
participant field, Queued User ID field and the Queue Info field shall be kept
together.
**[Subtype:]{.underline}**
The subtype is coded according to table 9.2.2.1-2.
**[Length:]{.underline}**
The length is coded as specified in to clause 9.1.2.
**[SSRC:]{.underline}**
The SSRC field shall carries the SSRC of the transmission control server.
The content of the SSRC field is coded as specified in IETF RFC 3550 [3].
**[Duration:]{.underline}**
The Duration field is coded as specified in clause 9.2.3.3.
**[SSRC of granted transmission participant:]{.underline}**
The content of the SSRC of granted transmission participant is coded as the
SSRC specified in IETF RFC 3550 [3].
**[Transmission Priority:]{.underline}**
The Transmission Priority field contains the granted transmission priority and
is coded as specified in clause 9.2.3.2.
**[User ID:]{.underline}**
The User ID field is used in off-network only. The User ID field shall carries
the MCVideo ID of the transmission participant granted the transmission. The
User ID field is coded as described in clause 9.2.3.8.
**[Queue Size:]{.underline}**
The Queue Size field is only applicable in off-network and contains the
numbers of queued MCVideo clients in the MCVideo call.
The Queue Size field is coded as specified in clause 9.2.3.15.
For each waiting transmission participant the following set of fields are
included:
1\. the SSRC of queued transmission participant;
2\. the Queued User ID field; and
3\. the Queue info field.
**[SSRC of queued transmission participant:]{.underline}**
The SSRC of queued transmission participant is only applicable in off-network
and carries the SSRC of the transmission participant in the queue.
The content of the SSRC of queued transmission participant is coded as the
SSRC specified in IETF RFC 3550 [3].
**[Queued User ID:]{.underline}**
The Queued User ID field is only applicable in off-network and contains the
MCVideo ID of the transmission participant in the queue.
The Queued User ID field is coded as specified in clause 9.2.3.14.
**[Queue Info:]{.underline}**
The Queue Info field is only applicable in off-network and defines the queue
position and granted transmission priority in the queue.
The Queue Info field is coded as specified in clause 9.2.3.5.
**[Transmission Indicator:]{.underline}**
The Transmission Indicator field is coded as described in clause 9.2.3.11.
### 9.2.6 Transmission Rejected message
#### 9.2.6.1 General
The Transmission Rejected message is sent as an action from the transmission
control server to the requesting transmission participant to inform that the
transmission request was rejected.
Table 9.2.6.1-1 shows the content of the Transmission Rejected message.
Table 9.2.6.1-1: Transmission Rejected message
0 1 2 3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|V=2\|P\| Subtype \| PT=APP=204 \| length \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| SSRC of transmission control server \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| name=MCV1 \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Reject Cause field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| User ID field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Transmission Indicator field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
With the exception of the three first 32-bit words the order of the fields are
irrelevant.
**[Subtype:]{.underline}**
The subtype is coded according to table 9.2.2.1-2.
Length:
The length is coded as specified in to clause 9.1.2.
**[SSRC:]{.underline}**
The SSRC field carries the SSRC of the transmission control server.
The content of the SSRC field is coded as specified in IETF RFC 3550 [3].
**[Reject Cause:]{.underline}**
The Reject Cause field includes the reason for the rejecting the transmission
request and can be followed by a text-string explaining why the transmission
request was rejected. Therefore the length of the packet will vary depending
on the size of the application dependent field.
The Reject Cause field contains:
1\. a \ value; and
2\. a \ value.
Available \ values are listed in clause 9.2.6.2. The Reject
Cause field is coded as described in clause 9.2.3.4.
**[User ID:]{.underline}**
The User ID field is used in off-network only. The User ID carries the MCVideo
ID of the requesting transmission participant to which the Transmission
Rejected message is sent.
The User ID field is coded as specified in clause 9.2.3.8.
**[Transmission Indicator:]{.underline}**
The Transmission Indicator field is coded as described in clause 9.2.3.11.
#### 9.2.6.2 Rejection cause codes and rejection cause phrase
Cause #1 - Transmission limit reached
The \ value set to \'1\' indicates that the number of
transmitters have reached maximum.
Cause #2 - Internal transmission control server error
The \ value set to \'2\' indicates that the transmission control
server cannot grant the transmission request due to an internal error.
Cause #3 - Only one participant
The \ value set to \'3\' indicates that the transmission control
server cannot grant the transmission request, because the requesting party is
the only participant in the MCVideo session.
Cause #4 - Retry-after timer has not expired
The \ value set to \'4\' indicates that the transmission control
server cannot grant the transmission request, because timer T9 (Retry-after)
has not expired after permission to send media has been revoked.
Cause #5 - Receive only
The \ value set to \'5\' indicates that the transmission control
server cannot grant the transmission request, because the requesting party
only has receive privilege.
Cause #6 - No resources available
The \ value set to \'6\' indicates that the transmission control
server cannot grant the transmission request due to congestion.
Cause #255 - Other reason
The \ value set to \'255\' indicates that the transmission
control server does not grant the transmission request due to the transmission
control server local policy.
### 9.2.7 Transmission Release message
The Transmission Release message is sent as an action from the transmission
participant to the transmission control server to inform that the transmission
can be released.
The Transmission Release message can also be sent if the transmission
participant has a request in the transmission request queue. In this case, the
Transmission Release message is sent to cancel the transmission request in the
queue.
Table 9.2.7-1 shows the content of the Transmission Release message.
Table 9.2.7-1: Transmission Release message
0 1 2 3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|V=2\|P\| Subtype \| PT=APP=204 \| length \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| SSRC of participant with permission to send media \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| name=MCV0 \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| User ID field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Transmission Indicator field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
With the exception of the three first 32-bit words the order of the fields are
irrelevant.
**[Subtype:]{.underline}**
The subtype is coded according to table 9.2.2.1-1.
**[Length:]{.underline}**
The length is coded as specified in to clause 9.1.2.
**[SSRC:]{.underline}**
The SSRC field carries the SSRC of the transmission participant with
permission to send media.
The content of the SSRC field is coded as specified in IETF RFC 3550 [3].
**[User ID:]{.underline}**
The User ID field is used in off-network only. The User ID field carries the
MCVideo ID of the transmission participant sending the Transmission Release
message.
The User ID field is coded as specified in clause 9.2.3.8.
**[Transmission Indicator:]{.underline}**
The Transmission Indicator field is coded as described in clause 9.2.3.11.
### 9.2.8 Transmission Arbitration Taken message
The Transmission Arbitration Taken message is sent as an action from the
transmission control server to inform non-requesting transmission
participant(s) that someone has been granted permission to send media.
In case of off-network, the transmission arbitrator acts as the transmission
control server.
Table 9.2.8-1 shows the content of the Transmission Arbitration Taken message.
Table 9.2.8-1: Transmission Arbitration Taken message
0 1 2 3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|V=2\|P\| Subtype \| PT=APP=204 \| length \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| SSRC of transmission control server \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| name=MCV1 \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Granted Party\'s Identity field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Permission to Request the Transmission field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| User ID field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Message Sequence Number field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Transmission Indicator field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| SSRC of granted transmission participant field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
With the exception of the three first 32-bit words the order of the fields are
irrelevant.
**[Subtype:]{.underline}**
The subtype is coded according to table 9.2.2.1-2.
**[Length:]{.underline}**
The length is coded as specified in to clause 9.1.2.
**[SSRC:]{.underline}**
The SSRC field carries the SSRC of the transmission control server.
The content of the SSRC field is coded as specified in IETF RFC 3550 [3].
**[Granted Party\'s Identity:]{.underline}**
The Granted Party\'s Identity field is coded as specified in clause 9.2.3.6.
**[Permission to request the transmission:]{.underline}**
The Permission to Request the Transmission field is coded as specified in
clause 9.2.3.7.
**[User ID:]{.underline}**
The User ID field is used in off-network only. The User ID field carries the
MCVideo user ID of the transmission participant sending the Transmission
Arbitration Taken message.
The User ID field is coded as specified in clause 9.2.3.8.
**[Message Sequence Number:]{.underline}**
The Message Sequence Number field is coded as specified in to clause 9.2.3.9.
**[Transmission Indicator:]{.underline}**
The Transmission Indicator field is coded as described in clause 9.2.3.11.
**[SSRC of granted transmission participant:]{.underline}**
The content of the SSRC of granted transmission participant is coded as the
SSRC specified in IETF RFC 3550 [3].
### 9.2.9 Transmission Arbitration Released message
The Transmission Arbitration Released message is sent as an action from the
transmission control server to inform non-requesting transmission
participant(s) that the transmission control server has released the role of
transmission arbitration.
In case of off-network, the transmission arbitrator acts as the transmission
control server.
The Transmission Arbitration Released message is used in the off-network mode
Table 9.2.9-1 shows the content of the Transmission Arbitration Released
message.
Table 9.2.9-1: Transmission Arbitration Released message
0 1 2 3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|V=2\|P\| Subtype \| PT=APP=204 \| length \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| SSRC of transmission control server \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| name=MCV1 \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Granted Party\'s Identity field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| User ID field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Message Sequence Number field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Transmission Indicator field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| SSRC of granted transmission participant field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
With the exception of the three first 32-bit words the order of the fields are
irrelevant.
**[Subtype:]{.underline}**
The subtype is coded according to table 9.2.2.1-2.
**[Length:]{.underline}**
The length is coded as specified in to clause 9.1.2.
**[SSRC:]{.underline}**
The SSRC field carries the SSRC of the transmission control server.
The content of the SSRC field is coded as specified in IETF RFC 3550 [3].
**[Granted Party\'s Identity:]{.underline}**
The Granted Party\'s Identity field is coded as specified in clause 9.2.3.6.
**[Permission to request the transmission:]{.underline}**
The Permission to Request the Transmission field is coded as specified in
clause 9.2.3.7.
**[User ID:]{.underline}**
The User ID field is used in off-network only. The User ID field carries the
MCVideo user ID of the transmission participant sending the Transmission
Arbitration Released message.
The User ID field is coded as specified in clause 9.2.3.8.
**[Message Sequence Number:]{.underline}**
The Message Sequence Number field is coded as specified in to clause 9.2.3.9.
**[Transmission Indicator:]{.underline}**
The Transmission Indicator field is coded as described in clause 9.2.3.11.
**[SSRC of granted transmission participant:]{.underline}**
The content of the SSRC of granted transmission participant is coded as the
SSRC specified in IETF RFC 3550 [3].
### 9.2.10 Transmission Revoked message
#### 9.2.10.1 General
The Transmission Revoked message is sent from the transmission control server
to the transmission participant with the permission to send media to inform
that the permission to send media is revoked.
The Transmission Revoked message is only used over the unicast bearer.
Table 9.2.10.1-1 shows the content of the Transmission Revoked message.
Table 9.2.10.1-1: Transmission Revoked message
0 1 2 3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|V=2\|P\| Subtype \| PT=APP=204 \| length \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| SSRC of transmission control server \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| name=MCV1 \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Reject Cause value \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Transmission Indicator field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
With the exception of the three first 32-bit words the order of the fields are
irrelevant.
**[Subtype:]{.underline}**
The subtype is coded according to table 9.2.2.1-2.
**[Length:]{.underline}**
The length is coded as specified in to clause 9.1.2.
**[SSRC:]{.underline}**
The SSRC field carries the SSRC of the transmission control server.
The content of the SSRC field is coded as specified in IETF RFC 3550 [3].
**[Reject Cause:]{.underline}**
The Reject Cause field for the Transmission Revoked message includes \ cause value in the Reject Cause field explaining why the transmission
control server wants the transmission participant to stop sending media and
can be followed by additional information. Therefore the length of the packet
can vary depending on the value of the rejection cause.
The coding of the \ value is specified in clause 9.2.3.4.
**[Transmission Indicator:]{.underline}**
The Transmission Indicator field is coded as described in clause 9.2.3.11.
#### 9.2.10.2 Transmission revoked cause codes and revoked cause phrases
Cause #1 -- Only one MCVideo client
The \ value set to \'1\' indicates that the MCVideo client is
the only MCVideo client in the MCVideo session or the only participant
connected to a transmission control server. No additional information
included.
Cause#2 -- Media burst too long
The \ value set to \'2\' indicates that the MCVideo User has
transmitted too long (e.g., the stop-transmission timer has expired). No
additional information included.
Cause#3 - No permission to send a Media Burst
The \ value set to \'3\' indicates that the MCVideo client does
not have permission to send media. No additional information is included.
Cause#4 - Media Burst pre-empted
The \ value set to \'4\' indicates that the MCVideo client \'s
permission to send a media is being pre-empted. No additional information is
included.
Cause#5 - Terminate the RTP stream
The \ value set to \'5\' indicates that the MCVideo client\'s
permission to send a media is being revoked. No additional information is
included.
Cause#6 - No resources available
The \ value set to \'6\' indicates that the transmission control
server can no longer grant MCVideo client to send media due to congestion. No
additional information is included.
Cause#7 - Queue the transmission
The \ value set to \'7\' indicates that the MCVideo client\'s
permission to send a media is being queued. No additional information is
included.
Cause #8 - No receiving participant
The \ value set to \'8\' indicates that the MCVideo client\'s
permission to send a media is being revoked because there is no participant to
receive the stream.
Cause#255 -- Other reason
The \ value set to \'255\' indicates that the transmission
control server can no longer grant MCVideo client to send media due to the
transmission control server local policy. No additional information is
included.
9.2.11 Queue Position Request message
The Queue Position Request message is a request from a transmission control
participant to get information about the transmission control participant\'s
position in the transmission control request queue.
The Queue Position Request message is used in the off-network mode and in the
on-network mode. In the on-network mode the Queue Position Request message is
only used over the unicast bearer..
Table 8.2.11-1 shows the content of the Queue Position Request message.
**Table 9.2.11-1: Queue Position Request message**
0 1 2 3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|V=2\|P\| Subtype \| PT=APP=204 \| length \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|SSRC of transmission control participant for queue status info \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| name=MCV0 \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| User ID field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Track Info field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
With the exception of the three first 32-bit words the order of the fields are
irrelevant.
**[Subtype:]{.underline}**
The subtype is coded according to table 9.2.2.1-1.
**[Length:]{.underline}**
The length is coded as specified in to clause 9.1.2.
**[SSRC:]{.underline}**
The SSRC field carries the SSRC of the transmission control participant that
is requesting information about its position in the transmission request
queue.
The SSRC field is coded as specified in IETF RFC 3550 [3].
**[User ID:]{.underline}**
The User ID field is used in off-network only. The User ID field carries the
MCVideo user ID of the transmission participant sending the Queue Position
Request message.
The User ID field is coded as specified in clause 9.2.3.8.
**[Track Info:]{.underline}**
The Track Info field is included when an MCVideo call involves a non-
controlling MCVideo function. The coding of the Track Info field is described
in clause 9.2.3.13.
### 9.2.12 Queue Position Info message
The Queue Position Info message is sent by the transmission control server to
notify the transmission control participant of its position in the
transmission control request queue.
The Queue Position Info message is used in off-network and in on-network mode.
In the on-network mode the Queue Position Info message is only used over the
unicast bearer.
Table 9.2.12-1 shows the content of the Queue Position Info message.
Table 9.2.12-1: Queue Position Info message
0 1 2 3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|V=2\|P\| Subtype \| PT=APP=204 \| length \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| SSRC of transmission control server \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| name=MCV1 \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| User ID field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| SSRC of queued transmission control participant field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Queued User ID field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Queue Info field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Track Info field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Transmission control Indicator field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
With the exception of the three first 32-bit words the order of the fields are
irrelevant.
**[Subtype:]{.underline}**
The subtype is coded according to table 9.2.2.1-2.
**[Length:]{.underline}**
The length is coded as specified in to clause 9.1.2.
**[SSRC:]{.underline}**
The SSRC field carries the SSRC of the transmission control server.
The SSRC field is coded as specified in IETF RFC 3550 [3].
**[User ID:]{.underline}**
The User ID field is used in off-network only. The User ID field carries the
MCVideo ID of the transmission control participant sending the Queue Position
Info message.
The User ID value is coded as specified in clause 9.2.3.8.
**[SSRC of queued transmission participant:]{.underline}**
The SSRC of queued transmission participant is only applicable in off-network
and shall carry the SSRC of the queued transmission participant.
The SSRC field shall be coded as specified in IETF RFC 3550 [3].
**[Queued User ID:]{.underline}**
The Queued User ID field is used in off-network only. The Queued User ID field
carries the MCVideo ID of the queued transmission control participant.
The Queued User ID value is coded as specified in clause 9.2.3.8.
**[Queue Info:]{.underline}**
The Queue Info field defines the queue position and granted transmission
control priority in the queue.
The Queue Info field is coded as specified in clause 9.2.3.5.
**[Track Info:]{.underline}**
The Track Info field is included when an MCVideo call involves a non-
controlling MCVideo function. The coding of the Track Info field is described
in clause 9.2.3.13.
**[Transmission Control Indicator:]{.underline}**
The Transmission Control Indicator field is coded as described in clause
9.2.3.15.
### 9.2.13 Media transmission notification
The Media transmission notification message is sent by the transmission
control server to notify the transmission control participant that a media
transmission is available from another user.
The Media transmission notification message is used in off-network and in on-
network mode. In the on-network mode the Media transmission notification
message is used over both the unicast bearer and MBMS bearer.
Table 9.2.13-1 shows the content of the Media transmission notification
message.
Table 9.2.13-1: Media transmission notification message
0 1 2 3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|V=2\|P\| Subtype \| PT=APP=204 \| length \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| SSRC of transmission control server \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| name=MCV1 \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| User ID field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| SSRC of transmitter \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Permission to Request the Transmission field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Transmission Indicator field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Media ID field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Track Info field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Reception Mode field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
With the exception of the three first 32-bit words the order of the fields are
irrelevant.
**[Subtype:]{.underline}**
The subtype is coded according to table 9.2.2.1-2.
**[Length:]{.underline}**
The length is coded as specified in to clause 9.1.2.
**[SSRC:]{.underline}**
The SSRC field carries the SSRC of the transmission control server.
The SSRC field is coded as specified in IETF RFC 3550 [3].
**[User ID:]{.underline}**
The User ID field carries the MCVideo ID of the user transmitting the media.
The User ID value is coded as specified in clause 9.2.3.8.
**[SSRC of transmitter:]{.underline}**
The SSRC of transmitter field carries the SSRC of the user transmitting the
media.
The SSRC of transmitter field is coded as described in clause 9.2.3.16.
**[Permission to request the transmission:]{.underline}**
The Permission to Request the Transmission field is coded as specified in
clause 9.2.3.7.
**[Transmission Indicator:]{.underline}**
The Transmission Indicator field is coded as described in clause 9.2.3.11.
**[Media ID:]{.underline}**
The Media ID field is present only if media multiplexing is used. The Media ID
field identified a media flow within a media multiplex.
The Media ID value is coded as specified in clause 9.2.3.x.
**[Track Info:]{.underline}**
The Track Info field is included when an MCVideo call involves a non-
controlling MCVideo function. The coding of the Track Info field is described
in clause 9.2.3.13.
**[Reception Mode:]{.underline}**
The Reception Mode field coded as specified in clause 9.2.3.21.
### 9.2.14 Receive media request
The Receive media request message is a request from a transmission control
participant to get permission to send media. The Receive media request message
is sent over unicast bearers only from the transmission control participant
towards the transmission control server.
Table 9.2.14-1 shows the content of the Receive Request message.
Table 9.2.14-1: Receive media request message
0 1 2 3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|V=2\|P\| Subtype \| PT=APP=204 \| length \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| SSRC of participant sending the Receieve Request message \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| name=MCV0 \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
: User ID field :
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| SSRC of transmitter \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Media ID field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Transmission Indicator field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Reception Priority field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Track Info field \|
With the exception of the three first 32-bit words the order of the fields are
irrelevant.
**[Subtype:]{.underline}**
The subtype is coded according to table 9.2.2.1-1.
**[Length:]{.underline}**
The length is coded as specified in to clause 9.1.2.
**[SSRC:]{.underline}**
The SSRC field carries the SSRC of the transmission participant requesting the
reception of the media from another user.
The content of the SSRC field is coded as specified in IETF RFC 3550 [3].
**[User ID:]{.underline}**
The User ID field is used to carry the identity of the user who is requesting
the reception of the media and is coded as described in clause 9.2.3.8.
**[SSRC of transmitter:]{.underline}**
The SSRC of transmitter field carries the SSRC of the user transmitting the
media.
The SSRC of transmitted field is coded as described in clause 9.2.3.16.
**[Media ID:]{.underline}**
The Media ID field is present only if media multiplexing is used. The Media ID
field identified a media flow within a media multiplex.
The Media ID value is coded as specified in clause 9.2.3.x.
**[Transmission Indicator:]{.underline}**
The Transmission Indicator field is coded as described in clause 9.2.3.11.
**[Reception priority:]{.underline}**
The Reception Priority field is coded as described in clause 9.2.3.19.
**[Track Info:]{.underline}**
The Track Info field is included when an MCVideo call involves a non-
controlling MCVideo function. The coding of the Track Info field is described
in clause 9.2.3.13.
### 9.2.15 Receive media response
#### 9.2.15.1 General
The Receive media response message is sent from the transmission control
server to the transmission control participant to indicate whether the media
reception is possible or not.
Table 9.2.15.1-1 shows the content of the Receive media response message.
Table 9.2.15.1-1: Receive media response message
0 1 2 3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|V=2\|P\| Subtype \| PT=APP=204 \| length \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| SSRC of transmission control server \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| name=MCV1 \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Result \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Reject Cause field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| SSRC of transmitter \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Media ID field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Transmission Indicator field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
With the exception of the three first 32-bit words the order of the fields are
irrelevant.
**[Subtype:]{.underline}**
The subtype is coded according to table 9.2.2.1-2.
Length:
The length is coded as specified in to clause 9.1.2.
**[SSRC:]{.underline}**
The SSRC field carries the SSRC of the transmission control server.
The content of the SSRC field is coded as specified in IETF RFC 3550 [3].
**[Result:]{.underline}**
The Result field indicates whether media reception is possible as per the
request. This field is coded as described clause 9.2.3.x.
**[Reject Cause:]{.underline}**
The Reject Cause field includes the reason for the rejecting the media receive
request and can be followed by a text-string explaining why the media receive
request was rejected. Therefore the length of the packet will vary depending
on the size of the application dependent field.
The Reject Cause field contains:
1\. a \ value; and
2\. a \ value.
Available \ values are listed in clause 9.2.15.2. The Reject
Cause field is coded as described in clause 9.2.3.4.
**[SSRC of transmitter:]{.underline}**
The SSRC of transmitter field carries the SSRC of the user transmitting the
media.
The SSRC of transmitted field is coded as described in clause 9.2.3.16.
**[Media ID:]{.underline}**
The Media ID field is present only if media multiplexing is used. The Media ID
field identified a media flow within a media multiplex.
The Media ID value is coded as specified in clause 9.2.3.x.
**[Transmission Indicator:]{.underline}**
The Transmission Indicator field is coded as described in clause 9.2.3.11.
#### 9.2.15.2 Rejection cause codes and rejection cause phrase
Cause #2 - Internal transmission control server error
The \ value set to \'2\' indicates that the transmission control
server cannot grant the receive media request due to an internal error.
Cause #4 - Retry-after timer has not expired
The \ value set to \'4\' indicates that the transmission control
server cannot grant the receive media request, because timer T9 (Retry-after)
has not expired after permission to send media has been revoked.
Cause #5 - Send only
The \ value set to \'5\' indicates that the transmission control
server cannot grant the receive media request, because the requesting party
only has send privilege.
Cause #6 - No resources available
The \ value set to \'6\' indicates that the transmission control
server cannot grant the receive media request due to congestion.
Cause #7 - Max no of simultaneous stream to receive is reached
The \ value set to \'7\' indicates that the transmission control
server cannot grant the receive media request due to max number of
simultaneous stream to receive is reached.
Cause #255 - Other reason
The \ value set to \'255\' indicates that the transmission
control server does not grant the receive media request due to the
transmission control server local policy.
### 9.2.16 Media reception notification
The Media reception notification message is sent from the transmission control
server to the transmission control participant to indicate that a media
reception has been initiated to a user.
Table 9.2.16-1 shows the content of the Media reception notification message.
Table 9.2.16-1: Media reception notification message
0 1 2 3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|V=2\|P\| Subtype \| PT=APP=204 \| length \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| SSRC of transmission control server \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| name=MCV1 \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| User ID field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Media ID field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
With the exception of the three first 32-bit words the order of the fields are
irrelevant.
**[Subtype:]{.underline}**
The subtype is coded according to table 9.2.2.1-2.
Length:
The length is coded as specified in to clause 9.1.2.
**[SSRC:]{.underline}**
The SSRC field carries the SSRC of the transmission control server.
The content of the SSRC field is coded as specified in IETF RFC 3550 [3].
**[User ID:]{.underline}**
The User ID field is used to carry the identity of the user who is receiving
the media and is coded as described in clause 9.2.3.8.
**[Media ID:]{.underline}**
The Media ID field is present only if media multiplexing is used. The Media ID
field identified a media flow within a media multiplex.
The Media ID value is coded as specified in clause 9.2.3.x
### 9.2.17 Transmission cancel request
The Transmission cancel request message is sent from the transmission control
participant to the transmission control server to indicate the cancellation of
a transmitted media.
Table 9.2.17.1-1 shows the content of the Transmission cancel request message.
Table 9.2.17-1: Transmission cancel request message
0 1 2 3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|V=2\|P\| Subtype \| PT=APP=204 \| length \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| SSRC of transmission control participant \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| name=MCV0 \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| User ID field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Media ID field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
With the exception of the three first 32-bit words the order of the fields are
irrelevant.
**[Subtype:]{.underline}**
The subtype is coded according to table 9.2.2.1-1.
Length:
The length is coded as specified in to clause 9.1.2.
**[SSRC:]{.underline}**
The SSRC field carries the SSRC of the transmission control server.
The content of the SSRC field is coded as specified in IETF RFC 3550 [3].
**[User ID:]{.underline}**
The User ID field is used to carry the identity of the user whose media
transmission is requested for cancellation and is described in clause 9.2.3.8.
**[Media ID:]{.underline}**
The Media ID field is present only if media multiplexing is used. The Media ID
field identified a media flow within a media multiplex.
The Media ID value is coded as specified in clause 9.2.3.x
### 9.2.18 Transmission cancel response
The Transmission cancel response message is sent from the transmission control
server to the transmission control participant to indicate the cancellation of
a transmitted media.
Table 9.2.18.1-1 shows the content of the Transmission cancel response
message.
Table 9.2.18.1-1: Transmission cancel response message
0 1 2 3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|V=2\|P\| Subtype \| PT=APP=204 \| length \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| SSRC of transmission control server \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| name=MCV1 \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Media ID field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
With the exception of the three first 32-bit words the order of the fields are
irrelevant.
**[Subtype:]{.underline}**
The subtype is coded according to table 9.2.2.1-2.
Length:
The length is coded as specified in to clause 9.1.2.
**[SSRC:]{.underline}**
The SSRC field carries the SSRC of the transmission control server.
The content of the SSRC field is coded as specified in IETF RFC 3550 [3].
**[Media ID:]{.underline}**
The Media ID field is present only if media multiplexing is used. The Media ID
field identified a media flow within a media multiplex.
The Media ID value is coded as specified in clause 9.2.3.x
### 9.2.19 Transmission cancel request notify
The Transmission cancel request notify message is sent from the transmission
control server to the transmission control participant..
Table 9.2.19-1 shows the content of the Transmission cancel request notify
message.
Table 9.2.19-1: Transmission cancel request notify message
0 1 2 3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|V=2\|P\| Subtype \| PT=APP=204 \| length \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| SSRC of transmission control server \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| name=MCV1 \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Media ID field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
With the exception of the three first 32-bit words the order of the fields are
irrelevant.
**[Subtype:]{.underline}**
The subtype is coded according to table 9.2.2.1-2.
Length:
The length is coded as specified in to clause 9.1.2.
**[SSRC:]{.underline}**
The SSRC field carries the SSRC of the transmission control server.
The content of the SSRC field is coded as specified in IETF RFC 3550 [3].
**[Media ID:]{.underline}**
The Media ID field is present only if media multiplexing is used. The Media ID
field identified a media flow within a media multiplex.
The Media ID value is coded as specified in clause 9.2.3.x
### 9.2.20 Transmission end request
The Transmission end request message is sent from the transmission control
participant to the transmission control server to terminate the Transmission
request (if final response is not received from server) or to end the
permission to send RTP media (if user has already received permission to send
RTP media).
Table 9.2.20.1-1 shows the content of the Transmission end request message.
Table 9.2.20-1: Transmission end request message
0 1 2 3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|V=2\|P\| Subtype \| PT=APP=204 \| length \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| SSRC of transmission control participant \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| name=MCV2 \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| User ID field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Media ID field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Reject Cause value \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
With the exception of the three first 32-bit words the order of the fields are
irrelevant.
**[Subtype:]{.underline}**
The subtype is coded according to table 9.2.2.1-3.
**[Length:]{.underline}**
The length is coded as specified in to clause 9.1.2.
**[SSRC:]{.underline}**
The SSRC field carries the SSRC of the transmission control participant.
The content of the SSRC field is coded as specified in IETF RFC 3550 [3].
**[User ID:]{.underline}**
The User ID field is used to carry the identity of the user whose media
transmission is requested to be terminated and is described in clause 9.2.3.8.
**[Media ID:]{.underline}**
The Media ID field is present only if media multiplexing is used. The Media ID
field identified a media flow within a media multiplex.
The Media ID value is coded as specified in clause 9.2.3.x
**[Reject Cause:]{.underline}**
The Reject Cause field for the Transmission End Request message includes
\ cause value in the Reject Cause field explaining why the
transmission control server wants the transmission participant to stop sending
media and can be followed by additional information. Therefore, the length of
the packet can vary depending on the value of the rejection cause.
The coding of the \ value is specified in clause 9.2.3.4. The
\ cause value is specified in clause 9.2.10.2.
### 9.2.21 Transmission end response
The Transmission end response message is sent from the transmission control
participant to the transmission control server and from the transmission
control server to the transmission control participant.
Table 9.2.21-1 shows the content of the Transmission end response message.
Table 9.2.21-1: Transmission end response message
0 1 2 3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|V=2\|P\| Subtype \| PT=APP=204 \| length \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| SSRC of transmission control server \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| name=MCV2 \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| User ID field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Media ID field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
With the exception of the three first 32-bit words the order of the fields are
irrelevant.
**[Subtype:]{.underline}**
The subtype is coded according to table 9.2.2.1-3.
**[Length:]{.underline}**
The length is coded as specified in to clause 9.1.2.
**[SSRC:]{.underline}**
The SSRC field carries the SSRC of the transmission control server.
The content of the SSRC field is coded as specified in IETF RFC 3550 [3].
**[User ID:]{.underline}**
The User ID field is used to carry the identity of the user whose media
transmission is requested to be terminated and is coded as described in clause
9.2.3.8.
**[Media ID:]{.underline}**
The Media ID field is present only if media multiplexing is used. The Media ID
field identified a media flow within a media multiplex.
The Media ID value is coded as specified in clause 9.2.3.x
### 9.2.22 Remote Transmission request
The Remote Transmission request message is sent from the transmission control
participant to the transmission control server.
Table 9.2.22-1 shows the content of the Remote Transmission request message.
Table 9.2.22-1: Remote Transmission request message
0 1 2 3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|V=2\|P\| Subtype \| PT=APP=204 \| length \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| SSRC of participant sending the Receieve Request message \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| name=MCV0 \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
: Remote ID field :
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
: User ID field :
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Media ID field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
With the exception of the three first 32-bit words the order of the fields are
irrelevant.
**[Subtype:]{.underline}**
The subtype is coded according to table 9.2.2.1-1.
**[Length:]{.underline}**
The length is coded as specified in to clause 9.1.2.
**[SSRC:]{.underline}**
The SSRC field carries the SSRC of the transmission participant requesting the
reception of the media from another user.
The content of the SSRC field is coded as specified in IETF RFC 3550 [3].
**[Remote ID:]{.underline}**
The Remote ID field is used to carry the identity of the user who remotely
initiated the media transmission of another user and is coded as described in
clause 9.2.3.8.
**[User ID:]{.underline}**
The User ID field is used to carry the identity of the user whose media
transmission is requested and is coded as described in clause 9.2.3.8.
**[Media ID:]{.underline}**
The Media ID field is present only if media multiplexing is used. The Media ID
field identified a media flow within a media multiplex.
The Media ID value is coded as specified in clause 9.2.3.x.
### 9.2.23 Remote Transmission response
The Remote Transmission response message is sent from the transmission control
server to the transmission control participant.
Table 9.2.23-1 shows the content of the Remote Transmission response message.
Table 9.2.23-1: Remote Transmission response message
0 1 2 3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|V=2\|P\| Subtype \| PT=APP=204 \| length \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| SSRC of transmission control server \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| name=MCV1 \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Media ID field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
With the exception of the three first 32-bit words the order of the fields are
irrelevant.
**[Subtype:]{.underline}**
The subtype is coded according to table 9.2.2.1-2.
Length:
The length is coded as specified in to clause 9.1.2.
**[SSRC:]{.underline}**
The SSRC field carries the SSRC of the transmission control server.
The content of the SSRC field is coded as specified in IETF RFC 3550 [3].
**[Media ID:]{.underline}**
The Media ID field is present only if media multiplexing is used. The Media ID
field identified a media flow within a media multiplex.
The Media ID value is coded as specified in clause 9.2.3.x
### 9.2.24 Remote Transmission cancel request
The Remote Transmission cancel request message is sent from the transmission
control participant to the transmission control server.
Table 9.2.24-1 shows the content of the Remote Transmission cancel request
message.
Table 9.2.24-1: Remote Transmission cancel request message
0 1 2 3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|V=2\|P\| Subtype \| PT=APP=204 \| length \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| SSRC of participant sending the Receieve Request message \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| name=MCV0 \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
: User ID field :
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Media ID field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
With the exception of the three first 32-bit words the order of the fields are
irrelevant.
**[Subtype:]{.underline}**
The subtype is coded according to table 9.2.2.1-1.
**[Length:]{.underline}**
The length is coded as specified in to clause 9.1.2.
**[SSRC:]{.underline}**
The SSRC field carries the SSRC of the transmission participant requesting the
reception of the media from another user.
The content of the SSRC field is coded as specified in IETF RFC 3550 [3].
**[User ID:]{.underline}**
The User ID field is used to carry the identity of the user whose media
transmission is requested for cancellation and is coded as described in clause
9.2.3.8.
**[Media ID:]{.underline}**
The Media ID field is present only if media multiplexing is used. The Media ID
field identified a media flow within a media multiplex.
The Media ID value is coded as specified in clause 9.2.3.x.
### 9.2.25 Remote Transmission cancel response
The Remote Transmission cancel response message is sent from the transmission
control server to the transmission control participant.
Table 9.2.25-1 shows the content of the Remote Transmission cancel response
message.
Table 9.2.25-1: Remote Transmission cancel response message
0 1 2 3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|V=2\|P\| Subtype \| PT=APP=204 \| length \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| SSRC of participant sending the Receieve Request message \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| name=MCV1 \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Media ID field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
With the exception of the three first 32-bit words the order of the fields are
irrelevant.
**[Subtype:]{.underline}**
The subtype is coded according to table 9.2.2.1-2.
**[Length:]{.underline}**
The length is coded as specified in to clause 9.1.2.
**[SSRC:]{.underline}**
The SSRC field carries the SSRC of the transmission participant requesting the
reception of the media from another user.
The content of the SSRC field is coded as specified in IETF RFC 3550 [3].
**[Media ID:]{.underline}**
The Media ID field is present only if media multiplexing is used. The Media ID
field identified a media flow within a media multiplex.
The Media ID value is coded as specified in clause 9.2.3.x.
### 9.2.26 Media reception end request
The Media reception end request message is sent from the transmission control
participant to the transmission control server and from the transmission
control server to the transmission control participant.
Table 9.2.26.1-1 shows the content of the Media reception end request message.
Table 9.2.26-1: Media reception end request message
0 1 2 3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|V=2\|P\| Subtype \| PT=APP=204 \| length \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| SSRC of transmission control participant or server \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| name=MCV2 \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| SSRC of transmitter \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Media ID field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Transmission Indicator field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
With the exception of the three first 32-bit words the order of the fields are
irrelevant.
**[Subtype:]{.underline}**
The subtype is coded according to table 9.2.2.1-3.
**[Length]{.underline}** :
The length is coded as specified in to clause 9.1.2.
**[SSRC:]{.underline}**
The SSRC field carries the SSRC of the transmission control server or the
transmission control participant.
The content of the SSRC field is coded as specified in IETF RFC 3550 [3].
**[SSRC of transmitter:]{.underline}**
The SSRC of transmitter field carries the SSRC of the user transmitting the
media.
The SSRC of transmitter field is coded as described in clause 9.2.3.16.
**[Media ID:]{.underline}**
The Media ID field is present only if media multiplexing is used. The Media ID
field identified a media flow within a media multiplex.
The Media ID value is coded as specified in clause 9.2.3.x.
**[Transmission Indicator:]{.underline}**
The Transmission Indicator field is coded as described in clause 9.2.3.11.
### 9.2.27 Media reception end response
The Media reception end response message is sent from the transmission control
participant to the transmission control server and from the transmission
control server to the transmission control participant.
Table 9.2.27-1 shows the content of the Media reception end response message.
Table 9.2.27-1: Media reception end response message
0 1 2 3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|V=2\|P\| Subtype \| PT=APP=204 \| length \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| SSRC of transmission control server or participant \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| name=MCV2 \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| SSRC of transmitter \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Media ID field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
With the exception of the three first 32-bit words the order of the fields are
irrelevant.
**[Subtype:]{.underline}**
The subtype is coded according to table 9.2.2.1-3.
**[Length]{.underline}** :
The length is coded as specified in to clause 9.1.2.
**[SSRC:]{.underline}**
The SSRC field carries the SSRC of the transmission control server or the
transmission control participant.
The content of the SSRC field is coded as specified in IETF RFC 3550 [3].
**[SSRC of transmitter:]{.underline}**
The SSRC of transmitter field carries the SSRC of the user transmitting the
media.
The SSRC of transmitted field is coded as described in clause 9.2.3.16.
**[Media ID:]{.underline}**
The Media ID field is present only if media multiplexing is used. The Media ID
field identified a media flow within a media multiplex.
The Media ID value is coded as specified in clause 9.2.3.x.
### 9.2.28 Media reception override notification
The Media reception override notification message is sent from the
transmission control server to the transmission control participant.
Table 9.2.28-1 shows the content of the Media reception override notification
message.
Table 9.2.28-1: Media reception override notification message
0 1 2 3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|V=2\|P\| Subtype \| PT=APP=204 \| length \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| SSRC of participant sending the Receieve Request message \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| name=MCV1 \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
: User ID field :
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
: SSRC of transmitter :
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
: Overriding ID field :
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Media ID field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
: Overridden ID field :
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Media ID field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
With the exception of the three first 32-bit words the order of the fields are
irrelevant.
**[Subtype:]{.underline}**
The subtype is coded according to table 9.2.2.1-2.
**[Length:]{.underline}**
The length is coded as specified in to clause 9.1.2.
**[SSRC:]{.underline}**
The SSRC field carries the SSRC of the transmission participant requesting the
reception of the media from another user.
The content of the SSRC field is coded as specified in IETF RFC 3550 [3].
**[User ID:]{.underline}**
The User ID field is used to carry the identity of the user who is requesting
the reception of the media and is coded as described in clause 9.2.3.8.
**[SSRC of transmitter:]{.underline}**
The SSRC of transmitter field carries the SSRC of the user transmitting the
media.
The SSRC of transmitter field is coded as described in clause 9.2.3.16.
**[Overriding ID:]{.underline}**
The Overriding ID field is used to carry the identity of the user of the
overriding media and is coded as described in clause 9.2.3.8.
**[Media ID:]{.underline}**
The Media ID field is present only if media multiplexing is used. The Media ID
field Identifies the communication of overriding media within a media
multiplex.
The Media ID value is coded as specified in clause 9.2.3.x.
**[Overridden ID:]{.underline}**
The Overridden ID field is used to carry the identity of the user of the
overridden media and is coded as described in clause 9.2.3.8.
**[Media ID:]{.underline}**
The Media ID field is present only if media multiplexing is used. The Media ID
field Identifies the communication of overridden media within a media
multiplex.
The Media ID value is coded as specified in clause 9.2.3.x.
### 9.2.29 Transmission end notify
The Transmission end notify message is sent from the transmission control
server to the transmission control participant.
Table 9.2.29-1 shows the content of the Transmission end notify message.
Table 9.2.29-1: Transmission end notify message
0 1 2 3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|V=2\|P\| Subtype \| PT=APP=204 \| length \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| SSRC of transmission control server \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| name=MCV1 \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
: User ID field :
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
: SSRC of transmitter :
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Media ID field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
With the exception of the three first 32-bit words the order of the fields are
irrelevant.
**[Subtype:]{.underline}**
The subtype is coded according to table 9.2.2.1-2.
Length:
The length is coded as specified in to clause 9.1.2.
**[SSRC:]{.underline}**
The SSRC field carries the SSRC of the transmission control server.
The content of the SSRC field is coded as specified in IETF RFC 3550 [3].
**[User ID:]{.underline}**
The User ID field is used to carry the identity of the user whose media
transmission has been released and is coded as described in clause 9.2.3.8.
**[SSRC of transmitter:]{.underline}**
The SSRC of transmitter field carries the SSRC of the user transmitting the
media.
The SSRC of transmitter field is coded as described in clause 9.2.3.16.
**[Media ID:]{.underline}**
The Media ID field is present only if media multiplexing is used. The Media ID
field identified a media flow within a media multiplex.
The Media ID value is coded as specified in clause 9.2.3.x
### 9.2.30 Transmission idle
The Transmission idle message is sent from the transmission control server to
the transmission control participant.
Table 9.2.30-1 shows the content of the Transmission idle message.
Table 9.2.30-1: Transmission idle message
0 1 2 3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|V=2\|P\| Subtype \| PT=APP=204 \| length \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| SSRC of transmission control server \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| name=MCV1 \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Message Sequence Number field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Transmission Indicator field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
With the exception of the three first 32-bit words, the order of the fields is
irrelevant.
**[Subtype:]{.underline}**
The subtype is coded according to table 9.2.2.1-2.
**[Length:]{.underline}**
The length is coded as specified in to clause 9.1.2.
**[SSRC:]{.underline}**
The SSRC field carries the SSRC of the transmission control server.
The content of the SSRC field is coded as specified in IETF RFC 3550 [3].
**[Message Sequence Number:]{.underline}**
The Message Sequence Number field is coded as specified in to clause 9.2.3.9.
**[Transmission Indicator:]{.underline}**
The Transmission Indicator field is coded as described in clause 9.2.3.11.
### 9.2.31 Transmission control ack
The Transmission control ack message is sent from the transmission control
server to the transmission control participant and from the transmission
control participant to the transmission control server.
Table 9.2.31-1 shows the content of the Transmission control ack message.
Table 9.2.31-1: Transmission control ack message
0 1 2 3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|V=2\|P\| Subtype \| PT=APP=204 \| length \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|SSRC of the sender (transmission control participant or server)\|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| name=MCV2 \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Source field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Message name field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Message type field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
With the exception of the three first 32-bit words the order of the fields is
irrelevant.
**[Subtype:]{.underline}**
The subtype is coded according to table 9.2.2.1-3.
**[Length:]{.underline}**
The length is coded as specified in to clause 9.1.2.
**[SSRC:]{.underline}**
The SSRC field carries the SSRC of the transmission control participant or
transmission control server sending the Transmission control ack.
The content of the SSRC field is coded as specified in IETF RFC 3550 [3].
**[Source:]{.underline}**
The Source field contains the source of the message and is coded as described
in clause 9.2.3.12.
**[Message name:]{.underline}**
The Message name field contains the transmission control message name that is
being acknowledged and is coded asdescribed in clause 9.2.3.18.
**[Message type:]{.underline}**
The Message Type field contains the transmission control message type that is
being acknowledged and is coded as described in clause 9.2.3.10.
## 9.3 MBMS subchannel control
### 9.3.1 Introduction
The MBMS subchannel control messages shall be coded as described in clause
9.1.2 where the MBMS subchannel control message is part of the application-
dependent data.
For the MBMS subchannel control protocol the ASCII name string shall be: MCV3.
The list of MBMS subchannel control messages can be found in the clause 9.3.2.
The MBMS subchannel control specific fields are specified in clause 9.3.3.
### 9.3.2 MBMS subchannel control messages
Table 9.3.2-1 provides a list of MBMS subchannel control protocol messages.
Table 9.3.2-1: MBMS subchannel control protocol messages
Message name Subtype Reference Direction
* * *
Map Group To Bearer 00000 clause 9.3.4 Server client Unmap Group To Bearer
00001 clause 9.3.5 Server client Application Paging 00010 clause 9.3.6 Server
client Bearer Announcement a clause 9.3.7 Server client NOTE: The
participating MCVideo function is the server and the MCVideo client is the
client.
### 9.3.3 MBMS subchannel control specific fields
#### 9.3.3.1 Introduction
This clause describes the MBMS subchannel control specific data fields.
The MBMS subchannel control specific data fields are contained in the
application-dependent data of the MBMS subchannel control message. The MBMS
subchannel control specific data fields follow the syntax specified in clause
9.1.3.
Table 9.3.3.1-1 lists the available fields including the assigned Field ID.
Table 9.3.3.1-1: MBMS subchannel control specific data fields
Field name Field ID Description
* * *
                     Decimal    Binary
MBMS Subchannel 000 00000000 Clause 9.3.3.3 TMGI 001 00000001 Clause 9.3.3.4.
MCVideo Group ID 002 00000010 Clause 9.3.3.2 Monitoring state b b Clause
9.3.3.5
#### 9.3.3.2 MCVideo Group ID field
The MCVideo Group ID field contains a URI identifying the MCVideo group for
which media and transmission control messages are going to be broadcasted over
a MBMS subchannel.
The MCVideo Group ID field is coded as the MCVideo Group Identity field
specified in clause 9.2.3.20.
#### 9.3.3.3 MBMS Subchannel field
The MBMS Subchannel field describes which MBMS subchannel to use for media and
for transmission control.
Table 9.3.3.3-1 describes the coding of the MBMS Subchannel field.
Table 9.3.3.3-1: MBMS Subchannel field coding
0 1 2 3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|MBMS Subchannel\|MBMS Subchannel\|Video \|Audio \|Control\|FEC \|
\|field ID value \|length value \|m-line \|m-line \|m-line \|m-line \|
\| \| \|Number \|Number \|Number \|Number \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| IP \| Spare \|
\|Version\| \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Transmission control Port Number \|Â­
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Video Media Port Number \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Audio Media Port Number \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| FEC Port Number \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
: IP Address :
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
The \ value is a binary value and shall be set
according to table 9.3.3.3-1.
The \ value is a binary value indicating the total
length in octets of the \ value, \
value, \ value, \ value, \ value, \ value, spare, port number values and \ items.
The \ value shall consist of 4 bit parameter giving the
number of the\" m=video\" m-line in the SIP MESSAGE request announcing the
MBMS bearer described in 3GPP TS 24.281 [2].
The \ value shall consist of 4 bit parameter giving the
number of the\" m=audio\" m-line in the SIP MESSAGE request announcing the
MBMS bearer described in 3GPP TS 24.281 [2]. The \ value
is set to \"0\" when audio is combined with video.
The \ value shall consist of 4 bit parameter giving the
number of the \"m=application\" m-line in the SIP MESSAGE request announcing
the MBMS bearer described in 3GPP TS 24.281 [2].
The \ value shall consist of 4 bit parameter giving the
number of the \"m=application\" m-line in the SIP MESSAGE request announcing
the MBMS bearer described in 3GPP TS 24.281 [2]. The \
value is set to \"0\" when the media is not protected by FEC.
The \ value indicates the IP version:
\'0\' IP version 4
\'1\' IP version 6
All other values are reserved for future use.
The \ value is a 32-bit binary value giving
the port to be used if the\ value is greater than
\'0\'. If the \ value is equal to \'0\', the \ value is not included in the MBMS Subchannel
field.
The \ value is a 32-bit binary value giving the port
to be used.
The \ value is a 32-bit binary value giving the port
to be used. If the \ value is equal to \'0\', the \ value is not included in the MBMS Subchannel field.
.The \ value is a 32-bit binary value giving the port to be
used. If the \ value is equal to \'0\', the \ value is not included in the MBMS Subchannel field.
.The \ value is:
1\. a 32 bit binary value containing the IP v4 address if the \
indicates that the \ value is a IP v4 Address; or
2\. four 32-bit words that together forms a 128 bit binary value representing
the IP v6 address, if the \ indicates that the \ value
is a IP v6 Address.
#### 9.3.3.4 TMGI field
Table 9.3.3.4-1 describes the coding of the TMGI field.
Table 9.3.3.4-1: TMGI field coding
0 1 2 3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|TMGI \|TMGI \|TMGI \|
\|ID \|length \| \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ :
: (Padding) :
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
The \ value is a binary value and shall be set according to
table 9.3.3.1-2.
The \ value is a binary value indicating the length in octets of
the \ value item.
The \ value is coded as described in 3GPP TS 24.008 [11] clause
10.5.6.13 excluding the Temporary Mobile Group Identity IEI and Length of
Temporary Mobile Group Identity contents (octet 1 and octet 2 in 3GPP TS
24.008 [11] clause 10.5.6.13).
If the length of the \ value is not (2 + multiple of 4) bytes, the
\ value shall be padded to (2 + multiple of 4) bytes. The value of the
padding bytes should be set to zero. The padding bytes shall be ignored.
#### 9.3.3.5 Monitoring state
Table 9.3.3.5-1 describes the coding of the Monitoring State field.
Table 9.3.3.5-1: Monitoring State field coding
0 1 2 3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|Monitoring \|length=1 \|Monitoring \|Spare \|
\|State ID \| \|State \| \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
The \ value is a binary value and shall be set
according to table 9.3.3.1-1.
The \ value is a binary value indicating the length
in octets of the \ value item.
The \ value is a binary value where the following values are
defined:
\'0\' Monitoring is inactive
\'1\' Monitoring is active
All other values are reserved for future use.
The spare bits are set to zero
### 9.3.4 Map Group To Bearer message
The Map Group To Bearer message is sent by the participating function when a
transmission is started.
Table 9.3.4-1 shows the content of the Map Group To Bearer message.
Table 9.3.4-1: Map Group To Bearer message
0 1 2 3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|V=2\|P\| Subtype\| PT=APP=204 \| Length \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| SSRC of participating MCVideo function \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| name=MCV3 \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| MCVideo Group ID field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| TMGI field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| MBMS Subchannel field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
With the exception of the three first 32-bit words, the order of the fields
are irrelevant.
**[Subtype:]{.underline}**
The subtype shall be coded according to table 9.3.2-1.
**[Length:]{.underline}**
The length shall be coded as specified in clause 8.1.2.
**[SSRC:]{.underline}**
The SSRC field shall carry the SSRC of the participating MCVideo function.
The SSRC field shall be coded as specified in IETF RFC 3550 [3].
**[MCVideo Group ID:]{.underline}**
The MCVideo Group ID field is coded as described in clause 9.3.3.2.
**[TMGI:]{.underline}**
The TMGI field is coded as described in clause 9.3.3.4.
**[MBMS Subchannel:]{.underline}**
The MBMS Subchannel field is coded as described in clause 9.3.3.3.
### 9.3.5 Unmap Group To Bearer message
The Unmap Group To Bearer message is sent by the participating function when a
transmission is ended.
Table 9.3.5-1 shows the content of the Unmap Group To Bearer message.
Table 9.3.5-1: Unmap Group To Bearer message
0 1 2 3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|V=2\|P\| Subtype \| PT=APP=204 \| length=3 \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| SSRC of participating MCVideo function \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| name=MCV3 \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| MCVideo Group ID field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
With the exception of the three first 32-bit words, the order of the fields
are irrelevant.
**[Subtype:]{.underline}**
The subtype shall be coded according to table 9.3.2-1.
**[Length:]{.underline}**
The length shall be coded as specified in clause 8.1.2.
**[SSRC:]{.underline}**
The SSRC field shall carry the SSRC of the participating MCVideo function.
The SSRC field shall be coded as specified in IETF RFC 3550 [3].
**[MCVideo Group ID:]{.underline}**
The MCVideo Group ID field is coded as described in clause 9.3.3.2.
### 9.3.6 Application Paging message
The Application Paging message is sent by the participating function when an
existing conversation is to be moved to unicast bearers or a new conversation
is to be started on unicast bearers.
Table 9.3.6-1 shows the content of the Application Paging message.
Table 9.3.6-1: Application Paging message
0 1 2 3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|V=2\|P\| Subtype \| PT=APP=204 \| length=3 \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| SSRC of participating MCVideo function \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| name=MCV3 \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| MCVideo Group ID \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
With the exception of the three first 32-bit words, the order of the fields is
irrelevant.
**[Subtype:]{.underline}**
The subtype shall be coded according to table 9.3.2-1.
**[Length:]{.underline}**
The length shall be coded as specified in clause 9.1.2.
**[SSRC:]{.underline}**
The SSRC field shall carry the SSRC of the participating MCVideo function.
The SSRC field shall be coded as specified in IETF RFC 3550 [3].
**[MCVideo Group ID:]{.underline}**
The MCVideo Group ID field is coded as described in clause 9.3.3.2.
### 9.3.7 Bearer Announcement message
The Bearer Announcement message is sent by the participating function on an
MBMS bearer for application control messages. It may be sent by the
participating function in order to achieve a faster setup of the MBMS bearer
Table 9.3.7-1 shows the content of the Bearer Announcement message.
Table 9.3.7-1: Bearer Announcement message
0 1 2 3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|V=2\|P\| Subtype \| PT=APP=204 \| length \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| name=MCMC \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| TMGI \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Alternative TMGI fields \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Monitoring State \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
With the exception of the three first 32-bit words and the internal order of
the TMGI field and the Alternative TMGI fields, the order of the fields is
irrelevant.
**[Subtype:]{.underline}**
The subtype shall be coded according to table 9.3.2-1.
**[Length:]{.underline}**
The length shall be coded as specified in clause 9.1.2.
**[TMGI:]{.underline}**
The TMGI field is coded as described in clause 9.3.3.4. This field is
mandatory.
**[Alternative TMGI:]{.underline}**
Zero or more alternative TMGI fields are coded as described in clause 9.3.3.4.
This field is coded immediately after the TMGI field.
**Monitoring State:**
The monitoring state field is coded as described in clause 9.3.3.5.
## 9.4 MBMS notifications
### 9.4.1 Introduction
The MBMS notifications messages shall be coded as described in clause 8.1.2
where the MBMS notifications message is part of the application-dependent
data.
For the MBMS notifications protocol the ASCII name string shall be: MCNC.
The list of MBMS notifications messages can be found in the clause 9.4.2.
The MBMS notifications specific fields are specified in clause 9.4.3.
### 9.4.2 MBMS notifications control messages
Table 9.4.2-1 provides a list of MBMS notifications protocol messages.
Table 9.4.2-1: MBMS notifications protocol messages
Message name Subtype Reference Direction
* * *
Group Dynamic Data Notify 00000 clause 9.4.4 Server client NOTE: The
participating MCVideo function is the server and the MCVideo client is the
client.
### 9.4.3 MBMS notifications control specific fields
#### 9.4.3.1 Introduction
This clause describes the MBMS notifications control specific data fields.
The MBMS notifications control specific data fields are contained in the
application-dependent data of the MBMS notifications control message. The MBMS
notifications control specific data fields follow the syntax specified in
clause 8.1.3.
Table 9.4.3.1-1 lists the available fields including the assigned Field ID.
Table 9.4.3.1-1: MBMS notifications control specific data fields
Field name Field ID Description
* * *
                                          Decimal    Binary
Status 000 00000000 Clause 9.4.3.2 Status changing MCVideo User Identity 001
00000001 Clause 9.4.3.3 Group call ongoing 002 00000010 Clause 9.4.3.4 Group
broadcast alias 003 00000011 Clause 9.4.3.5 Group regroup alias 004 00000100
Clause 9.4.3.6
#### 9.4.3.2 Status field
The Status field indicates the indication of the status of the group and also
includes the MCVideo ID of the user that last changed the status of the group.
Table 9.4.3.2-1 describes the coding of the Status field.
Table 9.4.3.2-1: Status field coding
0 1 2 3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|Status \|Status \| Status \|
\|field ID \|length \| \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
:User ID :
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
The \ value is a binary value and is set according to table
9.4.3.1-1.
The \ value is a binary value and shall have the value \'2\'
indicating the total length in octets of the \ value item.
The \ value is a 16 bit binary value where:
\'0\' emergency
\'1\' in-peril
All other values are reserved for future use.
#### 9.4.3.3 Status changing MCVideo User Identity field
The Status changing MCVideo User Identity field contains the MCVideo ID
identifying the Status changing MCVideo user.
Table 9.4.3.3-1 describes the coding of the Status changing MCVideo User
Identity field.
Table 9.4.3.3-1: Status changing MCVideo User Identity field coding
0 1 2 3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|Status changing\|Status changing\|Status changing MCVideo \|
\|MCVideo User \|MCVideo User \|User Identity \|
\|Identity field \|Identity length\| \|
\|ID \| \| \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ :
: (Padding) :
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
The \ value is a binary value
and shall be set according to table 9.4.3.1-1.
The \ value is a binary value
indicating the length in octets of the \ value item
except padding.
The \ value contains the MCVideo ID of
the Status changing MCVideo user. The \
value shall be coded as specified in the table 9.4.3.3-2. The MCVideo ID is
specified in 3GPP TS 24.379 [2].
Table 9.4.3.3-2: ABNF syntax of string values of the \ value
status-changing-mcvideo-user-identity = URI
If the length of the \ value is not (2
+ multiple of 4) bytes, the \ value
shall be padded to (2 + multiple of 4) bytes. The value of the padding bytes
should be set to zero. The padding bytes shall be ignored.
#### 9.4.3.4 Group call ongoing field
Table 9.4.3.4-1 describes the coding of the Monitoring State field.
Table 9.4.3.4-1: Group call ongoing field coding
0 1 2 3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|Group call \|length=1 \|Group call \|Spare \|
\|ongoing ID \| \|ongoing \| \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
The \ value is a binary value and shall be set
according to table 9.4.3.1-1.
The \ value is a binary value indicating the length in octets of the
\ value item and is set to \'1\'.
The \ value is a binary value where the following values
are defined:
\'0\' No Group call ongoing
\'1\' Group call ongoing
All other values are reserved for future use.
The spare bits are set to zero
#### 9.4.3.5 Group broadcast alias field
The Group broadcast alias field contains the URI identifying the Group
broadcast alias.
Table 9.4.3.5-1 describes the coding of the Group broadcast alias field.
Table 9.4.3.5-1: Group broadcast alias field coding
0 1 2 3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|Group Broadcast\|Group Broadcast\|Group Broadcast alias \|
\|alias field ID \|alias field \| \|
\| \|length \| \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ :
: (Padding) :
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
The \ value is a binary value and shall be set
according to table 9.4.3.1-1.
The \ value is a binary value indicating the
length in octets of the \ value item except padding.
The \ value contains the URI of the group broadcast
alias. The \ value shall be coded as specified in the
table 9.4.3.5-2. The group broadcast alias is specified in 3GPP TS 23.280
[23].
Table 9.4.3.5-2: ABNF syntax of string values of the \
value
group-broadcast-alias = URI
If the length of the \ value is not (2 + multiple of 4)
bytes, the \ value shall be padded to (2 + multiple of
4) bytes. The value of the padding bytes should be set to zero. The padding
bytes shall be ignored.
#### 9.4.3.6 Group regroup alias field
The Group regroup alias field contains the URI identifying the Group regroup
alias.
Table 9.4.3.6-1 describes the coding of the Group regroup alias field.
Table 9.4.3.6-1: Group regroup alias field coding
0 1 2 3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|Group regroup \|Group regroup \|Group regroup alias \|
\|alias field \|alias field \| \|
\|ID \|length \| \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ :
: (Padding) :
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
The \ value is a binary value and shall be set
according to table 9.4.3.1-1.
The \ value is a binary value indicating the
length in octets of the \ value item except padding.
The \ value contains the URI of the group regroup alias.
The \ value shall be coded as specified in the table
9.4.3.6-2. The Group regroup alias is specified in 3GPP TS 23.280 [23].
Table 9.4.3.6-2: ABNF syntax of string values of the \
value
group-regroup-alias = URI
If the length of the \ value is not (2 + multiple of 4)
bytes, the \ value shall be padded to (2 + multiple of 4)
bytes. The value of the padding bytes should be set to zero. The padding bytes
shall be ignored.
### 9.4.4 Group Dynamic Data Notify message
The Group Dynamic Data Notify message is sent by the participating function
when a conversation is started.
Table 9.4.4-1 shows the content of the Group Dynamic Data Notify message.
Table 9.4.4-1: Group Dynamic Data Notify message
0 1 2 3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\|V=2\|P\| Subtype\| PT=APP=204 \| Length \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| SSRC of participating MCVideo function \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| name=MCNC \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Status field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Status changing MCVideo User Identity field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| MCVideo Group ID field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Group call ongoing field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Group broadcast alias field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\| Group regroup alias field \|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
With the exception of the three first 32-bit words, the order of the fields
are irrelevant.
**[Subtype:]{.underline}**
The subtype shall be coded according to table 9.4.2-1.
**[Length:]{.underline}**
The length shall be coded as specified in clause 9.1.2.
**[SSRC:]{.underline}**
The SSRC field shall carry the SSRC of the participating MCVideo function.
The SSRC field shall be coded as specified in IETF RFC 3550 [3].
**[MC]{.underline}Video [Group ID]{.underline}**
The MCVideo Group ID field contains a SIP URI identifying the group that the
group dynamic is related to.
The MCVideo Group ID field is coded as the MCVideo Group Identity field
specified in clause 9.2.3.20.
**[Status:]{.underline}**
The Status field is coded as described in clause 9.4.3.2.
**Status changing MCVideo User Identity:**
The Status changing MCVideo User Identity is coded as described in clause
9.4.3.3.
**[Group call ongoing:]{.underline}**
The [Group call ongoing]{.underline} field is coded as described in clause
9.4.3.4.
**Group broadcast alias field:**
The Group broadcast alias field is coded as described in clause 9,4.3.5
**Group regroup alias field:**
The Group regroup alias field is coded as described in clause 9.4.3.6
# 10 Media plane handling for MBMS
## 10.1 General
A participating MCVideo function sending transmission control messages and RTP
media packets over a MBMS bearer shall support the procedures in the following
clauses.
The MBMS bearer can be used for transmissions in group calls. Prior to using
the MBMS bearer the participating MCVideo function needs to activate the MBMS
bearer and announce the MBMS bearer as described in clause 4.1.2.
Transmission control messages and RTP media packets received over the MBMS
subchannel are used as input to the Transmission participant state machine in
the same way as Transmission control messages and RTP media packets received
over the unicast bearer.
Media plane security procedures for media and Transmission control messages
sent over the MBMS subchannels are specified in clause 13.
The MCVideo function can apply FEC to the RTP media packets by generating
repair packets to be sent over the MBMS subchannel, or can ask to the BM-SC to
apply FEC, as described in 3GPP TS 23.280 [12].
## 10.2 MBMS subchannel control procedure for the participating MCVideo
function
### 10.2.1 General
If the participating MCVideo function supports the MBMS subchannel control
procedure, the participating MCVideo function shall support the behaviour
implied by the state machine specified in this clause. The specifications are
on the reception of transmission control messages from the controlling MCVideo
function, sending of transmission control messages and the
allocation/deallocation of MBMS subchannels for a transmission in a group
session.
Figure 10.2.1-1 shows the participating MCVideo function MBMS subchannel
control state diagram.
Figure 10.2.1-1: Participating MCVideo function MBMS subchannel control state
diagram
If a transmission control message or RTP media packet arrives in a state where
there are no procedures specified in the clauses below, the participating
MCVideo function shall discard the message.
### 10.2.2 State: \'Start-stop\'
#### 10.2.2.1 General
In this state:
\- no instance of the \'Participating MCVideo function MBMS subchannel control
state machine exists;
\- a pre-activated MBMS bearer may exist;
\- no transmission using a MBMS subchannel control is active but a group
session exists where a transmissionover the unicast channel may be ongoing;
and
\- the participating MCVideo function handles transmission control messages
and RTP media packets as for during normal operations described in clause 6.4.
#### 10.2.2.2 Send Map Group To Bearer message (R: Transmission Request, Media
Transmission Notification)
Upon receiving a Transmission Request message or a Media Transmission
Notification message and when the participating MCVideo function decides that
an MBMS subchannel shall be used for a transmissionin an ongoing group
session, the participating MCVideo function needs to determine if the MBMS
bearer has sufficient capacity for the new conversation. If the new MBMS
bearer has sufficient capacity the participating MCVideo function:
1\. shall create an instance of the \'Participating MCVideo function MBMS
subchannel control\' state machine;
2\. shall send a Map Group To Bearer message over the general purpose MBMS
subchannel. The Map Group To Bearer message:
a. shall include TMGI;
b. shall include the identifier of the media stream; and
c. shall include the MCVideo Group identifier field;
3\. shall start timer T300 (Transmission);
4\. shall start timer T302 (Unmap Group To Bearer);
5\. shall enter the \'M: A transmission is active\' state;
6\. if the Transmission Request message was received, shall perform actions as
described in clause 6.4.2; and
7\. if the Media Transmission Notification message was received, shall perform
the actions described in clause 10.2.3.3.
If the MBMS bearer does not have sufficient capacity for the new conversation
the participating MCVideo function:
1\. may free capacity for the new conversation by transfering an existing
conversation over an MBMS bearer to unicast bearers following the procedure in
clause 10.2.3.13; or
2\. may use the MBMS bearer for the signaling messages, while using unicast
bearers for the media message.
### 10.2.3 State: \'M: A transmission is active\'
#### 10.2.3.1 General
In this state a MBMS subchannel exists and can be used by a group call.
In this state a transmission is active and Media Transmission Notification and
Transmission Idle messages and RTP media packets shall be sent over the MBMS
subchannel.
In this state timer T300 (Transmission) and timer T301 (Map Group To Bearer
re-transmit) are running.
In this state the timer T302 (Unmap Group To Bearer) may be running.
#### 10.2.3.2 Send Transmission Idle message (R: Transmission Idle)
When a Transmission Idle message destined to a transmission participant
listening to the MBMS subchannel is received, the participating MCVideo
function:
1\. shall set the acknowledgment bit to \'0\' as specified in clause 9.2.2, if
not already set; and
2\. shall send the received Transmission Idle message over the MBMS
subchannel;
3\. if the received Transmission Idle message indicates that a Transmission
Ack message is expected (i.e. the acknowledgment bit is set to \'1\' as
specified in clause 9.2.2), shall send a Transmission Ack message towards the
controlling MCVideo function. The Transmission Ack message:
a. shall include the Message Type field set to \'15\' (Transmission Idle); and
b. shall include the Source field set to \'1\' (participating MCVideo function
is the source);
5\. shall restart timer T300 (Transmission); and
6\. shall remain in the \'M: A transmission is active\' state.
#### 10.2.3.3 Send Media Transmission Notification message (R: Media
Transmission Notification)
When a Media Transmission Notification message destined to a transmission
participant listening to the MBMS subchannel is received, the participating
MCVideo function:
1\. shall set the acknowledgment bit to \'0\' as specified in clause 9.2.2, if
not already set; and
2\. shall send the Media Transmission Notification message over the MBMS
subchannel; and
3\. if the received Media Transmission Notification message indicates that a
Transmission Ack message is expected (i.e. the acknowledgment bit is set to
\'1\' as specified in clause 9.2.2), shall send a Transmission Ack message
towards the controlling MCVideo function The Transmission Ack message:
a. shall include the Message Type field set to \'6\' (Media Transmission
Notification); and
b. shall include the Source field set to \'1\' (participating MCVideo function
is the source);
5\. shall restart timer T300 (Transmission); and
6\. shall remain in the \'M: A transmission is active\' state.
#### 10.2.3.4 Send any other transmission control message (R: Any other
message)
When a transmission control message other than the Media Transmission
Notification and Transmission Idle message is received from a transmission
participant or received from the transmission control server, the
participating MCPVideo function:
1\. shall forward the transmission control message as specified in clause 6.4;
2\. shall restart timer T300 (Transmission); and
3\. shall remain in the \'M: A transmission is active\' state.
#### 10.2.3.5 Send RTP media packet over the MBMS subchannel (R: RTP packet)
When receiving a RTP media packet destined to one of the MCVideo client
listening to the MBMS subchannel, the participating MCVideo function:
NOTE: An RTP media packet not destined to an MCVideo client listening to the
MBMS subchannel is forwarded to the MCVideo client over the unicast bearer.
1\. shall check if the media packet is already sent over the MBMS subchannel
or not;
2\. if the RTP media packet is already sent over the MBMS subchannel, shall
discard the RTP media packet;
3\. if the RTP media packet is not already sent over the MBMS sub channel,
shall instruct the media distribution function to send the RTP media packet
over the MBMS subchannel;
NOTE: if the media is protected by FEC and the FEC encoding is done by the
participation MCVideo function, the media distribution function encodes the
RTP media packet before delivery over the MBMS subchannel as specified in
clause 10.4.2.
4\. shall restart timer T300 (Transmission); and
5\. shall remain in the \'M: A transmission is active\' state.
#### 10.2.3.7 Timer T300 (Transmission) expired
Upon expiry of timer T300 (Transmission), the participating MCVideo function
shall:
1\. if the application indicates that there is no longer an MCVideo client
listening to the MBMS bearer,
a. shall release the instance of the \'Participating MCVideo function MBMS
subchannel management\' state machine used for the transmission; and
b. shall enter the \'Start-stop\' state; and
2\. if the application indicates that there are MCVideo client still listening
to the MBMS bearer:
a. shall send the Unmap Group To Bearer message over the MBMS subchannel. The
Unmap Group To Bearer message:
i. shall include the MCVideo Group ID field;
b. shall start timer T302 (Unmap Group To Bearer) and initialise counter C17
(Unmap Group To Bearer) to 1; and
c. shall remain in the \'M: A transmission is active\' state.
#### 10.2.3.8 Timer T301 (Map Group To Bearer) expired
Upon expiry of timer T301 (Map Group To Bearer), the participating MCVideo
function:
1\. shall send a Map Group To Bearer message over the general purpose MBMS
subchannel. The Map Group To Bearer message:
a. shall include a TMGI field;
b. shall include a MBMS Subchannel field; and
c shall include the MCVideo Group identifier field;
2\. shall restart timer T301 (Map Group To Bearer); and
3\. shall remain in the \'M: A transmission is active\' state.
#### 10.2.3.9 Timer T302 (Unmap Group To Bearer) expired
Upon expiry of timer T302 (Unmap Group To Bearer) less than the upper limit of
counter C17 (Unmap Group To Bearer) times, the participating MCVideo function:
1\. shall send the Unmap Group To Bearer message over the MBMS subchannel. The
Unmap Group To Bearer message:
a. shall include the MCVideo Group ID field; and
2\. shall restart the timer T302 (Map Group To Bearer re-transmit) and
increment counter C17 (Unmap Group To Bearer) by 1.
#### 10.2.3.10 Timer T302 (Unmap Group To Bearer) expired Nth time
Upon expiry of timer T302 (Unmap Group To Bearer) by the upper limit of
counter C17 (Unmap Group To Bearer), the participating MCVideo function:
1\. shall send the Unmap Group To Bearer message over the MBMS subchannel. The
Unmap Group To Bearer message:
a. shall include the MCVideo Group ID field; and
2\. shall release the instance of the \'Participating MCVideo function MBMS
subchannel management\' state machine used for the transmission.
#### 10.2.3.11 End transmission over the MBMS bearer (End transmission)
Upon receiving an indication from the application and signalling plane that
all MCVideo clients now listens to the unicast channel, the participating
MCVideo function:
1\. shall release the instance of the \'Participating MCVideo function MBMS
subchannel management\' state machine used for the transmission.
#### 10.2.3.12 Group call released
If the control and signalling plane indicates that the group call session is
released, the participating MCVideo function:
1\. shall send the Unmap Group To Bearer message over the MBMS subchannel. The
Unmap Group To Bearer message:
a. shall include the MCVideo Group ID field;
2\. shall stop timer T300 (Transmission), timer T301 (Map Group To Bearer) and
timer T302 (Unmap Group To Bearer), if running; and
3\. shall release the instance of the \'Participating MCVideo function MBMS
subchannel management\' state machine used for the transmission.
#### 10.2.3.13 Move conversation to unicast
If the participating MCVideo server decides that an ongoing conversation over
an MBMS bearer shall start using unicast bearers, the pariticpating MCVideo
function may send an Application Paging message over the MBMS subchannel
associated with this converstation.
NOTE: The Application Paging message can be sent at the same time as the
conversation is started using unicast bearers, this will improve the MCVideo
access time since the Application Paging message in most cases will reach the
client quicker than using normal paging procedures.
## 10.3 MBMS subchannel control procedure for the MCVideo client
### 10.3.1 General
An MCVideo client that supports receiving transmission control messages and
RTP media packets over an MBMS bearer shall support the procedures in the
following clauses.
The procedures in the following clauses assume that an MBMS bearer is active
and announced as described in clause 4.1.2.
### 10.3.2 Transmission over a pre-activated MBMS bearer is started
When receiving a Map Group To Bearer message over the general purpose MBMS
subchannel, the MBMS interface in the MCVideo client:
1\. shall associate the TMGI in the TMGI field, the MBMS subchannels for
video, audio, transmission control and FEC with the MCVideo group identity in
the MCVideo Group ID field.
2\. if the video and audio media are protected by FEC, as declared within the
MBMS bearer announcement (3GPP TS 24.281 [2]), shall instantiate a FEC decoder
for this subchannel as specified in suclause 8.2.2 of 3GPP TS 26.346 [13].
### 10.3.3 Receive transmission control messages, RTP media packets and FEC
repair packets over a MBMS subchannel
If the MBMS interface receives RTP media packets or transmission control
messages over the MBMS subchannel, the MBMS interface in the MCVideo client:
1\. if there is an association between the TMGI and the MBMS subchannels to an
ongoing transmission in a group session:
a. shall forward the received transmission control messages to the
transmission participant in the transmission; and
b. if the media is protected by FEC, shall forward the RTP media packet to the
FEC decoder as specified in 10.4.3;
c. if the media is not protected by FEC, shall forward the RTP media packet to
the media mixer.
d. shall forward the FEC repair packet to the FEC decoder.
2\. if there is no such association:
a. shall ignore the received transmission control message or received RTP
media packet.
### 10.3.4 Transmission ended
When receiving the Unmap Group To Bearer message over a MBMS subchannel, the
MBMS interface in the MCVideo client:
1\. shall remove the association between the TMGI, the MBMS subchannels from
the transmission in the group session identified by the MCVideo Group ID
field, if such an association exists.
### 10.3.5 Receive Application Paging message
When receiving an Application Paging message over an MBMS subchannel, an
MCVideo client in idle mode shall make a service request to enter RRC
Connected mode.
### 10.3.6 Receive MBMS bearer announcement over MBMS bearer
When receiving an MBMS bearer announcement message over an MBMS subchannel, an
MCVideo client shall acknowledge this message by sending an MBMS bearer
listening status report as as specified in 3GPP TS 24.379 [2] clause 14.2.3.
## 10.4 Forward error correction
### 10.4.1 General
Video and audio RTP media packets delivered over a MBMS subchannel can be
protected against loss by the application of FEC.
NOTE: In the current release, the FEC encoding can only be done within the
participation MCVideo function, according to procedure 10.7.3.11.3 of 3GPP TS
23.280 [12].
FEC encoding is done after media plane encryption and FEC decoding is done
before media plane decryption.
### 10.4.2 Participating MCVideo function procedure for FEC
If the participating MCVideo function decides to apply FEC to protect a given
MBMS subchannel, the participating MCVideo function:
1) shall declare the usage of FEC within the MBMS bearer announcement, as
specified in 3GPP TS 24.281 [2];
2) if the participating MCVideo function does the FEC encoding,
a) the participating MCVideo function shall encode video and audio RTP packets
as specified in clause 8.2.2.4 of 3GPP TS 26.346 [13] before sending them over
the MBMS subchannel;
b) shall generate repair packets according the mechanism specified in clause
8.2.2 of 3GPP TS 26.346 [13] with the UDP flow identity for video set to 1 and
the UDP flow identity for audio set to 2; and
c) send these repair packets over the MBMS subchannel on the destination port
given into the Map Group To Bearer message.
### 10.4.3 MCVideo client procedure for FEC
If usage of FEC is declared within the MBMS bearer announcement, as specified
in 3GPP TS 24.281 [2], the MC Video client:
1) shall decode the received video and audio RTP packets according the
mechanism specified in clause 8.2.2 of 3GPP TS 26.346 [13] with the UDP flow
identity for video set to 1 and the UDP flow identity for audio set to 2;
and2) shall forward the decoded RTP media packets to the media mixer.
## 10.5 Additional MBMS procedures
## 10.5.1 Group dynamic data notifications
Prior to using the MBMS bearer the participating MCVideo function needs to
activate the MBMS bearer and announce the MBMS bearer as described in clause
4.1.2.1. The participating MCVideo function uses the listening status reports
to decide for which users the participating MCVideo function sends the group
dynamic data notifications over MBMS, and for which users the participating
MCVideo function continues to use unicast bearers.
This procedure is used when MCVideo clients subscribe to group dynamic data.
When the terminating participating function receives a SIP NOTIFY request
towards a user listening to the MBMS subchannel that comes from the
controlling MCVideo function and is related to a subscription for group
dynamic data, the participating MCVideo function shall:
1\. respond to the SIP NOTIFY request with a SIP 200 (OK) request;
2\. map the information in the SIP NOTIFY request to the information elements
in clause 9.4.3; and
3\. send the Group Dynamic Data Notify message over the MBMS bearer.
# 11 Configurable parameters
## 11.1 Timers
### 11.1.1 Timers in the on-network transmission participant
The table 11.1.1-1 recommends timer values, describes the reason for starting
the timer, normal stop and the action on expiry for the on-network
transmission participant procedures.
Table 11.1.1-1: Timers in the on-network transmission participant
+-------------+-------------+-------------+-------------+-------------+ | Timer | Timer value | Cause of | Normal stop | On expiry | | | | start | | | +=============+=============+=============+=============+=============+ | T100 | C | When the | Reception | If the | | | onfigurable | t | of a | counter is | | (T | as | ransmission | T | less than | | ransmission | specified | participant | ransmission | the upper | | Request) | in | sends a | Granted | limit of | | | 3GPP TS 24 | T | message, a | C100, a new | | | .483 [6]. | ransmission | T | T | | | | Request | ransmission | ransmission | | | (NOTE 1) | message. | Rejected | Request | | | | | message, a | message is | | | | T100 is | T | sent and | | | | also | ransmission | counter is | | | | started | Queue | incremented | | | | when the | Position | by 1. | | | | application | Info | | | | | layer and | message. | When the | | | | signalling | | limit in | | | | plane | | C100 is | | | | initiates a | | reached, | | | | session as | | the | | | | an implicit | | t | | | | t | | ransmission | | | | ransmission | | participant | | | | request | | stops | | | | using the | | sending the | | | | \"m | | T | | | | c_implicit | | ransmission | | | | _request\" | | Request | | | | as | | message. | | | | specified | | | | | | in | | | | | | clause 14. | | | +-------------+-------------+-------------+-------------+-------------+ | T101 | C | When the | Reception | If the | | | onfigurable | t | of a | counter is | | (Tran | as | ransmission | T | less than | | smissionEnd | specified | participant | ransmission | the upper | | request) | in | sends a | end | limit of | | | 3GPP TS 24 | T | response | C101, a new | | | .483 [6]. | ransmission | message. | T | | | | end request | | ransmission | | | (NOTE 2) | message. | | end request | | | | | | message is | | | | | | sent and | | | | | | counter is | | | | | | incremented | | | | | | by 1. | | | | | | | | | | | | When the | | | | | | limit in | | | | | | C101 is | | | | | | reached, | | | | | | the | | | | | | t | | | | | | ransmission | | | | | | participant | | | | | | stops | | | | | | sending the | | | | | | T | | | | | | ransmission | | | | | | end request | | | | | | message. | +-------------+-------------+-------------+-------------+-------------+ | T102 | C | When the | Reception | If the | | (T | onfigurable | t | of a | counter is | | ransmission | as | ransmission | T | less than | | Queue | specified | participant | ransmission | the upper | | Position | in | sends a | Queue | limit of | | Request) | 3GPP TS 24 | T | Position | C102, a new | | | .483 [6]. | ransmission | Info. | T | | | | Queue | | ransmission | | | T102 shall | Position | Leaving the | Queue | | | only permit | Request | \'U: queued | Position | | | a certain | message. | tra | Request | | | number of | | nsmission\' | message is | | | retr | | state on | sent and | | | ansmissions | | reception | counter is | | | of the | | of | incremented | | | T | | T | by 1. | | | ransmission | | ransmission | | | | Queue | | Granted | When the | | | Position | | message. | limit in | | | Request | | | C102 is | | | message. | | | reached, | | | | | | the | | | | | | t | | | | | | ransmission | | | | | | participant | | | | | | stops | | | | | | sending the | | | | | | T | | | | | | ransmission | | | | | | Queue | | | | | | Position | | | | | | Request | | | | | | message. | +-------------+-------------+-------------+-------------+-------------+ | T103 | C | When the | Reception | If the | | (Receive | onfigurable | t | of Receive | counter is | | Media | as | ransmission | Media | less than | | Request) | specified | participant | Response | the upper | | | in | sends a | (Granted or | limit of | | | 3GPP TS 24 | Receive | Rejected) | C103, a new | | | .483 [6]. | Media | message. | Receive | | | | Request | | Media | | | (NOTE 3) | message. | | Request | | | | | | message is | | | | | | sent and | | | | | | counter is | | | | | | incremented | | | | | | by 1. | | | | | | | | | | | | When the | | | | | | limit in | | | | | | C105 is | | | | | | reached, | | | | | | the | | | | | | t | | | | | | ransmission | | | | | | participant | | | | | | stops | | | | | | sending the | | | | | | Receive | | | | | | Media | | | | | | Request | | | | | | message. | +-------------+-------------+-------------+-------------+-------------+ | T104 | C | When the | Reception | If the | | (Receive | onfigurable | t | of Media | counter is | | Media | as | ransmission | Reception | less than | | Release) | specified | participant | End | the upper | | | in | sends a | Response | limit of | | | 3GPP TS 24 | Media | message. | C104, a new | | | .483 [6]. | Reception | | Media | | | | End Request | | Reception | | | (NOTE 4) | message. | | End Request | | | | | | message is | | | | | | sent and | | | | | | counter is | | | | | | incremented | | | | | | by 1. | | | | | | | | | | | | When the | | | | | | limit in | | | | | | C104 is | | | | | | reached, | | | | | | the | | | | | | t | | | | | | ransmission | | | | | | participant | | | | | | stops | | | | | | sending the | | | | | | Media | | | | | | Reception | | | | | | End Request | | | | | | message. | +-------------+-------------+-------------+-------------+-------------+ | NOTE 1: The | | | | | | total time | | | | | | during | | | | | | which the | | | | | | t | | | | | | ransmission | | | | | | participant | | | | | | retransmits | | | | | | T | | | | | | ransmission | | | | | | Request | | | | | | messages | | | | | | should be | | | | | | less than 6 | | | | | | seconds. | | | | | | | | | | | | NOTE 2: The | | | | | | total time | | | | | | during | | | | | | which the | | | | | | t | | | | | | ransmission | | | | | | participant | | | | | | retransmits | | | | | | T | | | | | | ransmission | | | | | | end request | | | | | | messages | | | | | | should be | | | | | | less than 6 | | | | | | seconds. | | | | | | | | | | | | NOTE 3: The | | | | | | total time | | | | | | during | | | | | | which the | | | | | | t | | | | | | ransmission | | | | | | participant | | | | | | retransmits | | | | | | Receive | | | | | | Media | | | | | | Request | | | | | | messages | | | | | | should be | | | | | | less than 6 | | | | | | seconds. | | | | | | | | | | | | NOTE 4: The | | | | | | total time | | | | | | during | | | | | | which the | | | | | | t | | | | | | ransmission | | | | | | participant | | | | | | retransmits | | | | | | Media | | | | | | Reception | | | | | | End Request | | | | | | messages | | | | | | should be | | | | | | less than 6 | | | | | | seconds. | | | | | +-------------+-------------+-------------+-------------+-------------+
### 11.1.2 Timers in the off-network transmission participant
The table 11.1.2-1 recommends timer values, describes the reason for starting
the timer, normal stop and the action on expiry for the off-network
transmission participant procedures.
Table 11.1.2-1: Timers in the off-network transmission participant
+-------------+-------------+-------------+-------------+-------------+ | Timer | Timer value | Cause of | Normal stop | On expiry | | | | start | | | +=============+=============+=============+=============+=============+ | T201 | Default | When the | Reception | If the | | | value: | t | of a | counter is | | (T | | ransmission | T | less than | | ransmission | 40 | participant | ransmission | the upper | | Request) | m | sends a | Granted | limit of | | | illiseconds | T | message or | C201, a new | | | | ransmission | a | T | | | Depends on | Request | T | ransmission | | | the | message | ransmission | Request | | | cha | | Deny | message is | | | racteristic | | message or | sent and | | | of the D2D. | | when the | counter is | | | (D2D Side | | MCVideo | incremented | | | link | | user | by 1. | | | period) | | releases | | | | | | the | When the | | | Co | | tr | limit in | | | nfigurable. | | ansmission. | C201 is | | | | | | reached, | | | Set to the | | | the | | | value of | | | t | | | \"/\/Of | | | ransmission | | | fNetwork/Ti | | | participant | | | mers/T201\" | | | stops | | | leaf node | | | sending the | | | present in | | | T | | | the UE | | | ransmission | | | initial | | | Request | | | co | | | message. | | | nfiguration | | | | | | as | | | | | | specified | | | | | | in | | | | | | 3GPP TS 2 | | | | | | 4.483 [6] | | | | | | | | | | | | T201 shall | | | | | | permit only | | | | | | a certain | | | | | | number of | | | | | | retr | | | | | | ansmissions | | | | | | of the | | | | | | T | | | | | | ransmission | | | | | | Request | | | | | | message. | | | | +-------------+-------------+-------------+-------------+-------------+ | T203 | Default | T203 is | Reception | When T203 | | | value: | reset and | of a | expires the | | (End of RTP | | started | T | t | | media) | 4 seconds. | again every | ransmission | ransmission | | | | time an RTP | Release | participant | | | Co | media | message | concludes | | | nfigurable. | packet is | | that the | | | | received. | | t | | | Set to the | | | ransmission | | | value of | | | from the | | | \"/\/Of | | | associated | | | fNetwork/Ti | | | t | | | mers/T203\" | | | ransmission | | | leaf node | | | participant | | | present in | | | is lost. | | | the UE | | | | | | initial | | | | | | co | | | | | | nfiguration | | | | | | as | | | | | | specified | | | | | | in | | | | | | 3GPP TS 24 | | | | | | .483 [6]. | | | | +-------------+-------------+-------------+-------------+-------------+ | T205 | Default | When the | Reception | If the | | (T | value: | t | of an RTP | counter is | | ransmission | | ransmission | media | less than | | Granted) | 80 | arbitrator | packet from | the upper | | | mi | grants the | granted | limit of | | | lliseconds. | permission | t | C205, a new | | | | to send | ransmission | T | | | Depends on | media to a | participant | ransmission | | | the | t | | Granted | | | cha | ransmission | | message is | | | racteristic | p | | sent and | | | of the D2D. | articipant. | | counter is | | | (D2D | | | incremented | | | Sidelink | | | by 1. | | | period*2). | | | | | | | | | When the | | | Co | | | limit in | | | nfigurable. | | | C205 is | | | | | | reached, | | | Set to the | | | the | | | value of | | | t | | | \"/\/Of | | | ransmission | | | fNetwork/Ti | | | arbitrator | | | mers/T205\" | | | stops | | | leaf node | | | sending the | | | present in | | | T | | | the UE | | | ransmission | | | initial | | | Granted | | | co | | | message. | | | nfiguration | | | | | | as | | | | | | specified | | | | | | in | | | | | | 3GPP TS 24 | | | | | | .483 [6]. | | | | | | | | | | | | T205 shall | | | | | | permit only | | | | | | a certain | | | | | | number of | | | | | | retr | | | | | | ansmissions | | | | | | of the | | | | | | T | | | | | | ransmission | | | | | | Granted | | | | | | message. | | | | +-------------+-------------+-------------+-------------+-------------+ | Timer T206 | Default | When the | When the | Start timer | | (Stop | value: | MCVideo | MCVideo | T207 (Stop | | talking | | client | user | talking) | | warning) | 27 seconds. | starts | releases | | | | | sending the | the | | | | Co | RTP media | tr | | | | nfigurable. | packets. | ansmission. | | | | | | | | | | Set to X-Y, | | | | | | where X is | | | | | | the value | | | | | | of | | | | | | \"/\ | | | | | | /OffNet | | | | | | work/Transm | | | | | | itTimeout\" | | | | | | and Y is | | | | | | the value | | | | | | \"/\ | | | | | | /OffNetwork | | | | | | /Transmissi | | | | | | onWarning\" | | | | | | of leaf | | | | | | nodes | | | | | | present in | | | | | | the UE | | | | | | service | | | | | | co | | | | | | nfiguration | | | | | | as | | | | | | specified | | | | | | in | | | | | | 3GPP TS 24 | | | | | | .483 [6]. | | | | +-------------+-------------+-------------+-------------+-------------+ | Timer T207 | Default | Expiry of | When the | Release the | | (Stop | value: | timer T206 | MCVideo | tr | | talking) | | (Stop | user | ansmission. | | | 3 seconds. | talking | releases | | | | | warning) | the | | | | Co | | tr | | | | nfigurable. | | ansmission. | | | | | | | | | | Set to the | | | | | | value of | | | | | | \"/\ | | | | | | /OffNetwork | | | | | | /Transmissi | | | | | | onWarning\" | | | | | | leaf node | | | | | | present in | | | | | | the service | | | | | | co | | | | | | nfiguration | | | | | | as | | | | | | specified | | | | | | in | | | | | | 3GPP TS 24 | | | | | | .483 [6]. | | | | +-------------+-------------+-------------+-------------+-------------+ | Timer T208 | Default | When the | - | If the | | (T | value: | t | | counter is | | ransmission | | ransmission | | less than | | Arbitration | 3 seconds. | participant | | the upper | | Release) | | enters \'O: | | limit of | | | Co | pending | | C208, a new | | | nfigurable. | delegated\' | | T | | | | state. | | ransmission | | | | | | Arbitration | | | | | | Release | | | | | | message is | | | | | | sent and | | | | | | counter is | | | | | | incremented | | | | | | by 1. | | | | | | | | | | | | When the | | | | | | limit in | | | | | | C208 is | | | | | | reached, | | | | | | the | | | | | | t | | | | | | ransmission | | | | | | arbitrator | | | | | | stops | | | | | | sending the | | | | | | T | | | | | | ransmission | | | | | | Arbitration | | | | | | Release | | | | | | message | | | | | | message. | +-------------+-------------+-------------+-------------+-------------+ | T230 | Default | When the | A | The | | | value: | t | t | t | | ( | | ransmission | ransmission | ransmission | | Inactivity) | 600 | participant | control | control | | | seconds. | enters \'O: | message or | entity is | | | | silence\' | media is | released. | | | Co | state. | received. | | | | nfigurable. | | | | | | | | | | | | For group | | | | | | calls: | | | | | | | | | | | | Set to the | | | | | | value of | | | | | | \"/ | | | | | | \/\ | | | | | | /OffNetwork | | | | | | /HangTime\" | | | | | | leaf node | | | | | | present in | | | | | | the group | | | | | | co | | | | | | nfiguration | | | | | | as | | | | | | specified | | | | | | in | | | | | | 3GPP TS 24 | | | | | | .483 [6]. | | | | | | | | | | | | For private | | | | | | calls: | | | | | | | | | | | | Set to the | | | | | | value of | | | | | | \"/\/ | | | | | | OffNetwork/ | | | | | | PrivateCall | | | | | | /HangTime\" | | | | | | leaf node | | | | | | present in | | | | | | the service | | | | | | co | | | | | | nfiguration | | | | | | as | | | | | | specified | | | | | | in | | | | | | 3GPP TS 24 | | | | | | .483 [6]. | | | | +-------------+-------------+-------------+-------------+-------------+
### 11.1.3 Timers in the transmission control server
The table 11.1.3-1 recommends timer values, describes the reason for starting
the timer, normal stop and the action on expiry for the transmission control
server procedures.
Table 11.1.3-1: Timers in the transmission control server.
+-------------+-------------+-------------+-------------+-------------+ | Timer | Timer value | Cause of | Normal stop | On expiry | | | | start | | | +=============+=============+=============+=============+=============+ | T1 | Default | When the | A | The MCVideo | | | value: | t | t | call is | | ( | | ransmission | ransmission | released. | | Inactivity) | 30 seconds. | control | participant | | | | | server | requests | | | | Co | enters the | the | | | | nfigurable. | \'G: | permission | | | | | \'Transmit | to send | | | | For private | idle\' | media. | | | | calls: | state. | | | | | Obtained | | | | | | from the | | | | | | \ | | | | | | element of | | | | | | the | | | | | | \ | | | | | | element in | | | | | | 3GPP TS 24. | | | | | | 484 [13]. | | | | | | | | | | | | For group | | | | | | calls: | | | | | | | | | | | | Obtained | | | | | | from the | | | | | | \ | | | | | | element of | | | | | | the | | | | | | \ | | | | | | element in | | | | | | 3GPP TS 24. | | | | | | 481 [12]. | | | | +-------------+-------------+-------------+-------------+-------------+ | T2 | Depends on | The | The stop | When T7 | | | the | t | can be | expire the | | (T | cha | ransmission | supervised | t | | ransmission | racteristic | of a | by a timer | ransmission | | Idle) | of the | T | (out of | control | | | radio | ransmission | scope of | server | | | access | Idle | this | sends | | | network. | message to | spec | another | | | | the | ification). | T | | | Co | t | | ransmission | | | nfigurable. | ransmission | | Idle | | | | p | | message to | | | Obtained | articipants | | the | | | from the | in the | | t | | | \ | | | rticipants. | | | element of | | | | | | the | | | | | | \ | | | | | | element of | | | | | | the | | | | | | \ | | | | | | element in | | | | | | 3GPP TS 24. | | | | | | 484 [13]. | | | | +-------------+-------------+-------------+-------------+-------------+ | T3 | Default | A | Reception | Send | | | value: | T | of a | another | | (T | | ransmission | T | T | | ransmission | 1 second. | Revoke | ransmission | ransmission | | Revoke) | | message is | Release | Revoke | | | Co | sent to a | message | message to | | | nfigurable. | t | from the | the | | | | ransmission | revoked | t | | | Obtained | participant | t | ransmission | | | from the | who has the | ransmission | participant | | | \ | media. | | T3 again. | | | element of | | | | | | the | | | | | | \ | | | | | | element of | | | | | | the | | | | | | \ | | | | | | element in | | | | | | 3GPP TS 24. | | | | | | 484 [13]. | | | | +-------------+-------------+-------------+-------------+-------------+ | T4 | Default | When the | Sending of | When T4 | | (T | value: | t | an RTP | expires, a | | ransmission | | ransmission | Media | new | | Granted) | 1 second. | control | packet or | T | | | | server | when the | ransmission | | | Co | grants the | MCVideo | Granted | | | nfigurable. | permission | client is | message is | | | | to send | losing its | sent. | | | Obtained | media to a | permission | | | | from the | t | to send | | | | \ | articipant, | | | | | element of | which was | | | | | the | queued and | | | | | \ | negotiated | | | | | element of | queueing. | | | | | the | | | | | | \ | started | | | | | element in | again when | | | | | 3GPP TS 24 | the | | | | | .484 [13] | t | | | | | | ransmission | | | | | | control | | | | | | server | | | | | | sends a | | | | | | T | | | | | | ransmission | | | | | | Granted | | | | | | message | | | | | | upon T4 | | | | | | expiry. | | | +-------------+-------------+-------------+-------------+-------------+ | T5 | Default | When the | A | The MCVideo | | | value: | t | t | call is | | (Reception | | ransmission | ransmission | released. | | Inactivity) | 30 seconds. | control | participant | | | | | server | requests | | | | Co | enters the | the | | | | nfigurable. | \'G: | permission | | | | | \'Reception | to receive | | | | For private | idle\' | media. | | | | calls: | state. | | | | | Obtained | | | | | | from the | | | | | | \ | | | | | |  | | | | | | element of | | | | | | the | | | | | | \ | | | | | | element in | | | | | | 3GPP TS 24. | | | | | | 484 [13]. | | | | | | | | | | | | For group | | | | | | calls: | | | | | | | | | | | | Obtained | | | | | | from the | | | | | | \ | | | | | | element of | | | | | | the | | | | | | \ | | | | | | element in | | | | | | 3GPP TS 24. | | | | | | 481 [12]. | | | | +-------------+-------------+-------------+-------------+-------------+ | T6 | Default | When the | Reception | When T6 | | (Reception | value: | t | of an RTP | expires, a | | Granted) | | ransmission | Media | new | | | 1 second. | control | packet or | Reception | | | | server | when the | Granted | | | Co | grants the | MCVideo | message is | | | nfigurable. | permission | client is | sent. | | | | to receive | losing its | | | | Obtained | media to a | permission | | | | from the | t | to | | | | \ | articipant, | | | | | element of | which was | | | | | the | queued and | | | | | \ | negotiated | | | | | element of | queueing. | | | | | the | | | | | | \ | started | | | | | element in | again when | | | | | 3GPP TS 24 | the | | | | | .484 [13] | t | | | | | | ransmission | | | | | | control | | | | | | server | | | | | | receives a | | | | | | T | | | | | | ransmission | | | | | | Granted | | | | | | message | | | | | | upon T6 | | | | | | expiry. | | | +-------------+-------------+-------------+-------------+-------------+ | T11 (Stream | Default | Reception | Reception | When T11 | | Reception | value: | of Receive | of Receive | expires, | | Idle) | | Media End | Media | t | | | 10 second. | Reque | Request | ransmitting | | | | st/Response | [granted] | stream will | | | Co | from | message | be | | | nfigurable. | MCVideo | from | terminated. | | | | client or | arbitration | | | | | when server | logic. | | | | | sends Media | | | | | | T | | | | | | ransmission | | | | | | N | | | | | | otification | | | | | | to MCVideo | | | | | | client. | | | +-------------+-------------+-------------+-------------+-------------+
### 11.1.4 Timers in the participating MCVideo function
The table 11.1.4-1 recommends timer values, describes the reason for starting
the timer, normal stop and the action on expiry.
Table 11.1.4-1 shows the timers used in the participating MCVideo function for
MBMS channel control.
Table 11.1.4-1: Timers in the participating MCVideo function for MBMS channel
control.
+-------------+-------------+-------------+-------------+-------------+ | TIMER | TIMER VALUE | CAUSE OF | NORMAL STOP | ON EXPIRY | | | | START | | | +=============+=============+=============+=============+=============+ | T300 | Default | T | Release of | Send Unmap | | (Tr | value: | ransmission | the call. | Group To | | ansmission) | | of Map | | Bearer | | | 30 seconds. | Group To | | message. | | | | Bearer | | | | | Co | message. | | | | | nfigurable. | | | | | | | Restarted | | | | | | when an RTP | | | | | | packet or a | | | | | | t | | | | | | ransmission | | | | | | control | | | | | | message is | | | | | | sent. | | | +-------------+-------------+-------------+-------------+-------------+ | T301 (Map | Default | T | Release of | Send Map | | Group To | value: | ransmission | the call | Group To | | Bearer) | | of Map | (or MBMS | Bearer | | | 500 | Group To | S | message. | | | mi | Bearer | ubchannel). | | | | lliseconds. | message. | | | | | | | | | | | Co | | | | | | nfigurable. | | | | +-------------+-------------+-------------+-------------+-------------+ | T303 (Unmap | Default | T | Release of | Send Unmap | | Group To | value: | ransmission | the call. | Group To | | Bearer) | | of Unmap | | Bearer | | | 200 | Group To | | message. | | | mi | Bearer | | | | | lliseconds. | message. | | | | | | | | | | | Co | | | | | | nfigurable. | | | | +-------------+-------------+-------------+-------------+-------------+
Editor\'s Note: How these timers are configured, e.g. within TS 24.484 or
24.483 is FFS.
## 11.2 Counters
### 11.2.1 Counters in the on-network transmission participant
Table 11.2.1-1 enlists counters, their limits and the action on expiry.
Table 11.2.1-1: Counter used in the transmission participant for on-network
transmission control
Counter Limit Associated timer On reaching the limit
* * *
C100 (Transmission Request) Default value: 3 T100 (Transmission Request)
Transmission Request message is no more repeated C101 (Transmission End
Request) Default value: 3 T101 (Transmission End Request) Transmission End
Request message is no more repeated C102 (Transmission Queue Position Request)
Default value: 3 T102 (Transmission Queue Position Request) Transmission Queue
Position Request message is no more repeated C103 (Receive Media Request)
Default value: 3 T103 (Receive Media Request) Receive Media Request message is
no more repeated C104 (Receive Media Release Default value: 3 T104 (Receive
Media Release) Media Reception End Request message is no more repeated.
### 11.2.2 Counters in the off-network transmission participant
The table 11.2.2-1 lists the counters used by the off-network participant,
their default upper limits and the action to take upon reaching the upper
limit. The counters start at 1.
Table 11.2.2-1: Counter used in the transmission participant for off-network
transmission control
+----------------+----------------+----------------+----------------+ | Counter | Limit | Associated | On reaching | | | | timer | the limit | +================+================+================+================+ | C201 | Default value: | T201 | Assume there | | | 3. | (Transmission | is no | | (Transmission | | Request) | transmission | | Request) | Configurable. | | arbitrator and | | | | | send | | | Set to the | | Transmission | | | value of | | Arbitration | | | \"/\/OffNetwork/C | | | | | ounters/C201\" | | | | | leaf node | | | | | present in the | | | | | UE initial | | | | | configuration | | | | | as specified | | | | | in | | | | | 3GPP TS | | | | | 24.483 [6]. | | | +----------------+----------------+----------------+----------------+ | C205 | Default value: | T205 | Stop sending | | (Transmission | 4. | (Transmission | Transmission | | Granted) | | Granted) | Granted | | | Configurable. | | message | | | | | | | | Set to the | | | | | value of | | | | | \"/\/OffNetwork/C | | | | | ounters/C205\" | | | | | leaf node | | | | | present in the | | | | | UE initial | | | | | configuration | | | | | as specified | | | | | in | | | | | 3GPP TS | | | | | 24.483 [6]. | | | +----------------+----------------+----------------+----------------+ | C208 | Default value: | T208 | Stop sending | | (Transmission | 4. | (Transmission | Transmission | | Arbitration | | Arbitration | Arbitration | | Release) | Configurable. | Release) | Release | | | | | message | | | Set to the | | | | | value of | | | | | \"/\/OffNetwork/C | | | | | ounters/C208\" | | | | | leaf node | | | | | present in the | | | | | UE initial | | | | | configuration | | | | | as specified | | | | | in | | | | | 3GPP TS | | | | | 24.483 [6]. | | | +----------------+----------------+----------------+----------------+
### 11.2.3 Counters in the controlling MCVideo function
The table 11.2.3-1 enlists counters, their limits and the action on expiry for
the \'general control operation\' state machine in the controlling MCVideo
function.
Table 11.2.3-1: Counters used in the \'general transmission control
operation\' state machine
+----------------+----------------+----------------+----------------+ | Counter | Limit | Associated | On reaching | | | | timer | the limit | +================+================+================+================+ | C2 | Default value: | T2 | The | | | 10. | (Transmission | Transmission | | (Transmission | | Idle) | Idle message | | Idle) | Configurable. | | is no more | | | | | re-send | | | Obtained from | | | | | the | | | | | \ | | | | | element of the | | | | | \ | | | | | element of the | | | | | \ | | | | | element in | | | | | 3GPP TS | | | | | 24.484 [13]. | | | +----------------+----------------+----------------+----------------+ | C4 | Default value: | T4 | The | | | 3. | (Transmission | Transmission | | (Transmission | | Granted) | Granted | | Granted) | Configurable. | | message is no | | | | | more re-send | | | Obtained from | | in case a | | | the | | queued | | | \ | | participant is | | | element of the | | granted the | | | \ | | | | | element of the | | | | | \ | | | | | element in | | | | | 3GPP TS | | | | | 24.484 [13]. | | | +----------------+----------------+----------------+----------------+ | C6 | Default value: | T6 (Reception | The Reception | | | 3. | Granted) | Granted | | (Reception | | | message is no | | Granted) | Configurable. | | more re-send | | | | | in case a | | | Obtained from | | queued | | | the | | transmission | | | \ | | granted the | | | element of the | | reception of | | | \ | | | | | element of the | | | | | \ | | | | | element in | | | | | 3GPP TS | | | | | 24.484 [13]. | | | +----------------+----------------+----------------+----------------+ | C7 (Reception | Default value: | - | Receive media | | Accepted) | 2 | | requests from | | | | | transmission | | | Configurable. | | participant is | | | | | rejected. | | | Obtained from | | | | | the | | | | | \ | | | | | element of the | | | | | \ | | | | | element of the | | | | | \ | | | | | element in | | | | | 3GPP TS | | | | | 24.484 [13]. | | | +----------------+----------------+----------------+----------------+ | C9 | Default value: | - | Receive media | | (Per-Partici | 4 | | requests from | | pant-Reception | | | transmission | | Accepted) | Configurable. | | participant is | | | | | rejected. | | | Obtained from | | | | | the | | | | | \ | | | | | element of the | | | | | \ | | | | | element in | | | | | 3GPP TS | | | | | 24.484 [7]. | | | +----------------+----------------+----------------+----------------+ | C11(Count of | Default value: | - | Receive media | | active | 4 | | requests from | | receivers for | | | transmission | | the stream) | Configurable. | | participant is | | | | | rejected. | +----------------+----------------+----------------+----------------+ | NOTE: If a | | | | | counter value | | | | | is not | | | | | configured the | | | | | default value | | | | | shall be used. | | | | +----------------+----------------+----------------+----------------+
### 11.2.4 Counters in the participating MCVideo function
The table 11.2.4-1 enlists counters, their limits and the action on expiry for
the \'Participating MCVideo function MBMS subchannel control state machine\'.
Table 11.2.4-2: Counters used in the \'Participating MCVideo function MBMS
subchannel control state machine\'
+----------------+----------------+----------------+----------------+ | Counter | Limit | Associated | On reaching | | | | timer | the limit | +================+================+================+================+ | C302 | Default value: | T302 (Unmap | The Unmap | | | 3. | Group To | Group To | | (Unmap Group | | Bearer) | Bearer message | | To Bearer) | Configurable. | | is no more | | | | | re-sent. | +----------------+----------------+----------------+----------------+
Editor\'s Note: How these counters are configured, e.g. within TS 24.484 or
24.483 is FFS.
# 12 Extensions within the present document
## 12.1 Session description types defined within the present document
### 12.1.1 General
This clause contains definitions for SDP parameters that are specific to SDP
usage with MCVideo and therefore are not described in an RFC.
### 12.1.2 SDP \"fmtp\" attribute for MCVideo
#### 12.1.2.1 General
This clause defines the structure and syntax of the SDP \"fmtp\" attribute,
when used to negotiate an MCVideo media plane control channel. The MCVideo
media plane control channel, and the protocols used on the control channel, is
described in the present specification.
#### 12.1.2.2 Semantics
In an SDP offer and answer, the \"mc_queueing\" fmtp attribute is used to
indicate support of the Transmission Request message queueing mechanism, as
defined in the present specification.
In an SDP offer, the \"mc_priority\" fmtp attribute indicates (using an
integer value between \'1\' and \'255\') the maximum transmission priority
that the offerer requests to be used with Transmission Request messages sent
by the offerer. In an SDP answer, the attribute parameter indicates the
maximum priority level that the answerer has granted to the offerer. The value
must be equal or less than the value provided in the associated SDP offer.
NOTE 1: If the \"mc_priority\" fmtp attribute is not used within an SDP offer
or answer, a default priority value is assumed.
In an SDP offer, the \"mc_reception_priority\" fmtp attribute indicates (using
an integer value between \'1\' and \'255\') the maximum reception priority
that the offerer requests to be used with Reception Request messages sent by
the offerer. In an SDP answer, the attribute parameter indicates the maximum
reception priority level that the answerer has granted to the offerer. The
value must be equal or less than the value provided in the associated SDP
offer.
NOTE 2: If the \"mc_reception_priority\" fmtp attribute is not used within an
SDP offer or answer, a default reception priority value is assumed.
In an SDP offer, the \"mc_granted\" fmtp attribute parameter indicates that
the offerer supports the procedure where the answerer indicates, using the
fmtp attribute in the associated SDP answer, that the permission to transmit
has been granted to the offerer.
NOTE 3: When the \"mc_granted\" fmtp attribute is used in an SDP offer, it
does not indicate an actual request for the media transmission. The SDP
\"mc_implicit_request\" fmtp attribute can be used to request the media
transmission. In an SDP answer, the attribute indicates that the permission to
Transmission has been granted to the offerer.
NOTE 4: Once the offerer has been granted the permission to Transmission, the
offerer can perform media transmission until it receives a Transmission
Revoked message, or until the offerer itself ends the media transmission by
sending a Transmission end request message, as described in the present
specification.
In an SDP offer, the \"mc_implicit_request\" fmtp attribute indicates that the
offerer implicitly requests for media transmission (without the need to send a
Transmission Request message). In an SDP answer, the attribute parameter
indicates that the answerer has accepted the implicit Transmission Request.
Once the answerer grants the permission to Transmission to the offerer, the
answerer will send a Transmission Granted message.
NOTE 5: The usage of the \"mc_implicit_request\" fmtp attribute in an SDP
answer does not mean that the answerer has granted the permission to
Transmission to the offerer, only that the answerer has accepted the implicit
Transmission Request.
#### 12.1.2.3 Syntax
Table 12.1.2.3-1: SDP \"fmtp\" attribute for the MCVideo media plane control
channel
fmtp-attr-mpcp = \"a=fmtp:\" \"MCVideo\" SP attr-param-list
attr-param-list = attr-param *(COLON attr-param)
attr-param = mc_queueing / mc_priority / mc_reception_priority / mc_granted /
mc_implicit_request
mc_queueing = \"mc_queueing\"
mc_priority = \"mc_priority=\" 1*2(DIGIT)
mc_reception_priority = \"mc_reception_priority=\" 1*2(DIGIT)
mc_granted = \"mc_granted\"
mc_implicit_request = \"mc_implicit_request\"
Editor\'s Note: IANA registration may be required.
# 13 Media plane security
## 13.1 General
Media plane security provides integrity and confidentiality protection of
individual media streams and media plane control messages in MCVideo sessions.
The media plane security is based on 3GPP MCVideo security solution including
key management and end-to-end media and transmission control and reception
control messages protection as defined in 3GPP TS 33.180 [8].
Various keys and associated key identifiers protect:
1\. RTP transported media;
2\. RTCP transported media control messages (i.e. RTCP SR packets, RTCP RR
packets, RTCP SDES packets); and
3\. RTCP APP transported transmission control and reception control messages.
In an on-network group call of an MCVideo group which is not a constituent
MCVideo group of a temporary MCVideo group:
1\. if protection of media is negotiated, the GMK and the GMK-ID of the
MCVideo group protect the media sent and received by an MCVideo clients;
2\. if protection of transmission control and reception control messages sent
using unicast between the MCVideo client and the participating MCVideo
function serving the the MCVideo client is negotiated, the CSK and the CSK-ID
protect the transmission control messages sent and received using unicast by
the MCVideo client and by a participating MCVideo function;
3\. if protection of transmission control messages sent over the MBMS
subchannel from the participating MCVideo function to the served MCVideo
clients is required:
A) if a MuSiK and a MuSiK-ID are associated with the on-network group call,
the MuSiK and the MuSiK-ID associated with the on-network group call protect
the transmission control messages sent over the MBMS subchannel from the
participating MCVideo function to the served MCVideo clients; and
B) if a MuSiK and a MuSiK-ID are not associated with the on-network group
call, the MKFC and the MKFC-ID of the MCVideo group protect the transmission
control messages sent over the MBMS subchannel from the participating MCVideo
function to the served MCVideo clients;
NOTE 1: If protection of transmission control messages sent over the MBMS
subchannel from the participating MCVideo function to the served MCVideo
clients is required and the participating MCVideo function is compliant to
Release 15 of the present document, a MuSiK and a MuSiK-ID are always
associated with the on-network group call.
4\. if protection of transmission control and reception control messages
between the participating MCVideo function and the controlling MCVideo
function is negotiated, the SPK and the SPK-ID protect the transmission
control and reception control messages sent and received between the
participating MCVideo function and the controlling MCVideo function;
5\. if protection of media control messages sent using unicast between the
MCVideo client and the participating MCVideo function serving the the MCVideo
client is negotiated, the CSK and the CSK-ID protect the media control
messages sent and received using unicast by the MCVideo client and by a
participating MCVideo function; and
6\. if protection of media control messages between the participating MCVideo
function and the controlling MCVideo function is negotiated, the SPK and the
SPK-ID protect the media control messages sent and received between the
participating MCVideo function and the controlling MCVideo function.
In an on-network private call:
1\. if protection of media is negotiated, the PCK and the PCK-ID protect media
sent and received by the MCVideo clients;
2\. if protection of transmission control and reception control messages sent
using unicast between the MCVideo client and the participating MCVideo
function serving the the MCVideo client is negotiated, the CSK and the CSK-ID
protect the transmission control and reception control messages sent and
received by the MCVideo client and by the participating MCVideo function;
3\. if protection of transmission control and reception control messages
between the participating MCVideo function and the controlling MCVideo
function is negotiated, the SPK and the SPK-ID protect the transmission
control messages sent and received between the participating MCVideo function
and the controlling MCVideo function;
4\. if protection of media control messages sent using unicast between the
MCVideo client and the participating MCVideo function serving the the MCVideo
client is negotiated, the CSK and the CSK-ID protect the media control
messages sent and received using unicast by the MCVideo client and by a
participating MCVideo function; and
5\. if protection of media control messages between the participating MCVideo
function and the controlling MCVideo function is negotiated, the SPK and the
SPK-ID protect the media control messages sent and received between the
participating MCVideo function and the controlling MCVideo function.
In an off-network group call of an MCVideo group:
1\. if protection of media is announced, the GMK and the GMK-ID of the MCVideo
group protect the media sent and received by an MCVideo client;
2\. if protection of transmission control messages is announced, the GMK and
the GMK-ID of the MCVideo group protect the transmission control messages sent
and received by an MCVideo client; and
3\. if protection of media control messages is announced, the GMK and the GMK-
ID of the MCVideo group protect the media sent and received by an MCVideo
client.
In an off-network private call:
1\. if protection of media is negotiated, the PCK and the PCK-ID protect media
sent and received by an MCVideo client;
2\. if protection of transmission control and reception control messages is
negotiated, the PCK and the PCK-ID protect transmission control and reception
control messages sent and received by an MCVideo client; and
3\. if protection of media control messages is negotiated, the PCK and the
PCK-ID protect media control messages and received by an MCVideo client.
In an pre-established session, if the pre-established session call control
messages between the MCVideo client and the participating MCVideo function
serving the the MCVideo client are negotiated to be protected, the CSK and the
CSK-ID protect the pre-established session call control messages sent and
received by the MCVideo client and by the participating MCVideo function
serving the MCVideo client.
The GMK and the GMK-ID are distributed to the MCVideo clients using the group
document subscription and notification procedure specified in 3GPP TS 24.481
[5].
The CSK and the CSK-ID are generated by the MCVideo client and provided to the
participating MCVideo function serving the MCVideo client using SIP signalling
according to 3GPP TS 24.281 [2].
The MKFC and the MKFC-ID are distributed to the MCVideo clients using the
group document subscription and notification procedure specified in 3GPP TS
24.481 [5]. The MKFC and the MKFC-ID are distributed to the controlling
MCVideo function using the group document subscription and notification
procedure specified in 3GPP TS 24.481 [5] and the controlling MCVideo function
provides the MKFC and the MKFC-ID to the participating MCVideo function using
SIP signalling according to 3GPP TS 24.281 [2].
The SPK and the SPK-ID are configured in the participating MCVideo function,
the controlling MCVideo function and the non-controlling MCVideo function.
The PCK and the PCK-ID are generated by the MCVideo client initiating the
private call and provided to the MCVideo client receiving the private call
using SIP signalling according to 3GPP TS 24.281 [2], using Connect message
described in clause 8.3.4 or using MONP signalling according to 3GPP TS 24.281
[2].
## 13.2 Derivation of SRTP/SRTCP master keys
Each key (i.e. CSK, GMK, MKFC, PCK, SPK, MSCCK) and its associated key
identifier (i.e. CSK-ID, GMK-ID, MKFC-ID, PCK-ID, SPK-ID, MSCCK-ID) described
in clause 13.1 are used to derive SRTP-MK, SRTP-MS and SRTP-MKI.
SRTP-MK, SRTP-MS and SRTP-MKI are used in encryption of media or transmission
control and reception control messages in SRTP as specified in IETF RFC 3711
[4] and 3GPP TS 33.180 [8].
## 13.3 Media plane encryption and decryption
### 13.3.1 General
The clause 13.3 provides the media plane encryption and decryption procedures
at the participating MCVideo function, the MCVideo client and the controlling
MCVideo function.
### 13.3.2 The participating MCVideo function
The participating MCVideo function:
1\. if protection of media is negotiated, shall be transparent to RTP media
streams and shall forward encrypted RTP media streams without decrypting the
payload;
2\. if protection of transmission control and reception control messages sent
using unicast between the participating MCVideo function and the MCVideo
client is negotiated and the CSK and the CSK-ID were received from the MCVideo
client using SIP signalling according to 3GPP TS 24.281 [2]:
A) shall encrypt transmission control and reception control messages sent
using unicast to the served MCVideo client according to IETF RFC 3711 [4] and
3GPP TS 33.180 [8] using SRTP-MK, SRTP-MS and SRTP-MKI generated using the CSK
and CSK-ID as specified in clause 13.2; and
B) shall decrypt transmission control and reception control messages received
using unicast from the served MCVideo client according to IETF RFC 3711 [4]
and 3GPP TS 33.180 [8] using SRTP-MK, SRTP-MS and SRTP-MKI generated using the
CSK and CSK-ID as specified in clause 13.2;
3\. if protection of transmission control messages sent over the MBMS
subchannel from the participating MCVideo function to the served MCVideo
clients is required and a MuSiK and a MuSiK-ID are associated with the on-
network group call of the transmission control messages:
A) shall encrypt transmission control messages sent over the MBMS subchannel
according to IETF RFC 3711 [16] and 3GPP TS 33.180 [8] using SRTP-MK, SRTP-MS
and SRTP-MKI generated using the MuSiK and MuSiK-ID as specified in clause
13.2;
4\. if protection of transmission control and reception control messages
between the participating MCVideo function and the controlling MCVideo
function is negotiated and the SPK and the SPK-ID are configured in the
participating MCVideo function:
A) shall encrypt transmission control and reception control messages sent to
the controlling MCVideo function according to IETF RFC 3711 [4] and 3GPP TS
33.180 [8] using SRTP-MK, SRTP-MS and SRTP-MKI generated using the SPK and
SPK-ID as specified in clause 13.2; and
B) shall decrypt transmission control and reception control messages received
from the controlling MCVideo function according to IETF RFC 3711 [4] and 3GPP
TS 33.180 [8] using SRTP-MK, SRTP-MS and SRTP-MKI generated using the SPK and
SPK-ID as specified in clause 13.2;
5\. if protection of transmission control and reception control messages
between the participating MCVideo function and the non-controlling MCVideo
function is negotiated and the SPK and the SPK-ID are configured in the
participating MCVideo function:
A) shall encrypt transmission control and reception control messages sent to
the non-controlling MCVideo function according to IETF RFC 3711 [4] and 3GPP
TS 33.180 [8] using SRTP-MK, SRTP-MS and SRTP-MKI generated using the SPK and
SPK-ID as specified in clause 13.2; and
B) shall decrypt transmission control and reception control messages received
from the non-controlling MCVideo function according to IETF RFC 3711 [4] and
3GPP TS 33.180 [8] using SRTP-MK, SRTP-MS and SRTP-MKI generated using the SPK
and SPK-ID as specified in clause 13.2;
5\. if protection of pre-established session call control messages between the
participating MCVideo function and the MCVideo client is negotiated and the
CSK and the CSK-ID were received from the MCVideo client using SIP signalling
according to 3GPP TS 24.281 [2]:
A) shall encrypt pre-established session call control messages sent to the
served MCVideo client according to IETF RFC 3711 [4] and 3GPP TS 33.180 [8]
using SRTP-MK, SRTP-MS and SRTP-MKI generated using the CSK and CSK-ID as
specified in clause 13.2; and
B) shall decrypt pre-established session call control messages received from
served MCVideo client according to IETF RFC 3711 [4] and 3GPP TS 33.180 [8]
using SRTP-MK, SRTP-MS and SRTP-MKI generated using the CSK and CSK-ID as
specified in clause 13.2;
6\. if protection of media control messages sent using unicast between the
participating MCVideo function and the MCVideo client is negotiated between
the participating MCVideo function and the MCVideo client and the CSK and the
CSK-ID were received from the MCVideo client using SIP signalling according to
3GPP TS 24.281 [2];
A) shall encrypt media control messages sent using unicast to the served
MCVideo client according to IETF RFC 3711 [4] and 3GPP TS 33.180 [8] using
SRTP-MK, SRTP-MS and SRTP-MKI generated using the CSK and CSK-ID as specified
in clause 13.2; and
B) shall decrypt media control messages received using unicast from the served
MCVideo client according to IETF RFC 3711 [4] and 3GPP TS 33.180 [8] using
SRTP-MK, SRTP-MS and SRTP-MKI generated using the CSK and CSK-ID as specified
in clause 13.2;
7\. if protection of media control messages between the participating MCVideo
function and the controlling MCVideo function is negotiated and the SPK and
the SPK-ID are configured in the participating MCVideo function:
A) shall encrypt media control messages sent to the controlling MCVideo
function according to IETF RFC 3711 [4] and 3GPP TS 33.180 [8] using SRTP-MK,
SRTP-MS and SRTP-MKI generated using the SPK and SPK-ID as specified in clause
13.2; and
B) shall decrypt media control messages received from the controlling MCVideo
function according to IETF RFC 3711 [4] and 3GPP TS 33.180 [8] using SRTP-MK,
SRTP-MS and SRTP-MKI generated using the SPK and SPK-ID as specified in clause
13.2;
8\. if protection of media control messages between the participating MCVideo
function and the non-controlling MCVideo function is negotiated and the SPK
and the SPK-ID are configured in the participating MCVideo function:
A) shall encrypt media control messages sent to the non-controlling MCVideo
function according to IETF RFC 3711 [4] and 3GPP TS 33.180 [8] using SRTP-MK,
SRTP-MS and SRTP-MKI generated using the SPK and SPK-ID as specified in clause
13.2; and
B) shall decrypt media control messages received from the non-controlling
MCVideo function according to IETF RFC 3711 [4] and 3GPP TS 33.180 [8] using
SRTP-MK, SRTP-MS and SRTP-MKI generated using the SPK and SPK-ID as specified
in clause 13.2.
9\. if protection of MBMS subchannel control messages sent over the general
purpose MBMS subchannel of an MBMS bearer is required and the MSCCK and the
MSCCK-ID associated with the MBMS bearer were sent to one or more served
MCVideo clients using SIP signalling according to 3GPP TS 24.281 [11]:
A) shall encrypt MBMS subchannel control messages specified in clause 9.3 sent
over the general purpose MBMS subchannel of the MBMS bearer according to IETF
RFC 3711 [16] and 3GPP TS 33.180 [18] using SRTP-MK, SRTP-MS and SRTP-MKI
generated using the MSCCK and MSCCK-ID associated with the MBMS bearer as
specified in clause 13.2.
### 13.3.3 The MCVideo client
The MCVideo client:
1\. in an on-network group call of an MCVideo group which is not a constituent
MCVideo group of a temporary MCVideo group:
A) if protection of media is negotiated and the GMK and the GMK-ID of the
MCVideo group were received using the group document subscription and
notification procedure specified in 3GPP TS 24.481 [5] for the MCVideo group:
i) shall encrypt sent media according to IETF RFC 3711 [4] and 3GPP TS 33.180
[8] using SRTP-MK, SRTP-MS and SRTP-MKI generated using the GMK and GMK-ID as
specified in clause 13.2; and
ii) shall decrypt received media according to IETF RFC 3711 [4] and 3GPP TS
33.180 [8] using SRTP-MK, SRTP-MS and SRTP-MKI generated using the GMK and
GMK-ID as specified in clause 13.2;
B) if protection of transmission control and reception control messages sent
using unicast is negotiated and the CSK and the CSK-ID were sent to the
participating MCVideo function using SIP signalling according to 3GPP TS
24.281 [2]:
i) shall encrypt transmission control and reception control messages sent
using unicast according to IETF RFC 3711 [4] and 3GPP TS 33.180 [8] using
SRTP-MK, SRTP-MS and SRTP-MKI generated using the CSK and CSK-ID as specified
in clause 13.2; and
ii) shall decrypt transmission control and reception control messages received
using unicast according to IETF RFC 3711 [4] and 3GPP TS 33.180 [8] using
SRTP-MK, SRTP-MS and SRTP-MKI generated using the CSK and CSK-ID as specified
in clause 13.2;
C) if protection of transmission control messages sent over the MBMS
subchannel from the participating MCVideo function to the served MCVideo
clients is required:
i) if a MuSiK and a MuSiK-ID are associated with the on-network group call,
shall decrypt transmission control messages received over the MBMS subchannel
for transmission control messages according to IETF RFC 3711 [4] and 3GPP TS
33.180 [8] using SRTP-MK, SRTP-MS and SRTP-MKI generated using the MuSiK and
the MuSiK-ID associated with the on-network group call as specified in clause
13.2; and
ii) if a MuSiK and a MuSiK-ID are not associated with the on-network group
call and the MKFC and the MKFC-ID of the MCVideo group were received using the
group document subscription and notification procedure specified in 3GPP TS
24.481 [12] for the MCVideo group, shall decrypt transmission control messages
received over the MBMS subchannel for transmission control messages according
to IETF RFC 3711 [4] and 3GPP TS 33.180 [8] using SRTP-MK, SRTP-MS and SRTP-
MKI generated using the MKFC and MKFC-ID as specified in clause 13.2; and
D) if protection of media control messages sent using unicast between the
participating MCVideo function and the MCVideo client is negotiated and the
CSK and the CSK-ID were sent to the participating MCVideo function using SIP
signalling according to 3GPP TS 24.281 [2]:
i) shall encrypt media control messages sent using unicast according to IETF
RFC 3711 [4] and 3GPP TS 33.180 [8] using SRTP-MK, SRTP-MS and SRTP-MKI
generated using the CSK and CSK-ID as specified in clause 13.2; and
ii) shall decrypt media control messages received using unicast according to
IETF RFC 3711 [4] and 3GPP TS 33.180 [8] using SRTP-MK, SRTP-MS and SRTP-MKI
generated using the CSK and CSK-ID as specified in clause 13.2;
2\. in an on-network group call of an MCVideo group which is a constituent
MCVideo group of a temporary MCVideo group:
A) if protection of media is negotiated and the GMK and the GMK-ID of the
temporary MCVideo group were received using the group document subscription
and notification procedure specified in 3GPP TS 24.481 [5] for the constituent
MCVideo group:
i) shall encrypt sent media according to IETF RFC 3711 [4] and 3GPP TS 33.180
[8] using SRTP-MK, SRTP-MS and SRTP-MKI generated using the GMK and GMK-ID of
the temporary MCVideo group as specified in clause 13.2; and
ii) shall decrypt received media according to IETF RFC 3711 [4] and 3GPP TS
33.180 [8] using SRTP-MK, SRTP-MS and SRTP-MKI generated using the GMK and
GMK-ID of the temporary MCVideo group as specified in clause 13.2;
B) if protection of transmission control and reception control messages sent
using unicast is negotiated and the CSK and the CSK-ID were sent to the
participating MCVideo function using SIP signalling according to 3GPP TS
24.281 [2]:
i) shall encrypt transmission control and reception control messages sent
using unicast according to IETF RFC 3711 [4] and 3GPP TS 33.180 [8] using
SRTP-MK, SRTP-MS and SRTP-MKI generated using the CSK and CSK-ID as specified
in clause 13.2; and
ii) shall decrypt transmission control and reception control messages received
using unicast according to IETF RFC 3711 [4] and 3GPP TS 33.180 [8] using
SRTP-MK, SRTP-MS and SRTP-MKI generated using the CSK and CSK-ID as specified
in clause 13.2;
C) if protection of media media control messages sent using unicast between
the participating MCVideo function and the MCVideo client is negotiated and
the CSK and the CSK-ID were sent to the participating MCVideo function using
SIP signalling according to 3GPP TS 24.281 [2]:
i) shall encrypt media control messages sent using unicast according to IETF
RFC 3711 [4] and 3GPP TS 33.180 [8] using SRTP-MK, SRTP-MS and SRTP-MKI
generated using the CSK and CSK-ID as specified in clause 13.2;
ii) shall decrypt media control messages received using unicast according to
IETF RFC 3711 [4] and 3GPP TS 33.180 [8] using SRTP-MK, SRTP-MS and SRTP-MKI
generated using the CSK and CSK-ID as specified in clause 13.2;
3\. in an on-network private call:
A) if:
i) protection of media is negotiated in originating call and the PCK and the
PCK-ID were sent to the remote MCVideo client using SIP signalling according
to 3GPP TS 24.281 [2]; or
ii) protection of media is negotiated in terminating call and the PCK and the
PCK-ID were received from the remote MCVideo client using SIP signalling
according to 3GPP TS 24.281 [2];
then:
i) shall encrypt sent media according to IETF RFC 3711 [4] and 3GPP TS 33.180
[8] using SRTP-MK, SRTP-MS and SRTP-MKI generated using the PCK and PCK-ID as
specified in clause 13.2; and
ii) shall decrypt received media according to IETF RFC 3711 [4] and 3GPP TS
33.180 [8] using SRTP-MK, SRTP-MS and SRTP-MKI generated using the PCK and
PCK-ID as specified in clause 13.2;
B) if protection of transmission control and reception control messages is
negotiated and the CSK and the CSK-ID were sent to the participating MCVideo
function using SIP signalling according to 3GPP TS 24.281 [2]:
i) shall encrypt sent transmission control and reception control messages
according to IETF RFC 3711 [4] and 3GPP TS 33.180 [8] using SRTP-MK, SRTP-MS
and SRTP-MKI generated using the CSK and CSK-ID as specified in clause 13.2;
and
ii) shall decrypt received transmission control and reception control messages
according to IETF RFC 3711 [4] and 3GPP TS 33.180 [8] using SRTP-MK, SRTP-MS
and SRTP-MKI generated using the CSK and CSK-ID as specified in clause 13.2;
and
D) if protection of media media control messages sent using unicast between
the participating MCVideo function and the MCVideo client is negotiated and
the CSK and the CSK-ID were sent to the participating MCVideo function using
SIP signalling according to 3GPP TS 24.281 [2]:
i) shall encrypt media control messages sent using unicast according to IETF
RFC 3711 [4] and 3GPP TS 33.180 [8] using SRTP-MK, SRTP-MS and SRTP-MKI
generated using the CSK and CSK-ID as specified in clause 13.2; and
ii) shall decrypt media control messages received using unicast according to
IETF RFC 3711 [4] and 3GPP TS 33.180 [8] using SRTP-MK, SRTP-MS and SRTP-MKI
generated using the CSK and CSK-ID as specified in clause 13.2;
4\. in an off-network group call of an MCVideo group:
A) if protection of media is announced and the GMK and GMK-ID of the MCVideo
group were received when on-network using the group document subscription and
notification procedure specified in 3GPP TS 24.481 [5] for the MCVideo group:
i) shall encrypt sent media according to IETF RFC 3711 [4] and 3GPP TS 33.180
[8] using SRTP-MK, SRTP-MS and SRTP-MKI generated using the GMK and GMK-ID as
specified in clause 13.2; and
ii) shall decrypt received media according to IETF RFC 3711 [4] and 3GPP TS
33.180 [8] using SRTP-MK, SRTP-MS and SRTP-MKI generated using the GMK and
GMK-ID as specified in clause 13.2;
B) if protection of transmission control and reception control messages is
announced and the GMK and the GMK-ID of the MCVideo group were received when
on-network using the group document subscription and notification procedure
specified in 3GPP TS 24.481 [5] for the MCVideo group:
i) shall encrypt sent transmission control and reception control messages
according to IETF RFC 3711 [4] and 3GPP TS 33.180 [8] using SRTP-MK, SRTP-MS
and SRTP-MKI generated using the GMK and GMK-ID as specified in clause 13.2;
and
ii) shall decrypt received transmission control and reception control messages
according to IETF RFC 3711 [4] and 3GPP TS 33.180 [8] using SRTP-MK, SRTP-MS
and SRTP-MKI generated using the GMK and GMK-ID as specified in clause 13.2;
and
C) if protection of media control messages is announced and the GMK and GMK-ID
of the MCVideo group were received when on-network using the group document
subscription and notification procedure specified in 3GPP TS 24.481 [5] for
the MCVideo group:
i) shall encrypt sent sent media control messages according to IETF RFC 3711
[4] and 3GPP TS 33.180 [8] using SRTP-MK, SRTP-MS and SRTP-MKI generated using
the GMK and GMK-ID as specified in clause 13.2; and
ii) shall decrypt received received media control messages according to IETF
RFC 3711 [4] and 3GPP TS 33.180 [8] using SRTP-MK, SRTP-MS and SRTP-MKI
generated using the GMK and GMK-ID as specified in clause 13.2;
5\. in an off-network private call:
A) if:
i) protection of media is negotiated in originating call and the PCK and the
PCK-ID were sent to the remote MCVideo client using MONP signalling according
to 3GPP TS 24.281 [2]; or
ii) protection of media is negotiated in terminating call and the PCK and the
PCK-ID were received from the remote MCVideo client using MONP signalling
according to 3GPP TS 24.281 [2];
then:
i) shall encrypt sent media according to IETF RFC 3711 [4] and 3GPP TS 33.180
[8] using SRTP-MK, SRTP-MS and SRTP-MKI generated using the PCK and PCK-ID as
specified in clause 13.2; and
ii) shall decrypt received media according to IETF RFC 3711 [4] and 3GPP TS
33.180 [8] using SRTP-MK, SRTP-MS and SRTP-MKI generated using the PCK and
PCK-ID as specified in clause 13.2;
B) if:
i) protection of transmission control and reception control messages is
negotiated in originating call and the PCK and the PCK-ID were sent to the
remote MCVideo client using MONP signalling according to 3GPP TS 24.281 [2];
or
ii) protection of transmission control and reception control messages is
negotiated in terminating call and the PCK and the PCK-ID were received from
the remote MCVideo client using MONP signalling according to 3GPP TS 24.281
[2].
then:
i) shall encrypt sent transmission control and reception control messages
according to IETF RFC 3711 [4] and 3GPP TS 33.180 [8] using SRTP-MK, SRTP-MS
and SRTP-MKI generated using the PCK and PCK-ID as specified in clause 13.2;
and
ii) shall decrypt received transmission control and reception control messages
according to IETF RFC 3711 [4] and 3GPP TS 33.180 [8] using SRTP-MK, SRTP-MS
and SRTP-MKI generated using the PCK and PCK -ID as specified in clause 13.2;
and
C) if:
i) protection of media control messages is negotiated in originating call and
the PCK and the PCK-ID were sent to the remote MCVideo client using MONP
signalling according to 3GPP TS 24.281 [2]; or
ii) protection of media control messages is negotiated in terminating call and
the PCK and the PCK-ID were received from the remote MCVideo client using MONP
signalling according to 3GPP TS 24.281 [2];
then:
i) shall encrypt sent sent media control messages according to IETF RFC 3711
[4] and 3GPP TS 33.180 [8] using SRTP-MK, SRTP-MS and SRTP-MKI generated using
the PCK and PCK-ID as specified in clause 13.2; and
ii) shall decrypt received received media control messages according to IETF
RFC 3711 [4] and 3GPP TS 33.180 [8] using SRTP-MK, SRTP-MS and SRTP-MKI
generated using the PCK and PCK-ID as specified in clause 13.2;
6\. if protection of pre-established session control messages is negotiated
and the CSK and the CSK-ID were sent to the participating MCVideo function
using SIP signalling according to 3GPP TS 24.281 [2]:
A) shall encrypt sent pre-established session call control messages according
to IETF RFC 3711 [4] and 3GPP TS 33.180 [8] using SRTP-MK, SRTP-MS and SRTP-
MKI generated using the CSK and CSK-ID as specified in clause 13.2; and
B) shall decrypt received pre-established session call control messages
according to IETF RFC 3711 [4] and 3GPP TS 33.180 [8] using SRTP-MK, SRTP-MS
and SRTP-MKI generated using the CSK and CSK-ID as specified in clause 13.2.
### 13.3.4 The controlling MCVideo function
The controlling MCVideo function:
1\. if protection of media is negotiated, shall be transparent to RTP media
streams and shall forward encrypted RTP media streams without decrypting the
payload;
2\. in an on-network group call of an MCVideo group which is not a constituent
MCVideo group of a temporary MCVideo group:
A) if protection of transmission control and reception control messages
between the controlling MCVideo function and the participating MCVideo
function is negotiated and the SPK and the SPK-ID are configured in the
controlling MCVideo function:
i) shall encrypt transmission control and reception control messages sent to
the participating MCVideo function according to IETF RFC 3711 [4] and 3GPP TS
33.180 [8] using SRTP-MK, SRTP-MS and SRTP-MKI generated using the SPK and
SPK-ID as specified in clause 13.2; and
ii) shall decrypt transmission control and reception control messages received
from the participating MCVideo function according to IETF RFC 3711 [4] and
3GPP TS 33.180 [8] using SRTP-MK, SRTP-MS and SRTP-MKI generated using the SPK
and SPK-ID as specified in clause 13.2; and
B) if protection of media control messages between the controlling MCVideo
function and the participating MCVideo function is negotiated and the SPK and
the SPK-ID are configured in the controlling MCVideo function:
i) shall encrypt media control messages sent to the participating MCVideo
function according to IETF RFC 3711 [4] and 3GPP TS 33.180 [8] using SRTP-MK,
SRTP-MS and SRTP-MKI generated using the SPK and SPK-ID as specified in clause
13.2; and
ii) shall decrypt media control messages received from the participating
MCVideo function according to IETF RFC 3711 [4] and 3GPP TS 33.180 [8] using
SRTP-MK, SRTP-MS and SRTP-MKI generated using the SPK and SPK-ID as specified
in clause 13.2;
3\. in an on-network group call of an MCVideo group which is a constituent
MCVideo group of a temporary MCVideo group:
A) if protection of transmission control and reception control messages
between the controlling MCVideo function and the non-controlling MCVideo
function is negotiated and the SPK and the SPK-ID are configured in the
controlling MCVideo function:
i) shall encrypt transmission control and reception control messages sent to
the non-controlling MCVideo function according to IETF RFC 3711 [4] and 3GPP
TS 33.180 [8] using SRTP-MK, SRTP-MS and SRTP-MKI generated using the SPK and
SPK-ID as specified in clause 13.2; and
ii) shall decrypt transmission control and reception control messages received
from the non-controlling MCVideo function according to IETF RFC 3711 [4] and
3GPP TS 33.180 [8] using SRTP-MK, SRTP-MS and SRTP-MKI generated using the SPK
and SPK-ID as specified in clause 13.2; and
B) if protection of media control messages between the controlling MCVideo
function and the non-controlling MCVideo function is negotiated and the SPK
and the SPK-ID are configured in the controlling MCVideo function:
i) shall encrypt media control messages sent to the non-controlling MCVideo
function according to IETF RFC 3711 [4] and 3GPP TS 33.180 [8] using SRTP-MK,
SRTP-MS and SRTP-MKI generated using the SPK and SPK-ID as specified in clause
13.2; and
ii) shall decrypt media control messages received from the non-controlling
MCVideo function according to IETF RFC 3711 [4] and 3GPP TS 33.180 [8] using
SRTP-MK, SRTP-MS and SRTP-MKI generated using the SPK and SPK-ID as specified
in clause 13.2; and
4\. in an on-network private call:
A) if protection of transmission control and reception control messages
between the controlling MCVideo function and the participating MCVideo
function is negotiated and the SPK and the SPK-ID are configured in the
controlling MCVideo function:
i) shall encrypt transmission control and reception control messages sent to
the participating MCVideo function according to IETF RFC 3711 [4] and 3GPP TS
33.180 [8] using SRTP-MK, SRTP-MS and SRTP-MKI generated using the SPK and
SPK-ID as specified in clause 13.2; and
ii) shall decrypt transmission control and reception control messages received
from the participating MCVideo function according to IETF RFC 3711 [4] and
3GPP TS 33.180 [8] using SRTP-MK, SRTP-MS and SRTP-MKI generated using the SPK
and SPK-ID as specified in clause 13.2; and
B) if protection of media control messages between the controlling MCVideo
function and the participating MCVideo function is negotiated and the SPK and
the SPK-ID are configured in the controlling MCVideo function:
i) shall encrypt media control messages sent to the participating MCVideo
function according to IETF RFC 3711 [4] and 3GPP TS 33.180 [8] using SRTP-MK,
SRTP-MS and SRTP-MKI generated using the SPK and SPK-ID as specified in clause
13.2;
ii) shall decrypt media control messages received from the participating
MCVideo function according to IETF RFC 3711 [4] and 3GPP TS 33.180 [8] using
SRTP-MK, SRTP-MS and SRTP-MKI generated using the SPK and SPK-ID as specified
in clause 13.2.
# 14 SDP offer/ answer procedures
## 14.1 General
The capabilities described in clause 4.3 are negotiated in the signalling and
application plane using SDP offer / answer in SIP requests or SIP responses as
specified in 3GPP TS 24.281 [2].
This clause describes the details of the SDP offer / answer procedures with
regards to the MCVideo fmtp attribute in the \"m=application\" m-line.
## 14.2 Generating an SDP offer
### 14.2.1 General
When the offerer generates an SDP offer, in order to negotiate the
establishment of a media plane control channel, the offerer shall include a
media description (\"m=\" line) associated with the media plane control
channel. In addition, the offerer may associate an SDP fmtp attribute with the
media description.
NOTE: \"Initial offer\" refers to the offer when the media plane control
channel is initially negotiated. It might, or might not, be the initial offer
within the session.
### 14.2.2 \"mc_queueing\" fmtp attribute
The MCVideo client shall include the \"mc_queueing\" fmtp attribute in SDP
offers when queueing of Transmission request is supported.
The controlling MCVideo function shall include the \"mc_queueing\" fmtp
attribute in SDP offers when queueing of Transmission request is supported.
The non-controlling MCVideo function shall include the \"mc_queueing\" fmtp
attribute in SDP offers if the controlling MCVideo included the
\"mc_queueing\" fmtp attribute in the SDP offer.
### 14.2.3 \"mc_priority\" fmtp attribute
The MCVideo client shall include the \"mc_priority\" fmtp attribute when a
transmission priority different than the default priority is required. The
MCVideo client should base transmission priority on the configured value in
3GPP TS 24.484 [13].
When inviting an MCVideo client or an MCVideo group to a pre-arranged group
call, the controlling MCVideo function and the non-controlling MCVideo
function shall include in the \"mc_priority\" fmtp attribute with the value of
the \ element in the \ element specified in 3GPP TS
24.481 [12].
### 14.2.4 \"mc_granted\" fmtp attribute
The MCVideo client shall include the \"mc_granted\" fmtp attribute in the SDP
offer of an initial SIP INVITE request when it is acceptable for the MCVideo
client to receive a granted indication in the SIP 200 (OK) response to an
initial INVITE request.
### 14.2.5 \"mc_implicit_request\" fmtp attribute
The MCVideo client shall include the \"mc_implicit_request\" fmtp attribute
when a SIP request shall be interpreted as an implicit Transmission request.
If not explicitly stated in procedures in the present document or in
procedures in 3GPP TS 24.281 [2] that the \"mc_implicit_request\" fmtp
attribute shall be included, the decision to include the
\"mc_implicit_request\" fmtp attribute or not, is an implementation option.
### 14.2.6 \"mc_reception_priority\" fmtp attribute
The MCVideo client shall include the \"mc_reception_priority\" fmtp attribute
when a reception priority different than the default reception priority is
required. The MCVideo client should base reception priority on the configured
value in 3GPP TS 24.484 [13].
## 14.3 Generating the SDP answer
### 14.3.1 General
When the answerer receives an SDP offer, which contains a media description
for a media plane control channel, the answerer shall include a media
description associated with the media plane control channel in the answer. In
addition, the answerer may associate an SDP fmtp attribute with the media
description. The SDP fmtp attribute shall not include parameters that were not
present in the associated SDP offer.
### 14.3.2 \"mc_queueing\" fmtp attribute
The MCVideo client shall include the \"mc_queueing\" fmtp attribute in SDP
answers when queueing of Transmission request is supported.
The controlling MCVideo function shall include the \"mc_queueing\" fmtp
attribute in SDP answers when queueing of Transmission request is supported
and the \"mc_queueing\" fmtp attribute was included in the SDP offer.
The non-controlling MCVideo function shall include the \"mc_queueing\" fmtp
attribute in SDP answers if the controlling MCVideo function included the
\"mc_queueing\" fmtp attribute in the SDP offer.
NOTE: For MCVideo clients connected to the non-controlling MCVideo function,
the determination of if queueing is supported or not is determine case by case
using the Track Info field for each individual transmission control
participant.
### 14.3.3 \"mc_priority\" fmtp attribute
If the \"mc_priority\" fmtp attribute is included in an SDP offer, the
controlling MCVideo function:
1\. if the \ element is present in the \ element
as specified in 3GPP TS 24.481 [12] for the MCVideo user identified by the
\ element, shall not include a \"mc_priority\" fmtp attribute in the
SDP answer;
2\. if the \ element is not present in the \
element as specified in 3GPP TS 24.481 [12] for the MCVideo user identified by
the \ element in the MCVideo group document:
a. shall determine the priority value to include in \"mc_priority\" fmtp
attribute of the SDP answer, by choosing the lowest value from the following
inputs:
i. the value of transmission priority in the \"mc_priority\" fmtp attribute
included in the SDP offer;
ii. the value of the \ element in the MCVideo group document as
specified in 3GPP TS 24.481 [12]; and
iii the value of the \ element in the MCVideo
service configuration document as specified in 3GPP TS 24.484 [13]; and
b. shall include the priority value determined above in step 2a, in the
\"mc_priority\" fmtp attribute of the SDP answer.
If the \"mc_priority\" fmtp attribute is included in an SDP offer, the MCVideo
client and the non-controlling MCVideo function shall return the value
included in the SDP offer in the SDP answer.
### 14.3.4 \"mc_granted\" fmtp attribute
If the mc_granted\" fmtp attribute is included in an SDP offer, the
controlling MCVideo function:
1\. if the MCVideo call is not a temporary group session, may use the SIP 200
(OK) response to indicate that the implicit Transmission request is granted;
and
2\. if the MCVideo call is a temporary group session, shall not indicate that
the implicit Transmission request is granted.
NOTE: A MCVideo group call is a temporary group session when the \ element is present in the \ element as specified in
3GPP TS 24.481 [12].
If the controlling MCVideo function grants the implicit request and decide to
use the SIPP 200 (OK) response to grant the implicit request, the controlling
MCVideo function shall include the \"mc_granted\" fmtp attribute in the SDP
answer.
If the controlling MCVideo function decides not to grant the implicit request,
the controlling MCVideo function shall not include the \"mc_granted\" fmtp
attribute in the SDP answer.
### 14.3.5 \"mc_implicit_request\" fmtp attribute
If the \"mc_implicit_request\" fmtp attribute is included in an SDP offer, the
MCVideo server shall accept the initial INVITE request to be an implicit
request for media transmission unless the MCVideo client is joining a chat
group call or an ongoing pre-arranged call and include the
\"mc_implicit_request\" fmtp attribute in responses to the SIP request.
### 14.3.6 \"mc_reception_priority\" fmtp attribute
If the \"mc_reception_priority\" fmtp attribute is included in an SDP offer,
the controlling MCVideo function:
1\. shall determine the reception priority value to include in
\"mc_reception_priority\" fmtp attribute of the SDP answer, by choosing the
lowest value from the following inputs:
a. the value of reception priority in the \"mc_reception_priority\" fmtp
attribute included in the SDP offer; and
b. the value of the \ element in the MCVideo group
document as specified in 3GPP TS 24.481 [12].
## 14.4 Offerer processing of the SDP answer
When the offerer receives an SDP answer, if an SDP fmtp attribute is
associated with the media description associated with the media plane control
channel, and if the attribute contains attribute parameters that were not
present in the associated offer, the offerer shall discard those attribute
parameters.
## 14.5 Modifying the media plane control channel
When an offerer generates a subsequent SDP offer, the offerer follows the
rules for generating an initial offer, as described in clause 14.2, with the
exception that the offerer shall not include the \'mc_granted\' SDP fmtp
attribute parameter in a subsequent offer. No semantics has been defined for
the \'mc_granted\' attribute parameter in a subsequent offer.
For the \'mc_implicit_request\' semantic is only defined for a subsequent SDP
offer when upgrading from normal to an emergency call using an SIP re-INVITE
request as specified in 3GPP TS 24.281 [2].
## 14.6 The use of SDP offer / answer procedures in off-network mode
### 14.6.1 General
The MCVideo client can negotiate the capabilities used in a private call using
PRIVATE CALL SETUP REQUEST message and PRIVATE CALL ACCEPT message as
specified in 3GPP TS 24.281 [2]. The PRIVATE CALL SETUP REQUEST message
contains the SDP offer and the PRIVATE CALL ACCEPT message contains the SDP
answer.
When initiating a group call or a broadcast group call using the GROUP CALL
ANNOUNCEMENT message or GROUP CALL BROADCAST message as specified in 3GPP TS
24.281 [2] the capabilities to be used during the call cannot be negotiated.
### 14.6.2 fmtp attribute \"mc_queueing\"
When initiating a private call and if the MCVideo client supports queueing of
Transmission requests, the MCVideo client shall include the fmtp attribute
\"mc_queueing\" in the SDP offer.
When an MCVideo client accepting the invitation to the private call receives
an SDP offer containing the fmtp attribute \"mc_queueing\" and if the MCVideo
client supports queueing of Transmission requests, the MCVideo client shall
include the fmtp attribute \"mc_queueing\" in the SDP answer.
When initiating a group call and if queueing of Transmission requests is
supported, the MCVideo client shall include the fmtp attribute \"mc_queueing\"
in the SDP offer.
NOTE: Participants in a group call where queueing is used acknowledge the
support of queueing in the Transmission control Indicator field in the
Transmission request message.
#