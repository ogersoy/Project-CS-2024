# Foreword
This Technical Specification has been produced by the 3^rd^ Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document describes the protocol between the Base Transceiver
Station (BTS) and the remote Transcoder/Rate Adaption Unit (TRAU) for speech
and data on half rate traffic channel (TCH/H).
For Half Rate speech and half rate data the protocol is specified for 8 kbit/s
and 16 kbit/s submultiplexing scheme.
For Adaptive Multi-Rate speech the present document specifies the 8 kBit/s
submultiplexing, both for the full and the half rate traffic channels (TCH/AFS
and TCH/AHS). The specification for 16 kBit/s submultiplexing is given in Rec
3GPP TS 48.060, both for the full and the half rate traffic channels (TCH/AFS
and TCH/AHS).
The present document should be considered together with the 3GPP TS 46 series,
3GPP TS 44.021 (Rate Adaption on the MS‑BSS Interface) and 3GPP TS 48.020
(Rate Adaption on the BTS/MSC Interface).
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or non‑specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TS 01.02: \"Digital cellular telecommunication system (Phase 2+);
General description of a GSM Public Land Mobile Network (PLMN)\".
[2] 3GPP TS 21.905: \"Vocabulary for 3GPP Specifications\".
[3] 3GPP TS 44.021: \"Rate adaption on the Mobile Station - Base Station
System (MS ‑ BSS) interface\".
[4] 3GPP TS 45.003: \"Channel coding\".
[5] 3GPP TS 46.021: \"Half rate speech; Substitution and muting of lost frames
for half rate speech traffic channels\".
[6] 3GPP TS 46.022: \"Half rate speech; Comfort noise aspects for half rate
speech traffic channels\".
[7] 3GPP TS 46.041: \"Half rate speech; Discontinuous Transmission (DTX) for
half rate speech traffic channels\".
[8] 3GPP TS 46.042: \"Half rate speech; Voice Activity Detector (VAD) for half
rate speech traffic channels\".
[9] 3GPP TS 48.008: \"Mobile-services Switching Centre -- Base Station System
(MSC-BSS) interface; Layer 3 specification\".
[10] 3GPP TS 48.020: \"Rate adaption on the Base Station System ‑
Mobile‑services Switching Centre (BSS ‑ MSC) interface\".
[11] 3GPP TS 48.052: \"Base Station Controller ‑ Base Transceiver Station (BSC
‑ BTS) interface; Interface principles\".
[12] 3GPP TS 48.054: \"Base Station Controller - Base Transceiver Station (BSC
- BTS) interface Layer 1 structure of physical circuits\".
[13] 3GPP TS 48.058: \"Base Station Controller ‑ Base Transceiver Station (BSC
‑ BTS) interface; Layer 3 specification\".
[14] 3GPP TS 12.21: \"Digital cellular telecommunication system (Phase 2);
Network Management (NM) procedures and messages on the A‑bis interface\".
[15] ITU‑T Recommendation I.460: \"Multiplexing, rate adaption and support of
existing interfaces\".
[16] ITU‑T Recommendation V.110: \"Support of data terminal equipments (DTEs)
with V‑Series interfaces by an integrated services digital network\".
[24] 3GPP TS 26.071: \"Adaptive Multi-Rate speech processing functions,
General Description.\"
[25] 3GPP TS 26.090: \"Adaptive Multi-Rate speech transcoding\".
[26] Void.
[27] 3GPP TS 26.092: \"Comfort noise aspect for Adaptive Multi-Rate speech
traffic channels\".
[28] Void.
[29] Void.
[30] Void.
[31] 3GPP TS 48.060: \"Inband control of remote transcoders and rate
adaptors\".
[32] 3GPP TS 48.062: \"Inband Tandem Free Operation (TFO) of Speech Codecs\".
[33] 3GPP TS 46.020: \"Half Rate Speech Transcoding\".
# 3 Definitions and abbreviations
## 3.1 Definitions
No specific definitions apply to the present document.
## 3.2 Abbreviations
For the purposes of the present document, the following abbreviations apply:
ACS Active_Codec_Set
AMR Adaptive Multi-Rate
BSC Base Station Controller
BTS Base Transceiver Station
CCU Channel Codec Unit
CMC Codec_Mode_Command
CMI Codec_Mode_Indication
CMR Codec_Mode_Request
DFE Downlink Frame Error
ICM Initial_Codec_Mode
PAB Phase Alignment Bit
PAC Phase Alignment Command
RA Rate Adaption
RIF Request or Indication Flag
TAC Time Alignment Command
TAE Time Alignment Extension
TFO Tandem Free Operation
TFOE TFO Enable
TRAU Transcoder and Rate Adaption Unit
UFE Uplink Frame Error
Other abbreviations used in the present document are listed in 3GPP TS 21.905.
# 4 General approach
The TRAU shall be controlled by the BTS when it is positioned remote from the
BTS. In this case, the speech/data information and TRAU control signals
exchanged between the Channel Codec Unit (CCU) in the BTS and the TRAU shall
be transferred in frames denoted \"TRAU frames\".
The TRAU frames may be carried by either 16 kbit/s traffic channels or 8
kbit/s channels. The choice of the traffic channel bit rate or submultiplexing
scheme is operator dependent.
The TRAU frames have a fixed length of:
‑ 160 bits (20 ms) when 8 kbit/s submultiplexing is used;
‑ 320 bits (20 ms) when 16 kbit/s submultiplexing is used.
The protocol between the BTS and the TRAU should be the same if the TRAU is
positioned either at the MSC site or at the BSC site. In the first case, the
BSC should be considered as transparent for 16 kbit/s and 8 kbit/s channels.
The TRAU is considered a part of the BSC when the TRAU is remote from the BTS
(see 3GPP TS 48.052), and the signalling between the BSC and the TRAU (e.g.
detection of call release, handover and transfer of O&M information) may be
performed by using BSC internal signals. However, the signalling between the
CCU and the TRAU, using TRAU frames as specified in the present document, is
mandatory when the TRAU is remote from the BTS.
For data transfer, a conversion function is required, in addition to the
conversion/rate adaption specified in 3GPP TS 48.020, to adapt ITU‑T V.110
frames to the TRAU data frames. This function constitutes the RAA.
NOTE: If standard 64 kbit/s switching is used in the BSC, multiplexing
according to ITU‑T Recommendation I.460 should apply at both sides of the
switch.
A possible configuration of the TRAU and the CCU is shown in figure 4.1.
The functions inside the TRAU are:
‑ \"Remote Transcoder and Rate Adaptor Control Function\" (RTRACF);
‑ \"Remote Speech Handler Function\" (RSHF);
‑ the RAA function;
‑ the RA2 function;
‑ the transcoder function.
The functions inside the CCU are:
‑ \"Transcoder and Rate Adaptor Control Function\" (TRACF);
‑ \"Speech Handler Function\" (SHF);
‑ the RAA function;
‑ the RA1/RA1\' function;
‑ the channel codec function.
The present document does not describe the procedures inside the TRAU and the
CCU. The layout in figure 4.1 is only intended as a reference model.
NOTE: This technical specification assumes the DTX handler function to be part
of the Transcoder Function.
Figure 3GPP TS 48.061/4.1: Functional entities for handling of control\ of
remote transcoders and rate adaptors
# 5 Frame structure
## 5.1 16 kbit/s submultiplexing
### 5.1.1 Frames for Speech Services
#### 5.1.1.1 Frame for Half Rate speech
* * *
                  Bit number
**Octet no.** 1 2 3 4 5 6 7 8 1 0 0 0 0 0 0 0 0 2 0 0 0 0 0 0 0 0 3 1 C1 C2 C3
C4 C5 C6 C7 4 C8 C9 C10 C11 C12 C13 C14 C15 5 1 UFI D1 D2 D3 D4 D5 D6 6 D7 D8
D9 D10 D11 D12 D13 D14 7 1 D15 D16 D17 D18 D19 D20 D21 8 D22 D23 D24 D25 D26
D27 D28 D29 9 1 D30 D31 D32 D33 D34 D35 D36 10 D37 D38 D39 D40 D41 D42 D43 D44
11 1 CRC2 CRC1 CRC0 D45 D46 D47 D48 12 D49 D50 D51 D52 D53 D54 D55 D56 13 1
D57 D58 D59 D60 D61 D62 D63 14 D64 D65 D66 D67 D68 D69 D70 D71 15 1 D72 D73
D74 D75 D76 D77 D78 16 D79 D80 D81 D82 D83 D84 D85 D86 17 1 D87 D88 D89 D90
D91 D92 D93 18 D94 D95 D96 D97 D98 D99 D100 D101 19 1 D102 D103 D104 D105 D106
D107 D108 20 D109 D110 D111 D112 1 1 1 1 21 1 1 1 1 1 1 1 1 22 1 1 1 1 1 1 1 1
23 1 1 1 1 1 1 1 1 24 1 1 1 1 1 1 1 1 25 1 1 1 1 1 1 1 1 26 1 1 1 1 1 1 1 1 27
1 1 1 1 1 1 1 1 28 1 1 1 1 1 1 1 1 29 1 1 1 1 1 1 1 1 30 1 1 1 1 1 1 1 1 31 1
1 1 1 1 1 1 1 32 1 1 1 1 1 1 1 1 33 1 1 1 1 1 1 1 1 34 1 1 1 1 1 1 1 1 35 1 1
1 1 1 1 1 1 36 1 1 1 1 1 1 1 1 37 1 1 1 1 1 1 1 1 38 1 1 1 1 1 1 1 1 39 1 1 1
1 1 1 C16 C17 40 C18 C19 C20 C21 T1 T2 T3 T4
* * *
#### 5.1.1.2 Frames for Adaptive Multi-Rate Speech
See 3GPP TS 48.060 for16 kBit/s submultiplexing.
### 5.1.2 Data frame
* * *
              Bit number
Octet no. 1 2 3 4 5 6 7 8  
1 0 0 0 0 0 0 0 0  
2 0 0 0 0 0 0 0  
3 1 C1 C2 C3 C4 C5 C6 C7  
4 C8 C9 C10 C11 C12 C13 C14 C15  
5 1 D1 D2 D3 D4 D5 D6 D7  
6 1 D8 D9 D10 D11 D12 D13 D14  
7 1 D15 D16 D17 D18 D19 D20 D21  
8 1 D22 D23 D24 D25 D26 D27 D28 Data frame 9 1 D29 D30 D31 D32 D33 D34 D35
position 1 10 1 D36 D37 D38 D39 D40 D41 D42  
11 1 D43 D44 D45 D46 D47 D48 D49  
12 1 D50 D51 D52 D53 D54 D55 D56  
13 1 D57 D58 D59 D60 D61 D62 D63  
14 1 1 1 1 1 1 1 1  
15 1 1 1 1 1 1 1 1  
16 1 1 1 1 1 1 1 1  
17 1 1 1 1 1 1 1 1  
18 1 1 1 1 1 1 1 1  
19 1 1 1 1 1 1 1 1  
20 1 1 1 1 1 1 1 1  
21 1 1 1 1 1 1 1 1  
22 1 1 1 1 1 1 1 1  
23 1 D\'1 D\'2 D\'3 D\'4 D\'5 D\'6 D\'7  
24 1 D\'8 D\'9 D\'10 D\'11 D\'12 D\'13 D\'14  
25 1 D\'15 D\'16 D\'17 D\'18 D\'19 D\'20 D\'21  
26 1 D\'22 D\'23 D\'24 D\'25 D\'26 D\'27 D\'28 Data frame 27 1 D\'29 D\'30
D\'31 D\'32 D\'33 D\'34 D\'35 position 3 28 1 D\'36 D\'37 D\'38 D\'39 D\'40
D\'41 D\'42  
29 1 D\'43 D\'44 D\'45 D\'46 D\'47 D\'48 D\'49  
30 1 D\'50 D\'51 D\'52 D\'53 D\'54 D\'55 D\'56  
31 1 D\'57 D\'58 D\'59 D\'60 D\'61 D\'62 D\'63  
32 1 1 1 1 1 1 1 1  
33 1 1 1 1 1 1 1 1  
34 1 1 1 1 1 1 1 1  
35 1 1 1 1 1 1 1 1  
36 1 1 1 1 1 1 1 1  
37 1 1 1 1 1 1 1 1  
38 1 1 1 1 1 1 1 1  
39 1 1 1 1 1 1 1 1  
40 1 1 1 1 1 1 1 1
* * *
### 5.1.3 O&M frame
* * *
              Bit number
Octet no. 1 2 3 4 5 6 7 8 1 0 0 0 0 0 0 0 0 2 0 0 0 0 0 0 0 0 3 1 C1 C2 C3 C4
C5 C6 C7 4 C8 C9 C10 C11 C12 C13 C14 C15 5 1 D1 D2 D3 D4 D5 D6 D7 6 D8 D9 D10
D11 D12 D13 D14 D15 7 1 D16 D17 D18 D19 D20 D21 D22 8 D23 D24 D25 D26 D27 D28
D29 D30 9 1 D31 D32 D33 D34 D35 D36 D37 10 D38 D39 D40 D41 D42 D43 D44 D45 11
1 D46 D47 D48 D49 D50 D51 D52 12 D53 D54 D55 D56 D57 D58 D59 D60 13 1 D61 D62
D63 D64 D65 D66 D67 14 D68 D69 D70 D71 D72 D73 D74 D75 15 1 D76 D77 D78 D79
D80 D81 D82 16 D83 D84 D85 D86 D87 D88 D89 D90 17 1 D91 D92 D93 D94 D95 D96
D97 18 D98 D99 D100 D101 D102 D103 D104 D105 19 1 D106 D107 D108 D109 D110
D111 D112 20 D113 D114 D115 D116 D117 D118 D119 D120 21 1 D121 D122 D123 D124
D125 D126 D127 22 D128 D129 D130 D131 D132 D133 D134 D135 23 1 D136 D137 D138
D139 D140 D141 D142 24 D143 D144 D145 D146 D147 D148 D149 D150 25 1 D151 D152
D153 D154 D155 D156 D157 26 D158 D159 D160 D161 D162 D163 D164 D165 27 1 D166
D167 D168 D169 D170 D171 D172 28 D173 D174 D175 D176 D177 D178 D179 D180 29 1
D181 D182 D183 D184 D185 D186 D187 30 D188 D189 D190 D191 D192 D193 D194 D195
31 1 D196 D197 D198 D199 D200 D201 D202 32 D203 D204 D205 D206 D207 D208 D209
D210 33 1 D211 D212 D213 D214 D215 D216 D217 34 D218 D219 D220 D221 D222 D223
D224 D225 35 1 D226 D227 D228 D229 D230 D231 D232 36 D233 D234 D235 D236 D237
D238 D239 D240 37 1 D241 D242 D243 D244 D245 D246 D247 38 D248 D249 D250 D251
D252 D253 D254 D255 39 1 D256 D257 D258 D259 D260 D261 D262 40 D263 D264 S1 S2
S3 S4 S5 S6
* * *
### 5.1.4 Coding
In the following clauses, the coding of the frames is described. Any spare or
not used control bits should be coded binary \"1\".
#### 5.1.4.1 Coding of frames for speech services
##### 5.1.4.1.1 Coding of frames for Half Rate speech **Control bits
(C‑bits):**
+----------------------+----------------------+----------------------+ | Description | Uplink | Downlink | +----------------------+----------------------+----------------------+ | Frame type | C1 C2 C3 C4 | C1 C2 C3 C4 | | | | | | (Bits C1 ‑ C4) | 0 0 0 1 | 1 1 1 0 | +----------------------+----------------------+----------------------+ | Channel type | 1: half rate | 1: half rate | | | | | | Bit C5 | | | +----------------------+----------------------+----------------------+ | Time Alignment | Binary number | Binary number | | | indicating the | indicating the | | (Bits C6 ‑ C11) | required timing | timing adjustment | | | adjustment to be in | made. | | | steps of 250/500 µs. | | +----------------------+----------------------+----------------------+ | | The following values | | | | apply for the coding | | | | | | | | C6C7 . . . C11 | | | | | | | | 0 0 0 0 0 0 No | | | | change in frame | | | | timing | | | | | | | | 0 0 0 0 0 1 Delay | | | | frame 1 * 500 µs | | | | | | | | 0 0 0 0 1 0 Delay | | | | frame 2 * 500 µs | | | | | | | | . . . .... | | | | | | | | . . . .... | | | | | | | | 1 0 0 1 1 1 Delay | | | | frame 39 * 500 µs | | | | | | | | 1 0 1 0 0 0 Not used | | | | | | | | . . . .... | | | | | | | | 1 1 1 1 0 1 Not used | | | | | | | | 1 1 1 1 1 0 Delay | | | | frame 1 * 250 µs | | | | | | | | 1 1 1 1 1 1 Advance | | | | frame 250 µs | | +----------------------+----------------------+----------------------+ | Uplink | 0: BFI = 0 | 0: UFE = 0: bad | | | | uplink framing | | Bad Frame Indicator | 1: BFI = 1 | | | (BFI) | | 1: UFE = 1: good | | | | uplink | | C12 (see 3GPP TS | | | | 46.041) | | framing | | | | | | Downlink | | | | | | | | Uplink Frame Error | | | | (UFE) | | | | | | | | C12 (see | | | | clause 6.8.1.3) | | | +----------------------+----------------------+----------------------+ | Silence Descriptor | C13 C14: SID | | | (SID) | | | | | SID1 SID0 | | | C13‑C14 | | | | | 0 0: SID = 0 | | | (see 3GPP TS 46.041) | | | | | 0 1: SID = 1 | | | | | | | | 1 0: SID = 2 | | +----------------------+----------------------+----------------------+ | Time Alignment Flag | 0: TAF = 0 | Spare | | (TAF) | | | | | 1: TAF = 1 | | | C15 | | | | | | | | (see 3GPP TS 46.041) | | | +----------------------+----------------------+----------------------+ | Speech indicator | Spare | 0: SP = 0 | | (SP) | | | | | | 1: SP = 1 | | C16 | | | | | | | | (see 3GPP TS 46.041) | | | +----------------------+----------------------+----------------------+ | DTX downlink | 0: Downlink DTX | Spare | | indicator (DTXd) | shall not be applied | | | | | | | C17 | 1: Downlink DTX | | | | shall be applied | | +----------------------+----------------------+----------------------+ | Bits C18 ‑ C21 | Spare | Spare | +----------------------+----------------------+----------------------+
UFI bit: Unreliable Frame Indication (see 3GPP TS 46.041).
This bit is set to binary \"1\" in the downlink direction.
**Data Bits (D‑bits)**
Bits D1 .. D112: Speech block transferred in the same order as output from the
transcoder (see 3GPP TS 46.020).
**Cyclic Redundancy Check bits (CRC‑bits)**
Bits CRC0 .. CRC2: CRC of the bits D1 to D44.
The bits are coded according to a cyclic code using the generator polynomial:
g(X) = X3+X+1
The encoding of the cyclic code is performed in a systematic form, which means
that, in GF(2), the polynomial:
D1*X46 + D2*X45 + ... + D44*X3 + CRC2*X2 + CRC1*X + CRC0.
where CRC0, CRC1, CRC2 are the parity bits, when divided by g(X) yields a
remainder equal to:
1 + X + X2.
**Time Alignment Bits**
Bits T1 .. T4: Bits positioned at the end of the downlink and uplink TRAU
speech frames.
Downlink:
If the timing of the frame is to be advanced 250 µs, these 4 bits are not
transferred in order to reduce the frame length accordingly. When transferred,
the bits are set to binary \"1\".
Uplink:
T1 and T2 are set to binary \"1\".
If the timing of the frame is to be advanced 125 µs, the bits T3 and T4 are
not transferred in order to reduce the frame length accordingly. When
transferred, the bits are set to binary \"1\" (see clause 6.6.1.1.2).
##### 5.1.4.1.2 Coding of frames for Adaptive Multi-Rate speech
See 3GPP TS 48.060 for 16 kBit/s submultiplexing.
#### 5.1.4.2 Coding of data frames
Any spare or not used control bits should be coded binary \"1\".
**Control bits (C‑bits):**
+---------------------------+---------------+---------------------------------+ | Description | Uplink | Downlink | +---------------------------+---------------+---------------------------------+ | Frame type | C1 C2 C3 C4 | C1 C2 C3 C4 | | | | | | Bits C1‑C4 | 0 1 0 0: Data | 1 0 1 1: Data | +---------------------------+---------------+---------------------------------+ | Channel type | 1: half rate | 1: half rate | | | | | | Bit C5 | | | +---------------------------+---------------+---------------------------------+ | Intermediate RA bit rate | 0: 8 kbit/s | 0: 8 kbit/s | | | | | | Bit C6 | | | +---------------------------+---------------+---------------------------------+ | Bits C7 ‑ C11 | Spare | Spare | +---------------------------+---------------+---------------------------------+ | Bit C12 | Spare | 0: UFE = 0: bad uplink framing | | | | | | Uplink Frame Error (UFE)\ | | 1: UFE = 1: good uplink framing | | C12 (see clause 6.8.1.3) | | | +---------------------------+---------------+---------------------------------+ | Bits C13‑C15 | Spare | Spare | +---------------------------+---------------+---------------------------------+
**Idle data frame**
An idle data frame is a data frame with all data bit positions set to binary
\"1\" (i.e. all bits of the modified V.110 frames are set to \"1\").
#### 5.1.4.3 Coding of O&M frames
**Control bits (C‑bits):**
+---------------------------+--------------+---------------------------------+ | Description | Uplink | Downlink | +---------------------------+--------------+---------------------------------+ | Frame type | C1 C2 C3 C4 | C1 C2 C3 C4 | | | | | | Bits C1‑C4 | 0 0 1 0: O&M | 1 1 0 1: O&M | +---------------------------+--------------+---------------------------------+ | Channel type | 1: half rate | 1: half rate | | | | | | Bit C5 | | | +---------------------------+--------------+---------------------------------+ | Bits C6 ‑ C11 | Spare | Spare | +---------------------------+--------------+---------------------------------+ | Bit C12 | Spare | 0: UFE = 0: bad uplink framing | | | | | | Uplink Frame Error (UFE)\ | | 1: UFE = 1: good uplink framing | | C12 (see clause 6.8.1.3) | | | +---------------------------+--------------+---------------------------------+ | Bits C13‑C15 | Spare | Spare | +---------------------------+--------------+---------------------------------+
**Data Bits (D‑bits)**
Bits D1 .. D264: Bits used for transfer of O&M information. The coding and use
of these bits are left to the manufacturer of the BSC/TRAU.
**Spare Bits (S‑bits)**
Bits S1 .. S6: Spare.
### 5.1.5 Order of Bit Transmission
See 3GPP TS 48.060.
## 5.2 8 kbit/s submultiplexing
### 5.2.1 Frames for Speech Services
#### 5.2.1.1 Frame for Half Rate Speech
* * *
             Bit number
Octet no 1 2 3 4 5 6 7 8 1 0 0 0 0 0 0 0 0 2 1 C1 C2 C3 C4 C5 XC1 XC2 3 0 1
XC3 XC4 XC5 XC6 D1 D2 4 1 D3 D4 D5 D6 D7 D8 D9 5 1 D10 D11 D12 D13 D14 D15 D16
6 1 D17 D18 D19 D20 D21 D22 D23 7 1 D24 D25 D26 D27 D28 D29 D30 8 1 D31 D32
D33 D34 D35 D36 D37 9 1 D38 D39 D40 D41 D42 D43 D44 10 1 CRC2 CRC1 CRC0 D45
D46 D47 D48 11 1 D49 D50 D51 D52 D53 D54 D55 12 1 D56 D57 D58 D59 D60 D61 D62
13 1 D63 D64 D65 D66 D67 D68 D69 14 1 D70 D71 D72 D73 D74 D75 D76 15 1 D77 D78
D79 D80 D81 D82 D83 16 1 D84 D85 D86 D87 D88 D89 D90 17 1 D91 D92 D93 D94 D95
D96 D97 18 1 D98 D99 D100 D101 D102 D103 D104 19 1 D105 D106 D107 D108 D109
D110 D111 20 1 D112 C6 C7 C8 C9 T1 T2
* * *
#### 5.2.1.2 Frames for Adaptive Multi-Rate Speech
##### 5.2.1.2.1 Frame for Lower Codec Modes
This frame layout shall be used for No_Speech frames and speech frames for
codec modes 4,75, 5,15 and 5,90 kBit/s.
* * *
             Bit number
Octet no **1** **2** **3** **4** **5** **6** **7** **8** **1** **0** **0**
**0** **0** **0** **0** **0** **0** **2** **1** D1 D2 D3 D4 D5 D6 D7 **3**
**1** **C1** **C2** **C3** **C4** **C5** D8 D9 **4** **0** **1** D10 D11 D12
D13 D14 D15 **5** **1** D16 D17 D18 D19 D20 D21 D22 **6** **1** D29 **7**
**1** D36 **8** **1** D43 **9** **1** D50 **10** **1** D57 **11** **1** D64
**12** **1** D71 **13** **1** D78 **14** **1** D85 **15** **1** D92 **16**
**1** D99 **17** **1** D106 **18** **1** D113 **19** **1** D120 **20** **1**
D121 D122 D123 D124 D125 D126 **T**
* * *
##### 5.2.1.2.2 Speech frame for Codec Mode 6,70 kBit/s
This frame layout shall be used for speech frames for codec mode 6,70 kBit/s.
The synchronisation pattern is unique and identifies this codec mode.
* * *
             Bit number
Octet no **1** **2** **3** **4** **5** **6** **7** **8** **1** **0** **0**
**0** **0** **0** **0** **0** **0** **2** **1** D1 D2 D3 D4 D5 D5 D7 **3**
**1** **C1** **C2** **C3** D8 D9 D10 D11 **4** **1** D12 D13 D14 D15 D16 D17
D18 **5** **1** D19 D D D D D D25 **6** **0** D26 D D D D D D32 **7** **1**
D33 D D D D D D39 **8** D40 D D D D D D D47 **9** **1** D48 D D D D D D54
**10** D55 D D D D D D D62 **11** **1** D63 D D D D D D69 **12** D70 D D D D D
D D77 **13** **1** D78 D D D D D D84 **14** D85 D D D D D D D92 **15** **1**
D93 D D D D D D99 **16** D100 D D D D D D D107 **17** **1** D108 D D D D D
D114 **18** D115 D D D D D D D122 **19** **1** D D D D D D D129 **20** D130 D
D D D D D **D137**
* * *
##### 5.2.1.2.3 Speech frame for Codec Mode 7,40 kBit/s
This frame layout shall be used for speech frames for codec mode 7,40 kBit/s.
The synchronisation pattern is unique and identifies this codec mode.
* * *
                        Bit number
Octet no Octet no **1** **2** **3** **4** **5** **6** **7** **8** 1 **1**
**0** **0** **1** D1 D2 D3 D4 D5 2 **2** **0** D6 D7 D8 D9 D10 D11 D12 3 **3**
**1** **C1** **C2** **C3** D13 D14 D15 D16 4 **4** **0** D17 D18 D19 D20 D21
D22 D23 5 **5** D24 D D D D D D D31 6 **6** D32 D D D D D D D39 7 **7** D40 D
D D D D D D47 8 **8** D48 D D D D D D D55 9 **9** D56 D D D D D D D63 10
**10** D64 D D D D D D D71 11 **11** D72 D D D D D D D79 12 **12** D80 D D D D
D D D87 13 **13** D88 D D D D D D D95 14 **14** D96 D D D D D D D103 15 **15**
D104 D D D D D D D111 16 **16** D112 D D D D D D D119 17 **17** D120 D D D D D
D D127 18 **18** D128 D D D D D D D135 19 **19** D136 D D D D D D D143 20
**20** D144 D145 D146 D147 D148 D149 D150 **D151**
* * *
##### 5.2.1.2.4 Speech frame for Codec Mode 7,95 kBit/s
AMR Codec Mode 7,95 kBit/s is not supported in 8 kBit/s submultiplexing.
#### 5.2.1.3 Frames for Speech Codec Configuration Exchange
* * *
             Bit number
Octet no 1 2 3 4 5 6 7 8 1 0 0 0 0 0 0 0 0 2 1 C1 C2 C3 C4 C5 D1 D2 3 0 1 D3
D4 D5 D6 D7 D8 4 1 D15 5 1 D22 6 1 D29 7 1 D36 8 1 D43 9 1 D50 10 1 D57 11 1
D64 12 1 D71 13 1 D78 14 1 D85 15 1 D92 16 1 D99 17 1 D106 18 1 D113 19 1 D120
20 1 D121 D122 D123 D124 D125 T1 T2
* * *
### 5.2.2 Data frame
* * *
              Bit number
Octet no. 1 2 3 4 5 6 7 8  
1 0 0 0 0 0 0 0 0  
2 1 C1 C2 C3 C4 C5 D1 D2  
3 0 1 D3 D4 D5 D6 D7 D8  
4 1 D9 D10 D11 D12 D13 D14 D15  
5 1 D16 D17 D18 D19 D20 D21 D22 Data frame 6 1 D23 D24 D25 D26 D27 D28 D29
position 1 7 1 D30 D31 D32 D33 D34 D35 D36  
8 1 D37 D38 D39 D40 D41 D42 D43  
9 1 D44 D45 D46 D47 D48 D49 D50  
10 1 D51 D52 D53 D54 D55 D56 D57  
11 1 D58 D59 D60 D61 D62 D63 D\'1  
12 1 D\'2 D\'3 D\'4 D\'5 D\'6 D\'7 D\'8  
13 1 D\'9 D\'10 D\'11 D\'12 D\'13 D\'14 D\'15  
14 1 D\'16 D\'17 D\'18 D\'19 D\'20 D\'21 D\'22  
15 1 D\'23 D\'24 D\'25 D\'26 D\'27 D\'28 D\'29 Data frame 16 1 D\'30 D\'31
D\'32 D\'33 D\'34 D\'35 D\'36 position 2 17 1 D\'37 D\'38 D\'39 D\'40 D\'41
D\'42 D\'43  
18 1 D\'44 D\'45 D\'46 D\'47 D\'48 D\'49 D\'50  
19 1 D\'51 D\'52 D\'53 D\'54 D\'55 D\'56 D\'57  
20 1 D\'58 D\'59 D\'60 D\'61 D\'62 D\'63 1
* * *
### 5.2.3 O&M frame
* * *
              Bit number
Octet no. 1 2 3 4 5 6 7 8 1 0 0 0 0 0 0 0 0 2 1 C1 C2 C3 C4 C5 XC1 XC2 3 0 1
XC3 XC4 XC5 XC6 D1 D2 4 1 D3 D4 D5 D6 D7 D8 D9 5 1 D10 D11 D12 D13 D14 D15 D16
6 1 D17 D18 D19 D20 D21 D22 D23 7 1 D24 D25 D26 D27 D28 D29 D30 8 1 D31 D32
D33 D34 D35 D36 D37 9 1 D38 D39 D40 D41 D42 D43 D44 10 1 D45 D46 D47 D48 D49
D50 D51 11 1 D52 D53 D54 D55 D56 D57 D58 12 1 D59 D60 D61 D62 D63 D64 D65 13 1
D66 D67 D68 D69 D70 D71 D72 14 1 D73 D74 D75 D76 D77 D78 D79 15 1 D80 D81 D82
D83 D84 D85 D86 16 1 D87 D88 D89 D90 D91 D92 D93 17 1 D94 D95 D96 D97 D98 D99
D100 18 1 D101 D102 D103 D104 D105 D106 D107 19 1 D108 D109 D110 D111 D112
D113 D114 20 1 D115 D116 D117 D118 D119 D120 1
* * *
### 5.2.4 Coding
#### 5.2.4.1 Coding for Half Rate Speech and Half Rate Data Services
In the following clauses, the coding of the frames is described for all
services, except for Adaptive Multi-Rate Speech (AMR). Any spare or not used
transmitted control bits should be coded binary \"1\".
##### 5.2.4.1.1 Uplink coding
**Control bits (C‑bits, for all frame types)**
The control bits are coded according to the following table:
* * *
C1 C2 C3 C4 C5 Meaning 0 0 0 1 OP Speech frame 0 0 1 1 OP Data frame 0 1 0 1
OP O&M frame 1 1 1 1 OP Configuration frame
* * *
All other codings are reserved.
OP: odd parity of bits C1 to C4.
In the following, the term \"frame type\" refers to the control bits C1 to C3.
* * *
C6 C7 C8 C9 Meaning TA2 TA1 TA0 DTXd For speech frame only
* * *
DTXd: DTX downlink indicator.
0: Downlink DTX shall not be applied.
1: Downlink DTX shall be applied.
TA2‑TA0: Time Alignment Command, see clause 6.6.1.2.1.
**Extended control bits**
The extended control bits are coded according to the following table:
Frames for Half Rate Speech
+-----+-----+-----+-----+-----+-----+---------------------------------+ | XC1 | XC2 | XC3 | XC4 | XC5 | XC6 | Meaning | +-----+-----+-----+-----+-----+-----+---------------------------------+ | 0 | 0 | 0 | 0 | 0 | OP | Good speech frame with UFI = 0 | | | | | | | | (BFI=0, SID=0, TAF=1) (BFI=0, | | | | | | | | SID=0, TAF=0) | +-----+-----+-----+-----+-----+-----+---------------------------------+ | 0 | 0 | 0 | 0 | 1 | OP | Unreliable speech frame (if | | | | | | | | speech decoder is in speech | | | | | | | | decoding mode) or unusable | | | | | | | | frame (if speech decoder is in | | | | | | | | comfort noise insertion mode) | | | | | | | | with UFI = 1 | | | | | | | | | | | | | | | | (BFI=0, SID=0, TAF=1) | | | | | | | | | | | | | | | | (BFI=0, SID=0, TAF=0) | +-----+-----+-----+-----+-----+-----+---------------------------------+ | 0 | 0 | 0 | 1 | 0 | OP | Valid SID frame with UFI = 0 | | | | | | | | (BFI=0, SID=2, TAF=1) | | | | | | | | | | | | | | | | (BFI=0, SID=2, TAF=0) | +-----+-----+-----+-----+-----+-----+---------------------------------+ | 0 | 0 | 0 | 1 | 1 | OP | Invalid SID frame with UFI = 1 | | | | | | | | (BFI=0, SID=2, TAF=1) | | | | | | | | | | | | | | | | (BFI=0, SID=2, TAF=0) | +-----+-----+-----+-----+-----+-----+---------------------------------+ | 0 | 1 | 0 | 0 | 0 | OP | Invalid SID frame at TAF=0 with | | | | | | | | UFI = 0 | | | | | | | | | | | | | | | | (BFI=0, SID=1, TAF=0) | | | | | | | | | | | | | | | | (BFI=1, SID=1, TAF=0) | | | | | | | | | | | | | | | | (BFI=1, SID=2, TAF=0) | +-----+-----+-----+-----+-----+-----+---------------------------------+ | 0 | 1 | 0 | 0 | 1 | OP | Invalid SID frame at TAF=0 with | | | | | | | | UFI = 1 | | | | | | | | | | | | | | | | (BFI=0, SID=1, TAF=0) | | | | | | | | | | | | | | | | (BFI=1, SID=1, TAF=0) | | | | | | | | | | | | | | | | (BFI=1, SID=2, TAF=0) | +-----+-----+-----+-----+-----+-----+---------------------------------+ | 0 | 1 | 0 | 1 | 0 | OP | Invalid SID frame at TAF=1 with | | | | | | | | UFI = 0 | | | | | | | | | | | | | | | | (BFI=0, SID=1, TAF=1) | | | | | | | | | | | | | | | | (BFI=1, SID=1, TAF=1) | | | | | | | | | | | | | | | | (BFI=1, SID=2, TAF=1) | +-----+-----+-----+-----+-----+-----+---------------------------------+ | 0 | 1 | 0 | 1 | 1 | OP | Invalid SID frame at TAF=1 with | | | | | | | | UFI = 1 | | | | | | | | | | | | | | | | (BFI=0, SID=1, TAF=1) | | | | | | | | | | | | | | | | (BFI=1, SID=1, TAF=1) | | | | | | | | | | | | | | | | (BFI=1, SID=2, TAF=1) | +-----+-----+-----+-----+-----+-----+---------------------------------+ | 0 | 1 | 1 | 0 | 0 | OP | Bad speech frame or unusable | | | | | | | | frame at TAF = 0 with UFI = 0 | | | | | | | | | | | | | | | | (BFI=1, SID=0, TAF=0) | +-----+-----+-----+-----+-----+-----+---------------------------------+ | 0 | 1 | 1 | 0 | 1 | OP | Bad speech frame or unusable | | | | | | | | frame at TAF = 0 with UFI = 1 | | | | | | | | | | | | | | | | (BFI=1, SID=0, TAF=0) | +-----+-----+-----+-----+-----+-----+---------------------------------+ | 0 | 1 | 1 | 1 | 0 | OP | Bad speech frame or unusable | | | | | | | | frame at TAF = 1 with UFI = 0 | | | | | | | | | | | | | | | | (BFI=1, SID=0, TAF=1) | +-----+-----+-----+-----+-----+-----+---------------------------------+ | 0 | 1 | 1 | 1 | 1 | OP | Bad speech frame or unusable | | | | | | | | frame at TAF = 1 with UFI = 1 | | | | | | | | | | | | | | | | (BFI=1, SID=0, TAF=1) | +-----+-----+-----+-----+-----+-----+---------------------------------+
O&M frame
* * *
XC1 XC2 XC3 XC4 XC5 XC6 Meaning 1 1 1 1 1 OP O&M frame
* * *
All other codings are reserved.
OP: odd parity of bits XC1 to XC5.
BFI, SID, TAF: see description in clause 5.1.4.1.
UFI bit: Unreliable Frame Indication (see 3GPP TS 46.041).
**Cyclic Redundancy Check bits (CRC‑bits)**
Half Rate Speech frame: Bits CRC0 .. CRC2: CRC of the bits D1 to D44. Same
coding as in clause 5.1.4.1.
**Data bits (D‑bits)**
Speech frame: Bits D1 .. D112:
For good speech frame: speech block transferred in the same order as output
from the transcoder (see 3GPP TS 46.020).
For valid SID frame: SID data block transferred in the same order as output
from the transcoder (see 3GPP TS 46.022).
Data frame: Bits D1 .. D63 for data frame position 1 and bits D\'1 .. D\'63
for data frame position 2 (see clause 6.7.1).
O&M frame: Bits D1 .. D120: Bits used for transfer of O&M information. The
coding and use of these bits are left to the manufacturer of the BSC/TRAU.
Configuration frame: Bits D1...D125: Bits are reserved for Configuration
Exchange to support Tandem Free Operation. They are defined in TS 28.062.
**Time Alignment bits (T‑bits)**
Bits T1..T2: Bits positioned at the end of the uplink TRAU speech frame.
T1 is set to binary \"1\".
If the timing of the frame is to be advanced 125 µs , the bit T2 is not
transferred in order to reduce the frame length accordingly. When transferred,
the bit T2 is set to binary \"1\".
##### 5.2.4.1.2 Downlink coding
**Control bits**
* * *
C1 C2 C3 C4 C5 Meaning 0 0 0 UFE OP Speech frame 0 0 1 UFE OP Data frame 0 1 0
UFE OP O&M frame 1 1 1 UFE OP Configuration frame
* * *
All other codings are reserved.
UFE: Uplink Frame Error.
UFE = 0: bad uplink framing.
UFE = 1: good uplink framing.
See clause 6.8.2.2.
OP: Odd parity of bits C1 to C4.
In the following, the term \"frame type\" refers to the control bits C1 to C3.
* * *
C6 C7 C8 C9 Meaning 1 1 1 1 Spare bits
* * *
**Extended control bits**
The extended control bits are coded according to the following table:
Frames for Half Rate speech
* * *
XC1 XC2 XC3 XC4 XC5 XC6 Meaning 0 0 0 0 0 OP Good speech frame (SP = 1) 0 0 0
1 0 OP Valid SID frame (SP = 0)
* * *
SP: Speech indicator (see 3GPP TS 46.041).
O&M frame
* * *
XC1 XC2 XC3 XC4 XC5 XC6 Meaning 1 1 1 1 1 OP O&M
* * *
All other codings are reserved.
XC6: odd parity of bits XC1 to XC5.
**Data bits (D‑bits)**
Same as the uplink.
**Time Alignment bits (T‑bits)**
Bits T1..T2: Bits positioned at the end of the downlink TRAU speech frame.
If the timing of the frame is to be advanced 250 µs, the bits T1 and T2 are
not transferred in order to reduce the frame length accordingly. When
transferred, the bits are set to binary \"1\" (see clause 6.6.1.2.1).
**Cyclic Redundancy Check bits (CRC‑bits):**
Same as the uplink.
#### 5.2.4.2 Coding for Adaptive Multi-Rate Speech
Coding in uplink and downlink direction is identical. The synchronisation
patterns for the Adaptive Multi Rate speech differ from the ones used for the
other services. An explicit Frame_Type is not defined for AMR, instead the
synchronisation patterns itself identify the service (Frame_Type) and to some
extent the Codec_Mode.
The CRC-bits inserted are calculated as described in clause 5.1.4.1. The
control elements are as defined in 3GPP TS 48.060 (RIF, CMI, CMR, TAC, TAE,
PAB, ...). The coding is, however, sometimes different.
##### 5.2.4.2.1 No_Speech Frame
The frame layout for lower modes shall be used.
[\ Control Information (C-Bits)]{.underline}:\ C1 . C2. C3: set to "1.0.0", if
RIF equals \"0\" (frame with Codec_Mode Indication phase)
set to \"1.0.1\", if RIF equals \"1\" (frame with Codec_Mode Request phase)\
C4 . C5: set to "0.0", this is the Frame_Classification for No_Speech Frames.
[Coding of D-Bits:]{.underline}
The D-Bits in No_Speech frames carry additional control information:
D1 .. D6: Time Alignment Field (as defined in 3GPP TS 48.060)\ D7: In DL:
Uplink Frame Error (UFE) , in UL: Downlink Frame Error (DFE)\ D8 .. D10:
No_Speech_Classification (as defined in 3GPP TS 48.060)\ D11 .. D13: CMI_abs
(as defined in 3GPP TS 48.060)\ D14 .. D16: CMR_abs (as defined in 3GPP TS
48.060)
The Uplink Frame Error (UFE) is coded and defined as in 3GPP TS 48.060.\ The
Downlink Frame Error (DFE) is - different to 48.060 - defined in uplink
direction to allow fast recovery from synchronisation loss in higher codec
modes. The coding is like for UFE.\ The procedure is described in clause
6.9.2.
The coding for D55...D59 is common to all three lower code modes. These bits
are reserved for the Configuration Protocol (Config_Prot and Message_No) in
case of Tandem Free Operation, see 3GPP TS 48.062. If the BTS does not support
TFO or TFO is disabled, then these bits shall be set to \"0.0.0.0.0\".
D55 .. D57: Config_Prot\ D58 . D59: Message_No
[Time Alignment Extension and Phase Alignment:\ ]{.underline}D60: Phase
Alignment Bit (PAB) (as defined in 3GPP TS 48.060)\ D61 . D62: Time Alignment
Extension (TAE) (as defined in 3GPP TS 48.060)
[DTX and TFO control:]{.underline}
D63: DTX in downlink requested (DTXd) (as defined in 3GPP TS 48.060)\ D64: TFO
Enabled (TFOE) (as defined in 3GPP TS 48.060)\ \ The bits D65...D125 (61 bits)
are reserved for Tandem Free Operation (see 3GPP TS 48.062). If the BTS does
not support TFO or TFO is disabled, then these bits shall be set to all \"1\".
The bits D17...D54 (38 bits) are also reserved for Tandem Free Operation (see
3GPP TS 48.062), if not needed otherwise, i.e. in all No_Speech frames
classified neither as SID_Update nor as SID_Bad. If the BTS does not support
TFO or TFO is disabled, then these bits shall be set to all \"1\" in these
cases.
[In case the frames are classified as SID_Update or SID_Bad the bits D17...D54
code the]{.underline}
[Silence Description parameters (as defined in 3GPP TS 26.090):]{.underline}
[Silence Description parameters (as defined in 3GPP TS 26.090):\
]{.underline}D17 .. D19: Moving average predictor, initial values (s1...s3)\
D20 .. D45: Indexes of LSF submatrices (s4...s29)\ D46 .. D51: Logarithmic
frame energy (s30...s35)\ D52 .. D54: CRC1 over bits C1...C5, D1...D51.\ \
[Time Alignment Bits:\ ]{.underline}D126 .. T: Coding as defined for Half Rate
speech (T1 .. T2).
##### 5.2.4.2.2 Speech Frames for 4,75, 5,15 and 5,90 kBit/s
The frame layout for lower modes shall be used. Speech Frames for 4,75, 5,15
and 5,90 kBit/s are defined, if Frame Classification is not set to "0.0" ,
otherwise the frame is a No_Speech Frame (see above).
[Coding of Control Information (C-Bits):\ ]{.underline}The coding for C1 to C5
is common in all three Codec_Modes. Codec Mode Indication (CMI) plus Codec
Mode Request (CMR) plus Request or Indication Flag (RIF) are coded with one
3-bit field. These three control elements are as defined in 3GPP TS 48.060.
The coding is somewhat different:[\ ]{.underline}C1.C2.C3:\ 0 . 0 . 0: CMI =
4,75; CMR = ?; RIF = 0.\ 0 . 0 . 1: CMI = 5,15; CMR = ?; RIF = 0.\ 0 . 1 . 0:
CMI = 5,90; CMR = ?; RIF = 0.\ 0 . 1 . 1: CMI = ?; CMR = 4,75; RIF = 1.\ 1 . 0
. 0: CMI = ?; CMR = 5,15; RIF = 1.\ 1 . 0 . 1: CMI = ?; CMR = 5,90; RIF = 1.\
1 . 1 . 0: CMI = ?; CMR = 6,70; RIF = 1.\ 1 . 1 . 1: CMI = ?; CMR = 7,40; RIF
= 1.\ \ [Frame_Classification]{.underline} (C4...C5) is defined and coded as
in 3GPP TS 48.060.
[Coding of D-Bits:]{.underline}
The coding for D55...D59 is common to all three lower code modes. These bits
are reserved for the Configuration Protocol (Config_Prot and Message_No) in
case of Tandem Free Operation, see 3GPP TS 48.062. If the BTS does not support
TFO or TFO is disabled, then these bits shall be set to \"0.0.0.0.0\".
[AMR_Mode 4,75 kBit/s, see 3GPP TS 26.090:\ ]{.underline}D1 .. D3: spare (3
bits), set to "1"\ D4 .. D26: Indexes of the LSF submatrices (s1...s23)\ D27
.. D51: Indexes of the parameters of first sub-frame (s24...s48)\ D52 .. D54:
CRC1 over bits C1...C5, s1...s16, s18, s19, s21...s29, s45...s48.\ D55 .. D59:
reserved for TFO\ D60 .. D72: Indexes of the parameters of second sub-frame
(s49...s61)\ D73 .. D75: CRC2 over bits D55...D59, s49, s50.\ D76 .. D96:
Indexes of the parameters of third sub-frame (s62...s82)\ D97 .. D99: CRC3
over bits s62, s63, s79...s82.\ D100 .. D112: Indexes of the parameters of
fourth sub-frame (s83...s95)\ D113 .. D115: CRC4 over bits s83, s84.\ D116 ..
D126: spare (11 bits); set to \"1\".
[AMR_Mode 5,15 kBit/s, see 3GPP TS 26.090:\ ]{.underline}D1 .. D5: spare (5
bits); set to \"1\"\ D6...D28: Indexes of the LSF submatrices (s1...s23)\
D29...D51: Indexes of the parameters of first sub-frame (s24...s46)\ D52 ..
D54: CRC1 over bits C1...C5, s1...s16, s19...s29, s42...s46.\ D55 .. D59:
reserved for TFO\ D60 .. D78: Indexes of the parameters of second sub-frame
(s47...s65)\ D79 .. D81: CRC2 over bits D55...D59, s47, s48, s61...s65.\ D82
.. D100: Indexes of the parameters of third sub-frame (s66...s84)\ D101 ..
D103: CRC3 over bits s66, s67, s80...s84.\ D104 .. D122: Indexes of the
parameters of fourth sub-frame (s85...s103)\ D123 .. D125: CRC4 over bits s85,
s86, s99...s103.\ D126: spare (1 bits); set to \"1\".
[AMR_Mode 5,90 kBit/s, see 3GPP TS 26.090:\ ]{.underline}D1 .. D26: Indexes of
the LSF submatrices (s1...s26)\ D27 .. D51: Indexes of the parameters of first
sub-frame (s27...s51)\ D52 .. D54: CRC1 over bits C1...C5, s1...s17,
s27...s34, s48...s51.\ D55 .. D59: reserved for TFO\ D60 .. D80: Indexes of
the parameters of second sub-frame (s52...s72)\ D81 .. D105: Indexes of the
parameters of third sub-frame (s73...s97)\ D106 .. D126: Indexes of the
parameters of fourth sub-frame (s98...s118).
[Time Alignment Bit:\ ]{.underline}T: Set to "1". May be omitted, then the
next frame is advanced by 125 µs.
##### 5.2.4.2.3 Speech Frame for 6,70 kBit/s
The frame layout for codec mode 6,70 shall be used. By this the Codec Mode
Indication is defined to be 6,70 kBit/s, regardless of the phase of the RIF
bit.
[Coding of Control Information (C-Bits):\ ]{.underline}Codec Mode Request
(CMR) plus Request or Indication Flag (RIF) plus Frame Classification (FC) are
coded with one 3-bit field. These three control elements, are as defined in
3GPP TS 48.060. The coding is somewhat different:[\ ]{.underline}C1.C2.C3:\ 0
. 0 . 0: CMR = ?; RIF = 0; FC = \"Speech_Bad\".\ 0 . 0 . 1: CMR = ?; RIF = 0;
FC = \"Speech_Good\".\ 0 . 1 . 0: CMR = (D1...D3); RIF = 1 FC =
\"Speech_Bad\".\ 0 . 1 . 1: CMR = 4,75; RIF = 1; FC = \"Speech_Good\".\ 1 . 0
. 0: CMR = 5,15; RIF = 1; FC = \"Speech_Good\".\ 1 . 0 . 1: CMR = 5,90; RIF =
1; FC = \"Speech_Good\".\ 1 . 1 . 0: CMR = 6,70; RIF = 1; FC =
\"Speech_Good\".\ 1 . 1 . 1: CMR = 7,40; RIF = 1; FC = \"Speech_Good\".
\"CMR = (D1...D3)\" indicates that the CMR is defined in this specific case of
\"Speech_Bad\" within the D-Bits, which would be otherwise undefined. The
coding of CMR in this case is:
D1.D2.D3:\ 0 . 0 . 0: undefined, reserved\ 0 . 0 . 1: undefined, reserved\ 0 .
1 . 0: undefined, reserved\ 0 . 1 . 1: CMR = 4,75.\ 1 . 0 . 0: CMR = 5,15.\ 1
. 0 . 1: CMR = 5,90.\ 1 . 1 . 0: CMR = 6,70.\ 1 . 1 . 1: CMR = 7,40.
[Coding of D-Bits, see 3GPP TS 26.090:]{.underline}\ D1 .. D26: Indexes of the
LSF submatrices (s1...s26)\ D27 .. D55: Indexes of the parameters of first
sub-frame (s27...s55)\ D56 .. D58: CRC1 over bits C1...C3, D1...D3, s4...s17,
s20, s24, s27...s34, s49...s53.\ D59 .. D83: Indexes of the parameters of
second sub-frame (s56...s80)\ D84 .. D112: Indexes of the parameters of third
sub-frame (s81...s109)\ D113 .. D137: Indexes of the parameters of fourth sub-
frame (s110...s134).
##### 5.2.4.2.4 Speech Frame for 7,40 kBit/s
The frame layout for codec mode 7,40 shall be used. By this the Codec Mode
Indication is defined to be 7,40 kBit/s, regardless of the phase of the RIF
bit.
[Coding of Control Information (C-Bits):\ ]{.underline}Codec Mode Request
(CMR) plus Request or Indication Flag (RIF) plus Frame Classification (FC) are
coded with one 3-bit field. These three control elements are as defined in
3GPP TS 48.060.
The coding is exactly as described for codec mode 6,70, except that the CMR in
case of \"Speech_Bad\" is defined in bits D6...D8 (instead of D1...D3) and
thus at exactly the same position within the frame.
[Coding of D-Bits, see 3GPP TS 26.090:]{.underline}\ D1 .. D26: Indexes of the
LSF submatrices (s1...s26)\ D27 .. D58: Indexes of the parameters of first
sub-frame (s27... s58)\ D59 .. D61: CRC1 over bits C1 to C3, D1... D20,
s22...s24, s27...s32, s52, s53, s55...s57.\ D62 .. D90: Indexes of the
parameters of second sub-frame (s59...s87)\ D91 .. D122: Indexes of the
parameters of third sub-frame (s88...s119)\ D123 .. D151: Indexes of the
parameters of fourth sub-frame (s120...s148).
##### 5.2.4.2.5 Speech Frame for 7,95 kBit/s
Codec mode 7,95 kBit/s is not supported in 8 kBit/s submultiplexing.
### 5.2.5 Order of Bit Transmission
The order of bit transmission is:
Bit m of octet n shall be transmitted as bit ((n‑1)*8+m) with m=(1..8) and
n=(1..20).
# 6 Procedures
For AMR speech on 8 kBit/s submultiplexing the procedures are very much
identical to the ones described in 3GPP TS 48.060 for AMR speech on 16 kBit/s
submultiplexing. In the present recommendation (48.061) therefore only the
procedures are defined that differ from that.
## 6.1 Remote Control of Transcoders and Rate Adaptors
When the TRAU is positioned remote from the BTS, the CCU in the BTS has to
control some of the functions in the remote TRAU.
This remote control is performed by in‑band signalling carried by the control
bits in each TRAU frame.
The following functions in the TRAU are remotely controlled by the CCU:
‑ change between speech and data;
‑ downlink frame timing for speech frames;
‑ transfer of DTX information.
In addition the following is transferred in case of AMR speech:
\- control of Codec Mode Adaptation;
\- transfer of TFO Configuration Parameters (optional, see 3GPP TS 48.062);
\- downlink Phase Alignment (optional, see 3GPP TS 48.060);
\- transfer of Information on TFO and Handover Status (optional, see 3GPP TS
48.060 and 48.062).
In addition, the in‑band signalling also provides means for transfer of O&M
signals between the TRAU and the BSC/BTS.
## 6.2 Resource Allocation
In case of AMR speech see 3GPP TS 48.060.
At reception of the 3GPP TS 48.008 ASSIGNMENT REQUEST message, e.g. at call
setup, when a circuit switched connection is required, the BSC provides an
appropriate TRAU to the circuit to be used between the BSC and the BTS and
sends the 3GPP TS 48.058 CHANNEL ACTIVATION message to the BTS.
When receiving the CHANNEL ACTIVATION message, the BTS allocates the
appropriate radio resources and a CCU to be used.
The CCU now starts sending uplink TRAU frames with the appropriate frame type.
When receiving the first frame, the TRAU sets the mode of operation as
indicated by the CCU and starts sending downlink TRAU frames with the
corresponding frame type.
## 6.3 Resource Release
In case of AMR speech see 3GPP TS 48.060.
At release of circuit switched resources, e.g. at call release, the connection
between the CCU and the TRAU will be released by the BSC. The BSC has to
indicate that the connection has been released. How this is performed is a BSC
internal matter. Two methods may be used for either submultiplexing scheme.
i) The BSC indicates the call release to the TRAU by inserting the PCM idle
bit pattern described in 3GPP TS 48.054 on the circuits towards the TRAU. The
TRAU shall be able to detect this idle bit pattern. When received at the TRAU,
the TRAU will loose frame synchronization and will start timer Trelease = 1
second. If, when Trelease expires, the idle bit pattern is detected, the TRAU
shall terminate the operation (go idle) until a valid frame is again received.
Trelease is reset every time the frame synchronization is again obtained.
ii) It is handled by BSC internal signals (e.g. if the BSC and TRAU are
collocated).
## 6.4 In Call Modification
In case of AMR speech see 3GPP TS 48.060.
At reception of the 3GPP TS 48.058 MODE MODIFY message from the BSC indicating
a change between speech and data, the BTS orders the corresponding CCU to
modify its mode of operation. The CCU sets the frame type in the uplink TRAU
frames to the new mode of operation.
When the TRAU receives an uplink TRAU frame with the frame type, different
from the current mode but without errors detected (see clause 6.9.1.2), the
current mode is kept and speech/data bits are handled as erroneous. When
receiving the next TRAU frame with the same frame type, the TRAU changes the
mode of operation accordingly and sets the new frame type in the downlink
frames.
## 6.5 Transfer of Idle Frames, Handling of missing data
In case of AMR speech see 3GPP TS 48.060.
If no speech is received from the MS (uplink direction) in case of Half Rate
speech, the CCU shall send TRAU speech frames with BFI flag set to 1 (bad
frame). If no data is received from the MS (uplink direction), the CCU shall
send idle TRAU data frames.
For Half Rate speech calls, the CCU shall transmit a speech frame with the
three parity bits inverted (protection of the most significant 22 class 1
bits, see 3GPP TS 45.003) on the air interface:
‑ if frame synchronization has been lost in the downlink direction;
‑ if a CRC error is detected (bits CRC0‑CRC2) in a downlink TRAU speech frame;
‑ if an O&M TRAU frame is received (see clause 6.10).
For data calls, the CCU shall react towards the air interface as if an idle
TRAU data frame has been received:
‑ when frame synchronization has been lost in the downlink direction;
‑ when an O&M TRAU frame is received (see clause 6.10).
An idle TRAU data frame is a TRAU data frame with all data bits set to binary
\"1\".
## 6.6 Procedures for Speech Frames
### 6.6.1 Time Alignment of Speech Frames
The time alignment needed for obtaining minimum buffer delay will differ from
call to call. The reasons for this are:
‑ the BSC will have no information about the radio timing at the BTS, and will
start sending TRAU frames at an arbitrary or default time. In the case of 16
kbit/s submultiplexing, each TRAU frame is 320 bits (20 ms) and will in the
worst case be received at the BTS 318 bits out of phase. In the case of 8
kbit/s submultiplexing, each TRAU frame is 160 bits (20 ms) and will in the
worst case be received at the BTS 159 bits out of phase;
‑ the different timeslots and half rate subchannels on one carrier are sent at
different times (max. 8.66 ms which equals 15 radio time slots);
‑ different channels may be transferred on different transmission systems
using different routes in the network. The transmission delay may therefore
differ.
The required time alignment procedure between radio frames and TRAU frames is
specified in clauses 6.6.1.1 and 6.6.1.2 for the 16 kbit/s submultiplexing and
the 8 kbit/s submultiplexing respectively.
In order to achieve optimum timing between the radio TDMA frames and the
frames on the transmission side, the speech coding and decoding function in
the transcoder should not be synchronized.
#### 6.6.1.1 16 kbit/s submultiplexing
For AMR speech see 3GPP TS 48.060.
##### 6.6.1.1.1 Downlink Time Alignment
##### 6.6.1.1.1.1 Initial Time Alignment state {#initial-time-alignment-state
.H6}
The TRAU shall enter the Initial Time Alignment state at the switching‑on of
the system, when it goes idle (e.g. when receiving the PCM idle pattern after
a call release as described in clause 6.3), if loss of frame synchronization
is detected, in call modification from data to speech is performed or if BSS
internal handover is detected.
In the initial state, the frames shall only be delayed or no change is applied
(see note below). The transcoder is able to adjust the time for transmitting
the speech frames in steps of 125 µs (one speech sample). The CCU calculates
the required timing adjustment and returns a frame including the number of
250/500 µs steps by which the frames in the downlink direction have to be
delayed (binary number in the \"Time Alignment\" field).
When receiving this information, the TRAU processes this data and sets the
\"Time Alignment\" field in the next downlink frame as ordered and then delays
the subsequent frame accordingly.
If the TRAU, in this state, receives an order to advance the next frame 250
µs, this order shall be interpreted as \"Delay frame 39*500 µs\".
When a frame is delayed due to timing adjustments, the TRAU shall fill in the
gap between the frames with the appropriate number of binary \"1\".
After having adjusted the timing, the TRAU shall receive at least three new
frames before a new adjustment is made. This in order to avoid oscillation in
the regulation.
The TRAU shall change from the Initial Time Alignment state to the Static Time
Alignment state when it has performed two subsequent timing adjustments which
are less than 500 µs (including no change).
The procedure is illustrated in figure 6.1.
##### 6.6.1.1.1.2 Static Time Alignment state {#static-time-alignment-state
.H6}
In the Static Time Alignment state, the TRAU performs timing adjustments in
single steps of 250 µs. The timing may either be delayed (time alignment code
111110, advanced (time alignment code 111111) or not changed (time alignment
code 000000).
When receiving an order for adjusting the timing, the transcoder skips or
repeats two speech samples in order to achieve the correct timing.
If the timing is to be advanced 250 µs, the TRAU sets the \"Time Alignment\"
field in the next downlink frame as ordered and then the 4 last bits of the
frame are not transferred (the T‑bits).
If the timing is to be delayed, the TRAU sets the \"Time Alignment\" field in
the next downlink frame as ordered and then delays the subsequent frame by
adding four binary \"1\" between the frames.
After having adjusted the timing, the TRAU shall receive at least three new
frames before a new adjustment is made.
If, in this state, the TRAU detects a change in the timing of the uplink
frames greater than 1ms, it shall enter the Initial Time Alignment state and
in that state it may perform an adjustment on the downlink equal to the change
detected on the uplink.
Figure 3GPP TS 48.061/6.1: Initial Time Alignment procedure, 16 kbit/s
submultiplexing
##### 6.6.1.1.2 Uplink Time Alignment
In order to achieve optimum timing between the Air interface and the
terrestrial link, the tail bits of the uplink speech frames may be used for
uplink time alignment.
To advance 125 µs, the CCU removes the last two tail bits of the uplink TRAU
speech frame.
To delay 125 µs, the CCU inserts two binary \"1\" between two uplink TRAU
speech frames.
##### 6.6.1.1.3 Initiation at Resource Allocation
When the BTS receives the 3GPP TS 48.058 CHANNEL ACTIVATION message from the
BSC, with Channel Mode IE indicating speech, it allocates the appropriate
radio resources and a Channel Codec Unit (CCU). The CCU then initiates sending
of speech frames (or applies the procedure specified in clause 6.5 if speech
is not received from the MS) towards the transcoder with normal frame phase
for the TDMA channel in question. The \"Time Alignment\" field in these frames
is set to \"no change\".
The TRAU will now be in the Initial Time Alignment state. When receiving the
first frame it shall start sending speech frames towards the BTS with
arbitrary or default phase related to the uplink frame phase.
When receiving these frames the CCU calculates the timing adjustment required
in order to achieve minimum buffer delay and sets the \"Time Alignment\" field
in the uplink frames accordingly.
The procedures described for the Initial and for the Static Time Alignment
states are then followed during the call.
##### 6.6.1.1.4 Time Alignment during Handover
##### 6.6.1.1.4.1 BSS External Handover {#bss-external-handover .H6}
For BSS external handover, the procedure described in clause 6.6.1.1.3 should
be used by the new BSC/BTS at resource allocation.
##### 6.6.1.1.4.2 BSS Internal Handover {#bss-internal-handover .H6}
If a BSS internal handover has been performed, the timing of the downlink
frames may have to be adjusted several steps of 250/500 µs. In order to speed
up the alignment of the downlink frames, this must be detected by the TRAU,
e.g. by detecting the change in the uplink frame timing as described in clause
6.6.1.1.1.2. The TRAU should then enter the Initial Time Alignment state and
in that state it may perform an adjustment on the downlink equal to the change
detected on the uplink.
#### 6.6.1.2 8 kbit/s submultiplexing
For AMR speech on 8 kBit/s submultiplexing the same procedures as for AMR
speech on 16 kBit/s submultiplexing shall be applied, see 3GPP TS 48.060.
Note: For 8 kBit/s submultiplxing the Time Alingment commands are defined only
for No_Speech frames and therefore speech frames may need to be stolen to
perform time and phase alignment.
##### 6.6.1.2.1 Downlink Time Alignment
The TRAU must be able to adjust the time for transmitting the downlink TRAU
frames in steps of 250 µs.
The CCU must be able to calculate the required Time Alignment (TA) with a
resolution of 250 µs.
The TA requests are in the range of 250 µs to 19,75 ms. The CCU calculates the
required TA, sends a TA compound request to the TRAU and then starts timer
Tta.
A TA compound request consists of up to five consecutive TA requests. The
allowed values of TA requests are given in table 6.1.
The CCU does not send TA requests when timer Tta is running. Tta is reset by
the CCU when the TRAU has applied the TA compound request. The TRAU performs
time adjustment corresponding to the TA compound request.
The CCU can send a new TA compound request as soon as the TRAU has applied the
previous TA compound request or Tta has expired.
Tta is a parameter settable by O&M.
NOTE: The timer Tta shall be set taking into account the transmission delay
and the TRAU reaction time for the application of the TA compound request.
Table 3GPP TS 48.061/6.1: Allowed values of TA requests
* * *
TA2 TA1 TA0 Value 1 1 1 no change 1 1 0 ‑ 250 µs 1 0 1 + 250 µs 0 1 1 + 500 µs
1 0 0 + 1 ms 0 1 0 + 3 ms 0 0 1 + 6 ms 0 0 0 + 9 ms
* * *
When the TRAU detects an uplink transmission error, it ignores the possible TA
request contained in the erroneous TRAU frame.
If the timing is to be advanced by 250 µs, the TRAU shall not transfer the
last two bits of the next downlink TRAU frame (bits T1, T2).
If the timing is to be delayed, the TRAU shall delay the next downlink TRAU
frame by inserting the appropriate number of binary \"1\".
An example of the procedure is illustrated in figure 6.2.
If the TRAU detects a change in the timing of the uplink frames greater than 1
ms, it may perform an adjustment on the downlink equal to the change detected
on the uplink.
Figure 3GPP TS 48.061/6.2: Time Alignment procedure, 8 kbit/s submultiplexing
##### 6.6.1.2.2 Uplink Time Alignment
In order to achieve optimum timing between the Air interface and the
terrestrial link, the tail bits of the uplink speech frames may be used for
uplink time alignment.
To advance 125 µs, the CCU removes the last tail bit (T2) of the uplink TRAU
speech frame.
To delay 125 µs, the CCU inserts one binary \"1\" between two uplink TRAU
speech frames.
In case of AMR two tail bits (D126 .. T) are defined for No_Speech frames, one
tail bit (T) for the three lower codec modes (4,75, 5,15 and 5,90) and no tail
bits for the higher modes (6,70 and 7,40). To advance by 125 µs in the higher
codec mode , the CCU may either remove the last data bit (small distortion of
the speech signal) or replace a speech frame by a No_Speech frame (also speech
distortion) and then remove the T bit. To delay 125 µs, the CCU inserts one
binary \"1\" between two uplink TRAU speech frames.
##### 6.6.1.2.3 Initiation at Resource allocation
When the BTS receives the 3GPP TS 48.058 CHANNEL ACTIVATION message from the
BSC, with Channel Mode IE indicating speech, it allocates the appropriate
radio resources and a CCU. The CCU then initiates sending of TRAU speech
frames towards the TRAU with normal frame phase for the TDMA channel in
question.
When receiving the first frame, the TRAU shall start sending speech frames
towards the CCU with arbitrary or default phase related to the uplink frame
phase.
When receiving these frames, the CCU calculates the timing adjustment required
in order to achieve minimum buffer delay and sends a timing adjustment request
to the TRAU according to the procedure described in clause 6.6.1.2.1.
##### 6.6.1.2.4 Time Alignment during handover
##### 6.6.1.2.4.1 BSS External Handover {#bss-external-handover-1 .H6}
For BSS external handover, the procedure described in clause 6.6.1.2.3 should
be used by the new BSC/BTS at resource allocation.
##### 6.6.1.2.4.2 BSS Internal Handover {#bss-internal-handover-1 .H6}
The timing of the downlink frames may have to be adjusted if a BSS internal
handover has been performed. In order to speed up the alignment of the
downlink frames, this must be detected by the TRAU, e.g. by detecting the
change in the uplink frame timing as described in clause 6.6.1.2.1. The TRAU
may consequently perform an adjustment on the downlink equal to the change
detected on the uplink.
### 6.6.2 Procedures for Discontinuous Transmission (DTX)
For Adaptive Multi-Rate speech see 3GPP TS 48.060.
The procedures for comfort noise are described in 3GPP TS 46.022, the overall
operation of DTX is described in 3GPP TS 46.041 and the Voice Activity
Detector is described in 3GPP TS 46.042.
The downlink DTX Handler function is considered as a part of the TRAU when
remote transcoders are applied.
The specification of the DTX Handler is given in 3GPP TS 46.041.
#### 6.6.2.1 DTX procedures in the uplink direction
In the comfort noise generation state, the MS will transmit a new traffic
frame only every 240 ms (which corresponds to 12 TRAU speech frames). These
traffic frames are transferred in the normal way between the CCU and the TRAU.
If no valid traffic frames are received, the CCU shall apply the procedure
described in clause 6.5. Furthermore the frame classification is done
according to the following paragraphs.
**16 kbit/s submultiplexing**
In all uplink 320 bit TRAU frames, the BFI (Bad Frame Indicator) indicator,
the SID (Silence Descriptor) indicator and the TAF (Time Alignment Flag)
indicator are set as output from the Radio Subsystem (Error correction &
detection and SID frame detection, see 3GPP TS 46.041).
**8 kbit/s submultiplexing**
The frame classification is set as output from the Radio Subsystem (Error
correction and detection and SID frame detection, see 3GPP TS 46.041) in the
uplink 160 bit TRAU speech frame (SID frame, see clauses 5.2.1 and 5.2.4.1).
#### 6.6.2.2 DTX procedures in the downlink direction
To inform the DTX handler in the remote transcoder whether downlink DTX shall
be applied or not, the DTXd bit in the uplink TRAU speech frame is used. The
coding is as follows:
DTXd = 0: Downlink DTX shall not be applied;
DTXd = 1: Downlink DTX shall be applied.
Though this parameter is linked with the resource allocation in the BTS at
call setup, its value may vary during the connection.
Two consecutive TRAU frames without detected errors and with the same DTXd
flag value shall be considered as an indication to change DTX mode.
The SP (Speech) indicator is set as output from the Tx DTX handler (voice
activity detection, see 3GPP TS 46.041) in the downlink TRAU speech frames
(see clause 5.2.4.2).
## 6.7 Procedures for Data Frames
When rate adaption to 64 kbit/s is performed at the BTS (sub‑64 kbit/s traffic
channels are not used), the rate adaption between the format used on the radio
interface and the 64 kbit/s format is made by the RA1/RA1\' and the RA2
function as described in 3GPP TS 48.020. This is illustrated in figure 6.3.
Figure 3GPP TS 48.061/6.3: Rate adaption when performed at the BTS
When sub‑64 kbit/s traffic channels are used, two modified ITU‑T V.110 frames
are transferred in each TRAU data frame. An additional intermediate rate
adaption function, RAA, is applied in order to perform the adaption between
the TRAU data frame format and the ITU‑T V.110 80 bits frame format. This is
illustrated in figure 6.4.
Figure 3GPP TS 48.061/6.4: Rate adaption when sub‑64 kbit/s traffic channels
are used
### 6.7.1 The RAA Function
The RAA function performs the adaption between the ITU‑T V.110 80 bits frame
format and the TRAU data frame format.
When going from the V.110 format to the TRAU data frame format, the
synchronization pattern (first octet with all bits coded binary \"0\" and the
9 bits coded binary \"1\" in the position 1 of the following octets) of the
ITU‑T V.110 80 bits frame is stripped off. Two modified V.110 63 bits frames
are then transferred in each TRAU data frame as shown in clause 5.1.2 for 16
kbit/s submultiplexing and clause 5.2.2 for 8 kbit/s submultiplexing.
When going from the TRAU data frame format to the V.110 80 bits frame format,
the two modified V.110 63 bits frames are separated and the synchronization
pattern is again included.
The 80 bits V.110 frame is illustrated in figure 6.5.
* * *
              Bit number
Octet no. 1 2 3 4 5 6 7 8 0 0 0 0 0 0 0 0 0 1 1 D1 D2 D3 D4 D5 D6 D7 2 1 D8 D9
D10 D11 D12 D13 D14 3 1 D15 D16 D17 D18 D19 D20 D21 4 1 D22 D23 D24 D25 D26
D27 D28 5 1 D29 D30 D31 D32 D33 D34 D35 6 1 D36 D37 D38 D39 D40 D41 D42 7 1
D43 D44 D45 D46 D47 D48 D49 8 1 D50 D51 D52 D53 D54 D55 D56 9 1 D57 D58 D59
D60 D61 D62 D63
* * *
Figure 3GPP TS 48.061/6.5: ITU‑T V.110 80 bits frame
**16 kbit/s submultiplexing**
The modified V.110 63 bits frame is illustrated in clause 5.1.2 with:
‑ the D‑bits of the modified V.110 63 bits frame in position 1 of the TRAU
data frame;
‑ the D\'‑bits of the modified V.110 63 bits frame in position 3 of the TRAU
data frame,
corresponding respectively to the D‑bits of the V.110 80 bits frame (see
figure. 6.5).
**8 kbit/s submultiplexing**
The modified V.110 63 bits frame is illustrated in clause 5.2.2 with:
‑ the D‑bits of the modified V.110 63 bits frame in position 1 of the TRAU
data frame;
‑ the D\'‑bits of the modified V.110 63 bits frame in position 2 of the TRAU
data frame,
corresponding respectively to the D‑bits of the V.110 80 bits frame (see
figure. 6.5).
### 6.7.2 The RA1/RA1\' Function
This function is described in 3GPP TS 44.021.
### 6.7.3 The RA2 Function
This function is described in 3GPP TS 44.021.
### 6.7.4 Procedures for 8 kbit/s intermediate rate adaption rate
For 8 kbit/s intermediate rate adaption rate, two modified ITU‑T V.110 72 bits
frames are transferred in each TRAU data frame. If the data transfer
terminates before the TRAU data frame has been completed, the remaining data
bit positions in the TRAU data frame should be coded binary \"1\".
If V.110 frame synchronization has been lost in the downlink direction, the
TRAU shall react as if V.110 frames with all data bits coded binary \"1\" had
been received (bits D1 to D63, see clause 6.7.1).
### 6.7.5 Support of Non‑Transparent Bearer Applications
The procedures for transfer of non‑transparent bearer applications are
specified in 3GPP TS 48.020. The 240 bit RLP frame is converted to four
modified V.110 80 bit frames.
The same conversion is applied when transferred in a TRAU data frame. The TRAU
data frames are coded as specified in clause 6.7.4.
## 6.8 Frame Synchronization
### 6.8.1 16 kbit/s submultiplexing
#### 6.8.1.1 Search for Frame Synchronization
The frame synchronization is obtained by means of the first two octets in each
frame, with all bits coded binary \"0\", and the first bit in octet no. 3, 5,
7, 9, ... 39 coded binary \"1\". The following 35 bit alignment pattern is
used to achieve frame synchronization:
* * *
**00000000** **00000000** **1XXXXXXX** **XXXXXXXX** **1XXXXXXX** **XXXXXXXX**
**1XXXXXXX** **XXXXXXXX** **1XXXXXXX** **XXXXXXXX** **1XXXXXXX** **XXXXXXXX**
**1XXXXXXX** **XXXXXXXX** **1XXXXXXX** **XXXXXXXX** **1XXXXXXX** **XXXXXXXX**
**1XXXXXXX** **XXXXXXXX** **1XXXXXXX** **XXXXXXXX** **1XXXXXXX** **XXXXXXXX**
**1XXXXXXX** **XXXXXXXX** **1XXXXXXX** **XXXXXXXX** **1XXXXXXX** **XXXXXXXX**
**1XXXXXXX** **XXXXXXXX** **1XXXXXXX** **XXXXXXXX** **1XXXXXXX** **XXXXXXXX**
**1XXXXXXX** **XXXXXXXX** **1XXXXXXX** **XXXXXXXX**
* * *
#### 6.8.1.2 Frame Synchronization After Performing Downlink Timing
Adjustments
If the timing of the downlink TRAU speech frames is adjusted, the adjustment
is indicated in bits C6 ‑ C11 as described in clauses 6.6.1.1.1.1 and
6.6.1.1.1.2. The frame synchronization unit of the CCU shall change its frame
synchronization window accordingly.
#### 6.8.1.3 Frame Synchronization Monitoring and Recovery
The monitoring of the frame synchronization shall be a continuous process
using the same procedure as for initial detection.
Loss of frame synchronization shall not be assumed unless at least three
consecutive frames, each with at least one framing bit error, are detected.
When it detects a framing bit error, the TRAU uses the control bit UFE (Uplink
Frame Error) in the next downlink TRAU frame to indicate it to the CCU. When
the CCU receives a TRAU frame indicating an Uplink Frame Error and which has
no errors on the synchronization pattern and the control bits, it starts a
timer TsyncU.
If loss of frame synchronization is detected by the CCU it starts a timer
TsyncD. If TsyncD or TsyncU expires before frame synchronization is again
obtained the call shall be released as specified in 3GPP TS 48.058 with the
cause field set to \"Remote Transcoder Failure\".
TsyncD is reset every time frame synchronization is again obtained.
TsyncU is reset every time three consecutive TRAU frames are received without
Uplink Frame Error indication, without errors on the frame synchronization
pattern and on the control bits.
TsyncD and TsyncU are parameters set by O&M (default value = 1 second).
### 6.8.2 8 kbit/s submultiplexing
#### 6.8.2.1 Search for Frame Synchronization
##### 6.8.2.1.1 For Half Rate speech and data
The frame synchronization is obtained by a 28 bit pattern which is indicated
below by all the bits set to binary \"0\" or binary \"1\".
* * *
**0 0 0 0 0 0 0 0** **1** x x x x x x x **0 1** x x x x x x **1** x x x x x x
x **1** x x x x x x x **1** x x x x x x x **1** x x x x x x x **1** x x x x x
x x **1** x x x x x x x **1** x x x x x x x **1** x x x x x x x **1** x x x x
x x x **1** x x x x x x x **1** x x x x x x x **1** x x x x x x x **1** x x x
x x x x **1** x x x x x x x **1** x x x x x x x **1** x x x x x x x **1** x x
x x x x x
* * *
##### 6.8.2.1.2 For Adaptive Multi-Rate speech
The frame synchronisation for No_Speech frames and the speech frames of the
three lower codec modes is obtained by a 28 bit pattern, which is indicated
below by all the bits set to binary \"**0** \" or binary \"**1** \".\ Initial
Synchronisation is started after resource allocation and after loss of
synchronisation. Initial Synchronisation shall be a continuous process.
Synchronisation shall be regarded as obtained if at least one complete frame
is detected with all 28 synchronisation bits and all control and CRC bits
correct:
* * *
**0 0 0 0 0 0 0 0** **1** x x x x x x x **1** x x x x x x x **0 1** x x x x x
x **1** x x x x x x x **1** x x x x x x x **1** x x x x x x x **1** x x x x x
x x **1** x x x x x x x **1** x x x x x x x **1** x x x x x x x **1** x x x x
x x x **1** x x x x x x x **1** x x x x x x x **1** x x x x x x x **1** x x x
x x x x **1** x x x x x x x **1** x x x x x x x **1** x x x x x x x **1** x x
x x x x x
* * *
The frame synchronisation for the speech frames for codec mode 6,70 kBit/s is
obtained by a 21 bit pattern, which is indicated below by all the bits set to
binary \"**0** \" or binary \"**1** \". This codec mode may be used for
Initial Synchronisation, the preferred solution is, however, to user a lower
code mode or No_Speech frames. Initial Synchronisation is started after
resource allocation and after loss of synchronisation. Initial Synchronisation
shall be a continuous process. Synchronisation shall be regarded as obtained
if at least one complete frame is detected with all 21 synchronisation bits
and all control and CRC bits correct:
* * *
**0 0 0 0 0 0 0 0** **1** x x x x x x x **1** x x x x x x x **1** x x x x x x
x **1** x x x x x x x **0** x x x x x x x **1** x x x x x x x x x x x x x x x
**1** x x x x x x x x x x x x x x x **1** x x x x x x x x x x x x x x x **1**
x x x x x x x x x x x x x x x **1** x x x x x x x x x x x x x x x **1** x x x
x x x x x x x x x x x x **1** x x x x x x x x x x x x x x x
* * *
The frame synchronisation for the speech frames for codec mode 7,40 kBit/s is
obtained by a 6 bit pattern, which is indicated below by all the bits set to
binary \"**0** \" or binary \"**1** \". This codec mode shall not be used for
Initial Synchronisation, the recommended solution is to user a lower code mode
or No_Speech frames:
* * *
**0 0 1** x x x x x **0** x x x x x x x **1** x x x x x x x **0** x x x x x x
x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x
x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x
x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x
x x x x x x x x x x x x
* * *
#### 6.8.2.2 Frame Synchronization Monitoring and Recovery
##### 6.8.2.2.1 For Half Rate speech and data
Same as clause 6.8.1.3.
##### 6.8.2.2.2 For Adaptive Multi-Rate speech
The monitoring of the frame synchronisation shall be a continuous process. A
frame, respectively a subframe, shall be regarded as correctly received, if
synchronisation was established before the beginning of the frame (subframe)
and all synchronisation, control and CRC bits within the frame (subframe) are
correct. Since the Adaptive Multi-Rate codec may change its codec mode every
40 ms, the monitoring of frame synchronisation shall take these possible
changes into account.
Loss of frame synchronisation shall not be assumed unless at least three
consecutive frames, each with at least one framing bit error, are detected.
However, for every frame with detected errors a No_Speech frame shall be sent
back with the UFE (DFE) bits set, see clause 6.9.2.1. The receiver shall in
addition check, whether the synchronisation pattern can be detected plus or
minus one position shifted with respect to the expected position within the
bit stream. If synchronisation can not be found by this within three frames,
then Initial Synchronisation shall be performed.
When it detects a framing bit error, the TRAU uses the control bit UFE (Uplink
Frame Error) in the next downlink TRAU frame to indicate it to the CCU. When
the CCU receives a TRAU frame indicating an Uplink Frame Error and which has
no errors on the synchronization pattern and the control bits, it starts a
timer TsyncU.
If loss of frame synchronization is detected by the CCU it starts a timer
TsyncD. If TsyncD or TsyncU expires before frame synchronization is again
obtained the call shall be released as specified in 3GPP TS 48.058 with the
cause field set to \"Remote Transcoder Failure\".
TsyncD is reset every time frame synchronization is again obtained.
TsyncU is reset every time three consecutive TRAU frames are received without
Uplink Frame Error indication, without errors on the frame synchronization
pattern and on the control bits.
TsyncD and TsyncU are parameters set by O&M (default value = 1 second).
## 6.9 Correction/detection of bit errors
### 6.9.1 16 kbit/s submultiplexing
In case of AMR speech see 3GPP TS 48.060.
#### 6.9.1.1 Error Detection on the Control Bits
In order to reduce the possibility of misinterpretation of control information
due to bit errors, the following procedure should be followed:
##### 6.9.1.1.1 General Procedure
If any undefined combination of the C‑bits is received (see clause 5.1.4), the
TRAU frame shall be handled as defined in clause 6.9.1.2.
##### 6.9.1.1.2 Frames for Half Rate speech
In addition to the general procedure described in the previous clause, the
following procedure should be followed for the speech frames:
Bits C6 ‑ C11: Time Alignment.
The full range of the time alignment adjustment should only be applied when
the TRAU is in the Initial Time Alignment state (see clauses 6.6.1.1.1.1 and
6.6.1.1.1.2).
If, in the Static Time Alignment state, a time alignment order is received
indicating an adjustment of more than 250 µs, the next downlink frame should
be delayed only one 250 µs step.
If an uplink frame is received with the \"Time Alignment\" field set to an
unused value (101000 ... 111101), this value should be interpreted as \"no
change\".
#### 6.9.1.2 Handling of frames received with errors for Half Rate speech and
data
If a TRAU frame is received in the uplink or downlink with detectable errors
in the control bits, then the control information shall be ignored and the
control information from the previous received TRAU frame shall be used to
handle the speech or data bits as if no error had been detected.
If frame synchronization has been lost in the uplink direction, the TRAU
shall:
‑ for speech, mute the decoded speech as if it has received TRAU frames with
errors (cf. 3GPP TS 46.021);
‑ for data, send idle V.110 frames as defined in 3GPP TS 48.020 to the MSC
interworking unit.
The CCU shall follow the procedure specified in clause 6.5:
‑ if frame synchronization has been lost in the downlink direction;
‑ if a CRC error is detected (bits CRC0‑CRC2) in a downlink TRAU speech frame.
If a CRC error is detected (bits CRC0‑CRC2) in a uplink TRAU speech frame, the
TRAU speech frame shall be regarded as bad and the TRAU shall apply the
procedure defined in 3GPP TS 46.021.
### 6.9.2 8 kbit/s submultiplexing
#### 6.9.2.1 Error Detection on the Control Bits
**In case of Half Rate speech and Data:**
Error detection is made on control bits C1‑C4 with the parity bit C5 (see
clause 5.2.4) for all types of 160 bit TRAU frames. Additionally, for TRAU
speech frames, error detection is made on control bits XC1‑XC5 with the parity
bit XC6.
If the following occurs:
‑ parity bit C5 and/or parity bit XC6 are wrong;
‑ any undefined combination of the control bits is received (see clause 5.2.4)
with a correct parity bit.
The TRAU frame shall be handled as defined in clause 6.9.1.2.
**In case of Adaptive Multi-Rate speech:\** If errors are detected within the
Sync bits, the Control bits or by the CRC bits, then the frame shall be
regarded as invalid. If the error is detected in uplink direction, then the
TRAU shall perform error concealment as for any No_Data frame (see 3GPP TS
26.092). If the error is detected in downlink direction, then the BTS shall
handle this with respect to the air interface as described in clause 6.5,
respectively in 3GPP TS 48.060.
A No_Speech frame with the UFE set to \"Uplink Frame Received with Errors\"
(if the error is detected in uplink), respectively a No_Speech frame with DFE
set to \"Downlink Frame Received with Errors\" (if the error is detected in
downlink) shall be sent back for every detected invalid frame. The other side,
when receiving a No_Speech frame with the UFE, respectively DFE bit set shall
respond with a No_Speech Frame, too, where the DFE respectively UFE bit is not
set (unless the error occurred in both directions). In this way the fastest
possible re-synchronisation shall be ensured. In case of ongoing TFO these
frames may transmit the configuration parameters in addition (see 3GPP TS
48.062).
#### 6.9.2.2 Handling of frames received with errors
In case of Half Rate speech and Data: Same as clause 6.9.1.2.
In case of Adaptive Multi-Rate speech: Same as clause 6.9.2.1.
## 6.10 Procedures for Operation & Maintenance
The general procedures for Operation and Maintenance are described in 3GPP TS
12.21.
If the transcoders are positioned outside the BTS, some O&M functions will be
required for the TRAU and the CCU. In particular this applies for transcoders
positioned at the MSC site.
The transcoders outside the BTS are considered a part of the BSC, and the O&M
functions for the TRAU should therefore be implemented in the BSC.
The CCU is a part of the BTS and the O&M functions for this unit should
therefore be implemented in the BTS.
### 6.10.1 Transfer of O&M Information Between the TRAU and the BSC
The transfer of O&M information between the BSC and the TRAU is possible to do
in two ways. Either it is handled directly between the BSC and the TRAU or a
BTS is used as a message transfer point. The choice between the two methods is
up to the manufacturer of the BSC:
i) The transfer of O&M information between the BSC and the TRAU is handled
internally by the BSC. The O&M signalling between the TRAU and the BSC may
either be handled by proprietary BSC solutions or the O&M TRAU frames defined
for 16 kbit/s submultiplexing in clauses 5.1.3 and 5.1.4.3 and for 8 kbit/s
submultiplexing in clauses 5.2.3 and 5.2.4 could be used. In the latter case,
the BSC has to act as a terminal for the O&M TRAU frames sent between the TRAU
and the BSC;
ii) The O&M information between the TRAU and the BSC is transferred using O&M
TRAU frames between the TRAU and the CCU in a BTS. The BTS then acts as a
relay function between the O&M TRAU frames and the associated O&M messages
sent between the BTS and the BSC.
### 6.10.2 Procedures in the TRAU
If O&M information between the TRAU and the BSC is transferred using O&M TRAU
frames between the CCU in a BTS and the TRAU, the TRAU sends O&M TRAU frames
periodically until the identical O&M TRAU frame is received as an
acknowledgement. The period is at least 64*20ms (1,28 sec).
In case of fault conditions, when no immediate action is required, the TRAU
may send O&M frames indicating the fault.
### 6.10.3 Procedures in the BSC
The BSC should be able to detect a faulty TRAU, take it out of service and
give an indication to O&M. A faulty TRAU could be detected e.g. by routine
tests, alarms from the TRAU, release of call initiated by the BTS due to
remote transcoder failure etc. How this is handled by the BSC is regarded as a
BSC internal matter.
#### 6.10.3.1 Use of O&M Frames
The use and coding of O&M TRAU frames is left to the implementor of the
BSC/TRAU.
If O&M TRAU frames are used, they are always carrying:
‑ 264 data bits in case of 16 kbit/s submultiplexing;
‑ 120 data bits in case of 8 kbit/s submultiplexing.
Any corresponding O&M message between the BSC and the BTS shall always carry:
‑ all 264 O&M data bits in case of 16 kbit/s submultiplexing;
‑ 120 data bits in case of 8 kbit/s submultiplexing.
### 6.10.4 Procedures in the BTS
If a CCU in a BTS receives O&M TRAU frames from the TRAU, the BTS shall:
‑ send the identical frame to the TRAU for acknowledgement; and
‑ put all the data bits from the received frames into an appropriate O&M
message and send it to the BSC.
If the CCU receives O&M TRAU frames during a speech or data call then the
procedure described in clause 6.5 shall apply.
If receiving an O&M message from the BSC, carrying TRAU O&M information, the
BTS puts all the data bits from the received message into an O&M TRAU frame
and then the CCU allocated to the addressed connection sends the frame to the
TRAU in one single O&M TRAU frame. Repetition is done according to 3GPP TS
12.21
In case of a faulty CCU, the O&M procedures are BTS internal.
#