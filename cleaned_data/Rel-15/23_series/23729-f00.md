# Foreword
This Technical Report has been produced by the 3rd Generation Partnership
Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
3GPP RAN in Rel-13 has worked on integrating \"unlicensed access\" in RAN,
including LTE-WiFi aggregation and LAA. More generically, the work is targeted
at several scenarios where the UE is connected to two accesses at once, i.e.,
a primary access and a secondary access, where the secondary access operates
in unlicensed spectrum. The secondary access may be represented by a LAA cell
or a WLAN including a set of one or more WLAN APs.
The following two scenarios are considered as per the Rel-14 RAN architecture
(TS 36.300 [3]):
\- eNB with LTE (primary) + LTE-LAA (secondary) access.
\- eNB with LTE (primary) + WLAN (secondary) access.
In both scenarios, the mechanisms defined so far are aiming to make the
aggregation of licensed and unlicensed spectrum transparent to the core
network elements. In particular, S-GW, PDN GW and PCC elements are not aware
of whether the data packets of a PDN or Service Data Flow are being routed (on
uplink, downlink or both) on the licensed spectrum cell or the unlicensed
spectrum cell.
This TR will study mechanisms to:
\- Enable the 3GPP system to differentiate traffic which was transported over
unlicensed access in non-roaming and roaming cases.
\- Ensure the granularity of data collected for data usage over unlicensed
access is as required in order to enable its use for the particular operating
purpose (e.g. accounting, charging and network planning). Depending on the
operating purpose it can be determined whether the data usage collection is
e.g. \"per UE\" or \"average across multiple UEs\" etc.
For the aspects above, it is desirable to develop a common framework for LAA
and for LWA/LWIP taking into account the Rel-14 RAN architecture, in order to
minimize the system impacts and increase flexibility of introducing the LAA
and LWA/LWIP solutions in the RAN deployment of an operator.
Interaction with RAN WGs is required to assess solutions that affect the RAN.
This work will provide input to SA WG5 for the charging aspects if any
identified.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 22.101: \"Service aspects; Service principles\".
[3] 3GPP TS 36.300: \"Evolved Universal Terrestrial Radio Access (E-UTRA) and
Evolved Universal Terrestrial Radio Access Network (E-UTRAN); Overall
description; Stage 2\".
[4] 3GPP TS 29.274: \"3GPP Evolved Packet System (EPS); Evolved General Packet
Radio Service (GPRS) Tunnelling Protocol for Control plane (GTPv2-C); Stage
3\".
[5] 3GPP TS 29.272: \"Mobility Management Entity (MME) and Serving GPRS
Support Node (SGSN) related interfaces based on Diameter protocol\".
[6] 3GPP TS 23.401: \"General Packet Radio Service (GPRS) enhancements for
Evolved Universal Terrestrial Radio Access Network (E-UTRAN) access\".
[7] 3GPP TS 22.115: \"Service aspects; Charging and billing\".
# 3 Definitions and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
TR 21.905 [1], TS 22.101 [2] apply. A term defined in the present document
takes precedence over the definition of the same term, if any, in TR 21.905
[1].
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in TR 21.905
[1] and the following apply. An abbreviation defined in the present document
takes precedence over the definition of the same abbreviation, if any, in TR
21.905 [1].
LAA Licensed-Assisted Access
LWA LTE-WLAN Aggregation
LWIP LTE WLAN Radio Level Integration with IPsec Tunnel
# 4 Key Issues
## 4.1 Key Issue #1: Unlicensed spectrum identification handling in EPS
As Licensed-Assisted Access (LAA), LTE-WLAN Aggregation (LWA) and LTE WLAN
Radio Level Integration with IPsec Tunnel (LWIP) configurations are
transparent to the core network elements, the core network elements cannot
know which spectrum was used to carry user packets.
This could be a problematic to operators, for example some operators may want
to provide free-of-charge only for unlicensed access.
With this observation, this key issue studies the following items with regard
to the unlicensed spectrum identification to be known in the core network
elements:
\- If and how the core network elements can identify the use of an unlicensed
spectrum
\- With which granularity this identification would be reported. For example
per UE, per PDN session or per bearer basis.
The solutions for this key issue shall cover both roaming and non-roaming
cases.
## 4.2 Key Issue #2: Unlicensed spectrum identification handling for IMS
As Licensed-Assisted Access (LAA), LTE-WLAN Aggregation (LWA) and LTE WLAN
Radio Level Integration with IPsec Tunnel (LWIP) configurations are
transparent to the IMS system, the IMS cannot know which spectrum was used to
carry user packets for IMS services.
This could be a problematic to operators, for example some operators may want
to provide free-of-charge only for IMS over the unlicensed access.
With this observation, this key issue studies possible impacts to the IMS
system in case LAA, LWA or LWIP is configured to carry IMS.
## 4.3 Key Issue #3: Unlicensed data usage reporting activation/deactivation
When the network (possibly HPLMN) requires unlicensed data usage reporting
from the registered PLMN (that is possibly in VPLMN) it shall be possible to
request the activation/deactivation for reporting of data usage of data
transported over unlicensed spectrum from this PLMN. This key issue will study
mechanisms on the activation/deactivation for reporting procedure and the
granularity of data reporting required e.g. whether data volume needs to
reported, or whether only the usage/non-usage of unlicensed radio resource. In
roaming scenario the VPLMN needs to be able to activate/de-activate unlicensed
usage reporting only for the HPLMN that requested it.
The granularity of activation/deactivation e.g. whether it is per UE or per
EPS bearer will only be studied as part of this key issue.
The solutions for this key issue shall cover both roaming and non-roaming
cases.
## 4.4 Key Issue #4: Unlicensed spectrum data usage reporting mechanisms
This key issue is going to study the mechanisms on how the registered PLMN
(possibly VPLMN) can report to the relevant entities inside HPLMN the data
usage of unlicensed spectrum resources, when unlicensed spectrum data usage
reporting is activated (see key issue #3). The mechanisms that will be studied
on this key issue will depend on the granularity of data reporting identified
by key issue #3. For example if the reporting is meant for only \"usage/non-
usage\" of unlicensed spectrum or is also aiming to report \"data volume\" of
data transmitted over unlicensed spectrum across a period of time.
As indicated in work item objectives and TR scope it is desirable to develop a
common framework for LAA and for LWA/LWIP.
The solutions shall cover both roaming and non-roaming cases.
## 4.5 Key Issue #5: Secondary RAT Restriction feature handling in EPS
As LTE-WLAN Aggregation (LWA) and LTE WLAN Radio Level Integration with IPsec
Tunnel (LWIP) configurations are transparent to the core network elements, the
core network elements cannot know which spectrum is used to carry user
packets.
This is a problematic for enabling secondary RAT Restriction feature to work.
With this observation, this key issue studies how secondary RAT Restriction
feature works in LAA/LWA/LWIP environment.
The solutions for this key issue shall cover both roaming and non-roaming
cases.
Editor\'s note: The service requirement of this key issue needs to be
evaluated.
## 4.6 Key Issue #6: Unlicensed spectrum charging handling
This key issues is going to study the mechanism for differentiated charging
between licensed and unlicensed spectrum for LAA and for LWA/LWIP, (e.g. for
providing a lower charge rate for unlicensed access).
This key issue will study the following items:
\- In the case that PCC is deployed:
\- how the PCRF becomes aware that the usage of unlicensed spectrum is being
used.
\- how charging differentiation is performed (e.g. the impact on PCC rule when
unlicensed spectrum is used).
\- In the case that PCC is not deployed the key issue will study mechanism for
performing charging differentiation.
The solutions shall cover both roaming and non-roaming cases.
## 4.x Key Issue #x: \
Editor\'s note: Describe key issue related to unlicensed spectrum offloading
system enhancements.
# 5 Architectural Requirements
Editor\'s note: This clause will list architectural requirements for
unlicensed spectrum offloading system enhancements.
The solution shall ensure accurate UE usage data in the uplink and downlink
over unlicensed access network used in LAA and LWA/LWIP
In case of non-roaming, the solution shall ensure that the operators is able
to configure the granularity of usage data collected in the uplink and
downlink over unlicensed access network in LAA and LWA/LWIP based on their
policy.
In case of roaming, the solution shall ensure that the HPLMN and VPLMN are
able to agree on the preferred granularity of usage data collected in the
uplink and downlink over unlicensed access network in LAA and LWA/LWIP based
on their policy.
The impact on the signalling procedures shall be minimized.
# 6 Solutions
Editor\'s note: This clause will contain a list of potential solutions for
unlicensed spectrum offloading system enhancements.
## 6.1 Solution #1: Use of Bearer RAT type IE per bearer for unlicensed
spectrum identification
This is a solution to Key issue #1.
### 6.1.1 Description
In the EPS, the RAT type parameter is used to identify a RAT being attached
and being used to carry user packets. This solution proposes to add and use a
bearer RAT type parameter to identify unlicensed spectrum in dual connectivity
environment.
This solution applies to only the SCG bearers in DC and switched LWA bearers.
This solution is characterized by the following enhancements;
\- Defining a bearer RAT type information per bearer.
\- As the E-RAB Modification can be performed per bearer basis, it is
reasonable to identify a bearer RAT type per bearer. In order to identify a
bearer RAT type per bearer, this solution proposes the following updates.
\- S1-AP interface:
\- The E-RAB Modification indication message newly carry a bearer RAT type
information per S1-U bearer basis. For example, \"E-RAB to Be Modified Item
IEs\" will include bearer RAT type. But how to update the S1 AP protocol is
left open to the RAN3.
\- GTP v2 interfaces:
\- The following GTP messages newly carry bearer RAT type information per
bearer basis.
\- Create Session Request message
\- Bearer Resource Command message
\- Modify Bearer Request message
\- Modify Access Bearers Request message
\- Context Request message
\- Change Notification Request message
NOTE: According to the TS 29.274 [4], the RAT type information is already
included per message, i.e. per PDN session or per UE.
As new bearer RAT type information can be indicated in the each bearer context
IEs, EPC nodes can recognize which RAT actually being used for carrying user
packets per bearer basis.
As new bearer RAT type information is added in addition to the existing RAT
type information, this approach guarantees backward compatibility. For
example, if the PGW is made based on release 14, then newly added bearer RAT
type in the bearer contest IE by the MME is simply discarded but the existing
RAT type information can still be refereed as it is today.
\- Procedure updates.
\- E-UTRAN initiated E-RAB modification procedure needs to be updated.
Figure 6.1.1-1: Bearer RAT type reporting flow
1\. Whenever E-RAB Modification procedure takes place that effects RAT type
change, the MeNB sends the E-RAB Modification indication message to the MME
with a bearer RAT type information per S1-U bearer basis.
2\. The Modify Bearer Request message newly includes a bearer RAT type
information per bearer basis. If the SGW detects that the bearer RAT type
information is changed, then the SGW forwards the Modify Bearer Request
message to the PGW in order to let the PGW know the latest RAT type being used
by the UE.
\- RAT type information value.
\- In addition to the existing RAT type, information related to bearer RAT
type needs to be provided by this solution.
### 6.1.2 Impacts on existing nodes and functionality
\- eNB
\- When a master eNB sends the E-RAB Modification Indication message to the
MME, the master eNB includes a bearer RAT type information being used per S1-U
bearer basis.
\- MME
\- The MME extracts the bearer RAT type information per bearer in the E-RAB
Modification Indication message and put them into the modify bearer request
message.
\- The MME indicates in the modify bearer request message that the purpose of
this message is just to inform bearer RAT type update only. I.e. No path
update is required.
\- SGW
\- The SGW relay the modify bearer request message to the PGW when the SGW
detects that the bearer RAT type information per bearer is changing.
\- The SGW indicates in the modify bearer request message to the PGW that the
purpose of this message is just to inform bearer RAT type update only.
\- The SGW receives the modify bearer request message with the bearer RAT type
information per bearer and take necessary action toward the Gxx interface.
\- PGW
\- The PGW receives the modify bearer request message with the bearer RAT type
information per bearer and take necessary action toward the Gx, Sy and Gy
interfaces.
### 6.1.3 Solution Evaluation
Editor\'s note: Use this clause for evaluation at solution level. Evaluation
at key issue level is done in a separate clause.
## 6.2 Solution #2: Reporting of secondary RAT
### 6.2.1 Description
This solution is for key issue #1 and covers only the case of reporting the
secondary RAT type to the CN that can be used for accounting purposes. This
solution does not cover data usage reporting.
The procedures are modelled around the Location Change Reporting Procedure in
TS 23.401 [6], clause 5.9.2.
Editor\'s note: Whether the Secondary RAT reporting can be using the existing
messages for the Location Change Reporting procedure and only new IEs or is a
separate set of messages is FFS.
The PGW may request for each PDN connection independently whether the MME
shall report changes of (addition/removal) of \"Secondary RAT\" (e.g. WLAN,
LAA) including the ECGI/eNodeB ID of the secondary RAT to the PGW.
This reporting may be controlled by the PGW at the following procedures:
\- Attach,
\- Tracking Area Update (when inducing a Modify Bearer procedure to the PGW),
\- Inter-RAT Mobility to E-UTRAN (when inducing a Modify Bearer procedure to
the PGW),
\- Dedicated bearer activation,
\- PDN GW initiated bearer modification with bearer QoS update,
\- PDN GW initiated bearer modification without bearer QoS update,
\- UE requested PDN connectivity,
\- UE requested bearer resource modification.
The PGW may also request the MME to stop any of the above mentioned types of
reporting. The MME shall obey the last explicit instruction received from the
PGW or source MME.
During both mobility management and session management procedures, the MME
shall indicate to the PGW the support of \"Secondary RAT reporting\":
\- If Secondary RAT information is permitted to be sent to the PGW according
to MME operator\'s policy,
\- If ECGI/eNodeB ID/TAI information is permitted to be sent to the PGW
according to MME operator\'s policy,
Figure 6.2.1-1 represents the Secondary RAT addition/removal triggering a
report of change in ECGI.
{width="5.00625in" height="2.29375in"}
Figure 6.2.1-1: Notification of the Secondary RAT reporting
1\. the MME has received an ECGI information Update from the Master eNodeB (in
case of Dual Connectivity) including indication of Secondary RAT.
2\. If the MME has been requested to report changes of Secondary RAT to the
PGW for the UE, the MME shall send the Change Notification message to the SGW
indicating the new Secondary RAT type e.g. WLAN, LAA, ECGI information.
3\. The SGW may forward the Change Notification message to the PGW based on
certain conditions.
Editor\'s note: What the conditions are is FFS.
4\. The PGW sends the Change Notification Ack to the SGW.
5\. The SGW forwards the Change Notification Ack to the MME.
### 6.2.2 Impacts on existing nodes and functionality
Editor\'s note: Capture impacts on existing 3GPP nodes and Functional elements
(e.g. UE, MME, eNB, S-GW, P-GW, etc.).
The following nodes are impacted:
PGW:
\- may request for each PDN connection independently whether the MME shall
report changes of addition/removal of \"Secondary RAT\" (e.g. WLAN, LAA)
including the ECGI/eNodeB ID of the secondary RAT to the PGW.
\- report changes of \"Secondary RAT\" to PCRF.
Master eNB, MME, SGW:
\- forward changes \"Secondary RAT\" to the next node up stream.
Editor\'s notes: The exact impacts in the aforementioned nodes will depend on
whether the existing procedures for \"Location Change Reporting Change\" can
be reused with the addition of new information elements to report the
\"Secondary RAT\" and \"Secondary RAT ECGI/eNodeB ID\".
### 6.2.3 Solution Evaluation
Editor\'s note: Use this clause for evaluation at solution level. Evaluation
at key issue level is done in a separate clause.
## 6.3 Solution #3: Capability indication from RAN
### 6.3.1 Description
Editor\'s note: Include the Key issue # the solution is covering. Describe the
solution. Sub-clause(s) may be added to capture details, procedural flow, etc.
This solution applies to Key Issue #1.
The solution builds on the following principles:
\- Data collection for general accounting/statistics and network planning is
done within RAN and reported using O&M procedures without any impact to SA2
specifications.
\- To influence end-user charging, RAN provides an indication whether the
capability to use unlicensed spectrum exist or not for a specific UE.
\- If the capability to use unlicensed spectrum exist, RAN may further provide
an indication whether unlicensed access was used to carry data traffic for the
UE.
Editor\'s note: If charging data is required then how the indication is
provided to other entities in the core network is FFS and will be addressed
under Key Issue # 3 & #4.
### 6.3.2 Impacts on existing nodes and functionality
Editor\'s note: Capture impacts on existing 3GPP nodes and Functional elements
(e.g. UE, MME, eNB, S-GW, P-GW, etc.).
\- UE
\- There is no impact on UE.
\- eNB
\- eNB needs to be able to provide an indication whether the capability to use
unlicensed access exist, and an indication whether unlicensed access was used.
Per-UE traffic volume counts are not provided by eNB
Editor\'s note: Impact on other entities are FFS.
### 6.3.3 Solution Evaluation
Editor\'s note: Use this clause for evaluation at solution level. Evaluation
at key issue level is done in a separate clause.
## 6.4 Solution #4: Capability indication from RAN
### 6.4.1 Description
Editor\'s note: Include the Key issue # the solution is covering. Describe the
solution. Sub-clause(s) may be added to capture details, procedural flow, etc.
The solution builds on the following principles:
When an operator only requires usage information towards the OAM system, the
following basic solution can be applied to address Key Issue #1:
\- Data collection for general accounting/statistics and network planning is
done within RAN and reported using O&M procedures without any impact to SA WG2
specifications.
\- To influence end-user charging, RAN provides an indication whether the
capability to use unlicensed spectrum exist or not for a specific UE.
When an operator would like to have usage information available in the CN and
also have some control of such collection of information from the network
(i.e. addressing multiple Key Issues):
\- If the capability to use unlicensed spectrum exist, RAN may further provide
an indication whether unlicensed access was used to carry data traffic for the
UE.
> \- eNB collects the unlicensed/licensed packet count(Uplink/Downlink) and
> associated ERAB information (which maps to EPS Bearer Identity in the CN)
> for unlicensed use for the UE when MME informs eNB that such information
> needs to be collected.
>
> Addressing Key Issue 1 & 3:
In this solution it is assumed that only during Attach and TAU procedure MME
informs eNB. If the subscription status changes while UE is connected, no
action taken during the active period of the UE until the UE attaches again.
When X2 HO is performed, the information regarding data count need to be
transferred between the serving and target eNBs.
Editor\'s note: The data count granularity details TBD & to be confirmed by
RAN WGs.
When S1 HO procedure is performed, the status information need to be
transferred between serving and target eNBs.
> Addressing Key Issue 5:
We may choose to add information related to Secondary Radio restriction into
the subscription and pass it to eNB. It is possible to have the Subscription
information to include no Unlicensed Secondary Access (e.g. Secondary RAT
allowed & count, Secondary RAT allowed with no count, No Secondary RAT
allowed) and provide that indication to eNB as well. Based on this input, eNB
may not invoke LAA/LWA/LWIP procedures.
> Addressing Key issue 6:
This solution uses only offline charging mechanism for generating CDRs.
eNB collects data count associated with ERAB that has used unlicensed spectrum
and provide that information to the MME via Uplink NAS Transport (Deactivate
EPS Bearer Context Accept), the Bearer Release Request (EPS Bearer Identity),
Initial Context Setup Complete, Handover Request Ack and UE Context Response,
Path Switch Request and S1 Release UE Context Release messages to the MME.
S-GW incorporates the eNB provided usage information per EPS bearer as part of
the CDR it generates. Inter operator settlement using GSMA TAP mechanism to
provide CDR info from SGW that has been collected by the eNB and provided to
the core network at identified triggers indicated above.
Editor\'s note: Additionally, it will be investigated if the information may
be also provided to PGW and in which scenarios.
### 6.4.2 Impacts on existing nodes and functionality
\- UE
\- There is no impact on UE.
\- eNB
\- eNB needs to be able to provide an indication whether the capability to use
unlicensed access exist, and an indication whether unlicensed access was used.
> \- Per-UE traffic volume counts associated with the E-RAB are provided by
> eNB when requested by MME, and includes the ERAB associated with unlicensed
> use.
>
> \- eNB transfers the status of the unlicensed subscription during S1/X2 HO
> to target eNB.
>
> \- eNB may restrict use of unlicensed spectrum if subscription does not
> allow it for a UE.
>
> \- MME
\- Receive subscription information and provide it to eNB.
\- Receive unlicensed/licensed packet count from eNB and provide it to SGW
during eNB change and UE context release.
> \- SGW
\- Receive the unlicensed/licensed packet count from an eNB and provide the
input when CDR generated.
Editor\'s note: Impact on other entities are FFS.
### 6.4.3 Solution Evaluation
Editor\'s note: Use this clause for evaluation at solution level. Evaluation
at key issue level is done in a separate clause.
## 6.5 Solution #5: Unlicensed data usage reporting activation/deactivation
taking node capability into account
This is a solution to Key issue #3.
### 6.5.1 Description
This solution proposes to use two indications, one from the HSS as
subscription data per APN and the other one from the PGW whether the PGW
wishes to use data usage reporting at the RAN.
In addition, this solution takes node capability in the EPS into account. eNB,
MME, SGW and PGW are examined whether they support this feature. If one of
them are not supported, this feature is NOT activated and falls back to the
packet usage count at the PGW as the same way today.
This solution is characterized by the following enhancements:
\- The HSS holds the flag per APN \"data usage reporting at RAN\" is required
or not. This flag is downloaded to the MME when a UE attaches to the EPS. The
HSS may instruct use of \"data usage reporting in RAN\" feature per vPLMN
basis based on the roaming agreement.
\- When the PDN session is created, \"data usage reporting in RAN\" feature is
activated per PDN connection basis taking capability of related nodes into
account.
\- When the PGW decides to activate the \"data usage reporting in RAN\"
feature, then the PGW informs the packet count rule to the eNB. Even the PGW
indicates its wish to activate the \"data usage reporting in RAN\" feature,
the PGW may continue counting the packet usage at the PGW.
\- Once eNB accepts the \"packet count reporting in RAN\" feature, this is
informed to all related nodes up to the PGW.
\- In this proposal, all EPC nodes in the PLMN should be either support or not
support homogeneously. However, some eNBs may not support this feature while
other eNBs support. For example, HeNB may not support.
\- Procedure updates.
> The ATTACH, TAU procedures needs to be updated. For the UE requested PDN
> connectivity procedure, step 5 and following steps take place after the MME
> receives the PDN Connectivity Request message from the UE.
Figure 6.5.1-1: ATTACH/ TAU procedure for Unlicensed data usage reporting
activation
0\. The eNB and the MME exchanges their support of the Data Usage Reporting at
RAN (DURAR) during the S1 Setup procedure, the eNB Configuration Update
procedure and the MME Configuration Update procedure.
4\. The HSS provides the flag that indicates a request on activating DURAR.
This flag is per APN basis.
5\. If the MME support this feature, the MME examines the eNB capability, and
the flag received from the HSS.
6\. If the DURAR needs to be activated, then this indication is set in the
Create Session Request message.
7\. If the PGW decides to activate DURAR, then this indication is set on the
Create Session Response message with the DURAR accepted. The PGW also include
the packet count rule on this message.
The packet count rule may consist of packet count reporting period, possible
triggers for packet count reporting or conditions for packet counting. This
information is referred by the eNB for counting packet and how to report them
to the PGW.
8\. The MME sends the Initial Context Setup Request message to the eNB with
the DURAR accepted indication and the packet count rule.
10\. The eNB starts packet counting based on the packet count rule that is
received in step 8 and reply the Initial Context Setup response message to the
MME.
11\. The MME sends the Modify Bearer Request message up to the PGW informing
that DURAR has been activated.
### 6.5.2 Impacts on existing nodes and functionality
\- eNB
\- The eNB is able to count the user packet based on the packet count rule
that is provided by the PGW.
\- The eNB is able to indicate its support for DURAR.
\- MME
\- The MME coordinates the activation of DURAR taking node capabilities and
the indication from the HSS into account.
\- SGW
\- The SGW is able to indicate its support for DURAR.
\- PGW
\- The PGW is able to receive the DURAR request indication and make a
judgement whether the DURAR to be activated or not.
\- Once the PGW accepts, then the PGW provides the count rule to the eNB via
the SGW and the MME.
### 6.5.3 Solution Evaluation
Editor\'s note: Use this clause for evaluation at solution level. Evaluation
at key issue level is done in a separate clause.
## 6.6 Solution #6: uplink marking and downlink counters in RAN
### 6.6.1 Description
#### 6.6.1.1 General
The solution covers Key Issues #1, #3 and #4 and addresses both LTE-WLAN
Aggregation split and switched bearer modes.
The solution is based on keeping the existing offline mechanisms and online
credit-based mechanisms with quota in the PGW, and on adding mechanisms that
do not require to handle credit-based mechanisms with quota at the RAN. The
solution consists in different mechanisms for uplink and downlink as follows:
Reporting mechanisms:
\- For uplink traffic, the eNB indicates in each packet whether data was
received from 3GPP access or from unlicensed spectrum access using an \"access
type\" indication and corresponding data volume on that access (a packet may
have been fragmented and fragments may have been sent via different accesses).
The PGW (and/or the SGW for inter-operator accounting in case of home-routed
roaming scenario) just needs to read the access type indication and increments
the appropriate counter(s) (i.e. the unlicensed spectrum access counter or/and
the 3GPP access counter). It allows the PGW to perform flow based charging or
bearer charging for the uplink since the PGW can know, for each IP packet, how
much data has been sent on licensed access and how much data has been sent
over unlicensed spectrum . It also allows both offline an online charging for
the uplink.
\- For downlink traffic, when the eNB receives a downlink packet, it decides
whether the packet (or each fragment) should be sent using the 3GPP access or
using the unlicensed spectrum access. Based on a (list of) counter-ids
provided with the downlink packet by the PGW and possibly by the SGW in case
of home routed roaming scenario, the eNB increments those data volume
counter(s) for the access type (e.g. 3GPP access, unlicensed access) over
which the data has been sent. The counters can correspond to Service Data
Flows, Applications or bearers.
\- At a point of time decided by the PGW or at well-known events such as
handovers (see below), the eNB sends the (list of) counter(s) value(s) for
each access type to the PGW using existing S1 signalling messages. The
downlink traffic counter(s) value(s) for each access type are sent on a per
bearer basis.
Activation/deactivation mechanisms:
\- The mechanisms are valid whenever the PGW is in the home network (non-
roaming scenario, home routed roaming scenario) or in the visited network
(local breakout roaming scenario).
\- In order to trigger the eNB to mark the uplink packets, the PGW sends an
indication \"Access Marking\" set to \"start\" to the eNB requesting to start
marking the uplink packets. The PGW triggers the stop of marking uplink
packets, by sending an indication \"Access Marking\" set to \"stop\" to the
eNB. These triggers can be sent by the PGW/SGW via MME to the eNB via GTP-C/S1
signalling at RAB establishment/modification. This can be decided during the
normative phase.
\- In order to trigger the downlink packets counting in the eNB, the PGW
indicates, in each packet, a (list of) counter-ids that points to counters to
be incremented depending on the access the packet (or fragment) is sent. This
list is generated by the PGW and possibly from the SGW in case of home-routed
roaming scenario, based on the required measurements for downlink traffic
determined by the PGW (PCC Rules, bearer...). For the \"bearer level\"
counters, there may be counter identifiers standard values, which can be used
by the PGW when bearer level counters are required.
\- In order to trigger the reporting of counters values, the PGW indicates the
events for reporting. The events may be implicit: on HO complete, on ERAB
Release, on S1 Release, on Path Switch Request. The events may also be
explicit: when the Volume Reached/Time Reached thresholds or periodicity
provided by the PGW (and possibly by the SGW) are reached, or upon PGW
signalling request based on the charging characteristics (thresholds...)
determined by offline charging mechanisms or determined by the OCS. The
explicit triggers are sent in the control plane.
If reported via control plane, the counters are also sent from MME to SGW/PGW
at MME relocation, at SGW relocation or when the UE moves to an eNB that does
not support the feature, using Modify Bearer Request or Change Notification
Request.
An indication of \"supported functionality\" is sent from the eNB to the MME.
Whenever the new eNB/target does not support the functionality, the MME sends
a \"non-supported indication\" to the PGW at PDN connection setup and at
handovers, together with the counters, and requests the eNB to not use
unlicensed spectrum access.
Charging mechanisms:
\- To allow for charging differentiation between 3GPP and unlicensed spectrum
accesses at OFCS and OCS, the existing offline and online charging for EPC
relying on Flow based charging mechanism are enhanced to collect data of the
same flows which are sent/received over unlicensed spectrum separately from
those sent/received over licensed spectrum:
\- The Flow based charging (PCC Rules) and bearer charging functions are
extended with an additional Rating Group and/or bearer container for the
specific collection of traffic over unlicensed spectrum.
\- This implies updates to the PCC rules allowing the PCRF to specify
different Rating Groups for the same traffic flow depending on whether the
traffic flow has been sent over 3GPP access or over unlicensed spectrum
access.
##### 6.6.1.2 Procedures6.6.1.2.1 Initial Attach
Figure 6.2.1.2.1-1: Attach procedure
The Attach procedure is the same as specified in TS 23.401 [6], clause 5.3.2.1
with the following modifications:
2\. The eNB indicates in the Initial UE message its support of the new
feature.
12\. The MME indicates in the Create Session Request its support of the new
feature.
13\. The SGW relays the support of the new feature to the PDN GW.
14\. The PCRF provides PCC Rule(s) with both rating group for 3GPP access and
rating group for unlicensed access (for the case of FBC charging).
15\. Based on installed PCC rules, the PDN GW identities for downlink counters
to be installed in the RAN, per bearer, per service data flow and/or per
application id. Each downlink packet is appended with a list of downlink
counters-id. The PDN GW may include in Create Session Response an indication
\"Uplink Access Marking\" requesting the eNB to start marking uplink packets
with \"Access Type\" indication and appending the data volume received on
unlicensed access for each packet. The PGW shall be prepared to count data
volume for each access received in the GTP header of uplink packets.
16\. In home routed scenario, the SGW may include in Create Session Response
an indication \"Uplink Access Marking\" requesting the eNB to start marking
uplink packets and appending the data volume received on unlicensed access for
each packet.
17\. The indication \"Uplink Access Marking\" is transferred to the eNB.
22\. For any uplink packet received via an access type, based on the
indication \"Uplink Access Marking\", the eNB shall add an \"Access Type\"
indication and the data volume received on unlicensed access for each packet
in the GTP-u header of the uplink packet.
24\. When a downlink packet is received by the eNB, and if the eNB uses LAA,
LWA or LWIP for the UE, it decides whether the packet is sent via 3GPP access
or via unlicensed spectrum access according to TS 36.300 [3]. The eNB
increments, for the corresponding access, the downlink counters identified by
the downlink counter-ids provided with the downlink packet by the PGW and
possibly by the SGW for this packet.
##### 6.2.1.2.2 UE requested PDN connectivity
Figure 6.2.1.2.2-1: UE requested PDN connectivity
The UE Requested PDN connectivity procedure is the same as specified in TS
23.401 [6], clause 5.10.2 with the following modifications:
4\. The PCRF provides PCC Rule(s) with both rating group for 3GPP access and
rating group for unlicensed access.
5\. Based on installed PCC rules, the PDN GW identities for downlink counters
to be installed in the RAN, per bearer, per service data flow and/or per
application id. Each downlink packet is appended with a list of downlink
counters-id. The PDN GW may include in Create Session Response an indication
\"Uplink Access Marking\" requesting the eNB to start marking uplink packets
with \"Access Type\" indication and appending the data volume received on
unlicensed access for each packet. The PGW shall be prepared to count data
volume for each access received in the GTP header of uplink packets.
6\. In home routed scenario, the SGW may include in Create Session Response an
indication \"Uplink Access Marking\" requesting the eNB to start marking
uplink packets and appending the data volume received on unlicensed access for
each packet.
7\. The indication \"Uplink Access Marking\" is transferred to the eNB.
12\. For any uplink packet received via an access type, based on the
indication \"Uplink Access Marking\", the eNB shall add an \"Access Type\"
indication and the data volume received on unlicensed access for each packet
in the GTP-u header of the uplink packet.
14\. When a downlink packet is received by the eNB, and if the eNB uses LAA,
LWA or LWIP for the UE, it decides whether the packet is sent via 3GPP access
or via unlicensed spectrum access according to TS 36.300 [3]. The eNB
increments, for the corresponding access, the downlink counters identified by
the downlink counter-ids provided with the downlink packet by the PGW and
possibly by the SGW for this packet.
##### 6.2.1.2.3 Dedicated bearer activation
Figure 6.2.1.2.3-1: Dedicated Bearer Activation Procedure
The Dedicated Bearer Activation procedure is the same as specified in TS
23.401 [6], clause 5.4.1 with the following modifications:
2\. Based on installed PCC rules, the PDN GW identities for downlink counters
to be installed in the RAN, per bearer, per service data flow and/or per
application id. Each downlink packet is appended with a list of downlink
counters-id. The PDN GW may include in Create Session Response an indication
\"Uplink Access Marking\" requesting the eNB to start marking uplink packets
with \"Access Type\" indication and appending the data volume received on
unlicensed access for each packet. The PGW shall be prepared to count data
volume for each access received in the GTP header of uplink packets.
3\. In home routed scenario, the SGW may include in Create Bearer Request an
indication \"Uplink Access Marking\" requesting the eNB to start marking
uplink packets and appending the data volume received on unlicensed access for
each packet.
4\. The indication \"Uplink Access Marking\" is transferred to the eNB.
9\. For any uplink packet received via an access type, based on the indication
\"Uplink Access Marking\", the eNB shall add an \"Access Type\" indication and
the data volume received on unlicensed access for each packet in the GTP-u
header of the uplink packet.
12\. When a downlink packet is received by the eNB, and if the eNB uses LAA,
LWA or LWIP for the UE, it decides whether the packet is sent via 3GPP access
or via unlicensed spectrum access according to TS 36.300 [3]. The eNB
increments, for the corresponding access, the downlink counters identified by
the downlink counter-ids provided with the downlink packet by the PGW and
possibly by the SGW for this packet.
##### 6.2.1.2.4 S1-based handover
Figure 6.2.1.2.4-1: S1-based handover
The S1-based handover procedure is the same as specified in TS 23.401 [6],
clause 5.5.1.2 with the following modifications:
3\. The Forward Relocation Request message includes, for each PDN connection,
the indication \"Uplink Access Marking\", if provided by the PGW.
4a. In home routed scenario, the SGW may include in Create Session Response an
indication \"Uplink Access Marking\" requesting the eNB to start marking
uplink packets and appending the data volume received on unlicensed access for
each packet.
7\. The indication \"Uplink Access Marking\" is transferred to the eNB in the
Handover Request.
10.The values of the downlink counters for each access type and their
corresponding downlink counter-ids are included in the eNB Status Transfer
message to the source MME.
12\. When a downlink packet is received by the eNB, and if the eNB uses LAA,
LWA or LWIP for the UE, it decides whether the packet is sent via 3GPP access
or via unlicensed spectrum access according to TS 36.300 [3]. The eNB
increments, for the corresponding access, the downlink counters identified by
the downlink counter-ids provided with the downlink packet by the PGW and
possibly by the SGW for this packet.
> For any uplink packet received via an access type, based on the indication
> \"Unlicensed Access Marking\", the eNB shall add an \"Access Type\"
> indication and the data volume received on unlicensed access for each packet
> in the GTP-u header of the uplink packet.
14b.The source MME includes the values of the downlink counters and their
corresponding downlink counter-ids in the Forward Relocation Complete message
to the target MME.
15\. The target MME includes the values of the downlink counters and their
corresponding downlink counter-ids in the Modify Bearer Request message to the
SGW.
16\. The SGW includes the values of the downlink counters and their
corresponding downlink counter-ids in the Modify Bearer Request message to the
PDN GW. The PDN GW increments the corresponding downlink counters by the
values provided by the source eNB. In home-routed scenarios, the SGW uses the
values of the downlink counters and their corresponding downlink counter-ids
provided by the SGW to increment the downlink counters relative to inter-
operator accounting.
##### 6.2.1.2.5 S1 release procedure
Figure 6.2.1.2.5-1: S1 Release Procedure
The S1 release procedure is the same as specified in TS 23.401 [6], clause
5.3.5 with the following modifications:
1\. The values of the downlink counters for each access type and their
corresponding downlink counter-ids are included in the S1UE Context Release
Request message to the MME.
2\. The MME stores the values of the downlink counters and their corresponding
downlink counter-ids provided by the PDN GW, and includes the values of the
downlink counters and their corresponding downlink counter-ids provided by the
SGW in the Release Access Bearers Request message to the SGW. The downlink
counters and their corresponding downlink counter-ids provided by the PGW will
be reported to the PGW either:
\- at the MME Initiated Dedicated Bearer Deactivation (see clause 5.4.4.2 in
TS 23.401 [6]), when triggered by the MME: in this case, they are included in
the Delete Bearer Command messages from MME to SGW and from SGW to PDN GW;
\- if periodic report trigger is set, at periodic timer expiry, via an
additional signalling exchange with the PDN GW, e.g. using Change Notification
Request.
##### 6.2.1.2.6 UE or MME requested PDN Disconnection
Figure 6.2.1.2.6-1: UE or MME requested PDN disconnection
The UE or MME requested PDN disconnection procedure is the same as specified
in TS 23.401 [6], clause 5.310.3 with the following modifications:
2\. If the MME is aware that downlink counters are in use in the eNB, or if
the MME has stored downlink counters, the MME indicates in the Delete Session
Request that downlink counters need to be fetched at the eNB.
3\. The SGW forwards this indication in the Delete Session Request sent to the
PDN GW.
4\. If the PDN GW decides that the downlink counters need to be fetched at the
eNB, the PDN GW indicates it in the Delete Session Response.
6\. If the PDN GW has sent the indication for fetching the downlink counters
in the eNB, the SGW does not delete its UE context.
7\. The indication to fetch downlink counters is provided to the eNB.
9b. The values of the downlink traffic downlink counters and their
corresponding downlink counter-ids are included in the S1 Deactivate Bearer
Response message to the MME.
11\. The values of the downlink counters and their corresponding downlink
counter-ids are included in the Delete Session Confirm message to the SGW. In
home-routed scenarios, the SGW uses the values of the SGW-established downlink
counters and their corresponding downlink counter-ids to increment the
downlink counters relative to inter-operator accounting.
12\. The values of the PGW-established downlink counters and their
corresponding downlink counter-ids are included in the Delete Session Confirm
message to the PDN GW. The PDN GW increments the corresponding downlink
counters by the values provided by the source eNB. The PDN GW has now all the
charging information for OFCS/OCS.
### 6.6.2 Impacts on existing nodes and functionality
Editor\'s note: Capture impacts on existing 3GPP nodes and Functional elements
(e.g. UE, MME, eNB, S-GW, P-GW, etc.).
\- UE
\- There is no impact on UE.
\- eNB
\- The eNB indicates in each uplink packet whether data was received from 3GPP
access or from unlicensed spectrum access using an \"access type\" indication
and corresponding data volume on that access.
> \- Based on a counter-ids provided with the downlink packet by the PGW
> and/or SGW, the eNB shall be able to create downlink data volume counters
> per MME instructions, and shall increment those data volume counter(s) for
> the access type (e.g. 3GPP access, unlicensed access) over which the data
> has been sent.
>
> \- The eNB sends the downlink data volume counter(s) value(s) for each
> access type to the PGW using existing S1 signalling messages.
>
> \- eNB may restrict the use of unlicensed spectrum for a UE, based on MME
> instructions.
>
> \- MME
\- Transfers of the events for reporting sent via existing signalling from SGW
and/or PGW to the eNB.
\- Receive downlink data volume counters from eNB and provide them to SGW
during implicit and explicit events.
\- SGW/PGW
\- The PGW (and/or the SGW for inter-operator accounting in case of home-
routed roaming scenario) needs to read the access type indication in the
uplink packets and to increment the appropriate counter(s).
\- The PGW shall send an indication \"Access Marking\" to the eNB requesting
to start/stop marking the uplink packets.
\- The PGW indicates, in each downlink packet, a (list of) counter-ids that
points to counters to be incremented depending on the access the
packet/fragment is sent to.
\- The PGW indicates the events for reporting: implicit (such as HO complete,
ERAB Release, S1 Release, Path Switch Request), as well as explicit (such as
Volume Reached/Time Reached thresholds or periodicity).
\- In case of flow based charging, the PGW need to support PCC multiple rating
groups for differentiated charging.
\- The SGW may temporarily store downlink data volume counters received from
the MME when reporting to PGW is not required immediately (implicit events),
in order to optimise the SGW/PGW signalling.
### 6.6.3 Solution Evaluation
Editor\'s note: Use this clause for evaluation at solution level. Evaluation
at key issue level is done in a separate clause.
It allows both IPCAN bearer and flow based charging, and includes periodic
reporting. Online charging is not supported.
This solution includes all triggering and reporting aspects.
This solution can be extended for any Dual RAT connectivity.
It does not require charging knowledge nor charging interfaces in the RAN. In
particular, it does not require credit-control in the RAN, but only to mark
uplink packets and to create, increment and report generic counters per PGW
instructions.
However, the instructions from PGW should be reasonable i.e. minimizing the
number of counters per UE (e.g. avoiding systematic flow based charging
counting and prefer per bearer counting).
Note that there may be a problem of sequencing, which would need FFS.
## 6.7 Solution #7: Enforce Secondary RAT Restriction at the eNB
This is a solution to Key Issue #5: Secondary RAT Restriction feature handling
in EPS.
### 6.7.1 Description
This solution proposes to enforce Secondary RAT Restriction for use of
unlicensed spectrum (this means restrict use of any of LWA/LWIP, LAA) at the
eNB.
This solution is characterized by the following enhancements;
\- HSS will have new subscriber data \"Secondary RAT Restriction Data\" for
use of unlicensed spectrum as part of the Access Restriction Data in HSS.
\- MME will inform the eNB if the UE has an Access Restriction for use of
unlicensed spectrum either signalled from the HSS, or, locally generated by
VPLMN policy in the MME) the MME signals this to the E-UTRAN as part of
Handover Restriction List.
\- eNB checks whether to restrict use of unlicensed spectrum for this UE.
When the eNB is about to initiate either LWA, LWIP or LAA, the eNB refers to
the Handover Restriction List for \"Secondary RAT Restriction Data\". If the
unlicensed spectrum is subject for Secondary RAT Restriction, then the eNB
shall not initiate LWA, LWIP or LAA procedure.
\- Procedure updates.
\- ATTACH, TAU with Active flag and UE triggered Service Request.
Figure 6.7.1-1: Impact on ATTACH, TAU with Active flag and UE triggered
Service Request procedures
Step 2: S1 Initial Context Setup Request message carries \"Secondary RAT
Restriction Data\" in Handover Restriction List for use of unlicensed
spectrum.
\- S1-HO procedure.
Figure 6.7.1-2: Impact on S1 HO procedure
Step 2: Forward relocation request message carries the subscription parameter
for \"Secondary RAT Restriction Data\" to use unlicensed spectrum.
Step 3: Handover Request message carries the Handover Restriction List
including \"Secondary RAT Restriction Data\" for use of unlicensed spectrum.
\- X2-HO procedure.
Figure 6.7.1-3: Impact on X2 HO procedure
Step 2: Handover Request message carries the Handover Restriction List for
\"Secondary RAT Restriction Data\".
### 6.7.2 Impacts on existing nodes and functionality
\- **eNB**
The eNB is able to receive the \"Secondary RAT Restriction Data\" as part of
the Handover Restriction List..
The eNB is able to enforce Secondary RAT Restriction for use of unlicensed
spectrum.
\- **MME**
The source MME is able to send the \"Secondary RAT Restriction Data\" in the
Forward relocation request message to the target MME in the S1 based Handover
with MME change procedure.
MME will inform the eNB if the UE has an Access Restriction for use of
unlicensed spectrum (either signalled from the HSS, or locally generated by
VPLMN policy in the MME).
MME signals this to the E-UTRAN as part of Handover Restriction List.
\- **HSS**
HSS will have \"Secondary RAT Restriction Data\" for use of unlicensed
spectrum as part of the Access Restriction Data .
### 6.7.3 Solution Evaluation
Editor\'s note: Use this clause for evaluation at solution level. Evaluation
at key issue level is done in a separate clause.
The solution allows to enforce Secondary RAT Restriction for use of unlicensed
spectrum (this means restrict use of any of LWA/LWIP, LAA) at the eNB.
This solution is in line with the framework agreed in TS 23.401 [6] through CR
3225 for Access Restriction for 5G NR.
## 6.8 Solution #8: Data volume collection and reporting from RAN
### 6.8.1 Description
Figure 6.8.1-1 describes the reference architecture for the primary and
secondary cells at RAN level. Note that the existence of the secondary cell
may be transparent to the EPC; and that all packets served by the primary and
secondary cell are sent on a common S1-U interface to the EPC.
Figure 6.8.1-1: Example reference architecture for LTE + WLAN or LTE+LTE-LAA
aggregation at RAN level
The following fundamental characteristics need to be considered when designing
a solution for Charging Data Reporting that accounts for volume transmitted
over primary and secondary cells:
\- As per architecture model, S1-U does not contain separate explict tunnels
for data received or to be transmitted over primary and secondary cells.
Whether data is transmitted over primary and secondary cells is currently
known only to eNB, and it is transparent to S-GW/P-GW.
\- Charging Data Records (CDRs) are created in the core network elements
(S-GW/P-GW), not in the RAN.
\- CDR containers are open/closed every time the UE\'s ULI changes.
For all possible solutions, both the SGW-CDR and P-GW CDR are extended to
include explicit account for data volumes over primary and secondary cells.
#### 6.8.1.1 RAN accounting and reporting of data volume transmitted over
primary and secondary cells.
In order to differentiate charging for the data sent over the primary cell and
secondary cell, the eNB needs to support the following new functionalities:
\- Separate accounting of data volume transmitted over primary and secondary
cells. (This should be the IP layer packets and not include for example the
RLC or PDCP headers added by the MAC to enable in order delivery and
fragmentation and reassembly).
\- Reporting of the above to the core network. There are three possible
reporting mechanisms:
\- The eNB reports data UL and DL volumes in primary/secondary cells to the
S-GW, over control plane signalling via MME. The SGW-CDRs are extended to
include explicit account for UL and DL data volumes over primary and secondary
cells. This solution covers and works only for offline charging.
\- The eNB reports UL and DL data volumes in primary/secondary cells to the
S-GW directly over S1-U interface, e.g., in the GTP-U tunnel as part of new
header extensions for the bearer. This is covered in solution #6 (clause 6.6).
\- The eNB reports data volumes in primary/secondary cell directly to Charging
Gateway Function (CGF) via creation of a eNB-CDR or to the Charging Data
Function (CDF) if not included in the eNB. CGF or any other billing entity
correlates SGW-CDR, PGW-CDR and eNB-CDR. Not considered since this affects
significantly the charging architecture interfaces.
##### 6.8.1.1.1 Accounting of data volumes
The accounting functionality is common to all possible reporting solutions:
\- Accounting of data volume over primary and secondary cells for both uplink
and downlink shall be supported per EPS bearer.
The eNB initiates accounting of data volumes transmitted over primary and
secondary cells when a new RRC connection is established for the device:
1\. Via RRC-IDLE to RRC-CONNECTED transition (Service Request procedure,
attach/TAU procedures)
2\. Via handover procedure.
The eNB adds entries into the accounting record whenever:
\- A new secondary cell is activated or deactivated
#### 6.8.1.2 Reporting of data volumes
##### 6.8.1.2.1 Reporting of data volume to the SGW via the MME
Given that the S-GW already support triggers for addition of new record based
on UE\'s ULI change and QoS change and is closed based on bearer deactivation,
the simplest trigger to provide this information is when the UE either moves
to RRC-IDLE or during handover procedure. Particularly for offline charging,
this would be enough.
Editor\'s note: The details on the \"closing\" of CDRs by the CN and whether
RAN and S-GW/P-GW need to be coordinated need to be checked with SA WG5.
**1) Reporting of data volume during S1-release**
Figure 6.8.1.2.1-1 shows S1 release procedure (RRC-Connected to RRC-Idle)
including new IE \"Data volume record\".
Figure 6.8.1.2.1-1: S1 Release Procedure with Data Volume record indication
1\. The eNB includes \"Data Volume Record\" information element in S1 UE
Context Release Request message to S-GW.
2\. In case of roaming, the S-GW uses the received information to modify the
SGW-CDR, and includes the same \"Data Volume Record\" IE in the Release Access
Bearers Request message to S-GW.
For the case of Detach (UE initiated or MME/HSS initiated) \"Data Volume
Record\" needs to be included in step 6 (UE Context Release Complete) of
clause 5.3.5 of TS 23.401 [6].
Editor\'s note: It is FFS how data volume counters are transferred to the PGW,
in particular in both non-roaming and roaming cases.
**2) Reporting of data volume during S1-based Handover**
Reporting is provided during S1 handover from source to target eNB during the
handover procedure using \"ENB Status Transfer\" message 10 in Figure
5.5.1.2.2-1 of TS 23.401 [6].
**3) Reporting of data volume during X2-based Handover**
In this case, it is the target eNB which reports the handover to the core
network. In that case:
\- The Source eNB provides the \"Data Volume Record\" to the target eNB during
handover procedure.
\- The Target eNB forwards the \"Data Volume Record\" to MME in Path Switch
Request.
\- MME forwards the \"Data Volume Record\" to source S-GW in Modify Bearer
Request.
### 6.8.2 Impacts on existing nodes and functionality
Editor\'s note: Capture impacts on existing 3GPP nodes and Functional elements
(e.g. UE, MME, eNB, S-GW, P-GW, etc.).
### 6.8.3 Solution Evaluation
Editor\'s note: Use this clause for evaluation at solution level. Evaluation
at key issue level is done in a separate clause.
Editor\'s note: Impacts in the charging architecture will have to be assessed
by SA WG5.
For dynamic policing, and for charging (according to TS 22.115 [7]), it may be
required to provide this information to S-GW and P-GW on a periodic manner.
This solution only works for \"offline charging\" for per bearer charging. If
required, the solution needs to be extended to support this.
This solution requires the UE to go to RRC-IDLE at some point i.e. cannot work
for UEs that are continuously RRC-CONNECTED.
## 6.9 Solution #9: Data Usage Reporting and the reporting mechanisms
This clause contains the solution addressing the key issues 1, 3 and 4 related
to granularity of data usage reporting and the reporting mechanisms.
### 6.9.1 Description
There are three kinds of granularity of data usage reporting.
\- Usage/non-usage of unlicensed radio resource. The data usage reporting
includes an indication of whether unlicensed radio resource is used. It can be
sent from eNodeB(MeNodeB in LAA use case) to P-GW through an eNodeB initiated
SM signalling (i.e. E-RAB Modification Indication). When an existing procedure
occurs, the data usage reporting can also be sent from eNodeB to P-GW through
the existing procedure, for example \"Dedicated Bearer Activation Procedure\".
\- \"Per UE data usage reporting\": it describes the volume of data
transmitted over unlicensed spectrum across a period of time. The data usage
reporting includes the \"data volume\" of data transmitted over unlicensed
spectrum, the unlicensed spectrum access network identity (for example \"WLAN
access\",\" unlicensed LTE access\") and the time stamp.
\- User plane data should be used to transmit data usage reporting from eNodeB
(MeNodeB in LAA use case) to P-GW. The data usage reporting can be
encapsulated in the header of GTP-U packet and sent from eNodeB (MeNodeB in
LAA use case) to P-GW. For unidirectional traffic in downlink direction,
eNodeB can generate the uplink GTP-U packet with data usage reporting and a
\"reporting indication\" encapsulated in the header and send it to P-GW
through the default bearer by itself without involving the UE. The P-GW can
identify the user plane data initiated by eNodeB through the \"reporting
indication\". After the P-GW extract the data usage reporting from the user
plane data with the \"reporting indication\", P-GW can obsolete the user plane
data. If existing uplink packet is used to transmit data usage reporting, the
\"reporting indication\" should not be encapsulated in the header. Note that
the eNodeB can send the data usage reporting to P-GW through user plane data
for both uplink and downlink data. The format of the enhanced GTP-U packet is
depicted in figure 6.9.1-1.
\- The eNodeB can be triggered to send the data usage reporting to P-GW by a
preconfigured interval of time, or a preconfigured threshold volume of data
that provided by PGW.
\- \"Per bearer data usage reporting\": it describes the volume of data
transmitted over unlicensed spectrum of each bearer across a period of time.
Data usage reporting mechanism for this kind of granularity varies for LAA,
LWIP/LWA scenarios as following.
\- For LWIP scenarios, the data usage reporting includes the Bearer Identity
of bearer transmitted over unlicensed spectrum, the unlicensed spectrum access
network identity (for example \"WLAN access\",\"unlicensed LTE access\"). It
can be sent from eNodeB to P-GW through an eNodeB initiated SM signalling
(i.e. E-RAB Modification Indication). When an existing procedure occurs, the
data usage reporting can also be sent from eNodeB to P-GW through the existing
procedure, for example \"Dedicated Bearer Activation Procedure\".
\- For LAA and LWA scenarios, the data usage reporting includes the \"data
volume\" of data transmitted over unlicensed spectrum of each bearer, the
unlicensed spectrum access network identity (for example \"WLAN access\",
\"unlicensed LTE access\"), Bearer Identity of bearer transmitted over
unlicensed spectrum and the time stamp..
> User plane data should be used to transmit data usage reporting from eNodeB
> (MeNodeB in LAA use case) to P-GW. The data usage reporting can be
> encapsulated in the header of GTP-U packet and sent from eNodeB (MeNodeB in
> LAA use case) to P-GW. For unidirectional traffic in downlink direction,
> eNodeB can generate the uplink GTP-U packet with data usage reporting and an
> \"reporting indication\" encapsulated in the header and send it to P-GW
> through the default bearer by itself without involving the UE. The P-GW can
> identify the user plane data initiated by eNodeB through the \"reporting
> indication\". After the P-GW extract the data usage reporting from the user
> plane data with the \"reporting indication\", P-GW can obsolete the user
> plane data. If existing uplink packet is used to transmit data usage
> reporting, the \"reporting indication\" should not be encapsulated in the
> header. Note that the eNodeB can send the data usage reporting to P-GW
> through user plane data for both uplink and downlink data. The format of the
> enhanced GTP-U packet is depicted in figure 6.9.1-1.
>
> The eNodeB can be triggered to send the data usage reporting to P-GW by a
> preconfigured interval of time, or a preconfigured threshold volume of data
> that provided by PGW.
P-GW can identify the use of an unlicensed spectrum and accomplish the
accounting function based on the data usage reporting.
Editor\'s note: How to activate/deactivate data usage reporting by P-GW
element depend on key issue 3.
The figure 6.9.1-1 describes the format of GTP-U packet with data usage
reporting inside it.
Figure 6.9.1-1: Format of GTP-U packet with data usage reporting inside it
The reporting indication is conditional. The reporting indication is only
encapsulated in the header when the GTP-U packet is initiated by the eNodeB
for data usage reporting instead of UE. The data usage reporting is
encapsulated in the header of GTP-U to inform P-GW the \"data volume\" of data
transmitted over unlicensed spectrum, the unlicensed spectrum access network
identity, etc.
### 6.9.2 Impacts on existing nodes and functionality
(M)eNodeB should send the data usage reporting to P-GW. More details are
specified in clause 6.9.1.
P-GW identify the use of an unlicensed spectrum and accomplish the accounting
function based on data usage reporting sent from eNodeB.
MME should relay the data usage reporting to P-GW when SM signalling is used
to send the data usage reporting depicted in clause 6.9.1.
S-GW should relay the data usage reporting to P-GW when SM signalling or user
plane data is used to send the data usage reporting depicted in clause 6.9.1.
### 6.9.3 Solution Evaluation
Editor\'s note: Use this clause for evaluation at solution level. Evaluation
at key issue level is done in a separate clause.
This solution is applicable for offline charging.
This solution is not applicable when SCG bearer is used.
Three kinds of granularity of data usage reporting are proposed in this
solution. Based on the operator\'s decision, specific granularity of data
usage reporting should be used.
## 6.10 Solution#10 for Key Issue #6: Unlicensed spectrum handling in PCC
### 6.10.1 Description
When operator wants to use different charging for traffic on unlicensed and
licensed spectrum when using LAA or LWA/LWIP, the PCRF may send separate
rating groups for unlicensed spectrum access and licensed spectrum access to
the PGW when PCRF identify that the UE is allowed to enforce the Secondary
RAT(LAA, or LWA, or LWIP) by the subscription data. After the PGW receives
data usage reporting from the access network, the PGW reports the usage
information per rating group for unlicensed spectrum and licensed spectrum
based on received data usage reporting from eNB.
Editor\'s note: How the PCRF recieves the subscription data and its impact on
the existing node is FFS.
### 6.10.2 Impacts on existing nodes and functionality
PCRF may send the PCC Rule with separate rating groups for unlicensed spectrum
access and licensed spectrum access when PCRF identify that the UE is allowed
to enforce the Secondary RAT(LAA, or LWA, or LWIP) by the subscription data.
PGW may request the PCC Rule with separate rating groups for unlicensed
spectrum access and licensed spectrum access if the UE is allowed to enforce
the Secondary RAT..
PGW performs accounting and charging based on the data usage reporting
received from the access network and separate rating groups for unlicensed
spectrum and licensed spectrum received from the PCRF.
### 6.10.3 Solution Evaluation
Editor\'s note: Use this clause for evaluation at solution level. Evaluation
at key issue level is done in a separate clause.
This solution is applicable for offline charging.
## 6.11 Solution #11: Secondary RAT identification and Secondary RAT data
usage reporting (merge of solutions 4 and 8)
Editor\'s note: This clause contains a solution to one or more key issues for
unlicensed spectrum offloading system enhancements.
### 6.11.1 Description
Editor\'s note: Include the Key issue # the solution is covering. Describe the
solution. Sub-clause(s) may be added to capture details, procedural flow, etc.
#### 6.11.1.1 Reporting of data volume to the SGW via the MME
Given that the S-GW already support triggers for addition of new record the
simplest trigger to provide this information is when the UE either moves to
RRC-IDLE or during handover procedure. Particularly for offline charging, this
would be enough.
Editor\'s note: The details on the \"closing\" of CDRs by the CN and whether
RAN and S-GW/P-GW need to be coordinated need to be checked with SA WG5.
**[1) Reporting of data volume during S1-release]{.underline}**
If an eNB supporting LWA/LWIP or LAA is configured to collect information
related to use of WLAN or LAA and amount of traffic traversed includes
\"Secondary RAT= Unlicensed spectrum RAT (LWA, LWIP or LAA)\" and \"Data
Volume Record\" information elements in S1 UE Context Release Complete message
to S-GW. The S-GW uses the received information to modify the SGW-CDR.
**[2) Reporting of data volume during S1-based Handover]{.underline}**
Reporting is provided during S1 handover from source to target eNB during the
handover procedure using \"ENB Status Transfer\" message 10 in Figure
5.5.1.2.2-1 of TS 23.401 [6].
If the source eNB supporting LWA/LWIP or LAA is configured to collect
information related to use of Unlicensed spectrum in the form of WLAN or LAA
and amount of traffic traversed includes \"Secondary RAT= Unlicensed spectrum
RAT (LWA, LWIP or LAA)\" and \"Data Volume Record\" information elements in
eNodeB Status Transfer message to the target eNodeB.
**[3) Reporting of data volume during X2-based Handover]{.underline}**
If the Source eNB supporting Unlicensed RAT (LWA/LWIP or LAA) is configured to
collect information related to use of WLAN or LAA and amount of traffic
traversed includes \"Secondary RAT=Unlicensed Spectrum RAT (LWA/LWIP or LAA)\"
and \"Data Volume Record\" to the target eNB during handover procedure.
### 6.11.2 Impacts on existing nodes and functionality
Editor\'s note: Capture impacts on existing 3GPP nodes and Functional elements
(e.g. UE, MME, eNB, S-GW, P-GW, etc.).
\- UE
\- There is no impact on UE.
\- eNB
\- eNB needs to be able to provide an indication whether the capability to use
unlicensed spectrum RAT exist, and an indication whether unlicensed access was
used together with per-UE traffic volume counts associated with the E-RAB are
provided by eNB when requested by MME, and includes the ERAB associated with
unlicensed spectrum used.
\- MME
\- Receive unlicensed/licensed packet count from eNB and provide it to SGW
during eNB change and UE context release.
\- SGW
\- Receive the unlicensed/licensed packet count from an eNB and provide the
input when CDR generated.
### 6.11.3 Solution Evaluation
Editor\'s note: Use this clause for evaluation at solution level. Evaluation
at key issue level is done in a separate clause.
This solution is based on principles adopted for Secondary RAT and data volume
reporting for dual connectivity using 5G NR.
Based on SA WG5 feedback, it may be required to provide data volume counts to
S-GW on a periodic manner. Details for how to do that are FFS.
Based on SA WG5 feedback it may be required to provide data volume counts to
P-GW. Details for how to do that are not covered by this solution.
In its present form this solution only works for \"offline charging\" for per
bearer charging.
In its present form, this solution requires the UE to go to RRC-IDLE at some
point i.e. cannot work for UEs that are continuously RRC-CONNECTED.
## 6.x Solution #x: \
Editor\'s note: This clause contains a solution to one or more key issues for
unlicensed spectrum offloading system enhancements.
### 6.x.1 Description
Editor\'s note: Include the Key issue # the solution is covering. Describe the
solution. Sub-clause(s) may be added to capture details, procedural flow, etc.
### 6.x.2 Impacts on existing nodes and functionality
Editor\'s note: Capture impacts on existing 3GPP nodes and Functional elements
(e.g. UE, MME, eNB, S-GW, P-GW, etc.).
### 6.x.3 Solution Evaluation
Editor\'s note: Use this clause for evaluation at solution level. Evaluation
at key issue level is done in a separate clause.
# 7 Overall Evaluation
Editor\'s note: This clause will provide evaluation of different solutions.
# 8 Conclusions
Editor\'s note: This clause is intended to list conclusions that have been
agreed during the course of the work item activities. This should also capture
the guiding principles and documentation approach for creating CRs to
normative specifications within the responsibility of SA WG2.
It is proposed to adopt solution 11 for key issue #1 (Unlicensed spectrum
identification handling in EPS) and key issue # 4 (Unlicensed spectrum data
usage reporting mechanisms).Based on SA WG5 feedback, it may be required to
provide data volume counts on a periodic manner. Details for how to do that
are FFS.
For key issue#2 it was concluded not to do any normative work.
For key issue #3 it is proposed that when UE context is created in RAN (e.g.
in Attach, TAU, Service Request) MME informs eNB that data counting for use of
unlicensed spectrum RAT (in the form of LWA/LWIP/LAA) is required. This can be
based on Subscription info (Use of unlicensed spectrum RAT as Secondary RAT is
allowed & count, Use of unlicensed spectrum RAT as Secondary RAT is allowed
with no count) and/or local MME policy on a per PLMN basis. If the
subscription status changes while UE is connected, no action taken during the
active period of the UE until the UE attaches again.
It is proposed to adopt solution 7 for key issue #5 (Secondary RAT Restriction
feature handling in EPS).
#