# Foreword
This Technical Report has been produced by the 3rd Generation Partnership
Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# Introduction
In 3GPP, there are multiple northbound API-related discussions e.g., APIs for
Service Capability Exposure Function (SCEF) functionalities defined in 3GPP TS
23.682 [2], API for the interface between MBMS service provider and BM-SC
defined in 3GPP TR 26.981[3]. To avoid duplication and inconsistency of
approach between each individual API activity, 3GPP has considered the
development of a common API framework (CAPIF) that includes common aspects
applicable to any northbound APIs.
The present document identifies a common approach for API development within
3GPP, corresponding solutions for the CAPIF for 3GPP northbound APIs, and
recommendations for normative work.
# 1 Scope
The present document is a technical report which identifies the architecture
aspects necessary for the development of a CAPIF for 3GPP northbound APIs, and
corresponding architectural solutions. The aspects of the study include
identifying architecture requirements for the CAPIF (e.g. registration,
discovery, identity management) that are applicable to any service APIs when
used by northbound entities, as well as any interactions between the CAPIF and
the service APIs themselves.
The study takes into consideration the existing work within 3GPP related to
APIs as well as API frameworks defined outside 3GPP. The recommendations from
the study include architecture solutions that may be considered for normative
work, based on the gap analysis of the identified architecture requirements
and the existing solutions.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 23.682: \"Architecture enhancements to facilitate communications\
with packet data networks and applications\".
[3] 3GPP TR 26.981: \"MBMS Extensions for Provisioning and Content
Ingestion\".
[4] 3GPP TS 29.122: \"T8 reference point for Northbound APIs\".
[5] 3GPP TS 29.155: \"Traffic steering control; Representational state
transfer (REST) over St reference point\".
[6] 3GPP TS 29.198-1: \"Open Service Access (OSA) Application Programming
Interface (API) Part 1: Overview\".
[7] 3GPP TS 29.201: \"Representational State Transfer (REST) reference point
between Application Function (AF) and Protocol Converter (PC)\".
[8] 3GPP TS 32.240: \"Telecommunication management; Charging management;
Charging architecture and principles\".
[9] ETSI GS MEC 009 (V1.1.1): \"Mobile Edge Computing (MEC); General
Principles for Mobile Edge Service APIs\".
[10] ETSI GS MEC 003 (V1.1.1): \"Mobile Edge Computing (MEC); Framework and
Reference Architecture\".
[11] ETSI GS MEC 011 (V1.1.1): \"Mobile Edge Computing (MEC); Mobile Edge
Platform Application Enablement\".
[12] IETF RFC 6749: \"The OAuth 2.0 Authorization Framework\".
[13] OMA-AD-NGSI-V1_0-20120529-A: \"Next Generation Service Interfaces
Architecture\".
[14] OMA-ER_Autho4API-V1_0-20141209-A: \"Authorization Framework for Network
APIs \".
[15] OMA-TS-NGSI_Registration_and_Discovery-V1_0-20120529-A: \"NGSI
Registration and Discovery\".
[16] OMA-TS-REST_NetAPI_Common-V1_0-20180116-A: \"Common definitions for
RESTful Network APIs\".
[17] OMA-WP-Guidelines_for_RESTful_Network_APIs-20140227-A: \"Guidelines for
RESTful Network APIs\".
# 3 Definitions, symbols and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
3GPP TR 21.905 [1] and the following apply. A term defined in the present
document takes precedence over the definition of the same term, if any, in
3GPP TR 21.905 [1].
**API:** The means by which an API invoker can access the service.
**API invoker:** The entity which invokes the CAPIF or service APIs.
**API invoker profile:** The set of information associated to an API invoker
that allows that API invoker to utilize CAPIF APIs and Service APIs.
**API exposing function:** The entity which provides the service communication
entry point for the service APIs.
**Common API framework:** A framework comprising common API aspects that are
required to support service APIs.
**Northbound API:** A service API exposed to higher-layer API invokers.
**Onboarding:** One time registration process that enables the API invoker to
subsequently access the CAPIF and the service APIs.
**Service API:** The interface through which a component of the system exposes
its services to API invokers by abstracting the services from the underlying
mechanisms.
For the purposes of the present document, the following terms and definitions
given in 3GPP TS 29.198-1 [6] apply:
**Service Capability Server (SCS)**
For the purposes of the present document, the following terms and definitions
given in 3GPP TS 32.240 [8] apply:
**Offline charging**
**Online charging**
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in 3GPP TR
21.905 [1] and the following apply.\ An abbreviation defined in the present
document takes precedence over the definition of the same abbreviation, if
any, in 3GPP TR 21.905 [1].
ACL Access Control List
AEF API Exposing Function
AF Application Function
API Application Program Interface
AS Application Server
BM-SC Broadcast Multicast Service Centre
CAPIF Common API Framework
CRUD Create, Read, Update, Delete
DASH Dynamic Adaptive Streaming over HTTP
DDoS Distributed Denial of Service
DNS Domain Name Servers
ETSI European Telecommunications Standards Institute
GS Group Specification
HATEOAS Hypermedia As The Engine Of Application State
HPLMN Home PLMN
HTTP Hyper Text Transfer Protocol
HTTPS Hypertext Transfer Protocol Secure
IDL Interface Definition Language
IETF Internet Engineering Task Force
IoT Internet of Things
IP Internet Protocol
IP-CAN IP Connectivity Access Network
ISG Industry Specification Group
JSON JavaScript Object Notation
MBMS Multimedia Broadcast and Multicast Service
MEC Multi-access Edge Computing
MMS Multimedia Messaging Service
MTC Machine Type Communication
NAPS Northbound API for SCEF -- SCS/AS Interworking
NDS/IP NDS for IP based protocols
NFV Network Functions Virtualization
NGSI Next Generation Service Interfaces
OAI Open API Initiative
OAuth Open Authorization
OMA Open Mobile Alliance
> OWSER OMA Web Services
PC Protocol Converter
PCC Policy and Charging Control
PCRF Policy control and Charging Rules Function
PLMN Public Land Mobile Network
REST REpresentational State Transfer
RPC Remote Procedure Call
RTP Real Time Protocol
SCEF Service Capability Exposure Function
SCS Service Capability Server
SMS Short Message Service
SOAP Simple Object Access Protocol
TCP Transmission Control Protocol
TLS Transport Layer Security
TSSF Traffic Steering Support Function
> UDDI Universal Description, Discovery and Integration
UE User Equipment
URI Uniform Resource Identifier
URL Uniform Resource Locator
VOD Video On Demand
VPLMN Visiting PLMN
WSDL Web Services Description Language
XML eXtensible Markup Language
# 4 Analysis of external API frameworks
## 4.1 Introduction
The subsequent sub-clauses contain the results of an analysis of external API
frameworks against an initial set of CAPIF functionality that was derived from
3GPP TS 23.682 [2]. This analysis has been performed as a starting point of
the CAPIF study to get a better understanding of existing functionality.
## 4.2 OMA API framework
### 4.2.1 Description
A detailed description of the OMA API framework is provided in annex B.
### 4.2.2 Detailed analysis
This clause provides the results of a high-level gap analysis of the OMA
Network APIs needed to support the IoT networks, based on OMA inputs. Table
4.2.2-1 provides the results of this analysis and lists the gaps identified
that may be applicable to the CAPIF.
Table 4.2.2-1: OMA API framework analysis results
+----------------------+----------------------+----------------------+ | Functionality | OMA Support | OMA specification | | | (Av | | | | ailable/Partial/Gap) | | +----------------------+----------------------+----------------------+ | **Authentication and | Partial | OMA-ER_Autho4 | | Authorization** | | [14] | +----------------------+----------------------+----------------------+ | Identification of | Partial | OMA-ER_Autho4 | | the API consumer | | [14] | +----------------------+----------------------+----------------------+ | Profile Management | Partial | OMA-ER_Autho4 | | | | [14] | +----------------------+----------------------+----------------------+ | ACL management | Partial | OMA-ER_Autho4 | | | | [14] | +----------------------+----------------------+----------------------+ | **Ability for the | Partial (see note) | O | | external entities to | | MA-TS-NGSI_Registra | | discover the exposed | | tion_and_Discovery | | service | | [15] | | capabilities** | | | +----------------------+----------------------+----------------------+ | **Policy | | | | Enforcement** | | | +----------------------+----------------------+----------------------+ | Infrastructure | Gap | | | policy / network | | | | protection | | | +----------------------+----------------------+----------------------+ | Business policy e.g. | Gap | | | number portability | | | +----------------------+----------------------+----------------------+ | Application Layer | Gap | | | Policy e.g. | | | | throttling | | | +----------------------+----------------------+----------------------+ | **Assurance** | | | +----------------------+----------------------+----------------------+ | Integration with O&M | Gap | | | Platforms | | | +----------------------+----------------------+----------------------+ | Usage of APIs | Gap | | +----------------------+----------------------+----------------------+ | **Accounting for | Gap | | | inter-operator | | | | settlements** | | | +----------------------+----------------------+----------------------+ | **Access: issues | Gap | | | related to external | | | | interconnection and | | | | point of contact** | | | +----------------------+----------------------+----------------------+ | **Abstraction: hides | Available | (individual OMA API | | the underlying 3GPP | | specifications) | | network interfaces | | | | and protocols to | | | | allow full network | | | | integration** | | | +----------------------+----------------------+----------------------+ | > NOTE: | | | | > O | | | | MA-TS-NGSI_Registra | | | | tion_and_Discovery | | | | > [15] is | | | | > applicable to a | | | | > specific type of | | | | > web services | | | | > (OWSER using UDDI | | | | > and WSDL). | | | +----------------------+----------------------+----------------------+
4.3 ETSI MEC API framework
4.3.1 Description
A detailed description of the ETSI MEC API framework is provided in annex C.
4.3.2 Detailed analysis
This clause provides the results of a high-level gap analysis of the ETSI MEC
Application enablement (ETSI GS MEC011 [11]) and API principles (ETSI GS
MEC009 [9]) specifications. Table 4.3.2-1 provides the results of this
analysis and lists the gaps identified that may be applicable to the CAPIF.
Table 4.3.2-1: ETSI MEC API framework analysis results
* * *
Functionality ETSI MEC Support (Available/Partial/Gap) ETSI MEC specification
**Authentication and authorization** Partial ETSI GS MEC009 [9] Identification
of the API consumer Partial ETSI GS MEC009 [9] Profile Management Partial ETSI
GS MEC009 [9] ACL management Partial ETSI GS MEC009 [9] **Ability for the
external entities to discover the exposed service capabilities** Available
ETSI GS MEC011 [11] **Policy Enforcement**  
Infrastructure policy / network protection Gap  
Business policy e.g. number portability Gap  
Application Layer Policy e.g. throttling Gap  
**Assurance**  
Integration with O&M Platforms Gap  
Usage of APIs Gap  
**Accounting for inter-operator settlements** Gap  
**Access: issues related to external interconnection and point of contact**
Gap  
**Abstraction: hides the underlying 3GPP network interfaces and protocols to
allow full network integration** Available (individual MEC API specifications)
* * *
# 5 Key issues
## 5.1 Publish and discover service API information
There are several service APIs provided by the service provider. API invokers
require service API information to access these service APIs. API invokers
need to acquire the service API information from the service provider which
includes information such as IP address, port number with details about
interfaces, protocols, versions numbers, and environment details to enable
access to the service API. Further study is required on the mechanism of
providing service API information to the API invokers including publishing of
service API information by the service providers and discovering of the
service API information by the API invokers.
## 5.2 Topology hiding of the service
The API invokers may access the service APIs in two scenarios:
a) Inside the same trust domain as the service API; and
b) Outside the trust domain of the service API.
Scenario (a) may not require any topology hiding of the service from the API
invoker. Scenario (b) requires that the service topology is hidden from the
API invoker accessing the service APIs outside the trust domain of the service
API to avoid any network security issue. Further study is required on the
mechanism to hide topology of the service from the API invokers accessing the
service API outside the trust domain of the service API.
## 5.3 API invoker authentication to access service APIs
A service API may have its own mechanism to authenticate the API invokers. It
is difficult to integrate API invokers to different service APIs if they
follow their own authentication mechanisms. Further study is required to
provide a common API invoker authentication mechanism to access service APIs.
## 5.4 API invoker authorization to access service APIs
Applications require authorization to access the service APIs. Unauthorized
access to service APIs is undesirable from the operator\'s view. During the
service communication, the service verifies the authorization of the
application accessing the service API. Further study is required to provide a
common authorization mechanisms to access service APIs.
## 5.5 Charging on invocation of service APIs
CAPIF cannot be considered complete without having appropriate mechanisms to
support charging related functions. This key issue will look into the aspects
of collection of charging information during the invocation of service APIs,
and architecture requirements to address them as part of the CAPIF.
## 5.6 Lifecycle management of service APIs
The lifecycle management is a key functionality of the CAPIF, which achieves
the overall management of service APIs. This key issue identifies aspects
related to lifecycle management e.g. starting and stopping of service API,
performance reporting parameters, etc.
## 5.7 Monitoring service API invocations
To monitor the health of service API, capture system load information and
prevent potential attacks, service API invocation monitoring functionalities
are to be provided by the CAPIF.
## 5.8 Logging API invoker onboarding and service API invocations
The service APIs are typically invoked by various consumers. Onboarding is a
distinct event that occurs prior to the invocation of the service APIs. It is
necessary that the service API provider is able to log the API invoker
onboarding and the service API invocation events for the purposes of tracing
back and analysing statistics. Therefore the API invoker onboarding and the
service API invocation logging and storage functionalities are to be included
in CAPIF.
The API invoker onboarding and the stored service API invocation log may
contain private and sensitive information. Such information needs to be
handled carefully to respect potential privacy rules.
## 5.9 Auditing service API invocations
While the service API provider is able to authorize consumers with API
invocation rights, it is necessary for the service providers to detect any
abuse of service API invocations. To address this need, auditing capabilities
(e.g. querying the service API invocations) will help the service API
providers to identify illegal service API invocations.
## 5.10 Onboarding API invoker to CAPIF
API invoker has to be a recognized user of the CAPIF. Prior to authentication
to access service APIs, the API invoker has to complete one time onboarding
process to the CAPIF. Completion of onboarding process may need explicit grant
by the administrator. Some of the onboarding data may be allowed to be updated
by the API invoker.
## 5.11 CAPIF authentication towards API invokers
While we know that API invoker authentication is required to access service
APIs, it may also be necessary for the CAPIF to authenticate to the API
invoker accessing service APIs before the actual API traffic is sent over the
connection. Further study is required to provide mutual authentication between
CAPIF and the API invoker accessing service APIs.
## 5.12 Service API access control
Service API access control is required to regulate the ability of the API
invoker to use the service API. Operators may configure some access control
policies (e.g. invocations/sec, max invocations limit). These access control
policies are further required to be applied to service communications between
the API invoker and the service API.
## 5.13 Secure API communication
Securing of the communication between API invoker and CAPIF is necessary for
ensuring data is accessed only by the authorized entities. Further the
communication has to be trustworthy by protecting the data from intentional or
accidental changes i.e. to prevent unauthorized users from making
modifications to the data.
## 5.14 Policy configuration
The CAPIF need to support an API provider (or CAPIF administrator) to
configure policies. Enforcement of such policies is required to exert control
over accessing/using protected network resources from the API invokers.
Such policies would include the following:
\- Infrastructural Policy: policies to protect platforms and network. An
example of which maybe ensuring that a service node such as BM-SC is not
overloaded.
\- Business Policy: policies related to the specific functionalities exposed.
An example may be number portability, service routing, subscriber consent etc.
\- Application Layer Policy: policies that are primarily focused on message
payload or throughput provided by an API invoker. An example may be
throttling.
## 5.15 API protocol stack model
In order for the CAPIF to be common across all present and future API invokers
for various usages and purposes, a minimum common protocol stack model should
be defined so that all API invokers need to support only one and the same
protocol stack model. This likely includes aspects such as protocols for
transport of the API content itself. In other words, for example, multiple
different API implementations requiring API invokers to support different
protocols (HTTP in one implementation, and something else in another
implementation) does not make sense from the spirit of the framework being
common, thus such situation should be avoided.
On the other hand, API message definition, representation, and encoding (e.g.
XML, JSON) may be outside of this minimum protocol model due to several
reasons: 1) it typically falls under stage 3 specification domain, 2)
suitability for API representation and encoding may be influenced by different
API invoker needs, and 3) we should not exclude the possibility of any new
protocol that may emerge in the future.
## 5.16 API security protocol
Similar to API protocol stack model key issue discussed in subclause 5.15,
CAPIF should also include commonality in the security protocol for all API
implementations. In other words, for example, multiple different API
implementations requiring API invokers to support different security protocols
(HTTPS in one implementation, and something else in another implementation)
does not make sense from the spirit of the framework being common, thus such
situation should be avoided.
## 5.17 CAPIF support for service APIs from multiple providers
Multiple API providers can host and operate CAPIF in a completely
uncoordinated fashion. In another scenario, multiple API providers may need
coordination amongst them. An operator A may establish trust relationships
with another operator B or 3rd party service providers. If the operator A
hosts CAPIF, it should be possible to offer operator B\'s or 3rd party service
providers\' service APIs via the operator A hosted CAPIF. Further study is
required on the following aspects:
\- To allow service APIs from multiple providers having trust relationship to
be published by a single CAPIF.
\- Common authorization mechanism based on trust relationships between the
multiple providers.
\- Use of the common functions like access control, charging, monitoring,
policy for the service APIs from multiple providers e.g., maintaining a
logical separation of the relevant data between multiple API providers.
\- To allow service API exposing capability to be present in common or in both
(respective) API providers.
# 6 Architectural requirements
## 6.1 General requirements
[AR-6.1-a] The CAPIF shall support mechanisms (e.g. publish service APIs,
authorization, logging, charging) to support service APIs from the 3^rd^ party
API providers.
[AR-6.1-b] The CAPIF shall enable API invoker(s) to discover and communicate
with service APIs from the 3^rd^ party API providers.
[AR-6.1-c] Reference points internal to CAPIF may be provided as APIs.
## 6.2 Service API publish and discover requirements
### 6.2.1 General
This subclause specifies the service API publish and discover related
requirements.
### 6.2.2 Requirements
[AR-6.2.2-a] The CAPIF shall provide a mechanism to publish the service API
information to be used by the API invokers.
NOTE: The published information includes items such as service name, service
type, communication type, description, interface details (e.g. IP address,
port number, URI), protocols, version numbers, and data format.
[AR-6.2.2-b] The CAPIF shall provide a mechanism for the API invokers to
discover the published service API information as specified in [AR-6.2.2-a]
according to the API invokers\' interest.
## 6.3 Security requirements
### 6.3.1 General
This subclause specifies the security related requirements for API invokers
accessing the service APIs.
### 6.3.2 Requirements
[AR-6.3.2-a] The CAPIF shall provide mechanisms to hide the topology of the
service from the API invokers accessing the service APIs from outside the
trust domain of the service APIs.
[AR-6.3.2-b] The CAPIF shall provide mechanisms to authenticate API invokers
to access the service APIs.
[AR-6.3.2-c] The CAPIF shall provide mechanisms to authenticate API invokers
upon the service API invocation.
[AR-6.3.2-d] The CAPIF shall provide mechanisms to authorize API invokers to
access the service APIs.
[AR-6.3.2-e] The CAPIF shall provide mechanisms to validate authorization of
the API invokers upon the service API invocation.
[AR-6.3.2-f] The CAPIF shall provide mechanisms for mutual authentication
between the CAPIF and the API invoker accessing service APIs.
[AR-6.3.2-g] The CAPIF shall provide mechanisms to control the service API
access for every API invocation.
[AR-6.3.2-h] The communication between the CAPIF and the API invoker shall be
confidentiality protected.
[AR-6.3.2-i] The communication between the CAPIF and the API invoker shall be
integrity protected.
[AR-6.3.2-j] The CAPIF shall provide authorization mechanism for service APIs
from the 3^rd^ party API providers.
[AR-6.3.2-k] The CAPIF shall provide data confidentiality (across API
providers) for data (e.g. logging, charging) related to service APIs from
multiple API providers.
## 6.4 Charging requirements
### 6.4.1 General
This subclause specifies the charging related requirements for the usage or
invocation of service APIs.
### 6.4.2 Requirements
[AR-6.4.2-a] The CAPIF shall support online and offline charging for service
APIs.
NOTE: Details on charging will be specified by SA5.
[AR-6.4.2-b] The CAPIF shall provide mechanisms to record the invocation count
of the service APIs for charging purpose.
[AR-6.4.2-c] The CAPIF shall provide mechanisms to record identification of
the API invoker and the associated service API invocation for charging
purpose.
[AR-6.4.2-d] The CAPIF shall provide mechanisms to record timestamp of the
service API invocation.
[AR-6.4.2-e] The CAPIF shall provide mechanisms to record the service API
related information, e.g. API location.
## 6.5 Lifecycle management requirements
### 6.5.1 General
This subclause specifies the lifecycle management aspects such as monitoring
the running status of service APIs and related operations.
### 6.5.2 Requirements
[AR-6.5.2-a] The CAPIF shall provide mechanisms to monitor the lifecycle of
service APIs, e.g. starting and stopping of the service APIs.
[AR-6.5.2-b] The CAPIF shall provide mechanisms to monitor and report the
performance status about the service APIs.
[AR-6.5.2-c] The CAPIF shall provide mechanisms to monitor and report the
fault information about the service APIs.
[AR-6.5.2-d] The CAPIF shall provide mechanisms to record change events of
service APIs, e.g. service APIs relocation.
## 6.6 Monitoring service API invocation requirements
### 6.6.1 General
The CAPIF includes monitoring functions. This enables API provider to monitor
service API invocations in near real-time, to determine critical aspects such
as system load, API usage information, uncover potential overload and attacks
(e.g. DDoS) conditions.
### 6.6.2 Requirements
[AR-6.6.2-a] The CAPIF shall provide mechanisms to capture service API
invocation events and make them available to service API provider in near
real-time (second level).
[AR-6.6.2-b] The CAPIF shall provide mechanisms to analyse system load and
resource usage information, detect overload conditions and existence of threat
conditions.
[AR-6.6.2-c] The CAPIF shall provide mechanisms to allow service API provider
to apply monitoring filters based on criteria such as invoker\'s ID and IP
address, service API name and version, input parameters, and invocation
result.
## 6.7 Logging service API invocation requirements
### 6.7.1 General
The CAPIF supports the ability to log and store service API invocations. This
enables API providers to record service API invocation events for the purpose
of tracing back and statistical analysis.
### 6.7.2 Requirements
[AR-6.7.2-a] The CAPIF shall provide mechanisms for service API invocation
event logging and storage functionality. For each service API invocation
event, the service API invocation log shall at least include: invoker\'s ID
and IP address, service API name and version, input parameters, invocation
result, and time stamp information.
[AR-6.7.2-b] The service API invocation log shall be stored for a configurable
time period, according to the service API provider\'s policy.
[AR-6.7.2-c] The service API invocation log shall be stored securely, and
shall only be accessed by authorized administrators of the service API
provider.
NOTE: There is no relationship between logging and charging.
## 6.8 Auditing service API invocation requirements
### 6.8.1 General
The CAPIF includes auditing capabilities. This enables the service API
provider to identify illegal service API invocations e.g. by querying the
service API invocation log.
### 6.8.2 Requirements
[AR-6.8.2-a] The CAPIF shall provide mechanisms to audit service API
invocation, which enables the service API provider to trace back a specific
API invocation, e.g. by querying the service API invocation log.
## 6.9 Onboarding API invoker requirements
### 6.9.1 General
This subclause specifies the requirements related to onboarding API invoker to
the CAPIF.
### 6.9.2 Requirements
[AR-6.9.2-a] The CAPIF shall provide capability to onboard the new API
invokers.
[AR-6.9.2-b] The CAPIF shall support granting an API invoker\'s request to
onboard with the CAPIF administrator.
## 6.10 Policy configuration requirements
### 6.10.1 General
This subclause specifies the policy configuration related requirements.
### 6.10.2 Requirements
[AR-6.10.2-a] The CAPIF shall support configuring policies such as related to
the protection of platforms and network, specific functionalities exposed,
message payload or throughput.
## 6.11 Protocol design requirements
### 6.11.1 General
In order for the CAPIF to be common across all present and future API invokers
for various usages and purposes, a minimum common protocol stack model should
be defined so that all API invokers that use the common-framework-based API
need to support only one and the same set of protocols, e.g. security layer
protocol(s).
### 6.11.2 Requirements
[AR-6.11.2-a] The CAPIF shall define a minimum common protocol stack model
common for all API implementations to be based on.
[AR-6.11.2-b] The CAPIF shall define a common protocol security model for all
API implementations to provide confidentiality and integrity protection.
NOTE: The protocol definition for API framework is within the stage 3 scope.
HTTP/TLS (HTTPS) is one example that has been specified in other API work done
by other 3GPP WGs, such as 3GPP TS 29.155 [5] and 3GPP TS 29.201 [7].
## 6.12 Logging API invoker onboarding requirements
### 6.12.1 General
The ability to log and store API invoker onboarding shall be supported by the
CAPIF. This enables API providers to record API invoker onboarding events for
the purpose of tracing back and statistical anlaysis.
### 6.12.2 Requirements
[AR-6.12.2-a] The CAPIF shall provide mechanisms for API invoker onboarding
event logging and storage functionality. For each API invoker onboarding
event, the API invoker onboarding log shall at least include: invoker\'s ID,
onboarding result, and time stamp information.
[AR-6.12.2-b] The API invoker onboarding log shall be stored according to the
service API provider\'s policy.
[AR-6.12.2-c] The API invoker onboarding log shall be stored securely, and
shall only be accessed by authorized administrators of the service API
provider.
## 6.13 CAPIF interaction logging requirements
### 6.13.1 General
The ability to log and store the API invoker interactions with the CAPIF (e.g.
authentication, authorization, discover service APIs) shall be supported by
the CAPIF. This enables API providers to record API invoker interaction events
for the purpose of tracing back and statistical anlaysis.
### 6.13.2 Requirements
[AR-6.13.2-a] The CAPIF shall provide mechanisms for the event logging of API
invoker interactions with the CAPIF (e.g. authentication, authorization,
discover service APIs). For each API invoker interaction with the CAPIF, the
log may include items such as invoker\'s ID and IP address, API name and
version, input parameters, invocation result, and time stamp information.
[AR-6.13.2-b] The API invoker interactions log shall be stored for a
configurable time period.
[AR-6.13.2-c] The API invoker interactions log shall be stored securely,
accessed only by authorized administrators.
# 7 Solutions
## 7.1 High level architecture
### 7.1.1 Solution 1 -- High level functional architecture for the CAPIF
#### 7.1.1.1 Solution description
##### 7.1.1.1.1 General
This subclause describes the solution for the high level functional
architecture for the CAPIF.
##### 7.1.1.1.2 Architectural Model
Figure 7.1.1.1.2-1 shows the architectural model for the CAPIF which allows
API invokers inside the PLMN trust domain and outside the PLMN trust domain to
access the service APIs.
Figure 7.1.1.1.2-1: High level functional architecture for the CAPIF
The CAPIF consists of an API provider functions and the CAPIF core functions.
The CAPIF core functions support the API invokers to access the service APIs.
The CAPIF core functions consists of the following capabilities:
> \- Authenticating the API invoker based on the identity and credentials of
> the API invoker;
>
> \- Providing authorization for the API invoker prior to accessing the
> service API;
>
> \- Publishing, storing and discovering service APIs information using an API
> registry;
>
> \- Controlling the service API access based on PLMN operator configured
> policies;
>
> \- Storing the logs for the service API invocations and providing the
> service API invocation logs to authorized entities;
>
> \- Charging based on the logs of the service API invocations;
>
> \- Monitoring the service API invocations;
>
> \- Onboarding a new API invoker;
>
> \- Storing API provider policy configurations related to CAPIF and service
> APIs; and
>
> \- Auditing support based on log analysis (e.g. detecting abuse).
The API provider functions consists of:
> \- API exposing function;
>
> \- API publishing function; and
>
> \- API management function.
The API exposing function is the provider of the service APIs and is also the
service communication entry point of the service API to the API invokers. The
API exposing function consists of the following capabilities:
\- Authentication is responsible to validate the API invoker based on the
identity and credentials provided by the CAPIF core functions;
\- Authorization is responsible to validate the authorization provided by the
CAPIF core functions; and
\- Logging is responsible to send service API invocation logs to the CAPIF
core functions.
The API publishing function is responsible for the capability to publish the
service API information of the API provider to the CAPIF core functions.
The API management function enables the API provider to perform administration
of the service APIs. The API management function consists of the following
capabilities:
\- Auditing the service API invocation logs received from the CAPIF core
functions;
\- Monitoring the events triggered by the CAPIF core functions;
\- Configuring the API provider policies to the CAPIF core functions;
\- Governing the lifecycle management of the service APIs; and
\- Onboarding the new API invokers.
The CAPIF is hosted within the PLMN operator network. The API invoker is
typically provided by a 3^rd^ party application provider who has some PLMN
service agreement with PLMN operator. The API invoker may reside within the
same trust domain as the PLMN operator network.
The API invoker within the PLMN trust domain interacts with the CAPIF via
CAPIF-1 and CAPIF-2. The API invoker from outside the PLMN trust domain
interacts with the CAPIF via CAPIF-1e and CAPIF-2e. The API provider functions
within the PLMN trust domain interacts with the CAPIF core functions via
CAPIF-3, CAPIF-4 and CAPIF-5.
NOTE: The security aspects of CAPIF-1, CAPIF-1e, CAPIF-2 and CAPIF-2e are
under SA3 responsibility and out of scope of the present document.
##### 7.1.1.1.3 Reference points
The reference points CAPIF-1 and CAPIF-1e support the functions for the API
invoker to discover service APIs, to authenticate and to get authorization.
The reference points CAPIF-2 and CAPIF-2e support the functions for the API
invoker to communicate with the service APIs. There can be one or several
CAPIF-2 or CAPIF-2e instances between the API invoker and the API exposing
function per CAPIF
NOTE: The aspects related to the specific service API in reference points
CAPIF-2 and CAPIF-2e is out of scope of the present document.
The reference point CAPIF-3 supports the interaction between the CAPIF core
functions and the API exposing function of the API provider functions for
access control, policy control, etc.
The reference point CAPIF-4 supports the interaction between API publishing
function of API provider functions and the CAPIF core functions for publishing
the service APIs.
The reference point CAPIF-5 supports the interaction between the API
management function of API provider functions and the CAPIF core functions:
1\. to provide the service API invocation logs to the API management function;
2\. enabling the API management function to monitor the events triggered due
to the service APIs invocations;
3\. to support onboarding new API invokers by provisioning the API invoker
information at the CAPIF core functions, requesting explicit grant of new API
invokers onboarding and confirming onboarding success;
4\. enabling the API management function to configure policies at the CAPIF
core functions e.g. service API invocation throttling, blocking API invocation
for certain duration; and
5\. enabling the API provider to govern the lifecycle status of service APIs
e.g. pilot or live, trace and access API versioning, control visibility of
service API (start or stop of service API).
##### 7.1.1.1.4 Deployment options
###### 7.1.1.1.4.1 General
The CAPIF deployments in centralized and distributed models are described in
subclause 7.1.1.1.4.2 and subclause 7.1.1.1.4.3. The CAPIF deployment models
shown are not exhaustive and do not provide the representation for the
following API provider functions:
\- API publishing function; and
\- API management function.
The above API provider functions can be further deployed in centralized and
distributed manner as determined by the PLMN operator.
###### 7.1.1.1.4.2 Option 1 -- Centralized deployment
The CAPIF can be deployed centrally as illustrated in the figure
7.1.1.1.4.2-1.
Figure 7.1.1.1.4.2-1: Centralized deployment of CAPIF
In centralized deployment, the CAPIF core functions and the API exposing
function are co-located. The API invoker can interact independently with the
CAPIF core functions and the API exposing function including the service APIs.
The CAPIF appears as a gateway for all API invoker interactions. The API
invoker obtains the service API information and its entry point details from
the CAPIF core functions via CAPIF-1. The service communication point of entry
for the service API is the API exposing function which also applies any access
control or policy control to the internal interactions between the API invoker
and the service API in coordination with the CAPIF core functions.
NOTE: The API invoker can be outside the PLMN trust domain and will access the
CAPIF via CAPIF-1e and CAPIF-2e instead of CAPIF-1 and CAPIF-2.
###### 7.1.1.1.4.3 Option 2 -- Distributed deployment
The CAPIF can be deployed in a distributed manner illustrated in the figure
7.1.1.1.4.3-1.
Figure 7.1.1.1.4.3-1: Distributed deployment of the CAPIF
The API invoker can interact independently with the CAPIF core functions and
the API exposing function including the service APIs. In this deployment, API
exposing function appears as an agent for all service API invocations from the
API invoker. The API invoker obtains the service API information and its entry
point details from the CAPIF core functions via CAPIF-1 interface. The first
point of entry for the service API is the API exposing function during API
invocation. The API exposing function acts as agent for service API applying
any access control or policy control to the interactions between the API
invoker and the service API in coordination with the CAPIF core functions via
CAPIF-3 interface.
The CAPIF can be deployed by splitting the functionality of the API exposing
function among multiple API exposing function entities, of which one acts as
the entry point. The CAPIF deployment with cascading API exposing functions is
as illustrated in the figure 7.1.1.1.4.3-2.
Figure 7.1.1.1.4.3-2: Distributed deployment of the CAPIF with cascading API
exposing functions
In this deployment option, the API exposing function can have several
instances like AEF-1, AEF-2 and AEF-3 which can be assigned with different
roles. The roles for each API exposing function are decided by the operator.
In this illustration, the API exposing functions AEF-2 and AEF-3 provide
service APIs for service X and service Y respectively. The API exposing
function AEF-1 provides the service communication entry point to the service
APIs for service X APIs and service Y APIs. The API exposing function AEF-1
for instance can hide the topology of service X APIs and service Y APIs from
the API invoker. The API exposing function AEF-1 also applies any access
control or policy control to the interactions between the API invoker and
service X APIs and between the API invoker and service Y APIs, in coordination
with the CAPIF core functions using CAPIF-3.
The CAPIF core functions and the API exposing function AEF-1 can be co-
located. The API invoker interacts with the CAPIF core functions via CAPIF-1.
The API invoker interacts with service (X&Y) APIs on API exposing function
AEF-1 via CAPIF-2. The API exposing function AEF-1 forwards the invocation of
the service X API or service Y API from the API invoker to the API exposing
functions AEF-2 or AEF-3 respectively via CAPIF-2. The API messages are
forwarded via CAPIF-2 in the interactions between API exposing functions. The
API invoker cannot directly interact with service X APIs and service Y APIs
provided by API exposing functions AEF-2 and AEF-3 respectively.
Different splits of responsibility are possible. In another example
illustrated in figure 7.1.1.1.4.3-3, the API exposing function AEF-1 could
provide topology hiding for API exposing functions AEF-2 and AEF-3, plus
access control for AEF-3. The API exposing function AEF-2 would provide its
own access control, interacting with the CAPIF core functions via CAPIF-3.
Figure 7.1.1.1.4.3-3: Another example of distributed deployment of the CAPIF
with cascading API exposing functions
NOTE: The API invoker can be outside the PLMN trust domain and will access the
CAPIF via CAPIF-1e and CAPIF-2e instead of CAPIF-1 and CAPIF-2.
#### 7.1.1.2 Solution evaluation
This is the only solution which provides a general architecture that enables
the API invokers to access service APIs from the API providers.
Further analysis from a security perspective is required by SA3 for all
reference points of CAPIF.
The deployment models for CAPIF architecture specified in subclause 7.1.1.1.4
are basic examples and not necessarily the only ways in which CAPIF entities
can be deployed.
This solution will be considered for the Release 15 normative work.
It is required to be determined in the normative phase whether to combine
functionalities for API management function and API publishing function and
their corresponding reference points to the CAPIF core functions.
### 7.1.2 Solution 2 -- CAPIF architecture for service APIs from 3^rd^ party
service provider
#### 7.1.2.1 Solution description
##### 7.1.2.1.1 General
There are several models for providing CAPIF support for 3^rd^ party API
provider(s). In all the models, the 3^rd^ party API provider must establish a
business relationship with the PLMN operator. The models described corresponds
to the key issue on supporting service APIs from multiple API providers as
described in subclause 5.17.
##### 7.1.2.1.2 Architectural Model
Figure 7.1.2.1.2-1 shows the architectural model for the CAPIF that allows the
3^rd^ party API providers to utilize the CAPIF core functions provided by the
PLMN operator.
Figure 7.1.2.1.2-1: CAPIF architecture for service APIs from 3^rd^ party
service provider
The API provider functions exist in both PLMN and 3^rd^ party API provider
domains, performing functionality for their respective service APIs. The
functional entities of the CAPIF hosted by PLMN operator and the external API
provider are specified in the high level functional architecture for the CAPIF
specified in the subclause 7.1.1.1. The 3^rd^ party API provider which resides
outside the PLMN trust domain has business arrangement with the PLMN operator.
The CAPIF core functions existing at the PLMN domain supports functionality
for both the PLMN and the 3^rd^ party API provider, however mainting the
logical separation between the two domains. The API invoker within the trust
domain connects to the CAPIF via CAPIF-1 and CAPIF-2. The API invoker from
outside the trust domain connects to the CAPIF via CAPIF-1e and CAPIF-2e. The
API provider functions from outside the PLMN trust domain connects to the
CAPIF core functions via CAPIF-3e, CAPIF-4e and CAPIF-5e.
##### 7.1.2.1.3 Reference points
The reference points CAPIF-3e, CAPIF-4e and CAPIF-5e are equivalent of the
reference points CAPIF-3, CAPIF-4 and CAPIF-5 respectively specified in
subclause 7.1.1.1.3, for supporting the interactions corresponding to the
services APIs from the 3^rd^ party service provider.
##### 7.1.2.1.4 Deployment options
###### 7.1.2.1.4.1 Option 1 -- PLMN operator hosted service APIs and CAPIF
core functions
CAPIF core functions is hosted in a PLMN operator domain as illustrated in the
figure 7.1.2.1.4.1-1.
Figure 7.1.2.1.4.1-1: PLMN operator hosted service APIs and CAPIF core
functions
In this option, the service provider and the PLMN operator can be part of the
same organization, in which case the business relationship between the two is
internal to a single organization. CAPIF along with the service APIs are
hosted by the PLMN operator, while the API invoker consuming service APIs may
or may not reside within the PLMN operator domain.
CAPIF-5 interface allows API provider to interact with CAPIF core functions
for API management functions. CAPI-5 interface supports the following
functionality:
1\. enable the API provider to configure policies e.g. API invocation
throttling, blocking API invocation for certain duration, whether API
invocation is allowed while roaming. Policies can be defined to be enforced
per API application or across applications, configure access control list of
service APIs per application;
2\. access service API invocation event logs and configure the log storage
period;
3\. for CAPIF core functions to request grant of new API invoker onboarding
and confirm onboarding successful;
4\. allow API provider to update API invoker profile information;
5\. allow API provider to govern the lifecycle status of service APIs e.g.
pilot or live, trace and access API versioning, control visibility of service
API (start or stop of service API); and
6\. allow API provider to notify service API events e.g. fault of a Service
API or location change of the API invoker invoking service API, load, resource
usage, charging records.
###### 7.1.2.1.4.2 Option 2 -- 3rd party service provider hosted service APIs
and CAPIF core functions
CAPIF core functions is hosted in a 3^rd^ party service provider domain as
illustrated in the figure 7.1.2.1.4.2-1.
Figure 7.1.2.1.4.2-1: 3rd party service provider hosted service capability
APIs and CAPIF core functions
In this option, the 3^rd^ party service provider has service arrangements with
the PLMN operator for network capabilities and they belong to different
organizations. The 3rd party service provider hosts both service capability
APIs and CAPIF core functions. Since CAPIF is hosted in the 3rd party service
provider domain i.e., the CAPIF components are duplicated in both PLMN
operator domain and 3rd party service provider domain for enabling access to
service APIs exposed by respective domains.
The functionality of the CAPIF components and the interfaces in the 3rd party
service provider domain are similar to that of Option 1 -- PLMN operator
hosted service capability APIs and CAPIF core functions, however the CAPIF
functionality is with respect to the service APIs exposed by the 3rd party
service provider.
In some deployments, it is possible for the CAPIF components to exist only in
the 3rd party service provider domain. In such a option, the service APIs are
only exposed by the 3^rd^ party service provider and the PLMN operator's role
may be limited to only providing the network capabilities.
###### 7.1.2.1.4.3 Option 3 -- PLMN operator-assisted service capability APIs
and CAPIF core functions for a 3rd party service provider
CAPIF core functions is hosted in a PLMN operator domain as illustrated in the
figure 7.1.2.1.4.3-1.
Figure 7.1.2.1.4.3-1: PLMN operator-assisted service APIs and CAPIF core
functions for a 3rd party service provider
In PLMN operator-assisted CAPIF for the 3rd party service provider, the CAPIF
components hosted in the PLMN operator domain is utilized by the 3rd party
service provider for enabling access to service APIs exposed by the 3rd party
service provider domain. So the PLMN operator-assists with both service
capability APIs and the CAPIF core functions for the 3rd party service
provider.
The functionality of the CAPIF components and the interfaces CAPIF-3 are
similar to those of PLMN operator hosted CAPIF, however the functionality
supported on CAPIF-3 may be enhanced to support requirements that are
necessary to support service APIs exposed by the 3rd party service provider.
CAPIF core functions may need to maintain logical separation between APIs
related data storage between the services API exposed by the PLMN operator
domain and the 3rd party service provider domain i.e. access to the storage is
restricted to the respective domains. Such separation will enable API
management entities in both network provider domain and service provider
domain to be in control of their framework functionality and the associated
data.
Interfaces CAPIF-5e is similar to interface CAPIF-5, however the functionality
over CAPIF-5e is with respect to the service APIs exposed by the 3rd party
service provider.
#### 7.1.2.2 Solution evaluation
This solution provides the CAPIF architecture for the northbound APIs from the
API providers within the PLMN trust domain and also from the 3^rd^ party API
providers residing outside the PLMN trust domain.
SA3 may provide the solution details for the security considerations for
CAPIF-1e, CAPIF-2e, CAPIF-3e, CAPIF-4e and CAPIF-5e interactions.
This solution can be considered for the normative work.
### 7.1.3 Solution 3 -- High level functional architecture to support service
APIs from 3^rd^ party API providers via CAPIF interconnection
#### 7.1.3.1 Solution description
##### 7.1.3.1.1 General
This subclause describes the solution for the high level functional
architecture to support service APIs from 3^rd^ party API providers via CAPIF
interconnection.
##### 7.1.3.1.2 Architectural Model
Figure 7.1.3.1.2-1 shows the architectural model for the CAPIF which allows
API invokers inside the PLMN trust domain and outside the PLMN trust domain to
access the service APIs from 3^rd^ party API providers.
Figure 7.1.3.1.2-1: High level functional architecture to support service APIs
from 3^rd^ party API providers via CAPIF interconnection
Editor\'s Note: The ability of an API invoker to access service API from the
3rd party trust domain via CAPIF-2e without authenticating to the CAPIF in the
3rd party trust domain is FFS.
The PLMN operator hosts a CAPIF in the PLMN trust domain and a 3^rd^ party API
provider hosts a CAPIF in the 3^rd^ party API provider trust domain. The
functional entities of the CAPIF hosted by PLMN operator and the 3^rd^ party
API provider are specified in the high level functional architecture for the
CAPIF specified in the subclause 7.1.1.1
The 3^rd^ party API provider may have some business arrangement with the PLMN
operator. Based on such business arrangement, the CAPIF hosted by the PLMN
operator may support the service APIs of 3^rd^ party API provider. The CAPIF
hosted by the PLMN operator shall support interconnection with the CAPIF
hosted by 3^rd^ party API providers.
The functional entities and reference points within the PLMN trust domain may
all be within the PLMN operator\'s control, or some may be controlled by a
trusted business partner which has a trust relationship with the PLMN operator
e.g. another operator or a 3rd party API provider. The security requirements
for the PLMN trust domain are out of scope of the present document.
It is assumed that within the CAPIF hosted by the 3^rd^ party API provider,
the API provider functions are configured only to communicate with the CAPIF
core functions in the 3^rd^ party API provider trust domain only. The CAPIF
communication between the 3^rd^ party API provider trust domain and the PLMN
trust domain is enabled by the interconnection (via CAPIF-6) between the CAPIF
core functions hosted by the PLMN operator and the CAPIF core functions hosted
by the 3^rd^ party API provider.
The API invoker is onboarded to the CAPIF hosted by the PLMN operator.
NOTE: The API invoker shares the onboarding relationship with only one CAPIF.
Hence, the API invoker cannot connect with the CAPIF core functions hosted by
the 3^rd^ party API provider as the identity and other security relationship
of the API invoker is only with CAPIF core functions hosted by the PLMN
operator.
The API invoker within the PLMN trust domain:
\- connects with the CAPIF hosted by the PLMN operator via CAPIF-1 and
CAPIF-2; and
\- connects with the CAPIF hosted by 3^rd^ party API provider via CAPIF-2e;
The API invoker within the PLMN trust domain shall be able to discover the
service APIs from the 3^rd^ party API provider domain via CAPIF-1 interactions
and performs the corresponding service API invocations via CAPIF-2e
interactions.
The API invoker residing outside the PLMN trust domain:
\- connects with the CAPIF hosted by PLMN operator via CAPIF-1e and CAPIF-2e;
and
\- connects with the CAPIF hosted by 3^rd^ party API provider via CAPIF-2e;
The API invoker residing outside the PLMN trust domain shall be able to
discover the service APIs from the 3^rd^ party API provider domain via
CAPIF-1e interactions and performs the corresponding service API invocations
via CAPIF-2e interactions.
The CAPIF core functions hosted by 3^rd^ party API provider connects to the
CAPIF core functions hosted by the PLMN operator via CAPIF-6. The security
consideration of CAPIF-6 is out of scope of the present document.
##### 7.1.3.1.3 Reference points
The description for reference points CAPIF-1, CAPIF-1e, CAPIF-2, CAPIF-2e,
CAPIF-3, CAPIF-4 and CAPIF-5 are specified in subclause 7.1.1.1.3.
The reference point CAPIF-6 supports the following functions:
\- to publish the service API information of the 3^rd^ party API provider on
the CAPIF core functions hosted by the PLMN operator;
\- supporting the 3^rd^ party API provider to configure policies (e.g. API
invocation throttling, blocking API invocation for certain duration) at the
CAPIF core functions hosted by the PLMN operator;
\- supporting the 3^rd^ party API provider to govern the lifecycle status of
its service APIs (e.g. pilot or live, trace) and access API versioning,
control visibility of its service API (e.g. start or stop of service API) at
the CAPIF core functions hosted by the PLMN operator;
\- supporting the authentication, authorization and access control of API
invoker for accessing the service APIs in the 3^rd^ party API provider domain;
\- logging the service API invocations in the CAPIF hosted by the 3^rd^ party
API provider at the CAPIF core functions hosted by the PLMN operator;
\- enabling charging of the service API invocations in the CAPIF hosted by the
3^rd^ party API provider at the CAPIF core functions hosted by the PLMN
operator; and
\- enabling the monitoring of the service API invocations in the CAPIF hosted
by the 3^rd^ party API provider at the CAPIF core functions hosted by the PLMN
operator;
#### 7.1.3.2 Solution evaluation
This solution enables a CAPIF hosted by the PLMN operator to support service
APIs of 3^rd^ party API provider via CAPIF interconnection via CAPIF-6. An
alternative implementation of this solution could use CAPIF-3e, CAPIF-4e and
CAPIF-5e (see solution 2 in subclause 7.1.2) instead of CAPIF-6 to connect the
two CAPIF core functions instances.
The security considerations for authentication, authorization and secure
communication for CAPIF-6 require further investigation in SA3.
This solution can be considered for future normative work.
## 7.2 Solutions to key issues
### 7.2.1 Solution 1: Publish service APIs
#### 7.2.1.1 Solution description
The following solution corresponds to the key issue on publish specified in
subclause 5.1. The CAPIF enables the API publishing function to publish
service APIs in order to be discoverable by the API invokers.
Figure 7.2.1.1-1 illustrates the solution for publishing the service APIs. The
service API publish mechanism is supported by the CAPIF core functions.
Pre-conditions:
1\. The CAPIF core functions is configured with the details of the API
publishing function.
Figure 7.2.1.1-1: Solution 1 -- Publish Service APIs
1\. The API publishing function sends a service API publish request to the
CAPIF core functions, with the details of the service API (e.g. service type,
communication type, interfaces, protocols).
2\. Upon receiving the service API publish request, the CAPIF core functions
validates the API publishing function. If the validation is successful, the
service API information provided by the API publishing function is stored at
the CAPIF core functions (API registry).
3\. The CAPIF core functions provides a service API publish response to the
API publishing function indicating success or failure result.
4\. The CAPIF core functions may send notification to the API invoker about
the availability of new service API to the API invoker, if previously
subscribed by the API invoker.
#### 7.2.1.2 Solution evaluation
This is the only solution that enables the API providers to publish the
service APIs in order to be discoverable by the API invokers.
This solution will be considered for Release 15 normative work.
### 7.2.2 Solution 2: Discover service APIs
#### 7.2.2.1 Solution description
The following solution corresponds to the key issue on discover service APIs
specified in subclause 5.1.
Figure 7.2.2.1-1 illustrates the solution for discover service APIs.
The service API discovery mechanism is supported by the CAPIF core functions.
Pre-conditions:
1\. API invoker is onboarded and has received an API invoker identity.
2\. The CAPIF core functions is configured with a discovery policy information
for API invoker(s). The policy may be based on API invoker's role (E.g.
administrator, guest, application developer).
Figure 7.2.2.1-1: Solution 2 -- Discover service APIs
1\. The API invoker sends a service API discover request to the CAPIF core
functions. It includes the API invoker identity, and may include query
information. The query information may include the details of the required
service API (e.g. service type, communication type, interfaces, protocols).
2\. Upon receiving the service API discover request, the CAPIF core functions
verifies the identity of the API invoker (via authentication). The CAPIF core
functions retrieves the stored service API(s) information from the CAPIF core
functions (API registry) as per the query information in the service API
discover request. Further, the CAPIF core function applies the discovery
policy and performs filtering of service APIs information retrieved from the
CAPIF core functions (API registry).
3\. The CAPIF core functions sends a service API discover response to the API
invoker with the list of service API information for which the API invoker has
the required authorization.
#### 7.2.2.2 Solution evaluation
This is the only solution that enables the discovery of service APIs by the
API invokers.
This solution will be considered for Release 15 normative work.
### 7.2.3 Solution 3: Subscription and notifications for the CAPIF events
related to service APIs
#### 7.2.3.1 Solution description
##### 7.2.3.1.1 General
The solution corresponds to the key issues and requirements for service API
lifecycle management. The CAPIF enables the API invoker to subscribe to the
CAPIF events related to service API changes such as availability events of
service APIs (e.g. active, inactive), change in service API information, etc.
NOTE: Support for subscriptions and notifications can also be part of the
actual service APIs. That type of subscriptions and notifications is not
covered by the provisions in this clause.
##### 7.2.3.1.2 Procedure
Figure 7.2.3.1.2-1 illustrates the procedure for service API related events
subscription.
Pre-conditions:
1\. The API invoker has performed the service discovery and received the
details of the service API.
2\. The API invoker is authenticated and authorized to use the service API.
Figure 7.2.3.1.2-1: Procedure for service API related event subscription
1\. The API invoker sends an event subscription request to the CAPIF core
functions.
2\. Upon receiving the event subscription request from the API invoker, the
CAPIF core functions checks for the relevant authorization for the event
subscription. If the API invoker has no authorization, step 4 is performed,
where the event subscription response provides the failure reasons for the
event subscription.
3\. If the authorization is successful, the CAPIF core functions stores the
subscription information.
4\. The CAPIF core functions sends an event subscription response indicating
successful operation.
Figure 7.2.3.1.2-2 illustrates the procedure for service API related event
notifications.
Pre-conditions:
\- The subscription procedure as illustrated in Figure 7.2.3.1.2-1 is
performed.
Figure 7.2.3.1.2-2: Procedure for service API related event notifications
1\. The CAPIF core functions generates events to be consumed by the API
invoker(s).
2\. For the generated event, the CAPIF core functions retrieves the list of
corresponding subscriptions.
3\. The CAPIF core functions sends event notification requests to all the API
invoker(s) that have subscribed for the event.
4\. The API invoker sends an event notification response to the CAPIF core
functions as an acknowledgement of the event notification request.
#### 7.2.3.2 Solution evaluation
This is the only solution that enables the API invokers to subscribe for
receiving notifications for CAPIF events related to service APIs and CAPIF
APIs.
This solution will be considered for Release 15 normative work.
### 7.2.4 Solution 4: CAPIF topology hiding
#### 7.2.4.1 Solution description
##### 7.2.4.1.1 General
The solution corresponds to the key issues and requirements related to
topology hiding.
##### 7.2.4.1.2 Procedure
Figure 7.2.4.1.2-1 illustrates the procedure for CAPIF topology hiding.
Pre-conditions:
1\. The API invoker has performed the service discovery and received the
details of the service API which includes the information about the service
communication entry point of the AEF-1 in the CAPIF.
2\. The API invoker is authenticated and authorized to use the service API.
3\. The AEF-1 in the CAPIF is configured with the entry point address of the
service API (provided via AEF-2) and is configured with a policy for topology
hiding for the service API.
Figure 7.2.4.1.2-1: Procedure for CAPIF topology hiding
1\. The API invoker performs service API invocation according to the interface
of the service API by sending a service API invocation message towards the
AEF-1 which exposes the service API towards the API invoker, and acts as
topology hiding entity.
2\. If the policy for topology hiding is not configured in AEF-1, then the
AEF-1 may obtain the policy for the topology hiding from the CAPIF core
functions.
3\. The AEF-1 further resolves the actual destination service API address
information according to the topology hiding policy and forwards the incoming
service API invocation message to the service API of the related AEF-2.
4\. The AEF-1 receives a response message for service API invocation from
service API provided by AEF-2.
5\. The AEF-1 resolves the destination API invoker address and also modifies
the source address information of the AEF-2 within the response message as per
topology hiding policy and forwards the response message to the API invoker.
#### 7.2.4.2 Solution evaluation
This solution enables topology hiding of the service APIs from the API
invoker.
This solution can be considered for Release 15 normative work.
### 7.2.5 Solution 5: Onboarding API invoker to the CAPIF
#### 7.2.5.1 Solution description
##### 7.2.5.1.1 General
The solution corresponds to the key issues and requirements for onboarding API
invoker to the CAPIF. The CAPIF enables a one time onboarding process that
enrolls the API invoker as a recognized user of the CAPIF, which may be
triggered by the API invoker via CAPIF-1, or may be based on provisioning.
##### 7.2.5.1.2 Procedure
Figure 7.2.5.1.2-1 illustrates the procedure for onboarding API invoker to the
CAPIF.
Pre-conditions:
  1. API invoker is not a recognized user of the CAPIF.
  2. The API invoker has visibility to APIs information (e.g., API catalogue or dashboard - central place for the API provider to manage which APIs are displayed, giving API invokers the ability to enroll for).
Editor\'s Note: Establishing trust relationship prior to initiating onboarding
request is FFS.
Figure 7.2.5.1.2-1: Procedure for onboarding API invoker to the CAPIF
1\. The API invoker may trigger onboard API invoker request towards CAPIF core
functions, providing the information as required for the API management.
2\. The CAPIF core function begins the onboarding process by verifying whether
all the necessary information has been provided to onboard the API invoker,
and further initiates a grant process. Successful onboarding results in
provisioning API invoker profile which includes identity for the API invoker.
The authorization information and the list of APIs and the types of APIs that
the API invoker can access subsequent to successful onboarding may also be
created.
NOTE 1: Completion of onboarding process may need explicit grant by the CAPIF
administrator or the API management, which is left out-of-scope of this
solution. CAPIF may be enabled to handle the grant process internally without
the need of explicit grant by the CAPIF administrator.
NOTE 2: API invoker profile consists of at least the identity information for
the API invoker, information required for the authentication and authorization
by the CAPIF and the CAPIF identity information.
3\. If the API invoker has triggered the onboard API invoker request and is
granted permission, the onboard API invoker response provides success
indication including information from the provisioned API invoker profile
which may include information to allow the API invoker to be authenticated and
to obtain authorization for service APIs.
4\. As a result of successful onboarding process, CAPIF core functions are
able to authenticate and authorize the API invoker.
#### 7.2.5.2 Solution evaluation
This is the only solution in the present document which enables the enrollment
of the API invoker to be a recognized user of the CAPIF. There can be other
solutions e.g. offline mechanism where the API invoker visits the API provider
directly for enrollment, which is not described in the present document.
This solution will be considered for Release 15 normative work.
### 7.2.6 Solution 6: Authentication between the API invoker and the CAPIF
core functions
#### 7.2.6.1 Solution description
##### 7.2.6.1.1 General
The solution corresponds to the key issues and requirements for authentication
between the API invoker and the CAPIF core functions.
##### 7.2.6.1.2 Procedure
Figure 7.2.6.1.2-1 illustrates the procedure for authentication between the
API invoker and the CAPIF core functions.
Pre-conditions:
1\. API invoker is onboarded with the CAPIF core functions and the API invoker
profile is created.
Figure 7.2.6.1.2-1: Procedure for authentication between the API invoker and
the CAPIF core functions
1\. The API invoker triggers authentication to the CAPIF core functions,
including the identity confirmed after successful onboarding.
2\. Upon receiving the authentication request, the CAPIF core functions
verifies the identity with the API invoker profile and authenticates the API
invoker.
NOTE 1: The authentication process is outside the scope of the present
document and will be defined by SA3.
3\. The CAPIF core functions returns the result of API invoker identity
verification in the authentication response.
NOTE 2: CAPIF core functions can share the information required for
authentication of the API invoker at the AEF.
#### 7.2.6.2 Solution evaluation
This is the only solution which allows the API invokers to get authenticated
with the CAPIF core functions. This solution will be considered for Release 15
normative work.
Details of the authentication process are the responsibility of SA3.
### 7.2.7 Solution 7: Obtaining authorization to access service API
#### 7.2.7.1 Solution description
##### 7.2.7.1.1 General
The solution corresponds to the key issues and requirements related to
authorization for service API access. The API invoker requires to execute this
procedure when it needs to obtain or re-obtain (e.g. upon expiry of the
authorization information) the authorization to access the service API. Once
the API invoker receives the authorization to access the service API, the API
invoker can perform one or multiple service API invocations as per the
permission limit. This procedure may be performed during the API invoker
onboarding process.
##### 7.2.7.1.2 Procedure
Figure 7.2.7.1.2-1 illustrates the procedure for obtaining authorization to
access the service API.
Pre-conditions:
1\. The API invoker is onboarded and has received an API invoker identity.
Figure 7.2.7.1.2-1: Procedure for the API invoker obtaining authorization for
service API access
1\. The API invoker sends an obtain service API authorization request to the
CAPIF core function for obtaining permission to access the service API by
including the API invoker identity information and any information required
for authentication of the API invoker.
2\. The CAPIF core functions validates the API invoker (using authentication
information) and checks for the API invoker subscription information for the
requested service API.
> NOTE 1: The authentication process is outside the scope of the present
> document and will be defined by SA3.
3\. Based on the API invoker\'s subscription information the authorization
information to access the service APIs is sent to the API invoker in the
obtain service API authorization response.
NOTE 2: The mechanism for distribution of the authorization information for
the API invoker to the API exposing function is not in the scope of the
present document.
#### 7.2.7.2 Solution evaluation
This is the only solution that enables the API invoker to receive the
authorization information to access the service APIs.
Details of the authorization process are the responsibility of SA3.
This solution will be considered for Release 15 normative work.
### 7.2.8 Solution 8: Authentication between the API invoker and the AEF as
separate procedure
#### 7.2.8.1 Solution description
##### 7.2.8.1.1 General
The solution corresponds to the key issues and requirements for authentication
of the API invoker by the AEF.
To reduce latency during API invocation, the API invoker associated
authentication information can be made available at the AEF after
authentication between the API invoker and the CAPIF core functions.
##### 7.2.8.1.2 Procedure
Figure 7.2.8.1.2-1 illustrates the procedure for authentication between the
API invoker and the AEF.
Pre-conditions:
1\. Optionally, CAPIF core functions have shared the information required for
authentication of the API invoker with the AEF.
Figure 7.2.8.1.2-1: Procedure for authentication between the API invoker and
the AEF as separate procedure
1\. The API invoker triggers authentication to the AEF, including the API
invoker identity.
2\. The AEF obtains the API invoker information required for authentication by
the AEF, if not available.
3\. The AEF verifies the identity of the API invoker and authenticates the API
invoker.
NOTE: The authentication process is outside the scope of the present document
and will be defined by SA3.
4\. The AEF returns the result of API invoker identity verification in the
authentication response.
#### 7.2.8.2 Solution evaluation
This is the only solution enabling explicit authentication by the API invokers
to get authenticated with the AEF. This solution will be considered for
Release 15 normative work.
Details of the authentication process are the responsibility of SA3.
### 7.2.9 Solution 9: Secure communication
#### 7.2.9.1 Solution description
The solution considers secure communication in CAPIF.
A secure communication channel is mandatory for the following communications
in CAPIF.
\- CAPIF-1 supported functionality (e.g. obtaining authorization) between the
API invoker and the CAPIF core functions
\- CAPIF-2 supported functionality (e.g. service API invocation) between the
API invoker and the AEF.
\- CAPIF-3 supported functionality (e.g. sharing authorization information)
between the AEF and CAPIF core functions
\- CAPIF-4 supported functionality (e.g. publishing service APIs) between the
API publishing function and CAPIF core functions
\- CAPIF-5 supported functionality (e.g. enabling auditing, monitoring)
between the API management function and CAPIF core functions
#### 7.2.9.2 Solution evaluation
The present document has identified the need for securing the communication
over CAPIF reference points. Details for providing secure communication over
CAPIF reference points are the responsibility of SA3.
### 7.2.10 Solution 10: API invoker authorization to access service APIs
#### 7.2.10.1 Solution description
##### 7.2.10.1.1 General
The solution corresponds to the key issues and requirements for API invoker
authorization to access service APIs.
A secure communication channel is mandatory in CAPIF as described in Solution
9.
To reduce latency during API invocation, the API invoker associated
authorization information can be made available at the AEF after
authentication between the API invoker and the CAPIF core functions.
##### 7.2.10.1.2 Procedure
Figure 7.2.10.1.2-1 illustrates the procedure for API invoker authorization to
access service APIs and secure communication.
Pre-conditions:
1\. Optionally API invoker is authenticated by the AEF.
2\. Optionally the API invoker associated authorization information is
available at AEF.
Figure 7.2.10.1.2-1: Procedure for API invoker authorization to access service
APIs and secure communication
1\. The API invoker triggers service API invocation request to the AEF,
including the service API to be invoked. Authentication may also be performed
if not authenticated previously.
NOTE: API invoker may trigger several service API invocations asynchronously.
2\. Upon receiving the service API invocation request, the AEF checks whether
API invoker is authorized to invoke that service API, based on the
authorization information.
2a. If the AEF does not have information required to authorize service API
invocation, the AEF obtains the authorization information from the CAPIF core
functions.
3\. The AEF executes the service logic for the invoked service API.
4\. API invoker receives the service API invocation response as a result of
the service API invocation.
#### 7.2.10.2 Solution evaluation
This is the only solution which allows authorization upon receiving the API
invocation requests from the API invokers. This solution will be considered
for Release 15 normative work.
Details of the authorization process are the responsibility of SA3.
### 7.2.11 Solution 11: Logging service API invocations
#### 7.2.11.1 Solution description
##### 7.2.11.1.1 General
The solution corresponds to the key issues and requirements for logging
service API invocations at AEF.
##### 7.2.11.1.2 Procedure
Figure 7.2.11.1.2-1 illustrates the procedure for logging service API
invocations at AEF.
Pre-conditions:
1\. API invoker(s) has invoked certain service API(s).
Figure 7.2.11.1.2-1: Procedure for logging service API invocations
1\. Upon invocation of service API(s) from one more API invokers, the AEF
triggers API invocation log request including the API invoker information such
as invoker\'s ID and IP address, location, timestamp and API information such
as service API name and version, input parameters, invocation result towards
the CAPIF core functions.
NOTE: The AEF can collect the log information associated to several API
invocations before triggering API invocation log request asynchronously.
2\. CAPIF core functions makes a log entry and stores the information e.g.,
for charging purposes, for access by authorized users and entities.
NOTE: API invocation log is stored for a configured duration.
3\. AEF receives the API invocation log response from the CAPIF core
functions.
#### 7.2.11.2 Solution evaluation
This is the only solution that enables logging the service API invocations.
This solution will be considered for Release 15 normative work.
### 7.2.12 Solution 12: Auditing service API invocation
#### 7.2.12.1 Solution description
##### 7.2.12.1.1 General
The solution corresponds to the key issues and requirements for auditing
service API invocation.
##### 7.2.12.1.2 Procedure
Figure 7.2.12.1.2-1 illustrates the procedure for auditing service API
invocation.
Pre-conditions:
1\. Service API invocation logs are available at the CAPIF core functions.
Figure 7.2.12.1.2-1: Procedure for auditing service API invocation
1\. API management triggers Auditing service API request to the CAPIF core
functions.
2\. Upon receiving the Auditing service API request, the CAPIF core functions
locates the necessary log information for auditing purposes.
3\. The CAPIF core functions returns the log information to the API management
in Auditing service API response.
4\. API management analyses the received log information to detect the abuse
of service API invocations.
NOTE: API management action subsequent to auditing service API response is
out-of-scope of this specification.
#### 7.2.12.2 Solution evaluation
This is the only solution enabling auditing of the service API invocations.
This solution will be considered for Release 15 normative work.
### 7.2.13 Solution 13: Charging the invocation of service APIs
#### 7.2.13.1 Solution description
##### 7.2.13.1.1 General
The solution corresponds to the key issues and requirements for charging the
invocation of service APIs.
##### 7.2.13.1.2 Procedure
Figure 7.2.13.1.2-1 illustrates the procedure for charging the invocation of
service APIs.
Figure 7.2.13.1.2-1: Procedure for charging the invocation of service APIs
1\. Upon invocation of service API(s) from one more API invokers, the AEF
triggers an API invocation charging request and includes API invoker
information (e.g. invoker\'s ID and IP address, location, timestamp) and API
information (e.g. service API name and version, invoked operation, input
parameters, invocation result) towards the CAPIF core functions.
> NOTE: These requests can be triggered asynchronously.
2\. CAPIF core functions perform a charging procedure which includes storing
the information for access by authorized API management.
3\. AEF receives the API invocation charging response from CAPIF core
functions.
#### 7.2.13.2 Solution evaluation
This is the only solution that enables charging the service API invocations.
Details of the charging solution for CAPIF including offline and online
charging are responsibility of SA5.
This solution will be considered for Release 15 normative work.
### 7.2.14 Solution 14: Monitoring service API invocation
#### 7.2.14.1 Solution description
##### 7.2.14.1.1 General
The solution corresponds to the key issues and requirements for monitoring
service API invocation.
##### 7.2.14.1.2 Procedure
Figure 7.2.14.1.2-1 illustrates the procedure for monitoring service API
invocation.
Pre-conditions:
1\. API management function has subscribed to monitoring event including
filters such as invoker\'s ID and IP address, service API name and version,
input parameters, and invocation result.
Figure 7.2.14.1.2-1: Procedure for monitoring service API invocation
1\. The CAPIF core functions monitors the service API invocations applying the
monitoring filters specified before.
2\. Detection of a monitoring event triggers the CAPIF core functions to
notify the API management function with the details of the monitored event.
NOTE: API provider action subsequent to monitoring service API notification is
out-of-scope of this specification.
#### 7.2.14.2 Solution evaluation
This is the only solution which allows the API management function to receive
the monitoring event notifications from the CAPIF. This solution will be
considered for Release 15 normative work.
There is no solution described in the present document for API management
function subscribing the CAPIF events. This will be addressed in the normative
phase.
### 7.2.15 Solution 15: CAPIF access control
#### 7.2.15.1 Solution description
##### 7.2.15.1.1 General
The solution corresponds to the key issues and requirements related to some
common access control requirements for service API invocations.
##### 7.2.15.1.2 Procedure
Figure 7.2.15.1.2-1 illustrates the procedure for CAPIF access control.
Pre-conditions:
1\. The API invoker has performed the service discovery and received the
details of the service API which includes the information about the service
communication entry point of the AEF in the CAPIF.
2\. The API invoker is authenticated and authorized to use the service API.
3\. The AEF in the CAPIF is configured with at least one access policy to be
applied to the service API invocation corresponding to the API invoker and
service API.
Figure 7.2.15.1.2-1: Procedure for CAPIF access control
1\. The API invoker performs service API invocation according to the interface
of the service API by sending a service API invocation message towards the AEF
which exposes the service API towards the API invoker, and acts as access
control entity.
2\. If the access control policy is not configured with AEF, then the AEF may
obtain the access control policy configuration from the CAPIF core functions.
3\. Upon receiving the service API invocation from the API invoker, the AEF
checks for configuration for access control. As per the configuration for
access control, the AEF performs access control on the service API invocation
message as per the operator policy.
4\. The API invoker receives a response message for service API invocation
from the AEF providing the service API.
#### 7.2.15.2 Solution evaluation
This solution allows the API exposing function to perform access control on
the service API invocations from the API invoker. The aspect of revoking
authorization of the API invoker based on access control is not addressed in
this solution and can be further considered for enhancements in the normative
phase.
This solution can be considered for Release 15 normative work.
### 7.2.16 Solution 16: CAPIF access control with cascaded AEFs
#### 7.2.16.1 Solution description
##### 7.2.16.1.1 General
The solution corresponds to the key issues and requirements related to some
common access control requirements for service API invocations. It provides
access control, based on two cascaded API Exposing Function (AEF) instances.
While one AEF instance provides the entry point for the service API and acts
as access controller, further AEF instances deliver the functionality of the
actual service APIs.
##### 7.2.16.1.2 Procedure
Figure 7.2.16.1.2-1 illustrates the procedure for CAPIF access control.
Pre-conditions:
1\. The API invoker has performed the service discovery and received the
details of the service API which includes the information about the service
communication entry point of the AEF-1 in the CAPIF.
2\. The API invoker is authenticated and authorized to use the service API.
3\. The AEF-1 in the CAPIF is configured with at least one access policy to be
applied to the service API invocation corresponding to the API invoker and
service API.
Figure 7.2.16.1.2-1: Procedure for CAPIF access control with cascaded AEFs
1\. The API invoker performs service API invocation according to the interface
of the service API by sending a service API invocation message towards
theAEF-1 which exposes the service API towards the API invoker, and acts as
access control entity.
2\. Upon receiving the service API invocation from the API invoker, the AEF-1
checks for configuration for access control. As per the configuration for
access control, the AEF-1 performs access control on the service API
invocation message as per the operator policy.3. The AEF-1 forwards the
incoming service API invocation message to the service API provided by AEF-2.
4\. The AEF-1 receives a response message for service API invocation from
AEF-2.
5\. The AEF-1 resolves the destination API invoker address and modifies the
source address information of AEF-2 within the response message and forwards
the response message to the API invoker.
#### 7.2.16.2 Solution evaluation
This solution allows the API exposing function to perform access control on
the service API invocations from the API invoker, using cascaded AEFs. This
solution can be combined with solution 4 (CAPIF topology hiding, subclause
7.2.4).
The aspect of revoking authorization of the API invoker based on access
control is not addressed in this solution and can be further considered for
enhancements in the normative phase.
This solution can be considered for Release 15 normative work.
### 7.2.17 Solution 17: Authentication between the API invoker and the AEF as
part of the API invocation
#### 7.2.17.1 Solution description
##### 7.2.17.1.1 General
The solution corresponds to the key issues and requirements for authentication
of the API invoker by the AEF.
To reduce latency during API invocation, the API invoker associated
authentication information can be made available at the AEF after
authentication between the API invoker and the CAPIF core functions.
##### 7.2.17.1.2 Procedure
Figure 7.2.17.1.2-1 illustrates the procedure for authentication of the API
invoker by the AEF, where the authentication information is carried in the API
invocation request.
NOTE: This solution can be combined with solution 10 (subclause 7.2.10).
Pre-conditions:
1\. Optionally, CAPIF core functions have shared the information required for
authentication of the API invoker with the AEF.
Figure 7.2.17.1.2-1: Procedure for authentication between the API invoker and
the AEF as part of the API invocation
1\. The API invoker invokes a service API invocation request to the AEF, and
includes in this request authentication information, including API invoker
identity.
2\. The AEF obtains the API invoker information required for authentication by
the AEF, if not available.
3\. The AEF verifies the identity of the API invoker and authenticates the API
invoker.
NOTE: The authentication process is outside the scope of the present document
and will be defined by SA3.
4\. If the verification was successful, the AEF returns the result of the
service API invocation in the Service API invocation response.
#### 7.2.17.2 Solution evaluation
This is the only solution enabling authentication of the API invokers with the
AEF as part of a service API invocation.
This solution will be considered for Release 15 normative work.
Details of the authentication process are the responsibility of SA3.
# 8 Overall evaluation
## 8.1 General
The following subclauses contain an overall evalation of the solutions
presented in this technical report, and their applicability to the identified
key issues.
\- Subclause 8.2 provides an evaluation of the high level architecture
specified in subclause 7.1; and
\- Subclause 8.3 lists the solutions for the key issues including impact on
other working groups that will need consideration.
## 8.2 Architecture evaluation
The high level architecture solution in subclause 7.1.1 describes the baseline
functional model for a common API framework. The architecture solutions in
subclauses 7.1.2 and 7.1.3, consider the scenarios for multiple API providers.
A summary of the architecture solutions specified in this technical report are
listed in table 8.2-1.
Table 8.2-1 Architecture evaluation
+----------------+----------------+----------------+----------------+ | Architecture | Applicable key | Evaluation | Dependency on | | solution | issues | | other working | | | | (subclause | groups | | | (subclause | reference) | | | | reference) | | | +----------------+----------------+----------------+----------------+ | 7.1.1 Solution | 5.1, 5.2, 5.3, | 7.1.1.2 | SA3, SA5 | | 1 -- High | 5.4, 5.5, 5.6, | | | | level | 5.7, 5.8, 5.9, | | | | functional | 5.10, 5.11, | | | | architecture | 5.12, 5.13, | | | | for the CAPIF | 5.14, 5.15, | | | | | 5.16, 5.17 | | | +----------------+----------------+----------------+----------------+ | 7.1.2 Solution | 5.17 | 7.1.2.2 | SA3, SA5 | | 2 -- CAPIF | | | | | architecture | | | | | for service | | | | | APIs from 3rd | | | | | party service | | | | | provider | | | | +----------------+----------------+----------------+----------------+ | 7.1.3 Solution | 5.17 | 7.1.3.2 | SA3, SA5 | | 3 -- High | | | | | level | | | | | functional | | | | | architecture | | | | | to support | | | | | service APIs | | | | | from 3rd party | | | | | API providers | | | | | via CAPIF | | | | | i | | | | | nterconnection | | | | +----------------+----------------+----------------+----------------+
## 8.3 Solution evaluation
All the solutions specified in this technical report are listed in table
8.3-1. It includes the mapping of the solutions to the key issues (clause 5)
and corresponding solution evaluations. Also it lists the impact on other
working groups that will need consideration during the Release 15 normative
phase.
Table 8.3-1 Solution evaluation
+----------------+----------------+----------------+----------------+ | Solution | Applicable key | Evaluation | Dependency on | | | issues | | other working | | | | (subclause | groups | | | (subclause | reference) | | | | reference) | | | +----------------+----------------+----------------+----------------+ | 7.2.1 Solution | 5.1 | 7.2.1.2 | None | | 1: Publish | | | | | service APIs | | | | +----------------+----------------+----------------+----------------+ | 7.2.2 Solution | 5.1 | 7.2.2.2 | None | | 2: Discover | | | | | service APIs | | | | +----------------+----------------+----------------+----------------+ | 7.2.3 Solution | 5.1, 5.6 | 7.2.3.2 | None | | 3: | | | | | Subscription | | | | | and | | | | | notifications | | | | | for the CAPIF | | | | | events related | | | | | to service | | | | | APIs | | | | +----------------+----------------+----------------+----------------+ | 7.2.4 Solution | 5.2 | 7.2.4.2 | None | | 4: CAPIF | | | | | topology | | | | | hiding | | | | +----------------+----------------+----------------+----------------+ | 7.2.5 Solution | 5.10 | 7.2.5.2 | None | | 5: Onboarding | | | | | API invoker to | | | | | the CAPIF | | | | +----------------+----------------+----------------+----------------+ | 7.2.6 Solution | 5.3 | 7.2.6.2 | SA3 | | 6: | | | | | Authentication | | | | | between the | | | | | API invoker | | | | | and the CAPIF | | | | | core functions | | | | +----------------+----------------+----------------+----------------+ | 7.2.7 Solution | 5.3 | 7.2.7.2 | SA3 | | 7: Obtaining | | | | | authorization | | | | | to access | | | | | service API | | | | +----------------+----------------+----------------+----------------+ | 7.2.8 Solution | 5.3 | 7.2.8.2 | SA3 | | 8: | | | | | Authentication | | | | | between the | | | | | API invoker | | | | | and the AEF as | | | | | separate | | | | | procedure | | | | +----------------+----------------+----------------+----------------+ | 7.2.9 Solution | 5.13 | 7.2.9.2 | SA3 | | 9: Secure | | | | | communication | | | | +----------------+----------------+----------------+----------------+ | 7.2.10 | 5.4, 5.12 | 7.2.10.2 | SA3 | | Solution 10: | | | | | API invoker | | | | | authorization | | | | | to access | | | | | service APIs | | | | +----------------+----------------+----------------+----------------+ | 7.2.11 | 5.8 | 7.2.11.2 | None | | Solution 11: | | | | | Logging | | | | | service API | | | | | invocations | | | | +----------------+----------------+----------------+----------------+ | 7.2.12 | 5.9 | 7.2.12.2 | None | | Solution 12: | | | | | Auditing | | | | | service API | | | | | invocation | | | | +----------------+----------------+----------------+----------------+ | 7.2.13 | 5.5 | 7.2.13.2 | SA5 | | Solution 13: | | | | | Charging the | | | | | invocation of | | | | | service APIs | | | | +----------------+----------------+----------------+----------------+ | 7.2.14 | 5.7 | 7.2.14.2 | None | | Solution 14: | | | | | Monitoring | | | | | service API | | | | | invocation | | | | +----------------+----------------+----------------+----------------+ | 7.2.15 | 5.12 | 7.2.15.2 | None | | Solution 15: | | | | | CAPIF access | | | | | control | | | | +----------------+----------------+----------------+----------------+ | 7.2.16 | 5.12 | 7.2.16.2 | None | | Solution 16: | | | | | CAPIF access | | | | | control with | | | | | cascaded AEFs | | | | +----------------+----------------+----------------+----------------+ | 7.2.17 | 5.3 | 7.2.17.2 | SA3 | | Solution 17: | | | | | Authentication | | | | | between the | | | | | API invoker | | | | | and the AEF as | | | | | part of the | | | | | API invocation | | | | +----------------+----------------+----------------+----------------+
# 9 Conclusions
This technical report fulfills the objectives of the CAPIF study, including
the following:
1) Identification of key issues (clause 5) and corresponding architecture
requirements (clause 6) for a common API framework towards northbound APIs
2) High-level functional architecture solution(s) (clause 7.1) including the
support for multiple API providers and multiple deployment models
3) Analysis of existing API activities
a) API work done by other 3GPP WGs (Annex A)
b) OMA API framework (clause 4.1, Annex B)
c) ETSI MEC API framework (clause 4.2, Annex C)
4) Individual solutions (clause 7.2) addressing the key issues
5) Overall evaluation (clause 8) of all the solutions
NOTE 1: The identification of common northbound API development guidelines
have not been addressed during the study, and will be progressed during the
normative phase.
NOTE 2: Some of the solutions have dependency on other working groups as
identified in subclause 8.3, in particular SA3 and SA5 WGs.
The results from the study will be considered for follow-up normative work in
Release 15 as follows:
1) The architecture requirements (clause 6) will be considered as the basis
for technical specification during the normative phase;
2) The high-level architecture solution (subclause 7.1.1) will be used as the
baseline functional model with necessary enhancements as appropriate;
3) All the individual solutions (subclause 7.2) will be considered to be the
candidate solutions for the normative phase, as per the overall evaluation
(clause 8); and
4) Leveraging external frameworks from the study will be considered during the
normative phase.
NOTE 3: Architecture solutions (subclauses 7.1.2 and 7.1.3) supporting
multiple API providers can be considered for future normative work.
###### ## Annex A: API work done by other 3GPP WGs
# A.1 General
NOTE: Although the scope of the present document covers stage-2 aspects of the
CAPIF, this annex contains both stage 2 and stage 3 aspects of the 3GPP
specifications for informative purpose.
This annex describes the existing relevant 3GPP specifications on API work
that has been done by various WGs in the past, and summarises key points for
each of them.
Although the scope of the CAPIF study is independent from the work already
done in other 3GPP WGs, it is important to study the work already done in
other 3GPP WGs and take it into account.
# A.2 Discussion
## A.2.1 SA4: API for the interface between MBMS service provider and BM-SC
(xMB)
3GPP TR 26.981 [3]: contains MBMS Extensions for Provisioning and Content
Ingestion (v14.0.0, 2017-03).
According to the introduction clause, this TR intends to \"_identify key
functionality of an interface from external application service/content
providers to the BM-SC for provisioning and content ingestion in order to
leverage all delivery methods and procedures through the interface._ \"
3GPP TR 26.981 [3] captures 5 use cases (clause 4) and describes corresponding
provisioning and ingestion procedures (clause 5). They are mainly related to
TV broadcast delivery over MBMS.
Use case 1: Live Video from multiple cameras angles into a stadium.
Use case 2: Nation-Wide TV channels.
Use case 3: VOD prepositioning.
Use case 4: Software Update.
Use case 5: TV Program Guide update delivery.
3GPP TR 26.981 [3] also looks into existing protocols for provisioning
interface (i.e. API) in clause 7:
1) Hypertext Transfer Protocol (HTTP);
2) Diameter;
3) EXtensible Markup Language (XML);
4) Representational State Transfer (REST); and
5) Simple Object Access Protocol (SOAP).
As the conclusion, 3GPP TR 26.981 [3] recommends to use RESTful API and OAI as
the modelling language for RESTful API.
+----------------------------------------------------------------------+ | _[Quote from Clause 8 Conclusion]_ | | | | It is recommended RESTful APIs to provide the interface | | specification for the interface. [The benefits of RESTful APIs | | outweigh the complexities of other protocols. RESTful APIs not only | | simplify the interface specification, but also simplifies | | implementation tasks and has lesser overhead compared to other | | protocols]{.underline}. | | | | It is recommended to use OAI (formerly known as Swagger) as | | modelling language for RESTful APIs. | +----------------------------------------------------------------------+
## A.2.2 SA2, CT3: SCEF to expose the services and capabilities provided by
3GPP network interfaces and protocols
3GPP TS 23.682 [2]: contains Architecture enhancements to facilitate
communications with packet data networks and applications. 3GPP TS 29.122 [4]:
contains T8 reference point for Northbound APIs.
Northbound APIs for SCEF -- SCS/AS Interworking (NAPS) work item defines the
SCEF API to the SCS/AS. This functionality is based on the requirements
specified by oneM2M. The detail of the API is specified in 3GPP TS 23.682 [2]
and 3GPP TS 29.122 [4]. At the time of writing the present document, the NAPS
work item is in progress.
T8 is the logical interface between the SCEF and the SCS/AS. The SCEF provides
a set of APIs to the SCS/AS so that the latter can access the service and
capabilities provided by 3GPP network entities in order to realize MTC
application services.
## A.2.3 CT3: Representational State Transfer (REST) protocol-based St
reference point
3GPP TS 29.155 [5]: contains Traffic steering control; Representational state
transfer (REST) over St reference point (v14.1.0, 2017-03).
This is a stage 3 TS that defines the St reference point between PCRF and
Traffic Steering Support Function (TSSF) (clause 1).
St reference point is based on REST protocol-based interface for the PCRF to
provision the traffic steering control information to the TSSF for the IP-CAN
session. It is based on JSON / HTTP / TCP. The PCRF uses HTTP methods (POST,
PUT, GET, PATCH, DELETE) to create, query, modify, remove to manage the
session/resource for traffic steering control information to the TSSF (clause
4). To secure the communication, NDS/IP network layer security or HTTPS
(HTTP/TLS) transport layer security is used (clause 6).
The discovery of TSSF (TSSF URI) is done by pre-configuration in PCRF
(subclause 5.5).
## A.2.4 CT3: Representational State Transfer (REST) reference point between
the Application Function (AF) and the Protocol Converter (PC)
3GPP TS 29.201 [7]: contains Representational State Transfer (REST) reference
point between Application Function (AF) and Protocol Converter (PC) (v14.0.0,
2016-12).
This is a stage 3 TS that defines the reference point between AF and PC in
order for the AF to communicate with PCRF. The AF runs applications that
communicate with PCRF to obtain PCC information for traffic plane resources
(subclause 4.2, 4.3).
The interface to PCRF (Rx) is Diameter based. If the AF uses RESTful based
API, then a protocol converter (PC) is needed to translate the protocols in
the middle. The PCRF and PC can be located within the VPLMN/HPLMN; the AF can
be located in the same PLMN with the PC or in 3^rd^ party network attached to
that PLMN (subclause 4.2, 4.3). Figure 4.2-1 (REST-Rx reference model) is
quoted below:
Figure A.2.4-1: 3GPP TS 29.201 fig. 4.2.1 The REST-Rx reference model
PCC procedure over RESTful reference point (REST-Rx) covers the following
functionalities (subclause 4.5) along with message diagrams (Annex A):
1\. Initial Provisioning of Session Information;
2\. Modification of Session Information;
3\. AF Session Termination;
4\. Gate Related Procedures;
5\. Subscription to Notification of Signalling Path Status; and
6\. Traffic Plane Events.
REST-Rx reference point is based on REST protocol-based interface for the AF
to communicate with PCRF via PC. It is based on XML / HTTP / TCP. The AF uses
HTTP methods (POST, PUT, DELETE) to create, modify, and delete the resource
state (subclause 5.3). To secure the communication, HTTPS (HTTP/TLS) transport
layer security is used (clause 7).
# A.3 Summary
Based on the discussion above, this subclause summarises aspects from the TS
and TR documents listed earlier.
Table A.3-1 captures the high level summary.
Table A.3-1 Summary of API work done in other WGs in 3GPP
+-----+-------------------+-------------------+-------------------+ | WG | Specification | Protocol | Note | +-----+-------------------+-------------------+-------------------+ | SA4 | 3GPP TR 26.981 | Recommends use | This study | | | [3] | of RESTful | (FS_xMBMS) | | | | API and OAI as | concluded in | | | (MBMS Extensions | the modelling | March 2017 | | | for Provisioning | language. | (Rel.14). | | | and Content | | | | | Ingestion) | | Carry over to the | | | | | normative work is | | | Stage 2 | | not clear (at | | | | | least no SA4 WI | | | | | exists for this). | +-----+-------------------+-------------------+-------------------+ | SA2 | 3GPP TS | _(SA2 NAPS work |_(SA2 NAPS work | | | 23.682 [2] | item in | item in progress. | | | | progress)_| Planned | | | (SCEF) | | completion date | | | | | is Sept 2017)_ | | | Stage 2 | | | +-----+-------------------+-------------------+-------------------+ | CT3 | 3GPP TS | JSON / HTTP(S) / | First | | | 29.155 [5] | TCP | introduction in | | | | | Rel.13 (2015). | | | (Traffic steering | | | | | control over St | | Annex A defines | | | ref. point) | | call flows. | | | | | | | | Stage 3 | | Annex B defined | | | | | JSON schema. | +-----+-------------------+-------------------+-------------------+ | CT3 | 3GPP TS | XML / HTTP(S) / | First | | | 29.201 [7] | TCP | introduction in | | | | | Rel.12 (2014). | | | (Reference point | | | | | between AF and | | Annex A defines | | | PC) | | call flows. | | | | | | | | Stage 3 | | Annex B defined | | | | | XML schema | +-----+-------------------+-------------------+-------------------+
Previous work done, as discussed in this annex, addresses the needs to define
specific application services (e.g. file transfer, video transmission,
protocol conversion, etc.). In this respect, none of these previous API work
in 3GPP has addressed common API framework definition that the CAPIF study
addresses.
A.4 CAPIF relationship with 3GPP functionalities
This subclause describes the relationship between the CAPIF and the 3GPP
functionalities:
1\. CAPIF can be adopted by any 3GPP functionality providing service APIs;
2\. AEF represents an instance of service API exposure functions e.g. SCEF;
3\. CAPIF core functions are an evolution of some of the capabilities exposed
by the northbound APIs (e.g. authentication, authorization, discovery, API
management function); and
4\. Aspects about mapping specific APIs onto appropriate network interfaces is
an internal implementation issue of the entity exposing the northbound APIs
and is out of scope of the CAPIF.
###### ## Annex B: OMA API Program
# B.1 General
NOTE: Although the scope of the present document covers stage-2 aspects of the
CAPIF, this annex contains both stage 2 and stage 3 aspects of the OMA
specifications for informative purpose.
The OMA API program has an inventory of APIs
(http://www.openmobilealliance.org/wp/API_Inventory.html) which provides
standardized interfaces to the service infrastructure residing within
communication networks and on devices. Focused primarily between the service
access layer and generic network capabilities, OMA API specifications allow
operators and other service providers to expose device capabilities and
network resources in an open and programmable way to any developer community
independent of the development platform. By deploying OMA APIs, fundamental
capabilities such as SMS, MMS, location services, payment and other core
network assets are now exposed in a standardized way. OMA Service Exposure
Framework is depicted in figure B.1-1
Figure B.1-1: OMA Service Exposure Framework
OMA API landscape spreads across various dimensions:
\- Abstract APIs: Focus on functional aspects and protocol independent aspects
i.e., does not include a specific protocol binding for its operations;
\- API binding technologies: SOAP/WSDL web services, HTTP protocol binding
using REST architectural style; and
\- Network API: exposed by a resource residing in the network.
# B.2 OMA API Architecture
## B.2.1 General
This subclause discusses the OMA API architecture for Abstract APIs and
HTTP/SOAP APIs.
## B.2.2 OMA Next Generation Service Interfaces (NGSI) for Abstract APIs
### B.2.2.1 OMA reference architecture of Abstract APIs
The OMA reference architecture of Abstract APIs or NGSI is shown in figure
B.2.2.1-1:
Figure B.2.2.1-1: NGSI Architectural Diagram
Although the scope of NGSI (see OMA AD NGSI [13]) is standardization of
functional interfaces and framework aspects, the excerpts below give more
emphasis on those related to framework aspects.
### B.2.2.2 Service Registration and Discovery
The Service Registration and Discovery component supports NGSI interface
messages for the following functions:
\- Registration of Services; and
\- Search for Services.
This component exposes the NGSI-11 and NGSI-12 interfaces. The NGSI-11
interface supports Registration of Services. The NGSI-12 interface supports
Search for Services.
### B.2.2.3 Identity Control
The Identity Control component supports NGSI interface messages for the
following functions:
\- Management of the Identity including Identifiers; and
\- Control of the Federation of the Identity.
This component exposes the NGSI-13 and NGSI-14 interfaces.
### B.2.2.4 Data Configuration and Management
The Data Configuration and Management component supports NGSI interface
messages for the following functions:
\- Management (i.e. create, read, update, delete) of data stored in a
document;
\- Subscription management of notifications regarding data change in the
content of a document; and
\- Notifications of data change in the content of a document.
The data supported can be of the type of XML or non-XML data. This component
exposes the NGSI-1, NGSI-2 and NGSI-3 interfaces.
## B.2.3 OMA RESTful APIs
### B.2.3.1 Authorization Framework for Network APIs
The Authorization Framework for Network APIs enables a Resource Owner owning
network resources exposed by Network APIs and RESTful APIs in particular, to
authorize third-party Applications (desktop, mobile and web Applications) to
access these resources via that API on the Resource Owner\'s behalf.
OMA RESTful Network APIs may be complemented with a common delegated
authorization framework based on the OAuth 2.0 Authorization Framework as
specified in IETF RFC 6749 [12], for access of third party Applications via
those APIs.
### B.2.3.2 RESTful Network API for Capability Discovery
The RESTful Network API for Capability Discovery contains HTTP protocol
bindings for Capability Discovery, using the REST architectural style. The
specification provides resource definitions, the HTTP verbs applicable for
each of these resources, and the element data structures, as well as support
material including flow diagrams and examples using the various supported
message body formats (i.e. XML and JSON).
# B.3 API consistency within OMA APIs
OMA has developed following specifications in order to ensure consistency
across all the APIs that are developed:
\- Common Definitions and Specifications for RESTful Network APIs [16]: To
ensure consistency for developers using the various RESTful Network APIs
specified in OMA, this \"Common\" technical specification aims to contain all
items that are common across all HTTP protocol bindings using REST
architectural style for the various individual interface definitions, such as
naming conventions, content type negotiation, representation formats and
serialization, and fault definitions. It also provides a repository for common
data types, and further covers:
\- Common specifications for RESTful Network APIs include use of REST
guidelines, handling of unsupported formats, API authoring style, resource
creation, encoding in HTTP requests/responses;
\- Data items include addressing, common data types; and
\- Error handling.
\- Whitepaper on Guidelines for RESTful Network APIs [17]: This whitepaper is
intended to provide the guidelines and best priorities for defining RESTful
Network APIs in OMA.
\- Generic principles for defining RESTful Network APIs include:
\- Services should be defined in terms of resources that are addressable as
URLs.
\- Use of nouns in URLs is recommended over the use of verbs.
\- Mapping of HTTP i.e., verbs POST, GET, PUT, DELETE for CRUD (Create, Read,
Update, Delete) operations.
\- Use standard HTTP Status codes in responses for both successful and failed
operations.
\- It is recommended to specify API versioning by inserting the API version in
the resource URL path.
\- The API specifications should include examples.
\- APIs should support ability to add extra data elements in the request/reply
body and extra query parameters in the URL to enhance usability.
\- If a message contains sensitive data, such as passwords, account numbers,
and card numbers (as in account management and payment APIs), security
consideration to protect these information is required.
\- API Documentation:
\- Each RESTful Network API should be specified in a resource-oriented manner
and the resources used by the API should be defined and explained. Use cases
and sequence diagrams should be provided.
\- RESTful Network API data types and enumeration types must be specified with
an associated detailed description including optionality. This will enable a
developer to understand how to use the parameter.
\- Error handling, examples, common data formats, backward and forward
compatibility.
###### ## Annex C: ETSI MEC API framework
# C.1 General
NOTE: Although the scope of the present document covers stage-2 aspects of the
CAPIF, this annex contains both stage 2 and stage 3 aspects of the ETSI ISG
MEC specifications for informative purpose.
Multi-access Edge Computing (MEC) offers application developers and content
providers cloud-computing capabilities and an IT service environment at the
edge of the network. This environment is characterized by ultra-low latency
and high bandwidth as well as real-time access to radio network information
that can be leveraged by applications. Operators can open their Network edge
to authorized third-parties, allowing them to flexibly and rapidly deploy
innovative applications and services towards mobile subscribers, enterprises
and vertical segments.
In its first phase, ETSI ISG MEC has covered aspects of Mobile Edge Computing
(i.e., of the hosting of applications in various places close to the edge of
the mobile network, and of enabling local or remote applications to provide
and consume services). In its second phase, ETSI ISG MEC has changed its name
to \"Multi-access Edge Computing\" to indicate that it extends its scope to
other access networks, such as WiFi or fixed, and looks at using NFV for MEC
deployments. The MEC API framework has been developed to be flexible and
generic with the goal to have applicability beyond the mobile edge, and
moreover, harmonization with the API principles used at ETSI NFV has been one
of the main design principles.
ETSI ISG MEC has developed its own RESTful API Framework (see ETSI GS MEC009
[9]). The ETSI MEC framework and reference architecture specified in ETSI GS
MEC 003 [10] provides aspects of the interaction of application with services
of the mobile edge platform. The MEC application enablement specified in ETSI
GS MEC 011 [11] specifies the Mp1 interface including the aspects about the
API supporting functions.
The reference architecture of ETSI MEC is shown in figure C.1-1:
{width="6.685416666666667in" height="4.730555555555555in"}
Figure C.1-1: ETSI MEC reference architecture
The MEC services can be hosted on the mobile edge platform or provided by
applications. They are accessible via APIs through the Mp1 reference point by
the applications.
# C.2 MEC Application Enablement
The mobile edge platform offers an environment where mobile edge applications
can discover, advertise, consume and offer mobile edge services.
Via the Mp1 reference point between the mobile edge platform and the
applications, basic functions of application enablement are provided via a
REST API.
The functions of application enablement include:
a. mobile edge service assistance:
\- authentication and authorization of producing and consuming mobile edge
services;
\- a means for service producing mobile edge applications to register towards
the mobile edge platform the mobile edge services they provide, and to update
the mobile edge platform about changes of the mobile edge service
availability;
\- a means to notify the changes of the mobile edge service availability to
the relevant mobile edge application; and
\- a means for applications to discover the available mobile edge services.
b. mobile edge application assistance:
\- mobile edge application start-up procedure; and
\- mobile edge application graceful termination/stop.
c. traffic routing:
\- traffic rules update, activation and deactivation;
d. DNS rules:
\- DNS rules activation and deactivation;
e. timing:
\- providing access to time of day information;
f. transport information:
\- providing information about available transports.
Items (c) and (d) are used to control the traffic routing feature provided by
the mobile edge host. Items (a) and (f) relate to functionality of a service
API registry. Item (b) relates to application management and item (e) is used
for time synchronization.
The API defined for application enablement follows the API principles that are
defined in ETSI GS MEC009 [9]. This way, a unified approach for API
registration / discovery and for the actual APIs is followed.
The APIs of ETSI MEC are primarily REST-based. In addition, support high
volume, low latency distribution of information beyond the capabilities of
HTTP-based APIs, the ETSI MEC API framework allows for the use of so-called
\"alternative transports\". Alternative transports are based on the use of
implemenation technologies such as message buses or RPC techniques, combined
with serializers that create a compact, typical binary, on-the-wire
representation of the data. Alternative transports allow higher throughput
than HTTP and are typically not be fully standardized. By the use of the
\"alternative transports\" concept, the API registry allows to signal the
necessary configuration parameters of the actual transport, such as IP
addresses, ports, URIs etc; as well as the used serializers.
# C.3 Design aspects of ETSI MEC APIs
## C.3.1 General
ETSI MEC defines an API framework for Mobile Edge Service APIs in ETSI GS MEC
009 [9]. It is based on REST and its implementation based on Richardson
Maturity Model. All Mobile Edge service APIs shall implement at least Level 2
of the Richardson Maturity Model. It is mostly a client-server model. Any API
designed should be compliant with it.
As part of the API framework, ETSI MEC defines:
a. Entry point of a Mobile Edge service API;
b. API security and privacy considerations;
c. API template; and
d. Patterns of the API.
## C.3.2 Entry point of a Mobile Edge service API
The important aspects of the API entry point are:
a. Every API needs to have only one entry point. The URL of the entry point
needs to be communicated to API clients so that they can find the API.
b. The API description should consist of information like API version,
features, resources, etc.
c. API entry point can be manually provided to the API developer or is
automatically discovered.
## C.3.3 API security and privacy considerations
Security and privacy considerations to allow proactive protection of the APIs
against the known security and privacy issues, e.g. DDoS, frequency attack,
unintended or accidental information disclosure, etc. A design for a secure
API should consider at least the following aspects:
a. Control the frequency of the API calls (calls/min).
b. Anonymity of the real identities.
c. Authorization of the applications. For this, two schemes are defined \--
one based on OAuth and one based on TLS credentials.
## C.3.4 API template
The details of the API are specified in an API template. It includes the
following structure:
1\. Sequence Diagrams -- Provide the description of procedures for the API.
2\. Data Model -- Provides the details of different data types like the
resource data types, subscription criteria data types, notification data
types, referenced structured data types, referenced simple data types and
enumerations.
3\. API definition -- Provides the details of the API, such as global
definitions and resource structure, description and definition of each
resource, methods associated to each resource (i.e. GET, PUT, PATCH, POST,
DELETE).
## C.3.5 Patterns of the API
The patterns are used to model common operations and data types in the RESTful
MEC APIs. The defined patterns are used consistently throughout the REST-based
mobile edge service APIs. The following patterns are specified:
a. Name syntax;
b. Resource identification;
c. Resource representations and content format negotiation;
d. Resource creation;
e. Reading a resource;
f. Queries on a resource;
g. Updating a resource;
h. Deleting a resource;
i. Task resources;
j. Subscribe/Notify;
k. Asynchronous operations;
l. Links (HATEOAS);
m. Error responses; and
n. Authorization
#