# Foreword
This Technical Report has been produced by the 3^rd^ Generation Partnership
Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
Investigate E2E solutions to be able to avoid/minimize the probability of HOs
for e.g. VoLTE/ViLTE.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 29.214: \"Policy and charging control over Rx reference point\".
[3] 3GPP TS 26.445: \"Codec for Enhanced Voice Services (EVS); Detailed
algorithmic description\".
# 3 Definitions and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
TR 21.905 [1] apply. A term defined in the present document takes precedence
over the definition of the same term, if any, in TR 21.905 [1].
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in TR 21.905
[1] apply.\ An abbreviation defined in the present document takes precedence
over the definition of the same abbreviation, if any, in TR 21.905 [1].
# 4 Architectural Assumption
The solutions defined in this study will focus on voice service.
# 5 Key Issues
## 5.1 Key Issue 1: RAN awareness of the information to determine radio
coverage border for the dedicated service
### 5.1.1 Description
RAN at the moment is not able to have the sufficient information e.g. codec
configuration to perform optimized HO for VoLTE and consequently VoLTE call
could be handed over to 2/3G CS unnecessarily via SRVCC HO though the VoLTE
call can survive LTE weak coverage.
This problem also applies to multi-sessions using different codec for the same
UE simultaneously.
The key issue is how to identify the information needed by RAN from
architecture point of view to make optimized HO decision for VoLTE, and how to
provide RAN with this information.
# 6 Solutions
## 6.1 Solution for key issue #1: Indicating a new IE along with QoS rule from
PCRF to eNB
### 6.1.1 Description
The eNB is capable of interpreting the payload of the new IE (e.g. Robustness
Indication, Bias factor, RSRP, CODEC and related mode, etc.) to adapt SRVCC HO
threshold.
During voice session setup, PCRF knows from IMS network the CODEC information
and is aware whether the two session endpoints are able to adapt to the most
\"robust\" codec mode from the negotiated codec mode set. Based from IMS
network, based on the CODEC information, and the indication on whether the two
session endpoints are able to adapt to the most \"robust\" codec mode from the
negotiated codec mode set PCRF determines the Max PLR in UL and DL directions
and provides it to the PCEF and then PCEF further sends it to the eNB.
Max PLR in UL and DL directions is an integer-valued parameter that indicates
the maximum Packet Loss Rate that the specific codec mode is able to
experience without degrading the voice quality. An example could be that codec
mode 1 support Max PLR 1%, codec mode 2 Max PLR 2% etc.
If there are multiple voice sessions, for each session, the PCRF will derive a
value of the Max PLR (UL,DL) along with the QoS rule and send it to PCEF. In
case multiple VoLTE sessions share one EPS bearer (i.e. QCI=1 bearer), PCEF
determines the lowest Max PLR (UL,DL) related to these voice sessions and
sends it to eNB along with the QoS rule. PCEF will store the mapping between
the Max PLR( UL,DL) and the corresponding ongoing voice session and remove the
record for the corresponding voice session during voice session release and
dedicated EPS bearer modification procedure.
NOTE: How eNB determines the HO threshold based on these values are up to
operator\'s configuration (e.g. the eNB derives a higher or lower HO threshold
based on the values of Max PLR in UL and DL directions).
Example call flow during voice session setup is in following:
{width="5.870138888888889in" height="3.2666666666666666in"}
Figure 6.1.1: Indicating the new IE from PCRF to eNB during voice session
setup
1\. During the IMS voice session setup procedure, IMS network element (i.e.
P-CSCF) sends the CODEC information to the PCRF in AA-Request message as
defined in TS 29.214 [2]. IMS also indicates whether the two session endpoints
are able to adapt to the most \"robust\" codec mode from the negotiated codec
mode set.
2\. Based on the CODEC information, and the indication whether the two session
endpoints are able to adapt to the most \"robust\" codec mode from the
negotiated codec mode set, the PCRF determines the value of Max PLR (UL, DL)
and sends it to the PGW/PCEF along with QoS rule in the IP-CAN Session
Modification message.
NOTE: How the PCRF derives the Max PLR in UL and DL directions is based on
local policy, but some possible configuration could be that if PCRF receive an
indicator from P-CSCF on Rx that the two endpoints are able to adapt to the
most robust codec mode from the set, then it sets the Max PLR (UL, DL)
corresponding to the most robust codec mode of the negotiated set in each
direction. If PCRF does not receive an indicator from P-CSCF on Rx that the
two endpoints are able to adapt to the most robust codec mode from the set,
then either does not provide Max PLR parameter or provides a Max PLR
corresponding to the least robust codec mode of the negotiated set in each
direction.
3\. Then PGW/PCEF sends a Create Bearer Request message to SGW including the
Max PLR (UL, DL) along with the QoS rule.
4\. SGW further sends a Create Bearer Request message to MME including the Max
PLR (UL, DL) along with the QoS rule.
5\. MME further sends the Max PLR (UL, DL) along with the QoS rule to eNB in
the Bearer Setup Request/Session Management Request message. The eNB stores
the Max PLR (UL, DL) for this UE\'s voice session, then based on its
configuration and the received IE, eNB decides the robustness of the session
and adapts the threshold for SRVCC HO.
6\. The eNB sends a RRC Connection Reconfiguration message to UE.
7\. UE responds with a RRC Connection Reconfiguration Complete message to eNB.
8\. The eNB responds with a Bearer Setup Response to MME.
9\. The UE NAS layer builds a Session Management Response including EPS Bearer
Identity. The UE then sends a Direct Transfer (Session Management Response)
message to the eNB.
10\. The eNB sends an Uplink NAS Transport (Session Management Response)
message to the MME.
11\. MME responds with a Create Bearer Response message to SGW.
12\. SGW responds with a Create Bearer Response message to PGW/PCEF.
13\. PGW/PCEF responds with an IP-CAN Session Modification Response message to
PCRF.
14\. PCRF responds with an AA-Answer message to IMS network element.
### 6.1.2 Impacts on existing nodes and functionality
PCRF:
PCRF may determine the value of the Max PLR along with the QoS rule based on
the information possibly received over Rx interface (see P-CSCF impacts)during
voice session setup or modification procedure and sends it to PGW/PCEF.
PGW/PCEF:
In case multiple VoLTE sessions share one EPS bearer (i.e. QCI=1 bearer), PCEF
determines only one Max PLR (UL, DL) related to these voice sessions and sends
it to eNB along with the QoS rule.
PCEF will store the mapping between the Max PLR (UL, DL) and the corresponding
ongoing voice session and remove the record for the corresponding voice
session during voice session release and dedicated EPS bearer modification
procedure.
PGW/PCEF needs to forward the Max PLR (UL, DL) to SGW.
SGW:
SGW needs to forward the Max PLR (UL, DL) to the MME.
MME:
MME needs to forward the Max PLR (UL, DL) to eNB.
eNB:
The eNB needs to be capable of interpreting the payload of the Max PLR (UL,
DL)and determining to adapt SRVCC HO threshold based on the received Max PLR
(UL, DL)mapped to the voice session EPS bearer (i.e. QCI=1 bearer).
P-CSCF
P-CSCF on Rx needs to indicate to PCRF that the two endpoints are able to
adapt to the most robust codec mode from the set, then it sets the Max PLR
(UL, DL) corresponding to the most robust codec mode of the negotiated set in
each direction.
### 6.1.3 Solution Evaluation
This solution has no impact to UE and IMS system, and it provides a means to
avoid/minimize the possibility of doing (v)SRVCC HO without incurring
signalling overload for LTE network.
In order for P-CSCF to indicate on Rx that the two endpoints are able to adapt
to the most robust codec mode from the codec mode set, and set the Max PLR
(UL, DL) corresponding to the most robust codec mode of the negotiated set in
each direction, it requires some signalling at SIP session negotiation.
Details of that will be defined by SA WG4.
## 6.2 Solution for key issue #1: UE provided Robustness Index (RI)
### 6.2.1 Description
This solution is based on a \"robustness index\" (RI), which the eNB uses to
control the decision for handover from PS to CS (e.g. maps to a specific
threshold). The RI reflects a specific fault-tolerance and can take on one of
the following values; \"normal\", \"medium\", \"high\", and \"extreme high\".
Prior to Attach, the HPLMN e.g. using OMA DM may provision a UE with a mapping
of codecs & modes to RI values. This enables the UE to prioritise codecs in
the SDP offer/answer and to support reporting of RI as further described below
(if further specified by SA WG4).
The UE, based on the codec or codec mode it is currently using, determines the
corresponding RI and sends the RI to the eNB. The eNB then applies the
received RI as input for PS to CS handover control
The UE sends an updated RI to the eNB, if the UE detects that the RI value
needs to be changed, i.e. because the codec mode has changed, like from EVS-
CAM (Channel-Aware Mode) to EVS-IO (AMR-WB Inter-Operable).The mapping by the
UE from a codec or codec mode to a specific RI is in general codec dependent.
SA WG4 shall decide on and standardize the mapping for different codecs and
codec modes.
The usage by the eNB of the RI for controlling the decision for PS to CS
handover, for example, mapping from one or multiple RIs to a specific
threshold in the NB, is operator specific and not subject to standardization.
In this solution, the UE may discover, if the access network supports RI. The
UE may also indicate at initial attachment to the eNB, if it supports the
feature (lack of an indication by the UE is an implicit lack of support). If
either the UE or the LTE access network does not provide such support, then
legacy handling is assumed by both the UE and eNB.
For a UE engaged in multiple sessions, the above applies to the latest active
session.
If at any point, SRVCC is invoked then existing defined procedures shall apply
to transfer the latest active session and the latest session on hold. Finally,
SA WG4, and pertinent RAN groups shall validate and verify the correctness of
the proposed solution.
### 6.2.2 Impacts on existing nodes and functionality
The following nodes are impacted:
UE:
The UE has to support the RI, map the used codec or codec mode to the
corresponding RI and has to send the RI to the eNB and update the RI to eNB,
if the codec mode needs to be changed. The UE has to also discover, if the eNB
supports the RI feature, and it also has to provide its support at initial
attach.
eNB
The eNB has to be configured with mapping of RIs to thresholds for PS to CS
handover control. The eNB has to process the received RI, map it to the
configured PS to CS handover threshold, and apply the applicable PS to CS
handover threshold. The eNB has to also indicate to the UE its support to the
RI feature.
### 6.2.3 Solution Evaluation
Editor\'s note: Use this clause for evaluation at solution level.
## 6.3 Solution for key issue #1: Network provided Robustness Index (RI)
### 6.3.1 Description
This solution is based on the IMS network sending to the eNB pertinent
information during session setup, that enables the eNB to detect the received
codec configuration and enables the eNB to map it to an appropriate SRVCC
threshold that is configured in the eNB for the detected codec configuration.
The solution also includes sending pertinent information to the originating
and terminating UE during session setup to ensure alignment between them as
well as alignment with eNB.
SA WG4 and the pertinent RAN groups must validate and verify the correctness
of the solution.
**Information Exchanged between IMS and eNB**
The IMS network is configured with appropriate Robustness Index (RI) that maps
to different codec configurations. The RI reflects a specific fault-tolerance
of the running application and can take on one of the following values;
\"normal\", \"medium\", \"high\", and \"extreme high\". Each RI value maps to
a specific SRVCC threshold that is used by the eNB to trigger SRVCC.
During session setup and once a codec is selected, the eNB receives from IMS
the following information:
\- A media detection policy that allows the eNB to map the incoming media flow
to a specific RI. The policy must unambiguously distinguish all potential
codec configurations. However more than one codec configuration can map to the
same RI. The detection policy to be returned to eNB is dependent on the
selected codec during session negotiation.
As stated before, the mapping from a codec configuration to a specific RI is
in general codec dependent. SA WG4 shall decide on and standardize the mapping
for different codec configurations. This mapping is pre-configured in IMS and
used for the creation of the detected policy sent to the eNB.
Finally, eNB uses the RI for PS to CS handover control (for example, eNB may
map the RI corresponding to the incoming detected media flow to a specific
SRVCC threshold. This mapping is pre-configured in the eNB and is operator
specific and not subject to standardization).
The P-CSCF or the PCRF can be configured with the above information sent to
eNB during the regular IMS session set up procedure.
In this solution the UE may discover if the access network supports dynamic
SRVCC threshold. The UE may also indicate at initial attachment to the LTE if
it supports the feature (lack of an indication by the UE is an implicit lack
of support). If either the UE or the LTE access network does not provide such
support, then legacy handling is assumed by both the UE and eNB.
The IMS network will be aware that a UE supports the above procedure through
the inclusion of a new media feature tag to that effect at IMS registration.
The UE includes such a feature tag if it discovers at attachment that the
feature is supported.
**Information Exchanged between IMS and UE**
Prior to Attach, the HPLMN e.g. using OMA DM may provision a UE with a mapping
of codecs & modes to RI values. This enables the UE to prioritise codecs in
the SDP offer/answer (if further specified by SA WG4).
During the SDP offer/answer exchange the UE receives a priority corresponding
to a codec configuration when 2 or more codec configurations have the same RI
for the selected codec. This enables the UE to prioritize one codec
configuration over another if radio conditions or the remote UE necessitates
using one of these codec configurations.
The next 2 call flows depict an IMS session set up, where impacted
procedures/messages are and highlight in red.
{width="6.6875in" height="3.9159722222222224in"}
Figure 1: UE attachment and IMS session setup (1 of 2)
{width="6.688194444444444in" height="4.23125in"}
Figure 2: UE attachment and IMS session setup (2 of 2)
**Illustrative Example Scenario**
The following example applies the above steps to enable a better understanding
of the solution. The example uses the P-CSCF as the IMS node configured with
the needed information.
During the SDP negotiation, the SDP offer (according to TS 26.445 [3]) shall
map the codec(s) offered to dynamic RTP payload types (PT). This mapping to a
PT includes the a=rtpmap and a=fmtp lines which include all available
information about the codec and mode offered in the SDP offer.
From the SDP negotiation, the P-CSCF knows that EVS codec is selected and it
knows which PT is used for Channel Aware (CA) mode and which PT is used for
non-CA. For example:
From an SDP negotiation including the following codec information:
a=rtpmap:96 EVS/16000/1
a=fmtp:96 br=5.9-24.4; bw=nb-swb; ch-aw-recv=3; max-red=220
The P-CSCF can derive that CA-EVS has a dynamically allocated payload type of
96.
From an SDP negotiation including the following codec information:
a=rtpmap:96 EVS/16000/1
a=fmtp:96 br=5.9-24.4; bw=nb-swb; max-red=220
The P-CSCF can derive that non CA-EVS has a dynamically allocated payload type
of 97.
Let\'s also assume that the P-CSCF is pre-configured with the following
information for the related priority since both codec configurations are
possible to use under same radio conditions, for example:
CA- EVS=96 \ priority=1
Non CA-EVS=97 \ priority=2
As mentioned before, the priority is used to indicate to the UE which codec
configuration takes precedence in case either of them is suitable under
specific circumstances.
The P-CSCF also creates real-time, the following media detection policy
mapping the negotiated PT to a specific RI to send it to eNB:
PT=96 \ RI=4
PT=97 \ RI=3
This is based on the negotiated PT for both CA-EVS (96) and non-CA EVS (97)
codec configurations. As mentioned before SA WG4 shall decide on and
standardize the mapping for different codec configurations.
The eNB is also pre-configured with the SRVCC thresholds to apply for each RI.
RI 3 \ Radio Conditions set 1
RI 4 \ Radio Conditions set 2
So if eNB detects PT 96 (in the PT field of the RTP fixed header as defined in
RFC 3550) in the incoming stream it applies RAN conditions set 1 for
activating SRVCC; if it detects PT 97 it applies RAN conditions set 2.
**Roaming**
For S8HR if the visited domain does not support this procedure then this
should not cause any interworking problems even if the home IMS supports the
feature.
If the visited domain supports the feature but the home IMS does not support
this feature, then the visited domain should not indicate support to the UE.
This information can be configured in MME per visited domain.
**Limitations of the solution**
This solution does not work if encryption is used since eNB cannot detect the
media.
### 6.3.2 Impacts on existing nodes and functionality
The following nodes are impacted. It is assumed in here that the P-CSCF is the
IMS node communicating the needed information with eNB and UE.
**UE:**
The UE has to support the received priority corresponding to similar codec
configurations and apply the received priority when needed. The UE has to also
discover if the eNB supports the dynamic SRVCC threshold feature, and has to
also include its support for the feature at initial attachment.
**P-CSCF**
The P-CSCF is pre-configured with the mapping from codec configuration to RI,
and priority, where applicable, to provide pertinent information as described
above to the eNB and UE during SDPoffer/answer negotiation and session setup.
The P-CSCF creates the media detection policy based on the SDP Offer/answer
negotiation and sends the applicable policy to the eNB. The P-CSCF exchanges
the information with UE via the SDP offer/answer. The P-CSCF passes the media
detection policy, and other pertinent information to the eNB via the PCRF.
**PCRF**
The PCRF passes the received information transparently to the eNB.
**eNB**
The eNB has to be configured with the SRVCC thresholds bound to various RIs.
The eNB has to use the received media detection policy (e.g. PT, packet size)
to detect the codec configuration for the media flow, locate the corresponding
RI, map the RI to the configured SRVCC threshold, and apply the applicable
SRVCC threshold.
### 6.3.3 Solution Evaluation
Editor\'s note: Use this section for evaluation at solution level.
# 7 Overall Evaluation
Editor\'s note: This clause will provide evaluation of different solutions.
The main difference with solution 6.3 is that solution 6.3 allows the RAN to
perform different handover set points even when the UE/MGW is not guaranteed
to adapt to the most robust codec mode.
Solution 6.2 is relying on UE AS signalling but this would rely on the UE to
determine the \"Max PLR (UL,DL)\" without any operator/network control. The
details also which AS protocol to use are not described.
It is therefore proposed, from SA2 prospective, to conclude the study agreeing
on solution 6.1. However normative work will proceed when a final confirmation
is received from RAN2 to ensure a viable e2e solution.
The procedure for P-CSCF to indicate on Rx that the two endpoints are able to
adapt to the most robust codec mode from the codec mode set has dependencies
on SA WG4 work and will be completed after this work concludes.
# 8 Conclusions
Editor\'s note: This clause is intended to list conclusions that have been
agreed during the course of the study item activities. This should also
capture the guiding principles and documentation approach for creating CRs to
normative specifications within the responsibility of SA WG2.
It is proposed to adopt solution 6.1.
#