# Foreword
This Technical Report has been produced by the 3rd Generation Partnership
Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document is the Technical Report for the study item \"Study on
architecture enhancements to ProSe UE-to-Network Relay\". Its objective is to
study and evaluate potential architecture enhancements needed to support the
connection of an Evolved ProSe Remote UE with UICC with the network via an
Evolved ProSe UE-to-Network Relay using E-UTRA (in coverage, in enhanced
coverage or out of coverage) or Non-3GPP access technologies (enhancements to
Non-3GPP access technologies are not part of this study).
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 22.278: \"Service requirements for the Evolved Packet System
(EPS)\".
[3] 3GPP TR 36.746: \"Study on further enhancements to LTE Device to Device
(D2D), User Equipment (UE) to network relays for Internet of Things (IoT) and
wearables\".
[4] 3GPP TS 23.401: \"General Packet Radio Service (GPRS) enhancements for
Evolved Universal Terrestrial Radio Access Network (E-UTRAN) access\".
[5] 3GPP TS 36.413: \"Evolved Universal Terrestrial Radio Access Network
(E-UTRAN); S1 Application Protocol (S1AP)\".
[6] 3GPP TS 23.303: \"Proximity-based services (ProSe); Stage 2\".
[7] 3GPP TS 24.334: \"Proximity-services (ProSe) User Equipment (UE) to ProSe
function protocol aspects; Stage 3\".
[8] 3GPP TS 23.285: \"Architecture enhancements for V2X services\".
[9] 3GPP TS 33.303: \"Proximity-based Services (ProSe); Security aspects\".
[10] 3GPP TS 32.251: \"Telecommunication management; Charging management;
Packet Switched (PS) domain charging\".
[11] 3GPP TS 23.703: \"Study on architecture enhancements to support
Proximity-based Services (ProSe)\".
[12] 3GPP TS 36.300: \"Evolved Universal Terrestrial Radio Access (E-UTRA) and
Evolved Universal Terrestrial Radio Access Network (E-UTRAN); Overall
description; Stage 2\".
# 3 Definitions, symbols and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
TR 21.905 [1] and the following apply. A term defined in the present document
takes precedence over the definition of the same term, if any, in TR 21.905
[1].
**eRelay-UE:** a Layer 2 relay in which a UE supports Indirect 3GPP
Communication between an eRemote-UE and the 3GPP network, using E-UTRA, WLAN
or Bluetooth between the eRemote-UE and the relay.
**eRemote-UE:** a UE that is connected to a network using an Indirect 3GPP
Communication.
**Indirect 3GPP Communication:** The signalling and communication between a UE
and 3GPP network, where there is an eRelay-UE between the eRemote-UE and the
3GPP network.
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in TR 21.905
[1] apply. An abbreviation defined in the present document takes precedence
over the definition of the same abbreviation, if any, in TR 21.905 [1].
# 4 Architectural considerations
## 4.1 Architectural assumptions and requirements
The following architecture assumptions are made for this study item:
\- The eRelay-UE is a Layer 2 relay and the eRemote-UE is visible to the
network.
\- The eNB terminates the S1-MME and S1-U interfaces of the eRemote-UE.
\- The NAS signalling from the eRemote-UE is sent to MME using an Indirect
3GPP Communication via an eRelay-UE.
\- The PC5 user plane and LTE-Uu user plane of eRelay-UE are used to transport
user data between eRemote-UE and core network.
\- This study does not impact Rel-13 ProSe UE-to-Network Relay operation.
\- This study does not address session continuity when
\- The eRemote-UE switches between indirect 3GPP communications via a Layer 2
relay and a Layer 3 relay.
\- The eRemote-UE switches an indirect 3GPP connection between eRelay-UEs.
\- An eRelay-UE, which supports only Layer 2, does not serve Remote UEs.
\- A ProSe UE-to-Network Relay does not serve eRemote-UEs.
NOTE: UE implementations may include both eRelay-UEs and ProSe UE-to-Network
Relays.
\- The eRemote-UE has its own PDN Connections to the network handled by its
own NAS signalling.
\- The eRelay-UE is in ECM-CONNECTED state when any eRemote-UE(s) served by
this eRelay-UE is in ECM-CONNECTED state.
\- The eRemote-UE\'s E-RAB part of the EPS Bearer is adapted for relaying as
defined in TR 36.746 [3].
\- The discovery method, i.e. via 3GPP or Non-3GPP access, the eRemote-UE uses
to discover an eRelay-UE is up to UE implementation.
NOTE: No enhancement for non-3GPP access is assumed for this study.
\- It is assumed that CIoT EPS Optimizations are supported since the NAS is
terminated in the eRemote-UE it is transparent to eRelay-UE.
Editor\'s note: Pending RAN\'s decision, impacts to support CIoT EPS
Optimizations at system level are FFS.
The architecture needs to meet the following requirements:
\- The eRelay-UE provides support for both public safety and commercial
scenarios and for regulatory requirements.
\- Support the scenarios where the eRemote-UE is in or out of the E-UTRAN
coverage.
\- Support the scenarios where the eRemote-UE and eRelay-UE D2D connection is
via a non-3GPP access.
## 4.2 Control and user plane stacks
### 4.2.0 General
The following clauses describe the control plane and user plane protocol
stacks for supporting Layer 2 evolved UE-to-Network Relay UE, both in case of
3GPP access and non-3GPP access.
Editor\'s note: The details of the protocol stack for PC5 signalling is FFS.
### 4.2.1 Control Plane
#### 4.2.1.1 Control plane protocol stack in case of 3GPP access
Figure 4.2.1.1-1: Control plane when PC5 is used
Editor\'s note: Whether an adaptation layer is needed for PC5 depends on the
decision of RAN WG2 and will be updated later.
#### 4.2.1.2 Control plane protocol stack in case of non-3GPP access
Figure 4.2.1.2-1: Control plane when non-3GPP is used
### 4.2.2 User Plane
#### 4.2.2.1 User plane protocol stack in case of 3GPP access
Figure 4.2.2.1-1: User plane when PC5 is used
Editor\'s note: Whether an adaptation layer is needed for PC5 depends on the
decision of RAN WG2 and will be updated later.
#### 4.2.2.2 User plane protocol stack in case of non-3GPP access
Figure 4.2.2.2-1: User plane when non-3GPP is used
# 5 Key issues
## 5.1 Key Issue 1: Authentication and Authorisation for Indirect 3GPP
Communication
### 5.1.1 General description
Based on the authentication and authorisation requirements on indirect 3GPP
communication as specified in TS 22.278 [2], when an eRemote-UE accesses the
network indirectly via an eRelay-UE, the following issues shall be considered:
\- How does the network authorise whether a UE can act as an eRelay-UE?
\- How does the network authorise whether the eRemote-UE can access the
network through an eRelay-UE?
\- How does the network authenticate the eRemote-UE through an eRelay-UE
(including the cases eRemote-UE attaches to network via eRelay-UE, as well as
UE is already authenticated by the network via Uu using existing mechanism and
then switches to eRelay-UE path)?
NOTE 1: The eRelay-UE is a Layer-2 relay, thus the network shall establish and
maintain the contexts of eRemote-UE, including NAS context, AS context, and
other contexts in network entities.
NOTE 2: Bullet 3 is related to authentication and may require SA WG3 input
depending on the solution.
## 5.2 Key Issue 2: eRelay-UE Discovery and Selection
### 5.2.1 General description
To satisfy the requirements for the eRelay-UE Discovery and Selection the
following aspects need to be studied:
\- Whether and how open discovery (e.g. without trust relationship) and
restricted discovery (e.g. with trust relationship) can be supported;
\- Whether and how Model A and Model B discovery can be supported;
\- Which parameters should be used for eRelay-UE Discovery;
\- Which parameters should be configured in the eRemote-UE and eRelay-UE in
order to support eRelay-UE Discovery and Selection;
\- Whether and how prior association between eRemote-UE and eRelay-UE can
enhance the discovery and selection.
## 5.3 Key Issue 3: Enhancements to Connection Setup between an eRemote-UE and
an eRelay-UE
### 5.3.1 General description
Fast connection setup between an eRelay-UE and an eRemote-UE is part of the
service requirements, and pairing has been suggested as a mean to achieve fast
connection setup. When developing solutions for fast connection setup the
following should be considered:
\- Whether and how to enhance the connection setup, with or without prior
association.
\- Whether the association between the eRemote-UE and eRelay-UE is provided
with the aid of EPC.
\- Whether prior association is only used for private Relay Networks i.e. a
network that consists of devices that has a specific trust relation with each
other (e.g. same owner\'s Smartphone and Smartwatch, or a group of UEs
belonging to same company).
NOTE: The term \"association\" replaces the SA1 term \"pairing\" in the
service requirements, since this is SA WG2 understanding of the meaning of
\"pairing\".
Editor\'s note: As secure communication between eRemote-UE and eNB can be
achieved with PDCP, whether the secure communication over PC5 (signalling,
data or both) is still needed should be decided by SA WG3.
## 5.4 Key Issue 4: EPS Bearer handling for Indirect 3GPP Communication
### 5.4.1 General description
To handle EPS bearers for indirect 3GPP communication, the following key
aspects need to be addressed:
\- How to differentiate and enforce QoS rules for both dedicated bearers (non-
GBR or GBR) and default bearer of a PDN connection of the eRemote-UE.
\- How to apply admission control for the bearers of the eRemote-UE,
especially how to take ARP assigned to these bearers into consideration?
\- Determine if existing QoS parameters over PC5 are appropriate for
supporting QoS of the bearers of the eRemote-UE (e.g. what is the role of PPPP
between eRelay-UE and eRemote-UE, and what is the relationship with QCI?).
\- Determine if there is any impact toward PCC for Remote UE authorisation and
policy decision (and corresponding solution).
## 5.5 Key Issue 5: Service Continuity
### 5.5.1 General description
To achieve battery efficiency and handle the change of LTE-Uu radio (e.g., due
to mobility, RAT change to GERAN/UTRAN, or loss of E-UTRAN coverage of eRelay-
UE), the eRemote-UE should be able to support the change from a direct path to
an indirect path to the network, and vice-versa (including eRemote-UE and
eRelay-UE under the same eNB or different eNBs). The following aspect needs to
be studied:
\- How to guarantee service continuity for an eRemote-UE switching between a
direct path and an indirect path.
When a set of eRemote-UEs access to the network via an eRelay-UE and the
eRelay-UE does intra-E-UTRAN handover, the following aspect needs to be
studied:
\- How to guarantee service continuity for the set of eRemote-UEs handed over
to another eNB together with the eRelay-UE.
## 5.6 Key Issue 6: Idle Mode Operation
### 5.6.1 General description
This key issue is related to the reachability of eRemote-UEs in ECM idle mode
based on the corresponding (and ongoing) RAN WG2\'s work on paging concept via
eRelay-UE. Supporting the concept of eRemote-UE in ECM_idle and paging the
eRemote-UE via the eRelay-UE provides several benefits (e.g. power
consumption, reachability in extended coverage and out-of-coverage), but can
also create complexity in the CN. To minimize CN impact the following aspects
needs to be studied.
\- Whether and how the eRemote-UE and eRelay-UE ECM idle state and idle mode
behaviours are impacted compared to \"normal UE\" ECM idle state.
\- Whether any linkage between eRemote-UE and eRelay-UE contexts is needed in
the MMEs, and, if need, how? Including any aspects of various timers (e.g.,
TAU timers, inactivity timers) and paging area.
\- Investigating the system impact of the RAN WG2 assumption that the eRemote-
UE and eRelay-UE are \"linked\".
Editor\'s note: The RAN WG2 assumption about \"linked\" below needs be
validated by SA WG2. As captured in TR 36.746 [3], \"Linked\" means that the
short range link is setup between the evolved ProSe Remote UE and the evolved
ProSe UE-to-Network Relay UE and both UEs can exchange data in any direction.
For LTE sidelink, \"linked\" state is equivalent to state of PC5 connection
established.
\- Study and evaluate the system impact by comparing solutions supporting the
various paging alternatives proposed by RAN WG2, including when the eRelay-UE
is in ECM idle or ECM connected state:
\- How the eRemote-UE\'s identities are made visible to the eRelay-UE.
\- Whether and how eRemote-UE idle mode DRX/eDRX negotiated scheme needs to be
shared with the eRelay-UE.
\- How the DDN for the eRemote-UE is handled by the MME when creating the
corresponding S1AP paging message.
## 5.7 Key Issue 7: Support for Emergency and eMPS call from eRemote-UE
### 5.7.1 General description
When an eRemote-UE is connected to an eRelay-UE, eRemote-UE may attempt to
make an eMPS or emergency call toward the network. This requires priority and
eMPS subscription handling. This key issue is to study how priority are to be
handled in an end-2-end fashion with eRemote-UE, eRelay-UE, and EPC.
# 6 Solutions
## 6.1 Solutions to Key Issue 1
### 6.1.1 Solution 1: Subscription based authorisation
#### 6.1.1.1 Description
This solution describes how to solve Key Issues 1:
Figure 6.1.1.1-1: Solution 1: subscription based authorisation
In this solution, the problem is divided into 4 areas:
A/B: Block A and B are all about provisioning and association aspect between
eRemote-UE and eRelay-UE. This will be addressed by solution toward Key Issue
2 and Key Issue 3. For the context of this solution being proposed for Key
Issue 1, they are outside the MME control.
C: Block C is just a generic procedure to allow UE to become a L2 Relay. This
can be done via subscription which MME gets from HSS. The main point is that
MME does not need to know who will be the eRemote-UE using this Relay. So
block C is independent from Block A/B/D.
D. Block D is when eRemote-UE is accessing the network via eRelay-UE. eNB
knows that this connection is via an eRelay-UE and therefore can include an
indication toward MME that this S1-MME is eRelay-UE associated. If this
connection is not allowed to be accessed via eRelay-UE then MME can reject the
service Request. The main point is that even when they are both associated, it
does not mean the network will allow the connection via eRelay-UE to be
established. This block is independent from A/B/C.
#### 6.1.1.2 Impact analysis
To authorise UE to act as Relay:
\- MME receives a subscription parameter from HSS to indicate whether UE is
allowed to act as eRelay-UE or not.
\- MME indicates to eNB whether UE is allowed to act as eRelay-UE in UE
initial context setup, UE Context Modification Procedure.
\- If eRelay-UE is in ECM-IDLE and receives a connecting from eRemote-UE to
setup an connection to the network, the eRelay-UE always start with Service
Request procedure to activate S1-MME for the eRelay first prior to handle the
NAS signalling from eRemote-UE. This is needed in order to allow the eNB to be
aware whether this UE can be an eRelay-UE via the UE context information and
authorisation from MME.
To allow network to authorise whether the eRemote-UE can access the network
through an eRelay-UE
\- eNB indicates to the MME that this connection is done via eRelay-UE. An
indication of \"connection via eRelay-UE\" is added in the corresponding S1-AP
procedure by eNB.
\- MME has UE subscription data from HSS, whether the eRemote-UE is allowed to
access EPS via eRelay-UE or not.
\- If subscription does not allow eRemote-UE to access the network via eRelay-
UE then MME rejects the SR/TAU/Attach with a NAS cause code to enforce
eRemote-UE will not try again.
#### 6.1.1.3 Evaluation
### 6.1.2 Solution 2: Authorisation of eRelay-UE and eRemote-UE
#### 6.1.2.1 Description
##### 6.1.2.1.1 General
This solution addresses Key Issue 1.
##### 6.1.2.1.2 Authorisation of an eRelay-UE to be a layer 2 relay
The eRelay-UE follows the currently defined attach procedure in clause 5.3.2.1
of TS 23.401 [4], normal authentication and authorisation procedure happens
during attach procedure.
In the Attach Request message, the eRelay-UE indicates its layer 2 relay
capability as part of UE Network Capability, MME stores the capability
indication.
From the downloaded subscriber profile, MME will be provided by HSS the layer
2 relay authorisation information (i.e. list of IMSIs of eRemote-UEs allowed
to access to LTE network via this eRelay-UE, or indication of any eRemote-UE
are allowed to access LTE network via this eRelay-UE) and checks if the
eRelay-UE is authorised to be a layer 2 relay, and further sends the
authorisation to eNB as following:
\- If the UE is enabled for layer 2 relay and also authorised to be a layer 2
relay based on the subscription data, the MME shall include indication of
layer 2 relay authorised in the \"ProSe authorised\" indication in the S1 AP
Initial Context Setup Request as defined in TS 36.413 [5].
\- Otherwise, MME shall not include indication of layer 2 relay authorised in
the \"ProSe authorised\" in the S1 AP Initial Context Setup Request as defined
in TS 36.413 [5].
NOTE: Dynamic control for the list of authorized eRemote-UE accessing LTE
network via eRelay-UE based on the subscription information from HSS is not
supported by this solution.
##### 6.1.2.1.3 Authorisation of an eRemote-UE to access the LTE network
through a layer 2 relay UE
This section will address how to enable the eRemote-UE to access LTE network
via an eRelay-UE. Following scenarios are addressed:
\- When the eRemote-UE has not attached to the LTE network using direct 3GPP
communication, Attach procedure will be used as shown in clause 6.1.2.1.3.1.
\- When the eRemote-UE has attached to the LTE network and is in idle mode,
both TAU and Service Request procedure can be used as shown in clause
6.1.2.1.3.2 and clause 6.1.2.1.3.3 respectively.
\- When the eRemote-UE has attached to the LTE network and is in active mode,
the path switch procedure from direct 3GPP communication to in direct 3GPP
communication as shown in solution for Key Issue 5 in section 6.5.1 will be
used.
##### 6.1.2.1.3.1 Authorisation of an eRemote-UE accessing eRelay-UE during
Attach Procedure {#authorisation-of-an-eremote-ue-accessing-erelay-ue-during-
attach-procedure .H6}
Figure 6.1.2.1.3.1-1: During Attach Procedure
1\. PC5 based eRelay-UE discovery and selection and PC5 connection
establishment.
2\. The eRemote-UE sends a PC5 Information Request message to the eRelay-UE.
The eRelay-UE responds with a PC5 Information Response message including the
GUTI of the eRelay-UE.
If eRelay-UE has not attached to LTE network when receiving PC5 Information
message, it will attach to the LTE network after step 2a, the authorisation
procedure for eRelay-UE will be done during this procedure as described in
clause 6.1.2.1.2. Step 2b happens after eRelay-UE\'s successful attach
procedure.
If the eRelay-UE has attached to LTE network but it is in idle mode when
receiving PC5 information message, it will trigger the Service Request
procedure to go into active mode after step 2a. The authorisation information
of eRelay-UE will be sent to eNB in the S1-AP message as described in Figure
5.3.4.1-1 of TS 23.401 [4]. Step 2b happens after eRelay-UE\'s Service Request
procedure.
3\. The eRemote-UE sends an initial Attach Request message to eNB via eRelay-
UE including the indication of Layer 2 access enabled and the GUTI of the
eRelay-UE.
4\. The eNB selects the MME for the eRemote-UE and forwards the Attach Request
message to the eRemote-UE\'s MME.
5a-8b. Same with steps from 3 to 6 in Figure 5.3.2.1-1 of TS 23.401 [4].
9\. The eRemote-UE\'s MME sends an Authorisation Request message to the
eRelay-UE\'s MME including the IMSI of the eRemote-UE, GUTI of the eRelay-UE
and layer 2 relay access enabled indication. The eRelay-UE\'s MME checks in
the eRelay-UE\'s MM Context whether this eRemote-UE is allowed to access the
LTE network via the eRelay-UE and responds with an Authorisation Response
message including Authorisation Result and eRelay-UE\'s eNB UE S1AP ID.
Editor\'s note: Whether there is any security threat for an eRelay-UE using an
eRemote-UE IMSI is depending on SA WG3 conclusion.
Editor\'s note: How to use the eRelay-UE\'s eNB UE S1AP ID is FFS.
10\. Same with steps 7 to 16 in Figure 5.3.2.1-1 of TS 23.401 [4].
11\. The eRemote-UE\'s MME sends an Initial Context Setup Request message to
the eNB including the indication of Layer 2 relay authorised and the eRelay-
UE\'s eNB UE S1AP ID. The eNB stores the authorisation of the eRemote-UE
accessing LTE network via the eRelay-UE.
12-13. _RRCConnectionReconfiguration_ happens between the eNB and eRelay-UE.
14-15. _RRCConnectionReconfiguration_ happens between the eNB and the eRemote-
UE.
16\. Same with steps 20 to 26 in Figure 5.3.2.1-1 of TS 23.401 [4].
##### 6.1.2.1.3.2 Authorisation of an eRemote-UE accessing eRelay-UE during
TAU Procedure {#authorisation-of-an-eremote-ue-accessing-erelay-ue-during-tau-
procedure .H6}
Figure 6.1.2.1.3.2-1: During TAU Procedure with SGW change when eRemote-UE is
in IDLE mode
1\. PC5 based eRelay-UE discovery and selection and PC5 connection
establishment.
2\. The eRemote-UE sends a PC5 Information Request message to the eRelay-UE.
The eRelay-UE responds with a PC5 Information Response message including the
GUTI of the eRelay-UE.
If eRelay-UE has not attached to LTE network when receiving PC5 Information
message, it will attach to the LTE network after step 2a, the authorization
procedure for eRelay-UE will be done during this procedure as described in
clause 6.1.2.1.2. Step 2b happens after eRelay-UE\'s successful attach
procedure.
If the eRelay-UE has attached to LTE network but it is in idle mode when
receiving PC5 information message, it will trigger the Service Request
procedure to go into active mode after step 2a. The authorization information
of eRelay-UE will be sent to eNB in the S1-AP message as described in Figure
5.3.4.1-1 of TS 23.401 [4]. Step 2b happens after eRelay-UE\'s Service Request
procedure.
3-4. The eRemote-UE sends a NAS TAU Request via eRelay-UE to its new MME
including the indication of Layer 2 relay access enabled and GUTI of the
eRelay-UE.
5-7. Same with steps 4 to 7 in Figure 5.3.3.1-1 in TS 23.401 [4].
8\. The eRemote-UE\'s new MME sends an Authorization Request message to the
eRelay-UE\'s MME including the IMSI of the eRemote-UE, GUTI of the eRelay-UE
and Layer 2 relay access enabled indication. The eRelay-UE\'s MME checks in
the eRelay-UE\'s MM Context whether this eRemote-UE is allowed to access the
LTE network via the eRelay-UE and sends an Authorization Response message to
the eRemote-UE\'s new MME including the Authorization Result and eRelay-UE\'s
eNB UE S1AP ID.
When the eNB receives the eRelay-UE\'s eNB UE S1AP ID, it will know which
eRelay-UE the eRemote-UE is authorised to access via and corresponding EPS
bearers of the eRemote-UE will be mapped to eRelay-UE\'s subsequently
according to this information.
9\. Same with steps 8 to 21 in Figure 5.3.3.1-1 of TS 23.401 [4].
##### 6.1.2.1.3.3 Authorisation of an eRemote-UE accessing eRelay-UE during
Service Request Procedure {#authorisation-of-an-eremote-ue-accessing-erelay-
ue-during-service-request-procedure .H6}
Figure 6.1.2.1.3.3-1: During Service Request procedure
1\. PC5 based eRelay-UE discovery and selection and PC5 connection
establishment.
2\. The eRemote-UE sends a PC5 Information Request message to the eRelay-UE.
The eRelay-UE responds with a PC5 Information Response message including the
GUTI of the eRelay-UE.
If eRelay-UE has not attached to LTE network when receiving PC5 Information
message, it will attach to the LTE network after step 2a, the authorization
procedure for eRelay-UE will be done during this procedure as described in
clause 6.1.2.1.2. Step 2b happens after eRelay-UE\'s successful attach
procedure.
If the eRelay-UE has attached to LTE network but it is in idle mode when
receiving PC5 information message, it will trigger the Service Request
procedure to go into active mode after step 2a. The authorization information
of eRelay-UE will be sent to eNB in the S1-AP message as described in Figure
5.3.4.1-1 of TS 23.401 [4]. Step 2b happens after eRelay-UE\'s Service Request
procedure.
3-4. The eRemote-UE sends a NAS Service Request message via eRelay-UE to its
MME including the indication of Layer 2 relay access enabled and GUTI of the
eRelay-UE.
5\. Same with step 3 in Figure 5.3.4.1-1 of TS 23.401 [4].
6\. The eRemote-UE\'s new MME sends an Authorization Request message to the
eRelay-UE\'s MME including the IMSI of the eRemote-UE, GUTI of the eRelay-UE
and Layer 2 relay access enabled indication. The eRelay-UE\'s MME checks in
the eRelay-UE\'s MM Context whether this eRemote-UE is allowed to access the
LTE network via the eRelay-UE and sends an Authorization Response message to
the eRemote-UE\'s new MME including the Authorization Result, eRelay-UE\'s eNB
UE S1AP ID and eRelay-UE\'s MME ID.
7\. The eRemote-UE\'s MME sends an Initial Context Setup Request message to
the eNB including the indication of Layer 2 relay authorized and the eRelay-
UE\'s eNB UE S1AP ID. The eNB stores the authorization of the eRemote-UE
accessing LTE network via the eRelay-UE.
When the eNB receives the eRelay-UE\'s eNB UE S1AP ID, it will know which
eRelay-UE the eRemote-UE is authorised to access via and corresponding EPS
bearers of the eRemote-UE will be mapped to eRelay-UE\'s subsequently
according to this information.
8\. Same with steps 5-12 in Figure 5.3.4.1-1 of TS 23.401 [4].
#### 6.1.2.2 Impact analysis
eRemote-UE:
\- It needs to request GUTI of eRelay-UE;
\- It needs to include the indication of Layer 2 relay access enabled and GUTI
of the eRelay-UE in the NAS message (i.e. Attach Request, TAU Request and
Service Request).
eRelay-UE:
\- It needs to respond with its GUTI to the eRelay-UE.
eRemote-UE\'s MME:
\- It needs to check with the eRelay-UE\'s MME whether the eRemote-UE is
authorised to be served by the eRelay-UE;
\- It needs to send the eRemote-UE\'s authorisation information to the eNB.
eRelay-UE\'s MME:
\- It needs to send the eRelay-UE\'s authorisation information to the eNB;
\- It needs to check whether the eRemote-UE is allowed to access the eRelay-UE
and respond to the eRemote-UE\'s MME about the result and the related
information.
eNB:
\- It needs to store the authorization information of the eRelay-UE and
eRemote-UE.
#### 6.1.2.3 Evaluation
### 6.1.3 Solution 3: Authorisation for Indirect 3GPP Communication via MME
#### 6.1.3.1 Description
##### 6.1.3.1.1 General
This solution applies to key issue 1 on authorisation for Indirect 3GPP
Communication, specifically on how the network authorises an eRemote-UE
accessing the network via an eRelay-UE.
As the authorisation function resides in the core network, this solution
proposes that the MME performs authorisation functions when an eRemote-UE is
accessing to the network via a specific eRelay-UE. The following figure
depicts the detailed procedure.
##### 6.1.3.1.2 Option A: Two phase authorisation alternative
In this two phase authorisation approach, authorisation is performed before
the eRemote-UE can send NAS to the network.
Figure 6.1.3.1.2-1: Authorisation for the Indirect Communication
0\. Configuration information is provided for eRemote-UE and eRelay-UE.
1\. The eRemote-UE and the eRelay-UE perform PC5 discovery procedure based on
the solution for Key Issue 2.
2\. The eRemote-UE and the eRelay-UE initiate the establishment of the one-to-
one communication. The eRemote-UE identifier is included in the PC5
Communication Request message. If the eRemote-UE is already registered to the
network before, the eRemote-UE identifier could be the GUTI, otherwise it
could be the IMSI.
3\. If the eRelay-UE is in ECM-IDLE and receives a communication request from
an eRemote-UE, the eRelay-UE initiates the Service Request procedure to switch
to connected state firstly. If a UE is authorised to act as an eRelay-UE by
the MME, the authorisation information is sent to the eNB by the eRelay-UE
MME.
4\. The eRelay-UE sends its NAS Request message to eRelay-UE MME. The eRemote-
UE identifier is included in the NAS message and is used by the eRelay-UE MME
to perform authorisation between the eRemote-UE and the eRelay-UE.
Editor\'s note: Whether there is any security threat for an eRelay-UE using an
eRemote-UE IMSI is depending on SA WG3 conclusion.
5\. The eRelay-UE MME performs authorisation for the eRemote-UE and eRelay-UE.
The eRelay-UE MME checks whether the eRemote-UE is allowed to access network
via eRelay-UE and whether the eRemote-UE can access the network via the
specific eRelay-UE or specific type of eRelay-UEs (i.e., additionally
associated with a specific relay service code), based on the eRemote-UE IMSI,
eRelay-UE IMSI. The authorisation information may be retrieved from HSS or
ProSe Function.
If the eRemote-UE MME is different from eRelay-UE MME, then the eRemote-UE
GUTI can be used to find the eRemote-UE MME to get the corresponding IMSI. If
the eRemote-UE IMSI is provided in step 4, the eRemote-UE MME is not
contacted.
Editor\'s note: How the authentication for eRemote-UE is done is further
studied in SA WG3.
Editor\'s note: It is FFS whether the authorisation for eRemote-UE is done
only once, or for each time eRemote-UE goes from ECM-IDLE to ECM-CONNECT
state, the authorisation needs to be performed.
Editor\'s note: The details on how does the eRelay-UE MME get authorisation
information from HSS or ProSe Function is FFS.
6\. The eRelay-UE MME sends the NAS Response message to the eRelay-UE, the
authorisation information and security parameters are included in this step.
If the authorisation is successful, the eRelay-UE is allowed to provide access
to the eRemote-UE.
7\. The eRelay-UE sends the Communication Response message to the eRemote-UE
to inform the authorisation result. The PC5 security association is also
established based on the security parameters. By the successful establishment
of PC5 security association, it means the eRelay-UE has authenticated the
eRemote-UE successfully.
Editor\'s note: Whether PC5 PDCP security is needed depends on SA WG3
conclusion.
Editor\'s note: Whether there is a privacy issue with providing the
authorisation information to the eRemote-UE before doing any authentication
for this eRemote-UE is up to SA WG3.
8\. If the eRemote-UE is authorised to access the network via the specific
eRelay-UE, the eRemote-UE may initiate Attach/TAU/Service Request procedure.
The NAS message is included in the eRemote-UE\'s RRC message which is relayed
by eRelay-UE to the eNB. Since the eNB knows that the eRelay-UE is
authenticated and authorised, if it receives the eRemote-UE\'s RRC message
relayed from eRelay-UE, it can determine that the eRemote-UE has been
previously authenticated and authorised.
9\. The eNB sends the Initial UE message to the eRemote-UE MME. The eRemote-UE
MME shall perform the authentication of eRemote-UE, e.g. integrity
verification of the initial NAS message from eRemote-UE.
10\. The subsequent steps of Attach/TAU/SR procedures are performed.
11\. The eRemote-UE MME sends the S1-AP signalling message to the eNB.
12\. The eNB sends the RRC signalling message to the eRemote-UE via the
eRelay-UE.
##### 6.1.3.1.3 Option B: One phase authorisation alternative
In this one phase authorisation approach, authorisation is performed along
with the eRemote-UE sends the NAS message to the network.
Figure 6.1.3.1.3-1: Authorisation for the Indirect Communication
0\. Configuration information is provided for eRemote-UE and eRelay-UE.
1\. eRelay-UE attaches to the network. If a UE is authorised as an eRelay-UE
by MME, the authorisation information is sent to eNB by MME.
2\. eRemote-UE and eRelay-UE perform PC5 discovery procedure based on
solutions for Key Issue2.
3\. eRemote-UE sends Communication Request message to eRelay-UE, NAS message
from eRemote-UE is included in this step.
4\. eRelay-UE encapsulates the NAS message received in step 3 in its RRC
message.
5\. eNB sends the Initial UE message to the eRemote-UE MME, the eRelay-UE
identifier is included in the S1-AP message.
Editor\'s note: It is FFS what the eRelay-UE identifier is.
6\. eRemote-UE MME performs authorisation check based on eRemote-UE identifier
and eRelay-UE identifier.
Editor\'s note: How does the eRelay-UE MME get the authorisation information
is FFS.
7\. eRemote-UE MME sends the S1-AP message to eNB, the NAS response message is
included in this step.
8\. The NAS response message is sent to eRelay-UE via RRC signalling.
9\. The NAS response message is sent to eRemote-UE by eRelay-UE via PC5
Communication Response message.
#### 6.1.3.2 Impact analysis
**Option A**
eRemote-UE
\- needs to send eRemote-UE ID to eRelay-UE
eRelay-UE
\- needs to forward eRemote-UE\'s NAS messages
eNB
\- needs to verify that an eRemote-UE was previously authorised to use the
eRelay service
\- selects proper eRemote-UE MME based on eRemote-UE\'s identity
eRelay-UE MME
\- needs to authorise eRemote-UE for usage of specific eRelay-UE
#### 6.1.3.3 Evaluation
### 6.1.4 Solution 4: Dynamic Trust relationship establishment using ProSe
function/PC3
#### 6.1.4.1 Description
##### 6.1.4.1.1 General
The basic principles of trust relationship establishment between an eRemote-UE
and an eRelay-UE are as follows:
\- The ProSe Function in the HPLMN establishes the trust relationship for an
eRemote-UE and an eRelay-UE;
Depicted in Figure 6.1.4.1.1-1 is the eRelay-UE Context stored in the ProSe
Function after trust relationship establishment procedure, including eRemote-
UE ID who has the trust relationship with the eRelay-UE, IMSI and the validity
time of the trust relationship. Based on the trust relationship, the ProSe
Function can perform the authorisation when an eRemote-UE requires to access
to the network via the eRelay-UE.
Figure 6.1.4.1.1-1: eRelay-UE Context stored in the ProSe Function
##### 6.1.4.1.2 Trust relationship establishment procedure
Figure 6.1.4.1.2-1: Trust relationship establishment procedure
0\. The eRemote-UE discovers an eRelay-UE by using eRelay-UE discovery and
obtains the Layer-2 ID of the eRelay-UE (i.e., the eRelay-UE ID). The ProSe
function has a context associated for both the eRemote-UE and the eRelay-UE.
1\. The eRemote-UE sends a Bonding Request message (eRemote-UE ID, Requested
Timer) to the eRelay-UE. The eRemote-UE ID is set to the eProSe Discovery UE
ID of the eRemote-UE. The Requested Timer indicates how long the eRemote-UE
expects to bond with the eRelay-UE.
2\. The eRelay-UE responds with a Bonding Request Acknowledge message to the
eRemote-UE.
3\. If the eRelay-UE determines to provide the relay service for the eRemote-
UE, the eRelay-UE sends a Trust Relationship Establishment Request Message
(eRemote-UE ID, eRelay-UE ID, Requested Timer) to the ProSe Function in HPLMN.
The eRelay-UE ID is set to IMSI.
NOTE 1: How the eRelay-UE determines whether to provide the relay service for
the eRemote-UE is left to UE implementation, e.g. by OS layer interaction.
4\. The ProSe Function in HPLMN finds the eRemote-UE context and IMSI based on
the provided eRemote-UE ID and checks whether the eRelay-UE is authorised to
act as an eRelay-UE and the eRemote-UE is authorised to access the network
through an eRelay-UE. If the eRelay-UE and the eRemote-UE are both authorised,
the ProSe Function in HPLMN establishes the trust relationship between
eRemote-UE and eRelay-UE, and responds to the eRelay-UE with a Trust
Relationship Establishment Response (Validity Timer, eRemote-UE container,
cause) message. The Validity Timer indicates for how long the Trust
relationship between the eRelay-UE and eRemote-UE is going to be valid. This
response message should carry the eRemote-UE container. In the eRemote-UE
container, PC3 message for the eRemote-UE is included as described in step 5
below, which is transparent to eRelay-UE. If the ProSe Function fails to
authorise the trust relationship, it shall not include the eRemote-UE
container, and informs cause of the failure to eRelay-UE.
NOTE 2: To also handle the case where eRemote-UE is out of coverage, the
response from ProSe Function to eRemote-UE is sent via \"To-eRemote-UE
Container\" as part of step 4. The eRelay-UE then forward the \"eRemote-UE
Container\" to eRemote-UE over PC5.
Editor\'s note: The case which eRelay-UE and eRemote-UE are from different
HPLMN is FFS.
5\. The eRemote-UE receives the Trust Relationship establishment Notification
(eRelay-UE ID, Specific Relay Code, security parameter, Validity Timer)
message from the ProSe Function in HPLMN. The eRelay-UE ID is set to the
eProSe Discovery UE ID of eRelay-UE. The security parameter is used to
generate keys for protecting the connections between eRemote-UE and eRelay-UE.
The Specific Relay Code is allocated by the ProSe Function in the HPLMN for
restricted eRelay-UE Discovery and is associated with the eProSe Discovery UE
ID of eRelay-UE.
Editor\'s note: The security aspect of this solution will have to be evaluated
by SA WG3.
#### 6.1.4.2 Impact Analysis
#### 6.1.4.3 Evaluation
Editor\'s note: This clause will contain evaluation on the system impacts,
e.g., UE, access network and non-access network.
### 6.1.4B Solution 4B: Dynamic Trust relationship establishment for MME based
authorisation
#### 6.1.4B.1 Description
##### 6.1.4B.1.1 General
This solution addresses Key Issue 1. This solution is used to provide
information to MME for authorisation of the eRemote-UE to access to network
via an eRelay-UE and it is considered as a building block of Solution 6.1.3.
The basic principles of trust relationship establishment between an eRemote-UE
and an eRelay-UE are as follows:
\- The ProSe Function in the HPLMN establishes the trust relationship for an
eRemote-UE and an eRelay-UE;
\- The ProSe Function in the HPLMN updates the trust relationship to HSS as a
part of the eRelay-UE Subscriber context.
Depicted in Figure 6.1.4B.1.1-1 is the eRelay-UE Context stored in the ProSe
Function after trust relationship establishment procedure, including eRemote-
UE ID who has the trust relationship with the eRelay-UE and IMSI of the trust
relationship.
Figure 6.1.4B.1.1-1: eRelay-UE Context stored in the ProSe Function
To utilize the trust relationship to control the eRemote-UE access via a
specific eRelay-UE, the MME obtains it from the HSS, in which the trust
relationship from ProSe Function is stored as part of the subscription data.
Based on the trust relationship, the MME can perform the authorisation when an
eRemote-UE requires to access to the network via the specific eRelay-UE.
##### 6.1.4B.1.2 Trust relationship establishment procedure
Figure 6.1.4B.1.2-1: Trust relationship establishment procedure
0\. The eRemote-UE discovers an eRelay-UE by using eRelay Open Discovery
defined in Solution 6.2.1 and obtains the Layer-2 ID of the eRelay-UE.
1\. The eRemote-UE sends a Bonding Request message (eRemote-UE ID) to the
eRelay-UE. The eRemote-UE ID is set to the eProSe Discovery UE ID of the
eRemote-UE.
  1. If the eRelay-UE determines to provide the relay service for the eRemote-UE(e.g. user interaction), the eRelay-UE sends a Trust Relationship Establishment Request Message (eRemote-UE ID, eRelay-UE ID) to the ProSe Function in HPLMN. The eRelay-UE ID is set to IMSI.
NOTE 1: How the eRelay-UE determines whether to provide the relay service for
the eRemote-UE is left to UE implementation, e.g. by OS layer interaction.
3\. The ProSe Function in HPLMN checks whether the eRelay-UE is authorised to
act as an eRelay-UE and the eRemote-UE is authorised to access the network
through the eRelay-UE. If the eRelay-UE and the eRemote-UE are both
authorised, the ProSe Function in HPLMN establishes the trust relationship
between eRemote-UE and eRelay-UE, and responds to the eRelay-UE with a Trust
Relationship Establishment Response (To-eRemote-UE Container (eRelay-UE ID,
eRelay Specific Code, security parameter)) message.
To-eRemote-UE Container is used to transfer parameters between the eRemote-UE
and the ProSe Function, and is sent transparently through the eRelay-UE. The
eRelay-UE ID is set to the eProSe Discovery UE ID of eRelay-UE. The security
parameter is used to generate keys for protecting the connections between
eRemote-UE and eRelay-UE.
Editor\'s note: The case which eRelay-UE and eRemote-UE are from different
HPLMN is FFS.
4\. The eRemote-UE receives the Bonding Acknowledge (To-eRemote-UE Container)
message from the eRelay-UE.
NOTE 2: How to encrypt the To-eRemote-UE Container to eRemote-UE depends on SA
WG3.
5\. The ProSe Function in HPLMN sends Update ProSe Policy Data (IMSI, Pair of
eRemote-UE ID-IMSI) message to the HSS. IMSI is set to eRelay-UE\'s IMSI. The
pair of eRemote-UE ID-IMSI is derived from the eRemote-UE context. The HSS
adds a new entry or updates an entry in eRelay-UE\'s trust relationship list
for the eRemote-UE.
NOTE 3: Step 3 and Step 5 may be performed by the ProSe Function in HPLMN at
the same time.
6\. The HSS sends an Insert Subscriber Data (IMSI, Pair of eRemote-UE ID-IMSI)
message to the eRelay-UE MME.
7\. The eRelay-UE MME stores the trust relationship, i.e. the Pair of eRemote-
UE ID-IMSI in the eRelay-UE context. The MME acknowledges the Insert
Subscriber Data message by returning an Insert Subscriber Data Ack (IMSI)
message to the HSS.
The eRelay-UE MME performs authorisation based on the stored trust
relationship when eRemote-UE accesses the network via eRelay-UE as described
in solution 6.1.3.
#### 6.1.4B.2 Impact Analysis
#### 6.1.4B.3 Evaluation
Editor\'s note: This clause will contain evaluation on the system impacts,
e.g., UE, access network and non-access network.
### 6.1.5 Solution 5: Independent UE Authentication and Authorisation for
Indirect 3GPP Communication via MME
#### 6.1.5.1 Description
##### 6.1.5.1.1 General
This solution applies to Key Issue 1, specifically on how the network
authorises an eRelay-UE to act as a relay and authorises an eRemote-UE to
receive network service indirectly via the eRelay-UE.
Editor\'s note: It is FFS whether and how initial attached of the eRemote-UE
can be supported via indirect 3GPP communication. This depends partly on the
response from SA WG3 how UE identities can be shared with another UE.
As the authentication and authorisation functions resides in the core network,
this solution proposes that the MME and the ProSe Function perform the
authentication and authorisation functions of an eRemote-UE and eRelay-UE
independently when the eRemote-UE and eRelay-UE are in the E-UTRAN coverage.
##### 6.1.5.1.2 Independent Authorisation
In this authorisation approach, the eRelay-UE and the eRemote-UE
authorisations are performed independently according to legacy procedures in
TS 23.401 [4] and TS 23.303 [6] with changes described below before the
eRemote-UE can send a NAS message to the network.
Figure 6.1.5.1.2-1: Independent Authorisation for the Indirect Communication
1\. The eRelay-UE and the eRemote-UE (initial) attaches to the network
according to legacy attach procedures in TS 23.401 [4]. A UE context is
created in respective MME and a GUTI is assigned to the respected UE. The
Layer 2 relay authorisation information, ProSe Authorized IE, is sent from the
eRelay-UE\'s MME to the eNB during initial attach procedure.
2\. The eRelay-UE and the eRemote-UE performs service authorisation with the
ProSe Function using legacy procedures in TS 23.303 [6]. Service authorisation
for indirect 3GPP communication is provided. The ProSe Function will
furthermore explicitly provide permission and provide specific information
used to decrypt the restricted discovery message in step 3. This will enable
that only UEs that have specific trust relations will discover each other.
NOTE 1: This step can be omitted if the UE have already been (pre)provisioned
and (pre)authorised.
The subsequent steps in this solution shows the UE transitions when both
eRemote-UE and eRelay-UE has gone to idle mode after step 1 and 2 above. The
example shown in the figure is the Service Request, but can be other NAS
procedures e.g. Attach Request and TAU Request. The example intends to show
that the legacy functionality of the ProSe Authorized IE is reused.
3\. The eRemote-UE and eRelay-UE perform PC5 discovery procedure. The eRemote-
UE is in ECM_IDLE and the eRelay-UE can be in either ECM_IDLE or ECM_CONNECTED
(e.g., stayed in ECM_CONNECTED since step1).
4\. Triggered by upper layers the eRemote-UE initiate one-to-one communication
with the eRelay-UE, by sending an INDIRECT_COMMUNICATION_REQUEST to the
eRelay-UE.
NOTE 2: It is up to stage 3 to decide whether a new PC5 signalling message is
needed or not.
5\. Triggered by the request received from the eRemote-UE, the eRelay-UE sends
the Service Request message (eRelay-UE identity e.g. GUTI, S-TMSI) to eRelay-
UE\'s MME, requesting authorisation to perform indirect 3GPP communication
service with the role of L2-Relay. The NAS Request message is encapsulated in
a RRC message to the eNB. The eNB use the eRelay identity to derive the eRelay
MME identity and forwards the NAS message in a S1-MME control message.
NOTE 3: If the eRelay-UE is already in ECM_CONNECTED and is authorised to
perform eRelay service then step 5 to 8 can be omitted.
6\. The MME performs authentication of the eRelay-UE based on NAS message
validation and if needed the MME checks the subscription data.
7\. The MME sends an S1-AP Initial Context Setup Request message including the
ProSe Authorized IE to the eNB.
8\. The eNB sends the RRC Connection Reconfiguration message including the EPS
Radio Bearer Identity to the eRelay-UE.
9\. The eRelay-UE sends the INDIRECT_COMMUNICATION_RESPONSE message to the
eRemote-UE.
10\. If the INDIRECT_COMMUNICATION_REQUEST was accepted the eRemote-UE sends a
Service Request message (eRemote-UE identity, e.g., GUTI, S-TMSI) to the
eRemote-UE\'s MME. The NAS message is encapsulated in a RRC message to the
eNB. The eRelay-UE forwards the message to the eNB using RAN specified L2
relay method. The eNB uses the eRemote-UE\'s identity (i.e., GUTI) to derive
the eRemote MME identity and forwards the NAS message in a S1-AP message by
including the Layer 2 relay access indication.
NOTE 4: Whether the eNB attaches the eRelay-UE\'s identifier or any other
information to the S1-MME control message, depends on the final selection for
eRemote-UE Idle mode operation and charging solution.
11\. The MME performs authentication of the eRemote-UE based on NAS message
validation and, if needed, the MME checks the subscription data.
12\. The MME sends an S1-AP Initial Context Setup Request message including
the ProSe Authorized IE to the eNB.
13\. The eNB sends the RRC Connection Reconfiguration message including the
EPS Radio Bearer Identity to the eRemote-UE. The eRelay-UE forwards the
message to the eRemote-UE using RAN specified L2 relay method.
#### 6.1.5.2 Impact analysis
eRemote-UE:
\- No impact
eRelay-UE:
\- No impact
eRemote-UE\'s MME:
\- Depending on final selection of idle mode operation and charging solution
the MME needs to add eRelay-UE identifier or any other information to eRemote-
UE context..
eRelay-UE\'s MME:
\- No impact
eNB:
\- Based on the ProSe Authorized IE the eNB needs to authorise the UEs to use
radio resources for the L2-Relaying/Indirect 3GPP Communication.
\- Depending on final selection of idle mode operation and charging solution
the eNB needs to add Layer 2 relay access indication, eRelay-UE identifier or
any other information to the S1_AP message corresponding to the eRemote-UE NAS
message.
HSS:
\- The ProSe Authorized IE is updated with new entry to show Indirect 3GPP
Communication authorization for the eRemote-UE.
\- The ProSe Authorized IE is updated with new entry to show L2 UE-to-Network
Relay authorization for the eRelay-UE
#### 6.1.5.3 Evaluation
This solution, offers minimum impact to already existing core network
functions, by reusing existing procedures in TS 23.401 [4] and TS 23.303 [6]
as much as possible. In particular, re-using the service request procedure for
each UE to authorise the service via legacy NAS validation, and expanding that
the ProSe Functionality to provide service authorisation for the UEs
requesting to use L2 relay functionality, and expanding the ProSe Authorized
IE is updated with two new entries to show: L2 UE-to-Network Relaying for the
eRelay-UE and Indirect 3GPP Communication for the eRemote-UE. Reusing the
restricted discovery procedures, to create a solution that only enables UEs
with specific trust relation to find each other, is again providing minimum
impact to the core network. Legacy procedures for setting up the PC5 can also
be reused.
All in all, only small additions to the Rel-13 EPC functionality is needed,
e.g., to store the eRelay-UE identify or any other information in the eRemote-
UE context. Note that in Rel-13 TS 23.303 [6] there is already support for
storing the remote-UE identifier in the relay-UE context.
Furthermore is shall be noted that from an authorization point of view step 2
could be made optional, it would be enough to only check subscription in step
1 and use the ProSe Authorized IE forwarding by the MME. However then the PC5
provisioning should be supported by other means e.g. another OMA DM server.
Step 1 and 2 in this solution requires that the eRemote-UE is in E-UTRA
-coverage.
### 6.1.6 Solution 6: Simplified authorisation of eRelay-UE and eRemote-UE
#### 6.1.6.1 Description
##### 6.1.6.1.1 General
This solution addresses Key Issues 1 and 3.
##### 6.1.6.1.2 Authorisation of an eRelay-UE to be a layer 2 relay
The eRelay-UE follows the currently defined attach procedure in clause 5.3.2.1
of TS 23.401 [4], normal authentication and authorisation procedure happens
during attach procedure.
In the Initial Attach procedure, from the downloaded subscriber profile, MME
will be provided by HSS the layer 2 relay authorisation information and checks
if the eRelay-UE is authorised to be a layer 2 relay, and further sends the
authorisation to eNB as following:
\- If the UE is enabled for layer 2 relay and also authorised to be a layer 2
relay based on the subscription data, the MME shall include indication of
layer 2 relay authorised in the \"ProSe Authorised\" IE in the S1 AP Initial
Context Setup Request.
\- Otherwise, the MME shall not include indication of layer 2 relay authorised
in the \"ProSe Authorised\" IE in the S1 AP Initial Context Setup Request.
##### 6.1.6.1.3 Authorisation of an eRemote-UE to access LTE via a layer 2
relay
The eRemote-UE follows the currently defined attach procedure in clause
5.3.2.1 of TS 23.401 [4], normal authentication and authorisation procedure
happens during attach procedure.
In the Initial Attach procedure, from the downloaded subscriber profile, the
MME will be provided by the HSS the layer 2 relay authorisation information
and checks if the eRemote-UE is authorised to access LTE via a layer 2 relay,
and further sends the authorisation to the eNB as follows:
\- If the UE is enabled for layer 2 relay and also authorised to be a layer 2
relay based on the subscription data, the MME shall include the indication of
layer 2 relay access authorised in the \"ProSe Authorised\" IE in the S1 AP
Initial Context Setup Request.
\- Otherwise, the MME shall not include indication of layer 2 relay access
authorised in the \"ProSe Authorised\" IE in the S1 AP Initial Context Setup
Request.
##### 6.1.6.1.4 Procedures of an eRemote-UE to access the LTE network through
a layer 2 relay UE
##### 6.1.6.1.4.1 General {#general-6 .H6}
This section addresses how to enable the eRemote-UE to access LTE network via
an eRelay-UE. Following scenarios are addressed:
\- When the eRemote-UE has not attached to the LTE network using direct 3GPP
communication, Attach procedure is shown in clause 6.1.6.1.4.2.
\- When the eRemote-UE has attached to the LTE network and is in idle mode,
TAU and Service Request procedures are shown in clause 6.1.6.1.4.3.
\- When the eRemote-UE has attached to the LTE network and is in active mode,
the path switch procedure from direct 3GPP communication to indirect 3GPP
communication will be addressed by solution for Key Issue 5.
When the Layer 2 relay access authorised indication is stored in eRemote-UE\'s
MM Context in the eRemote-UE\'s MME, but the indication was not sent to this
eNB before (e.g. the eRemote-UE enabled the layer 2 relay access in idle
mode), the eRemote-UE\'s MME will include such indication in the S1-AP message
to eNB.
NOTE: The provisioning part of ProSe Function is used to provision the
parameters to both eRemote-UE and eRelay-UE. The parameters needed for PC5
Discovery procedure can be either preconfigured in UE or provisioned to UE
using ProSe Function.
Editor\'s note: It\'s FFS how LTE network rejects the eRemote-UE\'s request
when the eRemote-UE is not authorised to access LTE via a layer 2 relay.
##### 6.1.6.1.4.2 Authorisation of an eRemote-UE accessing eRelay-UE during
Attach Procedure {#authorisation-of-an-eremote-ue-accessing-erelay-ue-during-
attach-procedure-1 .H6}
Figure 6.1.6.1.4.2-1: During Attach Procedure
1\. PC5 based eRelay-UE discovery and selection and PC5 connection
establishment.
2\. The eRemote-UE sends an initial Attach Request message to eNB via eRelay-
UE.
Editor\'s note: Whether there is any security threat for an eRelay-UE using an
eRemote-UE IMSI is depending on SA WG3 decision.
3\. The eNB detects that the eRemote-UE\'s Attach Request message is sent via
an eRelay-UE, it selects the MME for the eRemote-UE and forwards the Attach
Request message to the eRemote-UE\'s MME in the S1-AP message.
4\. Same as steps from 3 to 16 of the Attach procedure in Figure 5.3.2.1-1 of
TS 23.401 [4] except that the eRemote-UE\'s MME needs check in the eRemote-
UE\'s subscription profile to decide whether the eRemote-UE is authorised to
access LTE via layer 2 relay UE and store the authorisation result of layer 2
relay access.
5\. The eRemote-UE\'s MME sends an Initial Context Setup Request message to
the eNB including the indication of Layer 2 relay authorised indication in
\"ProSe Authorised\" IE. The eNB stores the authorisation of the eRemote-UE
accessing LTE network via the eRelay-UE in the eRemote-UE\'s Context.
6\. Same as steps 18 to 26 of the Attach procedure in Figure 5.3.2.1-1 of TS
23.401 [4].
##### 6.1.6.1.4.3 Procedures for an eRemote-UE to send NAS messages (i.e.
TAU/Service Request) to LTE via an eRelay-UE {#procedures-for-an-eremote-ue-
to-send-nas-messages-i.e.-tauservice-request-to-lte-via-an-erelay-ue .H6}
Figure 6.1.6.1.4.3-1: TAU Procedure with SGW change when eRemote-UE is in IDLE
mode
1\. PC5 based eRelay-UE discovery and selection and PC5 connection
establishment.
2\. The eRemote-UE sends a NAS TAU Request via eRelay-UE to its new MME.
3\. The eNB selects the new MME for the eRemote-UE and forwards the TAU
Request message to the eRemote-UE\'s new MME in the S1-AP message.
4-7.Same as steps 4 to 7 of the Tracking Area Update with SGW change procedure
in Figure 5.3.3.1-1 in TS 23.401 [4].
8\. Same as steps 8 to 21 of the Tracking Area Update with SGW change
procedure in Figure 5.3.3.1-1 of TS 23.401 [4].
Figure 6.1.6.1.4.3-2: Service Request Procedure when eRemote-UE is in IDLE
mode
1\. PC5 based eRelay-UE discovery and selection and PC5 connection
establishment.
2\. The eRemote-UE sends a NAS Service Request via eRelay-UE to its new MME.
3\. The eNB selects the MME for the eRemote-UE and forwards the TAU Request
message to the eRemote-UE\'s MME in the S1-AP message.
4\. Same with step 3 in figure 5.3.4.1-1 in TS 23.401 [4].
5\. The eRemote-UE\'s MME sends an Initial Context Setup Request message to
the eNB including the indication of Layer 2 relay authorised in \"ProSe
Authorised\" IE. The eNB stores the authorisation of the eRemote-UE accessing
LTE via the eRelay-UE in the eRemote-UE\'s Context.
6\. Same with step 5 to 12 in figure 5.3.4.1-1 in TS 23.401 [4].
##### 6.1.6.1.5 Solution for PC5 trust relationship establishment
As in this solution, ProSe Function is not used to set up PC5 trust
relationship, the eRemote-UE and eRelay-UE set up the PC5 trust relationship
based on the pre-shared credentials in step 1 of all procedure examples above
(e.g. user manually input the same root key to both UEs or both UEs are
preconfigured with pre-shared credentials). SA WG3 are assumed to look into
the details on this aspect.
#### 6.1.6.2 Impact analysis
For the eRelay-UE authorisation solution:
eRelay-UE:
\- No impact.
eRelay-UE\'s MME:
\- It needs to store the Layer 2 relay authorised information in the eRelay-
UE\'s MM Context and send the eRelay-UE\'s authorisation information in
\"ProSe Authorised\" IE to the eNB in the S1-AP Initial Context Setup Request
message.
eNB:
\- It needs to store the authorization information of the eRelay-UE in the
eRelay-UE\'s Context.
For the eRemote-UE authorisation solution:
eRemote-UE:
\- No impact.
eRemote-UE\'s MME:
\- It needs to store the Layer 2 relay access authorised information in the
eRelay-UE\'s MM Context and send the eRemote-UE\'s authorisation information
in \"ProSe Authorised\" IE to the eNB in the S1-AP message if it has not sent
to this eNB before.
eNB:
\- It needs to store the authorization information of the eRemote-UE in the
eRelay-UE\'s Context.
#### 6.1.6.3 Evaluation
Solution 6.1.6 addresses Key Issue 1 as it allows the CN to authorize a UE to
play the eRelay-UE role and another UE to play the eRemote-UE role. Its impact
on the system can be considered rather limited because the solution does not
require new procedure reuses the existing S1AP (e.g., Initial Context Setup)
by using existing \"ProSe Authorised\" IEs to allow the MMEs to indicate the
authorisation information to eNB.
This solution supports the scenario when the eRemote-UE is out of E-UTRAN
coverage.
## 6.2 Solutions to Key Issue 2
### 6.2.1 Solution 1: eRelay Discovery
#### 6.2.1.1 Description
##### 6.2.1.1.1 General
Similarly to Rel-13 Relay discovery, the procedure for eRelays is based on the
usage of the ProSe Function. For eRelays, both eRelay Open Discovery and
eRelay Restricted Discovery are supported:
\- eRelay Open Discovery: discovery can take place between an eRelay-UE and
eRemote-UE without requiring explicit permission (i.e., user interaction). The
message broadcasted for eRelay Open Discovery is not encrypted, so any
eRemote-UEs can interpret the message.
\- eRelay Restricted Discovery: discovery only takes place between the eRelay-
UE and eRemote-UE with explicit permission (i.e. user interaction). The
message broadcasted for eRelay Restricted Discovery is encrypted, so only the
eRemote-UEs with permission can interpret the message.
For eRelay Discovery over PC5, it reuses the PC5-D protocol stack that is
depicted in Figure 5.1.1.5.1-1 in TS 23.303 [6]:
Figure 6.2.1.1.1-1: Discovery Plane PC5 Interface protocol stack as in TS
23.303 [6]
Similarly to TS 23.303 [6], two discovery models are possible:
\- Model A uses a single discovery protocol message (Announcement).
\- Model B uses two discovery protocol messages (Solicitation and Response).
##### 6.2.1.1.2 Discovery messages
In order to differentiate commercial usage and public usage, new message types
are specified for commercial eRelay discovery. These new messages reuse the
same parameters as those defined in 5.3.7 in TS 23.303 [6], with the following
enhancements:
\- besides restricted discovery supported by R13, additional support for
eRelay Open Discovery, i.e. with integrity protection and no encryption of the
message;
\- Addition of the ECGI in the Announcement message for Model A and a UE-to-
Network Relay Discovery Response for Model B in clause 4.6.4.3 in TS 23.303
[6].
#### 6.2.1.2 Impact analysis
The solution requires the extension of the existing Rel-13 discovery procedure
with the definition of 3 new PC_DISCOVERY messages that will be used between
eRelays and eRemote-UEs:
\- PC5_DISCOVERY message for eRelay Discovery Announcement (similar to Table
11.2.5.1.4 of TS 24.334 [7]);
\- PC5_DISCOVERY message for eRelay Discovery Solicitation (similar to Table
11.2.5.1.5 of TS 24.334 [7]), and;
\- PC5_DISCOVERY message for eRelay Discovery Response (similar to Table
11.2.5.1.6 of TS 24.334 [7]);
The Discovery Announcement message and the Discovery Response will include the
eRelay-UE\'s ECGI.
This will imply the usage of two new Message Type values (see Table
12.2.2.10.1 is TS 24.334 [7]), e.g.:
\- 1001: eRelay Discovery Announcement or eRelay Discovery Response;
\- 1010: eRelay Discovery Solicitation.
The Stage 3 message definition is up to CT WG1.
#### 6.2.1.3 Evaluation
Solution 6.2.1 addresses Key Issue 2. The solution is fully backward
compatible with existing deployments and it allows relays implementing both L3
and L2 architectures to be discoverable by and communicate with the respective
(e)Remote-UEs. The solution implies very limited impact on the CN (ProSe
Function) and new messages between eRemote and eRelay-UE.
### 6.2.2 Solution 2: Reusing Rel-13 PC5_DISCOVERY message
#### 6.2.2.1 Description
This solution addresses Key Issue 2.
Two Layer 2 Operation Modes for eRelay-UE are defined as following:
**\- Open Mode** : For the eRelay-UE in this mode, pre-association between
eRemote-UE and eRelay-UE is not needed.
**\- Restricted Mode** : For the eRemote-UE in this mode, pre-association
between eRemote-UE and eRelay-UE is needed.
The PC5_DISCOVERY message defined in TS 24.334 [7] is reused for eRelay-UE
Discovery and Selection purpose with following enhancement:
**(1) Indication of Layer 2 Operation Mode:**
The Operation Mode can be set to the value of Open Mode or Restricted Mode.
For Model A, the Discovery Announcement message needs to include this
indication. If it\'s Open Mode, then any eRemote-UE can select this eRelay-UE
as the layer 2 relay; otherwise, only the pre-associated eRemote-UE will
select this eRelay-UE if it is preconfigured value of Relay Service Code
matches the one contained in the Discovery Announcement message.
For Model B, the Discovery Solicitation message needs to include this
indication. If it is Open Mode, then any eRelay-UE satisfying the requirements
in Solicitation message can respond with Discovery Response message to the
eRemote-UE, the Discovery Response message does not need to include this
indication; otherwise, only the pre-associated eRelay-UE will respond with
Discovery Response message to eRemote-UE, the Discovery Response message does
not need to include this indication.
**(2) Indication of Relay Layer:**
The Relay Layer can be set to the value of layer 2, layer 3 or both layers.
\- For Model A, the Discovery Announcement message needs to indicate the
supported Relay layer (i.e., layer 2, layer 3, both layers) by the eRelay-UE.
The eRemote-UE\'s behaviour are as following:
\- If it indicates layer 2 only, only the layer 2 capable eRemote-UE will
select this eRelay-UE.
\- If it indicates layer 3 only, only the layer 3 capable eRemote-UE will
select this eRelay-UE.
\- If it indicates both layers, either layer 2, layer 3 or both layers capable
eRemote-UE can select this eRelay-UE.
\- For Model B, the Discovery Solicitation message needs to indicate the
desired Relay layer (i.e., layer 2, layer 3, both layers) by the eRemote-UE.
The eRelay-UE\'s behaviour are as following:
\- If it indicates layer 2, layer 2 and both layers capable eRelay-UE will
respond, the Relay Layer doesn\'t need to be included in the Discovery
Response message.
\- If it indicates layer 3, layer 3 and both layers capable eRelay-UE will
respond, the Relay Layer doesn\'t need to be included in the Discovery
Response message.
\- If it indicates both layers, the both layers capable eRelay-UE will
respond, and the desired Relay Layer (i.e. 2 or 3) is included in the
Discovery Response message.
Editor\'s note: The term eRelay/eRelay-UE in this clause needs to be
clarified/corrected.
**(3) Indication of eRelay-UE\'s serving PLMN ID:**
For the non-roaming scenario, the eRelay-UE\'s serving PLMN ID is set to its
HPLMN ID.
For the roaming scenario, it\'s set in following:
\- For Open Mode, it is set to the VPLMN ID of the eRelay-UE. It is included
in the PC5_DISCOVERY message for both UE-to-Network Relay Discovery
Announcement (Model A) and UE-to-Network Relay Discovery Response (Model B).
\- For Restricted Mode, it is set to the HPLMN ID of the eRelay-UE. It is
included in the PC5_DISCOVERY message for both UE-to-Network Relay Discovery
Announcement (Model A) and UE-to-Network Relay Discovery Response (Model B).
#### 6.2.2.2 Impact analysis
**For Model A:**
The PC5 Discovery Announcement message needs to include Layer 2 Operation
Mode, Relay Layer and eRelay-UE\'s PLMN ID.
**For Model B:**
The PC5 Discovery Solicitation message needs to include Layer 2 Operation
Mode, Relay Layer.
The PC5 Discovery Response message needs to include Layer 2 Operation Mode,
Relay Layer and eRelay-UE\'s serving PLMN ID.
#### 6.2.2.3 Evaluation
### 6.2.3 Solution 3: L2 (eRelay-UE) or L3 (ProSe UE-to-Network Relay)
discovery for Public Safety
#### 6.2.3.1 Description
R13 has introduced ProSe UE-to-Network Relay discovery procedure for public
safety use. It is based on assigned \"Relay Service Code\" (RSC) which is
mapped to connectivity service that the ProSe UE-to-Network Relay provides.
The configured RSC is also mapped to the \"ProSe Relay UE ID\" which is the
link layer identifier of a UE-to-Network Relay that is used for direct
communication by the Remote-UE.
A set of specific Relay Service Codes can be used to denote L2 relay
connectivity service while another set of Relay Service Codes can be used to
denote L3 relay connectivity service.
In the current TS 24.334 [7], the type of connectivity service that is being
assigned to a Relay Service Code is out of 3GPP scope. It is (re-)configurable
by the application server:
+----------------------------------------------------------------------+ | ##### 12.2.2.51 Relay Service Code {#relay-service-code .H6} | | | | The Relay Service Code parameter identifies a connectivity service | | the UE-to-Network relay provides. The value of the Relay Service | | Code parameter is a 24-bit long bit string. The format of the Relay | | Service Code parameter is out of scope of this specification. | +----------------------------------------------------------------------+
However, we should provide a standardized mechanism to indicate to the Remote-
UE whether a Relay Service Code is associated with L2 or L3 relay so the
Remote-UE can understand which relay procedure to use (L2 or L3).
A possible solution is to reserve the last 2 LSB in the Relay Service Code as
indication: e.g.,
\- 00 = R13 (L3) relay;
\- 01= R15 (L2) relay;
\- 1x= Reserve for future.
The final decision should be left to CT1 to decide.
The following example show how various Relay uses this proposal to advertise
its being L2, L3, or both in the discovery message.
Figure 6.2.3.1-1: Example of using RSC for L2/L3 relay indication
An eRemote-UE that is capable to support both L2 (eRelay-UE) or L3 (ProSe UE-
to-Network Relay) shall be configurable by operator policy to select a default
L2 or L3 selection behaviour when selecting between L2 or L3 relay.
#### 6.2.3.2 Impact Analysis
\- existing discovery for UE-to-Network relay can be reused for public safety
use.
\- protocol impact could be minimized to configuration only.
\- UE which aware of the L2 or L3 (based on relay service code) can invoke the
corresponding Relay ID for one to one ProSe communication with the proper L2
or L3 procedure.
\- changing the coding scheme on Relay Service Code (i.e., stealing 2 bits)
for indicating L2/L3 relay has impact to existing deployment. This means the
RSC that has been deployed will have to be changed. This is possible as RSC is
configured by DPF from Home ProSe Function (over PC3) to both the R13 public
satisfy UE and UE-2-Network relay.
#### 6.2.3.3 Evaluation
Editor\'s note: This clause will contain evaluation on the system impacts,
e.g., UE, access network and non-access network.
## 6.3 Solutions to Key Issue 3
### 6.3.1 Solution 1: Fast Connection setup by optimizing eRemote-UE security
procedures
#### 6.3.1.1 Description
This solution proposes a way to optimize the connection setup between the
eRemote-UE connection and the network in order to facilitate fast connection
setup. In TS 23.303 [6] clause 5.4.5 the procedure is described how to set up
One-to-one ProSe Direct Communication. It involve two steps. First, UE-1 sends
a Direct Communication Request message to UE-2. The message then triggers step
two, the mutual authentication and security association between UE-1 and UE-2.
This solution for Layer-2 relay proposes to utilize the fact that for traffic
using indirect 3GPP communication between the eRemote-UE and eNodeB, the
traffic is security protected by legacy AS security procedures. This
protection can be used to provide a secure PC5 link. The optimization proposed
for setting up One-to-one communication between an eRemote-UE and an eRelay-
UE, is to omit the step 2 in TS 23.303 [6] clause 5.4.5, since the PC5 is
secured by the AS security between eRemote and eNodeB.
This solution is based on the legacy Service Request procedure specified in
clause 5.3.4 in TS 23.401 [4], the only difference is that the RAN specified
(in TR 36.746 [3]) L2-relay functionality is used to forward the signalling
and user data between the eRemote-UE and the network
Figure 6.3.1.1-1: eRemote-UE Triggered Service Request
1\. The eRemote-UE and eRelay-UE perform PC5 discovery procedure, according to
selected solution for Key Issue 2.
2\. Triggered by upper layers, the eRemote-UE initiate one-to-one
communication with the eRelay-UE, by sending an INDIRECT_COMMUNICATION_REQUEST
to the eRelay-UE.
NOTE 1: It is up to Stage 3 to decide whether a new PC5 signalling message is
needed or not.
Editor\'s note: As secure communication between eRemote-UE and eNB can be
achieved with PDCP, whether the secure communication over PC5 (signalling,
data or both) is still needed should be decided by SA WG3.
3\. Triggered by the request received from the eRemote-UE, the eRelay-UE sends
a Service Request message (eRelay-UE identity e.g. GUTI, S-TMSI) to eRelay-
UE\'s MME. This step is according to clause 5.3.4 in TS 23.401 [4].
NOTE 2: If the eRelay-UE is already in ECM_CONNECTED and is authorised to
perform eRelay service then step 3 can be omitted.
4\. The eRelay-UE sends the INDIRECT_COMMUNICATION_RESPONSE message to the
eRemote-UE.
5\. If the INDIRECT_COMMUNICATION_REQUEST was accepted the eRemote-UE sends a
Service Request (eRemote-UE identity, e.g., GUTI, S-TMSI) to the eRemote-UE\'s
MME. The Service Request message is encapsulated in a RRC message to the eNB.
The eRelay-UE forwards the message to the eNB using RAN specified L2 relay
method.
6\. The eNB uses the eRemote-UE\'s identity to derive the eRemote-UE MME
identity and forwards the NAS message in a S1-MME control message. This step
is according to clause 5.3.4 in TS 23.401 [4].
NOTE 3: Whether the eNB attaches the eRelay-UE\'s identifier or any other
information to the S1-MME control message, depends on the final selection for
eRemote-UE Idle mode operation and charging solution
7\. NAS authentication/security procedures as defined in clause 5.3.10 in TS
23.401 [4] on \"Security function\" may be performed.
8\. The MME sends an S1-AP Initial Context Setup Request message to the eNB.
9\. The eNB performs the radio bearer establishment procedure according to
clause 5.3.4 in TS 23.401 [4]. The eRelay-UE forwards all the messages between
the eRemote-UE and eNB using RAN specified L2 relay method.
10\. The uplink data from the eRemote-UE can now be forwarded by the eRelay-UE
and the eNB to the Serving GW. The Serving GW forwards the uplink data to the
PDN GW.
11\. The eNB sends an S1-AP message Initial Context Setup Complete to the MME.
This step is described in detail in TS 36.300 [12].
#### 6.3.1.2 Impact analysis
No core network impact.
Omitting the PC5 mutual authentication procedures when establishing the PC5
connection for L2 relay needs to be reflected in TS 23.303 [6] as a specific
case for one-to-one direct communication establishment for L2 relay. This will
impact the PC5 signalling.
#### 6.3.1.3 Evaluation
This solution have no core network impact. The solution only uses the RAN
specified L2 relay functionality for forwarding the signalling and user data
between the eRemote-UE and the network. It shall be noted that also the CIoT
based Service Request Procedures in clauses 5.3.4A and 5.3.4B in TS 23.401 [4]
can be reused.
### 6.3.2 Solution 2: eRemote-UE initiated indirect 3GPP communication
procedure
#### 6.3.2.1 Description
##### 6.3.2.1.1 General
This procedure is for an eRemote-UE to initiate indirect 3GPP communication
procedure with established side path connection. It also supports the eRemote-
UE attaches to the network with the eRelay-UE.
##### 6.3.2.1.2 Procedure description
Figure 6.3.2.1.2-1: UE initiates data transmission
The eRemote-UE is in CM-IDLE mode and wants to initiate data transmission over
eRelay-UE.
0\. The precondition of this solution is following:
\- Both the eRelay-UE and eRemote-UE perform Service Authorisation procedure.
\- The eRelay-UE and eRemote-UE have established the side path connection as
described in Authorisation for Indirect 3GPP Communication via MME defined in
clause 6.1.3.
1\. Upper layer in the eRemote-UE has data to be sent over indirect 3GPP
communication path.
2\. The eRemote-UE performs eRelay Restricted Discovery to search for
available eRelay-UEs around, details of this step is described in clause
6.2.1.
3\. The eRemote-UE sends the Communication Request (eRemote-UE ID, indicator =
active) to the eRelay-UE. The eRemote-UE ID which is described in clause
6.1.4B.
4\. If the eRelay-UE is in the CM-IDLE state, the eRelay-UE performs Service
request messages as described in Figure 5.3.4.1.1-1 in TS 23.401 [4]. If the
eRelay-UE is in the CM-CONNECTED state, this step can be skipped.
5\. The eRelay-UE activates the side path connection, and sends the
Communication Response (ECGI, C-RNTI) to the eRemote-UE, i.e. establishes full
security over PC5 to carry the following signalling and data. The ECGI and
C-RNTI is used by the eRemote UE in case it performs the path switch from
direct 3GPP communication path to indirect 3GPP communication path (details of
this procedure is described in clause 6.5.2).
Editor\'s note: The security aspect needs to be study in SA WG3.
Editor\'s note: Whether there is a privacy issue with providing the
authorisation information to the eRemote-UE before doing any authentication
for this eRemote-UE is up to SA WG3.
6\. The eRemote-UE performs Attach optionally without any change.
7 The eRemote-UE performs Service Request procedure without any change.
8\. Data from eRemote-UE is sent to the network via the eRelay-UE without any
change.
#### 6.3.2.2 Impact analysis
eRelay UE:
\- support the PC5-S signalling to activate the side path activation.
\- add new triggering for service request.
eRemote UE:
\- support the PC5-S signalling to activate the side path activation.
eNB and MME:
\- None (if the implement solution 6.1.3 and solution 6.2.1).
#### 6.3.2.3 Evaluation
## 6.4 Solutions to Key Issue 4
### 6.4.1 Solution 1: Reusing existing mechanism to handle eRemote-UE\'s EPS
bearer
#### 6.4.1.1 Description
ARP based admission control for the eRemote-UE is only done in eNB.
Existing PCC specification is reused.
Editor\'s note: Whether and how PPPP is used is FFS based RAN WG2\'s feedback.
#### 6.4.1.2 Impact analysis
No impact to EPS.
#### 6.4.1.3 Evaluation
## 6.5 Solutions to Key Issue 5
### 6.5.1 Solution 1: NAS Based Service Continuity Solution
#### 6.5.1.1 Description
##### 6.5.1.1.1 General
This solution addresses Key Issue 5 and part of Key Issue 1 (Authorization of
the Connected Mode eRemote-UE access to a layer 2 eRelay-UE).
Following scenarios are considered:
1\. The eRemote-UE switches path between indirect and direct 3GPP
communication under same eNB;
2\. The eRemote-UE switches path between indirect and direct 3GPP
communication under different eNBs;
3\. The eRelay-UE does handover;
4\. The change of eRelay-UE\'s LTE-Uu radio.
##### 6.5.1.1.2 eRemote-UE mobility under same eNB
##### 6.5.1.1.2.1 From direct to indirect 3GPP communication under the same
eNB {#from-direct-to-indirect-3gpp-communication-under-the-same-enb .H6}
Figure 6.5.1.1.2.1-1: eRemote-UE switches from the direct 3GPP communication
to indirect 3GPP communication under the same eNB
1\. The eRelay-UE discovery and selection. PC5 connection is established
between the eRemote-UE and eRelay-UE.
2\. The eRemote-UE sends an Information Request message to the eRelay-UE. The
eRelay-UE responds with Information Response including the GUTI of the eRelay-
UE.
3\. The eRemote-UE sends a NAS message (e.g. Tracking Area Update Request,
Notification, etc.) message to the eRemote-UE\'s MME including the indication
of Access via layer 2 relay enabled and GUTI of the eRelay-UE.
4\. According the GUTI of the eRelay-UE, the eRemote-UE\'s MME knows the
eRelay-UE\'s MME. The eRemote-UE\'s MME sends a Relay Authorization Check
Request message to the eRelay-UE\'s MME including the IMSI of the eRemote-UE
and GUTI of the eRelay-UE. The eRelay-UE\'s MME checks if the eRemote-UE is
allowed to be access via the eRelay-UE and responds with a Relay Authorization
Check Response message including the Authorization Result and the eRelay-UE\'s
serving eNB ID.
5\. When receiving the response message from the eRelay-UE\'s MME, the
eRemote-UE\'s MME checks if the eRemote-UE and the eRelay-UE are under the
same eNB. If the eRemote-UE\'s MME knows the eRemote-UE and eRelay-UE are
under the same eNB, it will send a Path Switch Trigger message to the eNB
including the indication of Access via layer 2 enabled and the eNB UE S1AP ID
of the eRelay-UE.
6\. Based on the eRelay-UE\'s eNB UE S1AP ID, the eNB decides not to handover
the eRemote-UE to another eNB and stores the layer 2 relay relationship
between the eRelay-UE and eRemote-UE.
7\. _RRCConnectionReconfiguration_ happens between the eNB and the eRelay-UE.
8\. _RRCConnectionReconfiguration_ happens between the eNB and the eRemote-UE.
##### 6.5.1.1.2.2 From indirect to direct 3GPP communication under the same
eNB {#from-indirect-to-direct-3gpp-communication-under-the-same-enb .H6}
Figure 6.5.1.1.2.2-1: eRemote-UE switches from the indirect 3GPP communication
to direct 3GPP communication under the same eNB
1\. The eRemote-UE sends a NAS message (e.g. TAU Request, Notification, etc.)
to the eRemote-UE\'s MME including the indication of Access via layer 2 relay
disabled.
2\. The eRemote-UE\'s MME sends a Path Switch Trigger to the eNB including the
indication of Access via layer 2 relay disabled.
3\. Based on eRemote-UE\'s measurement report, the eNB decides not to handover
the eRemote-UE to another eNB.
4\. _RRCConnectionReconfiguration_ happens between the eNB and the eRemote-UE.
5\. _RRCConnectionReconfiguration_ happens between the eNB and the eRelay-UE.
6\. PC5 connection is released.
##### 6.5.1.1.3 eRemote-UE mobility under different eNBs
##### 6.5.1.1.3.1 From direct to indirect 3GPP communication under different
eNBs - X2 based {#from-direct-to-indirect-3gpp-communication-under-different-
enbs---x2-based .H6}
Figure 6.5.1.1.3.1-1: The eRemote-UE switches from direct 3GPP communication
to indirect 3GPP communication under different eNBs -X2 based
1\. The eRelay-UE discovery and selection. PC5 connection is established
between the eRemote-UE and eRelay-UE.
2\. The eRemote-UE sends an Information Request message to the eRelay-UE. The
eRelay-UE responds with Information Response including the GUTI of the eRelay-
UE.
3\. The eRemote-UE sends a NAS message (e.g. Tracking Area Update Request,
Notification, etc.) message to the eRemote-UE\'s MME (Source MME) including
the indication of Access via layer 2 relay enabled and GUTI of the eRelay-UE.
4\. According the GUTI of the eRelay-UE, the eRemote-UE\'s MME (Source MME)
knows the eRelay-UE\'s MME (Target MME). The eRemote-UE\'s MME sends a Relay
Authorization Check Request message to the eRelay-UE\'s MME including the IMSI
of the eRemote-UE and GUTI of the eRelay-UE. The eRelay-UE\'s MME checks if
the eRemote-UE is allowed to be access via the eRelay-UE and responds with a
Relay Authorization Check Response message including the Authorization Result
and the eRelay-UE\'s serving eNB ID.
5\. When receiving the response message from the eRelay-UE\'s MME, the
eRemote-UE\'s MME checks if the eRemote-UE and the eRelay-UE are under the
same eNB. If the eRemote-UE\'s MME knows the eRemote-UE and eRelay-UE are
under the different eNBs, it will send a Path Switch Trigger message to the
eNB serving the eRemote-UE including the indication of Access via layer 2
enabled and the eRelay-UE\'s serving eNB ID.
6\. Based on the eRelay-UE\'s serving eNB ID, the eNB decides to handover the
eRemote-UE to eRelay-UE\'s serving eNB.
7\. Same with the step description for Figure 5.5.1.1.2-1 in TS 23.401 [4].
##### 6.5.1.1.3.2 From direct to indirect 3GPP communication under different
eNBs - S1 based {#from-direct-to-indirect-3gpp-communication-under-different-
enbs---s1-based .H6}
Figure 6.5.1.1.3.2-1: The eRemote-UE switches from direct 3GPP communication
to indirect 3GPP communication under different eNBs -S1 based
1\. The eRelay-UE discovery and selection. PC5 connection is established
between the eRemote-UE and eRelay-UE.
2\. The eRemote-UE sends an Information Request message to the eRelay-UE. The
eRelay-UE responds with Information Response including the GUTI of the eRelay-
UE.
3\. The eRemote-UE sends a NAS message (e.g., Tracking Area Update Request,
Notification) message to the eRemote-UE\'s MME (Source MME) including the
indication of Access via layer 2 relay enabled and GUTI of the eRelay-UE.
4\. According the GUTI of the eRelay-UE, the eRemote-UE\'s MME (Source MME)
knows the eRelay-UE\'s MME (Target MME). The eRemote-UE\'s MME sends a Relay
Authorization Check Request message to the eRelay-UE\'s MME including the IMSI
of the eRemote-UE and GUTI of the eRelay-UE. The eRelay-UE\'s MME checks if
the eRemote-UE is allowed to be access via the eRelay-UE and responds with a
Relay Authorization Check Response message including the Authorization Result
and the eRelay-UE\'s serving eNB ID.
5\. When receiving the response message from the eRelay-UE\'s MME, the
eRemote-UE\'s MME checks if the eRemote-UE and the eRelay-UE are under the
same eNB. If the eRemote-UE\'s MME knows the eRemote-UE and eRelay-UE are
under different eNBs, it will send a Path Switch Trigger message to the eNB
serving the eRemote-UE including the indication of Access via layer 2 enabled
and the eRelay-UE\'s serving eNB ID.
6\. Based on the eRelay-UE\'s serving eNB ID, the eNB decides to handover the
eRemote-UE to eRelay-UE\'s serving eNB.
7\. Same with the step 2 for Figure 5.5.1.2.2-1 in TS 23.401 [4].
8\. Same with the step 3 for Figure 5.5.1.2.2-1 in TS 23.401 [4] except that
the indication of Access via layer 2 relay and GUTI of eRelay-UE are included.
9\. Same with step 4 and 4a for Figure 5.5.1.2.2-1 in TS 23.401 [4].
10\. Same with step 5 and 5a for Figure 5.5.1.2.2-1 in TS 23.401 [4] except
that the indication of Access via a layer 2 relay and eNB UE S1AP ID of the
eRelay-UE are included in the Handover Request message.
11\. The _RRCConnectionReconfiguration_ happens between the eNB and the
eRelay-UE.
12\. Same with step 6 and 6a for Figure 5.5.1.2.2-1 in TS 23.401 [4].
13\. Same with step 7 for Figure 5.5.1.2.2-1 in TS 23.401 [4].
14\. Same with step 8 and 8a for Figure 5.5.1.2.2-1 in TS 23.401 [4].
15\. Same with step 9 and 9a for Figure 5.5.1.2.2-1 in TS 23.401 [4].
16\. Same with steps 10 to 21 for Figure 5.5.1.2.2-1 in TS 23.401 [4].
##### 6.5.1.1.4 eRelay-UE does handover
Editor\'s note: Procedures for this scenario are FFS.
##### 6.5.1.1.5 Change of eRelay-UE\'s LTE-Uu radio
When there is change of eRelay-UE\'s LTE-Uu radio (e.g., due to mobility, RAT
change to GERAN/UTRAN, or loss of E-UTRAN coverage, etc.), the eRelay-UE will
notify the eRemote-UE about disabling the indirect 3GPP communication. The
eRemote-UE will initiate the path switch as defined in clause 6.5.1.1.2.2 and
6.5.1.1.3.2.
#### 6.5.1.2 Impact analysis
eRemote-UE:
\- It needs to request the eRelay-UE\'s GUTI;
\- It needs to send a NAS message to the eRemote-UE\'s MME including the
indication of Access via layer 2 relay enabled and GUTI of the eRelay-UE;
\- It needs to send a NAS message to the eRemote-UE\'s MME including the
indication of Access via layer 2 relay disabled.
eRelay-UE:
\- It needs to send its GUTI to the eRemote-UE;
\- It needs to notify the eRemote-UE about disabling the indirect 3GPP
communication.
eRemote-UE\'s MME:
\- It needs to check with the eRelay-UE\'s MME whether the eRemote-UE is
authorised to be served by the eRelay-UE;
\- It needs to send to eNB the eRemote-UE\'s authorisation information and the
eNB UE S1AP ID or eNB ID.
eRelay-UE\'s MME:
\- It needs to check whether the eRemote-UE is allowed to access the eRelay-UE
and respond to the eRemote-UE\'s MME about the result and the related
information.
eNB:
\- It needs to decide whether handover to another eNB is needed based on the
information received from the eRemote-UE\'s MME.
#### 6.5.1.3 Evaluation
### 6.5.2 Solution 2: AS based Service Continuity Solution
#### 6.5.2.1 Description
##### 6.5.2.1.1 General
This solution covers the path switch for intra eNB case, X2 based case and S1
based case.
NOTE: In order to explain the solution, the Figures below provide illustrative
examples of how the RAN signalling would need to be enhanced. In case this
solution is accepted as basis for normative work, the details of messages,
their parameters and procedures will need to be defined by RAN WG2.
This solution addresses Key Issue 5 (Service Continuity), in particular the
following scenarios are considered:
1\. The eRemote-UE switches path between indirect and direct under the same
eNB;
2\. The eRemote-UE switches path between indirect and direct under different
eNBs;
##### 6.5.2.1.2 eRemote-UE mobility under the same eNB
###### 6.5.2.1.2.1 From direct to indirect path under the same eNB
Figure 6.5.2.1.2.1-1: eRemote-UE switches path from direct to indirect under
the same eNB
0\. It is assumed that the eRemote-UE, before triggering the HO towards a
specific eRelay-UE, have already authorized to access the network via any
eRelay-UE. This step is performed according to the selected solution in Key
Issue 1.
1\. The eRemote UE performs eRelay Discovery to search for available eRelay
UEs around.
2\. Because of, e.g., eRemote-UE\'s battery efficiency, radio conditions,
etc., the eRemote UE decides to switch the connection from direct 3GPP
communication to indirect 3GPP communication. The eRemote UE selects an
eRelay-UE and activates the eRelay UE for the incoming signalling and data
(according to the selected solution in Key Issue 3). During the PC5 discovery
procedure, the eRemote UE obtains the selected eRelay UE\'s C-RNTI and Cell
ID.
NOTE: The eRelay-UE\'s Cell ID is announced by eRelay-UE during PC5 discovery
procedure as concluded solution for Key Issue 2, the C-RNTI needs to be added
as a new parameter in the PC5 discovery message.
3\. The eRemote-UE sends a RRC message (e.g., Measurement Report) to the eNB
to request the path switch from direct to indirect, including eRelay-UE
information, for example, the Cell ID of the eRelay-UE (obtained in step 1)
and C-RNTI of the eRelay-UE (obtained in step 1). The details of the RRC
message is to be decided by RAN WG2.
4\. Based on the received eRelay-UE\'s Cell ID, the eNB decides to handover
the eRemote-UE to an eRelay-UE within the eNB.
5\. Based on the received eRelay-UE\'s C-RNTI, _RRCConnectionReconfiguration_
is performed between the eNB and the eRelay-UE for the indirect 3GPP
communication.
6\. The eNB sends _RRCConnectionReconfiguration_ message to the eRemote-UE for
indirect 3GPP communication.
7\. The eRemote-UE sends _RRCConnectionReconfigurationComplete_ message via
the eRelay-UE to the eNB.
8\. In case some bearers are not setup successfully during the path switch,
the eNB indicates the MME to release the bearers failed to be setup. It is the
same with the step 1\~9 for Figure 5.4.4.2-1 in TS 23.401 [4].
##### 6.5.2.1.2.2 From indirect to direct 3GPP communication under the same
eNB {#from-indirect-to-direct-3gpp-communication-under-the-same-enb-1 .H6}
Figure 6.5.2.1.2.2-1: eRemote-UE switches path from indirect to direct under
the same eNB
1\. RRC message (e.g. Measurement Report) is triggered and sent to the eNB via
the eRelay-UE. The details of the RRC message is to be decided by RAN WG2.
2\. Based on the received RRC message, the eNB decides to handover the
eRemote-UE to from the eRelay-UE to the serving eNB.
3\. The eNB sends _RRCConnectionReconfiguration_ message via the eRelay-UE to
the eRemote-UE.
4\. The eRemote-UE sends _RRCConnectionReconfigurationComplete_ message to the
eNB.
5\. If some bearers are not setup successfully during the path switch, the eNB
needs to indicate the MME to release the bearers failed to be setup. It is the
same with the step 1\~9 for Figure 5.4.4.2-1 in TS 23.401 [4].
6\. _RRCConnectionReconfiguration_ is performed between the eNB and the
eRelay-UE.
7\. Release side path connection between eRemote-UE and eRelay-UE.
##### 6.5.2.1.3 eRemote-UE mobility under different eNBs
##### 6.5.2.1.3.1 From direct to indirect path under different eNBs - X2 based
{#from-direct-to-indirect-path-under-different-enbs---x2-based .H6}
In the message flow below it is assumed that the eRelay-UE is connected to the
Target-eNB.
Figure 6.5.2.1.3.1-1: The eRemote-UE switches from direct to indirect path
under different eNBs -X2 based
0\. It is assumed that the eRemote-UE, before triggering the HO towards a
specific eRelay-UE, have been already authorized to access the network via any
eRelay-UE. This step is performed according to the selected solution in Key
Issue 1.
1\. The eRemote UE performs eRelay Discovery to search for available eRelay
UEs around.
2\. Because of, e.g., eRemote-UE\'s battery efficiency, radio conditions,
etc., the eRemote UE decides to switch the connection from direct 3GPP
communication to indirect 3GPP communication. The eRemote UE selects an
eRelay-UE and activates the eRelay UE for the incoming signalling and data
(according to the selected solution in Key Issue 3).
3\. The eRemote-UE sends a RRC message (e.g. Measurement Report) to the eNB to
request the path switch from direct to indirect, including eRelay-UE
information, for example, the Cell ID of the eRelay-UE (obtained in step 1)
and C-RNTI of the eRelay-UE (obtained in step 1). The details of the RRC
message is to be decided by RAN WG2.
4\. Based on the received eRelay-UE\'s Cell ID, the eNB decides to perform
X2-based handover.
5\. Same with the step 4 for Figure 10.1.2.1.1-1 in TS 36.300 [12], except the
C-RNTI of eRelay-UE is included.
6\. Based on the received eRelay-UE\'s C-RNTI, _RRCConnectionReconfiguration_
is performed between the target eNB and the eRelay-UE for the indirect 3GPP
communication.
7\. Same with the step 6 for Figure 10.1.2.1.1-1 in TS 36.300 [12].
8\. The source eNB sends _RRCConnectionReconfiguration_ message to the
eRemote-UE for the indirect 3GPP communication.
9\. The eRemote-UE sends _RRCConnectionReconfigurationComplete_ message via
the eRelay-UE to the target eNB.
10\. Same with the step description for Figure 5.5.1.1.2-1 or Figure
5.5.1.1.3-1 in TS 23.401 [4].
##### 6.5.2.1.3.2 From indirect to direct path under different eNBs - X2 based
{#from-indirect-to-direct-path-under-different-enbs---x2-based .H6}
In the message flow below it is assumed that the eRelay-UE is connected to the
Source-eNB.
Figure 6.5.1.2.3.2-1: The eRemote-UE switches from indirect to direct path
under different eNBs -X2 based
1\. A RRC message (e.g. Measurement Report) is triggered and sent to the eNB
via the eRelay UE. The details of the RRC message is be decided by RAN WG2.
2\. Based on the received RRC message, the eNB decides to perform X2-based
handover.
3\. Same with the step 4 for Figure 10.1.2.1.1-1 in TS 36.300 [12]
4\. Same with the step 6 for Figure 10.1.2.1.1-1 in TS 36.300 [12].
5\. Same with the step 7 for Figure 10.1.2.1.1-1 in TS 36.300 [12].
6\. Same with the step 11 for Figure 10.1.2.1.1-1 in TS 36.300 [12].
7\. Same with the step descriptions for Figure 5.5.1.1.2-1 or Figure
5.5.1.1.3-1 in TS 23.401 [4].
8\. _RRCConnectionReconfiguration_ is performed between the eNB and the
eRelay-UE.
9\. Release side path connection between eRemote-UE and eRelay-UE.
##### 6.5.2.1.3.3 From direct to indirect path under different eNBs - S1 based
{#from-direct-to-indirect-path-under-different-enbs---s1-based .H6}
In the message flow below it is assumed that the eRelay-UE is connected to the
Target-eNB.
Figure 6.5.2.1.3.3-1: The eRemote-UE switches from direct to indirect path
under different eNBs -S1 based
0\. It is assumed that the eRemote-UE, before triggering the HO towards a
specific eRelay-UE, have been already authorized to access the network via any
eRelay-UE. This step is performed according to the selected solution in Key
Issue 1
1\. The eRemote UE performs eRelay Discovery to search for available eRelay
UEs around.
2\. Because of, e.g., eRemote-UE\'s battery efficiency, radio conditions,
etc., the eRemote UE decides to switch the connection from direct 3GPP
communication to indirect 3GPP communication. The eRemote UE selects an
eRelay-UE and activates the eRelay UE for the incoming signalling and data
(according to the selected solution in Key Issue 3).
3\. The eRemote-UE sends a RRC message (e.g. Measurement Report) to the eNB to
trigger the path switch, including eRelay-UE information, for example, the
Cell ID of the eRelay-UE (obtained in step 1) and C-RNTI of the eRelay-UE
(obtained in step 1). The details of the RRC message is to be decided by RAN
WG2.
4\. Based on the received eRelay-UE\'s Cell ID, the eNB decides to perform
S1-based handover.
5\. Same with the step 2 for Figure 5.5.1.2.2-1 in TS 23.401 [4], except the
C-RNTI of eRelay-UE is included in the Source to Target transparent container.
6\. Same with the step 3 for Figure 5.5.1.2.2-1 in TS 23.401 [4], except the
C-RNTI of eRelay-UE is included in the Source to Target transparent container.
7\. Same with the step 5 for Figure 5.5.1.2.2-1 in TS 23.401 [4], except the
C-RNTI of eRelay-UE is included in the Source to Target transparent container.
8\. Based on the received eRelay-UE\'s C-RNTI, _RRCConnectionReconfiguration_
is performed between the target eNB and the eRelay-UE for the indirect 3GPP
communication.
9\. Same with the step 5a to 21 for Figure 5.5.1.2.2-1 in TS 23.401 [4].
##### 6.5.2.1.3.4 From indirect to direct path under different eNBs - S1 based
{#from-indirect-to-direct-path-under-different-enbs---s1-based .H6}
In the message flow below it is assumed that the eRelay-UE is connected to the
Source-eNB.
Figure 6.5.2.1.3.4-1: The eRemote-UE switches from indirect to direct path
under different eNBs -S1 based
1\. A RRC message (e.g. Measurement Report) is triggered and sent to the eNB
via the eRelay UE. The details of the RRC message is to be decided by RAN WG2.
2\. Based on the received RRC message, the eNB decides to perform S1-based
handover.
3\. Same with the step descriptions for Figure 5.5.1.2.2-1 in TS 23.401 [4].
4\. _RRCConnectionReconfiguration_ is performed between the eNB and the
eRelay-UE.
5\. Release side path connection between eRemote-UE and eRelay-UE.
#### 6.5.2.2 Impact analysis
eRemote UE
\- RRC message from eRemote UE to report eRelay UE information, for example,
the Cell ID of the eRelay UE and C-RNTI of the eRelay UE.
eNB
\- RRC message from eRemote UE to report eRelay UE information, for example,
the Cell ID of the eRelay UE and C-RNTI of the eRelay UE.
\- During the direct to indirect handover procedure of the eRemote UE,
including intra eNB, X2 based and S1 based, eNB needs to reconfigure the
eRelay UE.
\- During the indirect to direct handover procedure of the eRemote UE,
including intra eNB, X2 based and S1 based, then eNB needs to reconfigure the
eRelay UE.
\- Source to Target transparent container includes the C-RNTI of the eRelay
UE.
MME
\- None
#### 6.5.2.3 Evaluation
This solution addresses the direct to indirect and indirect to direct path
switch aspect of Key Issue 5, in both intra eNB and inter eNB S1 and X2 cases.
All the changes introduced by this solution are contained within RAN, the
eProSe authorisation information required by the eNB has been already been
provided and reuses the existing S1-AP procedures therefore it has no EPC
impact.
The solution is contained within the RAN, therefore work is required within
RAN WG2 to define the exact procedures, messages and information flows.
### 6.5.3 Solution 3: Switching between direct and indirect communication
#### 6.5.3.1 Description
This solution addresses Key Issue 5 and describes how a UE switches the path
from direct to indirect communication and vice versa.
##### 6.5.3.1.1 Path Switch to Indirect 3GPP communication
Figure 6.5.3.1.1-1: Path switch to Indirect 3GPP communication
1\. Both UEs are attached to the network and have PDN connections with direct
Uu communication.
NOTE 1: Condition A in Figure 1 is the scenario when both UEs are served by
the same eNB and Condition B is the scenario when the UEs are served by
different eNBs.
2\. The eRemote-UE and eRelay-UE have performed service authorization with the
ProSe function, and have been configured with the needed information to
perform discovery and use indirect 3GPP communication.
3\. The eRemote-UE discovers an eRelay-UE suitable for indirect 3GPP
communication. This step will be detailed by solutions to Key Issue 2
4\. The eRemote-UE initiates the Cell ID Announcement Procedure specified in
clause 5.4.4.5 from TS 23.303 [6] to get the Cell ID of the eRelay-UE.
5\. The eRemote-UE is triggered to initiate a path switch. The trigger may be
initiated by the eRemote-UE application layer or by RAN measurements.
NOTE 2: It is up to RAN to decide whether and how radio level measurements
will trigger the UE to initiate the path switch procedures and how the
eRemote-UE performs the RAN measurement reporting to the eNB.
6\. [Condition A] Based on the eRelay-UE Cell ID received in step 4, the
eRemote UE determines whether its served by the same eNB as the eRelay-UE. In
case both UEs are served by the same eNB, the eRemote-UE sends an Indirect
Communication Request message to the selected eRelay-UE including its own
C-RNTI.
7\. [Condition A] The eRelay-UE sends an RRC message to its own serving eNB
requesting a path switch for the eRemote-UE. This message includes the
eRemote-UE C-RNTI.
8\. [Condition A] Based on the eRemote-UE C-RNTI, eNB 1 identifies the ongoing
direct Uu communication of the eRemote-UE, manages the modification of the
E-RAB to establish and include the PC5 radio bearer needed for indirect 3GPP
communication and switches the communication to the indirect path. This step
includes the Indirect Communication Response message to the eRemote-UE. Step
9-10 are not executed.
NOTE 3: It is up to RAN to define the needed procedure to implement the
function in this step.
9\. [Condition B] Based on the eRelay-UE Cell ID received in step 4, the
eRemote UE determines whether its served by the same eNB as the eRelay-UE. In
case the eRemote-UE is not served by the same eNB as the eRelay-UE, the
eRemote-UE will send a release message with Relay flag to its own serving eNB
to initiate the release of the E-RAB. This triggers the S1 Release Procedure
as specified in clause 5.3.5 from TS 23.401 [4].
10\. [Condition B] After releasing the E-RABs the eRemote-UE initiates a Relay
Connection Setup from idle mode with a NAS Service Request according to
solution 6.3.1 for Key Issue 3.
##### 6.5.3.1.2 Path Switch to Direct 3GPP communication
Figure 6.5.3.1.2-1: Path switch to Direct 3GPP communication
1\. The eRemote-UE is triggered to initiate a path switch. The trigger may be
initiated by the eRemote-UE application layer or by RAN measurements.
NOTE: It is up to RAN to decide whether and how radio level measurements will
trigger the UE to initiate the path switch procedures and how the eRemote-UE
performs the RAN measurement report to the eNB including the eRelay-UEs.
2\. The eRemote-UE sends an RRC message to the serving eNB with the
measurement report defined by RAN.
3\. The eRelay-UE forwards this RRC message to the serving eNB.
4\. Based on the RAN measurements, the Source eNB makes a decision whether the
eRemote-UE will stay on the same eNB or perform a handover to the Target eNB.
4a. In case the decision is to handover to the Target eNB, the Source eNB
initiates the X2 or S1 based handover procedure as specified in clause 5.5.3
of TS 23.401 [4].
4b. In case the decision is to stay on the same eNB, the Source eNB performs
the RRC Reconfiguration procedure and switches the eRemote-UE to direct
communication.
5\. The Source eNB then performs an RRC Reconfiguration to the eRelay-UE to
release any indirect communication resources.
6\. The eRelay-UE sends an Indirect Communication Release to the eRemote-UE.
7\. The eRemote-UE sends an Indirect Communication Release Complete to the
eRelay-UE
#### 6.5.3.2 Impact analysis
eRemote-UE:
\- Request an indirect communication from a selected eRelay-UE using its own
C-RNTI.
\- Send a new RRC release message with cause Relay to initiate the release of
its E-RAB.
eRelay-UE:
\- Forward the AS signalling between the eRemote-UE and the eNB.
\- Request an indirect communication release from the eRemote-UE upon
receiving an RRC Reconfiguration message from the eNB during the path switch
to direct communication.
eNB:
\- Initiate the S1 Release procedure upon receiving an RRC message with cause
Relay regardless of traffic. The Source eNB drops all packets.
\- RAN Managed Path Switch
Editor\'s note: Impact on the MME is to be clarified.
#### 6.5.3.3 Evaluation
The impact of changes introduced by this solution are contained in the RAN and
are mainly related to the RAN managed path switch procedure.
The solution also proposes that a PC5 bearer establishment is done during the
procedure for path switch handled by the eNB. In this way, the eRemote-UE does
not have multiple active radio links for longer periods.
In the case when eRemote-UE and eRelay-UE are served by different eNBs there
is a service interruption and potential data loss during the E-RAB release and
relay connection establishment (between step 9 and 10 from Figure 1), but this
keeps the impact significantly lower as opposed to handover of UEs between
eNBs. UEs that experience this interruption are considered to be far less
especially for the wearable use-cases.
### 6.5.4 Solution 4: Simplified NAS Based Service Continuity Solution
#### 6.5.4.1 Description
##### 6.5.4.1.1 General
This solution addresses Key Issue 5.
Following scenarios are considered:
1\. The eRemote-UE switches path between indirect and direct 3GPP
communication under same eNB;
2\. The eRemote-UE switches path between indirect and direct 3GPP
communication under different eNBs;
3\. The change of eRelay-UE\'s LTE-Uu radio.
##### 6.5.4.1.2 From direct to indirect 3GPP communication under the same eNB
##### 6.5.4.1.2.1 eRemote-UE mobility under same eNB {#eremote-ue-mobility-
under-same-enb-1 .H6}
Figure 6.5.4.1.2.1-1: eRemote-UE switches from the direct 3GPP communication
to indirect 3GPP communication under the same eNB
1\. The eRelay-UE discovery and selection. PC5 connection is established
between the eRemote-UE and eRelay-UE. During the PC5 direct discovery
procedure, the eRemote-UE knows the eRelay-UE\'s serving Cell ID.
2-3. The eRemote-UE sends a TAU Request message to the eRemote-UE\'s MME
including the Layer 2 relay access flag (e.g. enabled) and the eRelay-UE\'s
serving Cell ID.
4\. The eRemote-UE\'s MME sends TAU Accept to the eRemote-UE including the
Layer 2 relay access authorisation result.
5\. According to the eRemote-UE\'s subscription profile, the eRemote-UE\'s MME
checks if the eRemote-UE is authorised to access LTE via layer 2 relay UE. If
it is authorised, the eRemote-UE\'s MME will send a Path Switch Trigger
message to the eNB including the eRelay-UE\'s serving Cell ID.
6\. Based on the eRelay-UE\'s eNB UE S1AP ID, the eNB decides not to handover
the eRemote-UE to another eNB and stores the layer 2 relay relationship
between the eRelay-UE and eRemote-UE.
7\. _RRCConnectionReconfiguration_ happens between the eNB and the eRelay-UE.
8\. _RRCConnectionReconfiguration_ happens between the eNB and the eRemote-UE.
##### 6.5.4.1.2.2 From direct to indirect 3GPP communication under different
eNBs - X2 based {#from-direct-to-indirect-3gpp-communication-under-different-
enbs---x2-based-1 .H6}
Figure 6.5.4.1.2.2-1: The eRemote-UE switches from direct 3GPP communication
to indirect 3GPP communication under different eNBs -X2 based
1\. The eRelay-UE discovery and selection. PC5 connection is established
between the eRemote-UE and eRelay-UE. During the PC5 direct discovery
procedure, the eRemote-UE knows the eRelay-UE\'s serving Cell ID.
2-3. The eRemote-UE sends a TAU Request message to the eRemote-UE\'s MME
including the indication of Layer 2 relay access flag (e.g. enabled) and the
eRelay-UE\'s serving Cell ID.
4\. The eRemote-UE\'s MME sends a TAU Accept to the eRemote-UE including the
Layer 2 relay access authorisation result.
5\. According to the eRemote-UE\'s subscription profile, the eRemote-UE\'s MME
checks if the eRemote-UE is authorised to access LTE via layer 2 relay UE. If
it is authorised, the eRemote-UE\'s MME will send a Path Switch Trigger
message to the eNB including the eRelay-UE\'s serving Cell ID.
6\. Based on the eRelay-UE\'s serving eNB ID, the eNB decides to handover the
eRemote-UE to eRelay-UE\'s serving eNB.
7\. Same with the step description for Figure 5.5.1.1.2-1 in TS 23.401 [4].
##### 6.5.4.1.2.3 From direct to indirect 3GPP communication under different
eNBs - S1 based {#from-direct-to-indirect-3gpp-communication-under-different-
enbs---s1-based-1 .H6}
Figure 6.5.4.1.2.3-1: The eRemote-UE switches from direct 3GPP communication
to indirect 3GPP communication under different eNBs -S1 based
1\. The eRelay-UE discovery and selection. PC5 connection is established
between the eRemote-UE and eRelay-UE. During the PC5 direct discovery
procedure, the eRemote-UE knows the eRelay-UE\'s serving Cell ID.
2-3. The eRemote-UE sends a TAU Request message to the eRemote-UE\'s source
MME including the Layer 2 relay access flag (e.g. enabled) and the eRelay-
UE\'s serving Cell ID.
4\. The eRemote-UE\'s MME sends a TAU Accept to the eRemote-UE including the
Layer 2 relay access authorisation result.
5\. According to the eRemote-UE\'s subscription profile, the eRemote-UE\'s MME
checks if the eRemote-UE is authorised to access LTE via layer 2 relay UE. If
it is authorised, the eRemote-UE\'s MME will send a Path Switch Trigger
message to the eNB including the Layer 2 relay access authorised and the
eRelay-UE\'s serving Cell ID.
6\. Based on the eRelay-UE\'s serving eNB ID, the eNB decides to handover the
eRemote-UE to eRelay-UE\'s serving eNB.
7\. Same with the step 2 for Figure 5.5.1.2.2-1 in TS 23.401 [4].
8\. Same with the step 3 for Figure 5.5.1.2.2-1 in TS 23.401 [4] except that
the indication of layer 2 relay access authorised.
9\. Same with step 4 and 4a for Figure 5.5.1.2.2-1 in TS 23.401 [4].
10\. Same with step 5 and 5a for Figure 5.5.1.2.2-1 in TS 23.401 [4] except
that the indication of Layer 2 relay access authorised in the Handover Request
message.
11\. Same with steps 6 to 21 for Figure 5.5.1.2.2-1 in TS 23.401 [4].
##### 6.5.4.1.3 From indirect to direct 3GPP communication {#from-indirect-to-
direct-3gpp-communication .H6}
Figure 6.5.4.1.3-1: eRemote-UE switches from the indirect 3GPP communication
to direct 3GPP communication
1-2. The eRemote-UE sends a TAU Request to the eRemote-UE\'s MME including the
Layer 2 relay access flag (e.g. disabled). The eRemote-UE will start to do
measurement report (see step 5a) after step 1 via the eRelay-UE.
3\. The eRemote-UE\'s MME sends a TAU Accept to the eRemote-UE.
4\. The eRemote-UE\'s MME sends a Path Switch Trigger to the eNB including the
indication of Layer 2 relay access disabled.
5a. Measurement report can be triggered by the eRemote-UE at any time after
step 1. This means that step 5a can be executed before, e.g., step 4.
5b. The eNB switches the eRemote-UE to the direct communication path under the
same eNB if the eRemote-UE is in its coverage based on the Measurement Report.
If eNB knows that the eRemote-UE is out of its coverage, based on the
Measurement Report, the eNB will select the suitable target eNB for the
eRemote-UE, the normal handover procedures (X2 or S1 based) can be used in
following steps.
6\. _RRCConnectionReconfiguration_ happens between the eNB and the eRemote-UE.
7\. _RRCConnectionReconfiguration_ happens between the eNB and the eRelay-UE.
8\. PC5 connection is released.
##### 6.5.4.1.4 Change of eRelay-UE\'s LTE-Uu radio
When there is change of eRelay-UE\'s LTE-Uu radio (e.g., due to mobility, RAT
change to GERAN/UTRAN, or loss of E-UTRAN coverage, etc.), the eRelay-UE will
notify the eRemote-UE about disabling the indirect 3GPP communication. The
eRemote-UE will initiate the path switch as defined in clauses 6.5.1.1.2.2 and
6.5.1.1.3.2.
#### 6.5.4.2 Impact analysis
eRemote-UE:
\- It needs to include the Layer 2 relay access flag (e.g. enabled, disabled)
and the eRelay-UE\'s serving Cell ID in the TAU Request;
eRelay-UE:
\- It needs to notify the eRemote-UE about disabling the indirect 3GPP
communication.
eRemote-UE\'s MME:
\- It needs to authorise the Layer 2 relay access for the eRemote-UE and send
the Layer 2 relay access authorisation result in the TAU Accept message;
\- It needs to send to eNB the eRelay-UE\'s serving Cell ID.
eNB:
\- It needs to decide whether handover to another eNB is needed based on the
information received from the eRemote-UE\'s MME.
#### 6.5.4.3 Evaluation
### 6.5.5 Solution 5: Handover of eRelay-UE with eRemote-UE(s) having an
active indirect connection
#### 6.5.5.1 Description
The scenario under discussion is the case where the eRelay UE is required to
handover to a cell where one or more eRemote UEs have an active indirect 3GPP
communication.
The solution proposes the eNodeB to handle the handover signalling of the
eRelay and any eRemote-UE(s) that have an active indirect connection,
independently. The following are taken under consideration for this solution:
\- Both eRelay and eRemote-UE(s) provide measurement reports to the eNodeB
since both UEs will be in RRC_CONNECTED/ECM_CONNECTED state.
\- eNodeB is aware of which eRemote-UE(s) are connected to an eRelay-UE.
Based on the above considerations the eNodeB has all the necessary information
(e.g. signal strength, mobility restrictions) to decide whether an eRemote-UE
should handover with the eRelay-UE, handover to another cell or path switch to
a direct connection.
As the Source eNodeB handles the handover signalling of the eRemote-UE
independently, the Source eNodeB can instruct the eRemote-UE to either
handover with the eRelay UE or indicate in the Handover Command to synchronise
with a new Target eNodeB.
NOTE 1: For both cases, the eNodeB implementation needs to ensure that the
handover signalling of the eRemote-UE is handled before the eRelay-UE
synchronises with the new cell.
The call flow for the handover will be as shown below:
Figure 6.5.5.1-1: Handover of eRelay-UE with eRemote-UE(s) having an active
indirect connection
0\. Remote UE has an existing D2D connection with the eRelay UE, e.g. using
LTE-direct, WiFi-direct, etc. Only one eRemote UE is shown but more eRemote
UEs can be using the same eRelay UE.
1\. The eRemote UE has an active indirect connection via the eRelay UE. Both
eRelay UE and eRemote UE are in ECM_CONNECTED state.
2\. The Source eNodeB is aware which eRemote-UE(s) have an active indirect
connection via an eRelay-UE.
3\. The eRelay UE is in connected mode and sends measurements reports to the
source eNB using RRC signalling.
4\. The eRemote UE(s) send measurement reports to the eNodeB via the eRelay-
UE.
NOTE 2: The eNodeB configure the eRemote-UE via the eRelay-UE of the
conditions to send measurement reports. The eNodeB configure the eRelay-UE of
the conditions to send measurement reports via Uu.
NOTE 3: If the eRemote-UE is out of Uu coverage the UE does not provide any
measurement reports as the eRemote-UE would not be able to identify any cell.
It is up to RAN WG2 to decide if the eRemote-UE can provide other parameters
within the measurement reports.
5\. The Source eNodeB decides to handover the eRelay UE.
6\. Based on the measurement reports provided by the eRelay-UE and taking into
account, for example, mobility restrictions, resource limitation indication
from the Target eNodeB, the source eNodeB selects a target cell for the
eRelay-UE.
7\. The eNB also checks if the same Target eNodeB can be used for the eRemote-
UE taking into account the Remote-UEs mobility restrictions. The Source eNodeB
can decide based on the eRemote-UE measurement reports to select a different
Target eNodeB and perform a path switch, i.e. switch the eRemote-UE connection
to a direct connection.
The steps below depict the scenario where the source eNodeB has selected the
same target eNodeB for the eRelay and eRemote UE(s).
If X2-based handovers takes place the (A) steps are applicable.
8\. The Source eNodeB initiates an X2-based handover with the Target eNodeB
for the eRemote-UE.
9\. The Target eNodeB initiates handover execution sending the handover
command message to the eRemote-UE (via the Source eNodeB).
10\. Once Handover takes place the Target eNodeB informs the MME serving the
eRelay of the path switch.
11\. The source eNB initiates an X2-based handover for the eRelay-UE.
12\. The Target eNodeB sends a handover command to the eRelay-UE. The handover
command is sent to the eRemote UE via the eRelay UE.
13\. Once handover takes place the Target eNodeB informs the MME serving the
eRelay-UE of the path switch.
NOTE 4: How steps 8-10 and 11-13 are coordinated are left to eNodeB
implementation. The Source eNodeB ensures that the eRemote-UE handover
signalling is handled before the eRelay-UE handover to the Target eNodeB.
> If the source eNB decides to involve the MME in the handover procedure (B)
> takes place:
14\. Source eNodeB initiates handover of the eRemote-UE. Handover procedure as
described in Figure 5.5.1.2.2-1 of TS 23.401 [4] is carried out.
15\. As part of the handover procedure the eRemote-UE receives the Handover
Command message.
16\. The eRelay-UE synchronises with the Target eNodeB based on the
information included in the Handover Command from the Source eNodeB.
17\. Source eNodeB initiates handover of the eRelay-UE. Handover procedure as
described in Figure 5.5.1.2.2-1 of 3GPP TS 23.401 [4] is carried out.
18\. As part of the handover procedure, the eRelay-UE will receive a handover
command message indicating to switch to a new eNodeB.
19\. The eRelay-UE synchronises with new cell and continue sends traffic.
NOTE 5: How steps 14-16 and 17-19 are coordinated are left to eNodeB
implementation. The Source eNodeB ensures that the eRemote-UE handover
signalling is handled before the eRelay-UE handover to the Target eNodeB.
#### 6.5.5.2 Impact analysis
When the eRelay-UE is required to handover, the eNodeB is required to identify
all eRemote-UEs with active indirect 3GPP connection that are linked to the
eRelay-UE.
#### 6.5.5.3 Evaluation
The solution has no impacts in the core network (i.e. MME) as the handover is
handled explicitly at the eNodeB.
Enhancements are required in the eNodeB in order to allow the eNodeB to
identify eRemote-UE(s) behind an eRelay-UE that are in CONNECTED state.
An evaluation is also needed on the impact on the eRelay UE due to delaying
the eRelay-UE handover signalling to allow the eRemote UE\'s handover. For
example, evaluate the conditions where delaying the eRelay-UE handover
signalling may result in loss of connection for the eRelay UE (e.g. when there
are multiple eRemote-UEs that are required to be handed over).
## 6.6 Solutions to Key Issue 6
### 6.6.1 Solution 1: Idle Mode Operation and Paging
#### 6.6.1.1 Description
##### 6.6.1.1.1 General
This solution applies to key issue 6 on eRemote-UE idle mode operation,
specifically how the network UE context is updated with necessary information
to perform eRemote-UE paging via an eRelay-UE, option 3 according to TR 36.746
[3].
##### 6.6.1.1.2 UE Idle Mode behaviour in idle mode
A eRemote-UE in ECM_IDLE will \"camp\" on the eRelay-UE. RAN WG2 technical
report TR 36.746 [3] clauses 5.1.2, 5.1.3 and 5.2.2. discuss some UE aspects
for IDLE mode.
The eRelay-UE transmit SSLS/BSBCH which can serve as synchronization source
for e.g. the out-of-coverage eRemote-UE.
A eRemote-UE in idle shall be linked in order to receive a forwarded page from
the eRelay-UE. For a eRemote-UE in Idle a new PC5 DRX scheme shall be
specified. In TR 36.746 [3] clause 5.2.1 there is an Editor\'s note stating:
\"Editor\'s note: Details of PC5 DRX configuration are FFS (e.g. if explicit
DRX configuration or configuration based on pool configuration). The details
for IDLE mode depends on paging mechanism/option chosen.\"
The eRemote-UE will be configured with PC5 DRX by the eNB when indirect
communication set-up is performed.
The eRelay-UE is expected to forward important system information using PC5
broadcast/multicast. The eRemote-UE shall monitor broadcasted system
information in order to detect mobility across TA boundary. Upon UE mobility
across a TA boundary the eRemote-UE generates a mobility TAU. Furthermore the
eRemote-UE sends a periodic TAU upon timer expirers.
Much of the UE Idle mode behaviour resides in the RAN domain, but importantly
from a CN perspective is that legacy TAU triggering mechanism in the UE can
remain as specified. The CN can expect same UE behaviour for an eRemote-UE as
for a normal UE camping directly on an eNB.
##### 6.6.1.1.3 UE Paging IE sharing solution
Figure 6.6.1.1.3-1: UE Paging IE sharing
> The procedure in Figure 6.6.1.1.3-1 is based on Solution 6.1.5 with minor
> updates to enable UE Paging IE sharing. The step description below only
> shows the delta compared to solution 6.1.5.
1-6. Same as solution 6.1.5.
7\. Same as solution 6.1.5 with the addition that the eRelay-UE MME includes
the eRelay-UE\'s Paging IE (IMSI, S-TSMI and specific DRX or eDRX values) in
S1-AP Initial Context Setup Request message and that the eNB stores the
eRelay-UE Paging IE in the eRelay-UE context.
NOTE 1: The eRelay-UE Context is updated upon eRelay-UE mobility e.g. eRelay-
UE change of MME. This update will include an updated Paging-IE.
8.9. Same as solution 6.1.5.
10\. Same as solution 6.1.5 with the addition that the eNB attaches the
eRelay-UE\'s Paging IE to the S1-MME control message.
NOTE 2: The message from the eRemote-UE includes eRemote-UE identity, e.g.
S-TMSI. This important for eRelay-UE when monitoring S-TMSI based paging of
the eRemote-UE.
NOTE 3: The eRemote-UE MME will receive a potential updated eRelay-UE Paging
IE every time the eRemote-UE generates a Service request, TAU due to mobility
or upon periodic timer expiry. This will ensure that the eRemote-UE MME to
have a valid eRelay-UE Paging IE.
11\. Same as solution 6.1.5 with the addition that the MME stores the eRelay-
UE\'s paging IE in the eRemote-UE context.
12-13. Same as Solution 6.1.5.
NOTE 4: The eNB configures the eRemote-UE with PC5 DRX values when the
eRemote-UE is in RRC_CONNECTED according to TR 36.746 [3] clause 5.2.1. It
would be possible that the eNB also configures the eRelay-UE with eRemote-
UE\'s PC5 DRX values but this is not yet detailed by RAN WG2.
##### 6.6.1.1.4 eRemote-UE Paging solution
Figure 6.6.1.1.4-1: eRemote-UE paging
0\. As a Prerequisite the eRemote-UE have performed Attach, TAU or Service
Request via the eRelay-UE, including that the UE Paging IE has been shared as
described in clause 6.6.1.1.3. Note that message in step 10 in clause
6.6.1.1.3 includes eRemote-UE identity, e.g. GUTI, S-TMSI. This allows the
eRelay-UE to store and associate the eRemote S-TMSI together with the eRemote-
UE L2 address.
NOTE 1: Whether IMSI based paging is supported depends on SA WG3 decision if
sharing of ISMI between eRelay-UE and eRemote-UE is allowed. In case the IMSI
can be shared, then the same mechanism described in solution 6.6.3 in clause
6.6.3.1.2 step 2 can be executed in conjunction with setting up the PC5 link.
1\. The eRemote-UE is in idle mode and camps on the eRelay-UE.
NOTE 2: UE behaviour when camping on an eRelay-UE will be detailed by RAN WG2.
Based on TR 36.746 [3] it is assumed that the eRemote-UE needs to monitor
System Information forwarded using PC5 broadcast/multicast and forwarded
paging message according to new PC5 DRX feature specified by RAN. The relation
between eRemote-UE PO timing on the Uu interface and PC5 DRX timing for page
message forwarding is expected to be clarified by RAN during RAN normative
phase.
2\. The eRemote-UE MME receive a DDN from the SGW notifying the MME that there
is pending down link data for the eRemote-UE.
NOTE 3: Figure 6.6.1.1.4-1 illustrates the case when SGW generates the DDN,
but it should be noted that the MME can receive a DDN as a result of other
incoming data cases e.g. incoming SMS.
3\. The eRemote-UE MME generate a S1-AP Paging message that includes UE paging
IE of both the eRemote-UE and the eRelay-UE.
4\. Depending whether the eRelay-UE is in RRC_IDLE or RRC_CONNECTED the eNB
will either a) Send a Page to the eRelay-UE or b) Send a
_RRCConnectionReconfiguration_ message to the eRelay-UE.
a) The eNB calculates the POs for both the eRemote-UE and the eRelay-UE. The
eNB will send a Page message to the eRelay-UE that includes eRemote-UE\'s
S-TMSI and calculated PO timing for the eRemote-UE, based on RAN configured
PC5 DRX.
b) The eNB can calculate the PO of the eRemote-UE. The eNB will send the
_RRCConnectionReconfiguration_ message that includes the eRemote-UE\'s S-TMSI
and calculated PO timing of the eRemote-UE, based on RAN configured PC5 DRX.
The calculated eRemote-UE PO timing can be: a specific subframe, absolute time
or a Paging Time Window if the eRemote-UE is using eDRX.
NOTE 4: The eRemote-UE can monitor \"PC5 Page messages\" according the MME
negotiated DRX values, if eNB used this value when configuring the PC5 DRX
value.
NOTE 5: It is up to RAN to decide whether to expand the Page message with
eRemote-UE ID and PO timing or whether the eRelay-UE shall perform Random
Access and determine the paging cause and receive the eRemote-UE\'s S-TMSI and
PO timing.
NOTE 6: If the eNB has configured the eRelay-UE with the eRemote-UE\'s PC5 DRX
values, then the solution can be simplified since the eRemote-UEs PO timing is
not needed in the paging message, see clause 6.6.1.1.5.
5\. The eRelay-UE will send a \"PC5 Page message\" to the eRemote-UE.
NOTE 7: It is up to RAN to decide how this \"PC5 Page message\" is sent.
Furthermore, potential increased latency when delivering the page to the
eRemote-UE needs to be studied and align timers for the paging procedure.
6\. When eRemote-UE is in the ECM-IDLE state, upon reception of paging
indication, the eRemote-UE initiates the UE triggered Service Request
procedure, according to Solution 6.3.1.
##### 6.6.1.1.5 eRemote-UE Paging solution when PC5 DRX value is configured in
the eRelay-UE
Figure 6.6.1.1.5-1: eRemote-UE paging when PC5 DRX value is shared
The PO timing is not needed in the Uu paging message when the eNB has
configured the eRelay-UE with the eRemote-UE\'s PC5 DRX value at the last time
the eRemote-UE was in RRC_CONNECTED. Also see NOTE 4 in 6.6.1.1.3. The above
figure shows that eRemote-UE\'s PO timing is not included in the Uu paging
message.
0-3. Same as solution 6.6.1.1.4.
4\. Depending whether the eRelay-UE is in RRC_IDLE or RRC_CONNECTED the eNB
will either a) Send a Page to the eRelay-UE or b) Send a
_RRCConnectionReconfiguration_ message to the eRelay-UE.
a) The eNB calculates the POs for the eRelay-UE. The eNB will send a Page
message to the eRelay-UE that includes eRemote-UE\'s S-TMSI.
b) The eNB will send the _RRCConnectionReconfiguration_ message that includes
the eRemote-UE\'s S-TMSI.
> 5\. The eRelay-UE calculates the PO of the eRemote-UE based on RAN
> configured PC5 DRX of the eRemote-UE. The eRelay-UE will send a \"PC5 Page
> message\" to the eRemote-UE.
6\. Same as solution 6.6.1.1.4.
#### 6.6.1.2 Impact analysis
eRemote-UE:
\- eRemote-UE needs to send S-TMSI to eRelay-UE.
eRelay-UE:
\- Need to store eRemote-UE S-TMSI and L2 address while the eRemote-UE is in
idle mode.
\- Need to be able to schedule and construct a PC5 Page message based on the
received information in Page message received from the eNB or configured
eRemote-UE\'s PC5 DRX value.
eRemote-UE\'s MME:
\- Need to store eRelay-UE Paging IE in the eRemote-UE context while the
eRemote-UE is in ECM_IDLE, and when receiving a DDN construct the eRemote-UE
paging message that includes both the eRemote-UE Paging IE and the eRelay-UE
Paging IE as an additional IE compared to legacy.
eRelay-UE\'s MME:
\- Needs to include the eRelay-UE Paging IE in the S1-AP Initial Context Setup
message.
eNB:
\- Need to fetch the eRelay-UE Paging IE from the eRelay-UE context and attach
it to the S1_AP message that is forwarding the eRemote-UE NAS message.
\- Need to construct an eRelay-UE page message or a
_RRCConnectionReconfiguration_ message that includes eRemote-UE\'s S-TMSI and
PO timing.
NOTE 1: If the eNB has configured the eRelay-UE with the eRemote-UE\'s PC5 DRX
values, then PO-timing is not needed in the page message.
#### 6.6.1.3 Evaluation
The above solution enables RAN to perform eRemote-UE paging in at least two
ways.
1\. It can apply to RAN Option 3 as depicted in TR 36.746 [3];
2\. It can apply combination of legacy direct eRemote-UE paging over Uu
(Option 1) and indirect paging via the eRelay-UE, Option 3.
Furthermore the solution does not require sharing configured DRX values
between the devices.
The only impact to the core network is the eRelay-UE MME sharing the eRelay-UE
Paging IE via the eNB with the eRemote-UE MME, and that the eRemote-UE MME
includes both UE paging IE in the Paging message.
For a single radio eRelay-UE, there is a potential risk that Uu scheduled
radio activity and PC5 radio activity can be conflicting. RAN will need to
take this into account when detailing the PC5 DRX feature for this solution.
### 6.6.2 Solution 2: eRelay-UE monitors RRC Paging message for eRemote-UE
separately
#### 6.6.2.1 Description
##### 6.6.2.1.1 Means for eRelay-UE to know the eRemote-UE\'s paging
parameters
When the eRemote-UE knows it has been authorised to access LTE network via the
eRelay-UE, the eRemote-UE will send its paging parameters, IMSI and S-TMSI to
the eRelay-UE using PC5 message.
In case there is change on the S-TMSI of eRemote-UE, the eRemote-UE will send
the new S-TMSI to the eRelay-UE using PC5 message.
Editor\'s note: Whether there is any security threat for an eRelay-UE using an
eRemote-UE IMSI is depending on SA WG3 decision.
##### 6.6.2.1.2 Means for eRelay-UE to monitor RRC Paging message
The eRelay-UE uses the eRemote-UE\'s paging parameters to monitor the paging
message for each its serving eRemote-UE based on the information received from
the eRemote-UE and maintains independent paging occasion for each eRemote-UE.
##### 6.6.2.1.3 Paging procedure via eRelay-UE
When the Downlink Data Notification message for the eRemote-UE comes to the
eRemote-UE\'s MME, the eRemote-UE\'s MME sends S1-AP Paging message to the
eNBs within the TAI list serving the eRemote-UE. The eNB behaves as following:
\- When the eRelay-UE is in idle mode, the eNB will send RRC Paging message in
the normal way.
\- When the eRelay-UE is in connected mode, the eNB will send the eRemote-
UE\'s RRC Paging message to the eRelay-UE via either eRelay-UE\'s SRB or DRB
based on RAN WG\'s decision.
When the eRelay-UE receives the RRC Paging message for the eRemote-UE, from
the S-TMSI in the message, it knows which eRemote-UE it should forward this
RRC Paging message to. In case the eRelay-UE is also in idle mode, the eRelay-
UE needs to trigger the Service Request procedure as defined clause 5.3.4.1 of
TS 23.401 [4].
#### 6.6.2.2 Impact analysis
eRemote-UE:
\- It needs to send its paging parameters, IMSI and S-TMSI to the eRelay-UE
using PC5 message upon successful layer 2 relay access authorisation and
S-TMSI change.
eRelay-UE:
\- It needs to store the eRemote-UE\'s paging parameters, IMSI and S-TMSI and
calculate the paging occasion for the eRemote-UE;
\- It needs to monitor the RRC Paging message for both eRelay-UE and eRemote-
UEs in different Paging Frame and Paging occasion.
eNB:
\- Impact on how to transfer eRemote-UE\'s RRC paging message when the eRelay-
UE is in connected state is up to RAN WG2.
eRemote-UE\'s MME:
\- No impact.
eRelay-UE\'s MME:
\- No impact.
#### 6.6.2.3 Evaluation
This solution can support both RAN WG2 defined Option 2 (see TR 36.746 [3])
since the MME pages the eRemote-UE using the eRemote-UE\'s Paging Frame and
Paging Occasion, the eRemote-UE can receive the paging message from eRelay-UE.
### 6.6.3 Solution 3: Based on Option 1 and Option 2
#### 6.6.3.1 Description
This clause proposes solutions for idle mode operation for Option 1 and Option
2.
Option 1: Support of direct paging only (i.e., eRemote-UEs are paged directly
by the eNB, independently of whether these were previously connected via an
eRelay-UE);
Option 2: The eRelay-UE monitors paging occasions for itself as well as the
(separate) paging occasions for its eRemote-UEs;
Option 3: The eRelay-UE only monitors paging occasions for itself. The eRemote
UE is paging occasion is set to the eRemote UE\'s paging occasion.
##### 6.6.3.1.1 Solution 3A: direct paging (Option 1)
Figure 6.6.3.1.1-1: direct paging
1) The eRemote-UE is paged by the eRemote-UE MME.
2) The eRemote-UE discovers the eRelay-UEs around.
3) The eRemote-UE triggers the eRelay UE to perform Service Request to become
CM-CONNECTED for incoming data and signalling.
4) The eRemote-UE perform service request to connect to the network via an
eRelay-UE.
##### 6.6.3.1.2 Solution 3B: indirect paging when eRelay UE monitors different
POs (Option 2)
Figure 6.6.3.1.2-1: eRemote UE links to eRelay UE
For any time if the eRemote UE intends to link to eRelay UE, the eRemote UE
performs the following steps:
1) The eRemote UE performs discovery for the available eRelay UE around.
2) The eRemote UE sends a Monitor Request Message (Identity Index, Paging DRX)
to the eRelay UE.
3) Base on the local configuration (e.g. user consensus), the eRelay UE
replies with a Monitor Response.
4) The eRemote UE monitor the system information over side link. After this
step, the eRemote UE consider itself is under coverage of the same cell as the
eRelay UE.
NOTE: How to relay the system information is further defined by RAN.
5) In case the triggering of TAU is met (e.g. eRemote UE moves out of the
current TA list), the eRelay UE performs the TAU via the eRelay UE.
> After the eRemote UE links to the eRelay UE, the eRemote UE keeps performing
> the measurement of the signal strength of the discovery message sent by
> eRelay UE (e.g. the eRelay Open Discovery or eRelay Restricted Discovery)
> for relay reselection.
Figure 6.6.3.1.2-2: Indirect paging via the eRelay-UE
1) The eRemote UE is paged by the eRemote UE MME.
2) The eRelay UE monitors the paging for the eRemote UE in the eRemote UE\'s
paging occasion and relay the paging message to eRemote UE.
3) The eRemote UE requests the eRelay UE to become CM-CONNECTED for incoming
data and signalling.
4) The eRemote-UE perform service request to connect to the network via an
eRelay-UE.
#### 6.6.3.2 Impact analysis
#### 6.6.3.3 Evaluation
# 7 Overall evaluation
## 7.0 Further assumptions
In addition to the assumptions captured in clause 4.1, throughout this study
the following assumptions have been made:
\- For Key Issue 1 (Authentication and Authorisation for Indirect 3GPP
Communication):
\- PC5 Signalling Protocol is re-used between eRemote-UE and eRelay-UE; i.e.,
PDCP is required over PC5;
\- The eRelay-UE\'s AS layer is able to differentiate packets received over
PC5 from the eRemote UEs, i.e. whether it is PC5-SP, PDCP packets towards eNB
for different bearers (e.g. SRBs, DRBs), and indicate such to the eNB via the
Adaptation layer;
\- For Key Issue 3 (Enhancements to Connection Setup between an eRemote-UE and
an eRelay-UE):
\- PC5 Signalling Protocol is re-used between eRemote-UE and eRelay-UE;
\- Pending SA WG3 decision the mutual authentication and security procedures
can be omitted.
\- For Key Issue 4 (EPS Bearer handling for Indirect 3GPP Communication):
\- The eRelay-UE\'s PC5 AS layer is able to differentiate packets from
different bearers (SRBs, DRBs) from a particular eRemote-UE;
\- The adaptation layer between eRelay-UE and eNB is able to differentiate
bearers (SRBs, DRBs) of a particular UE and apply QoS accordingly.
\- For Key Issue 5 (Service Continuity):
\- For direct to indirect UE-initiated path switch request the eNB allows HO
triggered by an RRC message from the eRemote-UE.
\- For handover of eRelay-UE with eRemote-UE(s), the eNB handles the handover
signalling of the eRelay-UE and eRemote-UE independently. The eNB ensures the
handover signalling of the eRemote-UE is handled before the eRelay-UE
signalling.
\- The eNB is able to handle measurement reports in all scenarios including
when eRM-UE is out of coverage of the eNB and when the eRM-UE is under the
coverage of another cell.
\- For Key Issue 6 (Idle Mode Operation):
\- The DRX feature on PC5 is used to forward Uu paging messages
\- Forwarding of relevant SIB information and synchronization signals are used
by the eRemote-UE in idle mode.
\- Paging messages forwarded on PC5 is performed after but in conjunction with
the eRemote-UE PO on Uu.
\- For Key Issue 7 (Support for Emergency and eMPS call from eRemote-UE):
\- Multiple priority bearers are multiplexed over the same eRelay-UE\'s DRB.
\- The access stratum layer between eRelay-UE and eRemote-UE is able to
provide priority treatment for the emergency and eMPS bearers.
## 7.1 Key Issue 1
Clause 6.1 describes seven solutions for Key Issue 1: Solution 1, 2, 3, 4, 4B,
5, and 6.
Solutions 6.1.4 and 6.1.4B address only the partial issue of establishing a
dynamic trust relationship between eRemote-UE and eRelay-UE. Because of that,
these two solutions do not fully address Key Issue 1 and are not considered in
this evaluation.
Solution 6.1.1 is a subscription based authorization in which the step to
authorize a UE to be an eRelay-UE and the step to authorize a UE to be an
eRemote-UE are separate.
Solution 6.1.2 is based on existing NAS signalling (Service Request, Tracking
Area Update, Attach) and requires extra authorization information to be
exchanged among UEs, eNB and MMEs. In particular this solution requires inter-
MME signalling. Similar comments apply to Solution 3.
Solutions 6.1.5 and 6.1.6 do not require inter-MME signalling and are based on
the re-usage of existing NAS procedures and they have limited impact on the
RAN and CN.
For Layer 2, for Key Issue 1, it is recommended to select Solution 6.1.5.
## 7.2 Key Issue 2
For this key issue there are currently three different solutions (Solution
6.2.1, 6.2.2 and 6.2.3). All three of them are based on the Rel-13 discovery
procedure. The main differences between the three solutions are:
\- Solution 6.2.1: is based on the Rel-13 discovery procedure but it
introduces new messages.
\- Solution 6.2.2: reuses the Rel-13 discovery procedure and extends the
PC5_DISCOVERY messages with new optional IEs. It specifically addresses the
case in which a L2 and L3 relays are implemented in the same relay.
\- Solution 6.2.3: reuses the Rel-13 discovery procedure and reserves the 2
LSBs of the Relay Service Code to indicate the type of relay (L2 or L3).
Brief evaluation:
\- Solution 6.2.2 is an optimization for the scenario in which a L3 relay and
a L2 relay are implemented in the same relay. In this case, its benefit is
that the Rel-15 relay would send out a single advertisement message. It is not
clear at the moment how a Rel-13 Remote UE behaves when receiving a message
with the new IEs. It does not seem to bring meaningful benefits for the normal
case in which there are separate L3 and L2 relays.
\- Solution 6.2.3 introduces backward compatibility issues because the Relay
Service Code values it proposes to use to differentiate L2 and L3 relays may
have already been used in some deployments.
\- Solution 6.2.1 is based on new message types that will only be understood
by eRM-UEs and will remain independent from the Rel-13 L3 relays/remote UEs
discovery.
For Layer 2, for Key Issue 2 it is recommend to select Solution 6.2.1.
## 7.3 Key Issue 3
For this key issue there are currently three different solutions (Solution
6.3.1, 6.3.2 and clause 6.1.6.1.3.3 in 6.1.6). All solutions are based on the
legacy Service Request procedure specified in clause 5.3.4 in TS 23.401 [4],
the only difference is that the RAN specified (in TR 36.746 [3]) L2-relay
functionality is used to forward the signalling and user data between the
eRemote-UE and the network. The main differences between the three solutions
are:
\- Solution 6.3.1: For setting up the PC5 communication the legacy ProSe
procedure for one-to-one communication is reused, with the change of new
message types (In)direct Communication request/response, to indicate to the
eRelay-UE that the one-to-one communication is for indirect communication.
\- Solution 6.3.2: For setting up the PC5 communication, this solution uses
the new solutions in clause 6.1.3, 6.2.1 and 6.1.4B and sharing the eRelay-
UE\'s C-RNTI and ECGI with the eRemote-UE. Furthermore, the solution is only
for devices that have established a mutual trust relationship, since
restricted discovery is required.
\- Solution in clause 6.1.6.1.3.3 in 6.1.6: For setting up the PC5
communication the legacy ProSe procedure for one-to-one communication is
reused with the additional assumption that mutual authentication on PC5 can be
achieved by using security keys shared (e.g., preconfigured certificates, pre-
shared with user interaction) between the eRemote-UE and eRelay-UE.
Brief evaluation:
\- Solution 6.3.1 has minimum impact compared to legacy TS 23.401 [4] and TS
23.303 [6] and can work for both open and restricted discovery
\- The sharing of identities in solution 6.3.2 creates some complexity
compared to the legacy setup of the PC5 one-to-one communication. Furthermore
the solution is limited to devices that have mutual trust relationship.
\- Since the solution in clause 6.1.6.1.3.3 in 6.1.6 assumes that mutual
authentication on PC5 can be achieved by using security keys shared (e.g.,
preconfigured certificates, pre-shared with user interaction) between the
eRemote-UE and eRelay-UE, then this means that the eRemote-UE and eRelay-UE
must have a mutual trust relationship.
For Layer 2, for Key Issue 3 it is recommended to select Solution 6.3.1.
NOTE: Whether normative work is needed or not in SA WG2 is pending on SA
WG3\'s decision.
## 7.4 Key Issue 4
For this key issue, currently there is only one solution in clause 6.4.1.
For Layer 2, for Key Issue 4, no normative work is foreseen in SA WG2. As
such, no enhancement to the current PC5 QoS model specified in TS 23.303 [6]
is studied. Therefore, end-to-end QoS for the eRemote UE cannot be supported.
If RAN WGs identified possible solutions to extend the LTE-Uu QoS support over
PC5, system level impacts might need to be reviewed and evaluated again.
## 7.5 Key Issue 5
For this key issue there are currently five different solutions (Solution
6.5.1 - 6.5.5). Solutions 6.5.1 to 6.5.4 address the issue of a single
eRemote-UE path switch, while Solution 6.5.5 addresses the issue of handover
of an eRelay-UE with eRemote-UE(s).
Solutions for eRemote-UE path switch:
\- Solution 6.5.1: path switch is triggered by a NAS message from the eRemote-
UE and the EPC triggers the eNB to switch path between direct and indirect
communication. The eRemote-UE should request the GUTI of eRelay-UE by using
newly defined PC-S messages. Authorization in the MME on whether or not the
eRemote-UE can access the network via a specific eRelay-UE is needed.
\- Solution 6.5.2: path switch is triggered by an RRC message from the
eRemote-UE. The eRemote-UE should obtain the C-RNTI of eRelay-UE according to
the selected Solution 6.2.1 for Key Issue 2. Based on the selected Solution
6.1.5 for Key Issue 1, the eNB has the eProSe authorization information so
there is no need for EPC to authorize the eRemote-UE in path switch. This
solution follows the Handover procedure specified in TS 23.401 [4] and has no
impact on EPC.
\- Solution 6.5.3: path switch is triggered by an RRC message or a PC-S
message from the eRemote-UE. This solution reuses the Rel-13 ProSe UE-to-
Network Relay procedure to obtain the cell ID of the eRelay-UE. The eRemote-UE
may experience data transfer interruption.
\- Solution 6.5.4: this solution is a simplified version of Solution 6.5.1,
which eliminates the request of GUTI of eRelay-UE and the authorization on
indirect communication via a specific eRelay-UE.
Brief evaluation:
\- Solution 6.5.1 can be replaced by solution 6.5.4 based on the selection
solution on Key Issue 1.
\- Solution 6.5.2 maximally reuses the existing handover procedure and has no
impacts on EPC.
\- Solution 6.5.3 introduces the issue of data transfer interruption which
impacts on the user experience. In addition the eRemote-UE has different
behaviours depending on whether it is served by the same serving eNB of the
eRelay-UE or from a different one.
\- Solution 6.5.4 impacts the EPC with the newly defined S1-AP message and new
parameters in TAU messages.
Solution for handover of an eRelay-UE with eRemote-UE(s):
\- Solution 6.5.5: this solution focus on handover of eRelay-UE with eRemote-
UE having an active indirect communication. This solution is based on handover
procedure specified in TS 23.401 [4].
Brief evaluation:
\- Solution 6.5.5 proposes that the eNodeB handles the handover of the eRelay-
UE and eRemote-UE independently with no impact on EPC. The eNodeB must handle
race conditions due to the fact that handover signalling is sent to an
eRemote-UE via an eRelay-UE. Hence, the eNodeB must handle the handover
signalling of eRemote-UEs before the eRelay-UE moves to the target cell. It is
proposed to leave the handling of such race conditions to the eNodeB
implementation.
For Layer 2, for Key Issue 5 it is recommended to select Solution 6.5.2 for
eRemote-UE path switch between direct and indirect communication and it is
recommended to select Solution 6.5.5 for handover of an eRelay-UE with
eRemote-UE(s). The implementation of such solutions depend upon RAN WG2 and
have no EPC impact.
## 7.6 Key Issue 6
For this Key Issue, currently there are three solutions in clause 6.6.
Brief evaluation:
\- Solution 6.6.1 is a solution falling into the category of Option 3 of TR
36.746 [3]. The eRemote-UE\'s MME needs to know the eRelay-UE\'s Paging
Occasion via eNB, the eRelay-UE needs to know the eRemote-UE\'s S-TMSI for
relaying paging message. The eRelay-UE\'s power consumption on LTE-Uu
interface is saved by only monitoring one single PO. If the RRC Paging message
is extended to include more parameter (i.e. PO timing), then it will
negatively affect the LTE-Uu\'s paging resource. Changes to the Uu paging
message is up to RAN to decide.
\- Solution 6.6.2 is a solution falling into the category Option 2 of TR
36.746 [3]. The eRemote-UE sends its S-TMSI, IMSI, Paging Information to the
eRelay-UE, the eRelay-UE will monitor separate Paging Frames and Paging
Occasions for different eRemote-UEs. Consequently, the eRemote-UE idle state
is not impacted at system level with respect to the normal UE state. The
eRelay UE\'s power consumption will be higher than Solution 6.6.1. Solution
6.6.2 has no impact to the MME (e.g., no need to know if an eRemote-UE is
linked to any eRelay-UE) and limited impact to the eNB.
\- Solution 6.6.3 illustrates two solutions which fall into the category of
Option 1 and Option 2 of TR 36.746 [3], respectively. Option 1 based solution
has no system impact, but it cannot support the reachability of the eRemote-UE
when it is out of eNB\'s coverage. The difference between the second option of
this solution and Solution 6.6.2 is (1) calculation vs. provisioning of
eRemote-UE\'s Paging Information at the eRelay-UE and, (2), support vs. non-
support of IMSI based paging. Similar cons and pros are foreseen for the
second option of Solution 6.6.3 and Solution 6.6.2.
For Layer 2, for Key Issue 6, Solution 6.6.2 is selected.
## 7.7 Key Issue 7
For this Key Issue, no solution is identified. However, the following issues
are identified.
\- How to handle multiple priority connections multiplexed over the eRelay-
UE\'s radio bearer in order to support simultaneous emergency and eMPS calls
from the eRelay-UE and the eRemote-UE(s).
\- How the access stratum layer between eRelay-UE and eRemote-UE provides
priority treatment for the emergency and eMPS bearers.
For Layer 2, for Key Issue 7, whether normative work is needed or not in SA2
is depending on feedback from RAN.
# 8 Conclusions
Depending on normative work in RAN WGs, for these Key Issues the following
solutions are recommended for normative work:
\- For Key Issue 1, Solution 6.1.5.
\- For Key Issue 2, Solution 6.2.1.
\- For Key Issue 3, Solution 6.3.1 (normative work in SA2 is pending SA WG3
conclusion).
\- For Key Issue 5, Solutions 6.5.2 (eRM-UE path switch) and 6.5.5 (handover
of eRL-UE with eRM-UEs).
\- For Key Issue 6, Solution 6.6.2 (Option 2 based paging of TR 36.746 [3]).
For Key Issue 4 and Key Issue 7 no normative work has been identified.
RAN WG2 have confirmed that the assumptions of clause 7.0 can be met. However,
QoS and the timing of paging transmissions have not been extensively studied
and remain to be finalized in the RAN WGs potential normative phase.
###### ### Annex A: Combined Solution 1
## A.0 General
This clause is to describe the relationship between solutions of different key
issues, to provide a better understanding of how solutions (clauses 6.1.3,
6.1.4B and 6.2.1) can be combined.
This solution provides a combined MME control solution description to address
key issues 1, 2 and 3. The combined description only describes the
interworking between the mentioned solutions.
The overall solution is split into three phases described in clause A.2.
## A.1 Terminology
**Side path:** The communication path between eRelay-UE and eRemote-UE when
the eRelay service is used. This includes the 3GPP and N3GPP access
technologies (i.e. PC5, Bluetooth and Wi-Fi).
## A.2 Overall procedure for enabling indirect 3GPP communication
In general, the solution to enable indirect 3GPP connection can be divided
into 3 phases (see Figure A.2-1):
Figure A.2-1: High level phases for authorisation, side path connection setup
and remote access
**Phase 1: Service Authorisation and Provisioning**
This phase describes the service authorisation, given by the ProSe Function,
to enable a UE to act as an eRelay-UE and as an eRemote-UE. This phase is
supposed to occur rather seldom, e.g., once per one or several month, or until
the user subscription changes. After this phase, the eRemote-UE is allowed to
search for potential eRelay-UEs for service. This phase is similar to the
Service authorisation and provisioning procedures defined in clause 5.2.1 in
TS 23.303 [6]. The parameters are identical to those defined in clause
4.5.2.1.1.2.2 in TS 23.303 [6]
Editor\'s note: It\'s FFS whether redefine these parameters are needed for
FS_REAR.
**Phase 2: Side Path Connection Setup**
This phase describes the side path connection setup between an eRemote-UE and
a specific eRelay-UE. This phase is supposed to take place more often than
phase 1, e.g., once per week. The MME is involved in this phase to authorise
the setup of the side path context. After this phase, the eRemote-UE is
allowed to use this specific eRelay-UE to access to the network. This phase
can be split in three steps (see Figure A.2-2):
Figure A.2-2: General steps for side path connection setup
1\. The eRemote-UE and eRelay-UE discover each other (e.g. using eRelay open
discovery defined in clause 6.2.1).
2\. The eRelay-UE provides the eRemote-UE\'s information to CN, in order to
create the necessary information (e.g. permission and security information) in
the related entities in the CN (e.g. Dynamic Trust relationship establishment
defined in 6.1.4B). This step can be skipped if the trust relationship is
preconfigured in the eRemote-UE, eRelay-UE and core network beforehand, e.g.
for public safety users, or IoT device such as water meters.
3\. The eRemote-UE is then authorised by the core network to use the specific
eRelay-UE. The eRemote-UE and the eRelay-UE establish the side path context
and use it for later signalling and data transmission (e.g., Authorisation for
Indirect 3GPP Communication via MME defined in clause 6.1.3).
**Phase 3: eRemote-UE access to network via eRelay-UE**
This phase consists of activating indirect 3GPP connection from the eRemote-UE
to the network via the eRelay-UE and then exchanging data with the network.
Phase 3 has to be executed every time the eRemote-UE has to exchange data with
the network via indirect communication. This phase covers 3 different
scenarios:
1\. The eRemote-UE starts data transmission from CM-IDLE mode;
2\. The eRemote-UE continues data transmission in CM-CONNECTED mode due to
eRemote-UE mobility. It includes that eRemote-UE moves from direct
communication to indirect communication, and vice versa;
3\. The eRemote-UE continues data transmission in CM-CONNECTED mode due to
eRelay-UE mobility. That is, the eRelay-UE moves between cells along with one
or more eRemote-UEs.
###### ### Annex B: Solution based on L3 Relay architecture
## B.1 General
This solution is based on L3 ProSe UE-to-Network Relay architecture as defined
in TS 23.303 [6].
\- UE-to-Network Relay Discovery, as defined in clause 5.3.7.
\- Identifiers used for the UE-to-Network Relay discovery and selection is as
defined in clause 4.6.4.3.
\- Specifically, Relay Service Code (RSC) is configured on the Relay and the
Remote UE, as in clause 4.5.1.1.2.3.2.
\- Direct Communication via ProSe UE-to-Network Relay as in clause 5.4.4.
\- After discovering and selecting a Relay as in clause 5.3.7, the Remote UE
establishes a secure layer-2 link over PC5, as in clause 5.4.5.2.
Details on how the L3 Relay architecture satisfies the objectives of the study
are provided in the following clauses.
Editor\'s note: The solution documented in Annex Y is used as the baseline for
the evaluation of other solutions.
## B.2 Support of commercial usage
ProSe Direct Communication was originally limited to Public Safety use because
of the available spectrum and because of service requirements of ProSe. The
ProSe Relay architecture defined in TS 23.303 [6] can be adapted for other
uses when appropriate spectrum and service are identified, e.g. similarly to
the use of ProSe Direct Communication for V2X (See TS 23.285 [8]).
## B.3 Visibility of Remote UE in Core Network
### B.3.1 Authentication and authorization of indirect 3GPP communication
This is also addressed in the Key Issue 1.
In TS 33.303 [9], clause 6.7.3 provided the mechanism for the network (PKMF)
to authenticate and authorize the Remote UE\'s access to the network via the
Relay. This authentication and authorization can be based on a pre-allocated
PRUK ID or the IMSI. The PKMF is also able to interact with BSF or HSS for the
authentication of the Remote UE.
### B.3.2 Awareness of the use of Relay connection
In the Rel-13 Relay design of TS 23.303 [6], the Relay UE reports the Remote
UE information (User Info ID and IP address) towards its MME in the Remote UE
Report procedure, as defined in TS 23.303 [6] clause 5.4.4.1. This Remote UE
information is also forwarded to the S-GW and PGW. Therefore, the core network
is already aware of the Remote UE\'s connection via the Relay.
### B.3.3 Charging support for Remote UE
As described above, with the Remote UE Report procedure, the Remote UE
information (User Info ID and IP address) is reported by the Relay UE to the
core network, i.e. MME, S-GW, and PGW. Therefore, charging support for the
Remote UE is already possible based on existing PS Domain Charging as defined
in TS 32.251 [10].
## B.4 Session continuity support
In Rel-13 Relay design, IP address preservation is not supported, as indicated
in TS 23.303 [6] clause 4.4.3. Session continuity is expected to be supported
via upper layer mechanisms.
For Remote UE with MO traffic or already in CONNECTED mode, the UE can have
direct 3GPP connection (via eNB) and indirect 3GPP connection (via Relay UE)
at the same time, and transfer the session to the IP address obtained from the
Relay UE.
For MT support when the Remote UE is in IDLE mode, the Remote UE can enter
CONNECTED mode via direct 3GPP Communication after having received a paging
message directly from the eNB via Uu. Afterwards, the traffic can be
transferred to the indirect 3GPP Communication via the Relay.
## B.5 QoS control and bearer management over PC5
With Rel-13 Relay design, QoS is provided over the PC5 link using PPPP as
defined in TS 23.303 [6] clause 5.4.6.
## B.6 Support of Non-IP Data delivery
Based on Relay operation specified in TS 23.303 [6], Non-IP data delivery over
user plane is supported as described below.
For a Remote UE that requires Non-IP Data Delivery, it should search for a
Relay with a Relay Service Code (RSC) corresponding to the desired Non-IP APN.
In the Non-IP operation mode, ProSe UE-to-Network Relay does not perform the
IP router function, i.e., it does not allocate IP address to Remote UE and
does not inspect the IP header of the packet. Rather, it simply forwards the
non-IP data between its PDN Connection and the layer-2 link over PC5 with the
Remote UE.
Therefore, in the Establishment of secure Layer-2 link over PC5 procedure
defined in clause 5.4.5.2 of TS 23.303 [6], the Direct Communication Request
(step 1) needs to indicate to the ProSe UE-to-Network Relay that this link is
used for non-IP data and the IP address allocation negotiation is skipped.
Corresponding PC5_S message contents should be updated in stage 3, e.g., a new
type to be added.
Alternatively, the ProSe UE-to-Network Relay could infer the use of non-IP
data from the RSC, and thus does not offer IP address management in the link
establishment. Such protocol details can be decided by Stage 3.
In addition, for non-IP Data support, it is expected that the Relay will
always establish a new PDN connection for each of the Remote UE, since the
traffic from different Remote UEs cannot mixed over the same PDN connection as
of existing Rel-13 specification.
## B.7 Security protection over the PC5
Existing security mechanism in TS 33.303 [9] clauses 6.7.3 and 6.5.6 can
provide integrity and confidentiality protection for the signalling between
Remote UE and Relay, and confidentiality protection for the data traffic. This
offers the same level of security protection as that over the Uu PDCP layer.
## B.8 Identified Issues
The following issues are identified:
\- Privacy protection of eRemote UE\'s traffic: For L3 Relay, packets of the
Remote UE\'s traffic is visible to the Relay UE. To protect the eRemote UE\'s
traffic, a upper layer security mechanism, (e.g., IPSec, TLS, etc.) is needed.
\- The L3 Remote UE authentication involves both CN and Relay UE and the
security key material for the Remote UE is visible by Relay UE.
\- IP address preservation: With application session continuity support, IP
address preservation is not required for L3 Relay.
\- Bearer level QoS support over side link: This issue applies to PC5
interface, regardless of the Relay architecture. Currently the PC5 design
(i.e., PPPP) does not support LTE-Uu like bearer level QoS, since there is no
lower layer control and feedback. To support bearer level QoS, RAN needs to
entirely redesign PC5.
## B.9 Normative specification impacts
The following clauses in TS 23.303 [6] need to be updated to allow the ProSe
Direct Communication to be used for non-public safety use, i.e., for Indirect
3GPP Communication as defined in SA1 for REAR:
\- Clause 4.3.1: PC3 definition needs to be updated.
\- Clause 4.4.1.1: Definition of DPF needs to be updated.
\- Clause 4.4.2: Functional Entity definition for the UE needs update.
\- Clause 4.4.3: Definition of the ProSe UE-to-Network Relay needs to be
updated.
\- Clause 4.5.1.1.2.3: The provisioning information definition needs to be
updated.
\- Clause 4.5.2: The Subscription to ProSe needs to be updates.
\- Clause 4.5.4: ProSe UE-to-Network Relaying definition needs to be updated
to allow use for Indirect 3GPP Communication.
\- Clause 5.3.7: Direct Discovery for Public Safety use should be updated to
allow its use for Indirect 3GPP Communication as well.
\- Clause 5.4.4.5: Update text to allow the Cell ID announcement procedure to
be used for Indirect 3GPP Communication as well.
Optionally, when non-IP Data delivery is required, following updates is also
needed.
\- Clause 5.4.5.2: To add the corresponding support of non-IP Data indication
in step 1 and description of the Relay behaviour.
#