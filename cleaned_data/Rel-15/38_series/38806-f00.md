# Foreword
This Technical Report has been produced by the 3^rd^ Generation Partnership
Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The purpose of the present document is to record the discussion and agreements
that arise from the study item \"Separation of CP and UP for split option 2 of
NR\" in RP-171421 [1].
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] RP-170421:\" New SID on New SID on Separation of CP and UP for split
option 2\".
[2] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[3] 3GPP TR 38.801: \"Study on new radio access technology: Radio access
architecture and interfaces\"
[4] 3GPP TS 38.300: \"NR; Overall description; Stage-2\".
[5] 3GPP TR 38.401: \"NG-RAN; Architecture description\".
# 3 Definitions
For the purposes of the present document, the terms and definitions given in
3GPP TR 21.905 [1] and the following apply. A term defined in the present
document takes precedence over the definition of the same term, if any, in
3GPP TR 21.905 [2].
**Central Unit - Control Plane (CU-CP):** control plane part of the gNB-CU as
defined in TS 38.401 [5], hosting the RRC and the control plane part of the
PDCP protocol.
**Central Unit - User Plane (CU-UP):** user plane part of the gNB-CU as
defined in TS 38.401 [5], hosting the SDAP and the user plane part of the PDCP
protocol.
**Distributed Unit (DU):** corresponds to the gNB-DU as defined in TS 38.401
[5].
**gNB:** as defined in TS 38.300 [4].
# 4 General
The aim of the study is as captured in the SI description document [1]:
1) From TR 38.801 [3], study the scenarios, the feasibility and the benefits
of the separation of the CU-CP (control plane instance of PDCP/RRC protocols)
and the CU-UP (the user plane instance of PDCP (and SDAP) protocols).
2) Identifying details solutions e.g. introducing a standardised control plane
interface between the CU-CP and CU-UP part of the gNB to enable the
possibility of optimizing the physical location of different RAN functions
based on the scenario and desired performance.
3) Study the necessary protocol functions down to the procedure and message
level related to the possible identified solutions e.g. a standardised control
plane interface to enable set-up, modification, and release of the DRB related
resources in the CU-UP, including handling of security keys in the CU-UP for
RAN security activation and configuration. This also needs to take the agreed
F1 interface general principle, and gNB-CU/DU architecture principle into
account.
# 5 Interface functions and procedures
## 5.1 Introduction
The third objective of the SI is reported in the following [1]:
\- \"_Study the necessary protocol functions down to the procedure and message
level related to the possible identified solutions e.g. a standardised control
plane interface to enable set-up, modification, and release of the DRB related
resources in the CU-UP, including handling of security keys in the CU-UP for
RAN security activation and configuration. This also needs to take the agreed
F1 interface general principle, and gNB-CU/DU architecture principle into
account.\"_
In this clause, the functions and procedures of the open interface between CU-
CP and CU-UP are discussed.
## 5.2 Interface Name
The open interface between CU-CP and CU-UP is named E1.
## 5.3 Architecture
The architecture is depicted in Figure 5.3-1.
Figure 5.3-1: Overall RAN architecture with CU-CP and CU-UP separation
The architecture in Figure 5.2-1 is described as follows:
\- A gNB may consist of a CU-CP, multiple CU-UPs and multiple DUs;
\- The CU-CP is connected to the DU through the F1-C interface;
\- The CU-UP is connected to the DU through the F1-U interface;
\- The CU-UP is connected to the CU-CP through the E1 interface;
\- One DU is connected to only one CU-CP;
\- _One CU-UP is connected to only one CU-CP;_
NOTE 1: For resiliency, a DU and/or a CU-UP may be connected to multiple CU-
CPs by appropriate implementation.
\- One DU can be connected to multiple CU-UPs under the control of the same
CU-CP;
\- One CU-UP can be connected to multiple DUs under the control of the same
CU-CP.
NOTE 2: The connectivity between a CU-UP and a DU is established by the CU-CP
using e.g., Bearer or UE Context Management functions.
NOTE 3: The CU-CP selects the appropriate CU-UP(s) for the requested services
for the UE.
NOTE 4: Data forwarding between CU-UPs should be defined (e.g., reuse Xn-U,
E1-U) during the normative work.
## 5.4 E1 Interface General Principles
The general principles for the specification of the F1 interface are as
follows:
\- the E1 interface is open;
\- the E1 interface supports the exchange of signalling information between
the endpoints;
\- from a logical standpoint, the E1 is a point-to-point interface between a
CU-CP and a CU-UP.
NOTE 1: A point-to-point logical interface should be feasible even in the
absence of a physical direct connection between the endpoints.
\- the E1 interface separates Radio Network Layer and Transport Network Layer;
\- the E1 interface enables exchange of UE associated information and non-UE
associated information;
\- the E1 interface is future proof to fulfil different new requirements,
support of new services and new functions.
NOTE 2: The E1 interface is a control interface and is not used for user data
forwarding.
## 5.5 E1 Interface Protocols and Protocol Structure
Figure 5.5-1 shows the protocol structure for E1. The TNL is based on IP
transport, comprising the SCTP on top of IP. The application layer signalling
protocol is referred to as E1AP (E1 Application Protocol).
Figure 5.5-1: Interface protocol structure for E1
## 5.6 E1 Interface Functions and Procedures
### 5.6.1 Introduction
The following clauses describe the basic functions supported over the E1
interface.
### 5.6.2 Non-UE-associated E1 functions
#### 5.6.2.1 E1 interface management function
This function allows to set-up and manage an E1 interface between CU-CP and
CU-UP. The E1 interface management function includes the following procedures:
_\- E1 setup_ : this procedure allows to setup the E1 interface. It includes
the exchange of the parameters needed for interface operation.
_\- E1 reset_ : this procedure allows to reset the E1 interface. It is used to
initialize the peer entity after node setup and after a failure event
occurred. The E1 interface reset is initiated by either the CU-CP or the CU-
UP.
_\- E1 error indication_ : this procedure allows to report detected errors in
one incoming message. The E1 interface reset is initiated by either the CU-CP
or the CU-UP.
NOTE: Whether E1 setup should be triggered by CU-CP or CU-UP or both should be
solved during normative phase.
### 5.6.3 UE-associated E1 functions
#### 5.6.3.1 Bearer management function
This function allows the CU-CP to setup, modify, and release the data radio
bearers (DRBs) in the CU-UP. The Bearer management functions includes the
following procedures:
_\- DRB setup_ : this procedure allows the CU-CP to setup DRBs in the CU-UP,
including the QoS-flow to DRB mapping configuration.
_\- DRB modification_ : this procedure allows the CU-CP to modify DRBs in the
CU-[UP]{.underline}, including the modification of the QoS-flow to DRB mapping
configuration. It can also be used to suspend/resume data transmission.
_\- DRB release_ : this procedure allows the CU-CP to release DRBs in the CU-
UP. It also allows the CU-UP to request the release of DRBs to the CU-CP
(e.g., due to inactivity).
_\- DL Data Notification:_ this procedure allows the CU-CP to inform the CU-UP
in case of new incoming DL traffic for a bearer that was previously suspended.
NOTE 1: The DRB Setup and DRB Modification functions might be used by the CU-
CP to inform the CU-UP about the reflective QoS configuration in favour of a
dedicated procedure.
NOTE 2: The DRB Setup and DRB Modification functions may also be used to
support the reflective QoS in CP/UP separation.
### 5.6.4 Additional E1 functions
The following functions have also been discussed:
\- E1 Load Management: this procedure allows CU-UP and CU-CP to exchange load
information. This function may also include information related to flow
control;
\- E1 Configuration Update; this procedure supports updates in CU-UP
configuration;
\- Inactivity Detection: This procedure allows CU-UP to indicate that the
inactivity timer associated with a UE expires or that the user data is
received for a UE whose inactivity timer has expired;
\- over NG-U interface associated with a new QoS Flow ID (QFI) for which the
QoS parameters are already available in the CU-UP, and there is no association
to an existent DRB. The discussion on this function is also dependent on
whether this use-case will be supported.
These functions and additional E1 functions should be further discussed in
normative phase.
## 5.7 Idle to Connected State Transition
This clause shows the example procedure for the Idle to Connected state
transition with E1, assuming that the CU-CP allocates the UL TEIDs.
Alternatively, the mechanism where CU-UP allocates the UL TEIDs was also
recognized.
NOTE 1: The detailed procedure for F1 and NG should be aligned with the latest
specification during the normative phase.
The call-flow has the following steps:
1-2. UE performs random access procedure.
3\. UE sends an RRC CONNECTION REQUEST. This message will at least include a
CN UE temporary identifier.
4a. Network responds with a L2 contention resolution message. In the L2
message the content of the RRC CONNECTION REQUEST is echoed back to the UE.
This message can be sent before or after step 4b.
4b. The DU forwards the UE RRC message to the CU-CP in an F1-AP INITIAL UL RRC
MESSAGE TRANSFER. This message includes additional information such as a F1-AP
UE identifier, UE assigned C-RNTI and lower layer configuration.
5\. In case the CU-CP decides to accept the UE it will generate an RRC
CONNECTION SETUP message and send this message in an F1-AP DL RRC TRANSFER
message to the DU. In addition to the RRC message the F1-AP message contains
an F1-AP UE identifier. The content of the RRC message may include information
received from the DU in previous step.
6-7. The RRC connection is setup over the radio.
8\. The DU forwards the UE RRC message to the CU-CP. The forwarded RRC message
may contain NAS information, information related to CN node selection and
slicing information, etc.
9\. The CU-CP sends an NG-AP INITIAL UE MESSAGE to the 5GC.
10\. In case the 5GC decides to setup the UE context it will send an NG-AP
INITIAL CONTEXT SETUP REQUEST message.
11\. At this point the RAN receives the UE context and may initiate several
procedures which some may happen in parallel.
Figure 5.7-1: Interface protocol structure for E1
11a-14a. These steps correspond to the security mode command procedure
triggering the setup of UE security. From this point on subsequent radio
signalling or data will be encrypted and the signalling will be integrity
protected. These steps can be performed in parallel to 11b-14b.
11b-14b. Involves setting up resources in the DU and CU-UP for the particular
UE. In the call flow, it is shown that the CU-CP first sends F1-AP UE CONTEXT
SETUP REQUEST to the DU and after receiving the F1-AP UE CONTEXT SETUP
RESPONSE the CU-CP sets up a bearer in the CU-UP.
NOTE 2: In case that the CU-UP allocates the UL TEIDs, two additional messages
need to be exchanged between CU-CP and CU-UP, so that the CU-CP can retrieve
the UL TEIDs before step 11b.
In step 11b the DU is provided with UE context information including UE radio
access capabilities, UE DRB, UL GTP TEID and QoS related information. The DU
then configures and allocates resources for the UE. In step 12b the lower
layer configuration of the DRBs are provided to the CU-CP.
15\. The CU generates an RRC CONNECTION RECONFIGURATION message and sends it
down to the DU. This step need to be performed after 11b-12b since the RRC
message contains lower layer configuration of the DRBs provided by the DU.
Step 15 can happen before 14a and 14b.
16-17. RRC reconfiguration procedure. After this procedure, UL data
transmission can start.
18\. The DU encapsulates the RRC message in F1-AP UL RRC MESSAGE TRANSFER
message and sends to the CU-CP.
19\. The CU-CP acknowledges the context setup request from the 5GC. It also
provides the 5GC with GTP TEIDs for the CU-UP.
## 5.8 Xn Handover
### 5.8.1 Introduction
The following clauses shows 2 variants with regards of the Xn handover
procedure.
NOTE: The detailed procedure for F1 and NG should be aligned with the latest
specification during the normative phase.
### 5.8.2 CU-CP Allocates UL TEID
In this variant it is assumed that the CU-CP assigns the UL GTP TEID of the
CU-UP. This should be possible because the CU-CP controls the operation of the
CU-UP, which also implies that the CU-CP acquires detailed knowledge of the
CU-UPs (including the UL GTP TEID) via configuration (e.g., during the E1
setup phase). The example of Xn handover call-flow is shown in Figure 5.8.2-1.
The following terminology is utilized to describe the entities involved in the
procedure:
\- S-gNB: source gNB
\- T-gNB: target gNB
\- S-DU: source DU
\- S-CU-UP: source CU-UP
\- S-CU-CP: source CU-CP
\- T-DU: target DU
\- T-CU-UP: target CU-UP
\- T-CU-CP: target CU-CP
The call-flow can be logically divided into three phases.
\- The first phase is the Xn handover preparation:
1.UE sends an RRC MEASUREMENT REPORT to S-DU. The event that triggers the
measurement report depends on the UE measurement configuration.
2.S-DU employs the F1AP UL RRC TRANSFER message to forward the RRC measurement
report to S-CU-CP.
3.S-CU-CP takes the handover decision, based on the content of the RRC
measurement report. S-gNB (S-CU-CP) sends the XnAP HANDOVER REQUEST message to
T-gNB (T-CU-CP), passing necessary information to prepare the handover at the
target side.
4.T-CU-CP performs admission control, creates a UE context, identifies T-DU,
and selects T-CU-UP. Then, T-CU-CP sends the F1-AP CONTEXT SETUP REQUEST
message to T-DU, including UE context information and CU-UP-UL-TEID for data
radio bearers.
5.T-DU performs admission control, configures the lower-layers, and creates a
local UE context (including a C-RNTI for the UE). Then, T-DU sends the F1-AP
CONTEXT SETUP RESPONSE message to T-CU-CP, including lower-layers
configuration, C-RNTI, and DU-DL-TEID for data radio bearers.
6.T-CU-CP sends the E1AP BEARER SETUP message to T-CU-UP, including
information for security configuration and QoS-flows to DRB mapping, and DU-
DL-TEID.
7.T-CU-UP applies the configuration received from T-CU-CP. Then, T-CU-UP sends
the E1AP BEARER SETUP RESPONSE message to T-CU-CP.
8.T-gNB (T-CU-CP) sends the XnAP HANDOVER REQUEST ACKNOWLEDGE to S-gNB (S-CU-
CP). The XnAP HANDOVER REQUEST ACKNOWLEDGE message includes a transparent
container to be sent to the UE as an RRC message to perform the handover
(includes C-RNTI). The XnAP HANDOVER REQUEST ACKNOWLEDGE message may also
include RNL/TNL information for the data forwarding tunnels (if applicable).
NOTE 1: Steps 4-7 can be performed in parallel if the T-CU-CP knows the DU-DL-
TEID.
Figure 5.8.2-1: Xn handover with E1 interface (CU-CP allocates UL TEID)
\- The second phase is the Xn handover execution:
9.S-CU-CP sends the F1AP UE MOBILITY COMMAND message to S-DU. The F1AP UE
MOBILITY COMMAND message includes a transparent container that carries the RRC
message to perform handover, which was generated by T-CU-CP and ciphered and
integrity protected by S-CU-CP. The F1AP UE MOBILITY COMMAND message contains
a specific field value to inform S-DU about the handover.
10.S-DU sends the F1AP UE MOBILITY COMMAND ACKNOWLEDGE message to S-CU-CP to
confirm that the handover is accepted. The F1AP UE MOBILITY COMMAND
ACKNOWLEDGE message contains information about the delivery status of the PDCP
PDUs.
11.S-DU sends the RRC CONNECTION RECONFIGURATION MESSAGE to the UE.
12.S-CU-CP sends the E1AP BEARER MODIFICATION message to S-CU-UP. The E1AP
BEARER MODIFICATION message may include the RNL/TNL information for the data
forwarding tunnels (if applicable).
13.S-CU-UP sends the E1AP BEARER MODIFICATION ACK message to S-CU-CP,
including the uplink PDCP SN receiver status and the downlink PDCP SN
transmitter status.
14.S-gNB (S-CU-CP) sends the XnAP SN STATUS TRANSFER message to T-gNB (T-CU-
CP) to convey the uplink PDCP SN receiver status and the downlink PDCP SN
transmitter status.
15.T-CU-CP sends the E1AP SN STATUS TRANSFER message to T-CU-UP to convey the
uplink PDCP SN receiver status and the downlink PDCP SN transmitter status.
16.Data forwarding may start from S-CU-UP to T-CU-UP (if applicable).
17.UE sends a RANDOM-ACCESS preamble to T-DU. It may employ a dedicated RACH
preamble if that was included in the RRC connection reconfiguration message.
18.T-DU sends a RANDOM-ACCESS RESPONSE to UE.
19.UE sends the RRC CONNECTION CONFIGURATION COMPLETE to T-DU (include the
C-RNTI to identify the UE).
20.T-DU employs the F1AP UL RRC TRANSFER message to forward the RRC connection
reconfiguration complete message to T-CU-CP.
21.T-gNB (T-CU-CP) sends an NGAP PATH SWITCH REQUEST message to AMF to inform
that the UE has changed cell. AMF should then contact the UPF to modify PDU
session (not shown). The UPF sends one or more \"end marker\" packets to the
S-CU-UP. Upon receiving the \"end marker\" packets, the S-CU-UP if forwarding
is applicable, forwards the packet toward the T-CU-UP.
22.AMF confirms the NGAP PATH SWITCH REQUEST message with the NGAP PATH SWITCH
REQUEST ACKNOWLEDGE message.
\- The last phase is the resource release in the source:
23.T-gNB (T-CU-CP) sends the XnAP UE CONTEXT RELEASE message to S-gNB (S-CU-
CP). The XnAP UE CONTEXT RELEASE message informs S-gNB (S-CU-CP) that the
handover was successful.
24.S-CU-CP sends the F1AP UE CONTEXT RELEASE message to S-DU, to allow S-DU to
release the resources allocated to the UE.
25.S-CU-UP sends the E1AP DATA FORWARD COMPLETE message to S-CU-CP as soon as
the data forwarding to the target has been completed.
26.S-CU-CP sends the E1AP BEARER RELEASE message to S-CU-UP to release the
data radio bearers and release the corresponding resources.
NOTE 2: How to perform bearer release should be further discussed during
normative work.
27.S-DU releases the UE context and responds to S-CU-CP with a UE CONTEXT
RELEASE COMPLETE message.
### 5.8.3 CU-UP Allocates UL TEID
In this variant it is assumed that the CU-CP is not aware of the UL GTP TEID
of the CU-UP. In this case, the CU-UP would provide the UL GTP TEID to the CU-
CP, after step 3 when the XnAP HANDOVER REQUEST is sent. By this addition only
the first phase of the Xn handover will be affected, namely the Xn Handover
Preparation. In the Figure 5.8.3-1 below only the Xn Handover Preparation
phase is depicted. The same terminology as before is used.
Figure 5.8.3-1: Xn Handover with E1 (CU-UP allocates UL TEID)
The steps in the Xn handover preparation phase are as follows:
1.UE sends an RRC MEASUREMENT REPORT to S-DU. The event that triggers the
measurement report depends on the UE measurement configuration.
2.S-DU employs the F1AP UL RRC TRANSFER message to forward the RRC measurement
report to S-CU-CP.
3.S-CU-CP takes the handover decision, based on the content of the RRC
measurement report. S-gNB (S-CU-CP) sends the XnAP HANDOVER REQUEST message to
T-gNB (T-CU-CP), passing necessary information to prepare the handover at the
target side.
4.T-CU-CP sends the E1-AP BEARER SETUP message to T-CU-UP, including
information for security configuration and QoS-flows to DRB mapping.
5.T-CU-UP applies the configuration received from T-CU-CP. Then, T-CU-UP sends
the E1AP BEARER SETUP RESPONSE message to T-CU-CP including at least E1 UL TNL
address of each DRB, and NG DL TNL address towards NGC.
6.T-CU-CP performs admission control, creates a UE context, identifies T-DU.
Then, T-CU-CP sends the F1-AP CONTEXT SETUP REQUEST message to T-DU, including
UE context information and CU-UP-UL-TEID for data radio bearers.
7.T-DU performs admission control, configures the lower-layers, and creates a
local UE context (including a C-RNTI for the UE). Then, T-DU sends the F1-AP
CONTEXT SETUP RESPONSE message to T-CU-CP, including lower-layers
configuration, C-RNTI, and DU-DL-TEID for data radio bearers.
8.T-CU-CP sends the E1-AP BEARER MODIFICATION message to T-CU-UP with the DU-
DL TNL address of T-DU.
9.T-CU-UP replies with E1AP BEARER MODIFICATION RESPONSE message to T-CU-CP.
10.T-gNB (T-CU-CP) sends the XnAP HANDOVER REQUEST ACKNOWLEDGE to S-gNB (S-CU-
CP). The XnAP HANDOVER REQUEST ACKNOWLEDGE message includes a transparent
container to be sent to the UE as an RRC message to perform the handover
(includes C-RNTI). The XnAP HANDOVER REQUEST ACKNOWLEDGE message may also
include RNL/TNL information for the data forwarding tunnels (if applicable).
NOTE 3: Steps 6-9 can be performed in parallel if the T-CU-CP knows the DU-DL-
TEID.
## 5.9 Secondary Node Addition
The signalling flow illustrated below serves for the purpose of EN-DC
operation.
This clause gives the secondary node addition given that gNB consists of gNB-
CU-CP, gNB-CU-UP and gNB-DU(s), as shown in Figure 5.9-1.
Figure 5.9-1: SgNB addition for option3 with CP-UP separation
1\. The MgNB decides to request the SgNB (i.e., CU-CP) to allocate radio
resources for a specific E-RAB, indicating E-RAB characteristics (E-RAB
parameters, TNL address information corresponding to bearer type). The MgNB
can provide the latest measurement results for the SCG cell(s) requested to be
added. The CU-CP may reject the request.
2.The CU-CP selects CU-UP and sends E1AP message UE BEARER SETUP REQUEST. For
SCG bearer, the message includes information for setup GTP-U tunnel with EPC
(e.g., S1 UL TNL address) and security configuration etc.
3.The CU-UP applies the configurations provided by the CU-CP. It sends back
E1AP message UE BEARER SETUP RESPONSE, including at least S1 DL TNL address
and F1 UL TNL address for SCG bearer. CU-UP could reject some bearers due to
lack of resources.
NOTE: If CU-CP has already got S1 DL TNL address and F1 UL TNL address for SCG
bearer, the step 2 and 3 could be skipped. Then the step 6/7 below are just UE
BEARER SETUP procedure.
4\. The CU-CP determines DU based on Target Cell ID provided by MeNB. The CU-
CP sends F1AP message UE CONTEXT SETUP REQUEST to the DU, including
information for bearer configuration, F1 UL TNL address of CU-UP for SCG
bearer.
5\. The DU may perform check on accepting the incoming request, allocate
respective radio resources and TNL resources. The DU sends response message,
including at least F1 DL TNL address for SCG bearer.
6\. The CU-CP sends E1AP message UE BEARER MODIFICATION REQUEST to the CU-UP,
including at least F1 DL TNL address of DU for SCG bearer.
7\. The CU-UP confirms the modification of the TNL address.
8\. By X2AP message SgNB ADDITION REQUEST ACKNOWLEDGE, the CU-CP provides the
new radio resource of SCG to the MeNB. For SCG bearers, the CU-CP provides the
new radio resource of the SCG together with S1 DL TNL address information for
the respective E-RAB and security algorithm, for split bearers together with
X2 DL TNL address information.
9\. If the MeNB endorses the new configuration, the MeNB sends the
_RRCConnectionReconfiguration_ message to the UE including the new radio
resource configuration of SCG.
10\. The UE applies the new configuration and replies with
_RRCConnectionReconfigurationComplete_ message. In case the UE is unable to
comply with (part of) the configuration included in the
_RRCConnectionReconfiguration_ message, it performs the reconfiguration
failure procedure.
11\. The MeNB informs the CU-CP that the UE has completed the reconfiguration
procedure successfully.
12\. The UE performs synchronisation towards the PSCell of the SgNB. The UE
sends the _RRCConnectionReconfigurationComplete_ message and performs the
Random Access procedure towards the SCG is not defined. The successful RA
procedure towards the SCG is not required for a successful completion of the
RRC Connection Reconfiguration procedure.
13-15. In case of SCG bearers, and dependent on the bearer characteristics of
the respective E-RAB, the MeNB may take actions to minimise service
interruption due to activation of dual connectivity (Data forwarding, SN
Status Transfer). In step 14, the CU-CP needs to forward SN Status to CU-UP
where PDCP-U is located.
16-19. For SCG bearers, the update of the UP path towards the EPC is
performed.
## 5.10 Change of CU-UP
Figure 5.10-1 shows the procedure used for the change of CU-UP.
Figure 5.10-1: Change of CU-UP
1\. Change of CU-UP is triggered in CU-CP.
2\. The CU-CP allocates UL TEID for F1-U used at the target CU-UP to receive
UL user data from the DU.
NOTE 1: As alternative option, the CU-CP communicates with the target CU-UP
and obtains the UL TEID used at the target CU-UP. One option should be
selected during normative work.
3\. The CU-CP sends E1AP BEARER SETUP REQUEST message to the target CU-UP to
setup one or more bearers at the target CU-UP.
4\. The target CU-UP responds the CU-CP with an E1AP BEARER SETUP RESPONSE
message to confirm the bearer setup.
5\. The CU-CP sends E1AP BEARER RELEASE REQUEST message including CU-UP change
indication to the source CU-UP to initiate of the release of one or more
bearers at the source CU-UP. The TEID for data forwarding may be included.
6\. F1 UE context management procedure is performed to modify one or more
bearers at the DU.
7\. SN Status transfer procedure is performed.
8\. Data Forwarding is performed from the source CU-UP to the target CU-UP.
NOTE 2: As alternative option, data forwarding is performed from the source
CU-UP to the target CU-UP through CU-CP (i.e. U-plane is supported in E1). One
option should be selected during normative work.
9-11. Path Update procedure is performed to update the DL TEID towards the
core network. The source CU-UP releases the resources for the UE when it
receives the end marker packet.
## 5.11 Security handling
### 5.11.1 General
Due to CP and UP separation, security handling mechanism should be
investigated, i.e. if NAS security and AS security would be impacted or not.
Since NAS security is negotiated between MME and UE by NAS SMC procedure, CP
and UP separation is AS level architecture update which is invisible to NAS,
NAS level security will not be impacted. Hence, security impacts, if any, may
mainly be on AS level, i.e. on CU-CP and CU-UP. It is worth noting that the
following discussions are based on LTE.
### 5.11.2 Considerations on CU-CP
Technically, security handling for both CU-CP and CU-UP belongs to AS level
security. For AS security, there\'re two key issues, i.e., security algorithm
selection and security key derivation. For security algorithm, take LTE as an
example, there are key derivation algorithm, encryption algorithm and
integrity algorithm. Specifically, key derivation algorithm is used to
derivate KRRCenc, KRRCint, KUPenc and KUPint based on KeNB, which is defined
in TS 33.401 [3]. Meanwhile, encryption and integrity algorithm are selected
based on eNB and UE\'s security capability by AS SMC procedure.
Since AS SMC procedure is also performed in RRC entity, while PDCP-C is
located in CU-CP where RRC entity is also located, and PDCP-C handles control
plane data by performing encryption and integrity based on control plane key
(i.e. KRRCenc, KRRCint). So, for control plane security handling, CU-CP should
be responsible, i.e. CU-CP to handle control plane security using AS SMC
procedure. Based on this observation, whether there are impacts on control
plane security depends on AS SMC procedure to be used in 5G.
### 5.11.3 Considerations on CU-UP
#### 5.11.3.1 Key derivation
While for PDCP-U, since it is located in CU-UP, which handles user plane data
by performing encryption and integrity based on user plane key (i.e., KUP.enc,
KUP.int). The strait forward way is to let CU-CP to derive the KUP.enc and
KUP.int for CU-UP, and also negotiate with UE about the encryption and
integrity algorithm for CU-UP, then forward to CU-UP.
However, if CU-CP itself is located in a place close to air interface, e.g.
outdoor site where is not a security place, then there may be another option,
i.e. it might be safer that this CU-CP just forward the KgNB for the CU-UP
itself to generate KUP.enc, KUP.int, i.e. there are two options for key
derivation:
Option 1: To let CU-CP derive KUP.enc, KUPCint and forward to CU-UP;
Option 2: To let CU-UP derive KUP.enc, KUPCint according to the KgNB forwarded
by CU-CP.
As security algorithm selection is performed between CU-CP and UE, CU-CP
selects both encryption and integrity algorithm. However, PDCP-U in CU-UP
needs user plane encryption and integrity algorithm, so CU-CP needs to forward
the selected encryption and integrity algorithm to CU-UP.
Since CU-CP and CU-UP are two different logical network elements which are
very likely separated physically, then it might be also safer to have
different KgNB (e.g. KgNB and K*gNB) for different network node.
#### 5.11.3.2 PDCP count wrap around
As PDCP-U is located in CU-UP, when the CU-UP finds out that uplink or
downlink PDCP COUNTs are about to wrap around, the KgNB needs to be updated.
So it is obvious that CU-UP could trigger the KgNB update procedure.
Then the further issue is, which node to perform key update. Since KgNB update
depends on which node to perform user plane key derivation. If user plane key
derivation based on KgNB is performed at CU-CP, CU-CP will update the KgNB,
otherwise CU-UP can do the KgNB update itself. Since CU-CP is the entity
handling RRC message, if CU-UP performs KgNB update, CU-UP still needs to
forward the updated KgNB and counter to CU-CP so as to generate RRC message to
inform UE to be aligned with the key update.
#### 5.11.3.3 Counter checks
As PDCP-U is located in CU-UP, the CU-UP should be the trigger to start
counter check. As analyzed above, anyway CU-CP preserves the updated KgNB and
counter in order to inform UE about the key update. Similarly, it is CU-CP\'s
responsibility to perform counter check with UE by RRC messages. That is, CU-
CP executes a counter check procedure to verify the value of the PDCP COUNTs
associated with bearers established in the CU-UP. In short, CU-UP needs to
trigger counter check procedure between CU-CP and UE.
# 6 CP-UP separation: scenarios and assessment results
## 6.1 Introduction
The first objective of the SI is reported in the following [1].
\- _\"From TR 38.801, study the scenarios, the feasibility and the benefits of
the separation of the CU-CP (control plane instance of PDCP/RRC protocols) and
the CU-UP (the user plane instance of PDCP (and SDAP) protocols).\"_
In the flowing, the scenarios, benefits, and drawbacks are described.
## 6.2 Scenarios
### 6.2.1 Introduction
Scenarios for the separation of CU-CP and CU-UP are described in the
following. In this clause, the DU, CU-CP and CU-UP represent logical entities,
as defined in clause 3.1. The \"Distributed entity\", \"Central UP entity\"
and \"Central CP entity\" represent entities which may be deployed at
different physical sites.
### 6.2.2 Scenario 1: CU-CP and CU-UP centralized
This scenario represents the basic case for CU-DU split with dedicated CU-CP
and CU-UP parts which may be located in one common or separated central
entities. The CU-CP is centralized to coordinate the operation of several DUs.
The CU-UP is centralized to provide a central termination point for UP traffic
in dual-connectivity (DC) configurations. An example of this scenario, is
depicted in the Figure 6.2.2-1.
Figure 6.2.2-1: CU-CP and CU-UP centralized
### 6.2.3 Scenario 2: CU-CP distributed and CU-UP centralized
CU-CP is deployed in a distributed manner and co-located with the DU. The CU-
CP supervises the operation of a single DU. The CU-UP is centralized to
provide a central termination point for UP traffic in DC configurations. An
example of this scenario, is depicted in the Figure 6.2.3-1. In this scenario,
the latency of the control signalling toward the UE and F1-C signalling is
reduced as the CU-CP is co-located with the DU.
Figure 6.2.3-1: CU-CP distributed and CU-UP centralized
### 6.2.4 Scenario 3: CU-CP centralized and CU-UP distributed
CU-CP is centralized to coordinate the operation of several DUs. The CU-UP is
distributed and co-located with a single DU. An example of this scenario, is
depicted in the Figure 6.2.4-1.
Figure 6.2.4-1: CU-CP centralize and CU-UP distributed
## 6.3 Benefits and drawbacks
### 6.3.1 Introduction
Some benefits for the separation of CU-CP and CU-UP common to the analysed
scenarios were identified:
\- Flexibility to operate and manage complex networks, supporting different
network topologies, resources, and new service requirements;
\- Alignment with SDN concept that would result in a functional decomposition
of the radio access, based on a partial de-coupled architecture, between user
and control plane entities and on network abstractions;
\- For functions purely handling with CP or UP processes, independent scaling
and realization for control and user plane functions operation;
\- Support of multi-vendor interoperability (e.g., CU-CP and CU-UP could be
provided by different vendors).
\- The gNB deployment with separate CU-CP and CU-UP provides the possibility
of optimizing the location of different RAN functions based on the scenario
and desired performance. For example, the CU-CP could be placed in a location
close to the DU to provide short latency for the critical CP procedures. The
CU-UP could be centralized in a regional or national data center, thus
favouring cloud implementation. An additional CU-UP could be also placed
closer to the DU to provide a local termination point for [...] URLLC traffic.
\- Support of radio resource isolation and improving resource utilization for
network slicing. A slicing instance may cover a geographic area of several ten
to several hundred of gNBs. Central RRM may provide slice-level isolation as
well as improve resource utilization.
On the other hand, the separation of CU-CP and CU-UP introduces new logical
nodes, which may make networking and topology more complicated, thus efforts
on network maintenance may also increase. Furthermore, depending on the
deployment scenarios and topology, control and user plane signalling messages
and their delay between CU-CP and CU-UP may increase.
The following aspects are specific for the identified scenarios, meaning that
above mentioned benefits and drawbacks are applied to all the scenarios
generally.
### 6.3.2 Scenario 1
**Benefits**
Centralized CU-CP potentially provides efficient load balancing and radio
coordination of several DUs. This scenario allows to take maximum advantage of
cloud technologies because both the CU-CP and CU-UP can be implemented in a
virtualized environment. For the case where both CU-CP and CU-UP are deployed
within the same physical node(s), the signalling over the E1 interface would
be internal to the gNB and would not flow over the transport network.
### 6.3.3 Scenario 2
**Benefits**
This scenario allows to take advantage of cloud technologies for user plane
functions while ensuring low latency for critical control plane procedures
**Drawbacks**
E1 signalling between the local Control and the User Plane function would flow
over the transport network, e.g., between the distributed entity and the data
center. This scenario may introduce higher control plane latency for E1
interface compared to Scenario 1. The impact of the extra-latency depends on
the characteristics of the transport network and can be limited by a careful
network design and opportune transport network infrastructure.
### 6.3.4 Scenario 3
**Benefits**
Centralized CU-CP potentially provides efficient load balancing and radio
coordination of several DUs. This scenario also allows to take advantage of
cloud technologies while ensuring low latency for user plane traffic, which is
important for some applications (e.g., critical MTC).
**Drawbacks**
This scenario may introduce higher control plane latency compared to Scenario
1. The impact of the extra-latency depends on the characteristics of the
transport network and can be limited by a careful network design and opportune
transport network infrastructure.
## 6.4 Conclusions for scenarios and benefits
Based on the study for each option, all the scenarios can be considered as
possible deployment with regards of their own benefits and drawbacks.
# 7 CP-UP separation: solutions
Solution #1) The separation of the **CU-CP (control plane instance of PDCP/RRC
protocols) and the CU-UP (the user plane instance of PDCP (and SDAP)
protocols) could be realized by implementation dependent (i.e. no standardized
interface).**
**Solution #2) It can be achieved by a new interface i.e. standardisation of a
dedicated Application Protocols and Transport Network Layer. A standardized
interface could facilitate multivendor scenario.**
# 8 Conclusions
During the study item, it was recognized that the separation of CU-CP and CU-
UP within the gNB based on the introduction of a new interface is technically
feasible and beneficial.
Three scenarios of gNB internal architecture were identified and all the
scenarios can be considered as possible deployments with regards to their own
benefits and drawbacks.
The general architecture and principles have been defined. Furthermore, the
CU-CP and CU-UP interface functions, protocol stack and overall procedures
have been described, including stage 3 aspects.
Some details are to be solved during the normative work including the
introduction of additional interface functions, associated mechanisms,
security aspects (including check with SA3) and the data forwarding between
CU-UPs.
#