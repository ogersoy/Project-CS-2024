# Foreword
This Technical Specification (TS) has been produced by the 3^rd^ Generation
Partnership Project (3GPP).
The present document specifies functions related to Mobile Station (MS) in
idle mode and within the 3GPP system.
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document gives an overview of the tasks undertaken by the Core
network protocols of a Mobile Station (MS) when in idle mode, that is,
switched on but typically not having a dedicated channel allocated. It also
describes the corresponding network functions. The idle mode functions are
also performed by a GPRS MS as long as no dedicated channel is allocated to
the MS. The conditions when the idle mode functions are performed by an MS in
the UTRA RRC connected mode states are specified in 3GPP TS 25.331 [33]. The
conditions when the idle mode functions are performed by an MS in the E-UTRAN
are specified in 3GPP TS 36.304 [43].
The present document defines the PLMN selection for a multi mode MS that
supports both 3GPP and 3GPP2 systems. The common PLMN selection logic covers
also PLMNs that are available in 3GPP2 system, but the present document makes
no changes on the cdma2000^®^ signalling towards networks that are available
via 3GPP2 system.
The present document gives procedures for using the CSG cells, whenever such
use is permitted.
This 3GPP TS outlines how the requirements of the 22 series Technical
Specifications (especially 3GPP TS 22.011 [9]) on idle mode operation shall be
implemented. Further details are given in 3GPP TS 24.008 [23].
Clause 2 of this 3GPP TS gives a general description of the idle mode process.
Clause 3 outlines the main requirements and technical solutions of those
requirements. Clause 4 describes the processes used in idle mode. There is
inevitably some overlap between these clauses.
NOTE: cdma2000^®^ is a registered trademark of the Telecommunications Industry
Association (TIA-USA).
## 1.1 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or non‑specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document._
[1] Void.
[2] 3GPP TS 22.001: \"Principles of circuit telecommunication services
supported by a Public Land Mobile Network (PLMN)\".
[3] 3GPP TS 22.002: \"Circuit Bearer Services (BS) supported by a Public Land
Mobile Network (PLMN)\".
[4] 3GPP TS 22.003: \"Circuit Teleservices supported by a Public Land Mobile
Network (PLMN)\".
[5] 3GPP TS 22.004: \"General on supplementary services\".
[6] Void.
[7] Void
[8] Void.
[9] 3GPP TS 22.011: \"Service accessibility\".
[10] 3GPP TS 22.016: \"International Mobile station Equipment Identities
(IMEI)\".
[11] Void.
[12] 3GPP TS 22.024: \"Description of Charge Advice Information (CAI)\".
[13] 3GPP TS 22.030: \"Man-Machine Interface (MMI) of the User Equipment
(UE)\".
[14] Void.
[15] 3GPP TS 22.041: \"Operator Determined Barring (ODB)\".
[16] 3GPP TS 22.081: \"Line identification Supplementary Services; Stage 1\".
[17] 3GPP TS 22.082: \"Call Forwarding (CF) supplementary services - Stage
1\".
[18] 3GPP TS 22.083: \"Call Waiting (CW) and Call Holding (HOLD);
Supplementary Services - Stage 1\".
[19] 3GPP TS 22.084: \"MultiParty (MPTY) Supplementary Services - Stage 1\".
[20] 3GPP TS 22.085: \"Closed User Group (CUG) Supplementary Services \- Stage
1\".
[21] 3GPP TS 22.086: \"Advice of Charge (AoC) Supplementary Services - Stage
1\".
[22] 3GPP TS 22.088: \"Call Barring (CB) Supplementary Services - Stage 1\".
[22A] 3GPP TS 23.003: \"Numbering, addressing and identification\".
[23] 3GPP TS 24.008: \"Mobile Radio Interface Layer 3 specification, Core
Network Protocols - Stage 3\".
[23A] 3GPP TS 24.301: \"Non-Access-Stratum (NAS) protocol for Evolved Packet
System (EPS); Stage 3\".
[24] 3GPP TS 45.002: \"Multiplexing and multiple access on the radio path\".
[25] 3GPP TS 45.008: \"Radio subsystem link control\".
[26] 3GPP TS 22.060: \"General Packet Radio Service (GPRS); Service
description, Stage 1\".
[27] 3GPP TS 23.060: \"General Packet Radio Service (GPRS); Service
description;Stage 2\".
[28] 3GPP TS 43.064: \"General Packet Radio Service (GPRS); Overall
description of the GPRS Radio Interface; Stage 2\".
[29] Void.
[30] Void.
[31] 3GPP TS 25.101: \"UE Radio transmission and Reception (FDD)\".
[32] 3GPP TS 25.304: \"UE Procedures in Idle Mode and Procedures for Cell
Reselection in Connected Mode\".
[33] 3GPP TS 25.331: \"RRC Protocol Specification\".
[34] 3GPP TS 44.018:\"Mobile radio interface layer 3 specification, Radio
Resource Control Protocol\".
[35] 3GPP TS 43.022: \"Functions related to Mobile Station (MS) in idle mode
and group receive mode\".
> [35A] 3GPP TS 43.318: \"Generic Access Network (GAN); Stage 2\".
>
> [35B] 3GPP TS 44.318: \"Generic Access Network (GAN); Mobile GAN interface
> layer 3 specification; Stage 3\".
[36] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[37] Void.
[38] 3GPP TS 21.111: \"USIM and IC card requirements\".
[39] 3GPP TS 44.060: \"General Packet Radio Service (GPRS);Mobile Station (MS)
- Base Station System (BSS) interface;Radio Link Control/Medium Access Control
(RLC/MAC) protocol\".
[40] 3GPP TS 31.102: \"Characteristics of the USIM Application\".
[41] 3GPP TS 31.111: \"Universal Subscriber Identity Module (USIM),
Application Toolkit (USAT)\".
[42] 3GPP TS 36.331: \"Evolved Universal Terrestrial Radio Access (E-UTRA)
Radio Resource Control (RRC); Protocol specification\".
[43] 3GPP TS 36.304: \"Evolved Universal Terrestrial Radio Access (E-UTRA);
User Equipment (UE) procedures in idle mode\".
[44] 3GPP2 C.S0016-D v1.0: \"Over-the-Air Service Provisioning of Mobile
Stations in Spread Spectrum Standards\".
[45] 3GPP2 C.S0011-C v2.0: \"Recommended Minimum Performance Standards for
cdma2000 Spread Spectrum Mobile Stations\".
[46] 3GPP2 C.S0033-A v2.0: \"Recommended Minimum Performance Standards for
cdma2000 High Rate Packet Data Access Terminal\".
[47] 3GPP TS 24.285: \"Allowed Closed Subscriber Group (CSG) List Management
Object (MO)\".
## 1.2 Definitions and abbreviations
For the purposes of the present document, the abbreviations defined in 3GPP TR
21.905 [36] apply.
**(A/Gb mode only):** Indicates this clause applies only to GSM system. For
multi system case this is determined by the current serving radio access
network.
**(Iu mode only):** Indicates this clause applies only to UMTS system. For
multi system case this is determined by the current serving radio access
network.
**Acceptable Cell:** This is a cell that the MS may camp on to make emergency
calls. It must satisfy criteria which is defined for A/Gb mode in 3GPP TS
43.022 [35] and for Iu mode in 3GPP TS 25.304 [32].
**Access Technology:** The access technology associated with a PLMN. The MS
uses this information to determine what type of radio carrier to search for
when attempting to select a specific PLMN (e.g., GSM, UTRAN, GSM COMPACT or
E-UTRAN). A PLMN may support more than one access technology.
**Allowable PLMN:** In the case of a MS operating in MS operation mode A or B,
**t** his is a PLMN which is not in the list of \"forbidden PLMNs\" in the MS.
In the case of a MS operating in MS operation mode C, this is a PLMN which is
not in the list of \"forbidden PLMNs\" or in the list of \"forbidden PLMNs for
GPRS service\" in the MS
**Allowed CSG list:** See 3GPP TS 22.011 [9].
**Available PLMN:** For GERAN A/Gb mode and GERAN Iu mode see 3GPP TS 43.022
[35]. For UTRAN see 3GPP TS 25.304 [32]. For E-UTRAN see 3GPP TS 36.304 [43].
For cdma2000^®^ 1xRTT and cdma2000^®^ HRPD see 3GPP2 C.S0016 [44].
**Available PLMN/access technology** **combination:** This is an available
PLMN in a specific access technology.
**Camped on a cell:** The MS (ME if there is no SIM) has completed the cell
selection/reselection process and has chosen a cell from which it plans to
receive all available services. Note that the services may be limited, and
that the PLMN may not be aware of the existence of the MS (ME) within the
chosen cell.
**Closed subscriber group (CSG):** See 3GPP TS 22.011 [9].
**Current serving cell:** This is the cell on which the MS is camped.
**CTS MS:** An MS capable of CTS services is a CTS MS.
**EHPLMN:** Any of the PLMN entries contained in the Equivalent HPLMN list.
**Equivalent HPLMN list:** To allow provision for multiple HPLMN codes, PLMN
codes that are present within this list shall replace the HPLMN code derived
from the IMSI for PLMN selection purposes. This list is stored on the USIM and
is known as the EHPLMN list. The EHPLMN list may also contain the HPLMN code
derived from the IMSI. If the HPLMN code derived from the IMSI is not present
in the EHPLMN list then it shall be treated as a Visited PLMN for PLMN
selection purposes.
**Generic Access Network (GAN):** See 3GPP TS 43.318 [35A].
**GAN mode:** See 3GPP TS 43.318 [35A].
**GPRS MS:** An MS capable of GPRS services is a GPRS MS.
**MS operation mode:** See 3GPP TS 23.060 [27].
**High quality signal:** The high quality signal limit is used in the PLMN
selection procedure. It is defined in the appropriate AS specification: 3GPP
TS 43.022 [35] for the GSM radio access technology, 3GPP TS 25.304 [32] for
the UMTS radio access technology (FDD or TDD mode) , 3GPP TS 36.304 [43] for
the E‑UTRAN radio access technology. For 3GPP2 access technologies the high
quality signal limit is defined in 3GPP2 C.S0011 [45] for cdma2000^®^ 1xRTT
and in 3GPP2 C.S0033 [46] for cdma2000^®^ HRPD.
**Home PLMN:** This is a PLMN where the MCC and MNC of the PLMN identity match
the MCC and MNC of the IMSI. Matching criteria are defined in Annex A.
**In A/Gb mode,...:** Indicates this clause applies only to GSM System. For
multi system case this is determined by the current serving radio access
network.
**In Iu mode,...:** Indicates this clause applies only to UMTS System. For
multi system case this is determined by the current serving radio access
network.
**Localised Service Area (LSA):** A localised service area consists of a cell
or a number of cells. The cells constituting a LSA may not necessarily provide
contiguous coverage.
**Location Registration (LR):** An MS which is IMSI attached to non-GPRS
services only performs location registration by the Location Updating
procedure. A GPRS MS which is IMSI attached to GPRS services or to GPRS and
non-GPRS services performs location registration by the Routing Area Update
procedure only when in a network of network operation mode I. Both location
updating and routing area update procedures are performed independently by the
GPRS MS when it is IMSI attached to GPRS and non-GPRS services in a network of
network operation mode II or III (see 3GPP TS 23.060 [27]). An MS which is
attached via the E-UTRAN performs location registration by the tracking area
update procedure.
**MS:** Mobile Station. The present document makes no distinction between MS
and UE.
**Network Type:** The network type associated with HPLMN or a PLMN on the PLMN
selector (see 3GPP TS 31.102 [40]). The MS uses this information to determine
what type of radio carrier to search for when attempting to select a specific
PLMN. A PLMN may support more than one network type.
**Registered PLMN (RPLMN):** This is the PLMN on which certain LR outcomes
have occurred (see table 1). In a shared network the RPLMN is the PLMN defined
by the PLMN identity of the CN operator that has accepted the LR.
**Registration:** This is the process of camping on a cell of the PLMN and
doing any necessary LRs.
**Registration Area:** A registration area is an area in which mobile stations
may roam without a need to perform location registration. The registration
area corresponds to location area (LA) for performing location updating
procedure, to routing area for performing the GPRS attach or routing area
update procedures, and to list of tracking areas (TAs) for performing the EPS
attach or tracking area update procedure.
The PLMN to which a cell belongs (PLMN identity) is given in the system
information transmitted on the BCCH (MCC + MNC part of LAI). In a shared
network a cell belongs to all PLMNs given in the system information
transmitted on the BCCH.
**Selected PLMN:** This is the PLMN that has been selected according to
subclause 3.1, either manually or automatically.
**Shared Network:** An MS considers a cell to be part of a shared network,
when multiple PLMN identities are received on the BCCH.
**SIM:** Subscriber Identity Module (see 3GPP TS 21.111 [38]). The present
document makes no distinction between SIM and USIM.
**SoLSA exclusive access:** Cells on which normal camping is allowed only for
MS with Localised Service Area (LSA) subscription.
**Suitable Cell:** This is a cell on which an MS may camp. It must satisfy
criteria which is defined for GERAN A/Gb mode or GERAN Iu mode in 3GPP TS
43.022 [35], for UTRAN in 3GPP TS 25.304 [32] and for E-UTRAN in 3GPP TS
36.304 [43]. For 3GPP2 access technologies the criteria are defined in 3GPP2
C.S0011 [45] for cdma2000^®^ 1xRTT and in 3GPP2 C.S0033 [46] for cdma2000^®^
HRPD.
**Steering of Roaming:** A technique whereby a roaming UE is encouraged to
roam to a preferred roamed-to network by the HPLMN.
**Visited PLMN** : This is a PLMN different from the HPLMN (if the EHPLMN list
is not present or is empty) or different from an EHPLMN (if the EHPLMN list is
present).
# 2 General description of idle mode
When an MS is switched on, it attempts to make contact with a public land
mobile network (PLMN). The particular PLMN to be contacted may be selected
either automatically or manually.
The MS looks for a suitable cell of the chosen PLMN and chooses that cell to
provide available services, and tunes to its control channel. This choosing is
known as \"camping on the cell\". The MS will then register its presence in
the registration area of the chosen cell if necessary, by means of a location
registration (LR), GPRS attach or IMSI attach procedure.
If the MS loses coverage of a cell, or find a more suitable cell, it reselects
onto the most suitable cell of the selected PLMN and camps on that cell. If
the new cell is in a different registration area, an LR request is performed.
If the MS loses coverage of a PLMN, either a new PLMN is selected
automatically, or an indication of which PLMNs are available is given to the
user, so that a manual selection can be made.
Registration is not performed by MSs only capable of services that need no
registration.
The purpose of camping on a cell in idle mode is fourfold:
a) It enables the MS to receive system information from the PLMN.
b) If the MS wishes to initiate a call, it can do this by initially accessing
the network on the control channel of the cell on which it is camped.
c) If the PLMN receives a call for the MS, it knows (in most cases) the
registration area of the cell in which the MS is camped. It can then send a
\"paging\" message for the MS on control channels of all the cells in the
registration area. The MS will then receive the paging message because it is
tuned to the control channel of a cell in that registration area, and the MS
can respond on that control channel.
d) It enables the MS to receive cell broadcast messages.
If the MS is unable to find a suitable cell to camp on, or the SIM is not
inserted, or if it receives certain responses to an LR request (e.g.,
\"illegal MS\"), it attempts to camp on a cell irrespective of the PLMN
identity, and enters a \"limited service\" state in which it can only attempt
to make emergency calls.
In A/Gb mode, if the CTS MS is in CTS mode only or in automatic mode with CTS
preferred, it will start by attempting to find a CTS fixed part on which it is
enrolled.
The idle mode tasks can be subdivided into five processes:
\- PLMN selection;
\- CSG selection (UTRAN and E-UTRAN only);
\- Cell selection and reselection;
\- Location registration; and
\- CTS fixed part selection (A/Gb mode only).
In A/Gb mode, to make this initial CTS fixed part selection, the MS shall be
enrolled on at least one fixed part.
The relationship between these processes is illustrated in figure 1 in clause
5. The states and state transitions within each process are shown in figure
2a, figure 2b, and figure 3 in clause 5.
# 3 Requirements and technical solutions
The following clauses list the main requirements of idle mode operation and
give an outline of the technical solution.
## 3.1 PLMN selection and roaming
The MS normally operates on its home PLMN (HPLMN) or equivalent home PLMN
(EHPLMN). However a visited PLMN (VPLMN) may be selected, e.g., if the MS
loses coverage. There are two modes for PLMN selection:
i) Automatic mode ‑ This mode utilizes a list of PLMNs in priority order. The
highest priority PLMN which is available and allowable is selected.
ii) Manual mode ‑ Here the MS indicates to the user which PLMNs are available.
Only when the user makes a manual selection does the MS try to obtain normal
service on the VPLMN.
To prevent repeated attempts to have roaming service on a not allowed area
(i.e. LA or TA), when the MS is informed that an area is forbidden, the LA or
TA is added to a list of \"forbidden LAs for roaming\" or \"forbidden TAs for
roaming\" respectively which is stored in the MS. These list s, if existing,
are deleted when the MS is switched off or when the SIM is removed. LA area
restrictions are always valid for complete location areas independent of
possible subdivision into GPRS routing areas. The structure of the routing
area identifier (see 3GPP TS 23.003 [22A]) supports area restriction on LA
basis.
If a message with cause value #15 (see 3GPP TS 24.008 [23] and 3GPP TS 24.301
[23A]) is received by an MS, then the MS shall take the following actions
depending on the access technology in which the message was received:
GSM, GSM COMPACT or UTRAN:
The location area is added to the list of \"forbidden LAs for roaming\" which
is stored in the MS. The MS shall then search for a suitable cell in the same
PLMN but belonging to an LA or TA which is not in the \"forbidden LAs for
roaming\" or \"forbidden TAs for roaming\" list respectively.
E-UTRAN:
The tracking area is added to the list of \"forbidden TAs for roaming\" which
is stored in the MS. The MS shall then search for a suitable cell in the same
PLMN but belonging to a TA or LA which is not in the \"forbidden TAs for
roaming\" or \"forbidden LAs for roaming\" list respectively
If a message with cause value \"PLMN not allowed\" is received by an MS in
response to an LR request from a VPLMN, that VPLMN is added to a list of
\"forbidden PLMNs\" in the SIM and thereafter that VPLMN will not be accessed
by the MS when in automatic mode. A PLMN is removed from the \"forbidden
PLMNs\" list if, after a subsequent manual selection of that PLMN, there is a
successful LR. This list is retained when the MS is switched off or the SIM is
removed. The HPLMN (if the EHPLMN list is not present or is empty) or an
EHPLMN (if the EHPLMN list is present) shall not be stored on the list of
\"forbidden PLMNs\".
In A/Gb mode, an ME not supporting SoLSA may consider a cell with the escape
PLMN code (see 3GPP TS 23.073) to be a part of a PLMN belonging to the list of
\"forbidden PLMNs\".
Optionally the ME may store in its memory an extension of the \"forbidden
PLMNs\" list. The contents of the extension of the list shall be deleted when
the MS is switched off or the SIM is removed.
If a message with cause value \"GPRS services not allowed in this PLMN\" is
received by an MS in response to an GPRS attach, GPRS detach, routing area
update, EPS attach or tracking area update request (see 3GPP TS 24.008 [23]
and 3GPP TS 24.301 [23A]) from a VPLMN, that VPLMN is added to a list of
\"forbidden PLMNs for GPRS service\" which is stored in the MS and thereafter
that VPLMN will not be accessed by the MS for GPRS service when in automatic
mode. This list is deleted when the MS is switched off or when the SIM is
removed. A PLMN is removed from the list of \"forbidden PLMNs for GPRS
service\" if, after a subsequent manual selection of that PLMN, there is a
successful GPRS attach or EPS attach. The maximum number of possible entries
in this list is implementation dependant, but must be at least one entry. The
HPLMN (if the EHPLMN list is not present or is empty) or an EHPLMN (if the
EHPLMN list is present) shall not be stored on the list of \"forbidden PLMNs
for GPRS service\".
If the MS is in GAN mode and a \"Location not allowed\" message is received
(see 3GPP TS 44.318 [35B]), then the MS may attempt to select another PLMN so
that further GAN registrations may again be attempted. The selection of the
PLMN either automatically or manually is implementation dependent.
## 3.1A CSG selection / restriction
If the MS supports CSG, it is provisioned with a list of allowed CSG
identities and associated PLMN identities from the USIM if the list is
available in the USIM or as described in 3GPP TS 24.285 [47] if the list is
not available in the USIM. This list has zero or more entries. There are two
modes of CSG selection:
\- Automatic mode: This mode utilizes the list of allowed CSG identities.
After a PLMN is selected, the MS camps on a cell in that PLMN only if the cell
is either not a CSG cell or it is a CSG cell with a CSG identity that is in
the Allowed CSG list. The idle mode procedures of NAS are not impacted by this
mode.
\- Manual mode: In this mode, the MS indicates to the user the list of
available CSGs in the currently registered PLMN. The list of CSGs presented to
the user is not restricted by the Allowed CSG list stored in the MS. After the
user makes a selection, the MS camps on a cell with the selected CSG identity
and may attempt to register with the associated PLMN (see 3GPP TS 24.008 [23]
and 3GPP TS 24.301 [23A]).
## 3.2 Regional provision of service
An MS may have a \"regionally restricted service\" where it can only obtain
service on certain areas (i.e. LAs or TAs). If such an MS attempts to camp on
a cell of an area for which it does not have service entitlement, when it does
an LR request, it will receive a message with cause value #12 (see 3GPP TS
24.008 [23] and 3GPP TS 24.301 [23A]). In this case, the MS shall take the
following actions depending on the access technology in which the message was
received:
GSM, GSM COMPACT or UTRAN:
  * The MS stores the forbidden LA identity (LAI) in a list of \"forbidden LAs for regional provision of service\", to prevent repeated access attempts on a cell of the forbidden LA. This list is deleted when the MS is switched off or the SIM is removed. The MS enters the limited service state.
E-UTRAN:
The MS stores the forbidden TA identity (TAI) in a list of \"forbidden TAs for
regional provision of service\", to prevent repeated access attempts on a cell
of the forbidden TA. This list is deleted when the MS is switched off or the
SIM is removed. The MS enters the limited service state.
In A/Gb mode, a cell may be reserved for SoLSA exclusive access (see 3GPP TS
24.008 [23] and 3GPP TS 44.060 [39]). An MS is only allowed to camp normally
on such a cell if it has a Localised Service Area subscription to the cell.
Other MS may enter the limited service state.
NOTE: In A/Gb mode, in a SoLSA exclusive cell the MCC+MNC code is replaced by
a unique escape PLMN code (see 3GPP TS 23.073), not assigned to any PLMN, in
SI3 and SI4. An MS not supporting SoLSA may request for location update to an
exclusive access cell. In this case the location attempt is rejected with the
cause \"PLMN not allowed\" and the escape PLMN code is added to the list of
the \"forbidden PLMNs\".
## 3.3 Borders between registration areas
If the MS is moving in a border area between registration areas, it might
repeatedly change between cells of different registration areas. Each change
of registration area would require an LR, which would cause a heavy signalling
load and increase the risk of a paging message being lost. The access stratum
shall provide a mechanism to limit this effect.
## 3.4 Access control
### 3.4.1 Access control
Due to problems in certain areas, network operators may decide to restrict
access from some MSs (e.g., in case of congestion), and for this reason, a
mechanism for common access control is provided. In A/Gb mode and Iu mode a
mechanism for domain specific access control is also provided (see 3GPP TS
43.022 [35] and 3GPP TS 25.304 [32]).
In the case that a network operator decides to restrict access they may as an
option allow restricted MSs to respond to paging messages and/or to perform
location registrations. Mechanisms to allow this optional access are provided
(see 3GPP TS 25.304 [32]).
A network operator can also restrict some MSs to access the network for
location registration, although via common access class control or domain
specific access class control the MSs are permitted to access the network for
other purposes.
### 3.4.2 Forbidden LA or TA for regional provision of service
When the MS is camped on a cell, the LA or TA of which belongs to the list of
\"forbidden LAs for regional provision of service\" or \"forbidden TAs for
regional provision of service\", the MS is not allowed to initiate
establishment of a CM connection except for an emergency call; it may respond
to paging. Also, the MS is not allowed to request GPRS services when camped on
a cell of a LA or TA of which belongs to the list of \"forbidden LAs for
regional provision of service\" or \"forbidden TAs for regional provision of
service\".
## 3.5 No suitable cell (limited service state)
There are a number of situations in which the MS is unable to obtain normal
service from a PLMN. These include:
a) Failure to find a suitable cell of the selected PLMN;
b) No SIM in the MS;
c) A \"PLMN not allowed\" response to an LR;
d) An \"illegal MS\", \"illegal ME\" or \"IMSI unknown in HLR\" response to an
LR; (Any SIM in the ME is then considered \"invalid\".)
e) A \"GPRS not allowed\" response to an LR of a GPRS MS attached to GPRS
services only. (The cell selection state of GPRS MSs attached to GPRS and non-
GPRS depends on the outcome of the location updating.)
(In automatic PLMN selection mode, events (a), (c) and (e) would normally
cause a new PLMN selection, but even here, the situation may arise when no
PLMNs are available and allowable for use).
Under any of these conditions, the MS attempts to camp on an acceptable cell,
irrespective of its PLMN identity, so that emergency calls can be made if
necessary. When in the limited service state with a valid SIM, the MS shall
search for available and allowable PLMNs in the manner described in subclause
4.4.3.1 and when indicated in the SIM also as described in subclause 4.4.3.4.
No LR requests are made until a valid SIM is present and either a suitable
cell is found or a manual network reselection is performed. In the limited
service state the presence of the MS need not be known to the PLMN on whose
cell it has camped.
There are also other conditions under which only emergency calls may be made.
These are shown in table 2 in clause 5.
## 3.6 CTS fixed part selection (A/Gb mode only)
In CTS mode only or in automatic mode with CTS preferred, the CTS MS normally
operates on a CTS fixed part on which the mobile station is already enrolled.
If the CTS MS loses CTS coverage in these modes, it shall attempt periodically
to select again a CTS fixed part.
To select a CTS fixed part, the CTS MS shall listen to the CTSBCH frequencies
of all the fixed parts on which the MS is currently enrolled.
If the CTS MS is moving in a border area between one area with CTS coverage
and one without it, it might repeatedly require CTS attachments and LU on the
PLMN. To prevent this, the criteria C1_CTS and C2_CTS (defined in 3GPP TS
45.008 subclause 11.1) are used. To attach to a CTS FP, the C1_CTS criterion
shall be greater than zero. When the C2_CTS criterion falls below zero, the
CTS MS shall consider itself to be no more under CTS coverage.
# 4 Overall process structure
## 4.1 Process goal
The aim of the idle mode processes is to ensure that the registered PLMN is
the selected PLMN.
## 4.2 States description
Each of the processes of PLMN selection, cell selection and location
registration can be described by a set of states. The overall state of the
mobile is thus a composite of the states of the three processes. In some
cases, an event which causes a change of state in one process may trigger a
change of state in another process, e.g., camping on a cell in a new
registration area triggers an LR request. The relationship between the
processes is illustrated in figure 1 in clause 5.
The states in which the MS may be, for each of the processes, are described
below and illustrated in figures 2 to 4 in clause 5. For many of the states, a
fuller description can be found in other Technical Specifications, and a
reference to the Technical Specification is given after the state description.
In the event of any conflict between the diagrams and the text in the present
document, the text takes precedence.
## 4.3 List of states
### 4.3.1 List of states for the PLMN selection process
#### 4.3.1.1 List of states for automatic mode (figure 2a)
A1 Trying RPLMN ‑ The MS is trying to perform a Location Registration on the
registered PLMN.
A2 On PLMN ‑ The MS has successfully registered on a PLMN.
A3 Trying PLMN ‑ The MS is trying to register on a PLMN in the ordered list of
PLMNs.
A4 Wait for PLMNs to appear ‑ There are no allowable and available PLMNs at
present and the MS is waiting for one to appear.
A5 HPLMN search in progress ‑ The MS is trying to find if the HPLMN is
available.
A6 No SIM ‑ There is no SIM in the MS, or certain LR responses have been
received.
#### 4.3.1.2 List of states for manual mode (figure 2b)
M1 Trying registered PLMN ‑ The MS is trying to perform a Location
Registration on the registered PLMN.
M2 On PLMN ‑ The MS has successfully registered on a PLMN.
M3 Not on PLMN ‑ The MS has failed to register on the selected PLMN.
M4 Trying PLMN ‑ The MS is trying to register on a user selected PLMN.
M5 No SIM ‑ There is no SIM in the MS, or certain LR responses have been
received.
### 4.3.2 List of states for location updating (figure 3)
The states are entered depending on responses to location update (LU)
requests.
### 4.3.3 List of states for location registration (figure 3)
The states are entered depending on responses to location registration (LR)
requests. Independent update states exist for GPRS and for non-GPRS operation
in MSs capable of GPRS and non-GPRS services.
L1 Updated ‑ The MS enters this state if an LR request is accepted. The update
status is set to \"updated\". The GPRS and the non-GPRS update state of a MS
may enter \"updated\" as a result of combined signalling or as a result of
individual signalling depending on the capabilities of the network.
L2 Idle, No IMSI ‑ The MS enters this state if an LR request is rejected with
cause:
a) IMSI unknown in HLR;
b) illegal ME;
c) illegal MS;
d) GPRS services and non-GPRS services not allowed,
or if there is no SIM. All update states of a MS enter this state regardless
whether received by individual or combined signalling for events b) and c).
Event a) has no influence on the GPRS update state. Events b) and c) result in
\"Roaming not allowed\" for the GPRS and/or non-GPRS update status depending
on the specific location registration procedure. Event d) results in \"Roaming
not allowed\" for the GPRS update state.
If a SIM is present, the non-GPRS update status of the SIM is set to \"Roaming
not allowed\".
L3 Roaming not allowed ‑ The MS enters this state if it receives an LU reject
message with the cause:
a) PLMN not allowed;
b) Location area not allowed;
c) Tracking area not allowed;
d) Roaming not allowed in this location area;
e) Roaming not allowed in this tracking area;
f) GPRS services not allowed in this PLMN;
g) No Suitable Cells In Location Area;
h) No Suitable Cells In Tracking Area;
i) Not authorized for this CSG.
Except from event f) all update states of the MS are set to \"Roaming not
allowed\" regardless whether received by individual or combined signalling.
Event f) results in \"Roaming not allowed\" for the GPRS update state only.
Event f) has no influence on the non-GPRS update state. The behaviour of the
MS in the roaming not allowed state is dependent on the LR reject cause as
shown in table 2 in clause 5. Additionally:
\- in automatic mode, \"PLMN not allowed\", \"Roaming not allowed in this
location area\" and \"Roaming not allowed in this tracking area\" cause the
Automatic Network Selection procedure of subclause 4.4.3.1.1 to be started; it
is also caused by \"GPRS services not allowed in this PLMN\" when received by
a GPRS MS operating in MS operation mode C;
\- in manual mode, \"PLMN not allowed\" and \"Roaming not allowed\" cause the
Manual Network Selection procedure of subclause 4.4.3.1.2 to be started; it is
also caused by \"GPRS services not allowed in this PLMN\" when received by a
GPRS MS operating in MS operation mode C.
L4 Not updated ‑ The MS enters this state if any LR failure not specified for
states L2 or L3 occurs, in which cases the MS is not certain whether or not
the network has received and accepted the LR attempt. The non-GPRS update
status on the SIM and/or the GPRS update status are set to \"not updated\"
depending on the specific location registration procedure and their outcome.
NOTE This clause does not describe all the cases. For more details refer to
3GPP TS 24.008 [23]
## 4.4 PLMN selection process
### 4.4.1 Introduction
There are two modes for PLMN selection, automatic and manual. These are
described in subclauses 4.4.3 below and illustrated in figures 2a to 2b in
clause 5.
### 4.4.2 Registration on a PLMN
The MS shall perform registration on the PLMN if the MS is capable of services
which require registration. In both automatic and manual modes, the concept of
registration on a PLMN is used. An MS successfully registers on a PLMN if:
a) The MS has found a suitable cell of the PLMN to camp on; and
b) An LR request from the MS has been accepted in the registration area of the
cell on which the MS is camped (see table 1).
### 4.4.3 PLMN selection
The registration on the selected PLMN and the location registration are only
necessary if the MS is capable of services which require registration.
Otherwise, the PLMN selection procedures are performed without registration.
The ME shall utilise all the information stored in the SIM related to the PLMN
selection; e.g. \"HPLMN Selector with Access Technology\", \"Operator
controlled PLMN Selector with Access Technology\", \"User Controlled PLMN
Selector with Access Technology\", \"Forbidden PLMNs\", \"Equivalent HPLMN\",
see 3GPP TS 31.102 [40].
The \"HPLMN Selector with Access Technology\", \"User Controlled PLMN Selector
with Access Technology\" and \"Operator Controlled PLMN Selector with Access
Technology\" data files in the SIM include associated access technologies for
each PLMN entry, see 3GPP TS 31.102 [40]. The PLMN/access technology
combinations are listed in priority order. If an entry indicates more than one
access technology, then no priority is defined for the access technologies
within this entry and the priority applied to each access technology within
this entry is an implementation issue. If no particular access technology is
indicated in an entry, it shall be assumed that all access technologies
supported by the ME apply to the entry. If an entry only indicates access
technologies not supported by the ME, the entry shall be ignored. If an entry
indicates at least one access technology supported by the ME, the entry shall
be used in the PLMN selection procedures if the other criteria defined for the
specific PLMN selection procedures are fulfilled.
The Mobile Equipment stores a list of \"equivalent PLMNs\". This list is
replaced or deleted at the end of each location update procedure, routing area
update procedure, GPRS attach procedure, tracking area update procedure and
EPS attach procedure. The stored list consists of a list of equivalent PLMNs
as downloaded by the network plus the PLMN code of the registered PLMN that
downloaded the list. All PLMNs in the stored list, in all access technologies
supported by the PLMN, are regarded as equivalent to each other for PLMN
selection, cell selection/re-selection and handover.
When the MS reselects to a cell in a shared network and the cell is a suitable
cell for multiple PLMN identities received on the BCCH, the AS indicates these
multiple PLMN identities to the NAS according to 3GPP TS 25.304 [32] and 3GPP
TS 36.304 [43]. The MS shall choose one of these PLMNs. If the registered PLMN
is available among these PLMNs, the MS shall not choose a different PLMN.
The MS shall not use the PLMN codes contained in the \"HPLMN Selector with
Access Technology\" data file.
It is possible for the home network operator to identify alternative Network
IDs as the HPLMN. If the EHPLMN list is present, and not empty, the entries in
the EHPLMN list are used in the network selection procedures. When attempting
to select a network the highest priority EHPLMN that is available shall be
selected. If the EHPLMN list is present and is empty or if the EHPLMN list is
not present, the HPLMN derived from the IMSI is used for network selection
procedures.
NOTE 1: The \"HPLMN Selector with Access Technology\" data file is only used
by the MS to get the HPLMN access technologies related to the HPLMN code which
corresponds to the PLMN code included in the IMSI if the EHPLMN list is not
present or is empty. If the EHPLMN list is present then this data field is
applicable to all the entries within the EHPLMN list.
NOTE 2: Different GSM frequency bands (e.g. 900, 1800, 1900, 400) are all
considered GSM access technology. An MS supporting more than one band should
scan all the bands it's supports when scanning for GSM frequencies. However
GSM COMPACT systems which use GSM frequency bands but with the CBPCCH
broadcast channel are considered as a separate access technology from GSM.
NOTE 3: The inclusion of the HPLMN derived from the IMSI in the EHPLMN list is
allowed. The priority of the HPLMN derived from the IMSI is given by its
position in the EHPLMN list, see 3GPP TS 31.102 [40]
#### 4.4.3.1 At switch‑on or recovery from lack of coverage
At switch on, or following recovery from lack of coverage, the MS selects the
registered PLMN or equivalent PLMN (if it is available) using all access
technologies that the MS is capable of and if necessary (in the case of
recovery from lack of coverage, see subclause 4.5.2) attempts to perform a
Location Registration.
EXCEPTION: As an alternative option to this, if the MS is in automatic network
selection mode and it finds coverage of an EHPLMN, the MS may register to the
highest priority EHPLMN available and not return to the registered PLMN. If
the EHPLMN list is not present or is empty, and the HPLMN is available, the MS
may register on the HPLMN and not return to the registered PLMN. The operator
shall be able to control by SIM configuration whether an MS that supports this
option shall perform this alternative behaviour.
EXCEPTION: In A/Gb mode an MS with voice capability, shall not search for
CPBCCH carriers. In A/Gb mode an MS not supporting packet services shall not
search for CPBCCH carriers.
If successful registration is achieved, the MS indicates the selected PLMN.
If there is no registered PLMN, or if registration is not possible due to the
PLMN being unavailable or registration failure, the MS follows one of the
following two procedures depending on its PLMN selection operating mode. At
switch on, if the MS provides the optional feature of user preferred PLMN
selection operating mode at switch on then this operating mode shall be used.
EXCEPTION: At switch on, if the MS is in manual mode and neither registered
PLMN nor PLMN that is equivalent to it is available but EHPLMN is available,
then instead of performing the manual network selection mode procedure of
subclause 4.4.3.1.2 the MS may select and attempt registration on the highest
priority EHPLMN. If the EHPLMN list is not available or is empty and the HPLMN
is available, then the MS may select and attempt registration on the HPLMN.
The MS shall remain in manual mode.
NOTE 1: If successful registration is achieved, then the current serving PLMN
becomes the registered PLMN and the MS does not store the previous registered
PLMN for later use.
EXCEPTION: If registration is not possible on recovery from lack of coverage
due to the registered PLMN being unavailable, an MS attached to GPRS services
may, optionally, continue looking for the registered PLMN for an
implementation dependent time.
NOTE 2: An MS attached to GPRS services should use the above exception only if
one or more PDP contexts are currently active.
##### 4.4.3.1.1 Automatic Network Selection Mode Procedure
The MS selects and attempts registration on other PLMN/access technology
combinations, if available and allowable, in the following order:
i) either the HPLMN (if the EHPLMN list is not present or is empty) or the
highest priority EHPLMN that is available (if the EHPLMN list is present) ;
ii) each PLMN/access technology combination in the \"User Controlled PLMN
Selector with Access Technology\" data file in the SIM (in priority order);
iii) each PLMN/access technology combination in the \"Operator Controlled PLMN
Selector with Access Technology\" data file in the SIM (in priority order);
iv) other PLMN/access technology combinations with received high quality
signal in random order;
v) other PLMN/access technology combinations in order of decreasing signal
quality.
When following the above procedure the following requirements apply:
a) An MS with voice capability shall ignore PLMNs for which the MS has
identified at least one GSM COMPACT.
b) In A/Gb mode or GSM COMPACT, an MS with voice capability, or an MS not
supporting packet services shall not search for CPBCCH carriers.
c) In ii and iii, the MS should limit its search for the PLMN to the access
technology or access technologies associated with the PLMN in the appropriate
PLMN Selector with Access Technology list (User Controlled or Operator
Controlled selector list).
An MS using a SIM without access technology information storage (i.e. the
\"User Controlled PLMN Selector with Access Technology\" and the \"Operator
Controlled PLMN Selector with Access Technology\" data files are not present)
shall instead use the \"PLMN Selector\" data file, for each PLMN in the \"PLMN
Selector\" data file, the MS shall search for all access technologies it is
capable of. The priority ordering amongst the access technologies is
implementation dependent.
d) In iv and v, the MS shall search for all access technologies it is capable
of, before deciding which PLMN to select.
e) In ii, and iii, a packet only MS which supports GSM COMPACT, but using a
SIM without access technology information storage (i.e. the \"User Controlled
PLMN Selector with Access Technology\" and the \"Operator Controlled PLMN
Selector with Access Technology\" data files are not present) shall instead
use the \"PLMN Selector\" data file, for each PLMN in the \"PLMN Selector\"
data file, the MS shall search for all access technologies it is capable of
and shall assume GSM COMPACT access technology as the lowest priority radio
access technology.
f) In i, the MS shall search for all access technologies it is capable of. No
priority is defined for the preferred access technology and the priority is an
implementation issue, but \"HPLMN Selector with Access Technology\" data file
on the SIM may be used to optimise the procedure.
g) In i, an MS using a SIM without access technology information storage (i.e.
the \"HPLMN Selector with Access Technology\" data file is not present) shall
search for all access technologies it is capable of. The priority ordering
amongst the access technologies is implementation dependent. A packet only MS
which supports GSM COMPACT using a SIM without access technology information
storage shall also assume GSM COMPACT access technology as the lowest priority
radio access technology.
h) In v, the MS shall order the PLMN/access technology combinations in order
of decreasing signal quality within each access technology. The order between
PLMN/access technology combinations with different access technologies is an
MS implementation issue.
NOTE 1: Requirements a) and b) apply also to requirement d), so a GSM voice
capable MS should not search for GSM COMPACT PLMNs, even if capable of GSM
COMPACT.
NOTE 2: Requirements a) and b) apply also to requirement f), so a GSM voice
capable MS should not search for GSM COMPACT PLMNs, even if this is the only
access technology on the \"HPLMN Selector with Access Technology\" data file
on the SIM.
NOTE 3: High quality signal is defined in the appropriate AS specification.
If successful registration is achieved, the MS indicates the selected PLMN.
If registration cannot be achieved because no PLMNs are available and
allowable, the MS indicates \"no service\" to the user, waits until a new PLMN
is available and allowable and then repeats the procedure.
If there were one or more PLMNs which were available and allowable, but an LR
failure made registration on those PLMNs unsuccessful or an entry in any of
the lists \"forbidden LAs for roaming\", \"forbidden TAs for roaming\",
\"forbidden LAs for regional provision of service\" or \"forbidden TAs for
regional provision of service\" prevented a registration attempt, the MS
selects the first such PLMN again and enters a limited service state.
##### 4.4.3.1.2 Manual Network Selection Mode Procedure
The MS indicates whether there are any PLMNs, which are available using all
supported access technologies. This includes PLMNs in the \"forbidden PLMNs\"
list and PLMNs which only offer services not supported by the MS. An MS which
supports GSM COMPACT shall also indicate GSM COMPACT PLMNs (which use PBCCH).
If displayed, PLMNs meeting the criteria above are presented in the following
order:
i)- either the HPLMN (if the EHPLMN list is not present or is empty) or, if
one or more of the EHPLMNs are available then based on an optional data field
on the SIM either only the highest priority available EHPLMN is to be
presented to the user or all available EHPLMNs are presented to the user in
priority order. If the data field is not present on the SIM, then only the
highest priority available EHPLMN is presented;
ii)- PLMN/access technology combinations contained in the \" User Controlled
PLMN Selector with Access Technology \" data file in the SIM (in priority
order);
iii)- PLMN/access technology combinations contained in the \"Operator
Controlled PLMN Selector with Access Technology\" data file in the SIM (in
priority order);
iv)- other PLMN/access technology combinations with received high quality
signal in random order;
v)- other PLMN/access technology combinations in order of decreasing signal
quality.
In ii and iii, an MS using a SIM without access technology information storage
(i.e. the \"User Controlled PLMN Selector with Access Technology\" and the
\"Operator Controlled PLMN Selector with Access Technology\" data files are
not present) shall instead present the PLMNs contained in the \"PLMN
Selector\" data file in the SIM (in priority order).
In v, requirement h) in subclause 4.4.3.1.1 applies.
In GSM COMPACT, the non support of voice services shall be indicated to the
user.
The HPLMN may provide on the SIM additional information on the available
PLMNs. If this information is provided then the MS shall indicate it to the
user. This information, provided as free text may include:
> \- preferred partner,
>
> \- roaming agreement status,
>
> \- supported services
Furthermore, the MS may indicate whether the available PLMNs are present on
the EHPLMN list, the Forbidden list, the User Controlled PLMN List or the
Operator Controlled PLMN List. The MS may also indicate that the PLMN is not
present on any of these lists.
The user may select his desired PLMN and the MS then initiates registration on
this PLMN using the access technology chosen by the user for that PLMN or
using the highest priority available access technology for that PLMN, if the
associated access technologies have a priority order. (This may take place at
any time during the presentation of PLMNs). For such a registration, the MS
shall ignore the contents of the \"forbidden LAs for roaming\", \"forbidden
TAs for roaming\", \"forbidden LAs for regional provision of service\",
\"forbidden TAs for regional provision of service\", \"forbidden PLMNs for
GPRS service\" and \"forbidden PLMNs\" lists.
NOTE 1: It is an MS implementation option whether to indicate access
technologies to the user. If the MS does display access technologies, then the
access technology selected by the user is only used for initial registration
on the selected PLMN. If the MS does not display access technologies, then the
access technology chosen for a particular PLMN should be the highest priority
available access technology for that PLMN, if the associated access
technologies have a priority order, and is only used for initial registration.
Once the UE has registered on a PLMN selected by the user, the UE shall not
automatically register on a different PLMN unless:
i) the new PLMN is declared as an equivalent PLMN by the registered PLMN; or
ii) the user selects automatic mode.
If the user does not select a PLMN, the selected PLMN shall be the one that
was selected before the PLMN selection procedure started. If no such PLMN was
selected or that PLMN is no longer available, then the MS shall attempt to
camp on any acceptable cell and enter the limited service state.
NOTE 2: High quality signal is defined in the appropriate AS specification.
##### 4.4.3.1.3 Manual CSG selection within a PLMN
The MS displays to the user the CSGs that are available with the currently
registered PLMN using all access technologies which support CSGs and which are
supported by the MS. For each entry in the list, an indication is provided
whether that CSG identity is in the Allowed CSG list stored in the UE for this
PLMN. Additional requirements for the display, including for the display of
HNB name, can be found in 3GPP TS 22.011 [9].
The user may select a CSG from the available ones and the MS then camps on a
cell with the selected CSG identity.The MS attempts to perform a Location
Registration on the currently registered PLMN if the selected CSG Identity is
not in the allowed CSG list stored in the MS.
#### 4.4.3.2 User reselection
At any time the user may request the MS to initiate reselection and
registration onto an available PLMN, according to the following procedures,
dependent upon the operating mode.
##### 4.4.3.2.1 Automatic Network Selection Mode
The MS selects and attempts registration on PLMNs, if available and allowable,
in all of its bands of operation in accordance with the following order:
i) the HPLMN (if the EHPLMN list is not present or is empty) or the highest
priority EHPLMN that is available (if the EHPLMN list is present);
ii) PLMN/access technology combinations contained in the \"User Controlled
PLMN Selector with Access Technology\" data file in the SIM (in priority
order) excluding the previously selected PLMN/access technology combination;
iii) PLMN/access technology combinations contained in the \"Operator
Controlled PLMN Selector with Access Technology\" data file in the SIM (in
priority order) excluding the previously selected PLMN/access technology
combination;
iv) other PLMN/access technology combinations with the received high quality
signal in random order excluding the previously selected PLMN/access
technology combination;
v) other PLMN/access technology combinations, excluding the previously
selected PLMN/access technology combination in order of decreasing signal
quality or, alternatively, the previously selected PLMN/access technology
combination may be chosen ignoring its signal quality;
vi) The previously selected PLMN/access technology combination.
The previously selected PLMN/access technology combination is the PLMN/access
technology combination which the MS has selected prior to the start of the
user reselection procedure.
NOTE 1: If the previously selected PLMN is chosen, and registration has not
been attempted on any other PLMNs, then the MS is already registered on the
PLMN, and so registration is not necessary.
The equivalent PLMNs list shall not be applied to the user reselection in
Automatic Network Selection Mode.
When following the above procedure the requirements a), b), c), e), f), g), h)
in subclause 4.4.3.1.1 apply: Requirement d) shall apply as shown below:
d) In iv, v, and vi, the MS shall search for all access technologies it is
capable of before deciding which PLMN/access technology combination to select.
NOTE 2: High quality signal is defined in the appropriate AS specification.
##### 4.4.3.2.2 Manual Network Selection Mode
The Manual Network Selection Mode Procedure of subclause 4.4.3.1.2 is
followed.
##### 4.4.3.2.3 Manual CSG selection within a PLMN
The procedure of subclause 4.4.3.1.3 is followed.
#### 4.4.3.3 In VPLMN
##### 4.4.3.3.1 Automatic and manual network selection modes
If the MS is in a VPLMN, the MS shall periodically attempt to obtain service
on its HPLMN (if the EHPLMN list is not present or is empty) or one of its
EHPLMNs (if the EHPLMN list is present) or a higher priority PLMN/access
technology combinations listed in \"user controlled PLMN selector\" or
\"operator controlled PLMN selector\" by scanning in accordance with the
requirements that are applicable to i), ii) and iii) as defined in the
Automatic Network Selection Mode in subclause 4.4.3.1.1. In the case that the
mobile has a stored \"Equivalent PLMNs\" list the mobile shall only select a
PLMN if it is of a higher priority than those of the same country as the
current serving PLMN which are stored in the \"Equivalent PLMNs\" list. For
this purpose, a value T minutes may be stored in the SIM, T is either in the
range 6 minutes to 8 hours in 6 minute steps or it indicates that no periodic
attempts shall be made. If no value is stored in the SIM, a default value of
60 minutes is used.
The attempts to access the HPLMN or an EHPLMN or higher priority PLMN shall be
as specified below:
a) The periodic attempts shall only be performed in automatic mode when the MS
is roaming;
b) After switch on a period of at least 2 minutes and at most T minutes shall
elapse before the first attempt is made;
c) The MS shall make the following attempts if the MS is on the VPLMN at time
T after the last attempt;
d) Periodic attempts shall only be performed by the MS while in idle mode;
e) If the HPLMN (if the EHPLMN list is not present or is empty) or a EHPLMN
(if the list is present) or a higher priority PLMN is not found, the MS shall
remain on the VPLMN.
f) In steps i), ii) and iii) of subclause 4.4.3.1.1 the MS shall limit its
attempts to access higher priority PLMN/access technology combinations to
PLMN/access technology combinations of the same country as the current serving
VPLMN, as defined in Annex B.
g) Only the priority levels of Equivalent PLMNs of the same country as the
current serving VPLMN, as defined in Annex B, shall be taken into account to
compare with the priority level of a selected PLMN.
h) If the PLMN of the highest priority PLMN/access technology combination
available is the current VPLMN, or one of the PLMNs in the \"Equivalent
PLMNs\" list, the MS shall remain on the current PLMN/access technology
combination.
##### 4.4.3.3.2 Manual CSG selection within a PLMN
The procedure of subclause 4.4.3.1.3 is followed.
#### 4.4.3.4 Investigation Scan for higher prioritized PLMN
The support of this procedure is mandatory if the ME supports GSM COMPACT and
otherwise optional.
A MS capable of both GSM voice and packet service shall, when indicated in the
SIM, investigate if there is service from a higher prioritized PLMN not
offering GSM voice service, either HPLMN (if the EHPLMN list is not present or
is empty) or one of its EHPLMNs (if the EHPLMN list is present) or a PLMN in a
\"PLMN Selector with Access Technology \" data file on the SIM.
The MS shall scan for PLMNs in accordance with the requirements described for
automatic network selection mode in subclause 4.4.3.1.1 that are applicable to
i), ii) and iii) with the exception of requirement a) and b) in subclause
4.4.3.1. Requirement a) and b) that are specified for automatic network
selection mode in subclause 4.4.3.1 shall be ignored during the investigation
scan.
If indicated on the SIM, the investigation scan shall be performed:
i) After each successful PLMN selection and registration is completed, when
the MS is in idle mode. This investigation scan may rely on the information
from the already performed PLMN selection and may not necessarily require a
rescan
ii) When the MS is unable to obtain normal service from a PLMN, (limited
service state) see subclause 3.5.
The investigation scan is restricted to automatic selection mode and shall
only be performed by an MS that is capable of both voice and packet data. It
shall only be performed if the selected PLMN is not already the highest
prioritized PLMN in the current country. (HPLMN in home country, otherwise
according to PLMN selector lists)
The MS shall return to RPLMN after the investigation scan is performed.
If a higher prioritized PLMN not offering GSM voice service is found, this
shall be indicated to the user. The MS shall not select the PLMN unless
requested by the user.
### 4.4.4 Abnormal cases
If there is no SIM in the MS, if there is an authentication failure, or if the
MS receives an \"IMSI unknown in HLR\", \"illegal ME\" or \"illegal MS\"
response to an LR request, then effectively there is no selected PLMN (\"No
SIM\" state). In these cases, the states of the cell selection process are
such that no PLMN selection information is used. No further attempts at
registration on any PLMN are made until the MS is switched off and on again,
or a SIM is inserted.
When in Automatic Network Selection mode and the MS is in the \"not updated\"
state with one or more suitable cells to camp on; then after the maximum
allowed unsuccessful LR requests (controlled by the specific attempt counters)
the MS may continue (or start if it is not running) the user reselection
procedure of subclause 4.4.3.2 1.
A multi mode MS that also supports 3GPP2 access technology may fall back to
3GPP2 mode if no SIM is inserted.
### 4.4.5 Roaming not allowed in this LA or TA
If in either PLMN selection mode the LR response \"Roaming not allowed in this
LA\" or \"Roaming not allowed in this TA\" is received:
The PLMN Automatic or Manual Mode Selection Procedure of subclause 4.4.3.1 are
followed, depending on whether the MS is in automatic or manual mode.
### 4.4.6 Steering of roaming
If the MS receives a USAT REFRESH command qualifier (3GPP TS 31.111 [41]) of
type \"Steering of Roaming\", the MS shall:
a) replace the highest priority entries in the \"Operator Controlled PLMN
Selector with Access Technology\" list with the list provided in the REFRESH
command;
b) delete the PLMNs identified by the list in the REFRESH command from the
Forbidden PLMN list and from the Forbidden PLMNs for GPRS service list, if
they are present in these lists. This includes any information stored in the
SIM and the ME internal memory;
c) take the new information into account in subsequent attempts to access a
higher priority PLMN; and
d) attempt to obtain service on a higher priority PLMN as specified in
subclause 4.4.3.3 by acting as if timer T that controls periodic attempts has
expired.
In order to avoid unnecessary signalling, the network operator should avoid
repeatedly using steering of roaming of a particular MS.
## 4.5 Location registration process
### 4.5.1 General
When the MS is switched on and capable of services requiring registration, the
action taken by the location registration process is as follows:
a) SIM present and no LR needed (because of the status of the stored
registration area identity and \"attach\" flag): The MS is in the update state
UPDATED;
b) SIM present and LR needed: A LR request is made;
c) No SIM present: The MS enters the update state Idle, NO IMSI.
In case b) above, and subsequently whenever a LR request is made, the MS
enters a state depending on the outcome of the LR request, as listed in
subclause 4.3.2 above. In case c) the GPRS and the non-GPRS update state
enters \"IDLE, NO IMSI\".
Whenever the MS goes to connected mode and then returns to idle mode again,
the MS selects the appropriate state.
A multi mode MS that also supports 3GPP2 access technology may fall back to
3GPP2 mode if no SIM is inserted.
### 4.5.2 Initiation of Location Registration
An LR request indicating Normal Updating is made when, in idle mode,
\- the MS changes cell while being in the update state NOT UPDATED; (for MS
capable of GPRS and non-GPRS services when at least one of both update states
is NOT UPDATED)
\- the MS detects that it has entered a new registration area, i.e., when the
received registration area identity differs from the one stored in the MS, and
the LAI, TAI or PLMN identity is not contained in any of the lists of
\"forbidden LAs for roaming\", \"forbidden TAs for roaming\", \"forbidden LAs
for regional provision of service\", \"forbidden TAs for regional provision of
service\", \"forbidden PLMNs for GPRS service\" or \"forbidden PLMNs\"
respectively, while being in one of the following update states:
\- UPDATED;
\- NOT UPDATED;
\- ROAMING NOT ALLOWED.
\- the MS detects that it has entered a registration area that has the same
identity as the one stored in the MS, while being in the ROAMING NOT ALLOWED
update state, and the LAI, TAI or PLMN identity is not contained in any of the
lists of \"forbidden LAs for roaming\", \"forbidden LAs for regional provision
of service\", \"forbidden PLMNs for GPRS service\" or \"forbidden PLMNs\"
respectively.
\- the Periodic Location Updating Timer expires while being in the non-GPRS
update state NOT UPDATED (triggers Location Updating);
\- the Periodic Routing Area Update timer expires while being in the GPRS
update state NOT UPDATED (triggers Routing Area Update);
\- the Periodic Tracking Area Update timer expires while being in the EPS
update state NOT UPDATED (triggers Tracking Area Update);
\- a manual network reselection has been performed, an acceptable cell of the
selected PLMN is present, and the MS is not in the UPDATED state on the
selected PLMN.
If a new PLMN is entered, a MS which is attached for PS services shall perform
a routeing area update or tracking area update if the LAI, TAI or PLMN
identity is not contained in any of the lists \"forbidden LAs for roaming\",
\"forbidden TAs for roaming\", \"forbidden LAs for regional provision of
service\", \"forbidden TAs for regional provision of service\", \"forbidden
PLMNs for GPRS service\" or \"forbidden PLMNs\" and if the current update
status is different from \"IDLE, NO IMSI\".
An LR request indicating Periodic Location Updating is made when, in idle
mode, the Periodic Location Updating timer expires while being in the non-GPRS
update state UPDATED.
An LR request indicating Periodic Routing Area Update is made when the
Periodic Routing Area Update timer expires while being in the GPRS update
state UPDATED.
An LR request indicating Periodic Tracking Area Update is made when the
Periodic Tracking Area Update timer expires while being in the EPS update
state UPDATED.
An LR request indicating IMSI attach is made when the MS is activated in the
same location area in which it was deactivated while being in the non-GPRS
update state UPDATED, and the system information indicates that IMSI
attach/detach shall be used.
A GPRS attach is made by a GPRS MS when activated and capable of services
which require registration. A GPRS attach may only be performed if the
selected PLMN is not contained in the list of \"forbidden PLMNs for GPRS
service\". Depending on system information about GPRS network operation mode
MSs operating in MS operation mode A or B perform combined or non-combined
location registration procedures. When the combined routing area update or
GPRS attach is accepted with indication \"MSC not reachable\" or is not
answered the MS performs also the corresponding location updating procedure or
falls back to a GPRS only MS. When the combined routing area update or GPRS
attach is rejected with cause \"GPRS not allowed\" the GPRS update state is
\"IDLE, NO IMSI\" and the MS performs the corresponding location updating
procedure.
Furthermore, an LR request indicating Normal Location Updating is also made
when the response to an outgoing request shows that the MS is unknown in the
VLR or SGSN, respectively.
Table 2 in clause 5 summarizes the events in each state that trigger a new LR
request. The actions that may be taken while being in the various states are
also outlined in table 2.
A GPRS MS which is both IMSI attached for GPRS and non-GPRS services and which
is capable of simultaneous operation of GPRS and non-GPRS services shall
perform Routing Area Update in connected mode when it has entered a new
routing area which is not part of a LA contained in the list of \"forbidden
LAs for roaming\" or \"forbidden LAs for regional provision of service\".
### 4.5.3 Periodic Location Registration
A Periodic Location Updating timer (for non-GPRS operation), a Periodic
Routing Area Update timer (for GPRS operation) and a Periodic Tracking Area
Update timer (for EPS operation) with the following characteristics shall be
implemented in the MS (MS shall implement all timers corresponding to
supported operations):
i) Upon switch on of the MS or when the system information indicates that
periodic location registration shall be applied, and the timer is not running,
the timer shall be loaded with a random value between 0 and the broadcast or
signalled time‑out value and started.
ii) The time‑out value for the Periodic Location Updating timer shall be
within the range of 1 deci‑hour to 255 deci‑hours with a granularity of 1
deci‑hour.
iii) When the timer reaches its expiry value, it shall be initiated with
respect to the relevant time‑out value, and the MS shall initiate the Periodic
Location Registration corresponding to the expired timer.
iv) The Periodic Location Updating timer shall be prevented from triggering
Periodic Location Updating during connected mode. When the MS returns to idle
mode, the Periodic Location Updating timer shall be initiated with respect to
the broadcast time‑out value, then started. Thereafter, the procedure in iii)
shall be followed.
v) The Periodic Routing Area Update timer shall be prevented from triggering
the Periodic Routing Area Update during Ready state. At transition from Ready
to Standby state the Periodic Routing Area Update timer shall be initiated
with respect to its time‑out value, then started. Thereafter, the procedure in
iii) shall be followed.
vi) If the MS performs a successful combined Routing Area Update the >
Periodic Location Updating timer shall be prevented from > triggering the
Periodic Location Updating until the MS starts > using Location Updating
procedure, for example because of a > changed network operation mode or the MS
uses non-GPRS services > only.
vii) When a change in the time‑out value occurs (at a change of serving > cell
or a change in the broadcast time‑out value or a change in > the signalled
time-out value), the related timer shall be > reloaded so that the new time to
expiry will be: \"old time to > expiry\" modulo \"new time‑out value\".
### 4.5.4 IMSI attach/detach operation
The system information will contain an indicator indicating whether or not
IMSI attach/detach operation is mandatory to use in the cell. The MS shall
operate in accordance with the received value of the indicator.
A GPRS MS shall perform GPRS attach/detach procedures independent of the value
of the IMSI attach/detach indicator. When a GPRS MS has to perform IMSI
attach/detach independent of GPRS procedures (for example GPRS network
operation mode 2) the handling described in the clause above applies.
When IMSI attach/detach operation applies, a MS shall send the IMSI detach
message to the network when the MS is powered down or the SIM is removed while
being in the update state UPDATED. The IMSI detach message will not be
acknowledged by the network.
When the MS returns to the active state, the MS shall perform an LR request
indicating IMSI attach, provided that the MS still is in the same registration
area. If the registration area has changed, an LR request indicating Normal
Location Updating according to subclause 4.5.2 shall be performed.
### 4.5.5 No Suitable Cells In Location Area
If during location registration the LR response \"No Suitable Cells In
Location Area\" or \"No Suitable Cells In Tracking Area\" is received:
\- The MS shall attempt to find another LA or TA of the same PLMN on which it
received the LR response. If the MS is able to find another LA or TA it shall
attempt registration. If the MS is unable to find an LA or TA, the PLMN
Automatic or Manual Mode Selection Procedure of subclause 4.4.3.1 shall be
followed, depending on whether the MS is in automatic or manual mode.
## 4.6 Service indication (A/Gb mode only)
This is an indication to the user that service or CTS service is available.
The service indication should be set if the following conditions are all
satisfied:
a) Cell Selection: Camped on a suitable cell and in updated state, or in
connected mode having been camped on a suitable cell.
b) Location registration: In updated state, for MSs capable of services
requiring registration.
A specific CTS service indication should be set when the CTS MS is attached to
a CTS FP.
However due to the fact that there may be some transitory changes of state,
the service indication is permitted to continue to be set for up to 10 seconds
after the above conditions cease to be met. Also the service indication is
permitted to take up to 1 second to be set after the above conditions are met.
## 4.7 Pageability of the mobile subscriber
An MS is required to listen to all paging messages that could address it (see
3GPP TS 45.002), when the following conditions are all satisfied:
\- A SIM is inserted;
\- The MS is camped on a cell;
\- The MS is not in state \"Idle, No IMSI\"; and
\- The MS is not performing the task to search for available PLMNs. (Whenever
possible during this task, the MS should listen for paging.). However, when
the MS is camped on a cell, is registered in a PLMN and is performing its
regular search for a higher priority PLMN, as specified in 3GPP TS 22.011 [9],
then it shall listen to all paging messages that could address it.
NOTE: In A/Gb mode, during cell reselection there is a certain period when the
MS is no longer camped on the old cell but must decode the full BCCH or CPBCCH
before camping on the new cell. This leads to a period of slightly more than 8
51 frame multiframes when the MS will not necessarily be pageable.
## 4.8 MM Restart Procedure
In some cases, e.g. on change of SIM data, there is a need for the MM to be
restarted without the need for user intervention.
To perform the procedure the MS shall behave as if the SIM is removed and
afterwards a new SIM is inserted.
# 5 Tables and Figures
Table 1: Effect of LR Outcomes on PLMN Registration
+----------------------+---------------------+----------------------+ | Location | Registration Status | Registered PLMN is | | Registration Task | | | | State | | | +----------------------+---------------------+----------------------+ | Updated | Successful | Indicated in the | | | | stored registration | | | | area identity | +----------------------+---------------------+----------------------+ | Idle, No IMSI | Unsuccessful | No registered PLMN | | | | (3) (4) | +----------------------+---------------------+----------------------+ | Roaming not allowed: | | | +----------------------+---------------------+----------------------+ | a) PLMN not allowed | Unsuccessful | No registered PLMN | | | | (4) | +----------------------+---------------------+----------------------+ | b) LA not allowed | Indeterminate(1) | No registered PLMN | | or TA not allowed | | | +----------------------+---------------------+----------------------+ | c) Roaming not | Indeterminate (2) | No registered PLMN | | allowed in this LA | | (4) | | or Roaming not | | | | allowed in this TA | | | +----------------------+---------------------+----------------------+ | d) No Suitable | Indeterminate (5) | No registered PLMN | | Cells In Location | | | | Area or No Suitable | | | | Cells in Tracking | | | | Area | | | +----------------------+---------------------+----------------------+ | e) Not authorized | Indeterminate (6) | No registered PLMN | | for this CSG | | | +----------------------+---------------------+----------------------+ | Not updated | Unsuccessful | No registered PLMN | | | | (4) | +----------------------+---------------------+----------------------+ | 1) The MS will | | | | perform a cell | | | | selection and will | | | | eventually either | | | | enter a different | | | | state when the | | | | registration status | | | | will be determined, | | | | or fail to be able | | | | to camp on a new | | | | cell, when | | | | registration status | | | | will be | | | | unsuccessful. | | | | | | | | 2) The MS will | | | | select the HPLMN (if | | | | the EHPLMN list is | | | | not present or is | | | | empty) or an EHPLMN | | | | (if the EHPLMN list | | | | is present) if in | | | | automatic mode and | | | | will enter Automatic | | | | Network Selection | | | | Mode Procedure of | | | | subclause 4.4.3.1. | | | | If in manual mode, | | | | the MS will display | | | | the list of | | | | available PLMNs and | | | | follow the Manual | | | | Network Selection | | | | Mode Procedure of | | | | subclause 4.4.3.1.2 | | | | If the appropriate | | | | process does not | | | | result in | | | | registration, the MS | | | | will eventually | | | | enter the limited | | | | service state. | | | | | | | | 3) An MS may have | | | | different update | | | | states for GPRS and | | | | non-GPRS. A PLMN is | | | | registered when at | | | | least one of both | | | | update states is | | | | updated. | | | | | | | | 4) The stored list | | | | of equivalent PLMNs | | | | is invalid and can | | | | be deleted. | | | | | | | | 5) The MS will | | | | attempt registration | | | | on another LA or TA | | | | of the same PLMN, or | | | | equivalent PLMN if | | | | available.Otherwise | | | | it will enter either | | | | the Automatic | | | | Network Selection | | | | Mode procedure of | | | | subclause 4.4.3.1 or | | | | follow the Manual | | | | Network Selection | | | | Mode procedure of | | | | subclause 4.4.3.1.2. | | | | If the appropriate | | | | process does not | | | | result in | | | | registration, the MS | | | | will eventually | | | | enter the limited | | | | service state. | | | | | | | | 6) The MS will | | | | attempt registration | | | | on another cell of | | | | the same PLMN, or | | | | equivalent PLMN if | | | | available.Otherwise | | | | it will enter either | | | | the Automatic | | | | Network Selection | | | | Mode procedure of | | | | subclause 4.4.3.1 or | | | | follow the Manual | | | | Network Selection | | | | Mode procedure of | | | | subclause 4.4.3.1.2. | | | | If the appropriate | | | | process does not | | | | result in | | | | registration, the MS | | | | will eventually | | | | enter the limited | | | | service state. | | | | | | | | NOTE 1: MSs capable | | | | of GPRS and non-GPRS | | | | services may have | | | | different | | | | registration status | | | | for GPRS and for | | | | non-GPRS. | | | | | | | | NOTE 2: The | | | | registered PLMN is | | | | determined by | | | | looking at the | | | | stored registration | | | | area identity and | | | | stored location | | | | registration status. | | | +----------------------+---------------------+----------------------+
Table 2: LR Process States and Allowed Actions
+---------+---------+---------+---------+---------+---------+---------+ | L | New LR | Normal | Paging | | | | | ocation | request | Calls | re | | | | | regis | when | | sponded | | | | | tration | | | | | | | +---------+---------+---------+---------+---------+---------+---------+ | task | C | C | C | Other | Su | to | | state | hanging | hanging | hanging | | pported | | | | Cell | regis | PLMN | | (1) | | | | | tration | | | | | | | | area | | | | | +---------+---------+---------+---------+---------+---------+---------+ | Null | No | Yes | Yes | No | No | No | | (4) | | | | | | | +---------+---------+---------+---------+---------+---------+---------+ | U | No | Yes | Yes | (2) | Yes | Yes | | pdated, | | | | | | | | (5) | | | | | | | +---------+---------+---------+---------+---------+---------+---------+ | Idle, | No | No | No | No | No | No | | No IMSI | | | | | | | | (7) | | | | | | | +---------+---------+---------+---------+---------+---------+---------+ | Roaming | | | | | | | | not | | | | | | | | a | | | | | | | | llowed: | | | | | | | +---------+---------+---------+---------+---------+---------+---------+ | a) | No | No | Yes | No | No | O | | Idle, | | | | | | ptional | | PLMN | | | | | | if with | | not | | | | | | IMSI | | allowed | | | | | | | +---------+---------+---------+---------+---------+---------+---------+ | b) | No | Yes(6) | Yes | No | No | O | | Idle, | | | | | | ptional | | LA not | | | | | | if with | | allowed | | | | | | IMSI | | or TA | | | | | | | | not | | | | | | | | allowed | | | | | | | +---------+---------+---------+---------+---------+---------+---------+ | c) | No | Y | Yes | No | No | O | | Idle, | | es(6,8) | | | | ptional | | Roaming | | | | | | if with | | not | | | | | | IMSI | | allowed | | | | | | | | in this | | | | | | | | LA or | | | | | | | | | | | | | | | | Roaming | | | | | | | | not | | | | | | | | allowed | | | | | | | | in this | | | | | | | | TA | | | | | | | +---------+---------+---------+---------+---------+---------+---------+ | d) No | No | Y | Yes | No | No | O | | S | | es(6,8) | | | | ptional | | uitable | | | | | | if with | | Cells | | | | | | IMSI | | In | | | | | | | | L | | | | | | | | ocation | | | | | | | | Area or | | | | | | | | | | | | | | | | No | | | | | | | | S | | | | | | | | uitable | | | | | | | | Cells | | | | | | | | In | | | | | | | | T | | | | | | | | racking | | | | | | | | Area | | | | | | | +---------+---------+---------+---------+---------+---------+---------+ | e) Not | No | Yes | Yes | No | No | O | | aut | | (6,8) | | | | ptional | | horized | | | | | | if with | | for | | | | | | IMSI | | this | | | | | | | | CSG | | | | | | | +---------+---------+---------+---------+---------+---------+---------+ | Not | Yes | Yes | Yes | (2)&(3) | (3) | Yes if | | updated | | | | | | with | | | | | | | | IMSI | +---------+---------+---------+---------+---------+---------+---------+ | 1): | | | | | | | | Em | | | | | | | | ergency | | | | | | | | calls | | | | | | | | may | | | | | | | | always | | | | | | | | be | | | | | | | | made, | | | | | | | | subject | | | | | | | | to | | | | | | | | access | | | | | | | | control | | | | | | | | per | | | | | | | | mitting | | | | | | | | it. | | | | | | | | | | | | | | | | 2): A | | | | | | | | new LR | | | | | | | | is made | | | | | | | | when | | | | | | | | the | | | | | | | | p | | | | | | | | eriodic | | | | | | | | regis | | | | | | | | tration | | | | | | | | timer | | | | | | | | e | | | | | | | | xpires. | | | | | | | | | | | | | | | | 3): If | | | | | | | | a | | | | | | | | normal | | | | | | | | call | | | | | | | | request | | | | | | | | is | | | | | | | | made, | | | | | | | | an LR | | | | | | | | request | | | | | | | | is | | | | | | | | made. | | | | | | | | If | | | | | | | | suc | | | | | | | | cessful | | | | | | | | the | | | | | | | | updated | | | | | | | | state | | | | | | | | is | | | | | | | | entered | | | | | | | | and the | | | | | | | | call | | | | | | | | may be | | | | | | | | made. | | | | | | | | | | | | | | | | 4): The | | | | | | | | MS is | | | | | | | | in the | | | | | | | | null | | | | | | | | state | | | | | | | | from | | | | | | | | switch | | | | | | | | on | | | | | | | | until | | | | | | | | it has | | | | | | | | camped | | | | | | | | on a | | | | | | | | cell | | | | | | | | and | | | | | | | | either | | | | | | | | made an | | | | | | | | LR | | | | | | | | attempt | | | | | | | | or | | | | | | | | decided | | | | | | | | that no | | | | | | | | LR | | | | | | | | attempt | | | | | | | | is | | | | | | | | needed. | | | | | | | | | | | | | | | | 5): In | | | | | | | | this | | | | | | | | state, | | | | | | | | IMSI | | | | | | | | detach | | | | | | | | is | | | | | | | | pe | | | | | | | | rformed | | | | | | | | if the | | | | | | | | MS is | | | | | | | | deac | | | | | | | | tivated | | | | | | | | and the | | | | | | | | BCCH | | | | | | | | in | | | | | | | | dicates | | | | | | | | that | | | | | | | | IMSI | | | | | | | | attach | | | | | | | | /detach | | | | | | | | shall | | | | | | | | be | | | | | | | | used. | | | | | | | | An LR | | | | | | | | request | | | | | | | | ind | | | | | | | | icating | | | | | | | | IMSI | | | | | | | | attach | | | | | | | | is | | | | | | | | pe | | | | | | | | rformed | | | | | | | | if the | | | | | | | | MS is | | | | | | | | ac | | | | | | | | tivated | | | | | | | | in the | | | | | | | | same | | | | | | | | regis | | | | | | | | tration | | | | | | | | area in | | | | | | | | which | | | | | | | | it was | | | | | | | | deac | | | | | | | | tivated | | | | | | | | while | | | | | | | | being | | | | | | | | in this | | | | | | | | state. | | | | | | | | | | | | | | | | 6): An | | | | | | | | MS | | | | | | | | shall | | | | | | | | not | | | | | | | | perform | | | | | | | | a new | | | | | | | | LR when | | | | | | | | the new | | | | | | | | routing | | | | | | | | area is | | | | | | | | part of | | | | | | | | an LA | | | | | | | | or TA | | | | | | | | co | | | | | | | | ntained | | | | | | | | in any | | | | | | | | of the | | | | | | | | lists | | | | | | | | \"fo | | | | | | | | rbidden | | | | | | | | LAs for | | | | | | | | roa | | | | | | | | ming\", | | | | | | | | \"fo | | | | | | | | rbidden | | | | | | | | TAs for | | | | | | | | roa | | | | | | | | ming\", | | | | | | | | \"fo | | | | | | | | rbidden | | | | | | | | LAs for | | | | | | | | r | | | | | | | | egional | | | | | | | | pr | | | | | | | | ovision | | | | | | | | of | | | | | | | | ser | | | | | | | | vice\", | | | | | | | | \"fo | | | | | | | | rbidden | | | | | | | | TAs for | | | | | | | | r | | | | | | | | egional | | | | | | | | pr | | | | | | | | ovision | | | | | | | | of | | | | | | | | se | | | | | | | | rvice\" | | | | | | | | or the | | | | | | | | new | | | | | | | | cell is | | | | | | | | not | | | | | | | | part of | | | | | | | | the | | | | | | | | " | | | | | | | | Allowed | | | | | | | | CSG | | | | | | | | list". | | | | | | | | | | | | | | | | 7): The | | | | | | | | GPRS | | | | | | | | regis | | | | | | | | tration | | | | | | | | status | | | | | | | | \"Idle, | | | | | | | | no | | | | | | | | IMSI\" | | | | | | | | is | | | | | | | | entered | | | | | | | | when LR | | | | | | | | is | | | | | | | | r | | | | | | | | ejected | | | | | | | | with | | | | | | | | cause | | | | | | | | \"GPRS | | | | | | | | not | | | | | | | | all | | | | | | | | owed\". | | | | | | | | The | | | | | | | | n | | | | | | | | on-GPRS | | | | | | | | regis | | | | | | | | tration | | | | | | | | status | | | | | | | | \"Idle, | | | | | | | | no | | | | | | | | IMSI\" | | | | | | | | is | | | | | | | | entered | | | | | | | | when | | | | | | | | the | | | | | | | | cause | | | | | | | | \"IMSI | | | | | | | | unknown | | | | | | | | in | | | | | | | | HLR\" | | | | | | | | is | | | | | | | | re | | | | | | | | ceived. | | | | | | | | | | | | | | | | 8): A | | | | | | | | MS | | | | | | | | shall | | | | | | | | perform | | | | | | | | a LR if | | | | | | | | it has | | | | | | | | entered | | | | | | | | a | | | | | | | | regis | | | | | | | | tration | | | | | | | | area | | | | | | | | w | | | | | | | | hatever | | | | | | | | the | | | | | | | | regis | | | | | | | | tration | | | | | | | | area | | | | | | | | stored | | | | | | | | in the | | | | | | | | MS. | | | | | | | +---------+---------+---------+---------+---------+---------+---------+
Figure 1: Overall Idle Mode process
Figure 2a: PLMN Selection State diagram (automatic mode)
Figure 2b: PLMN Selection State diagram (manual mode)
NOTE 1: Whenever the MS goes to connected mode and then returns to idle mode
again the MS selects appropriate state.
NOTE 2: A MS capable of GPRS and non-GPRS services has two Task State machines
one for GPRS and one for non-GPRS operation.
Figure 3: Location Registration Task State diagram
# 6 MS supporting access technologies defined both by 3GPP and 3GPP2
## 6.1 General
An MS that supports access technologies defined both by 3GPP and 3GPP2 (see
3GPP TS 31.102 [40]) shall consider all supported access technologies in all
supported bands when performing PLMN selection.
The goal of the PLMN selection process for such a multi mode MS is to find the
highest priority PLMN and to attempt to register to it.
A multi mode MS shall follow the requirements in the present document for the
PLMN selection procedures across both 3GPP and 3GPP2 access technologies.
Additionally, the MS shall follow the requirements of the present document in
its signalling procedures towards any 3GPP network. If the common PLMN
selection procedure leads to selection of a 3GPP2 network, then the MS shall
follow 3GPP2 specifications **_in meeting any 3GPP2 specific system selection
constraints and_** in all signalling procedures towards the 3GPP2 network.
While registered to VPLMN via 3GPP2 access, the MS shall follow the 3GPP2
specifications for scan of higher priority PLMNs. Additionally to the
requirements specified for 3GPP2 system, a multi mode MS while registered to a
3GPP2 VPLMN shall follow the requirements specified in subclause 4.4.3.3.
NOTE: It is assumed that the MS can determine the PLMN identity of networks
supporting 3GPP2 technologies from the information broadcast over the air.
###### ## Annex A (normative): HPLMN Matching Criteria
With the introduction of PCS1900 with the regulatory mandate to allocate
3-digit MNC codes, additional functionality is required to identify the HPLMN.
##### Assumptions {#assumptions .H6}
An MNC code shall consist of 2 or 3 decimal digits. In NA PCS1900, all SIMs
shall store 3 digit MNCs.
Any network using a 2 digit MNC code shall broadcast the hexadecimal code
\"F\" in place of the 3^rd^ digit.
For PCS1900 for North America, regulations mandate that a 3-digit MNC shall be
used; however during a transition period, a 2 digit MNC may be broadcast by
the Network and, in this case, the 3^rd^ digit of the SIM is stored as 0 (this
is the 0 suffix rule).
With the exception of North America during the transition period:
a) Within a single country (or area identified by a MCC) all networks shall
broadcast a 2 digit MNC code, or all networks shall broadcast a 3 digit MNC
code. A mixture of broadcast 2 and 3 digit MNC codes is not permitted within a
single country (or area identified by a MCC).
b) A network which broadcasts a 2 digit MNC code, will issue SIMs with a 2
digit MNC code in the IMSI on the SIM. A network which broadcasts a 3 digit
MNC code, will issue SIMs with a 3 digit MNC code in the IMSI on the SIM.
##### Definitions and abbreviations {#definitions-and-abbreviations-1 .H6}
**BCCH-MCC** The MCC part of the LAI read from System Information type 3
messages broadcast on the BCCH by the network.
**BCCH-MNC** The MNC part of the LAI read from System Information type 3
messages broadcast on the BCCH by the network.
**SIM-MCC** The MCC part of the IMSI or of additional entries in the EHPLMN
list read from the SIM.
**SIM-MNC** The MNC part of the IMSI or of additional entries in the EHPLMN
list read from the SIM.
##### HPLMN Matching Criteria in mobiles which don't support PCS1900 for NA:
{#hplmn-matching-criteria-in-mobiles-which-dont-support-pcs1900-for-na .H6}
Figure A.1 illustrates the logic flow described below. The text below is
normative. Figure A.1 is informative.
(1) The MS shall compare using all 3 digits of the SIM-MCC with the BCCH-MCC.
If the values do not match, then the HPLMN match fails.
NOTE: If the MCC codes match, then the number of digits used for the SIM-MNC
must be the same as the number of digits used for the BCCH-MNC.
(2) The MS shall read the 3^rd^ digit of the BCCH-MNC. If the 3^rd^ digit is
Hex F, then proceed to step (4).
(3) The MS shall compare using all 3 digits of the SIM-MNC with the BCCH-MNC.
If the values match, then the HPLMN match succeeds, otherwise the HPLMN match
fails.
(4) The MS shall compare using just the 1^st^ 2 digits the SIM-MNC with the
BCCH-MNC. If the values match, then the HPLMN match succeeds, otherwise the
HPLMN match fails.
This matching procedure shall be done for the MCC/MNC of the IMSI and for all
entries in the EHPLMN list, until a match is found or all matches fail.
{width="5.528472222222222in" height="4.93125in"}
Figure A.1: HPLMN Matching Criteria Logic Flow for mobiles which support GSM
and DCS1800 (informative)
##### HPLMN Matching Criteria for mobiles which support PCS1900 for NA:
{#hplmn-matching-criteria-for-mobiles-which-support-pcs1900-for-na .H6}
Figure A.2 illustrates the logic flow described below. The text below is
normative. Figure A.2 is informative.
(1) The MS shall compare using all 3 digits the SIM-MCC with the BCCH-MCC. If
the values do not match, then the HPLMN match fails.
(2) The MS shall read the 3^rd^ digit of the BCCH-MNC. If the 3^rd^ digit is
Hex F, then proceed to step (4).
(3) The MS shall compare using all 3 digits the SIM-MNC with the BCCH-MNC. If
the values match, then the HPLMN match succeeds, otherwise the HPLMN match
fails.
NOTE: These rules (1) -- (3) are the same as for mobiles which don't support
PCS1900 for NA, except step (4) is different.
(4) The MS shall determine if the BCCH-MCC lies in the range 310-316 (i.e.,
whether this network is a PCS1900 for NA network). If the BCCH-MCC lies
outside the range 310-316, then proceed to step (6).
(5) The MS shall compare the 3^rd^ digit of the SIM-MNC with '0'. If the 3^rd^
digit is not '0' then the HPLMN match fails.
NOTE: This is the '0' suffix rule.
(6) The MS shall compare using just the 1^st^ 2 digits of the SIM-MNC with the
BCCH-MNC. If the values match, then the HPLMN match succeeds, otherwise the
HPLMN match fails.
NOTE: When PCS1900 for NA switches over to broadcasting 3 digit MNCs in
**all** networks, then the additional requirements for PCS1900 for NA can be
deleted.
This matching procedure shall be done for the MCC/MNC of the IMSI and for all
entries in the EHPLMN list, until a match is found or all matches fail.
##### Guidance for Networks in PCS1900 for NA {#guidance-for-networks-in-
pcs1900-for-na .H6}
There may be some problems in the transition period from broadcasting 2 MNC
digits to broadcasting 3 MNC digits. Here are some guidelines to avoid these
problems.
(1) Existing network codes. Operators who currently use a 2 digit BCCH-MNC
**xy** should use the new code **xy0**.
(2) New operators allocated 3 digit MNC codes with the same 1^st^ 2 digits as
an existing operator shall not use a 3^rd^ digit of 0.
Figure A.2: HPLMN Matching Criteria Logic Flow for mobiles which support
PCS1900 for NA (informative)
###### ## Annex B (normative): PLMN matching criteria to be of same country as
VPLMN
While a MS is roaming on a VPLMN, PLMN of the same country as VPLMN is defined
as:
if the MCC of the current VPLMN is within the range 310 to 316, any PLMN in
range 310 to 316 (networks in North America)
otherwise, any PLMN with same MCC as the one of the current VPLMN itself.
#