# Foreword
This Technical Specification has been produced by the 3rd Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
This document specifies the architectural requirements for delivery of
consistent IMS services to the user regardless of the attached access type
(e.g. CS domain access, or IP-CAN).
Consideration is given to how to access IMS Services (see clause 22.4 of TS
22.101 [9]) while still allowing innovative services.
IMS control of Emergency calls that utilise TS12 are outside the scope of this
specification in this release.
The scope of the specification includes: -
\- Session establishment when using CS access for media transmission for an
IMS service
**\- Support of** Service continuity as **specified in TS 23.237 [12]**
\- Access domain selection
\- IMS control of services where the media is transported via the CS network
(e.g. managing of mid-call services)
\- Service data management
The solution is applicable for UE's with or without ICS functionality, and is
applicable for the following deployment scenarios:
\- An operator who supports for their subscribers only UEs that have ICS
functionality
\- An operator who supports for their subscribers only UEs that do not have
ICS functionality
\- An operator who supports for their subscribers UEs which do and do not have
ICS functionality (to different subscribers and the same subscribers) ensuring
the coexistence of UEs that have and do not have ICS functionality.
\- Inbound roaming subscribers on an operator\'s network that supports either
the same or different ICS functionality that the inbound roaming subscriber is
using, ensuring the coexistence of UEs that have and do not have ICS
functionality.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
  * References are either specific (identified by date of publication, > edition number, version number, etc.) or nonâ€‘specific.
  * For a specific reference, subsequent revisions do not apply.
  * For a non-specific reference, the latest version applies. In the > case of a reference to a 3GPP document (including a GSM document), > a non-specific reference implicitly refers to the latest version > of that document _in the same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 23.228: \"**IP Multimedia Subsystem (IMS)** \".
[3] 3GPP TS 23.002: \"**Network architecture** \".
[4] 3GPP TS 22.173: \"IP Multimedia Core Network Subsystem (IMS) Multimedia
Telephony Service and supplementary services\".
[5] 3GPP TS 23.003: \"**Numbering, addressing and identification** \".
[6] 3GPP TS 24.008: \"**Mobile radio interface Layer 3 specification; Core
network protocols; Stage 3** \".
[7] 3GPP TS 23.218: \"**IP Multimedia (IM) session handling; IM call model;
Stage 2** \".
[8] 3GPP TS 24.173: \"IMS Multimedia Telephony Communication Service and
Supplementary Services; Stage 3\".
[9] 3GPP TS 22.101: \"Services Aspects; Service Principles\".
[10] 3GPP TS 23.221: \"Architectural requirements\".
[11] 3GPP TS 29.163: \"Interworking between the IP Multimedia (IM) Core
Network (CN) subsystem and Circuit Switched (CS) networks\".
[12] 3GPP TS 23.237: \"IP Multimedia Subsystem (IMS) service continuity\".
[13] 3GPP TS 24.081: \"Line Identification Supplementary Services - Stage 3\"
[14] 3GPP TS 24.082: \"Call Forwarding supplementary service; Stage 3\".
[15] 3GPP TS 24.072: \"Call Deflection (CS) Supplementary Service; Stage 3\".
[16] 3GPP TS 24.088: \"Call Barring (CB) Supplementary Service - Stage 3\".
[17] 3GPP TS 26.114: \"A IP Multimedia Subsystem (IMS); Multimedia Telephony;
Media handling and interaction\".
[18] 3GPP TS 24.083: \"Call Waiting (CW) and Call Hold (HOLD) supplementary
services; Stage 3\".
> [19] 3GPP TS 24.091: \"Explicit Call Transfer (ECT) supplementary service;
> Stage 3\".
>
> [20] 3GPP TS 24.084: \"Multi Party supplementary service - Stage 3\".
[21] 3GPP TS 24.147: \"Conferencing using the IP Multimedia (IM) Core Network
(CN) subsystem; Stage 3\".
[22] 3GPP TS 23.009: \"Handover Procedures\".
[23] 3GPP TS 25.413: \"UTRAN Iu interface Radio Access Network Application
Part (RANAP) signalling\"
[24] OMA-ERELD-DM-V1_2-20060602-C: \"Enabler Release Definition for OMA Device
Management, Candidate Version 1.2\".
[25] 3GPP TS 23.167: \"IP Multimedia Subsystem (IMS) emergency sessions\".
[26] 3GPP TS 24.604: \"Communication Diversion (CDIV) using IP Multimedia (IM)
Core Network (CN) subsystem Protocol specification\".
[27] 3GPP2 C.S0001-D: \"Introduction to cdma2000 Spread Spectrum Systems -
Revision D\".
[28] 3GPP TS 24.611: \"Anonymous Communication Rejection (ACR) and
Communication Barring (CB); using IP Multimedia (IM) Core Network (CN)
subsystem Protocol specification\".
[29] 3GPP TS 24.096: \"Name identification supplementary services; Stage 3\".
[30] 3GPP TS 24.010: \"Mobile radio interface layer 3 Supplementary services
specification; General aspects\".
[31] 3GPP TS 24.229: \"IP Multimedia Call Control Protocol based on SIP and
SDP; Stage 3\".
[32] 3GPP TS 33.203: \"Access security for IP-based services\".
[33] 3GPP TS 33.210: \"Network Domain Security; IP network layer security\".
[34] 3GPP TS 23.401: \"General Packet Radio Service (GPRS) enhancements for
Evolved Universal Terrestrial Radio Access Network (E-UTRAN) access\".
[35] 3GPP TS 23.060: \"General Packet Radio Service (GPRS); Service
description\".
[36] 3GPP TS 23.216: \"Single Radio Voice Call Continuity (SRVCC); Stage 2\".
[37] Void.
# 3 Definitions and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
TR 21.905 [1] and the following apply. A term defined in the present document
takes precedence over the definition of the same term, if any, in TR 21.905
[1].
**Access Leg:** The call leg between the UE and the SCC AS.
**Correlation MSISDN:** An MSISDN used to identify a UE in the CS domain.
**CS Bearer Control Signalling Path: S** ignalling path used to control the
call established to set up the CS media bearer between the UE and IMS.
**CS domain Routing Number (CSRN):** A CS Domain Routing Number (CSRN) is a
routable number that is used to route a call from the IM CN subsystem to the
UE in the CS domain. See TS 23.003 [5] for more information.
**ICS UE:** An IMS capable UE with additional ICS-specific functionality.
**ICS User** : An ICS user is an IMS subscriber that receives communication
services centralized in IMS, regardless of the attached access type (e.g. CS
domain access, or IP-CAN).
**IMS Centralized Services** : See definition in TS 22.101 [9].
**IP Multimedia Routing Number (IMRN):** See definition in TS 23.237 [12].
**MSC Server enhanced for ICS:** An MSC Server that supports the network based
ICS functionality.
**Remote Leg:** The call leg formed between the SCC AS and the remote end for
presentation of the SIP UA behaviour to IMS on behalf of the UE. The TAS, and
other Application Servers are invoked on the Remote Leg.
**Service Control Signalling Path:** Signalling path established between the
UE and the SCC AS.
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in TR 21.905
[1] and the following apply. An abbreviation defined in the present document
takes precedence over the definition of the same abbreviation, if any, in TR
21.905 [1].
**ADS** Access Domain Selection
**C-MSISDN** Correlation MSISDN
**CSRN** CS domain Routing Number
**DN Directory Number (e.g. MSISDN)**
**ICS** IMS Centralized Services
**IMRN IP Multimedia Routing Number**
**IN** Intelligent Network
**IUA** ICS User Agent
**MMTel** Multimedia Telephony
**SCC AS** Service Centralization and Continuity Application Server
**T-ADS** Terminating ADS
**TAS** Telephony Application Server
**UE T-ADS** UE assisted Terminating ADS
# 4 High level principles and requirements
## 4.1 General
IMS Centralized Services (ICS) provides **communication services such that all
services, and service control, are based on IMS mechanisms and enablers. It
enables IMS services when using CS access (e.g. TS 24.008 [6], 3GPP2 C.S0001-D
[27]) for the media bearer**.
With ICS, the user services are provided by IMS. User sessions are controlled
in IMS via PS or CS access. When using a CS access network, or when using a PS
access networks that doesn't support the full duplex speech component of an
IMS service, the CS core network is utilized to establish a circuit bearer for
use as media for IMS sessions.
If the PS access network does support the full duplex speech component of an
IMS service then existing IMS session procedures are used as specified in TS
23.228 [2].
**ICS provides mechanisms to support the use of CS media bearer for IMS
sessions. With ICS,** IMS sessions using CS media are treated as standard IMS
sessions for the purpose of service control and service continuity.
ICS defines signalling mechanisms between the UE and IMS for transport of
information required for service continuity when using CS access for media
transport.
## 4.2 Service consistency
The following requirement(s) are defined to ensure service consistency.
\- IMS services as defined in clause 22.4 of TS 22.101 [9] shall be
consistently provided when using a CS or a PS access network for the media of
the IMS service subject to the capability of the UE and the access network.
## 4.3 Service continuity
Service continuity shall be provided when underlying mobility results in a
change of access network capabilities, e.g. support of Gm reference point in
conjunction with CS bearer may not be possible after handover from UTRAN to
GERAN.
## 4.4 Session scenarios
### 4.4.1 Overview
### 4.4.2 ICS Session Scenarios
When a user accesses IMS services over a CS network, or a PS network which do
not support the full duplex speech component of an IMS service, the following
IMS session scenarios shall be supported according to the procedures specified
in TS 23.228 [2], along with the solution specified in this document.
\- Basic voice service origination and terminating sessions.
\- Voice origination and termination service sessions with Line ID services
(e.g. OIP, OIR, TIP, TIR) controlled in IMS.
\- Voice origination and termination service sessions with Communication
Barring services controlled in IMS.
\- Voice termination service sessions with Communication Diversion services
controlled in MS.
\- Voice origination and termination service sessions with mid-call services
(e.g. Hold/Resume, Conferencing, CW, ECT) controlled in IMS.
\- Communication services setting modifications (e.g., changing forwarding
info or activating barring services, etc).
\- The solution shall provide for an ICS UE, generic capabilities to enable
introduction of new IMS services utilizing CS bearers without further
standardisation.
## 4.5 Service settings data management
An ICS UE supporting multimedia telephony shall manage the IMS multimedia
telephony communication service settings data as specified in TS 24.173 [8].
For a UE not supporting multimedia telephony, the MSC Server enhanced for ICS
may implement a communication service setting conversion function between CS
signalling (e.g., as described in TS 24.010 [30]) and communication service
setting procedures (e.g. as defined in TS 24.173 [8]).
NOTE: A downloadable application can enable a UE not supporting multimedia
telephony to perform service data management.
## 4.6 Identities
### 4.6.1 Identities used by an ICS UE
Identities for the ICS UE are handled according to clause 4.3.3 of TS 23.228
[2].
### 4.6.2 Identities used by an MSC Server enhanced for ICS
For registration to IMS, the MSC Server enhanced for ICS shall use only a
Private User Identity and Public User Identity specifically reserved for IMS
registrations from an MSC Server. For systems with a CS domain access based on
TS 24.008 [6], the subscriber identity used shall be as defined in clause 20.3
of TS 23.003 [5].
NOTE 1: This is to avoid conflicts in IMS registration by a UE and an MSC
Server enhanced for ICS registering on behalf of the same subscriber.
Similar to the temporary Public User Identity used when there is no ISIM
present (see clause 13.4 of TS 23.003 [5]), the ICS specific Public User
Identity shall be prohibited from being used to originate sessions and shall
be prohibited from being used to identify a terminating subscriber for
incoming sessions.
An MSC Server shall use only those Public User Identities representing E.164
numbers from the subscriber\'s IMS profile to originate and terminate calls.
NOTE 2: The subscriber\'s IMS profile will need to be provisioned with a Tel
URI, either as the default Public User Identity or associated with it,
equivalent to a DN (e.g. MSISDN) in the subscriber\'s CS profile associated
with speech/audio (e.g. TS11).
## 4.7 Coexistence of an ICS UE and a non ICS UE
It shall be possible to provide ICS for an ICS UE and a non ICS UE in home and
in visited networks.
Home and visited networks with an MSC Server enhanced for ICS shall support
call originations and terminations for ICS UEs and non ICS UEs.
The MSC Server enhanced for ICS avoids conflicts with other IMS registrations
(which includes that used by an ICS UE) by using a Private User Identity and
Public User Identity specifically reserved for use by MSC Server
registrations. See clause 4.6.2 for more information. An IMS operator who
provides services for its subscribers, using both ICS UE's and MSC Servers
enhanced for ICS needs to make the following provisions in order to avoid
registration conflicts:
\- Configure the ICS specific Private User Identity, as defined in clause
4.6.2 to point to the subscriber\'s implicit registration set; and
\- Add the ICS specific Public User Identity, as defined in clause 4.6.2 to
the subscriber\'s implicit registration set.
## 4.8 Routing of originated calls to IMS
When the ICS UE establishes the Service Control Signalling Path over Gm prior
to the CS Bearer Control Signalling Path, the ICS UE shall use the routing
number provided by the network in response to service control signalling as
the B-Party number for establishing the CS Bearer Control Signalling Path.
# 5 Architecture model and reference points
## 5.1 Overview
ICS enables IMS services when using CS access for media transport. Users are
provided with a consistent experience of services.
When using PS access networks which support the full duplex speech media
component of an IMS service, procedures defined in TS 23.228 [2] are used to
provide IMS services.
For other access networks, media established via the CS domain is used in
conjunction with IMS service control. When using a UE that has been enhanced
for ICS, IMS service control is enabled by a transparent control channel (the
Service Control Signalling Path) between the UE and IMS. When using a UE which
has not been enhanced for ICS, IMS service control can be enabled by an MSC
Server enhanced for ICS.
For systems with a CS domain access based on TS 24.008 [6], CAMEL shall be
used for implementing the IN triggers.
## 5.2 Reference architecture
Figure 5.2-1 provides the reference architecture for IMS sessions established
using CS bearers.
Figure 5.2-1: IMS Service Centralization and Continuity Reference Architecture
The architecture introduces the following:
\- The SCC AS, which provides functions specific to IMS Service Centralization
and Continuity.
\- Enhancements to the MSC Server for ICS.
\- Enhancements to the UE for ICS
Not all of the above are required in a network implementing ICS.
## 5.3 Functional Entities
### 5.3.1 SCC AS
The SCC AS is a home network based IMS Application that provides functionality
required to enable IMS Centralized Services. The SCC AS is inserted in the
session path using originating and terminating iFCs; it is configured as the
first AS in the originating iFC and as the last AS in the terminating iFC
chain. The SCC AS may also be invoked through the use of PSI termination
procedures when using CS access.
The SCC AS implements one or more of the following functionalities:
**\- ICS User Agent (IUA):** The ICS User Agent (IUA) function provides SIP UA
behaviour on behalf of the UE for setup and control of for IMS sessions using
CS bearers that are established with or without the use of Gm between the UE
and the SCC AS. For sessions established using Gm between the ICS UE and the
SCC AS the IUA combines the service control signalling with the description of
the bearer, e.g. SDP, established via the CS access to present a standard IMS
session on behalf of the UE.
\- **Terminating Access Domain Selection (T-ADS): Terminating Access Domain
Selection (T-ADS) provides:**
\- Directs an incoming session to an ICS User;
\- For one or more UEs of an ICS User:
\- Influences the selection of one or more contacts amongst the registered
contacts and;
\- Influences the selection of an access network for delivery of the incoming
session to the selected contact, or;
\- Performs breakout to the CS Domain by fetching the CSRN.
T-ADS shall take into account the access network and UE capabilities, IMS
registration status, CS status, existing active sessions, and operator
policies.
The UE may assist the T-ADS. The UE assisted T-ADS (UE T-ADS), based on
configuration that takes into account operator policy and local access network
capabilities, performs the following:
\- Detect media that is candidate for delivery over the CS domain associated
with an incoming INVITE,
\- Identify the domain in which the session is to be established (CS or PS).
\- Determines the mechanism to complete the establishment (origination or
termination) - applicable to sessions to be established in the CS domain only.
\- Notifies the SCC AS of the mechanism the establishment will be completed on
- if possible.
For delivery of an incoming session to an ICS User, the T-ADS shall perform
the following:
1\. Assists in delivery of an incoming session, whether to:
\- Deliver all media via PS.
\- Deliver speech media via CS and use Gm for service control.
\- Deliver speech media via MSC Server enhanced for ICS.
\- Deliver speech media via MSC Server not enhanced for ICS.
2\. Based on the decision in step 1, it assists in selection of an access
network for delivery of the incoming session to the ICS User contact
address(es). Selection criteria as specified in TS 23.221 [10] clause 7.2b,
Access Domain Selection for terminating sessions are used for access network
selection.
3\. For delivery of incoming sessions to the UE registered in CS domain via
standard MSC Server, it fetches the CSRN for breakout to the CS domain.
Additionally, when using Gm reference point, T-ADS for ICS UE sessions may be
executed in the ICS UE in conjunction with the network, based on operator
policy and taking into account its own capabilities and those of the access
network.
### 5.3.2 UE enhanced for ICS
The ICS UE is an IMS UE enhanced with ICS capability. The ICS UE provides the
following functions:
\- Communicates with the SCC AS for service control signalling.
\- Establishes the Bearer Control Signalling Path to setup the media through
the CS domain.
\- Executes ADS for originating sessions as specified in TS 23.221 [10] clause
7.2a.
\- Assists the SCC AS in the execution of T-ADS if Gm is used.
The ICS UE uses the Gm reference point when using the PS network for service
control signalling.
### 5.3.3 MSC Server enhancements for ICS
The MSC Server (e.g. as described in TS 23.002 [3]) may be enhanced for the
support of ICS.
In addition to the standard MSC Server behaviour, an MSC Server which has been
enhanced for ICS provides the following for an identified ICS user: -
\- It processes the user-network signalling received over the CS access (e.g.
A/Iu and E interface) for interworking with IMS SIP and vice versa.
\- It controls the MGW functions described in TS 23.002 [3] to enable the
interworking between CS access and RTP bearers.
\- It performs the interworking to support multimedia call in ICS.
\- It may implement a communication service setting conversion function
between CS signalling (e.g. as described in TS 24.010 [30] for systems based
on TS 24.008 [6]) and communication service setting procedures (as defined in
TS 24.173 [8]).
For subscribers not identified as ICS users, the MSC Server functionality is
unchanged.
MSC Server enhancements for ICS are not required for the support of an ICS UE.
## 5.4 Reference points
### 5.4.1 Void
### 5.4.2 Reference Point MSC Server -- CSCF (I2)
The I2 reference point shall be used to route service control signalling
between the MSC Server enhanced for ICS and the home IMS. The Mw reference
point specified in TS 23.228 [2] together with ICS specific extensions shall
be used over the I2 reference point.
### 5.4.3 Reference Point MSC server -- CS-MGW (Mc)
The Mc reference point, as defined in TS 23.002 [3], is established between
the MSC Server enhanced for ICS and the CS-MGW.
### 5.4.4 Reference Point MSC Server â€‘ TAS (I3)
The I3 reference point shall be used between the MSC Server enhanced for ICS
and the TAS to interwork CS signalling (e.g. as described in TS 24.010 [30]
for systems based on TS 24.008 [6]) and communication service setting
procedures (as defined in TS 24.173 [8]).
# 6 Functional description
## 6.1 Common IMS Functions
### 6.1.1 Pâ€‘CSCF procedures
If CS media is present as part of the SIP/SDP message, the Pâ€‘CSCF shall not
use this information when allocating resources for the media.
### 6.1.2 IMS ALG procedures
If CS media is present as part of the SIP/SDP message, the IMS ALG shall not
use this information for media related functions such as IP address
translation.
### 6.1.3 Sâ€‘CSCF procedures
If CS media is present as part of the SIP/SDP message, the Sâ€‘CSCF shall allow
such media to be used for the service.
### 6.1.4 IBCF procedures
If CS media is present as part of the SIP/SDP message, the IBCF used in
roaming scenarios shall not allocate resources for the media. The IBCF shall
take CS media into account in other media control related functions.
# 7 Procedures and flows
## 7.1 Signalling and bearer paths
### 7.1.1 Sessions established using the Gm reference point
A Service Control Signalling Path is used to transport service control
signalling between the ICS UE and the SCC AS, for enabling IMS services when
using CS or PS access. The Service Control Signalling Path is used when
needed, e.g. on session establishment and/or service control of IMS sessions
using CS voice bearers.
For ICS UE sessions, the SCC AS combines the service control signalling
received over the Service Control Signalling Path with the description of the
bearer established via the CS network to present an IMS session on behalf of
the UE. The service control signalling elements from Gm such as A party
address shall be used together with the bearer description signalling received
via CS bearer control signalling path to construct the signalling for the
remote leg.
The Service Control Signalling Path is established via the PS or CS network.
Figure 7.1.1-1 illustrates how signalling and bearer paths established by the
ICS UE are combined at the SCC AS when the Service Control Signalling Path is
established via the PS network using the Gm reference point.
Figure 7.1.1-1: ICS UE session signalling and bearer path using Gm over PS
network for Service Control Signalling Path
Upon session initiation, the ICS UE or the SCC AS establishes the Service
Control Signalling Path for communication of service control signalling via
the PS network using the Gm reference point.
The ICS UE also sets up the CS Bearer Control Signalling Path using standard
CS network procedures to establish the circuit media.
The SCC AS combines the service control signalling received over the Service
Control Signalling Path with the description of the bearer established using
the CS Bearer Control Signalling Path by acting as a B2BUA as below:
\- Access Leg: The Access Leg is formed with a combination of the Service
Control Signalling Path and the CS Bearer Control Signalling Path.
\- Remote Leg: The Remote Leg is presented by the SCC AS to the CSCF as an IMS
session using IMS SIP signalling on behalf of the UE.
The TAS and other Application Servers are executed on the Remote Leg as part
of standard service execution logic at the CSCF.
The SIP UA at the UE maintains the SIP/SDP state machine with the SCC AS also
maintaining a copy of the state data.
### 7.1.2 Sessions established using CS call control and MSC Server
Figure 7.1.2-1 illustrates signalling and bearer paths for sessions which are
established using standard CS call control procedures and MSC Server .
Figure 7.1.2-1: Session signalling and bearer path using CS call control
Upon session initiation, the UE or the remote end sets up a call and the call
is directed to IMS using standard CS procedures; IN (e.g. CAMEL) triggers are
used to redirect CS originated calls to IMS. The SCC AS acts a B2BUA for
presentation of the UA behaviour on behalf of the UE to IMS.
The TAS and other Application Servers are executed on the Remote Leg as part
of standard service execution logic at the CSCF.
## 7.2 Registration
### 7.2.1 IMS registration via CS access
#### 7.2.1.1 Overview
The UE may register (attach) in the CS domain whenever in CS coverage. The
existing mobility management mechanisms are used in the UE and the CS network.
After performing a successful location area update procedure to the UE, the
MSC Server receives subscriber data from the HSS/HLR. This subscriber data may
include an optional flag.
An MSC Server that is enhanced for ICS shall perform the following:
\- If the flag is received and is supported by the MSC Server, then the MSC
Server shall analyse the value of the flag as follows:
\- If the flag is set to true, the MSC Server shall attempt the IMS
registration using the I2 reference point.
\- If the flag is set to false, the MSC Server shall not attempt the IMS
registration.
\- If the flag is not received or is not supported, the MSC Server may perform
some pre-screening (e.g. IMSI range analysis) based on operator-policy in
order to determine whether or not to attempt IMS registration for this
subscriber.
NOTE 1: Exact preâ€‘screening procedures are operator specific.
NOTE 2: An MSC Server that is not enhanced for ICS will ignore the flag and
thus will continue normal CS operation.
When attempting initial IMS registration on behalf of the ICS User, the MSC
Server shall derive a home IMS domain name using the identity of the
subscriber (e.g. IMSI). This domain name identifies the node (e.g. Iâ€‘CSCF or
IBCF) to which the MSC Server shall send the IMS registration. The MSC Server
shall also derive IMS user identities required for the registration from this
identity. The MSC Server shall derive these identities in a manner that
prevents collisions with other identities automatically derived from the same
subscriber identity. See clause 4.6.2 of the present document for more
information on the identities used.
The MSC Server then initiates a registration on behalf of the ICS User towards
the home IMS indicating support for GRUU and including an InstanceID. If a
GRUU is received, the MSC Server shall store it. The MSC Server shall not
apply the mechanism for multiple simultaneous registrations.
NOTE 3: IMS authorization of registrations from an MSC Server enhanced for ICS
is defined in clause 9.
The routing of the registration messaging is performed by standard IMS routing
procedures. The Sâ€‘CSCF shall perform 3rd party registration towards the SCC
AS. The SCC AS shall obtain from the Sâ€‘CSCF the necessary information related
to the contact address for performing Tâ€‘ADS.
If IMS registration is successful, then subsequent IMS sessions described in
clause 4.4.2 shall be supported in IMS using the MSC Server procedures
described in this specification.
The success or failure of the IMS registration shall not impact the CS attach
status of the UE.
The MSC Server enhanced for ICS shall initiate IMS re-registration as
necessary to maintain an active IMS registration during the period of time in
which the UE is attached to the CS domain.
NOTE 4: Due to the MSC Server not applying the mechanism for multiple
simultaneous registrations, this results in the behaviour of when a UE
attaches to a new MSC Server enhanced for ICS and the old MSC Server enhanced
for ICS has not deregistered the user, the new registration over-writes the
existing one in the Sâ€‘CSCF.
After successful initial IMS registration, the MSC Server enhanced for ICS
shall subscribe to the registration event package described in TS 23.228 [2]
on behalf of the ICS User. The MSC Server shall use the default public user
identity received during initial IMS registration for subscription to this
package. The MSC Server enhanced for ICS shall refresh this subscription as
necessary during the period of time in which its IMS registration on behalf of
the ICS User is active.
The MSC Server enhanced for ICS shall initiate IMS deregistration on behalf of
the ICS User upon receipt of any indication that the UE is no longer
considered active at this MSC Server (e.g. Location Cancellation procedure,
Purge MS procedure, etc.). In order to ensure that the registration request
from the target MSC Server arrives at the Sâ€‘CSCF prior to the deregistration
request from the source MSC Server, the MSC Server should delay the
deregistration procedure, such as by starting a timer. If the Sâ€‘CSCF finds an
existing binding upon receiving the deregistration request as specified in TS
24.229 [31] and identifies that is a request initiated by the MSC Server
enhanced for ICS on behalf of the ICS User, the Sâ€‘CSCF shall compare the
contact address in the deregistration request with the contact address in the
existing binding using the URI comparison rules. If it agrees, the Sâ€‘CSCF will
remove the existing binding. Otherwise, the de-registration request fails. Per
operator policy, the MSC Server enhanced for ICS shall also initiate IMS re-
registrations to obtain additional temporary-GRUUs as need.
Upon receipt of a network-initiated deregistration from the IMS, the MSC
Server enhanced for ICS shall remove all registration details relating to the
public user identities contained in the deregistration. Network-initiated
deregistration from IMS shall not impact the UE's CS registration status.
#### 7.2.1.2 Registration using I2 reference point
Figure 7.2.1.2-1 describes how IMS registration is performed by the MSC Server
enhanced for ICS upon receiving of a Location Update Request.
Figure 7.2.1.2-1: Initial IMS Registration via CS Access
1\. The UE sends a Location Update Request toward the CS network.
2\. The CS network performs standard CS location update, authentication and
obtains subscriber data.
3\. A Location Update Accept is returned to the UE.
4\. The MSC Server enhanced for ICS decides to initiate IMS registration for
this subscriber. If the subscriber is already registered via this MSC Server
enhanced for ICS, no IMS registration is sent.
5\. The MSC Server enhanced for ICS derives a domain name from the
subscriber's identity (e.g. IMSI) and discovers the address of the appropriate
Iâ€‘CSCF/IBCF.
6\. The MSC Server enhanced for ICS sends a SIP REGISTER to the IMS with a
private and temporary public user identity derived from the subscriber's IMSI
as well as an InstanceID. The REGISTER also contains information indicating
the capabilities and characteristics of the MSC Server as a SIP User Agent
Client. The Iâ€‘CSCF verifies that the incoming REGISTER origins from a trusted
MSC server (in the same way it would check that a normal REGISTER origins from
a trusted Pâ€‘CSCF).
7\. The Iâ€‘CSCF initiates standard procedures for Sâ€‘CSCF location/allocation.
8\. The Iâ€‘CSCF forwards the REGISTER to the Sâ€‘CSCF.
9\. The Sâ€‘CSCF identifies the REGISTER as being from the MSC Server. The
Sâ€‘CSCF skips any further authentication procedures and performs registration
procedures with the HSS.
10\. The Sâ€‘CSCF performs standard service control execution procedures. Filter
criteria directs the Sâ€‘CSCF to send a REGISTER to the SCC AS.
11\. IMS registration procedures are completed.
#### 7.2.1.3 Deregistration using I2 reference point
Figure 7.2.1.3-1 describes how IMS deregistration is performed by an MSC
Server enhanced for ICS upon detection of the Location Cancellation procedure.
In this scenario, the UE is moving away from an MSC Server enhanced for ICS to
an MSC Server not enhanced for ICS. Identical IMS deregistration procedures
are initiated by the source MSC Server enhanced for ICS upon receiving of any
other indication that the UE is no longer considered registered.
Figure 7.2.1.3-1: IMS Deregistration via CS Access by source MSC Server
enhanced for ICS when moving to an MSC Server not enhanced for ICS
1\. The UE initiates standard location updating procedures toward the CS
network.
2\. The CS network performs standard CS location updating and authentication
procedures.
3\. The HSS initiates location cancellation procedures towards the source MSC
Server that is enhanced for ICS.
4\. On receipt of the Cancel Location, the source MSC Server should delay the
deregistration procedure for a short period of time, e.g. by starting a timer.
NOTE: The delay mentioned in step 4 is used to reduce the signalling at Sâ€‘CSCF
when UE moves between MSC Servers enhanced for ICS (see clause 7.2.1.4). The
delay needs to be long enough to ensure that the deregistration request from
the source MSC Server arrives at the Sâ€‘CSCF after the registration request
from target MSC Server enhanced for ICS.
5\. The Iâ€‘CSCF initiates standard procedures for Sâ€‘CSCF location/allocation.
6\. The Iâ€‘CSCF forwards the REGISTER to the Sâ€‘CSCF.
7\. The Sâ€‘CSCF identifies the REGISTER as being from an MSC Server enhanced
for ICS that is a trusted network node. The Sâ€‘CSCF skips any further
authentication procedures and performs deregistration procedures with the HSS.
8\. The Sâ€‘CSCF performs the procedures as described in clause 7.2.1.1. As the
contact address in the REGISTER is the same with the contact address in the
existing binding, the Sâ€‘CSCF performs standard service control execution
procedures. Filter criteria directs the Sâ€‘CSCF to send a REGISTER to the SCC
AS.
9\. IMS deregistration procedures are completed.
#### 7.2.1.4 Registration after Deregistration using I2 reference point
Figure 7.2.1.4-1 describes how IMS deregistration is performed by the MSC
Server enhanced for ICS upon detection of the Location Cancellation procedure.
In this scenario, the UE is moving between two MSC Servers enhanced for ICS.
Identical IMS deregistration procedures are initiated by the source MSC Server
enhanced for ICS upon receiving of any other indication that the UE is no
longer considered registered. The registration request from the target MSC
Server enhanced for ICS arrives at the Sâ€‘CSCF after the deregistration request
from the source MSC Server enhanced for ICS.
Figure 7.2.1.4-1: IMS Deregistration via CS Access by source MSC Server
enhanced for ICS when moving to a target MSC Server enhanced for ICS
1\. The UE initiates standard location updating procedures towards the CS
network.
2\. The CS network performs standard CS location updating and authentication
procedures.
3\. The HSS initiates location cancellation procedures towards the source MSC
Server enhanced for ICS.
4\. The source MSC Server enhanced for ICS initiates IMS de-registration as
described in clause 7.2.1.3. The Sâ€‘CSCF removes the existing binding related
to the source MSC Server enhanced for ICS.
5\. The target MSC Server that is also enhanced for ICS initiates IMS
registration as described in clause 7.2.1.2. The Sâ€‘CSCF establishes a new
binding related to the target MSC Server enhanced for ICS.
NOTE: If step 5 is performed before step 4, the de-registration of the source
MSC Server enhanced for ICS does not affect the new registered contact of the
target MSC Server enhanced for ICS.
#### 7.2.1.5 Registration before Deregistration using I2 reference point
Figure 7.2.1.5-1 describes how IMS deregistration is performed by the MSC
Server enhanced for ICS upon detection of the Location Cancellation procedure.
In this scenario, the UE is moving between two MSC Servers enhanced for ICS.
Identical IMS deregistration procedures are initiated by the source MSC Server
enhanced for ICS upon receiving of any other indication that the UE is no
longer considered registered. The registration request from the target MSC
Server enhanced for ICS arrives at the Sâ€‘CSCF before the deregistration
request from the source MSC Server enhanced for ICS.
Figure 7.2.1.5-1: IMS Deregistration via CS Access by source MSC Server
enhanced for ICS when moving to a target MSC Server enhanced for ICS
1\. The UE initiates standard location updating procedures towards the CS
network.
2\. The CS network performs standard CS location updating and authentication
procedures.
3\. The HSS initiates location cancellation procedures towards the source MSC
Server enhanced for ICS.
4\. The target MSC Server that is also enhanced for ICS initiates IMS
registration as described in clause 7.2.1.2. The Sâ€‘CSCF updates a existing
binding related to the source MSC Server enhanced for ICS.
5\. The source MSC Server that is enhanced for ICS initiates IMS
deregistration for this subscriber.
6\. The Iâ€‘CSCF initiates standard procedures for Sâ€‘CSCF location/allocation.
7\. The Iâ€‘CSCF forwards the REGISTER to the Sâ€‘CSCF.
8\. The Sâ€‘CSCF identifies the REGISTER as being from an MSC Server enhanced
for ICS that is a trusted network node. The Sâ€‘CSCF skips any further
authentication procedures and performs deregistration procedures as described
in clause 7.2.1.1. As the contact address in the REGISTER differs from the
contact address in the existing binding related to the target MSC Server, the
Sâ€‘CSCF returns an error response to the source MSC Server enhanced for ICS.
### 7.2.2 IMS Registration via IP-CAN
Whenever the ICS UE acquires IP connectivity via an IP-CAN, the UE shall
register in the IMS if not already registered in IMS. Registration with IMS is
in accordance with the procedure as defined in TS 23.228 [2].
3rd-party registration shall be performed by the Sâ€‘CSCF via the ISC interface
towards the SCC AS. This supports ADS functionality in the SCC AS.
1\. The UE registers in the IMS as described in clause 5.2.2.3 of TS 23.228
[2] indicating its abilities to use ICS.
NOTE: Access networks capabilities could be taken into account when sending
any indications.
2\. The Sâ€‘CSCF informs the SCC AS about the registration, using the procedures
defined in clause 6.3 of TS 23.218 [7].
IMS registration via IP-CAN is performed independently of the UE\'s CS state.
Information regarding home network support of ICS shall be configured in the
ICS UE, e.g. via OMA DM [24].
## 7.3 Originations
### 7.3.1 Originating sessions that use PS media
When the ICS UE has access to a PS network that supports the full duplex
speech component of an IMS service, the originating IMS procedures (as
described in clause 5.6 of TS 23.228[2]) shall be used to set up the session.
The Sâ€‘CSCF shall insert the SCC AS in the IMS session path using originating
initial filter criteria. The SCC AS shall be the first AS inserted into the
session path.
### 7.3.2 Originating sessions that use CS media
#### 7.3.2.1 Non ICS UE originating sessions that use CS media
##### 7.3.2.1.1 Overview
Originating sessions that use CS media made by non ICS UEs that have been
successfully registered in IMS by the MSC Server can utilize IMS service
control. The non ICS UE initiates a standard CS originating session toward the
MSC Server enhanced for ICS, which in turn can initiate an IMS originating
session using the I2 reference point.
For these sessions, the MSC Server shall perform interworking between the I2
reference point and CS signalling (e.g. as described in TS 24.008 [6]). The
MSC Server shall also control a CS-MGW using the Mc reference point to perform
interworking between CS access bearers and RTP bearers on the Mb reference
point.
The SCC AS shall be inserted in the IMS session path using the iFC.
##### 7.3.2.1.2 Origination using I2 reference point
Figure 7.3.2.1.2-1 describes how IMS originations are performed via CS access
for non ICS UE. This call flow also applies for an ICS UE CS origination with
CS media without use of Gm and with use of an MSC server enhanced for ICS, as
specified in clause 7.3.2.2.3.
Figure 7.3.2.1.2-1: IMS Origination via CS Access for non ICS UE
1\. The UE A sends a CS call setup message containing the B-party number to
the MSC Server enhanced for ICS according to standard CS originating
procedures.
2\. The MSC Server sends an INVITE to the Sâ€‘CSCF with the Request-URI set to
the B-party number. If a GRUU is to be included as described in TS 23.228 [2],
then include a temporary-GRUU as the contact address if privacy has been
requested or a public-GRUU if privacy has not been requested. The INVITE also
contains SDP received from the CS-MGW.
3\. The Sâ€‘CSCF performs standard service control execution procedures. Filter
criteria direct the Sâ€‘CSCF to send the INVITE to the SCC AS.
4\. The SCC AS invokes a B2BUA, terminating the UE A Leg and originating the
Remote Leg for presentation of an IMS session towards the B-party on behalf of
UE A. The SCC AS creates an INVITE containing the SDP received in the CS
Bearer Control Signalling Path, indicating CS voice media. The INVITE request
is routed from the SCC AS to the Sâ€‘CSCF.
5\. The Sâ€‘CSCF continues with standard IMS originated session processing and
routes the request onwards to the B-party.
6\. Completion of the session and bearer control setup procedures.
##### 7.3.2.1.3 Origination when using an MSC Server
Figure 7.3.2.1.3-1 describes how IMS originations are performed via CS access
for non ICS UE attached to a legacy MSC or MSC-Server which has not been
enhanced for ICS. This call flow also applies for an ICS UE CS origination
with CS media without use of Gm and with use of an MSC server, as specified in
clause 7.3.2.2.3.
Figure 7.3.2.1.3-1: IMS Origination via CS Access for non ICS UE
1\. The UE A originates a call in the CS domain to party-B according to
standard origination procedures.
2\. The MSC Server responds with a Call Proceeding message and begins to set
up the CS Bearer Control Signalling Path.
3\. The MSC-Server fetches an IP Multimedia Routing Number (IMRN) via IN (e.g.
CAMEL) and routes the call towards the user\'s home IMS network using the IMRN
via an MGCF.
4\. The MGCF initiates an INVITE towards the Iâ€‘CSCF in the home IMS of the
originating ICS user.
5\. The Iâ€‘CSCF routes the INVITE based on one of the following standard
procedures specified in \"PSI based Application Server termination - direct
and PSI based Application Server termination -- indirect\" procedures in TS
23.228 [2] either directly to the SCC AS or via the Sâ€‘CSCF.
6\. When the INVITE arrives at the SCC AS, it invokes a B2BUA, terminating the
UE A leg and originating the Remote Leg for presenting an IMS session towards
the B-party on behalf of UE A. The SCC AS creates an INVITE containing the SDP
received from MGCF, indicating CS voice media. The original called number and
the calling party number are used to setup the outgoing call leg to party-B in
accordance with the AS origination procedure defined in clause 5.6.5 of TS
23.228 [2]. The SCC AS sends the INVITE back to Sâ€‘CSCF.
NOTE: The method for discovery of original called number and calling party
number at the SCC AS if ISUP does not provide this information is
implementation dependant. This can be realized by interactions between the SCC
AS and the SCF (e.g. gsmSCF); however this interaction is outside the scope of
this specification.
7-8. The Sâ€‘CSCF sends the INVITE further for completion of the call toward the
remote end.
#### 7.3.2.2 ICS UE Originating sessions that use CS media
##### 7.3.2.2.1 Overview
IMS service control is used for ICS UE originated sessions that use a CS media
bearer.
When using the Gm reference point, the ICS UE initiates a standard IMS
originating session indicating use of CS media bearer for the session. The SCC
AS is inserted in the IMS session path using originating iFC. The ICS UE also
sets up a standard CS originated session addressing a PSI DN associated with
the SCC AS to establish the CS bearer if a CS bearer is not available for the
ICS UE. The CS bearer shall be reused if already established using the Gm
reference point. The service control signalling is combined with the
description of the CS bearer at the SCC AS for presentation of the IMS
originating session to the Sâ€‘CSCF over the Remote Leg.
The ICS UE should be able to detect an emergency session establishment
request. If the ICS UE using a CS access detects the request for the
establishment of an emergency session, the ICS UE shall attempt to initiate a
CS emergency call.
If the ICS UE could not detect an emergency call and originates the session
with CS media using Gm reference point, it will forward an IMS session
establishment request to the Pâ€‘CSCF. If the Pâ€‘CSCF detects such an emergency
call, it rejects the request with an indication that this is for an emergency
session as described in TS 23.167[25].
NOTE: If the Pâ€‘CSCF is not ICS aware, it is assumed that some other node in
the emergency session path will detect the unsupported media and reject it or
the call will be delivered to the PSAP without voice media component. Normal
error handling applies in this case.
As described in TS 23.167[5] an ICS UE that initiated a non UE detectable
emergency session will receive an indication in responses from which it can
deduce that the session is for emergency. Upon receiving an emergency session
rejection or session rejection with this indication, the ICS UE shall fall
back to CS according to TS 23.167[25].
When not using the Gm reference point, the ICS UE initiates a standard CS
originating call using B party\'s E.164 number. The call is routed to IMS
either via a standard MSC Server using IN (e.g. CAMEL) based redirection or
via an MSC Server enhanced with ICS. If the B party number is detected by the
MSC Server as an emergency number then it will be handled as per existing MSC
Server call handling procedures.
The following clauses show pairs of flows, one for an ICS UE when using an MSC
Server and the other for an MSC Server enhanced for ICS. They are for the most
part identical except that in the case of an MSC Server enhanced for ICS the
INVITE towards the SCC AS is sent directly from the MSC Server whereas an MSC
Server sends an ISUP IAM and the MGCF interworks this to an INVITE towards the
SCC AS.
##### 7.3.2.2.2 Void
##### 7.3.2.2.3 Originations with CS media when not using Gm
This procedure may be used when the ICS User dials an E.164 number, a Tel URI
or a SIP-URI user=phone, and the exchange of additional SIP parameters is not
required. The ICS UE initiates a standard CS originating using the B-party's
E.164 number or a number derived from the Tel-URI. The call is routed to IMS
via an MSC Server which is enhanced to support ICS or a standard MSC Server
using IN (e.g. CAMEL) based re-direction.
Figure 7.3.2.1.2-1 provides an example flow for a session origination by an
ICS UE where the Gm reference point is not required to set up the session and
a MSC Server enhanced for ICS is used to set-up the CS Bearer Control
Signalling Path and the user is identified as an ICS user.
For a session origination by an ICS UE where the Gm reference point is not
required to set up the session and a MSC Server enhanced for ICS is not used
to set-up the CS bearer control signalling, an example call flow is shown in
Figure 7.3.2.1.3-1.
##### 7.3.2.2.4 Originations with CS media using the Gm reference point
Figure 7.3.2.2.4-1 provides an example flow for a session origination by an
ICS UE attached to an MSC Server enhanced for ICS where the Gm reference point
is used to set up the session with the CS media bearer.
Figure 7.3.2.2.4-1: ICS UE Origination with CS media using Gm reference point
when using an MSC Server enhanced for ICS
NOTE 1: Steps 6, 7, 8 and 9 are related to the CS Bearer Control Signalling
Path. The other steps are related to the setup of the Service Control
Signalling Path.
1\. The ICS UE A sets up a Service Control Signalling Path by initiating a
standard IMS origination session towards the UE B. A SIP INVITE request
(indicating the use of CS media for the session) is sent to the Sâ€‘CSCF serving
the UE A in the home IMS network.
2\. The SCC AS is inserted in the IMS session path using originating initial
filter criteria at the Sâ€‘CSCF. The SCC AS is the first AS inserted in the
session path.
3\. The SCC AS allocates a PSI DN and sends it to the ICS UE A.
4\. The SCC AS returns the SCC AS PSI DN in a reliable provisional response to
the Sâ€‘CSCF
5\. The Sâ€‘CSCF forwards the provisional response (containing the SCC AS PSI
DN) to ICS UE A.
6\. The ICS UE uses standard CS originating procedures to establish the CS
Bearer Control Signalling Path with the SCC AS by sending a CS call setup
message to the MSC Server containing the SCC AS PSI DN.
NOTE 2: The UE waits for the SIP response (step 5) before the UE generates the
CS call setup.
7\. The MSC Server responds with a Call Proceeding message and begins to set
up the CS Bearer Control Signalling Path.
8\. The MSC Server sends an INVITE to the Sâ€‘CSCF with the Request-URI set to
the SCC AS PSI. If a GRUU is to be included as described in TS 23.228 [2],
then include a temporary-GRUU as the contact address if privacy has been
requested or public-GRUU if privacy has not been requested.
9\. The Sâ€‘CSCF carries out standard processing of originating initial filter
criteria and sends the INVITE to the SCC AS.
10\. The SCC AS invokes a B2BUA, terminating the Access Leg and originating
the Remote Leg for presentation of an IMS session towards the B-party on
behalf of ICS UE A. The SCC AS correlates the CS bearer control signalling
with the service control signalling and combines both the SDP offers into one
offer towards the UE B. The SCC AS inserts the SDP received on the CS Bearer
Control Signalling Path into the INVITE indicating CS media towards the
B-party. The INVITE request is routed from the SCC AS to the Sâ€‘CSCF.
11\. The Sâ€‘CSCF continues with standard IMS originated session processing and
routes the request onwards to the B-party
12\. Completion of the Service Control Signalling Path and the CS Bearer
Control Signalling Path setup procedures.
Figure 7.3.2.2.4-2 provides an example flow for a session origination by an
ICS UE attached to an MSC Server where the Gm reference point is used to set
up the session with the CS media bearer.
Figure 7.3.2.2.4-2: ICS UE Origination with CS media using Gm reference point
when using an MSC Server
NOTE 3: Steps 6, 7, 8, 9 and 10 are related to the CS Bearer Control
Signalling Path. The other steps are related to the setup of the Service
Control Signalling Path.
Steps 1-7 in Figure 7.3.2.2.4-2 are identical to steps 1-7 in Figure
7.3.2.2.4-1.
At Steps 8 and 9, the MSC server sends the IAM using the SCC AS PSI DN to an
MGCF which is subsequently inter-worked to an INVITE.
Steps 10-13 in Figure 7.3.2.2.4-2 are identical to steps 9-12 in Figure
7.3.2.2.4-1.
## 7.4 Terminations
### 7.4.1 Terminating sessions that use PS media
#### 7.4.1.1 Full duplex speech via PS
When the ICS UE has access to a PS network that supports the full duplex
speech component of an IMS service, terminating IMS procedures (as described
in clause 5.7 of TS 23.228[2]) shall be used to terminate the session to the
ICS UE. The Sâ€‘CSCF shall insert the SCC AS in the IMS session path using
terminating initial filter criteria. The SCC AS shall be the last AS inserted
into the session path.
#### 7.4.1.2 Void
#### 7.4.1.3 Void
### 7.4.2 Terminating sessions that use CS media
#### 7.4.2.1 Non ICS UE terminating sessions that use CS media
##### 7.4.2.1.1 Overview
All ICS User incoming sessions are directed to IMS for delivery to the ICS
User.
Non ICS UEs which have been successfully registered in IMS by the MSC Server
will have a registration binding at the Sâ€‘CSCF containing the MSC Server as
the contact address.
The SCC AS shall be inserted in the IMS session path using the terminating
iFC. The SCC AS performs T-ADS for selection of an access and returns
information to assist with Sâ€‘CSCF selection of a registered contact address.
When the T-ADS function selects the MSC Server enhanced for ICS, the SCC AS
directs the IMS terminating session towards the contact address of the MSC
Server.
On receipt of the session initiation message, the MSC Server enhanced for ICS
shall perform the necessary interworking between the I2 reference point and CS
signalling (e.g. as described in TS 24.008 [6]). The MSC Server shall also
control a CS-MGW using the Mc reference point to perform the necessary
interworking between RTP bearers on the Mb reference point and CS access
bearers.
The SCC AS may select to breakout an incoming session to the CS domain in
following cases:
\- A non ICS UE is not registered in IMS but can be attached to the CS network
at a MSC. In this case, terminating iFC forwards the call to the SCC AS.
\- A non ICS UE is registered in IMS, the access network does not support bi-
directional speech, but the UE still can be attached to the CS network at a
MSC. In this case, terminating iFC forwards the call to the SCC AS.
For both scenarios the SCC AS shall retrieve from the HSS the C-MSISDN(s)
associated with all the IMPIs associated with the IMPU that is the target of
the session. The SCC AS shall select a single C-MSISDN and shall use it to
fetch a CSRN for routing the call to the CS domain. The INVITE shall be sent
to the S CSCF which then performs CS breakout according to standard IMS
procedures.
.NOTE: The algorithm used by the SCC AS to select a C-MSISDN is implementation
dependent.
##### 7.4.2.1.2 Termination using I2 reference point
Figure 7.4.2.1.2-1 describes how IMS terminations are performed via CS access
for non ICS UE registered in IMS. This call flow also applies for an ICS UE
attached to an MSC server enhanced for ICS where the incoming session is
delivered to the ICS UE using standard CS terminating procedures, as specified
in clause 7.4.2.2.5.
Figure 7.4.2.1.2-1: IMS Termination via CS Access for non ICS UE registered in
IMS
1\. An incoming INVITE is received at the Sâ€‘CSCF of the B-party via the
Iâ€‘CSCF.
2\. The Sâ€‘CSCF performs standard service control execution procedures. Filter
criteria direct the Sâ€‘CSCF to send the INVITE to the SCC AS.
3\. The SCC AS performs terminating access domain selection. The SCC AS
chooses the CS access network and the MSC Server contact address, amongst the
registered contact addresses for the UE B, for the setup of the media.
4\. The SCC AS establishes a new session by sending an INVITE to the UE B via
the Sâ€‘CSCF.
5\. The Sâ€‘CSCF forwards the INVITE to the MSC Server based on the contact
address stored during registration, using standard IMS procedures.
6\. The MSC Server sends a Setup message to the UE B.
7\. Completion of the session and bearer control setup procedures.
##### 7.4.2.1.3 Termination to non ICS UE not registered in IMS
Figure 7.4.2.1.3-1 describes how IMS terminations are performed via CS access
for non ICS UE not registered in IMS. This call flow also applies for an ICS
UE attached to an MSC server where the incoming session is delivered to the
ICS UE using standard CS terminating procedures, as specified in clause
7.4.2.2.5.
Figure 7.4.2.1.3-1: IMS Termination via CS Access for non ICS UE not
registered in IMS
1\. An incoming INVITE is received at the Sâ€‘CSCF of the B-party.
2\. The Sâ€‘CSCF performs standard unregistered service control execution
procedures. The terminating iFC direct the INVITE to the SCC AS for
terminating access domain selection.
3\. The T-ADS function chooses breakout to the CS domain. A CSRN is fetched
for routing to the CS domain.
NOTE: Fetching the CSRN is implementation specific.
4\. The SCC AS establishes a new session by sending an INVITE containing the
CSRN towards the Sâ€‘CSCF.
5\. The Sâ€‘CSCF then performs CS breakout according to existing IMS procedures.
The call is routed to the CS domain via the BGCF/MGCF.
6\. The MGCF sends an IAM to the MSC Server.
7\. The MSC Server performs paging procedures and sends the CS call setup
message to the UE B.
8\. Completion of the session and bearer control setup procedures.
#### 7.4.2.2 ICS UE Terminating sessions that use CS media
##### 7.4.2.2.1 Overview
IMS service control is used for ICS UE terminating sessions that use CS media.
All ICS User incoming sessions are directed to IMS for delivery to the ICS
User. The SCC AS is inserted in the IMS session path using the terminating
iFCs. The SCC AS performs T-ADS for selection of a contact address amongst the
registered contact addresses for the ICS User and subsequently selects an
access network for delivery of the session to the selected contact address.
When using the Gm reference point for delivery of the incoming session to the
ICS UE, the SCC AS directs the IMS terminating session toward the ICS User's
selected contact indicating use of CS bearer for the session. On receipt of
the session initiating message, the ICS UE sets up a standard CS originated
session addressing a PSI DN associated with the SCC AS to establish the CS
bearer if a CS bearer is not available for the ICS UE. The CS bearer shall be
reused if already established using the Gm reference point. The service
control signalling is combined with the description of the CS bearer at the
SCC AS for presentation of IMS terminating session to the Sâ€‘CSCF over the
Remote Leg.
The following clauses show pairs of flows, one for an ICS UE when using an MSC
Server and the other for an MSC Server enhanced for ICS. They are for the most
part identical except that in the case of an MSC Server enhanced for ICS the
INVITE towards the SCC AS is sent directly from the MSC Server otherwise an
MSC sends an ISUP IAM and the MGCF interworks this to an INVITE towards the
SCC AS.
##### 7.4.2.2.2 Terminations with CS media using the Gm reference point
Figure 7.4.2.2.2-1 provides an example flow for a call destined to an ICS UE
attached to an MSC server enhanced for ICS, where the incoming session is
delivered over the Gm reference point and the media is established via the CS
network.
Figure 7.4.2.2.2-1: ICS UE Terminations with CS media information flows using
Gm reference point when using an MSC Server enhanced for ICS
NOTE 1: Steps 11, 12, 13 and 14 are related to the setup of the CS Bearer
Control Signalling Path. The other steps are related to the setup of the
Service Control Signalling Path.
1\. An incoming SIP INVITE is received at the Sâ€‘CSCF of the B party from UE A.
2\. The Sâ€‘CSCF executes terminating initial filter criteria and forwards the
INVITE to the SCC AS.
3\. The SCC AS sends a Session Progress response to the Sâ€‘CSCF.
4\. The Sâ€‘CSCF forwards the Session Progress response to UE A.
Steps 5a -- 7a are for the case of T-ADS performed by the SCC AS.
5a. The SCC AS performs Terminating Access Domain Selection and chooses the CS
domain for the setup of the media.
6a. The SCC AS terminates the session from the A-party and establishes a new
session by sending an INVITE to the B-party via the I/Sâ€‘CSCF. This INVITE
contains an indication to inform the UE to initiate the CS bearer
establishment procedure. The INVITE also contains a dynamic SCC AS PSI to
enable the SCC AS to later on correlate the outgoing service control
signalling with the incoming CS bearer control signalling. When the T-ADS
function selects the Gm reference point for service control the SCC AS
prevents the Sâ€‘CSCF from selecting the contact address of the MSC Server, and
the Sâ€‘CSCF selects the IP-CAN
7a. The I/Sâ€‘CSCF sends the INVITE to B-party.
Steps 5b -- 10 are for the case of UE T-ADS.
5b. Alternatively, in the case of UE T-ADS as defined in clause 5.3.1, the SCC
AS performs initial Tâ€‘ADS selecting IMS for the service control signalling
when UE-B is registered in the IMS.
6b The SCC AS terminates the session from the A-party and establishes a new
session by sending an INVITE to the B-party via the I/Sâ€‘CSCF. The INVITE
contains options that enable UE-B to choose a CS bearer for bidirectional
speech media transport if it determines that this is not supported by serving
PS Access Network. The INVITE also contains a dynamic SCC AS PSI to enable the
SCC AS to later on correlate the outgoing service control signalling with the
incoming CS bearer control signalling. When the T-ADS function selects the Gm
reference point for service control, the SCC AS prevents the Sâ€‘CSCF from
selecting the contact address of the MSC Server, and the Sâ€‘CSCF selects the
IP-CAN.
7b. The I/Sâ€‘CSCF sends the INVITE to B-party.
8-10 UE-B responds with a Session Progress message. In the case that the PS
access network does not support bidirectional speech media and in the event
the \"IMS voice over PS session supported indication\" indicates voice is not
supported as defined in clause 4.3.5.8 of TS 23.401 [34], UE-B shall indicate
in the Session Progress message that a CS bearer is required for the
bidirectional speech component of the session and that the Gm reference point
is used for service control. The Sâ€‘CSCF forwards the Session Progress message
to the SCC AS.
11\. If the establishment mechanism is for UE originated, the ICS UE sends a
CS call setup message to the MSC Server using the SCC AS PSI DN to establish
the CS Bearer Control Signalling Path. This will establish the circuit bearer
between the UE and IMS.
12\. The MSC Server responds with a call proceeding message and begins to set
up the CS Bearer Control Signalling Path.
13\. The MSC Server sends an INVITE towards the I/Sâ€‘CSCF containing the SCC AS
PSI and an SDP Offer with the media description from the MGW.
14\. The I/Sâ€‘CSCF forwards the INVITE to the SCC AS.
15\. The SCC AS continues the session setup towards the A-party for the
original INVITE in Step 1. The response contains an SDP answer with the media
description from the SDP offer received in Step 13.
16\. The SCC AS completes the set-up of the CS Bearer Signalling Path towards
ICS UE B which involves sending a 200 OK in response to the INVITE in Step 14.
The ICS UE B, the MSC Server and the SCC AS complete the setup of the CS
Bearer Control Signalling Path and the Service Control Signalling Path with UE
A.
17\. The ICS UE B continues with the set-up of the Service Control Signalling
Path towards the UE A which includes sending a Ringing response to the SCC AS
via the Sâ€‘CSCF. The ICS UE B then completes the set-up of the Service Control
Signalling Path towards the Remote End which includes sending a final 200 OK
message in response to the INVITE received at steps 7a or 7b.
Figure 7.4.2.2.2-2 provides an example flow for a call destined to an ICS UE
attached to an MSC server, where the incoming session is delivered over the Gm
reference point and the media is established via the CS network.
Figure 7.4.2.2.2-2: ICS UE Terminations with CS media information flows using
Gm reference point when using an MSC Server
NOTE 2: Steps 11, 12,13,14 and 15 are related to the setup of the CS Bearer
Control Signalling Path. The other steps are related to the setup of the
Service Control Signalling Path.
Steps 1-12 in Figure 7.4.2.2.2-2 are identical to steps 1-12 in Figure
7.4.2.2.2-1.
At Steps 13 and 14, the MSC server sends the IAM to an MGCF using the SCC AS
PSI DN which is subsequently inter-worked to an INVITE containing the SCC AS
PSI and an SDP Offer from the MGW.
Steps 15-18 in Figure 7.4.2.2.2-2 are identical to steps 14-17 in Figure
7.4.2.2.2-1.
##### 7.4.2.2.3 Void
##### 7.4.2.2.4 Void
##### 7.4.2.2.5 Terminations with CS media when not using Gm
Figure 7.4.2.1.2-1 provides an example flow for a call destined to an ICS UE
attached to an MSC server enhanced for ICS, where the incoming session is
delivered using standard CS terminating procedures.
If an ICS UE is attached to an MSC server where the incoming session is
delivered to it using standard CS terminating procedures, an example call flow
is shown in Figure 7.4.2.1.3-1.
##### 7.4.2.2.6 Void
### 7.4.3 Terminating sessions over Gm rejected by the UE
Figure 7.4.3-1 provides an example flow for a call destined to a UE-2 and
where the incoming session is delivered over the Gm reference point offering
either PS speech media, CS media, or PS speech media with alternative CS
media, because the SCC AS is unable to accurately determine that the CS domain
should be used, e.g. when ISR according to TS 23.401 [34] is active and if the
UE hasn\'t re-registered in the IMS. In this example call flow the UE-2
rejects the incoming session and T-ADS in the SCC AS selects CS domain for
termination. The flow applies to both ICS UE and non ICS UE.
Figure 7.4.3-1: Terminating session rejected by the UE
1\. The request is received at Sâ€‘CSCF following normal IMS session set up
procedures.
2\~3. The service logic with iFC causes the request to be forwarded to the SCC
AS.
4\. The SCC AS anchors the session. T-ADS is executed and the PS access is
selected for termination.
5\~6. The SIP INVITE is forwarded to the UE via the selected PS access. Paging
is triggered if the UE is in Idle state.
7\~8. The UE determines that PS access cannot be used for a session with the
offered media and it returns a response to the IMS indicating the error
condition. The Sâ€‘CSCF forwards the message to the SCC AS.
9\. On receiving the response, the SCC AS reattempts the terminating call
establishment directly towards the same UE over CS domain if possible.
10\~11. The SIP INVITE is forwarded to UE-2 via the MSC Server enhanced for
ICS (or via MGCF and MSC if the MSC is not enhanced for ICS).
12\. Terminating CS call establishment.
NOTE: If the UE determines that PS access cannot be used for the media flows
it might be worth providing the caller party with a courtesy tone generated by
the IMS while the termination is being re-attempted.
## **7.5** Service continuity
### 7.5.1 Service continuity for ICS UE
#### 7.5.1.1 Service continuity while maintaining the use of CS access for the
media
##### 7.5.1.1.1 IMS sessions established using Gm reference point
##### 7.5.1.1.1.1 Overview {#overview-7 .H6}
When the CS bearer is used for the media of the IMS session, the Gm reference
point may be used for communication of service control signalling, contingent
upon the VPLMN support of the Gm reference point. A change of access network
due to handover (e.g. as described in TS 23.009 [22] and TS 25.413 [23]), may
result in an inability to use the PS access for the Gm reference point while
the use of CS access for the media of the IMS session is still possible; under
such circumstance, the service continuity is maintained by switching the
signalling transport over to the CS access.
##### 7.5.1.1.1.2 Use of Gm reference point possible after handover {#use-of-
gm-reference-point-possible-after-handover .H6}
Standard Handover procedures, that are specific to different access networks
(e.g. as described in TS 23.009 [22] and TS 25.413 [23]), are used for
handover of the Service Control Signalling Path and the CS Bearer Control
Signalling Path along with the associated circuit bearer to the target access
network.
The use of Gm reference point for Service Control Signalling Path is
maintained upon handover.
##### 7.5.1.1.1.3 Use of Gm reference point not possible after Handover {#use-
of-gm-reference-point-not-possible-after-handover .H6}
Standard CS handover procedures, that are specific to different access
networks (e.g. as described in TS 23.009 [22] and TS 25.413 [23]), are used to
relocate the CS Bearer Control Signalling Path and the associated circuit
bearer to the target access network. Upon completion of the handover of the CS
Bearer Control Signalling Path and the associated circuit bearer to the target
access, the UE falls back to not using Gm.
After handover, the non ICS UE procedures apply.
If the SCC AS detects that the ICS UE is not reachable over Service Control
Signalling Path, the SCC AS should clear all held sessions related to the user
if any are present, and update the remote leg if necessary.
NOTE 1: It is implementation issue of detecting loss of the Service Control
Signalling Path.
NOTE 2: In order to avoid unintentional release of an ongoing ICS session, an
ICS UE can re-register its public user identity with the IMS at a time chosen
to minimize the probability of its IMS registration expiring during an ongoing
ICS session when Gm is not available. To prevent the ICS UE requesting re-
registration with unacceptable frequency, the Registrar in a network
implementing ICS would need to set the IMS registration expiry timer to an
appropriate value.
Figure 7.5.1.1.1.3-1 is an example call flow of releasing the held session at
the SCC AS when the SCC AS detects that the ICS UE is not reachable over
Service Control Signalling Path.
Figure 7.5.1.1.1.3-1: release of held sessions at SCC AS when Service Control
Signalling Path unavailable
1\. The SCC AS detects that the ICS UE is not reachable over Service Control
Signalling Path.
2\. The SCC AS releases the held session between UE A and UE C.
3\. The SCC AS sends the UPDATE to the Sâ€‘CSCF.
4\. The Sâ€‘CSCF forwards the UPDATE to the UE B to update the remote leg.
#### 7.5.1.2 Service continuity when transferring the media of IMS sessions
between PS and CS access
See TS 23.237 [12] IMS Service Continuity.
## 7.6 Consistency of supplementary services
### 7.6.1 Supplementary Services for ICS UE
#### 7.6.1.1 Overview
When the IP-CAN is used for the media of the IMS session, IMS procedures as
defined in TS 24.173 [8] apply for IMS services.
When the CS bearer is used for the media of the IMS session, the Gm reference
point is used for communication of service control signalling; IMS services
are provided to the ICS UE with the IUA of the SCC AS combining the service
control signalling with the description of the CS bearer for execution of
service control over the Remote Leg.
#### 7.6.1.2 IMS sessions using CS bearer
##### 7.6.1.2.1 Overview
When the CS bearer is used for the media of the IMS Multimedia Telephony
service, see TS 22.173 [4], the procedures specified in this clause apply.
##### 7.6.1.2.2 Use of Gm reference point
##### 7.6.1.2.2.1 Line ID Services (OIP, OIR, TIP, TIR) {#line-id-services-
oip-oir-tip-tir .H6}
IMS procedures as defined in TS 24.173 [8] apply with the SCC AS combining the
description of the CS bearer with the service control signalling communicated
over the Gm reference point as specified in clause 7.1.
##### 7.6.1.2.2.2 Communication Diversion Services {#communication-diversion-
services .H6}
IMS procedures as defined in TS 24.173 [8] apply with the IUA of the SCC AS
combining the description of the CS bearer with the service control signalling
communicated over the Gm reference point as specified in clause 7.1.
##### 7.6.1.2.2.3 Communication Barring {#communication-barring .H6}
IMS procedures as defined in TS 24.173 [8] apply with the SCC AS combining the
description of the CS bearer with the service control signalling communicated
over the Gm reference point as specified in clause 7.1.
##### 7.6.1.2.2.4 Communication Hold/Resume {#communication-holdresume .H6}
IMS procedures as defined in TS 24.173 [8] apply with the SCC AS combining the
description of the CS bearer with the service control signalling communicated
over the Gm reference point as specified in clause 7.1.
Additionally, the SCC AS may employ an MRF for control of media as needed for
execution of the Communication Hold/Resume.
NOTE: Annex E describes several implementation options on how to process media
using MRF.
Figure 7.6.1.2.2.4-1 provides the ICS Communication Hold/Resume flow over Gm
reference point for the ICS UE.
Figure 7.6.1.2.2.4-1: ICS Communication Hold/Resume over Gm reference point
1\. The ICS UE A sends a Hold request to the Sâ€‘CSCF as specified in TS 23.228
[2] and TS 24.173 [8]. The hold request indicates whether the media shall
continue to be sent to the remote party or not.
2\. The Sâ€‘CSCF forwards the Hold request to the SCC AS based upon filter
criteria.
3\. The SCC AS sends the Hold request to the Sâ€‘CSCF indicating the remote
party shall stop sending the media and, according to the hold request,
continue or stop receiving media from the invoking UE.
4\. The Sâ€‘CSCF sends the Hold request to UE B.
5\. The SCC AS sends a media update request to the Sâ€‘CSCF indicating the media
is held.
6\. The Sâ€‘CSCF forwards the media update request to the MGCF. Depending on
what information is exactly contained in the request, MGCF could send call
hold request towards the CS network according to TS 29.163 [11]. If the ICS UE
A receives this request from MGCF, it shall ignore it.
NOTE 1: Steps 5-6 can be executed in parallel with steps 3-4.
7\. Completion of communication hold between UE A and UE B based on the
procedures specified in TS 23.228 [2].
NOTE 2: After the session is put on hold, UE A may initiate a new session and
the existing CS bearer can be reused.
8\. The ICS UE A sends a Resume request to the Sâ€‘CSCF as specified in TS
23.228 [2] and TS 24.173 [8].
9\. The Sâ€‘CSCF forwards the Resume request to the SCC AS based upon filter
criteria.
10\. The SCC AS sends the Resume request to the Sâ€‘CSCF.
11\. The Sâ€‘CSCF sends the Resume request to UE B.
12\. The SCC AS sends a media update request to the Sâ€‘CSCF indicating the
media is resumed.
13\. The Sâ€‘CSCF forwards the media update request to the MGCF.
NOTE 3: Steps 12-13 can be executed in parallel with steps 10-11.
14\. Completion of communication resume between UE A and UE B based on the
procedures specified in TS 23.228 [2].
NOTE 4: If MSC Server enhanced for ICS is deployed rather than the MSC Server
and MGCF, the same flows apply and the MSC Server enhanced for ICS plays the
role of MSC Server and MGCF.
##### 7.6.1.2.2.5 Explicit Communication Transfer {#explicit-communication-
transfer .H6}
IMS procedures as defined in TS 24.173 [8] apply with the SCC AS combining the
description of the CS bearer with the service control signalling communicated
over the Gm reference point as specified in clause 7.1 of this document.
Additionally, the SCC AS may employ an MRF for control of media as needed for
execution of the Explicit Communication Transfer.
##### 7.6.1.2.2.5.1 Consultative ECT using Gm reference point, ICS UE as
transfer recipient {#consultative-ect-using-gm-reference-point-ics-ue-as-
transfer-recipient .H6}
Figure 7.6.1.2.2.5.1-1 describes how IMS consultative ECT is performed when
ICS UE B is playing the role of transfer recipient using Gm interface. The UE
A has a held call with UE C and an ongoing call with ICS UE B before transfer.
Figure 7.6.1.2.2.5.1-1: IMS Consultative ECT via Gm for ICS UE (transfer
recipient)
1\. UE A initiates transfer of ICS UE B to UE C by sending a REFER request as
specified in TS 24.173 [8].
2\. The Sâ€‘CSCF sends the REFER to the SCC AS as it was inserted at session
establishment.
3\. The SCC AS sends the REFER to the Sâ€‘CSCF.
4\. The Sâ€‘CSCF sends the REFER to the ICS UE B.
5\. The ICS UE B initiates session establishment towards UE C by initiating an
INVITE message.
6\. Filter criteria directs the Sâ€‘CSCF to send the INVITE to the SCC AS.
7\. The INVITE is sent to the Sâ€‘CSCF.
8\. The Sâ€‘CSCF routes the request to UE C.
9.-12. UE C sends back session progress messages to the ICS UE B via Sâ€‘CSCF
and SCC AS.
13\. SCC AS sends a backward message to MGCF to update MGW port for connecting
with UE C.
14\. A session is established between the ICS UE B and UE C.
15\. UE C release the session with UE A.
16\. The ICS UE B provides indication that the communication transfer is
complete by sending a NOTIFY message as specified in TS 24.173 [8].
17\. The Sâ€‘CSCF sends the NOTIFY to the SCC AS as it was inserted at session
establishment.
18\. The SCC AS sends the NOTIFY to the Sâ€‘CSCF.
19\. The NOTIFY is sent to UE A.
20\. The UE A initiates session release with ICS UE B and release the session.
NOTE: If MSC Server enhanced for ICS is deployed rather than the MSC Server
and MGCF, the same flows apply and the MSC Server enhanced for ICS plays the
role of MSC Server and MGCF.
##### 7.6.1.2.2.5.2 Blind ECT using Gm reference point, ICS UE as transfer
recipient {#blind-ect-using-gm-reference-point-ics-ue-as-transfer-recipient
.H6}
Figure 7.6.1.2.2.5.2-1 describes how IMS blind ECT is performed when ICS UE is
playing the role of transfer recipient using Gm interface. The UE A has a held
call with ICS UE B and no session with UE C before transfer.
Additionally, the SCC AS may employ an MRF for control of media as needed for
execution of the Communication ECT.
Figure 7.6.1.2.2.5.2-1: IMS blind ECT via Gm for ICS UE (transfer recipient)
1\. UE A initiates transfer of ICS UE B to UE C by sending a REFER as
specified in TS 24.173[8].
2\. The Sâ€‘CSCF sends the REFER to the SCC AS as it was inserted at session
establishment.
3\. The SCC AS acknowledges the REFER message as a blind transfer request for
ICS UE B and sends the REFER to the Sâ€‘CSCF.
4\. The Sâ€‘CSCF sends the REFER to the ICS UE B.
5\. ICS UE B accepts the transfer request.
6\. The Sâ€‘CSCF sends the accept message to the SCC AS as it was inserted at
session establishment.
7\. The SCC AS sends the accept message to the Sâ€‘CSCF.
8\. The Sâ€‘CSCF sends the accept message to the UE A.
9\. On reception of the accept message from the ICS UE B, UE A initiates the
session release with the ICS UE B by initiating a BYE message to ICS UE B.
10\. The Sâ€‘CSCF sends the BYE to the SCC AS as it was inserted at session
establishment. On reception of the BYE, the SCC AS releases only the PS
session signalling path with UE A and keeps the CS bearer between ICS UE B and
MGW.
11\. The SCC AS sends the BYE to the Sâ€‘CSCF.
12\. The Sâ€‘CSCF sends the BYE to the ICS UE B.
13\. Session between UE A and ICS UE B is released. The CS bearer from ICS UE
B and MGW is kept for further reuse.
14\. The ICS UE B initiates session establishment towards UE C by initiating
an INVITE message.
15\. Filter criteria directs the Sâ€‘CSCF to send the INVITE to the SCC AS.
16\. The INVITE with the MGW SDP received from the MSC Server/ MGCF upon UE
A-UE B session establishment is sent to the Sâ€‘CSCF.
17\. The Sâ€‘CSCF routes the request onwards to UE C.
18.-21. UE C sends back session progress messages to the ICS UE B via Sâ€‘CSCF
and SCC AS.
22\. SCC AS sends a backward message to MGCF to update the MGW port for
connecting with UE C.
23\. A session is established between the ICS UE B and UE C.
24\. The ICS UE B provides indication that the communication transfer is
complete by sending a NOTIFY as specified in TS 24.173 [8].
25\. The Sâ€‘CSCF sends the NOTIFY to the SCC AS as it was inserted at session
establishment.
26\. The SCC AS sends the NOTIFY to the Sâ€‘CSCF.
27\. The NOTIFY is sent to UE C as specified in TS 24.173 [8].
NOTE: If MSC Server enhanced for ICS is deployed rather than the MSC server
and MGCF, the same flows apply and the MSC Server enhanced for ICS plays the
role of MSC Server and MGCF.
##### 7.6.1.2.2.6 Conferencing {#conferencing .H6}
IMS procedures as defined in TS 24.173 [8] apply with the SCC AS combining the
description of the CS bearer with the service control signalling communicated
over the Gm reference point as specified in clause 7.1.
Additionally, the SCC AS may employ an MRF for control of media as needed for
execution of the Conferencing.
Figure 7.6.1.2.2.6-1 describes how ICS UE executes the IMS conferencing when
using Gm interface. The ICS UE A has a held call with UE B and a held call
with UE C before it initiates a conference.
Figure 7.6.1.2.2.6-1: ICS UE executes the IMS Conferencing via Gm
1\. The ICS UE A initiates a session with the conference AS by sending an
INVITE to Sâ€‘CSCF.
2\. The Sâ€‘CSCF sends the INVITE to the SCC AS as it was inserted at session
establishment.
3\. The SCC AS sends the INVITE to the Sâ€‘CSCF.
4\. The INVITE is sent to the conference AS.
5\. A conference connection is created as specified in TS 24.173 [8].
6.-9. Conference AS sends an OK response containing the conference URI to the
ICS UE A via Sâ€‘CSCF and SCC AS.
10\. SCC AS sends a backward message to MGCF to update the MGW port for
connecting with the conference AS.
11\. The ICS UE A initiates a REFER message indicating UE B transferring the
current session to the conference AS using Gm interface as specified in TS
24.173 [8].
12\. The Sâ€‘CSCF sends the REFER to the SCC AS as it was inserted at session
establishment.
13\. The SCC AS sends the REFER to the Sâ€‘CSCF.
14\. The Sâ€‘CSCF sends the REFER to UE B.
15\. A session is established between the conference AS and UE B as specified
in TS 24.173 [8].
16.-19. UE B sends a NOTIFY indicating the transfer completed back to ICS UE A
via Sâ€‘CSCF and SCC AS.
20\. The media between the ICS UE A and UE B is released.
21\. Step 11-20 are repeated for UE C.
NOTE 1: UE B and UE C can be referred to the conference in parallel.
NOTE 2: If the MSC Server enhanced for ICS is deployed rather than the MSC
Server and MGCF, the same flows apply and the MSC Server enhanced for ICS
plays the role of the MSC Server and the MGCF.
##### 7.6.1.2.2.7 Communication Waiting {#communication-waiting .H6}
Figure 7.6.1.2.2.7-1 provides the ICS communication waiting flow over Gm
reference point for the ICS UE.
Figure 7.6.1.2.2.7-1: ICS UE Communication Waiting over Gm Reference Point
1\. An incoming INVITE message is received at the Sâ€‘CSCF of the ICS UE A.
2\. The Sâ€‘CSCF executes terminating initial filter criteria and forwards the
INVITE message to the SCC AS.
3\. The SCC AS performs terminating access domain selection and chooses the CS
access network for the setup of the media.
4\. The SCC AS sends the INVITE message to the Sâ€‘CSCF.
5\. The Sâ€‘CSCF sends the INVITE message to UE A.
6\. The ICS UE A sends to the Sâ€‘CSCF an indication that the call is waiting.
7\. The Sâ€‘CSCF sends the indication of call waiting to the SCC AS.
8\. The SCC AS sends the indication of call waiting to the Sâ€‘CSCF.
9\. The Sâ€‘CSCF forwards the indication of call waiting to UE C.
10\. The ICS UE A sends a Hold message to the Sâ€‘CSCF as specified in TS 23.228
[2].
11\. The session between UE A and UE B is put on hold as described in clause
7.6.1.2.2.2 Communication Hold/Resume.
12\. Completion of the session establishment between UE A and UE C. The
existing CS bearer can be reused.
##### 7.6.1.2.3 Void
##### 7.6.1.2.4 When use of Gm reference point is not possible due to VPLMN
limitations
##### 7.6.1.2.4.1 When attached to an MSC Server enhanced with ICS {#when-
attached-to-an-msc-server-enhanced-with-ics .H6}
Procedures specified in clause 7.6.2 Service Consistency for non ICS UE apply.
##### 7.6.1.2.4.2 When attached to an MSC Server not enhanced with ICS {#when-
attached-to-an-msc-server-not-enhanced-with-ics .H6}
Procedures specified in clause 7.6.3 apply.
#### 7.6.1.3 User configuration of Supplementary Services
An ICS UE supporting multimedia telephony shall manage the IMS multimedia
telephony communication service settings data as specified in TS 24.173 [8].
### 7.6.2 Supplementary service invocation using the MSC Server enhanced for
ICS
#### 7.6.2.1 Overview
For IMS sessions established by non ICS UEs using the MSC Server enhanced for
ICS, the I2 reference point is used for communication of service control
signalling. The MSC Server enhanced for ICS shall perform the necessary
interworking between the I2 reference point and CS signalling to allow the IMS
to provide the IMS Multimedia Telephony Service as defined in TS 22.173 [4].
#### 7.6.2.2 Line ID Services (OIP, OIR, TIP, TIR)
For IMS sessions established by UEs using the I2 reference point, the MSC
Server enhanced for ICS shall perform the necessary interworking between the
I2 reference point and CS signalling (e.g. as described in TS 24.081 [13]) to
allow OIP, OIR, TIP and TIR as described in TS 24.173 [8] to be controlled by
the IMS.
For OIP, the MSC Server may interwork any display name received in conjunction
with the TEL URI or SIP URI to the CS signalling specified for the calling
name presentation (CNAP) service (e.g. as described in TS 24.096 [29]).
NOTE 1: The ability to interwork identity information from the I2 reference
point to CS signalling is limited to scenarios where the IMS identity is a TEL
URI or its SIP URI equivalent as described in TS 23.228 [2] or to where a
display name is received and the MSC Server supports the interworking
described in this clause
NOTE 2: A terminating UE using CS signalling is not able to temporarily
override default settings for the TIP/TIR supplementary service.
NOTE 3: Interworking of display name received in conjunction with a Tel URI or
SIP URI to calling name presentation using CNAP is subject to local regulatory
requirements on calling line identity and whether the originating network of
the call is trusted to provide an authentic identity.
#### 7.6.2.3 Communication Diversion Services
For IMS sessions established by UEs using the I2 reference point, the MSC
Server enhanced for ICS shall perform the necessary interworking between the
I2 reference point and CS signalling (e.g. as described in TS 24.082 [14]) to
allow Communication Diversion (CDIV) services to be executed in the IMS.
##### 7.6.2.3.1 Communication Forwarding Unconditional (CFU)
Communication Forwarding Unconditional (CFU) is provided as specified in TS
24.173 [8].
##### 7.6.2.3.2 Communication Forwarding Busy (CFB)
Communication Forwarding network determined user Busy (CFB) is provided as
specified in TS 24.173 [8].
For Communication Forwarding user determined Busy (CFB), the MSC Server
enhanced for ICS shall perform the necessary interworking between CS
signalling (e.g. as described in TS 24.082 [14]) and the I2 reference point to
allow the IMS to execute CFB.
##### 7.6.2.3.3 Communication Forwarding No Reply (CFNR)
Communication Forwarding No Reply (CFNR) is provided as specified in TS 24.173
[8].
The MSC Server enhanced for ICS shall allow the IMS to control the length of
time allowed for the UE to reply to the communication request prior to
invoking CFNR.
##### 7.6.2.3.4 Communication Forwarding on Not Logged-in (CFNL)
Communication Forwarding on Not Logged-in (CFNL) is provided as specified in
TS 24.173 [8].
##### 7.6.2.3.5 Communication Deflection (CD)
For Communication Deflection (CD), the MSC Server enhanced for ICS shall
perform the necessary interworking between CS signalling (e.g. as described in
TS 24.072 [15]) and the I2 reference point to allow the UE to deflect an
incoming call back to the IMS for redirection to another user.
##### 7.6.2.3.6 Communication Forwarding on Subscriber Not Reachable (CFNRc)
For Communication Forwarding on Subscriber Not Reachable (CFNRc), the MSC
Server enhanced for ICS shall return the appropriate reply to the offered
session to allow the IMS to execute CFNRc, (e.g. as specified in TS 24.604
[26]).
##### 7.6.2.3.7 Communication Diversion Notification (CDIVN)
The support of interworking between CS signalling and the IMS for the CDIVN
service is not supported at the MSC Server enhanced for ICS.
##### 7.6.2.3.8 Diversion notifications to originating users
For IMS sessions originated by UEs using the I2 reference point, the MSC
Server enhanced for ICS shall perform the necessary interworking between the
I2 reference point and CS signalling described in TS 24.082 [14] and TS 24.072
[15] to allow the UE to receive notification that an origination was diverted,
for use in networks which support this subscription option. This is applicable
to all CDIV services.
NOTE: Direct mapping between IMS diversion conditions and CS domain
supplementary service codes might not be possible for all services (e.g.
CFNL).
#### 7.6.2.4 Communication Barring
For IMS sessions established by UEs using the I2 reference point, the MSC
Server enhanced for ICS shall perform the necessary interworking between the
I2 reference point and CS signalling (e.g. as described in TS 24.088 [16]) to
provide the UE with notification that a Communications Barring (CB) service
was invoked.
NOTE: Unique mappings between SIP responses defined in TS 24.611 [28] and CS
domain supplementary service codes are not possible for OCB and ICB.
#### 7.6.2.5 Communication Hold/Resume
For IMS sessions established by UEs using CS media, the MSC Server enhanced
for ICS shall perform the necessary interworking between the I2 reference
point and CS signalling (e.g. as described in TS 24.083 [18]) to allow
communication hold and resume to be controlled by the IMS.
Figure 7.6.2.5-1 describes how IMS communication hold and resume is performed
via the MSC Server enhanced for ICS.
Figure 7.6.2.5-1: IMS Communication Hold and Resume via MSC Server enhanced
for ICS
1\. UE A sends a Hold message to the CS network (e.g. as specified in TS
24.083 [18]).
2\. The MSC Server initiates interaction with the CS-MGW over the Mc reference
point instructing it to stop sending the media stream toward UE B but to keep
the resources for the session reserved.
3\. The MSC Server sends the Hold message to the Sâ€‘CSCF indicating the session
is being put on hold as described in TS 24.173 [8].
NOTE 1: For point-to-point speech-only sessions, the SDP offer in the Hold
message shall also include RTCP bandwidth modifiers with values greater than
zero to allow the remote end to detect that the link is alive during hold, as
specified in sub-clause 7.3.1 of TS 26.114 [17].
4\. The Sâ€‘CSCF sends the Hold message to the SCC AS as it was inserted at
session establishment.
5\. The SCC AS sends the Hold message to the Sâ€‘CSCF.
6\. The Hold message is forwarded to UE B.
7\. UE A sends a Retrieve message on the CS network (e.g. as specified in TS
24.083 [18]).
8\. The MSC Server initiates interaction with the CS-MGW over the Mc reference
point instructing it to resume sending the media stream toward UE B.
9\. The MSC Server sends a Resume message to the Sâ€‘CSCF indicating the session
is being resumed as described in TS 24.173 [8].
NOTE 2: For point-to-point speech-only sessions, the SDP offer in the Resume
message may also include RTCP bandwidth modifiers with values equal to zero to
turn off RTCP as specified in sub-clause 7.3.1 of TS 26.114 [17].
10\. The Sâ€‘CSCF sends the Resume message to the SCC AS.
11\. The SCC AS sends the Resume message to the Sâ€‘CSCF.
12\. The Resume message is forwarded to UE B.
#### 7.6.2.6 Communication Waiting
For IMS sessions established by UEs using the I2 reference point, the MSC
Server enhanced for ICS shall perform the necessary interworking between the
I2 reference point and CS signalling (e.g. as described in TS 24.083 [18]) to
allow Communication Waiting (CW) to be controlled by the IMS.
Figure 7.6.2.6-1 describes how IMS CW is performed via the MSC Server enhanced
for ICS.
Figure 7.6.2.6-1: IMS Communication Waiting via MSC Server enhanced for ICS
1\. An incoming INVITE is received at the Sâ€‘CSCF of UE A.
2\. Filter criteria direct the Sâ€‘CSCF to send the INVITE to the SCC AS.
3\. The SCC AS sends the INVITE to the Sâ€‘CSCF.
4\. The Sâ€‘CSCF forwards the INVITE to the MSC Server based on the contact
address stored during registration.
5\. The MSC Server sends a Setup message to UE A to inform it of the waiting
call (e.g. as specified in TS 24.083 [18]).
6\. UE A sends an Alerting message for the waiting call.
7\. The MSC Server sends an indication that the call is waiting.
8\. The Sâ€‘CSCF forwards the indication that the call is waiting to the SCC AS.
9\. The SCC AS forwards the indication that the call is waiting to the Sâ€‘CSCF.
10\. The Sâ€‘CSCF forwards the indication that the call is waiting to UE C.
11\. The ICS User accepts the call and UE A sends a Hold message to put the
existing session on hold.
12\. The existing session between the MSC Server and UE B is put on hold as
described in clause 7.6.2.5 of this specification.
13\. UE A sends a Connect message for the waiting call.
14\. Completion of the IMS session setup procedures.
#### 7.6.2.7 Explicit Communication Transfer
For IMS sessions established by UEs using CS media, the MSC Server enhanced
for ICS shall perform the necessary interworking between the I2 reference
point and CS signalling (e.g. as described in TS 24.091 [19]) to allow
Explicit Communication Transfer (ECT) to be controlled by the IMS.
When the UE initiates ECT via CS access, the MSC Server enhanced for ICS shall
support consultative transfer and shall play the initiator role as described
in TS 23.228 [2] on behalf of the UE. The MSC Server enhanced for ICS shall
also support the recipient and target roles on behalf of the UE for
consultative transfer as described in TS.23.228 [2].
The MSC Server enhanced for ICS shall support the recipient and target roles
on behalf of the UE for blind transfer as described in TS 23.228 [2].
The MSC Server enhanced for ICS shall support the recipient and target roles
on behalf of the UE for assured transfer as described in TS 23.228 [2].
Figure 7.6.2.7-1 describes how IMS consultative ECT is performed via CS
access, with the MSC Server enhanced for ICS playing the role of transfer
initiator on behalf of the UE.
Figure 7.6.2.7-1: IMS Consultative ECT via MSC Server enhanced for ICS
(transfer initiator)
1\. UE A initiates transfer of UE B to UE C by sending a call transfer message
(e.g. as specified in TS 24.091 [19]).
2\. The MSC Server sends a REFER to the Sâ€‘CSCF. The REFER indicates that UE B
is to be transferred to UE C and that this new session is to replace the
current session between UE A and UE B.
3\. The Sâ€‘CSCF sends the REFER to the SCC AS as it was inserted at session
establishment.
4\. The SCC AS sends the REFER to the Sâ€‘CSCF.
5\. The Sâ€‘CSCF sends the REFER to the TAS for service execution.
6\. The TAS sends the REFER to the Sâ€‘CSCF.
7\. The REFER is sent to UE B as the transfer recipient.
8\. UE B initiates session establishment with UE C as specified in TS 24.173
[8].
9\. UE C initiates session release with UE A as specified in TS 24.173 [8].
10\. UE B provides indication that the communication transfer is complete as
specified in TS 24.173 [8].
11\. The Sâ€‘CSCF sends the NOTIFY to the TAS.
12\. The TAS sends the NOTIFY to the Sâ€‘CSCF.
13\. The Sâ€‘CSCF sends the NOTIFY to the SCC AS as it was inserted at session
establishment.
14\. The SCC AS sends the NOTIFY to the Sâ€‘CSCF.
15\. The MSC Server, as transfer initiator, receives notification that
communication transfer is complete.
16\. The MSC Server releases the calls (A-B and A-C) toward UE A and indicates
transfer success as specified in TS 24.091 [19].
17\. The MSC Server, as transfer initiator, initiates release of the IMS
session with UE B.
Figure 7.6.2.7-2 describes how IMS consultative ECT is performed via CS
access, with the MSC Server enhanced for ICS playing the role of transfer
recipient on behalf of the UE.
Figure 7.6.2.7-2: IMS Consultative ECT via MSC Server enhanced for ICS
(transfer recipient)
1\. UE A initiates transfer of UE B to UE C by sending a REFER as specified in
TS 24.173 [8].
2\. The Sâ€‘CSCF sends the REFER to the TAS for service execution.
3\. The TAS sends the REFER to the Sâ€‘CSCF.
4\. The Sâ€‘CSCF sends the REFER to the SCC AS as it was inserted at session
establishment.
5\. The SCC AS sends the REFER to the Sâ€‘CSCF within the dialog created for the
session between UE A and UE B.
6\. The REFER is sent to the MSC Server as the transfer recipient.
7\. On behalf of UE B, the MSC Server initiates session establishment towards
UE C.
8\. Filter criteria directs the Sâ€‘CSCF to send the INVITE to the SCC AS.
9\. The SCC AS sends the INVITE to the Sâ€‘CSCF.
10\. The Sâ€‘CSCF sends the INVITE to the TAS.
11\. The TAS sends the INVITE to the Sâ€‘CSCF.
12\. The Sâ€‘CSCF continues with originated session processing as specified in
TS 23.228 [2] and routes the request onwards to UE C.
13\. A session is established between the MSC Server (on behalf of UE B) and
UE C.
14\. UE C initiates session release with UE A as specified in TS 24.173 [8].
15\. The MSC Server provides indication that the communication transfer is
complete by sending a NOTIFY.
16 The Sâ€‘CSCF sends the NOTIFY to the SCC AS as it was inserted at session
establishment.
17\. The SCC AS sends the NOTIFY to the Sâ€‘CSCF.
18\. The Sâ€‘CSCF sends the NOTIFY to the TAS.
19\. The TAS sends the NOTIFY to the Sâ€‘CSCF.
20\. The NOTIFY is sent to UE A as specified in TS 24.173 [8].
21\. The MSC Servers sends a message with notification of ECT invocation to UE
B (e.g. as specified in TS 24.091 [19]).
22\. UE A initiates session release with the MSC Server as specified in TS
24.173 [8].
Figure 7.6.2.7-3 describes how IMS blind ECT is performed via CS access, with
the MSC Server enhanced for ICS playing the role of transfer recipient on
behalf of the UE.
Figure 7.6.2.7-3: IMS Blind ECT via MSC Server enhanced for ICS (transfer
recipient)
1\. UE A initiates transfer of UE B to UE C by sending a REFER as specified in
3GPP 24.173 [8].
2\. The Sâ€‘CSCF sends the REFER to the TAS for service execution.
3\. The TAS sends the REFER to the Sâ€‘CSCF.
4\. The Sâ€‘CSCF sends the REFER to the SCC AS as it was inserted at session
establishment.
5\. The SCC AS sends the REFER to the Sâ€‘CSCF within the dialog created for the
session between UE A and UE B.
6\. The REFER is sent to the MSC Server as the transfer recipient.
7\. UE A initiates release of the existing session with the MSC Server which
is acting on behalf of UE B.
8\. On behalf of UE B, the MSC Server initiates session establishment towards
UE C.
9\. Filter criteria directs the Sâ€‘CSCF to send the INVITE to the SCC AS.
10\. The SCC AS sends the INVITE to the Sâ€‘CSCF.
11\. The Sâ€‘CSCF sends the INVITE to the TAS.
12\. The TAS sends the INVITE to the Sâ€‘CSCF.
13\. The Sâ€‘CSCF continues with originated session processing as specified in
TS 23.228 [2] and routes the request onwards to UE C.
14\. A session is established between the MSC Server (on behalf of UE B) and
UE C.
15\. The MSC Server sends a NOTIFY to provide indication that the
communication transfer is complete.
16\. The Sâ€‘CSCF sends the NOTIFY to the SCC AS as it was inserted at session
establishment.
17\. The SCC AS sends the NOTIFY to the Sâ€‘CSCF.
18\. The Sâ€‘CSCF sends the NOTIFY to the TAS.
19\. The TAS sends the NOTIFY to the Sâ€‘CSCF.
20\. The NOTIFY is sent to UE A.
21\. The MSC Servers sends a message with notification of ECT invocation to UE
B (e.g. as specified in TS 24.091 [19]).
#### 7.6.2.8 Conferencing
For IMS sessions established by UEs using CS media, the MSC Server enhanced
for ICS shall perform the necessary interworking between the I2 reference
point and CS signalling (e.g. as described in TS 24.084 [20]) to allow
Conferencing to be controlled by the IMS.
When the UE initiates three-way session creation via CS access, the MSC Server
enhanced for ICS shall support the initiator role as described in TS 23.228
[2] on behalf of the UE. The MSC Server enhanced for ICS shall be able to
derive a conference factory URI, e.g. using components from the subscriber's
identity (e.g. IMSI).
Once a conference is created, the MSC Server enhanced for ICS shall supporting
adding parties to or removing parties from the conference on behalf of the UE.
The MSC Server enhanced for ICS shall also support joining a conference on
behalf of the UE upon receiving an invitation from a remote party or
conference focus.
If the conference is being managed by a UE using CS media, the MSC Server
enhanced for ICS shall not allow the UE to create a private conversation with
a remote party by splitting that party from the conference.
NOTE: Interworking is blocked due to no multiparty split service being defined
for MMTel.
The MSC Server shall not subscribe to the conference related events in IMS.
Figure 7.6.2.8-1 describes how conference creation can be performed via CS
access, with the MSC Server enhanced for ICS playing the role of conference
initiator on behalf of the UE. This flow does not preclude the use of other
mechanisms for inviting remote parties to the conference as specified in TS
24.147 [21].
Figure 7.6.2.8-1: IMS Conferencing via MSC Server enhanced for ICS (initiator)
1\. UE A initiates creation of the conference by sending a multiparty call
setup message (e.g. Build MPTY message as specified in TS 24.084 [20]).
2\. The MSC Server derives a conference factory URI and sends an INVITE to the
Sâ€‘CSCF.
3\. Filter criteria directs the Sâ€‘CSCF to send the INVITE to the SCC AS.
4\. The SCC AS sends the INVITE to the Sâ€‘CSCF.
5\. The Sâ€‘CSCF sends the INVITE to the Conferencing AS / MRFC.
6\. The Conferencing AS / MRFC creates a conference connection as specified in
TS 24.147 [21].
7\. The Conferencing AS / MRFC returns the conference URI to the Sâ€‘CSCF.
8\. The Sâ€‘CSCF sends the response to the SCC AS.
9\. The SCC AS sends the response to the Sâ€‘CSCF.
10\. The Sâ€‘CSCF sends the response to the MSC Server.
11\. The MSC Server sends a REFER to UE B to refer that party to the
conference.
12\. The Sâ€‘CSCF sends the REFER to the SCC AS as it was inserted at session
establishment.
13\. The SCC AS sends the REFER to the Sâ€‘CSCF.
14\. The Sâ€‘CSCF sends the REFER to UE B.
15\. UE B joins the conference as specified in TS 24.147 [21].
16\. UE B sends a NOTIFY indicating transfer to the conference is complete.
17\. The Sâ€‘CSCF sends the NOTIFY to the SCC AS.
18\. The SCC AS sends the NOTIFY to the Sâ€‘CSCF.
19\. The Sâ€‘CSCF sends the NOTIFY to the MSC Server.
20\. UE B initiates a session release.
21\. Steps 11 to 20 are repeated for UE C.
NOTE: UE B and UE C can be referred to the conference in parallel.
22\. The MSC Server sends an acknowledgement to UE A (e.g. Build MPTY
Acknowledgement as specified in TS 24.084 [20]).
#### 7.6.2.9 User configuration of communication service settings
##### 7.6.2.9.1 TAS procedures
The TAS shall allow an ICS User to manipulate the communication service
settings using only one of the following mechanisms:
\- communication service settings via the MSC Server enhanced for ICS as
described in clause 7.6.2.9.3;
\- communication service settings directly from the UE as described in TS
24.173 [8].
The TAS shall reject the manipulation of the communication service settings
via the prohibited mechanism.
##### 7.6.2.9.2 UE supporting multimedia telephony
Clause 7.6.1.3 applies.
##### 7.6.2.9.3 MSC Server enhanced for ICS
The MSC Server enhanced for ICS may implement a communication service setting
conversion function between CS signalling (e.g. as described in TS 24.010 [30]
for systems based on TS 24.008 [6]) and communication service setting
procedures (as defined in TS 24.173 [8]).
### 7.6.3 Service consistency for non ICS UE when attached to an MSC Server
not enhanced with ICS
#### 7.6.3.1 Line ID Services (OIP, OIR, TIP, TIR)
The service control for the Line ID services may be provided by the CS domain
if they are provisioned in the CS domain.
#### 7.6.3.2 Communication Diversion Services
##### 7.6.3.2.1 Communication Diversion services; CFU, CFNL
Standard IMS procedures apply toward IMS on behalf of the non-ICS UE.
##### 7.6.3.2.2 Communication Diversion services; CFNR, CFB
IMS control of these services are provided toward IMS on behalf of the non-ICS
UE.
NOTE: Annex D describes several implementation options which may used for the
execution of these services
##### 7.6.3.2.3 Communication Diversion services; Communication Deflection
The service control for the Call Deflection service may be provided by the CS
domain (if it is provisioned in the CS domain) or may be provided by IMS.
NOTE: Annex C describes an implementation option which may be used for the
execution of this service in IMS.
#### 7.6.3.3 Communication Barring
Standard IMS procedures apply toward IMS on behalf of the non-ICS UE.
#### 7.6.3.4 Communication Hold/Resume
The service control for the Call Hold and Retrieve services may be provided by
the CS domain if they are provisioned in the CS domain.
#### 7.6.3.5 Explicit Communication Transfer
The service control for the Explicit Call Transfer service may be provided by
the CS domain if it is provisioned in the CS domain.
#### 7.6.3.6 Conferencing
The service control for the Multiparty service may be provided by the CS
domain if it is provisioned in the CS domain.
#### 7.6.3.7 User configuration of Supplementary Services
##### 7.6.3.7.1 UE not supporting multimedia telephony
When using procedures as defined in 3GPP TS 24.010 [30], and not using MSC
Server enhanced for ICS, the following apply:
\- No activation or deactivation of supplementary services shall be allowed by
the CS network.
\- Interrogations of CFU and CNFL (clause 7.6.3.2.1), CFNR and CFB (clause
7.6.3.2.2) and Communication Barring (clause 7.6.3.3) shall not be allowed by
the CS network.
NOTE 1: The service interrogation, activation, and deactivation are prevented
for services which are not provisioned for the subscriber in CS domain.
NOTE 2: If an ICS User uses a non ICS UE not supporting multimedia telephony,
a downloadable application can be used to manage IMS multimedia telephony
communication service settings data as specified in TS 24.173 [8].
##### 7.6.3.7.2 UE supporting multimedia telephony
Refer to clause 7.6.1.3.
## 7.7 Session Release
### 7.7.1 Session Release for ICS UE
#### 7.7.1.1 General Gm Procedures
If receiving a session release from the CS access leg for the ICS UE using Gm
while the PS access leg is still active, the SCC AS shall release the CS
access leg. The SCC AS shall further update the remote leg, and if applicable,
the PS access leg, to reflect the change of media.
NOTE: Race conditions may occur where the session release of the CS access leg
could arrive prior an update over Gm from the UE removing the CS media.
#### 7.7.1.2 Session Release for Gm
Figure 7.7.1.2-1 provides a call flow illustrating the session release
procedures for an ICS UE attached to an MSC Server enhanced for ICS, which has
an ICS session already established. This call flow applies when Gm has been
used to set up the Service Control Signalling Path.
Figure 7.7.1.2-1: Session Release for Gm when using an MSC server enhanced for
ICS
1\. IMS procedures are executed for the release of the service control
signalling session when using the Gm reference point as defined in clause 5.10
of TS 23.228 [2].
2\. The SCC AS initiates release of the CS Bearer Control Signalling Path.
3\. The MSC Server releases the CS Session with the ICS UE.
4\. After confirmation of the session release from the ICS UE, the MSC Server
completes the release of the CS Bearer Control Signalling Path with the SCC
AS. Step 4 does not have to wait for step 3 to complete.
Alternatively the ICS UE may initiate release of the CS Bearer Control
Signalling Path. The SCC AS and the ICS UE shall gracefully handle the case
when both the SCC AS and ICS UE initiate the release procedure.
The call flow in Figure 7.7.1.2-1 also applies when the ICS UE is attached to
an MSC server.
#### 7.7.1.3 Void
## 7.7.2 Session Release for MSC Server enhanced for ICS
#### 7.7.2.1 General
If receiving a CS session release from the non ICS UE the MSC Server enhanced
for ICS shall release the session towards IMS. The SCC AS shall further update
the remote leg, to reflect the change of media. If receiving a session release
from the IMS, the MSC Server enhanced for ICS shall release the CS session
with the UE.
#### 7.7.2.2 Session Release by served UE
Figure 7.7.2.2-1 provides a call flow illustrating the session release
procedures initiated by an UE attached to an MSC Server enhanced for ICS.
Figure 7.7.2.2-1: Session Release initiated by UE A when using an MSC server
enhanced for ICS
1\. The UE releases CS Session.
2\. The MSC Server releases the IMS Session. Step 2 does not have to wait for
step 1 to complete.
3\. The SCC AS updates or releases the remote leg depending on whether other
media components remain in the remote leg after removal of speech media.
#### 7.7.2.3 Session Release by far-end
Figure 7.7.2.3-1 provides a call flow illustrating the session release
procedures initiated by far end for an UE attached to an MSC Server enhanced
for ICS.
Figure 7.7.2.3-1: Session Release initiated by far end when using an MSC
server enhanced for ICS
1\. The UE B initiates session release.
2\. The MSC Server releases CS session with UE A.
3\. Completion of session release initiated by far end. Step 3 does not have
to wait for step 2 to complete.
#### 7.7.2.4 Network initiated Session Release
Figure 7.7.2.4-1 provides a call flow illustrating the session release
procedures initiated by the home IMS network for an UE attached to an MSC
Server enhanced for ICS.
Figure 7.7.2.4-1: Network initiated Session Release when using an MSC server
enhanced for ICS
1\. The Sâ€‘CSCF decides the session should be terminated due to administrative
reasons or due to service expiration.
2\. The Sâ€‘CSCF initiates a session release towards UE B and MSC server.
3\. The MSC Server releases CS session with UE A.
4\. Completion of session release is provided from UE B and MSC Server to
Sâ€‘CSCF. Step 4 does not have to wait for step 3 to complete.
## 7.8 Void
# 8 Charging
## 8.1 General description
The charging strategy applied in ICS shall ensure complete and correct
charging of the access leg that is used for an ICS call. An ICS subscriber may
establish or accept a call through CS access or through an IP access network
(IP-CAN). The charge that is levied against an ICS subscriber for a call shall
encompass the usage of the access network (CS access or IP-CAN) as well as the
usage of the IMS network, further depending on the destination of the call and
other call related aspects. The access related charge for an ICS call, i.e.
the CS access network related charge or IP-CAN related charge, shall be
included in charging record generated by SCC AS.
The charge of a SIP call or session may be adapted when this call or session
is subject to a value added service (e.g. number translation, call diversion)
or is subject to a supplementary service (e.g. call forwarding, call transfer,
conference call).
## 8.2 Offline charging
Charging record generated by the SCC AS may be correlated with charging
records generated in the MSC Server or with charging records in the IP-CAN,
where applicable. The combination of charging records from SCC AS with
charging records from MSC Server or IP-CAN is used for determining access
charge for the call or multimedia session. The combination of these charging
records may further be correlated with other IMS-based charging records
generated by Sâ€‘CSCF or other functional entities in the IMS network, for the
purpose of generating an overall charge for a call or multimedia session,
including access related charge.
## 8.3 On-line charging
When on-line charging is applied for an ICS subscriber, this on-line charging
should be performed strictly in IMS. CS network based on-line charging service
(e.g., CAMEL prepaid), for example, shall not be invoked for ICS subscribers.
NOTE: If for an ICS subscriber a call that is established in CS is not
anchored in IMS network, i.e. no ICS is applied for that call, then on-line
charging in CS access can be applied for that call.
# 9 Security Considerations
## 9.1 Access security
ICS re-uses the CS domain security described in the detailed access specific
specification.
Access using MSC Server enhanced for ICS is secured by the combination of the
CS access security and the IMS Network Domain Security. The MSC Server
enhanced for ICS also performs the trusted node authentication procedures
according to TS 33.203 [32].
## 9.2 Network Domain Security
Network domain security with the MSC server enhanced for ICS shall be provided
by NDS/IP according to TS 33.210 [33] for the I2 reference point.
NOTE: If the control plane interfaces are trusted (e.g. physically protected),
there is no need to use protection according to TS 33.210 [33].
###### ## Annex A (informative): Service Consistency
IMS Centralized Services (ICS) provides **communication services such that all
services, and service control, are based on IMS mechanisms and enablers. It
enables IMS services when using CS access for the media bearer**.
With ICS, the user services are provided by IMS. User sessions are controlled
in IMS via PS or CS access. When using CS access network, or when using PS
access networks which do not support full duplex speech component of an IMS
service, the CS core network is utilized to establish a circuit bearer for use
as media for IMS sessions.
Functionality is needed to provide IMS Centralized Services to devices using a
circuit switched access network for media transport. Two fundamentally
different approaches are enabled in this specification. One approach supports
legacy UEs by placing new functional elements in the MSC Server. Another
approach provides new functionality in the UE. The following figure depicts
the provision of IMS Centralized Services for these approaches from the user's
perspective. This figure is intended to be illustrative in nature, and is not
intended to depict a complete or definitive identification of the various IMS
Centralized Services that may be provided using different access networks or
solutions.
Figure A-1: IMS Centralized Services
###### ## Annex B (informative): ICS functions in different deployment
scenarios
The following tables provides guidance on which of the functions and
functionalities are needed in the different deployment scenarios.
**Scenario 1** : An operator who only supports UEs that have ICS functionality
for their ICS Users:
* * *
             MSC Server with ICS enhancements   ICS UE    Transparent control channel                           SCC AS    
                                                                                                                IUA       **T-ADS**
Required **No** **Yes** **As driven by operator policy and VPLMN support.**
**Yes** **Yes**
* * *
ICS Users using a non-ICS UE (e.g. after SIM swap) will not make use of the
transparent control channel; non ICS UE originated calls are routed to the
home IMS using IN (e.g. CAMEL) signalling in conjunction with CS signalling
(e.g. TS 24.008) for call origination.
**Scenario 2** : An operator who only supports non ICS UEs for their ICS
Users:
* * *
             MSC Server with ICS enhancements   ICS UE   Transparent control channel (Gm)   SCC AS              
                                                                                            IUA                 **T-ADS**
Required **Yes** **No** **No** **Conditional*** **Yes**
* * *
* Required if the operator supports IN (e.g. CAMEL) redirection of CS originated calls.
**Scenario 3** : An operator who supports UE's for their ICS Users that do,
and do not, have ICS functionality (to different subscribers and the same
subscribers) ensuring the coexistence of UEs that have and do not have ICS
functionality:
* * *
             MSC Server with ICS enhancements   ICS UE    Transparent control channel                           SCC AS    
                                                                                                                IUA       **T-ADS**
Required **Yes** **Yes** **As driven by operator policy and VPLMN support.**
**Yes** **Yes**
* * *
**Scenario 4: Inbound roaming - operator supports ICS**
Inbound roaming subscribers on an operator\'s network that supports either the
same or different ICS functionality that the inbound roaming subscriber is
using, ensuring the coexistence of UEs that have and do not have ICS
functionality.
**Sub case 4.1** : Subscriber from operator supporting scenario 1 roams into
network of scenario 1
Same functions and functionalities in roaming in-network as in scenario 1\. No
additional functions or functionalities.
**Sub case 4.2** : Subscriber from operator supporting scenario 2 roams into
network of scenario 2
Same functions and functionalities in roaming in-network as in scenario 2\. No
additional functions or functionalities.
**Sub case 4.3** : Subscriber from operator supporting scenario 1 roams into
network of scenario 2
Same functions and functionalities in roaming in-network as in scenario 2\. No
additional functions or functionalities. Roaming agreement, operator policy
and access network restrictions decide on the use of the transparent control
channel between ICS UE and SCC AS in the home network.
ICS Users using a non-ICS UE (e.g. after SIM swap) will not make use of the
transparent control channel; non ICS UE originated calls are routed to the
home IMS using IN (e.g. CAMEL) signalling in conjunction with CS signalling
(e.g. TS 24.008) for call origination.
**Sub case 4.4** : Subscriber from operator supporting scenario 2 roams into
network of scenario 1
Same functions and functionalities in roaming in-network as in scenario 1: No
additional functions or functionalities. Roaming agreement and operator policy
decide on the fallback solution, i.e., whether or not originated calls are
routed to the home IMS using IN (e.g. CAMEL) signalling in conjunction with CS
signalling (e.g. TS 24.008) for call origination.
**Scenario 5: Inbound roaming - operator does not support ICS**
Inbound roaming subscribers on an operator\'s network that does not support
ICS.
**Sub case 5.1** : Subscriber from operator supporting scenario 1 roams into
an operator\'s network that does not support ICS.
Roaming agreement, operator policy and access network restrictions decide on
the use of the transparent control channel between ICS UE and SCC AS in the
home network.
ICS Users using a non-ICS UE (e.g. after SIM swap) will not make use of the
transparent control channel; non ICS UE originated calls are routed to the
home IMS using IN (e.g. CAMEL) signalling in conjunction with CS signalling
(e.g. TS 24.008) for call origination.
**Sub case 5.2** Subscriber from operator supporting scenario 2 roams into an
operator\'s network that does not support ICS.
Roaming agreement and operator policy decide on the fallback solution, i.e.,
whether or not originated calls are routed to the home IMS using IN (e.g.
CAMEL) signalling in conjunction with CS signalling (e.g. TS 24.008) for call
origination.
###### ## Annex C (informative): Communication Deflection support when call
has been delivered using CS call control
When a call has been delivered to a non ICS UE using CS call control,
Communication Deflection service can be centralized and executed in IMS by
using IN (e.g. O-CSI CAMEL) if it is supported by the network and user
subscription.
###### ## Annex D (informative): Conditional Call Forwarding support when call
has been delivered using CS call control
When a call has been delivered to an UE using CS call control, conditional
call forwarding services can be centralized and executed in IMS by one of (or
a combination of) the following implementation options.
**Solution 1: Default PSIs**
In this solution, Conditional CF is configured in IMS with default service
configuration in the CS domain. The Conditional CF services are configured in
the HLR. The different forwarded number can be set in HLR to indicate the type
of CF. The VMSC redirects the call to IMS for appropriate handling of the
service in IMS.
**Solution 2: MAP suppression-of-announcements**
In this solution, Conditional CF is configured and provisioned in IMS domain
exclusively, according to IMS Centralized Service principle. It provides means
to suppress the announcement in CS domain at the MSC for CFNR/CFB. MGCF
provides the appropriate responses to TAS on behalf of the ICS user in CS
domain.
For support of CFNRy, the TAS starts a supervisory no-reply timer on receipt
of Alerting from the called party. If the timer expires without receipt of the
Connect from the called party, the TAS invokes the CFNRy service.
**Solution 3: IN**
In this solution, Conditional CF is configured in IMS with default service
configuration in the CS domain so that the VMSC invokes the CF service in the
CS domain upon detection of CF triggers. IN (e.g. O-CSI CAMEL service) is
configured in the HLR to redirect service control to IMS for processing of CF.
###### ## Annex E (informative): Using MRF for media process
After the session between ICS UE and other party ( Party B) is hold, if the
SCC AS receives the new session request, it may use MRF for media process. The
following three options give details on how to implement it.
**Solution 1: using MRFP by SCC AS for held party**
In this solution, if the SCC AS receives the new session request after the
session between ICS UE and other party (Party B) is hold, it changes the MGW
media path from Party B to the third party (Party C), and connects Party B to
MRF for playing announcement.
**Solution 2: using MRFP by SCC AS for active and Held party**
In this solution, if the SCC AS receives the new session request after the
session between ICS UE and other party (Party B) is hold, it changes the MGW
media path to MRF, and then connects Party B to MRF for playing announcement
and connects the third party (Party C) to MRF to communicate with ICS UE.
**Solution 3: using MRFP by TAS for Held call**
In this solution, TAS is always kept in ICS UE A\'s remote leg. After the TAS
receives the Hold request from the ICS UE via the SCC AS, it performs
communication Hold procedure as described in TS 24.147 [21]. The MRF is
connected to Party B for playing announcement.
#