# Foreword
This Technical Specification has been produced by the 3^rd^ Generation
Partnership Project (3GPP).
The present document specifies the technical realization of the handling of
calls originated by a 3G mobile subscriber and calls directed to a 3G mobile
subscriber, up to the point where the call is established within the 3GPP
system.
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 Indicates a TSG approved Release 1999 document under change control;
4 Indicate a TSG approved Release 4 document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the specification;
# 1 Scope
The present document specifies the technical realization of the handling of
calls originated by a UMTS or GSM mobile subscriber and calls directed to a
UMTS or GSM mobile subscriber, up to the point where the call is established.
Normal release of the call after establishment is also specified. Trunk
Originated call is also modelled.
In the present document, the term MS is used to denote a UMTS UE or GSM MS, as
appropriate.
The handling of DTMF signalling and Off-Air Call set-up (OACSU) are not
described in the present document.
The details of the effects of UMTS or GSM supplementary services on the
handling of a call are described in the relevant 3GPP TS 23.07x, 3GPP TS
23.08x and 3GPP TS 23.09x series of specifications.
The specification of the handling of a request from the HLR for subscriber
information is not part of basic call handling, but is required for both CAMEL
(3GPP TS 23.078 [12]) and optimal routeing (3GPP TS 23.079 [13]). The use of
the Provide Subscriber Information message flow is shown in 3GPP TS 23.078
[12] and 3GPP TS 23.079 [13].
The logical separation of the MSC and VLR (shown in clauses 4, 5 and 7), and
the messages transferred between them (described in clause 8) are the basis of
a model used to define the externally visible behaviour of the MSC/VLR, which
is a single physical entity. They do not impose any requirement except the
definition of the externally visible behaviour.
If there is any conflict between the present document and the corresponding
stage 3 specifications (3GPP TS 24.008 [26], 3GPP TS 25.413 [27], 3GPP TS
48.008 [2] and 3GPP TS 29.002 [29]), the stage 3 specification shall prevail.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
  * References are either specific (identified by date of publication, > edition number, version number, etc.) or non‑specific.
  * For a specific reference, subsequent revisions do not apply.
  * For a non-specific reference, the latest version applies. In the > case of a reference to a 3GPP document (including a GSM document), > a non-specific reference implicitly refers to the latest version > of that document _in the same Release as the present document_.
[1] 3GPP TS 43.020: \"Security related Network Functions\".
[2] 3GPP TS 48.008: \"Mobile Switching Centre - Base Station System (MSC -
BSS) interface Layer 3 specification\".
[3] 3GPP TS 52.008: \"Telecommunication management; GSM subscriber and
equipment trace\".
[4] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[5] 3GPP TS 23.003: \"Numbering, addressing and identification\".
[6] 3GPP TS 23.012: \"Location management procedures\".
[7] 3GPP TS 23.032: \"Universal Geographical Area Description (GAD)\".
[8] Void
[9] 3GPP TS 23.060: \"General Packet Radio Service (GPRS); Service
description; Stage 2\".
[10] 3GPP TS 23.066: \"Support of GSM Mobile Number Portability (MNP); Stage
2\".
[11] 3GPP TS 23.072: \"Call deflection Supplementary Service; Stage2\".
[12] 3GPP TS 23.078: \"Customized Applications for Mobile network Enhanced
Logic (CAMEL); Stage 2\".
[13] 3GPP TS 23.079: \"Support of Optimal Routeing (SOR); Technical
realization; Stage 2\".
[14] 3GPP TS 23.081: \"Line identification Supplementary Services; Stage 2 \".
[15] 3GPP TS 23.082: \"Call Forwarding (CF) Supplementary Services; Stage 2\".
[16] 3GPP TS 23.083: \"Call Waiting (CW) and Call Hold (HOLD) Supplementary
Service; Stage 2\".
[17] 3GPP TS 23.084: \"Multi Party (MPTY) Supplementary Service; Stage 2\".
[18] 3GPP TS 23.085: \"Closed User Group (CUG) Supplementary Service; Stage
2\".
[19] 3GPP TS 23.086: \"Advice of Charge (AoC) Supplementary Service; Stage
2\".
[20] 3GPP TS 23.087: \"User-to-User Signalling (UUS) Supplementary Service;
Stage 2\".
[21] 3GPP TS 23.088: \"Call Barring (CB) Supplementary Service; Stage 2\".
[22] 3GPP TS 23.091: \"Explicit Call Transfer (ECT) supplementary service;
Stage 2\".
[23] 3GPP TS 23.093: \"Technical realization of Completion of Calls to Busy
Subscriber (CCBS); Stage 2\".
[24] 3GPP TS 23.116: \"Super-charger technical realization; Stage 2\".
[25] 3GPP TS 23.135: \"Multicall supplementary service; Stage 2\".
[25a] 3GPP TS 23.195: \"Provision of UE Specific Behaviour Information to
Network Entities\".
[26] 3GPP TS 24.008: \"Mobile radio interface Layer 3 specification; Core
network protocols; Stage 3\".
[27] 3GPP TS 25.413: \"UTRAN Iu interface RANAP signalling\".
[28] 3GPP TS 27.001: \"General on Terminal Adaptation Functions (TAF) for
Mobile Stations (MS)\".
[29] 3GPP TS 29.002: \"Mobile Application Part (MAP) specification\".
[30] 3GPP TS 29.007: \"General requirements on interworking between the Public
Land Mobile Network (PLMN) and the Integrated Services Digital Network (ISDN)
or Public Switched Telephone Network (PSTN)\".
[31] 3GPP TS 29.010: \"Information Element Mapping between Mobile Station -
Base Station System (MS - BSS) and Base Station System - Mobile-services
Switching Centre (BSS - MSC) Signalling Procedures and the Mobile Application
Part (MAP)\".
[32] 3GPP TS 33.102: \"3G Security; Security architecture \".
[33] ITU-T Recommendation Q.761 (1999): \" Signalling System No. 7 - ISDN User
Part functional description \".
[34] ITU-T Recommendation Q.762 (1999): \"Signalling System No. 7 - ISDN User
Part general functions of messages and signals\".
[35] ITU-T Recommendation Q.763 (1999): \"Signalling System No. 7 - ISDN User
Part formats and codes\".
[36] ITU-T Recommendation Q.764 (1999): \" Signalling System No. 7 -- ISDN
user part signalling procedures\".
[37] ITU‑T Recommendation Q.850 (1996): \"Usage of cause and location in the
Digital Subscriber Signalling System No. 1 and the Signalling System No. 7
ISDN User Part\".
[38] 3GPP TS 23.172: \"Technical realization of Circuit Switched (CS)
multimedia service ; UDI/RDI fallback and service modification; Stage 2\".
[39] 3GPP TS 23.067: \"enhanced Multi-Level Precedence and Pre-emption service
(eMLPP) - Stage 2\".
[40] 3GPP TS 29.118: \"Mobility Management Entity (MME) - Visitor Location
Register (VLR) SGs interface specification\".
# 3 Definitions and abbreviations
## 3.1 Definitions
For the purposes of the present document, the following terms and definitions
apply:
**A subscriber:** the calling mobile subscriber
**B subscriber:** the mobile subscriber originally called by the A subscriber
**C subscriber:** the subscriber to whom the B subscriber has requested that
calls be forwarded\ The C subscriber may be fixed or mobile.
**Location Information:** information to define the whereabouts of the MS, and
the age of the information defining the whereabouts
**PLMN Bearer Capability:** information transferred over the UMTS or GSM
access interface to define the information transfer capabilities to be used
between the MS and the network for a circuit-switched connection
## 3.2 Abbreviations
For the purposes of the present document, the following abbreviations apply:
> A&O Active & Operative
>
> ACM Address Complete Message
>
> ANM ANswer Message
>
> AoC Advice of Charge
>
> BC Bearer Capability
>
> BOIC-exHC&BOIZC Barring of Outgoing International Calls except those
> directed to the HPLMN Country & Barring of Outgoing InterZonal Calls
>
> BOIZC Barring of Outgoing InterZonal Calls
>
> BOIZC-exHC Barring of Outgoing InterZonal Calls except those directed to the
> HPLMN Country
>
> CCBS Completion of Calls to Busy Subscriber
>
> CFB Call Forwarding on Busy
>
> CFNRc Call Forwarding on mobile subscriber Not Reachable
>
> CFNRy Call Forwarding on No Reply
>
> CFU Call Forwarding Unconditional
>
> CLIP Calling Line Identity Presentation
>
> CLIR Calling Line Identity Restriction
>
> COLP COnnected Line identity Presentation
>
> COLR COnnected Line identity Restriction
>
> CUG Closed User Group
>
> CW Call Waiting
>
> FTN Forwarded-To Number
>
> FTNW Forwarded-To NetWork
>
> GMSCB Gateway MSC of the B subscriber
>
> GPRS General Packet Radio Service
>
> HLC Higher Layer Compatibility
>
> HLRB The HLR of the B subscriber
>
> HPLMNB The HPLMN of the B subscriber
>
> IAM Initial Address Message
>
> IPLMN Interrogating PLMN - the PLMN containing GMSCB
>
> IWU Inter Working Unit
>
> LLC Lower Layer Compatibility
>
> MO Mobile Originated
>
> MPTY MultiParTY
>
> MT Mobile Terminated
>
> NDUB Network Determined User Busy
>
> NRCT No Reply Call Timer
>
> PgA Paging Area
>
> PLMN BC (GSM or UMTS) PLMN Bearer Capability
>
> PRN Provide Roaming Number
>
> PUESBINE Provision of User Equipment Specific Behaviour Information to
> Network Entities
>
> SCUDIF Service Change and UDI/RDI Fallback
>
> SGSN Serving GPRS support node
>
> SIFIC Send Information For Incoming Call
>
> SIFOC Send Information For Outgoing Call
>
> SRI Send Routeing Information
>
> TO Trunk Originated
>
> UDUB User Determined User Busy
>
> UESBI-Iu User Equipment Specific Behaviour Information over the Iu interface
>
> VLRA The VLR of the A subscriber
>
> VLRB The VLR of the B subscriber
>
> VMSCA The Visited MSC of the A subscriber
>
> VMSCB The Visited MSC of the B subscriber
>
> VPLMNA The Visited PLMN of the A subscriber
>
> VPLMNB The Visited PLMN of the B subscriber
# 4 Architecture
Subclauses 4.1 and 4.2 show the architecture for handling a basic MO call and
a basic MT call. A basic mobile‑to‑mobile call is treated as the concatenation
of an MO call and an MT call.
## 4.1 Architecture for an MO call
A basic mobile originated call involves signalling between the MS and its VMSC
via the BSS, between the VMSC and the VLR and between the VMSC and the
destination exchange, as indicated in figure 1.
In figure 1 and throughout the present document, the term BSS is used to
denote a GSM BSS or a UTRAN, as appropriate.
{width="6.093055555555556in" height="2.5854166666666667in"}
Figure 1: Architecture for a basic mobile originated call
In figure 1 and throughout the present document, the term ISUP is used to
denote the telephony signalling system used between exchanges. In a given
network, any telephony signalling system may be used.
When the user of an MS wishes to originate a call, the MS establishes
communication with the network using radio interface signalling, and sends a
message containing the address of the called party. VMSCA requests information
to handle the outgoing call (SIFOC) from VLRA, over an internal interface of
the MSC/VLR. If VLRA determines that the outgoing call is allowed, it responds
with a Complete Call. VMSCA:
\- establishes a traffic channel to the MS; and
\- constructs an ISUP IAM using the called party address and sends it to the
destination exchange.
## 4.2 Architecture for an MT call
A basic mobile terminated call involves signalling as indicated in figure 2.
Communication between VMSCB and the MS is via the BSS, as for the mobile
originated case. If VPLMNB supports GPRS and the Gs interface between VLRB and
the SGSN is implemented (see 3GPP TS 23.060 [9]) and there is an association
between VLRB and the SGSN for the MS, the paging signal towards the MS goes
from VMSCB via VLRB and the SGSN to the BSS. The IPLMN, containing GMSCB, is
in principle distinct from HPLMNB, containing HLRB, but the practice for at
least the majority of current UMTS or GSM networks is that a call to an MS
will be routed to a GMSC in HPLMNB.
{width="6.0777777777777775in" height="4.282638888888889in"}
Figure 2: Architecture for a basic mobile terminated call
When GMSCB receives an ISUP IAM, it requests routeing information from HLRB
using the MAP protocol. HLRB requests a roaming number from VLRB, also using
the MAP protocol, and VLRB returns a roaming number in the Provide Roaming
Number Ack. HLRB returns the roaming number to GMSCB in the Send Routeing Info
ack. GMSCB uses the roaming number to construct an ISUP IAM, which it sends to
VMSCB. When VMSCB receives the IAM, it requests information to handle the
incoming call (SIFIC) from VLRB, over an internal interface of the MSC/VLR. If
VLRB determines that the incoming call is allowed, it requests VMSCB to page
the MS. VMSCB pages the MS using radio interface signalling. When the MS
responds, VMSCB informs VLRB in the Page ack message. VLRB instructs VMSCB to
connect the call in the Complete call, and VMSCB establishes a traffic channel
to the MS.
## 4.3 Architecture for a TO call
A basic trunk originated call involves signalling between the PSTN and the
PLMN's MSC, as indicated in figure x. The originating exchange may also be
another MSC of the same or different PLMN.
The MSC may also be connected to PBX but that is outside the scope of this
document. In the PBX case same modelling applies but the PBX signalling is
different to ISUP.
{width="5.995833333333334in" height="2.6145833333333335in"}
Figure 4.3.1: Architecture for a basic trunk originated call
In figure x and throughout the present document, the term ISUP is used to
denote the telephony signalling system used between exchanges. In a given
network, any telephony signalling system may be used.
The MSC receives a setup (IAM) message from the originating exchange. The MSC
analyses the called party number and routes the call to an appropriate
destination. If the called party number is an MSISDN the gateway MSC
functionality is activated. If the MSISDN belongs to another PLMN (or is
ported out), the call is routed to another PLMN. If the called number is a
PSTN number then the call is routed to (appropriate) PSTN operator. There may
be other destinations also.
# 5 Information flows
In this clause and clause 7, the terms \"security procedures\" and \"security
control\" denote the UMTS ciphering and integrity protection mechanism defined
in 3GPP TS 33.102 [32] or the GSM ciphering mechanism defined in 3GPP TS
43.020 [1], as appropriate.
## 5.1 Information flow for an MO call
An example information flow for an MO call is shown in figure 3; many
variations are possible. Signalling over the radio interface between MSA and
BSSA or VMSCA is shown by dotted lines; signalling over the Iu interface (for
UMTS) or the A interface (for GSM) between BSSA and VMSCA is shown by dashed
lines; signalling over the B interface between VMSCA and VLRA is shown by
chain lines; and ISUP signalling between VMSCA and the destination exchange is
shown by solid lines.
{width="5.310416666666667in" height="6.415972222222222in"}
NOTE 1: Authentication may occur at any stage during the establishment of an
MO call; its position in this message flow diagram is an example.
NOTE 2: Security procedures may be initiated at any stage after
authentication; the position in this message flow diagram is an example.
NOTE 3: If ciphering is not required for a GSM connection, the MSC may send a
CM service accept towards the MS; optionally it may instead send a \"start
ciphering\" request indicating that no ciphering is required. This option is
not available for a UMTS connection [ffs].
NOTE 4: The network may request the IMEI from the MS, and may check the IMEI,
at any stage during the establishment of an MO call, either as part of the
procedure to start security procedures or explicitly after security procedures
have started; this is not shown in this message flow diagram.
Figure 3: Information flow for a basic mobile originated call
When the user wishes to originate a call, MSA establishes a signalling
connection with BSSA, and sends a Connection Management (CM) service request
to BSSA, which relays it to VMSCA. VMSCA sends a Process Access Request to
VLRA. VLRA may then initiate authentication, as described in 3GPP TS 33.102
[32] for UMTS and 3GPP TS 43.020 [1] for GSM. VLRA may also initiate security
procedures at this stage, as described in 3GPP TS 33.102 [32] for UMTS 3GPP TS
43.020 [1] for GSM. If the user originates one or more new MO calls in a
multicall configuration, MSA sends a CM service request through the existing
signalling connection for each new call.
If VLRA determines that MSA is allowed service, it sends a Process Access
Request ack to VMSCA. If VMSCA has received a Start security procedures
message from VLRA, the Process Access Request ack message triggers a Start
security procedures message towards BSSA; otherwise VMSCA sends a CM Service
Accept message towards BSSA.
If BSSA receives a Start security procedures message from VMSCA, it initiates
security procedures as described in 3GPP TS 33.102 [32] for UMTS and 3GPP TS
43.020 [1] for GSM; when security procedures have been successfully initiated,
MSA interprets this in the same way as a CM Service Accept. If security
procedures are not required at this stage, BSSA relays the CM Service Accept
to MSA.
When MSA has received the CM Service Accept, or security procedures have been
successfully initiated, MSA sends a Set-up message containing the B subscriber
address via BSSA to VMSCA. MSA also uses the Set-up message to indicate the
bearer capability required for the call; VMSCA translates this bearer
capability into a basic service, and determines whether an interworking
function is required. VMSCA sends to VLRA a request for information to handle
the outgoing call, using a Send Info For Outgoing Call (SIFOC) message
containing the B subscriber address.
If VLRA determines that the call should be connected, it sends a Complete Call
message to VMSCA. VMSCA sends a Call Proceeding message via BSSA to MSA, to
indicate that the call request has been accepted, and sends an Allocate
channel message to BSSA, to trigger BSSA and MSA to set up a traffic channel
over the radio interface. The Call Proceeding message includes bearer
capability information if any of the negotiable parameters of the bearer
capability has to be changed. When the traffic channel assignment process is
complete (indicated by the Allocation complete message from BSSA to VMSCA),
VMSCA constructs an ISUP IAM using the B subscriber address, and sends it to
the destination exchange.
When the destination exchange returns an ISUP Address Complete Message (ACM),
VMSCA sends an Alerting message via BSSA to MSA, to indicate to the calling
user that the B subscriber is being alerted.
When the destination exchange returns an ISUP ANswer Message (ANM), VMSCA
sends a Connect message via BSSA to MSA, to instruct MSA to connect the speech
path.
The network then waits for the call to be cleared.
For an emergency call, a different CM service type (emergency call) is used,
and the mobile may identify itself by an IMEI. It is a network operator option
whether to allow an emergency call when the mobile identifies itself by an
IMEI. Details of the handling are shown in clause 7.
## 5.2 Information flow for retrieval of routeing information for an MT call
The information flow for retrieval of routeing information for an MT call is
shown in figure 4. ISUP signalling between the originating exchange and GMSCB,
and between GMSCB and VMSCB is shown by solid lines; signalling over the MAP
interfaces between GMSCB and HLRB and between HLRB and VLRB, and over the B
interface between VLRB and VMSCB is shown by chain lines; signalling over the
Iu interface (for UMTS) or the A interface (for GSM) between VMSCB and BSSB is
shown by dashed lines; and signalling over the radio interface between BSSB
and MSB is shown by dotted lines.
{width="6.540972222222222in" height="5.145138888888889in"}
NOTE 1: If pre-paging is used, paging is initiated after VLRB has accepted the
PRN message. The paging procedure is described in subclause 5.3.
NOTE 2: VMSCB starts the timer for the release of radio resources after it
sends the Process Access Request message to VLRB. VMSCB releases the radio
resource allocated for the MT call if the timer expires before the IAM is
received, and when the MAP RELEASE_RESOURCES message is received from the
GMSC.
NOTE 3: If an ISUP REL message is received at the GMSC between sending of SRI
and receiving of SRI ack, the GMSC does not send IAM to the VMSC. Instead a
MAP Release_Resources message may be sent to the VMSC.
Figure 4: Information flow for retrieval of routeing information for a basic
mobile terminated call
When GMSCB receives an IAM, it analyses the called party address. If GMSCB can
derive an HLR address from the B party address, it sends a request for
routeing information (SRI) to HLRB. If GMSCB supports pre-paging (i.e. it is
prepared to wait long enough for the SRI ack to allow pre-paging to be
completed), it indicates this by an information element in the SRI message.
HLRB decides whether pre-paging is supported according to the following
criteria:
\- GMSCB has indicated that it supports pre-paging; and
\- HLRB supports pre-paging (i.e. it is prepared to wait long enough for the
PRN ack to allow pre-paging to be completed).
HLRB sends a request for a roaming number (PRN) to VLRB; if pre-paging is
supported, it indicates this by an information element in the PRN message. If
Paging Area function is supported in HLRB then HLRB sends the paging area if
stored in HLR. VLRB returns the roaming number in the PRN ack, and HLRB relays
the roaming number to GMSCB in the SRI ack. GMSCB constructs an IAM using the
roaming number, and sends it to VMSCB.
### 5.2.1 Mobile Terminating Roaming Retry Call
The information flow for mobile terminating roaming retry call is shown in
figure 4a. It applies to a mobile terminating call while the called mobile is
simultaneously moving from an old to a new MSC, if the GMSC, the HLR and the
old terminating VMSC support the MT Roaming Retry procedure.
In that case, upon receipt of :
\- an ISUP IAM message which was preceeded by a MAP Cancel Location procedure
or by a Send Identification procedure for a super-charger subscriber, or
\- a MAP Cancel Location procedure or Send Identification procedure for a
super-charger subscriber while on-going paging,
the old VMSC shall instruct the GMSC to resume terminating call procedure by
sending a MAP Resume Call Handling message. The GMSC shall then release the
ISUP connection to the old VMSC, terminate any open CAP dialogue, and retry
the terminating call setup towards the new MSC by sending an additional SRI to
the HLR. This second SRI request leads to obtaining a roaming number from the
new MSC towards which the call can then be delivered (possibly after new CAMEL
interactions).
Figure 4a: Information flow for a mobile terminating roaming retry call
1\. A GMSC supporting the \"mobile terminating roaming retry\" feature
includes the Call Reference Number, the GMSC address and the MT Roaming Retry
Supported IE in the first SRI sent to the HLR.
2\. A HLR supporting the \"mobile terminating roaming retry\" feature includes
the Call Reference Number, the GMSC address and the MT Roaming Retry Supported
IE in the PRN sent to the MSC/VLR if received in the SRI.
3\. Receipt of the MT Roaming Retry Supported IE in the PRN indicates that the
GMSC supports the Resume Call Handling procedure and the mobile terminating
roaming retry feature. Upon receipt of the ISUP IAM message which was
preceeded by a MAP Cancel Location message or by a MAP Send Identification
message for a super-charger subscriber, or upon receipt of the MAP Cancel
Location message or MAP Send Identification message for super-charger
subscriber while paging, the old MSC/VLR stops paging, if paging was on-going,
and if it supports the \"mobile terminating roaming retry\" feature and did
receive the MT Roaming Retry Supported IE in the PRN, sends an RCH message to
the GMSC with the MT Roaming Retry IE.
4\. Upon receipt of the RCH message with the MT roaming retry IE, the GMSC
acknowledges the RCH message, releases the call towards the old MSC/VLR,
terminates T-CSI dialog with the SCP, if any exists, using T-Abandon EDP, and
re-sends a new SRI to the HLR (still a \'basic call\' interrogation type)
using a new call reference number.
5\. To avoid looping, the new SRI shall be sent without the Roaming Retry
Supported IE. Furthermore, the GMSC shall use an appropriate high value for
the timer supervising receipt of SRI ACK.\ Note that the Suppress T-CSI field
is not set since the Mobile Terminating procedure is restarted from the
beginning including the handling of CAMEL interaction on T-CSI (this is
because T-CSI treatments may end differently if old and new MSCs are not in
the same PLMN or in the same geographical area, e.g. different charging rates
or regional service subscription).
6\. Upon receipt of a SRI request or PRN ack (regardless of the PRN response
from the old VLR) during an on-going Update Location procedure, the HLR delays
the sending of the PRN to the new VLR till completion of the Update Location
procedure.
7\. Receipt of the MSRN\' from the new MSC/VLR enables the GMSC to relay the
call towards the new MSC/VLR.
8\. If the IAM message is received before the Location Update procedure is
completed with the MS, the new MSC may delay the setup of the call until the
completion of the Location Update procedure or start at once the normal
terminating call procedure. In the former case, if the Location Update is
received with the \"follow-on\" indication and if the VMSC supports the
\"follow-on\" indication, the incoming IAM may either be handled as a waiting
call or forwarded as Busy (CFB), depending on the state of the \"follow-on\"
call and the subscriber\'s subscription data.
Similarly, a HLR supporting the \"mobile terminating roaming retry\" feature
should wait for the completion of any on-going Location Update procedure when
processing other terminating requests e.g. MAP-SEND-ROUTING-INFO-FOR-SM, MAP-
SEND-ROUTING-INFO-FOR-LCS, MAP-ANY-TIME-INTERROGATION. More generally, this
also applies to all TCAP transactions that the HLR may have to open toward a
VLR (e.g. USSD, PSI).
## 5.3 Information flow for an MT call
An example information flow for an MT call is shown in figure 5; many
variations are possible. ISUP signalling between GMSCB and VMSCB is shown by
solid lines; signalling over the B interface between VMSCB and VLRB is shown
by chain lines; signalling over the Iu interface (for UMTS) or the A interface
(for GSM) between VMSCB and BSSB is shown by dashed lines; and signalling over
the radio interface between VMSCB or BSSB and MSB is shown by dotted lines.
{width="5.522916666666666in" height="7.149305555555555in"}
NOTE 1: Security procedures may be initiated at any stage after the network
has accepted the page response; the position in this message flow diagram is
an example.
NOTE 2: If Security procedures are not required, the MSC may send a Start
security procedures message indicating that no ciphering is required.
NOTE 3: This message flow diagram assumes that the MS has already been
authenticated on location registration. If this is not so (for the first MT
call after VLR restoration), the network may initiate authentication after the
MS responds to paging.
NOTE 4: The network may request the IMEI from the MS, and may check the IMEI,
at any stage after the MS responds to paging, either as part of the procedure
to start security procedures or explicitly after security procedures have been
started; this is not shown in this message flow diagram.
NOTE 5: If a connection between MSCB and MSB has been established as a result
of pre-paging, the paging procedure is not performed.
NOTE 6: If a connection between MSCB and MSB has been established as a result
of pre-paging, VLRB sends the Call arrived message to MSCB to stop the guard
timer for the release of the radio connection.
Figure 5: Information flow for a basic mobile terminated call
When VMSCB receives an IAM from GMSCB it sends to VLRB a request for
information to handle the incoming call, using a Send Info For Incoming Call
(SIFIC) message containing the roaming number received in the IAM.
If VLRB recognizes the roaming number, and MSB is allowed service, it sends a
request to VMSCB to page MSB. If a radio connection between the network and
MSB is already established, VMSCB responds immediately to the page request. If
no radio connection exists, VMSCB sends a page request to BSSB, and BSSB
broadcasts the page on the paging channel. If VPLMNB supports GPRS and the Gs
interface between VLRB and the SGSN is implemented (see 3GPP TS 23.060 [9])
and there is a valid association between VLRB and the SGSN for the MS, the
paging signal towards the MS goes from VMSCB via VLRB and the SGSN to the BSS.
If MSB detects the page, it sends a channel request to BSSB, which responds
with an immediate assignment command, to instruct MSB to use the specified
signalling channel. MSB then sends a page response on the signalling channel;
BSSB relays this to VMSCB. VMSCB sends a Process access request message to
VLRB to indicate that MSB has responded to paging. VLRB may then initiate
authentication, as described in 3GPP TS 33.102 [32] for UMTS and 3GPP TS
43.020 [1] for GSM. VLRB may also initiate security procedures at this stage,
as described in 3GPP TS 33.102 [32] for UMTS and 3GPP TS 43.020 [1] for GSM.
If VLRB determines that MSB is allowed service, it sends a Process access
request ack to VMSCB. The Process access request ack message triggers a Start
security procedures message towards BSSB; if VMSCB has not received a Start
security procedures message from VLRB, the Start security procedures message
indicates no ciphering.
VLRB then sends a Complete call message to VMSCB. VMSCB sends a Set-up message
towards MSB. The Set-up message may include bearer capability information for
the call.
When MSB receives the Set-up message from BSSB, it responds with a Call
confirmed message. The Call Confirmed message includes bearer capability
information if any of the negotiable parameters of the bearer capability has
to be changed. When VMSCB receives the Call confirmed message via BSSB, it
sends an Allocate channel message to BSSB. BSSB instructs MSB to tune to a
traffic channel by sending an Assignment command. When MSB has tuned to the
specified traffic channel it responds with an Assignment complete, message,
which BSSB relays to VMSCB as an Allocation complete, and sends an Alerting
message to indicate that the called user is being alerted. VMSCB sends an ACM
to GMSCB, which relays it to the originating exchange.
When the called user answers, MSB sends a Connect message, which BSSB relays
to VMSCB. VMSCB:
\- responds with a Connect ack message towards MSB;
\- sends an ANM to GMSCB, which relays it to the originating exchange;
\- sends a Complete call ack to VLRB.
The network then waits for the call to be cleared.
# 6 Principles for interactions with supplementary services
This clause specifies the principles used to describe the invocation of the
GSM or UMTS supplementary services which were standardized when the present
document was drafted. Registration, erasure, activation, deactivation and
interrogation are call-independent operations; they are therefore outside the
scope of the present document. Descriptions may be found in the stage 2
specifications for each supplementary service.
In the modelling used in the present document, each supplementary service
which a network entity supports is managed by a supplementary service handler,
which handles data in the entity in which it runs. The call handling processes
defined in the present document use the data to define the contents of
messages to other entities. The basic call handling processes defined in the
present document interact with the supplementary service handlers as shown in
the SDL diagrams and the supporting text. If a network entity does not support
a supplementary service, it bypasses the interaction with the handler for that
supplementary service. Exceptions to this general principle are described
later in this clause.
## 6.1 Call Deflection service (3GPP TS 23.072)
The basic call handling processes ICH_MSC and ICH_VLR interact with the CD
supplementary service (3GPP TS 23.072 [11]) as described in subclauses 7.3.1
and 7.3.2 respectively.
## 6.2 Line identification services (3GPP TS 23.081)
### 6.2.1 Calling Line Identification Presentation (CLIP)
The basic call handling processes ICH_VLR and ICH_MSC interact with the
processes CLIP_MAF001 and CLIP_MAF002 (3GPP TS 23.081 [14]) as described in
subclauses 7.3.1 and 7.3.2.
### 6.2.2 Calling Line Identification Restriction (CLIR)
The basic call handling processes OCH_MSC and OCH_VLR interact with the
processes CLIR_MAF004 and CLIR_MAF003 (3GPP TS 23.081 [14]) as described in
subclauses 7.1.1 and 7.1.2.
### 6.2.3 Connected Line Identification Presentation (COLP)
The basic call handling processes OCH_MSC and OCH_VLR interact with the
processes COLP_MAF006 and COLP_MAF005 (3GPP TS 23.081 [14]) as described in
subclauses 7.1.1 and 7.1.2.
The basic call handling processes MT_GMSC and ICH_MSC interact with the
process COLP_MAF039 (3GPP TS 23.081 [14]) as described in subclauses 7.2.1 and
7.3.1.
### 6.2.4 Connected Line Identification Restriction (COLR)
The basic call handling processes ICH_VLR and ICH_MSC interact with the
processes COLR_MAF040 and COLR_MAF041 (3GPP TS 23.081 [14]) as described in
subclauses 7.3.2 and 7.3.1.
## 6.3 Call forwarding services (3GPP TS 23.082)
### 6.3.1 Call Forwarding Unconditional (CFU)
The basic call handling process SRI_HLR interacts with the process MAF007(3GPP
TS 23.082 [15]) as described in subclause 7.2.2.
### 6.3.2 Call Forwarding on mobile subscriber Busy (CFB)
The basic call handling process ICH_VLR interacts with the process MAF008
(3GPP TS 23.082 [15]) as described in subclause 7.3.2.
### 6.3.3 Call Forwarding on No Reply (CFNRy)
The basic call handling process ICH_VLR interacts with the process MAF009
(3GPP TS 23.082 [15]) as described in subclause 7.3.2.
### 6.3.4 Call Forwarding on mobile subscriber Not Reachable (CFNRc)
The basic call handling processes SRI_HLR and ICH_VLR interact with the
process MAF010 (3GPP TS 23.082 [15]) as described in subclauses 7.2.2 and
7.3.2.
## 6.4 Call wait (3GPP TS 23.083)
The basic call handling process ICH_VLR interacts with the process MAF013
(3GPP TS 23.083 [16]) as described in subclause 7.3.2. Further details of the
handling of call waiting are given in subclauses 7.3.1 and 7.3.2.
## 6.5 Call hold (3GPP TS 23.083)
Invocation of call hold before a basic call has been established will be
rejected.
The basic call handling processes OCH_MSC and ICH_MSC interact with the
procedures Process_Hold_Request and Process_Retrieve_Request as described in
subclauses 7.1.1 and 7.3.1.
## 6.6 Multiparty (3GPP TS 23.084)
Invocation of multiparty before a basic call has been established will be
rejected.
## 6.7 Closed user group (3GPP TS 23.085)
The basic call handling process OCH_VLR interacts with the process CUG_MAF014
(3GPP TS 23.085 [18]) as described in subclause 7.1.2.
The basic call handling process SRI_HLR interacts with the process CUG_MAF015
(3GPP TS 23.085 [18]) as described in subclause 7.2.2.
The interactions between call forwarding and CUG (3GPP TS 23.085 [18]) are
handled as described in subclause 7.2.2.6.
## 6.8 Advice of charge (3GPP TS 23.086)
The interactions between Advice of Charge (3GPP TS 23.086 [19]) and MO calls
are handled as described in subclauses 7.1.1 and 7.1.2.
The interactions between Advice of Charge (3GPP TS 23.086 [19]) and MT calls
are handled as described in subclauses 7.3.1 and 7.3.2.
## 6.9 User-to-user signalling (3GPP TS 23.087)
The basic call handling processes OCH_MSC, OCH_VLR, MT_GMSC and ICH_MSC
interact with the UUS supplementary service as described in subclauses 7.1.1,
7.1.2, 7.2.1 and 7.3.1 respectively.
## 6.10 Call barring (3GPP TS 23.088)
### 6.10.1 Barring of outgoing calls
The basic call handling process OCH_VLR interacts with the processes MAF017,
MAF018 and MAF020 (3GPP TS 23.088 [21]) as described in subclause 7.1.2.
### 6.10.2 Barring of incoming calls
The basic call handling process SRI_HLR interacts with the processes MAF022
and MAF023 (3GPP TS 23.088 [21]) as described in subclause 7.2.2.
## 6.11 Explicit Call Transfer (3GPP TS 23.091)
There is no interaction between Explicit Call Transfer and the basic call
handling described in the present document.
## 6.12 Completion of Calls to Busy Subscriber (3GPP TS 23.093)
The basic call handling processes OCH_MSC, OCH_VLR, MT_GMSC, SRI_HLR, PRN_VLR,
ICH_MSC and ICH_VLR interact with the CCBS supplementary service as described
in subclauses 7.1.1, 7.1.2, 7.2.1, 7.2.2, 7.2.3, 7.3.1 and 7.3.2respectively.
## 6.13 Multicall (3GPP TS 23.135)
The basic call handling processes OCH_MSC, OCH_VLR, ICH_MSC & ICH_VLR interact
with the Multicall supplementary service as described in subclauses subclauses
7.1.1, 7.1.2, 7.3.1 and 7.3.2respectively.
# 7 Functional requirements of network entities
The text in this clause is a supplement to the definition in the SDL diagrams;
it does not duplicate the information in the SDL diagrams.
The entities described in this clause interwork with other entities over four
different types of interface:
\- The Iu interface, used to interwork between the MSC and the UTRAN or the
UMTS UE;
\- The A interface, used to interwork between the MSC and the GSM BSS or the
GSM MS;
\- The C, D & F interfaces, used to interwork between the MSC & HLR (C), VLR &
HLR (D) and MSC & EIR (F);
\- Telephony signalling interfaces, used to interwork between an MSC and
another exchange.
The protocols used over the Iu interface are RANAP, which is specified in 3GPP
TS 25.413 [27], for interworking with the UTRAN and DTAP, which is specified
in 3GPP TS 24.008 [26], for interworking with the MS.
The protocols used over the A interface are BSSMAP, which is specified in 3GPP
TS 48.008 [2], for interworking with the BSS and DTAP, which is specified in
3GPP TS 24.008 [26], for interworking with the MS.
The protocol used over the C, D & F interfaces is MAP, which is specified in
3GPP TS 29.002 [29].
For the purposes of the present document, the protocol used over telephony
signalling interfaces is ISUP, which is specified in ITU‑T Recommendations
Q.761[33], Q.762 [34], Q.763 [35] and Q.764 [36]; other telephony signalling
systems may be used instead.
The present document shows the call handling application processes
interworking with a protocol handler for each of the protocols listed above.
Each protocol defines supervision timers. If a supervision timer expires
before a distant entity responds to a signal, the handling is as defined in
the appropriate protocol specification. In general, the protocol handler
reports timer expiry to the application as an error condition or negative
response. Where a timer is shown in the present document, therefore, it is an
**application** timer rather than a **protocol** timer. Interworking with the
protocol handlers uses functional signal names which do not necessarily have a
one-to-one correspondence with the names of messages used in the protocols.
An MSC which receives an IAM from an originating exchange may react in three
different ways:
\- It acts as a transit exchange, i.e. it relays the IAM to a destination
exchange determined by analysis of the called party address, and thereafter
relays other telephony signalling between the originating and destination
exchange until the connection is released. This behaviour is not specific to
UMTS or GSM;
\- It acts as a terminating exchange, i.e. it attempts to connect the call to
an MS currently registered in the service area of the MSC;
\- It acts as a GMSC, i.e. it interrogates an HLR for information to route the
call. If the HLR returns routeing information, the MSC uses the routeing
information from the HLR to construct an IAM, which it sends to a destination
exchange determined by analysis of the routeing information from the HLR.
Annex A describes the method which the MSC uses to decide how to process the
IAM.
The SDL diagrams in this clause show the handling for a number of optional
features and services. If the handling consists only of a call to a procedure
specific to the feature or service, the procedure call is omitted if the
entity does not support an optional feature or service. If the handling
consists of more than a call to a procedure specific to the feature or
service, the text associated with each SDL diagram specifies the handling
which applies if the entity does not support an optional feature or service.
For simplicity of description, it is assumed that support for Operator
Determined Barring and the Call Forwarding and Call Barring supplementary
services is mandatory.
## 7.1 MO call
### 7.1.1 Functional requirements of serving MSC
#### 7.1.1.1 Process OCH_MSC
The variable TCH allocated is global data, accessible to the procedure
Establish_Originating_TCH_If_Required.
The procedures CCBS_Report_Not_Idle and CCBS_Check_Last_Call are specific to
CCBS; they are specified in 3GPP TS 23.093 [23].
#### 7.1.1.2 Procedure Process_Access_Request_MSC
Sheet 1: the processing starting with the input signal \"Send UESBI-Iu to
Access Network\" is specific to PUESBINE. If the MSC does not support
PUESBINE, this signal will not be received.
Sheet 1: the task \"Convert IMEISV to UESBI\" is defined in 3GPP TS 23.195
[25a].
Sheet 2: instead of using the explicit procedure Obtain_IMEI_MSC, the VMSC may
encapsulate the request for the IMEI in the Start security procedures message;
the BSS relays the response in the Security procedures complete message to the
MSC.
Sheet 2: the VMSC maps the negative response received on the B interface to
the appropriate reject cause according to the rules defined in 3GPP TS 29.010
[31].
Sheet 2: The Start security procedures message may indicate one of several
ciphering algorithms, or (for GSM only) no ciphering.
Sheet 2, sheet 3: At any stage, the MS may terminate the transaction with the
network by sending a CM service abort message.
Sheet 2, sheet 3: if the VMSC receives a Set-up message from the MS while the
access request is being handled, the message is saved for processing after the
access request has been handled.
#### 7.1.1.3 Procedure OG_Call_Setup_MSC
Sheet 1: the variables Alerting sent, MS connected and Reconnect are global
data, accessible to the procedures CCBS_Check_OG_Call,
CCBS_OCH_Report_Failure, CCBS_OCH_Report_Success, CCBS_Check_If_CCBS_Possible,
Send_Alerting_If_Required and Send_Access_Connect_If_Required.
Sheet 1: the variable UUS1 result sent is specific to UUS. This variable is
accessible to all UUS specific procedures.
Sheet 1: the procedure UUS_OCH_Check_Setup is specific to UUS; it is specified
in 3GPP TS 23.087 [20].
Sheet 1: the VMSC converts the PLMN bearer capability negotiated between the
VMSC and the MS to a basic service according to the rules defined in 3GPP TS
27.001 [28].
Sheet 1: the procedure CAMEL_N_CSI_CHECK_MSC is specific to CAMEL Phase 3 or
later, it is specified in 3GPP TS 23.078 [12].
Sheet 1: the procedure Check_OG_Multicall_MSC is specific to Multicall; it is
specified in 3GPP TS 23.135 [25]. If the VMSC does not support Multicall,
processing continues from the \"Yes\" exit of the test \"Result=Pass?\".
Sheet 1: the variable \"On_Hold\" is used only if the VMSC supports Call Hold.
Sheet 1, sheet 2, sheet 3, sheet 6: the procedure CCBS_OCH_Report_Failure is
specific to CCBS; it is specified in 3GPP TS 23.093 [23].
Sheet 1, sheet 2, sheet 6, sheet 7, sheet 9: at any stage after the Set-up has
been received, the MS may terminate the transaction with the network by
sending a Release transaction request.
Sheet 2, sheet 3, sheet 4, sheet 5, sheet 6, sheet 7, sheet 8, sheet 9:
signals are sent to and received from the process Subs_FSM as described in
subclause 7.4.
Sheet 3: the procedure Set_CLI_Presentation_Indicator_MSC is specific to CLIR.
If the VMSC does not support CLIR, processing continues from the \"Yes\" exit
of the test \"Result=Call allowed?\".
Sheet 3: the procedure CAMEL_OCH_MSC_INIT is specific to CAMEL; it is
specified in 3GPP TS 23.078 [12]. If the VMSC does not support CAMEL,
processing continues from the \"Yes\" exit of the test \"Result=Pass?\".
Sheet 3: the procedure CAMEL_MO_Dialled_Services is specific to CAMEL phase 3
or later; it is specified in 3GPP TS 23.078 [12]. If the VMSC does not support
CAMEL phase 3 or later, processing continues from the \"Pass\" exit of the
test \"Result?\".
Sheet 3: the procedure CCBS_Check_OG_Call is specific to CCBS; it is specified
in 3GPP TS 23.093 [23]. If the VMSC does not support CCBS, processing
continues from the \"Yes\" exit of the test \"Result=Pass?\".
Sheet 3: the procedure MOBILE_NUMBER_PORTABILITY_IN_OQoD is specific to Mobile
Number Portability; it is specified in 3GPP TS 23.066 [10].
Sheet 3: the procedure UUS_OCH_Set_Info_In_IAM is specific to UUS; it is
specified in 3GPP TS 23.087 [20].
Sheet 3: the procedure CAMEL_Store_Destination_Address is specific to CAMEL
phase 3 or later; it is specified in 3GPP TS 23.078 [12].
Sheet 3: the procedure CCBS_OCH_Report_Success is specific to CCBS; it is
specified in 3GPP TS 23.093 [23].
Sheet 3, sheet 5: the procedure CAMEL_OCH_LEG1_MSC is specific to CAMEL phase
4 or later; it is specified in 3GPP TS 23.078 [12].
Sheet 4, sheet 7: the procedures CAMEL_Start_TNRy and CAMEL_Stop_TNRy are
specific to CAMEL phase 2 or later; they are specified in 3GPP TS 23.078 [12].
Sheet 4: the task \"UTU2Cnt := 0\" is executed only if the VMSC supports UUS
Sheet 4: the procedure CAMEL_OCH_MSC_ALERTING is specific to CAMEL phase 4 or
later; it is specified in 3GPP TS 23.078 [12]. If the VMSC does not support
CAMEL phase 4 or later, processing continues from the \"Pass\" exit of the
test \"Result?\".
Sheet 5: the procedure CAMEL_OCH_MSC_ANSWER is specific to CAMEL; it is
specified in 3GPP TS 23.078 [12]. If the VMSC does not support CAMEL,
processing continues from the \"Yes\" exit of the test \"Result=Pass?\".
Sheet 5: the procedure Set_COLP_Info_MSC is specific to COLP.
Sheet 5: the procedure Handle_AoC_MO_MSC is specific to AoC.
Sheet 5: the task \"Store CW treatment indicator for this call if received in
SII2\" is executed only if the VMSC supports CAMEL phase 3 or later.
Sheet 5: The process CAMEL_OCH_LEG2_MSC is specific to CAMEL phase 4 or later;
it is specified in 3GPP TS 23.078 [12].
Sheet 6: the procedures CCBS_Check_If_CCBS_Possible and CCBS_Activation_MSC
are specific to CCBS; they are specified in 3GPP TS 23.093 [23]. The task
\"Store CCBS Result\" is executed only if the VMSC supports CCBS. If the VMSC
does not support CCBS, processing continues from the \"CCBS Not Possible\"
exit of the test \"CCBS Result\".
Sheet 6, sheet 7: the procedure CAMEL_OCH_MSC_DISC3 is specific to CAMEL Phase
1; it is specified in 3GPP TS 23.078 [12].
Sheet 6, sheet 7: the procedure CAMEL_OCH_MSC_DISC4 is specific to CAMEL Phase
2 or later; it is specified in 3GPP TS 23.078 [12].
Sheet 6, sheet 6: the procedure CAMEL_OCH_MSC1 is specific to CAMEL phase 2 or
later; it is specified in 3GPP TS 23.078 [12]. If the VMSC does not support
CAMEL phase 2 or later, processing continues from the \"No\" exit of the test
\"Result=Reconnect?\".
Sheet 6, sheet 7, sheet 9: the processing in the branch beginning with the
Int_Release_Call input will occur only if the MSC supports CAMEL.
Sheet 7, sheet 9: the procedure UUS_MSC_Check_UUS1_UUI is specific to UUS; it
is specified in 3GPP TS 23.087 [20].
Sheet 8: the input signal TNRy expired and all the subsequent processing are
specific to CAMEL phase 2 or later, and will occur only if the VMSC supports
CAMEL phase 2 or later. The procedure CAMEL_OCH_MSC2 is specified in 3GPP TS
23.078 [12].
Sheet 8: the input signal User To User is specific to UUS; it is discarded if
the VMSC does not support UUS.
Sheet 8: the procedures UUS_MSC_Check_UUS2_UUI_to_MS and
UUS_MSC_Check_UUS2_UUI_to_NW are specific to UUS; they are specified in 3GPP
TS 23.087 [20].
Sheet 9: the procedure CAMEL_OCH_MSC_DISC1 is specific to CAMEL; it is
specified in 3GPP TS 23.078 [12]. If the VMSC does not support CAMEL,
processing continues from the \"No\" exit of the test \"Result=CAMEL
handling?\".
Sheet 9: the procedure CAMEL_OCH_MSC_DISC2 is specific to CAMEL; it is
specified in 3GPP TS 23.078 [12]. If the VMSC does not support CAMEL,
processing continues from the \"No\" exit of the test \"Result=CAMEL
handling?\".
Sheet 10: the procedure Process_Hold_Request is specific to Call Hold; it is
specified in 3GPP TS 23.083[16].
Sheet 10: the procedure Process_Retrieve_request is specific to Call Hold; it
is specified in 3GPP TS 23.083[16].
#### 7.1.1.4 Procedure Obtain_IMSI_MSC
The MS may terminate the transaction with the network while the VMSC is
waiting for the MS to return its IMSI. If a CC connection has not been
established, the MS uses CM Service Abort; otherwise it uses a Release,
Release Complete or Disconnect. The VMSC aborts the transaction with the VLR
and returns an aborted result to the parent process.
#### 7.1.1.5 Procedure Authenticate_MSC
The MS may terminate the transaction with the network while the VMSC is
waiting for the MS to respond to an authentication request. If a CC connection
has not been established, the MS uses CM Service Abort; otherwise it uses a
Release, Release Complete or Disconnect. The VMSC aborts the transaction with
the VLR and returns an aborted result to the parent process.
#### 7.1.1.6 Procedure Obtain_IMEI_MSC
The Send IMEI request to the MS specifies the IMEISV as the requested
identity.
The MS may terminate the transaction with the network while the VMSC is
waiting for the MS to return its IMEI. If a CC connection has not been
established, the MS uses CM Service Abort; otherwise it uses a Release,
Release Complete or Disconnect. The VMSC aborts the transaction with the VLR
and returns an aborted result to the parent process.
#### 7.1.1.7 Procedure Check_IMEI_MSC
The MS may terminate the transaction with the network while the VMSC is
waiting for the MS to return its IMEI. If a CC connection has not been
established, the MS uses CM Service Abort; otherwise it uses a Release,
Release Complete or Disconnect. The VMSC aborts the transaction with the VLR
and returns an aborted result to the parent process.
The MS may terminate the transaction with the network while the VMSC is
waiting for the result of the IMEI check from the EIR. If a CC connection has
not been established, the MS uses CM Service Abort; otherwise it uses a
Release, Release Complete or Disconnect. The VMSC aborts the transaction with
the VLR and returns an aborted result to the parent process.
#### 7.1.1.8 Procedure Establish_Originating_TCH_If_Required
#### 7.1.1.9 Procedure Set_CLI_Presentation_Indicator_MSC
The MS may terminate the transaction with the network by sending a Release
transaction message while a response is awaited from the process CLIR_MAF004.
The message is saved for processing after return from the procedure.
#### 7.1.1.10 Procedure Send_Alerting_If_Required
The test \"Backward call indicator=no indication\" refers to the called
party\'s status field in the backward call indicators parameter of the ISUP
Address Complete message which triggered the call of the procedure
Send_Alerting_If_Required.
The procedures UUS_MSC_Check_UUS1_UUI and UUS_OCH_Set_Alert_And_Connect_Param
are specific to UUS; they are specified in 3GPP TS 23.087 [20]. If the VMSC
does not support UUS, processing continues from the \"Yes\" exit of the test
\"Result=Pass?\".
If no useful information would be carried in the Progress message, it is not
sent.
#### 7.1.1.11 Procedure Set_COLP_Info_MSC
The MS may terminate the transaction with the network by sending a Release
transaction message while a response is awaited from the process COLP_MAF006.
The message is saved for processing after return from the procedure.
#### 7.1.1.12 Procedure Send_Access_Connect_If_Required
The test \"Acknowledgement required\" refers to the result returned by the
procedure Handle_AoC_MSC. If the VMSC does not support AoC, processing
continues from the \"No\" exit of the test \"Acknowledgement required\".
The procedure UUS_OCH_Set_Alert_And_Connect_Param is specific to UUS, it is
specified in 3GPP TS 23.087 [20]. If the VMSC does not support UUS, processing
continues from the \"Yes\" exit of the test \"Result=Pass?\".
If no useful information would be carried in the Facility message, it is not
sent.
#### 7.1.1.13 Procedure Handle_AoC_MO_MSC
The charging parameters and the Boolean variable Acknowledgement required are
global data which can be read by the parent process.
#### 7.1.1.14 Procedure TCH_Check
{width="6.652777777777778in" height="8.152083333333334in"}
Figure 6: Process OCH_MSC
{width="6.691666666666666in" height="8.444444444444445in"}
Figure 7a: Procedure Process_Access_Request_MSC (sheet 1)
{width="6.655555555555556in" height="8.155555555555555in"}
Figure 7b: Procedure Process_Access_Request_MSC (sheet 2)
{width="6.655555555555556in" height="8.155555555555555in"}
Figure 7c: Procedure Process_Access_Request_MSC (sheet 3)
{width="6.691666666666666in" height="8.444444444444445in"}
Figure 8a: Procedure OG_Call_Setup_MSC (sheet 1)
{width="6.691666666666666in" height="8.444444444444445in"}
Figure 8b: Procedure OG_Call_Setup _MSC (sheet 2)
{width="6.691666666666666in" height="8.61875in"}
Figure 8c: Procedure OG_Call_Setup _MSC (sheet 3)
{width="6.690277777777778in" height="8.415972222222223in"}
Figure 8d: Procedure OG_Call_Setup _MSC (sheet 4)
{width="6.691666666666666in" height="8.61875in"}
Figure 8e: Procedure OG_Call_Setup _MSC (sheet 5)
{width="6.691666666666666in" height="8.444444444444445in"}
Figure 8f: Procedure OG_Call_Setup _MSC (sheet 6)
{width="6.691666666666666in" height="8.444444444444445in"}
Figure 8g: Procedure OG_Call_Setup _MSC (sheet 7)
{width="6.691666666666666in" height="8.444444444444445in"}
Figure 8h: Procedure OG_Call_Setup _MSC (sheet 8)
{width="6.691666666666666in" height="8.444444444444445in"}
Figure 8i: Procedure OG_Call_Setup _MSC (sheet 9)
{width="6.691666666666666in" height="8.444444444444445in"}
Figure 8j: Procedure OG_Call_Setup _MSC (sheet 10)
{width="6.691666666666666in" height="8.444444444444445in"}
Figure 8k: Procedure OG_Call_Setup _MSC (sheet 11)
{width="6.655555555555556in" height="8.155555555555555in"}
Figure 9: Procedure Obtain_IMSI_MSC
{width="6.655555555555556in" height="8.155555555555555in"}
Figure 10: Procedure Authenticate_MSC
{width="6.655555555555556in" height="8.155555555555555in"}
Figure 11: Procedure Obtain_IMEI_MSC
{width="6.655555555555556in" height="8.155555555555555in"}
Figure 12: Procedure Check_IMEI_MSC
{width="6.691666666666666in" height="8.444444444444445in"}
Figure 13: Procedure Establish_Originating_TCH_If_Required
{width="6.655555555555556in" height="8.155555555555555in"}
Figure 14: Procedure Set_CLI_Presentation_Indicator_MSC
{width="6.655555555555556in" height="8.155555555555555in"}
Figure 15: Procedure Send_Alerting_If_Required
{width="6.655555555555556in" height="8.155555555555555in"}
Figure 16: Procedure Set_COLP_Info_MSC
{width="6.655555555555556in" height="8.155555555555555in"}
Figure 17: Procedure Handle_AoC_MO_MSC
{width="6.655555555555556in" height="8.155555555555555in"}
Figure 18: Procedure Send_Access_Connect_If_Required
{width="6.691666666666666in" height="8.09375in"}
Figure 19: Procedure OCH_VLRTCH_Check
### 7.1.2 Functional requirements of VLR
#### 7.1.2.1 Process OCH_VLR
#### 7.1.2.2 Procedure Process_Access_Request_VLR
Sheet 1: it is a network operator decision (subject to MoU requirements) how
often an MS should be authenticated.
Sheet 1: it is a network operator decision (subject to MoU requirements) how
often an MS should be authenticated.
Sheet 2: the process Subscriber_Present_VLR is described in 3GPP TS 29.002
[29].
Sheet 2: it is a network operator decision (subject to MoU requirements)
whether a GSM connection should be ciphered. A UMTS connection shall always be
ciphered.
Sheet 3: it is a network operator decision (subject to MoU requirements) how
often an IMEI should be checked.
Sheet 3, sheet 4, sheet 5: the procedure CCBS_Report_MS_Activity is specific
to CCBS; it is specified in 3GPP TS 23.093 [23].
Sheet 5: it is a network operator decision whether emergency calls are allowed
from an ME with no SIM.
#### 7.1.2.3 Procedure OG_Call_Subscription_Check_VLR
Sheet 1: it is an implementation option to carry out the check for operator
determined barring of all outgoing calls before the check on provisioning of
the requested basic service.
Sheet 1: the procedure Check_OG_Multicall_VLR is specific to Multicall; it is
specified in 3GPP TS 23.135 [25]. If the VMSC does not support Multicall,
processing continues from the \"Yes\" exit of the test \"Result=Pass?\".
Sheet 1: the procedure OG_CUG_Check is specific to CUG. If the VLR does not
support CUG, processing continues from the \"Yes\" exit of the test
\"Result=Call allowed?\".
Sheet 1: the procedure Get_LI_Subscription_Info_MO_VLR is specific to CLIR and
COLP. If the VLR supports neither CLIR nor COLP, the procedure call is
omitted.
Sheet 1: the procedure Get_AoC_Subscription_Info_VLR is specific to AoC.
Sheet 1: the procedure UUS_OCH_Check_Provision is specific to UUS; it is
specified in 3GPP TS 23.087 [20]. If the VMSC does not support UUS, processing
continues from the \"Yes\" exit of the test \"Result=Pass?\".
Sheet 2: the procedure CAMEL_OCH_VLR is specific to CAMEL; it is specified in
3GPP TS 23.078 [12]. If the VLR does not support CAMEL, processing continues
from connector 1 to the call to the procedure Check_OG_Barring.
Sheet 2: the negative response \"call barred\" indicates whether the reason is
operator determined barring or supplementary service barring, according to the
result returned by the procedure Check_OG_Barring.
#### 7.1.2.4 Procedure Obtain_Identity_VLR
It is a network operator decision whether open (non ciphered) identification
of the MS by its IMSI is allowed.
#### 7.1.2.5 Procedure Obtain_IMSI_VLR
#### 7.1.2.6 Procedure Authenticate_VLR
Sheet 1: the number of unused authentication sets which triggers the VLR to
request further authentication sets from the HLR is an operator option.
#### 7.1.2.7 Procedure Obtain_Authentication_Sets_VLR
#### 7.1.2.8 Procedure Start_Tracing_VLR
#### 7.1.2.9 Procedure Check_IMEI _VLR
If the response from the EIR to a request to check an IMEI is:
\- blacklisted, then service is not granted;
\- greylisted, then service is granted, but the network operator may decide to
initiate tracing;
\- whitelisted, then service is granted.
#### 7.1.2.10 Procedure Obtain_IMEI_VLR
#### 7.1.2.11 Process Fetch_Authentication_Sets_VLR
#### 7.1.2.12 Procedure Check_BAOC
Sheet 1: if the VLR receives an Abort message from the MSC while it is
awaiting a response from the process MAF017, the message is saved for handling
after return from the procedure.
#### 7.1.2.13 Procedure OG_CUG_Check
If the VLR receives an Abort message from the MSC while it is awaiting a
response from the process MAF014, the message is saved for handling after
return from the procedure.
#### 7.1.2.14 Procedure Get_LI_Subscription_Info_MO_VLR
If the VLR does not support CLIR, it omits the signal interchange with the
process CLIR_MAF003.
If the VLR does not support COLP, it omits the signal interchange with the
process COLP_MAF005.
If the VLR receives an Abort message from the MSC while it is awaiting a
response from the process CLIR_MAF003 or the process COLP_MAF005, the message
is saved for handling after return from the procedure.
#### 7.1.2.15 Procedure Get_AoC_Subscription_Info_VLR
The indicator of whether or not AoC is provisioned is global data which can be
read by the parent process.
#### 7.1.2.16 Procedure Check_OG_Barring
Sheet 3: if the VLR receives an Abort message from the MSC while it is
awaiting a response from the process MAF018 or MAF020 (see 3GPP TS 23.088
[21]), the message is saved for handling after return from the procedure.
#### 7.1.2.17 Process Update_Location_VLR
The procedure Update_HLR_VLR is described in 3GPP TS 23.012 [6].
{width="6.655555555555556in" height="8.155555555555555in"}
Figure 7.1.2.1: Process OCH_VLR
{width="5.752083333333333in" height="7.260416666666667in"}
Figure 7.1.2.2a: Procedure Process_Access_Request_VLR (sheet 1)
{width="6.691666666666666in" height="8.444444444444445in"}
Figure 7.1.2.2b: Procedure Process_Access_Request_VLR (sheet 2)
{width="6.655555555555556in" height="8.155555555555555in"}
Figure 7.1.2.2c: Procedure Process_Access_Request_VLR (sheet 3)
{width="6.655555555555556in" height="8.155555555555555in"}
Figure 7.1.2.2d: Procedure Process_Access_Request_VLR (sheet 4)
{width="6.652777777777778in" height="8.152083333333334in"}
Figure 7.1.2.2e: Procedure Process_Access_Request_VLR (sheet 5)
{width="6.652777777777778in" height="8.152083333333334in"}
Figure 7.1.2.3a: Procedure OG_Call_Subscription_Check_VLR (sheet 1)
{width="6.652777777777778in" height="8.152083333333334in"}
Figure 7.1.2.3b: Procedure OG_Call_Subscription_Check _VLR (sheet 2)
{width="6.652777777777778in" height="8.152083333333334in"}
Figure 7.1.2.4: Procedure Obtain_Identity_VLR
{width="6.652777777777778in" height="8.152083333333334in"}
Figure 7.1.2.5: Procedure Obtain_IMSI_VLR
{width="6.652777777777778in" height="8.152083333333334in"}
Figure 7.1.2.6a: Procedure Authenticate_VLR (sheet 1)
{width="6.652777777777778in" height="8.152083333333334in"}
Figure 7.1.2.6b: Procedure Authenticate_VLR (sheet 2)
{width="6.652777777777778in" height="8.152083333333334in"}
Figure 7.1.2.7a: Procedure Obtain_Authentication_Sets_VLR (sheet 1)
{width="6.652777777777778in" height="8.152083333333334in"}
Figure 7.1.2.7b: Procedure Obtain_Authentication_Sets_VLR (sheet 2)
{width="6.652777777777778in" height="8.152083333333334in"}
Figure 7.1.2.8: Procedure Start_Tracing_VLR
{width="6.652777777777778in" height="8.152083333333334in"}
Figure 7.1.2.9: Procedure Check_IMEI_VLR
{width="6.691666666666666in" height="8.444444444444445in"}
Figure 7.1.2.10: Procedure Obtain_IMEI _VLR
{width="6.652777777777778in" height="8.152083333333334in"}
Figure 7.1.2.11: Process Fetch_Authentication_Sets_VLR
{width="6.652777777777778in" height="8.152083333333334in"}
Figure 7.1.2.12: Procedure Check_BAOC
{width="6.652777777777778in" height="8.152083333333334in"}
Figure 7.1.2.13: Procedure OG_CUG_Check
{width="6.652777777777778in" height="8.152083333333334in"}
Figure 7.1.2.14: Procedure Get_LI_Subscription_Info_MO_VLR
{width="6.652777777777778in" height="8.152083333333334in"}
Figure 7.1.2.15: Procedure Get_AoC_Subscription_Info_VLR
{width="6.652777777777778in" height="8.152083333333334in"}
Figure 7.1.2.16a: Procedure Check_OG_Barring (sheet 1)
{width="6.652777777777778in" height="8.152083333333334in"}
Figure 7.1.2.16b: Procedure Check_OG_Barring (sheet 2)
{width="6.652777777777778in" height="8.152083333333334in"}
Figure 7.1.2.16c: Procedure Check_OG_Barring (sheet 3)
{width="6.691666666666666in" height="7.743055555555555in"}
Figure 7.1.2.17: Process Update_Location_VLR
## 7.2 Retrieval of routeing information for MT call
### 7.2.1 Functional requirements of GMSC
#### 7.2.1.1 Process MT_GMSC
Sheet 1: the variables ACM sent, Answer sent, Network connect sent, Reconnect
and Resume call are global data, accessible to the procedures
CCBS_MT_GMSC_Check_CCBS Possible, CCBS_Set_Diagnostic_For_Release,
Obtain_Routeing_Address, Send_ACM_If_Required, Send_Answer_If_Required and
Send_Network_Connect_If_Required.
Sheet 1: the variable UUS CF interaction is specific to UUS; it is accessible
to all UUS specific procedures in the GMSC.
Sheet 1: the procedure MNP_MT_GMSC_Set_MNP_Parameters is specific to Mobile
Number Portability; it is specified in 3GPP TS 23.066 [10].
Sheet 1: the procedure OR_Set_ORA_Parameters is specific to Support of Optimal
Routeing; it is specified in 3GPP TS 23.079 [13].
Sheet 1: the procedure CAMEL_Set_ORA_Parameters is specific to CAMEL; it is
specified in 3GPP TS 23.078 [12].
Sheet 1: the parameters \"Reference address\", \"OR\" and \"Own PLMN\" are
passed to the procedure Obtain_Routeing_Address only if the GMSC supports
Optimal Routeing. The parameter \"Destination address\" is returned by the
procedure Obtain_Routeing_Address only if the GMSC supports Optimal Routeing
of mobile-to-mobile calls. The Send Routeing Info negative response
information element received in the execution of the procedure
Obtain_Routeing_Address is global data, available to the parent process.
Sheet 1: the suggested mapping from values of the Send Routeing Info negative
response information element to values of the ISUP release cause (see ITU‑T
Recommendation Q.850 [37]) is shown in table 1. The mapping used is a matter
for the network operator, depending on the telephony signalling system used.
Table 1: Suggested mapping of Send Routeing Info (SRI)\ negative responses to
ISUP release causes
+----------------------+----------------------+----------------------+ | SRI negative | ISUP release cause | ISUP release cause | | response | number | name | +----------------------+----------------------+----------------------+ | Absent subscriber | 20 | Subscriber absent | +----------------------+----------------------+----------------------+ | Bearer service not | 57 | Bearer capability | | provisioned | | not authorized | +----------------------+----------------------+----------------------+ | Busy subscriber | 17 | User busy | +----------------------+----------------------+----------------------+ | Call barred (ODB) | 21 | Call rejected | +----------------------+----------------------+----------------------+ | Call barred (SS | 21 | Call rejected | | barring) | | | +----------------------+----------------------+----------------------+ | CUG reject (Called | 21 | Call rejected | | party SS interaction | | | | violation) | | | +----------------------+----------------------+----------------------+ | CUG reject (Incoming | 55 | Incoming calls | | calls barred within | | barred within CUG | | CUG) | | | +----------------------+----------------------+----------------------+ | CUG reject | 87 | User not member of | | (Subscriber not | | CUG | | member of CUG) | | | +----------------------+----------------------+----------------------+ | CUG reject | 87 | User not member of | | (Requested basic | | CUG | | service violates CUG | | | | constraints) | | | +----------------------+----------------------+----------------------+ | Data missing | 111 | Protocol error, | | | | unspecified | +----------------------+----------------------+----------------------+ | Facility not | 69 | Requested facility | | supported | | not implemented | +----------------------+----------------------+----------------------+ | Forwarding violation | 21 | Call rejected | +----------------------+----------------------+----------------------+ | Number changed | 22 | Number changed | +----------------------+----------------------+----------------------+ | System failure | 111 | Protocol error, | | | | unspecified | +----------------------+----------------------+----------------------+ | Teleservice not | 57 | Bearer capability | | provisioned | | not authorized | +----------------------+----------------------+----------------------+ | Unexpected data | 111 | Protocol error, | | value | | unspecified | +----------------------+----------------------+----------------------+ | Unknown subscriber | 1 | Unallocated | | | | (unassigned) number | | | 26 | | | | | Misrouted call to a | | | | ported number (note) | +----------------------+----------------------+----------------------+ | NOTE: If the | | | | Diagnostic parameter | | | | indicates \"NPDB | | | | mismatch\", MNP can | | | | require a specific | | | | ISUP release cause | | | | value, according to | | | | National Coding | | | | Standard, to | | | | indicate \"Misrouted | | | | call to a ported | | | | number\", depending | | | | on national | | | | regulations. North | | | | American GSM Number | | | | Portability (NAGNP) | | | | requires the SRI | | | | negative response | | | | \"unknown | | | | subscriber\" to be | | | | treated differently | | | | under certain | | | | conditions. If the | | | | IAM received from | | | | the originating | | | | exchange contained | | | | the HPLMN routing | | | | number for NAGNP | | | | then the SRI | | | | negative response | | | | \"unknown | | | | subscriber\" shall | | | | be mapped to ISUP | | | | release cause number | | | | 26 \"Misrouted call | | | | to a ported | | | | number\"; under all | | | | other conditions the | | | | SRI negative | | | | response \"unknown | | | | subscriber\" shall | | | | be mapped to ISUP | | | | release cause number | | | | 1 \"Unallocated | | | | (unassigned) | | | | number\". | | | +----------------------+----------------------+----------------------+
Sheet 1: it is an operator option whether to send an Address Complete message
if the Number Portability Database returns a routeing number. If the GMSC
sends an Address Complete message, it shall include the called party\'s status
field of the Backward call indicator set to \"no indication\".
Sheet 1: the called party address sent in the IAM to the process MT_CF_MSC is
the Forwarded-to number received in the Perform Call Forwarding ack.
Sheet 1: the procedure CAMEL_Store_Destination_Address is specific to CAMEL
phase 3 or later; it is specified in 3GPP TS 23.078 [12].
Sheet 1: it is an operator option whether to send an Address Complete message
if the HLR returns forwarding information. If the GMSC sends an Address
Complete message, it shall include the called party\'s status field of the
Backward call indicator set to \"no indication\".
Sheet 1, sheet 8: the process CAMEL_MT_LEG1_GMSC is specific to CAMEL phase 4
or later; it is specified in 3GPP TS 23.078 [12].
Sheet 2: the procedures CAMEL_Start_TNRy and CAMEL_Stop_TNRy are specific to
CAMEL phase 2 or later; they are specified in 3GPP TS 23.078 [12].
Sheet 2, sheet 3: the procedure CAMEL_MT_MSC_ALERTING is specific to CAMEL
phase 4 or later; it is specified in 3GPP TS 23.078 [12]. If the GMSC does not
support CAMEL phase 4 or later, processing continues from the \"Pass\" exit of
the test \"Result?\".
Sheet 2, sheet 3: the procedure CAMEL_MT_GMSC_ANSWER is specific to CAMEL; it
is specified in 3GPP TS 23.078 [12]. If the GMSC does not support CAMEL,
processing continues from the \"Pass\" exit of the test \"Result\".
Sheet 2, sheet 3: the task \"Set destination address parameter\" is executed
only if the GMSC supports Optimal Routeing of mobile-to-mobile calls.
Sheet 3: the procedure Handle_COLP_Forwarding_Interaction is specific to COLP.
Sheet 4: the input signal Resume Call Handling and all the subsequent
processing on this sheet are specific to Support of Optimal Routeing, and will
occur only if the GMSC supports Optimal Routeing. The procedure OR_Handle_RCH
is specified in 3GPP TS 23.079 [13].
Sheet 4, sheet 6: the procedure CCBS_MT_GMSC_Check_CCBS_Possible is specific
to CCBS; it is specified in 3GPP TS 23.093 [23].
Sheet 5: the input signal TNRy expired and all the subsequent processing are
specific to CAMEL phase 2 or later, and will occur only if the GMSC supports
CAMEL phase 2 or later. The procedure CAMEL_MT_GMSC_DISC5 is specified in 3GPP
TS 23.078 [12].
Sheet 6: the procedure CAMEL_MT_GMSC_DISC3 is specific to CAMELphase 1; it is
specified in 3GPP TS 23.078 [12].
Sheet 6: the procedures CAMEL_MT_GMSC_DISC4 and CAMEL_MT_GMSC_DISC6 are
specific to CAMEL phase 2 or later, they are specified in 3GPP TS 23.078 [12].
Sheet 6: the procedure CCBS_Set_Diagnostic_For_Release is specific to CCBS; it
is specified in 3GPP TS 23.093 [23].
Sheet 6, sheet 7: the processing in the branch beginning with the
Int_Release_Call input will occur only if the MSC supports CAMEL.
Sheet 7: the procedure CAMEL_MT_GMSC_DISC1 is specific to CAMEL; it is
specified in 3GPP TS 23.078 [12]. If the GMSC does not support CAMEL,
processing continues from the \"No\" exit of the test \"Result=CAMEL
handling?\".
Sheet 7: the procedure CAMEL_MT_GMSC_DISC2 is specific to CAMEL; it is
specified in 3GPP TS 23.078 [12]. If the GMSC does not support CAMEL,
processing continues from the \"Normal handling\" exit of the test
\"Result?\".
Sheet 7: after the GMSC has sent an IAM to the destination VMSC or the
forwarded-to exchange (via the process MT_CF_MSC), it acts as a relay for
messages received from the originating exchange and the destination VMSC or
the process MT_CF_MSC. Any message other than Address Complete, Connect,
Answer or Release causes no change of state in the process MT_GMSC.
Sheet 8: the procedure CAMEL_MT_LEG2_GMSC is specific to CAMEL phase 4 or
later; it is specified in 3GPP TS 23.078 [12].
#### 7.2.1.2 Procedure Obtain_Routeing_Address
Sheet 1: the procedure MOBILE_NUMBER_PORTABILITY_IN_TQoD is specific to Mobile
Number Portability; it is specified in 3GPP TS 23.066 [10].
Sheet 1: the procedure CCBS_MT_GMSC_Check_CCBS_Call is specific to CCBS; it is
specified in 3GPP TS 23.093 [23].
Sheet 1: the procedure CLI_MT_GMSC is specific to Enhanced CLI Handling. It is
specified in 3GPP TS 23.081 [14].
Sheet 1: for SCUDIF calls, the message Send Routeing Info shall include the
ISDN BC of both the preferred and the less preferred service, as specified in
3GPP TS 23.172 [38].
Sheet 1: global flag \"Clear MT Roaming Retry IE\" is initialized to No at the
start of MT_GMSC procedure.
Sheet 1: if Mobile Terminating Roaming Retry is supported, and if no Resume
Call Handling message for roaming retry has been received, the GMSC shall
include the GMSC address, the call reference number and the MT Roaming Retry
Supported IE in the SRI message.
Sheet 2: the procedure SCUDIF_Negative_SRI_Response_Handling is specific to
SCUDIF; it is specified in 3GPP TS 23.172 [38]. If the GMSC does not support
SCUDIF, processing continues from the \"Fail\" exit of the test \"Result\".
Sheet 2: the procedure OR_Handle_SRI_Negative_Response is specific to Support
of Optimal Routeing. It is specified in 3GPP TS 23.079 [13]. If the GMSC does
not support Optimal Routeing, processing continues from the \"No\" exit of the
test \"Result=Pass?\".
Sheet 2: the test \"Error=Unknown subscriber\" refers to the negative response
value received from the HLR.
Sheet 2: the procedure MOBILE_NUMBER_PORTABILITY_IN_QoHR is specific to Mobile
Number Portability; it is specified in 3GPP TS 23.066 [10].
Sheet 3: the procedure SCUDIF_Check_Service_Availability is specific to
SCUDIF; it is specified in 3GPP TS 23.172 [38]. If the GMSC does not support
SCUDIF, processing continues from the \"continue\" exit of the test \"Result
?\".
Sheet 3: the procedure CAMEL_MT_GMSC_INIT is specific to CAMEL; it is
specified in 3GPP TS 23.078 [12].
Sheet 3: the procedure SCUDIF_Check_Service_Compatibility is specific to
SCUDIF; it is specified in 3GPP TS 23.172 [38].
Sheet 3: sending of \"Release Resources\" is an implementation option. If
support of \"Release Resources\" by the VMSC is not indicated in Send Routing
Info ack, \"Release Resources\" shall not be sent.
Sheet 4: the procedure SCUDIF_Check_Service_Compatibility is specific to
SCUDIF; it is specified in 3GPP TS 23.172 [38].
Sheet 4: the procedure CCBS_MT_GMSC_Check_CCBS_Indicators is specific to CCBS;
it is specified in 3GPP TS 23.093 [23].
Sheet 4: the task \"Store Forwarding Interrogation Required indicator\" is
executed only if the GMSC supports Optimal Routeing.
Sheet 4: The test \"MSRN contains a Routeing Number\" is executed only if the
SRF solution for call related MNP is used. If the SRF solution for call
related MNP is not used, processing continues from the \"No\" exit of the test
\"MSRN contains a Routeing Number\".
Sheet 4: the procedure MNP_MT_GMSC_Check_MNP_Indicators is specific to Mobile
Number Portability; it is specified in 3GPP TS 23.066 [10].
Sheet 5: the procedure CAMEL_MT_GMSC_Notify_CF is specific to CAMEL phase 2 or
later; it is specified in 3GPP TS 23.078 [12]. If the GMSC does not support
CAMEL phase 2 or later, processing continues from the \"Continue\" exit of the
test \"Result\".
Sheet 5: the procedure SCUDIF_Check_Service_Compatibility is specific to
SCUDIF; it is specified in 3GPP TS 23.172 [38].
Sheet 6: the task \"BOR:=OR\" is executed only if the GMSC supports Optimal
Routeing of mobile-to-mobile calls.
Sheet 6: the procedures CCBS_MT_GMSC_Remove_Indicators_Store_FWT is specific
to CCBS; it is specified in 3GPP TS 23.093 [23].
Sheet 6: the procedure Route_Permitted is specific to Support of Optimal
Routeing. It is specified in 3GPP TS 23.079 [13]. If the GMSC does not support
Optimal Routeing, processing continues from the \"True\" exit of the test
\"Route permitted\".
Sheet 6: the procedure CAMEL_MT_MSC_DISC3 is specific to CAMEL phase 1; it is
specified in 3GPP TS 23.078 [12].
Sheet 6: the procedure CAMEL_MT_GMSC_DISC4 is specific to CAMEL Phase 2 or
later; it is specified in 3GPP TS 23.078 [12].
Sheet 6: the task \"OR:= True\" is executed only if the GMSC supports Optimal
Routeing of mobile-to-mobile calls.
#### 7.2.1.3 Procedure Send_ACM_If_Required
If no useful information would be carried in the Call Progress message, it is
not sent.
#### 7.2.1.4 Procedure Send_Answer_If_Required
If no useful information would be carried in the Call Progress message, it is
not sent.
#### 7.2.1.5 Procedure Send_Network_Connect_If_Required
If no useful information would be carried in the Call Progress message, it is
not sent.
#### 7.2.1.6 Procedure Handle_COLP_Forwarding_Interaction_MSC
The originating exchange or the destination exchange may release the call
while a response is awaited from the process COLP_MAF039. The message is saved
for processing after return from the procedure.
#### 7.2.1.7 Procedure Activate_CF_Process
The processing in the branch beginning with the Int_Release_Call input will
occur only if the MSC supports CAMEL.
#### 7.2.1.8 Process MT_CF_MSC
Sheet 1: the procedure CAMEL_CF_MSC_INIT is specific to CAMEL; it is specified
in 3GPP TS 23.078 [12]. If the MSC does not support CAMEL, processing
continues from the \"Yes\" exit of the test \"Result=Pass?\".
Sheet 1, sheet 4: the procedure CAMEL_CF_Dialled_Services is specific to CAMEL
phase 3 or later; it is specified in 3GPP TS 23.078 [12]. If the MSC does not
support CAMEL phase 3 or later, processing continues from the \"Pass\" exit of
the test \"Result?\".
Sheet 1, sheet 3, sheet 4: the procedure CAMEL_OCH_MSC1 is specific to CAMEL
phase 2 or later; it is specified in 3GPP TS 23.078 [12]. If the MSC does not
support CAMEL phase 2 or later, processing continues from the \"Yes\" exit of
the test \"Result=Reconnect?\".
Sheet 1: the procedure MOBILE_NUMBER_PORTABILITY_IN_OQoD is specific to Mobile
Number Portability; it is specified in 3GPP TS 23.066 [10].
Sheet 1: the procedure CAMEL_Store_Destination_Address is specific to CAMEL
phase 3 or later; it is specified in 3GPP TS 23.078 [12].
Sheet 1, sheet 3: the procedure CAMEL_OCH_MSC_DISC3 is specific to CAMEL phase
1; it is specified in 3GPP TS 23.078 [12].
Sheet 1, sheet 3: the procedure CAMEL_OCH_MSC_DISC4 is specific to CAMEL Phase
2 or later; it is specified in 3GPP TS 23.078 [12].
Sheet 1, sheet 6: the procedure CAMEL_MT_CF_LEG1_MSC is specific to CAMEL
phase 4 or later; it is specified in 3GPP TS 23.078 [12].
Sheet 2: the procedures CAMEL_Start_TNRy and CAMEL_Stop TNRy are specific to
CAMEL phase 2 or later; they are specified in 3GPP TS 23.078 [12].
Sheet 2: the procedure CAMEL_CF_MSC_ANSWER is specific to CAMEL; it is
specified in 3GPP TS 23.078 [12]. If the MSC does not support CAMEL,
processing continues from the \"Pass\" exit of the test \"Result?\".
Sheet 2: the procedure UUS_MSC_Clear_UUS is specific to UUS; it is specified
in 3GPP TS 23.087 [20].
Sheet 2: the procedure CAMEL_CF_MSC_ALERTING is specific to CAMEL phase 4 or
later; it is specifed in 3GPP TS 23.078 [12]. If the GMSC does not support
CAMEL phase 4 or later, processing continues from the \"Pass\" exit of the
test \"Result?\".
Sheet 3: the procedure CAMEL_Stop_TNRy is specific to CAMEL phase 2 or later;
it is specified in 3GPP TS 23.078 [12].
Sheet 3: the processing in the branch beginning with the Int_O_Release input
will occur only if the MSC supports CAMEL.
Sheet 4: the input signal TNRy expired and all the subsequent processing are
specific to CAMEL phase 2 or later, and will occur only if the GMSC supports
CAMEL phase 2 or later. The procedure CAMEL_OCH_MSC2 is specified in 3GPP TS
23.078 [12].
Sheet 5: the procedure CAMEL_OCH_MSC_DISC1 is specific to CAMEL; it is
specified in 3GPP TS 23.078 [12]. If the MSC does not support CAMEL,
processing continues from the \"No\" exit of the test \"Result=CAMEL
handling?\".
Sheet 5: the procedure CAMEL_OCH_MSC_DISC2 is specific to CAMEL; it is
specified in 3GPP TS 23.078 [12]. If the MSC does not support CAMEL,
processing continues from the \"No\" exit of the test \"Result=Reconnect?\" .
Sheet 5: the processing in the branch beginning with the Int_O_Release input
will occur only if the MSC supports CAMEL.
Sheet 5: after the process MT_CF_MSC has sent an IAM to the forwarded-to
exchange, it acts as a relay for messages received from the parent process and
the forwarded-to exchange. Any message other than Address Complete, Connect,
Answer or Release causes no change of state in the process MT_GMSC.
Sheet 6: the process CAMEL_MT_CF_LEG2_MSC is specific to CAMEL phase 4 or
later; it is specified in 3GPP TS 23.078 [12].
#### 7.2.1.9 Macro CUG_Support_Check_GMSC
{width="6.691666666666666in" height="8.794444444444444in"}
Figure 36a: Process MT_GMSC (sheet 1)
{width="6.691666666666666in" height="8.794444444444444in"}
Figure 36b: Process MT_GMSC (sheet 2)
{width="6.691666666666666in" height="8.444444444444445in"}
Figure 36c: Process MT_GMSC (sheet 3)
{width="6.691666666666666in" height="8.09375in"}
Figure 36d: Process MT_GMSC (sheet 4)
{width="6.691666666666666in" height="8.444444444444445in"}
Figure 36e: Process MT_GMSC (sheet 5)
{width="6.691666666666666in" height="8.444444444444445in"}
Figure 36f: Process MT_GMSC (sheet 6)
{width="6.691666666666666in" height="8.084722222222222in"}
Figure 36g: Process MT_GMSC (sheet 7)
{width="6.691666666666666in" height="8.444444444444445in"}
Figure 36h: Process MT_GMSC (sheet 8)
{width="6.691666666666666in" height="8.09375in"}
Figure 36i: Process MT_GMSC (sheet 9)
{width="5.980555555555555in" height="7.231944444444444in"}
Figure 37a: Procedure Obtain_Routeing_Address (sheet 1)
{width="6.691666666666666in" height="8.444444444444445in"}
Figure 37b: Procedure Obtain_Routeing_Address (sheet 2)
{width="6.691666666666666in" height="8.794444444444444in"}
Figure 37c: Procedure Obtain_Routeing_Address (sheet 3)
{width="5.752083333333333in" height="6.956944444444445in"}
Figure 37d: Procedure Obtain_Routeing_Address (sheet 4)
{width="5.752083333333333in" height="6.956944444444445in"}
Figure 37e: Procedure Obtain_Routeing_Address (sheet 5)
{width="5.752083333333333in" height="7.559722222222222in"}
Figure 37f: Procedure Obtain_Routeing_Address (sheet 6)
{width="6.652777777777778in" height="8.152083333333334in"}
Figure 38: Procedure Send_ACM_If_Required
{width="6.652777777777778in" height="8.152083333333334in"}
Figure 39: Procedure Send_Answer_If_Required
{width="6.652777777777778in" height="8.152083333333334in"}
Figure 40: Procedure Send_Network_Connect_If_Required
{width="6.652777777777778in" height="8.152083333333334in"}
Figure 41: Procedure Handle_COLP_Forwarding_Interaction_MSC
{width="6.691666666666666in" height="8.444444444444445in"}
Figure 42: Procedure Activate_CF_Process
{width="6.691666666666666in" height="8.61875in"}
Figure 43a: Process MT_CF_MSC (sheet 1)
{width="6.691666666666666in" height="8.444444444444445in"}
Figure 43b: Process MT_CF_MSC (sheet 2)
{width="6.691666666666666in" height="8.444444444444445in"}
Figure 43c: Process MT_CF_MSC (sheet 3)
{width="6.691666666666666in" height="8.444444444444445in"}
Figure 43d: Process MT_CF_MSC (sheet 4)
{width="6.691666666666666in" height="8.444444444444445in"}
Figure 43e: Process MT_CF_MSC (sheet 5)
{width="6.691666666666666in" height="8.09375in"}
Figure 43f: Process MT_CF_MSC (sheet 6)
{width="6.691666666666666in" height="8.09375in"}
Figure 43bis: Macro CUG_Support_Check_GMSC
### 7.2.2 Functional requirements of HLR
#### 7.2.2.1 Process SRI_HLR
Sheet 1: the procedures Check_Parameters, Subscription_Check_HLR,
SCUDIF_Subscription_Check_HLR, Handle_OR_HLR_CF and CAMEL_HLR_INIT can set the
negative response parameter which is used by the process SRI_HLR to construct
the Send Routeing Info negative response message. This negative response
parameter is global data, accessible by the process SRI_HLR.
Sheet 1: the procedure Handle_OR_HLR_CF is specific to Support of Optimal
Routeing; it is specified in 3GPP TS 23.079 [13]. If the HLR does not support
Optimal Routeing, processing continues from the \"No\" exit of the test
\"Result=Forward?\".
Sheet 1: the procedure SCUDIF_Subscription_Check_HLR is specific to SCUDIF; it
is specified in 3GPP TS 23.172 [38]. This procedure gets the result from the
Subscription_Check_HLR procedure, and modifies it if needed. If the HLR does
not support SCUDIF, the test \"Result = Fail ?\" applies to the result of the
Subscription_Check_HLR procedure.
Sheet 1: the procedure CAMEL_HLR_INIT is specific to CAMEL; it is specified in
3GPP TS 23.078 [12]. If the HLR does not support CAMEL, processing continues
from the \"No\" exit of the test\"Result=Fail?\".
Sheet 2: the procedure First_Forwarding_HLR can set the negative response
parameter which is used by the process SRI_HLR to construct the Send Routeing
Info negative response message. This negative response parameter is global
data, accessible by the process SRI_HLR.
Sheet 2: the procedure CAMEL_CSI_Check_HLR is specific to CAMEL; it is
specified in 3GPP TS 23.078 [12]. If the HLR does not support CAMEL,
processing continues from the \"No\" exit of the test\"Result=CSI active?\".
Sheet 2: the procedure SCUDIF_CAMEL_CSI_Check_HLR is specific to SCUDIF; it is
specified in 3GPP TS 23.172 [38]. This procedure gets the result from the
CAMEL_CSI_Check_HLR procedure, and modifies it if needed. If the HLR does not
support SCUDIF, the test \"Result = CSI Active ?\" applies to the result of
the CAMEL_CSI_Check_HLR procedure. If the HLR does not support CAMEL,
processing continues from the \"No\" exit of the test \"Result=CSI active?\".
Sheet 2: the test \"gsmSCF Initiated Call?\" is specific to CAMEL phase 4 or
later. If the HLR does not support CAMEL phase 4 or later, processing
continues from the \"No\" exit.
Sheet 2: the test \"Suppress CCBS Handling?\" is specific to CAMEL phase 4 or
later. If the HLR does not support CAMEL phase 4 or later, processing
continues from the \"No\" exit.
Sheet 2: the procedure CCBS_Handling_HLR is specific to CCBS; it is specified
in 3GPP TS 23.093 [23]. If the HLR does not support CCBS, processing continues
from the \"Yes\" exit of the test \"Result = OK?\".
Sheet 3: the procedure OR_HLR_Interrogate_VLR is specific to Optimal Routeing.
It is specified in 3GPP TS 23.079 [13]. If the HLR does not support Optimal
Routeing, processing continues from the \"No\" exit of the test
\"Result=Forward\".
Sheet 3: the procedure SCUDIF_Set_Correct_PLMN_BC is specific to SCUDIF; it is
specified in 3GPP TS 23.172 [38]. If the HLR does not support SCUDIF,
processing continues from the \"Set_PLMN_BC\" exit of the test \"Result ?\".
Sheet 3: if the HLR does not support Network Indication of Alerting, the test
\"Alerting pattern required\" and the task \"Set Alerting Pattern\" are
omitted.
Sheet 3: the procedure CLI_HLR_Set_CLI is specific to Enhanced CLI Handling.
It is specified in 3GPP TS 23.081 [14].
Sheet 5: the procedure SCUDIF_Check_Second_Service_after_PRN is specific to
SCUDIF; it is specified in 3GPP TS 23.172 [38]. If the HLR does not support
SCUDIF, processing continues from the \"yes\" exit of the test \"Result =
Continue ?\".
Sheet 5: the procedure PRN_Error_HLR can set the negative response parameter
which is used by the process SRI_HLR to construct the Send Routeing Info
negative response message. This negative response parameter is global data,
accessible by the process SRI_HLR.
Sheet 5: the procedure Forward_CUG_Check is specific to CUG. If the HLR does
not support CUG, processing continues from the \"Yes\" exit of the test
\"Result=Call allowed?\".
Sheet 6: the test \"Forwarding enquiry\" is specific to Support of Optimal
Routeing. If the HLR does not support Optimal Routeing, processing continues
from the \"No\" exit of the test.
Sheet 6: the procedure CAMEL_CSI_Check_HLR is specific to CAMEL; it is
specified in 3GPP TS 23.078 [12]. If the HLR does not support CAMEL,
processing continues from the \"No\" exit of the test \"Result=CSI active?\".
Sheet 6: the procedure SCUDIF_CAMEL_CSI_Check_HLR is specific to SCUDIF; it is
specified in 3GPP TS 23.172 [38]. This procedure gets the result from the
CAMEL_CSI_Check_HLR procedure, and modifies it if needed. If the HLR does not
support SCUDIF, the test \"Result = CSI Active ?\" applies to the result of
the CAMEL_CSI_Check_HLR procedure. If the HLR does not support CAMEL,
processing continues from the \"No\" exit of the test \"Result=CSI active?\".
Sheet 6: the procedure SCUDIF_Check_Second_Service_before_Negative_Response
can set the negative response parameter which is used by the process SRI_HLR
to construct the Send Routeing Info negative response message. This negative
response parameter is global data, accessible by the process SRI_HLR.
Sheet 6: the procedure SCUDIF_Check_Second_Service_before_Negative_Response is
specific to SCUDIF; it is specified in 3GPP TS 23.172 [38]. If the HLR does
not support SCUDIF, processing continues from the \"Fail\" exit of the test
\"Result ?\".
Sheet 7: the procedures CAMEL_T_CSI_CHECK_HLR and CAMEL_O_CSI_CHECK_HLR are
specific to CAMEL; they are specified in 3GPP TS 23.078 [12].
Sheet 7: the procedure CAMEL_D_CSI_CHECK_HLR is specific to CAMEL phase 3 or
later; it is specified in 3GPP TS 23.078 [12].
Sheet 7: the procedure SCUDIF_Set_Second_Service_when_Forwarded is specific to
SCUDIF; it is specified in 3GPP TS 23.172 [38]. If the HLR does not support
SCUDIF, processing continues from the \"Yes\" exit of the test \"Result =
Continue ?\".
Sheet 7: the procedure SCUDIF_Check_Second_Service_when_Forwarded is specific
to SCUDIF; it is specified in 3GPP TS 23.172 [38]. If the HLR does not support
SCUDIF, processing continues from the \"Yes\" exit of the test \"Result =
Continue ?\".
Sheet 7: A HLR implementing the Mobile Terminating Roaming Retry feature (see
sub-clause 5.2.1) shall delay the sending of the PRN message till completion
of any on-going Location Update procedure.
#### 7.2.2.2 Procedure Check_Parameters
If any parameters required by the rules in clause 8 are missing from the
message, the procedure sets the negative response to \"Data missing\". If any
parameter has a value which is not in the set of values expected for the
parameter, the procedure sets the negative response to \"Unexpected data
value\".
#### 7.2.2.3 Procedure Subscription_Check_HLR
The HLR derives the possible PLMN bearer capability to populate the parameter
in the Provide Roaming Number request according to the rules defined in 3GPP
TS 29.007 [30].
If the HLR is able to determine the PLMN bearer capability or equivalent ISDN
compatibility information to be sent to the VLR in the Provide Roaming Number
request, it applies the corresponding PLMN bearer service or teleservice for
handling the call. If the HLR is not able to determine any compatibility
information to be sent to the VLR in the Provide Roaming Number request, it
applies a default basic service according to the requirements of the operator.
If the HLR receives Send Routeing Information from the gsmSCF and the HLR is
not able to determine any compatibility information to be sent to the VLR in
the Provide Roaming Number request, then the HLR shall apply basic service
TS11.
NOTE The information element "gsmSCF Initiated Call" in Send Routeing
Information serves as an indication to the HLR that this Send Routeing
Information is sent by the gsmSCF. Refer to 3GPP TS 23.078 [12].
It is an implementation option to carry out the check for operator determined
barring of incoming calls before the check on provisioning of the requested
basic service.
The test \"gsmSCF Initiated Call?\" is specific to CAMEL phase 4 or later. If
the HLR does not support CAMEL phase 4 or later, processing continues from the
\"No\" exit.
The test \"Suppress CUG Handling?\" is specific to CAMEL phase 4 or later. If
the HLR does not support CAMEL phase 4 or later, processing continues from the
\"No\" exit.
The negative response \"Call barred\" indicates whether the reason is operator
determined barring or supplementary service barring, according to the result
returned by the procedure Check_IC_Barring.
The negative response \"CUG reject\" indicates whether the reason is:
\- Incoming calls barred within CUG;
\- Requested basic service violates CUG constraints;
\- Subscriber not member of CUG;
according to the cause returned by the procedure IC_CUG_Check.
#### 7.2.2.4 Procedure First_Forwarding_HLR
The MS is not reachable if any of the following conditions is satisfied:
\- The HLR has no location information for the subscriber.
\- The subscriber record is marked as MS purged.
\- The subscriber record is marked as MSC area restricted.
\- The subscriber record is marked as Roaming Restricted due to Unsupported
Feature.
\- The subscriber is marked as deregistered because of subscription
restrictions on roaming.
#### 7.2.2.5 Procedure PRN_Error_HLR
The procedure CCBS_Report_PRN_Failure is specific to CCBS; it is specified in
3GPP TS 23.093 [23]. The procedure does not return a value; the following
tests are on the value of the Provide Roaming Number negative response.
The procedure Super_Charged_SRI_Error_HLR is specific to Super-Charger; it is
specified in 3GPP TS 23.116 [24]. If the HLR does not support Super-Charger,
processing continues from the \"No\" exit of the test \"Result=Purged?\".
If the HLR does not support Optimal Routeing, processing starts with the test
\"Negative response=Facility not supported?\".
#### 7.2.2.6 Procedure Forward_CUG_Check
#### 7.2.2.7 Void
#### 7.2.2.8 Procedure Check_IC_Barring
#### 7.2.2.9 Procedure IC_CUG_Check
#### 7.2.2.10 Procedure Handle_CFU
The test \"Normal call\" refers to the value of the indicator returned by the
process MAF007.
The procedure CAMEL_CHECK_SII2_CDTI is specific to CAMEL Phase 3 or later; it
is specified in 3GPP TS 23.078 [12]. If the GMSC does not support CAMEL Phase
3 or later, processing continues from the \"Yes\" exit of the test \"Result =
Pass?\".
#### 7.2.2.11 Procedure Handle_CFNRc
The test \"Mobile subscriber not reachable\" refers to the value of the
indicator returned by the process MAF010.
The procedure CAMEL_CHECK_SII2_CDTI is specific to CAMEL Phase 3 or later; it
is specified in 3GPP TS 23.078 [12]. If the GMSC does not support CAMEL Phase
3 or later, processing continues from the \"Yes\" exit of the test \"Result =
Pass?\".
{width="5.752083333333333in" height="7.260416666666667in"}
Figure 44a: Process SRI_HLR (sheet 1)
{width="6.691666666666666in" height="8.444444444444445in"}
Figure 44b: Process SRI_HLR (sheet 2)
{width="5.752083333333333in" height="7.260416666666667in"}
Figure 44c: Process SRI_HLR (sheet 3)
{width="5.752083333333333in" height="6.956944444444445in"}
Figure 44d: Process SRI_HLR (sheet 4)
{width="5.752083333333333in" height="7.260416666666667in"}
Figure 44e: Process SRI_HLR (sheet 5)
{width="5.752083333333333in" height="6.956944444444445in"}
Figure 44f: Process SRI_HLR (sheet 6)
{width="5.752083333333333in" height="6.956944444444445in"}
Figure 44g: Process SRI_HLR (sheet 7)
{width="6.652777777777778in" height="8.152083333333334in"}
Figure 45: Procedure Check_Parameters
{width="6.691666666666666in" height="9.32013888888889in"}
Figure 46: Procedure Subscription_Check_HLR
{width="6.652777777777778in" height="8.152083333333334in"}
Figure 47: Procedure First_Forwarding_HLR
{width="6.652777777777778in" height="8.152083333333334in"}
Figure 48: Procedure PRN_Error_HLR
{width="6.652777777777778in" height="8.152083333333334in"}
Figure 49: Procedure Forward _CUG_Check
Figure 50: Void
{width="6.652777777777778in" height="8.152083333333334in"}
Figure 51a: Procedure Check_IC_Barring (sheet 1)
{width="6.652777777777778in" height="8.152083333333334in"}
Figure 51b: Procedure Check_IC_Barring (sheet 2)
{width="6.691666666666666in" height="8.444444444444445in"}
Figure 52: Procedure IC_CUG_Check
{width="6.691666666666666in" height="8.444444444444445in"}
Figure 53: Procedure Handle_CFU
{width="6.691666666666666in" height="8.444444444444445in"}
Figure 54: Procedure Handle_CFNRc
### 7.2.3 Functional requirements of VLR
#### 7.2.3.1 Process PRN_VLR
Sheet 1: the procedure Check_Parameters is specified in subclause 7.2.2.2.
Sheet 1: the test \"Pre-paging allowed\" takes the \"yes\" exit if:
\- the information element \"Pre-paging supported\" was present in the Provide
Roaming Number message; or
\- as an operator option, the paging procedure can be completed before the
minimum timer value for the Provide Roaming Number operation timer in the HLR
has elapsed.
Sheet 1: the procedure Check_Reason_In_Serving_Network_Entity is specific to
Super-Charger; it is specified in 3GPP TS 23.116 [24]. If the VLR does not
support Super-Charger, processing continues from the \"No\" exit of the test
\"Result=Purged?\".
Sheet 2, sheet 3, sheet 6, sheet 7: the procedure CAMEL_SET_SOA is specific to
CAMEL; it is specified in 3GPP TS 23.078 [12].
Sheet 2, sheet 3, sheet 6, sheet 7: the task \"Store alerting pattern (if
received)\" is executed only if the VLR supports the feature Network
Indication of Alerting.
Sheet 2, sheet 3, sheet 6, sheet 7: the procedure CLI_PRN_VLR is specific to
Enhanced CLI Handling. It is specified in 3GPP TS 23.081 [14].
Sheet 2, sheet 3, sheet 6, sheet 7: the procedure CCBS_Handle_PRN is specific
to CCBS; it is specified in 3GPP TS 23.093 [23].
Sheet 2, sheet 4: A VLR not supporting the flag \"Subscriber data dormant\"
shall behave as if this flag is set to false.
Sheet 3, sheet 4: the number of unused authentication sets which triggers the
VLR to request further authentication sets from the HLR is an operator option.
Sheet 3, sheet 4: the process Fetch_Authentication_Sets_VLR is specified in
subclause 7.1.2.11.
Sheet 4: the procedure Search_For_MS_VLR is specified in subclause 7.3.2.3.
Sheet 4: the test \"Paging via SGSN possible\" takes the \"yes\" exit if:
\- the Gs interface is implemented; and
\- there is an association established for the MS between the MSC/VLR and the
SGSN.
Sheet 4: \"Location cancelled\" cause is set when VMSC receives Cancel
Location while paging.
Sheet 7, sheet 8: the state variables PAR pending, PAR successful and Fatal
PAR error are global data, accessible to the matching instance of the process
ICH_VLR, which is linked by the MSRN.
Sheet 8: this process communicates with the matching instance of the process
ICH_VLR, which is linked by the MSRN.
Sheet 8: the test \" Fatal PAR error?\" takes the \"Yes\" exit if:
\- the MS failed authentication; or
\- the MS failed IMEI checking; or
\- the HLR returned an \"Unknown subscriber\" error;
during the handling of the Process Access Request.
#### 7.2.3.2 Process Restore_Subscriber_Data_VLR
#### 7.2.3.3 Process PSI_VLR
Sheet 1: the procedure Check_Parameters is specified in subclause 7.2.2.2. If
the HLR requests none of location information subscriber state, MS classmark
and IMEI, the VLR treats this as a missing parameter.
Sheet 2: the test \"Active retrieval required\" takes the \"Yes\" exit if any
one or more of current location, MS classmark or IMEI is indicated in the
Provide Subscriber Info request.
#### 7.2.3.4 Procedure Retrieve_Location_Info_VLR
The test \"Retrieve location info from SGSN\" takes the \"Yes\" exit if:
\- the Gs interface is implemented; and
\- there is an association established between the VLR and the SGSN.
The stored location information consists of:
\- the service area ID (for UMTS) or cell ID (for GSM) or the tracking area ID
and the E-UTRAN cell ID (for E-UTRAN) of the cell in which the MS last
established radio contact;
\- the location number, geodetic information and geographical information
derived from the service area ID or cell ID if the VLR is capable of doing so
(the mapping from service area ID or cell ID to location number is network-
specific and outside the scope of the UMTS and GSM standards);
\- the age of the location information.
The output signal Send MS information towards the SGSN indicates that the
required information is mobile location information.
The received location information consists of:
\- the service area ID (for UMTS) or cell ID(for GSM) received in the paging
response message or in the Send MS Information ack or the tracking area ID and
the E-UTRAN cell ID (for E-UTRAN) received in the SGs service request;
\- the location number, geodetic information and geographical information
derived from the service area ID or cell ID if the VLR is capable of doing so
(the mapping from cell ID to location number is network-specific and outside
the scope of the UMTS and GSM standards);
\- the age of the location information.
The derivation of the location number, geodetic information and geographical
information from the received service area ID or cell ID is a VLR operator
option (the mapping from service area ID or cell ID to location number is
network-specific and outside the scope of the UMTS and GSM standards).
#### 7.2.3.5 Procedure Active_Info_Retrieval_VLR
Sheet 1: the test \"Paging via SGSN possible\" takes the \"yes\" exit if:
\- the Gs interface is implemented; and
\- the VLR configuration requires paging via the SGSN during VLR restoration.
If the SGs interface is implemented and the conditions for paging over the SGs
interface as specified in subclause 5.1.2.2 of 3GPP TS 29.118 [40] are
fulfilled, the VLR shall send an SGs paging request to the MME. The VLR should
indicate the \"SMS\" service indicator in the SGs paging request if the
LocationInformationEPS-Supported flag was received in the Provide Subscriber
Information request; otherwise the VLR should indicate the \"CS\" service
indicator. If the VLR indicates the \"SMS\" service indicator, the VLR should
then send an SGs Release Request message to the MME upon receipt of the SGs
Service Request message (including the tracking area ID and E-UTRAN cell ID).
The VLR should return in the Provide Subscriber Information response the
tracking area ID and E-UTRAN cell ID received from the MME if the
LocationInformationEPS-Supported flag was received in the Provide Subscriber
Information request and the UE uses the E-UTRAN radio access; otherwise the
VLR should return the service area ID (for UMTS) or cell ID (for GSM) received
from UTRAN or GERAN.
NOTE: Using the \"CS\" service indicator leads the UE to fallback to GERAN or
UTRAN radio access which can affect on-going PS sessions of the user, e.g.
suspend on-going PS sessions if the UE fallbacks to GERAN radio access and
Dual Transfer Mode is not supported, and which can cause extra Location Update
signalling in the network.
Sheet 2: the output signal Page MS towards the SGSN includes or omits the
Location area identity parameter depending on the availability of this
information. If it is omitted, the signal Page MS is sent to every SGSN to
which the VLR is connected.
The test \"Report upon change of service area\" takes the yes exit if the MSC
has performed the Location Reporting Control procedure with the Request Type
IE set to \"change of service area\" [26].
If the test \"Report upon change of service area\" takes the no exit, then the
MSC shall perform a Location Reporting Control procedure with the Request Type
IE set to \"Direct\".
{width="6.691666666666666in" height="8.444444444444445in"}
Figure 55a: Process PRN_VLR (sheet 1)
{width="6.691666666666666in" height="9.67013888888889in"}
Figure 55b: Process PRN_VLR (sheet 2)
{width="6.691666666666666in" height="8.61875in"}
Figure 55c: Process PRN_VLR (sheet 3)
{width="6.691666666666666in" height="8.61875in"}
Figure 54d: Process PRN_VLR (sheet 4)
{width="6.691666666666666in" height="8.61875in"}
Figure 54e: Process PRN_VLR (sheet 5)
{width="6.691666666666666in" height="8.61875in"}
Figure 54f: Process PRN_VLR (sheet 6)
{width="6.691666666666666in" height="8.61875in"}
Figure 54g: Process PRN_VLR (sheet 7)
{width="6.652777777777778in" height="8.152777777777779in"}
Figure 54h: Process PRN_VLR (sheet 8)
{width="6.652777777777778in" height="8.152083333333334in"}
Figure 56: Process Restore_Subscriber_Data_VLR
{width="6.691666666666666in" height="8.444444444444445in"}
Figure 57a: Process PSI_VLR (sheet 1)
{width="6.691666666666666in" height="8.444444444444445in"}
Figure 57b: Process PSI_VLR (sheet 2)
{width="6.691666666666666in" height="8.444444444444445in"}
Figure 58: Procedure Retrieve_Location_Info_VLR
{width="6.691666666666666in" height="9.145138888888889in"}
Figure 59a: Procedure Active_Info_Retrieval_VLR
{width="6.691666666666666in" height="9.145138888888889in"}
Figure 59b: Procedure Active_Info_Retrieval_VLR (sheet 2)
### 7.2.4 Functional requirements of MSC
#### 7.2.4.1 Process Prepage_MSC
#### 7.2.4.2 Procedure Prepaging_Page_MS_MSC
The test \"MS connection exists\" takes the \"Yes\" exit if there is a radio
connection established between the MS and the network.
The test \"MS busy\" takes the \"Yes\" exit if the MS is engaged on a circuit-
switched call.
The signal input \"MS connection established\" indicates that the MS has
responded to paging, or sent a CM service request for anything other than a
circuit-switched call, or completed the location registration procedure.
#### 7.2.4.3 Prepaging_Search_For_MS_MSC
The test \"MS connection exists\" takes the \"Yes\" exit if there is a radio
connection established between the MS and the network.
The test \"MS busy\" takes the \"Yes\" exit if the MS is engaged on a circuit-
switched call.
The signal input \"MS connection established\" indicates that the MS has
responded to paging, or sent a CM service request for anything other than a
circuit-switched call, or completed the location registration procedure.
#### 7.2.4.4 Process OSI_MSC
If the MS is engaged on a circuit-switched call, the state is busy, otherwise
assumed idle.
#### 7.2.4.5 Process RCL_MSC
This process runs when the MSC receives a Page MS message or a Search for MS
message with a Page type indicating Active Info Retrieval.
#### 7.2.4.6 Procedure Active_Info_Retrieval_Page_MSC
The test \"MS connection exists\" takes the \"Yes\" exit if there is a radio
connection established between the MS and the network.
The test \"GSM Access\" takes the \"Yes\" exit if the MS is using a GSM radio
access to communicate with the network.
The test \"Report on change of service area?\" takes the \"Yes\" exit if the
MSC has performed the Location Reporting Control procedure (see 3GPP TS 25.413
[27]) with the Request Type IE set to \"Change of service area\".
If the test \"Report on change of service area?\" takes the \"No\" exit the
MSC shall perform a Location Reporting Control procedure with the Request Type
IE set to \"Direct\".
#### 7.2.4.7 Procedure Active_Info_Retrieval_Search_MSC
The test \"MS connection exists\" takes the \"Yes\" exit if there is a radio
connection established between the MS and the network.
The test \"GSM Access\" takes the \"Yes\" exit if the MS is using a GSM radio
access to communicate with the network.
The test \"Report on change of service area?\" takes the \"Yes\" exit if the
MSC has performed the Location Reporting Control procedure (see 3GPP TS 25.413
[26]) with the Request Type IE set to \"Change of service area\".
If the test \"Report on change of service area?\" takes the \"No\" exit the
MSC shall perform a Location Reporting Control procedure with the Request Type
IE set to \"Direct\".
#### 7.2.4.8 Procedure Retrieve_IMEI_If_Required
If the IMEI is retrieved using an existing connection between the MS and the
network (as opposed to a connection which has been set up for active
information retrieval), the Release transaction signal is relayed to the MSC
process which is supervising the existing connection.
{width="6.691666666666666in" height="8.61875in"}
Figure 60: Process Prepage_MSC
{width="5.980555555555555in" height="7.5472222222222225in"}
Figure 61: Procedure Prepaging_Page_MS_MSC
{width="6.691666666666666in" height="8.444444444444445in"}
Figure 62: Procedure Prepaging_Search_For_MS_MSC
{width="6.652777777777778in" height="8.152083333333334in"}
Figure 63: Process OSI_MSC
{width="6.691666666666666in" height="9.145138888888889in"}
Figure 64: Process AIR_MSC
{width="6.691666666666666in" height="9.145138888888889in"}
Figure 65: Procedure Active_Info_Retrieval_Page_MSC
{width="6.691666666666666in" height="9.145138888888889in"}
Figure 66: Procedure Active_Info_Retrieval_Search_MSC
{width="6.691666666666666in" height="8.09375in"}
Figure 66bis: Procedure Retrieve_IMEI_If_Required
## 7.3 MT call
### 7.3.1 Functional requirements of serving MSC
#### 7.3.1.1 Process ICH_MSC
Sheet 1: the task \"Release Resources\" refers to any resources that may have
been allocated for the call due to Pre-Paging.
Sheet 1: the rules for converting the ISDN BC/LLC/HLC to a bearer service or
teleservice are specified in 3GPP TS 29.007 [30].
Sheet 1: the task \"Store UUS information (if received)\" is executed only if
the VMSC supports UUS.
Sheet 1: the variables TCH allocated, ACM sent, Answer sent and Network
connect sent are global data, accessible to the procedures
Establish_Terminating_TCH_If_Required, Send_ACM_If_Required,
Send_Answer_If_Required and Send_Network_Connect_If_Required.
Sheet 1: the variables UUS result sent, UUS1 implicit active, UUS1 explicit
active, UUS2 active, UUS3 active and UUS CF interaction are specific to UUS.
They are accessible to all UUS specific procedures.
Sheet 1: the handling starting with the input signal \"Continue CAMEL
handling\" is specific to CAMEL phase 3 or later. If the VMSC does not support
CAMEL phase 3 or later, this signal will not be received from the VLR.
Sheet 1: the procedure CAMEL_ICH_MSC_INIT is specific to CAMEL phase 3 or
later; it is specified in 3GPP TS 23.078 [12].
Sheet 1: The variable \"On_Hold\" is used only if the VMSC supports Call Hold.
Sheet 1, sheet 4, sheet 9: the process CAMEL_ICH_LEG1_MSC is specific to CAMEL
phase 4 or later; it is specified in 3GPP TS 23.078 [12].
Sheet 2: the procedure Process_Access_Request_MSC is specified in subclause
7.1.1.2.
Sheet 2: the signal input Complete Call will be received in the state
Wait_For_Page_Request only if the MSC/VLR supports pre-paging.
Sheet 2, sheet 3: the suggested mapping from values of the Send Info For
Incoming Call negative response information element to values of the ISUP
release cause (see ITU‑T Recommendation Q.850 [37]) is shown in table 2. The
mapping used is a matter for the network operator, depending on the telephony
signalling system used.
Table 2: Suggested mapping of Send Info For Incoming Call (SIFIC)\ negative
responses to ISUP release causes
* * *
SIFIC negative response ISUP release cause number ISUP release cause name
Absent subscriber 20 Subscriber absent Busy subscriber 17 User busy CUG reject
(Called party SS interaction violation) 21 Call rejected Forwarding violation
21 Call rejected Impossible call completion 111 Protocol error, unspecified No
subscriber reply 19 No answer from user (user alerted) System failure 111
Protocol error, unspecified Unallocated roaming number 111 Protocol error,
unspecified
* * *
Sheet 2, sheet 3, sheet 6, sheet 8, sheet 10, sheet 12: the procedure
CAMEL_MT_GMSC_DISC4 is called if the VMSC supports CAMEL phase 3 or later; it
is specified in 3GPP TS 23.078 [12]. If the VMSC does not support CAMEL phase
3 or later, processing continues from the \"No\" exit of the test
\"Result=Reconnect?\".
Sheet 2, sheet 5, sheet 8, sheet 10, sheet 11, sheet 12: the procedure
CAMEL_MT_GMSC_DISC6 is called if the VMSC supports CAMEL phase 3 or later; it
is specified in 3GPP TS 23.078 [12].
Sheet 3: the procedure CAMEL_MT_GMSC_DISC5 is called if the VMSC supports
CAMEL phase 3 or later; it is specified in 3GPP TS 23.078 [12]. If the VMSC
does not support CAMEL phase 3 or later, processing continues from the \"No\"
exit of the test \"Result=Reconnect?\".
Sheet 3: the procedure CD_Reject is specific to Call Deflection; it is
specified in 3GPP TS 23.072 [11].
Sheet 3: the procedure Process_Call_Waiting is specific to Call Waiting; it is
specified in 3GPP TS 23.083 [16].
Sheet 3: the task \"Store CW treatment indicator for this call if received in
SII2\" is executed only if the VMSC supports CAMEL phase 3 or later.
Sheet 3: if the VMSC does not support CAMEL phase 3 or later, the procedure
Complete_Call_In_MSC and the procedure Process_Call_Waiting will not return a
\"Reconnect\" result.
Sheet 3: the processing in the branch starting with the input signal\"Process
Call Waiting\" is specific to Call Wait. If the VMSC does not support Call
Waiting, this signal will not be received from the VLR.
Sheet 3, sheet 10: the procedure CCBS_Set_Diagnostic_For_Release is specific
to CCBS; it is specified in 3GPP TS 23.093 [23].
Sheet 3, sheet 5, sheet 6, sheet 11, sheet 12, sheet 13: the procedure
CCBS_Check_Last_Call is specific to CCBS; it is specified in 3GPP TS 23.093
[23].
Sheet 3: the procedure UUS_ICH_Check_Support is specific to UUS; it is
specified in 3GPP TS 23.087 [20].
Sheet 4: the procedure CAMEL_ICH_LEG2_MSC isspecific to CAMEL phase 4 or
later; it is specified in 3GPP TS 23.078 [12].
Sheet 9: the procedure CAMEL_ICH_LEG2_CF_MSC is specific to CAMEL phase 4 or
later; it is specified in 3GPP TS 23.078 [12].
Sheet 5: the procedure CAMEL_Check_ORLCF_VMSC is specific to CAMEL phase 2 or
later; it is specified in 3GPP TS 23.078 [12].
\- If the VLR does not support CAMEL or no CAMEL information is available for
the subscriber, then ORLCF may take place (\'ORLCF\' result from
CAMEL_Check_ORLCF_VMSC).
\- If CAMEL information is available for the subscriber and the GMSC supports
the required CAMEL phase, then ORLCF may take place. The Resume Call Handling
request shall include the relevant CAMEL information (\'ORLCF\' result from
CAMEL_Check_ORLCF_VMSC).
\- If CAMEL information is available for the subscriber but the GMSC does not
support the required CAMEL phase, then ORLCF shall not take place (\'VMSCCF\'
result from CAMEL_Check_ORLCF_VMSC).
Sheet 5: the procedure Handle_ORLCF_VMSC is specific to Support of Optimal
Routeing. It is specified in 3GPP TS 23.079 [13]. If the VMSC does not support
Optimal Routeing, processing continues from the \"Continue\" exit of the test
\"Result?\".
Sheet 5, sheet 6, sheet 11: the procedures CD_Failure and CD_Success are
specific to Call Deflection; they are specified in 3GPP TS 23.072 [11].
Sheet 6: the procedure CAMEL_MT_VMSC_Notify_CF is specific to CAMEL phase 3 or
later; it is specified in 3GPP TS 23.078 [12].
Sheet 6: If the VMSC does not support CAMEL phase 3 or later, processing
starts with the possible call of the procedure CCBS_Check_Last_Call.
Sheet 6: The task \"set redirection information\" includes the mapping of the
MSISDN parameter received in the Send Info For Incoming Call ack message to
the redirecting number of the IAM message and the setting of the presentation
indicator of the redirecting number of the IAM message according to the value
of the Redirecting presentation parameter received in the Send Info For
Incoming Call ack message.
Sheet 6: it is an operator option whether to send an Address Complete message
if the VLR returns forwarding information. If the VMSC sends an Address
Complete message, it shall include the called party\'s status field of the
Backward call indicator set to \"no indication\".
Sheet 6, sheet 8: the procedure Send_ACM_If_Required is specified in subclause
7.2.1.3.
Sheet 6: the procedure Activate_CF_Process is specified in subclause 7.2.1.7.
Sheet 6: the procedure UUS_ICH_Set_Info_In_IAM is specific to UUS, it is
specified in 3GPP TS 23.087 [20].
Sheet 6: the called party address sent in the IAM to the process MT_CF_MSC is
the Forwarded-to number received in the Perform Call Forwarding ack.
Sheet 6: the procedure CAMEL_Store_Destination_Address is specific to CAMEL
phase 3 or later; it is specified in 3GPP TS 23.078 [12].
Sheet 7: The processing on this sheet is specific to CAMEL phase 3 or later.
If the VMSC does not support CAMEL phase 3 or later, the input signal
Int_Release Call will not be received.
Sheet 8: the procedure CAMEL_MT_GMSC_ANSWER is called if the VMSC supports
CAMEL phase 3 or later; it is specified in 3GPP TS 23.078 [12]. If the VMSC
does not support CAMEL phase 3 or later, processing continues from the
\"Pass\" exit of the test \"Result?\".
Sheet 8: the procedure Handle_COLP_Forwarding_Interaction_MSC is specified in
subclause 7.2.1.6.
Sheet 8: the procedure Send_Answer_If_Required is specified in subclause
7.2.1.4.
Sheet 8: the procedure Send_Network_Connect_If_Required is specified in
subclause 7.2.1.5.
Sheet 8: the procedure CAMEL_MT_MSC_ALERTING is specific to CAMEL phase 4 or
later; it is specified in 3GPP TS 23.078 [12]. If the VMSC does not support
CAMEL phase 4 or later, processing continues from the \"Pass\" exit of the
test \"Result?\".
Sheet 10: the procedure CCBS_MT_MSC_Check_Forwarding is specific to CCBS; it
is specified in 3GPP TS 23.093 [23].
Sheet 11: the processing on this sheet is specific to CAMEL phase 3 or later.
If the VMSC does not support CAMEL phase 3 or later, the input signal Send
Info For MT Reconnected Call ack will not be received.
Sheet 11: the procedure Handle_ORLCF_VMSC is specific to OR; it is specified
in 3GPP TS 23.079 [13]. If the VMSC does not support OR, processing continues
from the \"No\" exit of the test \"Result = Forwarding Failed?\".
Sheet 13, sheet 14: the procedure CAMEL_MT_GMSC_DISC1 is called if the VMSC
supports CAMEL phase 3 or later; it is specified in 3GPP TS 23.078 [12].
Sheet 13, sheet 14: the procedure CAMEL_MT_GMSC_DISC2 is called if the VMSC
supports CAMEL phase 3 or later; it is specified in 3GPP TS 23.078 [12]. If
the VMSC does not support CAMEL phase 3 or later, processing continues from
the \"No\" exit of the test \"Result=Reconnect?\".
Sheet 13: the procedure UUS_MSC_Check_UUS1_UUI is specific to UUS; it is
specified in 3GPP TS 23.087 [20].
Sheet 14: after the VMSC has sent an IAM to the process MT_CF_MSC, it acts as
a transparent relay for messages received from the GMSC and the process
MT_CF_MSC. Any message other than Address Complete, Connect, Answer or Release
causes no change of state in the process ICH_MSC.
Sheet 15: The processing on this sheet is specific to CAMEL phase 3 or later.
If the VMSC does not support CAMEL phase 3 or later, the input signal
Int_Release Call will not be received.
Sheet 16: the procedure Process_Hold_Request is specific to Call Hold; it is
specified in 3GPP TS 23.083[16].
Sheet 16: the procedure Process_Retrieve_request is specific to Call_Hold; it
is specified in 3GPP TS 23.083[16].
#### 7.3.1.2 Procedure Page_MS_MSC
Sheet 1: the test \"MS connection exists\" takes the \"Yes\" exit if there is
a radio connection established between the MS and the network.
Sheet 1: for an SMS or SS page, the test \"Call still exists\" takes the
\"Yes\" exit if the SMS or SS transaction which led to the page still exists.
Sheet 1: the test \"SMS or SS page\" is not required for the handling of
circuit-switched calls, because the VLR will always use a page type of
\"circuit-switched call\", but the more generalized procedure Page_MS_MSC is
equally applicable to paging for SMS delivery or network-initiated SS
procedures.
Sheet 1: If the MSC supports the option to delay Mobile Terminating CM request
during a location update procedure (see 3GPP TS 24.008 [13] section 4.5.1.3.1
Mobile Terminating CM Activity):
> If location update procedure is ongoing for the MS,
If the \"follow-on\" indicator is received and MSC supports \"follow-on\"
feature, the Page_MS_MSC procedure should return FAIL after sending Page MS
negative response (cause Busy Subscriber) to VLR.
Otherwise, the MSC should delay the launching of Page_MS_MSC procedure until
the location update procedure ends.
\- If the result of location update is successful and location update is not
through Gs interface, then Page_MS_MSC procedure returns with PASS.
\- If the result of location update is successful and location update is
through Gs interface, then Page_MS_MSC continues from the beginning of the
procedure.
\- If the result of location update is not successful, then the procedure
should return FAIL after sending Page MS negative response (cause Absent
Subscriber) to VLR.
Sheet 2: the procedure Check_MT_Multicall_MSC is specific to Multicall; it is
specified in 3GPP TS 23.135 [25]. If the VMSC does not support Multicall,
processing continues from the \"Yes\" exit of the test \"Result=Not
provisioned?\".
Sheet 2: the test \"Call in set-up\" takes the \"Yes\" exit if the call on
which the MS is engaged has not reached the established phase (called party
answer).
Sheet 2: the test Call waiting\" takes the \"Yes\" exit if a waiting call has
been offered to the subscriber but the outcome of offering the call has not
been determined.
Sheet 2: if there is one established call, the negative response Busy
Subscriber (More calls possible) includes the basic service which applies for
the established call. If there are two or more established calls (the
Multicall case), the negative response Busy Subscriber (More calls possible)
includes the basic service list which applies for the established calls (See
3GPP TS 23.135 [25]).
Sheet 3: the signal input \"MS connection established\" indicates that the MS
has responded to paging, or sent a CM service request for anything other than
a circuit-switched call, or completed the location registration procedure.
Sheet 4: A MSC not implementing the MT Roaming Retry feature may not
immediately stop paging upon receipt of a Cancel Location message.
#### 7.3.1.3 Procedure Search_For_MS_MSC
Sheet 1: the test \"MS connection exists\" takes the \"Yes\" exit if there is
a radio connection established between the MS and the network.
Sheet 1: for an SMS or SS page, the test \"Call still exists\" takes the
\"Yes\" exit if the SMS or SS transaction which led to the page still exists.
Sheet 1: the test \"SMS or SS page\" is not required for the handling of
circuit-switched calls, because the VLR will always use a page type of
\"circuit-switched call\", but the more generalized procedure
Search_For_MS_MSC is equally applicable to paging for SMS delivery or network-
initiated SS procedures.
Sheet 1: If the MSC supports the option to delay the Mobile Terminating CM
request during a location update procedure (see 3GPP TS 24.008 [13] section
4.5.1.3.1 Mobile Terminating CM Activity):
If location update procedure is ongoing for the MS, and if the \"follow-on\"
indicator is received and the MSC supports the \"follow-on\" feature, the
Search_MS_MSC procedure should return FAIL after sending Search MS negative
response (cause Busy Subscriber) to VLR.
Otherwise, the MSC should delay the launching of Search_MS_MSC procedure until
location update procedure ends.
\- If the result of location update is successful and location update is not
through Gs interface, then the Search_MS_MSC procedure returns with PASS.
\- If the result of location update is successful and location update is
through Gs interface, then the procedure continues from the beginning of the
Page_MS_MSC procedure.
\- If the result of the location update is not successful, then the procedure
should return FAIL after sending the Search MS negative response (cause Absent
Subscriber) to VLR.
Sheet 2: the procedure Check_MT_Multicall_MSC is specific to Multicall; it is
specified in 3GPP TS 23.135 [25]. If the VMSC does not support Multicall,
processing continues from the \"Yes\" exit of the test \"Result=Not
provisioned?\".
Sheet 2: the test \"Call in set-up\" takes the \"Yes\" exit if the call on
which the MS is engaged has not reached the established phase (called party
answer).
Sheet 2: the test \"Call waiting\" takes the \"Yes\" exit if a waiting call
has been offered to the subscriber but the outcome of offering the call has
not been determined.
Sheet 2: if there is one established call, the negative response Busy
Subscriber (More calls possible) includes the basic service which applies for
the established call. If there are two or more established calls (the
Multicall case), the negative response Busy Subscriber (More calls possible)
includes the basic service list which applies for the established calls (See
3GPP TS 23.135 [25]).
Sheet 3: the signal input \"MS connection established\" indicates that the MS
has responded to paging, or sent a CM service request for anything other than
a circuit-switched call, or completed the location registration procedure.
Sheet 4 : A MSC not implementing the MT Roaming Retry feature may not
immediately stop paging upon receipt of a Cancel Location message.
#### 7.3.1.4 Procedure Complete_Call_In_MSC
Sheet 1: the procedure Set_CLIP_Info_MSC is specific to CLIP.
Sheet 1: the VMSC derives the PLMN bearer capability required for the call
according to the rules defined in 3GPP TS 29.007 [30].
Sheet 1, sheet 2: the VMSC and the MS may negotiate the bearer capability to
be used for the call by the exchange of information in the Set-up and Call
Confirmed messages.
Sheet 1: the procedure UUS_ICH_UUS1_Implicit_Active is specific to UUS, it is
specified in 3GPP TS 23.087 [20].
Sheet 1: the procedure CCBS_Report_Not_Idle is specific to CCBS; it is
specified in 3GPP TS 23.093 [23].
Sheet 2: the procedure Establish_Terminating_TCH_Multicall is specific to
Multicall; it is specified in 3GPP TS 23.135 [25].
Sheet 2: the test \"Result=Rejected?\" can take the \"Yes\" exit only if the
procedure Establish_Terminating_TCH_Multicall was called.
Sheet 2, sheet 3, sheet 4, sheet 5, sheet 6, sheet 7: the procedure
CAMEL_MT_GMSC_DISC4 is called if the VMSC supports CAMEL phase 3 or later; it
is specified in 3GPP TS 23.078 [12]. If the VMSC does not support CAMEL phase
3 or later, processing continues from the \"No\" exit of the test
\"Result=Reconnect?\".
Sheet 2, sheet 3, sheet 6, sheet 9, sheet 10: the procedure
CAMEL_MT_GMSC_DISC6 is called if the VMSC supports CAMEL phase 3 or later; it
is specified in 3GPP TS 23.078 [12].
Sheet 2, sheet 5, sheet 9: the procedure CCBS_ICH_MSC_Report_Failure is
specific to CCBS; it is specified in 3GPP TS 23.093 [23].
Sheet 3, sheet 5: the procedure CCBS_ICH_MSC_Report_Success is specific to
CCBS; it is specified in 3GPP TS 23.093 [23].
Sheet 3: the procedure CAMEL_Start_TNRy is called if the VMSC supports CAMEL
phase 3 or later; it is specified in 3GPP TS 23.078 [12].
Sheet 3: the procedure CAMEL_MT_MSC_ALERTING is specific to CAMEL phase 4 or
later; it is specified in 3GPP TS 23.078 [12]. If the VMSC does not support
CAMEL phase 4 or later, processing continues from the \"Pass\" exit of the
test \"Result?\".
Sheet 3, sheet 6: the procedure UUS_ICH_Check_Support is specific to UUS, it
is specified in 3GPP TS 23.087 [20]. If the VMSC does not support UUS,
processing continues from the \"Yes\" exit of the test \"Result=Pass?\".
Sheet 3: the task \"UTU2Cnt:=0\" is executed only if the VMSC supports UUS.
Sheet 3: the procedure Send_ACM_If_Required is specified in subclause 7.2.1.3.
Sheet 3, sheet 6: the procedure Establish_Terminating_TCH_Multicall is
specific to Multicall; it is specified in 3GPP TS 23.135 [25]. If the VMSC
does not support Multicall, processing continues from the \"Yes\" exit of the
test \"Result=Pass?\".
Sheet 4, sheet 7: the procedure Handle_AoC_MT_MSC is specific to AoC. If the
VMSC does not support AoC, processing continues from the \"Yes\" exit of the
test \"Result=Pass?\".
Sheet 4, sheet 7: the procedure CAMEL_MT_GMSC_ANSWER is called if the VMSC
supports CAMEL phase 3 or later; it is specified in 3GPP TS 23.078 [12]. If
the VMSC does not support CAMEL phase 3 or later, processing continues from
the \"Yes\" exit of the test \"Result=Pass?\".
Sheet 4, sheet 7: the procedure Set_COL_Presentation_Indicator_MSC is specific
to COLP.
Sheet 4: the procedure Send_Network_Connect_If_Required is specified in
subclause 7.2.1.5.
Sheet 5, sheet 11: the processing in the branch starting with the input \"CD
Request\" is specific to Call Deflection; if the VMSC does not support Call
Deflection the input is discarded.
Sheet 5, sheet 11: the procedure Handling_CD_MSC is specific to Call
Deflection; it is specified in 3GPP TS 23.072 [11].
Sheet 6: the procedure CAMEL_Stop_TNRy is called if the VMSC supports CAMEL
phase 3 or later; it is specified in 3GPP TS 23.078 [12].
Sheet 7: the procedure Send_Answer_If_Required is specified in subclause
7.2.1.4.
Sheet 8: the input signal \"CAMEL TNRy expired\" will be received only if the
VMSC supports CAMEL phase 3 or later.
Sheet 8, sheet 11: the procedure UUS_ICH_Check_Forwarding is specific to UUS,
it is specified in 3GPP TS 23.087 [20]. If the VMSC does not support UUS,
processing continues from the \"Yes\" exit of the test \"Result=Pass?\".
Sheet 9, sheet 10: the procedure UUS_MSC_Check_UUS1_UUI is specific to UUS; it
is specified in 3GPP TS 23.087 [20].
Sheet 11: the procedures UUS_MSC_Check_UUS2_UUI_to MS and
UUS_MSC_Check_UUS2_UUI_to NW are specific to UUS, they are specified in 3GPP
TS 23.087 [20].
Sheet 11: the procedure CD_UUS_Interaction is specific to Call Deflection; it
is specified in 3GPP TS 23.072 [11].
#### 7.3.1.5 Void
#### 7.3.1.6 Procedure Set_CLIP_Info_MSC
The originating exchange may release the call or the MS may terminate the
transaction with the network by sending a Release transaction message while a
response is awaited from the process CLIP_MAF002. The message is saved for
processing after return from the procedure.
#### 7.3.1.7 Void
#### 7.3.1.8 Procedure Establish_Terminating_TCH_If_Required
The procedure TCH_Check is specified in subclause 7.1.1.14.
#### 7.3.1.9 Procedure Handle_AoC_MT_MSC
#### 7.3.1.10 Procedure Set_COL_Presentation_Indicator_MSC
The originating exchange may release the call or the MS may terminate the
transaction with the network by sending a Release transaction message while a
response is awaited from the process COLP_MAF041. The message is saved for
processing after return from the procedure.
{width="6.691666666666666in" height="8.444444444444445in"}
Figure 67a: Process ICH_MSC (sheet 1)
{width="6.691666666666666in" height="8.794444444444444in"}
Figure 67b: Process ICH_MSC (sheet 2)
{width="6.691666666666666in" height="8.444444444444445in"}
Figure 67c: Process ICH_MSC (sheet 3)
{width="6.691666666666666in" height="8.444444444444445in"}
Figure 67d: Process ICH_MSC (sheet 4)
{width="5.980555555555555in" height="7.5472222222222225in"}
Figure 67e: Process ICH_MSC (sheet 5)
{width="6.691666666666666in" height="8.794444444444444in"}
Figure 67f: Process ICH_MSC (sheet 6)
{width="6.691666666666666in" height="8.794444444444444in"}
Figure 67g: Process ICH_MSC (sheet 7)
{width="6.691666666666666in" height="8.444444444444445in"}
Figure 67h: Process ICH_MSC (sheet 8)
{width="6.691666666666666in" height="8.444444444444445in"}
Figure 67i: Process ICH_MSC (sheet 9)
{width="6.691666666666666in" height="8.794444444444444in"}
Figure 67j: Process ICH_MSC (sheet 10)
{width="6.691666666666666in" height="8.794444444444444in"}
Figure 67k: Process ICH_MSC (sheet 11)
{width="6.691666666666666in" height="8.444444444444445in"}
Figure 67l: Process ICH_MSC (sheet 12)
{width="6.691666666666666in" height="8.794444444444444in"}
Figure 67m: Process ICH_MSC (sheet 13)
{width="6.691666666666666in" height="8.444444444444445in"}
Figure 67n: Process ICH_MSC (sheet 14)
{width="6.691666666666666in" height="8.794444444444444in"}
Figure 67o: Process ICH_MSC (sheet 15)
{width="6.691666666666666in" height="8.444444444444445in"}
Figure 67p: Process ICH_MSC (sheet 16)
{width="6.691666666666666in" height="8.444444444444445in"}
Figure 67q: Process ICH_MSC (sheet 17)
{width="6.691666666666666in" height="8.444444444444445in"}
Figure 68a: Procedure Page_MS_MSC (sheet 1)
{width="6.691666666666666in" height="8.444444444444445in"}
Figure 68b: Procedure Page_MS_MSC (sheet 2)
{width="6.691666666666666in" height="8.444444444444445in"}
Figure 68c: Procedure Page_MS_MSC (sheet 3)
{width="5.980555555555555in" height="7.231944444444444in"}
Figure 68c: Procedure Page_MS_MSC (sheet 4)
{width="6.691666666666666in" height="8.444444444444445in"}
Figure 69a: Procedure Search_For_MS_MSC (sheet 1)
{width="6.691666666666666in" height="8.444444444444445in"}
Figure 69b: Procedure Search_For_MS_MSC (sheet 2)
{width="6.691666666666666in" height="8.444444444444445in"}
Figure 69c: Procedure Search_For_MS_MSC (sheet 3)
{width="5.980555555555555in" height="7.231944444444444in"}
Figure 69d: Procedure Search_For_MS_MSC (sheet 4)
{width="6.691666666666666in" height="8.444444444444445in"}
Figure 70a: Procedure Complete_Call_In_MSC (sheet 1)
{width="6.691666666666666in" height="9.145138888888889in"}
Figure 70b: Procedure Complete_Call_In_MSC (sheet 2)
{width="6.691666666666666in" height="8.444444444444445in"}
Figure 70c: Procedure Complete_Call_In_MSC (sheet 3)
{width="6.691666666666666in" height="9.145138888888889in"}
Figure 70d: Procedure Complete_Call_In_MSC (sheet 4)
{width="6.691666666666666in" height="8.61875in"}
Figure 70e: Procedure Complete_Call_In_MSC (sheet 5)
{width="6.691666666666666in" height="8.444444444444445in"}
Figure 70f: Procedure Complete_Call_In_MSC (sheet 6)
{width="6.691666666666666in" height="9.145138888888889in"}
Figure 70g: Procedure Complete_Call_In_MSC (sheet 7)
{width="6.652777777777778in" height="8.152777777777779in"}
Figure 70h: Procedure Complete_Call_In_MSC (sheet 8)
{width="6.652777777777778in" height="8.152083333333334in"}
Figure 70i: Procedure Complete_Call_In_MSC (sheet 9)
{width="6.652777777777778in" height="8.152777777777779in"}
Figure 70j: Procedure Complete_Call_In_MSC (sheet 10)
{width="6.691666666666666in" height="8.61875in"}
Figure 70k: Procedure Complete_Call_In_MSC (sheet 11)
{width="6.652777777777778in" height="8.152083333333334in"}
Figure 71: Procedure Set_CLIP_Info_MSC
Figure 72: Void
{width="6.691666666666666in" height="8.444444444444445in"}
Figure 73: Procedure Establish_Terminating_TCH_If_Required
{width="6.652777777777778in" height="8.152083333333334in"}
Figure 74: Procedure Handle_AoC_MT_MSC
{width="6.652777777777778in" height="8.152083333333334in"}
Figure 75: Procedure Set_COL_Presentation_Indicator MSC
### 7.3.2 Functional requirements of VLR
#### 7.3.2.1 Process ICH_VLR
Sheet 1: if the MSRN received in the Send Info For Incoming Call is not
allocated or there is no IMSI record for the IMSI identified by the MSRN or
the MS is marked as \"Subscriber data dormant\" (e.g. due to super-charger),
this is treated as an unknown MSRN.
Sheet 1: the procedure CAMEL_ICH_VLR is specific to CAMEL phase 3 or later; it
is specified in 3GPP TS 23.078 [12]. If the VLR does not support CAMEL phase 3
or later, processing continues from the possible call of the procedure
CCBS_ICH_Set_CCBS_Call_Indicator. .
Sheet 1: If the MSRN is not allocated, \"GMSC supports MT Roaming Retry\"
takes \"No\" exit.
Sheet 1: If no IMSI record is found, the \" Subscriber data dormant\" check
takes the \"False\" exit.
Sheet 1: A VLR not supporting the flag \"Subscriber data dormant\" shall
behave as if the flag is set to false.
Sheet 1: the procedure CCBS_ICH_Set_CCBS_Call_Indicator is specific to CCBS;
it is specified in 3GPP TS 23.093 [23].
Sheet 1: the VLR derives the basic service required for the call according to
the rules defined in 3GPP TS 29.007 [30].
Sheet 1, sheet 2, sheet 5: the procedure CCBS_ICH_VLR_Report_Failure is
specific to CCBS; it is specified in 3GPP TS 23.093 [23].
Sheet 1, sheet 3: the procedure CCBS_ICH_Report_Not_Reachable is specific to
CCBS; it is specified in 3GPP TS 23.093 [23].
Sheet 2: this process communicates with the matching instance of the process
PRN_VLR, which is linked by the MSRN.
Sheet 2: the test \"Paging via SGSN possible\" takes the \"yes\" exit if:
\- the Gs interface is implemented; and
\- there is an association established for the MS between the MSC/VLR and the
SGSN.
Sheet 3: the test \"NDUB?\" takes the \"Yes\" exit if the Page MS negative
response or the Search for MS negative response had the value Busy Subscriber
(NDUB).
Sheet 3: the procedure Get_CW_Subscription_Info_VLR is specific to Call
Waiting. If the VLR does not support Call Waiting, processing continues from
the \"No\" exit of the test \"CW available?\".
Sheet 3: the procedure Get_CW_Subscription_Info_Multicall_VLR is specific to
Multicall; it is specified in 3GPP TS 23.135 [34]. If the VLR does not support
both Multicall and Call Waiting, processing continues from the \"No\" exit of
the test \"CW available?\".
Sheet 3: the VLR uses the basic service returned in the Page MS negative
response or the Search for MS negative response Busy Subscriber (More calls
possible) to determine whether call waiting is available.
Sheet 3: the procedure Get_LI_Subscription_Info_MT_VLR is specific to CLIP and
COLR. If the VLR supports neither CLIP nor COLR, the procedure call is
omitted.
Sheet3: the procedure Get_AoC_Subscription_Info_VLR is specific to AoC; it is
specified in subclause 7.1.2.15.
Sheet 3 sheet 6: the procedure CLI_ICH_VLR_Add_CLI is specific to Enhanced CLI
Handling. It is specified in 3GPP TS 23.081 [14].
Sheet 3: the procedure CCBS_ICH_Handle_NDUB is specific to CCBS; it is
specified in 3GPP TS 23.093 [23]. If the VLR does not support CCBS, processing
continues from the \"Forward\" exit of the test \"Result\".
Sheet 3: the procedure Process_Access_Request_VLR is specified in subclause
7.1.2.2.
Sheet 3: the output signal Page MS towards the SGSN includes the Location area
identity parameter.
Sheet 3: if the VLR does not support CUG, handling continues from the \"No\"
exit of the test \"CUG info present?\".
Sheet 4, sheet 6: the procedure CAMEL_CHECK_SII2_CDTI is specific to CAMEL
Phase 3 or later; it is specified in 3GPP TS 23.078 [12]. If the GMSC does not
support CAMEL Phase 3 or later, processing continues from the \"Yes\" exit of
the test \"Result = Pass?\".
Sheet 5, sheet 6: the procedure CD_Authorization is specific to Call
Deflection, it is specified in 3GPP TS 23.072 [11]. If the VLR does not
support Call Deflection, processing continues from the \"Yes\" exit of the
test \"Result=Aborted?\".
Sheet 5, sheet 6: the procedure CCBS_ICH_Handle_UDUB is specific to CCBS; it
is specified in 3GPP TS 23.093 [23].
Sheet 6: the test \"NDUB?\" is executed only if the VLR supports CCBS. If the
VLR does not support CCBS, processing continues from connector 5.
Sheet 7: the procedure CCBS_ICH_Set_CCBS_Target is specific to CCBS; it is
specified in 3GPP TS 23.093 [23].
Sheet 7: the procedure Handle_CFNRc is specified in subclause 7.2.2.11.
Sheet 8: the procedure Forward_CUG_Check is specific to CUG; it is specified
in subclause 7.2.2.6. If the VLR does not support CUG, processing continues
from the \"Yes\" exit of the test \"Result=Call allowed?\".
Sheet 8: the procedures CAMEL_O_CSI_Check_VLR, and CAMEL_D_CSI_Check_VLR are
specific to CAMEL phase 3 or later; they are specified in 3GPP TS 23.078 [12].
#### 7.3.2.2 Void
#### 7.3.2.3 Procedure Search_For_MS_VLR
The test \"Paging via SGSN possible\" takes the \"yes\" exit if:
\- the Gs interface is implemented; and
\- the VLR configuration requires paging via the SGSN during VLR restoration.
The output signal Page MS towards the SGSN omits the Location area identity
parameter. It is sent to every SGSN to which the VLR is connected.
#### 7.3.2.4 Procedure Get_CW_Subscription_Info_VLR
The VMSC may abort the transaction with the VLR while a response is awaited
from the process MAF013. The message is saved for processing after return from
the procedure.
#### 7.3.2.5 Procedure Get_LI_Subscription_Info_MT_VLR
The VMSC may abort the transaction with the VLR while a response is awaited
from the process CLIP_MAF001 or the process COLR_MAF040. The message is saved
for processing after return from the procedure.
#### 7.3.2.6 Procedure Handle_CFB
The test \"Normal call busy\" refers to the value of the indicator returned by
the process MAF008.
The procedure CAMEL_CHECK_SII2_CDTI is specific to CAMEL Phase 3 or later; it
is specified in 3GPP TS 23.078 [12]. If the GMSC does not support CAMEL Phase
3 or later, processing continues from the \"Yes\" exit of the test \"Result =
Pass?\".
#### 7.3.2.7 Procedure Handle_CFNRy
The test \"Normal call\" refers to the value of the indicator returned by the
process MAF009.
{width="6.691666666666666in" height="8.444444444444445in"}
Figure 76a: Process ICH_VLR (sheet 1)
{width="6.691666666666666in" height="8.444444444444445in"}
Figure 76b: Process ICH_VLR (sheet 2)
{width="5.980555555555555in" height="7.5472222222222225in"}
Figure 76c: Process ICH_VLR (sheet 3)
{width="6.691666666666666in" height="8.794444444444444in"}
Figure 76d: Process ICH_VLR (sheet 4)
{width="6.691666666666666in" height="8.444444444444445in"}
Figure 76e: Process ICH_VLR (sheet 5)
{width="6.691666666666666in" height="8.444444444444445in"}
Figure 76f: Process ICH_VLR (sheet 6)
{width="6.691666666666666in" height="8.444444444444445in"}
Figure 76g: Process ICH_VLR (sheet 7)
{width="6.691666666666666in" height="8.444444444444445in"}
Figure 76h: Process ICH_VLR (sheet 8)
Figure 77: Void
{width="6.691666666666666in" height="8.444444444444445in"}
Figure 78: Procedure Search_For_MS_VLR
{width="6.652777777777778in" height="8.152083333333334in"}
Figure 79: Procedure Get_CW_Subscription_Info_VLR
{width="6.652777777777778in" height="8.152083333333334in"}
Figure 80: Procedure Get_LI_Subscription_Info_MT_VLR
{width="6.691666666666666in" height="8.444444444444445in"}
Figure 81: Procedure Handle_CFB
{width="6.652777777777778in" height="8.152083333333334in"}
Figure 82: Procedure Handle_CFNRy
## 7.4 Subs_FSM
### 7.4.1 Functional requirements of serving MSC
#### 7.4.1.1 Process Subs_FSM
One instance of the process Subs_FSM runs for each subscriber who is involved
in at least one call. It monitors the state of any ongoing calls for that
subscriber. The individual call control processes OCH_MSC and ICH_MSC submit
supplementary service requests received from the MS to the process Subs_FSM,
which then responds appropriately.
The process Subs_FSM interacts with the processes OCH_MSC and ICH_MSC as
specified in subclauses 7.1.1 and 7.3.1.
Sheet 5, sheet 6, sheet 7, sheet 8, sheet 9, sheet 11, sheet 12, sheet 15:
processing on this page will occur only if the VMSC supports HOLD.
Sheet 8: the procdure Handle_MPTY is specific to MPTY; it is specified in 3GPP
TS 23.084 [17].
Sheet 8: the procedure Handle_ECT_Active is specific to ECT; it is specified
in 3GPP TS 23.091 [22].
Sheet 10: processing on this page will occur only if the VMSC supports
Multicall.
Sheet 12: the procedure Handle_ECT_Alerting is specific to ECT; it is
specified in 3GPP TS 23.091 [22].
Sheet 13, sheet 14: processing on this page will occur only if the VMSC
supports both HOLD and Multicall.
##### 7.4.1.1.1 Macro Check_Ongoing_Calls
##### 7.4.1.1.2 Macro Update_Non_Speech_Calls_Status
##### 7.4.1.1.3 Macro Increment_Call_Counter
##### 7.4.1.1.4 Macro Decrement_Call_Counter
{width="6.691666666666666in" height="8.09375in"}
Figure 83a: Process Subs_FSM (sheet 1)
{width="6.691666666666666in" height="8.794444444444444in"}
Figure 83b: Process Subs_FSM (sheet 2)
{width="6.691666666666666in" height="8.09375in"}
Figure 83c: Process Subs_FSM (sheet 3)
{width="6.691666666666666in" height="8.09375in"}
Figure 83d: Process Subs_FSM (sheet 4)
{width="6.691666666666666in" height="8.09375in"}
Figure 83e: Process Subs_FSM (sheet 5)
{width="6.691666666666666in" height="8.09375in"}
Figure 83f: Process Subs_FSM (sheet 6)
{width="6.691666666666666in" height="8.09375in"}
Figure 83g: Process Subs_FSM (sheet 7)
{width="6.691666666666666in" height="8.794444444444444in"}
Figure 83h: Process Subs_FSM (sheet 8)
{width="6.691666666666666in" height="8.09375in"}
Figure 83i: Process Subs_FSM (sheet 9)
{width="6.691666666666666in" height="8.09375in"}
Figure 83j: Process Subs_FSM (sheet 10)
{width="6.686111111111111in" height="8.002777777777778in"}
Figure 83k: Process Subs_FSM (sheet 11)
{width="6.691666666666666in" height="8.09375in"}
Figure 84l: Process Subs_FSM (sheet 12)
{width="6.691666666666666in" height="8.09375in"}
Figure 84m: Process Subs_FSM (sheet 13)
{width="6.691666666666666in" height="8.09375in"}
Figure 84n: Process Subs_FSM (sheet 14)
{width="6.691666666666666in" height="8.09375in"}
Figure 84o: Process Subs_FSM (sheet 14)
{width="6.691666666666666in" height="8.09375in"}
Figure 84p: Process Subs_FSM (sheet 14)
{width="6.691666666666666in" height="8.09375in"}
Figure 84q: Process Subs_FSM (sheet 14)
{width="6.691666666666666in" height="8.09375in"}
Figure 84r: Process Subs_FSM (sheet 14)
{width="6.691666666666666in" height="8.444444444444445in"}
Figure 85: Macro Check_Ongoing_Calls
{width="6.691666666666666in" height="8.444444444444445in"}
Figure 86: Macro Update_Non_Speech_Calls_Status
{width="6.691666666666666in" height="8.444444444444445in"}
Figure 87: Macro Increment_Call_Counter
{width="6.691666666666666in" height="8.444444444444445in"}
Figure 88: Macro Decrement_Call_Counter
## 7.5 TO call
### 7.5.1 Functional requirements of inter-connecting MSC
#### 7.5.1.1 Process TO_MSC
Sheet 1: the procedure CAMEL_TOC_INIT is specific to CAMEL; it is specified in
3GPP TS 23.078 [12]. If the MSC does not support CAMEL, processing continues
from the \"Pass\" exit of the test \"Result=?\". The procedure call formal
parameter "First" or "NotFirst" indicates whether the procedure was called
earlier in the same call.
Sheet 1, sheet 4: the procedure CAMEL_TOC_Dialled_Services is specific to
CAMEL phase 3 or later; it is specified in 3GPP TS 23.078 [12]. If the MSC
does not support CAMEL trunk triggering, processing continues from the
\"Pass\" exit of the test \"Result?\". The procedure call formal parameter
"First" or "NotFirst" indicates whether the procedure was called earlier in
the same call.
Sheet 1: the procedure MOBILE_NUMBER_PORTABILITY_IN_OQoD is specific to Mobile
Number Portability; it is specified in 3GPP TS 23.066 [10].
Sheet 1, sheet 2, sheet 3: the procedure CAMEL_Store_Destination_Address is
specific to CAMEL phase 3 or later; it is specified in 3GPP TS 23.078 [12].
Sheet 1, sheet 4: the procedure CAMEL_OCH_MSC_DISC3 is specific to CAMEL phase
1; it is specified in 3GPP TS 23.078 [12].
Sheet 1, sheet2, sheet 4: the procedure CAMEL_OCH_MSC_DISC4 is specific to
CAMEL Phase 2 or later; it is specified in 3GPP TS 23.078 [12].
Sheet 1, sheet 7: the procedure CAMEL_MT_CF_LEG1_MSC is specific to CAMEL
phase 4 or later; it is specified in 3GPP TS 23.078 [12].
Sheet 1, sheet 2: The variable "Return_Place" indicates at which detection
point the additional digit collection is.
Sheet 1, sheet 2: The "inter-digit timer" is a MSC internal timer to wait for
additional dialling from the incoming side. At the expiry of the timer, the
MSC/gsmSSF may report digits to the gsmSCF (if the event detection point is
armed). This timer is used for the SDL modelling purposes only and it may not
present the actual implementations.
Sheet 2: "Number_of_Digits" is the Collected_Info specific reporting
criterion. The gsmSCF specifies the criterion. The process CS_gsmSSF sends the
parameter to the TO_MSC process.
Sheet 2: "ST digit" is the ISUP value for a digit indicating that the Called
Party Number is complete.
Sheet 3: the procedures CAMEL_Start_TNRy and CAMEL_Stop TNRy are specific to
CAMEL phase 2 or later; they are specified in 3GPP TS 23.078 [12].
Sheet 3: the procedure CAMEL_CF_MSC_ANSWER is specific to CAMEL; it is
specified in 3GPP TS 23.078 [12]. If the MSC does not support CAMEL,
processing continues from the \"Pass\" exit of the test \"Result?\".
Sheet 3: the procedure UUS_MSC_Clear_UUS is specific to UUS; it is specified
in 3GPP TS 23.087 [20].
Sheet 3: the procedure CAMEL_CF_MSC_ALERTING is specific to CAMEL phase 4 or
later; it is specifed in 3GPP TS 23.078 [12]. If the GMSC does not support
CAMEL phase 4 or later, processing continues from the \"Pass\" exit of the
test \"Result?\".
Sheet 4: the procedure CAMEL_Stop_TNRy is specific to CAMEL phase 2 or later;
it is specified in 3GPP TS 23.078 [12].
Sheet 4: the processing in the branch beginning with the Int_O_Release input
will occur only if the MSC supports CAMEL.
Sheet 5: the input signal TNRy expired and all the subsequent processing are
specific to CAMEL phase 2 or later, and will occur only if the GMSC supports
CAMEL phase 2 or later. The procedure CAMEL_OCH_MSC2 is specified in 3GPP TS
23.078 [12].
Sheet 6: the procedure CAMEL_OCH_MSC_DISC1 is specific to CAMEL; it is
specified in 3GPP TS 23.078 [12]. If the MSC does not support CAMEL,
processing continues from the \"No\" exit of the test \"Result=CAMEL
handling?\".
Sheet 6: the procedure CAMEL_OCH_MSC_DISC2 is specific to CAMEL; it is
specified in 3GPP TS 23.078 [12]. If the MSC does not support CAMEL,
processing continues from the \"No\" exit of the test \"Result=Reconnect?\" .
Sheet 6: the processing in the branch beginning with the Int_O_Release input
will occur only if the MSC supports CAMEL.
Sheet 6: after the process TO_MSC has sent an IAM to the forwarded-to
exchange, it acts as a relay for messages received from the parent process and
the forwarded-to exchange.
Sheet 7: the process CAMEL_MT_CF_LEG2_MSC is specific to CAMEL phase 4 or
later; it is specified in 3GPP TS 23.078 [12].
{width="5.9944444444444445in" height="7.660416666666666in"}
Figure 7.5.1a: Process TO_MSC (sheet 1)
{width="6.686805555555556in" height="7.5569444444444445in"}
Figure 7.5.1b: Process TO_MSC (sheet 2)
{width="5.992361111111111in" height="7.561805555555556in"}
Figure 7.5.1c: Process TO_MSC (sheet 3)
{width="5.998611111111111in" height="6.963888888888889in"}
Figure 7.5.1d: Process TO_MSC (sheet 4)
{width="5.997222222222222in" height="7.504861111111111in"}
Figure 7.5.1e: Process TO_MSC (sheet 5)
{width="5.992361111111111in" height="6.793055555555555in"}
Figure 7.5.1f: Process TO_MSC (sheet 6)
{width="5.992361111111111in" height="7.247916666666667in"}
Figure 7.5.1g: Process TO_MSC (sheet 7)
# 8 Contents of messages
This clause specifies the content of each message shown in clauses 5 and 7,
except for the following messages, which are not specific to call handling:
On the D interface (VLR-HLR):
\- Abort;
\- Activate Trace Mode;
\- Authentication Failure Report;
\- Insert Subscriber Data;
\- Send Authentication Info;
\- Send Authentication Info ack;
\- Send Authentication Info negative response;
In the tables which follow, information elements are shown as mandatory (M),
conditional (C) or optional (O). A mandatory information element shall always
be present. A conditional information element shall be present if certain
conditions are fulfilled; if those conditions are not fulfilled it shall be
absent. An optional element may be present or absent, at the discretion of the
application at the sending entity.
Some messages which are defined in this clause are used for other services or
features. The specifications (referred to below as \"derived specifications\")
for those services or features may simply refer to the present document for
the definition of the message; in this case the requirements for the presence
of each information element are as defined in this clause. If the
specification for a service or feature requires information elements in a
message additional to those specified in this clause, the requirements for the
presence of the additional information elements are specified in the relevant
specification. If the specification for a service or feature has different
requirements for the presence of an information element in a message which is
specified in this clause, then the following principles apply:
\- If the information element is shown as mandatory in this clause, it shall
always be present.
\- If the information element is shown as conditional or optional in this
clause, but mandatory in the derived specification, it shall always be present
in the context of the service or feature defined in the derived specification.
\- If the information element is shown as conditional or optional in this
clause, and the conditions in the derived specification require the
information element to be present, it shall be present even if the conditions
in this clause do not require it to be present.
## 8.1 Messages on the B interface (MSC-VLR)
### 8.1.1 Abort
The following information element is required:
* * *
Information element name Required Description Abort reason M Indicates the
reason for the procedure being aborted.
* * *
### 8.1.2 Authenticate
The following information elements are required for authentication of a UMTS
UE:
* * *
Information element name Required Description RAND(I) M Random number
challenge to be sent to the MS (3GPP TS 33.102 [32]) AUTN(I) M Authentication
token to be sent to the MS (3GPP TS 33.102 [32])
* * *
The following information elements are required for authentication of a GSM
MS:
* * *
Information element name Required Description RAND M Random number challenge
to be sent to the MS (3GPP TS 43.020 [1]) CKSN M Cipher key sequence number to
be sent to the MS (3GPP TS 43.020 [1])
* * *
### 8.1.3 Authenticate ack
The following information element is required for authentication of a UMTS UE:
* * *
Information element name Required Description RES(I) M Result returned by the
MS (3GPP TS 33.102 [32])
* * *
The following information element is required for authentication of a GSM MS:
* * *
Information element name Required Description SRES M Signature result returned
by the MS (3GPP TS 43.020 [1])
* * *
### 8.1.4 Authenticate negative response
The negative response information element can take the following value:
  * wrong network signature.
### 8.1.5 Call arrived
This message contains no information elements.
### 8.1.6 Check IMEI
This message contains no information elements.
### 8.1.7 Check IMEI ack
The following information element is required:
* * *
Information element name Required Description Equipment status M Indicates
whether the ME is black-listed, grey-listed or white-listed
* * *
### 8.1.8 Check IMEI negative response
The negative response information element can take the following values:
\- System failure;
\- Unknown equipment.
### 8.1.9 Complete Call
The following information elements are required:
* * *
Information element name Required Description MSISDN C MSISDN of the MS for
which the Complete Call is sent. Shall be present for an ordinary MO call, for
an MT call and for an emergency call when the MS is registered in the VLR;
otherwise shall be absent. IMEI C IMEI of the mobile for which the Complete
Call is sent. Shall be present for an emergency call when the mobile is
identified only by its IMEI; otherwise shall be absent. Category C Category of
the MS for which the Complete Call is sent. Shall be present for an ordinary
MO call and for an emergency call when the MS is registered in the VLR;
otherwise shall be absent. PLMN bearer capability C Shall be present for an MT
call according to the rules defined in 3GPP TS 29.007 [30]. ISDN bearer
capability C Shall be present for an MT call if it was received in the Provide
Roaming Number; otherwise shall be absent. ISDN low layer compatibility C
Shall be present for an MT call if it was received in the Provide Roaming
Number; otherwise shall be absent. ISDN high layer compatibility C Shall be
present for an MT call if it was received in the Provide Roaming Number;
otherwise shall be absent. CLIP provision C Indicates that CLIP is
provisioned. Shall be present for an MT call if CLIP is provisioned; otherwise
shall be absent. CLIR override provision C Indicates that the CLIR override
subscription option of CLIP is provisioned. Shall be present for an MT call if
CLIP is provisioned with the CLIR override subscription option and the MS is
registered in the HPLMN country; otherwise shall be absent. CLIR provision C
Indicates that CLIR is provisioned. Shall be present for an MO call if CLIR is
provisioned; otherwise shall be absent. CLIR mode C Indicates the mode in
which CLIR is provisioned: permanent, temporary (default presentation allowed)
or temporary (default presentation restricted). Shall be present for an MO
call if CLIR is provisioned; otherwise shall be absent. COLP provision C
Indicates that COLP is provisioned. Shall be present for an MO call if COLP is
provisioned; otherwise shall be absent. COLR override provision C Indicates
that the COLR override subscription option of COLP is provisioned. Shall be
present for an MO call if COLP is provisioned with the COLR override
subscription option and the MS is registered in the HPLMN country; otherwise
shall be absent. COLR provision C Indicates that COLR is provisioned. Shall be
present for an MT call if COLR is provisioned; otherwise shall be absent. No
Reply Condition Timer C Value of timer to be used to determine the No
subscriber reply condition. Shall be present for an MT call if the Call
Forwarding on No Reply service is active and operative; otherwise shall be
absent. CUG index C For the definition of this IE, see 3GPP TS 23.085 [18].
May be present (as a network operator option) for an ordinary MO call if the
call is a CUG call; shall be present for an MT call if the call is a CUG call;
otherwise shall be absent. CUG interlock C For the definition of this IE, see
3GPP TS 23.085 [18]. Shall be present for an ordinary MO call if the call is a
CUG call; otherwise shall be absent. CUG outgoing access C For the definition
of this IE, see 3GPP TS 23.085 [18]. Shall be present for an ordinary MO call
if the call is a CUG call with outgoing access; otherwise shall be absent.
Advice of Charge provision C Indicates whether Advice of Charge (Information)
or Advice of Charge (Charging) is provisioned. Shall be present for an
ordinary MO call or an MT call if Advice of Charge is provisioned; otherwise
shall be absent. Alerting Pattern C Shall be present for an MT call if it was
received in the Provide Roaming Number and if the feature is supported by the
MSC/VLR; otherwise shall be absent. NAEA preferred Carrier Id O The preferred
carrier identity identifying the carrier to be used to route the interexchange
call if the call requires routing via an interexchange carrier. This parameter
may be included at the discretion of the VLR operator.
* * *
### 8.1.10 Complete Call ack
This message contains no information elements.
### 8.1.11 Complete Call negative response
The negative response information element can take the following values:
\- Absent subscriber;
\- Busy subscriber;
\- No subscriber reply;
\- Radio congestion.
### 8.1.12 Forward New TMSI
The following information element is required:
* * *
Information element name Required Description TMSI M TMSI to be sent to the
MS.
* * *
### 8.1.13 Forward New TMSI ack
This message contains no information elements.
### 8.1.14 Forward New TMSI negative response
The negative response information element can take the following value:
\- TMSI reallocation failure.
### 8.1.15 Obtain Subscriber Info
The following information elements are required:
* * *
Information element name Required Description IMSI M IMSI of the MS for which
information is required. Subscriber state requested C Indicates that the VLR
requires state information for the MS. Shall be present if state information
is required; otherwise shall be absent.
* * *
### 8.1.16 Obtain Subscriber Info ack
The following information elements are required:
* * *
Information element name Required Description Subscriber state C Indicates
whether the MS is busy (i.e. engaged on a circuit-switched call) or assumed
idle. Shall be present if the VLR requested state information; otherwise shall
be absent.
* * *
### 8.1.17 Page MS
The following information elements are required:
+--------------------------+----------+----------------------------+ | Information element name | Required | Description | +--------------------------+----------+----------------------------+ | IMSI | M | IMSI of the MS to be | | | | paged. | +--------------------------+----------+----------------------------+ | Location area ID | M | Location area in which the | | | | MS is to be paged. | +--------------------------+----------+----------------------------+ | Page type | M | Indicates whether the | | | | paging is for a | | | | circuit-switched call, MT | | | | SMS delivery, SS activity | | | | or Active Location | | | | Retrieval. | +--------------------------+----------+----------------------------+ | Requested information | C | Indicates the information | | | | requested by the VLR -- | | | | one or more of: | | | | | | | | - Location; | | | | | | | | - MS classmark; | | | | | | | | - IMEI. | | | | | | | | Shall be present if the | | | | Page type is Active | | | | Information Retrieval; | | | | otherwise shall be absent. | +--------------------------+----------+----------------------------+ | Paging via SGSN possible | C | Indicates that paging via | | | | the SGSN is possible. | | | | Shall be present if the | | | | VLR determines that the MS | | | | can be paged via the SGSN; | | | | otherwise shall be absent. | +--------------------------+----------+----------------------------+ | TMSI | O | TMSI to be broadcast to | | | | identify the MS. | +--------------------------+----------+----------------------------+ | Call Priority | O | This parameter indicates | | | | the eMLPP priority of the | | | | call (see 3GPP TS 23.067 | | | | [39]). This parameter | | | | should be present if the | | | | VLR supports the eMLPP | | | | feature and if the Call | | | | Priority was received in | | | | the | | | | MAP | | | | _PROVIDE_ROAMING_NUMBER | | | | request or in the MAP | | | | PROVIDE_SUBSCRIBER_INFO | | | | request. | +--------------------------+----------+----------------------------+
### 8.1.18 Page MS ack
The following information elements are required:
* * *
Information element name Required Description Location area ID M Location area
in which the MS responded to the page. Serving cell ID M Identity of the cell
in which the served subscriber is located. Shall be present if the MS uses GSM
radio access; otherwise shall be absent. Service area ID C Service area
identity of the cell in which the served subscriber is located. Shall be
present if the MS uses UMTS radio access; otherwise shall be absent. MS
classmark M MS classmark 2 as defined in 3GPP TS 24.008 [26]. IMEI (with
software version) C IMEISV as defined in 3GPP TS 23.003 [5]. Shall be present
if the IMEI was requested in the Page MS message and the MSC retrieved it from
the MS; otherwise shall be absent.
* * *
### 8.1.19 Page MS negative response
The negative response information element can take the following values:
\- Absent subscriber;
\- Busy subscriber (More calls possible);
\- Busy subscriber (NDUB);
\- System failure;
\- Unknown location area ID.
The Page MS negative response Busy subscriber (More calls possible) also
indicates the basic service which applies for the established call.
### 8.1.20 Page MS via SGSN
The following information elements are required:
* * *
Information element name Required Description IMSI M IMSI of the MS to be
paged. eMLPP priority O Circuit-switched paging priority. TMSI O TMSI to be
broadcast to identify the MS. Channel type O Type of channel required for the
call.
* * *
### 8.1.21 Process Access Request
The following information elements are required:
* * *
Information element name Required Description CM service type M Indicates the
type of access required: normal MO call, emergency call or page response.
Other values (short message service and SS request) defined for this IE are
not considered in the present document. Access connection status M Indicates
whether or not the connection to the MS is ciphered and whether or not it is
authenticated. Current location area ID M Identity of the location area from
which the access request was received. Service area ID C Identity of the
service area (for UMTS access) in use by the served subscriber. Shall be
present for UMTS access; otherwise shall be absent. Serving cell ID C Identity
of the cell (for GSM access) in use by the served subscriber. Shall be present
for GSM access; otherwise shall be absent. IMSI C IMSI of the MS requesting
the access. For normal MO call or page response, one of IMSI or TMSI shall be
present. For emergency call, one of IMSI, TMSI or IMEI shall be present. TMSI
C TMSI of the MS requesting the access. For normal MO call or page response,
one of IMSI or TMSI shall be present. For emergency call, one of IMSI, TMSI or
IMEI shall be present. IMEI C IMEI of the MS requesting the access. For normal
MO call or page response, one of IMSI or TMSI shall be present. For emergency
call, one of IMSI, TMSI or IMEI shall be present. CKSN C Cipher key sequence
number of the MS requesting the access. Shall be present if TMSI is present;
otherwise shall be absent.
* * *
### 8.1.22 Process Access Request ack
The following information elements are required:
* * *
Information element name Required Description IMSI C IMSI of the MS requesting
the access. For normal MO call or page response, shall be present. For
emergency call, one of IMSI or IMEI shall be present. IMEI C IMEI of the MS
requesting the access. For normal MO call or page response, shall be absent.
For emergency call, one of IMSI or IMEI shall be present. MSISDN O MSISDN of
the MS requesting the access.
* * *
### 8.1.23 Process Access Request negative response
The negative response information element can take the following values:
\- Roaming not allowed;
\- System failure;
\- Unidentified subscriber;
\- Illegal equipment;
\- Illegal subscriber.
### 8.1.24 Process Call Waiting
The following information elements are required:
* * *
Information element name Required Description MSISDN M MSISDN of the MS for
which the Process Call Waiting is sent. PLMN bearer capability C Shall be
present according to the rules defined in 3GPP TS 29.007 [30]. ISDN bearer
capability C Shall be present if it was received in the Provide Roaming Number
for the waiting call; otherwise shall be absent. ISDN low layer compatibility
C Shall be present if it was received in the Provide Roaming Number for the
waiting call; otherwise shall be absent. ISDN high layer compatibility C Shall
be present if it was received in the Provide Roaming Number for the waiting
call; otherwise shall be absent. CLIP provision C Indicates that CLIP is
provisioned. Shall be present if CLIP is provisioned; otherwise shall be
absent. CLIR override provision C Indicates that the CLIR override
subscription option of CLIP is provisioned. Shall be present if CLIP is
provisioned with the CLIR override subscription option and the MS is
registered in the HPLMN country; otherwise shall be absent. COLR provision C
Indicates that COLR is provisioned. Shall be present if COLR is provisioned;
otherwise shall be absent. No Reply Condition Timer C Value of timer to be
used to determine the No subscriber reply condition. Shall be present if the
Call Forwarding on No Reply service is active and operative; otherwise shall
be absent. CUG index C For the definition of this IE, see 3GPP TS 23.085 [18].
Shall be present if the waiting call is a CUG call; otherwise shall be absent.
Advice of Charge provision C Indicates whether Advice of Charge (Information)
or Advice of Charge (Charging) is provisioned. Shall be present if Advice of
Charge is provisioned; otherwise shall be absent.
* * *
### 8.1.25 Process Call Waiting ack
This message contains no information elements.
### 8.1.26 Process Call Waiting negative response
The negative response information element can take the following values:
\- Busy subscriber (UDUB);
\- Busy subscriber (NDUB);
\- No subscriber reply.
### 8.1.27 Provide IMEI
This message contains no information elements.
### 8.1.28 Provide IMEI ack
The following information element is required:
* * *
Information element name Required Description IMEI M IMEISV (as defined in
3GPP TS 23.003 [5]) of the ME involved in the access request.
* * *
### 8.1.29 Provide IMSI
This message contains no information elements.
### 8.1.30 Provide IMSI ack
The following information element is required:
* * *
Information element name Required Description IMSI M IMSI of the MS involved
in the access request.
* * *
### 8.1.31 Radio connection released
This message contains no information elements.
### 8.1.32 Search For MS
The following information elements are required:
+--------------------------+----------+----------------------------+ | Information element name | Required | Description | +--------------------------+----------+----------------------------+ | IMSI | M | IMSI of the MS to be paged | | | | in all location areas. | +--------------------------+----------+----------------------------+ | Page type | M | Indicates whether the | | | | paging is for a | | | | circuit-switched call, MT | | | | SMS delivery, SS activity | | | | or Active Location | | | | Retrieval. | +--------------------------+----------+----------------------------+ | Requested information | C | Indicates the information | | | | requested by the VLR -- | | | | one or more of: | | | | | | | | - Location; | | | | | | | | - MS classmark; | | | | | | | | - IMEI. | | | | | | | | Shall be present if the | | | | Page type is Active | | | | Information Retrieval; | | | | otherwise shall be absent. | +--------------------------+----------+----------------------------+ | Paging via SGSN possible | C | Indicates that paging via | | | | the SGSN is possible. | | | | Shall be present if the | | | | VLR determines that the MS | | | | can be paged via the SGSN; | | | | otherwise shall be absent. | +--------------------------+----------+----------------------------+ | TMSI | O | TMSI to be broadcast to | | | | identify the MS. | +--------------------------+----------+----------------------------+ | Paging area | O | May be present if the | | | | Paging type is circuit | | | | switched call, if the | | | | Paging Area function is | | | | supported and if the | | | | paging area is available; | | | | otherwise it shall be | | | | absent. It indicates the | | | | set of Location Areas in | | | | which the MS is to be | | | | paged on the A interface | | | | if Location area ID is not | | | | known in VLR. | +--------------------------+----------+----------------------------+ | Call Priority | O | This parameter indicates | | | | the eMLPP priority of the | | | | call (see 3GPP TS 23.067 | | | | [39]). This parameter | | | | should be present if the | | | | VLR supports the eMLPP | | | | feature and if the Call | | | | Priority was received in | | | | the | | | | MAP | | | | _PROVIDE_ROAMING_NUMBER | | | | request or in the MAP | | | | PROVIDE_SUBSCRIBER_INFO | | | | request. | +--------------------------+----------+----------------------------+
### 8.1.33 Search For MS ack
The following information element is required:
* * *
Information element name Required Description Location area ID M Location area
in which the MS responded to the page. Serving cell ID C Identity of the cell
in which the served subscriber is located. Shall be present if the MS uses GSM
radio access; otherwise shall be absent. Service area ID C Service area
identity of the cell in which the served subscriber is located. Shall be
present if the MS uses UMTS radio access; otherwise shall be absent. MS
classmark M MS classmark 2 as defined in 3GPP TS 24.008 [26]. IMEI (with
software version) C IMEISV as defined in 3GPP TS 23.003 [5]. Shall be present
if the IMEI was requested in the Page MS message and the MSC retrieved it from
the MS; otherwise shall be absent.
* * *
### 8.1.34 Search For MS negative response
The negative response information element can take the following values:
\- Absent subscriber;
\- Busy subscriber (More calls possible);
\- Busy subscriber (NDUB);
\- System failure.
The Search For MS negative response Busy subscriber (More calls possible) also
indicates the basic service which applies for the established call.
### 8.1.35 Search for MS via SGSN
The following information elements are required:
* * *
Information element name Required Description IMSI M IMSI of the MS to be
paged. eMLPP priority O Circuit-switched paging priority. TMSI O TMSI to be
broadcast to identify the MS. Channel type O Type of channel required for the
call.
* * *
### 8.1.36 Send Info For Incoming Call
The following information elements are required:
* * *
Information element name Required Description MSRN M Mobile Station Roaming
Number received in the IAM. Bearer service C Bearer service required for the
MT call. Shall be present if the MSC was able to derive a bearer service from
ISDN BC/LLC/HLC information received in the IAM; otherwise shall be absent.
Teleservice C Teleservice required for the MT call. Shall be present if the
MSC was able to derive a teleservice from ISDN BC/LLC/HLC information received
in the IAM; otherwise shall be absent. Dialled number C Number dialled by the
calling subscriber. Shall be present if it was received in the IAM; otherwise
shall be absent. Number of forwarding C Number of times the incoming call has
already been forwarded. Shall be present if it was received in the IAM;
otherwise shall be absent. CUG interlock C For the definition of this IE, see
3GPP TS 23.085 [18]. Shall be present if it was received in the IAM; otherwise
shall be absent. CUG outgoing access C For the definition of this IE, see 3GPP
TS 23.085 [18]. Shall be present if it was received in the IAM; otherwise
shall be absent.
* * *
### 8.1.37 Send Info For Incoming Call ack
The following information elements are required:
* * *
Information element name Required Description IMSI M IMSI of the B subscriber.
Forwarded-to number C E.164 number of the C subscriber. Shall be present if
the call is to be forwarded other than for MT roaming retry reason. Forwarding
reason C Indication of why the call has been forwarded (on call deflection, on
mobile subscriber busy, on mobile subscriber not reachable or on no subscriber
reply). Shall be present if the call is to be forwarded other than for MT
roaming retry reason. Notification to calling party C Indication of whether
the calling party is to be notified that the call has been forwarded. Shall be
present if the call is to be forwarded other than for MT roaming retry reason.
Notification to forwarding party C Indication of whether the forwarding party
is to be notified that the call has been forwarded. Shall be present if the
call is to be forwarded on mobile subscriber busy or on no subscriber reply;
otherwise shall be absent. Forwarded-to subaddress C Subaddress of the C
subscriber (see 3GPP TS 23.003 [5]). Shall be present if a forwarded-to
subaddress is stored in the VLR in association with the forwarded-to number;
otherwise shall be absent. Redirecting presentation C Indication of whether
the MSISDN of B subscriber shall be presented to the C subscriber. Shall be
present if the call is to be forwarded, otherwise shall be absent. MSISDN C
E.164 number which identifies the B subscriber. It will be used to create the
redirecting number presented to the C subscriber. Shall be present if the call
is to be forwarded, otherwise shall be absent. CUG interlock C For the
definition of this IE, see 3GPP TS 23.085 [18]. Shall be present if the VLR
has determined that the forwarded call is to be treated as a CUG call in
accordance with the rules in 3GPP TS 23.085 [18], otherwise shall be absent.
CUG outgoing access C For the definition of this IE, see 3GPP TS 23.085 [18].
Shall be present if the VLR has determined that the forwarded call is to be
treated as a CUG call with outgoing access in accordance with the rules in
3GPP TS 23.085 [18], otherwise shall be absent. [NAEA preferred Carrier
Id]{.underline} O The preferred carrier identity identifying the carrier to be
used to route the interexchange call if the forwarded call requires routing
via an interexchange carrier. This parameter may be included at the discretion
of the VLR operator. MT Roaming Retry Indicator C Indication that the call is
forwarded for MT roaming retry. All other forwarding parameters are not
relevant if this IE is present.
* * *
### 8.1.38 Send Info For Incoming Call negative response
The negative response information element can take the following values:
\- Absent subscriber;
\- Busy subscriber;
\- CUG reject (Called party SS interaction violation);
\- Forwarding violation;
\- Impossible call completion;
\- No subscriber reply;
\- System failure;
\- Unallocated roaming number;
### 8.1.39 Send Info For Outgoing Call
The following information elements are required:
* * *
Information element name Required Description Called number M E.164 number of
the call destination. Bearer service C Bearer service required for the MO
call, derived from the PLMN bearer capability information received in the set-
up request from the MS. One of bearer service or teleservice shall be present.
Teleservice C Teleservice required for the MO call, derived from the PLMN
bearer capability information received in the set-up request from the MS or
from the emergency set-up request from the MS. One of bearer service or
teleservice shall be present. CUG index C For the definition of this IE, see
3GPP TS 23.085 [18]. Shall be present if it was received in the set-up request
from the MS. Suppress preferential CUG C For the definition of this IE, see
3GPP TS 23.085 [18]. Shall be present if it was received in the set-up request
from the MS. Suppress CUG outgoing access C For the definition of this IE, see
3GPP TS 23.085 [18]. Shall be present if it was received in the set-up request
from the MS.
* * *
### 8.1.40 Send Info For Outgoing Call negative response
The negative response information element can take the following values:
\- Bearer service not provisioned;
\- Call barred (Operator determined barring);
\- Call barred (Supplementary service barring);
\- CUG reject (Inconsistent access information - index incompatible with basic
service);
\- CUG reject (Inconsistent access information - no CUG selected);
\- CUG reject (Outgoing calls barred within the CUG);
\- CUG reject (Unknown CUG index);
\- Teleservice not provisioned.
### 8.1.40A Send UESBI-Iu to Access Network
The following information element is required:
* * *
Information element name Required Description IMEI (with software version) C
IMEISV as defined in 3GPP TS 23.003 [5].
* * *
### 8.1.41 Start security procedures
The following information elements are required for a UMTS connection:
* * *
Information element name Required Description CK M Ciphering key to be used to
cipher communication over the radio link (see 3GPP TS 33.102 [32]). IK M
Integrity key to be used to verify the integrity of messages transferred over
the radio link (see 3GPP TS 33.102 [32]).
* * *
The following information elements are required for a GSM connection:
* * *
Information element name Required Description Ciphering mode M Indicates
whether ciphering of the radio connection is required, and if so which
ciphering algorithm is to be used. Kc C Ciphering key to be used if ciphering
of the radio connection is required. Shall be present if the ciphering mode
indicates that ciphering of the radio connection is required, otherwise shall
be absent.
* * *
### 8.1.42 Trace subscriber activity
The following information elements are required:
* * *
Information element name Required Description Trace reference M Reference
number to be included with tracing reports which the VMSC sends to the OMC
Trace type M For the definition of this IE, see 3GPP TS 52.008 [3]
* * *
### 8.1.43 Use existing TMSI
This message contains no information elements.
### 8.1.44 Release MSRN
The following information elements are required:
* * *
Information element name Required Description MSRN M Mobile Station Roaming
Number received with the message RELEASE RESOURCES.
* * *
## 8.2 Messages on the C interface (MSC-HLR)
### 8.2.1 Send Routeing Info
The following information elements are required:
* * *
Information element name Required Description MSISDN M MSISDN of the B
subscriber (see 3GPP TS 23.003 [5]). Alerting Pattern C Shall be present if
received in a Connect operation from the gsmSCF; otherwise shall be absent.
CUG interlock C For the definition of this IE, see 3GPP TS 23.085 [18]. Shall
be present if the GMSC received it in the IAM and the GMSC supports CUG,
otherwise shall be absent. CUG outgoing access C For the definition of this
IE, see 3GPP TS 23.085 [18]. Shall be present if the GMSC received it in the
IAM and the GMSC supports CUG, otherwise shall be absent. Number of forwarding
C Number of times the incoming call has already been forwarded. Shall be
present if it was received in the IAM; otherwise shall be absent. ISDN BC C
ISDN bearer capability. Shall be present if the GMSC received it in the IAM,
otherwise shall be absent. ISDN LLC C ISDN lower layer compatibility. Shall be
present if the GMSC received it in the IAM, otherwise shall be absent. ISDN
HLC C ISDN higher layer compatibility. Shall be present if the GMSC received
it in the IAM, otherwise shall be absent. Pre-paging supported C Shall be
present if the GMSC supports pre-paging, otherwise shall be absent. Call
Priority O This parameter indicates the eMLPP priority of the call (see 3GPP
TS 23.067 [39]). This parameter should be present if the GMSC supports the
eMLPP feature and if the call is an eMLPP call. The eMLPP priority levels A
and B shall be mapped to the Call priority level 0.
* * *
### 8.2.2 Send Routeing Info ack
The following information elements are required:
* * *
Information element name Required Description IMSI M IMSI of the B subscriber
(see 3GPP TS 23.003 [5]). Roaming number C E.164 number required to route the
call to VMSCB (see 3GPP TS 23.003 [5]). Shall be present if the HLR received
it in the Provide Roaming Number ack and the call is not subject to early CF,
otherwise shall be absent. Forwarded-to number C E.164 number of the C
subscriber. Shall be present if the HLR has determined that the call is to be
forwarded, otherwise shall be absent. Forwarded-to subaddress C Subaddress of
the C subscriber (see 3GPP TS 23.003 [5]). Shall be present if the HLR has
determined that the call is to be forwarded and a forwarded-to subaddress is
stored in the HLR in association with the forwarded-to number, otherwise shall
be absent. Notification to calling party C Indication of whether the calling
party is to be notified that the call has been forwarded. Shall be present if
the HLR has determined that the call is to be forwarded, otherwise shall be
absent. Forwarding reason C Indication of why the call has been forwarded
(unconditionally or on mobile subscriber not reachable). Shall be present if
the HLR has determined that the call is to be forwarded, otherwise shall be
absent. Redirecting presentation C Indication of whether the MSISDN of B
subscriber shall be presented to the C subscriber. Shall be present if the HLR
has determined that the call is to be forwarded, otherwise shall be absent.
MSISDN C E.164 number which identifies the B subscriber (basic MSISDN). It
will be used to create the redirecting number presented to the C subscriber.
Shall be present if the HLR has determined that the call is to be forwarded,
otherwise shall be absent. CUG interlock C For the definition of this IE, see
3GPP TS 23.085 [18]. Shall be present if the HLR has determined that the call
is to be treated as a CUG call in accordance with the rules in 3GPP TS 23.085
[18], otherwise shall be absent. CUG outgoing access C For the definition of
this IE, see 3GPP TS 23.085 [18]. Shall be present if the HLR has determined
that the call is to be treated as a CUG call with outgoing access in
accordance with the rules in 3GPP TS 23.085 [18], otherwise shall be absent.
NAEA preferred Carrier Id O The preferred carrier identity identifying the
carrier to be used to route the interexchange call if the call requires
routing via an interexchange carrier. This parameter may be included at the
discretion of the HLR operator.
* * *
### 8.2.3 Send Routeing Info negative response
The negative response information element can take the following values:
\- Absent subscriber;
\- Bearer service not provisioned;
\- Call barred (Operator determined barring);
\- Call barred (Supplementary service barring);
\- CUG reject (Called party SS interaction violation);
\- CUG reject (Incoming calls barred within CUG);
\- CUG reject (Requested basic service violates CUG constraints);
\- CUG reject (Subscriber not member of CUG);
\- Data missing;
\- Facility not supported;
\- Forwarding violation
\- Number changed;
\- System Failure;
\- Teleservice not provisioned;
\- Unexpected data value;
\- Unknown subscriber.
## 8.3 Messages on the D interface (VLR-HLR)
### 8.3.1 Provide Roaming Number
The following information elements are required:
+--------------------------+----------+----------------------------+ | Information element name | Required | Description | +--------------------------+----------+----------------------------+ | IMSI | M | IMSI of the B subscriber | | | | (see 3GPP | | | | TS 23.003 [5]). | +--------------------------+----------+----------------------------+ | MSC number | M | E.164 number which | | | | identifies VMSCB (see 3GPP | | | | TS 23.003 [5]). | +--------------------------+----------+----------------------------+ | MSISDN | O | E.164 number which | | | | identifies the B | | | | subscriber. | | | | | | | | It shall be present if the | | | | following 3 conditions are | | | | all satisfied: | | | | | | | | 1. the MSISDN is | | | | > different from the | | | | > basic MSISDN; | | | | | | | | 2. the subscriber has | | | | > VT-CSI stored in | | | | > HLR; | | | | | | | | 3. the VLR has indicated | | | | > support for CAMEL | | | | > Phase 3 or later. | | | | | | | | It may be present if the | | | | HLR requires it to be | | | | included in the call data | | | | record. | +--------------------------+----------+----------------------------+ | LMSI | C | Local Mobile Subscriber | | | | Identity. Shall be present | | | | if the LMSI was sent to | | | | HLRB at location updating. | +--------------------------+----------+----------------------------+ | PLMN bearer capability | C | Information to define the | | | | PLMN bearer capability | | | | required for the call. For | | | | alternate speech/facsimile | | | | group 3 calls this | | | | information element shall | | | | contain one PLMN bearer | | | | capability, as specified | | | | in 3GPP TS 29.007 [30]. | | | | May be present if the HLR | | | | can determine the required | | | | PLMN bearer capability | | | | from ISDN compatibility | | | | information received in | | | | the Send Routeing Info | | | | message, or from the | | | | MSISDN if a | | | | multi-numbering scheme is | | | | used; otherwise shall be | | | | absent. If the ISDN BC and | | | | ISDN LLC IEs are present, | | | | the PLMN bearer capability | | | | IE shall be absent. | +--------------------------+----------+----------------------------+ | ISDN BC | C | ISDN bearer capability. | | | | May be present if the HLR | | | | received it in the Send | | | | Routeing Info message, | | | | otherwise shall be absent. | | | | If the PLMN bearer | | | | capability IE is present, | | | | the ISDN BC IE shall be | | | | absent. | +--------------------------+----------+----------------------------+ | ISDN LLC | C | ISDN lower layer | | | | compatibility. May be | | | | present if the HLR | | | | received it in the Send | | | | Routeing Info message, | | | | otherwise shall be absent. | | | | If the PLMN bearer | | | | capability IE is present, | | | | the ISDN LLC IE shall be | | | | absent. | +--------------------------+----------+----------------------------+ | ISDN HLC | C | ISDN higher layer | | | | compatibility. Shall be | | | | present if the HLR | | | | received it in the Send | | | | Routeing Info message, | | | | otherwise shall be absent. | +--------------------------+----------+----------------------------+ | Alerting Pattern | C | Shall be present if the | | | | HLR has determined an | | | | alerting category or an | | | | alerting level for the MT | | | | call configuration; | | | | otherwise shall be absent. | +--------------------------+----------+----------------------------+ | Pre-paging supported | C | Shall be present if the | | | | HLR has determined that | | | | pre-paging is supported in | | | | the GMSC and the HLR, | | | | otherwise shall be absent. | +--------------------------+----------+----------------------------+ | Paging area | O | Shall be present if the | | | | Paging Area function is | | | | supported and if the | | | | paging area is stored in | | | | HLR (see 3GPP TS 23.012); | | | | otherwise it shall be | | | | absent. It indicates the | | | | set of Location Areas in | | | | which the MS is to be | | | | paged on the A interface | | | | if Location area ID is not | | | | known in VLR. | +--------------------------+----------+----------------------------+ | Call Priority | O | This parameter indicates | | | | the eMLPP priority of the | | | | call (see 3GPP TS 23.067 | | | | [39]). This parameter | | | | should be present if the | | | | HLR supports this | | | | parameter and if the Call | | | | Priority was received in | | | | the | | | | MAP_ | | | | SEND_ROUTING_INFORMATION | | | | request. | +--------------------------+----------+----------------------------+
### 8.3.2 Provide Roaming Number ack
The following information element is required:
* * *
Information element name Required Description Roaming number M E.164 number
required to route the call to VMSCB (see 3GPP TS 23.003 [5]).
* * *
### 8.3.3 Provide Roaming Number negative response
The negative response information element can take the following values:
\- Absent subscriber;
\- Data missing;
\- Facility not supported;
\- No roaming number available;
\- OR not allowed;
\- Unexpected data value.
### 8.3.4 Provide Subscriber Info
The following information elements are required:
+----------------------------+----------+----------------------------+ | Information element name | Required | Description | +----------------------------+----------+----------------------------+ | IMSI | M | IMSI of the subscriber for | | | | whom information is | | | | requested (see 3GPP | | | | TS 23.003 [5]). | +----------------------------+----------+----------------------------+ | LMSI | C | Local Mobile Subscriber | | | | Identity. Shall be present | | | | if the LMSI was sent to | | | | the HLR at location | | | | updating. | +----------------------------+----------+----------------------------+ | Requested information | M | Indicates which of the | | | | following information the | | | | HLR requires: | | | | | | | | - location information; | | | | | | | | - subscriber state; | | | | | | | | - IMEI (with software | | | | version); | | | | | | | | - MS classmark. | +----------------------------+----------+----------------------------+ | Active location retrieval | C | Indicates that the HLR | | requested | | requires active location | | | | retrieval. Shall be absent | | | | if the requested | | | | information does not | | | | indicate that the HLR | | | | requires location | | | | information. | +----------------------------+----------+----------------------------+ | Location Information in | C | Indicates by its presence | | EPS Supported | | that Location Information | | | | in EPS is supported. Shall | | | | be absent if the requested | | | | information does not | | | | indicate that the HLR | | | | requires location | | | | information. | | | | | | | | Shall be present if the | | | | Provide Subscriber Info | | | | message is triggered by | | | | the receipt of a Any Time | | | | Interrogation Request that | | | | includes the same IE. | | | | | | | | May be present otherwise, | | | | if the HLR requires | | | | location information and | | | | the requesting entity in | | | | the HPLMN (e.g. gsmSCF) is | | | | known to support Location | | | | Information in EPS. | +----------------------------+----------+----------------------------+ | Call Priority | O | Indicates the eMLPP | | | | priority of the call (see | | | | 3GPP TS 23.067 [39]). | | | | Should be present if the | | | | HLR supports this | | | | parameter and if the Call | | | | Priority was received in | | | | the | | | | MAP_ | | | | SEND_ROUTING_INFORMATION | | | | request. | +----------------------------+----------+----------------------------+
### 8.3.5 Provide Subscriber Info ack
The following information elements are required:
* * *
Information element name Required Description Location information C
Information to define the location of the MS: see definition in subclause
8.3.5.1. Shall be present if location information was requested and is
available; otherwise shall be absent. Subscriber state C Indicates whether the
MS is busy (i.e. engaged on a circuit-switched call), network determined not
reachable (IMSI detached or roaming in a prohibited location area) or assumed
idle. Shall be present if subscriber state was requested; otherwise shall be
absent. IMEI (with software version) C IMEISV as defined in 3GPP TS 23.003
[5]. Shall be present if the IMEI was requested, otherwise shall be absent. MS
classmark C MS classmark 2 as defined in 3GPP TS 24.008 [26]. Shall be present
if the MS classmark was requested, otherwise shall be absent.
* * *
#### 8.3.5.1 Location information
The compound information element Location information consists of the
following subordinate information elements:
* * *
Information element name Required Description Location number C For a
definition of this information element, see ITU‑T Recommendation Q.763 [35].
Shall be present if the VLR can derive it from the stored service area
identity (for UMTS) or cell global identity (for GSM) or location area
identity; otherwise shall be absent. The mapping from service area identity or
cell ID and location area to location number is network-specific and outside
the scope of the UMTS and GSM standards. Service area ID C Service area
identity of the cell in which the MS is currently in radio contact or in which
the MS was last in radio contact. Shall be present if the MS uses UMTS radio
access and the subscriber record is marked as confirmed by radio contact;
otherwise shall be absent. See subclause 7.2.3.5. Cell ID C Cell global
identity of the cell in which the MS is currently in radio contact or in which
the MS was last in radio contact. Shall be present if the MS uses GSM radio
access and the subscriber record is marked as confirmed by radio contact;
otherwise shall be absent. See subclause 7.2.3.5. Geographical information C
For a definition of this information element, see 3GPP TS 23.032 [7] . Shall
be present if the VLR can derive it from the stored service area identity,
cell global identity or location area identity; otherwise shall be absent.
Geodetic information C This information element corresponds to the Calling
Geodetic Location defined in ITU-T Recommendation Q.763 [35]. Shall be present
if the VLR can derive it from the stored service area identity, cell global
identity or location area identity; otherwise shall be absent. VLR number O
E.164 number which identifies the VLR (see 3GPP TS 23.003 [5]). If the HLR
receives it from the VLR it shall ignore it. Age of location information C
Measured in minutes. Shall be present if available in the MSC/VLR; otherwise
shall be absent. Current Location Retrieved C Shall be present when location
information was obtained after a successful paging procedure for Active
Location Retrieval. E-UTRAN Cell ID C E-UTRAN cell global identity of the cell
in which the MS is currently in radio contact or in which the MS was last in
radio contact. Shall be present if the MS uses E-UTRAN radio access and the
subscriber record is marked as confirmed by radio contact; otherwise shall be
absent. See subclause 7.2.3.5. Tracking area ID C Tracking area identity of
the cell in which the MS is currently in radio contact or in which the MS was
last in radio contact. Shall be present if the MS uses E-UTRAN radio access;
otherwise shall be absent. See subclause 7.2.3.5.
* * *
### 8.3.6 Provide Subscriber Info negative response
The negative response information element can take the following values:
\- Data missing;
\- Unexpected data value.
### 8.3.7 Restore Data
The following information elements are required:
* * *
Information element name Required Description IMSI M IMSI of the subscriber
for whom data are to be restored (see 3GPP TS 23.003 [5]). LMSI O LMSI of the
subscriber for whom data are to be restored (see 3GPP TS 23.003 [5]). May be
included if required by the requesting VLR.
* * *
### 8.3.8 Restore Data ack
The following information elements are required:
* * *
Information element name Required Description HLR number M E.164 number which
identifies the HLR (see 3GPP TS 23.003 [5]). MS not reachable flag C Indicates
whether the VLR should notify the HLR when the MS next establishes radio
contact. Shall be present if the corresponding indicator is set in the HLR
record for the subscriber; otherwise shall be absent.
* * *
### 8.3.9 Restore Data negative response
The negative response information element can take the following values:
\- System failure;
\- Unknown subscriber.
## 8.4 Messages on the F interface (MSC-EIR)
### 8.4.1 Check IMEI
The following information element is required:
* * *
Information element name Required Description IMEI M IMEI of the ME whose
status is to be checked (see 3GPP TS 23.003 [5]).
* * *
### 8.4.2 Check IMEI ack
The following information element is required:
* * *
Information element name Required Description Equipment status M Indicates
whether the ME is black-listed, grey-listed or white-listed
* * *
### 8.4.3 Check IMEI negative response
The negative response information element can take the following value:
\- Unknown equipment.
## 8.5 Messages on the MSC internal interface
This interface can carry ISUP messages received from the process MT_GMSC or
the process ICH_MSC and to be forwarded to a destination exchange, and ISUP
messages received from the destination exchange and to be forwarded to the
process MT_GMSC or the process ICH_MSC. In addition, it carries the following
inter-process messages.
### 8.5.1 CF cancelled
This message contains no information elements.
### 8.5.2 Perform Call Forwarding
The following information element is required:
* * *
Information element name Required Description Forwarded-to number M E.164
number of the C subscriber. OR call M Indicates whether the call which is to
be forwarded was subject to basic OR as specified in 3GPP TS 23.079 [13]
* * *
### 8.5.3 Perform Call Forwarding ack
The following information element is required:
* * *
Information element name Required Description Forwarded-to number M E.164
number of the C subscriber. Note: this number may be different from the
Forwarded-to number received in the Perform Call Forwarding, as a result of
CAMEL handling.
* * *
### 8.5.4 Perform Call Forwarding negative response
The negative response information element can take the following value:
\- Call forwarding failed.
## 8.6 Messages on the VLR internal interface
This interface carries messages between corresponding instances of the
processes PRN_VLR and ICH_VLR. The correlation between the process instances
is done by the MSRN.
### 8.6.1 Call arrived
This message contains no information elements.
### 8.6.2 PAR completed
This message contains no information elements.
## 8.7 Messages on the Gs interface
### 8.7.1 Page MS
The following information elements are required:
* * *
Information element name Required Description IMSI M IMSI of the MS to be
paged. eMLPP priority C Circuit-switched paging priority. Shall be present if
it was received in the Page MS via SGSN request or Search for MS via SGSN
request; otherwise shall be absent. TMSI C TMSI to be broadcast to identify
the MS. Shall be present if it was received in the Page MS via SGSN request or
Search for MS via SGSN request; otherwise shall be absent. Location area
identity C Location area identity of the location area where the mobile is
registered, according to the subscriber data in the VLR. Shall be present if
the VLR can supply it; otherwise shall be absent. Channel type C Type of
channel required for the call. Shall be present if it was received in the Page
MS via SGSN request or Search for MS via SGSN request; otherwise shall be
absent.
* * *
### 8.7.2 Send MS information
The following information elements are required:
* * *
Information element name Required Description IMSI M IMSI of the MS for which
information is required. Information requested M Information required for the
specified MS.
* * *
### 8.7.3 Send MS information ack
The following information elements are required:
* * *
Information element name Required Description IMSI M IMSI of the MS for which
information is required. Service area ID C Service area ID (for UMTS access)
of the cell in which the MS last established radio contact. Shall be present
if the MS uses UMTS access; otherwise shall be absent. Cell ID C Cell ID (for
GSM access) of the cell in which the MS last established radio contact. Shall
be present if the MS uses GSM access; otherwise shall be absent. Location
information age M (note) Time in minutes since the MS last established a radio
transaction NOTE: Although they are optional in the protocol, these IEs are
mandatory in this context.
* * *
### 8.7.4 Send MS information negative response
The negative response information element can take the following value:
  * No response from SGSN.
## 8.8 Messages on the E interface (GMSC-VMSC)
### 8.8.1 Release Resources
The following information elements are required:
* * *
Information element name Required Description MSRN M Mobile Station Roaming
Number.
* * *
###### ## Annex A (informative): Handling of an IAM at an MSC
An MSC which receives an IAM from an originating exchange may react in three
different ways:
\- It acts as a transit exchange, i.e. it relays the IAM to a destination
exchange determined by analysis of the called party address, and thereafter
relays other telephony signalling between the originating and destination
exchange until the connection is released. This behaviour is not specific to
UMTS or GSM.
\- It acts as a terminating exchange, i.e. it attempts to connect the call to
an MS currently registered in the service area of the MSC.
\- It acts as a GMSC, i.e. it interrogates an HLR for information to route the
call. If the HLR returns routeing information, the MSC uses the routeing
information from the HLR to construct an IAM, which it sends to a destination
exchange determined by analysis of the routeing information from the HLR.
Sheet 1: when the MSC co-ordinating setup procedure has decided whether the
MSC is to act as a terminating VMSC, a GMSC or a transit exchange, it forwards
the IAM to an idle instance of the appropriate process.
{width="5.992361111111111in" height="7.247916666666667in"}
Figure 84a: Process MSC_Coord (sheet 1)
#