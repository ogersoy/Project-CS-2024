# Foreword
This Technical Report has been produced by the 3^rd^ Generation Partnership
Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# Introduction
As the packet switched radio networks capabilities evolve, they become more
and more attractive media for carrying also real time speech traffic such as
the traditional TS11 and TS12. In order to make the best use of such resources
access from the deployed CN infrastructure and services should be possible.
This will allow avoiding a major switch in the voice call control paradigm as
well as retaining the currently provided functionalities such as the charging
mechanisms (calling party pays), supplementary services provision and so on.
As the circuit switched network will continue to be employed in the future,
also handover needs to be taken into account.
Give the proven track record of the current call control, this TR intends to
investigate architectures suitable to support CS Domain Services over new
types of accesses and manage the handover of calls from a traditional bearer
to the new available ones. The study also aims to ensure that the user
experience remains as consistent and as satisfactory as it is today.
# 1 Scope
The present document contains the results of the study of the architectural
requirements of CS Domain Services over evolved PS access and concludes with a
way forward. Considerations include overall requirements, architectural
requirements, evaluation of potential architectural solutions and alternative
architectures.
The objective is to describe an architecture that is capable of extending the
\'traditional\' MSC-Server based set of CS voice, supplementary and value-
adding services and business principles (e.g. for roaming and interconnect) to
the evolved PS access. The intention is also to give a CS handover-like user
experience for voice calls when changing between evolved PS and legacy CS
accesses. The architecture will however not be limited to the provision of
speech services over evolved PS accesses; on the contrary, through the
exploitation of the Combinational services, it will be possible to harness the
capabilities of IMS to provide new, innovative services to the end user.
Handover of the parallel PS session towards legacy 3GPP access will be
considered as well, but may be limited by the capabilities of the legacy
system and operator preferences.
Co-existence with IMS centric Single Radio VCC solutions shall be studied as
well.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
  * References are either specific (identified by date of publication, > edition number, version number, etc.) or non‑specific.
  * For a specific reference, subsequent revisions do not apply.
  * For a non-specific reference, the latest version applies. In the > case of a reference to a 3GPP document (including a GSM document), > a non-specific reference implicitly refers to the latest version > of that document _in the same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 23.279: \"Combining Circuit Switched (CS) and IP Multimedia
Subsystem (IMS) services\".
[3] 3GPP TS 23.401: \"GPRS enhancements for E-UTRAN access\".
[4] 3GPP TS 23.012: \"Location management procedures\".
[5] 3GPP TS 23.203: \"Policy and charging control architecture\".
[6] 3GPP TS 23.018: \"Basic call handling; Technical realization\".
[7] 3GPP TS 32.250: \"Charging management; Circuit Switched (CS) domain
charging\".
[8] 3GPP TS 32.240: \"Charging management; Charging architecture and
principles\".
[9] 3GPP TS 32.299: \"Charging management; Diameter charging applications\".
[10] 3GPP TS 23.206: \"Voice Call Continuity (VCC) between Circuit Switched
(CS) and IP Multimedia Subsystem (IMS); Stage 2\".
[11] 3GPP TR 23.892: \"IP Multimedia System (IMS) centralized services\".
[12] 3GPP TR 23.882: \"3GPP System Architecture Evolution\".
[13] 3GPP TS 23.040: \"Technical realization of the Short Message Service
(SMS)\".
[14] 3GPP TS 44.018: \"Radio Resource Control (RRC) protocol\".
[15] 3GPP TS 25.331: \"Radio Resource Control (RRC); Protocol specification\".
[16] 3GPP TS 23.060: \"General Packet Radio Service (GPRS)\".
# 3 Definitions, symbols and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
TR 21.905 [1] and the following apply. A term defined in the present document
takes precedence over the definition of the same term, if any, in TR 21.905
[1].
**\ **: \.
**example:** text used to clarify abstract rules by applying them literally.
## 3.2 Symbols
For the purposes of the present document, the following symbols apply:
\ \
## 3.3 Abbreviations
For the purposes of the present document, the abbreviations given in TR 21.905
[1] and the following apply. An abbreviation defined in the present document
takes precedence over the definition of the same abbreviation, if any, in TR
21.905 [1].
**\ :** \
# 4 Requirements
## 4.1 Overall requirements
Editor\'s Note: This section will describe the overall requirements for CS
Domain Services over evolved PS access.
\- The set of CS domain voice, supplementary and value-adding services and
business principles (e.g. for roaming and interconnect) shall be made
available over the evolved PS access.
\- The user experience for voice calls when changing between evolved PS and
legacy CS accesses shall be comparable to that of CS handover.
\- It shall be possible to combine CS and IP Multimedia Subsystem (IMS)
services as specified in TS 23.279 [2] when they are both accessed over
evolved PS access.
## 4.2 Architectural requirements
Editor\'s Note: This section will describe the architectural requirements for
CS Domain Services over evolved PS access. These requirements will be used as
selection criteria for the solutions.
It shall be possible to access CS domain voice service over evolved PS access,
i.e. EPS.
\- Impact on the CS domain shall be minimized.
\- Impact on GERAN, UTRAN and E-UTRAN should be avoided.
\- Cost-affecting upgrades to the legacy CS radio access (e.g. DTM, PS HO,
VoIP) should be avoided.
# 5 Architecture Alternatives
Editor\'s Note: This section will describe and evaluate detailed reference
architectures, including network elements, interfaces and reference points,
suitable to provide CS Domain Services over evolved PS access.
## 5.1 Alternative 1 - Evolved MSC
### 5.1.1 Reference architecture
#### 5.1.1.1 Non-roaming architecture
In this alternative, the operator chooses to reuse the MSC Server that will
control establishment of voice calls and handling of SMS under E-UTRAN
coverage. This evolution of the MSC Server is referred as the eMSC (Evolved
MSC). From the EPS point of view, the eMSC is perceived as an Application
Server. Thus the functionality of Z1 interface can be compared to that of Gm
reference point.
Figure 5.1.1.1-1: Non-roaming architecture
#### 5.1.1.2 Roaming architecture
If the Visited PLMN supports \"CS domain services over evolved PS access\",
the following architecture shall apply where the PDN GW and the eMSC are both
located in the VPLMN. In order to allow operators to limit user-plane traffic
through the PDN-GW in the VPLMN to user-plane traffic related to CSoPS
service, it shall be possible to have a separate APN for CSoPS.
Figure 5.1.1.2-1: Roaming architecture with PDN GW and eMSC in VPLMN
If the Visited PLMN does not support \"CS domain services over evolved PS
access\", the subscriber will not have access to CS domain voice calls over
EPS.
#### 5.1.1.3 Required functionality in network elements
**eMSC** Contains full MSC-S and VLR functionality with following additions:
\- CS domain registration for UE using secure and reliable IP transport
\- Call and SMS control for UE using secure and reliable IP transport
(replacing use of Mc for channel assignment with Rx using PCC for bearer
establishment)
\- Handover preparation and execution
\- Handover signalling
NOTE: Connections between eMSC and EPC elements will be secured with standard
IP mechanisms; the eMSC needs to allow secured connectivity with many PDN GWs
and MMEs, depending on operator configuration.
**MME** Additional to Rel-8 standard behaviour:
\- Handover signalling exchange with the eMSC for preparation and execution
**UE** Additional to Rel-8 standard behaviour:
\- CS domain registration and call and SMS control signalling over EPS using
secure and reliable IP transport
#### 5.1.1.4 Reference points
**Z1** Reference point between UE and eMSC.
**Z2** Reference point between MME and eMSC.
#### 5.1.1.5 Protocol Stacks
A possible protocol stack for control plane over Z1 is illustrated in figure
5.1.1.5-1.
{width="6.580555555555556in" height="2.509027777777778in"}
Figure 5.1.1.5-1: Protocol stack for control plane over Z1
Editor\'s Note: The final choice about use of SCTP or TCP can be left open for
stage 3 discussions and decision.
Editor\'s Note: Whether the Container protocol is a new one or maybe SIP is a
stage 3 discussions and decision.
The protocol stack for user plane over Z1 is illustrated in figure 5.1.1.5-2.
{width="6.580555555555556in" height="2.2493055555555554in"}
Figure 5.1.1.5-2: Protocol stack for user plane over Z1
### 5.1.2 Procedures
#### 5.1.2.1 Registration
After having attached to the EPS network, the UE shall register to the CS
Domain to become available for CS Domain services.
{width="6.675in" height="5.208333333333333in"}
Figure 5.1.2.1-1: Registration procedure
1) The UE registers to the network according to the Attach procedure as
specified in TS 23.401 [3].
2) The UE discovers to which eMSC it has to register as described in clause
5.1.2.4.
Editor\'s note: It is expected that the UE discovers the eMSC to which to
register with similar mechanisms as a P-CSCF. A simple way is using static IP
address configuration in PDN GW and deliver this IP address to the UE via
Attach Accept message. And another way as shown in the above figure is using
DHCP and DNS query. The UE can use the current TAI information to get an
appropriate eMSC IP address.
3) UE initiates the registration procedure by sending Location Updating
Request (IMSI or TMSI, old LAI, the UE IP address, etc) message to the eMSC.
And this message packed into IP packets is transferred from UE to the eMSC
directly.
4) The eMSC/VLR obtains the IMSI and authentication data about the UE from the
old VLR if the UE identifies itself with TMSI and VLR changes since last
deregistration. If the UE identifies itself with TMSI and the TMSI is unknown
in both the old and new VLR, the new VLR get the IMSI from the UE.
5) The eMSC may perform the security procedure and establish a security
association between the eMSC and the UE.
Editor\'s note: How to execute security procedures and establish a security
association are FFS.
6) The eMSC/VLR registers itself to the HSS by sending a Location Update
request (IMSI, MSC Address, VLR number etc) message.
7) HSS initiates the cancel location procedure to the old VLR.
8) The eMSC/VLR obtains the subscription data from HSS. The MME address is
included in the Subscription Data.
9) HSS responds with Location Update Acknowledge to the eMSC/VLR.
10) The eMSC/VLR sends the Location Update Accept (new LAI, new TMSI) to the
UE. The UE is now \"CS over PS\" attached, and its IP address, allocated by
the EPC, is known to the eMSC.
The eMSC shall consider TAC as LAC.
Editor\'s Note: The way how the IP address of the UE is transmitted is FFS. A
new container protocol, known by the UE, could carry this new field with no
impact on 24.008 signalling.
11) The UE sends the TMSI Reallocation Complete message to indicate the
network that the reallocation of TMSI is accepted.
NOTE: The eMSC will, according to operator policy, allow an emergency
registration with an IMEI as UE identification, and subsequently not perform
authentication procedure
Editor\'s Note: Up to now there is no reason identified why the eMSC should
know which APN is used for CSoPS. Final decision is FFS.
#### 5.1.2.2 Location Update
The UE performs periodic location updates as specified in TS 23.012 [4].
Up to now no reason has been identified which would require changing eMSC when
changing TA. If a change of eMSC at time of TA change is desired, the UE could
in case of a TA change do an eMSC Discovery (see §5.1.2.4), and then, if a new
eMSC has been assigned, do a location update to the new eMSC.
#### 5.1.2.3 Deregistration
The UE is marked as IMSI detached when eMSC is informed that the IP-CAN
session used to transport 24.008 over IP signalling is released and the UE has
not registered via GERAN/UTRAN at that time.
Figure 5.1.2.3-1: Deregistration procedure
1) The UE sends IMSI Detach Indication message to deregister itself from the
eMSC similar to the Detach procedure (as specified in TS 23.012 [4]), and the
security association is terminated.
#### 5.1.2.4 eMSC Discovery
After having attached to the EPS network, the UE shall discover to which eMSC
it has to register.
Figure 5.1.2.4-1: eMSC Discovery procedure
NOTE: The DHCP Query/Response may be omitted if the domain name is known by
the UE.
1) UE sends a DHCP Query via the PDN GW to a DHCP Server, requesting the
domain name of the eMSC and IP addresses of DNS Servers.
2) The DHCP Server sends the answer to the UE.
NOTE: It may require a multiple DHCP Query/Response message exchanges to
retrieve the requested information.
3) The UE performs a DNS Query to retrieve a list of eMSC(s) IP addresses from
which one is selected.
NOTE: If the response does not contain the IP addresses, an additional DNS
Query is needed to resolve a Fully Qualified Domain Name (FQDN) to an IP
address.
#### 5.1.2.5 MO and MT Call Setup
Figure 5.1.2.5-1: Call Setup procedure
1) The call setup takes place as specified in TS 23.018 [6] (with the
exception of CS channel allocation that is described in step 2) and is
transported over reliable IP transport. Ciphering is not required. The
signalling connection may use IPSec.
In this procedure, and after the establishment of the EPC bearer, the UE
obtains the MGW IP address.
NOTE: Before an MT call setup procedure is initiated by the eMSC it will
trigger a possibly needed PS paging by sending a \'ping\'-packet to the UE.
Editor\'s Note: The way how the IP address of the MGW is transmitted is FFS.
The impacted messages could be \"Alerting\" for MO calls and \"Call setup\"
for MT calls. A new container protocol, known by the UE, could carry this new
field with no impact on TS 24.008 signalling.
2) The eMSC initiates the EPC bearer for the voice stream according to \'IP-
CAN Session Modification; PCRF initiated\' procedure as specified in TS 23.203
[5].
3) The eMSC registers itself at the MME as ‚Handover-serving Node\' towards 2G
and 3G for this bearer. The eMSC can obtain the serving MME for the UE from
the HSS. A change of serving MME will be signalled from the MME to the eMSC.
#### 5.1.2.6 MO and MT SMS
Figure 5.1.2.6-1: SMS procedure
1) MO and MT SMS signalling takes place as specified in TS 23.040 [13]
#### 5.1.2.7 HO from E-UTRAN to GSM/UMTS CS
Figure 5.1.2.7-1: HO from E-UTRAN to GSM/UMTS CS procedure
A measurement report from the UE triggers the eNodeB to send a HO Required to
the MME. As the eMSC is marked \'Handover-serving Node\' for this bearer the
MME forwards the HO Required to the eMSC.
NOTE 1: The handover of other established bearers besides the voice bearer for
which the eMSC is ‚Handover-serving Node\' is handled by the MME according to
the procedures for E-UTRAN to UMTS/GPRS Inter RAT handover as specified in TS
23.401 [3].
1-8) Upon receiving the HO Required from the MME the eMSC initiates a legacy
inter-MSC handover to the MSC serving the received target cell.
NOTE 2: If the currently serving eMSC is also serving MSC of the target cell
then no inter-MSC handover is needed and steps 2) ), 5) and 6) are skipped.
7) The eMSC initiates the release of the EPC bearers, which is done according
to \'IP-CAN Session Modification; PCRF initiated\' procedure as specified in
TS 23.203 [5].
#### 5.1.2.8 HO from GSM/UMTS CS to E-UTRAN
Figure 5.1.2.8-1: HO from GSM/UMTS CS to E-UTRAN procedure
A measurement report from the UE triggers the BSS or RNC to send a HO Required
to the MSC-S.
1) As the target cell is an E-UTRAN cell, the MSC-S initiates an inter-MSC
handover to the eMSC
2-10) Upon receiving the HO Required from the BSC/RNC the MSC-S initiates a
legacy inter-MSC handover to the eMSC serving the received target cell.
NOTE: If the currently serving MSC-S is also serving eMSC of the target cell
then no inter-MSC handover is needed and steps 2), 5) and 6) are skipped.
3-4) (Case 1) These steps will occur if the UE was already attached to EPC
while using the 2G CS domain and that it can re-use the IP address that was
received during EPC attachment.
8 (Case 2) If the UE was not already attached to EPC, the EPS Attach procedure
will occur, as described in TS 23.401 [3].
\- assignment of an IP address to the UE;
\- establishment of an EPC bearer for the voice stream.
9 The eMSC Discovery procedure is triggered as described in §5.1.2.4. From now
on the UE knows the IP address of the eMSC.
11) This new message lets the eMSC obtain the IP address of the UE.
12) This new message lets le UE obtain the IP address of the MGW where to send
voice traffic.
Editor\'s Note: The way how these two new messages are implemented is FFS. A
new container protocol, known by the UE, could carry the new information
needed with no impact on 24.008 signalling.
Editor\'s Note: This call flow is based on Alternative D-1 documented in TR
23.882, §7.19.1.6a.
### 5.1.3 Co-existence with IMS based services
It is expected that there will be UEs supporting both, CS domain services over
PS access as well as IMS based services.
Operators may offer voice services over CS domain as well as over IMS in their
network. For one specific user voice services can be provided in the CS Domain
or in IMS, or in both. This would be part of the user\'s subscription
information in the HSS, and operator controlled configured in the UE.
Concurrent access to CS Domain voice services and IMS non-voice services is
possible. It is possible to combine CS and IP Multimedia Subsystem (IMS)
services as specified in TS 23.279 [2] when they are both accessed over EPS.
The UE decides based on the operator controlled configuration in the UE about
the preferred domain for voice services when adding a voice call to an ongoing
IMS session.
VCC (as specified in TS 23.206 [10]) and ICS (as studied in TR 23.892 [11])
architectures and the here proposed architecture for CS Domain services over
evolved PS access are mutually exclusive but can co-exist in operators\'
networks; it is not expected that any functionality can be shared or re-used.
SR VCC (as studied in TR 23.882 [12]) may have overlapping functionality,
depending on the selected architecture. The currently identified possible
overlapping functionality is identifying and marking of voice bearers in EPS
so that a later radio handover triggers an inter-MSC HO.
Editor\'s Note: It is FFS if this functionality will be specified in a way so
that it can be shared between SR VCC and CS Domain services over evolved PS
access.
### 5.1.4 Roaming aspects
#### 5.1.4.1 eMSC support in the VPLMN
In this case voice calls are fully controlled by the VPLMN where PDN GW and
eMSC are located. This is the preferred roaming architecture for CS Domain
services over evolved PS access. It allows full re-use of CS domain roaming
agreements and existing inter-operator accounting mechanisms (TAP records
exchange) for CS Domain voice services over evolved PS access. In case of a
handover between E-UTRAN and GSM/UMTS CS the user experience will be
comparable to the one in non-roaming case as the handover is performed solely
in the VPLMN, which optimizes the user plane routing.
#### 5.1.4.2 No eMSC support in the VPLMN
In this case the subscriber will not have access to CS domain voice calls over
EPS.
NOTE: In this case emergency calls would not be provided by the HPLMN via CS
domain services over PS access, but could be made possible by using IMS
emergency architecture in the VPLMN. Details are FFS.
### 5.1.5 Security aspects
The EPS provides IP connectivity with integrity protection and ciphering, and
an authenticated sender IP address.
At time of registration most operators will require that the eMSC performs an
Authentication Procedure to authenticate the (T)IMSI and create a secure
binding with the sender IP address by verifying that it matches the IP address
currently allocated to the user. A security association is established between
UE and eMSC, to allow the UE to verify the sender identification of the eMSC.
The user-plane traffic shall be secured by standard IP security mechanisms.
### 5.1.6 Charging aspects
Charging shall be done in the MSC-S part of the eMSC, using the standardized
CS Domain interfaces and functions as specified in TS 32.250 [7], TS 32.240
[8], TS 32.299 [9]. In case of loss of transmission on the allocated EPC
bearer for the voice stream the eMSC will be triggered by the PCEF via Rx, and
according to operator preference either stop charging, or terminate the call.
Charging in the EPS is done with the PCC architecture as specified in TS
23.203 [5]. It is expected that operators would zero-rate all signalling
traffic to the eMSC, as well as the EPC bearers transporting the voice
traffic.
A radio handover triggering a domain change has no impact on charging
performed in the eMSC for an ongoing speech call, i.e. the Anchor MSC
continues charging.
### 5.1.7 Legal requirements aspects
#### 5.1.7.1 Emergency calls
It can be expected that the emergency call attachment procedures for EPS
(including the SIM-less case) will be specified to enable IMS emergency calls,
and that these procedures can be re-used for CS Domain services over PS access
for attachment to the EPS. In the following it is assumed that the UE is
already attached in EPS.
\- For the non-roaming and roaming architecture with local break-out the UE
performs an emergency call setup towards the eMSC as described in the \'MO and
MT Call Setup\' procedure, with the emergency call specifics, including the
SIM-less case, as specified in TS 23.018 [6]. The eMSC will, according to
operator policy, allow an emergency registration with an IMEI as UE
identification, and subsequently not perform authentication procedure.
Editor\'s Note: It is FSS how the eMSC gets the CellID for routing of the
emergency call.
A radio handover triggering a domain change has no impact on an ongoing
emergency call.
\- For the roaming architecture with home-routed traffic (see Figure
5.1.1.2-2) emergency calls will not be provided by the HPLMN using CS domain
services over evolved PS access architecture. Instead the UE would use IMS
emergency services provided in the VPLMN.
#### 5.1.7.2 Lawful interception
\- For the non-roaming and roaming architecture with local break-out the
lawful interception architecture and mechanisms specified for the CS domain
are sufficient.
A radio handover triggering a domain change has no impact on lawful
interception of an ongoing call.
\- For the roaming architecture with home-routed traffic (see Figure
5.1.1.2-2) lawful interception needs further investigations, but would be done
similar to IMS voice services with home-routed traffic.
### 5.1.8 Assessment
The \'Evolved MSC\' alternative is a full solution according to the scope this
study, i.e. it is fulfilling all identified overall and architectural
requirements.
The main design-principles of this solution are:
\- Minimization of impact on EPS entities: there is no impact on E-UTRAN, and
minor impact on MME, limited to an interaction needed for seamless service
continuity of a voice call at radio HO between E-UTRAN and legacy GERAN/UTRAN
access.
\- Maximal re-use of CS Domain mechanisms thus securing operators\'
investments in legacy CS Domain and radio access equipment and services.
The \'Evolved MSC\' alternative allows operators to offer legacy CS domain
services fully leveraging the already deployed evolved access coverage, and
should be understood as cost-efficient gap-filler until MTSI can be offered
with sufficient VoIP-capable PS coverage.
In roaming, CSoPS service is offered if eMSC is supported by the VPLMN. So,
while roaming in a VPLMN without eMSC, a CSoPS subscriber will experience
voice calls over legacy CS radio access.
## 5.2 Alternative 2 - Iu-CS based solution
### 5.2.1 Reference architecture
Editor\'s Note: This section will describe the reference architecture,
including network elements and reference points, suitable to provide CS Domain
Services over evolved PS access and handover to legacy CS access with this
alternative.
Figure 5.2.1-1: Non-Roaming Architecture for \"Iu-CS based solution\"
Figure 5.2.1-2: Roaming Architecture for \"Iu-CS based solution\"
**S1-MME:** Refer to 23.401 [3]
**S1-U:** Refer to 23.401 [3]
**Iu-CS\' (C):** Reference point for control plane protocol between MME and
MSC. Only s subset of Iu-CS(C) procedure is needed.
**Iu-CS (U):** Reference point for user plane protocol between S-GW and MSC.
**ICA (Iu-CS Adaptor):** This functional entity behaves like RNC toward the CS
domain and handles the interworking with MME for CS domain services over
evolved PS access.
Editor\'s note: it is FFS on how to handle EPS bearer for CS domain services
(e.g., voice).
### 5.2.2 Procedures
Editor\'s Note: This section will describe the procedures suitable to provide
CS Domain Services over evolved PS access and handover to legacy CS access
with this alternative.
Figure 5.2.2-1: CS registration flow
In the EPS attach procedure, UE is told that if MME/S-GW can connect with MSC
by Iu-CS interface. If the corresponding capability is also supported by the
UE, the UE will initiate the CS registration after the EPS attach.
1\. UE sends Location Updating Request message to MME, and the type may be
normal location updating or IMSI attach.
2\. MME receives this message from S1-MME interface, encapsulates it into the
corresponding Iu-CS RANAP message, and sends it to MSC/VLR on Iu-CS interface.
3\. MSC/VLR sends Update Location message to HSS/HLR, in order to get the
subscriber\'s data.
4\. HSS/HLR sends Insert Subscriber Data message to MSC/VLR.
5\. MSC/VLR sends Insert Subscriber Data Ack message to HSS/HLR.
6\. HSS/HLR sends Update Location Ack message to MSC/VLR.
7\. MSC/VLR sends Location Updating Accept message to MME. LAI and the
allocated new TMSI are included in this message.
8\. MME receives this message from Iu-CS interface, transforms it into the
corresponding S1-AP message and sends it to eNodeB on S1-MME interface. Then
eNodeB sends this NAS message to UE.
9\. If a new TMSI is allocated by MSC/VLR, UE would send TMSI Reallocation
Complete message to MME.
10\. MME sends TMSI Reallocation Complete message to MSC/VLR.
### 5.2.3 Co-existence with IMS based services
Editor\'s Note: This section will describe the co-existence with IMS based
services, including SR VCC and ICS, when providing CS Domain Services over
evolved PS access and handover to legacy CS access with this alternative.
### 5.2.4 Roaming aspects
Editor\'s Note: This section will describe the roaming aspects that need to be
considered when providing CS Domain Services over evolved PS access and
handover to legacy CS access with this alternative.
### 5.2.5 Security aspects
Editor\'s Note: This section will describe the security aspects that may need
to be considered when providing CS Domain Services over evolved PS access and
handover to legacy CS access with this alternative.
### 5.2.6 Charging aspects
Editor\'s Note: This section will describe the charging aspects that may need
to be considered when providing CS Domain Services over evolved PS access and
handover to legacy CS access with this alternative.
### 5.2.7 Legal requirements aspects
Editor\'s Note: This section will describe aspects of legal requirements e.g.
legal intercept and emergency calls that need to be considered when providing
CS Domain Services over evolved PS access and handover to legacy CS access
with this alternative.
### 5.2.8 Assessment
Editor\'s Note: This section will discuss the impact on the baseline RAN, CN
and terminal architecture and the pros and cons of this alternative.
## 5.3 Alternative 3 - Page in eUTRAN, Call in GSM/WCDMA
In this solution voice services are realized by reuse of CS infrastructure.
The terminal, connected to eUTRAN/EPC, uses 2G/3G to establish originating or
receive terminating voice calls.
This means this solution is intended only in dual eUTRAN-2G/3G coverage areas.
In eUTRAN-only coverage areas, voice service is provided with e.g. MTSI..
The \"Page in eUTRAN, Call in GSM/WCDMA\" solution is characterised by:
\- Mobility management is integrated and/or combined with EPS mobility
management.
\- Paging request for terminating voice calls are delivered to the terminal
via EPS.
\- 2G or 3G radio access is used for paging responses and further terminating
call handling as well as for all originating calls.
### 5.3.1 Reference architecture
The \"Page in eUTRAN, Call in GSM/WCDMA\" proposal reuses the concepts from
2G/3G of the Gs interface between the MSC Server and the SGSN. Thus for the
Location Update procedure and for Paging messages a \"Gs like\" interface
between the MME and the MSC server is used:
{width="6.675in" height="3.1465277777777776in"}
### 5.3.2 Procedures
Editor\'s note: Procedure related to CS authentication and ciphering is FFS.
Editor\'s note: Procedure related to how eMSC server is chosen during CS
location update is FFS.
#### 5.3.2.1 Mobility Management
The \"Page in eUTRAN, Call in GSM/WCDMA\" proposal utilizes EPS mobility
management. This is outlined in figure 3 below with the example of the network
attachment of a UE.
{width="5.326388888888889in" height="3.411111111111111in"}
Figure 5.3.2.1-1: UE network attachment to for initial registration
UE is provided with identifiers needed to establish CS voice calls.
NOTE: CS attachment is embedded, the CS Location Update procedure can either
be triggered by the UE (e.g. with LA structure visible in broadcast) or by the
MME (based on mapping from the TA structure of LTE/SAE).
When the UE is roaming same concept is used. The TA update procedure will
include the CS Location Update procedure.
An example of Combined EPS / UMTS Attach procedure is illustrated in Figure
5.3.2.1-2.
{width="4.61875in" height="3.1125in"}
Figure 5.3.2.1-2: Attach Procedure
1) The MS initiates the attach procedure by the transmission of an Attach
Request (parameters as specified in TS 23.401 [3], Combined Update indicator)
message to the MME.
2) The EPS Attach procedure is performed as specified in TS 23.401 [3].
3) The VLR shall be updated if the Gs-like interface is installed. The VLR
number is derived from the TAI. The MME starts the location update procedure
towards the new MSC/VLR upon receipt of the first Insert Subscriber Data
message from the HSS in step 2). This operation marks the MS as EPS-attached
in the VLR.
Editor\'s note: How to map LA and TA is FFS.
4) The MME sends a Location Update Request (new LAI, IMSI, SGSN Number,
Location Update Type) message to the VLR.
5) The VLR creates an association with the MME by storing MME Number.
6) The VLR performs Location Updating procedure as specified in TS 23.060
[16].
7) The VLR responds with Location Update Accept (VLR TMSI) to the MME.
8) The MME sends an Attach Accept (parameters as specified in TS 23.401 [3],
LA, TMSI) message to the UE.
#### 5.3.2.2 EPS Relocation
When Relocation takes place in EPS, the interaction with VLR/MSC will take
place in a similar manner as specified in Section 6.9.2.2 of TS 23.060 [16].
#### 5.3.2.3 Mobile Terminating Call
An example of Mobile Terminating Call procedure is illustrated in Figure
5.3.2.2-1.
{width="6.688888888888889in" height="3.8256944444444443in"}
Figure 5.3.2.3-1: Mobile Terminating Call Procedure
1) G-MSC receives IAM.
2) G-MSC retrieves routing information of the terminating UE bySend Routing
Info procedures as specified in TS 23.018 [6].
3) G-MSC sends IAM to the MSC on the terminating side as specified in TS
23.018 [6].
4) The MME receives a Page (IMSI, VLR TMSI, Location Information) message from
the MSC. If VLR TMSI is omitted, the IMSI is used instead of the TMSI as a
paging address at the radio interface. If location information is not
included, the MME shall page the MS in all the cells served by the VLR and the
SGSN, unless the SGSN has reliable information about the location of the MS.
5) The MME sends a Paging (as specified in TS 23.401 [3], and CN Domain
Indicator) message to each eNB. CN Domain Indicator indicates which domain (CS
or PS) initiated the paging message, and in this case it must be set to \"CS\"
by the MME.
6) The radio resource part of the paging procedure takes place. The message
contains CN Domain indicator.
7) Upon receipt of a Paging Request message for a circuit-switched service,
Cell Reselection if UE is in idle mode, PS handover as specified in TS 23.401
[3], or termination of existing EPC calls take place.
Editor\'s note: Whether PS handover takes place is FFS.
8) When the PS handover is complete, the UE responds to this request and
returns the paging response as specified in TS 44.018 [14] in an RRC Initial
Direct Transfer message as specified in TS 25.331 [15]. CN Domain Indicator is
set to \"CS\" in the Initial Direct Transfer message.
9) When received at the RNC, the Paging Response message is sent in an RANAP
Initial UE message to the MSC.
10) The MSC receives RANAP Initial UE message which shall then stop the paging
response timer and establish the CS connection.
#### 5.3.2.4 MT CS Call in Active Mode - Preparation Phase
{width="6.324305555555555in" height="4.970833333333333in"}
Figure 5.3.2.4-1: CS Page in eUTRAN, Call in GSM/WCDMA -- Preparation Phase
1\. The MSC receives an incoming voice call and responds by sending a CS Page
(IMSI or TMSI) to the MME over a Gs-like interface. The MME relays the CS Page
to the eNodeB over the S1 interface. The MSC only sends a CS Page for an UE/MS
that provides location update information using the Gs-like interface (i.e.
IMS is not supported by the LTE network).
2\. The eNode may optionally solicit a measurement report from the UE/MS to
determine the target GERAN/UTRAN cell to which PS handover will be performed.
Editor\'s Note: It is FFS if the eNodeB should always solicit a measurement
report to at least to allow the MS to respond with a preference for handover
to either a GERAN or UTRAN cell.
3\. The eNodeB triggers PS handover to a GERAN/UTRAN neighbour cell by sending
a Relocation Required message (Relocation Type, Cause, Source ID, Target ID,
Source BSS To Target BSS Transparent Container) to the MME. The eNodeB shall
set Relocation Type to \"UE Involved in relocation of SRNS\" and Target ID
shall contain the identity of the target cell. The rest of the PS handover
procedure described from this point on assumes that a GERAN target cell has
been selected.
4\. The MME determines initiates the PS Handover resource allocation procedure
by sending a Forward Relocation Request (IMSI, Tunnel Endpoint Identifier
Control Plane, RANAP Cause, Target Cell Identifier, MM Context, PDP Contexts,
Packet Flow ID, PDP Context Prioritisation, Source BSS To Target BSS
Transparent Container in the BSS Container (content is FFS), Source eNodeB Id,
MME Address for control plane) message to the SGSN. If the MME supports PS
handover procedures then it has to allocate a valid PFI during the PDP Context
activation procedure. Each PDP context contains the GGSN Address for User
Plane and the Uplink TEID for data sent to this GGSN Address.
The MM context contains security related information, e.g. supported ciphering
algorithms as described in 3GPP TS 29.060 [11]. The relation between GSM and
eUTRAN security parameters is FFS.
The SGSN selects the ciphering algorithm to use. This algorithm will be sent
transparently from the SGSN to the UE/MS. The IOV-UI parameter generated in
the SGSN and used as input to the ciphering procedure will also be transferred
transparently from the SGSN to the UE/MS.
When the SGSN receives the Forward Relocation Request message the required
PDP, MM, SNDCP and LLC contexts are established and a new P-TMSI is allocated
for the MS. When this message is received by the SGSN it begins the process of
establishing PFCs for all PDP contexts.
When the SGSN receives the Forward Relocation Request message it extracts from
the PDP Contexts the NSAPIs and SAPIs and PFIs to be used. If for a given PDP
Context the SGSN does not receive a PFI from the MME, it shall not request the
target BSS to allocate TBF resources corresponding to that PDP Context. If
none of the PDP Contexts forwarded from the MME has a valid PFI allocated the
SGSN shall consider this as a failure case and the request for PS handover
shall be rejected.
The MME shall not indicate any XID parameter settings and the SGSN shall
therefore create a NAS container for PS HO indicating Reset (i.e. reset to
default XID parameters).
5\. The SGSN sends a PS Handover Request (Local TLLI, IMSI, Cause, Target Cell
Identifier, Source BSS to Target BSS Transparent Container (RN part), PFCs To
Be Set Up List, NAS container for PS HO) message to the target BSS. The SGSN
shall not request resources for PFCs associated with PDP contexts with maximum
bit rate for uplink and downlink of 0 kbit/s or for which the Activity Status
Indicator within the PDP Context indicates that no active RAB exists on the
source side.
6\. Based upon the ABQP for each PFC the target BSS makes a decision about
which PFCs to assign radio resources. The algorithm by which the BSS decides
which PFCs that need resources is implementation specific. Due to resource
limitations not all downloaded PFCs will necessarily receive resource
allocation. The target BSS allocates TBFs for each PFC that it can accommodate
plus it will allocate CS resources required to establish the CS bearer in the
target cell.
7\. The target BSS shall prepare the Target BSS to Source BSS Transparent
Container which contains an Inter-Domain Handover Command including the CN
part (NAS container for PS HO) and the RN part (PS and CS Radio Resources).
8\. Target BSS shall send the PS Handover Request Acknowledge message (Local
TLLI, List of Set Up PFCs, Target BSS to Source BSS Transparent Container)
message to the SGSN. Upon sending the PS Handover Request Acknowledge message
the target BSS shall be prepared to receive downlink LLC PDUs from the SGSN
for the accepted PFCs.
Any PDP contexts for which a PFC was not established are maintained in the
SGSN and the related SAPIs and PFIs are kept. These PDP contexts may be
modified or deactivated by the SGSN via explicit SM procedures upon the
completion of the routing area update (RAU) procedure performed during the
execution phase.
9\. The SGSN passes the assigned list of TEIDs for each PDP context for which
a PFC was assigned in the RAB setup information IE in the Forward Relocation
Response (Cause, List of Set Up PFCs, Target BSS to Source BSS Transparent
Container) in the BSS Container, Tunnel Endpoint Identifier Control Plane,
SGSN Address for User Traffic, Tunnel Endpoint Identifier Data II) message to
the MME. The NSAPIs of the active PDP Contexts received in the Forward
Relocation Request message for which the PS handover continues, i.e. for which
resources are allocated for the PFCs in the target BSS, are indicated in this
message.
The Tunnel Endpoint Identifier Data II, one information element for each PDP
context, is the tunnel endpoint of the SGSN and is used for data forwarding
from the Serving GW, via the new SGSN, to the target BSS. The SGSN activates
the allocated LLC/SNDCP engines as specified in 3GPP TS 44.064 for an SGSN
originated Reset or \'Reset to the old XID parameters\'.
When the MME receives the Forward Relocation Response message and it decides
to proceed with the handover, the preparation phase is finished and the
execution phase will follow.
#### 5.3.2.5 MT CS Call in Active Mode -- Execution Phase
{width="6.324305555555555in" height="7.007638888888889in"}
Figure 5.3.2.5-1: CS Page in eUTRAN, Call in GSM/WCDMA -- Execution Phase
1\. The Serving GW continues to receive IP packets from the PDN GW and
forwards them to the UE/MS via the eNodeB.
2\. The MME continues the PS handover by sending a Relocation Command (Target
BSS to Source BSS Transparent Container (Inter-Domain Handover Command with RN
part and CN part), RABs to be Released List, RABs Subject to Data Forwarding
List) message to the eNodeB. \"RABs to be released list\" will be the list of
all NSAPIs (RAB Ids) for which a PFC was not established \"RABs Subject to
Data forwarding list\" will be the list of all NSAPIs (RAB Ids) for which a
PFC was established.
3\. The eNodeB sends the Handover from eUTRAN Command message which includes a
PS Handover Command (RN part and CN part) created by the target BSS and the
minimum required set of SI/PSI information. It is assumed the eNodeB will be
able to provide the MS/UE with SI/PSI information corresponding to the target
GERAN cell as a result of receiving this information from target BSS in Target
BSS to Source BSS Transparent Container received during the preparation phase.
Before sending the Handover from eUTRAN Command message the uplink and
downlink data transfer shall be suspended in the eNodeB for the RABs that
require delivery order.
Upon the reception of the HANDOVER from eUTRAN Command message containing the
PS Handover Command message, the UE/MS shall associate its RAB IDs to the
respective PFIs based on the relation with the NSAPI and shall suspend the
uplink transmission of the user plane data.
NOTE 1: The Forward SRNS Context procedure (shown as occurring after this step
in section 5.5.2.3.3 of TS 23.401 [3]) is left out here since the need for it
is still FFS.
4\. The UE/MS executes the handover according to the parameters provided in
the message delivered in step 4. The procedure is the same as in step 6 of the
Inter-SGSN A/Gb to A/Gb PS Handover with the additional function of
association of the received PFI and existing RAB Id related to the particular
NSAPI as described in clause 4.4.1 of TS 43.129.
5\. After accessing the cell using access bursts and receiving timing advance
information from the BSS in step 6, the MS processes the NAS container and
then sends one XID Response message to the new SGSN. The UE/MS sends this
message immediately after receiving the Packet Physical Information message
containing the timing advance or, in the synchronised network case,
immediately if the PS Handover Access message is not required to be sent.
Upon sending the XID Response message, the UE/MS shall resume the user data
transfer only for those NSAPIs for which there are radio resources allocated
in the target cell. For NSAPIs using LLC ADM for which radio resources were
not allocated in the target cell the MS may request for radio resources using
the legacy procedures.
NOTE 2: If the SGSN indicated Reset (i.e. reset to default parameters) in the
NAS container for PS HO included in the Handover from eUTRAN Command message
in order to avoid collision cases the mobile station may avoid triggering XID
negotiation for any LLC SAPI used in LLC ADM, but wait for the SGSN to do so.
In any case the UE/MS may avoid triggering XID negotiation for any LLC SAPI
used in LLC ABM, but wait for the SGSN to do so.
6\. As soon as the UE/MS completes the PS Handover procedure (by sending the
XID Response message) it establishes the main signalling link on the allocated
dedicated channel (i.e. MS/UE sends a SABM containing a layer 3 Service
Request message = PAGING RESPONSE to the BSS) and the BSS responds by sending
a UA. Upon receiving the SABM (containing a PAGING RESPONSE message) the BSS
sends a COMPLETE LAYER 3 INFORMATION message (containing a PAGING RESPONSE
message) to the MSC which indicates CS resources have been allocated in the
GERAN cell. When the RR connection is established the MS enters DTM and the CS
call establishment procedure completes.
NOTE 3: This step is not shown in section 5.5.2.3.3 of TS 23.401 [3] since no
CS resource allocation is included in that handover procedure.
7\. Upon receiving the PS Handover Complete message, the SGSN send a Forward
Relocation Complete message to the MME to indicate completion of the PS
handover procedures. The MME responds with a Forward Relocation Complete
Acknowledge message.
8\. The SGSN sends an Update PDP Context Request (new SGSN Address, TEID, QoS
Negotiated) message to the Serving GW concerned. The Serving GW updates the
PDP context fields and returns an Update PDP Context Response (TEID) message.
From now on the Serving GW sends new incoming downlink IP packets to the SGSN
instead of to the MME.
NOTE 4: The additional steps of the Update Bearer Request - Update Bearer
Response exchange between the Serving GW and PDN GW are not shown but will be
performed as per the equivalent steps of section 5.5.2.3.3 of TS 23.401 [3].
9\. If the SGSN indicated Reset (i.e. reset to default parameters) in the NAS
container for PS HO included in the Handover from eUTRAN Command message then
on receipt of the PS Handover Complete the SGSN initiates an LLC/SNDCP XID
negotiation for each LLC SAPI used in LLC ADM. In this case if the SGSN wants
to use the default parameters, it shall send an empty XID Command. If the SGSN
indicated \'Reset to the old XID parameters\' in the NAS container for PS HO,
no further XID negotiation is required for LLC SAPIs used in LLC ADM only.
The SGSN (re-)establishes LLC ABM for the PDP contexts which use acknowledged
information transfer. During the exchange of SABM and UA the SGSN shall
perform LLC/SNDCP XID negotiation.
10\. The UE/MS may trigger the Routing Area Update procedure when the sending
of uplink packet data is possible. The detailed steps performed are as per
section 5.5.2.3.3 of TS 23.401 [3].
#### 5.3.2.6 MO CS Call in Active Mode -- Preparation Phase
{width="6.310416666666667in" height="4.928472222222222in"}
Figure 5.3.2.6-1: CS Call Request in eUTRAN, Call in GSM/WCDMA -- Preparation
Phase
1\. The eNodeB receives a CS Call Request from the UE/MS. The UE/MS only
transmits this request when a voice call is requested by the user and IMS is
not supported.
2\. The eNode may optionally solicit a measurement report from the UE/MS to
determine the target GERAN/UTRAN cell to which PS handover will be performed.
Editor\'s Note: It is FFS if the eNodeB should always solicit a measurement
report to at least to allow the MS to respond with a preference for handover
to either a GERAN or UTRAN cell.
3\. The eNodeB triggers PS handover to a GERAN/UTRAN neighbour cell by sending
a Relocation Required message (Relocation Type, Cause, Source ID, Target ID,
Source BSS To Target BSS Transparent Container) to the MME. The eNodeB shall
set Relocation Type to \"UE Involved in relocation of SRNS\" and Target ID
shall contain the identity of the target cell. The rest of the PS handover
procedure described from this point on assumes that a GERAN target cell has
been selected.
4\. The MME determines initiates the PS Handover resource allocation procedure
by sending a Forward Relocation Request (IMSI, Tunnel Endpoint Identifier
Control Plane, RANAP Cause, Target Cell Identifier, MM Context, PDP Contexts,
Packet Flow ID, PDP Context Prioritisation, Source BSS To Target BSS
Transparent Container in the BSS Container (content is FFS), Source eNodeB Id,
MME Address for control plane) message to the SGSN. If the MME supports PS
handover procedures then it has to allocate a valid PFI during the PDP Context
activation procedure. Each PDP context contains the GGSN Address for User
Plane and the Uplink TEID for data sent to this GGSN Address.
The MM context contains security related information, e.g. supported ciphering
algorithms as described in 3GPP TS 29.060 [11]. The relation between GSM and
eUTRAN security parameters is FFS.
The SGSN selects the ciphering algorithm to use. This algorithm will be sent
transparently from the SGSN to the UE/MS. The IOV-UI parameter generated in
the SGSN and used as input to the ciphering procedure will also be transferred
transparently from the SGSN to the UE/MS.
When the SGSN receives the **Forward Relocation Request** message the required
PDP, MM, SNDCP and LLC contexts are established and a new P-TMSI is allocated
for the MS. When this message is received by the SGSN it begins the process of
establishing PFCs for all PDP contexts.
When the SGSN receives the **Forward Relocation Request** message it extracts
from the PDP Contexts the NSAPIs and SAPIs and PFIs to be used. If for a given
PDP Context the SGSN does not receive a PFI from the MME, it shall not request
the target BSS to allocate TBF resources corresponding to that PDP Context. If
none of the PDP Contexts forwarded from the MME has a valid PFI allocated the
SGSN shall consider this as a failure case and the request for PS handover
shall be rejected.
The MME shall not indicate any XID parameter settings and the SGSN shall
therefore create a NAS container for PS HO indicating Reset (i.e. reset to
default XID parameters).
5\. The SGSN sends a PS Handover Request (Local TLLI, IMSI, Cause, Target Cell
Identifier, Source BSS to Target BSS Transparent Container (RN part), PFCs To
Be Set Up List, NAS container for PS HO) message to the target BSS. The SGSN
shall not request resources for PFCs associated with PDP contexts with maximum
bit rate for uplink and downlink of 0 kbit/s or for which the Activity Status
Indicator within the PDP Context indicates that no active RAB exists on the
source side.
6\. Based upon the ABQP for each PFC the target BSS makes a decision about
which PFCs to assign radio resources. The algorithm by which the BSS decides
which PFCs that need resources is implementation specific. Due to resource
limitations not all downloaded PFCs will necessarily receive resource
allocation. The target BSS allocates TBFs for each PFC that it can accommodate
plus it will allocate CS resources required to establish the CS bearer in the
target cell.
7\. The target BSS shall prepare the Target BSS to Source BSS Transparent
Container which contains an Inter-Domain Handover Command including the CN
part (NAS container for PS HO) and the RN part (PS and CS Radio Resources).
8\. Target BSS shall send the PS Handover Request Acknowledge message (Local
TLLI, List of Set Up PFCs, Target BSS to Source BSS Transparent Container)
message to the SGSN. Upon sending the PS Handover Request Acknowledge message
the target BSS shall be prepared to receive downlink LLC PDUs from the SGSN
for the accepted PFCs.
Any PDP contexts for which a PFC was not established are maintained in the
SGSN and the related SAPIs and PFIs are kept. These PDP contexts may be
modified or deactivated by the SGSN via explicit SM procedures upon the
completion of the routing area update (RAU) procedure performed during the
execution phase.
9\. The SGSN passes the assigned list of TEIDs for each PDP context for which
a PFC was assigned in the RAB setup information IE in the Forward Relocation
Response (Cause, List of Set Up PFCs, Target BSS to Source BSS Transparent
Container) in the BSS Container, Tunnel Endpoint Identifier Control Plane,
SGSN Address for User Traffic, Tunnel Endpoint Identifier Data II) message to
the MME. The NSAPIs of the active PDP Contexts received in the Forward
Relocation Request message for which the PS handover continues, i.e. for which
resources are allocated for the PFCs in the target BSS, are indicated in this
message.
The Tunnel Endpoint Identifier Data II, one information element for each PDP
context, is the tunnel endpoint of the SGSN and is used for data forwarding
from the Serving GW, via the new SGSN, to the target BSS. The SGSN activates
the allocated LLC/SNDCP engines as specified in 3GPP TS 44.064 for an SGSN
originated Reset or \'Reset to the old XID parameters\'.
When the MME receives the Forward Relocation Response message and it decides
to proceed with the handover, the preparation phase is finished and the
execution phase will follow.
#### 5.3.2.7 MO CS Call in Active Mode -- Execution Phase
{width="6.507638888888889in" height="7.226388888888889in"}
Figure 5.3.2.7-1: CS Call Request in eUTRAN, Call in GSM/WCDMA -- Execution
Phase
1\. The Serving GW continues to receive IP packets from the PDN GW and
forwards them to the UE/MS via the eNodeB.
2\. The MME continues the PS handover by sending a Relocation Command (Target
BSS to Source BSS Transparent Container (Inter-Domain Handover Command with RN
part and CN part), RABs to be Released List, RABs Subject to Data Forwarding
List) message to the eNodeB. \"RABs to be released list\" will be the list of
all NSAPIs (RAB Ids) for which a PFC was not established \"RABs Subject to
Data forwarding list\" will be the list of all NSAPIs (RAB Ids) for which a
PFC was established.
3\. The eNodeB sends the Handover from eUTRAN Command message which includes a
PS Handover Command (RN part and CN part) created by the target BSS and the
minimum required set of SI/PSI information. It is assumed the eNodeB will be
able to provide the MS/UE with SI/PSI information corresponding to the target
GERAN cell as a result of receiving this information from target BSS in Target
BSS to Source BSS Transparent Container received during the preparation phase.
Before sending the Handover from eUTRAN Command message the uplink and
downlink data transfer shall be suspended in the eNodeB for the RABs that
require delivery order.
Upon the reception of the HANDOVER from eUTRAN Command message containing the
PS Handover Command message, the UE/MS shall associate its RAB IDs to the
respective PFIs based on the relation with the NSAPI and shall suspend the
uplink transmission of the user plane data.
NOTE 1: The Forward SRNS Context procedure (shown as occurring after this step
in section 5.5.2.3.3 of TS 23.401 [3]) is left out here since the need for it
is still FFS.
4\. The UE/MS executes the handover according to the parameters provided in
the message delivered in step 4. The procedure is the same as in step 6 of the
Inter-SGSN A/Gb to A/Gb PS Handover with the additional function of
association of the received PFI and existing RAB Id related to the particular
NSAPI as described in clause 4.4.1 of TS 43.129.
5\. After accessing the cell using access bursts and receiving timing advance
information from the BSS in step 6, the MS processes the NAS container and
then sends one XID Response message to the new SGSN. The UE/MS sends this
message immediately after receiving the Packet Physical Information message
containing the timing advance or, in the synchronised network case,
immediately if the PS Handover Access message is not required to be sent.
Upon sending the XID Response message, the UE/MS shall resume the user data
transfer only for those NSAPIs for which there are radio resources allocated
in the target cell. For NSAPIs using LLC ADM for which radio resources were
not allocated in the target cell the MS may request for radio resources using
the legacy procedures.
NOTE 2: If the SGSN indicated Reset (i.e. reset to default parameters) in the
NAS container for PS HO included in the Handover from eUTRAN Command message
in order to avoid collision cases the mobile station may avoid triggering XID
negotiation for any LLC SAPI used in LLC ADM, but wait for the SGSN to do so.
In any case the UE/MS may avoid triggering XID negotiation for any LLC SAPI
used in LLC ABM, but wait for the SGSN to do so.
6\. As soon as the UE/MS completes the PS Handover procedure (by sending the
XID Response message) it establishes the main signalling link on the allocated
dedicated channel (i.e. MS/UE sends a SABM containing a layer 3 Service
Request message = CM SERVICE REQUEST to the BSS) and the BSS responds by
sending a UA. Upon receiving the SABM (containing a CM SERVICE REQUEST
message) the BSS sends a COMPLETE LAYER 3 INFORMATION message (containing a CM
SERVICE REQUEST message) to the MSC which indicates CS resources have been
allocated in the GERAN cell. When the RR connection is established the MS
enters DTM and the CS call establishment procedure completes.
NOTE 3: This step is not shown in section 5.5.2.3.3 of TS 23.401 [3] since no
CS resource allocation is included in that handover procedure.
7\. Upon receiving the PS Handover Complete message, the SGSN send a Forward
Relocation Complete message to the MME to indicate completion of the PS
handover procedures. The MME responds with a Forward Relocation Complete
Acknowledge message.
8\. The SGSN sends an Update PDP Context Request (new SGSN Address, TEID, QoS
Negotiated) message to the Serving GW concerned. The Serving GW updates the
PDP context fields and returns an Update PDP Context Response (TEID) message.
From now on the Serving GW sends new incoming downlink IP packets to the SGSN
instead of to the MME.
NOTE 4: The additional steps of the Update Bearer Request - Update Bearer
Response exchange between the Serving GW and PDN GW are not shown but will be
performed as per the equivalent steps of section 5.5.2.3.3 of TS 23.401 [3].
9\. If the SGSN indicated Reset (i.e. reset to default parameters) in the NAS
container for PS HO included in the Handover from eUTRAN Command message then
on receipt of the PS Handover Complete the SGSN initiates an LLC/SNDCP XID
negotiation for each LLC SAPI used in LLC ADM. In this case if the SGSN wants
to use the default parameters, it shall send an empty XID Command. If the SGSN
indicated \'Reset to the old XID parameters\' in the NAS container for PS HO,
no further XID negotiation is required for LLC SAPIs used in LLC ADM only.
The SGSN (re-)establishes LLC ABM for the PDP contexts which use acknowledged
information transfer. During the exchange of SABM and UA the SGSN shall
perform LLC/SNDCP XID negotiation.
10\. The UE/MS may trigger the Routing Area Update procedure when the sending
of uplink packet data is possible. The detailed steps performed are as per
section 5.5.2.3.3 of TS 23.401 [3].
#### 5.3.2.8 MT CS Call in Idle Mode
One solution is to reuse the MT CS Call in Active mode procedure as described
above with the following modifications:
\- When the MME receives a CS Page from the MSC it forwards the CS Page
notification to one or more eNBs.
\- Upon receiving a CS Page notification each eNB sends a page notification to
the target UE in an attempt to determine the serving eNB.
\- The UE responds to the CS Page notification by triggering RRC connection
establishment and then awaits further instructions from the serving eNB.
\- The eNodeB indicates a single packet flow requires PS Handover (PFI = 1
associated with LLC SAPI 1). The default XID parameters are always associated
with this PFI along with a default PDP Context (i.e. a null PDP Context can be
sent to the SGSN).
\- The eNodeB may choose to invoke the optional Measurement Report
Solicitation so that the UE/MS is at minimum informed that a PS Handover is
pending (i.e. so it can implicitly perform a state transition to Active mode).
The execution phase is the same as for the MT CS Call in Active mode except
that there are no incoming IP packets to be delivered to the UE/MS.
Other alternatives are cell re-selection, redirection or inter RAT cell
change.
#### 5.3.2.9 MO CS Call in Idle Mode
One solution is to reuse the MO CS Call in Active mode procedure as described
above with the following modifications:
\- The UE trigger an RRC connection establishment (with special cause for MO
CS Calls) and then awaits further instructions from the serving eNB.
\- The eNodeB may choose to invoke the optional Measurement Report
Solicitation so that the UE/MS is at minimum informed that its CS Call Request
has been accepted and a PS Handover is pending (i.e. so it can implicitly
perform a state transition to Active mode).
The execution phase is the same as for the MO CS Call in Active mode except
that there are no incoming IP packets to be delivered to the UE/MS.
Other alternatives are cell reselection, redirection or inter RAT cell change.
### 5.3.3 Co-existence with IMS based services
The \"Page in eUTRAN, Call in GSM/WCDMA\" solution can co-exist with IMS
features as MTSI, ICS, SR VCC. A UE can in principle support both MTSI and
\"Page in eUTRAN, Call in GSM/WCDMA\" simultaneously but it is expected that
an MTSI capable UE would use MTSI for voice calls in a MTSI enabled network.
### 5.3.4 Roaming aspects
To support \"Page in eUTRAN, Call in GSM/WCDMA\" at roaming the visited NW and
the UE need to support the feature.
### 5.3.5 Security aspects
No security impacts are foreseen.
### 5.3.6 Charging aspects
No charging impacts are foreseen.
### 5.3.7 Legal requirements aspects
The page in \"Page in eUTRAN, Call in GSM/WCDMA\" solution relies on 2G/3G
coverage to provide emergency services. No impacts on Legal intercept are
foreseen.
### 5.3.8 Assessment
The \"Page in eUTRAN, Call in GSM/WCDMA\" solution leverages on existing 2G/3G
mechanisms. The level of impact on the 2G/3G CN is minor, i.e. no new protocol
is required.
\"Page in eUTRAN, Call in GSM/WCDMA\" should be understood as a cost efficient
\"gap filler\" to provide CS voice services that offers the operator a bit
more time to migrate to MTSI when deploying eUTRAN. During a CS voice service
there may be a degradation of the PS service.
## 5.4 Alternative 4 -- SIP based approach
### 5.4.1 Key aspects of delivering a successful solution
**One of the most valuable elements of the legacy CS domain is the
standardised voice call services in the MSC and UE. These are provided via the
DTAP protocol (TS 24.008), hence in order to leverage this value a solution
needs to be found which enables the retention of the 24.008 signalling over PS
bearers. Specifically a solution needs to be found which addresses the
following aspects:**
\- Communication of 24.008 signalling over PS RABs is not defined; a transport
mechanism is required to communicate 24.008 over PS RABs. This transport
mechanism will need to address not only the encapsulation of 24.008, but also
the address discovery and routing.
* [A SIP based solution can do this using standard SIP discovery, registration and routing procedures]
\- Use of 24.008 call control with PS RABs will require 24.008 extensions.
Currently, it is not possible to communicate SDPs (IP address/port numbers,
codecs) between two end-points using 24.008.
* [A SIP based solution can do this using MIME encapsulation of 24.008]
\- Most proposed mechanisms to achieve handover between EPC and legacy CS
domain will require some functionality in the MME, however the complexity of
this mechanism needs to be kept simple if the cost and performance of the EPC
is not to be adversely affected.
* [A SIP based solution can do this a number of ways, one of which would be to utilise the approach used to address the problem of Single Radio Voice Call Continuity]
\- Key to providing an acceptable voice service is the ability to control the
QoS of the bearers used for the user plane. Any solution will need to have
access to a QoS control mechanism in EPC in order to achieve this.
* [A SIP based solution can do this, since the SDP information can be provided over the Rx interface into the standard PCC architecture over the Rx interface]
### 5.4.2 Conclusion and recommendation
A SIP based approach has the ability to address many of the key challenges of
keeping the core value of the CS Domain, namely providing the ability to
retain TS 24.008 (DTAP) standardised signalling, and using this to carry
forward legacy CS Services over the newly define Evolved Packet Core. However
it is recognised that there may be other viable approaches and it is
recommended that solutions to the issues identified in section 5.4.1 be
clearly addressed in this technical report as part of the evaluation process
of all the proposed solutions.
## 5.5 Alternative 5 -- Combined solution
### 5.5.0 General
This solution is a combination of Alternative 1 - Evolved MSC (as described in
section 5.1) enabling CS domain voice calls and SMS for an EPS attached UE,
and Alternative 3 - Page in eUTRAN, Call in GSM/WCDMA (as described in section
5.3) enabling re-direction of an EPS attached UE towards 2G/3G access before
establishment of a MO or MT CS voice call.
### 5.5.1 Reference architecture
#### 5.5.1.1 General
The combination of the reference architecture is straight forward, as the
reference point between MME and (e)MSC is common to both alternatives. The
reference point between UE and eMSC comes from Alternative 1. Alternative 1
uses the term eMSC whereas Alternative 3 uses MSC. As both alternatives are
adding Rel-8 functionality onto the MSC it is suggested to use the term MSC.
Figure 5.5.1.1-1 shows the non-roaming architecture, Figure 5.5.1.1-2 the
roaming architecture.
Figure 5.5.1.1-1: Non-Roaming Architecture
Figure 5.5.1.1-2: Roaming Architecture
The proposal reuses the concepts from 2G/3G of the Gs interface between the
MSC Server and the SGSN. Thus for the Location Update procedure and for Paging
messages a \"Gs like\" interface over reference point Z2 between the MME and
the MSC Server is used.
The support of reference points Z1 and Rx by the MSC is optional, depending on
the deployment characteristics chosen by the operator. If the operator chooses
the deployment characteristic where the MSC Server controls establishment of
voice calls and handling of SMS under E-UTRAN coverage, Z1 and Rx need to be
supported by the MSC.
#### 5.5.1.2 Required functionality in network elements
**MSC**
\- Gs-like registration and paging towards MME for a UE attached over EPS
access
\- Optional Call and SMS control for UE using secure and reliable IP transport
(replacing use of Mc for channel assignment with Rx using PCC for bearer
establishment)
\- Optional handover preparation and execution
\- Optional handover signalling
**MME**
\- Gs-like registration and paging
\- Optional handover signalling exchange with the MSC for preparation and
execution
**UE**
\- Gs-like registration and paging
\- Redirection to CS capable legacy access for MO and MT voice calls
\- CS domain call and SMS control signalling over EPS using secure and
reliable IP transport
#### 5.5.1.3 Reference points
**Z1** Reference point between UE and MSC
**Z2** Reference point between MME and MSC
#### 5.5.1.4 Protocol Stacks
A possible protocol stack for control plane over Z1 is illustrated in figure
5.1.1.5-1. The decision about use of SCTP or another protocol can be left open
for stage 3 discussions and decision.
{width="6.665972222222222in" height="2.53125in"}
Figure 5.1.1.4-1: Protocol stack for control plane over Z1
The protocol stack for user plane over Z1 is illustrated in figure 5.1.1.5-2.
{width="6.580555555555556in" height="2.2493055555555554in"}
Figure 5.1.1.4-2: Protocol stack for user plane over Z1
### 5.5.2 Procedures
#### 5.5.2.1 CS attachment
CS attachment is done as proposed in Alternative 3 (CS location update
procedure via MME and Gs-like interface to MSC, during EPS Attach) (see
5.3.2.1 for more details).
The combined solution requires that one more IE inserted by the MSC into the
Location Update Ack to be passed down to the UE. This IE would hold an
indication about the support of \'CS domain call and SMS control signalling
over EPS\' that may be the IP address of the MSC, or just a bit-indication
triggering the UE to do an eMSC discovery as described in Alternative 1.
#### 5.5.2.2 Location Update
Done as proposed in Alternative 3.
Editor\'s note: If a UE has an ongoing MO or MT call over EPS, no Location
Update shall be sent to the eMSC, e.g. the UE should not initiate a combined
TA/LA Update procedure. Further details and procedures are FFS.
#### 5.5.2.3 Deregistration
Done as proposed in Alternative 3.
#### 5.5.2.4 eMSC Discovery
Done as proposed in Alternative 1.
#### 5.5.2.5 Gs-like Paging
Done as proposed in Alternative 3.
The combined solution requires that the UE, upon receiving the Gs-like paging
does either of the following:
\- if the UE has obtained the IP address of an eMSC at time of location update
and the UE has \'CS domain call and SMS control signalling over
EPS\'-capability then it will answer the paging request via EPS, and a secure
IP connectivity will be established between UE and MSC
\- if the UE has no IP address of an eMSC, or is not \'CS domain call and SMS
control signalling over EPS\'-capable then it will continue as described in
Alternative 3.
#### 5.5.2.6 MT Call Setup
MT call setup follows the Gs-like Paging as described in 5.5.2.5.
\- If the UE has answered the paging via EPS then MT call setup takes place as
described in Alternative 1 (5.1.2.5).
\- If the UE has answered the paging via legacy CS access then MT call setup
takes place as described in Alternative 3.
#### 5.5.2.7 MO Call Setup
\- If the UE has obtained the IP address of an eMSC at time of location update
and the UE has \'CS domain call and SMS control signalling over
EPS\'-capability then it will initiate a secure IP connectivity with the MSC,
and MO call setup takes place as described in Alternative 1 (5.1.2.5).
\- If the UE has no IP address of an eMSC, or is not \'CS domain call and SMS
control signalling over EPS\'-capable then it perform MO call setup as
described in Alternative 3.
#### 5.5.2.8 MO and MT SMS
Done as proposed in Alternative 1 (5.1.2.6).
#### 5.5.2.9 HO from E-UTRAN to GSM/UMTS CS
Done as proposed in Alternative 1 (5.1.2.7).
#### 5.5.2.10 HO from GSM/UMTS CS to E-UTRAN
Done as proposed in Alternative 1 (5.1.2.8).
### 5.5.3 Co-existence with IMS based services
See sections 5.1.3 and 5.3.3.
### 5.5.4 Roaming aspects
#### 5.5.4.1 \'CS domain call and SMS control signalling over EPS\' support in
the VPLMN and UE
This allows full re-use of CS domain roaming agreements and existing inter-
operator accounting mechanisms (TAP records exchange) for CS Domain services
over evolved PS access. In case of a handover between E-UTRAN and GSM/UMTS CS
the user experience will be comparable to the one in non-roaming case as the
handover is performed solely in the VPLMN, which optimizes the user plane
routing.
#### 5.5.4.2 No \'CS domain call and SMS control signalling over EPS\' support
in the VPLMN or UE
Redirection of voice calls to GSM/UMTS CS takes place if this feature is
supported in UE and VPLMN.
### 5.5.5 Security aspects
See sections 5.1.5 and 5.3.5.
### 5.5.6 Charging aspects
See sections 5.1.6 and 5.3.6.
### 5.5.7 Legal requirements aspects
See sections 5.1.7 and 5.3.7.
### 5.5.8 Assessment
The \'Combined solution\' alternative is a full solution according to the
scope this study, i.e. it is fulfilling all identified overall and
architectural requirements.
The main design-principles of this solution are:
\- Maximal re-use of CS Domain mechanisms and deployed infrastructure thus
securing operators\' investments in legacy CS Domain and radio access
equipment and services.
The \'Combined solution\' alternative allows operators to offer legacy CS
domain services fully leveraging the already deployed evolved access coverage,
and should be understood as cost-efficient gap-filler until MTSI can be
offered with sufficient VoIP-capable PS coverage.
The combined alternative is beneficial because it allows a migration for
operators from redirection of voice calls to GSM/WCDMA to doing CS domain
controlled voice calls over EPS. It is also be beneficial for roaming
scenarios, if at least redirection of voice calls to GSM/WCDMA is available in
all networks and all UEs.
# 6 Conclusion
#