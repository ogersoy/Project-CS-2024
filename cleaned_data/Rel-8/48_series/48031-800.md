# Foreword
This Technical Specification has been produced by the 3^rd^ Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document contains the definition of the SMLCPP protocol to be used
between two Serving Mobile Location Centres (SMLC).
The LCS architecture is described in 3GPP TS 43.059. The following aspects of
it are relevant to the issue:
\- each SMLC controls a number of LMUs, and a given LMU is under the direct
control of a single SMLC;
\- there is a direct communication path, independent of SMLCPP, between a LMU
and the SMLC that controls it;
\- deciphering keys are controlled by one SMLC in the location area and sent
to other SMLCs in the same location area.
SMLCPP runs between two SMLC functions in the same PLMN. Transport is outside
the scope of the present document. It assumes a transport service between
these functions, as provided by BSSAP-LE. The present document assumes that
the underlying transport (e.g., as described by BSSAP-LE specifications)
provides for transport and routing for any two pairs of SMLCs which need to
run SMLCPP exchanges.
The main functions of SMLCPP are described in [5]. The key aspects are:
a) allowing an SMLC to ask for and obtain information about Radio Interface
Timing (RIT), as known from measurements done by LMUs not under its direct
control;
c) allowing an SMLC, that controls deciphering keys in the location area, to
sent them to other SMLCs in the same location area.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
  * References are either specific (identified by date of publication, edition number, version number, etc.) or nonâ€‘specific.
  * For a specific reference, subsequent revisions do not apply.
```{=html}
``` \- For a non-specific reference, the latest version applies. In the > case
of a reference to a 3GPP document (including a GSM document), > a non-specific
reference implicitly refers to the latest version > of that document _in the
same Release as the present document_.
[1] 3GPP TS 21.905: \"Vocabulary for 3GPP Specifications\".
[2] (void)
[3] 3GPP TS 24.007: \"Mobile radio interface signalling layer 3; General
aspects\".
[4] 3GPP TS 24.008: \"Mobile radio interface layer 3 specification\".
[5] 3GPP TS 43.059: \"Functional Stage 2 Description of Location Services in
GERAN (Release 4)\".
[6] 3GPP TS 29.002: \"Mobile Application Part (MAP) specification\".
[7] ASN.1 encoding rules "Specification of Packet Encoding Rules (PER)" ITU-T
Rec. X.691 (1997) \| ISO/IEC 8825-2:1998.
[8] (void)
[9] Abstract Syntax Notation One (ASN.1) "Specification of Basic Notation"
ITU-T Rec.X.680 (1997) \| ISO/IEC 8824 -- 1:1998.
[10] (void)
[11] 3GPP TS 44.071: \"Mobile radio interface layer 3 Location Services (LCS)
specification\".
> [12] 3GPP TS 49.031: \"Location Services (LCS); Base Station System
> Application Part LCS Extension (BSSAP-LE)\".
# 3 Abbreviations
Abbreviations used in the present document are listed in 3GPP TS 21.905 or in
3GPP TS 43.059.
# 4 Procedures
## 4.1 RIT Procedures
Two modes of operation are supported:
\- [provision of RIT information on request]{.underline}. In this mode a SMLC
Client needing RIT information requests it from another SMLC using the RIT
Query operation. The SMLC Server sends the requested RIT information using the
RIT Indication operation. There are two cases:
\- single indication: RIT Indication is requested only once.
In this case the procedure consists of one RIT Query and one RIT Indication
operations.
\- Open-ended repetitive RIT Indications: RIT information is requested on a
regular basis until the RIT Query Stop operation.
In this case the procedure consists of one RIT Query, one or more RIT
Indication, and one RIT Query Stop operations.
\- [Autonomous provision of RIT information]{.underline}. In this mode, the
RIT information is provided automatically by the SMLC Server, according to an
internal configuration not managed through SMLCPP (e.g., by O&M).
In the autonomous mode the procedure consists of one or more RIT Indication
operations.
Three RIT related operations are then included in the SMLCPP, one for
requesting the provision of RIT data, the second for provision, and the third
one for stopping open-ended repetitive indications.
### 4.1.1 RIT Query Operation
This operation allows a SMLC to query RIT information from another SMLC. This
operation consists of sending of a RIT Query Request. It includes the Request
ID , that is used to identify different queries. The RIT Query Request also
includes the description of the scheduling of RIT Indication operations in the
reverse direction. This includes the following cases:
\- single indication; RIT Indication is requested only once;
\- open-ended repetitive indications; RIT Indication operations are requested
on a regular basis until the RIT Query Stop operation.
A RIT Query Response includes the same Request ID that the Request included,
and it is used as a positive acknowledgement. A RIT Query Error message can be
sent in return, if the SMLC Server detects an error situation (e.g. syntax
errors, or overlapping Request ID values), or it can not fullfil the Request
(e.g. RIT information is requested for unknown BTSs ). It contains the same
Request ID values as the Request.
### 4.1.2 RIT Indication Operation
This operation allows a SMLC to send RIT information to another SMLC. It can
be used both in the cased of autonomous provision, and the provision of RIT
information on request.
The RIT Indication Request contains RIT information to be delivered. It also
contains the Request ID that:
\- has the same value as the RIT Query operation, that invoked the RIT
Indication (RIT provision on request);
\- has a reserved value indicating autonomous provision.
A RIT Indication Response includes the same Request ID that the Request
included, and it is used as a positive acknowledgement. The SMLC Client can
send a RIT Indication Error to the SMLC Server, if it detects an error
situation (e.g. syntax errors, or unknown Request ID values).
### 4.1.3 RIT Query Stop Operation
This operation allows a SMLC to send an indication to another SMLCPP to stop
sending RIT information, that it has originally asked to obtain on open-ended
repetitive basis. The RIT Query Stop Request includes the Request ID values
that is the same as in the corresponding RIT Query that should be stopped. A
RIT Query Stop Response includes the same Request ID that the Request
included, and it is used as a positive acknowledgement. The SMLC Server can
send a RIT Query Stop Error to the SMLC Client, if it detects an error
situation (e.g. syntax errors, or unknown Request ID values).
## 4.2 (void)
## 4.3 Deciphering Keys Procedure
This procedure includes one operation that is related to LCS assistance data
broadcast deciphering keys. With this operation the SMLC Server controlling
the deciphering keys (needed in LCS Assistance Data broadcast) can send the
deciphering keys to other SMLC Clients in the same location area. One SMLC
(i.e. SMLC Server) in location area is selected to control the deciphering
keys and sending the keys to other SMLC Clients in location area. The sending
has to be done to each SMLC Client with a separate message.
### 4.3.1 Deciphering Keys Update Operation
This operation allows a SMLC controlling deciphering keys to send the keys to
another SMLC Client.
The Deciphering Keys Update Request includes the Request ID and information of
keys. A Deciphering Keys Update Response includes only the same Request ID
that the Request included, and it is used as a positive acknowledgement. The
SMLC Client can send a Deciphering Keys Update Error to the SMLC Server, if it
detects an error situation (e.g. syntax errors). It contains the same Request
ID values as the Request.
# 5 Error Handling
In this Clause it is described how the SMLC should act in different error
situations.
## 5.1 Missing Message Part
When a SMLC receives a Request message that does not contain one or more
expected message parts (e.g. information elements, Arguments, Request ID), it
sends an Error with the indication \'Missing Message Part\' (if the operation
type is known), and ignores the Request.
When a SMLC receives a Response or Error message that does not contain one or
more expected message parts, it ignores the message.
## 5.2 Repeated Message Part
When a SMLC receives a Request message that contains one or more message parts
(e.g. information elements, Arguments, Request ID) more times than expected,
it sends an Error with the indication \'Repeated Message Part\', and ignores
the Request.
When a SMLC receives a Response or Error message that contains one or more
message parts more times than expected, it ignores the message.
## 5.3 Unforeseen Message Part
When a SMLC receives a Request message that contains one or more unforeseen
message parts (e.g. information elements, Result), it sends an Error with the
indication \'Unforeseen Message Part\', and ignores the Request.
When a SMLC receives a Response or Error message that contains one or more
unforeseen message parts, it ignores the message.
## 5.4 Incorrect Data
When a SMLC receives a Request message that it can not fully understand, that
contains syntax errors, or incorrect values, and no other Error Indication
applies, it sends an Error with the indication \'Incorrect Data\' (if the
operation type is known), and ignores the Request. If the SMLC can not
understand the operation of the Request,it just ignores the Request.
When a SMLC receives a Response or Error message that it can not fully
understand, that contains syntax errors, or incorrect values, it ignores the
message.
## 5.5 Repeated Operation
When a SMLC receives a Request message containing a Request ID, that is
already in use by the same type of operation, the SMLC sends an Error with the
indication \'Repeated Operation\', and ignores the latter Request. In order to
avoid mistaken use of this error indication for an open-ended repetitive RIT
Indication, an SMLC server may choose not to send a RIT Indication Request
until it has received a RIT Indication Response or RIT Indication Error from
the SMLC Client for any previous RIT Indication Request. An SMLC Client may
likewise choose not to send this error indication if, before it has responded
to a RIT Indication Request, it receives a subsequent RIT Indication Request
from the same SMLC Server carrying the same Request ID: if the SMLC client
makes this choice, it shall prepare to treat the subsequent RIT Indication
Request as legitimate.
## 5.6 Unforeseen Operation
When a SMLC receives a Request for an operation that is unexpected, and none
of the situations in subclause 5.5 applies,then the SMLC sends an Error with
the indication \'Unforeseen Operation\', and ignores the Request.
## 5.7 Unknown Request ID
When a SMLC receives a RIT Indication Request that contains a Request ID
value, that is not connected to any pending RIT Query operation, or autonomous
provision of RIT information, it sends a RIT Indication Error with the
indication \'Unknown Request ID\'.
When a SMLC receives a RIT Query Stop that contains a Request ID value, that
is not connected to any pending RIT Query operation, it sends a RIT Query Stop
Error with the indication \'Unknown Request ID\'.
When a SMLC receives a Response or Error message, that contains a Request ID
that is not connected to any pending operation of that type,the SMLC ignores
the message.
## 5.8 Dublicate Request ID
When a SMLC receives a Request message containing a Request ID, that is
already in use by another type of operation, the SMLC sends an Error with the
indication \'Dublicate Request ID\'.
## 5.9 No RIT Information
When a SMLC receives a RIT Query Request, and does not have any of the
requested RIT information (e.g. all cells, whose RIT information is asked for,
are unknown) then the SMLC sends a RIT Query Error with the indication \'No
RIT Information\'.
When during open-ended repetitive RIT indications, or autonumous provision of
RIT information, there is no RIT information available, the requested SMLC
refrains from sending RIT Indication Requests.
When the requesting SMLC has asked for open-ended repetitive RIT indications,
but it does not receive expected RIT information, it can send a RIT Query
Stop, and then a new RIT Query.
## 5.10 (void)
## 5.11 Deciphering Keys Error
When a SMLCPP receives a Send Deciphering Keys Request, and it it detects an
error situation connected with the contents of the message (e.g.the SMLC acts
as a controller of deciphering keys for a location area, but it receives from
another SMLC keys for the same location area), it sends a Send Deciphering
Keys Error message with the indication \'Deciphering Keys Error\'.
## 5.12 Internal Error
When a SMLCPP has any internal errors, that prevent it to act according to a
Request, it can use \'Internal Error\' indication in the Error message.
## 5.13 Other Error Situations
When a SMLCPP detects any other error situation when receiving a Request, it
can use \'No Indication\' indication in the Error message.
## 5.14 Summary of Indications
The following table summarizes the error indications, and which operations use
them.
Table 5.14: Error Indications and operations
* * *
Error Indication RIT Query RIT Indication RIT Query Stop Send Deciphering Keys
Missing Message Part X X X X Repeated Message Part X X X X Unforeseen Message
Part X X X X Incorrect Data X X X X Repeated Operation X X X X Unforeseen
Operation X X  
UnknownRequest ID X X  
Dublicate Request ID X X X X No RIT Information X  
Deciphering Keys Error X Internal Error X X X X No Indication X X X X
* * *
# 6 Signalling Elements
In this Clause the messages are described.
The formal definitions of the SMLCPP messages are based on:
\- Abstract Syntax Notation One (ASN.1) "Specification of Basic Notation"
ITU-T Rec.X.680 (1997) \| ISO/IEC 8824 -- 1:1998
\- ASN.1 encoding rules "Specification of Packet Encoding Rules (PER)" ITU-T
Rec. X.691 (1997) \| ISO/IEC 8825-2:1998
\- is consistent with these ITU-T recommendations. Also further definitions in
this document are based on the same X.680 and X.691. BASIC-PER, unaligned
variant is used.
## 6.1 Messages
This clause describes the contents of the different messages.
There are three different types of messages:
\- request;
\- response;
\- error
Operations use some or all of these message types, as described in Clause 4.
The messages structures are as follows.
The following ASN.1 description gives the formal definition of the messages.
SMLCPP-PDUs
\-- { SMLCPP-Operations object identifier }
DEFINITIONS AUTOMATIC TAGS::=
BEGIN
\-- Export all operations as default
IMPORTS
SMLCPP-OPERATION, ERROR
FROM
SMLCPP-OperationDefinition
rit-Query-Req, rit-Indication-Req,
decipheringKeysUpdate-Req, rit-QueryStop-Req
FROM
SMLCPP-Operations
;
\-- Request, Response or errorPDU is encapsuled to SMLCPP-PDU.
SMLCPP-PDU::= CHOICE {
requestPDU SMLCPP-REQ-PDU,
responsePDU SMLCPP-RSP-PDU,
errorPDU SMLCPP-ERROR-PDU,
...
}
\-- PDU definitions for Requests
SMLCPP-REQ-PDU ::= SEQUENCE {
code SMLCPP-OPERATION.&code ({SMLCPP-Operation-table}),
requestID INTEGER (0..255),
value SMLCPP-OPERATION.&Argument ({SMLCPP-Operation-table}{\@code})
}
\-- PDU definitions for Responses
SMLCPP-RSP-PDU ::= SEQUENCE {
code SMLCPP-OPERATION.&code ({SMLCPP-Operation-table}),
requestID INTEGER (0..255),
value SMLCPP-OPERATION.&Result ({SMLCPP-Operation-table}{\@code})
}
\-- PDU definition for ERROR messages
SMLCPP-ERROR-PDU ::= SEQUENCE {
requestID INTEGER (0..255),
value ERROR.&code
}
SMLCPP-Operation-table SMLCPP-OPERATION ::= {
rit-Query-Req \|
rit-Indication-Req \|
decipheringKeysUpdate-Req \|
rit-QueryStop-Req,
...
}
END
### 6.1.1 Operation Code
Operation code identifies different operations. Possible operations are those
described in clause 4:
\- RIT Query;
\- RIT Indication;
\- RIT Query Stop;
\- Deciphering Keys Update.
The following ASN.1 operation description is based on the operation definition
in the Annex A, and gives the formal definition of operations.
SMLCPP-Operations
\-- { SMLCPP-Operations object identifier }
DEFINITIONS AUTOMATIC TAGS::=
BEGIN
\-- Export all operations as default
IMPORTS
\-- SMLCPP-OPERATION and ERROR definitions from
SMLCPP-OPERATION, ERROR
FROM
SMLCPP-OperationDefinition
\-- SMLCPP Datatypes
RIT-Query-Arg, RIT-QueryRsp-Arg, RIT-Indication-Arg, RIT-IndicationRsp-Arg,
DecipheringKeys-Arg,
DecipheringKeysRsp-Arg, RIT-StopQuery-Arg, RIT-StopQueryRsp-Arg
FROM
SMLCPP-DataTypes
\-- SMLCPP Errors
missingMsgPart, repeatedMsgPart, unforeseenMsgPart, incorrectData,
repeatedOperation, unforeseenOperation, unknownRequestID,
dublicateErrorID, noRITInfo,
decipheringKeyError, internalError, noIndication
FROM
SMLCPP-Errors
;
\-- SMLCPP Operations
\-- RIT Query Request Operation
rit-Query-Req SMLCPP-OPERATION ::= {
ARGUMENT RIT-Query-Arg
RESULT RIT-QueryRsp-Arg
ERRORS { missingMsgPart \|
repeatedMsgPart \|
unforeseenMsgPart \|
incorrectData \|
repeatedOperation \|
unknownRequestID \|
dublicateErrorID \|
noRITInfo \|
internalError \|
noIndication
}
CODE 1
}
\-- RIT Indication Operation
rit-Indication-Req SMLCPP-OPERATION ::= {
ARGUMENT RIT-Indication-Arg
RESULT RIT-IndicationRsp-Arg
ERRORS { missingMsgPart \|
repeatedMsgPart \|
unforeseenMsgPart \|
incorrectData \|
repeatedOperation \|
unforeseenOperation \|
unknownRequestID \|
dublicateErrorID \|
internalError \|
noIndication
}
CODE 2
}
\-- CODE 3 is reserved (Perform TOA Measurement Operation)
\-- Deciphering Keys Update Operation
decipheringKeysUpdate-Req SMLCPP-OPERATION ::= {
ARGUMENT DecipheringKeys-Arg
RESULT DecipheringKeysRsp-Arg
ERRORS { missingMsgPart \|
repeatedMsgPart \|
unforeseenMsgPart \|
incorrectData \|
repeatedOperation \|
unforeseenOperation \|
dublicateErrorID \|
decipheringKeyError \|
internalError \|
noIndication
}
CODE 4
}
\-- RIT Query Stop Operation
rit-QueryStop-Req SMLCPP-OPERATION ::= {
ARGUMENT RIT-StopQuery-Arg
RESULT RIT-StopQueryRsp-Arg
ERRORS { missingMsgPart \|
repeatedMsgPart \|
unforeseenMsgPart \|
incorrectData \|
repeatedOperation \|
unforeseenOperation \|
unknownRequestID \|
dublicateErrorID \|
internalError \|
noIndication
}
CODE 5
}
END
### 6.1.2 Request ID
Request ID is used to refer to different requests from the same SMLC, or to
refer to autonomous sending in the case of RIT Indication operation.
Value \'0\' may indicate autonomous sending in the case of the RIT Indication
operation. This value is not used by any other operation.
Other values 1-255 indicate an ID from the requesting SMLC, that can select
the value from those not already used between it and a certain recipient SMLC.
No certain order of Request ID values is used (e.g. the value does not need to
be sequential 1, 2, 3,...).
Within an operation possible Response and Error use the same Request ID that
was in the Request.
In the case of open ended repetitive RIT Indications, the RIT Query operation
contains a certain Request ID value, that the successive RIT Indication
operations and the RIT Query Stop operation also use to refer to this
reporting task. The value shall not be the one for autonomous sending.
### 6.1.3 Argument
Argument contains operation specific information in the Request message. See
Annex B for the contents in each operation, and 6.2 for the formal ASN.1
definition.
### 6.1.4 Result
Result contains operation specific information in the Response message. See
annex B for the contents in each operation, and subclause 6.2 for the formal
ASN.1 definition.
### 6.1.5 Error Indication
Error Indication provides some precision on a detected error. The possible
values of Error Indication are listed in table 1 in clause 5.
If an Error Indication is received encoding a value not in that table, the
receiver shall behave as if the value was \'No indication\'.
The following ASN.1 error description is based on the error definition in the
annex A, and gives the formal definition of errors.
SMLCPP-Errors
\-- { SMLCPP-Errors object identifier }
DEFINITIONS AUTOMATIC TAGS::=
BEGIN
\-- Export all errors as default
IMPORTS
\-- Operation definitions
ERROR
FROM
SMLCPP-OperationDefinition
;
\-- Message contents errors
missingMsgPart ERROR ::= {CODE 1} -- Missing message Part
repeatedMsgPart ERROR ::= {CODE 2} -- Repeated message Part
unforeseenMsgPart ERROR ::= {CODE 3} -- Unforeseen message Part
incorrectData ERROR ::= {CODE 4} -- Incorrect Data
\-- Operation errors
repeatedOperation ERROR ::= {CODE 5} -- Repeated Operation
unforeseenOperation ERROR ::= {CODE 6} -- Unforeseen Operation
\-- Request ID errors
unknownRequestID ERROR ::= {CODE 7} -- Unknown request ID
dublicateErrorID ERROR ::= {CODE 8} -- Duplicate Request ID
\-- SMLCPP data errors
noRITInfo ERROR ::= {CODE 9} -- No RIT information
\-- CODE 10 is reserved (noTOAMeasurements)
decipheringKeyError ERROR ::= {CODE 11} -- Deciphering Key error
\-- Other errors
internalError ERROR ::= {CODE 12} -- Internal Error
noIndication ERROR ::= {CODE 13} -- No indication
END
## 6.2 ASN.1 Definition of Arguments, Results, and IEs
The following ASN.1 description gives the formal definition of Arguments,
Results, and Information Elements.
SMLCPP-DataTypes
\-- { object identifier }
DEFINITIONS AUTOMATIC TAGS ::=
BEGIN
\-- Export all operations as default
IMPORTS
\-- Datatypes from 02.071, LLP
CI, LAC, TimeSlot, FrameNumber
FROM
LLP-DataTypes
\-- { LLP-DataTypes object identifier }
ExtensionContainer
FROM MAP-ExtensionDataTypes {
ccitt identified-organization (4) etsi (0) mobileDomain (0)
gsm-Network (1) modules (3) map-ExtensionDataTypes (21) version7 (7)}
;
\-- ARGUMENT DEFINITIONS
\-- RIT Indication Request (ARGUMENT)
RIT-Indication-Arg ::= SEQUENCE {
referenceClock ReferenceClock,
rit-ATDRTDQualityRes INTEGER (0..3), -- defines the resolution for ATDRTD
values
rit-ATDRTDChangeQualityRes INTEGER (0..3), -- defines the resolution for
ATDRTD change values
rit-Data SeqOfRITData,
extensionContainer ExtensionContainer OPTIONAL,
...
}
\-- RIT Indication Response (RESULT)
RIT-IndicationRsp-Arg ::= SEQUENCE {
extensionContainer ExtensionContainer OPTIONAL,
...
}
\-- RIT Query Request (ARGUMENT)
RIT-Query-Arg ::= SEQUENCE {
requestType RequestType,
rit-RequestDellList SeqOfRequestedRITCell,
extensionContainer ExtensionContainer OPTIONAL,
...
}
\-- RIT Query Response (RESULT)
RIT-QueryRsp-Arg ::= SEQUENCE {
extensionContainer ExtensionContainer OPTIONAL,
...
}
\-- RIT Stop Query (ARGUMENT)
RIT-StopQuery-Arg ::= SEQUENCE {
extensionContainer ExtensionContainer OPTIONAL,
...
}
\-- RIT Stop Query Rsp (RESULT)
RIT-StopQueryRsp-Arg ::= SEQUENCE {
extensionContainer ExtensionContainer OPTIONAL,
...
}
\-- Deciphering Keys (ARGUMENT)
DecipheringKeys-Arg ::= SEQUENCE {
decipheringKeyType DecipheringKeyType,
decipheringKeySet DecipheringKeys,
lac LAC,
extensionContainer ExtensionContainer OPTIONAL,
...
}
\-- Deciphering Keys Rsp(RESULT)
DecipheringKeysRsp-Arg ::= SEQUENCE {
extensionContainer ExtensionContainer OPTIONAL,
...
}
\-- FIELDS IN ARGUMENTS
\-- RIT-Query-Arg DEFINITIONS
\-- RequestType
RequestType ::= CHOICE {
\-- Send only one RIT Indication
singleSending NULL,
\-- Send RIT Indications until stop is received
openEnded OpenEndedType
}
OpenEndedType ::= SEQUENCE {
\-- Reporting period
reportingPeriodInfo ReportingPeriodInfo,
\-- Tresholds for change of AT and deviation of AT
changeLimit INTEGER (0..250) OPTIONAL,
deviationLimitInfo INTEGER (0..250) OPTIONAL
}
\-- Units and value of Reporting Period
ReportingPeriodInfo ::= SEQUENCE {
periodFormat PeriodFormat,
periodValue INTEGER (0..120)
}
PeriodFormat ::= ENUMERATED {
tensOfSeconds (0),
tensOfMinutes(1)
}
\-- RequestedRITCell is actually a sequence of requested cells
SeqOfRequestedRITCell ::= SEQUENCE (SIZE (1..16)) OF RequestedRITCell
RequestedRITCell ::= SEQUENCE {
cellLAC LAC,
cellCI CI
}
\-- RIT-Indication-Arg DEFINITIONS
\-- Reference clock definition, including reference cell and time
ReferenceClock ::= SEQUENCE {
referenceLAC LAC,
referenceCI CI,
referenceFrameNumber FrameNumber,
\-- If absoluteTime is absent, AT value of reference
\-- cell is not known
absoluteTime AbsoluteTime OPTIONAL
}
ReferenceAT ::= SEQUENCE {
seconds INTEGER (0..59),
nsecods INTEGER (0..999999999)
}
\-- Absolute time definition for reference cell
AbsoluteTime ::= SEQUENCE {
universalClock UniversalClockType,
\-- AT and ATChange definitions
referenceAT ReferenceAT,
\-- This Quality information defines the quality of AT value
\-- Resolution defines the resolution of Quality field as follows,
\-- 0= 0.005 us, 1= 0.01 us, 2= 0.05 us
rit-RefATQuality SEQUENCE {
resolution INTEGER (0..3),
atQuality INTEGER (0..63) },
referenceATChange INTEGER (-1000..1000),
\-- This Quality information defines the quality of ATChange value
\-- Resolution defines the resolution of Quality field as follows,
\-- 0= 0.00005 ppm, 1= 0.0001 ppm, 2= 0.0005
rit-RefATChangeQuality SEQUENCE {
resolution INTEGER (0..3),
atChangeQuality INTEGER (0..63) }
}
UniversalClockType ::= ENUMERATED {
gpsClock (0),
...,
galileoClock(1),
glonassClock (2),
qzssClock (3),
spare3(4),
spare4(5),
spare5(6),
spare6(7),
spare7(8),
spare8(9),
spare9(10)
}
\-- RIT Data is actually a sequence of RIT data elements
SeqOfRITData ::= SEQUENCE (SIZE (1..16)) OF RIT-Data
RIT-Data ::= SEQUENCE {
lac LAC,
ci CI,
frameNumber FrameNumber,
\-- ATD/RTD value and ATD/RTD change with quality figures
atdRTD INTEGER (0..923199),
atdRTDQuality INTEGER (0..63),
atdRTDChange INTEGER (-2000..2000),
atdRTDChangeQuality INTEGER (0..63)
}
\-- CIPHERING KEY INFORMATION
\-- Octets in DecipheringKeys are coded in the same way as the octets 3
\-- to 17 of Deciphering Key IE in 3GPP 49.031. I.e. these octets contain
\-- Current Deciphering Key, Next Deciphering Key and Ciphering Key Flag.
DecipheringKeys ::= OCTET STRING (SIZE (15))
\-- Deciphering key type indicates the positioning method
\-- value 0 corresponds to E-OTD
\-- value 1 corresponds to GPS
DecipheringKeyType ::= INTEGER (0..1)
END
###### ## Annex A (normative): Operation and Error Definition
The following ASN.1 operation and error definition is the basis for the ASN.1
description of operations and errors in this specification.
SMLCPP-OperationDefinition
\-- {object identifier }
DEFINITIONS AUTOMATIC TAGS::=
BEGIN
SMLCPP-OPERATION ::= CLASS {
&Argument,
&Result OPTIONAL,
&Errors ERROR,
&code INTEGER (0..255)
}
WITH SYNTAX {
ARGUMENT &Argument
[RESULT &Result]
ERRORS &Errors
CODE &code
}
ERROR ::= CLASS {
&code INTEGER (0..255)
}
WITH SYNTAX {
CODE &code
}
END
###### ## Annex B (informative): Description of Arguments, Results and
Information elements
## B.1 Description of elements
### B.1.1 Arguments and Results
The following subchapters describe the contents of Arguments and Results of
different operations. The formal ASN.1 definitions of Arguments, Results, and
the Information Elements in them is given in 6.2.
#### B.1.1.1 RIT Query Operation
##### B.1.1.1.1 Argument
Table B.1.1.1.1: RIT Query operation Argument
* * *
Information element Type/Reference Presence Request Type Request Type B.1.2.1
M Cell List Cell List B.1.2.2 M
* * *
[Request Type IE]{.underline}
This IE provides the parameters for the requested RIT Indication operations
and their scheduling.
[Cell List IE]{.underline}
This IE defines the cells whose RIT information is requested.
##### B.1.1.1.2 Result
The Result is empty in the case of RIT Query operation. The RIT Query Response
message is interpreted as a positive acknowledgement.
#### B.1.1.2 RIT Indication
##### B.1.1.2.1 Argument
Table B.1.1.2.1: RIT Indication operation Argument
* * *
Information element Type/Reference Presence Reference Clock Reference Clock
B.1.2.3 M RIT Data RIT Data B.1.2.4 M
* * *
[Reference Clock IE]{.underline}
The RTD and/or ATD values in this message are expressed relative to the
reference clock indicated in this IE. In this version of the standard, the
reference clock is the internal clock of some BTS or the GPS time reference.
In the former case the BTS has to be measured by LMUs of both SMLCs.
[RIT Data IE]{.underline}
This IE contains the RIT information from different cells reported relative to
the reference clock defined in the previous IE.
##### B.1.1.2.2 Result
The RIT Indication operation has an empty Response message.
#### B.1.1.3 RIT Query Stop
##### B.1.1.3.1 Argument
The RIT Query Stop operation has an empty Argument.
##### B.1.1.3.2 Result
The RIT Query Stop operation has an empty Response message.
#### B.1.1.4 (void)
#### B.1.1.5 Send Deciphering Keys
##### B.1.1.5.1 Request
Table B.1.1.5.1: Send Deciphering Keys operation Argument
* * *
Information element Type/Reference Presence Deciphering Key Type Deciphering
Key Type 7 M Deciphering Keys Deciphering Keys 1.2.19 M Location Area Location
Area 1.2.20 M
* * *
[Deciphering Key Type IE]{.underline}
This IE defines the type of deciphering keys, i.e. whether the keys are
applicable to E-OTD or GPS positioning method.
[Deciphering Keys IE]{.underline}
This IE contains the Deciphering Keys information to be sent.
[Location Area]{.underline}
This IE contains the LAC of the Location Area for which the deciphering keys
are valid.
##### B.1.1.5.2 Result
The Send Deciphering Keys operation has an empty Result.
### B.1.2 Information elements
This clause describes the information structure of information elements
independently from the messages where they appear. The formal ASN.1 definition
of information elements is given in subclause 6.2.
#### B.1.2.1 Request Type IE
This IE gives the description of the type of the RIT information request. It
contains the following fields:
**Reporting Type**
This field indicates how long the SMLC should report RIT information. This
field is mandatory. This field has the following values:
\'0\': \'Single Indication\': Send only one RIT Indication;
\'1\': \'Open ended repetitive RIT Indications\': Send RIT Indications,
according to instructions in the following fields, until told otherwise with a
RIT Query Stop operation.
**Reporting Period Format**
This field describes the units of the Reporting Period field. This field is
conditional, and included, if the Reporting Type field is \'1\', i.e. open
ended repetitive RIT Indications are requested. If this field is included the
minimal time period between the RIT Indication operations is as expressed in
this and Reporting Period fields.
\'0\': Reporting Period is told in tens of seconds;
\'1\': Reporting Period is in tens of minutes.
**Reporting Period**
This field together with the Reporting Period Format field describes the
maximum time period between the RIT Indication operations. This field is
conditional and included only if the Reporting Type has the value \'1\', i.e.
open ended repetitive RIT Indications are requested.
The encoding shall provide for the range from 10 seconds to 20 hours, with a
quantization of 10 minutes on the whole range, and no greater than 10 seconds
in the range 10 seconds to 20 minutes. The Reporting Period Format field
indicates the units for the value expressed in this field. Value \'0\' means
that the RIT Indication operations should be performed as often as possible.
Range: 0 - 120.
**Change Limit**
This field indicates a threshold for the change of AT or ATD /RTD values. If
any requested AT or ATD/RTD value has changed more than the threshold since
the last RIT Indication for the same request, a new RIT Indication operation
is performed. In rigorous terms, noting RITi the last reported value, and RITc
the current one, a RIT Indication operation is performed when RITc moves out
of the interval [RITi-threshold, RITi+threshold].
This field is meaningless unless the Reporting Type is \'1\', i.e. open ended
repetitive RIT Indications are requested, in which case the field is optional.
If this field is not included and the Reporting Type 1\', the threshold is
infinite (in other words, the difference since the last RIT Indication for the
same request is not a trigger for a new Indication).
The encoding shall provide for a time in a range of 0.02 microseconds to 5
microseconds, with a quantization of 0.02 microseconds.
Range: 1-250.
**Deviation Limit**
This field indicates the threshold for the deviation of the AT or ATD/RTD
values. If any time the predicted AT or ATD/RTD value, as computed from the
reported AT or ATD/RTD values and rates of change in the last RIT Indication
operation, has deviated more than the threshold compared to the current
measurement result, a new RIT Indication operation is performed.
This field is meaningless unless the Reporting Type is \'1\', i.e. open ended
repetitive RIT Indications have been requested, in which case the field is
optional. If this field is not included and the Reporting Type is \'1\', the
threshold is infinite (in other words, the difference with the predicted value
is not a trigger for a new Indication).
The encoding shall provide for the range 0.02 to 5 microseconds, with a
quantization of 0.02 microseconds.
Range: 1-250.
#### B.1.2.2 Cell List IE
This IE contains a list of one or several cells whose RIT information is
requested.
This IE contains the following fields.
**Number of** **Cells**
This field indicates the number of cells in this IE. This field is mandatory.
Range: 1 - 16.
The following fields are repeated the number of times included in the Number
of Cells field.
**LAC**
This field indicates the Location Area Code of the cell whose RIT information
is requested, within the PLMN. This field is mandatory.
Range: 0 - 65535.
NOTE: The protocol does not provide for data exchange between SMLCs of
different PLMNs.
**CI**
This field indicates the Cell Identity of the cell whose RIT information is
requested, within the PLMN. This field is mandatory.
Range: 0 - 65535.
#### B.1.2.3 Reference Clock IE
This IE describes a reference clock. A clock includes a time reference, and a
frequency reference. In this version of the document, the only supported
method for indicating a time reference consists in indicating a particular
frame in a particular reference cell. The frequency reference is then that of
the cell. The time reference is then the beginning of this frame in the
downlink direction, as perceived by a receiver as close as possible from
transmitting antennae for the reference cell. In addition, and optionally, the
time reference is indicated relative to a universal time reference, and an
indication of the drift of the frequency reference relative to the universal
time reference is provided.
This IE contains the following fields.
**LAC**
This field indicates the Location Area Code of the reference cell, within the
PLMN. This field is mandatory.
Range: 0 - 65535.
NOTE: The protocol does not provide for data exchange between SMLCs of
different PLMNs.
**CI**
This field indicates the Cell Identity of the reference cell, within the PLMN.
This field is mandatory.
Range: 0 - 65535.
**Reference Frame Number**
This field indicates the TDMA frame number FN, as numbered according to 3GPP
TS 25.010, of the reference cell corresponding to the reported values in this
message. This field is mandatory.
The encoding shall provide for a range of at least 2 hours before the instant
the field is received.
Range: 0 - 2715647.
**Absolute Time Present**
This field indicates whether AT of the reference cell is reported or not. This
field is mandatory.
\'0\': AT of reference cell is not reported;
\'1\': AT of reference cell is reported.
**Universal** **Clock**
This field indicates the type of the universal reference clock for absolute
time (AT) indications. This field is optional, and included only if the
Absolute Time Present field is \'1\'.
\'0\': GPS clock is used;
\'1\': Galileo clock is used;
'2': GLONASS clock is used;
'3': QZSS clock is used.
**Reference** **AT**
This field indicates the time of the reference instant (i.e., the starting
moment of reference frame), relative to the universal reference clock
indicated in the previous field.
It is counted in two parts: seconds after last minute change, and nanoseconds
after last second change This field is conditional, and included only if the
Absolute Time Present field is \'1\'.
Range:
seconds: 0-59
nanoseconds: 0-999,999,999
**Reference** **AT** **Change**
This field indicates the first time derivative of the AT value relative to the
clock of the reference cell. A positive value indicates that the clock of the
reference cell lags behind that of the universal reference clock. This field
is conditional, and included only if the Absolute Time Present field is \'1\'.
The range is -0,05 ... 0,05 ppm, with a quantization of 0,00005 ppm.
Range: -1 000 ... 1 000.
**Reference AT Quality Resolution**
> Reference AT Quality Resolution field includes the resolution used in
> Reference AT Quality field. Encoding on 2 bits as follows
\'00\' 0.005 micro seconds
\'01\' 0.01 micro seconds
\'10\' 0.05 micro seconds
\'11\' Reserved.
This field is conditional, and included only if the Absolute Time Present
field is \'1\'.
**Reference AT Quality**
> Reference AT Quality field includes the quality of reported RIT measurement.
> This Reference AT Quality field can be e.g. used to evaluate the reliability
> of AT measurements in the SMLC. Reference AT quality is defined as
Reference AT Quality =$\sqrt{E\left\lbrack \left( x - \mu \right)^{2}
\right\rbrack}$= Std of reported AT value,
> where $x$ is the reported Reference AT value and $\mu = E\left\lbrack x
> \right\rbrack$ is its expectation value. The reporting resolution of
> Reference AT Quality is defined by Reference AT Quality resolution field.
This field is conditional, and included only if the Absolute Time Present
field is \'1\'.
**Reference AT Change Quality Resolution**
Reference AT Change Quality Resolution field includes the resolution used in
Reference AT Change Quality field. Encoding on 2 bits as follows
\'00\' 0.00005 ppm
\'01\' 0.0001 ppm
\'10\' 0.0005 ppm
\'11\' Reserved.
This field is conditional, and included only if the Absolute Time Present
field is \'1\'.
**Reference AT Change Quality**
Reference AT Change Quality field includes the quality of reported Reference
AT Change. This Reference AT Change Quality field can be e.g. used to evaluate
the reliability of RIT measurements in the SMLC. Reference AT Change Quality
is defined as
> Reference AT Change Quality =$\sqrt{E\left\lbrack \left( x - \mu \right)^{2}
> \right\rbrack}$= Std of reported AT Change value
>
> where $x$ is the reported Reference AT Change and $\mu = E\left\lbrack x
> \right\rbrack$ is its expectation value. The reporting resolution of
> Reference AT Change Quality is defined by Reference AT Change Quality
> Resolution field.
This field is conditional, and included only if the Absolute Time Present
field is \'1\'.
#### B.1.2.4 RIT Data IE
This IE contains the requested RIT information. It contains the following
fields.
**Number of Cells**
This field indicates the number of cells in this IE. This field is mandatory.
Range: 1 - 16.
**ATD/RTD Quality Resolution**
> ATD/RTD Quality Resolution field includes the resolution used in ATD/RTD
> Quality field. Encoding on 2 bits as follows
\'00\' 0.005 micro seconds
\'01\' 0.01 micro seconds
\'10\' 0.05 micro seconds
\'11\' Reserved.
This field is mandatory.
**ATD/RTD Change Quality Resolution**
ATD/RTD Change Quality Resolution field includes the resolution used in
ATD/RTD Change Quality field. Encoding on 2 bits as follows
\'00\' 0.00005 ppm
\'01\' 0.0001 ppm
\'10\' 0.0005 ppm
\'11\' Reserved.
This field is mandatory.
The following fields are repeated the number of times included in the Number
of Cells field.
**LAC**
This field indicates the Location Area Code of the cell whose RIT information
is given, within the PLMN. This field is mandatory.
Range: 0 - 65535.
**CI**
This field indicates the Cell Identity of the cell whose RIT information is
given, within the PLMN. This field is mandatory.
Range: 0 - 65535.
**Cell Frame Number**
This field indicates the TDMA frame number, as numbered according to 3GPP TS
25.010, of the first whole slot that has been (or would have been) sent by the
cell at the time reference or immediately after. This field is mandatory.
Range: 0 - 2715647.
**ATD/RTD** **Value**
This field indicates elapsed time between starting moment of the reference
frame and starting moment of the next whole neighbor frame in the downlink
directionas perceived by a receiver as close as possible from transmitting
antennae for the cell. The result is thus always positive. This field is
mandatory.
The encoding shall provide for a range of 0 to 1250bit periods, with a
quantization of 0.005 microseconds (around 1.5 metres at light speed).
Range: 0 ... 923199
**ATD/RTD Quality**
ATD/RTD Quality field includes the quality of reported RIT measurement. This
ATD/RTD Quality field can be e.g. used to evaluate the reliability of RIT
measurements in the SMLC. ATD/RTD quality is defined as
> ATD/RTD Quality =$\sqrt{E\left\lbrack \left( x - \mu \right)^{2}
> \right\rbrack}$ = Std of reported ATD/RTD value,
>
> where $x$ is the reported ATD/RTD value and $\mu = E\left\lbrack x
> \right\rbrack$ is its expectation value. The reporting resolution of ATD/RTD
> Quality is defined by ATD/RTD Quality resolution field.
Range: 0 to 63
This field is mandatory.
**ATD/RTD Change**
This field indicates the first time derivative of the ATD/RTD value between
the transmissions of signals from the reference cell and the measured cell.
This field is mandatory.
The encoding shall provide for a range of -0,10 ... 0,10 ppm , with a
quantization of 0,00005 ppm.
Range: -2 000 ... 2 000.
**ATD/RTD Change Quality**
ATD/RTD Change Quality field includes the quality of reported ATD/RTD Change.
This ATD/RTD Change Quality field can be e.g. used to evaluate the reliability
of RIT measurements in the SMLC. ATD/RTD Change Quality is defined as
> ATD/RTD Change Quality =$\sqrt{E\left\lbrack \left( x - \mu \right)^{2}
> \right\rbrack}$= Std of reported ATD/RTD Change value,
>
> where $x$ is the reported ATD/RTD Change and $\mu = E\left\lbrack x
> \right\rbrack$ is its expectation value. The reporting resolution of ATD/RTD
> Change Quality is defined by ATD/RTD Change Quality resolution field.
Range: 0 to 63
This field is mandatory.
#### B.1.2.5 (void)
#### B.1.2.6 (void)
#### B.1.2.7 (void)
#### B.1.2.8 (void)
#### B.1.2.9 (void)
#### B.1.2.10 (void)
#### B.1.2.11 (void)
#### B.1.2.12 (void)
#### B.1.2.13 (void)
#### B.1.2.14 (void)
#### B.1.2.15 (void)
#### B.1.2.16 Deciphering Key Type IE
This IE defines the type of deciphering keys, i.e. whether the keys are
applicable to E-OTD or GPS positioning method.
\'0\' E-OTD;
\'1\' GPS.
#### B.1.2.17 Deciphering Keys IE
The contents of this IE are as in 3GPP TS 49.031 in the corresponding IE
excluding the BSSAP-LE Information Element Identifier, the length indicator,
and the spare bits.
#### B.1.2.18 Location Area IE
This IE includes the LAC of the Location Area. This IE contains the following
fields.
**LAC**
This field indicates the Location Area Code of the location area whose
deciphering keys are included in this IE. This field is mandatory.
Range: 0 - 65535.
#### B.1.2.19 (void)
#