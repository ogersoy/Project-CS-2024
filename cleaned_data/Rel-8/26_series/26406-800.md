# Foreword
This Technical Specification (TS) has been produced by the 3^rd^ Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document specifies the digital test sequences and conformance
criteria for the Enhanced aacPlus audio codec.
# 2 Normative references
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
  * References are either specific (identified by date of publication, > edition number, version number, etc.) or nonâ€‘specific.
  * For a specific reference, subsequent revisions do not apply.
  * For a non-specific reference, the latest version applies. In the > case of a reference to a 3GPP document (including a GSM document), > a non-specific reference implicitly refers to the latest version > of that document _in the same Release as the present document_.
[1] 3GPP TS 26.401: \"General audio codec audio processing functions; Enhanced
aacPlus general audio codec; General description\".
[2] 3GPP TS 26.403: \"General audio codec audio processing functions; Enhanced
aacPlus general audio codec; Encoder specification; Advanced Audio Coding
(AAC) part\".
[3] 3GPP TS 26.404: \"General audio codec audio processing functions; Enhanced
aacPlus general audio codec; Encoder specification; Spectral Band Replication
(SBR) part\".
[4] 3GPP TS 26.405: \"General audio codec audio processing functions; Enhanced
aacPlus general audio codec; Encoder specification; Parametric stereo part\".
[5] 3GPP TS 26.410: \"General audio codec audio processing functions; Enhanced
aacPlus general audio codec; Floating-point ANSI-C code\".
[6] 3GPP TS 26.411: \"General audio codec audio processing functions; Enhanced
aacPlus general audio codec; Fixed-point ANSI-C code\".
[7] ISO/IEC 14496-4:2004: \"Information technology - Coding of audio-visual
objects -\ Part 4: Conformance testing\".
[8] ISO/IEC 14496-4:2004/Amd.8:2005: \"Information technology - Coding of
audio-visual objects - Part 4: Conformance testing -- Amendment 8: High
Efficiency Advanced Audio Coding, audio BIFS, and structured audio
conformance\".
[9] ITU-R Recommendation BS.1387-1: \"Method for objective measurements of
PErceived Audio Quality (PEAQ)\".
[10] ISO/IEC 14496-4:2004/Amd.11:2006 \"Information technology - Coding of
audio-visual objects - Part 4: Conformance testing - Amendment 11: Parametric
Stereo conformance\".
[11] ISO/IEC 14496-4:2004/Amd.11:2006/Cor.2:2007 \"Information technology -
Coding of audio-visual objects - Part 4: Conformance testing - Amendment 11:
Parametric Stereo conformance Technical Corrigendum 2\".
# 3 Definitions and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
3GPP TS 26.401 [1], 3GPP TS 26.403 [2], 3GPP TS 26.404 [3], 3GPP TS 26.405
[4], 3GPP TS 26.410 [5]and 3GPP TS 26.411 [6] apply.
## 3.2 Abbreviations
For the purposes of the present document, the following abbreviations apply:
AAC-LC Advanced Audio Coding-Low Complexity audio object type
ODG Objective Difference Grade
PEAQ Perceptual Evaluation of Audio Quality
SBR Spectral Band Replication
# 4 General
Conformance testing is an important tool to verify that implementations of
Enhanced aacPlus match the relevant specifications. It is also helpful in
verifying the proper use of the source code provided in 3GPP TS 26.410 [5] and
3GPP TS 26.411 [6]. Conformance testing focuses on the core algorithm,
therefore no criteria are defined for error concealment, downsampling and file
I/O.
Clause 5 describes the proposed method of conformance testing for the decoder.
Clause 6 discusses encoder conformance.
# 5 Decoder conformance testing
Decoder conformance for both fixed-point and floating-point implementations
shall be tested in accordance with clause 5.1. Conformance shall be verified
by either bit-exact behaviour to the reference output or by meeting the
objective criteria defined below. Bit-exact behaviour should be preferred for
fixed-point implementations where it can be achieved without undue penalty on
computational complexity.
## 5.1 AAC-LC, SBR and Parametric Stereo conformance testing
Conformance testing for AAC-LC, SBR and Parametric Stereo shall be performed
according to the relevant clauses in\ ISO/IEC 14496-4 [7], [8], [10], [11].
3GPP conformance shall not be claimed for implementations achieving an
accuracy level of K\ L/R unmapping. The comparison however takes place in the log-domain. For higher energies only low deviations are allowed, while lower energies are permitted to deviate more: Differences of up to 3dB are allowed for all energies, differences of up to 6dB are allowed for energies up to 42 dB below a full scale sine, differences of up to 9 dB are allowed for energies up to 60 dB below a full scale sine.
  * The test of the transient detector is performed by comparing the bitstream element sbr_grid() from both encoders. The RMS of the difference between the transient position vector of the encoder under test and the reference encoder shall not be greater than 0.2.
  * The test of the missing harmonics detector is carried out by comparing the bitstream elements sbr_sinusoidal_coding() from both encoders. The vector that is constructed by subtracting the missing harmonics vectors from both bitstreams and concatenating the result over all frames shall not have an RMS greater than 0.2.
  * The test of the whitening level detector is performed by comparing the bitstream element sbr_invf() from both encoders. The vector that is constructed by subtracting the whitening level vectors of the encoder under test and the reference encoder shall not have an RMS greater than 0.2.
  * The test for the noise floor estimator module is identical to the test for the envelope energy conformance test, except that the actual noise floor energies are compared instead of the envelope energies. The maximum permissible noise floor energy difference for a given deviation between reference encoder and encoder under test are as follows: Differences of up to 6 dB are allowed for all energies, differences of up to 9 dB are allowed for energies up to 42 dB below a full scale sine, differences of up to 12 dB are allowed for energies up to 60 dB below a full scale sine.
#### 6.2.2.3 PS encoder conformance
All comparisons shall be limited to frames and bands in the bitstream that
contain an energy greater than -87 dB below a full-scale sine. Prior to the
actual conformance test, the stereo parameters from both encoders are mapped
to the highest available stereo frequency resolution.
  * the signal that is constructed from the differences between all IID values signaled by the encoder under test and the reference encoder shall have a maximum absolute difference of 2 and the RMS must not exceed 0.25
  * the signal that is constructed from the differences between all ICC values signaled by the encoder under test and the reference encoder shall have a maximum absolute difference of 2 and the RMS must not exceed 0.25
### 6.2.3 Subjective criteria
Subjective tests shall cover the encoder configurations tested during the
characterization phase. The requirement for passing the subjective tests is
that the encoder under test does not perform worse in a statistically
significant sense in any test case when compared to the fixed-point reference
encoder.
###### ### Annex A: Void
Table 1: Void
###### ## Annex B (normative): Test vectors for fixed-point encoder
conformance
Table 2: Testvectors specifically relevant for the objective testing of the
AAC tool
* * *
# Test vector file name 1 ct_castagnettes.wav 2 ct_glockenspiel.wav 3
ct_test_1_48.wav 4 ct_test_2_48.wav 5 ct_test_3_48.wav 6 cymbal.wav 7 gong.wav
8 guitar_1.wav 9 guitar_2.wav 10 guitar_cymbals.wav 11 handcuff.wav 12
hihat.wav 13 laugh.wav 14 shaker.wav 15 speech_female.wav 16
speech_male_german.wav 17 speech_male_portuguese.wav 18 triangle.wav 19
wooden_toys_1.wav 20 wooden_toys_2.wav
* * *
Table 3: Testvectors specifically relevant for the objective testing of the
SBR tool
* * *
# Test vector file name SBR module 21 noise_fade.wav Envelope 12 hihat.wav
Transients 1 ct_castagnettes.wav Transients 22 sines.wav Sines 21
noise_fade.wav Noise 23 invf.wav Whitening
* * *
Table 4: Testvectors specifically relevant for the objective testing of the PS
tool
* * *
# Test vector file name PS parameter 3 ct_test_1_48.wav IID 2
ct_glockenspiel.wav IID 3 ct_test_1_48.wav ICC 18 triangle.wav ICC
* * *
#