# Foreword
This Technical Specification has been produced by the 3^rd^ Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# Introduction
The present document is part of a TS-family covering the 3^rd^ Generation
Partnership Project; Technical Specification Group Services and System
Aspects; Telecommunication management; as identified below:
**32.441 \"Trace Management Integration Reference Point (IRP):**
**Requirements\".**
32.442 \"Trace Management Integration Reference Point (IRP): Information
Service (IS)\".
32.443 \"Trace Management Integration Reference Point (IRP): Common Object
Request Broker Architecture (CORBA) Solution Set (SS)\".
The present document is part of a TS-family which describes the requirements
and information model necessary for the Telecommunication Management (TM) of
3G systems. The TM principles and TM architecture are specified in 3GPP TS
32.101 [2] and 3GPP TS 32.102 [3].
Trace provides very detailed information on call level for a specific
subscriber or MS. This data is an additional information source to Performance
Measurements and allows deeper investigations in problems solving or in case
of optimization.
# 1 Scope
The present document specifies the overall requirements for the Trace
Management Integration Reference Point (TraceIRP) as it applies to Itf-N.
The Trace IRP supports the operations that are required for the Subscriber and
Equipment trace and the Cell Traffic Trace functionalities.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
  * References are either specific (identified by date of publication, > edition number, version number, etc.) or nonâ€‘specific.
  * For a specific reference, subsequent revisions do not apply.
  * For a non-specific reference, the latest version applies. In the > case of a reference to a 3GPP document (including a GSM document), > a non-specific reference implicitly refers to the latest version > of that document _in the same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 32.101: \"Telecommunication management; Principles and high level
requirements\".
[3] 3GPP TS 32.102: \"Telecommunication management; Architecture\".
[4] 3GPP TS 32.421: \"Telecommunication management; Subscriber and equipment
trace; Trace concepts and requirements\".
[5] 3GPP TS 32.422: \"Telecommunication management; Subscriber and equipment
trace; Trace control and configuration management\".
[6] 3GPP TS 32.423: \"Telecommunication management; Subscriber and equipment
trace; Trace data definition and management\".
[7] 3GPP TS 32.341: \"Telecommunication management; File Transfer (FT)
Integration Reference Point (IRP): Requirements\".
[8] 3GPP TS 32.342: \"Telecommunication management; File Transfer (FT)
Integration Reference Point (IRP): Information Service (IS)\".
[9] 3GPP TS 32.343: \"Telecommunication management; File Transfer (FT)
Integration Reference Point (IRP): Common Object Request Broker Architecture
(CORBA) Solution Set (SS)\".
[10] 3GPP TS 32.150: \"Telecommunication management; Integration Reference
Point (IRP) Concept and definitions\".
[11] 3GPP TS 32.301: \"Notification Integration Reference Point (IRP):
Requirements\".
[12] 3GPP TS 32.302: \"Notification Integration Reference Point (IRP):
Information Service (IS)\".
[13] 3GPP TS 32.303: \"Notification Integration Reference Point (IRP): Common
Object Request Broker Architecture (CORBA) Solution Set (SS)\".
[14] 3GPP TS 32.305: \"Configuration Management (CM); Notification Integration
Reference Point **(IRP): eXtensible Markup Language (XML) definition\".**
# 3 Definitions and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
3GPP TR 21.905 [1] apply.
NOTE: A term defined in the present document takes precedence over the
definition of the same term, if any, in 3GPP TR 21.905 [1].
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in 3GPP TR
21.905 [1] apply. An abbreviation defined in the present document takes
precedence over the definition of the same abbreviation, if any, in 3GPP TR
21.905 [1].
# 4 Trace Concepts
Trace Concepts are defined in 3GPP TS 32.421 [4].
# 5 Trace Requirements
## 5.1 Trace Management and Itf-N
The Itf-N may connect the Network Management system to the EM, which can be
located in either the DM (system context A) or in the NE (system context B).
This is done by means of Integration Reference Points (IRPs).
This clause describes the properties of an interface enabling a NM to monitor
a 3G-telecommunication network including - if necessary - the managing EMs. To
provide to the NM the Trace Management capability for the network implies that
the NM and the EM have to agree on the following:
  * The identification of the NEs and UE where the Trace Session > Activation is requested.
  * The identification of the files containing the trace records for > retrieval by a Trace Collection Entity.
  * The identification of the subscriber or equipment shall be provided > in the trace record files in case of subscriber and equipment > trace. In case of Cell Traffic trace the cell identity shall be > provided in the trace record file. In the case of trace in > E-UTRAN, as neither the subscriber identity nor the equipment > identity are provided to eNodeB, none of these identifiers are > provided in the trace record files from the eNodeB. The connection > to which subscriber or equipment is traced is made by the node > that triggers the trace recording session to a Trace Collection > Entity which collects the trace logs (indicated by the IP address > in the Trace Session\'s configuration parameters). The connection > is done by the triggering node providing the identifier of the > subscriber or equipment together with the Trace Reference and the > Trace Recording Session Reference in a trace log file or a > notification (as the Trace Reference and the Trace Recording > Session Reference are included in the trace record files from the > eNodeBs).
  * Notification of available files containing trace records for > retrieval by a collection point indicated by an IP address. The > Trace Collection Entity may be part of the NM.
```{=html}
``` \- The network configuration (see the NRM IRPs in 3GPP TS 32.6xy and >
32.7xy).
## 5.2 Managing Trace Sessions
The IRPManager shall be able to request the IRPAgent to:
  * Activate a Trace Session for a specific subscriber or equipment in a > specific NE. The trace session activation shall be possible both > for management based activation and for signalling based > activation. The NM may schedule the activation. Note that no > scheduling functionality is supported by the IRPAgent. The trace > session activation shall also be possible for for cell traffic > trace.
  * Make the Trace Records in a file available to a Trace Collection > Entity. The data format of the file shall be specified in the 3GPP > defined trace specifications (See 3GPP TS 32.423 [6]).
  * Emit a notification when a Trace Session is activated from the EM > directly.
  * Emit a notification when a Trace Recording Session was not started > in the NE for any reason.
  * Interrogate the configuration parameters and other information of a > specific Trace Session.
  * Interrogate the list of activated Trace Sessions in a specific NE. > The Trace Session is identified by the Trace Reference. In case of > cell traffic trace the activated Trace Session can be requested > for a Trace Reference or a cell identity.
  * Deactivate a Trace Session for a specific subscriber or equipment > for a specific Trace Session. The trace session deactivation shall > be possible for both management based activation and for > signalling based activation. The NM may schedule the deactivation. > Note that no scheduling functionality is supported by the > IRPAgent. The Trace Session deactivation shall also be possible > for for cell traffic trace.
The Trace Session Deactivation shall target the same NE as the Trace Session
Activation. If the trace session is activated in more than one NE, the trace
session shall be deactivated in all those NEs. During Trace Session
deactivation the Trace Reference and shall be given. In case of a failed Trace
Session Deactivation there shall be a mechanism to ensure that unnecessary
Trace Sessions will nor remain active in the network (i.e. send Trace Session
Deactivation multiple times, etc.).
The Trace Reference must be unique within the PLMNs where trace is requested
when a Trace Session is activated.
It shall be possible that an IRPManager activates/deactivates a Trace Session
to multiple NEs for multiple subscribers or equipments.
The IRPManager is responsible for scheduling the Trace Session Activation and
Deactivation, i.e. there is no requirement on Itf-N due to scheduling the
Trace Session Activation/Deactivation.
## 5.3 Management of trace record files
### 5.3.1 General
The IRPManager shall be able to:
  * Request a list of available files.
  * Request the IRPAgents to emit a notification announcing the > availability of the Trace Record files.
For information:
  * The requirements for trace record file management may be satisfied > by a separate File Transfer IRP.
NOTE: In case of Signalling Based Activation the trace record files may be
transferred from a different EM than the Trace Session Activation is sent to!
In order to find always the appropriate collection point the IP address of
Trace Collection Entity shall be part of the trace control and configuration
parameter that needs to be propagated during Trace Session activations.
### 5.3.2 Managing trace records for roaming cases (inter-operator cases)
It is possible that Trace Session Activation/Deactivation goes across
Operator\'s boundaries. Trace Records may contain sensible information
therefore the exchange of trace records between operators are subject to
agreements between operators, therefore this case is out of the scope of the
present document.
## 5.4 Overview of IRPs related to Trace
The Itf-N is built up by a number of IRPs. The basic structure of the IRPs is
defined in 3GPP TS 32.101 [2], 3GPP TS 32.102 [3] and 3GPP TS 32.150 [10].
For the purpose of Trace the following IRPs are needed:
  * Trace Management IRP (TraceIRP), i.e. 3GPP TS 32.44x (the present > TS-family).
  * File Transfer IRP (3GPP TS 32.34x [7], [8], [9]).
  * Notification IRP (3GPP TS 32.30x [11], [12], [13] and [14].
###### ## Annex A (informative): Use Cases
# A.1 General
The use cases presented in the present document provides the usability of the
Trace IRP. These use cases are different from those ones that are presented in
3GPP TS 32.421 [4].
# A.2 Use case #1: Centralized place for Trace Session Activation in case of
Management Based Activation
Figure A.2-1 illustrates an example where Operator would like to activate a
trace session in the 6 RNCs (example for system context A). The activation
method required is Management Based Activation.
Figure A.2-1: Trace Session Activation for Management Based Activation
Using the trace IRP operator has to give the Trace Session Activation command
in the Network Manager only.\ The Operator has to specify in which NEs trace
is required and also has to give the trace control and configuration
parameters. The NM (Trace IRP Manager) can initiate the Trace Session
Activation to the EMs (Trace IRPAgents).\ The EMs can send the Trace Session
Activation commands to the RNCs.
As shown in this example Trace IRP helps the operator in managing trace in the
network.
# A.3 Use case #2: Centralized place to collect trace records in case of
Signalling Based Activation
Figure A.3-1 shows an example (assuming system context A) where trace records
are generated in many different NEs which are managed by different EMs.
Figure A.3-1: Trace Record Collection in case of Signalling Based Activation
In the example above the trace session is activated from the NM to the MSC-S
via EM1. If the subscriber or MS that is being traced starts a call then the
trace parameters are propagated to the MGW and to the RNC1.
If during the call the subscriber makes a handover to RNC2, the trace
parameters will also be propagated to RNC2.
In this example all the NEs (MSC-S, MGW, RNC1 and RNC2) generate their own
trace records and these trace records are sent to the NEs own EMs.
There are three different EMs shown in the figure. Each of them will get the
trace records from the NEs they manage. The EMs (traceIRPAgents) can then send
the trace records to the NM (traceIRPManager).
By using the TraceIRP the Operator can retrieve all the trace records
generated in the network in one place at the NM.
Without the trace IRP the trace records are stored only in the EM level, which
in this case is distributed in 3 different boxes and locations.
# A.4 Use case #3: Centralized place to collect trace records in case of
Signalling Based Activation
Figure A.4-1 shows an example (assuming system context A) where trace records
are generated in many different NEs which are managed by different EMs.
Figure A.4-1: Trace Record Collection in case of Signalling Based Activation
In the example above the trace session is activated from the NM to the MME via
EM2 -> EM1. If the subscriber or UE that is being traced starts a call then
the trace parameters are propagated to the MME and to the eNodeB1. In the
Trace configuration parameters is a Trace Collection Entity IP Address
included.
If during the call the subscriber makes a handover to eNodeB2, the trace
parameters will also be propagated to eNodeB2.
In this example all the NEs (MME, eNodeB1, eNodeB2) generate their own trace
records and these trace records are sent to the NEs own EM.
There are three different EMs shown in the figure. Each of them will get the
trace records from the NEs they manage. The EMs (traceIRPAgents) can then send
the trace records to the Trace Collection Entity which will be identified by
the IP address which is included in the Trace configuration parameters
(traceIRPManager). The Trace Collection entity may be located in the NM, EM or
in another entity. The Trace files may also be sent directly from the nodes to
the Trace Collection Entity.
By using the TraceIRP the Operator can retrieve all the trace records
generated in the network in one place, regardless of how many IRPManagers
exist.
Without the Trace Collection Entity in the Trace IRP the trace records are
stored only in the EM level, which in the abobe example is distributed in 3
different nodes, or they might be sent to different IRPManagers in the NM.
#