# Foreword
This Technical Report has been produced by the 3^rd^ Generation Partnership
Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
> The present document intends to study the impact of the evolved 3GPP system
> architecture with respect to charging.
>
> The study covers the relevant non-roaming and roaming use cases for both
> 3GPP and non-3GPP accesses specified in TS 23.401 [3] and TS 23.402 [4].
>
> The study aims at producing recommendations for the following aspects:
>
> \- 3GPP work item and specification structure;
>
> \- charging requirements and principles;
>
> \- charging architecture and charging scenarios; and
>
> \- charging data and protocols.
>
> The aspect of charging requirements and principles includes the study of the
> reuse of 3GPP Release 7 charging specifications.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
  * References are either specific (identified by date of publication, > edition number, version number, etc.) or non‑specific.
  * For a specific reference, subsequent revisions do not apply.
  * For a non-specific reference, the latest version applies. In the > case of a reference to a 3GPP document (including a GSM document), > a non-specific reference implicitly refers to the latest version > of that document _in the same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 23 882: "Report on Technical Options and Conclusions (Release 7)".
[3] 3GPP TS 23 401: \"GPRS enhancements for E-UTRAN access\".
[4] 3GPP TS 23 402: \"Architecture Enhancements for non-3GPP accesses\".
[5] 3GPP TS 32 240: \"Charging architecture and principles\".
[6] 3GPP TS 32.251: \"Telecommunication management; Charging management;
Packet Switched (PS) domain charging\".
[7] 3GPP TS 32.252: \"Telecommunication management; Charging management;
Wireless Local Area Network (WLAN) charging\".
[8] 3GPP TS 23.203: \"**Policy and charging control architecture** \".
[9] 3GPP TS 23.078: \"Customized Applications for Mobile network Enhanced
Logic (CAMEL); Stage 2\".
[10] 3GPP TS 29.078: \"Customized Applications for Mobile network Enhanced
Logic (CAMEL); CAMEL Application Part (CAP) specification\".
[11] 3GPP TS 23.234: \"3GPP system to Wireless Local Area Network (WLAN)
interworking; System description\".
[12] 3GPP TS 32.299: \"Telecommunication management; Charging management;
Diameter charging application\".
# 3 Definitions, symbols and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
TR 21.905 [1], in TS 32.240 [5] and the following apply. A term defined in the
present document takes precedence over the definition of the same term, if
any, in TR 21.905 [1] or in TS 32.240 [5].
## 3.2 Symbols
For the purposes of the present document, the symbols defined in TS 32.240 [5]
and the following apply:
Bw Reference point for the CDR file transfer from the WLAN CGF to the BD
D\' Reference point between a pre-R6 HSS/HLR and a 3GPP AAA Server
Dw Reference point between a 3GPP AAA Server and an SLF
Gr\' Reference point between a pre-R6 HSS/HLR and a 3GPP AAA Server
Gx Reference point between a PCRF and a PCEF
Gy Online charging reference point between a PCEF and an OCS
Gz Offline charging reference point between a PCEF and a CGF
Rx Reference point between the PCRF and an AF.
Rx+ Rx reference point for EPC.
S1-MME Reference point for the control plane protocol between E-UTRAN and MME.
S1-U Reference point between E-UTRAN and S-GW for the per bearer user plane
tunnelling and inter eNodeB path switching during handover.
S2a It provides the user plane with related control and mobility support
between trusted non 3GPP IP access and the Gateway.
S2b It provides the user plane with related control and mobility support
between ePDG and the Gateway.
S2c It provides the user plane with related control and mobility support
between UE and the Gateway. This reference point is implemented over trusted
and/or untrusted non-3GPP Access and/or 3GPP access.
S3 It enables user and bearer information exchange for inter 3GPP access
network mobility in idle and/or active state. It is based on Gn reference
point as defined between SGSNs
S4 It provides related control and mobility support between GPRS Core and the
3GPP Anchor function of S-GW and is based on Gn reference point as defined
between SGSN and GGSN. In addition, if Direct Tunnel is not established, it
provides the user plane tunnelling.
S5 It provides user plane tunnelling and tunnel management between Serving GW
and PDN GW. It is used for S-GW relocation due to UE mobility and in case the
S-GW needs to connect to a non collocated PDN GW for the required PDN
connectivity.
S6a This interface is defined between MME and HSS for authentication and
authorization.
S6c It is the reference point between P-GW in HPLMN and 3GPP AAA server for
mobility related authentication if needed. This reference point may also be
used to retrieve and request storage of mobility parameters.
S6d Reference point between S-GW in VPLMN and 3GPP AAA Proxy for mobility
related authentication if needed. This reference point may also be used to
retrieve and request storage of mobility parameters.
S7 It provides transfer of (QoS) policy and charging rules from PCRF to PCEF.
S7a It provides transfer of (QoS) policy information from PCRF to the Trusted
Non-3GPP accesses.
S7b It provides transfer of (QoS) policy information from PCRF to the ePDG in
the roaming scenarios.
S7c It provides transfer of (QoS) policy information from PCRF to the S-GW.
S8a Inter-PLMN reference point providing user and control plane between the
S-GW in the VPLMN and the P-GW in the HPLMN. It is based on Gp reference point
as defined between SGSN and GGSN. S8a is the inter PLMN variant of S5.
S8b It is the roaming interface in case of roaming with home routed traffic.
It provides the user plane with related control between Gateways in the VPLMN
and HPLMN.
S9 Indicates the roaming variant of the S7 reference point for the enforcement
in the VPLMN of dynamic control policies from the HPLMN.
S10 Reference point between MMEs for MME relocation and MME to MME information
transfer.
S11 Reference point between MME and S-GW.
S12 Reference point between UTRAN and S-GW for user plane tunnelling when
Direct Tunnel is established. It is based on the Iu-u/Gn-u reference point
using the GTP-U protocol as defined between SGSN and UTRAN or respectively
between SGSN and GGSN.
SGi Reference point between the PDN Gateway and the packet data network.
Packet data network may be an operator external public or private packet data
network or an intra operator packet data network, e.g. for provision of IMS
services. This reference point corresponds to Gi and Wi functionalities and
supports any 3GPP and non-3GPP access systems.
Sp Reference point lies between the SPR and the PCRF.
Ta* It connects the Trusted non-3GPP IP Access with the 3GPP AAA Server/Proxy
and transports access authentication, authorization, mobility parameters and
charging-related information in a secure manner.
Wa Reference point between a WLAN Access Network and a 3GPP AAA Server/Proxy
(charging and control signalling)
Wa* It connects the Untrusted non-3GPP IP Access with the 3GPP AAA
Server/Proxy and transports access authentication, authorization and charging-
related information in a secure manner. Differences compared to Wa as defined
in [5] are FFS.
Wd Reference point between a 3GPP AAA Proxy and a 3GPP AAA Server (charging
and control signalling)
Wd* It connects the 3GPP AAA Proxy, possibly via intermediate networks, to the
3GPP AAA Server.
Wf Reference point between an Offline Charging System and a 3GPP AAA
Server/Proxy
Wg Reference point between a 3GPP AAA Server/Proxy and WAG
Wi Reference point between a Packet Data Gateway and an external IP Network
Wm Reference point between a Packet Data Gateway and a 3GPP AAA Server or 3GPP
AAA proxy
Wm* Reference point is located between 3GPP AAA Server/Proxy and ePDG and is
used for AAA signalling (transport of mobility parameters, tunnel
authentication and authorization data).
Wn Reference point between a WLAN Access Network and a WLAN Access Gateway
Wn* Reference point between the untrusted Non-3GPP IP Access and the ePDG.
Traffic on this interface for a UE initiated tunnel has to be forced towards
ePDG.
Wp Reference point between a WAG and a Packet Data Gateway
Wo Reference point between a 3GPP AAA Server and an OCS
Wu Reference point between a WLAN UE and a Packet Data Gateway
Wu* Reference point between the UE and the ePDG.
Ww Reference point between a WLAN UE and a WLAN Access Network
Wx Reference point between an HSS and a 3GPP AAA Server
Wx* Reference point is located between 3GPP AAA Server and HSS and is used for
transport of authentication data.
Wy Reference point between a PDG and an OCS
## 3.3 Abbreviations
For the purposes of the present document, the abbreviations given in TR 21.905
[1], in TS 32.240 [5] and the following apply. An abbreviation defined in the
present document takes precedence over the definition of the same
abbreviation, if any, in TR 21.905 [1] or in TS 32.240 [5].
AF Application Function
ePDG Evolved Packet Data Gateway
EPC Evolved Packet Core
FF Forwarding Function
MME Mobility Management Entity
OFCS Offline Charging System
P-GW PDN Gateway
S-GW Serving Gateway
SLF Service Location Function
SPR Subscription Profile Repository
WAG WLAN Access Gateway
# 4 Baseline architecture
## 4.1 Charging architecture in 3GPP Rel-7
### 4.1.1 General charging architecture
The common high-level charging architecture across domains, subsystems and
services is specified in TS 32.240 [5]. Figure 4.1.1 provides an overview of
the architecture including all network elements / systems (top to bottom: CS-
NE all the way through to the PCEF) for which charging is defined within 3GPP
standards. The arrows indicate logical information flows on the Rf, Wf, Ga,
Bx, ISC, Ro, Wo, CAP, and Gy reference points.
Figure 4.1.1: Logical ubiquitous charging architecture and information flows
(3GPP TS 32 240 [5])
### 4.1.2 PS domain charging architecture
The PS domain charging architecture is specified in TS 32.251 [6]. Figure
4.1.2-1 provides an overview of the architecture for offline charging.
{width="5.975in" height="3.3666666666666667in"}
Figure 4.1.2-1: PS domain offline charging architecture (3GPP TS 32.251 [6])
PS domain online charging based on SGSN functions is implemented by CAMEL
techniques as described in 3GPP TS 23.078 [9] and 3GPP TS 29.078 [10].
PS domain online charging based on GGSN functions is specified in TS 32.251
[6]. Figure 4.1.2-2 provides an overview of the architecture.
**Figure 4.1.2-2: PS domain GGSN based online charging architecture (** 3GPP
TS 32.251 **[6])**
### 4.1.3 Architecture for flow based charging
The architecture for flow based charging is specified in TS 23.203 "Policy and
charging control architecture" (3GPP TS 23.203 [8]). Figure 4.1.3 provides an
overview of the PCC architecture.
{width="5.010416666666667in" height="4.654861111111111in"}
Figure 4.1.3: Overall PCC logical architecture [8]
### 4.1.4 WLAN domain charging architecture
The WLAN domain charging architecture is specified in TS 32.252 [7]. Figure
4.1.4-1 provides an overview of the architecture for offline charging.
{width="4.354861111111111in" height="3.10625in"}
Figure 4.1.4-1: WLAN domain offline charging architecture [7]
WLAN domain online charging based is specified in 3GPP TS 32.252 [7]. Figure
4.1.4-2 provides an overview of the architecture.
{width="3.5652777777777778in" height="2.354861111111111in"}
Figure 4.1.4-2: WLAN based online charging architecture (3GPP TS 32.252 [7])
Figure 4.1.4-3 depicts the non-roaming WLAN inter-working reference model for
both Direct IP Access and 3GPP IP Access.
NOTE: For further details on WLAN architecture see TS 23.234 [11] and for
further details on WLAN charging scenarios TS 32.252 [7].
Figure 4.1.4-3: Non Roaming Reference Model [7]
Figure 4.1.4-4 depicts the roaming WLAN inter-working reference model where
3GPP PS based services are provided by the HPLMN based on 3GPP IP Access.
NOTE: For further details on WLAN architecture see TS 23.234 [11] and for
further details on WLAN charging scenarios TS 32.252 [7].
Figure 4.1.4-4: Roaming reference model - 3GPP PS based services provided\ via
the 3GPP Home Network (3GPP TS 32.252 [7])
Finally, Figure 4.1.4-5 shows the case of the 3GPP IP Access PS based services
being provided by the VPLMN.
NOTE: For further details on WLAN architecture see TS 23.234 [11] and for
further details on WLAN charging scenarios TS 32.252 [7].
Figure 4.1.4-5: Roaming reference model - 3GPP PS based services provided\ via
the 3GPP Visited Network (3GPP TS 32.252 [7])
## 4.2 Architecture for the evolved 3GPP system
### 4.2.1 Architecture for 3GPP accesses
The evolved 3GPP system architecture for 3GPP accesses is specified in draft
TS 23.401 "GPRS enhancements for E-UTRAN access" (3GPP TS 23 401 [3]).
Figure 4.2.1-1 provides an overview of the architecture in non-roaming cases.
**Figure** 4.2.1-1**:** Non-Roaming Architecture for 3GPP Accesses within EPC
(3GPP TS 23 401 [3])
The architecture also has an option for co-located S-GW and P-GW, in which
case the interface S5 would not exist between those two gateways.
Figure 4.2.1-2 provides an overview of the architecture in roaming cases with
home services, i.e. home routed traffic.
**Figure** 4.2.1-2**:** Roaming Architecture for 3GPP Accesses, home routed
traffic (3GPP TS 23 401 [3])
**Figure** 4.2.1-3 **and figure** 4.2.1-4 **represent the Roaming with Local
Breakout case with Application Function (AF) in the Home Network and in the
Visited Network respectively. The concurrent use of AFs in the home network
and AFs in the visited network is not excluded.**
**Figure** 4.2.1-3**: Roaming Architecture for Local Breakout, with home
operator's\ Application Functions only** (3GPP TS 23 401 **[3])**
**Figure** 4.2.1-4**: Roaming Architecture for Local Breakout, with visited
operator's Application Functions only (** 3GPP TS 23 401 **[3])**
### 4.2.2 Architecture for non-3GPP accesses
The evolved 3GPP system architecture for non-3GPP accesses is specified in
draft TS 23.402 "Architecture Enhancements for non-3GPP accesses" (3GPP TS 23
402 [4]).
Figure **4**.2.2-1 provides an overview of the architecture in non-roaming
cases.
Figure **4**.2.2-1: Non-Roaming Architecture within EPS using S5, S2a, S2b
within EPC\ (3GPP TS 23 402 [4])
Figure **4**.2.2-2 provides an overview of the architecture in roaming cases
with home services, i.e. home routed traffic.
Editor\'s Note: Other roaming cases are For Further Study.
Figure **4**.2.2-2: Roaming Architecture for EPS using S8a/b, S2a, S2b - Home
Routed\ (3GPP TS 23 402 [4])
**Figure** 4.2.2-3 **and figure** 4.2.2-4 **represent the Roaming with Local
Breakout case.**
NOTE: The two Rx+ instances in Figure 4.2.3-4 apply to different application
functions in the HPLMN and VPLMN.
Figure 4.2.2-3: Roaming Architecture for EPS using S5, S2a, S2b -- Local
Breakout
NOTE: The two Rx+ instances in Figure 4.2.3-5 apply to different application
functions in the HPLMN and VPLMN.
Figure 4.2.2-4: Roaming Architecture for EPS using S5, S2c -- Local Breakout
# 5 Charging in the evolved 3GPP system
## 5.1 Charging for 3GPP accesses
### 5.1.1 Non-roaming case
#### 5.1.1.1 Use case definition and architecture
In this use case the subscriber is within the HPLMN with 3GPP E-UTRAN or 3GPP
2G/3G access to the network.\ The network architecture for this use case is
specified in clause 4.2.1 in TS 23.401 [3], and also depicted in clause 4.2.1
of the present document.
#### 5.1.1.2 Key issues
##### 5.1.1.2.1 Key issue #1 "Location of PCEF functionality"
A solution for Policy and Charging Control in EPC is based on the Rel-7 PCC.
One of the main functions of the PCC is the PCEF (see TS 23.203 [8] for
details). PCEF has the connection to the PCRF over Gx and connections to the
offline and online charging systems over Gz and Gy, respectively.
As the PCEF functionality encompasses service data flow detection, policy
enforcement and flow based charging functionalities, it is logical to have the
PCEF functionality within the P-GW which terminates the SGi interface towards
the PDN. Since all user plane traffic will be going through the P-GW, there is
no need to have the functionality e.g. in the S-GW. Also, the P-GW will not
change within a session, whereas the S-GW may change. Therefore in the EPC
architecture (see TS 23.401 [3] for details) the PCEF functionality shall
reside in the P-GW. P-GW will not change within a session.
As the P-GW shall also support existing 2G/3G access it is logical to utilize
exiting PS charging architecture (see TS 32.251 [6] for details) in P-GW. The
Ga and Bx reference points include the required functionality defined for the
Gz reference point and the Ro reference point and application as specified in
TS 32.299 [12] include the functionality defined for the Gy reference point.
Editor\'s Note: SA2 is currently discussing the second PCEF in the S-GW.
#### 5.1.1.3 Conclusions
##### 5.1.1.3.1 Conclusions on Key issue #1 "Location of PCEF functionality"
The PCEF shall reside in the P-GW, having a connection to the Online Charging
System over Gy, and a connection to the CGF/Billing Domain over Gz/Bx.
#### 5.1.1.4 Open issues
Editor\'s Note: For Further Study
### 5.1.2 Home Routed Roaming cases
#### 5.1.2.1 Use case definition and architecture
In this use case the subscriber is roaming in a VPLMN with 3GPP E-UTRAN or
3GPP 2G/3G access to the network, and user plane traffic is routed to the
HPLMN. The network architecture for this use case is specified in clause 4.2.2
in TS 23.401 [3], and also depicted in clause 4.2.1 in the present document.
Other possible roaming scenarios are described in clause 5.1.3.
#### 5.1.2.2 Key issues
##### 5.1.2.2.1 Key issue #1 "Location of PCEF functionality"
The solution for Policy and Charging Control in EPC is based on the Rel-7 PCC.
One of the main functions of the PCC is the PCEF (see TS 23.203 [8] for
details). PCEF has the connection to the PCRF over Gx and connections to the
offline and online charging systems over Gz and Gy, respectively.
As the PCEF functionality encompasses service data flow detection, policy
enforcement and flow based charging functionalities, it is logical to have the
PCEF functionality within the P-GW, which terminates the SGi interface towards
the PDN. In this use case, where user plane traffic is routed to the HPLMN,
the SGi interface is terminated in the HPLMN P-GW.
Since all user plane traffic will be going through the HPLMN P-GW, there is no
need to have the PCEF functionality in the VPLMN S-GW. Also, the P-GW will not
change within a session, whereas the S-GW may change. Therefore in the EPC
architecture (see TS 23.401 [3] for details), in roaming cases with home
routed traffic and 3GPP E-UTRAN or 3GPP 2G/3G access, the PCEF functionality
shall reside in the HPLMN P-GW.
The charging architecture in the HPLMN P-GW shall utilize the existing PS
Charging architecture as in non-roaming cases (see clause 5.1.1 in the present
document).
##### 5.1.2.2.2 Key issue #2 "Inter-operator charging"
In this use case the VPLMN operator may wish to produce bearer level charging
information to be used for inter-operator charging (settlements). The logical
place for doing this is the VPLMN S-GW, which terminates the S8a interface
towards the HPLMN P-GW.
#### 5.1.2.3 Conclusions
##### 5.1.2.3.1 Conclusions on Key issue #1 "Location of PCEF functionality"
The PCEF shall reside in the HPLMN P-GW, having a connection to the Online
Charging System over Gy, and a connection to the CGF/Billing Domain over Gz/Bx
irrespective of the mobility protocol in operation in the home routed case.
##### 5.1.2.3.2 Conclusions on Key issue #2 "Inter-operator charging"
The VPLMN operator may produce bearer level charging data for inter-operator
charging (settlements) in the VPLMN S-GW.
#### 5.1.2.4 Open issues
Editor\'s Note: For Further Study
### 5.1.3 Local Breakout Roaming case
#### 5.1.3.1 Use case definition and architecture
In this use case the subscriber is roaming in a VPLMN with 3GPP E-UTRAN or
3GPP 2G/3G access to the network, and user plane traffic breaks out locally in
the VPLMN. The network architecture for this use case is specified in clause
4.2.2 in TS 23.401 [3], and also depicted in clause 4.2.1 in the present
document.
As discussed in clause 5.1.2, the solution for Policy and Charging Control in
EPC is based on the Rel-7 PCC. One of the main functions of the PCC is the
PCEF (see TS 23.203 [8] for details). PCEF has the connection to the PCRF over
S7 (Gx) and connections to the offline and online charging systems over Gz and
Gy, respectively. As the PCEF functionality encompasses service data flow
detection, policy enforcement and flow based charging functionalities, it is
logical to have the PCEF functionality within the P-GW, which terminates the
SGi interface towards the PDN. Since all user plane traffic will be going
through the P-GW, there is no need to have the PCEF functionality in the S-GW.
Also, the P-GW will not change within a session, whereas the S-GW may change.
#### 5.1.3.2 Key issues
##### 5.1.3.2.1 Key issue #1 "Location of online and offline charging systems"
In this use case, where, in roaming cases, user plane traffic breaks out in
the VPLMN, the PCEF functionality shall reside in the VPLMN P-GW.
As the PCEF has connections to the offline and online charging systems over Gz
and Gy, respectively, and, as in this use case the PCEF is in the P-GW in the
VPLMN, there is a question over the location of the offline and online
charging systems. Are they in the HPLMN or the VPLMN?
**Online charging (OCS) and Offline charging (CGF/Billing domain) in the
HPLMN**
This implies that the Gz (or Bx) and Gy reference points would need to be
inter-PLMN. This will introduce security and trust questions, but does keep
the subscriber knowledge in the HPLMN.
The knowledge of the addresses of the OCS and CGF may not be available if the
Rx+ interface is from the visited network.
**Online charging (OCS) and Offline charging (CGF/Billing domain) in the
VPLMN**
This implies that the Gz (or Bx) and Gy reference points would continue to be
intra-PLMN.
It could mean that knowledge about the subscriber account would need to be
available in the VPLMN's OCS -- could this be achieved by means of visited OCS
communication with the home OCS? This communication is not currently defined.
Alternatively, the visited OCS could communicate with the home OCS which would
continue to perform the online charging. This communication is not currently
defined and how does the visited OCS know the home OCS?
For offline charging, there would need to be sharing of CDRs with TAP
(Transferred Account Procedure) between the two operators' billing domains.
The knowledge of the addresses of the OCS and CGF would not be available if
the Rx+ interface is from the home network, but these can be pre-configured in
the PCEF.
Editor\'s Note: Of course, there is no need for the same strategy to be
adopted for online as for offline charging.
#### 5.1.3.3 Conclusions
##### 5.1.3.3.1 Conclusions on Key issue #1 "Location of online and offline
charging systems"
Both possible options for the location of the online and offline charging
systems have challenges and would require extensions to the existing charging
architecture.
#### 5.1.3.4 Open issues
The location of the offline and online charging systems with local breakout
(in visited or home network) needs to be determined. Possibly both options
will need to be standardised.
The mechanism for online charging with the OCS in the visited network needs to
be determined.
## 5.2 Charging for non-3GPP accesses
### 5.2.1 Non-roaming case
#### 5.2.1.1 Use case definition and architecture
In this use case the subscriber is within the HPLMN with any of the following
accesses to the network:
a) a trusted non-3GPP access with S2a interface to the P-GW;
b) a non-trusted non-3GPP access with a Wn* interface to the ePDG, and a S2b
interface from the ePDG to the P-GW;
c) a connection over the S2c interface from the UE to the P-GW over trusted or
non-trusted non-3GPP access or 3GPP access.
The network architecture for this use case is specified in clause 4.2.1 in TS
23.402 [4], and also depicted in clause 4.2.2 in the present document.
#### 5.2.1.2 Key issues
##### 5.2.1.2.1 Key issue #1 "Location of PCEF functionality"
The solution for Policy and Charging Control in EPC is based on the Rel-7 PCC.
One of the main functions of the PCC is the PCEF (see TS 23.203 [8] for
details). PCEF has the connection to the PCRF over Gx and connections to the
offline and online charging systems over Gz and Gy, respectively.
As the PCEF functionality encompasses service data flow detection, policy
enforcement and flow based charging functionalities, it is logical to have the
PCEF functionality within the P-GW which terminates the SGi interface towards
the PDN. In this use case the P-GW also terminates the S2a, S2b and S2c
interfaces (see clause 5.2.1.1) in the three access scenarios.
Thus, in the EPC architecture (see TS 23.402 [4] for details) for non-roaming
cases with non-3GPP accesses, the PCEF functionality shall reside in the P-GW.
In Rel-7 the PDG had PCEF charging functionality, but since all user plane
traffic going through the ePDG will also be going through the P-GW in this use
case, there is no need to have the PCEF charging functionality in the ePDG.
Editor's note: It should be verified if the PCRF will communicate with only
one instance of PCEF in the P-GW.
The charging architecture in the P-GW shall utilize the existing PS charging
architecture as in non-roaming cases for 3GPP accesses (see clause 5.1.1 of
the present document).
Editor's note: It may be necessary to carry some access information over the
S2x interfaces to the P-GW for charging purposes.
#### 5.2.1.3 Conclusions
##### 5.2.1.3.1 Conclusions on Key issue #1 "Location of PCEF functionality"
The PCEF shall reside in the P-GW, having a connection to the Online Charging
System over Gy, and a connection to the CGF/Billing Domain over Gz/Bx.
#### 5.2.1.4 Open issues
Editor\'s Note: For Further Study
### 5.2.2 Roaming cases
#### 5.2.2.1 Use case definition and architecture
In this use case the subscriber is roaming in a VPLMN with user plane traffic
routed to the HPLMN. The subscriber's access to the VPLMN is any of the
following:
a) a trusted non-3GPP access with S2a interface to the VPLMN S-GW or to the
HPLMN P-GW;
b) a non-trusted non-3GPP access with a Wn* interface to the VPLMN ePDG, and
an S2b interface from the VPLMN ePDG to the VPLMN S-GW or to the HPLMN P-GW;
c) a connection over the S2c interface from the UE to the VPLMN S-GW or to the
HPLMN P-GW over trusted or non-trusted non-3GPP access or 3GPP access.
The network architecture for this use case is specified in clause 4.2.2 in TS
23.402 [4], and also depicted in clause 4.2.2 in the present document.
Editor's note: Other possible roaming scenarios are currently studied in SA2.
#### 5.2.2.2 Key issues
##### 5.2.2.2.1 Key issue #1 "Location of PCEF functionality"
The solution for Policy and Charging Control in EPC is based on the Rel-7 PCC.
One of the main functions of the PCC is the PCEF (see TS 23.203 [8] for
details). PCEF has the connection to the PCRF over Gx and connections to the
offline and online charging systems over Gz and Gy, respectively.
As the PCEF functionality encompasses service data flow detection, policy
enforcement and flow based charging functionalities, it is logical to have the
PCEF functionality within the P-GW, which terminates the SGi interface towards
the PDN. In this use case the user plane traffic is routed to the HPLMN P-GW,
either directly across the S2x interface or through the VPLMN S-GW (across the
S8b interface between the VPLMN S-GW and the HPLMN P-GW). The SGi interface is
thus terminated in the HPLMN P-GW.
Since all user plane traffic will be going through the HPLMN P-GW, there is no
need to have the PCEF functionality in the VPLMN S-GW. Also, the P-GW will not
change within a session, whereas the S-GW may change. Therefore in the EPC
architecture (see TS 23.402 [4] for details), in roaming cases with home
routed traffic and with any of the accesses listed above in clause 5.2.2.1,
the PCEF functionality shall reside in the HPLMN P-GW.
The current draft of TS 23.402 [4] has PCRF in the VPLMN with a connection to
the VPLMN S-GW. However, in this use case it is not needed for any charging
purposes, because subscriber charging can be produced in the HPLMN P-GW.
In Rel-7 the PDG had PCEF charging functionality, but since all user plane
traffic going through the VPLMN ePDG will also be going through the HPLMN P-GW
in this use case, there is no need to have the PCEF charging functionality in
the VPLMN ePDG.
The charging architecture in the HPLMN P-GW shall utilize the existing PS
charging architecture as in non-roaming cases for 3GPP accesses (see clause
5.1.1 in the present document).
Editor's note: It may be necessary to carry some access information over the
interfaces towards the HPLMN P-GW for charging purposes.
##### 5.2.2.2.2 Key issue #2 "Inter-operator charging"
In this use case the VPLMN operator may wish to produce bearer level charging
information to be used for inter-operator charging (settlements). The logical
place for doing this is the VPLMN S-GW, which terminates the S8b interface
towards the HPLMN P-GW.
#### 5.2.2.3 Conclusions
##### 5.2.2.3.1 Conclusions on Key issue #1 "Location of PCEF functionality"
The PCEF shall reside in the HPLMN P-GW, having a connection to the Online
Charging System over Gy, and a connection to the CGF/Billing Domain over
Gz/Bx.
##### 5.2.2.3.2 Conclusions on Key issue #2 "Inter-operator charging"
The VPLMN operator may produce volume based bearer level charging data for
inter-operator charging (settlements) in the VPLMN S-GW.
#### 5.2.2.4 Open issues
Editor\'s Note: For Further Study
##### 5.2.2.4.1 Open issues on Key issue #1 "Location of PCEF functionality"
The S7 interface between VPLMN S-GW to the VPLMN vPCRF is not needed for
charging in the home routed traffic case.
##### 5.2.2.4.2 Open issues on Key issue #2 "Inter-operator charging"
The direct communication between the VPLMN ePDG to the HPLM P-GW as specified
in TS 23.402 [4] may prevent the generation of bearer charging charging
information by the VPLMN.
### 5.3 Mobility cases
Editor's note: This clause should cover inter-access system mobility cases
independent of roaming.
#### 5.3.1 Use case definition and architecture
In this use case the subscriber is within the HPLMN and has IP access to the
network from one of the evolved packet system supported accesses (i.e. 3GPP
E-UTRAN, 3GPP 2G/3G or 3GPP / non-3GPP IP). The network architecture for this
use case is specified in clause 4.2.1 in TS 23.402 [4], and also depicted in
clause 4.2.2 in the present document.
#### 5.3.2 Key issues
#### 5.3.2.1 Key issue #1 "Inter-access correlation"
Mobility is supported between any of the evolved packet system supported
accesses. I.e. a user may switch between any of the supported accesses and
will expect to continue existing session. The session is anchored at the S-GW
for local mobility between non-3GPP accesses and at the P-GW for mobility
between 3GPP access and non-3GPP access.
There will be a need to be able to seamlessly charge (both online and offline)
across the various mobility options, while information could be needed on the
type of access to allow the application of different charging rates for each
access type.
The P-GW remains constant, so any changes in the access must be recorded in
the charging records for offline charging and must trigger event or update
messages for the Online Charging System if charging is performed at the P-GW.
#### 5.3.3 Conclusions
If charging occurs at the S-GW or ePDG, then a correlation mechanism would be
needed to allow the records from different S‑GW or ePDG involved with the same
session to be recognised as being associated together at the OCS or Billing
Domain.
#### 5.3.4 Open issues
The mechanism for inter-access correlation needs to be identified.
# 6 Recommendations
## 6.1 Recommendations for work item and specification structure
It is recommended that a new WID 'EPC Charging' below the Feature WID '3GPP
System Architecture Evolution Specification' will cover the standardisation of
the charging aspects of Evolved Packet System.
The existing specifications for the charging aspects of TS 32.251 for PS-
domain and TS 32.252 for WLAN should be extended for the Evolved Packet
System. Changes will also be needed to the charging architecture specification
in TS 32.240 as well as for the OCS architecture in TS 32.296 and the
corresponding enhancements in the charging protocol specifications (TS 32.298
and TS 32.299).
## 6.2 Recommendations for charging requirements and principles
No changes will be required.
## 6.3 Recommendations for charging architecture
The charging architecture will need to be modified to cater for the P-GW and
thus the PCEF being in the visited network. Full PCEF with service-aware flow-
based charging is located only in P-GW.
## 6.4 Recommendations for charging data and protocols
Some changes will be required to the charging data to take into account the
new information available due to the different mobility models. The scope of
these changes should not be large. Changes will also be required to the
Transferred Account Procedure (TAP) for subscriber charging in case of Local
Breakout.
###### ### Annex A: List of open issues
Editor\'s Note: For Further Study
#