# Foreword
This Technical Specification (TS) was been produced by ETSI Technical
Committee Telecommunications and Internet converged Services and Protocols for
Advanced Networking (TISPAN) and originally published as ETSI TS 183 008 [18].
It was transferred to the 3rd Generation Partnership Project (3GPP) in in
January 2008.
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document specifies the stage three protocol description of the
Terminating Identification Presentation (TIP) and Terminating Identification
Restriction (TIR) services, based on stage one and two of the ISDN COLP [3]
and COLR [4] supplementary services. Within the TISPAN NGN Release 1 Next
Generation Network (NGN) the stage 3 description is specified using the IP
Multimedia Call Control Protocol based on Session Initiation Protocol (SIP)
and Session Description Protocol (SDP).
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
  * References are either specific (identified by date of publication, > edition number, version number, etc.) or nonâ€‘specific.
  * For a specific reference, subsequent revisions do not apply.
  * For a non-specific reference, the latest version applies. In the > case of a reference to a 3GPP document (including a GSM document), > a non-specific reference implicitly refers to the latest version > of that document _in the same Release as the present document_.
Referenced documents which are not found to be publicly available in the
expected location might be found at
[http://docbox.etsi.org/Reference]{.underline}.
For online referenced documents, information sufficient to identify and locate
the source shall be provided. Preferably, the primary source of the referenced
document should be cited, in order to ensure traceability. Furthermore, the
reference should, as far as possible, remain valid for the expected life of
the document. The reference shall include the method of access to the
referenced document and the full network address, with the same punctuation
and use of upper case and lower case letters.
NOTE: While any hyperlinks included in this clause were valid at the time of
publication ETSI cannot guarantee their long term validity.
## 2.1 Normative references
The following referenced documents are indispensable for the application of
the present document. For dated references, only the edition cited applies.
For non-specific references, the latest edition of the referenced document
(including any amendments) applies.
[1] ETSI ES 282 007: \"Telecommunications and Internet converged Services and
Protocols for Advanced Networking (TISPAN); IP Multimedia Subsystem (IMS);
Functional architecture\".
[2] ETSI ES 283 003: \"Telecommunications and Internet converged Services and
Protocols for Advanced Networking (TISPAN); IP Multimedia Call Control
Protocol based on Session Initiation Protocol (SIP) and Session Description
Protocol (SDP) Stage 3 (3GPP TS 24.229 (Release 7), modified)\".
[3] ETSI EN 300 094: \"Integrated Services Digital Network (ISDN); Connected
Line Identification Presentation (COLP) supplementary service; Service
description\".
[4] ETSI ETS 300 095: \"Integrated Services Digital Network (ISDN); Connected
Line Identification Restriction (COLR) supplementary service; Service
description\".
[5] IETF RFC 3323: \"A Privacy Mechanism for the Session Initiation Protocol
(SIP)\".
[6] IETF RFC 3325: \"Private Extensions to the Session Initiation Protocol
(SIP) for Network Asserted Identity within Trusted Networks\".
[7] IETF RFC 2396: \"Uniform Resource Identifiers (URI): Generic Syntax\".
[8] IETF RFC 3966: \"The tel URI for Telephone Numbers\".
[9] IETF RFC 3261: \"SIP: Session Initiation Protocol\".
[10] ETSI ES 282 003: \"Telecommunications and Internet converged Services and
Protocols for Advanced Networking (TISPAN); Resource and Admission Control
Sub-system (RACS); Functional Architecture\".
[11] IETF RFC 2806: \"URLs for Telephone Calls\".
[12] ITU-T Recommendation E.164: \"The international public telecommunication
numbering plan\".
[13] ITU-T Recommendation I.210: \"Principles of telecommunication services
supported by an ISDN and the means to describe them\".
[14] ETSI TS 182 006: \"Telecommunications and Internet converged Services and
Protocols for Advanced Networking (TISPAN); IP Multimedia Subsystem (IMS);
Stage 2 description\ (3GPP TS 23.228 V7.2.0, modified)\".
[15] ETSI TS 183 023: \"Telecommunications and Internet converged Services and
Protocols for Advanced Networking (TISPAN); PSTN/ISDN simulation services;
Extensible Markup Language (XML) Configuration Access Protocol (XCAP) over the
Ut interface for Manipulating NGN PSTN/ISDN Simulation Services\".
[16] ETSI ES 283 027:\"Telecommunications and Internet converged Services and
Protocols for Advanced networking (TISPAN); Endorsement of the SIP-ISUP
Interworking between the IP Multimedia (IM) Core Network (CN) subsystem and
Circuit Switch (CS) networks\ (3GPP TS 29.163 (Release 7), modified)\".
[17] IETF draft-ietf-sip-connected-identity-05.txt: Connected Identity in the
Session Initiation\ Protocol (SIP).
[18] ETSI TS 183 008 V2.7.0: \"Telecommunications and Internet converged
Services and Protocols for Advanced Networking (TISPAN); PSTN/ISDN simulation
services Terminating Identification Presentation (TIP) and Terminating
Identification Restriction (TIR); Protocol specification\".
# 3 Definitions and abbreviations
## 3.1 Definitions
For the purposes of the present document, the following terms and definitions
apply:
**Breakout Gateway Control Function (BGCF):** See ES 282 007 [1].
**Call Session Control Function (CSCF):** See ES 282 007 [1].
**dialog:** See RFC 3261 [9].
**header:** See RFC 3261 [9].
**header field:** See RFC 3261 [9].
**identity information:** all the information (RFC 2806 [11] / RFC 2396 [7] /
ITU-T Recommendation E.164 [12]) identifying a user, including trusted
(network generated) and/or untrusted (user generated) addresses
NOTE: Identity information takes the form of either a SIP URI (see RFC 3261
[9]) or a \"tel\" URI\ (see RFC 3966 [8]).
**incoming initial request:** all requests intended to initiate either a
dialog or a standalone transaction received from the served user
**Interrogating-CSCF (I-CSCF):** See ES 282 003 [10].
**Interconnection Border Control Function (IBCF):** See ES 282 003 [10].
**Media Gateway Control Function (MGCF):** See ES 282 007 [1].
**method:** See RFC 3261 [9].
**Multimedia Resource Function Controller (MRFC):** See ES 282 007 [1].
**Multimedia Resource Function Processor (MRFP):** See ES 282 007 [1].
**outgoing initial request:** all requests intended to initiate either a
dialog or a standalone transaction terminated by the served user
**provisional response:** See RFC 3261 [9].
**proxy:** See RFC 3261 [9].
**Proxy-CSCF (P-CSCF):** See ES 282 003 [10].
**public user identity:** See TS 182 006 [14], clause 4.3.3.2 and ES 282 003
[10].
**request:** See RFC 3261 [9].
**response:** See RFC 3261 [9].
**session:** See RFC 3261 [9].
**(SIP) transaction:** See RFC 3261 [9].
**Subscription Locator Function (SLF):** See ES 282 007 [1].
**supplementary service:** See ITU-T Recommendation I.210 [13], clause 2.4.
**tag:** See RFC 3261 [9].
**trusted identity information:** network generated user public identity
information
## 3.2 Abbreviations
For the purposes of the present document, the following abbreviations apply:
ANM ANswer Message (ISUP)
AS Application Server
BGCF Breakout Gateway Control Function
CDIV Communication DIVersion
CN Core Network
CON CONnect (ISUP)
CONF CONFerence
CS Circuit Switched
CSCF Call Session Control Function
HOLD communication HOLD
IAM Initial Address Message (ISUP)
IBCF Interconnection Border Control Function
I-CSCF (THIG) Incoming-Call Session Control Function (Topology Hiding
Interconnection Gateway)
I-CSCF Interrogating-Call Session Control Function
IFC Initial Filter Criteria
IMS IP Multimedia Subsystem
IP Internet Protocol
ISDN Integrated Service Data Network
ISUP MIME ISDN User Part Multi-purpose Internet Mail Extension
MCID Malicious Communication IDentification
MGCF Media Gateway Control Function
MRFP Multimedia Resource Function Processor
NGN Next Generation Network
OIP Originating Identification Presentation
OIR Originating Identification Restriction
P-CSCF Proxy-Call Session Control Function
PSTN Public Switch Telephone Network
S-CSCF Serving-Call Session Control Function
SIP Session Initiation Protocol
SLF Subscription Locator Function
TIP Terminating Identification Presentation
TIR Terminating Identification Restriction
UE User Equipment
XML Extensible Markup Language
# 4 Terminating Identification Presentation (TIP) and Terminating
Identification Restriction (TIR)
## 4.1 Introduction
The **Terminating Identification Presentation** (**TIP)** service provides the
originating party with the possibility of receiving identity information in
order to identify the terminating party.
The network shall deliver the Terminating Identity to the originating party on
_communication_ acceptance regardless of the terminal capability to handle the
information.
The **Terminating Identification Restriction (TIR)** is a service offered to
the connected party which enables the connected party to prevent presentation
of the terminating identity information to originating party.
## 4.2 Description
### 4.2.1 General description
The **Terminating Identification Presentation** (**TIP)** service provides the
originating party with the possibility of receiving trusted information in
order to identify the terminating party.
The **Terminating Identification Restriction (TIR)** is a service offered to
the terminating party which enables the terminating party to prevent
presentation of the terminating identity information to originating party.
## 4.3 Operational requirements
### 4.3.1 Provision/withdrawal
#### 4.3.1.1 TIP provision/withdrawal
The TIP service may be provided after prior arrangement with the service
provider or be generally available.
The TIP service shall be withdrawn at the subscriber\'s request or for
administrative reasons.
As a general operator policy a special arrangement may exist on a per
subscriber basis or on a general behaviour basis whereby the terminating
user\'s identity information intended to be transparently transported by the
network is not screened by the network.
#### 4.3.1.2 TIR provision/withdrawal
The TIR service, temporary mode, may be provided on a subscription basis or
may be generally available.
The TIR service, permanent mode, shall be provided on a subscription basis.
As a network option, the TIR service can be offered with several subscription
options. A network providing the TIR service shall support temporary mode at a
minimum. Subscription options are summarized in table 1.
Table 1: TIR subscription options
+----------------------------+----------------------------------------+ | Subscription option values | Values | +----------------------------+----------------------------------------+ | Mode | â€‘ permanent mode (active for all | | | requests) | | | | | | â€‘ temporary mode (specified by the | | | user per request) | +----------------------------+----------------------------------------+ | Temporary mode default | â€‘ presentation restricted | | | | | | â€‘ presentation not restricted | +----------------------------+----------------------------------------+
### 4.3.2 Requirements on the originating network side
For originating users that subscribe to the TIP service, if network provided
identity information about the terminator is available, and if presentation is
allowed, the network shall include that information in the responses sent to
the user.
If the presentation of the network asserted identity is restricted due to the
TIR service, then the originating user shall receive an indication that the
network provided identity was not sent because of restriction.
If the network asserted identity information is not available at the
originating network (for reasons such as interworking), then the network shall
indicate to the terminating user that the network asserted identity
information was not included for reasons other than restriction.
As a national option the originating AS can override the presentation
restriction indication and the terminating identity is then presented to the
originating subscriber for specific originating access\'s categories (e.g.
police).
### 4.3.3 Requirements on the terminating network side
As part of the basic communication control procedures specified in ES 283 003
[2], the following requirements apply at the terminating network side in
support of the TIP service and the TIR service. Unless noted otherwise, these
requirements are meant to apply to responses where the presence of the
P-Asserted-Identity and Privacy header fields are allowed. These procedures
apply regardless of whether the originating or terminating parties subscribe
to the TIP service or the TIR service.
The terminating network shall include network asserted identity information in
responses where allowed by\ ES 283 003 [2]. For TIR subscribers:
  * The terminating user may include an indication that it wishes to have the presentation of its identity information restricted, in any response where allowed by ES 283 003 [2].
  * If the terminating user has subscribed to the TIR service in the permanent or temporary mode, then the network shall automatically invoke the TIR service for every incoming request.
If the TIR service is not invoked, the network-provided identity shall be
considered to be presentation allowed.
## 4.4 Syntax requirements
The syntax for the relevant headers in the SIP requests and SIP responses
shall be as follows:
  * The syntax of the P-Asserted-Identity header field shall conform to the requirements in ES 283 003 [2]\ (RFC 3325 [6] and RFC 3966 [8]).
  * The syntax of the Privacy header shall conform to the requirements in ES 283 003 [2] (RFC 3323 [5] and\ RFC 3325 [6]).
  * The Syntax of the option tag \"from-change\" shall conform to the requirements in\ IETF draft-ietf-sip-connected-identity-05.txt [17]: Connected Identity in the Session Initiation Protocol (SIP)
## 4.5 Signalling procedures
### 4.5.0 General
For user configuration of the TIR service the Ut interface should be used.
See clause 4.9 for further information about the structure of the XML
document.
NOTE: Other possibilities for user configuration, as web-based provisioning or
pre-provisioning by the operator are outside the scope of the present
document.
### 4.5.1 Activation/deactivation
The TIP service is activated at provisioning and deactivated at withdrawal.
The TIR service is activated at provisioning and deactivated at withdrawal.
### 4.5.1A Registration/erasure
The TIP service requires no registration. Erasure is not applicable.
The TIR service requires no registration. Erasure is not applicable.
### 4.5.1B Interrogation
For TIP, interrogation is not applicable.
For interrogation of TIR, the Ut interface should be used.
### 4.5.2 Invocation and operation
#### 4.5.2.1 Actions at the originating UE
A UE that supports the TIP service signalling procedures shall support the
receipt, in SIP responses to SIP requests initiating a dialog or for
standalone transactions, one or more P-Asserted-Identity headers, each one
containing a network-provided identity information of the terminating user.
If no P-Assertedâ€‘Identity header fields are present, but a Privacy header
field set to \"id\" was present, then the\ network-provided identity
information was withheld due to presentation restriction.
If neither P-Asserted-Identity header fields nor a Privacy header fields set
to \"id\" are present, then the network-provided identity information was not
available (due, for example, to interworking with other networks).
Once a 2xx response is received, the P-Asserted-Identity header field of the
first 2xx response is used, e.g. when presenting the identity to the user.
NOTE 1: Any P-Asserted-Identity received in a provisional response is outside
the scope of this service.
If the originating user is subscribed to the TIP services and wants to receive
the TIP the UE shall add the option tag \"from-change\" to the Supported
header field in the initial request.
NOTE 2: This option tag is used to indicate that a UA supports changes to URIs
in From and To header fields during a dialog. Not setting this indication
shows that the UE is not supporting this procedure.
#### 4.5.2.2 Actions at the originating P-CSCF
There are no procedures at the originating P-CSCF relevant to the TIP service
or the TIR service.
#### 4.5.2.3 Actions at the S-CSCF serving the originating UE
Procedures according to ES 283 003 [2] shall apply.
NOTE 1: If the Privacy header field set to \"id\" is included in the response
message, this entry should not be removed as described in ES 283 003 [2]
clause 5.4.3.2. The priv-value \"id\" in the Privacy header will be used by
the originating UE to distinguish the request of TIR by the terminating user.
NOTE 2: Annex B provides an example of an initial filter criterion that can be
applied for the TIP/TIR service.
#### 4.5.2.4 Actions at the AS serving the originating UE
If the originating user is subscribed to the TIP service the AS shall pass the
option tag \"from-change\" in the Supported header field in the initial
request if not already received.
If the originating user is not subscribed to the TIP service the AS shall
remove the option tag \"from-change\".
NOTE 1: If the terminating user requests privacy the S-CSCF removes the
P-Asserted-Identity header field as part of the basic communication procedures
defined in ES 283 003 [2].
If an originating user does not subscribe to the TIP service, any P-Asserted-
Identity header fields or Privacy header fields included in the SIP response
shall be removed. As a network option, if the originating user has an override
category, the AS shall send the P-Asserted-Identity headers and remove the
Privacy header fields.
When the Privacy header field is set to \"id\", with the exception of the
cases listed above, the AS should not remove this Privacy header entry.
NOTE 2: The priv-value \"id\" in the Privacy header will be used by the
originating UE to distinguish the request of TIR by the terminating user.
#### 4.5.2.5 Actions at the outgoing I-CSCF (THIG)
Procedures according to ES 283 003 [2] shall apply.
#### 4.5.2.6 Actions at the incoming I-CSCF
Procedures according to ES 283 003 [2] shall apply.
#### 4.5.2.7 Actions at the outgoing IBCF
Procedures according to ES 283 003 [2] shall apply.
NOTE: It is assumed that the IBCF is responsible for stripping the
P-Assertedâ€‘Identity from the SIP header when interworking with untrusted
networks.
#### 4.5.2.8 Actions at the incoming IBCF
Procedures according to ES 283 003 [2] shall apply.
NOTE: It is assumed that the IBCF is responsible for stripping the P-Asserted-
Identity from the SIP header when interworking with untrusted networks.
#### 4.5.2.9 Actions at the AS serving the terminating UE
For a terminating user who subscribes to the TIR service in \"permanent
mode\", if a SIP response to a SIP request does not include a Privacy header
field, the AS shall insert a Privacy header field set to \"id\". If the
response includes a Privacy header field that is set to \"none\", the AS shall
remove the \"none\" value from the Privacy header field.
For a terminating user who subscribes to the TIR service in \"permanent
mode\", if a SIP INVITE with a Supported header field including a option tag
\"from-change\", the AS shall remove the option tag \"from-change\".
For a terminating user who subscribes to the TIR service in \"temporary mode\"
with default set to \"restricted\", if a SIP response to a SIP request does
not include a Privacy header field, the AS shall insert a Privacy header field
set to \"id\".
For a terminating user who subscribes to the TIR service in \"temporary mode\"
with default set to \"not restricted\" normal procedures apply.
As a terminating network option, if the \"no screening\" special arrangement
does not exist with the terminating user and an UPDATE request is received
from the terminating user, then the AS may attempt to match the information in
the From header with the set of registered public user identities for the
served user. If no match is found, the AS may change the value of the From
header in the UPDATE to the public user identity of the served user.
#### 4.5.2.10 Actions at the S-CSCF serving the terminating UE
Procedures according to ES 283 003 [2] shall apply.
NOTE: Annex B provides an example of an initial filter criterion that that can
be applied for the TIP/TIR service.
#### 4.5.2.11 Actions at the terminating P-CSCF
Procedures according to ES 283 003 [2] shall apply.
#### 4.5.2.12 Actions at the terminating UE
A terminating UE receiving an initial request including a Supported header
field with the option tag \"from-change\" and supporting the \"from-to\"
change shall sent within a provisional or final response the Supported header
with the option tag \"from-change\".
A terminating UE receiving an initial request including a Supported header
field with the option tag \"from-change\" may send a UPDATE message with a
updated from and to header according the rules of\ draft-ietf-sip-connected-
identity-05.txt [17].
The destination UE, if the terminating user wishes to override the default
setting of \"presentation not restricted\" of the TIR service in temporary
mode, shall include a Privacy header with privacy type of \"id\" in any
non-100 responses it sends upon receipt of a SIP request.
The destination UE , if the terminating user wishes to override the default
setting of \"presentation restricted\" of the TIR service in temporary mode,
shall include a Privacy header with privacy type of \"none\" in any non-100
responses it sends upon receipt of a SIP request.
NOTE: It is assumed that TIR subscribers support RFC 3325 [6].
## 4.6 Interaction with other simulation services
### 4.6.1 Communication session Hold (HOLD)
No impact, i.e. neither simulation service shall affect the operation of the
other simulation service.
### 4.6.2 Terminating Identification Presentation (TIP)
The TIR service shall normally take precedence over the TIP service. The TIP
service can take precedence over the TIR service when the originating user has
an override category. This is a national matter, the operation of which is
outside the scope of the present document.
### 4.6.3 Terminating Identification Restriction (TIR)
The TIR service shall normally take precedence over the TIP service. The TIP
service can take precedence over the TIR service when the originating user has
an override category. This is a national matter, the operation of which is
outside the scope of the present document.
### 4.6.4 Originating Identification Presentation (OIP)
No impact, i.e. neither simulation service shall affect the operation of the
other simulation service.
### 4.6.5 Originating Identification Restriction (OIR)
No impact, i.e. neither simulation service shall affect the operation of the
other simulation service.
### 4.6.6 Conference (CONF)
Conference controller: no impact, i.e. neither simulation service shall affect
the operation of the other simulation service.
Participants in a conference shall not receive the TIP service information of
participants being added to the conference.
### 4.6.7 Communication DIVersion services (CDIV)
In case of the TIP service if the served (forwarding/deflecting) user selects
the option that the originating user is not notified of communication
diversion, then the originating user shall receive no diversion notification.
In addition, the originating user shall not receive the terminating user\'s
identity information when the communication is answered, unless the
originating user has override capability.
In case of the TIP service if the served (forwarding/deflecting) user selects
the option that the originating user is notified, but without the divertedâ€‘to
address, then the originating user shall not receive the terminating user\'s
identity information when the communication is answered, unless the
originating user has override capability.
If a diverted-to user subscribes to the TIR service \"permanent mode\", then
the diverted-to user\'s URI shall not be provided with the notification that
the communication has been diverted.
If a diverted-to user subscribes to the TIR service \"temporary mode\", then
the divertedâ€‘to user\'s URI shall not be provided until negotiation with the
user has taken place and a positive indication from the user has been
received.
In each of the above situations, a originating user that subscribes to the TIP
service and who has override capability will not receive the diverted-to
user\'s number as part of the diverting notification information, but can use
the override capability in order to receive the terminating identity
information when the communication is answered.
### 4.6.8 Malicious Communication IDentification (MCID)
No impact, i.e. neither simulation service shall affect the operation of the
other simulation service.
## 4.7 Interactions with other networks
### 4.7.1 Interaction with PSTN/ISDN networks
The interworking described in ES 283 027 [16] shall apply.
Additionally for the 2nd Identity the following procedures shall apply.
#### 4.7.1.1 Interworking at the O-MGCF
For the mapping of IAM to the INVITE Message:
If an Optional forward call indicators parameter in the IAM is received where
the bit H _Connected line identity request indicator_ is set to \"requested\".
Then the option tag \"from-change\" shall be add to the Supported header
field. See table 4.7.1.1.1.
Table 4.7.1.1.1: Mapping of ISUP IAM to SIP INVITE
* * *
ISUP Parameter Derived value of parameter field Source SIP header field and
component Source Component value Optional forward call indicator _Connected
line identity request indicator_ is set to \"requested\" Supported \"from-
change\"
* * *
If a provisional or final response including the option tag \"from-change\" is
received , then the O-MGCF shall:
  * if a 200 OK to the INVITE request is received, start timer T~TIR1~; and
  * store the 200 OK response, without interworking it.
> otherwise the 200 OK (INVITE) shall be mapped as described within ES 283 027
> [16].
>
> If an UPDATE request is received containing a changed From header field
> before the timer T~TIR1~ expired, then the Oâ€‘MGCF shall:
  * stop timer T~TIR1;~
  * map the From header field received in the UPDATE request to the Generic number in the ANM as shown in table 4.7.1.1.2;
  * if the UPDATE includes a P-Asserted-Identity header field that is different from the one within the stored 200 OK response, the latest received P-Asserted-Identity header field shall be mapped to the connected number as described within ES 283 027 [16]; and
  * map the parameters needed to be mapped of the stored 200 OK response to an ANM as described within\ ES 283 027 [16], modified by the changed mapping steps of the From and P-Asserted-Identity header fields.
When T~TIR1~ expires, then the stored 200 OK (INVITE) response shall be mapped
as described within ES 283 027 [16].
Table 4.7.1.1.2: Mapping of SIP UPDATE to ISUP ANM/CON
* * *
ANM/CON UPDATE Generic number From header
* * *
Table 4.7.1.1.3: Mapping of SIP From header field to ISUP Generic Number\
(\"additional connected number\") parameter
+----------------+----------------+----------------+----------------+ | Source SIP | Source | Generic Number | Derived value | | header field | component | parameter | of parameter | | and component | value | field | field | +----------------+----------------+----------------+----------------+ | -- | -- | Number | \"_additional | | | | Qualifier | connected | | | | Indicator | number_ \" | +----------------+----------------+----------------+----------------+ | From, userinfo | CC | Nature of | If CC is equal | | component of | | Address | to the country | | URI assumed to | | Indicator | code of the | | be in form\ | | | country where | | \"+\" CC + NDC | | | Iâ€‘MGCF is | | + SN | | | located AND | | | | | the next ISUP | | | | | node is | | | | | located in the | | | | | same country, | | | | | then set to | | | | | _\"national | | | | | (significant) | | | | | number\"_ else | | | | | set to | | | | | \" | | | | | _international | | | | | number_ \" | +----------------+----------------+----------------+----------------+ | -- | -- | Number | \"_complete_ \" | | | | Incomplete | | | | | Indicator | | +----------------+----------------+----------------+----------------+ | -- | -- | Numbering Plan | \"_ISDN | | | | Indicator | (Telephony) | | | | | numbering plan | | | | | ( | | | | | Recommendation | | | | | E.164)_ \" | +----------------+----------------+----------------+----------------+ | Privacy, | Privacy header | Address | \ | | privâ€‘value | field absent | Presentation | "_presentation | | component | | Restricted | allowed_ \" | | | | Indicator | | | | | (APRI) | | +----------------+----------------+----------------+----------------+ | | \"_none_ \" | | \ | | | | | "_presentation | | | | | allowed_ \" | +----------------+----------------+----------------+----------------+ | | \"_header_ \" | | \ | | | | | "_presentation | | | | | restricted_ \" | +----------------+----------------+----------------+----------------+ | | \"_user_ \" | | \ | | | | | "_presentation | | | | | restricted_ \" | +----------------+----------------+----------------+----------------+ | -- | -- | Screening | \"_user | | | | Indicator | provided, not | | | | | verified_ \" | +----------------+----------------+----------------+----------------+ | From, userinfo | CC, NDC, SN | Address | If NOA is | | component | | Signals | \"_national | | assumed to be | | | (significant) | | in form\ | | | number_ \" then | | \"+\" CC + NDC | | | set to | | + SN | | | | | | | | NDC + SN. | | | | | | | | | | If NOA is | | | | | \" | | | | | _international | | | | | number_ \" | | | | | | | | | | then set to CC | | | | | + NDC + SN | +----------------+----------------+----------------+----------------+
#### 4.7.1.2 Interworking at the I-MGCF
For the mapping of INVITE to IAM the Message:
IF an option tag \"from-change\" is included within the Supported header field
of the received INVITE,
THEN the bit H _Connected line identity request indicator_ of the Optional
forward call indicators parameter in the IAM shall be set to \"requested\".
Table 4.7.1.2.1: Mapping of a SIP Supported header field of a SIP INVITE\ to
the ISUP Optional forward call indicator of a ISUP IAM
* * *
Source SIP header field and component Source Component value ISUP Parameter
Derived value of parameter field Supported \"from-change\" Optional forward
call indicator _Connected line identity request indicator_ is set to
\"requested\".
* * *
IF a received ISUP ANM includes a ISUP Generic Number (\"additional connected
number\") parameter THEN the\ I-MGCF shall sent a 200 OK (INVITE) including a
option tag \"from-change\" and an UPDATE as shown in table 4.7.1.2.2.
The to header field of the UPDATE is derived from the P-Asserted-Identity
received within the initial INVITE.
Table 4.7.1.2.2: Mapping of ANM Generic Number (_\"_ additional connected
number _\"_)\ to SIP From header field in a SIP UPDATE
+----------------+----------------+----------------+----------------+ | ISUP | Value | SIP component | Value | | P | | | | | arameter/field | | | | +----------------+----------------+----------------+----------------+ | Generic Number | \"_additional | From header | displayâ€‘name | | | connected | field | (optional) and | | Number | number_ \" | | addrâ€‘spec | | Qualifier | | | | | Indicator | | | | +----------------+----------------+----------------+----------------+ | Nature of | _\"national | Addrâ€‘spec | Add \"+\" CC | | Address | (significant) | | (of the | | Indicator | number\"_ | | country where | | | | | the IWU is | | | | | located) to | | | | | Generic Number | | | | | Address | | | | | Signals then | | | | | map to user | | | | | portion of URI | | | | | scheme used | +----------------+----------------+----------------+----------------+ | | _\ | | Map complete | | | "international | | Generic Number | | | number\"_ | | Address | | | | | Signals used | | | | | prefixed with | | | | | a \"+\" to | | | | | user portion | | | | | of URI scheme | | | | | used | +----------------+----------------+----------------+----------------+ | Address | \ | []{.underline} | No Privacy | | Presentation | "_presentation | | header or not | | restriction | allowed_ \" | | \"_header_ \" | | indicator | | | or not | | (APRI) | | | \"_user_ \" | +----------------+----------------+----------------+----------------+ | []{.underline} | \ | []{.underline} | \"_header_ \" | | | "_presentation | | | | | restricted_ \" | | | +----------------+----------------+----------------+----------------+ | Address | if NOA is | Displayâ€‘name | displayâ€‘name | | Signals | \"_national | (optional) | shall be | | | (significant) | | mapped from | | | number\"_ then | | Address | | | the format of | | Signals, if | | | the address | | network policy | | | signals is: | | allows it | | | | | | | | NDC + SN | | | | | | | | | | If NOA is | | | | | \" | | | | | _international | | | | | number\"_ | | | | | | | | | | then the | | | | | format of the | | | | | address | | | | | signals is: | | | | | | | | | | CC + NDC + SN | | | +----------------+----------------+----------------+----------------+ | | | Addrâ€‘spec | \"+\" CC NDC | | | | | SN mapped to | | | | | user portion | | | | | of URI scheme | | | | | used | +----------------+----------------+----------------+----------------+
A received connected number in an ANM shall be mapped to the P-Asserted-
Identity as shown in table 21 of\ ES 283 027 [16] of the UPDATE message.
### 4.7.2 Interaction with PSTN/ISDN emulation
When interworking with the PSTN/ISDN domain, the following header fields shall
be passed without changes:
  * P-Asserted-Identity header field; and
  * privacy header field.
NOTE: The SIP header fields are transcoded by the MGCF from and to an ISUP
MIME body.
If the network is not trusted the P-Assertedâ€‘Identity shall be removed from
SIP requests and SIP responses.
### 4.7.3 Interaction with other IP networks
If the other IP network is a trusted network and the RFC 3323 [5] and RFC 3325
[6] are supported the following header fields shall be forwarded without
changes:
  * P-Asserted-Identity header field; and
  * privacy header field.
If the IP network is not trusted the P-Asserted- Identity header field shall
be removed from SIP requests and SIP responses.
## 4.8 Parameter values (timers)
* * *
Symbol Timeout\ Cause for initiation Normal termination At expiry value
T~TIR1~ 0,1 -- 2 seconds (default 0,1) On receipt of provisional or final
response including the option tag\ At the receipt of an UPDATE map the
received 200OK to an ANM \"from-change\"
* * *
## 4.9 Service configuration
Terminating Identity documents are subâ€‘trees of the _simservs_ XML document
specified in TS 183 023 [15]. As such, Terminating Identity documents use the
XCAP application usage in TS 183 023 [15].
**Data semantics:** The semantics of the Terminating Identity XML
configuration document is specified in clause 4.9.1.
**XML schema:** Implementations in compliance with the present document shall
implement the XML schema that minimally includes the XML Schema defined in
clause 4.9.2 and the _simservs_ XML schema specified in clause 6.3 of TS 183
023 [15].
An instance of an Terminating Identity document is shown:
\
\
\
\
\presentation-restricted\
\
\
### 4.9.1 Data semantics
The TIP service can be activated/deactivated using the active attribute of the
\ service element.
The TIR service can be activated/deactivated using the active attribute of the
\ service element. Activating
the TIR service this way activates the temporary mode TIR service. When
deactivated and not overruled by operator settings, basic communication
procedures apply.
The behaviour of the temporary mode TIR is configured with the optional
\ element. There are two values that this element can take:
  * **Presentation-restricted:** configures the service to behave as specified in clause 4.5.2.9 for the case TIR service in \"temporary mode\" with default \"restricted\".
  * **Presentation-not-restricted:** configures the service to behave as specified in clause 4.5.2.9 for the case TIR service in \"temporary mode\" with default \"not restricted\".
### 4.9.2 XML schema
\
\
\
\
\Terminating Identity presentation Restriction
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\Terminating Identity Presentation
\
\
\
\
###### ## Annex A (informative): Signalling flows
No TIP/TIR service specific signalling flow is necessary in addition to the
basic communication control according to\ ES 283 003 [2].
###### ## Annex B (informative): Example of filter criteria
This annex provides an example of a filter criterion that triggers SIP
requests that are subject to initial filter criteria evaluation.
# B.1 Originating IFC for TIP service
All outgoing initial SIP requests are forwarded to an Application Server (AS)
providing the TIR simulation service under the following conditions:
  * The originating user does not subscribe to the TIP service and the AS removes the P-Assertedâ€‘Identity header fields and the Privacy header field.
NOTE: Responses follow the same route as requests, so the responses will also
be routed via the AS.
# B.2 Terminating IFC for TIR service
The terminating user has subscribed the TIR service, in either permanent or
temporary mode.
NOTE: Responses follow the same route as requests, so the responses will also
be routed via the AS.
###### ## Annex C (informative): Bibliography
  * ETSI ES 183 025: \"Telecommunications and Internet converged Services and Protocols for Advanced Networking (TISPAN); H.248 Non-call related procedures and management system interaction\".
#