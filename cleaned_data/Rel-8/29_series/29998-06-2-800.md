# Foreword
This Technical Report has been produced by the 3^rd^ Generation Partnership
Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# Introduction
**Structure of the OSA API Mapping (3GPP TR 29.998)**
The present document is part 6 of a multi-part deliverable covering the Open
Service Access (OSA); Application Programming Interface (API) Mapping for OSA.
Table: Overview of the OSA APIs & Protocol Mappings 29.198 & 29.998-family
+-------+-------+-------+-------+-------+-------+-------+-------+ | OSA | OSA | | | | | | | | API | API | | | | | | | | spec | Ma | | | | | | | | ifica | pping | | | | | | | | tions | - | | | | | | | | 29. | 29. | | | | | | | | 198-f | 998-f | | | | | | | | amily | amily | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | 29.1 | Ove | 29.9 | Ove | | | | | | 98-01 | rview | 98-01 | rview | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | 29.1 | C | * | _Not | | | | | | 98-02 | ommon | 29.99 | A | | | | | | | Data | 8-02_ | pplic | | | | | | | D | | able _| | | | | | | efini | | | | | | | | | tions | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | 29.1 | Fram | * |_ Not | | | | | | 98-03 | ework | 29.99 | A | | | | | | | | 8-03 _| pplic | | | | | | | | | able_ | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | * | 2 | 2 | 2 | 2 | **2 | 2 | Ge | | *Call | 9.198 | 9.198 | 9.198 | 9.198 | 9.198 | 9.998 | neric | | Co | -04-1 | -04-2 | -04-3 | -04-4 | -04-5 | -04-1 | Call | | ntrol | | | | M | Conf. | | Co | | (CC) | C | Ge | M | ulti- | CC | | ntrol | | SCF** | ommon | neric | ulti- | media | SCF**| | -- | | | CC | CC | Party | CC | | | CAP | | | data | SCF | CC | SCF | | | ma | | | d | | SCF | | | | pping | | | efini | | | | | | | | | tions | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | | | | | | |_29 |_ Ge | | | | | | | | .998- | neric | | | | | | | | 04-2 _| Call | | | | | | | | | Co | | | | | | | | | ntrol | | | | | | | | | -- | | | | | | | | | INAP | | | | | | | | | map | | | | | | | | | ping_ | +-------+-------+-------+-------+-------+-------+-------+-------+ | | | | | | | _29 |_ Ge | | | | | | | | .998- | neric | | | | | | | | 04-3 _| Call | | | | | | | | | Co | | | | | | | | | ntrol | | | | | | | | | -- | | | | | | | | | M | | | | | | | | | egaco | | | | | | | | | map | | | | | | | | | ping_ | +-------+-------+-------+-------+-------+-------+-------+-------+ | | | | | | | 2 | Multi | | | | | | | | 9.998 | party | | | | | | | | -04-4 | Call | | | | | | | | | Co | | | | | | | | | ntrol | | | | | | | | | -- | | | | | | | | | ISC | | | | | | | | | ma | | | | | | | | | pping | +-------+-------+-------+-------+-------+-------+-------+-------+ | 29.1 | User | 2 | User | | | | | | 98-05 | I | 9.998 | I | | | | | | | ntera | -05-1 | ntera | | | | | | | ction | | ction | | | | | | | SCF | | -- | | | | | | | | | CAP | | | | | | | | | ma | | | | | | | | | pping | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | | | _29 |_ User | | | | | | | | .998- | I | | | | | | | | 05-2 _| ntera | | | | | | | | | ction | | | | | | | | | -- | | | | | | | | | INAP | | | | | | | | | map | | | | | | | | | ping_ | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | | | _29 |_ User | | | | | | | | .998- | I | | | | | | | | 05-3 _| ntera | | | | | | | | | ction | | | | | | | | | -- | | | | | | | | | M | | | | | | | | | egaco | | | | | | | | | map | | | | | | | | | ping_ | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | | | 2 | User | | | | | | | | 9.998 | I | | | | | | | | -05-4 | ntera | | | | | | | | | ction | | | | | | | | | -- | | | | | | | | | SMS | | | | | | | | | ma | | | | | | | | | pping | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | 29.1 | Mob | 2 | User | | | | | | 98-06 | ility | 9.998 | S | | | | | | | SCF | -06-1 | tatus | | | | | | | | | and | | | | | | | | | User | | | | | | | | | Loc | | | | | | | | | ation | | | | | | | | | -- | | | | | | | | | MAP | | | | | | | | | ma | | | | | | | | | pping | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | | | **29\. | * | | | | | | | | 998-0 | _User | | | | | | | | 6-2_ _| S | | | | | | | | | tatus | | | | | | | | | and | | | | | | | | | User | | | | | | | | | Loc | | | | | | | | | ation | | | | | | | | | -- | | | | | | | | | SIP | | | | | | | | | mapp | | | | | | | | | ing_ _| | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | 29.1 | Ter | * |_ Not | | | | | | 98-07 | minal | 29.99 | A | | | | | | | Ca | 8-07 _| pplic | | | | | | | pabil | | able_ | | | | | | | ities | | | | | | | | | SCF | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | 29.1 | Data | 29.9 | Data | | | | | | 98-08 | Se | 98-08 | Se | | | | | | | ssion | | ssion | | | | | | | Co | | Co | | | | | | | ntrol | | ntrol | | | | | | | SCF | | -- | | | | | | | | | CAP | | | | | | | | | ma | | | | | | | | | pping | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | * | _Ge | * |_ Not | | | | | | 29.19 | neric | 29.99 | A | | | | | | 8-09 _| Mess | 8-09_ | pplic | | | | | | | aging | | able _| | | | | | | SCF_ | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | * | _Co | * |_ Not | | | | | | 29.19 | nnect | 29.99 | A | | | | | | 8-10 _| ivity | 8-10_ | pplic | | | | | | | Ma | | able _| | | | | | | nager | | | | | | | | | SCF_ | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | 29.1 | Ac | * | _Not | | | | | | 98-11 | count | 29.99 | A | | | | | | | Manag | 8-11_ | pplic | | | | | | | ement | | able _| | | | | | | SCF | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | 29.1 | Cha | * |_ Not | | | | | | 98-12 | rging | 29.99 | A | | | | | | | SCF | 8-12 _| pplic | | | | | | | | | able_ | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | 29.1 | P | * | _Not | | | | | | 98-13 | olicy | 29.99 | A | | | | | | | Manag | 8-13_ | pplic | | | | | | | ement | | able _| | | | | | | SCF | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | 29.1 | Pre | * |_ Not | | | | | | 98-14 | sence | 29.99 | A | | | | | | | & | 8-14 _| pplic | | | | | | | Av | | able_ | | | | | | | ailab | | | | | | | | | ility | | | | | | | | | Manag | | | | | | | | | ement | | | | | | | | | SCF | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | 29.1 | Multi | * | _Not | | | | | | 98-15 | Media | 29.99 | A | | | | | | | Mess | 8-15_ | pplic | | | | | | | aging | | able _| | | | | | | SCF | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | 29.1 | Se | * |_ Not | | | | | | 98-16 | rvice | 29.99 | A | | | | | | | B | 8-16 _| pplic | | | | | | | roker | | able_ | | | | | | | SCF | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+
# 1 Scope
The present document investigates how the OSA Mobility Interface Class methods
defined in 3GPP TS 29.198-6 [5] can be mapped onto IMS ISC Interface (SIP)
operations.\ The mapping of the OSA API to the SIP is considered informative,
and not normative. An overview of the mapping TR is contained in the
introduction of the present document as well as in 3GPP TR 29.998-1 [10].
The OSA specifications define an architecture that enables application
developers to make use of network functionality through an open standardised
interface, i.e. the OSA API\'s. The API specification is contained in the 3GPP
TS 29.198 series of specifications. An overview of these is available in the
introduction of the present document as well as in 3GPP TS 29.198-1 [1]. The
concepts and the functional architecture for the Open Service Access (OSA) are
described by 3GPP TS 23.198 [3]. The requirements for OSA are defined in 3GPP
TS 22.127 [2].
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
  * References are either specific (identified by date of publication, edition number, version number, etc.) or non‑specific.
  * For a specific reference, subsequent revisions do not apply.
  * For a non-specific reference, the latest version applies. In the case of a reference to a 3GPP document (including a GSM document), a non-specific reference implicitly refers to the latest version of that document _in the same Release as the present document_.
[1] 3GPP TS 29.198-1: \"Open Service Access (OSA); Application Programming
Interface (API); Part 1: Overview\".
[2] 3GPP TS 22.127: \"Service Requirement for the Open Services Access (OSA);
Stage 1\".
[3] 3GPP TS 29.198-2: \"Open Service Access (OSA) Application Programming
Interface (API); Part 2: Common data definitions\".
[4] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[5] 3GPP TS 29.198-6: \"Open Service Access (OSA); Application Programming
Interface (API); Part 6: Mobility\".
[6] 3GPP TS 24.229 : \"IP multimedia call control protocol based on Session
Initiation Protocol (SIP) and Session Description Protocol (SDP);\",
[7] 3GPP TS 23.218 : \"IP Multimedia (IM) session handling; IM call model;
Stage 2\"
[8] 3GPP TS 22.101: \"Service Aspects; Service Principles\".
[9] IETF RFC 3261: \"SIP:Session Initiation Protocol\"
[10] 3GPP TR 29.998-1: \"Open Service Access (OSA); Application Programming
Interface (API) Mapping for OSA; Part 1: General Issues on API Mapping\".
# 3 Definitions and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
TS 29.198-1 [1] apply.
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in TS
29.198-1 [1] apply.
# 4 User Status Service SIP Flows
The User Status (US) interface class allows applications to obtain the status
of mobile telephony users.
## 4.1 triggeredStatusReportingStartReq
**_TriggeredStatusReportingStartReq_** is a method that request for triggered
status reports when one or several users\' is registrered/re-registrerd from
the IMS core network. The user status service will only send a report when the
status changes (registred to de-registred and vice-versa).
Figure 4-1: Call Flow for triggeredStatusReportingStartReq
Table 4-1: Normal Operation
+----------------+----------------------------------------------------+ | Pre-conditions | An agreement is established between the network | | | operator\ | | | and the service provider for the status | | | notification to be enabled | +----------------+----------------------------------------------------+ | 1 | The application invokes the | | | **_triggeredStatusReportingStartReq_** method for | | | one or several users | +----------------+----------------------------------------------------+ | 2 | > The SCS requests the controlled SIP server to | | | > observe for 3rd Party SIP REGISTER to be | | | > notified to the application. The SCS reports the | | | > current available status to the application | | | > using **triggeredStatusReport()** (see section § | | | > 4.5 ) | +----------------+----------------------------------------------------+
Table 4-2: Parameter Mapping
+----------------------+----------------------+----------------------+ | From: | To: SIP | Remarks | | triggeredSta | | | | tusReportingStartReq | | | +----------------------+----------------------+----------------------+ | **appStatus** | N/A | | | | | | | (IpAppUserStatusRef) | | | +----------------------+----------------------+----------------------+ | **Users** | See table 6-1 | | | | TpAddress (Set) for | | | (TpAddressSet) | mapping to SIP | | +----------------------+----------------------+----------------------+ | **TpAssignmentID** | N/A | Returns assignmentID | | | | to application, | | | | which specifies the | | | | ID assigned by the | | | | User Status manager | | | | interface for this | | | | newly trigger | | | | notification. | +----------------------+----------------------+----------------------+
## 4.2 triggeredStatusReportingStop
**_triggeredStatusReportingStop_** is a method that is used by the application
to disable triggered user status notifications.
Figure 4-2: Call Flow for triggeredStatusReportingStop
Table 4-3: Normal Operation
* * *
Pre-condition The application has invoked _triggeredStatusReportingReq(_) 1
The application invokes the **_triggeredStatusReportingStop()_** method for
one, several or all users within an assignment (i.e. requested with the
corresponding **_triggeredStatusReportingStartReq()_)** 2 The trigger setting
on the appropriate subscriber status is disabled.
* * *
Table 4-4: Parameter Mapping
+----------------------------+----------------------------+---------+ | From: | To: SIP | Remarks | | tr | | | | iggeredStatusReportingStop | | | +----------------------------+----------------------------+---------+ | stopRequest : | stopScope not mapped to | | | **(TpMob | SIP | | | ilityStopAssignmentData)** | | | | | See table 6-1 TpAddress | | | - **stopScope** | (Set) for mapping to SIP | | | (TpMobilityStopScope) | | | | | TpAssignmentID not mapped | | | - **users** | to SIP | | | (TpAddressSet) | | | | | | | | - **assignmentID** | | | | (TpAssignmentID) | | | +----------------------------+----------------------------+---------+
## 4.3 statusReportReq
**_statusReportReq_** is a method that is used by the application to request a
user status report (registered/unregistred in IMS core network). Note that
this can be requested for multiple users at the same time.
Figure 4-3: Call Flow for statusReportReq
Table 4-5: Normal Operation
* * *
**Pre-conditions**  
1 The application invokes the **statusReportReq()** method 2 The SCS checks
the subscriber status and the current status is returned to the application
via **statusReportRes()**. See section §4.4.
* * *
Table 4-6: Parameter Mapping
+-----------------------+--------------------------------------------------+ | From: statusReportReq | To: SIP | +-----------------------+--------------------------------------------------+ | **appStatus** | N/A | | | | | (IpAppUserStatusRef) | | +-----------------------+--------------------------------------------------+ | **Users** | See table 6-1 TpAddress (Set) for mapping to SIP | | | | | (TpAddressSet) | | +-----------------------+--------------------------------------------------+ | **TpAssignmentID** | N/A | +-----------------------+--------------------------------------------------+
## 4.4 statusReportRes
**_statusReportRes_** delivers a report indicating if a user has been
registred or unregistred. Note that this can be requested for multiple users
at the same time.
Figure 4-4: Call Flow for statusReportRes
Table 4-7: Normal Operation
* * *
Pre-condition The application has invoked a _statusReportReq_
1 The OSA SCS has collected subscriber status based on REGISTER notifications
received/or not received from the network.\ Note that several contact
addresses can be registered for a subscriber Address-of-Record.
2 The current subscriber status is returned to the application using
**statusReportRes()**. A subscriber is reachable if at least one valid SIP or
TEL contact address is registered.
* * *
_Table 4-8: Parameter Mapping_
+----------------------+----------------------+----------------------+ | To: statusReportRes | From: SIP Register | Remarks | +----------------------+----------------------+----------------------+ | Status | | | | | | | | (TpUserStatus) | | | +----------------------+----------------------+----------------------+ | userID (TpAddress) | SIP URL in the TO | | | | header | | | | | | | | See table 6-1 | | | | TpAddress for | | | | mapping to SIP | | +----------------------+----------------------+----------------------+ | statusCode | Not mapped to SIP | | | (TpMobilityError) | | | +----------------------+----------------------+----------------------+ | Status | Not mapped to SIP | A subscriber is | | (Tp | | reachable if at | | UserStatusIndicator) | | least one valid SIP | | | | or TEL contact | | | | address is | | | | registered. | +----------------------+----------------------+----------------------+ | TerminalType | Not mapped to SIP | | | (TpTerminalType) | | | +----------------------+----------------------+----------------------+ | AssignmentID | N/A | | | | | | | (TpAssignmentID) | | | +----------------------+----------------------+----------------------+
## 4.5 triggeredStatusReport
**_triggeredStatusReport_** is a method that is used to notify the application
of the the change of the subscriber(s) status from Registred to Unregistred
and vice-versa.
Figure 4-5: Call Flow for triggeredStatusReport, triggered by SIP REGISTER
Table 4-9: Normal Operation
* * *
Pre-conditions Status repoting has been enabled by
triggerStatusReportingStartReq 1 A third party **_REGISTER_** arrives from IMS
core network. This request is detected by the SIP Server which determines if
an overall status change has occurred for the subscriber 2 If the subscriber
status has changed the OSA SCS identifies the application that requested these
users status changes (from registred to un-registered and vice-versa) and
invokes the **_triggeredStatusReport_** method appropriately.
* * *
Table 4-10: Parameter Mapping
+----------------------+----------------------+----------------------+ | To | From: SIP Register | Remarks | | t | | | | riggeredStatusReport | | | +----------------------+----------------------+----------------------+ | **Status** | | | | | | | | (TpUserStatus) | | | +----------------------+----------------------+----------------------+ | **userID** | SIP URL in the TO | | | (TpAddress) | header | | | | | | | | See table 6-1 | | | | TpAddress for | | | | mapping to SIP | | +----------------------+----------------------+----------------------+ | **statusCode** | Not mapped to SIP | | | (TpMobilityError) | | | +----------------------+----------------------+----------------------+ | **Status** | Not mapped to SIP | Only a change in the | | (Tp | directly. | overall subscriber | | UserStatusIndicator) | | status is reported. | | | | A REGISTER could be | | | | an initial | | | | registration (status | | | | change to | | | | reachable), refresh | | | | an existing contact, | | | | add an additional | | | | contact or remove | | | | one, several or all | | | | contacts (removing | | | | the last contact | | | | would result in a | | | | status change to | | | | unreachable). Also | | | | the registration | | | | timer expiring for | | | | the last remaining | | | | contact would result | | | | in a status change | | | | to unreachable. | +----------------------+----------------------+----------------------+ | TerminalType | Not mapped to SIP | | | (TpTerminalType) | | | +----------------------+----------------------+----------------------+ | AssignmentID | N/A | | | | | | | **(TpAssignmentID)** | | | +----------------------+----------------------+----------------------+
# 5 User Location Service Flows
## 5.1 locationReportReq
## 5.2 locationReportRes
## 5.3 locationReportErr
## 5.4 periodicLocationReportingStartReq
## 5.5 periodicLocationReportingStop
## 5.6 periodicLocationReport
## 5.7 periodicLocationReportErr
## 5.8 triggeredLocationReportingStartReq
## 5.9 triggeredLocationReportingStop
## 5.10 triggeredLocationReport
## 5.11 triggeredLocationReportErr
# 6 Detailed parameter mappings
## 6.1 TpAddress
Table 6-1: TpAddress Table mapping
+----------------------+----------------------+----------------------+ | From: TpAddress | To: SIP | Remark | +----------------------+----------------------+----------------------+ | Plan (TpAddressPlan) | SIP | Specifies the | | | | address plan in | | | | force.\ | | | | Here only all the | | | | address schemes | | | | which are allowed in | | | | SIP are applicable. | +----------------------+----------------------+----------------------+ | AddrString | Any URL schemes | Contains a valid SIP | | (TpString) | allowed by RFC 3261 | address string.\ | | | | \ | | | | A few examples of | | | | SIP URLs:\ | | | | - A user of an | | | | online service:\ | | | | \" | | | | sip:user\@xxx.org\"\ | | | | \"s | | | | ip:alice\@10.1.1.1\" | | | | | | | | - A PSTN phone | | | | number at a gateway | | | | service:\ | | | | \"sip:1 | | | | 212\@gateway.com\",\ | | | | \"sip: | | | | +1-212-555-121 | | | | 2:1234\@gateway.com; | | | | user =phone\" | | | | | | | | An example of tel | | | | URL: | | | | | | | | tel: +1-212-555-1212 | +----------------------+----------------------+----------------------+ | Presentation | N/A | | | (Tp | | | | AddressPresentation) | | | +----------------------+----------------------+----------------------+ | Screening | N/A | | | (TpAddressScreeing) | | | +----------------------+----------------------+----------------------+ | Name (TpString) | N/A | | +----------------------+----------------------+----------------------+ | SubAddressString | N/A | | | (TpString) | | | +----------------------+----------------------+----------------------+ | NOTE: The AddrString | | | | defines the actual | | | | address information | | | | and the structure of | | | | the string depends | | | | on the Plan.\ | | | | Further information | | | | can be found in the | | | | OSA API part | | | | covering common data | | | | definitions (TS | | | | 29.198-2 [3]). | | | +----------------------+----------------------+----------------------+
#