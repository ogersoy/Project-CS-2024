# Foreword
This Technical Report has been produced by the 3^rd^ Generation Partnership
Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# Introduction
**Structure of the OSA API Mapping (3GPP TR 29.998)**
The present document is part 6 of a multi-part deliverable covering the Open
Service Access (OSA); Application Programming Interface (API) Mapping for OSA.
Table: Overview of the OSA APIs & Protocol Mappings 29.198 & 29.998-family
+-------+-------+-------+-------+-------+-------+-------+-------+ | OSA | OSA | | | | | | | | API | API | | | | | | | | spec | Ma | | | | | | | | ifica | pping | | | | | | | | tions | - | | | | | | | | 29. | 29. | | | | | | | | 198-f | 998-f | | | | | | | | amily | amily | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | 29.1 | Ove | 29.9 | Ove | | | | | | 98-01 | rview | 98-01 | rview | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | 29.1 | C | * | _Not | | | | | | 98-02 | ommon | 29.99 | A | | | | | | | Data | 8-02_ | pplic | | | | | | | D | | able _| | | | | | | efini | | | | | | | | | tions | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | 29.1 | Fram | * |_ Not | | | | | | 98-03 | ework | 29.99 | A | | | | | | | | 8-03 _| pplic | | | | | | | | | able_ | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | * | 2 | 2 | 2 | 2 | **2 | 2 | Ge | | *Call | 9.198 | 9.198 | 9.198 | 9.198 | 9.198 | 9.998 | neric | | Co | -04-1 | -04-2 | -04-3 | -04-4 | -04-5 | -04-1 | Call | | ntrol | | | | M | Conf. | | Co | | (CC) | C | Ge | M | ulti- | CC | | ntrol | | SCF** | ommon | neric | ulti- | media | SCF**| | -- | | | CC | CC | Party | CC | | | CAP | | | data | SCF | CC | SCF | | | ma | | | d | | SCF | | | | pping | | | efini | | | | | | | | | tions | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | | | | | | |_29 |_ Ge | | | | | | | | .998- | neric | | | | | | | | 04-2 _| Call | | | | | | | | | Co | | | | | | | | | ntrol | | | | | | | | | -- | | | | | | | | | INAP | | | | | | | | | map | | | | | | | | | ping_ | +-------+-------+-------+-------+-------+-------+-------+-------+ | | | | | | | _29 |_ Ge | | | | | | | | .998- | neric | | | | | | | | 04-3 _| Call | | | | | | | | | Co | | | | | | | | | ntrol | | | | | | | | | -- | | | | | | | | | M | | | | | | | | | egaco | | | | | | | | | map | | | | | | | | | ping_ | +-------+-------+-------+-------+-------+-------+-------+-------+ | | | | | | | 2 | Multi | | | | | | | | 9.998 | party | | | | | | | | -04-4 | Call | | | | | | | | | Co | | | | | | | | | ntrol | | | | | | | | | -- | | | | | | | | | ISC | | | | | | | | | ma | | | | | | | | | pping | +-------+-------+-------+-------+-------+-------+-------+-------+ | 29.1 | User | 2 | User | | | | | | 98-05 | I | 9.998 | I | | | | | | | ntera | -05-1 | ntera | | | | | | | ction | | ction | | | | | | | SCF | | -- | | | | | | | | | CAP | | | | | | | | | ma | | | | | | | | | pping | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | | | _29 |_ User | | | | | | | | .998- | I | | | | | | | | 05-2 _| ntera | | | | | | | | | ction | | | | | | | | | -- | | | | | | | | | INAP | | | | | | | | | map | | | | | | | | | ping_ | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | | | _29 |_ User | | | | | | | | .998- | I | | | | | | | | 05-3 _| ntera | | | | | | | | | ction | | | | | | | | | -- | | | | | | | | | M | | | | | | | | | egaco | | | | | | | | | map | | | | | | | | | ping_ | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | | | 2 | User | | | | | | | | 9.998 | I | | | | | | | | -05-4 | ntera | | | | | | | | | ction | | | | | | | | | -- | | | | | | | | | SMS | | | | | | | | | ma | | | | | | | | | pping | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | 29.1 | Mob | **29\. | * | | | | | | 98-06 | ility | 998-0 | _User | | | | | | | SCF | 6-1_ _| S | | | | | | | | | tatus | | | | | | | | | and | | | | | | | | | User | | | | | | | | | Loc | | | | | | | | | ation | | | | | | | | | -- | | | | | | | | | MAP | | | | | | | | | mapp | | | | | | | | | ing_ _| | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | | | 2 | User | | | | | | | | 9.998 | S | | | | | | | | -06-2 | tatus | | | | | | | | | and | | | | | | | | | User | | | | | | | | | Loc | | | | | | | | | ation | | | | | | | | | -- | | | | | | | | | SIP | | | | | | | | | ma | | | | | | | | | pping | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | 29.1 | Ter | * |_ Not | | | | | | 98-07 | minal | 29.99 | A | | | | | | | Ca | 8-07 _| pplic | | | | | | | pabil | | able_ | | | | | | | ities | | | | | | | | | SCF | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | 29.1 | Data | 29.9 | Data | | | | | | 98-08 | Se | 98-08 | Se | | | | | | | ssion | | ssion | | | | | | | Co | | Co | | | | | | | ntrol | | ntrol | | | | | | | SCF | | -- | | | | | | | | | CAP | | | | | | | | | ma | | | | | | | | | pping | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | * | _Ge | * |_ Not | | | | | | 29.19 | neric | 29.99 | A | | | | | | 8-09 _| Mess | 8-09_ | pplic | | | | | | | aging | | able _| | | | | | | SCF_ | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | * | _Co | * |_ Not | | | | | | 29.19 | nnect | 29.99 | A | | | | | | 8-10 _| ivity | 8-10_ | pplic | | | | | | | Ma | | able _| | | | | | | nager | | | | | | | | | SCF_ | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | 29.1 | Ac | * | _Not | | | | | | 98-11 | count | 29.99 | A | | | | | | | Manag | 8-11_ | pplic | | | | | | | ement | | able _| | | | | | | SCF | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | 29.1 | Cha | * |_ Not | | | | | | 98-12 | rging | 29.99 | A | | | | | | | SCF | 8-12 _| pplic | | | | | | | | | able_ | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | 29.1 | P | * | _Not | | | | | | 98-13 | olicy | 29.99 | A | | | | | | | Manag | 8-13_ | pplic | | | | | | | ement | | able _| | | | | | | SCF | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | 29.1 | Pre | * |_ Not | | | | | | 98-14 | sence | 29.99 | A | | | | | | | & | 8-14 _| pplic | | | | | | | Av | | able_ | | | | | | | ailab | | | | | | | | | ility | | | | | | | | | Manag | | | | | | | | | ement | | | | | | | | | SCF | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | 29.1 | Multi | * | _Not | | | | | | 98-15 | Media | 29.99 | A | | | | | | | Mess | 8-15_ | pplic | | | | | | | aging | | able _| | | | | | | SCF | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | 29.1 | Se | * |_ Not | | | | | | 98-16 | rvice | 29.99 | A | | | | | | | B | 8-16 _| pplic | | | | | | | roker | | able_ | | | | | | | SCF | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+
# 1 Scope
The present document investigates how the OSA Mobility Interface Class methods
defined in 3GPP TS 29.198-6 [5] can be mapped onto CAMEL Application Part
(CAP) operations and Mobile Application Part (MAP) operations.\ The mapping of
the OSA API to the CAP and relevant MAP operations is considered informative,
and not normative. An overview of the mapping TR is contained in the
introduction of the present document as well as in 3GPP TR 29.998-1 [10].
The OSA specifications define an architecture that enables application
developers to make use of network functionality through an open standardised
interface, i.e. the OSA API\'s. The API specification is contained in the 3GPP
TS 29.198 series of specifications. An overview of these is available in the
introduction of the present document as well as in 3GPP TS 29.198-1 [1]. The
concepts and the functional architecture for the Open Service Access (OSA) are
described by 3GPP TS 23.198 [3]. The requirements for OSA are defined in 3GPP
TS 22.127 [2].
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
  * References are either specific (identified by date of publication, edition number, version number, etc.) or nonâ€‘specific.
  * For a specific reference, subsequent revisions do not apply.
  * For a non-specific reference, the latest version applies. In the case of a reference to a 3GPP document (including a GSM document), a non-specific reference implicitly refers to the latest version of that document _in the same Release as the present document_.
[1] 3GPP TS 29.198-1: \"Open Service Access (OSA); Application Programming
Interface (API); Part 1: Overview\".
[2] 3GPP TS 22.127: \"Service Requirement for the Open Services Access (OSA);
Stage 1\".
[3] 3GPP TS 23.198: \"Open Service Access (OSA); Stage 2\".
[4] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[5] 3GPP TS 29.198-6: \"Open Service Access (OSA); Application Programming
Interface (API); Part 6: Mobility\".
[6] 3GPP TS 29.002: \"Mobile Application Part (MAP) specification\".
[7] 3GPP TS 29.078: \"Customised Applications for Mobile network Enhanced
Logic (CAMEL); CAMEL Application Part (CAP) specification\".
[8] 3GPP TS 22.101: \"Service Aspects; Service Principles\".
[9] ITU-T Recommendation Q.850: \"Usage of cause and location in the Digital
Subscriber Signalling System No. 1 and the Signalling System No. 7 ISDN User
Part\".
[10] 3GPP TR 29.998-1: \"Open Service Access (OSA); Application Programming
Interface (API) Mapping for OSA; Part 1: General Issues on API Mapping\".
# 3 Definitions and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
TS 29.198-1 [1] apply.
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in TS
29.198-1 [1] apply.
# 4 User Status Service CAMEL Flows
The User Status (US) interface class allows applications to obtain the status
of mobile telephony users.
## 4.1 triggeredStatusReportingStartReq
**_TriggeredStatusReportingStartReq_** is a method that is used to subscribe
to triggered user status notifications so that events can be sent to the
application.
Figure 4-1: Call Flow for triggeredStatusReportingStartReq
Table 4-1: Normal Operation
* * *
Pre-conditions An agreement is established between the network operator\ and
the service provider for the event notification to be enabled
1 The application invokes the **_triggeredStatusReportingStartReq_** method
2 The gsmSCF sends a MAP **_AnyTimeModification_** to the HLR in order to
activate the CAMEL Subscription Information (M-CSI)\ In case the Status Report
is requested for multiple users, multiple ATM requests are sent to the HLR
* * *
Table 4-2: Parameter Mapping
+----------------------------------+----------------------------------+ | From: | To: MAP AnyTimeModification | | triggeredStatusReportingStartReq | | +----------------------------------+----------------------------------+ | appStatus | | +----------------------------------+----------------------------------+ | users | subscriberIdentity | | | | | | modificationInstruction in | | | modificationRequestFor-CSI has | | | value 'activate', for M-CSI\ | | | (Mobility CAMEL Subscription | | | Information) | +----------------------------------+----------------------------------+ | assignmentID | | +----------------------------------+----------------------------------+ | | gsmSCF-Address | +----------------------------------+----------------------------------+
## 4.2 triggeredStatusReportingStop
**_triggeredStatusReportingStop_** is a method that is used by the application
to disable triggered user status notifications.
Figure 4-2: Call Flow for triggeredStatusReportingStop
Table 4-3: Normal Operation
* * *
Pre-conditions An agreement is established between the network operator\ and
the service provider for the status notification to be disabled
1 The application invokes the **_triggeredStatusReportingStop_** method
2 The gsmSCF sends a MAP **_AnyTimeModificaitonRequest_** to the HLR in order
to de-activate the CAMEL Subscription Information (M-CSI).\ In case stopping
Status Reporting is requested for multiple users, multiple ATM requests are
sent to the HLR.
* * *
Table 4-4: Parameter Mapping
+----------------------------------+----------------------------------+ | From: | To: MAP AnyTimeModification | | triggeredStatusReportingStop | | +----------------------------------+----------------------------------+ | stopRequest\ | subscriberIdentity\ | | assignmentID\ | (either extracted from | | stopScope\ | assignmentID, or\ | | users | mapped from 'users') | | | | | | modificationInstruction in | | | modificationRequestFor-CSI has | | | value 'deactivate', for M-CSI\ | | | (Mobility CAMEL Subscription | | | Information) | +----------------------------------+----------------------------------+ | | gsmSCF-Address | +----------------------------------+----------------------------------+
## 4.3 statusReportReq
**_statusReportReq_** is a method that is used by the application to request a
user status report. Note that this can be requested for multiple users at the
same time.
Figure 4-3: Call Flow for statusReportReq
Table 4-5: Normal Operation
* * *
Pre-conditions
1 The application invokes the **_statusReportReq_** method
2 The gsmSCF sends a MAP **_AnyTimeInterrogateRequest_** to the HLR in order
to request the subscriber status\ In case the Status Report is requested for
multiple users, multiple ATI requests are sent to the HLR.
* * *
Table 4-6: Parameter Mapping
* * *
From: statusReportReq To: MAP AnyTimeInterrogation Invoke id appStatus  
users subscriberIdentity requestedInfo (sequence of optional indicators, of
which only subscriberState is present) gsmSCF-Address assignmentID
* * *
## 4.4 statusReportRes
**_statusReportRes_** is a method that is used by the HLR/SCS towards the
application, in response to an earlier request for a user status report. Note
that this can be requested for multiple users at the same time.
Figure 4-4: Call Flow for statusReportRes
Table 4-7: Normal Operation
* * *
Pre-conditions The application has invoked a _statusReportReq_ method\ and
this request has been forwarded to the HLR
1 The HLR sends a MAP **_AnyTimeInterrogationAck_** to the HLR/SCS in response
to the earlier request.
2 The gsmSCF/SCS respond to the application via **_StatusReportRes_**.\ In
case the Status Report was requested for multiple users, multiple ATI
acknowledgements are collected in the gsmSCF/SCS before a response is sent
back to the Application.
* * *
_Table 4-8: Parameter Mapping_
+---------------------+---------------------------------------+ | To: statusReportRes | From: MAP AnyTimeInterrogationAck | +---------------------+---------------------------------------+ | | Invoke id | +---------------------+---------------------------------------+ | assignmentID | | +---------------------+---------------------------------------+ | status | | +---------------------+---------------------------------------+ | userID | | +---------------------+---------------------------------------+ | statusCode | | +---------------------+---------------------------------------+ | | subscriberInfo | | | | | | (sequence of optional parameters, of\ | | | which only subscriberState present) | +---------------------+---------------------------------------+ | status | subscriberState | +---------------------+---------------------------------------+
## 4.5 triggeredStatusReport
**_triggeredStatusReport_** is a method that is used to notify the application
of the arrival of a requested user status report event.
Figure 4-5: Call Flow for triggeredStatusReport
Table 4-9: Normal Operation
* * *
Pre-conditions The Application has requested triggeredStatusReporting 1 The
VLR sends a MAP **_noteMM-Event_** message to the CSE/SCS 2 The SCS sends a
**_triggeredStatusReport_** to the Application
* * *
Table 4-10: Parameter Mapping
* * *
To triggeredStatusReport From: MAP noteMM-Event status  
userID msisdn statusCode  
status event-Met serviceKey imsi assignmentID
* * *
# 5 User Status Service core-MAP Flows
The User Status (US) interface class allows applications to obtain the status
of mobile telephony users.
## 5.1 statusReportReq
**_statusReportReq_** is a method that is used by the application to request a
user status report. Note that this can be requested for multiple users at the
same time.
Figure 5-1: Call Flow for statusReportReq
Table 5-1: Normal Operation
* * *
Pre-conditions
1 The application invokes the **_statusReportReq_** method
2 The HLR sends a MAP **_ProvideSubscriberInfoRequest_** to the VLR in order
to request the subscriber status\ In case the Status Report is requested for
multiple users, multiple PSI requests are sent to the VLR
* * *
Table 5-2: Parameter Mapping
* * *
From: statusReportReq To: MAP ProvideSubscriberInfo
                          Invoke id
appStatus
users imsi (deduced from information in 'users')
                          requestedInfo\
                          (sequence of optional indicators, of\
                          which only subscriberState is present)
assignmentID
* * *
## 5.2 statusReportRes
**_statusReportRes_** is a method that is used by the HLR/SCS towards the
application, in response to an earlier request for a user status report. Note
that this can be requested for multiple users at the same time.
Figure 5-2: Call Flow for statusReportRes
Table 5-3: Normal Operation
* * *
Pre-conditions The application has invoked a _statusReportReq_ method\ and
this request has been forwarded to the VLR
1 The VLR sends a MAP **_ProvideSubscriberInfoAck_** to the HLR/SCS in
response to the earlier request
2 The HLR/SCS respond to the application via **_StatusReportRes_** \ In case
the Status Report was requested for multiple users, multiple PSI
acknowledgements are collected in the HLR/SCS before a response is sent back
to the Application
* * *
_Table 5-4: Parameter Mapping_
+---------------------+---------------------------------------+ | To: statusReportRes | From: MAP ProvideSubscriberInfoAck | +---------------------+---------------------------------------+ | | Invoke id | +---------------------+---------------------------------------+ | assignmentID | | +---------------------+---------------------------------------+ | status | | +---------------------+---------------------------------------+ | userID | | +---------------------+---------------------------------------+ | statusCode | | +---------------------+---------------------------------------+ | | subscriberInfo | | | | | | (sequence of optional parameters, of\ | | | which only subscriberState present) | +---------------------+---------------------------------------+ | status | subscriberState | +---------------------+---------------------------------------+
# 6 Network User Location Call Flows
The Network User Location (NUL) provides location information, based on
network-related information.
Using the NUL functions, an application programmer can request the VLR number,
the Location Area Identifier, geodetic Location Information and the Cell
Global Identification and other mobile telephony specific location
information, if the network is able to support the corresponding capability.
## 6.1 locationReportReq
**_locationReportReq_** is a method used by the application to request for
mobile-related location information on one or several users. A request of
location information for several users shall mapped to several MAP-operation-
requests.
Figure 6-1: Call Flow for locationReportReq
Table 6-1: Normal Operation
* * *
Pre-conditions An agreement is established between the network operator\ and
the service provider for the _locationReportReq_ to be enabled
1 The application invoked the **_locationReportReq_** method
2 The gsmSCF sends a MAP **_AnyTimeInterrogationReq_** to the HLR
* * *
Table 6-2: Parameter Mapping
+-------------------------+--------------------------------------------+ | From: locationReportReq | To: MAP AnyTimeInterrogationReq | +-------------------------+--------------------------------------------+ | | invokeID | +-------------------------+--------------------------------------------+ | appLocationCamel | | +-------------------------+--------------------------------------------+ | users | subscriberIdentity | +-------------------------+--------------------------------------------+ | | gsmSCF-Address | +-------------------------+--------------------------------------------+ | | requestedInfo | | | | | | (sequence of optional indicators, of\ | | | which only locationInformation is present) | +-------------------------+--------------------------------------------+ | assignmentID | | +-------------------------+--------------------------------------------+
## 6.2 locationReportRes
**_locationReportRes_** is a method that delivers a mobile location report
towards the application. The report contains mobile-related location
information for one or several users. A request of location information for
several users shall mapped to several MAP-operation-requests.
Figure 6-2: Call Flow for locationReportRes
Table 6-3: Normal Operation
* * *
Pre-conditions The Application has previously invoked the _locationReportReq_
method causing\ the gsmSCF to send a MAP a _nyTimeInterrogation_ to the HLR
1 The HLR sends MAP **_anyTimeInterrogationRes_** to the gsmSCF/SCS
2 The SCS responds to the application via a **_locationReportRes_** method
invocation
* * *
Table 6-4: Parameter Mapping
+----------------------------------+----------------------------------+ | From: MAP | To: locationReportRes | | AnyTimeInterrogationAck | | +----------------------------------+----------------------------------+ | invokeId | | +----------------------------------+----------------------------------+ | | assignmentID | +----------------------------------+----------------------------------+ | subscriberInfo | | | | | | (sequence of optional | | | parameters, of\ | | | which only locationInformation | | | is present) | | +----------------------------------+----------------------------------+ | locationInformation | locations | +----------------------------------+----------------------------------+ | | UserID | +----------------------------------+----------------------------------+ | | StatusCode | +----------------------------------+----------------------------------+ | geographicalInformation | GeographicalPosition\ | | | (geodeticInformation is mapped | | geodeticInformation | if present,\ | | | otherwise geographicInformation | | | is used) | +----------------------------------+----------------------------------+ | ageOfLocationInformation | Timestamp (calculated from | | | ageOfLocationInfo) | +----------------------------------+----------------------------------+ | vlr-number | VlrNumber | +----------------------------------+----------------------------------+ | locationNumber | LocationNumber | +----------------------------------+----------------------------------+ | cellGlobalIdorServiceAreaIdOrLai | CellidOrLai | +----------------------------------+----------------------------------+ | extensionContainer | | +----------------------------------+----------------------------------+ | selectedLSA-Id | | +----------------------------------+----------------------------------+ | msc-Number | | +----------------------------------+----------------------------------+ | currentLocationRetrieved | | +----------------------------------+----------------------------------+
## 6.3 locationReportErr
**_locationReportErr_** is a method that indicates that the location report
request has failed.
Figure 6-3: Call Flow for locationReportErr
Table 6-5: Normal Operation
* * *
Pre-conditions The Application has previously invoked the _locationReportReq_
method causing\ the gsmSCF to send a MAP a _nyTimeInterrogation_ to the HLR
1 The HLR responds with a negative acknowledgement
**_anyTimeInterrogationErr_** to the gsmSCF/SCS
2 The SCS responds to the Application via a **_locationReportErr_** method
invocation
* * *
Table 6-6: Parameter Mapping
+-----------------------------------+-----------------------+ | From: MAP anyTimeInterrogationErr | To: locationReportErr | +-----------------------------------+-----------------------+ | | assignmentID | +-----------------------------------+-----------------------+ | SystemFailure | cause | | | | | ATI-NotAllowed | | | | | | DataMissing | | | | | | UnexpectedDataValue | | | | | | UnknownSubscriber | | +-----------------------------------+-----------------------+ | | diagnostic | +-----------------------------------+-----------------------+
## 6.4 periodicLocationReportingStartReq
**_periodicLocationReportingStartReq_** is a method used by the application to
request for periodic mobile location reports on one or several users. A
request of location information for several users shall mapped to several
MAPâ€‘operationâ€‘requests.
Figure 6-4: Call Flow for periodicLocationReportingStartReq
Table 6-7: Normal Operation
* * *
Pre-conditions An agreement is established between the network operator and
the service provider\ for the _periodicLocationReportingStartReq_ to be
enabled
1 The application invoked the **_periodicLocationReportingStartReq_** method
2 The gsmSCF sends a MAP **_AnyTimeInterrogationReq_** to the HLR, and repeats
this according to the requested time interval
* * *
Table 6-8: Parameter Mapping
* * *
From: periodicLocationReportingStartReq To: MAP AnyTimeInterrogationReq
                                            invokeID
appLocation
users subscriberIdentity
                                            gsmSCF-Address
                                            requestedInfo\
                                            (sequence of optional indicators, of\
                                            which only locationInformation is present)
reportingInterval
assignmentID
* * *
## 6.5 periodicLocationReportingStop
**_periodicLocationReportingStop_** is a method used by the application to
stop the sending of periodic mobile location reports for one or several users.
A request of location information for several users shall mapped to several
MAPâ€‘operation-requests.
Figure 6-5: Call Flow for periodicLocationReportingStop
Table 6-9: Normal Operation
* * *
Pre-conditions  
1 The application invoked the **_periodicLocationReportingStop_** method 2 The
gsmSCF stops the periodic sending of MAP **_AnyTimeInterrogationReq_** to the
HLR, for the subscribers as indicated in the stop request (for details of
StopRequest see e.g. with triggeredLocationReportingStop)
* * *
**Parameter Mapping**
None.
## 6.6 periodicLocationReport
**_periodicLocationReport_** is a method that provides periodic delivery of
mobile location reports. The reports are containing mobile-related location
information for one or several users. A request of location information for
several users shall mapped to several MAP-operation-requests.
Figure 6-6: Call Flow for periodicLocationReport
Table 6-10: Normal Operation
* * *
Pre-conditions The Application has previously invoked the
_periodicLocationReportingStartReq_ method causing the gsmSCF to periodically
send MAP a _nyTimeInterrogation_ to the HLR 1 The HLR sends periodically
**_anyTimeInterrogationAck_** to the gsmSCF/SCS 2 The SCS responds to the
Application via **_periodicLocationReport_** method invocation
* * *
Table 6-11: Parameter Mapping
+----------------------------------+----------------------------------+ | From: MAP | To: PeriodicLocationReport | | AnyTimeInterrogationAck | | +----------------------------------+----------------------------------+ | invokeID | assignmentID | +----------------------------------+----------------------------------+ | subscriberInfo\ | | | (sequence of optional | | | parameters, of\ | | | which only is present) | | +----------------------------------+----------------------------------+ | locationInformation | locations | +----------------------------------+----------------------------------+ | | UserID | +----------------------------------+----------------------------------+ | | StatusCode | +----------------------------------+----------------------------------+ | geographicalInformation | GeographicalPosition\ | | | (geodeticInformation is mapped | | geodeticInformation | if present,\ | | | otherwise geographicInformation | | | is used) | +----------------------------------+----------------------------------+ | ageOfLocationInfromation | Timestamp | +----------------------------------+----------------------------------+ | vlr-number | VlrNumber | +----------------------------------+----------------------------------+ | locationNumber | LocationNumber | +----------------------------------+----------------------------------+ | cellGlobalIdorServiceAreaIdOrLai | CellidOrLai | +----------------------------------+----------------------------------+ | extensionContainer | | +----------------------------------+----------------------------------+ | selectedLSA-Id | | +----------------------------------+----------------------------------+ | msc-Number | | +----------------------------------+----------------------------------+ | currentLocationRetrieved | | +----------------------------------+----------------------------------+
## 6.7 periodicLocationReportErr
**_periodicLocationReportErr_** is a method that indicates that the requested
periodic location report has failed. Note that errors only concerning
individual users are reported in the ordinary periodicLocationReport()
message.
Figure 6-7: Call Flow for periodicLocationReportErr
Table 6-12: Normal Operation
* * *
Pre-conditions The Application has previously invoked the
_periodicLocationReportingStartReq_ method causing the gsmSCF to periodically
send MAP a _nyTimeInterrogation_ to the HLR 1 The HLR sends a negative
acknowledgement **_anyTimeInterrogationErr_** to the gsmSCF/SCS 2 The SCS
responds to the Application via **_periodicLocationReportErr_** method
invocation
* * *
Table 6-13: Parameter Mapping
+-----------------------------------+-------------------------------+ | From: MAP anyTimeInterrogationErr | To: periodicLocationReportErr | +-----------------------------------+-------------------------------+ | | assignmentID | +-----------------------------------+-------------------------------+ | SystemFailure | cause | | | | | ATI-NotAllowed | | | | | | DataMissing | | | | | | UnexpectedDataValue | | | | | | UnknownSubscriber | | +-----------------------------------+-------------------------------+ | | diagnostic | +-----------------------------------+-------------------------------+ | | | +-----------------------------------+-------------------------------+
## 6.8 triggeredLocationReportingStartReq
**_triggeredLocationReportingStartReq_** is a method used by the application
to request for user location reports, containing mobile related information,
when the location is changed (the report is triggered by the location change,
e.g. change of VLR number, change of Global Cell Identification or other
location information if available).
Figure 6-8: Call Flow for triggeredLocationReportingStartReq
Table 6-14: Normal Operation
* * *
Pre-conditions **An agreement is established between the network operator and
the service provider\ for the _triggeredLocationReportingStartReq_ to be
disabled**
1 The application invoked the **_triggeredLocationReportingStartReq_** method
2 The gsmSCF sends a MAP **_AnyTimeModificationReq_** to the HLR in order to
activate the CAMEL subscription Information (M-CSI)\ In case the Location
Report is requested for multiple users, multiple ATM requests are sent to the
HLR
* * *
Table 6-15: Parameter Mapping
+----------------------------------+----------------------------------+ | From: | To: MAP AnyTimeModificationReq | | tr | | | iggeredLocationReportingStartReq | | +----------------------------------+----------------------------------+ | appLocation | | +----------------------------------+----------------------------------+ | users | subscriberIdentity | | | | | | modificationInstruction in | | | modificationRequestFor-CSI has | | | value 'activate', for M-CSI\ | | | (Mobility CAMEL Subscription | | | Information) | +----------------------------------+----------------------------------+ | | gsmSCF-Address | +----------------------------------+----------------------------------+ | triggers | | +----------------------------------+----------------------------------+
## 6.9 triggeredLocationReportingStop
**_triggeredLocationReportingStop_** is a method used by the application to
request that triggered mobile location reporting should stop.
Figure 6-9: Call Flow for triggeredLocationReportingStop
Table 6-16: Normal Operation
* * *
Pre-conditions
1 The application has initiated a **_triggeredLocationReportingStop_** method
2 The gsmSCF sends a MAP **_AnyTimeModificationReq_** to the HLR in order to
de-activate the CAMEL subscription Information (M-CSI)\ In case stopping of
triggered location reporting is requested for multiple users, multiple ATM
requests are sent to the HLR
* * *
Table 6-17: Parameter Mapping
+----------------------------------+----------------------------------+ | From: | To: MAP AnyTimeModificationReq | | triggeredLocationReportingStop | | +----------------------------------+----------------------------------+ | stopRequest\ | subscriberIdentity\ | | assignmentID\ | (either extracted from | | stopScope\ | assignmentID,\ | | users | or mapped from 'users') | | | | | | modificationInstruction in | | | ModificationRequestFor-CSI has | | | value 'deactivate', for M-CSI\ | | | (Mobility CAMEL Subscription | | | Information) | +----------------------------------+----------------------------------+ | | gsmSCF-Address | +----------------------------------+----------------------------------+
## 6.10 triggeredLocationReport
**_triggeredLocationReport_** is a method providing the delivery of a report
that is indicating that one or several user\'s mobile location has changed.
Figure 6-10: Call Flow for triggeredLocationReport
Table 6-18: Normal Operation
* * *
Pre-conditions  
1 The application invoked the **_triggeredLocationReportingStartReq_** method
* * *
Table 6-19: Parameter Mapping
+----------------------------------+----------------------------------+ | From: MAP NoteMM-Event | To: triggeredLocationReport | +----------------------------------+----------------------------------+ | | assignmentID | +----------------------------------+----------------------------------+ | serviceKey | | +----------------------------------+----------------------------------+ | imsi | | +----------------------------------+----------------------------------+ | msisdn | | +----------------------------------+----------------------------------+ | locationInformation | location | +----------------------------------+----------------------------------+ | | UserID (from msisdn) | +----------------------------------+----------------------------------+ | | StatusCode | +----------------------------------+----------------------------------+ | geographicalInformation | GeographicalPosition | | | | | geodeticInformation | | +----------------------------------+----------------------------------+ | ageOfLocationInformation | Timestamp (calculated from | | | ageOfLocationInfo) | +----------------------------------+----------------------------------+ | vlr-number | VlrNumber | +----------------------------------+----------------------------------+ | locationNumber | LocationNumber | +----------------------------------+----------------------------------+ | cellGlobalIdorServiceAreaIdOrLai | CellidOrLai | +----------------------------------+----------------------------------+ | extensionContainer | | +----------------------------------+----------------------------------+ | selectedLSA-Id | | +----------------------------------+----------------------------------+ | msc-Number | | +----------------------------------+----------------------------------+ | currentLocationRetrieved | | +----------------------------------+----------------------------------+ | eventMet | criterion | +----------------------------------+----------------------------------+
## 6.11 triggeredLocationReportErr
**_triggeredLocationReportErr_** is a method indicating that a requested
_triggeredLocationReportingStartReq_ has failed.
Figure 6-11: Call Flow for triggeredLocationReportErr
Table 6-20: Normal Operation
* * *
Pre-conditions The Application has previously invoked the
_triggeredLocationReportingStartReq_ method, causing the gsmSCF to send a MAP
_anyTimeModificationReq_ to the HLR 1 The HLR sends a negative response
**_anyTimeModificationErr_** to the gsmSCF/SCS 2 The SCS sends
**_triggeredLocationReportErr_** to the Application
* * *
Table 6-21: Parameter Mapping
+-----------------------------------+--------------------------------+ | From: MAP anyTimeModificationErr | To: triggeredLocationReportErr | +-----------------------------------+--------------------------------+ | | assignmentID | +-----------------------------------+--------------------------------+ | Any Time Modification Not Allowed | cause | | | | | Data Missing | | | | | | Unexpected Data Value | | | | | | Unknown Subscriber | | | | | | Bearer service not provisioned | | | | | | Teleservice not provisioned | | | | | | Call Barred | | | | | | Illegal SS operation | | | | | | SS error status | | | | | | SS incompatibility | | | | | | SS subscription violation | | | | | | Information Not Available | | +-----------------------------------+--------------------------------+ | | diagnostic | +-----------------------------------+--------------------------------+
#