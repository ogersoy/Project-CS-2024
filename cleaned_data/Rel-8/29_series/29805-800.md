# Foreword
This Technical Report has been produced by the 3^rd^ Generation Partnership
Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document is to evaluate the feasibility of introduction of an
InterWorking Function (IWF) between MAP-based and Diameter-based interfaces.
This evaluation will be based on the study of various concrete interworking
deployment scenarios for which an IWF can/could be used. For each scenario, it
will be analysed how the IWF fulfils the specific interworking requirements
and performs the mapping of procedures and the corresponding parameter
handling.
The present document will study the related mechanism for the interworking
scenarios, e.g. addressing. The other mechanism, such as security, will also
be described in this document as a part of the whole solution.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
  * References are either specific (identified by date of publication, > edition number, version number, etc.) or nonâ€‘specific.
  * For a specific reference, subsequent revisions do not apply.
  * For a non-specific reference, the latest version applies. In the > case of a reference to a 3GPP document (including a GSM document), > a non-specific reference implicitly refers to the latest version > of that document _in the same Release as the present document_.
[\] \ \[ ([up to and
including]{yyyy[-mm]\|V\}[onwards])]: \"\\".
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TR 29.803: \"3GPP Evolved Packet System: CT WG4 Aspects (Stage 3)\".
[3] 3GPP TS 23.401: \"GPRS enhancements for E-UTRAN access \".
[4] 3GPP TS 33.401: \"3GPP System Architecture Evolution: Security
Architecture\".
[5] 3GPP TS 29.272: \"Evolved Packet System; MME Related Interfaces Based on
Diameter Protocol\".
[6] 3GPP TS 29.002: \"Mobile Application Part (MAP) specification\".
[7] 3GPP TS 23.060: \"General Packet Radio Service (GPRS); Service
description; Stage 2\".
> [8] 3GPP TS 29.305: \"InterWorking Function (IWF) Between MAP based and
> Diameter based interfaces\".
# 3 Definitions, symbols and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
3GPP TR 21.905 [1] and the following apply. A term defined in the present
document takes precedence over the definition of the same term, if any, in
3GPP TR 21.905 [1].
**Rel8 HSS-MME** : This term is used in this TR to identify the entity that
terminates the S6a interface.
**Rel8 HSS-SGSN** : This term is used in this TR to identify the entity that
terminates the S6d interface.
**Rel8 HLR** : This term is used in this TR to identify the entity that
terminates the Rel8 Gr interface.
**Pre Rel8 HLR** : This term is used in this TR to identify the entity that
terminates the Pre-Rel8 Gr interface.
## 3.2 Symbols
For the purposes of the present document, the following symbols apply:
Symbol format
\ \
## 3.3 Abbreviations
For the purposes of the present document, the abbreviations given in 3GPP TR
21.905 [1] and the following apply. An abbreviation defined in the present
document takes precedence over the definition of the same abbreviation, if
any, in 3GPP TR 21.905 [1].
EPS Evolved Packet System
IWF Interworking Function
MME Mobility Management Entity
TAU Tracking Area Update
# 4A General
## 4A.1 User Data Handling Principles
The HSS/HLR shall download the user data it has (i.e. common user data + S4
SGSN user data + MME user data + Gn/Gp SGSN user data) and allow the peer
entity to choose what it needs. Using this principle, the S6a/S6d/Gr interface
needs to be extended to support the user data used for the other entities
**(Note: that Gr needs to support the user data for the MME/S4-SGSN but the
S6a/S6d does not need to support the user data for Gn/Gp SGSN)**. The
MME/S4-SGSN / Gn/Gp SGSN is therefore, transparent from the HSS/HLR point of
view. It should also be noted, that if this method is used, the possibility
for user data mapping allows a greater efficiency.
**When required to be used, the user data is mapped to the MME/S4-SGSN/Gn/Gp
SGSN. This allows the IWF to be simplified. The S6a/S6d/Gr interface is
required to be extended to enable support of the user data required for the
other entity. This method cannot be used by Pre-Rel8 Gn/Gp SGSN because the
Pre-Rel8 Gr cannot be extended in this case. This will limit the scope of the
IWF scenario 5. The MME and the S4-SGSN already have the MME/Bearer context
mapping function for interworking between EUTRAN and UTRAN/GERAN.**
## 4A.2 Message Routeing Mechanism for IWF
For the same user, the messages shall go to and come back through the same
route with the same IWF(s) in the duration of a MAP dialog.
The routing of the first message from the MME/S4-SGSN to the IWF/HSS is the
same as for a normal Diameter message. If the MME/S4-SGSN knows the
address/name of the IWF/HSS for a certain user, both the Destination-Realm and
Destination-Host AVPs shall be present in the request. Otherwise, only the
Destination-Realm AVP shall be present and the command shall be routed to the
next Diameter node based on the Diameter routing table in the client.
To ensure the correct message routing for the interworking scenarios, the IWFs
in the network shall be able to map the SS7 number and the Diameter identity
of the MME/S4-SGSN 1-to-1. This can be achieved by static or dynamic
configuration.
## 4A.3 Security Consideration for IWF
To support the full EPS-AKA security level for the related IWF scenarios, the
AuC part of the Pre Rel8 HLR in the HPLMN is to be upgraded so that MAP
authentication vector requests from nodes serving E-UTRAN can be identified,
the detailed mechanism is described in 3GPP TS 33.401 [4].
# 4 The Interworking Scenarios
## 4.1 Scenario One: S6a/S6d - Gr interworking scenario with one IWF
This interworking scenario is for S6a/S6d interface based on Diameter and Gr
interface based on MAP with one IWF in the path.
This IWF scenario will apply the following network deployment situation:
\- Users of a Pre Rel8 UMTS/GPRS network access into a visited EPS with only
E-UTRAN. The subscription data for Pre Rel8 UMTS/GPRS is downloaded to MME.
Mapping of the subscription data is done on MME. Additional security solution
is needed in which the Pre Rel8 HLR can not be changed.
\- Users of a Pre Rel8 UMTS/GPRS network access into a visited EPS with
E-UTRAN and UTRAN/GERAN. The subscription data for Pre Rel8 UMTS/GPRS is
downloaded to S4-SGSN. Mapping of the subscription data is done on S4-SGSN.
Security solution is not needed because the security mechanism in visited and
home network is the same.
This IWF scenario can be an inter PLMN use case in which IWF may be located in
the HPLMN or VPLMN. This IWF scenario can be an intra PLMN use case for
operator to do the partly update of their legacy network.
This interworking scenario is described as below:
Figure 4.1-1 S6a/S6d - Gr interworking scenario with one IWF located in home
PLMN
Figure 4.1-2 S6a/S6d - Gr interworking scenario with one IWF located in
visited PLMN
## 4.1A Scenario Two: S13/S13\' - Gf interworking scenario with one IWF
This interworking scenario is for S13/S13\' interface based on Diameter and Gf
interface based on MAP with one IWF in the path.
With this interworking scenario, the ME identity/IMEISV of a user from a Pre
Rel8 UMTS/GPRS network can be checked in a visited EPS. This scenario can only
be used within the operator's network. This interworking scenario is described
as below:
{width="5.875in" height="1.625in"}
Figure 4.1A-1 S13/S13\' - Gf interworking scenario with one IWF
## 4.2 Scenario Three: S6a/S6d - Rel8 Gr interworking scenario with one IWF
This interworking scenario is for S6a/S6d interface based on Diameter and Rel8
Gr interface based on MAP with one IWF in the path.
This IWF scenario will apply the following network deployment situation:
\- Users of a Rel8 UMTS/GPRS network access into a visited EPS with only
E-UTRAN. The subscription data for Rel8 UMTS/GPRS is downloaded to MME.
Mapping of the subscription data is done on MME. Additional security solution
is needed in which the Pre Rel8 HLR can be changed.
\- Users of a Pre Rel8 UMTS/GPRS/E-UTRAN network access into a visited EPS
with only E-UTRAN. The subscription data for Pre Rel8 UMTS/GPRS and the
subscription data for MME is downloaded to MME. MME picks up the subscription
data for MME and discards the subscription data for Pre Rel8 UMTS/GPRS.
\- Users of a Rel8 UMTS/GPRS network access into a visited EPS with E-UTRAN
and UTRAN/GERAN. The subscription data for Rel8 UMTS/GPRS is downloaded to
S4-SGSN or MME. Mapping of the subscription data is done on S4-SGSN or MME.
Security solution is not needed because the security mechanism in visited and
home network is the same.
\- Users of a Pre Rel8 UMTS/GPRS/E-UTRAN network access into a visited EPS
with E-UTRAN and UTRAN/GERAN. The subscription data for Rel8 UMTS/GPRS is
downloaded to S4-SGSN or MME. Mapping of the subscription data is done on
S4-SGSN or MME. Security solution is not needed because the security mechanism
in visited and home network is the same.
This IWF scenario can be an inter PLMN use case in which IWF may be located in
the HPLMN or VPLMN. This IWF scenario can be an intra PLMN use case for
operator to do the partly update of their legacy network.
This interworking scenario is described as below:
Figure 4.2-1 S6a/S6d - Rel8 Gr interworking scenario with one IWF located in
home PLMN
Figure 4.2-2 S6a/S6d - Rel8 Gr interworking scenario with one IWF located in
visited PLMN
## 4.3 Scenario Four: S6a/S6d - S6a/S6d interworking scenario with two IWFs
This interworking scenario is for S6a/S6d interface based on Diameter, S6a/S6d
interface based on Diameter and SS7/MAP based roaming agreement with two IWFs
in the path.
This IWF scenario will apply the following network deployment situation:
\- Users of a Pre Rel8 UMTS/GPRS/EPS for UTRAN/GERAN and E-UTRAN network
access into a visited EPS with only E-UTRAN. The subscription data for Pre
Rel8 UMTS/GPRS, subscription data for S4-SGSN and the subscription data for
MME is downloaded to MME. MME picks up the subscription data for MME and
discards the subscription data for Pre Rel8 UMTS/GPRS and the subscription
data for S4-SGSN.
\- Users of a Pre Rel8 UMTS/GPRS/EPS for UTRAN/GERAN and E-UTRAN network
access into a visited EPS with E-UTRAN and UTRAN/GERAN. The subscription data
for Pre Rel8 UMTS/GPRS, subscription data for S4-SGSN and the subscription
data for MME is downloaded to S4-SGSN. S4-SGSN picks up the subscription data
for S4-SGSN and discards the subscription data for Pre Rel8 UMTS/GPRS and the
subscription data for MME.
\- Users of an EPS for UTRAN/GERAN and E-UTRAN network access into a visited
EPS with only E-UTRAN. The subscription data for S4-SGSN and the subscription
data for MME is downloaded to MME. MME picks up the subscription data for MME
and discards the subscription data for the subscription data for S4-SGSN.
\- Users of an EPS for UTRAN/GERAN and E-UTRAN network access into a visited
EPS with E-UTRAN and UTRAN/GERAN. The subscription data for S4-SGSN and the
subscription data for MME is downloaded to S4-SGSN. S4-SGSN picks up the
subscription data for S4-SGSN and discards the subscription data for MME.
\- Users of a Pre Rel8 UMTS/GPRS/EPS for E-UTRAN only network access into a
visited EPS with only E-UTRAN. The subscription data for Pre Rel8 UMTS/GPRS
and the subscription data for MME is downloaded to MME. MME picks up the
subscription data for MME and discards the subscription data for Pre Rel8
UMTS/GPRS.
Note: This IWF scenario can not be used for interworking between two EPS
network with only E-UTRAN in which there in no MAP based roaming agreement to
be reused.
With this interworking scenario, two EPS operators can reuse the SS7 based
roaming agreement.
**This IWF scenario can only be an inter PLMN use case in which the two IWFs
are in the VPLMN and HPLMN separately.**
This interworking scenario is described as below:
Figure 4.3-1 S6a/S6d - S6a/S6d interworking scenario with two IWFs
## 4.3A Scenario Five: Gr/Rel8 Gr - S6a/S6d interworking scenario with one IWF
This interworking scenario is for Gr/Rel8 Gr interface based on MAP and S6a
interface based on Diameter with one IWF in the path.
Editor's note: It is FFS whether this scenario is valid.
This IWF scenario will apply the following network deployment situation:
\- Users of an EPS for E-UTRAN only network access into a visited Pre Rel8
UMTS/GPRS. The subscription data for Pre Rel8 UMTS/GPRS is configured in the
home network just for these roaming users and only this subscription data for
Pre Rel8 UMTS/GPRS is downloaded to SGSN. Mapping of the subscription data is
done on SGSN.
\- Users of an EPS for E-UTRAN only network access into a visited Rel8
UMTS/GPRS. The subscription data for Rel8 UMTS/GPRS is configured in the home
network just for these roaming users and only this subscription data for Rel8
UMTS/GPRS is downloaded to SGSN. Mapping of the subscription data is done on
SGSN.
\- Users of an EPS for E-UTRAN and UTRAN/GERAN network access into a visited
Pre Rel8 UMTS/GPRS. The subscription data for Pre Rel8 UMTS/GPRS is configured
in the home network just for these roaming users and only this subscription
data for Pre Rel8 UMTS/GPRS is downloaded to SGSN. Mapping of the subscription
data is done on SGSN.
\- Users of an EPS for E-UTRAN and UTRAN/GERAN network access into a visited
Rel8 UMTS/GPRS. The subscription data for Rel8 UMTS/GPRS is configured in the
home network just for these roaming users and only this subscription data for
Rel8 UMTS/GPRS is downloaded to SGSN. Mapping of the subscription data is done
on SGSN.
This IWF scenario can be an inter PLMN use case in which IWF should in the
HPLMN so the MAP based roaming agreement can be reused. This IWF scenario can
be an intra PLMN use case for operator to do the partly update of their legacy
network.
This interworking scenario is described as below:
Figure 4.3A-1 Gr/Rel Gr - S6a interworking scenario with one IWF
## 4.4 Zh based BSF -- Zh\' based HSS interworking scenario with one IWF
This network interworking scenario is for BSF using Diameter based Zh
interface and HSS using MAP based Zh\' interface with one IWF in the path. The
BSF optionally implements the Zh\' already. Hence, when analysing this
scenario, it is important to consider backward impacts. Whether the IWF
analysed in this chapter is functionally the same as other IWF's analysed in
this TR will be determined during the analysis. The case may be that the IWF
analysed in this scenario results in considering the IWF as an internal
function of the BSF and thus does not need to be exposed.
This interworking scenario is described as below:
{width="5.610416666666667in" height="2.863888888888889in"}
Figure 4.4-1 Zh based BSF -- Zh\' based HSS interworking scenario with one IWF
## 4.5 Wx based AAA Server - D\'/Gr\' based HSS/HLR interworking scenario with
one IWF
This network interworking scenario is for AAA Server using Diameter based Wx
interface and HSS/HLR using MAP based D\'/Gr\' interface with one IWF in the
path. The 3GPP AAA server optionally implements the D\'/Gr\' already. Hence,
when analysing this scenario, it is important to consider backward impacts.
Whether the IWF analysed in this chapter is functionally the same as other
IWF's analysed in this TR will be determined during the analysis. The case may
be that the IWF analysed in this scenario results in considering the IWF as an
internal function of the 3GPP AAA server and thus does not need to be exposed.
This interworking scenario is described as below:
{width="5.610416666666667in" height="2.863888888888889in"}
Figure 4.5-1 Wx based AAA Server - D\'/Gr\' based HSS/HLR interworking
scenario with one IWF
# 5 The Mapping of the Procedures
## 5.1 The Procedure Mapping for Scenario One
### 5.1.1 Update location and Insert Subscriber Data Procedure
This section describes registration procedure based on the scenario described
in section 4.1. In this procedure, the MME/S4-SGSN is registered in the Pre
Rel8 HLR and the subscriber data is sent to the MME/S4-SGSN. This procedure is
part of the E-UTRAN Initial Attach procedure or UTRAN/GERAN Initail Attach
procedure with S4-SGSN or Tracking Area Update procedure or Routing Area
Update procedure with S4-SGSN, which are detailed described in 3GPP TS 23.401
[3] and 3GPP TS 23.060 [7].
{width="5.9875in" height="4.081944444444445in"}
**Figure 5.1.1-1:** Update location and Insert Subscriber Data Procedure via
one IWF between MME/S4-SGSN and Pre **Rel8 HLR**
1\. The MME/S4-SGSN sends a Diameter-ULR (containing the MME/S4-SGSN Identity,
IMSI, ME Identity, List of MME/S4-SGSN Supported Features) message to the IWF.
2\. The IWF maps this Diameter-ULR message to a MAP-UpdateGprsLocation message
(see section 6.2 for more details). Then the IWF sends this MAP-
UpdateGprsLocation (containing the SGSN Identity, IMSI, IMEISV) message to Pre
Rel8 HLR.
3\. The corresponding Pre Rel8 HLR behaviour is the same as described in Pre
Rel8 version of 3GPP TS 29.002 [6]. The Pre Rel8 HLR then sends a MAP-
InsertSubscriberData (containing the IMSI, GPRS User Data) message to the IWF.
Sending of MAP InsertSubscriberData may be skipped by the HLR if a \"skip
subscriber data\" indication was received in the MAP UpdateGprsLocation
message. This message might be segmented if the complete GPRS User Data can
not be sent in one MAP message. Segmentation is not shown in figure 5.1.1-1.
Note that segmentation of MAP InsertSubscriberData messages may be done in
acknowledge mode or in burts mode.
4\. The IWF memorizes the received User Data. The IWF sends a MAP-
InsertSubscriberData Ack message to the Pre Rel8 HLR as the response to each
related request message.
5\. The corresponding Pre Rel8 HLR behaviour is the same as described in Pre
Rel8 version of 3GPP TS 29.002 [6]. After receiving all of the MAP-
InsertSubscriberData Ack messages, the Pre Rel8 HLR structures and then sends
a MAP-UpdateGprsLocation Ack message to the IWF.
6\. After receiving the MAP-UpdateGprsLocation Ack messages, the IWF
structures the Complete GPRS User Data based on the memorized information. The
IWF structures (see section 6.6 for more details) and then sends a Diameter-
ULA (Complete GPRS User Data) message to the MME/S4-SGSN. The MME/S4-SGSN
needs to do the user data mapping function to get the EPS user data. The
corresponding MME/S4-SGSN behaviour is the same as described in 3GPP TS 29.272
[5].
### 5.1.2 Insert Subscriber Data procedure
This section describes Insert Subscriber Data procedure based on scenario
described in section 4.1. This procedure is to add or modify the subscriber
Data in the MME/S4-SGSN, which is detailed described in 3GPP TS 23.401 [3] and
3GPP TS 23.060 [7].
{width="5.55in" height="4.373611111111111in"}
Figure 5.1.2-1: Insert Subscriber Data procedure interworking via one IWF
between MME/S4-SGSN and Pre Rel8 HLR
1\. The Pre Rel8 HLR sends a MAP-InsertSubscriberData (IMSI, GPRS User Data)
message to the IWF.
2\. The IWF maps this MAP- InsertSubscriberData message to a Diameter-IDR
message (see section 6.8 for more details). Then the IWF sends this Diameter-
IDR (containing the IMSI, GPRS user Data) message to the MME/S4-SGSN. The
MME/S4-SGSN needs to do the user data mapping function to get the EPS user
data.
3\. The corresponding MME/S4-SGSN behaviour is the same as described in 3GPP
TS 29.272 [5]. The MME/S4-SGSN then sends a Diameter-IDA message to the IWF.
4\. The IWF maps this Diameter-IDA message to a MAP- InsertSubscriberData Ack
message (see section 6.9 for more details). Then the IWF sends this MAP-
InsertSubscriberData Ack message to the Pre Rel8 HLR.
5-8. If the User Data can not be sent in one MAP message, the steps 1-4 may be
repeated based on the segmentation of the MAP message. Note that segmentation
of MAP InsertSubscriberData messages may be done in acknowledge mode or in
burts mode.
9\. After receiving all of the MAP-InsertSubscriberData Ack messages, the Pre
Rel8 HLR sends a TC-END message to the IWF. The corresponding Pre Rel8 HLR
behaviour is the same as described in Pre Rel8 version of 3GPP TS 29.002 [6].
### 5.1.3 Delete Subscriber Data procedure
This section describes Delete Subscriber Data procedure based on scenario
described in section 4.1. This procedure is to delete the subscriber Data in
the MME/S4-SGSN, which is detailed described in 3GPP TS 23.401 [3] and 3GPP TS
23.060 [7].
{width="5.55in" height="2.8847222222222224in"}
Figure 5.1.3-1: Delete Subscriber Data procedure interworking via one IWF
between MME/S4-SGSN and Pre Rel8 HLR
1\. The Pre Rel8 HLR sends a MAP- DeleteSubscriberData (containing the IMSI,
GPRS User Data) message to the IWF.
2\. The IWF maps this MAP- DeleteSubscriberData message to a Diameter-DSR
message (see section 6.12 for more details). Then the IWF sends this Diameter-
DSR (IMSI, GPRS User Data) message to the MME/S4-SGSN. The MME/S4-SGSN needs
to do the user data mapping function to get the EPS user data.
3\. The corresponding MME/S4-SGSN behaviour is the same as described in 3GPP
TS 29.272 [5]. The MME/S4-SGSN then sends a Diameter-DSA message to the IWF.
4\. The IWF maps this Diameter-DSA message to a MAP- DeleteSubscriberData Ack
message (see section 6.13 for more details). Then the IWF sends this MAP-
DeleteSubscriberData Ack message to the Pre Rel8 HLR. The corresponding Pre
Rel8 HLR behaviour is the same as described in Pre Rel8 version of 3GPP TS
29.002 [6].
### 5.1.4 Purge procedure
This section describes Purge procedure based on scenario described in section
4.1. This procedure is to inform the Pre Rel8 HLR that the subscriber Data and
the MM context is deleted in the MME/S4-SGSN, which is detailed described in
3GPP TS 23.401 [3] and 3GPP TS 23.060 [7].
{width="5.175in" height="3.261111111111111in"}
Figure 5.1.4-1: Purge procedure interworking via one IWF between MME/S4-SGSN
and Pre Rel8 HLR
1\. The MME/S4-SGSN sends a Diameter-PUR (containing the IMSI) message to the
IWF.
2\. The IWF maps this Diameter-PUR message to a MAP- PurgeMS message (see
section 6.15 for more details). Then the IWF sends this MAP-PurgeMS (IMSI)
message to the Pre Rel8 HLR.
3\. The corresponding Pre Rel8 HLR behaviour is the same as described in Pre
Rel8 version of 3GPP TS 29.002 [6]. The Pre Rel8 HLR then sends a MAP- PurgeMS
Ack message to the IWF.
4\. The IWF maps this MAP- PurgeMS Ack message to a Diameter-PUA message (see
section 6.18 for more details). Then the IWF sends this Diameter-PUA message
to the MME/S4-SGSN. The corresponding MME/S4-SGSN behaviour is the same as
described in 3GPP TS 29.272 [5].
### 5.1.5 Authentication procedure
**This section describes Authentication procedure based on scenario described
in section 4.1. This procedure is to authenticate an UE, which is detailed
described in 3GPP TS 33.401 [4].**
{width="6.002083333333333in" height="2.9375in"}
Figure 5.1.5-1: Authentication procedure interworking via one IWF between
MME/S4-SGSN and Pre Rel8 HLR
1\. The MME/S4-SGSN sends a Diameter-AIR (containing the IMSI, SN identity,
Requesting Node Type) message to the IWF.
2\. The IWF maps this Diameter-AIR message to a MAP- SendAuthenticationInfo
message (see section 6.19 for more details). Then the IWF sends this MAP-
SendAuthenticationInfo (IMSI) message to the Pre Rel8 HLR.
3\. The corresponding Pre Rel8 HLR behaviour is the same as described in Pre
Rel8 version of 3GPP TS 29.002 [6]. The Pre Rel8 HLR then sends a MAP-
SendAuthenticationInfo Ack message to the IWF.
4\. The IWF maps this MAP- SendAuthenticationInfo Ack message to a Diameter-
AIA message (see section 6.21 for more details). Then the IWF sends this
Diameter-AIA message (MME/S4-SGSN Security context(s)) to the MME/S4-SGSN. The
corresponding MME/S4-SGSN behaviour is the same as described in 3GPP TS 29.272
[5].
### 5.1.6 Cancel Location procedure
**This section describes Cancel Location procedure based on scenario described
in section 4.1. In this procedure, the MME/S4-SGSN is deregistered in the**
Pre **R** el**8 HLR and the MM context and the Bearer Context are deleted in
the MME/S4-SGSN. This procedure is a part of E-UTRAN Initial Attach procedure
or Tracking Area Update procedure or** Pre **R** el**8 HLR-initiated Detach
procedure, which are detailed described in 3GPP TS 23.401 [3] and 3GPP TS
23.060 [7].**
{width="5.301388888888889in" height="3.376388888888889in"}
Figure 5.1.6-1: Cancel Location procedure interworking via one IWF between
MME/S4-SGSN and Pre Rel8 HLR
1\. The Pre Rel8 HLR sends a MAP- CancelLocation (containing the IMSI,
Cancellation Type) message to the IWF.
2\. The IWF maps this MAP- CancelLocation message to a Diameter-CLR message
(see section 6.24 for more details). Then the IWF sends this Diameter-CLR
(containing the IMSI, Cancellation Type) message to the MME/S4-SGSN.
3\. The corresponding MME/S4-SGSN behaviour is the same as described in 3GPP
TS 29.272 [5]. The MME/S4-SGSN then sends a Diameter-CLA message to the IWF.
4\. The IWF maps this Diameter-CLA message to a MAP- CancelLocation Ack
message (see section 6.25 for more details). Then the IWF sends this MAP-
CancelLocation Ack message to the Pre Rel8 HLR. The corresponding Pre Rel8 HLR
behaviour is the same as described in Pre Rel8 version of 3GPP TS 29.002 [6].
### 5.1.7 Reset procedure
**This section describes Reset procedure based on scenario described in
section 4.1. This procedure is to inform the MME/S4-SGSN the resetting of
the** Pre **R** el**8 HLR, which is detailed described in 3GPP TS 29.272 [5]
and** Pre Rel8 version of **3GPP TS 29.002 [6].**
{width="5.175in" height="3.376388888888889in"}
Figure 5.1.7-1: Reset procedure interworking via one IWF between MME/S4-SGSN
and Pre Rel8 HLR
1\. The Pre Rel8 HLR sends a MAP- Reset (containing the Pre Rel8 HLR ID)
message to the IWF.
2\. The IWF maps this MAP- Reset message to a Diameter-RSR message (see
section 6.28 for more details). Then the IWF sends this Diameter-RSR (Pre Rel8
HLR ID) message to the MME/S4-SGSN.
3\. The corresponding MME/S4-SGSN behaviour is the same as described in 3GPP
TS 29.272 [5]. The MME/S4-SGSN then sends a Diameter-RSA message to the IWF.
### 5.1.8 Notification procedure
**This section describes Notification procedure based on scenario described in
section 4.2. This procedure is to inform the** Pre **R** el**8 HLR the change
of the ME Identity or the assignment of the PDN GW, which is detailed
described in 3GPP TS 29.272 [5].**
{width="5.301388888888889in" height="3.379861111111111in"}
Figure 5.1.8-1: Notification procedure interworking via one IWF between
MME/S4-SGSN and Pre Rel8 HLR
1\. The MME/S4-SGSN sends a Diameter-NOR (containing the IMSI, ME Identity,
PDN GW Identity, APN) message to the IWF.
2\. The IWF maps this Diameter-NOR message to a MAP- UpdateGprsLocation
message (see section 6.29 for more details). Then the IWF sends this MAP-
UpdateGprsLocation (IMSI) message to the Pre Rel8 HLR.
3\. The corresponding Pre Rel8 HLR behaviour is the same as described in Pre
Rel8 version of 3GPP TS 29.002 [6]. The Pre Rel8 HLR then sends a MAP-
UpdateGprsLocation Ack message to the IWF.
4\. The IWF maps this MAP- UpdateGprsLocation Ack message to a Diameter-NOA
message (see section 6.31 for more details). Then the IWF sends this Diameter-
NOA message to the MME/S4-SGSN. The corresponding MME/S4-SGSN behaviour is the
same as described in 3GPP TS 29.272 [5].
## 5.1A The Procedure Mapping for Scenario Two
### 5.1A.1 ME Identity Check Procedure
**This section describes ME identity check procedure based on the scenario
described in section 4.1A. In this procedure, the ME identity can be checked
between MME/S4-SGSN and Pre Rel8 EIR, which is detailed described in 3GPP TS
23.401 [3] and 3GPP TS 23.060 [7].**
{width="6.46875in" height="2.754861111111111in"}
**Figure 5.1A.1-1: ME Identity Check** via one IWF between MME/S4-SGSN and Pre
**Rel8 EIR**
1\. The MME/S4-SGSN sends a Diameter-ECR (containing IMSI, ME Identity)
message to the IWF.
2\. The IWF maps this Diameter-ECR message to a MAP-CheckImei message (see
section 6.33 for more details). Then the IWF sends this MAP-CheckImei
(containing IMSI, IMEISV) message to Pre Rel8 EIR.
3\. The corresponding Pre Rel8 EIR behaviour is the same as described in 3GPP
TS 29.002 [6]. The Pre Rel8 EIR then sends a MAP-CheckImei Ack message to the
IWF.
4\. The IWF maps this MAP-CheckImei Ack message to a Diameter-ECA message (see
section 6.34 for more details). Then the IWF sends this Diameter-ECA message
to the MME/S4-SGSN. The corresponding MME/S4-SGSN behaviour is the same as
described in 3GPP TS 29.272 [5].
## 5.2 The Procedure Mapping for Scenario Three
### 5.2.1 Update location and Insert Subscriber Data Procedure
**This section describes registration procedure based on the scenario
described in section 4.2. In this procedure, the MME/S4-SGSN is registered in
the Rel8 HLR and the subscriber data is sent to the MME/S4-SGSN. This
procedure is part of the E-UTRAN Initial Attach procedure or UTRAN/GERAN
Initail Attach procedure with S4-SGSN or Tracking Area Update procedure or
Routing Area Update procedure with S4-SGSN, which are detailed described in
3GPP TS 23.401 [3] and 3GPP TS 23.060 [7].**
{width="5.9944444444444445in" height="4.084722222222222in"}
**Figure 5.2.1-1:** Update location and Insert Subscriber Data Procedure via
one IWF between MME/S4-SGSN and **Rel8 HLR**
1\. The MME/S4-SGSN sends a Diameter-ULR (containing the MME/S4-SGSN Identity,
IMSI, ME Identity, List of MME/S4-SGSN Supported Features) message to the IWF.
2\. The IWF maps this Diameter-ULR message to a MAP-UpdateGprsLocation message
(see section 6.2 for more details). Then the IWF sends this MAP-
UpdateGprsLocation (containing the SGSN Identity, IMSI, IMEISV) message to
Rel8 HLR.
3\. The corresponding Rel8 HLR behaviour is the same as described in 3GPP TS
29.002 [6]. The Rel8 HLR then sends a MAP-InsertSubscriberData (containing the
IMSI, User Data) message to the IWF. Sending of MAP InsertSubscriberData may
be skipped by the HLR if a \"skip subscriber data\" indication was received in
the MAP UpdateGprsLocation message. This message might be segmented if the
complete GPRS User Data can not be sent in one MAP message. Segmentation is
not shown in figure 5.2.1-1. Note that segmentation of MAP
InsertSubscriberData messages may be done in acknowledge mode or in burts
mode.
4\. The IWF memorizes the received User Data. The IWF sends a MAP-
InsertSubscriberData Ack message to the Rel8 HLR as the response to each
related request message.
5\. The corresponding Rel8 HLR behaviour is the same as described in 3GPP TS
29.002 [6]. After receiving all of the MAP-InsertSubscriberData Ack messages,
the Rel8 HLR structures and then sends a MAP-UpdateGprsLocation Ack message to
the IWF.
6\. After receiving the MAP-UpdateGprsLocation Ack messages, the IWF
structures the Complete User Data based on the memorized information. The IWF
structures (see section 6.6 for more details) and then sends a Diameter-ULA
(Complete User Data) message to the MME/S4-SGSN. The MME/S4-SGSN may need to
do the user data mapping function to get the EPS user data if it is not
received. The corresponding MME/S4-SGSN behaviour is the same as described in
3GPP TS 29.272 [5].
### 5.2.2 Insert Subscriber Data procedure
**This section describes Insert Subscriber Data procedure based on scenario
described in section 4.2. This procedure is to add or modify the subscriber
Data in the MME/S4-SGSN, which is detailed described in 3GPP TS 23.401 [3] and
3GPP TS 23.060 [7].**
{width="5.55in" height="4.373611111111111in"}
Figure 5.2.2-1: Insert Subscriber Data procedure interworking via one IWF
between MME/S4-SGSN and Rel8 HLR
1\. The Rel8 HLR sends a MAP-InsertSubscriberData (IMSI, User Data) message to
the IWF.
2\. The IWF maps this MAP- InsertSubscriberData message to a Diameter-IDR
message (see section 6.8 for more details). Then the IWF sends this Diameter-
IDR (containing the IMSI, user Data) message to the MME/S4-SGSN. The
MME/S4-SGSN may need to do the user data mapping function to get the EPS user
data if it is not received.
3\. The corresponding MME/S4-SGSN behaviour is the same as described in 3GPP
TS 29.272 [5]. The MME/S4-SGSN then sends a Diameter-IDA message to the IWF.
4\. The IWF maps this Diameter-IDA message to a MAP- InsertSubscriberData Ack
message (see section 6.9 for more details). Then the IWF sends this MAP-
InsertSubscriberData Ack message to the Rel8 HLR.
5-8. If the User Data can not be sent in one MAP message, the steps 1-4 may be
repeated based on the segmentation of the MAP message. Note that segmentation
of MAP InsertSubscriberData messages may be done in acknowledge mode or in
burts mode.
9\. After receiving all of the MAP-InsertSubscriberData Ack messages, the Rel8
HLR sends a TC-END message to the IWF. The corresponding Rel8 HLR behaviour is
the same as described in 3GPP TS 29.002 [6].
### 5.2.3 Delete Subscriber Data procedure
This section describes Delete Subscriber Data procedure based on scenario
described in section 4.2. This procedure is to delete the subscriber Data in
the MME/S4-SGSN, which is detailed described in 3GPP TS 23.401 [3] and 3GPP TS
23.060 [7].
{width="5.55in" height="2.8847222222222224in"}
Figure 5.2.3-1: Delete Subscriber Data procedure interworking via one IWF
between MME/S4-SGSN and Rel8 HLR
1\. The Rel8 HLR sends a MAP- DeleteSubscriberData (containing the IMSI, User
Data) message to the IWF.
2\. The IWF maps this MAP- DeleteSubscriberData message to a Diameter-DSR
message (see section 6.12 for more details). Then the IWF sends this Diameter-
DSR (IMSI, User Data) message to the MME/S4-SGSN. The MME/S4-SGSN may need to
do the user data mapping function to get the EPS user data if it is not
received.
3\. The corresponding MME/S4-SGSN behaviour is the same as described in 3GPP
TS 29.272 [5]. The MME/S4-SGSN then sends a Diameter-DSA message to the IWF.
4\. The IWF maps this Diameter-DSA message to a MAP- DeleteSubscriberData Ack
message (see section 6.13 for more details). Then the IWF sends this MAP-
DeleteSubscriberData Ack message to the Rel8 HLR. The corresponding Rel8 HLR
behaviour is the same as described in 3GPP TS 29.002 [6].
### 5.2.4 Purge procedure
This section describes Purge procedure based on scenario described in section
4.2. This procedure is to inform the Rel8 HLR that the subscriber Data and the
MM context is deleted in the MME/S4-SGSN, which is detailed described in 3GPP
TS 23.401 [3] and 3GPP TS 23.060 [7].
{width="5.175in" height="3.2583333333333333in"}
Figure 5.2.4-1: Purge procedure interworking via one IWF between MME/S4-SGSN
and Rel8 HLR
1\. The MME/S4-SGSN sends a Diameter-PUR (containing the IMSI) message to the
IWF.
2\. The IWF maps this Diameter-PUR message to a MAP- PurgeMS message (see
section 6.15 for more details). Then the IWF sends this MAP-PurgeMS (IMSI)
message to the Rel8 HLR.
3\. The corresponding Rel8 HLR behaviour is the same as described in 3GPP TS
29.002 [6]. The Rel8 HLR then sends a MAP- PurgeMS Ack message to the IWF.
4\. The IWF maps this MAP- PurgeMS Ack message to a Diameter-PUA message (see
section 6.18 for more details). Then the IWF sends this Diameter-PUA message
to the MME/S4-SGSN. The corresponding MME/S4-SGSN behaviour is the same as
described in 3GPP TS 29.272 [5].
### 5.2.5 Authentication procedure
This section describes Authentication procedure based on scenario described in
section 4.2. This procedure is to authenticate an UE, which is detailed
described in 3GPP TS 33.401 [4].
{width="6.002083333333333in" height="2.9375in"}
Figure 5.2.5-1: Authentication procedure interworking via one IWF between
MME/S4-SGSN and Rel8 HLR
1\. The MME/S4-SGSN sends a Diameter-AIR (containing the IMSI, SN identity,
Requesting Node Type) message to the IWF.
2\. The IWF maps this Diameter-AIR message to a MAP- SendAuthenticationInfo
message (see section 6.19 for more details). Then the IWF sends this MAP-
SendAuthenticationInfo (IMSI) message to the Rel8 HLR.
3\. The corresponding Rel8 HLR behaviour is the same as described in 3GPP TS
29.002 [6]. The Rel8 HLR then sends a MAP- SendAuthenticationInfo Ack message
to the IWF.
4\. The IWF maps this MAP- SendAuthenticationInfo Ack message to a Diameter-
AIA message (see section 6.21 for more details). Then the IWF sends this
Diameter-AIA message (MME/S4-SGSN Security context(s)) to the MME/S4-SGSN. The
corresponding MME/S4-SGSN behaviour is the same as described in 3GPP TS 29.272
[5].
### 5.2.6 Cancel Location procedure
This section describes Cancel Location procedure based on scenario described
in section 4.2. In this procedure, the MME/S4-SGSN is deregistered in the Rel8
HLR and the MM context and the Bearer Context are deleted in the MME/S4-SGSN.
This procedure is a part of E-UTRAN Initial Attach procedure or Tracking Area
Update procedure or Rel8 HLR-initiated Detach procedure, which are detailed
described in 3GPP TS 23.401 [3] and 3GPP TS 23.060 [7].
{width="5.301388888888889in" height="3.376388888888889in"}
Figure 5.2.6-1: Cancel Location procedure interworking via one IWF between
MME/S4-SGSN and Rel8 HLR
1\. The Rel8 HLR sends a MAP- CancelLocation (containing the IMSI,
Cancellation Type) message to the IWF.
2\. The IWF maps this MAP- CancelLocation message to a Diameter-CLR message
(see section 6.24 for more details). Then the IWF sends this Diameter-CLR
(containing the IMSI, Cancellation Type) message to the MME/S4-SGSN.
3\. The corresponding MME/S4-SGSN behaviour is the same as described in 3GPP
TS 29.272 [5]. The MME/S4-SGSN then sends a Diameter-CLA message to the IWF.
4\. The IWF maps this Diameter-CLA message to a MAP- CancelLocation Ack
message (see section 6.25 for more details). Then the IWF sends this MAP-
CancelLocation Ack message to the Rel8 HLR. The corresponding Rel8 HLR
behaviour is the same as described in 3GPP TS 29.272 [5].
### 5.2.7 Reset procedure
This section describes Reset procedure based on scenario described in section
4.2. This procedure is to inform the MME/S4-SGSN the resetting of the Rel8
HLR, which is detailed described in 3GPP TS 29.272 [5] and 3GPP TS 29.002 [6].
{width="5.175in" height="3.376388888888889in"}
Figure 5.2.7-1: Reset procedure interworking via one IWF between MME/S4-SGSN
and Rel8 HLR
1\. The Rel8 HLR sends a MAP- Reset (containing the Rel8 HLR ID) message to
the IWF.
2\. The IWF maps this MAP- Reset message to a Diameter-RSR message (see
section 6.28 for more details). Then the IWF sends this Diameter-RSR (Rel8 HLR
ID) message to the MME/S4-SGSN.
3\. The corresponding MME/S4-SGSN behaviour is the same as described in 3GPP
TS 29.272 [5]. The MME/S4-SGSN then sends a Diameter-RSA message to the IWF.
### 5.2.8 Notification procedure
**This section describes Notification procedure based on scenario described in
section 4.2. This procedure is to inform the R** el**8 HLR the change of the
ME Identity or the assignment of the PDN GW, which is detailed described in
3GPP TS 29.272 [5].**
{width="5.301388888888889in" height="3.376388888888889in"}
Figure 5.2.8-1: Notification procedure interworking via one IWF between
MME/S4-SGSN and Rel8 HLR
1\. The MME/S4-SGSN sends a Diameter-NOR (containing the IMSI, ME Identity,
PDN GW Identity, APN) message to the IWF.
2\. The IWF maps this Diameter-NOR message to a MAP- UpdateGprsLocation
message (see section 6.29 for more details). Then the IWF sends this MAP-
UpdateGprsLocation (IMSI) message to the Rel8 HLR.
3\. The corresponding Rel8 HLR behaviour is the same as described in 3GPP TS
29.002 [6]. The Rel8 HLR then sends a MAP- UpdateGprsLocation Ack message to
the IWF.
4\. The IWF maps this MAP- UpdateGprsLocation Ack message to a Diameter-NOA
message (see section 6.31 for more details). Then the IWF sends this Diameter-
NOA message to the MME/S4-SGSN. The corresponding MME/S4-SGSN behaviour is the
same as described in 3GPP TS 29.272 [5].
## 5.3 The Procedure Mapping for Scenario Four
### 5.3.1 Update location and Insert Subscriber Data Procedure
**This section describes registration procedure based on the scenario
described in section 4.3. In this procedure, the MME/S4-SGSN is registered in
the Rel8 HSS-MME/ Rel8 HSS-SGSN and the subscriber data is sent to the
MME/S4-SGSN. This procedure is part of the E-UTRAN Initial Attach procedure or
or UTRAN/GERAN Initail Attach procedure with S4-SGSN or Tracking Area Update
procedure or Routing Area Update procedure with S4-SGSN, which are detailed
described in 3GPP TS 23.401 [3] and 3GPP TS 23.060 [7].**
{width="6.002777777777778in" height="3.560416666666667in"}
**Figure 5.3.1-1:** Update location and Insert Subscriber Data Procedure via
two IWFs between MME/S4-SGSN and **Rel8 HSS-MME/ Rel8 HSS-SGSN**
1\. The MME/S4-SGSN sends a Diameter-ULR (containing the MME/S4-SGSN Identity,
IMSI, ME Identity, List of MME/S4-SGSN Supported Features) message to the
IWF-1.
2\. The IWF-1 maps this Diameter-ULR message to a MAP-UpdateGprsLocation
message (see section 6.2 for more details). Then the IWF-1 sends this MAP-
UpdateGprsLocation (containing the MME/S4-SGSN Identity, IMSI, ME Identity,
List of MME/S4-SGSN Supported Features) message to IWF-2.
3\. The IWF-2 maps this MAP-UpdateGprsLocation message to a Diameter-ULR
message (see section 6.3 for more details). Then the IWF-2 sends this
Diameter-ULR (containing the MME/S4-SGSN Identity, IMSI, ME Identity, List of
MME/S4-SGSN Supported Features) message to the Rel8 HSS-MME/Rel8 HSS-SGSN.
4\. The corresponding Rel8 HSS-MME/Rel8 HSS-SGSN behaviour is the same as
described in 3GPP TS 29.272 [5]. The Rel8 HSS-MME/Rel8 HSS-SGSN then sends a
Diameter-ULA (Complete User Data) message to the IWF-2.
5\. Based on the received complete User Data, the IWF-2 structures (see
section 6.4 for more details) and sends a MAP-InsertSubscriberData (containing
the IMSI, User Data) message to the IWF-1. Sending of MAP InsertSubscriberData
may be skipped by the HLR if a \"skip subscriber data\" indication was
received in the MAP UpdateGprsLocation message. This message might be
segmented if the complete GPRS User Data can not be sent in one MAP message.
Segmentation is not shown in figure 5.3.1-1. Note that segmentation of MAP
InsertSubscriberData messages may be done in acknowledge mode or in burts
mode.
6\. The IWF-1 memorizes the received User Data. The IWF-1 sends a MAP-
InsertSubscriberData Ack message to the IWF-2 as the response to each related
request message.
7\. After receiving all of the MAP-InsertSubscriberData Ack messages, the
IWF-2 structures (see section 6.5 for more details) and then sends a MAP-
UpdateGprsLocation Ack message to the IWF-1.
8\. After receiving the MAP-UpdateGprsLocation Ack messages, the IWF-1
structures the Complete User Data based on the memorized information. The
IWF-1 structures (see section 6.6 for more details) and then sends a Diameter-
ULA (Complete User Data) message to the MME/S4-SGSN. The corresponding
MME/S4-SGSN behaviour is the same as described in 3GPP TS 29.272 [5].
### 5.3.2 Insert Subscriber Data procedure
**This section describes Insert Subscriber Data procedure based on scenario
described in section 4.3. This procedure is to add or modify the subscriber
Data in the MME/S4-SGSN, which is detailed described in 3GPP TS 23.401 [3] and
3GPP TS 23.060 [7].**
{width="6.002083333333333in" height="4.040972222222222in"}
Figure 5.3.2-1: Insert Subscriber Data procedure interworking via two IWFs
between MME/S4-SGSN and Rel8 HSS-MME/Rel8 HSS-SGSN
1\. The Rel8 HSS-MME/Rel8 HSS-SGSN sends a Diameter-IDR (containing the IMSI,
User Data) message to the IWF-2. The Rel8 HSS-MME/Rel8 HSS-SGSN shall take
into account the MME/S4-SGSN's supported features as reported in previous ULR
when constructing the User Data.
2\. The IWF-2 maps this Diameter-IDR message to a MAP- InsertSubscriberData
message (see section 6.7 for more details). Then the IWF-2 sends this MAP-
InsertSubscriberData (IMSI, User Data) message to the IWF-1.
3\. The IWF-1 maps this MAP- InsertSubscriberData message to a Diameter-IDR
message (see section 6.8 for more details). Then the IWF-1 sends this
Diameter-IDR (containing the IMSI, User Data) message to the MME/S4-SGSN.
4\. The corresponding MME/S4-SGSN behaviour is the same as described in 3GPP
TS 29.272 [5]. The MME/S4-SGSN then sends a Diameter-IDA message to the IWF-1.
5\. The IWF-1 maps this Diameter-IDA message to a MAP- InsertSubscriberData
Ack message (see section 6.9 for more details). Then the IWF-1 sends this MAP-
InsertSubscriberData Ack message to the IWF-2.
6-9. If the EPS User Data received in step 1 can not be sent in one MAP
message, the steps 2-5 may be repeated based on the segmentation of the MAP
message. Note that segmentation of MAP InsertSubscriberData messages may be
done in acknowledge mode or in burts mode.
10\. After receiving all of the MAP-InsertSubscriberData Ack messages, the
IWF-2 sends a TC-END message to the IWF-1.
11\. After receiving all of the MAP-InsertSubscriberData Ack messages, the
IWF-2 maps the last MAP- InsertSubscriberData Ack message to a Diameter-IDA
message (see section 6.10 for more details). Then the IWF-2 sends this
Diameter-IDA message to the Rel8 HSS-MME/Rel8 HSS-SGSN. The corresponding Rel8
HSS-MME/Rel8 HSS-SGSN behaviour is the same as described in 3GPP TS 29.272
[5].
### 5.3.3 Delete Subscriber Data procedure
**This section describes Delete Subscriber Data procedure based on scenario
described in section 4.3. This procedure is to delete the subscriber Data in
the MME/S4-SGSN, which is detailed described in 3GPP TS 23.401 [3] and 3GPP TS
23.060 [7].**
{width="6.002083333333333in" height="2.6972222222222224in"}
Figure 5.3.3-1: Delete Subscriber Data procedure interworking via two IWFs
between MME/S4-SGSN and Rel8 HSS-MME/Rel8 HSS-SGSN
1\. The Rel8 HSS-MME/Rel8 HSS-SGSN sends a Diameter-DSR (containing the IMSI,
User Data) message to the IWF-2.
2\. The IWF-2 maps this Diameter-DSR message to a MAP- DeleteSubscriberData
message (see section 6.11 for more details). Then the IWF-2 sends this MAP-
DeleteSubscriberData (containing the IMSI, User Data) message to the IWF-1.
3\. The IWF-1 maps this MAP- DeleteSubscriberData message to a Diameter-DSR
message (see section 6.12 for more details). Then the IWF-1 sends this
Diameter-DSR (IMSI, User Data) message to the MME/S4-SGSN.
4\. The corresponding MME/S4-SGSN behaviour is the same as described in 3GPP
TS 29.272 [5]. The MME/S4-SGSN then sends a Diameter-DSA message to the IWF-1.
5\. The IWF-1 maps this Diameter-DSA message to a MAP- DeleteSubscriberData
Ack message (see section 6.13 for more details). Then the IWF-1 sends this
MAP- DeleteSubscriberData Ack message to the IWF-2.
6\. The IWF-2 maps this MAP- DeleteSubscriberData Ack message to a Diameter-
DSA message (see section 6.14 for more details). Then the IWF-2 sends this
Diameter-DSA message to the Rel8 HSS-MME/Rel8 HSS-SGSN. The corresponding Rel8
HSS-MME/Rel8 HSS-SGSN behaviour is the same as described in 3GPP TS 29.272
[5].
### 5.3.4 Purge procedure
**This section describes Purge procedure based on scenario described in
section 4.3. This procedure is to inform the R** el**8 HSS-MME/R** el**8 HSS-
SGSN that the subscriber Data and the MM context is deleted in the
MME/S4-SGSN, which is detailed described in 3GPP TS 23.401 [3] and 3GPP TS
23.060 [7].**
{width="6.002083333333333in" height="3.03125in"}
Figure 5.3.4-1: Purge procedure interworking via two IWFs between MME/S4-SGSN
and Rel8 HSS-MME/Rel8 HSS-SGSN
1\. The MME/S4-SGSN sends a Diameter-PUR (containing the IMSI) message to the
IWF-1.
2\. The IWF-1 maps this Diameter-PUR message to a MAP- PurgeMS message (see
section 6.15 for more details). Then the IWF-1 sends this MAP-PurgeMS (IMSI)
message to the IWF-2.
3\. The IWF-2 maps this MAP- PurgeMS message to a Diameter-PUR message (see
section 6.16 for more details). Then the IWF-2 sends this Diameter-PUR (IMSI)
message to the Rel8 HSS-MME/Rel8 HSS-SGSN.
4\. The corresponding Rel8 HSS-MME/Rel8 HSS-SGSN behaviour is the same as
described in 3GPP TS 29.272 [5]. The Rel8 HSS-MME/Rel8 HSS-SGSN then sends a
Diameter-PUA message to the IWF-2.
5\. The IWF-2 maps this Diameter-PUA message to a MAP- PurgeMS Ack message
(see section 6.17 for more details). Then the IWF-2 sends this MAP-PurgeMS Ack
message to the IWF-1.
6\. The IWF-1 maps this MAP- PurgeMS Ack message to a Diameter-PUA message
(see section 6.18 for more details). Then the IWF-1 sends this Diameter-PUA
message to the MME/S4-SGSN. The corresponding MME/S4-SGSN behaviour is the
same as described in 3GPP TS 29.272 [5].
### 5.3.5 Authentication procedure
**This section describes Authentication procedure based on scenario described
in section 4.3. This procedure is to authenticate an UE, which is detailed
described in 3GPP TS 33.401 [4].**
{width="6.002083333333333in" height="2.9375in"}
Figure 5.3.5-1: Authentication procedure interworking via two IWFs between
MME/S4-SGSN and Rel8 HSS-MME/Rel8 HSS-SGSN
1\. The MME/S4-SGSN sends a Diameter-AIR (containing the IMSI, SN identity,
Requesting Node Type) message to the IWF-1.
2\. The IWF-1 maps this Diameter-AIR message to a MAP- SendAuthenticationInfo
message (see section 6.19 for more details). Then the IWF-1 sends this MAP-
SendAuthenticationInfo (IMSI, SN identity, Requesting Node Type) message to
the IWF-2.
3\. The IWF-2 maps this MAP- SendAuthenticationInfo message to a Diameter-AIR
message (see section 6.20 for more details). Then the IWF-2 sends this
Diameter-AIR (containing the IMSI, SN identity, Requesting Node Type) message
to the Rel8 HSS-MME/Rel8 HSS-SGSN.
4\. The corresponding Rel8 HSS-MME/Rel8 HSS-SGSN behaviour is the same as
described in 3GPP TS 29.272 [5]. The Rel8 HSS-MME/Rel8 HSS-SGSN then sends a
Diameter-AIA (MME/S4-SGSN Security context(s)) message to the IWF-2.
5\. The IWF-2 maps this Diameter-AIA message to a MAP- SendAuthenticationInfo
Ack message (see section 6.21 for more details). Then the IWF-2 sends this
MAP- SendAuthenticationInfo Ack (MME/S4-SGSN Security context(s)) message to
the IWF-1.
6\. The IWF-1 maps this MAP- SendAuthenticationInfo Ack message to a Diameter-
AIA message (see section 6.22 for more details). Then the IWF-1 sends this
Diameter-AIA message (MME/S4-SGSN Security context(s)) to the MME/S4-SGSN. The
corresponding MME/S4-SGSN behaviour is the same as described in 3GPP TS 29.272
[5].
### 5.3.6 Cancel Location procedure
**This section describes Cancel Location procedure based on scenario described
in section 4.3. In this procedure, the MME/S4-SGSN is deregistered in the R**
el**8 HSS-MME/R** el**8 HSS-SGSN and the MM context and the Bearer Context are
deleted in the MME/S4-SGSN. This procedure is a part of E-UTRAN Initial Attach
procedure or Tracking Area Update procedure or R** el**8 HSS-MME/R** el**8
HSS-SGSN-initiated Detach procedure, which are detailed described in 3GPP TS
23.401 [3] and 3GPP TS 23.060 [7].**
{width="6.002083333333333in" height="3.029861111111111in"}
Figure 5.3.6-1: Cancel Location procedure interworking via two IWFs between
MME/S4-SGSN and Rel8 HSS-MME/Rel8 HSS-SGSN
1\. The Rel8 HSS-MME/Rel8 HSS-SGSN sends a Diameter-CLR (containing the IMSI,
Cancellation Type) message to the IWF-2.
2\. The IWF-2 maps this Diameter-CLR message to a MAP- CancelLocation message
(see section 6.23 for more details). Then the IWF-2 sends this MAP-
CancelLocation (IMSI, Cancellation Type) message to the IWF-1.
3\. The IWF-1 maps this MAP- CancelLocation message to a Diameter-CLR message
(see section 6.24 for more details). Then the IWF-1 sends this Diameter-CLR
(containing the IMSI, Cancellation Type) message to the MME/S4-SGSN.
4\. The corresponding MME/S4-SGSN behaviour is the same as described in 3GPP
TS 29.272 [5]. The MME/S4-SGSN then sends a Diameter-CLA message to the IWF-1.
5\. The IWF-1 maps this Diameter-CLA message to a MAP- CancelLocation Ack
message (see section 6.25 for more details). Then the IWF-1 sends this MAP-
CancelLocation Ack message to the IWF-2.
6\. The IWF-2 maps this MAP- CancelLocation Ack message to a Diameter-CLA
message (see section 6.26 for more details). Then the IWF-2 sends this
Diameter-CLA message to the Rel8 HSS-MME/Rel8 HSS-SGSN. The corresponding Rel8
HSS-MME/Rel8 HSS-SGSN behaviour is the same as described in 3GPP TS 29.272
[5].
### 5.3.7 Reset procedure
**This section describes Reset procedure based on scenario described in
section 4.3. This procedure is to inform the MME/S4-SGSN the resetting of the
R** el**8 HSS-MME/R** el**8 HSS-SGSN, which is detailed described in 3GPP TS
29.272 [5].**
{width="6.002083333333333in" height="3.029861111111111in"}
Figure 5.3.7-1: Reset procedure interworking via two IWFs between MME/S4-SGSN
and Rel8 HSS-MME/Rel8 HSS-SGSN
1\. The Rel8 HSS-MME/Rel8 HSS-SGSN sends a Diameter-RSR (containing the Rel8
HSS-MME/Rel8 HSS-SGSN ID) message to the IWF-2.
2\. The IWF-2 sends Diameter-RSA message to Rel8 HSS-MME/Rel8 HSS-SGSN. The
corresponding Rel8 HSS-MME/Rel8 HSS-SGSN behaviour is the same as described in
3GPP TS 29.272 [5].
3\. The IWF-2 maps this Diameter-RSR message to a MAP- Reset message (see
section 6.27 for more details). Then the IWF-2 sends this MAP- Reset
(containing the Rel8 HSS-MME/Rel8 HSS-SGSN ID) message to the IWF-1.
4\. The IWF-1 maps this MAP- Reset message to a Diameter-RSR message (see
section 6.28 for more details). Then the IWF-1 sends this Diameter-RSR (Rel8
HSS-MME/Rel8 HSS-SGSN ID) message to the MME/S4-SGSN.
5\. The corresponding MME/S4-SGSN behaviour is the same as described in 3GPP
TS 29.272 [5]. The MME/S4-SGSN then sends a Diameter-RSA message to the IWF-1.
### 5.3.8 Notification procedure
**This section describes Notification procedure based on scenario described in
section 4.3. This procedure is to inform the R** el**8 HSS-MME/R** el**8 HSS-
SGSN the change of the ME Identity or the assignment of the PDN GW, which is
detailed described in 3GPP TS 29.272 [5].**
{width="6.002083333333333in" height="3.03125in"}
Figure 5.3.8-1: Notification procedure interworking via two IWFs between
MME/S4-SGSN and Rel8 HSS-MME/Rel8 HSS-SGSN
1\. The MME/S4-SGSN sends a Diameter-NOR (containing the IMSI, ME Identity,
PDN GW Identity, APN) message to the IWF-1.
2\. The IWF-1 maps this Diameter-NOR message to a MAP- UpdateGprsLocation
message (see section 6.29 for more details). Then the IWF-1 sends this MAP-
UpdateGprsLocation (IMSI, ME Identity, PDN GW Identity, APN) message to the
IWF-2.
3\. The IWF-2 maps this MAP- UpdateGprsLocation message to a Diameter-NOR
message (see section 6.30 for more details). Then the IWF-2 sends this
Diameter-NOR (containing the IMSI, ME Identity, PDN GW Identity, APN) message
to the Rel8 HSS-MME/Rel8 HSS-SGSN.
4\. The corresponding Rel8 HSS-MME/Rel8 HSS-SGSN behaviour is the same as
described in 3GPP TS 29.272 [5]. The Rel8 HSS-MME/Rel8 HSS-SGSN then sends a
Diameter-NOA message to the IWF-2.
5\. The IWF-2 maps this Diameter-NOA message to a MAP- UpdateGprsLocation Ack
message (see section 6.31 for more details). Then the IWF-2 sends this MAP-
UpdateGprsLocation Ack message to the IWF-1.
6\. The IWF-1 maps this MAP- UpdateGprsLocation Ack message to a Diameter-NOA
message (see section 6.32 for more details). Then the IWF-1 sends this
Diameter-NOA message to the MME/S4-SGSN. The corresponding MME/S4-SGSN
behaviour is the same as described in 3GPP TS 29.272 [5].
## 5.4 The Procedure Mapping for Scenario Five
\
# 6 The Mapping of the Parameters
## 6.1 General
This section is to describe the parameter mapping for each message based on
the stage 3 parameters defined in 3GPP TS 29.272 [5] and 3GPP TS 29.002 [6].
The description below is based on per message mapping. In each section, the
detailed behavior of IWF and the new requirement for Rel Gr are also
described.
The symbol \"N/A\" in source message column of the tables bolow means that
there is no corresponding parameter in the source message to map into the
mentioned parameter in the target message. For this case, this parameter in
the target message shall be either absent or structured locally by the IWF.
The symbol \"N/A\" in target message column of the tables bolow means that
some parameter carried in the source message is not needed to be mapped into
the target message. For this case, this parameter in the source message shall
be either ignored or saved locaolly in the IWF.
## 6.2 Diameter-ULR Mapping to MAP-UpdateGprsLocation
### 6.2.1 Mapping for Scenario One
#### 6.2.1.1 AVP Mapping
The AVP mapping from Diameter-ULR to MAP-UpdateGprsLocation for scenario one
is listed as table below:
Table 6.2.1.1-1: AVP Mapping from Diameter-ULR to MAP-UpdateGprsLocation for
scenario one
+----------------------+----------------------+----------------------+ | MAP parameter | S6a/S6d Diameter AVP | Comments | | | within source ULR | | | within target | | | | UpdateGPRSLocation | | | +----------------------+----------------------+----------------------+ | Invoke Id | N/A | IWF shall allocate | | | | an Invoke Id value | | | | locally and record a | | | | mapping entity | | | | between this Invoke | | | | Id value and the | | | | Session Id value | | | | received from the | | | | Diameter message. | +----------------------+----------------------+----------------------+ | IMSI | User-Name | | +----------------------+----------------------+----------------------+ | SGSN number | N/A | See section 4A.2 for | | | | detail. | +----------------------+----------------------+----------------------+ | SGSN address | MME Address/S4-SGSN | See section 4A.2 for | | | address | detail. | +----------------------+----------------------+----------------------+ | Supported CAMEL | N/A | IWF shall set this | | Phases | | parameter that no | | | | CAMEL phase is | | | | supported. | +----------------------+----------------------+----------------------+ | SoLSA Support | N/A | This parameter shall | | Indicator | | be absent. | +----------------------+----------------------+----------------------+ | Super-Charger | N/A | This parameter shall | | Supported in Serving | | be absent. | | Network Entity | | | +----------------------+----------------------+----------------------+ | GPRS enhancements | N/A | IWF shall set this | | support indicator | | parameter. | +----------------------+----------------------+----------------------+ | Supported LCS | N/A | This parameter shall | | Capability Sets | | be absent. | +----------------------+----------------------+----------------------+ | Offered CAMEL 4 CSIs | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | Inform Previous | FFS | | | Network Entity | | | +----------------------+----------------------+----------------------+ | PS LCS Not Supported | N/A | This parameter shall | | by UE | | be absent. | +----------------------+----------------------+----------------------+ | V-GMLC Address | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | Call barring support | N/A | This parameter shall | | indicator | | be absent. | +----------------------+----------------------+----------------------+ | IMEISV | Terminal-Information | | +----------------------+----------------------+----------------------+ | Skip Subscriber Data | FFS | | | Update | | | +----------------------+----------------------+----------------------+ | Supported RAT Types | Supported-RAT-Type | | | Indicator | | | +----------------------+----------------------+----------------------+ | N/A | Supported-Features | The IWF shall store | | | | supported features | | | | for later use when | | | | InsertSubscriberData | | | | Ack messages are to | | | | be sent to HLR. | +----------------------+----------------------+----------------------+ | N/A | ULR Flags | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | Visited-PLMN-Id | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+
#### 6.2.1.2 Detailed IWF Behaviour
#### 6.2.1.3 New Requirements for Pre Rel8 Gr
A new code point For E-UTRAN is needed to be defined for MAP-supportedRAT-
TypeIndicator.
### 6.2.2 Mapping for Scenario Three
#### 6.2.2.1 AVP Mapping
The AVP mapping from Diameter-ULR to MAP-UpdateGprsLocation for scenario three
is listed as table below:
Table 6.2.2.1-1: AVP Mapping from Diameter-ULR to MAP-UpdateGprsLocation for
scenario three
+----------------------+----------------------+----------------------+ | MAP parameter | S6a/S6d Diameter AVP | Comments | | | within source ULR | | | within target | | | | UpdateGPRSLocation | | | +----------------------+----------------------+----------------------+ | Invoke Id | N/A | IWF shall allocate | | | | an Invoke Id value | | | | locally and record a | | | | mapping entity | | | | between this Invoke | | | | Id value and the | | | | Session Id value | | | | received from the | | | | Diameter message. | +----------------------+----------------------+----------------------+ | IMSI | User-Name | | +----------------------+----------------------+----------------------+ | SGSN number | N/A | See section 4A.2 for | | | | detail. | +----------------------+----------------------+----------------------+ | SGSN address | MME Address/S4-SGSN | See section 4A.2 for | | | address | detail. | +----------------------+----------------------+----------------------+ | Supported CAMEL | N/A | IWF shall set this | | Phases | | parameter that no | | | | CAMEL phase is | | | | supported. | +----------------------+----------------------+----------------------+ | SoLSA Support | N/A | This parameter shall | | Indicator | | be absent. | +----------------------+----------------------+----------------------+ | Super-Charger | N/A | This parameter shall | | Supported in Serving | | be absent. | | Network Entity | | | +----------------------+----------------------+----------------------+ | GPRS enhancements | N/A | IWF shall set this | | support indicator | | parameter. | +----------------------+----------------------+----------------------+ | Supported LCS | N/A | This parameter shall | | Capability Sets | | be absent. | +----------------------+----------------------+----------------------+ | Offered CAMEL 4 CSIs | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | Inform Previous | FFS | | | Network Entity | | | +----------------------+----------------------+----------------------+ | PS LCS Not Supported | N/A | This parameter shall | | by UE | | be absent. | +----------------------+----------------------+----------------------+ | V-GMLC Address | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | Call barring support | N/A | This parameter shall | | indicator | | be absent. | +----------------------+----------------------+----------------------+ | IMEISV | Terminal-Information | | +----------------------+----------------------+----------------------+ | Skip Subscriber Data | FFS | | | Update | | | +----------------------+----------------------+----------------------+ | Supported RAT Types | Supported-RAT-Type | | | Indicator | | | +----------------------+----------------------+----------------------+ | N/A | Supported-Features | The IWF shall store | | | | supported features | | | | for later use when | | | | InsertSubscriberData | | | | Ack messages are to | | | | be sent to HLR. | +----------------------+----------------------+----------------------+ | TBD: | ULR Flags | | | | | | | ISR-Information; | | | | | | | | Serving Node Type | | | | Indicator | | | +----------------------+----------------------+----------------------+ | N/A | Visited-PLMN-Id | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+
#### 6.2.2.2 Detailed IWF Behaviour
#### 6.2.2.3 New Requirements for Rel8 Gr
A new code point For E-UTRAN is needed to be defined for MAP-supportedRAT-
TypeIndicator.
New parameters which indicate ULR flags (Single-Registration-Indication,
S6a/S6d-Indicator) are needed to be defined in MAP.
### 6.2.3 Mapping for Scenario Four
#### 6.2.3.1 AVP Mapping
The AVP mapping from Diameter-ULR to MAP-UpdateGprsLocation for scenario four
is listed as table below:
Table 6.2.3.1-1: AVP Mapping from Diameter-ULR to MAP-UpdateGprsLocation for
scenario four
+----------------------+----------------------+----------------------+ | MAP parameter | S6a/S6d Diameter AVP | Comments | | | within source ULR | | | within target | | | | UpdateGPRSLocation | | | +----------------------+----------------------+----------------------+ | Invoke Id | N/A | IWF shall allocate | | | | an Invoke Id value | | | | locally and record a | | | | mapping entity | | | | between this Invoke | | | | Id value and the | | | | Session Id value | | | | received from the | | | | Diameter message. | +----------------------+----------------------+----------------------+ | IMSI | User-Name | | +----------------------+----------------------+----------------------+ | SGSN number | N/A | See section 4A.2 for | | | | detail. | +----------------------+----------------------+----------------------+ | SGSN address | MME Address/S4-SGSN | See section 4A.2 for | | | address | detail. | +----------------------+----------------------+----------------------+ | Supported CAMEL | N/A | IWF shall set this | | Phases | | parameter that no | | | | CAMEL phase is | | | | supported. | +----------------------+----------------------+----------------------+ | SoLSA Support | N/A | This parameter shall | | Indicator | | be absent. | +----------------------+----------------------+----------------------+ | Super-Charger | N/A | This parameter shall | | Supported in Serving | | be absent. | | Network Entity | | | +----------------------+----------------------+----------------------+ | GPRS enhancements | N/A | IWF shall set this | | support indicator | | parameter. | +----------------------+----------------------+----------------------+ | Supported LCS | N/A | This parameter shall | | Capability Sets | | be absent. | +----------------------+----------------------+----------------------+ | Offered CAMEL 4 CSIs | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | Inform Previous | FFS | | | Network Entity | | | +----------------------+----------------------+----------------------+ | PS LCS Not Supported | N/A | This parameter shall | | by UE | | be absent. | +----------------------+----------------------+----------------------+ | V-GMLC Address | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | Call barring support | N/A | This parameter shall | | indicator | | be absent. | +----------------------+----------------------+----------------------+ | IMEISV | Terminal-Information | | +----------------------+----------------------+----------------------+ | Skip Subscriber Data | FFS | | | Update | | | +----------------------+----------------------+----------------------+ | Supported RAT Types | Supported-RAT-Type | | | Indicator | | | +----------------------+----------------------+----------------------+ | TBD | Supported-Features | | +----------------------+----------------------+----------------------+ | TBD | ULR Flags | | | | | | | ISR-Information; | | | | | | | | Serving Node Type | | | | Indicator | | | +----------------------+----------------------+----------------------+ | N/A | Visited-PLMN-Id | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+
#### 6.2.3.2 Detailed IWF Behaviour
#### 6.2.3.3 New Requirements for Rel8 Gr
A new code point For E-UTRAN is needed to be defined for MAP-supportedRAT-
TypeIndicator.
A new parameter which indicates support of ODBs and ReqSubs is needed to be
defined in MAP.
A new parameter which indicates supported features is needed to be defined in
MAP.
New parameters which indicate ULR flags (Single-Registration-Indication,
S6a/S6d-Indicator) are needed to be defined in MAP.
## 6.3 MAP-UpdateGprsLocation Mapping to Diameter-ULR
### 6.3.1 Mapping for Scenario Four
#### 6.3.1.1 AVP Mapping
The AVP mapping from MAP-UpdateGprsLocation to Diameter-ULR for scenario four
is listed as table below:
Table 6.3.1.1-1: AVP Mapping from MAP-UpdateGprsLocation to Diameter-ULR for
scenario four
+----------------------+----------------------+----------------------+ | S6a/S6d Diameter AVP | MAP parameter | Comments | | within target ULR | | | | | within source | | | | UpdateGPRSLocation | | +----------------------+----------------------+----------------------+ | User-Name | IMSI | IWF shall records | | | | this parameter | | | | locally and record a | | | | mapping entity | | | | between this IMSI | | | | value and the | | | | Session Id value. | +----------------------+----------------------+----------------------+ | Supported-Features | TBD | | +----------------------+----------------------+----------------------+ | Terminal-Information | IMEISV | | +----------------------+----------------------+----------------------+ | Supported-RAT-Type | Supported RAT Types | | | | Indicator | | +----------------------+----------------------+----------------------+ | ULR Flags | TBD | | +----------------------+----------------------+----------------------+ | Visited-PLMN-Id | N/A | IWF shall set this | | | | parameter according | | | | to the leading | | | | digits of | | | | SGSN-Number. | +----------------------+----------------------+----------------------+ | N/A | Invoke Id | IWF shall allocate a | | | | Session Id value | | | | locally and record a | | | | mapping entity | | | | between this Session | | | | Id value and the | | | | Invoke Id value | | | | received from the | | | | MAP message. | +----------------------+----------------------+----------------------+ | N/A | SGSN number | See section 4A.2 for | | | | detail. | +----------------------+----------------------+----------------------+ | N/A | SGSN address | See section 4A.2 for | | | | detail. | +----------------------+----------------------+----------------------+ | N/A | Supported CAMEL | This parameter shall | | | Phases | be ignored. | +----------------------+----------------------+----------------------+ | N/A | SoLSA Support | This parameter shall | | | Indicator | be ignored. | +----------------------+----------------------+----------------------+ | N/A | Super-Charger | This parameter shall | | | Supported in Serving | be ignored. | | | Network Entity | | +----------------------+----------------------+----------------------+ | N/A | GPRS enhancements | This parameter shall | | | support indicator | be ignored. | +----------------------+----------------------+----------------------+ | N/A | Supported LCS | This parameter shall | | | Capability Sets | be ignored. | +----------------------+----------------------+----------------------+ | N/A | Offered CAMEL 4 CSIs | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | FFS | Inform Previous | | | | Network Entity | | +----------------------+----------------------+----------------------+ | N/A | PS LCS Not Supported | This parameter shall | | | by UE | be ignored. | +----------------------+----------------------+----------------------+ | N/A | V-GMLC Address | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | Call barring support | This parameter shall | | | indicator | be ignored. | +----------------------+----------------------+----------------------+ | N/A | Skip Subscriber Data | This parameter shall | | | Update | be ignored. | +----------------------+----------------------+----------------------+
#### 6.3.1.2 Detailed IWF Behaviour
#### 6.3.1.3 New Requirements for S6a/S6d
## 6.4 Diameter-ULA Mapping to MAP-InsertSubscriberData
### 6.4.1 Mapping for Scenario Four
#### 6.4.1.1 AVP Mapping
The AVP mapping from Diameter-ULA to MAP-InsertSubscriberData for scenario
four is listed as table below:
Table 6.4.1.1-1: AVP Mapping from Diameter-ULA to MAP-InsertSubscriberData for
scenario four
+----------------------+----------------------+----------------------+ | MAP parameter | S6a/S6d Diameter AVP | Comments | | | within source ULA | | | within target | | | | InsertSubscriberData | | | +----------------------+----------------------+----------------------+ | Invoke Id | N/A | IWF shall allocate | | | | an Invoke Id value | | | | locally and record a | | | | mapping entity | | | | between this Invoke | | | | Id value and the | | | | Session Id value | | | | received from the | | | | Diameter message. | +----------------------+----------------------+----------------------+ | IMSI | N/A | IWF shall set this | | | | parameter according | | | | to the Session Id | | | | value received from | | | | the Diameter message | | | | and the recorded | | | | mapping between IMSI | | | | value and the | | | | Session Id value | +----------------------+----------------------+----------------------+ | MSISDN | MSISDN AVP within | | | | Subscription-Data | | +----------------------+----------------------+----------------------+ | Category | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | Subscriber Status | Subscriber status | | | | AVP within | | | | Subscription-Data | | +----------------------+----------------------+----------------------+ | Bearer service List | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | Teleservice List | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | Forwarding | N/A | This parameter shall | | information List | | be absent. | +----------------------+----------------------+----------------------+ | Call barring | N/A | This parameter shall | | information List | | be absent. | +----------------------+----------------------+----------------------+ | CUG information List | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | SS-Data List | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | eMLPP Subscription | N/A | This parameter shall | | Data | | be absent. | +----------------------+----------------------+----------------------+ | MC-Subscription Data | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | Operator Determined | Operato | | | Barring General data | r-Determined-Barring | | | | AVP within | | | | Subscription-Data | | | | AVP | | +----------------------+----------------------+----------------------+ | Operator Determined | HPLMN-ODB AVP within | | | Barring HPLMN data | Subscription-Data | | +----------------------+----------------------+----------------------+ | Roaming Restriction | N/A | This parameter shall | | Due To Unsupported | | be absent. | | Feature | | | +----------------------+----------------------+----------------------+ | Regional | Regional-Su | | | Subscription Data | bscription-Zone-Code | | | | AVPs within | | | | Subscription-Data | | +----------------------+----------------------+----------------------+ | VLR CAMEL | N/A | This parameter shall | | Subscription Info | | be absent. | +----------------------+----------------------+----------------------+ | Voice Broadcast Data | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | Voice Group Call | N/A | This parameter shall | | Data | | be absent. | +----------------------+----------------------+----------------------+ | Network access mode | c | | +----------------------+----------------------+----------------------+ | GPRS Subscription | FFS | This parameter may | | Data | | needed if GPRS based | | | | subscriber data can | | | | be sent on S6a/S6d. | +----------------------+----------------------+----------------------+ | Roaming Restricted | FFS: | FFS whether the | | In SGSN Due To | Acc | Restriction | | Unsupported Feature | ess-Restriction-Data | information for SGSN | | | AVP within | is the same for that | | | Subscription-Data | of MME/S4-SGSN | +----------------------+----------------------+----------------------+ | North American Equal | N/A | This parameter shall | | Access preferred | | be absent. | | Carrier Id List | | | +----------------------+----------------------+----------------------+ | SGSN CAMEL | N/A | This parameter shall | | Subscription Info | | be absent. | +----------------------+----------------------+----------------------+ | LSA Information | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | IST Alert Timer | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | LMU Identifier | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | LCS Information | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | CS | N/A | This parameter shall | | Allocation/Retention | | be absent. | | priority | | | +----------------------+----------------------+----------------------+ | Super-Charger | N/A | This parameter shall | | Supported In HLR | | be absent. | +----------------------+----------------------+----------------------+ | Subscribed Charging | 3GPP-Char | | | Characteristics | ging-Characteristics | | | | AVP within | | | | Subscription-Data | | +----------------------+----------------------+----------------------+ | Access Restriction | Acc | | | Data | ess-Restriction-Data | | | | AVP within | | | | Subscription-Data | | +----------------------+----------------------+----------------------+ | TBD | Subscription-Data | IWF shall do the | | | | mapping between the | | | | MAP parameters and | | | | the following AVPs | | | | within | | | | Subscription-Data | | | | AVP: STN-SR, | | | | APN-OI-Replacement, | | | | AMBR, | | | | APN-Co | | | | nfiguration-Profile, | | | | RAT-Frequency | | | | -Selection-Priority. | +----------------------+----------------------+----------------------+ | N/A | Supported Features | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | Result | IWF shall map Result | | | | codes onto the | | | | appropriate MAP | | | | error (when | | | | different from | | | | \"success\"). | +----------------------+----------------------+----------------------+ | N/A | ULA-Flags | The IWF shall store | | | | this AVP and use it | | | | when sending | | | | UpdateGprsLocation | | | | Ack | +----------------------+----------------------+----------------------+
#### 6.4.1.2 Detailed IWF Behaviour
#### 6.4.1.3 New Requirements for Rel8 Gr
A new code point For E-UTRAN is needed to be defined for MAP- Access
Restriction Data.
New parameters which describes STN-SR, APN-OI-Replacement, AMBR, APN-
Configuration-Profile, RAT-Frequency-Selection-Priority for EPS subscription
data are needed to be defined in MAP.
## 6.5 Diameter-ULA Mapping to MAP-UpdateGprsLocation Ack
### 6.5.1 Mapping for Scenario Four
#### 6.5.1.1 AVP Mapping
The AVP mapping from Diameter-ULA to MAP-UpdateGprsLocation Ack for scenario
four is listed as table below:
Table 6.5.1.1-1: AVP Mapping from Diameter-ULA to MAP- UpdateGprsLocation Ack
for scenario four
+----------------------+----------------------+----------------------+ | MAP parameter | S6a/S6d Diameter AVP | Comments | | | within source ULA | | | within target | | | | UpdateGprsLocation | | | | Ack | | | +----------------------+----------------------+----------------------+ | Invoke Id | N/A | IWF shall set the | | | | Invoke Id value | | | | according to the | | | | Session Id value | | | | received from the | | | | Diameter message and | | | | the recorded mapping | | | | between Invoke Id | | | | value and the | | | | Session Id value. | +----------------------+----------------------+----------------------+ | ADD Capability | N/A | FFS: we need to | | | | decide which AVPs in | | | | Subscription-Data | | | | will be mapped to | | | | this parameter | +----------------------+----------------------+----------------------+ | HLR number | N/A | IWF shall set this | | | | parameter according | | | | to the SS7 numbering | | | | configured for this | | | | IWF. | +----------------------+----------------------+----------------------+ | User error | Result | | +----------------------+----------------------+----------------------+ | N/A | Subscription-Data | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | TBD | ULA-Flags | | +----------------------+----------------------+----------------------+ | FFS: Whether this | Supported Features | | | parameter is needed | | | | for ULR. | | | +----------------------+----------------------+----------------------+
#### 6.5.1.2 Detailed IWF Behaviour
#### 6.5.1.3 New Requirements for Rel8 Gr
A new parameter which indicates ULA Flags (separationIndication) is needed to
be defined in MAP.
FFS: A new parameter which indicates Supported Feature of EPS is needed to be
defined in MAP.
## 6.6 MAP-InsertSubscriberData and MAP-UpdateGprsLocation Ack Mapping to
Diameter-ULA
### 6.6.1 Mapping for Scenario One
#### 6.6.1.1 AVP Mapping
The AVP mapping from MAP-InsertSubscriberData and MAP-UpdateGprsLocation Ack
to Diameter-ULA for scenario one is listed as table below:
Table 6.6.1.1-1: AVP Mapping from MAP-InsertSubscriberData and MAP-
UpdateGprsLocation Ack to Diameter-ULR for scenario one
+----------------------+----------------------+----------------------+ | S6a/S6d Diameter AVP | MAP parameter | Comments | | within target ULA | | | | | within source | | | | InsertSubscriberData | | | | and | | | | UpdateGprsLocation | | | | Ack | | +----------------------+----------------------+----------------------+ | Supported-Features | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | Result | N/A | This parameter shall | | | | be set according to | | | | the value of User | | | | error. | +----------------------+----------------------+----------------------+ | ULA Flags | TBD | FFS: IWF shall set | | | | this parameter | | | | cleared. | +----------------------+----------------------+----------------------+ | Subscription Data | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | N/A | Invoke Id | IWF shall set the | | | | Session Id value | | | | according to the | | | | Invoke Id value | | | | received from the | | | | MAP message and the | | | | recorded mapping | | | | between Invoke Id | | | | value and the | | | | Session Id value. | +----------------------+----------------------+----------------------+ | N/A | IMSI | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | MSISDN AVP within | MSISDN | | | Subscription-Data | | | +----------------------+----------------------+----------------------+ | N/A | Category | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | Subscriber status | Subscriber Status | | | AVP within | | | | Subscription-Data | | | +----------------------+----------------------+----------------------+ | N/A | Bearer service List | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | Teleservice List | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | Forwarding | This parameter shall | | | information List | be ignored. | +----------------------+----------------------+----------------------+ | N/A | Call barring | This parameter shall | | | information List | be ignored. | +----------------------+----------------------+----------------------+ | N/A | CUG information List | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | SS-Data List | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | eMLPP Subscription | This parameter shall | | | Data | be ignored. | +----------------------+----------------------+----------------------+ | N/A | MC-Subscription Data | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | Operato | Operator Determined | | | r-Determined-Barring | Barring General data | | | AVP within | | | | Subscription-Data | | | | AVP | | | +----------------------+----------------------+----------------------+ | HPLMN-ODB AVP within | Operator Determined | | | Subscription-Data | Barring HPLMN data | | +----------------------+----------------------+----------------------+ | N/A | Roaming Restriction | This parameter shall | | | Due To Unsupported | be ignored. | | | Feature | | +----------------------+----------------------+----------------------+ | Regional-Su | Regional | . | | bscription-Zone-Code | Subscription Data | | | AVPs within | | | | Subscription-Data | | | +----------------------+----------------------+----------------------+ | N/A | VLR CAMEL | This parameter shall | | | Subscription Info | be ignored. | +----------------------+----------------------+----------------------+ | N/A | Voice Broadcast Data | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | Voice Group Call | This parameter shall | | | Data | be ignored. | +----------------------+----------------------+----------------------+ | Regional-Su | Network access mode | This parameter may | | bscription-Zone-Code | | needed if GPRS based | | AVPs within | | subscriber data can | | Subscription-Data | | be sent on S6a/S6d. | +----------------------+----------------------+----------------------+ | FFS | GPRS Subscription | This parameter may | | | Data | needed if GPRS based | | | | subscriber data can | | | | be sent on S6a/S6d. | +----------------------+----------------------+----------------------+ | FFS: | Roaming Restricted | This parameter may | | Acc | In SGSN Due To | needed if GPRS based | | ess-Restriction-Data | Unsupported Feature | subscriber data can | | AVP within | | be sent on S6a/S6d. | | Subscription-Data | | | +----------------------+----------------------+----------------------+ | N/A | North American Equal | This parameter shall | | | Access preferred | be ignored. | | | Carrier Id List | | +----------------------+----------------------+----------------------+ | N/A | SGSN CAMEL | This parameter shall | | | Subscription Info | be ignored. | +----------------------+----------------------+----------------------+ | N/A | LSA Information | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | IST Alert Timer | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | LMU Identifier | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | LCS Information | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | CS | This parameter shall | | | Allocation/Retention | be ignored. | | | priority | | +----------------------+----------------------+----------------------+ | N/A | Super-Charger | This parameter shall | | | Supported In HLR | be ignored. | +----------------------+----------------------+----------------------+ | 3GPP-Char | Subscribed Charging | | | ging-Characteristics | Characteristics | | | AVP within | | | | Subscription-Data | | | +----------------------+----------------------+----------------------+ | Acc | Access Restriction | | | ess-Restriction-Data | Data | | | AVP within | | | | Subscription-Data | | | +----------------------+----------------------+----------------------+ | N/A | Invoke Id | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | FFS: we need to | ADD Capability | This parameter may | | decide which AVPs in | | needed if GPRS based | | Subscription-Data | | subscriber data can | | will be mapped to | | be sent on S6a/S6d. | | this parameter | | | +----------------------+----------------------+----------------------+ | N/A | HLR number | IWF shall record | | | | this AVP for further | | | | SS7 message sent | | | | back to the same | | | | peer. | +----------------------+----------------------+----------------------+ | N/A | User error | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+
#### 6.6.1.2 Detailed IWF Behaviour
#### 6.6.1.3 New Requirements for S6a/S6d
### 6.6.2 Mapping for Scenario Three
#### 6.6.2.1 AVP Mapping
The AVP mapping from MAP-InsertSubscriberData and MAP-UpdateGprsLocation Ack
to Diameter-ULA for scenario three is listed as table below:
Table 6.6.2.1-1: AVP Mapping from MAP-InsertSubscriberData and MAP-
UpdateGprsLocation Ack to Diameter-ULR for scenario three
+----------------------+----------------------+----------------------+ | S6a/S6d Diameter AVP | MAP parameter | Comments | | within target ULA | | | | | within source | | | | InsertSubscriberData | | | | and | | | | UpdateGprsLocation | | | | Ack | | +----------------------+----------------------+----------------------+ | Supported-Features | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | Result | N/A | This parameter shall | | | | be set according to | | | | the value of User | | | | error. | +----------------------+----------------------+----------------------+ | ULA Flags | TBD | FFS: IWF shall set | | | | this parameter | | | | cleared. | +----------------------+----------------------+----------------------+ | Subscription Data | TBD | IWF shall do the | | | | mapping between the | | | | MAP parameters and | | | | the following AVPs | | | | within | | | | Subscription-Data | | | | AVP: STN-SR, | | | | APN-OI-Replacement, | | | | AMBR, | | | | APN-Co | | | | nfiguration-Profile, | | | | RAT-Frequency | | | | -Selection-Priority. | +----------------------+----------------------+----------------------+ | N/A | Invoke Id | IWF shall set the | | | | Session Id value | | | | according to the | | | | Invoke Id value | | | | received from the | | | | MAP message and the | | | | recorded mapping | | | | between Invoke Id | | | | value and the | | | | Session Id value. | +----------------------+----------------------+----------------------+ | N/A | IMSI | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | MSISDN AVP within | MSISDN | | | Subscription-Data | | | +----------------------+----------------------+----------------------+ | N/A | Category | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | Subscriber status | Subscriber Status | | | AVP within | | | | Subscription-Data | | | +----------------------+----------------------+----------------------+ | N/A | Bearer service List | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | Teleservice List | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | Forwarding | This parameter shall | | | information List | be ignored. | +----------------------+----------------------+----------------------+ | N/A | Call barring | This parameter shall | | | information List | be ignored. | +----------------------+----------------------+----------------------+ | N/A | CUG information List | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | SS-Data List | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | eMLPP Subscription | This parameter shall | | | Data | be ignored. | +----------------------+----------------------+----------------------+ | N/A | MC-Subscription Data | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | Operato | Operator Determined | | | r-Determined-Barring | Barring General data | | | AVP within | | | | Subscription-Data | | | | AVP | | | +----------------------+----------------------+----------------------+ | HPLMN-ODB AVP within | Operator Determined | | | Subscription-Data | Barring HPLMN data | | +----------------------+----------------------+----------------------+ | N/A | Roaming Restriction | This parameter shall | | | Due To Unsupported | be ignored. | | | Feature | | +----------------------+----------------------+----------------------+ | Regional-Su | Regional | | | bscription-Zone-Code | Subscription Data | | | AVPs within | | | | Subscription-Data | | | +----------------------+----------------------+----------------------+ | N/A | VLR CAMEL | This parameter shall | | | Subscription Info | be ignored. | +----------------------+----------------------+----------------------+ | N/A | Voice Broadcast Data | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | Voice Group Call | This parameter shall | | | Data | be ignored. | +----------------------+----------------------+----------------------+ | Regional-Su | Network access mode | | | bscription-Zone-Code | | | | AVPs within | | | | Subscription-Data | | | +----------------------+----------------------+----------------------+ | FFS | GPRS Subscription | | | | Data | | +----------------------+----------------------+----------------------+ | FFS: | Roaming Restricted | | | Acc | In SGSN Due To | | | ess-Restriction-Data | Unsupported Feature | | | AVP within | | | | Subscription-Data | | | +----------------------+----------------------+----------------------+ | N/A | North American Equal | This parameter shall | | | Access preferred | be ignored. | | | Carrier Id List | | +----------------------+----------------------+----------------------+ | N/A | SGSN CAMEL | This parameter shall | | | Subscription Info | be ignored. | +----------------------+----------------------+----------------------+ | N/A | LSA Information | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | IST Alert Timer | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | LMU Identifier | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | LCS Information | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | CS | This parameter shall | | | Allocation/Retention | be ignored. | | | priority | | +----------------------+----------------------+----------------------+ | N/A | Super-Charger | This parameter shall | | | Supported In HLR | be ignored. | +----------------------+----------------------+----------------------+ | 3GPP-Char | Subscribed Charging | | | ging-Characteristics | Characteristics | | | AVP within | | | | Subscription-Data | | | +----------------------+----------------------+----------------------+ | Acc | Access Restriction | | | ess-Restriction-Data | Data | | | AVP within | | | | Subscription-Data | | | +----------------------+----------------------+----------------------+ | N/A | Invoke Id | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | FFS: we need to | ADD Capability | This parameter may | | decide which AVPs in | | needed if GPRS based | | Subscription-Data | | subscriber data can | | will be mapped to | | be sent on S6a/S6d. | | this parameter | | | +----------------------+----------------------+----------------------+ | N/A | HLR number | IWF shall record | | | | this AVP for further | | | | SS7 message sent | | | | back to the same | | | | peer. | +----------------------+----------------------+----------------------+ | N/A | User error | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+
#### 6.6.2.2 Detailed IWF Behaviour
#### 6.6.2.3 New Requirements for S6a/S6d
### 6.6.3 Mapping for Scenario Four
#### 6.6.3.1 AVP Mapping
The AVP mapping from MAP-InsertSubscriberData and MAP-UpdateGprsLocation Ack
to Diameter-ULA for scenario four is listed as table below:
Table 6.6.3.1-1: AVP Mapping from MAP-InsertSubscriberData and MAP-
UpdateGprsLocation Ack to Diameter-ULR for scenario four
+----------------------+----------------------+----------------------+ | S6a/S6d Diameter AVP | MAP parameter | Comments | | within target ULA | | | | | within source | | | | InsertSubscriberData | | | | and | | | | UpdateGprsLocation | | | | Ack | | +----------------------+----------------------+----------------------+ | Supported-Features | TBD | | +----------------------+----------------------+----------------------+ | Result | TBD | | +----------------------+----------------------+----------------------+ | ULA Flags | TBD | FFS: IWF shall set | | | | this parameter | | | | cleared. | +----------------------+----------------------+----------------------+ | Subscription Data | TBD | IWF shall do the | | | | mapping between the | | | | MAP parameters and | | | | the following AVPs | | | | within | | | | Subscription-Data | | | | AVP: STN-SR, | | | | APN-OI-Replacement, | | | | AMBR, | | | | APN-Co | | | | nfiguration-Profile, | | | | RAT-Frequency | | | | -Selection-Priority. | +----------------------+----------------------+----------------------+ | N/A | Invoke Id | IWF shall set the | | | | Session Id value | | | | according to the | | | | Invoke Id value | | | | received from the | | | | MAP message and the | | | | recorded mapping | | | | between Invoke Id | | | | value and the | | | | Session Id value. | +----------------------+----------------------+----------------------+ | N/A | IMSI | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | MSISDN AVP within | MSISDN | | | Subscription-Data | | | +----------------------+----------------------+----------------------+ | N/A | Category | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | Subscriber status | Subscriber Status | | | AVP within | | | | Subscription-Data | | | +----------------------+----------------------+----------------------+ | N/A | Bearer service List | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | Teleservice List | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | Forwarding | This parameter shall | | | information List | be ignored. | +----------------------+----------------------+----------------------+ | N/A | Call barring | This parameter shall | | | information List | be ignored. | +----------------------+----------------------+----------------------+ | N/A | CUG information List | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | SS-Data List | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | eMLPP Subscription | This parameter shall | | | Data | be ignored. | +----------------------+----------------------+----------------------+ | N/A | MC-Subscription Data | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | Operato | Operator Determined | | | r-Determined-Barring | Barring General data | | | AVP within | | | | Subscription-Data | | | | AVP | | | +----------------------+----------------------+----------------------+ | HPLMN-ODB AVP within | Operator Determined | | | Subscription-Data | Barring HPLMN data | | +----------------------+----------------------+----------------------+ | N/A | Roaming Restriction | This parameter shall | | | Due To Unsupported | be ignored. | | | Feature | | +----------------------+----------------------+----------------------+ | Regional-Su | Regional | | | bscription-Zone-Code | Subscription Data | | | AVPs within | | | | Subscription-Data | | | +----------------------+----------------------+----------------------+ | N/A | VLR CAMEL | This parameter shall | | | Subscription Info | be ignored. | +----------------------+----------------------+----------------------+ | N/A | Voice Broadcast Data | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | Voice Group Call | This parameter shall | | | Data | be ignored. | +----------------------+----------------------+----------------------+ | Regional-Su | Network access mode | | | bscription-Zone-Code | | | | AVPs within | | | | Subscription-Data | | | +----------------------+----------------------+----------------------+ | FFS | GPRS Subscription | | | | Data | | +----------------------+----------------------+----------------------+ | FFS: | Roaming Restricted | | | Acc | In SGSN Due To | | | ess-Restriction-Data | Unsupported Feature | | | AVP within | | | | Subscription-Data | | | +----------------------+----------------------+----------------------+ | N/A | North American Equal | This parameter shall | | | Access preferred | be ignored. | | | Carrier Id List | | +----------------------+----------------------+----------------------+ | N/A | SGSN CAMEL | This parameter shall | | | Subscription Info | be ignored. | +----------------------+----------------------+----------------------+ | N/A | LSA Information | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | IST Alert Timer | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | LMU Identifier | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | LCS Information | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | CS | This parameter shall | | | Allocation/Retention | be ignored. | | | priority | | +----------------------+----------------------+----------------------+ | N/A | Super-Charger | This parameter shall | | | Supported In HLR | be ignored. | +----------------------+----------------------+----------------------+ | 3GPP-Char | Subscribed Charging | | | ging-Characteristics | Characteristics | | | AVP within | | | | Subscription-Data | | | +----------------------+----------------------+----------------------+ | Acc | Access Restriction | | | ess-Restriction-Data | Data | | | AVP within | | | | Subscription-Data | | | +----------------------+----------------------+----------------------+ | N/A | Invoke Id | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | FFS: we need to | ADD Capability | | | decide which AVPs in | | | | Subscription-Data | | | | will be mapped to | | | | this parameter | | | +----------------------+----------------------+----------------------+ | N/A | HLR number | IWF shall record | | | | this AVP for further | | | | SS7 message sent | | | | back to the same | | | | peer. | +----------------------+----------------------+----------------------+ | N/A | User error | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+
#### 6.6.3.2 Detailed IWF Behaviour
#### 6.6.3.3 New Requirements for S6a/S6d
## 6.7 Diameter-IDR Mapping to MAP-InsertSubscriberData
### 6.7.1 Mapping for Scenario Four
#### 6.7.1.1 AVP Mapping
The AVP mapping from Diameter-IDR to MAP-InsertSubscriberData for scenario
four is listed as table below:
Table 6.7.1.1-1: AVP Mapping from Diameter-IDR to MAP- InsertSubscriberData
for scenario four
+----------------------+----------------------+----------------------+ | MAP parameter | S6a/S6d Diameter AVP | Comments | | | within source IDR | | | within target | | | | InsertSubscriberData | | | +----------------------+----------------------+----------------------+ | Invoke Id | N/A | IWF shall set the | | | | Invoke Id value | | | | according to the | | | | Session Id value | | | | received from the | | | | Diameter message and | | | | the recorded mapping | | | | between Invoke Id | | | | value and the | | | | Session Id value. | +----------------------+----------------------+----------------------+ | IMSI | User Name | | +----------------------+----------------------+----------------------+ | MSISDN | MSISDN AVP within | | | | Subscription-Data | | +----------------------+----------------------+----------------------+ | Category | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | Subscriber Status | Subscriber status | | | | AVP within | | | | Subscription-Data | | +----------------------+----------------------+----------------------+ | Bearer service List | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | Teleservice List | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | Forwarding | N/A | This parameter shall | | information List | | be absent. | +----------------------+----------------------+----------------------+ | Call barring | N/A | This parameter shall | | information List | | be absent. | +----------------------+----------------------+----------------------+ | CUG information List | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | SS-Data List | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | eMLPP Subscription | N/A | This parameter shall | | Data | | be absent. | +----------------------+----------------------+----------------------+ | MC-Subscription Data | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | Operator Determined | Operato | | | Barring General data | r-Determined-Barring | | | | AVP within | | | | Subscription-Data | | | | AVP | | +----------------------+----------------------+----------------------+ | Operator Determined | HPLMN-ODB AVP within | | | Barring HPLMN data | Subscription-Data | | +----------------------+----------------------+----------------------+ | Roaming Restriction | N/A | This parameter shall | | Due To Unsupported | | be absent. | | Feature | | | +----------------------+----------------------+----------------------+ | Regional | Regional-Su | | | Subscription Data | bscription-Zone-Code | | | | AVPs within | | | | Subscription-Data | | +----------------------+----------------------+----------------------+ | VLR CAMEL | N/A | This parameter shall | | Subscription Info | | be absent. | +----------------------+----------------------+----------------------+ | Voice Broadcast Data | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | Voice Group Call | N/A | This parameter shall | | Data | | be absent. | +----------------------+----------------------+----------------------+ | Network access mode | Regional-Su | | | | bscription-Zone-Code | | | | AVPs within | | | | Subscription-Data | | +----------------------+----------------------+----------------------+ | GPRS Subscription | FFS | This parameter may | | Data | | needed if GPRS based | | | | subscriber data can | | | | be sent on S6a/S6d. | +----------------------+----------------------+----------------------+ | Roaming Restricted | FFS: | | | In SGSN Due To | Acc | | | Unsupported Feature | ess-Restriction-Data | | | | AVP within | | | | Subscription-Data | | +----------------------+----------------------+----------------------+ | North American Equal | N/A | This parameter shall | | Access preferred | | be absent. | | Carrier Id List | | | +----------------------+----------------------+----------------------+ | SGSN CAMEL | N/A | This parameter shall | | Subscription Info | | be absent. | +----------------------+----------------------+----------------------+ | LSA Information | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | IST Alert Timer | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | LMU Identifier | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | LCS Information | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | CS | N/A | This parameter shall | | Allocation/Retention | | be absent. | | priority | | | +----------------------+----------------------+----------------------+ | Super-Charger | N/A | This parameter shall | | Supported In HLR | | be absent. | +----------------------+----------------------+----------------------+ | Subscribed Charging | 3GPP-Char | | | Characteristics | ging-Characteristics | | | | AVP within | | | | Subscription-Data | | +----------------------+----------------------+----------------------+ | Access Restriction | Acc | | | Data | ess-Restriction-Data | | | | AVP within | | | | Subscription-Data | | +----------------------+----------------------+----------------------+ | TBD | Supported Features | | +----------------------+----------------------+----------------------+ | TBD | Subscription Data | IWF shall do the | | | | mapping between the | | | | MAP parameters and | | | | the following AVPs | | | | within | | | | Subscription-Data | | | | AVP: STN-SR, | | | | APN-OI-Replacement, | | | | AMBR, | | | | APN-Co | | | | nfiguration-Profile, | | | | RAT-Frequency | | | | -Selection-Priority. | +----------------------+----------------------+----------------------+
#### 6.7.1.2 Detailed IWF Behaviour
#### 6.7.1.3 New Requirements for Rel8 Gr
A new parameter which indicates Supported Feature of EPS is needed to be
defined in MAP.
New parameters which describes STN-SR, APN-OI-Replacement, AMBR, APN-
Configuration-Profile, RAT-Frequency-Selection-Priority for EPS subscription
data are needed to be defined in MAP.
## 6.8 MAP-InsertSubscriberData Mapping to Diameter-IDR
### 6.8.1 Mapping for Scenario One
#### 6.8.1.1 AVP Mapping
The AVP mapping from MAP-InsertSubscriberData to Diameter-IDR for scenario one
is listed as table below:
Table 6.8.1.1-1: AVP Mapping from MAP-InsertSubscriberData to Diameter-IDR for
scenario one
+----------------------+----------------------+----------------------+ | S6a/S6d Diameter AVP | MAP parameter | Comments | | within target IDR | | | | | within source | | | | InsertSubscriberData | | +----------------------+----------------------+----------------------+ | User Name | IMSI | | +----------------------+----------------------+----------------------+ | Supported-Features | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | Subscription Data | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | N/A | Invoke Id | IWF shall set the | | | | Session Id value | | | | according to the | | | | Invoke Id value | | | | received from the | | | | MAP message and the | | | | recorded mapping | | | | between Invoke Id | | | | value and the | | | | Session Id value. | +----------------------+----------------------+----------------------+ | MSISDN AVP within | MSISDN | | | Subscription-Data | | | +----------------------+----------------------+----------------------+ | N/A | Category | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | Subscriber status | Subscriber Status | | | AVP within | | | | Subscription-Data | | | +----------------------+----------------------+----------------------+ | N/A | Bearer service List | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | Teleservice List | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | Forwarding | This parameter shall | | | information List | be ignored. | +----------------------+----------------------+----------------------+ | N/A | Call barring | This parameter shall | | | information List | be ignored. | +----------------------+----------------------+----------------------+ | N/A | CUG information List | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | SS-Data List | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | eMLPP Subscription | This parameter shall | | | Data | be ignored. | +----------------------+----------------------+----------------------+ | N/A | MC-Subscription Data | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | Operato | Operator Determined | | | r-Determined-Barring | Barring General data | | | AVP within | | | | Subscription-Data | | | | AVP | | | +----------------------+----------------------+----------------------+ | HPLMN-ODB AVP within | Operator Determined | | | Subscription-Data | Barring HPLMN data | | +----------------------+----------------------+----------------------+ | N/A | Roaming Restriction | This parameter shall | | | Due To Unsupported | be ignored | | | Feature | | +----------------------+----------------------+----------------------+ | Regional-Su | Regional | | | bscription-Zone-Code | Subscription Data | | | AVPs within | | | | Subscription-Data | | | +----------------------+----------------------+----------------------+ | N/A | VLR CAMEL | This parameter shall | | | Subscription Info | be ignored. | +----------------------+----------------------+----------------------+ | N/A | Voice Broadcast Data | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | Voice Group Call | This parameter shall | | | Data | be ignored. | +----------------------+----------------------+----------------------+ | Regional-Su | Network access mode | | | bscription-Zone-Code | | | | AVPs within | | | | Subscription-Data | | | +----------------------+----------------------+----------------------+ | FFS | GPRS Subscription | | | | Data | | +----------------------+----------------------+----------------------+ | FFS: | Roaming Restricted | | | Acc | In SGSN Due To | | | ess-Restriction-Data | Unsupported Feature | | | AVP within | | | | Subscription-Data | | | +----------------------+----------------------+----------------------+ | N/A | North American Equal | This parameter shall | | | Access preferred | be ignored. | | | Carrier Id List | | +----------------------+----------------------+----------------------+ | N/A | SGSN CAMEL | This parameter shall | | | Subscription Info | be ignored. | +----------------------+----------------------+----------------------+ | N/A | LSA Information | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | IST Alert Timer | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | LMU Identifier | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | LCS Information | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | CS | This parameter shall | | | Allocation/Retention | be ignored. | | | priority | | +----------------------+----------------------+----------------------+ | N/A | Super-Charger | This parameter shall | | | Supported In HLR | be ignored. | +----------------------+----------------------+----------------------+ | 3GPP-Char | Subscribed Charging | | | ging-Characteristics | Characteristics | | | AVP within | | | | Subscription-Data | | | +----------------------+----------------------+----------------------+ | Acc | Access Restriction | | | ess-Restriction-Data | Data | | | AVP within | | | | Subscription-Data | | | +----------------------+----------------------+----------------------+
#### 6.8.1.2 Detailed IWF Behaviour
#### 6.8.1.3 New Requirements for S6a/S6d
### 6.8.2 Mapping for Scenario Three
#### 6.8.2.1 AVP Mapping
The AVP mapping from MAP-InsertSubscriberData to Diameter-IDR for scenario
three is listed as table below:
Table 6.8.2.1-1: AVP Mapping from MAP-InsertSubscriberData to Diameter-IDR for
scenario three
+----------------------+----------------------+----------------------+ | S6a/S6d Diameter AVP | MAP parameter | Comments | | within target IDR | | | | | within source | | | | InsertSubscriberData | | +----------------------+----------------------+----------------------+ | User Name | IMSI | | +----------------------+----------------------+----------------------+ | Supported-Features | TBD | | +----------------------+----------------------+----------------------+ | Subscription Data | TBD | IWF shall do the | | | | mapping between the | | | | MAP parameters and | | | | the following AVPs | | | | within | | | | Subscription-Data | | | | AVP: STN-SR, | | | | APN-OI-Replacement, | | | | AMBR, | | | | APN-Co | | | | nfiguration-Profile, | | | | RAT-Frequency | | | | -Selection-Priority. | +----------------------+----------------------+----------------------+ | N/A | Invoke Id | IWF shall set the | | | | Session Id value | | | | according to the | | | | Invoke Id value | | | | received from the | | | | MAP message and the | | | | recorded mapping | | | | between Invoke Id | | | | value and the | | | | Session Id value. | +----------------------+----------------------+----------------------+ | MSISDN AVP within | MSISDN | | | Subscription-Data | | | +----------------------+----------------------+----------------------+ | N/A | Category | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | Subscriber status | Subscriber Status | | | AVP within | | | | Subscription-Data | | | +----------------------+----------------------+----------------------+ | N/A | Bearer service List | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | Teleservice List | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | Forwarding | This parameter shall | | | information List | be ignored. | +----------------------+----------------------+----------------------+ | N/A | Call barring | This parameter shall | | | information List | be ignored. | +----------------------+----------------------+----------------------+ | N/A | CUG information List | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | SS-Data List | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | eMLPP Subscription | This parameter shall | | | Data | be ignored. | +----------------------+----------------------+----------------------+ | N/A | MC-Subscription Data | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | Operato | Operator Determined | | | r-Determined-Barring | Barring General data | | | AVP within | | | | Subscription-Data | | | | AVP | | | +----------------------+----------------------+----------------------+ | HPLMN-ODB AVP within | Operator Determined | | | Subscription-Data | Barring HPLMN data | | +----------------------+----------------------+----------------------+ | N/A | Roaming Restriction | This parameter shall | | | Due To Unsupported | be ignored | | | Feature | | +----------------------+----------------------+----------------------+ | Regional-Su | Regional | | | bscription-Zone-Code | Subscription Data | | | AVPs within | | | | Subscription-Data | | | +----------------------+----------------------+----------------------+ | N/A | VLR CAMEL | This parameter shall | | | Subscription Info | be ignored. | +----------------------+----------------------+----------------------+ | N/A | Voice Broadcast Data | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | Voice Group Call | This parameter shall | | | Data | be ignored. | +----------------------+----------------------+----------------------+ | Regional-Su | Network access mode | | | bscription-Zone-Code | | | | AVPs within | | | | Subscription-Data | | | +----------------------+----------------------+----------------------+ | FFS | GPRS Subscription | This parameter may | | | Data | needed if GPRS based | | | | subscriber data can | | | | be sent on S6a/S6d. | +----------------------+----------------------+----------------------+ | FFS: | Roaming Restricted | | | Acc | In SGSN Due To | | | ess-Restriction-Data | Unsupported Feature | | | AVP within | | | | Subscription-Data | | | +----------------------+----------------------+----------------------+ | N/A | North American Equal | This parameter shall | | | Access preferred | be ignored. | | | Carrier Id List | | +----------------------+----------------------+----------------------+ | N/A | SGSN CAMEL | This parameter shall | | | Subscription Info | be ignored. | +----------------------+----------------------+----------------------+ | N/A | LSA Information | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | IST Alert Timer | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | LMU Identifier | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | LCS Information | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | CS | This parameter shall | | | Allocation/Retention | be ignored. | | | priority | | +----------------------+----------------------+----------------------+ | N/A | Super-Charger | This parameter shall | | | Supported In HLR | be ignored. | +----------------------+----------------------+----------------------+ | 3GPP-Char | Subscribed Charging | | | ging-Characteristics | Characteristics | | | AVP within | | | | Subscription-Data | | | +----------------------+----------------------+----------------------+ | Acc | Access Restriction | | | ess-Restriction-Data | Data | | | AVP within | | | | Subscription-Data | | | +----------------------+----------------------+----------------------+
#### 6.8.2.2 Detailed IWF Behaviour
#### 6.8.2.3 New Requirements for S6a/S6d
### 6.8.3 Mapping for Scenario Four
#### 6.8.3.1 AVP Mapping
The AVP mapping from MAP-InsertSubscriberData to Diameter-IDR for scenario
four is listed as table below:
Table 6.8.3.1-1: AVP Mapping from MAP-InsertSubscriberData to Diameter-IDR for
scenario four
+----------------------+----------------------+----------------------+ | S6a/S6d Diameter AVP | MAP parameter | Comments | | within target IDR | | | | | within source | | | | InsertSubscriberData | | +----------------------+----------------------+----------------------+ | User Name | IMSI | | +----------------------+----------------------+----------------------+ | Supported-Features | TBD | | +----------------------+----------------------+----------------------+ | Subscription Data | TBD | IWF shall do the | | | | mapping between the | | | | MAP parameters and | | | | the following AVPs | | | | within | | | | Subscription-Data | | | | AVP: STN-SR, | | | | APN-OI-Replacement, | | | | AMBR, | | | | APN-Co | | | | nfiguration-Profile, | | | | RAT-Frequency | | | | -Selection-Priority. | +----------------------+----------------------+----------------------+ | N/A | Invoke Id | IWF shall set the | | | | Session Id value | | | | according to the | | | | Invoke Id value | | | | received from the | | | | MAP message and the | | | | recorded mapping | | | | between Invoke Id | | | | value and the | | | | Session Id value. | +----------------------+----------------------+----------------------+ | MSISDN AVP within | MSISDN | | | Subscription-Data | | | +----------------------+----------------------+----------------------+ | N/A | Category | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | Subscriber status | Subscriber Status | | | AVP within | | | | Subscription-Data | | | +----------------------+----------------------+----------------------+ | N/A | Bearer service List | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | Teleservice List | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | Forwarding | This parameter shall | | | information List | be ignored. | +----------------------+----------------------+----------------------+ | N/A | Call barring | This parameter shall | | | information List | be ignored. | +----------------------+----------------------+----------------------+ | N/A | CUG information List | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | SS-Data List | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | eMLPP Subscription | This parameter shall | | | Data | be ignored. | +----------------------+----------------------+----------------------+ | N/A | MC-Subscription Data | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | Operato | Operator Determined | | | r-Determined-Barring | Barring General data | | | AVP within | | | | Subscription-Data | | | | AVP | | | +----------------------+----------------------+----------------------+ | HPLMN-ODB AVP within | Operator Determined | | | Subscription-Data | Barring HPLMN data | | +----------------------+----------------------+----------------------+ | N/A | Roaming Restriction | This parameter shall | | | Due To Unsupported | be ignored | | | Feature | | +----------------------+----------------------+----------------------+ | Regional-Su | Regional | | | bscription-Zone-Code | Subscription Data | | | AVPs within | | | | Subscription-Data | | | +----------------------+----------------------+----------------------+ | N/A | VLR CAMEL | This parameter shall | | | Subscription Info | be ignored. | +----------------------+----------------------+----------------------+ | N/A | Voice Broadcast Data | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | Voice Group Call | This parameter shall | | | Data | be ignored. | +----------------------+----------------------+----------------------+ | Regional-Su | Network access mode | | | bscription-Zone-Code | | | | AVPs within | | | | Subscription-Data | | | +----------------------+----------------------+----------------------+ | FFS | GPRS Subscription | This parameter may | | | Data | needed if GPRS based | | | | subscriber data can | | | | be sent on S6a/S6d. | +----------------------+----------------------+----------------------+ | FFS: | Roaming Restricted | | | Acc | In SGSN Due To | | | ess-Restriction-Data | Unsupported Feature | | | AVP within | | | | Subscription-Data | | | +----------------------+----------------------+----------------------+ | N/A | North American Equal | This parameter shall | | | Access preferred | be ignored. | | | Carrier Id List | | +----------------------+----------------------+----------------------+ | N/A | SGSN CAMEL | This parameter shall | | | Subscription Info | be ignored. | +----------------------+----------------------+----------------------+ | N/A | LSA Information | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | IST Alert Timer | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | LMU Identifier | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | LCS Information | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | CS | This parameter shall | | | Allocation/Retention | be ignored. | | | priority | | +----------------------+----------------------+----------------------+ | N/A | Super-Charger | This parameter shall | | | Supported In HLR | be ignored. | +----------------------+----------------------+----------------------+ | 3GPP-Char | Subscribed Charging | | | ging-Characteristics | Characteristics | | | AVP within | | | | Subscription-Data | | | +----------------------+----------------------+----------------------+ | Acc | Access Restriction | | | ess-Restriction-Data | Data | | | AVP within | | | | Subscription-Data | | | +----------------------+----------------------+----------------------+
#### 6.8.3.2 Detailed IWF Behaviour
#### 6.8.3.3 New Requirements for S6a/S6d
## 6.9 Diameter-IDA Mapping to MAP-InsertSubscriberData Ack
### 6.9.1 Mapping for Scenario One
#### 6.9.1.1 AVP Mapping
The AVP mapping from Diameter-IDA to MAP-InsertSubscriberData Ack for scenario
one is listed as table below:
Table 6.9.3.1-1: AVP Mapping from Diameter-IDA to MAP- InsertSubscriberData
Ack for scenario one
+----------------------+----------------------+----------------------+ | MAP parameter | S6a/S6d Diameter AVP | Comments | | | within source IDA | | | within target | | | | InsertSubscriberData | | | | Ack | | | +----------------------+----------------------+----------------------+ | Invoke Id | N/A | IWF shall set the | | | | Invoke Id value | | | | according to the | | | | Session Id value | | | | received from the | | | | Diameter message and | | | | the recorded mapping | | | | between Invoke Id | | | | value and the | | | | Session Id value. | +----------------------+----------------------+----------------------+ | Bearer service List | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | Teleservice List | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | Operator Determined | N/A | This parameter shall | | Barring General data | | be absent. | +----------------------+----------------------+----------------------+ | SS-Code List | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | Regional | N/A | This parameter shall | | Subscription | | be absent. | | Response | | | +----------------------+----------------------+----------------------+ | Supported CAMEL | N/A | IWF shall set this | | Phases | | parameter that no | | | | CAMEL phase is | | | | supported. | +----------------------+----------------------+----------------------+ | Offered CAMEL 4 CSIs | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | User error | Result | | +----------------------+----------------------+----------------------+ | N/A | Supported Features | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | IDA-Flags | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+
#### 6.9.1.2 Detailed IWF Behaviour
#### 6.9.1.3 New Requirements for Pre Rel8 Gr
### 6.9.2 Mapping for Scenario Three
#### 6.9.2.1 AVP Mapping
The AVP mapping from Diameter-IDA to MAP-InsertSubscriberData Ack for scenario
three is listed as table below:
Table 6.9.3.1-1: AVP Mapping from Diameter-IDA to MAP- InsertSubscriberData
Ack for scenario three
+----------------------+----------------------+----------------------+ | MAP parameter | S6a/S6d Diameter AVP | Comments | | | within source IDA | | | within target | | | | InsertSubscriberData | | | | Ack | | | +----------------------+----------------------+----------------------+ | Invoke Id | N/A | IWF shall set the | | | | Invoke Id value | | | | according to the | | | | Session Id value | | | | received from the | | | | Diameter message and | | | | the recorded mapping | | | | between Invoke Id | | | | value and the | | | | Session Id value. | +----------------------+----------------------+----------------------+ | Bearer service List | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | Teleservice List | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | Operator Determined | N/A | This parameter shall | | Barring General data | | be absent. | +----------------------+----------------------+----------------------+ | SS-Code List | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | Regional | N/A | This parameter shall | | Subscription | | be absent. | | Response | | | +----------------------+----------------------+----------------------+ | Supported CAMEL | N/A | IWF shall set this | | Phases | | parameter that no | | | | CAMEL phase is | | | | supported. | +----------------------+----------------------+----------------------+ | Offered CAMEL 4 CSIs | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | User error | Result | | +----------------------+----------------------+----------------------+ | N/A | Supported Features | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | IDA-Flags | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+
#### 6.9.3.2 Detailed IWF Behaviour
#### 6.9.3.3 New Requirements for Rel8 Gr
### 6.9.3 Mapping for Scenario Four
#### 6.9.3.1 AVP Mapping
The AVP mapping from Diameter-IDA to MAP-InsertSubscriberData Ack for scenario
four is listed as table below:
Table 6.9.3.1-1: AVP Mapping from Diameter-IDA to MAP- InsertSubscriberData
Ack for scenario four
+----------------------+----------------------+----------------------+ | MAP parameter | S6a/S6d Diameter AVP | Comments | | | within source IDA | | | within target | | | | InsertSubscriberData | | | | Ack | | | +----------------------+----------------------+----------------------+ | Invoke Id | N/A | IWF shall set the | | | | Invoke Id value | | | | according to the | | | | Session Id value | | | | received from the | | | | Diameter message and | | | | the recorded mapping | | | | between Invoke Id | | | | value and the | | | | Session Id value. | +----------------------+----------------------+----------------------+ | Bearer service List | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | Teleservice List | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | Operator Determined | N/A | This parameter shall | | Barring General data | | be absent. | +----------------------+----------------------+----------------------+ | SS-Code List | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | Regional | N/A | This parameter shall | | Subscription | | be absent. | | Response | | | +----------------------+----------------------+----------------------+ | Supported CAMEL | N/A | IWF shall set this | | Phases | | parameter that no | | | | CAMEL phase is | | | | supported. | +----------------------+----------------------+----------------------+ | Offered CAMEL 4 CSIs | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | User error | Result | | +----------------------+----------------------+----------------------+ | TBD | Supported Features | | +----------------------+----------------------+----------------------+ | TBD | IDA-Flags | | +----------------------+----------------------+----------------------+
#### 6.9.3.2 Detailed IWF Behaviour
#### 6.9.3.3 New Requirements for Rel8 Gr
A new parameter which indicates IDA Flags is needed to be defined in MAP.
A new parameter which indicates Supported Feature of EPS is needed to be
defined in MAP.
## 6.10 MAP-InsertSubscriberData Ack Mapping to Diameter-IDA
### 6.10.1 Mapping for Scenario Four
#### 6.10.1.1 AVP Mapping
The AVP mapping from MAP-InsertSubscriberData Ack to Diameter-IDA for scenario
four is listed as table below:
Table 6.10.1.1-1: AVP Mapping from MAP- InsertSubscriberData Ack to Diameter-
IDA for scenario four
+----------------------+----------------------+----------------------+ | S6a/S6d Diameter AVP | MAP parameter | Comments | | within target IDA | | | | | within source | | | | InsertSubscriberData | | | | Ack | | +----------------------+----------------------+----------------------+ | Supported-Features | TBD | | +----------------------+----------------------+----------------------+ | Result | User error | | +----------------------+----------------------+----------------------+ | ULR Flags | TBD | | +----------------------+----------------------+----------------------+ | N/A | Invoke Id | IWF shall set the | | | | Session Id value | | | | according to the | | | | Invoke Id value | | | | received from the | | | | MAP message and the | | | | recorded mapping | | | | between Invoke Id | | | | value and the | | | | Session Id value. | +----------------------+----------------------+----------------------+ | N/A | Bearer service List | IWF shall ignore | | | | this AVP. | +----------------------+----------------------+----------------------+ | N/A | Teleservice List | IWF shall ignore | | | | this AVP. | +----------------------+----------------------+----------------------+ | N/A | Operator Determined | IWF shall ignore | | | Barring General data | this AVP. | +----------------------+----------------------+----------------------+ | N/A | SS-Code List | IWF shall ignore | | | | this AVP. | +----------------------+----------------------+----------------------+ | N/A | Regional | IWF shall ignore | | | Subscription | this AVP. | | | Response | | +----------------------+----------------------+----------------------+ | N/A | Supported CAMEL | IWF shall ignore | | | Phases | this AVP. | +----------------------+----------------------+----------------------+ | N/A | Offered CAMEL 4 CSIs | IWF shall ignore | | | | this AVP. | +----------------------+----------------------+----------------------+
#### 6.10.1.2 Detailed IWF Behaviour
#### 6.10.1.3 New Requirements for S6a/S6d
## 6.11 Diameter-DSR Mapping to MAP-DeleteSubscriberData
### 6.11.1 Mapping for Scenario Four
#### 6.11.1.1 AVP Mapping
The AVP mapping from Diameter-DSR to MAP-DeleteSubscriberData for scenario
four is listed as table below:
Table 6.11.1.1-1: AVP Mapping from Diameter-DSR to MAP- DeleteSubscriberData
for scenario four
+----------------------+----------------------+----------------------+ | MAP parameter | S6a/S6d Diameter AVP | Comments | | | within source DSR | | | within target | | | | D | | | | eletetSubscriberData | | | +----------------------+----------------------+----------------------+ | Invoke Id | N/A | IWF shall set the | | | | Invoke Id value | | | | according to the | | | | Session Id value | | | | received from the | | | | Diameter message and | | | | the recorded mapping | | | | between Invoke Id | | | | value and the | | | | Session Id value. | +----------------------+----------------------+----------------------+ | IMSI | User Name | | +----------------------+----------------------+----------------------+ | Basic service List | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | SS-Code List | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | Roaming Restriction | N/A | This parameter shall | | Due To Unsupported | | be absent. | | Feature | | | +----------------------+----------------------+----------------------+ | Camel Subscription | N/A | This parameter shall | | Info Withdraw | | be absent. | +----------------------+----------------------+----------------------+ | Specific CSI | N/A | This parameter shall | | Withdraw | | be absent. | +----------------------+----------------------+----------------------+ | Regional | N/A | This parameter shall | | Subscription Data | | be absent. | +----------------------+----------------------+----------------------+ | VBS Group Indication | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | VGCS Group | N/A | This parameter shall | | Indication | | be absent. | +----------------------+----------------------+----------------------+ | GPRS Subscription | N/A | This parameter shall | | Data Withdraw | | be absent. | +----------------------+----------------------+----------------------+ | Roaming Restricted | N/A | This parameter shall | | In SGSN Due To | | be absent. | | Unsupported Feature | | | +----------------------+----------------------+----------------------+ | LSA Information | N/A | This parameter shall | | Withdraw | | be absent. | +----------------------+----------------------+----------------------+ | IST Information | N/A | This parameter shall | | Withdraw | | be absent. | +----------------------+----------------------+----------------------+ | GMLC List Withdraw | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | Subscribed Charging | N/A | This parameter shall | | Characteristics | | be absent. | | Withdraw | | | +----------------------+----------------------+----------------------+ | TBD | Supported Features | | +----------------------+----------------------+----------------------+ | TBD | DSR Flags | | +----------------------+----------------------+----------------------+ | TBD | Context Identifier | | +----------------------+----------------------+----------------------+
#### 6.11.1.2 Detailed IWF Behaviour
#### 6.11.1.3 New Requirements for Rel8 Gr
A new parameter which indicates Supported Feature of EPS is needed to be
defined in MAP.
A new parameter which describes the DSR Flags is needed to be defined in MAP.
A new parameter which describes the Context Identifier is needed to be defined
in MAP.
## 6.12 MAP-DeleteSubscriberData Mapping to Diameter-DSR
### 6.12.1 Mapping for Scenario One
#### 6.12.1.1 AVP Mapping
The AVP mapping from MAP-DeleteSubscriberData to Diameter-DSR for scenario one
is listed as table below:
Table 6.12.1.1-1: AVP Mapping from MAP-DeleteSubscriberData to Diameter-DSR
for scenario one
+----------------------+----------------------+----------------------+ | S6a/S6d Diameter AVP | MAP parameter | Comments | | within target DSR | | | | | within source | | | | DeletSubscriberData | | +----------------------+----------------------+----------------------+ | User Name | IMSI | | +----------------------+----------------------+----------------------+ | Supported-Features | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | DSR Flags | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | Context Identifier | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | N/A | Invoke Id | IWF shall set the | | | | Session Id value | | | | according to the | | | | Invoke Id value | | | | received from the | | | | MAP message and the | | | | recorded mapping | | | | between Invoke Id | | | | value and the | | | | Session Id value. | +----------------------+----------------------+----------------------+ | N/A | Basic service List | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | SS-Code List | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | Roaming Restriction | This parameter shall | | | Due To Unsupported | be ignored. | | | Feature | | +----------------------+----------------------+----------------------+ | N/A | Camel Subscription | This parameter shall | | | Info Withdraw | be ignored. | +----------------------+----------------------+----------------------+ | N/A | Specific CSI | This parameter shall | | | Withdraw | be ignored. | +----------------------+----------------------+----------------------+ | N/A | Regional | This parameter shall | | | Subscription Data | be ignored. | +----------------------+----------------------+----------------------+ | N/A | VBS Group Indication | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | VGCS Group | This parameter shall | | | Indication | be ignored. | +----------------------+----------------------+----------------------+ | N/A | GPRS Subscription | This parameter shall | | | Data Withdraw | be ignored. | +----------------------+----------------------+----------------------+ | N/A | Roaming Restricted | This parameter shall | | | In SGSN Due To | be ignored. | | | Unsupported Feature | | +----------------------+----------------------+----------------------+ | N/A | LSA Information | This parameter shall | | | Withdraw | be ignored. | +----------------------+----------------------+----------------------+ | N/A | IST Information | This parameter shall | | | Withdraw | be ignored. | +----------------------+----------------------+----------------------+ | N/A | GMLC List Withdraw | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | Subscribed Charging | This parameter shall | | | Characteristics | be ignored. | | | Withdraw | | +----------------------+----------------------+----------------------+
#### 6.12.1.2 Detailed IWF Behaviour
#### 6.12.1.3 New Requirements for S6a/S6d
### 6.12.2 Mapping for Scenario Three
#### 6.12.2.1 AVP Mapping
The AVP mapping from MAP-DeleteSubscriberData to Diameter-DSR for scenario
three is listed as table below:
Table 6.12.2.1-1: AVP Mapping from MAP-DeleteSubscriberData to Diameter-DSR
for scenario three
+----------------------+----------------------+----------------------+ | S6a/S6d Diameter AVP | MAP parameter | Comments | | within target DSR | | | | | within source | | | | DeletSubscriberData | | +----------------------+----------------------+----------------------+ | User Name | IMSI | | +----------------------+----------------------+----------------------+ | Supported-Features | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | DSR Flags | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | Context Identifier | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | N/A | Invoke Id | IWF shall set the | | | | Session Id value | | | | according to the | | | | Invoke Id value | | | | received from the | | | | MAP message and the | | | | recorded mapping | | | | between Invoke Id | | | | value and the | | | | Session Id value. | +----------------------+----------------------+----------------------+ | N/A | Basic service List | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | SS-Code List | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | Roaming Restriction | This parameter shall | | | Due To Unsupported | be ignored. | | | Feature | | +----------------------+----------------------+----------------------+ | N/A | Camel Subscription | This parameter shall | | | Info Withdraw | be ignored. | +----------------------+----------------------+----------------------+ | N/A | Specific CSI | This parameter shall | | | Withdraw | be ignored. | +----------------------+----------------------+----------------------+ | N/A | Regional | This parameter shall | | | Subscription Data | be ignored. | +----------------------+----------------------+----------------------+ | N/A | VBS Group Indication | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | VGCS Group | This parameter shall | | | Indication | be ignored. | +----------------------+----------------------+----------------------+ | N/A | GPRS Subscription | This parameter shall | | | Data Withdraw | be ignored. | +----------------------+----------------------+----------------------+ | N/A | Roaming Restricted | This parameter shall | | | In SGSN Due To | be ignored. | | | Unsupported Feature | | +----------------------+----------------------+----------------------+ | N/A | LSA Information | This parameter shall | | | Withdraw | be ignored. | +----------------------+----------------------+----------------------+ | N/A | IST Information | This parameter shall | | | Withdraw | be ignored. | +----------------------+----------------------+----------------------+ | N/A | GMLC List Withdraw | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | Subscribed Charging | This parameter shall | | | Characteristics | be ignored. | | | Withdraw | | +----------------------+----------------------+----------------------+
#### 6.12.2.2 Detailed IWF Behaviour
#### 6.12.2.3 New Requirements for S6a/S6d
### 6.12.3 Mapping for Scenario Four
#### 6.12.3.1 AVP Mapping
The AVP mapping from MAP-DeleteSubscriberData to Diameter-DSR for scenario
four is listed as table below:
Table 6.12.3.1-1: AVP Mapping from MAP-DeleteSubscriberData to Diameter-DSR
for scenario four
+----------------------+----------------------+----------------------+ | S6a/S6d Diameter AVP | MAP parameter | Comments | | within target DSR | | | | | within source | | | | DeletSubscriberData | | +----------------------+----------------------+----------------------+ | User Name | IMSI | | +----------------------+----------------------+----------------------+ | Supported-Features | TBD | | +----------------------+----------------------+----------------------+ | DSR Flags | TBD | | +----------------------+----------------------+----------------------+ | Context Identifier | TBD | | +----------------------+----------------------+----------------------+ | N/A | Invoke Id | IWF shall set the | | | | Session Id value | | | | according to the | | | | Invoke Id value | | | | received from the | | | | MAP message and the | | | | recorded mapping | | | | between Invoke Id | | | | value and the | | | | Session Id value. | +----------------------+----------------------+----------------------+ | N/A | Basic service List | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | SS-Code List | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | Roaming Restriction | This parameter shall | | | Due To Unsupported | be ignored. | | | Feature | | +----------------------+----------------------+----------------------+ | N/A | Camel Subscription | This parameter shall | | | Info Withdraw | be ignored. | +----------------------+----------------------+----------------------+ | N/A | Specific CSI | This parameter shall | | | Withdraw | be ignored. | +----------------------+----------------------+----------------------+ | N/A | Regional | This parameter shall | | | Subscription Data | be ignored. | +----------------------+----------------------+----------------------+ | N/A | VBS Group Indication | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | VGCS Group | This parameter shall | | | Indication | be ignored. | +----------------------+----------------------+----------------------+ | N/A | GPRS Subscription | This parameter shall | | | Data Withdraw | be ignored. | +----------------------+----------------------+----------------------+ | N/A | Roaming Restricted | This parameter shall | | | In SGSN Due To | be ignored. | | | Unsupported Feature | | +----------------------+----------------------+----------------------+ | N/A | LSA Information | This parameter shall | | | Withdraw | be ignored. | +----------------------+----------------------+----------------------+ | N/A | IST Information | This parameter shall | | | Withdraw | be ignored. | +----------------------+----------------------+----------------------+ | N/A | GMLC List Withdraw | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | Subscribed Charging | This parameter shall | | | Characteristics | be ignored. | | | Withdraw | | +----------------------+----------------------+----------------------+
#### 6.12.3.2 Detailed IWF Behaviour
#### 6.12.3.3 New Requirements for S6a/S6d
## 6.13 Diameter-DSA Mapping to MAP-DeleteSubscriberData Ack
### 6.13.1 Mapping for Scenario One
#### 6.13.1.1 AVP Mapping
The AVP mapping from Diameter-DSA to MAP-DeleteSubscriberData Ack for scenario
one is listed as table below:
Table 6.13.1.1-1: AVP Mapping from Diameter-DSA to MAP- DeleteSubscriberData
Ack for scenario one
+----------------------+----------------------+----------------------+ | MAP parameter | S6a/S6d Diameter AVP | Comments | | | within source DSA | | | within target | | | | DeleteSubscriberData | | | | Ack | | | +----------------------+----------------------+----------------------+ | Invoke Id | N/A | IWF shall set the | | | | Invoke Id value | | | | according to the | | | | Session Id value | | | | received from the | | | | Diameter message and | | | | the recorded mapping | | | | between Invoke Id | | | | value and the | | | | Session Id value. | +----------------------+----------------------+----------------------+ | Regional | N/A | This parameter shall | | Subscription | | be absent. | | Response | | | +----------------------+----------------------+----------------------+ | User error | Result | | +----------------------+----------------------+----------------------+ | N/A | Supported Features | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | DSA-Flags | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+
#### 6.13.1.2 Detailed IWF Behaviour
#### 6.13.1.3 New Requirements for Pre Rel8 Gr
### 6.13.2 Mapping for Scenario Three
#### 6.13.2.1 AVP Mapping
The AVP mapping from Diameter-DSA to MAP-DeleteSubscriberData Ack for scenario
three is listed as table below:
Table 6.13.2.1-1: AVP Mapping from Diameter-DSA to MAP- DeleteSubscriberData
Ack for scenario three
+----------------------+----------------------+----------------------+ | MAP parameter | S6a/S6d Diameter AVP | Comments | | | within source DSA | | | within target | | | | DeleteSubscriberData | | | | Ack | | | +----------------------+----------------------+----------------------+ | Invoke Id | N/A | IWF shall set the | | | | Invoke Id value | | | | according to the | | | | Session Id value | | | | received from the | | | | Diameter message and | | | | the recorded mapping | | | | between Invoke Id | | | | value and the | | | | Session Id value. | +----------------------+----------------------+----------------------+ | Regional | N/A | This parameter shall | | Subscription | | be absent. | | Response | | | +----------------------+----------------------+----------------------+ | User error | Result | | +----------------------+----------------------+----------------------+ | N/A | Supported Features | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | DSA-Flags | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+
#### 6.13.2.2 Detailed IWF Behaviour
#### 6.13.2.3 New Requirements for Rel8 Gr
### 6.13.3 Mapping for Scenario Four
#### 6.13.3.1 AVP Mapping
The AVP mapping from Diameter-DSA to MAP-DeleteSubscriberData Ack for scenario
four is listed as table below:
Table 6.13.3.1-1: AVP Mapping from Diameter-DSA to MAP- DeleteSubscriberData
Ack for scenario four
+----------------------+----------------------+----------------------+ | MAP parameter | S6a/S6d Diameter AVP | Comments | | | within source DSA | | | within target | | | | DeleteSubscriberData | | | | Ack | | | +----------------------+----------------------+----------------------+ | Invoke Id | N/A | IWF shall set the | | | | Invoke Id value | | | | according to the | | | | Session Id value | | | | received from the | | | | Diameter message and | | | | the recorded mapping | | | | between Invoke Id | | | | value and the | | | | Session Id value. | +----------------------+----------------------+----------------------+ | Regional | N/A | This parameter shall | | Subscription | | be absent. | | Response | | | +----------------------+----------------------+----------------------+ | User error | Result | | +----------------------+----------------------+----------------------+ | TBD | Supported Features | | +----------------------+----------------------+----------------------+ | TBD | DSA-Flags | | +----------------------+----------------------+----------------------+
#### 6.13.3.2 Detailed IWF Behaviour
#### 6.13.3.3 New Requirements for Rel8 Gr
A new parameter which indicates DSA Flags is needed to be defined in MAP.
A new parameter which indicates Supported Feature of EPS is needed to be
defined in MAP.
## 6.14 MAP-DeleteSubscriberData Ack Mapping to Diameter-DSA
### 6.14.1 Mapping for Scenario Four
#### 6.14.1.1 AVP Mapping
The AVP mapping from MAP-DeleteSubscriberData Ack to Diameter-DSA for scenario
four is listed as table below:
Table 6.14.1.1-1: AVP Mapping from MAP- DeleteSubscriberData Ack to Diameter-
DSA for scenario four
+----------------------+----------------------+----------------------+ | S6a/S6d Diameter AVP | MAP parameter | Comments | | within target DSA | | | | | within source | | | | DeleteSubscriberData | | | | Ack | | +----------------------+----------------------+----------------------+ | Supported-Features | TBD | | +----------------------+----------------------+----------------------+ | Result | User error | | +----------------------+----------------------+----------------------+ | DSA Flags | TBD | | +----------------------+----------------------+----------------------+ | N/A | Invoke Id | IWF shall set the | | | | Session Id value | | | | according to the | | | | Invoke Id value | | | | received from the | | | | MAP message and the | | | | recorded mapping | | | | between Invoke Id | | | | value and the | | | | Session Id value. | +----------------------+----------------------+----------------------+ | N/A | Regional | IWF shall ignore | | | Subscription | this AVP. | | | Response | | +----------------------+----------------------+----------------------+
#### 6.14.1.2 Detailed IWF Behaviour
#### 6.14.1.3 New Requirements for S6a/S6d
## 6.15 Diameter-PUR Mapping to MAP-PurgeMS
### 6.15.1 Mapping for Scenario One
#### 6.15.1.1 AVP Mapping
The AVP mapping from Diameter-PUR to MAP-PurgeMS for scenario one is listed as
table below:
Table 6.15.1.1-1: AVP Mapping from Diameter-PUR to MAP- PurgeMS for scenario
one
+----------------------+----------------------+----------------------+ | MAP parameter | S6a/S6d Diameter AVP | Comments | | | within source PUR | | | within target | | | | PurgeMS | | | +----------------------+----------------------+----------------------+ | Invoke Id | N/A | IWF shall set the | | | | Invoke Id value | | | | according to the | | | | Session Id value | | | | received from the | | | | Diameter message and | | | | the recorded mapping | | | | between Invoke Id | | | | value and the | | | | Session Id value. | +----------------------+----------------------+----------------------+ | IMSI | User-Name | | +----------------------+----------------------+----------------------+ | VLR number | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | SGSN number | N/A | See section 4A.2 for | | | | detail. | +----------------------+----------------------+----------------------+ | N/A | Supported Features | | +----------------------+----------------------+----------------------+
#### 6.15.1.2 Detailed IWF Behaviour
#### 6.15.1.3 New Requirements for Pre Rel8 Gr
### 6.15.2 Mapping for Scenario Three
#### 6.15.2.1 AVP Mapping
The AVP mapping from Diameter-PUR to MAP-PurgeMS for scenario three is listed
as table below:
Table 6.15.2.1-1: AVP Mapping from Diameter-PUR to MAP- PurgeMS for scenario
three
+----------------------+----------------------+----------------------+ | MAP parameter | S6a/S6d Diameter AVP | Comments | | | within source PUR | | | within target | | | | PurgeMS | | | +----------------------+----------------------+----------------------+ | Invoke Id | N/A | IWF shall set the | | | | Invoke Id value | | | | according to the | | | | Session Id value | | | | received from the | | | | Diameter message and | | | | the recorded mapping | | | | between Invoke Id | | | | value and the | | | | Session Id value. | +----------------------+----------------------+----------------------+ | IMSI | User-Name | | +----------------------+----------------------+----------------------+ | VLR number | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | SGSN number | N/A | See section 4A.2 for | | | | detail. | +----------------------+----------------------+----------------------+ | N/A | Supported Features | | +----------------------+----------------------+----------------------+
#### 6.15.2.2 Detailed IWF Behaviour
#### 6.15.2.3 New Requirements for Rel8 Gr
### 6.15.3 Mapping for Scenario Four
#### 6.15.3.1 AVP Mapping
The AVP mapping from Diameter-PUR to MAP-PurgeMS for scenario four is listed
as table below:
Table 6.15.3.1-1: AVP Mapping from Diameter-PUR to MAP- PurgeMS for scenario
four
+----------------------+----------------------+----------------------+ | MAP parameter | S6a/S6d Diameter AVP | Comments | | | within source PUR | | | within target | | | | PurgeMS | | | +----------------------+----------------------+----------------------+ | Invoke Id | N/A | IWF shall set the | | | | Invoke Id value | | | | according to the | | | | Session Id value | | | | received from the | | | | Diameter message and | | | | the recorded mapping | | | | between Invoke Id | | | | value and the | | | | Session Id value. | +----------------------+----------------------+----------------------+ | IMSI | User-Name | | +----------------------+----------------------+----------------------+ | VLR number | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | SGSN number | N/A | See section 4A.2 for | | | | detail. | +----------------------+----------------------+----------------------+ | TBD | Supported Features | | +----------------------+----------------------+----------------------+
#### 6.15.3.2 Detailed IWF Behaviour
#### 6.15.3.3 New Requirements for Rel8 Gr
A new parameter which indicates Supported Feature of EPS is needed to be
defined in MAP.
## 6.16 MAP-PurgeMS Mapping to Diameter-PUR
### 6.16.1 Mapping for Scenario Four
#### 6.16.1.1 AVP Mapping
The AVP mapping from MAP- PurgeMS to Diameter-PUR for scenario four is listed
as table below:
Table 6.16.1.1-1: AVP Mapping from MAP- PurgeMS to Diameter-PUR for scenario
four
+----------------------+----------------------+----------------------+ | S6a/S6d Diameter AVP | MAP parameter | Comments | | within target PUR | | | | | within source | | | | PurgeMS | | +----------------------+----------------------+----------------------+ | Supported-Features | TBD | | +----------------------+----------------------+----------------------+ | User-Name | IMSI | | +----------------------+----------------------+----------------------+ | N/A | Invoke Id | IWF shall set the | | | | Session Id value | | | | according to the | | | | Invoke Id value | | | | received from the | | | | MAP message and the | | | | recorded mapping | | | | between Invoke Id | | | | value and the | | | | Session Id value. | +----------------------+----------------------+----------------------+ | N/A | VLR number | IWF shall ignore | | | | this AVP. | +----------------------+----------------------+----------------------+ | N/A | SGSN number | IWF shall record | | | | this AVP for further | | | | SS7 message sent | | | | back to the same | | | | peer. | +----------------------+----------------------+----------------------+
#### 6.16.1.2 Detailed IWF Behaviour
#### 6.16.1.3 New Requirements for S6a/S6d
## 6.17 Diameter-PUA Mapping to MAP-PurgeMS Ack
### 6.17.1 Mapping for Scenario Four
#### 6.17.1.1 AVP Mapping
The AVP mapping from Diameter-PUA to MAP- PurgeMS Ack for scenario four is
listed as table below:
Table 6.17.1.1-1: AVP Mapping from Diameter-PUA to MAP- PurgeMS Ack for
scenario four
+----------------------+----------------------+----------------------+ | MAP parameter | S6a/S6d Diameter AVP | Comments | | | within sourcePUA | | | within target | | | | PurgeMS Ack | | | +----------------------+----------------------+----------------------+ | Invoke Id | N/A | IWF shall set the | | | | Invoke Id value | | | | according to the | | | | Session Id value | | | | received from the | | | | Diameter message and | | | | the recorded mapping | | | | between Invoke Id | | | | value and the | | | | Session Id value. | +----------------------+----------------------+----------------------+ | Freeze TMSI | User Name | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | Freeze P-TMSI | FFS | FFS: M-TMSI is | | | | needed for S6a/S6d. | +----------------------+----------------------+----------------------+ | User error | Result | | +----------------------+----------------------+----------------------+ | TBD | Supported Features | | +----------------------+----------------------+----------------------+ | TBD | PUA-Flags | | +----------------------+----------------------+----------------------+
#### 6.17.1.2 Detailed IWF Behaviour
#### 6.17.1.3 New Requirements for Rel8 Gr
A new parameter which indicates Supported Feature of EPS is needed to be
defined in MAP.
A new parameter which describes the PUA Flags is needed to be defined in MAP.
A new parameter which describes the Result is needed to be defined in MAP.
## 6.18 MAP-PurgeMS Ack Mapping to Diameter-PUA
### 6.18.1 Mapping for Scenario One
#### 6.18.1.1 AVP Mapping
The AVP mapping from MAP- PurgeMS Ack to Diameter-PUA for scenario one is
listed as table below:
Table 6.18.1.1-1: AVP Mapping from MAP- PurgeMS Ack to Diameter-PUA for
scenario one
+----------------------+----------------------+----------------------+ | S6a/S6d Diameter AVP | MAP parameter | Comments | | within target PUA | | | | | within source | | | | PurgeMS Ack | | +----------------------+----------------------+----------------------+ | Supported-Features | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | PUA-Flags | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | Result | User error | | +----------------------+----------------------+----------------------+ | N/A | Invoke Id | IWF shall set the | | | | Session Id value | | | | according to the | | | | Invoke Id value | | | | received from the | | | | MAP message and the | | | | recorded mapping | | | | between Invoke Id | | | | value and the | | | | Session Id value. | +----------------------+----------------------+----------------------+ | N/A | Freeze TMSI | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | FFS | Freeze P-TMSI | FFS: M-TMSI is | | | | needed for S6a/S6d. | +----------------------+----------------------+----------------------+
#### 6.18.1.2 Detailed IWF Behaviour
#### 6.18.1.3 New Requirements for S6a/S6d
### 6.18.2 Mapping for Scenario Three
#### 6.18.2.1 AVP Mapping
The AVP mapping from MAP- PurgeMS Ack to Diameter-PUA for scenario three is
listed as table below:
Table 6.18.2.1-1: AVP Mapping from MAP- PurgeMS Ack to Diameter-PUA for
scenario three
+----------------------+----------------------+----------------------+ | S6a/S6d Diameter AVP | MAP parameter | Comments | | within target PUA | | | | | within source | | | | PurgeMS Ack | | +----------------------+----------------------+----------------------+ | Supported-Features | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | PUA-Flags | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | Result | User error | | +----------------------+----------------------+----------------------+ | N/A | Invoke Id | IWF shall set the | | | | Session Id value | | | | according to the | | | | Invoke Id value | | | | received from the | | | | MAP message and the | | | | recorded mapping | | | | between Invoke Id | | | | value and the | | | | Session Id value. | +----------------------+----------------------+----------------------+ | N/A | Freeze TMSI | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | FFS | Freeze P-TMSI | FFS: M-TMSI is | | | | needed for S6a/S6d. | +----------------------+----------------------+----------------------+
#### 6.18.2.2 Detailed IWF Behaviour
#### 6.18.2.3 New Requirements for S6a/S6d
### 6.18.3 Mapping for Scenario Four
#### 6.18.3.1 AVP Mapping
The AVP mapping from MAP- PurgeMS Ack to Diameter-PUA for scenario four is
listed as table below:
Table 6.18.3.1-1: AVP Mapping from MAP- PurgeMS Ack to Diameter-PUA for
scenario four
+----------------------+----------------------+----------------------+ | S6a/S6d Diameter AVP | MAP parameter | Comments | | within target PUA | | | | | within source | | | | PurgeMS Ack | | +----------------------+----------------------+----------------------+ | Supported-Features | TBD | | +----------------------+----------------------+----------------------+ | PUA-Flags | TBD | | +----------------------+----------------------+----------------------+ | Result | User error | | +----------------------+----------------------+----------------------+ | N/A | Invoke Id | IWF shall set the | | | | Session Id value | | | | according to the | | | | Invoke Id value | | | | received from the | | | | MAP message and the | | | | recorded mapping | | | | between Invoke Id | | | | value and the | | | | Session Id value. | +----------------------+----------------------+----------------------+ | N/A | Freeze TMSI | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | FFS | Freeze P-TMSI | FFS: M-TMSI is | | | | needed for S6a/S6d. | +----------------------+----------------------+----------------------+
#### 6.18.3.2 Detailed IWF Behaviour
#### 6.18.3.3 New Requirements for S6a/S6d
## 6.19 Diameter-AIR Mapping to MAP-SendAuthenticationInfo
### 6.19.1 Mapping for Scenario One
#### 6.19.1.1 AVP Mapping
The AVP mapping from Diameter-AIR to MAP-SendAuthenticationInfo for scenario
one is listed as table below:
Table 6.19.1.1-1: AVP Mapping from Diameter-AIR to MAP- SendAuthenticationInfo
for scenario one
+----------------------+----------------------+----------------------+ | MAP parameter | S6a/S6d Diameter AVP | Comments | | | within source AIR | | | within target | | | | Se | | | | ndAuthenticationInfo | | | +----------------------+----------------------+----------------------+ | Invoke Id | N/A | IWF shall set the | | | | Invoke Id value | | | | according to the | | | | Session Id value | | | | received from the | | | | Diameter message and | | | | the recorded mapping | | | | between Invoke Id | | | | value and the | | | | Session Id value. | +----------------------+----------------------+----------------------+ | IMSI | User-Name | | +----------------------+----------------------+----------------------+ | Number of requested | Requested UTRAN | . | | vectors | Authentication Info; | | | | | | | | Requested GERAN | | | | Authentication Info; | | +----------------------+----------------------+----------------------+ | Requesting node type | Requesting Node Type | | +----------------------+----------------------+----------------------+ | Re-synchronisation | Requested UTRAN | | | Info | Authentication Info; | | | | | | | | Requested GERAN | | | | Authentication Info; | | +----------------------+----------------------+----------------------+ | Segmentation | N/A | This parameter shall | | prohibited indicator | | be absent. | +----------------------+----------------------+----------------------+ | Immediate response | Requested UTRAN | | | preferred indicator | Authentication Info; | | | | | | | | Requested GERAN | | | | Authentication Info; | | +----------------------+----------------------+----------------------+ | Requesting PLMN ID | Visited PLMN ID | | +----------------------+----------------------+----------------------+ | TBD | Supported Features | | +----------------------+----------------------+----------------------+ | TBD | Requested E-UTRAN | | | | Authentication Info | | +----------------------+----------------------+----------------------+
#### 6.19.1.2 Detailed IWF Behaviour
#### 6.19.1.3 New Requirements for Pre Rel8 Gr
### 6.19.2 Mapping for Scenario Three
#### 6.19.2.1 AVP Mapping
The AVP mapping from Diameter-AIR to MAP- SendAuthenticationInfo for scenario
three is listed as table below:
Table 6.19.2.1-1: AVP Mapping from Diameter-AIR to MAP- SendAuthenticationInfo
for scenario three
+----------------------+----------------------+----------------------+ | MAP parameter | S6a/S6d Diameter AVP | Comments | | | within source AIR | | | within target | | | | Se | | | | ndAuthenticationInfo | | | +----------------------+----------------------+----------------------+ | Invoke Id | N/A | IWF shall set the | | | | Invoke Id value | | | | according to the | | | | Session Id value | | | | received from the | | | | Diameter message and | | | | the recorded mapping | | | | between Invoke Id | | | | value and the | | | | Session Id value. | +----------------------+----------------------+----------------------+ | IMSI | User-Name | | +----------------------+----------------------+----------------------+ | Number of requested | Requested UTRAN | . | | vectors | Authentication Info; | | | | | | | | Requested GERAN | | | | Authentication Info; | | +----------------------+----------------------+----------------------+ | Requesting node type | Requesting Node Type | | +----------------------+----------------------+----------------------+ | Re-synchronisation | Requested UTRAN | | | Info | Authentication Info; | | | | | | | | Requested GERAN | | | | Authentication Info; | | +----------------------+----------------------+----------------------+ | Segmentation | N/A | This parameter shall | | prohibited indicator | | be absent. | +----------------------+----------------------+----------------------+ | Immediate response | Requested UTRAN | | | preferred indicator | Authentication Info; | | | | | | | | Requested GERAN | | | | Authentication Info; | | +----------------------+----------------------+----------------------+ | Requesting PLMN ID | Visited PLMN ID | | +----------------------+----------------------+----------------------+ | TBD | Supported Features | | +----------------------+----------------------+----------------------+ | TBD | Requested E-UTRAN | | | | Authentication Info | | +----------------------+----------------------+----------------------+
#### 6.19.2.2 Detailed IWF Behaviour
#### 6.19.2.3 New Requirements for Rel8 Gr
### 6.19.3 Mapping for Scenario Four
#### 6.19.3.1 AVP Mapping
The AVP mapping from Diameter-AIR to MAP- SendAuthenticationInfo for scenario
four is listed as table below:
Table 6.19.3.1-1: AVP Mapping from Diameter-AIR to MAP- SendAuthenticationInfo
for scenario four
+----------------------+----------------------+----------------------+ | MAP parameter | S6a/S6d Diameter AVP | Comments | | | within source AIR | | | within target | | | | Se | | | | ndAuthenticationInfo | | | +----------------------+----------------------+----------------------+ | Invoke Id | N/A | IWF shall set the | | | | Invoke Id value | | | | according to the | | | | Session Id value | | | | received from the | | | | Diameter message and | | | | the recorded mapping | | | | between Invoke Id | | | | value and the | | | | Session Id value. | +----------------------+----------------------+----------------------+ | IMSI | User-Name | | +----------------------+----------------------+----------------------+ | Number of requested | Requested UTRAN | . | | vectors | Authentication Info; | | | | | | | | Requested GERAN | | | | Authentication Info; | | +----------------------+----------------------+----------------------+ | Requesting node type | Requesting Node Type | | +----------------------+----------------------+----------------------+ | Re-synchronisation | Requested UTRAN | | | Info | Authentication Info; | | | | | | | | Requested GERAN | | | | Authentication Info; | | +----------------------+----------------------+----------------------+ | Segmentation | N/A | This parameter shall | | prohibited indicator | | be absent. | +----------------------+----------------------+----------------------+ | Immediate response | Requested UTRAN | | | preferred indicator | Authentication Info; | | | | | | | | Requested GERAN | | | | Authentication Info; | | +----------------------+----------------------+----------------------+ | Requesting PLMN ID | Visited PLMN ID | | +----------------------+----------------------+----------------------+ | TBD | Supported Features | | +----------------------+----------------------+----------------------+ | TBD | Requested E-UTRAN | | | | Authentication Info | | +----------------------+----------------------+----------------------+
#### 6.19.3.2 Detailed IWF Behaviour
#### 6.19.3.3 New Requirements for Rel8 Gr
A new code point For E-UTRAN is needed to be defined for MAP- Requesting node
type.
A new parameter which indicates Supported Feature of EPS is needed to be
defined in MAP.
A new parameter which indicates Requested E-UTRAN Authentication Info is
needed to be defined in MAP.
## 6.20 MAP-SendAuthenticationInfo Mapping to Diameter-AIR
### 6.20.1 Mapping for Scenario Four
#### 6.20.1.1 AVP Mapping
The AVP mapping from MAP- SendAuthenticationInfo to Diameter-AIR for scenario
four is listed as table below:
Table 6.20.1.1-1: AVP Mapping from MAP- SendAuthenticationInfo to Diameter-AIR
for scenario four
+----------------------+----------------------+----------------------+ | S6a/S6d Diameter AVP | MAP parameter | Comments | | within target AIR | | | | | within source | | | | Se | | | | ndAuthenticationInfo | | +----------------------+----------------------+----------------------+ | Supported-Features | TBD | | +----------------------+----------------------+----------------------+ | User-Name | IMSI | | +----------------------+----------------------+----------------------+ | Requested UTRAN | Number of requested | | | Authentication Info | vectors; | | | | | | | | Re-synchronisation | | | | Info; | | | | | | | | Immediate response | | | | preferred indicator; | | +----------------------+----------------------+----------------------+ | Requested GERAN | Number of requested | | | Authentication Info | vectors; | | | | | | | | Re-synchronisation | | | | Info; | | | | | | | | Immediate response | | | | preferred indicator; | | +----------------------+----------------------+----------------------+ | Requested E-UTRAN | TBD | | | Authentication Info | | | +----------------------+----------------------+----------------------+ | Requesting Node Type | Requesting node type | | +----------------------+----------------------+----------------------+ | Visited PLMN ID | Requesting PLMN ID | | +----------------------+----------------------+----------------------+ | N/A | Invoke Id | IWF shall set the | | | | Session Id value | | | | according to the | | | | Invoke Id value | | | | received from the | | | | MAP message and the | | | | recorded mapping | | | | between Invoke Id | | | | value and the | | | | Session Id value. | +----------------------+----------------------+----------------------+ | N/A | VLR number | IWF shall ignore | | | | this AVP. | +----------------------+----------------------+----------------------+ | N/A | SGSN number | IWF shall record | | | | this AVP for further | | | | SS7 message sent | | | | back to the same | | | | peer. | +----------------------+----------------------+----------------------+
#### 6.20.1.2 Detailed IWF Behaviour
#### 6.20.1.3 New Requirements for S6a/S6d
## 6.21 Diameter-AIA Mapping to MAP-SendAuthenticationInfo Ack
### 6.21.1 Mapping for Scenario Four
#### 6.21.1.1 AVP Mapping
The AVP mapping from Diameter-AIA to MAP- SendAuthenticationInfo Ack for
scenario four is listed as table below:
Table 6.21.1.1-1: AVP Mapping from Diameter-AIA to MAP- SendAuthenticationInfo
Ack for scenario four
+----------------------+----------------------+----------------------+ | MAP parameter | S6a/S6d Diameter AVP | Comments | | | within sourceAIA | | | within target | | | | Se | | | | ndAuthenticationInfo | | | | Ack | | | +----------------------+----------------------+----------------------+ | Invoke Id | N/A | IWF shall set the | | | | Invoke Id value | | | | according to the | | | | Session Id value | | | | received from the | | | | Diameter message and | | | | the recorded mapping | | | | between Invoke Id | | | | value and the | | | | Session Id value. | +----------------------+----------------------+----------------------+ | A | Authentication Info | | | uthenticationSetList | | | +----------------------+----------------------+----------------------+ | User error | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | TBD | Supported Features | | +----------------------+----------------------+----------------------+ | TBD | Result | | +----------------------+----------------------+----------------------+
#### 6.21.1.2 Detailed IWF Behaviour
#### 6.21.1.3 New Requirements for Rel8 Gr
A new subset parameter For EPS-Vector is needed to be defined for MAP-
AuthenticationSetList.
A new parameter which indicates Supported Feature of EPS is needed to be
defined in MAP.
A new parameter which describes the Result is needed to be defined in MAP.
## 6.22 MAP-SendAuthenticationInfo Ack Mapping to Diameter-AIA
### 6.22.1 Mapping for Scenario One
#### 6.22.1.1 AVP Mapping
The AVP mapping from MAP- SendAuthenticationInfo Ack to Diameter-AIA for
scenario one is listed as table below:
Table 6.22.1.1-1: AVP Mapping from MAP- SendAuthenticationInfo Ack to
Diameter-AIA for scenario one
+----------------------+----------------------+----------------------+ | S6a/S6d Diameter AVP | MAP parameter | Comments | | within target AIA | | | | | within source | | | | Se | | | | ndAuthenticationInfo | | | | Ack | | +----------------------+----------------------+----------------------+ | Supported-Features | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | Authentication Info | A | | | | uthenticationSetList | | +----------------------+----------------------+----------------------+ | Result | User error | | +----------------------+----------------------+----------------------+ | N/A | Invoke Id | IWF shall set the | | | | Session Id value | | | | according to the | | | | Invoke Id value | | | | received from the | | | | MAP message and the | | | | recorded mapping | | | | between Invoke Id | | | | value and the | | | | Session Id value. | +----------------------+----------------------+----------------------+ | FFS | A | This parameter shall | | | uthenticationSetList | be ignored. | +----------------------+----------------------+----------------------+
#### 6.22.1.2 Detailed IWF Behaviour
#### 6.22.1.3 New Requirements for S6a/S6d
### 6.22.2 Mapping for Scenario Three
#### 6.22.2.1 AVP Mapping
The AVP mapping from MAP- SendAuthenticationInfo Ack to Diameter-AIA for
scenario three is listed as table below:
Table 6.22.2.1-1: AVP Mapping from MAP- SendAuthenticationInfo Ack to
Diameter-AIA for scenario three
+----------------------+----------------------+----------------------+ | S6a/S6d Diameter AVP | MAP parameter | Comments | | within target AIA | | | | | within source | | | | Se | | | | ndAuthenticationInfo | | | | Ack | | +----------------------+----------------------+----------------------+ | Supported-Features | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | Authentication Info | A | | | | uthenticationSetList | | +----------------------+----------------------+----------------------+ | Result | User error | | +----------------------+----------------------+----------------------+ | N/A | Invoke Id | IWF shall set the | | | | Session Id value | | | | according to the | | | | Invoke Id value | | | | received from the | | | | MAP message and the | | | | recorded mapping | | | | between Invoke Id | | | | value and the | | | | Session Id value. | +----------------------+----------------------+----------------------+ | FFS | A | This parameter shall | | | uthenticationSetList | be ignored. | +----------------------+----------------------+----------------------+
#### 6.22.2.2 Detailed IWF Behaviour
#### 6.22.2.3 New Requirements for S6a/S6d
### 6.22.3 Mapping for Scenario Four
#### 6.22.3.1 AVP Mapping
The AVP mapping from MAP- SendAuthenticationInfo Ack to Diameter-AIA for
scenario four is listed as table below:
Table 6.22.3.1-1: AVP Mapping from MAP- SendAuthenticationInfo Ack to
Diameter-AIA for scenario four
+----------------------+----------------------+----------------------+ | S6a/S6d Diameter AVP | MAP parameter | Comments | | within target AIA | | | | | within source | | | | Se | | | | ndAuthenticationInfo | | | | Ack | | +----------------------+----------------------+----------------------+ | Supported-Features | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | Authentication Info | A | | | | uthenticationSetList | | +----------------------+----------------------+----------------------+ | Result | User error | | +----------------------+----------------------+----------------------+ | N/A | Invoke Id | IWF shall set the | | | | Session Id value | | | | according to the | | | | Invoke Id value | | | | received from the | | | | MAP message and the | | | | recorded mapping | | | | between Invoke Id | | | | value and the | | | | Session Id value. | +----------------------+----------------------+----------------------+
#### 6.22.3.2 Detailed IWF Behaviour
#### 6.22.3.3 New Requirements for S6a/S6d
## 6.23 Diameter-CLR Mapping to MAP-CancelLocation
### 6.23.1 Mapping for Scenario Four
#### 6.23.1.1 AVP Mapping
The AVP mapping from Diameter-CLR to MAP-CancelLocation for scenario four is
listed as table below:
Table 6.23.1.1-1: AVP Mapping from Diameter-CLR to MAP- CancelLocation for
scenario four
+----------------------+----------------------+----------------------+ | MAP parameter | S6a/S6d Diameter AVP | Comments | | | within source CLR | | | within target | | | | CancelLocation | | | +----------------------+----------------------+----------------------+ | Invoke Id | N/A | IWF shall set the | | | | Invoke Id value | | | | according to the | | | | Session Id value | | | | received from the | | | | Diameter message and | | | | the recorded mapping | | | | between Invoke Id | | | | value and the | | | | Session Id value. | +----------------------+----------------------+----------------------+ | IMSI | User Name | | +----------------------+----------------------+----------------------+ | LMSI | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | Cancellation Type | Cancellation Type | | +----------------------+----------------------+----------------------+ | TBD | Supported Features | | +----------------------+----------------------+----------------------+
#### 6.23.1.2 Detailed IWF Behaviour
#### 6.23.1.3 New Requirements for Rel8 Gr
A new parameter which indicates Supported Feature of EPS is needed to be
defined in MAP.
## 6.24 MAP-CancelLocation Mapping to Diameter-CLR
### 6.24.1 Mapping for Scenario One
#### 6.24.1.1 AVP Mapping
The AVP mapping from MAP- CancelLocation to Diameter-CLR for scenario one is
listed as table below:
Table 6.24.1.1-1: AVP Mapping from MAP- CancelLocation to Diameter-CLR for
scenario one
+----------------------+----------------------+----------------------+ | S6a/S6d Diameter AVP | MAP parameter | Comments | | within target CLR | | | | | within source | | | | CancelLocation | | +----------------------+----------------------+----------------------+ | User Name | IMSI | | +----------------------+----------------------+----------------------+ | Supported-Features | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | Cancellation Type | Cancellation Type | | +----------------------+----------------------+----------------------+ | N/A | Invoke Id | IWF shall set the | | | | Session Id value | | | | according to the | | | | Invoke Id value | | | | received from the | | | | MAP message and the | | | | recorded mapping | | | | between Invoke Id | | | | value and the | | | | Session Id value. | +----------------------+----------------------+----------------------+ | N/A | LMSI | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+
#### 6.24.1.2 Detailed IWF Behaviour
#### 6.24.1.3 New Requirements for S6a/S6d
### 6.24.2 Mapping for Scenario Three
#### 6.24.2.1 AVP Mapping
The AVP mapping from MAP- CancelLocation to Diameter-CLR for scenario three is
listed as table below:
Table 6.24.2.1-1: AVP Mapping from MAP- CancelLocation to Diameter-CLR for
scenario three
+----------------------+----------------------+----------------------+ | S6a/S6d Diameter AVP | MAP parameter | Comments | | within target CLR | | | | | within source | | | | CancelLocation | | +----------------------+----------------------+----------------------+ | User Name | IMSI | | +----------------------+----------------------+----------------------+ | Supported-Features | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | Cancellation Type | Cancellation Type | | +----------------------+----------------------+----------------------+ | N/A | Invoke Id | IWF shall set the | | | | Session Id value | | | | according to the | | | | Invoke Id value | | | | received from the | | | | MAP message and the | | | | recorded mapping | | | | between Invoke Id | | | | value and the | | | | Session Id value. | +----------------------+----------------------+----------------------+ | N/A | LMSI | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+
#### 6.24.2.2 Detailed IWF Behaviour
#### 6.24.2.3 New Requirements for S6a/S6d
### 6.24.3 Mapping for Scenario Four
#### 6.24.3.1 AVP Mapping
The AVP mapping from MAP- CancelLocation to Diameter-CLR for scenario four is
listed as table below:
Table 6.24.3.1-1: AVP Mapping from MAP- CancelLocation to Diameter-CLR for
scenario four
+----------------------+----------------------+----------------------+ | S6a/S6d Diameter AVP | MAP parameter | Comments | | within target CLR | | | | | within source | | | | CancelLocation | | +----------------------+----------------------+----------------------+ | User Name | IMSI | | +----------------------+----------------------+----------------------+ | Supported-Features | TBD | | +----------------------+----------------------+----------------------+ | Cancellation Type | Cancellation Type | | +----------------------+----------------------+----------------------+ | N/A | Invoke Id | IWF shall set the | | | | Session Id value | | | | according to the | | | | Invoke Id value | | | | received from the | | | | MAP message and the | | | | recorded mapping | | | | between Invoke Id | | | | value and the | | | | Session Id value. | +----------------------+----------------------+----------------------+ | N/A | LMSI | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+
#### 6.24.3.2 Detailed IWF Behaviour
#### 6.24.3.3 New Requirements for S6a/S6d
## 6.25 Diameter-CLA Mapping to MAP-CancelLocation Ack
### 6.25.1 Mapping for Scenario One
#### 6.25.1.1 AVP Mapping
The AVP mapping from Diameter-CLA to MAP- CancelLocation Ack for scenario one
is listed as table below:
Table 6.25.1.1-1: AVP Mapping from Diameter-CLA to MAP- CancelLocation Ack for
scenario one
+----------------------+----------------------+----------------------+ | MAP parameter | S6a/S6d Diameter AVP | Comments | | | within source CLA | | | within target | | | | CancelLocation Ack | | | +----------------------+----------------------+----------------------+ | Invoke Id | N/A | IWF shall set the | | | | Invoke Id value | | | | according to the | | | | Session Id value | | | | received from the | | | | Diameter message and | | | | the recorded mapping | | | | between Invoke Id | | | | value and the | | | | Session Id value. | +----------------------+----------------------+----------------------+ | User error | Result | | +----------------------+----------------------+----------------------+ | N/A | Supported Features | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+
#### 6.25.1.2 Detailed IWF Behaviour
#### 6.25.1.3 New Requirements for Pre Rel8 Gr
### 6.25.2 Mapping for Scenario Three
#### 6.25.2.1 AVP Mapping
The AVP mapping from Diameter-CLA to MAP- CancelLocation Ack for scenario
three is listed as table below:
Table 6.25.2.1-1: AVP Mapping from Diameter-CLA to MAP- CancelLocation Ack for
scenario three
+----------------------+----------------------+----------------------+ | MAP parameter | S6a/S6d Diameter AVP | Comments | | | within source CLA | | | within target | | | | CancelLocation Ack | | | +----------------------+----------------------+----------------------+ | Invoke Id | N/A | IWF shall set the | | | | Invoke Id value | | | | according to the | | | | Session Id value | | | | received from the | | | | Diameter message and | | | | the recorded mapping | | | | between Invoke Id | | | | value and the | | | | Session Id value. | +----------------------+----------------------+----------------------+ | User error | Result | | +----------------------+----------------------+----------------------+ | N/A | Supported Features | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+
#### 6.25.2.2 Detailed IWF Behaviour
#### 6.25.2.3 New Requirements for Rel8 Gr
### 6.25.3 Mapping for Scenario Four
#### 6.25.3.1 AVP Mapping
The AVP mapping from Diameter-CLA to MAP- CancelLocation Ack for scenario four
is listed as table below:
Table 6.25.3.1-1: AVP Mapping from Diameter-CLA to MAP- CancelLocation Ack for
scenario four
+----------------------+----------------------+----------------------+ | MAP parameter | S6a/S6d Diameter AVP | Comments | | | within source CLA | | | within target | | | | CancelLocation Ack | | | +----------------------+----------------------+----------------------+ | Invoke Id | N/A | IWF shall set the | | | | Invoke Id value | | | | according to the | | | | Session Id value | | | | received from the | | | | Diameter message and | | | | the recorded mapping | | | | between Invoke Id | | | | value and the | | | | Session Id value. | +----------------------+----------------------+----------------------+ | User error | Result | | +----------------------+----------------------+----------------------+ | TBD | Supported Features | | +----------------------+----------------------+----------------------+
#### 6.25.3.2 Detailed IWF Behaviour
#### 6.25.3.3 New Requirements for Rel8 Gr
A new parameter which indicates Supported Feature of EPS is needed to be
defined in MAP.
## 6.26 MAP-CancelLocation Ack Mapping to Diameter-CLA
### 6.26.1 Mapping for Scenario Four
#### 6.26.1.1 AVP Mapping
The AVP mapping from MAP- CancelLocation Ack to Diameter-CLA for scenario four
is listed as table below:
Table 6.26.1.1-1: AVP Mapping from MAP- CancelLocation Ack to Diameter-CLA for
scenario four
+----------------------+----------------------+----------------------+ | S6a/S6d Diameter AVP | MAP parameter | Comments | | within target CLA | | | | | within source | | | | CancelLocation Ack | | +----------------------+----------------------+----------------------+ | Supported-Features | TBD | | +----------------------+----------------------+----------------------+ | Result | User error | | +----------------------+----------------------+----------------------+ | N/A | Invoke Id | IWF shall set the | | | | Session Id value | | | | according to the | | | | Invoke Id value | | | | received from the | | | | MAP message and the | | | | recorded mapping | | | | between Invoke Id | | | | value and the | | | | Session Id value. | +----------------------+----------------------+----------------------+
#### 6.26.1.2 Detailed IWF Behaviour
#### 6.26.1.3 New Requirements for S6a/S6d
## 6.27 Diameter-RSR Mapping to MAP-Reset
### 6.27.1 Mapping for Scenario Four
#### 6.27.1.1 AVP Mapping
The AVP mapping from Diameter-RSR to MAP-Reset for scenario four is listed as
table below:
Table 6.27.1.1-1: AVP Mapping from Diameter-RSR to MAP- Reset for scenario
four
+---------------------+----------------------+----------------------+ | MAP parameter | S6a/S6d Diameter AVP | Comments | | | within source RSR | | | within target Reset | | | +---------------------+----------------------+----------------------+ | Invoke Id | N/A | IWF shall set the | | | | Invoke Id value | | | | according to the | | | | Session Id value | | | | received from the | | | | Diameter message and | | | | the recorded mapping | | | | between Invoke Id | | | | value and the | | | | Session Id value. | +---------------------+----------------------+----------------------+ | HLR number | N/A | See section 4A.2 for | | | | detail. | +---------------------+----------------------+----------------------+ | HLR Id LIST | N/A | This parameter shall | | | | be absent. | +---------------------+----------------------+----------------------+ | TBD | User Id List | | +---------------------+----------------------+----------------------+ | TBD | Supported Features | | +---------------------+----------------------+----------------------+
#### 6.27.1.2 Detailed IWF Behaviour
#### 6.27.1.3 New Requirements for Rel8 Gr
A new parameter which indicates Supported Feature of EPS is needed to be
defined in MAP.
A new parameter which indicates User Id List is needed to be defined in MAP.
## 6.28 MAP-Reset Mapping to a Diameter-RSR
### 6.28.1 Mapping for Scenario One
#### 6.28.1.1 AVP Mapping
The AVP mapping from MAP- Reset to Diameter-RSR for scenario one is listed as
table below:
Table 6.28.1.1-1: AVP Mapping from MAP- Reset to Diameter-RSR for scenario one
+----------------------+---------------------+----------------------+ | S6a/S6d Diameter AVP | MAP parameter | Comments | | within target RSR | | | | | within source Reset | | +----------------------+---------------------+----------------------+ | User Id List | N/A | This parameter shall | | | | be absent. | +----------------------+---------------------+----------------------+ | Supported-Features | N/A | This parameter shall | | | | be absent. | +----------------------+---------------------+----------------------+ | N/A | Invoke Id | IWF shall set the | | | | Session Id value | | | | according to the | | | | Invoke Id value | | | | received from the | | | | MAP message and the | | | | recorded mapping | | | | between Invoke Id | | | | value and the | | | | Session Id value. | +----------------------+---------------------+----------------------+ | N/A | HLR number | This parameter shall | | | | be ignored. | +----------------------+---------------------+----------------------+ | N/A | HLR Id LIST | This parameter shall | | | | be ignored. | +----------------------+---------------------+----------------------+
#### 6.28.1.2 Detailed IWF Behaviour
#### 6.28.1.3 New Requirements for S6a/S6d
### 6.28.2 Mapping for Scenario Three
#### 6.28.2.1 AVP Mapping
The AVP mapping from MAP- Reset to Diameter-RSR for scenario three is listed
as table below:
Table 6.28.2.1-1: AVP Mapping from MAP- Reset to Diameter-RSR for scenario
three
+----------------------+---------------------+----------------------+ | S6a/S6d Diameter AVP | MAP parameter | Comments | | within target RSR | | | | | within source Reset | | +----------------------+---------------------+----------------------+ | User Id List | N/A | This parameter shall | | | | be absent. | +----------------------+---------------------+----------------------+ | Supported-Features | N/A | This parameter shall | | | | be absent. | +----------------------+---------------------+----------------------+ | N/A | Invoke Id | IWF shall set the | | | | Session Id value | | | | according to the | | | | Invoke Id value | | | | received from the | | | | MAP message and the | | | | recorded mapping | | | | between Invoke Id | | | | value and the | | | | Session Id value. | +----------------------+---------------------+----------------------+ | N/A | HLR number | This parameter shall | | | | be ignored. | +----------------------+---------------------+----------------------+ | N/A | HLR Id LIST | This parameter shall | | | | be ignored. | +----------------------+---------------------+----------------------+
#### 6.28.2.2 Detailed IWF Behaviour
#### 6.28.2.3 New Requirements for S6a/S6d
### 6.28.3 Mapping for Scenario Four
#### 6.28.3.1 AVP Mapping
The AVP mapping from MAP- Reset to Diameter-RSR for scenario four is listed as
table below:
Table 6.28.3.1-1: AVP Mapping from MAP- Reset to Diameter-RSR for scenario
four
+----------------------+---------------------+----------------------+ | S6a/S6d Diameter AVP | MAP parameter | Comments | | within target RSR | | | | | within source Reset | | +----------------------+---------------------+----------------------+ | User Id List | TBD | | +----------------------+---------------------+----------------------+ | Supported-Features | TBD | | +----------------------+---------------------+----------------------+ | N/A | Invoke Id | IWF shall set the | | | | Session Id value | | | | according to the | | | | Invoke Id value | | | | received from the | | | | MAP message and the | | | | recorded mapping | | | | between Invoke Id | | | | value and the | | | | Session Id value. | +----------------------+---------------------+----------------------+ | N/A | HLR number | This parameter shall | | | | be ignored. | +----------------------+---------------------+----------------------+ | N/A | HLR Id LIST | This parameter shall | | | | be ignored. | +----------------------+---------------------+----------------------+
#### 6.28.3.2 Detailed IWF Behaviour
#### 6.28.3.3 New Requirements for S6a/S6d
## 6.29 Diameter-NOR Mapping to MAP-UpdateGprsLocation
### 6.29.1 Mapping for Scenario One
#### 6.q9.1.1 AVP Mapping
The AVP mapping from Diameter-NOR to MAP-UpdateGprsLocation for scenario one
is listed as table below:
Table 6.29.1.1-1: AVP Mapping from Diameter-NOR to MAP- UpdateGprsLocation for
scenario one
+----------------------+----------------------+----------------------+ | MAP parameter | S6a/S6d Diameter AVP | Comments | | | within source NOR | | | within target | | | | UpdateGprsLocation | | | +----------------------+----------------------+----------------------+ | Invoke Id | N/A | IWF shall allocate | | | | an Invoke Id value | | | | locally and record a | | | | mapping entity | | | | between this Invoke | | | | Id value and the | | | | Session Id value | | | | received from the | | | | Diameter message. | +----------------------+----------------------+----------------------+ | IMSI | User-Name | | +----------------------+----------------------+----------------------+ | SGSN number | N/A | See section 4A.2 for | | | | detail. | +----------------------+----------------------+----------------------+ | SGSN address | N/A | See section 4A.2 for | | | | detail. | +----------------------+----------------------+----------------------+ | Supported CAMEL | N/A | IWF shall set this | | Phases | | parameter that no | | | | CAMEL phase is | | | | supported. | +----------------------+----------------------+----------------------+ | SoLSA Support | N/A | This parameter shall | | Indicator | | be absent. | +----------------------+----------------------+----------------------+ | Super-Charger | N/A | This parameter shall | | Supported in Serving | | be absent. | | Network Entity | | | +----------------------+----------------------+----------------------+ | GPRS enhancements | N/A | IWF shall set this | | support indicator | | parameter. | +----------------------+----------------------+----------------------+ | Supported LCS | N/A | This parameter shall | | Capability Sets | | be absent. | +----------------------+----------------------+----------------------+ | Offered CAMEL 4 CSIs | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | Inform Previous | N/A | This parameter shall | | Network Entity | | be absent. | +----------------------+----------------------+----------------------+ | PS LCS Not Supported | N/A | This parameter shall | | by UE | | be absent. | +----------------------+----------------------+----------------------+ | V-GMLC Address | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | Call barring support | N/A | This parameter shall | | indicator | | be absent. | +----------------------+----------------------+----------------------+ | IMEISV | Terminal-Information | | +----------------------+----------------------+----------------------+ | Skip Subscriber Data | N/A | This parameter shall | | Update | | be absent. | +----------------------+----------------------+----------------------+ | Supported RAT Types | N/A | This parameter shall | | Indicator | | be absent. | +----------------------+----------------------+----------------------+ | N/A | PDN GW Identity | FFS: IWF shall | | | | record this | | | | parameter for this | | | | user. | +----------------------+----------------------+----------------------+ | N/A | APN | FFS: IWF shall | | | | record this | | | | parameter for this | | | | user. | +----------------------+----------------------+----------------------+ | N/A | NOR Flags | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | Supported Features | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+
#### 6.29.1.2 Detailed IWF Behaviour
#### 6.29.1.3 New Requirements for Pre Rel8 Gr
### 6.29.2 Mapping for Scenario Three
#### 6.29.2.1 AVP Mapping
The AVP mapping from Diameter-NOR to MAP- UpdateGprsLocation for scenario
three is listed as table below:
Table 6.29.2.1-1: AVP Mapping from Diameter-NOR to MAP- UpdateGprsLocation for
scenario three
+----------------------+----------------------+----------------------+ | MAP parameter | S6a/S6d Diameter AVP | Comments | | | within source NOR | | | within target | | | | UpdateGprsLocation | | | +----------------------+----------------------+----------------------+ | Invoke Id | N/A | IWF shall allocate | | | | an Invoke Id value | | | | locally and record a | | | | mapping entity | | | | between this Invoke | | | | Id value and the | | | | Session Id value | | | | received from the | | | | Diameter message. | +----------------------+----------------------+----------------------+ | IMSI | User-Name | | +----------------------+----------------------+----------------------+ | SGSN number | N/A | See section 4A.2 for | | | | detail. | +----------------------+----------------------+----------------------+ | SGSN address | N/A | See section 4A.2 for | | | | detail. | +----------------------+----------------------+----------------------+ | Supported CAMEL | N/A | IWF shall set this | | Phases | | parameter that no | | | | CAMEL phase is | | | | supported. | +----------------------+----------------------+----------------------+ | SoLSA Support | N/A | This parameter shall | | Indicator | | be absent. | +----------------------+----------------------+----------------------+ | Super-Charger | N/A | This parameter shall | | Supported in Serving | | be absent. | | Network Entity | | | +----------------------+----------------------+----------------------+ | GPRS enhancements | N/A | IWF shall set this | | support indicator | | parameter. | +----------------------+----------------------+----------------------+ | Supported LCS | N/A | This parameter shall | | Capability Sets | | be absent. | +----------------------+----------------------+----------------------+ | Offered CAMEL 4 CSIs | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | Inform Previous | N/A | This parameter shall | | Network Entity | | be absent. | +----------------------+----------------------+----------------------+ | PS LCS Not Supported | N/A | This parameter shall | | by UE | | be absent. | +----------------------+----------------------+----------------------+ | V-GMLC Address | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | Call barring support | N/A | This parameter shall | | indicator | | be absent. | +----------------------+----------------------+----------------------+ | IMEISV | Terminal-Information | | +----------------------+----------------------+----------------------+ | Skip Subscriber Data | N/A | This parameter shall | | Update | | be absent. | +----------------------+----------------------+----------------------+ | Supported RAT Types | N/A | This parameter shall | | Indicator | | be absent. | +----------------------+----------------------+----------------------+ | N/A | PDN GW Identity | FFS: IWF shall | | | | record this | | | | parameter for this | | | | user. | +----------------------+----------------------+----------------------+ | N/A | APN | FFS: IWF shall | | | | record this | | | | parameter for this | | | | user. | +----------------------+----------------------+----------------------+ | N/A | NOR Flags | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | Supported Features | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+
#### 6.29.2.2 Detailed IWF Behaviour
#### 6.29.2.3 New Requirements for Rel8 Gr
### 6.29.3 Mapping for Scenario Four
#### 6.29.3.1 AVP Mapping
The AVP mapping from Diameter-NOR to MAP- UpdateGprsLocation for scenario four
is listed as table below:
Table 6.29.3.1-1: AVP Mapping from Diameter-NOR to MAP- UpdateGprsLocation for
scenario four
+----------------------+----------------------+----------------------+ | MAP parameter | S6a/S6d Diameter AVP | Comments | | | within source NOR | | | within target | | | | UpdateGprsLocation | | | +----------------------+----------------------+----------------------+ | Invoke Id | N/A | IWF shall allocate | | | | an Invoke Id value | | | | locally and record a | | | | mapping entity | | | | between this Invoke | | | | Id value and the | | | | Session Id value | | | | received from the | | | | Diameter message. | +----------------------+----------------------+----------------------+ | IMSI | User-Name | | +----------------------+----------------------+----------------------+ | SGSN number | N/A | See section 4A.2 for | | | | detail. | +----------------------+----------------------+----------------------+ | SGSN address | N/A | See section 4A.2 for | | | | detail. | +----------------------+----------------------+----------------------+ | Supported CAMEL | N/A | IWF shall set this | | Phases | | parameter that no | | | | CAMEL phase is | | | | supported. | +----------------------+----------------------+----------------------+ | SoLSA Support | N/A | This parameter shall | | Indicator | | be absent. | +----------------------+----------------------+----------------------+ | Super-Charger | N/A | This parameter shall | | Supported in Serving | | be absent. | | Network Entity | | | +----------------------+----------------------+----------------------+ | GPRS enhancements | N/A | IWF shall set this | | support indicator | | parameter. | +----------------------+----------------------+----------------------+ | Supported LCS | N/A | This parameter shall | | Capability Sets | | be absent. | +----------------------+----------------------+----------------------+ | Offered CAMEL 4 CSIs | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | Inform Previous | N/A | This parameter shall | | Network Entity | | be absent. | +----------------------+----------------------+----------------------+ | PS LCS Not Supported | N/A | This parameter shall | | by UE | | be absent. | +----------------------+----------------------+----------------------+ | V-GMLC Address | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | Call barring support | N/A | This parameter shall | | indicator | | be absent. | +----------------------+----------------------+----------------------+ | IMEISV | Terminal-Information | | +----------------------+----------------------+----------------------+ | Skip Subscriber Data | N/A | This parameter shall | | Update | | be absent. | +----------------------+----------------------+----------------------+ | Supported RAT Types | N/A | This parameter shall | | Indicator | | be absent. | +----------------------+----------------------+----------------------+ | TBD | PDN GW Identity | FFS: IWF shall | | | | record this | | | | parameter for this | | | | user. | +----------------------+----------------------+----------------------+ | TBD | APN | FFS: IWF shall | | | | record this | | | | parameter for this | | | | user. | +----------------------+----------------------+----------------------+ | TBD | NOR Flags | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | TBD | Supported Features | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+
#### 6.29.3.2 Detailed IWF Behaviour
#### 6.29.3.3 New Requirements for Rel8 Gr
A new parameter which indicates PDN GW Identity is needed to be defined in
MAP.
A new parameter which indicates APN is needed to be defined in MAP.
A new parameter which indicates NOR Flags is needed to be defined in MAP.
A new parameter which indicates Supported Feature of EPS is needed to be
defined in MAP.
## 6.30 MAP-UpdateGprsLocation Mapping to Diameter-NOR
### 6.30.1 Mapping for Scenario Four
#### 6.30.1.1 AVP Mapping
The AVP mapping from MAP- UpdateGprsLocation to Diameter-NOR for scenario four
is listed as table below:
Table 6.30.1.1-1: AVP Mapping from MAP- UpdateGprsLocation to Diameter-NOR for
scenario four
+----------------------+----------------------+----------------------+ | S6a/S6d Diameter AVP | MAP parameter | Comments | | within target NOR | | | | | within source | | | | UpdateGprsLocation | | +----------------------+----------------------+----------------------+ | Supported-Features | TBD | | +----------------------+----------------------+----------------------+ | User-Name | IMSI | | +----------------------+----------------------+----------------------+ | PDN GW Identity | TBD | | +----------------------+----------------------+----------------------+ | APN | TBD | | +----------------------+----------------------+----------------------+ | NOR Flags | TBD | | +----------------------+----------------------+----------------------+ | Terminal-Information | IMEISV | | +----------------------+----------------------+----------------------+ | N/A | Invoke Id | IWF shall set the | | | | Session Id value | | | | according to the | | | | Invoke Id value | | | | received from the | | | | MAP message and the | | | | recorded mapping | | | | between Invoke Id | | | | value and the | | | | Session Id value. | +----------------------+----------------------+----------------------+ | N/A | SGSN number | See section 4A.2 for | | | | detail. | +----------------------+----------------------+----------------------+ | N/A | SGSN address | See section 4A.2 for | | | | detail. | +----------------------+----------------------+----------------------+ | N/A | Supported CAMEL | IWF shall ignore | | | Phases | this AVP. | +----------------------+----------------------+----------------------+ | N/A | SoLSA Support | IWF shall ignore | | | Indicator | this AVP. | +----------------------+----------------------+----------------------+ | N/A | Super-Charger | IWF shall ignore | | | Supported in Serving | this AVP. | | | Network Entity | | +----------------------+----------------------+----------------------+ | N/A | GPRS enhancements | IWF shall ignore | | | support indicator | this AVP. | +----------------------+----------------------+----------------------+ | N/A | Supported LCS | IWF shall ignore | | | Capability Sets | this AVP. | +----------------------+----------------------+----------------------+ | N/A | Offered CAMEL 4 CSIs | IWF shall ignore | | | | this AVP. | +----------------------+----------------------+----------------------+ | N/A | Inform Previous | IWF shall ignore | | | Network Entity | this AVP. | +----------------------+----------------------+----------------------+ | N/A | PS LCS Not Supported | IWF shall ignore | | | by UE | this AVP. | +----------------------+----------------------+----------------------+ | N/A | V-GMLC Address | IWF shall ignore | | | | this AVP. | +----------------------+----------------------+----------------------+ | N/A | Call barring support | IWF shall ignore | | | indicator | this AVP. | +----------------------+----------------------+----------------------+ | N/A | Skip Subscriber Data | IWF shall ignore | | | Update | this AVP. | +----------------------+----------------------+----------------------+ | N/A | Supported RAT Types | IWF shall ignore | | | Indicator | this AVP. | +----------------------+----------------------+----------------------+
#### 6.30.1.2 Detailed IWF Behaviour
#### 6.30.1.3 New Requirements for S6a/S6d
## 6.31 Diameter-NOA Mapping to MAP-UpdateGprsLocation Ack
### 6.31.1 Mapping for Scenario Four
#### 6.31.1.1 AVP Mapping
The AVP mapping from Diameter-NOA to MAP- UpdateGprsLocation Ack for scenario
four is listed as table below:
Table 6.31.1.1-1: AVP Mapping from Diameter-NOA to MAP- UpdateGprsLocation Ack
for scenario four
+----------------------+----------------------+----------------------+ | MAP parameter | S6a/S6d Diameter AVP | Comments | | | within source NOA | | | within target | | | | UpdateGprsLocation | | | | Ack | | | +----------------------+----------------------+----------------------+ | Invoke Id | N/A | IWF shall set the | | | | Invoke Id value | | | | according to the | | | | Session Id value | | | | received from the | | | | Diameter message and | | | | the recorded mapping | | | | between Invoke Id | | | | value and the | | | | Session Id value. | +----------------------+----------------------+----------------------+ | ADD Capability | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | HLR number | N/A | See section 4A.2 for | | | | detail. | +----------------------+----------------------+----------------------+ | User error | Result | | +----------------------+----------------------+----------------------+ | TBD | Supported Features | | +----------------------+----------------------+----------------------+
#### 6.31.1.2 Detailed IWF Behaviour
#### 6.31.1.3 New Requirements for Rel8 Gr
A new parameter which indicates Supported Feature of EPS is needed to be
defined in MAP.
A new parameter which describes the Result is needed to be defined in MAP.
## 6.32 MAP-UpdateGprsLocation Ack Mapping to Diameter-NOA
### 6.32.1 Mapping for Scenario One
#### 6.32.1.1 AVP Mapping
The AVP mapping from MAP- UpdateGprsLocation Ack to Diameter-NOA for scenario
one is listed as table below:
Table 6.32.1.1-1: AVP Mapping from MAP- UpdateGprsLocation Ack to Diameter-NOA
for scenario one
+----------------------+----------------------+----------------------+ | S6a/S6d Diameter AVP | MAP parameter | Comments | | within target NOA | | | | | within source | | | | UpdateGprsLocation | | | | Ack | | +----------------------+----------------------+----------------------+ | Supported-Features | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | Result | User error | | +----------------------+----------------------+----------------------+ | N/A | Invoke Id | IWF shall set the | | | | Session Id value | | | | according to the | | | | Invoke Id value | | | | received from the | | | | MAP message and the | | | | recorded mapping | | | | between Invoke Id | | | | value and the | | | | Session Id value. | +----------------------+----------------------+----------------------+ | N/A | ADD Capability | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | HLR number | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+
#### 6.32.1.2 Detailed IWF Behaviour
#### 6.32.1.3 New Requirements for S6a/S6d
### 6.32.2 Mapping for Scenario Three
#### 6.32.2.1 AVP Mapping
The AVP mapping from MAP- UpdateGprsLocation Ack to Diameter-NOA for scenario
three is listed as table below:
Table 6.32.2.1-1: AVP Mapping from MAP- UpdateGprsLocation Ack to Diameter-NOA
for scenario three
+----------------------+----------------------+----------------------+ | S6a/S6d Diameter AVP | MAP parameter | Comments | | within target NOA | | | | | within source | | | | UpdateGprsLocation | | | | Ack | | +----------------------+----------------------+----------------------+ | Supported-Features | N/A | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | Result | User error | | +----------------------+----------------------+----------------------+ | N/A | Invoke Id | IWF shall set the | | | | Session Id value | | | | according to the | | | | Invoke Id value | | | | received from the | | | | MAP message and the | | | | recorded mapping | | | | between Invoke Id | | | | value and the | | | | Session Id value. | +----------------------+----------------------+----------------------+ | N/A | ADD Capability | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | HLR number | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+
#### 6.32.2.2 Detailed IWF Behaviour
#### 6.32.2.3 New Requirements for S6a/S6d
### 6.32.3 Mapping for Scenario Four
#### 6.32.3.1 AVP Mapping
The AVP mapping from MAP- UpdateGprsLocation Ack to Diameter-NOA for scenario
four is listed as table below:
Table 6.32.3.1-1: AVP Mapping from MAP- UpdateGprsLocation Ack to Diameter-NOA
for scenario four
+----------------------+----------------------+----------------------+ | S6a/S6d Diameter AVP | MAP parameter | Comments | | within target NOA | | | | | within source | | | | UpdateGprsLocation | | | | Ack | | +----------------------+----------------------+----------------------+ | Supported-Features | TBD | | +----------------------+----------------------+----------------------+ | Result | User error | | +----------------------+----------------------+----------------------+ | N/A | Invoke Id | IWF shall set the | | | | Session Id value | | | | according to the | | | | Invoke Id value | | | | received from the | | | | MAP message and the | | | | recorded mapping | | | | between Invoke Id | | | | value and the | | | | Session Id value. | +----------------------+----------------------+----------------------+ | N/A | ADD Capability | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+ | N/A | HLR number | This parameter shall | | | | be ignored. | +----------------------+----------------------+----------------------+
#### 6.32.3.2 Detailed IWF Behaviour
#### 6.32.3.3 New Requirements for S6a/S6d
## 6.33 Diameter-ECR Mapping to MAP-CheckImei (Pre Rel8)
### 6.33.1 Mapping for Scenario Two
#### 6.33.1.1 AVP Mapping
The AVP mapping from Diameter-ECR to MAP- CheckImei for scenario two is listed
as table below:
Table 6.33.1.1-1: AVP Mapping from Diameter-ECR to MAP- CheckImei for scenario
two
+----------------------+----------------------+----------------------+ | MAP parameter | S6a/S6d Diameter AVP | Comments | | | within source ECR | | | within target | | | | CheckImei | | | +----------------------+----------------------+----------------------+ | Invoke Id | N/A | IWF shall set the | | | | Invoke Id value | | | | according to the | | | | Session Id value | | | | received from the | | | | Diameter message and | | | | the recorded mapping | | | | between Invoke Id | | | | value and the | | | | Session Id value. | +----------------------+----------------------+----------------------+ | IMEI | Terminal Information | This parameter shall | | | | be absent. | +----------------------+----------------------+----------------------+ | IMEISV | Terminal Information | | +----------------------+----------------------+----------------------+ | Requested Equipment | Terminal Information | This parameter shall | | Info | | be absent. | +----------------------+----------------------+----------------------+ | N/A | User Name | FFS: Whether this | | | | parameter is needed | | | | in S6a/S6d. | +----------------------+----------------------+----------------------+ | N/A | MSISDN | FFS: Whether this | | | | parameter is needed | | | | in S6a/S6d. | +----------------------+----------------------+----------------------+
#### 6.33.1.2 Detailed IWF Behaviour
#### 6.33.1.3 New Requirements for Pre Rel8 Gr
## 6.34 MAP- CheckImei Ack (Pre Rel8) Mapping to a Diameter-ECA
### 6.34.1 Mapping for Scenario Two
#### 6.34.1.1 AVP Mapping
The AVP mapping from MAP- CheckImei Ack to Diameter-ECA for scenario two is
listed as table below:
Table 6.34.1.1-1: AVP Mapping from MAP- CheckImei Ack to Diameter-ECA for
scenario two
+----------------------+----------------------+----------------------+ | S6a/S6d Diameter AVP | MAP parameter | Comments | | within target ECA | | | | | within source | | | | CheckImei Ack | | +----------------------+----------------------+----------------------+ | Equipment Status | Equipment status | | +----------------------+----------------------+----------------------+ | Result | User error | | +----------------------+----------------------+----------------------+ | N/A | Invoke Id | IWF shall set the | | | | Session Id value | | | | according to the | | | | Invoke Id value | | | | received from the | | | | MAP message and the | | | | recorded mapping | | | | between Invoke Id | | | | value and the | | | | Session Id value. | +----------------------+----------------------+----------------------+ | FFS | BMUEF | FFS: Whether this | | | | parameter is needed | | | | in S6a/S6d. | +----------------------+----------------------+----------------------+
#### 6.34.1.2 Detailed IWF Behaviour
#### 6.34.1.3 New Requirements for S6a/S6d
# 7 Conclusions
The IWF scenario one, two, three, four should be specified in Rel-8.
The IWF scenario five is not supported in Rel-8.The security solution for IWF
scenario one is based on the solution as described in section 4A.3.
The message routing mechanism and the user data handling principle should be
specified as described in section 4A.1and 4A.2.
The detailed message mapping is described in the new TS 29.305 [8] for IWF.
#