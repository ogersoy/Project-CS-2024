# Foreword
This Technical Specification (TS) was been produced by ETSI Technical
Committee Telecommunications and Internet converged Services and Protocols for
Advanced Networking (TISPAN) and originally published as ETSI ES 283 027 [26].
It was transferred to the 3rd Generation Partnership Project (3GPP) in in
January 2008.
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document provides the ETSI endorsement of the 3GPP TS 29.163 [1].
Clauses 7.2.3 and 7.4 of 3GPP TS 29.163 [1] specify the signalling
interworking between ISDN User Part (ISUP) protocols and SIP in order to
support services that can be commonly supported by ISUP and SIP-based network
domains.
Clause 9.2.3.3.5 specifies how ringing tone is applied at the gateway when
interworking ISUP and SIP.
The present document specifies the principles of interworking between the ETSI
TISPAN IMS and ISUP based legacy CS networks, in order to support IM basic
voice calls, therefore all the references to interworking between IMS and BICC
are out of scope of the present document.
The present document is a protocol interworking specification; therefore all
references to the user plane interworking are out of scope of the present
document.
The present document specifies the interworking between ETSI SIP profile (as
specified within ES 283 003 [3]) and ISUP, as specified in EN 300 356-1 [2]
respectively.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
  * References are either specific (identified by date of publication, > edition number, version number, etc.) or non‑specific.
  * For a specific reference, subsequent revisions do not apply.
  * For a non-specific reference, the latest version applies. In the > case of a reference to a 3GPP document (including a GSM document), > a non-specific reference implicitly refers to the latest version > of that document _in the same Release as the present document_.
Referenced documents which are not found to be publicly available in the
expected location might be found at http://docbox.etsi.org/Reference.
For online referenced documents, information sufficient to identify and locate
the source shall be provided. Preferably, the primary source of the referenced
document should be cited, in order to ensure traceability. Furthermore, the
reference should, as far as possible, remain valid for the expected life of
the document. The reference shall include the method of access to the
referenced document and the full network address, with the same punctuation
and use of upper case and lower case letters.
NOTE: While any hyperlinks included in this clause were valid at the time of
publication ETSI cannot guarantee their long term validity.
## 2.1 Normative references
The following referenced documents are indispensable for the application of
the present document. For dated references, only the edition cited applies.
For non-specific references, the latest edition of the referenced document
(including any amendments) applies.
[1] 3GPP TS 29.163: \"3rd Generation Partnership Project; Technical
Specification Group Core Network and Terminals; Interworking between the IP
Multimedia (IM) Core Network (CN) subsystem and Circuit Switched (CS) networks
(Release 7)\".
[2] ETSI EN 300 356-1 (V4.2.1): \"Integrated Services Digital Network (ISDN);
Signalling System No.7 (SS7); ISDN User Part (ISUP) version 4 for the
international interface; Part 1: Basic services [ITU-T Recommendations Q.761
to Q.764 (1999) modified]\".
[3] ETSI ES 283 003: \"Telecommunications and Internet converged Services and
Protocols for Advanced Networking (TISPAN); IP Multimedia Call Control
Protocol based on Session Initiation Protocol (SIP) and Session Description
Protocol (SDP) Stage 3\ [3GPP TS 24.229 (Release 7), modified]\".
[4] ETSI ES 282 007: \"Telecommunications and Internet converged Services and
Protocols for Advanced Networking (TISPAN); IP Multimedia Subsystem (IMS);
Functional architecture\".
[5] ETSI EN 300 356-3 (V4.2.1): \"Integrated Services Digital Network (ISDN);
Signalling System No.7 (SS7); ISDN User Part (ISUP) version 4 for the
international interface; Part 3: Calling Line Identification Presentation
(CLIP) supplementary service [ITU-T Recommendation Q.731, clause 3 (1993)
modified]\".
[6] ETSI EN 300 356-4 (V4.2.1): \"Integrated Services Digital Network (ISDN);
Signalling System No.7 (SS7); ISDN User Part (ISUP) version 4 for the
international interface; Part 4: Calling Line Identification Restriction
(CLIR) supplementary service [ITU-T Recommendation Q.731,\ clause 4 (1993)
modified]\".
[7] ETSI EN 300 356-5 (V4.1.2): \"Integrated Services Digital Network (ISDN);
Signalling System No.7 (SS7); ISDN User Part (ISUP) version 4 for the
international interface; Part 5: Connected Line Identification Presentation
(COLP) supplementary service [ITU-T Recommendation Q.731, clause 5 (1993)
modified]\".
[8] ETSI EN 300 356-6 (V4.1.2): \"Integrated Services Digital Network (ISDN);
Signalling System No.7 (SS7); ISDN User Part (ISUP) version 4 for the
international interface; Part 6: Connected Line Identification Restriction
(COLR) supplementary service [ITU-T Recommendation Q.731, clause 6 (1993)
modified]\".
[9] ETSI EN 300 356-7 (V4.1.2): \"Integrated Services Digital Network (ISDN);
Signalling System No.7 (SS7); ISDN User Part (ISUP) version 4 for the
international interface; Part 7: Terminal Portability (TP) supplementary
service [ITU-T Recommendation Q.733, clause 4 (1993) modified]\".
[10] ETSI EN 300 356-8 (V4.1.2): \"Integrated Services Digital Network (ISDN);
Signalling System No.7 (SS7); ISDN User Part (ISUP) version 4 for the
international interface; Part 8: User-to-User Signalling (UUS) supplementary
service [ITU-T Recommendation Q.737, clause 1 (1997) modified]\".
[11] ETSI EN 300 356-9 (V4.1.2): \"Integrated Services Digital Network (ISDN);
Signalling System No.7 (SS7); ISDN User Part (ISUP) version 4 for the
international interface; Part 9: Closed User Group (CUG) supplementary service
[ITU-T Recommendation Q.735, clause 1 (1993) modified]\".
[12] ETSI EN 300 356-10 (V4.1.2): \"Integrated Services Digital Network
(ISDN); Signalling System No.7 (SS7); ISDN User Part (ISUP) version 4 for the
international interface;\ Part 10: Subaddressing (SUB) supplementary service
[ITU-T Recommendation Q.731, clause 8 (1992) modified]\".
[13] ETSI EN 300 356-11 (V4.1.2): \"Integrated Services Digital Network
(ISDN); Signalling System No.7 (SS7); ISDN User Part (ISUP) version 4 for the
international interface; Part 11: Malicious Call Identification (MCID)
supplementary service [ITU-T Recommendation Q.731, clause 7 (1997)
modified]\".
[14] ETSI EN 300 356-12 (V4.2.1): \"Integrated Services Digital Network
(ISDN); Signalling System No.7 (SS7); ISDN User Part (ISUP) version 4 for the
international interface; Part 12: Conference call, add-on (CONF) supplementary
service [ITU-T Recommendation Q.734, clause 1 (1993) and implementors guide
(1998) modified]\".
[15] ETSI EN 300 356-14 (V4.2.1): \"Integrated Services Digital Network
(ISDN); Signalling System No.7 (SS7); ISDN User Part (ISUP) version 4 for the
international interface; Part 14: Explicit Call Transfer (ECT) supplementary
service [ITU-T Recommendation Q.732, clause 7 (1996) and implementors guide
(1998) modified]\".
[16] ETSI EN 300 356-15 (V4.2.1): \"Integrated Services Digital Network
(ISDN); Signalling System No.7 (SS7); ISDN User Part (ISUP) version 4 for the
international interface; Part 15: Diversion supplementary service [ITU-T
Recommendation Q.732, clauses 2 to 5 (1999) modified]\".
[17] ETSI EN 300 356-16 (V4.1.2): \"Integrated Services Digital Network
(ISDN); Signalling System No.7 (SS7); ISDN User Part (ISUP) version 4 for the
international interface;\ Part 16: Call Hold (HOLD) supplementary service
[ITU-T Recommendation Q.733,\ clause 2 (1993) modified]\".
[18] ETSI EN 300 356-17 (V4.1.2): \"Integrated Services Digital Network
(ISDN); Signalling System No.7 (SS7); ISDN User Part (ISUP) version 4 for the
international interface;\ Part 17: Call Waiting (CW) supplementary service
[ITU-T Recommendation Q.733,\ clause 1 (1992) modified]\".
[19] ETSI EN 300 356-18 (V4.1.2): \"Integrated Services Digital Network
(ISDN); Signalling System No.7 (SS7); ISDN User Part (ISUP) version 4 for the
international interface; Part 18: Completion of Calls to Busy Subscriber
(CCBS) supplementary service [ITU-T Recommendation Q.733, clause 3 (1997)
modified]\".
[20] ETSI EN 300 356-19 (V4.2.1): \"Integrated Services Digital Network
(ISDN); Signalling System No.7 (SS7); ISDN User Part (ISUP) version 4 for the
international interface;\ Part 19: Three-Party (3PTY) supplementary service
[ITU-T Recommendation Q.734,\ clause 2 (1996) and implementors guide (1998)
modified]\".
[21] ETSI EN 300 356-20 (V4.3.1): \"Integrated Services Digital Network
(ISDN); Signalling System No.7 (SS7); ISDN User Part (ISUP) version 4 for the
international interface; Part 20: Completion of Calls on No Reply (CCNR)
supplementary service [ITU-T Recommendation Q.733, clause 5 (1999)
modified]\".
[22] ETSI EN 300 356-21: \"Integrated Services Digital Network (ISDN);
Signalling System No.7 (SS7); ISDN User Part (ISUP) version 4 for the
international interface; Part 21: Anonymous Call Rejection (ACR) supplementary
service [ITU-T Recommendation Q.731, clause 4 (1993)]\".
[23] ETSI EN 300 485 (V1.2.3): \"Integrated Services Digital Network (ISDN);
Definition and usage of cause and location in Digital Subscriber Signalling
System No. one (DSS1) and Signalling System No. 7 (SS7) ISDN User Part (ISUP)
[ITU-T Recommendation Q.850 (1998) with addendum modified]\".
[24] ETSI EN 300 403-1: \"Integrated Services Digital Network (ISDN); Digital
Subscriber Signalling System No. one (DSS1) protocol; Signalling network layer
for circuit-mode basic call control;\ Part 1: Protocol specification [ITU-T
Recommendation Q.931 (1993), modified]\".
[25] IETF RFC 3966 (December 2004): \"The tel URI for Telephone Numbers\".
## 2.2 Informative references
[26] Final draft ETSI ES 283 027 V2.4.0: \"Telecommunications and Internet
converged Services and Protocols for Advanced Networking (TISPAN); Endorsement
of the SIP-ISUP Interworking between the IP Multimedia (IM) Core Network (CN)
subsystem and Circuit Switched (CS) networks [3GPP TS 29.163 (Release 7),
modified]\".
Note: The version of ETSI ES 283 027 on which the present document is based
only available during the ETSI membershiip approval period. It is anticipated
that it will be published without technical change.
# 3 Definitions and abbreviations
For the purposes of the present document, the terms, definitions and
abbreviations given in 3GPP TS 29.163 [1], clauses 7.2.3 and 7.4 apply.
# Endorsement notice
The present document endorses 3GPP TS 29.163: \"3rd Generation Partnership
Project; Technical Specification Group Core Network and Terminals;
Interworking between the IP Multimedia (IM) Core Network (CN) subsystem and
Circuit Switched (CS) networks (Release 7)\" [1], the contents of which apply
together with the following modifications:
Clauses 6.3, 7.3, 8, 9.2.2.1, 9.2.2.2, 9.2.3.1, 9.2.3.2, 9.2.4.1, 9.2.5.1,
9.2.6.1, 9.2.7.1, 9.2.8.1, 9.2.8.3 and annex B do not apply to this
recommendation.
NOTE: Underlining and/or strike-out are used to highlight detailed
modifications where necessary.
# Global modifications to 3GPP TS 29.163 Release 7
##### Throughout the text of the 3GPP TS 29.163 Release 7 {#throughout-the-
text-of-the-3gpp-ts-29.163-release-7 .H6}
Replace references as shown in table 1.
Table 1
* * *
References in 3GPP TS 29.163 [1] Replaced references ITU-T Recommendation
Q.761 EN 300 356-1 [2] ITU-T Recommendation Q.762 EN 300 356-1 [2] ITU-T
Recommendation Q.763 EN 300 356-1 [2] ITU-T Recommendation Q.764 EN 300 356-1
[2] 3GPP TS 24.229 ES 283 003 [3] 3GPP TS 23.228 ES 282 007 [4] ITU-T
Recommendation Q.850 (1998) EN 300 485 [23] ITU-T Recommendation Q.731.3 EN
300 356-3 [5] ITU-T Recommendation Q.731.4 EN 300 356-4 [6] ITU-T
Recommendation Q.731.5 EN 300 356-5 [7] ITU-T Recommendation Q.731.6 EN 300
356-6 [8] ITU-T Recommendation Q.731.7 EN 300 356-11 [13] ITU-T Recommendation
Q.731.8 EN 300 356-10 [12] ITU-T Recommendation Q.732.2 EN 300 356-15 [16]
ITU-T Recommendation Q.732.3 EN 300 356-15 [16] ITU-T Recommendation Q.732.4
EN 300 356-15 [16] ITU-T Recommendation Q.732.5 EN 300 356-15 [16] ITU-T
Recommendation Q.732.7 EN 300 356-14 [15] ITU-T Recommendation Q.733.1 EN 300
356-17 [18] ITU-T Recommendation Q.733.2 EN 300 356-16 [17] ITU-T
Recommendation Q.733.3 EN 300 356-18 [19] ITU-T Recommendation Q.733.4 EN 300
356-7 [9] ITU-T Recommendation Q.733.5 EN 300 356-20 [21] ITU-T Recommendation
Q.734.1 EN 300 356-12 [14] ITU-T Recommendation Q.734.2 EN 300 356-19 [20]
ITU-T Recommendation Q.735.1 EN 300 356-9 [11] ITU-T Recommendation Q.737.1 EN
300 356-8 [10]
* * *
##### Clause 2 {#clause-2 .H6}
Modify as follows:
~~[77] IETF draft-ietf-sip-acr-code-03 \"Rejecting Anonymous Requests in the
Session Initiation Protocol (SIP)\"~~
[[77] IETF RFC 5079: \"**Rejecting Anonymous Requests in the Session
Initiation Protocol (SIP)\".**]{.underline}
~~[89] draft-ejzak-sipping-p-em-auth-03.txt (January 2007): \"Private Header
(P-Header) Extension to the Session Initiation Protocol (SIP) for
Authorization of Early Media\".~~
[[89] IETF RFC 5009: \"Private Header (P-Header) Extension to the Session
Initiation Protocol (SIP) for Authorization of Early Media\".]{.underline}
[[91] ETSI EN 300 403-1: \"Integrated Services Digital Network (ISDN); Digital
Subscriber Signalling System No. one (DSS1) protocol; Signalling network layer
for circuit-mode basic call control; Part 1: Protocol specification [ITU-T
Recommendation Q.931 (1993), modified]\".]{.underline}
[[92] IETF RFC 3966: \"**The tel URI for Telephone Numbers** \".]{.underline}
[[93] ISO/IEC 8348: \"Information technology Open Systems Interconnection
Network service definition\".]{.underline}
###### Clause 7.2.3.1.2.3 Forward call indicators
Modify as follows:
###### 7.2.3.1.2.3 Forward call indicators
bits [CB]{.underline} End-to-end method indicator
0 0 no end-to-end method available (only link-by-link method available)
bit [D]{.underline} Interworking indicator
1 interworking encountered
As a network operator option, the value D = 0 \"No interworking encountered\"
is used if the TMR = 64 kBit/s unrestricted is used.
NOTE: This avoids sending of a progress indicator with progress information 0
0 0 0 0 0 1 \"Call is not end-to-end ISDN; further call progress information
may be available in‑band \", so the call will not be released for that reason
by an ISDN terminal.
bit [E]{.underline} End-to-end information indicator (national use)
0 no end-to-end information available
bit [F]{.underline} ISDN user part/BICC indicator
0 ISDN user part/BICC not used all the way
As a network operator option, the value F = 1 \"ISDN user part/BICC used all
the way\" is used if the TMR = 64 kBit/s unrestricted is used.
NOTE: This avoids sending of a progress indicator with progress information 0
0 0 0 0 0 1 \"Call is not end-to-end ISDN; further call progress information
may be available in‑band \", so the call will not be released for that reason
by an ISDN terminal.
bits [HG]{.underline} ISDN user part/BICC preference indicator
0 1 ISDN user part/BICC not required all the way
bit [I]{.underline} ISDN access indicator
0 originating access non-ISDN
As a network operator option, the value I = 1 \"originating access ISDN\" is
used if the TMR = 64 kBit/s unrestricted is used.
NOTE: This avoids sending of a progress indicator with progress information 0
0 0 0 1 1 \"Originating access is non-ISDN\", so the call will not be released
for that reason by an ISDN terminal..
bits [KJ]{.underline} SCCP method indicator
0 0 no indication
[If the PSTN XML is supported as a network option, the Forward Call indicators
derived as shown in Table 02a shall take precedence.]{.underline}
Table 02a: Mapping of PSTN XML elements to Forward call indicators parameter
+----------------------------------+----------------------------------+ | [INVITE →]{.underline} | [IAM→]{.underline} | +----------------------------------+----------------------------------+ | [PSTN XML]{.underline} | [Content]{.underline} | | | | | | [Forward call indicators | | | parameter]{.underline} | +----------------------------------+----------------------------------+ | [PSTN XML with Progress | [Forward call indicators | | indicator No 6]{.underline} | parameter]{.underline} | | | | | [ (Meaning: originating access | [ISDN User Part | | ISDN)]{.underline} | indicator]{.underline} | | | | | | [1 \"ISDN User Part used all the | | | way\"]{.underline} | | | | | | [ISDN access | | | indicator]{.underline} | | | | | | [1 \"originating access | | | ISDN\"]{.underline} | +----------------------------------+----------------------------------+
##### Clause 7.2.3.1.2.5 Transmission medium requirement
{#clause-7.2.3.1.2.5-transmission-medium-requirement .H6}
Modify first paragraph as follows:
The I-MGCF may either transcode the selected codec(s) to the codec on the PSTN
side or it may attempt to interwork the media without transcoding. If the
I-MGCF transcodes, it shall select the TMR parameter to \"3,1 kHz audio\". If
the I‑MGCF does not transcode, it should map the TMR, USI and Access Transport
parameters from the selected codec according to table 2a. [However, if the
I-MGCF supports this PSTN XML body as a network option, and if a PSTN XML body
is received in the INVITE request and the I-MGCF selects media encoded in any
of the formats in Table 2a (G.711, Clearmode or t38) among the offered media,
the I-MGCF shall derive these parameters from the XML body instead, as
detailed in Table 2b]{.underline}. The support of any of the media listed in
table 2a is optional. The SDP for the data transfer with 64 kbit/s clearmode
shall be mapped to the TMR \"64 kbit/s unrestricted\".
Add table 2b as follows:
Table 2b: Mapping of PSTN XML elements with ISUP Parameters
* * *
[INVITE ]{.underline} [IAM ]{.underline}  
[PSTN XML]{.underline} [Value]{.underline} [ISUP Parameter]{.underline}
[Content]{.underline} [ProgressIndicator]{.underline} []{.underline} [Access
Transport Parameter]{.underline} [Progress indicator]{.underline}
[HighLayerCompatibility]{.underline} []{.underline} []{.underline} [High layer
compatibility (NOTE)]{.underline} [LowLayerCompatibility]{.underline}
[]{.underline} []{.underline} [Low layer compatibility]{.underline}
[BearerCapability]{.underline} []{.underline} [User Service
Information]{.underline} []{.underline} [HighLayerCompatibility]{.underline}
[]{.underline} [User Tele Service]{.underline} [High layer
compatibility]{.underline} [BearerInfomationElement
(InformationTransferCabability)]{.underline} [Speech]{.underline}
[TMR]{.underline} [Speech]{.underline} []{.underline} [3.1 kHz
audio]{.underline} []{.underline} [3.1 kHz audio]{.underline} []{.underline}
[Unrestricted digital information]{.underline} []{.underline} [64 kbit/s
unrestricted]{.underline} []{.underline} [Unrestricted digital information
with tones/announcements]{.underline} []{.underline} [64 kbit/s
unrestricted]{.underline} [NOTE: If two high layer compatibility information
elements are received, they shall be transferred in the same order as received
in the PSTN XML body in the INVITE message.]{.underline}
* * *
[]{.underline}
Add clause 7.2.3.1.2.1.5a
##### [7.2.3.1.2.5a Transmission medium requirement prime and USI prime
(optional)]{.underline} {#a-transmission-medium-requirement-prime-and-usi-
prime-optional .H6}
[The Fallback mechanism described in the present Clause shall only apply if a
two PSTN XML Bearer Capability element appears within the INVITE Request and
the MGCF supports the PSTN XML body as a network option.]{.underline}
[When the INVITE request includes multiple audio codecs with codec appearing
in Table 2a then the I-MGCF shall:]{.underline}
[- If the first stated codec in the INVITE is a codec appearing in Table 2a
and is the equivalent as stated within the second Bearer Capability in the XML
Bearer Capability element then the I-MGCF shall map the XML Bearer Capability
element into the TMR and USI prime and shall set the TMR to "64 kBit/s
unrestricted preferred".]{.underline}
[- If the second stated codec in the INVITE is a codec appearing in Table 2a
and is the equivalent as stated within the first Bearer Capability in the XML
Bearer Capability element then the I-MGCF shall map the XML Bearer Capability
element into the TMR prime and USI and shall map the TMR prime from the PSTN
XML BearerInfomationElement (InformationTransferCabability).]{.underline}
[- If the compared codec stated within the INVITE is not equivalent as stated
within XML Bearer Capability element then the XML Bearer Capability element
shall be discarded]{.underline}
[If the Fallback mechanism is not supported by the succeeding network the
procedures as described within clause 7.2.3.1.2.5 shall apply]{.underline}
[In cases where the fallback appears within the terminating entity and sends
back a codec to which is fallen back then the I-MGCF shall only apply the cut-
though to the chosen codec.]{.underline}
[In cases where the fallback appears within the terminating entity and sends
back a SDP Answer that is equivalent with the TMR prime codec (fallback codec)
then the I-MGCF shall only apply the cut-though to the fallback codec.\ \ In
cases where preconditions are used the I-MGCF has to wait for the SDP answer
where the preconditions are met and fallback codec is sent back.]{.underline}
Add clause 7.2.3.1.2.10
##### [7.2.3.1.2.10 Access Transport Parameter and User Tele
Service]{.underline} {#access-transport-parameter-and-user-tele-service .H6}
[When an INVITE was received containing a PSTN XML body as defined in ES 283
003 [3], an available \"ProgressIndicator\" element can be as a network option
mapped into a Progress Indicator in the Access Transport Parameter of the sent
IAM]{.underline}
[Table 7a0.1: Mapping of PSTN XML elements with ISUP Parameters]{.underline}
* * *
[INVITE ]{.underline} [IAM ]{.underline}  
[PSTN XML]{.underline} [ISUP Parameter]{.underline} [Content]{.underline}
[ProgressIndicator]{.underline} [Access Transport Parameter]{.underline}
[Progress indicator]{.underline} [HighLayerCompatibility]{.underline}
[]{.underline} [High layer compatibility (Note)]{.underline}
[LowLayerCompatibility]{.underline} []{.underline} [Low layer
compatibility]{.underline} [BearerCapability]{.underline} [User Service
Information]{.underline} []{.underline} [HighLayerCompatibility]{.underline}
[User Tele Service]{.underline} [High layer compatibility (Note)]{.underline}
[NOTE: If two high layer compatibility information elements are received, they
are transferred in the same order as received in the INVITE message in the
access transport parameter of the initial address message.]{.underline}
* * *
##### Clause 7.2.3.1.4 Sending of 180 ringing {#clause-7.2.3.1.4-sending-
of-180-ringing .H6}
Modify as follows:
The I-MGCF shall send the SIP 180 Ringing when receiving any of the following
messages:
\- ACM with **Called party\'s status indicator** set to subscriber free.
[NOTE: Including the P-Early-Media Header is a network option for a speech
call.]{.underline}
[]{.underline}
Figure 6: The receipt of ACM
\- CPG with Event indicator set to alerting
[NOTE: Including the P-Early-Media Header is a network option for a speech
call.]{.underline}
[]{.underline}
Figure 7: Receipt of CPG (Alerting)
For a speech call, if the I-MGCF supports the P-Early-Media header as a
network option, and if the INVITE request includes the P-Early-Media header,
the I-MGCF shall include in the SIP 180 ringing response a P-Early-Media
header authorizing early media, except when:
\- the I-MGCF has already sent a reliable provisional response including a
P-Early-Media header, as defined in RFC5009 [89]; and
\- the most recently sent P-Early-Media header authorized early media.
NOTE: If the I-MGCF signals the P-Early-Media header authorizing early media,
then the IMS can expect tones or announcements to the calling party to flow
from the CS network via an MGW controlled by the I‑MGCF. In particular, once
the I-MGCF sends the 180 Ringing response, ringback is expected in media from
the CS network.
[If the I-MGCF supports the PSTN XML body as a network option and the I-MGCF
interworks media encoded in any of the formats in Table 2a (G.711, Clearmode
or t38) without transcoding, the I-MGCF shall map the Access Transport Format
received in the CPG or ACM into PSTN XML elements as shown in Table 7a.0.2 and
include this XML body in the 180 Ringing.]{.underline}
Table 7a0.2: ISUP Parameters with Mapping of PSTN XML elements
+----------------------+----------------------+----------------------+ | [18x]{.underline} | [CPG or | | | | ACM]{.underline} | | +----------------------+----------------------+----------------------+ | [PSTN | [ISUP | [ | | XML]{.underline} | Pa | Content]{.underline} | | | rameter]{.underline} | | +----------------------+----------------------+----------------------+ | [ProgressIn | [Access Transport | [Progress | | dicator]{.underline} | Pa | in | | | rameter]{.underline} | dicator]{.underline} | +----------------------+----------------------+----------------------+ | [HighLayerCompat | []{.underline} | [High layer | | ibility]{.underline} | | compatibility (NOTE | | | | 1)]{.underline} | +----------------------+----------------------+----------------------+ | [LowLayerCompat | []{.underline} | [Low layer | | ibility]{.underline} | | compat | | | | ibility]{.underline} | +----------------------+----------------------+----------------------+ | [BearerCap | []{.underline} | [Bearer | | ability]{.underline} | | Cap | | | | ability]{.underline} | +----------------------+----------------------+----------------------+ | [NOTE 1: If two high | | | | layer compatibility | | | | information elements | | | | are received, they | | | | are transferred in | | | | the same order as | | | | received in the | | | | INVITE message in | | | | the access transport | | | | parameter of the | | | | initial address | | | | m | | | | essage.]{.underline} | | | | | | | | [NOTE 2: see Clause | | | | 7.2.3.1.4.1 | | | | Transmission Medium | | | | Used parameter | | | | (TMU)]{.underline} | | | +----------------------+----------------------+----------------------+
[If the I-MGCF supports the PSTN XML body as a network option, an available
Progress Indicator element in the ACM or CPG contained in the ATP parameter
shall be mapped into the PSTN XML ProgressIndicator in the 180 Ringing as
shown in table 7a0g.]{.underline}
[]{.underline}
+----------------------------------+----------------------------------+ | Table 7a0.3: Sending criteria of | | | the XML with Progress indicator | | | X | | +----------------------------------+----------------------------------+ | [← 180 Ringing]{.underline} | [←ACM]{.underline} | +----------------------------------+----------------------------------+ | [ PSTN XML body with Progress | [Content]{.underline} | | indicator X]{.underline} | | | | [Backward call indicators | | | parameter]{.underline} | | | | | | [Optional backward call | | | indicators | | | parameter]{.underline} | +----------------------------------+----------------------------------+ | [No. 1]{.underline} | [Backward call indicators | | | parameter]{.underline} | | [(_Call is not end-to-end ISDN: | | | further progress information may | [ISDN User Part | | be available | indicator]{.underline} | | in-band_)]{.underline} | | | | [0 _ISDN User Part not used all | | | the way_]{.underline} | +----------------------------------+----------------------------------+ | [No. 2]{.underline} | [Backward call indicators | | | parameter]{.underline} | | [(_Destination address is | | | non-ISDN_)]{.underline} | [ISDN User Part | | | indicator]{.underline} | | | | | | [1 _ISDN User Part used all the | | | way_]{.underline} | | | | | | [ISDN access | | | indicator]{.underline} | | | | | | [0 _Terminating access | | | non-ISDN_]{.underline} | +----------------------------------+----------------------------------+ | [No. 7]{.underline} | [Backward call indicators | | | parameter]{.underline} | | [meaning: Terminating access | | | ISDN]{.underline} | [ISDN User Part | | | indicator]{.underline} | | | | | | [1 _ISDN User Part used all the | | | way_]{.underline} | | | | | | [ISDN access | | | indicator]{.underline} | | | | | | [1 _Terminating access | | | ISDN_]{.underline} | +----------------------------------+----------------------------------+ | [No.8]{.underline} | [Optional backward call | | | indicators | | ["In-band information or | parameter]{.underline} | | appropriate pattern is now | | | available"]{.underline} | [In-band information | | | indicator]{.underline} | | | | | | [in-band information or an | | | appropriate pattern is now | | | available]{.underline} | +----------------------------------+----------------------------------+
**[Progress indicator]{.underline}**
[Progress indicator information elements possibly present in the access
transport parameter of the Address Complete Message (ACM) are transferred into
the PSTN XML body (as defined in ES 283 003 [3]) of the 180 Ringing sent to
the calling user.]{.underline}
##### [Add Clause 7.2.3.1.4.1]{.underline} {#add-clause-7.2.3.1.4.1 .H6}
##### [7.2.3.1.4.1 Transmission Medium Used parameter (TMU)]{.underline}
{#transmission-medium-used-parameter-tmu .H6}
[If the Transmission Medium Used parameter (TMU) is present and the BC is not
available in the ATP in the Address Complete Message (ACM) or Call Progress
Message (CPG), and if no BC is available in the ATP, and if no progress
indicator No. 1 (call is not end-to-end ISDN) or No. 2 (destination address is
non-ISDN) has been received in the CPG or ACM, the TMU value (Speech or 3.1
kHz audio) shall be included in the PSTN XML BearerCapability.\ If the
Transmission Medium Used parameter (TMU) and the BC is available in the ATP in
the Address Complete Message (ACM) or Call Progress Message (CPG), and if no
progress indicator No. 1 (call is not end-to-end ISDN) or No. 2 (destination
address is non-ISDN) has been received in the CPG or ACM, the BC value shall
be included to the PSTN XML BearerCapability]{.underline}
[]{.underline}
Table 7a0.f -- Sending of BC fallback indication
+----------------------------------+----------------------------------+ | [← 180 Ringing or 183 Session | [←ACM/CPG]{.underline} | | Progress]{.underline} | | +----------------------------------+----------------------------------+ | [PSTN XML BearerCapability = | [TMU _Speech_]{.underline} | | _Speech_]{.underline} | | | | [ATP No BC]{.underline} | +----------------------------------+----------------------------------+ | [PSTN XML BearerCapability = | [TMU _3.1 kHz | |_ 3.1 kHz audio _]{.underline} | audio_]{.underline} | | | | | | [ATP No BC]{.underline} | +----------------------------------+----------------------------------+ | [PSTN XML BearerCapability | [TMU _Speech or 3.1 kHz | | received in the ATP\ | audio_]{.underline} | | (_speech_ or _3.1 kHz | | | audio_)]{.underline} | [ATP BC (_speech or 3.1 kHz | | | audio_)]{.underline} | +----------------------------------+----------------------------------+
##### Clause 7.2.3.1.4A Sending of 183 Session Progress for early media
scenarios {#clause-7.2.3.1.4a-sending-of-183-session-progress-for-early-media-
scenarios .H6}
Modify as follows:
If SIP preconditions are used, the first 183 Session Progress will be sent
after the reception of the INVITE request, before any ISUP message has been
received from the CS network. The I-MGCF shall not include the P-Early-Media
header in any SIP message before it receives an ISUP ACM.
[On receipt of an ACM with the options described in table 7a2 the I-MGCF can
be sent, as a network option, a\ 183 Session Progress response
with]{.underline} following options:
+----------------------------------+----------------------------------+ | [Table 7a2: Sending criteria of | | | the XML with Progress indicator | | | X]{.underline} | | +----------------------------------+----------------------------------+ | [← 183 Session | [←ACM]{.underline} | | Progress]{.underline} | | +----------------------------------+----------------------------------+ | [ PSTN XML body with Progress | [Content]{.underline} | | indicator X]{.underline} | | +----------------------------------+----------------------------------+ | [No. 1]{.underline} | [Backward call indicators | | | parameter]{.underline} | | [(_Call is not end-to-end ISDN: | | | further progress information may | [ISDN User Part | | be available | indicator]{.underline} | | in-band_)]{.underline} | | | | [0 _ISDN User Part not used all | | | the way_]{.underline} | +----------------------------------+----------------------------------+ | [No. 2]{.underline} | [Backward call indicators | | | parameter]{.underline} | | [(_Destination address is | | | non-ISDN_)]{.underline} | [ISDN User Part | | | indicator]{.underline} | | | | | | [1 _ISDN User Part used all the | | | way_]{.underline} | | | | | | [ISDN access | | | indicator]{.underline} | | | | | | [0 _Terminating access | | | non-ISDN_]{.underline} | +----------------------------------+----------------------------------+ | [No. 7]{.underline} | [Backward call indicators | | | parameter]{.underline} | | [meaning: Terminating access | | | ISDN]{.underline} | [ISDN User Part | | | indicator]{.underline} | | | | | | [1 _ISDN User Part used all the | | | way_]{.underline} | | | | | | [ISDN access | | | indicator]{.underline} | | | | | | [1 _Terminating access | | | ISDN_]{.underline} | +----------------------------------+----------------------------------+
[]{.underline}
**[Progress indicator]{.underline}**
[Progress indicator information elements possibly present in the access
transport parameter of the Address Complete Message (ACM) are transferred into
the PSTN XML body (as defined in ES 283 003 [3]) of the 183 Session Progress
sent to the calling user.]{.underline}
For a speech call upon receipt of one of the following messages, if the I-MGCF
supports the P-Early-Media header as a network option, and if the I-MGCF has
received the P-Early-Media header in the INVITE request, and has not already
sent a provisional response including a P-Early-Media header with parameters
indicating authorization of early media, then the I-MGCF shall send the 183
Session Progress response with a P-Early-Media header authorizing early media:
\- ACM with the value of the called party\'s status indicator \"no
indication\" and one of the options described in table 7a1. Based on local
configuration, the I-MGCF may also send a 183 Session Progress response with
a\ P-Early-Media header authorizing early media if it receives an ACM with
other parameters than described in table 7a1.
Figure 7c: Receipt of ACM \"No indication\"
Table 7a.1: ACM Parameters that trigger the 183 Session Progress response
+----------------------------------+----------------------------------+ | ←183 Session Progress | ←ACM | +----------------------------------+----------------------------------+ | []{.underline} | 1）Optional backward call | | | indicators parameter | | 183 Session Progress response | | | including a P-Early-Media header | In-band information indicator | | authorizing early media, if not | | | already sent | 1 _In-band info [or an | | | appropriate pattern is now | | []{.underline} | available..]{.underline}_ | | | | | [PSTN XML with ProgressIndicator | 2）Backward call indicators | | value No.8]{.underline} | parameter | | | | | ["In-band information or | ISDN User Part indicator | | appropriate pattern is now | | | available"]{.underline} | 0 ISDN User Part not used all | | | the way | +----------------------------------+----------------------------------+
[]{.underline}
NOTE: As a network option the I-MGCF can also map ACM into 183 in other cases
than those described in table 7a1.
\- CPG message, when:
1\. Event indicator is set to \"in-band information or an appropriate pattern
is now available\"; or
2\. **Event indicator is set to \"Progress\"** and one of the options
described in table 7b1.
Figure 7d: Receipt of CPG (in-band information available)
[Table 7b.1: CPG Parameters that trigger the 183 Session Progress
response]{.underline}
+----------------------------------+----------------------------------+ | ←183 Session Progress | ←CPG | +----------------------------------+----------------------------------+ | []{.underline} | Event indicator | | | | | 183 Session Progress response | 000 0010 (_progress_) | | including a P-Early-Media header | | | authorizing early media, if not | 1）Optional backward call | | already sent | indicators parameter | | | | | [PSTN XML with Progress | In-band information indicator | | Indicator No.8]{.underline} | | | | _0_ _In-band info [or an | | ["In-band information or | appropriate pattern is now | | appropriate pattern is now | available]{.underline}_ | | available"]{.underline} | | | | 2）Backward call indicators | | | parameter | | | | | | ISDN User Part indicator | | | | | | 0 ISDN User Part not used all | | | the way | +----------------------------------+----------------------------------+ | NOTE 1: The mapping of the | | | contents in the CPG message is | | | only relevant if the information | | | received in the message is | | | different compared to earlier | | | received information, e.g. in | | | the ACM message or a CPG message | | | received prior to this message. | | | | | | NOTE 2: 183 Session Progress | | | message including a | | | P-Early-Media header authorizing | | | early media may only be sent for | | | a speech call. | | +----------------------------------+----------------------------------+
NOTE: As a network option the I-MGCF can also map CPG into 183 in other cases
than those described in table 7a1.
[If the I-MGCF supports the PSTN XML body as a network option and the I-MGCF
interworks media encoded in any of the formats in Table 2a (G.711, Clearmode
or t38) without transcoding, the I-MGCF shall map the Access Transport
Parameter received in the CPG or ACM into PSTN XML elements as shown in Table
7a0.2 and include this XML body in the 183 Session Progress.]{.underline}
[If the I-MGCF supports the PSTN XML body as a network option , an available
BCI element in the ACM or CPG shall be mapped into a Progress Indicator in the
PSTN XML body of the 183 session progress as shown in table
7a0.3.]{.underline}
[Received PSTN XML elements shall be mapped as shown in table
7a0.2]{.underline}
**[Progress indicator]{.underline}**
[Progress indicator information elements possibly present in the access
transport parameter of the Call Progress Message (CPG) are transferred into
the PSTN XML (as defined in ES 283 003 [3]) body of the 183 Session Progress
to the calling user.]{.underline}
##### Clause 7.2.3.1.5 Sending of the 200 OK (INVITE)
{#clause-7.2.3.1.5-sending-of-the-200-ok-invite .H6}
Modify as follows:
The following cases are possible trigger conditions for sending the 200 OK
(INVITE):
\- The reception of the ANM.
Figure 8: Receipt of ANM
\- The reception of the CON message.
Figure 9: Receipt of CON
[If the I-MGCF supports the PSTN XML body as a network option,
the]{.underline} received PSTN XML elements shall be mapped as shown in table
7a0.2
On receipt of an ANM/CON message containing the ATP including the Bearer
Capability set to "unrestricted digital information with tones/announcement"
without TMU parameter the 200 OK message shall contain the PSTN XML Bearer
Capability "unrestricted digital information with tones/announcement".
[If the I-MGCF supports the PSTN XML body as a network option, an available
BCI element in the ANM or CON shall be mapped into a Progress Indicator in the
PSTN XML body as shown in table 7a0.3.]{.underline}
##### Clause 7.2.3.1.6 Sending of the Release message (REL)
{#clause-7.2.3.1.6-sending-of-the-release-message-rel .H6}
Modify as follows:
The following are possible triggers for sending the Release message:
\- Receipt of the BYE method.
Figure 10: Receipt of the Bye method
\- Receipt of the CANCEL method.
Figure 11: Receipt of Cancel method
Additional triggers are contained in table 10.
[Received PSTN XML elements shall be mapped as shown in table 8b.]{.underline}
##### Clause 7.2.3.1.7 Coding of the REL {#clause-7.2.3.1.7-coding-of-the-rel
.H6}
Modify as follows:
If the Reason header field with Q.850 Cause Value is included in the BYE or
CANCEL request, then the Cause Value shall be mapped to the ISUP Cause Value
field in the ISUP REL . The mapping of the Cause Indicators parameter to the
Reason header is shown in table 8a. Table 8 shows the coding of the Cause
Value in the REL if it is not available from the Reason header field. In both
cases, the Location Field shall be set to \"_network beyond interworking
point_ \".
Table 8: Coding of REL
* * *
SIP Message  REL  Request cause parameter BYE Cause value No. 16 (normal
clearing) CANCEL Cause value No. 31 (normal unspecified)
* * *
Table 8a: Mapping of SIP Reason header fields\ into Cause Indicators parameter
* * *
[Component of SIP Reason header field]{.underline} [Component
value]{.underline} [BICC/ISUP Parameter field]{.underline} [Value]{.underline}
[Protocol]{.underline} [\"_Q.850_ \"]{.underline} [Cause Indicators
parameter]{.underline} [--]{.underline}
[protocol‑cause]{.underline} [\"_cause = XX_ \"\ [Cause Value]{.underline}
[\"_XX_ \" (note)]{.underline} (note)]{.underline}
[--]{.underline} [--]{.underline} [Location]{.underline} _[\"network beyond
interworking point\"]{.underline}_
[NOTE: \"XX\" is the Cause Value as defined in ITU-T Recommendation
Q.850.]{.underline}
* * *
Editor\'s Note: The mapping of reason headers towards the ISDN may be misused
due to possible user creation of the reason header since there is no screening
in IMS.
[Table 8b: Mapping of PSTN XML elements with ISUP Parameters]{.underline}
* * *
[BYE or CANCLE ]{.underline} [REL ]{.underline}  
[PSTN XML]{.underline} [ISUP Parameter]{.underline} [Content]{.underline}
[ProgressIndicator]{.underline} [Access Transport Parameter]{.underline}
[Progress indicator]{.underline} [HighLayerCompatibility]{.underline}
[]{.underline} [High layer compatibility (Note)]{.underline}
[LowLayerCompatibility]{.underline} []{.underline} [Low layer
compatibility]{.underline} [HighLayerCompatibility]{.underline} [User Tele
Service]{.underline} [High layer compatibility (Note)]{.underline} [NOTE: If
two high layer compatibility information elements are received, they are
transferred in the same order as received in the INVITE message in the access
transport parameter of the initial address message.]{.underline}
* * *
##### Clause 7.2.3.1.8 Receipt of the Release Message
{#clause-7.2.3.1.8-receipt-of-the-release-message .H6}
Modify as follows:
If the REL message is received and a final response (i.e. 200 OK (INVITE)) has
already been sent, the I-MGCF shall send a BYE message.
NOTE: According to SIP procedures, in the case that the REL message is
received and a final response\ (e.g. 200 OK (INVITE)) has already been sent
(but no ACK request has been received) on the incoming side of the I- MGCF
then the I- MGCF does not send a 487 Request terminated response and instead
waits until the ACK request is received before sending a BYE message.
If the REL message is received and the final response (i.e. 200 OK (INVITE))
has not already been sent, the I- MGCF shall send a Status-Code 4xx (Client
Error) or 5xx (Server Error) response. The Status code to be sent is
determined by examining the Cause code value received in the REL message.
Table 9 specifies the mapping of the cause code values, as defined in ITU-T
Recommendation Q.850 [38], to SIP response status codes. Cause code values not
appearing in the table shall have the same mapping as the appropriate class
defaults according to ITU-T Recommendation Q.850 [38].
Table 9: Receipt of the Release message (REL)
+----------------------------------+----------------------------------+ | ←SIP Message | ← REL | +----------------------------------+----------------------------------+ | Status code | Cause parameter | +----------------------------------+----------------------------------+ | 404 Not Found | Cause value No. 1 (unallocated | | | (unassigned) number) | +----------------------------------+----------------------------------+ | 500 Server Internal error | Cause value No 2 (no route to | | | network) | +----------------------------------+----------------------------------+ | 500 Server Internal error | Cause value No 3 (no route to | | | destination) | +----------------------------------+----------------------------------+ | 500 Server Internal error | Cause value No. 4 (Send special | | | information tone) | +----------------------------------+----------------------------------+ | 404 Not Found | Cause value No. 5 (Misdialled | | | trunk prefix) | +----------------------------------+----------------------------------+ | 486 Busy Here | Cause value No. 17 (user busy) | +----------------------------------+----------------------------------+ | 480 Temporarily unavailable | Cause value No 18 (no user | | | responding) | +----------------------------------+----------------------------------+ | 480 Temporarily unavailable | Cause value No 19 (no answer | | | from the user) | +----------------------------------+----------------------------------+ | 480 Temporarily unavailable | Cause value No. 20 (subscriber | | | absent) | +----------------------------------+----------------------------------+ | 480Temporarily unavailable | Cause value No 21 (call | | | rejected) | +----------------------------------+----------------------------------+ | 410 Gone | Cause value No 22 (number | | | changed) | +----------------------------------+----------------------------------+ | 433 Anonymity Disallowed.(NOTE | Cause value No. 24 (call | | 1) | rejected due to ACR | | | supplementary service) | +----------------------------------+----------------------------------+ | 480 Temporarily unavailable | Cause value No 25 (Exchange | | | routing error) | +----------------------------------+----------------------------------+ | 502 Bad Gateway | Cause value No 27 (destination | | | out of order) | +----------------------------------+----------------------------------+ | 484 Address Incomplete | Cause value No. 28 invalid | | | number format (address | | | incomplete) | +----------------------------------+----------------------------------+ | 500 Server Internal error | Cause value No 29 (facility | | | rejected) | +----------------------------------+----------------------------------+ | 480 Temporarily unavailable | Cause value No 31 (normal | | | unspecified) (class default) | | | (NOTE 2) | +----------------------------------+----------------------------------+ | 486 Busy here if Diagnostics | Cause value in the Class 010 | | indicator includes the (CCBS | (resource unavailable, Cause | | indicator = CCBS possible) | value No 34) | | | | | else 480 Temporarily unavailable | | +----------------------------------+----------------------------------+ | 500 Server Internal error | Cause value in the Class 010\ | | | (resource unavailable, Cause | | | value No\'s. 38, 41, 42, 43, 44, | | | & 47) (47 is class default) | +----------------------------------+----------------------------------+ | 500 Server Internal error | Cause value No 50 (requested | | | facility no subscribed) | +----------------------------------+----------------------------------+ | 500 Server Internal error | Cause value No 57 (bearer | | | capability not authorized) | +----------------------------------+----------------------------------+ | 500 Server Internal error | Cause value No 58 (bearer | | | capability not presently) | +----------------------------------+----------------------------------+ | 500 Server Internal error | Cause value No 63 (service | | | option not available, | | | unspecified)\ | | | (class default) | +----------------------------------+----------------------------------+ | 500 Server Internal error | Cause value in the Class 100 | | | (service or option not | | | implemented, Cause value No\'s. | | | 65, 70 & 79) 79 is class default | +----------------------------------+----------------------------------+ | 500 Server Internal error | Cause value No 88 (incompatible | | | destination) | +----------------------------------+----------------------------------+ | 404 Not Found | Cause value No 91 (invalid | | | transit network selection) | +----------------------------------+----------------------------------+ | 500 Server Internal error | Cause value No 95 (invalid | | | message)\ | | | (class default) | +----------------------------------+----------------------------------+ | 500 Server Internal error | Cause value No 97 (Message type | | | non-existent or not implemented) | +----------------------------------+----------------------------------+ | 500 Server Internal error | Cause value No 99 (information | | | element/parameter non-existent | | | or not implemented)) | +----------------------------------+----------------------------------+ | 480 Temporarily unavailable | Cause value No. 102 (recovery on | | | timer expiry) | +----------------------------------+----------------------------------+ | 500 Server Internal error | Cause value No 110 (Message with | | | unrecognized Parameter, | | | discarded) | +----------------------------------+----------------------------------+ | 500 Server Internal error | Cause value No. 111 (protocol | | | error, unspecified)\ | | | (class default) | +----------------------------------+----------------------------------+ | 480 Temporarily unavailable | Cause value No. 127 | | | (interworking unspecified)\ | | | (class default) | +----------------------------------+----------------------------------+ | NOTE 1: Anonymity Disallowed, | | | RFC5079 [77] refers | | | | | | NOTE 2: Class 1 and class 2 have | | | the same default value. | | +----------------------------------+----------------------------------+
[]{.underline}
A Reason header field containing the received (Q.850) Cause Value of the REL
shall be added to the SIP final response or BYE request sent as a result of
this clause. The mapping of the Cause Indicators parameter to the Reason
header is shown in table 9a.
Editor\'s Note: The usage of the Reason header in responses is FFS.
Table 9a: Mapping of Cause Indicators parameter into SIP Reason header fields
* * *
[Cause indicators parameter field]{.underline} [Value of parameter
field]{.underline} [component of SIP Reason header field]{.underline}
[component value]{.underline}
[--]{.underline} [--]{.underline} [protocol]{.underline} [\"_Q.850_
\"]{.underline}
[Cause Value]{.underline} [\"_XX_ \" (note)]{.underline}
[protocol‑cause]{.underline} [\"_cause = XX_ \"\ (note)]{.underline}
[--]{.underline} _[--]{.underline}_ [reason‑text]{.underline}
[FFS]{.underline}
[NOTE: \"XX\" is the Cause Value as defined in ITU-T Recommendation.
Q.850.]{.underline}
* * *
Editor\'s Note: Should be filled with the definition text as stated in ITU-T
Rec. Q.850. Due to the fact that the Cause Indicators parameter does not
include the definition text as defined in table 1/Q.850, this is based on
provisioning in the I‑MGCF.
Table 9aa: ISUP Parameters with Mapping of PSTN XML elements
* * *
[4xx,5xx,6xx]{.underline} [REL]{.underline}  
[PSTN XML]{.underline} [ISUP Parameter]{.underline} [Content]{.underline}
[ProgressIndicator]{.underline} [Access Transport Parameter]{.underline}
[Progress indicator]{.underline} [HighLayerCompatibility]{.underline}
[]{.underline} [High layer compatibility (Note)]{.underline}
[LowLayerCompatibility]{.underline} []{.underline} [Low layer
compatibility]{.underline} [NOTE: If two high layer compatibility information
elements are received, they are transferred in the same order as received in
the INVITE message in the access transport parameter of the initial address
message.]{.underline}
* * *
##### Add clause 7.2.3.2.1.5 {#add-clause-7.2.3.2.1.5 .H6}
##### [7.2.3.2.1.5 Fallback (optional)]{.underline} {#fallback-optional .H6}
[When the IAM includes a TMR and a TMR prime parameter and a USI and USI Prime
parameter then the O-MGCF shall:]{.underline}
[- Map the USI Prime into the second Bearer Capability stated in the XML
Bearer Capability element and]{.underline}
[- For the TMR and USI Prime the mapping shall apply according to the
procedures described within clause 7.2.3.2.2.2 for the first offered
codec.]{.underline}
[- Map the USI into the first Bearer Capability stated in the XML Bearer
Capability element and]{.underline}
[- For the TMR prime and USI the mapping shall apply according to the
procedures described within clause 7.2.3.2.2.2 for the second offered
codec.]{.underline}
[NOTE: If the Fallback mechanism is not supported the ISUP Fallback procedures
apply.]{.underline}
[In cases where the fallback appears within the terminating entity and sends
back a SDP Answer that is equivalent with the TMR prime codec (fallback codec)
then the O-MGCF shall only apply the cut-though to the fallback
codec.]{.underline}
[In cases where preconditions are used the O-MGCF has to wait for the SDP
answer where the preconditions are met and fallback codec is sent
back.]{.underline}
##### Clause 7.2.3.2.2.2 SDP Media Description {#clause-7.2.3.2.2.2-sdp-media-
description .H6}
Modify as follows:
The SDP media description will contain precondition information as per RFC
3312 [37]. Depending on the coding of the continuity indicators different
precondition information (RFC 3312 [37]) is included. If the continuity
indicator indicates \"continuity performed on a previous circuit\" or
\"continuity required on this circuit\", and the INVITE is sent before
receiving a COT, then the O-MGCF shall indicate that the preconditions are not
met. Otherwise the MGCF shall indicate whether the preconditions are met,
dependent on the possibly applied resource reservation within the IMS.
If the O-MGCF determines that a speech call is incoming, the O-MGCF shall
include the AMR codec transported according to RFC 3267 [23] with the options
listed in clause 5.1.1 of 3GPP TS 26.236 [32] in the SDP offer, unless the
[Note below applies. Within the SDP offer, the O-MGCF should also provide SDP
RR and RS bandwidth modifiers specified in RFC 3556 [59] to disable RTCP, as
detailed in clause 7.4 of 3GPP TS 26.236 [32]. The O-MGCF may include other
codecs according to operator policy.]{.underline}
NOTE: If the O-MGCF is deployed in an IMS network that by local configuration
serves no user equipment that implements the AMR codec, then the AMR codec may
be excluded from the SDP offer.
To avoid transcoding or to support non-speech services, the O-MGCF may add
media derived from the incoming ISUP information according to table 10b. The
support of the media listed in table 10b is optional.
[If the XML BearerCapability element is supported the mapping of the ISUP USI
Parameter shall be mapped to the XML BeareCapability element as shown in table
17b.]{.underline}
Add clause 7.2.3.2.2.7
##### [7.2.3.2.2.7 PSTN XML elements]{.underline} {#pstn-xml-elements .H6}
Table 17b: Mapping of ISUP Parameters with PSTN XML elements
+----------------------+----------------------+----------------------+ | [IAM ]{.underline} | [INVITE | | | | ]{.underline} | | +----------------------+----------------------+----------------------+ | [ISUP | [ | [PSTN | | Pa | Content]{.underline} | XML]{.underline} | | rameter]{.underline} | | | +----------------------+----------------------+----------------------+ | [Access Transport | [Progress | [ProgressIn | | Pa | in | dicator]{.underline} | | rameter]{.underline} | dicator]{.underline} | | +----------------------+----------------------+----------------------+ | []{.underline} | [High layer | [HighLayerCompat | | | compatibility (Note | ibility]{.underline} | | | 1)]{.underline} | | +----------------------+----------------------+----------------------+ | []{.underline} | [Low layer | [LowLayerCompat | | | compat | ibility]{.underline} | | | ibility]{.underline} | | +----------------------+----------------------+----------------------+ | [User Service | []{.underline} | [Bearer | | Info | | Cap | | rmation]{.underline} | | ability]{.underline} | +----------------------+----------------------+----------------------+ | [User Tele | [High layer | [HighLayerCompat | | Service]{.underline} | compatibility (Note | ibility]{.underline} | | | )]{.underline} | | +----------------------+----------------------+----------------------+ | [NOTE 1: If two high | | | | layer compatibility | | | | information elements | | | | are received, they | | | | are transferred in | | | | the same order as | | | | received in the | | | | INVITE message in | | | | the access transport | | | | parameter of the | | | | initial address | | | | m | | | | essage.]{.underline} | | | | | | | | [NOTE 2: In the | | | | normal case, the | | | | High layer | | | | compatibility | | | | information in the | | | | ATP is equal to the | | | | High layer | | | | compatibility in the | | | | User Tele Service | | | | parameter. It is | | | | network dependent | | | | which information is | | | | mapped into the XML | | | | instance in the | | | | INVITE. In the XML | | | | instance, no two | | | | identical High layer | | | | compatibility | | | | information are | | | | p | | | | resent.]{.underline} | | | +----------------------+----------------------+----------------------+
Add clause 7.2.3.2.2.8
##### 7.2.3.2.2.8 Progress indicator {#progress-indicator .H6}
+----------------+----------------+----------------+----------------+ | [Table 17aA: | | | | | Coding of the | | | | | progress | | | | | indicato | | | | | r]{.underline} | | | | +----------------+----------------+----------------+----------------+ | [IAM | [INVITE | | | | →]{.underline} | →]{.underline} | | | +----------------+----------------+----------------+----------------+ | [Forward call | [Access | [ PSTN XML | | | indicators | transport | body with | | | paramete | paramete | Progress | | | r]{.underline} | r]{.underline} | indicator | | | | | X]{.underline} | | +----------------+----------------+----------------+----------------+ | [ISDN User | [ISDN access | []{.underline} | []{.underline} | | Part | indicato | | | | indicato | r]{.underline} | | | | r]{.underline} | | | | +----------------+----------------+----------------+----------------+ | [0\ | [\ | [\ | [\ | | (_ISDN User | Value | Value | No. | | Part\ | non-significan | non-significan | 1]{.underline} | | not used all | t]{.underline} | t]{.underline} | | | the | | | | | way_ | | | | | )]{.underline} | | | | +----------------+----------------+----------------+----------------+ | [1\ | [0\ | [\ | [\ | | (_ISDN User | (_ originating | Value | No. | | Part\ | access\ | non-significan | 3]{.underline} | | used all the | non-ISDN _| t]{.underline} | | | way_ | )]{.underline} | | | | )]{.underline} | | | | +----------------+----------------+----------------+----------------+ | [1\ | [1\ | [\ | [\ | | (_ISDN User | (_ originating | p.i. | No. x and | | Part\ | access\ | No. | no. | | used all the | ISDN _| x]{.underline} | 6]{.underline} | | way_ | )]{.underline} | | | | )]{.underline} | | | []{.underline} | +----------------+----------------+----------------+----------------+
##### Modify Clause 7.2.3.2.5
##### 7.2.3.2.5 Coding of the ACM
The description of the following ISDN user part parameters can be found in
ITU-T Recommendation Q.763 [4].
###### 7.2.3.2.5.1 Backward call indicators
bits AB Charge indicator Contributors
1 0 _charge_
bits DC Called party\'s status indicator
01 _subscriber free_ if the 180 Ringing has been received.
00 _no indication_ otherwise
bits FE Called party\'s category indicator
0 0 no indication
bits HG End-to-end method indicator
00 no end-to-end method available
bit I Interworking indicator
1 interworking encountered
As a network operator option, the value I = 0 \"no interworking encountered\"
is used for TMR = 64 kBit/s unrestricted
NOTE: This avoids sending of a progress indicator with Progress information 0
0 0 0 0 0 1 \"Call is not end-to-end ISDN; further call progress information
may be available in‑band \", so the call will not be released for that reason
by an ISDN terminal.
bit J End-to-end information indicator
0 no end-to-end information available
bit K ISDN user part/BICC indicator
0 ISDN user part not used all the way
As a network operator option, the value K = 1 \"ISDN user part/BICC used all
the way\" is used for TMR = 64 kBit/s unrestricted
NOTE: This avoids sending of a progress indicator with progress information 0
0 0 0 0 0 1 \"Call is not end-to-end ISDN; further call progress information
may be available in‑band \", so the call will not be released for that reason
by an ISDN terminal.
bit L Holding indicator (national use)
0 holding not requested
bit M ISDN access indicator
> 0 terminating access non-ISDN
As a network operator option, the value M = 1 \"terminating access ISDN\" is
used for TMR = 64 kBit/s unrestricted.
NOTE: This avoids sending of a progress indicator with progress information 0
0 0 0 0 1 0 \" Destination access is non-ISDN\", so the call will not be
released for that reason by an ISDN terminal.
bit N Echo control device indicator
_1 outgoing echo control device included_ , for speech calls, e.g., TMR is
\"3.1KHz audio\".
_0 outgoing echo control device not included_ , for known data calls, e.g.,
TMR \"64 kBit/s unrestricted\" or HLC \"Facsimile Group 2/3\".
[If the PSTN XML is supported as a network option the Backward Call indicators
derived as shown in Table 7a0.3 shall take precedence.]{.underline}
Table 7a0.3: Sending criteria of the XML with Progress indicator No (Value of
PI)
+----------------------------------+----------------------------------+ | [←ACM]{.underline} | [← 180 Ringing or 183 Session | | | Progress]{.underline} | +----------------------------------+----------------------------------+ | [Content]{.underline} | [ PSTN XML body with Progress | | | indicator No (Value of | | [Backward call indicators | PI)]{.underline} | | parameter]{.underline} | | | | | | [Optional backward call | | | indicators | | | parameter]{.underline} | | +----------------------------------+----------------------------------+ | [Backward call indicators | [No. 7]{.underline} | | parameter]{.underline} | | | | [Meaning : Terminating user | | [Interworking | ISDN]{.underline} | | indicator]{.underline} | | | | | | [ 0 \"no interworking | | | encountered\"]{.underline} | | | | | | [ISDN User Part | | | indicator]{.underline} | | | | | | [1 \"ISDN User Part used all the | | | way\"]{.underline} | | | | | | [ISDN access | | | indicator]{.underline} | | | | | | [1 \"Terminating access | | | ISDN\"]{.underline} | | +----------------------------------+----------------------------------+ | [Optional backward call | []{.underline} | | indicators | | | parameter]{.underline} | [PI No.8 "In-band information or | | | appropriate pattern is now | | [In-band information | available"]{.underline} | | indicator]{.underline} | | | | | | [in-band information or an | | | appropriate pattern is now | | | available]{.underline} | | +----------------------------------+----------------------------------+
[]{.underline}
###### 7.2.3.2.5.2 Optional Backward call indicators
Bit A 1 \"in-band information or an appropriate pattern is now available\" if
183 Session Progress response is received and a P-Early-Media header has been
received authorizing early media
Table 7a0.4: Sending criteria of Optional backward call indicators parameter
+----------------------------------+----------------------------------+ | [←ACM]{.underline} | **[← 180 Ringing or 183 Session | | | Progress]{.underline}** | | | | | | []{.underline} | +----------------------------------+----------------------------------+ | [Optional backward call | [P-Early-Media header | | indicators | authorizing early | | parameter]{.underline} | media]{.underline} | | | | | [In-band information | | | indicator]{.underline} | | | | | | [in-band information or an | | | appropriate pattern is now | | | available]{.underline} | | +----------------------------------+----------------------------------+
Add clause 7.2.3.2.5.3
##### [7.2.3.2.5.3 Access Transport Parameter]{.underline} {#access-transport-
parameter .H6}
Table 17c: Mapping of PSTN XML elements with ISUP Parameters
+----------------------+----------------------+----------------------+ | [ ACM]{.underline} | [ 180,  | | | | 183]{.underline} | | +----------------------+----------------------+----------------------+ | [ISUP | [ | [PSTN | | Pa | Content]{.underline} | XML]{.underline} | | rameter]{.underline} | | | +----------------------+----------------------+----------------------+ | [Access Transport | [Progress | [ProgressIn | | Pa | in | dicator]{.underline} | | rameter]{.underline} | dicator]{.underline} | | +----------------------+----------------------+----------------------+ | []{.underline} | [High layer | [HighLayerCompat | | | compatibility | ibility]{.underline} | | | (Note)]{.underline} | | +----------------------+----------------------+----------------------+ | []{.underline} | [Low layer | [LowLayerCompat | | | compat | ibility]{.underline} | | | ibility]{.underline} | | +----------------------+----------------------+----------------------+ | []{.underline} | [Bearer Capability | [BearerCapability | | | (_speech_ or _3.1 | (NOTE | | | kHz | 2)]{.underline} | | | audio_)]{.underline} | | +----------------------+----------------------+----------------------+ | [User Tele | [High layer | [HighLayerCompat | | Service]{.underline} | compatibility | ibility]{.underline} | | | (Note)]{.underline} | | +----------------------+----------------------+----------------------+ | [Transmission medium | [Bearer | [BearerCap | | used parameter | Cap | ability]{.underline} | | (_speech_ or _3.1 | ability]{.underline} | | | kHz audio_) (NOTE | | [(_speech_ or _3.1 | | 3)]{.underline} | | kHz | | | | audio_)]{.underline} | | | | | | | | [ NOTE: | | | | 2]{.underline} | +----------------------+----------------------+----------------------+ | [NOTE 1: If two high | | | | layer compatibility | | | | information elements | | | | are received, they | | | | are transferred in | | | | the same order as | | | | received in the | | | | INVITE message in | | | | the access transport | | | | parameter of the | | | | initial address | | | | m | | | | essage.]{.underline} | | | | | | | | [NOTE 2: Applicable | | | | if PSTN XML body | | | | with Progress | | | | indicator No.5 and | | | | No. 7 and no PSTN | | | | No. 1 or No. 2 has | | | | been | | | | r | | | | eceived]{.underline} | | | | | | | | [NOTE 3: The sending | | | | of the Transmission | | | | medium used is only | | | | applicable if two | | | | PSTN XML Bearer | | | | Capability elements | | | | for the fallback | | | | connection type in | | | | the INVITE was | | | | r | | | | eceived]{.underline} | | | +----------------------+----------------------+----------------------+
Add clause 7.2.3.2.5.4
##### [7.2.3.2.5.4 Progress indicator]{.underline} {#progress-indicator-1 .H6}
+----------------------------------+----------------------------------+ | [Table7.2.3.2.5.4-1: Handling of | | | the progress | | | indicator]{.underline} | | +----------------------------------+----------------------------------+ | [←ACM]{.underline} | [←183]{.underline} | +----------------------------------+----------------------------------+ | [Access transport | [ PSTN XML body with Progress | | parameter]{.underline} | indicator X]{.underline} | +----------------------------------+----------------------------------+ | [p.i. No. x]{.underline} | [p.i. No. x]{.underline} | | | | | [Except: No 7]{.underline} | | +----------------------------------+----------------------------------+
+----------------------------------+----------------------------------+ | [Table 7.2.3.2.5.4-2: Handling | | | of the progress | | | indicator]{.underline} | | +----------------------------------+----------------------------------+ | [←ACM]{.underline} | [←180]{.underline} | +----------------------------------+----------------------------------+ | [Access transport | [ PSTN XML body with Progress | | parameter]{.underline} | indicator X]{.underline} | +----------------------------------+----------------------------------+ | [p.i. No. x]{.underline} | [p.i. No. x]{.underline} | | | | | [Except: No 7]{.underline} | | +----------------------------------+----------------------------------+
Add clause 7.2.3.2.6.1
##### 7.2.3.2.6.1 Handling of the progress indicator {#handling-of-the-
progress-indicator .H6}
+----------------------------------+----------------------------------+ | [Table 7.2.3.2.5.6-1: Handling | | | of the progress | | | indicator]{.underline} | | +----------------------------------+----------------------------------+ | [←CPG]{.underline} | [←183]{.underline} | +----------------------------------+----------------------------------+ | [Access transport | [ PSTN XML body with Progress | | parameter]{.underline} | indicator X]{.underline} | +----------------------------------+----------------------------------+ | [p.i. No. x]{.underline} | [p.i. No. x]{.underline} | | | | | [Except: No.8, No.3, | | | No.7]{.underline} | | +----------------------------------+----------------------------------+
[]{.underline}
+----------------------------------+----------------------------------+ | [Table 7.2.3.2.5.6-1: Handling | | | of the progress | | | indicator]{.underline} | | +----------------------------------+----------------------------------+ | [←CPG]{.underline} | [←180]{.underline} | +----------------------------------+----------------------------------+ | [Access transport | [ PSTN XML body with Progress | | parameter]{.underline} | indicator X]{.underline} | +----------------------------------+----------------------------------+ | [p.i. No. x]{.underline} | [p.i. No. x]{.underline} | | | | | Except: No.3, No.7 | []{.underline} | +----------------------------------+----------------------------------+
[]{.underline}
Table 7.2.3.2.5.6-3: Handling of the progress indicator
+----------------------------------+----------------------------------+ | [←CPG]{.underline} | [←183]{.underline} | +----------------------------------+----------------------------------+ | [Event indicator]{.underline} | [ PSTN XML body with Progress | | | indicator X]{.underline} | +----------------------------------+----------------------------------+ | ["In-band information or | [No.8]{.underline} | | appropriate pattern is now | | | available"]{.underline} | ["In-band information or | | | appropriate pattern is now | | | available"]{.underline} | +----------------------------------+----------------------------------+ | [Progress]{.underline} | [p.i. No. x]{.underline} | | | | | [Except: No.8, No.3, | []{.underline} | | No.7]{.underline} | | +----------------------------------+----------------------------------+
[]{.underline}
Add clause 7.2.3.2.7.2
##### [7.2.3.2.7.2 Access Transport Parameter]{.underline} {#access-transport-
parameter-1 .H6}
[Received PSTN XML elements shall be mapped as shown in table
17c.]{.underline}
Add clause 7.2.3.2.9.2
##### [7.2.3.2.9.2 Access Transport Parameter]{.underline} {#access-transport-
parameter-2 .H6}
[Received PSTN XML elements shall be mapped as shown in table
17c.]{.underline}
[]{.underline}
Add clause 7.2.3.2.9.3
##### 7.2.3.2.9.3 Transmission Medium Used parameter (TMU) {#transmission-
medium-used-parameter-tmu-1 .H6}
[The TMU mapping procedures are described in 7.2.3.1.4.1]{.underline}
[In the case when the \"BearerCapability\" in the 200 OK is set to
\"unrestricted digital information with tones and announcements, the value is
not mapped to the TMU\"]{.underline}
[]{.underline}
Add clause 7.2.3.2.11.2
##### [7.2.3.2.11.2 Access Transport Parameter, User Tele Service,
Transmission medium used parameter]{.underline} {#access-transport-parameter-
user-tele-service-transmission-medium-used-parameter .H6}
[If the O-MGCF supports the PSTN XML body as a network option and if a PSTN
XML body is received within the 200 OK(INVITE), the O-MGCF shall map the
contained information into the CON as shown in Table 17c.]{.underline}
##### Clause 7.2.3.2.12 Receipt of Status Codes 4xx, 5xx or 6xx
{#clause-7.2.3.2.12-receipt-of-status-codes-4xx-5xx-or-6xx .H6}
Modify as follows
Figure 21: Receipt of Status codes 4xx, 5xx or 6xx
[If a Reason header is included in a 4XX, 5XX, 6XX response, then the Cause
Value of the Reason header shall be mapped to the ISUP Cause Value field in
the ISUP REL message. The mapping of the Reason header to the Cause Indicators
parameter is shown in table 8a (see clause 7.2.3.1.7). Otherwise coding of the
Cause parameter value in the REL message is derived from the SIP Status code
received according to table 18. The Cause Parameter Values are defined in
ITU-T Recommendation Q.850 [38].]{.underline}
Editor\'s Note: The usage of the Reason header in responses is FFS.
In all cases where SIP itself specify additional SIP side behaviour related to
the receipt of a particular INVITE response these procedures should be
followed in preference to the immediate sending of a REL message to BICC/ISUP.
If there are no SIP side procedures associated with this response, the REL
shall be sent immediately.
[NOTE 1: If an optional Reason header is included in a 4XX, 5XX, 6XX, then the
Cause Value of the Reason header can be mapped to the ISUP Cause Value field
in the ISUP REL message. The mapping of the optional Reason header to the
Cause Indicators parameter is out of the scope of the present
specification.]{.underline}
[NOTE 2: Depending upon the SIP side procedures applied at the O-MGCF it is
possible that receipt of certain 4xx/5xx/6xx responses to an INVITE may in
some cases not result in any REL message being sent to the BICC/ISUP network.
For example, if a 401 Unauthorized response is received and the O-MGCF
successfully initiates a new INVITE containing the correct credentials, the
call will proceed.]{.underline}
Table 18: 4xx/5xx/6xx Received on SIP side of O-MGCF
+----------------------------------+----------------------------------+ | [←REL (cause code)]{.underline} | [←4xx/5xx/6xx SIP | | | Message]{.underline} | +----------------------------------+----------------------------------+ | [127 (interworking | [400 Bad Request]{.underline} | | unspecified)]{.underline} | | +----------------------------------+----------------------------------+ | [127 (interworking | [401 Unauthorized]{.underline} | | unspecified)]{.underline} | | +----------------------------------+----------------------------------+ | [127 (interworking | [402 Payment | | unspecified)]{.underline} | Required]{.underline} | +----------------------------------+----------------------------------+ | [127 (interworking | [403 Forbidden]{.underline} | | unspecified)]{.underline} | | +----------------------------------+----------------------------------+ | [1 (Unallocated | [404 Not Found]{.underline} | | number)]{.underline} | | +----------------------------------+----------------------------------+ | [127 (interworking | [405 Method Not | | unspecified)]{.underline} | Allowed]{.underline} | +----------------------------------+----------------------------------+ | [127 (interworking | [406 Not Acceptable]{.underline} | | unspecified)]{.underline} | | +----------------------------------+----------------------------------+ | [127 (interworking | [407 Proxy authentication | | unspecified)]{.underline} | required]{.underline} | +----------------------------------+----------------------------------+ | [127 (interworking | [408 Request | | unspecified)]{.underline} | Timeout]{.underline} | +----------------------------------+----------------------------------+ | [22 (Number | [410 Gone]{.underline} | | changed)]{.underline} | | +----------------------------------+----------------------------------+ | [127 (interworking | [413 Request Entity too | | unspecified)]{.underline} | long]{.underline} | +----------------------------------+----------------------------------+ | [127 (interworking | [414 Request-URI too | | unspecified)]{.underline} | long]{.underline} | +----------------------------------+----------------------------------+ | [127 (interworking | [415 Unsupported Media | | unspecified)]{.underline} | type]{.underline} | +----------------------------------+----------------------------------+ | [127 (interworking | [416 Unsupported URI | | unspecified)]{.underline} | scheme]{.underline} | +----------------------------------+----------------------------------+ | [127 (interworking | [420 Bad Extension]{.underline} | | unspecified)]{.underline} | | +----------------------------------+----------------------------------+ | [127 (interworking | [421 Extension | | unspecified)]{.underline} | required]{.underline} | +----------------------------------+----------------------------------+ | [127 (interworking | [423 Interval too | | unspecified)]{.underline} | brief]{.underline} | +----------------------------------+----------------------------------+ | [24 (call rejected due to ACR | [433 Anonymity Disallowed (note | | supplementary | 1)]{.underline} | | service)]{.underline} | | +----------------------------------+----------------------------------+ | [20 Subscriber | [480 Temporarily | | absent]{.underline} | Unavailable]{.underline} | +----------------------------------+----------------------------------+ | [127 (interworking | [481 Call/Transaction does not | | unspecified)]{.underline} | exist]{.underline} | +----------------------------------+----------------------------------+ | [127 (interworking | [482 Loop detected]{.underline} | | unspecified)]{.underline} | | +----------------------------------+----------------------------------+ | [127 (interworking | [483 Too many hops]{.underline} | | unspecified)]{.underline} | | +----------------------------------+----------------------------------+ | [28 (Invalid Number | [484 Address | | format)]{.underline} | Incomplete]{.underline} | +----------------------------------+----------------------------------+ | [127 (interworking | [485 Ambiguous]{.underline} | | unspecified)]{.underline} | | +----------------------------------+----------------------------------+ | [17 (User busy)]{.underline} | [486 Busy Here]{.underline} | +----------------------------------+----------------------------------+ | [127 (Interworking unspecified) | [487 Request | | or not interworked. (NOTE | terminated]{.underline} | | 2)]{.underline} | | +----------------------------------+----------------------------------+ | [127 (interworking | [488 Not acceptable | | unspecified)]{.underline} | here]{.underline} | +----------------------------------+----------------------------------+ | [127 (interworking | [493 Undecipherable]{.underline} | | unspecified)]{.underline} | | +----------------------------------+----------------------------------+ | [127 (interworking | [500 Server Internal | | unspecified)]{.underline} | error]{.underline} | +----------------------------------+----------------------------------+ | [127 (interworking | [501 Not | | unspecified)]{.underline} | implemented]{.underline} | +----------------------------------+----------------------------------+ | [127 (interworking | [502 Bad Gateway]{.underline} | | unspecified)]{.underline} | | +----------------------------------+----------------------------------+ | [127 (interworking | [503 Service | | unspecified)]{.underline} | Unavailable]{.underline} | +----------------------------------+----------------------------------+ | [127 (interworking | [504 Server timeout]{.underline} | | unspecified)]{.underline} | | +----------------------------------+----------------------------------+ | [127 (interworking | [505 Version not | | unspecified)]{.underline} | supported]{.underline} | +----------------------------------+----------------------------------+ | [127 (interworking | [513 Message too | | unspecified)]{.underline} | large]{.underline} | +----------------------------------+----------------------------------+ | [127 (interworking | [580 Precondition | | unspecified)]{.underline} | failure]{.underline} | +----------------------------------+----------------------------------+ | [17 (User busy)]{.underline} | [600 Busy | | | Everywhere]{.underline} | +----------------------------------+----------------------------------+ | [21 (Call rejected)]{.underline} | [603 Decline]{.underline} | +----------------------------------+----------------------------------+ | [1 (unallocated | [604 Does not exist | | number)]{.underline} | anywhere]{.underline} | +----------------------------------+----------------------------------+ | [127 (interworking | [606 Not acceptable]{.underline} | | unspecified)]{.underline} | | +----------------------------------+----------------------------------+ | [NOTE 1: Anonymity Disallowed, | | | RFC5079 [77] | | | refers.]{.underline} | | | | | | [NOTE 2: No interworking if the | | | O-MGCF previously issued a | | | CANCEL request for the | | | INVITE.]{.underline} | | | | | | [NOTE 3: The 4xx/5xx/6xx SIP | | | responses that are not covered | | | in this table are not | | | interworked.]{.underline} | | +----------------------------------+----------------------------------+
[Received PSTN XML elements shall be mapped as shown in table
17c.]{.underline}
##### Clause 7.2.3 2.13 Receipt of a BYE {#clause-7.2.3-2.13-receipt-of-a-bye
.H6}
Modify as follows
Figure 22: Receipt of BYE method
[If a Reason header field with Q.850 Cause Value is included in the BYE
request, then the Cause Value shall be mapped to the ISUP Cause Value field in
the ISUP REL. The mapping of the Reason header to the Cause Indicators
parameter is shown in table 8a (see clause 7.2.3.1.7).On receipt of a BYE
request, the O-MGCF sends a REL message with Cause Code value 16 (Normal Call
Clearing).]{.underline}
[Received PSTN XML elements shall be mapped as shown in table
17c.]{.underline}
##### Clause 7.2.3.2.14 Receipt of the Release Message
{#clause-7.2.3.2.14-receipt-of-the-release-message .H6}
Modify as follows
In the case that the REL message is received and a final response (i.e. 200 OK
(INVITE)) has already been received the O-MGCF shall send a BYE request. If
the final response (i.e. 200 OK (INVITE)) has not already been received the
O‑MGCF shall send a CANCEL method.
[A Reason header field containing the received (Q.850) Cause Value of the REL
message shall be added to the CANCEL or BYE request. The mapping of the Cause
Indicators parameter to the Reason header is shown in table 9a (see clause
7.2.3.1.8).]{.underline}
[Received PSTN XML elements shall be mapped as shown in table
17c.]{.underline}
##### Clause 7.4.5 Sub-addressing (SUB) {#clause-7.4.5-sub-addressing-sub .H6}
Modify as follows:
~~The actions of the MGCF at the ISUP/BICC side are described in ITU-T
Recommendation Q.731.8 [42] under the clause \"Interactions with other
networks\".~~
##### [7.4.5.1 General]{.underline} {#general .H6}
[The ISDN Subaddress in ISUP is transported within the Access Transport
Parameter. The Coding of the Subaddress parameter within the Access Transport
Parameter is described within EN 300 403‑1 [91]. The isdn-Subaddress parameter
carried within a tel or sip URI is defined within RFC3966 [92].]{.underline}
##### [7.4.5.2 Incoming Call Interworking from SIP to ISUP at
I-MGCF]{.underline} {#incoming-call-interworking-from-sip-to-isup-at-i-mgcf
.H6}
[The mapping in table 24ba of the isdn-Subaddress parameter received within a
tel or sip URI to the ISUP Access Transport Parameter encapsulating the
Subaddress shall be applied.]{.underline}
[The mapping in table 24bb of the Subaddress received within an ANM Message
containing the ISUP Access Transport Parameter to the isdn-Subaddress of a tel
or sip URI to be sent within a 200 OK (INVITE) shall be applied.]{.underline}
[Table 24ba: Mapping of the Subaddress received in an initial INVITE\
]{.underline}to the Subaddress sent in the IAM
+----------------+----------------+----------------+----------------+ | [SIP Message | [ISUP Message | | | | INVIT | IA | | | | E]{.underline} | M]{.underline} | | | +----------------+----------------+----------------+----------------+ | [Source SIP | [Source | [ISUP | [Derived value | | header field | component | Parameter | of parameter | | and | valu | fiel | fiel | | componen | e]{.underline} | d]{.underline} | d]{.underline} | | t]{.underline} | | | | +----------------+----------------+----------------+----------------+ | [_| [\";isub=\" | [Access | [called party | |_ Request-URI __| 1*uri | Transport | Subaddres | | including the | c]{.underline} | Paramete | s]{.underline} | | isdn-Subaddres | | r]{.underline} | | | s]{.underline} | [\"uric\" | | [(see | | | containing the | []{.underline} | note | | | Subaddress | | )]{.underline} | | | digit | | | | | s]{.underline} | | | +----------------+----------------+----------------+----------------+ | [P-Ass | [\";isub=\" | [Access | [calling party | | erted-Identity | 1*uri | Transport | Subaddres | | header | c]{.underline} | Paramete | s]{.underline} | | Fiel | | r]{.underline} | | | d]{.underline} | [\"uric\" | | [(see | | | containing the | [\ | note | | [including the | Subaddress | ]{.underline} | )]{.underline} | | isdn-Subaddres | digit | | | | s]{.underline} | s]{.underline} | | | +----------------+----------------+----------------+----------------+ | [NOTE: The | | | | | Type of | | | | | Subaddress as | | | | | described | | | | | within EN 300 | | | | | 403‑1 [91] | | | | | Bits 5,6,7 and | | | | | shall be set | | | | | to 0 0 0 | | | | |_ \"NSAP (ITU-T | | | | | Recommendation | | | | | X.213 [23] | | | | | and ISO/IEC | | | | | 8348 Add.2 | | | | | [93)\" | | | | | _]{.underline} | | | | +----------------+----------------+----------------+----------------+
[]{.underline}
[Table 24bb: Mapping of the Subaddress received in an ANM\ ]{.underline}to the
Subaddress sent in the 200 OK (INVITE)
+----------------+----------------+----------------+----------------+ | [ISUP Message | [SIP 200 | | | | AN | (OK | | | | M]{.underline} | )]{.underline} | | | +----------------+----------------+----------------+----------------+ | [ISUP | [Source | [Source SIP | [Derived value | | Parameter | component | header field | of parameter | | fiel | valu | and | fiel | | d]{.underline} | e]{.underline} | componen | d]{.underline} | | | | t]{.underline} | | +----------------+----------------+----------------+----------------+ | [connected | [Subaddress | [P-Ass | [\";isub=\" | | party | encapsulated | erted-Identity | 1*uri | | Subaddres | in the ISUP | including the | c]{.underline} | | s]{.underline} | Access | isdn-Subaddres | | | | Transport | s]{.underline} | [The | | | paramete | | Subaddress | | | r]{.underline} | | digits | | | | | included into | | | [NOTE | | the \"uric\" | | | 1]{.underline} | | shall be | | | | | derived from | | | | | the Access | | | | | Transport | | | | | paramete | | | | | r]{.underline} | | | | | | | | | | [(see | | | | | note | | | | | )]{.underline} | +----------------+----------------+----------------+----------------+ | [NOTE: The | | | | | Type of | | | | | Subaddress as | | | | | described | | | | | within EN 300 | | | | | 403‑1 [91] | | | | | shall not be | | | | | mapped | | | | | .]{.underline} | | | | +----------------+----------------+----------------+----------------+
[]{.underline}
##### [7.4.5.3 Outgoing Call Interworking from ISUP to SIP at
O-MGCF]{.underline} {#outgoing-call-interworking-from-isup-to-sip-at-o-mgcf
.H6}
[The mapping in table 24bc of the isdn-Subaddress parameter received within a
tel or sip URI to the ISUP Access Transport Parameter encapsulating the
Subaddress shall be applied.]{.underline}
[The mapping in table 24bd of the Subaddress received within an ANM Message
containing the ISUP Access Transport Parameter to the isdn-Subaddress of a tel
or sip URI to be sent within a 200 OK (INVITE) shall be applied.]{.underline}
[Table 24bc:]{.underline} Mapping of the Subaddress received in an IAM to the
Subaddress sent in the INVITE
+----------------+----------------+----------------+----------------+ | [ISUP IAM | [SIP INVITE | | | | Messag | Messag | | | | e]{.underline} | e]{.underline} | | | +----------------+----------------+----------------+----------------+ | [ISUP | [Source | [Source SIP | [Derived value | | Parameter | component | header field | of parameter | | fiel | valu | and | fiel | | d]{.underline} | e]{.underline} | componen | d]{.underline} | | | | t]{.underline} | | +----------------+----------------+----------------+----------------+ | [called party | [Access | [Request-URI | [\";isub=\" | | Subaddress\ | Transport | and To header | 1*uri | | ]{.underline} | paramete | field | c]{.underline} | | | r]{.underline} | including the | | | | | isdn-Subaddres | [The | | | [Note | s]{.underline} | Subaddress | | | 1]{.underline} | | digits | | | | | included into | | | | | the \"uric\" | | | | | shall be | | | | | derived from | | | | | the Access | | | | | Transport | | | | | paramete | | | | | r]{.underline} | | | | | | | | | | [(see | | | | | note | | | | | )]{.underline} | +----------------+----------------+----------------+----------------+ | [calling party | [Access | [P-Ass | [\";isub=\" | | Subaddress\ | Transport | erted-Identity | 1*uri | | ]{.underline} | paramete | header field | c]{.underline} | | | r]{.underline} | and From | | | | | header field | [The | | | [Note | including the | Subaddress | | | 1]{.underline} | isdn-Subaddres | digits | | | | s]{.underline} | included into | | | | | the \"uric\" | | | | | shall be | | | | | derived from | | | | | the Access | | | | | Transport | | | | | paramete | | | | | r]{.underline} | | | | | | | | | | [(see | | | | | note | | | | | )]{.underline} | +----------------+----------------+----------------+----------------+ | [NOTE: The | | | | | \"Type of | | | | | Subaddress\" | | | | | as described | | | | | within EN 300 | | | | | 403‑1 [91] | | | | | shall not be | | | | | mappe | | | | | d]{.underline} | | | | +----------------+----------------+----------------+----------------+
[]{.underline}
[Table 24bd:]{.underline} Mapping of the Subaddress received in a 200OK to the
Subaddress sent in the ANM
+----------------+----------------+----------------+----------------+ | [200O | []{.underline} | [AN | []{.underline} | | K]{.underline} | | M]{.underline} | | +----------------+----------------+----------------+----------------+ | [Source SIP | [Source | [ISUP | [Derived value | | header field | component | Parameter | of parameter | | and | valu | fiel | fiel | | componen | e]{.underline} | d]{.underline} | d]{.underline} | | t]{.underline} | | | | +----------------+----------------+----------------+----------------+ | [P-Ass | [\";isub=\" | [connected | [Access | | erted-Identity | 1*uri | party | Transport | | including | c]{.underline} | Subaddres | paramete | | th | | s]{.underline} | r]{.underline} | | e]{.underline} | []{.underline} | | | | | | | [(see | | | | | note | | | | | )]{.underline} | +----------------+----------------+----------------+----------------+ | [NOTE: The | | | | | \"Type of | | | | | Subaddress as | | | | | described\" | | | | | within EN 300 | | | | | 403‑1 [91] | | | | | Bits 5,6,7 and | | | | | shall be set | | | | | to 0 0 0 | | | | | _\"NSAP\ | | | | | (ITU-T | | | | | R | | | | | ecommendation. | | | | | X.213 [23] | | | | | and ISO/IEC | | | | | 8348 Add.2 | | | | | [93])\" | | | | |_]{.underline} | | | | +----------------+----------------+----------------+----------------+
[]{.underline}
##### Clause 7.4.21 User-to-User Signalling (UUS) {#clause-7.4.21-user-to-
user-signalling-uus .H6}
Modify as follows:
##### [7.4.21.1 User-to-User Signalling (UUS) service 1
(implicit)]{.underline} {#user-to-user-signalling-uus-service-1-implicit .H6}
[The coding of the User-user information element is described within EN 300
356-8 [10]. The User-to-User header is defined within ES 283 003
[3].]{.underline}
[NOTE 1: If the draft-johnston- sipping-cc-uui is agreed then the Reference to
ES 283 003 [3] will be replaced by the agreed RFC.]{.underline}
[NOTE 2: The IETF RFC needs more detail on encoding of the UUI as defined
within ITU‑T Recommendation Q.763 i.e. the protocol discriminator and the
encoding syntax.]{.underline}
[The content of the uuidata field of the User-to-User header shall start with
the first octet being the protocol discriminator and followed by the user
information octets.]{.underline}
[The format of the uuidata field shall be the hexadecimal representation of
binary data coded in ascii alphanumeric characters. For example, the 8- bit
binary value 0011- 1111 is 3F in hexadecimal. To code this in ascii, one 8-
bit byte containing the ascii code for the character \'3\' (0011- 0011 or
033H) and one 8- bit byte containing the ascii code for the character \'F\'
(0100- 0110 or 046H) are required. For each byte value, the high-order
hexadecimal digit is always the first digit of the pair of hexadecimal digits.
The ascii letters used for the hex digits shall always be capital
form.]{.underline}
[For example:]{.underline}
**[User-to-User:
00C81031313232333334343535363637373838FA08303900064630E9E0;encoding=hex]{.underline}**
[Interworking procedures between the user-user information element and User-
to-User header for the User-to-user signalling service 1 are defined in the
following clauses.]{.underline}
[NOTE 1: For 3GPP Release 8 the encoding of data should be described in more
detail.]{.underline}
[NOTE 2: For 3GPP Release 8 the interworking of the encoded data should be
described in more detail.]{.underline}
##### [7.4.21.1.1 Incoming Call Interworking from SIP to ISUP at
I-MGCF]{.underline} {#incoming-call-interworking-from-sip-to-isup-at-i-mgcf-1
.H6}
[On the receipt of the User-to-User Header if the encoding header field
parameter of the User-to-User header set to hex the I-MGCF shall map the
content of the _uuidata_ header field to the _protocol discriminator_ and
_user information_ parameters of the _user-user_ information element. Mapping
procedures for other encoding header field values are or further
study.]{.underline}
[The _length of user-user contents_ parameter shall be set by the I-MGCF
according to the normal procedures.]{.underline}
[The I-MGCF maps the messages transporting the user-user information according
to the normal interworking procedures.]{.underline}
[Table 7.4.21.1.1:]{.underline} Mapping of the User-to-User header to the ISUP
user-to-user information parameter
* * *
[SIP parameter ]{.underline} [ ISUP parameter]{.underline}  
[Source SIP header field and component]{.underline} [Source component
value]{.underline} [ISUP Parameter field]{.underline} [Derived value of
parameter field]{.underline} [User-to-User]{.underline} [uuidata]{.underline}
[User-to-User]{.underline} [Protocol discriminator and User
Information]{.underline}
* * *
[]{.underline}
##### [7.4.21.1.2 Outgoing Call Interworking from ISUP to SIP at
O-MGCF]{.underline} {#outgoing-call-interworking-from-isup-to-sip-at-o-mgcf-1
.H6}
[On the receipt of the user-user information element the O-MGCF shall map the
protocol discriminator and user information parameters to the uuidata header
field of the User-to-User header.]{.underline}
[The O-MGCF shall set the encoding header field parameter of the User-to-User
header to the \"hex\" value]{.underline}
[The O-MGCF maps the messages transporting the user-user information according
to the normal interworking procedures.]{.underline}
[Table 7.4.21.1.1: Mapping of the ISUP user-to-user information
parameter]{.underline} to the User-to-User header
* * *
[ ISUP parameter]{.underline} [ SIP parameter]{.underline}  
[ISUP Parameter field]{.underline} [Source parameter field]{.underline}
[Source SIP header field and component]{.underline} [Derived value of
parameter field]{.underline} [User-to-User]{.underline} [Protocol
discriminator and User Information]{.underline} [User-to-User]{.underline}
[uuidata]{.underline}
* * *
[]{.underline}
##### [7.4.21.2 User-to-User Signalling (UUS) service 1
(explicit)]{.underline} {#user-to-user-signalling-uus-service-1-explicit .H6}
[The actions of the MGCF at the ISUP/BICC side are described in ITU-T
Recommendation Q.737.1[42] under the clause \"Interactions with other
networks\".]{.underline}
##### [7.4.21.3 User-to-User Signalling (UUS) service 2 (implicit &
explicit)]{.underline} {#user-to-user-signalling-uus-service-2-implicit-
explicit .H6}
[The actions of the MGCF at the ISUP/BICC side are described in ITU-T
Recommendation Q.737.1[42] under the clause \"Interactions with other
networks\".]{.underline}
##### [7.4.21.4 User-to-User Signalling (UUS) service 3 (implicit &
explicit)]{.underline} {#user-to-user-signalling-uus-service-3-implicit-
explicit .H6}
[The actions of the MGCF at the ISUP/BICC side are described in ITU-T
Recommendation Q.737.1[42] under the clause \"Interactions with other
networks\".]{.underline}
##### Annex D (informative):[ Bibliography]{.underline} {#annex-d-informative-
bibliography .H6}
[draft-johnston-sipping-cc-uui-02 \"Transporting User to User Information for
Call Centres using SIP\" 2007]{.underline}
#