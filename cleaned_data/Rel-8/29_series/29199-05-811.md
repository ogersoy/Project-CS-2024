# Foreword
This Technical Specification has been produced by the 3^rd^ Generation
Partnership Project (3GPP).
3GPP acknowledges the contribution of the Parlay X Web Services specifications
from The Parlay Group. The Parlay Group is pleased to see 3GPP acknowledge and
publish the present document, and the Parlay Group looks forward to working
with the 3GPP community to improve future versions of the present document.
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# Introduction
The present document is part 5 of a multi-part deliverable covering the 3^rd^
Generation Partnership Project; Technical Specification Group Core Network and
Terminals; Open Service Access (OSA); Parlay X Web Services, as identified
below:
Part 1: \"Common\"
Part 2: \"Third party call\"
Part 3: \"Call Notification\"
Part 4: \"Short Messaging\"
**Part 5: \"Multimedia Messaging\"**
Part 6: \"Payment\"
Part 7: \"Account management\"
Part 8: \"Terminal Status\"
Part 9: \"Terminal location\"
Part 10: \"Call handling\"
Part 11: \"Audio call\"
Part 12: \"Multimedia conference\"
Part 13: \"Address list management\"
Part 14: \"Presence\"
Part 15: \"Message Broadcast\"
Part 16: \"Geocoding\"
Part 17: \"Application driven Quality of Service (QoS)\"
Part 18: \"Device Capabilities and Configuration\"
Part 19: \"Multimedia streaming control\"
Part 20: \"Multimedia multicast session management\"
Part 21: \"Content management\"
Part 22: \"Policy\"
# 1 Scope
The present document is Part 5 of the Stage 3 Parlay X Web Services
specification for Open Service Access (OSA).
The OSA specifications define an architecture that enables application
developers to make use of network functionality through an open standardized
interface, i.e. the OSA APIs. The concepts and the functional architecture for
the OSA are contained in 3GPP TS 23.198 [3]. The requirements for OSA are
contained in 3GPP TS 22.127 [2].
The present document specifies the Multimedia Messaging Web Service aspects of
the interface. All aspects of the Multimedia Messaging Web Service are defined
here, these being:
  * Name spaces.
  * Sequence diagrams.
  * Data definitions.
  * Interface specification plus detailed method descriptions.
  * Fault definitions.
  * Service policies.
  * WSDL Description of the interfaces.
The present document has been defined jointly between 3GPP TSG CT WG5, ETSI
TISPAN and The Parlay Group.
Maintenance of up to 3GPP Rel-8 and new OSA Stage 1, 2 and 3 work beyond Rel-9
was moved to OMA in June 2008.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
  * References are either specific (identified by date of publication, > edition number, version number, etc.) or non‑specific.
  * For a specific reference, subsequent revisions do not apply.
  * For a non-specific reference, the latest version applies. In the > case of a reference to a 3GPP document (including a GSM document), > a non-specific reference implicitly refers to the latest version > of that document _in the same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 22.127: \"Service Requirement for the Open Services Access (OSA);
Stage 1\".
[3] 3GPP TS 23.198: \"Open Service Access (OSA); Stage 2\".
[4] 3GPP TS 22.101: \"Service aspects; Service principles\".
[5] W3C Recommendation (2 May 2001): \"XML Schema Part 2: Datatypes\".
NOTE: Available at http://www.w3.org/TR/2001/REC-xmlschema-2-20010502/.
[6] 3GPP TS 29.199-1: \"Open Service Access (OSA); Parlay X Web Services; Part
1: Common\".
[7] W3C Note (11 December 2001): \"SOAP Messages with Attachments\".
NOTE: Available at http://www.w3.org/TR/SOAP-attachments.
[8] 3GPP TS 23.140 \"Multimedia Messaging Service (MMS); Functional
description; Stage 2\".
[9] RFC2822: \"Internet Message Format\".
NOTE: Available at http://www.ietf.org/rfc/rfc2822.txt
# 3 Definitions and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
3GPP TS 29.199-1 [6] apply.
Additionally the following definition is needed:
**Whitespace:** see definition for CFWS as defined in RFC2822 [9].
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in 3GPP TS
29.199-1 [6] and the following apply:
EMS Enhanced Messaging Service
IM Instant Messaging
MMS Multimedia Messaging Service
MMS-C Multimedia Messaging Service - Centre
SMS Short Message Service
# 4 Detailed service description
Currently, in order to programmatically receive and send Multimedia Messages,
it is necessary to write applications using specific protocols to access MMS
functions provided by network elements (e.g. MMS-C). This approach requires ap
This clause describes Parlay X Web Service for sending and receiving
Multimedia messages. The overall scope of this Web Service is to provide
application developers primitives to handle Multimedia messages in a simple
way. In fact, using Multimedia Messaging Web Service, application developers
can invoke Multimedia Messaging functions without specific Telco knowledge.
This version of Multimedia Messaging Web Services provides generic messaging
features that can support different messaging service types such as SMS, MMS,
IM, E-mail etc.
Multimedia Messaging provides operations (see clause 8.1, SendMessage API) for
sending a Multimedia message to the network and a polling mechanism for
monitoring the delivery status of a sent Multimedia message. It also provides
an asynchronous notification mechanism for delivery status (see clause 8.3,
MessageNotification API). In addition, a mechanism is provided to start and
stop the notification of delivery receipts (see clause 8.4,
MessageNotificationManager API).
Multimedia Messaging also allows an application to receive Multimedia
messages. Both a polling (see clause 8.2, ReceiveMessage API) and an
asynchronous notification mechanism (see clause 8.3, Message Notification API)
are available.
Figure 4.1 shows an example scenario using sendMessage and
getMessageDeliveryStatus to send data to subscribers and to determine if the
data has been received by the subscriber. The application invokes a Web
Service to retrieve a stock quote (1) and (2) and sends the current quote -
sendMessage - using the Parlay X Interface (3) of the Multimedia Messaging Web
Service. After invocation, the Multimedia Message Web Service sends the
message to an MMS-C using the MM7 interface (4) for onward transmission (5) to
the subscriber over the Mobile network.
Later, when the next quote is ready, the application checks to see -
getMessageDeliveryStatus - if the previous quote has been successfully
delivered to the subscriber. If not, it may for instance perform an action
(not shown) to provide a credit for the previous message transmission. This
way, the subscriber is only charged for a stock quote if it is delivered on
time.
Figure 4.1: Multimedia Messaging Scenario
Alternatively this service could have been built using WAP push features in
the network.
Figure 4.2 shows an example scenario using sendMessage and
getMessageDeliveryStatus to send a link to subscribers and to determine if the
data has been received by the subscriber. The application invokes a Web
Service to generate a stock quote graph (1) and (2) and sends the current
quote as a WAP push link - sendMessage - using the Parlay X Interface (3) of
the Multimedia Messaging Web Service. After invocation, the Multimedia Message
Web Service sends the message to an SMS (4) for onward transmission (5) to the
subscriber over the Mobile network. The subscriber can then open the link and
access his content.
{width="5.817361111111111in" height="3.8979166666666667in"}
Figure 4.2: WAP push scenario
# 5 Namespaces
The SendMessage interface uses the namespace:
http://www.csapi.org/wsdl/parlayx/multimedia_messaging/send/v4_0
The ReceiveMessage interface uses the namespace:
http://www.csapi.org/wsdl/parlayx/multimedia_messaging/receive/v4_0
The MessageNotification interface uses the namespace:
http://www.csapi.org/wsdl/parlayx/multimedia_messaging/notification/v4_0
The MessageNotificationManager interface uses the namespace:
http://www.csapi.org/wsdl/parlayx/multimedia_messaging/notification_manager/v4_0
The data types are defined in the namespace:
http://www.csapi.org/schema/parlayx/multimedia_messaging/v4_0
The \'xsd\' namespace is used in the present document to refer to the XML
Schema data types defined in XML Schema [5]. The use of the name \'xsd\' is
not semantically significant.
# 6 Sequence diagrams
## 6.1 Send picture
With the advent of picture capable mobile phones, the exchange of photos to
mobile phones is becoming more common place. This sequence diagram shows an
application where a person can send a picture from an online photo album to a
mobile phone.
{width="5.379861111111111in" height="6.35in"}
## 6.2 Send WAP push message
For mobile phones capable of receiving WAP push messages, link to content can
be sent using this example. The suggested MIME type for the attachment defined
by OMA is text/vnd.wap.sl for sending HTTP links or WAP links to a mobile
phone. This sequence diagram shows an application where a link is sent to a
mobile phone, and the mobile phone fetches the content.
# 7 XML schema data type definition
## 7.1 DeliveryStatus enumeration
List of delivery status values.
* * *
Enumeration Description DeliveredToTerminal Successful delivery to Terminal.
DeliveryUncertain Delivery status unknown: e.g. because it was handed off to
another network. DeliveryImpossible Unsuccessful delivery; the message could
not be delivered before it expired. MessageWaiting The message is still queued
for delivery. This is a temporary state, pending transition to one of the
preceding states. DeliveredToNetwork Successful delivery to the network
enabler responsible for distributing the multimedia message further in the
network. DeliveryNotificationNotSupported Unable to provide delivery receipt
notification. NotifyMessageDeliveryReceipt function will provide
"DeliveryNotificationNotSupported" to indicate that delivery receipt for the
specified address in a SendMessageRequest is not supported.
* * *
## 7.2 MessagePriority enumeration
List of delivery priority values.
* * *
Enumeration Description Default Default message priority Low Low message
priority Normal Normal message priority High High message priority
* * *
## 7.3 DeliveryInformation structure
Delivery status information.
* * *
Element name Element type Optional Description Address xsd:anyURI No Address
associated with the delivery status. The address field is coded as a URI.
DeliveryStatus DeliveryStatus No Indicates delivery status for the destination
address. Description xsd:string Yes Used together with delivery status
(e.g.DeliveryImpossible) to provide additional information.
* * *
## 7.4 MessageReference structure
Message information.
* * *
Element name Element type Optional Description
messageIdentifier xsd:string Yes If present, contains a reference to a message
stored in the Parlay X gateway. If the message is pure text, this parameter is
not present.
messageService\ xsd:string No Number associated with the invoked Message
service, i.e. the destination address used by the terminal to send the
message. ActivationNumber
senderAddress xsd:anyURI No Indicates message sender address.
subject xsd:string Yes If present, indicates the subject of the received
message. This parameter will not be used for SMS services.
priority MessagePriority No The priority of the message: default is Normal.
message xsd:string Yes If present, then the **messageIdentifier** is not
present and this parameter contains the whole message. The type of the message
is always pure ASCII text in this case. The message will not be stored in the
Parlay X gateway.
format MessageFormat Yes Indicates message format type. If not present, MMS
message format (default) is assumed.
DateTime xsd:dateTime Yes Time when message was received by operator
* * *
## 7.5 MessageURI structure
Message location information.
* * *
Element name Element type Optional Description bodyText xsd:string Yes
Contains the message body if it is encoded as ASCII text. fileReferences
xsd:anyURI [0..unbounded] Yes This is an array of URI references to all the
attachments in the Multimedia message. These are URIs to different files, e.g.
GIF pictures or pure text files.
* * *
## 7.6 ScheduledDeliveryStatus enumeration
List of scheduled multimedia message delivery status values
* * *
Enumeration Description Scheduled The Message has been scheduled, the
scheduled time has not started. NotSent Message could not be sent before end
of scheduled time. Sent The Message has been sent within the scheduled time.
Cancelled Message has been cancelled. Some messages may have been sent.
Partially Sent Message is sent to some, but not to all the recipients.
StatusUnavailable Unable to provide delivery information.
* * *
## 7.7 ScheduledDeliveryInformation structure
Scheduled delivery information
* * *
Element name Element type Optional Description
DeliveryStatus ScheduledDeliveryStatus No Indicates the delivery result for
the destination address.
NumberOf\ xsd:int Yes If applicable, the number of messages already sent.
MessagesSent
* * *
## 7.8 MessageFormat enumeration
List of message format types
* * *
Enumeration Description MMS Multimedia messaging service WapPush Wap Push
messaging service SMS Short messaging Service EMS Enhanced messaging service,
as defined in 3GPP TS 23.040 SmartMessaging™ Smart messaging (defines
alogo/ringtone format) IM Instant (immediate) messaging service (Can be short
IM or large IM. Underlying network can decide message type from message
context) IMPagerMode Short IM text message, as defined in OMA-TS-
SIMPLE_IM-V1_0. IMLargeMessage Large IM message with multimedia, as defined in
OMA-TS-SIMPLE_IM-V1_0. IMFileTransfer Large IM used for File Transfer, as
defined in OMA-TS-SIMPLE_IM-V1_0 EMail E-mail messaging service
* * *
# 8 Web Service interface definition
## 8.1 Interface: SendMessage
Operations to send messages and check status on sent messages.
### 8.1.1 Operation: SendMessage
Request to send a Message to a set of destination addresses, returning a
**requestIdentifier** to identify the message. The **requestIdentifier** can
subsequently be used by the application to poll for the message status, i.e.
using **getMessageDeliveryStatus** to see if the message has been delivered or
not. The content is sent as one or more attachments as specified in SOAP
Messages with Attachments [7].
**addresses** may include group URIs as defined in the Address List Management
specification. If groups are not supported, a PolicyException (POL0006) will
be returned to the application.
Optionally the application can also indicate the sender address
(**senderAddress**), i.e. the string that is displayed on the user\'s terminal
as the originator of the message, the message **priority** , the message
**subject** , the **charging** information and a **receiptRequest**. The
**receiptRequest** which is a SimpleReference structure indicates the
application endpoint, interface used for notification of delivery receipt and
a correlator that uniquely identifies the sending request. By invoking this
operation with the optional **receiptRequest** part the application requires
to receive the notification of the status of the message delivery.
The optional message part **receiptRequest** is not used (or will be
overridden) in case the **startDeliveryReceiptNotification** operation is used
when the application requires to receive delivery receipt notifications. This
is to avoid overlapping criteria.
If notification mechanism is not supported by a network a fault (SVC0283) will
be returned to the application and the message will not be sent to the
addresses specified. Notification to the application is done by invoking the
**notifyMessageDeliveryReceipt** operation at the endpoint specified in
**receiptRequest**.
The correlator provided in the **receiptRequest** must be unique for this Web
Service and application at the time the notification is initiated, otherwise a
**ServiceException** (SVC0005) will be returned to the application.
Optional parameter **format** is used to indicate the format of a message that
is included in the request (at the same time it indicates preferred delivery
method for the message). If the parameter is not present, MMS format type is
assumed. Enumeration data type **MessageFormat** includes message format types
that can be used with these specifications. If a specified message format is
not supported, a **ServiceException** (SVC0284) will be returned to the
application.
#### 8.1.1.1 Input message: SendMessageRequest
* * *
Part name Part type Optional Description
Addresses xsd:anyURI [1..unbounded] No Destination addresses for the Message.
SenderAddress xsd:string Yes Message sender address. This parameter is not
allowed for all 3^rd^ party providers. Parlay X server needs to handle this
according to a SLA for the specific application and its use can therefore
result in a PolicyException.
Subject xsd:string Yes Message subject. If mapped to SMS this parameter will
be used as the senderAddress, even if a separate senderAddress is provided.
Priority MessagePriority Yes Priority of the message. If not present, the
network will assign a priority based on an operator policy.
Charging Common:Charging\ Yes Charging to apply to this message. Information
ReceiptRequest Common:Simple\ Yes It defines the application endpoint,
interfaceName and correlator that will be used to notify the application when
the message has been delivered to terminal or if delivery is impossible. It is
not used (or will be overridden) in case the startDeliveryReceiptNotification
operation is used. Reference
Format MessageFormat Yes Includes message format type. If not present, the
default is MMS message format type.
* * *
NOTE: The input message contains one or more attachments, with appropriate
content as defined by SOAP Messages with Attachments [7].
#### 8.1.1.2 Output message: SendMessageResponse
* * *
Part name Part type Optional Description result xsd:string No It is a
correlation identifier that is used in a **getMessageDeliveryStatus** message
invocation, i.e. to poll for the delivery status of all of the sent Messages.
* * *
#### 8.1.1.3 Referenced faults
ServiceException from [6]:
  * SVC0001 - Service error.
  * SVC0002 - Invalid input value.
  * SVC0004 - No valid addresses.
  * SVC0006 - Invalid group.
  * SVC0283 - Delivery Receipt Notification not supported
  * SVC0284 -- Message format type not supported.
PolicyException from [6]:
  * POL0001 - Policy error.
  * POL0006 - Groups not allowed.
  * POL0007 - Nested groups not allowed.
  * POL0008 - Charging not supported.
  * POL0012 -- Too many description entries specified.
  * POL0013 -- Addresses duplication.
### 8.1.2 Operation: GetMessageDeliveryStatus
This is a poll method used by the application to retrieve delivery status for
each message sent as a result of a previous **sendMessage** message
invocation. The **requestIdentifier** parameter identifies this previous
message invocation.
This operation can be invoked multiple times by the application even if the
status has reached a final value. However, after the status has reached a
final value, status information will be available only for a limited period of
time as defined by a service policy.
#### 8.1.2.1 Input message: GetMessageDeliveryStatusRequest
* * *
Part name Part type Optional Description RequestIdentifier xsd:string No
Identifier related to the delivery status request.
* * *
#### 8.1.2.2 Output message: GetMessageDeliveryStatusResponse
* * *
Part name Part type Optional Description result DeliveryInformation
[0..unbounded] Yes It is an array of status of the messages that were
previously sent. Each array element represents a sent message: i.e. its
destination address and its delivery status.
* * *
#### 8.1.2.3 Referenced faults
ServiceException from [6]:
  * SVC0001 - Service error.
  * SVC0002 - Invalid input value.
PolicyException from [6]:
  * POL0001 - Policy error.
  * POL0010 -- Retention time interval expired
### 8.1.3 Operation: ScheduleMessage
Request to schedule sending a message to a set of destination addresses,
returning a **requestIdentifier** to identify the message. The
**requestIdentifier** can subsequently be used by the application to poll for
the message status or cancel the scheduled message.
#### 8.1.3.1 Input message: ScheduleMessageRequest
* * *
Part name Part type Optional Description
Addresses xsd:anyURI [1..unbounded] No Destination addresses for the message.
SenderAddress xsd:string Yes Message sender address. This parameter is not
allowed for all 3^rd^ party providers. Parlay X server needs to handle this
according to a SLA for the specific application and its use can therefore
result in a PolicyException.
Subject xsd:string Yes Message subject. If mapped to SMS this parameter will
be used as the senderAddress, even if a separate senderAddress is provided.
Priority MessagePriority Yes Priority of the message. If not present, the
network will assign a priority based on an operator policy.
Charging common:Charging\ Yes Charging to apply to this message. Information
StartTime xsd:dateTime No Specifies the time to start sending out the
scheduled message.
StopTime xsd:dateTime No Specifies the time to stop sending out the message.
Any message not sent before StopTime will not be sent.
* * *
NOTE: The input message contains one or more attachments, with appropriate
content as defined by SOAP Messages with Attachments [7].
#### 8.1.3.2 Output message: ScheduleMessageResponse
* * *
Part name Part type Optional Description result xsd:string No It is a
correlation identifier
* * *
#### 8.1.3.3 Referenced faults
ServiceException from [6]:
  * SVC0001 - Service error.
  * SVC0002 - Invalid input value.
  * SVC0004 - No valid addresses.
  * SVC0006 - Invalid group.
PolicyException from [6]:
  * POL0001 - Policy error.
  * POL0006 - Groups not allowed.
  * POL0007 - Nested groups not allowed.
  * POL0008 - Charging not supported.
  * POL0012 -- Too many description entries specified.
  * POL0013 -- Addresses duplication.
### 8.1.4 Operation: CancelScheduledMessage
The invocation of cancelScheduledMessageRequest cancels the previously
scheduled message request identified by requestIdentifier. If the period
scheduled for sending the message has started, some of the messages may have
been sent.
#### 8.1.4.1 Input message: CancelScheduledMessageRequest
* * *
Part name Part type Optional Description RequestIdentifier xsd:string No It
identifies a specific message schedule request
* * *
#### 8.1.4.2 Output message : CancelScheduledMessageResponse
* * *
Part name Part type Optional Description None
* * *
#### 8.1.4.3 Referenced faults
ServiceException from [6]:
  * SVC0001 - Service error.
  * SVC0002 - Invalid input value.
PolicyException from [6]:
  * POL0001 - Policy error.
### 8.1.5 Operation: GetScheduledMessageStatus
Gets the schedule and status of a scheduled message.
#### 8.1.5.1 Input message: GetScheduledMessageStatusRequest
* * *
Part name Part type Optional Description RequestIdentifier xsd:string No It
identifies a specific message schedule request
* * *
#### 8.1.5.2 Output message: GetScheduledMessageStatusResponse
* * *
Part name Part type Optional Description result ScheduledDeliveryInformation
No Indicates the delivery result for the destination addresses and, if
applicable, the number of messages already sent.
* * *
#### 8.1.5.3 Referenced faults
ServiceException from [6]:
  * SVC0001 - Service error.
  * SVC0002 - Invalid input value.
PolicyException from [6]:
  * POL0001 - Policy error.
  * POL0010 -- Retention time interval expired
## 8.2 Interface: ReceiveMessage
Operations to retrieve messages that have been received.
### 8.2.1 Operation: GetReceivedMessages
This method enables the application to poll for new messages received that
fulfil the criteria identified by **registrationIdentifier**. The priority
parameter may be used by the application to retrieve references to higher
priority messages, e.g. if Normal is chosen only references to high priority
and normal priority messages are returned. If the priority parameter is
omitted all message references are returned.
The operation returns a new list of received messages: i.e. only the received
messages that the application has not retrieved by previous invocations of
this operation. Moreover, each received message will be automatically removed
from the server after an agreed time interval, as defined by a service policy.
#### 8.2.1.1 Input message: GetReceivedMessagesRequest
* * *
Part name Part type Optional Description RegistrationIdentifier xsd:string No
Identifies the provisioning step that enables the application to receive
notification of Message reception according to specified criteria. Priority
MessagePriority Yes The priority of the messages to poll from the Parlay X
gateway. All messages of the specified priority and higher will be retrieved.
If not specified, all messages shall be returned, i.e. the same as specifying
Low.
* * *
#### 8.2.1.2 Output message: GetReceivedMessagesResponse
* * *
Part name Part type Optional Description result MessageReference
[0..unbounded] Yes It contains an array of messages received according to the
specified filter of **registrationIdentifier** and **priority**.
* * *
#### 8.2.1.3 Referenced faults
ServiceException from [6]:
  * SVC0001 - Service error.
  * SVC0002 - Invalid input value.
PolicyException from [6]:
  * POL0001 - Policy error.
  * POL0010 -- Retention time interval expired
### 8.2.2 Operation: GetMessageURIs
This method will read the different parts of the message, create local files
in the Parlay Gateway and return URI references to them. The application can
then simply read each file or just have them presented as links to the end-
user. The URIs to the files will be active for as long as the message remains
on the server: i.e. an agreed time interval as defined by a service policy.
#### 8.2.2.1 Input message: GetMessageURIsRequest
* * *
Part name Part type Optional Description MessageRefIdentifier xsd:string No
The identity of the message to retrieve.
* * *
#### 8.2.2.2 Output message: GetMessageURIsResponse
* * *
Part name Part type Optional Description result MessageURI No It contains the
complete message, i.e. the textual part of the message, if such exists, and a
list of file references for the message attachments, if any.
* * *
#### 8.2.2.3 Referenced faults
ServiceException from [6]:
  * SVC0001 - Service error.
  * SVC0002 - Invalid input value.
PolicyException from [6]:
  * POL0001 - Policy error.
  * POL0010 -- Retention time interval expired
### 8.2.3 Operation: GetMessage
This method will read the whole message. The data is returned as an
attachment, as defined in SOAP Messages with Attachments [7], in the return
message. Note that the received message is only available on the server for an
agreed time interval following receipt, as defined by a service policy.
#### 8.2.3.1 Input message: GetMessageRequest
* * *
Part name Part type Optional Description MessageRefIdentifier String No The
identity of the message
* * *
#### 8.2.3.2 Output message: GetMessageResponse
* * *
Part name Part type Optional Description None
* * *
#### 8.2.3.3 Referenced faults
ServiceException from [6]:
  * SVC0001 - Service error.
  * SVC0002 - Invalid input value.
PolicyException from [6]:
  * POL0001 - Policy error.
  * POL0010 -- Retention time interval expired.
## 8.3 Interface: MessageNotification
MessageNotification is the application side notification interface to which
multimedia messages are delivered.
### 8.3.1 Operation: NotifyMessageReception
The notification is used to send a multimedia message to the application. The
notification will occur only if the multimedia message fulfils the criteria
specified when starting the multimedia message notification.
#### 8.3.1.1 Input message: NotifyMessageReceptionRequest
* * *
Part name Part type Optional Description correlator xsd:string No Correlator
provided in request to set up this notification Message MessageReference No
This parameter contains all the information associated with the received
message.
* * *
#### 8.3.1.2 Output message: NotifyMessageReceptionResponse
* * *
Part name Part type Optional Description None
* * *
#### 8.3.1.3 Referenced faults
None.
### 8.3.2 Operation: NotifyMessageDeliveryReceipt
The **notifyMessageDeliveryReceipt** method must be implemented by a Web
Service at the **_application side_** if it requires notification of message
delivery receipt. It will be invoked by the Parlay X server to notify the
application when a message sent by an application has been delivered to the
terminal of the recipient or if delivery is impossible. The notification will
occur if and only if the status of the sent message is 'DeliveredToTerminal'
or 'DeliveryImpossible' and the application has specified interest in
notification using one of the following mutually exclusive mechanisms:
  * when sending a message by specifying the optional receiptRequest parameter. The correlator returned corresponds to the identifier specified by the application in the **receiptRequest** of the original **sendMessage** request
  * by invoking the **startDeliveryReceiptNotification** operation requesting to receive delivery receipt notifications. The correlator returned corresponds to the identifier specified by the application in the **reference** of the original **startDeliveryReceiptNotification** request
When a message is sent to multiple addresses, the notification from the server
will send notification for each terminal as and when a message is delivered to
a terminal.
The following three different message delivery status will be returned in
NotifyMessageDeliveryReceiptResponse:
  * \'DeliveryImpossible\': unsuccessful delivery; the message could not be delivered before it expired.
  * \'DeliveredToTerminal\': when message has been successfully delivered to the terminal.
  * 'DeliveredNotificationNotSupported' - If notification is supported by the network but it does not support delivery receipt for one or more addresses specified in the **sendMessage** message. The service will send this status for those addresses.
#### 8.3.2.1 Input message: NotifyMessageDeliveryReceiptRequest
+----------------+------------------+----------+------------------+ | Part name | Part type | Optional | Description | +----------------+------------------+----------+------------------+ | Correlator | xsd:string | No | The identifier | | | | | defining the | | | | | original | | | | | SendRequest. | | | | | This correlator | | | | | was passed by | | | | | the application | | | | | during the | | | | | SendMessage | | | | | request | +----------------+------------------+----------+------------------+ | DeliveryStatus | Del | No | It lists the | | | iveryInformation | | variations on | | | | | the delivery | | | | | status of the | | | | | message to a | | | | | terminal. | | | | | Possible values | | | | | are: | | | | | | | | | | - De | | | | | liveryImpossible | | | | | | | | | | - Del | | | | | iveredToTerminal | | | | | | | | | | `{=html} | | | | |  | | | | |` | | | | | - | | | | | DeliveryNotifica | | | | | tionNotSupported | +----------------+------------------+----------+------------------+
#### 8.3.2.2 Output message: NotifyMessageDeliveryReceiptResponse
* * *
Part name Part type Optional Description None
* * *
#### 8.3.2.3 Referenced faults
None.
## 8.4 Interface: MessageNotificationManager
The multimedia message notification manager enables applications to set up and
tear down notifications for multimedia messages online.
### 8.4.1 Operation: StartMessageNotification
Start notifications to the application for a given Message Service activation
number and criteria.
The Message Service activation number is an Address Data item e.g. Shortcode,
as defined in 3GPP TS 29.199-1 [6].
The correlator provided in the reference must be unique for the application
Web Service at the time the notification is initiated, otherwise a
ServiceException (SVC0005) will be returned to the application..
If specified, criteria will be used to filter messages that are to be
delivered to an application. If criteria are not provided, or are an empty
string, then all messages for the MessageServiceActivationNumber will be
delivered to the application. The MessageServiceActivationNumber and criteria
combination must be unique. If a criteria overlaps then SVC0008 will be
returned to the application and the notification will not be set up. Note that
the use of criteria will allow different notification endpoints to receive
notifications for the same MessageServiceActivationNumber. The combination of
MessageServiceActivationNumber and criteria must be unique, so that a
notification will be delivered to only one notification endpoint. If no match
is found, the message will not be delivered to the application.
#### 8.4.1.1 Input message: StartMessageNotificationRequest
+------------------+------------------+----------+------------------+ | Part name | Part type | Optional | Description | +------------------+------------------+----------+------------------+ | Reference | common | No | Notification | | | :SimpleReference | | endpoint | | | | | definition | +------------------+------------------+----------+------------------+ | MessageService | xsd:anyURI | No | The destination | | ActivationNumber | \ | | address or | | | [1...unbounded] | | addresses of the | | | | | multimedia | | | | | messag(s) | +------------------+------------------+----------+------------------+ | Criteria | xsd:string | Yes | The text to | | | | | match against to | | | | | determine the | | | | | application to | | | | | receive the | | | | | notification. | | | | | | | | | | This text is | | | | | matched against | | | | | the first word, | | | | | as defined as | | | | | the initial | | | | | characters after | | | | | discarding any | | | | | leading | | | | | Whitespace and | | | | | ending with a | | | | | Whitespace or | | | | | end of the | | | | | string. The | | | | | matching shall | | | | | be | | | | | c | | | | | ase-insensitive. | | | | | | | | | | If the subject | | | | | of the | | | | | multimedia | | | | | message is | | | | | present it shall | | | | | be used as the | | | | | string, if not | | | | | the string is | | | | | defined as the | | | | | first plain/text | | | | | part of the | | | | | content (see | | | | | 3GPP TS 23.140 | | | | | [8]). | +------------------+------------------+----------+------------------+
#### 8.4.1.2 Output message: StartMessageNotificationResponse
* * *
Part Name Part Type Optional Description none
* * *
#### 8.4.1.3 Referenced Faults
ServiceException from [6]
  * SVC0001 -- Service error
  * SVC0002 -- Invalid input value
  * SVC0005 -- Duplicate correlator
  * SVC0008 -- Overlapping Criteria
PolicyException from [6]
  * POL0001 -- Policy error
### 8.4.2 Operation: StopMessageNotification
The application may end a multimedia message notification using this operation
#### 8.4.2.1 Input message: StopMessageNotificationRequest
* * *
Part name Part type Optional Description Correlator xsd:string No Correlator
of request to end
* * *
#### 8.4.2.2 Output message: StopMessageNotificationResponse
* * *
Part Name Part Type Optional Description None
* * *
#### 8.4.2.3 Referenced Faults
ServiceException from [6]
  * SVC0001 -- Service error
  * SVC0002 -- Invalid input value
PolicyException from [6]
  * POL0001 -- Policy error
### 8.4.3 Operation: StartDeliveryReceiptNotification
Start notifications to the application for delivery receipts. The reference
will be where to send the delivery receipts. The
**notifyMessageDeliveryReceipt** method (see clause 8.3.2) must be implemented
by a Web Service at the application side if it requires notification of
Multimedia Message delivery receipt. When the
**startDeliveryReceiptNotification** operation is supported by the Service
Provider, its use overrides the delivery receipting mechanism supported in the
SendMessage API (see clause 8.1: **sendMessage** operation).
#### 8.4.3.1 Input message: StartDeliveryReceiptNotificationRequest
* * *
Part name Part type Optional Description Reference common:SimpleReference No
Notification endpoint definition FilterCriteria xsd:string No The
FilterCriteria will allow the service to filter flexibly. One example would be
for the Service Provider to filter based on first 4 digits in MSISDN. This
however is implementation specific and will be left to the Service Provider.
* * *
#### 8.4.3.2 Output message: StartDeliveryReceiptNotificationResponse
* * *
Part Name Part Type Optional Description none
* * *
#### 8.4.3.3 Referenced Faults
ServiceException from [6]
  * SVC0001 -- Service error
  * SVC0002 -- Invalid input value
  * SVC0005 -- Duplicate correlator
  * SVC0008 -- Overlapping Criteria
  * SVC0283 -- Delivery Receipt Notification not supported
PolicyException from [6]
  * POL0001 -- Policy error
### 8.4.4 Operation: StopDeliveryReceiptNotification
The application may end delivery receipt notification using this operation.
#### 8.4.4.1 Input message: StopDeliveryReceiptNotificationRequest
* * *
Part name Part type Optional Description Correlator xsd:string No Correlator
of request to end
* * *
#### 8.4.4.2 Output message: StopDeliveryReceiptNotificationResponse
* * *
Part Name Part Type Optional Description None
* * *
#### 8.4.4.3 Referenced Faults
ServiceException from [6]
  * SVC0001 -- Service error
  * SVC0002 -- Invalid input value
PolicyException from [6]
  * POL0001 -- Policy error
# 9 Fault definitions
## 9.1 ServiceException
### 9.1.1 Void
The fault code (SVC0230) is reserved and shall not be used.
### 9.1.2 SVC0283: Delivery Receipt Notification not supported
* * *
Name Description Message Id SVC0283 Text Delivery Receipt Notification not
supported Variables
* * *
# 10 Service policies
Table: Service policies for this service
* * *
Name Type Description GroupSupport xsd:Boolean Groups may be included with
addresses NestedGroupSupport xsd:Boolean Are nested groups supported in group
definitions ChargingSupported xsd:Boolean Charging supported for send message
operation StatusRetentionTime common:TimeMetric A time interval that begins
after the status of a message delivery request has reached a final value.
During this interval, the delivery status information remains available for
retrieval by the application. MessageRetentionTime common:TimeMetric A time
interval that begins after the receipt of a message. During this interval, the
message remains available for retrieval by the application.
MaximumDescriptions xsd:int Maximum number of Descriptions that can be charged
simultaneously. MessagingAddressesDuplicationSupport xsd:boolean Is
duplication addresses supported for send operations.
* * *
NOTE: For service policy - "MessagingAddressesDuplicationSupport", **if
aliases or group addresses are used:**
  1. Parlay X Gateway with Identity Management Framework support can verify that indeed there is a duplicate.
  2. If network capability supports aliases or group addresses and the Parlay X Gateway without Identity Management Framework supporting, then the policy exception of addresses duplication may not have effect fully.
  3. If network capability does not support aliases or group addresses and the Parlay X Gateway without Identity Management Framework supporting, the Parlay-X Gateway should reject the aliases and group addresses.
###### ## Annex A (normative): WSDL for Multimedia Messaging
The document/literal WSDL representation of this interface specification is
compliant to 3GPP TS 29.199-1 [6] and is contained in text files:
  * parlayx_mm_notification_interface_4_0.wsdl
  * parlayx_mm_notification_service_4_0.wsdl
  * parlayx_mm_notification_manager_interface_4_0.wsdl
  * parlayx_mm_notification_manager_service_4_0.wsdl
  * parlayx_mm_receive_interface_4_0.wsdl
  * parlayx_mm_receive_service_4_0.wsdl
  * parlayx_mm_send_interface_4_0.wsdl
  * parlayx_mm_send_service_4_0.wsdl
  * parlayx_mm_types_4_0.xsd
which accompany the present document.
The WSDL files have been verified using the following files:
  * 5_wsdl2Java_axis-1_4.bat
  * 5_wsdl2Java_axis2-1_4_1.bat
which accompany the present document.
###### ## Annex B (informative): Description of Parlay X Web Services Part 5:
Multimedia messaging for 3GPP2 cdma2000 networks
This annex is intended to define the OSA Parlay X Web Services Stage 3
interface definitions and it provides the complete OSA specifications. It is
an extension of OSA Parlay X Web Services specifications capabilities to
enable operation in cdma2000 systems environment. They are in alignment with
3GPP2 Stage 1 requirements and Stage 2 architecture defined in:
[1] 3GPP2 X.S0011-D: "cdma2000 Wireless IP Network Standard \", Version 1.1
[2] 3GPP2 S.R0037-0: \"IP Network Architecture Model for cdma2000 Spread
Spectrum Systems\", Version 3.0
[3] 3GPP2 X.S0013-A: \"All-IP Core Network Multimedia Domain\"
These requirements are expressed as additions to and/or exclusions from the
3GPP specification.\ The information given here is to be used by developers in
3GPP2 cdma2000 network architecture to interpret the 3GPP OSA specifications.
# B.1 General Exceptions
The terms 3GPP and UMTS are not applicable for the cdma2000 family of
standards. Nevertheless these terms are used (3GPP TR 21.905) mostly in the
broader sense of \"3G Wireless System\". If not stated otherwise there are no
additions or exclusions required.
CAMEL mappings are not applicable for cdma2000 systems.
# B.2 Specific Exceptions
## B.2.1 Clause 1: Scope
There are no additions or exclusions.
## B.2.2 Clause 2: References
There are no additions or exclusions.
## B.2.3 Clause 3: Definitions and abbreviations
There are no additions or exclusions.
## B.2.4 Clause 4: Detailed service description
There are no additions or exclusions.
## B.2.5 Clause 5: Namespaces
There are no additions or exclusions.
## B.2.6 Clause 6: Sequence diagrams
There are no additions or exclusions.
## B.2.7 Clause 7: XML Schema data type definition
There are no additions or exclusions.
## B.2.8 Clause 8: Web Service interface definition
There are no additions or exclusions.
## B.2.9 Clause 9: Fault definitions
There are no additions or exclusions.
## B.2.10 Clause 10: Service policies
There are no additions or exclusions.
## B.2.11 Annex A (normative): WSDL for Multimedia Messaging
There are no additions or exclusions.
#