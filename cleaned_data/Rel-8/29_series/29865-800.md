# Foreword
This Technical Report has been produced by the 3^rd^ Generation Partnership
Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# Introduction
This clause is optional. If it exists, it is always the second unnumbered
clause.
# 1 Scope
The objective of this document is to address the Inter-IMS Network to Network
Interface (II-NNI) consisting of Ici and Izi reference points between IMS
networks in order to support end-to-end service interoperability.
The present document will address the issues related to control plane
signalling (3GPP usage of SIP and SDP protocols, required SIP headers) as well
as other interconnecting aspects like security, numbering/naming/addressing
and user plane issues as transport protocol, media and codecs actually covered
in a widespread set of 3GPP specifications.
Charging aspects will be addressed as far as SIP signalling is concerned.
The purpose of this document is to prepare some material that could be moved
to the foreseen Technical Specification for the profiling of the Inter-IMS
Network to Network Interface (II-NNI) and to propose if any needed
modifications of the 3GPP core specifications are required.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
  * References are either specific (identified by date of publication, > edition number, version number, etc.) or non‑specific.
  * For a specific reference, subsequent revisions do not apply.
  * For a non-specific reference, the latest version applies. In the > case of a reference to a 3GPP document (including a GSM document), > a non-specific reference implicitly refers to the latest version > of that document _in the same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 22.228: \"Service requirements for the IP multimedia core network
subsystem\".
[3] 3GPP TS 23.002: \"Network architecture\".
[4] 3GPP TS 23.228: \"IP Multimedia Subsystem (IMS); Stage 2\".
[5] 3GPP TS 24.229: \"Internet Protocol (IP) multimedia call control protocol
based on Session Initiation Protocol (SIP) and Session Description Protocol
(SDP); Stage 3\".
[6] 3GPP TR 24.930: \"Signalling flows for the session setup in the IP
Multimedia core network Subsystem (IMS) based on Session Initiation Protocol
(SIP) and Session Description Protocol (SDP); Stage 3\".
[7] IETF RFC 2460: \"Internet Protocol, Version 6 (IPv6) Specification\".
[8] 3GPP TS 29.162: "Interworking between the IM CN subsystem and IP
networks".
[9] 3GPP TS 33.210: \"3G security; Network Domain Security (NDS); IP network
layer security\".
[10] IETF RFC 3261: \"SIP: Session Initiation Protocol\".
[11] IETF RFC 3966: \"The tel URI for Telephone Numbers\".
[12] IETF RFC 3860: \"Common Profile for Instant Messaging (CPIM)\".
[13] IETF RFC 3859: \"Common Profile for Presence (CPP)\".
[14] IETF RFC 4975: \"The Message Session Relay Protocol (MSRP).\"
[15] 3GPP TS 26.114: \" IP Multimedia Subsystem (IMS); Multimedia Telephony;
Media handling and interaction\".
[16] ETSI TS 181 005: "Telecommunications and Internet converged Services and
Protocols for Advanced Networking (TISPAN); Services and Capabilities
Requirements\"
[17] IETF RFC 791: \"Internet Protocol\"
[18] RFC 3262: \"Reliability of provisional responses in Session Initiation
Protocol (SIP)\".
[19] RFC 3428: \"Session Initiation Protocol (SIP) Extension for Instant
Messaging\".
[20] RFC 3265: \"Session Initiation Protocol (SIP) Specific Event
Notification\".
[21] RFC 3903: \"An Event State Publication Extension to the Session
Initiation Protocol (SIP)\".
[22] RFC 3515: \"The Session Initiation Protocol (SIP) REFER method\".
[23] RFC 3311: \"The Session Initiation Protocol (SIP) UPDATE method\".
[24] RFC 3455: \"Private Header (P-Header) Extensions to the Session
Initiation Protocol (SIP) for the 3rd-Generation Partnership Project (3GPP)\".
[25] RFC 4244: \"An Extension to the Session Initiation Protocol (SIP) for
Request History Information\".
[26] draft-drage-sipping-service-identification-01 (July 2007): \"A Session
Initiation Protocol (SIP) Extension for the Identification of Services\".
Editor\'s note: The above document cannot be formally referenced until it is
published as an RFC.
# 3 Definitions, symbols and abbreviations
Delete from the above heading those words which are not applicable.
Subclause numbering depends on applicability and should be renumbered
accordingly.
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
TR 21.905 [1] and the following apply. A term defined in the present document
takes precedence over the definition of the same term, if any, in TR 21.905
[1].
Definition format
**\ **: \.
**example:** text used to clarify abstract rules by applying them literally.
**IM CN subsystem:** (IP Multimedia CN subsystem) comprises of all CN elements
for the provision of IP multimedia applications over IP multimedia sessions,
as specified in 3GPP TS 22.228 [2].
**IP multimedia session:** as specified in 3GPP TS 22.228 [2] an IP multimedia
session is a set of multimedia senders and receivers and the data streams
flowing from senders to receivers. IP multimedia sessions are supported by the
IP multimedia CN Subsystem and are enabled by IP connectivity bearers (e.g.
GPRS as a bearer). A user may invoke concurrent IP multimedia sessions.
## 3.2 Symbols
For the purposes of the present document, the following symbols apply:
Symbol format
\ \
Ici Reference Point between an IBCF and another IBCF or I-CSCF belonging to a
different IM CN subsystem network
Izi Reference Point between a TrGW and another TrGW or media handling node
belonging to a different IM CN subsystem network
Mi Reference Point between a BGCF and CSCF
Mm Reference Point between a CSCF/BGCF/IMS ALG and an IP multimedia network.
Mw Reference Point between a CSCF and another CSCF
Mx Reference Point between a CSCF/BGCF and IBCF
## 3.3 Abbreviations
For the purposes of the present document, the abbreviations given in TR 21.905
[1] and the following apply. An abbreviation defined in the present document
takes precedence over the definition of the same abbreviation, if any, in TR
21.905 [1].
IBCF Interconnection Border Control Function
II-NNI Inter-IMS Network to Network Interface
NA (P) T-PT Network Address (Port-Multiplexing) Translation-Protocol
Translation
TrGW Transition Gateway
# 4 Overview
## 4.1 Introduction
Interconnection between two different IM CN subsystems shall be guaranteed in
order to support end-to-end service interoperability. For this purpose, Inter-
IMS Network to Network Interface (II-NNI) between two IM CN subsystem networks
is adopted, according to the assumptions coming from 3GPP TS 23.002 [3] and
3GPP TS 23.228 [4].
Aiming to support the delivery of IMS services between two separated IM CN
subsystems, protocol interconnection has to occur:
  * at a control plane level, in order that IMS procedures can be supported. In this case the adopted reference point is the Ici;
  * at a user plane level, where media streams are exchanged over the Izi reference point.
The management of IP multimedia sessions is acted by using SIP. The transport
mechanism for both SIP session signalling and media transport is IPv4 (IETF
RFC 791 [17]) or IPv6 (IETF RFC 2460 [7]). The 3GPP profile of SIP defining
the usage of SIP within the IM CN subsystem is specified in 3GPP TS 24.229
[5]. Example call flows are provided in 3GPP TR 24.930 [6].
The general interconnection model is shown in Figure 4.1.
Figure 4.1: Interconnection Model for IM CN Subsystems
The possible functional entities involved in the signalling plane
interconnection (IBCF, I-CSCF, BGCF) and in the user plane interconnection
(TrGW) are specified in 3GPP TS 24.229 [5] and in 3GPP TS 29.162 [8].
# 5 Reference model for interconnection between IM CN subsystems
## 5.1 General
Figure 5.1 illustrates the architecture diagram given in 3GPP TS 23.228 [4]
showing the Inter-IMS Network to Network Interface (II-NNI) between two IM CN
subsystem networks.
Figure 5.1: Inter-IMS Network to Network Interface between two IM CN subsystem
networks
The protocols over the two reference points Ici and Izi make up the Inter-IMS
Network to Network Interface.
The Ici reference point allows IBCFs to communicate with each other in order
to provide the communication and forwarding of SIP signalling messaging
between IM CN subsystem networks. The Izi reference point allows TrGWs to
forward media streams between IM CN subsystem networks.
IMS roaming performed by using II-NNI is considered, when the IBCFs are
inserted at the network borders.
Whenever the Inter-IMS Network to Network Interface is used to interconnect
two IM CN subsystem networks belonging to different security domains, security
procedures apply as described in TS 33.210 [9].
## 5.2 Functionalities performed by entities at the edge of the network
### 5.2.1 Interconnection Border Control Function (IBCF)
An IBCF provides application specific functions at the SIP/SDP protocol layer
in order to perform interconnection between IM CN subsystem networks by using
Ici reference point. According to 3GPP TS 23.228 [4], it may act both as an
entry point and as an exit point for a network.
The functionalities of IBCF are indicated in the 3GPP TS 23.228 [4] and
specified in 3GPP TS 24.229 [5]: they include:
  * network topology hiding;
  * application level gateway (enabling communication between IPv6 and IPv4 SIP applications);
  * controlling transport plane functions;
  * screening of SIP signalling information;
  * selecting the appropriate signalling interconnect;
  * generation of charging data records;
  * inclusion of an IWF if appropriate, when interworking between different SIP profiles.
NOTE: the functionality of IWF when interworking between different protocols
(e.g., SIP and H.323) is not necessary in case of interconnection between two
IMS networks
Based on local configuration, the IBCF may perform transit routing functions
[4].
The IBCF acts as a B2BUA when it performs IMS-ALG functionality.
### 5.2.2 Transition Gateway (TrGW)
According to 3GPP TS 23.002 [3], the TrGW is located at the network borders
within the media path and is controlled by an IBCF. Forwarding of media
streams between IM CN subsystem networks is applied over Izi reference point.
The TrGW provides functions like network address/port translation and
IPv4/IPv6 protocol translation. NAT-PT binds addresses in IPv6 network with
addresses in IPv4 network and vice versa to provide transparent routing
between the two IP domains without requiring any changes to end points. NAPT-
PT provides additional translation of transport identifier (TCP and UDP port
numbers). The approach is similar to that one described also in TS 29.162 [8].
Further details are described in TS 23.228 [4].
# 6 Control plane interconnection
## 6.1 Definition of Inter-IMS Network to Network Interconnection
### 6.1.1 SIP methods and headers
#### 6.1.1.1 General
The functional entity closest to the border of an IMS network towards an
Inter-IMS Network to Network Interconnection (see reference model in Clause 5)
shall provide the capabilities specified for that network element in Annex A.2
of TS 24.229 [5] with modifications as described in the following sub-clauses.
#### 6.1.1.2 SIP methods
3GPP TS 24.229 [5] defines the methods allowing an IBCF to interconnect to an
IBCF placed in another IM CN subsystem.
The following SIP Methods shall be supported on the II-NNI.
The following table is based on Table A.5 and Table A.163 of TS 24.229 [5] and
endorsed for this document:
Table 6.1: Supported methods
+-----------+-----------+---------+-----------+--------+--------+ | Item | PDU | Sending | Receiving | | | +-----------+-----------+---------+-----------+--------+--------+ | | | Ref. | II-NNI | Ref. | II-NNI | +-----------+-----------+---------+-----------+--------+--------+ | 1 | ACK | [10] | m | [10] | m | | | request | | | | | +-----------+-----------+---------+-----------+--------+--------+ | 2 | BYE | [10] | m | [10] | m | | | request | | | | | +-----------+-----------+---------+-----------+--------+--------+ | 3 | BYE | [10] | m | [10] | m | | | response | | | | | +-----------+-----------+---------+-----------+--------+--------+ | 4 | CANCEL | [10] | m | [10] | m | | | request | | | | | +-----------+-----------+---------+-----------+--------+--------+ | 5 | CANCEL | [10] | m | [10] | m | | | response | | | | | +-----------+-----------+---------+-----------+--------+--------+ | 8 | INVITE | [10] | m | [10] | m | | | request | | | | | +-----------+-----------+---------+-----------+--------+--------+ | 9 | INVITE | [10] | m | [10] | m | | | response | | | | | +-----------+-----------+---------+-----------+--------+--------+ | 9A | MESSAGE | [19] | m | [19] | m | | | request | | | | | +-----------+-----------+---------+-----------+--------+--------+ | 9B | MESSAGE | [19] | m | [19] | m | | | response | | | | | +-----------+-----------+---------+-----------+--------+--------+ | 10 | NOTIFY | [20] | m | [20] | m | | | request | | | | | +-----------+-----------+---------+-----------+--------+--------+ | 11 | NOTIFY | [20] | m | [20] | m | | | response | | | | | +-----------+-----------+---------+-----------+--------+--------+ | 12 | OPTIONS | [10] | m | [10] | m | | | request | | | | | +-----------+-----------+---------+-----------+--------+--------+ | 13 | OPTIONS | [10] | m | [10] | m | | | response | | | | | +-----------+-----------+---------+-----------+--------+--------+ | 14 | PRACK | [18] | m | [18] | m | | | request | | | | | +-----------+-----------+---------+-----------+--------+--------+ | 15 | PRACK | [18] | m | [18] | m | | | response | | | | | +-----------+-----------+---------+-----------+--------+--------+ | 15A | PUBLISH | [21] | c1 | [21] | c1 | | | request | | | | | +-----------+-----------+---------+-----------+--------+--------+ | 15B | PUBLISH | [21] | c1 | [21] | c1 | | | response | | | | | +-----------+-----------+---------+-----------+--------+--------+ | 16 | REFER | [22] | m | [22] | m | | | request | | | | | +-----------+-----------+---------+-----------+--------+--------+ | 17 | REFER | [22] | m | [22] | m | | | response | | | | | +-----------+-----------+---------+-----------+--------+--------+ | 18 | REGISTER | [10] | c2 | [10] | c2 | | | request | | | | | +-----------+-----------+---------+-----------+--------+--------+ | 19 | REGISTER | [10] | c2 | [10] | c2 | | | response | | | | | +-----------+-----------+---------+-----------+--------+--------+ | 20 | SUBSCRIBE | [20] | m | [20] | m | | | request | | | | | +-----------+-----------+---------+-----------+--------+--------+ | 21 | SUBSCRIBE | [20] | m | [20] | m | | | response | | | | | +-----------+-----------+---------+-----------+--------+--------+ | 22 | UPDATE | [23] | m | [23] | m | | | request | | | | | +-----------+-----------+---------+-----------+--------+--------+ | 23 | UPDATE | [23] | m | [23] | m | | | response | | | | | +-----------+-----------+---------+-----------+--------+--------+ | NOTE: the | | | | | | | IBCF | | | | | | | profile | | | | | | | is | | | | | | | indicated | | | | | | | in Table | | | | | | | A.5 and | | | | | | | Table | | | | | | | A.162 of | | | | | | | TS 24.229 | | | | | | | [5]. | | | | | | | | | | | | | | c1: In | | | | | | | case of | | | | | | | roaming | | | | | | | scenario, | | | | | | | the | | | | | | | support | | | | | | | of the | | | | | | | method is | | | | | | | m, else | | | | | | | o. | | | | | | | | | | | | | | c2: In | | | | | | | case of | | | | | | | roaming | | | | | | | scenario, | | | | | | | the | | | | | | | support | | | | | | | of the | | | | | | | method is | | | | | | | m, else | | | | | | | n/a. | | | | | | +-----------+-----------+---------+-----------+--------+--------+
In the above table, m, o, c, i and N/A have the meanings indicated in Table
6.4.
Editor's Note: Insertion in the Table 6.1 of columns indicating the IBCF
profile, as proposed in TS 24.229, for sending and receiving side is FFS..
Editor's Note: Insertion in the Table 6.1 of the INFO method is FFS.
#### 6.1.1.3 SIP headers
The IBCF shall provide the capabilities to manage and modify SIP headers
according to section 5.10 and Annex A of TS 24.229 [5] with modifications as
described in the following sub-clauses.
##### 6.1.1.3.1 Trust and not trust domain
In case there is a trust relationship between the two IM CN subsystems
connected by II-NNI, the IBCF acting as contact point shall apply the
procedures described in the section 4.4 of TS 24.229 [5], before forwarding
the SIP signalling to the next IBCF.
In case there is not a trust relationship between the two IM CN subsystems
connected by II-NNI, the IBCF acting as exit point shall apply the procedures
described in the section 5.10.2 of TS 24.229 [5] before forwarding the SIP
signalling to the IBCF acting as entry point; this one shall apply the
procedures described in the section 5.10.3 of TS 24.229 [5].
Moreover, the IBCF shall apply procedures in Clause 4.3.3 of RFC 4244 [25] to
process the History-Info header.
The IBCF shall apply procedures in Clause 5.1.2 of draft-drage-sipping-
service-identification [26] to process the P-Asserted-service header. In
addition, value-dependent operator policies may be applied.
The management of the SIP headers (if present) over II-NNI in case of a
presence or not of a trust relationship between the two interconnected IM
subsystems is wrapped up in the following table.
Table 6.2: Management of SIP headers over II-NNI in presence or not of a trust
relationship
* * *
Item Header Trust domain Not trust domain 1 P-Asserted-ID As specified in 3GPP
TS 24.229 [5], clause 4.4 As specified in 3GPP TS 24.229 [5], clause 5.10 2
P-Access-Network-Info As specified in 3GPP TS 24.229 [5], clause 4.4 As
specified in 3GPP TS 24.229 [5], clause 5.10 3 Resource-Priority As specified
in 3GPP TS 24.229 [5], clause 4.4 As specified in 3GPP TS 24.229 [5], clause
4.4 4 History-Info As specified in 3GPP TS 24.229 [5], clause 4.4 As specified
in Clause 4.3.3 of RFC 4244 [25] 5 P-Asserted-Service As specified in 3GPP TS
24.229 [5], clause 4.4 As specified in Clause 5.1.2 of draft-drage-sipping-
service-identification [26]. In addition, value-dependent operator policies
may be applied. 6 P-Charging-Vector (see RFC 3455 [24]) As specified in 3GPP
TS 24.229 [5], clause 5.10 As specified in 3GPP TS 24.229 [5], clause 5.10 7
P-Charging-Address (see RFC 3455 [24]) As specified in 3GPP TS 24.229 [5],
clause 5.10 As specified in 3GPP TS 24.229 [5], clause 5.10
* * *
##### 6.1.1.3.2 Summary of SIP headers
The following SIP headers shall be supported on the II-NNI.
The following table is based on Annex A.2 of TS 24.229 [5] and endorsed for
this document:
Table 6.3: Supported headers
+----------+----------+----------+----------+----------+----------+ | **Item** | ** | **S |** Rec | | | | | Header**| ending** | eiving**| | | +----------+----------+----------+----------+----------+----------+ | | |** Ref.**| ** |** Ref.**| ** | | | | | II-NNI** | | II-NNI** | +----------+----------+----------+----------+----------+----------+ | 1 | Accept | [5] | m | [5] | m | +----------+----------+----------+----------+----------+----------+ | 2 | Accept | [5] | c1 | [5] | c1 | | | -Contact | | | | | +----------+----------+----------+----------+----------+----------+ | 3 | Accept- | [5] | m | [5] | m | | | Encoding | | | | | +----------+----------+----------+----------+----------+----------+ | 4 | Accept- | [5] | m | [5] | m | | | Language | | | | | +----------+----------+----------+----------+----------+----------+ | 5 | Al | [5] | c2 | [5] | c2 | | | ert-Info | | | | | +----------+----------+----------+----------+----------+----------+ | 6 | Allow | [5] | m | [5] | m | +----------+----------+----------+----------+----------+----------+ | 7 | Allo | [5] | m | [5] | m | | | w-Events | | | | | +----------+----------+----------+----------+----------+----------+ | 8 | Aut | [5] | m | [5] | m | | | henticat | | | | | | | ion-Info | | | | | +----------+----------+----------+----------+----------+----------+ | 9 | Autho | [5] | m | [5] | m | | | rization | | | | | +----------+----------+----------+----------+----------+----------+ | 10 | Call-ID | [5] | m | [5] | m | +----------+----------+----------+----------+----------+----------+ | 11 | C | [5] | m | [5] | m | | | all-Info | | | | | +----------+----------+----------+----------+----------+----------+ | 12 | Contact | [5] | m | [5] | m | +----------+----------+----------+----------+----------+----------+ | 13 | Con | [5] | m | [5] | m | | | tent-Dis | | | | | | | position | | | | | +----------+----------+----------+----------+----------+----------+ | 14 | Content- | [5] | m | [5] | m | | | Encoding | | | | | +----------+----------+----------+----------+----------+----------+ | 15 | Content- | [5] | m | [5] | m | | | Language | | | | | +----------+----------+----------+----------+----------+----------+ | 16 | Conten | [5] | m | [5] | m | | | t-Length | | | | | +----------+----------+----------+----------+----------+----------+ | 17 | Cont | [5] | m | [5] | m | | | ent-Type | | | | | +----------+----------+----------+----------+----------+----------+ | 18 | Cseq | [5] | m | [5] | m | +----------+----------+----------+----------+----------+----------+ | 19 | Date | [5] | m | [5] | m | +----------+----------+----------+----------+----------+----------+ | 20 | Er | [5] | o | [5] | m | | | ror-Info | | | | | +----------+----------+----------+----------+----------+----------+ | 21 | Expires | [5] | m | [5] | m | +----------+----------+----------+----------+----------+----------+ | 22 | Event | [5] | c3 | [5] | c3 | +----------+----------+----------+----------+----------+----------+ | 23 | From | [5] | m | [5] | m | +----------+----------+----------+----------+----------+----------+ | 24 | Geo | [5] | c4 | [5] | c4 | | | location | | | | | +----------+----------+----------+----------+----------+----------+ | 25 | Hist | su | m | su | m | | | ory-Info | b-clause | | b-clause | | | | | 6 | | 6 | | | | | .1.1.3.1 | | .1.1.3.1 | | +----------+----------+----------+----------+----------+----------+ | 26 | In- | [5] | o | [5] | m | | | Reply-To | | | | | +----------+----------+----------+----------+----------+----------+ | 27 | Join | [5] | c2 | [5] | c2 | +----------+----------+----------+----------+----------+----------+ | 28 | Max- | [5] | m | [5] | m | | | Forwards | | | | | +----------+----------+----------+----------+----------+----------+ | 29 | Min | [5] | c5 | [5] | c5 | | | -Expires | | | | | +----------+----------+----------+----------+----------+----------+ | 30 | MIME | [5] | m | [5] | m | | | -Version | | | | | +----------+----------+----------+----------+----------+----------+ | 31 | Min-SE | [5] | m | [5] | m | +----------+----------+----------+----------+----------+----------+ | 32 | Orga | [5] | m | [5] | m | | | nization | | | | | +----------+----------+----------+----------+----------+----------+ | 33 | P-Acc | su | c6 | su | c6 | | | ess-Netw | b-clause | | b-clause | | | | ork-Info | 6 | | 6 | | | | | .1.1.3.1 | | .1.1.3.1 | | +----------+----------+----------+----------+----------+----------+ | 34 | P-A | su | c6 | su | c6 | | | sserted- | b-clause | | b-clause | | | | Identity | 6 | | 6 | | | | | .1.1.3.1 | | .1.1.3.1 | | +----------+----------+----------+----------+----------+----------+ | 35 | P- | su | c7 | su | c7 | | | Asserted | b-clause | | b-clause | | | | -Service | 6 | | 6 | | | | | .1.1.3.1 | | .1.1.3.1 | | +----------+----------+----------+----------+----------+----------+ | 36 | P | [5] | o | [5] | m | | | -Called- | | | | | | | Party-ID | | | | | +----------+----------+----------+----------+----------+----------+ | 37 | P-Cha | [5] | n/a | [5] | n/a | | | rging-Fu | | | | | | | nction-A | | | | | | | ddresses | | | | | +----------+----------+----------+----------+----------+----------+ | 38 | P | [5] | n/a | [5] | n/a | | | -Chargin | | | | | | | g-Vector | | | | | +----------+----------+----------+----------+----------+----------+ | 39 | P-Ear | [5] | c8 | [5] | c8 | | | ly-Media | | | | | +----------+----------+----------+----------+----------+----------+ | 40 | P-Med | [5] | n/a | [5] | n/a | | | ia-Autho | | | | | | | rization | | | | | +----------+----------+----------+----------+----------+----------+ | 41 | P-Pr | [5] | n/a | [5] | n/a | | | eferred- | | | | | | | Identity | | | | | +----------+----------+----------+----------+----------+----------+ | 42 | P-P | [5] | n/a | [5] | n/a | | | referred | | | | | | | -Service | | | | | +----------+----------+----------+----------+----------+----------+ | 43 | P-Pro | [5] | m | [5] | m | | | file-Key | | | | | +----------+----------+----------+----------+----------+----------+ | 44 | P-User- | [5] | o | [5] | o | | | Database | | | | | +----------+----------+----------+----------+----------+----------+ | 45 | P-Vi | [5] | c9 | [5] | c9 | | | sited-Ne | | | | | | | twork-ID | | | | | +----------+----------+----------+----------+----------+----------+ | 46 | Priority | [5] | c10 | [5] | c11 | +----------+----------+----------+----------+----------+----------+ | 47 | Privacy | [5] | m | [5] | m | +----------+----------+----------+----------+----------+----------+ | 48 | Prox | [5] | m | [5] | m | | | y-Authen | | | | | | | tication | | | | | +----------+----------+----------+----------+----------+----------+ | 49 | Pro | [5] | m | [5] | m | | | xy-Autho | | | | | | | rization | | | | | +----------+----------+----------+----------+----------+----------+ | 50 | Proxy | [5] | m | [5] | m | | | -Require | | | | | +----------+----------+----------+----------+----------+----------+ | 51 | Reason | [5] | o | [5] | m | +----------+----------+----------+----------+----------+----------+ | 52 | Reco | [5] | m | [5] | m | | | rd-Route | | | | | +----------+----------+----------+----------+----------+----------+ | 53 | Ref | [5] | m | [5] | m | | | erred-By | | | | | +----------+----------+----------+----------+----------+----------+ | 54 | Reject | [5] | c12 | [5] | c12 | | | -Contact | | | | | +----------+----------+----------+----------+----------+----------+ | 55 | Replaces | [5] | c13 | [5] | c13 | +----------+----------+----------+----------+----------+----------+ | 56 | Reply-To | [5] | o | [5] | m | +----------+----------+----------+----------+----------+----------+ | 57 | Req | [5] | c12 | [5] | c12 | | | uest-Dis | | | | | | | position | | | | | +----------+----------+----------+----------+----------+----------+ | 58 | Require | [5] | m | [5] | m | +----------+----------+----------+----------+----------+----------+ | 59 | R | su | m | su | m | | | esource- | b-clause | | b-clause | | | | Priority | 6 | | 6 | | | | | .1.1.3.1 | | .1.1.3.1 | | +----------+----------+----------+----------+----------+----------+ | 60 | Route | [5] | m | [5] | m | +----------+----------+----------+----------+----------+----------+ | 61 | Securit | [5] | n/a | [5] | n/a | | | y-Client | | | | | +----------+----------+----------+----------+----------+----------+ | 62 | Securit | [5] | n/a | [5] | n/a | | | y-Verify | | | | | +----------+----------+----------+----------+----------+----------+ | 63 | Server | [5] | o | [5] | m | +----------+----------+----------+----------+----------+----------+ | 64 | Session | [5] | c14 | [5] | c14 | | | -Expires | | | | | +----------+----------+----------+----------+----------+----------+ | 65 | Subject | [5] | c15 | [5] | c16 | +----------+----------+----------+----------+----------+----------+ | 66 | S | [5] | m | [5] | m | | | upported | | | | | +----------+----------+----------+----------+----------+----------+ | 67 | T | [5] | m | [5] | m | | | imestamp | | | | | +----------+----------+----------+----------+----------+----------+ | 68 | To | [5] | m | [5] | m | +----------+----------+----------+----------+----------+----------+ | 69 | Trigger | [5] | c17 | [5] | c17 | | | -Consent | | | | | +----------+----------+----------+----------+----------+----------+ | 70 | Us | [5] | m | [5] | m | | | er-Agent | | | | | +----------+----------+----------+----------+----------+----------+ | 71 | User | [5] | c18 | [5] | c18 | | | -to-User | | | | | +----------+----------+----------+----------+----------+----------+ | 72 | Via | [5] | m | [5] | m | +----------+----------+----------+----------+----------+----------+ | 73 | Warning | [5] | o | [5] | o | +----------+----------+----------+----------+----------+----------+ | 74 | WWW-Auth | [5] | m | [5] | m | | | enticate | | | | | +----------+----------+----------+----------+----------+----------+ | c1: m in | | | | | | | case of | | | | | | | presence | | | | | | | of | | | | | | | caller | | | | | | | pre | | | | | | | ferences | | | | | | | and ICSI | | | | | | | or IARI | | | | | | | values. | | | | | | | | | | | | | | c2: IF | | | | | | | Table | | | | | | | 6.1/8 | | | | | | | THEN m | | | | | | | ELSE i - | | | | | | | - INVITE | | | | | | | request | | | | | | | method. | | | | | | | | | | | | | | c3: IF | | | | | | | (Table | | | | | | | 6.1/10 | | | | | | | OR Table | | | | | | | 6.1/15A | | | | | | | OR Table | | | | | | | 6.1/20) | | | | | | | THEN m | | | | | | | ELSE i - | | | | | | | - NOTIFY | | | | | | | request | | | | | | | method | | | | | | | or | | | | | | | PUBLISH | | | | | | | request | | | | | | | method | | | | | | | or | | | | | | | S | | | | | | | UBSCRIBE | | | | | | | request | | | | | | | method. | | | | | | | | | | | | | | c4: m in | | | | | | | case of | | | | | | | SIP | | | | | | | location | | | | | | | con | | | | | | | veyance, | | | | | | | else | | | | | | | n/a. | | | | | | | | | | | | | | c5: IF | | | | | | | (Table | | | | | | | 6.1/15B | | | | | | | OR Table | | | | | | | 6.1/19 | | | | | | | OR Table | | | | | | | 6.1/21) | | | | | | | THEN m | | | | | | | ELSE i - | | | | | | | - | | | | | | | PUBLISH | | | | | | | response | | | | | | | method | | | | | | | or | | | | | | | REGISTER | | | | | | | response | | | | | | | method | | | | | | | or | | | | | | | S | | | | | | | UBSCRIBE | | | | | | | response | | | | | | | method. | | | | | | | | | | | | | | c6: m in | | | | | | | case of | | | | | | | a trust | | | | | | | rela | | | | | | | tionship | | | | | | | between | | | | | | | the | | | | | | | interc | | | | | | | onnected | | | | | | | n | | | | | | | etworks, | | | | | | | else | | | | | | | n/a. | | | | | | | | | | | | | | c7: m in | | | | | | | case of | | | | | | | a trust | | | | | | | rela | | | | | | | tionship | | | | | | | between | | | | | | | the | | | | | | | interc | | | | | | | onnected | | | | | | | n | | | | | | | etworks, | | | | | | | else o. | | | | | | | | | | | | | | c8: IF | | | | | | | (Table | | | | | | | 6.1/8 OR | | | | | | | Table | | | | | | | 6.1/9 OR | | | | | | | Table | | | | | | | 6.1/14 | | | | | | | OR Table | | | | | | | 6.1/15 | | | | | | | OR Table | | | | | | | 6.1/22 | | | | | | | OR Table | | | | | | | 6.1/23) | | | | | | | THEN m | | | | | | | ELSE n/a | | | | | | | - - | | | | | | | INVITE | | | | | | | request | | | | | | | or | | | | | | | INVITE | | | | | | | response | | | | | | | or PRACK | | | | | | | request | | | | | | | or PRACK | | | | | | | response | | | | | | | or | | | | | | | UPDATE | | | | | | | request | | | | | | | or | | | | | | | UPDATE | | | | | | | response | | | | | | | | | | | | | | c9: IF | | | | | | | Table | | | | | | | 6.1/18 | | | | | | | THEN m | | | | | | | ELSE n/a | | | | | | | - - | | | | | | | REGISTER | | | | | | | request | | | | | | | method. | | | | | | | | | | | | | | c10: IF | | | | | | | (Table | | | | | | | 6.1/8 OR | | | | | | | Table | | | | | | | 6.1/9A) | | | | | | | THEN i | | | | | | | ELSE n/a | | | | | | | - - | | | | | | | INVITE | | | | | | | request | | | | | | | method | | | | | | | or | | | | | | | MESSAGE | | | | | | | request | | | | | | | method. | | | | | | | | | | | | | | c11: IF | | | | | | | (Table | | | | | | | 6.1/8 OR | | | | | | | Table | | | | | | | 6.1/9A) | | | | | | | THEN m | | | | | | | ELSE n/a | | | | | | | - - | | | | | | | INVITE | | | | | | | request | | | | | | | method | | | | | | | or | | | | | | | MESSAGE | | | | | | | request | | | | | | | method. | | | | | | | | | | | | | | c12: m | | | | | | | in case | | | | | | | of | | | | | | | presence | | | | | | | of | | | | | | | caller | | | | | | | pref | | | | | | | erences. | | | | | | | | | | | | | | c13: IF | | | | | | | Table | | | | | | | 6.1/8 | | | | | | | THEN m | | | | | | | ELSE n/a | | | | | | | - - | | | | | | | INVITE | | | | | | | request | | | | | | | method. | | | | | | | | | | | | | | c14: m | | | | | | | in case | | | | | | | of | | | | | | | presence | | | | | | | of SIP | | | | | | | session | | | | | | | timer. | | | | | | | | | | | | | | c15: IF | | | | | | | (Table | | | | | | | 6.1/8 OR | | | | | | | Table | | | | | | | 6.1/9A | | | | | | | OR Table | | | | | | | 6.1/15A) | | | | | | | THEN o | | | | | | | ELSE n/a | | | | | | | - - | | | | | | | INVITE | | | | | | | request | | | | | | | method | | | | | | | or | | | | | | | MESSAGE | | | | | | | request | | | | | | | method | | | | | | | or | | | | | | | PUBLISH | | | | | | | request | | | | | | | method. | | | | | | | | | | | | | | c16: IF | | | | | | | (Table | | | | | | | 6.1/8 OR | | | | | | | Table | | | | | | | 6.1/9A | | | | | | | OR Table | | | | | | | 6.1/15A) | | | | | | | THEN m | | | | | | | ELSE n/a | | | | | | | - - | | | | | | | INVITE | | | | | | | request | | | | | | | method | | | | | | | or | | | | | | | MESSAGE | | | | | | | request | | | | | | | method | | | | | | | or | | | | | | | PUBLISH | | | | | | | request | | | | | | | method. | | | | | | | | | | | | | | c17: m | | | | | | | in case | | | | | | | of a | | | | | | | f | | | | | | | ramework | | | | | | | for | | | | | | | conse | | | | | | | nt-based | | | | | | | commun | | | | | | | ications | | | | | | | in SIP | | | | | | | | | | | | | | c18: m | | | | | | | in case | | | | | | | of | | | | | | | tran | | | | | | | sporting | | | | | | | user to | | | | | | | user | | | | | | | inf | | | | | | | ormation | | | | | | | for call | | | | | | | centers | | | | | | | using | | | | | | | SIP | | | | | | +----------+----------+----------+----------+----------+----------+
In the above table, m, o, c, i and N/A have the meanings indicated in Table
6.4.
Editor's Note: Insertion in the Table 6.3 of columns indicating the IBCF
profile, as proposed in TS 24.229, for sending and receiving side is FFS.
#### 6.1.1.4 Notations of the codes
In the table 6.1 and table 6.3, the status codes m, o, c, i and n/a have the
following meanings:
Table 6.4: Key to status codes
+---------------+----------------+----------------+----------------+ | Status code | Status name | Sending side | Receiving side | +---------------+----------------+----------------+----------------+ | m | mandatory | The capability | Supporting | | | | shall be | receiving a | | | | supported at | SIP message or | | | | II-NNI. | header at the | | | | | II-NNI means | | | | Supporting | that, if | | | | sending a SIP | received from | | | | message or | the II-NNI, | | | | header at the | this message | | | | II-NNI means | or header | | | | that this | shall be | | | | message or | forwarded to | | | | header shall | the served | | | | be sent over | network. It | | | | the II-NNI if | does not imply | | | | received from | that network | | | | the served | elements | | | | network. It | inside the | | | | does not imply | served network | | | | that network | or user | | | | elements | equipment | | | | inside the | connected to | | | | served network | this network | | | | or user | shall support | | | | equipment | this message | | | | connected to | or header. | | | | this network | | | | | shall support | | | | | this message | | | | | or header. | | +---------------+----------------+----------------+----------------+ | o | optional | The capability | Same as for | | | | may or may not | sending side. | | | | be supported | | | | | at II-NNI. It | | | | | is an | | | | | implementation | | | | | choice. | | +---------------+----------------+----------------+----------------+ | n/a | not applicable | It is | Same as for | | | | impossible to | sending side. | | | | use the | | | | | capability. No | | | | | answer in the | | | | | support column | | | | | is required. | | +---------------+----------------+----------------+----------------+ | c \ | conditional | The | Same as for | | | | requirement on | sending side. | | | | the capability | | | | | (\"m\", \"o\", | | | | | \"n/a\" or | | | | | \"x\") depends | | | | | on the support | | | | | of other | | | | | optional or | | | | | conditional | | | | | items. | | | | | \ is | | | | | the identifier | | | | | of the | | | | | conditional | | | | | expression. | | +---------------+----------------+----------------+----------------+ | i | irrelevant | Capability | Same as for | | | | outside the | sending side. | | | | scope of the | | | | | given | | | | | specification. | | | | | Normally, this | | | | | notation | | | | | should be used | | | | | in a base | | | | | specification | | | | | ICS proforma | | | | | only for | | | | | transparent | | | | | parameters in | | | | | received PDUs. | | | | | However, it | | | | | may be useful | | | | | in other | | | | | cases, when | | | | | the base | | | | | specification | | | | | is in fact | | | | | based on | | | | | another | | | | | standard. | | +---------------+----------------+----------------+----------------+
#### 6.1.1.5 Modes of signalling
Overlap signalling may be used if agreement exists between operators,
otherwise enbloc shall be used at the NNI.
### 6.1.2 SDP protocol
#### 6.1.2.1 General
The functional entity closest to the border of an IMS network towards an
Inter-IMS Network to Network Interconnection (see reference model in Clause 5)
shall provide the capabilities specified for that network element in Annex A.3
of TS 24.229 [5] with modifications as described in the following sub-clauses.
## 6.2 Control Plane Transport
### 6.2.1 General
The control plane transport of the IMS Inter-Operator Service Interconnection
Interface shall comply with Clause 4.2A of TS 24.229 [5] with modifications as
described in the following sub-clauses.
NOTE: Support of SCTP as specified in RFC 4168 [x] is optional for IBCF
connected by II-NNI. Nevertheless this option is favorable if the operators
would like to improve reliability over the Ici.
# 7 User plane Interconnection
## 7.1 Media and Codec
For "end-to-end " media session involving the II-NNI, the SIP/SDP codec
negotiation procedure can be applied between IM CN subsystems using different
media codecs. It is possible that the end-to-end codec negotiation could fail
because no common codec could be supported by the UEs, in particular for voice
services.
To enhance interoperability, the IBCF could interfere with the end-to-end
codec negotiation to offer additional codec(s) the TrGW is able to transcode,
based on the interworking agreements.
NOTE: Possible codecs which could be used at the II-NNI are described in 3GPP
TS 26.114 [15] and ETSI TS 181 005 [16].
In case the codec negotiation procedure determines that the two IMS endpoints
share a common codec, the user plane may be transported through the IM CN
subsystem without being transcoded by any IM CN subsystem entity.
If a common codec is not supported by the UEs, the core IMS entities (i. e.
TrGW controlled by IBCF) may provide functionalities to provide transcoding of
the user plane.
NOTE: Possible functionalities for codec transcoding in the IBCF/TrGW should
be documented in 3GPP TS 24.229.
## 7.2 User Plane Transport
The user plane transport of the IMS Inter-Operator Service Interconnection
Interface may use the protocols listed in Table 7.1. The used protocols to
transport media are negotiated by means of SDP offer/answer.
Table 7.1: Supported transport-level RFCs to be described in SIP/SDP messages
+---------------------+----------+---------------------+-----------+ | Item | RFC | Title | Support | +---------------------+----------+---------------------+-----------+ | 1 | RFC 3550 | RTP: A Transport | Mandatory | | | | Protocol for | | | | | Real-Time | | | | | Applications | | +---------------------+----------+---------------------+-----------+ | 2 | RFC 768 | User Datagram | Mandatory | | | | Protocol | | +---------------------+----------+---------------------+-----------+ | 3 | RFC 3551 | RTP Profile for | Mandatory | | | | Audio and Video | | | | | Conferences with | | | | | Minimal Control | | +---------------------+----------+---------------------+-----------+ | 4 | RFC 3556 | Session Description | Mandatory | | | | Protocol (SDP) | | | | | Bandwidth Modifiers | | | | | for RTP Control | | | | | Protocol (RTCP) | | | | | Bandwidth | | +---------------------+----------+---------------------+-----------+ | 5 | RFC 4585 | Extended RTP | Optional | | | | Profile for | | | | | Real-time Transport | (NOTE 1) | | | | Control Protocol | | | | | (RTCP) - Based | | | | | Feedback (RTP/AVPF) | | +---------------------+----------+---------------------+-----------+ | 6 | RFC 793 | Transmission | Optional | | | | Control Protocol | | | | | | (NOTE 2) | +---------------------+----------+---------------------+-----------+ | | | | | +---------------------+----------+---------------------+-----------+ | NOTE 1: used by | | | | | MTSI, as indicated | | | | | in 3GPP TS 26.114 | | | | | [15] | | | | | | | | | | NOTE 2: used for | | | | | MSRP service | | | | +---------------------+----------+---------------------+-----------+
# 8 Numbering, Naming and Addressing
The following URI formats in SIP messages may be applied at the II-NNI as
standardized in 3GPP TS 24.229 [5]:
  * SIP URI defined in IETF RFC 3261 [10];
  * tel URI defined in IETF RFC 3966 [11];
  * IM URI defined in IETF RFC 3860 [12];
  * PRES URI defined in IETF RFC 3859 [13];
  * MRSP URI defined in IETF RFC 4975 [14].
The IBCF shall support these URI formats. Other URI formats may be supported
over the II-NNI depending on the operators' policies.
# 9 IP Version
The network elements interconnected by means of the II-NNI may support IPv4
only, IPv6 only or both.
The support of one or both of the IP versions is an operator option and should
be based on bilateral agreement.
In case IPv4 and IPv6 networks are interconnected, the involved IBCFs and
TrGWs shall apply the IP version interworking procedures as indicated in 3GPP
TS 29.162 [8].
# 10 Security
The supported security mechanisms for IP signalling transport over II-NNI
interfaces are described in 3GPP TS 33.210 [9].
# 11 Charging
Editor´s Note: In this section impacts on existing charging and accounting
specifications will be investigated.
#