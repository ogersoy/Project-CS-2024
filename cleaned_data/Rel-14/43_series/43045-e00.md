# Foreword
This Technical Specification has been produced by the 3^rd^ Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 0 Scope
The present document deals with the procedures allowing the technical
realization of the Group 3 facsimile Service within the A/Gb mode PLMN using
transparent Network support, according to the definition of Teleservice 61 and
62 specified in the 3GPP TS 22.003 [2].
## 0.1 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
  * References are either specific (identified by date of publication, > edition number, version number, etc.) or non‑specific.
  * For a specific reference, subsequent revisions do not apply.
  * For a non-specific reference, the latest version applies. In the > case of a reference to a 3GPP document (including a GSM document), > a non-specific reference implicitly refers to the latest version > of that document in the same Release as the present document.
[1] Void.
[2] 3GPP TS 22.003: \" Teleservices supported by a GSM Public Land Mobile
Network (PLMN)\".
[3] 3GPP TS 22.034: "High Speed Circuit Switched Data (HSCSD) - Stage1".
[4] 3GPP TS 43.010: \" GSM Public Land Mobile Network (PLMN) connection
types\".
[5] 3GPP TS 23.034: \" High Speed Circuit Switched Data (HSCSD) - Stage2.
[6] 3GPP TS 04.02: \" GSM Public Land Mobile Network (PLMN) access reference
configuration\".
[7] 3GPP TS 04.08: \" Mobile radio interface layer 3 specification\".
[8] 3GPP TS 44.021: \" Rate adaption on the Mobile Station - Base Station
System (MS - BSS) interface\".
[9] 3GPP TS 27.001: \" General on Terminal Adaptation Functions (TAF) for
Mobile Stations (MS)\".
[10] 3GPP TS 27.003: \" Terminal Adaptation Functions (TAF) for services using
synchronous bearer capabilities\".
[11] 3GPP TS 29.007: \" General requirements on interworking between the
Public Land Mobile Network (PLMN) and the Integrated Services Digital Network
(ISDN) or Public Switched Telephone Network (PSTN)\".
[12] ITU-T Recommendation T.35: \"Procedure for the allocation of ITU-T
members\' codes\".
[13] ITU-T Recommendation F.160 Fascicle II.5: \"General operational provision
for the international public facsimile\".
[14] ITU-T Recommendation T.4 Fascicle VII.3: \"Standardization of group 3
facsimile apparatus for document transmission\".
[15] ITU-T Recommendation T.30 Fascicle VII.3: \"Procedures for document
facsimile transmission in the general switched telephone network\".
[16] ITU-T Recommendation V.21 Fascicle VIII.l: \"300 bits per second duplex
modem standardized for use in the general switched telephone network\".
[17] ITU-T Recommendation V.24 Fascicle VIII.l: \"List of definitions for
interchange circuits between data terminal equipment (DTE) and data
circuit‑terminating equipment (DCE)\".
[18] ITU-T Recommendation V.25bis Fascicle VIII.l: \"Automatic calling and/or
answering equipment on the general switched telephone network (GSTN) using the
100‑series interchange circuits\".
[19] ITU-T Recommendation V.27ter Fascicle VIII.l: \"4 800/2 400 bits per
second modem standardized for use in the general switched telephone network\".
[20] ITU-T Recommendation V.29 Fascicle VIII.l: \"9 600 bits per second modem
standardized for use on point-to-point 4-wire leased telephone-type
circuits\".
[21] ITU-T Recommendation V.33 Fascicle VIII.l: \"14 400 bits per second modem
standardized for use on point-to-point 4-wire leased telephone-type
circuits\".
[22] ITU-T Recommendation X.300 Fascicle VIII.6: \"General principles for
interworking between public networks, and between public networks and other
networks for the provision of data transmission services\".
[23] ITU-T Recommendation V.17: \"A 2-wire modem for facsimile applications
with rates up to 14 400 bit/s\".
[24] 3GPP TS 21.905: \" Vocabulary for 3GPP Specifications \"
## 0.2 Definitions and abbreviations
In addition to those below, abbreviations used in the present document are
listed in 3GPP TR 21.905 [1].
BCS Binary Coded Signalling phase of Facsimile transmission as per ITU-T T.30
CT105 Interchange Circuit 105 as per ITU-T V.24
CT106 Interchange Circuit 106 as per ITU-T V.24
CT107 Interchange Circuit 107 as per ITU-T V.24
CT108.2 Interchange Circuit 108/2 as per ITU-T V.24
CT109 Interchange Circuit 109 as per ITU-T V.24
CT114 Interchange Circuit 114 as per ITU-T V.24
CT115 Interchange Circuit 115 as per ITU-T V.24
FA/MT The Fax Adaptor specifically located at MT side
FA/IWF The Fax Adaptor specifically located at IWF side
MSG Message phase of Facsimile transmission as per ITU-T T.30
All protocol entities from ITU-T Facsimile Recommendations (T.4 and T.30)
apply; in the present document they are referenced to in the same way as in
the above ITU-T Recommendations (see also annex I to the present document).
# 1 Service definition
The fixed network Group 3 Facsimile service, as basically defined in ITU-T
Recommendation F.160, is an international telematic service for ISO A4
document transmission between two facsimile stations.
The service specification is comprised of two parts: the control protocol
described in ITU-T Recommendation T.30, and the document transmission coding
described in ITU-T Recommendation T.4.
The facsimile Teleservice is intended to allow facsimile connections between
group 3 apparatus using:
\- a PLMN as a stand alone facility, for mobile to mobile communication;
\- a PLMN to gain access to fixed networks PSTN and ISDN, for mobile to/from
land communication.
For this Teleservice, the document coding is as ITU-T Recommendation T.4 with
no modifications. The protocol used is ITU-T Recommendation T.30 modified
within the PLMN as detailed in the present document.
The interworking between different networks is based on ITU-T Recommendation
X.300.
The particular features of this Teleservice are:
\- it uses point-point communication;
\- the information transfer capability is dual \"Speech\"/\"Group 3
Facsimile\" for Teleservice 61 and \"Group 3 Facsimile\" only for Teleservice
62;
\- both mobile originated and terminated calls are supported;
\- the information transfer mode is circuit, duplex, synchronous and
symmetric;
\- different end-to-end transfer rates are used within the same call to take
advantage of the better radio path error rate;
\- use of a standard synchronous terminal adaptation function (as per 3GPP TS
27.003) within the MS.
# 2 Network architecture
The network architecture applicable to this Teleservice is shown in figure
1/43.045, below.
{width="5.875in" height="1.4722222222222223in"}
Figure 1/43.045: Network architecture
This shows the case of mobile to fixed network interworking. For mobile to
mobile calls, there would effectively be a loop back within the PLMN, using
two IWFs.
# 3 Reference configuration at the mobile station
The mobile reference configurations described in this clause are defined as
per 3GPP TS 24.002.
{width="5.666666666666667in" height="4.083333333333333in"}
Figure 2/43.045: Reference configurations
The Teleservice definition in 3GPP TS 22.003 regards the group 3 facsimile
terminal as a 2-wire analogue terminated equipment. In order to connect this
to the MT2 a separate \"Fax Adaptor\" device is necessary.
This configuration, shown in figure 2a/43.045, has to be considered as the
standard configuration, so that all the existing Group 3 facsimile apparatus
can be connected to the PLMN.
An alternative realization would be to combine a standard group 3 facsimile
machine and the Fax Adaptor into a specially developed \"PLMN facsimile
machine\", directly providing a digital output. Although such a device must
appear to the MT2 as identical to the Fax Adaptor (i.e. with an identical
interface and protocol), it would allow for a significantly smaller and
simpler facsimile machine. This configuration is shown in figure 2d/43.045 and
is regarded as a desirable alternative.
In addition of course, it is always possible to realize an MT0, as per figure
2f/43.045, where both the facsimile and mobile termination functions are
considered to be part of one integrated unit.
The remaining configurations concern the use of an S interface and are
considered as optional configurations. Their use is for further study.
The particular terminal adaptation functions used are those detailed in 3GPP
TS 27.003 and the interface to the MT2 used is synchronous V.24 with an option
for support of V.25bis procedures for autocalling and autoanswering.
## 3.1 Fax Adaptor functionality
The Fax Adaptor block, figure 3/43.045, is intended to specifically complement
the Group 3 facsimile apparatus in order to be able to communicate over a
PLMN.
{width="4.333333333333333in" height="1.9583333333333333in"}
Figure 3/43.045: Fax Adaptor scheme
Whether it has to be a function internal to the PLMN, or an external accessory
associated with the Group 3 apparatus, is beyond the scope of the present
document, and in any case, does not affect at all the working of the procedure
as here described.
It can be functionally partitioned in two sections:
\- an analogue section, dealing with:
\- the modulation and demodulation processes according to ITU-T Recommendation
V.21, V.27ter, V.29 and V.17 as explained in T.4 and T.30;
\- handling of the signalling on the 2-wire path to the facsimile machine,
including autocalling and autoanswer functions where necessary (see clause 6).
\- a digital section, dealing with:
\- monitoring and where necessary, manipulation of the T.30 protocol as
detailed in the rest of the present document;
\- overall control of the adaptor;
\- connection over the synchronous V.24 interface to the MT as described in
3GPP TS 27.003;
\- where necessary, autocalling and autoanswering functions according to
V.25bis.
In the following this specification will reference the Fax Adaptor
functionality, considering the most general case where it operates as a full-
featured (see figure 3/43.045) separate block (see figure 2a/43.045), as this
reference configuration is implicitly or explicitly exhaustive of all service
related technical aspects.
## 3.2 PLMN Facsimile Machine functionality
The special PLMN facsimile machine shown in the MS configuration of figure
2d/43.045 has a similar functionality to the digital part of the Fax Adaptor,
but without any of the analogue portions.
It appears over the V.24 interface as identical to the Fax Adaptor, i.e. the
MT2 needs to have no knowledge of the particular configuration used.
When necessary this reference configuration, will be explicitly referenced to
in the following; otherwise all technical aspects relevant to the
configuration implicitly apply.
# 4 Connection types
Table 1/43.045 shows the connection elements attributes applicable to this
Teleservice (note), adapted from 3GPP TS 43.010.
NOTE: Teleservice 61 includes both speech and data connection types, but
Teleservice 62 only the data connection type.
Table 1/43.045: Elements of connection types
+-------------+-------------+-------------+-------------+-------------+ | Protocol | Access to | Radio | I | BS-MSC/IWF | | type | TAF | interface | ntermediate | | | | | | | connection | | of Figure 6 | of the | connection | rate | | | of TS | Mobile | element | | element | | | | | RA1 to RA2 | | | 3GPP TS | Station | | | | | 43.010 | | | | | +-------------+-------------+-------------+-------------+-------------+ | Model 6: | - | Speech/GSM | - | ITU-T | | Speech | | | | | | | | | | A-law | +-------------+-------------+-------------+-------------+-------------+ | Model 5: | C/D/S UDI | C/D/S UDI | C/D/S UDI | C/D/S UDI | | | | | | | | Facsimile | - 14.4 | - 14.5 | - 16 | - 64 | | | kbit/s | kbit/s | kbit/s | kbit/s | | Group 3 | | | | | | | - 9.6 | - 12.0 | - 16 | - 64 | | | kbit/s | kbit/s | kbit/s | kbit/s | | | | | | | | | - 4.8 | - 6.0 | - 8 kbit/s | - 64 | | | kbit/s | kbit/s | | kbit/s | | | | | - 8 kbit/s | | | | - 2.4 | - 3.6 | | - 64 | | | kbit/s | kbit/s | | kbit/s | | | | | | | | | (note) | | | | +-------------+-------------+-------------+-------------+-------------+ | Model 5b | C/D/S UDI | C/D/S UDI | C/D/S UDI | C/D/S UDI | | | | | | | | Facsimile | - 14.4 | 14,5 or | 16 or 2X16 | - 64 | | | kbit/s | 2X12 kbit/s | kbit/s | kbit/s | | Group 3 | | | | | | | - 9.6 | 12 or 2X6 | 16 or 2X8 | - 64 | | | kbit/s | kbit/s | kbits | kbit/s | | | | | | | | | - 4.8 | 6 kbit/s | 8 kbit/s | - 64 | | | kbit/s | | | kbit/s | | | | 6 kbits | 8 kbit/s | | | | - 2.4 | | | - 64 | | | kbit/s | | | kbit/s | +-------------+-------------+-------------+-------------+-------------+
NOTE: The highest Access Rate actually supported in this teleservice will be
consistent with the highest Access Rate of the Transparent Bearer Service
provided by the Network Operator.
C = Circuit switched S = Synchronous
D = Full-duplex UDI = Unrestricted Digital Information
Table 1a/43.045
+-------------+-------------+-------------+-------------+-------------+ | Fax modem | No. of | Radio i/f | I | Padding | | rates | substreams | rate | ntermediate | Scheme | | | | | Rate | | +-------------+-------------+-------------+-------------+-------------+ | 14.4 kbit/s | 1 | 14,5 kbit/s | 16 kbit/s | | | | | | | | | | 2 | 12 kbit/s | 16 kbit/s | | +-------------+-------------+-------------+-------------+-------------+ | 12.0 kbit/s | 1 | 14,5 kbit/s | 16 kbit/s | FA(5D + S) | | | | | | | | | 2 | 12 kbit/s | 16 kbit/s | FA(5D + S) | +-------------+-------------+-------------+-------------+-------------+ | 9.6 kbit/s | 1 | 12 kbit/s | 16 kbit/s | | | | | | | | | | 2 | 6 kbit/s | 8 kbit/s | | +-------------+-------------+-------------+-------------+-------------+ | 7.2 kbit/s | 1 | 12 kbit/s | 16 kbit/s | FA(3D + S) | | | | | | | | | 2 | 6 kbit/s | 8 kbit/s | FA(3D + S) | +-------------+-------------+-------------+-------------+-------------+ | 4.8 kbit/s | 1 | 6 kbit/s | 8 kbit/s | | +-------------+-------------+-------------+-------------+-------------+ | 2.4 kbit/s | 1 | 6 kbit/s | 8 kbit/s | | +-------------+-------------+-------------+-------------+-------------+
FA = Padding is performed in the FA
(nD + mS) means that m SYNC frames will be added every n'th DATA frame
The MS must support the combinations in table 1a/43.045, restricted to what
has been negotiated between the MS and the network.
All transitions from one combination in table 1a/43.045 to another combination
in the same table, must be supported by the MS, as long as the fax modem rate
is kept constant or the transition of fax modem rate is performed in steps of
2,4 kbit/s.
The figure 4/43.045 shows the scheme of a typical PLMN connection for this
Teleservice, considering respectively R and S access at Network Termination.
To grant full support to the ITU-T Recommendation T.30, requiring different
transmission speeds, the following strategy shall be implemented:
\- PLMN provides for four Access Rates only, that is 14 400 bits/s, 9600
bit/s, 4800 bit/s, 2400 bit/s;
\- radio channel modification procedures are used for switching between Speech
phase and facsimile phase, as well as to select the suitable Access Rate (14
400,9600/4800/2400 bit/s) within the facsimile phase, as resulting from the
preliminary end-to-end negotiation between the terminals;
\- to transport Binary Coded Signalling (BCS) requiring a synchronous 300
bit/s bit-rate, speed conversion will be used at both the PLMN ends.
Figure 4b/43.045: Optional Teleservice connection (F.F.S)
## 4.1 Information transfer protocol model
The Figure 5/43.045 depicts the conceptual protocol model for this
Teleservice, deduced from model 5 and 5b of Figure 6/43.010.
The main point to be underlined is that all the protocol modules specific for
this Teleservice are confined in the Fax Adaptation functions at both the MT
and IWF ends. Note that model 5b of figure 6/43.010 details the placing of the
splitting and combiner function for multislot configurations.
{width="6.298611111111111in" height="3.16875in"}
Figure 5/43.045: Information transfer protocol model
## 4.2 Interactions with T.30
The philosophy of this specification is to allow the T.30 protocol to pass
transparently wherever possible, through the Fax Adaptors at both ends of the
PLMN channel. Manipulations are only made to the protocol where necessary to
overcome problems resulting from the differences between the PSTN and the PLMN
system. Basically, these problems fall into four categories:
\- supporting facsimile on a digital connection type;
\- bit errors during transfer of BCS frames;
\- the need to change speed to reduce the impact of bit errors during transfer
of Fax encoded Messages;
\- inability to support some features of T.30.
### 4.2.1 Link control strategy
Though the T.30 procedure is plain half-duplex, between the FAs at both the
PLMN ends a full‑duplex mode connection will be established. Information
transfer is structured in fixed length blocks, carrying either data received
from the local modem, or idle synchronization patterns.
Establishment, maintenance and release of the data circuit is performed
autonomously by each FA, by properly handling the physical interface to its
local modem.
Due to the rigid timeout constrains in T.30 protocol procedure, which will be
actually concatenated to the procedure defined here for the PLMN connection
part, a strictly forward­only approach is adopted for data link control; that
is no retransmission means are explicitly introduced to recover corrupted
information blocks.
Although in the majority of cases the T.30 protocol can take care of lost
frames and easily recover, there are some particularly critical points where
two consecutive segments in the procedure, without any interposed
acknowledgement, require different transmission speeds (BCS speed/Message
speed).
In these cases, to grant that a correct change-over from one modem type to
another takes place at both the PLMN ends, some additional protection is
necessary in the PLMN environment. This protection, actually at the beginning
and at the end of the Fax page transmission, is given by means of a
confirmation mechanism, whereby the originating FA waits while transmitting a
fixed pattern until an explicit acknowledgement is received from the
terminating FA. In these cases an interruption of the normal T.30 information
flow may eventually result.
Aiming at minimizing any possible delay in the end‑to‑end transmission between
the two facsimile apparatuses, the FAs will pass on information without error
control of the message integrity (note). To this regard, however, it is worth
underlining that an essential requirement in this procedure is the detection
of some key messages exchanged between the terminals, carrying basic control
information. Hence, in parallel to the primary information passing process, a
continuous monitoring of the information flowing across the FA is necessary,
to detect these messages, fully checked in their logical integrity.
NOTE: All V.21 modems in the FAs shall use the faster response time provided
by ITU-T Rec. V.21 (see table 2/V.21) for OFF to ON transition of CT109 and
CT106.
In addition, as detailed below, some fields in some frames may need to be
changed.
#### 4.2.1.1 Message detection
While in BCS, the following frames have to be detected:
\- DIS/DTC, to monitor all operational parameters proposed to the sender
terminal by the receiver terminal;
\- DCS, to realize (see table 2/T.30) the actual message transmission speed
accepted by the sender terminal and the relevant message transfer direction;
\- NSF, to inhibit Non-Standard Facilities, if explicitly required by the user
Fax Adaptor configuration;
\- DCN, to initiate the Call release procedure.
During the Message phase (C phase of T.30) a single bit pattern has to be
detected, the EOL character, a unique codeword that can never be found within
a valid line of Fax coded Data (see ITU-T Recommendation T.4, subclause
4.1.2), and therefore used to control the buffer level in each FA, as detailed
in the following subclause 5.2.6.
### 4.2.2 Speed conversion for BCS phases
Given the signalling load caused by the Channel Mode Modify procedure, rather
than changing the radio channel speed to 300 bit/s to carry the BCS frames, a
speed conversion mechanism is exploited at both the PLMN ends, allowing to
maintain the Channel rate of the Message phase (14 400/9600/4800/2400 bit/s)
during BCS phases.
A speed conversion factor can be defined as:
Fax Message speed (14 400 or 9600 or 4800 or 2400 bit/s)
Standard BCS speed (300 bit/s)
which will assume the value 8 or 16 or 32 or 48, depending on the actual
Message speed negotiated between the terminals.
On the basis of the above speed conversion factor, in the originating FA up-
conversion to Message speed will be performed according to the repetition
algorithm specified in subclause 5.2.3.2.
In the terminating FA, down-conversion to the BCS speed will require a
decimation algorithm (see subclause 5.2.3.3); this algorithm is assumed
implementation dependent, and hence its actual definition is beyond the scope
of the present document.
As the actual Access Rate over the GSM-TCH may change throughout the Call,
speed conversion factor needs to be updated in both FAs.
The FA/IWF will update this value upon successful completion of a CMM
procedure (see subclause 4.3.2).
The FA/MT which does not have direct access to the PLMN signalling channel
(except for MT0 configuration), shall estimate the actual Access Rate
established over the GSM‑TCH from the effective Access Rate of the MT data
interface (or any other means in case of MT0); this check shall be performed
whenever a BCS frame is sent towards the Radio path after which a change for
GSM-TCH Access Rate may be expected (e.g., DIS and DCS frames for Normal Fax
mode, PPR and CTC frames for Error Correction Mode).
### 4.2.3 Compatibility checking
Some features of T.30 cannot be supported in the PLMN environment. Fax
Adaptation function is in charge of dealing with such compatibility checking.
#### 4.2.3.1 Group 1 and Group 2 support
Group 1 and Group 2 equipments are not supported by the Teleservice as
described in the present document.
To this purpose, any tonal signalling specific to the above kind of Fax
apparatus will be ignored by the Fax adaptation function at MS and IWF.
#### 4.2.3.2 2 400 bit/s handshaking
Only standard 300 bit/s Binary Coded Signalling is supported. To this purpose
the FA will ignore this capability within the B segment of T.30 procedure,
looking for DIS frame, by default, from V.21 modem only.
#### 4.2.3.3 Non‑standard facilities
Non‑standard facilities are supported in so far they are not in conflict with
the standard procedure described in the present document. All the relevant BCS
frames are passed end‑to‑end, unless an explicit deletion is required by the
user (e.g. by a specific input at the Fax Adaptor associated with the MS). In
this case, upon detection (see subclause 4.2.1.1) of the NSF frame identifier
(the Facsimile Control Field octet according to T.30 terminology), the whole
HDLC frame shall be stripped and replaced by a PLMN specific NSF frame,
containing a Country Code and a unique identification of the FA manufacturer,
encoded as per ITU-T T.35 and according to national regulations; the
Information field of this NSF frame shall have a maximum length of 6 octets,
and shall not require any specific functionality in the PLMN.
#### 4.2.3.4 12 000 and 7200 bit/s Facsimile Document Transfer
End-to-end transfer of T.4 information at 12 000 and 7 200 bit/s can be
supported, even if this Bearer Service is not provided by a PLMN.\ To this
purpose a 14 400 bit/s or 9 600 bit/s Access Rate shall be used in the PLMN,
by exploiting only part of the available bandwidth. The originating FA will
add padding information to data received from the MSG modem, before
transmission over the GSM-TCH; the terminating FA will remove the same
information to restore the net 12 000 or 7 200 bit/s continuous data stream to
be transmitted over its local MSG modem.
The relevant procedures are fully described in sections 5.2.3.4 and 5.2.3.5.
#### 4.2.3.5 Procedure interrupts
Procedure interrupts are only possible in Teleservice 61; in case of
Teleservice 62 any attempt to invoke procedure interrupts by MMI on the MT
(see subclause 4.3.1 below) will be ineffective.
### 4.2.4 Speed checking
Upon receiving DIS/DTC frame, the FA/IWF shall perform a basic speed checking
procedure, aiming at verifying compatibility between the bit-rate
possibilities offered by the called Fax apparatus (bit fields 11, 12, 13, 14
in the IF) and the actual Access Rates allowed on the PLMN (2 400/4 800/9
600/14400 bit/s); in addition, some of these bit rates may result inhibited
during the call, if a speed lower than 9 600 bit/s has been chosen by the user
in the call set up message (for example if a better error rate is required).
The following cases may occur:
\- some of the bit‑rates indicated in DIS/DTC are not allowed on GSM-TCH (e.g.
the max speed indicated in setup is 9 600 bit/s, while DIS/DTC requests V.33);
a possible strategy to cater for this case is altering the indication in
DIS/DTC to a compatible value (e.g. V.29) by forcing appropriately the
relevant bits (note); other strategies are possible and allowed, as long as
the same goal of supporting the progress of the call is pursued, by
constraining the Fax apparatuses to use as message speeds the access rates
actually available in the PLMN.
NOTE: Is beyond the scope of this specification to specify the implementation
strategy adopted to recalculate the frame CRC after the manipulation;
additional delays, if any, shall not have a significant impact on T.30
operability.
\- the full set of bit-rates indicated in DIS/DTC are not compatible with the
allowed Access Rates on GSM-TCH (e.g. the max speed indicated in setup is 2
400 bit/s while DIS/DTC requests V.29 only); in this case the call shall be
failed;
\- the full set of bit-rates indicated in DIS/DTC are compatible with the
allowed Access Rates on GSM‑TCH; in this case no action shall be taken,
independently of the access rate actually established.
It should be noted that the \"14400 bit/s\" as max speed indication in the
SETUP message, does not preclude the establishment of a Call towards a Fax GR
3 equipment supporting only 9600, 4 800 and 2 400 bit/s as Message speed. As a
matter of fact, due to the multiplexing mechanism for BCS phases the initial
Access Rate (14 400 bit/s) will affect only the connection part between the
called MS and the associated IWF, whilst the appropriate Message speed will be
actually negotiated during the initial BCS phase, and settled upon reading the
appropriate field in DCS frame (see subclause 4.2.1.1). Therefore, if a
request for MSG transmission is received, without a valid DCS frame being
detected in advance (hence the message speed is undefined), the FA/IWF shall
release the call immediately.
## 4.3 Radio Channel Modification Procedures
There are two reasons why the characteristics of the radio channel may need to
be changed during a call.
Firstly, for the swap from speech to data and vice versa. In this case the In
Call Modification procedure as detailed in 3GPP TS 24.008 is carried out.
Secondly, if a T.30 speed drop back is requested, a channel mode modify
procedure as detailed in 3GPP TS 24.008 is initiated to match the radio
channel rate to the facsimile transmission speed to optimize the error rate.
### 4.3.1 In Call Modification (ICM)
Applies only for Teleservice 61.
The speech to facsimile change is initiated by MMI at the MS as in other data
services starting the ICM procedure via MODIFY signalling. CT108.2 ON
condition towards MT is a basic requirement to allow speech/data transition
take place.
Additionally, the data call direction (DCD) must be known to both the FA\'s
because of a correct tone handling. The DCD identifies the call direction from
the calling to the called station according to ITU-T T.30 phase \"A\" tonal
signals.
The DCD is derived from the evaluation of the behaviour of the mobile Fax
machine. No later than 3 sec after connecting the Fax apparatus to the line
the FA/MT is able to determine the DCD. If a CNG tone or nothing is detected
by the FA/MT the mobile Fax station is the calling station, if a CED tone or a
BCS signal is detected by the FA/MT the mobile Fax station is the called
station. The FA/MT indicates this towards the MT by means of CT105: CT105 OFF
condition indicates \"mobile terminated\", CT105 ON condition indicates
\"mobile originated\". The detection of CT105 condition and subsequent
triggering of the MODIFY message has to be done 3 sec after reception of the
ON condition of CT108.2.
A reverse DCD compared with the initial call setup direction is indicated to
the FA/IWF by means of the \"Reverse Call Setup Direction\" (RCSD) information
element within the MODIFY message. If the MODIFY message had contained this
information element, the same information element shall be included in the
MODIFY COMPLETE message (ACK). On the basis of RCSD and additional information
about the initial call setup direction (e.g. Transaction Identifier flag as
per 3GPP TS 24.007), the FA/IWF shall resolve the actual DCD.
At DCD condition \"mobile originated\" the FA/IWF has to transmit CNG if
neither CED nor a BCS signal has been already received, otherwise nothing. At
the DCD condition \"mobile terminated\" the FA/IWF has to transmit CED. At the
moment when the CT107 goes to ON condition the FA/MT has to generate CED if
CT105 was in ON condition, otherwise nothing (see subclauses 6.2.1 and 6.2.3).
Selection of the speech phase from the data phase (T.30 Procedure Interrupt
request) may be initiated by the mobile Fax machine as well as by the fixed
network fax machine (refer to the diagrams in figure II.‑10/43.045 and
II.‑11/43.045). Upon receipt of the \"alert operator\" tone request will be
accepted by manual intervention via MT (phone off-hook), and is reflected to
the Fax Adaptor (PLMN Facsimile machine) by CT106 and CT109 going in OFF
condition.
Upon monitoring the transit of the necessary sequence of BCS signals specific
for PRI the CT108.2 goes to OFF condition causing ICM from the Fax data phase
to the speech phase. In case of Procedure Interrupt request from the fixed
network side (figure II‑10/43.045), a guard timer in the MS is necessary to
protect against the possible loss of the response to the PRI-Q(PIN/PIP) sent
from the MS. After the execution of ICM CT107 is set to OFF condition
finishing the Fax data phase.
Subsequent re-selection of the data phase will be by manual intervention via
the MS causing CT108.2 going to ON condition initiating ICM.
During the speech phase of a procedure interrupt, the \"phone off-hook\"
condition of the MT is reported via the Fax Adaptor \"R\" interface (CT106/109
in OFF condition) to the fax apparatus which must remain functionally
connected to the Fax Adaptor to maintain the connection.
The precise operation of the Fax Adaptor for the support of procedure
interrupt is implementation dependent.
### 4.3.2 Channel Mode Modify (CMM)
The channel mode modification procedure is only initiated by the FA/IWF. Its
purpose is to adjust the radio channel bit rate to match the message speed
negotiated end-to-end between the facsimile machines.
The FA/IWF enters the CMM routine upon detecting the DCS frame sent either
from the MS or from the PSTN.
In the first case, FA/IWF being actually the receiving side in the facsimile
document transmission, the CMM procedure is executed as soon as the end of
frame is detected.\ That is, FA/IWF monitors the DCS frame and, if the
requested rate differs from the existing radio channel rate, then in sequence:
\- issues a CMM request to the new rate towards the PLMN signalling;
\- waits for the acknowledgement of CMM completed (note);
NOTE: Information sent/received to/from the GSM-TCH while waiting for CMM
completed is considered irrelevant, and left implementation dependent in the
context of this Recommendation.
\- returns back to the usual information passing process.
In the second case, FA/IWF being actually the transmitting side in the
facsimile document transmission, the CMM procedure is executed after a
suitable delay assumed as the time for transferring the DCS frame across the
Radio channel.
That is, FA/IWF monitors the DCS frame and, if the requested rate differs from
the existing radio channel rate, then in sequence:
\- waits for a fixed time of 150 m/sec.;
\- issues a CMM request to the new rate towards the PLMN signalling;
\- waits for the acknowledgement of CMM completed;
\- returns back to the usual information passing process.
If the CMM procedure fails, the IWF will initiate the release of the call.
However, in calls restricted to one channel and radio interface rate not
higher than 12 kbit/s, this does not necessarily apply.
As it will be seen below (see subclause 5.2.4), in both cases the execution of
the CMM procedure has to be seen like an exception within the usual
information passing process, even overlapping it to maintain the overall end-
to-end fixed delay.
# 5 Use of terminal adaptation functions
According to the Connection types (figure 4/43.045) there are two classes of
TAFs to be considered.
## 5.1 Standard TAFs for synchronous services
Are those described in 3GPP TS 27.003 for synchronous bearer capabilities in
the transparent mode. The Rate Adaption functions shall comply with the 3GPP
TS 44.021.
The interchange circuit signalling mapping is in accordance with the 3GPP TS
27.003.
## 5.2 Specific TAFs for facsimile service
Integral part of an end‑to‑end connection for this Teleservice is the Fax
Adaptation function, located at both the PLMN ends and in charge of adapting
the T.30 protocol procedure to the PLMN environment, as described in clause 4
of the present document.
The main features relevant to the adaptation function are detailed in the
following. For a better clarification, the Finite State Machine approach will
be adopted in the following description of FA functionality, considering it as
a set of states defined by specific interactions with both the PLMN digital
channel and the analogue channel.
### 5.2.1 Working principle
The working principle of the proposed solution is depicted in figure 6/43.045.
{width="6.295833333333333in" height="2.2083333333333335in"}
Figure 6/43.045: Fax Adaptor working principle
The Fax Adaptor is split in its main functional blocks:
\- a BCS (300 bit/s) modem capability (half duplex);
\- a MSG (14400/12000/9600/7200/4800/2400 bit/s) modem capability (half
duplex);
\- Mux/Demux capability, to connect the PLMN traffic channel (full duplex) to
either of these modems.
Looking at the overall Facsimile service architecture in PLMN (figure
5/43.045), half-duplex transmission is initiated in either side of the
connection by the actual request on the physical interface (CT109 ON on the
local modem), is then continued on the PLMN traffic channel (TCH), and finally
terminated on the appropriate modem at the remote side.
On the basis of the above assumptions, considering the Fax Adaptor a finite
state machine, the whole Adaptation process can be described by a set of 5
states:
\- IDLE state, when the FA is just connected to the GSM-TCH, sending
synchronizing patterns over the radio path;
\- BCS-REC state, when the FA is receiving data from the V.21 modem (BCS
phases);
\- BCS-TRA state, when the FA is transmitting data over the V.21 modem (BCS
phases);
\- MSG-REC state, when the FA is receiving data from the MSG modem
(2400/4800/7200/9600/
12000/14400 bit/s);
\- MSG-TRA state, when the FA is transmitting data over the MSG modem.
### 5.2.2 Basic protocol structure
The protocol structure is based on a strictly synchronous approach, using 64
bit fixed length frames; that is each FA actually sends/receives information
as 64 bit frames, in sequence and without interruption, during the whole
duration of a call; the content of each frame depends on the specific state
currently implemented.
The following set of frame types encompasses the full range of capabilities
required:
\- SYNC frame, explicitly designed to allow synchronization at the remote end,
even in the adverse transmission environment like the cellular radio channel;
it is a unique frame, used even as idle frame whenever there is no information
to be sent over the radio path;
\- STATUS frame, intended to carry both state identification codes, along with
state specific information; this frame has a unique structured format to allow
synchronization checking at remote side; the actual information content is
related to the specific state;
\- DATA frame which is fully unstructured, and carries Fax coded information
during MSG phases.
#### 5.2.2.1 Frame formats
To reduce complexity of finding synchronization over a 64 bit pattern, SYNC
frames are obtained by concatenating two 32 bit sync codewords, the second one
being the 1\'s complement notation of the first one.
The following codes shall be used for sync codewords:
MSB
hex code 3^E^375096: first sync codeword
hex code ClC8AF69: second sync codeword
To improve the probability of detecting synchronization, up to 3 errors are
tolerate in each single sync codeword; even in this conditions, the false sync
probability is quite negligible.
{width="4.402777777777778in" height="1.125in"}
Figure 7/43.045: STATUS frame format
STATUS frames have an internal 8 bit modularity (see figure 7/43.045), where
odd octets contain state identification codes (IDENT), and even octets contain
status specific information (INFO). IDENT octets are split in two (four bit)
fields, each one repeating the same code for status identification:
hex code 1: BCS-REC state
hex code 3: MSG-REC state
hex code 4: MSG-TRA state
To improve the probability of detecting the correct state, up to 3 corrupted
codes are tolerate in the total 8 instances repeated within a single STATUS
frame. INFO octets contain the same code repeated 4 times within one frame; in
particular:
\- for BCS-REC state this octet contains 8 bits received from the BCS modem;
\- in all other states an idle code (hex code 0F) is inserted.
DATA frames are 64 bit fully unstructured information blocks; the last DATA
frame in a Message phase will be truncated to the actual length of the bit
stream to be transmitted.
A general rule concerning all the above frames is that most significant bits
are transmitted first; in addition, a basic First‑In First‑Out functionality
will be implemented in the information passing process.
### 5.2.3 Protocol description
The above defined Finite State Machine model will be used to fully describe
the protocol procedure.
#### 5.2.3.1 IDLE state
In each FA this state implies a continuous transmission of SYNC frames towards
the radio path, to allow frame synchronization at the remote end. This state
is entered into immediately after the end of the synchronization process over
GSM-TCH, and will be returned to whenever loss of synchronization is assumed.
#### 5.2.3.2 BCS‑REC state
The basic function of FA in this state is transferring BCS information from
local modem to GSM‑TCH.
Transition to this state is triggered by CT109 ON condition of V.21 modem.
Towards the radio path continuous transmission of STATUS frames is performed,
according to the format described in the above subclause 5.2.2.1, as soon as 8
bits at least are available from the modem; information received from GSM‑TCH
is ignored while CT109 (local modem) is in the ON condition.
Every 8 bits received from the V.21 modem, the appropriate number of STATUS
frames (1 or 2 or 4 or 6 depending on the current TCH access rate) will be
originated.\ Following CT109 (local modem) OFF condition, padding bits (e.g.
ls) will be inserted to assemble the last octet.
Monitoring the content of certain BCS frames is required; the DCS frame
requires a specific procedure, detailed in the following subclause 5.2.4 in
the present document.
#### 5.2.3.3 BCS‑TRA state
The basic function of FA in this state is transferring BCS information from
GSM-TCH to its local V.21 modem.
Transition to this state is triggered by reception of BCS-REC code from TCH.
Towards the radio path continuous transmission of SYNC frames is performed,
according to the format described in the above subclause 5.2.2.1.
The information received from GSM-TCH, after proper decimation (likely a
voting algorithm, implementation dependent), is passed to the V.21 modem. Upon
detecting again a SYNC frame, the modem is turned OFF and a transition to the
IDLE state is performed.
Monitoring the content of certain BCS frames is required; the DCS frame
requires a specific procedure, detailed in the following subclause 5.2.4 in
the present document.
In addition a supervisoring function is required to check maintenance of
synchronization, by examining the inherently structured STATUS frame format.
Loss of synchronization will be assumed in case of reception of unstructured
STATUS frames, that is, when the repetition mechanism for both the IDENT and
the INFO octets does not allow unambiguous result to the voting algorithm. In
this case an estimate of the INFO octet value in the received STATUS frames is
anyway passed on to the V.21 modem, up to a maximum BCS-TRA duration of 2.5
sec.; at this point, if the correct synchronization has not been recovered
yet, the modem is turned OFF and a transition to the IDLE state is performed.
In case of loss of V.110 synchronization on the PLMN side, the FA shall
transmit 0s towards the analogue interface, as long as no data is available.
#### 5.2.3.4 MSG‑REC state
The basic function of FA in this state is transferring MSG information from
its local modem to GSM-TCH.
Transition to this state is triggered by the MSG modem being trained. Towards
the radio path continuous transmission of STATUS frames interleaved with SYNC
frames is performed. Actual transfer of Fax coded data over the radio path can
be initiated only after the specific acknowledgement is received from the
remote side, that is reception of MSG-TRA indication in a STATUS frame,
signifying the correct state transition. All data received from the MSG modem
will be stored in the FA buffer, to be passed on to GSM-TCH (First-In First-
Out mechanism) as soon as this confirmation message is received. Transmission
is performed by means of unstructured DATA frames, aligned to the last SYNC or
STATUS frame; in this phase, information received from GSM-TCH is ignored.
Following CT109 OFF condition of MSG local modem, after all buffered data are
transmitted (the last DATA frame is truncated if necessary), a transition to
the IDLE state is performed. In this state the FA waits (meanwhile BCS data
received from the local modem are ignored) for a minimum of 5 transmitted SYNC
frames, in order to indicate to the remote FA the end of the message.
While waiting for the acknowledgement re‑synchronization shall be performed if
necessary, following reception of unrecognisable SYNC frames or unstructured
STATUS frames.
In case of 7.2 kbit/s MSG speed, a SYNC frame will be stuffed every 3 DATA
frames, to produce the data stream at 9.6 kbit/s. The overall protocol
structure will result in multi-frame entities (3 DATA frames followed by a
single SYNC frame), continuously sent over the radio path. Similar mechanisms
for multislot configurations are specified in table 1a/43.045 for MSG speed of
12 kbit/s.
#### 5.2.3.5 MSG-TRA state
The basic function of FA in this state is transferring MSG information from
GSM-TCH to its local MSG modem.
Transition to this state is triggered by reception of MSG-REC code from TCH;
towards the radio path continuous transmission of STATUS frames interleaved
with SYNC frames is performed.
The MSG modem is trained and a timer (300 m/sec) corresponding to the round
trip time over the GSM‑TCH is started. After timeout, loss of synchronization
in the information received from TCH, will be assumed as the first Fax coded
DATA frame. From the receipt of Message on, continuous transmission of SYNC
frames is performed.
All data received from the GSM-TCH will be stored in the FA buffer, to be
passed on to the MSG modem (First-In First-Out mechanism) as soon as the modem
training terminates (CT106 ON).\ From this time on, re-synchronization will be
attempted continuously; when an IDLE state is recognized again in the data
stream received from the radio path, end of MSG phase will be assumed; then a
transition to the IDLE state will be executed, where the FA will wait
(ignoring data received from GSM‑TCH) until the buffered information has been
fully transmitted to the local MSG modem; the procedure will then proceed in
the normal way.
In case of 12.0 or 7.2 kbit/s MSG speed, the above general rule applies as
well.
NOTE: In this case, no longer an isolate SYNC frame can be interpreted as the
end of MSG phase (transition to the IDLE state of the originating FA at the
remote side).
However multi-frame synchronization shall be checked in addition, to remove
the SYNC frame stuffed by the originating FA to match the 14.4 kbit/s or 9.6
kbit/s Access Rate over the PLMN. If necessary multi-frame re-synchronization
shall be performed.
In case of loss of V.110 synchronization on the PLMN side, the FA shall
transmit 0s towards the analogue interface, as long as no data is available.
### 5.2.4 DCS and TCF processing
Transmission of TCF is performed end-to-end between the two Fax apparatuses,
and requires in both FAs a specific routine triggered by DCS command.
As far as the originating FA is concerned, the general procedure as described
above for MSG phase (MSG-REC state) applies, but no acknowledgement is
required, both at the beginning and at the end, and so no buffering is
necessary. That is, just following CT 109 ON condition of the MSG modem,
unstructured DATA frames are sent over the radio path, aligned to previous
frames; upon CT 109 OFF condition the last frame is sent (truncated if
necessary), and a transition to the IDLE state is performed.
As far as the terminating FA is concerned, after passing DCS command and
waiting for the appropriate delay (75 m/sec), transition to the MSG‑TRA is
executed; here modem training shall be pre-empted and, as soon as the modem is
ready for sending (CT 106 ON), loss of synchronization on TCH will be assumed
as the first DATA frame containing TCF information and will be passed to the
MSG modem. After 1.5 sec. timeout (standard TCF duration), the MSG modem will
be turned OFF and the IDLE state entered as usual. Fill information (i.e.
logical 0s) will be sent on the local modem if real TCF bit stream is not
available.
When DCS frame requires a different Message speed with respect to the actual
Access Rate established on the PLMN channel, CMM procedure will be issued (at
IWF side only) as detailed in subclause 4.3.2 of the present document, just
upon detecting the end of DCS frame, before any other task.
To ensure that the time gap between the DCS and TCF is within 75 +/- 20 ms
period as specified in ITU-T/T.30, the training shall be pre-empted in the
terminating FA, as defined above.
### 5.2.5 DCN (disconnect) frame
The FA/MT, upon detection of the DCN frame (see T.30) sent by the local
terminal to indicate the end of facsimile transmission, passes this
information to GSM-TCH in the normal way and then, initiates the disconnection
procedure towards MT, as defined in subclause 6.3/43.045. When the DCN frame
is received from GSM-TCH, disconnection procedure is initiated immediately by
the FA/MT, as defined in subclause 6.3/43.045.
### 5.2.6 Clocking
At MS the Fax Adaptor or PLMN facsimile machine will acquire received data bit
timing on CT115 (from MT). The transmitter element timing CT114 (from MT)
shall be synchronized to CT115.
Since a synchronous terminal adapter function is used, the clock rate over the
V.24 interface will always reflect the rate over the radio interface.
In this Teleservice the Network Independent Clocking (NIC) mechanism is not
used; to compensate against mismatching between PLMN clock speed and local
modem clock speed, a FIFO buffering technique shall be adopted in the FAs on
both the PLMN sides. The strategy to manage the buffer queue has a direct
impact on the overall delay of the MSG phase, and therefore on T.30
operability in the ensuing post-message phase; basically this procedure is
regarded as implementation dependent, and hence is beyond the scope of the
present document. A possible implementation is described below, aiming at
minimizing the addition delay.
In the originating FA, when the modem speed is lower, according to T.4
(subclause 4.1.3/T.4) a pause may be placed in the message flow by
transmitting a FILL sequence (variable string of 0s) between a line of Data
and an EOL character. When the modem speed is higher, as no flow control is
provided by T.4 coding, the buffer will store excess data resulting from a Fax
page transmission.
In the terminating FA the same control means will be exploited.
### 5.2.7 Timeouts
The overall Fax Adaptation function has no intrinsic timeout, and so relies
fully on the timing constraints associated to the end-to-end T.30 procedure.
This means that, no matter of the reference configuration used at the MS,
either the \"standard\" one (figure 2a/43.045) or the \"PLMN Facsimile
Machine\" (figure 2d/43.045), the progress of the Call for this Teleservice
will be merely subject to the T.30 typical timing protections, settled
externally (physically and/or functionally) with respect to the procedure as
described above.
## 5.3 Specific TAFs for facsimile service (T.30/A)
The optional error correction procedure, as defined in ITU-T T.4 and T.30
(annex A) Recommendations may be fully supported, provided some specific
features are added to the Fax Adaptation procedure as resulting from the
previous subclause 5.2/43.045.
These features are relevant to:
\- additional HDLC frame to be detected;
\- handling of the Message phase;
\- modification of the Channel rate (CMM request);
The Error Correction mode is entered upon detection of the relevant bits in
the DIS/DTC frame.
If the FA does not support the ECM, the relevant bit in the DIS has to be set
to zero by the FA.
### 5.3.1 Frame detection
During the BCS phases, beside the frames enlisted in subclause 4.2.1.1/43.045,
an additional frame (CTC) has to be detected, as it fixes the retransmission
strategy chosen by the Fax transmitting terminal.
### 5.3.2 Message phase
The same buffering approach as for standard T.30 procedure (see subclause
5.2.3.1/43.045) will be exploited to overcome the mismatching in clock speed
between PLMN and the local modem; in this case however the HDLC flag code (hex
7E) will be used to control the buffer level, as the Fax coded data are
structured in HDLC frames.
### 5.3.3 Additional CMM request
While in BCS the CTC frame has to be detected, due to the possible (not
mandatory) request of changing the transmission speed to a fallback bit-rate.
The CMM request towards the PLMN (when appropriate) is issued at the IWF side,
by exploiting the bit-rate indication in the CTC frame, similar to the
indication in DCS frame.
Upon detecting the CTC frame, either sent by the PSTN or by the MS, provided
the transmission speed indication is different from the existing Channel rate,
as soon as the end of frame is detected, CMM request is issued, using exactly
the same procedure as described for DCS in subclause 4.3.2 of the present
document
If a 7,2 kbit/s MSG speed is requested in the CTC frame, no CMM request is
necessary, and the specific procedure described in subclause 4.2.3.4 applies,
using the same 9,6 kbit/s Access Rate over the PLMN channel.
# 6 Signalling aspects
3GPP TS 27.003 identifies the BC/LLC/HLC requirements to be supported by the
MT.
In case of Teleservice 61 (Alternate Speech/Facsimile), both \"Speech\" and
\"Group 3 facsimile\" Bearer Capability Information Elements (BC-IE) are
necessary to set up the call; the sequence order in which these BC-IEs are
transmitted identifies the service to be provided first by the PLMN. For
Mobile Originated calls, the MT indicates in the SETUP message the first
requirement e.g. speech, by sending this as the first BC-IE; for an
\"autocalling\" facsimile request, the \"Group 3 Facsimile\" BC-IE is sent as
the first one.
For Mobile Terminated calls, the MT may change the order of BC­IEs and send
them back in the CALL CONF message.
In case of Teleservice 62, a single BC-IE (\"Group 3 Facsimile\") is used.
Interworking between Teleservice 61 and 62 is specified in 3GPP TS 22.003 and
3GPP TS 27.001.
## 6.1 Handling of Tonal Signals
Because the ITU-T defined service uses modems, there are some signals received
from the analogue link at the IWF and (where used) the Fax Adaptor which do
not have a direct binary representation. These signals cannot therefore be
passed across the radio interface in the same way as the T.30 and T.4
information. These signals are the modem Called (CED) and Calling (CNG) tones
sent at the start of each Fax data phase of the call; they are generated
locally by the FA/MT and FA/IWF, exploiting an end‑to‑end time alignment
mechanism, triggered by appropriate messages on the PLMN signalling channel.
The procedure is detailed in the following.
## 6.2 Call establishment
The PSTN Facsimile apparatus may be manually or automatically calling.
### 6.2.1 Mobile Terminated Call - Speech then Fax
Refer to diagrams in figure II‑5a/43.045 and II‑5b/43.045. In both of the
figures the initial call setup is mobile terminated. In figure II‑5a/43.045
the data call direction is also mobile terminated, in figure II‑5b/43.045 it
is mobile originated.
In order to make the transition from the speech phase to the facsimile phase,
the MODIFY command must be initiated by MMI at the MS
In the case where a PLMN facsimile machine is used, it will turn on CT108.2
when it is connected to the line by manual intervention.
In the case where a Fax Adaptor at MT is used, it will turn on CT108.2 when
the mobile Fax Apparatus is connected to the line by manual intervention.
After determination of the data call direction and ICM (see subclause 4.3.1)
and on completion of the synchronization process over the radio interface,
CT107 shall be turned on by the MT; in the case where a Fax Adaptor is used,
on receipt of CT107 from MT, the Fax Adaptor will complete the tonal
handshaking according to the rules in subclause 4.3.1. The analogue link at
FA/IWF side will be established in accordance with the T.30 Recommendation;
provided the synchronization process is completed (CT108.2 ON condition), the
appropriate tone according to the rules in subclause 4.3.1 shall be
transmitted. In case of data call direction \"mobile terminated\" the CED tone
shall be transmitted after a silence time of 1,8 to 2,5 sec. (see
T.30/4.3.3.2) from the call being answered; during transmission of CED tone
(2,6 sec. minimum duration, followed by a delay period of 75 +/- 20 m/sec) the
IWF/FA will process data received from GSM‑TCH as usual, but the relevant
information (e.g. preamble of a BCS frame) shall be discarded without any
buffering.
Note that CT109 and CT106 at the R interface of the MT must be in the ON
condition before any further procedure can be carried out end-to-end between
the Fax Adaptors; therefore, as soon as the synchronization process over the
radio interface is completed, both CT109 and CT106 (MT side) are clamped to
the ON condition by the FA/IWF (by setting the appropriate status bits in the
V.110 frame), so fixing a full-duplex mode throughout the whole data phase of
the call.
### 6.2.2 Mobile Terminated Call - Auto answer
Refer to the diagram in figure II‑6/43.045.
A call received from the PSTN will cause the MT to turn on CT125 at the R
interface.
In the case where a PLMN facsimile machine is used, V.25bis auto answer
process is handled directly by turning on CT108.2. In the case where a Fax
Adaptor is used, CT125 will cause ring current to be sent to the mobile Fax
apparatus. The Fax Adaptor will turn on CT108.2 when the mobile Fax Apparatus
answers the call.
On receipt of CT108.2, the MT will answer the call and initiate the
synchronization process over the radio interface.
On completion of the synchronization process over the radio interface, CT107
shall be turned on by the MT; in the case where a Fax Adaptor is used, on
receipt of CT107 from MT, the Fax Adaptor will initiate the tonal handshaking
by sending CNG (mandatory).
The analogue link at IWF side shall be established in accordance with the T.30
Recommendation; the same considerations apply as detailed in the previous
subclause 6.2.1 for CED transmission.
Note that CT109 and CT106 at the R interface of the MT must be in the ON
condition before any further procedure can be carried out end-to-end between
the Fax Adaptors; therefore, as soon as the synchronization process over the
radio interface is completed, both CT109 and CT106 (MT side) are clamped to
the ON condition by the FA/IWF.
### 6.2.3 Mobile Originated Call - Speech then Fax
Refer to diagrams in figure II‑7a/43.045 and II‑7b/43.045. In both of the
figures the initial call setup is mobile originated. In figure II‑7a/43.045
the data call direction is also mobile originated, in figure II‑7b/43.045 it
is mobile terminated.
In order to make the transition from the speech phase to the facsimile phase,
the MODIFY command must be initiated by MMI at the MS, which will result in a
synchronization phase over the radio interface and connection to line of
FA/IWF.
In the case where a Fax Adaptor is used, the mobile Fax apparatus must be
connected to line by manual intervention at this stage, and will cause the Fax
Adaptor to turn on CT108.2 towards the MT. In the case where a PLMN facsimile
machine is used, CT108.2 shall be turned on when the PLMN facsimile apparatus
is connected to line by manual intervention.
After determination of the data call direction and ICM (see subclause 4.3.1)
and on completion of the synchronization process over the radio interface, the
modem at IWF will be automatically selected and send the appropriate modem
tone according to the rules in subclause 4.3.1 to the PSTN Fax apparatus. Also
CT107 shall be turned on by MT, whereupon the FA/MT will complete the tonal
handshaking according to the rules in subclause 4.3.1.
Note that CT109 and CT106 at the R interface of the MT must be in the ON
condition before any further procedure can be carried out end-to-end between
the Fax Adaptors; therefore, as soon as the synchronization process over the
radio interface is completed, both CT109 and CT106 (MT side) are clamped to
the ON condition by the FA/IWF.
### 6.2.4 Mobile Originated Call - Auto calling
Refer to the diagram in figure II‑8/43.045.
Over the V.24 interface the autocalling procedure of V.25bis is initiated,
using the relevant HDLC format commands. This is done either directly from the
PLMN facsimile machine or, in the case where a Fax Adaptor is used, by loop
disconnect or DTMF dialling information between the mobile Fax apparatus and
the Fax Adaptor.
When the call is answered, a synchronization phase will take place over the
radio interface.
On completion of the synchronization process over the radio interface, the
modem at IWF will be automatically selected and send CNG (mandatory) to PSTN
Fax apparatus. Also CT107 shall be turned on by MT. In the case where a Fax
Adaptor is used, the receipt of CT107 shall cause the Fax Adaptor to connect
to line.
Note that CT109 and CT106 at the R interface of the MT must be in the ON
condition before any further procedure can be carried out end‑to‑end between
the Fax Adaptors; therefore, as soon as the synchronization process over the
radio interface is completed, both CT109 and CT106 (MT side) are clamped to
the ON condition by the FA/IWF.
### 6.2.5 Mobile Originated Call - Manual calling
Refer to the diagram in figure II‑9/43.045.
When the call is answered a synchronization phase will take place over the
radio interface, provided CT108.2 is in ON condition.
In the case where a Fax Adaptor is used, the mobile Fax apparatus must be
connected to line by manual intervention at this stage, and will cause the Fax
Adaptor to turn on CT108.2 towards the MT.\ In the case where a PLMN facsimile
machine is used, CT108.2 shall be turned on when the PLMN facsimile apparatus
is connected to line by manual intervention.
On completion of the synchronization process over the radio interface, the
modem at IWF will be automatically selected and send CNG (mandatory) to PSTN
Fax apparatus. Also CT107 shall be turned on by MT. In the case where a Fax
Adaptor is used, the receipt of CT107 shall cause the Fax Adaptor to connect
to line.
Note that CT109 and CT106 at the R interface of the MT must be in the ON
condition before any further procedure can be carried out end-to-end between
the Fax Adaptors; therefore, as soon as the synchronization process over the
radio interface is completed, both CT109 and CT106 (MT side) are clamped to
the ON condition by the FA/IWF.
## 6.3 Call release
The normal call release procedure will be initiated at the MS, either by the
PLMN Facsimile Machine or by the FA/MT, forcing CT108.2 in OFF condition; this
will follow DCN frame (disconnect, see subclause 5.2.5 of the present
document) occurrence, either sent over the GSM‑TCH towards the remote Fax
terminal or received via GSM‑TCH from the remote Fax terminal.
In the former case CT109 will be actually turned OFF after a time delay of 200
m/sec from DCN being sent. In the latter case no delay is necessary before
turning CT108.2 in OFF condition; when the received DCN is corrupted and hence
undetected in the MS by the FA, the Call Control entity in the MSC/IWF will
release the call over the PLMN connection element, following the disconnection
over the PSTN.
# 7 Interworking to fixed networks
PSTN and ISDN only are considered, both used as transit network to complement
the PLMN in the end-to-end connection between GR 3 facsimile apparatus, figure
8/43.045.
As far as the signalling aspect are concerned, both general and Facsimile
Teleservice specific requirements, as specified in 3GPP TS 29.007, apply.
Clarifications given in the following deal with Traffic channel aspects only.
## 7.1 Interworking to PSTN
As the standard access of Group 3 facsimile terminals for this Teleservice is
a 2‑wire analogue interface, all the technical requirements for network
interworking to PSTN are identical in principle to those encountered for the
terminal connection to the MT.
The key functional block is the Fax Adaptor described in clauses 4 to 6 of the
present document. As far as network interworking is concerned, the main
function to be performed by such block is the correct managing of a composite
modem, in accordance with the requirements of ITU-T Rec. T.30.
\- V.21 synchronous mode, as standard facility for all BCS phases;
\- V.27ter for message speeds of 4 800 and 2 400 bit/s;
\- V.29 for 9 600 and 7 200 bit/s message speed.
\- V.17 for 7200, 9600, 12000 and 14400 bit/s message speed.
The mechanism for selecting the right modem is the following:
\- the actual message speed is obtained by detecting the DCS frame (see table
2/T.30) while in BCS phase;
\- on entering the Message phase, there is an interchange between the V.21
modem and the actual modem agreed upon between the terminals for message
transmission;
\- on exiting the Message phase the V.21 modem is selected again.
Times for settling the modems will be in accordance with the requirements of
Recommendation T.30.
{width="6.295833333333333in" height="3.308333333333333in"}
Figure 8/43.045: Network interworking
## 7.2 Interworking to ISDN
The use of 3,1 kHz bearer capability of ISDN allows for an interworking of
PLMN very similar in practice to the scheme for PSTN, figure 6/43.045.
The Fax Adaptor function is in conformance with the description given in
clauses 4 to 6 of the present document, and operates as detailed in subclause
7.1/43.045.
###### ## Annex I (informative): Protocol entities from ITU-T T.30 and T.4
List of T.30 signals
* * *
Abbre-viation Function Signal format T.30 standard T.30 err.corr. CED Called
station identification 2100 Hz X X CFR Confirmation to receive X010 0001 X X
CRP Command repeat X101 1000 X X CIG Calling subscriber identification 1000
1000 X X CNG Calling tone 1100 Hz X X CSI Called subscriber identification
0000 0010 X X CTC Continue to correct X100 1000 X CTR Response to continue to
correct X010 0011 X DCN Disconnect X101 1111 X X DCS Digital command signal
X100 0001 X X DIS Digital identification signal 0000 0001 X X DTC Digital
transmit command 1000 0001 X X EOM End of message X111 0001 X  
EOP End of procedure X111 0100 X  
EOR End of retransmission X111 0011 X ERR Response to end of retransmission
X011 1000 X FCD Facsimile coded data 0110 0000 X FCF Facsimile control field
--- X X FCS Frame checking sequence 16 bits X X FIF Facsimile information
field --- X X FTT Failure to train X010 0010 X X MCF Message confirmation X011
0001 X X MPS Multi-page signal X111 0010 X  
NSC Non-standard facilities command 1000 0100 X X NSF Non-standard facilities
0000 0100 X X NSS Non-standard set-up X100 0100 X X PIN Procedural interrupt
negative X011 0100 X X PIP Procedural interrupt positive X011 0101 X X PIS
Procedure interrupt signal 462 Hz X X PPR Partial page request X011 1101 X PPS
Partial page signal X111 1101 X PRI Procedure interrupt X111 XXXX X  
RCP Return to control for partial page 0110 0001 X RNR Receive not ready X011
0111 X RR Receive ready X111 0110 X RTN Retrain negative X011 0010 X X RTP
Retrain positive X011 0011 X X TCF Training check frame 0... 1.5s X X TSI
Transmitting subscriber identification X100 0010 X X
* * *
List of ITU-T T.4 signals
* * *
Abbre-viation Function Signal format EOL End of line 0000 0000 0001 RTC Return
to control 6 * EOL
* * *
###### ## Annex II (informative): Procedure examples
{width="6.020833333333333in" height="8.73611111111111in"}
{width="6.3in" height="8.879861111111111in"}
{width="6.3in" height="8.879861111111111in"}
{width="6.295138888888889in" height="9.170833333333333in"}
{width="6.2972222222222225in" height="8.961805555555555in"}
{width="6.295138888888889in" height="8.941666666666666in"}
{width="6.2965277777777775in" height="8.926388888888889in"}
{width="6.295138888888889in" height="8.941666666666666in"}
{width="6.2972222222222225in" height="8.994444444444444in"}
{width="6.295138888888889in" height="8.94375in"}
{width="6.2965277777777775in" height="8.914583333333333in"}
{width="6.2965277777777775in" height="9.099305555555556in"}
{width="6.295138888888889in" height="8.832638888888889in"}
#