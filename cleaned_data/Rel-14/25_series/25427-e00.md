# Foreword
This Technical Specification (TS) has been produced by the 3^rd^ Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document shall provide a description of the UTRAN Iur and Iub
interfaces user plane protocols for Dedicated Transport Channel data streams
as agreed within the TSG-RAN working group 3.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
● References are either specific (identified by date of publication, edition
number, version number, etc.) or non‑specific.
● For a specific reference, subsequent revisions do not apply.
● For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TS 25.301: \"Radio interface protocol architecture\".
[2] 3GPP TS 25.401: \"UTRAN overall description\".
[3] 3GPP TS 25.302: \"Services provided by the physical layer\".
[4] 3GPP TS 25.433: \"UTRAN Iub interface Node B Application Part (NBAP)
signalling\".
[5] 3GPP TS 25.402: \"Synchronisation in UTRAN, Stage 2\".
[6] 3GPP TS 25.423: \"UTRAN Iur interface Radio Network Subsystem Application
Part (RNSAP) signalling\".
[7] 3GPP TS 25.133: "Requirements for support of radio resource management
(FDD)".
[8] 3GPP TS 25.123: "Requirements for support of radio resource management
(TDD)".
[9] 3GPP TS 25.212: \"Multiplexing and channel coding (FDD)\".
[10] 3GPP TS 25.222: \"Multiplexing and channel coding (TDD)\".
[11] 3GPP TS 25.224: \"Physical layer procedures (TDD)\".
[12] 3GPP TS 25.214: \"Physical layer procedures (FDD)\".
[13] 3GPP TS 25.319: "Enhanced uplink; Overall description; Stage 2"
[14] 3GPP TS 25.101: "User Equipment (UE) radio transmission and reception
(FDD)"
[15] 3GPP TS 25.331: "Radio Resource Control (RRC); Protocol Specification"
[16] 3GPP TS 25.321: "Medium Access Control (MAC) protocol specification"
# 3 Definitions and abbreviations
## 3.1 Definitions
For the purposes of the present document, the following terms and definitions
apply:
**Transport Bearer:** service provided by the transport layer and used by
frame protocol for the delivery of FP PDU
## 3.2 Abbreviations
For the purposes of the present document, the following abbreviations apply:
BER Bit Error Rate
CCTrCH Coded Composite Transport Channel
CFN Connection Frame Number
CRC Cyclic Redundancy Checksum
CRCI CRC Indicator
DCH Dedicated Transport Channel
DL Downlink
DPC Downlink Power Control
DRNC Drift RNC
DSCH Downlink Shared Channel
DTX Discontinuous Transmission
E-DCH Enhanced DCH
FP Frame Protocol
FT Frame Type
HARQ Hybrid ARQ
LTOA Latest Time of Arrival
PC Power Control
PDU Protocol Data Unit
PO Power Offset
QE Quality Estimate
RL Radio Link
SIR Signal-to-Interference Ratio
SRNC Serving RNC
TB Transport Block
TBS Transport Block Set
TFI Transport Format Indicator
TFCI Transport Format Combination Indicator
ToA Time of Arrival
ToAWE Time of Arrival Window Endpoint
ToAWS Time of Arrival Window Startpoint
TPC Transmit Power Control
TTI Transmission Time Interval
UE User Equipment
UL Uplink
## 3.3 Specification Notations
For the purposes of the present document, the following notations apply:
> [FDD] This tagging of a word indicates that the word preceding the tag
> \"[FDD]\" applies only to FDD. This tagging of a heading indicates that the
> heading preceding the tag \"[FDD]\" and the section following the heading
> applies only to FDD.
>
> [TDD] This tagging of a word indicates that the word preceding the tag
> \"[TDD]\" applies only to TDD, including 7.68 Mcps TDD, 3.84Mcps TDD and
> 1.28Mcps TDD. This tagging of a heading indicates that the heading preceding
> the tag \"[TDD]\" and the section following the heading applies only to TDD,
> including 7.68Mcps TDD, 3.84Mcps TDD and 1.28Mcps TDD.
>
> [7.68Mcps TDD] This tagging of a word indicates that the word preceding the
> tag \"[7.68Mcps TDD]\" applies only to 7.68Mcps TDD. This tagging of a
> heading indicates that the heading preceding the tag \"[7.68Mcps TDD]\" and
> the section following the heading applies only to 7.68Mcps TDD.
>
> [3.84Mcps TDD] This tagging of a word indicates that the word preceding the
> tag \"[3.84Mcps TDD]\" applies only to 3.84Mcps TDD. This tagging of a
> heading indicates that the heading preceding the tag \"[3.84Mcps TDD]\" and
> the section following the heading applies only to 3.84Mcps TDD.
>
> [1.28Mcps TDD] This tagging of a word indicates that the word preceding the
> tag \"[1.28Mcps TDD]\" applies only to 1.28Mcps TDD. This tagging of a
> heading indicates that the heading preceding the tag \"[1.28Mcps TDD]\" and
> the section following the heading applies only to 1.28Mcps TDD.
>
> [FDD - ...] This tagging indicates that the enclosed text following the
> \"[FDD - \" applies only to FDD. Multiple sequential paragraphs applying
> only to FDD are enclosed separately to enable insertion of TDD specific (or
> common) paragraphs between the FDD specific paragraphs.
>
> [TDD - ...] This tagging indicates that the enclosed text following the
> \"[TDD - \" applies only to TDD including 7.68 Mcps TDD, 3.84Mcps TDD and
> 1.28Mcps TDD. Multiple sequential paragraphs applying only to TDD are
> enclosed separately to enable insertion of FDD specific (or common)
> paragraphs between the TDD specific paragraphs.
>
> [7.68Mcps TDD - ...] This tagging indicates that the enclosed text following
> the \"[7.68Mcps TDD - \" applies only to 7.68Mcps TDD. Multiple sequential
> paragraphs applying only to 7.68Mcps TDD are enclosed separately to enable
> insertion of FDD and TDD specific (or common) paragraphs between the
> 7.68Mcps TDD specific paragraphs.
>
> [3.84Mcps TDD - ...] This tagging indicates that the enclosed text following
> the \"[3.84Mcps TDD - \" applies only to 3.84Mcps TDD. Multiple sequential
> paragraphs applying only to 3.84Mcps TDD are enclosed separately to enable
> insertion of FDD and TDD specific (or common) paragraphs between the
> 3.84Mcps TDD specific paragraphs.
>
> [1.28Mcps TDD - ...] This tagging indicates that the enclosed text following
> the \"[1.28Mcps TDD -- \" applies only to 1.28Mcps TDD. Multiple sequential
> paragraphs applying only to 1.28Mcps TDD are enclosed separately to enable
> insertion of FDD and TDD specific (or common) paragraphs between the
> 1.28Mcps TDD specific paragraphs.
>
> Procedure When referring to a procedure in the specification, the Procedure
> Name is written with the first letters in each word in upper case characters
> followed by the word \"procedure\", e.g. Timing Adjustment procedure.
>
> Frame When referring to a control or data frame in the specification, the
> CONTROL/DATA FRAME NAME is written with all letters in upper case characters
> followed by the words \"control/data frame\", e.g. DL SYNCHRONISATION
> control frame.
>
> IE When referring to an information element (IE) in the specification, the
> _Information Element Name_ is written with the first letters in each word in
> upper case characters and all letters in Italic font followed by the
> abbreviation \"IE\", e.g. _Connection Frame Number_ IE.
Value of an IE When referring to the value of an information element (IE) in
the specification, the \"Value\" is written as it is specified in subclause
6.2.4 or 6.3.3 enclosed by quotation marks, e.g. \"0\" or \"255\".
# 4 General aspects
The specification of Iub DCH and E-DCH data streams is also valid for Iur DCH
and E-DCH data streams.
The complete configuration of the transport channel is selected by the SRNC
and signalled to the Node B via the Iub and Iur control plane protocols.
The parameters of a transport channel are described in TS 25.301 [1].
Transport channels are multiplexed on the downlink by the Node B on radio
physical channels, and de-multiplexed on the uplink from radio physical
channels to transport channels.
In Iur interface, every set of coordinated transport channels related to one
UE context that is communicated over a set of cells that are macro-diversity
combined within Node B or DRNC, is carried on one transport bearer. This means
that there are as many transport bearers as set of coordinated transport
channels and Iur DCH data ports for that communication.
In Iub interface, every set of coordinated transport channels related to one
UE context that is communicated over a set of cells that are macro-diversity
combined within Node B is carried on one transport bearer. This means that
there are as many transport bearers as set of coordinated transport channels
and Iub DCH data ports for that communication.
Bi-directional transport bearers are used.
## 4.1 DCH and E-DCH FP services
DCH frame protocol provides the following services:
\- Transport of TBS across Iub and Iur interface.
\- Transport of outer loop power control information between the SRNC and the
Node B.
\- Support of transport channel synchronisation mechanism.
\- Support of node synchronization mechanism.
\- [3.84 Mcps TDD and 7.68 Mcps - Transfer of Rx timing deviation from the
Node B to the SRNC.]
\- Transfer of radio interface parameters from the SRNC to the Node B.
[FDD -- E-DCH frame protocol provides the following services:
\- Transport of MAC-es or MAC-is PDUs across Iub and Iur interface from Node B
to SRNC.
\- Transport of outer loop power control information between the SRNC and the
Node B.
\- Transfer of radio interface parameters from the SRNC to the Node B.
\- Transport of network congestion indication from SRNC across Iub and Iur
interface.
\- Transport of hybrid ARQ information between SRNC and Node B.]
[TDD -- E-DCH frame protocol provides the following services:
\- Transport of MAC-es or MAC-is PDUs across Iub and Iur interface from Node B
to SRNC.
\- Transport of outer loop power control information between the SRNC and the
Node B.
\- Transport of network congestion indication from SRNC across Iub and Iur
interface.
\- Transport of hybrid ARQ information between SRNC and Node B.]
## 4.2 Services expected from the Data Transport Network layer
Following service is required from the transport layer:
\- Delivery of FP PDU.
In sequence delivery is not required. However, frequent out-of-sequence
delivery may impact the performance and should be avoided.
## 4.3 Protocol Version
This revision of the specification specifies version 1 of the protocol.
# 5 DCH Frame Protocol procedures
## 5.1 Data Transfer
### 5.1.0 General
When there is some data to be transmitted, DCH data frames are transferred
every transmission time interval from the SRNC to the Node B for downlink
transfer, and DCH/E-DCH data frames are transferred every transmission time
interval from Node B to the SRNC for uplink transfer. [FDD -- For 2 ms Uu TTI
and depending on configuration from higher layers, the uplink E-DCH MAC-es or
MAC-is PDU's from one or more 2ms Uu TTI's may be bundled into one E-DCH Data
Frame before being transferred at an interval of e.g. 10ms from the Node B to
the SRNC.]
An optional error detection mechanism may be used to protect the data transfer
if needed. At the transport channel setup it shall be specified if the error
detection on the user data is used.
### 5.1.1 Uplink for DCH
Figure 1: Uplink Data Transfer procedure
Two modes can be used for the UL transmission: _normal mode_ and _silent
mode_. The mode is selected by the SRNC when the transport bearer is setup and
signalled to the Node B with the relevant control plane procedure.
\- In normal mode, the Node B shall always send an UL DATA FRAME to the RNC
for all the DCHs in a set of coordinated DCHs regardless of the number of
Transport Blocks of the DCHs.
\- In silent mode and in case only one transport channel is transported on a
transport bearer, the Node B shall not send an UL DATA FRAME to the RNC when
it has received a TFI indicating \"number of TB equal to 0\" for the transport
channel during a TTI.
\- In silent mode and in case of coordinated DCHs, when the Node B receives a
TFI indicating \"number of TB equal to 0\" for all the DCHs in a set of
coordinated DCHs, the Node B shall not send an UL DATA FRAME to the RNC for
this set of coordinated DCHs.
For any TTI in which the Node B Layer 1 generated at least one CPHY-Out-of-
Sync-IND primitive, the Node B is not required to send an UL DATA FRAME to the
SRNC.
When Node B receives an invalid TFCI, no UL DATA FRAME shall be sent to the
SRNC.
### 5.1.1a Uplink for E-DCH
Figure 1a: Uplink Data Transfer procedure
When a MAC-e or MAC-i PDU is received, it is demultiplexed into MAC-d flows
which are then each sent on separate transport bearers to the RNC using the
E-DCH UL DATA FRAME TYPE 1 (MAC-e) or TYPE 2 (MAC-i).
Only silent mode is used, i.e. E-DCH user-plane payload is transmitted using
the E-DCH UL DATA FRAME only when some payload has been successfully received.
[FDD -- In case of Multi Cell E-DCH operation two transport bearer modes can
be used for the E-DCH payload transmission: _separate Iub transport bearer
mode_ and _E-DCH UL flow multiplexing mode_. The mode is selected by the SRNC
when the RL on secondary UL frequency is setup and signalled to the Node B
with the relevant control plane procedure.
  * In separate Iub transport bearer mode, the Node B shall send each MAC-d flow received in cells of the different UL frequencies (primary and secondary) on separate transport bearers, one per frequency, to the RNC using the E-DCH UL DATA FRAME TYPE 2 (MAC-i).
  * In E-DCH UL flow multiplexing mode, the Node B shall send the MAC-d flows received on all UL frequencies (primary as well as secondary) on one transport bearer to the RNC using the E-DCH UL DATA FRAME TYPE 2 (MAC-i).]
[1.28Mcps TDD -- In case of multiple carriers E-DCH operation two transport
bearer modes can be used for the E-DCH payload transmission: _separate Iub
transport bearer mode_ and _E-DCH UL flow multiplexing mode_. The mode is
selected by the SRNC when the RL is setup and signalled to the Node B with the
relevant control plane procedure.
  * In separate Iub transport bearer mode, the Node B shall send each MAC-d flow received in the different frequencies on separate transport bearers, one per frequency, to the RNC using the E-DCH UL DATA FRAME TYPE 2 (MAC-i).
  * In E-DCH UL flow multiplexing mode, the Node B shall send one MAC-d flow received on all frequencies on one transport bearer to the RNC using the E-DCH UL DATA FRAME TYPE 2 (MAC-i).]
### 5.1.2 Downlink
Figure 2: Downlink Data Transfer procedure
The Node B shall only consider a transport bearer synchronised after it has
received at least one DL DATA FRAME on this transport bearer before LTOA (TS
25.402 [5]).
The Node B shall consider the DL user plane of a certain RL synchronised once
all transport bearers established to carry DCH DL DATA FRAMEs included in the
CCTrCH for this RL are considered as synchronised. Once synchronised, the Node
B shall assume the DL user plane for this Radio Link stays synchronised as
long as the Radio Link exists, even if transport bearers are added (see
5.10.2), replaced (see subclause 5.10.1), or removed. When a RL established
through the Radio Link Addition procedure (TS 25.433 [4] TS 25.423 [6]) is
combined with a RL whose DL user plane is considered as synchronised, the Node
B shall consider the DL user plane of this newly established RL as
synchronised.
[FDD - The Node B shall transmit on the DL DPDCH(s) of a certain RL only when
the DL user plane of this RL is considered synchronised.]
[TDD -- The Node B shall transmit special bursts on the DL DPCH as per TS
25.224 [11], until the DL user plane is considered synchronised].
When the DL user plane is considered synchronised and the Node B does not
receive a valid DL DATA FRAME in a TTI, it assumes that there is no data to be
transmitted in that TTI for this transport channel, and shall act as one of
the following cases:
> \- [TDD -- If the Node B receives no valid DL DATA FRAMEs for any transport
> channel assigned to a UE it shall assume DTX and transmit special bursts as
> per TS 25.224 [11]].
\- If the Node B is aware of a TFI value corresponding to zero bits for this
transport channel, this TFI is assumed. If the TFS contains both a TFI
corresponding to \"TB length equal to 0 bits\" and a TFI corresponding to
\"number of TB equal to 0\", the Node B shall assume the TFI corresponding to
\"number of TB equal to 0\". When combining the TFI\'s of the different
transport channels, a valid TFCI might result and in this case data shall be
transmitted on Uu.
\- If the Node B is not aware of a TFI value corresponding to zero bits for
this transport channel or if combining the TFI corresponding to zero bits with
other TFI\'s, results in an unknown TFI combination, the handling as described
in the following paragraph shall be applied.
At each radio frame, the Node B shall build the TFCI value of each CCTrCH,
according to the TFI of the DCH data frames multiplexed on this CCTrCH and
scheduled for that frame. [FDD - In case the Node B receives an unknown
combination of TFIs from the DL DATA FRAMEs, it shall transmit only the DPCCH
without TFCI bits.] [TDD - In case the Node B receives an unknown combination
of DCH DL DATA FRAMEs, it shall apply DTX, i.e. suspend transmission on the
corresponding DPCHs.]
## 5.2 Timing Adjustment
The Timing Adjustment procedure is used to keep the synchronization of the DCH
data stream in DL direction, i.e to ensure that the Node B receives the DL
frames in an appropriate time for the transmission of the data in the air
interface.
SRNC always includes the Connection Frame Number (CFN) to all DCH DL DATA
FRAMEs.
If a DL DATA FRAME arrives outside the arrival window defined in the Node B,
the Node B shall send a TIMING ADJUSTMENT control frame, containing the
measured ToA and the CFN value of the received DL DATA FRAME.
Figure 3: Timing Adjustment procedure
The arrival window and the time of arrival are defined as follows:
**Time of Arrival Window Endpoint (ToAWE):** ToAWE represents the time point
by which the DL data shall arrive to the Node B from Iub. The ToAWE is defined
as the amount of milliseconds before the last time point from which a timely
DL transmission for the identified CFN would still be possible taking into
account the Node B internal delays. ToAWE is set via control plane. If data
does not arrive before ToAWE a TIMING ADJUSTMENT control frame shall be sent
by Node B.
**Time of Arrival Window Startpoint (ToAWS):** ToAWS represents the time after
which the DL data shall arrive to the Node B from Iub. The ToAWS is defined as
the amount of milliseconds from the ToAWE. ToAWS is set via control plane. If
data arrives before ToAWS a TIMING ADJUSTMENT control frame shall be sent by
Node B.
**Time of Arrival (ToA):** ToA is the time difference between the end point of
the DL arrival window (ToAWE) and the actual arrival time of DL frame for a
specific CFN. A positive ToA means that the frame is received before the
ToAWE, a negative ToA means that the frame is received after the ToAWE.
The general overview on the Timing Adjustment procedure is reported in TS
25.401 [2].
## 5.3 DCH Synchronisation
DCH Synchronisation procedure is used to achieve or restore the
synchronisation of the DCH data stream in DL direction, and as a keep alive
procedure in order to maintain activity on the Iur/Iub transport bearer.
The procedure is initiated by the SRNC by sending a DL SYNCHRONISATION control
frame towards Node B. This control frame indicates the target CFN.
Upon reception of the DL SYNCHRONISATION control frame, Node B shall
immediately respond with UL SYNCHRONISATION control frame indicating the ToA
for the DL SYNCHRONISATION control frame and the CFN indicated in the received
DL SYNCHRONISATION control frame.
UL SYNCHRONISATION control frame shall always be sent, even if the DL
SYNCHRONISATION control frame is received by the Node B within the arrival
window.
Figure 4: DCH Synchronisation procedure
## 5.4 Outer Loop PC Information Transfer [FDD, 1.28 Mcps TDD]
Based, for example, on the CRCI values and on the quality estimate in the UL
DATA FRAME, SRNC modifies the SIR target used by the UL inner loop power
control by including the absolute value of the new SIR target in the OUTER
LOOP PC control frame sent to the Node B\'s.
At the reception of the OUTER LOOP PC control frame, the Node B shall
immediately update the SIR target used for the inner loop power control [1.28
Mcps TDD - of the respective CCTrCH for UL DCHs] with the specified value.
The OUTER LOOP PC control frame can be sent via any of the transport bearers
dedicated to one UE. [1.28 Mcps TDD - In case of multiple CCTrCHs carrying
DCHs, the OUTER LOOP PC control frame can be sent via any of the transport
bearers carrying DCHs which belong to the CCTrCH for which the UL SIR target
shall be adjusted.]
Figure 5: Outer Loop Power Control Information Transfer procedure
## 5.5 Node Synchronisation
The Node Synchronisation procedure is used by the SRNC to acquire information
on the Node B timing.
The procedure is initiated by the SRNC by sending a DL NODE SYNCHRONISATION
control frame to Node B containing the parameter T1.
Upon reception of a DL NODE SYNCHRONISATION control frame, the Node B shall
respond with UL NODE SYNCHRONISATION control frame, including the parameters
T2 and T3, as well as the T1 which was indicated in the initiating DL NODE
SYNCHRONISATION control frame.
The T1, T2, T3 parameters are defined as:
T1: RNC specific frame number (RFN) that indicates the time when RNC sends the
DL NODE SYNCHRONISATION control frame through the SAP to the transport layer.
T2: Node B specific frame number (BFN) that indicates the time when Node B
receives the correspondent DL NODE SYNCHRONIZATION control frame through the
SAP from the transport layer.
T3: Node B specific frame number (BFN) that indicates the time when Node B
sends the UL NODE SYNCHRONISATION control frame through the SAP to the
transport layer.
The general overview on the Node Synchronisation procedure is reported in TS
25.401 [2].
Figure 6: Node Synchronisation procedure
## 5.6 Rx Timing Deviation Measurement [3.84 Mcps and 7.68 Mcps TDD]
In case the _Timing Advance Applied_ IE indicates \"Yes\" (see TS 25.433 [4])
in a cell, the Node B shall, for all UEs using DCHs/E-DCHs, monitor the
receiving time of the uplink DPCH/E-PUCH bursts arriving over the radio
interface, and shall calculate the Rx timing deviation. Additionally, the Rx
timing deviation shall be calculated when an E-RUCCH or a TA Request (TS
25.319 [13]) transmission is received. If the calculated value, after
rounding, is not zero, it shall be reported to the SRNC in a RX TIMING
DEVIATION control frame belonging to that UE. For limitation of the frequency
of this reporting, the Node B shall not send more than one RX TIMING DEVIATION
control frame per UE within one radio frame. The RX TIMING DEVIATION control
frame indicates whether the deviation is derived from a conventional E-RUCCH
or a TA Request reception.
If the _Timing Advance Applied_ IE indicates \"No\" (see TS 25.433 [4]) in a
cell, monitoring of the receiving time of the uplink DPCH bursts is not
necessary and no RX TIMING DEVIATION control frame shall be sent.
Figure 7: Rx Timing Deviation Measurement procedure
## 5.7 DSCH TFCI Signalling [FDD]
Void.
## 5.8 Radio Interface Parameter Update [FDD]
This procedure is used to update radio interface parameters which are
applicable to all RL\'s, or E-DCH Serving Radio Link Set, for the concerning
UE. Both synchronised and unsynchronised parameter updates are supported.
The procedure consists of a RADIO INTERFACE PARAMETER UPDATE control frame
sent by the SRNC to the Node B.
Figure 9: Radio Interface Parameter Update procedure
If the RADIO INTERFACE PARAMETER UPDATE control frame contains a valid TPC
power offset value, the Node B shall apply the newly provided TPC PO in DL.
If the RADIO INTERFACE PARAMETER UPDATE control frame contains a valid Maximum
UE TX Power value, the E-DCH serving Node B may use the provided value to
improve E-DCH scheduling.
If the frame contains a valid DPC mode value, the Node B shall apply the newly
provided value in DL power control.
The new values shall be applied as soon as possible in case no valid CFN is
included or from the indicated CFN. If the frame contains a valid Multiple RL
Sets Indicator value, the Node B may use the newly provided value in Multiple
RL Sets Indicator whenever the Node B loses UL synchronization on a RL Set
after initial UL synchronization as described in TS 25.214 [12].
If the frame contains a valid Multiple RL Sets Indicator on the secondary
uplink frequency value, the Node B may use the newly provided value in
Multiple RL Sets Indicator on the secondary uplink frequency whenever the Node
B loses UL synchronization on a RL Set after initial UL synchronization on the
secondary uplink frequency as described in TS 25.214 [12].
## 5.9 Timing Advance [3.84 Mcps and 7.68 Mcps TDD]
This procedure is used in order to signal to the Node B the adjustment to be
performed by the UE in the uplink timing.
The Node B shall use the CFN and timing adjustment values to adjust its layer
1 to allow for accurate impulse averaging.
Figure 9A: Timing Advance procedure
## 5.10 General
### 5.10.1 Transport bearer replacement
As described in NBAP (TS 25.433 [4]) and RNSAP (TS 25.423 [6]), transport
bearer replacement can be achieved by using the Synchronised Radio Link
Reconfiguration Preparation procedure in combination with the Synchronised
Radio Link Reconfiguration Commit procedure, or by using the Unsynchronised
Radio Link Reconfiguration procedure. In both cases the following steps can be
discerned:
1) The new transport bearer is established after which 2 transport bearers
exist in parallel.
2) The transport channel(s) is/are switched to the new transport bearer.
3) The old transport bearer is released.
In step 1), communication on the old transport bearer continues as normal. In
addition, the Node B shall support DL DATA FRAMEs, the DCH Synchronisation
procedure (see section 5.3) and the Timing Adjustment procedure (see section
5.2) on the new bearer. This enables the SRNC to determine the timing on the
new transport bearer. DL DATA FRAMEs transported on the new transport bearer
shall not be transmitted on the DL DPDCH before the CFN indicated in the RADIO
LINK RECONFIGURATION COMMIT message.
Regarding step 2), the moment of switching is determined differently in the
synchronised and unsynchronised case:
  * When using the combination of the Synchronised Radio Link Reconfiguration Preparation procedure and the Synchronised Radio Link Reconfiguration Commit procedure, the UL/DL DATA FRAMEs shall be transported on the new transport bearer from the CFN indicated in the RADIO LINK RECONFIGURATION COMMIT message [FDD - or in the case the the _Fast Reconfiguration_ IE is included in the RADIO LINK RECONFIGURATION COMMIT message the Node B shall start using the new transport bearer for the transport of UL DATA FRAMEs from the CFN at which the NodeB detects that the UE uses the new configuration in the uplink].
  * When using the Unsynchronised Radio Link Reconfiguration procedure, the Node B shall start using the new transport bearer for the transport of UL DATA FRAMEs from the CFN at which the new transport bearer is considered synchronised (i.e. has received a DL DATA FRAME before LTOA (TS 25.433 [4])). Not applicable for E-DCH. Change is done directly in case of an E-DCH.
In both cases, starting from this CFN the Node-B shall support all applicable
DCH/E-DCH Frame Protocol procedures on the new transport bearer and no
requirements exist regarding support of DCH/E-DCH Frame Protocol procedures on
the old transport bearer.
Finally in step 3), the old transport bearer is released.
### 5.10.2 Transport channel addition
As described in NBAP (TS 25.433 [4]) and RNSAP (TS 25.423 [6]), transport
channel addition can be achieved by using the Synchronised Radio Link
Reconfiguration Preparation procedure in combination with the Synchronised
Radio Link Reconfiguration Commit procedure, or by using the Unsynchronised
Radio Link Reconfiguration procedure.
When using the Synchronised Radio Link Reconfiguration Preparation procedure
the Node B shall support DL DATA FRAMEs, the Synchronisation procedure (see
section 5.3) and the Timing Adjustment procedure (see section 5.2) on the new
transport bearer also before the CFN indicated in the RADIO LINK
RECONFIGURATION COMMIT message, in order to enable the SRNC to determine the
timing on the new transport bearer. DL DATA FRAMEs transported on the new
transport bearer before this CFN shall not be transmitted on the DL DPDCH.
Starting from this CFN the Node B shall support all applicable DCH and E-DCH
frame protocol procedures on the new transport bearer.
When using the Unsynchronised Radio Link Reconfiguration procedure the Node B
shall support data frames and control frames when the new transport bearer is
established.
## 5.11 Generation of subframe number
The _CFN_ and _Subframe Number_ IE's values in the E-DCH Data Frame shall
reflect the CFN and subframe number when the payload in the E-DCH Data Frame
was correctly received on the Uu. This corresponds to when the HARQ process
correctly decoded the data. [FDD - The subframe number is for 2 ms TTI set to
values {0-4} and for 10 ms TTI set to {0}]. [3.84Mcps TDD, 7.68 Mcps TDD - the
subframe number is set to {0}].[1.28 Mcps TDD - the subframe number is set to
{0-1}].
## 5.12 Generation of number of HARQ retransmissions
After successful decoding of E-DCH payload received over Uu, the Node B shall
insert the following values in the _Number of HARQ Retransmissions_ IE:
\- If the RSN value in the last HARQ retransmission that resulted in
successful decoding has the value 0, 1 [FDD -or 2], then the Node B shall
insert the same value in the _Number Of HARQ Retransmissions_ IE in the E-DCH
Data Frame.
\- If the RSN value in the last HARQ retransmission that resulted in
successful decoding has the value [TDD -2 or] 3, then the Node B shall insert
the calculated value of the actual number of retransmissions used for the
successful decoding into the _Number of HARQ Retransmissions_ IE in the E-DCH
Data Frame. If the actual number of retransmission cannot be calculated, then
the Node B shall insert the value 15 in the _Number of HARQ Retransmissions_
IE, indicating that the number of HARQ retransmissions is unknown.
\- If the UE was power limited at the time the subframe was received, or
another condition applies in which the number of retransmissions should not
influence the SIR target level, then the Node B shall insert value 13 into the
_Number of HARQ Retransmissions_ IE, indicating that the _Number of HARQ
Retransmissions_ IE is inappropriate as input to the outer loop power control.
After unsuccessful decoding of the E-DCH payload, the serving Node B shall act
according to section 5.13, Indication of HARQ failure.
## 5.13 Indication of HARQ failure
After unsuccessful decoding of the E-DCH payload and under conditions listed
below, the serving Node B shall send a HARQ Failure Indication to the SRNC.
[FDD - The non-serving Node B(s) shall not send a HARQ Failure Indication.]
The serving Node B shall send a HARQ Failure Indication to the SRNC under any
of the following conditions:
\- A MAC-e or MAC-i PDU for a HARQ process has not yet been successfully
decoded and the RSN [TDD -and HARQ process ID] indicates the transmission of a
new MAC-e or MAC-i PDU for the same HARQ process and the number of HARQ
retransmissions that had already occurred was equal or higher than the lowest
of the maximum HARQ retransmissions values for the UE's configured MAC-d
flows.
\- A MAC-e or MAC-i PDU for a HARQ process has not yet been successfully
decoded and the maximum retransmissions for the MAC-d flow with the highest
maximum HARQ retransmissions value valid for the UE connection have occurred,
or should have occurred in case the HARQ related outband signalling (RSN) on
the [FDD - E-DPCCH] [TDD - E-UCCH] could not be decoded.
\- A MAC-e or MAC-i PDU for a HARQ process has not yet been successfully
decoded when the MAC-e or MAC-i Reset is performed in UE. The Node B knows the
timing of the MAC-e or MAC-i Reset in the UE via higher layer.
The HARQ Failure Indication shall be sent on only one transport bearer. The
Node B may select any of the transport bearers associated with the UE for
which the HARQ failure relates to.
[FDD -- In case of Multi Cell E-DCH operation:
\- In E-DCH UL flow multiplexing mode, the NodeB may select any of the
transport bearers associated with the UE for which the HARQ failure relates
to, and including UL Mux Info (UL Multiplexing Information) into data frame to
indicate on which frequency the HARQ failure happens - **primary UL frequency
or secondary UL frequency.**
\- In separate Iub transport bearer mode, the NodeB may select any of the
transport bearers associated with the frequency of the UE for which the HARQ
failure relates to].
The HARQ failure is indicated in a user data frame with values set as follows:
\- The _CFN_ and _Subframe Number_ IE values shall reflect the time when the
failure was detected
\- TYPE 1: The _Number of MAC-es PDUs_ IE shall be set to zero. As a
consequence there are no _DDI_ and _N_ IEs in the header and 4 bits padding is
used after _Number of MAC-es PDUs_ IE in order to have the octet aligned
structure, and there are no _MAC-es PDUs_ IEs in the payload part of the data
frame related to the HARQ failure.
\- TYPE 2: The _Number of MAC-is PDUs_ IE shall be set to zero. As a
consequence there are no _MAC-is PDU descriptor_ IE and there are no _MAC-is
PDUs_ IEs in the payload part of the data frame related to the HARQ failure.
\- The _Number of HARQ Retransmissions_ IE shall be set to the number of HARQ
retransmissions that occurred when the failure was detected. The coding shall
be the same as for a correctly decoded payload as described in section 5.12.
\- [FDD - In case of Multi Cell E-DCH operation, the _UL Mux Info_ IE shall
**indicate the frequency in which** the failure was detected **\- primary UL
frequency or secondary UL frequency** as described in subclause 6.2.4.21 in
E-DCH UL flow multiplexing mode of Multi Cell E-DCH operation.]
## 5.14 TNL Congestion Indication
This procedure is used by the SRNC to signal, on a transport bearer carrying
an E-DCH MAC-d flow, that a transport network congestion situation on Iub/Iur
has been detected.
Figure 9AB: TNL Congestion Indication procedure
At the reception of the TNL CONGESTION INDICATION control frame, the Node B
should reduce the bit rate on the Iub interface.
If the TNL CONGESTION INDICATION control frame is indicating "TNL Congestion
-- detected by frame loss", or the TNL CONGESTION INDICATION control frame is
indicating "TNL Congestion -- detected by delay build-up", the Node B should
reduce the bit rate for at least the MAC-d flow on which the congestion
indication control frame was received.
If the TNL CONGESTION INDICATION control frame is indicating "No TNL
Congestion", the Node B can gradually go back to normal operation.
# 6 Frame structure and coding
## 6.1 General
The general structure of a DCH FP frame consists of a header and a payload.
The structure is depicted in figure 9B.
Figure 9B: General structure of a frame protocol PDU
The header contains a CRC checksum, the frame type field and information
related to the frame type.
There are two types of DCH FP frames (indicated by the _FT_ IE):
\- DCH data frame.
  * DCH control frame.
For the UL direction there is also an E-DCH data frame (indicated by
signalling). The E-DCH data frame is defined with two structures, TYPE 1 and
TYPE 2 depending of if it contains MAC-es PDUs (TYPE 1) or MAC-is PDUs (TYPE
2).
\- E-DCH data frame.
The payload of the data frames contains radio interface user data, quality
information for the transport blocks and for the radio interface physical
channel during the transmission time interval (for UL only), and an optional
CRC field.
The payload of the control frames contains commands and measurement reports
related to transport bearer and the radio interface physical channel but not
directly related to specific radio interface user data.
### 6.1.1 General principles for the coding
In the present document the structure of frames will be specified by using
pictures similar to figure 10.
* * *
           7                 6         5        4        3   2   1   0   Condition   
           Field 1           Field 2            Byte 1                               
           Field 3                     Byte 2                                        
           Field 3 (cont.)   Field 4            Byte 3                               
           Spare Extension
* * *
Figure 10: Example of notation used for the definition of the frame structure
Unless otherwise indicated, fields which consist of multiple bits within a
byte will have the more significant bit located at the higher bit position
(indicated above frame in figure 10). In addition, if a field spans several
bytes, more significant bits will be located in lower numbered bytes (right of
frame in figure 10).
On the Iub/Iur interface, the frame will be transmitted starting from the
lowest numbered byte. Within each byte, the bits are sent according decreasing
bit position (bit position 7 first).
The parameters are specified giving the value range and the step (if not 1).
The coding is done as follows (unless otherwise specified):
\- Unsigned values are binary coded.
\- Signed values are coded with the 2\'s complement notation.
Bits labelled \"Spare\" shall be set to zero by the transmitter and shall be
ignored by the receiver. The _Spare Extension_ IE indicates the location where
new IEs can in the future be added in a backward compatible way. The _Spare
Extension_ IE shall not be used by the transmitter and shall be ignored by the
receiver.
## 6.2 Data frames
### 6.2.1 Introduction
The purpose of the user data frames is to transparently transport the
transport blocks between Node B and SRNC.
The protocol allows for multiplexing of coordinated dedicated transport
channels, with the same transmission time interval, onto one transport bearer.
The transport blocks of all the coordinated DCHs for one transmission time
interval are included in one frame.
SRNC indicates the multiplexing of coordinated dedicated transport channels in
the appropriate RNSAP/NBAP message.
### 6.2.2 UL DATA FRAME
#### 6.2.2.1 UL DATA FRAME FOR DCH
The structure of the UL DATA FRAME is shown in figure 11.
* * *
7 6 5 4 3 2 1 0 Header Header CRC FT  
CFN  
Spare bits 7-5 TFI of first DCH
Spare bits 7-5 TFI of last DCH  
First TB of first DCH Payload
First TB of first DCH (cont) Pad
Last TB of first DCH
Last TB of first DCH (cont) Pad
First TB of last DCH
First TB of last DCH (cont) Pad
Last TB of last DCH
Last TB of last DCH (cont) Pad  
QE  
CRCI of first TB of first DCH
                                                                   CRCI of last TB of last DCH   Pad
Spare Extension  
Payload CRC  
Payload CRC (cont)
* * *
Figure 11: UL DATA FRAME structure
For the description of the fields see subclause 6.2.4.
There are as many TFI fields as number of DCH multiplexed in the same
transport bearer.
The DCHs in the frame structure are ordered from the lower DCH id (\'first
DCH\') to the higher DCH id (\'last DCH\').
The size and the number of TBs for each DCH are defined by the correspondent
TFI.
If the TB does not fill an integer number of bytes, then bit padding is used
as shown in the figure in order to have the octet aligned structure (ex: a TB
of 21 bits requires 3 bits of padding).
There is a CRCI for each TB included in the frame irrespective of the size of
the TB, i.e. the CRCI is included also when the TB length is zero. If the
CRCIs of one data frame do not fill an integer number of bytes, then bit
padding is used as shown in the figure in order to have the octet aligned
structure (ex. 3 CRCI bits require 5 bits of padding, but there are no CRCI
bits and no padding, when the number of TBs is zero).
The _Payload CRC_ IE is optional, i.e. the whole 2 bytes field may or may not
be present in the frame structure (this is defined at the setup of the
transport bearer).
#### 6.2.2.2 UL DATA FRAME FOR E-DCH TYPE 1
The structure of the E-DCH UL DATA FRAME TYPE 1 is shown in Figure 11a. TYPE 1
frame structure is used when the E-DCH UL DATA FRAME is carrying MAC-es PDUs
(TS 25.321 [16]).
7 | 6 | 5 | 4 | 3 | 2 | 1 | 0 |  |   
---|---|---|---|---|---|---|---|---|---  
Header CRC | FT |  | Header |  |  |  |  |  |   
Header CRC (cont) | FSN |  |  |  |  |  |  |  |   
Spare bits 7-4 | Number of subframes |  |  |  |  |  |  |  |   
CFN |  |  |  |  |  |  |  |  |   
Spare | N of HARQ Retransm | 1st subframe number |  |  |  |  |  |  |   
N of MAC-es PDUs | First DDI |  |  |  |  |  |  |  |   
First DDI cont | First N |  |  |  |  |  |  |  |   
|  |  |  |  |  |  |  |  |   
Last DDI | Last N |  |  |  |  |  |  |  |   
Last N cont | Pad |  |  |  |  |  |  |  |   
|  |  |  |  |  |  |  |  |   
Spare | N of HARQ Retransm | Last Subframe number |  |  |  |  |  |  |   
N of MAC-es PDUs | First DDI |  |  |  |  |  |  |  |   
First DDI cont | First N |  |  |  |  |  |  |  |   
|  |  |  |  |  |  |  |  |   
Last DDI | Last N |  |  |  |  |  |  |  |   
Last N cont | Pad |  |  |  |  |  |  |  |   
Spare bits 7-6 |  |  | Payload |  |  |  |  |  |   
First MAC-es PDU of first Subframe |  |  |  |  |  |  |  |  |   
|  |  |  |  |  |  |  |  |   
Spare bits 7-6 |  |  |  |  |  |  |  |  |   
Second MAC-es PDU of first Subframe |  |  |  |  |  |  |  |  |   
|  |  |  |  |  |  |  |  |   
|  |  |  |  |  |  |  |  |   
Spare bits 7-6 |  |  |  |  |  |  |  |  |   
Last MAC-es PDU of first Subframe |  |  |  |  |  |  |  |  |   
|  |  |  |  |  |  |  |  |   
Spare bits 7-6 |  |  |  |  |  |  |  |  |   
First MAC-es PDU of last Subframe |  |  |  |  |  |  |  |  |   
|  |  |  |  |  |  |  |  |   
Spare bits 7-6 |  |  |  |  |  |  |  |  |   
Second MAC-es PDU of last Subframe |  |  |  |  |  |  |  |  |   
|  |  |  |  |  |  |  |  |   
|  |  |  |  |  |  |  |  |   
Spare bits 7-6 |  |  |  |  |  |  |  |  |   
Last MAC-es PDU of last Subframe |  |  |  |  |  |  |  |  |   
|  |  |  |  |  |  |  |  |   
Spare Extension |  | Optional Payload |  |  |  |  |  |  |   
Payload CRC |  |  |  |  |  |  |  |  |   
Payload CRC (cont) |  |  |  |  |  |  |  |  |   
Figure 11a: E-DCH UL DATA FRAME TYPE 1 structure
For the description of the fields see subclause 6.2.4.
When there is an even, including zero, number of DDI + N field pairs for a
subframe, then 4 bits padding is used as shown in the figure in order to have
the octet aligned structure.
The _Payload CRC_ IE is optional in frames that contain a Payload, i.e. the
whole 2 bytes field may or may not be present in the frame structure (this is
defined at the setup of the transport bearer). The _Payload CRC_ IE may only
be present if the E-DCH UL data frame contains payload.
#### 6.2.2.3 UL DATA FRAME FOR E-DCH TYPE 2
The structure of the E-DCH UL DATA FRAME TYPE 2 is shown in Figure 11b. TYPE 2
frame structure is used when the E-DCH UL DATA FRAME is carrying MAC-is PDUs
(TS 25.321 [16]).
7 | 6 | 5 | 4 | 3 | 2 | 1 | 0 |  |   
---|---|---|---|---|---|---|---|---|---  
Header CRC | FT |  | Frame header |  |  |  |  |  |   
Header CRC (cont) | FSN |  |  |  |  |  |  |  |   
Spare bits 7-6 | UL Mux info | Number of subframes |  |  |  |  |  |  |   
CFN |  |  |  |  |  |  |  |  |   
User Buffer Size (UB Size) |  |  |  |  |  |  |  |  |   
User Buffer Size (UB Size) cont |  |  |  |  |  |  |  |  |   
UB Size cont | Spare bits 5-6 | Nr of MAC-is SDU in frame |  |  |  |  |  |  |   
Nr of MAC-is SDU in frame(cont) |  |  |  |  |  |  |  |  |   
Spare | N of HARQ Retransm | 1st Subframe number |  |  |  |  |  |  |   
N of MAC-is PDUs | Spare bits 3-0 |  |  |  |  |  |  |  |   
Spare | N of HARQ Retransm | 2nd Subframe number |  |  |  |  |  |  |   
N of MAC-is PDUs | Spare bits 3-0 |  |  |  |  |  |  |  |   
|  |  |  |  |  |  |  |  |   
Spare | N of HARQ Retransm | Last Subframe number |  |  |  |  |  |  |   
N of MAC-is PDUs | Spare bits 3-0 |  |  |  |  |  |  |  |   
MAC-is PDU descriptor of 1st MAC-is PDU of 1st subframe |  |  |  |  |  |  |  |  |   
MAC-is PDU descriptor of 2nd MAC-is PDU of 1st subframe |  |  |  |  |  |  |  |  |   
|  |  |  |  |  |  |  |  |   
MAC-is PDU descriptor of last MAC-is PDU of 1st subframe |  |  |  |  |  |  |  |  |   
|  |  |  |  |  |  |  |  |   
MAC-is PDU descriptor of 1st MAC-is PDU of last subframe |  |  |  |  |  |  |  |  |   
|  |  |  |  |  |  |  |  |   
MAC-is PDU descriptor of last MAC-is PDU of last subframe |  |  |  |  |  |  |  |  |   
First MAC-is PDU of first subframe |  | Frame Payload |  |  |  |  |  |  |   
Second MAC-is PDU of first subframe |  |  |  |  |  |  |  |  |   
|  |  |  |  |  |  |  |  |   
Last MAC-is PDU of first subframe |  |  |  |  |  |  |  |  |   
|  |  |  |  |  |  |  |  |   
First MAC-is PDU of last subframe |  |  |  |  |  |  |  |  |   
|  |  |  |  |  |  |  |  |   
Last MAC-is PDU of last subframe |  |  |  |  |  |  |  |  |   
Spare Extension |  | Optional Frame Payload |  |  |  |  |  |  |   
Payload CRC |  |  |  |  |  |  |  |  |   
Payload CRC (cont) |  |  |  |  |  |  |  |  |   
Figure 11b: E-DCH UL DATA FRAME TYPE 2 structure
For the description of the fields see subclause 6.2.4.
The _Payload CRC_ IE is optional in frames that contain a Payload, i.e. the
whole 2 bytes field may or may not be present in the frame structure (this is
defined at the setup of the transport bearer). The _Payload CRC_ IE may only
be present if the E-DCH UL data frame contains payload.
### 6.2.3 DL DATA FRAME
The structure of the DL DATA FRAME is shown in figure 12.
7 | 6 | 5 | 4 | 3 | 2 | 1 | 0 |  | Header  
---|---|---|---|---|---|---|---|---|---  
Header CRC | FT |  |  |  |  |  |  |  |   
CFN |  |  |  |  |  |  |  |  |   
Spare bits 7-6 | TFI of first DCH |  |  |  |  |  |  |  |   
|  |  |  |  |  |  |  |  |   
Spare bits 7-6 | TFI of last DCH |  |  |  |  |  |  |  |   
First TB of first DCH |  | Payload |  |  |  |  |  |  |   
|  |  |  |  |  |  |  |  |   
First TB of first DCH (cont) | Pad |  |  |  |  |  |  |  |   
|  |  |  |  |  |  |  |  |   
Last TB of first DCH |  |  |  |  |  |  |  |  |   
|  |  |  |  |  |  |  |  |   
Last TB of first DCH (cont) | Pad |  |  |  |  |  |  |  |   
|  |  |  |  |  |  |  |  |   
First TB of last DCH |  |  |  |  |  |  |  |  |   
|  |  |  |  |  |  |  |  |   
First TB of last DCH (cont) | Pad |  |  |  |  |  |  |  |   
|  |  |  |  |  |  |  |  |   
Last TB of last DCH |  |  |  |  |  |  |  |  |   
|  |  |  |  |  |  |  |  |   
Last TB of last DCH (cont) | Pad |  |  |  |  |  |  |  |   
New IE fl 7(E) | New IE fl 6 | New IE fl 5 | New IE fl 4 | New IE fl 3 | New IE fl 2 | New IE fl 1 | New IE fl 0 |  |   
Spare bits 7-1 | CLTD-R |  |  |  |  |  |  |  |   
Spare Extension |  | Optional Payload |  |  |  |  |  |  |   
Payload CRC |  |  |  |  |  |  |  |  |   
Payload CRC (cont) |  |  |  |  |  |  |  |  |   
Figure 12: DL DATA FRAME structure
Bit 0 of New IE Flags in DL DATA FRAME structure indicates if CLTD-R is
present (1) or not (0) in the octet following the _New IE Flags_ IE. Bits 1
through 6 of New IE Flags in DL DATA FRAME shall be set to 0.
Field length of _Spare Extension_ IE in DL DATA FRAME is 0-30 octets.
For the description of the fields see subclause 6.2.4.
There are as many TFI fields as number of DCH multiplexed in the same
transport bearer.
The DCHs in the frame structure are ordered from the lower DCH id (\'first
DCH\') to the higher DCH id (\'last DCH\').
The size and the number of TBs for each DCH are defined by the correspondent
TFI.
If the TB does not fill an integer number of bytes, then bit padding is used
as shown in the figure in order to have the octet aligned structure (ex: a TB
of 21 bits requires 3 bits of padding).
The _Payload CRC_ IE is optional, i.e. the whole 2 bytes field may or may not
be present in the frame structure (this is defined at the setup of the
transport bearer).
### 6.2.4 Coding of information elements in data frames
#### 6.2.4.1 Header CRC
**Description:** Result of the CRC applied to the remaining part of the
header, i.e. from bit 0 of the first byte (the _FT_ IE) to the bit 0
(included) of the last byte of the header (not including the _Header CRC Cont_
four bits), with one of the corresponding generator polynomials:\ G(D) =
D^7^+D^6^+D^2^+1 for the 7 bit header CRC,
G(D) = D^11^ + D^9^ + D^8^ + D^2^ + D + 1 for the 11 bit header CRC.
See subclause 7.2.
**Field Length:** 7 bits. 11 bits for UL Data Frame for E-DCH.
#### 6.2.4.2 Frame Type (FT)
**Description:** Describes if it is a control frame or a data frame.
**Value range:** {0=data, 1=control}.
**Field Length:** 1 bit.
#### 6.2.4.3 Connection Frame Number (CFN)
**Description:** Indicator as to which radio frame the first data was received
on uplink or shall be transmitted on downlink. See TS 25.401 [2]. For E-DCH
the Connection Frame Number shall indicate the radio frame when the HARQ
process correctly decoded the data.
For E-DCH apart from reordering purposes, CFN (and Subframe number) can be
used for dynamic delay measurements.
**Value range:** {0-255}.
**Field length:** 8 bits.
#### 6.2.4.4 Transport Format Indicator (TFI)
**Description:** TFI is the local number of the transport format used for the
transmission time interval. For information about what the transport format
includes see TS 25.302 [3].
**Value range:** {0-31}.
**Field length:** 5 bits.
#### 6.2.4.5 Quality Estimate (QE)
**Description:** The quality estimate is derived from the transport channel
BER [FDD - or physical channel BER.]
[FDD - If the DCH FP frame includes TB\'s for the DCH which was indicated as
\"selected\" with the _QE-selector_ IE in the control plane (TS 25.433 [4] TS
25.423 [6]), then the QE is the transport channel BER for the selected DCH. If
no transport channel BER is available the QE is the physical channel BER.]
[FDD - If the value of the _QE-Selector_ IE equals \"non-selected\" for all
DCHs in the DCH FP frame, then the QE is the physical channel BER.]
[TDD - If no transport channel BER is available, then the QE shall be set to
0. This is in particular the case when no transport blocks have been received.
The value of QE will be ignored by the RNC in this case.]
The quality estimate shall be set to the transport channel BER [FDD - or
physical channel BER] and be measured in the units TrCh_BER_LOG [FDD - and
PhCh_BER_LOG respectively] (see TS 25.133 [7] and TS 25.123 [8]). The quality
estimate is needed in order to select a transport block when all CRC
indications are showing bad (or good) frame. The UL outer loop power control
may also use the quality estimate.
**Value range:** {0-255}.
**Granularity:** 1.
**Field length:** 8 bits.
#### 6.2.4.6 Transport Block (TB)
**Description:** A block of data to be transmitted or received over the air
interface. The transport format indicated by the TFI describes the transport
block length and transport block set size. See TS 25.302 [3].
**Field length:** The length of the TB is specified by the TFI.
#### 6.2.4.7 CRC indicator (CRCI)
**Description:** Indicates the correctness/incorrectness of the TB CRC
received on the Uu interface. For every transport block included in the data
frame a CRCI bit will be present, irrespective of the presence of a TB CRC on
the Uu interface. If no CRC was present on the Uu for a certain TB, the
corresponding CRCI bit shall be set to \"0\".
**Value range:** {0=Correct, 1=Not Correct}.
**Field length:** 1 bit.
#### 6.2.4.8 Payload CRC
**Description:** CRC for the payload. This field is optional. It is the result
of the CRC applied to the remaining part of the payload, i.e. from the bit 7
of the first byte of the payload to the bit 0 of the byte of the payload
before the _Payload CRC_ IE, with the corresponding generator polynomial:\
G(D) = D^16^+D^15^+D^2^+1. See clause 7.2.
**Field length:** 16 bits.
#### 6.2.4.9 Spare Extension
**Description:** Indicates the location where new IEs can in the future be
added in a backward compatible way.
**Field length:** 0-32 octets.
#### 6.2.4.10 Subframe Number
Description: Indicates the subframe number in which the payload was received.
Apart from reordering purposes, Subframe number (and CFN) can be used for
dynamic delay measurements. [3.84 Mcps TDD, 7.68 Mcps TDD \-- This will always
be set to \"0\".][1.28 Mcps TDD -- This will be set to {0-1}.]
Value range: {0-4}
**Field length:** 3 bits.
#### 6.2.4.11 Number of HARQ Retransmissions, NHR
Description: Indicates the number of HARQ retransmissions used for successful
decoding of the payload, or in case of HARQ decoding failure the number of
HARQ retransmissions that were used at the time when the HARQ decoding failure
was detected. The value 13 indicates that the actual number of retransmissions
is inappropriate as input to the outer loop power control. The value 15
indicates that the Node B could not calculate the number of HARQ
retransmissions.
Value range: {0-15}
Value {12}: Used for indicating that the number of HARQ retransmissions was 12
or higher.
Value {13}: Used for indicating that the number of HARQ retransmissions shall
not be used by the outer loop power control
Values {14}: Reserved in this user plane revision. Shall be ignored by the
receiver.
Value {15}: Used for indicating that the number of HARQ retransmissions is
unknown.
**Field length:** 4 bits.
#### 6.2.4.12 Number of Subframes
Description: The _Number of Subframes_ field indicates how many subframes that
follows in the frame. [TDD -- This will always be set to \"1\".]
Note: A subframe has both a header portion and a payload portion in the frame.
Value range: {1-16}
The binary coding is derived from the value minus 1. E.g. value 1 is coded as
binary "0000" and value 16 is coded as binary "1111".
Values {11, 12, 13, 14, 15, 16}: Reserved in this user plane revision. Shall
be ignored by the receiver.
**Field length:** 4 bits.
#### 6.2.4.13 Number of MAC-es PDUs
Description: Indicates the number of MAC-es PDUs in the user data frame in the
payload part for the corresponding subframe number.
Value range: {0-15}
**Field length:** 4 bits.
#### 6.2.4.14 Data Description Indicator, DDI
Description: The _Data Description Indicator_ is mapped directly from the DDI
field received over the Uu.
**Field length:** 6 bits.
#### 6.2.4.15 Number of MAC-d PDUs, N
Description: The _Number of MAC-d PDUs_ is mapped directly from the N field
received over the Uu.
**Field length:** 6 bits.
#### 6.2.4.16 FSN -- Frame Sequence Number
**Description:** The 4-bit _Frame Sequence Number_ is incremented (modulo 16)
for each transmitted data frame. Each flow generates its own Frame Sequence.
[FDD -- In case E-DCH UL flow multiplexing mode is used for secondary E-DCH,
Node B shall set the value per carrier.]
**Value range:** {0..15}.
**Granularity:** 1.
**Field length:** 4 bits.
#### 6.2.4.17 Number of MAC-is PDUs
Description: Indicates the number of MAC-is PDUs in the user data frame in the
payload part for the corresponding subframe number.
Value range: {0-15}
Field length: 4 bits.
#### 6.2.4.18 User Buffer size
**Description:** Indicates the total size of the UL DATA FRAME TYPE 2 in
octets
**Value range:** {0-262 140}.
**Field length:** 18 bits.
#### 6.2.4.19 Number of MAC-is SDU in frame
**Description:** Total number of MAC-is SDUs in all MAC-is PDUs in the UL DATA
FRAME TYPE 2.
**Value range:** {0-4095}.
**Field length:** 12 bits.
#### 6.2.4.20 MAC-is PDU descriptor
**Description** : The _MAC-is PDU descriptor_ contains the Length (L), Logical
channel identifier (LCH-ID) and Flag (F) fields mapped directly from the
\"MAC-i Header n\" field (n > 0) received over the Uu (TS 25.321 [16]).
**Field length** : variable; length of _MAC-is PDU descriptor_ in octets = 2 *
number of MAC-is SDU contained in the corresponding MAC-is PDU as described in
TS 25.321 [16].
#### 6.2.4.21 UL Multiplexing Information (UL Mux Info)[FDD]
Description: Applicable to Multi Cell E-DCH operation in E-DCH UL flow
multiplexing mode. Indicates the frequency of the cell in which the MAC-i
frame was received - primary UL frequency or secondary UL frequency.
Primary UL frequency Value = \"0\"
**Secondary UL frequency Value =\"1\"**
**In** separate Iub transport bearer mode or non Multi Cell E-DCH operation
Value = \"0\" shall be used, ignored by the receiver
**Value range:** {0-3}.
**Values {2, 3}: Reserved in this user plane revision. Shall be ignored by the
receiver.**
Field length: 2 bits.
#### 6.2.4.22 UL CLTD Removal (CLTD-R)[FDD]
**Description** : Indicator of the removal of UL CLTD
**Value range** : {0= UL CLTD not relevant, 1= UL CLTD Removal}.
**Field length** : 1 bit.
## 6.3 Control frames
### 6.3.1 Introduction
Control frames are used to transport control information between SRNC and Node
B.
On the uplink, these frames are not combined -- all frames are passed
transparently from Node B to SRNC. On the downlink, the same control frame is
copied and sent transparently to all the Node Bs from the SRNC.
The structure of the control frames is shown in the figure 13.
* * *
7 6 5 4 3 2 1 0  
Frame CRC FT Header  
Control Frame Type  
Control Information Payload (variable length)
Control Information (cont)  
Spare Extension
* * *
Figure 13: General structure of the control frames
_Control Frame Type_ IE defines the type of the control frame.
The structure of the header and the payload of the control frames is defined
in the following subclauses.
### 6.3.2 Header structure of the control frames
#### 6.3.2.1 Frame CRC
**Description:** It is the result of the CRC applied to the remaining part of
the frame, i.e. from bit 0 of the first byte of the header (the _FT_ IE) to
bit 0 of the last byte of the payload, with the corresponding generator
polynomial:\ G(D) = D^7^+D^6^+D^2^+1. See subclause 7.2.
**Field Length:** 7 bits.
#### 6.3.2.2 Frame Type (FT)
**Description:** Describes if it is a control frame or a data frame.
**Value range:** {0=data, 1=control}.
**Field Length:** 1 bit.
#### 6.3.2.3 Control Frame Type
**Description:** Indicates the type of the control information (information
elements and length) contained in the payload.
**Value:** The values are defined in table 1.
Table 1
* * *
Control frame type Coding OUTER LOOP POWER CONTROL 0000 0001 TIMING ADJUSTMENT
0000 0010 DL SYNCHRONISATION 0000 0011 UL SYNCHRONISATION 0000 0100 Reserved
Value 0000 0101 DL NODE SYNCHRONISATION 0000 0110 UL NODE SYNCHRONISATION 0000
0111 RX TIMING DEVIATION 0000 1000 RADIO INTERFACE PARAMETER UPDATE 0000 1001
TIMING ADVANCE 0000 1010 TNL CONGESTION INDICATION 0000 1011
* * *
**Field length:** 8 bits.
The \"Reserved Value\" for the _Control Frame Type_ IE shall not be used by
the SRNC. A control frame whose _Control Frame Type_ IE is set to the
\"Reserved Value\" shall be ignored by the Node B.
### 6.3.3 Payload structure and information elements
#### 6.3.3.1 TIMING ADJUSTMENT
##### 6.3.3.1.1 Payload structure
Figure 14 shows the structure of the payload when control frame is used for
the timing adjustment.
* * *
7 6 5 4 3 2 1 0  
CFN  
ToA  
ToA (cont)  
Spare Extension 0-32 bytes
* * *
Figure 14: Structure of the payload for the TIMING ADJUSTMENT control frame
##### 6.3.3.1.2 CFN
**Description:** The CFN value is extracted from the corresponding DL DATA
FRAME.
**Value range:** As defined in subclause 6.2.4.3.
**Field length:** 8 bits.
##### 6.3.3.1.3 Time of Arrival (ToA)
**Description:** Time difference between the arrival of the DL frame with
respect to ToAWE (based on the CFN value in the frame).
**Value range:** {-1280, +1279.875 msec}.
**Granularity:** 125 μs.
**Field length:** 16 bits.
##### 6.3.3.1.4 Spare Extension
**Description:** Indicates the location where new IEs can in the future be
added in a backward compatible way.
**Field length:** 0-32 octets.
#### 6.3.3.2 DL SYNCHRONISATION
##### 6.3.3.2.1 Payload structure
Figure 15 shows the structure of the payload when control frame is used for
the user plane synchronisation.
* * *
7 6 5 4 3 2 1 0  
CFN  
Spare Extension 0-32 bytes
* * *
Figure 15: Structure of the payload for the DL SYNCHRONISATION control frame
##### 6.3.3.2.2 CFN
**Description:** The CFN value is the target CFN and used to calculate ToA.
**Value range:** As defined in subclause 6.2.4.3.
**Field length:** 8 bits.
##### 6.3.3.2.3 Spare Extension
The _Spare Extension_ IE is described in subclause 6.3.3.1.4.
#### 6.3.3.3 UL SYNCHRONISATION
##### 6.3.3.3.1 Payload structure
Figure 16 shows the structure of the payload when the control frame is used
for the user plane synchronisation.
* * *
7 6 5 4 3 2 1 0  
CFN  
ToA  
ToA (cont)  
Spare Extension 0-32bytes
* * *
Figure 16: Structure of the UL SYNCHRONISATION control frame
##### 6.3.3.3.2 CFN
**Description:** The CFN value is extracted from the corresponding DL
SYNCHRONISATION control frame.
**Value range:** As defined in subclause 6.2.4.3.
**Field length:** 8 bits.
##### 6.3.3.3.3 Time of Arrival (ToA)
The _ToA_ IE is described in subclause 6.3.3.1.3.
##### 6.3.3.3.4 Spare Extension
The _Spare Extension_ IE is described in subclause 6.3.3.1.4.
#### 6.3.3.4 OUTER LOOP POWER CONTROL [FDD, 1.28Mcps TDD]
##### 6.3.3.4.1 Payload structure
Figure 17 shows the structure of the payload when control frame is used for
the UL outer loop power control.
* * *
7 6 5 4 3 2 1 0  
UL SIR TARGET  
New IE fl 7(E) New IE fl 6 New IE fl 5 New IE fl 4 New IE fl 3 New IE fl 2 New
IE fl 1 New IE fl 0  
Spare bits 7-2 UL Mux Infor  
Spare Extension 0-30 bytes
* * *
Figure 17: Structure of the payload for OUTER LOOP PC control frame
Bit 0 of New IE Flags in OUTER LOOP POWER CONTROL indicates if the UL Mux Info
is present (1) or not present (0) in the byte following the _New IE Flags_ IE.
Bits 1 through 6 of New IE Flags in OUTER LOOP POWER CONTROL shall be set to
0.
##### 6.3.3.4.2 SIR Target
**Description:** Value (in dB) of the SIR target to be used by the UL inner
loop power control.
SIR Target is given in the unit UL_SIR_TARGET where:
UL_SIR_TARGET = 000 SIR Target = -8.2 dB
UL_SIR_TARGET = 001 SIR Target = -8.1 dB
UL_SIR_TARGET = 002 SIR Target = -8.0 dB
...
UL_SIR_TARGET = 254 SIR Target = 17.2 dB
UL_SIR_TARGET = 255 SIR Target = 17.3 dB
**Value range:** {-8.2...17.3 dB}.
**Granularity:** 0.1 dB.
**Field length:** 8 bits.
##### 6.3.3.4.3 Spare Extension
The _Spare Extension_ IE is described in subclause 6.3.3.1.4.
##### 6.3.3.4.4 UL Mux Info
The _UL Mux Info_ IE is described in subclause 6.2.4.21.
#### 6.3.3.5 DL NODE SYNCHRONISATION
##### 6.3.3.5.1 Payload structure
Figure 18 shows the structure of the payload for the DL NODE SYNCHRONISATION
control frame.
* * *
7 6 5 4 3 2 1 0  
T1  
T1 (cont)  
T1 (cont)  
Spare Extension 0-32 bytes
* * *
Figure 18: Structure of the payload for the DL NODE SYNCHRONISATION control
frame
##### 6.3.3.5.2 T1
**Description:** RNC specific frame number (RFN) that indicates the time when
RNC sends the frame through the SAP to the transport layer.
**Value range:** As defined in subclause 6.3.3.6.2.
**Field length:** 24 bits.
##### 6.3.3.5.3 Spare Extension
The _Spare Extension_ IE is described in subclause 6.3.3.1.4.
#### 6.3.3.6 UL NODE SYNCHRONISATION
##### 6.3.3.6.1 Payload structure
The payload of the UL NODE SYNCHRONISATION control frames is shown in figure
19.
* * *
7 6 5 4 3 2 1 0  
T1  
T1 (cont)  
T1 (cont)  
T2  
T2 (cont)  
T2 (cont)  
T3  
T3 (cont)  
T3 (cont)  
Spare Extension 0-32 bytes
* * *
Figure 19: Structure of the payload for UL NODE SYNCHRONISATION control frame
##### 6.3.3.6.2 T1
**Description:** T1 timer is extracted from the correspondent DL NODE
SYNCHRONISATION control frame.
**Value range:** {0-40959.875 ms}.
**Granularity:** 0.125 ms.
**Field length:** 24 bits.
##### 6.3.3.6.3 T2
**Description:** Node B specific frame number (BFN) that indicates the time
when Node B received the correspondent DL NODE SYNCHRONISATION control frame
through the SAP from the transport layer.
**Value range:** {0-40959.875 ms}.
**Granularity:** 0.125 ms.
**Field length:** 24 bits.
##### 6.3.3.6.4 T3
**Description:** Node B specific frame number (BFN) that indicates the time
when Node B sends the frame through the SAP to the transport layer.
**Value range:** {0-40959.875 ms}.
**Granularity:** 0.125 ms.
**Field length:** 24 bits.
##### 6.3.3.6.5 Spare Extension
The _Spare Extension_ IE is described in subclause 6.3.3.1.4.
#### 6.3.3.7 RX TIMING DEVIATION [3.84 Mcps and 7.68Mcps TDD]
##### 6.3.3.7.1 Payload structure
Figure 20 shows the structure of the payload when the control frame is used
for the Rx timing deviation.
+-------+-------+-------+-------+-------+-------+-------+-------+---+ | 7 | 6 | 5 | 4 | 3 | 2 | 1 | 0 | | +-------+-------+-------+-------+-------+-------+-------+-------+---+ | CFN | | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+---+ | Rx | | | | | | | | | | T | | | | | | | | | | iming | | | | | | | | | | Devi | | | | | | | | | | ation | | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+---+ | New | New | New | New | New | New | New | New | | | IE fl | IE fl | IE fl | IE fl | IE fl | IE fl | IE fl | IE fl | | | 7(E) | 6 | 5 | 4 | 3 | 2 | 1 | 0 | | +-------+-------+-------+-------+-------+-------+-------+-------+---+ | Spare | E- | Rx | | | | | | | | bits | RUCCH | T | | | | | | | | 7-2 | flag | iming | | | | | | | | for | | Devi | | | | | | | | 3.8 | | ation | | | | | | | | 4Mcps | | ( | | | | | | | | | | cont) | | | | | | | | Spare | | | | | | | | | | bits | | | | | | | | | | 7-3 | | | | | | | | | | for | | | | | | | | | | 7.6 | | | | | | | | | | 8Mcps | | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+---+ | Spare | 0-30 | | | | | | | | | Exte | bytes | | | | | | | | | nsion | | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+---+
Figure 20: Structure of the payload for RX TIMING DEVIATION control frame
Bit 0 of New IE Flags in RX TIMING DEVIATION CONTROL FRAME indicates if the
extended bits of the Rx Timing Deviation are present (1) or not present (0) in
the byte (bit 0 for 3.84 Mcps TDD, bits 0 and 1 for 7.68 Mcps TDD) following
the _New IE Flags_ IE.
Bit 1 of New IE Flags in RX TIMING DEVIATION CONTROL FRAME indicates if the
E-RUCCH Flag is present (1) or not present (0) in the byte (bit 1 for 3.84
Mcps TDD, bit2 for 7.68 Mcps TDD) following the _New IE Flags_ IE.
Bits 2 through 6 of New IE Flags in RX TIMING DEVIATION CONTROL FRAME shall be
set to 0.
##### 6.3.3.7.2 Rx Timing Deviation [3.84 Mcps TDD]
**Description:** Measured Rx Timing deviation as a basis for timing advance.
**Value range:** {-1024, ..,+1023 chips}.
{N * 4 -- 256}chips ≤ RxTiming Deviation \ With N = 128, 129, ...,319
{N*4 - 1024} chips ≤ Rx Timing Deviation \ With N = 320, 321, ...,511
**Granularity:** 4 chips.
**Field length:** 9 bits. The least significant 8 bits are contained in the RX
timing deviation field and the most significant bit is contained in the RX
timing deviation (continuation) field.
##### 6.3.3.7.2A Rx Timing Deviation [7.68 Mcps TDD]
**Description:** Measured Rx Timing deviation as a basis for timing advance.
**Value range:** {-2056, ..., +2055} chips
{N*4 - 2056} chips ≤ RxTiming Deviation \ With N = 0, 1, ..., 1027
**Granularity:** 4 chips.
**Field length:** 10 bits. The least significant 8 bits are contained in the
RX timing deviation field and the most significant 2 bits are contained in the
RX timing deviation (continuation) field.
##### 6.3.3.7.2B E-RUCCH Flag
**Description:** Indicates whether the timing deviation is derived from a
conventional E-RUCCH (carrying Scheduling Information) reception or a TA
Request reception.
**Value range:** {0 conventional E-RUCCH reception, 1 TA Request reception}
**Field length:** 1 bit.
##### 6.3.3.7.3 Spare Extension
The _Spare Extension_ IE is described in subclause 6.3.3.1.4.
Field length of _Spare Extension_ IE in RX TIMING DEVIATION CONTROL FRAME is
0-30 octets.
##### 6.3.3.7.4 CFN
**Description:** The CFN value in this control frame is the CFN when the RX
timing deviation was measured.
**Value range:** As defined in subclause 6.2.4.3.
**Field length:** 8 bits.
##### 6.3.3.7.5 New IE Flags
**Description:** The _New IE Flags_ IE is only present if at least one new IE
is present. The _New IE Flags_ IE contains flags indicating which new IEs that
are present following the _New IE Flags_ IE. The last bit position of the _New
IE Flags_ IE is used as the Extension Flag to allow the extension of the _New
IE Flags_ IE in the future. Extension octets of the _New IE Flags_ IE shall
follow directly after the first octet of the _New IE Flags_ IE. When an
extension octet of the _New IE Flags_ IE is present, then all previous
extension octets of the _New IE Flags_ IE and the _New IE Flags_ IE shall also
be present, even if they have all their flag bits indicating no presence of
their respective new IEs.
**Value range:**
Bit 0-6 of each octet: Indicates if a new IE is present (1) or not present (0)
in the bytes following the _New IE Flags_ IE. The meaning of each bit is
explained in the corresponding DATA FRAME subclause;
Bit 7 of each octet: Indicates if an extension octet of the _New IE Flags_ IE
follows (1) or not (0).
**Field length:** 1 -- 31 octets.
#### 6.3.3.8 DSCH TFCI SIGNALLING [FDD]
##### 6.3.3.8.1 Payload structure
Void.
##### 6.3.3.8.2 TFCI (field 2)
Void.
##### 6.3.3.8.3 Spare Extension
Void.
##### 6.3.3.8.4 CFN
Void.
#### 6.3.3.9 RADIO INTERFACE PARAMETER UPDATE [FDD]
##### 6.3.3.9.1 Payload structure
The figure 22 shows the structure of the payload when the control frame is
used for signalling radio interface parameter updates.
+--------------+--------------+--------------+----+----+----+---+---+---+ | 7 | 6 | 5 | 4 | 3 | 2 | 1 | 0 | | +--------------+--------------+--------------+----+----+----+---+---+---+ | Radio | | | | | | | | | | Interface | | | | | | | | | | Parameter | | | | | | | | | | Update Flags | | | | | | | | | +--------------+--------------+--------------+----+----+----+---+---+---+ | 15 | 14 | 13 | 12 | 11 | 10 | 9 | 8 | | +--------------+--------------+--------------+----+----+----+---+---+---+ | 7 | 6 | 5 | 4 | 3 | 2 | 1 | 0 | | +--------------+--------------+--------------+----+----+----+---+---+---+ | CRN | | | | | | | | | +--------------+--------------+--------------+----+----+----+---+---+---+ | Spare bits | DPC Mode | TPC PO | | | | | | | | | | | | | | | | | | 7-6 | | | | | | | | | +--------------+--------------+--------------+----+----+----+---+---+---+ | Multiple RL | Multiple RL | Reserved | | | | | | | | sets | Sets | Bits | | | | | | | | Indicator | Indicator on | | | | | | | | | | the | | | | | | | | | | secondary | | | | | | | | | | uplink | | | | | | | | | | frequency | | | | | | | | +--------------+--------------+--------------+----+----+----+---+---+---+ | Spare | Reserved | | | | | | | | | | Bits | | | | | | | | +--------------+--------------+--------------+----+----+----+---+---+---+ | Spare | MAX\ | | | | | | | | | | _UE_TX_POW | | | | | | | | +--------------+--------------+--------------+----+----+----+---+---+---+ | Spare | 0-29 bytes | | | | | | | | | Extension | | | | | | | | | +--------------+--------------+--------------+----+----+----+---+---+---+
Figure 22: Structure of the payload for the RADIO INTERFACE PARAMETER UPDATE
control frame
##### 6.3.3.9.2 Radio Interface Parameter Update flags
**Description:** Contains flags indicating which information is valid in this
control frame.
**Value range:**
Bit 0: Indicates if the 3^rd^ byte of the control frame payload contains a
valid CFN (1) or not (0);
Bit 1: Indicates if the 4^th^ byte (bits 0-4) of the control frame payload
contains a valid TPC PO (1) or not (0);
Bit 2: Indicates if the 4^th^ byte (bit 5) of the control frame payload
contains a valid DPC mode (1) or not (0);
Bit 3: Reserved bit;
Bit 4: Reserved bit;
Bit 5: Indicates if the 5th byte (bit 7) of the control frame payload contains
a valid Multiple RL Sets Indicator (1) or not (0);
Bit 6: Indicates if the 7th byte (bits 0-6) of the control frame payload
contains a valid Maximum UE TX Power (1) or not (0);
Bit 7: Indicates if the 5th byte (bit 6) of the control frame payload contains
a valid Multiple RL Sets Indicator on the secondary uplink frequency (1) or
not (0);
Bit 8-15: Set to (0): reserved in this user plane revision. Any indicated
flags shall be ignored by the receiver.
Reserved bits shall be set to 0 by the SRNC and ignored by the Node B.
**Field length:** 16 bits.
##### 6.3.3.9.3 TPC Power Offset (TPC PO)
**Description:** Power offset to be applied in the DL between the DPDCH
information and the TPC bits on the DPCCH as specified in the clause 5.2 of TS
25.214 [12].
**Value range:** {0-7.75 dB}.
**Granularity:** 0.25 dB.
**Field length:** 5 bits.
##### 6.3.3.9.4 Spare Extension
The _Spare Extension_ IE is described in subclause 6.3.3.1.4.
##### 6.3.3.9.4A CFN
**Description:** The CFN value indicates when the presented parameters shall
be applied.
**Value range:** As defined in subclause 6.2.4.3.
**Field length:** 8 bits.
##### 6.3.3.9.5 DPC Mode
**Description:** DPC mode to be applied in the UL.
**Value range:** {0,1}.
The DPC mode shall be applied as specified in TS 25.214 [12].
**Field length:** 1 bit.
##### 6.3.3.9.6 TFCI Power Offset (TFCI PO)
Void.
##### 6.3.3.9.7 TFCI Power Offset for primary cell (TFCI PO_primary)
Void.
##### 6.3.3.9.8 Multiple RL Sets Indicator
**Description:** Multiple RL Sets Indicator indicates whether the UE has
several RL Sets or not.
**Value range:** {0=UE has only one RL Set, 1=UE has several RL Sets}.
**Field length:** 1 bit.
##### 6.3.3.9.9 Maximum UE TX Power
**Description:** The Maximum UE TX Power is the lower of the maximum output
power of the UE power class, defined in ref TS 25.101 [14], and the Maximum
Allowed UL TX Power that is also sent to the UE, see ref TS 25.331 [15].
Maximum UE TX Power is given in the unit MAX_UE_TX_POW where:
MAX_UE_TX_POW = 00 Maximum UE TX Power = -55 dBm
MAX_UE_TX_POW = 01 Maximum UE TX Power = -54 dBm
MAX_UE_TX_POW = 02 Maximum UE TX Power = -53 dBm
...
MAX_UE_TX_POW = 87 Maximum UE TX Power = 32 dBm
MAX_UE_TX_POW = 88 Maximum UE TX Power = 33 dBm
**Value range:** {-55..33 dBm}.
**Granularity: 1 dBm**
**Field length:** 7 bit
##### 6.3.3.9.10 Multiple RL Sets Indicator on the secondary uplink frequency
**Description:** Multiple RL Sets Indicator indicates whether the UE has
several RL Sets or not on the secondary uplink frequency.
**Value range:** {0=UE has only one RL Set, 1=UE has several RL Sets}.
**Field length:** 1 bit.
#### 6.3.3.10 TIMING ADVANCE [3.84Mcps and 7.68 Mcps TDD]
##### 6.3.3.10.1 Payload structure
Figure 23 shows the structure of the payload when the control frame is used
for timing advance.
* * *
7 6 5 4 3 2 1 0  
CFN  
TA  
New IE fl 7(E) New IE fl 6 New IE fl 5 New IE fl 4 New IE fl 3 New IE fl 2 New
IE fl 1 New IE fl 0  
Spare bits 7-1 TA (cont)  
Spare Extension 0-30 bytes
* * *
Figure 23a: Structure of the TIMING ADVANCE control frame for 7.68Mcps TDD
* * *
7 6 5 4 3 2 1 0  
CFN  
TA  
Spare Extension 0-32 bytes
* * *
Figure 23b: Structure of the TIMING ADVANCE control frame for 3.84Mcps TDD
[7.68Mcps TDD - Bit 0 of New IE Flags in TIMING ADVANCE CONTROL FRAME
indicates if the extended bits of the TA are present (1) or not present (0) in
the byte following the _New IE Flags_ IE. Bits 1 through 6 of New IE Flags in
TIMING ADVANCE CONTROL FRAME shall be set to 0.]
##### 6.3.3.10.2 CFN
**Description:** The CFN value in this control frame is the frame that the
timing advance will occur.
**Value range:** As defined in subclause 6.2.4.3.
**Field length:** 8 bits.
##### 6.3.3.10.3 TA [3.84 Mcps]
**Description:** UE applied UL timing advance adjustment.
**Value range:** {0-1020 chips}.
**Granularity:** 4 chips.
**Field length:** 8 bits.
##### 6.3.3.10.3A TA [7.68 Mcps]
**Description:** UE applied UL timing advance adjustment.
**Value range:** {0-2044 chips}.
**Granularity:** 4 chips.
**Field length:** 9 bits.
##### 6.3.3.10.4 Spare Extension
The _Spare Extension_ IE is described in subclause 6.3.3.1.4.
[7.68Mcps TDD - Field length of _Spare Extension_ IE in TIMING ADVANCE CONTROL
FRAME is 0-30 octets].
##### 6.3.3.10.5 New IE Flags [7.68Mcps TDD]
The _New IE Flags_ IE is described in subclause 6.3.3.7.5.
#### 6.3.3.11 TNL CONGESTION INDICATION
##### 6.3.3.11.1 Payload structure
Figure 24 shows the structure of the payload when the control frame is used
for TNL CONGESTION INDICATION.
* * *
7 6 5 4 3 2 1 0  
Spare bits 7-2 Congestion Status  
Spare Extension 0-32 bytes
* * *
Figure 24: Structure of the TNL CONGESTION INDICATION control frame
##### 6.3.3.11.2 Congestion Status
**Description:** The Congestion Status indicates whether there is transport
network congestion or not.
**Value range:**
0 No TNL congestion
> 1 Reserved for future use.
>
> 2 TNL Congestion -- detected by delay build-up
>
> 3 TNL Congestion -- detected by frame loss
**Field length:** 2 bits.
##### 6.3.3.11.3 Spare Extension
The _Spare Extension_ IE is described in subclause 6.3.3.1.4.
# 7 Handling of Unknown, Unforeseen and Erroneous Protocol Data
## 7.1 General
A frame protocol frame with illegal or not comprehended parameter value shall
be ignored. Frame protocol frames sent with a CFN in which the radio resources
assigned to the associated Iub data port are not available, shall be ignored.
Frame protocol data frames with CFN value that does not fulfil the requirement
set in clause [FDD - 4.2.14 of TS 25.212 [9]] [TDD - 4.2.12 of TS 25.222
[10]], shall be ignored.
## 7.2 Error detection
Error detection is provided on frames through a Cyclic Redundancy Check. The
length of the CRC for the payload is 16 bits, for the data frame header 7 or
11 bits and for control frames it is 7 bits.
### 7.2.1 CRC Calculation
The parity bits are generated by one of the following cyclic generator
polynomials:
g~CRC16~(D) = D^16^ + D^15^ + D^2^ + 1
g~CRC11~(D) = D^11^ + D^9^ + D^8^ + D^2^ + D + 1
g~CRC7~(D) = D^7^ + D^6^ + D^2^ + 1
Denote the bits in a frame by $a_{1},a_{2},a_{3},\ldots,a_{A_{i}}$, and the
parity bits by $p_{1},p_{2},p_{3},\ldots,p_{L_{i}}$. _A~i~_ is the length of a
protected data and L _~i~_ is 16, 11 or 7 depending on the CRC length.
The encoding is performed in a systematic form, which means that in GF(2), the
polynomial for the payload
yields a remainder equal to 0 when divided by g~CRC16~(D), the polynomial for
the data frame header with 11 bit CRC
yields a reminder equal to 0 when divided by g~CRC11~(D) and the polynomial
for the data frame header with 7 bit CRC and control frame
yields a remainder equal to 0 when divided by g~CRC7~(D). If $A_{i} = 0$,
$p_{1} = p_{2} = p_{3} = \cdots = p_{L_{i}} = 0$.
#### 7.2.1.1 Relation between input and output of the Cyclic Redundancy Check
The bits after CRC attachment are denoted by
$b_{1},b_{2},b_{3},\ldots,b_{B_{i}}$, where _B~i~_ =_A~i~_ +_L~i~_.
The parity bits for the payload are attached at the end of the frame:
$b_{k} = a_{k}$ _k_ = 1, 2, 3, ..., _A~i~_
$b_{k} = p_{(k - A_{i})}$ _k_ = _A~i~_ \+ 1, _A~i~_ \+ 2, _A~i~_ \+ 3, ...,
_A~i~_ \+ _L~I~_
The parity bits for the frame header and the control frames are attached at
the beginning of the frame:
$b_{k} = p_{k}$ _k_ = 1, 2, 3, ..., _L~i~_
$b_{k} = a_{(k - \text{Li})}$ _k_ = _L~i~_ \+ 1, _L~i~_ \+ 2, _L~i~_ \+ 3,
..., _L~I~ + A~i~_
#