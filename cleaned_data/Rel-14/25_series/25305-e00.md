# Foreword
This Technical Specification (TS) has been produced by the 3^rd^ Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document specifies the stage 2 of the UE Positioning function of
UTRAN, which provides the mechanisms to support the calculation of the
geographical position of a UE. UE position knowledge can be used for example
in support of Radio Resource Management functions, location-based services for
operators, subscribers and third party service providers. The purpose of this
stage 2 specification is to define the UTRAN UE Positioning architecture,
functional entities and operations to support positioning methods. This
description is confined to the UTRAN Access Stratum. It does not define nor
describe how the results of the UE position calculation can be utilised in the
Core Network (e.g. LCS) or in UTRAN (e.g. RRM).
UE Positioning may be considered as a network provided enabling technology
consisting of standardised service capabilities, which enable the provision of
location applications. The application(s) may be service provider specific.
The description of the numerous and varied possible location applications
which are enabled by this technology are outside the scope of the present
document. However, clarifying examples of how the functionality being
described may be used to provide specific location services may be included.
This stage 2 specification covers the UTRAN positioning methods, state
descriptions, and message flows to support UE Positioning.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
  * References are either specific (identified by date of publication, > edition number, version number, etc.) or nonâ€‘specific.
  * For a specific reference, subsequent revisions do not apply.
  * For a non-specific reference, the latest version applies. In the > case of a reference to a 3GPP document (including a GSM document), > a non-specific reference implicitly refers to the latest version > of that document _in the same Release as the present document_.
## 2.1 Normative references
[1] Void.
[2] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[3] Void.
[4] 3GPP TS 23.271: \"Location Services (LCS); (Functional description) -
Stage 2\".
[5] 3GPP TS 22.071: \"Location Services (LCS); Service description, Stage 1\".
[6] 3GPP TS 22.100: \"UMTS phase 1\".
[7] 3GPP TS 22.101: \"Services aspects; Service principles\".
[8] 3GPP TS 22.105: \"Services and Service Capabilities\".
[9] 3GPP TS 22.115: \"Services aspects; Charging and Billing\".
[10] 3GPP TS 22.121: \"Services aspects; The Virtual Home Environment; Stage
1\".
[11] 3GPP TS 23.032: \"Universal Geographical Area Description (GAD)\".
[12] 3GPP TS 23.110: \"UMTS Access Stratum; Services and Functions\".
[13] 3GPP TS 23.171: \"Functional stage 2 description of location services in
UMTS\".
[14] 3GPP TS 25.214: \"Physical layer procedures (FDD)\"
[15] 3GPP TS 25.215: \"Physical layer -- Measurements (FDD)\".
[16] 3GPP TS 25.225: \"Physical layer -- Measurements (TDD)\".
[17] 3GPP TS 25.306: \"UE Radio Access Capabilities\".
[18] 3GPP TS 25.331: \"Radio Resource Control (RRC); protocol specification\".
[19] 3GPP TS 25.413: \"UTRAN Iu interface RANAP signalling\".
[20] 3GPP TS 25.423: \"UTRAN Iur interface RNSAP signalling\".
[21] 3GPP TS 25.430: \"UTRAN Iub interface: General aspects and Principles\".
[22] 3GPP TS 25.433: \"UTRAN Iub interface NBAP signalling\".
[23] ICD-GPS-200: \"Navstar GPS Space Segment/Navigation User Interfaces\".
[24] RTCM-SC104: \"RTCM Recommended Standards for Differential GNSS Service\"
(v.2.2.)
[25] 3GPP TS 24.008: \"Mobile radio interface layer 3 specification, Core
Network Protocols - Stage 3\".
[26] 3GPP TS 25.224: \"Physical layer procedures (TDD)\".
[27] 3GPP TS 25.453: \"UTRAN Iupc interface PCAP signalling\".
[28] 3GPP TS 25.412: \"Iu interface signalling transport\".
[31] BDS-SIS-ICD-2.0: \"BeiDou Navigation Satellite System Signal In Space
Interface Control Document Open Service Signal (Version 2.0), December 2013\".
[32] IEEE 802.11 Wireless LAN Medium Access Control (MAC) and Physical Layer
(PHY) Specifications.
[33] Bluetooth Special Interest Group: \"Bluetooth Core Specification v4.2\",
December 2014.
[34] ATIS-0500027: "Recommendations for Establishing Wide Scale Indoor
Location Performance," May 2015.
## 2.2 Informative references
[29] Third generation (3G) mobile communication system; Technical study report
on the location services and technologies, ARIB ST9 December 1998.
[30] The North American Interest Group of the GSM MoU ASSOCIATION: Location
Based Services, Service Requirements Document of the Services Working Group.
# 3 Definitions and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
[7] and some of the terms and definitions in annex A apply.
## 3.2 Abbreviations
For the purposes of the present document, the following abbreviations apply.
3G-MSC 3^rd^ Generation MSC
3G-SGSN 3^rd^ Generation SGSN
> A-GNSS Assisted Global Navigation Satellite System
A-GPS Assisted Global Positioning Systems
ARIB Association of Radio Industries and Business
BDS BeiDou Navigation Satellite System
CAMEL Customised Application For Mobile Network Enhanced Logic
CN Core Network
CRNC Controlling RNC
DGNSS Differential Global Navigation Satellite System
DGPS Differential Global Positioning Systems
DL Downlink
DRNC Drift RNC
EGNOS European Geostationary Navigation Overlay Service
E-OTD Enhanced Observed Time Difference
GAGAN GPS Aided Geo Augmented Navigation
GDOP Geometric Dilution of Precision
GLONASS GLObal\'naya NAvigatsionnaya Sputnikovaya Sistema (Engl.: Global
Navigation Satellite System)
GMLC Gateway MLC
GNSS Global Navigation Satellite System
GPRS General Packet Radio System
GPS Global Positioning System
HLR Home Location Register
HOW HandOver Word
IM Integrity Monitor
IPDL Idle Period Downlink
LBS Location Based Services
LCCF Location Client Control Function
LCF Location Client Function
LCS LoCation Services
LIRF Location Information Relay Function
LMU Location Measurement Unit
LSADF Location System Assistance Data Function
LSCF Location System Control Function
LSCFS Location System Control Function in SAS
LSOF Location System Operation Function
MBS Metropolitan Beacon System
MLC Mobile Location Centre
MMS Multimedia Messaging Service
MSAS Multi-functional Satellite Augmentation System
MSC Mobile services Switching Centre
NAS Non Access Stratum
OTDOA Observed Time Difference Of Arrival
PCAP Positioning Calculation Application Part
PCF Position Calculation Function
PLMN Public Land Mobile Network
PRC Pseudo-Range Correction
PRCF Positioning Radio Co-ordination Function
PRComF Positioning Radio Communication Function
PRRC Pseudo-Range Rate Correction
PRRM Positioning Radio Resource Management
PSMF Positioning Signal Measurement Function
QoS Quality of Service
QZSS Quasi-Zenith Satellite System
RAN Radio Access Network
RANAP Radio Access Network Application Part
RNC Radio Network Controller
RRM Radio Resource Management
RTD Real Time Difference
RTT Round Trip Time
SAI Service Area Identifier
SAS Stand-Alone SMLC
SBAS Satellite Based Augmentation System
SGSN Serving GPRS Support Node
SIM Subscriber Identity Module
SMS Short Message Service
SRNC Serving RNC
SSDT Site Selection Diversity Transmit
TBS Terrestrial Beacon System
TOA Time Of Arrival
TOW Time Of Week
U-..... UMTS-(LCS functional block)
U-LCF internal UTRAN Location Client Function
U-LSCF UTRAN Location System Control Function
U-LSOF UTRAN Location System Operations Function
U-LIRF UTRAN Location Information Relay Function
U-LSCFS UTRAN Location System Control Function in SAS
U-LSADF UTRAN Location System Assistance Data Function
U-PRCF UTRAN Position Radio Co-ordination Function
U-PCF UTRAN Position Calculation Function
U-PSMF UTRAN Position Signal Measurement Function
U-PRRM UTRAN Position Radio Resource Management
U-PRComF UTRAN Position Related Communication Function
UDRE User Differential Range Error
UE User Equipment
UL Uplink
UMTS Universal Mobile Telecommunication System
USIM User Service Identity Module
UTC Universal Time Coordinates
U-TDOA Uplink -- Time Difference Of Arrival
UTRAN Universal Terrestrial Radio Access Network
WAAS Wide Area Augmentation System
WCDMA Wideband Code Division Multiple Access
WLAN Wireless Local Area Network
# 4 Main concepts and requirements
The stage 1 LCS description providing an overall service description and the
core requirements for the LCS at the service level is given in [5]. The stage
2 LCS description providing a system functional model for the whole system,
the LCS system architecture, state descriptions and message flows are
described in [13].
By measuring radio signals the capability to determine the geographic position
and velocity of the UE shall be provided. The position information may be
requested by and reported to a client (application) associated with the UE, or
by a client within or attached to the CN. The position information may also be
utilised internally by UTRAN, for example, for location-assisted handover or
to support other features such as home location billing. The position
information shall be reported in standard formats, such as those for cell
based or geographical co-ordinates, together with the estimated errors
(uncertainty) of the position and velocity of the UE and, if available, the
positioning method (or the list of the methods) used to obtain the position
estimate. Restrictions on the geographic shape encoded within the \'position
information\' parameter may exist for certain LCS client types. The SRNC shall
comply with any shape restrictions defined in GSM/UMTS and, in a particular
country, with any shape restrictions defined for a specific LCS client type in
relevant national standards. For example, in the US, national interim standard
TIA/EIA/IS-J-STD-036 restricts the geographic shape for an emergency services
LCS client to minimally either an \"ellipsoid point\" or an \"ellipsoid point
with uncertainty circle and confidence\" as defined in [11].
It shall be possible for the majority of the UE (active or inactive) within a
network to use the feature without compromising the radio transmission or
signalling capabilities of the UTRAN.
The uncertainty of the position measurement shall be network implementation
dependent at the choice of the network operator. The uncertainty may vary
between networks as well as from one area within a network to another. The
uncertainty may be hundreds of metres in some areas and only a few metres in
others. In the event that the position measurement is also a UE-assisted
process, the uncertainty may also depend on the capabilities of the UE. In
some jurisdictions, there is a regulatory requirement for location service
accuracy that is part of an emergency service. Further details of the accuracy
requirements can be found in [5].
The uncertainty of the position information is dependent on the method used,
the position of the UE within the coverage area and the activity of the UE.
Several design options of the UTRAN system (e.g. size of cell, adaptive
antenna technique, path loss estimation, timing accuracy, Node B surveys)
shall allow the network operator to choose a suitable and cost effective UE
Positioning method for their market.
There are many different possible uses for the positioning information. The
positioning functions may be used internally by the UTRAN, by value-added
network services, by the UE itself or through the network, and by \"third
party\" services. The feature may also be used by an emergency service (which
may be mandated or \"value-added\"), but the location service is not
exclusively for emergencies.
The UTRAN is a new radio system design without a pre-existing deployment of UE
operating according to the radio interface. This freedom from legacy equipment
enables the location service feature design to make use of appropriate
techniques to provide the most accurate results. The technique must also be a
cost-effective total solution, must allow evolution to meet evolving service
requirements and be able to take advantage of advances in technology over the
lifetime of UTRAN deployments.
## 4.1 Assumptions
As a basis for the operation of UE Positioning in UTRAN the following
assumptions apply:
\- both TDD and FDD will be supported;
> \- the provision of the UE Positioning function in UTRAN is optional through
> support of the specified method(s) in Node B, the SAS, and the RNC;
\- UE Positioning is applicable to any target UE whether or not the UE
supports LCS, but with restrictions on use of certain positioning method
depending on UE capability as defined in [17];
\- The SMLC may be either a stand-alone network element (SAS) or an internal
function of the RNC;
\- UE Positioning information is transported between RNCs via the Iur
interface independent of whether the SMLC is a stand-alone network element
(SAS) or an internal function of the RNC;
\- the positioning information may be used for internal system operations to
improve system performance;
\- different types of LMU are defined, e.g. a standalone LMU and/or LMU
integrated in Node B;
\- the UE Positioning architecture and functions shall include the option to
accommodate several techniques of measurement and processing to ensure
evolution to follow changing service requirements and to take advantage of
advancing technology;
\- the RNC manages the overall coordination and scheduling of resources
required to perform positioning of a UE. It may also calculate the final
position and velocity estimate and accuracy.
## 4.2 UE Positioning Methods
The UTRAN may utilise one or more positioning methods in order to determine
the position of an UE.
Positioning the UE involves two main steps:
\- signal measurements; and
\- Position estimate and optional velocity computation based on the
measurements.
The signal measurements may be made by the UE, the Node B or an LMU. The basic
signals measured are typically the UTRA radio transmissions, however, some
methods may make use of other transmissions such as general radio navigation
signals.
The positioning function should not be limited to a single method or
measurement. That is, it should be capable of utilising other standard methods
and measurements, as are available and appropriate, to meet the required
service needs of the location service client. This additional information
could consist of readily available UTRAN measurements such as RTT in FDD or Rx
Timing deviation measurement and knowledge of the UE timing advance, in TDD.
The position estimate computation may be made by the UE or by the UTRAN (i.e.
SRNC or SAS).
## 4.3 Standard UE Positioning Methods
The standard positioning methods supported within UTRAN are:
\- cell ID based method;
\- OTDOA method that may be assisted by network configurable idle periods;
\- network-assisted GNSS methods;
\- U-TDOA;
\- Barometric Pressure method;
\- WLAN method;
\- Bluetooth method;
\- Terrestrial Beacon System methods.
NOTE: Barometric Pressure method, WLAN method, Bluetooth method, and
Terrestrial Beacon System methods can only be configured using RRC signaling
together with OTDOA or GPS positioning methods.
### 4.3.1 Cell ID and Enhanced Cell ID Based Methods
In the cell ID based (i.e. cell coverage) method, the position of an UE is
estimated with the knowledge of its serving Node B. The information about the
serving Node B and cell may be obtained by paging, locating area update, cell
update, URA update, or routing area update.
The cell coverage based positioning information can be indicated as the Cell
Identity of the used cell, the Service Area Identity or as the geographical
co-ordinates of a position related to the serving cell. The position
information shall include a QoS estimate (e.g. regarding achieved accuracy)
and, if available, the positioning method (or the list of the methods) used to
obtain the position estimate.
When geographical co-ordinates are used as the position information, the
estimated position of the UE can be a fixed geographical position within the
serving cell (e.g. position of the serving Node B), the geographical centre of
the serving cell coverage area, or some other fixed position within the cell
coverage area. Enhanced Cell ID methods use additional UE and/or UTRAN radio
resource related measurements.
The operation of the cell ID and Enhanced Cell ID based positioning methods
are described in clause 8.
### 4.3.2 OTDOA-IPDL Method with network configurable idle periods
The OTDOA-IPDL method involves measurements made by the UE and LMU of the
UTRAN frame timing (e.g. SFN-SFN observed time difference). These measures are
then sent to the SRNC and, in networks which include an SAS, may be forwarded
to the SAS. Depending on the configuration of the network, the position of the
UE is calculated in the SRNC or in the SAS.
The simplest case of OTDOA-IPDL is without idle periods. In this case the
method can be referred to as simply OTDOA.
The Node B may provide idle periods in the downlink, in order to potentially
improve the hearability of neighbouring Node Bs. The support of these idle
periods in the UE is optional. Support of idle periods in the UE means that
its OTDOA performance will improve when idle periods are available.
Alternatively, the UE may perform the calculation of the position using
measurements and assistance data.
The detailed description of the OTDOA-IPDL positioning method and its
operation are described in clause 9.
### 4.3.3 Network-assisted GNSS Methods
These methods make use of UEs, which are equipped with radio receivers capable
of receiving GNSS signals.
Examples of GNSS include GPS, Modernized GPS, Galileo, GLONASS, Satellite
Based Augmentation Systems (SBAS), Quasi Zenith Satellite System (QZSS), and
BeiDou Navigation Satellite System (BDS).
In this concept, different GNSS (e.g. GPS, Galileo, etc.) can be used
separately or in combination to perform the location of a UE.
The operation of the network-assisted GNSS methods is described in clause 13.
### 4.3.4 U-TDOA Method
The U-TDOA positioning method is based on network measurements of the Time Of
Arrival (TOA) of a known signal sent from the UE and received at four or more
LMUs. The method requires LMUs in the geographic vicinity of the UE to be
positioned to accurately measure the TOA of the bursts. Since the geographical
coordinates of the measurement units are known, the UE position can be
calculated via hyperbolic trilateration. This method will work with existing
UE without any modification.
The operation of the U-TDOA location method is described in clause 12.
### 4.3.5 Barometric Pressure positioning
The barometric pressure method makes use of barometric pressure sensors for
identifying height information and to determine the vertical component of the
position of the UE. This method should be combined with other positioning
methods to determine the 3D position of the UE.
The operation of the Barometric Pressure positioning method is described in
clause 14.
### 4.3.6 WLAN positioning
The WLAN positioning method makes use of the WLAN measurements (AP identifiers
and optionally other measurements) and databases to determine the location of
the UE. The UE measures received signals from WLAN [32] access points. Using
the measurements results and a references database, the location of the UE is
calculated.
The operation of the WLAN positioning method is described in clause 15.
### 4.3.7 Bluetooth positioning
The Bluetooth positioning method makes use of the Bluetooth measurements
(Bluetooth beacon identifiers and optionally other measurements) and databases
to determine the location of the UE. The UE measures received signals from
Bluetooth [33] beacons. Using the measurements results and a references
database, the location of the UE is calculated.
The operation of the Bluetooth positioning method is described in clause 16.
### 4.3.8 TBS positioning
A Terrestrial Beacon System (TBS) consists of a network of ground-based
transmitters, broadcasting signals only for positioning purposes. The current
type of TBS positioning signals are the MBS (Metropolitan Beacon System)
signals [34].
The operation of the TBS positioning method is described in clause 17.
# 5 UTRAN UE Positioning Architecture
Figure 5.1 shows the general arrangement of the UE positioning feature in
UTRAN. Communication among the UTRAN UE Positioning entities makes use of the
messaging and signalling capabilities of the UTRAN interfaces (Iub, Iur,
Iupc).
The SRNC, receives authenticated requests for UE positioning information from
the CN across the Iu interface. RNCs manage the UTRAN resources (including
Node Bs, LMUs, the SAS) the UE and calculation functions, to estimate the
position of the UE and return the result to the CN. SRNC may also make use of
the UE Positioning function for internal purpose e.g. position based handover.
Figure 5.1: General arrangement of UE Positioning in UTRAN
## 5.1 UE Positioning Operations
The schematic functional description of LCS operations in UMTS is defined in
[13].
Upon request from the Core Network or for internal operations, a UTRAN UE
Positioning function should:
\- request measurements, typically from the UE and one or more Node B;
\- send the measurement results to the appropriate calculating function within
UTRAN;
\- receive the result from the calculating function within UTRAN;
\- perform any needed co-ordinate transformations;
\- send the results to the LCS entities in the CN or to application entities
within UTRAN (this function applies to the RNC only).
In the event that the client is internal to UTRAN the request may be made
directly to the UTRAN UE Positioning entities as the internal clients are
considered to be \"pre-authorised\".
As part of its operation, the UTRAN UE Positioning calculating function may
require additional information. This may be obtained by the function directly
by communication with a database, or it may be through a request to UTRAN UE
Positioning entities that will mediate the request and return of information
from the appropriate database (or databases if more than one is needed to
fulfil the requests).
There may possibly also be available independent information that is able to
supply the positioning information directly, or may be able to supply
auxiliary information to the calculation function. The UTRAN UE Positioning
co-ordination function, as part of its activity to supervise the positioning
process, may query the UE or other elements of the UTRAN to determine their
capabilities and use this information to select the mode of operation.
This general operation is outlined in the following (generic) sequence diagram
figure 5.2. This figure is not intended to show the complete UE Positioning
operation for UTRAN, but to simply to outline the basis for operation.
{width="5.427777777777778in" height="2.8340277777777776in"}
Figure 5.2: General sequence for UE Positioning operation
### 5.1.1 Co-ordination, Measurement and Calculation Functions
The UTRAN functions for UE Positioning provide the coâ€‘ordination, measurement
and calculation functions needed to provide a position and optional velocity
estimate. The functions interface with the requesting application and select
the appropriate positioning method and speed of response. The functions
coâ€‘ordinate the operations of the radio and measurement equipment to transmit
the needed signals and to make the needed measurements. The measurements may
be made by the Node Bs, or by the LMU. The LMU may be associated with the Node
B, independently located or remote (i.e. communicating over the Uu interface).
The functions may also access databases or other sources of information
appropriate for the positioning method. The functions also provide the
calculation functions appropriate for the positioning method to estimate the
UE position and the accuracy of the report. The functions may also make co-
ordinates translations to the geographic co-ordinates system requested by the
application. The functions also may record information on the usage of the UE
Positioning that may be used for administrative purposes (e.g. forwarded to a
billing function in the CN). If needed by the positioning method, the
functions will ensure the broadcast of information and gather and update
information concerning UTRAN operating parameters (e.g. timing of Node B
transmissions) needed for UE Positioning operations.
These entities are mainly concerned with the positioning method, controlling
the radio equipment and performing the calculations to determine the position
and thus may be associated with the RNC in the UTRAN. These functions may
receive location requests from either the CN or from applications internal to
the UTRAN.
The UTRAN UE Positioning entities may also request the subscription and
authorisation functions in the CN to authenticate an application or a UE
subscription or to verify the subscriber privacy parameters.
The RNC functions communicate with the CN across the Iu interface, with other
RNC entities across the Iur interface and with the Node B and LMU across the
Iub interface, with the SAS across the Iupc interface, and with the UE and the
remote LMU across the Uu interface.
## 5.2 Functional Description of UTRAN UE Positioning related elements
### 5.2.1 Radio Network Controller (RNC)
#### 5.2.1.1 Serving RNC
The SRNC is a network element of UTRAN and contains functionality required to
support LCS in one PLMN. The SRNC can work either in the RNC centric mode or
in a SAS centric mode where the SAS has control over the positioning
procedures.
##### 5.2.1.1.1 RNC Centric Mode
In RNC centric mode the SRNC provides the following functionality:
\- request of information from other RNC:\ The SRNC may request information
regarding UE Positioning from other RNCs;
\- flow control of positioning requests:\ If several simultaneous positioning
requests are present within one SRNC, the SRNC co-ordinates the positioning
requests taking into account priority of the requests (e.g. for Emergency
Clients);
\- positioning method selection:\ The positioning method selection is based on
the location request, QoS, capabilities of UE Positioning elements and UE
positioning capabilities;
\- position calculation:\ The SRNC may calculate the position of a UE and may
also support conversion of the position estimate between different geographic
reference systems. In case RNC estimates the UE position, it is also
responsible to estimate the accuracy of the position estimate. This accuracy
estimate should include, for example, the effect of geometric dilution of
precision (GDOP), the capabilities of the signal measuring hardware, the
effects of multipath propagation and the effects of timing and synchronisation
unknowns. The accuracy should be returned as a measure of distance in the same
units as the position estimate. The accuracy zone may be reported as the axis
and orientation of an ellipse surrounding the position estimate. If available,
the positioning method (or the list of the methods) used to obtain the
position estimate may also be returned to the CN with the position
information. If the CN has requested an accuracy for the position estimate,
the Location response shall include an indication whether the position
estimate satisfies the requested accuracy or not.
\- provide UE Positioning assistance data:\ The SRNC may provide assistance
data in the support of the various positioning methods;
\- Overall UE Positioning coordination and control:\ If both an SAS and an
SRNC with SMLC internal functionality are available, the SRNC is responsible
for the overall coordination and control of UE Positioning. For example,
although the SAS has a position calculation function, the SRNC may also have a
position calculation function. The SRNC is responsible for managing the co-
ordination and control of these multiple resources.
The SRNC, of course, also provides CRNC functionality regarding UE Positioning
for its associated Node Bs and LMUs.
##### 5.2.1.1.2 SAS Centric Mode
In SAS centric mode the SRNC provides the following functionality:
> \- Forwarding of location requests to the SAS:
>
> The SRNC forwards incoming location requests to the SAS and provides further
> information like UE capabilities and UE Cell ID to guide the positioning
> method selection in the SAS
\- Forwarding of UE positioning assistance data and measurement instructions
> Upon request from the SAS, the SRNC forwards assistance data and/or
> measurement instructions from the SAS to the UE in support of the various
> positioning methods.
\- Delivery of positioning information
> Upon request from the SAS the SRNC gathers location related information from
> the NodeBs and the UE and sends this information back to the SAS.
\- Forwarding of positioning estimates
> The SRNC forwards the positioning result received from the SAS to the
> requesting CN entity.
#### 5.2.1.2 Other RNC
##### 5.2.1.2.1 Controlling RNC
The CRNC provides the following functionality:
\- resources management:\ When allocating resources the CRNC determines which
UTRAN elements are involved and what to measure. The RNC is also responsible
for managing the effect of UE Positioning operations on the overall
performance of the radio network by:
\- controlling the variation of the UL and DL signal power level due to UE
Positioning;
\- calculating the DL and UL power/interference due to UE Positioning;
\- to admit/reject the new positioning requests;
\- co-operating with Admission Control, and entities of the RRM (such as power
control) to provide the system stability in terms of radio resources;
\- controlling the IPDL mechanism for OTDOA measurements. This may include the
overall control of the periodical measurement fulfilment. Co-ordination among
RNCs (e.g. to assure non-overlapping idle periods) will be communicated
through the Iur interface.
\- broadcast of system information:\ The CRNC broadcasts information in
support of the selected positioning method. This broadcast information may be
specially coded (i.e. encrypted) to ensure its availability only to
subscribers of the service. For the case where there exists an SAS, the
broadcast data is generated within the CRNC and/or, depending on the
positioning method, may also be generated in the SAS which then forwards it to
the CRNC over the Iupc interface for eventual broadcast over the Uu interface.
> The information to be broadcast could include, for example:
\- identification and spreading codes of the neighbouring cells (the channels
that are used for measurements);
\- Relative Time Difference (RTD), i.e. the timing offsets, asynchronicity
between base stations, could be based on measurement results obtained by LMUs;
\- roundtrip delay estimates in connected mode;
\- the geographic position co-ordinates of the neighbouring Node B;
\- the idle period places within the frame structure for multiple cells;
\- the local time-of-day;
\- reference time, reference position, DGNSS corrections, ephemeris and clock
data, and almanac data.
\- request UE Positioning related measurements from its associated Node Bs and
LMUs:\ The measurements requested by CRNC from its associated Node Bs and LMUs
is dependant on the positioning method used. The following measurement
returned by a LMU to a CRNC has a general status and may be used for more than
one positioning method:
\- radio interface timing information.
Signalling between Node B or LMU and CRNC is transferred using Iub signalling.
##### 5.2.1.2.2 Drift RNC
The DRNC is a UTRAN element that has an active link to the UE that shall be
located. The DRNC, of course, also provides CRNC functionality regarding UE
Positioning for its associated Node Bs and LMUs.
### 5.2.2 Node B
Node B is a network element of UTRAN that may provide measurement results for
position estimation and makes measurements of radio signals and communicates
these measurements to the CRNC.
The Node B may make its measurements in response to requests (e.g. from the
CRNC), or it may autonomously measure and report regularly or when there are
significant changes in radio conditions (e.g. changes in the UTRAN GPS timing
of cell frames or SFN-SFN Observed Time Difference).
### 5.2.3 Location measurement unit (LMU)
Location Measurement Units (LMU) are associated with either the CRNC or the
SAS. LMUs associated with the SAS are outside the scope of this specification.
The Location Measurement Unit (LMU) entity makes measurements (e.g. of radio
signals) and communicates these measurements to a RNC. The LMU may also
perform calculations associated with the measurements.
All positioning and assistance measurements obtained by an LMU are supplied to
a particular CRNC associated with the LMU. Instructions concerning the timing,
the nature and any periodicity of these measurements are either provided by
the CRNC or are pre-administered in the CRNC (e.g. using O&M).
The LMU may make its measurements in response to requests (e.g. from the
CRNC), or it may autonomously measure and report regularly (e.g. timing of
Node B transmissions) or when there are significant changes in radio
conditions (e.g. changes in the UTRAN GPS timing of cell frames or SFN-SFN
Observed Time Difference).
There may be one or more LMU associated with the UTRAN and an UE Positioning
request may involve measurements by one or more LMU. The LMU may be of several
types and the CRNCs will select the appropriate LMUs depending on the UE
Positioning method being used.
The LMU may be used, for example, to measure UTRAN transmissions either UL or
DL. These measurements may be made either, for example, to locate the UE or to
measure a system parameter needed by the UE Positioning such as the timing
offset (UTRAN GPS timing of cell frames or SFN-SFN Observed Time Difference)
of transmissions Node Bs. The LMU may also measure other transmissions, such
as those of satellite navigation systems (i.e. GPS) and either report the
measurements for use by the CRNC, or report the positioning results as
determined by internal calculations of the LMU. The details of the
measurements to be made by the LMU will be defined by the chosen UE
Positioning method.
An LMU makes radio measurements to support one or more positioning methods.
These measurements fall into one of two categories:
(a) positioning measurements specific to one UE and used to compute its
position;
(b) assistance measurements applicable to all UEs in a certain geographic
area.
There are two classes of LMU:
\- **Stand-Alone LMU:** communicates with RNCs via the Uu interface;
\- **Associated LMU:** communicates with RNCs via the Iub interface.
The associated LMU signalling protocol is the NBAP. The protocol for stand-
alone LMU UTRAN signalling will be the RRC protocol.
**Stand-Alone LMU**
A stand-alone LMU is accessed exclusively over the UTRAN air interface (Uu
interface). There is no other connection from the stand-alone LMU to any other
UTRAN network element.
NOTE 1: This does not preclude a stand-alone LMU from also communicating with
other access networks (e.g. GSM) through interfaces that are not part of the
present document.
A stand-alone LMU has a serving Node B that provides signalling access to its
CRNC. A stand-alone LMU also has a serving 3G-MSC, VLR and a subscription
profile in an HLR. A stand-alone LMU always has a unique IMSI and supports all
radio resource and mobility management functions of the UTRAN radio interface
that are necessary to support signalling. A stand-alone LMU shall support
those connection management functions necessary to support UE Positioning
signalling transactions with the CRNC and may support certain call control
functions of to support signalling to an CRNC using a circuit switched data
connection.
NOTE 2: A network operator may assign specific ranges of IMSI for its LMUs and
may assign certain digits within the IMSI to indicate the associated CRNC.
Certain digits in the IMSI may also be used as a local identifier for an LMU
within an CRNC.
To ensure that a Stand-alone LMU and its associated CRNC can always access one
another, an LMU may be homed (camped) on a particular cell site or group of
cell sites belonging to one 3G-MSC. For any Stand-alone LMU with a
subscription profile in an HLR, a special profile may be used to indicate the
assigned supplementary services (e.g. the SMS-PP MT for data download via the
SIM application toolkit, and barring of all incoming and possibly outgoing
calls). An identifier in the HLR profile also distinguishes an LMU from a
normal UE. All other data specific to an LMU is administered in the LMU and in
its associated CRNC.
**Associated LMU**
An associated LMU is accessed over the Iub interface from an RNC. An
associated LMU may make use of the radio apparatus and antennas of its
associated Node B. The LMU may be either a logically separate network element
addressed using some pseudo-cell ID, or connected to or integrated in a Node
B. Signalling to an associated LMU is by means of messages routed through the
controlling Node B.
An associated LMU may be separated from the Node B, but still communicate with
the CRNC via the Node B Iub interface. The interface between the associated
LMU and its Node B is not part of the present document.
NOTE 3: An associated LMU is not precluded from also communicating with other
access networks (e.g. GSM) through interfaces that are not part of the present
document.
**Measurements**
The assistance measurements obtained by an LMU are generic and are usable by
more than one positioning method. These include:
\- **Radio Interface Timing measurements:** include UTRAN GPS timing of cell
frames or SFN-SFN Observed Time Difference of the signals transmitted by Node
B, where timing differences are measured relative to either some common
reference clock (UTRAN GPS timing of cell frames) or the signals of another
Node B (SFN-SFN Observed Time Difference);
\- **Inter-System Timing measurements:** include timing measurements between
the UTRAN radio signals transmitted by a Node B and an external system such as
the GPS or GSM.
### 5.2.4 User Equipment (UE)
The UE may transmit the needed signals for uplink based UE Positioning
measurements and to make measurements of downlink signals. The measurements to
be made will be determined by the chosen positioning method.
The UE may also contain LCS applications, or access an LCS application through
communication with a network accessed by the UE or an application residing in
the UE. This application may include the needed measurement and calculation
functions to determine the UE\'s position with or without assistance of the
UTRAN UE Positioning entities. This is outside of the scope of this
specification.
The UE may also, for example, contain an independent positioning function
(e.g., GPS, WLAN, Bluetooth, Barometric Pressure, TBS) and thus be able to
report its position, independent of the UTRAN transmissions. The UE with an
independent positioning function may also make use of information broadcast by
the UTRAN that assists the function.
### 5.2.5 Stand-alone SMLC
An SAS performs one or more of the following procedures:
\- Provide GNSS assistance data to the RNC, for both UE-assisted and UE-based
method types, to be delivered through point-to-point or broadcast channels to
UE;
\- Act as a location calculation server if the location estimates are not to
be calculated in the RNC;
> \- Performs a U-TDOA positioning of a particular UE on request of the SRNC;
>
> \- Optionally, the SAS may determine the most appropriate positioning method
> or combination of positioning methods. When the SAS location method
> determination option is seleted:
>
> o The SAS is responsible to select the set of GNSS assistance data to be
> sent to the UE for A-GNSS based positioning and provide that assistance data
> to the SRNC within the PCAP Position Activation Request message;
>
> o The SAS is responsible to request UE positioning related information from
> the SRNC, e.g. channel information or round trip time;
>
> o The SAS is responsible for coordination of simultaneous UE positioning
> requests from the CN.
>
> \- Selecting the set of U-TDOA capable LMUs to be involved in a U-TDOA
> location determination.
The SAS communicates with the RNC over the Iupc interface enabling it to
forward UE Positioning assistance data to UEs and to receive UE Positioning
measurement data from the RNC.
When timing assistance is needed, the SAS may rely on associated LMUs or on
the RNC (and on the possibility to have GNSS receivers co-located with the
RNC, the Node Bs and/or present in the UEs) to obtain that.
# 6 Signalling protocols and interfaces
## 6.1 LCS signalling between SRNC and MSC/SGSN
LCS signalling between SRNC and MSC/SGSN is handled through the Iu interface,
which is described in clause 6.6.1.
## 6.2 SRNC signalling to a target UE
SRNC signalling to a target UE is handled through the Uu interface, which is
described in clause 6.6.4.1.
## 6.3 Controlling RNC signalling to a standalone LMU
CRNC signalling to a standalone LMU is handled through the Uu interface, which
is described in clause 6.6.4.2.
## 6.4 Controlling RNC signalling to an associated LMU
CRNC signalling to an associated LMU is handled through the Iub interface,
which is described in clause 6.6.3.
## 6.5 RNC-to-RNC signalling for UE Positioning support
The RNC-to-RNC signalling for UE Positioning support is handled through the
Iur interface, which is described in clause 6.6.2.
## 6.5a SAS to RNC signalling for PCAP
The SAS to RNC signalling is described in clause 6.6.5.
## 6.6 Interfaces
There are five interfaces through which the UE Positioning entities
communicate. These are the Iu, Iur, Iub, Uu and Iupc.
NOTE: the interfaces between the Internal or External LCS applications and the
3G-MSC or 3G-SGSN are outside the scope of the present document.
### 6.6.1 Iu Interface
The Iu interface is used to communicate between the LCS functional entities in
the CN and the UE Positioning entities in the UTRAN. Further specification of
the messages and operations for LCS across the Iu interface may be found in
reference [19].
### 6.6.2 Iur Interface
UE Positioning operations at the Iur interface are defined in [20].
The Iur interface is used to communicate between the UE Positioning functional
entities associated with the SRNC and other RNC in the UTRAN. The Iur
interface is also used to communicate between the SRNC and the Internal UE
Positioning Applications in the UTRAN. The UE Positioning entities associated
with the SRNC are responsible for co-ordinating and responding to positioning
requests received from the LCS entities in the CN or Internal Clients.
When communicating between the SRNC and the UTRAN Internal UE Positioning
Applications (e.g. located within other RNCs), the messages and protocols are
those used over the Iur interface. Some positioning methods may require
measurements by several LMU or Node B, some of which may be associated with
other RNC. Commands and responses from these UE Positioning Entities are
communicated over the Iur interface. In some cases, the UE Positioning
Entities in the SRNC may make use of entities associated with other RNC. For
example, a calculating function may be used in another RNC if the SRNC is too
busy or does not contain the function or database information required by the
chosen positioning method.
Iur shall be used for UE Positioning signalling whenever it is available, even
in the case when the RNCs connected to different 3G-MSCs or 3G-SGSN.
Within UTRAN, Iur supports inter-RNC soft handover. Inter-RNC handover should
also include UE Positioning, meaning that whenever an inter-RNC soft handover
occurs, Iur should be able to support the functionality of the UE Positioning
entities in RNCs.
Iur shall be used also to collect RTD and other UE Positioning information
from Node Bs under different RNCs that are not involved in handover.
#### 6.6.2.1 Signalling between SRNC and DRNC
Signalling between SRNC and DRNC is used to obtain LCS information specific to
a UE that has an UE context to the DRNC.
The signalling between SRNC and DRNC is done by using RNSAP procedures
specified in [20].
#### 6.6.2.2 Signalling between SRNC and CRNC
Signalling between SRNC and CRNC is used to obtain UE Positioning information
and request LCS related transmissions or other radio operation (e.g.
information about IPDL configuration) that is needed by SRNC for a certain
positioning method. The requested information may be e.g. GPS assistance data
in case a reference GPS receiver is not available at the SRNC or RTD results
that may be provided by the CRNC.
The procedures used for the signalling between SRNC and CRNC are not specified
yet.
### 6.6.3 Iub Interface
UE Positioning operations at the Iub interface are defined in [21].
The Iub interface is used to communicate among the UE Positioning entities
associated with the CRNC, the Node B and the associated LMU.
This interface passes the request for measurements, the measurement results
and requests for UE Positioning related transmissions or other radio
operations needed by the positioning method (e.g. broadcast of parameters
needed for a UE-based positioning method). Measurement requests and results
are signalled by using NBAP procedures.
#### 6.6.3.1 Signalling between CRNC and associated LMU
Signalling exchanges between an CRNC and a LMU under the control of that CRNC
will be specified in the NBAP protocol for associated LMUs.
The protocol layers employed to enable signalling between the CRNC and an
associated LMU are defined in [22]. The LMU signalling information elements
are included directly in the NBAP protocol, defined in [22].
### 6.6.4 Uu Interface
UE Positioning operations at the Uu interface are generally defined in [13].
This specification defines in more detail the procedures needed for messaging
for each individual positioning method.
The Uu interface is used to communicate among the UE Positioning entities
associated with the SRNC, the UEs and the stand-alone LMU.
The Uu interface may pass measurement requests and results to and from the UE
or the stand-alone LMU.
The Uu interface may also be used for broadcast of information that may be
used by the UE or stand-alone LMU for their UE Positioning operations. This
may, for example, include timing and code information about nearby Node B
transmissions that may assist the UE or LMU in making their measurements.
The Uu interface is also used to transport signalling between LCS entities in
the CN and the UE, e.g. positioning requests from internal or external LCS
Applications at the UE. This is part of the NAS procedures and it is outside
the scope of this specification.
#### 6.6.4.1 Signalling between SRNC and Target UE
UE Positioning related signalling between an SRNC and a target UE is supported
by the RRC protocol as specified in [18].
The positioning request to UE signalling flow is generic for all UE-based or
UE-assisted positioning methods (OTDOA and Network-assisted GNSS).
Figure 6.1: OTDOA / GNSS Positioning Message Flow
1\. The SRNC determines possible assistance data and sends a MEASUREMENT
CONTROL request to the UE. The MEASUREMENT CONTROL message may contain a
request for periodic reporting with an amount of reports greater than one. In
networks that include an SAS, the assistance data is generated within the SRNC
or in the SAS and passed to the SRNC over the Iupc interface. If both an SAS
and an SRNC with SMLC internal functionality are available, selection is based
on SRNC configuration.
2\. The UE performs the requested measurements. If the UE is able to calculate
its own position and optionally, velocity, and this is requested, the UE
computes a position estimate, and optionally, a velocity estimate based on
measurements. Assistance data necessary to perform these operations will
either be provided in the MEASUREMENT CONTROL request and possibly in
subsequent MEASUREMENT CONTROL messages or be available from broadcast
sources. The resulting measurements or position and optional velocity
estimates are returned to UTRAN in a MEASUREMENT REPORT response. If the UE
cannot fulfil the request, a MEASUREMENT CONTROL FAILURE message is returned.
3\. If periodic reporting was requested in step 1 with an amount of reports
greater than one, the UE continues to send MEASUREMENT REPORT messages one
reporting interval after the previous MEASUREMENT REPORT message until the
requested amount of reports is attained, or until a request from the SRNC is
received to stop the periodic reporting.
In case the UE is not able to fulfill the measurements because the assistance
data stored in the UE is not sufficient or out of date the UE returns a
MEASUREMENT REPORT requesting for more additional data.
Figure 6.2: OTDOA / GNSS Positioning Message Flow with additional assistance
data request
1\. The UE cannot fulfil the request or cannot continue to send UE Positioning
measurements when the reporting criteria are fulfilled, because its assistance
data is not sufficient or out of date, a MEASUREMENT REPORT message is
returned requesting for additional assistance data.
2\. The SRNC may send more or new assistance data based on UE request.
3\. The requested measurement results are returned to the SRNC. The UE
continues the measurement reporting according to the stored MEASUREMENT
CONTROL information (e.g., when periodic reporting was requested).
##### 6.6.4.1.1 Assistance Data Delivery to UE
The assistance data signalling flow illustrated here is generic for the point-
to-point delivery of positioning related assistance data to the UE, including
OTDOA and Network-assisted GNSS.
Figure 6.2b: OTDOA or GNSS Assistance Data Delivery Flow
1\. The SRNC determines assistance data and sends it in the RRC ASSISTANCE
DATA DELIVERY message to the UE. In networks that include an SAS, the UE
Positioning assistance data is generated within in the SAS and passed to the
SRNC over the Iupc interface.
##### 6.6.4.1.2 Error Handling
The error handling for signalling on the Uu interface is handled by the RRC
protocol in [18].
##### 6.6.4.1.3 Broadcast of Assistance Data
For OTDOA and GNSS, UTRAN may broadcast assistance data to the UE.
The assistance data to be broadcast for OTDOA contains the reference and
neighbour cells to measure and for each neighbour cell the approximate cell
timing and possibly IPDL information. The approximate cell timing may be used
to simplify OTDOA measurements. Additionally, RTD values (e.g. in case of a
non-synchronised network) and Node B co-ordinates for UE based OTDOA may be
included for each neighbour cell. The length of the message depends on how
many neighbours are included in the assistance data. Part of the broadcast
message (e.g. the serving and neighbour Node B geographic co-ordinates) may be
ciphered.
The assistance data to be broadcast for assisted GNSS may contain a subset of
or all of the following information: reference time, reference position, DGNSS
corrections, ephemeris and clock corrections, and almanac and other data. The
broadcast message may be ciphered.
The broadcast channel that is used for the OTDOA and GNSS assistance data
makes use of the common UTRAN broadcast service specified in [18].
##### 6.6.4.1.4 Signalling Flow for Assistance Data Broadcast Using the Common
UTRAN Broadcast Service
The UTRAN may broadcast positioning related assistance data to UEs within the
system information.
Figure 6.3: Broadcast of system information
##### 6.6.4.1.5 UE Positioning Assistance Data Ciphering
To allow control of access to the assistance data, parts of the broadcast
assistance data may be ciphered. Ciphering is done with a specific ciphering
key delivered by the CN for this purpose. The management of the key is
described in the System Aspects Stage 2 ([13]).
##### 6.6.4.1.6 UE Positioning Assistance Data Ciphering Algorithm
The algorithm used for ciphering the UE Positioning assistance data is the
standard 56-bit Data Encryption Standard (DES) algorithm.
The deciphering of broadcast assistance messages is done in the UEs. The
deciphering will utilize the deciphering keys delivered during the location
update request. Details can be found in [25].
The RNC ciphers the parts of the UE Positioning Broadcast Data message to be
protected using the 56-bit DES algorithm and a ciphering keys (56 bits) and
Ciphering Serial Number (16 bits) for the broadcast location area.
The ciphered part is variable in length with one bit resolution. By using the
UE Positioning Broadcast Data message header, the UEs can determine what part
of message is ciphered.
Inputs to the 56-bit DES algorithm are the following:
\- 56-bit key K (deciphering key);
\- 16-bit Ciphering Serial Number from broadcast message, which is denoted
here by IV (Initialisation Vector);
\- plain-text bits (the ciphered part of broadcast message).
The ciphering process is illustrated in the following diagram. Ciphering is
done by producing a mask bit stream, which is then \"XORed\" bit-by-bit to the
plain-text data to obtain the cipher-text data. First, the Initialisation
Vector (IV) is concatenated with 0-bits in order to achieve a 64-bit block
I~1~. This block is then encrypted by the DES algorithm using the key K.
Output is a 64-bit block I~2~. This constitutes the first 64 bits of the mask
bit stream. If the message is longer than 64 bits, then more bits are needed.
These are produced by encrypting I~2~ again by the DES algorithm using the key
K. The output is a 64-bit block I~3~. This is the next 64 bits of the mask bit
stream. This iteration is continued until enough bits are produced. The
unnecessary bits from the last 64-bit block I~j~ are discarded. The figure
below illustrates the first two mask bit generations and the two ciphered
64-bit blocks.
Figure 6.4: Data Assistance Ciphering Algorithm
Deciphering is done similarly. The same mask bit stream is produced and these
are XORed, bit-by-bit, to the cipher-text data bits. The result will be the
plain-text data.
#### 6.6.4.2 Signalling between RNC and stand-alone LMU
Signalling exchanges between an RNC and a stand-alone LMU under the control of
that RNC will be specified in the RRC protocol for stand-alone LMUs. This does
not preclude a stand-alone LMU from also communicating with other networks
(e.g. GSM) through interfaces (e.g. LLP protocol) that are not part of the
present document.
Each update of the LMU measurement (including the initial one) is triggered by
a LCS request from the client that is internal to UTRAN. The request may be
made directly to the UTRAN LCS entities as the internal clients are considered
to be \"pre-authorised\" (clause 5) or comes from CN with authentication.
The following figure illustrate the protocol layers used to support signalling
between an RNC and a stand-alone LMU over the Uu interface.
The protocol layers employed to enable signalling between the RNC and a stand-
alone LMU are defined in [18]. The LMU signalling information elements are
included directly in the RRC protocol, also defined in [18].
Figure 6.5: Signalling between an RNC and a Stand-Alone LMU using a signalling
bearer
### 6.6.5 Iupc Interface
UE Positioning operations on the Iupc interface are described in [27]. That
specification defines in more detail the procedures needed for messages for
the UE positioning method.
The Iupc interface is used to allow communication between an RNC and an SAS.
This interface is used to signal position and optionally, velocity estimate
requests and responses as well as UE Positioning related information using
mechanisms consistent with the other internal UTRAN interfaces. The Iupc
interface is used for providing the RNC with UE Positioning data to be used
for both point-to-point and broadcast purposes. The Iupc interface uses an
Iups-like protocol stack for the transport layer which is described in [28].
#### 6.6.5.1 Signalling between RNC and SAS
The signalling between RNC and SAS is done by using PCAP procedures specified
in [27].
##### 6.6.5.1.1 PCAP Position Calculation
The PCAP Position Calculation message flow illustrates how an SRNC invokes an
SAS to calculate a position estimate of a UE. This message flow is repeated by
the SRNC as needed for a periodic location procedure.
The SRNC initiates the PCAP Position Calculation message flow in the RNC
centric mode for UEs that support the following positioning method types:
\- UE assisted;
\- UE assisted is preferred, but UE based is allowed;
\- UE based is preferred, but UE assisted is allowed;
when the chosen positioning method type is \'UE Assisted\'.
For UEs that only support the UE based positioning method or that, supporting
both, have selected the \'UE Based\' option, the PCAP Position Calculation
message flow is not applicable.
The SRNC also inititates the PCAP Position Calculation Request message flow to
invoke the U-TDOA positioning method in the case that U-TDOA is initiated from
the SRNC and not from the SAS.
Figure 6.6: PCAP Position Calculation Request Message Flow
1\. The SRNC initiates a PCAP Position Calculation Request Message. This
message contains data necessary for the SAS to calculate a position, and
optionally a velocity estimate for a UE and, if required, initiate U-TDOA
positioning for the UE. The PCAP Position Calculation Request message may
contain periodic location information (reporting interval and number of
outstanding requests for the overall periodic location procedure) to enable
the SAS to better fulfil future such requests.
2\. If the SAS is able to calculate the position, and optional velocity
estimate, possibly after performing U-TDOA positioning if requested in step 1,
it shall return it to the SRNC in a PCAP Position Calculation Response
Message. If the SAS cannot fulfil the request, it shall return a PCAP Position
Calculation Failure Message to the SRNC.
##### 6.6.5.1.2 PCAP Information Exchange
The PCAP Information Exchange message flow illustrates how an RNC initiates
and terminates an exchange of UE Positioning related information with an SAS.
The UE Positioning related information received from the SAS can be used by
the RNC to either provide assistance data to a particular UE through dedicated
signalling or to build up System Information Blocks containing assistance data
to be broadcast to UEs in a particular area.
Figure 6.7: PCAP Information Exchange Message Flow
1\. The RNC initiates a PCAP Information Exchange Initiation Request Message.
This message contains data necessary for the SAS to provide the requested UE
Positioning related information to the RNC. Upon reception of this message,
the SAS shall provide the requested UE Positioning related information
according to the reporting parameters given in the request. These parameters
specify how the UE Positioning related information is to be reported (i.e. on-
demand, periodically, or on-modification).
2\. If the SAS is able to determine the information requested by the RNC, it
shall respond with a PCAP Information Exchange Initiation Response Message.
3\. If the SAS cannot provide the requested UE Positioning related
information, it shall return a PCAP Information Exchange Initiation Failure
Message.
4\. In cases where the RNC has specified that the UE Positioning related
information is to be reported periodically or on-modification, the SAS shall
return the requested information in one or more PCAP Information Report
Messages.
5\. In cases where the RNC has specified that the UE Positioning related
information is to be reported periodically or on-modification, the SAS may
initiate an Information Exchange Failure Indication Message to notify the RNC
that the requested information associated with a particular reporting activity
can no longer be reported.
6\. In cases where the RNC has specified that the UE Positioning related
information is to be reported periodically or on-modification, the RNC may
terminate a particular information reporting activity by initiating a PCAP
Information Exchange Termination Request Message. Upon reception, the SAS
shall terminate the particular information exchange activity indicated by the
RNC.
##### 6.6.5.1.3 PCAP for SAS based Positioning Method Selection
As a configuration option, the SAS shall be able to determine the positioning
method used for individual positioning events. In this case the SRNC shall
allow A-GNSS, OTDOA, Cell ID, U-TDOA, WLAN, Bluetooth, Barometric Pressure and
TBS positioning events to be originated by the SAS via PCAP messages on the
Iupc interface.
Figure 6.8: Fundamental SAS centric signal flow over the Iupc interface
1\. The SRNC forwards the information contained in the RANAP Location
Reporting Control message plus Cell ID and UE capability information to the
SAS in a PCAP Position Initiation Request message.
2\. The SAS may initiate a specific positioning method by sending a PCAP
Position Activation Request message to the SRNC containing the required
positioning method and any assistance data and instructions associated with
that positioning method. For positioning methods which require RRC signalling
(e.g., OTDOA or A-GPS), the positioning instructions include the required
settings for the \"measurement validity\" IE in the RRC signalling message
(e.g., CELL_DCH, all states except CELL_DCH, or all states) [18].
3\. The SRNC performs the positioning procedure requested by the SAS including
any signalling interaction with the UE in the case of UE assisted or UE based
positioning (e.g. for A-GNSS or OTDOA).
4\. The SRNC sends a PCAP Position Activation Response message to the SAS
confirming the requested action and providing any information required by the
requested positioning method; e.g. UE channel information for the U-TDOA
positioning method or A-GNSS measurements for UE assisted A-GNSS. If periodic
UE reporting is activated by the SRNC in step 3, the PCAP Position Actiation
Response message includes the used settings for the IE \"measurement
validity\" in the corresponding RRC signalling [18].
5\. The SAS instigates any further positioning associated with the
posititioning method chosen in step 2 -- e.g. obtains measurements from LMUs
in the case of U-TDOA.
> Note:
>
> Repeating steps 2, 3, 4 and 5 to invoke additional positioning methods may
> provide higher location accuracy or successfully provide UE locations under
> difficult propagation circumstances, e.g. the hybrid positioning method.
> When steps 2, 3, 4 and 5 are repeated, the SAS shall not send a new PCAP
> Position Activation Request message until the SRNC has responded to a
> previous request or the SAS has timed out on a response. The SAS may,
> however, send a new PCAP Position Activation Request message in a repetition
> of step 2 while SAS positioning for a previous step 5 is ongoing. In this
> case, SAS positioning (e.g. for U-TDOA) could execute in parallel with SRNC
> positioning (e.g. for A-GNSS or OTDOA) thereby reducing overall response
> time.
6\. If an RNC positioning procedure has been invoked in step 3 which requests
periodic UE reporting according to subclause 6.6.4.1, the subsequent periodic
UE measurement reports (e.g. for A-GPS or OTDOA) are conveyed to the SAS using
one or more PCAP Position Periodic Report messages.
> NOTE: If a periodic RNC positioning procedure has been invoked by the SRNC
> in step 3, the PCAP Position Activation Response message in step 4 may be
> returned immediately (i.e., before step 3) confirming the requested action
> and not including any measurements. In that case, all periodic measurement
> reports are conveyed to the SAS using PCAP Position Periodic Report
> messages.
7\. If periodic positioning was invoked in step 1, the successive periodic
position estimates (or an indication of positioning failure) are conveyed to
the SRNC using one or more PCAP Position Periodic Result messages.
> 8\. The SAS provides the UE location or, when periodic positioning was
> invoked in step 1, the final UE location to the SRNC in a PCAP Position
> Initiation Response message. In case of periodic positioning, the final
> location estimate may be provided, as an implementation option, in a PCAP
> Position Periodic Result message followed by a PCAP Position Initiation
> Response message that does not contain any UE location estimate.
# 7 General UTRAN UE Positioning procedures
## 7.1 General procedures in UTRAN for UE Positioning
The General UE positioning procedure in UTRAN starts with a request over Iu
from the CN. The request from the core network may be a request for direct (on
demand) reporting or periodic reporting.UTRAN then determines the UE position
by selecting a suitable positioning method. UTRAN then responds to the request
with the estimated position and optionally, the estimated velocity, possibly
the associated accuracies and if available, the positioning method (or the
list of the methods) used to obtain the position and optional velocity
estimates. If periodic reporting was requested by the CN, UTRAN responds to
the request according to the received periodic reporting criteria and sends
the estimated position together with other information (e.g., velocity,
associated accuracies, positioning methods used, etc.) one reporting interval
after the previous report until the desired amount of reports has been
attained or the procedure is cancelled by the UTRAN or CN.
## 7.2 Common procedures supporting UE Positioning interaction between RNCs
In the case that the positioning information is needed from an associated LMU
in a Node B that is not controlled by the SRNC then the transfer of this
information needs to be supported on the Iur interface. This information is
the same information that is signalled between an associated LMU and the
corresponding CRNC in the case when Iur support is not needed.
The SRNC requests the information it requires (e.g. GPS timing of cell
measurements) from the CRNC of the Node B, which has the associated LMU. The
CRNC in turn requests the information from the Node B and upon success returns
the results to the SRNC.
Similarly when the SRNC needs a Node B measurement on a UE when that Node B is
not controlled by that SRNC there needs to be support on the Iur. One example
is the RTT measurement.
Other information that may need to be signalled over the Iur includes LMU
parameters (geographical position, covered cells etc.).
NOTE: Confirmation or FS is needed by R3 experts.
### 7.2.1 Signalling in case of SRNS relocation
In case of SRNC relocation UE Positioning functionalities may be transferred
in order for DRNC to be able to handle the responsibility of SRNC in LCS
process. Therefore the Source RNC may transfer the following information to
the Target RNC:
\- last known position, time stamp and accuracy of the position calculation;
\- LCS capabilities of the UE.
If there is a positioning procedure going on in order to estimate the position
of the UE (e.g. in case of periodic reporting) and an SRNS relocation occurs,
the positioning procedure shall be stopped in the old SRNC. After SRNS
relocation, it is under the responsibility of the MSC, MSC Server or SGSN to
restart an Iu aborted positioning procedure. In the UE, the positioning
procedure is going on and positioning information (e.g. measurement results)
may be sent back to UTRAN if the UE was requested to do so. The new SRNC then
decides whether it wants to use these information or discard them. If an SAS
is used, the SRNC shall send an Abort message to the SAS over the Iupc
interface.
## 7.3 Exception procedures
### 7.3.1 Procedures in the SRNC
The SRNC can work in either the RNC centric mode or in a SAS centric mode
where the SAS has control over the positioning procedures.
#### 7.3.1.1 RNC Centric Mode
When a positioning attempt fails due to failure of a position method itself
(e.g. due to inaccurate or insufficient position measurements and related
data) and the SRNC is unable to instigate another positioning attempt (e.g.
due to a requirement on response time), the SRNC shall return a Location
response over the Iu interface containing a less accurate position estimate if
available, even if this position estimate is not within the accuracy requested
from the CN. In this case, the Location response shall indicate that the
position estimate does not satisfy the requested accuracy. If a less accurate
estimate is not available, the SRNC shall return a Location response message
containing no position estimate and indicating the cause of failure.
When a positioning attempt is interrupted by some other unrecoverable error
event inside the SRNC, the SRNC shall immediately terminate the positioning
attempt and return a Location Response message containing the reason for the
positioning attempt cancellation. In that case, SRNC may also abort any
dialogue previously opened with an LMU for the purpose of instigating position
measurements for the UE being located.
In networks that include an SAS, the SRNC will receive a PCAP Position
Calculation Response message on the Iupc interface and then return a Location
response over the Iu interface containing the results that were provided over
the Iupc interface (a less accurate position estimate, cause of failure
indication, etc). This is described in subclause 7.3.4.
If the uplink channel characteristics for the target UE change while a U-TDOA
positioning is ongoing, the SRNC shall send a PCAP Position Parameter
Modification message to the SAS containing the updated channel characteristics
and cell information.
When a positioning attempt is interrupted by some other unrecoverable error
event inside the SRNC, the SRNC may also abort any dialogue previously opened
with an LMU for the purpose of instigating position measurements for the UE
being located.
When periodic reporting was requested from the CN and when no location
estimate is available at the SRNC when the reporting criteria are fulfilled
(e.g. due to failure of a position method itself), the SRNC shall return a
location response message containing no position estimate and indicating the
cause of failure.
#### 7.3.1.2 SAS Centric Mode
When the SRNC is unable to accept a PCAP Position Activation Request message
due to congestion or any other failure, the PCAP Position Activation Failure
message shall be sent to the SAS on the Iupc interface.
If an RRC measurement procedure for periodic UE positioning measurement
reporting in the UE has been activated by the SRNC upon reception of a PCAP
Position Activation Request message, and if the SRNC or UE terminates the
measurement reporting (e.g. after RRC state transition), the SRNC shall send a
PCAP Position Periodic Termination message to the SAS indicating the cause of
termination.
When the SRNC is unable to continue positioning activity due to cell
reselection that results in a different SRNC, loss of contact with the UE or
any other reason, the PCAP Abort message shall be sent to the SAS on the Iupc
interface.
A PCAP Position Parameter Modification message shall be sent containing
updated channel characteristics (including cell information) whenever the RF
channel parameters associated with the UE connection change due to cell
reselection or handover within the same SRNC, modification of the channel
capacity or any other reason within the control of a single RNC. The SRNC
shall keep the SAS updated on any change in serving cell status (using PCAP
Position Parameter Modification message) so that the SAS can provide correct
assistance data to the UE whenever the SAS invokes a positioning method or
methods.
If an RRC measurement procedure for periodic UE positioning measurement
reporting in the UE has been activated by the SRNC upon reception of a PCAP
Position Activation Request message, and if there is a RRC state transition
during the RRC measurement procedure, which results not in a termination of
the UE measurement reporting, the SRNC shall send a PCAP Position Parameter
Modification message informing the SAS about the new UE state. The SRNC shall
continue to notify the SAS of such state changes until the periodic position
measurement reporting has been completed by the UE, cancelled by the SAS or
terminated by the SRNC.
Sending of a PCAP Position Parameter Modification message does not change the
status in the SRNC of any position method or position methods that may have
been previously activated through receipt of a PCAP Position Activation
Request message.
If the SRNC receives a new PCAP Position Activation Request message before it
has responded to a previous PCAP request for the same UE or while it is still
performing activity for a previous non-periodic request (e.g. in the case of
U-TDOA in CELL_FACH state), the SRNC shall terminate all activity for the
previous request, including sending any response to the SAS, and shall process
the new request.
If the SRNC receives a new PCAP Position Activation Request message for UE
position measurement reporting using A-GPS or OTDOA or Barometric Pressure or
WLAN or Bluetooth or TBS (periodic or non-periodic) while it is still
performing activity for a previous A-GPS or OTDOA or Barometric Pressure or
WLAN or Bluetooth or TBS periodic request, the SRNC shall terminate all
activity for the previous request, including terminating the periodic
measurement reporting in the UE, and shall process the new request.
If the SRNC receives a new PCAP Position Activation Request message for cell
ID-RTT or U-TDOA while it is still performing activity for a previous A-GPS or
OTDOA or Barometric Pressure or WLAN or Bluetooth or TBS periodic request (but
after returning any PCAP Position Activation Response for this request), the
SRNC may both continue with the previous request and process the new request.
If an RRC measurement procedure for periodic UE positioning measurement
reporting in the UE has been activated by the SRNC upon reception of a PCAP
Position Activation Request message, and if the SRNC receives a PCAP Position
Periodic Termination message from the SAS, the SRNC shall terminate the
periodic UE positioning measurement reporting in the UE.
If the SRNC receives a request for assistance data from a UE positioning
procedure (periodic or non-periodic) that uses A-GNSS, the SRNC should
indicate this to the SAS by sending a Position Activation Response message.
The Position Activation Response message shall include the assistance data
types requested by the UE. In case of periodic UE positioning reporting and
after a Position Activation Response message has already been returned to the
SAS, the request for additional assistance data may be conveyed in a Position
Periodic Report message.
### 7.3.2 Procedures in a LMU
An LMU shall return an error indication to its CRNC when positioning
measurements previously ordered by the RNC cannot be provided due to any error
condition.
### 7.3.3 Procedures in the target UE
A target UE shall terminate any positioning procedure or the transfer of RRC
positioning assistance data without sending any response to the SRNC if any UE
Positioning RRC message is received from the SRNC that starts some other RRC
management procedure. The new RRC procedure shall then be executed by the UE.
### 7.3.4 Procedures in the SAS
The SAS can work in either the RNC centric mode or in a SAS centric mode where
the SAS has control over the positioning procedures.
#### 7.3.4.1 RNC Centric Mode
In the RNC centric mode, when a UE positioning attempt fails (e.g. due to
inaccurate or insufficient position measurements and related data), the SAS
may return a PCAP Position Calculation Response message over the Iupc
interface containing a less accurate position estimate. If a less accurate
estimate is not available or will not meet the accuracy requirement, the SAS
may instead return a PCAP Position Calculation Failure message containing no
position estimate and indicating the cause of failure.
When a positioning attempt is interrupted by some other unrecoverable error
event inside the SAS, the SAS shall immediately terminate the positioning
attempt and return a PCAP Position Calculation Failure message containing the
reason for the positioning attempt cancellation.
#### 7.3.4.2 SAS Centric Mode
If the SAS invokes a positioning method by sending a PCAP Position Activation
Request message to the SRNC, it may subsequently receive a PCAP Position
Activation Failure or PCAP Abort message from the SRNC, while positioning in
the SRNC is active, according to subclause 7.3.1.2. At any time after
receiving a PCAP Position Initiation Request message and whether positioning
in the SRNC is active or not active, the SAS may receive a PCAP Abort message
or PCAP Position Parameter Modification message from the SRNC, according to
subclause 7.3.1.2.
If the SAS receives a PCAP Abort message it shall immediately cease
positioning attempts and return a PCAP Position Initiation Response message to
the SRNC carrying any location estimate already obtained or a Position
Initiation Failure message containing a cause of failure indication. If the
SAS receives a PCAP Postion Activation Failure message, the SAS may either
terminate positioning as for receipt of a PCAP Abort or continue the
positioning attempt using the same or other positioning methods, e.g. if
permitted by the QoS response time requirement. If the SAS receives a PCAP
Position Parameter Modification message, the SAS shall take the received
information into account in either performing ongoing positioning (e.g.
reconfigure LMUs for U-TDOA) or invoking new positioning (e.g. use new serving
cell to provide A-GPS timing assistance).
If the SAS is unable to accept or continue processing a PCAP Position
Initiation Request from the SRNC due to capacity constraints or equipment
failure, a PCAP Position Initiation Failure message shall be sent to the SRNC
on the Iupc interface carrying an appropriate cause of the failure indication.
## 7.4 Radio interface timing procedures
The Radio Interface Timing determination system consists of functions in LMUs
in the SRNC, and in the SAS for networks that include an SAS. The system runs
continuously offering cell timing information for UE Positioning.
### 7.4.1 LMU Functions
The Radio Interface Timing functionality in the CRNC associated LMU should be
capable of performing the following functions:
\- The LMU performs necessary radio interface measurements from signals
transmitted by Node Bs;
\- If the LMU contains a common reference clock, e.g. GPS TOW, it time stamps
reception of Node B signals by performing measurements of UTRAN GPS timing of
cell frames;
\- If there is no reference clock available, the LMU may make SFN-SFN Observed
Time Difference or measurements, i.e. measures the time difference between
arrival of SFNs from neighbouring Node Bs and a reference Node B;
\- The LMU may perform some processing of measurements, like averaging and
filtering, using parameters delivered to it, or in their absence using default
settings.
### 7.4.2 CRNC Functions
The CRNC must be capable of performing the following functions related to
Radio Interface Timing determination:
\- The CRNC sends to LMUs requests for Radio Interface Timing measurement
information;
\- The CRNC will communicate regularly with LMUs; thus, the CRNC can monitor
operation of LMUs. If a LMU fails to send Radio Interface Timing information,
the CRNC shall try to restart the LMU, and if this restarting fails, the CRNC
shall inform O&M system. CRNC can use also diagnostics messages to query the
status of LMUs;
\- The CRNC receives Radio Interface Timing measurement results from LMUs;
\- The CRNC stores or queries extra information required for Node B
synchronization determination, like Node B and LMU coordinates, Node B
identity information;
\- The CRNC determines synchronization differences between different downlink
signals using LMU measurements and other information;
\- Synchronization information is delivered for UE Positioning purposes.
### 7.4.3 LMU-CRNC Interactions
The request for Radio Interface Timing measurement information from the CRNC
to a LMU contains the following parameters:
\- Measurement type. This indicates whether the CRNC wants the LMU to perform
UTRAN GPS timing of cell frames or SFN-SFN Observed Time Difference;
\- Measurement result reporting frequency. This indicates how often the LMU
should send Radio Interface Timing measurement results;
\- Measurement duration. This indicates how long the LMU should make
measurements and report results;
\- Instructions about filtering of raw measurement data;
\- Instructions about Primary CPICH signals to be measured. The LMU unit can
measure autonomously a certain number of most strongly received signals.
Another possibility is that the CRNC tells which Node B signals it should
measure;
\- In the SFN-SFN Observed Time Difference case, which common Primary CPICH
the LMU should use as a reference in the measurements;
\- Instruction of how the measurement quality should be reported.
In case a SFN-SFN Observed Time Difference measurement was requested by the
CRNC, the LMU returns the following information to CRNC:
\- Identity of the Node B at which the associated LMU is residing;
\- Primary CPICH info of the measured signals;
\- SFN-SFN observed time difference between neighbour cells and reference
cell;
\- Identity of the neighbour cells;
\- SFN-SFN drift between neighbour cells and reference cell;
\- Time stamp of the measurement (e.g. SFN);
\- Accuracy of the measurement.
In case a UTRAN GPS timing of cell frames measurement was requested by the
CRNC, the LMU returns the following information to the CRNC:
\- Cell id of the measured cell;
\- SFN;
\- Time stamp (e.g. GPS TOW) of the SFN;
\- Node B clock drift;
\- Accuracy of the measurement.
# 8 Cell ID and Enhanced Cell ID based positioning methods
The Cell ID and Enhanced Cell ID based positioning method can work in either
the RNC centric mode or in an SAS centric mode where the SAS has control over
the positioning procedures.
This subclause outlines the procedures for Cell ID and Enhanced Cell ID
positioning methods. Subclause 8.1 provides procedures for the determination
of the cell ID depending on the operational status of the target UE. Subclause
8.2 provides a procedure for the mapping of the cell ID to a corresponding SAI
to be returned to the LCS application in the CN. Subclause 8.3 provides
additional information on other Enhanced Cell ID methods.
In the RNC centric Cell ID based method, the SRNC determines the
identification of the cell providing coverage for the target UE and may
request additional UE and/or UTRAN measurements for Enhanced Cell ID methods.
The general flow to determine the cell ID and UE and/or UTRAN measurements for
Enhanced Cell ID methods is shown in figure 8.1. For Enhanced Cell ID methods,
the SRNC may request measurements either from the Node B(s) (e.g., RTT, Rx
Timing Deviation, Angle of Arrival) or from the target UE using RRC
measurement procedure (e.g., pathloss, CPICH RSCP, CPICH Ec/No). The available
measurements for Enhanced Cell ID are described in Section 8.3. If the
location request from the CN is a request for periodic reporting, the general
procedure may be repeated and UTRAN sends an LCS response one reporting
interval after the previous LCS response message until the desired amount of
reports is attained, or until the procedure is cancelled by UTRAN or CN.
Figure 8.1: RNC Centric, Cell ID and Enhanced Cell ID Based Methods
In the SAS centric mode the request for a Cell ID or Enhanced Cell ID based
position may be originated by an associated SAS via a PCAP Postion Activation
Request message on the Iupc interface as discussed in subclause 6.6.5.1.3. In
this case the Cell ID and other measurements for Enhanced Cell ID would be
provided to the SAS in a PCAP Position Activation Response message as shown in
figure 8.2.
For periodic reporting, the SAS may continue to invoke Cell ID or Enhanced
Cell ID based position via PCAP Position Activation Request messages and the
SAS sends the periodic location reports to the SRNC in PCAP Position Periodic
Result messages until the desired amount of reports is attained (or until the
procedure is cancelled by UTRAN or CN) as shown in Figure 8.2. The final
location estimate may be provided to the SRNC either in a PCAP Position
Periodic Result or in a PCAP Position Initiation Response message, as
described in subclause 6.6.5.1.3.
Figure 8.2: SAS Centric, Cell ID and Enhanced Cell ID Based Methods
## 8.1 Cell ID determination
In order for the SRNC to determine the cell ID when an UE Positioning request
is received, additional operations may be needed depending on the operational
status of the UE.
When the LCS request is received from the CN the SRNC checks the state of the
target UE. If the UE is in a state where the cell ID is available, the target
cell ID is chosen as the basis for the UE Positioning. In states where the
cell ID is not available, the UE is paged, so that SRNC can establish the cell
with which the target UE is associated. The SRNC may also map the cell ID to a
corresponding SAI to match the service coverage information available in the
CN.
The cell ID based method shall determine the position of the UE regardless of
the UE RRC mode (i.e. connected or idle).
### 8.1.1 UE Cell ID is not known
For UE for which the cell ID is not known at the time the UE Positioning
request is received at the SRNC, the UE may be paged to locate its current
cell ID. If the UE is in an idle mode and there is a need for it to be paged,
then the paging shall be initiated by the CN. If the UE is in URA_PCH state
the paging may be initiated by the SRNC in UTRAN. For example, the UE can be
forced to perform a transition to a Cell_FACH state to define the cell ID of
its current cell.
If the UE is in an idle mode, or in a RRC connected state when there is a need
to page for the UE to obtain the cell ID, the CN may initiate paging,
authentication and ciphering, as specified in [13].
Alternatively, the cell ID may be determined as the one that was used during
the last active connection to the UE. In the case the UE is not reachable, the
last known position should include the age of location field.
### 8.1.2 UE Cell ID is known
#### 8.1.2.1 UE not in Soft handover
The cell ID may be determined as the cell that is providing an active
connection for the UE at the time of receiving the UE Positioning request at
the SRNC.
#### 8.1.2.2 UE in Soft handover
In order for the SRNC to provide the geographical co-ordinates of a target UE
in soft handover, the SRNC combines the information about all cells associated
with the UE.
In soft handover, the UE may have several signal branches connected to
different cells, reporting different cell IDs. A reference cell ID may be
determined by the SRNC based on the coverage area of each cell. The reference
cell ID may be selected based on one or more of the following principles:
\- the cell ID may be selected based on the parameters defining the quality of
the received signal branches. That is, the cell ID with the best quality
signal branch is selected as the reference cell ID;
\- the cell ID may be selected that was used during connection set-up between
the UE and the serving Node B;
\- the cell ID of the cell most recently associated with the UE may be
selected;
\- the cell ID of the latest \"new\" cell that the UE has started to receive,
but has not yet been handed over to may be selected;
\- the cell ID may be selected as the cell to which UE has the shortest
distance (to the Node B site);
\- the cell ID may be selected as the cell that provides an active connection
for the UE at the time of receiving the UE Positioning request at the SRNC.
The selection may also be based on RTT measurements, power levels and received
signal strengths in UE and related Node B or LMU.
Other relevant mechanisms such as IPDL or SSDT power control should also be
taken into account when applying the cell ID selection procedure for UE in a
soft handover mode.
## 8.2 Mapping the Cell ID to Geographic Co-ordinates or a Service Area
A UTRAN cell ID should be mapped to geographical coordinates or a SAI before
being sent from UTRAN to the CN. The Service Area Identifier may include one
or several cells. The mapping may be accomplished either in the SRNC, in a
Network Management System, including Network Management Unit or by co-
operation of various access network elements.
The CN may request the geographical co-ordinates or the SAI, or both for the
target UE. The SAI may be used for routing of corresponding Emergency calls,
or for CAMEL services to correspond to the usage of Cell ID in the core
network of GSM. However, the MSC shall not send the Service Area Identity to
GMLC.
Although the mapping of the cell(s) associated with the target UE into
geographical co-ordinates by the SRNC is not standardised, the response to the
CN Location request with geographical co-ordinates shall be as defined in
[11].
In order to determine a cell coverage estimate and to map it to the
geographical coordinates or Service Area parameter Identity, the SRNC may use
parameters such as the best reference signal, RTT in FDD [15] or Rx Timing
Deviation [16] and knowledge of the UE timing advance in TDD, as well as
antenna beam direction parameters.
Alternatively, the service area coverage of a cell may be determined by using
a reference signal power budget. Based on the reference signal power budget it
is possible to obtain, for example, the Node B transmitted power, isotropic
path loss, coverage threshold at coverage area border for a given location
probability, and a cell radius for an indoor and outdoor coverage.
The SRNC may use a reference signal link budget based cell radius estimate, in
conjunction with the cell identifier, to make a coverage estimation for the
cell(s) related to the target UE.
Additionally, the SRNC may compare the received power levels with the power
budget, whereby more accurate information of the position of the UE may be
provided.
Also, the interaction between neighbouring cell coverage areas may be used to
determine a more exact UE Positioning.
## 8.3 Enhanced Cell ID Methods
Techniques which use additional UE and/or UTRAN radio resource related
measurements are defined under Enhanced Cell ID. Measurements for these ECID
methods may include:
UE measurements:
\- UE Rx-Tx Time Difference (FDD);
\- pathloss;
\- CPICH RSCP (FDD);
\- CPICH Ec/No (FDD);
\- Timing Advance (TDD).
UTRAN measurements:
\- RTT (FDD);
\- Rx Timing Deviation (TDD);
\- Angle of Arrival (1.28 Mcps TDD).
Various techniques exist to use these measurements to estimate the location of
the target UE. The specific techniques are beyond the scope of this
specification. Examples of other Enhanced Cell ID method include the
following:
### 8.3.1 Cell-ID with RTT
Cell-ID with Round Trip Time measurements:\ This variant uses in addition
NodeB measurements of the signal Round-Trip-Time (RTT). These measurements can
be made for all NodeBs in the active set. If RTT measurements to several
geographically dispersed NodeBs are available, the UE location may be found
via trilateration. The RTT measurements may be complemented by the UE
measurement of the Rx-Tx Time Difference Type 1 and/or Type 2. In case of TDD
mode, the distance measurement may be based on RX Timing Deviation and/or
Timing Advance.
### 8.3.2 Cell-ID with Pathloss and Related Measurements
Cell-ID and Pathloss related measurements:\ This variant uses in addition
several UE measurements for the serving and neighboring cells related to
pathloss or SNR. UE measurements which could be used include:
\- Pathloss (as defined in [18] subclause 10.3.7.3);
\- CPICH RSCP (FDD);
\- CPICH Ec/N0 (FDD).
These measurements may be used to obtain distance related information, or the
measurements may be used for statistical modeling approaches, etc.
#### 8.3.2.1 RF Pattern Matching (RFPM)
The RF Pattern Matching positioning method is based on radio link measurements
collected from the network and/or the UE. The method relies on predictions or
models of the radio environment against which it performs an algorithmic
comparison of the measurements to determine a best match estimation of the
UE's location. RFPM may utilize measurements other than the pathloss
measurements noted above.
### 8.3.3 Cell-ID with Angle of Arrival
Cell-ID with Angle-Of-Arrival (AOA) measurements (1.28 Mcps TDD only):\ This
variant uses NodeB angle-of-arrival measurements, usually together with
distance related measurements obtained via timing advance to estimate the UE
location.
# 9 OTDOA positioning method
The primary standard OTDOA measurement is the \"SFN-SFN observed time
difference\" observed at the UE (see [15] and [16]). These measurements,
together with other information concerning the surveyed geographic position of
the transmitters and the RTD of the actual transmissions of the downlink
signals may be used to calculate an estimate of the position and optionally,
the velocity of the UE. Each OTDOA measurement for a pair of downlink
transmissions describes a line of constant difference (a hyperbola (see note
1)) along which the UE may be located. The UE\'s position is determined by the
intersection of these lines for at least two pairs of Node Bs. The accuracy of
the position estimates made with this technique depends on the precision of
the timing measurements, the relative position of the Node Bs involved (see
note 2), and is also subject to the effects of multipath radio propagation.
This is illustrated in the figure 9.1.
NOTE 1: This is really a figure in three dimensions, a hyperboloid. For
convenience here, this will be simplified to the hyperbola representing the
intersection of this surface with the surface of the earth. For location
service in three dimensions the hyperboloid must be considered.
NOTE 2: The geometry of the Node B positions may affect the accuracy of the
position and optional velocity estimates. The best results are when the Node
Bs equally surround the UE. If they do not, there is a reduction in accuracy,
which is sometimes termed the Geometric Dilution of Position (GDP).
The primary OTDOA measurements (made by the UE) are sent to the SRNC. These
measures are sent via signaling over the Uu, [ ]{.underline} Iub (and Iur)
interfaces between the UE and the SRNC. In networks with a SAS, the SRNC may
forward the measurement results over the Iupc interface to the SAS. The
calculation function makes use of the measurements, the known positions of the
transmitter sites and the RTD of the transmissions to estimate the UE\'s
position.
Figure 9.1: OTDOA Positioning Method
The OTDOA method may be operated in two modes: UE-assisted OTDOA and UE-based
OTDOA. The two modes differ in where the actual position calculation is
carried out.
In the _UE-assisted_ mode, the UE measures the difference in time of arrival
of several cells and signals the measurement results to the network, where the
SRNC or the SAS carries out the position calculation.
In the _UE-based_ mode, the UE makes the measurements and also carries out the
position calculation, and thus requires additional information (such as the
position of the measured Node Bs) that is required for the position
calculation.
The signalling requirements for the two OTDOA modes are described in subclause
9.6. [ ]{.underline} As the UE Positioning involves measurements, there is
always uncertainty in the results. Physical conditions, errors and resolution
limits in the apparatus all contribute to uncertainty. To minimise the
uncertainty in the UE Positioning result, it is important that as many
measurements of OTDOA (and assistance data as RTT in FDD and Rx Timing
Deviation in TDD) as are possible for a UE are provided to the UE. Thus it is
important that the standard UE Positioning method not be restricted to rely on
a single measure. The UE thus provides SFN-SFN observed time difference
measurements for as many cells as it can receive. The cells to be measured
shall include those in the active set and the monitored set.
In order to support the OTDOA method, the positions of the UTRAN transmitters
needs to be accurately known by the calculation function in SRNC or SAS (for
UE-assisted method) or UE (for UE-based method). This information may be
measured by appropriate conventional surveying techniques (see note 3). The
surveyed position should be the electrical centre of the transmitting antenna
(and not the position of the radio equipment building). The use of antenna
diversity, beamforming or beam steering techniques may cause the effective
antenna position to change with time and this information is also needed to
perform calculations. The methods of measuring the position of the UTRAN
transmitters are outside the scope of the present document.
NOTE 3: These surveying methods may, for example, make use of a GPS receiver.
In order to support the OTDOA method, the RTD of the DL transmissions must
also be known to perform the calculation. If the UTRAN transmitters are
unsynchronised, the RTD will change over time as the individual clocks drift.
Thus, RTD estimations may need to be made regularly and the calculation
function updated appropriately.
One convenient method is to make use of an LMU at a fixed position. This unit
performs timing measurements (e.g. UTRAN GPS timing of cell frames or SFN-SFN
Observed Time Difference) of all the local transmitters. The CRNC then may
convert these measures into the actual (absolute) relative time difference for
each of the transmitters by making use of the known position of the LMU and
the transmitters.
In some conditions a sufficient number of cells may not be available for
measure at the UE. This may occur, for example, if the UE is located quite
close to the UTRAN transmitter and its receiver is blocked by the strong local
transmissions. This is referred to as the \"hearability\" problem.
## 9.1 Use of Idle Periods
Location based services needs the support of physical layer as a prerequisite,
so that the measurements required for the UE position, and optional velocity
calculation can be carried out. In UTRAN there are several factors that must
be taken into account while considering the physical layer procedures related
to location services:
\- hearability: a basic consequence of a CDMA radio system is that a terminal
near its serving Node B cannot hear other Node Bs on the same frequency. In
order to calculate its position the UE should be able to receive at least
three Node Bs. To facilitate this some special means are required;
\- asynchronous network causes significant uncertainty to the time-difference-
of-arrival (TDOA) measurements. To compensate for the effects of this, the
relative time difference (the synchronicity) between Node B transmissions must
be measured, and used for correcting OTDOA measurement;
\- capacity loss: signalling related to position calculation may take capacity
from other services. This capacity loss should be minimised.
Based on the results in [29] a solution for the above mentioned hearability
problem is the IPDL method. In this method each Node B ceases its transmission
for short periods of time (idle periods). Therefore the Node B is configured
appropriately by the CRNC using the NBAP protocol [22]. During an idle period
of a Node B, terminals within the cell can measure other Node Bs and the
hearability problem is reduced. The UEs are made aware of the occurrences of
IPDLs by using RRC signalling over the Uu interface [18]. Also, during idle
periods the real time difference measurements can be carried out. Because the
IPDL method is based on downlink the location service can be provided
efficiently to a large number of terminals simultaneously.
The specification and operation of the IPDL technique are provided in [14] and
[26].
## 9.2 Relative Time Difference (RTD)
In order to calculate the estimate of the position of the UE, the calculation
function needs to know:
\- the OTDOA measurements;
\- the surveyed geographic positions of the Node Bs that have had their
signals measured; and
\- the actual relative time difference between the transmissions of the Node
Bs at the time the OTDOA measurements were made.
The accuracy of each of these measurements contributes to the overall accuracy
of the position estimate. The measurement of the RTD is described in the
following.
There are several approaches to determining the RTD. One is to synchronise the
transmissions of Node B. In this technique the RTD are known constant values
(see NOTE) that may be entered in the database and used by the calculation
function when making a position estimate. The synchronisation must be done to
a level of accuracy of the order of tens of nanoseconds (as 10 nanoseconds
uncertainty contributes 3 metres error in the position estimate). Drift and
jitter in the synchronisation timing must also be well controlled as these
also contribute uncertainty in the position estimate. Synchronisation to this
level of accuracy is currently only readily available through satellite based
time-transfer techniques. Generally in the TDD operating mode, the Node Bs are
synchronised.
NOTE: The transmission times may all be aligned to a common reference (such as
UTC) in which case all RTD have a common value. However, in a more general
case the transmissions may have a fixed offset with reference to UTC, and thus
the RTD values are non-zero and may be stored in the database for use by the
calculation function.
Alternatively (typically in FDD mode), Node Bs may be left to free run within
some constraint of maximum frequency error. In this scenario, the RTD will
change (slowly) with time. The rate of change will depend on the frequency
difference and jitter between Node Bs. If, for example, the maximum frequency
difference between two Node Bs is Â±10^-9^, then the start of transmission of a
10 millisecond code sequence will drift through a cycle in about 1 390 hours
(or 57 days). With this relatively slow rate of drift the measurements needed
to obtain the RTD can be performed by fixed LMUs at known positions and stored
in the database for use by the calculation function. The jitter and drift of
the individual oscillators in each Node B may cause the change of timing to
slow, remain constant or reverse direction over time. Ongoing measurements may
be made to assure the most current values are available for the calculation
function. The measurement units needed to support RTD estimation may be co-
located with the Node Bs or installed at other convenient positions in the
UTRAN coverage area, and report their results through the UTRAN signalling.
The LMUs may directly measure the SFN-SFN Observed Time Difference between
neighbouring and reference cells and return the measurements to the CRNC.
Alternatively the LMUs may measure the UTRAN GPS timing of cell frames of the
neighbouring and reference cells and return the measurements to the CRNC. If
the CRNC is not the SRNC the information is also forwarded from CRNC to SRNC.
In networks with a SAS the information may also be forwarded to the SAS.
The SRNC or SAS then uses the UTRAN GPS timing of cell frames or SFN-SFN
Observed Time Difference measurements to calculate the RTD values. The
information to be transferred in each case is listed in 7.4.3.
## 9.3 Time of Day (ToD)
If there are frequency drifts between the (unsynchronised) Node Bs, as noted
in subclause 9.2, the OTDOA measurements must be reported together with the
time-of-day they were made (timestamp). This is necessary so that the
appropriate value of the RTD may be used by the calculation function.
In order to assure less than a 20 nanosecond uncertainty in the RTD value, the
time of day must be known to better than 10 seconds (if the maximum frequency
difference between the Node Bs is Â±10^-9^ ). The method by which the ToD is
measured is the system the frame number, which provides a 10 millisecond
resolution and can be unambiguous up to 40.95 seconds.
## 9.4 Node B Synchronisation
It is preferable that the positioning methods do not require the Node B to be
synchronised. The needed level of synchronisation accuracy for UE Positioning
is not by any means straightforward to achieve. The necessary information to
obtain RTD between Node Bs can be measured by LMU (e.g. UTRAN GPS timing of
cell frames or SFN-SFN Observed Time Difference) and distributed in the
network (e.g. as broadcast information). Also, these measurements may benefit
from the IPDL option.
In the TDD operating mode the Node Bs will typically be synchronised and this
may be of assistance to the UE Positioning technique.
## 9.5 OTDOA-IPDL and OTDOA Modes
There are two modes of operation for the OTDOA-IPDL and OTDOA methods.
In the _UE-assisted_ mode, the UE measures the difference in time of arrival
of several cells and signals the measurement results to the network, where the
SRNC or SAS carries out the position calculation.
In the _UE-based_ mode, the UE makes the measurements and also carries out the
position calculation, and thus requires additional information (such as the
position of the measured Node Bs) that is required for the position
calculation. This information is provided by the System Information Broadcast.
### 9.5.1 Information to be transferred between UTRAN elements
Table 9.1 lists the required information for both UE-assisted and UE-based
modes that may be sent from UTRAN to UE. The required information can be
signalled to the UE either in a broadcast channel or partly also as dedicated
signalling.
Table 9.1: Information to be transferred from UTRAN to UE (\'Yes\' =
information required, \'No\' = Information not required)
+------------------------------------------+--------------+----------+ | Information | UE- assisted | UE-based | +------------------------------------------+--------------+----------+ | Intra frequency Cell Info (neighbour | Yes | Yes | | list) | | | +------------------------------------------+--------------+----------+ | Ciphering information for UE Positioning | No | Yes | | (see note 1) | | | +------------------------------------------+--------------+----------+ | Measurement control information (idle | Yes | Yes | | period locations) | | | +------------------------------------------+--------------+----------+ | Sectorisation of the neighbouring cells | No | Yes | +------------------------------------------+--------------+----------+ | Measurements results needed for RTD | No | Yes | | values for Cells mentioned at Intra | | | | frequency Cell Info | | | +------------------------------------------+--------------+----------+ | RTD accuracy | No | Yes | +------------------------------------------+--------------+----------+ | Measured roundtrip delay for primary | No | Yes | | serving cell | | | +------------------------------------------+--------------+----------+ | Geographical position of the primary | No | Yes | | serving cell | | | +------------------------------------------+--------------+----------+ | Relative neighbour cell geographical | No | Yes | | position | | | +------------------------------------------+--------------+----------+ | Accuracy range of the geographic | No | Yes | | position values | | | +------------------------------------------+--------------+----------+ | IPDL parameters | Yes | Yes | +------------------------------------------+--------------+----------+ | IPDL-Alpha parameter for Open Loop Power | Yes | Yes | | Control when using IPDLs in TDD (see | | | | note 2) | | | +------------------------------------------+--------------+----------+ | Maximum Power increase the UE may use | Yes | Yes | | when using IPDLs in TDD (see note 2) | | | +------------------------------------------+--------------+----------+ | NOTE 1: The idea behind UE Positioning | | | | specific ciphering information is e.g. | | | | that the operator can sell information | | | | that the UE needs for calculating its | | | | position. For reference in the GSM world | | | | see [4]. | | | | | | | | NOTE 2: These parameters are not | | | | required for 1.28 Mcps TDD in this | | | | release. | | | +------------------------------------------+--------------+----------+
When IPDLs for 3.84/7.68 Mcps TDD are applied and the IPDLs occur in the slot
carrying the PCCPCH, a special alpha parameter needs to be signalled from SRNC
to the UE in order to take the impact of the IPDLs on the Open Loop Power
Control into account. Additionally the UE shall not increase the transmit
power by a certain value between an IPDL slot and the next slot carrying the
PCCPCH when IPDLs are applied within a cell. OTDOA for 1.28 Mcps TDD is based
on DwPTS and so these requirements do not apply.
The information that may be signalled from UE to SRNC is listed in table 9.2.
Table 9.2: Information to be transferred from UE to SRNC
* * *
Information UE- assisted UE-based OTDOA measurement results Yes No OTDOA
measurement accuracy Yes No UE geographical position No Yes Position accuracy
indicator (based on the signalled and measurement accuracies) No Yes
* * *
Table 9.3 shows the information that may be transferred from Node B to its
CRNC. If the CRNC is not the SRNC the information is also forwarded from CRNC
to SRNC.
Table 9.3: Information to be transferred from Node B/LMU to CRNC and between
RNCs
* * *
Information UE assisted UE based Measured UTRAN GPS timing of cell frames or
SFN-SFN Observed Time Difference values for Cells mentioned at Intra frequency
Cell Info Yes Yes UTRAN GPS timing of cell frames or SFN-SFN Observed Time
Difference accuracy Yes Yes
* * *
Table 9.4 shows the information that may be transferred from CRNC to Node B.
If the CRNC is not the SRNC the information may also be sent from CRNC to
SRNC.
Table 9.4: Information to be transferred from CRNC to Node B/LMU and between
RNCs
* * *
Information UE assisted UE based IPDL parameters Yes Yes
* * *
Table 9.5 shows the information that may be transferred between RNCs.
Table 9.5: Information to be transferred between RNCs
* * *
Information UE assisted UE based Geographical position of the primary serving
cell Yes Yes Relative neighbour cell geographical position Yes Yes Accuracy
range of the geographic position values Yes Yes IPDL-Alpha parameter for Open
Loop Power Control when using IPDLs in 3.84/7.68 Mcps TDD Yes Yes Maximum
Power the UE may use when using IPDLs in 3.84/7.68 Mcps TDD Yes Yes
* * *
## 9.6 OTDOA network positioning procedures
OTDOA may be selected by the SRNC as the method to be used on receipt of an
LCS positioning request from the CN or, optionally, when the SRNC receives a
PCAP Position Activation Request message indicating the OTDOA positioning
method from a SAS that is configured to select the positioning method. In the
SAS initiated case the OTDOA measurement information will be returned to the
SAS in a PCAP Position Activation Response message, or -- if periodic
reporting was requested -- in one or more PCAP Position Periodic Report
messages as discussed below.
### 9.6.1 RNC based selection of OTDOA
The following diagram illustrates the operations for the OTDOA method for UE
Positioning when the request for positioning information is initiated by an
LCS application from the CN.
This illustration only includes the information flow related to UE Positioning
operations and does not indicate other operations that may be required, for
example, to establish a signalling connection between the UE and the SRNC.
Also not illustrated is the signalling used to initiate the location service
request from the CN or a UE-based application.
Figure 9.2: OTDOA Signalling Operations
> 1\. The operation begins with an authenticated request for positioning
> information about a UE from an application in the CN being received at the
> SRNC. The request from the CN may be a request for on-demand or periodic
> reporting. The SRNC considers the request and the UTRAN and UE capabilities.
2\. The SRNC requests from the UE the measurement of the OTDOA for the signals
in the active and neighbourhood sets. These measurements are made while the UE
is in connected mode CELL_DCH state. If the location request from the CN in
step 1 contained periodic reporting information (reporting interval and amount
of reports), the SRNC may at this step request periodic OTDOA measurement
reporting from the UE according to subclause 6.6.4.1.
3\. If it is considered advantageous to do so, the SRNC requests the UE Rx-Tx
timing difference (FDD only) or UE timing advance, T~ADV,~ (1.28 Mcps TDD)
information from the UE. If the location request from the CN in step 1
contained periodic reporting information (reporting interval and amount of
reports), the SRNC may at this step request periodic measurement reporting
from the UE according to subclause 6.6.4.1.
4\. The UE returns the OTDOA measures to the SRNC. The SRNC receives the OTDOA
information and co-ordinates obtaining other information to support the
calculation request.
5\. The UE returns the UE Rx-Tx timing difference (FDD only) or UE timing
advance, T~ADV,~ (1.28 Mcps TDD) information to the SRNC, together with a time
stamp of when the value was obtained.
6\. If there are insufficient OTDOA measures, or it is otherwise considered
advantageous to do so, the SRNC requests the RTT (in FDD) or Rx timing
deviation (in TDD) and/or angle of arrival (in 1.28 Mcps TDD) measure for the
UE from the serving Node B.
7\. In FDD, the SRNC requests the RTD values for the associated transmitters
from the associated database. These may be stored locally if they are constant
over time, otherwise they must be updated to represent the RTD timing at the
time-of-day the OTDOA measurements were made.
8\. The Node B returns the RTT (in FDD) or Rx Timing Deviation (in TDD) and/or
angle of arrival (in 1.28 Mcps TDD) measures to the SRNC if they were
requested.
> 9\. The SRNC performs a position, and optional velocity calculation using
> the OTDOA, RTD and, if necessary, RTT (in FDD) or Rx timing deviation and UE
> timing advance (in TDD) information and angle of arrival information (1.28
> Mcps TDD). The calculation may include a co-ordinate transformation to the
> geographic system requested by the application. The position estimate
> includes the position and the estimated accuracy of the results. The
> optional velocity estimate may also include an estimated accuracy. In
> networks that include the SAS, the SAS may perform the position calculation
> and then pass the position estimate to the SRNC.
10\. The SRNC passes the position estimate to the CN including, if available,
the positioning method (or the list of the methods) used to obtain the
position and optional velocity estimate. If the CN has requested an accuracy
for the position estimate, the Location response shall include an indication
whether the position estimate satisfies the requested accuracy or not.
11\. If periodic reporting was requested form the CN in step 1, and steps 2 or
3 requested periodic UE reporting according to subclause 6.6.4.1, steps 4 to
10 are repeated. If periodic reporting was requested form the CN in step 1,
but the SRNC does not request periodic UE reporting at steps 2 or 3, the SRNC
repeats steps 2 to 10. The SRNC sends a location estimate to the CN one
reporting interval after the previous location estimate until the desired
amount of reports has been attained (or until the procedure is cancelled by
UTRAN or CN).
### 9.6.2 SAS based selection of OTDOA
The following describes the signalling for the optional selection of the OTDOA
positioning procedure by the SAS when the CN has requested UE positioning.
Figure 9.3: OTDOA Signalling Operations for SAS based positioning method
selection
> 1\. The operation begins with an authenticated request for positioning
> information about a UE from an application in the CN being received at the
> SRNC. The request from the CN may be a request for on-demand or periodic
> reporting. The SRNC considers the request and the UTRAN and UE capabilities.
>
> 2\. The SRNC forwards the information contained in the RANAP Location
> Reporting Control message, including any periodic reporting information,
> plus the Cell ID and UE capability information to the SAS in a PCAP Position
> Initiation Request message.
>
> 3\. The SAS sends a PCAP Position Activation Request message to the SRNC
> that requests the OTDOA positioning method and may also request the UE Rx-Tx
> timing difference (FDD only) or UE timing advance, T~ADV,~ (1.28 Mcps TDD)
> information from the UE. The PCAP Position Activation Request message may
> include periodic reporting information (amount of reports and reporting
> interval).
>
> 4\. The SRNC requests from the UE the measurement of the OTDOA for the
> signals in the active and neighbourhood sets. The OTDOA measurement request
> may include a request for periodic reporting as described in subclause
> 6.6.4.1.These measurements are made while the UE is in connected mode
> CELL_DCH state.
>
> 5\. If the SAS has requested Rx-Tx timing information, the SRNC requests the
> UE Rx-Tx timing difference (FDD only) or UE timing advance, T~ADV,~ (1.28
> Mcps TDD) information from the UE. The measurement request may include a
> request for periodic reporting as described in subclause 6.6.4.1.
>
> 6\. The UE returns the OTDOA measures to the SRNC. The SRNC receives the
> OTDOA information and co-ordinates obtaining other information to support
> the calculation request.
>
> 7\. The UE returns the UE Rx-Tx timing difference (FDD only) or UE timing
> advance, T~ADV,~ (1.28 Mcps TDD) information to the SRNC, together with a
> time stamp of when the value was obtained.
>
> 8\. The SRNC forward the OTDOA measurement report information and, if
> available, the UE Rx-Tx timing measurement report information to the SAS in
> a PCAP Position Activation Response message.
>
> 9\. If there are insufficient OTDOA measures, or it is otherwise considered
> advantageous to do so, the SAS requests the RTT (in FDD) or Rx timing
> deviation (in TDD) and/or angle of arrival (in 1.28 Mcps TDD) measure for
> the UE from the serving Node B by sending a PCAP Position Activation Request
> message that requires the SRNC to execute the Cell ID positioning method
> toward the UE being positioned.
>
> 10\. In FDD, the RTD values for the associated transmitters are calculated
> and stored in the SAS based upon input from its associated LMUs.
>
> 11\. The Node B returns the RTT (in FDD) or Rx Timing Deviation (in TDD)
> and/or angle of arrival (in 1.28 Mcps TDD) measures to the SRNC if they were
> requested.
>
> 12\. The SRNC forwards Cell ID and RTT (in FDD) or Rx timing deviation and
> UE timing advance (in TDD) information and angle of arrival information
> (1.28 Mcps TDD) to the SAS in a PCAP: Position Activation Response message.
>
> 13\. The SAS performs the OTDOA based or Cell ID based position calculation.
> If periodic reporting was not requested in step 1, the SAS forwards the
> position information to the SRNC in a PCAP: Position Initiation Response
> message. If periodic reporting was requested in step 1, the SAS forwards the
> position information to the SRNC in a PCAP Position Periodic Result message.
> The calculation may include a co-ordinate transformation to the geographic
> system requested by the application. The position estimate includes the
> position and the estimated accuracy of the results. The optional velocity
> estimate may also include an estimated accuracy.
>
> 14\. The SRNC passes the position estimate to the CN including, if
> available, the positioning method (or the list of the methods) used to
> obtain the position and optional velocity estimate. If the CN has requested
> accuracy for the position estimate, the Location response shall include an
> indication whether the position estimate satisfies the requested accuracy or
> not.
>
> 15\. If periodic UE reporting was requested in step 4 or 5, the UE continues
> to send OTDOA measurements or UE Rx-Tx timing difference (FDD only) or UE
> timing advance, T~ADV,~ (1.28 Mcps TDD) information to the SRNC, together
> with a time stamp of when the value was obtained, one reporting interval
> after the previous measurement report. The SRNC forwards the OTDOA
> measurement report information and, if available, the UE Rx-Tx timing
> measurement report information to the SAS in a PCAP Position Periodic Report
> message. The SRNC may aggregate the OTDOA measurement report information and
> the UE Rx-Tx timing measurement report information, if both are received
> from the UE in separate RRC messages, into the same PCAP Position Periodic
> Report message or may send this information in two separate PCAP Position
> Periodic Report messages. Steps 9 to 12 may be repeated for each new
> position estimate, and the SAS performs OTDOA based or Cell ID based
> position calculation and forwards each new position information to the SRNC
> in a PCAP Position Periodic Result message. The SRNC passes the new position
> estimate to the CN including, if available, the positioning method (or the
> list of the methods) used to obtain the position and optional velocity
> estimate. If the CN has requested accuracy for the position estimate, the
> Location response shall include an indication whether the position estimate
> satisfies the requested accuracy or not. This step 15 is repeated until the
> desired amount of reports has been attained or the procedure is cancelled by
> the CN or UTRAN. The SAS may send the final location estimate in a PCAP
> Position Initiation Response message to the SRNC, and the SRNC forwards the
> final location information to the CN.
>
> 16\. If periodic UE reporting was not requested in step 4 or 5, but was
> requested in step 2, the SAS may repeat the steps 3 to 14 as for the first
> request until the desired amount of reports has been attained or the
> procedure is cancled by the CN or UTRAN. When repeating step 13 for the
> final request, the SAS returns the resulting final position estimate to the
> SRNC in a PCAP: Position Initiation Response message.
# 10 Network-assisted GPS positioning method
When GPS is designed to inter-work with the UTRAN, the network assists the UE
GPS receiver to improve the performance in several respects. These performance
improvements will:
\- reduce the UE GPS start-up and acquisition times; the search window can be
limited and the measurements sped up significantly;
\- increase the UE GPS sensitivity; positioning assistance messages are
obtained via UTRAN so the UE GPS can operate also in low SNR situations when
it is unable to demodulate UE GPS signals;
\- allow the UE to consume less handset power than with stand-alone GPS; this
is due to rapid start-up times as the GPS can be in idle mode when it is not
needed.
The Network-assisted GPS methods rely on signalling between UE GPS receivers
(possibly with reduced complexity) and a continuously operating GPS reference
receiver network, which has clear sky visibility of the same GPS constellation
as the assisted UEs. GPS reference receivers may be connected to the UTRAN to
enable derivation of UE assistance signals.
Figures 10.1 and 10.2 provide an example of the end-to-end call flows for UE-
assisted and UE-based positioning respectively. The SAS is an optional network
element and the call segments do not apply in a network where the UE
Positioning resides within the SRNC.
Figure 10.1: Network-assisted GPS methods -- UE-Assisted
Figure 10.2: Network-assisted GPS methods -- UE-Based
## 10.1 Timing calibration
Timing calibration is achieved by using UE or UTRAN GPS timing measurements as
specified in [15].
## 10.2 Timing assistance
The UTRAN may derive the estimated UE position using UTRAN parameters (e.g.
Cell-ID or IPDL) and may use this information, in conjunction with satellite
specific ephemeris data received from the GPS reference receiver network, to
derive the estimated times of arrival (code phases) for equivalent GPS
satellite signals received by the UE-based GPS receiver functionality. For the
UE-assisted method, the estimated code phase data may be conveyed, together
with T~UTRAN-GPS~ (as specified in [15] and [16]), from the UTRAN to the UE
using higher layer signalling. The estimated code phase data value is
uncertain to a degree depending on the accuracy of the UTRAN timing
calibration and initial position determination methods used.
Alternatively, for the UE-based method, the UE itself may derive its location
aided by assistance messages. The ephemeris data are transmitted from UTRAN to
the UE using higher layer signalling. The UE may use this information, in
conjunction with the UE\'s reference location, to derive the times of arrival
(code phases) for GPS satellite signals received by the UE-based GPS receiver
functionality.
## 10.3 GPS assistance data
The UE may receive GPS information through the UTRAN radio interface, using
higher layer signalling. Once a UE Positioning measurement is setup by the
SRNC the UE is responsible to maintain valid and up to date GPS assistance
data in order to report the requested measurement results. In case that the UE
has not sufficient assistance data or the data is out of date then the UE
should indicate it to the SRNC and additionally request for assistance data.
When the UE is unable to detect a sufficient number of satellites, the
assisted GPS method can be combined with other positioning methods. Altitude
assistance can compensate for one satellite measurement.
The assistance data signalled to the UE may include all information listed
below or a selected subset:
\- data assisting the measurements; e.g. reference time, visible satellite
list, satellite signal Doppler, code phase, Doppler and code phase search
windows. This data can be valid for a few minutes (e.g., less than 5 minutes)
or longer depending on the code phase and Doppler search window size that can
be accommodated by the UE;
\- data providing means for position calculation; e.g. reference time,
reference position, satellite ephemeris, clock corrections. Satellite
ephemeris and clock corrections data can be used for up to six hours.
NOTE: Certain types of GPS Assistance data may be derived, wholly or
partially, from other types of GPS Assistance data.
If DGPS is utilised, then differential corrections may also be transmitted. If
Selective Availability is turned off, these corrections can be valid for a few
minutes or more. The DGPS data is valid for a large geographical area, so one
centrally located reference receiver can be used to service this large region.
## 10.4 UE search
Provided that timing assistance, data assistance, and/or frequency reference
is available in the UE, they should be applied in the GPS signal search
procedure. The UE search procedure involves a three-dimensional search for a
satellite pseudorandom code, time of arrival of a signal and the associated
carrier Doppler.
\"Modulation wipe-off\" is defined here to mean a removal of the GPS
navigation data bit modulation to GPS signals received at the UE, through the
application of UTRAN timing and data assistance provided from the UTRAN to the
UE. This process allows the UE to coherently integrate received GPS signals
beyond 1 data bit period (i.e., 20 milliseconds).
## 10.5 Position determination
There are two types of network-assisted GPS methods, namely UE-based and UE-
assisted, which differ according to where the actual position and optional
velocity calculation is carried out.
Computation of the position and optional velocity fix can either be performed
in UTRAN (i.e. SRNC or SAS) for UE-assisted or in the UE for UEâ€‘based.
The UE-based method maintains a full GPS receiver functionality in the UE, and
the position and optional velocity calculation is carried out by the UE, thus
allowing stand-alone position and optionally, velocity fixes.
In the UE-assisted method, the UE employs a reduced complexity GPS receiver
functionality. This carries out the pseudorange (code phase) measurements.
These are signalled, using higher layer signalling, to the specific network
element that estimates the position of the UE and carries out the remaining
GPS operations. In this method, accurately timed code phase signalling (as
specified in [15] and [16]) is required on the downlink. If DGPS is performed
in the UE, then differential corrections must be signalled to it. On the other
hand, DGPS corrections can be applied to the final result in the network to
improve the position accuracy without extra signalling to the UE.
### 10.5.1 Information to be transferred between UTRAN elements
Table 10.1 lists information for both UE-assisted and UE-based modes that may
be sent from the network to UE. This information can be signalled to the UE
either in a broadcast channel or as dedicated signalling.
Table 10.1: Information that may be transferred from the network to UE(\'Yes\'
= information applicable \'No\' = information not applicable
* * *
Information UE-assisted UE-based Number of satellites for which assistance is
provided Yes Yes reference time for GPS (T~UTRAN-GPS~) (specified in [15] and
[16]) Yes Yes 3-d reference position (specified in [11]) No Yes ionospheric
corrections No Yes satellite ID for identifying the satellites for which
assistance data is provided Yes Yes Ephemeris & clock corrections Yes Yes UTC
offset No Yes DGPS corrections No Yes almanac data Yes Yes real-time integrity
(e.g. a list of unusable satellites) No Yes doppler (0^th^ order term) Yes No
Doppler Search Window width Yes No doppler (1^st^ order term) Yes No azimuth
Yes No elevation Yes No code phase Yes No code phase centre and search window
width Yes No
* * *
The information that may be signalled from UE to the network is listed in
table 10.2.
Table 10.2: Information that may be transferred from UE to the network
* * *
Information UE-assisted UE-based reference time for GPS (T~UE-GPS~) (specified
in [15] and [16]) Yes Yes serving cell information No Yes
Latitude/Longitude/Altitude/Error ellipse No Yes velocity estimate in the UE
No Yes satellite ID for which measurement data is valid Yes No
Whole/Fractional chips for information about the code-phase measurement Yes No
C/N~0~ of the received signal from the particular satellite used in the
measurements Yes No doppler frequency measured by the UE for the particular
satellite Yes No pseudorange RMS error Yes No multipath indicator Yes No
number of Pseudoranges Yes No
* * *
Table 10.3 shows the information that may be transferred from Node B to its
CRNC. If the CRNC is not the SRNC the information is also forwarded from CRNC
to SRNC.
Table 10.3: Information that may be transferred from Node B/LMU to CRNC and
between RNCs
* * *
Information UE-assisted UE-based reference time for GPS (T~UTRAN-GPS~)
(specified in [15] and [16]) Yes Yes
* * *
#### 10.5.1.1 Almanac data
The almanac parameters specify the coarse, long-term model of the satellite
positions and clocks. These parameters are a subset of the ephemeris and clock
correction parameters in the Navigation Model, although with reduced
resolution and accuracy. The almanac model is useful for receiver tasks that
require coarse accuracy, such as determining satellite visibility. The model
is valid for up to one year, typically. Since it is a long-term model, the
field should be provided for all satellites in the GPS constellation.
Optionally, \"SV Global Health\" information may accompany this almanac
information. This additional information is composed of the sequence of all
non-parity data bits contained in words 3-10 of page 25 of subframe 4 of the
GPS navigation message followed by the sequence of all non-parity bits
contained in words 3-10 of page 25 of subframe 5 of the GPS navigation
message. The following GPS navigation message fields are excluded when
constructing these sequences: \"Data ID\", \"SV (Page) ID\", and \"t\".
#### 10.5.1.2 DGPS corrections
In order to allow a UE to estimate its position more accurate, biases in the
pseudorange measurements may be provided to the UE.
**Status/Health**
This information indicates the status of the differential corrections
contained in the message.
**IODE**
This is the sequence number for the ephemeris for the particular satellite.
The UE can use this information to determine if new ephemeris is used for
calculating the corrections that are provided in the broadcast message. This
eight-bit IE is incremented for each new set of ephemeris for the satellite
and may occupy the numerical range of [0, 239] during normal operations. More
information about this field can be found from [24].
**User Differential Range Error** **(UDRE)**
The UDRE provides an estimate of the uncertainty (1-Ïƒ) in the corrections for
the particular satellite. The value in this field shall be multiplied by the
UDRE Scale Factor in the common Corrections Status/Health field to determine
the final UDRE estimate for the particular satellite. More information about
this field can be found from [24].
**Pseudo-Range Correction** **(PRC)**
The PRC indicates the correction to the pseudorange for the particular
satellite at the GPS Reference Time, _t_ 0\. The PRC definition here is
different from the one given in [24].
**Pseudo-Range Rate Correction** **(PRRC)**
This information indicates the rate-of-change of the pseudorange correction
for the particular satellite, using the satellite ephemeris identified by the
IODE IE.
#### 10.5.1.3 Ionospheric corrections
The Ionospheric Model contains information needed to model the propagation
delays of the GPS signals through the ionosphere. Proper use of these
information allows a single-frequency GPS receiver to remove approximately 50%
of the ionospheric delay from the range measurements. The Ionospheric Model is
valid for the entire constellation and changes slowly relative to the
Navigation Model.
#### 10.5.1.4 Ephemeris data and clock correction
Ephemeris data and clock corrections provide an accurate model of the
satellite positions to the UE.
#### 10.5.1.5 Real Time integrity monitor function
An Integrity Monitor (IM) function in the network should detect unhealthy
(i.e., failed/failing) satellites. Excessively large pseudo range errors, as
evidenced by the magnitude of the corresponding DGPS correction determined by
the IM, may be used to detect unhealthy satellites. Unhealthy satellites
should be detected very close to the occurrence of the satellite failure (e.g.
10 seconds) and marked in an unhealthy satellite list as unusable/bad. When
unhealthy satellites are detected, the assistance and/or DGPS correction data
should not be supplied for these satellites. Upon receiving the list of
unhealthy satellites from the SRNC, the UE shall consider the data associated
with these satellites to be invalid.
The IM function should also inform the UE of measurement quality in DGPS modes
when satellites are healthy. This can be done by computing the position of the
DGPS reference receiver using its derived pseudo ranges and differential
corrections at the IM, and differencing the IM computed position with the
known location of the DGPS reference receiver to compute a position error.
When the error in the IM computed position is excessive for solutions based
upon healthy satellites only, DGPS users should be informed of measurement
quality through the supplied User Differential Range Error (UDRE) adjusted
values based on the operation of the IM. The UE should use the measurement
quality as a factor in weighing data obtained from associated satellites in
its position calculation.
NOTE: UDRE is one of the IEs contained in the DGPS information ([19]).
The real-time Integrity Monitor function provides the following information to
a UE:
\- BadSATid;
\- UDRE value adjusted based on the measurement quality.
BadSATid is a lit of unhealthy (i.e., failed/failing) satellites. The UE shall
consider any assistance or DGPS data of these satellites as invalid.
Adjusted UDRE value reports the measurement quality of the corresponding
satellites. The UE should consider the quality while calculating its position.
#### 10.5.1.6 GPS reference time
GPS reference time may be used to provide a mapping between UTRAN and GPS
time.
**GPS TOW Assist**
This information contains several fields in the Telemetry (TLM) Word and
Handover Word (HOW) that are currently being broadcast by the respective GPS
satellites. Combining this information with GPS TOW helps the UE with time-
recovery needed to predict satellite signal.
**TLM Message**
This information contains a 14-bit value representing the Telemetry Message
(TLM) being broadcast by the GPS satellite identified by the particular SatID,
with the MSB occurring first in the satellite transmission.
**Anti-Spoof/Alert**
These information contain the Anti-Spoof and Alert flags that are being
broadcast by the GPS satellite identified by SatID.
**TLM Reserved**
These information contain the two reserved bits in the TLM Word being
broadcast by the GPS satellite identified by SatID, with the MSB occurring
first in the satellite transmission.
#### 10.5.1.7 UTC
UTC parameters may be used to provide Coordinated Universal Time to the UE.
#### 10.5.1.8 Reference Location
The Reference Location contains a 3-D location (with uncertainty) specified as
per [11]. The purpose of this field is to provide the UE with a priori
knowledge of its position in order to improve GPS receiver performance.
#### 10.5.1.9 Additional non-GPS related information
Additional non-GPS measurements performed by UTRAN or UE may be used by the
SRNC to improve the performance of the UE-assisted GPS method. This
information may be RTT in FDD or Rx Timing Deviation in TDD, UE receiving
transmitting time (UE Rx-Tx), SFN-SFN observed time difference or CPICH Ec/No.
All the additional measurements are defined in [15] and [16] and can be made
available through RRC signalling for UE measurements or NBAP signalling for
UTRAN measurements.
Furthermore, to those UE technologies requiring externally provided
sensitivity and time aiding data, some navigation bits may be sent from UTRAN
to UE for sensitivity assistance and time recovery.
## 10.6 RNC based Network Assisted GPS positioning Procedure
The diagram in Figure 10.3 and Figure 10.2 illustrate the operations for the
network assisted GPS when the request for position information is initiated by
a LCS application signalled from the Core Network. A detailed description of
the positioning procedure is given as follows. Note that the procedure is for
illustration purpose and actual implementations may vary.
Figure 10.3: RNC based Network-assisted GPS methods
1\. The operation begins with an authenticated request for positioning
information about a UE from an application in the core network being received
at the SRNC. The request from the CN may be a request for on-demand or
periodic reporting. The SRNC acts as interface between the Core Network and
the UE Positioning entities in the UTRAN. The SRNC considers the request and
the capabilities of the UE and the UTRAN. In networks that include the SAS,
the SRNC may invoke the SAS via the Iupc interface.
2\. Depending on the UE capabilities, the network sends to the UE certain GPS
assistance information. This information may include: the reference time for
GPS, the satellite IDs, the Doppler frequency, the search window and its
centre, the ephemeris and clock corrections, the almanac, and other
information specified in 10.5.1. Depending on the UE capabilities, the network
sends a request for GPS positioning to the UE. If the location request from
the CN in step 1 contained periodic reporting information (reporting interval
and amount of reports), the SRNC may at this step request periodic measurement
reporting from the UE according to subclause 6.6.4.1. If the UE has not enough
assistance data to perform the measurements, the UE should indicate it to the
SRNC and additionally request for assistance data.
For UE-based method, jump to step 8.
3\. For UE-assisted method, the SRNC may optionally request the following
information before the assistance message(s) is (are) sent to the UE: the LMU
update (see NOTE), the RTT measurements (from the Node Bs in the active set)
to compensate for the one-way propagation delays. The LMU (associated or
stand-alone) returns the information containing the time difference between
the Node B and the GPS (e.g. UTRAN GPS timing of cell frames or SFN-SFN
Observed Time Difference) to the CRNC. The Node B returns its RTT measurement
to the CRNC. If the CRNC is not the SRNC, the CRNC forwards these information
to SRNC.
4\. The network requests from the UE the measurement of GPS satellite
pseudoranges and other information specified in 10.5.1. These measurements may
be made while the UE is in RRC connected mode CELL_DCH state. The SRNC may
request SFN-SFN Observed Time Difference measurements and Rx-Tx timing
difference information from the UE to support the processing related to the
RTT measurements.
5\. The UE returns to the network the measurement of GPS satellite
pseudoranges and other information specified in 10.5.1. If requested, the UE
returns to the SRNC SFN-SFN measurements and the Rx-Tx time difference
information, together with a time stamp of when these values were obtained.
6 The UE position and optional velocity is calculated in the network.
7\. If there is insufficient information to yield a UE positioning estimate,
the SRNC may start a new process from step 3.
8\. In case of UE based method, UE returns the position and optional velocity
estimate to the SRNC. This estimate includes the position and optionally,
velocity, the estimated accuracy of the results and the time of the estimate.
9\. In networks that include the SAS, the SAS passes the position estimate to
the SRNC.
10\. The SRNC passes the position and optional velocity estimate to the CN
including, if available, the positioning method (or the list of the methods)
used to obtain the position estimate. If the CN has requested an accuracy for
the position estimate, the Location response shall include an indication
whether the position estimate satisfies the requested accuracy or not.
11\. If periodic reporting was requested form the CN in step 1, and the SRNC
requested periodic UE reporting in step 2 according to subclause 6.6.4.1,
steps 5 to 10 are repeated and the UE reports new measurements one reporting
interval after the previous measurement report. If periodic reporting was
requested form the CN in step 1, but the SRNC does not request periodic UE
reporting in step 2, the SRNC repeats steps 2 to 10. The SRNC sends a location
estimate to the CN one reporting interval after the previous location estimate
until the desired amount of reports has been attained (or until the procedure
is cancelled by UTRAN or CN).
NOTE: The LMU update (of the time difference between the GPS and the Node B)
may be performed on a per-request basis (with respect to each UE Positioning
request) or be performed timely that is independent of individual UE
Positioning request. The latter is preferable when there is a large volume of
UE Positioning requests.
## 10.7 SAS initiated Network Assisted GPS positioning Procedure
The following describes the signalling for the optional initiation of the
network assisted GPS positioning procedure by the SAS.
Figure 10.4: Network-assisted GPS methods when initiated by the SAS
> 1\. The operation begins with an authenticated request for positioning
> information about a UE from an application in the core network being
> received at the SRNC. The request from the CN may be a request for on-demand
> or periodic reporting. The SRNC acts as interface between the Core Network
> and the UE Positioning entities in the UTRAN.
>
> 2\. The SRNC sends parameters received in the location request, including
> any periodic reporting information, together with the Cell ID and UE
> capability information to the SAS in a PCAP: Position Initiation Request
> message via the Iupc interface.
>
> 3\. Depending on the UE capabilities, the SAS initiates an A-GPS positioning
> procedure by sending a PCAP: Position Activation Request message containing
> A-GPS assistance data to the SRNC via the Iupc interface. The PCAP Position
> Activation Request message may include periodic reporting information
> (number of reports and reporting interval). The SAS may provide all or some
> A-GPS assistance data needed by the UE. This may include timing assistance
> data that the SAS may have obtained from associated LMUs or from another
> source (e.g. GPS Reference Network or measurements from UEs previously
> positioned by the SAS using A-GPS).
>
> 4\. The SRNC forwards to the UE the A-GPS positioning request received from
> the SAS using RRC signalling. The SRNC also forwards in the RRC signalling
> message(s) the SAS request for either A-GPS measurements, in the case of UE
> assisted A-GPS, or an A-GPS position and optional velocity estimate, in the
> case of UE based A-GPS. The RRC signalling may include a request for
> periodic reporting as described in subclause 6.6.4.1 if this was received in
> step 3. For a description of UE based A-GPS, jump to step 9.
>
> 5\. For UE assisted A-GPS, the SRNC requests from the UE the measurement of
> GPS satellite pseudoranges and other information specified in subclause
> 10.5.1. These measurements may be made while the UE is in RRC connected mode
> CELL_DCH state. The SRNC may request SFN-SFN Observed Time Difference
> measurements and Rx-Tx timing difference information from the UE to support
> the processing related to the RTT measurements.
>
> 6\. The UE returns to the SRNC the measurement of GPS satellite pseudoranges
> and other information specified in 10.5.1. If requested, the UE returns to
> the SRNC SFN-SFN measurements and the Rx-Tx time difference information,
> together with a time stamp of when these values were obtained.
>
> 7\. The information obtained in step 6 is sent from the SRNC to the SAS in a
> PCAP: Position Activation Response message.
>
> 8\. The SAS calculates the UE position and optional velocity. If periodic
> reporting was not requested in step 2, the SAS returns the UE position and
> optional velocity to the SRNC in a PCAP: Position Initiation Response
> message. If periodic reporting was requested in step 2, the SAS forwards the
> position information to the SRNC in a PCAP Position Periodic Result message.
> The PCAP Position Initiation Response or PCAP Position Periodic Result
> message may include the positioning method(s) used and an indication of
> whether the position estimate satisfies the requested accuracy or not.
>
> 9\. In case of UE based method, the UE returns the position and optional
> velocity estimate to the SRNC via RRC signalling. The SRNC forwards the
> position and optional velocity estimate to the SAS in a PCAP: Position
> Activation Response message. This estimate includes the position and
> optionally, velocity, the estimated accuracy of the results and the time of
> the estimate.
>
> 10\. The SAS may verify the UE position estimate received in step 9 (e.g.
> using cell ID information). If periodic reporting was not requested in step
> 2, the SAS returns the resulting estimate to the SRNC in a PCAP: Position
> Initiation Response message. If periodic reporting was requested in step 2,
> the SAS forwards the position estimate to the SRNC in a PCAP Position
> Periodic Result message. The PCAP Position Initiation Response or PCAP
> Position Periodic Result message may include the positioning method(s) used
> and an indication of whether the position estimate satisfies the requested
> accuracy or not.
>
> 11\. If there is insufficient information to yield a UE positioning estimate
> satisfying the requested accuracy, the SAS may start a new process from step
> 3.
>
> 12\. The SRNC passes the position estimate received from the SAS to the CN
> including the positioning method (or the list of the methods) used to obtain
> the position estimate. If the CN has requested accuracy for the position
> estimate, the Location response shall include an indication whether the
> position estimate satisfies the requested accuracy or not.
>
> 13\. If periodic UE reporting was requested in step 4, the UE continues to
> send GPS measurement reports one reporting interval after the previous
> measurement report. The SRNC forward the GPS measurement report information
> to the SAS in a PCAP Position Periodic Report message. The SAS may calculate
> the UE position and optional velocity and may verify the calculated UE
> position estimate or the received UE position estimate (e.g. using cell ID
> information) and sends the position information to the SRNC in a PCAP
> Position Periodic Result message. The SRNC passes the new position estimate
> to the CN including, if available, the positioning method (or the list of
> the methods) used to obtain the position and optional velocity estimate. If
> the CN has requested accuracy for the position estimate, the Location
> response shall include an indication whether the position estimate satisfies
> the requested accuracy or not. This step 13 is repeated until the desired
> amount of reports has been attained or the procedure is cancelled by the CN
> or UTRAN. The SAS may send the final location estimate in a PCAP Position
> Initiation Response message to the SRNC, and the SRNC forwards the final
> location information to the CN.
>
> 14\. If periodic UE reporting was not requested in step 4, but was requested
> in step 2, the SAS may repeat the steps 3 to 12 as for the first request
> until the desired amount of reports has been attained or the procedure is
> cancelled by the CN or UTRAN. When repeating step 10 for the final request,
> the SAS returns the resulting final position estimate to the SRNC in a PCAP:
> Position Initiation Response message.
NOTE: An update to the SAS from an associated LMU, of the time difference
between GPS and the Node B, may be performed on a per-request basis (with
respect to each UE Positioning request) or be performed in a timely manner
that is independent of individual UE Positioning requests. The latter is
preferable when there is a large volume of UE Positioning requests.
# 11 Information storage
NOTE This clause just outlines the information that may need to be stored in
the UTRAN UE Positioning that may need to be standardised (if any).
# 12 Uplink-Time Difference Of Arrival (U-TDOA) positioning method
## 12.1 General
The U-TDOA method calculates the location of a transmitting UE by using the
difference in time of arrival of signals at different LMUs. The time required
for a signal transmitted by a UE to reach a U-TDOA capable LMU is proportional
to the length of the transmission path between the UE and the U-TDOA capable
LMU. The U-TDOA method does not require knowledge of the time the UE transmits
nor does it require any new functionality in the UE.
{width="2.1979166666666665in" height="2.6930555555555555in"}
Figure 12.1: Ideal Signal Collection
Figure 12.1 shows a time domain representations of two perfectly matched
signals as received from the same UE by two U-TDOA capable LMUs in ideal
conditions, including high signal-to-noise ratio and no multipath distortion.
Because the receivers are at different distances from the transmitting UE, the
signals are out of phase; they do not correlate.
{width="2.7930555555555556in" height="1.7541666666666667in"}
Figure 12.2. Ideal and Attenuated Waveforms
Figure 12.2 shows the theoretical effects of increased distance, multipath
distortion, and interference on a received signal. The top signal was received
under ideal conditions. The lower one represents what that signal would look
like in more realistic conditions. It is attenuated to a level much closer to
the noise floor. Nevertheless, there is a correlation with the original
signal.
**Cross-correlation** is a statistical technique that compares the waveforms
of two signals point for point. Identical signals in perfect phase would yield
a correlation coefficient of 1. In Figure 12.3, even though the waveform in
(b) is attenuated compared to (a), the alignment would still yield a very high
correlation, say 0.999.
{width="4.497222222222222in" height="3.2631944444444443in"}
Figure 12.3. Using Cross-Correlation to Compute Time Delay
Figure 12.3 shows (a) a signal received by a U-TDOA capable LMU that is close
to the transmitter and (b) the same signal received by a second U-TDOA capable
LMU farther away. The latter signal is attenuated and perhaps distorted. It is
also out of phase with the original signal because it was received at a later
time. The correlation coefficient between (b) and (a) would be quite low.
However, by shifting the (b) curve to the left, it is possible to find a
position in which the correlation coefficient is maximized (shown by (c)). For
this position, the amount of shift required is equal to the arrival time
difference of the signal between the two U-TDOA capable LMUs.
{width="3.2631944444444443in" height="2.973611111111111in"}
Figure 12.4. Deriving the Hyperbolic Function for Time Delay
In this model (Figure 12.4), Rx1 and Rx2 represent fixed locations of two
U-TDOA capable LMUs in a network. The pairs of intersecting circles centered
around Rx1 and Rx2 have radii such that each radius represents the time,
t~TR~, it takes a signal to travel from a UE transmitter to each U-TDOA
capable LMU (that time being unknown). The difference between radii is a
constant equal to the difference between t~TR1~ for the first U-TDOA capable
LMU and t~TR2~ for the second U-TDOA capable LMU. t~TR1~- t~TR2~ is the value
that the U-TDOA system measures. When you plot and connect the points of
intersections between each pair of circles, the resulting shape is a hyperbola
. The hyperbola defined by the reference site in comparison to another site
constitutes a baseline. If you constructed a similar hyperbola for another
pair of U-TDOA capable LMUs receiving transmissions from the same UE, that
hyperbola would intersect at two points with the first hyperbola, yielding two
possible locations for the UE. A third such hyperbola (Figure 12.5) would
yield a unique location for the calling phone, so that a minimum of four
reception sites is needed to obtain the unique location estimate.
{width="2.7131944444444445in" height="2.4611111111111112in"}
Figure 12.5. Intersection of Three Hypothetical Hyperbolas Calculated from
Time Delay Differences
In the U-TDOA method, the reference measurement is the one that represents the
U-TDOA capable LMU site that collects the signal with the highest quality.
That site is usually the site closest to the UE, and normally generates the
highest signal level as well as the highest SNR. In addition, it presumably
exhibits the lowest multi-path error. Therefore the reference time delay is
the one against which time differences are measured. Any errors introduced
into the time delay measurement yield inaccuracies in the intersection point.
Since the speed of light is approximately 0.3 m/nsec in air, a nanosecond
error in time delay measurement introduces 0.3 meters of error.
The more hyperbolas that are calculated, that is, the more cooperating U-TDOA
capable LMUs used in the calculation, the more accurate is the estimate of the
UE's position. This is another way of saying that statistical confidence
improves with an increase in sample points. When many sites enter into the
calculation, the effects of a large time delay measurement error at a single
site are minimized.
## 12.2 U-TDOA SAS architecture
The overall network architecture is similar to the previous architecture and
is illustrated in Figure 12.6. The only difference is that the U-TDOA capable
LMU are connected directly to the SAS via an overlay network.
Figure 12.6 -- U-TDOA SAS Architecture
The impact on the SAS centric approach due to the presence of the Iur is FFS.
## 12.3 RNC based U-TDOA positioning for Cell_DCH and Cell_FACH RRC states
The U-TDOA positioning method can be performed when the UE is in either the
CELL_DCH or CELL_FACH RRC states. If the UE is in the CELL_PCH or URA_PCH
state the SRNC shall first bring the UE to the CELL_FACH or CELL_DCH states so
that the U-TDOA measurements can be performed by the LMUs and to provide the
current serving Cell ID if the UE was in the URA_PCH state.
### 12.3.1 UE in CELL_DCH state
The SRNC may invoke the U-TDOA positioning method using the PCAP: Position
Calculation Request message that contains the Cell ID and RF channel
information for the UE being positioned when that UE is in the CELL_DCH state.
The SAS executes the U-TDOA positioning method and returns the location and
optional velocity, or appropriate error indication to the SRNC using the PCAP:
Position Calculation Response message as described below.
Figure 12.7: RNC initiated U-TDOA positioning procedure in CELL_DCH state
> 1\. The operation begins with an authenticated request for positioning
> information about a UE from an application in the core network being
> received at the SRNC in a RANAP: Location Reporting Conrol message. The
> request from the CN may be a request for on-demand or periodic reporting.The
> SRNC may invoke the U-TDOA positioning method via the Iupc interface.
>
> 2\. The SRNC sends a PCAP: Position Calculation Request message to the SAS
> containing the contents of the RANAP Location Reporting Control message, the
> RF channel information and Cell ID for the UE being positioned. This
> information indicates that the UE is in the CELL_DCH state.
>
> 3\. The SAS configures the U-TDOA capable LMUs, analyzes the returned
> information and calculates the UE position and optionally, velocity.
>
> 4\. The SAS returns the UE position and optionally the velocity or error
> indication to the SRNC in a PCAP: Position Calculation Response message.
>
> 5\. The SRNC returns the UE position and optionally the velocity, to the CN
> in a RANAP: Location Report message.
>
> 6\. If periodic reporting was requested by the CN at step 1, steps 2 to 5
> may be repeated until the desired amount if reports has been attained, or
> the procedure is cancelled by UTRAN or CN.
### 12.3.2 UE in CELL_FACH state
The SRNC may invoke the U-TDOA positioning method using the PCAP: Position
Calculation Request message that contains the contents of the RANAP Location
Reporting Control message, Cell ID and RF channel information for the UE being
positioned. If the UE is in the CELL_FACH state the SRNC, after sending the
Position Calculation Request message, shall execute a procedure that causes
the UE being positioned to transmit a certain number of pre-coded bits within
a certain period of time. The procedure described in steps 6-8 in subclause
12.4.2.1 below is offered as an example that could be used for the U-TDOA
positioning method when the UE is in the CELL_FACH state.
The SAS executes the U-TDOA positioning method and returns the location or
appropriate error indication to the SRNC using the PCAP: Position Calculation
Response message as described below.
Figure 12.8: RNC initiated U-TDOA positioning procedure in CELL_FACH state
> 1\. The operation begins with an authenticated request for positioning
> information about a UE from an application in the core network being
> received at the SRNC in a RANAP: Location Reporting Conrol message. The
> request from the CN may be a request for either on-demand or periodic
> reporting. The SRNC may invoke the U-TDOA positioning method via the Iupc
> interface.
>
> 2\. The SRNC sends a PCAP: Position Calculation Request message to the SAS
> containing the contents of the RANAP Location Reporting Control message, the
> RF channel information and Cell ID for the UE being positioned. This
> information indicates that the UE is on a FACH.
>
> 3\. After sending the Position Calculation Request message the SRNC shall
> execute a procedure that causes the UE being positioned to transmit a
> certain minimum number of pre-coded bits within a recommended maximum time
> interval of three seconds. The number of bits and actual time interval
> should be related to the required location accuracy, the propagation
> conditions in the serving cell and the LMU configuration for the SAS and may
> be determined in an implementation dependent manner. As an example of a
> method to cause the UE to transmit, the SRNC may configure the UE to
> transmit RLC Status PDUs as described in subclause 12.4.2 below.
>
> 4\. After a configurable time interval the SAS configures the U-TDOA capable
> LMUs, analyzes the returned information and calculates the UE position and
> optionally, velocity.
>
> 5\. The SAS returns the UE position and optionally, velocity to the SRNC in
> a PCAP: Position Calculation Response message.
>
> 6\. The SRNC returns the UE position and optionally, the velocity to the CN
> in a RANAP: Location Report message.
>
> 7\. If periodic reporting was requested by the CN at step 1, steps 2 to 6
> may be repeated until the desired amount if reports has been attained, or
> the procedure is cancelled by UTRAN or CN.
## 12.4 Optional SAS initiated U-TDOA positioning for Cell_DCH and Cell_FACH
RRC states
This subclause describes the U-TDOA positioning procedures in the CELL_DCH and
CELL_FACH states when the location method to be used is determined by the SAS.
### 12.4.1 UE in CELL_DCH state
**[FDD Mode]{.underline}** :
Data (either signalling data (DCCH) or user data (DTCH)) transmitted by a UE
in CELL_DCH state will always be sent on the DCH (Transport Channel). The DCH
in turn is mapped to the DPDCH (Dedicated Physical Data Channel) by the
physical layer. The DPDCH is identified by the allocated frequency, the
channelization code and the scrambling code.
The DPDCH always has an associated DPCCH (Dedicated Physical Control Channel).
The DPCCH carries control information relevant to the physical layer. The
DPCCH is under the same scrambling code, but uses a different spreading code.
While the DPDCH is active only during actual transmission of user data, the
DPCCH is continuously transmitted as long as the UE is in the CELL_DCH state.
The UE transmits either the DPCCH _[and]{.underline}_ the DPDCH, or solely the
DPCCH -- the scrambling code allocated to the UE can be received continuously
as long as the UE is in the CELL_DCH state.
When the UE is in CELL_DCH state, the allocated scrambling code can be used to
identify the UE for U-TDOA positioning determination. No additional
interference is generated to locate the UE using the U-TDOA positioning method
when in the CELL_DCH state.
**[TDD Mode:]{.underline}**
Data (either signalling data (DCCH) or user data (DTCH)) transmitted by a UE
in CELL_DCH state will always be sent on the DCH (Transport Channel). The DCH
in turn is mapped to the DPCH (Dedicated Physical Channel) by the physical
layer. The DPCH is identified by the allocated frequency, the channelization
code(s)/timeslot(s) and the scrambling code associated with the cell that the
UE is attached to (the scrambling code is cell-specific)..
The DPCH is active:
  * during actual transmission of user data
  * during the transmission of special bursts [26].
Special bursts are generated periodically when the UE has no data to send.
When the UE is in CELL_DCH state, the allocated uplink scrambling code
assigned to the UE's cell and the channelisation code(s) / timeslot(s) can be
used to identify the UE for U-TDOA positioning determination. No additional
interference is generated to locate the UE using the U-TDOA positioning method
when in the CELL_DCH state.
#### 12.4.1.1 Message Flow
Figure 12.9 U-TDOA message flow, UE in the CELL_DCH state
1) The procedure starts when a RANAP: Location Reporting Control message
requesting a geographical UE position is received at the SRNC. The RANAP
Location Reporting Control message may contain periodic location information
(amount of reports and reporting interval).
2) Location Reporting Control message parameters, including any periodic
location information, plus UE capability information plus Cell ID are
forwarded to the SAS in the PCAP: Position Initiation Request message.
3) Based upon the service type (emergency service, etc), and the requested
QoS, the SAS initiates a U-TDOA position, and sends a PCAP: Position
Activation Request message indicating U-TDOA to the SRNC. The SRNC chooses to
bring the UE to the CELL_DCH state if not already in this state.
4) The SRNC returns U-TDOA channel information in a PCAP: Position Activation
Response message to the SAS.
5) The SAS configures the U-TDOA capable LMUs to perform measurements. The
U-TDOA capable LMUs measure the [FDD: DPCCH and possibly DPDCH] [TDD: DPCH].
5a) If periodic reporting was requested in step 2, the SAS obtains a position,
and optionally a velocity estimate using the U-TDOA capable LMU measurements
and returns it to the SRNC in a PCAP: Position Periodic Result message. The
SAS continues to send PCAP: Position Periodic Result messages to the SRNC
until the requested amount of reports has been attained or the procedure is
cancelled by UTRAN or CN. The SAS sends the final location information to the
SRNC in a PCAP Position Initiation Response message. The SAS may repeat steps
3 and 4 at any time to obtain or verify the U-TDOA channel information. The
SRNC returns the individual position estimates and optionally the velocity
estimate to the CN in a RANAP: Location Report message.
6) If periodic reporting was not requested in step 2, the SAS obtains a
position, and optionally a velocity estimate using the U-TDOA capable LMU
measurements and returns it to the SRNC in a PCAP: Position Initiation
Response message.
7) The SRNC returns the position estimate and optionally the velocity estimate
to the CN in a RANAP: Location Report message.
### 12.4.2. UE in CELL_FACH state
In the CELL_FACH state the mobile is sharing a common uplink channel and is
usually not sending data in the uplink direction. It is not possible to rely
on the user application to cause the UE to transmit. For the U-TDOA location
method the SRNC must force the UE to transmit.
As an example, this may be achieved by sending a RRC Radio Bearer
Reconfiguration message that causes the UE to periodically send a RLC: Status
PDU to the SRNC for an Acknowledged Mode DCCH. When sufficient repetitions
have occurred to meet the requested location QoS the RRC Radio Bearer
Reconfiguration message would be used to return the UE to the default state.
In the TDD mode, the DCCH signalling radio bearer carrying the status PDUs
shall be mapped to the RACH transport channel, not the USCH.
#### 12.4.2.1 Message flow
Figure 12.10 Example U-TDOA message flow, UE in the CELL_FACH state
1) The procedure starts when a RANAP: Location Reporting Control message
requesting a geographical UE position is received at the SRNC. The RANAP
Location Reporting Control message may contain periodic location information
(amount of reports and reporting interval).
2) Location Reporting Control message parameters, including any periodic
location information, plus Cell ID plus UE capability information are
forwarded to the SAS in the PCAP: Position Initiation Request message.
3) Based upon the service type (emergency service, etc), and the requested
QOS, the SAS initiates a U-TDOA position, and sends a PCAP: Position
Activation Request message indicating U-TDOA to the SRNC. The SRNC chooses to
bring the UE to the CELL_FACH state if initially in the CELL_PCH or URA_PCH
state.
4) The SRNC returns U-TDOA channel information in a PCAP: Position Activation
Response message to the SAS.
5) The SAS configures the U-TDOA capable LMUs to perform measurements. The
U-TDOA capable LMUs measure the PRACH or PCPCH bursts associated with the UE
being positioned.
6) The SRNC, after sending the PCAP Position Activation Response message,
shall execute a procedure that causes the UE being positioned to transmit a
certain number of pre-coded bits within a certain period of time. The number
of pre-coded bits and period of time should be based upon (e.g. set equal to)
a recommended number of bits and recommended time interval defined by the SAS
in the PCAP Position Activation Request message invoking U-TDOA positioning.
As an example, the SRNC could reconfigure the radio bearer so that the UE
begins to send RLC status PDUs every 100 mS by sending the UE a
Radio_Bearer_Reconfiguration message with the TimerStatusPeriodic IE
configured for 100 milliseconds.
7) The UE begins to send RLC status PDUs every 100 milliseconds.
8) After expiration of the configurable T_rach timer the SRNC sends the UE a
Radio_Bearer_Reconfiguration message with the TimerStatusPeriodic IE set to NA
in order to stop the periodic status reporting.
8a) If periodic reporting was requested in step 2, the SAS obtains a position,
and optionally a velocity estimate using the U-TDOA capable LMU measurements
and returns it to the SRNC in a PCAP: Position Periodic Result message. The
SRNC returns the position estimate and optionally the velocity estimate to the
CN in a RANAP: Location Report message. When the periodic reporting interval
transpired, the SAS may send a new PCAP: Position Activation Request message
to the SRNC and steps 3 to 8 may be repeated until the requested amount of
reports has been attained or the procedure is cancelled by UTRAN or CN. The
SAS sends the final location information to the SRNC in a PCAP Position
Initiation Response message. The SRNC returns the individual position
estimates and optionally the velocity estimate to the CN in a RANAP: Location
Report message.
9) If periodic reporting was not requested in step 2, the SAS obtains a
position, and optionally a velocity estimate using the U-TDOA capable LMU
measurements and returns it to the SRNC in a PCAP: Position Initiation
Response message.
10) The SRNC returns the position estimate and optionally a velocity estimate
to the CN in a RANAP: Location Report message.
# 13 Network-assisted GNSS positioning method
In this concept, different GNSS (e.g. GPS, Galileo, GLONASS and BDS) can be
used separately or in combination to perform the location of a UE. The aim of
such combination is to improve:
  * the availability of the location service,
  * the accuracy of the position,
  * the sensitivity to e.g. fadings,
  * the integrity of the signal,
  * the reliability of the signal,
  * the in-building penetration.
This can be done thanks to the combination of different global navigation
satellite systems and the increased number of satellites.
## 13.1 Network-assisted GPS positioning method
Refer to clause 10.
\"Modernized-GPS\" refers to a family of modernized GPS satellites which bring
support for new navigation signals, such as a Civilian L2 (L2C) signal, a
Safety-of-Life L5 signal, and a new Civilian L1 (L1C) signal, together with
improved navigation message data.
## 13.2 Network-assisted Galileo positioning method
The procedure is the same as for network-assisted GPS positioning method
except that the Galileo satellites and parameters are used instead of those of
the GPS.
## 13.3 Network-assisted GLONASS positioning method
The procedure is the same as for network-assisted GPS positioning method
except that the GLONASS satellites and parameters are used instead of those of
the GPS.
## 13.4 Network-assisted Satellite Based Augmentation Systems (SBAS)
Several independent but compatible satellite based augmentation systems exist:
The American Wide Area Augmentation System (WAAS), the European Geostationary
Navigation Overlay Service (EGNOS), the Indian GPS Aided GEO Augmented
Navigation System (GAGAN), and the Japanese Multi-functional Satellite
Augmentation System (MSAS). The (GPS-like) ranging signals from all these
SBASs are here considered as a single GNSS, although this GNSS is not a
standalone positioning system because of the small number of satellites and
their distribution in space. Usually, this GNSS is used in combination with
e.g., GPS, Galileo, or GLONASS ranging signals.
The procedure is the same as for network-assisted GPS positioning method
except that the SBAS satellites and parameters are used instead of those of
the GPS.
## 13.5 Network-assisted Quasi-Zenith Satellite System (QZSS)
Quasi-Zenith Satellite System (QZSS) is a regional navigation satellite
system. The eccentricity and elevation of the satellite orbits are selected so
that the minimum elevation angle through 24 hours in Japan is larger than
about 60 degrees. The satellite signals are fully compatible and interoperable
with current and modernized future GPS. Similar to SBAS ranging signals, this
GNSS is not a standalone positioning system and is usually used in combination
with other GNSS ranging signals, such as GPS, Galileo, GLONASS, etc.
The procedure is the same as for network-assisted GPS positioning method
except that the QZSS satellites and parameters are used instead of those of
the GPS.
## 13.6 Network-assisted BeiDou Navigation Satellite System (BDS) positioning
method
The procedure is the same as for network-assisted GPS positioning method
except that the BDS satellites and parameters [31] are used instead of those
of the GPS.
# 14 Barometric Pressure positioning methods
## 14.1 General
In the Barometric Pressure positioning method, the UE vertical component of
the position is estimated by combining the measured atmospheric pressure and a
reference atmospheric pressure. This is accomplished through barometric
pressure sensors measuring atmospheric pressure at the UE, and applying a
height determination algorithm using the reference atmospheric pressure.
Two positioning modes are supported:
\- _UE-Assisted_ : The UE performs Barometric Pressure measurements without
assistance from the network and sends these measurements to the SAS/RNC where
the vertical position calculation may take place, possibly using additional
measurements from other sources;
\- _Standalone_ : The UE performs Barometric Pressure measurements and
calculates its own vertical component of the position, possibly using
additional measurements from other sources.
A UE with Barometric Pressure sensing capability operates without assistance
from the network.
## 14.2 Information to be transferred between UTRAN Elements
This subclause defines the information (e.g., vertical position and/or
measurement data) that may be transferred between UTRAN elements.
### 14.2.1 Information that may be transferred from the UE to Network
The information that may be signalled from UE to the SAS/RNC is listed in
table 14.2.1-1.
Table 14.2.1-1: Information that may be transferred from UE to the Network
* * *
Information UEâ€‘assisted Standalone UE 3D position estimate with uncertainty
shape No Yes Indication of used positioning methods in the fix No Yes
Timestamp Yes Yes Barometric Pressure measurements Yes No
* * *
The information reported from the UE to the Network depends on the positioning
mode (i.e., standalone, or UE-assisted).
#### 14.2.1.1 Standalone mode
In standalone mode, the UE reports the altitude, together with an estimate of
the location uncertainty, if available.
The UE should also report an indication of which positioning method(s) have
been used to calculate a fix.
#### 14.2.1.2 UE-assisted mode
In UE-assisted mode, the UE reports the Barometric Pressure measurements
together with associated quality estimates. These measurements enable the
Network to calculate the vertical location of the UE, possibly using other
measurements and data.
If requested by the SAS/RNC and supported by the UE, the UE may report
Barometric Pressure measurements together with associated quality
measurements, if available.
## 14.3 Location Information Transfer Procedure
The purpose of this procedure is to enable the SAS/RNC to request Barometric
Pressure measurements or 3D position estimate from the UE, or to enable the UE
to provide Barometric Pressure measurements to the SAS/RNC for vertical
position calculation (e.g., in case of basic self location where the UE
requests its own location).
### 14.3.1 SAS initiated Barometric Pressure positioning procedure
The following describes the signalling for the optional initiation of the
network Barometric Pressure vertical positioning procedure by the SAS.
Figure 14.3.1-1: Barometric Pressure methods when initiated by the SAS
1\. The operation begins with an authenticated request for positioning
information about a UE from an application in the core network being received
at the SRNC. The request from the CN may be a request for on-demand or
periodic reporting. The SRNC acts as interface between the Core Network and
the UE Positioning entities in the UTRAN.
2\. The SRNC sends parameters received in the location request, including any
periodic reporting information, together with the Cell ID and UE capability
information to the SAS in a PCAP: Position Initiation Request message via the
Iupc interface.
3\. Depending on the UE capabilities, the SAS initiates a Barometric Pressure
positioning procedure by sending a PCAP: Position Activation Request message
that allows for the use of Barometric Pressure positioning (along with GPS or
OTDOA, and optionally WLAN, Bluetooth or TBS positioning methods) to the SRNC
via the Iupc interface. The PCAP Position Activation Request message may
include periodic reporting information (number of reports and reporting
interval).
4\. The SRNC forwards to the UE the Barometric Pressure positioning request
received from the SAS using RRC signalling. The SRNC also forwards in the RRC
signalling message(s) the SAS request for either Barometric Pressure
measurements, in the case of UE assisted, or a vertical position coordinate,
in the case of standalone. The RRC signalling may include a request for
periodic reporting as described in subclause 6.6.4.1 if this was received in
step 3. For a description of standalone Barometric Pressure mode, jump to step
9.
5\. For UE assisted Barometric Pressure, the SRNC requests from the UE the
atmospheric pressure measurements. These measurements may be made while the UE
is in RRC connected mode CELL_DCH state.
6\. The UE returns to the SRNC the available barometric pressure measurements,
together with a time stamp of when these values were obtained.
7\. The information obtained in step 6 is sent from the SRNC to the SAS in a
PCAP: Position Activation Response message.
8\. The SAS calculates the vertical UE position. If periodic reporting was not
requested in step 2, the SAS returns the UE position to the SRNC in a PCAP:
Position Initiation Response message. If periodic reporting was requested in
step 2, the SAS forwards the position information to the SRNC in a PCAP
Position Periodic Result message. The PCAP Position Initiation Response or
PCAP Position Periodic Result message may include the positioning method(s)
used and an indication of whether the position estimate satisfies the
requested accuracy or not.
9\. In case of standalone method, the UE returns the vertical position
estimate to the SRNC via RRC signalling. The SRNC forwards the position
estimate to the SAS in a PCAP: Position Activation Response message. This
estimate includes the position, the estimated accuracy of the results and the
time of the estimate.
10\. If periodic reporting was not requested in step 2, the SAS returns the
resulting estimate to the SRNC in a PCAP: Position Initiation Response
message. If periodic reporting was requested in step 2, the SAS forwards the
position estimate to the SRNC in a PCAP Position Periodic Result message. The
PCAP Position Initiation Response or PCAP Position Periodic Result message may
include the positioning method(s) used and an indication of whether the
position estimate satisfies the requested accuracy or not.
11\. If there is insufficient information to yield a UE vertical positioning
estimate satisfying the requested accuracy, the SAS may start a new process
from step 3.
12\. The SRNC passes the position estimate received from the SAS to the CN
including the positioning method (or the list of the methods) used to obtain
the position estimate. If the CN has requested accuracy for the position
estimate, the Location response shall include an indication whether the
position estimate satisfies the requested accuracy or not.
13\. If periodic UE reporting was requested in step 4, the UE continues to
send Barometric Pressure measurement reports one reporting interval after the
previous measurement report. The SRNC forward the Barometric Pressure
measurement report information to the SAS in a PCAP Position Periodic Report
message. The SAS may calculate the UE vertical position and sends the position
information to the SRNC in a PCAP Position Periodic Result message. The SRNC
passes the new position estimate to the CN including, if available, the
positioning method (or the list of the methods) used to obtain the position
estimate. If the CN has requested accuracy for the position estimate, the
Location response shall include an indication whether the position estimate
satisfies the requested accuracy or not. This step 13 is repeated until the
desired amount of reports has been attained or the procedure is cancelled by
the CN or UTRAN. The SAS may send the final location estimate in a PCAP
Position Initiation Response message to the SRNC, and the SRNC forwards the
final location information to the CN.
14\. If periodic UE reporting was not requested in step 4, but was requested
in step 2, the SAS may repeat the steps 3 to 12 as for the first request until
the desired amount of reports has been attained or the procedure is cancelled
by the CN or UTRAN. When repeating step 10 for the final request, the SAS
returns the resulting final position estimate to the SRNC in a PCAP: Position
Initiation Response message.
# 15 WLAN positioning method
In the WLAN positioning method, the UE position is estimated with the
knowledge of geographical coordinate of reference WLAN access points. This is
accomplished by collecting a certain amount of measurements from UE's WLAN
receiver, and applying a location determination algorithm using databases of
the estimated position's references points.
The UE measurements can include:
\- WLAN Received Signal Strength (RSSI);
\- Round Trip Time (RTT) between WLAN Access Point and the UE.
Two modes are supported for WLAN positioning:
\- _Standalone_ : in this mode, the UE performs WLAN measurements and
calculates its own location;
\- _UE-Assisted_ : The UE performs WLAN measurements without assistance from
the network and sends these measurements to the SAS/RNC where the position
calculation takes place using a database.
A UE with WLAN capability operates without assistance from the network.
## 15.1 Information to be transferred between UTRAN elements
The information that may be signalled from the UE to the network is listed in
table 15.1-1.
Table 15.1-1: Information that may be transferred from the UE to the network
+-----------------------------------------+-------------+------------+ | Information | UEâ€‘assisted | Standalone | +-----------------------------------------+-------------+------------+ | **WLAN Location Information** | | | +-----------------------------------------+-------------+------------+ | BSSID | Yes | No | +-----------------------------------------+-------------+------------+ | > SSID | Yes | No | +-----------------------------------------+-------------+------------+ | > Received Signal Strength (RSSI) | Yes | No | +-----------------------------------------+-------------+------------+ | > Round Trip Time (RTT) | Yes | No | +-----------------------------------------+-------------+------------+ | > Measurement Time Stamp | Yes | No | +-----------------------------------------+-------------+------------+ | > Measurement Characteristics | Yes | No | +-----------------------------------------+-------------+------------+ | **UE Location Information** | | | +-----------------------------------------+-------------+------------+ | > UE 3D Position estimate with | No | Yes | | > uncertainty shape | | | +-----------------------------------------+-------------+------------+ | > Location Time Stamp | No | Yes | +-----------------------------------------+-------------+------------+ | > Location Source (method(s) used to | No | Yes | | > compute location) | | | +-----------------------------------------+-------------+------------+
## 15.2 SAS initiated WLAN positioning procedure
The following describes the signalling for the optional initiation of the
network WLAN positioning procedure by the SAS.
Figure 15.2-1: WLAN methods when initiated by the SAS
1\. The operation begins with an authenticated request for positioning
information about a UE from an application in the core network being received
at the SRNC. The request from the CN may be a request for on-demand or
periodic reporting. The SRNC acts as interface between the Core Network and
the UE Positioning entities in the UTRAN.
2\. The SRNC sends parameters received in the location request, including any
periodic reporting information, together with the Cell ID and UE capability
information to the SAS in a PCAP: Position Initiation Request message via the
Iupc interface.
3\. Depending on the UE capabilities, the SAS initiates a WLAN positioning
procedure by sending a PCAP: Position Activation Request message that allows
for the use of WLAN positioning (along with GPS or OTDOA, and optionally
Barometric Pressure, Bluetooth or TBS positioning methods) via the Iupc
interface. The PCAP Position Activation Request message may include periodic
reporting information (number of reports and reporting interval).
4\. The SRNC forwards to the UE the WLAN positioning request received from the
SAS using RRC signalling. The SRNC also forwards in the RRC signalling
message(s) the SAS request for either WLAN measurements, in the case of UE
assisted, or a position coordinates, in the case of standalone. The RRC
signalling may include a request for periodic reporting as described in
subclause 6.6.4.1 if this was received in step 3\. For a description of
standalone WLAN, jump to step 9.
5\. For UE assisted WLAN, the SRNC requests from the UE the measurement of
WLAN RSSI and RTT. These measurements may be made while the UE is in RRC
connected mode CELL_DCH state.
6\. The UE returns to the SRNC the available WLAN measurements, together with
a time stamp of when these values were obtained.
7\. The information obtained in step 6 is sent from the SRNC to the SAS in a
PCAP: Position Activation Response message.
8\. The SAS calculates the UE position. If periodic reporting was not
requested in step 2, the SAS returns the UE position to the SRNC in a PCAP:
Position Initiation Response message. If periodic reporting was requested in
step 2, the SAS forwards the position information to the SRNC in a PCAP
Position Periodic Result message. The PCAP Position Initiation Response or
PCAP Position Periodic Result message may include the positioning method(s)
used and an indication of whether the position estimate satisfies the
requested accuracy or not.
9\. In case of standalone method, the UE returns the position estimate to the
SRNC via RRC signalling. The SRNC forwards the position estimate to the SAS in
a PCAP: Position Activation Response message. This estimate includes the
position, the estimated accuracy of the results and the time of the estimate.
10\. The SAS may verify the UE position estimate received in step 9 (e.g.
using cell ID information). If periodic reporting was not requested in step 2,
the SAS returns the resulting estimate to the SRNC in a PCAP: Position
Initiation Response message. If periodic reporting was requested in step 2,
the SAS forwards the position estimate to the SRNC in a PCAP Position Periodic
Result message. The PCAP Position Initiation Response or PCAP Position
Periodic Result message may include the positioning method(s) used and an
indication of whether the position estimate satisfies the requested accuracy
or not.
11\. If there is insufficient information to yield a UE positioning estimate
satisfying the requested accuracy, the SAS may start a new process from step
3.
12\. The SRNC passes the position estimate received from the SAS to the CN
including the positioning method (or the list of the methods) used to obtain
the position estimate. If the CN has requested accuracy for the position
estimate, the Location response shall include an indication whether the
position estimate satisfies the requested accuracy or not.
13\. If periodic UE reporting was requested in step 4, the UE continues to
send WLAN measurement reports one reporting interval after the previous
measurement report. The SRNC forward the WLAN measurement report information
to the SAS in a PCAP Position Periodic Report message. The SAS may calculate
the UE position and may verify the calculated UE position estimate or the
received UE position estimate (e.g. using cell ID information) and sends the
position information to the SRNC in a PCAP Position Periodic Result message.
The SRNC passes the new position estimate to the CN including, if available,
the positioning method (or the list of the methods) used to obtain the
position estimate. If the CN has requested accuracy for the position estimate,
the Location response shall include an indication whether the position
estimate satisfies the requested accuracy or not. This step 13 is repeated
until the desired amount of reports has been attained or the procedure is
cancelled by the CN or UTRAN. The SAS may send the final location estimate in
a PCAP Position Initiation Response message to the SRNC, and the SRNC forwards
the final location information to the CN.
14\. If periodic UE reporting was not requested in step 4, but was requested
in step 2, the SAS may repeat the steps 3 to 12 as for the first request until
the desired amount of reports has been attained or the procedure is cancelled
by the CN or UTRAN. When repeating step 10 for the final request, the SAS
returns the resulting final position estimate to the SRNC in a PCAP: Position
Initiation Response message.
# 16 Bluetooth positioning methods
In the Bluetooth positioning method, the UE position is estimated with the
knowledge of geographical coordinate of reference Bluetooth beacons. This is
accomplished by collecting a certain amount of measurements from UE's
Bluetooth receiver, and applying a location determination algorithm using
databases of the estimated position's references points.
The UE measurements can include:
\- Bluetooth beacon's Received Signal Strength (RSSI).
Two modes are supported for Bluetooth positioning:
\- _Standalone_ : in this mode, the UE performs Bluetooth measurements and
calculates its own location;
\- _UE-Assisted_ : The UE performs Bluetooth measurements without assistance
from the network and sends these measurements to the SAS/RNC where the
position calculation takes place using a database.
A UE with Bluetooth capability operates without assistance from the network.
## 16.1 Information to be transferred between UTRAN elements
The information that may be signalled from the UE to the network is listed in
table 16.1-1.
Table 16.1-1: Information that may be transferred from the UE to the network
+-----------------------------------------+-------------+------------+ | Information | UEâ€‘assisted | Standalone | +-----------------------------------------+-------------+------------+ | **Bluetooth Location Information** | | | +-----------------------------------------+-------------+------------+ | > MAC Address | Yes | No | +-----------------------------------------+-------------+------------+ | > Received Signal Strength (RSSI) | Yes | No | +-----------------------------------------+-------------+------------+ | > Measurement Time Stamp | Yes | No | +-----------------------------------------+-------------+------------+ | > Measurement Characteristics | Yes | No | +-----------------------------------------+-------------+------------+ | **UE Location Information** | | | +-----------------------------------------+-------------+------------+ | > UE 3D Position estimate with | No | Yes | | > uncertainty shape | | | +-----------------------------------------+-------------+------------+ | > Location Time Stamp | No | Yes | +-----------------------------------------+-------------+------------+ | > Location Source (method(s) used to | No | Yes | | > compute location) | | | +-----------------------------------------+-------------+------------+
## 16.2 SAS initiated Bluetooth positioning procedure
The following describes the signalling for the optional initiation of the
network Bluetooth positioning procedure by the SAS.
**Figure 16.2-1: Bluetooth methods when initiated by the SAS**
1\. The operation begins with an authenticated request for positioning
information about a UE from an application in the core network being received
at the SRNC. The request from the CN may be a request for on-demand or
periodic reporting. The SRNC acts as interface between the Core Network and
the UE Positioning entities in the UTRAN.
2\. The SRNC sends parameters received in the location request, including any
periodic reporting information, together with the Cell ID and UE capability
information to the SAS in a PCAP: Position Initiation Request message via the
Iupc interface.
3\. Depending on the UE capabilities, the SAS initiates a Bluetooth
positioning procedure by sending a PCAP: Position Activation Request message
that allows for the use of Bluetooth positioning (along with GPS or OTDOA, and
optionally Barometric Pressure, WLAN or TBS positioning methods) via the Iupc
interface. The PCAP Position Activation Request message may include periodic
reporting information (number of reports and reporting interval).
4\. The SRNC forwards to the UE the Bluetooth positioning request received
from the SAS using RRC signalling. The SRNC also forwards in the RRC
signalling message(s) the SAS request for either Bluetooth measurements, in
the case of UE assisted, or a position coordinates, in the case of standalone.
The RRC signalling may include a request for periodic reporting as described
in subclause 6.6.4.1 if this was received in step 3. For a description of
standalone Bluetooth, jump to step 9.
5\. For UE assisted Bluetooth, the SRNC requests from the UE the measurement
of Bluetooth RSSI. These measurements may be made while the UE is in RRC
connected mode CELL_DCH state.
6\. The UE returns to the SRNC the available Bluetooth measurements, together
with a time stamp of when these values were obtained.
7\. The information obtained in step 6 is sent from the SRNC to the SAS in a
PCAP: Position Activation Response message.
8\. The SAS calculates the UE position. If periodic reporting was not
requested in step 2, the SAS returns the UE position to the SRNC in a PCAP:
Position Initiation Response message. If periodic reporting was requested in
step 2, the SAS forwards the position information to the SRNC in a PCAP
Position Periodic Result message. The PCAP Position Initiation Response or
PCAP Position Periodic Result message may include the positioning method(s)
used and an indication of whether the position estimate satisfies the
requested accuracy or not.
9\. In case of standalone method, the UE returns the position estimate to the
SRNC via RRC signalling. The SRNC forwards the position estimate to the SAS in
a PCAP: Position Activation Response message. This estimate includes the
position, the estimated accuracy of the results and the time of the estimate.
10\. The SAS may verify the UE position estimate received in step 9 (e.g.
using cell ID information). If periodic reporting was not requested in step 2,
the SAS returns the resulting estimate to the SRNC in a PCAP: Position
Initiation Response message. If periodic reporting was requested in step 2,
the SAS forwards the position estimate to the SRNC in a PCAP Position Periodic
Result message. The PCAP Position Initiation Response or PCAP Position
Periodic Result message may include the positioning method(s) used and an
indication of whether the position estimate satisfies the requested accuracy
or not.
11\. If there is insufficient information to yield a UE positioning estimate
satisfying the requested accuracy, the SAS may start a new process from step
3.
12\. The SRNC passes the position estimate received from the SAS to the CN
including the positioning method (or the list of the methods) used to obtain
the position estimate. If the CN has requested accuracy for the position
estimate, the Location response shall include an indication whether the
position estimate satisfies the requested accuracy or not.
13\. If periodic UE reporting was requested in step 4, the UE continues to
send Bluetooth measurement reports one reporting interval after the previous
measurement report. The SRNC forward the Bluetooth measurement report
information to the SAS in a PCAP Position Periodic Report message. The SAS may
calculate the UE position and may verify the calculated UE position estimate
or the received UE position estimate (e.g. using cell ID information) and
sends the position information to the SRNC in a PCAP Position Periodic Result
message. The SRNC passes the new position estimate to the CN including, if
available, the positioning method (or the list of the methods) used to obtain
the position estimate. If the CN has requested accuracy for the position
estimate, the Location response shall include an indication whether the
position estimate satisfies the requested accuracy or not. This step 13 is
repeated until the desired amount of reports has been attained or the
procedure is cancelled by the CN or UTRAN. The SAS may send the final location
estimate in a PCAP Position Initiation Response message to the SRNC, and the
SRNC forwards the final location information to the CN.
14\. If periodic UE reporting was not requested in step 4, but was requested
in step 2, the SAS may repeat the steps 3 to 12 as for the first request until
the desired amount of reports has been attained or the procedure is cancelled
by the CN or UTRAN. When repeating step 10 for the final request, the SAS
returns the resulting final position estimate to the SRNC in a PCAP: Position
Initiation Response message.
# 17 TBS positioning methods
## 17.1 General
Terrestrial Beacon Systems (TBS) is the standard generic term for a network of
ground-based transmitters broadcasting signals for geo-spatial positioning
with wide-area or regional coverage. The following TBSs are supported in this
version of the specification:
\- Metropolitan Beacon Systems (MBS).
Each TBS can be used individually or in combination with others. When used in
combination, the effective number of navigation signals would be increased.
Two positioning modes are supported:
\- _UE-Assisted_ : The UE performs TBS measurements without assistance from
the network, and sends these measurements to the SAS where the position
calculation takes place, possibly using additional measurements from other
(non TBS) sources;
\- _Standalone_ : The UE performs TBS measurements and calculates its own
location, possibly using additional measurements from other (non TBS) sources.
A UE with TBS capability operates without assistance from the network.
## 17.2 Information to be transferred between UTRAN Elements
This subclause defines the information (e.g., position, measurement data) that
may be transferred between UTRAN elements.
### 17.2.1 Information that may be transferred from the UE to SAS
The information that may be signalled from UE to the SAS/RNC is listed in
table 17.2.1-1.
Table 17.2.1-1: Information that may be transferred from UE to the SAS
* * *
Information UEâ€‘assisted Standalone UE 3D Position estimate with uncertainty
shape No Yes Timestamp Yes Yes Indication of used positioning methods in the
fix No Yes TBS measurements (code phase (MBS)) Yes No Measurement quality
parameters for each measurement Yes No
* * *
The TBS information reported from the UE to the SAS depends on the positioning
mode (i.e., standalone, or UE-assisted).
#### 17.2.1.1 Standalone mode
In standalone mode, the UE reports the latitude, longitude and possibly
altitude, together with an estimate of the location uncertainty, if available.
The UE should also report an indication of TBS method used and possibly other
positioning methods used to calculate the fix.
#### 17.2.1.2 UE-assisted mode
In UE-assisted mode, the UE reports the TBS associated measurements, together
with associated quality estimates. These measurements enable the SAS/RNC to
calculate the location of the UE, possibly using other measurements and data.
## 17.3 Location Information Transfer Procedure
The purpose of this procedure is to enable the SAS/RNC to request TBS
measurements or location estimate from the UE, or to enable the UE to provide
TBS measurements to the SAS/RNC for position calculation (e.g., in case of
basic self location where the UE requests its own location).
### 17.3.1 SAS initiated TBS positioning procedure
The following describes the signalling for the optional initiation of the
network TBS positioning procedure by the SAS.
Figure 17.3.1-1: TBS methods when initiated by the SAS
1\. The operation begins with an authenticated request for positioning
information about a UE from an application in the core network being received
at the SRNC. The request from the CN may be a request for on-demand or
periodic reporting. The SRNC acts as interface between the Core Network and
the UE Positioning entities in the UTRAN.
2\. The SRNC sends parameters received in the location request, including any
periodic reporting information, together with the Cell ID and UE capability
information to the SAS in a PCAP: Position Initiation Request message via the
Iupc interface.
3\. Depending on the UE capabilities, the SAS initiates a TBS positioning
procedure by sending a PCAP: Position Activation Request message that allows
for the use of TBS positioning (along with GPS or OTDOA, and optionally
Barometric Pressure or WLAN, Bluetooth positioning methods) to the SRNC via
the Iupc interface. The PCAP Position Activation Request message may include
periodic reporting information (number of reports and reporting interval).
4\. The SRNC forwards to the UE the TBS positioning request received from the
SAS using RRC signalling. The SRNC also forwards in the RRC signalling
message(s) the SAS request for either TBS measurements, in the case of UE
assisted, or a position coordinate, in the case of standalone. The RRC
signalling may include a request for periodic reporting as described in
subclause 6.6.4.1 if this was received in step 3\. For a description of
standalone TBS mode, jump to step 9.
5\. For UE assisted TBS, the SRNC requests from the UE the TBS measurements.
These measurements may be made while the UE is in RRC connected mode CELL_DCH
state.
6\. The UE returns to the SRNC the available TBS measurements, together with a
time stamp of when these values were obtained.
7\. The information obtained in step 6 is sent from the SRNC to the SAS in a
PCAP: Position Activation Response message.
8\. The SAS calculates the UE position. If periodic reporting was not
requested in step 2, the SAS returns the UE position to the SRNC in a PCAP:
Position Initiation Response message. If periodic reporting was requested in
step 2, the SAS forwards the position information to the SRNC in a PCAP
Position Periodic Result message. The PCAP Position Initiation Response or
PCAP Position Periodic Result message may include the positioning method(s)
used and an indication of whether the position estimate satisfies the
requested accuracy or not.
9\. In case of standalone method, the UE returns the position estimate to the
SRNC via RRC signalling. The SRNC forwards the position estimate to the SAS in
a PCAP: Position Activation Response message. This estimate includes the
position, the estimated accuracy of the results and the time of the estimate.
10\. If periodic reporting was not requested in step 2, the SAS returns the
resulting estimate to the SRNC in a PCAP: Position Initiation Response
message. If periodic reporting was requested in step 2, the SAS forwards the
position estimate to the SRNC in a PCAP Position Periodic Result message. The
PCAP Position Initiation Response or PCAP Position Periodic Result message may
include the positioning method(s) used and an indication of whether the
position estimate satisfies the requested accuracy or not.
11\. If there is insufficient information to yield a UE positioning estimate
satisfying the requested accuracy, the SAS may start a new process from step
3.
12\. The SRNC passes the position estimate received from the SAS to the CN
including the positioning method (or the list of the methods) used to obtain
the position estimate. If the CN has requested accuracy for the position
estimate, the Location response shall include an indication whether the
position estimate satisfies the requested accuracy or not.
13\. If periodic UE reporting was requested in step 4, the UE continues to
send TBS measurement reports one reporting interval after the previous
measurement report. The SRNC forward the TBS measurement report information to
the SAS in a PCAP Position Periodic Report message. The SAS may calculate the
UE position and sends the position information to the SRNC in a PCAP Position
Periodic Result message. The SRNC passes the new position estimate to the CN
including, if available, the positioning method (or the list of the methods)
used to obtain the position estimate. If the CN has requested accuracy for the
position estimate, the Location response shall include an indication whether
the position estimate satisfies the requested accuracy or not. This step 13 is
repeated until the desired amount of reports has been attained or the
procedure is cancelled by the CN or UTRAN. The SAS may send the final location
estimate in a PCAP Position Initiation Response message to the SRNC, and the
SRNC forwards the final location information to the CN.
14\. If periodic UE reporting was not requested in step 4, but was requested
in step 2, the SAS may repeat the steps 3 to 12 as for the first request until
the desired amount of reports has been attained or the procedure is cancelled
by the CN or UTRAN. When repeating step 10 for the final request, the SAS
returns the resulting final position estimate to the SRNC in a PCAP: Position
Initiation Response message.
###### ## Annex A (informative): Definitions and Terms
This annex provides definitions and terms for the general LCS. Not all of
these are applicable to the UTRAN environment.
**CAMEL:** CAMEL is a network functionality, which provides the mechanisms of
Intelligent Network to a UE.
**Current Position:** after a location attempt has successfully delivered a
position estimate and its associated time stamp, the position estimate and
time stamp is referred to as the \'current position\' at that point in time.
**Deferred location request:** a location request where the location response
(responses) is (are) not required immediately.
**Frequency reference** : the frequency reference of the UE obtained from the
UTRAN radio interface that may be used to minimize the frequency search
associated with acquiring GPS satellite signals. When the UE acquisition
process is aligned to this reference, the carrier Doppler uncertainty that
must be searched for a particular satellite signal need only account for minor
residual uncertainties related to UE dynamics and initial position. This
frequency reference may also be used to maintain the UE\'s estimate of GPS
time between positioning events, thus making accurate GPS time available
within the UE to support reacquisition of satellite signals.
**Global Positioning System:** the Global Positioning System (GPS) consists of
three functional elements: Space Segment (satellites), User Segment
(receivers), and Control Segment (maintenance etc.). The GPS receiver
estimates its own location based on the observed times of arrival of the
satellite signals.
**Immediate location request:** a location request where a single location
response only is required immediately.
**Initial Position:** in the context of an originating emergency call the
position estimate and the associated time stamp at the commencement of the
call set-up is referred to as \'initial position\'.
**Last Known Position:** the current position estimate and its associated time
stamp for Target UE stored in the LCS Server is referred to as the \'last
known position\' and until replaced by a later position estimate and a new
time stamp is referred to as the \'last known position\'.
**LCS (LoCation Services):** LCS is a service concept in system (e.g. GSM or
UMTS) standardisation. LCS specifies all the necessary network elements and
entities, their functionalities, interfaces, as well as communication
messages, due to implement the location service functionality in a cellular
network.
NOTE: LCS does not specify any location based (value added) services except
locating of emergency calls.
**LCS Client:** a software and/or hardware entity that interacts with a LCS
Server for the purpose of obtaining location information for one or more UEs.
LCS Clients subscribe to LCS in order to obtain location information. LCS
Clients may or may not interact with human users. The LCS Client is
responsible for formatting and presenting data and managing the user interface
(dialogue). The LCS Client may reside in the UE.
**LCS Client Access barring list:** an optional list of MSISDNs per LCS Client
where the LCS Client is not allowed to locate any MSISDN therein.
**LCS Client Subscription Profile:** a collection of subscription attributes
of LCS related parameters that have been agreed for a contractual period of
time between the LCS client and the service provider.
**LCS Feature:** the capability of a PLMN to support LCS Client/server
interactions for locating Target UEs.
**LCS Server:** a software and/or hardware entity offering LCS capabilities.
The LCS Server accepts requests, services requests, and sends back responses
to the received requests. The LCS server consists of LCS components, which are
distributed to one or more PLMN and/or service provider.
**Local Service:** a service, which can be exclusively provided in the current
serving network by a Value added Service Provider.
**Local Information:** information related to a given location, or general
information, which is made available in a given location.
**Location (Based) Application:** a location application is an application
software processing location information or utilising it in some way. The
location information can be input by a user or detected by UTRAN or UE.
Navigation is one location application example.
**Location Based Service (LBS):** a service provided either by teleoperator or
a 3^rd^ party service provider that utilises the available location
information of the terminal. Location Application offers the User Interface
for the service. LBS is either a pull or a push type of service (see Location
Dependent Services and Location Independent Services).
**Location Dependent Service:** a service provided either by teleoperator or a
3^rd^ party service provider that is available (pull type) or is activated
(push type) when the user arrives to a certain area. It doesn\'t require any
subscription in advance, but the push type activation shall be confirmed by
the user. The offered service itself can be any kind of service (e.g. a public
Xerox machine or the discount list in a store).
**Location Independent Service:** a service provided either by teleoperator or
a 3^rd^ party service provider that is available and therefore can be
activated anywhere in the network coverage. It is activated by the user\'s
request or by other user\'s activated service, and therefore it requires a
subscription in advance (pull type). The offered service itself can be any
kind of service (e.g. MMS, SWDL, or LBS!).
**Position Estimate:** the geographic position of a UE expressed in latitude
and longitude data, and optionally altitude data. The Position Estimate shall
be represented in a well-defined universal format. Translation from this
universal format to another geographic positioning system may be supported,
although the details are considered outside the scope of the primitive
services.
**Positioning:** positioning is a functionality, which estimates a
geographical position (of e.g. a UE).
**Positioning method:** a principle and/or algorithm that the estimation of
geographical position is based on, e.g. AOA, TOA, TDOA. For example, GPS is
based on TOA, and E-OTD (on GSM) or OTDOA (on UMTS) are based on TDOA.
**Positioning technology:** a technology or system concept including the
specifications of RF interfaces, data types, etc. to process the estimation of
a geographical position, e.g. GPS, E-OTD (GSM), and IPDL-TDOA (UMTS).
**PLMN Access barring list:** an optional list of MSISDN per PLMN where any
LCS Client is not allowed to locate any MSISDN therein except for certain
exceptional cases.
**Predefined area:** a geographical area that is not related to cell or radio
coverage. The UE may take special action when it recognises it has entered or
left a predefined area.
**Privacy Class:** list of LCS Clients defined within a privacy exception
class to which permission may be granted to locate the target UE. The
permission shall be granted either on activation by the target UE or
permanently for a contractual period of time agreed between the target UE and
the service provider.
**Privacy Exception List:** a list consisting of various types of privacy
classes (i.e. operator related, personal etc.). Certain types of classes may
require agreement between the service provider and the target UE.
**Prohibited area:** an area where the UE must not activate its transmitter.
The Prohibited area may be a Predefined area described above or related to
radio cell(s).
**Subscription Profile:** the profile detailing the subscription to various
types of privacy classes.
**Target UE:** the UE being located.
**Velocity Estimate:** the speed and direction of a UE expressed as horizontal
speed and bearing data, and optionally vertical speed data.
###### ## Annex B (informative): Reference Model of Functional Entities for
UTRAN UE Positioning
The UTRAN functional entities for UE Positioning are shown in figure B.1 and
figure B.2. In these reference models, the LCS clients in the core network
communicate with the UTRAN UE Positioning entities across the Iu interface.
The RNC LCS Handling Entities and the Positioning Handing Entities work
together with the UE to measure and calculate the position information for the
requested target UE. These entities within the UTRAN are described in more
detail in the following subclauses.
The figure shows the general arrangement of the UE Positioning function in
UTRAN. Communication among these entities makes use of the messaging and
signalling capabilities of the UTRAN across the Iu, Iur, Iub, Iupc and Uu
interfaces. A LMU is also added to the UTRAN to make measurements as needed by
the selected positioning method.
This figure does not include elements of 3G Core Network, but focuses on those
that participate with the UE Positioning functions in the UTRAN. The
association of the LCS entities within the Core Network (CN) (e.g. with 3G-MSC
or 3G-SGSN) is outside the scope of the present document and is not
illustrated in the diagram.
Within the UTRAN, the UE Positioning Entities may be associated with, or part
of the SAS, RNC, the Node B and the UE. Internal LCS Applications may also be
part of the RNC and the UE.
The UE Position Calculation Function (PCF) is logically associated with the
SRNC or with the SAS.
The UE Positioning in UTRAN also makes use of the standardised Iur interface
between RNCs, when Node B information, measurements and results are collected.
The functional model presented in the figure includes functional entities for
UE utilising either or both circuit switched (CS) and packet switched (PS)
services. This model also supports of all the entities needed for different
positioning methods (e.g. network-based, UE-based, UE-assisted, and network
assisted (see note 1) methods) exploiting either uplink or downlink
measurements.
NOTE 1: In this approach UE may use the GPS technique but still make use of
auxiliary information from the serving network.
NOTE 2: Figure B.2 shows the SMLC as a node that implements the PCF. In
actuality it is more than the PCF, for example, the SMLC can provide GPS
assistance data. See Subclause 5.2.5 for the normative definition of an SMLC.
Figure B.1: UTRAN UE Positioning Functional Entities (RNC centric mode)
Figure B.2: UTRAN UE Positioning Functional Entities -- SAS version (RNC
centric mode)
Figure B.3: UTRAN UE Positioning Functional Entities -- SAS version (SAS
centric mode)
Several functional groupings may be defined to describe the UE Positioning
functions. These groupings occur in both the CN and the UTRAN. The overall LCS
functional grouping is described in reference [13]. Each grouping encompasses
a number of functional components and functions.
Within UTRAN the functional entities may be grouped as follows:
\- the _Internal Client_ group that includes:
\- Internal UTRAN Location Client Function (U-LCF);
\- the _UTRAN System Handling_ group that includes:
For RNC centric mode:
\- UTRAN Location System Control Function (U-LSCF),
\- UTRAN Location System Operations Function (U-LSOF);
For SAS centric mode:
> \- UTRAN Location Information Relay Function (U-LIRF)
>
> \- UTRAN Location System Control Function in SAS (U-LSCFS)
>
> \- UTRAN Location System Assistance Data Function (U-LSADF)
\- the _UTRAN Positioning_ group that includes:
\- UTRAN Position Radio Co-ordination Function (U-PRCF),
\- UTRAN Position Calculation Function (U-PCF),
\- UTRAN Position Signal Measurement Function (U-PSMF),
\- UTRAN Position Radio Resource Management (U-PRRM).
> \- UTRAN Position Related Communication Function (U-PRComF) for SAS centric
> mode.
The functions within the UTRAN are described in more detail in the following
subclauses.
## B.1 Internal Client Group
### B.1.1 Internal UTRAN Location Client Function (U-LCF)
The UTRAN Location Client Function (U-LCF) represents a logical interface
between the internal UTRAN LCS applications and the LCS RNC Handling entities
(e.g. the Location System Control Function (U-LSCF) in the RNC).
NOTE: There is not necessarily a requirement for a LCCF (Location Client
Control Function) for the UTRAN Internal Client as is described for external
clients in reference [13] (the system stage specification).
The UTRAN may make use of positioning information for internal operations such
as location assisted handover. In such a case, a U-LCF representing the
internal UTRAN LCS application may communicate with the U-LSCF to request and
receive the positioning information.
## B.2 UTRAN System Handling group
### B.2.1 UTRAN Location System Control Function (U-LSCF)
The UTRAN Location System Control Function (U-LSCF) **in RNC** is responsible
for co-ordinating UE Positioning requests within the RNC handling entity. This
function manages call-related and non-call-related UE Positioning requests and
allocates network resources for handling them. This function \"insulates\" the
Location clients in the Core Network from the detailed operation of the
positioning method in order that the UTRAN may be used by several types of
core network and with several positioning methods.
The U-LSCF provides flow control between simultaneous UE Positioning requests.
Simultaneous UE Positioning requests must be queued in a controlled manner to
account for priority requests (e.g. for Emergency Clients). The details of the
flow control, priority selection and queuing are beyond the scope of the
present document.
The U-LSCF will select the appropriate positioning method based on the
availability of resources and parameters of the UE Positioning request. The
U-LSCF co-ordinates resources and activities needed to obtain data (e.g. Node
B geographic co-ordinates) needed for the positioning method. It also records
LCS RNC usage data for the location service request that may be passed to a
Location System Recording Function (U-LSRF) or OA&M function in the Core
Network.
If the positioning method requires the broadcast of system information, the
LSCF initiates and maintains this activity through the Position Radio Co-
ordination Function (U-PRCF). Broadcast information (such as the geographic
co-ordinates of the Node Bs) may be required, for example, to support a
Position Calculation Function (U-PCF) located in the UE. These broadcasts may
also include other information (such as currently observable satellites) that
may assist a UE in the use of external location services.
The information to be broadcast is selected based on the positioning methods
offered for use by the LCS and the needs of the UE. This broadcast information
may be specially coded (i.e. encrypted) to ensure its availability only to
subscribers of the service. The use of broadcasts or other methods for
signalling to the UE or the LMU may be selected based on the chosen
positioning method.
The information to be broadcast could include, for example:
\- identification and spreading codes of the neighbouring Node Bs (the
channels that are used for measurements);
\- Relative Time Difference (RTD), i.e. the timing offsets, asynchronicity
between Node Bs, could be obtained from measurement results obtained by LMUs;
\- roundtrip delay estimates in connected mode;
\- the geographic position, co-ordinates, of the neighbouring Node Bs;
\- the idle period places within the frame structure for multiple Node Bs;
\- the local time-of-day.
Some of this information may be broadcast to support other UTRAN operations
(e.g. handover). The function of the LSCF is to ensure information is
broadcast when needed for the LCS operations and the LSCF may make use of
other UTRAN processes to do so.
### B.2.2 UTRAN Location System Operations Function (U-LSOF)
The UTRAN Location System Operations Function (U-LSOF) is responsible for
provisioning of data, positioning capabilities, data related to clients and
subscription (LCS client data and UE data), fault management and performance
management of LCS within the RNC.
An LSOF may be associated with each entity. The LSOF interacts with Internal
(OAM) Clients for administration and maintenance of the data.
The Iur interface may pass messages relating to changes or reporting of the
data associated with the LSOF in the RNC.
The Iub interface may pass messages relating to changes or reporting of the
data associated with the LSOF in the Node B or the LMU.
The Uu interface may pass messages relating to changes or reporting of the
data associated with the LSOF in the UE or the remote LMU. When the SAS is
present, with either RNC or SAS centric mode, the U-LSOF may be split across
SAS and SRNC.
### B.2.3 UTRAN Location Information Relay Function (U-LIRF)
The UTRAN Location Information Relay Function (U-LIRF) is responsible for
forwarding of Location Requests from to the LCS clients to the U-LSCFS and for
forwarding of UE positioning estimates to the requesting LCS client. The
U-LRIF also interfaces with the U-LSOF to obtain provisioned location
information.
The U-LIRF communicates with the U-LSADF to handle assistance data requests
received from the CN. The U-LIRF also forwards the UE positioning capability
information and a coarse position estimate to the U-LSCFS.
### B.2.4 UTRAN Location System Control Function in SAS (U-LSCFS)
The UTRAN Location System Control Function in SAS (U-LSCFS) is only used in
the SAS centric mode. It performs similar tasks as the U-LSCF in the RNC
centric mode, but instead of communicating directly with the LCS clients, it
communicates with the U-LIRF in the SRNC.
### B.2.5 UTRAN Location System Assistance Data Function (U-LSADF)
The UTRAN Location System Assistance Data Function (U-LSADF) is responsible
for the handling location related assistance data within the RNC. This
includes handling of location related assistance data requests from the CN and
the broadcasting of location related assistance data, if requested by the
U-LSCFS.
## B.3 Positioning group
### B.3.1 UTRAN Position Radio Co-ordination Function (U-PRCF)
The UTRAN Position Radio Co-ordination Function (U-PRCF) manages a UE
Positioning for a UE through overall co-ordination and scheduling of resources
to perform positioning measurements. This function interfaces with the U-PSMF,
the U-PRRM and the U-PCF. The U-PRCF determines the positioning method to be
used based on the UE Positioning request, the QoS, the capabilities of the
UTRAN, and the UE\'s capabilities. The U-PRCF also manages the needed radio
resources through the U-PRRM. It determines which U-PSMFs are to be involved,
what to measure, and obtains processed signal measurements from the U-PSMF.
Some positioning methods may involve measurements made at the UE. In this case
the U-PRCF interfaces with the UE to obtain the measurements (or the
positioning results if they have been determined by the UE). Some positioning
methods may involve measurements or information from several sources,
including radio units at several Node B (or other LMU) and involve a series of
transmissions and receptions. The U-PRCF entity also provides ancillary
measurements in case of network-assisted positioning method. Ancillary
information may be extracted from navigating systems like GPS.
The U-PRCF forwards the signal measurement data to the U-PCF.
It is the function of the U-PRCF to co-ordinate the sequence of activities and
compensate for failures (if they occur) to provide the position estimate. In
SAS centric mode the U-PRCF communicates to LMU, NodeB and UE via the
U-PRComF.
### B.3.2 UTRAN Position Calculation Function (U-PCF)
The UTRAN Position Calculation Function (U-PCF) is responsible for calculating
the position of the UE. This function applies an algorithmic computation on
the collected signal measurements to compute the final position estimate and
accuracy.
The U-PCF may also support conversion of the position estimate between
different geographic reference systems. It may obtain related data (e.g.: Node
B geographic co-ordinates) needed for the calculation. There may be more than
one calculating function available within, or associated with, the calculation
function of the UTRAN.
In the cell ID based positioning method, the U-PCF shall determine the
geographical co-ordinates corresponding to the cell(s) associated with the
target UE.
The PCF is also responsible for estimating the accuracy of the position
estimate. This accuracy estimate should include, for example, the effect of
geometric dilution of precision (GDOP), the capabilities of the signal
measuring hardware, the effects of multipath propagation and the effects of
timing and synchronisation unknowns. The accuracy should be returned as a
measure of distance in the same units as the position estimate. The accuracy
zone may be reported as the axis and orientation of an ellipse surrounding the
position estimate.
### B.3.3 UTRAN Position Signal Measurement Function (U-PSMF)
The UTRAN Position Signal Measurement Function (U-PSMF) is responsible for
performing and gathering uplink or downlink radio signal measurements for use
in the calculation of a UE position. These measurements can be positioning
related or ancillary.
There may be one or more PSMF within a UTRAN and they may be located at the
UE, the Node B, or a separate LMU. The PSMF, generally, may provide
measurement of signals (i.e. satellite signals) in addition to measurements of
the UTRA radio transmissions. The measurements to be made will depend on the
selected positioning method.
### B.3.4 UTRAN Position Radio Resource Management (U-PRRM)
The UTRAN Position Radio Resource Management (U-PRRM) entity is responsible
for managing the effect of LCS operations on the overall performance of the
radio network. This may ensure, for example, that the operation of the U-PSMF
does not degrade the QoS of other calls. The U-PRRM handles following
functions:
\- controlling the variation of the UL and DL signal power level due to the
LCS application;
\- calculating the DL and UL power/interference due to UE positioning
operations;
\- to admit/reject the new LCS requests;
\- co-operating with Admission Control, and entities of the RRM (such as power
control) to provide the system stability in terms of radio resources;
\- controlling the RTD obtaining mechanism. It may also forward the results of
the UTRAN GPS timing of cell frames or SFN-SFN Observed Time Difference (or
any similar timing parameter) measurements to the PRCF (or PCF);
\- controlling the IPDL mechanism for positioning measurements. This may
include the overall control of the periodical measurement fulfilment. Co-
ordination among RNCs (e.g. to assure non-overlapping idle periods) will be
communicated through the Iur interface.
### B.3.5 UTRAN Position Related Communication Function (U-PRComF)
The UTRAN Position Related Communication Function (U-PRComF) manages the
collection of positioning measurements as requested by the U-PRCF.
The U-PRComF terminates the NBAP protocol for positioning related measurements
requested from NodeB or LMU.
The U-PRComF terminates the RRC protocol for positioning related measurements
requested from the UE.
## B.4 Assignment of LCS Functional Entities to UTRAN Elements
Figure B.1, Figure B.2, Figure B.3 and tables B.1 and B.2 show the generic
configuration for different positioning methods, including network-based, UE-
based, UE-assisted and network-assisted methods. With this approach both UTRAN
and the UE are able to measure the timing of signals and compute the UE
position estimate. Depending on the applied positioning method it is possible
to utilise the corresponding configuration containing all needed entities. For
instance, if a network-based positioning method is applied, the entities that
are involved in measuring the UE\'s signal and calculating its position
estimate are allocated to the network elements of the access stratum. On the
other hand, in case UE-based or network-assisted methods are used these
entities should be allocated to the UE.
Table B.1: Example Allocation of LCS Functional Entities to Network Elements
for RNC centric mode
* * *
UTRAN UE Node B LMU RNC SAS LCF X X  
LSCF X  
PRCF X  
PCF X X X PRRM X  
PSMF X X X  
LSOF X X X X
* * *
Table B.2: Example Allocation of LCS Functional Entities to Network Elements
for SAS centric mode
* * *
UTRAN UE Node B LMU RNC SAS LCF X X  
LSCFS X LIRF X  
PRCF X PCF X X PRRM X  
PSMF X X X  
LSOF X X X X X PRComF X
* * *
###### ## Annex C (informative): Location Services Categories
Generally there are four categories of usage of the location service:
\- the **Commercial LCS** (or **Value Added Services**);
\- the **Internal LCS** ;
\- the **Emergency LCS** ;
\- the **Lawful Intercept LCS**.
These location services categories are further defined in [13] and [5].
#