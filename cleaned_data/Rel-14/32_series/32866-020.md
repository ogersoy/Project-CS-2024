# Foreword
This Technical Report has been produced by the 3rd Generation Partnership
Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# Introduction
# 1 Scope
The present document ...
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or non‑specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[x] ETSI NFV SOL 17 NFVSOL(17)000050r1: \"SOL REST API convention collection
living document (2017-01-30)\".
[y] ETSI GS NFV SOL 003 V0.6.0 (2017-01): \"RESTful protocols specification
for the Or-Vnfm Reference Point\".
[z] Draft ETSI GS MEC 009 V0.7.1 (2017-02): \"Mobile Edge Computing (MEC);
General principles for Mobile Edge Service APIs\".
[t] IETF RFC 6421: \"Network Configuration Protocol (NETCONF)\"
(https://www.ietf.org/rfc/rfc6241.txt).
[u] IETF RFC 8040: \"RESTCONF Protocol\"
(https://www.ietf.org/rfc/rfc8040.txt).
[a1] IETF RFC 7230: \"Hypertext Transfer Protocol (HTTP/1.1): Message Syntax
and Routing\" (https://www.ietf.org/rfc/rfc7230.txt).
[a2] IETF RFC 7231: \"Hypertext Transfer Protocol (HTTP/1.1): Semantics and
Content\" (https://www.ietf.org/rfc/rfc7231.txt).
[a3] IETF RFC 3986: \"Uniform Resource Identifier (URI): Generic Syntax\"
(https://www.ietf.org/rfc/rfc3986.txt).
[a4] 3GPP TS 32.300: \"Name convention for managed objects\".
[a5] ETSI GS NFV SOL 003 (V0.7.0): RESTful protocols specification for the Or-
Vnfm Reference Point \".
[a6] 3GPP TS 32.602: \"Telecommunication management; Configuration Management
(CM); Basic CM Integration Reference Point (IRP); Information Service (IS)\".
[a7] 3GPP TS 32.111-2: \" Telecommunication management; Fault Management; Part
2: Alarm Integration Reference Point (IRP): Information Service (IS)\".
[v] OpenAPI Specification Version 2.0\ https://github.com/OAI/OpenAPI-
Specification/blob/master/versions/2.0.md
# 3 Definitions, and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
3GPP TR 21.905 [1] and the following apply. A term defined in the present
document takes precedence over the definition of the same term, if any, in
3GPP TR 21.905 [1].
**example:** text used to clarify abstract rules by applying them literally.
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in 3GPP TR
21.905 [1] and the following apply.\ An abbreviation defined in the present
document takes precedence over the definition of the same abbreviation, if
any, in 3GPP TR 21.905 [1].
\ \
# 4 IRP design principles
# 5 Evaluation of existing Solution Sets
# 6 Alternative Solution Sets
## 6.1 RESTful HTTP-based Solution Set
### 6.1.1 REST API specification in ETSI NFV SOL 17 [x]
#### 6.1.1.1 API patterns
ETSI NFV SOL 17 [x] collects all agreed REST API conventions to be applied to
the SOL REST APIs (SOL002, SOL003 and SOL005 at the time of writing). In
clause 5 of this document, the following two patterns are described:
\- Subscribe-Notify
\- Links
#### 6.1.1.2 Example specifications
IN ETSI NFV ISG, REST API specifications are ongoing, e.g. for the Or-Vnfm
reference point (see [y]).
### 6.1.2 RESTCONF Protocol in IETF RFC 8040 [u]
IETF has specified in RFC 6421 [t] a configuration management protocol
(NETCONF). A RESTified version (RESTCONF) is available in RFC 8040 [u].
### 6.1.3 Mobile Edge Service APIs in ETSI MEC 009 [z]
ETSI ISG MEC 009 [z] defines RESTful mobile edge service APIs. These APIs
shall be developed based on common principles and patterns defined in ETSI GS
MEC 009 [z]. This document provides a rich source for the development of own
guidelines.
## 6.2 xyz Solution Set
# 7 Common principles and design patterns for a RESTful HTTP-based Solution
Set
## 7.1 Input material
As described earlier there are already numerous SDO/fora using RESTful HTTP-
based solution sets. SA5 should this material as input for its work and study
possible alignment options.
## 7.2 Short review of REST
### 7.2.1 REST design principles
### 7.2.2 REST implementation levels
## 7.3 Short review of HTTP
### 7.3.1 Message Format
In RFC 7230 [a1] the general format of a message is given by
HTTP-message = start-line
*( header-field CRLF )
CRLF
[ message-body ]
with
start-line = request-line / status-line
request-line = method SP request-target SP HTTP-version CRLF
method = token
token = 1*tchar
tchar = \"!\" / \"#\" / \"\$\" / \"%\" / \"&\" / \"'\" / \"*\" / \"+\" / \"-\"
/ \".\" /
\"\^\" / \"_\" / \"'\" / \"\|\" / \"˜\" / DIGIT / ALPHA
request-target = origin-form
/ absolute-form
/ authority-form
/ asterisk-form
HTTP-name = %x48.54.54.50 ; HTTP
HTTP-version = HTTP-name \"/\" DIGIT \".\" DIGIT
status-line = HTTP-version SP status-code SP reason-phrase CRLF
status-code = 3DIGIT
reason-phrase = *( HTAB / SP / VCHAR / obs-text )
header-field = field-name \":\" OWS field-value OWS
field-name = token
field-value = *( field-content / obs-fold )
field-content = field-vchar [ 1*( SP / HTAB ) field-vchar ]
field-vchar = VCHAR / obs-text
obs-fold = CRLF 1*( SP / HTAB )
; obsolete line folding
; see Section 3.2.4
message-body = *OCTET
### 7.3.2 HTTP methods
RFC 7231 [a2] defines eight methods.
GET
Editors's note: short definition to be added
HEAD
Editors's note: short definition to be added
POST
Editors's note: short definition to be added
PUT
Editors's note: short definition to be added
DELETE
Editors's note: short definition to be added
CONNECT
Editors's note: short definition to be added
OPTIONS
Editors's note: short definition to be added
TRACE
Editors's note: short definition to be added
RFC 5789 defines the PATCH method
PATCH
Editors's note: short definition to be added
### 7.3.3 HTTP resources
HTTP requests act on resources identified by a Uniform Resource Identifier
(URI). Resources can be created, read, updated or deleted (CRUD).
### 7.3.4 Uniform Resource Identifiers (URIs)
URIs are used in HTTP as a means for identifying resources. The generic URI is
defined in RFC 3986 [a3] by
URI = scheme \":\" hier-part [ \"?\" query ] [ \"#\" fragment ]
hier-part = \"//\" authority path-abempty
/ path-absolute
/ path-rootless
/ path-empty
HTTP uses a subset of the generic URI scheme defined in RFC 7230 [b] as
http-URI = \"http:\" \"//\" authority path-abempty [ \"?\" query ]
[ \"#\" fragment ]
where
authority = \
path-abempty = \
query = \
fragment = \
and
authority = [ userinfo \"@\" ] host [ \":\" port ]
path-abempty = *( \"/\" segment )
query = *( pchar / \"/\" / \"?\" )
fragment = *( pchar / \"/\" / \"?\" )
and
segment = *pchar
pchar = unreserved / pct-encoded / sub-delims / \":\" / \"@\"
unreserved = ALPHA / DIGIT / \"-\" / \".\" / \"_\" / \"˜\"
pct-encoded = \"%\" HEXDIG HEXDIG
sub-delims = \"!\" / \"\$\" / \"&\" / \"'\" / \"(\" / \")\"
/ \"*\" / \"+\" / \",\" / \";\" / \"=\"
Example:
foo://example.com:8042/over/there?name=ferret#nose
\\_/ \\______________/\\_________/ \\_________/ \\__/
\| \| \| \| \|
scheme authority path query fragment
Editor's note: It is ffs if a length restriction needs to be introduced for
the URI.
## 7.4 Usage of HTTP
### 7.4.1 URI structure
The URI should follow a common structure. One possibility is to align with
ETSI GS NFV SOL 003 [a5]. In this case the URI without the query component
follows the structure
URI = {URI-prefix}/{resourcepath}
URI-prefix = {irpRoot}/{irpName}/{irpVersion}
Editor's note: It is ffs if above should be expressed in ABNF.
where
{irpRoot} indicates the scheme ("http" or "https"), the host name and optional
port, and an optional prefix path.
{irpName} indicates the IRP name
{irpVersion} indicates the version of the IRP.
Editor's note: It is ffs, how to map the DN prefix into this scheme.
When comparing this URI scheme to the http-URI you get
http-URI = \"http:\" \"//\" host [ \":\" port ] path-abempty [ \"?\" query ]
\\___________________________/\\___/ \\___/
\| \| \|
irpRoot irpName irpVersion
Example:
http://example.com:80/basicCmIRP/V1/...
The optional userinfo component shall not be used.
Editor's note: The use of the fragment component is ffs
### 7.4.2 Resource identification
TS 32. 300 [a4] defines the approach for naming a MOI as follows
"ITU-T Recommendation X.500 [2] uses the AttributeType (defined for use as the
first component of the AttributeTypeAndValue of a RDN) to identify one
attribute of the subject MO for naming purpose. This AttributeType is called
the _naming attribute_ to distinguish itself from other attributes that may be
present in the MO."
Based on this definition, the RDN can be defined as
RDN = \"/\"{namingAttribute} \"/\" {namingAttributeValue}
and the resource path is the concatenation of RDNs separated by \"/\".
resourcePath = *( \"/\" RDN )
**Example:**
.../SubNetwork/south/IRPAgent/5/ManagedElement/Berlin6754/ENBFunction/1
Editor's note: It is ffs if the namingAttributeValue can be allocated by the
HTTP client or is allocated by the HTTP server. In case it is allocated by the
HTTP server it is a hexadecimal value. The above example assumes that the
value has been allocated by the HTTP client, or more specifically by an
operator, since the value carries some semantics.
In this approach, each managed object instance is mapped to a top-level
resource. It is also possible to define some sort of container resource for
the instantiated NRM.
Editor's note: The container approach is ffs and needs to be compared with the
approach where each MOI is mapped to a top-level resource.
### 7.4.3 Usage of HTTP headers and footers
### 7.4.4 Metadata language for the message body
#### 7.4.4.1 Data transport language
There are two commonly-used languages used to transport data in a RESTful
message body; JSON and XML.
JSON is optimized for the transport of models, while XML is optimized for the
transport of documents.
Because the communication between IRP Manager and IRP Agent is based on
information models, JSON is recommended as the data transport language.
#### 7.4.4.2 Specification language
To provide a machine-readable version of an interface specification, 3GPP
publishes a Solution Set document which formally describes the schema for each
interface. A similar formal schema will be needed for each RESTful interface.
For JSON, there are two parts to this formal description
\- The behaviour of the API may be described using the Swagger language, as
defined in the OpenAPI specification [v].
\- The format of the JSON document may be described by a JSON Schema, as
defined in the OpenAPI specification [v].
Swagger descriptions and JSON Schemas may be expressed as either JSON
documents or as YAML documents. JSON and YAML are fully interchangeable. It is
recommended that YAML should be used in 3GPP documentation because YAML is
more human-friendly. Using a human-friendly format may help to reduce errors
while writing specifications.
#### 7.4.4.3 Support for Network Resource Models
As part of the Solution Set for an Interface IRP, there must be a description
of how the Network Resource Model will be transported on the interface. A
placeholder for the Network Resource Model must be created. Figure 7.4.4.3.1
shows an example of how a SOAP Solution Set describes a placeholder (marked in
red) for a managed object.
**Figure 7.4.4.3.1: Example of placeholder for Network Resource Model in SOAP
Solution Set**
In a RESTful interface, it is possible to transport multiple files in a single
request. This allows the possibility that the Network Resource Model could be
described in a JSON document that is separate from the main body of the
request. This has the advantage that the Network Resource Model descriptor
could be validated in real time, because it is not embedded as part of another
document. Figure 7.4.4.3.2 shows an example of how a JSON Solution Set could
describe an external reference (marked in red) for a managed object.
**Figure 7.4.4.3.2: Example of external file for Network Resource Model in
JSON Solution Set**
## 7.5 Design Patterns
### 7.5.1 Design pattern for READ operations
READ operations shall be mapped to the HTTP GET method.
### 7.5.2 Design pattern for UPDATE operations
WRITE operations shall be mapped to the HTTP PUT or the HTTP PATCH method.
### 7.5.3 Design pattern for CREATE operations
CREATE operations shall be mapped to the HTTP POST method.
### 7.5.4 Design pattern for DELETE operations
DELETE operations shall be mapped to the HTTP DELETE method.
### 7.5.5 Design pattern for SUBSCRIBE/NOTIFY operations
This pattern uses the HTTP POST method. To subscribe to notifications the
subscriber sends a POST request to the server indicating -- in the message
body - the HTTP endpoint to which notifications shall be sent to, and
including information about the type of notifications that are subscribed to.
Additional filter information may be included in the message body as well.
Subscription requests are sent to a so-called container resource or parent
resource. Subscription resources are created below this resource.
To send a notification the server sends a POST request to the client
identified by HTTP endpoint address. The actual notification content is
included in the message body of the POST request.
Editor's note: An example should be added
### 7.5.6 Design pattern for TASK operations
Due to their complexity, some operations cannot be mapped easily into CRUD
operations. For these operations task resources are introduced. Reasons for
escaping to task operations include
  * Editor's note: Reasons are to be added
Task resources are created below a parent resource to which the task is
related to. The tasks are invoked by sending a POST request to the resource.
Input parameters can be specified in the message body of the POST request.
Output parameters can be returned in the message body of the POST response.
The name of the resource should be a verb describing the invoked action
.../foo/doSomething
Task resources are created automatically by the HTTP server once the parent
resource is created. The HTTP client does not need to create them.
Editor's note: It is ffs if another pattern for asynchronous operations is
needed.
### 7.5.7 Design pattern for scoping and filtering
The hierarchical path component in the URI serves to identify a resource,
called the base resource. The scope defines the resources below the base
resource or at the same level as the base resource to be selected for
filtering. The scoped resources that match the filter criteria are those on
which the HTTP operation is being applied to.
The query component in the URI is used for scoping and filtering. The query
component is indicated by the first question mark (\"?\") character and
terminated by a number sign (\"#\") character or by the end of the URI.
In RFC3986 [a3] the query component is defined as
query = *( pchar / \"/\" / \"?\" )
A filter language is not defined. In ETSI GS NFV SOL 003 the following filter
language is specified
simpleFilterExpr := \[\".\"\]*\".\"\\"=\"\
filterExpr := \"?\"\[\"&\"\]*
op := \"eq\" \| \"neq\" \| \"gt\" \| \"lt\" \| \"gte\" \| \"lte\" \| \"cont\"
\|\ \"ncont\"
attrName := string
with
* * *
Operator \ Meaning \.eq=\[,\]* Attribute **equal**
to one of the values in the list \.neq=\[,\]*
Attribute **not** **equal** to any of the values in the list
\.gt=\ Attribute **greater than** \
\.gte=\ Attribute **greater than or equal** to \
\.lt=\ Attribute **less than** \
\.lte=\ Attribute **less than or** **equal** to \
\.cont=\[,\]* Attribute **contains** (at least) one of
the values in the list \.ncont=\[,\]* Attribute **does
not** **contain** any of the values in the list
* * *
Editor's note: It is ffs if this filter language shall be adopted.
The scope can be defined as follows:
...?scopeType={scopeTypeValue}&scopeLevel={scopeLevelValue}
scopeTypeValue = \"BASE_ONLY\" / \"BASE_NTH_LEVEL\" / \"BASE_SUBTREE\" /
\"BASE_ALL\"
scopeLevelValue = *DIGIT
Editor's note: It is ffs how the information is returned to the client for the
case that more than one resource is scoped and passes the filter criteria.
The scope types are defined in TS 32.602 [a6]
## 7.6 Example mapping of IRPs
### 7.6.1 Mapping of Network Resource Model (NRM) IRPs to resources
Each Managed Object Instance (MOI) is mapped to a HTTP resource.
### 7.6.2 Mapping of Interface IRPs to resources
##### Example mapping of the Basic CM IRP
The Information Service of the Basic CM IRP is defined in 3GPP TS 32.602 [a6]
and features the following operations
* * *
**IS operation** **Description** createMO Operation allows to create one MOI
deleteMO Operation allows to create one MOI or (through scoping and filtering)
multiple MOIs setMOAttributes Operation allows to set the attributes of one
MOI or (through scoping and filtering) multiple MOIs getMOAttributes Operation
allows to read the attributes of one MOI or (through scoping and filtering)
multiple MOIs getContainment Operation to get the containment starting from
the specified base object cancelOperation Operation to cancel an ongoing Basic
CM operation
* * *
**Case 1: The operations relate to one and only one managed object instance
(resource)**
In this case the resource is identified by the URI. The scope is the base
object alone. Filter constraints can be specified in the query component.
In this case the IS operations can be mapped directly into HTTP methods as
specified in the following table.
Editor's note: The mapping of the operations cancelOperation and
getContainment is ffs.
* * *
**IS operation** **HTTP method** createMO POST deleteMO DELETE setMOAttributes
PATCH/PUT getMOAttributes GET cancelOperation tbc getContainment tbc
* * *
**Example: Get all attributes of a resource**
Request:
GET .../SubNetwork/south/IRPAgent/5/ManagedElement/6/ENBFunction/Berlin6754
Response:
Returns in the message body the resource instance in JSON.
**Case 2: The operations relate to a scope with more than one managed object
instance (resource)**
This case is ffs.
##### Example mapping of the Alarm IRP
The Information Service of the Alarm IRP is specified in TS 32.111-2 [a7].
**1\. Possibility** : The IS level operations are mapped to task resources.
The parent resource of the task resource is the IS level interface like
AlarmIRPOperations_1.
POST .../AlarmIRP/V1/getAlarmList
POST .../AlarmIRP/V1/acknowledgeAlarms
POST .../AlarmIRP/V1/getAlarmCount
POST .../AlarmIRP/V1/unacknowledgeAlarms
POST .../AlarmIRP/V1/setComment
POST .../AlarmIRP/V1/clearAlarms
This approach is consistent with the definition that support IOCs defined on
IS level are not visible and accessible except through the input and output
parameters of operations. On the other hand, in a design following REST
principles, task resources should be avoided.
**2\. Possibility** : In this approach CRUD operations are directly invoked on
the support IOCs. This is not compliant to the IS level definitions of support
IOCs, but to REST principles.
GET .../AlarmIRP/V1400/AlarmIRP/1/AlarmList/1/getAlarmList
GET .../AlarmIRP/V1400/AlarmIRP/1/AlarmList/1/alarmInformation/23/setComment
Editor's note: It is ffs if more possibilities exist and what is the best
approach.
## 7.7 Example mapping of solution set
### 7.7.1 Example of defining types
Figure 7.7.1.1 shows an example of how a common type is defined in a SOAP
Solution Set.
**Figure 7.7.1.1: Example of common type definition in SOAP Solution Set**
Figure 7.7.1.2 shows how this example may be defined in a JSON Solution Set
(expressed in YAML to aid readability).
**Figure 7.7.1.2: Example of common type definition in JSON Solution Set**
### 7.7.2 Example of defining managed objects
Figure 7.7.2.1 shows an example of how a managed object is defined in a SOAP
Solution Set.
**Figure 7.7.2.1: Example of managed object definition in SOAP Solution Set**
Figure 7.7.2.2 shows how this example may be defined in a JSON Solution Set
(expressed in YAML to aid readability).
**Figure 7.7.2.2: Example of managed object definition in JSON Solution Set**
## 7.8 REST SS template
This chapter provides the REST SS template.
# 8 Recommendations
###### ### Annex A: About TM Forum REST API specifications
## A.1 REST API design guidelines
This section provides information regarding the development of TM Forum APIs
using REST. Documents in Annex X provide recommendations and guidelines for
the implementation of Entity CRUD operations and Task operations. They also
provide information on filtering and attribute selection. Finally they provide
information on supporting notification management in REST based systems.
### A.1.1 General concepts
\- A Managed Resource is e.g. a database record or a managed entity. Its
representation includes fields with values and links to related resources.
Client can create, query, update and delete (CRUD) managed resources;
\- A Resource Collection is a server managed collection of resources;
\- Executable functions are of two kinds:
\- CRUD methods
\- Tasks.
\- REST APIs embrace all aspects of HTTP 1.1, including its requests methods,
response codes and message headers.
#####
### A.1.2 Operations
* * *
Type of operation API operation Description Query managed entities GET
Resource GET must be used to retrieve a representation of a resource. Create
managed entity POST Resource POST must be used to create a new resource
Partial Update of a managed entity PATCH Resource PATCH must be used to
partially update a resource Complete Update of a managed entity PUT Resource
PUT must be used to completely update a resource Remove a managed entity
DELETE Resource DELETE must be used to delete a resource Execute an Action on
a managed entity POST on TASK Resource POST must be used to execute actions
other than CRUD.
* * *
### A.1.3 Media types
\- REST methods may be able to transfer data in XML or JSON; each is
represented by its media type
\- REST APIs MUST support the JSON media type
\- The default for resource representation MUST be JSON
\- XML and other formats may optionally be supported via content negotiation
between the client and the server.
## A.2 Example TM Forum REST APIs
Here below is an non exhaustive list of REST APIs specified by TM Forum:
\- Trouble Ticket API
\- Customer Management API
\- Product Catalog Management API
\- Product Inventory Management API
\- Performance Management API, etc.
###### ### Annex B: Bibliography
TMF 630 TM Forum REST API Design Guidelines Part 1- Practical guidelines for
RESTful APIs naming, CRUD, filtering, notifications. Release 14.5.1 \-- March
2015
TMF 631 TM Forum REST API Design Guidelines Part 2 -- Advanced guidelines for
RESTful APIs lifecycle management, polymorphism, common tasks. Release 14.5.1
-- March 2015
#