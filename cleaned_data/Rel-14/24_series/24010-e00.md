# Foreword
This Technical Specification (TS) has been produced by the 3^rd^ Generation
Partnership Project (3GPP).
The present document defines the general aspects of the specification of
supplementary services at the layer 3 radio interface within the 3GPP system.
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document gives the general aspects of the specification of
supplementary services at the layer 3 radio interface.
3GPP TS 24.08x and 24.09x‑series specify the procedures used at the radio
interface (reference point Um as defined in 3GPP 24.002) for normal operation,
registration, erasure, activation, deactivation, invocation and interrogation
of supplementary services. Provision and withdrawal of supplementary services
is an administrative matter between the mobile subscriber and the service
provider and cause no signalling on the radio interface.
3GPP TS 24.008 [48] and 3GPP TS 24.080 [27] specifies the formats and coding
for the supplementary services.
Definitions and descriptions of supplementary services are given in 3GPP TS
22.004 and 3GPP TS 22.08x and 22.09x‑series.
Technical realization of supplementary services is described in 3GPP TS 23.011
and GSM 23.08x and 23.09x‑series.
The procedures for Call Control, Mobility Management and Radio Resource
management at the layer 3 radio interface are defined in 3GPP TS 24.007 [49]
and 3GPP TS 24.008 [48].
## 1.1 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or non‑specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TS 21.905: \"Abbreviations and acronyms\".
[2] 3GPP TS 22.004: \"General on supplementary services\".
[3] 3GPP TS 22.081: \"Line identification supplementary services ‑ Stage 1\".
[4] 3GPP TS 22.082: \"Call Forwarding (CF) supplementary services ‑ Stage 1\".
[5] 3GPP TS 22.083: \"Call Waiting (CW) and Call Hold (HOLD) supplementary
services ‑ Stage 1\".
[6] 3GPP TS 22.084: \"MultiParty (MPTY) supplementary services ‑ Stage 1\".
[7] 3GPP TS 22.085: \"Closed User Group (CUG) supplementary services ‑ Stage
1\".
[8] 3GPP TS 22.086: \"Advice of charge (AoC) supplementary services ‑ Stage
1\".
[9] 3GPP TS 22.088: \"Call Barring (CB) supplementary services ‑ Stage 1\".
[10] 3GPP TS 22.090: \"Unstructured Supplementary Services Data (USSD) ‑ Stage
1\".
[11] 3GPP TS 22.091: \"Explicit Call Transfer (ECT) supplementary service ‑
Stage 1\".
[12] 3GPP TS 23.011: \"Technical realization of supplementary services\".
[13] 3GPP TS 23.081: \"Line identification supplementary services ‑ Stage 2\".
[14] 3GPP TS 23.082: \"Call Forwarding (CF) supplementary services ‑ Stage
2\".
[15] 3GPP TS 23.083: \"Call Waiting (CW) and Call Hold (HOLD) supplementary
services ‑ Stage 2\".
[16] 3GPP TS 23.084: \"MultiParty (MPTY) supplementary services ‑ Stage 2\".
[17] 3GPP TS 23.085: \"Closed User Group (CUG) supplementary services ‑ Stage
2\".
[18] 3GPP TS 23.086: \"Advice of Charge (AoC) supplementary services ‑ Stage
2\".
[19] 3GPP TS 23.088: \"Call Barring (CB) supplementary services ‑ Stage 2\".
[20] 3GPP TS 23.090: \"Unstructured supplementary services operation ‑ Stage
2\".
[21] 3GPP TS 23.091: \"Explicit Call Transfer (ECT) supplementary service ‑
Stage 2\".
[22] 3GPP TS 24.002: \"GSM Public Land Mobile Network (PLMN) access reference
configuration\".
[23] 3GPP TS 24.003: \"Mobile Station ‑ Base Stations system (MS ‑ BSS)
interface; Channel structures and access capabilities\".
[24] 3GPP TS 24.004: \"Layer 1; General requirements\".
[25] 3GPP TS 44.005: \"Data Link (DL) layer; General aspects\".
[26] 3GPP TS 44.006: \"Mobile Station ‑ Base Station System (MS ‑ BSS)
interface; Data Link (DL) layer specification\".
[27] 3GPP TS 24.080: \"Mobile radio interface layer 3 supplementary services
specification; Formats and coding\".
[28] 3GPP TS 24.081: \"Line identification supplementary services ‑ Stage 3\".
[29] 3GPP TS 24.082: \"Call Forwarding (CF) supplementary services ‑ Stage
3\".
[30] 3GPP TS 24.083: \"Call Waiting (CW) and Call Hold (HOLD) supplementary
services ‑ Stage 3\".
[31] 3GPP TS 24.084: \"MultiParty (MPTY) supplementary services ‑ Stage 3\".
[32] 3GPP TS 24.085: \"Closed User Group (CUG) supplementary services ‑ Stage
3\".
[33] 3GPP TS 24.086: \"Advice of Charge (AoC) supplementary services ‑ Stage
3\".
[34] 3GPP TS 24.088: \"Call Barring (CB) supplementary services ‑ Stage 3\".
[35] 3GPP TS 24.090: \"Unstructured supplementary services operation ‑ Stage
3\".
[36] 3GPP TS 24.091: \"Explicit Call Transfer (ECT) supplementary service ‑
Stage 3\".
[37] 3GPP TS 45.001: \"Physical layer on the radio path; General
description\".
[38] 3GPP TS 45.002: \"Multiplexing and multiple access on the radio path\".
[39] 3GPP TS 45.003: \"Channel coding\".
[40] 3GPP TS 45.004: \"Modulation\".
[41] 3GPP TS 45.005: \"Radio transmission and reception\".
[42] 3GPP TS 45.008: \"Radio subsystem link control\".
[43] 3GPP TS 45.010: \"Radio subsystem synchronization\".
[44] GSM 05.90: \"Digital cellular telecommunications system; GSM Electro
Magnetic Compatibility (EMC) considerations\".
[45] 3GPP TS 29.002: \"Mobile Application Part (MAP) specification\".
[46] 3GPP TS 29.011: \"Signalling interworking for supplementary services\".
[47] CCITT Recommendation Q.774 (White Book): \"Specifications of Signalling
System No.7; Transaction capabilities procedures\".
[48] 3GPP TS 24.008: \"Core network protocols; Stage 3\".
[49] 3GPP TS 24.007: \"Mobile radio interface signalling layer 3; General
aspects\".
## 1.2 Abbreviations
Abbreviations used in the present document are listed in 3GPP TS 21.905.
# 2 Generic procedures for the control of supplementary services
## 2.1 Overview of the generic protocol and its scope
One generic protocol is defined for the control of supplementary services at
the radio interface. This protocol operates at layer 3 of the radio interface
and assumes the use of layers 1 and 2 conform to 3GPP TS 45‑series and 3GPP TS
44.004, 3GPP TS 44.005 and 3GPP TS 44.006. The generic protocol uses the
acknowledged information transfer service available at the layer 2 ‑ layer 3
interface.
The Functional protocol is based on the use of the Facility information
element and the FACILITY message as well as other specific functional messages
specified in 3GPP TS 24.080 [27].
Standardised services use a functional protocol. A transparent protocol is
also provided. The functional protocol requires the knowledge of the related
supplementary service by the mobile equipment supporting it. This facilitates
mobile equipment operation without human intervention by defining semantics
for the protocol elements which the mobile equipment can process on its own.
## 2.2 Functional procedures for the control of supplementary services
### 2.2.1 General
This clause specifies the functional signalling procedures for the control of
supplementary services at the radio interface.
The Functional protocol utilises functions and services provided by 3GPP TS
24.008 [48] basic call control procedures and the functions of the data link
layer as defined in 3GPP TS 44.00.
In UMTS only, integrity protected signalling (see TS 24.008 [48], subclause
'Integrity Protection of Signalling Messages,' and in general, see 3GPP TS
33.102) is mandatory. In UMTS only, all protocols shall use integrity
protected signalling. Integrity protection of all SS signalling messages is
the responsibility of lower layers. It is the network which activates
integrity protection. This is done using the security mode control procedure
(TS 25.331).
The defined procedures specify the basic methodology for the control (e.g.
registration, erasure, invocation, etc.) of supplementary services.
The first category, called the Separate Message Category utilises separate
message types to indicate a desired function. The hold and retrieve families
of messages are identified for this category.
The second category called the Common Information Element Category utilises
the Facility information element to transport the protocol defined in 3GPP TS
24.080 [27]. The use of the Facility information element is common to many
services, and its contents indicates what type of procedure is being
requested. This category can be signalled both in the mobile to network and
the network to mobile directions.
The control of supplementary services includes the following cases:
a) the request of supplementary service procedures during the establishment of
a call;
b) the request of supplementary service procedures during the clearing of a
call;
c) the request of call related supplementary service procedures during the
active state of a call;
d) the request of supplementary service procedures independent from an active
call;
e) the request of multiple, different supplementary service procedures within
a single message;
f) the request of supplementary service procedures related to different calls.
The correlation of a call related supplementary service operation and the call
which it modifies is provided by use of the transaction identifier (cases a,
b, c, e and f).
The correlation of supplementary service operations and their responses, is
provided by the combination of the transaction identifier of the messages
containing the Facility information element and the Invoke identifier present
within the Facility information element itself (cases a, b, c, d, e and f).
The identification of different supplementary service operations within one
single message is provided by the Invoke identifier present within the
Facility information element itself (case e).
The identification of supplementary service related operations to different
calls is provided by using different messages with the corresponding
transaction identifier of the appropriate call (case f), i.e. different
transaction identifier values are used to identify each call individually.
### 2.2.2 Separate Messages Category
The messages defined in this clause are specified as separate functional
messages for the request, acknowledgement and rejection of specific
procedures. These procedures can only be performed during the active phase of
a call. The functions of these messages are not to be duplicated or overlapped
by the ones of the Common Information Element Category.
The following separate messages are defined:
HOLD RETRIEVE
HOLD ACKNOWLEDGE RETRIEVE ACKNOWLEDGE
HOLD REJECT RETRIEVE REJECT.
For detailed description of the Hold and Retrieve functions see 3GPP TS
24.083.
### 2.2.3 Common Information Element Category
The Common Information Element Category uses operations defined in 3GPP TS
24.080 [27] for supplementary services signalling. Procedures are initiated by
sending an operation including an invoke component. The invoke component may
yield a Return Error, Return Result or Reject component (also included in an
operation) depending on the outcome of the procedure.
The operation state machines, and procedures for management of Invoke IDs
specified in CCITT Recommendation Q.774 White Book are used.
A REGISTER message, a FACILITY message or certain existing 3GPP TS 24.008 [48]
Call Control message is used to carry the Facility information element which
includes these operations. These operations request, acknowledge or reject the
desired supplementary service procedure.
### 2.2.4 Call related supplementary service procedures
#### 2.2.4.1 Supplementary service procedures at call establishment or call
clearing
For call related supplementary service procedures initiated at call
establishment or call clearing, the messages for call control specified in
3GPP TS 24.008 [48] are utilised to transport Facility information elements.
This enables, for example the originating mobile user to send a supplementary
service invoke component within a SETUP message and to receive from the
network a Return result, Return error, or Reject component type within the
Facility information element in an ALERTING message, CONNECT message, or any
other appropriate message.
When a supplementary service invoke component is included within a SETUP
message, the originating mobile station shall encode the Facility information
element identifier according to one of the three possible ways (see 3GPP TS
24.008 [48]):
a) simple recall alignment;
b) advanced recall alignment;
c) recall alignment not essential.
Encoding of the Facility IEI within the SETUP message for different
supplementary services is described in the subclause 2.2.4.1.1.
The three different ways of encoding are required to support the network
initiated mobile originating call establishment (see subclause 2.2.4.1.2 and
3GPP TS 24.008 [48]).
##### 2.2.4.1.1 Encoding of the Facility IEI for different supplementary
services
The table 2.1 shows the encoding of the Facility IEI within the SETUP message
for different supplementary services.
Table 2.1: Encoding of the Facility IE within the SETUP message
* * *
Service Facility IE Encoding CUG simple recall alignment UUS Advanced recall
alignment
* * *
##### 2.2.4.1.2 Supplementary service procedures at network initiated mobile
originating call establishment
The Facility and SS Version IE received in the set-up container of the
CC_ESTABLISHMENT message shall be handled according to the following rules:
The mobile station shall examine the IEI of the Facility IE.
If the Facility IEI coding is \"simple recall alignment\", the mobile station
shall copy the Facility IE and SS Version IE from the set-up container to the
SETUP message without verifying or modifying the contents of these information
elements.
If the Facility IEI is encoded as \"advanced recall alignment\", the mobile
station shall examine the SS Version IE.
If the mobile station recognises the protocol defined by the SS Version IE, it
shall attempt to decode the Facility IE. If the decoding is successful, and
the operation is supported by the mobile station, the mobile station shall
copy this Facility IE and SS Version IE to the SETUP message. The mobile
station shall also store relevant supplementary service information contained
within the Facility IE so that any reply to this Facility IE sent by the
network will be properly understood and processed.
If the mobile station does not recognise the SS Version IE, or the decoding of
the Facility IE is unsuccessful, then the call is rejected as described in
3GPP TS 24.008 [48].
If the Facility IE is encoded as \"recall alignment not essential\", the
mobile station shall examine the SS Version IE .
If the mobile station recognises the protocol defined by the SS Version IE, it
shall attempt to decode the Facility IE.
If the decoding is successful, and the operation is supported by the mobile
station, the mobile station shall copy this Facility IE and SS Version IE into
the SETUP message. The mobile station shall also store relevant supplementary
service information contained within the Facility IE so that any reply to this
Facility IE sent by the network will be properly understood and processed.
If the mobile station does not recognise the SS Version IE, or the decoding of
the Facility IE is unsuccessful, then the SS Version IE and Facility IE are
discarded, and NOT copied into the SETUP message.
NOTE: A mobile station may include a Facility IE without an associated SS
Version IE. This would indicate that the SS operation is encoded using Phase 1
protocols.
#### 2.2.4.2 Supplementary service procedures during the call
For call related supplementary service procedures during the active state of a
call, the FACILITY message is used for the exchange of the Facility
information elements.
Note that the FACILITY message can also be used for this purpose in all states
after the SETUP message has been sent.
If the supplementary service procedure is related only to a single call, the
FACILITY message will use the transaction identifier and protocol
discriminator of this call.
If the supplementary service procedure affects more then one call, the
FACILITY message may use the transaction identifier and protocol discriminator
of one of these calls.
If a call related FACILITY message is sent using the transaction identifier of
a call in progress, and this call is cleared due to call related causes, then
the transaction identifier may not be cleared simultaneously in all cases.
Depending upon the supplementary service invoked, one of the following will
occur:
‑ the network or mobile user may retain both the connection and the
transaction identifier association and may send a response within a Facility
information element in a FACILITY message prior to the initiation of the
normal call clearing procedures; or
‑ the network or mobile user may send a response with a Facility information
element in the first clearing message (i.e. DISCONNECT, RELEASE or RELEASE
COMPLETE message).
#### 2.2.4.3 Handling of protocol errors in call related SS procedures
Messages containing a Facility information element shall be checked for
protocol errors before the contents of the Facility IE is acted on. The checks
shall be performed in the following order:
1) The message carrying the Facility IE shall be checked for protocol errors
as specified in 3GPP TS 24.008 [48]. If a protocol error is found then the
procedures in 3GPP TS 24.008 [48] apply.
2) The contents of the Facility IE shall be checked for protocol errors as
specified in subclause 2.2.8. If a protocol error is found then the procedures
in subclause 2.2.8 apply.
#### 2.2.4.4 Handling of other errors in call related SS procedures
If the tests specified in subclause 2.2.4.3 have been passed without the
detection of a protocol error, the receiver will attempt to process the
contents of the Facility Information Element. If errors occur during this
processing (e.g. system failure, or information in the Facility IE is
incompatible with the requested operation) then the procedures specified in
the individual service specifications apply.
Examples of the behaviour that could occur in this case are:
‑ the network or MS clears the call and rejects the supplementary services
request by means of a clearing message which contains a Return Error component
with the appropriate parameter in the Facility Information Element;
‑ the network and MS continue to process the call according to normal 3GPP TS
24.008 [48] call control procedures. The supplementary services request is
rejected by means of a FACILITY message or appropriate call control message
containing a Return Error component with the appropriate parameter in the
Facility Information Element;
‑ the network and MS continue to process the call according to the normal 3GPP
TS 24.008 [48] call control procedures. The supplementary services request is
ignored.
### 2.2.5 Call independent supplementary service procedures
#### 2.2.5.1 Introduction
For supplementary service procedures independent of any call, the initiating
side must establish a MM‑connection between the network and the MS according
to the rules given in 3GPP TS 24.007 [49] and 3GPP TS 24.008 [48]. The call
independent supplementary service procedures shall apply to both CS and PS
domain for some specific services. On PS domain, a PS-signalling connection
shall be established between the network and the MS instead of a MM-
connection. Throughout this specification, the term MM-connection is used to
denote a MM-connection for CS domain or PS-signalling connection for PS
domain, as appropriate. The MS or the network starts the transaction by
transferring a REGISTER message across the radio interface. This transaction
is identified by the transaction identifier associated with the REGISTER
message, and the Invoke identifier present in the component part of the
Facility information element. Following the REGISTER message one or more
FACILITY messages may be transmitted, all of them related by the use of the
same transaction identifier. If the transaction is no longer used, it shall be
released by sending a RELEASE COMPLETE message. This procedure is specified in
detail in clause 3, and the text in clause 3 takes precedence over this
introduction.
To convey the supplementary service invocation, the Facility information
element is used. The Facility information element present either in the
REGISTER message or a subsequent message identifies the supplementary service
involved and the type of component (i.e. Invoke, Return result, Return error
or Reject component).
When the REGISTER or FACILITY message contains a Facility information element
and the requested service is available, a FACILITY message containing a
Facility information element may be returned. One or more exchanges of
FACILITY messages may subsequently occur. To terminate the service interaction
and release the transaction identifier value, a RELEASE COMPLETE message is
sent as specified for the specific supplementary service procedure. The
RELEASE COMPLETE message may also contain the Facility information element.
#### 2.2.5.2 Handling of protocol errors in call independent SS procedures
Messages containing a Facility information element shall be checked for
protocol errors before the contents of the Facility IE is acted on. The checks
shall be performed in the following order:
1) The message carrying the Facility IE shall be checked for protocol errors
as specified in subclause 3.7. If a protocol error is found then the
procedures in subclause 3.7 apply.
2) The contents of the Facility IE shall be checked for protocol errors as
specified in subclause 2.2.8. If a protocol error is found then the procedures
in subclause 2.2.8 apply.
#### 2.2.5.3 Handling of other errors in call independent SS procedures
If the tests specified in subclause 2.2.5.2 have been passed without the
detection of a protocol error, the receiver will attempt to process the
contents of the Facility Information Element. If errors occur during this
processing (e.g. system failure, or information in the Facility IE is
incompatible with the requested operation) then the procedures specified in
the individual service specifications apply.
An example of the behaviour that could occur in this case is:
‑ the MS or network sends a Facility information element containing a return
error component in a FACILITY or RELEASE COMPLETE message. If the FACILITY
message is used then the MM Connection may continue to be used for further
signalling.
### 2.2.6 Multiple supplementary service invocations
#### 2.2.6.1 Call related supplementary service procedures
Simultaneous requests for different supplementary service procedures (i.e.
using more than one operation in the Facility information element) are
permitted. Interactions between different operations shall be managed by
processing the operations in the order in which they appear in the Facility
information element.
#### 2.2.6.2 Call independent supplementary service procedures
Where permitted by the relevant stage 3 specification, multiple operations may
be sent on the same transaction.
It is possible for several call independent SS transactions to be used
simultaneously. Call independent SS transactions can also exist in parallel
with other CM‑Layer and MM transactions. The handling of multiple MM
connections is defined in 3GPP TS 24.007 [49]and 3GPP TS 24.008 [48].
For call independent operations a single Facility Information Element shall
not contain more than one component.
### 2.2.7 Recovery procedures
#### 2.2.7.1 Call related supplementary service recovery procedures
There are no additional recovery procedures for call related supplementary
service signalling on the radio path. The recovery procedures as specified for
the basic service apply.
#### 2.2.7.2 Call independent supplementary service recovery procedures
In case a transaction is not terminated according to the normal procedure as
described in technical specifications 3GPP TS 24.08x and 24.09x‑series, the
network side has to ensure that the transaction is terminated e.g. by a
supervision timer.
### 2.2.8 Generic protocol error handling for the component part of
supplementary services operations
If (according to the rules specified in 3GPP TS 29.002 [45]) a supplementary
service operation is to be rejected the operation will be denied, and provided
the transaction is still in progress, an appropriate reject component will be
returned in a Facility Information Element.
The handling of the transaction depends on whether the operation is call
related or call independent.
#### 2.2.8.1 Call related component errors
If the call related transaction is still in progress then a reject component
shall be sent. Any message which contains a Facility Information Element may
be used. In general, the transaction (call) associated with the rejected
operation shall not be automatically released by the entity that detects the
error. The transaction (call) may be released in some exceptional cases where
security related services are involved (e.g. Advice of Charge (Charging)). If
this behaviour is required, then it will be specified in the relevant
specification for the individual service.
When a reject component for a call related operation is received by a MS or
MSC then it may initiate release of the transaction (call) if this is a
specified action for the service the SS operation relates to.
Note that this behaviour is intended to allow security related services to
release calls if one entity in the system does not support the service. The
normal action should be to allow the call to continue.
If the call related transaction has terminated before the operation has been
rejected (e.g. the component containing the error was sent in a RELEASE
COMPLETE message) then the contents of the component shall be ignored, and no
reject component is sent.
#### 2.2.8.2 Call independent component errors
##### 2.2.8.2.1 Single component errors
The reject component shall be sent in a RELEASE COMPLETE message.
If the component containing the error was itself sent in a RELEASE COMPLETE
message then the contents of the component shall be ignored, and no reject
component is sent.
##### 2.2.8.2.2 Multiple component errors
If a single Facility IE contains more than one component then a RELEASE
COMPLETE message with the cause \"Facility rejected\" and without any
component shall be sent.
# 3 Supplementary service support procedures
## 3.1 General
This clause describes the supplementary service support procedures at the
radio interface. These procedures are provided by the supplementary service
support entity defined in 3GPP TS 24.007 [49]. The supplementary service
support procedures provide the means to transfer messages for the call
independent supplementary service procedures. These procedures are regarded as
the user of the supplementary service support.
## 3.2 Supplementary service support establishment
At the beginning of each call independent supplementary service procedure a
supplementary service support must be established.
### 3.2.1 Supplementary service support establishment at the originating side
If the entity that uses the supplementary support procedures wants to send a
REGISTER message, the supplementary service support entity shall first request
the establishment of an MM‑connection. This MM‑connection is established
according to 3GPP TS 24.008 [48] and 04.07. If the network is the initiating
side then MM‑connection establishment may involve paging the MS.
The supplementary service support entity shall send the REGISTER message as
the first CM‑message on the MM‑connection. The REGISTER message is sent to the
corresponding peer entity on the MM‑connection and the supplementary service
support shall be regarded as being established.
### 3.2.2 Supplementary service support establishment at the terminating side
At the terminating side a supplementary service support is regarded as being
established when an MM‑connection is established. According 3GPP TS 24.008
[48] this can be ascertained by the receipt of the first message, with a new
transaction identifier. For successful establishment of supplementary service
support this message shall be a REGISTER message.
If the terminating side wishes to reject the establishment of supplementary
services support then it may be immediately initiate supplementary services
support release (see subclause 3.4).
## 3.3 Supplementary service support information transfer phase
Upon the establishment of the supplementary service support both users may
exchange FACILITY messages by use of the supplementary service support.
## 3.4 Supplementary service support release
At the end of each call independent supplementary service procedure the
established supplementary service support is released.
The side closing the transaction shall release the transaction by sending the
RELEASE COMPLETE message to its corresponding peer entity.
Both supplementary service support entities release the MM‑connection locally.
## 3.5 Recovery procedures
The supplementary service support does not provide recovery procedures, i.e.
the operations are transparent to the supplementary service support.
## 3.6 Message flow (single operation example)
This subclause contains examples of message flows for a single transaction
consisting of a single operation. These examples may not show all
possibilities.
### 3.6.1 Mobile station initiated supplementary service transaction
MS Network
REGISTER
\------------------------------------------------------------------------------------------------------------------------------------>
Facility (Invoke = Operation (Supplementary service code, Parameter(s)))
RELEASE COMPLETE
\
NOTE: To prevent transactions being kept open following exceptional cases,
either side of the transaction may release it by sending a RELEASE COMPETE
message without a Facility IE.
Figure 3.1: Mobile station initiated supplementary service transaction
### 3.6.2 Network initiated supplementary service transaction
MS Network
REGISTER
\
Facility (Return result = Operation (Parameter(s)))
RELEASE COMPLETE
\- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - \- -
- - - - - - - - - - - - - ->
Facility (Return error (Error))
RELEASE COMPLETE
\- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - \- -
- - - - - - - - - - - - - ->
Facility (Reject (Invoke_problem))
RELEASE COMPLETE (note 1, note 3)
\- - - - -- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - \- - -
- - - - - - - - - - - - - ->
RELEASE COMPLETE (note 3)
\
Facility
FACILITY
\
Facility (Return result = GetPassword (Password))
RELEASE COMPLETE (note)
\
Facility (Invoke = Register Password (SS‑Code))
FACILITY
\
Facility (Return result = GetPassword (Password))
FACILITY
\
Facility (Return result = GetPassword (Password))
FACILITY
\
Facility (Return result = GetPassword (Password))
RELEASE COMPLETE
\
Figure 6.1: ForwardCheckSSIndication sent on new transaction
###### ## Annex A (normative): Notation used for stage 3 description of
supplementary services
The structure of the signalling used for supplementary services on the Um
Interface is defined using diagrams in 3GPP TS 24.010 and the 3GPP TS 24.08x
and 24.09x‑series of technical specifications. These SS stage 3 diagrams show
example message flows between the MS and the network.
Separate diagrams specify how supplementary services signalling shall be used
to perform each defined supplementary service function. For signalling that
uses the common information element approach, these diagrams are the normative
definition of a number of important aspects of the supplementary services
signalling:
‑ the diagrams normatively define the allowed responses to each supplementary
service operation shown;
‑ the diagrams normatively define which 3GPP TS 24.008 [48] or 3GPP TS 24.080
[27] message is to be used to transport the supplementary services operations
in the Facility IE;
‑ The diagrams normatively define which parameters are allowed and required in
the invocation and response of each operation.
# A.1 General structure of the SS stage 3 diagrams
In the SS stage 3 diagrams the messages that correspond to the normal case
with successful outcome are shown using solid arrows. Messages for
exceptional, or unsuccessful cases are shown using dashed arrows. In general,
the diagrams show the initiating operation together with all possible
outcomes. Obviously, in practice only one of the possible outcomes shown in
the diagrams will occur when the operation is used. An example is given in
figure A.1.
MS Network
Initiating Operation
\------------------------------------------------------------------------------------------------------------------------------------>
Normal, Successful Outcome
\
Figure A.2: Exceptional release procedures
# A.2 Messages used to transport operations
The message used to transport the supplementary service operation is shown
above the arrow. If a single message or a list of messages is specified then
only these messages shall be used to transport the operation shown in the
context shown. If the letters \"e.g.\" are included before the message name or
a list of messages then the messages shown are only suggested examples. If
\"e.g.\" is used then any message that carries the Facility information
element which is consistent with the transaction state may be used for the SS
operation.
# A.3 Contents of messages
The contents of messages is specified below the arrow. The diagrams do not
show the SS version indicator, or other parts of the message contents unless
they are directly related to the service shown. The names of relevant
information elements are shown, and the associated contents is shown in
brackets.
If the information element is the Facility IE then the contents information
includes:
‑ the type of component that shall be used for the operation (e.g. invoke,
return result, return error, reject);
‑ the name of the operation to be used (for the invoke and return result
components only);
‑ the parameters that shall be included in the operation. For the function
described by the diagram, only those parameters shown in the diagram are
allowed. Unless stated otherwise all the parameters shown in the diagram shall
be present when the operation is used for the function described by the
diagram.
The detailed encoding of the operations and parameters shown in the diagrams
is defined in 3GPP TS 24.080 [27] and 3GPP TS 29.002 [45]. Appropriate ASN.1
structures from these specifications shall be used to align with the diagrams.
The examples in figure A.2 illustrate the encoding. The first example shows a
common information element operation where the operation name is shown. The
second example shows a common information element operation where the
operation name is not shown. Items in italics would be substituted with the
appropriate identifiers.
MESSAGE NAME
\------------------------------------------------------------------------------------------------------------------------------------>
Facility (Component Type = OperationName (parameters))
MESSAGE NAME
\------------------------------------------------------------------------------------------------------------------------------------>
Facility (Component Type (parameters))
Figure A.2: Examples of the contents of messages
#