# Foreword
This Technical Specification has been produced by the 3rd Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document specifies the signalling control needed to support
Mission Critical Video (MCVideo) service.
The MCVideo service and its associated media plane control protocols can be
used for public safety applications and also for general commercial
applications (e.g., utility companies and railways).
The present document is applicable to User Equipment (UE) supporting MCVideo
client, and MCVideo server.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] IETF RFC 4566 (July 2006): \"Session Description Protocol\".
[3] IETF RFC 3605 (October 2003): \"Real Time Control Protocol (RTCP)
attribute in Session Description Protocol (SDP)\".
[4] 3GPP TS 24.483: \"Mission Critical Services (MCS) Management Object
(MO)\".
[5] 3GPP TS 24.581: \"Mission Critical Video (MCVideo) media plane control
Protocol specification\".
[6] IETF RFC 4567 (July 2006): \"Key Management Extensions for Session
Description Protocol (SDP) and Real Time Streaming Protocol (RTSP)\".
[7] IETF RFC 3264 (June 2002): \"An Offer/Answer Model with the Session
Description Protocol (SDP)\".
[8] 3GPP TS 33.180: \"Security of the mission critical service\".
[9] 3GPP TS 29.199-9: \"Open Service Access (OSA); Parlay X Web Services; Part
9: Terminal location\".
[10] 3GPP TS 24.007: \"Mobile radio interface signalling layer 3; General
aspects\".
[11] 3GPP TS 24.229: \"IP multimedia call control protocol based on Session
Initiation Protocol (SIP) and Session Description Protocol (SDP); Stage 3\".
[12] IETF RFC 3903 (October 2004): \"Session Initiation Protocol (SIP)
Extension for Event State Publication\".
[13] IETF RFC 3856 (August 2004): \"A Presence Event Package for the Session
Initiation Protocol (SIP)\".
[14] IETF RFC 6050 (November 2010): \"A Session Initiation Protocol (SIP)
Extension for the Identification of Services\".
[15] IETF RFC 3261 (June 2002): \"SIP: Session Initiation Protocol\".
[16] IETF RFC 6665 (July 2012): \"SIP-Specific Event Notification\".
[17] IETF RFC 3428 (December 2002): \"Session Initiation Protocol (SIP)
Extension for Instant Messaging\".
[18] IETF RFC 3863 (August 2004): \"Presence Information Data Format (PIDF)\".
[19] IETF RFC 4661 (September 2006): \"An Extensible Markup Language
(XML)-Based Format for Event Notification Filtering\".
[20] IETF RFC 3841 (August 2004): \"Caller Preferences for the Session
Initiation Protocol (SIP)\".
[21] IETF RFC 6086 (January 2011): \"Session Initiation Protocol (SIP) INFO
Method and Package Framework\".
[22] IETF RFC 3840 (August 2004): \"Indicating User Agent Capabilities in the
Session Initiation Protocol (SIP)\".
[23] IETF RFC 4028 (April 2005): \"Session Timers in the Session Initiation
Protocol (SIP)\".
[24] 3GPP TS 24.481: \"Mission Critical Services (MCS) group management;
Protocol specification\".
[25] 3GPP TS 24.484: \"Mission Critical Services (MCS) configuration
management; Protocol specification\".
[26] 3GPP TS 23.281: \"Functional architecture and information flows to
support Mission Critical Video (MCVideo); Stage 2\".
[27] IETF RFC 5373 (November 2008): \" Requesting Answering Modes for the
Session Initiation Protocol (SIP)\".
[28] IETF RFC 5318 (December 2008): \"The Session Initiation Protocol (SIP)
P-Refused-URI-List Private-Header (P-Header)\".
[29] IETF RFC 4483 (May 2006): \"A Mechanism for Content Indirection in
Session Initiation Protocol (SIP) Messages\".
[30] IETF RFC 4964 (September 2007): \"The P-Answer-State Header Extension to
the Session Initiation Protocol for the Open Mobile Alliance Push to Talk over
Cellular\".
[31] IETF RFC 4488 (May 2006): \"Suppression of Session Initiation Protocol
(SIP) REFER Method Implicit Subscription\".
[32] IETF RFC 4538 (June 2006): \" Request Authorization through Dialog
Identification in the Session Initiation Protocol (SIP)\".
[33] IETF RFC 4412 (February 2006): \"Communications Resource Priority for the
Session Initiation Protocol (SIP)\".
[34] IETF RFC 4567 (July 2006): \"Key Management Extensions for Session
Description Protocol (SDP) and Real Time Streaming Protocol (RTSP)\".
[35] IETF RFC 5626 (October 2009): \"Managing Client-Initiated Connections in
the Session Initiation Protocol (SIP)\".
[36] 3GPP TS 22.281: \"Mission Critical Video over LTE\".
[37] IETF RFC 5366 (October 2008): \"Conference Establishment Using Request-
Contained Lists in the Session Initiation Protocol (SIP)\".
[38] IETF RFC 8101 (March 2017): \"IANA Registration of New Session Initiation
Protocol (SIP) Resource-Priority Namespace for Mission Critical Push To Talk
Service\".
[39] 3GPP TS 23.032: \"Universal Geographical Area Description (GAD)\".
[40] 3GPP TS 24.379: \"Mission Critical Push To Talk (MCPTT) call control
Protocol specification\".
[41] IETF RFC 5627 (October 2009): \"Obtaining and Using Globally Routable
User Agent URIs (GRUUs) in the Session Initiation Protocol (SIP)\".
[42] 3GPP TS 24.581: \"Mission Critical Video (MCVideo) media plane control;
Protocol specification\".
[43] IETF RFC 8101 (March 2017): \"IANA Registration of New Session Initiation
Protocol (SIP) Resource-Priority Namespace for Mission Critical Push To Talk
Service\".
[44] 3GPP TS 29.468 \"Group Communication System Enablers for LTE (GCSE_LTE);
MB2 reference point; Stage 3\".
[45] W3C: \"XML Encryption Syntax and Processing Version 1.1\",
https://www.w3.org/TR/xmlenc-core1/.
[46] IETF RFC 4648 (October 2006): \"The Base16, Base32, and Base64 Data
Encodings\".
[47] 3GPP TS 23.003: \"Numbering, addressing and identification\".
[48] IETF RFC 2045 (November 1996): \"Multipurpose Internet Mail Extensions
(MIME) Part One: Format of Internet Message Bodies\".
[49] IETF RFC 2392 (August 1998): \"Content-ID and Message-ID Uniform Resource
Locators\".
[50] W3C: \"XML Signature Syntax and Processing (Second Edition)\",
http://www.w3.org/TR/xmldsig-core/
[51] (Void).
[52] 3GPP TS 24.482: \"Mission Critical Services (MCS) identity management
Protocol specification\".
[53] IETF RFC 4354 (January 2006): \"A Session Initiation Protocol (SIP) Event
Package and Data Format for Various Settings in Support for the Push-to-Talk
over Cellular (PoC) Service\".
[54] 3GPP TS 29.283: \"Diameter Data Management Applications\".
[55] IETF RFC 6509 (February 2012): \"MIKEY-SAKKE: Sakai-Kasahara Key
Encryption in Multimedia Internet KEYing (MIKEY)\".
[56] IETF RFC 4567 (July 2006): \"Key Management Extensions for Session
Description Protocol (SDP) and Real Time Streaming Protocol (RTSP)\".
[57] IETF RFC 4575 (August 2006): \"A Session Initiation Protocol (SIP) Event
Package for Conference State\".
[58] IETF RFC 4122 (July 2005): \"A Universally Unique IDentifier (UUID) URN
Namespace\".
[59] 3GPP TS 24.334: \"Proximity-services (ProSe) User Equipment (UE) to ProSe
function protocol aspects\".
[60] 3GPP TS 24.237: \"IP Multimedia (IM) Core Network (CN) subsystem IP
Multimedia Subsystem (IMS) service continuity\".
[61] 3GPP TS 26.281: \"Mission Critical Video (MCVideo); Codecs and media
handling\".
[62] 3GPP TS 24.301: \"Non-Access-Stratum (NAS) protocol for Evolved Packet
System (EPS)\".
[63] IETF RFC 3515: \"The Session Initiation Protocol (SIP) Refer Method\".
# 3 Definitions, symbols and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
3GPP TR 21.905 [1] and the following apply. A term defined in the present
document takes precedence over the definition of the same term, if any, in
3GPP TR 21.905 [1].
**An MCVideo user is affiliated to an MCVideo group** : The MCVideo user is
listed as a member of the MCVideo group in the MCVideo group document, the
MCVideo server owning the MCVideo group has authorised the MCVideo user\'s
interest in the MCVideo group and the MCVideo server serving the MCVideo user
has authorised the MCVideo user\'s interest in the MCVideo group.
**An MCVideo user is affiliated to an MCVideo group at an MCVideo client** :
The MCVideo user is affiliated to the MCVideo group, the MCVideo client has a
registered IP address for an IMPU related to the MCVideo ID, and the MCVideo
server serving the MCVideo user has authorised the MCVideo user\'s interest in
the MCVideo group at the MCVideo client.
**Affiliation status** : Applies for an MCVideo user to an MCVideo group and
has one of the following states:
a) the \"not-affiliated\" state indicating that the MCVideo user is not
interested in the MCVideo group and the MCVideo user is not affiliated to the
MCVideo group;
b) the \"affiliating\" state indicating that the MCVideo user is interested in
the MCVideo group but the MCVideo user is not affiliated to the MCVideo group
yet;
c) the \"affiliated\" state indicating that the MCVideo user is affiliated to
the MCVideo group and there was no indication that MCVideo user is no longer
interested in the MCVideo group; and
d) the \"deaffiliating\" state indicating that the MCVideo user is no longer
interested in the MCVideo group but the MCVideo user is still affiliated to
the MCVideo group.
**Group identity** : An MCVideo group identity or a temporary MCVideo group
identity.
**MCVideo client ID:** is a globally unique identification of a specific
MCVideo client instance. MCVideo client ID is a UUID URN as specified in IETF
RFC 4122 [67].
**MCVideo emergency alert state:** MCVideo client internal perspective of the
state of an MCVideo emergency alert.
**MCVideo emergency group state:** MCVideo client internal perspective of the
in-progress emergency state of an MCVideo group maintained by the controlling
MCVideo function.
**MCVideo emergency group call state:** MCVideo client internal perspective of
the state of an MCVideo emergency group call.
**MCVideo emergency private call:** MCVideo emergency call between two MCVideo
users that is initiated as a private call or a first-to-answer call with
emergency indication, or without emergency indication when the MCVideo
emergency state is already set,
**MCVideo emergency private call state:** MCVideo client internal perspective
of the state of an MCVideo emergency private call.
**MCVideo emergency private priority state:** MCVideo client internal
perspective of the in-progress emergency private call state of the two
participants of an MCVideo emergency private call maintained by the
controlling MCVideo function.
**MCVideo imminent peril group call state:** MCVideo client internal
perspective of the state of an MCVideo imminent peril group call.
**MCVideo imminent peril group state:** MCVideo client internal perspective of
the state of an MCVideo imminent peril group.
**MCVideo private call:** MCVideo call between two MCVideo users that is
initiated as a private call or a first-to-answer call.
**MCVideo private emergency alert state:** MCVideo client internal perspective
of the state of an MCVideo private emergency alert targeted to an MCVideo
user.
**MCVideo video media:** streaming video and audio media used in mission
critical video systems as defined by 3GPP TS 22.179 [2] and 3GPP TS 23.281
[3].
**Media-transmission control entity** : A media control resource shared by
participants in an MCVideo session, controlled by a state machine to ensure
that participants can access the media resource at the same time.
**Private call:** A call initiated by one user towards one other user with the
intention to establish an MCVideo private call or MCVideo emergency private
call.
**Remote change of an MCVideo user\'s selected group:** A mechanism allowing
an authorised user to remotely change the selected group of another MCVideo
user.
**Temporary MCVideo group identity** : A group identity representing a
temporary grouping of MCVideo group identities formed by the group regrouping
operation as specified in 3GPP TS 24.481 [24].
**Trusted mutual aid** : A business relationship whereby the Partner MCVideo
system is willing to share the details of the members of an MCVideo group that
it owns with the Primary MCVideo system.
**Untrusted mutual aid** : A business relationship whereby the Partner MCVideo
system is not willing to share the details of the members of an MCVideo group
that it owns with the Primary MCVideo system.
For the purposes of the present document, the following terms and definitions
given in 3GPP TS 22.179 [2] apply:
**In-progress emergency**
**MCVideo emergency alert**
**MCVideo emergency group call**
**MCVideo emergency state**
**Partner MCVideo system**
**Primary MCVideo system**
For the purpose of the present document, the following terms and definitions
given in 3GPP TS 23.281 [3] apply:
**Pre-selected MCVideo user profile**
**Selected MCVideo user profile**
For the purpose of the present document, the following terms and definitions
given in 3GPP TS 33.180 [46] apply:
**Client Server Key (CSK)**
**Private Call Key (PCK)**
**Signalling Protection Key (SPK)**
**XML Protection Key (XPK)**
## 3.2 Symbols
## 3.3 Abbreviations
For the purposes of the present document, the abbreviations given in 3GPP TR
21.905 [1] and the following apply. An abbreviation defined in the present
document takes precedence over the definition of the same abbreviation, if
any, in 3GPP TR 21.905 [1].
CSK Client-Server Key
ECGI E-UTRAN Cell Global Identification
IPEG In-Progress Emergency Group
IPEPC In-Progress Emergency Private Call
IPIG In-Progress Imminent peril Group
MBMS Multimedia Broadcast and Multicast Service
MBSFN Multimedia Broadcast multicast service Single Frequency Network
MC Mission Critical
MCS Mission Critical Service
MCVideo Mission Critical Video
MCVideo group ID MCVideo group Identity
MVEA MCVideo Emergency Alert
MVEG MCVideo Emergency Group
MVEGC MCVideo Emergency Group Call
MVEPC MCVideo Emergency Private Call
MVEPP MCVideo Emergency Private Priority
MVES MCVideo Emergency State
MIME Multipurpose Internet Mail Extensions
MVIG MCVideo Imminent peril Group
MVIGC MCVideo Imminent peril Group Call
MONP MCPTT Off-Network Protocol
MVPEA MCVideo Private Emergency Alert
NAT Network Address Translation
PCC Policy and Charging Control
PCCB Private Call Call-Back
PLMN Public Land Mobile Network
QCI QoS Class Identifier
RTP Real-time Transport Protocol
SAI Service Area Identifier
SDP Session Description Protocol
SIP Session Initiation Protocol
SPK Signalling Protection Key
SSRC Synchronization SouRCe
TGI Temporary MCVideo Group Identity
TMGI Temporary Mobile Group Identity
UE User Equipment
URI Uniform Resource Identifier
XPK XML Protection Key
# 4 General
## 4.1 MCVideo overview
The MCVideo service supports communication between several users (i.e. group
call), where each user has the ability to send and receive video media. The
MCVideo service also supports private calls between two users. Group calls and
private calls can be provided on-network and off-network.
The present document provides the call control protocol to support the MCVideo
architectural procedures specified in 3GPP TS 23.281 [26].
For on-network calls, the present document makes use of the existing IMS
procedures specified in 3GPP TS 24.229 [11]. For on-network group calls, the
procedures in the present document allow the use of unicast bearers.
The on-network procedures in this document allow an MCVideo user to:
\- initiate a new MCVideo group session;
\- join an MCVideo group session that has already been established; and
\- leave an established MCVideo group session and then re-join the same
MCVideo group session if still established.
For off-network calls, the present document utilises the procedures for ProSe
direct discovery for public safety and the procedures for one-to-one ProSe
direct communication for Public Safety, as specified in 3GPP TS 24.334 [59].
The present document specifies the MCVideo Off-Network Protocol (MVONP) and
the MVONP application procedures.
For on-network and off-network calls, the present document provides support
for MCVideo emergency calls, MCVideo imminent-peril calls and MCVideo
emergency alerts.
NOTE: MCVideo emergency calls do not utilise emergency bearers. Instead the
EPS bearer priority of a normal bearer is adjusted.
The MCVideo procedures provided by the present document refer to:
\- the transmission-control procedures defined in 3GPP TS 24.581[5];
\- the group management procedures defined in 3GPP TS 24.481 [24];
\- the identity management procedures defined in 3GPP TS 24.482 [52];
\- the security procedures defined in 3GPP TS 33.180 [8]; and
the PS-PS access transfer procedures defined in 3GPP TS 24.237 [60].
The MCVideo procedures provided by the present document access the
configuration parameters provided by 3GPP TS 24.483 [4] and 3GPP TS 24.484
[25].
Codecs and media handling for MCVideo are specified in 3GPP TS 26.281 [61];
The following procedures are provided within this document:
\- common procedures are specified in clause 6;
\- procedures for registration in the IM CN subsystem and service
authorisation are specified in clause 7;
\- procedures for affiliation are specified in clause 8;
\- procedures for on-network and off-network group call are specified in
clause 9;
\- procedures for on-network and off-network private call are specified in
clause 10; and
\- procedures for on-network and off-network emergency alert are specified in
clause 11;
The MCVideo UE primarily obtains access to the MCVideo service via E-UTRAN,
using the procedures defined in 3GPP TS 24.301 [62].
## 4.2 URI and address assignments
In order to support MCVideo, the following URI and address assignments are
assumed:
1) the participating MCVideo function is configured to be reachable using:
a) the public service identity of the participating MCVideo function serving
the MCVideo user.
## 4.3 MCVideo media
A session that contains MCVideo media is either a full-duplex session or a
half-duplex session with an **SDP media component containing** an MCVideo
media type with a codec suitable that exists between an MCVideo client and an
MCVideo server.
If the MCVideo media session is a half-duplex session, it additionally
contains a media component that describes the characteristics of the media-
transmission control entity.
## 4.4 Warning header field
### 4.4.1 General
The MCVideo server can include a free text string in a SIP response to a SIP
request. When the MCVideo server includes a text string in a response to a SIP
INVITE request the text string is included in a Warning header field as
specified in IETF RFC 3261 [15]. The MCVideo server includes the Warning code
set to 399 (miscellaneous warning) and includes the host name set to the host
name of the MCVideo server.
EXAMPLE: Warning: 399 \"100 User not authorised to make group calls\"
### 4.4.2 Warning texts
The text string included in a Warning header field consists of an explanatory
text preceded by a 3-digit text code, according to the following format in
Table 4.4.2-1.
Table 4.4.2-1 ABNF for the Warning text
warn-text =/ DQUOTE mcvideo-warn-code SP mcvideo-warn-text DQUOTE
mcvideo-warn-code = DIGIT DIGIT DIGIT
mcvideo-warn-text = *( qdtext \| quoted-pair )
Table 4.4.2-2 defines the warning texts that are defined for the Warning
header field when a Warning header field is included in a response to a SIP
INVITE request as specified in clause 4.4.1.
Table 4.4.2-2: Warning texts defined for the Warning header field
+------+------------------------------+------------------------------+ | Code | Explanatory text | Description | +------+------------------------------+------------------------------+ | 100 | function not allowed due to | The function is not allowed | | | \ | to this user. | | | | | | | | The \ will | | | | be either \"group | | | | definition\", \"access | | | | policy\", \"local policy\", | | | | or \"user authorisation\", | | | | or can be a free text | | | | string. | +------+------------------------------+------------------------------+ | 101 | service authorisation failed | The service authorisation of | | | | the MCVideo ID against the | | | | IMPU failed at the MCVideo | | | | server. | +------+------------------------------+------------------------------+ | 102 | too many simultaneous | The MCVideo user already has | | | affiliations | N2 maximum number of | | | | simultaneous affiliations. | +------+------------------------------+------------------------------+ | 103 | maximum simultaneous MCVideo | The number of maximum | | | group calls reached | simultaneous MCVideo group | | | | calls supported for the | | | | MCVideo user has been | | | | exceeded. | +------+------------------------------+------------------------------+ | 104 | isfocus not assigned | A controlling MCVideo | | | | function has not been | | | | assigned to the MCVideo | | | | session. | +------+------------------------------+------------------------------+ | 105 | subscription not allowed in | Subscription to the | | | a broadcast group call | conference event package | | | | rejected during a group call | | | | initiated as a broadcast | | | | group call. | +------+------------------------------+------------------------------+ | 106 | user not authorised to join | The MCVideo user is not | | | chat group | authorised to join this chat | | | | group. | +------+------------------------------+------------------------------+ | 107 | user not authorised to make | The MCVideo user is not | | | private calls | authorised to make private | | | | calls. | +------+------------------------------+------------------------------+ | 108 | user not authorised to make | The MCVideo user is not | | | chat group calls | authorised to make chat | | | | group calls. | +------+------------------------------+------------------------------+ | 109 | user not authorised to make | The MCVideo user is not | | | prearranged group calls | authorised to make group | | | | calls to a prearranged | | | | group. | +------+------------------------------+------------------------------+ | 110 | user declined the call | The MCVideo user declined to | | | invitation | accept the call. | +------+------------------------------+------------------------------+ | 111 | group call proceeded without | The required members of the | | | all required group members | group did not respond within | | | | the acknowledged call time, | | | | but the call still went | | | | ahead. | +------+------------------------------+------------------------------+ | 112 | group call abandoned due to | The group call was | | | required group members not | abandoned, as the required | | | part of the group session | members of the group did not | | | | respond within the | | | | acknowledged call time. | +------+------------------------------+------------------------------+ | 113 | group document does not | The group document requested | | | exist | from the group management | | | | server does not exist. | +------+------------------------------+------------------------------+ | 114 | unable to retrieve group | The group document exists on | | | document | the group management server | | | | but the MCVideo server was | | | | unable to retrieve it. | +------+------------------------------+------------------------------+ | 115 | group is disabled | The group has the | | | | \ element set to | | | | \"true\" in the group | | | | management server. | +------+------------------------------+------------------------------+ | 116 | user is not part of the | The group exists on the | | | MCVideo group | group management server but | | | | the requesting user is not | | | | part of this group. | +------+------------------------------+------------------------------+ | 117 | the group identity indicated | The group id that is | | | in the request is a | indicated in the request is | | | prearranged group | for a prearranged group, but | | | | did not match the request | | | | from the MCVideo user. | +------+------------------------------+------------------------------+ | 118 | the group identity indicated | The group id that is | | | in the request is a chat | indicated in the request is | | | group | for a chat group, but did | | | | not match the request from | | | | the MCVideo user, | +------+------------------------------+------------------------------+ | 119 | user is not authorised to | The MCVideo user identified | | | initiate the group call | by the MCVideo ID is not | | | | authorised to initiate the | | | | group call. | +------+------------------------------+------------------------------+ | 120 | user is not affiliated to | The MCVideo user is not | | | this group | affiliated to the group. | +------+------------------------------+------------------------------+ | 121 | user is not authorised to | The MCVideo user identified | | | join the group call | by the MCVideo ID is not | | | | authorised to join the group | | | | call. | +------+------------------------------+------------------------------+ | 122 | too many participants | The group call has reached | | | | its maximum number of | | | | participants. | +------+------------------------------+------------------------------+ | 123 | MCVideo session already | Inform the MCVideo user that | | | exists | the group call is currently | | | | ongoing. | +------+------------------------------+------------------------------+ | 124 | maximum number of private | The maximum number of | | | calls reached | private calls allowed at the | | | | MCVideo server for the | | | | MCVideo user has been | | | | reached. | +------+------------------------------+------------------------------+ | 125 | user not authorised to make | The MCVideo user is not | | | private call with automatic | authorised to make a private | | | commencement | call with automatic | | | | commencement. | +------+------------------------------+------------------------------+ | 126 | user not authorised to make | The MCVideo user is not | | | private call with manual | authorised to make a private | | | commencement | call with manual | | | | commencement. | +------+------------------------------+------------------------------+ | 127 | user not authorised to be | The called MCVideo user is | | | called in private call | not allowed to be part of a | | | | private call. | +------+------------------------------+------------------------------+ | 128 | isfocus already assigned | The MCVideo server owning an | | | | MCVideo group received a SIP | | | | INVITE request destined to | | | | the MCVideo group from | | | | another MCVideo server | | | | already assigned as the | | | | controlling MCVideo function | | | | and the MCVideo server | | | | owning the MCVideo group | | | | does not support mutual aid | | | | or supports trusted mutual | | | | aid but does not authorise | | | | trusted mutual aid. | +------+------------------------------+------------------------------+ | 137 | the indicated group call | The participating MCVideo | | | does not exist | function cannot find an | | | | ongoing group session | | | | associated with the received | | | | MCVideo session identity. | +------+------------------------------+------------------------------+ | 138 | subscription of conference | The controlling MCVideo | | | events not allowed | function could not allow the | | | | MCVideo user to subscribe to | | | | the conference event | | | | package. | +------+------------------------------+------------------------------+ | 139 | integrity protection check | The integrity protection of | | | failed | an XML MIME body failed. | +------+------------------------------+------------------------------+ | 140 | unable to decrypt XML | The XML content cannot be | | | content | decrypted. | +------+------------------------------+------------------------------+ | 141 | user unknown to the | The participating function | | | participating function | is unable to associate the | | | | public user identity with an | | | | MCVideo ID. | +------+------------------------------+------------------------------+ | 142 | unable to determine the | The participating function | | | controlling function | is unable to determine the | | | | controlling function for the | | | | group call or private call. | +------+------------------------------+------------------------------+ | 143 | not authorised to force auto | The calling user is not | | | answer | authorised to force auto | | | | answer on the called user. | +------+------------------------------+------------------------------+ | 144 | user not authorised to call | The calling user is not | | | this particular user | authorised to call this | | | | particular called user. | +------+------------------------------+------------------------------+ | 145 | unable to determine called | The participating function | | | party | was unable to determine the | | | | called party from the | | | | information received in the | | | | SIP request. | +------+------------------------------+------------------------------+ | 146 | T-PF unable to determine the | The service settings have | | | service settings for the | not been uploaded by the | | | called user | terminating client to the | | | | terminating participating | | | | server. | +------+------------------------------+------------------------------+ | 147 | user is authorized to | The non-controlling MCVideo | | | initiate a temporary group | function has authorized a | | | call | request from the controlling | | | | MCVideo function to | | | | authorize a user to initiate | | | | an temporary group session. | +------+------------------------------+------------------------------+ | 148 | MCVideo group is regrouped | The MCVideo group hosted by | | | | a non-controlling MCVideo | | | | function is part of a | | | | temporary group session as | | | | the result of the group | | | | regroup function. | +------+------------------------------+------------------------------+ | 149 | SIP-INFO request pending | The MCVideo client needs to | | | | wait for a SIP-INFO request | | | | with specific content, | | | | before taking further | | | | action. | +------+------------------------------+------------------------------+ | 150 | invalid combinations of data | The MCVideo client included | | | received in MIME body | invalid combinations of data | | | | in the SIP request. | +------+------------------------------+------------------------------+
## 4.5 MCVideo session identity
The MCVideo session identity is a SIP URI, which identifies the MCVideo
session between:
\- the MCVideo client and the participating MCVideo function; and
\- the participating MCVideo function and the controlling MCVideo function;
The MCVideo session identity shall be a GRUU as defined in IETF RFC 5627 [41]
assigned by the MCVideo server as per 3GPP TS 24.229 [11].
The MCVideo session identity identifies the MCVideo session in such a way that
e.g.:
\- the MCVideo user is able to subscribe to the participant information of the
ongoing MCVideo session;
\- the MCVideo user is able to re-join an ongoing MCVideo session; and
\- the IM CN subsystem is able to route an initial SIP request to the
controlling MCVideo function.
The controlling MCVideo function allocates a unique MCVideo session identity
hosted at the controlling MCVideo function for the MCVideo session at the time
of session establishment.
When protection of sensitive application data is required by the MCVideo
operator, the MCVideo session identity cannot contain identity information
that is classed as sensitive such as the MCVideo ID or the MCVideo Group ID,
as specified in clause 4.8.
The controlling MCVideo function sends the MCVideo session identity towards
the MCVideo client during MCVideo session establishment by including it in the
Contact header field of the final SIP response to a session initiation
request.
The participating MCVideo function allocates a unique MCVideo session identity
hosted at the participating MCVideo function for the MCVideo session when it
receives a MCVideo session identity in the Contact header field of a SIP
request or a SIP response from the controlling MCVideo function and includes
it in the Contact header field of the SIP request or SIP response sent towards
the MCVideo client. The participating MCVideo function maintains a mapping of
the MCVideo session identities it sends to the MCVideo client to the
corresponding MCVideo session identities received from the controlling MCVideo
function.
The MCVideo client can cache the MCVideo session identity until a time when it
is no longer needed.
The MCVideo session identity is also used in transmission control requests and
responses as specified in 3GPP TS 24.581 [42].
## 4.6 MCVideo priority calls and alerts
### 4.6.1 MCVideo emergency group calls
MCVideo emergency group calls as defined by 3GPP TS 23.281 [26] are supported
by the procedures in this specification. The following MCVideo emergency group
call functionalities are described:
\- MCVideo emergency group call origination;
\- upgrade of an MCVideo group call to an MCVideo emergency group call; and
\- in-progress group emergency cancel.
NOTE 1: In-progress group emergency cancel means the cancellation of the in-
progress emergency state of the group, which is managed by the controlling
MCVideo function.
The above functionalities are supported using both MCVideo prearranged group
calls and MCVideo chat group calls.
Key aspects of MCVideo emergency group calls include:
\- adjusted EPS bearer priority for all participants whether or not they
themselves are in an emergency condition (i.e. have their MCVideo emergency
state set). For unicast bearers this is achieved by using the Resource-
Priority header field as specified in IETF RFC 4412 [33] with namespaces
defined for use by MCVideo specified in IETF RFC 8101 [43], and for MBMS
bearers this is achieved by having the participating MCVideo function adjust
the ARP (priority, PVI, PCI) and executing the Modify MBMS Bearer Procedure
per 3GPP TS 29.468 [44];
\- pre-emptive transmission control priority over MCVideo users in MCVideo
emergency group calls who themselves do not have their MCVideo emergency state
set;
\- restoration of normal EPS bearer priority to the call participants when the
in-progress emergency group state is cancelled;
\- restoration of normal transmission control priority participants when the
in-progress emergency group state is cancelled;
\- requires the MCVideo user to be authorised to either originate or cancel an
MCVideo emergency group call;
\- requests to originate MCVideo emergency group calls may also include an
indication of an MCVideo emergency alert; and
\- requests to cancel MCVideo emergency group calls may also include an
indication of cancelling a previously issued MCVideo emergency alert.
There are a number of states that are key in managing these aspects of MCVideo
emergency group calls, which include:
\- **MCVideo emergency state:** as defined in 3GPP TS 22.281 [36] and 3GPP TS
23.281 [26], indicates that the MCVideo user is in a life-threatening
situation. Managed by the MCVideo user of the device or an authorised MCVideo
user. While the MCVideo emergency state is set on the client, all calls
originated by the client will be MCVideo emergency calls, assuming the MCVideo
user is authorised for MCVideo emergency calls on them.
\- **in-progress emergency group state:** as defined in 3GPP TS 22.281 [36]
and 3GPP TS 23.281 [26], indicates whether or not there is an MCVideo
emergency group call ongoing on the specified group. This state is managed by
the controlling MCVideo function. All group calls originated on this MCVideo
group when in an in-progress emergency state are MCVideo emergency group calls
until this state is cancelled, whether or not the originator is themselves in
an MCVideo emergency state.
\- **MCVideo emergency group (MVEG) state:** this is an internal state managed
by the MCVideo client which tracks the in-progress emergency state of the
group as defined in 3GPP TS 22.281 [36] and 3GPP TS 23.281 [26] and managed by
the controlling MCVideo function. Ideally, the MCVideo client would not need
to track the in-progress emergency group state, but doing so enables the
MCVideo client to request MCVideo emergency-level priority earlier than
otherwise possible. For example, if the MCVideo user wishes to join an MCVideo
emergency group call and is not in MCVideo emergency state itself, the MCVideo
client should have emergency level priority. If it has knowledge of the in-
progress emergency state of the group, it can request priority by including a
Resource-Priority header field set to the MCVideo namespace specified in IETF
RFC 8101 [38], and appropriate priority level in the SIP INVITE request (or
SIP re-INVITE request).
\- **MCVideo emergency group call** **(MVEGC) state** : this is an internal
state managed by the MCVideo client which in conjunction with the MCVideo
emergency alert state aids in managing the MCVideo emergency state and related
actions.
\- **MCVideo emergency alert (MEA) state** : this is also an internal state of
the MCVideo client which in conjunction with the MCVideo emergency group call
state aids in managing the MCVideo emergency state and related actions.
NOTE 2: The above states and their transitions are described in Annex G.
### 4.6.2 MCVideo emergency private calls
MCVideo emergency private calls as defined by 3GPP TS 23.281 [26] are
supported by the procedures in this specification. The following MCVideo
emergency private call functionalities are specified in the present document:
\- MCVideo emergency private call origination with optional MCVideo emergency
alert initiation;
\- upgrade of an MCVideo private call to an MCVideo emergency private; and
\- cancellation of the MCVideo emergency private call priority.
Key aspects of MCVideo emergency private calls include:
\- adjusted EPS bearer priority for both participants whether or not they are
both in an emergency condition (i.e. both have their MCVideo emergency state
set). This is achieved by using the Resource-Priority header field as
specified in IETF RFC 4412 [33] with namespaces defined for use by MCVideo
specified in IETF RFC 8101 [43];
\- the initiator of the MCVideo emergency private call can override the other
MCVideo user in the MCVideo emergency private call unless that user also has
their MCVideo emergency state set;
\- restoration of normal EPS bearer priority to the call according to system
policy (e.g., configured time limit for the emergency priority of an MCVideo
emergency private call or cancellation of the emergency condition of the
private call);
\- restoration of normal transmission control priority participants when the
emergency elevated priority is cancelled;
\- requires the MCVideo user to be authorised to either originate or cancel an
MCVideo emergency private call;
\- requires the targeted MCVideo user to be authorised to receive an MCVideo
emergency private call;
\- requests to originate MCVideo emergency private calls may also include an
indication of an MCVideo emergency alert; and
\- the originator of the MCVideo emergency private call can request that the
call use either manaual or automatic commencement mode.
There are a number of states that are key in managing these aspects of MCVideo
emergency private calls, which include:
\- **MCVideo emergency state (MVES):** as defined in 3GPP TS 22.281 [36] and
3GPP TS 23.281 [26], indicates that the MCVideo user is in a life-threatening
situation. Managed by the MCVideo user of the device or an authorised MCVideo
user. While the MCVideo emergency state is set on the client, all MCVideo
group and private calls originated by the client will be MCVideo emergency
calls, assuming the MCVideo user is authorised for MCVideo emergency calls on
them.
\- **MCVideo private emergency alert (MVPEA) state** : this is an internal
state of the MCVideo client which in conjunction with the MCVideo emergency
private call state aids in managing the MCVideo emergency state and related
actions.
\- **MCVideo emergency private call (MVEPC) state** : this is an internal
state managed by the MCVideo client which in conjunction with the MCVideo
emergency alert state aids in managing the MCVideo emergency state and related
actions.
\- **In-progress emergency private call (IPEPC) state:** indicates whether or
not there is an MCVideo emergency private call in-progress for the two
participants. This state is managed by the controlling MCVideo function. All
private calls originated between these two participants when in an in-progress
emergency private call state are MCVideo emergency private calls until this
state is cancelled, whether or not the originator is in an MCVideo emergency
state.
\- **MCVideo emergency private priority (MVEPP) state:** this is an internal
state managed by the MCVideo client which tracks the in-progress emergency
private call state of the private call managed by the controlling MCVideo
function. Ideally, the MCVideo client would not need to track the in-progress
emergency private priority state, but doing so enables the MCVideo client to
request MCVideo emergency-level priority earlier than otherwise possible. For
example, if the MCVideo user wishes to join an MCVideo emergency private call
and is not in the MCVideo emergency state, the MCVideo client should have
emergency level priority. If it has knowledge of the in-progress emergency
private priority state of the private call (i.e., the two participants), it
can request priority by including a Resource-Priority header field set to the
MCVideo namespace specified in IETF RFC 8101 [38], and appropriate priority
level in the SIP INVITE request (or SIP re-INVITE request).
NOTE: The above states and their transitions are described in Annex G.
### 4.6.3 MCVideo emergency alerts
MCVideo emergency alerts as defined by 3GPP TS 23.281 [26] are supported by
the procedures in this specification. The following MCVideo emergency group
call functionalities are specified in the present document:
\- MCVideo emergency alert origination; and
\- MCVideo emergency alert cancellation.
MCVideo emergency alerts are supported procedurally by two general mechanisms.
One mechanism is embedded within the MCVideo emergency call (both emergency
private call and emergency group call using both prearranged and chat session
models) signalling procedures documented in clause 9 and clause 10 of this
specification. The other mechanism utilizes SIP MESSAGE requests and is
documented in clause 11.
MCVideo emergency alerts can be initiated or cancelled as options in the
following signalling procedures documented in clause 9 and clause 10:
\- MCVideo emergency group call initiation;
\- MCVideo group call upgraded to MCVideo emergency call;
\- MCVideo emergency group call cancellation (i.e., in-progress emergency
state of the group set to false);
\- MCVideo emergency private call initiation; and
\- MCVideo private call upgrade to MCVideo emergency private call.
MCVideo emergency alerts can also be initiated or cancelled as described in
the procedures of clause 11 which include:
\- MCVideo emergency alert initiation; and
\- MCVideo emergency alert cancellation (with optional cancelling of the in-
progress emergency state of a group).
When MCVideo emergency alerts are initiated as an option in initiating or
upgrading to an MCVideo emergency group call or are initiated using SIP
MESSAGE requests, they are targeted to an MCVideo group, and, if not already
affiliated, will result in the initiator being implicitly affiliated to the
MCVideo group. When initiated as an option in initiating or upgrading to an
MCVideo emergency private call, an MCVideo emergency alert is targeted to an
individual MCVideo user, not to an MCVideo group.
Key aspects of MCVideo emergency alerts include:
\- **MCVideo emergency (MVES) state:** the MCVideo client\'s MCVideo emergency
state as described in clause G.1 is set upon initiation of an MCVideo
emergency alert. While the MCVideo emergency state is set, assuming the
MCVideo user has the needed authorisations, if the user initiates a private
call and is authorised to do so, the MCVideo private call will be an MCVideo
emergency private call. Similarly, assuming the needed authorisations, any
subsequent MCVideo group call initiated by an MCVideo user with the MCVideo
emergency state set will be an MCVideo emergency group call.
**\- MCVideo emergency alert (MVEA) state:** the MCVideo client maintains the
internal MCVideo emergency alert state (MVEA) which aids in the management of
the MCVideo emergency state as described in clause G.5.
**\- MCVideo private emergency alert (MVPEA) state** : the MCVideo client
maintains the MCVideo private emergency alert state of an MCVideo emergency
alert targeted to an MCVideo user which aids in the management of the MCVideo
emergency state.
\- **In-progress emergency group (IPEG) state :** MCVideo emergency alert
initiation or cancellation in and of itself does not impact the in-progress
emergency state of the targeted group, which is maintained by the controlling
MCVideo function, nor does it impact the priority of the EPS bearers. However,
in setting the MCVideo emergency state, assuming an MCVideo user is authorised
to make MCVideo emergency calls on the targeted group, any subsequent MCVideo
group call the MCVideo user initiates on the group will cause the in-progress
emergency state of the group to be set as described in clause G.2 and will
result in upgraded priority of the EPS bearers used in the MCVideo emergency
call.
**\- Authorisations for emergency alerts:** MCVideo users need to be
authorised to initiate MCVideo emergency alerts and additionally need to be
authorised to cancel MCVideo emergency alerts. The parameters related to these
authorisations are specified in 3GPP TS 24.483 [4] and 3GPP TS 24.484 [25].
### 4.6.4 MCVideo imminent peril group call
MCVideo imminent peril group calls as defined by 3GPP TS 23.281 [26] are
supported by the procedures in this specification. The following MCVideo
imminent peril group calls functionalities are specified in the present
document:
\- MCVideo imminent peril group calls origination;
\- upgrade of an MCVideo group call to an MCVideo imminent peril group call;
\- upgrade from an MCVideo imminent peril group call to an MCVideo emergency
group call; and
\- cancellation of the in-progress imminent peril state of the group.
Key aspects of MCVideo imminent peril include:
\- adjusted EPS bearer priority for all participants when the in-progress
imminent peril state of the group is set whether or not they themselves
initiated an imminent peril group call. For unicast bearers this is achieved
by using the Resource-Priority header field as specified in IETF RFC 4412 [33]
with namespaces defined for use by MCVideo specified in IETF RFC 8101 [43],
and for MBMS bearers this is achieved by having the participating MCVideo
function adjust the ARP (priority, PVI, PCI) and executing the Modify MBMS
Bearer Procedure per 3GPP TS 29.468 [44];
\- restoration of normal EPS bearer priority to the call when the in-progress
imminent peril group state is cancelled; and
\- requires the MCVideo user to be authorised to either originate or cancel an
MCVideo imminent peril group call.
Relationship to other MCVideo priority group call types:
\- A normal MCVideo group call can be upgraded to an MCVideo imminent peril
group call;
\- An MCVideo imminent peril group call can be upgraded to an MCVideo
emergency group call;
\- When either an MCVideo imminent peril group call or an MCVideo emergency
group call (i.e., their respective \"in-progress\" states) the group call
returns to the priority designated for normal group calls, i.e., their is no
direct transition from an MCVideo emergency group call to an MCVideo imminent
peril group call;
\- MCVideo imminent peril functionality is only applicable to MCVideo group
calls, not MCVideo private calls; and
\- MCVideo imminent peril group calls have no associated alert capabilities
such as the MCVideo emergency alert capability which is associated with
MCVideo emergency group calls.
There are a number of states that are key in managing these aspects of MCVideo
imminent peril group calls, which include:
\- **MCVideo imminent peril group (MVIG) state** : this is an internal state
of the MCVideo client which in conjunction with the MCVideo imminent peril
group call state aids the client in managing the use of the Resource-Priority
header field and related actions.
\- **MCVideo imminent peril group call (MVIGC) state** : this is an internal
state managed by the MCVideo client which in conjunction with the MCVideo
imminent peril group state aids the client in managing the use of the
Resource-Priority header field and related actions.
\- **In-progress imminent peril group (IPIG) state:** this a state of the
MCVideo group which is managed by the controlling MCVideo function. While an
MCVideo group is in an in-progress imminent peril group state, all
participants in group calls using this group will receive elevated priority.
The above states and their transitions are described in Annex G.
## 4.7 Communication security
### 4.7.1 Media security
If a mission critical organisation requires MCVideo users to communicate using
end-to-end security, a security context needs to be established between the
initiator of the call and the recipient(s) of the call, prior to the
establishment of media, or transmission control signalling. This provides
assurance to MCVideo users that no unauthorised access to communications is
taking place within the MCVideo network. An MCVideo key management server
(KMS) manages the security domain. For any end-point to use or access end-to-
end secure communications, it needs to be provisioned with keying material
associated to its identity by the KMS as specified in 3GPP TS 33.180 [8].
For group calls, the security context is set up at the time of creation of the
group. The group management server creates group call keying material
associated with the group and distributes it to all members of the group, in
advance of the initiation of a group call as specified in 3GPP TS 24.481 [24]
and 3GPP TS 33.180 [8]. The establishment of a security context for group
calls has no impact on this specification.
For private calls, the security context is initiated at call setup. An end-to-
end security context is established that is unique to the pair of users
involved in the call. The procedure involves transferral of an encapsulated
private call key (PCK) and private call key id (PCK-ID) from the initiator to
the terminator. The PCK is encrypted using the terminator\'s MCVideo ID and
domain-specific material provided from the terminating user\'s KMS. The
domain-specific key material of the terminator\'s KMS is identified by a KMS
URI stored in the terminating user profile. The domain-specific key material
for all KMSs is downloaded in advance from the initiator\'s home KMS as
described in 3GPP TS 33.180 [8]. The PCK and PCK-ID are distributed within a
MIKEY payload within the SDP offer of the private call request. This payload
is called a MIKEY-SAKKE I_MESSAGE, as defined in IETF RFC 6509 [55], which
ensures the confidentiality, integrity and authenticity of the payload. The
encoding of the MIKEY payload in the SDP offer is described in IETF RFC 4567
[56] using an \"a=key-mgmt\" attribute. The payload is signed using a key
associated to the identity of the initiating user. At the terminating side,
the signature is validated. If valid, the UE extracts and decrypts the
encapsulated PCK. The MCVideo UE also extracts the PCK-ID. This process is
described in 3GPP TS 33.180 [8]. With the PCK successfully shared between the
two MCVideo UEs, the UEs are able to use SRTP/SRTCP to create an end-to-end
secure session.
End-to-end security is independent of the transmission path and hence is
applicable to both on and off-network communications. With a security context
established, the group call key and private call key can be used to encrypt
media and, if required, transmission control traffic between the end-points as
described in 3GPP TS 24.581 [5].
### 4.7.2 Signalling security
Signalling security is established between the participating MCVideo function
and the MCVideo client. This allows the following signalling to be integrity
and confidentiality protected through the SIP core:
\- Sensitive application data (as described in clause 4.8)
\- Transmission control messages sent using unicast
\- Media control messages
For unicast signalling between the participating MCVideo function and the
MCVideo client, the signalling is protected using the Client-Server Key (CSK),
identified by a Client-Server Key Identifer (CSK-ID). The CSK and CSK-ID are
uploaded from the MCVideo client to the MCVideo server within a MIKEY MIME
payload within a SIP REGISTER message for service authorisation or a SIP
PUBLISH message for service authorisation. The CSK is confidentiality and
integrity protected to the public service identity identifying the
participating MCVideo function serving the MCVideo user and signed by the
MCVideo ID of the MCVideo user.
The CSK and CSK-ID may also be updated by the participating MCVideo function.
The procedure involves the participating MCVideo function generating a new CSK
and CSK-ID and distributing the new key to the MCVideo client using a CSK
\'key download\' SIP MESSAGE. The message contains a MIKEY MIME payload
containing the CSK and CSK-ID. The CSK is confidentiality and integrity
protected to the public service identity identifying the participating MCVideo
function serving the MCVideo user and signed by the MCVideo ID of the MCVideo
user. The client only uses a single CSK at any one time and discards the
previously established CSK on receiving a new CSK.
## 4.8 Protection of sensitive application data.
In certain deployments, for example, in the case that the MCVideo operator
uses the underlying SIP core infrastructure from the carrier operator, the
MCVideo operator can prevent certain sensitive application data from being
visible in the clear to the SIP layer. The following data are classed as
sensitive application data:
\- MCVideo ID;
\- MCVideo group ID;
\- user location information;
\- emergency, alert and imminent-peril indicators;
\- access token (containing the MCVideo ID); and
\- MCVideo client ID.
The above data is transported as XML content in SIP messages. in XML elements
or XML attributes.
Data is transported in attributes in the following circumstances in the
procedures in the present document:
\- an MCVideo ID, an MCVideo Group ID, and an MCVideo client ID in an XML
document published in SIP PUBLISH request for affiliation according to IETF
RFC 3856 [13];
\- an MCVideo ID or an MCVideo Group ID in XML document notified in a SIP
NOTIFY request for affiliation according to IETF RFC 3856 [13];
\- an MCVideo ID in application/resource-lists+xml document included in an SIP
INVITE request setting up a private call according to IETF RFC 5366 [37]; and
\- an MCVideo ID in XML document provided in SIP NOTIFY request of a
conference event package according to IETF RFC 4575 [57];
3GPP TS 33.180 [8] describes a method to provide confidentiality protection of
sensitive application data in elements by using XML encryption (i.e. xmlenc)
and in attributes by using an attribute confidentiality protection scheme
described in clause 6.6.2.3 of the present document. Integrity protection can
also be provided by using XML signatures (i.e. xmlsig).
Protection of the data relies on a shared XML protection key (XPK) used to
encrypt and sign data:
\- between the MCVideo client and the MCVideo server, the XPK is a client-
server key (CSK); and
\- between MCVideo servers and between MCVideo domains, the XPK is a
signalling protection key (SPK).
The CSK (XPK) and a key-id CSK-ID (XPK-ID) are generated from keying material
provided by the key management server. Identity based public key encryption
based on MIKEY-SAKKE is used to transport the CSK between SIP end-points. The
encrypted CSK is transported from the MCVideo client to the MCVideo server
when the MCVideo client performs service authorisation as described in clause
7 and is also used during service authorisation to protect the access token.
The SPK (XPK) and a key-id SPK-ID (XPK-ID) are directly provisioned in the
MCVideo servers.
Configuration in the MCVideo client and MCVideo server is used to determine
whether one or both of confidentiality protection and integrity protection are
required.
## 4.9 MCVideo client ID
The MCVideo client assigns the MCVideo client ID when the MCVideo client is
used for the first time. The MCVideo client generates the MCVideo client ID as
specified in clause 4.2 of IETF RFC 4122 [58].
The MCVideo client preserves the MCVideo client ID:
\- while the MCVideo client is SIP registered as specified in 3GPP TS 24.229
[11];
\- while the MCVideo client is not SIP registered as specified in 3GPP TS
24.229 [11] and the UE serving the MCVideo client is switched on;
\- while the UE serving the MCVideo client is switched off; and
\- while the UE serving the MCVideo client is power-cycled.
NOTE: MCVideo client ID is not preserved when the UE is reset to factory
settings.
## 4.10 Off-network MCVideo
Off-network services are available for the user if the value of \"/_\ _/_\
_/OffNetwork/Authorised\" leaf node present in the MCVideo user profile as
specified in 3GPP TS 24.483 [4] is set to \"true\".
# 5 Functional entities
## 5.1 General
This clause associates the functional entities with the MCVideo roles
described in the stage 2 architecture document (see 3GPP TS 23.281 [26]).
## 5.2 MCVideo client
To be compliant with the procedures in the present document, an MCVideo client
shall:
\- act as the user agent for all MCVideo application transactions (e.g.
initiation of a group call); and
\- support handling of the MCVideo client ID as described in clause 4.10.
To be compliant with the on-network procedures in the present document, an
MCVideo client shall:
\- support the MCVideo client on-network procedures defined in 3GPP TS 23.281
[6];
\- support the GCS UE procedures defined in 3GPP TS 23.468 [63] for unicast
delivery, MBMS delivery and service continuity;
\- act as a SIP UA as defined in 3GPP TS 24.229 [11];
\- generate SDP offer and SDP answer in accordance with 3GPP TS 24.229 [11]
and clause 6.2;
\- act as a transmission control participant responsible for transmission
control requests and implement the on-network procedures for transmission and
reception control requests as specified in 3GPP TS 24.581 [5];
\- for registration and service authorisation, implement the procedures
specified in clause 7.2;
\- for affiliation, implement the procedures specified in clause 8.2;
\- for group call functionality (including emergency and imminent peril),
implement the MCVideo client procedures specified in clause 9.2; and
\- for private call functionality (including emergency), implement the MCVideo
client procedures specified in clause 10.2; and
\- for emergency alert, implement the procedures specified in clause 11.2.
To be compliant with the off-network procedures in the present document, an
MCVideo client shall:
\- support the off-network procedures defined in 3GPP TS 23.281 [26];
\- support the MONP MCVideo messages specified in clause 17;
\- act as a transmission control participant for transmission and reception
control requests and implement the off-network procedures for transmission and
reception control requests as specified in 3GPP TS 24.581 [5];
\- act as a transmission control server providing distributed transmission and
reception control and implement the off-network procedures for transmission
and reception control as specified in 3GPP TS 24.581 [5];
\- implement the procedures for ProSe direct discovery for public safety use
as specified in 3GPP TS 24.334 [59];
\- implement the procedures for one-to-one ProSe direct communication for
Public Safety use as specified in 3GPP TS 24.334 [28];
\- for group call functionality (including emergency and imminent peril),
implement the MCVideo client procedures specified in clause 9.3; and
\- for private call functionality, implement the MCVideo client procedures
specified in clause 10.3.
To be compliant with the on-network and off-network procedures in the present
document requiring end-to-end private call security key distribution, an
MCVideo client shall support the procedures specified in 3GPP TS 33.180 [8].
To be compliant with the procedures for confidentiality protection of XML
elements in the present document, the MCVideo client shall implement the
procedures specified in clause 6.6.2.
To be compliant with the procedures for integrity protection of XML MIME
bodies in the present document, the MCVideo client shall implement the
procedures specified in clause 6.6.3.
## 5.3 MCVideo server
### 5.3.1 General
An MCVideo server can perform the controlling role for group calls and private
calls as defined in 3GPP TS 23.281 [26].
An MCVideo server can perform the participating role for group calls and
private calls as defined in 3GPP TS 23.281 [26].
An MCVideo server performing the participating role can serve an originating
MCVideo user.
An MCVideo server performing the participating role can serve a terminating
MCVideo user.
The same MCVideo server can perform the participating role and controlling
role for the same group session.
When referring to the procedures in the present document for the MCVideo
server acting in a participating role for the served user, the term,
\"participating MCVideo function\" is used.
When referring to the procedures in the present document for the MCVideo
server acting in a controlling role for the served user, the term
\"controlling MCVideo function\" is used.
To be compliant with the procedures in the present document, an MCVideo server
shall:
\- support the MCVideo server procedures defined in 3GPP TS 23.281 [26];
\- implement the role of an AS performing 3rd party call control acting as a
routing B2BUA as defined in 3GPP TS 24.229 [4];
\- support the GCS AS procedures defined in 3GPP TS 23.468 [57] for unicast
delivery, MBMS delivery and service continuity;
\- generate SDP offer and SDP answer in accordance with 3GPP TS 24.229 [4] and
clause 6.3;
\- implement the role of a centralised transmission control server and
implement the on-network procedures for transmission and reception control as
specified in 3GPP TS 24.581 [42];
\- for registration and service authorisation, implement the procedures
specified in clause 7.3;
\- for affiliation, implement the procedures specified in clause 8.2.2;
\- for group call functionality (including emergency and imminent peril),
implement the MCVideo server procedures specified in clause 9.2;
\- for private call functionality, implement the MCVideo server procedures
specified in clause 10.2; and
\- for priority sharing, implement the MCVideo server procedures in clause
6.7.
To be compliant with the procedures in the present document requiring the
distribution of private call keying material between MCVideo clients as
specified in 3GPP TS 33.180 [8], an MCVideo server shall ensure that the
keying material is copied from incoming SIP messages into the outgoing SIP
messages.
To be compliant with the procedures for confidentiality protection of XML
elements in the present document, the MCVideo server shall implement the
procedures specified in clause 6.6.2.
To be compliant with the procedures for integrity protection of XML MIME
bodies in the present document, the MCVideo server shall implement the
procedures specified in clause 6.6.3.
### 5.3.2 Functional connectivity models
The following figures give an overview of the connectivity between the
different functions of the MCVideo server as described in clause 5.3.1.
NOTE: Separate boxes are shown for each of the functions of the MCVideo
server. In each MC system, these functions can be physically combined into one
MCVideo server or can be implemented on more than one MCVideo server. For
example, there could be an instantiation of an MCVideo server that only serves
as a controlling MCVideo function, but not as a participating MCVideo function
for any MCVideo clients. When an MCVideo server supports more than one
function, then sending requests from one function to another does not incur a
traversal of the underlying IMS SIP core network.
Figure 5.3.2-1 shows the basic functions of the MCVideo server when operating
within the primary MCVideo system.
Figure 5.3.2-1: Functions of the MCVideo server in the primary MC system
Figure 5.3.2-2 shows the roles of the MCVideo server in a mutual aid
relationship between a primary MC system and a partner MC system. Here, the
controlling MCVideo function is in the primary MC system and the called user
is homed in a partner MC system.
Figure 5.3.2-2: Mutual aid relationship between the primary MC system and a
partner MC system with the controlling MCVideo function in the primary MC
system
Figure 5.3.2-3 shows the roles of the MCVideo server in a mutual aid
relationship between a primary MC system and a partner MC system. Here, the
controlling MCVideo function is in the partner MC system.
Figure 5.3.2-3: Mutual aid relationship between the primary MC system and a
partner MC system with the controlling MCVideo function in the partner MC
system
Figure 5.3.2-4 illustrates a functional connectivity model involving multiple
partner systems where the partner system that owns the group does not home any
of the group members.
Figure 5.3.2-4: : Mutual aid relationship between the primary MC system and
more than one partner MC system for MCVideo service
Other functional connectivity models can exist.
### 5.3.3 Failure case
When initiating a failure response to any received request, depending on
operator policy, the MCVideo server may insert a SIP Response-Source header
field with an \"fe\" header field parameter constructed with the URN namespace
\"urn:3gpp:fe\", the fe-id part of the URN set to \"as\" and the \"role\"
header field parameter set to \"pf-mcvideo-server\", \"cf-mcvideo-server\" or
\"ncf-mcvideo-server\" depending on the current role endorsed by the MCVideo
server and in accordance with clause 7.2.17 of 3GPP TS 24.229 [11].
## 5.4 MCVideo UE-to-network relay
To be compliant with the procedures in the present document for service
continuity, an MCVideo UE- to-network relay shall support the UE-to-network
relay procedures as specified in 3GPP TS 24.334 [28] and 3GPP TS 23.281 [26].
# 6 Common procedures
Editor\'s Note: simultaneous session for MCVideo calls and support for
multiple devices could also be added in this section.
## 6.1 Introduction
This clause describes the common procedures for each functional entity as
specified.
## 6.2 MCVideo client procedures
### 6.2.0 Distinction of requests at the MCVideo client
6.2.0.1 SIP MESSAGE request
The MCVideo client needs to distinguish between the following SIP MESSAGE
requests:
\- SIP MESSAGE request routed to the MCVideo client as a result of initial
filter criteria containing a Content-Type header field set to
\"application/vnd.3gpp.mcvideo-location-info+xml\" and includes an XML body
containing a Location root element containing a Configuration element. Such
requests are known as \"SIP MESSAGE request for location report
configuration\" in the present document;
\- SIP MESSAGE request routed to the MCVideo client as a result of initial
filter criteria containing a Content-Type header field set to
\"application/vnd.3gpp.mcvideo-location-info+xml\" and includes an XML body
containing a Location root element containing a Request element. Such requests
are known as \"SIP MESSAGE request for location report request\" in the
present document.
\- SIP MESSAGE request routed to the MCVideo client as a result of initial
filter criteria containing a Content-Type header field set to
\"application/vnd.3gpp.mcvideo -info+xml\" and includes an XML body containing
a \ root element containing the \ element and an
\ element containing the \ element set to a value of
\"group-selection-change-request\". Such requests are known as \"SIP MESSAGE
request for group selection change request for terminating client\";
\- SIP MESSAGE request routed to the MCVideo client as a result of initial
filter criteria containing a Content-Type header field set to
\"application/vnd.3gpp.mcvideo -info+xml\" and includes an XML body containing
a \ root element containing the \ element and an
\ element containing the \ element set to a value of
\"group-selection-change-response\". Such requests are known as \"SIP MESSAGE
request for group selection change response for terminating client\"; and
\- SIP MESSAGE request routed to the MCVideo client as a result of initial
filter criteria containing a Content-Type header field set to
\"application/mikey\" and a CSB-ID containing a CSK-ID. Such requests are
known as \"SIP MESSAGE request for CSK download for terminating client\".
### 6.2.1 SDP offer generation
The SDP offer shall contain two SDP media-level sections for MCVideo video
media according to 3GPP TS 24.229 [11] and, if transmission control shall be
used during the session, shall contain one SDP media-level clause for a media-
transmission control entity according to 3GPP TS 24.581 [5].
When composing an SDP offer according to 3GPP TS 24.229 [11] the MCVideo
client:
1) shall set the IP address of the MCVideo client for the offered MCVideo
video media stream and, if transmission control shall be used, for the offered
media-transmission control entity;
NOTE: If the MCVideo client is behind a NAT the IP address and port included
in the SDP offer can be a different IP address and port than the actual IP
address and port of the MCVideo client depending on the NAT traversal method
used by the SIP/IP Core.
2) shall include an \"m=audio\" media-level clause for the MCVideo media
stream consisting of:
a) the port number for the media stream selected; and
b) the codec(s) and media parameters and attributes with the following
clarification:
i) if the MCVideo client is initiating a call to a group identity;
ii) if the \ element is present in the group
document retrieved by the group management client as specified in 3GPP TS
24.481 [24] containing an \ element with a \"name\" attribute; and
iii) if the MCVideo client supports the encoding name indicated in the value
of the \"name\" attribute;
then the MCVideo client:
i) shall insert the value of the \"name\" attribute in the \
field of the \"a=rtpmap\" attribute as defined in IETF RFC 4566 [2]; and
c) \"i=\" field set to \"audio component of MCVideo\" according to 3GPP TS
24.229 [11];
3) shall include an \"m=video\" media-level clause for the MCVideo media
stream consisting of:
a) the port number for the media stream selected; and
b) the codec(s) and media parameters and attributes with the following
clarification:
i) if the MCVideo client is initiating a call to a group identity;
ii) if the \ element is present in the group
document retrieved by the group management client as specified in 3GPP TS
24.481 [24] containing an \ element with a \"name\" attribute; and
iii) if the MCVideo client supports the encoding name indicated in the value
of the \"name\" attribute;
then the MCVideo client:
i) shall insert the value of the \"name\" attribute in the \
field of the \"a=rtpmap\" attribute as defined in IETF RFC 4566 [2]; and
c) \"i=\" field set to \"video component of MCVideo\" according to 3GPP TS
24.229 [11];
4) if transmission control shall be used during the session, shall include an
\"m=application\" media-level clause as specified in 3GPP TS 24.581 [5] clause
12 for a media-transmission control entity, consisting of:
a) the port number for the media-transmission control entity selected as
specified in 3GPP TS 24.581 [5]; and
b) the \'fmtp\' attributes as specified in 3GPP TS 24.581 [5] clause 14; and
5) if end-to-end security is required for a private call and the SDP offer is
not for establishing a pre-established session, shall include the MIKEY-SAKKE
I_MESSAGE in an \"a=key-mgmt\" attribute as a \"mikey\" attribute value in the
SDP offer as specified in IETF RFC 4567 [34].
### 6.2.2 SDP answer generation
When the MCVideo client receives an initial SDP offer for an MCVideo session,
the MCVideo client shall process the SDP offer and shall compose an SDP answer
according to 3GPP TS 24.229 [11].
When composing an SDP answer, the MCVideo client:
1) shall accept the MCVideo video media stream in the SDP offer;
2) shall set the IP address of the MCVideo client for the accepted MCVideo
video media stream and, if included in the SDP offer, for the accepted media-
transmission control entity;
NOTE: If the MCVideo client is behind a NAT the IP address and port included
in the SDP answer can be a different IP address and port than the actual IP
address and port of the MCVideo client depending on the NAT traversal method
used by the SIP/IP Core.
3) shall include an \"m=audio\" media-level clause for the accepted MCVideo
video media stream consisting of:
a) the port number for the media stream;
b) media-level attributes as specified in 3GPP TS 24.229 [11]; and
c) \"i=\" field set to \"audio component of MCVideo\" according to 3GPP TS
24.229 [11]; and
4) shall include an \"m=video\" media-level clause for the accepted MCVideo
video media stream consisting of:
a) the port number for the media stream;
b) media-level attributes as specified in 3GPP TS 24.229 [11]; and
c) \"i=\" field set to \"video component of MCVideo\" according to 3GPP TS
24.229 [11]; and
5) if included in the SDP offer, shall include the media-level clause of the
offered media-transmission control entity consisting of:
a) an \"m=application\" media-level clause as specified in 3GPP TS 24.581 [5]
clause 12; and
b) \'fmtp\' attributes as specified in 3GPP TS 24.581 [5] clause 14.
### 6.2.3 Commencement modes
#### 6.2.3.1 Automatic commencement mode
##### 6.2.3.1.1 Automatic commencement mode for private calls
When performing the automatic commencement mode procedures, the MCVideo
client:
1) shall accept the SIP INVITE request and generate a SIP 200 (OK) response
according to rules and procedures of 3GPP TS 24.229 [11];
2) shall include the option tag \"timer\" in a Require header field of the SIP
200 (OK) response;
3) shall include the g.3gpp.mcvideo media feature tag in the Contact header
field of the SIP 200 (OK) response;
4) shall include the g.3gpp.icsi-ref media feature tag containing the value of
\"urn:urn-7:3gpp-service.ims.icsi.mcvideo\" in the Contact header field of the
SIP 200 (OK) response;
5) shall include the Session-Expires header field in the SIP 200 (OK) response
and start the SIP session timer according to IETF RFC 4028 [23]. The
\"refresher\" parameter in the Session-Expires header field shall be set to
\"uas\";
6) shall, if the incoming SIP INVITE request contains a Replaces header field,
include in the SDP answer in the SIP 200 (OK) response to the SDP offer the
parameters used for the pre-established session identified by the contents of
the Replaces header field;
7) shall, if the incoming SIP INVITE request does not contain a Replaces
header field, include an SDP answer in the SIP 200 (OK) response to the SDP
offer in the incoming SIP INVITE request according to 3GPP TS 24.229 [11] with
the clarifications given in clause 6.2.2;
NOTE: In the case of a new emergency call where the terminating client is
using a pre-established session, the SIP INVITE request containing a Replaces
header is used to replace the pre-established session.
8) shall send the SIP 200 (OK) response towards the MCVideo server according
to rules and procedures of 3GPP TS 24.229 [11];
9) shall, if the incoming SIP INVITE request contains a Replaces header field,
release the pre-established session identified by the contents of the Replaces
header field; and
10) shall interact with the media plane as specified in 3GPP TS 24.581 [5].
When NAT traversal is supported by the MCVideo client and when the MCVideo
client is behind a NAT, generation of SIP responses is done as specified in
this clause and as specified in IETF RFC 5626 [35].
##### 6.2.3.1.2 Automatic commencement mode for group calls
When performing the automatic commencement mode procedures, the MCVideo client
shall follow the procedures in clause 6.2.3.1.1 with the following
clarification:
\- The MCVideo client may include a P-Answer-State header field with the value
\"Confirmed\" as specified in IETF RFC 4964 [30] in the SIP 200 (OK) response.
#### 6.2.3.2 Manual commencement mode
##### 6.2.3.2.1 Manual commencement mode for private calls
When performing the manual commencement mode procedures:
1) if the MCVideo user declines the MCVideo session invitation the MCVideo
client shall send a SIP 480 (Temporarily Unavailable) response towards the
MCVideo server with the warning text set to: \"110 user declined the call
invitation\" in a Warning header field as specified in clause 4.4, and not
continue with the rest of the steps in this clause.
The MCVideo client:
1) shall accept the SIP INVITE request and generate a SIP 180 (Ringing)
response according to rules and procedures of 3GPP TS 24.229 [11];
2) shall include the option tag \"timer\" in a Require header field of the SIP
180 (Ringing) response;
3) shall include the g.3gpp.mcvideo media feature tag in the Contact header
field of the SIP 180 (Ringing) response;
4) shall include the g.3gpp.icsi-ref media feature tag containing the value of
\"urn:urn-7:3gpp-service.ims.icsi.mcvideo\" in the Contact header field of the
SIP 180 (Ringing) response; and
5) shall send the SIP 180 (Ringing) response to the MCVideo server.
When sending the SIP 200 (OK) response to the incoming SIP INVITE request, the
MCVideo client shall follow the procedures in clause 6.2.3.1.1.
When NAT traversal is supported by the MCVideo client and when the MCVideo
client is behind a NAT, generation of SIP responses is done as specified in
this clause and as specified in IETF RFC 5626 [35].
##### 6.2.3.2.2 Manual commencement mode for group calls
When performing the manual commencement mode procedures:
1) the terminating MCVideo client may automatically generate a SIP 183
(Session Progress) in accordance with 3GPP TS 24.229 [11], prior to the
MCVideo user\'s acknowledgement; and
2) if the MCVideo user declines the MCVideo session invitation the MCVideo
client shall send a SIP 480 (Temporarily Unavailable) response towards the
MCVideo server with the warning text set to: \"110 user declined the call
invitation\" in a Warning header field as specified in clause 4.4, and not
continue with the rest of the steps in this clause.
When generating a SIP 183 (Session Progress) response, the MCVideo client:
1) shall include the following in the Contact header field:
a) the g.3gpp.mcvideo media feature tag; and
b) the g.3gpp.icsi-ref media feature tag containing the value of
\"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"; and
2) may include a P-Answer-State header field with the value \"Unconfirmed\" as
specified in IETF RFC 4964 [30];
When sending the SIP 200 (OK) response to the incoming SIP INVITE request, the
MCVideo client shall follow the procedures in clause 6.2.3.1.2.
When NAT traversal is supported by the MCVideo client and when the MCVideo
client is behind a NAT, generation of SIP responses is done as specified in
this clause and as specified in IETF RFC 5626 [35]
### 6.2.4 Leaving an MCVideo session initiated by MCVideo client
#### 6.2.4.1 On-demand session case
Upon receiving a request from an MCVideo user to leave an MCVideo session
established using on-demand session signalling, the MCVideo client:
1) shall interact with the media plane as specified in 3GPP TS 24.581 [5];
2) shall generate a SIP BYE request according to 3GPP TS 24.229 [11];
3) shall set the Request-URI to the MCVideo session identity to leave; and
4) shall send a SIP BYE request towards MCVideo server according to 3GPP TS
24.229 [11].
Upon receiving a SIP 200 (OK) response to the SIP BYE request, the MCVideo
client shall interact with the media plane as specified in 3GPP TS 24.581 [5].
### 6.2.5 Releasing an MCVideo session initiated by MCVideo client
#### 6.2.5.1 On-demand session case
When the MCVideo client wants to release an MCVideo session established using
on-demand session signalling, the MCVideo client:
1) shall interact with the media plane as specified in 3GPP TS 24.581 [5];
2) shall generate a SIP BYE request according to 3GPP TS 24.229 [11];
3) shall set the Request-URI to the MCVideo session identity to release; and
4) shall send a SIP BYE request towards MCVideo server according to 3GPP TS
24.229 [11].
Upon receiving a SIP 200 (OK) response to the SIP BYE request, the MCVideo
client shall interact with the media plane as specified in 3GPP TS 24.581 [5].
### 6.2.6 Receiving an MCVideo session release request
Upon receiving a SIP BYE request, the MCVideo client:
1) shall interact with the media plane as specified in 3GPP TS 24.581[5]; and
2) shall send SIP 200 (OK) response towards MCVideo server according to 3GPP
TS 24.229 [11].
### 6.2.7 Void
### 6.2.8 Priority call conditions
#### 6.2.8.0 General
This clause contains common procedures to be used for MCVideo emergency group
calls and MCVideo imminent peril group calls.
#### 6.2.8.1 MCVideo emergency group call conditions
##### 6.2.8.1.1 SIP INVITE request for originating MCVideo emergency group
calls
This clause is referenced from other procedures.
When the MCVideo emergency state is set and this MCVideo user and MCVideo
group are authorised to initiate MCVideo emergency group calls as determined
by the procedures of clause 6.2.8.1.8, the MCVideo client:
1) shall include in the application/vnd.3gpp.mcvideo-info+xml MIME body in the
SIP INVITE request, an \ element set to \"true\" and if the
MCVideo emergency group call state is set to \"MVEGC 1: emergency-gc-
capable\", shall set the MCVideo emergency group call state to \"MVEGC 2:
emergency-call-requested\";
2) if the MCVideo user has also requested an MCVideo emergency alert to be
sent and this is an authorised request for MCVideo emergency alert as
determined by the procedures of clause 6.2.8.1.6, and the MCVideo emergency
alert state is set to \"MVEA 1: no-alert\", shall:
a) set the \ element of the application/vnd.3gpp.mcvideo-info+xml
MIME body to \"true\" and set the MCVideo emergency alert state to \"MVEA 2:
emergency-alert-confirm-pending\"; and
b) perform the procedures specified in clause 6.2.9.1 for the MCVideo
emergency alert trigger;
3) if the MCVideo user has not requested an MCVideo emergency alert to be sent
and the MCVideo emergency alert state is set to \"MVEA 1: no-alert\", shall
set the \ element of the application/vnd.3gpp.mcvideo-info+xml MIME
body to \"false\"; and
4) if the MCVideo client emergency group state of the group is set to a value
other than \"MVEG 2: in-progress\" set the MCVideo client emergency group
state of the MCVideo group to \"MVEG 3: confirm-pending\".
NOTE 1: This is the case of an MCVideo user already being in the MCVideo
emergency state it initiated previously while originating an MCVideo emergency
group call or MCVideo emergency alert. All group calls the MCVideo user
originates while in MCVideo emergency state will be MCVideo emergency group
calls.
When the MCVideo emergency state is clear and the MCVideo emergency group call
state is set to \"MVEGC 1: emergency-gc-capable\" and the received SIP request
contains an authorised request for MCVideo emergency group call as determined
by the procedures of clause 6.2.8.1.8, the MCVideo client shall set the
MCVideo emergency state and perform the following actions:
1) shall include in the application/vnd.3gpp.mcvideo-info+xml MIME body in the
SIP INVITE request an \ element set to \"true\" and set the
MCVideo emergency group call state to \"MVEGC 2: emergency-call-requested\"
state;
2) if the MCVideo user has also requested an MCVideo emergency alert to be
sent and this is an authorised request for MCVideo emergency alert as
determined by the procedures of clause 6.2.8.1.6, shall:
a) include in the application/vnd.3gpp.mcvideo-info+xml MIME body the \ element set to \"true\" and set the MCVideo emergency alert state to
\"MVEA 2: emergency-alert-confirm-pending\"; and
b) perform the procedures specified in clause 6.2.9.1 for the MCVideo
emergency alert trigger;
3) if the MCVideo user has not requested an MCVideo emergency alert to be
sent, shall set the \ element of the application/vnd.3gpp.mcvideo-
info+xml MIME body to \"false\"; and
4) if the MCVideo client emergency group state of the group is set to a value
other than \"MVEG 2: in-progress\" shall set the MCVideo client emergency
group state of the MCVideo group to \"MVEG 3: confirm-pending\".
NOTE 2: This is the case of an initial MCVideo emergency group call and
optionally an MCVideo emergency alert being sent. As the MCVideo emergency
state is not sent, there is no MCVideo emergency alert outstanding.
NOTE 3: An MCVideo group call originated by an affiliated member of an MCVideo
group which is in an in-progress emergency state (as tracked on the MCVideo
client by the MCVideo client emergency group state) but is not in an MCVideo
emergency state of their own will also be an MCVideo emergency group call. The
\ and \ elements of the
application/vnd.3gpp.mcvideo-info+xml MIME body do not need to be included in
this case and hence no action needs to be taken in this clause.
##### 6.2.8.1.2 Resource-Priority header field for MCVideo emergency group
calls
This clause is referenced from other procedures.
If the MCVideo emergency group call state is set to either \"MVEGC 2:
emergency-call-requested\" or \"MVEGC 3: emergency-call-granted\" and this is
an authorised request for an MCVideo emergency group call as determined by the
procedures of clause 6.2.8.1.8, or the MCVideo client emergency group state of
the group is set to \"MVEG 2: in-progress\", the MCVideo client shall include
in the SIP INVITE request a Resource-Priority header field populated with the
values for an MCVideo emergency group call as specified in clause 6.2.8.1.15.
NOTE: The MCVideo client ideally would not need to maintain knowledge of the
in-progress emergency state of the group (as tracked on the MCVideo client by
the MCVideo client emergency group state) but can use this knowledge to
provide a Resource-Priority header field set to emergency level priority,
which starts the infrastructure priority adjustment process sooner than
otherwise would be the case.
If this is an authorised request to cancel the MCVideo emergency group call as
determined by the procedures of clause 6.2.8.1.7, and the MCVideo client
emergency group state of the group is \"no-emergency\" or \"cancel-pending\",
the MCVideo client shall include in the SIP INVITE request a Resource-Priority
header field populated with the values for a normal MCVideo group call as
specified in clause 6.2.8.1.15.
##### 6.2.8.1.3 SIP re-INVITE request for cancelling MCVideo in-progress
emergency group state
This clause is referenced from other procedures.
If the MCVideo emergency group call state is set to \"MVEGC 3: emergency-call-
granted\" and the MCVideo emergency alert state is set to \"MVEA 1: no-
alert\", the MCVideo client shall generate a SIP re-INVITE request according
to 3GPP TS 24.229 [11] with the clarifications given below.
NOTE 1: This procedure assumes that the calling procedure has verified that
the MCVideo user has made an authorised request for cancelling MCVideo in-
progress emergency group state of the group.
The MCVideo client:
1) shall include in the SIP re-INVITE request an application/vnd.3gpp.mcvideo-
info+xml MIME body as defined in clause F.1 with the \ element
set to \"false\";
2) shall clear the MCVideo emergency state; and
3) shall set MCVideo emergency group state of the MCVideo group to \"MVEG 3:
cancel-pending\"
NOTE 2: This is the case of an MCVideo user who has initiated an MCVideo
emergency group call and wants to cancel it.
If the MCVideo emergency group call state is set to \"MVEGC 3: emergency-call-
granted\" and the MCVideo emergency alert state is set to a value other than
\"MVEA 1: no-alert\" and the MCVideo user has indicated only the MCVideo
emergency group call should be cancelled, the MCVideo client:
1) shall include in the SIP re-INVITE request an application/vnd.3gpp.mcvideo-
info+xml MIME body as defined in clause F.1 with the \ element
set to \"false\"; and
2) shall set the MCVideo emergency group state of the MCVideo group to \"MVEG
3: cancel-pending\".
NOTE 3: This is the case of an MCVideo user has initiated both an MCVideo
emergency group call and an MCVideo emergency alert and wishes to only cancel
the MCVideo emergency group call. This leaves the MCVideo emergency state set.
If the MCVideo emergency group call state is set to \"MVEGC 3: emergency-call-
granted\" and the MCVideo emergency alert state is set to a value other than
\"MVEA 1: no-alert\" and the MCVideo user has indicated that the MCVideo
emergency alert on the MCVideo group should be cancelled in addition to the
MCVideo emergency group call, the MCVideo client:
1) shall include in the SIP re-INVITE request an application/vnd.3gpp.mcvideo-
info+xml MIME body as defined in clause F.1 with the \ element
set to \"false\";
2) shall if this is an authorised request to cancel an MCVideo emergency alert
as determined by the procedures of clause 6.2.8.1.6:
a) include in the application/vnd.3gpp.mcvideo-info+xml MIME body an \ element set to \"false\";
b) set the MCVideo emergency alert state to \"MVEA 4: Emergency-alert-cancel-
pending\"; and
c) clear the MCVideo emergency state;
3) should, if this is not an authorised request to cancel an MCVideo emergency
alert as determined by the procedures of clause 6.2.8.1.6, indicate to the
MCVideo user that they are not authorised to cancel the MCVideo emergency
alert; and
4) shall set the MCVideo emergency group state of the MCVideo group to \"MVEG
3: cancel-pending\".
NOTE 4: This is the case of an MCVideo user that has initiated both an MCVideo
emergency group call and an MCVideo emergency alert and wishes to cancel both.
##### 6.2.8.1.4 Receiving a SIP 2xx response to a SIP request for a priority
call
In the procedures in this clause, a priority group call refers to an MCVideo
emergency group call or an MCVideo imminent peril group call.
On receiving a SIP 2xx response to a SIP request for a priority group call,
the MCVideo client:
1) if the MCVideo emergency group call state is set to \"MVEGC 2: emergency-
call-requested\" or \"MVEGC 3: emergency-call-granted\":
a) shall set the MCVideo client emergency group state of the group to \"MVEG
2: in-progress\" if it was not already set;
b) if the MCVideo emergency alert state is set to \"MVEA 2: emergency-alert-
confirm-pending\" and the SIP 2xx response to the SIP request for a priority
group call does not contain a Warning header field as specified in clause 4.4
with the warning text containing the mcvideo-warn-code set to \"149\", shall
set the MCVideo emergency alert state to \"MVEA 3: emergency-alert-initiated;
c) shall set the MCVideo emergency group call state to \"MVEGC 3: emergency-
call-granted\"; and
d) shall set the MCVideo imminent peril group call state to \"MVIGC 1:
imminent-peril-capable\" and the MCVideo imminent peril group state to \"MVIG
1: no-imminent-peril\"; or
2) if the MCVideo imminent peril group call state is set to \"MVIGC 2:
imminent-peril-call-requested\" or \"MVIGC 3: imminent-peril-call-granted\"
and the SIP 2xx response to the SIP request for an imminent peril group call
does not contain a Warning header field as specified in clause 4.4 with the
warning text containing the mcvideo-warn-code set to \"149\":
a) set the MCVideo imminent peril group call state to \"MVIGC 3: imminent-
peril-call-granted\"; and
b) set the MCVideo imminent peril group state to \"MVIG 2: in-progress\".
##### 6.2.8.1.5 Receiving a SIP 4xx response, SIP 5xx response or SIP 6xx
response to a SIP request for a priority group call
In the procedures in this clause, a priority group call refers to an MCVideo
emergency group call or an MCVideo imminent peril group call.
Upon receiving a SIP 4xx response, SIP 5xx response or a SIP 6xx response to a
SIP request for a priority group call the MCVideo client:
1) if the MCVideo emergency group call state is set to \"MVEGC 2: emergency-
call-requested\" or \"MVEGC 3: emergency-call-granted\":
a) shall set the MCVideo emergency group call state to \"MVEGC 1: emergency-
gc-capable\";
b) if the MCVideo client emergency group state of the group is \"MVEG 3:
confirm-pending\" shall set the MCVideo client emergency group state of the
group to \"MVEG 1: no-emergency\"; and
c) if the sent SIP request for a priority group call contained an
application/vnd.3gpp.mcvideo-info+xml MIME body with an \ element
set to a value of \"true\", shall set the MCVideo emergency alert state to
\"MVEA 1: \"no-alert\"; and
2) if the MCVideo imminent peril group call state is set to \"MVIGC 2:
imminent-peril-call-requested\" or \"MVIGC 3: imminent-peril-call-granted\":
a) shall set the MCVideo imminent peril group state to \"MVIG 1: no-imminent-
peril\"; and
b) shall set the MCVideo imminent peril group call state to \"MVIGC 1:
imminent-peril-capable\".
##### 6.2.8.1.6 Determining authorisation for initiating or cancelling an
MCVideo emergency alert
If the MCVideo client receives a request from the MCVideo user to send an
MCVideo emergency alert and:
1) if the \ element of the \ element
of the MCVideo user profile document identified by the MCVideo ID of the
calling MCVideo user is set to a value of \"true\"; and
2) if the \"entry-info\" attribute of the \ element of the
\ element contained within the \ element
of the MCVideo user profile document is set to a value of:
a) \"DedicatedGroup\", and if the \ element of the \ element
of the \ element of the \ element of the
MCVideo user profile document (see the MCVideo user profile document in 3GPP
TS 24.484 [25]) contains the MCVideo group identity of the MCVideo group
targeted by the calling MCVideo user; or
b) \"UseCurrentlySelectedGroup\" and the \
element of the \ of the group document identified by the MCVideo
group identity targeted for the emergency alert is set to a value of \"true\"
as specified in 3GPP TS 24.481 [24];
then the MCVideo emergency alert request shall be considered to be an
authorised request for an MCVideo emergency alert. In all other cases, it
shall be considered to be an unauthorised request for an MCVideo emergency
alert.
If the MCVideo client receives a request from the MCVideo user to cancel an
MCVideo emergency alert to an MCVideo group, and if the \ element of the \ element of the MCVideo user profile
document identified by the MCVideo ID of the calling MCVideo user (see the
MCVideo user profile document in 3GPP TS 24.484 [25]) is set to a value of
\"true\", then the MCVideo emergency alert cancellation request shall be
considered to be an authorised request to cancel an MCVideo emergency alert.
In all other cases, it shall be considered to be an unauthorised request to
cancel an MCVideo emergency alert.
##### 6.2.8.1.7 Determining authorisation for cancelling the in-progress
emergency state of an MCVideo group
When the MCVideo client receives a request from the MCVideo user to cancel the
in-progress emergency state of a group the MCVideo client and:
1) if the \ element of the \ element of
the MCVideo user profile document identified by the MCVideo ID of the calling
MCVideo user (see the MCVideo user profile document in 3GPP TS 24.484 [25]) is
set to a value of \"true\", then the in-progress emergency group state cancel
request shall be considered to be an authorised request for in-progress
emergency group state cancellation; or
2) if the \ element of the \ element of
the MCVideo user profile document identified by the MCVideo ID of the calling
MCVideo user (see the MCVideo user profile document in 3GPP TS 24.484 [25]) is
set to a value of \"false\", then the in-progress emergency group state cancel
request shall be considered to be an unauthorised request for in-progress
emergency group state cancellation.
##### 6.2.8.1.8 Determining authorisation for originating a priority group
call
When the MCVideo client receives a request from the MCVideo user to originate
an MCVideo emergency group call the MCVideo client shall check the following:
1) if the \ element of the \ element of
the MCVideo user profile document identified by the MCVideo ID of the calling
user (see the MCVideo user profile document in 3GPP TS 24.484 [25]) is set to
a value of \"true\" and
a) if the \"entry-info\" attribute of the \ element of the
\ element of the \ element contained
within the \ element of the MCVideo user profile document
(see the MCVideo user profile document in 3GPP TS 24.484 [25]) is set to a
value of \"DedicatedGroup\" and if the \ element of the \
element of the \ element contains the identity of the
MCVideo group targeted by the calling MCVideo user; or
b) if the \"entry-info\" attribute of the \ element of the
\ element of the \ contained within the
\ element of the MCVideo user profile document (see the
MCVideo user profile document in 3GPP TS 24.484 [25]) is set to a value of
\"UseCurrentlySelectedGroup\";
> then the MCVideo emergency group call request shall be considered to be an
> authorised request for an MCVideo emergency group call;
In all other cases, the request to originate an MCVideo emergency group call
shall be considered to be an unauthorised request to originate an MCVideo
emergency group call.
When the MCVideo client receives a request from the MCVideo user to originate
an MCVideo imminent peril group call the MCVideo client shall check the
following:
1 if the \ element of \ element of the
MCVideo user profile document identified by the MCVideo ID of the calling user
(see the MCVideo user profile document in 3GPP TS 24.484 [25]) is set to a
value of \"true\" and:
a) if the \"entry-info\" attribute of the \ element of the
\ element contained within the \
element of the MCVideo user profile document (see the MCVideo user profile
document in 3GPP TS 24.484 [25]) is set to a value of \"DedicatedGroup\" and
if the \ element contains the identity of the MCVideo
group targeted by the calling MCVideo user; or
b) if the \"entry-info\" attribute of the \ element of the
\ element contained within the \
element of the MCVideo user profile document (see the MCVideo user profile
document in 3GPP TS 24.484 [25]) is set to a value of
\"UseCurrentlySelectedGroup\";
then the MCVideo imminent peril group call request shall be considered to be
an authorised request for an MCVideo imminent peril group call;
In all other cases, the request to originate an MCVideo imminent peril group
call shall be considered to be an unauthorised request to originate an MCVideo
imminent peril group call.
##### 6.2.8.1.9 SIP request for originating MCVideo imminent peril group calls
This clause is referenced from other procedures.
When the MCVideo client receives a request from the MCVideo user to originate
an MCVideo imminent peril group call, and this is an authorised request for an
MCVideo imminent peril group call as determined by the procedures of clause
6.2.8.1.8, the MCVideo client:
1) if the MCVideo client imminent peril group state is set to \"MVIGC 1:
imminent-peril-capable\" and the in-progress emergency state of the group is
set to a value of \"false\":
a) shall include in the SIP request a MIME mcvideoinfo body as defined in
Annex F.1 with the \ element set to \"true\" and set the
MCVideo emergency group call state to \"MVIGC 2: imminent-peril-call-
requested\" state; and
b) if the MCVideo client imminent peril group state of the group is set to a
value other than \"MVIG 2: in-progress\" shall set the MCVideo client
emergency group state of the MCVideo group to \"MVIG 3: confirm-pending\".
NOTE: An MCVideo group call originated by an affiliated member of an MCVideo
group which is in an in-progress imminent peril state (as tracked on the
MCVideo client by the MCVideo client imminent peril group state) will also
have the priority associated with MCVideo imminent peril group calls. The
\ element of the MIME mcvideoinfo body does not need to be
included in this case, nor do any state changes result and hence no action
needs to be taken in this clause.
##### 6.2.8.1.10 Determining authorisation for cancelling an imminent peril
group call
When the MCVideo client receives a request from the MCVideo user to cancel an
MCVideo imminent peril group call the MCVideo client shall:
1) if the \ element of the \ element of
the MCVideo user profile document identified by the MCVideo ID of the calling
user (see the MCVideo user profile document in 3GPP TS 24.484 [25]) is set to
a value of \"true\" the MCVideo imminent peril call cancellation request shall
be considered to be an authorised request to cancel the MCVideo imminent peril
group call; or
2) if the \ element of the \ element of
the MCVideo user profile document identified by the MCVideo ID of the calling
user (see the MCVideo user profile document in 3GPP TS 24.484 [25]) is set to
a value of \"false\" the MCVideo imminent peril call cancellation request
shall be considered to be an unauthorised request to cancel the MCVideo
imminent peril group call.
##### 6.2.8.1.11 SIP re-INVITE request for cancelling MCVideo in-progress
imminent peril group state
This clause is referenced from other procedures.
If the MCVideo imminent peril group call state is set to \"MVIGC 3: imminent-
peril-call-granted\" or the MCVideo imminent peril group state of the MCVideo
group is set to \"MVIG 2: in-progress\", the MCVideo client shall generate a
SIP re-INVITE request according to 3GPP TS 24.229 [11] with the clarifications
given below.
NOTE 1: This procedure assumes that the calling procedure has verified that
the MCVideo user has made an authorised request for cancelling the in-progress
imminent peril group state of the group.
The MCVideo client:
1) shall include in the SIP re-INVITE request an application/vnd.3gpp.mcvideo-
info+xml MIME body as defined in clause F.1 with the \
element set to \"false\"; and
2) shall set MCVideo imminent peril group state of the MCVideo group to \"MVIG
3: cancel-pending\".
NOTE 2: This is the case of an MCVideo user who has initiated an MCVideo
imminent peril group call and wants to cancel it, or another authorised member
of the group who wishes to cancel the in-progress imminent peril state of the
group.
##### 6.2.8.1.12 Resource-Priority header field for MCVideo imminent peril
group calls
This clause is referenced from other procedures.
When the MCVideo imminent peril group call state is set \"MVIGC 2: imminent-
peril-call-requested\" or \"MVIGC 3: imminent-peril-call-granted\" and this
MCVideo user and group is authorised to originate MCVideo imminent peril group
calls as determined by the procedures of clause 6.2.8.1.8, or the MCVideo
client imminent peril state of the group is set to \"MVIG 2: in-progress\",
the MCVideo client:
1) shall include in the SIP INVITE request a Resource-Priority header field
populated with the values for an MCVideo imminent peril group call as
specified in clause 6.2.8.1.15.
NOTE: The MCVideo client ideally would not need to maintain knowledge of the
in-progress imminent peril state of the group (as tracked on the MCVideo
client by the MCVideo client imminent peril group state) but can use this
knowledge to provide a Resource-Priority header field set to imminent peril
level priority, which starts the infrastructure priority adjustment process
sooner than otherwise would be the case.
When the MCVideo imminent peril group call state is set to \"MVIGC 1:
imminent-peril-gc-capable\" and the MCVideo user is authorised to cancel
MCVideo imminent peril group calls as determined by the procedures of clause
6.2.8.1.10, or the MCVideo client imminent peril group state of the group is
\"MVIG 1: no-imminent-peril\" or \"MVIG 3: cancel-pending\", the MCVideo
client:
1) shall include in the SIP INVITE request a Resource-Priority header field
populated with the values for a normal MCVideo group call as specified in
clause 6.2.8.1.15.
##### 6.2.8.1.13 Receiving a SIP INFO request in the dialog of a SIP request
for a priority group call
This clause is referenced from other procedures.
Upon receiving a SIP INFO request within the dialog of the SIP request for a
priority group call:
\- with the Info-Package header field containing the g.3gpp.mcvideo-info
package name;
\- with the application/vnd.3gpp.mcvideo-info+xml MIME body associated with
the info package according to IETF RFC 6086 [54]; and
\- with one or more of the \, \ and \ elements set in the application/vnd.3gpp.mcvideo-info+xml MIME body;
the MCVideo client:
1) shall send a SIP 200 (OK) response to the SIP INFO request as specified in
3GPP TS 24.229 [4];
2) if the MCVideo emergency group call state is set to \"MVEGC 3: emergency-
call-granted\":
a) if the MCVideo emergency alert state is set to \"MVEA 2: emergency-alert-
confirm-pending\":
i) if the \ element is set to a value of \"false\", shall set the
MCVideo emergency alert state to \"MVEA 1: no-alert\"; and
ii) if the \ element is set to a value of \"true\", shall set the
MCVideo emergency alert state to \"MVEA 3: emergency-alert-initiated\";
3) if the MCVideo imminent peril group call state is set to \"MVIGC 2:
imminent-peril-call-requested\" or \"MVIGC 3: imminent-peril-call-granted\":
a) if the \ element is set to a value of \"false\" and an
\ element is set to a value of \"true\", shall:
i) set the MCVideo imminent peril group state to \"MVIG 1: no-imminent-
peril\";
ii) set the MCVideo imminent peril group call state to \"MVIGC 1: imminent-
peril-capable\"; and
iii) set the MCVideo client emergency group state of the group to \"MVEG 2:
in-progress\"; and
NOTE 1: This is the case of an MCVideo client attempting to make an imminent
peril group call when the group is in an in-progress emergency group state.
The MCVideo client will then receive a notification that the imminent peril
call request was denied, however they will be participating at the emergency
level priority of the group. This could occur for example when an MCVideo
client requests an imminent peril call to a group that they are not currently
affiliated with.
NOTE 2: the MCVideo client emergency group state above is the MCVideo
client\'s view of the in-progress emergency state of the group.
4) if the SIP request for a priority group call sent by the MCVideo client did
not contain an \ element and if the MCVideo emergency alert
state is set to \"MVEA 4: Emergency-alert-cancel-pending\":
a) if the \ element contained in the SIP INFO request is set to a
value of \"true\", shall set the MCVideo emergency alert state to \"MVEA 3:
emergency-alert-initiated\"; and
b) if the \ element contained in the SIP INFO request is set to a
value of \"false\", shall set the MCVideo emergency alert state to \"MVEA 1:
no-alert\".
##### 6.2.8.1.14 SIP re-INVITE request for cancelling the in-progress
emergency group state of a group by a third-party
This clause is referenced from other procedures.
Upon receiving an authorised request to cancel an in-progress emergency group
state of a group as determined by the procedures of clause 6.2.8.1.7 from an
MCVideo user, the MCVideo client shall generate a SIP re-INVITE request
according to 3GPP TS 24.229 [11] with the clarifications given below.
The MCVideo client:
1) shall include in the SIP re-INVITE request an application/vnd.3gpp.mcvideo-
info+xml MIME body as defined in clause F.1 with the \ element
set to \"false\";
2) shall set MCVideo emergency group state of the MCVideo group to \"MVEG 3:
cancel-pending\"; and
3) if the MCVideo user has indicated that an MCVideo emergency alert on the
MCVideo group originated by another MCVideo user should be cancelled and this
is an authorised request for an MCVideo emergency alert cancellation as
determined by the procedures of clause 6.2.8.1.6:
a) shall include in the application/vnd.3gpp.mcvideo-info+xml MIME body an
\ element set a value of \"false\"; and
b) shall include in the application/vnd.3gpp.mcvideo-info+xml MIME body an
\ element set to the MCVideo ID of the MCVideo user who
originated the MCVideo emergency alert.
NOTE: When an MCVideo emergency alert is cancelled by a MCVideo user other
than its originator, the \ element is needed to identify which
MCVideo emergency alert is being cancelled, as more than one MCVideo user
could have originated emergency alerts to the same group.
##### 6.2.8.1.15 Retrieving Resource-Priority header field values
This clause is referenced from other procedures.
When determining the Resource-Priority header field namespace and priority
values as specified in IETF RFC 8101 [38] for an MCVideo emergency group call
or MCVideo emergency private call the MCVideo client:
1) shall retrieve the value of the \ element
contained in the \ element contained in the
\ element of the MCVideo service configuration document ; and
2) shall retrieve the value of the \ element
contained in the \ element contained in the
\ element of the MCVideo service configuration document .
When determining the Resource-Priority header field namespace and priority
values as specified in IETF RFC 8101 [38] for an MCVideo imminent peril group
call the MCVideo client:
1) shall retrieve the value of the \ element
contained in the \ element contained in the
\ element of the MCVideo service configuration document; and
2) shall retrieve the value of the \ element
contained in the \ element contained in the
\ element of the MCVideo service configuration document.
When determining the Resource-Priority header field namespace and priority
values as specified in IETF RFC 8101 [38] for a normal MCVideo group or
private call the MCVideo client:
1) shall retrieve the value of the \ element
contained in the \ element contained in the
\ element of the MCVideo service configuration document ; and
2) shall retrieve the value of the \ element
contained in the \ element contained in the
\ element of the MCVideo service configuration document .
NOTE: The \"normal\" Resource-Priority header field value is needed to return
to a normal priority value from a priority value adjusted for an MCVideo
emergency group or private call or an MCVideo imminent peril group call. The
\"normal\" priority received from the EPS by use of the \"normal\" Resource-
Priority header field value is expected to be the same as the \"normal\"
priority received from the EPS when initiating a call with no Resource-
Priority header field included.
##### 6.2.8.1.16 Resource-priority header field namespaces for MCVideo
The Resource-Priority header field is specified as per IETF RFC 4412 [33]. The
Resource-Priority namespace for MCVideo emergency group call, MCVideo
emergency private call, MCVideo imminent peril group call, normal MCVideo
group or private call, shall reuse the namespace for Mission Critical Push-to-
Talk, which is specified in IETF RFC 8101 [38].
##### 6.2.8.1.17 Priority group call conditions upon receiving call release
This clause is referenced from other procedures.
Upon receiving a request to release the MCVideo emergency group call or an
MCVideo imminent peril group call in an MCVideo group session is in-progress
or is in the process of being established:
1) if the MCVideo emergency group call state is set to \"MVEGC 2: emergency-
call-requested\":
a) shall set the MCVideo emergency group call state to \"MVEGC 1: emergency-
gc-capable\";
b) if the MCVideo client emergency group state of the group is \"MVEG 3:
confirm-pending\" shall set the MCVideo client emergency group state of the
group to \"MVEG 1: no-emergency\"; and
c) if the MCVideo emergency alert state is set to \"MVEA 2: emergency-alert-
confirm-pending\" shall set the MCVideo emergency alert state to \"MVEA 1:
\"no-alert\"; and
2) if the MCVideo imminent peril group call state is set to \"MVIGC 2:
imminent-peril-call-requested\":
a) if the MCVideo imminent peril group call state of the group is \"MVIG 3:
confirm-pending\", shall set the MCVideo imminent peril group state to \"MVIG
1: no-imminent-peril\"; and
b) shall set the MCVideo imminent peril group call state to \"MVIGC 1:
imminent-peril-capable\".
##### 6.2.8.1.18 Emergency private call conditions upon receiving call release
This clause is referenced from other procedures.
Upon receiving a request to release the MCVideo session when an MCVideo
emergency private call is in-progress or is in the process of being
established:
1) if the MCVideo emergency private call state is set to \"MVEPC 2: emergency-
call-requested\":
a) shall set the MCVideo emergency private call state to \"MVEPC 1: emergency-
pc-capable\";
b) if the MCVideo emergency private priority state of the private call is
\"MVEPP 3: confirm-pending\" shall set the MCVideo emergency private priority
state of the private call to \"MVEPP 1: no-emergency\"; and
c) if the MCVideo private emergency alert state is set to \"MVPEA 2:
emergency-alert-confirm-pending shall set the MCVideo private emergency alert
state to \"MVPEA 1: no-alert\".
#### 6.2.8.2 Request for an originating broadcast group call
NOTE: This clause is referenced from other procedures.
When the MCVideo user initiates a broadcast group call, the MCVideo client:
1) in the case of the prearranged group call is initiated on-demand, shall
include in the application/vnd.3gpp.mcvideo-info+xml MIME body the
\ element set to \"true\" as defined in clause F.1; and
2) in the case the prearranged group call is initiated using a pre-established
session, shall include in the application/vnd.3gpp.mcvideo-info+xml MIME body
in the \"body\" URI header field in the Refer-To header field the \ element set to \"true\" as defined in clause F.1.
#### 6.2.8.3 MCVideo emergency private call conditions
##### 6.2.8.3.1 Authorisations
###### 6.2.8.3.1.1 Determining authorisation for initiating an MCVideo
emergency private call
If the MCVideo client receives a request from the MCVideo user to originate an
MCVideo emergency private call and:
1) if the \ element of the \ element of
the MCVideo user profile document identified by the MCVideo ID of the calling
user (see the MCVideo user profile document in 3GPP TS 24.484 [50]) is set to
a value of \"true\"; and
a) if the \"entry-info\" attribute of the \ element of the
\ element of the \ element contained
within the \ element of the MCVideo user profile document (see
the MCVideo user profile document in 3GPP TS 24.484 [50]) is set to a value of
\"UsePreConfigured\" and if the \ element of the \ element
of the \ element contains the MCVideo ID of the
MCVideo user targeted by the calling MCVideo user; or
b) if the \"entry-info\" attribute of the \ element of the
\ element of the \ element contained
within the \ element of the MCVideo user profile document (see
the MCVideo user profile document in 3GPP TS 24.484 [50]) is set to a value of
\"LocallyDetermined\";
then the MCVideo client shall consider the MCVideo emergency private call
request to be an authorised request for an MCVideo emergency private call. In
all other cases the MCVideo client shall consider the MCVideo emergency
private call request to be an unauthorised request for an MCVideo emergency
private call.
###### 6.2.8.3.1.2 Determining authorisation for cancelling an MCVideo
emergency private call
If the MCVideo client receives a request from the MCVideo user to cancel an
MCVideo emergency private call and if the \ element of the \ element of the MCVideo user profile document
identified by the MCVideo ID of the calling user (see the MCVideo user profile
document in 3GPP TS 24.484 [50]) is set to a value of \"true\", then the
MCVideo emergency private call cancellation request shall be considered to be
an authorised request for an MCVideo emergency private call cancellation.
In all other cases, the MCVideo emergency private call cancellation request
shall be considered to be an unauthorised request for an MCVideo emergency
private call cancellation.
###### 6.2.8.3.1.3 Determining authorisation for initiating or cancelling an
MCVideo emergency alert to a MCVideo user
If the MCVideo client receives a request from the MCVideo user to send an
MCVideo emergency alert to an MCVideo user and:
1) if the \ element of the \ element
of the MCVideo user profile document identified by the MCVideo ID of the
calling MCVideo user as specified in 3GPP TS 24.484 [50] is set to a value of
\"true\"; and
2) if the \"entry-info\" attribute of the \ element of the
\ element contained within the \ element of
the MCVideo user profile document (see the MCVideo user profile document in
3GPP TS 24.484 [50]) is set to a value of:
a) \"UsePreConfigured\", and if the \ element of the \
element of the \ element of the \ element of
the MCVideo user profile document (see the MCVideo user profile document in
3GPP TS 24.484 [50]) contains the MCVideo ID of the targeted MCVideo user; or
b) \"LocallyDetermined\";
then the MCVideo emergency alert request shall be considered to be an
authorised request for an MCVideo emergency alert. In all other cases, it
shall be considered to be an unauthorised request for an MCVideo emergency
alert.
If the MCVideo client receives a request from the MCVideo user to cancel an
MCVideo emergency alert to an MCVideo user, and if the \ element of the \ element of the MCVideo user profile
document identified by the MCVideo ID of the calling MCVideo user as specified
in 3GPP TS 24.484 [50] is set to a value of \"true\", then the MCVideo
emergency alert cancellation request shall be considered to be an authorised
request to cancel an MCVideo emergency alert. In all other cases, it shall be
considered to be an unauthorised request to cancel an MCVideo emergency alert.
##### 6.2.8.3.2 SIP request for originating MCVideo emergency private calls
This clause is referenced from other procedures.
When the MCVideo emergency private call state is set to \"MVEPC 1: emergency-
pc-capable\" and this is an authorised request for an MCVideo emergency
private call as determined by the procedures of clause 6.2.8.3.1.1, the
MCVideo client:
1) shall set the MCVideo emergency state if not already set;
2) shall include in the application/vnd.3gpp.mcvideo-info+xml MIME body in the
SIP request an \ element set to \"true\" and set the MCVideo
emergency private call state to \"MVEPC 2: emergency-pc-requested\";
3) if the MCVideo user has also requested an MCVideo emergency alert to be
sent and this is an authorised request for MCVideo emergency alert as
determined by the procedures of clause 6.2.8.3.1.3, shall:
a) include in the application/vnd.3gpp.mcvideo-info+xml MIME body the \ element set to \"true\" and set the MCVideo private emergency alert state
to \"MVPEA 2: emergency-alert-confirm-pending\"; and
b) perform the procedures specified in clause 6.2.9.1 for the MCVideo
emergency alert trigger;
4) if the MCVideo user has not requested an MCVideo emergency alert to be
sent, shall set the \ element of the application/vnd.3gpp.mcvideo-
info+xml MIME body to \"false\"; and
5) if the MCVideo emergency private priority state of this private call is set
to a value other than \"MVEPP 2: in-progress\" shall set the MCVideo emergency
private priority state to \"MVEPP 3: confirm-pending\".
##### 6.2.8.3.3 Resource-Priority header field for MCVideo emergency private
calls
This clause is referenced from other procedures.
If the MCVideo emergency private call state is set to either \"MVEPC 2:
emergency-pc-requested\" or \"MVEPC 3: emergency-pc-granted\" and this is an
authorised request for an MCVideo emergency private call as determined by the
procedures of clause 6.2.8.3.1.1, or the MCVideo emergency private priority
state of the call is set to \"MVEPP 2: in-progress\", the MCVideo client shall
include in the SIP request a Resource-Priority header field populated with the
values for an MCVideo emergency private call as specified in clause
6.2.8.1.15.
NOTE: The MCVideo client ideally would not need to maintain knowledge of the
in-progress emergency state of the call (as tracked on the MCVideo client by
the MCVideo client emergency private state) but can use this knowledge to
provide a Resource-Priority header field set to emergency level priority,
which starts the infrastructure priority adjustment process sooner than
otherwise would be the case.
If this is an authorised request to cancel the MCVideo emergency private call
as determined by the procedures of clause 6.2.8.3.1.2, or the MCVideo
emergency private priority state of the private call is \"MVEPP 1: no-
emergency\" or \"MVEPP 3: cancel-pending\", the MCVideo client shall include
in the SIP request a Resource-Priority header field populated with the values
for a normal MCVideo private call as specified in clause 6.2.8.1.15.
##### 6.2.8.3.4 Receiving a SIP 2xx response to a SIP request for an MCVideo
emergency private call
This clause is referenced from other procedures.
On receiving a SIP 2xx response to a SIP request for an MCVideo emergency
private call and if the MCVideo emergency private call state is set to \"MVEPC
2: emergency-pc-requested\" or \"MVEPC 3: emergency-pc-granted\", the MCVideo
client:
1) shall set the MCVideo emergency private priority state of the call to
\"MVEPP 2: in-progress\" if it was not already set;
2) shall set the MCVideo emergency private call state to \"MVEPC 3: emergency-
pc-granted\"; and
3) if the MCVideo private emergency alert state is set to \"MVPEA 2:
emergency-alert-confirm-pending\" and the SIP 2xx response to the SIP request
for a priority private call does not contain a Warning header field as
specified in clause 4.4 with the warning text containing the mcvideo-warn-code
set to \"149\", shall set the MCVideo private emergency alert state to \"MVPEA
3: emergency-alert-initiated\".
##### 6.2.8.3.5 Receiving a SIP 4xx response, SIP 5xx response or SIP 6xx
response to a SIP request for an MCVideo emergency private call
Upon receiving a SIP 4xx response, SIP 5xx response or a SIP 6xx response to a
SIP request for an MCVideo emergency private call and if the MCVideo emergency
private call state is set to \"MVEPC 2: emergency-pc-requested\" or \"MVEPC 3:
emergency-pc-granted\", the MCVideo client:
1) shall set the MCVideo emergency private call state to \"MVEPC 1: emergency-
pc-capable\";
2) if the MCVideo emergency private priority state of the private call is
\"MVEPP 3: confirm-pending\" shall set the MCVideo emergency private priority
state of the private call to \"MVEPP 1: no-emergency\"; and
3) if the sent SIP request for an MCVideo emergency private call contained an
application/vnd.3gpp.mcvideo-info+xml MIME body with an \ element
set to a value of \"true\", shall set the MCVideo private emergency alert
state to \"MVPEA 1: no-alert\".
##### 6.2.8.3.6 SIP re-INVITE request for cancelling MCVideo emergency private
call state
This clause is referenced from other procedures.
When the MCVideo emergency private call state is set to \"MVEPC 3: emergency-
pc-granted\" and the MCVideo emergency alert state is set to \"MVPEA 1: no-
alert\", the MCVideo client shall generate a SIP re-INVITE request according
to 3GPP TS 24.229 [4] with the clarifications given below.
NOTE 1: This procedure assumes that the MCVideo client in the calling
procedure has verified that the MCVideo user has made an authorised request
for cancelling MCVideo the in-progress emergency private call state of the
call.
The MCVideo client:
1) shall include in the SIP re-INVITE request an application/vnd.3gpp.mcvideo-
info+xml MIME body as defined in clause F.1 with the \ element
set to \"false\";
2) shall clear the MCVideo emergency state; and
3) shall set MCVideo emergency private priority state of the MCVideo emergency
private call to \"MVEPP 3: cancel-pending\".
NOTE 2: This is the case of an MCVideo user who has initiated an MCVideo
emergency private call and wants to cancel it.
When the MCVideo emergency private call state is set to \"MVEPPC 3: emergency-
pc-granted\" and the MCVideo emergency alert state is set to a value other
than \"MVPEA 1: no-alert\" and the MCVideo user has indicated only the MCVideo
emergency private call should be cancelled, the MCVideo client:
1) shall include in the SIP re-INVITE request an application/vnd.3gpp.mcvideo-
info+xml MIME body as defined in clause F.1 with the \ element
set to \"false\"; and
2) shall set the MCVideo emergency private priority state of the MCVideo
emergency private call to \"MVEPP 3: cancel-pending\";
NOTE 3: This is the case of an MCVideo user has initiated both an MCVideo
emergency private call and an MCVideo emergency alert and wishes to only
cancel the MCVideo emergency private call. This leaves the MCVideo emergency
state set.
When the MCVideo emergency private call state is set to \"MVEPC 3: emergency-
pc-granted\" and the MCVideo emergency alert state is set to a value other
than \"MVPEA 1: no-alert\" and the MCVideo user has indicated that the MCVideo
emergency alert on the MCVideo private call should be cancelled in addition to
the MCVideo emergency private call, the MCVideo client:
1) shall include in the SIP re-INVITE request an application/vnd.3gpp.mcvideo-
info+xml MIME body as defined in annex F.1 with the \ element
set to \"false\";
2) shall, if this is an authorised request to cancel an MCVideo emergency
alert as determined by the procedures of clause 6.2.8.3.1.3:
a) include in the application/vnd.3gpp.mcvideo-info+xml MIME body an \ element set to \"false\"; and
b) set the MCVideo private emergency alert state to \"MVPEA 4: emergency-
alert-cancel-pending\";
3) if this is not an authorised request to cancel an MCVideo emergency alert
as determined by the procedures of clause 6.2.8.3.1.3, should indicate to the
MCVideo user they are not authorised to cancel the MCVideo emergency alert;
4) shall set the MCVideo emergency private priority state of the MCVideo to
\"MVEPP 3: cancel-pending\"; and
5) shall clear the MCVideo emergency state.
NOTE 4: This is the case of an MCVideo user that has initiated both an MCVideo
emergency private call and an MCVideo emergency alert and wishes to cancel
both.
##### 6.2.8.3.7 Receiving a SIP INFO request in the dialog of a SIP request
for a priority private call
This clause is referenced from other procedures.
Upon receiving a SIP INFO request within the dialog of the SIP request for a
priority private call:
\- with the Info-Package header field containing the g.3gpp.mcvideo-info
package name;
\- with the application/vnd.3gpp.mcvideo-info+xml MIME body associated with
the info package according to IETF RFC 6086 [54]; and
\- with one or more of the \, \ and \ elements set in the application/vnd.3gpp.mcvideo-info+xml MIME body;
the MCVideo client:
1) if the MCVideo private emergency alert state is set to \"MVPEA 2:
emergency-alert-confirm-pending\":
a) if the \ element is set to a value of \"false\", shall set the
MCVideo private emergency alert state to \"MVPEA 1: no-alert\"; and
b) if the \ element set to a value of \"true\", shall set the
MCVideo private emergency alert state to \"MVPEA 3: emergency-alert-
initiated\"; and
2) if the MCVideo private emergency alert state is set to \"MVPEA 4:
Emergency-alert-cancel-pending\":
a) if the \ element is set to a value of \"true\", shall set the
MCVideo private emergency alert state to \"MVPEA 3: emergency-alert-
initiated\"; and
b) if the \ element is set to a value of \"false\", shall set the
MCVideo private emergency alert state to \"MVPEA 1: no-alert\".
##### 6.2.8.3.8 SIP re-INVITE request for cancelling the MCVideo emergency
private call state by a third-party
This clause is referenced from other procedures.
Upon receiving a request to cancel the MCVideo emergency private call state
from an MCVideo user other than the originator of the MCVideo emergency
private call, the MCVideo client shall generate a SIP re-INVITE request
according to 3GPP TS 24.229 [4] with the clarifications given below.
The MCVideo client:
NOTE 1: This procedure assumes that the calling procedure has verified that
the MCVideo user has made an authorised request for cancelling the MCVideo
emergency private call state of the call.
1) shall include in the SIP re-INVITE request an application/vnd.3gpp.mcvideo-
info+xml MIME body as defined in clause F.1 with the \ element
set to \"false\";
2) shall set the MCVideo emergency private priority state of the MCVideo
emergency private call to \"MVEPP 3: cancel-pending\"; and
3) if the MCVideo user has indicated that an MCVideo emergency alert
associated with the MCVideo emergency private call originated by another
MCVideo user should be cancelled and this is an authorised request for an
MCVideo emergency alert cancellation as determined by the procedures of clause
6.2.8.3.1.3:
a) shall include in the application/vnd.3gpp.mcvideo-info+xml MIME body an
\ element set to a value of \"false\"; and
b) shall include in the application/vnd.3gpp.mcvideo-info+xml MIME body an
\ element set to the MCVideo ID of the MCVideo user who
originated the MCVideo emergency alert.
NOTE 2: When an MCVideo emergency alert is cancelled by a MCVideo user other
than its originator, the \ element is needed to identify which
MCVideo emergency alert is being cancelled, as conceivably each participant in
the MCVideo emergency private call could have originated an MCVideo emergency
alert.
##### 6.2.8.3.9 Retrieving a KMS URI associated with an MCVideo ID
If the MCVideo client needs to retrieve a KMS URI associated to an identified
MCVideo ID for on network operation, the MCVideo client:
1) shall search for the \ element of the \ element of
the \ element of the \ element entry of
the \ element of the MCVideo user profile document (see the MCVideo
user profile document in 3GPP TS 24.484 [50]) containing the identified
MCVideo ID;
a) if the identified MCVideo ID is found and if the \ element of the
\ element of the \ element of the
\ element entry identified is not empty, shall retrieve the
KMS URI contained therein; or
b) if the identified MCVideo ID is not found or the \ element of the
\ element is empty, shall retrieve the \ element of
the \ element of the \ element of the MCVideo UE
initial configuration document (see the MCVideo UE initial configuration
document in 3GPP TS 24.484 [50]) and consider that to be the KMS URI
associated with the MCVideo ID.
If the MCVideo client needs to retrieve a KMS URI associated to an identified
MCVideo ID for off network operation, the MCVideo client:
1) shall search for /_\
_/\/Common/PrivateCall/UserList/\/Entry/MCVideoID leaf node
containing the identified MCVideo ID (see the MCVideo user profile MO in 3GPP
TS 24.483 [45]);
a) if the identified MCVideo ID is found:
i) shall retrieve the /_\
_/\/Common/PrivateCall/UserList/\/Entry/PrivateCallKMSURI leaf node
(see the MCVideo user profile MO in 3GPP TS 24.483 [45]); and
ii) if the PrivateCallKMSURI leaf node in the same
/\/\/Common/PrivateCall/UserList/\/Entry/ interior node as the
MCVideoID leaf node containing the identified MCVideo ID is not empty, shall
consider its value to be the KMS URI associated with the MCVideo ID; and
b) if the identified MCVideo ID is not found or if the /_\
_/\/Common/PrivateCall/UserList/\/Entry/PrivateCallKMSURI leaf node
is empty:
i) shall retrieve /_\ _/OnNetwork/AppServerInfo/KMS leaf node (see the
MCVideo UE initial configuration document in 3GPP TS 24.483 [45]); and
ii) shall consider the value of the /_\ _/OnNetwork/AppServerInfo/KMS leaf
node to be the KMS URI associated with the MCVideo ID.
### 6.2.9 Location information
#### 6.2.9.1 Location information for location reporting
This procedure is initiated by the MCVideo client when it is including
location report information as part of a SIP request for a specified location
trigger.
The MCVideo client:
1) shall include an application/vnd.3gpp.location-info+xml MIME body as
specified in Annex F.3 with a \ element included in the \ root element; and
2) shall include in the \ element the specific location information
configured for the specified location trigger.
## 6.3 MCVideo server procedures
### 6.3.1 Distinction of requests sent to the MCVideo server
#### 6.3.1.1 SIP INVITE request
The MCVideo server needs to distinguish between the following initial SIP
INVITE requests for originations and terminations:
\- SIP INVITE requests routed to the participating MCVideo function as a
result of processing initial filter criteria at the S-CSCF in accordance with
the origination procedures as specified in 3GPP TS 24.229 [11] and the
Request-URI is set to a public service identity of the participating MCVideo
function that does not identify the pre-established session set-up. Such
requests are known as \"SIP INVITE request for originating participating
MCVideo function\" in the procedures in the present document;
\- SIP INVITE requests routed to the participating MCVideo function as a
result of processing initial filter criteria at the S-CSCF in accordance with
the termination procedures as specified in 3GPP TS 24.229 [11] and the
Request-URI contains a PSI of the terminating participating MCVideo function.
Such requests are known as \"SIP INVITE request for terminating participating
MCVideo function\" in the procedures in the present document;
\- SIP INVITE requests routed to the controlling MCVideo function as a result
of PSI routing on the originating side in accordance with the originating
procedures as specified in 3GPP TS 24.229 [11], or as a result of direct PSI
routing, in accordance with the termination procedures as specified in 3GPP TS
24.229 [11], the Request-URI is set to a public service identity for MCVideo
private call and the Contact header field does not contain the isfocus media
feature tag specified in IETF RFC 3840 [16]. Such requests are known as \"SIP
INVITE request for controlling MCVideo function of a private call\" in the
procedures in the present document; and
\- SIP INVITE requests routed to the controlling MCVideo function as a result
of PSI routing on the originating side in accordance with the originating
procedures as specified in 3GPP TS 24.229 [11], or as a result of direct PSI
routing, in accordance with the termination procedures as specified in 3GPP TS
24.229 [11], the Request-URI is set to a public service identity serving an
MCVideo group and the Contact header field does not contain the isfocus media
feature tag specified in IETF RFC 3840 [16]. Such requests are known as \"SIP
INVITE request for controlling MCVideo function of an MCVideo group\" in the
procedures in the present document.
#### 6.3.1.2 SIP MESSAGE request
The MCVideo server needs to distinguish between the following SIP MESSAGE
request for originations and terminations:
\- SIP MESSAGE requests routed to the participating MCVideo function as a
result of processing initial filter criteria at the S-CSCF in accordance with
the origination procedures as specified in 3GPP TS 24.229 [11] with the
Request-URI set to the MBMS public service identity of the participating
MCVideo function. Such requests are known as \"SIP MESSAGE request for an MBMS
listening status update\" in the procedures in the present document;
\- SIP MESSAGE request routed to the participating MCVideo function as a
result of initial filter criteria containing a Content-Type header field set
to \"application/vnd.3gpp.mcvideo-location-info+xml\" and includes an XML body
containing a Location root element containing a Report element. Such requests
are known as \"SIP MESSAGE request for location reporting\" in the present
document;
\- SIP MESSAGE requests routed to the originating participating MCVideo
function as a result of initial filter criteria with the Request-URI set to
the public service identity of the participating MCVideo function and
containing a Content-Type header field set to \"application/vnd.3gpp.mcvideo-
info+xml\" and includes an XML body containing a \ root element
containing a \ element containing an \ element
or an \ element. Such requests are known as \"SIP MESSAGE requests
for emergency notification for originating participating MCVideo function\" in
the procedures in the present document;
\- SIP MESSAGE requests routed to the terminating participating MCVideo
function as a result of initial filter criteria with the Request-URI set to
the public service identity of the terminating participating MCVideo function
and containing a Content-Type header field set to
\"application/vnd.3gpp.mcvideo-info+xml\" and includes an XML body containing
a \ root element containing a \ element
containing an \ element or an \ element. Such
requests are known as \"SIP MESSAGE requests for emergency notification for
terminating participating MCVideo function\" in the procedures in the present
document;
\- SIP MESSAGE requests routed to the controlling MCVideo function as a result
of initial filter criteria with the Request-URI set to the public service
identity of the controlling MCVideo function and containing a Content-Type
header field set to \"application/vnd.3gpp.mcvideo-info+xml\" and includes an
XML body containing a \ root element containing a \ element containing an \ element or an \
element. Such requests are known as \"SIP MESSAGE requests for emergency
notification for controlling MCVideo function\" in the procedures in the
present document;
\- SIP MESSAGE request routed to the MCVideo client as a result of initial
filter criteria containing a Content-Type header field set to
\"application/vnd.3gpp.mcvideo-location-info+xml\" and includes an XML body
containing a Location root element containing a Configuration element. Such
requests are known as \"SIP MESSAGE request for location report
configuration\" in the present document; and
\- SIP MESSAGE request routed to the MCVideo client as a result of initial
filter criteria containing a Content-Type header field set to
\"application/vnd.3gpp.mcvideo-location-info+xml\" and includes an XML body
containing a Location root element containing a Request element. Such requests
are known as \"SIP MESSAGE request for location report request\" in the
present document.
\- SIP MESSAGE requests routed to the originating participating MCVideo
function as a result of initial filter criteria with the Request-URI set to
the public service identity of the participating MCVideo function and
containing a Content-Type header field set to \"application/vnd.3gpp.mcvideo-
info+xml\" and includes an XML body containing a \ root element
with a \ element containing an \ element with the
\ element set to a value of \"group-selection-change-request\"
or with the \ element set to a value of \"group-selection-
change-response\". Such requests are known as \"SIP MESSAGE request for group-
selection-change for originating participating MCVideo function\";
\- SIP MESSAGE requests routed to the terminating participating MCVideo
function as a result of initial filter criteria with the Request-URI set to
the public service identity of the participating MCVideo function and
containing a Content-Type header field set to \"application/vnd.3gpp.mcvideo-
info+xml\" and includes an XML body containing a \ root element
with a \ element containing an \ element with the
\ element set to a value of \"group-selection-change-request\"
or with the \ element set to a value of \"group-selection-
change -response\". Such requests are known as \"SIP MESSAGE request for
group-selection-change for terminating participating MCVideo function\";
\- SIP MESSAGE requests routed to the controlling MCVideo function as a result
of initial filter criteria with the Request-URI set to the public service
identity of the controlling MCVideo function and containing a Content-Type
header field set to \"application/vnd.3gpp.mcvideo-info+xml\" and includes an
XML body containing a \ root element with a \
element containing an \ element with the \ element set
to a value of \"group-selection-change-request\". Such requests are known as
\"SIP MESSAGE request for group selection change request for controlling
MCVideo function\";
\- SIP MESSAGE requests routed to the controlling MCVideo function as a result
of initial filter criteria with the Request-URI set to the public service
identity of the controlling MCVideo function and containing a Content-Type
header field set to \"application/vnd.3gpp.mcvideo-info+xml\" and includes an
XML body containing a \ root element with a \
element containing an \ element with the \ element set
to a value of \"group-selection-change-response\". Such requests are known as
\"SIP MESSAGE request for group selection change response for controlling
MCVideo function\".
#### 6.3.1.3 SIP SUBSCRIBE request
The MCVideo server needs to distinguish between the following SIP SUBSCRIBE
request for originations and terminations:
\- SIP SUBSCRIBE requests routed to the participating MCVideo function with
the Request-URI set to the MCVideo session identity identifying the
participating MCVideo function and the Event header field set to
\"conference\". Such requests are known as \"SIP SUBSCRIBE request for
conference event status subscription\" in the procedures in the present
document;
\- SIP SUBSCRIBE requests routed to the controlling MCVideo function with the
Request-URI set to the MCVideo session identity identifying the controlling
MCVideo function and containing an Event header field set to \"conference\".
Such requests are known as \"SIP SUBSCRIBE request for event status
subscription in the controlling MCVideo function\" in the procedures in the
present document; and
\- SIP SUBSCRIBE requests routed to the non-controlling MCVideo function with
the Request-URI set to the MCVideo session identity identifying the non-
controlling MCVideo function and containing an Event header field set to
\"conference\". Such requests are known as \"SIP SUBSCRIBE request for event
status subscription in the non-controlling MCVideo function\" in the
procedures in the present document.
### 6.3.2 Participating MCVideo Function
#### 6.3.2.1 Requests initiated by the served MCVideo user
##### 6.3.2.1.1 SDP offer generation
###### 6.3.2.1.1.1 On-demand session
This clause is referenced from other clauses.
The SDP offer is generated based on the received SDP offer. The SDP offer
generated by the participating MCVideo function:
1) shall contain two SDP media-level sections for MCVideo video media as
contained in the received SDP offer; and
2) shall contain an SDP media-level clause for one media-transmission control
entity, if present in the received SDP offer.
When composing the SDP offer according to 3GPP TS 24.229 [11], the
participating MCVideo function:
1) shall replace the IP address and port number for the offered media stream
in the received SDP offer with the IP address and port number of the
participating MCVideo function, if required;
NOTE 1: Requirements can exist for the participating MCVideo function to be
always included in the path of the offered media stream, for example: for the
support of features such as MBMS, lawful interception and recording. Other
examples can exist.
2) shall replace the IP address and port number for the offered media
transmission control entity, if any, in the received SDP offer with the IP
address and port number of the participating MCVideo function; and
NOTE 2: If the participating MCVideo function and the controlling MCVideo
function are in the same MCVideo server, and the participating MCVideo
function does not have a dedicated IP address or a dedicated port number for
media transmission control or media stream, the replacement of the IP address
or the port number is omitted.
3) shall contain an \"a=key-mgmt\" attribute field with a \"mikey\" attribute
value, if present in the received SDP offer.
##### 6.3.2.1.2 SDP answer generation
###### 6.3.2.1.2.1 On-demand session
When composing the SDP answer according to 3GPP TS 24.229 [11], the
participating MCVideo function:
1) shall replace the IP address and port number in the received SDP answer
with the IP address and port number of the participating MCVideo function, for
the accepted media stream in the received SDP offer, if required; and
NOTE 1: Requirements can exist for the participating MCVideo function to be
always included in the path of the offered media stream, for example: for the
support of features such as MBMS, lawful interception and recording. Other
examples can exist.
2) shall replace the IP address and port number in the received SDP answer
with the IP address and port number of the participating MCVideo function, for
the accepted media-transmission control entity, if present in the received SDP
offer.
NOTE 2: If the participating MCVideo function and the controlling MCVideo
function are in the same MCVideo server, and the participating MCVideo
function does not have a dedicated IP address or a dedicated port number for
media transmission control or media stream, the replacement of the IP address
or the port number is omitted.
##### 6.3.2.1.3 Sending an INVITE request on receipt of an INVITE request
This clause is referenced from other procedures.
When generating an initial SIP INVITE request according to 3GPP TS 24.229
[11], on receipt of an incoming SIP INVITE request, the participating MCVideo
function:
1) shall include in the SIP INVITE request all Accept-Contact header fields
and all Reject-Contact header fields, with their feature tags and their
corresponding values along with parameters according to rules and procedures
of IETF RFC 3841 [20] if included in the incoming SIP INVITE request;
2) should include the Session-Expires header field according to IETF RFC 4028
[23]. It is recommended that the \"refresher\" header field parameter is
omitted. If included, the \"refresher\" header field parameter shall be set to
\"uac\";
3) shall include the option tag \"timer\" in the Supported header field;
4) shall copy the contents of the P-Asserted-Identity header field of the
incoming SIP INVITE request to the P-Asserted-Identity header field of the
outgoing SIP INVITE request;
5) shall include the g.3gpp.mcvideo media feature tag into the Contact header
field of the outgoing SIP INVITE request;
6) shall include the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"
(coded as specified in 3GPP TS 24.229 [11]), into the P-Asserted-Service
header field of the outgoing SIP INVITE request;
7) if the incoming SIP INVITE request contained a MIME resource-lists body
with the MCVideo ID of the invited MCVideo user, shall copy the MIME resource-
lists body, according to rules and procedures of IETF RFC 5366 [37];
8) if the incoming SIP INVITE request contained an
application/vnd.3gpp.mcvideo-info+xml MIME body, shall copy the contents of
the application/vnd.3gpp. mcvideo-info+xml MIME body of the incoming SIP
INVITE request to the outgoing SIP INVITE request; and
9) if the incoming SIP INVITE request contained an
application/vnd.3gpp.location-info+xml MIME body, shall copy the contents of
the application/vnd.3gpp.location-info+xml MIME body of the incoming SIP
INVITE request to the outgoing SIP INVITE request.
##### 6.3.2.1.4 Response to an INVITE request
###### 6.3.2.1.4.1 Provisional responses
NOTE: This clause is referenced from other procedures
When sending SIP provisional responses other than the SIP 100 (Trying)
response, the participating MCVideo function shall generate a SIP provisional
response according to 3GPP TS 24.229 [11] and:
1) shall include the following in the Contact header field:
a) the g.3gpp.mcvideo media feature tag;
b) the g.3gpp.icsi-ref media feature tag containing the value of
\"urn:urn-7:3gpp-service.ims.icsi.mcvideo\";
c) the isfocus media feature tag; and
d) an MCVideo session identity mapped to the MCVideo session identity if
provided in the Contact header field of the incoming provisional response;
2) shall include the \"norefersub\" option tag in a Supported header field in
accordance with 3GPP TS 24.229 [11];
3) may include a Resource-Share header field in accordance with clause
5.7.1.20.2 in 3GPP TS 24.229 [11]; and
4) if the incoming SIP provisional response contained an
application/vnd.3gpp.mcvideo-info+xml MIME body, shall copy the
application/vnd.3gpp.mcvideo-info+xml MIME body to the outgoing SIP
provisional response.
###### 6.3.2.1.4.2 Final response
This clause is referenced from other procedures.
When sending SIP 200 (OK) responses, the participating MCVideo function shall
generate a SIP 200 (OK) response according to 3GPP TS 24.229 [11] and:
1) shall include the option tag \"timer\" in a Require header field;
2) shall include the Session-Expires header field according to rules and
procedures of IETF RFC 4028 [23], \"UAS Behavior\". If the \"refresher\"
parameter is not included in the received request, the \"refresher\" parameter
in the Session-Expires header field shall be set to \"uac\";
3) shall include the following in the Contact header field:
a) the g.3gpp.mcvideo media feature tag;
b) the g.3gpp.icsi-ref media feature tag containing the value of
\"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"; and
c) the isfocus media feature tag;
4) shall include the option tag \"tdialog\" in a Supported header field
according to rules and procedures of IETF RFC 4538 [32];
5) shall include the option tag \"norefersub\" in a Supported header field
according to rules and procedures of IETF RFC 4488 [31];
6) may include a Resource-Share header field in accordance with clause
5.7.1.20.2 in 3GPP TS 24.229 [11]; and
7) if the incoming SIP 200 (OK) response contained an
application/vnd.3gpp.mcvideo-info+xml MIME body, shall copy the
application/vnd.3gpp.mcvideo-info+xml MIME body to the outgoing SIP 200 (OK)
response.
##### 6.3.2.1.5 Sending a SIP BYE request on receipt of a SIP BYE request
Upon receiving a SIP BYE request from the MCVideo client, the participating
MCVideo function:
1) shall interact with the media plane as specified in 3GPP TS 24.581 [5];
2) shall generate a SIP BYE request as specified in 3GPP TS 24.229 [11];
3) shall set the Request-URI to the MCVideo session identity as included in
the received SIP BYE request;
4) shall copy the contents of the P-Asserted-Identity header field of the
incoming SIP BYE request to the P-Asserted-Identity header field of the
outgoing SIP BYE request;
5) if the received SIP BYE request contains an application/vnd.3gpp.mcvideo-
info+xml MIME body, shall copy the application/vnd.3gpp.mcvideo-info+xml MIME
body into the outgoing SIP BYE request; and
6) shall send the SIP BYE request toward the controlling MCVideo function,
according to 3GPP TS 24.229 [11].
Upon receiving a SIP 200 (OK) response to the SIP BYE request the terminating
MCVideo function shall forward a SIP 200 (OK) response to the MCVideo client
and shall interact with the media plane as specified in 3GPP TS 24.581 [5] for
releasing media plane resources associated with the SIP session with the
controlling MCVideo function.
##### 6.3.2.1.6 Priority call conditions
###### 6.3.2.1.6.0 General
This clause contains common procedures to be used for MCVideo emergency group
calls and MCVideo imminent peril group calls.
###### 6.3.2.1.6.1 Determining authorisation for originating a priority group
call
When the participating MCVideo function receives a request from the MCVideo
client to originate an MCVideo emergency group call and needs to determine if
the request is an authorised request for an MCVideo emergency call, the
participating MCVideo function shall check the following:
1) if the \ element of the \ element of
the MCVideo user profile document identified by the MCVideo ID of the calling
user (see the MCVideo user profile document in 3GPP TS 24.484 [25]) is set to
a value of \"true\" and:
a) if the \"entry-info\" attribute of the \ element of the
\ element of the \ element contained
within the \ element of the MCVideo user profile document
(see the MCVideo user profile document in 3GPP TS 24.484 [25]) is set to a
value of \"DedicatedGroup\" and if the \ element of the \
element of the \ element contains the identity of the
MCVideo group targeted by the calling MCVideo user; or
b) if the \"entry-info\" attribute of the \ element of the
\ element of the \ contained within the
\ element of the MCVideo user profile document (see the
MCVideo user profile document in 3GPP TS 24.484 [25]) is set to a value of
\"UseCurrentlySelectedGroup\";
then the participating MCVideo function shall consider the MCVideo emergency
group call request to be an authorised request for an MCVideo emergency group
call;
In all other cases, the participating MCVideo function shall consider the
request to originate an MCVideo emergency group call to be an unauthorised
request to originate an MCVideo emergency group call.
When the participating MCVideo function receives a request from the MCVideo
client to originate an MCVideo imminent peril group call and needs to
determine if the request is an authorised request for an MCVideo imminent
peril group call the participating MCVideo function shall check the following:
1) if the \ element of \ element of the
MCVideo user profile document identified by the MCVideo ID of the calling user
(see the MCVideo user profile document in 3GPP TS 24.484 [25]) is set to a
value of \"true\"; and
a) if the \"entry-info\" attribute of the \ element
contained within the \ element of the MCVideo user profile
document (see the MCVideo user profile document in 3GPP TS 24.484 [25]) is set
to a value of \"DedicatedGroup\" and if the \ element of the
\ element of the \ element contains the
identity of the MCVideo group targeted by the calling MCVideo user; or
b) if the \"entry-info\" attribute of the \ element of the
\ element contained within the \
element of the MCVideo user profile document (see the MCVideo user profile
document in 3GPP TS 24.484 [25]) is set to a value of
\"UseCurrentlySelectedGroup\";
then the participating MCVideo function shall consider the MCVideo imminent
peril group call request to be an authorised request for an MCVideo emergency
group call;
In all other cases, the participating MCVideo function shall consider the
request to originate an MCVideo imminent peril group call to be an
unauthorised request to originate an MCVideo imminent peril call.
###### 6.3.2.1.6.2 Determining authorisation for initiating or cancelling an
MCVideo emergency alert
If the participating MCVideo function receives a SIP request from the MCVideo
client including a request for an MCVideo emergency alert and:
1) if the \ element of the \ element
of the MCVideo user profile document identified by the MCVideo ID of the
calling MCVideo user (see the MCVideo user profile document in 3GPP TS 24.484
[25]) is set to a value of \"true\"; and
2) if the \"entry-info\" attribute of the \ element of the
\ element contained within the \ element
of the MCVideo user profile document (see the MCVideo user profile document in
3GPP TS 24.484 [25]) is set to a value of:
a) \"DedicatedGroup\", and if the \ element of the \ element
of the \ element of the \ element of the
MCVideo user profile document (see the MCVideo user profile document in 3GPP
TS 24.484 [25]) contains the MCVideo group identity of the MCVideo group
targeted by the calling MCVideo user; or
b) \"UseCurrentlySelectedGroup\" and the \
element of the \ of the group document identified by the MCVideo
group identity targeted for the emergency alert is set to a value of \"true\"
as specified in 3GPP TS 24.481 [24].
then the MCVideo emergency alert request shall be considered to be an
authorised request for an MCVideo emergency alert. In all other cases, it
shall be considered to be an unauthorised request for an MCVideo emergency
alert.
If the participating MCVideo function receives a SIP request from the MCVideo
client including a request to cancel an MCVideo emergency alert to an MCVideo
group, and if the \ element of the \
element of the MCVideo user profile document identified by the MCVideo ID of
the calling MCVideo user (see the MCVideo user profile document in 3GPP TS
24.484 [25]) is set to a value of \"true\", then the MCVideo emergency alert
cancellation request shall be considered to be an authorised request to cancel
an MCVideo emergency alert. In all other cases, it shall be considered to be
an unauthorised request to cancel an MCVideo emergency alert.
###### 6.3.2.1.6.3 Validate priority request parameters
This clause is referenced from other procedures.
To validate the combinations of \, \ and
\ which are received in SIP requests, the participating MCVideo
function shall follow the procedures specified in clause 6.3.3.1.17.
###### 6.3.2.1.6.4 Retrieving Resource-Priority header field values
This clause is referenced from other procedures.
The participating MCVideo function shall follow the procedures specified in
clause 6.3.3.1.19 with the clarification that references in that procedure to
the controlling MCVideo function should be replaced with references to the
participating MCVideo function.
##### 6.3.2.1.7 Generating a SIP re-INVITE request on receipt of a SIP re-
INVITE request
This clause is referenced from other procedures.
When generating a SIP re-INVITE request according to 3GPP TS 24.229 [11] on
receipt of an incoming SIP re-INVITE request, the participating MCVideo
function:
1) if the incoming SIP re-INVITE request contained a MIME resource-lists body
with the MCVideo ID of the invited MCVideo user, shall copy the MIME resource-
lists body, according to rules and procedures of IETF RFC 5366 [37];
2) if the incoming SIP re-INVITE request contained an
application/vnd.3gpp.mcvideo-info+xml MIME body, shall copy the
application/vnd.3gpp.mcvideo-info+xml MIME body; and
3) if the incoming SIP re-INVITE request contained an
application/vnd.3gpp.location-info+xml MIME body, shall copy the
application/vnd.3gpp.location-info+xml MIME body.
##### 6.3.2.1.8 Sending a SIP INVITE request on receipt of SIP 3xx response
This clause is referenced from other procedures.
Upon:
1) receipt of a SIP INVITE request from the MCVideo client;
2) having sent a SIP INVITE request to the controlling MCVideo function; and
3) having received a SIP 302 (Moved Temporarily) response from the controlling
MCVideo function with:
a) a Contact header field containing a SIP-URI; and
b) an application/vnd.3gpp.mcvideo-info+xml MIME body with an \ element;
the participating MCVideo function:
1) shall generate a SIP INVITE request with the Request-URI set to the
contents of the Contact header field of the SIP 302 (Moved Temporarily)
response;
2) shall include in the SIP INVITE request all Accept-Contact header fields
and all Reject-Contact header fields, with their feature tags and their
corresponding values along with parameters according to rules and procedures
of IETF RFC 3841 [20] if included in the original incoming SIP INVITE request
from the MCVideo client;
3) should include the Session-Expires header field according to IETF RFC 4028
[23]. It is recommended that the \"refresher\" header field parameter is
omitted. If included, the \"refresher\" header field parameter shall be set to
\"uac\";
4) shall include the option tag \"timer\" in the Supported header field;
5) shall copy the contents of the P-Asserted-Identity header field of the
incoming SIP INVITE request from the client to the P-Asserted-Identity header
field of the outgoing SIP INVITE request;
6) shall include the g.3gpp.mcvideo media feature tag into the Contact header
field of the outgoing SIP INVITE request;
7) shall include the g.3gpp.icsi-ref media feature tag containing the value of
\"urn:urn-7:3gpp-service.ims.icsi.mcvideo\" in the Contact header field of the
outgoing SIP INVITE request;
8) shall include the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"
(coded as specified in 3GPP TS 24.229 [11]), into the P-Asserted-Service
header field of the outgoing SIP INVITE request;
9) if an SIP INVITE request was received from the client containing an
application/vnd.3gpp.mcvideo-info+xml MIME body, shall copy the contents of
the application/vnd.3gpp.mcvideo-info+xml MIME body of the original incoming
SIP INVITE request to the outgoing SIP INVITE request;
10) shall copy the contents of the \ element of the
application/vnd.3gpp.mcvideo-info+xml MIME body received in the SIP 302 (Moved
Temporarily) response, to the \ element of the
application/vnd.3gpp.mcvideo-info+xml MIME body of the outgoing SIP INVITE
request;
11) shall set the \ element of the
application/vnd.3gpp.mcvideo-info+xml MIME body of the SIP INVITE request to
the MCVideo ID of the calling user that was determined when the participating
MCVideo function received the SIP INVITE request request from the client ; and
12) if the \ element is received in the
application/vnd.3gpp.mcvideo-info+xml MIME body of the SIP 3xx response, shall
set the \ element of the application/vnd.3gpp.mcvideo-info+xml
MIME body of the SIP INVITE request to the value of the \
element received in the SIP 3xx response.
#### 6.3.2.2 Requests terminated to the served MCVideo user
##### 6.3.2.2.1 SDP offer generation
The participating MCVideo function shall follow the procedures in clause
6.3.2.1.1.
##### 6.3.2.2.2 SDP answer generation
###### 6.3.2.2.2.1 On-demand session
The participating MCVideo function shall follow the procedures in clause
6.3.2.1.2.1.
##### 6.3.2.2.3 SIP INVITE request towards the terminating MCVideo client
The participating MCVideo function shall generate an initial SIP INVITE
request according to 3GPP TS 24.229 [11] and:
1) shall include in the SIP INVITE request all Accept-Contact header fields
and all Reject-Contact header fields, with their feature tags and their
corresponding values along with parameters according to rules and procedures
of IETF RFC 3841 [20] if included in the incoming SIP INVITE request;
2) should include the Session-Expires header field according to IETF RFC 4028
[23]. It is recommended that the \"refresher\" header field parameter is
omitted. If included, the \"refresher\" header field parameter shall be set to
\"uac\";
3) shall include the option tag \"timer\" in the Supported header field;
4) shall include the following in the Contact header field:
a) the g.3gpp.mcvideo media feature tag;
b) the g.3gpp.icsi-ref media feature tag containing the value of
\"urn:urn-7:3gpp-service.ims.icsi.mcvideo\";
c) the isfocus media feature tag;
d) an MCVideo session identity mapped to the MCVideo session identity provided
in the Contact header field of the incoming SIP INVITE request; and
e) any other uri-parameter provided in the Contact header field of the
incoming SIP INVITE request;
5) shall include the option tag \"tdialog\" in a Supported header field
according to rules and procedures of IETF RFC 4538 [32];
6) shall include the option tag \"norefersub\" in a Supported header field
according to rules and procedures of IETF RFC 4488 [31];
7) may include a Resource-Share header field in accordance with clause
5.7.1.20.3 in 3GPP TS 24.229 [11]; and
8) if the incoming SIP INVITE request contained an
application/vnd.3gpp.mcvideo-info+xml MIME body, shall copy the
application/vnd.3gpp.mcvideo-info+xml MIME body to the outgoing SIP INVITE
request.
##### 6.3.2.2.4 Response to a SIP INVITE request
###### 6.3.2.2.4.1 Provisional response
This clause is referenced from other procedures.
When sending a SIP provisional response other than the SIP 100 (Trying)
response to the SIP INVITE request, the participating MCVideo function shall
generate a SIP provisional response according to 3GPP TS 24.229 [11] and:
1) shall include the following in the Contact header field:
a) the g.3gpp.mcvideo media feature tag; and
b) the g.3gpp.icsi-ref media feature tag containing the value of
\"urn:urn-7:3gpp-service.ims.icsi.mcvideo\";
2) if the outgoing SIP provisional response is to be sent in response to the
receipt of a SIP provisional response and the response contains an
application/vnd.3gpp.mcvideo-info+xml MIME body, shall copy the
application/vnd.3gpp.mcvideo-info+xml MIME body to the outgoing SIP
provisional response; and
3) if the incoming SIP INVITE request included the Supported header field with
the value \"100rel\" and according to local policy, may include the Require
header field with the value \"100rel\".
###### 6.3.2.2.4.2 Final response
This clause is referenced from other procedures.
When sending SIP 200 (OK) responses, the participating MCVideo function shall
generate a SIP 200 (OK) response according to 3GPP TS 24.229 [11] and:
1) shall include the option tag \"timer\" in a Require header field;
2) shall include the Session-Expires header field according to rules and
procedures of IETF RFC 4028 [23], \"UAS Behavior\". If no \"refresher\"
parameter was included in the SIP INVITE request, the \"refresher\" parameter
in the Session-Expires header field shall be set to \"uas\";
3) shall include the following in the Contact header field:
a) the g.3gpp.mcvideo media feature tag;
b) the g.3gpp.icsi-ref media feature tag containing the value of
\"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"; and
c) an MCVideo session identity mapped to the MCVideo session identity provided
in the Contact header field of the received SIP INVITE request from the
controlling MCVideo function;
4) shall include the option tag \"tdialog\" in a Supported header field
according to rules and procedures of IETF RFC 4538 [32]; and
5) if the incoming SIP response contained an application/vnd.3gpp.mcvideo-
info+xml MIME body, shall copy the application/vnd.3gpp.mcvideo-info+xml MIME
body to the outgoing SIP 200 (OK) response.
##### 6.3.2.2.5 Automatic Commencement Mode
###### 6.3.2.2.5.1 General
When receiving a \"SIP INVITE request for terminating participating MCVideo
function\" that requires automatic commencement mode:
1) if:
a) the invited MCVideo client has one or more pre-established sessions without
an associated MCVideo session;
b) the media-level sections for the offered MCVideo video media stream are the
same as the media-level sections for MCVideo video media stream in an existing
pre-established session; and
c) the media-level clause of the offered media-transmission control entity is
the same as the media-level clause for media-transmission control entity in an
existing pre-established session;
then the participating MCVideo function shall perform the actions specified in
clause 6.3.2.2.5.3; or
2) otherwise the participating MCVideo function shall perform the actions
specified in clause 6.3.2.2.5.2.
###### 6.3.2.2.5.2 Automatic commencement for On-Demand session
When receiving a \"SIP INVITE request for terminating participating MCVideo
function\" for an on-demand session that requires automatic commencement mode
the participating MCVideo function:
1) if:
a) the incoming SIP INVITE request contained a Priv-Answer-Mode header field
set to the value of \"Auto\";
b) no Answer-Mode header field or Priv-Answer-Mode header field were received
in the incoming SIP INVITE request and the Answer-Mode Indication received in
the application/poc-settings+xml MIME body received from the invited MCVideo
client as defined in clause 7.3.3 or clause 7.3.4 is set to \"auto-answer\";
or
c) the incoming SIP INVITE request contained an Answer-Mode header field set
to \"Auto\" and the Answer-Mode Indication received in the application/poc-
settings+xml MIME body received from the invited MCVideo client as defined in
clause 7.3.3 or clause 7.3.4 is set to \"auto-answer\";
then:
a) shall generate a SIP 183 (Session Progress) response to the \"SIP INVITE
request for terminating participating MCVideo function\" as specified in
clause 6.3.2.2.4.1; and
NOTE: The SIP 183 (session Progress) response can be sent reliably or
unreliably depending on the content of the received SIP INVITE request.
Regardless of if the SIP 183 (Session Progress) response is sent reliably or
unreliably, SDP is not included in the SIP 183 (Session Progress) response.
b) shall set the P-Answer-State header field to \"Unconfirmed\" in the SIP 183
(Session Progress) response;
2) shall copy the public user identity contained in the Request-URI of the
incoming \"SIP INVITE request for terminating participating MCVideo function\"
to the P-Asserted-Identity header field of the SIP 183 (Session Progress)
response;
3) shall generate a SIP INVITE request as specified in clause 6.3.2.2.3;
4) shall set the Request-URI to the public user identity associated to the
MCVideo ID of the MCVideo user to be invited;
5) shall perform the procedures specified in clause 6.3.2.2.9 to include any
MIME bodies in the received SIP INVITE request, into the outgoing SIP INVITE
request;
6) shall copy the contents of the P-Asserted-Identity header field of the
incoming \"SIP INVITE request for terminating participating MCVideo function\"
to the P-Asserted-Identity header field of the outgoing SIP INVITE request;
7) if the Priv-Answer-Mode header field is present in the incoming SIP INVITE
request with a value of \"Auto\", shall include a Priv-Answer-Mode header
field with the value \"Auto\" in the outgoing SIP INVITE request. Otherwise,
if the Answer-Mode header field is present in the incoming SIP INVITE request,
the participating MCVideo function shall include an Answer-Mode header field
with the value \"Auto\" in the outgoing SIP INVITE request;
8) if no Answer-Mode header field or Priv-Answer-Mode header field were
received in the incoming SIP INVITE request and the Answer-Mode Indication
received in the application/poc-settings+xml MIME body received from the
invited MCVideo client as defined in clause 7.3.3 or clause 7.3.4 is set to
\"auto-answer\", shall set the Answer-Mode header field to \"Auto\" in the
outgoing SIP INVITE request;
9) shall include in the SIP INVITE request an SDP offer based on the SDP offer
in the received \"SIP INVITE request for terminating participating MCVideo
function\" as specified in clause 6.3.2.2.1;
10) if the received SIP INVITE request contains a Resource-Priority header
field, shall include a Resource-Priority header field with the contents set as
in the received Resource-Priority header field; and
11) shall send the SIP INVITE request towards the MCVideo client according to
3GPP TS 24.229 [11].
If the SIP 183 (Session Progress) response was sent reliably, then upon
receiving a SIP PRACK request, the participating MCVideo function shall
generate a SIP 200 (OK) response to the SIP PRACK request and forward the SIP
200 (OK) response, according to 3GPP TS 24.229 [11].
Upon receiving a SIP 200 (OK) response to the above SIP INVITE request sent to
the MCVideo client, the participating MCVideo function:
1) if the SIP 183 (Session Progress) was sent unreliably, shall send the SIP
200 (OK) response immediately; and
2) if the SIP 183 (Session Progress) was sent reliably and,
a) if the SIP PRACK request to the SIP 183 (Session Progress) response has
been received by the participating MCVideo function and the SIP 200 (OK)
response to the SIP PRACK request has been sent, shall send the SIP 200 (OK)
response immediately;
b) if the SIP PRACK request to the SIP 183 (Session Progress) response has not
yet been received, then upon receipt of the SIP PRACK request, the
participating MCVideo function shall generate a SIP 200 (OK) response to the
SIP PRACK request and forward the SIP 200 (OK) response, according to 3GPP TS
24.229 [11], before sending the SIP 200 (OK) response to the \"SIP INVITE
request for terminating participating MCVideo function\".
When the participating MCVideo function sends the SIP 200 (OK) response to the
\"SIP INVITE request for terminating participating MCVideo function\", the
participating MCVideo function:
1) shall generate a SIP 200 (OK) response as described in the clause
6.3.2.2.4.2;
2) shall include in the SIP 200 (OK) response an SDP answer based on the SDP
answer in the received SIP 200 (OK) response as specified in clause
6.3.2.2.2.1;
3) shall copy the P-Asserted-Identity header field from the incoming SIP 200
(OK) response to the outgoing SIP 200 (OK) response;
4) shall interact with the media plane as specified in 3GPP TS 24.581 [5]; and
5) shall forward the SIP 200 (OK) response according to 3GPP TS 24.229 [11].
The participating MCVideo function shall forward any other SIP response that
does not contain SDP along the signalling path to the originating network
according to 3GPP TS 24.229 [11].
##### 6.3.2.2.6 Manual Commencement Mode
###### 6.3.2.2.6.1 General
When receiving a \"SIP INVITE request for terminating participating MCVideo
function\" that requires manual commencement mode:
1) if:
a) the invited MCVideo client has one or more pre-established sessions without
an associated MCVideo session;
b) the media-level sections for the offered MCVideo video media stream are the
same as the media-level clause for MCVideo video media stream in the existing
pre-established session; and
c) the media-level clause of the offered media-transmission control entity is
the same as the media-level clause for media-transmission control entity in
the existing pre-established session;
then the participating MCVideo function shall perform the actions specified in
clause 6.3.2.2.6.3; or
2) otherwise the participating MCVideo function shall perform the actions
specified in clause 6.3.2.2.6.2.
###### 6.3.2.2.6.2 Manual commencement for On-Demand session
When receiving a \"SIP INVITE request for terminating participating MCVideo
function\" for an on-demand session that requires manual commencement mode the
participating MCVideo function:
1) shall generate a SIP INVITE request as specified in clause 6.3.2.2.3;
2) shall set the Request-URI to the public user identity associated to the
MCVideo ID of the MCVideo user to be invited;
3) shall perform the procedures specified in clause 6.3.2.2.9 to include any
MIME bodies in the received SIP INVITE request;
4) if the Answer-Mode header field is present in the incoming SIP INVITE
request, participating MCVideo function, shall include an Answer-Mode header
field with the value \"Manual\";
5) if no Answer-Mode header field was received in the incoming SIP INVITE
request and the Answer-Mode Indication received in the application/poc-
settings+xml MIME body received from the invited MCVideo client as defined in
clause 7.3.3 or clause 7.3.4 is set to \"manual-answer\", shall set the
Answer-Mode header field to \"Manual\" in the outgoing SIP INVITE request;
6) if the Priv-Answer-Mode header field is present in the incoming SIP INVITE
request, the participating MCVideo function shall include a Priv-Answer-Mode
header field with the value \"Manual\";
7) shall copy the contents of the P-Asserted-Identity header field of the
incoming \"SIP INVITE request for terminating participating MCVideo function\"
to the P-Asserted-Identity header field of the outgoing SIP INVITE request;
8) shall include in the SIP INVITE request an SDP offer based on the SDP offer
in the received \"SIP INVITE request for terminating participating MCVideo
function\" as specified in clause 6.3.2.2.1;
9) if the received SIP INVITE request contains a Resource-Priority header
field, shall include a Resource-Priority header field with the contents set as
in the received Resource-Priority header field; and
10) shall send the SIP INVITE request towards the MCVideo client according to
3GPP TS 24.229 [11].
Upon receiving a SIP 180 (Ringing) response to the above SIP INVITE request,
the participating MCVideo function:
NOTE 1: A SIP 180 (Ringing) response is received from a terminating MCVideo
client in the case of a private call.
1) shall generate a SIP 180 (Ringing) response as specified in clause
6.3.2.2.4.1;
2) shall include the P-Asserted-Identity header field as received in the
incoming SIP 180 (Ringing) response; and
3) shall forward the SIP 180 (Ringing) response according to 3GPP TS 24.229
[11].
Upon receiving a SIP 183 (Session Progress) response to the above SIP INVITE
request, the participating MCVideo function:
NOTE 2: A SIP 183 (Session Progress) response can be received from a
terminating MCVideo client in the case of a group call.
1) shall generate a SIP 183 (Session Progress) response as specified in clause
6.3.2.2.4.1;
2) shall include the P-Asserted-Identity header field as received in the
incoming SIP 183 (Session Progress) response;
3) shall include the P-Answer-State header field if received in the incoming
SIP 183 (Session Progress) request; and
4) shall forward the SIP 183 (Session Progress) response according to 3GPP TS
24.229 [11].
Upon receiving a SIP 200 (OK) response to the SIP INVITE request sent to the
MCVideo client, the participating MCVideo function:
When the participating MCVideo function sends the SIP 200 (OK) response the
participating MCVideo function:
1) shall generate a SIP 200 (OK) response as described in the clause
6.3.2.2.4.2;
2) shall include in the SIP 200 (OK) response an SDP answer based on the SDP
answer in the received SIP 200 (OK) response as specified in clause
6.3.2.2.2.1;
3) shall copy the P-Asserted-Identity header field from the incoming SIP 200
(OK) response to the outgoing SIP 200 (OK) response;
4) shall interact with the media plane as specified in 3GPP TS 24.581 [5]; and
5) shall forward the SIP 200 (OK) response according to 3GPP TS 24.229 [11].
The participating MCVideo function shall forward any other SIP response that
does not contain SDP along the signalling path to the originating network
according to 3GPP TS 24.229 [11].
##### 6.3.2.2.7 Void
##### 6.3.2.2.8 SIP BYE request towards the terminating MCVideo client
###### 6.3.2.2.8.1 On-demand
Upon receiving a SIP BYE request from the controlling MCVideo function, the
participating MCVideo function:
1) shall interact with the media plane as specified in clause 6.4 in 3GPP TS
24.581 [5] for releasing media plane resource associated with the SIP session
with the controlling MCVideo function;
2) shall generate a SIP BYE request according to 3GPP TS 24.229 [11];
3) shall copy the contents of the P-Asserted-Identity header field of the
incoming SIP BYE request to the P-Asserted-Identity header field of the
outgoing SIP BYE request;
4) if the received SIP BYE request contains an application/vnd.3gpp.mcvideo-
info+xml MIME body, shall copy the application/vnd.3gpp.mcvideo-info+xml MIME
body into the outgoing SIP BYE request; and
5) shall send the SIP BYE request to the MCVideo client according to 3GPP TS
24.229 [11].
Upon receiving a SIP 200 (OK) response to the SIP BYE request the
participating MCVideo function:
1) shall send a SIP 200 (OK) response to the SIP BYE request received from the
controlling MCVideo function according to 3GPP TS 24.229 [11]; and
2) shall interact with the media plane as specified in 3GPP TS 24.581 [5] for
releasing media plane resources associated with the SIP session with the
MCVideo client.
##### 6.3.2.2.9 Populate MIME bodies
This clause is referenced from other procedures.
If the incoming SIP request contains an application/vnd.3gpp.mcvideo-info+xml
MIME body, the participating MCVideo function:
1) if not already copied, shall copy the contents of the
application/vnd.3gpp.mcvideo-info+xml MIME body received in the SIP request
into an application/vnd.3gpp.mcvideo-info+xml MIME body included in the
outgoing SIP request.
If the received SIP request contains an application/vnd.3gpp.location-info+xml
MIME body as specified in Annex F.3:
1) if not already copied, shall copy the contents of the
application/vnd.3gpp.location-info+xml MIME body received in the SIP request
into an application/vnd.3gpp.location-info+xml MIME body included in the
outgoing SIP request.
If the received SIP request contains an application/resource-lists+xml MIME
body:
1) if not already copied, shall copy the contents of the application/resource-
lists+xml MIME body received in the SIP request into an application/resource-
lists+xml MIME body included in the outgoing SIP request.
##### 6.3.2.2.10 Generating a SIP re-INVITE request towards the terminating
MCVideo client
This clause is referenced from other procedures.
The participating MCVideo function shall generate a SIP re-INVITE request
according to 3GPP TS 24.229 [11] and:
1) shall include the option tag \"tdialog\" in a Supported header field
according to rules and procedures of IETF RFC 4538 [32];
2) may include a Resource-Share header field in accordance with clause
5.7.1.20.3 in 3GPP TS 24.229 [11];
3) shall perform the procedures specified in clause 6.3.2.2.9 to copy any MIME
bodies in the received SIP re-INVITE request to the outgoing SIP re-INVITE
request; and
4) if the received SIP re-INVITE request contains a Resource-Priority header
field, shall include a Resource-Priority header field with the contents set as
in the received Resource-Priority header field.
##### 6.3.2.2.11 Generating a SIP MESSAGE request towards the terminating
MCVideo client
This clause is referenced from other procedures.
The participating MCVideo function shall generate a SIP MESSAGE request in
accordance with 3GPP TS 24.229 [11] and IETF RFC 3428 [17] and:
1) shall include in the SIP MESSAGE request all Accept-Contact header fields
and all Reject-Contact header fields, with their feature tags and their
corresponding values along with parameters according to rules and procedures
of IETF RFC 3841 [20] that were received (if any) in the incoming SIP MESSAGE
request;
2) shall set the Request-URI of the outgoing SIP MESSAGE request to the public
user identity associated to the MCVideo ID of the MCVideo user that was in the
Request-URI of the incoming SIP MESSAGE request;
3) shall populate the outgoing SIP MESSAGE request MIME bodies as specified in
clause 6.3.2.2.9; and
4) shall copy the contents of the P-Asserted-Identity header field of the
incoming SIP MESSAGE request to the P-Asserted-Identity header field of the
outgoing SIP MESSAGE request.
#### 6.3.2.3 Processing I_MESSAGEs containing MKFC and MKFC-ID
##### 6.3.2.3.1 General
The procedures in this clause are executed by:
\- the originating participating MCVideo function as a result of receiving a
SIP 200 (OK) response to a SIP INVITE request targeted to a group identity,
where the SIP 200 (OK) response contains an application/vnd.3gpp.mcvideo-
info+xml MIME body containing an \ element; and
\- the terminating participating MCVideo function as a result of receiving a
SIP INVITE requested targeted to an MCVideo ID as part of a group call, where
the SIP INVITE request contains an application/vnd.3gpp.mcvideo-info+xml MIME
body containing an \ element.
The \ element contains one or more \ elements where each
\ element represents an I_MESSAGE(s) containing an MKFC and MKFC-ID, as
specified in 3GPP TS 24.481 [24].
The participating MCVideo function validates each I_MESSAGE and if validation
is successful, decrypts the I_MESSAGE, extracts the MKFC and MKFC-ID and
transfers the MKFC and MKFC-ID to the media-transmission control entity.
##### 6.3.2.3.2 Processing an I_MESSAGE containing MKFC and MKFC-ID
The participating MCVideo function:
1) shall extract the URI from the initiator field (IDRi) of the I_MESSAGE and
use it together with the timer related parameter to check the signature of the
I_MESSAGE as described in 3GPP TS 33.180 [8];
NOTE: If the terminating participating MCVideo function receives the SIP
INVITE request from a controlling MCVideo function, then the URI in the IDRi
is the controlling MCVideo function URI. If the terminating participating
MCVideo function receives the SIP INVITE request from a non-controlling
MCVideo function, then the URI in the IDRi is the non-controlling MCVideo
function URI.
2) if the signature is not valid, shall exit this procedure. Otherwise shall
validate that the contents of the recipient field (IDRr) of the I_MESSAGE to
ensure it matches to the URI of the participating MCVideo function; and
3) if the contents of the IDRr do not match to the participating MCVideo
function URI, shall exit this procedure. Otherwise, shall use the contents of
the IDRr to decrypt the I_MESSAGE and extract the MKFC and MKFC-ID.
After the MKFC(s) and MKFC-ID(s) have been extracted from the I_MESSAGE(s),
the participating MCVideo function shall provide the media-transmission
control entity with the MKFC(s) and MKFC-ID(s), by interacting with the media
plane as specified in 3GPP TS 24.581 [5].
### 6.3.3 Controlling MCVideo function
#### 6.3.3.1 Request initiated by the controlling MCVideo function
##### 6.3.3.1.1 SDP offer generation
The SDP offer is generated based on the received SDP offer. The SDP offer
generated by the controlling MCVideo function:
1) when initiating a new MCVideo session the SDP offer;
a) shall contain only one SDP media-level clause for MCVideo video media
stream as contained in the received SDP offer; and
b) shall contain an SDP media-level clause for one media-transmission control
entity, if present in the received SDP offer; and
2) when adding a new MCVideo user to an existing MCVideo Session, the SDP
offer shall contain the media stream currently used in the MCVideo session.
When composing the SDP offer according to 3GPP TS 24.229 [11], the controlling
MCVideo function:
1) shall replace the IP address and port number for the offered media stream
in the received SDP offer with the IP address and port number of the
controlling MCVideo function;
2) for the MCVideo video media stream, shall include all media-level
attributes from the received SDP offer;
3) shall replace the IP address and port number for the offered media
transmission control entity, if any, in the received SDP offer with the IP
address and port number of the controlling MCVideo function; and
4) for the offered media transmission control entity, shall include the
offered media transmission control entity \'fmtp\' attributes as specified in
3GPP TS 24.581 [5] clause 14.
##### 6.3.3.1.2 Sending an INVITE request
This clause is referenced from other procedures.
The controlling MCVideo function shall generate an initial SIP INVITE request
according to 3GPP TS 24.229 [11].
The controlling MCVideo function:
1) shall include in the Contact header field an MCVideo session identity for
the MCVideo session with the g.3gpp.mcvideo media feature tag, the isfocus
media feature tag and the g.3gpp.icsi-ref media feature tag with the value of
\"urn:urn-7:3gpp-service.ims.icsi.mcvideo\" according to IETF RFC 3840 [22];
2) shall include an Accept-Contact header field containing the g.3gpp.mcvideo
media feature tag along with the \"require\" and \"explicit\" header field
parameters according to IETF RFC 3841 [20];
3) shall include the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"
(coded as specified in 3GPP TS 24.229 [11]), in a P-Asserted-Service-Id header
field according to IETF RFC 6050 [14] in the SIP INVITE request;
4) shall include an Accept-Contact header field with the media feature tag
g.3gpp.icsi-ref with the value of \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"
along with parameters \"require\" and \"explicit\" according to IETF RFC 3841
[20];
5) shall include a Referred-By header field with the public user identity of
the inviting MCVideo client;
6) should include the Session-Expires header field according to rules and
procedures of IETF RFC 4028 [7]. The refresher parameter shall be omitted;
7) shall include the Supported header field set to \"timer\"; and
8) if the incoming SIP INVITE request contained an
application/vnd.3gpp.mcvideo-info+xml MIME body, shall copy the
application/vnd.3gpp.mcvideo-info+xml MIME body to the outgoing INVITE
request.
##### 6.3.3.1.3 Receipt of a SIP response to a SIP INVITE request
###### 6.3.3.1.3.1 Final response
On receipt of the SIP 200 (OK) response to the initial outgoing SIP INVITE
request the controlling MCVideo function:
1) shall start the SIP session timer according to rules and procedures of IETF
RFC 4028 [23]; and
2) shall cache SIP feature tags, if received in the Contact header field, and
if the specific feature tags are supported.
##### 6.3.3.1.4 Sending a SIP BYE request
When a participant needs to be removed from the MCVideo session, the
controlling MCVideo function:
1) shall interact with the media plane as specified in 3GPP TS 24.581 [5] for
the MCVideo session release;
2) shall generate a SIP BYE request according to 3GPP TS 24.229 [11]; and
3) shall send the SIP BYE request to the MCVideo clients according to3GPP TS
24.229 [11].
If timer TNG3 (group call timer) has not expired, then when the last MCVideo
client is removed from the MCVideo session, the controlling MCVideo function
shall stop timer TNG3 (group call timer).
When the MCVideo group session needs to be released, the controlling MCVideo
function shall send SIP BYE requests as described in this clause, to all
participants of the group session.
Upon receiving a SIP 200 (OK) response to a SIP BYE request the controlling
MCVideo function shall interact with the media plane as specified in clause
6.3 in 3GPP TS 24.581 [5] for releasing media plane resources associated with
the SIP session with the MCVideo clients.
##### 6.3.3.1.5 Sending a SIP re-INVITE request for MCVideo emergency group
call
This clause is referenced from other procedures.
The controlling MCVideo function shall generate a SIP re-INVITE request
according to 3GPP TS 24.229 [11].
The controlling MCVideo function:
1) shall include an SDP offer with the media parameters as currently
established with the terminating MCVideo client according to 3GPP TS 24.229
[11];
2) shall include an application/vnd.3gpp.mcvideo-info+xml MIME body with the
\ element set to the MCVideo ID of the initiating
MCVideo user;
3) if the in-progress emergency group state of the group is set to a value of
\"true\" the controlling MCVideo function:
a) shall include a Resource-Priority header field with the namespace populated
with the values for an MCVideo emergency group call as specified in clause
6.3.3.1.18;
b) shall include in the application/vnd.3gpp.mcvideo-info+xml MIME body the
\ element set to a value of \"true\";
c) if the \ element is set to \"true\" in the received SIP re-
INVITE request and MCVideo emergency alerts are authorised for this group and
MCVideo user as determined by the procedures of clause 6.3.3.1.12.1, shall
populate the application/vnd.3gpp.mcvideo-info+xml MIME body and
application/vnd.3gpp.mcvideo-location-info+xml MIME body as specified in
clause 6.3.3.1.11. Otherwise, shall set the \ element to a value of
\"false\" in the application/vnd.3gpp.mcvideo-info+xml MIME body; and
d) if the in-progress imminent peril state of the group is set to a value of
\"true\" shall include in the application/vnd.3gpp.mcvideo-info+xml MIME body
an \ element set to a value of \"false\"; and
NOTE: If the imminent peril state of the group is true at this point, the
controlling function will be setting it to false as part of the calling
procedure. This is in effect an upgrade of an MCVideo imminent peril group
call to an MCVideo emergency group call.
4) if the in-progress emergency group state of the group is set to a value of
\"false\":
a) shall include a Resource-Priority header field populated with the values
for a normal MCVideo group call as specified in clause 6.3.3.1.18; and
b) if the received SIP re-INVITE request contained an
application/vnd.3gpp.mcvideo-info+xml MIME body with the \
element set to a value of \"false\" and this is an authorised request to
cancel an MCVideo emergency group call as determined by the procedures of
clause 6.3.3.1.12.4:
i) shall include an application/vnd.3gpp.mcvideo-info+xml MIME body with the
\ element set to a value of \"false\"; and
ii) if the received SIP re-INVITE request contained an
application/vnd.3gpp.mcvideo-info+xml MIME body with the \ element
set to a value of \"false\" and this is an authorised request to cancel an
MCVideo emergency alert as determined by the procedures of clause 6.3.3.1.14,
shall:
A) include in the application/vnd.3gpp.mcvideo-info+xml MIME body an \ element set to a value of \"false\"; and
B) if the received SIP request contains an \ element in the
application/vnd.3gpp.mcvideo-info+xml MIME body, copy the contents of the
received \ element to an \ element in the
application/vnd.3gpp.mcvideo-info+xml MIME body in the outgoing SIP re-INVITE
request.
##### 6.3.3.1.6 Sending a SIP INVITE request for MCVideo emergency group call
This clause is referenced from other procedures.
This clause describes the procedures for inviting an MCVideo user to an
MCVideo session associated with an MCVideo emergency group call or MCVideo
imminent peril group call. The procedure is initiated by the controlling
MCVideo function as the result of an action in clause 9.2.2.4.1.1.
The controlling MCVideo function:
1) shall generate a SIP INVITE request as specified in clause 6.3.3.1.2;
2) shall set the Request-URI to the address of the terminating participating
MCVideo function associated with the MCVideo ID of the targeted MCVideo user;
> 3) shall include an application/vnd.3gpp.mcvideo-info+xml MIME body with the
> \ element containing the \ element populated as
> follows:
a) the \ element set to the value of the MCVideo ID of
the targeted MCVideo user;
b) the \ element set to the value of the MCVideo ID
of the calling MCVideo user; and
c) the \ element set to the value of the MCVideo
group ID of the emergency group call.
4) shall include in the P-Asserted-Identity header field the public service
identity of the controlling MCVideo function;
5) shall include in the SIP INVITE request an SDP offer based on the SDP offer
in the received SIP INVITE request from the originating network according to
the procedures specified in clause 6.3.3.1.1; and
6) if the in-progress emergency group state of the group is set to a value of
\"true\" the controlling MCVideo function:
a) shall include a Resource-Priority header field populated with the values
for an MCVideo emergency group call as specified in clause 6.3.3.1.18;
b) shall include in the application/vnd.3gpp.mcvideo-info+xml MIME body an
\ element set to a value of \"true\";
c) if the \ element is set to \"true\" in the received SIP INVITE
request and the requesting MCVideo user and MCVideo group are authorised for
the initiation of MCVideo emergency alerts as determined by the procedures of
clause 6.3.3.1.12.1, shall populate the application/vnd.3gpp.mcvideo-info+xml
MIME body and the application/vnd.3gpp.mcvideo-location-info+xml MIME body as
specified in clause 6.3.3.1.11. Otherwise, shall set the \ element
to a value of \"false\" in the application/vnd.3gpp.mcvideo-info+xml MIME
body; and
d) if the in-progress imminent peril state of the group is set to a value of
\"true\" shall include in the application/vnd.3gpp.mcvideo-info+xml MIME body
an \ element set to a value of \"false\";
NOTE: If the imminent peril state of the group is true at this point, the
controlling function will set it to false as part of the calling procedure.
7) if the in-progress emergency state of the group is set to a value of
\"false\" and the in-progress imminent peril state of the group is set to a
value of \"true\", the controlling MCVideo function:
a) shall include a Resource-Priority header field populated with the values
for an MCVideo imminent peril group call as specified in clause 6.3.3.1.18;
and
b) shall include in the application/vnd.3gpp.mcvideo-info+xml MIME body with
the \ element set to a value of \"true\"; and
8) if:
a) an MCVideo GKTP document exists for the group identity contained in the
\ element in the application/vnd.3gpp.mcvideo-info+xml
MIME body of the incoming SIP INVITE request; and
b) the MCVideo GKTP document contains an \ element;
then:
a) for each instance of \ element of the \ element of the
MCVideo GKTP document:
i) shall perform the procedure in clause 6.3.3.6.2 to re-generate an
I_MESSAGE; and
ii) if the procedure in clause 6.3.3.6.2 was successful, shall include the
I_MESSAGE in a \ element of the \ element of an
application/vnd.3gpp.mcvideo-info+xml MIME body included in the outgoing SIP
INVITE request.
##### 6.3.3.1.7 Sending a SIP UPDATE request for Resource-Priority header
field correction
This clause is referenced from other procedures.
This clause describes the procedures for updating an MCVideo session
associated with an MCVideo emergency group call or MCVideo imminent peril
group call when the received SIP INVITE request did not include a correctly
populated Resource-Priority header field. The procedure is initiated by the
controlling MCVideo function for the purpose of providing the correct
Resource-Priority header field.
1) shall generate a SIP 183 (Session Progress) response according to 3GPP TS
24.229 [11] with the clarifications provided specified in clause 6.3.3.2.3.1;
2) shall include the option tag \"100rel\" in a Require header field in the
SIP 183 (Session Progress) response;
3) shall include in the SIP 183 (Session Progress) response an SDP answer to
the SDP offer in the incoming SIP INVITE request as specified in the clause
6.3.3.2.1; and
4) shall send the SIP 183 (Session Progress) response towards the MCVideo
client according to 3GPP TS 24.229 [11].
Upon receiving a SIP PRACK request to the SIP 183 (Session Progress) response
the controlling MCVideo function:
1) shall send the SIP 200 (OK) response to the SIP PRACK request according to
3GPP TS 24.229 [11].
2) shall generate a SIP UPDATE request according to 3GPP TS 24.229 [11] with
the following clarifications:
3) shall include in the SIP UPDATE request an SDP offer based on the SDP offer
in the received SIP INVITE request from the originating network according to
the procedures specified in clause 6.3.3.1.1;
4) if the in-progress emergency group state of the group is set to a value of
\"true\" the controlling MCVideo function shall include a Resource-Priority
header field populated for an MCVideo emergency group call as specified in
clause 6.3.3.1.18; and
NOTE 1: This is the case when the sending MCVideo client did not send a
Resource-Priority header field populated appropriately to receive emergency-
level priority. In this case, the Resource-Priority header field is populated
appropriately to provide emergency-level priority.
5) if the in-progress emergency group state of the group is set to a value of
\"false\" the controlling MCVideo function:
a) if the in-progress imminent peril state of the group is set to a value of
\"false\", shall include a Resource-Priority header field populated for a
normal priority MCVideo group call as specified in clause 6.3.3.1.18; and
b) if the in-progress imminent peril state of the group is set to a value of
\"true\", shall include a Resource-Priority header field populated for an
MCVideo imminent peril group call as specified in clause 6.3.3.1.18.
NOTE 2: This is the case when the sending MCVideo client incorrectly populated
a Resource-Priority header field for emergency-level or imminent peril-level
priority and the controlling MCVideo function re-populates it as appropriate
to an imminent peril level priority or normal priority level.
##### 6.3.3.1.8 Generating a SIP re-INVITE request
This clause is referenced from other procedures.
This clause describes the procedures for generating a SIP re-INVITE request to
be sent by the controlling MCVideo function.
The controlling MCVideo function:
1) shall generate an SIP re-INVITE request according to 3GPP TS 24.229 [11];
and
2) shall include an SDP offer with the media parameters as currently
established with the terminating MCVideo client according to 3GPP TS 24.229
[11] with the clarifications specified in clause 6.3.3.1.1.
##### 6.3.3.1.9 Generating a SIP re-INVITE request to cancel an in-progress
emergency
This clause is referenced from other procedures.
This clause describes the procedures for generating a SIP re-INVITE request to
cancel the in-progress emergency state of an MCVideo group. The procedure is
initiated by the controlling MCVideo function when it determines the
cancellation of the in-progress emergency state of an MCVideo group is
required.
The controlling MCVideo function:
1) shall generate a SIP re-INVITE request as specified in 3GPP TS 24.229 [11]
with the clarifications specified in clause 6.3.3.1.8;
2) shall include a Resource-Priority header field populated with the values
for a normal MCVideo group call as specified in clause 6.3.3.1.18; and
3) shall include an application/vnd.3gpp.mcvideo-info+xml MIME body with the
\ element set to a value of \"false\".
##### 6.3.3.1.10 Generating a SIP MESSAGE request for notification of in-
progress emergency or imminent peril status change
This clause is referenced from other procedures.
This clause describes the procedures for generating a SIP MESSAGE request to
notify affiliated but not participating members of an MCVideo group of the
change of status of the in-progress emergency state, imminent peril state or
emergency alert status of an MCVideo group. The procedure is initiated by the
controlling MCVideo function when there has been a change of in-progress
imminent peril, in-progress emergency or the emergency alert status of an
MCVideo group.
The controlling MCVideo function:
1) shall generate a SIP MESSAGE request in accordance with 3GPP TS 24.229 [11]
and IETF RFC 3428 [17];
2) shall include an Accept-Contact header field containing the g.3gpp.mcvideo
media feature tag along with the \"require\" and \"explicit\" header field
parameters according to IETF RFC 3841 [20];
3) shall include an Accept-Contact header field with the media feature tag
g.3gpp.icsi-ref with the value of \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"
along with parameters \"require\" and \"explicit\" according to IETF RFC 3841
[20];
4) shall set the Request-URI to the address of the terminating participating
function associated with the MCVideo ID of the targeted MCVideo user;
5) shall include a P-Asserted-Identity header field set to the public service
identity of controlling MCVideo function;
6) shall include the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"
(coded as specified in 3GPP TS 24.229 [11]), in a P-Asserted-Service-Id header
field according to IETF RFC 6050 [14];
7) shall include an application/vnd.3gpp.mcvideo-info+xml MIME body with the
\ element containing the \ element with the
\ element set to the value of the MCVideo ID of the
targeted MCVideo user; and
8) shall include in the application/vnd.3gpp.mcvideo-info+xml MIME body an
\ element set to the MCVideo group ID of the MCVideo
group on which the MCVideo emergency call, imminent peril call or the
emergency alert state has changed.
##### 6.3.3.1.11 Populate mcvideo-info and location-info MIME bodies for
emergency alert
This clause is referenced from other procedures.
This clause describes the procedures for populating the
application/vnd.3gpp.mcvideo-info+xml and application/vnd.3gpp.mcvideo-
location-info+xml MIME bodies for an MCVideo emergency alert. The procedure is
initiated by the controlling MCVideo function when it has received a SIP
request initiating an MCVideo emergency alert and generates a message
containing the MCVideo emergency alert information required by 3GPP TS 23.281
[26].
The controlling MCVideo function:
1) shall include, if not already present, an application/vnd.3gpp.mcvideo-
info+xml MIME body as specified in Annex F.1, and set the \ element
to a value of \"true\";
2) shall determine the value of the MCVideo user\'s Mission Critical
Organization from the \ element, of the MCVideo
user profile document (see the MCVideo user profile document in 3GPP TS 24.484
[25]);
3) shall include in the \ element containing the \ element containing an \ element set to the value of the
MCVideo user\'s Mission Critical Organization; and
4) shall copy the contents of the application/vnd.3gpp.mcvideo-location-
info+xml MIME body in the received SIP request into an
application/vnd.3gpp.mcvideo-location-info+xml MIME body included in the
outgoing SIP request.
##### 6.3.3.1.12 Authorisations
###### 6.3.3.1.12.1 Determining authorisation for initiating an MCVideo
emergency alert
If the controlling MCVideo function has received a SIP request targeted to an
MCVideo group with the \ element of the
application/vnd.3gpp.mcvideo-info+xml MIME body set to a value of \"true\",
the controlling MCVideo function shall check the following conditions:
1) if the \ element of the \ element
of the MCVideo user profile document identified by the MCVideo ID of the
calling user (see the MCVideo user profile document in 3GPP TS 24.484 [25]) is
set to a value of \"true\";
a) if the \"entry-info\" attribute of the \ element of the
\ element contained within the \ element
of the MCVideo user profile document (see the MCVideo user profile document in
3GPP TS 24.484 [25]) is set to a value of \"DedicatedGroup\" and:
i) if the MCVideo group identity targeted for the emergency alert is contained
in the \ element of the \ element of the \
element contained within the \ element of the MCVideo user
profile document (see the MCVideo user profile document in 3GPP TS 24.484
[25]); and
ii) if the \ element of the \ of
the group document identified by the MCVideo group identity is set to a value
of \"true\" as specified in 3GPP TS 24.481 [24]; or
b) if the \"entry-info\" attribute of the \ element of the
\ element contained within the \ element
of the MCVideo user profile (see the MCVideo user profile document in 3GPP TS
24.484 [25]) is set to a value of \"UseCurrentlySelectedGroup\" and the
\ element of the \ of the group
document identified by the MCVideo group identity targeted for the emergency
alert is set to a value of \"true\" as specified in 3GPP TS 24.481 [24].
then the MCVideo emergency alert request shall be considered to be an
authorised request for an MCVideo emergency alert targeted to a MCVideo group.
In all other cases, the MCVideo emergency alert request shall be considered to
be an unauthorised request for an MCVideo emergency alert targeted to an
MCVideo group.
If the controlling MCVideo function has received a SIP request targeted to an
MCVideo user with the \ element of the
application/vnd.3gpp.mcvideo-info+xml MIME body set to a value of \"true\",
the controlling MCVideo function shall check the following conditions:
1) if the \ element of the \ element
of the MCVideo user profile document identified by the MCVideo ID of the
calling user (see the MCVideo user profile document in 3GPP TS 24.484 [25]) is
set to a value of \"true\"; and
a) if the \"entry-info\" attribute of the \ element of the
\ element contained within the \ element of
the MCVideo user profile document (see the MCVideo user profile document in
3GPP TS 24.484 [25]) is set to a value of \"UsePreConfigured\" and the MCVideo
ID of the MCVideo user targeted for the call is contained in the \
element of the \ element of the \ element
contained within the \ element (see the MCVideo user profile
document in 3GPP TS 24.484 [25]); or
b) if the \"entry-info\" attribute of the \ element of the
\ element contained within the \ element of
the MCVideo user profile document (see the MCVideo user profile document in
3GPP TS 24.484 [25]) is set to a value of \"LocallyDetermined\";
then the MCVideo emergency alert request shall be considered to be an
authorised request for an MCVideo emergency alert targeted to an MCVideo user.
In all other cases, it shall be considered to be an unauthorised request for
an MCVideo emergency alert targeted to an MCVideo user.
###### 6.3.3.1.12.2 Determining authorisation for initiating an MCVideo
emergency group or private call
If the controlling MCVideo function has received a SIP request for an MCVideo
group call with the \ element of the
application/vnd.3gpp.mcvideo-info+xml MIME body set to a value of \"true\"
and:
1) if the \ element of the \ element of
the MCVideo user profile document identified by the MCVideo ID of the calling
user (see the MCVideo user profile document in 3GPP TS 24.484 [25]) is set to
a value of \"true\" and:
a) if the \"entry-info\" attribute of the \ element of the
\ element of the \ element contained
within the \ element of the MCVideo user profile document
(see the MCVideo user profile document in 3GPP TS 24.484 [25]) is set to a
value of \"DedicatedGroup\" and:
i) if the \ element of the \ element of the
\ element of the \ contained within the
\ element of the MCVideo user profile document (see the
MCVideo user profile document in 3GPP TS 24.484 [25]) contains the identity of
the MCVideo group targeted by the calling MCVideo user; and
ii) if the \ element of the \
element of the group document identified by the targeted MCVideo group
identity is set to a value of \"true\" as specified in 3GPP TS 24.481 [24];
> then the controlling MCVideo function shall consider the MCVideo emergency
> group call request to be an authorised request for an MCVideo emergency
> group call and skip the remaining steps; or;
b) if the \"entry-info\" attribute of the \ element of the
\ element of the \ element contained
within the \ element of the MCVideo user profile document
(see the MCVideo user profile document in 3GPP TS 24.484 [25]) is set to a
value of \"UseCurrentlySelectedGroup\" and if the \ element of the \ element of the group document identified
by the targeted MCVideo group identity is set to a value of \"true\" as
specified in 3GPP TS 24.481 [24];
> then the controlling MCVideo function shall consider the MCVideo emergency
> group call request to be an authorised request for an MCVideo emergency
> group call and skip the remaining steps; or
2) if the controlling MCVideo function does not consider the MCVideo emergency
group call request to be an authorised request for an MCVideo emergency group
call by step 1) above, then the controlling MCVideo function shall consider
the MCVideo emergency group call request to be an unauthorised request for an
MCVideo emergency group call.
If the controlling MCVideo function has received a SIP request for an MCVideo
private call with the \ element of the
application/vnd.3gpp.mcvideo-info+xml MIME body set to a value of \"true\"
and:
1) if the \ element of the \ element of
the MCVideo user profile document identified by the MCVideo ID of the calling
user (see the MCVideo user profile document in 3GPP TS 24.484 [25]) is set to
a value of \"true\"; and
a) if the \"entry-info\" attribute of the \ element of the
\ element of the \ element contained
within the \ element of the MCVideo user profile document (see
the MCVideo user profile document in 3GPP TS 24.484 [25]) is set to a value of
\"UsePreConfigured\" and if the MCVideo ID targeted for the call is contained
in the \ element of the \ element of the
\ element of the \ element contained
within the \ element (see the MCVideo user profile document in
3GPP TS 24.484 [25]); or
b) if the \"entry-info\" attribute of the \ element of the
\ element of the \ element contained
within the \ element of the MCVideo user profile document (see
the MCVideo user profile document in 3GPP TS 24.484 [25]) is set to a value of
\"LocallyDetermined\";
> then the controlling MCVideo function shall consider the MCVideo emergency
> private call request to be an authorised request for an MCVideo emergency
> private call and skip step 2) below; or
2) if the controlling MCVideo function does not consider the MCVideo emergency
private call request to be an authorised request for an MCVideo emergency
private call by step 1) above, then the controlling MCVideo function shall
consider the MCVideo emergency private call request to be an unauthorised
request for an MCVideo emergency private call.
###### 6.3.3.1.12.3 Determining authorisation for cancelling an MCVideo
emergency alert
If the controlling MCVideo function has received a SIP request with the
\ element of the application/vnd.3gpp.mcvideo-info+xml MIME body
set to a value of \"false\" and:
1) if the \ element of the \ element of
the MCVideo user profile document identified by the MCVideo ID of the calling
user (see the MCVideo user profile document in 3GPP TS 24.484 [25]) is set to
a value of \"true\", then the MCVideo emergency alert cancellation request
shall be considered to be an authorised request for an MCVideo emergency alert
cancellation; and
2) if the \ element of the \ element of
the MCVideo user profile document identified by the MCVideo ID of the calling
user (see the MCVideo user profile document in 3GPP TS 24.484 [25]) is set to
a value of \"false\", then the MCVideo emergency alert cancellation request
shall be considered to be an unauthorised request for an MCVideo emergency
alert cancellation.
###### 6.3.3.1.12.4 Determining authorisation for cancelling an MCVideo
emergency call
If the controlling MCVideo function has received a SIP request for an MCVideo
group call with the \ element of the
application/vnd.3gpp.mcvideo-info+xml MIME body set to a value of \"false\"
and:
1) if the \ element of the \ element of
the MCVideo user profile document identified by the MCVideo ID of the calling
user (see the MCVideo user profile document in 3GPP TS 24.484 [25]) is set to
a value of \"true\", then the MCVideo emergency call cancellation request
shall be considered to be an authorised request for an MCVideo emergency group
call cancellation; and
2) If the \ element of the \ element of
the MCVideo user profile document identified by the MCVideo ID of the calling
user (see the MCVideo user profile document in 3GPP TS 24.484 [25]) is set to
a value of \"false\", then the MCVideo emergency group call cancellation
request shall be considered to be an unauthorised request for an MCVideo
emergency group call cancellation.
If the controlling MCVideo function has received a SIP request for an MCVideo
private call with the \ element of the
application/vnd.3gpp.mcvideo-info+xml MIME body set to a value of \"false\"
and:
1) if the \ element of the \
element of the MCVideo user profile document identified by the MCVideo ID of
the calling user (see the MCVideo user profile document in 3GPP TS 24.484
[25]) is set to a value of \"true\", then the MCVideo emergency private call
cancellation request shall be considered to be an authorised request for an
MCVideo emergency private call cancellation; and
2) if the \ element of the \
element of the MCVideo user profile document identified by the MCVideo ID of
the calling user (see the MCVideo user profile document in 3GPP TS 24.484
[25]) is set to a value of \"false\" or not present, then the MCVideo
emergency private call cancellation request shall be considered to be an
unauthorised request for an MCVideo emergency private call cancellation.
###### 6.3.3.1.12.5 Determining authorisation for initiating an MCVideo
imminent peril call
If the controlling MCVideo function has received a SIP request with the
\ element of the application/vnd.3gpp.mcvideo-info+xml MIME
body set to a value of \"true\" and:
1) if the \ element of the \ element of
the MCVideo user profile document identified by the MCVideo ID of the calling
user (see the MCVideo user profile document in 3GPP TS 24.484 [25]) is set to
a value other than \"true\" the request for initiating an MCVideo imminent
peril call shall be considered to be an unauthorised request for an MCVideo
imminent peril call and skip the remaining steps;
2) if the \ element of the \ element
of the group document identified by the targeted MCVideo group identity is set
to a value other than \"true\" as specified in 3GPP TS 24.481 [24], the
request for initiating an MCVideo imminent peril call shall be considered to
be an unauthorised request for an MCVideo imminent peril call and skip the
remaining steps;
3) if the \"entry-info\" attribute of the \ element of the
\ element contained within the \
element of the MCVideo user profile document (see the MCVideo user profile
document in 3GPP TS 24.484 [25]) is set to a value of \"DedicatedGroup\" and
if the MCVideo group identity targeted for the call is contained in the \ element of the \ element of the \
element contained within the \ element (see the MCVideo
user profile document in 3GPP TS 24.484 [25]); or
4) if the \"entry-info\" attribute of the \ element of the
\ element contained within the \
element of the MCVideo user profile document (see the MCVideo user profile
document in 3GPP TS 24.484 [25]) is set to a value of
\"UseCurrentlySelectedGroup\".
then the MCVideo imminent peril call request shall be considered to be an
authorised request for an MCVideo imminent peril call. In all other cases, it
shall be considered to be an unauthorised request for an MCVideo imminent
peril call.
###### 6.3.3.1.12.6 Determining authorisation for cancelling an MCVideo
imminent peril call
If the controlling MCVideo function has received a SIP request with the
\ element of the application/vnd.3gpp.mcvideo-info+xml MIME
body set to a value of \"false\" and:
1) if the \ element of the \ element of
the MCVideo user profile document identified by the MCVideo ID of the calling
user (see the MCVideo user profile document in 3GPP TS 24.484 [25]) is set to
a value of \"true\", then the MCVideo emergency call cancellation request
shall be considered to be an authorised request for an MCVideo imminent peril
call cancellation; and
2) if the \ element of the \ element of
the MCVideo user profile document identified by the MCVideo ID of the calling
user (see the MCVideo user profile document in 3GPP TS 24.484 [25]) is set to
a value of \"false\" or not present, then the MCVideo emergency call
cancellation request shall be considered to be an unauthorised request for an
MCVideo imminent peril call cancellation.
##### 6.3.3.1.13 Generating a SIP 403 response for priority call request
rejection
If the controlling MCVideo function has received a SIP request with the
\ element of the application/vnd.3gpp.mcvideo-info+xml MIME
body is set to \"true\" and this is an unauthorised request for an MCVideo
emergency call as determined by the procedures of clause 6.3.3.1.12.2, the
controlling MCVideo function shall:
1) include in the SIP 403 (Forbidden) response an
application/vnd.3gpp.mcvideo-info+xml MIME body as specified in Annex F.1 with
the \ element containing the \ element with the
\ element set to a value of \"false\" and the \
element set to a value of \"false\".
##### 6.3.3.1.14 Sending a SIP re-INVITE request for MCVideo imminent peril
group call
This clause is referenced from other procedures.
The controlling MCVideo function shall generate a SIP re-INVITE request
according to 3GPP TS 24.229 [11].
The controlling MCVideo function:
1) shall include in the Contact header field an MCVideo session identity for
the MCVideo session with the g.3gpp.mcvideo media feature tag and the isfocus
media feature tag according to IETF RFC 3840 [22];
2) shall include an SDP offer with the media parameters as currently
established with the terminating MCVideo client according to 3GPP TS 24.229
[11];
3) shall include an application/vnd.3gpp.mcvideo-info+xml MIME body with the
\ element set to the MCVideo ID of the initiating
MCVideo user;
4) if the in-progress imminent peril state of the group is set to a value of
\"true\" the controlling MCVideo function:
a) shall include a Resource-Priority header field populated with the values
for an MCVideo imminent peril group call as specified in clause 6.3.3.1.18;
and
b) shall include in the application/vnd.3gpp.mcvideo-info+xml MIME body an
\ element set to a value of \"true\"; and
5) if the in-progress imminent peril state of the group is set to a value of
\"false\":
a) shall include a Resource-Priority header field populated with the values
for a normal MCVideo group call as specified in clause 6.3.3.1.18; and
b) shall include in the application/vnd.3gpp.mcvideo-info+xml MIME body an
\ element set to a value of \"false\" and the \ element set to a value of \"false\".
##### 6.3.3.1.15 Handling the expiry of timer TNG2 (in-progress emergency
group call timer)
Upon expiry of timer TNG2 (in-progress emergency group call timer) for an
MCVideo group, the controlling MCVideo function:
1) shall set the in-progress emergency state of the group to a value of
\"false\";
2) shall, if an MCVideo group call or MCVideo group session is in progress on
the indicated group, for each of the participating members:
a) generate a SIP re-INVITE request as specified in clause 6.3.3.1.9; and
b) send the SIP re-INVITE request towards the MCVideo client according to 3GPP
TS 24.229 [11]; and
3) shall for each affiliated but non-participating members member of the
group:
a) generate a SIP MESSAGE request according to clause 6.3.3.1.10 and include
in the application/vnd.3gpp.mcvideo-info+xml MIME body an \
element set to a value of \"false\";
b) shall include in the P-Asserted-Identity header field the public service
identity of the controlling MCVideo function;
c) include the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\" (coded
as specified in 3GPP TS 24.229 [11]), in a P-Asserted-Service-Id header field
according to IETF RFC 6050 [14]; and
d) send the SIP MESSAGE request towards the MCVideo client according to rules
and procedures of 3GPP TS 24.229 [11].
Upon receiving a SIP 200 (OK) response to a re-SIP INVITE request the
controlling MCVideo function shall interact with the media plane as specified
in 3GPP TS 24.581 [5].
##### 6.3.3.1.16 Validate priority request parameters
This clause is referenced from other procedures. This procedure validates the
combinations of \, \ and \ in the
application/vnd.3gpp.mcvideo-info+xml MIME body included in:
1) a SIP INVITE request or SIP re-INVITE request; or
2) the body \"URI\" header field of the SIP URI included in the
application/resource-lists MIME body which is pointed to by a \"cid\" URL
located in the Refer-To header of a SIP REFER request;
Upon receiving a SIP request as specified above with the \
element set to a value of \"true\", the controlling MCVideo function shall
only consider the following as valid combinations:
1) \ not included and \ included.
Upon receiving a SIP request as specified above with the \
element set to a value of \"false\", the controlling MCVideo function shall
only consider the following as valid combinations:
1) \ not included and \ not included; or
2) \ not included and \ included.
Upon receiving a SIP request as specified above with the \
element included the controlling MCVideo function shall only consider the
request as valid if both the \ and \ are not
included.
If the combination of the \, \ or \ indicators is invalid, the controlling MCVideo function shall send a SIP
403 (Forbidden) response with the warning text set to \"150 invalid
combinations of data received in MIME body\" in a Warning header field as
specified in clause 4.4.
##### 6.3.3.1.17 Sending a SIP INFO request in the dialog of a SIP request for
a priority call
This clause is referenced from other procedures and describes how the
controlling MCVideo function generates a SIP INFO request due to the receipt
of a SIP request for a priority call.
The controlling MCVideo function:
1) shall generate a SIP INFO request according to rules and procedures of 3GPP
TS 24.229 [11] and IETF RFC 6086 [21];
2) shall include the Info-Package header field set to g.3gpp.mcvideo-info in
the SIP INFO request;
3) shall include an application/vnd.3gpp.mcvideo-info+xml MIME body in the SIP
INFO request and:
a) if the received SIP request contained application/vnd.3gpp.mcvideo-info+xml
MIME body with the \ element set to a value of \"true\" and this is
an unauthorised request for an MCVideo emergency alert as specified in clause
6.3.3.1.12.1, shall set the \ element to a value of \"true\"
and the \ element to a value of \"false\";
b) if the received SIP request contains an application/vnd.3gpp.mcvideo-
info+xml MIME body with the \ element set to a value of \"false\"
and if this is an unauthorised request for an MCVideo emergency alert
cancellation, shall set \ element to a value of \"true\"; and
c) if the received SIP request contains an application/vnd.3gpp.mcvideo-
info+xml MIME body with the \ element set to a value of
\"true\", this is an authorised request for an MCVideo imminent peril group
call and the in-progress emergency state of the group is set to a value of
\"true\", shall set the \ element to a value of \"false\"
and the \ element set to a value of \"true\"; and
4) shall send the SIP INFO request towards the inviting MCVideo client in the
dialog created by the SIP request from the inviting MCVideo client, as
specified in 3GPP TS 24.229 [11].
##### 6.3.3.1.18 Retrieving Resource-Priority header field values
This clause is referenced from other procedures.
When determining the Resource-Priority header field namespace and priority
values as specified in IETF RFC 8101 [38] for an MCVideo emergency group call
or MCVideo emergency private call the controlling MCVideo function:
1) shall retrieve the value of the \ element
contained in the \ element contained in the
\ element of the MCVideo service configuration document (see the
service configuration document in 3GPP TS 24.484 [25]); and
2) shall retrieve the value of the \ element
contained in the \ element contained in the
\ element of the MCVideo service configuration document (see the
service configuration document in 3GPP TS 24.484 [25]).
When determining the Resource-Priority header field namespace and priority
values as specified in IETF RFC 8101 [38] for an MCVideo imminent peril group
call the controlling MCVideo function:
1) shall retrieve the value of the \ element
contained in the \ element contained in the
\ element of the MCVideo service configuration document (see the
service configuration document in 3GPP TS 24.484 [25]); and
2) shall retrieve the value of the \ element
contained in the \ element contained in the
\ element of the MCVideo service configuration document (see the
service configuration document in 3GPP TS 24.484 [25])
When determining the Resource-Priority header field namespace and priority
values as specified in IETF RFC 8101 [38] for a normal MCVideo group or
private call the controlling MCVideo function:
1) shall retrieve the value of the \ element
contained in the \ element contained in the
\ element of the MCVideo service configuration document (see the
service configuration document in 3GPP TS 24.484 [25]); and
2) shall retrieve the value of the \ element
contained in the \ element contained in the
\ element of the MCVideo service configuration document (see the
service configuration document in 3GPP TS 24.484 [25]).
NOTE: The \"normal\" Resource-Priority header field value is needed to return
to a normal priority value from a priority value adjusted for an MCVideo
emergency group or private call or an MCVideo imminent peril group call. The
\"normal\" priority received from the EPS by use of the \"normal\" Resource-
Priority header field value is expected to be the same as the \"normal\"
priority received from the EPS when initiating a call with no Resource-
Priority header field included.
##### 6.3.3.1.19 Generating a SIP MESSAGE request to indicate successful
receipt of an emergency alert or emergency cancellation
This clause is referenced from other procedures.
This clause describes the procedures for generating a SIP MESSAGE request to
notify the originator of an emergency alert or emergency cancellation that the
request was successfully received.
The controlling MCVideo function:
1) shall generate a SIP MESSAGE request in accordance with 3GPP TS 24.229 [11]
and IETF RFC 3428 [17];
2) shall include an Accept-Contact header field containing the g.3gpp.mcvideo
media feature tag along with the \"require\" and \"explicit\" header field
parameters according to IETF RFC 3841 [20];
3) shall include an Accept-Contact header field with the media feature tag
g.3gpp.icsi-ref with the value of \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"
along with parameters \"require\" and \"explicit\" according to IETF RFC 3841
[20];
4) shall set the Request-URI to the address of the terminating participating
function associated with the MCVideo ID of the targeted MCVideo user;
5) shall include a P-Asserted-Identity header field set to the public service
identity of controlling MCVideo function; and
6) shall include an application/vnd.3gpp.mcvideo-info+xml MIME body with the
\ element containing the \ element with the
\ element set to the value of the MCVideo ID of the
targeted MCVideo user.
#### 6.3.3.2 Requests terminated by the controlling MCVideo function
##### 6.3.3.2.1 SDP answer generation
When composing the SDP answer according to 3GPP TS 24.229 [11], the
controlling MCVideo function:
1) for the accepted media stream in the received SDP offer:
a) shall replace the IP address and port number in the received SDP offer with
the IP address and port number of the controlling MCVideo function; and
2) for the accepted media-transmission control entity, if present in the
received SDP offer:
a) shall replace the IP address and port number in the received SDP offer with
the IP address and port number of the controlling MCVideo function, for the
accepted media-transmission control entity, if present in the received SDP
offer; and
b) shall include \'fmtp\' attributes as specified in 3GPP TS 24.581 clause 14.
##### 6.3.3.2.2 Receipt of a SIP INVITE request
On receipt of an initial SIP INVITE request the controlling MCVideo function
shall cache SIP feature tags, if received in the Contact header field and if
the specific feature tags are supported.
##### 6.3.3.2.3 Sending a SIP response to a SIP INVITE request
###### 6.3.3.2.3.1 Provisional response
When sending SIP provisional responses with the exception of the SIP 100
(Trying) response to the SIP INVITE request the controlling MCVideo function:
1) shall generate the SIP provisional response;
2) shall include a P-Asserted-Identity header field with the public service
identity of the controlling MCVideo function;
3) shall include an MCVideo session identity in the Contact header field; and
4) shall include the following in the Contact header field:
a) the g.3gpp.mcvideo media feature tag;
b) the g.3gpp.icsi-ref media feature tag containing the value of
\"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"; and
c) the isfocus media feature tag.
###### 6.3.3.2.3.2 Final response
When sending a SIP 200 (OK) response to the initial SIP INVITE request, the
controlling MCVideo function:
1) shall generate the SIP 200 (OK) response according to rules and procedures
of 3GPP TS 24.229 [11];
2) shall include the Session-Expires header field and start supervising the
SIP session according to rules and procedures of IETF RFC 4028 [23], \"UAS
Behavior\". The \"refresher\" parameter in the Session-Expires header field
shall be set to \"uac\";
3) shall include the option tag \"timer\" in a Require header field;
4) shall include a P-Asserted-Identity header field with the public service
identity of the controlling MCVideo function;
5) shall include a SIP URI for the MCVideo session identity in the Contact
header field identifying the MCVideo session at the controlling MCVideo
function;
6) shall include the following in the Contact header field:
a) the g.3gpp.mcvideo media feature tag;
b) the g.3gpp.icsi-ref media feature tag containing the value of
\"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"; and
c) the isfocus media feature tag;
7) shall include Warning header field(s) received in incoming responses to the
SIP INVITE request;
8) shall include the option tag \"tdialog\" in a Supported header field
according to rules and procedures of IETF RFC 4538 [32];
9) shall include the \"norefersub\" option tag in a Supported header field
according to IETF RFC 4488 [31];
10) shall include the \"explicitsub\" and \"nosub\" option tags in a Supported
header field according to IETF RFC 7614 [64];
11) if:
a) an MCVideo GKTP document exists for the group identity contained in the
\ element in the application/vnd.3gpp.mcvideo-info+xml
MIME body of the initial SIP INVITE request; and
b) the MCVideo GKTP document contains an \ element;
then:
a) for each instance of \ element of the \ element of the
MCVideo GKTP document:
i) shall perform the procedure in clause 6.3.3.6.2 to re-generate an
I_MESSAGE; and
ii) if the procedure in clause 6.3.3.6.2 was successful, shall include the
I_MESSAGE in a \ element of the \ element of an
application/vnd.3gpp.mcvideo-info+xml MIME body included in a SIP 200 (OK)
response; and
12) shall interact with the media plane as specified in 3GPP TS 24.581 [5].
##### 6.3.3.2.4 Receiving a SIP BYE request
Upon receiving a SIP BYE request the controlling MCVideo function:
1) shall interact with the media plane as specified in clause 6.3 in 3GPP TS
24.581 [5] for releasing the media plane resource associated with the SIP
session towards the MCVideo client;
NOTE: The non-controlling MCVideo function is also regarded as a MCVideo
client in a temporary MCVideo group session.
2) shall generate a SIP 200 (OK) response and send the SIP response towards
the MCVideo client according to 3GPP TS 24.229 [11];
3) shall check the MCVideo session release policy as specified in clause
6.3.8.1 and clause 6.3.8.2 whether the MCVideo session needs to be released
for each participant of the MCVideo session;
4) if release of the MCVideo session is required:
a) shall perform the procedures as specified in the clause 6.3.3.1.4 with the
clarification that if the received SIP BYE request contains an
application/vnd.3gpp.mcvideo-info+xml MIME body, copy the
application/vnd.3gpp.mcvideo-info+xml MIME body into the outgoing SIP BYE
request; and
5) if a release of the MCVideo session is not required, shall send a SIP
NOTIFY request to all remaining MCVideo clients in the MCVideo session with a
subscription to the conference event package as specified in clause 9.2.3.4.2.
Upon receiving a SIP 200 (OK) response to the SIP BYE request the controlling
MCVideo function shall interact with the media plane as specified in clause
6.3 in 3GPP TS 24.581 [5] for releasing media plane resources associated with
the SIP session with the MCVideo participant.
#### 6.3.3.3 Handling of the acknowledged call setup timer (TNG1)
When the controlling MCVideo function receives a SIP INVITE request to
initiate a group session and there are members of the group document retrieved
from the group management server that are affiliated and are marked as \ as specified in 3GPP TS 24.481 [24], then the controlling
MCVideo function shall start timer TNG1 (acknowledged call setup timer) with a
timer value as described in Annex B.2.1, prior to sending out SIP INVITE
requests inviting group members to the group session.
When the controlling MCVideo function receives all SIP 200 (OK) responses to
the SIP INVITE requests, from all affiliated and \
members then the controlling MCVideo function shall stop timer TNG1
(acknowledged call setup timer) and if the local counter of the number of SIP
200 (OK) responses received from invited members is greater than or equal to
the value of the \ element of the group
document, the controlling MCVideo function shall send a SIP 200 (OK) response
to the initiating MCVideo client.
NOTE 1: MCVideo clients that are affiliated but are not \
members that have not yet responded will be considered as joining an ongoing
session when the controlling MCVideo function receives SIP 200 (OK) responses
from these MCVideo clients.
After expiry of timer TNG1 (acknowledged call setup timer) and the local
counter of the number of SIP 200 (OK) responses received from invited members
is less than the value of the \ element of
the group document, then the controlling MCVideo function shall wait until
further responses have been received from invited clients and the value of the
local counter of the number of SIP 200 (OK) responses received from invited
members is equal to the \, before
continuing with the timer TNG1 expiry procedures in this clause.
After expiry of timer TNG1 (acknowledged call setup timer) and the local
counter of the number of SIP 200 (OK) responses received from invited members
is greater or equal to the value of the \
element of the group document, the controlling MCVideo function shall execute
the steps described below:
1) if the \ element configured in the group document for the action
on expiry of the timer is set to \"proceed\" indicating that the controlling
MCVideo function should proceed with the setup of the group call, then the
controlling MCVideo function:
a) shall perform the following actions:
i) generate a SIP 200 (OK) response to the SIP INVITE request as specified in
the clause 6.3.3.2.2 before continuing with the rest of the steps;
ii) include in the SIP 200 (OK) response the warning text set to \"111 group
call proceeded without all required group members\" in a Warning header field
as specified in clause 4.4;
iii) include in the SIP 200 (OK) response an SDP answer to the SDP offer in
the incoming SIP INVITE request as specified in the clause 6.3.3.2.1;
iv) interact with the media plane as specified in 3GPP TS 24.581 [5]; and
NOTE 2: Resulting media plane processing is completed before the next step is
performed.
v) send a SIP 200 (OK) response to the inviting MCVideo client according to
3GPP TS 24.229 [11];
b) when a SIP 200 (OK) response to a SIP INVITE request is received from an
invited MCVideo client the controlling MCVideo function may send an in-dialog
SIP MESSAGE request to the MCVideo client that originated the group session
with the text \"group call proceeded without all required group members\";
c) when the controlling MCVideo function receives a SIP BYE request from an
invited MCVideo client, shall take the actions specified in clause 6.3.3.2.4
and may send an in-dialog SIP MESSAGE request to the MCVideo client that
originated the group session with the text \"group call proceeded without all
required group members\"; and
d) shall generate a notification package as specified in clause 6.3.3.4 and
send a SIP NOTIFY request according to 3GPP TS 24.229 [11] to the MCVideo
clients which have subscribed to the conference state event; and
2) if the \ element configured in the group document for the action
on expiry of the timer is set to \"abandon\" indicating that the controlling
MCVideo function should abandon the setup of the group call, then the
controlling MCVideo function shall:
a) send a SIP 480 (Temporarily Unavailable) response to the MCVideo client
that originated the group session with the warning text set to \"112 group
call abandoned due to required group members not part of the group session\"
in a Warning header field as specified in clause 4.4;
b) for each confirmed dialog at the controlling MCVideo function, send a SIP
BYE request towards the MCVideo clients invited to the group session in
accordance with 3GPP TS 24.229 [11] and interact with the media plane as
specified in 3GPP TS 24.581 [5]; and
c) for each non-confirmed dialog at the controlling MCVideo function, send a
SIP CANCEL request towards the MCVideo clients invited to the group session in
accordance with 3GPP TS 24.229 [11].
If the controlling MCVideo function receives a final SIP 4xx, 5xx or 6xx
response from an affiliated and \ group member prior to
expiry of timer TNG1 (acknowledged call setup timer) and based on policy, the
controlling MCVideo function decides not to continue with the establishment of
the group call without the affiliated and \ group member,
then the controlling MCVideo function:
NOTE 3: It is expected that this action is taken if the policy is to abandon
the call on expiry of timer TNG1 (acknowledged call setup timer).
1) shall stop timer TNG1 (acknowledged call setup timer); and
2) shall forward the final SIP 4xx, 5xx or 6xx response towards the inviting
MCVideo client with the warning text set to \"112 group call abandoned due to
required group member not part of the group session\" in a Warning header
field as specified in clause 4.4.
If:
1) the controlling MCVideo function receives a final SIP 4xx, 5xx or 6xx
response from an affiliated and \ group member prior to
expiry of timer TNG1 (acknowledged call setup timer);
2) the local counter of the number of SIP 200 (OK) responses received from
invited members is greater than or equal to the value of the \ element of the group document; and
3) based on policy, the controlling MCVideo function decides to continue with
the establishment of the group call without the affiliated and \ group member;
then the controlling MCVideo function:
NOTE 4: It is expected that this action is taken if the policy is to proceed
with the call on expiry of timer TNG1 (acknowledged call setup timer).
1) if all other invited clients have not yet responded, shall continue running
timer TNG1 (acknowledged call setup timer); and
2) if all other invited clients have responded with SIP 200 (OK) responses,
shall
a) stop timer TNG1 (acknowledged call setup timer);
b) generate SIP 200 (OK) response to the SIP INVITE request as specified in
the clause 6.3.3.2.2 before continuing with the rest of the steps;
c) include in the SIP 200 (OK) response the warning text set to \"111 group
call proceeded without all required group members\" in a Warning header field
as specified in clause 4.4;
d) include in the SIP 200 (OK) response an SDP answer to the SDP offer in the
incoming SIP INVITE request as specified in the clause 6.3.3.2.1;
e) interact with the media plane as specified in 3GPP TS 24.581 [5]; and
NOTE 5: Resulting media plane processing is completed before the next step is
performed.
f) send a SIP 200 (OK) response to the inviting MCVideo client according to
3GPP TS 24.229 [11].
#### 6.3.3.4 Generating a SIP NOTIFY request
The controlling MCVideo function shall generate a SIP NOTIFY request according
to 3GPP TS 24.229 [11] with the clarification in this clause.
In the SIP NOTIFY request, the controlling MCVideo function:
1) shall set the P-Asserted-Identity header field to the public service
identity of the controlling MCVideo function;
2) shall include an Event header field set to the \"conference\" event
package;
3) shall include an Expires header field set to 3600 seconds according to IETF
RFC 4575 [57], as default value;
4) shall include the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"
(coded as specified in 3GPP TS 24.229 [11]), in a P-Preferred-Service header
field according to IETF RFC 6050 [14]; and
5) shall include an application/vnd.3gpp.mcvideo-info+xml MIME body with the
\ element containing the \ element with:
a) the \ set to the value of the MCVideo group ID;
b) if the target is a MCVideo user, the value of \
element set to the value of MCVideo ID of the targeted MCVideo user; and
c) if the target is the non-controlling MCVideo function, the value of
\ element set to the constituent MCVideo group ID.
In the SIP NOTIFY request, the controlling MCVideo function shall include an
application/conference-info+xml MIME body according to IETF RFC 4575 [57] with
the following limitations:
1) the controlling MCVideo function shall include the MCVideo group ID of the
MCVideo group in the \"entity\" attribute of the \ element;
2) for each participant in the MCVideo session with the exception of non-
controlling MCVideo functions, the controlling MCVideo function shall include
a \ element. The \ element shall:
NOTE: Non-controlling MCVideo functions will appear as a participant in
temporary group sessions.
a) include the \"entity\" attribute. The \"entity\" attribute:
i) shall for the MCVideo client, which initiated, joined or re-joined an
MCVideo session, include the MCVideo ID of the MCVideo user which originates
SIP INVITE request; and
ii) shall for an invited MCVideo client include the MCVideo ID of the invited
MCVideo user in case of a prearranged group call or chat group call;
b) shall include a single \ element. The \ element:
i) shall include the \"entity\" attribute; and
ii) shall include the \ element indicating the status of the MCVideo
session according to RFC 4575; and
c) may include \ element.
NOTE: The usage of \ is only applicable for human consumption.
#### 6.3.3.5 Handling of the group call timer (TNG3)
##### 6.3.3.5.1 General
When the controlling MCVideo function receives a SIP INVITE request to
initiate a group session, then after an MCVideo session identity has been
allocated for the group session and if the \
element is present in the group document as specified in 3GPP TS 24.481 [24],
the controlling MCVideo function: shall start timer TNG3 (group call timer)
with the value obtained from the \ element of the
group document as specified in 3GPP TS 24.481 [24].
If the \ element is not present in the group
document as specified in 3GPP TS 24.481 [24], then the controlling MCVideo
function shall not start timer TNG3 (group call timer).
NOTE 1: The configuration of \ element in 3GPP TS
24.481 [24] is mandated for a pre-arranged group and is optional for a chat
group.
When merging two or more active group calls into a temporary group call, the
controlling MCVideo function(s) hosting the active group calls shall stop
timer TNG3 (group call timer) for each group call, and the controlling MCVideo
function hosting the temporary group call shall start timer TNG3 (group call
timer) for the temporary group call.
NOTE 2: If the MCVideo server(s) hosting the independent active group calls
are different to the MCVideo server that will host the temporary group call,
then the MCVideo server(s) hosting the independent active group calls become
non-controlling MCVideo function(s) of an MCVideo group, for the temporary
group call.
When splitting a temporary group call into independent group calls, the
controlling MCVideo function hosting the temporary group call shall stop timer
TNG3 (group call timer) and the controlling MCVideo function(s) hosting the
independent group calls shall start TNG3 (group call timer) for each group
call.
When the last MCVideo client leaves the MCVideo session, the controlling
MCVideo function shall stop timer TNG3 (group call timer).
On expiry of timer (group call timer), the controlling MCVideo function shall
release the MCVideo session by following the procedures in clause 6.3.3.1.4;
##### 6.3.3.5.2 Interaction with the in-progress emergency group call timer
(TNG2)
If the controlling MCVideo function starts timer TNG2 (in-progress emergency
group call timer), it shall not start timer TNG3 (group call timer).
If timer TNG3 (group call timer) is running and the MCVideo group call is
upgraded to an MCVideo emergency group call, then the controlling MCVideo
function shall stop timer TNG3 (group call timer) and shall start timer TNG2
(in-progress emergency group call timer) with the value obtained from the
\ element of the \ element of the \ element of the service configuration document as specified in 3GPP TS
24.484 [25].If timer TNG2 (in-progress emergency group call timer) is running
and the MCVideo emergency group call is cancelled, then the controlling
MCVideo function shall stop timer TNG2 (in-progress emergency group call
timer) and shall start timer TNG3 (group call timer) with the value obtained
from the \ element of the group document as
specified in 3GPP TS 24.481 [24].
If timer TNG2 (in-progress emergency group call timer) is running and
subsequently expires, then the controlling MCVideo function shall start timer
TNG3 (group call timer) with the value obtained from the \ element of the group document as specified in 3GPP TS 24.481 [24].
NOTE: The above conditions for starting timer TNG2 (in-progress emergency
group call timer) and timer TNG3 (group call timer) also apply in the case
that these timers are re-started. For example: the case where the timer TNG3
was initially running, the MCVideo group call is upgraded to an MCVideo
emergency group call and then the MCVideo emergency group call is cancelled.
#### 6.3.3.6 Generation of I_MESSAGEs containing MKFC and MKFC-ID
##### 6.3.3.6.1 General
This procedures in this clause are executed by the controlling MCVideo
function as a result of receiving SIP INVITE requests targeted to a group
identity, where the controlling MCVideo function has subscribed to the MCVideo
group key transport payloads (GKTP) document as specified in 3GPP TS 24.481
[24] for the group identity and the controlling MCVideo function has been
notified of the GKTP document for the group identity containing a \ element.
The \ element contains one or more \ elements where each
\ element represents an I_MESSAGE(s) containing an MKFC and MKFC-ID, as
specified in 3GPP TS 24.481 [24].
##### 6.3.3.6.2 Creation of an I_MESSAGE containing MKFC
The controlling MCVideo function:
1) shall extract the GMS URI from the initiator field (IDRi) of the I_MESSAGE
and use it together with the timer related parameter to check the signature of
the I_MESSAGE as described in 3GPP TS 33.180 [8];
2) if the signature is not valid, shall exit this procedure. Otherwise shall
validate that the contents of the recipient field (IDRr) of the I_MESSAGE to
ensure it matches to the URI of the controlling MCVideo function;
3) if the contents of the IDRr do not match to the controlling MCVideo
function URI, shall exit this procedure. Otherwise, shall use the contents of
the IDRr to decrypt the I_MESSAGE and extract the MKFC and MKFC-ID;
4) shall re-generate the I_MESSAGE containing a common header payload, a
timestamp payload, an IDRi payload, an IDRr payload, an IDRkmsi payload, an
IDRkmsr payload, a SAKKE payload, a SIGN payload, a security policy payload
and a general extension payload containing the MKFC and MKFC-ID, as specified
in the group key transport payload structure in clause 7.4.2 in 3GPP TS 24.481
[24], but with the following clarifications:
NOTE: The MKFC is treated as a GMK for transport, using the security
procedures defined in clause 7.3.1 of 3GPP TS 33.180 [8] and the encapsulation
procedures of Annex E.2 of 3GPP TS 33.180 [8].
a) the IDRi payload (or ID payload with ID role field set to the \'IDRuidi\')
contains the URI of the controlling MCVideo function;
b) if the I_MESSAGE is to be sent to the participating MCVideo function, the
IDRr payload (or ID payload with ID role fields set to \'IDRuidr\') contains
the URI of the participating MCVideo function;
c) if the I_MESSAGE is to be sent to the non-controlling MCVideo function, the
IDRr payload (or ID payload with ID role fields set to \'IDRuidr\') contains
the URI of the non-controlling MCVideo function;
d) the ID data field of the IDRkmsi payload is set to the URI of the MCVideo
KMS used by the controlling MCVideo function;
e) if the I_MESSAGE is to be sent to the participating MCVideo function, then
the ID data field of the IDRkmsr is set to URI of the MCVideo KMS used by the
participating MCVideo function; and
f) if the I_MESSAGE is to be sent to the non-controlling MCVideo function,
then the ID data field of the IDRkmsr is set to URI of the MCVideo KMS used by
the participating MCVideo function;
5) shall sign the I_MESSAGE using the controlling MCVideo function URI;
6) if the I_MESSAGE is to be sent to the participating MCVideo function, shall
encrypt the I_MESSAGE using the participating MCVideo function URI; and
7) if the I_MESSAGE is to be sent to the non-controlling MCVideo function,
shall encrypt the I_MESSAGE using the non-controlling MCVideo function URI.
### 6.3.4 Non-controlling MCVideo function of an MCVideo group
#### 6.3.4.1 Request initiated by the non-controlling MCVideo function of an
MCVideo group
##### 6.3.4.1.1 SDP offer generation
The SDP offer is generated based on the received SDP offer. The SDP offer
generated by the non-controlling MCVideo function of an MCVideo group:
1) shall include only one SDP media-level section for the MCVideo video media
stream according to 3GPP TS 24.229 [11], as contained in the received SDP
offer;
2) shall include only one SDP media-level section for the MCVideo audio media
stream according to 3GPP TS 24.229 [11], as contained in the received SDP
offer; and
3) shall contain one SDP media-level section for a media transmission control
entity according to 3GPP TS 24.229 [11], if present in the received SDP offer.
When composing the SDP offer according to 3GPP TS 24.229 [4], the non-
controlling MCVideo function of an MCVideo group:
1) shall replace the IP address and port number for the offered audio media
stream in the \"m=audio\" media-level section with an IP address and port
number of the non-controlling MCVideo function;
2) for the MCVideo audio media stream, shall include all media-level
attributes from the received SDP offer;
3) shall replace the IP address and port number for the offered video media
stream in the \"m=video\" media-level section with an IP address and port
number of the non-controlling MCVideo function;
4) for the MCVideo video media stream, shall include all media-level
attributes from the received SDP offer;
5) shall replace the IP address and port number for the offered media
transmission control entity, if any, in the received SDP offer with an IP
address and port number of the non-controlling MCVideo function; and
6) shall include the offered media transmission control entity \'fmtp\'
attributes as specified in 3GPP TS 24.581 [5].
##### 6.3.4.1.2 Sending an INVITE request towards the MCVideo client
This clause is referenced from other procedures.
The non-controlling MCVideo function of an MCVideo group shall generate
initial SIP INVITE requests according to 3GPP TS 24.229 [11].
For each SIP INVITE request, the non-controlling MCVideo function of an
MCVideo group:
1) shall generate a new MCVideo session identity for the MCVideo session with
the invited MCVideo client and include it in the Contact header field together
with the g.3gpp.mcvideo media feature tag, the g.3gpp.icsi-ref media feature
tag with the value of \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\", and the
isfocus media feature tag according to IETF RFC 3840 [22];
2) shall include an Accept-Contact header field containing the g.3gpp.mcvideo
media feature tag along with the \"require\" and \"explicit\" header field
parameters according to IETF RFC 3841 [20];
3) shall include the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"
(coded as specified in 3GPP TS 24.229 [11]), in a P-Asserted-Service-Id header
field according to IETF RFC 6050 [14] in the SIP INVITE request;
4) shall include an Accept-Contact header field with the media feature tag
g.3gpp.icsi-ref with the value of \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"
along with parameters \"require\" and \"explicit\" according to IETF RFC 3841
[20];
5) shall set the Request-URI to the public service identity of the terminating
participating MCVideo function associated to the MCVideo ID of the MCVideo
user to be invited;
NOTE 1: How the non-controlling MCVideo function finds the address of the
terminating participating MCVideo function is out of the scope of the current
release.
NOTE 2: If the terminating MCVideo user is part of a partner MCVideo system,
then the public service identity can identify an entry point in the partner
network that is able to identify the terminating participating MCVideo
function.
6) shall copy the application/vnd.3gpp.mcvideo-info+xml MIME body in the
received SIP INVITE request to the outgoing SIP INVITE request;
7) shall update the application/vnd.3gpp.mcvideo-info+xml MIME body with: an
\ element set to the MCVideo ID of the invited MCVideo
user;
8) shall include the public service identity of the non-controlling MCVideo
function in the P-Asserted-Identity header field;
9) shall include the received Referred-By header field with the public user
identity of the inviting MCVideo client;
10) should include the Session-Expires header field according to rules and
procedures of IETF RFC 4028 [23]. The refresher parameter shall be omitted;
11) shall include the Supported header field set to \"timer\";
12) shall include an unmodified Answer-Mode header field, if present in the
incoming SIP INVITE request; and
13) shall include the warning text set to \"148 group is regrouped\" in a
Warning header field as specified in clause 4.4.
NOTE 3: As long as the MCVideo group is regrouped the transmission control
messages in the media plane include a grouped regrouped indication as
specified in 3GPP TS 24.581 [5].
##### 6.3.4.1.3 Sending a SIP INFO request
This clause is referenced from other procedures.
The non-controlling MCVideo function shall generate a SIP INFO request
according to rules and procedures of 3GPP TS 24.229 [11] and IETF RFC 6086
[54].
The non-controlling MCVideo function:
1) shall include the Info-Package header field set to \"g.3gpp.mcvideo-
transmission-request\";
2) shall include an application/vnd.3gpp.mcvideo-info+xml MIME body with the
\ set to the temporary MCVideo group ID and the
\ element with the constituent MCVideo group ID;
3) shall include an application/vnd.3gpp.mcvideo-transmission-request+xml MIME
body with the Content-Disposition header field set to \"Info-Package\". For
each currently transmitting MCVideo client the application/vnd.3gpp.mcvideo-
transmission-request+xml MIME body shall be populated as follows:
a) the SSRC of the MCVideo client with the permission to send media in the
\ element;
b) the actual transmission priority in the \ element;
c) the MCVideo ID of the MCVideo user with the permission to send media in the
\ element;
d) the queueing capability in the \ element of the
\ element;
e) the participant type in the \ in the \
element;
f) one or more \ elements in the \ element in the same order as the would appear in the Track Info field as
specified in 3GPP TS 24.581 [5] clause 9.2.3.13; and
g) if available, additional information in the \
element.
##### 6.3.4.1.4 Sending an INVITE request towards the controlling MCVideo
function
This clause is referenced from other procedures.
The non-controlling MCVideo function shall generate a SIP INVITE request
according to rules and procedures of 3GPP TS 24.229 [11].
The non-controlling MCVideo function:
1) shall include in the Contact header field the g.3gpp.mcvideo media feature
tag, the g.3gpp.icsi-ref media feature tag with the value of \"urn:urn-7:3gpp-
service.ims.icsi.mcvideo\", and the isfocus media feature tag according to
IETF RFC 3840 [22];
2) shall include the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.MCVideo\"
(coded as specified in 3GPP TS 24.229 [11]), in a P-Asserted-Service-Id header
field according to IETF RFC 6050 [14] in the SIP INVITE request;
3) shall set the Request-URI to the public service identity of the controlling
MCVideo function based on the \ element received in the
\"SIP INVITE request for controlling MCVideo function of an MCVideo group\";
NOTE 1: How the non-controlling MCVideo function finds the address of the
controlling MCVideo function is out of the scope of the current release.
NOTE 2: If the terminating MCVideo user is part of a partner MCVideo system,
then the public service identity can identify an entry point in the partner
network that is able to identify the terminating participating MCVideo
function.
4) shall include an application/vnd.3gpp.mcvideo-info+xml MIME body with:
a) the \ element set to \"prearranged\";
NOTE 3: The \ element is set to \"prearranged\" regardless of
which type of group the constituent MCVideo group is.
b) the \ element set to the TGI retrieved from the \ element in the group document;
c) the \ element set to the constituent MCVideo group
ID; and
d the \ element set to \"true\", if the group document retrieved
from the group management server contains \ group members
as specified in 3GPP TS 24.481 [24];
5) shall include the public service identity of the non-controlling MCVideo
function in the P-Asserted-Identity header field;
6) should include the Session-Expires header field according to rules and
procedures of IETF RFC 4028 [23]. The refresher parameter shall be omitted;
and
7) shall include the Supported header field set to \"timer\".
#### 6.3.4.2 Requests terminated by the non-controlling MCVideo function of an
MCVideo group
##### 6.3.4.2.1 SDP answer generation
When composing the SDP answer according to 3GPP TS 24.229 [4], the non-
controlling MCVideo function of an MCVideo group:
1) for the accepted audio media stream in the received SDP offer:
a) shall set the IP address and port number to the IP address and port number
of the non-controlling MCVideo function;
2) for the accepted video media stream in the received SDP offer:
a) shall set the IP address and port number to the IP address and port number
of the non-controlling MCVideo function; and
3) for the accepted media transmission control entity, if present in the
received SDP offer:
a) shall set the IP address and port number to the IP address and port number
of the non-controlling MCVideo function; and
b) shall include \'fmtp\' attributes as specified in 3GPP TS 24.581 [5].
##### 6.3.4.2.2 Sending a SIP response to the SIP INVITE request
###### 6.3.4.2.2.1 Sending a SIP 183 (Session Progress) response
When sending a SIP 183 (Session Progress) the non-controlling MCVideo function
of an MCVideo group:
1) shall generate a SIP 183 (Session Progress) response according to 3GPP TS
24.229 [11];
2) shall include the following in the Contact header field:
a) the g.3gpp.mcvideo media feature tag; and
b) the g.3gpp.icsi-ref media feature tag containing the value of
\"urn:urn-7:3gpp-service.ims.icsi.mcvideo\";
3) shall include the public service identity of the non-controlling MCVideo
function in the P-Asserted-Identity header field; and
4) shall include the option tag \"tdialog\" in a Supported header field
according to rules and procedures of IETF RFC 4538 [32];
###### 6.3.4.2.2.2 Sending a SIP 200 (OK) response
When sending a SIP 200 (OK) response, the non-controlling MCVideo function of
an MCVideo group:
1) shall generate the SIP 200 (OK) response according to rules and procedures
of 3GPP TS 24.229 [11];
2) shall include the Session-Expires header field and start supervising the
SIP session according to rules and procedures of IETF RFC 4028 [23], \"UAS
Behavior\". The \"refresher\" parameter in the Session-Expires header field
shall be set to \"uac\";
3) shall include the option tag \"timer\" in a Require header field;
4) shall include the public service identity of the non-controlling MCVideo
function in the P-Asserted-Identity header field;
5) shall include a SIP URI for the MCVideo session identity in the Contact
header field identifying the MCVideo session at the non-controlling MCVideo
function;
6) shall include the following in the Contact header field:
a) the g.3gpp.mcvideo media feature tag; and
b) the g.3gpp.icsi-ref media feature tag containing the value of
\"urn:urn-7:3gpp-service.ims.icsi.mcvideo\";
7) shall include Warning header field(s) received in incoming responses to the
SIP INVITE request;
8) shall include the option tag \"tdialog\" in a Supported header field
according to rules and procedures of IETF RFC 4538 [32];
9) shall include an application/vnd.3gpp.mcvideo-info+xml MIME body with the
\ element set to the constituent MCVideo group ID and
the \ element set to the state of the transmission; and
10) shall interact with the media plane as specified in 3GPP TS 24.581 [5].
#### 6.3.4.3 Generating a SIP NOTIFY request
The non-controlling MCVideo function shall generate a SIP NOTIFY request
according to 3GPP TS 24.229 [11] with the clarification in this clause.
In the SIP NOTIFY request, the non-controlling MCVideo function:
1) shall set the P-Asserted-Identity header field to the public service
identity of the non-controlling MCVideo function;
2) shall include an Event header field set to \"conference\";
3) shall include an Expires header field set to 3600 seconds according to IETF
RFC 4575 [57], as default value;
4) shall include the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"
(coded as specified in 3GPP TS 24.229 [11]), in a P-Preferred-Service header
field according to IETF RFC 6050 [14]; and
5) shall include an application/vnd.3gpp.mcvideo-info+xml MIME body with the
\ element containing the \ element with:
a) the \ set to the value of the constituent MCVideo
group ID;
b) if the target is an MCVideo user, the value of \
element set to the MCVideo ID of the targeted MCVideo user; and
c) if the target is the controlling MCVideo function the value of \ element set to the temporary MCVideo group ID.
In the SIP NOTIFY request, the non-controlling MCVideo function shall include
application/conference-info+xml MIME body according to IETF RFC 4575 [57] as
specified in clause 6.3.3.4 with the following exceptions:
1) the non-controlling MCVideo function shall not regard the controlling
MCVideo function as a participant and not include the controlling MCVideo
function in a \ element; and
NOTE: The controlling MCVideo function initiated the temporary group call and
will appear as a participant in the group session.
2) the non-controlling MCVideo function shall include stored conference status
information received in SIP NOTIFY requests from the controlling MCVideo
function in clause 9.2.3.5.3 and status information about own participants.
### 6.3.5 Retrieving and processing a group document
#### 6.3.5.1 General
This clause describes how an MCVideo server accesses a group document from a
group management server. The MCVideo server which accesses a group document
performs the role of a controlling MCVideo function or performs the role of a
non-controlling MCVideo function of an MCVideo group when accessing a group
document. In such cases, for a group call:
\- the controlling MCVideo function and group management server are both
located in the primary MCVideo system;
\- the controlling MCVideo function and group management server are both
located in a partner MCVideo system;
\- the controlling MCVideo function is located in the primary MCVideo system
and accesses a group management server in the primary MCVideo system and a
non-controlling MCVideo function of an MCVideo group is located in a partner
MCVideo system and accesses a group management server in the partner MCVideo
system; or
\- the controlling MCVideo function and non-controlling MCVideo function(s) of
an MCVideo group are located in the primary MCVideo system and access group
management servers in the primary MCVideo system.
When the MCVideo server receives a SIP INVITE request that requires it to
access a group document, it uses an MCVideo group ID or a temporary MCVideo
group identity (TGI) which was created by the group regrouping operation as
specified in 3GPP TS 24.481 [24].
The MCVideo server can cache the group document associated with an MCVideo
group or temporary group, and can subscribe to be notified of changes to the
group document associated with an MCVideo group or temporary group as
specified in 3GPP TS 24.481 [24].
NOTE 1: During the group regrouping operation as specified in 3GPP TS 24.481
[24], the controlling MCVideo function is notified of the constituent MCVideo
group identities associated with the TGI.
If the group data associated with an MCVideo group ID or TGI cached in the
MCVideo server is removed, the MCVideo server re-subscribes for changes in the
group information associated with the MCVideo group ID or TGI.
NOTE 2: Re-subscription can occur prior to the receipt of an SIP INVITE
request containing an MCVideo group ID or TGI of a group document which is no
longer cached on the MCVideo server.
#### 6.3.5.2 Rules for retrieving Group Document(s)
NOTE 1: In this clause, \"MCVideo server\" can refer to either the controlling
MCVideo function of an MCVideo group or the non-controlling MCVideo function
of an MCVideo group.
Upon receipt of a SIP INVITE request:
1) if the MCVideo server is not yet subscribed to the group document for the
group identity in the \ element of the
application/vnd.3gpp.mcvideo-info+xml MIME body of the SIP INVITE request, the
MCVideo server shall subscribe to the \"xcap-diff\" event-package for the
group document of this group identity as specified in 3GPP TS 24.481 [24];
NOTE 2: The group identity in the \ element is either an
MCVideo group ID or a temporary MCVideo group identity (TGI).
NOTE 3: As a group document can potentially have a large content, the
controlling MCVideo function of an MCVideo group can subscribe to the group
document indicating support of content-indirection as defined in IETF RFC 4483
[29], by following the procedures in 3GPP TS 24.481 [24].
2) upon receipt of a SIP 404 (Not Found) response as a result of attempting to
subscribe to the \"xcap-diff\" event-package for the group document of the
group identity in the \ element of the
application/vnd.3gpp.mcvideo-info+xml MIME body of the SIP INVITE request as
specified in 3GPP TS 24.481 [24], the MCVideo server shall send the SIP 404
(Not Found) response with the warning text set to \"113 group document does
not exist\" in a Warning header field as specified in clause 4.4. Otherwise,
continue with the rest of the steps;
3) upon receipt of any other SIP 4xx, SIP 5xx or SIP 6xx response as a result
of attempting to subscribe to the \"xcap-diff\" event-package for the group
document of the group identity in the \ element of the
application/vnd.3gpp.mcvideo-info+xml MIME body of the SIP INVITE request as
specified in 3GPP TS 24.481 [24], the MCVideo server shall send the SIP final
response with the warning text set to \"114 unable to retrieve group
document\" in a Warning header field as specified in clause 4.4 and shall not
continue with the rest of the steps;
4) upon receipt of a notification from the group management server containing
the group document for the group identity in the \
element of the application/vnd.3gpp.mcvideo-info MIME body of the SIP INVITE
request, or if the group document is already cached:
a) if the MCVideo server is a non-controlling function of an MCVideo group,
then the MCVideo server shall exit this clause; and
b) if the MCVideo server is a controlling function of an MCVideo group, then
the MCVideo server shall determine if the group document is for a TGI or an
MCVideo group ID as follows:
i) if the group document includes an \ element, then the
group document is associated with a TGI;
ii) if the group document does not include an \ element
or an \ element, then the group document is associated
with an MCVideo ID that has not been regrouped; and
iii) if the group document does not include an \ element
but includes an \ element, then the group document is
associated with an MCVideo ID that has been regrouped;
5) if the SIP INVITE request is a \"SIP INVITE request for controlling
function of an MCVideo group\" and the group identity in the \ element of the application/vnd.3gpp.mcvideo-info+xml MIME body of
the SIP-INVITE request is an MCVideo group ID that has not been re-grouped,
the MCVideo server shall access the following elements from the group document
as specified in 3GPP TS 24.481 [24]:
a) if the \ element is present in the group document,
shall send a SIP 403 (Forbidden) response with the warning text set to \"115
group is disabled\" in a Warning header field as specified in clause 4.4 and
shall not continue with the rest of the steps;
b) if the \ element of the \ element does not contain an
entry matching the MCVideo ID of the user in the SIP INVITE request, shall
send a SIP 403 (Forbidden) response with the warning text set to \"116 user is
not part of the MCVideo group\" in a Warning header field as specified in
clause 4.4 and shall not continue with the rest of the steps;
c) if the \ element is set to \"true\" and if the
SIP INVITE request contains an application/vnd.3gpp.mcvideo-info+xml MIME body
with the \ element containing a value not set to
\"prearranged\", shall return a SIP 404 (Not Found) response with the warning
text set to \"117 the group identity indicated in the request is a prearranged
group\" as specified in clause 4.4 \"Warning header field\" and shall not
continue with the rest of the steps; and
d) if the \ element is set to \"false\" and if the
SIP INVITE request contains an application/vnd.3gpp.mcvideo-info+xml MIME body
with the \ element containing a value not set to \"chat\" shall
return a SIP 404 (Not Found) response with the warning text set to \"118 the
group identity indicated in the request is a chat group\" as specified in
clause 4.4 \"Warning header field\" and shall not continue with the rest of
the steps;
6) if the SIP INVITE request is a \"SIP INVITE request for controlling
function of an MCVideo group\" and the group document for the group identity
in the \ element of the application/vnd.3gpp.mcvideo-info
MIME body of the SIP INVITE request is associated with an MCVideo group ID
that has been regrouped, the MCVideo server:
a) shall obtain the TGI associated with the regrouped group, by accessing the
\"temporary-MCVideo-group-ID\" attribute of the \ element of the
group document associated with the MCVideo ID in the \
element of the application/vnd.3gpp.mcvideo-info MIME body of the SIP INVITE
request;
b) if not hosting the TGI, shall:
i) stop processing the SIP INVITE request; and
ii) return a SIP 302 (Moved Temporarily) response with:
A) a Contact header field set to the PSI of the MCVideo server hosting the
TGI; and
B) an application/vnd.3gpp.mcvideo-info MIME body with a \ element set to the TGI; and
c) if hosting the TGI, and the call to the temporary group is in progress,
shall:
i) associate the MCVideo ID of the calling user with the temporary group call;
ii) interact with the media plane as specified in 3GPP TS 24.581 [5]; and
iii) exit this clause;
d) if hosting the TGI and the call to the temporary group is not in progress,
shall subscribe to the \"xcap-diff\" event-package for the group document of
the TGI as specified in 3GPP TS 24.481 [24], if not already subscribed;
e) upon receipt of a SIP 404 (Not Found) response as a result of attempting to
subscribing to the \"xcap-diff\" event-package for the group document(s) for
the MCVideo group ID(s) associated to the TGI as specified in 3GPP TS 24.481
[24], shall send the SIP 404 (Not Found) response with the warning text set to
\"113 group document does not exist\" in a Warning header field as specified
in clause 4.4 and shall not continue with the rest of the steps;
f) upon receipt of any other SIP 4xx, SIP 5xx or SIP 6xx response as a result
of attempting to subscribe to the \"xcap-diff\" event-package for the group
document(s) for the MCVideo group ID(s) associated to the TGI as specified in
3GPP TS 24.481 [24], shall send the SIP final response with the warning text
set to \"114 unable to retrieve group document\" in a Warning header field as
specified in clause 4.4 and shall not continue with the rest of the steps;
g) upon receipt of a notification containing the group document for the TGI,
or if the group document is already cached, shall obtain the MCVideo IDs of
the constituent groups by accessing the \
element(s) of the group document for the TGI; and
h) if:
i) the \ element with an MCVideo ID is included in the
application/vnd.3gpp.mcvideo-info MIME body;
ii) the MCVideo ID is present in one of the instances of the \ element in the group document; and
iii) the group is not homed by the MCVideo server;
shall exit this procedure and authorize the MCVideo user at a non-controlling
MCVideo function of a MCVideo group;
NOTE 4: The non-controlling function of an MCVideo group can be located in the
primary MCVideo system or a partner MCVideo system.
7) for the MCVideo ID of each constituent group, shall follow the actions
below in step 8); and
8) if the SIP INVITE request is a \"SIP INVITE request for controlling
function of an MCVideo group\" and the group document for the group identity
in the \ element of the application/vnd.3gpp.mcvideo-info
MIME body of the SIP INVITE request retrieved is associated with a TGI and if:
a) the application/vnd.3gpp.mcvideo-info+xml includes an \ element, determine if the constituent MCVideo group identified by the
\ element is homed at the MCVideo server and if that is
the case:
i) shall subscribe to the \"xcap-diff\" event-package for the group document
for the constituent MCVideo group ID as specified in 3GPP TS 24.481 [24], if
not already subscribed;
ii) upon receipt of a SIP 404 (Not Found) response as a result of attempting
to subscribing to the \"xcap-diff\" event-package for the group document for
the MCVideo group ID associated to the TGI as specified in 3GPP TS 24.481
[24], shall send the SIP 404 (Not Found) response with the warning text set to
\"113 group document does not exist\" in a Warning header field as specified
in clause 4.4 and shall not continue with the rest of the steps; and
iii) upon receipt of any other SIP 4xx, SIP 5xx or SIP 6xx response as a
result of attempting to subscribe to the \"xcap-diff\" event-package for the
group document for the MCVideo group ID associated to the TGI as specified in
3GPP TS 24.481 [24], shall send the SIP final response with the warning text
set to \"114 unable to retrieve group document\" in a Warning header field as
specified in clause 4.4 and shall not continue with the rest of the steps; and
b) the application/vnd.3gpp.mcvideo-info+xml does not include an \ element, for each MCVideo ID contained in each instance of the
\ element of the group document for the TGI:
i) shall determine if the group identity is homed on the controlling MCVideo
function of an MCVideo group or homed on a non-controlling MCVideo function of
an MCVideo group;
NOTE 5: The non-controlling function of an MCVideo group can be located in the
primary MCVideo system or a partner MCVideo system.
ii) for each constituent MCVideo group ID that is homed on the controlling
MCVideo function of an MCVideo group shall subscribe to the \"xcap-diff\"
event-package for the group document for the constituent MCVideo group ID as
specified in 3GPP TS 24.481 [24], if not already subscribed;
NOTE 6: As soon as an error occurs when subscribing for a group document of a
constituent MCVideo group ID, the controlling MCVideo function of an MCVideo
group stops subscribing to any further group documents of constituent MCVideo
group IDs.
iii) upon receipt of a SIP 404 (Not Found) response as a result of attempting
to subscribing to the \"xcap-diff\" event-package for the group document(s)
for the MCVideo group ID(s) associated to the TGI as specified in 3GPP TS
24.481 [24], shall send the SIP 404 (Not Found) response with the warning text
set to \"113 group document does not exist\" in a Warning header field as
specified in clause 4.4 and shall not continue with the rest of the steps;
iv) upon receipt of any other SIP 4xx, SIP 5xx or SIP 6xx response as a result
of attempting to subscribe to the \"xcap-diff\" event-package for the group
document(s) for the MCVideo group ID(s) associated to the TGI as specified in
3GPP TS 24.481 [24], shall send the SIP final response with the warning text
set to \"114 unable to retrieve group document\" in a Warning header field as
specified in clause 4.4 and shall not continue with the rest of the steps; and
c) when all group document(s) for all constituent groups homed at the MCVideo
server have been retrieved and if the MCVideo ID of the user identified in the
\ element of the application/vnd.3gpp.mcvideo-
info+xml MIME body:
i) is a member of one the retrieved constituent MCVideo groups, received,
shall exit this procedure; and
ii) is not a member of any of the retrieved constituent group documents, shall
determine that the MCVideo ID of the MCVideo user needs to be authorised by a
non-controlling MCVideo function of an MCVideo group and exit this procedure.
#### 6.3.5.3 Rules for joining a group session
The following conditions shall be met for the controlling MCVideo function to
allow an MCVideo user to join an existing group session:
1) an \ element exists in the \ element of the group document for
the MCVideo user;
2) a \ exists in the group document with:
a) the \ element of the \ element present and with
the \ element of the corresponding \ element set to
\"true\"; or
b) the \ element of the \ element containing an entry
matching the MCVideo ID in the SIP INVITE request, with the \
element of the \ element set to \"true\"; and
3) if the \ element is present, it contains:
a) a \ element containing an \"enabler\" attribute which is set to
the MCVideo ICSI; and
b) if a \ element is present, an entry set to \"MCVideo video
media\".
If all of the above conditions are not met, then the MCVideo user shall not be
authorised to join the group session.
#### 6.3.5.4 Rules for initiating a prearranged group session
The following conditions shall be met for a controlling MCVideo function or
non-controlling MCVideo function of an MCVideo group to initiate a group
session for the requesting MCVideo user:
1) if the \ element in the \ element is
present in the group document and if the MCVideo ID indicated in the incoming
INVITE request is the same as the MCVideo group ID in the \"temporary-MCVideo-
group-ID\" attribute of the \ element; or
2) if the \ element in the \ element of
the MCVideo group document is not present in the group document;
and:
1) an \ element exists in the \ element of the group document for
the MCVideo user;
2) a \ exists in the group document with:
a) the \ element of the \ element present and with
the \ element of the corresponding \
element set to \"true\"; or
b) the \ element of the \ element containing an entry
matching the MCVideo ID in the SIP INVITE request, with the \ element of the \ element is set to \"true\"; and
3) if the \ element is present, it contains:
a) a \ element containing an \"enabler\" attribute which is set to
the MCVideo ICSI; and
b) if a \ element is present, an entry set to \"MCVideo video
media\".
then the MCVideo user shall not be authorised to initiate the group session.
#### 6.3.5.5 Determining the group members to invite
The MCVideo server shall only invite affiliated group members to a group
session. The MCVideo server determines the affiliated members from the entries
contained in the \ element of the group document by following the
procedures specified in clause 6.3.6.
NOTE 1: The term \"affiliated group members\" used above also includes those
members that are implicitly affiliated by the controlling MCVideo function.
If the number of members of the MCVideo group exceeds the value contained in
the \ element the MCVideo server shall
invite only \ members from the list, but
shall prioritise inviting those group members to the group session that have
an \ element in the \ element with a \
element present.
NOTE 2: The \ element indicates the maximum
number of participants allowed in the group session. The \ element is used to determine which group members need to acknowledge
the group call before audio transmission can proceed.
NOTE 3: Other requirements for how the controlling MCVideo function selects
which of the \ members to invite is outside
the scope of this specification.
NOTE 4: It is assumed that validation checks are performed at the group
management server to ensure that the \
cannot be less than the number of \ users.
### 6.3.6 Affiliation check
The MCVideo server checks if an MCVideo user is affiliated to an MCVideo group
at an MCVideo client by following the procedures specified below:
1\. the MCVideo server shall find the applicable MCVideo group information
entry as an MCVideo group information entry of the list of MCVideo group
information entries described in clause 8.2.2.3.2, such that the MCVideo group
ID of the MCVideo group information entry is equal to the MCVideo group
identity of the MCVideo group. If the applicable MCVideo group information
entry cannot be found, then the MCVideo server shall determine that the
MCVideo user is not affiliated to the MCVideo group at the MCVideo client and
the MCVideo server shall not continue with rest of the steps;
2\. the MCVideo server shall find the applicable MCVideo user information
entry as an MCVideo user information entry of the list of MCVideo user
information entries of the applicable MCVideo group information entry, such
that the MCVideo ID of the MCVideo user information entry is equal to the
MCVideo ID of the MCVideo user. If the applicable MCVideo user information
entry cannot be found, then the MCVideo server shall determine that the
MCVideo user is not affiliated to the MCVideo group at the MCVideo client and
the MCVideo server shall not continue with rest of the steps;
3\. if the MCVideo client ID of the MCVideo client cannot be found in the list
of MCVideo client information entries of the applicable MCVideo user
information entry, then the MCVideo server shall determine that the MCVideo
user is not affiliated to the MCVideo group at the MCVideo client and the
MCVideo server shall not continue with rest of the steps;
NOTE: the MCVideo client ID of the originating MCVideo client can be found in
the \ element contained in the
application/vnd.3gpp.mcvideo-info+xml MIME body of a SIP INVITE request, SIP
REFER request or SIP MESSAGE request originated by the MCVideo client.
4\. if the expiration time of the applicable MCVideo user information entry
has been reached, then the MCVideo server shall determine that the MCVideo
user is not affiliated to the MCVideo group at the MCVideo client and the
MCVideo server shall not continue with rest of the steps; and
5\. the MCVideo server shall determine that the MCVideo user is affiliated to
the MCVideo group at the MCVideo client.
### 6.3.7 Error handling
#### 6.3.7.1 Public service identity does not exist
Upon receiving a request that includes the Request-URI set to a public service
identity that is not allocated in the participating or the controlling MCVideo
function, the participating or the controlling MCVideo function shall return a
SIP 404 (Not Found) response.
### 6.3.8 Session release policy
#### 6.3.8.1 Session release policy for group call
If:
1) the call is a pre-arranged group call and if the controlling MCVideo
function receives an indication from the media plane that the T4 (Inactivity)
timer specified in 3GPP TS 24.581 [5] expired;
2) there are only one or no participants in the MCVideo session;
3) if the call is a pre-arranged group call and if it is according to local
policy, the initiator of the group call leaves the MCVideo session;
4) the minimum number of affiliated MCVideo group members is not present; or
5) timer TNG3 (group call timer) expires;
the controlling MCVideo function shall release the MCVideo session for the
group call.
#### 6.3.8.2 Session release policy for private call
If:
1) the controlling MCVideo function receives an indication from the media
plane that the T4 (Inactivity) timer specified in 3GPP TS 24.581 [5] expired;
2) the MCVideo session has lasted longer than the maximum of duration of
private call; or
3) there are only one or no participants in the MCVideo session;
the controlling MCVideo function shall release the MCVideo session for a
private call.
## 6.4 Implicit transmit media request
An initial SIP INVITE request fulfilling the following criteria shall be
regarded by the MCVideo server as an implicit transmit media request by the
originating MCVideo client when the MCVideo client:
1) initiates an MCVideo session; and
2) includes the \"mc_implicit_request\" \'fmtp\' attribute in the associated
UDP stream for the transmission control in the SDP offer/answer as specified
in 3GPP TS 24.581 [5] clause 12.
A SIP re-INVITE request fulfilling the following criteria shall be regarded by
the MCVideo server as an implicit transmit media request when the MCVideo
client:
1) performs an upgrade of:
a) an MCVideo group call to an emergency MCVideo group call;
b) an MCVideo group call to an imminent peril MCVideo group call; and
2) includes the \"mc_implicit_request\" \'fmtp\' attribute in the associated
UDP stream for the transmission control in the SDP offer/answer as specified
in 3GPP TS 24.581 [5] clause 12.
In all other cases the SIP (re-)INVITE request shall be regarded as received
without an implicit transmit media request.
## 6.5 Handling of MIME bodies in a SIP message
The MCVideo client and the MCVideo server shall support several MIME bodies in
SIP request and SIP responses.
When the MCVideo client or the MCVideo server sends a SIP message and the SIP
message contains more than one MIME body, the MCVideo client or the MCVideo
server:
1) shall, as specified in IETF RFC 2046 [65], include one Content-Type header
field with the value set to multipart/mixed and with a boundary delimiter
parameter set to any chosen value;
2) for each MIME body:
a) shall insert the boundary delimiter;
b) shall insert the Content-Type header field with the MIME type of the MIME
body; and
c) shall insert the content of the MIME body;
3) shall insert a final boundary delimiter; and
4) if an SDP offer or an SDP answer is one of the MIME bodies, shall insert
the application/sdp MIME body as the first MIME body.
NOTE: The reason for inserting the application/sdp MIME body as the first body
is that if a functional entity in the underlying SIP core does not understand
multiple MIME bodies, the functional entity will ignore all MIME bodies with
the exception of the first MIME body. The order of multiple MCVideo
application MIME bodies in a SIP message is irrelevant.
When the MCVideo client or the MCVideo server sends a SIP message and the SIP
message contains only one MIME body, the MCVideo client or the MCVideo server:
1) shall include a Content-Type header field set to the MIME type of the MIME
body; and
2) shall insert the content of the MIME body.
## 6.6 Confidentiality and Integrity Protection
### 6.6.1 General
#### 6.6.1.1 Applicability and exclusions
The procedures in clauses 6.6 apply in general to all procedures described in
clause 8, clause 9, clause 10 and clause 11 with the exception that the
confidentiality and integrity protection procedures for the registration and
service authorisation procedures are described in clause 7.
#### 6.6.1.2 Performing XML content encryption
Whenever the MCVideo UE includes XML elements or attributes pertaining to the
data specified in clause 4.8 in SIP requests or SIP responses, the MCVideo UE
shall perform the procedures in clause 6.6.2.3.1.
Whenever the MCVideo server includes XML elements or attributes pertaining to
the data specified in clause 4.8 in SIP requests or SIP responses, the MCVideo
server shall perform the procedures in clause 6.6.2.3.2, with the exception
that when the MCVideo server receives a SIP request with XML elements or
attributes in an MIME body that need to be copied from the incoming SIP
request to an outgoing SIP request without modification, the MCVideo server
shall perform the procedures specified in clause 6.6.2.5.
NOTE: The procedures in clause 6.6.2.3.1 and clause 6.6.2.3.2 first determine
(by referring to configuration) if confidentiality protection is enabled and
then call the necessary procedures to encrypt the contents of the XML elements
if confidentiality protection is enabled.
#### 6.6.1.3 Performing integrity protection on an XML body
The functional entity shall perform the procedures in the clause just prior to
sending a SIP request or SIP response.
1) The MCVideo UE shall perform the procedures in clause 6.6.3.3.1; and
2) The MCVideo server shall perform the procedures in clause 6.6.3.3.2.
NOTE: The procedures in clause 6.6.3.3.1 and clause 6.6.3.3.2 first determine
if integrity protection of XML MIME bodies is required and then calls the
necessary procedures to integrity protect each XML MIME body if integrity
protection is required. Each XML MIME body has its own signature.
#### 6.6.1.4 Verifying integrity of an XML body and decrypting XML elements
Whenever the functional entity (i.e. MCVideo UE or MCVideo server) receives a
SIP request or a SIP response, the functional entity shall perform the
following procedures before performing any other procedures.
1) The functional entity shall determine if integrity protection has been
applied to an XML MIME body by following the procedures in clause 6.6.3.4.1
and if integrity protection has been applied:
a) shall use the keying information described in clause 6.6.3.2 and the
procedures described in clause 6.6.3.4.2 to verify the integrity of the XML
MIME body; and
b) if the integrity protection checks fail shall not perform any further
procedures in this clause;
2) The functional entity shall determine whether confidentiality protection
has been applied to XML elements in XML MIME bodies in a SIP request or SIP
response, pertaining to the data specified in clause 4.8, by following the
procedures in clause 6.6.2.4.1, and if confidentiality protection has been
applied:
a) shall use the keying information described in clause 6.6.2.2 along with the
procedures described in clause 6.6.2.4.2 to decrypt the received values; and
b) if any decryption procedures fail, shall not perform any further procedures
in this clause.
### 6.6.2 Confidentiality Protection
#### 6.6.2.1 General
In general, confidentiality protection is applied to specific XML elements and
attributes in XML MIME bodies in SIP requests and responses as specified in
clause 4.8.
Configuration for applying confidentiality protection is not selective to a
specific XML element or attribute of the data described in clause 4.8. If
configuration for confidentiality protection is turned on, then all XML
elements and attributes described in clause 4.8 are confidentiality protected.
If configuration for confidentiality protection is turned off, then no XML
content in SIP requests and SIP responses are confidentiality protected.
#### 6.6.2.2 Keys used in confidentiality protection procedures
Confidentiality protection uses an XPK to encrypt the data which (depending on
who is the sender and who is the receiver of the encrypted information) can be
a CSK or an SPK as specified in clause 4.8. An XPK-ID (CSK-ID/SPK-ID) is used
to key the XPK (CSK/SPK). It is assumed that before the procedures in this
clause are called, the CSK/CSK-ID and/or SPK/SPK-ID are available on the
sender and recipient of the encrypted content as described in clause 4.8.
The procedures in clause 6.6.2.3 and clause 6.6.2.4 are used with a XPK equal
to the CSK and a XPK-ID equal to the CSK-ID in the following circumstances as
described in 3GPP TS 33.180 [8]:
1) MCVideo client sends confidentiality protected content to an MCVideo
server; and
2) MCVideo server sends confidentiality protected content to an MCVideo
client.
The procedure in clause 6.6.2.3 and clause 6.6.2.4 are used with a XPK equal
to the SPK and a XPK-ID equal to the SPK-ID in the following circumstances as
described in 3GPP TS 33.180 [8]:
1) MCVideo server sends confidentiality protected content to an MCVideo server
in the same domain; and
2) MCVideo server sends confidentiality protected content to an MCVideo server
in another domain.
#### 6.6.2.3 Procedures for sending confidentiality protected content
##### 6.6.2.3.1 MCVideo client
If the \ element in the Service Configuration
document as specified in 3GPP TS 24.484 [25] is set to \"true\" or no
\ element is present in the Service Configuration
document, then sending confidentiality protected content from the MCVideo
client to the MCVideo server is enabled, and the MCVideo client:
1) shall use the appropriate keying information specified in clause 6.6.2.2;
2) shall perform the procedures in clause 6.6.2.3.3 to confidentiality protect
XML elements containing the content described in clause 4.8; and
3) shall perform the procedures in clause 6.6.2.3.4 to confidentiality protect
URIs in XML attributes for URIs described in clause 4.8.
If the \ element in the Service Configuration
document as specified in 3GPP TS 24.484 [25] is set to \"false\", then sending
confidentiality protected content from the MCVideo client to the MCVideo
server is disabled, and content is included in XML elements and attributes
without encryption.
##### 6.6.2.3.2 MCVideo server
If the \ element in the Service Configuration
document as specified in 3GPP TS 24.484 [25] is set to \"true\" or no
\ element is present in the Service Configuration
document, then sending confidentiality protected content from the MCVideo
server to the MCVideo client is enabled. If the \
element of the \ element is set to
\"true\" in the Service Configuration document as specified in 3GPP TS 24.484
[25] or no \ element is present in the Service
Configuration document, then sending confidentiality protected content between
MCVideo servers is enabled.
When sending confidentiality protected content, the MCVideo server:
1) shall use the appropriate keying information specified in clause 6.6.2.2;
2) shall perform the procedures in clause 6.6.2.3.3 to confidentiality protect
XML elements containing the content described in clause 4.8, and
3) shall perform the procedures in clause 6.6.2.3.4 to confidentiality protect
URIs in XML attributes for URIs described in clause 4.8.
If the \ element in the Service Configuration
document as specified in 3GPP TS 24.484 [25] is set to \"false\", then sending
confidentiality protected content from the MCVideo server to the MCVideo
client is disabled, and then content is included in XML elements and
attributes without encryption.
If the \ element of the \ element in the Service Configuration document as specified in
3GPP TS 24.484 [25] is set to \"false\", then sending confidentiality
protected content between MCVideo servers is disabled, and content is included
in XML elements and attributes without encryption.
##### 6.6.2.3.3 Content Encryption in XML elements
The following procedures shall be performed by an MCVideo client or an MCVideo
server:
1) perform encryption as specified in W3C: \"XML Encryption Syntax and
Processing Version 1.1\", https://www.w3.org/TR/xmlenc-core1/ [45] clause 4.3,
using the \"AES-128-GCM algorithm HMAC\" as the encryption algorithm and the
XPK as the key; and
2) follow the semantic for the element of the MIME body as described in Annex
F of the present document, to include the encrypted content in the MIME body
ensuring that the necessary XML elements required for confidentiality
protection are included as specified in 3GPP TS 33.180 [8].
##### 6.6.2.3.4 Attribute URI Encryption
The following procedures shall be performed by an MCVideo client or an MCVideo
server:
1) perform encryption as specified in [aes-gcm], using the \"AES-128-GCM
algorithm HMAC\" as the encryption algorithm and the XPK as the key, with a 96
bit randomly selected IV; and
2) replace the URI to be protected in the attribute by a URI constructed as
follows:
a) the URI schema is \"sip:\";
b) the first part of the userinfo part is the base64 encoded result of the
encryption of the original attribute value;
c) the string \";iv=\" is appended to the result of step b);
d) the base64 encoding of the IV (section 5 of IETF RFC 4648 [46]) is appended
to the result of step c);
e) the string \";key-id=\" is appended to the result of step d);
f) the base64 encoding of the XPK-ID according to 3GPP 33.180 [8] is appended
to the result of step e);
g) the string \";alg=128-aes-gcm\" is appended to the result of step f); and
h) the string \"@\" followed by the domain name for MC Services
confidentiality protection as specified in 3GPP TS 23.003 [47] is appended to
the result of step g).
#### 6.6.2.4 Procedures for receiving confidentiality protected content
##### 6.6.2.4.1 Determination of confidentiality protected content
The following procedure is used by the MCVideo client or MCVideo server to
determine if an XML element is confidentiality protected.
1) if an XML element contains the \ XML element, then the
content of the XML element is confidentiality protected; and
2) if an XML element does not contain the \ XML element, then
the content of the XML element is.not confidentiality protected.
The following procedure is used by the MCVideo client or MCVideo server to
determine if a URI in the XML attribute is confidentiality protected.
1) if an XML attribute is a URI with the domain name for MC Services
confidentiality protection as specified in the 3GPP TS 23.003 [47], then the
URI is confidentiality protected; and
2) if an XML attribute is a URI without the domain name for MC Services
confidentiality protection as specified in the 3GPP TS 23.003 [47], then the
URI is not confidentiality protected.
##### 6.6.2.4.2 Decrypting confidentiality protected content in XML elements
The following procedure shall be performed by an MCVideo client or an MCVideo
server to decrypt an individual XML element that has a type of \"encrypted\"
within an XML MIME body:
1) if the \ XML element or any of its sub-elements as described
in 3GPP TS 33.180 [8] are not present in the MIME body then send a SIP 403
(Forbidden) response with the warning text set to \"140 unable to decrypt XML
content\" in a Warning header field as specified in clause 4.4, and exit this
procedure. Otherwise continue with the rest of the steps;
2) perform decryption on the \ element as specified in W3C:
\"XML Encryption Syntax and Processing Version 1.1\",
https://www.w3.org/TR/xmlenc-core1/ [45] clause 4.4 to decrypt the contents of
the \ element contained within the \ element;
3) if the decryption procedure fails, then send a SIP 403 (Forbidden) response
with the warning text set to \"140 unable to decrypt XML content\" in a
Warning header field as specified in clause 4.4. Otherwise continue with the
rest of the steps; and
4) return success of this procedure together with the decrypted XML element.
##### 6.6.2.4.3 Decrypting confidentiality protected URIs in XML attributes
The following procedure shall be performed by an MCVideo client or an MCVideo
server to decrypt a URI in an attribute in a XML document:
1) the value between \";iv=\" and the next \";\" provides the base64 encoded
value of the 96 bit IV and the value between \";=key-id\" and the next \";\"
defines the key which has been used for encryption, i.e. \"CSK\" or \"SPK\";
and
2) the original URI is obtained by decrypting the base64 encoded string
between the \"sip:\" URI prefix and the next \";\" using the \"AES-128-GCM
algorithm HMAC\" as the decryption algorithm with IV and key as determined in
step 1). This value replaces the encrypted URI as the value of the XML
attribute.
#### 6.6.2.5 MCVideo server copying received XML content
The following procedure is executed when an MCVideo server receives a SIP
request containing XML MIME bodies, where the content needs to be copied from
the incoming SIP request to the outgoing SIP request.
The MCVideo server:
1) shall copy the XML elements from the XML MIME body of the incoming SIP
request that do not contain a \ XML element, to the same XML
body in the outgoing SIP request;
2) for each encrypted XML element in the XML MIME body of the incoming SIP
request as determined by clause 6.6.2.4.1:
a) shall use the keying information described in clause 6.6.2.2 to decrypt the
content within the XML element by following the procedures specified in clause
6.6.2.4.2, and shall continue with the steps below if the encrypted XML
element was successfully decrypted;
b) if confidentiality protection is enabled as specified in clause 6.6.2.3.2,
then for each decrypted XML element:
i) shall re-encrypt the content within the XML element using the keying
information described in clause 6.6.2.2 and by following the procedures
specified in clause 6.6.2.3.3; and
ii) shall include the re-encrypted content into the same XML MIME body of the
outgoing SIP request; and
c) if confidentiality protection is disabled as specified in clause 6.6.2.3.2,
shall include the decrypted content in the same XML MIME body of the outgoing
SIP request.
3) for each encrypted XML URI attribute in the XML MIME body of the incoming
SIP request as determined by clause 6.6.2.4.1:
a) shall use the keying information described in clause 6.6.2.2 to decrypt the
URI value of the XML attribute by following the procedures specified in clause
6.6.2.4.3, and shall continue with the steps below if the encrypted XML
attribute value was successfully decrypted;
b) if confidentiality protection is enabled as specified in clause 6.6.2.3.2,
then for each decrypted XML element:
i) shall re-encrypt the URI value of the XML attribute using the keying
information described in clause 6.6.2.2 and by following the procedures
specified in clause 6.6.2.3.4; and
ii) shall include the re-encrypted attribute value into the same XML MIME body
of the outgoing SIP request; and
c) if confidentiality protection is disabled as specified in clause 6.6.2.3.2,
shall include the decrypted value in the same XML MIME body of the outgoing
SIP request.
### 6.6.3 Integrity Protection of XML documents
#### 6.6.3.1 General
Integrity protection can be applied to a whole XML MIME body. When integrity
protection is enabled, all XML MIME bodies transported in SIP requests and
responses are integrity protected. The following XML MIME bodies used in the
present specification in SIP signalling can be integrity protected:
\- application/vnd.3gpp.mcvideo-info+xml;
\- application/vnd.3gpp.mcvideo-location-info+xml;
\- application/vnd.3gpp.mcvideo-affiliation-command+xml; and
\- application/conference-info+xml.
If integrity protection is enabled, and one or more of the XML MIME bodies
complying to the types listed above are included in a SIP request or SIP
response, then a MIME body of type application/vnd.3gpp.mcptt-signed+xml
specified in 3GPP TS 24.379 [40] is included in the SIP request or SIP
response containing one or more signatures pointing to those XML MIME bodies
as illustrated in Figure 6.6.3.3-1.
In order to integrity protect the XML MIME bodies listed above in this clause
in SIP requests and SIP responses, the MCVideo client and MCVideo server shall
for each MIME body, include the Content-ID header field as specified in IETF
RFC 2045 [48] containing a Content-ID (\"cid\") Uniform Resource Locator (URL)
as specified in IETF RFC 2392 [49].
Figure 6.6.3.1-1: Integrity Protection of XML MIME bodies in SIP requests and
SIP responses
Each MIME body that is integrity protected is assigned a unique signature.
Configuration for applying integrity protection is not selective to a specific
MIME body. If configuration for integrity protection is turned on, then all
XML MIME bodies in SIP requests and responses are integrity protected. If
configuration for integrity protection is turned off, then no XML MIME bodies
in SIP requests and SIP responses are integrity protected.
#### 6.6.3.2 Keys used in integrity protection procedures
Integrity protection uses an XPK to sign the data which (depending on who is
the sender and who is the receiver of the signed information) can be a CSK or
an SPK as specified in clause 4.8. An XPK-ID (CSK-ID/SPK-ID) is used to key
the XPK (CSK/SPK). It is assumed that before the procedures in clause 6.6.3.3
and clause 6.6.3.4 are called, the CSK/CSK-ID and/or SPK/SPK-ID are available
on the sender and recipient of the integrity protected content, as described
in clause 4.8.
The procedures in clause 6.6.3.3 and clause 6.6.3.4 shall be used with a XPK
equal to the CSK and a XPK-ID equal to the CSK-ID in the following
circumstances as described in 3GPP TS 33.180 [8]:
1) MCVideo client sends integrity protected content to an MCVideo server; and
2) MCVideo server sends integrity protected content to an MCVideo client.
The procedure in clause 6.6.3.3 and clause 6.6.3.4 shall be used with a XPK
equal to the SPK and a XPK-ID equal to the SPK-ID in the following
circumstances as described in 3GPP TS 33.180 [8]:
1) MCVideo server sends integrity protected content to an MCVideo server in
the same domain; and
2) MCVideo server sends integrity protected content to an MCVideo server in
another domain.
#### 6.6.3.3 Sending integrity protected content
##### 6.6.3.3.1 MCVideo client
If the \ element in the Service Configuration document
as specified in 3GPP TS 24.484 [25] is set to \"true\" or no \ element is present in the Service Configuration document, then
sending integrity protected content from the MCVideo client to the MCVideo
server is enabled, and the MCVideo client shall use the appropriate keying
information specified in clause 6.6.3.2 and shall perform the procedures in
clause 6.6.3.3.3 to integrity protect XML MIME bodies.
NOTE: Each XML MIME body is integrity protected separately.
If the \ element in the Service Configuration document
as specified in 3GPP TS 24.484 [25] is set to \"false\", then sending
integrity protected content from the MCVideo client to the MCVideo server is
disabled, and all XML MIME bodies are sent without integrity protection.
##### 6.6.3.3.2 MCVideo server
If the \ element in the Service Configuration document
as specified in 3GPP TS 24.484 [25] is set to \"true\", or no \ element is present in the Service Configuration document, then
sending integrity protected content from the MCVideo server to the MCVideo
client is enabled. If the \ element of the
\ element is set to \"true\" in the
Service Configuration document as specified in 3GPP TS 24.484 [25] or no
\ element is present in the Service Configuration
document, then sending integrity protected content between MCVideo servers is
enabled.
When sending integrity protected content, the MCVideo server shall use the
appropriate keying information specified in clause 6.6.3.2 and shall perform
the procedures in clause 6.6.3.3.3 to integrity protect XML MIME bodies.
NOTE: Each XML MIME body is integrity protected separately.
If the \ element in the Service Configuration document
as specified in 3GPP TS 24.484 [25] is set to \"false\", then sending
integrity protected content from the MCVideo server to the MCVideo client is
disabled, and all XML MIME bodies are sent without integrity protection.
If the \ element of the \ element in the Service Configuration document as specified in
3GPP TS 24.484 [25] is set to \"false\", then sending integrity protected
content between MCVideo servers is disabled, and content is included in XML
elements without encryption.
##### 6.6.3.3.3 Integrity protection procedure
The following procedure shall be performed by the MCVideo client and MCVideo
server to integrity protect the XML bodies defined by the MIME types listed in
clause 6.6.3.1:
> 1) include a Content-Type header field set to \"application/vnd.3gpp.mcptt-
> signed+xml\" defined in 3GPP TS 24.379 [40];
>
> 2) for each of the MIME types defined in clause 6.6.3.1 where the content
> defined by these MIME types is to be integrity protected:
a) perform reference generation as specified in W3C: \"XML Signature Syntax
and Processing (Second Edition)\", http://www.w3.org/TR/xmldsig-core [50]
clause 3.1.1 using the SHA256 algorithm to produce a hash of the MIME body and
continue with the procedures below if reference generation is successful;
b) perform signature generation as specified in W3C: \"XML Signature Syntax
and Processing (Second Edition)\", http://www.w3.org/TR/xmldsig-core [50]
clause 3.1.2 using the HMAC-SHA256 signature method and the XPK as the key and
continue with the procedures below if signature generation is successful; and
3) follow the schema defined in Annex F.6.2 and the semantic described in
Annex F.6.3 to create the application/vnd.3gpp.mcptt-signed+xml MIME body,
defined in 3GPP TS 24.379 [40] containing signatures referring to the XML MIME
bodies included in the SIP request or SIP response.
#### 6.6.3.4 Receiving integrity protected content
##### 6.6.3.4.1 Determination of integrity protected content
The following procedure is used by the MCVideo client or MCVideo server to
determine if an XML MIME body is integrity protected.
1) if the \ XML element is not present in the XML MIME body, then
the content is not integrity protected; and
2) if the \ XML element is present in the XML MIME body, then the
content is integrity protected.
##### 6.6.3.4.2 Verification of integrity protected content
The following procedure is used by the MCVideo client or MCVideo server to
verify the integrity of an XML MIME body:
1) if the required sub-elements of the \ as described in 3GPP TS
33.180 [8] are not present in the MIME body and if not present, are not known
to the sender and recipient by other means, then the integrity protection
procedure fails and exit this procedure. Otherwise continue with the rest of
the steps;
2) perform reference validation on the \ element as specified in
W3C: \"XML Signature Syntax and Processing (Second Edition)\",
http://www.w3.org/TR/xmldsig-core [50] clause 3.2.1;
3) if reference validation fails, then send a SIP 403 (Forbidden) response
towards the functional entity with the warning text set to: \"139 integrity
protection check failed\" in a Warning header field as specified in clause
4.4, and do not continue with the rest of the steps in this clause;
4) obtain the XPK using the XPK-ID in the received XML body and use it to
perform signature validation of the value of the \ element as
specified in W3C: \"XML Signature Syntax and Processing (Second Edition)\",
http://www.w3.org/TR/xmldsig-core [50] clause 3.2.2;
5) if signature validation fails, then send a SIP 403 (Forbidden) response
towards the functional entity with the warning text set to: \"139 integrity
protection check failed\" in a Warning header field as specified in clause
4.4, and do not continue with the rest of the steps in this clause; and
6) return success of the integrity protection of the XML document passes the
integrity protection procedure.
## 6.7 Priority sharing
The participating MCVideo function shall enable or disable priority sharing as
specified in 3GPP TS 24.229 [11].
# 7 Registration and service authorisation
## 7.1 General
This clause describes the procedures for SIP registration and MCVideo service
authorization for the MCVideo client and the MCVideo service. The MCVideo UE
can use SIP REGISTER or SIP PUBLISH for MCVideo service settings to perform
service authorization for MCVideo. The decision which method to use is based
on implementation and on availability of an access-token received as outcome
of the user authentication procedure as described in 3GPP TS 24.482 [52].
If another MC service client (e.g. MCPTT, MCData) is operating at the same
time on the same MC UE as the MCVideo client, then the MCVideo client shares
the same SIP registration as the other MC service clients. The SIP REGISTER
procedures in this clause are combined with the SIP REGISTER procedures for
the other operating MC service clients to create a single SIP REGISTER
request. If other MC service clients are already operating when the MCVideo
client registers, then a re-registration is performed containing the
parameters for the other operating MC services.
Although the access-token can be the same for the MCVideo service as for other
MC services when performing service authorization for MCVideo along with other
MC services using SIP REGISTER multipart MIME bodies for each MC service are
included in the SIP REGISTER request. The MCVideo server can therefore receive
multipart MIME bodies in the SIP REGISTER request. Multiple contact addresses
(one per MC service client) can be included in a SIP REGISTER request provided
they all contain the same IP address and port number (see 3GPP TS 24.229 [4]
for further details of including multiple contact addresses in a single SIP
REGISTER request).
If the MCVideo client logs off from the MCVideo service but other MC service
clients are to remain registered the MC UE performs a re-registration as
specified in 3GPP TS 24.229 [4] without the g.3gpp.mcvideo media feature tag
and the g.3gpp.icsi-ref media feature tag containing the value of
\"urn:urn-7:3gpp-service.ims.icsi.mcvideo\" in the Contact header field of the
SIP REGISTER request but with the parameters for the remaining operating MC
service clients.
## 7.2 MCVideo client procedures
### 7.2.1 SIP REGISTER request for service authorisation
When the MCVideo client performs SIP registration for service authorization
the MCVideo client shall perform the registration procedures as specified in
3GPP TS 24.229 [11].
The MCVideo client shall include the following media feature tags in the
Contact header field of the SIP REGISTER request:
1) the g.3gpp.mcvideo media feature tag; and
2) the g.3gpp.icsi-ref media feature tag containing the value of
\"urn:urn-7:3gpp-service.ims.icsi.mcvideo\".
NOTE 1: If the MCVideo client logs off from the MCVideo service but the
MCVideo UE remains registered the MCVideo UE performs a re-registration as
specified in 3GPP TS 24.229 [11] without both the g.3gpp.mcvideo media feature
tag and the g.3gpp.icsi-ref media feature tag containing the value of
\"urn:urn-7:3gpp-service.ims.icsi.mcvideo\" in the Contact header field of the
SIP REGISTER request.
If the MCVideo client, upon performing SIP registration:
1) has successfully finished the user authentication procedure as described in
3GPP TS 24.482 [52];
2) has available an access-token;
3) based on implementation decides to use SIP REGISTER for service
authorization;
4) confidentiality protection is disabled as specified in clause 6.6.2.3.1;
and
5) integrity protection is disabled as specified in clause 6.6.3.3.1;
then the MCVideo client shall include in the SIP REGISTER request an
application/vnd.3gpp.mcvideo-info+xml MIME body as defined in Annex F.1 with:
1) the \ element set to the value of the access token
received during the user authentication procedures; and
2) the \ element set to the value of the MCVideo client ID
of the originating MCVideo client.
NOTE 2: the access-token contains the MCVideo ID of the user.
If the MCVideo client, upon performing SIP registration:
1) has successfully finished the user authentication procedure as described in
3GPP TS 24.482 [52];
2) has an available access-token;
3) based on implementation decides to use SIP REGISTER for service
authorization; and
4) either confidentiality protection is enabled as specified in clause
6.6.2.3.1 or integrity protection is enabled as specified in clause 6.6.3.3.1;
then the MCVideo client:
1) shall include an application/mikey MIME body with the CSK as MIKEY-SAKKE
I_MESSAGE as specified in 3GPP TS 33.180 [8] in the body of the SIP REGISTER
request;
2) if confidentiality protection is enabled as specified in clause 6.6.2.3.1,
shall include in the body of the SIP REGISTER request, an
application/vnd.3gpp.mcvideo-info+xml MIME body with the following
clarifications:
a) shall encrypt the received access-token using the client server key (CSK)
and include the \ element set to the encrypted access-
token, as specified in clause 6.6.2.3.3; and
b) shall encrypt the MCVideo client ID of the originating MCVideo client and
include the \ element set to the encrypted MCVideo client
ID;
3) if confidentiality protection is disabled as specified in clause 6.6.2.3.1,
shall include an application/vnd.3gpp.mcvideo-info+xml MIME body as defined in
Annex F.1 with:
a) the \ element set to the value of the access token
received during the user authentication procedures; and
b) the \ element set to the value of the MCVideo client ID
of the originating MCVideo client; and
4) if integrity protection is enabled as specified in clause 6.6.3.3.1, shall
use the CSK to integrity protect the application/vnd.3gpp.mcvideo-info+xml
MIME body by following the procedures in clause 6.6.3.3.3.
### 7.2.1AA SIP REGISTER request without service authorisation
When the MCVideo client performs SIP registration without service
authorisation the MCVideo client shall perform the registration procedures as
specified in 3GPP TS 24.229 [4].
The MCVideo client shall include the following media feature tags in the
Contact header field of the SIP REGISTER request:
1) the g.3gpp.mcvideo media feature tag; and
2) the g.3gpp.icsi-ref media feature tag containing the value of
\"urn:urn-7:3gpp-service.ims.icsi.mcvideo\".
NOTE: If the MCVideo client logs off from the MCVideo service but the MCVideo
UE remains registered the MCVideo UE performs a re-registration as specified
in 3GPP TS 24.229 [4] without both the g.3gpp.mcvideo media feature tag and
the g.3gpp.icsi-ref media feature tag containing the value of
\"urn:urn-7:3gpp-service.ims.icsi.mcvideo\" in the Contact header field of the
SIP REGISTER request.
If the MCVideo client supports MCVideo service continuity, then the MCVideo
client shall follow the IMS registraton procedures for PS to PS service
continuity as specified in clause 6.2.2 of 3GPP TS 24.237 [58].
### 7.2.1A Common SIP PUBLISH procedure
This procedure is only referenced from other procedures.
When populating the SIP PUBLISH request, the MCVideo client shall:
1) shall set the Request-URI to the public service identity identifying the
participating MCVideo function serving the MCVideo user;
2) shall include the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"
(coded as specified in 3GPP TS 24.229 [11]), in a P-Preferred-Service header
field according to IETF RFC 6050 [14];
3) shall set the Event header field to the \"poc-settings\" value; and
4) shall set the Expires header field according to IETF RFC 3903 [12], to
4294967295, if the MCVideo user is not removing the MCVideo service settings,
otherwise to remove the MCVideo service settings the MCVideo client shall set
the Expires header field to zero.
NOTE 1: 4294967295, which is equal to 2^32^-1, is the highest value defined
for Expires header field in IETF RFC 3261 [15].
NOTE 2: The expiration timer of the MCVideo client service settings is only
applicable for the MCVideo client service settings from the MCVideo client
that matches the Instance Identifier URN. The expiration timer of MCVideo user
service settings is also updated in the MCVideo server if expiration timer of
MCVideo client service settings is updated in the MCVideo server.
NOTE 3: Removing the MCVideo service settings by setting the Expires header
field to zero, logs off the MCVideo client from the MCVideo service.
### 7.2.2 SIP PUBLISH request for service authorisation and MCVideo service
settings
If based on implementation the MCVideo client decides to use SIP PUBLISH for
MCVideo server settings to also perform service authorization and
1) has successfully finished the user authentication procedure as described in
3GPP TS 24.482 [52]; and
2) has available an access-token;
then the MCVideo client:
1) shall perform the procedures in clause 7.2.1A;
2) if confidentiality protection is disabled as specified in clause 6.6.2.3.1
and integrity protection is disabled, shall include in the body of the SIP
PUBLISH request, an application/vnd.3gpp.mcvideo-info+xml MIME body as
specified in Annex F.1 with the \ element set to the
value of the access token received during the user authentication procedures;
3) if either confidentiality protection is enabled as specified in clause
6.6.2.3.1 or integrity protection is enabled as specified in clause 6.6.3.3.1
shall include an application/mikey MIME body with the CSK as MIKEY-SAKKE
I_MESSAGE as specified in 3GPP TS 33.180 [8] in the body of the SIP PUBLISH
request;
4) if confidentiality protection is enabled as specified in clause 6.6.2.3.1,
shall include in the body of the SIP PUBLISH request an
application/vnd.3gpp.mcvideo-info+xml MIME body with:
a) the \ element set to the received access-token
encrypted using the CSK, as specified in clause 6.6.2.3.3; and
b) the \ element set to the encrypted MCVideo client ID of
the originating MCVideo client, as specified in clause 6.6.2.3.3;
5) if confidentiality protection is disabled as specified in clause 6.6.2.3.1,
shall include in the body of the SIP PUBLISH request, an
application/vnd.3gpp.mcvideo-info+xml MIME body as specified in Annex F.1
with:
a) the \ element set to the value of the access token
received during the user authentication procedures in the body of the SIP
PUBLISH request; and
b) the \ element set to the value of the MCVideo client ID
of the originating MCVideo client;
6) shall include an application/poc-settings+xml MIME body as defined in 3GPP
TS 24.379 [40] containing:
a) the Answer-Mode Indication setting in the \ element of the
poc-settings event package set to the current answer mode setting (\"auto-
answer\" or \"manual-answer\") of the MCVideo client according to IETF RFC
4354 [53]; and
b) the \ element set to the value contained in
the \"user-profile-index\" attribute of the selected MCVideo user profile as
defined in 3GPP TS 24.484 [25]; and
7) if integrity protection is enabled as specified in clause 6.6.3.3.1, shall
use the CSK to integrity protect the application/vnd.3gpp.mcvideo-info+xml
MIME body and application/poc-settings+xml MIME body by following the
procedures in clause 6.6.3.3.3.
The MCVideo client shall send the SIP PUBLISH request according to 3GPP TS
24.229 [11].
### 7.2.3 Sending SIP PUBLISH for MCVideo service settings only
To set, update, remove or refresh the MCVideo service settings, the MCVideo
client shall generate a SIP PUBLISH request according 3GPP TS 24.229 [11],
IETF RFC 3903 [12] and IETF RFC 4354 [53]. In the SIP PUBLISH request, the
MCVideo client:
1) shall perform the procedures in clause 7.2.1A;
2) if confidentiality protection is enabled as specified in clause 6.6.2.3.1,
shall include in the body of the SIP PUBLISH request, an
application/vnd.3gpp.mcvideo-info+xml MIME body with:
a) the \ element set to the targeted MCVideo ID encrypted
using the CSK, as specified in clause 6.6.2.3.3; and
b) the \ element set to the encrypted MCVideo client ID of
the originating MCVideo client, as specified in clause 6.6.2.3.3;
3) if confidentiality protection is disabled as specified in clause 6.6.2.3.1,
shall include an application/vnd.3gpp.mcvideo-info+xml MIME body as specified
in Annex F.1 with:
a) the \ set to the cleartext targeted MCVideo ID; and
b) the \ element set to the value of the MCVideo client ID
of the originating MCVideo client;
4) shall include an application/poc-settings+xml MIME body as defined in 3GPP
TS 24.379 [40] containing:
a) the Answer-Mode Indication setting in the \ element of the
poc-settings event package set to the current answer mode setting (\"auto-
answer\" or \"manual-answer\") of the MCVideo client according to IETF RFC
4354 [53]; and
b) the \ element set to the value contained in
the \"user-profile-index\" attribute of the selected MCVideo user profile as
defined in 3GPP TS 24.484 [25]; and
5) if integrity protection is enabled as specified in clause 6.6.3.3.1, shall
use the CSK to integrity protect the application/vnd.3gpp.mcvideo-info+xml
MIME body and application/poc-settings+xml MIME body by following the
procedures in clause 6.6.3.3.3.
The MCVideo client shall send the SIP PUBLISH request according to 3GPP TS
24.229 [11].
On receiving the SIP 200 (OK) response to the SIP PUBLISH request the MCVideo
client may indicate to the MCVideo User the successful communication of the
MCVideo service settings to the MCVideo server.
### 7.2.4 Determination of MCVideo service settings
In order to discover MCVideo service settings of another MCVideo client of the
same MCVideo user or to verify the currently active MCVideo service settings
of this MCVideo client, the MCVideo client shall generate an initial SIP
SUBSCRIBE request according to 3GPP TS 24.229 [11], IETF RFC 6665 [16], and
IETF RFC 4354 [53].
In the SIP SUBSCRIBE request, the MCVideo client:
1) shall set the Request-URI to the public service identity identifying the
originating participating MCVideo function serving the MCVideo user;
2) shall include an application/vnd.3gpp.mcvideo-info+xml MIME body. In the
application/vnd.3gpp.mcvideo-info+xml MIME body, the MCVideo client shall
include the \ element set to the MCVideo ID of the
MCVideo user;
3) shall include the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"
(coded as specified in 3GPP TS 24.229 [11]), in a P-Preferred-Service header
field according to IETF RFC 6050 [14];
4) shall set the Event header field to the \'poc-settings\' value;
5) shall include an Accept header field containing the \"application/poc-
settings+xml\" MIME type;
6) if the MCVideo client wants to receive the current status and later
notification, shall set the Expires header field according to IETF RFC 6665
[16], to 4294967295; and
NOTE 1: 4294967295, which is equal to 2^32^-1, is the highest value defined
for Expires header field in IETF RFC 3261 [15].
7) if the MCVideo client wants to fetch the current state only, shall set the
Expires header field according to IETF RFC 6665 [16], to zero.
In order to re-subscribe or de-subscribe, the MCVideo client shall generate an
in-dialog SIP SUBSCRIBE request according to 3GPP TS 24.229 [11], IETF RFC
6665 [16], IETF RFC 4354 [53]. In the SIP SUBSCRIBE request, the MCVideo
client:
1) shall set the Event header field to the \'poc-settings\' value;
2) shall include an Accept header field containing the \"application/poc-
settings+xml\" MIME type;
3) if the MCVideo client wants to receive the current status and later
notification, shall set the Expires header field according to IETF RFC 6665
[16], to 4294967295; and
NOTE 2: 4294967295, which is equal to 2^32^-1, is the highest value defined
for Expires header field in IETF RFC 3261 [15].
4) if the MCVideo client wants to de-subscribe, shall set the Expires header
field according to IETF RFC 6665 [16], to zero.
Upon receiving a SIP NOTIFY request according to 3GPP TS 24.229 [11], IETF RFC
6665 [16] and IETF RFC 4354 [53], that contains an application/poc-
settings+xml MIME body the MCVideo client shall cache:
1) the \ element of the poc-settings+xml MIME body for each
MCVideo client identified by the \"id\" attribute according to IETF RFC 4354
[53] as the current Answer-mode indication of that MPCTT client; and
2) the \ element of the poc-settings+xml MIME
body for each MCVideo client identified by the \"id\" attribute according to
IETF RFC 4354 [53] as the active MCVideo user profile of that MCVideo client.
### 7.2.5 Receiving a CSK key download message
When the MCVideo client receives a SIP MESSAGE request containing:
1) a P-Asserted-Service header field containing the \"urn:urn-7:3gpp-
service.ims.icsi.mcvideo\"; and
2) an application/mikey MIME body;
Then, if the key identifier within the CSB-ID of the MIKEY payload is a CSK-ID
(4 most-significant bits have the value \'2\'), the MCVideo client:
1) shall follow the security procedures in clause 9.2.1 of 3GPP TS 33.180 [8]
to extract the CSK. The client:
a) if the initiator field (IDRi) has type \'URI\' (identity hiding is not
used), the client:
i) shall extract the initiator URI from the initiator field (IDRi) of the
I_MESSAGE as described in 3GPP TS 33.180 [8]. If the initiator URI deviates
from the public service identity of the participating MCVideo function serving
the MCVideo user, shall reject the SIP MESSAGE request with a SIP 488 (Not
Acceptable Here) response as specified in IETF RFC 4567 [34], and include
warning text set to \"136 authentication of the MIKEY-SAKKE I_MESSAGE failed\"
in a Warning header field as specified in clause 4.4 and shall not continue
with the rest of the steps;
ii) shall convert the initiator URI to a UID as described in 3GPP TS 33.180
[8];
b) if the initiator field (IDRi) has type \'UID\' (identity hiding in use),
the client:
ii) shall convert the public service identity of participating MCVideo
function serving the MCVideo user to a UID as described in 3GPP TS 33.180 [8];
i) shall compare the generated UID with the UID in the initiator field (IDRi)
of the I_MESSAGE as described in 3GPP TS 33.180 [8]. If the two initiator UIDs
deviate from each other, shall reject the SIP MESSAGE request with a SIP 488
(Not Acceptable Here) response as specified in IETF RFC 4567 [34], and include
warning text set to \"136 authentication of the MIKEY-SAKKE I_MESSAGE failed\"
in a Warning header field as specified in clause 4.4 and shall not continue
with the rest of the steps;
c) shall use the UID to validate the signature of the I_MESSAGE as described
in 3GPP TS 33.180 [8];
d) if authentication verification of the I_MESSAGE fails, shall reject the SIP
MESSAGE request with a SIP 488 (Not Acceptable Here) response as specified in
IETF RFC 4567 [34], and include warning text set to \"136 authentication of
the MIKEY-SAKKE I_MESSAGE failed\" in a Warning header field as specified in
clause 4.4 and shall not continue with the rest of the steps;
e) shall extract and decrypt the encapsulated CSK using the participating
MCVideo function\'s (KMS provisioned) UID key as described in 3GPP TS 33.180
[8]; and
f) shall extract the CSK-ID, from the payload as specified in 3GPP TS 33.180
[8];
2) Upon successful extraction, the client shall replace the existing CSK and
CSK-ID associated with the participating MCVideo function, with the extracted
CSK and CSK-ID in the \'key download\' message.
## 7.3 MCVideo server procedures
### 7.3.1 General
The MCVideo server obtains information that it needs to implement service
authorization specific requirements from:
a) any received third-party SIP REGISTER request (e.g. including information
contained in the body of the third-party SIP REGISTER request) as specified in
3GPP TS 24.229 [11]. The body will carry the SIP REGISTER request as sent by
the MCVideo client and may contain information needed for service
authorization; or
b) any received SIP PUBLISH request for MCVideo server settings containing the
g.3gpp.mcvideo media feature tag along with the \"require\" and \"explicit\"
header field parameters. The body of the SIP PUBLISH request will contain
information needed for service authorization.
### 7.3.1A Confidentiality and Integrity Protection
When the MCVideo server receives a SIP REGISTER request sent from the MCVideo
client contained within a message/sip MIME body of a received third-party SIP
REGISTER request or a SIP PUBLISH request, it first determines whether XML
MIME bodies included in the request are integrity protected. If XML MIME
bodies are integrity protected the MCVideo server validates the signature of
each of the XML MIME bodies. If the integrity protection check(s) pass or the
XML MIME bodies are not integrity protected, the MCVideo server then
determines whether the content in specific XML elements is confidentiality
protected. If XML content is confidentiality protected, the MCVideo server
decrypts the protected content.
Upon receiving:
\- a SIP REGISTER request containing an application/vnd.3gpp.mcvideo-info+xml
MIME body within a message/sip MIME body of the SIP REGISTER request sent from
the MCVideo client; or
\- a SIP PUBLISH request containing an application/vnd.3gpp.mcvideo-info+xml
MIME body and an application/poc-settings+xml MIME body;
the MCVideo server:
1) shall determine if integrity protection has been applied to XML MIME bodies
in the SIP request by following the procedures in clause 6.6.3.4.1 for each
XML MIME body;
2) if integrity protection has been applied, shall use the keying data
described in clause 6.6.3.2 and the procedures described in clause 6.6.3.4.2
to verify the integrity of each of the XML MIME bodies; and
3) if all integrity protection checks succeed, shall continue with the
remaining steps of this clause.
Upon receiving:
\- a SIP REGISTER request containing an application/vnd.3gpp.mcvideo-info+xml
MIME body with an \ element and an \
element within a message/sip MIME body of the SIP REGISTER request sent from
the MCVideo client; or
\- a SIP PUBLISH request containing an application/vnd.3gpp.mcvideo-info+xml
MIME body with an \ element and an \
element, and an application/poc-settings+xml MIME body;
the MCVideo server:
1) shall determine if confidentiality protection has been applied to the
\ element and the \ element in the
application/vnd.3gpp.mcvideo-info+xml MIME body, by following the procedures
in clause 6.6.2.4.1;
2) if confidentiality protection has been applied to the \ element and \ element:
a) shall use the keying information received in the MIKEY-SAKKE I_MESSAGE as
specified in 3GPP TS 33.180 [8], along with the procedures described in clause
6.6.2.4.2 to:
i) decrypt the received access token in the \ element in
the application/vnd.3gpp.mcvideo-info+xml MIME body; and
ii) decrypt the received MCVideo client ID in the \ element
in the application/vnd.3gpp.mcvideo-info+xml MIME body;
b) if the decryption procedure succeeds, shall identify the MCVideo ID and the
MCVideo client ID from the decrypted values; and
c) if the decryption procedure fails, shall determine that confidentiality
protection has not been successful;
3) if confidentiality protection has been applied to only one of the
\ element or the \ element:
a) shall determine that confidentiality protection has not been successful;
4) if confidentiality protection has not been applied:
a) shall identify the MCVideo ID from \ element received
in the application/vnd.3gpp.mcvideo-info+xml MIME body; and
b) shall identify the MCVideo client ID from the \ element
received in the application/vnd.3gpp.mcvideo-info+xml MIME body.
Upon receiving a SIP PUBLISH request containing an
application/vnd.3gpp.mcvideo-info+xml MIME body with an \
element, an \ element, and an application/poc-settings+xml
MIME body, the MCVideo server:
1) shall determine if confidentiality protection has been applied to the
\ element and the \ element in the
application/vnd.3gpp.mcvideo-info+xml MIME body by following the procedures in
clause 6.6.2.4.1;
2) if confidentiality protection has been applied to the \ element and the \ element:
a) shall use the keying information described in clause 6.6.2.2 along with the
procedures described in clause 6.6.2.4.2 to:
i) decrypt the received encrypted MCVideo ID in the \
element in the application/vnd.3gpp.mcvideo-info+xml MIME body; and
ii) decrypt the received encrypted MCVideo client ID in the \ element in the application/vnd.3gpp.mcvideo-info+xml MIME body;
b) if all decryption procedures succeed, shall identify the MCVideo ID and
MCVideo client ID from the decrypted values; and
c) if the decryption procedure fails, shall determine that confidentiality
protection has not been successful;
3) if confidentiality protection has been applied to only one of the
\ element or \ element:
a) shall determine that confidentiality protection has not been successful;
4) if confidentiality protection has not been applied:
a) shall identify the MCVideo ID from the contents of the \ element in the application/vnd.3gpp.mcvideo-info+xml MIME body;and
b) shall identify the MCVideo client ID from the \ element
received in the application/vnd.3gpp.mcvideo-info+xml MIME body.
### 7.3.2 SIP REGISTER request for service authorisation
The MCVideo server shall support obtaining service authorization specific
information from the SIP REGISTER request sent from the MCVideo client and
included in the body of a third-party SIP REGISTER request.
NOTE 1: 3GPP TS 24.229 [11] defines how based on initial filter criteria the
SIP REGISTER request sent from the UE is included in the body of the third-
party SIP REGISTER request.
Upon receiving a third party SIP REGISTER request with a message/sip MIME body
containing the SIP REGISTER request sent from the MCVideo client containing an
application/vnd.3gpp.mcvideo-info+xml MIME body with an \ element and an \ element within a message/sip MIME
body of the SIP REGISTER request sent from the MCVideo client, the MCVideo
server:
1) shall identify the IMS public user identity from the third-party SIP
REGISTER request;
2) shall identify the MCVideo ID from the SIP REGISTER request sent from the
MCVideo client and included in the message/sip MIME body of the third-party
SIP REGISTER request by following the procedures in clause 7.3.1A;
3) shall perform service authorization for the identified MCVideo ID as
described in 3GPP TS 33.180 [8];
4) if service authorization was successful, shall bind the MCVideo ID to the
IMS public user identity; and
NOTE 2: The MCVideo server will store the binding MCVideo ID, IMS public user
identity and an identifier addressing the MCVideo server in an external
database.
5) if a Resource-Share header field with the value \"supported\" is contained
in the \"message/sip\" MIME body of the third-party REGISTER request, shall
bind the MCVideo ID to the identity of the MCVideo UE contained in the
\"+g.3gpp.registration-token\" header field parameter in the Contact header
field of the incoming third-party REGISTER request.
### 7.3.3 SIP PUBLISH request for service authorisation and service settings
The MCVideo server shall support obtaining service authorization specific
information from a SIP PUBLISH request for MCVideo server settings.
Upon receiving a SIP PUBLISH request containing:
1) an Event header field set to the \"poc-settings\" value;
2) an application/poc-settings+xml MIME body; and
3) an application/vnd.3gpp.mcvideo-info+xml MIME body containing an \ element and an \ element;
the MCVideo server:
1) shall identify the IMS public user identity from the P-Asserted-Identity
header field;
2) shall perform the procedures in clause 7.3.1A;
3) if the procedures in clause 7.3.1A were not successful shall send a SIP 403
(Forbidden) response towards the MCVideo server with the warning text set to:
\"140 unable to decrypt XML content \" in a Warning header field as specified
in clause 4.4, and not continue with the rest of the steps in this clause;
4) shall perform service authorization for the identified MCVideo ID as
described in 3GPP TS 33.180 [8];
5) if service authorization was successful:
a) shall bind the MCVideo ID to the IMS public user identity; and
b) if a Resource-Share header field with the value \"supported\" was included
in the \"message/sip\" MIME body of the third-party REGISTER request, shall
bind the MCVideo ID to the identity of the MCVideo UE contained in the
\"+g.3gpp.registration-token\" header field parameter in the Contact header
field of the third-party REGISTER request that contained this IMS public user
identity;
NOTE 1: The MCVideo server will store the binding MCVideo ID, IMS public user
identity and an identifier addressing the MCVideo server in an external
database.
6) if service authorization was not successful, shall send a SIP 403
(Forbidden) response towards the MCVideo server with the warning text set to:
\"101 service authorisation failed\" in a Warning header field as specified in
clause 4.4, and not continue with the rest of the steps in this clause;
7) shall process the SIP PUBLISH request according to rules and procedures of
IETF RFC 3903 [12] and if processing of the SIP request was not successful, do
not continue with the rest of the steps;
8) shall cache the received MCVideo service settings until the MCVideo service
settings expiration timer expires;
9) shall send a SIP 200 (OK) response according 3GPP TS 24.229 [11];
10) shall use the Answer-Mode Indication setting in the \ element
of the poc-settings event package as the current Answer-Mode Indication of the
MCVideo client.
11) shall download the MCVideo user profile from the MCVideo user database as
defined in 3GPP TS 29.283 [54] if not already stored at the MCVideo server and
use the \ element of the poc-settings event
package if included to identify the active MCVideo user profile for the
MCVideo client;
NOTE 2: If the \ element of the poc-settings
event package is included then only that MCVideo user profile is needed to be
downloaded from the MCVideo user database.
12) if there is no \ element included in the poc-
settings event package then if multiple MCVideo user profiles are stored at
the MCVideo server or downloaded for the MCVideo user from the MCVideo user
database, shall determine the pre-selected MCVideo user profile to be used as
the active MCVideo user profile by identifying the MCVideo user profile (see
the MCVideo user profile document in 3GPP TS 24.484 [25]) in the collection of
MCVideo user profiles that contains a \ element; and
NOTE 3: If only one MCVideo user profile is stored at the MCVideo server or
only one MCVideo user profile is downloaded from the MCVideo user database,
then by default this MCVideo user profile is the pre-selected MCVideo user
profile.
13) if an \ element is contained in the \
element of the MCVideo user profile document with one or more \
elements containing an MCVideo group ID (see the MCVideo user profile document
in 3GPP TS 24.484 [25]) for the served MCVideo ID, shall perform implicit
affiliation as specified in clause 8.2.2.2.15
### 7.3.4 Receiving SIP PUBLISH request for MCVideo service settings only
Upon receiving a SIP PUBLISH request containing:
1) an Event header field set to the \"poc-settings\" value;
2) an application/poc-settings+xml MIME body; and
3) an application/vnd.3gpp.mcvideo-info+xml MIME body containing an \ element and an \ element;
The MCVideo server:
1) shall identify the IMS public user identity from the P-Asserted-Identity
header field;
2) shall perform the procedures in clause 7.3.1A;
3) if the procedures in clause 7.3.1A were not successful, shall send a SIP
403 (Forbidden) response towards the MCVideo server with the warning text set
to: \"140 unable to decrypt XML content\" in a Warning header field as
specified in clause 4.4, and not continue with the rest of the steps in this
clause;
4) shall verify that a binding between the IMS public user identity in the
Request-URI and the MCVideo ID in the \ element of the
application/vnd.3gpp.mcvideo-info+xml exists at the MCVideo server;
5) if a binding exists between the IMS public user identity and the MCVideo ID
in the request and the validity period of the binding has not expired shall
download the MCVideo user profile from the MCVideo user database as defined in
3GPP TS 29.283 [54] if not already stored at the MCVideo server;
6) if a binding does not exist between the IMS public user identity and the
MCVideo ID in the request or the binding exists, but the validity period of
the binding has expired, shall reject the SIP PUBLISH request with a SIP 404
(Not Found) response and not continue with any of the remaining steps;
7) shall process the SIP PUBLISH request according to rules and procedures of
IETF RFC 3903 [12] and if processing of the SIP request was not successful, do
not continue with the rest of the steps;
8) shall cache the received MCVideo service settings until the MCVideo service
settings expiration timer expires;
9) shall send a SIP 200 (OK) response according 3GPP TS 24.229 [11];
10) shall use the Answer-Mode Indication setting in the \ element
of the poc-settings event package as the current Answer-Mode Indication of the
MCVideo client.
11) shall download the MCVideo user profile from the MCVideo user database as
defined in 3GPP TS 29.283 [54] if not already stored at the MCVideo server and
use the \ element of the poc-settings event
package if included to identify the active MCVideo user profile for the
MCVideo client;
NOTE 1: If the \ element of the poc-settings
event package is included then only that MCVideo user profile is needed to be
downloaded from the MCVideo user database.
12) if there is no \ element included in the poc-
settings event package then if multiple MCVideo user profiles are stored at
the MCVideo server or downloaded for the MCVideo user from the MCVideo user
database, shall determine the pre-selected MCVideo user profile to be used as
the active MCVideo user profile by identifying the MCVideo user profile (see
the MCVideo user profile document in 3GPP TS 24.484 [25]) in the collection of
MCVideo user profiles that contains a \ element; and
NOTE 2: If only one MCVideo user profile is stored at the MCVideo server or
only one MCVideo user profile is downloaded from the MCVideo user database,
then by default this MCVideo user profile is the pre-selected MCVideo user
profile.
13) if an \ element is contained in the \
element of the MCVideo user profile document with one or more \
elements containing an MCVideo group ID (see the MCVideo user profile document
in 3GPP TS 24.484 [25]) for the served MCVideo ID, shall perform implicit
affiliation as specified in clause 8.2.2.2.15.
### 7.3.5 Receiving SIP PUBLISH request with \"Expires=0\"
Upon receiving a SIP PUBLISH request containing:
1) an Event header field set to the \"poc-settings\" value; and
2) an Expires header field set to 0;
the MCVideo server:
1) shall identify the IMS public user identity from the P-Asserted-Identity
header field;
2) shall process the SIP PUBLISH request according to rules and procedures of
IETF RFC 3903 [12] and if processing of the SIP request was successful,
continue with the rest of the steps;
3) shall remove the MCVideo service settings;
4) shall remove the binding between the MCVideo ID and public user identity;
and
5) shall send a SIP 200 (OK) response according to 3GPP TS 24.229 [11].
### 7.3.6 Subscription to and notification of MCVideo service settings
#### 7.3.6.1 Receiving subscription to MCVideo service settings
Upon receiving a SIP SUBSCRIBE request such that:
1) Request-URI of the SIP SUBSCRIBE request contains the public service
identity identifying the participating MCVideo function of the served MCVideo
user;
2) the SIP SUBSCRIBE request contains an application/vnd.3gpp.mcvideo-info+xml
MIME body containing the\ element which identifies an
MCVideo ID served by the MCVideo server;
3) the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\" (coded as
specified in 3GPP TS 24.229 [11]), in a P-Asserted-Service header field
according to IETF RFC 6050 [14]; and
3) the Event header field of the SIP SUBSCRIBE request contains the \'poc-
settings\' event type.
the MCVideo server:
1) shall identify the served MCVideo ID in the \ element
of the application/vnd.3gpp.mcvideo-info+xml MIME body of the SIP SUBSCRIBE
request;
2) if the Request-URI of the SIP SUBSCRIBE request contains the public service
identity identifying the participating MCVideo function serving the MCVideo
user, shall identify the originating MCVideo ID from public user identity in
the P-Asserted-Identity header field of the SIP SUBSCRIBE request;
3) if the originating MCVideo ID is different than the served MCVideo ID,
shall send a 403 (Forbidden) response and shall not continue with the rest of
the steps; and
4) shall generate a 200 (OK) response to the SIP SUBSCRIBE request according
to 3GPP TS 24.229 [11], IETF RFC 6665 [16] and IETF RFC 4354 [53].
For the duration of the subscription, the MCVideo server shall notify
subscriber about changes of the MCVideo service settings of the subscribed
MCVideo user, as described in clause 7.3.6.2.
#### 7.3.6.2 Sending notification of change of MCVideo service settings
In order to notify the subscriber about changes of the MCVideo service
settings of the subscribed MCVideo client of the subscribed MCVideo user, the
MCVideo server:
1) shall generate an application/poc-settings+xml MIME body as defined in 3GPP
TS 24.379 [40] containing:
a) the \ element of the poc-settings event package set to the
current answer mode setting of the MCVideo client according to IETF RFC 4354
[53]; and
b) the \ element as defined in clause 7.4.1.2
identifying the active MCVideo user profile; and
2) send a SIP NOTIFY request according to 3GPP TS 24.229 [11], IETF RFC 6665
[16] and IETF RFC 4354 [53] with the constructed application/poc-settings+xml
MIME body.
### 7.3.7 Sending a CSK key download message
If confidentiality protection is enabled as specified in clause 6.6.2.3.1, and
if the participating MCVideo function received a Client Server Key (CSK)
within a SIP REGISTER request for service authorisation or SIP PUBLISH request
for service authorisation, the participating MCVideo function may decide to
update the CSK. In this case, the participating MCVideo function shall perform
a key download procedure for the CSK. The participating MCVideo function:
1) shall generate an SIP MESSAGE request in accordance with 3GPP TS 24.229
[11] and IETF RFC 3428 [17];
2) shall set the Request-URI to the URI received in the To header field in a
third-party SIP REGISTER request;
3) shall include an Accept-Contact header field with the g.3gpp.icsi-ref
media-feature tag with the value of \"urn:urn-7:3gpp-
service.ims.icsi.mcvideo\" along with parameters \"require\" and \"explicit\"
according to IETF RFC 3841 [20];
4) shall include a P-Asserted-Service header field with the value
\"urn:urn-7:3gpp-service.ims.icsi.mcvideo\";
5) shall include an application/mikey MIME body containing the CSK-ID and the
CSK encrypted within a MIKEY message to the MC client as specified in clause
9.2.1 of 3GPP TS 33.180 [8] in the body of the SIP MESSAGE request;
6) shall send the SIP MESSAGE request towards the MCVideo client according to
3GPP TS 24.229 [11].
## 7.4 Coding
### 7.4.1 Extension of MIME types
#### 7.4.1.1 General
The parent clause of this clause defines extensions of MIME type defined in
other documents.
#### 7.4.1.2 Extension of application/poc-settings+xml MIME type
##### 7.4.1.2.1 Introduction
The parent clause of this clause describes extension of the application/poc-
settings+xml MIME body specified in IETF RFC 4354 [53]. The extension is used
to indicate the selected MCS user profile at an MC client.
##### 7.4.1.2.2 Syntax
The application/poc-settings+xml MIME body indicating the selected MCS user
profile at an MC client is constructed according to IETF RFC 4354 [53] and:
1) contains a \ root element according to IETF RFC 4354 [53];
2) contains one or more \ child element according to IETF RFC 4354
[53] of the \ element;
3) contains one \ child element defined in the
XML schema defined in table 7.4.1.2.2-2, of the \ element;
NOTE: The \ element is validated by the \ particle of the \ element.
The application/poc-settings+xml MIME body refers to namespaces using prefixes
specified in table 7.4.1.2.2-1.
Table 7.4.1.2.2-1: Assignment of prefixes to namespace names in the
application/poc-settings+xml MIME body
* * *
Prefix Namespace PoC1Set urn:oma:params:xml:ns:poc:poc-settings mcs10Set
urn:3gpp:mcsSettings:1.0
* * *
Table 7.4.1.2.2-2: XML schema with elements and attributes extending the
application/poc-settings+xml MIME body
\
\
\
\
\
\
\
\
\
\
\
\
An example application/poc-settings+xml MIME body showing the MC service
settings for two MC clients as might be included in the body of a SIP NOTIFY
request is shown in table 7.4.1.2.2-3.
Table 7.4.1.2.2-3: Example application/poc-settings+xml MIME body showing the
MC service settings for two MC clients as might be included in the body of a
SIP NOTIFY request
\
\
\
\
\automatic\
\
\
\1\
\
\
\
\
\manual\
\
\
\2\
\
\
\
# 8 Affiliation
## 8.1 General
Clause 8.2 contains the procedures for explicit affiliation at the MCVideo
client, the MCVideo server serving the MCVideo user and the MCVideo server
owning the MCVideo group.
Clause 8.2 contains the procedures for implicit affiliation at the MCVideo
server serving the MCVideo user and the MCVideo server owning the MCVideo
group.
Clause 8.3 describes the coding used for explicit affiliation.
The procedures for implicit affiliation in this clause are triggered at the
MCVideo server serving the MCVideo user in the following circumstances:
\- on receipt of a SIP INVITE request or a SIP REFER request from an MCVideo
client to join an MCVideo chat group, where the MCVideo client is not already
affiliated to the MCVideo group;
\- on receipt of a SIP INVITE request or a SIP REFER request from an MCVideo
client when attempting to initiate an MCVideo emergency group call or MCVideo
imminent peril group call and the MCVideo client is not already affiliated to
the MCVideo group;
\- on receipt of a SIP MESSAGE request from an MCVideo client when initiating
an MCVideo emergency alert targeted to an MCVideo group and the MCVideo client
is not already affiliated to the MCVideo group; and
\- on receipt of a SIP REGISTER request for service authorisation (as
described in clause 7.3.2) or SIP PUBLISH request for service authorisation
and service settings (as described in clause 7.3.2), as determined by
configuration in the MCVideo user profile document as specified in 3GPP TS
24.484 [25].
The procedures for implicit affiliation in this clause are triggered at the
MCVideo server owning the MCVideo group in the following circumstances:
\- on receipt of a SIP INVITE request from the MCVideo server serving the
MCVideo user where an MCVideo user wants to join an MCVideo chat group and the
MCVideo client is not already affiliated to the MCVideo group;
\- on receipt of a SIP INVITE request from the MCVideo server serving the
MCVideo user where an MCVideo user initiates an MCVideo emergency group call
or MCVideo imminent peril group call and the MCVideo client is not already
affiliated to the MCVideo group; and
\- on receipt of a SIP MESSAGE request from the MCVideo server serving the
MCVideo user when the MCVideo user initiates an MCVideo emergency alert
targeted to an MCVideo group and the MCVideo client is not already affiliated
to the MCVideo group.
## 8.2 Procedures
### 8.2.1 MCVideo client procedures
#### 8.2.1.1 General
The MCVideo client procedures consist of:
\- an affiliation status change procedure;
\- an affiliation status determination procedure;
\- a procedure for sending affiliation status change request in negotiated
mode to target MCVideo user; and
\- a procedure for receiving affiliation status change request in negotiated
mode from authorized MCVideo user.
In order to obtain information about success or rejection of changes triggered
by the affiliation status change procedure for an MCVideo user, the MCVideo
client needs to initiate the affiliation status determination procedure for
the MCVideo user before starting the affiliation status change procedure for
the MCVideo user.
#### 8.2.1.2 Affiliation status change procedure
In order:
\- to indicate that an MCVideo user is interested in one or more MCVideo
group(s) at an MCVideo client;
\- to indicate that the MCVideo user is no longer interested in one or more
MCVideo group(s) at the MCVideo client;
\- to refresh indication of an MCVideo user interest in one or more MCVideo
group(s) at an MCVideo client due to near expiration of the expiration time of
an MCVideo group with the affiliation status set to the \"affiliated\" state
received in a SIP NOTIFY request in clause 8.2.1.3;
\- to send an affiliation status change request in mandatory mode to another
MCVideo user; or
\- any combination of the above;
the MCVideo client shall generate a SIP PUBLISH request according to 3GPP TS
24.229 [11], IETF RFC 3903 [12], and IETF RFC 3856 [13].
In the SIP PUBLISH request, the MCVideo client:
1) shall set the Request-URI to the public service identity identifying the
originating participating MCVideo function serving the MCVideo user;
2) shall include an application/vnd.3gpp.mcvideo-info+xml MIME body. In the
application/vnd.3gpp.mcvideo-info+xml MIME body, the MCVideo client shall
include the \ element set to the MCVideo ID of the
MCVideo user;
3) shall include the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"
(coded as specified in 3GPP TS 24.229 [11]), in a P-Preferred-Service header
field according to IETF RFC 6050 [14];
4) if the targeted MCVideo user is interested in at least one MCVideo group at
the targeted MCVideo client, shall set the Expires header field according to
IETF RFC 3903 [12], to 4294967295;
NOTE 1: 4294967295, which is equal to 2^32^-1, is the highest value defined
for Expires header field in IETF RFC 3261 [15].
5) if the targeted MCVideo user is no longer interested in any MCVideo group
at the targeted MCVideo client, shall set the Expires header field according
to IETF RFC 3903 [12], to zero; and
6) shall include an application/pidf+xml MIME body indicating per-user
affiliation information according to clause 8.3.1. In the MIME body, the
MCVideo client:
a) shall include all MCVideo groups where the targeted MCVideo user indicates
its interest at the targeted MCVideo client;
b) shall include the MCVideo client ID of the targeted MCVideo client;
c) shall not include the \"status\" attribute and the \"expires\" attribute in
the \ element; and
d) shall set the \ child element of the \ root element to a
globally unique value.
The MCVideo client shall send the SIP PUBLISH request according to 3GPP TS
24.229 [11].
#### 8.2.1.3 Affiliation status determination procedure
NOTE 1: The MCVideo UE also uses this procedure to determine which MCVideo
groups the MCVideo user successfully affiliated to.
In order to discover MCVideo groups:
1) which the MCVideo user at an MCVideo client is affiliated to; or
2) which another MCVideo user is affiliated to;
the MCVideo client shall generate an initial SIP SUBSCRIBE request according
to 3GPP TS 24.229 [11], IETF RFC 3856 [13], and IETF RFC 6665 [16].
In the SIP SUBSCRIBE request, the MCVideo client:
1) shall set the Request-URI to the public service identity identifying the
originating participating MCVideo function serving the MCVideo user;
2) shall include an application/vnd.3gpp.mcvideo-info+xml MIME body. In the
application/vnd.3gpp.mcvideo-info+xml MIME body, the MCVideo client shall
include the \ element set to the MCVideo ID of the
targeted MCVideo user;
3) shall include the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"
(coded as specified in 3GPP TS 24.229 [11]), in a P-Preferred-Service header
field according to IETF RFC 6050 [14];
4) if the MCVideo client wants to receive the current status and later
notification, shall set the Expires header field according to IETF RFC 6665
[16], to 4294967295;
NOTE 2: 4294967295, which is equal to 2^32^-1, is the highest value defined
for Expires header field in IETF RFC 3261 [15].
5) if the MCVideo client wants to fetch the current state only, shall set the
Expires header field according to IETF RFC 6665 [16], to zero; and
6) shall include an Accept header field containing the application/pidf+xml
MIME type; and
7) if requesting MCVideo groups where the MCVideo user is affiliated to at the
MCVideo client, shall include an application/simple-filter+xml MIME body
indicating per client restrictions of presence event package notification
information according to clause 8.3.2.
In order to re-subscribe or de-subscribe, the MCVideo client shall generate an
in-dialog SIP SUBSCRIBE request according to 3GPP TS 24.229 [11], IETF RFC
3856 [13], and IETF RFC 6665 [16]. In the SIP SUBSCRIBE request, the MCVideo
client:
1) if the MCVideo client wants to receive the current status and later
notification, shall set the Expires header field according to IETF RFC 6665
[16], to 4294967295;
NOTE 3: 4294967295, which is equal to 2^32^-1, is the highest value defined
for Expires header field in IETF RFC 3261 [15].
2) if the MCVideo client wants to de-subscribe, shall set the Expires header
field according to IETF RFC 6665 [16], to zero; and
3) shall include an Accept header field containing the application/pidf+xml
MIME type.
Upon receiving a SIP NOTIFY request according to 3GPP TS 24.229 [11], IETF RFC
3856 [13], and IETF RFC 6665 [16], if SIP NOTIFY request contains an
application/pidf+xml MIME body indicating per-user affiliation information
constructed according to clause 8.3.1, then the MCVideo client shall determine
affiliation status of the MCVideo user for each MCVideo group at the MCVideo
client(s) in the MIME body. If the \ child element of the \
root element of the application/pidf+xml MIME body of the SIP NOTIFY request
is included, the \ element value indicates the SIP PUBLISH request which
triggered sending of the SIP NOTIFY request.
#### 8.2.1.4 Procedure for sending affiliation status change request in
negotiated mode to target MCVideo user
NOTE: Procedure for sending affiliation status change request in negotiated
mode to several target MCVideo users is not supported in this version of the
specification.
Upon receiving a request from the MCVideo user to send an affiliation status
change request in negotiated mode to a target MCVideo user, the MCVideo client
shall generate a SIP MESSAGE request in accordance with 3GPP TS 24.229 [11]
and IETF RFC 3428 [17]. In the SIP MESSAGE request, the MCVideo client:
1) shall set the Request-URI to the public service identity identifying the
originating participating MCVideo function serving the MCVideo user;
2) shall include an application/vnd.3gpp.mcvideo-info+xml MIME body. In the
application/vnd.3gpp.mcvideo-info+xml MIME body, the MCVideo client shall
include the \ element set to the MCVideo ID of the target
MCVideo user;
3) shall include the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"
(coded as specified in 3GPP TS 24.229 [11]), in a P-Preferred-Service header
field according to IETF RFC 6050 [14] in the SIP MESSAGE request;
4) shall include an application/vnd.3gpp.mcvideo-affiliation-command+xml MIME
body as specified in Annex F.4; and
5) shall send the SIP MESSAGE request according to rules and procedures of
3GPP TS 24.229 [11].
On receiving a SIP 2xx response to the SIP MESSAGE request, the MCVideo client
shall indicate to the user that the request has been delivered to an MCVideo
client of the target MCVideo user.
#### 8.2.1.5 Procedure for receiving affiliation status change request in
negotiated mode from authorized MCVideo user
Upon receiving a SIP MESSAGE request containing:
1) the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\" (coded as
specified in 3GPP TS 24.229 [11]), in a P-Asserted-Service header field
according to IETF RFC 6050 [14]; and
2) an application/vnd.3gpp.mcvideo-affiliation-command+xml MIME body with a
list of MCVideo groups for affiliation under the \ element and a
list of MCVideo groups for de-affiliation under the \ element;
then the MCVideo client:
1) shall send a 200 (OK) response to the SIP MESSAGE request;
2) shall seek confirmation of the list of MCVideo groups for affiliation and
the list of MCVideo groups for de-affiliation, resulting in an accepted list
of MCVideo groups for affiliation and an accepted list of MCVideo groups for
de-affiliation; and
3) if the user accepts the request:
a) shall perform affiliation for each entry in the accepted list of MCVideo
groups for affiliation for which the MCVideo client is not affiliated, as
specified in clause 8.2.1.2; and
b) shall perform de-affiliation for each entry in the accepted list of MCVideo
groups for de-affiliation for which the MCVideo client is affiliated, as
specified in clause 8.2.1.2.
### 8.2.2 MCVideo server procedures
#### 8.2.2.1 General
The MCVideo server procedures consist of:
\- procedures of MCVideo server serving the MCVideo user; and
\- procedures of MCVideo server owning the MCVideo group.
#### 8.2.2.2 Procedures of MCVideo server serving the MCVideo user
##### 8.2.2.2.1 General
The procedures of MCVideo server serving the MCVideo user consist of:
\- a receiving affiliation status change from MCVideo client procedure;
\- a receiving subscription to affiliation status procedure;
\- a sending notification of change of affiliation status procedure;
\- a sending affiliation status change towards MCVideo server owning MCVideo
group procedure;
\- an affiliation status determination from MCVideo server owning MCVideo
group procedure;
\- a procedure for authorizing affiliation status change request in negotiated
mode sent to served MCVideo user;
\- a forwarding affiliation status change towards another MCVideo user
procedure;
\- a forwarding subscription to affiliation status towards another MCVideo
user procedure
\- an affiliation status determination procedure;
\- an affiliation status change by implicit affiliation procedure;
\- an implicit affiliation status change completion procedure;
\- an implicit affiliation status change cancellation procedure; and
\- an implicit affiliation to configured groups procedure.
##### 8.2.2.2.2 Stored information
The MCVideo server shall maintain a list of MCVideo user information entries.
The list of the MCVideo user information entries contains one MCVideo user
information entry for each served MCVideo ID.
In each MCVideo user information entry, the MCVideo server shall maintain:
1) an MCVideo ID. This field uniquely identifies the MCVideo user information
entry in the list of the MCVideo user information entries; and
2) a list of MCVideo client information entries.
In each MCVideo client information entry, the MCVideo server shall maintain:
1) an MCVideo client ID. This field uniquely identifies the MCVideo client
information entry in the list of the MCVideo client information entries; and
2) a list of MCVideo group information entries.
In each MCVideo group information, the MCVideo server shall maintain:
1) an MCVideo group ID. This field uniquely identifies the MCVideo group
information entry in the list of the MCVideo group information entries;
2) an affiliation status;
3) an expiration time;
4) an affiliating p-id; and
5) a next publishing time.
##### 8.2.2.2.3 Receiving affiliation status change from MCVideo client
procedure
Upon receiving a SIP PUBLISH request such that:
1) Request-URI of the SIP PUBLISH request contains either the public service
identity identifying the originating participating MCVideo function serving
the MCVideo user, or the public service identity identifying the terminating
participating MCVideo function serving the MCVideo user;
2) the SIP PUBLISH request contains an application/vnd.3gpp.mcvideo-info+xml
MIME body containing the\ element which identifies an
MCVideo ID served by the MCVideo server;
3) the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\" (coded as
specified in 3GPP TS 24.229 [11]), in a P-Asserted-Service header field
according to IETF RFC 6050 [14];
4) the Event header field of the SIP PUBLISH request contains the \"presence\"
event type; and
5) SIP PUBLISH request contains an application/pidf+xml MIME body indicating
per-user affiliation information according to clause 8.3.1;
then the MCVideo server:
1) shall identify the served MCVideo ID in the \ element
of the application/vnd.3gpp.mcvideo-info+xml MIME body of the SIP PUBLISH
request;
2) if the Request-URI of the SIP PUBLISH request contains the public service
identity identifying the originating participating MCVideo function serving
the MCVideo user, shall identify the originating MCVideo ID from public user
identity in the P-Asserted-Identity header field of the SIP PUBLISH request;
3) if the Request-URI of the SIP PUBLISH request contains the public service
identity identifying the terminating participating MCVideo function serving
the MCVideo user, shall identify the originating MCVideo ID in the \ element of the application/vnd.3gpp.mcvideo-info+xml MIME
body of the SIP PUBLISH request;
4) if the originating MCVideo ID is different than the served MCVideo ID and
the originating MCVideo ID is not authorized to modify affiliation status of
the served MCVideo ID, shall send a 403 (Forbidden) response and shall not
continue with the rest of the steps;
5) if the Expires header field of the SIP PUBLISH request is not included or
has nonzero value lower than 4294967295, shall send a SIP 423 (Interval Too
Brief) response to the SIP PUBLISH request, where the SIP 423 (Interval Too
Brief) response contains a Min-Expires header field set to 4294967295, and
shall not continue with the rest of the steps;
6) if the Expires header field of the SIP PUBLISH request has nonzero value,
shall determine the candidate expiration interval to according to IETF RFC
3903 [12];
7) if the Expires header field of the SIP PUBLISH request has zero value,
shall set the candidate expiration interval to zero;
8) shall respond with SIP 200 (OK) response to the SIP PUBLISH request
according to 3GPP TS 24.229 [11], IETF RFC 3903 [12]. In the SIP 200 (OK)
response, the MCVideo server:
a) shall set the Expires header field according to IETF RFC 3903 [12], to the
candidate expiration time;
9) if the \"entity\" attribute of the \ element of the
application/pidf+xml MIME body of the SIP PUBLISH request is different than
the served MCVideo ID, shall not continue with the rest of the steps;
10) shall identify the served MCVideo client ID in the \"id\" attribute of the
\ element of the \ element of the application/pidf+xml MIME
body of the SIP PUBLISH request;
11) shall consider an MCVideo user information entry such that:
a) the MCVideo user information entry is in the list of MCVideo user
information entries described in clause 8.2.2.2.2; and
b) the MCVideo ID of the MCVideo user information entry is equal to the served
MCVideo ID;
as the served MCVideo user information entry;
12) shall consider an MCVideo client information entry such that:
a) the MCVideo client information entry is in the list of MCVideo client
information entries of the served MCVideo user information entry; and
b) the MCVideo client ID of the MCVideo client information entry is equal to
the served MCVideo client ID;
as the served MCVideo client information entry;
13) shall consider a copy of the list of the MCVideo group information entries
of the served MCVideo client information entry as the served list of the
MCVideo group information entries;
14) if the candidate expiration interval is nonzero:
a) shall construct the candidate list of the MCVideo group information entries
as follows:
i) for each MCVideo group ID which has an MCVideo group information entry in
the served list of the MCVideo group information entries, such that the
expiration time of the MCVideo group information entry has not expired yet,
and which is indicated in a \"group\" attribute of an \ element
of the \ element of the \ element of the \ root
element of the application/pidf+xml MIME body of the SIP PUBLISH request:
A) shall copy the MCVideo group information entry into a new MCVideo group
information entry of the candidate list of the MCVideo group information
entries;
B) if the affiliation status of the MCVideo group information entry is
\"deaffiliating\" or \"deaffiliated\", shall set the affiliation status of the
new MCVideo group information entry to the \"affiliating\" state and shall
reset the affiliating p-id of the new MCVideo group information entry; and
C) shall set the expiration time of the new MCVideo group information entry to
the current time increased with the candidate expiration interval;
ii) for each MCVideo group ID which has an MCVideo group information entry in
the served list of the MCVideo group information entries, such that the
expiration time of the MCVideo group information entry has not expired yet,
and which is not indicated in any \"group\" attribute of the \
element of the \ element of the \ element of the \
root element of the application/pidf+xml MIME body of the SIP PUBLISH request:
A) shall copy the MCVideo group information entry into a new MCVideo group
information entry of the candidate list of the MCVideo group information
entries; and
B) if the affiliation status of the MCVideo group information entry is
\"affiliated\" or \"affiliating\":
\- shall set the affiliation status of the new MCVideo group information entry
to the \"de-affiliating\" state; and
\- shall set the expiration time of the new MCVideo group information entry to
the current time increased with twice the value of timer F; and
iii) for each MCVideo group ID:
A) which does not have an MCVideo group information entry in the served list
of the MCVideo group information entries; or
B) which has an MCVideo group information entry in the served list of the
MCVideo group information entries, such that the expiration time of the
MCVideo group information entry has already expired;
> and which is indicated in a \"group\" element of the \ element
> of the \ element of the \ element of the \ root
> element of the application/pidf+xml MIME body of the SIP PUBLISH request:
A) shall add a new MCVideo group information entry in the candidate list of
the MCVideo group information list for the MCVideo group ID;
B) shall set the affiliation status of the new MCVideo group information entry
to the \"affiliating\" state;
C) shall set the expiration time of the new MCVideo group information entry to
the current time increased with the candidate expiration interval; and
D) shall reset the affiliating p-id of the new MCVideo group information
entry;
b) determine the candidate number of MCVideo group IDs as number of different
MCVideo group IDs which have an MCVideo group information entry:
i) in the candidate list of the MCVideo group information entries; or
ii) in the list of the MCVideo group information entries of an MCVideo client
information entry such that:
A) the MCVideo client information entry is in the list of the MCVideo client
information entries of the served MCVideo user information entry; and
B) the MCVideo client ID of the MCVideo client information entry is not equal
to the served MCVideo client ID;
with the affiliation status set to the \"affiliating\" state or the
\"affiliated\" state and with the expiration time which has not expired yet;
and
c) if the candidate number of MCVideo group IDs is bigger than N2 value of the
served MCVideo ID, shall based on MCVideo service provider policy reduce the
candidate MCVideo group IDs to that equal to N2;
NOTE: The MCVideo service provider policy can determine to remove an MCVideo
group ID based on the order it appeared in the PUBLISH request or based on the
importance or priority of the MCVideo group or some other policy to determine
which MCVideo groups are preferred.
15) if the candidate expiration interval is zero, constructs the candidate
list of the MCVideo group information entries as follows:
a) for each MCVideo group ID which has an entry in the served list of the
MCVideo group information entries:
i) shall copy the MCVideo group entry of the served list of the MCVideo group
information into a new MCVideo group information entry of the candidate list
of the MCVideo group information entries;
ii) shall set the affiliation status of the new MCVideo group information
entry to the \"de-affiliating\" state; and
iii) shall set the expiration time of the new MCVideo group information entry
to the current time increased with twice the value of timer F;
16) shall replace the list of the MCVideo group information entries stored in
the served MCVideo client information entry with the candidate list of the
MCVideo group information entries;
17) shall perform the procedures specified in clause 8.2.2.2.6 for the served
MCVideo ID and each MCVideo group ID:
a) which does not have an MCVideo group information entry in the served list
of the MCVideo group information entries and which has an MCVideo group
information entry in the candidate list of the MCVideo group information
entries with the affiliation status set to the \"affiliating\" state;
b) which has an MCVideo group information entry in the served list of the
MCVideo group information entries with the expiration time already expired,
and which has an MCVideo group information entry in the candidate list of the
MCVideo group information entries with the affiliation status set to the
\"affiliating\" state;
c) which has an MCVideo group information entry in the served list of the
MCVideo group information entries with the affiliation status set to the
\"deaffiliating\" state or the \"deaffiliated\" state and with the expiration
time not expired yet, and which has an MCVideo group information entry in the
candidate list of the MCVideo group information entries with the affiliation
status set to the \"affiliating\" state; or
d) which has an MCVideo group information entry in the served list of the
MCVideo group information entries with the affiliation status set to the
\"affiliated\" state and with the expiration time not expired yet, and which
has an MCVideo group information entry in the candidate list of the MCVideo
group information entries with the affiliation status set to the \"de-
affiliating\" state;
18) shall identify the handled p-id in the \ child element of the
\ root element of the application/pidf+xml MIME body of the SIP
PUBLISH request; and
19) shall perform the procedures specified in clause 8.2.2.2.5 for the served
MCVideo ID.
##### 8.2.2.2.4 Receiving subscription to affiliation status procedure
Upon receiving a SIP SUBSCRIBE request such that:
1) Request-URI of the SIP SUBSCRIBE request contains either the public service
identity identifying the originating participating MCVideo function serving
the MCVideo user, or the public service identity identifying the terminating
participating MCVideo function serving the MCVideo user;
2) the SIP SUBSCRIBE request contains an application/vnd.3gpp.mcvideo-info+xml
MIME body containing the\ element which identifies an
MCVideo ID served by the MCVideo server;
3) the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\" (coded as
specified in 3GPP TS 24.229 [11]), in a P-Asserted-Service header field
according to IETF RFC 6050 [14]; and
4) the Event header field of the SIP SUBSCRIBE request contains the
\"presence\" event type;
the MCVideo server:
1) shall identify the served MCVideo ID in the \ element
of the application/vnd.3gpp.mcvideo-info+xml MIME body of the SIP PUBLISH
request;
2) if the Request-URI of the SIP SUBSCRIBE request contains the public service
identity identifying the originating participating MCVideo function serving
the MCVideo user, shall identify the originating MCVideo ID from public user
identity in the P-Asserted-Identity header field of the SIP SUBSCRIBE request;
3) if the Request-URI of the SIP SUBSCRIBE request contains the public service
identity identifying the terminating participating MCVideo function serving
the MCVideo user, shall identify the originating MCVideo ID in the \ element of the application/vnd.3gpp.mcvideo-info+xml MIME
body of the SIP SUBSCRIBE request;
4) if the originating MCVideo ID is different than the served MCVideo ID and
the originating MCVideo ID is not authorized to modify affiliation status of
the served MCVideo ID, shall send a 403 (Forbidden) response and shall not
continue with the rest of the steps; and
5) shall generate a 200 (OK) response to the SIP SUBSCRIBE request according
to 3GPP TS 24.229 [11], IETF RFC 6665 [16].
For the duration of the subscription, the MCVideo server shall notify the
subscriber about changes of the information of the served MCVideo ID, as
described in clause 8.2.2.2.5.
##### 8.2.2.2.5 Sending notification of change of affiliation status procedure
In order to notify the subscriber about changes of the served MCVideo ID, the
MCVideo server:
1) shall consider an MCVideo user information entry such that:
a) the MCVideo user information entry is in the list of MCVideo user
information entries described in clause 8.2.2.2.2; and
b) the MCVideo ID of the MCVideo user information entry is equal to the served
MCVideo ID;
as the served MCVideo user information entry;
2) shall consider the list of the MCVideo client information entries of the
served MCVideo user information entry as the served list of the MCVideo client
information entries;
3) shall generate an application/pidf+xml MIME body indicating per-user
affiliation information according to clause 9.3.1 and the served list of the
MCVideo client information entries with the following clarifications:
a) the MCVideo server shall not include information from an MCVideo group
information entry with the expiration time already expired;
b) the MCVideo server shall not include information from an MCVideo group
information entry with the affiliation status set to the \"deaffiliated\"
state;
c) if the SIP SUBSCRIBE request creating the subscription of this notification
contains an application/simple-filter+xml MIME body according to clause 8.3.2,
the MCVideo server shall restrict the application/pidf+xml MIME body according
to the application/simple-filter+xml MIME body; and
d) if this procedures is invoked by procedure in clause 8.2.2.2.3 where the
handled p-id value was identified, the MCVideo server shall set the \
child element of the \ root element of the application/pidf+xml MIME
body of the SIP NOTIFY request to the handled p-id value; and
4) send a SIP NOTIFY request according to 3GPP TS 24.229 [11], and IETF RFC
6665 [16] with the MIME body. In the SIP NOTIFY request, the MCVideo server
shall include the generated application/pidf+xml MIME body indicating per-user
affiliation information.
##### 8.2.2.2.6 Sending affiliation status change towards MCVideo server
owning MCVideo group procedure
NOTE 1: Usage of one SIP PUBLISH request to carry information about change of
affiliation state of several MCVideo users served by the same MCVideo server
is not supported in this version of the specification.
In order:
\- to send an affiliation request of a served MCVideo ID to a handled MCVideo
group ID;
\- to send an de-affiliation request of a served MCVideo ID from a handled
MCVideo group ID; or
\- to send an affiliation request of a served MCVideo ID to a handled MCVideo
group ID due to near expiration of the previously published information;
the MCVideo server shall generate a SIP PUBLISH request according to 3GPP TS
24.229 [11], IETF RFC 3903 [12] and IETF RFC 3856 [13]. In the SIP PUBLISH
request, the MCVideo server:
1) shall set the Request-URI to the public service identity of the controlling
MCVideo function associated with the handled MCVideo group ID;
2) shall include an application/vnd.3gpp.mcvideo-info+xml MIME body. In the
application/vnd.3gpp.mcvideo-info+xml MIME body, the MCVideo server:
a) shall include the \ element set to the handled MCVideo
group ID; and
b) shall include the \ element set to the served
MCVideo ID;
3) shall include the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"
(coded as specified in 3GPP TS 24.229 [11]), in a P-Asserted-Service header
field according to IETF RFC 6050 [14];
4) if sending an affiliation request, shall set the Expires header field
according to IETF RFC 3903 [12], to 4294967295;
NOTE 1: 4294967295, which is equal to 2^32^-1, is the highest value defined
for Expires header field in IETF RFC 3261 [15].
5) if sending an de-affiliation request, shall set the Expires header field
according to IETF RFC 3903 [12], to zero;
6) shall include an P-Asserted-Identity header field set to the public service
identity of the MCVideo server according to 3GPP TS 24.229 [11];
7) shall set the current p-id to a globally unique value;
8) shall consider an MCVideo user information entry such that:
a) the MCVideo user information entry is in the list of MCVideo user
information entries described in clause 8.2.2.2.2; and
b) the MCVideo ID of the MCVideo user information entry is equal to the served
MCVideo ID;
as the served MCVideo user information entry;
9) for each MCVideo group information entry such that:
a) the MCVideo group information entry has the \"affiliating\" affiliation
status, the MCVideo group ID set to the handled MCVideo group ID, the
expiration time has not expired yet and the affiliating p-id is not set;
b) the MCVideo group information entry is in the list of the MCVideo group
information entries of an MCVideo client information entry; and
c) the MCVideo client information entry is in the list of the MCVideo client
information entries of the served MCVideo user information entry;
shall set the affiliating p-id of the MCVideo group information entry to the
current p-id; and
10) shall include an application/pidf+xml MIME body indicating per-group
affiliation information constructed according to clause 8.2.3.2. The MCVideo
server shall indicate all served MCVideo client IDs, such that:
a) the affiliation status is set to \"affiliating\" or \"affiliated\", and the
expiration time has not expired yet in an MCVideo group information entry with
the MCVideo group ID set to the handled MCVideo group;
b) the MCVideo group information entry is in the list of the MCVideo group
information entries of an MCVideo client information entry;
c) the MCVideo client information entry has the MCVideo client ID set to the
served MCVideo client ID; and
d) the MCVideo client information entry is in the list of the MCVideo client
information entries of the served MCVideo user information entry.
The MCVideo server shall set the \ child element of the \ root
element to the current p-id.
The MCVideo server shall not include the \"expires\" attribute in the
\ element.
The MCVideo server shall send the SIP PUBLISH request according to 3GPP TS
24.229 [11].
If timer F expires for the SIP PUBLISH request sent for a (de)affiliation
request of served MCVideo ID to the MCVideo group ID or upon receiving a SIP
3xx, 4xx, 5xx or 6xx response to the SIP PUBLISH request, the MCVideo server:
1) shall remove each MCVideo group ID entry such that:
a) the MCVideo group information entry has the MCVideo group ID set to the
handled MCVideo group ID;
b) the MCVideo group information entry is in the list of the MCVideo group
information entries of an MCVideo client information entry; and
c) the MCVideo client information entry is in the list of the MCVideo client
information entries of the served MCVideo user information entry.
##### 8.2.2.2.7 Affiliation status determination from MCVideo server owning
MCVideo group procedure
NOTE 1: Usage of one SIP SUBSCRIBE request to subscribe for notification about
change of affiliation state of several MCVideo users served by the same
MCVideo server is not supported in this version of the specification.
In order to discover whether a served MCVideo user was successfully affiliated
to a handled MCVideo group in the MCVideo server owning the handled MCVideo
group, the MCVideo server shall generate an initial SIP SUBSCRIBE request
according to 3GPP TS 24.229 [11], IETF RFC 3856 [13], and IETF RFC 6665 [16].
In the SIP SUBSCRIBE request, the MCVideo server:
1) shall set the Request-URI to the public service identity of the controlling
MCVideo function associated with the handled MCVideo group ID;
2) shall include an application/vnd.3gpp.mcvideo-info+xml MIME body. In the
application/vnd.3gpp.mcvideo-info+xml MIME body, the MCVideo server:
a) shall include the \ element set to the handled MCVideo
group ID; and
b) shall include the \ element set to the served
MCVideo ID;
3) shall include the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"
(coded as specified in 3GPP TS 24.229 [11]), in a P-Asserted-Service header
field according to IETF RFC 6050 [14];
4) if the MCVideo server wants to receive the current status and later
notification, shall set the Expires header field according to IETF RFC 6665
[16], to 4294967295;
NOTE 2: 4294967295, which is equal to 2^32^-1, is the highest value defined
for Expires header field in IETF RFC 3261 [15].
5) if the MCVideo server wants to fetch the current state only, shall set the
Expires header field according to IETF RFC 6665 [16], to zero;
6) shall include an Accept header field containing the application/pidf+xml
MIME type; and
7) shall include an application/simple-filter+xml MIME body indicating per-
user restrictions of presence event package notification information according
to clause 8.3.2, indicating the served MCVideo ID.
In order to re-subscribe or de-subscribe, the MCVideo server shall generate an
in-dialog SIP SUBSCRIBE request according to 3GPP TS 24.229 [11], IETF RFC
3856 [13], and IETF RFC 6665 [16]. In the SIP SUBSCRIBE request, the MCVideo
server:
1) if the MCVideo server wants to receive the current status and later
notification, shall set the Expires header field according to IETF RFC 6665
[16], to 4294967295;
NOTE 3: 4294967295, which is equal to 2^32^-1, is the highest value defined
for Expires header field in IETF RFC 3261 [15].
2) if the MCVideo server wants to de-subscribe, shall set the Expires header
field according to IETF RFC 6665 [16], to zero; and
3) shall include an Accept header field containing the application/pidf+xml
MIME type.
Upon receiving a SIP NOTIFY request according to 3GPP TS 24.229 [11], IETF RFC
3856 [13], and IETF RFC 6665 [16], if SIP NOTIFY request contains an
application/pidf+xml MIME body indicating per-group affiliation information
constructed according to clause 8.3.1, then the MCVideo server:
1) for each served MCVideo ID and served MCVideo client ID such that the
application/pidf+xml MIME body of SIP NOTIFY request contains:
a) a \ element of the root \ element;
b) the \"id\" attribute of the \ element indicating the served MCVideo
ID;
c) an \ child element of the \ element of the \
element;
d) the \"client\" attribute of the \ element indicating the
served MCVideo client ID; and
e) the \"expires\" attribute of the \ element indicating
expiration of affiliation;
perform the following:
a) if an MCVideo group information entry exists such that:
i) the MCVideo group information entry has the \"affiliating\" affiliation
status, the MCVideo group ID set to the handled MCVideo group ID, and the
expiration time has not expired yet;
ii) the MCVideo group information entry is in the list of the MCVideo group
information entries of an MCVideo client information entry with the MCVideo
client ID set to the served MCVideo client ID;
iii) the MCVideo client information entry is in the list of the MCVideo client
information entries of a served MCVideo user information entry with the
MCVideo ID set to the served MCVideo ID; and
iv) the MCVideo user information entry is in the list of MCVideo user
information entries described in clause 8.2.2.2.2; and
shall set the affiliation status of the MCVideo group information entry to
\"affiliated\"; and
shall set the next publishing time of the MCVideo group information entry to
the current time and half of the time between the current time and the
expiration of affiliation; and
2) for each MCVideo group information entry such that:
a) the MCVideo group information entry has the \"affiliated\" affiliation
status or the \"deaffiliating\" affiliation status, the MCVideo group ID set
to the handled MCVideo group ID, and the expiration time has not expired yet;
b) the MCVideo group information entry is in the list of the MCVideo group
information entries of an MCVideo client information entry with the MCVideo
client ID set to a served MCVideo client ID;
c) the MCVideo client information entry is in the list of the MCVideo client
information entries of the served MCVideo user information entry with the
MCVideo ID set to a served MCVideo ID; and
d) the MCVideo user information entry is in the list of MCVideo user
information entries described in clause 8.2.2.2.2; and
for which the application/pidf+xml MIME body of SIP NOTIFY request does not
contain:
a) a \ element of the root \ element;
b) the \"id\" attribute of the \ element indicating the served MCVideo
ID;
c) an \ child element of the \ child element of the
\ element; and
d) the \"client\" attribute of the \ element indicating the
served MCVideo client ID.
perform the following:
a) shall set the affiliation status of the MCVideo group information entry to
\"deaffiliated\"; and
b) shall set the expiration time of the MCVideo group information entry to the
current time; and
3) if a \ element is included in the \ root element of the
application/pidf+xml MIME body of the SIP NOTIFY request, then for each
MCVideo group information entry such that:
a) the MCVideo group information entry has the \"affiliating\" affiliation
status, the MCVideo group ID set to the handled MCVideo group ID, the
expiration time has not expired yet and with the affiliating p-id set to the
value of the \ element;
b) the MCVideo group information entry is in the list of the MCVideo group
information entries of an MCVideo client information entry with the MCVideo
client ID set to a served MCVideo client ID;
c) the MCVideo client information entry is in the list of the MCVideo client
information entries of the served MCVideo user information entry with the
MCVideo ID set to a served MCVideo ID; and
d) the MCVideo user information entry is in the list of MCVideo user
information entries described in clause 8.2.2.2.2; and
for which the application/pidf+xml MIME body of SIP NOTIFY request does not
contain:
a) a \ element of the root \ element;
b) the \"id\" attribute of the \ element indicating the served MCVideo
ID;
c) an \ child element of the \ child element of the
\ element; and
d) the \"client\" attribute of the \ element indicating the
served MCVideo client ID;
perform the following:
a) shall set the affiliation status of the MCVideo group information entry to
\"deaffiliated\"; and
b) shall set the expiration time of the MCVideo group information entry to the
current time.
##### 8.2.2.2.8 Procedure for authorizing affiliation status change request in
negotiated mode sent to served MCVideo user
Upon receiving a SIP MESSAGE request such that:
1) Request-URI of the SIP MESSAGE request contains the public service identity
identifying the terminating participating MCVideo function serving the MCVideo
user;
2) the SIP MESSAGE request contains an application/vnd.3gpp.mcvideo-info+xml
MIME body containing the\ element and the \ element;
3) the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\" (coded as
specified in 3GPP TS 24.229 [11]), in a P-Asserted-Service header field
according to IETF RFC 6050 [14]; and
4) the SIP MESSAGE request contains an application/vnd.3gpp.mcvideo-
affiliation-command+xml MIME body;
then the MCVideo server:
1) shall identify the served MCVideo ID in the \ element
of the application/vnd.3gpp.mcvideo-info+xml MIME body of the SIP MESSAGE
request;
2) shall identify the originating MCVideo ID in the \
element of the application/vnd.3gpp.mcvideo-info+xml MIME body of the SIP
MESSAGE request;
3) if the originating MCVideo ID is not authorized to send an affiliation
status change request in negotiated mode to the served MCVideo ID, shall send
a 403 (Forbidden) response and shall not continue with the rest of the steps;
4) shall set the Request-URI of the SIP MESSAGE request to the public user
identity bound to the served MCVideo ID in the MCVideo server; and
5) shall include an Accept-Contact header field with the g.3gpp.icsi-ref media
feature tag containing the value of \"urn:urn-7:3gpp-
service.ims.icsi.mcvideo\" along with the \"require\" and \"explicit\" header
field parameters according to IETF RFC 3841 [20];
before forwarding the SIP MESSAGE request further.
##### 8.2.2.2.9 Forwarding affiliation status change towards another MCVideo
user procedure
Upon receiving a SIP PUBLISH request such that:
1) Request-URI of the SIP PUBLISH request contains the public service identity
identifying the originating participating MCVideo function serving the MCVideo
user;
2) the SIP PUBLISH request contains an application/vnd.3gpp.mcvideo-info MIME
body containing the\ element which identifies an MCVideo
ID not served by the MCVideo server;
3) the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\" (coded as
specified in 3GPP TS 24.229 [11]), in a P-Asserted-Service header field
according to IETF RFC 6050 [14];
4) the Event header field of the SIP PUBLISH request contains the \"presence\"
event type; and
5) SIP PUBLISH request contains an application/pidf+xml MIME body indicating
per-user affiliation information according to clause 8.3.1;
then the MCVideo server:
1) shall identify the target MCVideo ID in the \ element
of the application/vnd.3gpp.mcvideo-info MIME body of the SIP PUBLISH request;
2) shall identify the originating MCVideo ID from public user identity in the
P-Asserted-Identity header field of the SIP PUBLISH request;
3) shall generate a SIP PUBLISH request from the received SIP PUBLISH request.
In the generated SIP PUBLISH request, the MCVideo server:
a) shall set the Request-URI to the public service identity identifying the
terminating participating MCVideo function serving the target MCVideo ID;
b) shall include a P-Asserted-Identity header field containing the public
service identity identifying the originating participating MCVideo function
serving the MCVideo user;
c) shall include an application/vnd.3gpp.mcvideo-info+xml MIME body. In the
application/vnd.3gpp.mcvideo-info+xml MIME body, the MCVideo server:
A) shall include the \ element set to the target MCVideo
ID; and
B) shall include the \ element set to the originating
MCVideo ID; and
d) shall include other signalling elements from the received SIP PUBLISH
request; and
4) shall send the generated SIP PUBLISH request according to 3GPP TS 24.229
[11].
The MCVideo server shall forward received SIP responses to the SIP PUBLISH
request.
##### 8.2.2.2.10 Forwarding subscription to affiliation status towards another
MCVideo user procedure
Upon receiving a SIP SUBSCRIBE request such that:
1) Request-URI of the SIP PUBLISH request contains the public service identity
identifying the originating participating MCVideo function serving the MCVideo
user;
2) the SIP PUBLISH request contains an application/vnd.3gpp.mcvideo-info MIME
body containing the\ element which identifies an MCVideo
ID not served by MCVideo server;
3) the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\" (coded as
specified in 3GPP TS 24.229 [11]), in a P-Asserted-Service header field
according to IETF RFC 6050 [14]; and
4) the Event header field of the SIP SUBSCRIBE request contains the
\"presence\" event type;
then the MCVideo server:
1) shall identify the target MCVideo ID in the \ element
of the application/vnd.3gpp.mcvideo-info MIME body of the SIP SUBSCRIBE
request;
2) shall identify the originating MCVideo ID from public user identity in the
P-Asserted-Identity header field of the SIP SUBSCRIBE request;
3) shall generate a SIP SUBSCRIBE request from the received SIP SUBSCRIBE
request. In the generated SIP SUBSCRIBE request, the MCVideo server:
a) shall set the Request-URI to the public service identity identifying the
terminating participating MCVideo function serving the target MCVideo ID;
b) shall include a P-Asserted-Identity header field containing the public
service identity identifying the originating participating MCVideo function
serving the MCVideo user;
c) shall include an application/vnd.3gpp.mcvideo-info+xml MIME body. In the
application/vnd.3gpp.mcvideo-info+xml MIME body, the MCVideo server:
A) shall include the \ element set to the target MCVideo
ID; and
B) shall include the \ element set to the originating
MCVideo ID; and
d) shall include other signalling elements from the received SIP SUBSCRIBE
request; and
4) shall send the generated SIP SUBSCRIBE request according to 3GPP TS 24.229
[11].
The MCVideo server shall forward any received SIP responses to the SIP
SUBSCRIBE request, any received SIP NOTIFY request and any received SIP
responses to the SIP NOTIFY request.
##### 8.2.2.2.11 Affiliation status determination
This clause is referenced from other procedures.
If the participating MCVideo function needs to determine the affiliation
status of an MCVideo user to an MCVideo group, the participating function:
1) shall find the user information entry in the list of MCVideo user
information entries described in clause 9.2.2.2.2 such that the MCVideo ID of
the MCVideo user information entry is equal to the MCVideo ID of the
originator of the received SIP request;
a) if the applicable MCVideo group information entry cannot be found, then the
participating MCVideo function shall determine that the MCVideo user is not
affiliated to the MCVideo group at the MCVideo client and the skip the rest of
the steps;
2) shall find the MCVideo client information entry in the list of MCVideo
client information entries of MCVideo user information entry found in step 1)
in which the MCVideo client ID matches the value of the \
element contained in the application/vnd.3gpp.mcvideo-info+xml MIME body in
the received SIP request;
a) if the applicable MCVideo client information entry cannot be found, then
the participating MCVideo function shall determine that the MCVideo user is
not affiliated to the MCVideo group at the MCVideo client and the skip the
rest of the steps;
3) shall find the MCVideo group information entry in the list of MCVideo group
information entries of MCVideo client information entry found in step 2 such
that the MCVideo group identity matches the value of the identity of the
targeted MCVideo group;
a) if the applicable MCVideo group information entry was found in step 3) and
the affiliation status of the MCVideo group information entry is
\"affiliating\" or \"affiliated\", shall determine that the MCVideo user at
the MCVideo client to be affiliated to the targeted MCVideo group and skip the
rest of the steps;
b) if the applicable MCVideo group information entry was found in step 3) and
the affiliation status of the MCVideo group information entry is
\"deaffiliating\" or \"deaffiliated\", shall determine that the MCVideo user
at the MCVideo client to not be affiliated to the targeted MCVideo group and
skip the rest of the steps; or
c) if the applicable MCVideo group information entry was not found in step 3),
shall determine that the MCVideo user at the MCVideo client is not affiliated
to the targeted MCVideo group.
##### 8.2.2.2.12 Affiliation status change by implicit affiliation
This clause is referenced from other procedures.
Upon receiving a SIP request that requires implicit affiliation of the sending
MCVideo client to an MCVideo group, the participating MCVideo function:
1) shall determine the served MCVideo client ID from the \
element of the application/vnd.3gpp.mcvideo-info+xml MIME body in the received
SIP request;
2) shall determine the MCVideo group ID from the \
element of the application/vnd.3gpp.mcvideo-info+xml MIME body in the received
SIP request;
3) shall determine the served MCVideo ID by using the public user identity in
the P-Asserted-Identity header field of the SIP request;
NOTE 1: The MCVideo ID of the calling user is bound to the public user
identity at the time of service authorisation.
4) shall consider an MCVideo user information entry such that:
a) the MCVideo user information entry is in the list of MCVideo user
information entries described in clause 8.2.2.2.2; and
b) the MCVideo ID of the MCVideo user information entry is equal to the served
MCVideo ID;
as the served MCVideo user information entry;
5) shall consider an MCVideo client information entry such that:
a) the MCVideo client information entry is in the list of MCVideo client
information entries of the served MCVideo user information entry; and
b) the MCVideo client ID of the MCVideo client information entry is equal to
the served MCVideo client ID;
as the served MCVideo client information entry;
6) shall consider a copy of the list of the MCVideo group information entries
of the served MCVideo client information entry as the served list of the
MCVideo group information entries;
7) shall construct the candidate list of the MCVideo group information entries
as follows:
a) for each MCVideo group ID which has an MCVideo group information entry in
the served list of the MCVideo group information entries shall copy the
MCVideo group information entry into a new MCVideo group information entry of
the candidate list of the MCVideo group information entries; and
b) if the determined MCVideo group ID does not have an MCVideo group
information entry in the served list of the MCVideo group information entries
or has an MCVideo group information entry in the served list of the MCVideo
group information entries, such that the expiration time of the MCVideo group
information entry has already expired:
i) shall add a new MCVideo group information entry in the candidate list of
the MCVideo group information list for the determined MCVideo group ID;
ii) shall set the affiliation status of the new MCVideo group information
entry to the \"affiliating\" state; and
iii) shall set the expiration time of the new MCVideo group information entry
to the current time increased with the candidate expiration interval;
8) determine the candidate number of MCVideo group IDs as the number of
different MCVideo group IDs which have an MCVideo group information entry:
a) in the candidate list of the MCVideo group information entries; or
b) in the list of the MCVideo group information entries of an MCVideo client
information entry such that:
i) the MCVideo client information entry is in the list of the MCVideo client
information entries of the served MCVideo user information entry; and
ii) the MCVideo client ID of the MCVideo client information entry is not equal
to the served MCVideo client ID;
with the affiliation status set to the \"affiliating\" state or the
\"affiliated\" state and with the expiration time which has not expired yet;
and
9) if the candidate number of MCVideo group IDs is bigger than the N2 value of
the served MCVideo ID, shall based on MCVideo service provider policy reduce
the candidate MCVideo group IDs to that equal to N2;
NOTE 2: The MCVideo service provider policy can determine to remove an MCVideo
group ID based on the importance or priority of other MCVideo groups, received
SIP requests containing an authorised request for originating a priority call
or other policy to determine which MCVideo groups are preferred.
10) if the determined MCVideo group ID cannot be added to the the candidate
list of the MCVideo group information entries due to exceeding the MCVideo
user\'s N2 limit, shall discard the candidate list of the MCVideo group
information entries and skip the remaining steps of the current procedure; and
11) shall replace the list of the MCVideo group information entries stored in
the served MCVideo client information entry with the candidate list of the
MCVideo group information entries.
##### 8.2.2.2.13 Implicit affiliation status change completion
This clause is referenced from other procedures.
If the participating MCVideo function has received a SIP 2xx response from the
controlling MCVideo function to a SIP request that had triggered performing
the procedures of clause 8.2.2.2.12, the participating MCVideo function:
1) shall set the affiliation status of the MCVideo group information entry
added to the candidate list of the MCVideo group information entries by the
procedures of clause 8.2.2.2.12 to \"affiliated\"; and
2) shall perform the procedures specified in clause 8.2.2.2.5 for the served
MCVideo ID.
##### 8.2.2.2.14 Implicit affiliation status change cancellation
This clause is referenced from other procedures.
If the participating MCVideo function determines that a received SIP request
that had triggered performing the procedures of clause 8.2.2.2.12 needs to be
rejected or if the participating MCVideo function receives a SIP 4xx, 5xx or
6xx response from the controlling MCVideo function for the received SIP
request, the participating MCVideo function:
1) shall remove the MCVideo group ID entry added by the procedures of clause
8.2.2.2.12 such that:
a) the MCVideo group information entry has the MCVideo group ID set to the
MCVideo group ID of the MCVideo group targeted by the received SIP request;
b) the MCVideo group information entry is in the list of the MCVideo group
information entries of an MCVideo client information entry containing the
MCVideo client ID included in the received SIP request; and
c) the MCVideo client information entry is in the list of the MCVideo client
information entries of the MCVideo user information entry containing the
MCVideo ID of the sender of the received SIP request.
##### 8.2.2.2.15 Implicit affiliation to configured groups procedure
This clause is referenced from other procedures.
If the participating MCVideo function has successfully performed service
authorisation for the MCVideo ID identified in the service authorisation
procedure, the participating MCVideo function:
1) shall identify the MCVideo ID included in the SIP request received for
service authorisation procedure as the served MCVideo ID;
2) shall identify the MCVideo client ID from the \ element
contained in the application/vnd.3gpp.mcvideo-info+xml MIME body included in
the SIP request received for service authorisation as the served MCVideo
client ID;
3) shall download the MCVideo user profile from the MCVideo user database if
not already stored at the participating MCVideo function;
4) if no \ element is contained in the \
element of the MCVideo user profile document (see the MCVideo user profile
document in 3GPP TS 24.484 [25]) for the served MCVideo ID or the
\ element contains no \ elements containing an
MCVideo group ID, shall skip the remaining steps;
5) shall consider an MCVideo user information entry such that:
a) the MCVideo user information entry is in the list of MCVideo user
information entries described in clause 8.2.2.2.2; and
b) the MCVideo ID of the MCVideo user information entry is equal to the served
MCVideo ID;
as the served MCVideo user information entry;
6) shall consider an MCVideo client information entry such that:
a) the MCVideo client information entry is in the list of MCVideo client
information entries of the served MCVideo user information entry; and
b) the MCVideo client ID of the MCVideo client information entry is equal to
the served MCVideo client ID;
as the served MCVideo client information entry;
7) shall consider a copy of the list of the MCVideo group information entries
of the served MCVideo client information entry as the served list of the
MCVideo group information entries;
8) shall construct the candidate list of the MCVideo group information entries
as follows:
a) for each MCVideo group ID which has an MCVideo group information entry in
the served list of the MCVideo group information entries shall copy the
MCVideo group information entry into a new MCVideo group information entry of
the candidate list of the MCVideo group information entries;
b) for each MCVideo group ID contained in an \ element of the
\ element in the \ element of the MCVideo
user profile document (see the MCVideo user profile document in 3GPP TS 24.484
[25]) for the served MCVideo ID that does not have an MCVideo group
information entry in the served list of the MCVideo group information entries
or has an MCVideo group information entry in the served list of the MCVideo
group information entries such that the expiration time of the MCVideo group
information entry has already expired:
i) shall add a new MCVideo group information entry in the candidate list of
the MCVideo group information list for the MCVideo group ID;
ii) shall set the affiliation status of the new MCVideo group information
entry to the \"affiliating\" state; and
iii) shall set the expiration time of the new MCVideo group information entry
to the current time increased with the candidate expiration interval;
c) if in step b) above, no new MCVideo group information entries were added to
the candidate list of the MCVideo group information list for the MCVideo group
ID:
i) shall discard the candidate list; and
ii) shall skip the remaining steps;
9) determine the candidate number of MCVideo group IDs as the number of
different MCVideo group IDs which have an MCVideo group information entry:
a) in the candidate list of the MCVideo group information entries; or
b) in the list of the MCVideo group information entries of an MCVideo client
information entry such that:
i) the MCVideo client information entry is in the list of the MCVideo client
information entries of the served MCVideo user information entry; and
ii) the MCVideo client ID of the MCVideo client information entry is not equal
to the served MCVideo client ID;
with the affiliation status set to the \"affiliating\" state or the
\"affiliated\" state and with the expiration time which has not expired yet;
and
c) if the candidate number of MCVideo group IDs is bigger than the N2 value of
the served MCVideo ID, shall based on MCVideo service provider policy reduce
the candidate MCVideo group IDs to that equal to N2;
NOTE 1: The MCVideo service provider policy can determine to remove an MCVideo
group ID based on the importance or priority of other MCVideo groups, received
SIP requests containing an authorised request for originating a priority call
or other policy to determine which MCVideo groups are preferred.
10) shall replace the list of the MCVideo group information entries stored in
the served MCVideo client information entry with the candidate list of the
MCVideo group information entries; and
11) for each MCVideo group ID contained in an \ element of the
\ element in the \ element of the MCVideo
user profile document (see the MCVideo user profile document in 3GPP TS 24.484
[25]) for the served MCVideo ID and which has an MCVideo group information
entry in the candidate list of the MCVideo group information entries with an
affiliation status of \"affiliating\", shall perform the procedures specified
in clause 8.2.2.2.6 for the served MCVideo ID and each MCVideo group ID.
NOTE 2: To learn of the MCVideo groups successfully affiliated to, the MCVideo
client can subscribe to that information by the procedures specified in clause
8.2.1.3.
#### 8.2.2.3 Procedures of MCVideo server owning the MCVideo group
##### 8.2.2.3.1 General
The procedures of MCVideo server owning the MCVideo group consist of:
\- receiving group affiliation status change procedure;
\- receiving subscription to affiliation status procedure;
\- sending notification of change of affiliation status procedure;
\- affiliation eligibility check procedure;
\- implicit affiliation eligibility check procedure; and
\- affiliation status change by implicit affiliation procedure.
NOTE: Usage of CSC-3 part of MCVideo group affiliation procedure and of CSC-3
part of MCVideo group de-affiliation procedure is not specified in this
version of the specification.
##### 8.2.2.3.2 Stored information
The MCVideo server shall maintain a list of MCVideo group information entries.
In each MCVideo group information entry, the MCVideo server shall maintain:
1) an MCVideo group ID. This field uniquely identifies the MCVideo group
information entry in the list of the MCVideo group information entries; and
2) a list of MCVideo user information entries.
In each MCVideo user information entry, the MCVideo server shall maintain:
1) an MCVideo ID. This field uniquely identifies the MCVideo user information
entry in the list of the MCVideo user information entries;
2) a list of MCVideo client information entries; and
3) an expiration time.
In each MCVideo client information entry, the MCVideo server shall maintain:
1) an MCVideo client ID. This field uniquely identifies the MCVideo client
information entry in the list of the MCVideo client information entries.
##### 8.2.2.3.3 Receiving group affiliation status change procedure
Upon receiving a SIP PUBLISH request such that:
1) Request-URI of the SIP PUBLISH request contains the public service identity
of the controlling MCVideo function associated with the served MCVideo group;
2) the SIP PUBLISH request contains an application/vnd.3gpp.mcvideo-info+xml
MIME body containing the \ element and the \ element;
3) the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\" (coded as
specified in 3GPP TS 24.229 [11]), in a P-Asserted-Service header field
according to IETF RFC 6050 [14];
4) the Event header field of the SIP PUBLISH request contains the \"presence\"
event type; and
5) SIP PUBLISH request contains an application/pidf+xml MIME body indicating
per-group affiliation information constructed according to clause 8.2.3.2;
then the MCVideo server:
1) shall identify the served MCVideo group ID in the \
element of the application/vnd.3gpp.mcvideo-info+xml MIME body of the SIP
PUBLISH request;
2) shall identify the handled MCVideo ID in the \
element of the application/vnd.3gpp.mcvideo-info+xml MIME body of the SIP
PUBLISH request;
3) if the Expires header field of the SIP PUBLISH request is not included or
has nonzero value lower than 4294967295, shall send a SIP 423 (Interval Too
Brief) response to the SIP PUBLISH request, where the SIP 423 (Interval Too
Brief) response contains a Min-Expires header field set to 4294967295, and
shall not continue with the rest of the steps;
4) if an MCVideo group for the served MCVideo group ID does not exist in the
group management server according to 3GPP TS 24.481 [24], shall reject the SIP
PUBLISH request with SIP 403 (Forbidden) response to the SIP PUBLISH request
according to 3GPP TS 24.229 [11], IETF RFC 3903 [12] and IETF RFC 3856 [13]
and skip the rest of the steps;
5) if the handled MCVideo ID is not a member of the MCVideo group identified
by the served MCVideo group ID, shall reject the SIP PUBLISH request with SIP
403 (Forbidden) response to the SIP PUBLISH request according to 3GPP TS
24.229 [11], IETF RFC 3903 [12] and IETF RFC 3856 [13] and skip the rest of
the steps;
6) shall respond with SIP 200 (OK) response to the SIP PUBLISH request
according to 3GPP TS 24.229 [11], IETF RFC 3903 [12]. In the SIP 200 (OK)
response, the MCVideo server:
a) shall set the Expires header field according to IETF RFC 3903 [12], to the
selected expiration time;
7) if the \"entity\" attribute of the \ element of the
application/pidf+xml MIME body of the SIP PUBLISH request is different than
the served MCVideo group ID, shall not continue with the rest of the steps;
8) if the handled MCVideo ID is different from the MCVideo ID in the \"id\"
attribute of the \ element of the \ root element of the
application/pidf+xml MIME body of the SIP PUBLISH request, shall not continue
with the rest of the steps;
9) shall consider an MCVideo group information entry such that:
a) the MCVideo group information entry is in the list of MCVideo group
information entries described in clause 8.2.2.3.2; and
b) the MCVideo group ID of the MCVideo group information entry is equal to the
served MCVideo group ID;
as the served MCVideo group information entry;
10) if the selected expiration time is zero:
a) shall remove the MCVideo user information entry such that:
i) the MCVideo user information entry is in the list of the MCVideo user
information entries of the served MCVideo group information entry; and
ii) the MCVideo user information entry has the MCVideo ID set to the served
MCVideo ID;
11) if the selected expiration time is not zero:
a) shall consider an MCVideo user information entry such that:
i) the MCVideo user information entry is in the list of the MCVideo user
information entries of the served MCVideo group information entry; and
ii) the MCVideo ID of the MCVideo user information entry is equal to the
handled MCVideo ID;
as the served MCVideo user information entry;
b) if the MCVideo user information entry does not exist:
i) shall insert an MCVideo user information entry with the MCVideo ID set to
the handled MCVideo ID into the list of the MCVideo user information entries
of the served MCVideo group information entry; and
ii) shall consider the inserted MCVideo user information entry as the served
MCVideo user information entry; and
c) shall set the following information in the served MCVideo user information
entry:
i) set the MCVideo client ID list according to the \"client\" attributes of
the \ elements of the \ element of the \ element
of the \ root element of the application/pidf+xml MIME body of the
SIP PUBLISH request; and
ii) set the expiration time according to the selected expiration time;
12) shall identify the handled p-id in the \ child element of the
\ root element of the application/pidf+xml MIME body of the SIP
PUBLISH request; and
13) shall perform the procedures specified in clause 8.2.2.3.5 for the served
MCVideo group ID.
##### 8.2.2.3.4 Receiving subscription to affiliation status procedure
NOTE: Usage of one SIP SUBSCRIBE request to subscribe for notification about
change of affiliation state of several MCVideo users served by the same
MCVideo server is not supported in this version of the specification.
Upon receiving a SIP SUBSCRIBE request such that:
1) Request-URI of the SIP SUBSCRIBE request contains the public service
identity of the controlling MCVideo function associated with the served
MCVideo group;
2) the SIP SUBSCRIBE request contains an application/vnd.3gpp.mcvideo-info+xml
MIME body containing the\ element and the \ element;
3) the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\" (coded as
specified in 3GPP TS 24.229 [11]), in a P-Asserted-Service header field
according to IETF RFC 6050 [14];
4) the Event header field of the SIP SUBSCRIBE request contains the
\"presence\" event type; and
5) the SIP SUBSCRIBE request contains an application/simple-filter+xml MIME
body indicating per-user restrictions of presence event package notification
information according to clause 8.3.2 indicating the same MCVideo ID as in the
\ element of the application/vnd.3gpp.mcvideo-
info+xml MIME body of the SIP SUBSCRIBE request;
then the MCVideo server:
1) shall identify the served MCVideo group ID in the \
element of the application/vnd.3gpp.mcvideo-info+xml MIME body of the SIP
SUBSCRIBE request;
2) shall identify the handled MCVideo ID in the \
element of the application/vnd.3gpp.mcvideo-info+xml MIME body of the SIP
SUBSCRIBE request;
3) if the Expires header field of the SIP SUBSCRIBE request is not included or
has nonzero value lower than 4294967295, shall send a SIP 423 (Interval Too
Brief) response to the SIP SUBSCRIBE request, where the SIP 423 (Interval Too
Brief) response contains a Min-Expires header field set to 4294967295, and
shall not continue with the rest of the steps;
4) if an MCVideo group for the served MCVideo group ID does not exist in the
group management server, shall reject the SIP SUBSCRIBE request with SIP 403
(Forbidden) response to the SIP SUBSCRIBE request according to 3GPP TS 24.229
[11], IETF RFC 3903 [12] and IETF RFC 3856 [13] and skip the rest of the
steps;
5) if the handled MCVideo ID is not a member of the MCVideo group identified
by the served MCVideo group ID, shall reject the SIP SUBSCRIBE request with
SIP 403 (Forbidden) response to the SIP SUBSCRIBE request according to 3GPP TS
24.229 [11], IETF RFC 3903 [12] and IETF RFC 3856 [13] and skip the rest of
the steps; and
6) shall generate a SIP 200 (OK) response to the SIP SUBSCRIBE request
according to 3GPP TS 24.229 [11], IETF RFC 6665 [16].
For the duration of the subscription, the MCVideo server shall notify
subscriber about changes of the information of the served MCVideo ID, as
described in clause 8.2.2.2.5.
##### 8.2.2.3.5 Sending notification of change of affiliation status procedure
In order to notify the subscriber identified by the handled MCVideo ID about
changes of the affiliation status of the served MCVideo group ID, the MCVideo
server:
1) shall consider an MCVideo group information entry such that:
a) the MCVideo group information entry is in the list of MCVideo group
information entries described in clause 8.2.2.3.2; and
b) the MCVideo group ID of the MCVideo group information entry is equal to the
served MCVideo group ID;
2) shall consider an MCVideo user information entry such:
a) the MCVideo user information entry is in the list of the MCVideo user
information entries of the served MCVideo group information entry; and
b) the MCVideo ID of the MCVideo user information entry is equal to the
handled MCVideo ID;
as the served MCVideo user information entry;
3) shall generate an application/pidf+xml MIME body indicating per-group
affiliation information according to clause 9.3.1 and the served list of the
served MCVideo user information entry of the MCVideo group information entry
with following clarifications:
a) the MCVideo server shall include the \"expires\" attribute in the
\ element; and
b) if this procedures is invoked by procedure in clause 8.2.2.3.3 where the
handled p-id was identified, the MCVideo server shall set the \ child
element of the \ root element of the application/pidf+xml MIME body
of the SIP NOTIFY request to the handled p-id value; and
4) send a SIP NOTIFY request according to 3GPP TS 24.229 [11], and IETF RFC
6665 [16]. In the SIP NOTIFY request, the MCVideo server shall include the
generated application/pidf+xml MIME body indicating per-group affiliation
information.
##### 8.2.2.3.6 Implicit affiliation eligibility check procedure
This clause is referenced from other procedures.
Upon receiving a SIP request for an MCVideo group that the MCVideo user is not
currently affiliated to and that requires the controlling MCVideo function to
check on the eligibility of the MCVideo user to be implicitly affiliated to
the MCVideo group, the controlling MCVideo function:
1) shall perform the procedures of clause 8.2.2.3.8 to determine if the
MCVideo user is eligible to be affiliated to the MCVideo group; and
2) if the MCVideo user was determined eligible to be affiliated to the MCVideo
group by the procedures of clause 8.2.2.3.8, shall consider the MCVideo user
to be eligible for implicit affiliation to the MCVideo group.
##### 8.2.2.3.7 Affiliation status change by implicit affiliation procedure
This clause is referenced from other procedures.
Upon receiving a SIP request for an MCVideo group that the MCVideo user is not
currently affiliated to and that requires the controlling MCVideo function to
perform an implicit affiliation to, the controlling MCVideo function:
1) shall identify the served MCVideo group ID in the \
element of the application/vnd.3gpp.mcvideo-info+xml MIME body of the SIP
request;
2) shall identify the handled MCVideo ID in the \
element of the application/vnd.3gpp.mcvideo-info+xml MIME body of the SIP
request;
3) shall consider an MCVideo group information entry such that:
a) the MCVideo group information entry is in the list of MCVideo group
information entries described in clause 8.2.2.3.2; and
b) the MCVideo group ID of the MCVideo group information entry is equal to the
served MCVideo group ID;
as the served MCVideo group information entry;
4) shall consider an MCVideo user information entry such that:
a) the MCVideo user information entry is in the list of the MCVideo user
information entries of the served MCVideo group information entry; and
b) the MCVideo ID of the MCVideo user information entry is equal to the
handled MCVideo ID;
as the served MCVideo user information entry;
c) if the MCVideo user information entry does not exist:
i) shall insert an MCVideo user information entry with the MCVideo ID set to
the handled MCVideo ID into the list of the MCVideo user information entries
of the served MCVideo group information entry; and
ii) shall consider the inserted MCVideo user information entry as the served
MCVideo user information entry; and
d) shall make the following modifications in the served MCVideo user
information entry:
i) add the MCVideo client ID derived from the received SIP request to the
MCVideo client ID list if not already present; and
ii) set the expiration time as determined by local policy;
5) shall perform the procedures specified in clause 8.2.2.3.5 for the served
MCVideo group ID.
##### 8.2.2.3.8 Affiliation eligibility check procedure
This clause is referenced from other procedures.
Upon receiving a SIP request for an MCVideo group that the MCVideo user is not
currently affiliated to and that requires the controlling MCVideo function to
check on the eligibility of the MCVideo user to be affiliated to the MCVideo
group, the controlling MCVideo function shall:
1) shall identify the served MCVideo group ID in the \
element of the application/vnd.3gpp.mcvideo-info+xml MIME body of the SIP
request;
2) shall identify the handled MCVideo ID in the \
element of the application/vnd.3gpp.mcvideo-info+xml MIME body of the SIP
request;
3) if an MCVideo group for the served MCVideo group ID does not exist in the
group management server according to 3GPP TS 24.481 [24], shall consider the
MCVideo user to be ineligible for affiliation and skip the rest of the steps;
4) if the handled MCVideo ID is not a member of the MCVideo group identified
by the served MCVideo group ID, shall consider the MCVideo user to be
ineligible for affiliation and skip the rest of the steps;
5) if there is no MCVideo group information entry in the list of MCVideo group
information entries described in clause 8.2.2.3.2 with an MCVideo group
identity matching the served MCVideo group ID, then shall consider the MCVideo
user to be ineligible for affiliation and skip the rest of the steps; or
6) shall consider the MCVideo user to be eligible for affiliation.
## 8.3 Coding
### 8.3.1 Extension of application/pidf+xml MIME type
#### 8.3.1.1 Introduction
The parent clause of this clause describes an extension of the
application/pidf+xml MIME body specified in IETF RFC 3863 [18]. The extension
is used to indicate:
\- per-user affiliation information; and
\- per-group affiliation information.
#### 8.3.1.2 Syntax
The application/pidf+xml MIME body indicating per-user affiliation information
is constructed according to IETF RFC 3863 [18] and:
1) contains a \ root element according to IETF RFC 3863 [18];
2) contains an \"entity\" attribute of the \ element set to the
MCVideo ID of the MCVideo user;
3) contains one \ child element according to IETF RFC 3863 [18] per
each MCVideo client of the \ element;
4) can contain a \ child element defined in the XML schema defined in
table 8.3.1.2-1, of the \ element set to an identifier of a SIP
PUBLISH request;
5) contains an \"id\" attribute of the \ element set to the MCVideo
client ID;
6) contains one \ child element of each \ element;
7) contains one \ child element defined in the XML schema defined
in table 8.3.1.2-1, of the \ element, for each MCVideo group in which
the MCVideo user is interested at the MCVideo client;
8) contains a \"group\" attribute of each \ element set to the
MCVideo group ID of the MCVideo group in which the MCVideo user is interested
at the MCVideo client;
9) can contain a \"status\" attribute of each \ element
indicating the affiliation status of the MCVideo user to MCVideo group at the
MCVideo client; and
10) can contain an \"expires\" attribute of each \ element
indicating expiration of affiliation of the MCVideo user to MCVideo group at
the MCVideo client.
The application/pidf+xml MIME body indicating per-group affiliation
information is constructed according to IETF RFC 3856 [13] and:
1) contains the \ root element according to IETF RFC 3863 [18];
2) contains an \"entity\" attribute of the \ element set to the
MCVideo group ID of the MCVideo group;
3) contains one \ child element according to IETF RFC 3863 [18] of the
\ element;
4) can contain a \ child element defined in the XML schema defined in
table 8.3.1.2-1, of the \ element set to an identifier of a SIP
PUBLISH request;
5) contains an \"id\" attribute of the \ element set to the MCVideo ID
of the MCVideo user;
6) contains one \ child element of each \ element;
7) contains one \ child element defined in the XML schema defined
in table 8.3.1.2-1, of the \ element, for each MCVideo client at which
the MCVideo user is interested in the MCVideo group;
8) contains one \"client\" attribute defined in the XML schema defined in
table 8.3.1.2-2, of the \ element set to the MCVideo client ID;
and
9) can contain an \"expires\" attribute defined in the XML schema defined in
table 8.3.1.2-2, of the \ element indicating expiration of
affiliation of the MCVideo user to MCVideo group at the MCVideo client.
Table 8.3.1.2-1: XML schema with elements and attributes extending the
application/pidf+xml MIME body
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
The application/pidf+xml MIME body refers to namespaces using prefixes
specified in table 8.3.1.2-2.
Table 8.3.1.2-2: Assignment of prefixes to namespace names in the
application/pidf+xml MIME body
* * *
Prefix Namespace mcvideoPI10 urn:3gpp:ns:mcvideoPresInfo:1.0 NOTE: The
\"urn:ietf:params:xml:ns:pidf\" namespace is the default namespace so no
prefix is used for it in the application/pidf+xml MIME body.
* * *
### 8.3.2 Extension of application/simple-filter+xml MIME type
#### 8.3.2.1 Introduction
The parent clause of this clause describes extension of the
application/simple-filter+xml MIME body specified in IETF RFC 4661 [19].
The extension is used to indicate per-client restrictions of presence event
package notification information and per-user restrictions of presence event
package notification information.
#### 8.3.2.2 Syntax
The application/simple-filter+xml MIME body indicating per client restrictions
of presence event package notification information is constructed according to
IETF RFC 4661 [19] and:
1) contains a \ root element according to IETF RFC 4661 [19];
2) contains a \ child element according to IETF RFC 4661 [19], of
the \ element;
3) contains a \ child element according to IETF RFC 4661 [19], of
the \ element where the \ element:
A) contains a \"prefix\" attribute according to IETF RFC 4661 [19] set to
\"pidf\"; and
B) contains a \"urn\" attribute set to the \"urn:ietf:params:xml:ns:pidf\"
value;
4) contains a \ child element according to IETF RFC 4661 [19], of
the \ element where the \ element:
A) contains a \"prefix\" attribute according to IETF RFC 4661 [19], set to
\"mcvideoPI10\"; and
B) contains an \"urn\" attribute according to IETF RFC 4661 [19], set to the
\"urn:3gpp:ns:mcvideoPresInfo:1.0\" value;
5) contains a \ child element according to IETF RFC 4661 [19], of the
\ element where the \ element;
A) contains an \"id\" attribute set to a value constructed according to IETF
RFC 4661 [19];
B) does not contain an \"uri\" attribute of the \ child element
according to IETF RFC 4661 [19]; and
C) does not contain an \"domain\" attribute according to IETF RFC 4661 [19];
6) contains a \ child element according to IETF RFC 4661 [19], of the
\ element; and
7) contains an \ child element according to IETF RFC 4661 [19], of
the \ element where the \ element;
A) does not contain a \"type\" attribute according to IETF RFC 4661 [19]; and
B) contains the value, according to IETF RFC 4661 [19], set to concatenation
of the \'//pidf:presence/pidf::tuple[\@id=\"\' string, the MCVideo client ID,
and the \'\"]\' string.
The application/simple-filter+xml MIME body indicating per user restrictions
of presence event package notification information is constructed according to
IETF RFC 4661 [19] and:
1) contains a \ root element according to IETF RFC 4661 [19];
2) contains a \ child element according to IETF RFC 4661 [19], of
the \ element;
3) contains a \ child element according to IETF RFC 4661 [19], of
the \ element where the \ element:
A) contains a \"prefix\" attribute according to IETF RFC 4661 [19] set to
\"pidf\"; and
B) contains a \"urn\" attribute set to the \"urn:ietf:params:xml:ns:pidf\"
value;
4) contains a \ child element according to IETF RFC 4661 [19], of
the \ element where the \ element:
A) contains a \"prefix\" attribute according to IETF RFC 4661 [19], set to
\"mcvideoPI10\"; and
B) contains an \"urn\" attribute according to IETF RFC 4661 [19], set to the
\"urn:3gpp:ns:mcvideoPresInfo:1.0\" value;
5) contains a \ child element according to IETF RFC 4661 [19], of the
\ element where the \ element;
A) contains an \"id\" attribute set to a value constructed according to IETF
RFC 4661 [19];
B) does not contain an \"uri\" attribute of the \ child element
according to IETF RFC 4661 [19]; and
C) does not contain an \"domain\" attribute according to IETF RFC 4661 [19];
6) contains a \ child element according to IETF RFC 4661 [19], of the
\ element; and
7) contains an \ child element according to IETF RFC 4661 [19], of
the \ element where the \ element;
A) does not contain a \"type\" attribute according to IETF RFC 4661 [19]; and
B) contains the value, according to IETF RFC 4661 [19], set to concatenation
of the \'//pidf:presence/pidf::tuple[\@id=\"\' string, the MCVideo ID, and the
\'\"]\' string.
# 9 Group call
## 9.1 General
This clause describes the group call procedures for on-network and off-
network.
For on-network, prearranged group call including emergency group call for each
functional entity are specified in clause 9.2.1 and chat group (restricted)
call including emergency group call for each functional entity are specified
in clause 9.2.2.
Off-network group call and off-network broadcast group call are specified in
clause 9.3 and clause 9.4.
## 9.2 On-network group call
### 9.2.1 Prearranged group call
#### 9.2.1.1 General
#### 9.2.1.2 MCVideo client procedures
##### 9.2.1.2.1 On-demand prearranged group call
###### 9.2.1.2.1.1 Client originating procedures
Upon receiving a request from an MCVideo user to establish an MCVideo
prearranged group session the MCVideo client shall generate an initial SIP
INVITE request by following the UE originating session procedures specified in
3GPP TS 24.229 [11], with the clarifications given below.
The MCVideo client:
1) if the MCVideo user has requested the origination of an MCVideo emergency
group call or is originating an MCVideo prearranged group call and the MCVideo
emergency state is already set, the MCVideo client shall comply with the
procedures in clause 6.2.8.1.1;
2) if the MCVideo user has requested the origination of an MCVideo imminent
peril group call, the MCVideo client shall comply with the procedures in
clause 6.2.8.1.9;
3) if the MCVideo user has requested the origination of a broadcast group
call, the MCVideo client shall comply with the procedures in clause 6.2.8.2;
4) shall include the g.3gpp.mcvideo media feature tag and the g.3gpp.icsi-ref
media feature tag with the value of \"urn:urn-7:3gpp-
service.ims.icsi.mcvideo\" in the Contact header field of the SIP INVITE
request according to IETF RFC 3840 [22];
5) shall include an Accept-Contact header field containing the g.3gpp.mcvideo
media feature tag along with the \"require\" and \"explicit\" header field
parameters according to IETF RFC 3841 [20];
6) shall include the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"
(coded as specified in 3GPP TS 24.229 [11]), in a P-Preferred-Service header
field according to IETF RFC 6050 [14] in the SIP INVITE request;
7) shall include an Accept-Contact header field with the g.3gpp.icsi-ref media
feature tag containing the value of \"urn:urn-7:3gpp-
service.ims.icsi.mcvideo\" along with the \"require\" and \"explicit\" header
field parameters according to IETF RFC 3841 [20];
8) should include the \"timer\" option tag in the Supported header field;
9) should include the Session-Expires header field according to IETF RFC 4028
[23]. It is recommended that the \"refresher\" header field parameter is
omitted. If included, the \"refresher\" header field parameter shall be set to
\"uac\";
10) shall set the Request-URI of the SIP INVITE request to the public service
identity identifying the participating MCVideo function serving the MCVideo
user;
NOTE 1: The MCVideo client is configured with public service identity
identifying the participating MCVideo function serving the MCVideo user.
11) may include a P-Preferred-Identity header field in the SIP INVITE request
containing a public user identity as specified in 3GPP TS 24.229 [11];
12) if the MCVideo emergency state is already set or the MCVideo client
emergency group state for this group is set to \"MVEG 2: in-progress\", the
MCVideo client shall include the Resource-Priority header field and comply
with the procedures in clause 6.2.8.1.2;
13) if the MCVideo client imminent peril group state for this group is set to
\"MVIG 2: in-progress\" or \"MVIG 4: confirm-pending\" shall include the
Resource-Priority header field and comply with the procedures in clause
6.2.8.1.12;
14) shall contain in an application/vnd.3gpp.mcvideo-info+xml MIME body with
the \ element containing the \ element with:
a) the \ element set to a value of \"prearranged\";
b) the \ element set to the group identity;
c) the \ element set to the MCVideo client ID of the
originating MCVideo client; and
NOTE 2: The MCVideo client does not include the MCVideo ID of the originating
MCVideo user in the body, as this will be inserted into the body of the SIP
INVITE request that is sent from the originating participating MCVideo
function.
d) if the group identity can be determined to be a TGI and if the MCVideo
client can associate the TGI with a MCVideo group ID, the \ element set to the MCVideo group ID;
NOTE 3: The text \"can associate the TGI with a MCVideo group ID\" means that
the MCVideo client is able to determine that there is a constituent group of
the temporary group that it is a member of.
NOTE 4: The MCVideo client is informed about temporary groups and regouping of
MCVideo groups that the user is a member of as specified in 3GPP TS 24.481
[24].
NOTE 5: If the MCVideo user selected a TGI where there are several MCVideo
groups where the MCVideo user is a member, the MCVideo client selects one of
those MCVideo groups.
15) shall include an SDP offer according to 3GPP TS 24.229 [11] with the
clarifications given in clause 6.2.1;
16) if an implicit transmission request is required, shall indicate this as
specified in clause 6.4; and
17) shall send the SIP INVITE request towards the MCVideo server according to
3GPP TS 24.229 [11].
On receiving a SIP 2xx response to the SIP INVITE request, the MCVideo client:
1) shall interact with the user plane as specified in 3GPP TS 24.581 [5] ;
2) if the MCVideo emergency group call state is set to \"MVEGC 2: emergency-
call-requested\" or \"MVEGC 3: emergency-call-granted\" or the MCVideo
imminent peril group call state is set to \"MVIGC 2: imminent-peril-call-
requested\" or \"MVIGC 3: imminent-peril-call-granted\", the MCVideo client
shall perform the actions specified in clause 6.2.8.1.4; and
3) may subscribe to the conference event package as specified in clause
9.1.3.1.
On receiving a SIP 4xx response, a SIP 5xx response or a SIP 6xx response to
the SIP INVITE request:
1) if the MCVideo emergency group call state is set to \"MVEGC 2: emergency-
call-requested\" or \"MVEGC 3: emergency-call-granted\"; or
2) if the MCVideo imminent peril group call state is set to \"MVIGC 2:
imminent-peril-call-requested\" or \"MVIGC 3: imminent-peril-call-granted\";
the MCVideo client shall perform the actions specified in clause 6.2.8.1.5.
On receiving a SIP INFO request where the Request-URI contains an MCVideo
session ID identifying an ongoing group session, the MCVideo client shall
follow the actions specified in clause 6.2.8.1.13.
###### 9.2.1.2.1.2 Client terminating procedures
In the procedures in this clause:
1) emergency indication in an incoming SIP INVITE request refers to the
\ element of the application/vnd.3gpp.mcvideo-info+xml MIME
body; and
2) imminent peril indication in an incoming SIP INVITE request refers to the
\ element of the application/vnd.3gpp.mcvideo-info+xml MIME
body.
Upon receipt of an initial SIP INVITE request, the MCVideo client shall follow
the procedures for termination of multimedia sessions in the IM CN subsystem
as specified in 3GPP TS 24.229 [11] with the clarifications below.
The MCVideo client:
1) may reject the SIP INVITE request if either of the following conditions are
met:
a) MCVideo client does not have enough resources to handle the call; or
b) any other reason outside the scope of this specification;
2) if the SIP INVITE request is rejected in step 1), shall respond toward
participating MCVideo function either with appropriate reject code as
specified in 3GPP TS 24.229 [11] and warning texts as specified in clause
4.4.2 or with SIP 480 (Temporarily unavailable) response not including warning
texts if the user is authorised to restrict the reason for failure and skip
the rest of the steps of this clause;
NOTE: If the SIP INVITE request contains an emergency indication or imminent
peril indication, the MCVideo client can by means beyond the scope of this
specification choose to accept the request.
3) shall check if a Resource-Priority header field is included in the incoming
SIP INVITE request and may perform further actions outside the scope of this
specification to act upon an included Resource-Priority header field as
specified in 3GPP TS 24.229 [11];
4) if the SIP INVITE request contains an application/vnd.3gpp.mcvideo-info+xml
MIME body with the \ element containing the \
element with the \ element set to a value of \"true\":
a) should display to the MCVideo user an indication that this is a SIP INVITE
request for an MCVideo emergency group call and:
i) should display the MCVideo ID of the originator of the MCVideo emergency
group call contained in the \ element of the
application/vnd.3gpp.mcvideo-info+xml MIME body;
ii) should display the MCVideo group identity of the group with the emergency
condition contained in the \ element; and
iii) if the \ element is set to \"true\", should display to the
MCVideo user an indication of the MCVideo emergency alert and associated
information;
b) shall set the MCVideo emergency group state to \"MVEG 2: in-progress\";
c) shall set the MCVideo imminent peril group state to \"MVIG 1: no-imminent-
peril\"; and
d) shall set the MCVideo imminent peril group call state to \"MVIGC 1:
imminent-peril-gc-capable\"; otherwise
5) if the SIP INVITE request contains an application/vnd.3gpp.mcvideo-info+xml
MIME body with the \ element containing the \
element with the \ element set to a value of \"true\":
a) should display to the MCVideo user an indication that this is a SIP INVITE
request for an MCVideo imminent peril group call and:
i) should display the MCVideo ID of the originator of the MCVideo imminent
peril group call contained in the \ element of the
application/vnd.3gpp.mcvideo-info+xml MIME body; and
ii) should display the MCVideo group identity of the group with the imminent
peril condition contained in the \ element; and
b) shall set the MCVideo imminent peril group state to \"MVIG 2: in-
progress\";
6) may display to the MCVideo user the MCVideo ID of the inviting MCVideo
user;
7) shall perform the automatic commencement procedures specified in clause
6.2.3.1.2 if one of the following conditions are met:
a) SIP INVITE request contains an Answer-Mode header field with the value
\"Auto\" and the MCVideo service setting at the invited MCVideo client for
answering the call is set to automatic commencement mode; or
b) SIP INVITE request contains an Answer-Mode header field with the value
\"Auto\" and the MCVideo service setting at the invited MCVideo client for
answering the call is set to manual commencement mode, yet the invited MCVideo
client allows the call to be answered with automatic commencement mode;
8) shall perform the manual commencement procedures specified in clause
6.2.3.2.2 if one of the following conditions are met:
a) SIP INVITE request contains an Answer-Mode header field with the value
\"Manual\" and the MCVideo service setting at the invited MCVideo client for
answering the call is to use manual commencement mode; or
b) SIP INVITE request contains an Answer-Mode header field with the value
\"Manual\" and the MCVideo service setting at the invited MCVideo client for
answering the call is set to automatic commencement mode, yet the invited
MCVideo client allows the call to be answered with manual commencement mode;
and
9) when the SIP 200 (OK) response to the SIP INVITE request is sent, may
subscribe to the conference event package as specified in clause 9.1.3.1.
###### 9.2.1.2.1.3 MCVideo upgrade to in-progress emergency or imminent peril
This clause covers both on-demand session.
Upon receiving a request from an MCVideo user to upgrade the MCVideo group
session to an emergency condition or an imminent peril condition on an MCVideo
prearranged group, the MCVideo client shall generate a SIP re-INVITE request
as specified in 3GPP TS 24.229 [11], with the clarifications given below.
1) if the MCVideo user is requesting to upgrade the MCVideo group session to
an in-progress emergency group state and this is an unauthorised request for
an MCVideo emergency call as determined by the procedures of clause 6.2.8.1.8,
the MCVideo client:
a) should indicate to the MCVideo user that they are not authorised to upgrade
the MCVideo group session to an in-progress emergency group state; and
b) shall skip the remaining steps of the current clause;
2) if the MCVideo user is requesting to upgrade the MCVideo group session to
an in-progress imminent peril state and this is an unauthorised request for an
MCVideo imminent peril group call as determined by the procedures of clause
6.2.8.1.8, the MCVideo client:
a) should indicate to the MCVideo user that they are not authorised to upgrade
the MCVideo group session to an in-progress imminent peril group state; and
b) shall skip the remaining steps of the current clause;
3) if the MCVideo user has requested to upgrade the MCVideo group session to
an MCVideo emergency call, the MCVideo client:
a) shall include an application/vnd.3gpp.mcvideo-info+xml MIME body populated
as specified in clause 6.2.8.1.1;
b) if an indication of an MCVideo emergency alert is to be included, shall
perform the procedures specified in clause 6.2.9.1 for the MCVideo emergency
alert trigger; and
c) shall include a Resource-Priority header field and comply with the
procedures in clause 6.2.8.1.2.
4) if the MCVideo user has requested to upgrade the MCVideo group session to
an MCVideo imminent peril call, the MCVideo client:
a) shall include an application/vnd.3gpp.mcvideo-info+xml MIME body populated
as specified in clause 6.2.8.1.9; and
b) shall include a Resource-Priority header field and comply with the
procedures in clause 6.2.8.1.12;
5) if the SIP re-INVITE request is to be sent within an on-demand session,
shall include in the SIP re-INVITE request an SDP offer according to 3GPP TS
24.229 [11] with the clarifications specified in clause 6.2.1;
6) if an implicit transmission request is required, shall indicate this as
specified in clause 6.4; and
7) shall send the SIP re-INVITE request according to 3GPP TS 24.229 [11].
On receiving a SIP 2xx response to the SIP re-INVITE request the MCVideo
client:
1) shall interact with the user plane as specified in 3GPP TS 24.581 [5]; and
2) shall perform the actions specified in clause 6.2.8.1.4.
On receiving a SIP INFO request where the Request-URI contains an MCVideo
session ID identifying an ongoing group session, the MCVideo client shall
follow the actions specified in clause 6.2.8.1.13.
On receiving a SIP 4xx response, SIP 5xx response or a SIP 6xx response to the
SIP re-INVITE request the MCVideo client shall perform the actions specified
in clause 6.2.8.1.5.
###### 9.2.1.2.1.4 MCVideo in-progress emergency cancel
This clause covers both on-demand session and pre-established sessions.
Upon receiving a request from an MCVideo user to cancel the in-progress
emergency condition on a prearranged MCVideo group, the MCVideo client shall
generate a SIP re-INVITE request by following the UE originating session
procedures specified in 3GPP TS 24.229 [11], with the clarifications given
below.
The MCVideo client:
1) if the MCVideo user is not authorised to cancel the in-progress emergency
group state of the MCVideo group as determined by the procedures of clause
6.2.8.1.7, the MCVideo client:
a) should indicate to the MCVideo user that they are not authorised to cancel
the in-progress emergency group state of the MCVideo group; and
b) shall skip the remaining steps of the current clause;
2) shall, if the MCVideo user is cancelling an in-progress emergency condition
and optionally an MCVideo emergency alert originated by the MCVideo user,
include an application/vnd.3gpp.mcvideo-info+xml MIME body populated as
specified in clause 6.2.8.1.3;
3) shall, if the MCVideo user is cancelling an in-progress emergency condition
and an MCVideo emergency alert originated by another MCVideo user, include an
application/vnd.3gpp.mcvideo-info+xml MIME body populated as specified in
clause 6.2.8.1.14;
4) shall include in the application/vnd.3gpp.mcvideo-info+xml MIME body with
the \ element containing the \ element with:
a) the \ element set to a value of \"prearranged\"; and
b) the \ element set to the group identity;
NOTE 1: The MCVideo ID of the originating MCVideo user is not included in the
body, as this will be inserted into the body of the SIP INVITE request that is
sent by the originating participating MCVideo function.
5) shall include the g.3gpp.mcvideo media feature tag in the Contact header
field of the SIP re-INVITE request according to IETF RFC 3840 [22];
6) if the SIP re-INVITE request is to be sent within an on-demand session,
shall include in the SIP re-INVITE request an SDP offer according to 3GPP TS
24.229 [11] with the clarifications specified in clause 6.2.1;
7) shall include a Resource-Priority header field and comply with the
procedures in clause 6.2.8.1.2; and
8) shall send the SIP re-INVITE request according to 3GPP TS 24.229 [11].
On receiving a SIP 2xx response to the SIP re-INVITE request, the MCVideo
client:
1) shall interact with the user plane as specified in 3GPP TS 24.581 [5];
2) shall set the MCVideo emergency group state of the group to \"MVEG 1: no-
emergency\";
3) shall set the MCVideo emergency group call state of the group to \"MVEGC 1:
emergency-gc-capable\"; and
4) if the MCVideo emergency alert state is set to \"MVEA 4: Emergency-alert-
cancel-pending\", the sent SIP re-INVITE request did not contain an
\ element in the application/vnd.3gpp.mcvideo-info+xml MIME
body and the SIP 2xx response to the SIP request for a priority group call
does not contain a Warning header field as specified in clause 4.4 with the
warning text containing the mcvideo-warn-code set to \"149\", shall set the
MCVideo emergency alert state to \"MVEA 1: no-alert\".
On receiving a SIP INFO request where the Request-URI contains an MCVideo
session ID identifying an ongoing group session, the MCVideo client shall
follow the actions specified in clause 6.2.8.1.13.
On receiving a SIP 4xx response, SIP 5xx response or SIP 6xx response to the
SIP re-INVITE request:
1) shall set the MCVideo emergency group state as \"MVEG 2: in-progress\";
2) if the SIP 4xx response, SIP 5xx response or SIP 6xx response contains an
application/vnd.3gpp.mcvideo-info+xml MIME body with an \ element
set to a value of \"true\" and the sent SIP re-INVITE request did not contain
an \ element in the application/vnd.3gpp.mcvideo-info+xml MIME
body, the MCVideo client shall set the MCVideo emergency alert state to \"MVEA
3: emergency-alert-initiated\"; and
3) if the SIP 4xx response, SIP 5xx response or SIP 6xx response did not
contain an application/vnd.3gpp.mcvideo-info+xml MIME body with an \ element and did not contain an \ element, the MCVideo
emergency alert (MVEA) state shall revert to its value prior to entering the
current procedure.
NOTE 3: If the in-progress emergency group state cancel request is rejected,
the state of the session does not change, i.e. continues with MCVideo
emergency group call level priority.
###### 9.2.1.2.1.5 MCVideo in-progress imminent peril cancel
This clause covers on-demand session.
Upon receiving a request from an MCVideo user to cancel the in-progress
imminent peril condition on a prearranged MCVideo group, the MCVideo client
shall generate a SIP re-INVITE request by following the procedures specified
in 3GPP TS 24.229 [11], with the clarifications given below.
The MCVideo client:
1) if the MCVideo user is not authorised to cancel the in-progress imminent
peril group state of the MCVideo group as determined by the procedures of
clause 6.2.8.1.10, the MCVideo client:
a) should indicate to the MCVideo user that they are not authorised to cancel
the in-progress imminent peril group state of the MCVideo group; and
b) shall skip the remaining steps of the current clause;
2) shall include an application/vnd.3gpp.mcvideo-info+xml MIME body populated
as specified in clause 6.2.8.1.11; and
3) shall include a Resource-Priority header field and comply with the
procedures in clause 6.2.8.1.12;
4) shall include in the application/vnd.3gpp.mcvideo-info+xml MIME body with
the \ element containing the \ element with:
a) the \ element set to a value of \"prearranged\"; and
b) the \ element set to the group identity;
NOTE 1: The MCVideo ID of the originating MCVideo user is not included in the
body, as this will be inserted into the body of the SIP re-INVITE request that
is sent by the originating participating MCVideo function.
5) shall include the g.3gpp.mcvideo media feature tag in the Contact header
field of the SIP re-INVITE request according to IETF RFC 3840 [22];
6) if the SIP re-INVITE request is to be sent within an on-demand session,
shall include in the SIP re-INVITE request an SDP offer according to 3GPP TS
24.229 [11] with the clarifications specified in clause 6.2.1; and
7) shall send the SIP re-INVITE request according to 3GPP TS 24.229 [11].
On receiving a SIP 2xx response to the SIP re-INVITE request, the MCVideo
client:
1) shall interact with the user plane as specified in 3GPP TS 24.581 [5];
2) shall set the MCVideo imminent peril group state of the group to \"MVIG 1:
no-imminent-peril\"; and
3) shall set the MCVideo imminent peril group call state of the group to
\"MVIGC 1: imminent-peril-gc-capable\".
On receiving a SIP 4xx, SIP 5xx response or SIP 6xx response to the SIP re-
INVITE request:
1) if the SIP 4xx response, SIP 5xx response or SIP 6xx response:
a) contains an application/vnd.3gpp.mcvideo-info+xml MIME body with an
\ element set to a value of \"true\"; or
b) does not contain an application/vnd.3gpp.mcvideo-info+xml MIME body with an
\ element;
then the MCVideo client shall set the MCVideo imminent peril group state as
\"MVIG 2: in-progress\".
NOTE 3: This is the case where the MCVideo client requested the cancellation
of the MCVideo imminent peril in-progress state and was rejected.
###### 9.2.1.2.1.6 MCVideo client receives SIP re-INVITE request
This clause covers both on-demand session.
Upon receipt of a SIP re-INVITE request the MCVideo client:
1) if the SIP re-INVITE request contains an application/vnd.3gpp.mcvideo-
info+xml MIME body with the \ element containing the \ element with the \ element set to a value of \"true\":
a) should display to the MCVideo user the MCVideo ID of the originator of the
MCVideo emergency group call and an indication that this is an MCVideo
emergency group call;
b) if the \ element containing the \ element
contains an \ element set to \"true\", should display to the
MCVideo user an indication of the MCVideo emergency alert and associated
information;
c) shall set the MCVideo emergency group state to \"MVEG 2: in-progress\";
d) shall set the MCVideo imminent peril group state to \"MVIG 1: no-imminent-
peril\"; and
e) shall set the MCVideo imminent peril group call state to \"MVIGC 1:
imminent-peril-gc-capable\";
2) if the SIP re-INVITE request contains an application/vnd.3gpp.mcvideo-
info+xml MIME body with the \ element containing the \ element with the \ element set to a value of
\"true\":
a) should display to the MCVideo user the MCVideo ID of the originator of the
MCVideo imminent peril group call and an indication that this is an MCVideo
imminent peril group call; and
b) shall set the MCVideo imminent peril group state to \"MIG 2: in-progress\";
3) if the SIP re-INVITE request contains an application/vnd.3gpp.mcvideo-
info+xml MIME body with the \ element containing the \ element with the \ element set to a value of \"false\":
a) should display to the MCVideo user the MCVideo ID of the MCVideo user
cancelling the MCVideo emergency group call;
b) if the \ element containing the \ element
contains an \ element set to \"false\":
i) should display to the MCVideo user an indication of the MCVideo emergency
alert cancellation and the MCVideo ID of the MCVideo user cancelling the
MCVideo emergency alert; and
ii) if the SIP re-INVITE request contains an application/vnd.3gpp.mcvideo-
info+xml MIME body including an \ element:
A) should display to the MCVideo user the MCVideo ID contained in the
\ element of the MCVideo user that originated the MCVideo
emergency alert; and
B) if the MCVideo ID contained in the \ element is the MCVideo
ID of the receiving MCVideo user shall set the MCVideo emergency alert state
to \"MVEA 1: no-alert\";
c) shall set the MCVideo emergency group state to \"MVEG 1: no-emergency\";
and
d) if the MCVideo emergency group call state of the group is set to \"MVEGC 3:
emergency-call-granted\", shall set the MCVideo emergency group call state of
the group to \"MVEGC 1: emergency-gc-capable\";
4) if the SIP re-INVITE request contains an application/vnd.3gpp.mcvideo-
info+xml MIME body with the \ element containing the \ element with the \ element set to a value of
\"false\":
a) should display to the MCVideo user the MCVideo ID of the MCVideo user
cancelling the MCVideo imminent peril group call and an indication that this
is an MCVideo imminent peril group call;
b) shall set the MCVideo imminent peril group state to \"MVIG 1: no-imminent-
peril\"; and
c) shall set the MCVideo imminent peril group call state to \"MVIGC 1:
imminent-peril-gc-capable\";
5) shall check if a Resource-Priority header field is included in the incoming
SIP re-INVITE request and may perform further actions outside the scope of
this specification to act upon an included Resource-Priority header field as
specified in 3GPP TS 24.229 [11];
6) shall accept the SIP re-INVITE request and generate a SIP 200 (OK) response
according to rules and procedures of 3GPP TS 24.229 [11];
7) shall include the g.3gpp.mcvideo media feature tag in the Contact header
field of the SIP 200 (OK) response;
8) shall include the g.3gpp.icsi-ref media feature tag containing the value of
\"urn:urn-7:3gpp-service.ims.icsi.mcvideo\" in the Contact header field of the
SIP 200 (OK) response;
9) if the SIP re-INVITE request was received within an on-demand session,
shall include an SDP answer in the SIP 200 (OK) response to the SDP offer in
the incoming SIP re-INVITE request according to 3GPP TS 24.229 [11] with the
clarifications given in clause 6.2.2;
10) shall send the SIP 200 (OK) response towards the MCVideo server according
to rules and procedures of 3GPP TS 24.229 [11]; and
11) shall interact with the media plane as specified in 3GPP TS 24.581 [5].
##### 9.2.1.2.3 End group call
###### 9.2.1.2.3.1 Client originating procedures on-demand
When an MCVideo client wants to leave the MCVideo session that has been
established using on-demand session, the MCVideo client shall follow the
procedures as specified in clause 6.2.4.1.
###### 9.2.1.2.3.3 Client terminating procedures
Upon receiving a SIP BYE request for releasing the prearranged MCVideo group
call, the MCVideo client shall follow the procedures as specified in clause
6.2.6.
##### 9.2.1.2.4 Re-join procedure
###### 9.2.1.2.4.1 On demand session establishment
Upon receiving a request from an MCVideo user to re-join an ongoing MCVideo
session or triggered by coming back from out of coverage, the MCVideo client
shall generate an initial SIP INVITE request by following the UE originating
session procedures specified in 3GPP TS 24.229 [11], with the clarifications
given below.
NOTE: How an MCVideo client is informed whether it comes back from out of
coverage is out of scope of present document.
The MCVideo client shall follow the procedures specified in clause 9.2.1.2.1.1
with the clarification in step 9) of clause 9.2.1.2.1.1 that the Request-URI
of the SIP INVITE request shall contain a URI of the MCVideo session identity
to re-join.
#### 9.2.1.3 Participating MCVideo function procedures
##### 9.2.1.3.1 Originating procedures
###### 9.2.1.3.1.1 On demand prearranged group call
In the procedures in this clause:
1) group identity in an incoming SIP INVITE request refers to the group
identity from the \ element of the
application/vnd.3gpp.mcvideo-info+xml MIME body of the incoming SIP INVITE
request;
2) emergency indication in an incoming SIP INVITE request refers to the
\ element of the application/vnd.3gpp.mcvideo-info+xml MIME
body; and
3) imminent peril indication in an incoming SIP INVITE request refers to the
\ element of the application/vnd.3gpp.mcvideo-info+xml MIME
body.
Upon receipt of a \"SIP INVITE request for originating participating MCVideo
function\" containing an application/vnd.3gpp.mcvideo-info+xml MIME body with
the \ element set to a value of \"prearranged\", the
participating MCVideo function:
1) if unable to process the request due to a lack of resources or a risk of
congestion exists, may reject the SIP INVITE request with a SIP 500 (Server
Internal Error) response. The participating MCVideo function may include a
Retry-After header field to the SIP 500 (Server Internal Error) response as
specified in IETF RFC 3261 [15]. Otherwise, continue with the rest of the
steps;
NOTE 1: if the SIP INVITE request contains an emergency indication or an
imminent peril indication set to a value of \"true\" and this is an authorised
request for originating a priority call as determined by clause 6.3.2.1.8.1,
the participating MCVideo function can according to local policy choose to
accept the request.
2) shall determine the MCVideo ID of the calling user from public user
identity in the P-Asserted-Identity header field of the SIP INVITE request,
and shall authorise the calling user;
NOTE 2: The MCVideo ID of the calling user is bound to the public user
identity at the time of service authorisation, as documented in clause 7.3.
3) if through local policy in the participating MCVideo function, the user
identified by the MCVideo ID is not authorised to initiate prearranged group
calls, shall reject the \"SIP INVITE request for originating participating
MCVideo function\" with a SIP 403 (Forbidden) response to the SIP INVITE
request, with warning text set to \"109 user not authorised to make
prearranged group calls\" in a Warning header field as specified in clause
4.4;
4) shall validate the media parameters and if the MCVideo codecs are not
offered in the SIP INVITE request shall reject the request with a SIP 488 (Not
Acceptable Here) response. Otherwise, continue with the rest of the steps;
5) shall check if the number of maximum simultaneous MCVideo group calls
supported for the MCVideo user as specified in the \
element of the \ element of the MCVideo user profile
document (see the MCVideo user profile document in 3GPP TS 24.484 [25]) has
been exceeded. If exceeded, the participating MCVideo function shall respond
with a SIP 486 (Busy Here) response with the warning text set to \"103 maximum
simultaneous MCVideo group calls reached\" in a Warning header field as
specified in clause 4.4. Otherwise, continue with the rest of the steps;
NOTE 3: If the SIP INVITE request contains an emergency indication or an
imminent peril indication, the participating MCVideo function can by means
beyond the scope of this specification choose to allow for an exception to the
limit for the maximum simultaneous MCVideo sessions supported for the MCVideo
user. Alternatively, a lower priority session of the MCVideo user could be
terminated to allow for the new session.
6) if the user identified by the MCVideo ID is not affiliated to the group
identified in the \"SIP INVITE request for originating participating MCVideo
function\" as determined by clause 8.2.2.2.11 and this is an authorised
request for originating a priority call as determined by clause 6.3.2.1.8.1,
shall perform the actions specified in clause 8.2.2.2.12 for implicit
affiliation;
7) if the actions for implicit affiliation specified in step 6) above were
performed but not successful in affiliating the MCVideo user due to the
MCVideo user already having N2 simultaneous affiliations, shall reject the
\"SIP INVITE request for originating participating MCVideo function\" with a
SIP 486 (Busy Here) response with the warning text set to \"102 too many
simultaneous affiliations\" in a Warning header field as specified in clause
4.4. and skip the rest of the steps.
NOTE 4: N2 is the total number of MCVideo groups that an MCVideo user can be
affiliated to simultaneously as specified in 3GPP TS 23.281 [26].
NOTE 5: if the SIP INVITE request contains an emergency indication set to a
value of \"true\" or an imminent peril indication set to a value of \"true\"
and this is an authorised request for originating a priority call as
determined by clause 6.3.2.1.8.1, the participating MCVideo function can
according to local policy choose to allow an exception to the N2 limit.
Alternatively, a lower priority affiliation of the MCVideo user could be
cancelled to allow for the new affiliation.
8) shall determine the public service identity of the controlling MCVideo
function associated with the group identity in the SIP INVITE request;
NOTE 6: The public service identity can identify the controlling MCVideo
function in the primary MCVideo system or a partner MCVideo system.
NOTE 7: How the participating MCVideo server discovers the public service
identity of the controlling MCVideo function associated with the group
identity is out of scope of the current release.
9) shall generate a SIP INVITE request as specified in clause 6.3.2.1.3;
10) shall set the Request-URI to the public service identity of the
controlling MCVideo function associated with the group identity which was
present in the incoming SIP INVITE request;
11) shall not copy the following header fields from the incoming SIP INVITE
request to the outgoing SIP INVITE request, if they were present in the
incoming SIP INVITE request:
a) Answer-Mode header field as specified in IETF RFC 5373 [27]; and
b) Priv-Answer-Mode header field as specified in IETF RFC 5373 [27];
12) shall set the \ element of the
application/vnd.3gpp.mcvideo-info+xml MIME body of the SIP INVITE request to
the MCVideo ID of the calling user;
13) shall include in the SIP INVITE request an SDP offer based on the SDP
offer in the received SIP INVITE request from the MCVideo client as specified
in clause 6.3.2.1.1.1;
14) if the received SIP INVITE request contains an
application/vnd.3gpp.location-info+xml MIME body and if not already copied,
shall copy the contents of the application/vnd.3gpp.location-info+xml MIME
body received in the SIP INVITE request into an application/vnd.3gpp.location-
info+xml MIME body included in the outgoing SIP request;
15) if a Resource-Priority header field was included in the received SIP
INVITE request, shall include a Resource-Priority header field according to
rules and procedures of 3GPP TS 24.229 [11] set to the value indicated in the
Resource-Priority header field of the SIP INVITE request from the MCVideo
client; and
NOTE 8: The participating MCVideo function will leave verification of the
Resource-Priority header field to the controlling MCVideo function.
16) shall forward the SIP INVITE request, according to 3GPP TS 24.229 [11].
Upon receipt of a SIP 302 (Moved Temporarily) response to the above SIP INVITE
request in step 15), the participating MCVideo function:
1) shall generate a SIP INVITE request as specified in clause 6.3.2.1.10;
2) shall include an SDP offer based upon the SDP offer in the received SIP
INVITE request from the MCVideo client as specified in clause 6.3.2.1.1.1; and
3) shall forward the SIP INVITE request according to 3GPP TS 24.229 [11].
Upon receipt of a SIP 2xx response in response to the above SIP INVITE request
in step 15), the participating MCVideo function:
1) if the received SIP 2xx response contains an application/vnd.3gpp.mcvideo-
info+xml MIME body with an \ element, shall perform the procedures
in clause 6.3.2.3.2;
2) shall generate a SIP 200 (OK) response as in clause 6.3.2.1.5.2;
3) shall include in the SIP 200 (OK) response an SDP answer as specified in
the clause 6.3.2.1.2.1;
4) shall include Warning header field(s) that were received in the incoming
SIP 200 (OK) response;
5) shall include the public service identity received in the P-Asserted-
Identity header field of the incoming SIP 200 (OK) response into the
P-Asserted-Identity header field of the outgoing SIP 200 (OK) response;
6) shall include an MCVideo session identity mapped to the MCVideo session
identity provided in the Contact header field of the received SIP 200 (OK)
response;
7) if the procedures of clause 8.2.2.2.12 for implicit affiliation were
performed in the present clause, shall complete the implicit affiliation by
performing the procedures of clause 8.2.2.2.13;
8) shall send the SIP 200 (OK) response to the MCVideo client according to
3GPP TS 24.229 [11];
9) shall interact with Media Plane as specified in 3GPP TS 24.581 [5]; and
10) shall start the SIP Session timer according to rules and procedures of
IETF RFC 4028 [23].
Upon receipt of a SIP 4xx, 5xx or 6xx response to the above SIP INVITE request
in step 14) the participating MCVideo function:
1) shall generate a SIP response according to 3GPP TS 24.229 [11];
2) shall include Warning header field(s) that were received in the incoming
SIP response;
3) shall forward the SIP response to the MCVideo client according to 3GPP TS
24.229 [11]; and
4) if the implicit affiliation procedures of clause 8.2.2.2.12 were invoked in
this procedure, shall perform the procedures of clause 8.2.2.2.14;
###### 9.2.1.3.1.3 Reception of a SIP re-INVITE request from served MCVideo
client
This clause covers on-demand session.
Upon receipt of a SIP re-INVITE request for an MCVideo session identifying an
on-demand prearranged MCVideo group session, the participating MCVideo
function:
1) if unable to process the request due to a lack of resources or a risk of
congestion exists, may reject the SIP re-INVITE request with a SIP 500 (Server
Internal Error) response. The participating MCVideo function may include a
Retry-After header field to the SIP 500 (Server Internal Error) response as
specified in IETF RFC 3261 [15] and skip the rest of the steps;
NOTE 1: If the SIP re-INVITE request contains an application/vnd.3gpp.mcvideo-
info+xml MIME body with the \ element set to a value of
\"true\", the participating MCVideo function can choose to accept the request.
2) shall determine if the media parameters are acceptable and the MCVideo
codecs are offered in the SDP offer and if not, reject the request with a SIP
488 (Not Acceptable Here) response. Otherwise, continue with the rest of the
steps;
3) shall generate an outgoing SIP re-INVITE request as specified in clause
6.3.2.1.9;
4) shall, if the SIP re-INVITE request was received within an on-demand
session, include in the SIP re-INVITE request an SDP offer based on the SDP
offer in the received SIP re-INVITE request as specified in clause 6.3.2.1.1;
5) if the received SIP re-INVITE request contains a Resource-Priority header
field, shall include a Resource-Priority header field with the contents set as
in the received Resource-Priority header field; and
NOTE 3: The controlling MCVideo function will determine the validity of the
Resource-Priority header field.
6) shall forward the SIP re-INVITE request according to 3GPP TS 24.229 [11].
Upon receipt of a SIP 2xx response to the above SIP re-INVITE request in step
7) the participating MCVideo function:
1) shall generate a SIP 200 (OK) response as specified in the clause
6.3.2.1.5.2;
2) shall include in the SIP 200 (OK) response an SDP answer as specified in
the clause 6.3.2.1.2.1;
3) shall include Warning header field(s) that were received in the incoming
SIP 200 (OK) response;
4) shall copy the contents received in the P-Asserted-Identity header field of
the incoming SIP 200 (OK) response into the P-Asserted-Identity header field
of the outgoing SIP 200 (OK) response;
5) shall send the SIP 200 (OK) response towards the MCVideo client according
to 3GPP TS 24.229 [11]; and
6) shall interact with the media plane as specified in 3GPP TS 24.581 [5].
Upon receipt of a SIP 403 (Forbidden) response to the above SIP INVITE request
in step 7) the participating MCVideo function:
1) shall generate a SIP 403 (Forbidden) response according to 3GPP TS 24.229
[11];
2) shall copy, if included in the received SIP 403 (Forbidden) response, the
application/vnd.3gpp.mcvideo-info+xml MIME body MIME body to the outgoing SIP
(Forbidden) response;
3) shall include Warning header field(s) that were received in the incoming
SIP 403 (Forbidden) response;
4) shall forward the SIP 403 (Forbidden) response to the MCVideo client
according to 3GPP TS 24.229 [11]; and
5) shall interact with the media plane as specified in 3GPP TS 24.581 [5].
##### 9.2.1.3.2 Terminating Procedures
In the procedures in this clause:
1) emergency indication in an incoming SIP INVITE request refers to the
\ element of the application/vnd.3gpp.mcvideo-info+xml MIME
body; and
2) imminent peril indication in an incoming SIP INVITE request refers to the
\ element of the application/vnd.3gpp.mcvideo-info+xml MIME
body.
NOTE 1: This clause covers on-demand session.
Upon receipt of a \"SIP INVITE request for terminating participating MCVideo
function\", the participating MCVideo function:
1) if unable to process the request due to a lack of resources or a risk of
congestion exists, may reject the SIP INVITE request with a SIP 500 (Server
Internal Error) response. The participating MCVideo function may include a
Retry-After header field to the SIP 500 (Server Internal Error) response as
specified in IETF RFC 3261 [15], and shall not continue with the rest of the
steps;
NOTE 2: if the SIP INVITE request contains an emergency indication or an
imminent peril indication set to a value of \"true\" and this is an authorised
request for originating a priority call as determined by clause 6.3.2.1.8.1,
the participating MCVideo function can according to local policy choose to
accept the request.
2) shall check the presence of the isfocus media feature tag in the URI of the
Contact header field and if it is not present then the participating MCVideo
function shall reject the request with a SIP 403 (Forbidden) response with the
warning text set to \"104 isfocus not assigned\" in a Warning header field as
specified in clause 4.4, and shall not continue with the rest of the steps;
3) if the Answer-Mode Indication in the application/poc-settings+xml MIME body
has not yet been received from the invited MCVideo client as defined in clause
7.3.3 or clause 7.3.4, shall reject the request with a SIP 480 (Temporarily
Unavailable) response with the warning text set to \"146 T-PF unable to
determine the service settings for the called user\" in a Warning header field
as specified in clause 4.4, and shall not continue with the rest of the steps;
4) shall use the MCVideo ID present in the \ element of
the application/vnd.3gpp.mcvideo-info+xml MIME body of the incoming SIP INVITE
request to retrieve the binding between the MCVideo ID and public user
identity;
5) if the binding between the MCVideo ID and public user identity does not
exist, then the participating MCVideo function shall reject the SIP INVITE
request with a SIP 404 (Not Found) response. Otherwise, continue with the rest
of the steps;
6) if the SIP INVITE request contains an application/vnd.3gpp.mcvideo-info+xml
MIME body with an \ element, shall perform the procedures in
clause 6.3.2.3.2;
7) shall perform the automatic commencement procedures specified in clause
6.3.2.2.5.1 and according to IETF RFC 5373 [27] if the \"SIP INVITE request
for terminating participating MCVideo function\" does not contain an Answer-
Mode header field and the Answer-Mode Indication received in the
application/poc-settings+xml MIME body received from the invited MCVideo
client as per clause 7.3.3 or clause 7.3.4 is set to \"auto-answer\"; and
8) shall perform the manual commencement procedures specified in clause
6.3.2.2.6.1 and according to IETF RFC 5373 [27] if the \"SIP INVITE request
for terminating participating MCVideo function\" does not contain an Answer-
Mode header field and the Answer-Mode Indication received in the
application/poc-settings+xml MIME body received from the invited MCVideo
client as per clause 7.3.3 or clause 7.3.4 is set to \"manual-answer\".
##### 9.2.1.3.3 End group call at the originating participating MCVideo
function
###### 9.2.1.3.3.1 Receipt of SIP BYE request for ending group call on-demand
Upon receiving from the MCVideo client a SIP BYE request the participating
MCVideo function shall follow the procedures as specified in clause 6.3.2.1.6.
##### 9.2.1.3.4 End group call at the terminating participating MCVideo
function
###### 9.2.1.3.4.1 Receipt of SIP BYE request for private call on-demand
Upon receiving a SIP BYE request from the controlling MCVideo function, the
participating MCVideo function shall follow the procedures as specified in
clause 6.3.2.2.8.1.
##### 9.2.1.3.5 Re-join procedures
###### 9.2.1.3.5.1 Originating procedures - on demand prearranged group call
Upon receipt of a \"SIP INVITE request for originating participating MCVideo
function\" containing an application/vnd.3gpp.mcvideo-info+xml MIME body with
the \ element set to a value of \"prearranged\", the
participating MCVideo function shall follow the procedures specified in clause
9.2.1.3.1.1 with the clarification in step 10) of clause 9.2.1.3.1.1 that the
Request-URI of the SIP INVITE request shall contain a URI of the MCVideo
session identity which mapped to the MCVideo session identity provided in
Request-URI header field of the \"SIP INVITE request for originating
participating MCVideo function\".
##### 9.2.1.3.6 Reception of a SIP re-INVITE request for terminating MCVideo
client for priority call
In the procedures in this clause:
1) emergency indication in an incoming SIP INVITE request refers to the
\ element of the application/vnd.3gpp.mcvideo-info+xml MIME
body; and
2) imminent peril indication in an incoming SIP INVITE request refers to the
\ element of the application/vnd.3gpp.mcvideo-info+xml MIME
body.
Upon receipt of a SIP re-INVITE request for a terminating MCVideo client of a
MCVideo group containing an emergency indication or imminent peril indication,
the participating MCVideo function:
1) shall check if a Resource-Priority header field is included in the incoming
SIP INVITE request and may perform further actions outside the scope of this
specification to act upon an included Resource-Priority header field as
specified in 3GPP TS 24.229 [11];
2) shall generate an outgoing SIP re-INVITE request as specified in clause
6.3.2.2.10;
3) shall include in the SIP re-INVITE request an SDP offer based on the SDP
offer in the received SIP re-INVITE request as specified in clause 6.3.2.2.1;
and
4) shall send the SIP re-INVITE request towards the MCVideo client according
to 3GPP TS 24.229 [11].
Upon receiving a SIP 200 (OK) response to the above SIP re-INVITE request sent
to the MCVideo client, the participating MCVideo function:
1) shall generate a SIP 200 (OK) response as described in the clause
6.3.2.2.4.2;
2) shall include in the SIP 200 (OK) response an SDP answer based on the SDP
answer in the received SIP 200 (OK) response as specified in clause
6.3.2.2.2.1;
3) shall interact with the media plane as specified in 3GPP TS 24.581 [5]; and
4) shall forward the SIP 200 (OK) response according to 3GPP TS 24.229 [11].
#### 9.2.1.4 Controlling MCVideo function procedures
##### 9.2.1.4.1 Originating Procedures
###### 9.2.1.4.1.1 INVITE targeted to an MCVideo client
This clause describes the procedures for inviting an MCVideo user to an
MCVideo session. The procedure is initiated by the controlling MCVideo
function as the result of an action in clause 9.2.1.4.2 or as the result of
receiving a SIP 403 (Forbidden) response as described in this clause.
The controlling MCVideo function:
1) shall generate a SIP INVITE request as specified in clause 6.3.3.1.2;
2) shall set the Request-URI to the public service identity of the terminating
participating MCVideo function associated to the MCVideo user to be invited.;
NOTE 1: How the controlling MCVideo function finds the address of the
terminating MCVideo participating function is out of the scope of the current
release.
NOTE 2: If the terminating MCVideo user is part of a partner MCVideo system,
then the public service identity can identify an entry point in the partner
network that is able to identify the terminating participating MCVideo
function.
3) shall set the P-Asserted-Identity header field to the public service
identity of the controlling MCVideo function;
4) shall include in the application/vnd.3gpp.mcvideo-info+xml MIME body in the
outgoing SIP INVITE request:
a) the \ element set to the MCVideo ID of the terminating
user; and
b) the \ element set to the group identity;
NOTE 3: The \ is already included in the MIME body as
a result of calling clause 6.3.3.1.2 in step 1).
5) shall include in the SIP INVITE request an SDP offer based on the SDP offer
in the received SIP INVITE request from the originating network according to
the procedures specified in clause 6.3.3.1.1;
6) if the in-progress emergency state of the group is set to a value of
\"true\" the controlling MCVideo function:
a) shall include a Resource-Priority header field populated with the values
for an MCVideo emergency group call as specified in clause 6.3.3.1.19;
b) if the received SIP INVITE request contained an
application/vnd.3gpp.mcvideo-info+xml MIME body with the \
element set to a value of \"true\":
i) shall include in the outgoing SIP INVITE request in the
application/vnd.3gpp.mcvideo-info+xml MIME body an \ element
set to a value of \"true\"; and
ii) if the \ element is set to \"true\" in the received SIP INVITE
request and the requesting MCVideo user and MCVideo group are authorised for
the initiation of MCVideo emergency alerts as determined by the procedures of
clause 6.3.3.1.13.1, shall populate the application/vnd.3gpp.mcvideo-info+xml
MIME body and the application/vnd.3gpp.location-info+xml MIME body as
specified in clause 6.3.3.1.12. Otherwise, shall set the \ element
to a value of \"false\"; and
c) if the in-progress imminent peril state of the group is set to a value of
\"true\" shall include in the application/vnd.3gpp.mcvideo-info+xml MIME body
an \ element set to a value of \"false\";
7) if the in-progress emergency state of the group is set to a value of
\"false\" and the in-progress imminent peril state of the group is set to a
value of \"true\", the controlling MCVideo function:
a) shall include a Resource-Priority header field populated with the values
for an MCVideo imminent peril group call as specified in clause 6.3.3.1.19;
and
b) shall include in the application/vnd.3gpp.mcvideo-info+xml MIME body with
the \ element set to a value of \"true\";
8) if:
a) an MCVideo GKTP document exists for the group identity contained in the
\ element in the application/vnd.3gpp.mcvideo-info+xml
MIME body of the incoming SIP INVITE request; and
b) the MCVideo GKTP document contains a \ element;
then:
a) for each instance of \ element of the \ element of the
MCVideo GKTP document:
i) shall perform the procedure in clause 6.3.3.6.2 to re-generate an
I_MESSAGE; and
ii) if the procedure in clause 6.3.3.6.2 was successful, shall include the
I_MESSAGE in a \ element of the \ element of an
application/vnd.3gpp.mcvideo-info+xml MIME body included in the outgoing SIP
INVITE request; and
9) shall send the SIP INVITE request towards the terminating network in
accordance with 3GPP TS 24.229 [11].
Upon receiving a SIP 183 (Session Progress) response containing a Require
header field with the option tag \"100rel\" and containing a P-Answer-State
header field with the value \"Unconfirmed\" in response to the SIP INVITE
request the controlling MCVideo function:
1) shall send a SIP PRACK request towards the MCVideo client according to 3GPP
TS 24.229 [11].
Upon receiving a SIP 200 (OK) response for the SIP INVITE request the
controlling MCVideo function:
1) shall interact with the media plane as specified in 3GPP TS 24.581 [5]
clause 6.3;
2) shall send a SIP NOTIFY request to all participants with a subscription to
the conference event package as specified in clause 9.2.3.4; and
3) shall increment the local counter of the number of SIP 200 (OK) responses
received from invited members, by 1.
NOTE 4: The notifications above could be sent prior to the SIP 200 (OK)
response being sent to the inviting MCVideo client. These notifications
received by MCVideo clients that are group members do not mean that the group
session will be successfully established.
NOTE 5: The procedures executed by the controlling MCVideo function prior to
sending a response to the inviting MCVideo client are specified in clause
9.2.1.4.2.
###### 9.2.1.4.1.2 INVITE targeted to the non-controlling MCVideo function of
an MCVideo group
The controlling MCVideo function:
1) shall generate a SIP INVITE request as specified in clause 6.3.3.1.2;
2) shall set the Request-URI to the public service identity of the non-
controlling MCVideo function serving the group identity of the MCVideo group
owned by the partner MCVideo system;
3) shall set the P-Asserted-Identity to the public service identity of the
controlling MCVideo function;
4) shall include in the application/vnd.3gpp.mcvideo-info+xml MIME body in the
outgoing SIP INVITE request:
a) the \ element set to the group identity of the MCVideo
group hosted by the non-controlling MCVideo function in the partner MCVideo
system; and
b) the \ element set to the group identity of the
group served by the controlling MCVideo function;
5) shall include the Recv-Info header field set to g.3gpp.mcvideo-
transmission-request;
6) if:
a) an MCVideo GKTP document exists for the group identity contained in the
\ element in the application/vnd.3gpp.mcvideo-info+xml
MIME body of the incoming SIP INVITE request; and
b) the MCVideo GKTP document contains a \ element;
then:
a) for each instance of \ element of the \ element of the
MCVideo GKTP document:
i) shall perform the procedure in clause 6.3.3.6.2 to re-generate an
I_MESSAGE; and
ii) if the procedure in clause 6.3.3.6.2 was successful, shall include the
I_MESSAGE in a \ element of the \ element of an
application/vnd.3gpp.mcvideo-info+xml MIME body included in the outgoing SIP
INVITE request;
7) shall include in the SIP INVITE request an SDP offer based on the SDP offer
in the received SIP INVITE request from the originating network according to
the procedures specified in clause 6.3.3.1.1; and
8) shall send the SIP INVITE request towards the partner MCVideo system in
accordance with 3GPP TS 24.229 [11].
Upon receiving SIP 403 (Forbidden) response for the SIP INVITE request, if
according to local policy and if:
1) the response contains a Warning header field with the MCVideo warning code
\"128\"; and
2) the response contains a P-Refused-URI-List header field and an
application/resource-lists+xml MIME body as specified in IETF RFC 5318 [28];
NOTE 1: The application/resource-lists+xml MIME body contains MCVideo IDs
identifying MCVideo users in a partner MCVideo system that needs to be invited
to the prearranged group call in case of group regrouping using interrogating
method.
Editor\'s Note: The above note currently isn\'t defined in the 23.280 and
23.281.
then the controlling MCVideo function:
1) shall check if the number of members of the MCVideo group exceeds the value
contained in the \ element of the group
document as specified in 3GPP TS 24.481 [24]. If exceeded, the controlling
MCVideo function shall invite only \ members
from the application/resource-lists+xml MIME body; and
NOTE 2: The \ element indicates the maximum
number of participants allowed in the prearranged group session It is operator
policy that determines which participants in the application/resource-
lists+xml MIME body are invited to the group call.
2) shall invite MCVideo users as specified in this clause using the list of
MCVideo IDs in URI-List.
Upon receiving a SIP 200 (OK) response for the SIP INVITE request the
controlling MCVideo function:
1) shall interact with the media plane as specified in 3GPP TS 24.581 [5]
clause 6.3; and
NOTE 3: The procedures executed by the controlling MCVideo function prior to
sending a response to the inviting MCVideo client are specified in clause
9.2.1.4.2.
2) if at least one of the invited MCVideo clients has subscribed to the
conference package, shall subscribe to the conference event package in the
non-controlling MCVideo function as specified in clause 9.2.3.4.3.
##### 9.2.1.4.2 Terminating Procedures
In the procedures in this clause:
1) MCVideo ID in an incoming SIP INVITE request refers to the MCVideo ID of
the originating user from the \ element of the
application/vnd.3gpp.mcvideo-info+xml MIME body of the incoming SIP INVITE
request;
2) group identity in an incoming SIP INVITE request refers to the group
identity from the \ element of the
application/vnd.3gpp.mcvideo-info+xml MIME body of the incoming SIP INVITE
request;
3) MCVideo ID in an outgoing SIP INVITE request refers to the MCVideo ID of
the called user in the \ element of the
application/vnd.3gpp.mcvideo-info+xml MIME body of the outgoing SIP INVITE
request;
4) indication of required group members in a SIP 183 (Session Progress)
response refers to the \ element of the
application/vnd.3gpp.mcvideo-info+xml MIME body set to \"true\" in a SIP 183
(Session Progress) sent by the non-controlling MCVideo function of an MCVideo
group;
5) emergency indication in an incoming SIP INVITE request refers to the
\ element of the application/vnd.3gpp.mcvideo-info+xml MIME
body; and
6) imminent peril indication in an incoming SIP INVITE request refers to the
\ element of the application/vnd.3gpp.mcvideo-info+xml MIME
body.
Upon receipt of a \"SIP INVITE request for controlling MCVideo function of an
MCVideo group\", the controlling MCVideo function:
1) if unable to process the request due to a lack of resources or a risk of
congestion exists, may reject the SIP INVITE request with a SIP 500 (Server
Internal Error) response. The controlling MCVideo function may include a
Retry-After header field to the SIP 500 (Server Internal Error) response as
specified in IETF RFC 3261 [15] and skip the rest of the steps;
NOTE 1: if the SIP INVITE request contains an emergency indication or an
imminent peril indication set to a value of \"true\" and this is an authorised
request for originating an MCVideo emergency group call as determined by
clause 6.3.3.1.13.2, or for originating an MCVideo imminent peril group call
as determined by clause 6.3.3.1.13.5, the controlling MCVideo function can
according to local policy choose to accept the request.
2) shall determine if the media parameters are acceptable and the MCVideo
codecs are offered in the SDP offer and if not reject the request with a SIP
488 (Not Acceptable Here) response and skip the rest of the steps;
3) shall reject the SIP request with a SIP 403 (Forbidden) response and not
process the remaining steps if:
a) an Accept-Contact header field does not include the g.3gpp.mcvideo media
feature tag; or
b) an Accept-Contact header field does not include the g.3gpp.icsi-ref media
feature tag containing the value of \"urn:urn-7:3gpp-
service.ims.icsi.mcvideo\";
4) if received SIP INVITE request includes an application/vnd.3gpp.mcvideo-
info+xml MIME body with an \ element included or an
\ element included, shall validate the request as described
in clause 6.3.3.1.17;
5) shall retrieve the necessary group document(s) from the group management
server for the group identity contained in the SIP INVITE request and carry
out initial processing as specified in clause 6.3.5.2;
6) if the result of the initial processing in clause 6.3.5.2 was:
a) that authorization of the MCVideo ID is required at a non-controlling
MCVideo function of an MCVideo group is required, perform the actions in
clause 6.3.3.1.13.7 and do not continue with the rest of the steps in this
clause; and
b) that a SIP 3xx, 4xx, 5xx or 6xx response to the \"SIP INVITE request for
controlling MCVideo function of an MCVideo group\" has been sent, do not
continue with the rest of the steps in this clause;
7) shall perform the actions as described in clause 6.3.3.2.2;
8) shall maintain a local counter of the number of SIP 200 (OK) responses
received from invited members and shall initialise this local counter to zero;
9) shall determine if an MCVideo group call for the group identity is already
ongoing by determining if an MCVideo session identity has already been
allocated for the group call and the MCVideo session is active;
10) if the SIP INVITE request contains an unauthorised request for an MCVideo
emergency group call as determined by clause 6.3.3.1.13.2:
a) shall reject the SIP INVITE request with a SIP 403 (Forbidden) response as
specified in clause 6.3.3.1.14; and
b) shall send the SIP 403 (Forbidden) response as specified in 3GPP TS 24.229
[11] and skip the rest of the steps;
11) if the SIP INVITE request contains an unauthorised request for an MCVideo
imminent peril group call as determined by clause 6.3.3.1.13.5, shall reject
the SIP INVITE request with a SIP 403 (Forbidden) response with the following
clarifications:
a) shall include in the SIP 403 (Forbidden) response an
application/vnd.3gpp.mcvideo-info+xml MIME body as specified in clause F.1
with the \ element containing the \ element with
the \ element set to a value of \"false\"; and
b) shall send the SIP 403 (Forbidden) response as specified in 3GPP TS 24.229
[11] and skip the rest of the steps;
12) if a Resource-Priority header field is included in the SIP INVITE request:
a) if the Resource-Priority header field is set to the value indicated for
emergency calls and the SIP INVITE request does not contain an emergency
indication and the in-progress emergency state of the group is set to a value
of \"false\", shall reject the SIP INVITE request with a SIP 403 (Forbidden)
response and skip the rest of the steps; or
b) if the Resource-Priority header field is set to the value indicated for
imminent peril calls and the SIP INVITE request does not contain an imminent
peril indication and the in-progress imminent peril state of the group is set
to a value of \"false\", shall reject the SIP INVITE request with a SIP 403
(Forbidden) response and skip the rest of the steps;
13) if the MCVideo group call is not ongoing then:
a) if:
i) the user identified by the MCVideo ID is not affiliated to the group
identity contained in the SIP INVITE request as specified in clause 6.3.6;
ii) the group identity contained in the SIP INVITE request is not a
constituent MCVideo group ID;
iii) the received SIP INVITE request does not contain an emergency indication
or imminent peril indication; or
iv) the received SIP INVITE request is an authorised request for an MCVideo
emergency group call as determined by clause 6.3.3.1.13.2 or MCVideo imminent
peril group call as determined by steps clause 6.3.3.1.13.5 and is determined
to not be eligible for implicit affiliation as specified in clause 8.2.2.3.6;
> then shall return a SIP 403 (Forbidden) response with the warning text set
> to \"120 user is not affiliated to this group\" in a Warning header field as
> specified in clause 4.4, and skip the rest of the steps below;
b) if the user identified by the MCVideo ID is not authorised to initiate the
prearranged group session as specified in clause 6.3.5.4, shall send a SIP 403
(Forbidden) response with the warning text set to: \"119 user is not
authorised to initiate the group call\" in a Warning header field as specified
in clause 4.4 and skip the rest of the steps below;
c) if the received SIP INVITE request contains an an authorised request for an
MCVideo emergency group call as determined by clause 6.3.3.1.13.2 or MCVideo
imminent peril group call as determined by clause 6.3.3.1.13.5 and the MCVideo
user is eligible to be implicitly affiliated with the MCVideo group as
determined as determined in step 13) a) iv) above, shall perform the implicit
affiliation as specified in clause 8.2.2.3.7;
d) shall check if a Resource-Priority header field is included in the incoming
SIP INVITE request and may apply any preferential treatment to the SIP request
as specified in 3GPP TS 24.229 [11];
e) shall create a prearranged group session and allocate an MCVideo session
identity for the prearranged group call, and shall handle timer TNG3 (group
call timer) as specified in clause 6.3.3.5;
f) if the group identity in the \"SIP INVITE request for controlling MCVideo
function of an MCVideo group\" is a TGI:
i) shall for each of the constituent MCVideo groups homed on the primary
MCVideo system:
A) if the controlling MCVideo function does not own the MCVideo group
identified by the MCVideo group ID, then generate a SIP INVITE request towards
the MCVideo server that owns the MCVideo group identity by following the
procedures in clause 9.2.1.4.1.2; and
NOTE 2: The MCVideo server that the SIP INVITE request is sent to acts as a
non-controlling MCVideo function;
B) if the controlling MCVideo function owns the MCVideo group identified by
the MCVideo group ID then:
I) determine the members to invite to the prearranged MCVideo group call as
specified in clause 6.3.5.5;
II) invite each group member determined in step A) above, to the group
session, as specified in clause 9.2.1.4.1.1; and
III) interact with the media plane as specified in 3GPP TS 24.581 [5] clause
6.3; and
ii) shall for each of the constituent MCVideo groups homed on the partner
MCVideo system generate a SIP INVITE request for the MCVideo group identity
homed on the partner MCVideo system as specified in clause 9.2.1.4.1.2; and
g) if the group identity in the SIP INVITE request for controlling MCVideo
function of an MCVideo group is an MCVideo group ID:
i) shall determine the members to invite to the prearranged MCVideo group call
as specified in clause 6.3.5.5;
ii) if necessary, shall start timer TNG1 (acknowledged call setup timer)
according to the conditions stated in clause 6.3.3.3;
iii) if the received SIP INVITE request includes an
application/vnd.3gpp.mcvideo-info+xml MIME body with an \
element set to a value of \"true\":
A) shall cache the information that this MCVideo user has initiated an MCVideo
emergency call;
B) if the received SIP INVITE contains an alert indication set to a value of
\"true\" and this is an authorised request for an MCVideo emergency alert
meeting the conditions specified in clause 6.3.3.1.13.1, shall cache the
information that this MCVideo user has initiated an MCVideo emergency alert;
and
C) if the in-progress emergency state of the group is set to a value of
\"false\":
I) shall set the value of the in-progress emergency state of the group to
\"true\"; and
II) shall start timer TNG2 (in-progress emergency group call timer) and handle
its expiry as specified in clause 6.3.3.1.16;
iv) if the in-progress emergency state of the group is set to a value of
\"false\" and if the received SIP INVITE request contains an imminent peril
indication set to a value of \"true\", the controlling MCVideo function shall:
A) shall cache the information that this MCVideo user has initiated an MCVideo
imminent peril call; and
B) if the in-progress imminent peril state of the group is set to a value of
\"false\", shall set the in-progress imminent peril state of the group to a
value of \"true\";
v) shall invite each group member determined in step 13)g)i) above, to the
group session, as specified in clause 9.2.1.4.1.1; and
vi) shall interact with the media plane as specified in 3GPP TS 24.581 [5]
clause 6.3; and
14) if the MCVideo group call is ongoing then:
a) if:
i) the user identified by the MCVideo ID in the SIP INVITE request is not
affiliated to the group identity contained in the SIP INVITE request as
specified in clause 6.3.6;
ii) the group identity contained in the SIP INVITE request is not a
constituent MCVideo group ID;
iii) the received SIP INVITE request does not contain an emergency indication
or imminent peril indication; or
iv) the received SIP INVITE request is an authorised request for an MCVideo
emergency group call as determined by clause 6.3.3.1.13.2 or MCVideo imminent
peril group call as determined clause 6.3.3.1.13.5 and is determined to not be
eligible for implicit affiliation as specified in clause 8.2.2.3.6;
> then shall return a SIP 403 (Forbidden) response with the warning text set
> to \"120 user is not affiliated to this group\" in a Warning header field as
> specified in clause 4.4, and skip the rest of the steps below;
b) if the user identified by the MCVideo ID in the SIP INVITE request is not
authorised to join the prearranged group session as specified in clause
6.3.5.3, shall send a SIP 403 (Forbidden) response with the warning text set
to \"121 user is not allowed to join the group call\" in a Warning header
field as specified in clause 4.4 and skip the rest of the steps below;
c) shall check if a Resource-Priority header field is included in the incoming
SIP INVITE request and may apply any preferential treatment to the SIP request
as specified in 3GPP TS 24.229 [11];
d) if \ as specified in 3GPP TS 24.481 [24]
is already reached:
i) if, according to local policy, the user identified by the MCVideo ID in the
SIP INVITE request is deemed to have a higher priority than an existing user
in the group session, may remove a participant from the session by following
clause 9.2.1.4.4.3, and skip the next step; and
NOTE 3: The local policy for deciding whether to admit a user to a call that
has reached its maximum amount of participants can include the \ and the \ of the user as well as other information
of the user from the group document as specified in 3GPP TS 24.481 [24]. The
local policy decisions can also include taking into account whether the
imminent-peril indicator or emergency indicator was received in the SIP INVITE
request.
ii) shall return a SIP 486 (Busy Here) response with the warning text set to
\"122 too many participants\" to the originating network as specified in
clause 4.4 and skip the rest of the steps;
e) if the received SIP INVITE request contains an an authorised request for an
MCVideo emergency group call as determined by clause 6.3.3.1.13.2 or MCVideo
imminent peril group call as determined by clause 6.3.3.1.13.5 and the MCVideo
user is eligible to be implicitly affiliated with the MCVideo group as
determined in step 14) a) iv) above, shall perform the implicit affiliation as
specified in clause 8.2.2.3.7;
f) if the received SIP INVITE request includes an
application/vnd.3gpp.mcvideo-info+xml MIME body with an \
element set to a value of \"true\":
i) shall cache the information that this MCVideo user has initiated an MCVideo
emergency call;
ii) if the received SIP INVITE contains an alert indication set to a value of
\"true\" and this is an authorised request for an MCVideo emergency alert
meeting the conditions specified in clause 6.3.3.1.13.1, shall cache the
information that this MCVideo user has initiated an MCVideo emergency alert;
iii) if the in-progress emergency state of the group is set to a value of
\"false\":
A) shall set the value of the in-progress emergency state of the group to
\"true\";
B) shall start timer TNG2 (in-progress emergency group call timer) and handle
its expiry as specified in clause 6.3.3.1.16; and
C) shall generate SIP re-INVITE requests for the MCVideo emergency group call
to the other call participants of the MCVideo group as specified in clause
6.3.3.1.6;
iv) if the in-progress imminent peril state of the group is set to a value of
\"true\":
A) for each of the other affiliated member of the group generate a SIP MESSAGE
request notification of the MCVideo user\'s imminent peril indication as
specified in clause 6.3.3.1.11, setting the \ element of
the application/vnd.3gpp.mcvideo-info+xml MIME body to a value of \"true\";
and
B) send the SIP MESSAGE request as specified in 3GPP TS 24.229 [11]; and
v) upon receiving a SIP 200 (OK) response to the SIP re-INVITE request the
controlling MCVideo function shall interact with the media plane as specified
in 3GPP TS 24.581 [5];
g) if the in-progress emergency state of the group is set to a value of
\"false\" and if the SIP INVITE request contains an imminent peril indication
set to a value of \"true\", the controlling MCVideo function:
i) shall cache the information that this MCVideo user has initiated an MCVideo
imminent peril call; and
ii) if the in-progress imminent peril state of the group is set to a value of
\"false\":
A) shall set the in-progress imminent peril state of the group to a value of
\"true\";
B) shall generate SIP re-INVITE requests for the MCVideo imminent peril group
call to the other call participants of the MCVideo group as specified in
clause 6.3.3.1.15; and
C) upon receiving a SIP 200 (OK) response to the SIP re-INVITE request the
controlling MCVideo function shall interact with the media plane as specified
in 3GPP TS 24.581 [5]; and
iii) if the in-progress imminent peril state of the group is set to a value of
\"true\":
A) for each of the other affiliated member of the group generate a SIP MESSAGE
request notification of the MCVideo user\'s imminent peril indication as
specified in clause 6.3.3.1.11, setting the \ element of
the application/vnd.3gpp.mcvideo-info+xml MIME body to a value of \"true\";
and
B) send the SIP MESSAGE request as specified in 3GPP TS 24.229 [11];
h) shall generate a SIP 200 (OK) response as specified in the clause
6.3.3.2.4.2;
i) shall include in the SIP 200 (OK) response an SDP answer to the SDP offer
in the incoming SIP INVITE request as specified in the clause 6.3.3.2.1;
j) shall include in the SIP 200 (OK) response with the warning text set to
\"123 MCVideo session already exists\" as specified in clause 4.4;
k) if the received SIP re-INVITE request contains an alert indication set to a
value of \"true\" and this is an unauthorised request for an MCVideo emergency
alert as specified in clause 6.3.3.1.13.1, shall include in the SIP 200 (OK)
response the warning text set to \"149 SIP INFO request pending\" in a Warning
header field as specified in clause 4.4;
l) if the received SIP re-INVITE request contains an
application/vnd.3gpp.mcvideo-info+xml MIME body with the \
element set to a value of \"true\" and if the in-progress emergency state of
the group is set to a value of \"true\", shall include in the SIP 200 (OK)
response the warning text set to \"149 SIP INFO request pending\" in a Warning
header field as specified in clause 4.4;
NOTE 4: In this case, the request was for an imminent peril call but a higher
priority MCVideo emergency call was already in progress on the group. Hence,
the imminent peril call request aspect of the request is denied but the
request is granted with emergency level priority.
m) shall interact with media plane as specified in 3GPP TS 24.581 [5] clause
6.3;
NOTE 5: Resulting media plane processing is completed before the next step is
performed.
n) shall send the SIP 200 (OK) response towards the inviting MCVideo client or
inviting non-controlling MCVideo function according to 3GPP TS 24.229 [11];
o) shall generate a notification to the MCVideo clients, which have subscribed
to the conference state event package that the inviting MCVideo User has
joined in the MCVideo group session, as specified in clause 6.3.3.4;
NOTE 6: As a group document can potentially have a large content, the
controlling MCVideo function can notify using content-indirection as defined
in IETF RFC 4483 [29].
p) shall send a SIP NOTIFY request to each MCVideo client according to 3GPP TS
24.229 [11];
q) Upon receiving a SIP ACK to the above SIP 200 (OK) response and the SIP 200
(OK) response contained a Warning header field as specified in clause 4.4 with
the warning text containing the mcvideo-warn-code set to \"149\", shall follow
the procedures in clause 6.3.3.1.18; and
r) shall not continue with the rest of the clause.
Upon receiving a SIP 183 (Session Progress) response to the SIP INVITE request
specified in clause 9.2.1.4.1 containing a P-Answer-State header field with
the value \"Unconfirmed\" as specified in IETF RFC 4964 [30], the timer TNG1
(acknowledged call setup timer) is not running, the controlling MCVideo
function supports media buffering and the SIP final response is not yet sent
to the inviting MCVideo client:
1) shall generate a SIP 200 (OK) response to SIP INVITE request as specified
in the clause 6.3.3.2.3.2;
2) shall include the warning text set to \"122 too many participants\" as
specified in clause 4.4 in the SIP 200 (OK) response, if the prearranged
MCVideo group has more than \ members as
specified in 3GPP TS 24.481 [24];
3) shall include in the SIP 200 (OK) response an SDP answer to the SDP offer
in the incoming SIP INVITE request as specified in the clause 6.3.3.2.1;
4) shall include a P-Answer-State header field with the value \"Unconfirmed\";
5) if the SIP INVITE request contains an alert indication set to a value of
\"true\" and this is an unauthorised request for an MCVideo emergency alert as
specified in clause 6.3.3.1.13.1, shall include in the SIP 200 (OK) response
the warning text set to \"149 SIP INFO request pending\" in a Warning header
field as specified in clause 4.4;
6) if the received SIP INVITE request contains an
application/vnd.3gpp.mcvideo-info+xml MIME body with the \
element set to a value of \"true\" and if the in-progress emergency state of
the group is set to a value of \"true\", shall include in the SIP 200 (OK)
response the warning text set to \"149 SIP INFO request pending\" in a Warning
header field as specified in clause 4.4;
7) shall interact with the media plane as specified in 3GPP TS 24.581 [5]
clause 6.3;
NOTE 7: Resulting user plane processing is completed before the next step is
performed.
8) shall send the SIP 200 (OK) response towards the inviting MCVideo client
according to 3GPP TS 24.229 [11];
9) shall generate a notification to the MCVideo clients, which have subscribed
to the conference state event package that the inviting MCVideo User has
joined in the MCVideo group session, as specified in clause 6.3.3.4; and
NOTE 8: As a group document can potentially have a large content, the
controlling MCVideo function can notify using content-indirection as defined
in IETF RFC 4483 [29].
10) shall send a SIP NOTIFY request to each MCVideo client according to 3GPP
TS 24.229 [11].
Upon receiving a SIP 183 (Session Progress) response for a SIP INVITE request
as specified in clause 9.2.1.4.1.2 containing an indication of required group
members, the timer TNG1 (acknowledged call setup timer) is running and all SIP
200 (OK) responses have been received to all SIP INVITE requests sent to
MCVideo clients specified in clause 9.2.1.4.1.1, then the controlling MCVideo
function shall wait until the SIP 200 (OK) response has been received to the
SIP INVITE request specified in clause 9.2.1.4.1.2 before generating a SIP 200
(OK) response to the \"SIP INVITE request for controlling MCVideo function of
an MCVideo group\".
Upon receiving a SIP 200 (OK) response for a SIP INVITE request as specified
in clause 9.2.1.4.1 that was sent to an affiliated and \
group member as specified in 3GPP TS 24.481 [24]; and
1) if the MCVideo ID in the SIP 200 (OK) response matches to the MCVideo ID in
the corresponding SIP INVITE request;
2) there are no outstanding SIP 200 (OK) responses to SIP INVITE requests
which were sent to affiliated and \ group members as
specified in 3GPP TS 24.481 [24]; and
3) there is no outstanding SIP 200 (OK) response to a SIP INVITE request sent
in clause 9.2.1.4.1.2 where the SIP 183 (Session Progress) response contained
an indication of required group members;
the controlling MCVideo function:
1) shall stop timer TNG1 (acknowledged call setup timer) as described in
clause 6.3.3.3;
2) shall generate SIP 200 (OK) response to the SIP INVITE request as specified
in the clause 6.3.3.2.3.2 before continuing with the rest of the steps;
3) shall include the warning text set to \"122 too many participants\" as
specified in clause 4.4 in the SIP 200 (OK) response, if all members were not
invited because the prearranged MCVideo group has been exceeded the \ members as specified in 3GPP TS 24.481 [24];
4) shall include in the SIP 200 (OK) response an SDP answer to the SDP offer
in the incoming SIP INVITE request as specified in the clause 6.3.3.2.1;
5) shall interact with the media plane as specified in 3GPP TS 24.581 [5]
clause 6.3;
NOTE 9: Resulting media plane processing is completed before the next step is
performed.
6) shall send a SIP 200 (OK) response to the inviting MCVideo client according
to 3GPP TS 24.229 [11];
7) shall generate a notification to the MCVideo clients, which have subscribed
to the conference state event package that the inviting MCVideo user has
joined in the MCVideo group session, as specified in clause 6.3.3.4; and
NOTE 10: As a group document can potentially have a large content, the
controlling MCVideo function can notify using content-indirection as defined
in IETF RFC 4483 [29].
8) shall send the SIP NOTIFY request to the MCVideo clients according to 3GPP
TS 24.229 [11].
Upon:
1) receiving a SIP 200 (OK) response for a SIP INVITE request as specified in
clause 9.2.1.4.1;
2) the timer TNG1 (acknowledged call setup timer) is not running;
3) the local counter of the number of SIP 200 (OK) responses received from
invited members is equal to the value of the \ element of the group document;
4) the controlling MCVideo function supports media buffering; and
5) the SIP final response has not yet been sent to the inviting MCVideo
client;
the controlling MCVideo function according to local policy:
1) shall generate SIP 200 (OK) response to the SIP INVITE request as specified
in the clause 6.3.3.2.2;
2) shall include the warning text set to \"122 too many participants\" as
specified in clause 4.4 in the SIP 200 (OK) response, if all members were not
invited because the prearranged MCVideo group has exceeded the \ members as specified in 3GPP TS 24.481 [24];
3) shall include in the SIP 200 (OK) response an SDP answer to the SDP offer
in the incoming SIP INVITE request as specified in the clause 6.3.3.2.1;
4) if the SIP INVITE request contains an alert indication set to a value of
\"true\" and this is an unauthorised request for an MCVideo emergency alert as
specified in clause 6.3.3.1.13.1, shall include in the SIP 200 (OK) response
the warning text set to \"149 SIP INFO request pending\" in a Warning header
field as specified in clause 4.4;
5) if the received SIP INVITE request contains an
application/vnd.3gpp.mcvideo-info+xml MIME body with the \
element set to a value of \"true\" and if the in-progress emergency state of
the group is set to a value of \"true\", shall include in the SIP 200 (OK)
response the warning text set to \"149 SIP INFO request pending\" in a Warning
header field as specified in clause 4.4;
6) shall interact with the media plane as specified in 3GPP TS 24.581 [5]
clause 6.3;
NOTE 11: Resulting media plane processing is completed before the next step is
performed.
7) shall send a SIP 200 (OK) response to the inviting MCVideo client according
to 3GPP TS 24.229 [11];
8) shall generate a notification to the MCVideo clients, which have subscribed
to the conference state event package that the inviting MCVideo user has
joined in the MCVideo group session, as specified in clause 6.3.3.4; and
NOTE 12: As a group document can potentially have a large content, the
controlling MCVideo function can notify using content-indirection as defined
in IETF RFC 4483 [29].
9) shall send the SIP NOTIFY request to the MCVideo clients according to 3GPP
TS 24.229 [11].
Upon expiry of timer TNG1 (acknowledged call setup timer), if there are
outstanding SIP 200 (OK) responses to SIP INVITE requests sent to affiliated
and \ group members as specified in 3GPP TS 24.481 [24],
the controlling MCVideo function shall follow the procedures specified in
clause 6.3.3.3 _._
If timer TNG1 (acknowledged call setup timer) is running and a final SIP 4xx,
5xx or 6xx response is received from an affiliated and \
group member as specified in 3GPP TS 24.481 [24], the controlling MCVideo
function shall follow the relevant procedures specified in clause 6.3.3.3 _._
If:
1) timer TNG1 (acknowledged call setup timer) is not running;
2) the local counter of the number of SIP 200 (OK) responses received from
invited members is equal to the value of the \ element of the group document; and
3) a final SIP 4xx, 5xx or 6xx response is received from an invited MCVideo
client;
then the controlling MCVideo function shall perform one of the following based
on policy:
1) send the SIP final response towards the inviting MCVideo client, according
to 3GPP TS 24.229 [11], if a SIP final response was received from all the
other invited MCVideo clients and the SIP 200 (OK) response is not yet sent;
or
2) remove the invited MCVideo client from the MCVideo Session as specified in
clause 6.3.3.1.5, if a SIP final response other than 2xx or 3xx was received
from all the invited MCVideo clients and the SIP 200 (OK) response is already
sent. The controlling MCVideo function may invite an additional member of the
prearranged MCVideo group as specified in clause 9.2.1.4.1 that has not
already been invited, if the prearranged MCVideo group has more than \ members as specified in 3GPP TS 24.481 [24],
and all members have not yet been invited.
Upon receiving a SIP ACK to the SIP 200 (OK) response sent towards the
inviting MCVideo client, and the SIP 200 (OK) response was sent with the
warning text set to \"149 SIP INFO request pending\" in a Warning header field
as specified in clause 4.4, the controlling MCVideo function shall follow the
procedures in clause 6.3.3.1.18.
##### 9.2.1.4.3 End group call at the terminating controlling MCVideo function
Upon receiving a SIP BYE request the controlling MCVideo function shall follow
the procedures as specified in clause 6.3.3.2.4.
##### 9.2.1.4.4 End group call initiated by the controlling MCVideo function
###### 9.2.1.4.4.1 General
This clause describes the procedures of each functional entity for ending the
group call initiated by the controlling MCVideo function.
###### 9.2.1.4.4.2 SIP BYE request for releasing MCVideo session for a group
call
When the MCVideo session for group call needs to be released as specified in
clause 6.3.8.1, the controlling MCVideo function shall follow the procedures
in clause 6.3.3.1.5.
###### 9.2.1.4.4.3 SIP BYE request toward a MCVideo client
When an MCVideo client needs to be removed from the MCVideo session (e.g. due
to de-affiliation or admitting a higher priority user), the controlling
MCVideo function shall follow the procedures in clause 6.3.3.1.5.
After successful removing the MCVideo client from the MCVideo session, the
controlling MCVideo function may generate a notification to the MCVideo
clients, which have subscribed to the conference state event package that an
MCVideo user has been removed from the MCVideo session, as specified in clause
6.3.3.4 and send the SIP NOTIFY request to the MCVideo client according to
3GPP TS 24.229 [11].
##### 9.2.1.4.5 Re-join procedures
###### 9.2.1.4.5.1 Terminating procedures
Upon receipt of a SIP INVITE request that includes an MCVideo session identity
of an ongoing MCVideo session in the Request-URI the controlling MCVideo
function:
1) if unable to process the request due to a lack of resources or a risk of
congestion exists, may reject the SIP INVITE request with a SIP 500 (Server
Internal Error) response. The controlling MCVideo function may include a
Retry-After header field to the SIP 500 (Server Internal Error) response as
specified in IETF RFC 3261 [15]. Otherwise, continue with the rest of the
steps;
NOTE 1: if the SIP INVITE request contains an emergency indication or an
imminent peril indication set to a value of \"true\" and this is an authorised
request for originating an MCVideo emergency group call as determined by
clause 6.3.3.1.13.2, or for originating an MCVideo imminent peril group call
as determined by clause 6.3.3.1.13.5, the controlling MCVideo function can
according to local policy choose to accept the request.
2) shall reject the SIP request with a SIP 404 (Not Found) response if the
MCVideo group call represented by the MCVideo session identity in Request-URI
header is not present;
3) shall determine if the media parameters are acceptable and the MCVideo
codecs are offered in the SDP offer and if not, reject the request with a SIP
488 (Not Acceptable Here) response. Otherwise, continue with the rest of the
steps;
4) shall reject the SIP request with a SIP 403 (Forbidden) response and not
process the remaining steps if:
a) an Accept-Contact header field does not include the g.3gpp.mcvideo media
feature tag; or
b) an Accept-Contact header field does not include the g.3gpp.icsi-ref media
feature tag containing the value of \"urn:urn-7:3gpp-
service.ims.icsi.mcvideo\";
5) shall determine the MCVideo ID of the calling user;
6) if the user identified by the MCVideo ID is not authorised to join the
prearranged group session as specified in clause 6.3.5.3, shall send a SIP 403
(Forbidden) response with the warning text set to \"121 user is not authorised
to join the group call\" in a Warning header field as specified in clause 4.4.
Otherwise continue with the rest of the steps below;
7) shall perform the actions on receipt of an initial SIP INVITE request as
described in clause 6.3.3.2.2;
8) if the user identified by the MCVideo ID is not affiliated to the MCVideo
group ID associated with the MCVideo session identity as specified in clause
6.3.3.5, shall return a SIP 403 (Forbidden) response with the warning text set
to \"120 user is not affiliated to this group\" in a Warning header field as
specified in clause 4.4;
9) shall check if a Resource-Priority header field is included in the incoming
SIP INVITE request and may apply any preferential treatment to the SIP request
as specified in 3GPP TS 24.229 [11];
10) if \ as specified in 3GPP TS 24.481 [24]
is already reached:
a) if, according to local policy, the user identified by the MCVideo ID in the
SIP INVITE request is deemed to have a higher priority than an existing user
in the group session, may remove a participant from the session by following
clause 9.2.1.4.4.3, and skip the next step; and
NOTE 2: The local policy for deciding whether to admit a user to a call that
has reached its maximum amount of participants can include the \ and the \ of the user as well as other information
of the user from the group document as specified in 3GPP TS 24.481 [24]. The
local policy decisions can also include taking into account whether the
imminent-peril indicator or emergency indicator was received in the SIP INVITE
request.
b) shall return a SIP 486 (Busy Here) response with the warning text set to
\"122 too many participants\" to the originating network as specified in
clause 4.4. Otherwise, continue with the rest of the steps;
11) shall generate a SIP 200 (OK) response as specified in the clause
6.3.3.2.3.2;
12) shall include in the SIP 200 (OK) response an SDP answer to the SDP offer
in the incoming SIP INVITE request as specified in the clause 6.3.3.2.1;
13) shall interact with media plane as specified in 3GPP TS 24.581 [5] clause
6.3;
NOTE 3: Resulting media plane processing is completed before the next step is
performed.
14) shall send the SIP 200 (OK) response towards the inviting MCVideo client
according to 3GPP TS 24.229 [11];
15) shall generate a notification to the MCVideo clients, which have
subscribed to the conference state event package that the inviting MCVideo
User has joined in the MCVideo group session, as specified in clause 6.3.3.4;
and
NOTE 4: As a group document can potentially have a large content, the
controlling MCVideo function can notify using content-indirection as defined
in IETF RFC 4483 [29].
16) shall send a SIP NOTIFY request to each MCVideo client according to 3GPP
TS 24.229 [11].
##### 9.2.1.4.6 Late call entry initiated by controlling MCVideo function
When controlling MCVideo function is notified that an MCVideo client is newly
affiliated or comes back from out of coverage, the controlling MCVideo
function shall invite the MCVideo client to join an ongoing MCVideo group call
by following the procedures specified in clause 9.2.1.4.1.
NOTE: How the MCVideo function is informed when an MCVideo client is coming
back from out of coverage is out of scope of present document.
##### 9.2.1.4.7 Receipt of a SIP re-INVITE request
In the procedures in this clause:
1) emergency indication in an incoming SIP INVITE request refers to the
\ element of the application/vnd.3gpp.mcvideo-info+xml MIME
body; and
2) imminent peril indication in an incoming SIP INVITE request refers to the
\ element of the application/vnd.3gpp.mcvideo-info+xml MIME
body.
Upon receipt of a SIP re-INVITE request for an MCVideo session identity
identifying an on-demand prearranged MCVideo group session, the controlling
MCVideo function:
1) if unable to process the request due to a lack of resources or a risk of
congestion exists, may reject the SIP re-INVITE request with a SIP 500 (Server
Internal Error) response. The controlling MCVideo function may include a
Retry-After header field to the SIP 500 (Server Internal Error) response as
specified in IETF RFC 3261 [15] and skip the rest of the steps;
NOTE 1: If the SIP re-INVITE request contains an application/vnd.3gpp.mcvideo-
info+xml MIME body with the \ element set to a value of
\"true\", the controlling MCVideo function can choose to accept the request.
2) if received SIP re-INVITE request includes an application/vnd.3gpp.mcvideo-
info+xml MIME body with an \ element included or an
\ element included, shall validate the request as described
in clause 6.3.3.1.17;
3) if the received SIP re-INVITE request contains an unauthorised request for
an MCVideo emergency call as determined by clause 6.3.3.1.13.2:
a) shall reject the SIP re-INVITE request with a SIP 403 (Forbidden) response
as specified in clause 6.3.3.1.14; and
b) shall send the SIP 403 (Forbidden) response as specified in 3GPP TS 24.229
[11] and skip the rest of the steps;
4) if the received SIP re-INVITE request contains an imminent peril indication
set to \"true\" for an MCVideo imminent peril group call and this is an
unauthorised request for an MCVideo imminent peril group call as determined by
clause 6.3.3.1.13.6, shall reject the SIP re-INVITE request with a SIP 403
(Forbidden) response with the following clarifications:
a) shall include in the SIP 403 (Forbidden) response an
application/vnd.3gpp.mcvideo-info+xml MIME body as specified in clause F.1
with the \ element containing the \ element with
the \ element set to a value of \"false\"; and
b) shall send the SIP 403 (Forbidden) response as specified in 3GPP TS 24.229
[11] and skip the rest of the steps;
5) if a Resource-Priority header field is included in the received SIP re-
INVITE request:
a) if the Resource-Priority header field is set to the value indicated for
emergency calls and the SIP re-INVITE request does not contain an emergency
indication and the in-progress emergency state of the group is set to a value
of \"false\", shall reject the SIP re-INVITE request with a SIP 403
(Forbidden) response and skip the rest of the steps; and
b) if the Resource-Priority header field is set to the value indicated for
imminent peril calls and the SIP re-INVITE request does not contain an
imminent peril indication and the in-progress imminent peril state of the
group is set to a value of \"false\", shall reject the SIP INVITE request with
a SIP 403 (Forbidden) response and skip the rest of the steps;
6) if the received SIP re-INVITE request contains an
application/vnd.3gpp.mcvideo-info+xml MIME body with the \
element set to a value of \"true\" and is an authorised request to initiate an
MCVideo emergency group call as determined by clause 6.3.3.1.13.2, the
controlling MCVideo function shall:
i) shall cache the MCVideo ID of the MCVideo user that has initiated an
MCVideo emergency call;
ii) if the received SIP INVITE contains an alert indication set to a value of
\"true\" and this is an authorised request for an MCVideo emergency alert
meeting the conditions specified in clause 6.3.3.1.13.1, shall cache the
MCVideo ID of the MCVideo user that has initiated an MCVideo emergency alert;
iii) if the in-progress emergency state of the group is set to a value of
\"true\":
A) for each of the other affiliated member of the group generate a SIP MESSAGE
request notification of the MCVideo user\'s emergency indication as specified
in clause 6.3.3.1.11, setting the \ element of the
application/vnd.3gpp.mcvideo-info+xml MIME body to a value of \"true\";
B) send the SIP MESSAGE request as specified in 3GPP TS 24.229 [11]; and
C) if the in-progress imminent peril state of the group is set to a value of
\"true\", shall set it to a value of \"false\"; and
iv) if the in-progress emergency state of the group is set to a value of
\"false\":
A) shall set the value of the in-progress emergency state of the group to
\"true\";
B) shall start timer TNG2 (in-progress emergency group call timer) and handle
its expiry as specified in clause 6.3.3.1.16;
NOTE 2: The interactions of TNG2 with the TNG3 (group call timer) are
explained in clause 6.3.3.5.2.
Editor\'s Note: timers need to be defined..
C) shall generate SIP re-INVITE requests for the MCVideo emergency group call
to the other participants of the MCVideo group call as specified in clause
6.3.3.1.6;
D) shall send the SIP re-INVITEs towards the other participants of the MCVideo
group call; and
E) upon receiving a SIP 200 (OK) response to the SIP re-INVITE request the
controlling MCVideo function shall interact with the media plane as specified
in 3GPP TS 24.581 [5];
7) if the received SIP re-INVITE request contains an
application/vnd.3gpp.mcvideo-info+xml MIME body with the \
element set to a value of \"false\" and is an unauthorised request for an
MCVideo emergency group call cancellation as determined by clause
6.3.3.1.13.4:
a) shall reject the SIP re-INVITE request with a SIP 403 (Forbidden) response;
b) shall include in the SIP 403 (Forbidden) response an
application/vnd.3gpp.mcvideo-info+xml MIME body as specified in annex F.1 with
an \ element set to a value of \"true\";
c) if an \ element of the mcvideoinfo MIME body is included in the
SIP re-INVITE request set to \"false\", and there is an outstanding MCVideo
emergency alert for this MCVideo user, shall include in the
application/vnd.3gpp.mcvideo-info+xml MIME body an \ element set to
a value of \"true\"; and
d) shall send the SIP 403 (Forbidden) response as specified in 3GPP TS 24.229
[11] and skip the rest of the steps;
8) if the received SIP re-INVITE request contains an
application/vnd.3gpp.mcvideo-info+xml MIME body with the \
element set to a value of \"false\" and is determined to be an authorised
request for an MCVideo emergency call cancellation as specified in clause
6.3.3.1.16 and the in-progress emergency state of the group to is set to a
value of \"true\" the controlling MCVideo function:
a) shall set the in-progress emergency group state of the group to a value of
\"false\";
b) shall clear the cache of the MCVideo ID of the MCVideo user as having an
outstanding MCVideo emergency group call;
c) if an \ element of the application/vnd.3gpp.mcvideo-info+xml
MIME body is included and set to \"false\" and is determined to be an
authorised request for an MCVideo emergency alert cancellation as specified in
clause 6.3.3.1.13.3 and there is an outstanding MCVideo emergency alert for
this MCVideo user shall:
i) if the received SIP re-INVITE request contains an \ element
in the application/vnd.3gpp.mcvideo-info+xml MIME body, clear the cache of the
MCVideo ID of the MCVideo user identified by the \ element as
having an outstanding MCVideo emergency alert; or
ii) if the received SIP re-INVITE request does not contain an \
element in the application/vnd.3gpp.mcvideo-info+xml MIME body, clear the
cache of the MCVideo ID of the sender of the SIP re-INVITE request as having
an outstanding MCVideo emergency alert;
d) shall generate SIP re-INVITE requests to the participants in the group call
as specified in clause 6.3.3.1.6. The MCVideo controlling function:
i) for each of the other participants in the group call shall send the SIP re-
INVITE request towards the MCVideo client as specified in 3GPP TS 24.229 [11];
and
ii) Upon receiving a SIP 200 (OK) response to the SIP re-INVITE request the
controlling MCVideo function shall interact with the media plane as specified
in 3GPP TS 24.581 [5];
NOTE 3: Clause 6.3.3.1.5 will inform the group call participants of the
cancellation of the MCVideo group\'s in-progress emergency state and the
cancellation of the MCVideo emergency alert if applicable.
e) shall stop timer TNG2 (in-progress emergency group call timer); and
NOTE 4: The interactions of TNG2 with the TNG3 (group call timer) are
explained in clause 6.3.3.5.2;
f) for each of the affiliated members of the group that are not participating
in the call:
i) generate a SIP MESSAGE request notification of the cancellation of the
MCVideo user\'s emergency call as specified in clause 6.3.3.1.11;
ii) set the \ element of the application/vnd.3gpp.mcvideo-
info+xml MIME body to a value of \"false\";
iii) if indicated above in step 8) c), set the \ element of the
application/vnd.3gpp.mcvideo-info+xml MIME body to a value of \"false\"; and
iv) send the SIP MESSAGE request according to 3GPP TS 24.229 [11];
9) if the received SIP re-INVITE request contains an imminent peril indication
and the in-progress emergency group state of the group is set to a value of
\"false\", shall perform the procedures specified in clause 9.2.1.4.8 and skip
the rest of the steps.
Upon receiving a SIP 200 (OK) response to a SIP re-INVITE request the
controlling MCVideo function shall interact with the media plane as specified
in 3GPP TS 24.581 [5];
1) shall generate a SIP 200 (OK) response according to rules and procedures of
3GPP TS 24.229 [11];
2) shall include in the SIP 200 (OK) response an SDP answer according to 3GPP
TS 24.229 [11] with the clarifications specified in clause 6.3.3.2.1;
3) shall include the \"norefersub\" option tag in a Supported header field
according to IETF RFC 4488 [31];
4) shall include the \"tdialog\" option tag in a Supported header field
according to IETF RFC 4538 [32];
5) if the received SIP re-INVITE request contains an
application/vnd.3gpp.mcvideo-info+xml MIME body with the \ element
set to a value of \"true\" and if this is an unauthorised request for an
MCVideo emergency alert as determined by clause 6.3.3.1.13.1, shall include in
the SIP 200 (OK) response the warning text set to \"149 SIP INFO request
pending\" in a Warning header field as specified in clause 4.4;
6) if the received SIP re-INVITE request contains an
application/vnd.3gpp.mcvideo-info+xml MIME body with the \ element
set to a value of \"false\" and if this is an unauthorised request for an
MCVideo emergency alert cancellation as determined by clause 6.3.3.1.13.3,
shall include in the SIP 200 (OK) response the warning text set to \"149 SIP
INFO request pending\" in a Warning header field as specified in clause 4.4;
7) if the received SIP re-INVITE request contains an
application/vnd.3gpp.mcvideo-info+xml MIME body with the \
element set to a value of \"true\", this is an authorised request for an
MCVideo imminent peril group call and the in-progress emergency state of the
group is set to a value of \"true\", shall include in the SIP 200 (OK)
response the warning text set to \"149 SIP INFO request pending\" in a Warning
header field as specified in clause 4.4;
NOTE 5: In this case, the request was for an imminent peril call but a higher
priority MCVideo emergency call was already in progress on the group. Hence,
the imminent peril call request aspect of the request is denied but the
request is granted with emergency level priority.
8) shall interact with media plane as specified in 3GPP TS 24.581 [5]; and
9) shall send the SIP 200 (OK) response towards the MCVideo client according
to 3GPP TS 24.229 [11].
Upon receiving a SIP ACK to the SIP 200 (OK) response sent towards the
inviting MCVideo client, and the SIP 200 (OK) response was sent with the
warning text set to \"149 SIP INFO request pending\" in a Warning header field
as specified in clause 4.4, the controlling MCVideo function shall follow the
procedures in clause 6.3.3.1.18.
Upon receipt of a SIP 2xx response for an outgoing SIP MESSAGE request, shall
handle according to 3GPP TS 24.229 [11].
##### 9.2.1.4.8 Handling of a SIP re-INVITE request for imminent peril session
This procedure is initiated by the controlling MCVideo function as the result
of an action in clause 9.2.1.4.7.
In the procedures in this clause:
1) imminent peril indication in an incoming SIP re-INVITE request refers to
the \ element of the application/vnd.3gpp.mcvideo-info+xml
MIME body.
When the controlling function receives a SIP re-INVITE request with an
imminent peril indication set to \"true\", the controlling function:
1) if the in-progress emergency state of the group is set to a value of
\"false\" and if the SIP re-INVITE request contains an imminent peril
indication set to a value of \"true\" or the in-progress imminent peril state
of the group to \"true\", the controlling MCVideo function shall:
NOTE: 1 The calling procedure has already determined that this is not an
unauthorised request for an MCVideo imminent peril call, therefore that check
does not need to be repeated in the current procedure.
a) if the in-progress imminent peril state of the group is set to a value of
\"true\" and this MCVideo user is indicating a new imminent peril indication:
i) for each of the other affiliated member of the group generate a SIP MESSAGE
request notification of the MCVideo user\'s imminent peril indication as
specified in clause 6.3.3.1.11 with the following clarifications;
A) set the \ element of the application/vnd.3gpp.mcvideo-
info+xml MIME body to a value of \"true\"; and
B) send the SIP MESSAGE request as specified in 3GPP TS 24.229 [11];
b) if the in-progress imminent peril state of the group is set to a value of
\"false\";
i) set the value of the in-progress imminent peril state of the group to
\"true\";
ii) generate SIP re-INVITE requests for the MCVideo imminent peril group call
to participants in the MCVideo group call as specified in clause 6.3.3.1.15;
iii) send the SIP re-INVITES to all of the other participants in the MCVideo
group call;
iv) for each of the affiliated members of the group not participating in the
group call, generate a SIP MESSAGE request notification of the MCVideo user\'s
imminent peril indication as specified in clause 6.3.3.1.11 with the following
clarifications;
A) set the \ element of the application/vnd.3gpp.mcvideo-
info+xml MIME body to a value of \"true\"; and
B) send the SIP MESSAGE request as specified in 3GPP TS 24.229 [11]; and
c) cache the information that this MCVideo user has initiated an MCVideo
imminent peril call;
2) if the SIP re-INVITE request contains an application/vnd.3gpp.mcvideo-
info+xml MIME body with the \ element set to a value of
\"false\" and is an unauthorised request for an MCVideo imminent peril group
call cancellation as determined by clause 6.3.3.1.13.6 shall:
a) reject the SIP re-INVITE request with a SIP 403 (Forbidden) response to the
SIP re-INVITE request; and
b) include in the SIP 403 (Forbidden) response an
application/vnd.3gpp.mcvideo-info+xml MIME body as specified in Annex F.1 with
the \ element containing the \ element with the
\ element set to a value of \"false\";
c) send the SIP 403 (Forbidden) response as specified in 3GPP TS 24.229 [11];
and
d) skip the rest of the steps;
3) if the SIP re-INVITE request contains an application/vnd.3gpp.mcvideo-
info+xml MIME body with the \ element set to a value of
\"false\" and is determined to be an authorised request for an MCVideo
imminent peril call cancellation as specified in clause 6.3.3.1.13.6 and the
in-progress imminent peril state of the group to is set to a value of \"true\"
the controlling MCVideo function shall:
a) set the in-progress imminent peril state of the group to a value of
\"false\";
b) cache the information that this MCVideo user no longer has an outstanding
MCVideo imminent peril group call;
c) generate SIP re-INVITES requests to the other participants in the MCVideo
group call as specified in clause 6.3.3.1.15. The MCVideo controlling
function:
i) for each participant shall send the SIP re-INVITE request towards the
MCVideo client as specified in 3GPP TS 24.229 [11]; and
ii) Upon receiving a SIP 200 (OK) response to the SIP re-INVITE request the
controlling MCVideo function interact with the media plane as specified in
3GPP TS 24.581 [5]; and
NOTE 2: Clause 6.3.3.1.14 will inform the affiliated and joined members of the
cancellation of the MCVideo group\'s in-progress emergency state and the
cancellation of the MCVideo emergency alert if applicable.
d) for each of the affiliated members of the group not participating in the
call shall:
i) generate a SIP MESSAGE request notification of the cancellation of the
MCVideo user\'s imminent peril call as specified in clause 6.3.3.1.11;
ii) set the \ element of the application/vnd.3gpp.mcvideo-
info+xml MIME body to a value of \"false\"; and
iii) send the SIP MESSAGE request according to 3GPP TS 24.229 [11];
4) shall include in the SIP 200 (OK) response an SDP answer according to 3GPP
TS 24.229 [11] with the clarifications specified in clause 6.3.3.2.1;
5) shall include the \"norefersub\" option tag in a Supported header field
according to IETF RFC 4488 [31];
6) shall include the \"tdialog\" option tag in a Supported header field
according to IETF RFC 4538 [32];
7) shall interact with media plane as specified in 3GPP TS 24.581 [5]; and
8) shall send the SIP 200 (OK) response towards the MCVideo client according
to 3GPP TS 24.229 [11].
Upon receipt of a SIP 2xx response for an outgoing SIP MESSAGE request, shall
handle according to 3GPP TS 24.229 [11].
#### 9.2.1.5 Non-controlling function of an MCVideo group procedures
##### 9.2.1.5.1 Originating procedures
This clause describes the procedures for inviting an MCVideo user to an
MCVideo session. The procedure is initiated by the non-controlling MCVideo
function of an MCVideo group as the result of an action in clause 9.2.1.5.2 or
clause 9.2.1.5.5.
The non-controlling MCVideo function:
1) shall invite the MCVideo clients as specified in clause 6.3.4.1.2;
2) shall include in each SIP INVITE request an SDP offer based on the SDP
offer in the received SIP INVITE request from the controlling MCVideo function
according to the procedures specified in clause 6.3.4.1.1; and
3) shall send each SIP INVITE request towards the terminating network in
accordance with 3GPP TS 24.229 [11].
For each SIP 183 (Session Progress) response received to each SIP INVITE
request sent to an MCVideo client, the non-controlling MCVideo function of an
MCVideo group:
1) For each SIP 183 (Session Progress) response containing the option tag
\"100rel\", shall send a SIP PRACK request towards the MCVideo client
according to 3GPP TS 24.229 [11]; and
2) shall cache the received response;
For each SIP 200 (OK) response received to each SIP INVITE request sent to an
MCVideo client, the non-controlling MCVideo function of an MCVideo group:
1) shall cache the SIP 200 (OK) response;
2) shall start the SIP session timer according to rules and procedures of IETF
RFC 4028 [23]; and
3) if at least one of the participants has subscribed to the conference event
package, shall send a SIP NOTIFY request to all participants with a
subscription to the conference event package as specified in clause 9.2.3.5.2.
On receipt of a SIP 3xx, 4xx, 5xx or 6xx response from an invited MCVideo
client, the non-controlling MCVideo function of an MCVideo group:
1) shall send an SIP ACK request towards the MCVideo client as specified in
3GPP TS 24.229 [11];
2) shall remove the cached provisional responses received from the MCVideo
client, if any cached provisional responses exists; and
3) if the procedures are inititated by the receipt of the \"SIP INVITE request
for non-controlling MCVideo function of an MCVideo group\" as specified in
clause 9.2.1.5.2, shall cache the SIP 3xx, 4xx, 5xx or 6xx response.
##### 9.2.1.5.2 Terminating procedures
###### 9.2.1.5.2.1 General
When receiving the \"SIP INVITE request for non-controlling MCVideo function
of an MCVideo group\" the MCVideo server can be acting as a controller MCVideo
function in an ongoing prearranged group call or, if an prearranged group call
is not ongoing, be initiated as an non-controlling MCVideo function and invite
MCVideo users.
If a prearranged group call is not ongoing the MCVideo server shall perform
the actions specified in clause 9.2.1.5.2.2.
If the \"SIP INVITE request for non-controlling MCVideo function of an MCVideo
group\" is received when a prearranged group call is ongoing, the controlling
MCVideo function may switch from operating in a controlling MCVideo function
mode to operate in a non-controlling MCVideo function mode as specified in
clause 9.2.1.5.2.3.
When operating in the non-controlling mode and a SIP BYE request is received
from the controlling MCVideo function, the non-controlling MCVideo function
shall change from operating in the non-controlling mode to operating in the
controlling mode as specified in clause 9.2.1.5.2.4.
###### 9.2.1.5.2.2 Initiating a prearranged group call
Upon receipt of a \"SIP INVITE request for non-controlling MCVideo function of
an MCVideo group\" and if a prearranged group call is not ongoing, the non-
controlling MCVideo function of an MCVideo group:
NOTE 1: The Contact header field of the SIP INVITE request contains the
\"isfocus\" feature media tag.
1) if unable to process the request due to a lack of resources or a risk of
congestion exists, may reject the SIP INVITE request with a SIP 500 (Server
Internal Error) response. The controlling MCVideo function may include a
Retry-After header field to the SIP 500 (Server Internal Error) response as
specified in IETF RFC 3261 [15]. Otherwise, continue with the rest of the
steps;
2) shall determine if the media parameters are acceptable and the MCVideo
codecs are offered in the SDP offer and if not reject the request with a SIP
488 (Not Acceptable Here) response. Otherwise, continue with the rest of the
steps;
3) shall reject the SIP request with a SIP 403 (Forbidden) response and not
process the remaining steps if:
a) an Accept-Contact header field does not include the g.3gpp.mcvideo media
feature tag; or
b) an Accept-Contact header field does not include the g.3gpp.icsi-ref media
feature tag containing the value of \"urn:urn-7:3gpp-
service.ims.icsi.mcvideo\";
4) if the partner MCVideo system does not have a mutual aid relationship with
the primary MCVideo system identified by the contents of the P-Asserted-
Identity, shall reject the \"SIP INVITE request for non-controlling MCVideo
function of an MCVideo group\" with a SIP 403 (Forbidden) response, with
warning text set to \"128 isfocus already assigned\" in a Warning header field
as specified in clause 4.4, and shall not process the remaining steps;
5) void
NOTE : In 3GPP TS 24.379 clause 10.1.1.5.2.2, step 5 deals with \"a trusted
mutual aid relationship ... between the partner MCPTT system and the primary
MCPTT system\" and references 3GPP TS 23.379 clause 10.6.2.4.2. There is no
equivalent clause in 3GPP TS 23.281. If 3GPP TS 23.281 were to include an
equivalent clause, this step 5 can be used for a step 5 equivalent to that of
3GPP TS 24.379.
6) shall retrieve the group document from the group management server for the
MCVideo group ID contained in the \ element of the
application/vnd.3gpp.mcvideo-info+xml MIME body of the SIP INVITE request and
carry out initial processing as specified in clause 6.3.5.2 and continue with
the rest of the steps if the checks in clause 6.3.5.2 succeed;
7) shall cache the content of the SIP INVITE request, if received in the
Contact header field and if the specific feature tags are supported;
8) shall check if a Resource-Priority header field is included in the incoming
SIP INVITE request and may apply any preferential treatment to the SIP request
as specified in 3GPP TS 24.229 [11];
9) determine the members to invite to the prearranged MCVideo group call as
specified in clause 6.3.5.5;
10) if the group document retrieved from the group management server contains
\ group members as specified in 3GPP TS 24.481 [24],
shall send a SIP 183 (Session Progress) response to the SIP INVITE request for
non-controlling MCVideo function of an MCVideo group as specified in clause
6.3.4.2.2.1 and shall populate the response with an
application/vnd.3gpp.mcvideo-info+xml MIME body containing the \
element set to \"true\".
11) if the group document retrieved from the group management server does not
contain any \ group members as specified in 3GPP TS
24.481 [24], may, according to local policy, send a SIP 183 (Session Progress)
response to the SIP INVITE request for non-controlling MCVideo function of an
MCVideo group as specified in clause 6.3.4.2.2.1;
12) shall invite each group member determined in step 9) above, to the group
session, as specified in clause 9.2.1.5.1; and
13) shall interact with the media plane as specified in 3GPP TS 24.581 [5]
clause 6.3;
Unless a SIP response has been sent to the controlling MCVideo function as
specified in step 10 or 11 above, the non-controlling MCVideo function of an
MCVideo group shall wait for the first SIP provisional response or first SIP
200 (OK) response from one of the invited MCVideo clients, before sending a
response to the SIP INVITE request for non-controlling MCVideo function of an
MCVideo group.
Upon receiving the first 18x response to a SIP INVITE request sent to an
invited MCVideo client as specified in clause 9.2.1.5.1, not containing a
P-Answer-State header field, and if a SIP 183 (Session Progress) response has
not already been sent in response to the SIP INVITE request for non-
controlling MCVideo function of an MCVideo group, the non-controlling MCVideo
function of an MCVideo group:
1) shall generate a SIP 183 (Session Progress) response as described in clause
6.3.4.2.2.1; and
2) shall forward the SIP 183 (Session Progress) response to the controlling
MCVideo function according to 3GPP TS 24.229 [11].
Upon receiving the first 18x response to a SIP INVITE request sent to an
invited MCVideo client as specified in clause 9.2.1.5.1, containing a
P-Answer-State header field with the value \"Unconfirmed\" as specified in
IETF RFC 4964 [30], a SIP 183 (Session Progress) response has not already been
sent in response to the SIP INVITE request for non-controlling MCVideo
function of an MCVideo group and the non-controlling MCVideo function of an
MCVideo group supports media buffering, the non-controlling MCVideo function
of an MCVideo group:
1) shall generate SIP 200 (OK) response to the SIP INVITE request as specified
in the clause 6.3.4.2.2.2 before continuing with the rest of the steps;
2) shall include in the SIP 200 (OK) response an SDP answer to the SDP offer
in the incoming SIP INVITE request as specified in the clause 6.3.4.2.1;
3) shall interact with the media plane as specified in 3GPP TS 24.581 [5]
clause 6.3.5; and
NOTE 2: Resulting media plane processing is completed before the next step is
performed.
4) shall send a SIP 200 (OK) response to the controlling MCVideo function
according to 3GPP TS 24.229 [11].
If the group document does not contain any \ group
members as specified in 3GPP TS 24.481 [24], then upon receiving the first SIP
200 (OK) response to a SIP INVITE request sent to an invited MCVideo client as
specified in clause 9.2.1.5.1, the non-controlling MCVideo function of an
MCVideo group:
1) shall generate SIP 200 (OK) response to the SIP INVITE request as specified
in the clause 6.3.4.2.2.2 before continuing with the rest of the steps;
2) shall include in the SIP 200 (OK) response an SDP answer to the SDP offer
in the incoming SIP INVITE request as specified in the clause 6.3.4.2.1;
3) shall interact with the media plane as specified in 3GPP TS 24.581 [5]
clause 6.3.5; and
NOTE 3: Resulting media plane processing is completed before the next step is
performed.
4) shall send a SIP 200 (OK) response to the controlling MCVideo function
according to 3GPP TS 24.229 [11];
If the group document contains \ group member(s) as
specified in 3GPP TS 24.481 [24], then the non-controlling MCVideo function of
an MCVideo group shall wait until all SIP 200 (OK) responses to SIP INVITE
requests have been received from the \ MCVideo clients
before sending a SIP 200 (OK) response back to the controlling MCVideo
function, as specified above.
If all invited MCVideo clients have rejected SIP INVITE requests with a SIP
3xx, 4xx, 5xx or 6xx response, the non-controlling MCVideo function of an
MCVideo group:
1) shall generate a SIP reject response as specified in 3GPP TS 24.229 [11];
2) shall, from the list of reject response codes cached by the non-controlling
MCVideo function of an MCVideo group, select the highest prioritized cached
reject response code as specified in IETF RFC 3261 [15]; and
3) shall send the reject response towards the controlling MCVideo function as
specified in 3GPP TS 24.229 [11].
###### 9.2.1.5.2.3 Joining an ongoing prearranged group call
Upon receipt of a \"SIP INVITE request for non-controlling MCVideo function of
an MCVideo group\" and if a prearranged group call is already ongoing, the
non-controlling MCVideo function of an MCVideo group:
NOTE 1: The Contact header field of the SIP INVITE request contains the
\"isfocus\" feature media tag.
1) shall determine if the media parameters are acceptable and the MCVideo
codecs are offered in the SDP offer and if not, reject the request with a SIP
488 (Not Acceptable Here) response. Otherwise, continue with the rest of the
steps;
2) shall reject the SIP request with a SIP 403 (Forbidden) response and not
process the remaining steps if:
a) an Accept-Contact header field does not include the g.3gpp.mcvideo media
feature tag; or
b) an Accept-Contact header field does not include the g.3gpp.icsi-ref media
feature tag containing the value of \"urn:urn-7:3gpp-
service.ims.icsi.mcvideo\";
3) if the partner MCVideo system does not have a mutual aid relationship to
merge an ongoing prearranged call with the primary MCVideo system identified
by the contents of the P-Asserted-Identity, shall reject the \"SIP INVITE
request for non-controlling MCVideo function of an MCVideo group\" with a SIP
403 (Forbidden) response, with warning text set to \"128 isfocus already
assigned\" in a Warning header field as specified in clause 4.4, and shall not
process the remaining steps;
4) shall cache the content of the SIP INVITE request, if received in the
Contact header field and if the specific feature tags are supported;
5) shall check if a Resource-Priority header field is included in the incoming
SIP INVITE request and may apply any preferential treatment to the SIP request
as specified in 3GPP TS 24.229 [11];
6) shall generate SIP 200 (OK) response to the SIP INVITE request as specified
in the clause 6.3.4.2.2.2 before continuing with the rest of the steps;
7) shall include in the SIP 200 (OK) response an SDP answer to the SDP offer
in the incoming SIP INVITE request as specified in the clause 6.3.4.2.1;
NOTE 2: Resulting media plane processing is completed before the next step is
performed.
8) shall send a SIP 200 (OK) response to the controlling MCVideo function
according to 3GPP TS 24.229 [11]; and
9) if at least one of the MCVideo clients in the pre-arranged group session
has a subscription to the conference event package, shall subscribe to the
conference event package from the controlling MCVideo function as specified in
clause 9.2.3.5.3.
Upon receipt of the SIP ACK request, the non-controlling MCVideo function of
an MCVideo group:
1) if information about a currently transmitting MCVideo client is cached:
a) shall generate a SIP INFO request as specified in clause 6.3.4.1.3; and
b) shall send the SIP INFO request to the controlling MCVideo function as
specified in 3GPP TS 24.229 [11];
2) shall instruct the media plane to finalise the switch to the non-
controlling mode as specified in 3GPP TS 24.581 [5] clause 6.3.5.3; and
3) if at least one of the MCVideo clients in the chat group session has a
subscription to the conference event package, shall subscribe to the
conference event package from the controlling MCVideo function as specified in
clause 9.2.3.5.3.
###### 9.2.1.5.2.4 Splitting an ongoing prearranged group call
Upon receipt of a SIP BYE request or a final SIP reject response from the
controlling MCVideo function, the non-controlling MCVideo function of an
MCVideo group:
1) if keeping the prearranged group call active is according to the release
policy in clause 6.3.8.1, shall request media plane to switch to controlling
mode as specified in 3GPP TS 24.581 [5] clause 6.3.5;
NOTE 1: Resulting media plane processing is completed before the next step is
performed.
2) if a SIP BYE request was received, shall send a SIP 200 (OK) response to
the SIP BYE request; and
3) if keeping the prearranged group call active is according to the release
policy in clause 6.3.8.1 and if at least one of the remaining MCVideo clients
has subscribed to the conference package, shall send a NOTIFY request to all
participants with a subscription to the conference event package as specified
in clause 9.2.3.5.2.
NOTE 2: The SIP NOTIFY request will indicate that all participants, with the
exception of the MCVideo users belonging to the constituent MCVideo group
hosted by the non-controlling MCVideo function, have left the group session.
##### 9.2.1.5.3 Rejoin procedures
###### 9.2.1.5.3.1 Terminating procedures
Upon receipt of a SIP INVITE request that includes an MCVideo session identity
of an ongoing MCVideo session in the Request-URI the non-controlling MCVideo
function act as a controlling MCVideo function towards the MCVideo client and
shall perform the actions in the clause 9.2.1.4.5.1 with the following
clarifications:
1) the MCVideo session identity in the Contact header field of the SIP 200
(OK) response shall be the MCVideo session identity generated by the non-
controlling MCVideo function; and
2) the clause 9.2.3.5.2 shall be used when sending the SIP NOTIFY request for
subscriptions to the conference event package.
###### 9.2.1.5.3.2 Late call entry initiated by non-controlling MCVideo
function
When non-controlling MCVideo function is notified that an MCVideo client is
newly affiliated or comes back from out of coverage, the non-controlling
MCVideo function shall invite the MCVideo client to join an ongoing MCVideo
group call by following the procedures specified in clause 9.2.1.5.1.
NOTE: How the MCVideo function is informed when an MCVideo client is coming
back from out of coverage is out of scope of present document.
##### 9.2.1.5.4 SIP OPTIONS request authorization procedure
Upon receipt of an SIP OPTIONS request containing a P-Asserted-Identity header
field containing the public service identity of a MCVideo server not
authorized to send the SIP OPTIONS request, the non-controlling MCVideo
function of an MCVideo group shall send a SIP 403 (Forbidden) response as
specified in 3GPP TS 24.229 [11] and exit this clause.
Upon receipt of an SIP OPTIONS request containing a P-Asserted-Identity header
field containing the public service identity of a MCVideo server authorized to
send the SIP OPTIONS request, the non-controlling MCVideo function of an
MCVideo group shall perform the actions in this clause.
The non-controlling MCVideo function shall retrieve the group document from
the group management server for the MCVideo group ID contained in the
\ element of the application/vnd.3gpp.mcvideo-info+xml
MIME body of the SIP OPTIONS request with the following clarifications:
NOTE: The action of the non-controlling MCVideo function of an MCVideo group
on receipt of the SIP OPTIONS request mimics the actions of the non-
controlling MCVideo function of an MCVideo group on receipt of the SIP INVITE
request.
The non-controlling MCVideo function shall:
1) if the non-controlling MCVideo function fails to retrieve the group
document from the group management server, send a shall send the SIP 404 (Not
Found) response to the SIP OPTIONS request with the warning text set to \"113
group document does not exist\" in a Warning header field as specified in
clause 4.4;
2) if the non-controlling MCVideo function successfully retrieves the group
document from the group management server or if the group document was already
cached and if one of the following conditions are fulfilled:
a) if the constituent MCVideo group is a chat group and the rules for joining
a group conference as specified in clause 6.3.5.3 are fulfilled; or
b) if the constituent MCVideo group is a prearranged group and the rules for
initiating a prearranged group session as specified in clause 6.3.5.4;
then the non-controlling MCVideo function:
a) shall send the SIP 200 (OK) response to the SIP OTIONS response as
specified in 3GPP TS 24.229 [11] and the IETF RFC 3261 [15] populated as
follows:
i) shall include a warning text set to \"147 user is authorized to initiate a
temporary group call\" in a Warning header field as specified in clause 4.4;
ii) shall include an application/vnd.3gpp.mcvideo-info MIME body with:
A) the \ element set to \"chat\", if the constituent MCVideo
group is a chat group; and
B) the \ element set to \"prearranged\", if the constituent
MCVideo group is a prearranged group; and
iii) shall include the P-Asserted-Identity of the non-controlling MCVideo
function of an MCVideo group; and
3) if none of the conditions in step 2 above) are fulfilled, shall send a SIP
403 (Forbidden) response with the warning text set to \"119 user is not
authorised to initiate the group call\" in a Warning header field as specified
in clause 4.4.
##### 9.2.1.5.5 Initiating a temporary group session
Upon receiving a \"SIP INVITE request \"SIP INVITE request for controlling
MCVideo function of an MCVideo group\" when a prearranged group session is not
ongoing, the non-controlling MCVideo-function shall:
NOTE 1: The difference between a \"SIP INVITE request \"SIP INVITE request for
controlling MCVideo function of an MCVideo group\" and a \"SIP INVITE request
for non-controlling MCVideo function of an MCVideo group\" is that the latter
SIP INVITE request contains the isfocus media feature tag in the Contact
header field.
1) if unable to process the request due to a lack of resources or a risk of
congestion exists, may reject the SIP INVITE request with a SIP 500 (Server
Internal Error) response. The non-controlling MCVideo function may include a
Retry-After header field to the SIP 500 (Server Internal Error) response as
specified in IETF RFC 3261 [15]. Otherwise, continue with the rest of the
steps;
2) shall determine if the media parameters are acceptable and the MCVideo
codecs are offered in the SDP offer and if not reject the request with a SIP
488 (Not Acceptable Here) response. Otherwise, continue with the rest of the
steps;
3) shall reject the SIP request with a SIP 403 (Forbidden) response and not
process the remaining steps if:
a) an Accept-Contact header field does not include the g.3gpp.mcvideo media
feature tag; or
b) an Accept-Contact header field does not include the g.3gpp.icsi-ref media
feature tag containing the value of \"urn:urn-7:3gpp-
service.ims.icsi.mcvideo\";
4) shall retrieve the group document from the group management server for the
MCVideo group ID contained in the \ element of the
application/vnd.3gpp.mcvideo-info+xml MIME body of the SIP INVITE request and
carry out initial processing as specified in clause 6.3.5.2 and continue with
the rest of the steps if the checks in clause 6.3.5.2 succeed;
NOTE 2: If the checks are not succesful, the SIP response to the \"SIP INVITE
request \"SIP INVITE request for controlling MCVideo function of an MCVideo
group\" is already sent in the clause 6.3.5.2.
5) shall cache the content of the SIP INVITE request;
6) shall check if a Resource-Priority header field is included in the incoming
SIP INVITE request and may apply any preferential treatment to the SIP request
as specified in 3GPP TS 24.229 [11];
7) shall authorize the MCVideo user in the \
element in the application/vnd.3gpp.mcvideo-info+xml MIME body of the \"SIP
INVITE request for controlling MCVideo function of an MCVideo group\" as
specified in clause 6.3.5.4, if the MCVideo user is unauthorized to initiated
a pre-arranged group session the non-controlling MCVideo function shall send a
SIP 403 (Forbidden) response with the warning text set to \"119 user is not
authorised to initiate the group call\" in a Warning header field as specified
in clause 4.4.
8) shall generate a SIP INVITE request to the controlling MCVideo function as
specified in clause 6.3.4.1.4; and
9) shall send the SIP INVITE request to the controlling MCVideo function as
specified in 3GPP TS 24.229 [11].
Upon receipt of a SIP 2xx response to the SIP INVITE request sent to the
controlling MCVideo function as specified above, the non-controlling MCVideo
function:
1) shall send the SIP ACK request to the controlling MCVideo function as
specified in 3GPP TS 24.229 [11];
2) shall generate a SIP 200 (OK) to the \"SIP INVITE request for controlling
MCVideo function of an MCVideo group\" as specified in 3GPP TS 24.229 [11]
populated as follows:
a) shall include an SDP answer as specified in clause 6.3.4.2.1 based on the
SDP answer in the SIP 200 (OK) response;
b) shall include the public service identifier of the non-controlling MCVideo
function in the P-Asserted-Identity header field; and
c) shall include the warning text set to \"148 MCVideo group is regrouped\" in
a Warning header field as specified in clause 4.4;
3) shall start acting as a non-controlling MCVideo function and interact with
the media plane as specified in 3GPP TS 24.581 [5] clause 6.5;
4) shall determine the members to invite to the prearranged MCVideo group call
as specified in clause 6.3.5.2; and
5) shall invite each group member determined in step 2) above, to the group
session, as specified in clause 9.2.1.5.1.
Upon receipt of other final SIP responses with the exception of the SIP 2xx
response to the INVITE request sent to the controlling MCVideo function as
specified above, the non-controlling MCVideo function:
1) shall send the SIP ACK response to the controlling MCVideo function as
specified in 3GPP TS 24.229 [11]; and
2) shall start acting as a controlling MCVideo function as specified in clause
9.2.1.4 and invite members as specified in clause 6.3.4.1.2.
NOTE 4: Regardless if the controlling MCVideo function accepts or rejects the
SIP INVITE request sent above the prearranged group session continues to be
initiated with only the members of the group homed on the non-controlling
MCVideo function of the group being invited to the group call.
The non-controlling MCVideo function shall handle SIP responses (other than
the SIP 2xx response) to the SIP INVITE requests sent to invited members as
specified in 3GPP TS 24.229 [11].
Upon receipt of a SIP 2xx response to SIP INVITE requests sent to invited
members, the non-controlling MCVideo function:
1) shall send the SIP ACK request as specified in 3GPP TS 24.229 [11]; and
2) shall interact with the media plane as specified in 3GPP TS 24.581 [5].
### 9.2.2 Chat group (restricted) call
#### 9.2.2.1 General
#### 9.2.2.2 MCVideo client procedures
##### 9.2.2.2.1 On-demand chat group call
###### 9.2.2.2.1.1 MCVideo client joins a chat MCVideo group session
Upon receiving a request from an MCVideo user to establish an MCVideo group
session using an MCVideo group identity, identifying a chat MCVideo group, the
MCVideo client shall generate an initial SIP INVITE request by following the
UE originating session procedures specified in 3GPP TS 24.229 [11], with the
clarifications given below.
The MCVideo client:
1) if the MCVideo user has requested the origination of an MCVideo emergency
group call or is originating an MCVideo chat group call and the MCVideo
emergency state is already set, the MCVideo client shall comply with the
procedures in clause 6.2.8.1.1;
2) if the MCVideo user has requested the origination of an MCVideo imminent
peril group call, the MCVideo client shall comply with the procedures in
clause 6.2.8.1.9;
3) shall include the g.3gpp.mcvideo media feature tag and the g.3gpp.icsi-ref
media feature tag with the value of \"urn:urn-7:3gpp-
service.ims.icsi.mcvideo\" in the Contact header field of the SIP INVITE
request according to IETF RFC 3840 [22];
4) shall include an Accept-Contact header field containing the g.3gpp.mcvideo
media feature tag along with the \"require\" and \"explicit\" header field
parameters according to IETF RFC 3841 [20];
5) shall include the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"
(coded as specified in 3GPP TS 24.229 [11]), in a P-Preferred-Service header
field according to IETF RFC 6050 [14] in the SIP INVITE request;
6) shall include an Accept-Contact header field with the g.3gpp.icsi-ref media
feature tag containing the value of \"urn:urn-7:3gpp-
service.ims.icsi.mcvideo\" along with the \"require\" and \"explicit\" header
field parameters according to IETF RFC 3841 [20];
7) should include the \"timer\" option tag in the Supported header field;
8) should include the Session-Expires header field according to IETF RFC 4028
[23]. It is recommended that the refresher parameter is omitted. If included,
the refresher parameter shall be set to \"uac\";
9) shall set the Request-URI of the SIP INVITE request to the public service
identity identifying the participating MCVideo function serving the MCVideo
user;
NOTE 1: The MCVideo client is configured with public service identity
identifying the participating MCVideo function serving the MCVideo user.
10) may include a P-Preferred-Identity header field in the SIP INVITE request
containing a public user identity as specified in 3GPP TS 24.229 [11];
11) if the MCVideo emergency state is already set or the MCVideo client
emergency group state for this group is set to \"MVEG 2: in-progress\", the
MCVideo client shall comply with the procedures in clause 6.2.8.1.2;
12) if the MCVideo client imminent peril group state for this group is set to
\"MIG 2: in-progress\" or \"MVIG 3: confirm-pending\" shall include the
Resource-Priority header field and comply with the procedures in clause
6.2.8.1.12;
13) shall contain an application/vnd.3gpp.mcvideo-info+xml MIME body with the
\ element containing the \ element with:
a) the \ element set to a value of \"chat\";
b) the \ element set to the group identity; and
c) the \ element set to the MCVideo client ID of the
originating MCVideo client;
> NOTE 2: The MCVideo ID of the originating MCVideo user is not included in
> the body, as this will be inserted into the body of the SIP INVITE request
> that is sent by the originating participating MCVideo function.
14) shall include in the SIP INVITE request an SDP offer according to 3GPP TS
24.229 [11] with the clarifications specified in clause 6.2.1; and
16) shall send the SIP INVITE request according to 3GPP TS 24.229 [11].
On receiving a SIP 2xx response to the SIP INVITE request, the MCVideo client:
1) shall interact with the user plane as specified in 3GPP TS 24.581 [5]; and
2) if the MCVideo emergency group call state is set to \"MEGC 2: emergency-
call-requested\" or \"MVEGC 3: emergency-call-granted\" or the MCVideo
imminent peril group call state is set to \"MVIGC 2: imminent-peril-call-
requested\" or \"MVIGC 3: imminent-peril-call-granted\", the MCVideo client
shall perform the actions specified in clause 6.2.8.1.4.
On receiving a SIP 4xx response, a SIP 5xx response or a SIP 6xx response to
the SIP INVITE request:
1) if the MCVideo emergency group call state is set to \"MVEGC 2: emergency-
call-requested\" or \"MVEGC 3: emergency-call-granted\"; or
2) if the MCVideo imminent peril group call state is set to \"MVIGC 2:
imminent-peril-call-requested\" or \"MVIGC 3: imminent-peril-call-granted\";
the MCVideo client shall perform the actions specified in clause 6.2.8.1.5.
On receiving a SIP INFO request where the Request-URI contains an MCVideo
session ID identifying an ongoing group session, the MCVideo client shall
follow the actions specified in clause 6.2.8.1.13.
###### 9.2.2.2.1.2 MCVideo client receives SIP re-INVITE request
This clause covers both on-demand session and pre-established sessions.
Upon receipt of a SIP re-INVITE request the MCVideo client:
1) if the SIP re-INVITE request contains an application/vnd.3gpp.mcvideo-
info+xml MIME body with the \ element containing the \ element with the \ element set to a value of \"true\":
a) should display to the MCVideo user the MCVideo ID of the originator of the
MCVideo emergency group call and an indication that this is an MCVideo
emergency group call;
b) if the \ element containing the \ element
contains an \ element set to \"true\", should display to the
MCVideo user an indication of the MCVideo emergency alert and associated
information;
c) shall set the MCVideo emergency group state to \"MVEG 2: in-progress\";
d) shall set the MCVideo imminent peril group state to \"MVIG 1: no-imminent-
peril\"; and
e) shall set the MCVideo imminent peril group call state to \"MIGC 1:
imminent-peril-gc-capable\";
2) if the SIP re-INVITE request contains an application/vnd.3gpp.mcvideo-
info+xml MIME body with the \ element containing the \ element with the \ element set to a value of
\"true\":
a) should display to the MCVideo user the MCVideo ID of the originator of the
MCVideo imminent peril group call and an indication that this is an MCVideo
imminent peril group call; and
b) shall set the MCVideo imminent peril group state to \"MVIG 2: in-
progress\";
3) if the SIP re-INVITE request contains an application/vnd.3gpp.mcvideo-
info+xml MIME body with the \ element containing the \ element with the \ element set to a value of \"false\":
a) should display to the MCVideo user the MCVideo ID of the MCVideo user
cancelling the MCVideo emergency group call;
b) if the \ element containing the \ element
contains an \ element set to \"false\":
i) should display to the MCVideo user an indication of the MCVideo emergency
alert cancellation and the MCVideo ID of the MCVideo user cancelling the
MCVideo emergency alert; and
ii) if the SIP re-INVITE request contains an application/vnd.3gpp.mcvideo-
info+xml MIME body including an \ element:
A) should display to the MCVideo user the MCVideo ID contained in the
\ element of the MCVideo user that originated the MCVideo
emergency alert; and
B) if the MCVideo ID contained in the \ element is the MCVideo
ID of the receiving MCVideo user, shall set the MCVideo emergency alert state
to \"MVEA 1: no-alert\";
c) shall set the MCVideo emergency group state to \"MVEG 1: no-emergency\";
and
d) if the MCVideo emergency group call state of the group is set to \"MVEGC 3:
emergency-call-granted\", shall set the MCVideo emergency group call state of
the group to \"MVEGC 1: emergency-gc-capable\";
4) if the SIP re-INVITE request contains an application/vnd.3gpp.mcvideo-
info+xml MIME body with the \ element containing the \ element with the \ element set to a value of
\"false\":
a) should display to the MCVideo user the MCVideo ID of the MCVideo user
cancelling the MCVideo imminent peril group call and an indication that this
is an MCVideo imminent peril group call;
b) shall set the MCVideo imminent peril group state to \"MVIG 1: no-imminent-
peril\"; and
c) shall set the MCVideo imminent peril group call state to \"MIGC 1:
imminent-peril-gc-capable\";
5) may check if a Resource-Priority header field is included in the incoming
SIP re-INVITE request and may perform further actions outside the scope of
this specification to act upon an included Resource-Priority header field as
specified in 3GPP TS 24.229 [11];
6) shall accept the SIP re-INVITE request and generate a SIP 200 (OK) response
according to rules and procedures of 3GPP TS 24.229 [11];
7) shall include the g.3gpp.mcvideo media feature tag in the Contact header
field of the SIP 200 (OK) response;
8) shall include the g.3gpp.icsi-ref media feature tag containing the value of
\"urn:urn-7:3gpp-service.ims.icsi.mcvideo\" in the Contact header field of the
SIP 200 (OK) response;
9) if the SIP re-INVITE request was received within an on-demand session,
shall include an SDP answer in the SIP 200 (OK) response to the SDP offer in
the incoming SIP re-INVITE request according to 3GPP TS 24.229 [11] with the
clarifications given in clause 6.2.2; and
10) shall send the SIP 200 (OK) response towards the MCVideo server according
to rules and procedures of 3GPP TS 24.229 [11].
###### 9.2.2.2.1.3 MCVideo in-progress emergency cancel
This clause covers both on-demand session.
Upon receiving a request from an MCVideo user to cancel the in-progress
emergency condition on a chat MCVideo group, the MCVideo client shall generate
a SIP re-INVITE request as specified in 3GPP TS 24.229 [11], with the
clarifications given below.
The MCVideo client:
1) if the MCVideo user is not authorised to cancel the in-progress emergency
group state of the MCVideo group as determined by the procedures of clause
6.2.8.1.7, the MCVideo client:
a) should indicate to the MCVideo user that they are not authorised to cancel
the in-progress emergency group state of the MCVideo group; and
b) shall skip the remaining steps of the current clause;
2) shall, if the MCVideo user is cancelling an in-progress emergency condition
and optionally an MCVideo emergency alert originated by the MCVideo user,
include an application/vnd.3gpp.mcvideo-info+xml MIME body populated as
specified in clause 6.2.8.1.3;
3) shall, if the MCVideo user is cancelling an in-progress emergency condition
and optionally an MCVideo emergency alert originated by another MCVideo user,
include an application/vnd.3gpp.mcvideo-info+xml MIME body populated as
specified in clause 6.2.8.1.14;
4) shall, if the SIP re-INVITE request is to be sent within an on-demand
session, include in the SIP re-INVITE request an SDP offer according to 3GPP
TS 24.229 [11] with the clarifications specified in clause 6.2.1;
5) shall include a Resource-Priority header field and comply with the
procedures in clause 6.2.8.1.2; and
6) shall send the SIP re-INVITE request according to 3GPP TS 24.229 [11].
On receiving a SIP 2xx response to the SIP re-INVITE request, the MCVideo
client:
1) shall set the MCVideo emergency group state of the group to \"MVEG 1: no-
emergency\";
2) shall set the MCVideo emergency group call state of the group to \"MVEGC 1:
emergency-gc-capable\"; and
3) if the MCVideo emergency alert state is set to \"MVEA 4: Emergency-alert-
cancel-pending\", the sent SIP re-INVITE request did not contain an
\ element in the application/vnd.3gpp.mcvideo-info+xml MIME
body and the SIP 2xx response to the SIP request for a priority group call
does not contain a Warning header field as specified in clause 4.4 with the
warning text containing the mcvideo-warn-code set to \"149\", shall set the
MCVideo emergency alert state to \"MVEA 1: no-alert\".
On receiving a SIP 4xx response, SIP 5xx response or SIP 6xx response to the
SIP re-INVITE request:
1) shall set the MCVideo emergency group state as \"MVEG 2: in-progress\";
2) if the SIP 4xx response, SIP 5xx response or SIP 6xx response contains an
application/vnd.3gpp.mcvideo-info+xml MIME body with an \ element
set to a value of \"true\" and the sent SIP re-INVITE request did not contain
an \ element in the application/vnd.3gpp.mcvideo-info+xml MIME
body, the MCVideo client shall set the MCVideo emergency alert state to \"MVEA
3: emergency-alert-initiated\"; and
3) if the SIP 4xx response, SIP 5xx response or SIP 6xx response did not
contain an application/vnd.3gpp.mcvideo-info+xml MIME body with an \ element and did not contain an \ element, the MCVideo
emergency alert (MVEA) state shall revert to its value prior to entering the
current procedure.
NOTE 3: If the in-progress emergency group state cancel request is rejected,
the state of the session does not change, i.e. continues with MCVideo
emergency group call level priority.
On receiving a SIP INFO request where the Request-URI contains an MCVideo
session ID identifying an ongoing group session, the MCVideo client shall
follow the actions specified in clause 6.2.8.1.13.
###### 9.2.2.2.1.4 MCVideo upgrade to in-progress emergency or imminent peril
This clause covers both on-demand session.
Upon receiving a request from an MCVideo user to upgrade the MCVideo group
session to an emergency condition or an imminent peril condition on a chat
MCVideo group, the MCVideo client shall generate a SIP re-INVITE request as
specified in 3GPP TS 24.229 [11], with the clarifications given below.
1) if the MCVideo user is requesting to upgrade the MCVideo group session to
an in-progress emergency group state and is not authorised to do so as
determined by the procedures of clause 6.2.8.1.8, the MCVideo client:
a) should indicate to the MCVideo user that they are not authorised to upgrade
the MCVideo group session to an in-progress emergency group state; and
b) shall skip the remaining steps of the current clause;
2) if the MCVideo user is requesting to upgrade the MCVideo group session to
an in-progress imminent peril state and is not authorised to do so as
determined by the procedures of clause 6.2.8.1.8, the MCVideo client:
a) should indicate to the MCVideo user that they are not authorised to upgrade
the MCVideo group session to an in-progress imminent peril group state; and
b) shall skip the remaining steps of the current clause;
3) if the MCVideo user has requested to upgrade the MCVideo group session to
an MCVideo emergency call, the MCVideo client:
a) shall include an application/vnd.3gpp.mcvideo-info+xml MIME body populated
as specified in clause 6.2.8.1.1;
b) if an indication of an MCVideo emergency alert is to be included, shall
perform the procedures specified in clause 6.2.9.1 for the MCVideo emergency
alert trigger; and
c) shall include a Resource-Priority header field and comply with the
procedures in clause 6.2.8.1.2.
4) if the MCVideo user has requested to upgrade the MCVideo group session to
an MCVideo imminent peril call, the MCVideo client:
a) shall include an application/vnd.3gpp.mcvideo-info+xml MIME body populated
as specified in clause 6.2.8.1.9; and
b) shall include a Resource-Priority header field and comply with the
procedures in clause 6.2.8.1.12;
5) if the SIP re-INVITE request is to be sent within an on-demand session,
shall include in the SIP re-INVITE request an SDP offer according to 3GPP TS
24.229 [11] with the clarifications specified in clause 6.2.1;
6) if an implicit transmission request is required, shall indicate this as
specified in clause 6.4;
7) shall include a Resource-Priority header field and comply with the
procedures in clause 6.2.8.1.2; and
8) shall send the SIP re-INVITE request according to 3GPP TS 24.229 [11].
On receiving a SIP 2xx response to the SIP re-INVITE request the MCVideo
client:
1) shall interact with the user plane as specified in 3GPP TS 24.581 [5]; and
2) shall perform the actions specified in clause 6.2.8.1.4.
On receiving a SIP 4xx response, SIP 5xx response or SIP 6xx response to the
SIP re-INVITE request the MCVideo client shall perform the actions specified
in clause 6.2.8.1.5.
On receiving a SIP INFO request where the Request-URI contains an MCVideo
session ID identifying an ongoing group session, the MCVideo client shall
follow the actions specified in clause 6.2.8.1.13.
###### 9.2.2.2.1.5 MCVideo in-progress imminent peril cancel
This clause covers on-demand session.
Upon receiving a request from an MCVideo user to cancel the in-progress
imminent peril condition on a chat MCVideo group, the MCVideo client shall
generate a SIP re-INVITE request by following the procedures specified in 3GPP
TS 24.229 [11], with the clarifications given below.
The MCVideo client:
1) if the MCVideo user is not authorised to cancel the in-progress imminent
peril group state of the MCVideo group as determined by the procedures of
clause 6.2.8.1.10, the MCVideo client:
a) should indicate to the MCVideo user that they are not authorised to cancel
the in-progress imminent peril group state of the MCVideo group; and
b) shall skip the remaining steps of the current clause;
2) shall include an application/vnd.3gpp.mcvideo-info+xml MIME body populated
as specified in clause 6.2.8.1.11;
3) shall include a Resource-Priority header field and comply with the
procedures in clause 6.2.8.1.12;
4) shall include in the application/vnd.3gpp.mcvideo-info+xml MIME body with
the \ element containing the \ element with:
a) the \ element set to a value of \"chat\"; and
b) the \ element set to the group identity;
NOTE 1: The MCVideo ID of the originating MCVideo user is not included in the
body, as this will be inserted into the body of the SIP re-INVITE request that
is sent by the originating participating MCVideo function.
5) shall include the g.3gpp.mcvideo media feature tag in the Contact header
field of the SIP re-INVITE request according to IETF RFC 3840 [22];
6) if the SIP re-INVITE request is to be sent within an on-demand session,
shall include in the SIP re-INVITE request an SDP offer according to 3GPP TS
24.229 [11] with the clarifications specified in clause 6.2.1;
7) shall send the SIP re-INVITE request according to 3GPP TS 24.229 [11].
On receiving a SIP 2xx response to the SIP re-INVITE request, the MCVideo
client:
1) shall interact with the user plane as specified in 3GPP TS 24.581 [5];
2) shall set the MCVideo imminent peril group state of the group to \"MVIG 1:
no-imminent-peril\"; and
3) shall set the MCVideo imminent peril group call state of the group to
\"MVIGC 1: imminent-peril-gc-capable\".
On receiving a SIP 4xx response, SIP 5xx response or SIP 6xx response to the
SIP re-INVITE request:
1) if the SIP 4xx response, SIP 5xx response or SIP 6xx response:
a) contains an application/vnd.3gpp.mcvideo-info+xml MIME body with an
\ element set to a value of \"true\"; or
b) does not contain an application/vnd.3gpp.mcvideo-info+xml MIME body with an
\ element;
then the MCVideo client shall set the MCVideo imminent peril group state as
\"MIG 2: in-progress\".
NOTE 2: This is the case where the MCVideo client requested the cancellation
of the MCVideo imminent peril in-progress state and was rejected.
###### 9.2.2.2.1.6 MCVideo client receives a SIP INVITE request for an MCVideo
group call
This procedure is used for MCVideo emergency and MCVideo imminent peril calls
when the MCVideo client is affiliated but not joined to the chat group.
In the procedures in this clause:
1) emergency indication in an incoming SIP INVITE request refers to the
\ element of the application/vnd.3gpp.mcvideo-info+xml MIME
body; and
2) imminent peril indication in an incoming SIP INVITE request refers to the
\ element of the application/vnd.3gpp.mcvideo-info+xml MIME
body.
Upon receipt of an initial SIP INVITE request, the MCVideo client:
1) may reject the SIP INVITE request if either of the following conditions is
met:
a) MCVideo client does not have enough resources to handle the call; or
b) any other reason outside the scope of this specification;
2) if the SIP INVITE request is rejected in step 1), shall respond toward
participating MCVideo function either with appropriate reject code as
specified in 3GPP TS 24.229 [11] and warning texts as specified in clause
4.4.2 or with SIP 480 (Temporarily unavailable) response not including warning
texts if the user is authorised to restrict the reason for failure and skip
the rest of the steps of this clause;
NOTE 1: if the SIP INVITE request contains an emergency indication or imminent
peril indication, the MCVideo client can by means beyond the scope of this
specification choose to accept the request.
3) if the SIP INVITE request contains an application/vnd.3gpp.mcvideo-info+xml
MIME body with the \ element containing the \
element with the \ element set to a value of \"true\":
a) should display to the MCVideo user an indication that this is a SIP INVITE
request for an MCVideo emergency group call and:
i) should display the MCVideo ID of the originator of the MCVideo emergency
group call contained in the \ element of the
application/vnd.3gpp.mcvideo-info+xml MIME body;
ii) should display the MCVideo group identity of the group with the emergency
condition contained in the \ element; and
iii) if the \ element is set to \"true\", should display to the
MCVideo user an indication of the MCVideo emergency alert and associated
information;
b) shall set the MCVideo emergency group state to \"MVEG 2: in-progress\";
c) shall set the MCVideo imminent peril group state to \"MVIG 1: no-imminent-
peril\"; and
d) shall set the MCVideo imminent peril group call state to \"MVIGC 1:
imminent-peril-gc-capable\"; otherwise
4) if the SIP INVITE request contains an application/vnd.3gpp.mcvideo-info+xml
MIME body with the \ element containing the \
element with the \ element set to a value of \"true\":
a) should display to the MCVideo user an indication that this is a SIP INVITE
request for an MCVideo imminent peril group call and:
i) should display the MCVideo ID of the originator of the MCVideo imminent
peril group call contained in the \ element of the
application/vnd.3gpp.mcvideo-info+xml MIME body; and
ii) should display the MCVideo group identity of the group with the imminent
peril condition contained in the \ element; and
b) shall set the MCVideo imminent peril group state to \"MVIG 3: in-
progress\";
5) shall check if a Resource-Priority header field is included in the incoming
SIP INVITE request and may perform further actions outside the scope of this
specification to act upon an included Resource-Priority header field as
specified in 3GPP TS 24.229 [11];
6) shall accept the SIP INVITE request and generate a SIP 200 (OK) response
according to rules and procedures of 3GPP TS 24.229 [11];
7) shall include the option tag \"timer\" in a Require header field of the SIP
200 (OK) response;
8) shall include the g.3gpp.mcvideo media feature tag in the Contact header
field of the SIP 200 (OK) response;
9) shall include the g.3gpp.icsi-ref media feature tag containing the value of
\"urn:urn-7:3gpp-service.ims.icsi.mcvideo\" in the Contact header field of the
SIP 200 (OK) response;
10) shall include the Session-Expires header field in the SIP 200 (OK)
response and start the SIP session timer according to IETF RFC 4028 [23]. If
no \"refresher\" parameter was included in the received SIP INVITE request the
\"refresher\" parameter in the Session-Expires header field shall be set to
\"uas\", otherwise shall include a \"refresher\" parameter set to the value
received in the Session-Expires header field the received SIP INVITE request;
11) shall include an SDP answer in the SIP 200 (OK) response to the SDP offer
in the incoming SIP INVITE request according to 3GPP TS 24.229 [11] with the
clarifications given in clause 6.2.2;
12) shall send the SIP 200 (OK) response towards the MCVideo server according
to rules and procedures of 3GPP TS 24.229 [11]; and
13) shall interact with the media plane as specified in 3GPP TS 24.581 [5].
##### 9.2.2.2.2 End group call
###### 9.2.2.2.2.1 Client originating procedures on-demand
When an MCVideo client wants to leave the MCVideo session that has been
established using on-demand session, the MCVideo client shall follow the
procedures as specified in clause 6.2.4.1.
###### 9.2.2.2.2.2 Client terminating procedures
Upon receiving a SIP BYE request for releasing the MCVideo chat session, the
MCVideo client shall follow the procedures as specified in clause 6.2.6.
#### 9.2.2.3 Participating MCVideo function procedures
##### 9.2.2.3.1 On-demand chat group call
###### 9.2.2.3.1.1 MCVideo chat session establishment
In the procedures in this clause:
1) group identity in an incoming SIP INVITE request refers to the group
identity from the \ element of the
application/vnd.3gpp.mcvideo-info+xml MIME body of the incoming SIP INVITE
request;
2) emergency indication in an incoming SIP INVITE request refers to the
\ element of the application/vnd.3gpp.mcvideo-info+xml MIME
body;
3) imminent peril indication in an incoming SIP INVITE request refers to the
\ element of the application/vnd.3gpp.mcvideo-info+xml MIME
body.
Upon receipt of a \"SIP INVITE request for originating participating MCVideo
function\" for a group identity identifying a chat MCVideo group containing an
application/vnd.3gpp.mcvideo-info+xml MIME body with the \
element set to a value of \"chat\", the participating MCVideo function:
1) if unable to process the request due to a lack of resources or a risk of
congestion exists, may reject the SIP INVITE request with a SIP 500 (Server
Internal Error) response. The participating MCVideo function may include a
Retry-After header field to the SIP 500 (Server Internal Error) response as
specified in IETF RFC 3261 [15]. Otherwise, continue with the rest of the
steps;
NOTE 1: if the SIP INVITE request contains an emergency indication set to a
value of \"true\" or an imminent peril indication set to a value of \"true\"
and this is an authorised request for originating a priority call as
determined by clause 6.3.2.1.8.1, the participating MCVideo function can
according to local policy choose to accept the request.
2) shall determine the MCVideo ID of the calling user from public user
identity in the P-Asserted-Identity header field of the SIP INVITE request,
and authorise the calling user;
NOTE 2: The MCVideo ID of the calling user is bound to the public user
identity at the time of service authorisation, as documented in clause 7.3.
3) if through local policy in the originating participating MCVideo function,
the user identified by the MCVideo ID is not authorised to make chat group
calls, shall reject the \"SIP INVITE request for originating participating
MCVideo function\" with a SIP 403 (Forbidden) response to the SIP INVITE
request, with warning text set to \"108 user not authorised to make chat group
calls\" in a Warning header field as specified in clause 4.4;
4) shall determine if the media parameters are acceptable and the MCVideo
codecs are offered in the SDP offer and if not, reject the request with a SIP
488 (Not Acceptable Here) response. Otherwise, continue with the rest of the
steps;
5) shall check if the number of maximum simultaneous MCVideo group calls
supported for the MCVideo user as specified in the \
element of the \ element of the MCVideo user profile
document (see the MCVideo user profile document in 3GPP TS 24.484 [25]) has
been exceeded. If exceeded, the MCVideo function shall respond with a SIP 486
(Busy Here) response with the warning text set to \"103 maximum simultaneous
MCVideo group calls reached\" in a Warning header field as specified in clause
4.4. Otherwise, continue with the rest of the steps;
NOTE 3: If the SIP INVITE request contains an emergency indication set to a
value of \"true\" or an imminent peril indication set to a value of \"true\"
and this is an authorised request for originating a priority call as
determined by clause 6.3.2.1.8.1, the participating MCVideo function can
according to local policy choose to allow for an exception to the limit for
the maximum simultaneous MCVideo sessions supported for the MCVideo user.
6) if the user identified by the MCVideo ID is not affiliated to the group
identified in the \"SIP INVITE request for originating participating MCVideo
function\" as determined by clause 8.2.2.2.11, shall perform the actions
specified in clause 8.2.2.2.12 for implicit affiliation;
7) if the actions for implicit affiliation specified in step 6) above were
performed but not successful in affiliating the MCVideo user due to the
MCVideo user already having N2 simultaneous affiliations, shall reject the
\"SIP INVITE request for originating participating MCVideo function\" with a
SIP 486 (Busy Here) response with the warning text set to \"102 too many
simultaneous affiliations\" in a Warning header field as specified in clause
4.4. and skip the rest of the steps.
NOTE 4: N2 is the total number of MCVideo groups that an MCVideo user can be
affiliated to simultaneously as specified in 3GPP TS 23.281 [26].
NOTE 5: if the SIP INVITE request contains an emergency indication set to a
value of \"true\" or an imminent peril indication set to a value of \"true\"
and this is an authorised request for originating a priority call as
determined by clause 6.3.2.1.8.1, the participating MCVideo function can
according to local policy choose to allow an exception to the N2 limit.
Alternatively, a lower priority affiliation of the MCVideo user could be
cancelled to allow for the new affiliation.
8) shall determine the public service identity of the controlling MCVideo
function associated with the group identity in the SIP INVITE request;
NOTE 6: The public service identity can identify the controlling MCVideo
function in the primary MCVideo system or a partner MCVideo system.
NOTE 7: How the participating MCVideo server discovers the public service
identity of the controlling MCVideo function associated with the group
identity is out of scope of the current document.
9) shall generate a SIP INVITE request as specified in clause 6.3.2.1.3;
10) shall set the Request-URI to the public service identity of the
controlling MCVideo function associated with the group identity present in the
incoming SIP INVITE request;
11) shall include the MCVideo ID of the calling user in \ element of the application/vnd.3gpp.mcvideo-info+xml MIME body of the
SIP INVITE request;
12) shall include in the SIP INVITE request an SDP offer based on the SDP
offer in the received SIP INVITE request as specified in clause 6.3.2.1.1.1;
13) if the received SIP INVITE request contains an
application/vnd.3gpp.location-info+xml MIME body as specified in Annex F.3;
and
a) if not already included, shall include a Content-Type header field set to
\"application/vnd.3gpp.location-info+xml\"; and
b) if not already copied, shall copy the contents of the
application/vnd.3gpp.location-info+xml MIME body received in the SIP INVITE
request into an application/vnd.3gpp.location-info+xml MIME body included in
the outgoing SIP request;
NOTE 8: Note that the application/vnd.3gpp.mcvideo-info+xml MIME body will
already have been copied into the outgoing SIP INVITE request by clause
6.3.2.1.3.
14) if a Resource-Priority header field was included in the received SIP
INVITE request, shall include a Resource-Priority header field according to
rules and procedures of IETF RFC 4412 [33] set to the value indicated in the
Resource-Priority header field of the SIP INVITE request from the MCVideo
client; and
NOTE 9: The participating MCVideo function will leave verification of the
Resource-Priority header field to the controlling MCVideo function.
15) shall forward the SIP INVITE request according to 3GPP TS 24.229 [11].
Upon receipt of a SIP 302 (Moved Temporarily) response to the above SIP INVITE
request in step 14), the participating MCVideo function:
1) shall generate a SIP INVITE request as specified in clause 6.3.2.1.10;
2) shall include an SDP offer based upon the SDP offer in the received SIP
INVITE request from the MCVideo client as specified in clause 6.3.2.1.1.1; and
3) shall forward the SIP INVITE request according to 3GPP TS 24.229 [11];
Upon receipt of a SIP 2xx response to the above SIP INVITE request in step 14)
the participating MCVideo function:
1) if the SIP 2xx response contains an application/vnd.3gpp.mcvideo-info+xml
MIME body with an \ element, shall perform the procedures in
clause 6.3.2.3.2;
2) shall generate a SIP 200 (OK) response as specified in the clause
6.3.2.1.5.2;
3) shall include in the SIP 200 (OK) response an SDP answer as specified in
the clause 6.3.2.1.2.1;
4) shall include Warning header field(s) that were received in the incoming
SIP 200 (OK) response;
5) shall include the public service identity received in the P-Asserted-
Identity header field of the incoming SIP 200 (OK) response into the
P-Asserted-Identity header field of the outgoing SIP 200 (OK) response;
6) if the procedures of clause 8.2.2.2.12 for implicit affiliation were
performed in the present clause, shall complete the implicit affiliation by
performing the procedures of clause 8.2.2.2.13;
7) shall send the SIP 200 (OK) response to the MCVideo client according to
3GPP TS 24.229 [11]; and
8) shall interact with the media plane as specified in 3GPP TS 24.581 [5].
Upon receipt of a SIP 4xx, 5xx or 6xx response to the above SIP INVITE request
in step 14) the participating MCVideo function:
1) shall generate a SIP response according to 3GPP TS 24.229 [11];
2) shall include Warning header field(s) that were received in the incoming
SIP response;
3) shall forward the SIP response to the MCVideo client according to 3GPP TS
24.229 [11]; and
4) if the implicit affiliation procedures of clause 8.2.2.2.12 were invoked in
the current procedure, shall perform the procedures of clause 8.2.2.2.14.
###### 9.2.2.3.1.2 Reception of a SIP re-INVITE request from served MCVideo
client
This clause covers on-demand session.
Upon receipt of a SIP re-INVITE request for a served MCVideo client of a chat
MCVideo group, the participating MCVideo function:
1) if unable to process the request due to a lack of resources or a risk of
congestion exists, may reject the \"SIP INVITE request for terminating
participating MCVideo function\" with a SIP 500 (Server Internal Error)
response. The participating MCVideo function may include a Retry-After header
field to the SIP 500 (Server Internal Error) response as specified in IETF RFC
3261 [15]. Otherwise, continue with the rest of the steps;
NOTE 1: If the SIP re-INVITE request contains an application/vnd.3gpp.mcvideo-
info+xml MIME body with the \ element set to a value of
\"true\", the participating MCVideo function may by means beyond the scope of
this specification choose to accept the request.
> 2) shall determine if the media parameters are acceptable and the MCVideo
> codec are offered in the SDP offer and if not, reject the request with a SIP
> 488 (Not Acceptable Here) response. Otherwise, continue with the rest of the
> steps;
3) shall generate an outgoing SIP re-INVITE request as specified in clause
6.3.2.1.9;
4) shall, if the SIP re-INVITE request was received within an on-demand
session, include in the SIP re-INVITE request an SDP offer based on the SDP
offer in the received SIP re-INVITE request as specified in clause
6.3.2.1.1.1;
5) if the received SIP re-INVITE request contains a Resource-Priority header
field, shall include a Resource-Priority header field with the contents set as
in the received Resource-Priority header field;
6) if the received SIP re-INVITE request contains a Resource-Priority header
field, shall include a Resource-Priority header field with the contents set as
in the received Resource-Priority header field; and
NOTE 3: The controlling MCVideo function will determine the validity of the
Resource-Priority header field.
7) shall forward the SIP re-INVITE request according to 3GPP TS 24.229 [11].
Upon receipt of a SIP 2xx response to the above SIP re-INVITE request in step
7) the participating MCVideo function:
1) shall generate a SIP 200 (OK) response as specified in the clause
6.3.2.1.5.2;
2) if the SIP 200 (OK) response is to be sent within an on-demand session,
shall include in the SIP 200 (OK) response an SDP answer as specified in the
clause 6.3.2.1.2.1;
3) shall include Warning header field(s) that were received in the incoming
SIP 200 (OK) response; and
4) shall send the SIP 200 (OK) response to the MCVideo client according to
3GPP TS 24.229 [11];
Upon receipt of a SIP 403 (Forbidden) response to the sent SIP re-INVITE
request the participating MCVideo function:
1) shall generate a SIP 403 (Forbidden) response according to 3GPP TS 24.229
[11];
2) shall copy, if included in the received SIP 403 (Forbidden) response, the
application/vnd.3gpp.mcvideo-info+xml MIME body MIME body to the outgoing SIP
(Forbidden) response;
3) shall include Warning header field(s) that were received in the incoming
SIP 403 (Forbidden) response; and
4) shall forward the SIP 403 (Forbidden) response to the MCVideo client
according to 3GPP TS 24.229 [11];
###### 9.2.2.3.1.3 Reception of a SIP INVITE request for terminating MCVideo
client
This clause covers on-demand session.
Upon receipt of a \"SIP INVITE request for terminating participating MCVideo
function\", for a terminating MCVideo client of a chat MCVideo group, the
participating MCVideo function:
1) if unable to process the request due to a lack of resources or a risk of
congestion exists, may reject the \"SIP INVITE request for terminating
participating MCVideo function\" with a SIP 500 (Server Internal Error)
response. The participating MCVideo function may include a Retry-After header
field to the SIP 500 (Server Internal Error) response as specified in IETF RFC
3261 [15]. Otherwise, continue with the rest of the steps;
NOTE: If the SIP INVITE request contains an application/vnd.3gpp.mcvideo-
info+xml MIME body with the \ element set to a value of
\"true\", the participating MCVideo function can by means beyond the scope of
this specification choose to accept the request.
2) shall check the presence of the isfocus media feature tag in the URI of the
Contact header field and if it is not present then the participating MCVideo
function shall reject the request with a SIP 403 (Forbidden) response with the
warning text set to \"104 isfocus not assigned\" in a Warning header field as
specified in clause 4.4. Otherwise, continue with the rest of the steps;
3) shall generate a SIP INVITE request as specified in clause 6.3.2.2.3;
4) shall set the Request-URI to the public user identity associated with the
MCVideo ID of the MCVideo user to be invited based on the contents of the
Request-URI of the received \"SIP INVITE request for terminating participating
MCVideo function\";
5) shall copy the contents of the P-Asserted-Identity header field of the
incoming \"SIP INVITE request for terminating participating MCVideo function\"
to the P-Asserted-Identity header field of the outgoing SIP INVITE request;
6) shall include in the SIP INVITE request an SDP offer based on the SDP offer
in the received \"SIP INVITE request for terminating participating MCVideo
function\" as specified in clause 6.3.2.2.1;
7) if the received SIP INVITE request contains a Resource-Priority header
field, shall include a Resource-Priority header field with the contents set as
in the received Resource-Priority header field;
8) shall perform the procedures specified in clause 6.3.2.2.9 to include any
MIME bodies in the received SIP INVITE request; and
9) shall send the SIP INVITE request towards the MCVideo client according to
3GPP TS 24.229 [11].
Upon receiving a SIP 200 (OK) response to the above SIP INVITE request sent to
the MCVideo client, the participating MCVideo function:
1) shall generate a SIP 200 (OK) response as described in the clause
6.3.2.2.4.2;
2) shall include in the SIP 200 (OK) response an SDP answer based on the SDP
answer in the received SIP 200 (OK) response as specified in clause
6.3.2.2.2.1;
3) shall interact with the media plane as specified in 3GPP TS 24.581 [5]; and
4) shall forward the SIP 200 (OK) response according to 3GPP TS 24.229 [11].
###### 9.2.2.3.1.4 Reception of a SIP re-INVITE request for terminating
MCVideo client
This clause covers both on-demand session.
Upon receipt of a SIP re-INVITE request for a terminating MCVideo client of a
chat MCVideo group, the participating MCVideo function:
1) shall check if a Resource-Priority header field is included in the incoming
SIP re-INVITE request and may perform further actions outside the scope of
this specification to act upon an included Resource-Priority header field as
specified in 3GPP TS 24.229 [11];
2) shall generate an outgoing SIP re-INVITE request as specified in clause
6.3.2.2.10;
3) shall include in the SIP re-INVITE request an SDP offer based on the SDP
offer in the received SIP re-INVITE request as specified in clause 6.3.2.2.1;
and
4) shall send the SIP re-INVITE request towards the MCVideo client according
to 3GPP TS 24.229 [11].
Upon receiving a SIP 200 (OK) response to the above SIP re-INVITE request sent
to the MCVideo client, the participating MCVideo function:
1) shall generate a SIP 200 (OK) response as described in the clause
6.3.2.2.4.2;
2) shall include in the SIP 200 (OK) response an SDP answer based on the SDP
answer in the received SIP 200 (OK) response as specified in clause
6.3.2.2.2.1; and
3) shall forward the SIP 200 (OK) response according to 3GPP TS 24.229 [11].
#### 9.2.2.4 Controlling MCVideo function procedures
##### 9.2.2.4.1 On-demand chat group call
###### 9.2.2.4.1.1 MCVideo chat session establishment
In the procedures in this clause:
1) MCVideo ID in an incoming SIP INVITE request refers to the MCVideo ID of
the originating user from the \ element of the
application/vnd.3gpp.mcvideo-info+xml MIME body of the incoming SIP INVITE
request;
2) group identity in an incoming SIP INVITE request refers to the group
identity from the \ element of the
application/vnd.3gpp.mcvideo-info+xml MIME body of the incoming SIP INVITE
request;
3) MCVideo ID in an outgoing SIP INVITE request refers to the MCVideo ID of
the called user in the \ element of the
application/vnd.3gpp.mcvideo-info+xml MIME body of the outgoing SIP INVITE
request;
4) emergency indication in an incoming SIP INVITE request refers to the
\ element of the application/vnd.3gpp.mcvideo-info+xml MIME
body; and
5) alert indication in an incoming SIP INVITE request refers to the \ element of the application/vnd.3gpp.mcvideo-info+xml MIME body.
Upon receipt of a \"SIP INVITE request for controlling MCVideo function of an
MCVideo group\" containing a group identity identifying a chat MCVideo group,
the controlling MCVideo function:
1) if unable to process the request due to a lack of resources or a risk of
congestion exists, may reject the SIP INVITE request with a SIP 500 (Server
Internal Error) response. The controlling MCVideo function may include a
Retry-After header field to the SIP 500 (Server Internal Error) response as
specified in IETF RFC 3261 [15] and skip the rest of the steps;
NOTE 1: If the SIP INVITE request contains an emergency indication set to a
value of \"true\", the controlling MCVideo function can by means beyond the
scope of this specification choose to accept the request.
2) shall reject the SIP request with a SIP 403 (Forbidden) response and not
process the remaining steps if:
a) an Accept-Contact header field does not include the g.3gpp.mcvideo media
feature tag;
b) an Accept-Contact header field does not include the g.3gpp.icsi-ref media
feature tag containing the value of \"urn:urn-7:3gpp-
service.ims.icsi.mcvideo\"; or
c) the isfocus media feature tag is present in the Contact header field;
3) if received SIP INVITE request includes an
application/vnd.3gpp.mcvideoinfo+xml MIME body with an \
element included or an \ element included, shall validate
the request as described in clause 6.3.3.1.17;
4) shall retrieve the necessary group document(s) from the group management
server for the group identity contained in the SIP INVITE request and carry
out initial processing as specified in clause 6.3.5.2 and continue with the
rest of the steps if the checks in clause 6.3.5.2 succeed;
5) if the MCVideo user identified by the MCVideo ID in the SIP INVITE request
is not affiliated with the MCVideo group identified by the group identity in
the SIP INVITE request as determined by the procedures of clause 6.3.6:
a) shall check if the MCVideo user is eligible to be implicitly affiliated
with the MCVideo chat group as determined by clause 8.2.2.3.6; and
b) if the MCVideo user is not eligible for implicit affiliation, shall reject
the SIP INVITE request with a SIP 403 (Forbidden) response with the warning
text set to \"120 user is not affiliated to this group\" in a Warning header
field as specified in clause 4.4 and skip the rest of the steps below;
6) if the SIP INVITE request contains unauthorised request for an MCVideo
emergency group call as determined by clause 6.3.3.1.13.2:
a) shall reject the SIP INVITE request with a SIP 403 (Forbidden) response as
specified in clause 6.3.3.1.14; and
b) shall send the SIP 403 (Forbidden) response as specified in 3GPP TS 24.229
[11] and skip the rest of the steps;
7) if the SIP INVITE request contains an unauthorised request for an MCVideo
imminent peril group call as determined by clause 6.3.3.1.13.6, shall reject
the SIP INVITE request with a SIP 403 (Forbidden) response with the following
clarifications:
a) shall include in the SIP 403 (Forbidden) response an
application/vnd.3gpp.mcvideo-info+xml MIME body as specified in clause F.1
with the \ element containing the \ element with
the \ element set to a value of \"false\"; and
b) shall send the SIP 403 (Forbidden) response as specified in 3GPP TS 24.229
[11] and skip the rest of the steps;
8) if a Resource-Priority header field is included in the SIP INVITE request:
a) if the Resource-Priority header field is set to the value indicated for
emergency calls and the SIP INVITE request does not contain an emergency
indication and the in-progress emergency state of the group is set to a value
of \"false\", shall reject the SIP INVITE request with a SIP 403 (Forbidden)
response and skip the remaining steps; and
b) if the Resource-Priority header field is set to the value indicated for
imminent peril calls and the SIP INVITE request does not contain an imminent
peril indication and the in-progress imminent peril state of the group is set
to a value of \"false\", shall reject the SIP INVITE request with a SIP 403
(Forbidden) response; and skip the remaining steps;
9) shall determine if the media parameters are acceptable and the MCVideo
codecs are offered in the SDP offer and if not reject the request with a SIP
488 (Not Acceptable Here) response and skip the rest of the steps;
10) shall create a chat group session and allocate an MCVideo session identity
for the chat group session if the MCVideo chat group session identity does not
already exist, and may handle timer TNG3 (group call timer) as specified in
clause 6.3.3.5;
11) if the chat group session is ongoing and the \ as specified in 3GPP TS 24.481 [24] is already reached:
a) if, according to local policy, the user identified by the MCVideo ID in the
SIP INVITE request is deemed to have a higher priority than an existing user
in the chat group session, may remove a participant from the session by
following clause 9.2.1.4.4.3, and skip the next step; and
NOTE 2: The local policy for deciding whether to admit a user to a call that
has reached its maximum amount of participants can include the \ and the \ of the user as well as other information
of the user from the group document as specified in 3GPP TS 24.481 [24]. The
local policy decisions can also include taking into account whether the
imminent-peril indicator or emergency indicator was received in the SIP INVITE
request.
b) shall return a SIP 486 (Busy Here) response with the warning text set to
\"122 too many participants\" to the originating network as specified in
clause 4.4. Otherwise, continue with the rest of the steps;
12) if the received SIP INVITE request was determined to be eligible for
implicit affiliation in step 5) and if clause 8.2.2.3.7 was not previously
invoked in the present clause, shall perform the implicit affiliation as
specified in clause 8.2.2.3.7;
13) if the SIP INVITE request contains an emergency indication set to a value
of \"true\" or the in-progress emergency state of the group to \"true\" the
controlling MCVideo function shall:
a) validate that the SIP INVITE request includes a Resource-Priority header
field populated with the values for an MCVideo emergency group call as
specified in clause 6.3.3.1.19, and if not:
i) perform the actions specified in clause 6.3.3.1.8;
ii) send the SIP UPDATE request generated in clause 6.3.3.1.8 towards the
initiator of the SIP INVITE request according to 3GPP TS 24.229 [11]; and
iii) upon receiving a SIP 200 (OK) response to the SIP UPDATE request sent in
clause 6.3.3.1.8, proceed with the rest of the steps.
NOTE 3: Verify that the Resource-Priority header is included and properly
populated for both ongoing and newly- entered in-progress emergency states of
the specified group.
b) if the in-progress emergency state of the group is set to a value of
\"true\" and this MCVideo user is indicating a new emergency indication:
i) for each of the other affiliated members of the group generate a SIP
MESSAGE request notification of the MCVideo user\'s emergency indication as
specified in clause 6.3.3.1.11 with the following clarifications:
A) set the \ element of the application/vnd.3gpp.mcvideo-
info+xml MIME body to a value of \"true\";
B) if the received SIP INVITE contains an alert indication set to a value of
\"true\" and this is an authorised request for an MCVideo emergency alert
meeting the conditions specified in clause 6.3.3.1.13.1, perform the
procedures specified in clause 6.3.3.1.12; and
C) send the SIP MESSAGE request as specified in 3GPP TS 24.229 [11];
ii) cache the information that this MCVideo user has initiated an MCVideo
emergency call; and
iii) if the SIP INVITE request contains an authorised request for an MCVideo
emergency alert as determined in step i) B) above, cache the information that
this MCVideo user has initiated an MCVideo emergency alert; and
c) if the in-progress emergency state of the group is set to a value of
\"false\":
i) shall set the value of the in-progress emergency state of the group to
\"true\";
ii) shall start timer TNG2 (in-progress emergency group call timer) and handle
its expiry as specified in clause 6.3.3.1.16;
iii) shall generate SIP re-INVITE requests for the MCVideo emergency group
call to the other affiliated and joined participants of the chat MCVideo group
as specified in clause 6.3.3.1.6;
iv) shall generate SIP INVITE requests for the MCVideo emergency group call to
the affiliated but not joined members of the chat MCVideo group as specified
in clause 6.3.3.1.7;
A) for each affiliated but not joined member shall send the SIP INVITE request
towards the MCVideo client as specified in 3GPP TS 24.229 [11]; and
B) upon receiving a SIP 200 (OK) response to the SIP INVITE request the
controlling MCVideo function shall interact with the media plane as specified
in 3GPP TS 24.581 [5];
v) shall cache the information that this MCVideo user has initiated an MCVideo
emergency call; and
vi) if the \ element of the application/vnd.3gpp.mcvideo-info+xml
MIME body is set to \"true\" and is an authorised request for an MCVideo
emergency alert as specified in clause 6.3.3.1.13.1, shall cache the
information that this MCVideo user has initiated an MCVideo emergency alert;
and
vii) if the in-progress imminent peril state of the group is set to a value of
\"true\", shall set it to a value of \"false\";
14) if the in-progress emergency state of the group is set to a value of
\"false\" and if the SIP INVITE request contains an imminent peril indication
set to a value of \"true\" or the in-progress imminent peril state of the
group is set to \"true\", the controlling MCVideo function shall:
a) validate that the SIP INVITE request includes a Resource-Priority header
field populated with the values for an MCVideo imminent peril group call as
specified in clause 6.3.3.1.19, and if not:
i) perform the actions specified in clause 6.3.3.1.8;
ii) send the SIP UPDATE request generated in clause 6.3.3.1.8 towards the
initiator of the SIP INVITE request according to 3GPP TS 24.229 [11]; and
iii) upon receiving a SIP 200 (OK) response to the SIP UPDATE request sent in
clause 6.3.3.1.8 proceed with the rest of the steps.
NOTE 4: Verify that the Resource-Priority header is included and properly
populated for both ongoing and newly- entered in-progress imminent peril
states of the specified group.
b) if the in-progress imminent peril state of the group is set to a value of
\"true\" and this MCVideo user is indicating a new imminent peril indication:
i) for each of the other affiliated member of the group generate a SIP MESSAGE
request notification of the MCVideo user\'s imminent peril indication as
specified in clause 6.3.3.1.11 with the following clarifications;
A) set the \ element of the application/vnd.3gpp.mcvideo-
info+xml MIME body to a value of \"true\"; and
B) send the SIP MESSAGE request as specified in 3GPP TS 24.229 [11]; and
ii) cache the information that this MCVideo user has initiated an MCVideo
imminent peril call; and
c) if the in-progress imminent peril state of the group is set to a value of
\"false\":
i) shall set the value of the in-progress imminent peril state of the group to
\"true\";
ii) shall generate SIP re-INVITE requests for the MCVideo imminent peril group
call to the other affiliated and joined participants of the chat MCVideo group
as specified in clause 6.3.3.1.15;
iii) shall generate SIP INVITE requests for the MCVideo imminent peril call to
the affiliated but not joined members of the chat MCVideo group as specified
in clause 6.3.3.1.7;
A) for each affiliated but not joined member shall send the SIP INVITE request
towards the MCVideo client as specified in 3GPP TS 24.229 [11]; and
B) Upon receiving a SIP 200 (OK) response to the SIP INVITE request the
controlling MCVideo function shall interact with the media plane as specified
in 3GPP TS 24.581 [5]; and
iv) shall cache the information that this MCVideo user has initiated an
MCVideo imminent peril call;
15) shall accept the SIP request and generate a SIP 200 (OK) response to the
SIP INVITE request according to 3GPP TS 24.229 [11];
16) shall include in the SIP 200 (OK) response an SDP answer according to 3GPP
TS 24.229 [11] with the clarifications specified in clause 6.3.3.2.1 unless
the procedures of clause 6.3.3.1.8 were performed in step 13)a) or step 14)a)
above;
17) should include the Session-Expires header field and start supervising the
SIP session according to IETF RFC 4028 [23]. It is recommended that the
\"refresher\" header field parameter is omitted. If included, the
\"refresher\" header field parameter shall be set to \"uac\";
18) shall include the \"timer\" option tag in a Require header field;
19) shall include the following in a Contact header field:
a) the g.3gpp.mcvideo media feature tag;
b) the g.3gpp.icsi-ref media feature tag containing the value of
\"urn:urn-7:3gpp-service.ims.icsi.mcvideo\";
c) the MCVideo session identity; and
d) the media feature tag isfocus;
20) shall include the \"tdialog\" option tag in a Supported header field
according to IETF RFC 4538 [32];
21) if the SIP INVITE request contains an alert indication set to a value of
\"true\" and this is an unauthorised request for an MCVideo emergency alert as
specified in clause 6.3.3.1.13.1, shall include in the SIP 200 (OK) response
the warning text set to \"149 SIP INFO request pending\" in a Warning header
field as specified in clause 4.4;
22) if the received SIP INVITE request contains an
application/vnd.3gpp.mcvideo-info+xml MIME body with the \
element set to a value of \"true\" and if the in-progress emergency state of
the group is set to a value of \"true\", shall include in the SIP 200 (OK)
response the warning text set to \"149 SIP INFO request pending\" in a Warning
header field as specified in clause 4.4;
NOTE 5: In this case, the request was for an imminent peril call but a higher
priority MCVideo emergency call was already in progress on the group. Hence,
the imminent peril call request aspect of the request is denied but the
request is granted with emergency level priority.
23) shall interact with media plane as specified in 3GPP TS 24.581 [5];
24) shall send the SIP 200 (OK) response to the MCVideo client according to
3GPP TS 24.229 [11]; and
25) if the chat group session was already ongoing and if at least one of the
participants has subscribed to the conference event package, shall send a SIP
NOTIFY request to all participants with a subscription to the conference event
package as specified in clause 9.2.3.4.2.
Upon receiving a SIP ACK to the SIP 200 (OK) response sent towards the
inviting MCVideo client, and the SIP 200 (OK) response was sent with the
warning text set to \"149 SIP INFO request pending\" in a Warning header field
as specified in clause 4.4, the controlling MCVideo function shall follow the
procedures in clause 6.3.3.1.18.
###### 9.2.2.4.1.2 Receipt of a SIP re-INVITE request
In the procedures in this clause:
1) emergency indication in an incoming SIP re-INVITE request refers to the
\ element of the application/vnd.3gpp.mcvideo-info+xml MIME
body; and
2) imminent peril indication in an incoming SIP re-INVITE request refers to
the \ element of the application/vnd.3gpp.mcvideo-info+xml
MIME body.
Upon receipt of a SIP re-INVITE request for an MCVideo session identity
identifying a chat MCVideo group session, the controlling MCVideo function:
1) if unable to process the request due to a lack of resources or a risk of
congestion exists, may reject the SIP re-INVITE request with a SIP 500 (Server
Internal Error) response. The controlling MCVideo function may include a
Retry-After header field to the SIP 500 (Server Internal Error) response as
specified in IETF RFC 3261 [15] and skip the rest of the steps;
NOTE 1: if the SIP re-INVITE request contains an emergency indication or an
imminent peril indication set to a value of \"true\" and this is an authorised
request for originating an MCVideo emergency group call as determined by
clause 6.3.3.1.13.2, or for originating an MCVideo imminent peril group call
as determined by clause 6.3.3.1.13.5, the controlling MCVideo function can
according to local policy choose to accept the request.
2) if the received SIP re-INVITE request includes an
application/vnd.3gpp.mcvideo-info+xml MIME body with an \
element included or an \ element included, shall validate
the request as described in clause 6.3.3.1.17;
3) if the SIP re-INVITE request contains an unauthorised request for an
MCVideo emergency call as determined by clause 6.3.3.1.13.2:
a) shall reject the SIP re-INVITE request with a SIP 403 (Forbidden) response
as specified in clause 6.3.3.1.14; and
b) shall send the SIP 403 (Forbidden) response as specified in 3GPP TS 24.229
[11] and skip the rest of the steps;
4) if the SIP re-INVITE request contains an application/vnd.3gpp.mcvideo-
info+xml MIME body with the \ element set to a value of
\"true\" and is an authorised request to initiate an MCVideo emergency group
call as determined by clause 6.3.3.1.13.2, the controlling MCVideo function
shall:
a) validate that the SIP re-INVITE request includes a Resource-Priority header
field is populated correctly for an MCVideo emergency group call as specified
in clause 6.3.3.1.19, and if not:
i) shall perform the actions specified in clause 6.3.3.1.8; and
ii) upon receiving a SIP 200 (OK) response to the SIP UPDATE request sent in
clause 6.3.3.18 shall proceed with the rest of the steps.
NOTE 2: Verify that the Resource-Priority header is included and properly
populated for both ongoing and newly-entered in-progress emergency states of
the specified group.
b) if the in-progress emergency state of the group is set to a value of
\"true\" and this MCVideo user is indicating a new emergency indication:
i) shall cache the MCVideo ID of the MCVideo user that has initiated an
MCVideo emergency call;
ii) if the SIP re-INVITE request contains an application/vnd.3gpp.mcvideo-
info+xml MIME body with the \ element set to a value of \"true\"
and is an authorised request for an MCVideo emergency alert as determined by
clause 6.3.3.1.13.1, shall cache the MCVideo ID of the MCVideo user that has
initiated an MCVideo emergency alert; and
iii) for each of the other affiliated members of the group, generate a SIP
MESSAGE request notification of the MCVideo user\'s emergency indication as
specified in clause 6.3.3.1.11 with the following clarifications:
A) set the \ element of the application/vnd.3gpp.mcvideo-
info+xml MIME body to a value of \"true\";
B) if the received SIP re-INVITE contains an alert indication set to a value
of \"true\" and this is an authorised request for an MCVideo emergency alert
meeting the conditions specified in clause 6.3.3.1.13.1, perform the
procedures specified in clause 6.3.3.1.12; and
C) send the SIP MESSAGE request as specified in 3GPP TS 24.229 [11]; and
c) if the in-progress emergency state of the group is set to a value of
\"false\":
i) shall set the value of the in-progress emergency state of the group to
\"true\";
ii) shall cache the MCVideo ID of the MCVideo user that has initiated an
MCVideo emergency call;
iii) if the SIP re-INVITE request contains an application/vnd.3gpp.mcvideo-
info+xml MIME body with the \ element set to a value of \"true\"
and this is an authorised request for an MCVideo emergency alert as specified
in clause 6.3.3.1.13.1, shall cache the MCVideo ID of the MCVideo user that
has initiated an MCVideo emergency alert;
iv) shall start timer TNG2 (in-progress emergency group call timer) and handle
its expiry as specified in clause 6.3.3.1.16;
v) shall generate SIP re-INVITE requests for the MCVideo emergency group call
to the other affiliated and joined participants of the chat MCVideo group as
specified in clause 6.3.3.1.6. The MCVideo controlling function:
A) for each affiliated and joined member shall send the SIP re-INVITE request
towards the MCVideo client as specified in 3GPP TS 24.229 [11]; and
B) Upon receiving a SIP 200 (OK) response to the SIP re-INVITE request the
controlling MCVideo function shall interact with the media plane as specified
in 3GPP TS 24.581 [5]; and
vi) shall generate SIP INVITE requests for the MCVideo emergency group call to
the affiliated but not joined members of the chat MCVideo group as specified
in clause 6.3.3.1.7. The controlling MCVideo function:
A) for each affiliated but not joined member shall send the SIP INVITE request
towards the MCVideo client as specified in 3GPP TS 24.229 [11]; and
B) Upon receiving a SIP 200 (OK) response to the SIP INVITE request the
controlling MCVideo function shall interact with the media plane as specified
in 3GPP TS 24.581 [5]; and
vii) if the in-progress imminent peril state of the group is set to a value of
\"true\", shall set it to a value of \"false\";
5) if the SIP re-INVITE request contains an application/vnd.3gpp.mcvideo-
info+xml MIME body with the \ element set to a value of
\"false\" and is an unauthorised request for an MCVideo emergency group call
cancellation as determined by clause 6.3.3.1.13.4:
a) shall reject the SIP re-INVITE request with a SIP 403 (Forbidden) response;
b) shall include in the SIP 403 (Forbidden) response an
application/vnd.3gpp.mcvideo-info+xml MIME body as specified in annex F.1 with
an \ element set to a value of \"true\";
c) if an \ element of the mcvideoinfo MIME body is included set to
\"false\" and there is an outstanding MCVideo emergency alert for this MCVideo
user, shall include in the application/vnd.3gpp.mcvideo-info+xml MIME body and
\ element set to a value of \"true\"; and
d) shall send the SIP 403 (Forbidden) response as specified in 3GPP TS 24.229
[11] and skip the rest of the steps;
6) if the SIP re-INVITE request contains an application/vnd.3gpp.mcvideo-
info+xml MIME body with the \ element set to a value of
\"false\" and is determined to be an authorised request for an MCVideo
emergency call cancellation as specified in clause 6.3.3.1.13.4 and the in-
progress emergency state of the group to is set to a value of \"true\" the
controlling MCVideo function shall:
a) validate that the SIP re-INVITE request includes a Resource-Priority header
field is populated correctly for a normal priority MCVideo group call as
specified in clause 6.3.3.1.19, and if not:
i) shall perform the actions specified in clause 6.3.3.1.8; and
ii) upon receiving a SIP 200 (OK) response to the SIP UPDATE request sent in
clause 6.3.3.1.8 shall proceed with the rest of the steps;
NOTE 3: Verify that the Resource-Priority header is included and properly
populated for an in-progress emergency state cancellation of the specified
group.
b) shall set the in-progress emergency group state of the group to a value of
\"false\";
c) shall clear the cache of the MCVideo ID of the MCVideo user identified by
the \ element as having an outstanding MCVideo emergency group
call;
d) if an \ element of the application/vnd.3gpp.mcvideo-info+xml
MIME body is included and set to \"false\" and is determined to be an
authorised request for an MCVideo emergency alert cancellation as specified in
clause 6.3.3.1.13.3 and there is an outstanding MCVideo emergency alert for
this MCVideo user shall:
i) if the received SIP re-INVITE request contains an \ element
in the application/vnd.3gpp.mcvideo-info+xml MIME body, clear the cache of the
MCVideo ID of the MCVideo user identified by the \ element as
having an outstanding MCVideo emergency alert; and
ii) if the received SIP re-INVITE request does not contain an \
element in the application/vnd.3gpp.mcvideo-info+xml MIME body, clear the
cache of the MCVideo ID of the sender of the SIP re-INVITE request as having
an outstanding MCVideo emergency alert;
e) shall generate SIP re-INVITE requests to the other affiliated and joined
members of the MCVideo group as specified in clause 6.3.3.1.6. The MCVideo
controlling function:
i) for each affiliated and joined member shall send the SIP re-INVITE request
towards the MCVideo client as specified in 3GPP TS 24.229 [11]; and
ii) Upon receiving a SIP 200 (OK) response to the SIP re-INVITE request the
controlling MCVideo function shall interact with the media plane as specified
in 3GPP TS 24.581 [5]; and
NOTE 4: Clause 6.3.3.1.5 will inform the affiliated and joined members of the
cancellation of the MCVideo group\'s in-progress emergency state and the
cancellation of the MCVideo emergency alert if applicable.
f) for each of the affiliated but not joined members of the group shall:
i) generate a SIP MESSAGE request notification of the cancellation of the
MCVideo user\'s emergency call as specified in clause 6.3.3.1.11;
ii) set the \ element of the application/vnd.3gpp.mcvideo-
info+xml MIME body to a value of \"false\";
iii) if indicated above in step d), set the \ element of the
application/vnd.3gpp.mcvideo-info+xml MIME body to a value of \"false\"; and
iv) send the SIP MESSAGE request according to 3GPP TS 24.229 [11];
7) if a Resource-Priority header field is included in the SIP re-INVITE
request:
a) if the Resource-Priority header field is set to the value indicated for
emergency calls and the received SIP re-INVITE request does not contain an
authorised request for an MCVideo emergency call as determined in step 4)
above and the in-progress emergency state of the group is set to a value of
\"false\", shall reject the SIP re-INVITE request with a SIP 403 (Forbidden)
response and skip the remaining steps; or
b) if the Resource-Priority header field is set to the value indicated for
imminent peril calls and the received SIP re-INVITE request does not contain
an authorised request for an MCVideo imminent peril call as determined by the
procedures of clause 6.3.3.1.13.5 and the in-progress imminent peril state of
the group is set to a value of \"false\", shall reject the SIP re-INVITE
request with a SIP 403 (Forbidden) response and skip the remaining steps;
8) if the received SIP re-INVITE request contains an imminent peril
indication, shall perform the procedures specified in clause 9.2.2.4.1.3 and
skip the rest of the steps;
9) shall include in the SIP 200 (OK) response an SDP answer according to 3GPP
TS 24.229 [11] with the clarifications specified in clause 6.3.3.2.1 unless
the procedures of clause 6.3.3.1.8 were performed in step 6) a) i) above;
10) shall include the \"tdialog\" option tag in a Supported header field
according to IETF RFC 4538 [32];
11) if the received SIP re-INVITE request contains an
application/vnd.3gpp.mcvideo-info+xml MIME body with the \ element
set to a value of \"true\" and if this is an unauthorised request for an
MCVideo emergency alert as determined by clause 6.3.3.1.13.1, shall include in
the SIP 200 (OK) response the warning text set to \"149 SIP INFO request
pending\" in a Warning header field as specified in clause 4.4;
12) if the received SIP re-INVITE request contains an
application/vnd.3gpp.mcvideo-info+xml MIME body with the \ element
set to a value of \"false\" and if this is an unauthorised request for an
MCVideo emergency alert cancellation as determined by clause 6.3.3.1.13.3,
shall include in the SIP 200 (OK) response the warning text set to \"149 SIP
INFO request pending\" in a Warning header field as specified in clause 4.4;
13) if the received SIP re-INVITE request contains an
application/vnd.3gpp.mcvideo-info+xml MIME body with the \
element set to a value of \"true\", this is an authorised request for an
MCVideo imminent peril group call and if the in-progress emergency state of
the group is set to a value of \"true\", shall include in the SIP 200 (OK)
response the warning text set to \"149 SIP INFO request pending\" in a Warning
header field as specified in clause 4.4;
NOTE 5: In this case, the request was for an imminent peril call but a higher
priority MCVideo emergency call was already in progress on the group. Hence,
the imminent peril call request aspect of the request is denied but the
request is granted with emergency level priority.
14) shall interact with media plane as specified in 3GPP TS 24.581 [5]; and
15) shall send the SIP 200 (OK) response towards the MCVideo client according
to 3GPP TS 24.229 [11].
Upon receiving a SIP ACK to the SIP 200 (OK) response sent towards the
inviting MCVideo client, and the SIP 200 (OK) response was sent with the
warning text set to \"149 SIP INFO request pending\" in a Warning header field
as specified in clause 4.4, the controlling MCVideo function shall follow the
procedures in clause 6.3.3.1.18.
###### 9.2.2.4.1.3 Handling of a SIP re-INVITE request for imminent peril
session
In the procedures in this clause:
1) imminent peril indication in an incoming SIP INVITE request refers to the
\ element of the application/vnd.3gpp.mcvideo-info+xml MIME
body.
When the controlling function receives a SIP re-INVITE request with and
imminent peril indication, the controlling function:
1) if the SIP re-INVITE request contains an unauthorised request for an
MCVideo imminent peril group call as determined by clause 6.3.3.1.13.5, shall
reject the SIP re-INVITE request with a SIP 403 (Forbidden) response with the
following clarifications:
a) shall include in the SIP 403 (Forbidden) response an
application/vnd.3gpp.mcvideo-info+xml MIME body as specified in Annex F.1 with
the \ element containing the \ element with the
\ element set to a value of \"false\"; and
b) shall send the SIP 403 (Forbidden) response as specified in 3GPP TS 24.229
[11] and skip the rest of the steps;
2) if the in-progress emergency group state of the group is set to a value of
\"false\" and if the SIP re-INVITE request contains an imminent peril
indication set to a value of \"true\" or the in-progress imminent peril state
of the group to \"true\", the controlling MCVideo function shall:
a) validate that the SIP re-INVITE request includes a Resource-Priority header
field with the namespace set to the MCVideo-specific namespace and the
priority set to the priority designated for imminent peril calls and if not:
i) perform the actions specified in clause 6.3.3.1.8;
ii) send the SIP UPDATE request generated in clause 6.3.3.1.8 towards the
initiator of the SIP re-INVITE request according to 3GPP TS 24.229 [11]; and
iii) upon receiving a SIP 200 (OK) response to the SIP UPDATE request sent in
clause 6.3.3.1.8 proceed with the rest of the steps.
NOTE 3: Verify that the Resource-Priority header is included and properly
populated for both ongoing and newly- entered in-progress imminent peril
states of the specified group.
b) if the in-progress imminent peril state of the group is set to a value of
\"true\" and this MCVideo user is indicating a new imminent peril indication:
i) for each of the other affiliated member of the group generate a SIP MESSAGE
request notification of the MCVideo user\'s imminent peril indication as
specified in clause 6.3.3.1.11 with the following clarifications;
A) set the \ element of the application/vnd.3gpp.mcvideo-
info+xml MIME body to a value of \"true\"; and
B) send the SIP MESSAGE request as specified in 3GPP TS 24.229 [11]; and
ii) cache the information that this MCVideo user has initiated an MCVideo
imminent peril call; and
c) if the in-progress imminent peril state of the group is set to a value of
\"false\":
i) shall set the value of the in-progress imminent peril state of the group to
\"true\";
ii) shall generate SIP re-INVITE requests for the MCVideo imminent peril group
call to the other affiliated and joined participants of the chat MCVideo group
as specified in clause 6.3.3.1.15;
iii) shall generate SIP INVITE requests for the MCVideo imminent peril group
call to the affiliated but not joined members of the chat MCVideo group as
specified in clause 6.3.3.1.7;
A) for each affiliated but not joined member shall send the SIP INVITE request
towards the MCVideo client as specified in 3GPP TS 24.229 [11]; and
B) Upon receiving a SIP 200 (OK) response to the SIP INVITE request the
controlling MCVideo function shall interact with the media plane as specified
in 3GPP TS 24.581 [5]; and
iv) shall cache the information that this MCVideo user has initiated an
MCVideo imminent peril call;
3) if the SIP re-INVITE request contains an application/vnd.3gpp.mcvideo-
info+xml MIME body with the \ element set to a value of
\"false\" and is an unauthorised request for an MCVideo imminent peril group
call cancellation as determined by clause 6.3.3.1.13.6 shall:
a) reject the SIP re-INVITE request with a SIP 403 (Forbidden) response to the
SIP re-INVITE request; and
b) include in the SIP 403 (Forbidden) response:
i) include in the SIP 403 (Forbidden) response an
application/vnd.3gpp.mcvideo-info+xml MIME body as specified in Annex F.1 with
the \ element containing the \ element with the
\ element set to a value of \"false\";
ii) send the SIP 403 (Forbidden) response as specified in 3GPP TS 24.229 [11];
and
iii) skip the rest of the steps;
4) if the SIP re-INVITE request contains an application/vnd.3gpp.mcvideo-
info+xml MIME body with the \ element set to a value of
\"false\" and is determined to be an authorised request for an MCVideo
imminent peril call cancellation as specified in clause 6.3.3.1.13.6 and the
in-progress imminent peril state of the group to is set to a value of \"true\"
the controlling MCVideo function shall:
a) validate that the SIP re-INVITE request includes a Resource-Priority header
field with the namespace set to the MCVideo-specific namespace, and the
priority set to the priority level designated for a normal priority MCVideo
group call, and if not:
i) shall perform the actions specified in clause 6.3.3.1.8; and
ii) upon receiving a SIP 200 (OK) response to the SIP UPDATE request sent in
clause 6.3.3.1.8 shall proceed with the rest of the steps;
NOTE 3: verify that the Resource-Priority header is included and properly
populated for an in-progress emergency group state cancellation of the
specified group.
b) shall set the in-progress imminent peril state of the group to a value of
\"false\";
c) shall cache the information that this MCVideo user no longer has an
outstanding MCVideo imminent peril group call;
d) shall generate SIP re-INVITES requests to the other affiliated and joined
members of the MCVideo group as specified in clause 6.3.3.1.15. The MCVideo
controlling function:
i) for each affiliated and joined member shall send the SIP re-INVITE request
towards the MCVideo client as specified in 3GPP TS 24.229 [11]; and
ii) Upon receiving a SIP 200 (OK) response to the SIP re-INVITE request the
controlling MCVideo function shall interact with the media plane as specified
in 3GPP TS 24.581 [5]; and
NOTE 4: clause 6.3.3.1.15 will inform the affiliated and joined members of the
cancellation of the MCVideo group\'s in-progress emergency group state and the
cancellation of the MCVideo emergency alert if applicable.
e) for each of the affiliated but not joined members of the group shall:
i) generate a SIP MESSAGE request notification of the cancellation of the
MCVideo user\'s imminent peril call as specified in clause 6.3.3.1.11;
ii) set the \ element of the application/vnd.3gpp.mcvideo-
info+xml MIME body to a value of \"false\"; and
iii) send the SIP MESSAGE request according to 3GPP TS 24.229 [11];
5) shall include in the SIP 200 (OK) response an SDP answer according to 3GPP
TS 24.229 [11] with the clarifications specified in clause 6.3.3.2.1 unless
the procedures of clause 6.3.3.1.8 were performed in step 2) or 4) above;
6) shall include the \"norefersub\" option tag in a Supported header field
according to IETF RFC 4488 [31];
7) shall include the \"tdialog\" option tag in a Supported header field
according to IETF RFC 4538 [32];
8) shall interact with media plane as specified in 3GPP TS 24.581 [5]; and
9) shall send the SIP 200 (OK) response towards the MCVideo client according
to 3GPP TS 24.229 [11].
##### 9.2.2.4.2 End group call at the terminating controlling MCVideo function
Upon receiving a SIP BYE request the controlling MCVideo function shall follow
the procedures as specified in clause 6.3.3.2.4.
##### 9.2.2.4.3 End group call initiated by the controlling MCVideo function
###### 9.2.2.4.3.1 General
This clause describes the procedures of each functional entity for ending the
group call initiated by the controlling MCVideo function.
###### 9.2.2.4.3.2 SIP BYE request for releasing MCVideo session for a group
call
When the MCVideo session for group call needs to be released as specified in
clause 6.3.8.1, the controlling MCVideo function shall follow the procedures
in clause 6.3.3.1.4.
###### 9.2.2.4.3.3 SIP BYE request toward a MCVideo client
When an MCVideo client needs to be removed from the MCVideo session (e.g. due
to de-affiliation or admitting a higher priority user), the controlling
MCVideo function shall follow the procedures in clause 6.3.3.1.4.
After successful removing the MCVideo client from the MCVideo session, the
controlling MCVideo function may generate a notification to the MCVideo
clients, which have subscribed to the conference state event package that an
MCVideo user has been removed from the MCVideo session, as specified in clause
6.3.3.4 and send the SIP NOTIFY request to the MCVideo client according to
3GPP TS 24.229 [11].
#### 9.2.2.5 Non-controlling function of an MCVideo group procedures
##### 9.2.2.5.1 Terminating procedures
###### 9.2.2.5.1.1 General
When receiving the \"SIP INVITE request for non-controlling MCVideo function
of an MCVideo group\" the MCVideo server can be acting as a controller MCVideo
function in an ongoing chat group call or, if a chat group call is not
ongoing, be initiated as an non-controlling MCVideo function and invite
MCVideo users.
If a chat group call is not ongoing the MCVideo server shall perform the
actions specified in clause 9.2.2.5.1.2.
If the \"SIP INVITE request for non-controlling MCVideo function of an MCVideo
group\" is received when a chat group call is ongoing, the controlling MCVideo
function may switch from operating in a controlling MCVideo function mode to
operate in a non-controlling MCVideo function mode as specified in clause
9.2.2.5.1.3.
When operating in the non-controlling mode and a SIP BYE request is received
from the controlling MCVideo function, the non-controlling MCVideo function
shall change from operating in the non-controlling mode to operating in the
controlling mode as specified in clause 9.2.2.5.1.4.
###### 9.2.2.5.1.2 Initiating a chat group session
Upon receipt of a \"SIP INVITE request for non-controlling MCVideo function of
an MCVideo group\" and if a chat group call is not ongoing, the non-
controlling MCVideo function of an MCVideo group:
NOTE 1: The Contact header field of the SIP INVITE request contains the
\"isfocus\" feature media tag.
1) if unable to process the request due to a lack of resources or a risk of
congestion exists, may reject the SIP INVITE request with a SIP 500 (Server
Internal Error) response. The controlling MCVideo function may include a
Retry-After header field to the SIP 500 (Server Internal Error) response as
specified in IETF RFC 3261 [15]. Otherwise, continue with the rest of the
steps;
2) shall determine if the media parameters are acceptable and the MCVideo
codecs are offered in the SDP offer and if not, reject the request with a SIP
488 (Not Acceptable Here) response. Otherwise, continue with the rest of the
steps;
3) shall reject the SIP request with a SIP 403 (Forbidden) response and not
process the remaining steps if:
a) an Accept-Contact header field does not include the g.3gpp.mcvideo media
feature tag; or
b) an Accept-Contact header field does not include the g.3gpp.icsi-ref media
feature tag containing the value of \"urn:urn-7:3gpp-
service.ims.icsi.mcvideo\";
4) if the partner MCVideo system does not have a mutual aid relationship with
the primary MCVideo system identified by the contents of the P-Asserted-
Identity, shall reject the \"SIP INVITE request for non-controlling MCVideo
function of an MCVideo group\" with a SIP 403 (Forbidden) response, with
warning text set to \"128 isfocus already assigned\" in a Warning header field
as specified in clause 4.4, and shall not process the remaining steps;
5) shall check if a Resource-Priority header field is included in the incoming
SIP INVITE request and may apply any preferential treatment to the SIP request
as specified in 3GPP TS 24.229 [11];
6) shall generate SIP 200 (OK) response to the SIP INVITE request as specified
in the clause 6.3.4.2.2.2 before continuing with the rest of the steps;
7) shall include in the SIP 200 (OK) response an SDP answer to the SDP offer
in the incoming SIP INVITE request as specified in the clause 6.3.4.2.1;
8) shall interact with the media plane as specified in 3GPP TS 24.581 [5]
clause 6.3.5; and
NOTE 2: Resulting media plane processing is completed before the next step is
performed.
9) shall send a SIP 200 (OK) response to the controlling MCVideo function
according to 3GPP TS 24.229 [11].
###### 9.2.2.5.1.3 Joining an ongoing chat group call
Upon receipt of a \"SIP INVITE request for non-controlling MCVideo function of
an MCVideo group\" and if a chat group call is already ongoing, the non-
controlling MCVideo function of an MCVideo group:
NOTE 1: The Contact header field of the SIP INVITE request contains the
\"isfocus\" feature media tag.
1) shall determine if the media parameters are acceptable and the MCVideo
codecs are offered in the SDP offer and if not reject the request with a SIP
488 (Not Acceptable Here) response. Otherwise, continue with the rest of the
steps;
2) shall reject the SIP request with a SIP 403 (Forbidden) response and not
process the remaining steps if:
a) an Accept-Contact header field does not include the g.3gpp.mcvideo media
feature tag; or
b) an Accept-Contact header field does not include the g.3gpp.icsi-ref media
feature tag containing the value of \"urn:urn-7:3gpp-
service.ims.icsi.mcvideo\";
3) if the partner MCVideo system does not have a mutual aid relationship with
the primary MCVideo system identified by the contents of the P-Asserted-
Identity, shall reject the \"SIP INVITE request for non-controlling MCVideo
function of an MCVideo group\" with a SIP 403 (Forbidden) response, with
warning text set to \"128 isfocus already assigned\" in a Warning header field
as specified in clause 4.4, and shall not process the remaining steps;
4) shall cache the content of the SIP INVITE request, if received in the
Contact header field and if the specific feature tags are supported;
5) shall check if a Resource-Priority header field is included in the incoming
SIP INVITE request and may apply any preferential treatment to the SIP request
as specified in 3GPP TS 24.229 [11];
6) shall generate SIP 200 (OK) response to the SIP INVITE request as specified
in the clause 6.3.4.2.2.2 before continuing with the rest of the steps;
7) shall include in the SIP 200 (OK) response an SDP answer to the SDP offer
in the incoming SIP INVITE request as specified in the clause 6.3.4.2.1;
8) shall instruct the media plane to initialise the switch to the non-
controlling mode as specified in 3GPP TS 24.581 [5] clause 6.5.2.3;
NOTE 2: Resulting media plane processing is completed before the next step is
performed.
9) if the media plane provided information about the current speaker(s), cache
the information about the current speaker(s); and
10) shall send a SIP 200 (OK) response to the controlling MCVideo function
according to 3GPP TS 24.229 [11].
Upon receipt of the SIP ACK request, the non-controlling MCVideo function of
an MCVideo group:
1) if information about a current speaker(s) is cached:
a) shall generate a SIP INFO request as specified in clause 6.3.4.1.3; and
b) shall send the SIP INFO request to the controlling MCVideo function as
specified in 3GPP TS 24.229 [11];
2) shall instruct the media plane to finalise the switch to the non-
controlling mode as specified in 3GPP TS 24.581 [5] clause 6.3.5.3; and
3) if at least one of the MCVideo clients in the chat group session has a
subscription to the conference event package, shall subscribe to the
conference event package from the controlling MCVideo function as specified in
clause 9.2.3.5.3.
###### 9.2.2.5.1.4 Splitting an ongoing chat group call
Upon receipt of a SIP BYE request, the non-controlling MCVideo function of an
MCVideo group:
1) if keeping the chat group call active is according to the release policy in
clause 6.3.8.1, shall request media plane to switch to controlling mode as
specified in 3GPP TS 24.581 [5] clause 6.3.5;
NOTE 1: Resulting media plane processing is completed before the next step is
performed.
2) shall send a SIP 200 (OK) response to the SIP BYE request; and
3) if at least one MCVideo client has subscribed to the conference package,
shall send a NOTIFY request to all participants with a subscription to the
conference event package as specified in clause 9.2.3.5.2.
NOTE 2: The SIP NOTIFY request will indicate that all participants, with the
exception of the MCVideo users belonging to the constituent MCVideo group
hosted by the non-controlling MCVideo function, have left the group session.
###### 9.2.2.5.1.5 MCVideo client joining the temporary group chat session
When acting in the non-controlling connection mode when receiving of a \"SIP
INVITE request for controlling MCVideo function of an MCVideo group\"
containing a group identity identifying a constituent chat MCVideo group being
part of the temporary group call, the non-controlling MCVideo function shall
act as a controlling MCVideo function towards the MCVideo client and shall
perform the actions in the clause 9.2.2.4.1.1 with the following
clarifications:
1) the MCVideo session identity in the Contact header field of the SIP 200
(OK) response shall be the MCVideo session identity generated by the non-
controlling MCVideo function; and
2) the clause 9.2.3.5.2 shall be used when sending the SIP NOTIFY request for
subscriptions to the conference event package.
###### 9.2.2.5.1.6 Receipt of a SIP re-INVITE request from an MCVideo client
Upon receipt of a SIP re-INVITE request from an MCVideo client the non-
controlling MCVideo function shall act as the controlling MCVideo function and
shall perform the actions in clause 9.2.2.4.1.2.
###### 9.2.2.5.1.7 SIP OPTIONS request authorization procedure
Upon receipt of an SIP OPTIONS request containing a P-Asserted-Identity header
field containing the public service identity of a MCVideo server authorized to
send the OPTIONS request, the non-controlling MCVideo function shall perform
the actions in clause 9.2.1.5.4 otherwise the non-controlling MCVideo function
shall send a SIP 403 (Forbidden) response as specified in 3GPP TS 24.229.
###### 9.2.2.5.1.8 Initiating a temporary group session
Upon receiving a \"SIP INVITE request \"SIP INVITE request for controlling
MCVideo function of an MCVideo group\" when a chat group session is not
ongoing, the non-controlling MCVideo-function shall:
NOTE 1: The difference between a \"SIP INVITE request \"SIP INVITE request for
controlling MCVideo function of an MCVideo group\" and a \"SIP INVITE request
for non-controlling MCVideo function of an MCVideo group\" is that the latter
SIP INVITE request contains the isfocus media feature tag in the Contact
header field.
1) if unable to process the request due to a lack of resources or a risk of
congestion exists, may reject the SIP INVITE request with a SIP 500 (Server
Internal Error) response. The non-controlling MCVideo function may include a
Retry-After header field to the SIP 500 (Server Internal Error) response as
specified in IETF RFC 3261 [15]. Otherwise, continue with the rest of the
steps;
2) shall determine if the media parameters are acceptable and the MCVideo
codecs are offered in the SDP offer and if not reject the request with a SIP
488 (Not Acceptable Here) response. Otherwise, continue with the rest of the
steps;
3) shall reject the SIP request with a SIP 403 (Forbidden) response and not
process the remaining steps if:
a) an Accept-Contact header field does not include the g.3gpp.mcvideo media
feature tag; or
b) an Accept-Contact header field does not include the g.3gpp.icsi-ref media
feature tag containing the value of \"urn:urn-7:3gpp-
service.ims.icsi.mcvideo\";
4) shall retrieve the group document from the group management server for the
MCVideo group ID contained in the \ element of the
application/vnd.3gpp.mcvideo-info+xml MIME body of the SIP INVITE request and
carry out initial processing as specified in clause 6.3.5.2 and continue with
the rest of the steps if the checks in clause 6.3.5.2 succeed;
NOTE 2: If the checks are not succesful, the SIP response to the \"SIP INVITE
request \"SIP INVITE request for controlling MCVideo function of an MCVideo
group\" is already sent in the clause 6.3.5.2.
5) shall cache the content of the SIP INVITE request;
6) shall check if a Resource-Priority header field is included in the incoming
SIP INVITE request and may apply any preferential treatment to the SIP request
as specified in 3GPP TS 24.229 [11];
7) shall authorize the MCVideo user in the \ element
in the application/vnd.3gpp.mcvideo-info+xml MIME body of the \"SIP INVITE
request for controlling MCVideo function of an MCVideo group\" as specified in
clause 6.3.5.2, if the MCVideo user is unauthorized to join a chat group
session, the non-controlling MCVideo function shall send a SIP 403 (Forbidden)
response with the warning text set to \"106 user not authorised to join chat
group\" in a Warning header field as specified in clause 4.4.
8) shall generate a SIP INVITE request to the controlling MCVideo function as
specified in clause 6.3.4.1.4; and
9) shall send the SIP INVITE request to the controlling MCVideo function as
specified in 3GPP TS 24.229 [11].
Upon receipt of a SIP 2xx response to the SIP INVITE request sent to the
controlling MCVideo function as specified above, the non-controlling MCVideo
function:
1) shall send the SIP ACK request to the controlling MCVideo function as
specified in 3GPP TS 24.229 [11];
2) shall generate a SIP 200 (OK) to the \"SIP INVITE request for controlling
MCVideo function of an MCVideo group\" as specified in 3GPP TS 24.229
populated as follows:
a) shall include an SDP answer as specified in clause 6.3.4.2.1 based on the
SDP answer in the SIP 200 (OK) response;
b) shall include the public service identifier of the non-controlling MCVideo
function in the P-Asserted-Identity header field; and
c) shall include the warning text set to \"148 MCVideo group is regrouped\" in
a Warning header field as specified in clause 4.4; and
3) shall start acting as a non-controlling MCVideo function and interact with
the media plane as specified in 3GPP TS 24.581 [5] clause 6.5.
Upon receipt of other final SIP responses with the exception of the SIP 2xx
response to the INVITE request sent to the controlling MCVideo function as
specified above, the non-controlling MCVideo function:
1) shall send the SIP ACK response to the controlling MCVideo function as
specified in 3GPP TS 24.229 [11]; and
2) perform the actions in the clause 9.2.1.5.2.4.
NOTE 4: Regardless if the controlling MCVideo function accepts or rejects the
SIP INVITE request sent above the prearranged group session continues to be
initiated with only the members of the group homed on the non-controlling
MCVideo function of the group being invited to the group call.
### 9.2.3 Subscription to the conference event package
#### 9.2.3.1 General
The IETF RFC 4575 [57] defines a conference state event package that shall be
used to obtain the status of participants in group sessions.
The MCVideo client may subscribe to the conference state event package at any
time in a group session that the MCVideo client participates in. The clause
9.2.3.2 specifies the procedures in the MCVideo client when subscribing to the
conference events.
The participating MCVideo function shall forward conference state
subscriptions and notifications as specified in clause 9.2.3.3.
The controlling MCVideo function shall handle subscriptions and notification
of conference state events as specified in clause 9.2.3.4.
The non-controlling MCVideo function shall handle subscriptions and
notification of conference state events as specified in clause 9.2.3.4.
When the non-controlling MCVideo function connection model is used, the
controlling MCVideo function subscribes to the conference state event package
from the non-controlling MCVideo function as specified in clause 9.2.3.4.3 and
the non-controlling MCVideo function subscribes to the conference state event
package from the controlling MCVideo function as specified in clause
9.2.3.5.3.
#### 9.2.3.2 MCVideo client
A MCVideo client may subscribe to the conference state event package when a
group call is ongoing and the ongoing group call is not initiated as a
broadcast group call by sending a SIP SUBSCRIBE request to obtain information
of the status of a group session.
When subscribing to the conference state event package, the MCVideo client:
1) shall generate a SIP SUBSCRIBE request and use a new SIP-dialog according
to IETF RFC 6665 [16], IETF RFC 4575 [57] and 3GPP TS 24.229 [11];
2) shall set the Request-URI of the SIP SUBSCRIBE request to the MCVideo
session identity of the group session;
3) shall include the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"
(coded as specified in 3GPP TS 24.229 [11]), in a P-Preferred-Service header
field according to IETF RFC 6050 [14];
4) shall include an Accept-Contact header with the media feature tag
g.3gpp.icsi-ref with the value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"
along with \"require\" and \"explicit\" header field parameters according to
IETF RFC 3841 [20];
5) if the MCVideo client wants to receive the current status and later
notification, shall set the Expires header field according to IETF RFC 6665
[16], to 4294967295;
NOTE 1: 4294967295, which is equal to 2^32^-1, is the highest value defined
for Expires header field in IETF RFC 3261 [15].
6) if the MCVideo client wants to fetch the current state only, shall set the
Expires header field according to IETF RFC 6665 [16], to zero;
7) shall include an Accept header field containing the application/conference-
info+xml\"MIME type;
8) shall include an application/vnd.3gpp.mcvideo-info+xml MIME body with the
\ element set to the MCVideo group ID of the group
session; and
9) shall send the SIP SUBSCRIBE request using a new SIP dialog according to
3GPP TS 24.229 [11].
The responses to the SIP SUBSCRIBE request shall be handled according to IETF
RFC 6665 [16], IETF RFC 4575 [57] and TS 24.229 [11].
Upon receiving a SIP NOTIFY requests to the previously sent SIP SUBSCRIBE
request the MCVideo client:
1) shall handle the request according to IETF RFC 6665 [16] and IETF RFC 4575
[57]; and
2) may display the current state information to the MCVideo client based on
the information in the SIP NOTIFY request body.
When needed the MCVideo client shall terminate the subscription and indicate
it terminated according to IETF RFC 6665 [16].
NOTE 2: The contents of the received SIP NOTIFY request body is specified in
clause 6.3.3.4.
#### 9.2.3.3 Participating MCVideo function
Upon receipt of a SIP SUBSCRIBE request for conference event status
subscription from a MCVideo user served by the participating MCVideo function
and if the SIP SUBSCRIBE request contains:
1) the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\" (coded as
specified in 3GPP TS 24.229 [11]), in a P-Asserted-Service header field
according to IETF RFC 6050 [14];
2) an Accept header field containing the application/conference-info+xml\"MIME
type; and
3) an application/vnd.3gpp.mcvideo-info+xml MIME body containing the
\ set to a MCVideo group ID;
then the participating MCVideo function:
1) shall attempt to resolve the received Request-URI to an existing MCVideo
session identity;
2) if the participating MCVideo function could not resolve the received
Request-URI to an existing MCVideo session identity, shall reject the SIP
SUBSCRIBE response with a SIP 404 (Not Found) response with a warning text set
to \"137 the indicated group call does not exists\" as specified in clause 4.4
and shall skip the rest of the steps
3) shall generate a SUBSCRIBE request as specified in TS 24.229 [11]
4) shall set the SIP URI in the Request-URI with the MCVideo session identity
that is mapped to the MCVideo session identity in the received Request-URI;
5) shall include in the application/vnd.3gpp.mcvideo-info+xml MIME body the
\ element set to the MCVideo ID of the served user:
and
6) shall insert a Record-Route header containing a URI identifying its own
address; and
7) shall send the SIP SUBSCRIBE request according to 3GPP TS 24.229 [11].
Upon receiving a SIP response to the SIP SUBSCRIBE request the participating
MCVideo function:
1) shall copy the content of the incoming SIP response to an outgoing SIP
response;
2) if a SIP 200 (OK) response, shall include in the Contact header field of
the outgoing SIP response an MCVideo session identity mapped to the MCVideo
session identity provided in the Contact header field of the received SIP 200
(OK) response in the outgoing SIP response; and
3) shall forward the SIP response according to 3GPP TS 24.229 [11].
Upon receiving a SIP NOTIFY request within the dialog created by the SIP
SUBSCRIBE request destined to a served MCVideo client, the participating
MCVideo function:
1) shall include the public service identity of the MCVideo user in the
Request-URI;
2) shall copy the content of the incoming SIP NOTIFY request to the outgoing
SIP NOTIFY request; and
3) shall send the SIP NOTIFY request according to 3GPP TS 24.229 [11].
Upon receiving a SIP response to the SIP NOTIFY request the participating
MCVideo function:
1) shall copy the content of the incoming SIP response to an outgoing SIP
response;
2) if a SIP 200 (OK) response, shall include an MCVideo session identity
constructed from the MCVideo session identity provided in the Contact header
field of the received SIP 200 (OK) response in the outgoing SIP response; and
3) shall forward the SIP response according to 3GPP TS 24.229 [11].
#### 9.2.3.4 Controlling MCVideo function
##### 9.2.3.4.1 Receiving a subscription to the conference event package
Upon receipt of a SIP SUBSCRIBE request for event package subscription in the
controlling MCVideo function and the SIP SUBSCRIBE request:
1) contains an application/vnd.3gpp.mcvideo-info+xml MIME body with
a) the \ element set to the group identity of the group
session and the \ element set to either:
i) the MCVideo ID of a participant in the group session; or
ii) a constituent MCVideo group ID of a non-controlling MCVideo function in a
temporary group session;
2) contains the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\" (coded
as specified in 3GPP TS 24.229 [11]), in a P-Asserted-Service header field
according to IETF RFC 6050 [14];
3) contains an Accept header field containing the application/conference-
info+xml MIME type; and
4) is not received in a group call initiated as a broadcast group call;
then the controlling MCVideo function:
1) shall check if the \ element in the
group document in 3GPP TS 24.481 [24] allows the MCVideo ID or the constituent
MCVideo group ID in the \ element to subscribe to the
conference event package and if not allowed:
a) shall reject the \"SIP SUBSCRIBE request for event status subscription in
the controlling MCVideo function\" with a SIP 403 (Forbidden) response to the
SIP SUBSCRIBE request, with warning text set to \"138 subscription of
conference events not allowed\" as specified in clause 4.4; and
b) shall not continue with the remaining steps;
2) shall handle the request according to IETF RFC 6665 [16] and IETF RFC 4575
[57];
3) shall cache information about the subscription;
4) shall send a conference state notification as specified in clause
9.2.3.4.2; and
5) if the SIP SUBSCRIBE request is the first SUBSCRIBE request from a
participant in a temporary group session, shall subscribe to the conference
event package from all non-controlling MCVideo functions in the group session
as specified in clause 9.2.3.4.3.
Upon receipt of a SIP SUBSCRIBE request for event package subscription in the
controlling MCVideo function in an group call initiated as a broadcast group
call, the controlling MCVideo function:
1) shall generate a SIP 480 (Temporarily Unavailable) response to the SIP
SUBSCRIBE request as specified in 3GPP TS 24.229 [11];
2) shall include a Warning header field with the warning text set to \"105
subscription not allowed in a broadcast group call\" as specified in clause
4.4; and
3) send the SIP 480 (Temporarily Unavailable) response according to 3GPP TS
24.229 [11].
##### 9.2.3.4.2 Sending notifications to the conference event package
The procedures in this clause is triggered by:
1) the receipt of a SIP SUBSCRIBE request as specified in clause 9.2.3.4.1;
2) the receipt of a SIP BYE request from one of the participants in a pre-
arranged or a chat group session; or
3) when a new participant is added in a pre-arranged or chat group session.
When sending a conference state event notification, the controlling MCVideo
function:
1) shall generate a notification package as specified in clause 6.3.3.4 to all
MCVideo clients which have subscribed to the conference state event package;
and
NOTE: As a group document can potentially have a large content, the
controlling MCVideo function can notify using content-indirection as defined
in IETF RFC 4483 [29].
2) shall send a SIP NOTIFY request to all participants which have subscribed
to the conference state event package as specified in 3GPP TS 24.229 [11].
##### 9.2.3.4.3 Sending subscriptions to the conference event package
The procedure in this clause is triggered by:
1) the receipt of a SIP 200 (OK) response to a SIP INVITE request for non-
controlling MCVideo function of an MCVideo group and if at least one
participant already has subscribed to the conference event package in the
controlling MCVideo function as specified in clause 9.2.3.4.1; or
2) the receipt of the first SIP SUBSCRIBE request as specified in clause
9.2.3.4.1 and one or more participant in the group session is a non-
controlling MCVideo function;
then, for each non-controlling MCVideo function from where a SIP 200 (OK)
response to a SIP INVITE request for non-controlling MCVideo function of an
MCVideo group has been received and where a SIP SUBSCRIBE request is not
already sent, the controlling MCVideo function:
1) shall generate a SIP SUBSCRIBE request and use a new SIP-dialog according
to IETF RFC 6665 [16], IETF RFC 4575 [57] and 3GPP TS 24.229 [11];
2) shall set the Request-URI of the SIP SUBSCRIBE request to the public
service identity of the non-controlling MCVideo function serving the group
identity of the MCVideo group owned by the partner MCVideo system;
3) shall include the same P-Asserted-Identity header field as included in the
SIP INVITE request for non-controlling MCVideo function of an MCVideo group;
4) shall include the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"
(coded as specified in 3GPP TS 24.229 [11]), in a P-Preferred-Service header
field according to IETF RFC 6050 [14];
5) shall include an Accept-Contact header with the g.3gpp.mcvideo along with
\"require\" and \"explicit\" header field parameters according to IETF RFC
3841 [20];
6) shall set the Expires header field according to IETF RFC 6665 [16], to
4294967295;
NOTE: 4294967295, which is equal to 2^32^-1, is the highest value defined for
Expires header field in IETF RFC 3261 [15].
7) shall include an Accept header field containing the application/conference-
info+xml MIME type;
8) shall include an application/vnd.3gpp.mcvideo-info+xml MIME body with:
a) the \ element set to the constituent MCVideo group ID;
and
b) the \ set to the temporary MCVideo group ID; and
9) shall send the SIP SUBSCRIBE request using a new SIP dialog according to
3GPP TS 24.229 [11].
The responses to the SIP SUBSCRIBE request shall be handled according to IETF
RFC 6665 [16], IETF RFC 4575 [57] and TS 24.229 [11].
Upon receiving an incoming SIP NOTIFY requests to the previously sent SIP
SUBSCRIBE request, the controlling MCVideo function:
1) shall handle the request according to IETF RFC 6665 [16] and IETF RFC 4575
[57];
2) shall modify the SIP NOTIFY request as specified in clause 6.3.3.4; and
3) shall forward the modified SIP NOTIFY request according to 3GPP TS 24.229
[11] to all other participants with a subscription to the conference event
package.
NOTE: A non-controlling MCVideo function of an MCVideo group is regarded as a
participant in a temporary group session.
##### 9.2.3.4.4 Terminating a subscription
Upon receipt of a SIP SUBSCRIBE request for event status subscription in the
controlling MCVideo function that terminates the subscription of the
conference event package as specified in IETF RFC 6665 [16], the controlling
MCVideo function:
1) shall send a SIP 200 (OK) response as specified in IETF RFC 6665 [16]; and
2) if there are no remaining subscriptions to the event package in the ongoing
MCVideo call in a temporary group session, shall terminate the subscriptions
to the conference event package as specified in IETF RFC 6665 [16] in all non-
controlling MCVideo functions in the temporary group session.
Upon expiry of the subscription timer and if there are no remaining
subscriptions to the event package in the ongoing MCVideo call in a temporary
group session, the controlling MCVideo function shall terminate the
subscriptions to the conference event package as specified in IETF RFC 6665
[16] in all non-controlling MCVideo functions in the temporary group session.
### 9.2.4 Remote change of an MCVideo user\'s selected group
#### 9.2.4.1 General
Clause 9.2.4 specifies the MCVideo client procedures, participating MCVideo
function procedures and controlling MCVideo function procedures for the on-
network remote change of an MCVideo user\'s selected group.
#### 9.2.4.2 Client procedures
##### 9.2.4.2.1 Remote selected group change initiation
Upon receiving a request from the MCVideo user to send a group selection
change request to change the selected group of a targeted MCVideo user to a
specific MCVideo group, the MCVideo client:
1) if:
a) the \ element does not exist in the MCVideo
user profile document with one or more \ elements (see the MCVideo user
profile document in 3GPP TS 24.484 [25]); or
b) the \ element exists in the MCVideo user
profile document and the MCVideo ID of the targeted MCVideo user does not
match with one of the \ elements of the \
element of the MCVideo user profile document (see the MCVideo user profile
document in 3GPP TS 24.484 [25]);
then:
a) should indicate to the requesting MCVideo user that they are not authorised
to change the selected MCVideo group of the targeted MCVideo user; and
b) shall skip the rest of the steps of the present clause;
2) shall generate a SIP MESSAGE request in accordance with 3GPP TS 24.229 [11]
and IETF RFC 3428 [17] with the following clarifications:
a) shall include the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"
(coded as specified in 3GPP TS 24.229 [11]), in a P-Preferred-Service header
field according to IETF RFC 6050 [14] in the SIP MESSAGE request;
b) shall include an Accept-Contact header field with the g.3gpp.icsi-ref media
feature tag containing the value of \"urn:urn-7:3gpp-
service.ims.icsi.mcvideo\" along with the \"require\" and \"explicit\" header
field parameters according to IETF RFC 3841 [20];
c) may include a P-Preferred-Identity header field in the SIP MESSAGE request
containing a public user identity as specified in 3GPP TS 24.229 [11]; and
d) shall include an application/vnd.3gpp.mcvideo-info+xml MIME body as
specified in clause F.1 with the \ element containing the
\ element containing:
i) the \ set to the MCVideo group identity to be selected
by the targeted MCVideo user; and
ii) an \ element containing the \ element set to a value
of \"group-selection-change-request\"; and
e) shall insert in the SIP MESSAGE request a MIME resource-lists body with the
MCVideo ID of the targeted MCVideo user, according to rules and procedures of
IETF RFC 5366 [37];
3) shall set the Request-URI to the public service identity identifying the
participating MCVideo function serving the MCVideo user; and
4) shall send the SIP MESSAGE request according to rules and procedures of
3GPP TS 24.229 [11].
Upon receipt of a SIP 4xx, 5xx or 6xx response to the SIP MESSAGE request,
should indicate to the MCVideo user the failure of the sent group selection
change request and not continue with the rest of the steps.
Upon receiving a \"SIP MESSAGE request for group selection change response for
terminating client\", the MCVideo client:
1) shall determine the success or failure of the sent group selection change
request from the value of the \ element
contained in the \ element of the \ element of the
\ element of the application/vnd.3gpp.mcvideo-info+xml MIME body
included in the received SIP MESSAGE request; and
2) should indicate to the MCVideo user the success or failure of the sent
group selection change request.
##### 9.2.4.2.2 Target client procedures for handling remote selected group
change request
Upon receiving a \"SIP MESSAGE request for group selection change request for
terminating client\", the MCVideo client:
1) if the received SIP MESSAGE request contains an
application/vnd.3gpp.mcvideo-info+xml MIME body containing an \ element set to a value of \"true\":
a) shall invoke the procedures of clause 8.2.1.2 to affiliate to the MCVideo
group identified by the contents of the \ included
in the application/vnd.3gpp.mcvideo-info+xml MIME body;
b) if the MCVideo client has not already invoked the procedures of clause
8.2.1.3, shall invoke the procedures of clause 8.2.1.3; and
c) upon receiving a SIP NOTIFY request including a \ element set to a
value matching the \ value included in the SIP PUBLISH request sent in
step 1) a) above as specified in clause 8.2.1.3, shall determine if the
affiliation procedure to the MCVideo group identified by the contents of the
\ in the received SIP MESSAGE request was
successful;
2) if the received SIP MESSAGE request contained an
application/vnd.3gpp.mcvideo-info+xml MIME body containing an \ element set to a value of \"true\" and the affiliation was
successful as determined in step 1) c) above, or if the \ element was not present in the received SIP MESSAGE request:
a) shall change the MCVideo client\'s selected group to the MCVideo group
identified by the contents of the \ element
contained in the application/vnd.3gpp.mcvideo-info+xml MIME body included in
the received SIP MESSAGE request; and
b) shall determine the success or failure of the change of selected group
action;
3) shall generate a SIP MESSAGE request in accordance with 3GPP TS 24.229 [11]
and IETF RFC 3428 [17] with the following clarifications:
a) shall include the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"
(coded as specified in 3GPP TS 24.229 [11]), in a P-Preferred-Service header
field according to IETF RFC 6050 [14] in the SIP MESSAGE request;
b) shall include an Accept-Contact header field with the g.3gpp.icsi-ref media
feature tag containing the value of \"urn:urn-7:3gpp-
service.ims.icsi.mcvideo\" along with the \"require\" and \"explicit\" header
field parameters according to IETF RFC 3841 [20];
c) may include a P-Preferred-Identity header field in the SIP MESSAGE request
containing a public user identity as specified in 3GPP TS 24.229 [11];
d) shall include in an application/resource-lists+xml MIME body, the MCVideo
ID contained in the \ element in the application/
vnd.3gpp.mcvideo-info+xml MIME body of the received SIP MESSAGE request; and
e) shall include an application/vnd.3gpp.mcvideo-info+xml MIME body as
specified in clause F.1 with the \ element containing the
\ element containing:
i) the \ set to the MCVideo group identity identified by
the contents of the \ element contained in the
received SIP MESSAGE request; and
ii) an \ element containing:
A) the \ element set to a value of \"group-selection-change-
response\";
B) if the MCVideo client was able to successfully change the selected group as
determined in step 2) b) above, a \ element set
to a value of \"success\"; and
C) if the MCVideo client:
II) was required to affiliate to the MCVideo group identified by the contents
of the \ in the received SIP MESSAGE request and the
affiliation failed as determined in step 1) c); or
II) failed to change the selected group as determined in step 2) b)
then a \ element set to a value of \"fail\";
4) should indicate to the MCVideo user the success or failure of the requested
change of selected group action;
5) shall set the Request-URI to the public service identity identifying the
participating MCVideo function serving the MCVideo user; and
6) shall send the SIP MESSAGE request according to rules and procedures of
3GPP TS 24.229 [11].
#### 9.2.4.3 Participating MCVideo function procedures
##### 9.2.4.3.1 Originating procedures
Upon receiving a \"SIP MESSAGE request for group-selection-change for
originating participating MCVideo function\" the participating MCVideo
function:
1) if unable to process the request due to a lack of resources or a risk of
congestion exists, may reject the SIP MESSAGE request with a SIP 500 (Server
Internal Error) response. The participating MCVideo function may include a
Retry-After header field to the SIP 500 (Server Internal Error) response as
specified in IETF RFC 3261 [15] and skip the rest of the steps;
2) shall determine the MCVideo ID of the calling user from the public user
identity in the P-Asserted-Identity header field of the SIP MESSAGE request,
and shall authorise the calling user;
NOTE: The MCVideo ID of the calling user is bound to the public user identity
at the time of service authorisation, as documented in clause 7.3.
3) if the \"SIP MESSAGE request for group selection change for originating
participating MCVideo function\" contains the \ element set to a
value of \"group-selection-change-request\":
a) if:
i) the \ element does not exist in the MCVideo
user profile document with one or more \ elements (see the MCVideo user
profile document in 3GPP TS 24.484 [50]); or
ii) if the MCVideo ID contained in the \ element
contained in the application/vnd.3gpp.mcvideo-info+xml MIME body included in
the received \"SIP MESSAGE request for group selection change for originating
participating MCVideo function\" does not match with one of the \
elements of the \ element of the MCVideo user
profile document (see the MCVideo user profile document in 3GPP TS 24.484
[50]);
then:
i) shall reject the SIP MESSAGE request with a SIP 403 (Forbidden) response
including warning text set to \"155 user not authorised to change user\'s
selected group\" in a Warning header field as specified in clause 4.4, and not
continue with the rest of the steps in this clause;
4) shall determine the public service identity of the controlling MCVideo
function associated with the group identity contained in the \ element contained in the application/vnd.3gpp.mcvideo-info+xml
MIME body;
5) shall generate a SIP MESSAGE request in accordance with 3GPP TS 24.229 [11]
and IETF RFC 3428 [33];
6) shall set the Request-URI of the outgoing SIP MESSAGE request to the public
service identity of the controlling MCVideo function associated with the group
identity contained in the received SIP MESSAGE request;
7) shall copy the contents of the application/vnd.3gpp.mcvideo-info+xml MIME
body in the received SIP MESSAGE request into an application/vnd.3gpp.mcvideo-
info+xml MIME body as specified in clause F.1 included in the outgoing SIP
MESSAGE request;
8) shall copy the contents of the application/resource-lists MIME body into
the outgoing SIP MESSAGE request;
9) shall set the \ element of the \
element containing the \ element to the MCVideo ID determined
in step 2) above;
10) shall set the P-Asserted-Identity in the outgoing SIP MESSAGE request to
the public user identity in the P-Asserted-Identity header field contained in
the received SIP MESSAGE request;
11) shall include an Accept-Contact header field containing the g.3gpp.mcvideo
media feature tag along with the \"require\" and \"explicit\" header field
parameters according to IETF RFC 3841 [20];
12) shall include an Accept-Contact header field with the media feature tag
g.3gpp.icsi-ref with the value of \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"
along with parameters \"require\" and \"explicit\" according to IETF RFC 3841
[20];
13) shall include the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"
(coded as specified in 3GPP TS 24.229 [11]), into the P-Asserted-Service
header field of the outgoing SIP MESSAGE request; and
14) shall send the SIP MESSAGE request as specified to 3GPP TS 24.229 [11].
Upon receipt of a SIP 2xx response in response to the sent SIP MESSAGE
request, the participating MCVideo function shall generate a SIP 200 (OK)
response and forward the SIP 200 (OK) response to the MCVideo client.
Upon receipt of a SIP 4xx, 5xx or 6xx response to the SIP MESSAGE request,
shall forward the error response to the MCVideo client.
##### 9.2.4.3.2 Terminating procedures
Upon receiving a \"SIP MESSAGE request for group-selection-change for
terminating participating MCVideo function\" the participating MCVideo
function:
1) if unable to process the request due to a lack of resources or a risk of
congestion exists, may reject the SIP MESSAGE request with a SIP 500 (Server
Internal Error) response. The participating MCVideo function may include a
Retry-After header field to the SIP 500 (Server Internal Error) response as
specified in IETF RFC 3261 [15] and skip the rest of the steps;
2) shall use the MCVideo ID present in the \ element of
the application/vnd.3gpp.mcvideo-info+xml MIME body of the incoming SIP
MESSAGE request to retrieve the binding between the MCVideo ID and public user
identity;
3) if the binding between the MCVideo ID and public user identity does not
exist, then the participating MCVideo function shall reject the SIP MESSAGE
request with a SIP 404 (Not Found) response. Otherwise, continue with the rest
of the steps;
4) shall generate an outgoing SIP MESSAGE request as specified in clause
6.3.2.2.11;
5) shall include the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"
(coded as specified in 3GPP TS 24.229 [11]), into the P-Asserted-Service
header field of the outgoing SIP MESSAGE request; and
6) shall send the SIP MESSAGE request as specified in 3GPP TS 24.229 [11].
Upon receipt of SIP 2xx responses to the outgoing SIP MESSAGE requests, the
participating MCVideo function shall forward the SIP 2xx response to the
controlling MCVideo function.
Upon receipt of a SIP 4xx, 5xx or 6xx response to the SIP MESSAGE request,
shall forward the response to the controlling MCVideo function.
#### 9.2.4.4 Controlling MCVideo function procedures
Upon receiving:
\- a \"SIP MESSAGE request for group selection change request for controlling
MCVideo function\"; or
\- a \"SIP MESSAGE request for group selection change response for controlling
MCVideo function\";
the controlling MCVideo function:
1) if unable to process the request due to a lack of resources or a risk of
congestion exists, may reject the SIP MESSAGE request with a SIP 500 (Server
Internal Error) response. The controlling MCVideo function may include a
Retry-After header field to the SIP 500 (Server Internal Error) response as
specified in IETF RFC 3261 [15]. Otherwise, continue with the rest of the
steps;
2) shall reject the SIP request with a SIP 403 (Forbidden) response and not
process the remaining steps if an Accept-Contact header field does not include
the g.3gpp.icsi-ref media feature tag containing the value of
\"urn:urn-7:3gpp-service.ims.icsi.mcvideo\";
3) if there is a \ element set to a value of \"group-selection-
change-request\" contained in the \ element in the \
element contained in the \ root element contained in the
application/vnd.3gpp.mcvideo-info+xml MIME body in the received SIP MESSAGE
request:
a) if the MCVideo user identified by the MCVideo ID in the
application/resource-lists MIME body contained in the SIP MESSAGE request is
not affiliated with the MCVideo group identified by the \
in the application/vnd.3gpp.mcvideo-info+xml MIME body as determined by the
procedures of clause 6.3.6:
i) shall determine if the MCVideo user is eligible to be affiliated with the
MCVideo group as determined by clause 8.2.2.3.8; and
ii) if the MCVideo user is not eligible for affiliation, shall reject the SIP
MESSAGE request with a SIP 403 (Forbidden) response with the warning text set
to \"120 user is not affiliated to this group\" in a Warning header field as
specified in clause 4.4 and skip the rest of the steps below;
4) shall generate a SIP MESSAGE request in accordance with 3GPP TS 24.229 [11]
and IETF RFC 3428 [33];
5) shall include an Accept-Contact header field containing the g.3gpp.mcvideo
media feature tag along with the \"require\" and \"explicit\" header field
parameters according to IETF RFC 3841 [20];
6) shall include an Accept-Contact header field with the media feature tag
g.3gpp.icsi-ref with the value of \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"
along with parameters \"require\" and \"explicit\" according to IETF RFC 3841
[20];
7) shall copy the contents of the application/vnd.3gpp.mcvideo-info+xml MIME
body in the received SIP MESSAGE request into an application/vnd.3gpp.mcvideo-
info+xml MIME body included in the outgoing SIP MESSAGE request with the
following clarifications:
a) shall set the \ to the MCVideo group identity
contained in the \ element contained in the
application/vnd.3gpp.mcvideo-info+xml MIME body included in the received SIP
MESSAGE request; and
b) shall set the \ element of the
application/vnd.3gpp.mcvideo-info+xml MIME body in the outgoing SIP MESSAGE
request to the MCVideo ID of the targeted MCVideo user contained in the
application/resource-lists MIME body contained in the received SIP MESSAGE
request;
8) if the received SIP MESSAGE request is a \"SIP MESSAGE request for group
selection change request for controlling MCVideo function\":
a) if the targeted MCVideo user is not affiliated to the identified MCVideo
group and was determined to be eligible to be affiliated with the MCVideo
group in step 3) a) i) above, shall include in the
application/vnd.3gpp.mcvideo-info+xml MIME body with the \
element containing the \ element with the \ element an
\ element set to a value of \"true\";
9) shall set the Request-URI to the public service identity of the terminating
participating MCVideo function associated with the targeted MCVideo user;
NOTE: How the controlling MCVideo function finds the address of the
terminating MCVideo participating function is out of the scope of the current
release.
10) shall include a P-Asserted-Service header field with the value
\"urn:urn-7:3gpp-service.ims.icsi.mcvideo\";
11) shall copy the public user identity of the calling MCVideo user from the
P-Asserted-Identity header field of the incoming SIP MESSAGE request into the
P-Asserted-Identity header field of the outgoing SIP MESSAGE request; and
12) shall send the SIP MESSAGE request according to according to rules and
procedures of 3GPP TS 24.229 [11].
Upon receipt of SIP 2xx responses to the outgoing SIP MESSAGE requests, the
controlling MCVideo function shall generate a SIP 200 (OK) response and
forward the SIP 200 (OK) response to the originating participating MCVideo
function.
Upon receipt of a SIP 4xx, 5xx or 6xx response to the SIP MESSAGE request,
controlling MCVideo function shall forward the error response to the
originating participating MCVideo function.
## 9.3 Off-network group call
### 9.3.1 General
#### 9.3.1.1 Common Procedures
##### 9.3.1.1.1 MONP MCVideo message transport
In order to participate in a call of an MCVideo group, the MCVideo client:
1) shall send the MONP MCVideo message transported in an MONP MCVIDEO MESSAGE
CARRIER message, specified in 3GPP TS 24.379[40 ], as a UDP message to the
multicast IP address of the MCVideo group, on UDP port 8809 (as specified in
3GPP TS 24,379 [40]), with an IP time-to-live set to 255; and
2) shall treat UDP messages received on the multicast IP address of the
MCVideo group and on port 8809 as received MONP MCVIDEO MESSAGE CARRIER
messages.
The MONP MCVIDEO MESSAGE CARRIER message is the entire payload of the UDP
message.
##### 9.3.1.1.2 Session description
One off-network MCVideo session includes one media-transmission control
entity.
The MCVideo client shall generate an SDP body for a group call in accordance
with rules and procedures of IETF RFC 4566 [2].
The MCVideo client:
1) shall include in the session-level section:
a) the \"o=\" field with the \ portion set to a dash;
b) the \"s=\" field with the \ portion set to a dash; and
c) the \"c=\" field with the \ portion set to \"IN\", the \
portion set to the IP version of a multicast IP address of the MCVideo group
and the \ portions set to the multicast IP address of the
MCVideo group;
2) shall include the media-level clause for audio component of MCVideo
consisting of:
a) the \"m=\" field with the \ portion set to \"audio\", the \
portion set to a port number for MCVideo group, the \ field set to
\"RTP/AVP\" and \ portion set indicating RTP payload type numbers;
b) the \"i=\" field with the \ portion set to \"audio
component of MCVideo\";
c) the \"a=fmtp:\" attribute(s), the \"a=rtpmap:\" attribute(s) or both,
indicating the codec(s) and media parameters of the audio component of
MCVideo; and
d) the \"a=rtcp:\" attribute indicating port number to be used for RTCP at the
MCVideo client selected according to the rules and procedures of IETF RFC 3605
[3], if the media steam uses other than the default IP address;
3) shall include the media-level clause for video component of MCVideo
consisting of:
a) the \"m=\" field with the \ portion set to \"video\", the \
portion set to a port number for MCVideo video of the MCVideo group, the
\ field set to \"RTP/AVP\" and \ portion set indicating RTP
payload type numbers;
b) the \"i=\" field with the \ portion set to \"video
component of MCVideo\";
c) the \"a=fmtp:\" attribute(s), the \"a=rtpmap:\" attribute(s) or both,
indicating the codec(s) and media parameters of the video component of
MCVideo;
d) the \"a=rtcp:\" attribute indicating port number to be used for RTCP at the
MCVideo client selected according to the rules and procedures of IETF RFC 3605
[3], if the media steam uses other than the default IP address; and
4) shall include the media-level clause for media-transmission control entity
consisting of:
a) an \"m=\" line, with the \ portion set to \"application\", the
\ portion set to a port number for media-transmission control entity of
the MCVideo group, the \ field set to \"udp\" and \ portion set to
\"MCVideo\"; and
b) the \"a=fmtp:MCVideo\" attribute indicating the parameters of the media-
transmission control entity as specified in 3GPP TS 24.581 [5];
### 9.3.2 Basic call control
#### 9.3.2.1 General
In this release of specification, media streams of off-network group call
cannot be modified and the SDP is the same for the entire duration of the
call.
The maximum number of simultaneous off-network group calls is limited by the
value of \"/\/Common/MCVideoGroupCall/MaxCallNc4\" leaf node present in the
MCVideo UE configuration as specified in 3GPP TS 24.483 [4].
#### 9.3.2.2 Basic call control state machine
The Figure 9.3.2.2-1 gives an overview of the main states and transitions on
the UE for call control.
Each call control state machine is per MCVideo group ID.
Figure 9.3.2.2-1: Basic call control state machine
The following pieces of information are associated with the basic call control
state machine:
a) the stored call identifier of the call;
b) the probe response value of the call;
c) the stored refresh interval of the call;
d) the stored SDP body of the call;
e) the stored originating MCVideo user ID of the call;
f) the stored MCVideo group ID of the call; and
h) the stored call start time of the call.
The basic call control state machine has a related call type control state
machine described in clause 9.3.3.2.
When sending the message, MCVideo client indicates the stored current ProSe
per-packet priority associated with the call type control state machine to the
lower layers.
#### 9.3.2.3 Call Control states
##### 9.3.2.3.1 S1: start-stop
This state exists for UE, when the UE is not part of an ongoing call.
This state is the start state of this state machine.
This state is the stop state of this state machine.
##### 9.3.2.3.2 S2: waiting for call announcement
This state exists for UE, when the UE has sent a GROUP CALL PROBE message and
is waiting for a GROUP CALL ANNOUNCEMENT message.
##### 9.3.2.3.3 S3: part of ongoing call
This state exists for UE, when the UE is part of an ongoing group call.
##### 9.3.2.3.4 S4: pending user action without confirm indication
This state exists for UE, when the UE has presented a notification to the
MCVideo user for the received GROUP CALL ANNOUNCEMENT message, is waiting for
a response and is not expected to send confirm indication.
##### 9.3.2.3.5 S5: pending user action with confirm indication
This state exists for UE, when the UE has presented a notification to the
MCVideo user for the received GROUP CALL ANNOUNCEMENT message, is waiting for
a response and is expected to send confirm indication.
##### 9.3.2.3.6 S6: ignoring incoming call announcements
This state exists for UE, when the group call was rejected or released, GROUP
CALL ANNOUNCEMENT message was sent or received and GROUP CALL ANNOUNCEMENT
messages continue being received.
##### 9.3.2.3.7 S7: waiting for call announcement after call release
This state exists for UE, when the group call was released, GROUP CALL
ANNOUNCEMENT message was neither sent nor received and GROUP CALL PROBE was
sent.
#### 9.3.2.4 Procedures
##### 9.3.2.4.1 General
###### 9.3.2.4.1.1 Call announcement timer calculation
###### # 9.3.2.4.1.1.1 Periodic call announcement timer calculation
The MCVideo client:
1) shall generate a random number, X, with uniform distribution between 0 and
1; and
2) shall set the TFG2 (periodic announcement) timer as follows:
\- TFG2 (periodic announcement) = the refresh interval of the call * (2/3 +
2/3*X) seconds.
###### # 9.3.2.4.1.1.2 Call announcement timer calculation after CALL PROBE
The MCVideo client:
1) shall generate a random number, X, with uniform distribution between 0 and
1; and
2) shall set the TFG2 (periodic announcement) timer as follows:
\- TFG2 (periodic announcement) = 1/12*X seconds.
###### 9.3.2.4.1.2 Max duration timer calculation
The MCVideo client shall set the TFG6 (max duration) timer as follows:
\- TFG6 (max duration) = X -- (Y -- Z) seconds, where:
\- X = value of \"/_\ _/\/OffNetwork/MCVideo/MaxDuration\" leaf node
present in group configuration as specified in 3GPP TS 24.483 [4];
\- Y = current UTC time, in seconds since midnight UTC of January 1, 1970 (not
counting leap seconds);
\- Z = Call start time IE of the GROUP CALL ANNOUNCEMENT message.
##### 9.3.2.4.2 Call Probe
###### 9.3.2.4.2.1 Call probe initiation
When in the \"S1: start-stop\" state, upon an indication from an MCVideo user
to initiate a group call for an MCVideo group ID, the MCVideo client:
1) shall store the MCVideo group ID as the MCVideo group ID of the call;
2) shall create a call type control state machine as described in clause
9.3.3.2;
3) shall generate a GROUP CALL PROBE message as specified in clause 17.1.2. In
the GROUP CALL PROBE message, the MCVideo client:
a) shall set the MCVideo group ID IE to the stored MCVideo group ID of the
call;
4) shall send the GROUP CALL PROBE message as specified in clause 9.3.1.1.1;
5) shall start timer TFG3 (call probe retransmission);
6) shall start timer TFG1 (wait for call announcement); and
7) shall enter the \"S2: waiting for call announcement\" state.
###### 9.3.2.4.2.2 Call probe retransmission
When in the \"S2: waiting for call announcement\" state, upon expiration of
TFG3 (call probe retransmission), the MCVideo client:
1) shall generate a GROUP CALL PROBE message as specified in clause 17.1.2. In
the GROUP CALL PROBE message, the MCVideo client:
a) shall set the MCVideo group ID IE to the stored MCVideo group ID of the
call;
2) shall send the GROUP CALL PROBE message as specified in clause 9.3.1.1.1;
3) shall start timer TFG3 (call probe retransmission); and
4) shall remain in the \"S2: waiting for call announcement\" state.
###### 9.3.2.4.2.3 Receiving GROUP CALL PROBE message when participating in
the ongoing call
When in the \"S3: part of ongoing call\" state, upon receiving a GROUP CALL
PROBE message with the MCVideo group ID IE matching the stored MCVideo group
ID of the call, the MCVideo client:
1) if the stored probe response value of the call is set to \"false\":
a) shall stop timer TFG2 (call announcement);
b) shall start timer TFG2 (call announcement) with value as specified in
clause 9.3.2.4.1.1.2; and
c) shall set the stored probe response of the call to \"true\"; and
2) shall remain in the \"S3: part of ongoing call\" state.
##### 9.3.2.4.3 Call setup
###### 9.3.2.4.3.1 Not receiving any response to GROUP CALL PROBE message
When in the \"S2: waiting for call announcement\" state, upon expiry of timer
TFG1 (wait for call announcement), the MCVideo client:
1) shall stop timer TFG3 (call probe retransmission), if running;
2) shall generate an SDP body as specified in clause 9.3.1.1.2 and store it as
the SDP body of the call;
3) shall generate a random number with uniform distribution between 0 and
65535 and store it as the call identifier of the call;
4) shall select refresh interval value and store it as the refresh interval of
the call;
5) shall store own MCVideo user ID as the originating MCVideo user ID of the
call;
6) shall store the current UTC time as the call start time of the call;
7) shall generate a GROUP CALL ANNOUNCEMENT message as specified in clause
17.1.3. In the GROUP CALL ANNOUNCEMENT message, the MCVideo client:
a) shall set the Call identifier IE to the stored call identifier of the call;
b) shall set the Call type IE to the stored current call type associated with
the call type control state machine;
c) shall set the Refresh interval IE to the stored refresh interval of the
call;
d) shall set the SDP IE to the stored SDP body of the call;
e) shall set the Originating MCVideo user ID IE to the stored originating
MCVideo user ID of the call;
f) shall set the MCVideo group ID IE to the stored MCVideo group ID of the
call;
g) shall set the Call start time IE to the stored call start time of the call;
h) shall set the Last call type change time IE to the stored last call type
change time of the call associated with call type control state machine;
i) shall set the Last user to change call type IE to last user to change call
type associated with call type control state machine; and
j) may include the Confirm mode indication IE;
8) shall send the GROUP CALL ANNOUNCEMENT message as specified in clause
9.3.1.1.1;
9) shall establish a media session based on the stored SDP body of the call;
10) shall start transmission control as originating transmission participant
as specified in clause a.b in 3GPP TS 24.581 [5];
11) shall start timer TFG6 (max duration) with value as specified in clause
9.3.2.4.1.2;
12) shall start timer TFG2 (call announcement) with value as specified in
clause 9.3.2.4.1.1.1; and
13) shall enter the \"S3: part of ongoing call\" state.
Note: In this release of the specification, the refresh interval of the call
is fixed to 10 seconds.
###### 9.3.2.4.3.2 Receiving a GROUP CALL ANNOUNCEMENT message
When in the \"S2: waiting for call announcement\" state, upon receiving a
GROUP CALL ANNOUNCEMENT message with the MCVideo group ID IE matching the
stored MCVideo group ID of the call, the MCVideo client:
1) shall stop timer TFG3 (call probe retransmission);
2) shall stop timer TFG1 (wait for call announcement);
3) shall store the value of the SDP IE of the GROUP CALL ANNOUNCEMENT message
as the SDP body of the call;
4) shall store the value of the Call identifier IE of the GROUP CALL
ANNOUNCEMENT message as the call identifier of the call;
5) shall store the value of the originating MCVideo user ID IE of the GROUP
CALL ANNOUNCEMENT message as the Originating MCVideo user ID of the call;
6) shall store the value of the Refresh interval IE of the GROUP CALL
ANNOUNCEMENT message as the refresh interval of the call;
7) shall store the value of the Call start time IE of the GROUP CALL
ANNOUNCEMENT message as the call start time of the call;
8) shall establish a media session based on the stored SDP body of the call;
9) shall start transmission control as terminating transmission participant as
specified in clause a.b in 3GPP TS 24.581 [5];
10) shall start timer TFG6 (max duration) with value as specified in clause
9.3.2.4.1.2;
11) shall start timer TFG2 (call announcement) with value as specified in
clause 9.3.2.4.1.1.1; and
12) shall enter the \"S3: part of ongoing call\" state.
###### 9.3.2.4.3.3 Receiving a GROUP CALL ANNOUNCEMENT message when not
participating in the ongoing call
When in the \"S1: start-stop\" state, upon receiving a GROUP CALL ANNOUNCEMENT
message with the MCVideo group ID IE not matching MCVideo group ID of the call
stored for other state machines, the MCVideo client:
1) shall store the value of the SDP IE of the GROUP CALL ANNOUNCEMENT message
as the SDP body of the call;
2) shall store the value of the Call identifier IE of the GROUP CALL
ANNOUNCEMENT message as the call identifier of the call;
3) shall store the value of the Originating MCVideo user ID IE of the GROUP
CALL ANNOUNCEMENT message as the originating MCVideo user ID of the call;
4) shall store the value of the Refresh interval IE of the GROUP CALL
ANNOUNCEMENT message as the refresh interval of the call;
5) shall store the value of the MCVideo group ID IE of the GROUP CALL
ANNOUNCEMENT message as the MCVideo group ID of the call;
6) shall store the value of the Call start time IE of the GROUP CALL
ANNOUNCEMENT message as the call start time of the call;
7) shall create a call type control state machine as described in clause
9.3.3.2;
8) if the terminating UE is configured that the terminating MCVideo user
acknowledgement is required upon a terminating call request reception:
a) shall start timer TFG4 (waiting for the user);
b) if the GROUP CALL ANNOUNCEMENT message contains the Confirm mode indication
IE, shall enter the \"S5: pending user action with confirm indication\" state;
and
c) if the GROUP CALL ANNOUNCEMENT message does not contains the Confirm mode
indication IE, shall enter the \"S4: pending user action without confirm
indication\" state; and
9) if the terminating UE is configured that the terminating MCVideo user
acknowledgement is not required upon a terminating call request reception:
a) shall establish a media session based on the stored SDP body of the call;
b) shall start transmission control as terminating transmission participant as
specified in clause a.b in 3GPP TS 24.581 [5];
c) if the GROUP CALL ANNOUNCEMENT message contains the Confirm mode indication
IE:
i) shall generate a GROUP CALL ACCEPT message as specified in clause 17.1.4.
In the GROUP CALL ACCEPT message, the MCVideo client:
A) shall set the Call identifier IE to the stored call identifier of the call;
B) shall set the Sending MCVideo user ID IE to own MCVideo user id;
C) shall set the Call type IE to the stored current call type associated with
the call type control state machine; and
D) shall set the MCVideo group ID IE to the stored MCVideo group ID of the
call; and
ii) shall send the GROUP CALL ACCEPT message as specified in clause 9.3.1.1.1;
d) shall start timer TFG6 (max duration) with value as specified in clause
9.3.2.4.1.2;
e) shall start timer TFG2 (call announcement) with value as specified in
clause 9.3.2.4.1.1.1; and
f) shall enter the \"S3: part of ongoing call\" state.
###### 9.3.2.4.3.4 MCVideo user accepts the terminating call with confirm
indication
When in the \"S5: pending user action with confirm indication\" state, upon
indication from the MCVideo user to accept the incoming group call, the
MCVideo client:
1) shall establish a media session based on the stored SDP body of the call;
2) shall start transmission control as terminating transmission participant as
specified in clause a.b in 3GPP TS 24.581 [5];
3) shall generate a GROUP CALL ACCEPT message as specified in clause 17.1.4.
In the GROUP CALL ACCEPT message, the MCVideo client:
a) shall set the Call identifier IE to the stored call identifier of the call;
b) shall set the Sending MCVideo user ID IE to own MCVideo user id;
c) shall set the Call type IE to the stored current call type associated with
the call type control state machine; and
d) shall set the MCVideo group ID IE to the stored MCVideo group ID of the
call; and
4) shall send the GROUP CALL ACCEPT message as specified in clause 9.3.1.1.1;
5) shall start timer TFG6 (max duration) with value as specified in clause
9.3.2.4.1.2;
6) shall start timer TFG2 (call announcement) with value as specified in
clause 9.3.2.4.1.1.1; and
7) shall enter the \"S3: part of ongoing call\" state.
###### 9.3.2.4.3.5 MCVideo user accepts the terminating call without confirm
indication
When in the \"S4: pending user action without confirm indication\" state, upon
an indication from the MCVideo user to accept the incoming group call, the
MCVideo client:
1) shall establish a media session based on the stored SDP body of the call;
2) shall start transmission control as terminating transmission participant as
specified in clause a.b in 3GPP TS 24.581 [5];
3) shall start timer TFG6 (max duration) with value as specified in clause
9.3.2.4.1.2;
4) shall start timer TFG2 (call announcement) with value as specified in
clause 9.3.2.4.1.1.1; and
5) shall enter the \"S3: part of ongoing call\" state.
###### 9.3.2.4.3.6 Receiving GROUP CALL ACCEPT message
When in the \"S3: part of ongoing call\" state, upon receiving a GROUP CALL
ACCEPT message with the MCVideo group ID IE matching the stored MCVideo group
ID of the call, the MCVideo client:
1) can inform the MCVideo user about the call acceptance; and
2) shall remain in the \"S3: part of ongoing call\" state.
###### 9.3.2.4.3.7 MCVideo user rejects the terminating call
When in the \"S5: pending user action with confirm indication\" state or the
\"S4: pending user action without confirm indication\" state, upon an
indication from the MCVideo user to reject the incoming group call, the
MCVideo client:
1) shall stop timer TFG4 (waiting for the user);
2) shall start timer TFG5 (not present incoming call announcements); and
3) shall enter the \"S6: ignoring incoming call announcements\" state.
###### 9.3.2.4.3.8 MCVideo user does not act on terminating call
When in the \"S5: pending user action with confirm indication\" state or the
\"S4: pending user action without confirm indication\" state, upon expiration
of timer TFG4 (waiting for the user), the MCVideo client:
1) shall start timer TFG5 (not present incoming call announcements); and
2) shall enter the \"S6: ignoring incoming call announcements\" state.
##### 9.3.2.4.4 Periodic group call announcement
###### 9.3.2.4.4.1 Sending periodic call announcement
When in the \"S3: part of ongoing call\" state, upon expiry of timer TFG2
(call announcement), the MCVideo client:
1) shall generate a GROUP CALL ANNOUNCEMENT message as specified in clause
17.1.3. In the GROUP CALL ANNOUNCEMENT message, the MCVideo client:
a) shall set the Call identifier IE to the stored call identifier of the call;
b) shall set the Call type IE to the stored current call type associated with
the call type control state machine;
c) shall set the Refresh interval IE to the stored refresh interval of the
call;
d) shall set the SDP IE to the stored SDP body of the call;
e) shall set the Originating MCVideo user ID IE to the stored originating
MCVideo user ID of the call;
f) shall set the MCVideo group ID IE to the stored MCVideo group ID of the
call;
g) shall set the Last call type change time IE to the stored last call type
change time of the call associated with call type control state machine;
h) shall set the Last user to change call type IE to last user to change call
type associated with call type control state machine;
i) shall set the Call start time IE to the stored call start time of the call;
j) if the stored probe response value of the call is set to \"true\", shall
include Probe response IE;
2) shall send the GROUP CALL ANNOUNCEMENT message as specified in clause
9.3.2.1.1.1;
3) if the stored probe response value of the call is set to \"true\", shall
set the stored probe response value of the call to \"false\";
4) shall start timer TFG2 (call announcement) with value as specified in
clause 9.3.2.4.1.1.1; and
5) shall remain in the \"S3: part of ongoing call\" state.
###### 9.3.2.4.4.2 Receiving periodic call announcement
When in the \"S3: part of ongoing call\" state, upon receiving a GROUP CALL
ANNOUNCEMENT message with the MCVideo group ID IE matching the stored MCVideo
group ID of the call, the Call start time IE being the same as the stored call
start time of the call, the Last call type change time IE being the same as
the stored last call type change time of the call associated with the call
type control state machine, the Last user to change call type IE being the
same as the stored last user to change call type of the call associated with
the call type control state machine and the Call identifier IE being the same
as the stored call identifier of the call and Call type IE same as the stored
current call type associated with the call type control state machine and:
1) if the stored probe response value of the call is set to \"true\" and GROUP
CALL ANNOUNCEMENT message contains Probe response IE; or
2) if the stored probe response value of the call is set to \"false\":
the MCVideo client,
1) shall stop timer TFG2 (call announcement);
2) shall start timer TFG2 (call announcement) with value as specified in
clause 9.3.2.4.1.1.1;
3) shall set the stored probe response of the call to \"false\", if set to
\"true\"; and
4) shall remain in the \"S3: part of ongoing call\" state.
##### 9.3.2.4.5 Call release
###### 9.3.2.4.5.1 MCVideo user leaves the call when GROUP CALL ANNOUNCEMENT
was sent or received
When in the \"S3: part of ongoing call\" state, the \"S5: pending user action
with confirm indication\" state, or the \"S4: pending user action without
confirm indication\" state, upon an indication from the MCVideo user to
release the group call, the MCVideo client:
1) shall release the media session, if established;
2) shall stop timer TFG4 (waiting for the user), if running;
3) shall stop timer TFG2 (call announcement), if running;
4) shall start timer TFG5 (not present incoming call announcements); and
5) shall enter the \"S6: ignoring incoming call announcements\" state.
###### 9.3.2.4.5.2 Receiving GROUP CALL ANNOUNCEMENT message for rejected or
released call
When in the \"S6: ignoring incoming call announcements\" state, upon receiving
a GROUP CALL ANNOUNCEMENT message with the MCVideo group ID IE matching the
stored MCVideo group ID of the call, the MCVideo client:
1) shall store the value of the SDP IE of the GROUP CALL ANNOUNCEMENT message
as the SDP body of the call;
2) shall store the value of the Call identifier IE of the GROUP CALL
ANNOUNCEMENT message as the call identifier of the call;
3) shall store the value of the Originating MCVideo user ID IE of the GROUP
CALL ANNOUNCEMENT message as the originating MCVideo user ID of the call;
4) shall store the value of the Refresh interval IE of the GROUP CALL
ANNOUNCEMENT message as the refresh interval of the call;
5) shall store the value of the Call start time IE of the GROUP CALL
ANNOUNCEMENT message as the call start time of the call;
6) shall stop timer TFG5 (not present incoming call announcements);
7) shall start timer TFG5 (not present incoming call announcements); and
8) shall remain in the \"S6: ignoring incoming call announcements\" state.
###### 9.3.2.4.5.3 MCVideo user initiates originating call for rejected or
released call
When in the \"S6: ignoring incoming call announcements\" state, upon an
indication from the MCVideo user to initiate a group call for an MCVideo group
ID matching the stored MCVideo group ID of the call, the MCVideo client:
1) stop timer TFG5 (not present incoming call announcements);
2) shall establish a media session based on the stored SDP body of the call;
3) shall start transmission control as terminating transmission participant as
specified in clause a.b in 3GPP TS 24.581 [5];
4) shall start timer TFG6 (max duration) with value as specified in clause
9.3.2.4.1.2;
5) shall start timer TFG2 (call announcement) with value as specified in
clause 9.3.2.4.1.1.1; and
6) shall enter the \"S3: part of ongoing call\" state.
###### 9.3.2.4.5.4 No GROUP CALL ANNOUNCEMENT messages for rejected or
released call
When in the \"S6: ignoring incoming call announcements\" state, upon
expiration of timer TFG5 (not present incoming call announcements), the
MCVideo client:
1) shall release the stored SDP body of the call;
2) shall release the stored call identifier of the call;
3) shall release the stored originating MCVideo user ID of the call;
4) shall release the stored refresh interval of the call;
5) shall release the stored MCVideo group ID of the call;
6) shall release the call start time of the call;
7) shall destroy the call type control state machine; and
8) shall enter the \"S1: start-stop\" state.
###### 9.3.2.4.5.5 MCVideo user leaves the call when GROUP CALL PROBE was sent
When in the \"S2: waiting for call announcement\" state, upon an indication
from the MCVideo user to release the group call, the MCVideo client:
1) shall stop timer TFG3 (call probe retransmission); and
2) shall enter the \"S7: Waiting for call announcement after call release\"
state.
###### 9.3.2.4.5.6 MCVideo user initiates originating call for released call
When in the \"S7: Waiting for call announcement after call release\" state,
upon an indication from the MCVideo user to initiate a group call for an
MCVideo group ID matching the stored MCVideo group ID of the call, the MCVideo
client:
1) shall stop timer TFG1 (wait for call announcement);
2) shall generate a GROUP CALL PROBE message as specified in clause 17.1.2. In
the GROUP CALL PROBE message, the MCVideo client:
a) shall set the MCVideo group ID IE to the stored MCVideo group ID of the
call; and
3) shall send the GROUP CALL PROBE message as specified in clause 9.3.1.1.1;
4) shall start timer TFG3 (call probe retransmission);
5) shall start timer TFG1 (wait for call announcement); and
6) shall enter the \"S2: waiting for call announcement\" state.
###### 9.3.2.4.5.7 Receiving GROUP CALL ANNOUNCEMENT message for released call
When in the \"S7: Waiting for call announcement after call release\" state,
upon receiving a GROUP CALL ANNOUNCEMENT message with the MCVideo group ID IE
matching the stored MCVideo group ID of the call, the MCVideo client:
1) shall store the value of the SDP IE of the GROUP CALL ANNOUNCEMENT message
as the SDP body of the call;
2) shall store the value of the Call identifier IE of the GROUP CALL
ANNOUNCEMENT message as the call identifier of the call;
3) shall store the value of the Originating MCVideo user ID IE of the GROUP
CALL ANNOUNCEMENT message as the originating MCVideo user ID of the call;
4) shall store the value of the Refresh interval IE of the GROUP CALL
ANNOUNCEMENT message as the refresh interval of the call;
5) shall store the value of the Call start time IE of the GROUP CALL
ANNOUNCEMENT message as the call start time of the call;
6) shall stop timer TFG1 (wait for call announcement);
7) shall start timer TFG5 (not present incoming call announcements); and
8) shall enter the \"S6: ignoring incoming call announcements\" state.
###### 9.3.2.4.5.8 No GROUP CALL ANNOUNCEMENT messages for released call
When in the \"S7: Waiting for call announcement after call release\" state,
upon expiration of timer TFG1 (wait for call announcement), the MCVideo
client:
1) shall release the stored MCVideo group ID of the call;
2) shall destroy the call type control state machine; and
3) shall enter the \"S1: start-stop\" state.
###### 9.3.2.4.5.9 Max duration reached
When in the \"S3: part of ongoing call\" state, upon expiration of timer TFG6
(max duration), the MCVideo client:
1) shall release the media session;
2) shall stop timer TFG2 (call announcement), if running;
3) shall start timer TFG5 (not present incoming call announcements); and
4) shall enter the \"S6: ignoring incoming call announcements\" state.
##### 9.3.2.4.6 Merge of calls
###### 9.3.2.4.6.1 Merge of two calls
When in the \"S3: part of ongoing call\" state, upon receiving a GROUP CALL
ANNOUNCEMENT message with the MCVideo group ID IE matching the stored MCVideo
group ID of the call and:
1) the Originating MCVideo user ID IE is different from the stored originating
MCVideo user ID of the call; or
2) the Call identifier IE is different from the stored call identifier of the
call;
then:
1) if the stored current call type associated with the call type control state
machine is \"BASIC GROUP CALL\" and the value of the Call type IE of GROUP
CALL ANNOUNCEMENT message is either \"IMMINENT PERIL GROUP CALL\" or
\"EMERGENCY GROUP CALL\";
2) if the stored current call type associated with the call type control state
machine is \"IMMINENT PERIL GROUP CALL\" and the value of the Call type IE of
GROUP CALL ANNOUNCEMENT message is \"EMERGENCY GROUP CALL\";
3) if the stored current call type associated with the call type control state
machine being equal to the Call type IE of the GROUP CALL ANNOUNCEMENT message
and the Call start time IE of the GROUP CALL ANNOUNCEMENT message being lower
than the stored call start time of the call; or
4) if the stored current call type associated with the call type control state
machine being equal to the Call type IE of the GROUP CALL ANNOUNCEMENT message
and the Call start time IE of the GROUP CALL ANNOUNCEMENT message being equal
to the stored call start time of the call and the Call identifier IE of the
GROUP CALL ANNOUNCEMENT message being lower than the stored call identifier of
the call;
the MCVideo client:
1) shall store the value of the SDP IE of the GROUP CALL ANNOUNCEMENT message
as the SDP body of the call;
2) shall store the value of the Call identifier IE of the GROUP CALL
ANNOUNCEMENT message as the call identifier of the call;
3) shall store the value of the Originating MCVideo user ID IE of the GROUP
CALL ANNOUNCEMENT message as the originating MCVideo user ID of the call;
4) shall store the value of the Refresh interval IE of the GROUP CALL
ANNOUNCEMENT message as the refresh interval of the call;
5) shall store the value of the Call start time IE of the GROUP CALL
ANNOUNCEMENT message as the call start time of the call;
6) shall adjust the media session based on the stored SDP body of the call and
restart transmission control as terminating transmission participant as
specified in clause a.b in 3GPP TS 24.581 [5];
7) shall stop timer TFG6 (max duration);
8) shall start timer TFG6 (max duration) with value as specified in clause
9.3.2.4.1.2;
9) shall stop timer TFG2 (call announcement); and
10) shall start timer TFG2 (call announcement) with value according to rules
and procedures as specified in clause 9.3.2.4.1.1.1; and
11) shall remain in the \"S3: part of ongoing call\" state.
##### 9.3.2.4.7 Error handling
###### 9.3.2.4.7.1 Unexpected MONP message received
Upon receiving an unexpected MONP message or MONP MCVideo message in a state
where there is no handling specified for the MONP message or the MONP MCVideo
message, the MCVideo client shall discard this message.
###### 9.3.2.4.7.2 Unexpected indication from MCVideo user
Upon receiving an indication from the MCVideo user in a state where there is
no handling specified for the indication, the MCVideo client shall ignore the
indication.
###### 9.3.2.4.7.3 Unexpected expiration of a timer
Upon expiration of a timer in a state where there is no handling specified for
expiration of the timer, the MCVideo client shall ignore the expiration of the
timer.
### 9.3.3. Call type control
#### 9.3.3.1 General
This state machine exists in parallel with the basic call control state
machine for off-network group call as specified in clause 9.3.2.2.
#### 9.3.3.2 Call type control state machine
The Figure 9.3.3.2-1 gives an overview of the states and transitions of the
state machine.
Figure 9.3.3.2-1: Call type control state machine
The following pieces of information are associated with the call type control
state machine:
a) the stored current call type;
b) the stored current ProSe per-packet priority;
c) the stored last call type change time of the call; and
d) the stored last user to change call type of the call.
When sending the message, MCVideo client indicates the stored current ProSe
per-packet priority (as described in 3GPP TS 24.483 [4]) associated with the
call type control state machine to the lower layers.
#### 9.3.3.3 Call type control states
##### 9.3.3.3.1 T0: waiting for call to establish
This state is the start state of this state machine.
##### 9.3.3.3.2 T1: in-progress emergency group call
This state exists for UE, when the UE is part of an in-progress emergency
group call.
##### 9.3.3.3.3 T2: in-progress basic group call
This state exists for UE, when the UE is part of an in-progress basic group
call.
##### 9.3.3.3.4 T3: in-progress imminent peril group call
This state exists for UE, when the UE is part of an in-progress imminent peril
group call.
#### 9.3.3.4 Procedures
##### 9.3.3.4.1 General
###### 9.3.3.4.1.1 Implicit downgrade (emergency) timer calculation
The MCVideo client shall set the TFG13 (implicit downgrade emergency) timer as
follows:
1) TFG13 (implicit downgrade emergency) = X -- (Y -- Z) seconds, where:
a) X = value of \"/_\ _/\/OffNetwork/MCVideo/EmergencyCallCancel\" leaf
node present in group configuration as specified in 3GPP TS 24.483 [4];
b) Y = current UTC time, in seconds since midnight UTC of January 1, 1970 (not
counting leap seconds); and
c) Z = Last call type change time IE of the GROUP CALL ANNOUNCEMENT message or
the Last call type change time IE of the GROUP CALL PRIORITY ENDED message.
###### 9.3.3.4.1.2 Implicit downgrade (imminent peril) timer calculation
The MCVideo client shall set the TFG14 (implicit downgrade imminent peril)
timer as follows:
1) TFG14 (implicit downgrade imminent peril) = X -- (Y -- Z) seconds, where:
a) X = value of \"/_\ _/\/OffNetwork/MCVideo/ImminentPerilCallCancel\"
leaf node present in group configuration as specified in 3GPP TS 24.483 [4];
b) Y = current UTC time, in seconds since midnight UTC of January 1, 1970 (not
counting leap seconds); and
c) Z = Last call type change time IE of the GROUP CALL ANNOUNCEMENT message or
the Last call type change time IE of the GROUP CALL PRIORITY ENDED message.
##### 9.3.3.4.2 User initiated the call probe
When in the \"T0: waiting for the call to establish \" state, upon an
indication from an MCVideo user to initiate a group call probe for an MCVideo
group, the MCVideo client:
1) if the stored emergency state associated with emergency alert state machine
described in 11.3.2.2 is set to \"true\" and the value of \"/_\
_/\/Common/AllowedEmergencyCall\" leaf node present in group
configuration as specified in 3GPP TS 24.483 [4] is set to \"true\":
a) shall set the stored current call type to \"EMERGENCY GROUP CALL\"; and
b) shall set the stored current ProSe per-packet priority to value
corresponding to MCVideo off-network emergency group call as described in 3GPP
TS 24.483 [4];
2) if the stored emergency state associated with emergency alert state machine
described in 11.3.2.2 is set to \"false\", and:
a) if the user initiates an MCVideo emergency call and the values of \"/_\
_/_\ _/Common/MCVideoGroupCall/EmergencyCall/Enabled\" leaf node present
in the user profile and \"/_\ _/\/Common/AllowedEmergencyCall\" leaf
node present in group configuration as specified in 3GPP TS 24.483 [4] are set
to \"true\":
i) shall set the stored current call type to \"EMERGENCY GROUP CALL\"; and
ii) shall set the stored current ProSe per-packet priority to value
corresponding to MCVideo off-network emergency group call as described in 3GPP
TS 24.483 [4];
b) if the user initiates an MCVideo imminent peril group call and the value of
\"/_\ _/_\ _/Common/MCVideoGroupCall/ImminentPerilCall/Authorised\" leaf
node present in the user profile \"/_\
_/\/Common/AllowedImminentPerilCall \" leaf node present in group
configuration as specified in 3GPP TS 24.483 [4] are set to \"true\":
i) shall set the stored current call type to \"IMMINENT PERIL GROUP CALL\";
and
ii) shall set the stored current ProSe per-packet priority to value
corresponding to MCVideo off-network imminent peril group call as described in
3GPP TS 24.483 [4]; and
c) if the user initiates an MCVideo group call which is not an MCVideo
emergency call and which is not an MCVideo imminent peril group call:
i) shall set the stored current call type to \"BASIC GROUP CALL\"; and
ii) shall set the stored current ProSe per-packet priority to value
corresponding to MCVideo off-network basic group call as described in 3GPP TS
24.483 [4];
3) shall set the stored last call type change time to current UTC time;
4) shall set the last user to change call type to own MCVideo user ID; and
5) shall remain in \"T0: waiting for the call to establish\" state.
##### 9.3.3.4.3 Received GROUP CALL ANNOUNCEMENT message as a response to
GROUP CALL PROBE message
When in the \"T0: waiting for the call to establish \" state, upon receipt of
a GROUP CALL ANNOUNCEMENT message as a response to GROUP CALL PROBE message,
the MCVideo client:
1) if the Call type IE of the received GROUP CALL ANNOUNCEMENT message is set
to \"EMERGENCY GROUP CALL\":
a) shall set the stored current call type to \"EMERGENCY GROUP CALL\";
b) shall set the stored current ProSe per-packet priority to value
corresponding to MCVideo off-network emergency group call as described in 3GPP
TS 24.483 [4];
c) shall set the stored last call type change time to the Last call type
change time IE of the GROUP CALL ANNOUNCEMENT message;
d) shall set the stored last user to change call type to the Last user to
change call type IE of the GROUP CALL ANNOUNCEMENT message;
e) shall start timer TFG13 (implicit downgrade emergency) with value as
specified in clause 9.3.3.4.1.1; and
f) shall enter \"T1: in-progress emergency group call\" state;
2) if the Call type IE of the received GROUP CALL ANNOUNCEMENT message is set
to \"IMMINENT PERIL GROUP CALL\", and if the stored current call type is other
than \"EMERGENCY GROUP CALL\":
a) shall set the stored current call type to \"IMMINENT PERIL GROUP CALL\";
b) shall set the stored current ProSe per-packet priority to value
corresponding to MCVideo off-network imminent peril group call as described in
3GPP TS 24.483 [4];
c) shall set the stored last call type change time to the Last call type
change time IE of the GROUP CALL ANNOUNCEMENT message;
d) shall set the stored last user to change call type to the Last user to
change call type IE of the GROUP CALL ANNOUNCEMENT message;
e) shall start timer TFG14 (implicit downgrade imminent peril) with value as
specified in clause 9.3.3.4.1.2; and
f) shall enter \"T3: in-progress imminent peril group call\" state; and
3) if the Call type IE of the received GROUP CALL ANNOUNCEMENT message is set
to \"BASIC GROUP CALL\", and if the stored current call type is \"BASIC GROUP
CALL\":
a) shall set the stored last call type change time to the Last call type
change time IE of the GROUP CALL ANNOUNCEMENT message;
b) shall set the stored last user to change call type to the Last user to
change call type IE of the GROUP CALL ANNOUNCEMENT message; and
c) shall enter \"T2: in-progress basic group call\" state.
##### 9.3.3.4.4 Received GROUP CALL ANNOUNCEMENT with MCVideo user
acknowledgement required
When in the \"T0: waiting for the call to establish\" state, upon receipt of a
GROUP CALL ANNOUNCEMENT message by an idle MCVideo client when MCVideo user
acknowledgement is required, the MCVideo client:
1) if the Call type IE of the received GROUP CALL ANNOUNCEMENT message is set
to \"EMERGENCY GROUP CALL\":
a) shall set the stored current call type to \"EMERGENCY GROUP CALL\"; and
b) shall set the stored current ProSe per-packet priority to value
corresponding to MCVideo off-network emergency group call as described in 3GPP
TS 24.483 [4];
2) if the Call type IE of the received GROUP CALL ANNOUNCEMENT message is set
to \"IMMINENT PERIL GROUP CALL\":
a) shall set the stored current call type to \"IMMINENT PERIL GROUP CALL\";
and
b) shall set the stored current ProSe per-packet priority to value
corresponding to MCVideo off-network imminent peril group call as described in
3GPP TS 24.483 [4];
3) if the Call type IE of the received GROUP CALL ANNOUNCEMENT message is set
to \"BASIC GROUP CALL\":
a) shall set the stored current call type to \"BASIC GROUP CALL\";
b) shall set the stored current ProSe per-packet priority to value
corresponding to MCVideo off-network basic group call as described in 3GPP TS
24.483 [4];
4) shall set the stored last call type change time to the Last call type
change time IE of the GROUP CALL ANNOUNCEMENT message;
5) shall set the last user to change call type to the Last user to change call
type IE of the GROUP CALL ANNOUNCEMENT message; and
6) shall remain in \"T0: waiting for the call to establish\" state.
##### 9.3.3.4.5 Received GROUP CALL ANNOUNCEMENT without MCVideo user
acknowledgement required
When in the \"T0: waiting for the call to establish\" state, upon receipt of a
GROUP CALL ANNOUNCEMENT message by an idle MCVideo client when MCVideo user
acknowledgement is not required, the MCVideo client:
1) shall set the stored last call type change time to the Last call type
change time IE of the GROUP CALL ANNOUNCEMENT message;
2) shall set the last user to change call type to the Last user to change call
type IE of the GROUP CALL ANNOUNCEMENT message;
3) if the Call type IE of the received GROUP CALL ANNOUNCEMENT message is set
to \"EMERGENCY GROUP CALL\":
a) shall set the stored current call type to \"EMERGENCY GROUP CALL\";
b) shall set the stored current ProSe per-packet priority to value
corresponding to MCVideo off-network emergency group call as described in 3GPP
TS 24.483 [4];
c) shall start timer TFG13 (implicit downgrade emergency) with value as
specified in clause 9.3.3.4.1.1; and
d) shall enter \"T1: in-progress emergency group call\" state;
4) if the Call type IE of the received GROUP CALL ANNOUNCEMENT message is set
to \"IMMINENT PERIL GROUP CALL\":
a) shall set the stored current call type to \"IMMINENT PERIL GROUP CALL\";
b) shall set the stored current ProSe per-packet priority to value
corresponding to MCVideo off-network imminent peril group call as described
in3GPP TS 24.483 [4];
c) shall start timer TFG14 (implicit downgrade imminent peril) with value as
specified in clause 9.3.3.4.1.2; and
d) shall enter \"T3: in-progress imminent peril group call\" state; and
5) if the Call type IE of the received GROUP CALL ANNOUNCEMENT message is set
to \"BASIC GROUP CALL\":
a) shall set the stored current call type to \"BASIC GROUP CALL\";
b) shall set the stored current ProSe per-packet priority to value
corresponding to MCVideo off-network basic group call as described in 3GPP TS
24.483 [4]; and
c) shall enter \"T2: in-progress basic group call\" state.
##### 9.3.3.4.6 Call started
When in state \"T0: waiting for the call to establish\", if:
a) the MCVideo user accepts the call when MCVideo user acknowledgement is
required; or
b) the MCVideo client sends a GROUP CALL ANNOUNCEMENT message on expiry of
timer TFG1 (wait for call announcement) associated with the basic call control
state machine;
the MCVideo client:
1) if the stored current call type is set to \"EMERGENCY GROUP CALL\"
a) shall start timer TFG13 (implicit downgrade emergency) with value as
specified in clause 9.3.3.4.1.1; and
b) shall enter \"T1: in-progress emergency group call\" state;
2) if the stored current call type is set to \"IMMINENT PERIL GROUP CALL\"
a) shall start timer TFG14 (implicit downgrade imminent peril) with value as
specified in clause 9.3.3.4.1.2; and
b) shall enter \"T3: in-progress imminent peril group call\" state; or
3) if the stored current call type is set to \"BASIC GROUP CALL\"
a) shall enter \"T2: in-progress basic group call\" state.
##### 9.3.3.4.7 Upgrade call
###### 9.3.3.4.7.1 Originating user upgrading the call
When in the \"T2: in-progress basic group call\" state, upon receiving an
indication from the user to upgrade the call to \"IMMINENT PERIL GROUP CALL\"
or \"EMERGENCY GROUP CALL\" or when in the \"T3: in-progress imminent peril
group call\" state, upon receiving an indication from the user to upgrade the
call to \"EMERGENCY GROUP CALL\", the MCVideo client:
1) if the user request is to upgrade the call to \"EMERGENCY GROUP CALL\" and
the value of \"/_\ _/_\ _/OffNetwork/EmergencyCallChange\" leaf node
present in the user profile as specified in 3GPP TS 24.483 [4] is set to
\"true\":
a) shall set the stored current call type to \"EMERGENCY GROUP CALL\";
b) shall set the stored current ProSe per-packet priority to value
corresponding to MCVideo off-network emergency group call as described in 3GPP
TS 24.483 [4];
c) shall start timer TFG13 (implicit downgrade emergency) with value as
specified in clause 9.3.3.4.1.1;
d) shall stop timer TFG14 (implicit downgrade imminent peril), if running; and
e) shall enter \"T1: in-progress emergency group call\" state;
2) if the user request is to upgrade the call to \"IMMINENT PERIL GROUP CALL\"
and the value of \"/_\ _/_\ _/OffNetwork/ ImminentPerilCallChange\" leaf
node present in the user profile as specified in 3GPP TS 24.483 [4] set to
\"true\":
a) shall set the stored current call type to \"IMMINENT PERIL GROUP CALL\";
b) shall set the stored current ProSe per-packet priority to value
corresponding to MCVideo off-network imminent peril group call as described in
3GPP TS 24.483 [4];
c) shall start timer TFG14 (implicit downgrade imminent peril) with value as
specified in clause 9.3.3.4.1.2 and
d) shall enter \"T3: in-progress imminent peril group call\" state;
3) shall store the current UTC time as last call type change time of the call;
4) shall store own MCVideo user ID as last user to change call type of the
call;
5) shall generate a GROUP CALL ANNOUNCEMENT message as specified in clause
17.1.3. In the GROUP CALL ANNOUNCEMENT message, the MCVideo client:
a) shall set the Call identifier IE to the stored call identifier of the call
associated with the basic call control state machine;
b) shall set the Call type IE to the stored current call type;
c) shall set the Refresh interval IE to the stored refresh interval of the
call associated with the basic call control state machine;
d) shall set the SDP IE to the stored SDP body of the call associated with the
basic call control state machine;
e) shall set the Originating MCVideo user ID IE to the stored originating
MCVideo user ID of the call associated with the basic call control state
machine;
f) shall set the MCVideo group ID IE to the stored MCVideo group ID of the
call associated with the basic call control state machine;
g) shall set the call start time IE to the stored call start time of the call;
h) shall set the Last call type change time IE to the stored last call type
change time of the call; and
i) shall set the Last user to change call type IE to the stored last user to
change call type of the call; and
6) shall send the GROUP CALL ANNOUNCEMENT message as specified in clause
9.3.1.1.1;
###### 9.3.3.4.7.2 Terminating UE receiving a GROUP CALL ANNOUNCEMENT message
when participating in the ongoing call
When in the \"T1: in-progress emergency group call\" state or \"T2: in-
progress basic group call\" state or \"T3: in-progress imminent peril group
call\" state, upon receiving a GROUP CALL ANNOUNCEMENT message with the
MCVideo group ID IE matching with MCVideo group ID of the ongoing call and the
Call Identifier IE being the same as the stored call identifier of the call,
the MCVideo client:
1) if the stored last user to change call type of the call is same as the Last
user to change call type IE of the GROUP CALL ANNOUNCEMENT message and the
stored last call type change time is smaller than Last call type change time
IE of the GROUP CALL ANNOUNCEMENT message:
a) shall set the stored last call type change time of the call to Last call
type change time IE of the GROUP CALL ANNOUNCEMENT message;
b) if the Call type IE of the received GROUP CALL ANNOUNCEMENT message is set
to \"EMERGENCY GROUP CALL\" and the stored call type is other than \"EMERGENCY
GROUP CALL\":
i) shall set the stored current call type to \"EMERGENCY GROUP CALL\";
ii) shall set the stored current ProSe per-packet priority to value
corresponding to MCVideo off-network emergency group call as described in 3GPP
TS 24.483 [4];
iii) shall stop timer TFG14 (implicit downgrade imminent peril), if running;
iv) shall start timer TFG13 (implicit downgrade emergency) with value as
specified in clause 9.3.3.4.1.1; and
v) shall enter \"T1: in-progress emergency group call\" state;
c) if the Call type IE of the received GROUP CALL ANNOUNCEMENT message is set
to \"IMMINENT PERIL GROUP CALL\" and the stored call type is other than
\"IMMINENT PERIL GROUP CALL\":
i) shall set the stored current call type to \"IMMINENT PERIL GROUP CALL\";
ii) shall set the stored current ProSe per-packet priority to value
corresponding to MCVideo off-network imminent peril group call as described in
3GPP TS 24.483 [4];
iii) shall start timer TFG14 (implicit downgrade imminent peril) with value as
specified in clause 9.3.3.4.1.2; and
iv) shall enter \"T3: in-progress imminent peril group call\" state; and
d) if the Call type IE of the received GROUP CALL ANNOUNCEMENT message is set
to \"BASIC GROUP CALL\" and the stored call type is other than \"BASIC GROUP
CALL\":
i) shall set the stored current call type to \"BASIC GROUP CALL\";
ii) shall set the stored current ProSe per-packet priority to value
corresponding to MCVideo off-network basic group call as described in 3GPP TS
24.483 [4];
iii) shall stop timer TFG13 (implicit downgrade), if running; and
iv) shall enter \"T2: in-progress basic group call\" state; and
2) if the stored last user to change call type of the call is different from
the Last user to change call type IE of the GROUP CALL ANNOUNCEMENT message
and:
a) if the stored call type is same as Call type IE in the received GROUP CALL
ANNOUNCEMENT message and the stored last call type change time is smaller than
Last call type change time IE of the GROUP CALL ANNOUNCEMENT message:
i) shall set the stored last call type change time of the call to Last call
type change time IE of the GROUP CALL ANNOUNCEMENT message; and
ii) shall set the stored last user to change call type of the call to Last
user to change call type IE of the GROUP CALL ANNOUNCEMENT message;
b) if the Call type IE of the received GROUP CALL ANNOUNCEMENT message is set
to \"EMERGENCY GROUP CALL\" and the stored call type is other than \"EMERGENCY
GROUP CALL\":
i) shall set the stored last call type change time of the call to Last call
type change time IE of the GROUP CALL ANNOUNCEMENT message;
ii) shall set the stored last user to change call type of the call to Last
user to change call type IE of the GROUP CALL ANNOUNCEMENT message;
iii) shall set the stored current call type to \"EMERGENCY GROUP CALL\";
iv) shall set the stored current ProSe per-packet priority to value
corresponding to MCVideo off-network emergency group call as described in 3GPP
TS 24.483 [4];
v) shall stop timer TFG14 (implicit downgrade imminent peril), if running;
vi) shall start timer TFG13 (implicit downgrade emergency) with value as
specified in clause 9.3.3.4.1.1; and
vii) shall enter \"T1: in-progress emergency group call\" state; and
c) if the Call type IE of the received GROUP CALL ANNOUNCEMENT message is set
to \"IMMINENT PERIL GROUP CALL\" and the stored call type is \"BASIC GROUP
CALL\":
i) shall set the stored last call type change time of the call to Last call
type change time IE of the GROUP CALL ANNOUNCEMENT message;
ii) shall set the stored last user to change call type of the call to Last
user to change call type IE of the GROUP CALL ANNOUNCEMENT message;
iii) shall set the stored current call type to \"IMMINENT PERIL GROUP CALL \";
iv) shall set the stored current ProSe per-packet priority to value
corresponding to MCVideo off-network imminent peril group call as described in
3GPP TS 24.483 [4];
v) shall start timer TFG14 (implicit downgrade imminent peril) with value as
specified in clause 9.3.3.4.1.2; and
vi) shall enter \"T3: in-progress imminent peril group call\" state.
##### 9.3.3.4.8 Downgrade call
###### 9.3.3.4.8.1 Originating user downgrading emergency group call
When in the \"T1: in-progress emergency group call\" state, upon receiving an
indication from:
1) the MCVideo user who upgraded the MCVideo group call; or
2) an authorized MCVideo user with the value of \"/_\ _/_\
_/Common/MCVideoGroupCall/EmergencyCall/CancelMCVideoGroup\" leaf node
present in the user profile as specified in 3GPP TS 24.483 [4] is set to
\"true\",
to downgrade \"EMERGENCY GROUP CALL\", the MCVideo client:
1) shall set the stored current call type to \"BASIC GROUP CALL\";
2) shall set the stored current ProSe per-packet priority to value
corresponding to MCVideo off-network basic group call as described in 3GPP TS
24.483 [4];
3) shall set current UTC time as last call type change time of the call;
4) shall store own MCVideo user ID as last user to change call type of the
call;
5) shall generate a GROUP CALL EMERGENCY END message as specified in clause
17.1.13. In the GROUP CALL EMERGENCY END message, the MCVideo client:
a) shall set the Call identifier IE to the stored call identifier of the call
associated with the basic call control state machine;
b) shall set the Originating MCVideo user ID IE to the stored originating
MCVideo user ID of the call associated with the basic call control state
machine;
c) shall set the MCVideo group ID IE to the stored MCVideo group ID of the
call associated with the basic call control state machine;
d) shall set the Last call type change time IE to the stored last call type
change time of the call; and
e) shall set the Last user to change call type IE to the stored last user to
change call type of the call;
6) shall send the GROUP CALL EMERGENCY END message as specified in clause
9.3.1.1.1;
7) shall stop timer TFG13 (implicit downgrade emergency);
8) shall initialize the counter CFG11 (emergency end retransmission) with
value set to 1;
9) shall start timer TFG11 (emergency end retransmission); and
10) shall enter the \"T2: in-progress basic group call\" state.
###### 9.3.3.4.8.2 Retransmitting GROUP CALL EMERGENCY END
When in the \"T2: in-progress basic group call\" state, upon expiry of timer
TFG11 (emergency end retransmission), the MCVideo client:
1) shall generate a GROUP CALL EMERGENCY END message as specified in clause
17.1.13. In the GROUP CALL EMERGENCY END message, the MCVideo client:
a) shall set the Call identifier IE to the stored call identifier of the call
associated with the basic call control state machine;
b) shall set the Originating MCVideo user ID IE to the stored originating
MCVideo user ID of the call associated with the basic call control state
machine;
c) shall set the MCVideo group ID IE to the stored MCVideo group ID of the
call associated with the basic call control state machine;
d) shall set the Last call type change time IE to the stored last call type
change time of the call; and
e) shall set the Last user to change call type IE to the stored last user to
change call type of the call;
2) shall send the GROUP CALL EMERGENCY END message as specified in clause
9.3.1.1.1;
3) shall increment the value of the counter CFG11 (emergency end
retransmission) by 1;
4) shall start timer TFG11 (emergency end retransmission) if the value of the
associated counter CFG11 (emergency end retransmission) is less than the upper
limit; and
5) shall remain in \"T2: in-progress basic group call\" state.
###### 9.3.3.4.8.3 Terminating user downgrading emergency group call
When in the \"T1: in-progress emergency group call\" state, upon receiving
GROUP CALL EMERGENCY END message, the MCVideo client:
1) shall set the stored last call type change time to the Last call type
change time IE of the received GROUP CALL EMERGENCY END message;
2) shall set the stored last user to change call type to the Last user to
change call type IE of the received GROUP CALL EMERGENCY END message;
3) shall set the stored current call type to \"BASIC GROUP CALL\";
4) shall set the stored current ProSe per-packet priority to value
corresponding to MCVideo off-network basic group call as described in 3GPP TS
24.483 [4];
5) shall stop timer TFG13 (implicit downgrade emergency); and
6) shall enter the \"T2: in-progress basic group call\" state.
###### 9.3.3.4.8.4 Originating user downgrading imminent peril group call
When in the \"T3: in-progress imminent peril group call\" state, upon
receiving an indication from:
1) the MCVideo user who upgraded the call; or
2) an authorized user with the value of \"/_\ _/_\
_/Common/MCVideoGroupCall/ImminentPerilCall/Cancel\" leaf node present in
the user profile as specified in 3GPP TS 24.483 [4] is set to \"true\",
to downgrade \"IMMINENT PERIL GROUP CALL\", the MCVideo client:
1) shall set the stored current call type to \"BASIC GROUP CALL\";
2) shall set the stored current ProSe per-packet priority to value
corresponding to MCVideo off-network basic group call as described in 3GPP TS
24.483 [4];
3) shall set current UTC time as last call type change time of the call;
4) shall store own MCVideo user ID as last user to change call type of the
call;
5) shall generate a GROUP CALL IMMINENT PERIL END message as specified in
clause 17.1.12. In the GROUP CALL IMMINENT PERIL END message, the MCVideo
client:
a) shall set the Call identifier IE to the stored call identifier of the call
associated with the basic call control state machine;
b) shall set the Originating MCVideo user ID IE to the stored originating
MCVideo user ID of the call associated with the basic call control state
machine;
c) shall set the MCVideo group ID IE to the stored MCVideo group ID of the
call associated with the basic call control state machine;
d) shall set the Last call type change time IE to the stored last call type
change time of the call; and
e) shall set the Last user to change call type IE to the stored last user to
change call type of the call;
6) shall send the GROUP CALL IMMINENT PERIL END message as specified in clause
9.3.1.1.1;
7) shall stop timer TFG14 (implicit downgrade imminent peril);
8) shall initialize the counter CFG12 (imminent peril end retransmission) with
value set to 1;
9) shall start timer TFG12 (imminent peril end retransmission); and
10) shall enter the \"T2: in-progress basic group call\" state.
###### 9.3.3.4.8.5 Retransmitting GROUP CALL IMMINENT PERIL END
When in the \"T2: in-progress basic group call\" state, upon expiry of timer
TFG12 (imminent peril end retransmission), the MCVideo client:
1) shall generate a GROUP CALL IMMINENT PERIL END message as specified in
clause 17.1.12. In the GROUP CALL IMMINENT PERIL END message, the MCVideo
client:
a) shall set the Call identifier IE to the stored call identifier of the call
associated with the basic call control state machine;
b) shall set the Originating MCVideo user ID IE to the stored originating
MCVideo user ID of the call associated with the basic call control state
machine;
c) shall set the MCVideo group ID IE to the stored MCVideo group ID of the
call associated with the basic call control state machine;
d) shall set the Last call type change time IE to the stored last call type
change time of the call; and
e) shall set the Last user to change call type IE to the stored last user to
change call type of the call;
2) shall send the GROUP CALL IMMINENT PERIL END message as specified in clause
9.3.1.1.1;
3) shall increment the value of the counter CFG12 (imminent peril end
retransmission) by 1;
4) shall start the timer TFG12 (imminent peril end retransmission) if the
value of the associated counter CFG12 (imminent peril end retransmission) is
less than the upper limit; and
5) shall remain in \"T2: in-progress basic group call\" state.
###### 9.3.3.4.8.6 Terminating user downgrading imminent peril group call
When in the \"T3: in-progress imminent peril group call\" state, upon
receiving GROUP CALL IMMINENT PERIL END message, the MCVideo client:
1) shall set the stored last call type change time to the Last call type
change time IE of the received GROUP CALL IMMINENT PERIL END message;
2) shall set the stored last user to change call type to the Last user to
change call type IE of the received GROUP CALL IMMINENT PERIL END message;
3) shall set the stored current call type to \"BASIC GROUP CALL\";
4) shall set the stored current ProSe per-packet priority to value
corresponding to MCVideo off-network basic group call as described in 3GPP TS
24.483 [4];
5) shall stop timer TFG14 (implicit downgrade imminent peril); and
6) shall enter the \"T2: in-progress basic group call\" state.
###### 9.3.3.4.8.7 Implicit emergency priority end
When in the \"T1: in-progress emergency group call\" state, upon expiry of
timer TFG13 (implicit downgrade emergency), the MCVideo client:
1) shall store the current UTC time as the stored last call type change time
of the call;
2) shall store the originating MCVideo user ID as the stored last user to
change call type of the call;
3) shall set the stored current call type to \"BASIC GROUP CALL\";
4) shall set the stored current ProSe per-packet priority to value
corresponding to MCVideo off-network basic group call as described in 3GPP TS
24.483 [4]; and
5) shall enter the \"T2: in-progress basic group call\" state.
###### 9.3.3.4.8.8 Implicit imminent peril priority end
When in the \"T3: in-progress imminent peril call\" state, upon expiry of
timer TFG14 (implicit downgrade imminent peril), the MCVideo client:
1) shall store the current UTC time as the stored last call type change time
of the call;
2) shall store the originating MCVideo user ID as the stored last user to
change call type of the call;
3) shall set the stored current call type to \"BASIC GROUP CALL\";
4) shall set the stored current ProSe per-packet priority to value
corresponding to MCVideo off-network basic group call as described in 3GPP TS
24.483 [4]; and
5) shall enter the \"T2: in-progress basic group call\" state.
##### 9.3.3.4.9 Merge of two calls
When in the \"T1: in-progress emergency group call\" state or \"T2: in-
progress basic group call\" state or \"T3: in-progress imminent peril group
call\" state, upon receiving a GROUP CALL ANNOUNCEMENT message with the
MCVideo group ID IE matching the stored MCVideo group ID of the call and:
1) the Originating MCVideo user ID IE is different from the stored originating
MCVideo user ID of the call; or
2) the Call identifier IE is different from the stored call identifier of the
call;
then:
1) if the stored current call type is \"BASIC GROUP CALL\" and the value of
the Call type IE of GROUP CALL ANNOUNCEMENT message is either \"IMMINENT PERIL
GROUP CALL\" or \"EMERGENCY GROUP CALL\"; or
2) if the stored current call type is \"IMMINENT PERIL GROUP CALL\" and the
value of the Call type IE of GROUP CALL ANNOUNCEMENT message is \"EMERGENCY
GROUP CALL\"; or
3) if the stored current call type being equal to the Call type IE of the
GROUP CALL ANNOUNCEMENT message and the Call start time IE of the GROUP CALL
ANNOUNCEMENT message being lower than the stored call start time of the call;
or
4) if the stored current call type being equal to the Call type IE of the
GROUP CALL ANNOUNCEMENT message and the Call start time IE of the GROUP CALL
ANNOUNCEMENT message being equal to the stored call start time of the call and
the Call identifier IE of the GROUP CALL ANNOUNCEMENT message being lower than
the stored call identifier of the call;
the MCVideo client:
1) shall store the value of the Last call type change time IE of the received
GROUP CALL ANNOUNCEMENT message as the last call type change time of the call;
2) shall store the value of the Last user to change call type IE of the GROUP
CALL ANNOUNCEMENT message as the last user to change call type of the call;
3) shall store the value of the Call type IE of the GROUP CALL ANNOUNCEMENT
message as the current call type of the call;
4) if the Call type IE of GROUP CALL ANNOUNCEMENT message is set to
\"EMERGENCY GROUP CALL\":
a) shall set the stored current ProSe per-packet priority to value
corresponding to MCVideo off-network emergency group call as described in 3GPP
TS 24.483 [4]; and
b) shall enter \"T1: in-progress emergency group call\" state; and
5) if the Call type IE of GROUP CALL ANNOUNCEMENT message is set to \"IMMINENT
PERIL GROUP CALL\":
a) shall set the stored current ProSe per-packet priority to value
corresponding to MCVideo off-network imminent peril group call as described in
3GPP TS 24.483 [4]; and
b) shall enter \"T3: in-progress imminent peril group call\" state.
##### 9.3.3.4.10 Call release after call establishment
When in state T1: in-progress emergency group call\" or \"T2: in-progress
basic group call\" or \"T3: in-progress imminent peril group call\" or upon
receiving an indication from MCVideo user to release the call, the MCVideo
client:
1) shall release stored current call type;
2) shall release stored ProSe per-packet priority;
3) shall release Last call type change time;
4) shall release Last user to change call type; and
5) shall enter \"T0: waiting for the call to establish\" state.
##### 9.3.3.4.11 Call release or reject before call establishment
When in state \"T0: waiting for the call to establish\", upon receiving an
indication from MCVideo user to release or reject the call, the MCVideo
client:
1) shall release stored current call type;
2) shall release stored ProSe per-packet priority;
3) shall release Last call type change time;
4) shall release Last user to change call type;
5) shall remain in \"T0: waiting for the call to establish\" state.
##### 9.3.3.4.12 Error handling
###### 9.3.3.4.12.1 Unexpected MONP message received
Upon receiving an unexpected MONP message or MONP MCVideo message in a state
where there is no handling specified for the MONP message or the MONP MCVideo
message, the MCVideo client shall discard this message.
###### 9.3.3.4.12.2 Unexpected indication from MCVideo user
Upon receiving an indication from the MCVideo user in a state where there is
no handling specified for the indication, the MCVideo client shall ignore the
indication.
###### 9.3.3.4.12.3 Unexpected expiration of a timer
Upon expiration of a timer in a state where there is no handling specified for
expiration of the timer, the MCVideo client shall ignore the expiration of the
timer.
## 9.4 Off-network Broadcast group call
### 9.4.1 General
### 9.4.2 Basic call control
#### 9.4.2.1 General
#### 9.4.2.2 Broadcast group call control state machine
The figure 9.4.2.2-1 gives an overview of the main states and transitions on
the UE for broadcast group call call control.
Figure 9.4.2.2-1: Broadcast group call control state machine
#### 9.4.2.3 Broadcast group call Control states
##### 9.4.2.3.1 B1: start-stop
This state exists for UE, when the UE is not part of an ongoing broadcast
group call.
##### 9.4.2.3.2 B2: in-progress broadcast group call
This state exists for UE, when the UE is part of an ongoing broadcast group
call.
##### 9.4.2.3.3 B3: pending user action
This state exists for the UE, when the UE has presented a notification to the
MCVideo user for the received GROUP CALL BROADCAST message, is waiting for a
response and is not expected to send confirm indication.
##### 9.4.2.3.4 B4: ignoring same call ID
This state exists for UE, when the group call was rejected or released and
GROUP CALL BROADCAST messages continue being received.
#### 9.4.2.4 Procedures
##### 9.4.2.4.1 User initiating a broadcast group call
When in the \"B1: start-stop\" state, upon the indication from MCVideo user to
initiate the broadcast group call, the MCVideo client:
1) shall generate an SDP body as specified in clause 9.3.1.1.2 and store it as
the SDP body of the call;
2) shall generate a random number with uniform distribution between 0 and
65535 and store it as the call identifier of the call;
3) shall store own MCVideo user ID as the originating MCVideo user ID of the
call;
4) shall store \"BROADCAST GROUP CALL\" as the current call type;
5) shall generate a GROUP CALL BROADCAST message as specified in clause
17.1.18. In the GROUP CALL BROADCAST message, the MCVideo client:
a) shall set the Call identifier IE to the stored call identifier of the call;
b) shall set the Call type IE to the stored current call type;
c) shall set the Originating MCVideo user ID IE to the stored originating
MCVideo user ID of the call;
d) shall set the MCVideo group ID IE to the stored MCVideo group ID of the
call; and
e) shall set the SDP IE to the stored SDP body of the call;
6) shall set the ProSe per-packet priority to the value corresponding to
MCVideo off-network broadcast callas described in 3GPP TS 24.483 [4];
7) shall start transmission control as originating transmission participant as
described specified in clause a.b in 3GPP TS 24.581 [5];
8) shall send the GROUP CALL BROADCAST message as specified in clause
9.3.1.1.1;
9) shall establish a media session based on the stored SDP body of the call;
10) shall start timer TFB2 (broadcast retransmission); and
11) shall enter the \"B2: in-progress broadcast group call\" state.
##### 9.4.2.4.2 Terminating UE receiving a GROUP CALL BROADCAST message when
not participating in the in-progress broadcast group call
When in the \"B1: start-stop\" state, upon receiving a GROUP CALL BROADCAST
message with the Call identifier IE not matching any in-progress broadcast
group call, the MCVideo client:
1) shall store the value of the Call identifier IE of the GROUP CALL BROADCAST
message as the call identifier of the call;
2) shall store the value of the Call type IE of the GROUP CALL BROADCAST
message as the received current call type;
3) shall store the value of the SDP IE of the GROUP CALL BROADCAST message as
the SDP body of the call;
4) shall store the value of the Originating MCVideo user ID IE of the GROUP
CALL BROADCAST message as the originating MCVideo user ID of the call;
5) shall store the value of the MCVideo group ID IE of the GROUP CALL
BROADCAST message as the MCVideo group ID of the call;
6) if the terminating UE is configured that the terminating MCVideo user
acknowledgement is required upon a terminating call request reception:
i) shall start timer TFB3 (waiting for the user); and
ii) shall enter the \"B3: pending user action\" state; and
7) if the terminating UE is configured that the terminating MCVideo user
acknowledgement is not required upon a terminating call request reception:
i) shall establish a media session based on the stored SDP body of the call;
ii) shall start transmission control as terminating transmission participant
as specified in clause a.b in 3GPP TS 24.581 [5];
iii) shall start timer TFB1 (max duration); and
iv) shall enter the \"B2: in-progress broadcast group call\" state.
##### 9.4.2.4.3 MCVideo user accepts the terminating call
When in the \"B3: pending user action\" state, upon indication from the
MCVideo user to accept the incoming broadcast group call, the MCVideo client:
1) shall establish a media session based on the stored SDP body of the call;
2) shall start transmission control as terminating transmission participant as
described specified in clause a.b in 3GPP TS 24.581 [5];
3) shall stop timer TFB3 (waiting for the user);
4) shall start timer TFB1 (max duration); and
5) shall enter the \"B2: in-progress broadcast group call\" state.
##### 9.4.2.4.4 MCVideo user rejects the terminating call
When in the \"B3: pending user action\" state, upon an indication from the
MCVideo user to reject the incoming broadcast group call, the MCVideo client:
1) shall stop timer TFB3 (waiting for the user); and
2) shall enter the \"B4: ignoring same call ID\" state.
##### 9.4.2.4.5 MCVideo user does not act on terminating call
When in the \"B3: pending user action\" state, upon expiration of timer TFB3
(waiting for the user), the MCVideo client:
1) shall enter the \"B4: ignoring same call ID\" state.
##### 9.4.2.4.6 Terminating user releasing the call
When in the \"B2: in-progress broadcast group call\" state, upon an indication
from the terminating MCVideo user to release the in-progress broadcast group
call, the MCVideo client:
1) shall release the media session;
2) shall stop transmission control; and
3) shall enter the \"B4: ignoring same call ID\" state.
##### 9.4.2.4.7 Originating user releasing the call
When in the \"B2: in-progress broadcast group call\" state, upon an indication
from the originating MCVideo user to release the in-progress broadcast group
call, the MCVideo client:
1) shall release the media session;
2) shall generate a GROUP CALL BROADCAST END message as specified in clause
17.1.19. In the GROUP CALL BROADCAST END message, the MCVideo client:
a) shall set the Call identifier IE to the stored call identifier of the call;
b) shall set the Originating MCVideo user ID IE to the stored originating
MCVideo user ID of the call; and
c) shall set the MCVideo group ID IE to the stored MCVideo group ID of the
call;
3) shall send the GROUP CALL BROADCAST END message as specified in clause
9.3.1.1.1;
4) shall stop timer TFB2 (broadcast retransmission);
5) shall stop transmission control; and
6) shall enter the \"B1: start-stop\" state.
##### 9.4.2.4.8 Receiving GROUP CALL BROADCAST END message
When in the \"B2: in-progress broadcast group call\" state or \"B4: ignoring
same call ID\" state, upon receiving GROUP CALL BROADCAST END message with the
same Call identifier IE as the stored call identifier, the MCVideo client:
1) shall release media session;
2) shall stop transmission control, if running; and
3) shall enter the \"B1: start-stop\" state.
##### 9.4.2.4.9 Originating UE retransmitting GROUP CALL BROADCAST message
When in the \"B2: in-progress broadcast group call\" state, upon expiry of
timer TFB2 (broadcast retransmission), the MCVideo client:
1) shall generate a GROUP CALL BROADCAST message as specified in clause
17.1.18. In the GROUP CALL BROADCAST message, the MCVideo client:
a) shall set the Call identifier IE to the stored call identifier of the call;
b) shall set the Call type IE to the stored current call type;
c) shall set the Originating MCVideo user ID IE to the stored originating
MCVideo user ID of the call;
d) shall set the MCVideo group ID IE to the stored MCVideo group ID of the
call; and
e) shall set the SDP IE to the stored SDP body of the call;
2) shall send the GROUP CALL BROADCAST message as specified in clause
9.3.1.1.1;
3) shall restart timer TFB2 (broadcast retransmission); and
4) shall remain in the \"B2: in-progress broadcast group call\" state.
##### 9.4.2.4.10 Ignoring same call ID
When in the \"B4: ignoring same call ID\" state, upon receiving GROUP CALL
BROADCAST message and if the call identifier in GROUP CALL BROADCAST message
matches with the stored call identifier the MCVideo client:
1) shall restart timer TFB1 (max duration); and
2) shall remain in \"B4: ignoring same call ID\" state.
##### 9.4.2.4.11 Releasing the call
When in the \"B2: in-progress broadcast group call\" state or \"B4: ignoring
same call ID\" state, upon expiry of timer TFB1 (max duration) the MCVideo
client:
1) shall release the media session;
2) shall clear the stored call identifier;
3) shall stop transmission control, if running; and
4) shall enter the \"B1: start-stop\" state.
# 10 Private call
## 10.1 General
This clause describes the private call procedures between two MCVideo clients
for on-network and off-network.
For on-network, private call procedures with transmission control are
specified in clause 10.2.2and without transmission control are specified in
clause 10.2.3.
For on-network, private call procedures are specified for the MCVideo client,
the participating MCVideo function and the controlling MCVideo function on the
originating side and terminating side..
For off-network, only private call procedures are specified in clause 10.3.
For off-network, private call procedures are specified for the MCVideo client
on the originating side and terminating side.
For both on-network and off-network private calls, the use of automatic
commencement mode and manual commencement mode are specified.
## 10.2 Private call in on-network
### 10.2.1 General
For on-network, the procedures for private call with transmission control are
specified in clause 10.2.2.
For on-network, the procedures for private call without transmission control
are specified in clause 10.2.3.
For on-network, the procedures for ending the private call initiated by
MCVideo client are specified in clause 10.2.4.
For on-network, the procedures for ending the private call initiated by
MCVideo server are specified in clause 10.2.5.
### 10.2.2 Private call with transmission control
#### 10.2.2.1 General
Clause 10.2.2 specifies the MCVideo client procedures, participating MCVideo
function procedures and controlling MCVideo function procedures for on-network
private calls with transmission control. The procedures cover on-demand
session establishment.
For a private call, the MCVideo client shall initiate the call to one MCVideo
user
#### 10.2.2.2 MCVideo client procedures
##### 10.2.2.2.1 Client originating procedures
Upon receiving a request from an MCVideo user to establish an MCVideo private
call the MCVideo client shall generate an initial SIP INVITE request by
following the UE originating session procedures specified in 3GPP TS 24.229
[11], with the clarifications given below.
The MCVideo client:
1) shall set the Request-URI of the SIP INVITE request to a public service
identity of the participating MCVideo function serving the MCVideo user;
2) may include a P-Preferred-Identity header field in the SIP INVITE request
containing a public user identity as specified in 3GPP TS 24.229 [11];
3) shall include the g.3gpp.mcvideo media feature tag and the g.3gpp.icsi-ref
media feature tag with the value of \"urn:urn-7:3gpp-
service.ims.icsi.mcvideo\" in the Contact header field of the SIP INVITE
request according to IETF RFC 3840 [22];
4) shall include an Accept-Contact header field containing the g.3gpp.mcvideo
media feature tag along with the \"require\" and \"explicit\" header field
parameters according to IETF RFC 3841 [20];
5) shall include the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"
(coded as specified in 3GPP TS 24.229 [11]), in a P-Preferred-Service header
field according to IETF RFC 6050 [14] in the SIP INVITE request;
6) shall include an Accept-Contact header field with the media feature tag
g.3gpp.icsi-ref contain with the value of \"urn:urn-7:3gpp-
service.ims.icsi.mcvideo\" along with parameters \"require\" and \"explicit\"
according to IETF RFC 3841 [20];
7) for the establishment of a private call shall insert in the SIP INVITE
request a MIME resource-lists body with the MCVideo ID of the invited MCVideo
user, according to rules and procedures of IETF RFC 5366 [37];
8) if an end-to-end security context needs to be established and if the
MCVideo user is initiating a private call then:
a) if necessary, shall instruct the key management client to request keying
material from the key management server as described in 3GPP TS 33.180 [8];
b) shall use the keying material to generate a PCK as described in 3GPP TS
33.180 [8];
c) shall use the PCK to generate a PCK-ID with the four most significant bits
set to \"0001\" to indicate that the purpose of the PCK is to protect private
call communications and with the remaining twenty eight bits being randomly
generated as described in 3GPP TS 33.180 [8];
d) shall encrypt the PCK to a UID associated to the MCVideo client using the
MCVideo ID and KMS URI of the invited user as determined by the procedures of
clause 6.2.8.3.9 and a time related parameter as described in 3GPP TS 33.180
[8];
e) shall generate a MIKEY-SAKKE I_MESSAGE using the encapsulated PCK and PCK-
ID as specified in 3GPP TS 33.180 [8]; and
g) shall add the MCVideo ID of the originating MCVideo to the initiator field
(IDRi) of the I_MESSAGE as described in 3GPP TS 33.180 [8]; and
f) shall sign the MIKEY-SAKKE I_MESSAGE using the originating MCVideo user\'s
signing key provided in the keying material together with a time related
parameter, and add this to the MIKEY-SAKKE payload, as described in 3GPP TS
33.180 [8].
9) shall include an SDP offer according to 3GPP TS 24.229 [11] with the
clarification given in clause 6.2.1 and with a media stream of the offered
media-transmission control entity;
10) if implicit transmission control is required, shall comply with the
conditions specified in clause 6.4;
11) if the MCVideo user is initiating a private call then:
a) if force of automatic commencement mode at the invited MCVideo client is
requested by the MCVideo user, shall include in the SIP INVITE request a Priv-
Answer-Mode header field with the value \"Auto\" according to the rules and
procedures of IETF RFC 5373 [27];
b) if force of automatic commencement mode at the invited MCVideo client is
not requested by the MCVideo user and:
i) if automatic commencement mode at the invited MCVideo client is requested
by the MCVideo user, shall include in the SIP INVITE request an Answer-Mode
header field with the value \"Auto\" according to the rules and procedures of
IETF RFC 5373 [27]; and
ii) if manual commencement mode at the invited MCVideo client is requested by
the MCVideo user, shall include in the SIP INVITE request an Answer-Mode
header field with the value \"Manual\" according to the rules and procedures
of IETF RFC 5373 [27]; and
c) shall contain an application/vnd.3gpp.mcvideo-info+xml MIME body with the
\ element containing the \ element with the
\ element set to a value of \"private\";
12) if the MCVideo emergency private call state is set to either \"MVEPC 2:
emergency-pc-requested\" or \"MVEPC 3: emergency-pc-granted\" or the MCVideo
emergency private priority state for this private call is set to \"MVEPP 2:
in-progress\", the MCVideo client shall comply with the procedures in clause
6.2.8.3.3; and
13) shall send SIP INVITE request towards the MCVideo server according to 3GPP
TS 24.229 [11].
Upon receiving a SIP 183(Session Progress) response to the SIP INVITE request
the MCVideo client:
1) may indicate the progress of the session establishment to the inviting
MCVideo user.
Upon receiving a SIP 200 (OK) response to the SIP INVITE request the MCVideo
client:
1) shall interact with the media plane as specified in 3GPP TS 24.581 [5];
2) if the MCVideo emergency private call state is set to \"MVEPC 2: emergency-
pc-requested\" or \"MVEPC 3: emergency-pc-granted\", shall perform the actions
specified in clause 6.2.8.3.4; and
3) shall notify the user that the call has been successfully established.
On receiving a SIP 4xx response, a SIP 5xx response or a SIP 6xx response to
the SIP INVITE request:
1) if the MCVideo emergency private call state is set to \"MVEPC 2: emergency-
pc-requested\"; or
2) if the MCVideo emergency private call state is set to \"MVEPC 3: emergency-
pc-granted\";
the MCVideo client shall perform the actions specified in clause 6.2.8.3.5.
On receiving a SIP INFO request where the Request-URI contains an MCVideo
session ID identifying an ongoing session, the MCVideo client shall follow the
actions specified in clause 6.2.8.3.7.
##### 10.2.2.2.2 Client terminating procedures
Upon receipt of an initial SIP INVITE request, the MCVideo client shall follow
the procedures for termination of multimedia sessions in the IM CN subsystem
as specified in 3GPP TS 24.229 [11] with the clarifications below.
The MCVideo client:
1) may reject the SIP INVITE request if any of the following conditions are
met:
a) MCVideo client is already occupied in another session and the number of
simultaneous sessions exceeds the value of the \ element
of the \ element of the \ element of the MCVideo
UE configuration document, the maximum simultaneous MCVideo session for
private call, as specified in TS 24.484 [25];
b) MCVideo client does not have enough resources to handle the call; or
c) any other reason outside the scope of this specification;
otherwise, continue with the rest of the steps.
NOTE 1: If the SIP INVITE request contains an application/vnd.3gpp.mcvideo-
info+xml MIME body with the \ element set to a value of
\"true\", the participating MCVideo function can choose to accept the request.
2) if the SIP INVITE request is rejected in step 1), shall respond toward
participating MCVideo function either with appropriate reject code as
specified in 3GPP TS 24.229 [11] and warning texts as specified in clause
4.4.2 or with SIP 480 (Temporarily unavailable) response not including warning
texts if the user is authorised to restrict the reason for failure according
to \ as specified in 3GPP TS 24.484 [25] and skip
the rest of the steps of this clause;
3) if the SIP INVITE request contains an application/vnd.3gpp.mcvideo-info+xml
MIME body with the \ element containing the \
element with the \ element set to a value of \"true\":
a) should display to the MCVideo user an indication that this is a SIP INVITE
request for an MCVideo emergency private call and:
i) should display the MCVideo ID of the originator of the MCVideo emergency
private call contained in the \ element of the
application/vnd.3gpp.mcvideo-info+xml MIME body; and
ii) if the \ element is set to \"true\", should display to the
MCVideo user an indication of the MCVideo emergency alert and associated
information; and
b) shall set the MCVideo emergency private priority state to \"MVEPP 2: in-
progress\" for this private call;
4) if the SDP offer of the SIP INVITE request contains an \"a=key-mgmt\"
attribute field with a \"mikey\" attribute value containing a MIKEY-SAKKE
I_MESSAGE:
a) shall extract the MCVideo ID of the originating MCVideo client from the
initiator field (IDRi) of the I_MESSAGE as described in 3GPP TS 33.180 [8];
b) shall convert the MCVideo ID to a UID as described in 3GPP TS 33.180 [8];
c) shall use the UID to validate the signature of the MIKEY-SAKKE I_MESSAGE as
described in 3GPP TS 33.180 [8];
d) if authentication verification of the MIKEY-SAKKE I_MESSAGE fails, shall
reject the SIP INVITE request with a SIP 488 (Not Acceptable Here) response as
specified in IETF RFC 4567 [34], and include warning text set to \"136
authentication of the MIKEY-SAKE I_MESSAGE failed\" in a Warning header field
as specified in clause 4.4; and
e) if the signature of the MIKEY-SAKKE I_MESSAGE was successfully validated:
i) shall extract and decrypt the encapsulated PCK using the terminating
user\'s (KMS provisioned) UID key as described in 3GPP TS 33.180 [8]; and
ii) shall extract the PCK-ID, from the payload as specified in 3GPP TS 33.180
[8];
NOTE 2: With the PCK successfully shared between the originating MCVideo
client and the terminating MCVideo client, both clients are able to use
SRTP/SRTCP to create an end-to-end secure session.
5) may check if a Resource-Priority header field is included in the incoming
SIP INVITE request and may perform further actions outside the scope of this
specification to act upon an included Resource-Priority header field as
specified in 3GPP TS 24.229 [11];
6) may display to the MCVideo user the MCVideo ID of the inviting MCVideo
user;
7) shall perform the automatic commencement procedures specified in clause
6.2.3.1.1 if one of the following conditions are met:
a) SIP INVITE request contains an Answer-Mode header field with the value
\"Auto\" and the MCVideo service setting at the invited MCVideo client for
answering the call is set to automatic commencement mode;
b) SIP INVITE request contains an Answer-Mode header field with the value
\"Auto\" and the MCVideo service setting at the invited MCVideo client for
answering the call is set to manual commencement mode, yet the invited MCVideo
client is willing to answer the call with automatic commencement mode; or
c) SIP INVITE request contains a Priv-Answer-Mode header field with the value
of \"Auto\"; and
8) shall perform the manual commencement procedures specified in clause
6.2.3.2.1 if either of the following conditions are met:
a) SIP INVITE request contains an Answer-Mode header field with the value
\"Manual\" and the MCVideo service setting at the invited MCVideo client for
answering the call is set to manual commencement mode;
b) SIP INVITE request contains an Answer-Mode header field with the value
\"Manual\" and the MCVideo service setting at the invited MCVideo client for
answering the call is set to automatic commencement mode, yet the invited
MCVideo client allows the call to be answered with manual commencement mode;
or
c) SIP INVITE request contains a Priv-Answer-Mode header field with the value
of \"Manual\".
Upon receiving the SIP CANCEL request cancelling a SIP INVITE request for
which a dialog exists at the MCVideo client and a SIP 200 (OK) response has
not yet been sent to the SIP INVITE request then the MCVideo client:
1) shall send a SIP 200 (OK) response to the SIP CANCEL request according to
3GPP TS 24.229 [11]; and
2) shall send a SIP 487 (Request Terminated) response to the SIP INVITE
request according to 3GPP TS 24.229 [11].
Upon receiving a SIP BYE request for an established dialog, the MCVideo
client:
1) shall follow the procedures in clause 10.2.5.2.
##### 10.2.2.2.3 Client terminating procedures for reception of SIP re-INVITE
request
This clause covers on-demand session.
Upon receipt of a SIP re-INVITE request for an existing private call session,
the MCVideo client shall:
1) if the SIP re-INVITE request contains an application/vnd.3gpp.mcvideo-
info+xml MIME body with the \ element containing the \ element with the \ element set to a value of \"true\":
a) should display to the MCVideo user an indication that this is a SIP re-
INVITE request to upgrade this call to an MCVideo emergency private call and:
i) should display the MCVideo ID of the originator of the MCVideo emergency
private call contained in the \ element of the
application/vnd.3gpp.mcvideo-info+xml MIME body; and
ii) if the \ element is set to \"true\", should display to the
MCVideo user an indication of the MCVideo emergency alert and associated
information; and
b) shall set the MCVideo emergency private priority state to \"MVEPP 2: in-
progress\" for this private call;
2) if the SIP re-INVITE request contains an application/vnd.3gpp.mcvideo-
info+xml MIME body with the \ element containing the \ element with the \ element set to a value of \"false\":
a) should display to the MCVideo user an indication that this is a SIP re-
INVITE request to downgrade this emergency private call to a normal priority
private call and:
i) should display the MCVideo ID of the sender of the SIP re-INVITE request
contained in the \ element of the
application/vnd.3gpp.mcvideo-info+xml MIME body; and
ii) if the \ element is set to \"false\" should display to the
MCVideo user an indication that the MCVideo emergency alert is cancelled;
iii) if the SIP re-INVITE request contains an application/vnd.3gpp.mcvideo-
info+xml MIME body including an \ element:
A) should display to the MCVideo user the MCVideo ID contained in the
\ element of the MCVideo user that originated the MCVideo
emergency alert; and
B) if the MCVideo ID contained in the \ element is the MCVideo
ID of the receiving MCVideo user, shall set the MCVideo emergency alert state
to \"MVPEA 1: no-alert\";
b) shall set the MCVideo emergency private priority state to \"MVEPP 1: no-
emergency\" for this private call; and
c) if the MCVideo emergency private call state of the call is set to \"MVEPC
3: emergency-call-granted\", shall set the MCVideo emergency private call
state of the call to \"MVEPC 1: emergency-pc-capable\";
3) may check if a Resource-Priority header field is included in the incoming
SIP INVITE request and may perform further actions outside the scope of this
specification to act upon an included Resource-Priority header field as
specified in 3GPP TS 24.229 [11];
4) may display to the MCVideo user the MCVideo ID of the inviting MCVideo
user;
NOTE 1: As this is a re-INVITE for an existing MCVideo private call session,
there is no attempt made to change the answer-mode from its current state.
5) shall accept the SIP re-INVITE request and generate a SIP 200 (OK) response
according to rules and procedures of 3GPP TS 24.229 [11];
6) if the SIP re-INVITE request was received within an on-demand session,
shall include an SDP answer in the SIP 200 (OK) response to the SDP offer in
the incoming SIP INVITE request according to 3GPP TS 24.229 [11] with the
clarifications given in clause 6.2.2;
7) shall send the SIP 200 (OK) response towards the MCVideo server according
to rules and procedures of 3GPP TS 24.229 [11]; and
8) shall interact with the media plane as specified in 3GPP TS 24.581 [5].
##### 10.2.2.2.4 MCVideo in-progress emergency cancel
This clause covers on-demand session.
Upon receiving a request from an MCVideo user to cancel the in-progress
emergency condition on an MCVideo emergency private call, the MCVideo client
shall generate a SIP re-INVITE request by following the UE session procedures
specified in 3GPP TS 24.229 [4], with the clarifications given below.
The MCVideo client:
1) if the MCVideo user is not authorised to cancel the in-progress emergency
condition on an MCVideo emergency private call as determined by the procedures
of clause 6.2.8.3.1.2, the MCVideo client:
a) should indicate to the MCVideo user that they are not authorised to cancel
the in-progress emergency condition on an MCVideo emergency private call; and
b) shall skip the remaining steps of the current clause;
2) shall, if the MCVideo user is cancelling an in-progress emergency condition
and optionally an MCVideo emergency alert originated by the MCVideo user,
include an application/vnd.3gpp.mcvideo-info+xml MIME body populated as
specified in clause 6.2.8.3.6;
3) shall, if the MCVideo user is cancelling an in-progress emergency condition
and optionally an MCVideo emergency alert originated by another MCVideo user,
include an application/vnd.3gpp.mcvideo-info+xml MIME body populated as
specified in clause 6.2.8.3.8;
4) shall include a Resource-Priority header field and comply with the
procedures in clause 6.2.8.3.3;
5) shall include in the SIP re-INVITE request an SDP offer the media
parameters as currently established;
NOTE 1: The SIP re-INVITE request can be sent within an on-demand session or a
pre-established session associated with an MCVideo group session. If the SIP
re-INVITE request is sent within a pre-established session, the media-level
clause for the offered MCVideo video media stream and the media-level clause
of the offered media-transmission control entity are expected to be the same
as was negotiated in the existing pre-established session.
6) if an implicit transmission request is required, shall indicate this as
specified in clause 6.4; and
7) shall send the SIP re-INVITE request according to 3GPP TS 24.229 [4].
On receiving a SIP 2xx response to the SIP re-INVITE request, the MCVideo
client:
1) shall interact with the user plane as specified in 3GPP TS 24.380 [5];
2) shall set the MCVideo emergency private priority state of the MCVideo
private call to \"MVEPP 1: no-emergency\";
3) shall set the MCVideo emergency private call state of the call to \"MVEPC
1: emergency-pc-capable\"; and
4) if the MCVideo emergency alert state is set to \"MVPEA 4: Emergency-alert-
cancel-pending\", the sent SIP re-INVITE request did not contain an
\ element in the application/vnd.3gpp.mcvideo-info+xml MIME
body and the SIP 2xx response to the SIP request for a priority group call
does not contain a Warning header field as specified in clause 4.4 with the
warning text containing the mcvideo-warn-code set to \"149\", shall set the
MCVideo emergency alert state to \"MVPEA 1: no-alert\".
On receiving a SIP 4xx response, SIP 5xx response or SIP 6xx response to the
SIP re-INVITE request:
1) if the SIP 4xx response, SIP 5xx response or SIP 6xx response contains an
application/vnd.3gpp.mcvideo-info+xml MIME body with an \
element set to a value of \"true\", the MCVideo client shall set the MCVideo
emergency private priority state as \"MVEPP 2: in-progress\";
2) if the SIP 4xx response, SIP 5xx response or SIP 6xx response contains an
application/vnd.3gpp.mcvideo-info+xml MIME body with an \ element
set to a value of \"true\" and the sent SIP re-INVITE request did not contain
an \ element in the application/vnd.3gpp.mcvideo-info+xml MIME
body, the MCVideo client shall set the MCVideo emergency alert state to
\"MVPEA 3: emergency-alert-initiated\"; and
3) if the SIP 4xx response, SIP 5xx response or SIP 6xx response did not
contain an application/vnd.3gpp.mcvideo-info+xml MIME body, shall set the
MCVideo emergency private priority state as \"MVEPP 2: in-progress\" and the
MCVideo emergency alert (MPEA) state shall revert to its value prior to
entering the current procedure.
NOTE 2: If the in-progress emergency private priority state cancel request is
rejected, the state of the session does not change, i.e. continues with
MCVideo emergency private call level priority.
On receiving a SIP INFO request where the Request-URI contains an MCVideo
session ID identifying an ongoing group session, the MCVideo client shall
follow the actions specified in clause 6.2.8.3.7.
##### 10.2.2.2.5 Upgrade to MCVideo emergency private call
This clause covers both on-demand session and pre-established sessions.
Upon receiving a request from an MCVideo user to upgrade the ongoing MCVideo
private call to an MCVideo emergency private call, the MCVideo client shall
generate a SIP re-INVITE request as specified in 3GPP TS 24.229 [4], with the
clarifications given below.
1) shall include an application/vnd.3gpp.mcvideo-info+xml MIME body populated
as specified in clause 6.2.8.3.2;
2) shall include a Resource-Priority header field and comply with the
procedures in clause 6.2.8.3.3.
3) shall include an SDP offer with the media parameters as currently
established according to 3GPP TS 24.229 [4];
NOTE: The SIP re-INVITE request can be sent within an on-demand session or a
pre-established session associated with an MCVideo private call. If the SIP
re-INVITE request is sent within a pre-established session, the media-level
clause for the offered MCVideo video media stream and the media-level clause
of the offered media-transmission control entity are expected to be the same
as was negotiated in the existing pre-established session.
4) if an implicit transmission request is required, shall indicate this as
specified in clause 6.4; and
5) shall send the SIP re-INVITE request according to 3GPP TS 24.229 [4].
On receiving a SIP 2xx response to the SIP re-INVITE request the MCVideo
client:
1) shall interact with the user plane as specified in 3GPP TS 24.380 [5]; and
2) shall perform the actions specified in clause 6.2.8.3.4.
On receiving a SIP 4xx response, SIP 5xx response or SIP 6xx response to the
SIP re-INVITE request, the MCVideo client shall perform the actions specified
in clause 6.2.8.3.5.
On receiving a SIP INFO request where the Request-URI contains an MCVideo
session ID identifying an ongoing group session, the MCVideo client shall
follow the actions specified in clause 6.2.8.3.7
#### 10.2.2.3 Participating MCVideo function procedures
##### 10.2.2.3.1 Originating procedures
###### 10.2.2.3.1.1 On-demand private call
Upon receipt of a \"SIP INVITE request for originating participating MCVideo
function\" containing an application/vnd.3gpp.mcvideo-info+xml MIME body with
the \ element set to a value of \"private\", the participating
MCVideo function:
1) may reject the SIP INVITE request depending on the value of the Resource-
Priority header field if the Resource-Priority header field is included in the
received SIP INVITE request according to rules and procedures specified in
IETF RFC 4412 [33] and shall not continue with the rest of the steps;
2) if unable to process the request due to a lack of resources or a risk of
congestion exists, may reject the \"SIP INVITE request for originating
participating MCVideo function\" with a SIP 500 (Server Internal Error)
response. The participating MCVideo function may include a Retry-After header
field to the SIP 500 (Server Internal Error) response as specified in IETF RFC
3261 [15] and shall not continue with the rest of the steps;
NOTE 1: If the received SIP INVITE request contains an emergency indication
set to a value of \"true\", the participating MCVideo function can choose to
accept the request.
NOTE 2: If the received SIP INVITE request contains an emergency indication
set to a value of \"true\", the participating MCVideo function can choose to
allow an exception to the limit on the number of private calls and accept the
request.
3) shall determine the MCVideo ID of the calling user from public user
identity in the P-Asserted-Identity header field of the SIP INVITE request and
shall authorise the user;
NOTE 3: The MCVideo ID of the calling user is bound to the public user
identity at the time of service authorisation, as documented in clause 7.3.
4) if the participating MCVideo function cannot find a binding between the
public user identity and an MCVideo ID or if the validity period of an
existing binding has expired, then the participating MCVideo function shall
reject the SIP INVITE request with a SIP 404 (Not Found) response with the
warning text set to \"141 user unknown to the participating function\" in a
Warning header field as specified in clause 4.4, and shall not continue with
any of the remaining steps;
5) shall:
a) if the \ is set to \"private\", determine that the call is a
private call;
6) if the call is a:
a) private call, determine the public service identity of the controlling
MCVideo function for the private call service associated with the originating
user\'s MCVideo ID identity;
7) if the participating MCVideo function is unable to identify the controlling
MCVideo function for the private call service, it shall reject the SIP INVITE
request with a SIP 404 (Not Found) response with the warning text \"142 unable
to determine the controlling function\" in a Warning header field as specified
in clause 4.4, and shall not continue with any of the remaining steps;
8) if the incoming SIP INVITE request does not contain an
application/resource-lists MIME body, shall reject the \"SIP INVITE request
for originating participating MCVideo function\" with a SIP 403 (Forbidden)
response including warning text set to \"145 unable to determine called
party\" in a Warning header field as specified in clause 4.4, and shall not
continue with the rest of the steps;
9) if the call is a private call and the incoming SIP INVITE request contains
an application/resource-lists MIME body with more than one \ element,
shall reject the \"SIP INVITE request for originating participating MCVideo
function\" with a SIP 403 (Forbidden) response including warning text set to
\"145 unable to determine called party\" in a Warning header field as
specified in clause 4.4, and shall not continue with the rest of the steps;
10) if the \ element of the \ element is not
present in the MCVideo user profile document on the participating MCVideo
function or is present with the value \"false\" (see the MCVideo user profile
document in 3GPP TS 24.484 [25]), indicating that the user identified by the
MCVideo ID is not authorised to initiate private calls, shall reject the \"SIP
INVITE request for originating participating MCVideo function\" with a SIP 403
(Forbidden) response, with warning text set to \"107 user not authorised to
make private calls\" in a Warning header field as specified in clause 4.4, and
shall not continue with the rest of the steps;
11) if the call is a private call and:
a) if the received SIP INVITE request includes an Answer-Mode header field as
specified in IETF RFC 5373 [27] with the value \"Auto\" and the \ element of the \ element is not present in
the MCVideo user profile document on the participating MCVideo function or is
present with the value \"false\" (see the MCVideo user profile document in
3GPP TS 24.484 [25]) indicating that the user identified by the MCVideo ID is
not authorised to initiate private call with automatic commencement, shall
reject the \"SIP INVITE request for originating participating MCVideo
function\" with a SIP 403 (Forbidden) response including warning text set to
\"125 user not authorised to make private call with automatic commencement\"
in a Warning header field as specified in clause 4.4, and shall not continue
with the rest of the steps;
b) if the received SIP INVITE request includes an Answer-Mode header field as
specified in IETF RFC 5373 [27] with the value \"Manual\" and the \ element of the \ element is not present in the
MCVideo user profile document on the participating MCVideo function or is
present with the value \"false\" (see the MCVideo user profile document in
3GPP TS 24.484 [25]), indicating that the user identified by the MCVideo ID is
not authorised to initiate private call with manual commencement, shall reject
the \"SIP INVITE request for originating participating MCVideo function\" with
a SIP 403 (Forbidden) response including warning text set to \"126 user not
authorised to make private call with manual commencement\" in a Warning header
field as specified in clause 4.4, and shall not continue with the rest of the
steps;
c) if the \ element exists in the MCVideo user profile document
with one more \ elements (see the MCVideo user profile document in 3GPP
TS 24.484 [25]) and:
i) if the \"uri\" attribute of the \ element of the
application/resource-lists MIME body does not match with one of the \
elements of the \ element of the MCVideo user profile document
(see the MCVideo user profile document in 3GPP TS 24.484 [25]); and
ii) if configuration is not set in the MCVideo user profile document (see the
MCVideo user profile document in 3GPP TS 24.484 [25]) that allows the MCVideo
user to make a private call to users not contained within the \
elements of the \ element;
then:
i) shall reject the \"SIP INVITE request for originating participating MCVideo
function\" with a SIP 403 (Forbidden) response including warning text set to
\"144 user not authorised to call this particular user\" in a Warning header
field as specified in clause 4.4 and shall not continue with the rest of the
steps;
12) shall validate the media parameters and if the MCVideo video media codec
is not offered in the \"SIP INVITE request for originating participating
MCVideo function\" shall reject the request with a SIP 488 (Not Acceptable
Here) response. Otherwise, continue with the rest of the steps;
13) shall generate a SIP INVITE request as specified in clause 6.3.2.1.3 with
the following clarifications:
a) if the conditions in step 12) above were executed and the participating
MCVideo function determined that the \"uri\" attribute of only one of the
\ elements of the application/resource-lists MIME body matched with an
\ element of the \ element of the MCVideo user profile
document (see the MCVideo user profile document in 3GPP TS 24.484 [25]) then
the \ in the application/vnd.3gpp.mcvideo-info+xml MIME body of
the SIP INVITE request generated in clause 6.3.2.1.3 is set to \"private\";
and
b) if the conditions in step 12) above were executed, then only the \
element(s) of the application/resource-lists MIME body that have a \"uri\"
attribute that matched with an \ elements of the \ element
of the MCVideo user profile document (see the MCVideo user profile document in
3GPP TS 24.484 [25]) are included in the application/resource-lists MIME body
in the SIP INVITE request generated in clause 6.3.2.1.3;
14) shall set the Request-URI to the public service identity of the
controlling MCVideo function hosting the private call service as determined by
step 6);
15) shall set the \ element in an
application/vnd.3gpp.mcvideo-info+xml MIME body of the SIP INVITE request to
the MCVideo ID of the calling user;
16) if the call is a private call and:
a) if a Priv-Answer-Mode header field specified in IETF RFC 5373 [27] was
received in the incoming SIP INVITE request with a value of \"Manual\", shall
not include a Priv-Answer-Mode header field in the outgoing SIP INVITE
request;
b) if the \ element of the \ element is not
present in the MCVideo user profile document on the participating MCVideo
function or is present with the value \"false\" (see the MCVideo user profile
document in 3GPP TS 24.484 [25]), and the Priv-Answer-Mode header field
specified in IETF RFC 5373 [27] was received in the incoming SIP INVITE
request with a value of \"Auto\", shall reject the \"SIP INVITE request for
originating participating MCVideo function\" with a SIP 403 (Forbidden)
response including warning text set to \"143 not authorised to force auto
answer\" in a Warning header field as specified in clause 4.4, and shall not
continue with the rest of the steps;
c) if the \ element of the \ element is
present in the MCVideo user profile document with the value \"true\" (see the
MCVideo user profile document in 3GPP TS 24.484 [25]) on the participating
MCVideo function, and the Priv-Answer-Mode header field specified in IETF RFC
5373 [27] was received in the incoming SIP INVITE request with a value of
\"Auto\", shall include the Priv-Answer-Mode header field set to a value of
\"Auto\" in the outgoing SIP INVITE request;
d) if a Priv-Answer-Mode header field containing the value of \"Auto\" has not
been included in the outgoing SIP INVITE request as specified in step 17)
above and the incoming \"SIP INVITE request for originating participating
MCVideo function\" contained an Answer-Mode header field as specified in IETF
RFC 5373 [27], then shall populate the Answer-Mode header field of the
outgoing SIP INVITE request with the contents of the Answer-Mode header field
from the incoming \"SIP INVITE request for originating participating MCVideo
function\";
17) shall include in the SIP INVITE request an SDP offer based on the SDP
offer in the received \"SIP INVITE request for originating participating
MCVideo function\", as specified in clause 6.3.2.1.1.1;
18) shall include a Resource-Priority header field according to rules and
procedures of 3GPP TS 24.229 [11] set to the value indicated in the Resource-
Priority header field if included in the SIP INVITE request from the MCVideo
client; and
19) shall forward the SIP INVITE request, according to 3GPP TS 24.229 [11].
Upon receiving a SIP 180 (Ringing) response, the participating MCVideo
function:
1) shall generate a SIP 180 (Ringing) response to the SIP INVITE request as
specified in the clause 6.3.2.1.5.1;
2) shall include the P-Asserted-Identity header field as received in the
incoming SIP 180 (Ringing) response;
3) shall include Warning header field(s) received in the incoming SIP 180
(Ringing) response; and
4) shall forward the SIP 180 (Ringing) response to the MCVideo client
according to 3GPP TS 24.229 [11].
Upon receiving a SIP 200 (OK) response, the participating MCVideo function:
1) shall generate a SIP 200 (OK) response as specified in the clause
6.3.2.1.5.2;
2) shall include in the SIP 200 (OK) response an SDP answer as specified in
the clause 6.3.2.1.2.1;
3) shall include Warning header field(s) received in the incoming SIP 200 (OK)
response;
4) shall include the P-Asserted-Identity header field received in the incoming
SIP 200 (OK) response into the outgoing SIP 200 (OK) response;
5) shall include an MCVideo session identity mapped to the MCVideo session
identity provided in the Contact header field of the received SIP 200 (OK)
response;
6) shall send the SIP 200 (OK) response to the MCVideo client according to
3GPP TS 24.229 [11];
7) shall interact with the media plane as specified in 3GPP TS 24.581 [5]; and
8) shall start the SIP session timer according to rules and procedures of IETF
RFC 4028 [23].
The participating MCVideo function shall forward any other SIP response that
does not contain SDP, including any MIME bodies contained therein, along the
signalling path to the originating network according to 3GPP TS 24.229 [11].
###### 10.2.2.3.1.2 Private call initiation using pre-established session
Upon receipt of a \"SIP REFER request for a pre-established session\", with:
1) the Refer-To header field containing a Content-ID (\"cid\") Uniform
Resource Locator (URL) as specified in IETF RFC 2392 [49] that points to an
application/resource-lists MIME body as specified in IETF RFC 5366 [37]
containing one or more \ element(s) with a \"uri\" attribute containing
a SIP-URI set to the MCVideo ID of the called user(s);
2) a body\" URI header field of the SIP-URI specified above containing an
application/vnd.3gpp.mcvideo-info MIME body with the \ element
set to \"private\" ; and
3) a Content-ID header field set to the \"cid\" URL;
the participating function:
1) if unable to process the request due to a lack of resources or a risk of
congestion exists, may reject the SIP INVITE request with a SIP 500 (Server
Internal Error) response. The participating MCVideo function may include a
Retry-After header field to the SIP 500 (Server Internal Error) response as
specified in IETF RFC 3261 [15] and shall not continue with the rest of the
steps;
2) shall determine the MCVideo ID of the calling user from public user
identity in the P-Asserted-Identity header field of the SIP REFER request;
3) if the participating MCVideo function cannot find a binding between the
public user identity and an MCVideo ID or if the validity period of an
existing binding has expired, then the participating MCVideo function shall
reject the SIP REFER request with a SIP 404 (Not Found) response with the
warning text set to \"141 user unknown to the participating function\" in a
Warning header field as specified in clause 4.4, and shall not continue with
any of the remaining steps;
4) if the received SIP REFER request does not contain an application/resource-
lists MIME body referenced by a \"cid\" URL in the Refer-To header field,
shall reject the \"SIP REFER request for pre-established session\" with a SIP
403 (Forbidden) response including warning text set to \"145 unable to
determine called party\" in a Warning header field as specified in clause 4.4,
and shall not continue with the rest of the steps;
5) if the received SIP REFER request contains an application/resource-lists
MIME body referenced by a \"cid\" URL in the Refer-To header field with more
than one \ element each with an application/vnd.3gpp.mcvideo-info MIME
body with the \ element:
a) set to \"private\", shall reject the \"SIP REFER request for pre-
established session\" with a SIP 403 (Forbidden) response including warning
text set to \"145 unable to determine called party\" in a Warning header field
as specified in clause 4.4, and shall not continue with any of the remaining
steps;
6) if the received SIP REFER request contains an application/resource-lists
MIME body referenced by a \"cid\" URL in the Refer-To header field with only
one \ element with an application/vnd.3gpp.mcvideo-info MIME body with
the \ element:
a) not set to \"private\", shall reject the \"SIP REFER request for pre-
established session\" with a SIP 403 (Forbidden) response including warning
text set to \"145 unable to determine called party\" in a Warning header field
as specified in clause 4.4, and shall not continue with any of the remaining
steps; or
b) set to \"private\", determine that the call is a private call;
7) if the call is a:
a) private call, shall determine the public service identity of the
controlling MCVideo function for the private call service associated with the
originating user\'s MCVideo ID; or
8) if the participating MCVideo function is unable to identify the controlling
MCVideo function for the private call service associated with the originating
user\'s MCVideo ID, it shall reject the REFER request with a SIP 404 (Not
Found) response with the warning text \"142 unable to determine the
controlling function\" in a Warning header field as specified in clause 4.4,
and shall not continue with any of the remaining steps;
9) if the \ element of the \ element is not
present in the MCVideo user profile document (see the MCVideo user profile
document in 3GPP TS 24.484 [25]) on the participating MCVideo function or is
present with the value \"false\", indicating that the user identified by the
MCVideo ID is not authorised to initiate private calls, shall reject the \"SIP
REFER request for pre-established session\" with a SIP 403 (Forbidden)
response to the SIP INVITE request, with warning text set to \"107 user not
authorised to make private calls\" in a Warning header field as specified in
clause 4.4;
10) if the call is a private call:
a) if the received SIP REFER request includes an Answer-Mode header field as
specified in IETF RFC 5373 [27] set to \"Auto\" contained in the header
portion of the SIP URI present in the application/resource-lists MIME body
referenced by a \"cid\" URL in the Refer-To header field, and the \ element of the \ element is not present in
the MCVideo user profile document (see the MCVideo user profile document in
3GPP TS 24.484 [25]) on the participating MCVideo function or is present with
the value \"false\" (indicating that the user identified by the MCVideo ID is
not authorised to initiate private call with automatic commencement), shall
reject the \"SIP REFER request for pre-established session\" with a SIP 403
(Forbidden) response including warning text set to \"125 user not authorised
to make private call with automatic commencement\" in a Warning header field
as specified in clause 4.4, and shall not continue with the rest of the steps;
b) if the received SIP REFER request includes an Answer-Mode header field as
specified in IETF RFC 5373 [27] set to \"Manual\" contained in the header
portion of the SIP URI present in the application/resource-lists MIME body
referenced by a \"cid\" URL in the Refer-To header field, and the \ element of the \ element is not present in the
MCVideo user profile document (see the MCVideo user profile document in 3GPP
TS 24.484 [25]) on the participating MCVideo function or is present with the
value \"false\" (indicating that the user identified by the MCVideo ID is not
authorised to initiate private call with manual commencement), shall reject
the \"SIP REFER request for pre-established session\" with a SIP 403
(Forbidden) response including warning text set to \"126 user not authorised
to make private call with manual commencement\" in a Warning header field as
specified in clause 4.4 and shall not continue with the rest of the steps;
c) if the \ element of the \ element is not
present in the MCVideo user profile document (see the MCVideo user profile
document in 3GPP TS 24.484 [25]) on the participating MCVideo function or is
present with the value \"false\", and the SIP REFER request contained a Priv-
Answer-Mode header field as specified in IETF RFC 5373 [27] set to \"Auto\" in
the header portion of the SIP URI in the application/resource-lists MIME body
referenced by a \"cid\" URL in the Refer-To header field, shall reject the
\"SIP INVITE request for originating participating MCVideo function\" with a
SIP 403 (Forbidden) response including warning text set to \"143 not
authorised to force auto answer\" in a Warning header field as specified in
clause 4.4, and shall not continue with the rest of the steps;
d) if the \ element exists in the MCVideo user profile document
with one more \ elements (see the MCVideo user profile document in 3GPP
TS 24.484 [25]) and:
i) if the SIP-URI in the application/resource-lists MIME body referenced by a
\"cid\" URL in the Refer-To header field not match with one of the \
elements of the \ element of the MCVideo user profile document
(see the MCVideo user profile document in 3GPP TS 24.484 [25]); and
ii) if configuration is not set in the MCVideo user profile document (see the
MCVideo user profile document in 3GPP TS 24.484 [25]) that allows the MCVideo
user to make a private call to users not contained within the \
elements of the \ element;
then:
i) shall reject the \"SIP INVITE request for originating participating MCVideo
function\" with a SIP 403 (Forbidden) response including warning text set to
\"144 user not authorised to call this particular user\" in a Warning header
field as specified in clause 4.4 and shall not continue with the rest of the
steps;
11) if the \"SIP REFER request for a pre-established session\" contained a
Refer-Sub header field containing \"false\" value and a Supported header field
containing \"norefersub\" value, shall handle the SIP REFER request as
specified in 3GPP TS 24.229 [11], IETF RFC 3515 [63] as updated by IETF RFC
6665 [16], and IETF RFC 4488 [31] without establishing an implicit
subscription;
12) shall generate a final SIP 200 (OK) response to the \"SIP REFER request
for a pre-established session\" according to 3GPP TS 24.229 [11];
NOTE 3: In accordance with IETF RFC 4488 [31], the participating MCVideo
function inserts the Refer-Sub header field containing the value \"false\" in
the SIP 200 (OK) response to the SIP REFER request to indicate that it has not
created an implicit subscription.
13) shall send the response to the \"SIP REFER request for a pre-established
session\" towards the MCVideo client according to 3GPP TS 24.229 [11];
14) shall generate a SIP INVITE request as specified in clause 6.3.2.1.4 with
the following clarifications:
a) if the conditions in step 11) above were executed and the participating
MCVideo function determined that the \"uri\" attribute of only one of the
\ elements of the application/resource-lists MIME body matched with an
\ element of the \ element of the MCVideo user profile
document (see the MCVideo user profile document in 3GPP TS 24.484 [25]) then
the \ in the application/vnd.3gpp.mcvideo-info+xml MIME body of
the SIP INVITE request generated in clause 6.3.2.1.4 is set to \"private\";
and
b) if the conditions in step 11) above were executed, then only the \
element(s) of the application/resource-lists MIME body that have a \"uri\"
attribute that matched with an \ elements of the \ element
of the MCVideo user profile document (see the MCVideo user profile document in
3GPP TS 24.484 [25]) are included in the application/resource-lists MIME body
in the SIP INVITE request generated in clause 6.3.2.1.3;
15) shall set the Request-URI of the SIP INVITE request to the public service
identity of the controlling MCVideo function hosting the private call service
for the calling MCVideo user as determined above in step 7);
16) if the call is a private call:
a) if the SIP REFER request contained a Priv-Answer-Mode header field as
specified in IETF RFC 5373 [27] set to \"Manual\" in the header portion of the
SIP URI in the application/resource-lists MIME body referenced by a \"cid\"
URL in the Refer-To header field, shall copy the Priv-Answer-Mode header field
from the incoming SIP REFER request to the outgoing SIP INVITE request;
b) if the \ element of the \ element is
present in the MCVideo user profile document with the value \"true\" (see the
MCVideo user profile document in 3GPP TS 24.484 [25]) on the participating
MCVideo function, and the Priv-Answer-Mode header field specified in IETF RFC
5373 [27] was received in the header portion of the SIP URI in the
application/resource-lists MIME body referenced by a \"cid\" URL in the Refer-
To header field, with a value set to \"Auto\", shall copy the Priv-Answer-Mode
header field to the outgoing SIP INVITE request; and
c) if a Priv-Answer-Mode header field containing the value of \"Auto\" has not
been copied to the outgoing SIP INVITE request as specified in step 16) above,
and the incoming SIP REFER request contained an Answer-Mode header field in
the headers portion of the SIP URI in the application/resource-lists
referenced by a \"cid\" URL in the Refer-To header field, then copy the
Answer-Mode header field to the outgoing SIP INVITE request;
17) if the received SIP REFER request contained a Resource-Priority header
field, shall include in the outgoing SIP INVITE request a Resource-Priority
header field according to rules and procedures of 3GPP TS 24.229 [11] set to
the value indicated in the Resource-Priority header field of the received SIP
REFER request; and
NOTE 4: The participating MCVideo function will leave verification of the
Resource-Priority header field to the controlling MCVideo function.
18) shall forward the SIP INVITE request according to 3GPP TS 24.229 [11].
Upon receiving SIP provisional responses for the SIP INVITE request the
participating MCVideo function:
1) shall discard the received SIP responses without forwarding them.
Upon receiving a SIP 200 (OK) response for the SIP INVITE request the
participating MCVideo function:
1) shall interact with the media plane as specified in 3GPP TS 24.581 [5]; and
Upon receipt of a SIP 4xx, 5xx or 6xx response to the above SIP INVITE request
in step 21) the participating MCVideo function:
1) shall interact with the media plane as specified in 3GPP TS 24.581 [5].
###### 10.2.2.3.1.3 Receipt of SIP re-INVITE for MCVideo private call from the
served user
This clause covers both on-demand session and pre-established sessions.
Upon receipt of a SIP re-INVITE request for an existing MCVideo private call
session the participating MCVideo function:
1) may reject the SIP re-INVITE request depending on the value of the
Resource-Priority header field if the Resource-Priority header field is
included in the received SIP re-INVITE request according to rules and
procedures specified in IETF RFC 4412 [33] and skip the rest of the steps;
2) if unable to process the request due to a lack of resources or a risk of
congestion exists, may reject the \"SIP INVITE request for originating
participating MCVideo function\" with a SIP 500 (Server Internal Error)
response. The participating MCVideo function may include a Retry-After header
field to the SIP 500 (Server Internal Error) response as specified in IETF RFC
3261 [15];
NOTE 1: If the SIP re-INVITE request contains an emergency indication, the
participating MCVideo function can choose to accept the request.
3) shall determine the MCVideo ID of the calling user from public user
identity in the P-Asserted-Identity header field of the SIP INVITE request and
shall authorise the user;
NOTE 2: The MCVideo ID of the calling user is bound to the public user
identity at the time of service authorisation, as documented in clause 7.3.
4) shall validate the media parameters and if the MCVideo video media codec is
not offered in the SIP re-INVITE request shall reject the request with a SIP
488 (Not Acceptable Here) response and skip the rest of the steps;
NOTE 3: If the received SIP re-INVITE request is received within a pre-
established session, associated with an MCVideo private call, the media-level
clause for the offered MCVideo video media stream and the media-level clause
of the offered media-transmission control entity are expected to be the same
as was negotiated in the existing pre-established session.
5) shall generate a SIP re-INVITE request as specified in clause 6.3.2.1.9;
6) shall set the \ element in an
application/vnd.3gpp.mcvideo-info+xml MIME body of the SIP re-INVITE request
to the MCVideo ID of the calling user;
7) shall, if the SIP re-INVITE request was received within an on-demand
session include in the SIP re-INVITE request an SDP containing the current
media parameters used by the existing session;
8) shall, if the SIP re-INVITE request was received within a pre-established
session, include in the SIP re-INVITE request an SDP offer based upon the
previously negotiated SDP for the pre-established session as specified in
clause 6.3.2.1.1.2;
9) shall include a Resource-Priority header field according to rules and
procedures of 3GPP TS 24.229 [11] set to the value indicated in the Resource-
Priority header field if included in the SIP re-INVITE request from the
MCVideo client; and
10) shall forward the SIP re-INVITE request, according to 3GPP TS 24.229 [11].
Upon receiving a SIP 200 (OK) response, the participating MCVideo function:
1) shall generate a SIP 200 (OK) response as specified in the clause
6.3.2.1.5.2;
2) if the SIP 200 (OK) response is to be sent within an on-demand session
shall include in the SIP 200 (OK) response an SDP answer as specified in the
clause 6.3.2.1.2.1;
3) if the SIP 200 (OK) response is to be sent within a pre-established session
shall include in the SIP 200 (OK) response an SDP answer based upon the
previously negotiated SDP for the pre-established session;
4) shall include Warning header field(s) received in the incoming SIP 200 (OK)
response;
5) shall include the P-Asserted-Identity header field received in the incoming
SIP 200 (OK) response into the outgoing SIP 200 (OK) response;
6) shall send the SIP 200 (OK) response to the MCVideo client according to
3GPP TS 24.229 [11]; and
7) shall interact with the media plane as specified in 3GPP TS 24.581 [5].
The participating MCVideo function shall forward any other SIP response that
does not contain SDP, including any MIME bodies contained therein, along the
signalling path to the originating network according to 3GPP TS 24.229 [11].
##### 10.2.2.3.2 Terminating procedures
This clause covers both on demand session and pre-established session.
Upon receipt of a \"SIP INVITE request for terminating participating MCVideo
function\", the participating MCVideo function:
1) if unable to process the request due to a lack of resources or a risk of
congestion exists, may reject the \"SIP INVITE request for terminating
participating MCVideo function\" with a SIP 500 (Server Internal Error)
response. The participating MCVideo function may include a Retry-After header
field to the SIP 500 (Server Internal Error) response as specified in IETF RFC
3261 [15], and shall not continue with the rest of the steps;
2) shall check the presence of the isfocus media feature tag in the URI of the
Contact header field and if it is not present then the participating MCVideo
function shall reject the request with a SIP 403 (Forbidden) response with the
warning text set to \"104 isfocus not assigned\" in a Warning header field as
specified in clause 4.4, and shall not continue with the rest of the steps;
3) if the \ element of the application/vnd.3gpp.mcvideo-info+xml
MIME body is set to \"private\" and the Answer-Mode Indication in the
application/poc-settings+xml MIME body has not yet been received from the
invited MCVideo client as defined in clause 7.3.3 or clause 7.3.4, shall
reject the request with a SIP 480 (Temporarily Unavailable) response with the
warning text set to \"146 T-PF unable to determine the service settings for
the called user\" in a Warning header field as specified in clause 4.4 and
shall not continue with the rest of the steps;
4) shall use the MCVideo ID present in the \ element of
the application/vnd.3gpp.mcvideo-info+xml MIME body of the incoming SIP INVITE
request to retrieve the binding between the MCVideo ID and public user
identity;
5) if the binding between the MCVideo ID and public user identity does not
exist, then the participating MCVideo function shall reject the SIP INVITE
request with a SIP 404 (Not Found) response. Otherwise, continue with the rest
of the steps;
6) when the called user identified by the MCVideo ID is unable to participate
in private calls as identified in the called user\'s MCVideo user profile
document (see the MCVideo user profile document in 3GPP TS 24.484 [25]) on the
terminating participating MCVideo function, shall reject the \"SIP INVITE
request for terminating participating MCVideo function\" with a SIP 403
(Forbidden) response including warning text set to \"127 user not authorised
to be called in private call\" in a Warning header field as specified in
clause 4.4;
7) shall perform the automatic commencement procedures specified in clause
6.3.2.2.5.1 and according to IETF RFC 5373 [27] if one of the following
conditions are met:
a) \"SIP INVITE request for terminating participating MCVideo function\"
contains an Answer-Mode header field with the value \"Auto\";
b) \"SIP INVITE request for terminating participating MCVideo function\" does
not contain an Answer-Mode header field and the Answer-Mode Indication
received in the application/poc-settings+xml MIME body received from the
invited MCVideo client as per clause 7.3.3 or clause 7.3.4 is set to \"auto-
answer\"; or
c) \"SIP INVITE request for terminating participating MCVideo function\"
contains a Priv-Answer-Mode header field with the value \"Auto\"; and
8) shall perform the manual commencement procedures specified in clause
6.3.2.2.6.1 and according to IETF RFC 5373 [27] if either of the following
conditions are met:
a) \"SIP INVITE request for terminating participating MCVideo function\"
contains an Answer-Mode header field with the value \"Manual\";
b) \"SIP INVITE request for terminating participating MCVideo function\" does
not contain an Answer-Mode header field and Answer-Mode Indication received in
the application/poc-settings+xml MIME body received from the invited MCVideo
client as per clause 7.3.3 or clause 7.3.4 is set to \"manual-answer\"; or
c) \"SIP INVITE request for terminating participating MCVideo function\"
contains a Priv-Answer-Mode header field with the value \"Manual\".
##### 10.2.2.3.3 Receipt of SIP re-INVITE request by terminating participating
function
This clause covers the on-demand session case only.
Upon receipt of a SIP re-INVITE request for an existing MCVideo private call
session the participating MCVideo function:
1) if unable to process the request due to a lack of resources or a risk of
congestion exists, may reject the SIP re-INVITE with a SIP 500 (Server
Internal Error) response. The participating MCVideo function may include a
Retry-After header field to the SIP 500 (Server Internal Error) response as
specified in IETF RFC 3261 [15] and skip the rest of the steps;
NOTE 1: If the SIP re-INVITE request contains an emergency indication, the
participating MCVideo function can choose to accept the request.
2) shall use the MCVideo ID present in the \ element of
the application/vnd.3gpp.mcvideo-info+xml MIME body of the incoming SIP re-
INVITE request to retrieve the binding between the MCVideo ID and public user
identity;
3) if the binding between the MCVideo ID and public user identity does not
exist, then the participating MCVideo function shall reject the SIP re-INVITE
request with a SIP 404 (Not Found) response and skip the rest of the steps;
4) shall generate a SIP re-INVITE as specified in clause 6.3.2.2.10;
NOTE 2: As this is the modification of an in-progress MCVideo private call,
this procedure does not attempt modification of the existing answer-mode of
the call.
5) shall include in the SIP re-INVITE request an SDP offer containing the
current media parameters used by the existing session; and
6) shall send the SIP re-INVITE request towards the MCVideo client according
to 3GPP TS 24.229 [11].
Upon receiving the SIP 200 (OK) response to the SIP re-INVITE request, the
participating MCVideo function:
1) shall generate a SIP 200 (OK) response as described in the clause
6.3.2.2.4.2;
2) shall include in the SIP 200 (OK) response an SDP answer based on the SDP
answer in the received SIP 200 (OK) response as specified in clause
6.3.2.2.2.1;
3) shall copy the P-Asserted-Identity header field from the incoming SIP 200
(OK) response to the outgoing SIP 200 (OK) response;
4) shall interact with the media plane as specified in 3GPP TS 24.581 [5]; and
5) shall forward the SIP 200 (OK) response according to 3GPP TS 24.229 [11].
The participating MCVideo function shall forward any other SIP response that
does not contain SDP along the signalling path to the originating network
according to 3GPP TS 24.229 [11].
#### 10.2.2.4 Controlling MCVideo function procedures
##### 10.2.2.4.1 Originating procedures
This clause describes the procedures for inviting an MCVideo user to an
MCVideo session. The procedure is initiated by the controlling MCVideo
function as the result of an action in clause 10.2.2.4.2
The controlling MCVideo function:
1) shall generate a SIP INVITE request as specified in clause 6.3.3.1.2;
NOTE 1: As a result of calling clause 6.3.3.1.2, the \ containing the calling user\'s MCVideo ID is copied into the outgoing SIP
INVITE.
2) if the received SIP INVITE request contains an authorised request for an
MCVideo emergency private call as determined by clause 6.3.3.1.13.2:
a) shall set the \ element of the application/vnd.3gpp.mcvideo-
info+xml MIME body to a value of \"true\";
b) if the received SIP INVITE request contains an alert indication set to a
value of \"true\" and this is an authorised request for an MCVideo emergency
alert meeting the conditions specified in clause 6.3.3.1.13.1, perform the
procedures specified in clause 6.3.3.1.12; and
c) if the received SIP INVITE request did not contain an alert indication or
contains an alert indication set to a value of \"true\" and is not an
authorised request for an MCVideo emergency alert meeting the conditions
specified in clause 6.3.3.1.13.1, shall set the \ element of the
application/vnd.3gpp.mcvideo-info+xml MIME body to a value of \"false\";
3) shall copy the MCVideo ID of the MCVideo user listed in the MIME resources
body of the incoming SIP INVITE request, into the \
element in the application/vnd.3gpp.mcvideo-info+xml MIME body of the outgoing
SIP INVITE request;
4) shall set the Request-URI to the public service identity of the terminating
participating MCVideo function associated to the MCVideo user to be invited;
NOTE 2: How the controlling MCVideo function finds the address of the
terminating MCVideo participating function is out of the scope of the current
release.
NOTE 3: If the terminating MCVideo user is part of a partner MCVideo system,
then the public service identity can identify an entry point in the partner
network that is able to identify the terminating participating MCVideo
function.
5) shall copy the public user identity of the calling MCVideo user from the
P-Asserted-Identity header field of the incoming SIP INVITE request into the
P-Asserted-Identity header field of the SIP INVITE request;
6) shall include a Resource-Priority header field populated with the values
for an MCVideo emergency private call as specified in clause 6.3.3.1.19, if
either of the following conditions is met:
a) if the received SIP INVITE request contains an authorised request for an
MCVideo emergency private call as determined in step 2 above; or
b) the originating MCVideo user is in an in-progress emergency private call
state with the targeted MCVideo user;
7) shall include in the SIP INVITE request an SDP offer based on the SDP offer
in the received SIP INVITE request from the originating network according to
the procedures specified in clause 6.3.3.1.1;
8) shall send the SIP INVITE request towards the core network according to
3GPP TS 24.229 [11]; and
9) shall start a private call timer with a value set to the configured max
private call duration for the user.
Upon receiving SIP 200 (OK) response for the SIP INVITE request the
controlling MCVideo function:
1) shall cache the contact received in the Contact header field; and
2) shall interact with the media plane as specified in 3GPP TS 24.581 [5].
Upon expiry of the private call timer, the controlling MCVideo function shall
follow the procedure for releasing private call session as specified in clause
10.2.5.4.
##### 10.2.2.4.2 Terminating procedures
In the procedures in this clause:
1) \ refers to the \ element of the
application/vnd.3gpp.mcvideo-info+xml MIME body;
2) \ refers to the \ element of the
application/vnd.3gpp.mcvideo-info+xml MIME body; and
3) \ refers to the \ element of an
application/vnd.3gpp.mcvideo-info+xml MIME body.
Upon receipt of:
\- a \"SIP INVITE request for controlling MCVideo function of a private
call\"; or
the controlling MCVideo function:
1) if the \ in the SIP INVITE request is set to \"private\":
a) shall check whether the public service identity contained in the Request-
URI is allocated for private call and perform the actions specified in clause
6.3.7.1 if it is not allocated and skip the rest of the steps; and
b) shall perform actions to verify the MCVideo ID of the inviting MCVideo user
in the \ element of the application/vnd.3gpp.mcvideo-
info+xml MIME body of the SIP INVITE request, and authorise the request
according to local policy, and if it is not authorised the controlling MCVideo
function shall return a SIP 403 (Forbidden) response with the warning text as
specified in \"Warning header field\" and skip the rest of the steps;
2) if the incoming SIP INVITE request does not contain an
application/resource-lists MIME body shall reject the SIP INVITE request with
a SIP 403 (Forbidden) response including warning text set to \"145 unable to
determine called party\" in a Warning header field as specified in clause 4.4,
and shall not continue with the rest of the steps;
3) if the \ is set to \"private\" and the application/resource-
lists MIME body contains more than one \ element, shall reject the
\"SIP INVITE request for originating participating MCVideo function\" with a
SIP 403 (Forbidden) response including warning text set to \"145 unable to
determine called party\" in a Warning header field as specified in clause 4.4,
and shall not continue with the rest of the steps;
4) shall validate that the received SDP offer includes at least one media
stream for which the media parameters and at least one codec or media format
is acceptable by the controlling MCVideo function and if not, reject the
request with a SIP 488 (Not Acceptable Here) response and skip the rest of the
steps;
5) if received SIP INVITE request includes an \, shall validate
the request as described in clause 6.3.3.1.17;
6) if the received SIP INVITE request contains an unauthorised request for an
MCVideo emergency private call as determined by clause 6.3.3.1.13.2:
a) shall reject the SIP INVITE request with a SIP 403 (Forbidden) response as
specified in clause 6.3.3.1.14; and
b) shall send the SIP 403 (Forbidden) response as specified in 3GPP TS 24.229
[4] and skip the rest of the steps;
7) if a Resource-Priority header field is included in the received SIP INVITE
request and if the Resource-Priority header field is set to the value
indicated for emergency calls, shall reject the SIP INVITE request with a SIP
403 (Forbidden) response and skip the remaining steps if neither one of the
following conditions are true:
a) the SIP INVITE request does not contain an authorised request for an
MCVideo emergency call as determined in step 4 above; or
b) the originating MCVideo user is not in an in-progress emergency private
call state with the targeted MCVideo user;
8) if:
a) the received SIP INVITE request contains an emergency indication set to a
value of \"true\";
b) the originating MCVideo user is not in an in-progress emergency private
call state with the targeted MCVideo user; and
c) if the \ in the SIP INVITE request is set to \"private\";
then:
a) shall cache the information that the MCVideo user has initiated an MCVideo
emergency private call to the targeted user; and
b) shall cache the information that the MCVideo user is in an in-progress
emergency private call state with the targeted MCVideo user;
9) shall perform actions as described in clause 6.3.3.2.2;
10) shall allocate an MCVideo session identity for the MCVideo session; and
11) shall invite the MCVideo user(s) listed in the MIME resource-lists body of
received SIP INVITE request as specified in clause 10.2.2.4.1.
Upon receiving a SIP 180 (Ringing) response and if the SIP 180 (Ringing)
response or the SIP final response has not yet been sent to the inviting
MCVideo client, the controlling MCVideo function:
1) if the SIP 180 (Ringing) response is associated with a SIP INVITE that
contained a \ set to \"private\", shall generate a SIP 180
(Ringing) response to the SIP INVITE request and send the SIP 180 (Ringing)
response towards the inviting MCVideo client according to 3GPP TS 24.229 [11];
and
Upon receiving a SIP 200 (OK) response for the SIP INVITE request, the SIP
dialog was established as a result of receiving a SIP INVITE request with a
\ element set to the value of \"private\" and the SIP final
response has not yet been sent to the inviting MCVideo client, the controlling
MCVideo function:
1) shall generate a SIP 200 (OK) response to the SIP INVITE request as
specified in the clause 6.3.3.2.3.2 before continuing with the rest of the
steps;
2) shall include in the SIP 200 (OK) response an SDP answer to the SDP offer
in the incoming SIP INVITE request as specified in the clause 6.3.3.2.2;
3) if the received SIP INVITE request contains an alert indication set to a
value of \"true\" and this is an unauthorised request for an MCVideo emergency
alert as specified in clause 6.3.3.1.13.1, shall include in the SIP 200 (OK)
response the warning text set to \"149 SIP INFO request pending\" in a Warning
header field as specified in clause 4.4;
NOTE 1: This is the case when the MCVideo user\'s request for an MCVideo
emergency private call was granted but the request for the MCVideo emergency
alert was denied.
4) shall interact with the media plane as specified in 3GPP TS 24.581 [5]; and
NOTE 2: Resulting media plane processing is completed before the next step is
performed.
5) shall send a SIP 200 (OK) response towards the inviting MCVideo client
according to 3GPP TS 24.229 [11].
Upon receiving a SIP 200 (OK) response for the SIP INVITE request, the SIP
dialog was established as a result of receiving a SIP INVITE request with a
\ element set to the value of \"first-to-answer\" and the SIP
final response has not yet been sent to the inviting MCVideo client the
controlling MCVideo function:
1) shall generate a SIP 200 (OK) response to the SIP INVITE request as
specified in the clause 6.3.3.2.3.2 before continuing with the rest of the
steps;
2) shall include in the SIP 200 (OK) response an SDP answer to the SDP offer
in the incoming SIP INVITE request as specified in the clause 6.3.3.2.1;
3) the received SIP INVITE request contains an emergency indication set to a
value of \"true\":
a) shall cache the information that the MCVideo user has initiated an MCVideo
emergency private call to the targeted user; and
b) shall cache the information that the MCVideo user is in an in-progress
emergency private call state with the targeted MCVideo user;
4) if the received SIP INVITE request contains an alert indication set to a
value of \"true\" and this is an unauthorised request for an MCVideo emergency
alert as specified in clause 6.3.3.1.13.1, shall include in the SIP 200 (OK)
response the warning text set to \"149 SIP INFO request pending\" in a Warning
header field as specified in clause 4.4;
NOTE 3: This is the case when the MCVideo user\'s request for an MCVideo
emergency private call was granted but the request for the MCVideo emergency
alert was denied.
5) shall interact with the media plane as specified in 3GPP TS 24.380 [5];
NOTE 4: Resulting media plane processing is completed before the next step is
performed.
6) shall send a SIP 200 (OK) response towards the inviting MCVideo client
according to 3GPP TS 24.229 [4]; and
7) if not successful in cancelling or terminating SIP dialogs in step 6)
above, may repeat the SIP CANCEL and SIP BYE requests.
Upon receiving a SIP ACK to the SIP 200 (OK) response sent towards the
inviting MCVideo client, where the SIP 200 (OK) response was sent with a
Warning header field as specified in clause 4.4 with the warning text
containing the mcvideo-warn-code set to \"149\", the controlling MCVideo
function shall follow the procedures in clause 6.3.3.1.18.
The controlling MCVideo function shall forward any other SIP response that
does not contain SDP, including any MIME bodies contained therein, along the
signalling path to the originating network according to 3GPP TS 24.229 [11].
##### 10.2.2.4.3 Receiving a SIP re-INVITE for upgrade to emergency private
call
In the procedures in this clause:
1) emergency indication in an incoming SIP re-INVITE request refers to the
\ element of the application/vnd.3gpp.mcvideo-info+xml MIME
body; and
2) alert indication in an incoming SIP re-INVITE request refers to the
\ element of the application/vnd.3gpp.mcvideo-info+xml MIME body.
Upon receiving a SIP re-INVITE request with an emergency indication set to a
value of \"true\", the controlling MCVideo function:
1) shall validate that the received SDP offer includes at least one media
stream for which the media parameters and at least one codec or media format
is acceptable by the controlling MCVideo function and if not, reject the
request with a SIP 488 (Not Acceptable Here) response and skip the rest of the
steps;
2) shall validate the request as described in clause 6.3.3.1.17;
3) if the SIP re-INVITE request contains an unauthorised request for an
MCVideo emergency private call as determined by clause 6.3.3.1.13.2:
a) shall reject the SIP INVITE request with a SIP 403 (Forbidden) response as
specified in clause 6.3.3.1.14; and
b) shall send the SIP 403 (Forbidden) response as specified in 3GPP TS 24.229
[4] and skip the rest of the steps;
4) if a Resource-Priority header field is included in the received SIP re-
INVITE request and if the Resource-Priority header field is set to the value
indicated for emergency calls, shall reject the SIP re-INVITE request with a
SIP 403 (Forbidden) response and skip the remaining steps if neither of the
following conditions are true:
a) the SIP re-INVITE request does contains an authorised request for an
MCVideo emergency call as determined in step 2 above; or
b) the originating MCVideo user is in an in-progress emergency private call
state with the targeted MCVideo user;
5) if the SIP re-INVITE request contains an emergency indication set to a
value of \"true\" and the originating MCVideo user is not in an in-progress
emergency private call state with the targeted MCVideo user:
a) shall cache the information that the MCVideo user is in an in-progress
emergency private call state with the targeted MCVideo user; and
b) if the SIP re-INVITE request contains an alert indication set to \"true\"
and this is an authorised request for an MCVideo emergency alert as specified
in clause 6.3.3.1.13.1, shall cache the information that the MCVideo user has
sent an MCVideo emergency alert to the targeted user; and
6) shall send a SIP re-INVITE invite towards the MCVideo user listed in the
MIME resource-lists body of received SIP re-INVITE request as specified in
clause 11.1.1.4.5.
Upon receiving a SIP 200 (OK) response for the SIP re-INVITE request and if
the SIP response has not yet been sent to the inviting MCVideo client, the
controlling MCVideo function:
1) shall generate a SIP 200 (OK) response to the SIP re-INVITE request as
specified in the clause 6.3.3.2.3 before continuing with the rest of the
steps;
2) shall include in the SIP 200 (OK) response an SDP answer to the SDP offer
in the incoming SIP re-INVITE request containing the current media parameters
used by the existing session;
3) if the received SIP re-INVITE request contains an alert indication set to a
value of \"true\" and this is an unauthorised request for an MCVideo emergency
alert as specified in clause 6.3.3.1.13.1, shall include in the SIP 200 (OK)
response the warning text set to \"149 SIP INFO request pending\" in a Warning
header field as specified in clause 4.4.
NOTE: When a SIP 200 (OK) response sent to the originator as a response to a
SIP INVITE request that contained authorised request(s) for an MCVideo
emergency private call and optionally an MCVideo emergency alert, the
originator will consider a SIP 200 (OK) response populated in this manner as
confirmation that its request(s) for an upgrade to an MCVideo emergency
private call and optionally an MCVideo emergency alert were accepted by the
controlling function.
4) shall interact with the media plane as specified in 3GPP TS 24.380 [5]; and
5) shall send the SIP 200 (OK) response towards the inviting MCVideo client
according to 3GPP TS 24.229 [4].
Upon receiving a SIP ACK to the SIP 200 (OK) response sent towards the
inviting MCVideo client, and the SIP 200 (OK) response was sent with the
warning text set to \"149 SIP INFO request pending\" in a Warning header field
as specified in clause 4.4, the controlling MCVideo function shall follow the
procedures in clause 6.3.3.1.18:
The controlling MCVideo function shall forward any other SIP response that
does not contain SDP, including any MIME bodies contained therein, along the
signalling path to the originating network according to 3GPP TS 24.229 [4].
##### 10.2.2.4.4 Receiving a SIP re-INVITE for cancellation of emergency
private call
In the procedures in this clause:
1) emergency indication in an incoming SIP INVITE request refers to the
\ element of the application/vnd.3gpp.mcvideo-info+xml MIME
body; and
2) alert indication in an incoming SIP INVITE request refers to the \ element of the application/vnd.3gpp.mcvideo-info+xml MIME body.
Upon receiving a SIP re-INVITE request with an emergency indication set to a
value of \"false\", the controlling MCVideo function:
1) shall validate that the received SDP offer includes at least one media
stream for which the media parameters and at least one codec or media format
is acceptable by the controlling MCVideo function and if not, reject the
request with a SIP 488 (Not Acceptable Here) response and skip the rest of the
steps;
2) shall validate the request as described in clause 6.3.3.1.17;
3) if the SIP re-INVITE request contains an unauthorised request for an
MCVideo emergency private call cancellation as determined by clause
6.3.3.1.13.4:
a) shall reject the SIP re-INVITE request with a SIP 403 (Forbidden) response;
b) shall include in the SIP 403 (Forbidden) response an
application/vnd.3gpp.mcvideo-info+xml MIME body as specified in annex F.1 with
an \ element set to a value of \"true\";
c) if the SIP re-INVITE request contains an alert indication set to \"false\"
and this is an unauthorised request for an MCVideo emergency alert
cancellation as specified in clause 6.3.3.1.13.3, shall include in the SIP 403
(Forbidden) response an application/vnd.3gpp.mcvideo-info+xml MIME body with
an \ element set to \"true; and
d) shall send the SIP 403 (Forbidden) response as specified in 3GPP TS 24.229
[4] and skip the rest of the steps;
4) shall reject the SIP re-INVITE request with a SIP 403 (Forbidden) response
if a Resource-Priority header field is included in the received SIP re-INVITE
request set to the value configured for emergency calls, and skip the
remaining steps; and
5 if the SIP re-INVITE request contains an authorised request for an MCVideo
emergency private call cancellation as determined by clause 6.3.3.1.13.4:
a) shall clear the cache of the MCVideo ID of the originator of the MCVideo
emergency private call that is no longer in an in-progress emergency private
call state with the targeted MCVideo user; and
b) if the SIP re-INVITE request contains an alert indication set to \"false\"
and this is an authorised request for an MCVideo emergency alert cancellation
meeting the conditions specified in clause 6.3.3.1.13.3:
i) if the received SIP re-INVITE request contains an \ element
in the application/vnd.3gpp.mcvideo-info+xml MIME body, shall clear the cache
of the MCVideo ID of MCVideo user identified by the \ element
as having an outstandingMCVideo emergency alert; and
ii) if the received SIP re-INVITE request does not contain an \
element in the application/vnd.3gpp.mcvideo-info+xml MIME body, clear the
cache of the MCVideo ID of the sender of the SIP re-INVITE request as having
an outstanding MCVideo emergency alert;
6) shall send a SIP re-INVITE request towards the MCVideo user listed in the
MIME resource-lists body of received SIP re-INVITE request as specified in
clause 11.1.1.4.6.
Upon receiving a SIP 200 (OK) response for the SIP re-INVITE request and if
the SIP response has not yet been sent to the inviting MCVideo client, the
controlling MCVideo function:
1) shall generate a SIP 200 (OK) response to the SIP re-INVITE request as
specified in the clause 6.3.3.2.3 before continuing with the rest of the
steps;
2) shall include in the SIP 200 (OK) response an SDP answer to the SDP offer
in the incoming SIP re-INVITE request as specified in the clause 6.3.3.2.2;
3) if the received SIP re-INVITE request contains an alert indication set to a
value of \"false\" and this is an unauthorised request for an MCVideo
emergency alert cancellation as specified in clause 6.3.3.1.13.3, shall
include in the SIP 200 (OK) response the warning text set to \"149 SIP INFO
request pending\" in a Warning header field as specified in clause 4.4.
NOTE: When a SIP 200 (OK) response sent to the originator as a response to a
SIP INVITE request that contained authorised request(s) for an MCVideo
emergency private call cancellation and optionally an MCVideo emergency alert
cancellation, the originator will consider a SIP 200 (OK) response populated
in this manner as confirmation that its request(s) for cancellation of an
MCVideo emergency private call and optionally an MCVideo emergency alert were
accepted by the controlling function.
4) shall interact with the media plane as specified in 3GPP TS 24.380 [5]; and
5) shall send the SIP 200 (OK) response towards the inviting MCVideo client
according to 3GPP TS 24.229 [4].
Upon receiving a SIP ACK to the SIP 200 (OK) response sent towards the
inviting MCVideo client, and the SIP 200 (OK) response was sent with the
warning text set to \"149 SIP INFO request pending\" in a Warning header field
as specified in clause 4.4, the controlling MCVideo function shall follow the
procedures in clause 6.3.3.1.18.
The controlling MCVideo function shall forward any other SIP response that
does not contain SDP, including any MIME bodies contained therein, along the
signalling path to the originating network according to 3GPP TS 24.229 [4].
##### 10.2.2.4.5 Sending a SIP re-INVITE for upgrade to emergency private call
This clause describes the procedures for sending a re-INVITE request to an
MCVideo user in an MCVideo private call for the purpose of upgrading the
session to an emergency private call session. The procedure is initiated by
the controlling MCVideo function as the result of an action in clause
11.1.1.4.3.
The controlling MCVideo function:
1) shall generate a SIP re-INVITE request as specified in clause 6.3.3.1.9;
2) if the received SIP re-INVITE request contained an
application/vnd.3gpp.mcvideo-info+xml MIME body, shall copy the
application/vnd.3gpp.mcvideo-info+xml MIME body to the outgoing re-INVITE
request;
3) if the received SIP re-INVITE request contains an authorised request for an
MCVideo emergency private call as determined by clause 6.3.3.1.13.2:
a) shall set the \ element of the application/vnd.3gpp.mcvideo-
info+xml MIME body to a value of \"true\";
b) if the received SIP INVITE request contains an alert indication set to a
value of \"true\" and this is an authorised request for an MCVideo emergency
alert meeting the conditions specified in clause 6.3.3.1.13.1, perform the
procedures specified in clause 6.3.3.1.12; and
c) if the received SIP INVITE request did not contain an alert indication or
contains an alert indication set to a value of \"true\" and is not an
authorised request for an MCVideo emergency alert meeting the conditions
specified in clause 6.3.3.1.13.1, shall set the \ element of the
application/vnd.3gpp.mcvideo-info+xml MIME body to a value of \"false\";
4) shall include a Resource-Priority header field populated with the values
for an MCVideo emergency private call as specified in clause 6.3.3.1.19, if
the received SIP re-INVITE request contains an authorised request for an
MCVideo emergency private call as determined in step 2 above; and
5) shall send the SIP re-INVITE request towards the core network according to
3GPP TS 24.229 [4].
Upon receiving SIP 200 (OK) response for the SIP re-INVITE request the
controlling MCVideo function:
1) shall cache the contact received in the Contact header field.
##### 10.2.2.4.6 Sending a SIP re-INVITE for cancellation of emergency private
call
This clause describes the procedures for sending a re-INVITE request to an
MCVideo user in an MCVideo emergency private call for the purpose of
downgrading the session to a normal priority private call session. The
procedure is initiated by the controlling MCVideo function as the result of an
action in clause 11.1.1.4.4.
The controlling MCVideo function:
1) shall generate a SIP re-INVITE request as specified in clause 6.3.3.1.9;
2) if the received SIP re-INVITE request contained an
application/vnd.3gpp.mcvideo-info+xml MIME body, shall copy the
application/vnd.3gpp.mcvideo-info+xml MIME body to the outgoing re-INVITE
request.
3) if the received SIP re-INVITE request contains an authorised request for an
MCVideo emergency private call cancellation as determined by clause
6.3.3.1.13.4:
a) shall set the \ element of the application/vnd.3gpp.mcvideo-
info+xml MIME body to a value of \"false\";
b) if the received SIP INVITE request contains an alert indication set to a
value of \"false\" and this is an authorised request for an MCVideo emergency
alert cancellation meeting the conditions specified in clause 6.3.3.1.13.3:
i) shall set the \ element of the application/vnd.3gpp.mcvideo-
info+xml MIME body to a value of \"false\"; and
ii) if the received SIP request contains an \ element in the
application/vnd.3gpp.mcvideo-info+xml MIME body, copy the contents of the
received \ element to an \ element in the
application/vnd.3gpp.mcvideo-info+xml MIME body in the outgoing SIP re-INVITE
request;
c) if the received SIP INVITE request contains an alert indication set to a
value of \"false\" and is not an authorised request for an MCVideo emergency
alert cancellation meeting the conditions specified in clause 6.3.3.1.13.3,
shall set the \ element of the application/vnd.3gpp.mcvideo-
info+xml MIME body to a value of \"true\";
4) shall include a Resource-Priority header field populated with the values
for a normal MCVideo private call as specified in clause 6.3.3.1.19, if the
received SIP re-INVITE request contains an authorised request for an MCVideo
emergency private call cancellation as determined in step 3 above; and
5) shall send the SIP re-INVITE request towards the core network according to
3GPP TS 24.229 [4].
Upon receiving SIP 200 (OK) response for the SIP re-INVITE request the
controlling MCVideo function:
1) shall cache the contact received in the Contact header field.
### 10.2.3 Private call without transmission control
#### 10.2.3.1 MCVideo client procedures
When the MCVideo user wants to make an on-demand private call without
transmission control or first-to-answer call without transmission control, the
MCVideo client shall follow the procedures in clause 10.2.2.1.1 with the
following exceptions:
1) in step 8) of clause 10.2.2.1.1, the MCVideo client shall not offer a
media-level clause for a media-transmission control entity; and
2) step 9) of clause 10.2.2.1.1 shall be ignored.
Upon receipt of an initial SIP INVITE request for the private call an SDP
offer not including a media-level clause for a media-transmission control
entity, the MCVideo client shall consider it as the request for private call
without transmission control and shall follow the procedures as specified in
clause 10.2.2.1.2 for on-demand session.
#### 10.2.3.2 Participating MCVideo function procedures
##### 10.2.3.2.1 Originating procedures
Upon receipt of a \"SIP INVITE request for originating participating MCVideo
function\" or \"SIP REFER request for a pre-established session\" for the
private call or first-to-answer call with SDP offer not including media-level
clause for media-transmission control entity, the participating MCVideo
function shall consider it as the request for the private call without
transmission control or first-to-answer call without transmission control and
shall follow the procedures as specified in clause 10.2.2.4.1.1 for an on-
demand session and shall follow the procedures as specified in clause
10.2.2.4.1.2 for initiation using a pre-established session.
##### 10.2.3.2.2 Terminating procedures
Upon receipt of a \"SIP INVITE request for terminating participating MCVideo
function\" for the private call or first-to-answer call with SDP offer not
including media-level clause for media-transmission control entity, the
participating MCVideo shall consider it as the request for the private call
without transmission control or first-to-answer call without transmission
control and shall follow the procedures as specified in clause 10.2.2.4.2.
#### 10.2.3.3 Controlling MCVideo function procedures
##### 10.2.3.3.1 Originating procedures
The controlling MCVideo function shall follow the procedures as specified in
clause 10.2.2.4.
##### 10.2.3.3.2 Terminating procedures
Upon receiving of a \"SIP INVITE request for controlling MCVideo function of a
private call\" or a \"SIP INVITE request for controlling MCVideo function of a
first-to-answer call\", with SDP offer not including media-level clause for
media-transmission control entity, the controlling MCVideo function shall
consider it as the request for the private call without transmission control
or first-to-answer call without transmission control, and shall follow the
procedures as specified in clause 10.2.2.4.2.
### 10.2.4 Ending the private call initiated by MCVideo client
#### 10.2.4.1 MCVideo client procedures
##### 10.2.4.1.1 On-demand private call
###### 10.2.4.1.1.1 Client originating procedures
Upon receiving a request from an MCVideo user to release an MCVideo private
call session established using on-demand session signalling, the MCVideo
client shall follow the procedures as specified in clause 6.2.5.1.
###### 10.2.4.1.1.2 Client terminating procedures
Upon receiving a SIP BYE request for private call session, the MCVideo client
shall follow the procedures as specified in clause 6.2.6.
#### 10.2.4.2 Participating MCVideo function procedures
##### 10.2.4.2.1 Originating procedures
###### 10.2.4.2.1.1 Receipt of SIP BYE request for on-demand private call
Upon receiving from the MCVideo client a SIP BYE request the participating
MCVideo function shall follow the procedures as specified in clause 6.3.2.1.6.
##### 10.2.4.2.2 Terminating procedures
###### 10.2.4.2.2.1 Receipt of SIP BYE request for private call on-demand
Upon receiving a SIP BYE request from the controlling MCVideo function, the
participating MCVideo function shall follow the procedures as specified in
clause 6.3.2.2.8.1.
#### 10.2.4.3 Controlling MCVideo function procedures
##### 10.2.4.3.1 Terminating procedures
Upon receiving a SIP BYE request the controlling MCVideo function shall follow
the procedures as specified in clause 6.3.3.2.4.
### 10.2.5 Ending the private call initiated by the MCVideo server
#### 10.2.5.1 General
This clause describes the procedures of each functional entity for ending the
private call initiated by the MCVideo server.
NOTE: For private call without transmission control, ending the private call
is initiated only by the MCVideo client.
#### 10.2.5.2 MCVideo client procedures
Upon receiving a SIP BYE request for private call session, the MCVideo client
shall follow the procedures as specified in clause 6.2.6.
#### 10.2.5.3 Participating MCVideo function procedures
##### 10.2.5.3.1 Originating procedures
When the MCVideo session for private call needs to be released as specified in
clause 6.3.8.2, the participating MCVideo function shall follow the procedures
in clause 6.3.3.1.5.
##### 10.2.5.3.2 Terminating procedures
###### 10.2.5.3.2.1 Receipt of SIP BYE request for private call on-demand
Upon receiving a SIP BYE request from the controlling MCVideo function, the
participating MCVideo function shall follow the procedures as specified in
clause 6.3.2.2.8.1.
#### 10.2.5.4 Controlling MCVideo function procedures
When the MCVideo session for private call needs to be released as specified in
clause 6.3.8.2, the controlling MCVideo function shall follow the procedures
in clause 6.3.3.1.5.
## 10.3 Off-network private call
### 10.3.1 General
#### 10.3.1.1 Common procedures
##### 10.3.1.1.1 Sending/Receiving a message
In order to participate in a private call, the MCVideo client:
1) shall send the MONP MCVideo message transported in a MONP MCVIDEO MESSAGE
CARRIER message, specified in 3GPP TS 24.379 [40 ], as a UDP message to the
local IP address of the MCVideo user, on UDP port 8809 (as specified in 3GPP
TS 24,379 [40]), with an IP time-to-live set to 255; and
2) shall treat UDP messages received on the port 8809 as received MONP
messages.
NOTE: An MCVideo client that supports IPv6 shall listen to the IPv6 addresses.
##### 10.3.1.1.2 Session description
One off-network MCVideo session includes one media-transmission control
entity.
The MCVideo client shall generate an SDP body for a private call in accordance
with rules and procedures of IETF RFC 4566 [2] and IETF RFC 3264 [7].
The MCVideo client:
1) shall include in the session-level section:
a) the \"o=\" field with the \ portion set to a dash;
b) the \"s=\" field with the \ portion set to a dash; and
c) the \"c=\" field with the \ portion set to \"IN\", the \
portion set to the IP version of the unicast IP address of the MCVideo client
and the \ portion set to the unicast IP address of the
MCVideo client;
2) shall include the media-level clause for audio component of MCVideo
consisting of:
a) the \"m=\" field with the \ portion set to \"audio\", the \
portion set to a port number for MCVideo group, the \ field set to
\"RTP/AVP\" and \ portion set indicating RTP payload type numbers;
b) the \"i=\" field with the \ portion set to \"audio
component of MCVideo\";
c) the \"a=fmtp:\" attribute(s), the \"a=rtpmap:\" attribute(s) or both,
indicating the codec(s) and media parameters of the audio component of
MCVideo; and
d) the \"a=rtcp:\" attribute indicating port number to be used for RTCP at the
MCVideo client selected according to the rules and procedures of IETF RFC 3605
[3], if the media steam uses other than the default IP address;
3) shall include the media-level clause for video component of MCVideo
consisting of:
a) the \"m=\" field with the \ portion set to \"video\", the \
portion set to a port number for MCVideo video of the MCVideo group, the
\ field set to \"RTP/AVP\" and \ portion set indicating RTP
payload type numbers;
b) the \"i=\" field with the \ portion set to \"video
component of MCVideo\";
c) the \"a=fmtp:\" attribute(s), the \"a=rtpmap:\" attribute(s) or both,
indicating the codec(s) and media parameters of the video component of
MCVideo; and
d) the \"a=rtcp:\" attribute indicating port number to be used for RTCP at the
MCVideo client selected according to the rules and procedures of IETF RFC 3605
[3], if the media steam uses other than the default IP address;
4) shall include the media-level clause for media-transmission control entity
consisting of:
a) an \"m=\" line, with the \ portion set to \"application\", the
\ portion set to a port number for media-transmission control entity of
the MCVideo group, the \ field set to \"udp\" and \ portion set to
\"MCVideo\"; and
b) the \"a=fmtp:MCVideo\" attribute indicating the parameters of the media-
transmission control entity as specified 3GPP TS 24.581 [5]; and
5) shall include the MIKEY-SAKKE I_MESSAGE, if generated by the MCVideo
client, in an \"a=key-mgmt\" attribute as a \"mikey\" attribute value in the
SDP offer as specified in IETF RFC 4567 [6].
### 10.3.2 Basic call control
#### 10.3.2.1 General
The maximum number of simultaneous off-network private calls is limited by the
value of \"/_\ _/Common/PrivateCall/MaxCallNc10\" leaf node present in the
UE configuration as specified in 3GPP TS 24.483 [4].
#### 10.3.2.2 Private call control state machine
The figure 10.3.2.2-1 gives an overview of the main states and transitions on
the UE for private call control.
Each private call control state machine is per MCVideo user ID.
Figure 10.3.2.2-1: Private call control state machine
#### 10.3.2.3 Private call control states
##### 10.3.2.3.1 P0: start-stop
In this state, no private call control entity exists.
##### 10.3.2.3.2 P1: ignoring same call id
This state exists for UE, when the UE is not part of an ongoing private call.
##### 10.3.2.3.3 P2: waiting for call response
This state exists for UE, when the UE has sent a PRIVATE CALL SETUP REQUEST
message and is waiting for a response, PRIVATE CALL ACCEPT or PRIVATE CALL
REJECT message.
##### 10.3.2.3.4 P3: waiting for release response
This state exists for UE, when the UE has sent a PRIVATE CALL RELEASE message
and is waiting for a PRIVATE CALL RELEASE ACK message.
##### 10.3.2.3.5 P4: part of ongoing call
This state exists for UE, when the UE is part of an ongoing private call.
##### 10.3.2.3.6 P5: pending
This state exists for UE, when the UE has presented a notification to the user
for the received PRIVATE CALL SETUP REQUEST message and is waiting for a user
indication.
#### 10.3.2.4 Procedures
##### 10.3.2.4.1 General
##### 10.3.2.4.2 Private call setup
###### 10.3.2.4.2.1 Initiating a private call
When in the \"P0: start-stop\" state or \"P1: ignoring same call id\", upon an
indication from MCVideo User to initiate a private call and the value of
\"/\/\/Common/PrivateCall/Authorised\" leaf node present in the user
profile as specified in 3GPP TS 24.483 [4] is set to \"true\", the MCVideo
client:
1) shall generate and store the call identifier as a random number uniformly
distributed between (0, 65536);
2) shall store own MCVideo user ID as caller ID;
3) shall store MCVideo user ID of the callee as callee ID;
4) shall store \"AUTOMATIC COMMENCEMENT MODE\" as commencement mode, if
requested and the value of \"/\/\/Common/PrivateCall/AutoCommence\" leaf
node present in the user profile as specified in 3GPP TS 24.483 [4] is set to
\"true\". Otherwise if the value of
\"/\/\/Common/PrivateCall/ManualCommence\" leaf node present in the user
profile as specified in 3GPP TS 24.483 [4] is set to \"true\", store \"MANUAL
COMMENCEMENT MODE\" as commencement mode;
5) shall store \"PRIVATE CALL\" as the current call type;;
6) if an end-to-end security context needs to be established then:
a) shall use keying material provided by the key management server to generate
a PCK as described in 3GPP TS 33.180 [8];
b) shall use the PCK to generate a PCK-ID with the four most significant bits
set to \"0001\" to indicate that the purpose of the PCK is to protect private
call communications and with the remaining twenty eight bits being randomly
generated as described in 3GPP TS 33.180 [8];
c) shall encrypt the PCK to a UID associated to the MCVideo client using the
MCVideo ID of the invited user and a time related parameter as described in
3GPP TS 33.180 [8];
d) shall generate a MIKEY-SAKKE I_MESSAGE using the encapsulated PCK and PCK-
ID as specified in 3GPP TS 33.180 [8];
e) shall add the MCVideo ID of the originating MCVideo to the initiator field
(IDRi) of the I_MESSAGE as described in 3GPP TS 33.180 [8];
f) shall sign the MIKEY-SAKKE I_MESSAGE using the originating MCVideo user\'s
signing key provided in the keying material together with a time related
parameter, and add this to the MIKEY-SAKKE payload, as described in 3GPP TS
33.180 [8] and;
g) shall store the MIKEY-SAKKE I_MESSAGE for later inclusion in an SDP body;
7) may store current user location as user location;
8) shall set the stored current ProSe per-packet priority to value
corresponding to MCVideo off-network private call as described in 3GPP TS
24.483 [4].
9) shall generate and store offer SDP, as defined in clause 10.3.1.1.2;
10) shall generate a PRIVATE CALL SETUP REQUEST message as specified in clause
17.1.5. In the PRIVATE CALL SETUP REQUEST message, the MCVideo client:
a) shall set the Call identifier IE with the stored call identifier;
b) shall set the MCVideo user ID of the caller IE with the stored caller ID;
c) shall set the MCVideo user ID of the callee IE with the stored callee ID;
d) shall set the Commencement mode IE with the stored commencement mode;
e) shall set the Call type IE with the stored current call type;
f) shall set the SDP offer IE with the stored offer SDP; and
g) may set the User location IE with the stored user location.
11) shall send the PRIVATE CALL SETUP REQUEST message towards other MCVideo
client according to rules and procedures as specified in clause 10.3.1.1.1;
12) shall initialize the counter CFP1 (private call request retransmission)
with the value set to 1;
13) shall start timer TFP1 (private call request retransmission); and
14) shall enter the \"P2: waiting for call response\" state.
###### 10.3.2.4.2.2 Private call setup request retransmission
When in the \"P2: waiting for call response\" state, upon expiry of timer TFP1
(private call request retransmission), the MCVideo client:
1) may update the stored user location with current user location;
2) shall increment the value of counter CFP1 (private call request
retransmission) by 1;
3) shall generate a PRIVATE CALL SETUP REQUEST message as specified in clause
17.1.5. In the PRIVATE CALL SETUP REQUEST message, the MCVideo client:
a) shall set the Call identifier IE with the stored call identifier;
b) shall set the MCVideo user ID of the caller IE with the stored caller ID;
c) shall set the MCVideo user ID of the callee IE with the stored callee ID;
d) shall set the Commencement mode IE with the stored commencement mode;
e) shall set the Call type IE with the stored current call type;
f) shall set the SDP offer IE with the stored offer SDP; and
g) may set the User location IE with stored user location.
4) shall send the PRIVATE CALL SETUP REQUEST message towards other MCVideo
client according to rules and procedures as specified in clause 10.3.1.1.1;
5) shall start timer TFP1 (private call request retransmission); and
6) shall remain in the \"P2: waiting for call response\" state.
###### 10.3.2.4.2.3 Ringing notification to the user
When in the \"P2: waiting for call response\" state, upon receiving a PRIVATE
CALL RINGING message, the MCVideo client:
1) shall remain in the \"P2: waiting for call response\" state.
###### 10.3.2.4.2.4 No response to private call setup request with automatic
commencement mode
In the \"P2: waiting for call response\" state, when timer TFP1 (private call
request retransmission) expires and the value of the counter CFP1 (private
call request retransmission) is equal to the upper limit and the stored
commencement mode is \"AUTOMATIC COMMENCEMENT MODE\", the MCVideo client:
1) shall start timer TFP7 (waiting for any message with same call identifier);
and
2) shall enter the \"P1: ignoring same call id\" state.
###### 10.3.2.4.2.5 No response to private call setup request with manual
commencement mode
When in the \"P2: waiting for call response\" state when timer TFP1 (private
call request retransmission) expires and the value of the counter CFP1
(private call request retransmission) is equal to the upper limit and the
stored commencement mode is \"MANUAL COMMENCEMENT MODE\", the MCVideo client:
1) shall start timer TFP2 (waiting for call response message); and
2) shall remain in the \"P2: waiting for call response\" state.
###### 10.3.2.4.2.6 No response to private call setup request after waiting
for user acknowledgement
When in the \"P2: waiting for call response\" state, upon expiry of timer TFP2
(waiting for call response message), the MCVideo client:
1) shall start timer TFP7 (waiting for any message with same call identifier);
2) shall release the call control state machine; and
3) shall enter the \"P1: ignoring same call id\" state.
###### 10.3.2.4.2.7 Private call setup request rejected
When in the \"P2: waiting for call response\" state, upon receiving a PRIVATE
CALL REJECT message in response to PRIVATE CALL SETUP REQUEST message with
Call identifier IE same as the stored call identifier, the MCVideo client:
1) shall stop timer TFP1 (call setup retransmission), if running;
2) shall stop timer TFP2 (waiting for call response message), if running;
3) shall start timer TFP7 (waiting for any message with same call identifier);
4) shall release the call control state machine; and
5) shall enter the \"P1: ignoring same call id\" state.
###### 10.3.2.4.2.8 Private call setup request accepted
When in the \"P2: waiting for call response\" state, upon receiving a PRIVATE
CALL ACCEPT message response to PRIVATE CALL SETUP REQUEST message with the
same call identifier, the MCVideo client:
1) shall store the SDP answer IE received in the PRIVATE CALL ACCEPT message
as answer SDP;
2) shall generate a PRIVATE CALL ACCEPT ACK message as specified in clause
17.1.11:
a) shall set the Call identifier IE to the stored call identifier;
b) shall set the MCVideo user ID of the caller IE with the stored caller ID;
and
c) shall set the MCVideo user ID of the callee IE with the stored callee ID.
3) shall send the PRIVATE CALL ACCEPT ACK message in response to the request
message according to rules and procedures as specified in clause 10.3.1.1.1;
4) shall stop timer TFP1 (call setup retransmission), if running;
5) shall stop timer TFP2 (waiting for call response message), if running;
6) shall establish a media session based on the SDP body of the stored answer
SDP;
7) shall start transmission control as terminating transmission participant as
specified in clause a.b in 3GPP TS 24.581 [5];
8) shall start timer TFP5 (max duration); and
9) shall enter the \"P4: part of ongoing call\" state.
###### 10.3.2.4.2.9 User cancels the private call setup request
When in the \"P2: waiting for call response\" state, upon an indication from
MCVideo User to cancel the private call request, the MCVideo client:
1) shall generate a PRIVATE CALL RELEASE message as specified in clause
17.1.9;
a) shall set the Call identifier IE to the stored call identifier;
b) shall set the MCVideo user ID of the caller IE with the stored caller ID;
and
c) shall set the MCVideo user ID of the callee IE with the stored callee ID;
2) shall send the PRIVATE CALL RELEASE message in response to the request
message according to rules and procedures as specified in clause 10.3.1.1.1;
3) shall start timer TFP3 (private call release retransmission); and
4) shall enter the \"P3: waiting for release response\" state.
##### 10.3.2.4.3 Private call setup in automatic commencement mode
###### 10.3.2.4.3.1 Unable to establish media
When in the \"P0: start-stop\" or \"P1: ignoring same call id\" state, upon
receiving a PRIVATE CALL SETUP REQUEST message with Call identifier IE
different than stored call identifier and media session declared in SDP body
of PRIVATE CALL SETUP REQUEST message cannot be established, the MCVideo
client:
1) shall store the Call identifier IE in the received message as call
identifier;
2) shall store the MCVideo user ID of the caller IE in the received PRIVATE
CALL SETUP message as caller ID;
3) shall store own MCVideo user ID as callee ID;
4) shall generate a PRIVATE CALL REJECT message as specified in clause 17.1.8.
In the PRIVATE CALL REJECT message, the MCVideo client:
a) shall set the Call identifier IE to the cached call identifier;
b) shall set the MCVideo user ID of the caller IE with the stored caller ID;
c) shall set the MCVideo user ID of the callee IE with stored callee ID; and
d) shall set the Reason IE as \"FAILED\", if requested to restrict
notification of call failure and the value of \"/_\ _/_\
_/Common/PrivateCall/FailRestrict\" leaf node present in the user profile
as specified in 3GPP TS 24.483 [4] is set to \"true\". Otherwise, shall set
the Reason IE as \"MEDIA FAILURE\".
5) shall send the PRIVATE CALL REJECT message in response to the request
message according to rules and procedures as specified in clause 10.3.1.1.1;
6) shall start timer TFP7 (waiting for any message with same call identifier);
and
7) shall enter the \"P1: ignoring same call id\" state if current state is the
\"P0: start-stop\" state.
###### 10.3.2.4.3.2 Responding to private call setup request when not
participating in the ongoing call
When in the \"P0: start-stop\" or \"P1: ignoring same call id\" state, upon
receiving a PRIVATE CALL SETUP REQUEST message with Commencement mode IE set
to \"AUTOMATIC COMMENCEMENT MODE\" and Call identifier IE different than
stored call identifier and media session declared in SDP body of PRIVATE CALL
SETUP REQUEST message can be established, the MCVideo client:
1) shall store the Call identifier IE in the received message as call
identifier;
2) shall set the stored current call type to \"PRIVATE CALL\";
3) shall set the stored current ProSe per-packet priority to value
corresponding to MCVideo off-network private call as described in 3GPP TS
24.483 [4].
4) shall store the MCVideo user ID of the caller IE in the received PRIVATE
CALL SETUP REQUEST message as caller ID;
5) shall store own MCVideo user ID as callee ID;
6) if the SDP offer contains an \"a=key-mgmt\" attribute field with a
\"mikey\" attribute value containing a MIKEY-SAKKE I_MESSAGE:
a) shall extract the MCVideo ID of the originating MCVideo user from the
initiator field (IDRi) of the I_MESSAGE as described in 3GPP TS 33.180 [8];
b) shall convert the MCVideo ID to a UID as described in 3GPP TS 33.180 [8];
c) shall use the UID to validate the signature of the MIKEY-SAKKE I_MESSAGE as
described in 3GPP TS 33.180 [8];
d) if the validation of the signature failed, shall generate a PRIVATE CALL
REJECT message as specified in clause 17.1.8. In the PRIVATE CALL REJECT
message, the MCVideo client:
i) shall set the call identifier IE to the stored call identifier;
ii) shall set the MCVideo user ID of the caller IE with the stored caller ID;
iii) shall set the MCVideo user ID of the callee IE with the stored callee ID;
iv) shall set the Reason IE as \"FAILED\", if requested to restrict
notification of call failure and the value of \"/_\ _/_\
_/Common/PrivateCall/FailRestrict\" leaf node present in the user profile
as specified in 3GPP TS 24.483 [4] is set to \"true\". Otherwise, shall set
the reason IE as \"E2E SECURITY CONTEXT FAILURE\";
v) shall send the PRIVATE CALL REJECT message in response to the request
message according to rules and procedures as specified in clause 10.3.1.1.1;
and
vi) shall remain in the current state;
e) if the validation of the signature was successful:
i) shall extract and decrypt the encapsulated PCK using the terminating
user\'s (KMS provisioned) UID key as described in 3GPP TS 33.180 [8];
ii) shall extract the PCK-ID, from the payload as specified in 3GPP TS 33.180
[8];
iii) shall generate and store answer SDP based on received SDP offer IE in
PRIVATE CALL SETUP REQUEST message, as defined in clause 10.3.1.1.2;
iv) shall generate a PRIVATE CALL ACCEPT message as specified in clause
17.1.7. In the PRIVATE CALL ACCEPT message, the MCVideo client:
A) shall set the Call identifier IE to the stored call identifier; and
B) shall set the MCVideo user ID of the caller IE with stored caller ID.
C) shall set the MCVideo user ID of the callee IE with stored callee ID; and
D) shall set the SDP answer IE with the stored answer SDP;
v) shall send PRIVATE CALL ACCEPT message in response to the request message
according to rules and procedures as specified in clause 10.3.1.1.1;
vi) shall establish a media session based on the SDP body of the stored answer
SDP;
vii) shall initialize the counter CFP4 with value set to 1;
viii) shall start timer TFP4 (private call accept retransmission); and
ix) shall enter the \"P5: pending\" state; and
NOTE: With the PCK successfully shared between the originating MCVideo client
and the terminating MCVideo client, both clients are able to use SRTP/SRTCP to
create an end-to-end secure session.
7) if the SDP offer does not contain an \"a=key-mgmt\" attribute, the MCVideo
client:
a) shall generate and store answer SDP based on received SDP offer IE in
PRIVATE CALL SETUP REQUEST message, as defined in clause 10.3.1.1.2;
b) shall generate a PRIVATE CALL ACCEPT message as specified in clause 17.1.7:
i) shall set the Call identifier IE to the stored call identifier;
ii) shall set the MCVideo user ID of the caller IE with stored caller ID.
iii) shall set the MCVideo user ID of the callee IE with stored callee ID; and
iv) shall set the SDP answer IE with the stored answer SDP;
c) shall send PRIVATE CALL ACCEPT message in response to the request message
according to rules and procedures as specified in clause 10.3.1.1.1;
d) shall establish a media session based on the SDP body of the stored answer
SDP;
e) shall initialize the counter CFP4 with value set to 1;
f) shall start timer TFP4 (private call accept retransmission); and
g) shall enter the \"P5: pending\" state.
###### 10.3.2.4.3.3 Private call accept retransmission
When in the \"P5: pending\" state, upon expiry of timer TFP4 (private call
accept retransmission), the MCVideo client:
1) shall generate a PRIVATE CALL ACCEPT message as specified in clause 17.1.7.
In the PRIVATE CALL ACCEPT message, the MCVideo client:
a) shall set the Call identifier IE to the stored call identifier;
b) shall set the MCVideo user ID of the caller IE with the stored caller ID;
c) shall set the MCVideo user ID of the callee IE with the stored callee ID;
and
d) shall set the SDP answer IE with the stored answer SDP;
2) shall send PRIVATE CALL ACCEPT message in response to the request message
according to rules and procedures as specified in clause 10.3.1.1.1;
3) shall increment the value of the counter CFP4 (private call accept
retransmission) by 1;
4) shall start timer TFP4 (private call accept retransmission); and
5) shall remain in the \"P5: pending\" state.
###### 10.3.2.4.3.4 Establishing the call
When in the \"P5: pending\" state, upon receiving a PRIVATE CALL ACCEPT ACK
message or RTP media from originating user, the MCVideo client:
1) shall stop timer TFP4 (private call accept retransmission);
2) shall start transmission control as terminating MCVideo client as specified
in clause a.b in 3GPP TS 24.581 [5];
3) shall start timer TFP5 (max duration); and
4) shall enter the \"P4: part of ongoing call\" state.
###### 10.3.2.4.3.5 Call failure
In the \"P5: pending\" state, when timer TFP4 (private call accept
retransmission) expires and the value of the counter CFP4 (private call accept
retransmission) is equal to the upper limit, the MCVideo client:
1) shall start timer TFP7 (waiting for any message with same call identifier);
and
2) shall enter the \"P1: ignoring same call id\" state.
##### 10.3.2.4.4 Private call setup in manual commencement mode
###### 10.3.2.4.4.1 Incoming private call
When in the \"P0: start-stop\" or \"P1: ignoring same call id\" state, upon
receiving a PRIVATE CALL SETUP REQUEST message with Commencement mode IE set
to \"MANUAL COMMENCEMENT MODE\" and Call identifier IE different from stored
call identifier, the MCVideo client:
1) shall store the Call identifier IE in the received message as call
identifier;
2) shall set the stored current call type to \"PRIVATE CALL\";
3) shall set the stored current ProSe per-packet priority to value
corresponding to MCVideo off-network private call as described in 3GPP TS
24.483 [4].
4) shall store the MCVideo user ID of the caller IE as received in the PRIVATE
CALL SETUP REQUEST as caller ID;
5) shall store own MCVideo user ID as callee ID;
6) shall generate a PRIVATE CALL RINGING message as specified in clause
17.1.6;
a) shall set the Call identifier IE to the stored call identifier;
b) shall set the MCVideo user ID of the caller IE with the stored caller ID;
and
c) shall set the MCVideo user ID of the callee IE with the stored callee ID;
7) shall send PRIVATE CALL RINGING message in response to the request message
according to rules and procedures as specified in clause 10.3.1.1.1;
8) shall start timer TFP2 (waiting for call response message); and
9) shall enter the \"P5: pending\" state.
###### 10.3.2.4.4.2 No response from the user
When in the \"P5: pending\" state, upon expiry of timer TFP2 (waiting for call
response message), the MCVideo client:
1) shall generate a PRIVATE CALL REJECT message as specified in clause 17.1.8:
a) shall set the Call identifier IE to the stored call identifier;
b) shall set the MCVideo user ID of the caller IE with the stored caller ID;
c) shall set the MCVideo user ID of the callee IE with the stored callee ID;
and
d) shall set the Reason IE as \"FAILED\".
2) shall send the PRIVATE CALL REJECT message in response to the request
message according to rules and procedures as specified in clause 10.3.1.1.1;
3) shall start timer TFP7 (waiting for any message with same call identifier);
and
4) shall enter the \"P1: ignoring same call id\" state.
###### 10.3.2.4.4.3 User accepts the private call setup request
When in the \"P5: pending\" state, upon an indication from MCVideo User to
accept the incoming private call, the MCVideo client:
1) if the SDP offer contains an \"a=key-mgmt\" attribute field with a
\"mikey\" attribute value containing a MIKEY-SAKKE I_MESSAGE:
a) shall extract the MCVideo ID of the originating MCVideo user from the
initiator field (IDRi) of the I_MESSAGE as described in 3GPP TS 33.180 [8];
b) shall convert the MCVideo ID to a UID as described in 3GPP TS 33.180 [8];
c) shall use the UID to validate the signature of the MIKEY-SAKKE I_MESSAGE as
described in 3GPP TS 33.180 [8];
d) if the validation of the signature failed, shall generate a PRIVATE CALL
REJECT message as specified in clause 17.1.8. In the PRIVATE CALL REJECT
message, the MCVideo client:
i) shall set the call identifier IE to the stored call identifier;
ii) shall set the MCVideo user ID of the caller IE with the stored caller ID;
iii) shall set the MCVideo user ID of the callee IE with the stored callee ID;
iv) shall set the Reason IE as \"FAILED\", if requested to restrict
notification of call failure and the value of \"/_\ _/_\
_/Common/PrivateCall/FailRestrict\" leaf node present in the user profile
as specified in 3GPP TS 24.483 [4] is set to \"true\". Otherwise, shall set
the reason IE as \"E2E SECURITY CONTEXT FAILURE\";
v) shall send the PRIVATE CALL REJECT message in response to the request
message according to rules and procedures as specified in clause 10.3.1.1.1;
and
vi) shall enter the \"P1: ignoring same call id\" state;
e) if the validation of the signature was successful:
i) shall extract and decrypt the encapsulated PCK using the terminating
user\'s (KMS provisioned) UID key as described in 3GPP TS 33.180 [8];
ii) shall extract the PCK-ID, from the payload as specified in 3GPP TS 33.180
[8];
iii) shall generate and store answer SDP based on received SDP offer IE in
PRIVATE CALL SETUP REQUEST message, as defined in clause 10.3.1.1.2;
iv) shall generate a PRIVATE CALL ACCEPT message as specified in clause
17.1.7. In the PRIVATE CALL ACCEPT message, the MCVideo client:
A) shall set the Call identifier IE to the stored call identifier;
B) shall set the MCVideo user ID of the caller IE with the stored caller ID;
C) shall set the MCVideo user ID of the callee IE with the stored callee ID;
and
D) shall set the SDP answer IE with the stored answer SDP;
v) shall send the PRIVATE CALL ACCEPT message in response to the request
message according to rules and procedures as specified in clause 10.3.1.1.1;
vi) shall establish a media session based on the SDP body of the private call;
vii) shall stop timer TFP2 (waiting for call response message);
viii) shall initialize the counter CFP4 with value set to 1;
ix) shall start timer TFP4 (private call accept retransmission); and
x) shall remain in the \"P5: pending\" state; and
NOTE: With the PCK successfully shared between the originating MCVideo client
and the terminating MCVideo client, both clients are able to use SRTP/SRTCP to
create an end-to-end secure session.
2) if the SDP offer does not contain an \"a=key-mgmt\" attribute, the MCVideo
client:
a) shall generate and store answer SDP based on received SDP offer IE in
PRIVATE CALL SETUP REQUEST message, as defined in clause 10.3.1.1.2;
b) shall generate a PRIVATE CALL ACCEPT message as specified in clause 17.1.7.
In the PRIVATE CALL ACCEPT message, the MCVideo client:
i) shall set the Call identifier IE to the stored call identifier;
ii) shall set the MCVideo user ID of the caller IE with the stored caller ID;
iii) shall set the MCVideo user ID of the callee IE with the stored callee ID;
and
iv) shall set the SDP answer IE with the stored answer SDP;
c) shall send the PRIVATE CALL ACCEPT message in response to the request
message according to rules and procedures as specified in clause 10.3.1.1.1;
d) shall establish a media session based on the SDP body of the private call;
e) shall stop timer TFP2 (waiting for call response message);
f) shall initialize the counter CFP4 with value set to 1;
g) shall start timer TFP4 (private call accept retransmission); and
h) shall remain in the \"P5: pending\" state.
###### 10.3.2.4.4.4 Private call accept retransmission
When in the \"P5: pending\" state, upon expiry of timer TFP4 (private call
accept retransmission), the MCVideo client:
1) shall generate a PRIVATE CALL ACCEPT message as specified in clause 17.1.7.
In the PRIVATE CALL ACCEPT message, the MCVideo client:
a) shall set the Call identifier IE to the stored call identifier;
b) shall set the MCVideo user ID of the caller IE the stored caller ID;
c) shall set the MCVideo user ID of the callee IE with the stored callee ID;
and
d) shall set the SDP answer IE with the stored answer SDP;
2) shall send PRIVATE CALL ACCEPT message in response to the request message
according to rules and procedures as specified in clause 10.3.1.1.1;
3) shall increment the value of the (counter CFP4 private call accept
retransmission) by 1;
4) shall start timer TFP4 (private call accept retransmission); and
5) shall remain in the \"P5: pending\" state.
###### 10.3.2.4.4.5 Establishing the call
When in the \"P5: pending\" state, upon receiving a PRIVATE CALL ACCEPT ACK
message or RTP media from originating user, the MCVideo client:
1) shall stop timer TFP4 (private call accept retransmission);
2) shall start transmission control as terminating MCVideo client as specified
in clause a.b in 3GPP TS 24.581 [5];
3) shall start timer TFP5 (max duration); and
4) shall enter the \"P4: part of ongoing call\" state.
###### 10.3.2.4.4.6 Call failure
In the \"P5: pending\" state, when timer TFP4 (private call accept
retransmission) expires and the value of the counter CFP4 (private call accept
retransmission) is equal to the upper limit, the MCVideo client:
1) shall start timer TFP7 (waiting for any message with same call identifier);
and
2) shall enter the \"P1: ignoring same call id\" state.
###### 10.3.2.4.4.7 User rejects the private call setup request
When in the \"P5: pending\" state, upon an indication from MCVideo User to
reject the incoming private call, the MCVideo client:
1) shall generate a PRIVATE CALL REJECT message as specified in clause 17.1.8:
a) shall set the Call identifier IE to the stored call identifier;
b) shall set the MCVideo user ID of the caller IE with the stored caller ID;
c) shall set the MCVideo user ID of the callee IE with stored callee ID; and
d) shall set the Reason IE as \"FAILED\", if requested to restrict
notification of call failure and the value of \"/_\ _/_\
_/Common/PrivateCall/FailRestrict\" leaf node present in the user profile
as specified in 3GPP TS 24.483 [4] is set to \"true\". Otherwise, shall set
the Reason IE as \"REJECT\";
2) shall send the PRIVATE CALL REJECT message in response to the request
message according to rules and procedures as specified in clause 10.3.1.1.1;
3) shall start timer TFP7 (waiting for any message with same call identifier);
and
4) shall enter the \"P1: ignoring same call id\" state.
###### 10.3.2.4.4.8 Caller cancels the private call setup request before call
establishment
When in the \"P5: pending\" state or \"P1: ignoring same call id\" state, upon
receiving a PRIVATE CALL RELEASE message, the MCVideo client:
1) shall generate a PRIVATE CALL RELEASE ACK message as specified in clause
17.1.10. In the PRIVATE CALL RELEASE ACK message, the MCVideo client:
a) shall set the Call identifier IE to the stored call identifier;
b) shall set the MCVideo user ID of the caller IE with the stored caller ID;
and.
c) shall set the MCVideo user ID of the callee IE with the stored callee ID.
2) shall send the PRIVATE CALL RELEASE ACK message in response to the request
message according to rules and procedures as specified in clause 10.3.1.1.1;
3) shall start timer TFP7 (waiting for any message with same call identifier);
4) shall stop timer TFP4 (private call accept retransmission) if running; and
5) shall enter the \"P1: ignoring same call id\" state, if the current state
is \"P5: pending\" state.
##### 10.3.2.4.5 Private call release
###### 10.3.2.4.5.1 Releasing a private call
When in the \"P4: part of ongoing call\" state, upon an indication from
MCVideo User to release a private call, the MCVideo client:
1) shall generate a PRIVATE CALL RELEASE message as specified in clause
17.1.9. In the PRIVATE CALL RELEASE message, the MCVideo client:
a) shall set the Call identifier IE to the stored call identifier;
b) shall set the MCVideo user ID of the caller IE with stored caller ID; and
c) shall set the MCVideo user ID of the callee IE with stored callee ID.
2) shall send the PRIVATE CALL RELEASE message in response to the request
message according to rules and procedures as specified in clause 10.3.1.1.1;
3) shall initialize the counter CFP3 (private call release retransmission)
with the value set to 1;
4) shall start timer TFP3 (private call release retransmission); and
5) shall enter the \"P3: waiting for release response\" state.
###### 10.3.2.4.5.2 Private call release retransmission
When in the \"P3: waiting for release response\" state, upon expiry of timer
TFP3 (private call release retransmission), the MCVideo client:
1) shall generate a PRIVATE CALL RELEASE message as specified in clause
17.1.9. In the PRIVATE CALL RELEASE message, the MCVideo client:
a) shall set the Call identifier IE to the stored call identifier;
b) shall set the MCVideo user ID of the caller IE with stored caller ID; and
c) shall set the MCVideo user ID of the callee IE with the stored callee ID.
2) shall send the PRIVATE CALL RELEASE message in response to the request
message according to rules and procedures as specified in clause 10.3.1.1.1;
3) shall increment the value of timer CFP3 by 1;
4) shall start timer TFP3 (private call release retransmission); and
5) shall remain in the \"P3: waiting for release response\" state.
###### 10.3.2.4.5.3 No response to private call release
In the \"P3: waiting for release response\" state, when timer TFP3 (private
call request retransmission) expires and the value of the counter CFP3
(private call release retransmission) is equal to the upper limit, the MCVideo
client:
1) shall terminate the media session;
2) shall start timer TFP7 (waiting for any message with same call identifier);
and
3) shall enter the \"P1: ignoring same call id\" state.
###### 10.3.2.4.5.4 Acknowledging private call release after call
establishment
When in the \"P4: part of ongoing call\" state, upon receiving a PRIVATE CALL
RELEASE message, the MCVideo client:
1) shall generate a PRIVATE CALL RELEASE ACK message as specified in clause
17.1.10;
a) shall set the Call identifier IE to the stored call identifier;
b) shall set the MCVideo user ID of the caller IE the stored caller ID; and
c) shall set the MCVideo user ID of the callee IE with the stored callee ID.
2) shall send the PRIVATE CALL RELEASE ACK message in response to the request
message according to rules and procedures as specified in clause 10.3.1.1.1;
3) shall terminate the media session for private call;
4) shall start timer TFP7 (waiting for any message with same call identifier);
and
5) shall enter the \"P1: ignoring same call id\" state.
###### 10.3.2.4.5.5 Private call release acknowledged
When in the \"P3: waiting for release response\" state, upon receiving a
PRIVATE CALL RELEASE ACK to PRIVATE CALL RELEASE message, the MCVideo client:
1) shall stop timer TFP3 (private call release retransmission), if running;
2) shall terminate the media session;
3) shall start timer TFP7 (waiting for any message with same call identifier);
and
4) shall enter the \"P1: ignoring same call id\" state.
###### 10.3.2.4.5.6 Max duration reached
When in the \"P4: part of ongoing call\" state, upon expiry of timer TFP5 (max
duration), the MCVideo client:
1) shall terminate the media session;
2) shall start timer TFP7 (waiting for any message with same call identifier);
and
3) shall enter the \"P1: ignoring same call id\" state.
###### 10.3.2.4.5.7 Stop ignoring same call id
When in the \"P1: ignoring same call id\" state, upon expiry of timer TFP7
(waiting for any message with same call identifier) the MCVideo client:
1) shall clear the stored call identifier; and
2) shall enter the \"P0: start-stop\" state.
###### 10.3.2.4.5.8 No response to emergency private call setup request
In the \"P4: part of ongoing call\" state, when timer TFP1 (private call
request retransmission) expires and the value of the counter CFP1 (private
call request retransmission) is equal to the upper limit, the MCVideo client:
1) shall start timer TFP7 (waiting for any message with same call identifier);
and
2) shall enter the \"P1: ignoring same call id\" state.
###### 10.3.2.4.5.9 No response to emergency private call cancel
In the \"P4: part of ongoing call\" state, when timer TFP6 (emergency private
call cancel retransmission) expires and the value of the counter CFP6
(emergency private call cancel retransmission) is equal to the upper limit,
the MCVideo client:
1) shall start timer TFP7 (waiting for any message with same call identifier);
and
2) shall enter the \"P1: ignoring same call id\" state.
##### 10.3.2.4.6 Error handling
###### 10.3.2.4.6.1 Unexpected MONP message received
Upon receiving an unexpected MONP message or MONP MCVideo message in a state
where there is no handling specified for the MONP message or the MONP MCVideo
message, the MCVideo client shall discard this message.
###### 10.3.2.4.6.2 Unexpected indication from MCVideo user
Upon receiving an indication from the MCVideo user in a state where there is
no handling specified for the indication, the MCVideo client shall ignore the
indication.
###### 10.3.2.4.6.3 Unexpected expiration of a timer
Upon expiration of a timer in a state where there is no handling specified for
expiration of the timer, the MCVideo client shall ignore the expiration of the
timer.
# 11 Emergency Alert
## 11.1 General
This clause describes the emergency alert procedures for on-network and off-
network.
For on-network emergency alert, the procedures for originating and terminating
MCVideo clients, participating MCVideo functions and controlling MCVideo
function are specified in clause 11.2. MCVideo emergency call procedures that
have emergency alerts as an optional capability shall be performed as defined
in clause 9.2 for on-network group call and defined in clause 10.2 for on-
network private call.
For off-network emergency alert, the procedures for each functional entity is
specified in clause 11.3.
## 11.2 On-network emergency alert
### 11.2.1 Client procedures
#### 11.2.1.1 Emergency alert origination
Upon receiving a request from the MCVideo user to send an MCVideo emergency
alert to the indicated MCVideo group and this is an authorised request for an
MCVideo emergency alert as determined by clause 6.2.8.1.6, the MCVideo client
shall generate a SIP MESSAGE request in accordance with 3GPP TS 24.229 [11]
and IETF RFC 3428 [33] with the clarifications given below.
NOTE 1: this SIP MESSAGE request is assumed to be sent out-of-dialog.
The MCVideo client:
1) shall include the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"
(coded as specified in 3GPP TS 24.229 [11]), in a P-Preferred-Service header
field according to IETF RFC 6050 [9] in the SIP MESSAGE request;
2) shall include an Accept-Contact header field with the g.3gpp.icsi-ref media
feature tag containing the value of \"urn:urn-7:3gpp-
service.ims.icsi.mcvideo\" along with the \"require\" and \"explicit\" header
field parameters according to IETF RFC 3841 [6];
3) may include a P-Preferred-Identity header field in the SIP MESSAGE request
containing a public user identity as specified in 3GPP TS 24.229 [11];
4) shall include an application/vnd.3gpp.mcvideo-info+xml MIME body as
specified in clause F.1 with the \ element containing the
\ element with:
a) the \ element set to the group identity;
b) the \ element set to a value of \"true\"; and
c) the \ element set to the MCVideo client ID of the
originating MCVideo client;
5) shall include an application/vnd.3gpp.mcvideo-location-info+xml MIME body
as specified in Annex F.3 with a \ element included in the \ root element;
6) shall include in the \ element the specific location information
configured for the MCVideo emergency alert location trigger;
7) shall set the MCVideo emergency state if not already set;
8) shall set the MCVideo emergency alert state to \"MVEA 2: emergency-alert-
confirm-pending\";
9) shall set the Request-URI to the public service identity identifying the
participating MCVideo function serving the group identity; and
10) shall send the SIP MESSAGE request according to rules and procedures of
3GPP TS 24.229 [11].
On receiving a SIP 2xx response to the SIP MESSAGE request, the MCVideo client
shall set the MCVideo emergency alert state to \"MVEA 3: emergency-alert-
initiated\".
On receiving a SIP 4xx response a SIP 5xx response or a SIP 6xx response to
the SIP MESSAGE request, the MCVideo client shall set the MCVideo emergency
alert state to \"MVEA 1: no-alert\".
NOTE 2: the MCVideo emergency state is left set in this case as the MCVideo
user presumably is in the best position to determine whether or not they are
in a life-threatening condition. The assumption is that the MCVideo user can
clear the MCVideo emergency state manually if need be.
#### 11.2.1.2 Emergency alert cancellation
Upon receiving a request from the MCVideo user to send an MCVideo emergency
alert cancellation to the indicated MCVideo group and this is an authorised
request for an MCVideo emergency alert cancellation as determined by clause
6.2.8.1.6, the MCVideo client shall generate a SIP MESSAGE request in
accordance with 3GPP TS 24.229 [11] and IETF RFC 3428 [33] with the
clarifications given below.
NOTE 1: This SIP MESSAGE request is assumed to be sent out-of-dialog.
The MCVideo client:
1) shall include the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"
(coded as specified in 3GPP TS 24.229 [11]), in a P-Preferred-Service header
field according to IETF RFC 6050 [9] in the SIP MESSAGE request;
2) shall include an Accept-Contact header field with the g.3gpp.icsi-ref media
feature tag containing the value of \"urn:urn-7:3gpp-
service.ims.icsi.mcvideo\" along with the \"require\" and \"explicit\" header
field parameters according to IETF RFC 3841 [6];
3) may include a P-Preferred-Identity header field in the SIP MESSAGE request
containing the public user identity of the originator as specified in 3GPP TS
24.229 [11];
4) shall include an application/vnd.3gpp.mcvideo-info+xml MIME body as
specified in clause F.1 with the \ element containing the
\ element with:
a) the \ element set to the MCVideo group identity;
b) the \ element set to a value of \"false\"; and
c) if the MCVideo user is cancelling an MCVideo emergency alert originated by
another MCVideo user, include the \ element set to the MCVideo
ID of the MCVideo user who originated the MCVideo emergency alert;
5) if the MCVideo user has additionally requested the cancellation of the in-
progress emergency state of the MCVideo group and this is an authorised
request for an in-progress emergency group state cancellation as determined by
clause 6.2.8.1.7, shall include an \ element set to a value of
\"false\" in the \ element containing the \
element;
6) shall set the Request-URI to the public service identity identifying the
participating MCVideo function serving the group identity;
7) if the generated SIP MESSAGE request does not contain an \
element in the application/vnd.3gpp.mcvideo-info+xml MIME body, shall set the
MCVideo emergency alert state to \"MVEA 4: Emergency-alert-cancel-pending\";
and
8) shall send the SIP MESSAGE request according to rules and procedures of
3GPP TS 24.229 [11].
On receipt of a SIP MESSAGE request containing an
application/vnd.3gpp.mcvideo-info+xml MIME body with an \
element set to true and an \ matching the MCVideo client ID
included in the sent SIP MESSAGE request:
1) if the \ element is set to a value of \"false\" in the
application/vnd.3gpp.mcvideo-info+xml MIME body of the received SIP MESSAGE
request and the sent SIP MESSAGE request did not contain an \
element in the application/vnd.3gpp.mcvideo-info+xml MIME body, shall:
a) set the MCVideo emergency alert state to \"MVEA 1: no-alert\"; and
b) clear the MCVideo emergency state if not already cleared;
2) if the \ element in the application/vnd.3gpp.mcvideo-info+xml
MIME body of the received SIP MESSAGE request is set to a value of \"true\"
and if the MCVideo emergency alert state is set to \"MVEA 4: Emergency-alert-
cancel-pending\" and the sent SIP MESSAGE request did not contain an
\ element in the application/vnd.3gpp.mcvideo-info+xml MIME
body, shall set the MCVideo emergency alert state to \"MVEA 3: emergency-
alert-initiated\"; and
NOTE 2: It would appear to be an unusual situation for the initiator of an
MCVideo emergency alert to not be able to clear their own alert. Nevertheless,
an MCVideo user can be configured to be authorised to initiate MCVideo
emergency alerts but not have the authority to clear them. Hence, the case is
covered here.
3) if an \ element is present in the
application/vnd.3gpp.mcvideo-info+xml MIME body of received SIP MESSAGE
request and is set to a value of \"false\":
a) shall set the MCVideo emergency group call state of the group to \"MVEGC 1:
emergency-gc-capable\"; and
b) shall set the MCVideo emergency group state of the group to \"MVEG 1: no-
emergency\".
NOTE 3: The case where an \ element is set to true is possible
but not handled specifically above as it results in no state changes.
On receiving a SIP 4xx response, SIP 5xx response or SIP 6xx response to the
sent SIP MESSAGE request:
1) if the received SIP 4xx response, SIP 5xx response or SIP 6xx response
contains an application/vnd.3gpp.mcvideo-info+xml MIME body as specified in
clause F.1 with the \ element containing the \
element with the \ element set to a value of \"true\", the sent SIP
MESSAGE request did not contain an \ element in the
application/vnd.3gpp.mcvideo-info+xml MIME body and the MCVideo emergency
alert state is set to \"MVEA 4: Emergency-alert-cancel-pending\", shall set
the MCVideo emergency alert state to \"MVEA 3: emergency-alert-initiated\";
and
NOTE 4: In this case, an \ element would either not be present
or would be set to true. In either case, no change in state would result.
Hence, this case is not specified above.
2) if the received SIP 4xx response, SIP 5xx response or a SIP 6xx response to
the SIP MESSAGE request does not contain an application/vnd.3gpp.mcvideo-
info+xml MIME body with an \ element, the sent SIP MESSAGE request
does not contain an \ element in the
application/vnd.3gpp.mcvideo-info+xml MIME body and the MCVideo emergency
alert state is set to \"MVEA 4: Emergency-alert-cancel-pending\", shall set
the MCVideo emergency alert state to \"MVEA 3: emergency-alert-initiated\".
#### 11.2.1.3 MCVideo client receives an MCVideo emergency alert or call
notification
Upon receipt of a \"SIP MESSAGE request for emergency notification\", the
MCVideo client:
1) if the received SIP MESSAGE request contains an
application/vnd.3gpp.mcvideo-info+xml MIME body with the \ element
set to a value of \"true\", should display to the MCVideo user an indication
of the MCVideo emergency alert and associated information, including:
a) the MCVideo group identity contained in \ element
application/vnd.3gpp.mcvideo-info+xml MIME body;
b) the originator of the MCVideo emergency alert contained in the \ element of the application/vnd.3gpp.mcvideo-info+xml MIME
body; and
c) the mission critical organization of the MCVideo emergency alert originator
contained in the \ element of the application/vnd.3gpp.mcvideo-
info+xml MIME body;
NOTE 1: This is the case of the MCVideo client receiving the notification of
another MCVideo user\'s emergency alert.
2) if the received SIP MESSAGE request contains an
application/vnd.3gpp.mcvideo-info+xml MIME body with the \ element
set to a value of \"false\":
a) should display to the MCVideo user an indication of the MCVideo emergency
alert cancellation and associated information, including:
i) the MCVideo group identity contained in the \
element application/vnd.3gpp.mcvideo-info+xml MIME body;
ii) the originator of the MCVideo emergency alert contained in:
A) if present, the \ element of the
application/vnd.3gpp.mcvideo-info+xml MIME body; or
B) the \ element of the application/vnd.3gpp.mcvideo-
info+xml MIME body; and
b) if the MCVideo ID contained in the \ element is the MCVideo
ID of the receiving MCVideo user, shall set the MCVideo emergency alert state
to \"MVEA 1: no-alert\"; and
c) if the received SIP MESSAGE request contains an
application/vnd.3gpp.mcvideo-info+xml MIME body with the \
element is set to a value of \"false\":
i) shall set the MCVideo emergency group state to \"MVEG 1: no-emergency\";
and
ii) shall set the MCVideo emergency group call state to \"MVEGC 1: emergency-
gc-capable\";
NOTE 2: This is the case of the MCVideo client receiving the notification of
the cancellation by a third party of an MCVideo emergency alert. This can be
the MCVideo emergency alert of another MCVideo user or the MCVideo emergency
alert of the recipient, as determined by the contents of the \
element. Optionally, notification of the cancellation of the in-progress
emergency state of the MCVideo group can be included.
3) if the received SIP MESSAGE request contains an
application/vnd.3gpp.mcvideo-info+xml MIME body with the \
element set to a value of \"true\":
a) should display to the MCVideo user an indication of the additional
emergency MCVideo user participating in the MCVideo emergency group call
including the following if not already displayed as part of step 1):
i) the MCVideo group identity contained in the \
element application/vnd.3gpp.mcvideo-info+xml MIME body; and
ii) the \ element of the
application/vnd.3gpp.mcvideo-info+xml MIME body;
b) shall set the MCVideo emergency group state to \"MVEG 2: in-progress\" if
not already set to that value;
NOTE 3: This is the case of the MCVideo client receiving notification of an
additional MCVideo user in an MCVideo emergency state (i.e., not the MCVideo
user that originally triggered the in-progress emergency state of the group)
joining the in-progress emergency group call. An emergency alert indication,
if included, is handled in step 1).
4) if the received SIP MESSAGE request contains an
application/vnd.3gpp.mcvideo-info+xml MIME body with the \
element set to a value of \"false\":
a) should display to the MCVideo user an indication of the cancellation of the
in-progress emergency state of the MCVideo group call including the following
if not already displayed as part of step 2):
i) the MCVideo group identity contained in the \
element application/vnd.3gpp.mcvideo-info+xml MIME body; and
ii) the \ element of the
application/vnd.3gpp.mcvideo-info+xml MIME body;
b) shall set the MCVideo emergency group state to \"MVEG 1: no-emergency\";
and
c) shall set the MCVideo emergency group call state to \"MVEGC 1: emergency-
gc-capable\";
NOTE 4: This is the case of the MCVideo client receiving the notification of
the cancellation of the in-progress emergency state of the MCVideo group. In
this case, the receiving MCVideo client is affiliated with the MCVideo group
but not participating in the session. An emergency alert cancellation, if
included, is handled in step 2).
5) if the received SIP MESSAGE request contains an
application/vnd.3gpp.mcvideo-info+xml MIME body with the \
element set to a value of \"true\":
a) should display to the MCVideo user an indication of the MCVideo user
participating in the MCVideo imminent peril group call including the following
if not already displayed as part of step 1):
i) the MCVideo group identity contained in the \
element application/vnd.3gpp.mcvideo-info+xml MIME body; and
ii) the \ element of the
application/vnd.3gpp.mcvideo-info+xml MIME body; and
b) shall set the MCVideo imminent peril group state to \"MVIG 2: in-progress\"
if not already set to that value;
NOTE 5: This is the case of the MCVideo client receiving notification of an
additional MCVideo user initiating an imminent peril group call when there is
already an in-progress imminent peril state in effect on the group.
6) if the received SIP MESSAGE request contains an
application/vnd.3gpp.mcvideo-info+xml MIME body with the \
element set to a value of \"false\":
a) should display to the MCVideo user an indication of the cancellation of the
in-progress imminent peril state of the MCVideo group including the following
if not already displayed as part of step 2):
i) the MCVideo group identity contained in the \
element application/vnd.3gpp.mcvideo-info+xml MIME body; and
ii) the \ element of the
application/vnd.3gpp.mcvideo-info+xml MIME body;
b) shall set the MCVideo imminent peril group state to \"MVIG 1: no-imminent-
peril\"; and
c) shall set the MCVideo imminent peril group call state to \"MVIGC 1:
imminent-peril-gc-capable\";
NOTE 6: This is the case of the MCVideo client receiving notification of the
cancellation of the in-progress imminent peril state of the group.
7) shall generate a SIP 200 (OK) response according to rules and procedures of
3GPP TS 24.229 [11]; and
8) shall send the SIP 200 (OK) response towards the MCVideo server according
to rules and procedures of 3GPP TS 24.229 [11].
### 11.2.2 Participating MCVideo function procedures
#### 11.2.2.1 Receipt of a SIP MESSAGE request for emergency notification from
the served MCVideo client
Upon receipt of a \"SIP MESSAGE request for emergency notification for
originating participating MCVideo function\", the participating MCVideo
function:
1) if unable to process the request due to a lack of resources or a risk of
congestion exists, may reject the SIP MESSAGE request with a SIP 500 (Server
Internal Error) response. The participating MCVideo function may include a
Retry-After header field to the SIP 500 (Server Internal Error) response as
specified in IETF RFC 3261 [24] and skip the rest of the steps;
NOTE 1: if the SIP MESSAGE request contains an emergency indication set to a
value of \"true\" or an alert indication set to a value of \"true\", the
participating MCVideo function can, according to local policy, choose to
accept the request.
2) shall determine the MCVideo ID of the calling user from the public user
identity in the P-Asserted-Identity header field of the SIP MESSAGE request,
and shall authorise the calling user;
NOTE 2: The MCVideo ID of the calling user is bound to the public user
identity at the time of service authorisation, as documented in clause 7.3.
3) if the MCVideo user is not affiliated with the MCVideo group as determined
by clause 9.2.2.2.11, shall perform the actions specified in clause 9.2.2.2.12
for implicit affiliation;
4) if the actions for implicit affiliation specified in step 3) above were
performed but not successful in affiliating the MCVideo user due to the
MCVideo user already having N2 simultaneous affiliations, shall reject the
\"SIP MESSAGE request for emergency notification for originating participating
MCVideo function\" with a SIP 486 (Busy Here) response with the warning text
set to \"102 too many simultaneous affiliations\" in a Warning header field as
specified in clause 4.4. and skip the rest of the steps.
NOTE 3: N2 is the total number of MCVideo groups that an MCVideo user can be
affiliated to simultaneously as specified in 3GPP TS 23.379 [3].
NOTE 4: As this is a request for MCVideo emergency services, the participating
MCVideo function can choose to accept the request.
5) shall determine the public service identity of the controlling MCVideo
function associated with the group identity in the received SIP MESSAGE
request;
6) shall generate a SIP MESSAGE request in accordance with 3GPP TS 24.229 [11]
and IETF RFC 3428 [33];
7) shall set the Request-URI of the outgoing SIP MESSAGE request to the public
service identity of the controlling MCVideo function associated with the group
identified by the \ element contained in the
\ element containing the \ element of the
application/vnd.3gpp.mcvideo-info+xml MIME body in the incoming SIP MESSAGE
request;
8) shall copy the contents of the application/vnd.3gpp.mcvideo-info+xml MIME
body in the received SIP MESSAGE request into an application/vnd.3gpp.mcvideo-
info+xml MIME body as specified in clause F.1 included in the outgoing SIP
MESSAGE request;
9) shall set the \ element of the \
element containing the \ element to the MCVideo ID determined
in step 2) above;
10) if the received SIP MESSAGE request contains an
application/vnd.3gpp.mcvideo-location-info+xml MIME body as specified in
clause F.3 shall copy the contents of the application/vnd.3gpp.mcvideo-
location-info+xml MIME body in the received SIP MESSAGE request into an
application/vnd.3gpp.mcvideo-location-info+xml MIME body included in the
outgoing SIP MESSAGE request;
11) shall set the P-Asserted-Identity in the outgoing SIP MESSAGE request to
the public user identity in the P-Asserted-Identity header field contained in
the received SIP MESSAGE request; and
12) shall send the SIP MESSAGE request as specified to 3GPP TS 24.229 [11].
Upon receipt of a SIP 2xx response in response to the SIP MESSAGE request sent
in step 10):
1) shall generate a SIP 200 (OK) response as specified in 3GPP TS 24.229 [11]
with the follow clarifications:
a) shall include the public user identity received in the P-Asserted-Identity
header field of the incoming SIP 200 (OK) response into the P-Asserted-
Identity header field of the outgoing SIP 200 (OK) response;
2) if the procedures of clause 9.2.2.2.12 for implicit affiliation were
performed in the present clause, shall complete the implicit affiliation by
performing the procedures of clause 9.2.2.2.13; and
3) shall send the SIP 200 (OK) response to the MCVideo client according to
3GPP TS 24.229 [11].
Upon receipt of a SIP 4xx, 5xx or 6xx response to the sent SIP MESSAGE request
and if the implicit affiliation procedures of clause 9.2.2.2.12 were invoked
in the present clause, the participating MCVideo function shall perform the
procedures of clause 9.2.2.2.14.
#### 11.2.2.2 Receipt of a SIP MESSAGE request for emergency notification for
terminating MCVideo client
In the procedures in this clause:
1) emergency indication in an incoming SIP MESSAGE request refers to the
\ element of the application/vnd.3gpp.mcvideo-info+xml MIME
body; and
2) alert indication in an incoming SIP MESSAGE request refers to the \ element of the application/vnd.3gpp.mcvideo-info+xml MIME body.
Upon receipt of a \"SIP MESSAGE requests for emergency notification for
terminating participating MCVideo function\", the participating MCVideo
function:
1) if unable to process the request due to a lack of resources or a risk of
congestion exists, may reject the SIP MESSAGE request with a SIP 500 (Server
Internal Error) response. The participating MCVideo function may include a
Retry-After header field to the SIP 500 (Server Internal Error) response as
specified in IETF RFC 3261 [24] and skip the rest of the steps;
NOTE 1: if the SIP MESSAGE request contains an emergency indication set to a
value of \"true\" or an alert indication set to a value of \"true\", the
participating MCVideo function can by means beyond the scope of this
specification choose to accept the request.
2) shall use the MCVideo ID present in the \ element of
the application/vnd.3gpp.mcvideo-info+xml MIME body of the incoming SIP
MESSAGE request to retrieve the binding between the MCVideo ID and public user
identity;
3) if the binding between the MCVideo ID and public user identity does not
exist, then the participating MCVideo function shall reject the SIP MESSAGE
request with a SIP 404 (Not Found) response. Otherwise, continue with the rest
of the steps;
4) shall generate an outgoing SIP MESSAGE request as specified in clause
6.3.2.2.11; and
5) shall send the SIP MESSAGE request as specified in 3GPP TS 24.229 [11].
Upon receipt of SIP 2xx responses to the outgoing SIP MESSAGE requests, the
participating MCVideo function shall follow the procedures specified in 3GPP
TS 24.229 [11].
#### 11.2.2.3 Receipt of a SIP MESSAGE request indicating successful delivery
of emergency notification
Upon receipt of a SIP MESSAGE request routed to the terminating participating
MCVideo function as a result of initial filter criteria with the Request-URI
set to the public service identity of the terminating participating MCVideo
function and the SIP MESSAGE request contains an application/vnd.3gpp.mcvideo-
info+xml MIME body with an \ element present, the
participating MCVideo function:
1) if unable to process the request due to a lack of resources or a risk of
congestion exists, may reject the SIP MESSAGE request with a SIP 500 (Server
Internal Error) response. The participating MCVideo function may include a
Retry-After header field to the SIP 500 (Server Internal Error) response as
specified in IETF RFC 3261 [24] and skip the rest of the steps;
2) shall use the MCVideo ID present in the \ element of
the application/vnd.3gpp.mcvideo-info+xml MIME body of the incoming SIP
MESSAGE request to retrieve the binding between the MCVideo ID and public user
identity;
3) if the binding between the MCVideo ID and public user identity does not
exist, then the participating MCVideo function shall reject the SIP MESSAGE
request with a SIP 404 (Not Found) response. Otherwise, continue with the rest
of the steps;
4) shall generate an outgoing SIP MESSAGE request in accordance with 3GPP TS
24.229 [11] and IETF RFC 3428 [33] and:
a) shall include in the SIP MESSAGE request all Accept-Contact header fields
and all Reject-Contact header fields, with their feature tags and their
corresponding values along with parameters according to rules and procedures
of IETF RFC 3841 [6] that were received (if any) in the incoming SIP MESSAGE
request;
b) shall set the Request-URI of the outgoing SIP MESSAGE request to the public
user identity associated to the MCVideo ID of the MCVideo user that was in the
Request-URI of the incoming SIP MESSAGE request;
c) shall copy the contents of the application/vnd.3gpp.mcvideo-info+xml MIME
body received in the incoming SIP MESSAGE request into an
application/vnd.3gpp.mcvideo-info+xml MIME body included in the outgoing SIP
MESSAGE request; and
d) shall copy the contents of the P-Asserted-Identity header field of the
incoming SIP MESSAGE request to the P-Asserted-Identity header field of the
outgoing SIP MESSAGE request; and
5) shall send the SIP MESSAGE request as specified in 3GPP TS 24.229 [11].
Upon receipt of SIP 2xx responses to the outgoing SIP MESSAGE requests, the
participating MCVideo function shall follow the procedures specified in 3GPP
TS 24.229 [11].
### 11.2.3 Controlling MCVideo function procedures
#### 11.2.3.1 Handling of a SIP MESSAGE request for emergency notification
Upon receipt of a \"SIP MESSAGE request for emergency notification for
controlling MCVideo function\", the controlling MCVideo function:
1) if unable to process the request due to a lack of resources or a risk of
congestion exists, may reject the SIP MESSAGE request with a SIP 500 (Server
Internal Error) response. The controlling MCVideo function may include a
Retry-After header field to the SIP 500 (Server Internal Error) response as
specified in IETF RFC 3261 [24]. Otherwise, continue with the rest of the
steps;
NOTE: If the SIP MESSAGE request contains an alert indication set to a value
of \"true\", the controlling MCVideo function can, according to local policy,
choose to accept the request.
2) shall reject the SIP request with a SIP 403 (Forbidden) response and not
process the remaining steps if an Accept-Contact header field does not include
the g.3gpp.icsi-ref media feature tag containing the value of
\"urn:urn-7:3gpp-service.ims.icsi.mcvideo\";
3) if the received SIP MESSAGE request contains an
application/vnd.3gpp.mcvideo-info+xml MIME body with the \ element
set to a value of \"false\", shall perform the procedures specified in clause
11.2.3.2 and skip the rest of the steps;
4) if the received SIP MESSAGE request contains an
application/vnd.3gpp.mcvideo-info+xml MIME body with the \ element
set to a value of \"true\":
a) if the received SIP MESSAGE request is an unauthorised request for an
MCVideo emergency alert as specified in clause 6.3.3.1.13.1 shall reject the
SIP MESSAGE request with a SIP 403 (Forbidden) response to the SIP MESSAGE
request as specified in 3GPP TS 24.229 [11] with the following clarifications:
i) shall include in the SIP 403 (Forbidden) response an
application/vnd.3gpp.mcvideo-info+xml MIME body as specified in clause F.1
with the \ element containing the \ element with
the \ element set to a value of \"false\"; and
ii) shall send the SIP 403 (Forbidden) response as specified in 3GPP TS 24.229
[11] and skip the rest of the steps; and
b) if the received SIP MESSAGE request is an authorised request for an MCVideo
emergency alert as specified in clause 6.3.3.1.13.1:
i) if the sending MCVideo user identified by the \
element included in the application/vnd.3gpp.mcvideo-info+xml MIME body is not
affiliated with the MCVideo group identified by the \
element of the MIME body as determined by the procedures of clause 6.3.6:
I) shall check if the MCVideo user is eligible to be implicitly affiliated
with the MCVideo group as determined by clause 9.2.2.3.6;
II) if the MCVideo user is determined not to be eligible to be implicitly
affiliated to the MCVideo group shall reject the SIP MESSAGE request with a
SIP 403 (Forbidden) response with the warning text set to \"120 user is not
affiliated to this group\" in a Warning header field as specified in clause
4.4 and skip the rest of the steps below; or
III) if the procedures of clause 9.2.2.3.6 determined the MCVideo user to be
eligible to be implicitly affiliated to the MCVideo group shall, perform the
implicit affiliation as specified in clause 9.2.2.3.7;
ii) for each of the other affiliated members of the group:
A) generate an outgoing SIP MESSAGE request notification of the MCVideo
user\'s emergency alert indication as specified in clause 6.3.3.1.11 with the
clarifications of clause 6.3.3.1.12;
B) shall include in the application/vnd.3gpp.mcvideo-info+xml MIME body with
the \ element containing the \ element with the
\ element set to the value of the \ element in the received SIP MESSAGE request; and
C) send the SIP MESSAGE request according to according to rules and procedures
of 3GPP TS 24.229 [11];
iii) shall generate a SIP 200 (OK) response to the received SIP MESSAGE
request as specified in 3GPP TS 24.229 [11] with the following clarifications:
A) shall cache the information that the MCVideo user has initiated an MCVideo
emergency alert;
iv) shall send the SIP 200 (OK) response to the received SIP MESSAGE according
to rules and procedures of 3GPP TS 24.229 [11].
v) shall generate a SIP MESSAGE request as described in clause 6.3.3.1.20 to
indicate successful receipt of an emergency alert, and shall include in the
application/vnd.3gpp.mcvideo-info+xml MIME body:
A) the \ element set to a value of \"true\";
B) the \ element set to a value of true; and
C) the \ element with the MCVideo client ID that was
included in the incoming SIP MESSAGE request; and
vi) shall send the SIP MESSAGE request according to according to rules and
procedures of 3GPP TS 24.229 [11].
Upon receipt of SIP 2xx responses to the outgoing SIP MESSAGE requests, the
controlling MCVideo function shall follow the procedures specified in 3GPP TS
24.229 [11].
#### 11.2.3.2 Handling of a SIP MESSAGE request for emergency alert
cancellation
Upon receipt of a \"SIP MESSAGE request for emergency notification for
controlling MCVideo function\" containing an application/vnd.3gpp.mcvideo-
info+xml MIME body with the \ element set to a value of \"false\",
the controlling MCVideo function:
1) if the received SIP MESSAGE request is an unauthorised request for an
MCVideo emergency alert cancellation as specified in clause 6.3.3.1.13.1:
a) and if the received SIP MESSAGE request does not contain an \ element or is an unauthorised request for an MCVideo emergency call
cancellation as specified in clause 6.3.3.1.13.4, shall reject the SIP MESSAGE
request with a SIP 403 (Forbidden) response to the SIP MESSAGE request as
specified in 3GPP TS 24.229 [11] with the following clarifications:
i) shall include in the SIP 403 (Forbidden) response an
application/vnd.3gpp.mcvideo-info+xml MIME body as specified in clause F.1
with the \ element containing the \ element with
the \ element set to a value of \"true\";
ii) if the received SIP MESSAGE request contains an \ element
of the \ element set to a value of \"false\" and if the in-
progress emergency state of the group is set to a value of \"true\" and this
is an unauthorised request for an MCVideo emergency call cancellation as
determined in step i) above, shall include an \ element set to
a value of \"true\" in the application/vnd.3gpp.mcvideo-info+xml MIME body in
the SIP 403 (Forbidden) response; and
iii) shall send the SIP 403 (Forbidden) response according to rules and
procedures of 3GPP TS 24.229 [11] and skip the rest of the steps; and
b) and if the received SIP MESSAGE request contains an \
element and is an authorised request for an MCVideo emergency call
cancellation as specified in clause 6.3.3.1.13.4 and the in-progress emergency
state of the MCVideo group is set to a value of \"true\":
i) shall set the in-progress emergency state of the group to a value of
\"false\";
ii) shall clear the cache of the MCVideo ID of the MCVideo user that triggered
the setting of the in-progress emergency state of the MCVideo group to
\"true\";
iii) shall generate SIP re-INVITE requests to the other affiliated and joined
members of the MCVideo group as specified in clause 6.3.3.1.6. The MCVideo
controlling function:
A) for each affiliated and joined member shall send the SIP re-INVITE request
towards the MCVideo client as specified in 3GPP TS 24.229 [11]; and
B) Upon receiving a SIP 200 (OK) response to the SIP re-INVITE request the
controlling MCVideo function shall interact with the media plane as specified
in 3GPP TS 24.380 [5];
iv) for each of the affiliated but not joined members of the group shall:
A) generate a SIP MESSAGE request notification of the cancellation of the
MCVideo user\'s emergency call as specified in clause 6.3.3.1.11;
B) shall include in the application/vnd.3gpp.mcvideo-info+xml MIME body with
the \ element containing the \ element with the
\ element set to the value of the \ element in the received SIP MESSAGE request; and
C) shall include an \ element set to a value of \"false\" in
the application/vnd.3gpp.mcvideo-info+xml MIME body in the outgoing SIP
MESSAGE request;
v) shall generate a SIP 200 (OK) response to the received SIP MESSAGE request
as specified in 3GPP TS 24.229 [11];
vi) shall send the SIP 200 (OK) response to the received SIP MESSAGE as
specified in 3GPP TS 24.229 [11] and skip the rest of the steps;
vii) shall generate a SIP MESSAGE request as described in clause 6.3.3.1.20 to
indicate successful receipt of the request for emergency alert cancellation
viii) shall include in the application/vnd.3gpp.mcvideo-info+xml MIME body of
the SIP MESSAGE request:
A) the \ element set to a value of \"true\";
B) the \ element set to a value of true;
C) the \ element set to a value of \"false\"; and
D) the \ element with the MCVideo client ID that was
included in the incoming SIP MESSAGE request; and
ix) shall send the SIP MESSAGE request according to according to rules and
procedures of 3GPP TS 24.229 [11]; and
2) if the received SIP MESSAGE request is an authorised request for an MCVideo
emergency alert cancellation as specified in clause 6.3.3.1.13.1:
a) if the received SIP MESSAGE request contains an \ element in
the application/vnd.3gpp.mcvideo-info+xml MIME body, shall clear the cache of
the MCVideo ID of the MCVideo user identified by the \ element
as having an outstanding MCVideo emergency alert;
b) if the received SIP MESSAGE request does not contain an \
element in the application/vnd.3gpp.mcvideo-info+xml MIME body, clear the
cache of the MCVideo ID of the sender of the SIP MESSAGE request as having an
outstanding MCVideo emergency alert;
c) if the received SIP MESSAGE request does not contain an \
element or is an unauthorised request for an MCVideo emergency call
cancellation as specified in clause 6.3.3.1.13.4, for each of the affiliated
but not joined members of the group shall:
i) generate a SIP MESSAGE request notification of the cancellation of the
MCVideo user\'s emergency alert as specified in clause 6.3.3.1.11;
ii) shall include in the application/vnd.3gpp.mcvideo-info+xml MIME body with
the \ element containing the \ element with the
\ element set to the value of the \ element in the received SIP MESSAGE request;
iii) if the received SIP MESSAGE request contains an \ element
in the application/vnd.3gpp.mcvideo-info+xml MIME body, copy the contents of
the received \ element to an \ element in the
application/vnd.3gpp.mcvideo-info+xml MIME body in the outgoing SIP MESSAGE
request;
iv) shall include an \ element set to a value of \"false\" in the
application/vnd.3gpp.mcvideo-info+xml MIME body in the outgoing SIP MESSAGE
request; and
v) send the SIP MESSAGE request as specified in 3GPP TS 24.229 [11];
d) if the received SIP MESSAGE request contains an \ element
and is an authorised request for an MCVideo emergency call cancellation as
specified in clause 6.3.3.1.13.4 and the in-progress emergency state of the
MCVideo group is set to a value of \"true\":
i) shall set the in-progress emergency state of the group to a value of
\"false\";
ii) cache the information that the MCVideo user has cancelled the outstanding
in-progress emergency state of the group;
iii) shall generate SIP re-INVITES requests to the other affiliated and joined
members of the MCVideo group as specified in clause 6.3.3.1.6. The MCVideo
controlling function:
A) for each affiliated and joined member shall send the SIP re-INVITE request
towards the MCVideo client as specified in 3GPP TS 24.229 [11]; and
B) Upon receiving a SIP 200 (OK) response to the SIP re-INVITE request the
controlling MCVideo function shall interact with the media plane as specified
in 3GPP TS 24.380 [5]; and
iv) for each of the affiliated but not joined members of the group shall:
A) generate a SIP MESSAGE request notification of the cancellation of the
MCVideo user\'s emergency call as specified in clause 6.3.3.1.11;
B) include in the application/vnd.3gpp.mcvideo-info+xml MIME body with the
\ element containing the \ element with the
\ element set to the value of the \ element in the received SIP MESSAGE request;
C) if the received SIP MESSAGE request contains an \ element in
the application/vnd.3gpp.mcvideo-info+xml MIME body, copy the contents of the
received \ element to an \ element in the
application/vnd.3gpp.mcvideo-info+xml MIME body in the outgoing SIP MESSAGE
request;
D) include in the application/vnd.3gpp.mcvideo-info+xml MIME body an \ element set to a value of \"false\"; and
E) shall include an \ element set to a value of \"false\" in
the application/vnd.3gpp.mcvideo-info+xml MIME body in the outgoing SIP
MESSAGE request;
e) shall generate a SIP 200 (OK) response to the received SIP MESSAGE request
as specified in 3GPP TS 24.229 [11];
f) shall send the SIP 200 (OK) response to the received SIP MESSAGE as
specified in 3GPP TS 24.229 [11].
g) shall generate a SIP MESSAGE request as described in clause 6.3.3.1.20 to
indicate successful receipt of the request for emergency alert cancellation;
h) shall include in the application/vnd.3gpp.mcvideo-info+xml MIME body, the
\ element set to a value of \"false\" and the \ set
to \"true\";
i) shall populate the \ element with the MCVideo client ID
that was included in the incoming SIP MESSAGE request;
j) if the received SIP MESSAGE request contains an \ element of
the \ element set to a value of \"false\":
i) if this is an authorised request for an MCVideo emergency call cancellation
as specified in clause 6.3.3.1.13.4, shall include an \ element
set to a value of \"false\" in the application/vnd.3gpp.mcvideo-info+xml MIME
body in the outgoing SIP MESSAGE request; and
B) otherwise, if this is an unauthorised request for an MCVideo emergency call
cancellation as specified in clause 6.3.3.1.13.4, and the in-progress
emergency state of the group is set to a value of \"true\", shall include an
\ element set to a value of \"true\" in the
application/vnd.3gpp.mcvideo-info+xml MIME body in the outgoing SIP MESSAGE
request; and
k) shall send the SIP MESSAGE request according to according to the rules and
procedures of 3GPP TS 24.229 [11].
Upon receipt of SIP 2xx responses to the outgoing SIP MESSAGE requests, the
controlling MCVideo function shall follow the procedures specified in 3GPP TS
24.229 [11].
## 11.3 Off-network emergency alert
### 11.3.1 General
### 11.3.2 Basic state machine
#### 11.3.2.1 General
#### 11.3.2.2 Emergency alert state machine
The figure 11.3.2.2-1 gives an overview of the main states and transitions on
the UE for emergency alert.
Each emergency alert state machine is per MCVideo group.
Figure 11.3.2.2-1: Emergency alert state machine
The following piece of information is associated with the emergency alert
state machine:
a) the stored emergency state of the MCVideo group.
NOTE: The emergency alert state machine is referred by the MCVideo off-network
group call and MCVideo off-network private call procedures.
#### 11.3.2.3 Emergency alert states
##### 11.3.2.3.1 E1: Not in emergency state
This state is the start state of this state machine.
The UE stays in this state while not in emergency state.
##### 11.3.2.3.2 E2: Emergency state
This state exists for UE, when the UE has sent a GROUP EMERGENCY ALERT
message.
### 11.3.3 Procedures
#### 11.3.3.1 Originating user sending emergency alert
When in state \"E1: Not in emergency state\", upon receiving an indication
from the MCVideo user to transmit an emergency alert for an MCVideo group ID
and the value of \"/_\ _/_\ _/Common/AllowedActivateAlert\" leaf node
present in the user profile as specified in 3GPP TS 24.483 [4] is set to
\"true\", the MCVideo client:
1) shall set the stored emergency state as \"true\";
2) shall set the stored MCVideo group ID to the indicated MCVideo group ID;
3) shall generate a GROUP EMERGENCY ALERT message as specified in clause
17.1.14. In the GROUP EMERGENCY ALERT message, the MCVideo client:
a) shall set the MCVideo group ID IE to the stored MCVideo group ID;
b) shall set the Originating MCVideo user ID IE to own MCVideo user ID;
c) shall set the Organization name IE to own organization name; and
d) may set the User location IE with client\'s current location, if requested;
4) shall send the GROUP EMERGENCY ALERT message as specified in clause
9.3.1.1.1;
5) shall start timer TFE2 (emergency alert retransmission); and
6) shall enter \"E2: Emergency state\" state.
#### 11.3.3.2 Emergency alert retransmission
When in state \"E2: Emergency state\", upon expiry of timer TFE2 (emergency
alert retransmission), the MCVideo client:
1) shall generate a GROUP EMERGENCY ALERT message as specified in clause
17.1.14. In the GROUP EMERGENCY ALERT message, the MCVideo client:
a) shall set the MCVideo group ID IE to the stored MCVideo group ID;
b) shall set the originating MCVideo user ID IE to own MCVideo user ID;
c) shall set the Organization name IE to own organization name; and
d) may set the Location IE with client\'s current location, if requested; and
2) shall send the GROUP EMERGENCY ALERT message as specified in clause
9.3.1.1.1;
3) shall start the timer TFE2 (emergency alert retransmission); and
4) shall remain in the current state.
#### 11.3.3.3 Terminating user receiving emergency alert
When in state \"E1: Not in emergency state\" or in \"E2: Emergency state\",
upon receiving a GROUP EMERGENCY ALERT message with the Originating MCVideo
user ID IE not stored in the list of users in emergency, the MCVideo client:
1) shall store the Originating MCVideo user ID IE and location IE in the list
of users in emergency;
2) shall generate a GROUP EMERGENCY ALERT ACK message as specified in clause
17.1.15. In the GROUP EMERGENCY ALERT ACK message, the MCVideo client:
a) shall set the MCVideo group ID IE to the MCVideo group ID IE of the
received GROUP EMERGENCY ALERT message;
b) shall set the Sending MCVideo user ID IE to own MCVideo user ID; and
c) shall set the Originating MCVideo user ID IE to the Originating MCVideo
user ID IE of the received GROUP EMERGENCY ALERT message; and
3) shall send the GROUP EMERGENCY ALERT ACK message as specified in clause
9.3.1.1.1;
4) shall start timer TFE1 (Emergency Alert); and
5) shall remain in the current state.
NOTE: Each instance of timer TFE1 is per MCVideo user ID.
#### 11.3.3.4 Terminating user receiving retransmitted emergency alert
When in state \"E1: Not in emergency state\" or in \"E2: Emergency state\",
upon receiving a GROUP EMERGENCY ALERT message with the Originating MCVideo
user ID IE stored in the list of users in emergency and Location IE different
than the stored location of the user, the MCVideo client:
1) may update the stored location of the user with the received Location IE;
2) shall restart the associated timer TFE1 (Emergency Alert); and
3) shall remain in the current state.
#### 11.3.3.5 Originating user cancels emergency alert
When in \"E2: Emergency state\", upon receiving an indication from the MCVideo
user to cancel an emergency alert and the value of \"/_\ _/_\
_/Common/AllowedCancelAlert\" leaf node present in the user profile as
specified in 3GPP TS 24.483 [4] is set to \"true\", the MCVideo client:
1) shall set the stored emergency state as \"false\";
2) shall generate a GROUP EMERGENCY ALERT CANCEL message as specified in
clause 17.1.16. In the GROUP EMERGENCY ALERT CANCEL message, the MCVideo
client:
a) shall set the MCVideo group ID IE to the stored MCVideo group ID; and
b) shall set the Originating MCVideo user ID IE to own MCVideo user ID; and
3) shall send the GROUP EMERGENCY ALERT CANCEL message as specified in clause
9.3.1.1.1;
4) shall stop timer TFE2 (emergency alert retransmission); and
5) shall enter \"E1: Not in emergency state\" state.
#### 11.3.3.6 Terminating user receives GROUP EMERGENCY ALERT CANCEL message
When in state \"E1: Not in emergency state\" or in \"E2: Emergency state\",
upon receiving a GROUP EMERGENCY ALERT CANCEL message with the Originating
MCVideo user ID IE stored in the list of users in emergency, the MCVideo
client:
1) shall remove the MCVideo user ID and associated location information from
the stored list of users in emergency;
2) shall generate a GROUP EMERGENCY ALERT CANCEL ACK message as specified in
clause 17.1.17. In the GROUP EMERGENCY ALERT CANCEL ACK message, the MCVideo
client:
a) shall set the MCVideo group ID IE to the MCVideo group ID IE of the
received GROUP EMERGENCY ALERT CANCEL message; and
b) shall set the Sending MCVideo user ID IE to own MCVideo user ID; and
c) shall set the Originating MCVideo user ID IE to the Originating MCVideo
user ID IE of the received GROUP EMERGENCY ALERT message;
3) shall send the GROUP EMERGENCY ALERT CANCEL ACK message as specified in
clause 9.3.1.1.1;
4) shall stop the associated timer TFE1 (Emergency Alert); and
5) shall remain in the current state.
#### 11.3.3.7 Implicit emergency alert cancel
When in state \"E1: Not in emergency state\" or in \"E2: Emergency state\",
upon expiry of timer TFE1 (Emergency Alert) associated with a stored MCVideo
user ID, the MCVideo client:
1) shall remove the MCVideo user ID and associated location information from
the stored list of users in emergency; and
2) shall remain in the current state.
# 12 Video Pull
This feature is not specified in this version of the document.
# 13 Video Push
This feature is not specified in this version of the document.
# 14 Capability information sharing
This feature is not specified in this version of the document.
# 15 Ambient viewing call
This feature is not specified in this version of the document.
# 16 Use of MBMS transmission (on-network)
This feature is not specified in this version of the document.
# 17 Off-network message formats
## 17.1 MONP MCVIDEO message functional definitions and contents
### 17.1.1 General
The following clauses describe the MONP MCVideo message functional definitions
and contents transported in an MONP MCVIDEO MESSAGE CARRIER message as defined
in 3GPP TS 24.379 [40]. Each message consists of a series of information
elements. Annex I of 3GPP TS 24.379 [40] describes the standard format of a
MONP message and the encoding rules for each type of information element.
### 17.1.2 GROUP CALL PROBE message
#### 17.1.2.1 Message definition
This message is sent by the UE to other UEs to check for an ongoing group
call. For contents of the message see Table 17.1.2.1-1.
Message type: GROUP CALL PROBE
Direction: UE to other UEs
Table 17.1.2.1-1: GROUP CALL PROBE message content
* * *
IEI Information Element Type/Reference Presence Format Length
        Group call probe message identity   Message type\       M          V        1
                                            17.2.2
        MCVideo group ID                    MCVideo group ID\   M          LV-E     3-x
                                            17.2.5
* * *
### 17.1.3 GROUP CALL ANNOUNCEMENT message
#### 17.1.3.1 Message definition
This message is sent by the UE to other UEs to announce an ongoing group call
to other UEs. For contents of the message see Table 17.1.3.1-1.
Message type: GROUP CALL ANNOUNCEMENT
Direction: UE to other UEs
Table 17.1.3.1-1: GROUP CALL ANNOUNCEMENT message content
+-----+-------------+-------------+----------+--------+--------+ | IEI | Information | Typ | Presence | Format | Length | | | Element | e/Reference | | | | +-----+-------------+-------------+----------+--------+--------+ | | Group call | Message | M | V | 1 | | | a | type\ | | | | | | nnouncement | 17.2.2 | | | | | | message | | | | | | | identity | | | | | +-----+-------------+-------------+----------+--------+--------+ | | Call | Call | M | V | 2 | | | identifier | identifier\ | | | | | | | 17.2.3 | | | | +-----+-------------+-------------+----------+--------+--------+ | | Call type | Call type | M | V | 1 | | | | | | | | | | | 17.2.11 | | | | +-----+-------------+-------------+----------+--------+--------+ | | Refresh | Refresh | M | V | 2 | | | interval | interval\ | | | | | | | 17.2.4 | | | | +-----+-------------+-------------+----------+--------+--------+ | | Call start | Call start | M | V | 5 | | | time | time\ | | | | | | | 17.2.14 | | | | +-----+-------------+-------------+----------+--------+--------+ | | Last call | Last call | M | V | 5 | | | type change | type change | | | | | | time | time | | | | | | | | | | | | | | 17.2.15 | | | | +-----+-------------+-------------+----------+--------+--------+ | | MCVideo | MCVideo | M | LV-E | 3-x | | | group ID | group ID\ | | | | | | | 17.2.5 | | | | +-----+-------------+-------------+----------+--------+--------+ | | SDP | SDP\ | M | LV-E | 3-x | | | | 17.2.6 | | | | +-----+-------------+-------------+----------+--------+--------+ | | Originating | MCVideo | M | LV-E | 3-x | | | MCVideo | user ID\ | | | | | | user ID | 17.2.10 | | | | +-----+-------------+-------------+----------+--------+--------+ | | Last user | MCVideo | M | LV-E | 3-x | | | to change | User ID\ | | | | | | call type | 17.2.10 | | | | +-----+-------------+-------------+----------+--------+--------+ | 80 | Confirm | Confirm | O | T | 1 | | | mode | mode | | | | | | indication | indication\ | | | | | | | 17.2.9 | | | | +-----+-------------+-------------+----------+--------+--------+ | 81 | Probe | Probe | O | T | 1 | | | response | response | | | | | | | | | | | | | | 17.2.16 | | | | +-----+-------------+-------------+----------+--------+--------+
### 17.1.4 GROUP CALL ACCEPT message
#### 17.1.4.1 Message definition
This message is sent by the UE to other UEs to indicate acceptance of a group
call. For contents of the message see Table 17.1.4.1-1.
Message type: GROUP CALL ACCEPT
Direction: UE to other UEs
Table 17.1.4.1-1: GROUP CALL ACCEPT message content
+-----+-------------+-------------+----------+--------+--------+ | IEI | Information | Typ | Presence | Format | Length | | | Element | e/Reference | | | | +-----+-------------+-------------+----------+--------+--------+ | | Group call | Message | M | V | 1 | | | accept | type\ | | | | | | message | 17.2.2 | | | | | | identity | | | | | +-----+-------------+-------------+----------+--------+--------+ | | Call | Call | M | V | 2 | | | identifier | identifier\ | | | | | | | 17.2.3 | | | | +-----+-------------+-------------+----------+--------+--------+ | | Call type | Call type | M | V | 1 | | | | | | | | | | | 17.2.11 | | | | +-----+-------------+-------------+----------+--------+--------+ | | MCVideo | MCVideo | M | LV-E | 3-x | | | group ID | group ID\ | | | | | | | 17.2.5 | | | | +-----+-------------+-------------+----------+--------+--------+ | | Sending | MCVideo | M | LV-E | 3-x | | | MCVideo | user ID\ | | | | | | user ID | 17.2.10 | | | | +-----+-------------+-------------+----------+--------+--------+
### 17.1.5 PRIVATE CALL SETUP REQUEST message
#### 17.1.5.1 Message definition
This message is sent by a UE to another UE to request setup of a private call.
For contents of the message see Table 17.1.5.1-1.
Message type: PRIVATE CALL SETUP REQUEST
Direction: UE to another UE
Table 17.1.5.1-1: PRIVATE CALL SETUP REQUEST message content
+-----+-------------+-------------+----------+--------+--------+ | IEI | Information | Typ | Presence | Format | Length | | | Element | e/Reference | | | | +-----+-------------+-------------+----------+--------+--------+ | | Private | Message | M | V | 1 | | | call setup | type\ | | | | | | request | 17.2.2 | | | | | | message | | | | | | | identity | | | | | +-----+-------------+-------------+----------+--------+--------+ | | Call | Call | M | V | 2 | | | identifier | identifier | | | | | | | | | | | | | | 17.2.3 | | | | +-----+-------------+-------------+----------+--------+--------+ | | C | C | M | V | 1 | | | ommencement | ommencement | | | | | | mode | mode\ | | | | | | | 17.2.7 | | | | +-----+-------------+-------------+----------+--------+--------+ | | Call type | Call type | M | V | 1 | | | | | | | | | | | 17.2.11 | | | | +-----+-------------+-------------+----------+--------+--------+ | | MCVideo | MCVideo | M | LV-E | 3-x | | | user ID of | user ID\ | | | | | | the caller | 17.2.10 | | | | +-----+-------------+-------------+----------+--------+--------+ | | MCVideo | MCVideo | M | LV-E | 3-x | | | user ID of | user ID\ | | | | | | the callee | 17.2.10 | | | | +-----+-------------+-------------+----------+--------+--------+ | | SDP offer | SDP\ | M | LV-E | 3-x | | | | 17.2.6 | | | | +-----+-------------+-------------+----------+--------+--------+ | 78 | User | User | O | TLV-E | 3-x | | | location | location | | | | | | | | | | | | | | 17.2.12 | | | | +-----+-------------+-------------+----------+--------+--------+
### 17.1.6 PRIVATE CALL RINGING message
#### 17.1.6.1 Message definition
This message is automatically sent by a UE to another UE in response to a
PRIVATE CALL SETUP REQUEST message. This message indicates that the UE has
presented the incoming call notification to the user and is awaiting user
response. For contents of the message see Table 17.1.6.1-1.
Message type: PRIVATE CALL RINGING
Direction: UE to another UE
Table 17.1.6.1-1: PRIVATE CALL RINGING message content
+-----+-------------+-------------+----------+--------+--------+ | IEI | Information | Typ | Presence | Format | Length | | | Element | e/Reference | | | | +-----+-------------+-------------+----------+--------+--------+ | | Private | Message | M | V | 1 | | | call | type\ | | | | | | ringing | 17.2.2 | | | | | | message | | | | | | | identity | | | | | +-----+-------------+-------------+----------+--------+--------+ | | Call | Call | M | V | 2 | | | identifier | identifier | | | | | | | | | | | | | | 17.2.3 | | | | +-----+-------------+-------------+----------+--------+--------+ | | MCVideo | MCVideo | M | LV-E | 3-x | | | user ID of | user ID\ | | | | | | the caller | 17.2.10 | | | | +-----+-------------+-------------+----------+--------+--------+ | | MCVideo | MCVideo | M | LV-E | 3-x | | | user ID of | user ID\ | | | | | | the callee | 17.2.10 | | | | +-----+-------------+-------------+----------+--------+--------+
### 17.1.7 PRIVATE CALL ACCEPT message
#### 17.1.7.1 Message definition
This message is sent by a UE to another UE in response to a PRIVATE CALL SETUP
REQUEST message when user accepts the call. This message indicates that the UE
accepts the call setup request. For contents of the message see Table
17.1.7.1-1.
Message type: PRIVATE CALL ACCEPT
Direction: UE to another UE
Table 17.1.7.1-1: PRIVATE CALL ACCEPT message content
+-----+-------------+-------------+----------+--------+--------+ | IEI | Information | Typ | Presence | Format | Length | | | Element | e/Reference | | | | +-----+-------------+-------------+----------+--------+--------+ | | Private | Message | M | V | 1 | | | call accept | type\ | | | | | | message | 17.2.2 | | | | | | identity | | | | | +-----+-------------+-------------+----------+--------+--------+ | | Call | Call | M | V | 2 | | | identifier | identifier | | | | | | | | | | | | | | 17.2.3 | | | | +-----+-------------+-------------+----------+--------+--------+ | | MCVideo | MCVideo | M | LV-E | 3-x | | | user ID of | user ID\ | | | | | | the caller | 17.2.10 | | | | +-----+-------------+-------------+----------+--------+--------+ | | MCVideo | MCVideo | M | LV-E | 3-x | | | user ID of | user ID\ | | | | | | the callee | 17.2.10 | | | | +-----+-------------+-------------+----------+--------+--------+ | | SDP answer | SDP\ | M | LV-E | 3-x | | | | 17.2.6 | | | | +-----+-------------+-------------+----------+--------+--------+
### 17.1.8 PRIVATE CALL REJECT message
#### 17.1.8.1 Message definition
This message is sent by a UE to another UE in response to a PRIVATE CALL SETUP
REQUEST message when user rejects the call. This message indicates that the UE
rejects the call setup request. For contents of the message see Table
17.1.8.1-1.
Message type: PRIVATE CALL REJECT
Direction: UE to another UE
Table 17.1.8.1-1: PRIVATE CALL REJECT message content
+-----+-------------+-------------+----------+--------+--------+ | IEI | Information | Typ | Presence | Format | Length | | | Element | e/Reference | | | | +-----+-------------+-------------+----------+--------+--------+ | | Private | Message | M | V | 1 | | | call reject | type\ | | | | | | message | 17.2.2 | | | | | | identity | | | | | +-----+-------------+-------------+----------+--------+--------+ | | Call | Call | M | V | 2 | | | identifier | identifier | | | | | | | | | | | | | | 17.2.3 | | | | +-----+-------------+-------------+----------+--------+--------+ | | Reason | Reason\ | M | V | 1 | | | | 17.2.8 | | | | +-----+-------------+-------------+----------+--------+--------+ | | MCVideo | MCVideo | M | LV-E | 3-x | | | user ID of | user ID\ | | | | | | the caller | 17.2.10 | | | | +-----+-------------+-------------+----------+--------+--------+ | | MCVideo | MCVideo | M | LV-E | 3-x | | | user ID of | user ID\ | | | | | | the callee | 17.2.10 | | | | +-----+-------------+-------------+----------+--------+--------+
### 17.1.9 PRIVATE CALL RELEASE message
#### 17.1.9.1 Message definition
This message is sent by a UE to another UE to terminate an ongoing private
call. For contents of the message see Table 17.1.9.1-1.
Message type: PRIVATE CALL RELEASE
Direction: UE to another UE
Table 17.1.9.1-1: PRIVATE CALL RELEASE message content
+-----+-------------+-------------+----------+--------+--------+ | IEI | Information | Typ | Presence | Format | Length | | | Element | e/Reference | | | | +-----+-------------+-------------+----------+--------+--------+ | | Private | Message | M | V | 1 | | | call | type\ | | | | | | release | 17.2.2 | | | | | | message | | | | | | | identity | | | | | +-----+-------------+-------------+----------+--------+--------+ | | Call | Call | M | V | 2 | | | identifier | identifier | | | | | | | | | | | | | | 17.2.3 | | | | +-----+-------------+-------------+----------+--------+--------+ | | MCVideo | MCVideo | M | LV-E | 3-x | | | user ID of | user id\ | | | | | | the caller | 17.2.10 | | | | +-----+-------------+-------------+----------+--------+--------+ | | MCVideo | MCVideo | M | LV-E | 3-x | | | user ID of | user id\ | | | | | | the callee | 17.2.10 | | | | +-----+-------------+-------------+----------+--------+--------+
### 17.1.10 PRIVATE CALL RELEASE ACK message
#### 17.1.10.1 Message definition
This message is sent by a UE to another UE in response to a PRIVATE CALL
RELEASE message. This message indicates that the UE has terminated the call.
For contents of the message see Table 17.1.10.1-1.
Message type: PRIVATE CALL RELEASE ACK
Direction: UE to another UE
Table 17.1.10.1-1: PRIVATE CALL RELEASE ACK message content
+-----+-------------+-------------+----------+--------+--------+ | IEI | Information | Typ | Presence | Format | Length | | | Element | e/Reference | | | | +-----+-------------+-------------+----------+--------+--------+ | | Private | Message | M | V | 1 | | | call | type\ | | | | | | release ack | 17.2.2 | | | | | | message | | | | | | | identity | | | | | +-----+-------------+-------------+----------+--------+--------+ | | Call | Call | M | V | 2 | | | identifier | identifier | | | | | | | | | | | | | | 17.2.3 | | | | +-----+-------------+-------------+----------+--------+--------+ | | MCVideo | MCVideo | M | LV-E | 3-x | | | user ID of | user id\ | | | | | | the caller | 17.2.10 | | | | +-----+-------------+-------------+----------+--------+--------+ | | MCVideo | MCVideo | M | LV-E | 3-x | | | user ID of | user ID\ | | | | | | the callee | 17.2.10 | | | | +-----+-------------+-------------+----------+--------+--------+
### 17.1.11 PRIVATE CALL ACCEPT ACK message
#### 17.1.11.1 Message definition
This message is sent by a UE to another UE in response to a PRIVATE CALL
ACCEPT message. This message acknowledges the receipt of PRIVATE CALL ACCEPT
message. For contents of the message see Table 17.1.11.1-1.
Message type: PRIVATE CALL ACCEPT ACK
Direction: UE to another UE
Table 17.1.11.1-1: PRIVATE CALL ACCEPT ACK message content
+-----+-------------+-------------+----------+--------+--------+ | IEI | Information | Typ | Presence | Format | Length | | | Element | e/Reference | | | | +-----+-------------+-------------+----------+--------+--------+ | | Private | Message | M | V | 1 | | | call accept | type\ | | | | | | ack message | 17.2.2 | | | | | | identity | | | | | +-----+-------------+-------------+----------+--------+--------+ | | Call | Call | M | V | 2 | | | identifier | identifier | | | | | | | | | | | | | | 17.2.3 | | | | +-----+-------------+-------------+----------+--------+--------+ | | MCVideo | MCVideo | M | LV-E | 3-x | | | user ID of | user ID\ | | | | | | the caller | 17.2.10 | | | | +-----+-------------+-------------+----------+--------+--------+ | | MCVideo | MCVideo | M | LV-E | 3-x | | | user ID of | user ID\ | | | | | | the callee | 17.2.10 | | | | +-----+-------------+-------------+----------+--------+--------+
### 17.1.12 GROUP CALL IMMINENT PERIL END message
#### 17.1.12.1 Message definition
This message is sent by the UE to other UEs to indicate termination of
imminent peril mode in the group call. For contents of the message see Table
17.1.12.1-1.
Message type: GROUP CALL IMMINENT PERIL END
Direction: UE to other UEs
Table 17.1.12.1-1: GROUP CALL IMMINENT PERIL END message content
+-----+-------------+-------------+----------+--------+--------+ | IEI | Information | Typ | Presence | Format | Length | | | Element | e/Reference | | | | +-----+-------------+-------------+----------+--------+--------+ | | Group call | Message | M | V | 1 | | | imminent | type\ | | | | | | peril end | 17.2.2 | | | | | | message | | | | | | | identity | | | | | +-----+-------------+-------------+----------+--------+--------+ | | Call | Call | M | V | 2 | | | identifier | identifier\ | | | | | | | 17.2.3 | | | | +-----+-------------+-------------+----------+--------+--------+ | | Last call | Last call | M | V | 5 | | | type change | type change | | | | | | time | time | | | | | | | | | | | | | | 17.2.16 | | | | +-----+-------------+-------------+----------+--------+--------+ | | Last user | MCVideo | M | LV-E | 3-x | | | to change | User ID\ | | | | | | call type | 17.2.10 | | | | +-----+-------------+-------------+----------+--------+--------+ | | MCVideo | MCVideo | M | LV-E | 3-x | | | group ID | group ID\ | | | | | | | 17.2.5 | | | | +-----+-------------+-------------+----------+--------+--------+ | | Originating | MCVideo | M | LV-E | 3-x | | | MCVideo | user ID\ | | | | | | user ID | 17.2.10 | | | | +-----+-------------+-------------+----------+--------+--------+
### 17.1.13 GROUP CALL EMERGENCY END message
#### 17.1.13.1 Message definition
This message is sent by the UE to other UEs to indicate termination of
emergency mode in the group call. For contents of the message see Table
17.1.13.1-1.
Message type: GROUP CALL EMERGENCY END
Direction: UE to other UEs
Table 17.1.13.1-1: GROUP CALL EMERGENCY END message content
+-----+-------------+-------------+----------+--------+--------+ | IEI | Information | Typ | Presence | Format | Length | | | Element | e/Reference | | | | +-----+-------------+-------------+----------+--------+--------+ | | Group call | Message | M | V | 1 | | | emergency | type\ | | | | | | end message | 17.2.2 | | | | | | identity | | | | | +-----+-------------+-------------+----------+--------+--------+ | | Call | Call | M | V | 2 | | | identifier | identifier\ | | | | | | | 17.2.3 | | | | +-----+-------------+-------------+----------+--------+--------+ | | Last call | Last call | M | V | 5 | | | type change | type change | | | | | | time | time | | | | | | | | | | | | | | 17.2.16 | | | | +-----+-------------+-------------+----------+--------+--------+ | | Last user | MCVideo | M | LV-E | 3-x | | | to change | User ID\ | | | | | | call type | 17.2.10 | | | | +-----+-------------+-------------+----------+--------+--------+ | | MCVideo | MCVideo | M | LV-E | 3-x | | | group ID | group ID\ | | | | | | | 17.2.5 | | | | +-----+-------------+-------------+----------+--------+--------+ | | Originating | MCVideo | M | LV-E | 3-x | | | MCVideo | user ID\ | | | | | | user ID | 17.2.10 | | | | +-----+-------------+-------------+----------+--------+--------+
### 17.1.14 GROUP EMERGENCY ALERT message
#### 17.1.14.1 Message definition
This message is sent by the UE to other UEs to indicate an emergency
situation. For contents of the message see Table 17.1.14.1-1.
Message type: GROUP EMERGENCY ALERT
Direction: UE to other UEs
Table 17.1.14.1-1: GROUP EMERGENCY ALERT message content
* * *
IEI Information Element Type/Reference Presence Format Length
        Group emergency alert message identity   Message type\        M          V        1
                                                 17.2.2
        MCVideo group ID                         MCVideo group ID\    M          LV-E     3-x
                                                 17.2.5
        Originating MCVideo user ID              MCVideo user ID\     M          LV-E     3-x
                                                 17.2.10
        Organization name                        Organization name\   M          LV-E     3-x
                                                 17.2.13
78 User location User location\ O TLV-E 4-x 17.2.12
* * *
### 17.1.15 GROUP EMERGENCY ALERT ACK message
#### 17.1.15.1 Message definition
This message is sent by the UE to other UEs to indicate receipt of emergency
alert. For contents of the message see Table 17.1.15.1-1.
Message type: GROUP EMERGENCY ALERT ACK
Direction: UE to other UEs
Table 17.1.15.1-1: GROUP EMERGENCY ALERT ACK message content
* * *
IEI Information Element Type/Reference Presence Format Length
        Group emergency alert ack message identity   Message type\       M          V        1
                                                     17.2.2
        MCVideo group ID                             MCVideo group ID\   M          LV-E     3-x
                                                     17.2.5
        Originating MCVideo user ID                  MCVideo user ID\    M          LV-E     3-x
                                                     17.2.10
        Sending MCVideo user ID                      MCVideo user ID\    M          LV-E     3-x
                                                     17.2.10
* * *
### 17.1.16 GROUP EMERGENCY ALERT CANCEL message
#### 17.1.16.1 Message definition
This message is sent by the UE to other UEs to indicate end of emergency
situation. For contents of the message see Table 17.1.16.1-1.
Message type: GROUP EMERGENCY ALERT CANCEL
Direction: UE to other UEs
Table 17.1.16.1-1: GROUP EMERGENCY ALERT CANCEL message content
* * *
IEI Information Element Type/Reference Presence Format Length
        Group emergency alert cancel 0message identity   Message type\       M          V        1
                                                         17.2.2
        MCVideo group ID                                 MCVideo group ID\   M          LV-E     3-x
                                                         17.2.5
        Originating MCVideo user ID                      MCVideo User ID\    M          LV-E     3-x
                                                         17.2.10
        Sending MCVideo user ID                          MCVideo user ID\    M          LV-E     3-x
                                                         17.2.10
* * *
### 17.1.17 GROUP EMERGENCY ALERT CANCEL ACK message
#### 17.1.17.1 Message definition
This message is sent by the UE to other UEs to indicate receipt of emergency
alert cancel. For contents of the message see Table 17.1.17.1-1.
Message type: GROUP EMERGENCY ALERT CANCEL ACK
Direction: UE to other UEs
Table 17.1.17.1-1: GROUP EMERGENCY ALERT CANCEL ACK message content
* * *
IEI Information Element Type/Reference Presence Format Length
        Group emergency alert cancel ack message identity   Message type\       M          V        1
                                                            17.2.2
        MCVideo group ID                                    MCVideo group ID\   M          LV-E     3-x
                                                            17.2.5
        Originating MCVideo user ID                         MCVideo User ID\    M          LV-E     3-x
                                                            17.2.10
        Sending MCVideo user ID                             MCVideo user ID\    M          LV-E     3-x
                                                            17.2.10
* * *
### 17.1.18 GROUP CALL BROADCAST message
#### 17.1.18.1 Message definition
This message is sent by the UE to other UEs to announce a broadcast group call
to other UEs. For contents of the message see Table 17.1.18.1-1.
Message type: GROUP CALL BROADCAST
Direction: UE to other UEs
Table 17.1.18.1-1: GROUP CALL BROADCAST message content
+-----+-------------+-------------+----------+--------+--------+ | IEI | Information | Typ | Presence | Format | Length | | | Element | e/Reference | | | | +-----+-------------+-------------+----------+--------+--------+ | | Group call | Message | M | V | 1 | | | broadcast | type\ | | | | | | message | 17.2.2 | | | | | | identity | | | | | +-----+-------------+-------------+----------+--------+--------+ | | Call | Call | M | V | 2 | | | identifier | identifier\ | | | | | | | 17.2.3 | | | | +-----+-------------+-------------+----------+--------+--------+ | | Call type | Call type | M | V | 1 | | | | | | | | | | | 17.2.11 | | | | +-----+-------------+-------------+----------+--------+--------+ | | Originating | MCVideo | M | LV-E | 3-x | | | MCVideo | user ID\ | | | | | | user ID | 17.2.10 | | | | +-----+-------------+-------------+----------+--------+--------+ | | MCVideo | Group ID\ | M | LV-E | 3-x | | | group ID | 17.2.5 | | | | +-----+-------------+-------------+----------+--------+--------+ | | SDP | SDP\ | M | LV-E | 3-x | | | | 17.2.6 | | | | +-----+-------------+-------------+----------+--------+--------+
### 17.1.19 GROUP CALL BROADCAST END message
#### 17.1.19.1 Message definition
This message is sent by the UE to other UEs to indicate termination of a
broadcast group call. For contents of the message see Table 17.1.19.1-1.
Message type: GROUP CALL BROADCAST END
Direction: UE to other UEs
Table 17.1.19.1-1: GROUP CALL BROADCAST END message content
* * *
IEI Information Element Type/Reference Presence Format Length
        Group call broadcast end message identity   Message type\       M          V        1
                                                    17.2.2
        Call identifier                             Call identifier\    M          V        2
                                                    17.2.3
        MCVideo group ID                            MCVideo group ID\   M          LV-E     3-x
                                                    17.2.5
        Originating MCVideo user ID                 MCVideo user ID\    M          LV-E     3-x
                                                    17.2.10
* * *
## 17.2 General message format and information elements coding
### 17.2.1 General
The MONP MCVideo message is transported in a MONP MCVIDEO MESSAGE CARRIER
message defined in 3GPP TS 24.379 [40]. Each MONP MCVideo message consists of
a series of information elements. A MONP MCVideo message consists of the
following parts:
The least significant bit of a field is represented by the lowest numbered bit
of the highest numbered octet of the field. When the field extends over more
than one octet, the order of bit values progressively decreases as the octet
number increases.
Figure 17.2.1-1 shows an example of a field where the most significant bit of
the field is marked MSB and the least significant bit of the field is marked
LSB.
* * *
8 7 6 5 4 3 2 1  
MSB x x x x x x x octet 1 x x x x x x x x  
x x x x x x x LSB octet N
* * *
Figure 17.2.1-1: Example of bit ordering of a field
Within the protocols defined in the present document, the message consists of
the following parts:
a) message type information element; and
b) other information elements, as required.
The organization of a message is illustrated in the example shown in Figure
17.2.1-2.
* * *
8 7 6 5 4 3 2 1  
Message type octet 1  
octet 2  
Other information elements as required  
octet n
* * *
Figure 17.2.1-2: General message organization example
Unless specified otherwise in the message descriptions of clause 17.1, a
particular information element shall not be present more than once in a given
message.
The sending entity shall set value of a spare bit to zero. The receiving
entity shall ignore value of a spare bit
The sending entity shall not set a value of an information element to a
reserved value. The receiving entity shall discard message containing an
information element set to a reserved value.
### 17.2.2 Message type
The purpose of the Message type information element is to identify the type of
the message.
The value part of the Message type information element is coded as shown in
Table 17.2.2-1.
The Message type information element is a type 3 information element with a
length of 1 octet.
Table 17.2.2-1: Message types
* * *
Bits  
8 7 6 5 4 3 2 1
1 0 0 0 0 0 0 1 GROUP CALL PROBE 1 0 0 0 0 0 1 0 GROUP CALL ANNOUNCEMENT 1 0 0
0 0 0 1 1 GROUP CALL ACCEPT 1 0 0 0 0 1 0 0 GROUP CALL EMERGENCY END 1 0 0 0 0
1 0 1 GROUP CALL IMMINENT PERIL END 1 0 0 0 0 1 1 0 GROUP CALL BROADCAST 1 0 0
0 0 1 1 1 GROUP CALL BROADCAST END 1 0 0 0 1 0 0 0 PRIVATE CALL SETUP REQUEST
1 0 0 0 1 0 0 1 PRIVATE CALL RINGING 1 0 0 0 1 0 1 0 PRIVATE CALL ACCEPT 1 0 0
0 1 0 1 1 PRIVATE CALL REJECT 1 0 0 0 1 1 0 0 PRIVATE CALL RELEASE 1 0 0 0 1 1
0 1 PRIVATE CALL RELEASE ACK 1 0 0 0 1 1 1 0 PRIVATE CALL ACCEPT ACK 1 0 0 0 1
1 1 1 GROUP EMERGENCY ALERT 1 0 0 1 0 0 0 0 GROUP EMERGENCY ALERT ACK 1 0 0 1
0 0 0 1 GROUP EMERGENCY ALERT CANCEL 1 0 0 1 0 0 1 0 GROUP EMERGENCY ALERT
CANCEL ACK
All other values are reserved.
* * *
### 17.2.3 Call identifier
The purpose of the Call identifier information element is to uniquely identify
the call.
The Call identifier information element is coded as shown in Figure 17.2.3-1
and Table 17.2.3-1.
The Call identifier information element is a type 3 information element with a
length of 2 octets.
* * *
8 7 6 5 4 3 2 1  
Call identifier octet 1  
octet 2
* * *
Figure 17.2.3-1: Call identifier information element
Table 17.2.3-1: Call identifier information element
+----------------------------------------------------------------------+ | Call identifier value (octet 1 to 2) | | | | The Call identifier contains a number uniquely identifying the call. | +----------------------------------------------------------------------+
### 17.2.4 Refresh interval
The refresh interval information identifier is used to indicate the minimum
time period between successive periodic messages;
The Refresh interval information element is coded as shown in Figure 17.2.4-1
and Table 17.2.4-1.
The Refresh interval information element is a type 3 information element with
a length of 2 octets.
+------------------------+---------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +------------------------+---------+---+---+---+---+---+---+---+ | Refresh interval value | Octet 1 | | | | | | | | | | | | | | | | | | | | Octet 2 | | | | | | | | +------------------------+---------+---+---+---+---+---+---+---+
Figure 17.2.4-1: Refresh interval
Table 17.2.4-1: Refresh interval information element
+----------------------------------------------------------------------+ | Refresh interval value (octet 1 to 2) | | | | The Refresh interval contains a number denoting the minimum time | | interval (milliseconds) between two successive periodic | | announcements. | +----------------------------------------------------------------------+
### 17.2.5 MCVideo group ID
The MCVideo group ID information element is used to indicate the destination
MCVideo group identifier;
The MCVideo group ID information element is coded as shown in Figure 17.2.5-1
and Table 17.2.5-1.
The MCVideo group ID information element is a type 6 information element.
* * *
8 7 6 5 4 3 2 1  
Length of MCVideo group ID contents octet 1  
octet 2  
octet 3  
MCVideo group ID contents  
octet n
* * *
Figure 17.2.5-1: MCVideo group ID information element
Table 17.2.5-1: MCVideo group ID information element
* * *
MCVideo group ID is contained in octet 3 to octet n; Max value of 65535
octets.
* * *
### 17.2.6 SDP
The purpose of the SDP information element is to contain SDP message.
The _SDP_ information element is coded as shown in Figure 17.2.6-1 and Table
17.2.6-1.
The SDP information element is a type 6 information element.
* * *
8 7 6 5 4 3 2 1  
Length of SDP contents octet 1  
octet 2  
octet 3  
SDP contents  
octet n
* * *
Figure 17.2.6-1: SDP information element
Table 17.2.6-1: SDP information element
* * *
SDP message container contents (octet 3 to octet n); Max value of 65535
octets. This information element contains SDP message as defined in clause
10.2.1.1.2 or 11.2.1.1.2.
* * *
### 17.2.7 Commencement mode
The purpose of the Commencement mode information element is to identify the
type of the commencement mode of the private call.
The value part of the Commencement mode information element is coded as shown
in Table 17.2.7-1.
The Commence mode information element is a type 3 information element with a
length of 1 octet.
Table 17.2.7-1: Commencement mode
* * *
Bits  
8 7 6 5 4 3 2 1
0 0 0 0 0 0 0 0 AUTOMATIC COMMENCEMENT MODE 0 0 0 0 0 0 0 1 MANUAL
COMMENCEMENT MODE All other values are reserved.
* * *
### 17.2.8 Reason
The purpose of the Reason information element is to indicate the reason of the
reject.
The Reason information element is coded as shown in figure 17.2.8-1.
The Reason information element is a type 3 information element.
* * *
8 7 6 5 4 3 2 1  
Reason IEI octet 1
* * *
Figure 17.2.8-1: Reason information element
Table 17.2.8-1: Reason type
* * *
Bits  
8 7 6 5 4 3 2 1
0 0 0 0 0 0 0 0 REJECT 0 0 0 0 0 0 0 1 MEDIA FAILURE 0 0 0 0 0 0 1 0 BUSY 0 0
0 0 0 0 1 1 E2E SECURITY CONTEXT FAILURE 0 0 0 0 0 1 0 0 FAILED
All other values are reserved.
* * *
### 17.2.9 Confirm mode indication
The purpose of the Confirm mode indication information element is to indicate
that the terminating MCVideo client is expected to confirm call acceptance.
The Confirm mode indication information element is coded as shown in figure
17.2.9-1.
The Confirm mode indication information element is a type 2 information
element.
* * *
8 7 6 5 4 3 2 1  
Confirm mode indication IEI octet 1
* * *
Figure 17.2.9-1: Confirm mode indication information element
### 17.2.10 MCVideo user ID
The MCVideo user ID information element is used to indicate an MCVideo user
ID.
The MCVideo user ID information element is coded as shown in Figure 17.2.10-1
and Table 17.2.10-1.
The MCVideo user ID information element is a type 6 information element.
* * *
8 7 6 5 4 3 2 1  
Length of MCVideo user ID contents octet 1  
octet 2  
octet 3  
MCVideo user ID contents  
octet n
* * *
Figure 17.2.10-1: MCVideo user ID information element
Table 17.2.10-1: MCVideo user ID information element
* * *
MCVideo user ID is contained in octet 3 to octet n; Max value of 65535 octets.
* * *
### 17.2.11 Call type
The purpose of the Call type information element is to identify the type of
the call.
The value part of the Call type information element is coded as shown in Table
17.2.11-1.
The Call type information element is a type 3 information element with a
length of 1 octet.
Table 17.2.11-1: Call type
* * *
Bits  
8 7 6 5 4 3 2 1
0 0 0 0 0 0 0 1 BASIC GROUP CALL 0 0 0 0 0 0 1 0 BROADCAST GROUP CALL 0 0 0 0
0 0 1 1 EMERGENCY GROUP CALL 0 0 0 0 0 1 0 0 IMMINENT PERIL GROUP CALL 0 0 0 0
0 1 0 1 PRIVATE CALL
All other values are reserved.
* * *
### 17.2.12 User location
The User location information element is used to indicate the current location
of the MCVideo client;
The User location information element is coded as shown in Figure 17.2.12-1
and Table 17.2.12-1.
The User location information element is a type 6 information element.
* * *
8 7 6 5 4 3 2 1  
User location IEI octet 1  
Length of User location contents octet 2  
octet 3  
octet 4  
User location contents  
octet n
* * *
Figure 17.2.12-1: User location information element
Table 17.2.12-1: User location information element
* * *
User location is contained in octet 4 to octet n; Max value of 65535 octets.
* * *
The User location information element contains the LocationInfo structure
defined in clause 7.4 of 3GPP TS 29.199â€‘9 [9].
### 17.2.13 Organization name
The Organization name information element is used to indicate the name of the
organization to which the user belongs.
The Organization name information element is coded as shown in Figure
17.2.13-1 and Table 17.2.13-1.
The Organization name information element is a type 6 information element.
* * *
8 7 6 5 4 3 2 1  
Length of Organization name contents octet 1  
octet 2  
octet 3  
Organization name contents  
octet n
* * *
Figure 17.2.13-1: Organization name information element
Table 17.2.13-1: Organization name information element
* * *
Organization name is contained in octet 3 to octet n; Max value of 65535
octets.
* * *
### 17.2.14 Call start time
The Call start time information element is used to indicate the UTC time when
a call was started.
The Call start time information element is coded as shown in Figure 17.2.14-1
and Table 17.2.14-1.
The Call start time information element is a type 3 information element with a
length of 5 octets.
+-----------------------+---------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +-----------------------+---------+---+---+---+---+---+---+---+ | Call start time value | Octet 1 | | | | | | | | | | | | | | | | | | | | Octet 5 | | | | | | | | +-----------------------+---------+---+---+---+---+---+---+---+
Figure 17.2.14-1: Call start time value
Table 17.2.14-1: Call start time value
+----------------------------------------------------------------------+ | Call start time value (octet 1 to 5) | | | | The Call start time value is an unsigned integer containing UTC time | | of the time when a call was started, in seconds since midnight UTC | | of January 1, 1970 (not counting leap seconds). | +----------------------------------------------------------------------+
### 17.2.15 Last call type change time
The Last call type change time information identifier is used to indicate the
last UTC time when a call priority was changed.
The Last call type change time information element is coded as shown in Figure
17.2.15-1 and Table 17.2.15-1.
The Last call type change time information element is a type 3 information
element with a length of 5 octets.
+----------------------------------+---------+---+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +----------------------------------+---------+---+---+---+---+---+---+---+ | Last call type change time value | Octet 1 | | | | | | | | | | | | | | | | | | | | Octet 5 | | | | | | | | +----------------------------------+---------+---+---+---+---+---+---+---+
Figure 17.2.15-1: Last call type change time value
Table 17.2.15-1: Last call type change time value
+----------------------------------------------------------------------+ | Last call type change time (octet 1 to 5) | | | | The Last call type change time value is an unsigned integer | | containing UTC time of the time when a call priority was changed, in | | seconds since midnight UTC of January 1, 1970 (not counting leap | | seconds). | +----------------------------------------------------------------------+
### 17.2.16 Probe response
The purpose of the probe response information element is to indicate that the
GROUP CALL ANNOUNCEMENT message was sent in response of a GROUP CALL PROBE
message.
The probe response information element is coded as shown in figure 17.2.16-1.
The probe response is a type 2 information element.
* * *
8 7 6 5 4 3 2 1  
Probe Response IEI octet 1
* * *
Figure 17.2.16-1: Probe response information element
###### ## Annex A (informative): Signalling flows
NOTE: the current version of this specification does not include example
signalling flows.
###### ## Annex B (informative): Timers
# B.1 General
The following tables give a brief description of the timers used in the
present document.
For the on-network timers described in the present document, the following
timer families are used:
\- TNGx: Timer oN-network Group call x
For the off-network timers described in the present document, the following
timer families are used:
\- TFGx: Timer oFf-network Group call x
\- TFPy: Timer oFf-network Private call y
\- TFBz: Timer oFf-network Broadcast group call z
where x, y and z represent numbers.
# B.2 On-network timers
## B.2.1 Timers in the controlling MCVideo function
The table B.2.1-1 provides a description of the timers used by the controlling
MCVideo function, specifies the timer values, describes the reason for
starting of the timer, normal stop and the action on expiry.
Table B.2.1-1: controlling MCVideo function timers
+-------------+-------------+-------------+-------------+-------------+ | Timer | Timer value | Cause of | Normal stop | On expiry | | | | start | | | +-------------+-------------+-------------+-------------+-------------+ | TNG1 | Obtained | On | On receipt | Either | | (a | from the | reception | of all SIP | proceed | | cknowledged | group | of a SIP | 200 (OK) | with the | | call setup | document in | INVITE | responses | set-up of | | timer) | the | request to | to all SIP | the call or | | | \ | document | -required> | | | | element as | contains | group | | | | specified | \ | members as | | | | in |  | in | | | | 481 [24]. | group | 3GPP TS 24. | | | | | members as | 481 [24]. | | | | | specified | | | | | | in | | | | | | 3GPP TS 24. | | | | | | 481 [24]. | | | +-------------+-------------+-------------+-------------+-------------+ | TNG2 | Obtained | On | On | Cancels the | | | from the | reception | acceptance | in-progress | | ( | \ | INVITE | request to | state of | | emergency | element of | request or | cancel the | the group | | group call | the | SIP | in-progress | and return | | timer) | \ | request | state of a | and/or call | | (NOTE 2) | element of | that | group. | to normal | | | the | initiates | | priority | | | \ | emergency | | | | | element of | group call. | | | | | the service | | | | | | co | | | | | | nfiguration | | | | | | document as | | | | | | specified | | | | | | in | | | | | | 3GPP TS 24. | | | | | | 484 [25]. | | | | +-------------+-------------+-------------+-------------+-------------+ | TNG3 (group | Set to the | On | When the | Release the | | call | value of | reception | last | group call. | | timer). | the | of a SIP | MCVideo | | | | \ | start a | session. | | | | element | group | | | | | from the | session | When a | | | | group | after | temporary | | | | document. | retrieval | group call | | | | | of the | is split | | | | | group | into | | | | | document | independent | | | | | from the | active | | | | | group | calls. | | | | | management | | | | | | server. | For active | | | | | | group | | | | | For a | calls, when | | | | | temporary | merging | | | | | group call, | them into a | | | | | when | temporary | | | | | merging | group call. | | | | | active | | | | | | group calls | | | | | | into a | | | | | | temporary | | | | | | group call. | | | | | | | | | | | | When | | | | | | splitting a | | | | | | temporary | | | | | | group all | | | | | | into | | | | | | independent | | | | | | active | | | | | | calls | | | +-------------+-------------+-------------+-------------+-------------+ | NOTE 1: | | | | | | More than | | | | | | one | | | | | | instance of | | | | | | this timer | | | | | | can be | | | | | | running in | | | | | | the | | | | | | controlling | | | | | | MCVideo | | | | | | function, | | | | | | each | | | | | | instance | | | | | | associated | | | | | | with a | | | | | | specific | | | | | | group call. | | | | | | | | | | | | NOTE 2: | | | | | | More than | | | | | | one | | | | | | instance of | | | | | | this timer | | | | | | can be | | | | | | running in | | | | | | the | | | | | | controlling | | | | | | MCVideo | | | | | | function, | | | | | | each | | | | | | instance | | | | | | associated | | | | | | with a | | | | | | specific | | | | | | in-progress | | | | | | emergency | | | | | | state of a | | | | | | single | | | | | | group | | | | | +-------------+-------------+-------------+-------------+-------------+
# B.3 Off-network timers
## B.3.1 Timers in off-network group call
### B.3.1.1 Basic call control
The table B.3.1.1-1 lists the timers used in basic call control, their start
values, their limits, describes the cause of the start, and the action to take
on normal stop and on expiry.
Table B.3.1.1-1: Timers in basic call control
+-------------+-------------+-------------+-------------+-------------+ | Timer | Timer value | Cause of | Normal stop | On expiry | | | | start | | | +-------------+-------------+-------------+-------------+-------------+ | TFG1 (wait | Default | When the | Reception | Send a CALL | | for call | value: 150 | client | of a CALL | A | | an | millisecond | sends a | A | NNOUNCEMENT | | nouncement) | | CALL PROBE | NNOUNCEMENT | message. | | | Co | message. | message. | | | | nfigurable. | | | | | | | | | | | | Set to the | | | | | | value of | | | | | | \"/\/Of | | | | | | fNetwork/Ti | | | | | | mers/TFG1\" | | | | | | leaf node | | | | | | present in | | | | | | the UE | | | | | | initial | | | | | | co | | | | | | nfiguration | | | | | | as | | | | | | specified | | | | | | in | | | | | | 3GPP TS 24 | | | | | | .483 [4]. | | | | +-------------+-------------+-------------+-------------+-------------+ | TFG2 (call | Calculated. | C | Termination | Send a CALL | | an | Refer to | ommencement | of group | A | | nouncement) | clause 9 | of group | call. | NNOUNCEMENT | | | .3.2.4.1.1. | call.\ | | message. | | | | Restarted | When the | R | | | | every time | client | e-calculate | | | | a CALL | Receives a | timer value | | | | PROBE | CALL PROBE | and | | | | message is | message or | restart. | | | | received OR | CALL | | | | | CALL | A | | | | | A | NNOUNCEMENT | | | | | NNOUNCEMENT | message, | | | | | message is | R | | | | | sent or | e-calculate | | | | | received. | timer value | | | | | | and | | | | | | restart. | | +-------------+-------------+-------------+-------------+-------------+ | TFG3 (call | Default | When the | Reception | Send a CALL | | probe | value: 40 | client | of a CALL | PROBE | | retr | millisecond | sends a | A | message. | | ansmission) | | CALL PROBE | NNOUNCEMENT | | | | Depends on | message. | message. | | | | the | | | | | | cha | | Or TFG1 | | | | racteristic | | Expires. | | | | of the D2D | | | | | | (D2D | | Or User | | | | Sidelink | | releases | | | | period) | | the call. | | | | | | | | | | Co | | | | | | nfigurable. | | | | | | | | | | | | Set to the | | | | | | value of | | | | | | \"/\/Of | | | | | | fNetwork/Ti | | | | | | mers/TFG3\" | | | | | | leaf node | | | | | | present in | | | | | | the UE | | | | | | initial | | | | | | co | | | | | | nfiguration | | | | | | as | | | | | | specified | | | | | | in | | | | | | 3GPP TS 24 | | | | | | .483 [4]. | | | | +-------------+-------------+-------------+-------------+-------------+ | TFG4 | Default | Reception | Reception | Stop | | (waiting | value: 30 | of CALL | of User | incoming | | for the | seconds | A | action | call | | user) | | NNOUNCEMENT | (Accept or | no | | | Maximum | message | Reject). | tification. | | | value: 60 | when not | | | | | seconds | pa | | | | | | rticipating | | | | | Co | in the | | | | | nfigurable. | ongoing | | | | | | call. | | | | | Set to the | | | | | | value of | | | | | | \"/\/Of | | | | | | fNetwork/Ti | | | | | | mers/TFG4\" | | | | | | leaf node | | | | | | present in | | | | | | the UE | | | | | | initial | | | | | | co | | | | | | nfiguration | | | | | | as | | | | | | specified | | | | | | in | | | | | | 3GPP TS 24 | | | | | | .483 [4]. | | | | +-------------+-------------+-------------+-------------+-------------+ | TFG5 (not | Default | Expiration | - | Reset group | | present | value: 30 | of TFG4 | | call state | | incoming | seconds | | | machine. | | call | | Or User | | | | ann | Co | rejects the | | | | ouncements) | nfigurable. | call. | | | | | | | | | | | Set to the | Or User | | | | | value of | releases | | | | | \"/\/Of | the call. | | | | | fNetwork/Ti | | | | | | mers/TFG5\" | | | | | | leaf node | | | | | | present in | | | | | | the UE | | | | | | initial | | | | | | co | | | | | | nfiguration | | | | | | as | | | | | | specified | | | | | | in | | | | | | 3GPP TS 24 | | | | | | .483 [4]. | | | | +-------------+-------------+-------------+-------------+-------------+ | TFG6 (Max | Calculated. | C | Termination | Release the | | duration) | Refer to | ommencement | of group | group call | | | clause 9 | of group | call | | | | .3.2.4.1.2. | call | | | +-------------+-------------+-------------+-------------+-------------+
### B.3.1.2 Call type control
The table B.3.1.2-1 lists the timers used in call type control, their star
values, describes the cause of start, and the action to take on normal stop
and on expiry.
Table B.3.1.2-1: Call type control
+-------------+-------------+-------------+-------------+-------------+ | Timer | Timer value | Cause of | Normal stop | On expiry | | | | start | | | +-------------+-------------+-------------+-------------+-------------+ | TFG11 | Default | When the | - | Send a | | (emergency | value: 1 | client | | GROUP CALL | | end | second | sends a | | EMERGENCY | | retr | | GROUP CALL | | END message | | ansmission) | Co | EMERGENCY | | Increment | | | nfigurable. | END | | associated | | | | message. | | counter by | | | Set to the | | | 1. | | | value of | | | | | | \ | | | If counter | | | "/\/Off | | | has reached | | | Network/Tim | | | limit, stop | | | ers/TFG11\" | | | the timer. | | | leaf node | | | | | | present in | | | | | | the UE | | | | | | initial | | | | | | co | | | | | | nfiguration | | | | | | as | | | | | | specified | | | | | | in | | | | | | 3GPP TS 24 | | | | | | .483 [4]. | | | | +-------------+-------------+-------------+-------------+-------------+ | TFG12 | Default | When the | - | Send a | | (imminent | value: 1 | client | | GROUP CALL | | peril end | second | sends a | | IMMINENT | | retr | | GROUP CALL | | PERIL END | | ansmission) | Co | IMMINENT | | message | | | nfigurable. | PERIL END | | Increment | | | | message. | | associated | | | Set to the | | | counter by | | | value of | | | 1. | | | \ | | | | | | "/\/Off | | | If counter | | | Network/Tim | | | has reached | | | ers/TFG12\" | | | limit, stop | | | leaf node | | | the timer. | | | present in | | | | | | the UE | | | | | | initial | | | | | | co | | | | | | nfiguration | | | | | | as | | | | | | specified | | | | | | in | | | | | | 3GPP TS 24 | | | | | | .483 [4]. | | | | +-------------+-------------+-------------+-------------+-------------+ | TFG13 | Calculated. | Upgrade of | Downgrade | Downgrade | | (implicit | | the call to | of the | the call. | | downgrade | Refer to | emergency | call. | | | emergency) | clause | group call. | | | | | 9 | | | | | | .3.3.4.1.1. | | | | +-------------+-------------+-------------+-------------+-------------+ | TFG14 | Calculated. | Upgrade of | Downgrade | Downgrade | | (implicit | | the call to | of the | the call. | | downgrade | Refer to | imminent | call. | | | imminent | clause | peril call. | | | | peril) | 9 | | | | | | .3.3.4.1.2. | | | | +-------------+-------------+-------------+-------------+-------------+
## B.3.2 Timers in off-network private call
The table B.3.2-1 lists the timers used in off-network private call, their
start values, their limits, describes the cause of start, and the action to
take on normal stop and on expiry.
Table B.3.2-1: Timers in off-network private call
+-------------+-------------+-------------+-------------+-------------+ | Timer | Timer value | Cause of | Normal stop | On expiry | | | | start | | | +-------------+-------------+-------------+-------------+-------------+ | TFP1 | Default | When the | Reception | Resend | | (private | value: 40 | client | of a | PRIVATE | | call | millisecond | sends a | PRIVATE | CALL SETUP | | request | | PRIVATE | CALL ACCEPT | REQUEST | | retr | Depends on | CALL SETUP | or PRIVATE | message. | | ansmission) | the | REQUEST | CALL REJECT | Increment | | | cha | message. | message. | associated | | | racteristic | | | counter by | | | of the D2D | | | 1. | | | (D2D | | | | | | Sidelink | | | If counter | | | period) | | | has reached | | | | | | limit, | | | Co | | | assume the | | | nfigurable. | | | called | | | | | | client is | | | Set to the | | | not | | | value of | | | available. | | | \"/\/Of | | | Terminate | | | fNetwork/Ti | | | call setup. | | | mers/TFP1\" | | | | | | leaf node | | | | | | present in | | | | | | the UE | | | | | | initial | | | | | | co | | | | | | nfiguration | | | | | | as | | | | | | specified | | | | | | in | | | | | | 3GPP TS 24 | | | | | | .483 [4]. | | | | +-------------+-------------+-------------+-------------+-------------+ | TFP2 | Default | Reception | User | Start TFP7 | | (waiting | value: 30 | of a | responds to | timer. | | for call | seconds | PRIVATE | the | | | response | | CALL SETUP | incoming | Send a | | message) | Maximum | REQUEST | call | PRIVATE | | | value: 60 | message. | no | CALL REJECT | | | seconds | | tification. | message | | | | | | | | | Co | | | | | | nfigurable. | | | | | | | | | | | | Set to the | | | | | | value of | | | | | | \"/\/Of | | | | | | fNetwork/Ti | | | | | | mers/TFP2\" | | | | | | leaf node | | | | | | present in | | | | | | the UE | | | | | | initial | | | | | | co | | | | | | nfiguration | | | | | | as | | | | | | specified | | | | | | in | | | | | | 3GPP TS 24 | | | | | | .483 [4]. | | | | +-------------+-------------+-------------+-------------+-------------+ | TFP3 | Default | When the | Reception | Resend | | (private | value: 40 | client | of PRIVATE | PRIVATE | | call | millisecond | sends a | CALL | CALL | | release | | PRIVATE | RELEASE ACK | RELEASE | | retr | Depends on | CALL | message. | message. | | ansmission) | the | RELEASE | | Increment | | | cha | message. | | associated | | | racteristic | | | counter by | | | of the D2D | | | 1. | | | (D2D | | | | | | Sidelink | | | If counter | | | period) | | | has reached | | | | | | limit, | | | Co | | | assume the | | | nfigurable. | | | receiving | | | | | | client is | | | Set to the | | | not | | | value of | | | available | | | \"/\/Of | | | anymore. | | | fNetwork/Ti | | | Release the | | | mers/TFP3\" | | | call. | | | leaf node | | | | | | present in | | | | | | the UE | | | | | | initial | | | | | | co | | | | | | nfiguration | | | | | | as | | | | | | specified | | | | | | in | | | | | | 3GPP TS 24 | | | | | | .483 [4]. | | | | +-------------+-------------+-------------+-------------+-------------+ | TFP4 | Default | When the | Reception | Resend | | (private | value: 40 | client | of a | PRIVATE | | call accept | millisecond | sends a | PRIVATE | CALL ACCEPT | | retr | | PRIVATE | CALL ACCEPT | message. | | ansmission) | Depends on | CALL ACCEPT | ACK message | Increment | | | the | message. | or RTP | associated | | | cha | | media. | counter by | | | racteristic | | | 1. | | | of the D2D | | | | | | (D2D | | | If counter | | | Sidelink | | | has reached | | | period) | | | limit, | | | | | | assume the | | | Co | | | receiving | | | nfigurable. | | | client is | | | | | | not | | | Set to the | | | available | | | value of | | | anymore | | | \"/\/Of | | | | | | fNetwork/Ti | | | Notify call | | | mers/TFP4\" | | | setup | | | leaf node | | | failure. | | | present in | | | | | | the UE | | | | | | initial | | | | | | co | | | | | | nfiguration | | | | | | as | | | | | | specified | | | | | | in | | | | | | 3GPP TS 24 | | | | | | .483 [4]. | | | | +-------------+-------------+-------------+-------------+-------------+ | TFP5 (max | Co | Call | Call | Terminate | | duration) | nfigurable. | est | t | the call. | | | | ablishment. | ermination. | | | | Set to the | | | | | | value of | | | | | | \"/ | | | | | | _\ _/Off | | | | | | Network/Pri | | | | | | vateCall/Ma | | | | | | xDuration\" | | | | | | leaf node | | | | | | present in | | | | | | the service | | | | | | co | | | | | | nfiguration | | | | | | as | | | | | | specified | | | | | | in | | | | | | 3GPP TS 24 | | | | | | .483 [4]. | | | | +-------------+-------------+-------------+-------------+-------------+ | TFP7 | Default | Rejection | - | Reset the | | (waiting | value: 1 | of a call | | call | | for any | second | OR | | control | | message | | | | state | | with same | Co | Termination | | machine. | | call | nfigurable. | of a call | | | | identifier) | | OR | | | | | Set to the | | | | | | value of | Call | | | | | \"/\/Of | Failure. | | | | | fNetwork/Ti | | | | | | mers/TFP7\" | | | | | | leaf node | | | | | | present in | | | | | | the UE | | | | | | initial | | | | | | co | | | | | | nfiguration | | | | | | as | | | | | | specified | | | | | | in | | | | | | 3GPP TS 24 | | | | | | .483 [4]. | | | | +-------------+-------------+-------------+-------------+-------------+
## B.3.3 Timers in off-network broadcast call
The table B.3.3-1 lists the timers used in off-network broadcast call, their
start values, their limits, describes the cause of start, and the action to
take on normal stop and on expiry.
Table B.3.3-1: Timers in off-network broadcast call
+-------------+-------------+-------------+-------------+-------------+ | Timer | Timer value | Cause of | Normal stop | On expiry | | | | start | | | +-------------+-------------+-------------+-------------+-------------+ | TFB1 (max | Default | Start of | - | Terminate | | duration) | value: 300 | the | | the | | | seconds | broadcast | | broadcast | | | | call. | | call. | | | Maximum | | | | | | value: 600 | | | | | | seconds | | | | | | | | | | | | Co | | | | | | nfigurable. | | | | | | | | | | | | Set to the | | | | | | value of | | | | | | \"/\/Of | | | | | | fNetwork/Ti | | | | | | mers/TFB1\" | | | | | | leaf node | | | | | | present in | | | | | | the UE | | | | | | initial | | | | | | co | | | | | | nfiguration | | | | | | as | | | | | | specified | | | | | | in | | | | | | 3GPP TS 24 | | | | | | .483 [4]. | | | | +-------------+-------------+-------------+-------------+-------------+ | TFB2 | Default | Start of | Broadcast | Send GROUP | | (broadcast | value: 3 | the | call | CALL | | retr | seconds | broadcast | t | BROADCAST | | ansmission) | | call. | ermination. | message. | | | Maximum | | | | | | value: 10 | | | | | | seconds | | | | | | | | | | | | Co | | | | | | nfigurable. | | | | | | | | | | | | Set to the | | | | | | value of | | | | | | \"/\/Of | | | | | | fNetwork/Ti | | | | | | mers/TFB2\" | | | | | | leaf node | | | | | | present in | | | | | | the UE | | | | | | initial | | | | | | co | | | | | | nfiguration | | | | | | as | | | | | | specified | | | | | | in | | | | | | 3GPP TS 24 | | | | | | .483 [4]. | | | | +-------------+-------------+-------------+-------------+-------------+ | TFB3 | Default | Receipt of | Response | Terminate | | (waiting | value: 30 | GROUP CALL | from user. | incoming | | for the | seconds | BROADCAST | | call | | user) | | message | | no | | | Maximum | when user | | tification. | | | value: 60 | response is | | | | | seconds | required. | | | | | | | | | | | Co | | | | | | nfigurable. | | | | | | | | | | | | Set to the | | | | | | value of | | | | | | \"/\/Of | | | | | | fNetwork/Ti | | | | | | mers/TFB3\" | | | | | | leaf node | | | | | | present in | | | | | | the UE | | | | | | initial | | | | | | co | | | | | | nfiguration | | | | | | as | | | | | | specified | | | | | | in | | | | | | 3GPP TS 24 | | | | | | .483 [4]. | | | | +-------------+-------------+-------------+-------------+-------------+
## B.3.4 Timers in off-network emergency alert
The table B.3.4-1 lists the timers used in off-network emergency alert, their
start values, their limits, describes the cause of start, and the action to
take on normal stop and on expiry.
Table B.3.4-1: Timers in off-network emergency alert
+-------------+-------------+-------------+-------------+-------------+ | Timer | Timer value | Cause of | Normal stop | On expiry | | | | start | | | +-------------+-------------+-------------+-------------+-------------+ | TFE1 | Default | Receipt of | Receipt of | Assume end | | (Emergency | value: 30 | GROUP | GROUP | of | | Alert) | seconds | EMERGENCY | EMERGENCY | emergency | | | | ALERT. | ALERT | state, | | | Maximum | | CANCEL. | remove | | | value: 60 | | | associated | | | seconds | | | user from | | | | | | the list. | | | Co | | | | | | nfigurable. | | | | | | | | | | | | Set to the | | | | | | value of | | | | | | \"/\/Of | | | | | | fNetwork/Ti | | | | | | mers/TFE1\" | | | | | | leaf node | | | | | | present in | | | | | | the UE | | | | | | initial | | | | | | co | | | | | | nfiguration | | | | | | as | | | | | | specified | | | | | | in | | | | | | 3GPP TS 24 | | | | | | .483 [4]. | | | | +-------------+-------------+-------------+-------------+-------------+ | TFE2 | Default | T | T | Transmit | | (emergency | value: 5 | ransmission | ransmission | GROUP | | alert | seconds | of GROUP | of GROUP | EMERGENCY | | retr | | EMERGENCY | EMERGENCY | ALERT. | | ansmission) | Maximum | ALERT. | ALERT | | | | value: 10 | | CANCEL. | | | | seconds | | | | | | | | | | | | Co | | | | | | nfigurable. | | | | | | | | | | | | Set to the | | | | | | value of | | | | | | \"/\/Of | | | | | | fNetwork/Ti | | | | | | mers/TFE2\" | | | | | | leaf node | | | | | | present in | | | | | | the UE | | | | | | initial | | | | | | co | | | | | | nfiguration | | | | | | as | | | | | | specified | | | | | | in | | | | | | 3GPP TS 24 | | | | | | .483 [4]. | | | | +-------------+-------------+-------------+-------------+-------------+
###### ## Annex C (normative): Counters
# C.1 General
The following tables give a brief description of the counters used in the
present document.
# C.2 Off-network counters
## C.2.1 Counters in off-network group call
The table C.2.1-1 lists the counters used in off-network group call, their
default upper limits and the action to take upon reaching the upper limit. The
counters start at 1.
Table C.2.1-1: Counters in off-network group call
+----------------+----------------+----------------+----------------+ | Counter | Upper Limit | Associated | Upon reaching | | | | timer | the upper | | | | | limit | +----------------+----------------+----------------+----------------+ | CFG11 | Default value: | TFG11 | Stop timer | | | 5 | | TFG11. | | (emergency end | | | | | r | Configurable. | | | | etransmission) | | | | | | Set to the | | | | | value of | | | | | \"/\ | | | | | /OffNetwork/Co | | | | | unters/CFG11\" | | | | | leaf node | | | | | present in the | | | | | UE initial | | | | | configuration | | | | | as specified | | | | | in | | | | | 3GPP TS | | | | | 24.483 [4]. | | | +----------------+----------------+----------------+----------------+ | CFG12 | Default value: | TFG12 | Stop timer | | (imminent | 5 | | TFG12. | | peril end | | | | | r | Configurable. | | | | etransmission) | | | | | | Set to the | | | | | value of | | | | | \"/\ | | | | | /OffNetwork/Co | | | | | unters/CFG12\" | | | | | leaf node | | | | | present in the | | | | | UE initial | | | | | configuration | | | | | as specified | | | | | in | | | | | 3GPP TS | | | | | 24.483 [4]. | | | +----------------+----------------+----------------+----------------+
## C.2.2 Counters in off-network private call
The table C.2.2-1 lists the counters used in off-network private call, their
default upper limits and the action to take upon reaching the upper limit. The
counters start at 1.
Table C.2.2-1: Counters in off-network private call
+----------------+----------------+----------------+----------------+ | Counter | Upper Limit | Associated | Upon reaching | | | | timer | the upper | | | | | limit | +----------------+----------------+----------------+----------------+ | CFP1 | Default value: | TFP1 | Assume the | | | 3 | | called client | | (private call | | | is not | | request | Configurable. | | available. | | r | | | Terminate call | | etransmission) | Set to the | | setup. | | | value of | | | | | \"/\/OffNetwork/C | | | | | ounters/CFP1\" | | | | | leaf node | | | | | present in the | | | | | UE initial | | | | | configuration | | | | | as specified | | | | | in | | | | | 3GPP TS | | | | | 24.483 [4]. | | | +----------------+----------------+----------------+----------------+ | CFP3 (private | Default value: | TFP3 | Assume the | | call release | 3 | | receiving | | r | | | client is not | | etransmission) | Configurable. | | available | | | | | anymore. | | | Set to the | | Release the | | | value of | | call. | | | \"/\/OffNetwork/C | | | | | ounters/CFP3\" | | | | | leaf node | | | | | present in the | | | | | UE initial | | | | | configuration | | | | | as specified | | | | | in | | | | | 3GPP TS | | | | | 24.483 [4]. | | | +----------------+----------------+----------------+----------------+ | CFP4 (private | Default value: | TFP4 | Notify call | | call accept | 3 | | setup failure. | | r | | | | | etransmission) | Configurable. | | | | | | | | | | Set to the | | | | | value of | | | | | \"/\/OffNetwork/C | | | | | ounters/CFP4\" | | | | | leaf node | | | | | present in the | | | | | UE initial | | | | | configuration | | | | | as specified | | | | | in | | | | | 3GPP TS | | | | | 24.483 [4]. | | | +----------------+----------------+----------------+----------------+
###### ## Annex D (normative): Media feature tags and feature-capability
indicators used within the current document
# D.1 General
This clause describes the media feature tag definitions that are applicable
for the 3GPP IM CN Subsystem for the realisation of the Mission Critical Video
(MCVideo) service.
# D.2 Definition of media feature tag g.3gpp.mcvideo
Media feature tag name: g.3gpp.mcvideo
ASN.1 Identifier: 1.3.6.1.8.2.31
Summary of the media feature indicated by this media feature tag: This media
feature tag when used in a SIP request or a SIP response indicates that the
function sending the SIP message supports Mission Critical Video (MCVideo)
communication.
Values appropriate for use with this media feature tag: Boolean
The media feature tag is intended primarily for use in the following
applications, protocols, services, or negotiation mechanisms: This media
feature tag is most useful in a communications application, for describing the
capabilities of a device, such as a phone or PDA.
Examples of typical use: Indicating that a mobile phone supports the Mission
Critical Video (MCVideo) communication.
Related standards or documents: 3GPP TS 24.281: \"Mission Critical Video
(MCVideo) signalling control; Protocol specification\"
Security Considerations: Security considerations for this media feature tag
are discussed in clause 11.1 of IETF RFC 3840 [22].
###### ## Annex E (normative): ICSI values defined within the current document
# E.1 General
This clause describes the IMS communications service identifier definitions
that are applicable for the 3GPP IM CN subsystem for the realisation of the
Mission Critical Video (MCVideo) service.
NOTE: The template has been created using the headers of the table in
http://www.3gpp.org/specifications-groups/34-uniform-resource-name-urn-list
# E.2 Definition of ICSI value for MCVideo service
## E.2.1 URN
urn:urn-7:3gpp-service.ims.icsi.mcvideo
## E.2.2 Description
This URN indicates that the device has the capabilities to support the mission
critical video (MCVideo) service.
## E.2.3 Reference
3GPP TS 24.281: \"Mission Critical Video (MCVideo) call control Protocol
specification\"
## E.2.3 Contact
Name: \
Email: \
## E.2.4 Registration of subtype
Yes
## E.2.5 Remarks
None
###### ## Annex F (normative): XML schemas
# F.1 XML schema for MCVideo Information
## F.1.1 General
This clause defines XML schema and MIME type for MCVideo information.
## F.1.2 XML schema
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
## F.1.3 Semantic
The \ element is the root element of the XML document. The
\ element can contain subelements.
NOTE 1: The subelements of the \ are validated by the \ particle of the \ element
If the \ contains the \ element then:
1) the \, \, \, \, \,
\, \, \, \ and
\ can be included with encrypted content;
2) for each element in 1) that is included with content that is not encrypted:
a) the element has the \"type\" attribute set to \"Normal\";
b) if the element is the \, \,
\ or \ or \
then the \ element is included;
c) if the element is the \ or \, then
the \ element is included; and
d) if the element is \, \ or \
elements then the \ element is included;
3) for each element in 1) that is included with content that is encrypted:
a) the element has the \"type\" attribute set to \"Encrypted\";
b) the \ element from the
\"http://www.w3.org/2001/04/xmlenc#\" namespace is included and:
i) can have a \"Type\" attribute can be included with a value of
\"http://www.w3.org/2001/04/xmlenc#Content\";
ii) can include an \ element with the \"Algorithm\"
attribute set to value of \"http://www.w3.org/2009/xmlenc11#aes128-gcm\";
iii) can include a \ element with a \ element containing the
base 64 encoded XPK-ID; and
iv) includes a \ element with a \ element containing
the encrypted data.
NOTE 2: When the optional attributes and elements are not included within the
\ element, the information they contain is known to sender
and the receiver by other means.
If the \ contains the \ element then:
1) the \ can be included with the access token received
during authentication procedure as described in 3GPP TS 24.482 [52];
2) the \ can be included with:
a) a value of \"chat\" to indicate that the MCVideo client wants to join a
chat group call
b) a value of \"prearranged\" to indicate the MCVideo client wants to make a
prearranged group call; or
c) a value of \"private\" to indicate the MCVideo client wants to make a
private call;
3) the \ can be included with:
a) a value set to an MCVideo group ID or temporary MCVideo group ID when the
\ is set to a value of \"prearranged\" or \"chat\"; and
b) a value set to the MCVideo ID of the called MCVideo user when the
\ is set to a value of \"private\";
4) the \ can be included, set to MCVideo ID of the
originating user;
5) the \ can be included, set to the MCVideo ID of
the terminating user;
6) the \ can be included to indicate the MCVideo
group identity to the terminating user;
7) the \ can be included in a SIP 183 (Session Progress) from a non-
controlling MCVideo function of an MCVideo group to inform the controlling
MCVideo function that the group on the non-controlling MCVideo function has
group members in the group document which are marked as \, as specified in 3GPP TS 24.481 [24];
8) the \ can be:
a) set to \"true\" to indicate that the call that the MCVideo client is
initiating is an emergency MCVideo call; or
b) set to \"false\" to indicate that the MCVideo client is cancelling an
emergency MCVideo call (i.e. converting it back to a non-emergency call)
9) the \ can be:
a) set to \"true\" in an emergency call initiation to indicate that an alert
to be sent; or
b) set to \"false\" when cancelling an emergency call which requires an alert
to be cancelled also
10) if the \ is set to \"chat\" or \"prearranged\":
a) the \ can be set to \"true\" to indicate that the call
that the MCVideo client is initiating is an imminent peril group MCVideo call;
11) the \ can be:
a) set to \"true\" indicates that the MCVideo client is initiating a broadcast
group call; or
b) set to \"false\" indicates that the MCVideo client is initiating a non-
broadcast group call;
12) the \ can be:
a) set to the MCVideo user\'s Mission Critical Organization in an emergency
alert sent by the MCVideo server to terminating MCVideo clients;
13) the \ can be:
a) set to \"transmit-idle\", if the transmission is idle in a non-controlling
MCVideo function; or
b) set to \"transmit-taken\" if the transmission state in a non-controlling
MCVideo function is taken;
14) the \:
a) if the \ element contains a group identity then this
element can include an MCVideo group ID associated with the group identity in
the \ element. E.g. if the \ element
contains a temporary group identity (TGI), then the \
element can contain the constituent MCVideo group ID;
15) the \:
a) can be included, set to the MCVideo ID of the originating user of an
MCVideo emergency alert when being cancelled by another authorised MCVideo
user;
16) the \:
a) contains a group key transport payload carrying one or more MKFC(s) and
MKFC-ID(s) as described in3GPP TS 24.481 [24] clause 7.4, to be used for
protection of multicast transmission control signalling when the UE operates
on the network;
17) the \:
a) can be included, set to the MCVideo client ID of the MCVideo client that
originated a SIP INVITE request, SIP REFER request or SIP MESSAGE request.
18) the \
a) can be set to true and included in a SIP MESSAGE to indicate that the
emergency alert or cancellation was received successfully; and
19) the \ can be included with the following elements not declared in
the XML schema:
a) a \ of type \"xs:string\":
i) set to a value of \"authentication of the MIKEY-SAKE I_MESSAGE failed\" by
a MCVideo client when the signature of the cannot be verified;
b) a \ of type \"xs:string\":
i) set to a value of \"group-selection-change-request\" when a client
initiates a group selection change request;
c) a \ of type \"xs:string\":
i) set to a value of \"group-selection-change-response\" when a client
responds to a group selection change request;
d) a \ of type \"xs:string\":
i) set to a value of \"success\" when a client reports that it has
successfully changed its selected group as requested by a received group
selection change request; or
ii) set to a value of \"fail\" when a client reports that it has failed to
change its selected group as requested by a received group selection change
request; and
e) an\ of type \"xs:Boolean\":
i) set to a value of \"true\" when received by a client in a group-selection-
change-request indicates that the client needs to affiliate to the specified
group.
Absence of the \, \ and \ in a
SIP INVITE request indicates that the MCVideo client is initiating a non-
emergency private call or non-emergency group call.
Absence of the \ in a SIP INVITE request indicates that the
MCVideo client is initiating a non-broadcast group call.
The recipient of the XML ignores any unknown element and any unknown
attribute.
## F.1.4 IANA registration template
Your Name:
\
Your Email Address:
\
Media Type Name:
Application
Subtype name:
vnd.3gpp.mcvideo-info+xml
Required parameters:
None
Optional parameters:
\"charset\" the parameter has identical semantics to the charset parameter of
the \"application/xml\" media type as specified in clause 9.1 of IETF RFC
7303.
Encoding considerations:
binary.
Security considerations:
Same as general security considerations for application/xml media type as
specified in clause 9.1 of IETF RFC 7303. In addition, this media type
provides a format for exchanging information in SIP, so the security
considerations from IETF RFC 3261 apply.
The information transported in this media type does not include active or
executable content.
Mechanisms for privacy and integrity protection of protocol parameters exist.
Those mechanisms as well as authentication and further security mechanisms are
described in 3GPP TS 24.229.
This media type does not include provisions for directives that institute
actions on a recipient\'s files or other resources.
This media type does not include provisions for directives that institute
actions that, while not directly harmful to the recipient, may result in
disclosure of information that either facilitates a subsequent attack or else
violates a recipient\'s privacy in any way.
This media type does not employ compression.
Interoperability considerations:
Same as general interoperability considerations for application/xml media type
as specified in clause 9.1 of IETF RFC 7303. Any unknown XML elements and any
unknown XML attributes are to be ignored by recipient of the MIME body.
Published specification:
3GPP TS 24.281 \"Mission Critical Video (MCVideo) signalling control\" version
14.0.0, available via http://www.3gpp.org/specs/numbering.htm.
Applications which use this media type:
Applications supporting the service continuity as described in the published
specification.
Fragment identifier considerations:
The handling in clause 5 of IETF RFC 7303 applies.
Restrictions on usage:
None
Provisional registration? (standards tree only):
N/A
Additional information:
1\. Deprecated alias names for this type: none
2\. Magic number(s): none
3\. File extension(s): none
4\. Macintosh File Type Code(s): none
5\. Object Identifier(s) or OID(s): none
Intended usage:
Common
Person to contact for further information:
\- Name: \
\- Email: \
\- Author/Change controller:
i) Author: 3GPP CT1 Working Group/3GPP_TSG_CT_WG1\@LIST.ETSI.ORG
ii) Change controller: \/\
# F.2 XML schema for MBMS usage information
# F.3 XML schema for MCVideo location information
## F.3.1 General
This clause defines the XML schema and the MIME type for location information.
## F.3.2 XML schema
\
\
\
\
\
\Root element, contains all information related to location
configuration, location request and location reporting for the MCVideo
service\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
## F.3.3 Semantic
The \ element is the root element of the XML document. The
\ element contains the \, \ and
\ subelements, of which only one can be present.
\ element has a \ attribute that can assume the
values \"Full\" and \"Update\". The value \"Full\" means that the
Configuration> element contains the full location configuration which replaces
any previous location configuration. The value \"Update\" means that the
location configuration is in addition to any previous location configuration.
To remove configuration elements a \"Full\" configuration is needed. The
\ element contains the following child elements:
1) \, an optional element that specifies the
location information requested in non-emergency situations. The
\ has the subelements:
a) \, an optional element specifying that the serving E-UTRAN
Cell Global Identity (ECGI) needs to be reported;
b) \, an optional element that can occur multiple times,
specifying that neighbouring ECGIs need to be reported;
c) \, an optional element specifying that the serving MBMS Service
Area Id needs to be reported;
d) \, an optional element specifying that the MBSFN area Id needs
to be reported;
e) \, an optional element specifying that the
geographical coordinate specified in clause 6.1 in 3GPP TS 23.032 [39] needs
to be reported; and
f) \, a mandatory element specifying the minimum time
the MCVideo client needs to wait between sending location reports. The value
is given in seconds;
2) \, an optional element that specifies the
location information requested in emergency situations. The
\ has the subelements:
a) \, an optional element specifying that the serving ECGI needs
to be reported;
b) \, an optional element that can occur multiple times,
specifying that neighbouring ECGIs need to be reported;
c) \, an optional element specifying that the serving MBMS Service
Area Id needs to be reported;
d) \, an optional element specifying that the MBSFN area Id needs
to be reported;
e) \, an optional element specifying that the
geographical coordinate specified in clause 6.1 in 3GPP TS 23.032 [39] needs
to be reported; and
f) \, a mandatory element specifying the minimum time
the MCVideo client needs to wait between sending location reports. The value
is given in seconds; and
3) \, a mandatory element specifying the triggers for the
MCVideo client to perform reporting. The \ element
contains the following sub-elements:
a) \, an optional element specifying what cell changes trigger
location reporting. Consists of the following sub-elements:
I) \, an optional element. The presence of this element
specifies that any cell change is a trigger. Contains a mandatory \
attribute that shall be set to a unique string;
II) \, an optional element specifying an ECGI which when
entered triggers a location report. Contains a mandatory \
attribute that shall be set to a unique string; and
III) \, an optional element specifying an ECGI which when
exited triggers a location report. Contains a mandatory \ attribute
that shall be set to a unique string;
b) \, an optional element specifying what tracking area
changes trigger location reporting. Consists of the following sub-elements:
I) \, an optional element. The presence of this element
specifies that any tracking area change is a trigger. Contains a mandatory
\ attribute that shall be set to a unique string;
II) \, an optional element specifying a Tracking
Area Id which when entered triggers a location report. Contains a mandatory
\ attribute that shall be set to a unique string; and
III) \, an optional element specifying a Tracking
Area Id which when exited triggers a location report. Contains a mandatory
\ attribute that shall be set to a unique string;
c) \, an optional element specifying what PLMN changes trigger
location reporting. Consists of the following sub-elements:
I) \, an optional element. The presence of this element
specifies that any PLMN change is a trigger. Contains a mandatory \
attribute that shall be set to a unique string;
II) \, an optional element specifying a PLMN Id which when
entered triggers a location report. Contains a mandatory \
attribute that shall be set to a unique string; and
III) \, an optional element specifying a PLMN Id which when
exited triggers a location report. Contains a mandatory \ attribute
that shall be set to a unique string;
d) \, an optional element specifying what MBMS changes trigger
location reporting. Consists of the following sub-elements:
I) \, an optional element. The presence of this element
specifies that any MBMS SA change is a trigger. Contains a mandatory
\ attribute that shall be set to a unique string;
II) \, an optional element specifying an MBMS Service
Area Id which when entered triggers a location report. Contains a mandatory
\ attribute that shall be set to a unique string; and
III) \, an optional element specifying an MBMS Service
Area Id which when exited triggers a location report. Contains a mandatory
\ attribute that shall be set to a unique string;
e) \, an optional element specifying what MBSFN changes
trigger location reporting. Consists of the following sub-elements:
I) \, an optional element. The presence of this element
specifies that any MBSFN area change is a trigger. Contains a mandatory
\ attribute that shall be set to a unique string;
II) \, an optional element specifying an MBSFN area
which when entered triggers a location report. Contains a mandatory
\ attribute that shall be set to a unique string; and
III) \, an optional element specifying an MBSFN area
which when exited triggers a location report. Contains a mandatory
\ attribute that shall be set to a unique string;
f) \, an optional element specifying that periodic location
reports shall be sent. The value in seconds specifies the reporting interval.
Contains a mandatory \ attribute that shall be set to a unique
string;
g) \, an optional element specifying that the travelled
distance shall trigger a report. The value in metres specified the travelled
distance. Contains a mandatory \ attribute that shall be set to a
unique string;
h) \, an optional element specifying what signalling
events triggers a location report. The \ element has
the following sub-elements:
I) \, an optional element specifying that an initial log on
triggers a location report. Contains a mandatory \ attribute that
shall be set to a unique string;
II) \, an optional element specifying that a non-
emergency group call triggers a location report. Contains a mandatory
\ attribute that shall be set to a unique string;
III) \, an optional element specifying that a non-
emergency private call triggers a location report. Contains a mandatory
\ attribute that shall be set to a unique string; and
IV) \, an optional element specifying that a
received location configuration triggers a location report. Contains a
mandatory \ attribute that shall be set to a unique string; and
i) \, an optional element specifying what geographical
are changes trigger location reporting. Consists of the following sub-
elements:
I) \, an optional element. The presence of this element
specifies that any geographical area change is a trigger. Contains a mandatory
\ attribute that shall be set to a unique string;
II) \, an optional element specifying a geographical area
which when entered triggers a location report. Contains a mandatory
\ attribute that shall be set to a unique string. The
\ element has the following sub-elements:
A) \, an optional element containing a \
attribute and the following two subelements:
x1) \, an optional element specifying the area as a polygon
specified in clause 5.2 in 3GPP TS 23.032 [39]; and
x2) \, an optional element specifying the area as an
Ellipsoid Arc specified in clause 5.7 in 3GPP TS 23.032 [39]; and
III) \, an optional element specifying a geographical
area which when exited triggers a location report. Contains a mandatory
\ attribute that shall be set to a unique string.
\ is an element with a \ attribute. The \ element
is used to request a location report. The value of the \ attribute
is returned in the corresponding \ attribute in order to correlate
the request and the report.
\ is an element used to include the location report. It contains a
\ attribute and a \ attribute. The \ attribute
is used to return the value in the \ attribute in the \
element. The \ attribute has two values \"Emergency\" and
\"NonEmergency\" used to inform whether the client is sending the report in an
emergency situation or not. The \ element contains the following sub-
elements:
1) \, an optional element which can occur multiple times that
contain the value of the \ attribute associated with a trigger that
has fired; and
2) \, a mandatory element that contains the location
information. The \ element contains the following sub-
elements:
a) \, an optional element containing the ECGI of the
serving cell;
b) \, an optional element that can occur multiple times. It
contains the ECGI of any neighbouring cell the MCVideo client can detect;
c) \, an optional element containing the MBMS Service Area Id the
MCVideo client is using;
d) \, an optional element containing the MBSFN area the MCVideo is
located in; and
e) \, an optional element containing the longitude and
latitude coded as in clause 6.1 in 3GPP TS 23.032 [39].
The contents of the subelements in the \ subelement of the
\ element can be encrypted. The following rules are applied when any
of these elements are included:
1) if confidentiality protection is not required, then:
a) the \"type\" attributes associated with the \,
\, \, and \ elements of the \
element have the value \"Normal\" and
ii) the \ subelement of the \ element contains the
unencrypted value of the ECGI of the serving cell;
iii) the \ subelement of the \ element contains the
unencrypted value of the ECGI of any neighbouring cell;
iv) the \ subelement of the \ element contains the unencrypted
value of the MBMS Service Area Id the MCVideo client is using; and
v) the \ subelement of the \, element contains the
unencrypted value of the MBSFN area the MCVideo is located in;
b) the \"type\" attributes associated with the \ and \
subelements of the \ element have the value \"Normal\" and
the \ subelements of \ and \ subelements
contain the unencrypted value of longitude and latitude.
2) if confidentiality protection is required, then:
a) the \"type\" attributes associated with the \,
\, \, and \ elements have the value
\"Encrypted\";
b) the \"type\" attributes associated with the \ and \
subelements of the \ element have the value \"Encrypted\";
c) for each of the elements described in 2a) and subelements described in 2b)
above, the \ element from the
\"http://www.w3.org/2001/04/xmlenc#\" namespace is included and:
i) can have a \"Type\" attribute can be included with a value of
\"http://www.w3.org/2001/04/xmlenc#Content\";
ii) can include an \ element with the \"Algorithm\"
attribute set to value of \"http://www.w3.org/2009/xmlenc11#aes128-gcm\";
iii) can include a \ element with a \ element containing the
base 64 encoded XPK-ID; and
iv) includes a \ element with a \ element containing
the encrypted data.
NOTE: When the optional attributes and elements are not included within the
\ element, the information they contain is known to sender
and the receiver by other means.
The recipient of the XML ignores any unknown element and any unknown
attribute.
## F.3.4 IANA registration template
Your Name:
\
Your Email Address:
\
Media Type Name:
Application
Subtype name:
vnd.3gpp. mcvideo-location-info+xml
Required parameters:
None
Optional parameters:
\"charset\" the parameter has identical semantics to the charset parameter of
the \"application/xml\" media type as specified in clause 9.1 of IETF RFC
7303.
Encoding considerations:
binary.
Security considerations:
Same as general security considerations for application/xml media type as
specified in clause 9.1 of IETF RFC 7303. In addition, this media type
provides a format for exchanging information in SIP, so the security
considerations from IETF RFC 3261 apply.
The information transported in this media type does not include active or
executable content.
Mechanisms for privacy and integrity protection of protocol parameters exist.
Those mechanisms as well as authentication and further security mechanisms are
described in 3GPP TS 24.229.
This media type does not include provisions for directives that institute
actions on a recipient\'s files or other resources.
This media type does not include provisions for directives that institute
actions that, while not directly harmful to the recipient, may result in
disclosure of information that either facilitates a subsequent attack or else
violates a recipient\'s privacy in any way.
This media type does not employ compression.
Interoperability considerations:
Same as general interoperability considerations for application/xml media type
as specified in clause 9.1 of IETF RFC 7303. Any unknown XML elements and any
unknown XML attributes are to be ignored by recipient of the MIME body.
Published specification:
3GPP TS 24.281 \"Mission Critical Video (MCVideo) signalling control; Protocol
specification\" version 14.0.0, available via
http://www.3gpp.org/specs/numbering.htm.
Applications which use this media type:
Applications supporting the mission critical video as described in the
published specification.
Fragment identifier considerations:
The handling in clause 5 of IETF RFC 7303 applies.
Restrictions on usage:
None
Provisional registration? (standards tree only):
N/A
Additional information:
1\. Deprecated alias names for this type: none
2\. Magic number(s): none
3\. File extension(s): none
4\. Macintosh File Type Code(s): none
5\. Object Identifier(s) or OID(s): none
Intended usage:
Common
Person to contact for further information:
\- Name: \
\- Email: \
\- Author/Change controller:
i) Author: 3GPP CT1 Working Group/3GPP_TSG_CT_WG1\@LIST.ETSI.ORG
ii) Change controller: \/\
# F.4 XML schema for MCVideo (de)-affiliation requests
## F.4.1 General
This clause defines XML schema and MIME type for MCVideo (de)-affiliation
requests.
## F.4.2 XML schema
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
## F.4.3 Semantic
The \ element is the root element of the XML document. The
\ element may contain \, or \ subelements or both.
If the \ contains the \ element then:
1) the \ element contains a list of \ subelements
having at least one subelement. The recipient shall perform an affiliation for
all the MCVideo groups contained in the list for the clients for which the
\ applies.
If the \ contains the \ element then:
1) the \ element contains a list of \ subelements
having at least one subelement. The recipient shall perform a de-affiliation
for all the MCVideo groups contained in the list for the clients for which the
\ applies.
The recipient of the XML ignores any unknown element and any unknown
attribute.
## F.4.4 IANA registration template
Your Name:
\
Your Email Address:
\
Media Type Name:
Application
Subtype name:
vnd.3gpp.mcvideo-affiliation-command+xml
Required parameters:
None
Optional parameters:
\"charset\" the parameter has identical semantics to the charset parameter of
the \"application/xml\" media type as specified in clause 9.1 of IETF RFC
7303.
Encoding considerations:
binary.
Security considerations:
Same as general security considerations for application/xml media type as
specified in clause 9.1 of IETF RFC 7303. In addition, this media type
provides a format for exchanging information in SIP, so the security
considerations from IETF RFC 3261 apply.
The information transported in this media type does not include active or
executable content.
Mechanisms for privacy and integrity protection of protocol parameters exist.
Those mechanisms as well as authentication and further security mechanisms are
described in 3GPP TS 24.229.
This media type does not include provisions for directives that institute
actions on a recipient\'s files or other resources.
This media type does not include provisions for directives that institute
actions that, while not directly harmful to the recipient, may result in
disclosure of information that either facilitates a subsequent attack or else
violates a recipient\'s privacy in any way.
This media type does not employ compression.
Interoperability considerations:
Same as general interoperability considerations for application/xml media type
as specified in clause 9.1 of IETF RFC 7303. Any unknown XML elements and any
unknown XML attributes are to be ignored by recipient of the MIME body.
Published specification:
3GPP TS 24.281 \"Mission Critical Video (MCVideo) signalling control; Protocol
specification\" version 15.0.0, available via
http://www.3gpp.org/specs/numbering.htm.
Applications which use this media type:
Applications supporting the mission critical video as described in the
published specification.
Fragment identifier considerations:
The handling in clause 5 of IETF RFC 7303 applies.
Restrictions on usage:
None
Provisional registration? (standards tree only):
N/A
Additional information:
1\. Deprecated alias names for this type: none
2\. Magic number(s): none
3\. File extension(s): none
4\. Macintosh File Type Code(s): none
5\. Object Identifier(s) or OID(s): none
Intended usage:
Common
Person to contact for further information:
\- Name: \
\- Email: \
\- Author/Change controller:
i) Author: 3GPP CT1 Working Group/3GPP_TSG_CT_WG1\@LIST.ETSI.ORG
ii) Change controller: \/\
# F.5 XML schema for the transmission request
## F.5.1 General
This clause defines XML schema and MIME type for
application/vnd.3gpp.transmission-request+xml.
## F.5.2 XML schema
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
## F.5.3 Semantic
This clause describes the elements of the transmission request XML Schema.
\: Contains the SSRC of the transmission participant. The content of the
SSRC field shall be coded as specified in IETF RFC 3550 [10].
\: Contains the level of priority of the transmission
request. The \ element is coded as specified in 3GPP TS
24.380 [5].
\: Contains the MCVideo ID of the MCVideo user requesting the
permission to send media.
\: Contains the \ element, the \ element and the \.
\: Contains additional information. The
\ element is coded as specified in 3GPP TS 24.581 [5].
\: Contains the participant type assigned to the MCVideo
user identified by the \ element. The \ element is
coded as specified in3GPP TS 24.581 [5].
NOTE: The reference to the transmission participant is a value only
understandable by the transmission control server interface in the non-
Controlling function of an MCVideo group.
\: Contains the queueing capability of the MCVideo
client. The \ element is coded as specified in 3GPP TS
24.581 [5].
The recipient of the XML ignores any unknown element and any unknown
attribute.
## F.5.4 IANA registration template
Your Name:
\
Your Email Address:
\
Media Type Name:
Application
Subtype name:
vnd.3gpp.mcvideo-transmission-request+xml
Required parameters:
None
Optional parameters:
\"charset\" the parameter has identical semantics to the charset parameter of
the \"application/xml\" media type as specified in clause 9.1 of IETF RFC
7303.
Encoding considerations:
binary.
Security considerations:
Same as general security considerations for application/xml media type as
specified in clause 9.1 of IETF RFC 7303. In addition, this media type
provides a format for exchanging information in SIP, so the security
considerations from IETF RFC 3261 apply.
The information transported in this media type does not include active or
executable content.
Mechanisms for privacy and integrity protection of protocol parameters exist.
Those mechanisms as well as authentication and further security mechanisms are
described in 3GPP TS 24.229.
This media type does not include provisions for directives that institute
actions on a recipient\'s files or other resources.
This media type does not include provisions for directives that institute
actions that, while not directly harmful to the recipient, may result in
disclosure of information that either facilitates a subsequent attack or else
violates a recipient\'s privacy in any way.
This media type does not employ compression.
Interoperability considerations:
Same as general interoperability considerations for application/xml media type
as specified in clause 9.1 of IETF RFC 7303. Any unknown XML elements and any
unknown XML attributes are to be ignored by recipient of the MIME body.
Published specification:
3GPP TS 24.281 \"Mission Critical Video (MCVideo) call control\" version
14.1.0, available via http://www.3gpp.org/specs/numbering.htm.
Applications which use this media type:
Applications supporting the mission critical video as described in the
published specification.
Fragment identifier considerations:
The handling in clause 5 of IETF RFC 7303 applies.
Restrictions on usage:
None
Provisional registration? (standards tree only):
N/A
Additional information:
1\. Deprecated alias names for this type: none
2\. Magic number(s): none
3\. File extension(s): none
4\. Macintosh File Type Code(s): none
5\. Object Identifier(s) or OID(s): none
Intended usage:
Common
Person to contact for further information:
\- Name: \
\- Email: \
\- Author/Change controller:
i) Author: 3GPP CT1 Working Group/3GPP_TSG_CT_WG1\@LIST.ETSI.ORG
ii) Change controller: \/\
###### ## Annex G (informative): On-network emergency and imminent peril
related states
# G.1 MCVideo emergency state
The MCVideo emergency state is managed by the MCVideo client and MCVideo user.
High-level characteristics of this state are captured in table G-1.1.
Table G.1-1: MCVideo emergency state
+----------------+----------------+----------------+----------------+ | MCVideo | State-setting | State-clearing | Comments | | emergency | events | events | | | state | | | | +----------------+----------------+----------------+----------------+ | **Values:** | MCVideo | MCVideo | While the | | | emergency | emergency | MCVideo client | | \"set\": | alert | alert | is in the | | MCVideo user | initiated | cancelled (by | MCVideo | | is in a | | initiator) | emergency | | li | MCVideo | | state, all | | fe-threatening | emergency | MCVideo | group calls it | | situation | group call | emergency | makes will be | | | initiated | alert | MCVideo | | \"clear\": | | cancelled (by | emergency | | MCVideo user | MCVideo | au | group calls, | | is not in a | emergency | thorised-user) | providing the | | li | private call | | group is | | fe-threatening | initiated | MCVideo | authorised for | | situation | | emergency call | MCVideo | | | | cancelled by | emergency | | **Managed | | initiator (if | group calls. | | by:** | | there is no | | | | | outstanding | While in an | | MCVideo client | | MCVideo | emergency | | and MCVideo | | emergency | group call | | user | | alert) | while in the | | | | | MCVideo | | | | MCVideo user | emergency | | | | manually | state, the | | | | clears the | MCVideo user | | | | state | is an | | | | | \"emergency | | | | | talker\" and | | | | | will have | | | | | pre-emptive | | | | | priority over | | | | | non-emergency | | | | | talkers in the | | | | | emergency | | | | | group call. | +----------------+----------------+----------------+----------------+
# G.2 In-progress emergency group state
This state is described in both 3GPP TS 22.281 [36] and 3GPP TS 23.281 [26].
It is managed by the controlling MCVideo function. High-level characteristics
of this state are captured in table G.2-1.
Table G.2-1: in-progress emergency group state
+----------------------------+----------------------------+----------+ | In-progress emergency | State-entering events | Comments | | group state values | | | +----------------------------+----------------------------+----------+ | \"true\" | acceptance by the | | | | controlling MCVideo | | | | function of an MCVideo | | | | emergency group call | | | | request (as per | | | | clause 7.1.2.5.1.1 of | | | | 3GPP TS 23.281 [26]). | | +----------------------------+----------------------------+----------+ | \"false\" | initial state prior to any | | | | call activity | | | | | | | | acceptance by the | | | | controlling MCVideo | | | | function of an MCVideo | | | | emergency group cancel | | | | request (as per clause | | | | 7.1.2.5.1.3 of | | | | 3GPP TS 23.281 [26]). | | +----------------------------+----------------------------+----------+
# G.3 MCVideo emergency group state
The MCVideo emergency group state is the MCVideo client\'s perspective of the
in-progress emergency group state which is managed by the controlling MCVideo
function. The MCVideo emergency group (MVEG) state is managed by the MCVideo
client to enable the requesting of MCVideo emergency-level priority as early
as possible in the origination of an MCVideo emergency group call. High-level
characteristics of this state are captured in table G.3-1.
Table G.3-1: MCVideo emergency group state
+----------------------+----------------------+----------------------+ | MCVideo emergency | State-entering | Comments | | group state values | events | | +----------------------+----------------------+----------------------+ | MVEG 1: no-emergency | initial state prior | | | | to any call activity | | | | | | | | Emergency group call | | | | cancel request | | | | received on behalf | | | | of another user from | | | | the MCVideo server | | | | | | | | Emergency group call | | | | cancel response | | | | (success) in | | | | response to | | | | initiator\'s request | | +----------------------+----------------------+----------------------+ | MVEG 2: in-progress | Emergency group call | In this state, all | | | response received | participants in | | | (confirm) to | calls on this group | | | initiator\'s | will receive | | | emergency group call | emergency level | | | request | priority whether or | | | | not they are in the | | | Emergency group call | MCVideo emergency | | | request received (on | state themselves. | | | behalf of another | | | | user) | | +----------------------+----------------------+----------------------+ | MVEG 3: | Emergency group call | The controlling | | cancel-pending | cancel request sent | MCVideo server may | | | by initiator | not grant the cancel | | | | request for various | | | | reasons, e.g., other | | | | users in an MCVideo | | | | emergency state | | | | remain in the call. | +----------------------+----------------------+----------------------+ | MVEG 4: | Emergency group call | The controlling | | confirm-pending | request sent by | MCVideo server may | | | initiator | not grant the call | | | | request for various | | | | reasons, e.g., the | | | | MCVideo group is not | | | | configured as being | | | | emergency-capable so | | | | it can\'t be assumed | | | | that the group will | | | | enter the | | | | in-progress state. | +----------------------+----------------------+----------------------+
# G.4 MCVideo emergency group call state
Table G.4-1 provides the semantics of the MCVideo emergency group call (MVEGC)
state values. This internal state of the MCVideo client and is managed by the
MCVideo client. These states aid in the managing of the information elements
of MCVideo emergency group calls and MCVideo emergency alerts and their
cancellations.
Table G.4-1: MCVideo emergency group call state
+----------------------+----------------------+----------------------+ | MCVideo emergency | Semantics | Comments | | group call state | | | | values | | | +----------------------+----------------------+----------------------+ | MVEGC 1: | MCVideo client | **MCVideo emergency | | emergency-gc-capable | emergency-capable | state:** | | | client is not | | | | currently in an | may or may not be | | | MCVideo emergency | set in this state, | | | group call that it | depending upon the | | | has originated, nor | MCVideo client\'s | | | is it in the process | MVEA state | | | of initiating one. | | +----------------------+----------------------+----------------------+ | MVEGC 2: | MCVideo client has | **MCVideo emergency | | emer | initiated an MCVideo | state:** is set | | gency-call-requested | emergency group call | | | | request. | | +----------------------+----------------------+----------------------+ | MVEGC 3: | MCVideo client has | If the MCVideo user | | em | received an MCVideo | initiates a call | | ergency-call-granted | emergency group call | while the MCVideo | | | grant. | emergency state is | | | | still set, that call | | | | will be an MCVideo | | | | emergency group | | | | call, assuming that | | | | group is authorised | | | | for the client to | | | | initiate emergency | | | | group calls on. | | | | | | | | **MCVideo emergency | | | | state:** is set | +----------------------+----------------------+----------------------+
# G.5 MCVideo emergency alert state
Table G.5-1provides the semantics of the MCVideo emergency alert (MVEA) state
values. This is an internal state of the MCVideo client and is managed by the
MCVideo client. These states aid in the managing of the information elements
of MCVideo emergency group calls and MCVideo emergency alerts and their
cancellations.
Table G.5-1: MCVideo emergency alert state
+----------------------+----------------------+----------------------+ | MCVideo emergency | State-entering | Comments | | alert state values | events | | +----------------------+----------------------+----------------------+ | MVEA 1: no-alert | initial state | emergency alerts can | | | | be cancelled in | | | emergency alert | several ways: | | | cancelled | | | | | MCVideo emergency | | | emergency alert | alert cancel request | | | request denied | with \ | | | | set to \"false\" (by | | | | initiator) | | | | | | | | MCVideo emergency | | | | alert cancel request | | | | with \ | | | | set to \"false\" (by | | | | authorised user) | | | | | | | | MCVideo emergency | | | | group call cancel | | | | request with | | | | \ set to | | | | \"false\" | | | | | | | | **MCVideo emergency | | | | state:** may be set | | | | or clear, depending | | | | on MCVideo emergency | | | | call status | +----------------------+----------------------+----------------------+ | MVEA 2: | emergency alert | emergency alerts can | | emergency-a | request sent | be requested in | | lert-confirm-pending | | several ways: | | | | | | | | MCVideo emergency | | | | alert request with | | | | \ set to | | | | \"true\" | | | | | | | | MCVideo emergency | | | | group call request | | | | with \ | | | | set to \"true\" | | | | | | | | **MCVideo emergency | | | | state:** is set | +----------------------+----------------------+----------------------+ | MVEA 3: | emergency alert | **MCVideo emergency | | emergency-alert | response (success) | state:** is set | | -initiated | received | | +----------------------+----------------------+----------------------+ | MVEA 4: | emergency alert | **MCVideo emergency | | emergency- | cancellation request | state:** is clear | | alert-cancel-pending | sent by alert | | | | originator | | +----------------------+----------------------+----------------------+
# G.6 In-progress imminent peril group state
This state is described in both 3GPP TS 22.281 [36] and 3GPP TS 23.281 [26].
It is managed by the controlling MCVideo function. High-level characteristics
of this state are captured in table G.6-1.
Table G.6-1: in-progress imminent peril group state
+----------------------------+----------------------------+----------+ | In-progress imminent peril | State-entering events | Comments | | group state values | | | +----------------------------+----------------------------+----------+ | \"true\" | acceptance by the | | | | controlling MCVideo | | | | function of an MCVideo | | | | imminent peril group call | | | | request (as per | | | | clause 7.1.2.5.2.1 and | | | | clause 7.1.2.5.2.2 of | | | | 3GPP TS 23.281 [26]). | | +----------------------------+----------------------------+----------+ | \"false\" | initial state prior to any | | | | call activity | | | | | | | | acceptance by the | | | | controlling MCVideo | | | | function of an MCVideo | | | | imminent peril group | | | | cancel request (as per | | | | clause 7.1.2.5.2.3 of | | | | 3GPP TS 23.281 [26]). | | +----------------------------+----------------------------+----------+
# G.7 MCVideo imminent peril group state
The MCVideo imminent peril group state is the MCVideo client\'s perspective of
the in-progress imminent peril group state which is managed by the controlling
MCVideo function. The MCVideo imminent peril group (MVIG) state is managed by
the MCVideo client to enable the requesting of MCVideo imminent peril-level
priority as early as possible in the origination of an MCVideo imminent peril
group call. High-level characteristics of this state are captured in table
G.7-1.
Table G.7-1: MCVideo imminent peril group state
+----------------------+----------------------+----------------------+ | MCVideo imminent | State-entering | Comments | | peril group state | events | | | values | | | +----------------------+----------------------+----------------------+ | MVIG 1: no-imminent | initial state prior | | | peril | to any call activity | | | | | | | | Imminent peril group | | | | call cancel request | | | | received on behalf | | | | of another user from | | | | the MCVideo server | | | | | | | | Imminent peril group | | | | call cancel response | | | | (success) in | | | | response to | | | | initiator\'s request | | +----------------------+----------------------+----------------------+ | MVIG 2: in-progress | Imminent peril group | In this state, all | | | call response | participants in | | | received (confirm) | calls on this group | | | to initiator\'s | will receive | | | imminent peril group | imminent peril level | | | call request | priority whether or | | | | not they initiated | | | Imminent peril group | an MCVideo imminent | | | call request | peril group call | | | received (on behalf | themselves. | | | of another user) | | +----------------------+----------------------+----------------------+ | MVIG 3: | Imminent peril group | The controlling | | cancel-pending | call cancel request | MCVideo server may | | | sent by initiator | not grant the cancel | | | | request for various | | | | reasons, e.g., other | | | | users in an MCVideo | | | | imminent peril state | | | | remain in the call. | +----------------------+----------------------+----------------------+ | MVIG 4: | Imminent peril group | The controlling | | confirm-pending | call request sent by | MCVideo server may | | | initiator | not grant the call | | | | request for various | | | | reasons, e.g., the | | | | MCVideo group is not | | | | configured as being | | | | imminent | | | | peril-capable so it | | | | can\'t be assumed | | | | that the group will | | | | enter the | | | | in-progress state. | +----------------------+----------------------+----------------------+
# G.8 MCVideo imminent peril group call state
Table G.8-1 provides the semantics of the MCVideo imminent peril group call
(MVIGC) state values. This internal state of the MCVideo client and is managed
by the MCVideo client. These states aid in the managing of the information
elements of MCVideo imminent peril group calls and their cancellations.
Table G.8-1: MCVideo imminent peril group call state
* * *
MCVideo imminent peril group call state values Semantics Comments MVIGC 1:
imminent peril-gc-capable MCVideo client imminent peril-capable client is not
currently in an MCVideo imminent peril group call that it has originated, nor
is it in the process of initiating one. In this state, the MCVideo imminent
peril group state will be set to either \"MVIG 1: no-imminent-peril\" or
\"MVIG 2 in-progress\" state. MVIGC 2: imminent peril-call-requested MCVideo
client has initiated an MCVideo imminent peril group call request. In this
state, the MCVideo imminent peril group state will be set to \"MVIG 4:
confirm-pending\" if not already in the \"MVIG 2 in-progress\" state. MVIGC 3:
imminent peril-call-granted MCVideo client has received an MCVideo imminent
peril group call grant. In this state, the MCVideo imminent peril group state
will be set to \"MVIG 2 in-progress\".
* * *
# G.9 In-progress emergency private call state
This state is managed by the controlling MCVideo function. All private calls
originated between an initiator and the target MCVideo user when they are in
an in-progress emergency private call state are MCVideo emergency private
calls until this state is cancelled, whether or not the originator of the
private call is in an MCVideo emergency state.
Table G.9-1: in-progress emergency private call state
+----------------------+----------------------+----------------------+ | In-progress | State-entering | Comments | | emergency private | events | | | call state values | | | +----------------------+----------------------+----------------------+ | \"true\" | acceptance by the | The in-progress | | | controlling MCVideo | emergency private | | | function of an | call state applies | | | MCVideo emergency | to the call and the | | | private call request | two MCVideo users in | | | | the call. | +----------------------+----------------------+----------------------+ | \"false\" | initial state prior | | | | to any private call | | | | activity | | | | | | | | acceptance by the | | | | controlling MCVideo | | | | function of the | | | | cancellation of an | | | | MCVideo emergency | | | | private call. | | +----------------------+----------------------+----------------------+
# G.10 MCVideo emergency private priority state
The MCVideo emergency private priority state is the MCVideo client\'s
perspective of the in-progress emergency private call state which is managed
by the controlling MCVideo function. The MCVideo emergency private priority
(MVEPP) state is managed by the MCVideo client to enable the requesting of
MCVideo emergency-level priority as early as possible in the origination of an
MCVideo emergency private call. High-level characteristics of this state are
captured in table G.10-1.
Table G.10-1: MCVideo emergency private priority state
+----------------------+----------------------+----------------------+ | MCVideo emergency | State-entering | Comments | | private priority | events | | | state values | | | +----------------------+----------------------+----------------------+ | MVEPP 1: | initial state prior | | | no-emergency | to any call activity | | | | | | | | Emergency private | | | | call cancel request | | | | received on behalf | | | | of another user from | | | | the MCVideo server | | | | | | | | Emergency private | | | | call cancel response | | | | (success) in | | | | response to | | | | initiator\'s request | | +----------------------+----------------------+----------------------+ | MVEPP 2: in-progress | Emergency private | In this state, both | | | call response | participants in | | | received (confirm) | calls to each other | | | to initiator\'s | will request | | | emergency private | emergency level | | | call request | priority whether or | | | | not they are in the | | | Emergency private | MCVideo emergency | | | call request | state themselves. | | | received (on behalf | | | | of another user) | | +----------------------+----------------------+----------------------+ | MVEPP 3: | Emergency private | The controlling | | cancel-pending | call cancel request | MCVideo server may | | | sent by initiator | not grant the cancel | | | | request for various | | | | reasons, e.g., the | | | | other user in the | | | | call is in an | | | | MCVideo emergency | | | | state. | +----------------------+----------------------+----------------------+ | MVEPP 4: | Emergency private | The controlling | | confirm-pending | call request sent by | MCVideo server may | | | initiator | not grant the call | | | | request for various | | | | reasons, e.g., the | | | | MCVideo user is not | | | | configured as being | | | | authorised to | | | | originate an | | | | emergency private | | | | call so it can\'t be | | | | assumed that the | | | | call (originator and | | | | target users) will | | | | enter the | | | | in-progress state. | +----------------------+----------------------+----------------------+
# G.11 MCVideo emergency private call state
Table G.11-1 provides the semantics of the MCVideo emergency private call
(MEPC) state values. This is an internal state of the MCVideo client and is
managed by the MCVideo client. This state aids in the managing of the
information elements of MCVideo emergency private calls and MCVideo emergency
alerts and their cancellations.
Table G.11-1: MCVideo emergency private call state
+----------------------+----------------------+----------------------+ | MCVideo emergency | Semantics | Comments | | private call state | | | | values | | | +----------------------+----------------------+----------------------+ | MVEPC 1: | MCVideo client | **MCVideo emergency | | emergency-pc-capable | emergency-capable | state:** | | | client is not | | | | currently in an | may or may not be | | | MCVideo emergency | set in this state, | | | private call that it | depending upon the | | | has originated, nor | MCVideo client\'s | | | is it in the process | MVPEA state and the | | | of initiating one. | emergency states | | | | related to MCVideo | | | | emergency group | | | | calls. | +----------------------+----------------------+----------------------+ | MVEPC 2: | MCVideo client has | **MCVideo emergency | | em | initiated an MCVideo | state:** is set | | ergency-pc-requested | emergency private | | | | call request. | | +----------------------+----------------------+----------------------+ | MVEPC 3: | MCVideo client has | If the MCVideo user | | emergency-pc-granted | received an MCVideo | initiates a call | | | emergency private | while the MCVideo | | | call grant. | emergency state is | | | | still set, that call | | | | will be an MCVideo | | | | emergency private | | | | call, assuming that | | | | the initiating | | | | MCVideo user is | | | | authorised to | | | | initiate an MCVideo | | | | emergency private | | | | call to the targeted | | | | MCVideo user. | | | | | | | | **MCVideo emergency | | | | state:** is set | +----------------------+----------------------+----------------------+
# G.12 MCVideo private emergency alert state
Table G.5-1provides the semantics of the MCVideo private emergency alert
(MVPEA) state values. This is an internal state of the MCVideo client and is
managed by the MCVideo client. These states aid in the managing of the
information elements of MCVideo emergency private calls and MCVideo emergency
alerts and their cancellations. MCVideo private emergency alerts are targeted
to an MCVideo user.
Table G.12-1: MCVideo private emergency alert state
+----------------------+----------------------+----------------------+ | MCVideo emergency | State-entering | Comments | | alert state values | events | | +----------------------+----------------------+----------------------+ | MVPEA 1: no-alert | initial state | emergency alerts | | | | targeted to an | | | emergency alert | MCVideo user can be | | | cancelled | cancelled in several | | | | ways: | | | emergency alert | | | | request denied | MCVideo emergency | | | | private call cancel | | | | request with | | | | \ set to | | | | \"false\" | | | | | | | | timeout of private | | | | call inactivity | | | | timer | | | | | | | | end of call (if | | | | system policy) | | | | | | | | **MCVideo emergency | | | | state:** may be set | | | | or clear, depending | | | | on MCVideo emergency | | | | call status | +----------------------+----------------------+----------------------+ | MVPEA 2: | emergency alert | emergency alerts can | | emergency-a | request sent | be requested as an | | lert-confirm-pending | | optional part of a | | | | MCVideo client\'s | | | | request to initiate | | | | an MCVideo emergency | | | | private call, in | | | | which case the | | | | request has an | | | | \ | | | | element set to | | | | \"true\". | | | | | | | | **MCVideo emergency | | | | state:** is set | +----------------------+----------------------+----------------------+ | MVPEA 3: | emergency alert | **MCVideo emergency | | emergency-alert | response (success) | state:** is set | | -initiated | received | | +----------------------+----------------------+----------------------+ | MVPEA 4: | emergency alert | **MCVideo emergency | | emergency- | cancellation request | state:** is clear | | alert-cancel-pending | sent by alert | | | | originator | | +----------------------+----------------------+----------------------+
###### ## Annex H (informative): On-network routing considerations
# H.1 General
The following clauses summarise the identities placed into SIP headers and SIP
bodies during session establishment.
# H.2 Group Call
Table H.2-1 describes the contents of the SIP headers and SIP bodies inserted
by MCVideo clients and MCVideo servers involved in a group call.
Table H.2-1: Routing considerations for group call
+----------------+----------------+----------------+----------------+ | Interface | Content of SIP | Content of | Notes | | | headers | \" | | | | | mcvideo-info\" | | | | | MIME body | | +----------------+----------------+----------------+----------------+ | originating | Request-URI | \"mcvideo | PSI of O-PF | | MCVideo client | contains PSI | -request-uri\" | configured for | | to originating | of O-PF. | contains the | each client. | | participating | | group | | | MCVideo | P-Pref | identity. | MCVideo-id of | | function | erred-Identity | | each client is | | (O-PF). | may contain | | never sent in | | | IMPU of | | session | | | originating | | initiation. | | | user. | | | +----------------+----------------+----------------+----------------+ | O-PF to | Request-URI | \"mcvideo | CF finds the | | controlling | contains PSI | -request-uri\" | MCVideo ID of | | MCVideo | of CF. | contains the | the | | function (CF). | | group | originating | | | P-Ass | identity. | user from the | | | erted-Identity | | stored | | | contains IMPU | \"mcvideo-cal | IMPU-MCVideo | | | of originating | ling-user-id\" | ID binding and | | | user. | contains | locates the | | | | MCVideo ID of | PSI of the | | | | originating | controller | | | | user. | that serves | | | | | the group | | | | | identity. | | | | | | | | | | O-PF contains | | | | | configuration | | | | | of the PSIs of | | | | | the CFs. | +----------------+----------------+----------------+----------------+ | CF to | Request-URI | \"mcvideo | For each | | terminating | contains the | -request-uri\" | client in the | | participating | address of the | contains the | group, CF maps | | MCVideo | T-PF. | MCVideo ID of | the MCVideo-ID | | function | | the | of the | | (T-PF). | P-Ass | terminating | terminator to | | | erted-Identity | user. | the address of | | | contains the | | the T-PF. | | | address of the | \"mcvideo-cal | | | | CF. | ling-user-id\" | If the | | | | contains | terminator is | | | | MCVideo ID of | in another | | | | originating | domain, the CF | | | | user. | can map the | | | | | MCVideo ID of | | | | \"mcvideo-call | the terminator | | | | ing-group-id\" | to a PSI | | | | contains the | identifying a | | | | group | interrogating | | | | identity. | function in | | | | | the partner | | | | | network that | | | | | is able to | | | | | find the T-PF | | | | | using the | | | | | MCVideo ID. | +----------------+----------------+----------------+----------------+ | CF to | Request-URI | \"mcvideo | - | | n | contains the | -request-uri\" | | | on-controlling | PSI of the | contains the | | | MCVideo | NCF. | group | | | function of an | | identity. | | | MCVideo group | P-Ass | | | | (NCF). | erted-Identity | \"mcvideo-cal | | | | contains the | ling-user-id\" | | | | PSI of the CF. | contains | | | | | MCVideo ID of | | | | | originating | | | | | user. | | +----------------+----------------+----------------+----------------+ | T-PF to | Request-URI | \"mcvideo | T-PF finds the | | terminating | contains the | -request-uri\" | IMPU of the | | MCVideo | IMPU of the | contains the | terminating | | client. | terminating | MCVideo ID of | user from the | | | user. | the | stored | | | | terminating | IMPU-MCVideo | | | P-Ass | user. | ID binding at | | | erted-Identity | | the time of | | | contains the | \"mcvideo-cal | registration. | | | address of the | ling-user-id\" | | | | CF. | contains | | | | | MCVideo ID of | | | | | originating | | | | | user. | | | | | | | | | | \"mcvideo-call | | | | | ing-group-id\" | | | | | contains the | | | | | group | | | | | identity. | | +----------------+----------------+----------------+----------------+ | terminating | as in TS | \"mcvideo-cal | - | | MCVideo client | 24.229. | led-party-id\" | | | to T-PF | | contains | | | (response). | | contacted | | | | | client\'s | | | | | MCVideo ID. | | +----------------+----------------+----------------+----------------+ | T-PF to NCF | as in TS | \"mcvideo-cal | - | | (response) | 24.229 | led-party-id\" | | | | | contains | | | | | contacted | | | | | client\'s | | | | | MCVideo ID. | | +----------------+----------------+----------------+----------------+ | T-PF to CF | as in TS | \"mcvideo | - | | (response). | 24.229. | -called-user\" | | | | | contains | | | | | contacted | | | | | client\'s | | | | | MCVideo ID. | | +----------------+----------------+----------------+----------------+ | NCF to CF | as in TS | - | In the case of | | (response) | 24.229. | | trusted mutual | | | | | aid, the NCF | | | | | returns the | | | | | identities of | | | | | the group in a | | | | | \"re | | | | | source-lists\" | | | | | MIME body. | +----------------+----------------+----------------+----------------+ | CF to O-PF | as in TS | - | - | | (response) | 24.229. | | | +----------------+----------------+----------------+----------------+ | O-PF to | as in TS | - | - | | originating | 24.229. | | | | MCVideo client | | | | | (response) | | | | +----------------+----------------+----------------+----------------+
# H.3 Private Call
Table H.3-1 describes the contents of the SIP headers and SIP bodies inserted
by MCVideo clients and MCVideo servers involved in a private call.
Table H.3-1: Routing considerations for private call
+----------------+----------------+----------------+----------------+ | Interface | Content of SIP | Content of SIP | Notes | | | headers | bodies (body | | | | | in brackets) | | +----------------+----------------+----------------+----------------+ | originating | Request-URI | MCVideo ID of | PSI for | | MCVideo client | contains the | called user | private call | | to originating | PSI for the | (r | is configured | | participating | private call | esource-lists) | on the client. | | MCVideo | service. | | | | function | | | | | (O-PF) | P-Pref | | | | | erred-Identity | | | | | may contain | | | | | IMPU of | | | | | originating | | | | | user | | | +----------------+----------------+----------------+----------------+ | O-PF to | Request-URI | MCVideo ID of | - | | controlling | contains the | called user | | | MCVideo | PSI for the | (r | | | function (CF) | private call | esource-lists) | | | | service. | | | | | | MCVideo ID of | | | | P-Ass | calling user | | | | erted-Identity | contained in | | | | contains IMPU | \"mcvideo-cal | | | | of originating | ling-user-id\" | | | | user. | (mcvideo-info) | | +----------------+----------------+----------------+----------------+ | CF to | Request-URI | MCVideo ID of | If the | | terminating | contains the | calling user | terminator is | | participating | address of the | contained in | in another | | MCVideo | T-PF. | \"mcvideo-cal | domain, the CF | | function | | ling-user-id\" | can map the | | (T-PF) | P-Ass | ( | MCVideo ID of | | | erted-Identity | mcvideo-info). | the terminator | | | contains IMPU | | to a PSI | | | of originating | MCVideo ID of | identifying an | | | user. | called user | interrogating | | | | contained in | function in | | | | \"mcvideo-cal | the partner | | | | led-party-id\" | network that | | | | ( | is able to | | | | mcvideo-info). | find the T-PF | | | | | using the | | | | | MCVideo ID. | +----------------+----------------+----------------+----------------+ | T-PF to | Request-URI | MCVideo ID of | - | | terminating | contains the | calling user | | | MCVideo client | IMPU of the | contained in | | | | terminating | \"mcvideo-cal | | | | user. | ling-user-id\" | | | | | ( | | | | P-Ass | mcvideo-info). | | | | erted-Identity | | | | | contains IMPU | MCVideo ID of | | | | of originating | called user | | | | user. | contained in | | | | | \"mcvideo-cal | | | | | led-party-id\" | | | | | ( | | | | | mcvideo-info). | | +----------------+----------------+----------------+----------------+ | terminating | as in TS | \"mcvideo-cal | - | | MCVideo client | 24.229 | led-party-id\" | | | to T-PF | | contains | | | (response) | | contacted | | | | | client\'s | | | | | MCVideo ID | | | | | ( | | | | | mcvideo-info). | | +----------------+----------------+----------------+----------------+ | T-PF to CF | as in TS | \"mcvideo | - | | (response) | 24.229 | -called-user\" | | | | | contains | | | | | contacted | | | | | client\'s | | | | | MCVideo ID | | | | | ( | | | | | mcvideo-info). | | +----------------+----------------+----------------+----------------+ | CF to O-PF | as in TS | \"mcvideo-cal | - | | (response) | 24.229 | led-party-id\" | | | | | contains | | | | | contacted | | | | | client\'s | | | | | MCVideo ID | | | | | ( | | | | | mcvideo-info). | | +----------------+----------------+----------------+----------------+ | O-PF to | as in TS | \"mcvideo-cal | - | | originating | 24.229 | led-party-id\" | | | MCVideo client | | contains | | | (response) | | contacted | | | | | client\'s | | | | | MCVideo ID | | | | | ( | | | | | mcvideo-info). | | +----------------+----------------+----------------+----------------+
###### ## Annex I (informative): INFO packages defined in the present document
# I.1 Info package for transfer of transmission participants requests
> Editor\'s note: [CT1#133-e, C1-217172, CR0143 rev 1]: The info package type
> \"application/vnd.3gpp.mcvideo-transmission-request+xml\" as defined in this
> clause is to be registered in the IANA registry for Application Media Types
> based upon the following template. The registration is to be started at the
> completion of 3GPP release 17.
## I.1.1 Scope
This clause contains the information required for the IANA registration of
info package g.3gpp.mcvideo-transmission-request in accordance with IETF RFC
6086 [21].
## I.1.2 g.3gpp.mcvideo-transmission-request info package
### I.1.2.1 Overall description
When a temporary group call includes constituent MCVideo groups in partner
systems where an MCVideo call is ongoing and if there is a participant with
permission to transmit, the non-controlling MCVideo function of an MCVideo
group needs to transfer information of the currently transmitting user(s) to
the controlling MCVideo function hosting the temporary group. The information
is transferred in the form of a transmission request.The controlling MCVideo
function will then determine if the participant will be permitted to continue
to transmit or if the permission to transmit is revoked.
### I.1.2.2 Applicability
This package is used to transport a transmission request from the non-
controlling MCVideo function of an MCVideo group to the controlling MCVideo
function hosting the temporary group.
I.1.2.3 Appropriateness of INFO Package Usage
A number of solutions were discussed for the transportation of the
transmission request to the controlling MCVideo function hosting the temporary
MCVideo group. The solutions were:
1) Use of the session related methods (e.g. SIP 200 (OK) response to the SIP
INVITE request).
2) Use of the SIP MESSAGE method.
3) Use of the SIP INFO method as described in IETF RFC 6086 [21], by defining
a new info package.
The result of the evaluation of the above solutions were:
1) To include such a large amount of data in a SIP 200 (OK) response to an SIP
INVITE request could cause problems with the size of the SIP 200 (OK) response
resulting in packet fragmentation.
2) The use of the SIP MESSAGE request would result in that the recommended
value of size of the information transferred by the SIP MESSAGE request would
be exceeded.
3) The use of SIP INFO request was found as the most appropriate solution
since the SIP INFO request could be sent in the existing SIP session.
### I.1.2.4 Info package name
g.3gpp.mcvideo-transmission-request
### I.1.2.5 Info package parameters
None defined
### I.1.2.6 SIP options tags
None defined
### I.1.2.7 INFO message body parts
The MIME type of the message body carrying participant identities is
application/vnd.3gpp.mvideo-transmission-request+xml. The
application/vnd.3gpp.mcvideo-transmission-request+xml MIME type is defined in
3GPP TS 24.281.
When associated with the g.3gpp.mcvideo-transmission-request info package, the
Content-Disposition value of the message body carrying the floor request is
\"info-package\".
### I.1.2.8 Info package usage restrictions
None defined.
### I.1.2.9 Rate of INFO Requests
Single INFO request generated after session set up.
### I.1.2.10 Info package security considerations
The security is based on the generic security mechanism provided for the
underlying SIP signalling. No additional security mechanism is defined.
### I.1.2.11 Implementation details and examples
UAC generation of INFO requests: See 3GPP TS 24.281: \"Mission Critical Video
(MCVideo) signalling control; Protocol specification\".
UAS processing of INFO requests: See 3GPP TS 24.281: \"Mission Critical Video
(MCVideo) signalling control; Protocol specification\".
EXAMPLE: A controlling MCVideo function hosting a temporary MCVideo group
inviting a constituent MCVideo group hosted by a non-controlling MCVideo
function of an MCVideo group in a partner system where an MCVideo call is
ongoing with one or two of the participants granted to transmit. Then the non-
controlling MCVideo function of the constituent MCVideo group sends a SIP INFO
request carrying a transmission request in an application/vnd.3gpp.mcvideo-
transmission-request+xml MIME body using the g.3gpp.mcvideo-transmission-
request info package.
# I.2 Info package for transfer of MCVideo information
## I.2.1 Scope
This clause contains the information required for the IANA registration of
info package g.3gpp.mcvideo-info in accordance with IETF RFC 6086 [64].
## I.2.2 g.3gpp.mcvideo-info info package
### I.2.2.1 Overall description
The MCVideo client request for MCVideo emergency call origination can also
optionally request the origination of an MCVideo emergency alert. Similarly,
the MCVideo client request for MCVideo emergency call cancellation can also
optionally request the cancellation of an MCVideo emergency alert. A mechanism
to inform the MCVideo client that one of the requested actions has been
rejected by the controlling MCVideo function is needed to both inform the
MCVideo user that one of their requested actions has been rejected and to keep
the emergency and imminent peril related state machines maintained by the
MCVideo client updated appropriately. Note that a SIP 200 OK has to be sent in
the case where the MCVideo emergency call origination request or cancellation
request is accepted by the controller to allow the MCVideo user to initiate
the MCVideo emergency call and receive updated priority even if the
accompanying MCVideo alert request is rejected.
An MCVideo client request for an MCVideo imminent peril call when the targeted
MCVideo group is in an in-progress emergency state also needs special
handling, as in this case, the call request will be accepted but the MCVideo
client needs to be informed that the MCVideo user will be joined to an in-
progress MCVideo emergency group call instead of the requested MCVideo
imminent peril group call to keep the emergency and imminent peril related
state machines maintained by the MCVideo client updated appropriately.
### I.2.2.2 Applicability
This package is used to transport emergency call, imminent peril and emergency
alert indications from the controlling function to the MCVideo client
### I.2.2.3 Appropriateness of INFO Package Usage
A number of solutions were discussed for the transportation of the emergency
call, imminent peril and emergency alert indications from the controlling
function to the MCVideo client. The solutions were:
1) Use of the session related methods (e.g. SIP 200 (OK) response to the SIP
INVITE request).
2) Use of the SIP MESSAGE method.
3) Use of the SIP INFO method as described in IETF RFC 6086, by defining a new
info package.
The result of the evaluation of the above solutions were:
1) To include such a large amount of data in a SIP 200 (OK) response to an SIP
INVITE request could cause problems with the size of the SIP 200 (OK) response
resulting in packet fragmentation.
2) The use of the SIP MESSAGE request would result in that the recommended
value of size of the information transferred by the SIP MESSAGE request would
be exceeded.
3) The use of SIP INFO request was found as the most appropriate solution
since the SIP INFO request could be sent in the existing SIP session.
### I.2.2.4 Info package name
g.3gpp.mcvideo-info
### I.2.2.5 Info package parameters
None defined
### I.2.2.6 SIP options tags
None defined
### I.2.2.7 INFO message body parts
The MIME type of the message body carrying participant identities is
application/vnd.3gpp.mcvideo-info+xml. The application/vnd.3gpp.mcvideo-
info+xml MIME type is defined in 3GPP TS 24.379.
When associated with the g.3gpp.mcvideo-info info package, the Content-
Disposition value of the message body carrying mcvideo information is \"info-
package\".
### I.2.2.8 Info package usage restrictions
None defined.
### I.2.2.9 Rate of INFO Requests
Single INFO request generated after session set up.
### I.2.2.10 Info package security considerations
The security is based on the generic security mechanism provided for the
underlying SIP signalling. No additional security mechanism is defined.
### I.2.2.11 Implementation details and examples
UAC generation of INFO requests: See 3GPP TS 24.281: \"Mission Critical Video
(MCVideo) call control; Protocol specification\".
UAS processing of INFO requests: See 3GPP TS 24.281: \"Mission Critical Video
(MCVideo) call control; Protocol specification\"
EXAMPLE: A controlling MCVideo function will receive a SIP INVITE request or
SIP (re-)INVITE request containing a request for an emergency call (with or
without an alert) or an imminent peril call. When an emergency call has been
authorised but an optional request for an emergency alert has been determined
to be unauthorised, the controller will respond with a SIP 200 (OK) response
to indicate acceptance of the call request and return an indication of the
rejection of the emergency alert request in a SIP INFO request carrying the
application/vnd.3gpp.mcvideo-info+xml MIME body using the g.3gpp.mcvideo-info
info package.
#