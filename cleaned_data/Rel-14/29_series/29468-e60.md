# Foreword
This Technical Specification has been produced by the 3rd Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
Y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
This document defines the protocol for the MB2 reference point between the
Group Communication Service Application Server (GCS AS) and the Broadcast-
Multicast Service Centre (BM-SC).
The MB2 reference point and related stage 2 procedures are defined in TS
23.468 [4] as part of the Group Communication System Enablers for LTE. The
stage 1 requirements for Group Communication System Enablers for LTE are
specified in TS 22.468 [2].
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or non‑specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 22.468: \"Group Communication System Enablers for LTE
(GCSE_LTE)\".
[3] 3GPP TS 23.246: \"Multimedia Broadcast/Multicast Service (MBMS);
Architecture and functional description\".
[4] 3GPP TS 23.468: \"Group Communication System Enablers for LTE (GCSE_LTE);
stage 2\".
[5] 3GPP TS 26.346: \"Multimedia Broadcast/Multicast Service (MBMS); Protocols
and codecs\".
[6] 3GPP TS 29.061: \"Interworking between the Public Land Mobile Network
(PLMN) supporting packet based services and Packet Data Networks (PDN)\".
[7] 3GPP TS 29.212: \"Policy and Charging Control (PCC); Reference points\".
[8] 3GPP TS 29.274: \"3GPP Evolved Packet System (EPS); Evolved General Packet
Radio Service (GPRS) Tunnelling Protocol for Control plane (GTPv2-C); Stage
3\".
[9] 3GPP TS 29.281: \"General Packet Radio System (GPRS) Tunnelling Protocol
User Plane (GTPv1-U)\".
[10] 3GPP TS 33.246: \"Security of Multimedia Broadcast/Multicast Service
(MBMS)\".
[11] IETF RFC 791: \"Transmission Control Protocol\".
[12] IETF RFC 768: \"User Datagram Protocol\".
[13] IETF RFC 2234: \"Augmented BNF for syntax specifications\".
[14] Void
[15] IETF RFC 4960: \"Stream Control Transmission Protocol\".
[16] IETF RFC 5719: \"Updated IANA Considerations for Diameter Command Code
Allocations\".
[17] IETF RFC 5996: \"The Internet Key Exchange (IKE)\".
[18] IETF RFC 3947: \"Negotiation of NAT-Traversal in the IKE\".
[19] IETF RFC 3948: \"UDP Encapsulation of IPsec ESP Packets\".
[20] IETF RFC 4303: \"IP Encapsulating Security Payload (ESP)\".
[21] IETF RFC 6347: \"Datagram Transport Layer Security Version 1.2\".#
[22] 3GPP TS 23.007: \"Restoration procedures\".
[23] 3GPP TS 29.229: \"Cx and Dx interfaces based on the Diameter protocol\".
[24] 3GPP TS 36.300: \"E-UTRA and E-UTRAN overall description; Stage 2\".
[25] IETF RFC 7944: \"Diameter Routing Message Priority\".
[26] IETF RFC 8583: \"Diameter Load Information Conveyance\".
[27] IETF RFC 6733: \"Diameter Base Protocol\".
[28] 3GPP TS 23.285: \"Architecture Enhancements for V2X services\".
# 3 Definitions, symbols and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
TR 21.905 [1] and the following apply:
**MBMS bearer: T** he service provided by the EPS to deliver the same IP
datagrams to multiple receivers in a designated location.
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in TR 21.905
[1] and the following apply. An abbreviation defined in the present document
takes precedence over the definition of the same abbreviation, if any, in TR
21.905 [1].
ARP Allocation and Retention Priority
AVP Attribute-Value Pair
BM-SC Broadcast-Multicast Service Centre
DRMP Diameter Routing Message Priority
DSCP Differentiated Services Code Point
DTLS Datagram Transport Layer Security
ESP Encapsulating Security Payload
GAA GCS-Action-Answer
GAR GCS-Action-Request
GCS Group Communication Service
GCSE Group Communication System Enablers
GCS AS Group Communication Service Application Server
GNA GCS-Notification-Answer
GNR GCS-Notification-Request
MBMS-GW MBMS Gateway
PCRF Policy and Charging Rules Function
P-GW PDN Gateway
TMGI Temporary Mobile Group Identity
UDP User Datagram Protocol
V2X Vehicle-to-Everything
# 4 Architectural Overview
## 4.1 Reference Model
Figure 4.1‑1 shows a high level reference model of the architectural elements
relevant to understand the MB2 reference point. More complete reference models
for GCSE are contained in TS 23.468 [4].
Figure 4.1‑1: Reference Model
NOTE: The GC1 reference point between the UE and the GCS AS is unspecified in
the present release. Data related to the GC1 reference point are transported
via the Sgi reference point between GCS AS and P‑GW.
For the V2X Localized User Plane supported feature, the reference model in
Annex B.3 of 3GPP TS 23.285 [28] applies.
## 4.2 Functional Elements
### 4.2.1 Group Communication Service Application Server (GCS AS)
The GCS AS is defined in TS 23.468 [4] and supports the following
functionality:
\- Exchanging GC1 signalling with the UE.
\- Receiving unicast uplink data from the UE via the SGi reference point.
\- Delivery of data to all the UEs belonging to a group using unicast delivery
over the SGi reference point and/or MBMS delivery over the MB2 reference
point.
\- Support for service continuity procedures for a UE to switch between
unicast delivery and MBMS delivery.
\- For MBMS delivery:
\- MB2‑C procedures defined in TS 23.468 [4], for requesting the BM‑SC to
activate, deactivate, modify an MBMS bearer, allocate/deallocate TMGI.
\- Forwarding of data to be delivered via an MBMS bearer to the BM‑SC via the
MB2‑U reference point.
In addition to the functions defined in 3GPP TS 23.468 [4], an GCS AS which
acts as a V2X Application Server may support the following functions:
\- For the V2X Localized User Plane supported feature, MB2‑C procedures
defined in 3GPP TS 23.285 [28] subclause 5.4.2.2 for requesting the BM-SC to
activate an MBMS bearer for local MBMS based MBMS data delivery.
### 4.2.2 Broadcast-Multicast Service Centre (BM‑SC)
The BM‑SC is defined in TS 23.246 [3], with additions related to the MB2
reference point in TS 23.468 [4], and supports the following functionality:
\- MBMS Broadcast Mode procedures defined in TS 23.246 [3] (stage 2) and in TS
29.061 [6] (stage 3).
\- MB2‑C procedures defined in TS 23.468 [4], for activating, deactivating,
modifying an MBMS bearer, allocating/deallocating TMGI and notifying the TMGI
expiry or the MBMS Bearer condition to GCS AS.
\- SGmb procedures for controlling MBMS broadcast bearers defined in TS 29.061
[6].
\- Reception of user data from the GCS AS via the MB2‑U reference point and
forwarding those data via the SGi‑mb reference point as described in TS 29.061
[6].
In addition to the functions defined in 3GPP TS 23.468 [4], the BM-SC may
support the following functions for V2X services:
\- For the V2X Localized User Plane supported feature, MB2‑C procedures
defined in 3GPP TS 23.285 [28] subclause 5.4.2.2 for receiving Local MBMS
information defined in 3GPP TS 23.285 [28] from an GCS AS which acts as a V2X
Application Server.
# 5 Procedures over the MB2 Reference Point
## 5.1 TMGI and Flow ID handling
The combination of TMGI and Flow Identifier shall uniquely identify an MBMS
bearer. TMGI and Flow Identifier are defined in TS 23.246 [3].
A TMGI shall be assigned by the BM‑SC upon request of the GCS AS. The BM‑SC
shall provide an expiration time for each assigned TMGI or group of TMGIs to
the GCS AS. The BM‑SC shall assign a TMGI, which is different from any other
TMGI, which the BM‑SC has previously assigned and for which the timer has not
yet expired and there is no active MBMS broadcast bearer. The GCS AS may
request the BM‑SC to refresh the expiration timer for a TMGI. The BM‑SC and
GSC AS shall store the TMGI until the timer expires.
NOTE: As defined in TS 23.246 [3], TMGIs need to be globally unique. It is
assumed that the BM‑SC uses a configured range of TMGI values.
The BM‑SC shall assign Flow Identifier values, which shall be unique for the
corresponding TMGI. For each assigned TMGI, both BM‑SC and GCS AS shall store
all assigned Flow Identifiers until the expiry of the timer of the TMGI, or
until GCS AS requests the deallocation of the TMGI.
## 5.2 TMGI Management
### 5.2.1 TMGI Allocation Procedure
The TMGI Allocation procedure may be used by the GCS AS to request a set of
TMGIs, or to request the renewal of the expiration time for already allocated
TMGIs.
To apply this procedure, the GCS AS shall send a GCS‑Action‑Request (GAR)
command including the TMGI‑Allocation‑Request AVP. Within the
TMGI‑Allocation‑Request AVP, the GCS AS shall indicate the number of requested
new TMGIs, excluding any TMGIs for which only an expiration timer renewal is
requested, in the TMGI‑Number AVP, and may include within TMGI AVPs TMGIs that
are already allocated to the GCS AS, and for which the GCS AS wishes to obtain
a later expiration time. The number of TMGIs requested may be zero, if this
procedure is used only to renew the expiration time for already allocated
TMGIs.
Upon reception of a GCS‑Action‑Request (GAR) command including the
TMGI‑Allocation‑Request AVP, the BM‑SC shall determine whether the GCS AS is
authorized to receive the requested TMGIs. If no Route‑Record AVP(s) are
present, the BM‑SC shall derive the identity of the GCS AS from the
Origin‑Host AVP. If Route‑Record AVP(s) are present, the BM‑SC shall authorize
the request if the identity within the first Route‑Record AVP matches the GCS
AS authorized to use the TMGIs. If the renewal of TMGIs has been requested,
the BM-SC shall also determine whether the TMGIs are allocated to the
requesting GCS AS and if yes, whether the renewal of TMGI expiration times is
possible. The BM‑SC shall also determine an expiration time, which shall be
applicable for all new TMGIs and all TMGIs for which the timer was renewed.
NOTE 1: During the TMGI Allocation Procedure, the BM‑SC does not activate
MBMS. However TMGIs, for which the expiration time is renewed, may already
have active MBMS bearers.
The BM‑SC shall then send the GCS‑Action‑Answer (GAA) command including the
TMGI‑Allocation‑Response AVP. For a successful TMGI allocation, the
TMGI‑Allocation‑Response AVP shall include TMGI AVPs and the
MBMS‑Session‑Duration AVP. The TMGI AVPs shall contain all successfully
allocated or refreshed TMGIs and the MBMS‑Session‑Duration AVP shall indicate
their common new expiration time. For an unsuccessful TMGI allocation request,
the TMGI‑Allocation‑Response AVP shall include the TMGI‑Allocation‑Result AVP.
For a partial success (i.e. if some, but not all of the requested TMGIs are
allocated or timers refreshed), the TMGI‑Allocation‑Response AVP shall include
the TMGI AVPs, the MBMS‑Session‑Duration AVP and the TMGI‑Allocation‑Result
AVP. The TMGI AVPs shall contain all successfully allocated or refreshed TMGIs
and the MBMS‑Session‑Duration AVP shall indicate their common new expiration
time. The TMGI‑Allocation‑Result AVP shall indicate both success and the
reason(s) why the allocation or refresh failed for some TMGIs.
### 5.2.2 TMGI Deallocation Procedure
The TMGI Deallocation procedure may be used by the GCS AS to immediately
release a set of TMGIs, irrespective of their expiration times.
To apply this procedure, the GCS AS shall send a GCS‑Action‑Request (GAR)
command including the TMGI‑Deallocation‑Request AVP. If the GCS AS desires to
deallocate some, but not all currently allocated TMGIs, it shall include TMGI
AVPs for all TMGIs that are to be deallocated within the
TMGI‑Deallocation‑Request AVP. If the GCS AS desires to deallocate all
currently allocated TMGIs, it shall not include TMGI AVPs within the
TMGI‑Deallocation‑Request AVP.
Upon reception of a GCS‑Action‑Request (GAR) command including the
TMGI‑Deallocation‑Request AVP, the BM‑SC shall determine whether the GCS AS is
authorized to deallocate the TMGIs. If no Route‑Record AVP(s) are present, the
BM‑SC shall derive the identity of the GCS AS from the Origin‑Host AVP. If
Route‑Record AVP(s) are present, the BM‑SC shall authorize the request if the
identity within the first Route‑Record AVP matches the GCS AS authorized to
use the TMGIs.
The BM‑SC shall then send the GCS‑Action‑Answer (GAA) command and shall
include a TMGI‑Deallocation‑Response AVP for each TMGI contained in the
TMGI‑Deallocation‑Request AVP. Each TMGI‑Deallocation‑Response AVP shall
include the affected TMGI in the TMGI AVP. For an unsuccessful TMGI
deallocation, the TMGI‑Deallocation‑Response AVP shall also include the
TMGI‑Deallocation‑Result AVP.
When the GCS AS requests the deallocation of a TMGI with some related active
MBMS bearers, the BM‑SC shall terminate those bearer(s).
### 5.2.3 TMGI Expiry Notification Procedure
At timer expiry for a TMGI, the BM‑SC shall notify the GCS AS by sending a
GCS-Notification-Request (GNR) command including one TMGI‑Expiry AVP.
If there are active MBMS bearer(s) related to an expiring TMGI, the BM‑SC
shall terminate those bearer(s) and shall notify the GCS AS about the bearer
termination by including MBMS‑Bearer‑Event‑Notification AVP(s) in the GNR in
accordance with the MBMS Bearer Status Indication Procedure in clause 5.3.5.
## 5.3 MBMS Bearer Control Procedures
### 5.3.1 General
The GAR command described in subclauses 5.3.2, 5.3.3 and 5.3.4 may contain
more than one MBMS‑Bearer‑Request AVPs requesting the activation, modification
or deactivation of different MBMS bearers.
### 5.3.2 Activate MBMS Bearer Procedure
The Activate MBMS Bearer procedure may be used by the GCS AS to cause
allocation of resources for MBMS bearer(s).
To apply this procedure, the GCS AS shall send a GCS‑Action‑Request (GAR)
command including one MBMS‑Bearer‑Request AVP for each bearer that is to be
activated. Within the MBMS‑Bearer‑Request AVP, the GCS AS shall include the
MBMS‑StartStop‑Indication AVP set to \"START\" and the QoS‑Information AVP,
and the GCS AS may include the TMGI AVP, the MBMS‑Start‑Time AVP and the
MB2U‑Security AVP. If the MBMS Cell List feature is supported, the GCS AS
shall also include the MBMS-Cell-List AVP, or the MBMS‑Service‑Area AVP, or
both. If the MBMS Cell List feature is not supported, the GCS AS shall also
include the MBMS‑Service‑Area AVP. If the GCS AS does not yet know whether the
BM‑SC supports the MBMS Cell List feature and includes the MBMS-Cell-List AVP,
it shall also include the MBMS‑Service‑Area AVP.
If the V2X Localized User Plane feature is supported, the GCS AS may include
the Local-M1-Information AVP and the Local-MB2-U-Information AVP within the
MBMS‑Bearer‑Request AVP.
NOTE: The GCS AS can find out whether the BM‑SC supports the MBMS Cell List
feature and the V2X Localized User Plane feature prior to applying the
Activate MBMS Bearer Procedure the first time by using the TMGI Allocation
Procedure in advance.
If the GCS AS includes both the MBMS-Cell-List AVP and the MBMS‑Service‑Area
AVP in the MBMS‑Bearer‑Request AVP, then the provided service areas shall be a
complete set of the service areas that contains all the provided cells.
Upon reception of a GCS‑Action‑Request (GAR) command including the
MBMS‑Bearer‑Request AVP with the MBMS‑StartStop‑Indication AVP set to
\"START\", the BM‑SC shall determine whether the GCS AS is authorized to use
the TMGI. If no Route‑Record AVP(s) are present, the BM SC shall derive the
identity of the GCS AS from the Origin Host AVP. If Route‑Record AVP(s) are
present, the BM SC shall authorize the request if the identity within the
first Route‑Record AVP matches the GCS AS authorized to use the TMGI. If the
GCS AS is authorized to use the TMGI, the BM‑SC shall allocate MBMS resources
to support content delivery of the MBMS bearer to the requested MBMS broadcast
area (as described via the MBMS-Cell-List AVP and/or MBMS Service Area AVP)
using the Session Start procedure defined in 3GPP TS 23.246 [3]. If an MBMS-
Cell-List AVP but no MBMS Service Area AVP is included in the MBMS-Bearer-
Request AVP, the BM-SC shall derive MBMS service areas from the cells in the
MBMS-Cell-List AVP based on operator policy. If both an MBMS-Cell-List AVP and
an MBMS-Service-Area AVP are included, the BM-SC shall either derive MBMS
service areas from the cells in the MBMS-Cell-List AVP based on operator
policy and ignore the information in the MBMS-Service-Area AVP, or directly
provide the information received within the MBMS-Service-Area AVP in the
Session Start procedure defined in 3GPP TS 23.246 [3]. If no TMGI AVP is
included in the MBMS‑Bearer‑Request AVP, the BM‑SC shall allocate a new TMGI.
The BM‑SC shall allocate a new Flow Identifier. The BM‑SC shall decide whether
to use MB2‑U Security, and shall take into account related requests of the GCS
AS, as received within the MB2U‑Security AVP in the MBMS‑Bearer‑Request AVP.
If the new MBMS service area overlaps with the service area of any active
bearer with the same TMGI, the BM‑SC should reject the activation request with
the result code \"Overlapping‑MBMS‑Service‑Area\".
The BM‑SC shall then send GCS‑Action‑Answer (GAA) command including an
MBMS‑Bearer‑Response AVP. The BM‑SC shall include an MBMS‑Bearer‑Response AVP
for each MBMS‑Bearer‑Request AVP that was included in the GAR. The
MBMS‑Bearer‑Response AVP shall be included in the same position in the GAA
that the corresponding MBMS‑Bearer‑Request AVP had in the GAR.
For a successful MBMS bearer activation, the MBMS‑Bearer‑Response AVP shall
include the TMGI AVP, the MBMS-Flow-Identifier AVP, the MBMS‑Session‑Duration
AVP, the BMSC‑Address AVP and BMSC‑Port AVP, and may include Radio‑Frequency
AVP(s) as MBMS bearer related service description. If MB2‑U Security is
applied, the MBMS‑Bearer‑Response AVP shall also include the MB2U‑Security
AVP.
If the V2X Localized User Plane supported feature is supported, and the
Local-M1-Information AVP and Local-MB2-U-Information AVP are received from the
GCS AS, and the BM-SC determines to use the local MBMS information, the BM-SC
shall include the BMSC-Address AVP and the BMSC-Port with the IP address and
port included in the received Local-MB2-U-Information AVP in the
MBMS‑Bearer‑Response AVP. Otherwise, the BM-SC shall include the BMSC-Address
AVP and the BMSC-Port with the IP address and port allocated by the BM-SC in
the MBMS‑Bearer‑Response AVP.
### 5.3.3 Deactivate MBMS Bearer Procedure
The Deactivate MBMS Bearer procedure may be used by the GCS AS to cause
deallocation of resources for MBMS bearer(s).
To apply this procedure, the GCS AS shall send a GCS‑Action‑Request (GAR)
command including one MBMS‑Bearer‑Request AVP for each bearer that is to be
deactivated. Within the MBMS‑Bearer‑Request AVP, the GCS AS shall include the
MBMS‑StartStop‑Indication AVP set to \"STOP\", the TMGI AVP and the
MBMS‑Flow‑Identifier AVP to designate the bearer to be deactivated.
Upon reception of a GCS‑Action‑Request (GAR) command including the
MBMS‑Bearer‑Request AVP with MBMS‑StartStop‑Indication AVP set to \"STOP\",
the BM‑SC shall determine whether the GCS AS is authorized to use the TMGI. If
no Route‑Record AVP(s) are present, the BM‑SC shall derive the identity of the
GCS AS from the Origin‑Host AVP. If Route‑Record AVP(s) are present, the BM‑SC
shall authorize the request if the identity within the first Route‑Record AVP
matches the GCS AS authorized to use the TMGI. If the GCS AS is authorized to
use the TMGI, the BM‑SC shall stop the broadcast to the MBMS bearer identified
by the TMGI AVP and the MBMS‑Flow‑Identifier AVP and shall deallocate MBMS
resources used for the MBMS bearer using the Session Stop procedure defined in
TS 23.246 [3].
The BM‑SC shall then send GCS‑Action‑Answer (GAA) command including an
MBMS‑Bearer‑Response AVP. The BM-SC shall include an MBMS‑Bearer‑Response AVP
for each MBMS‑Bearer‑Request AVP that was included in the GAR. The
MBMS‑Bearer‑Response AVP shall be included in the same position in the GAA
that the corresponding MBMS‑Bearer‑Request AVP had in the GAR. For a
successful MBMS bearer deactivation, the MBMS‑Bearer‑Response AVP shall
include the TMGI AVP and the MBMS-Flow-Identifier AVP.
### 5.3.4 Modify MBMS Bearer Procedure
The Modify MBMS Bearer procedure may be used by the GCS AS to cause
modification of the priority and pre-emption values for an MBMS bearer, the
MBMS broadcast area, or both.
To apply this procedure, the GCS AS shall send a GCS‑Action‑Request (GAR)
command including one MBMS‑Bearer‑Request AVP for each bearer that is to be
modified. Within the MBMS‑Bearer‑Request AVP, the GCS AS shall include The
MBMS‑StartStop‑Indication AVP set to \"UPDATE\", the TMGI AVP and the
MBMS‑Flow‑Identifier AVP to designate the bearer to be modified. The GSC AS
may include the MBMS‑Service‑Area AVP, the QoS‑Information AVP and/ or, if the
MBMS Cell List feature is supported, the MBMS-Cell-List AVP. However, at least
one of the MBMS‑Service‑Area AVP, the MBMS-Cell-List AVP and the
QoS‑Information AVP shall be included. The QoS‑Information AVP shall only be
used to modify the Allocation and Retention Priority (ARP), and shall
otherwise indicate the same values that were supplied when the activation of
the MBMS bearer was requested. If the GCS AS includes both the MBMS-Cell-List
AVP and the MBMS Service Area AVP in the MBMS Bearer Request AVP, the provided
service areas shall be a complete set of the service areas that contains all
the provided cells.
Upon reception of a GCS‑Action‑Request (GAR) command including the
MBMS‑Bearer‑Request AVP with MBMS‑StartStop‑Indication AVP set to \"UPDATE\",
the BM‑SC shall determine whether the GCS AS is authorized to use the TMGI. If
no Route‑Record AVP(s) are present, the BM‑SC shall derive the identity of the
GCS AS from the Origin‑Host AVP. If Route‑Record AVP(s) are present, the BM‑SC
shall authorize the request if the identity within the first Route‑Record AVP
matches the GCS AS authorized to use the TMGI. If the GCS AS is authorized to
use the TMGI, the BM‑SC shall modify the characteristics of the MBMS bearer
using the Session Update procedure defined in 3GPP TS 23.246 [3]. If an MBMS-
Cell-List AVP but no MBMS Service Area AVP is included in the
MBMS‑Bearer‑Request AVP, the BM‑SC shall derive MBMS service areas from the
cells in the MBMS-Cell-List AVP based on operator policy. If both an MBMS-
Cell-List AVP and an MBMS‑Service‑Area AVP are included, the BM-SC shall
either derive MBMS service areas from the cells in the MBMS-Cell-List AVP
based on operator policy and ignore the information in the MBMS‑Service‑Area
AVP, or directly provide the information received within the MBMS‑Service‑Area
AVP in the Session Update procedure defined in 3GPP TS 23.246 [3].
If the MBMS broadcast area is being modified, the BM‑SC shall ensure that the
new MBMS broadcast area is not overlapping with the MBMS broadcast area of any
other existing MBMS bearer(s) with the same TMGI, in accordance with TS 23.246
[3]. Otherwise, the BM‑SC should reject the modification request with the
result code Overlapping‑MBMS‑Service‑Area.
The BM‑SC shall then send the GCS‑Action‑Answer (GAA) command including an
MBMS‑Bearer‑Response AVP. The BM-SC shall include an MBMS‑Bearer‑Response AVP
for each MBMS‑Bearer‑Request AVP that was included in the GAR. The
MBMS‑Bearer‑Response AVP shall be included in the same position in the GAA
that the corresponding MBMS‑Bearer‑Request AVP had in the GAR. For a
successful MBMS bearer modification, the MBMS‑Bearer‑Response AVP shall
include the TMGI AVP and the MBMS-Flow-Identifier AVP.
### 5.3.5 MBMS Bearer Status Indication Procedure
The BM‑SC may use the MBMS Bearer Status Indication Procedure to notify the
GCS AS of conditions affecting the delivery of services that use MBMS
Delivery, for instance the termination of an MBMS bearer.
To apply this procedure, the BM‑SC shall send a GCS-Notification-Request (GNR)
command including one MBMS‑Bearer‑Event‑Notification AVP for each bearer with
an event to be notified. Within the MBMS‑Bearer‑Event‑Notification AVP, the
BM‑SC shall indicate the bearer event using the MBMS-Bearer-Event AVP and
shall include and the TMGI AVP and the MBMS‑Flow‑Identifier AVP to designate
the affected bearer.
Upon reception of a GCS-Notification-Request (GNR), the GSC AS shall reply
with a GCS-Notification-Answer (GNA) command.
## 5.4 BM‑SC selection
To discover the BM‑SC with which to establish the MB2‑C session, the GCS AS
may use:
\- a pre-configured BM‑SC identity
\- Diameter routing
## 5.5 BM‑SC overload control
Upon receiving a request from the GCS AS, if the BM‑SC is in an overload
condition, the BM‑SC may respond to the GCS AS with a GCS-Action-Answer
command containing the Result-Code AVP with the value set to
DIAMETER_TOO_BUSY, see IETF RFC 6733 [27].
The GCS AS may implement a back off timer. When this timer is running, the GCS
AS does not initiate MB2‑C requests. Once the timer expires, the GCS AS may
re-attempt to use the BM‑SC. The algorithm the BM‑SC uses for the back off
timer is out of scope of this 3GPP specification.
## 5.6 Restoration Procedures
### 5.6.1 General
The restoration procedures enable the BM‑SC and GCS AS to detect an MB2‑C path
failure or the restart of the peer node, as specified in TS 23.007 [22].
The BM‑SC and GCS AS shall detect an MB2‑C path failure or the restart of the
peer node as specified in TS 23.007 [22], i.e. either making use of mechanisms
of the Diameter base protocol, or of the Heartbeat procedures and procedures
related to the Restart‑Counter AVP defined in clause 5.6. 2, 5.6.3 and 5.6.4.
The Heartbeat procedure and the procedures related to the Restart‑Counter AVP
are optional to support for both BM‑SC and GCS AS.
NOTE: In deployments with a Diameter Agent between the GCS AS and the BM-SC,
the restoration mechanisms of the Diameter base protocol cannot be used.
The use of the Heartbeat procedure and the Restart‑Counter AVP shall be
negotiated between the BM‑SC and GCS AS using the Supported‑Features AVP upon
contacting the peer node for the first time.
### 5.6.2 Restart Counter
The BM‑SC shall maintain a local restart counter which shall be incremented
monotonically whenever the BM‑SC restarts with loss of previous states. After
the BM‑SC starts (or restarts with loss of previous states), it shall include
the Restart‑Counter AVP indicating the local value of its restart counter in
the first message it sends to any peer GCS AS.
The GCS AS shall store the received restart counter value for each peer BM‑SC
it communicates with. If the new received restart counter value for a peer
BM‑SC is incremented, the BM‑SC has restarted.
The GCS AS shall also maintain a local restart counter which shall be
incremented monotonically whenever the GCS AS restarts with loss of previous
states. After the GCS AS starts (or restarts with loss of previous states), it
shall include the Restart‑Counter AVP indicating the local value of its
restart counter in the first message it sends to any peer BM‑SC.
The BM‑SC shall store the received restart counter value for each peer GCS AS
it communicates with. If the new received restart counter value for a peer GCS
AS is incremented, the GCS AS has restarted
### 5.6.3 GCS AS initiated Heartbeat Procedure
To detect an MB2-C path failure or the outage or restart of a peer BM‑SC, the
GCS AS shall send GARs including the Restart‑Counter AVP indicating the local
value of its restart counter periodically to each peer BM‑SC when no other
signalling is exchanged between those two nodes. The GCS AS shall repeat
sending the GAR one or more times if no GAA is received. The GCS AS shall
consider the MB2-C path to be down if it does not receive a GAA to a
configured number of consecutive GARs
If the BM‑SC receives a GAR including the Restart‑Counter AVP, it shall reply
with a GAA including the Restart‑Counter AVP indicating the local value of its
restart counter.
### 5.6.4 BM-SC initiated Heartbeat Procedure
To detect an MB2-C path failure or the outage or restart of a peer GCS AS, the
BM-SC shall send GNRs including the Restart‑Counter AVP indicating the local
value of its restart counter periodically to each peer GCS AS when no other
signalling is exchanged between those two nodes. The BM‑SC shall repeat
sending the GNR one or more times if no GNA is received. The BM-SC shall
consider the MB2-C path to be down if it does not receive a GNA to a
configured number of consecutive GNRs .
If the GCS AS receives a GNR including the Restart‑Counter AVP, it shall reply
with a GNA including the Restart‑Counter AVP indicating the local value of its
restart counter.
### 5.6.5 GCS AS procedures after detection of BM‑SC Restart
When the GCS AS detects that the the BM‑SC has restarted, the GCS AS:
\- shall assume that all the TMGIs that had been assigned by the restarted BM-
SC have been de-allocated and that all the related MBMS bearers have been
deactivated; and
\- may restore the MBMS delivery.
### 5.6.6 BM‑SC procedures after detection of GCS AS Restart
When the BM‑SC detects that the GCS AS has restarted, the BM-SC:
\- shall deallocate (locally) all the TMGIs that had been assigned to the GCS
AS; and
\- shall stop all the related MBMS bearers.
### 5.6.7 GCS AS procedures upon detection of MB2-C path failure
Upon detecting a non-transient MB2-C path failure, the GCS AS:
\- shall assume that all the TMGIs that had been assigned by the BM-SC have
been de-allocated and that all the related MBMS bearers have been deactivated;
and
\- may restore the MBMS delivery.
### 5.6.8 BM‑SC procedures upon detection of MB2-C path failure
Upon detecting a non-transient MB2-C path failure, the BM-SC shall:
\- deallocate (locally) all the TMGIs that had been assigned to the GCS AS;
and
\- stop all the related MBMS bearers.
# 6 MB2‑C Protocol
## 6.1 Protocol support
### 6.1.1 Use of Diameter base protocol
The Diameter Base ProEvent-Notificationtocol as specified in IETF RFC 6733
[27] shall apply except as modified by the defined support of the methods and
the defined support of the commands and AVPs, result and error codes as
specified in this specification. Unless otherwise specified, the procedures
specified in IETF RFC 6733 [27] (including error handling and unrecognised
information handling) shall be used unmodified. Only commands related to peer-
to-peer connection are re-used from the Diameter Base Protocol, i.e.
Capabilities-Exchange-Request (CER), Capabilities-Exchange-Answer (CEA),
Disconnect-Peer-Request (DPR), Disconnect-Peer-Answer (DPA), Device-Watchdog-
Request (DWR) and Device-Watchdog-Answer (DWA).
With regards to the Diameter protocol defined over the MB2‑C interface, the
BM‑SC shall act as the Diameter server, in the sense that it is the network
element that handles action requests and sends notifications. The GCS AS shall
act as the Diameter client, in the sense that it is the network element
requesting actions and handles notification from the BM‑SC.
A Diameter routing table entry can have a different destination based on the
application identifier of the command. The application identifier stored in
the command header must match the value of any application identifier AVPs in
the command body. Diameter agents (relay, proxy, redirection, translation
agents) should use the application identifier in the command header to route
to a suitable destination.
### 6.1.2 Transport protocol
Diameter messages over the MB2‑C interface shall make use of SCTP (see IETF
RFC 4960 [15]) or TCP (see IETF RFC 791 [11]).
### 6.1.3 Advertising Application Support
The Diameter application identifier assigned to the MB2‑C interface
application is 16777335.
The GCS AS and BM‑SC shall advertise support of the Diameter MB2‑C application
by including the value of the MB2‑C application identifier in the Auth-
Application-Id AVP within the Vendor-Specific-Application-Id grouped AVP of
the CER and CEA commands.
The vendor identifier value of 3GPP (10415) shall be included in the
Supported-Vendor-Id AVP of the CER and CEA commands, and in the Vendor-Id AVP
within the Vendor-Specific-Application-Id grouped AVP of the CER and CEA
commands.
The Vendor-Id AVP included in CER and CEA commands that is not included in the
Vendor-Specific-Application-Id AVPs as described above shall indicate the
manufacturer of the Diameter node as per IETF RFC 6733 [27].
## 6.2 Initialization and maintenance of connection and session
A peer-to-peer connection is a connection between GCS AS and BM‑SC. It has no
associated meaning beyond this link. A MB2‑C peer-to-peer connection may carry
commands associated with multiple TMGIs and/or MBMS bearers.
A MB2‑C Diameter session shall consist of a single request and answer pair.
The MB2‑C Diameter session is terminated after each request and answer pair
interaction. In order to indicate that the session state is not to be
maintained, the Diameter client and server shall include the Auth-Session-
State AVP with the value set to NO_STATE_MAINTAINED (1), in the request and in
the answer messages (see IETF RFC 6733 [27]).
## 6.3 Security on the MB2‑C interface
The security mechanism in Annex N of TS 33.246 [10] shall apply.
## 6.4 MB2‑C specific AVPs
### 6.4.1 General
Table 6.4.1‑1 describes the Diameter AVPs defined for the MB2‑C reference
point, their AVP Code values, types and possible flag values. The Vendor-Id
header of all AVPs defined in the present document shall be set to 3GPP
(10415).
Table 6.4.1‑1: MB2‑C specific Diameter AVPs
+-------+-------+-------+-------+-------+-------+-------+-------+-------+ | | | | | AVP | App | | | | | | | | | Flag | licab | | | | | | | | | rules | ility | | | | | | | | | (Note | (Note | | | | | | | | | 1) | 2) | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | Attr | AVP | C | Value | Must | May | S | Must | | | ibute | Code | lause | Type | | | hould | not | | | Name | | de | | | | not | | | | | | fined | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | BM | 3500 | 6.4.2 | Ad | M,V | P | | | | | SC‑Ad | | | dress | | | | | | | dress | | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | BMSC | 3501 | 6.4.3 | Unsig | M,V | P | | | | | ‑Port | | | ned32 | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | Com | 3524 | 6 | O | V | P | | M | V2X | | mon-T | | .4.26 | ctetS | | | | | Loca | | unnel | | | tring | | | | | lized | | -Endp | | | | | | | | User | | oint- | | | | | | | | Plane | | Ident | | | | | | | | | | ifier | | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | Local | 3518 | 6 | Gr | V | P | | M | V2X | | -M1-I | | .4.20 | ouped | | | | | Loca | | nform | | | | | | | | lized | | ation | | | | | | | | User | | | | | | | | | | Plane | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | Loc | 3519 | 6 | Gr | V | P | | M | V2X | | al-MB | | .4.21 | ouped | | | | | Loca | | 2-U-I | | | | | | | | lized | | nform | | | | | | | | User | | ation | | | | | | | | Plane | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | MB2 | 3517 | 6 | Unsig | M,V | P | | | | | U‑Sec | | .4.19 | ned32 | | | | | | | urity | | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | MB | 3502 | 6.4.4 | Unsig | M,V | P | | | | | MS‑Be | | | ned32 | | | | | | | arer‑ | | | | | | | | | | Event | | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | MBMS‑ | 3503 | 6.4.5 | Gr | M,V | P | | | | | Beare | | | ouped | | | | | | | r‑Eve | | | | | | | | | | nt‑No | | | | | | | | | | tific | | | | | | | | | | ation | | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | MBMS | 3504 | 6.4.6 | Gr | M,V | P | | | | | ‑Bear | | | ouped | | | | | | | er‑Re | | | | | | | | | | quest | | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | MBMS‑ | 3505 | 6.4.7 | Gr | M,V | P | | | | | Beare | | | ouped | | | | | | | r‑Res | | | | | | | | | | ponse | | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | MBM | 3506 | 6.4.8 | Unsig | M,V | P | | | | | S‑Bea | | | ned32 | | | | | | | rer‑R | | | | | | | | | | esult | | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | MBMS | 3520 | 6 | Ad | V | P | | M | V2X | | -eNB- | | .4.22 | dress | | | | | Loca | | IP-Mu | | | | | | | | lized | | ltica | | | | | | | | User | | st-Ad | | | | | | | | Plane | | dress | | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | M | 3521 | 6 | Ad | V | P | | M | V2X | | BMS-e | | .4.23 | dress | | | | | Loca | | NB-IP | | | | | | | | lized | | v6-Mu | | | | | | | | User | | ltica | | | | | | | | Plane | | st-Ad | | | | | | | | | | dress | | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | MB | 3522 | 6 | Ad | V | P | | M | V2X | | MS-GW | | .4.24 | dress | | | | | Loca | | -SSM- | | | | | | | | lized | | IP-Ad | | | | | | | | User | | dress | | | | | | | | Plane | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | MBMS | 3523 | 6 | Ad | V | P | | M | V2X | | -GW-S | | .4.25 | dress | | | | | Loca | | SM-IP | | | | | | | | lized | | v6-Ad | | | | | | | | User | | dress | | | | | | | | Plane | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | MBMS‑ | 3507 | 6.4.9 | Time | M,V | P | | | | | Start | | | | | | | | | | ‑Time | | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | Radio | 3508 | 6 | Unsig | M,V | P | | | | | ‑Freq | | .4.10 | ned32 | | | | | | | uency | | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | TMG | 3509 | 6 | Gr | M,V | P | | | | | I‑All | | .4.11 | ouped | | | | | | | ocati | | | | | | | | | | on‑Re | | | | | | | | | | quest | | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | TMGI | 3510 | 6 | Gr | M,V | P | | | | | ‑Allo | | .4.12 | ouped | | | | | | | catio | | | | | | | | | | n‑Res | | | | | | | | | | ponse | | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | TM | 3511 | 6 | Unsig | M,V | P | | | | | GI‑Al | | .4.13 | ned32 | | | | | | | locat | | | | | | | | | | ion‑R | | | | | | | | | | esult | | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | TMGI‑ | 3512 | 6 | Gr | M,V | P | | | | | Deall | | .4.14 | ouped | | | | | | | ocati | | | | | | | | | | on‑Re | | | | | | | | | | quest | | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | T | 3513 | 6 | Gr | M,V | P | | | | | MGI‑D | | .4.15 | ouped | | | | | | | eallo | | | | | | | | | | catio | | | | | | | | | | n‑Res | | | | | | | | | | ponse | | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | TMGI | 3514 | 6 | Unsig | M,V | P | | | | | ‑Deal | | .4.16 | ned32 | | | | | | | locat | | | | | | | | | | ion‑R | | | | | | | | | | esult | | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | T | 3515 | 6 | Gr | M,V | P | | | | | MGI‑E | | .4.17 | ouped | | | | | | | xpiry | | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | T | 3516 | 6 | Unsig | M,V | P | | | | | MGI‑N | | .4.18 | ned32 | | | | | | | umber | | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | NOTE | | | | | | | | | | 1: | | | | | | | | | | The | | | | | | | | | | AVP | | | | | | | | | | h | | | | | | | | | | eader | | | | | | | | | | bit | | | | | | | | | | de | | | | | | | | | | noted | | | | | | | | | | as | | | | | | | | | | \ | | | | | | | | | | 'M\', | | | | | | | | | | indi | | | | | | | | | | cates | | | | | | | | | | wh | | | | | | | | | | ether | | | | | | | | | | su | | | | | | | | | | pport | | | | | | | | | | of | | | | | | | | | | the | | | | | | | | | | AVP | | | | | | | | | | is | | | | | | | | | | requ | | | | | | | | | | ired. | | | | | | | | | | The | | | | | | | | | | AVP | | | | | | | | | | h | | | | | | | | | | eader | | | | | | | | | | bit | | | | | | | | | | de | | | | | | | | | | noted | | | | | | | | | | as | | | | | | | | | | \ | | | | | | | | | | 'V\', | | | | | | | | | | indi | | | | | | | | | | cates | | | | | | | | | | wh | | | | | | | | | | ether | | | | | | | | | | the | | | | | | | | | | opt | | | | | | | | | | ional | | | | | | | | | | Vend | | | | | | | | | | or-ID | | | | | | | | | | field | | | | | | | | | | is | | | | | | | | | | pr | | | | | | | | | | esent | | | | | | | | | | in | | | | | | | | | | the | | | | | | | | | | AVP | | | | | | | | | | he | | | | | | | | | | ader. | | | | | | | | | | For | | | | | | | | | | fu | | | | | | | | | | rther | | | | | | | | | | det | | | | | | | | | | ails, | | | | | | | | | | see | | | | | | | | | | I | | | | | | | | | | ETF R | | | | | | | | | | FC 67 | | | | | | | | | | 33 [ | | | | | | | | | | 27]. | | | | | | | | | | | | | | | | | | | | NOTE | | | | | | | | | | 2: | | | | | | | | | | AVPs | | | | | | | | | | m | | | | | | | | | | arked | | | | | | | | | | with | | | | | | | | | | a | | | | | | | | | | supp | | | | | | | | | | orted | | | | | | | | | | fe | | | | | | | | | | ature | | | | | | | | | | are | | | | | | | | | | appli | | | | | | | | | | cable | | | | | | | | | | as | | | | | | | | | | desc | | | | | | | | | | ribed | | | | | | | | | | in | | | | | | | | | | cla | | | | | | | | | | use 6 | | | | | | | | | | .5.2. | | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+
For all AVPs which contain bit masks and are of the type Unsigned32 or
Unsigned64, bit 0 shall be the least significant bit. For example, to get the
value of bit 0, a bit mask of 0x0001 should be used.
Every AVP of type Grouped is defined by means of the ABNF syntax in IETF RFC
2234 [13] and according to the rules in IETF RFC 6733 [27].
### 6.4.2 BMSC‑Address AVP
The BMSC‑Address AVP (AVP code 3500) is of type Address and indicates the IP
address where the BM‑SC wants to receive user data via the MB2‑U interface.
### 6.4.3 BMSC‑Port AVP
The BMSC‑Port AVP (AVP code 3501) is of type Unsigned32 and indicates the port
where the BM‑SC wants to receive user data via the MB2‑U interface.
### 6.4.4 MBMS‑ Bearer‑Event AVP
The MBMS‑BearerEvent AVP (AVP code 3502) is of type Unsigned32 and it shall
contain a bit mask with values as defined table 6.4.4-1. Several bits may be
set in combination.
Table 6.4.4-1: MBMS‑Bearer‑Event AVP
* * *
Bit Name Description 0 Bearer Terminated The MBMS bearer was terminated.
* * *
### 6.4.5 MBMS‑Bearer‑Event‑Notification AVP
The MBMS‑Bearer‑Event-Notification AVP (AVP code 3503) is of type Grouped. It
is used by the BM‑SC to notify the GCS AS about an MBMS bearer event.
AVP Format:
MBMS-Bearer-Event-Notification::= \
{ TMGI}
{ MBMS-Flow-Identifier }
{ MBMS-Bearer-Event }
*[ AVP ]
### 6.4.6 MBMS‑Bearer‑Request AVP
The MBMS‑Bearer‑Request AVP (AVP code 3504) is of type Grouped. It is used by
the GCS AS to request the activation, modification, or deactivation of an MBMS
bearer.
The MBMS‑StartStop‑Indication AVP shall indicate if an activation,
modification, or deactivation of an MBMS bearer is requested.
For the activation of an MBMS bearer, the TMGI AVP, the MBMS‑Start‑Time AVP
and the MB2U‑Security AVP may be included, and the QoS‑Information AVP shall
be included. If the MBMS Cell List feature is supported, the GCS AS shall also
include the MBMS-Cell-List AVP or the MBMS‑Service‑Area AVP, or both. If the
MBMS Cell List feature is not supported, the GCS AS shall also include the
MBMS‑Service‑Area AVP. If the V2X Localized User Plane feature is supported,
the GCS AS may also include the Local-M1-Information AVP and the Local-
MB2-U-Information AVP.
For the modification of an MBMS bearer, the TMGI AVP, and the
MBMS‑Flow‑Identifier AVP shall be included and the MBMS‑Service‑Area AVP, the
QoS‑Information AVP and / or, if the MBMS Cell List feature is supported, the
MBMS-Cell-List may be included. However, at least one of the MBMS‑Service‑Area
AVP, the MBMS-Cell-List AVP and the QoS‑Information AVP shall be included. The
QoS‑Information AVP shall only be used to modify the priority and pre-emption
characteristics, and shall otherwise indicate the same values that were
supplied when the activation of the MBMS bearer was requested.
For the deactivation of an MBMS bearer, the TMGI AVP and the
MBMS‑Flow‑Identifier AVP shall be included.
AVP Format:
MBMS-Bearer-Request::= \
{ MBMS-StartStop-Indication }
[ TMGI]
[ MBMS-Flow-Identifier ]
[ QoS-Information ]
[ MBMS-Service-Area ]
[ MBMS-Start-Time ]
[ MB2U-Security ]
[ MBMS-Cell-List ]
[ Local-M1-Information ]
[ Local-MB2-U-Information ]
*[ AVP ]
### 6.4.7 MBMS‑Bearer‑Response AVP
The MBMS‑Bearer‑Response AVP (AVP code 3505) is of type Grouped. It is used by
the BM‑SC to inform the GCS AS about the result of a MBMS bearer request.
For a successful MBMS bearer activation, the TMGI AVP, the
MBMS‑Flow‑Identifier AVP, the MBMS‑Session‑Duration AVP, the BMSC‑Address AVP
and the BMSC‑Port AVP shall be included, and Radio‑Frequency AVP(s) and the
MB2U‑Security AVP may be included.
For a successful MBMS bearer modification or deactivation, the TMGI AVP and
the MBMS‑Flow‑Identifier AVP shall be included.
For an unsuccessful MBMS bearer request, the MBMS-Bearer-Result AVP shall be
included.
AVP Format:
MBMS-Bearer-Response::= \
[ TMGI]
[ MBMS-Flow-Identifier ]
[ MBMS-Session-Duration ]
[ MBMS-Bearer-Result ]
[ BMSC-Address ]
[ BMSC-Port ]
[ MB2U-Security ]
*[ Radio-Frequency ]
*[ AVP ]
### 6.4.8 MBMS‑Bearer‑Result AVP
The MBMS‑Bearer‑Result AVP (AVP code 3506) is of type Unsigned32 and it shall
contain a bit mask with values as defined table 6.4.8-1. Several bits
indicating errors may be set in combination.
Table 6.4.8-1: MBMS‑ Bearer‑Result AVP
* * *
Bit Name Description 0 Success The requested bearer activation, modification
or deactivation was successful. 1 Authorization rejected The requested bearer
activation, modification or deactivation failed because the BM‑SC did not
authorize it. 2 Resources exceeded The requested bearer activation,
modification or deactivation failed because the BM‑SC could not provide
sufficient resources. 3 Unknown TMGI The requested bearer activation,
modification or deactivation failed because the BM‑SC did not know the
requested TMGI or the TMGI expired. 4 TMGI not in use The requested bearer
modification or deactivation failed because the requested TMGI was not related
to an active MBMS bearer. 5 Overlapping MBMS‑Service‑Area The requested bearer
modification failed because the requested Service area was overlapping with a
service area already in use for the requested TMGI. 6 Unknown Flow Identifier
The requested bearer modification or deactivation failed because the BM‑SC did
not know the requested Flow Identifier. 7 QoS Authorization Rejected The
requested bearer activation or modification failed because the BM‑SC did not
authorize the requested QoS. 8 Unknown MBMS‑Service‑Area The requested bearer
activation or modification failed because the BM‑SC did not know the requested
MBMS‑Service‑Area 9 MBMS‑Service‑Area Authorization Rejected The requested
bearer activation or modification failed because the BM‑SC did not authorize
the requested MBMS‑Service‑Area 10 MBMS‑Start‑Time The requested bearer
activation failed because the MBMS‑Start‑Time contained an inappropriate
value. 11 Invalid AVP combination The requested bearer activation,
modification or deactivation failed because the provided AVP combination
within the corresponding MBMS‑Bearer‑Request AVP was not allowed (e.g. because
some mandatory AVPs for a given MBMS‑StartStop‑Indication value were missing).
12 System error The requested procedure (e.g. bearer activation/modification)
failed due to internal system error in the BM-SC.
* * *
### 6.4.9 MBMS‑Start‑Time AVP
The MBMS‑Start‑Time AVP (AVP code 3507) is of type Time and indicates the
requested time when an MBMS bearer shall be allocated.
### 6.4.10 Radio-Frequency AVP
The Radio-Frequency AVP (AVP code 3508) is of type Unsigned32. It is used by
the BM‑SC to indicate radio frequencies, as defined in TS 26.346 [5], as MBMS
bearer related configuration information to the GCS AS. The coding of this AVP
shall be the same as defined for the _radiofrequency_ child element of the
_infoBinding_ in TS 26.346 [5].
### 6.4.11 TMGI‑Allocation‑Request AVP
The TMGI‑Allocation‑Request AVP (AVP code 3509) is of type Grouped. It is used
by the GCS AS to request the allocation, or timer refresh of TMGIs.
The TMGI‑Number shall indicate the number of newly requested TMGI, excluding
any TMGI where a timer refresh is requested. Any TMGIs where a timer refresh
is requested shall be included in TMGI AVPs.
AVP Format:
TMGI-Allocation-Request::= \
{ TMGI-Number }
*[ TMGI ]
*[ AVP ]
### 6.4.12 TMGI‑Allocation‑Response AVP
The TMGI‑Allocation‑Response AVP (AVP code 3510) is of type Grouped. It is
used by the BM‑SC to inform the GCS AS about the result of a TMGI allocation
request.
For a successful TMGI allocation, TMGI AVPs and the MBMS‑Session‑Duration AVP
shall be included. The TMGI AVPs shall contain all successfully allocated or
refreshed TMGIs and the MBMS‑Session‑Duration AVP shall indicate their common
new expiration time.
For an unsuccessful TMGI allocation request, the TMGI‑Allocation‑Result AVP
shall be included.
For a partial success, if some, but not all of the requested TMGIs are
allocated or timers refreshed, TMGI AVPs, the MBMS‑Session‑Duration AVP and
the TMGI‑Allocation‑Result AVP shall be included. The TMGI AVPs shall contain
all successfully allocated or refreshed TMGIs and the MBMS‑Session‑Duration
AVP shall indicate their common new expiration time. The
TMGI‑Allocation‑Result AVP shall indicate both success and the reason(s) why
the allocation or refresh failed for some TMGIs.
AVP Format:
TMGI-Allocation-Response::= \
*[ TMGI ]
[ MBMS-Session-Duration ]
[ TMGI-Allocation-Result ]
*[ AVP ]
### 6.4.13 TMGI‑Allocation‑Result AVP
The TMGI‑Allocation‑Result AVP (AVP code 3511) is of type Unsigned32 and it
shall contain a bit mask with values as defined table 6.4.13-1. Several bits
indicating errors may be set in combination.
Table 6.4.13-1: TMGI‑Allocation‑Result AVP
* * *
Bit Name Description 0 Success The requested TMGI allocation was successful. 1
Authorization rejected The requested TMGI allocation failed because the BM‑SC
did not authorize it. 2 Resources exceeded The requested TMGI allocation
failed because the BM‑SC could not provide sufficient resources. 3 Unknown
TMGI The requested TMGI timer refresh failed because the BM‑SC did not know
the requested TMGI, e.g. because the TMGI already expired. 4 Too many TMGIs
requested The requested TMGI allocation or timer refresh failed because the
maximum number of allowed TMGIs for the GCS AS was exceeded. 5 System error
The requested TMGI allocation failed due to internal system error in the BM-
SC.
* * *
### 6.4.14 TMGI‑Deallocation‑Request AVP
The TMGI‑Deallocation‑Request AVP (AVP code 3512) is of type Grouped. It is
used by the GCS AS to request the deallocation of TMGIs.
AVP Format:
TMGI-Deallocation-Request::= \
*[ TMGI ]
*[ AVP ]
### 6.4.15 TMGI‑Deallocation‑Response AVP
The TMGI‑Deallocation‑Response AVP (AVP code 3513) is of type Grouped. It is
used by the BM‑SC to inform the GCS AS about the results of a TMGI
deallocation request for a given TMGI.
The TMGI AVP shall indicate the TMGI.
For an unsuccessful TMGI deallocation request, the TMGI‑Deallocation‑Result
AVP shall be included.
AVP Format:
TMGI-Deallocation-Response::= \
{ TMGI }
[ TMGI-Deallocation-Result ]
*[ AVP ]
### 6.4.16 TMGI‑Deallocation‑Result AVP
The TMGI‑Deallocation‑Result AVP (AVP code 3514) is of type Unsigned32 and it
shall contain a bit mask with values as defined table 6.4.16-1. Several bits
indicating errors may be set in combination.
Table 6.4.16-1: TMGI‑Deallocation‑Result AVP
* * *
Bit Name Description 0 Success The requested TMGI deallocation was successful.
1 Authorization rejected The requested TMGI deallocation failed because the
BM‑SC did not authorize it. 2 Unknown TMGI The requested TMGI deallocation
failed because the BM‑SC did not know the requested TMGI, e.g. because the
TMGI already expired. 3 System error The requested TMGI deallocation failed
due to internal system error in the BM-SC.
* * *
### 6.4.17 TMGI‑Expiry AVP
The TMGI‑Expiry AVP (AVP code 3515) is of type Grouped. It is used by the
BM‑SC to notify the GCS AS about the expiry of TMGIs.
The TMGI AVPs shall include all TMGIs that have expired.
AVP Format:
TMGI-Expiry::= \
*{ TMGI }
*[ AVP ]
### 6.4.18 TMGI‑Number AVP
The TMGI‑Number AVP (AVP code 3516) is of type Unsigned32 and it indicates a
number of requested TMGIs.
### 6.4.19 MB2U-Security AVP
The MB2U‑Security AVP (AVP code 3517) is of type Unsigned32. It is used to
indicate whether the usage of a security protocol for the MB2‑U interface is
requested (when send by the GCS AS) or decided (when send by the BM‑SC).
The following values are defined in this specification:
0 (No security):
This value shall be used to indicate that the usage of no security protocol
for the MB2‑U interface is requested or decided. \"0\" is the default value
that shall be used if the AVP is omitted.
1 (Security):
This value shall be used to indicate that the usage of a security protocol for
the MB2 U interface is requested or decided.
### 6.4.20 Local-M1-Information AVP
The Local-M1-Information AVP (AVP code 3518) is of type Grouped. It is used to
indicates the M1 interface information between the eNB and MBMS GW for local
MBMS based MBMS data delivery.
AVP Format:
Local-M1-Information::= \
[ MBMS-eNB-IP-Multicast-Address ]
[ MBMS-eNB-IPv6-Multicast-Address ]
[ MBMS-GW-SSM-IP-Address ]
[ MBMS-GW-SSM-IPv6-Address ]
[ Common-Tunnel-Endpoint-Identifier ]
### 6.4.21 Local-MB2-U-Information AVP
The Local-MB2-U-Information AVP (AVP code 3519) is of type Grouped. It is used
to indicates the MB2-U interface information for local MBMS based MBMS data
delivery.
AVP Format:
Local-MB2-U-Information::= \
[ BMSC-Address ]
[ BMSC-Port ]
### 6.4.22 MBMS-eNB-IP-Multicast-Address AVP
The MBMS-eNB-IP-Multicast-Address AVP (AVP code 3520) is of type Address and
contains the M1 (transport) plane IPv4 destination multicast address used by
MBMS-GW for IP multicast encapsulation of user plane IP multicast datagrams.
### 6.4.23 MBMS-eNB-IPv6-Multicast-Address AVP
The MBMS-eNB-IPv6-Multicast-Address AVP (AVP code 3521) is of type Address and
contains the M1 (transport) plane IPv6 prefix of destination multicast address
used by MBMS-GW for IP multicast encapsulation of user plane IP multicast
datagrams.
### 6.4.24 MBMS-GW-SSM-IP-Address AVP
The MBMS-GW-SSM-IP-Address AVP (AVP code 3522) is of type Address and contains
the IPv4 address of the MBMS-GW for Source Specific Multicasting. This AVP is
used for an IPv4 only or dual stack MBMS-GW.
### 6.4.25 MBMS-GW-SSM-IPv6-Address AVP
The MBMS-GW-SSM-IPv6-Address AVP (AVP code 3523) is of type Address and
contains the IPv6 address of the MBMS-GW for Source Specific Multicasting.
This AVP is used for an dual stack MBMS-GW.
### 6.4.26 Common-Tunnel-Endpoint-Identifier AVP
The Common-Tunnel-Endpoint-Identifier AVP (AVP code 3524) is of type
OctetString, and it indicates the common tunnel endpoint identifier of the
MBMS GW for the user plane.
## 6.5 MB2‑C re-used AVPs
### 6.5.1 General
Table 6.5.1‑1 lists the Diameter AVPs re-used by the MB2‑C reference point
from existing Diameter Applications, reference to their respective
specifications and a short description of their usage within the MB2‑C
reference point. Other AVPs from existing Diameter Applications, except for
the AVPs from Diameter base protocol, do not need to be supported. The AVPs
from Diameter base protocol are not included in table 6.5.1‑1, but they are
re-used for the MB2‑C reference point. Unless otherwise stated, re-used AVPs
shall maintain their \'M\', \'P\' and \'V\' flag settings.
Table 6.5.1‑1: MB2‑C re-used Diameter AVPs
+----------------+----------------+----------------+----------------+ | Attribute Name | Reference | Description | Applicability | | | | | (Note 2) | +----------------+----------------+----------------+----------------+ | DRMP | IETF R | Allows the | | | | FC 7944 [25] | BM-SC and | | | | | GCS AS to | | | | | indicate the | | | | | relative | | | | | priority of | | | | | Diameter | | | | | messages. | | +----------------+----------------+----------------+----------------+ | Load | IETF R | The AVP used | | | | FC 8583 [26] | to convey load | | | | | information | | | | | between | | | | | Diameter | | | | | nodes. This | | | | | AVP and all | | | | | AVPs within | | | | | this grouped | | | | | AVP shall have | | | | | the 'M' bit | | | | | cleared. | | +----------------+----------------+----------------+----------------+ | MBMS‑F | T | Represents a | | | low‑Identifier | S 29.061 [6] | location | | | | | dependent | | | | | subflow of an | | | | | MBMS bearer | | | | | service. | | +----------------+----------------+----------------+----------------+ | MBMS-Se | T | Indicates the | | | ssion-Duration | S 29.061 [6] | duration of | | | | | the TMGI | | | | | expiration | | | | | time. (NOTE 1) | | +----------------+----------------+----------------+----------------+ | TMGI | T | Contains the | | | | S 29.061 [6] | Temporary | | | | | Mobile Group | | | | | Identity | | | | | allocated to a | | | | | particular | | | | | MBMS bearer | | | | | service | | +----------------+----------------+----------------+----------------+ | MBM | T | Indicates the | | | S‑Service‑Area | S 29.061 [6] | area over | | | | | which the MBMS | | | | | bearer service | | | | | has to be | | | | | distributed. | | +----------------+----------------+----------------+----------------+ | MBMS‑StartS | T | Indicates it | | | top‑Indication | S 29.061 [6] | the | | | | | allocation, | | | | | deallocation | | | | | or | | | | | modification | | | | | of an MBMS | | | | | bearer is | | | | | requested. | | +----------------+----------------+----------------+----------------+ | Q | T | Contains the | | | oS‑Information | S 29.212 [7] | QoS that is | | | | | required for | | | | | the MBMS | | | | | bearer. | | | | | | | | | | Only the | | | | | QoS-Cl | | | | | ass-Identifier | | | | | AVP, | | | | | Max-Requested | | | | | -Bandwidth-DL, | | | | | Guarant | | | | | eed-Bitrate-DL | | | | | AVP and | | | | | A | | | | | llocation-Rete | | | | | ntion-Priority | | | | | AVP within the | | | | | Q | | | | | oS-Information | | | | | AVP are | | | | | applicable. | | +----------------+----------------+----------------+----------------+ | Supp | TS | If present, | | | orted‑Features | 29.229 [23] | this AVP | | | | | informs the | | | | | destination | | | | | host about the | | | | | features that | | | | | the origin | | | | | host requires | | | | | to | | | | | successfully | | | | | complete this | | | | | command | | | | | exchange. | | +----------------+----------------+----------------+----------------+ | R | T | This AVP | Heartbeat | | estart-Counter | S 29.061 [6] | contains a | | | | | monotonically | | | | | increasing | | | | | value that is | | | | | advanced | | | | | whenever the | | | | | sending entity | | | | | restarts with | | | | | loss of | | | | | previous | | | | | state, for | | | | | example upon | | | | | restart. The | | | | | R | | | | | estart-Counter | | | | | AVP may be | | | | | included in | | | | | any Diameter | | | | | message over | | | | | the MB2‑C | | | | | reference | | | | | point, | | | | | including | | | | | CER/CEA | | | | | defined in | | | | | IETF RF | | | | | C 6733 [27]. | | +----------------+----------------+----------------+----------------+ | MBMS-Cell-List | T | This AVP | MBMS Cell List | | | S 29.061 [6] | contains the | | | | | list of cells | | | | | used by | | | | | E-UTRAN to | | | | | determine the | | | | | set of radio | | | | | resources to | | | | | be used for | | | | | the broadcast. | | +----------------+----------------+----------------+----------------+ | NOTE 1: This | | | | | re-used AVP | | | | | has a | | | | | different | | | | | meaning as | | | | | compared to | | | | | the meaning in | | | | | SGmb | | | | | interface. | | | | | | | | | | NOTE 2: AVPs | | | | | marked with a | | | | | supported | | | | | feature are | | | | | applicable as | | | | | described in | | | | | clause 6.5.2. | | | | +----------------+----------------+----------------+----------------+
### 6.5.2 Supported-Feature-List AVP
#### 6.5.2.1 Use of the Supported-Features AVP
When new functionality is introduced on the MB2‑C reference point, it should
be defined as optional. If backwards incompatible changes cannot be avoided,
the new functionality shall be introduced as a new feature and support
advertised with the Supported-Features AVP. Unless otherwise stated, the use
of the Supported-Features AVP on the MB2-C reference point shall be compliant
with the usage of the Supported-Features AVP on the Cx reference point i.e.
with the procedures for the dynamic discovery of supported features as defined
in clause 7.2 of TS 29.229 [23].
When extending the application by adding new AVPs for a feature, the new AVPs
shall have the M bit cleared and the AVP shall not be defined mandatory in the
command ABNF.
As defined in TS 29.229 [23], the Supported-Features AVP is of type grouped
and contains the Vendor-Id, Feature-List-ID and Feature-List AVPs. On the all
reference points as specified in this specification, the Supported-Features
AVP is used to identify features that have been defined by 3GPP and hence, for
features defined in this document, the Vendor-Id AVP shall contain the vendor
ID of 3GPP (10415). If there are multiple feature lists defined for the
reference point, the Feature-List-ID AVP shall differentiate those lists from
one another. One instance of Supported-Features AVP is needed per Feature-
List-ID.
Every GAR shall include the features supported by the GCS AS within Supported-
Features AVP(s) with the \'M\' bit cleared. Every GAA shall include the
features supported by the BM-SC within Supported-Features AVP(s) with the
\'M\' bit cleared.
The Table 6.5.2.2-1 defines the features applicable to the MB2‑C reference
point for the feature list with a Feature-List-ID of 1.
#### 6.5.2.2 Supported-Feature-List AVP for the MB2-C application
The syntax of this AVP is defined in TS 29.229 [23].
For the MB2‑C application, the meaning of the bits shall be as defined in
table 6.5.2.2‑1 for the Supported-Feature-List-ID of 1.
Table 6.5.2.2‑1: Features of Feature-List-ID 1 used for MB2‑C application
+----------------+----------------+--------------+----------------+ | Feature bit | Feature | M/O (NOTE 3) | Description\ | | (NOTE 1) | (NOTE 2) | | (NOTE 4) | +----------------+----------------+--------------+----------------+ | 0 | Heartbeat | O | This feature | | | | | indicates the | | | | | support of the | | | | | Restoration | | | | | functionality | | | | | related | | | | | Heartbeat | | | | | procedures and | | | | | procedures for | | | | | the | | | | | R | | | | | estart‑Counter | | | | | AVP defined in | | | | | clause 5.6.2, | | | | | 5.6.3 and | | | | | 5.6.4. | +----------------+----------------+--------------+----------------+ | 1 | MBMS Cell List | M | This feature | | | | | indicates the | | | | | support of | | | | | providing a | | | | | MBMS-Cell-List | | | | | AVP. | +----------------+----------------+--------------+----------------+ | 2 | V2X Localized | O | This feature | | | User Plane | | inficates the | | | | | support of | | | | | local MBMS | | | | | based MBMS | | | | | data delivery | | | | | for V2X | | | | | services (see | | | | | 3GPP TS | | | | | 23.285 [28] | | | | | sub | | | | | clause 5.4.2.2 | | | | | and | | | | | Annex B.3). | +----------------+----------------+--------------+----------------+ | NOTE 1: | | | | | Feature bit: | | | | | The order | | | | | number of the | | | | | bit within the | | | | | Supp | | | | | orted-Features | | | | | AVP, e.g. | | | | | \"0\". | | | | | | | | | | NOTE 2: | | | | | Feature: A | | | | | short name | | | | | that can be | | | | | used to refer | | | | | to the bit and | | | | | to the | | | | | feature, e.g. | | | | | \"\". | | | | | | | | | | NOTE 3: M/O: | | | | | Defines if the | | | | | implementation | | | | | of the feature | | | | | is mandatory | | | | | (\"M\") or | | | | | optional | | | | | (\"O\"). | | | | | | | | | | NOTE 4: | | | | | Description: A | | | | | clear textual | | | | | description of | | | | | the feature. | | | | +----------------+----------------+--------------+----------------+
## 6.6 MB2‑C Messages
### 6.6.1 Command-Code Values
This clause defines the Command-Code values for the MB2‑C interface
application as allocated by IANA from the vendor-specific namespace defined in
IETF RFC 5719 [16]. Every command is defined by means of the ABNF syntax in
IETF RFC 2234 [13], and according to the rules in IETF RFC 6733 [27].
The following Command Codes are defined in this specification:
Table 6.6.1-1: Command-Code values for MB2‑C
* * *
Command-Name Abbreviation Code Section GCS-Action-Request GAR 8388662 6.6.2
GCS-Action-Answer GAA 8388662 6.6.3 GCS-Notification-Request GNR 8388663 6.6.4
GCS-Notification-Answer GNA 8388663 6.6.5
* * *
For the commands defined in this specification and reused commands, the
Application-ID field shall be set to 16777335.
### 6.6.2 GCS-Action-Request (GAR) command
The GAR command, indicated by the Command-Code field set to 8388662 and the
\'R\' bit set in the Command Flags field, is sent by the GCS AS to the BM‑SC
as part of the MBMS bearer activation, modification, or deactivation
procedure, or as part of the TMGI allocation or deallocation procedure.
Message Format:
\ ::= \
\
[ DRMP ]
{ Auth-Application-Id }
{ Auth-Session-State }
{ Origin-Host }
{ Origin-Realm }
{ Destination-Realm }
[ Destination-Host ]
[ Origin-State-Id ]
*[ Proxy-Info ]
*[ Route-Record ]
*{ Supported-Features }
**[** TMGI-Allocation-Request **]**
**[** TMGI-Deallocation-Request **]**
*[ MBMS-Bearer-Request ]
[ Restart-Counter ]
*[ AVP ]
### 6.6.3 GCS-Action-Answer (GAA) command
The GAA command, indicated by the Command-Code field set to 8388662 and the
\'R\' bit cleared in the Command Flags field, is sent by the BM‑SC to the GCS
AS as part of the MBMS bearer activation, modification, or deactivation
procedure, or as part of the TMGI allocation or deallocation procedure.
Message Format:
\ ::= \
\
[ DRMP ]
{ Auth-Application-Id }
{ Auth-Session-State }
{ Origin-Host }
{ Origin-Realm }
[ Result-Code ]
[ Experimental-Result ]
[ Error-Message ]
[ Error-Reporting-Host ]
[ Failed-AVP ]
[ Origin-State-Id ]
*[ Redirect-Host ]
[ Redirect-Host-Usage ]
[ Redirect-Max-Cache-Time ]
*[ Proxy-Info ]
*{ Supported-Features }
**[** TMGI-Allocation-Response **]**
* **[** TMGI-Deallocation-Response **]**
*[ MBMS-Bearer-Response ]
[ Restart-Counter ]
*[ Load ]
*[ AVP ]
### 6.6.4 GCS-Notification-Request (GNR) command
The GNR command, indicated by the Command-Code field set to 8388663 and the
\'R\' bit set in the Command Flags field, is sent by the BM‑SC to the GCS AS
as part of the MBMS Bearer Status Indication procedure.
Message Format:
\ ::= \
\
[ DRMP ]
{ Auth-Application-Id }
{ Auth-Session-State }
{ Origin-Host }
{ Origin-Realm }
{ Destination-Realm }
{ Destination-Host }
[ Origin-State-Id ]
*[ Proxy-Info ]
*[ Route-Record ]
[ TMGI-Expiry ]
*[ MBMS-Bearer-Event-Notification ]
[ Restart-Counter ]
*[ AVP ]
### 6.6.5 GCS-Notification-Answer (GNA) command
The GNA command, indicated by the Command-Code field set to 8388663 and the
\'R\' bit cleared in the Command Flags field, is sent by the GCS AS to the
BM‑SC as part of the MBMS Bearer Status Indication procedure.
Message Format:
\ ::= \
\
[ DRMP ]
{ Auth-Application-Id }
{ Auth-Session-State }
{ Origin-Host }
{ Origin-Realm }
[ Result-Code ]
[ Experimental-Result ]
[ Origin-State-Id ]
[ Error-Message ]
[ Error-Reporting-Host ]
*[ Redirect-Host ]
[ Redirect-Host-Usage ]
[ Redirect-Max-Cache-Time ]
[ Failed-AVP ]
*[ Proxy-Info ]
[ Restart-Counter ]
*[ AVP ]
# 7 MB2‑U Protocol
## 7.1 Protocol Stack
Figure 7.1-1: The user plane protocol stack without security protocols on the
MB2-U reference point and in the EPC
Figure 7.1‑1 depicts the MB2‑U protocol stack without security protocols. The
stack shall include:
\- User plane data, for instance an IP layer and UDP layer. The user plane
data are transparently transported between the GCS AS and the UE. The BM‑SC
shall forward these protocol layers transparently.
NOTE: The user plane data can contain data related to several services, which
are transported in the same MBMS bearer. The multiplexing protocol is
transparent to the BM-SC.
\- UDP according to IETF RFC 768 [12]. UDP shall be terminated at the GCS AS
and BM‑SC.
\- IP transported by lower layers L1 and L2. These layers shall be terminated
at the GCS AS and BM‑SC.
Figure 7.1‑1 also depicts the SGi-mb protocol stack defined in TS 29.061 [6]
and the M1 protocol stack as defined in TS 29.274 [8] and TS 29.281 [9] for
informational purposes.
The security solutions for the MB2‑U reference point in Annex N.3 of TS 33.246
[10] shall apply. The MB2‑U protocol stack is augmented depending on the
selected security protocol:
\- If DTLS (IETF RFC 6347 [21]) is used, it resides in the MB2‑U protocol
stack between UDP and the user plane data as shown on Figure 7.1‑2.
\- If IPSec is used without UDP encapsulation for NAT traversal, IKE (IETF RFC
5996 [17]), is transported on top of UDP during the security association
establishment, and ESP (IETF RFC 4303 [20]), resides in the MB2‑U protocol
stack between IP and UDP, as shown on Figure 7.1‑3.
\- If IPSec is used with possible UDP encapsulation for NAT traversal, IKE
(IETF RFC 5996 [17]), is transported on top of UDP during the security
association establishment. IKE is used according to IETF RFC 3947 [18] to
negotiate if UDP encapsulating of ESP is used for NAT-Traversal. If UDP
encapsulating of ESP ( IETF RFC 3948 [19]), is used, a lower IP layer, a lower
UDP layer and ESP reside in the MB2‑U protocol stack between L1/L2 and the IP
layer shown in Figure 7.1‑1; see Figure 7.1‑4. Otherwise, ESP (IETF RFC 4303
[20]), resides in the MB2‑U protocol stack between IP and UDP.
Figure 7.1-2: MB2-U Protocol stack with DTLS Security
Figure 7.1-3: MB2-U Protocol stack with IPSec Security without UDP
encapsulation
Figure 7.1-4: MB2-U Protocol stack with IPSec Security with UDP encapsulation
## 7.2 Procedures
When receiving an MBMS bearer allocation request via the MB2‑C reference
point, the BM‑SC shall select an own IP address to receive user plane data
from the GCS AS sending the request. The BM‑SC shall also allocate a value for
the UDP port that is unique on the selected IP address for the MBMS bearer to
be activated. The BM‑SC shall decide whether to use MB2‑U Security. The BM‑SC
shall send the IP address (within the BMSC‑Address AVP), the UDP port value
(within the BMSC‑Port AVP), and, if MB2‑U Security is applied, a request to
use user plane security (within the MB2U‑Security AVP), in the response to the
MBMS bearer allocation request via the MB2‑C reference point to the GCS AS.
If security was requested by the BM‑SC, the GCS AS shall either establish a
new security association or reuse an existing security association towards the
BM‑SC. The security protocol (DTLS or IKE/IPSec) to be used over MB2‑U needs
to be configured in the GCS AS, possibly dependent on BM‑SC and/or target
network.
For IPSec, the IP address shall also apply to the transport of IKE.
NOTE 1: Well-known UDP ports are used for IKE.
For UDP encapsulation of ESP, IETF RFC 3948 [19], the IP address shall apply
both to the lower IP layer and the upper IP layer layer shown in Figure 7.1-4.
The UDP port shall apply to the upper IP layer layer shown in Figure 7.1-4.
NOTE 2: A well-known UDP port for ESP is used in the lower layer.
The BM‑SC shall then transparently forward any user plane data within UDP
packets, which are received over the MB2‑U reference point at the allocated
UDP port on the selected IP address, to the corresponding MBMS bearer at the
SGi-mb interface. The BM‑SC shall continue forwarding received payload until
the corresponding MBMS Bearer is deallocated.
When receiving an MBMS bearer allocation response via the MB2‑C reference
point, the GCS AS shall store the contained IP address and UDP port and may
send user plane data for the corresponding MBMS bearer until the MBMS Bearer
is deallocated.
NOTE 3: The GCS AS will be informed about the MBMS bearer deallocation by
MB2‑C procedures defined in clause 6.
To send user plane data towards the MBMS bearer, the GCS AS shall encapsulate
them in UDP; it shall use the UDP port signalled by the BM‑SC as destination
UDP port, and it shall send the resulting packets towards the IP address
signalled by the BM‑SC.
###### ## Annex A (informative): Call Flows
# A.1 TMGI Management
## A.1.1 TMGI Allocation Procedure
The TMGI allocation procedure is used by the GCS AS to request TMGI(s). This
procedure may also be used to renew the expiration time for already allocated
TMGI(s).
Figure A.1.1‑1: TMGI Allocation Procedure
1\. If the GCS AS needs to request from the BM‑SC the allocation of one or
more TMGIs, the GCS AS shall send a Diameter GAR command including the
parameters as defined in clause 5.2.1.
2\. The BM‑SC determines whether the GCS AS is authorized to receive the TMGIs
and allocates a set of TMGIs. The BM‑SC determines an expiration time for the
TMGIs. If a list of TMGIs has been received in the previous Diameter GAR
command, the BM‑SC also determines whether the TMGIs are allocated to the
requesting GCS AS and if yes, whether the expiration time for those TMGIs can
be set to the new expiration time.
3\. The BM‑SC send a Diameter GAA command including the parameters as defined
in clause 5.2.1.
## A.1.2 TMGI Deallocation Procedure
The TMGI Deallocation procedure is used by the GCS AS to request the BM‑SC to
immediately release TMGI(s), irrespective of their expiration time(s).
Figure A.1.2‑1: TMGI Deallocation Procedure
1\. If the GCS AS decides that one or more allocated TMGIs are no longer
needed, the GCS AS sends a Diameter GAR command including the parameters as
defined in clause 5.2.2.
2\. The BM‑SC determines if the GCS AS is authorized to deallocate the
indicated TMGIs, and then deallocates those TMGIs. If MBMS resources are in
use for any of the deallocated TMGIs, those resources are released using the
Session Stop procedure defined in TS 23.246 [3].
3\. The BM‑SC sends a Diameter GAA command including the parameters as defined
in clause 5.2.2.
4\. If MBMS resources are in use for any of the deallocated TMGIs, the BM‑SC
initiates the Session Stop procedure defined in sub-clause 20.3.3 of TS 29.061
[6] to release those resources.
## A.1.3 TMGI Expiry Notification
The TMGI expiry notification procedure is used by the BM‑SC to notify the GCS
AS when a timer expires for a TMGI.
Figure A.1.3‑1: TMGI Expiry Notification Procedure
1\. If the BM‑SC detects a timer expiry for a TMGI, the BM‑SC sends a Diameter
GNR command to indicate the TMGI expiry to GCS AS including TMGI‑Expiry AVP.
If there is (are) active MBMS bearer(s) related to this expiring TMGI, the
BM‑SC terminates this (these) bearer(s) by applying the Session Stop procedure
as defined in clause 20.3.3 of TS 29.061 [6].
2\. The GCS AS responds to the BM‑SC with a Diameter GNA command. The Diameter
session ends after the GNA command.
# A.2 MBMS Bearer Control Procedures
## A.2.1 Activate MBMS Bearer Procedure
The Activate MBMS Bearer procedure is used by the GCS AS to cause the
allocation of resources for an MBMS bearer.
Figure A.2.1.1: Activate MBMS bearer Procedure
1\. When the GCS AS wishes to activate an MBMS bearer, the GCS AS sends a GAR
command to the BM‑SC, including the parameters as defined in clause 5.3.2.
2\. The BM‑SC determines whether the GCS AS is authorized to use the TMGI.
3\. The BM‑SC sends a GAA command to the GCS AS including the parameters as
defined in clause 5.3.2.
4\. If the authorization is successful, the BM‑SC applies the Session Start
procedure as defined in clause 20.3.1 of 3GPP 29.061 [6].
## A.2.2 Deactivate MBMS Bearer Procedure
The Deactivate MBMS Bearer procedure is used by the GCS AS to cause the
deallocation of resources for an MBMS bearer.
Figure A.2.2.1: Deactivate MBMS bearer Procedure
1\. When the GCS AS determines that the MBMS bearer is no longer needed, it
sends a GAR command to the BM‑SC, including the parameters as defined in
clause 5.3.3.
2\. The BM‑SC determines whether the GCS AS is authorized to use the TMGI and
determines to deallocate the resources in the eMBMS system for the MBMS
bearer.
3\. The BM‑SC sends a GAA command to the GCS AS including the parameters as
defined in clause 5.3.3.
4\. The BM‑SC applies the Session Stop procedure as defined in clause 20.3.3
of TS 29.061 [6].
## A.2.3 Modify MBMS Bearer Procedure
The Modify MBMS Bearer procedure is used by the GCS AS to cause modification
of the priority and pre-emption values for an MBMS bearer, the MBMS broadcast
area, or both.
Figure A.2.3.1: Modify MBMS bearer Procedure
1\. When the GCS AS determines that an activated MBMS bearer needs to be
modified, it sends a GAR command to the BM‑SC, including the parameters as
defined in clause 5.3.4.
2\. The BM‑SC determines that the MBMS bearer can be modified.
3\. The BM‑SC sends a GAA command to the GCS AS including the parameters as
defined in clause 5.3.4.
4\. The BM‑SC applies the Session Update procedure as defined in clause 20.3.2
of TS 29.061 [6].
## A.2.4 MBMS Bearer Status Indication Procedure
Figure A.2.4‑1 provides the procedure used between the GCS AS and the BM‑SC to
indicate the change of the MBMS bearer status, e.g. a release of the MBMS
bearer.
Figure A.2.4‑1: MBMS Bearer Status Indication Procedure
1\. If the BM‑SC receives a MBMS session termination request initiated by MBMS
GW, the BM‑SC sends a Diameter GNR command to indicate the bearer status to
the GCS AS including the parameters as defined in clause 5.3.5. Other actions
which will trigger the MBMS bearer status indication procedure are not
included in this specification.
2\. The GCS AS responds to the BM‑SC with a Diameter GNA command. The Diameter
session ends after the GNA command.
# A.3 Restoration Procedures
## A.3.1 GCS AS initiated Heartbeat Procedure
The Heartbeat Procedure is used by the GCS AS to detect an MB2‑C path failure
or the outage or restart of a peer BM‑SC.
Figure A.3.1‑1: GCS AS initiated Heartbeat Procedure
1\. The GCS AS periodically sends a GAR including the Restart‑Counter AVP to a
peer BM‑SC when no other signalling is exchanged between those two nodes, as
defined in clause 5.6.3.
2\. The BM‑SC replies with a GAR including the Restart‑Counter AVP.
## A.3.2 BM-SC initiated Heartbeat Procedure
The Heartbeat Procedure is used by the BM‑SC to detect an MB2‑C path failure
or the outage or restart of a peer GCS AS.
Figure A.3.2‑1: BM‑SC initiated Heartbeat Procedure
1\. The BM‑SC periodically sends a GNR including the Restart‑Counter AVP to a
peer GCS AS when no other signalling is exchanged between those two nodes, as
defined in clause 5.6.4.
2\. The GCS AS replies with a GNR including the Restart‑Counter AVP.
###### ## Annex B (normative): Diameter message priority mechanism
## B.1 General
IETF RFC 7944 [25] specifies the Diameter message priority mechanism that
allows Diameter nodes to indicate the relative priority of Diameter messages.
With this information, other Diameter nodes can leverage the relative priority
of Diameter messages into routing, resource allocation, and also abatement
decisions when overload control is applied.
## B.2 MB2-C interface
### B.2.1 General
The Diameter message priority mechanism is an optional feature which may apply
on the MB2-C interface. It is recommended to make use of IETF RFC 7944 [25]
over the MB2-C interface of an operator network.
### B.2.2 GCS AS behaviour
When the GCS AS supports the Diameter message priority mechanism, the GCS AS
shall comply with IETF RFC 7944 [25].
The GCS AS sending a request shall determine the required priority according
to its policies. When priority is required, the GCS AS shall include the DRMP
AVP indicating the required priority level in the request it sends, and shall
prioritise the request according to the required priority level.
When the GCS AS receives the corresponding response, it shall prioritise the
received response according to the priority level received within the DRMP AVP
if present in the response, otherwise according to the priority level of the
corresponding request.
When the GCS AS receives a request, it shall handle the request according to
the received DRMP AVP priority level. For the response, it may modify the
priority level received in the DRMP AVP according to its policies and shall
handle the response according to the required priority level. If the required
priority level is different from the priority level received in the request,
it shall include the DRMP AVP in the response.
If:
\- the GCS AS supports using the Diameter message priority mechanism for DSCP
marking purposes,
\- the transport network utilizes DSCP marking, and
\- message-dependant DSCP marking is possible for the protocol stack
transporting Diameter,
then the GCS AS shall set the DSCP marking for transport of the request or
response according to the required priority level.
Diameter requests related to priority traffic shall contain a DRMP AVP with a
high priority of which the level value is operator dependent.
When not required according to the procedures above, the decisions of the 3GPP
functional entity to include the DRMP AVP and a particular priority level
value are implementation specific.
### B.2.3 BM-SC behaviour
When the BM-SC supports the Diameter message priority mechanism, the BM-SC
shall comply with IETF RFC 7944 [25].
The BM-SC sending a request shall determine the required priority according to
its policies. When priority is required, the BM-SC shall include the DRMP AVP
indicating the required priority level in the request it sends, and shall
prioritise the request according to the required priority level.
When the BM-SC receives the corresponding response, it shall prioritise the
received response according to the priority level received within the DRMP AVP
if present in the response, otherwise according to the priority level of the
corresponding request.
When the BM-SC receives a request, it shall handle the request according to
the received DRMP AVP priority level. For the response, it may modify the
priority level received in the DRMP AVP according to its policies and shall
handle the response according to the required priority level. If the required
priority level is different from the priority level received in the request,
it shall include the DRMP AVP in the response.
If:
\- the BM-SC supports using the Diameter message priority mechanism for DSCP
marking purposes,
\- the transport network utilizes DSCP marking, and
\- message-dependant DSCP marking is possible for the protocol stack
transporting Diameter,
then the BM-SC shall set the DSCP marking for transport of the request or
response according to the required priority level.
Diameter requests related to priority traffic shall contain a DRMP AVP with a
high priority of which the level value is operator dependent.
When not required according to the procedures above, the decisions of the 3GPP
functional entity to include the DRMP AVP and a particular priority level
value are implementation specific.
Annex C (normative):\ Diameter load control mechanism
## C.1 General
IETF RFC 8583 [26] specifies the Diameter load control mechanism. This
includes the definition of Diameter Load AVP and the Diameter load related
behaviour.
The Diameter load control mechanism on the MB2-C interface is optional for the
GCS AS and the BM-SC.
NOTE: The Diameter Load AVP will simply be ignored by peers not supporting
Diameter load control.
If the GCS AS and the BM-SC support the Diameter load control mechanism, they
shall apply the procedures in the present Annex.
## C.2 GCS AS behaviour
The GCS AS shall act as a reacting node as defined in IETF RFC 8583 [26] and
may use the load information in an implementation dependent manner, e.g. when
deciding where to route requests for new Diameter sessions.
## C.3 BM-SC behaviour
The BM-SC shall act as endpoint reporting node as defined IETF RFC 8583 [26].
The BM-SC shall include load information in the the Load AVP within GCS-
Action-Answer messages.
When and in which frequency to include the Load AVP is implementation
dependent and based on operator policy.
How the BM-SC determines the specific contents of the Load-Value AVP within
the Load AVP is implementation dependent and based on operator policy.
#