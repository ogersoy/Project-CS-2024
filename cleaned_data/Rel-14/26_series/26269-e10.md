# Foreword
The present document has been produced by the 3^rd^ Generation Partnership
Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
This Technical Specification (TS) specifies minimum performance requirements,
test procedures and digital test sequences to be used for conformance testing
of implementations of the eCall in-band modem.
The eCall in-band modem PSAP and IVS transmitters and receivers are specified
in TS 26.267 [1]. The reference fixed point ANSI-C implementation for the
specified eCall modem is provided in TS 26.268 [2].
The eCall in-band modem is a technology that transmits data reliably over the
speech channel of the cellular and PSTN networks. It is specifically designed
for transmission of the Minimum Set of Data (MSD) from IVS to PSAP for the
Pan-European eCall initiative. For the purpose of the present specification,
conformance is determined for the transmission of one single MSD of length 140
bytes. Other applications of the eCall in-band modem are out of scope of this
document.
# 2 Normative references
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 26.267: \"eCall Data Transfer; In-band modem solution; General
Description\".
[2] 3GPP TS 26.268: \"eCall Data Transfer; In-band modem solution; ANSI-C
reference code\".
[3] 3GPP TR 26.969: \"eCall data transfer; In-band modem solution;
Characterization report\".
[4] 3GPP TS 46.001: \"Full rate speech; Processing functions\".
[5] 3GPP TS 26.071: \"Mandatory speech CODEC speech processing functions; AMR
speech Codec; General description\".
[6] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[7] 3GPP TS 23.167: \"IP Multimedia Subsystem (IMS) emergency sessions\".
[8] 3GPP TS 24.229: \"IP multimedia call control protocol based on Session
Initiation Protocol (SIP) and Session Description Protocol (SDP); Stage 3 \"
# 3 Definitions and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
TR 21.905 [6] and the following apply. A term defined in the present document
takes precedence over the definition of the same term, if any, in TR 21.905
[6].
**eCall:** manually or automatically initiated emergency call (TS12) from a
vehicle, supplemented with a minimum set of emergency related data (MSD), as
defined under the EU Commission's eSafety initiative.
**eCall In-band Modem:** modem pair (consisting of transmitters and receivers
at IVS and PSAP) that operates full-duplex and allows reliable transmission of
eCall Minimum Set of Data from IVS to PSAP via the voice channel of the
emergency voice call through cellular and PSTN networks.
**eSafety:** European Commission sponsored forum to improve safety aspects of
European citizens.
**feedback frame:** downlink signal transmission interval containing feedback
data - corresponds to a time interval of 180 ms or 1 440 samples at an 8 kHz
sampling rate
**frame:** time interval equal to 20 ms (corresponding to one AMR or FR speech
frame, represented by 160 samples at an 8 kHz sampling rate)
**Minimum Set of Data (MSD):** forming the data component of an eCall sent
from a vehicle to a Public Safety Answering Point or other designated
emergency call centre. The MSD has a maximum size of 140 bytes and includes,
for example, vehicle identity, location information and time-stamp.
## 3.2 Abbreviations
For the purposes of the present document, the following abbreviations apply.
ACK Acknowledgement
AMR Adaptive Multi-Rate (speech codec)
CRC Cyclic Redundancy Check
CTM Cellular Text Telephone Modem
eIM eCall In-band Modem
EU European Union
FEC Forward Error Correction
FoM Figure of Merit
FR Full Rate (speech codec)
GSM Global System for Mobile communications
IVS In-Vehicle System
MSD Minimum Set of Data
NACK Negative Acknowledgement
PCM Pulse Code Modulation
PSAP Public Safety Answering Point
PSTN Public Switched Telephone Network
UMTS Universal Mobile Telecommunications Systems
VAD Voice Activity Detection
# 4 General
This specification provides minimum performance requirements and test
procedures that are necessary to test implementations of the eCall in-band
modem for correctness. Correctness in this context means that the tested eCall
modem implementation works within the performance parameter range defined in
this document.
The eCall modem set consists of four main functional entities, i.e., the
transmitter and receiver functions within the IVS and PSAP eCall modems. These
functional entities are illustrated in Figure 1.
Figure 1: Functional components of the IVS and PSAP eCall modems
Clause 5 contains the procedures for conformance testing as well as the
detailed performance requirements.
Annex A explains the digital test sequences and scripts to be executed for
conformance testing of bit-exact eCall in-band modem implementations. The test
sequences and scripts are attached to this specification.
Annex B describes the eCall test set-up to be used for minimum performance
testing of eCall in-band modem implementations.
# 5 Conformance
Conformance testing of the fixed-point IVS and PSAP **transmitters** **shall
be** performed by demonstrating bit-exactness to the fixed-point reference
C-code implementation (given in TS 26.268 [2]).
Bit-exactness means that given a specific input sequence, the corresponding
digital output sequence of the component under test shall exactly match the
time-aligned output sequence of the reference implementation [2] of that
component. The delay of the output sequence shall not exceed a certain
specified limit.
Conformance testing of the IVS and PSAP **receiver** implementations **shall
be** performed by either demonstrating bit-exactness to the reference C-code,
or by testing against a set of minimum performance requirements by means of
objective measures. The bit-exact approach should be preferred over the
application of objective measures if the implementation of the IVS and PSAP
receivers follows the one given in the reference C-code.
The MSDs, codecs and channel conditions to be used in the testing for bit-
exactness as well as for minimum performance requirements are further
described in Annexes A and B. Annex B also specifies the procedures for
evaluating the conformance of a receiver implementation with respect to the
minimum performance requirements.
## 5.1 Bit-exactness
To guarantee interoperability and data integrity, the implementation of PSAP
and IVS **transmitters** **shall** be bit-exact.
For the IVS and PSAP **receivers** , the conformance of the implementation
**may** be tested by showing bit-exactness.
For bit-exact fixed-point implementations, test sequences and scripts are used
for conformance testing. The test cases consist of input and output reference
MSDs, control sequences, and PCM data files.
For testing transmitters, input control sequences are fed into the IVS/PSAP
transmitter and the corresponding PCM data output of the IVS/PSAP transmitter
is recorded. To meet the bit exactness criterion, all test cases must yield
bit-exact results for the durations of the reference sequences, compared to
the provided reference IVS/PSAP PCM output files, starting from the first non-
zero output sample.
The maximum delay, measured as the number of zero-valued output samples of the
IVS transmitter, as a reaction to any of the reference input sequences, shall
not exceed 160 samples.
The maximum delay, measured as the number of zero-valued output samples of the
PSAP transmitter, as a reaction to any of the reference input sequences, shall
not exceed 320 samples.
For testing receivers, input PCM data files are fed into the IVS/PSAP receiver
and the sequence of control states of the IVS/PSAP receiver is recorded after
the processing of each received frame (duration 20 ms). To meet the
conformance requirements, the control state sequence must be identical to the
provided reference control sequence within a tolerable timing difference of
one frame.
## 5.2 Minimum performance requirements
Objective measures are used for testing the fulfilment of minimum performance
requirements. These measures are the same for all implementations. They shall
be met by all non-bit exact fixed-point receiver implementations of the IVS
and PSAP, and may also be used as an additional check for receiver
implementations which have been shown to meet conformance by demonstrating
bit-exactness.
The following minimum performance requirements apply to transmissions of
single MSDs of length 140 bytes.
### 5.2.1 MSD transmission time
The average MSD transmission times serve as a performance indicator for the
signal waveform demodulator and FEC decoder implementation. The MSD
transmission time can be defined by five different metrics as described in
Annex D of 3GPP TR 26.969 [3]:
1) As the interval from the time instant when the IVS transmitter writes the
first non-zero sample onto the uplink channel until the MSD message has been
correctly decoded at the PSAP. This metric was used during the initial eCall
selection tests and is called "Figure-of-Merit" (FoM).
2) As the interval from the time instant of call connect state at PSAP side
until the MSD message has been correctly decoded. This metric can assess the
complete round-trip-time (RTT) of the PSAP in PUSH mode and is called PSAP-
PUSH-RTT.
3) As the interval from the time instant when PSAP begins sending of first
START message until the MSD message has been correctly decoded. This metric
can assess the complete round-trip-time (RTT) of the PSAP in PULL mode and is
called PSAP-PULL-RTT.
4) As the interval from the time instance when IVS detects call is connected
until it detects the first HLACK message. This metric can assess the complete
round-trip-time (RTT) of the PSAP in PUSH mode from IVS perspective and is
called IVS-PUSH-RTT.
5) As the interval from the time instance when IVS detects the first START
message from PSAP until it detects the first HLACK message. This metric can
assess the complete round-trip-time (RTT) of the PSAP in PULL mode from IVS
perspective and is called IVS-PULL-RTT.
The FoM metric for the full test campaign given in Annex B was also used in
the eCall selection tests.. In the FoM, for each single transmission
simulation, the transmission time is limited to a value of 200 s, i.e., if the
MSD has not been correctly received after 200 s, the transmission attempt is
aborted and the transmission time is counted as 200 s. The respective
transmission attempt is recorded as a failure (and this constitutes a
violation of the minimum performance requirement \"Transmission failures\" in
clause 5.2.3).
All RTT metrics are suitable also for performance tests over-the-air or in lab
environments as they require only measurement instances at either PSAP or IVS
side. They do not require exact time synchronization between IVS and PSAP
clocks as would be required for the FoM metric.
The following subsections refer to the minimum requirements for the FoM
metric, which can be easily obtained through simulative assessment of the in-
band modem implementation. Additional minimum requirements for the RTT metrics
are listed in Annex C.
#### 5.2.1.1 Full campaign (all AMR-FR codec modes plus GSM-FR)
For the specified full campaign given in Annex B, the average MSD transmission
time (Figure of Merit) shall not exceed 2.90 s.
#### 5.2.1.2 Error-free case for AMR 12.2 and FR
For the subset of error-free test cases in the AMR 12.2 and FR codecs of the
full campaign, the average MSD transmission time shall not exceed 2.00 s.
#### 5.2.1.3 GSM-HR codec
In the GSM-HR codec, the average MSD transmission time shall not exceed 18.00
s for the set of channel conditions comprising a C/I of 10, 7, and 4 dB as
well as the error free case. 100 test cases per channel conditions shall be
carried out.
#### 5.2.1.4 Noisy conditions
For the specified full campaign in Annex B, the average MSD transmission time
shall not exceed 3.20 s if white Gaussian noise (AWGN) of 10 dB SNR is added
both to the PSAP transmitter output and at the PSAP receiver input signals.
Noise shall be added to the PCM data that is fed into the PSAP receiver and to
the PCM data that is output from the PSAP transmitter. This reflects noise
that could occur on an analogue line in a PSTN.
The noise power shall be set to yield 10 dB SNR. At the PSAP receiver, the
reference signal power shall be obtained by averaging over all incoming signal
intervals while the PSAP receiver is in NACK state, which is the case when it
receives the data part of the MSD message. A separate reference signal power
shall be computed for each codec and channel condition as an average of the
100 test cases of the attached official test campaign
official_test_configuration_file.txt.
At the PSAP transmitter, the reference signal power shall be calculated by
averaging over an entire feedback message [1] consisting of 20 frames.
For information, the standard deviations of the PSAP receiver input PCM
signals are given in Table 1 for the reference implementation [2]. The average
PSAP transmitter PCM output standard deviation is 2056.
Table 1: Standard deviations of PSAP input signals
* * *
**Codec,\** Standard deviation**** Codec,\ **Standard deviation** channel
condition**channel condition**
Full Rate, 7 dB 1223 AMR 7.95, 7 dB 1067
Full Rate, 10 dB 1190 AMR 7.95, 10 dB 1059
Full Rate, 13 dB 1167 AMR 7.40, 7 dB 988
Full Rate, 16 dB 1156 AMR 7.40, 10 dB 971
Full Rate, clean 1181 AMR 6.70, 7 dB 954
Full Rate, RSSI 1149 AMR 5.90, 4 dB 931
AMR 12.20, 7 dB 1112 AMR 5.90, 7 dB 953
AMR 12.20, 10 dB 1129 AMR 5.15, 4 dB 836
AMR 12.20, 13 dB 1092 AMR 5.15, 7 dB 854
AMR 12.20, clean 1130 AMR 4.75, 1 dB 737
AMR 10.20, 7 dB 1045 AMR 4.75, 4 dB 762
AMR 10.20, 10 dB 1052 AMR 4.75, 7 dB 770
AMR 10.20, 13 dB 994 AMR 4.75, RSSI 771
* * *
The following C code fragment illustrates the application of noise (and a
possible subsequent clipping) onto the PSAP input or output signals:
temp = (int) pcm + (int)(((double)sigma)*randn());
if (temp > 32767) {
noisy_pcm = 32767;
} else if (temp \= 0.0) {
if (pcmScaled > (double) 32767)
pcm = 32767;
else
pcm = (short) (pcmScaled + 0.5);
} else {
if (pcmScaled \< (double) -32768)
pcm = -32768;
else
pcm = (short) (pcmScaled - 0.5);
}
### 5.2.2 CRC check quality
The CRC on the uplink shall be evaluated. No incorrect MSD shall pass the CRC
check in any test case of the specified full test campaign.
### 5.2.3 Transmission failures
No transmission failures shall occur with any test case of the full test
campaign, i.e. no single MSD transmission time shall exceed 200 s.
### 5.2.4 False detection due to signalling tones
The IVS modem receiver shall not falsely detect eCall communication at any
instance, when the tone test file (see Annex B) is used as modem input.
### 5.2.5 Push messages
This minimum performance requirement is only applicable for the case that IVS
and PSAP in-band modems are configured to work in _push_ mode.
It shall take a maximum of five SEND messages to trigger the PSAP eCall modem
receiver in push mode. The test shall be carried out for the test conditions
given in the official test campaign official_test_configuration_file.txt.
### 5.2.6 HLACK messages
The IVS receiver shall reliably detect a higher-layer ACK (HLACK) with no more
than five transmitted HLACK messages. This test shall be carried out for the
conditions given in the official test campaign.
official_test_configuration_file.txt.
# 6 IMS eCall Conformance of In-band Modem
## 6.1 General
When supported by the IVS, mobile network, and PSAP, IMS eCall uses SIP
signalling to send the MSD to the PSAP as this provides a compact and reliable
means to transfer the information without interrupting the voice conversation
between the motorist and the PSAP operator. During the deployment of IMS
eCall, there may be temporary scenarios where the mobile network does not
support a circuit-switch bearer and the network or PSAP do not support the IMS
eCall protocol. In such scenarios, the IVS has no reliable means to send the
MSD to the PSAP. As a solution of "last-resort" clause 7.7.2 of 3GPP TS 23.167
[7] and clause 5.1.6.11.2 of 3GPP TS 24.229 [8] require that the IVS attempt
to transfer the MSD via the in-band modem sending the voice-band signals
through the Voice-Over-IP bearer.
As ETSI and 3GPP determined that the operation of the in-band modem over the
VoIP bearer cannot guarantee reliable transmission of the MSD, the deployment
scenario that requires use of this "last-resort" solution must be avoided as
much as possible. Furthermore, the testing of this mode of operation in the
IVS does not require testing of reliability. The testing only focuses on
conformance as follows:
1) The in-band modem conformance shall be tested separately from the VoIP
bearer using the tests specified in clause 5.
2) To test that the in-band modem conforming to clause 5 is operating over the
VoIP bearer in the IVS, the test described in clause 6.3 should be used.
To avoid the effects of jitter and time-warping interfering with the testing
of the in-band modem, the test set-up should not introduce any time-warping
when decoding the VoIP packets encoding the in-band modem signals. Therefore
the test specified in clause 6.3 is recommended.
If the test set-up is not able to prevent time-warping in any adaptive de-
jitter buffers at the IVS, PSAP, or intermediate nodes (e.g., media gateway)
then the test in clause 6.3 can not be used to reliably test the in-band
modem. The test in clause 6.4 shall only be used if the test in clause 6.3 can
not be used.
## 6.2 Initial Settings
Following are the initial settings to be used before starting the test:
1) Place the PSAP simulator into PULL mode so that it sends START signaling
([1] and [2]) once the voice bearer is connected with the IVS under test
2) Negotiate use of the AMR 12.2 speech codec for encoding the in-band modem
signal
3) Use an error free channel model in the channel simulator
4) Set-up the IMS eCall session so that it triggers the "last-resort"
condition in the IVS that requires the in-band modem operation over the VoIP
bearer.
## 6.3 No Time-Warping Conformance Test
If the test set-up can prevent time-warping of the decoded VoIP signal (i.e.,
it does not introduce jitter or the de-jitter buffers in the IVS and PSAP do
not perform time-warping) then the following test procedures shall be used:
1) When the IVS detects the START messages sent by the PSAP (after the voice
bearer is established), the IVS is expected to send the MSD.
2) If the PSAP simulator detects that the IVS has started sending the MSD then
the IVS PASSES conformance. Detecting the start of MSD transmission does not
require decoding the entire MSD correctly. The PSAP simulator could detect the
sync ([1] and [2]) from the IVS that precedes the MSD information.
3) If the test fails, i.e., the PSAP simulator does not detect the sync or the
MSD within 20s, the call is terminated.
a) If the IVS has failed five consecutive tests then it FAILS conformance.
b) Otherwise the test is re-run starting with the triggering event in step 4
of clause 6.2.
## 6.4 Time-Warping Conformance Test
If the test set-up can not prevent time-warping of the decoded VoIP signal
(i.e., it could introduce jitter and the de-jitter buffers in the IVS and PSAP
could perform time-warping) then the following test procedures shall be used:
1) When the IVS detects the START messages sent by the PSAP (after the voice
bearer is established), the IVS is expected to send the MSD.
2) If the PSAP simulator detects that the IVS has started sending the MSD then
the IVS PASSES conformance. Detecting the start of MSD transmission does not
require decoding the entire MSD correctly. The PSAP simulator could detect the
sync ([1] and [2]) from the IVS that precedes the MSD information.
3) If the test fails, i.e., the PSAP simulator does not detect the sync or the
MSD within 20s, the call is terminated.
a) If the IVS has failed 50 consecutive tests then it FAILS conformance.
b) Otherwise the jitter-model of the channel simulator is re-randomized to
ensure that the same jitter profile is not re-used and the test is re-run
starting with the triggering event in step 4 of clause 6.2.
###### ## Annex A (normative): Test sequences and scripts for testing bit-
exact implementation of eCall in-band modem
This Annex describes the test set-up, test sequences, and scripts designed to
evaluate the bit-exact implementation of the eCall in-band modem [2].
For the purpose of conformance testing, the control sequences at the receiver-
transmitter interfaces of the IVS and PSAP are defined as the content of
certain state variables at the end of the receiver processing stage after each
frame. The IVS and PSAP input/output data signals are standard PCM data
signals with 16 bits per sample and 8 kHz sampling rate. Three sets of state
variables and PCM data signals are provided to carry out the bit-exactness
tests for the eCall core, the eCall push trigger, and the eCall HLACK
transmission. The eCall core is defined as a transmission that is initiated by
the PSAP and terminated by the transmission of lower layer ACK (LLACK)
messages after the successful reception of the MSD by the PSAP. The push
trigger test files are intended to test an IVS initiated eCall transmission,
which starts with the transmission of SEND messages and is terminated by the
transmission of lower layer ACK messages after the successful reception of the
MSD by the PSAP. The HLACK transmission test files are intended to test the
transmission of HLACK messages, which starts with an PSAP initated MSD
transmission and terminates with the successful reception of the HLACK by the
IVS. The three data sets are distinguished by their 'basename' which is to be
replaced by 'core', 'corepush', or 'corehlack' in the tables below,
respectively.
Note that the number of LLACK and HLACK messages to be transmitted is a
configuration parameter of the in-band modem [2]. It is up to higher-layer
protocol requirements whether link-layer and/or higher-layer ACK messages are
transmitted. From a modem protocol perspective [1], at least five ACK messages
of one type (either link-layer or higher-layer) shall be transmitted
consecutively for security. For conformance testing, the modem shall be
configured to send four LLACK and then five HLACK messages.
The attached test campaign file campaign_conformance_test.txt specifies the
MSDs, delays, codecs and channel conditions to be used according to Tables A.1
to A.4.
The test scripts conftest.bat (for Windows) and conftest.sh (for Linux) are
provided in order to perform all tests according to clauses A.1 to A.4. Note
that these are exemplary test scripts for the case that the IVS and PSAP
implementations exhibit the same output signal delays as the reference
implementation [2]. For other signal output delays within the limits specified
in clause 5.1, the scripts should be adapted.
The test setup included in [2] automatically records input/output PCM data, as
well as the contents of the state variables at the transmitter/receiver
interface. The test setup also checks for the correct reception of the MSD. It
is required for the execution of the above test scripts.
# A.1 Testing a bit-exact implementation of the IVS transmitter function
The set-up illustrated in Figure A.1 is used to test the bit-exact compliance
of an IVS transmitter implementation.
Figure A.1: Set-up for testing bit-exact eCall modem IVS transmitter function
The set of test input control sequences listed in Table A.1 are input into the
IVS Tx. Each test sequence specifies the series of control messages and the
time at which each is to be input into the IVS Tx.
Table A.1: Input control sequences and output PCM files for testing bit-exact
IVS transmitter -\ The sequences are attached electronically
* * *
**Sequence** **Characteristics** **Input Control Sequence Filename** **Output
PCM Data Filename** 1 AMR-FR 12.2 Error Free {basename}_portivstx1.txt
{basename}_pcmulin1.pcm 2 GSM_FR, C/I = 7dB {basename}_portivstx2.txt
{basename}_pcmulin2.pcm 3 AMR-FR 12.2, C/I = 7dB {basename}_portivstx3.txt
{basename}_pcmulin3.pcm 4 AMR-FR 5.9, C/I = 4dB {basename}_portivstx4.txt
{basename}_pcmulin4.pcm 5 AMR-FR 5.15, C/I = 4dB {basename}_portivstx5.txt
{basename}_pcmulin5.pcm 6 AMR-FR 4.75, C/I = 1dB {basename}_portivstx6.txt
{basename}_pcmulin6.pcm 7 GSM-HR, C/I = 4dB {basename}_portivstx7.txt
{basename}_pcmulin7.pcm 8 GSM_FR, C/I = 7dB {basename}_portivstx8.txt
{basename}_pcmulin8.pcm
* * *
For each test input control sequence, the output PCM data from the IVS Tx
function is recorded and the initial series of zero-valued PCM samples shall
be checked to not exceed the maximum allowable delay specified in clause 5.1.
The initial series of zero samples are then removed and the remaining PCM
output data shall be bit-exact identical to the output PCM data files listed
in Table A.1.
# A.2 Testing a bit-exact implementation of the PSAP transmitter function
The set-up illustrated in Figure A.2 is used to test the bit-exact compliance
of a PSAP transmitter implementation.
Figure A.2: Set-up for testing bit-exact eCall modem PSAP transmitter function
The set of test input control sequences listed in Table A.2 are input into the
PSAP Tx. Each test sequence specifies the series of control message and the
time at which each is to be input into the PSAP Tx.
Table A.2: Input control sequences and output PCM files for testing bit-exact
PSAP transmitter -\ The sequences are attached electronically
* * *
**Sequence** **Characteristics** **Input Control Sequence Filename** **Output
PCM Data Filename** 1 AMR-FR 12.2 Error Free {basename}_portpsaptx1.txt
{basename}_pcmdlin1.pcm 2 GSM_FR, C/I = 7dB {basename}_portpsaptx2.txt
{basename}_pcmdlin2.pcm 3 AMR-FR 12.2, C/I = 7dB {basename}_portpsaptx3.txt
{basename}_pcmdlin3.pcm 4 AMR-FR 5.9, C/I = 4dB {basename}_portpsaptx4.txt
{basename}_pcmdlin4.pcm 5 AMR-FR 5.15, C/I = 4dB {basename}_portpsaptx5.txt
{basename}_pcmdlin5.pcm 6 AMR-FR 4.75, C/I = 1dB {basename}_portpsaptx6.txt
{basename}_pcmdlin6.pcm 7 GSM-HR, C/I = 4dB {basename}_portpsaptx7.txt
{basename}_pcmdlin7.pcm 8 GSM_FR, C/I = 7dB {basename}_portpsaptx8.txt
{basename}_pcmdlin8.pcm
* * *
For each test input control sequence, the output PCM data from the PSAP Tx
function is recorded and the initial series of zero-valued PCM samples shall
be checked to not exceed the maximum allowable delay specified in clause 5.1.
The initial series of zero samples are then removed and the remaining PCM
output data shall be bit-exact identical to the output PCM data files listed
in Table A.2.
# A.3 Testing a bit-exact implementation of the IVS receiver function
The set-up illustrated in Figure A.3 is used to test the bit-exact compliance
of an IVS receiver implementation.
Figure A.3: Set-up for testing bit-exact eCall modem IVS receiver function
The set of test input PCM data files listed in Table A.3 are input into the
IVS Rx. For each test input PCM data file, the output control sequence from
the IVS Rx function is recorded with a time stamp for each control message.
The sequence of recorded output control messages from IVS Rx shall be
identical to the output control sequence listed in Table A.3. The absolute
value difference in time stamps of a message in the recorded and attached
sequence file shall not exceed one frame.
Table A.3: Input PCM files and output control sequences for testing bit-exact
IVS receiver -\ The sequences are attached electronically.
* * *
**Sequence** **Characteristics** **Output Control Sequence Filename** **Input
PCM Data Filename** 1 AMR-FR 12.2 Error Free {basename}_portivsrx1.txt
{basename}_pcmdlout1.pcm 2 GSM_FR, C/I = 7dB {basename}_portivsrx2.txt
{basename}_pcmdlout2.pcm 3 AMR-FR 12.2, C/I = 7dB {basename}_portivsrx3.txt
{basename}_pcmdlout3.pcm 4 AMR-FR 5.9, C/I = 4dB {basename}_portivsrx4.txt
{basename}_pcmdlout4.pcm 5 AMR-FR 5.15, C/I = 4dB {basename}_portivsrx5.txt
{basename}_pcmdlout5.pcm 6 AMR-FR 4.75, C/I = 1dB {basename}_portivsrx6.txt
{basename}_pcmdlout6.pcm 7 GSM-HR, C/I = 4dB {basename}_portivsrx7.txt
{basename}_pcmdlout7.pcm 8 GSM_FR, C/I = 7dB {basename}_portivsrx8.txt
{basename}_pcmdlout8.pcm
* * *
# A.4 Testing a bit-exact implementation of the PSAP receiver function
The set-up illustrated in Figure A.4 is used to test the bit-exact compliance
of a PSAP receiver implementation.
{width="5.988194444444445in" height="1.6833333333333333in"}
Figure A.4: Set-up for testing bit-exact eCall modem PSAP receiver function
The set of test input PCM data files listed in Table A.4 are input into the
PSAP Rx. For each test input PCM data file the following are recorded and
tested:
1\. The output control sequence from the PSAP Rx function is recorded with a
time stamp for each control message. The sequence of recorded output control
messages from PSAP Rx shall be identical to the output control sequence listed
in Table A.4. The absolute value difference in time stamps of a message in the
recorded and attached sequence file shall not exceed one frame.
2\. The output MSD from the PSAP Rx function is evaluated. The output MSD
shall be equal to the MSD indicated in the attached campaign file
campaign_conformance_test.txt.
Table A.4: Input PCM files and output control sequences for testing bit-exact
PSAP receiver -\ The sequences are attached electronically.
* * *
**Sequence** **Characteristics** **Output Control Sequence Filename** **Input
PCM Data Filename** 1 AMR-FR 12.2 Error Free {basename}_portpsaprx1.txt
{basename}_pcmulout1.pcm 2 GSM_FR, C/I = 7dB {basename}_portpsaprx2.txt
{basename}_pcmulout2.pcm 3 AMR-FR 12.2, C/I = 7dB {basename}_portpsaprx3.txt
{basename}_pcmulout3.pcm 4 AMR-FR 5.9, C/I = 4dB {basename}_portpsaprx4.txt
{basename}_pcmulout4.pcm 5 AMR-FR 5.15, C/I = 4dB {basename}_portpsaprx5.txt
{basename}_pcmulout5.pcm 6 AMR-FR 4.75, C/I = 1dB {basename}_portpsaprx6.txt
{basename}_pcmulout6.pcm 7 GSM-HR, C/I = 4dB {basename}_portpsaprx7.txt
{basename}_pcmulout7.pcm 8 GSM_FR, C/I = 7dB {basename}_portpsaprx8.txt
{basename}_pcmulout8.pcm
* * *
###### ## Annex B (normative): Test set-up and sequences for testing minimum
performance of eCall in-band modem receivers
This annex specifies how modem receiver implementations can be tested to
determine if they conform to the minimum performance requirements.
The MSDs, codecs, and channel conditions to be used for minimum performance
testing are given in the attached full campaign file
official_test_configuration_file.txt.
# B.1 Modem Transmission Performance
The transmission performance of an eCall modem receiver shall be evaluated
using the eCall test set-up and the attached full campaign test file,
including the input test MSDs.
The eCall test set-up configuration illustrated in Figure B.1 is used to test
the minimum performance compliance of an IVS receiver implementation. For all
of the other modem functions not being tested, i.e., IVS Tx, PSAP Rx, and PSAP
Tx, the ANSI-C reference code or a bit-exact implementation of them shall be
used.
Figure B.1: Set-up for testing the minimum performance compliance of\ the
eCall modem IVS receiver function
The performance of the above set-up over the entire test campaign shall meet
the requirements in clauses 5.2.1 to 5.2.3.
The eCall test set-up configuration illustrated in Figure B.2 is used to test
the minimum performance compliance of an PSAP receiver implementation. For all
of the other modem functions not being tested, i.e., IVS Rx, IVS Tx, and PSAP
Tx, the ANSI-C reference code or a bit-exact implementation of them shall be
used.
Figure B.2: Set-up for testing the minimum performance compliance of\ the
eCall modem PSAP receiver function
The performance of the above set-up over the entire test campaign must meet
the requirements in clauses 5.2.1 to 5.2.3. Furthermore, the output MSD from
the PSAP Rx function shall be equal to the input MSD.
# B.1.2 Test Tone Sensitivity
The set-up illustrated in Figure B.3 shall be used to test the sensitivity of
the IVS Rx implementation. When the test tone PCM data provided in the
attached file EU_DTMF_tones.rawpcm is input into the IVS Rx function, the IVS
Rx function shall not indicate that it has detected any of the eCall modem
messages.
Figure B.3: Set-up for testing test tone sensitivity of eCall modem IVS
receiver function
This test can be performed in a similar way as described in clause A.3. The
detection indication can be evaluated by analyzing the output control sequence
file according to Figure A.3.
###### ## Annex C (normative): Additional Performance Requirements
In order to allow for readily testable performance assessments in over-the-air
and lab environments, additional RTT performance indicator metrics were
defined in Section 5.2.1 and [3] for the MSD transmission time. Table C.1
compares the corresponding performance requirements for the average MSD
transmission time, when these metrics are used instead of the FoM.
Note that these requirements assume that the IVS immediately starts sending
the SEND message as soon as it receives the CALL CONNECTED indication from the
network. If there is a delay between these two events this diference should be
considered when comparing the measured time to the requirements.
Table C.1: Additional performance requirements for different definitions of
MSD transmission time
* * *
**Test Case** **FoM [s]** **PSAP-PUSH-RTT [s]** **PSAP-PULL-RTT [s]** **IVS-
PUSH-RTT [s]** **IVS-PULL-RTT [s]** Full Campaign 2.90 5.8 4.7 7.5 4.7 Error
Free 2.00 4.8 3.7 6.5 3.7
* * *
#