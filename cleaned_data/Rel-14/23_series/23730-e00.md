# Foreword
This Technical Report has been produced by the 3rd Generation Partnership
Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document studies and evaluates the architecture enhancement to
support Cellular Internet of Things (CIoT). The scope includes NB-IoT, eMTC,
and EC-GSM-IoT.
The study will consider architecture enhancements/simplifications in the
following areas:
\- Support of authorization of use of Coverage Enhancement functionality;
\- Reliable communication service between UE and SCEF;
\- Inter-RAT idle mode mobility support for NB-IoT;
\- Review existing multicast/broadcast services architecture to ensure
suitability for NB-IoT;
\- Review existing Location services architecture to ensure suitability for
UEs using Control Plane CIoT EPS optimisation;
\- QoS differentiation between UEs using control plane EPS CIoT optimizations;
and
\- CN overload protection for UE supporting control plane EPS CIoT
optimizations.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or non-specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 22.368: \"Service Requirements for Machine-Type Communications\".
[3] 3GPP TS 23.682: \"Architecture enhancements to facilitate communications
with packet data networks and applications\".
[4] 3GPP TS 23.246: \"Multimedia Broadcast/Multicast Service (MBMS);
Architecture and functional description\".
[5] 3GPP TS 23.468: \"Group Communication System Enablers for LTE (GCSE_LTE);
Stage 2\".
[6] 3GPP TS 26.346: \"Multimedia Broadcast/Multicast Service (MBMS); Protocols
and codecs\".
[7] 3GPP TS 23.271: \"Functional stage 2 description of Location Services
(LCS)\".
[8] 3GPP TS 23.401: \"General Packet Radio Service (GPRS) enhancements for
Evolved Universal Terrestrial Radio Access Network (E-UTRAN) access\".
[9] RFC 7252, The Constrained Application Protocol (CoAP),
https://datatracker.ietf.org/doc/rfc7252/
[10] RFC 7641, Observing Resources in the Constrained Application Protocol
(CoAP), https://datatracker.ietf.org/doc/rfc7641/
[11] draft-ietf-core-block-21, Block-wise transfers in CoAP,
https://datatracker.ietf.org/doc/draft-ietf-core-block/
[12] draft-ietf-core-http-mapping-13, Guidelines for HTTP-to-CoAP Mapping
Implementations, https://datatracker.ietf.org/doc/draft-ietf-core-http-
mapping/
[13] 3GPP TS 29.171: \"Location Services (LCS); LCS Application Protocol (LCS-
AP) between the Mobile Management Entity (MME) and Evolved Serving Mobile
Location Centre (E-SMLC); SLs interface\".
[14] 3GPP TS 36.355: \"Evolved Universal Terrestrial Radio Access (E-UTRA);
LTE Positioning Protocol (LPP)\".
[15] 3GPP TS 36.305: \"Stage 2 functional specification of User Equipment (UE)
positioning in E-UTRAN\".
[16] OMA TS OMA-TS-ULP-V2_0_3: \"User Plane Location Protocol\", Approved
Version 2.0.3, May 2016\".
[17] 3GPP S2-163230: \"Reply LS on Maximum upper layer data packet size for
NB-IoT\".
[18] 3GPP TS 36.300: \"Evolved Universal Terrestrial Radio Access Network
(E-UTRAN); Overall description; Stage 2\".
[19] 3GPP TS 24.301: \"Non-Access-Stratum (NAS) protocol for Evolved Packet
System (EPS)\".
[20] 3GPP TS 36.455: \"Evolved Universal Terrestrial Radio Access (E-UTRA);
LTE Positioning Protocol A (LPPa)\".
[21] 3GPP TS 24.008: \"Mobile radio interface Layer 3 specification; Core
network protocols; Stage 3\".
[22] 3GPP TS 29.172: \"Location Services (LCS); Evolved Packet Core (EPC) LCS
Protocol (ELP) between the Gateway Mobile Location Centre (GMLC) and the
Mobile Management Entity (MME); SLg interface\".
[23] OMA TS OMA-TS-MLP-V3_5: \"Mobile Location Protocol\".
[24] 3GPP TS 24.080: \"Mobile radio interface layer 3 Supplementary services
specification; Formats and coding\".
[25] 3GPP TS 23.122: \"Non-Access-Stratum (NAS) functions related to Mobile
Station (MS) in idle mode\".
[26] 3GPP TS 36.413: \"Evolved Universal Terrestrial Radio Access Network
(E-UTRAN); S1 Application Protocol (S1AP)\".
# 3 Definitions and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
TR 21.905 [1] and TS 22.368 [2] apply.
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in TR 21.905
[1] and the following apply. An abbreviation defined in the present document
takes precedence over the definition of the same abbreviation, if any, in TR
21.905 [1].
AS Access Stratum
CoAP Constrained Application Protocol
CP Control Plane
E-SMLC Enhanced Serving Mobile Location Centre
eDRX Extended idle mode DRX
ELP EPC LCS Protocol
GMLC Gateway Mobile Location Centre
H-GMLC Home GMLC
M2M Machine-to-Machine
LPP LTE Positioning Protocol
LPPa LPP Annex
MLP Mobile Location Protocol
MQTT MQ Telemetry Transport
MQTT-SN MQ Telemetry Transport for Sensor Networks
MTC Machine Type Communications
MO-LR Mobile Originated Location Request
MT-LR Mobile Terminated Location Request
NI-LR Network Initiated Location Request
CIoT Cellular Internet of Things
PSM Power Saving Mode
R-GMLC Requesting GMLC
RSRP Reference Signal Received Power
RSRQ Reference Signal Received Quality
OTDOA Observed Time Difference of Arrival
SLP SUPL Location Platform
SUPL Secure User Plane Location
UP User Plane
# 4 Architectural Considerations and Assumptions
Editor\'s note: This clause will describe any architectural considerations
and/or assumptions for extended architecture for cellular IoT.
# 5 Key Issues
## 5.1 Key Issue 1 - Authorization of use of Coverage Enhancement
### 5.1.1 Description
The usage of Coverage Enhancements may require use of extensive resources
(e.g. radio and signalling resources) from the network. Therefore it should be
possible to authorize usage of the Coverage Enhancements functionality to
ensure that only specific subscribers (e.g. those subscribed to use this
service) are able to benefit from the feature. Also, as mobile network
operators may expose coverage enhancement as service capability it would be
desirable for 3rd party service provider to query status of, or enable/disable
enhanced coverage feature per individual UEs.
NOTE: Techniques for handling Rel-13 devices may be considered.
### 5.1.2 Architectural Requirements
Following architecture requirement shall be supported:
\- The system should support procedures to authorize the use of Coverage
Enhancements capabilities.
\- The system should support procedures to allow the 3rd party service
provider to query the status of, or enable, or disable Coverage Enhancements
capability per UE.
\- The system should support applying differentiated charging for users
authorized to use Coverage Enhancements compared to users not authorized to
use Coverage Enhancements.
## 5.2 Key Issue 2 - Reliable communication service between UE and SCEF
### 5.2.1 Description
Rel-13 solution for non-IP data delivery (NIDD) via the SCEF is unreliable
i.e. there is no mechanism for the SCEF to determine if the data was
successfully delivered to the UE (e.g. in case of UE radio link failure, or if
the UE is out of coverage) and for UE to determines if the data was
successfully delivered to the SCEF (e.g. in case of T6a/b connection failure,
SCEF congestion etc.). MNOs can offer reliable data delivery as value added
service to their customers (e.g. to avoid UE battery consumption that can
happen due to application level acknowledgement).
### 5.2.2 Architectural Requirements
Following architecture requirement shall be supported:
\- The system should support reliable data delivery between the UE and the
SCEF.
\- The system should support disabling/enabling reliable data delivery
capability (per UE per PDN connection) by 3rd party service provider.
## 5.3 Key Issue 3 - Inter RAT idle mode mobility to/from NB-IoT
### 5.3.1 Description
#### 5.3.1.1 Introduction
**Rel-13 does not support idle mode mobility to and from the NB-IoT RAT.
However, a UE which supports the NB-IoT RAT might benefit from supporting
other RATs (and vice-versa).**
**For example an asset tracking application might support both an NB-IoT RAT
and a 2G RAT in order to increase the number of locations where the UE will be
able to gain connectivity.**
**For these and other devices, there is a need to support idle mode inter-RAT
mobility in order to prevent the device from being forced to detach and then
re-attach when moving between RATs, with the consequent signalling and power
consumption cost and the potential for incorrect \"current RAT Type
information\" within the network.**
#### 5.3.1.2 Example Use cases for inter-RAT idle mode mobility
##### 5.3.1.2.1 WB-E-UTRAN to NB-IoT
NB-IoT capability could be incorporated into a smartphone or other \"normal\"
type of WB-E-UTRAN device in order to provide the following:
i) Ability to locate a lost or stolen device that is outside of normal WB-E-
UTRAN coverage.
ii) Send a message to a user who is outside of WB-E-UTRAN coverage, e.g. to
tell the user that they have missed an important voice call: the user could
then move themselves into good coverage and/or request a password to use an
available WiFi access point (e.g. to make a VoWiFi call in a friends\' house).
iii) Send a message from the user when outside of WB-E-UTRAN coverage, e.g. to
inform someone that they are hurt and need assistance, or, that they will be
back later than promised from their Sunday morning run/bike ride.
iv) Use the TAU signalling from the UE to the network to trigger \'events\',
e.g. deactivation of GBR bearers to stop time based charging; alert a
monitoring service (e.g. the fact that a sensor/alarm has lost good coverage
may itself be an \"alarm indication\"), etc.
##### 5.3.1.2.2 NB-IoT to WB-E-UTRAN
This is probably only needed if WB-E-UTRAN to NB-IoT mobility is supported.
NB-IoT to WB-E-UTRAN mobility is then useful to return a high performance
device to the higher performance radio of WB-E-UTRAN.
Changes made at WB-E-UTRAN to NB-IoT movement probably need to be revoked at
NB-IoT to WB-E-UTRAN movement.
Note that this mobility may also follow WB-E-UTRAN to GERAN/UTRAN to NB-IoT
mobility.
##### 5.3.1.2.3 NB-IoT to GPRS/EC-GSM-IoT
An IoT module might implement both these technologies to increase global
coverage.
Here data rates are similar, so there does not seem to be a general need to
disconnect PDN connections at this RAT change.
##### 5.3.1.2.4 GPRS/EC-GSM-IoT to NB-IoT
An IoT module might implement both these technologies to increase global
coverage.
Again there does not seem to be a general need to disconnect PDN connections
at this RAT change.
#### 5.3.1.3 Description of problem(s)
Release 13 has mandated that when any UE perform inter-RAT idle mode mobility
to / from NB-IoT the network detaches them with a request to reattach. This
requirement seemed to have 2 drivers:
a) Many verbal statements that applications stall (or need to be stopped) at
such an inter-RAT change.
b) It is important to know (e.g. for charging purposes) what data has been
sent on the NB-IoT RAT and what has been sent on the WB-E-UTRAN RAT. With the
existing Release 8 (and Release 13) specifications, the mobile will perform a
TAU at inter-RAT idle mode mobility between NB-IoT/WB-E-UTRAN and include the
last visited Tracking Area ID (i.e. from the old E-UTRAN RAT) in the TAU
Request sent on the target E-UTRAN RAT.
As specified in TS 23.401 [8], (e.g. in clause 5.3.3.1) \"_The last visited
TAI shall be included in order to help the MME produce a good list of TAIs for
any subsequent TAU Accept message_ \".
A typical MME could then include the new (e.g. NB-IoT) Tracking Area ID and
the last visited (e.g. WB-E-UTRAN) TAI in the TAU accept message: this would
result in the UE being able to move between NB-IoT and WB-E-UTRAN without any
signalling to the MME and potentially lead to incorrect charging.
Problems with the Release 13 solution of detach / re-attach include:
1) Excessive signalling:
> 1.1) the Attach procedure is a heavy weight procedure. It needs to include
> an IMEI check and frequently involves re-authentication and re-establishment
> of NAS security keys. With the \"User plane CIoT optimisations\", it would
> probably involve the re-establishment of RRC security. Appropriate PDN
> connections also need to be (re)established.
>
> 1.2) the WB-E-UTRAN to NB-IoT idle mode mobility will normally be performed
> in poor coverage (especially if the device supports eMTC coverage extension
> mode B). Hence the (Detach plus) heavy weight Attach procedures will consume
> a significant amount of radio resources and device battery energy.
>
> 1.3) the rate at which \"smartphones\" loose normal coverage is not
> necessarily visible to normal customers: e.g. TS 23.122 [25], clause 4.6
> allows the \"service indication\" to be displayed for up to 10 second after
> a suitable cell is no longer available.
>
> NOTE: while this clause of TS 23.122 [25] only applies to A/Gb mode, the
> absence of any Iu mode or S1 mode specification may mean that there is no
> standardised limit to the continued display of the service indication
> following loss of coverage.
>
> Hence a future, NB-IoT capable Smartphone might toggle RATs more frequently
> than expected from current smartphone displays and hence generate
> significant UE, radio and core network signalling load.
2) For GPRS/EC-GSM-IoT \NB-IoT idle mode mobility, the data rates are
similar and there is little need to force the disconnection of any PDN
connection.
3) The HPLMN operator should have influence/control over which APNs are
disconnected at inter-RAT change (e.g. so that location services based on SUPL
are not disrupted; (in contrast) high bandwidth consumer video services may
need to be paused; etc.)
Another problem with the introduction of devices capable of supporting both
WB-E-UTRAN and NB-IoT is that the UE WB-E-UTRAN capabilities may be quite
large. Providing these over NB-IoT radio at every inter-RAT change may be
extremely time/resource/power consuming, and in the future it is possible that
the WB-E-UTRAN capabilities could exceed the (approximately) 1500 octet
maximum NB-IoT PDCP packet size. It is preferable to avoid the requirement for
the UE to send WB-E-UTRAN capabilities when the UE is requested to provide the
UE Radio Capability information (e.g. during attach procedure) when camping on
NB-IoT.
Editor\'s note: RAN WGs need to clarify if Suspend/Resume applies across RATs.
If it applies, the solution would need to support Suspend/Resume operation
between WB-E-UTRAN and NB-IoT.
### 5.3.2 Architectural Requirements
\- Intra-PLMN idle mode inter-RAT mobility to and from NB-IoT should be
supported in a radio, core network and battery efficient manner. The other
RATs to be supported are WB-E-UTRAN; GPRS/ EC-GSM-IoT and UTRAN.
\- The solution should enable data sent on different RATs to be correctly
recorded on CDRs.
\- The HPLMN should be able to influence which APNs are maintained,
reconnected or disconnected at inter-RAT idle mode mobility to/from NB-IoT.
## 5.4 Key Issue 4 - Reuse of existing multicast/broadcast architecture
### 5.4.1 Description
A large number of devices can be involved in IoT Service. Each device can
belong to particular group for the IoT Service. Therefore it would benefit if
downlink IoT traffic for the group is delivered via MBMS. It is expected to
mitigate traffic load sending downlink message in which same application
content is carried for the group of IoT devices.
There are two existing architecture for multicast/broadcast which should be
considered in this study:
1) MBMS Architecture (Refer to TS 23.246 [4]) and Group Communication Service
architecture (Refer to TS 23.468 [5])
2) Group message delivery using MBMS via SCEF (Refer to TS 23.682 [3], clause
5.5)
It is expected the type of IoT traffic on multicast/broadcast can be: 1) A
message for the group of UEs (E.g. device triggering to report), and 2)
Software update for the group of UEs. In order to successfully delivery
downlink data via MBMS bearer, the UEs in the group need to be ready to
receive MBMS traffic at that time (i.e. ensure that they are not in \"deep
sleep mode\", e.g. due to PSM or eDRX). Also, the location of the UE needs to
be confirmed whether the MBMS traffic can be delivered to.
Existing architecture can support both roaming and non-roaming scenario. Also
GCSE supports the session continuity, i.e. support for continuous reception of
application data when a UE changes between reception of application data via
EPS and MBMS bearer service. Same level of service continuity can be provided
to SCEF for NIDD.
To provide a new USD or updated USD to the UE, existing MBMS service
announcement mechanisms specified in TS 23.246 [4] and TS 26.346 [6] can be
used. Also, the UE can obtain a new USD or updated USD from the Application
Server as described in TS 23.468 [5].
### 5.4.2 Architectural Requirements
Following related requirement shall be supported:
\- The system should ensure the start time of downlink data delivery using
MBMS for which UEs can be available to receive (i.e. ensure that they are not
in \"deep sleep mode\", e.g. due to PSM or eDRX).
\- The system should support to confirm the location for the UEs in the group
where the data can be delivered via MBMS.
\- The system should support for continuous reception of application data when
a UE changes between reception of application data via EPS and MBMS bearer
service.
Editor\'s note: In order to support MBMS for NB-IoT UE, it needs to be
investigated and confirmed by RAN WG.
In addition, the system needs to consider:
\- How the network entity or Application Server decides and triggers group
message delivery over multicast/broadcast architecture.
\- How to confirm which UEs in the group can receive the multicast/broadcast
data.
NOTE: Application level interaction between the UE and Application Server is
out of scope of this study.
## 5.5 Key Issue 5 - Reuse of Location Services architecture for Control Plane
CIoT EPS optimization
### 5.5.1 Description
Rel-13 defined Control plane CIoT EPS optimization for efficient transfer of
small data. This is mandatory optimization for NB-IoT and some UEs may only
support Control plane CIoT EPS optimization. For such devices it is also
desirable to have support of location services. This key issue is divided into
a number of sub-issues and aims to study the existing location services
architecture as described in TS 23.271 [7] to ensure its suitability for UEs
using Control plane CIoT EPS optimization. Solutions should address any
enhancements needed to the existing location services architecture, if
necessary.
NOTE: CIoT devices with User Plane CIoT EPS optimizations are expected to be
able to reuse existing LCS architecture as described in TS 23.271 [7] without
modifications. However this key issue will take into consideration any
required update to LCS architecture, if identified, for them as well.
### 5.5.2 Sub Issue 5.1 - eDRX and Power Saving Mode (PSM)
With eDRX, the paging cycle for a UE can be as long as 2.91 hours for NB-IoT
during which a UE would be unavailable for positioning - e.g. using a Mobile
Terminated Location Request (MT-LR) as defined in TS 23.271 [7]. With PSM, a
UE can be available for positioning for the duration the UE is in connected
mode (e.g. to perform periodic TAU) and an additional active time in idle
mode. In both cases, a UE could become unpredictably available when a mobile
originated (MO) service is invoked by the UE which would then provide an
opportunity to perform positioning for any deferred MT-LR. This means that an
external client who needs the current location of the UE would need to wait
for a long and unpredictable time for the location to become available. If the
external client is, or is associated with, a person as opposed to a machine,
the ensuing MT-LR location service could become unusable. For example, a user
who wishes to locate a child, asset or pet that has an NB-IoT tracking device
will not normally want to wait up to 3 hours for a response. This means that
eDRX and PSM may cause an unacceptably delayed response for an MT-LR request
for a current UE location.
### 5.5.3 Sub Issue 5.2 - Last Known Location
To overcome some disadvantage of a long response time for locating a UE with
eDRX or PSM as described for sub-issue 5.1, an external client might request a
last known location for a UE or the EPC might return a last known location if
the UE will not become available for a current location for some long period.
In the case of CIoT, there is already a capability to obtain a last known
location of a UE as described in TS 23.682 [3], but the location granularity
is restricted to a cell ID or TA. That may still be useful but it could be
better to enable finer granularity. For example, someone locating a child or
pet might like to know whether the last known location was compatible with the
child being at school or the pet being at home. In addition, the solution in
TS 23.682 [3] is not directly aligned with location support in TS 23.271 [7]
since the architecture and protocols are different. This means that an
operator who offers location services using the 3GPP control plane (CP)
solution defined in TS 23.271 [7] would need to add new capability to support
the solution in TS 23.682 [3]. Thus, while a last known location would be
useful with power saving features, it cannot currently be supported to finer
granularity than a cell ID and may require alignment of the solution in TS
23.682 [3] with the CP location solution in TS 23.271 [7].
### 5.5.4 Sub Issue 5.3 - Deferred Location
When eDRX or PSM is used, a deferred location after a UE becomes available
will be extremely useful to avoid reliance on notifying an external client
when the UE next becomes available and requiring the external client to then
issue an MR-LR request before the UE again becomes unavailable.
Deferred location for the UE availability event is defined for GSM and UMTS
access in TS 23.271 [7] and is able to support change of a serving SGSN or
serving MSC. For E-UTRAN access, the MT-LR procedure for current location has
been extended in Rel‑13 in TS 23.271 [7] to support deferral of a current UE
location until the UE next becomes available but the procedure does not
support change of a serving MME and still assumes an external client will
request a current location rather than a deferred location as is the case for
the deferred location procedure for GSM and UMTS access. That means the
procedure for E-UTRAN is not aligned with deferred location for GSM and UMTS
access where the external client, R-GMLC and H-GMLC are all aware of and
support the deferred location request. As a consequence, for eDRX and PSM with
E-UTRAN access, a deferred MT-LR can only be supported with restrictions.
Thus, while a deferred location for the UE availability event for CIoT would
be highly useful, the current procedure in TS 23.271 [7] for E-UTRAN access is
not aligned with the corresponding procedure for GSM and UMTS access and has
more limitations.
### 5.5.5 Sub Issue 5.4 - Triggered and Periodic Location
Triggered location (based on an area event) and periodic location are defined
for GSM and UMTS access in TS 23.271 [7] but are not defined for E-UTRAN
access. In the case of CIoT, a capability is defined in TS 23.682 [3] to
support reporting of a change in location for a UE, but the solution is not
aligned with location support in TS 23.271 [7] (since it uses a different
architecture and different protocols), provides location with a granularity
only of cell ID or TA and can only report location when a UE becomes available
(e.g. at an interval of 2.91 hours in the case of the longest eDRX paging
cycle).
A more flexible periodic and/or triggered MT-LR capability may be useful to
enable UE location at times other than when a UE normally becomes available
and/or with better granularity than a cell ID. For example, a user might like
to know when a valuable asset, child or pet enters or leaves a particular area
immediately the event occurs rather than say 2 hours later and may in addition
prefer a more accurate current location when such an event occurs.
Thus, the current lack of support for triggered and periodic location for
E-UTRAN access will restrict location support for UEs with eDRX or PSM.
### 5.5.6 Sub-Issue 5.5 - UE Positioning
UEs applicable to CIoT (e.g. UEs that support NB-IoT) are likely to have
limited resources (e.g. limited processing capability, limited memory and only
one RF receiver chain) that may limit positioning support, particularly when
the UE is performing other activities. The limitation may directly impact
downlink positioning methods such as OTDOA as defined in TS 36.355 [14] (or
some variant of OTDOA defined later by RAN for NB-IoT) since downlink
positioning may require a UE to tune away from a serving eNB and measure
signals from other eNBs and to store the resulting measurements until
transferred to the network (e.g. to an E-SMLC). But the scarcity of UE
resources could also impact uplink position methods such as UTDOA if later
extension of this in RAN for NB-IoT requires additional uplink transmission
from a UE.
Thus, limited resources in some UEs (e.g. limited processing, memory, RF
receiver chain) may limit the ability of a UE to support some downlink and
possibly uplink position methods.
### 5.5.7 Sub-Issue 5.6 - UE Positioning Interaction for NB-IoT
For downlink position methods and possibly for some uplink position methods, a
UE and a location server (e.g. an E-SMLC for the 3GPP CP solution defined in
TS 36.305 [15] or an SLP for the SUPL user plane solution [16]) need to
exchange positioning protocol messages - e.g. using LPP defined in TS 36.355
[14] for the 3GPP CP solution. However, for a UE with NB-IoT access,
transmission delay and retransmission delay at level 2 by a UE and eNB will be
higher than for normal LTE or even eMTC access, leading to longer message
delivery times and the need for longer end-to-end retransmit timers.
For LPP messages exchanged for the 3GPP CP solution, the E-SMLC supports
retransmission of undelivered (unacknowledged) LPP messages as defined in TS
36.355 [14]. The minimum retransmission timeout is defined to be 250ms though
an E-SMLC would probably use a longer timer to avoid unnecessary
retransmission. In the case of NB-IoT access, the normal E-SMLC retransmission
timer for E-UTRAN access may be too short leading to excessive retransmission
which would place extra load on the NAS signalling connection.
For SUPL messages exchanged for the OMA SUPL solution [16], the messages would
be treated as data PDUs by the EPC and would therefore likely be transported
using the CP optimization defined for CIoT. In this case, an SLP would support
end-to-end retransmission using TCP but again the retransmission timer could
be too short.
In addition to the longer delivery time, message size for NB-IoT may need to
be constrained as described in a liaison from CT WG1 in S2-163230 [17], in
order to avoid inefficient IP fragmentation. Furthermore, NAS message volume
can be limited for CIoT devices both by limited bandwidth (e.g. 180 KHz for
NB-IoT) and, in the case of data PDUs (which would be applicable to SUPL
location), by explicit serving PLMN and APN rate control.
Thus, for NB-IoT access, longer message delivery time, a preferred maximum
message size and message volume limitation may place limitations on support of
positioning protocol interaction between a UE and a location server for both
the 3GPP CP and OMA SUPL location solutions.
### 5.5.8 Sub-Issue 5.7 - Security for NB-IoT
For a UE with NB-IoT access that supports CP CIoT optimization but not UP data
transfer, AS security is not supported as described in TS 36.300 [18]. For a
UE that supports CP CIoT optimization and either normal UP data transfer or UP
CIoT optimization, AS security would be supported as soon as the UP PDN
connection is created or resumed.
In the case of location using the 3GPP CP solution in TS 36.305 [15], the
possible lack of AS security will not matter when downlink positioning is
supported using LPP, because LPP messages are transferred between the UE and
serving MME inside Uplink and Downlink generic NAS transport messages as
defined in TS 24.301 [19]. All NAS messages will be protected using NAS
security.
Similar protection applies to the OMA SUPL solution. In this case, SUPL
messages will be transferred as data using either (a) CP CIoT optimization or
(b) EPC UP data bearers associated with UP CIoT optimization or non-optimized
UP bearers. NAS security will be available for (a) and AS security for (b).
When the 3GPP CP solution is used with uplink positioning in which
measurements of a UE are obtained by an E-SMLC from the serving eNB using
LPPa, as described in TS 36.455 [20], security may be issue. In this case, any
RRC signalling used between the serving eNB and UE to coordinate positioning
and/or receive measurements from a UE may not be security protected. In
addition, any transmission from a UE at the RRC level that is measured by the
serving eNB may not be security protected and would thus be easier for other
entities to intercept and measure.
Thus, for NB-IoT access, support of uplink positioning using LPPa and RRC may
not be secure in the case of CIoT CP optimization with no UP data bearers
supported or established.
This sub-issue only exists if RAN introduces RRC measurements in Rel-14 for
which lack of AS security would be a problem.
### 5.5.9 Sub-issue 5.8 - Message size adaptation according to coverage level
TS 23.271 [7] identifies TS 36.305 [15] as the \"Stage 2 functional
specification of UE positioning in E-UTRAN\". In turn TS 36.305 [15]
references the stage 3 protocol in TS 36.355 [14]\" LTE Positioning Protocol
(LPP)\".
Clause 6.5.1.5 of TS 36.355 [14] has a Note that indicates multiple messages
may be sent if more than 24 Neighbour Measurement Reports are needed. A very
quick estimate indicates that this implies a maximum message size of around
[275] octets.
In TS 24.301 [19], 3GPP Working Group CT 1 created the Generic NAS Transport
message to carry location service messages to and from the UE and deliberately
created a message that had an information element able to carry greater than
255 octets.
Depending upon the UE\'s coverage level, transmission of 275 octets can take a
dramatically different time (e.g. from a few ms to, say, 6 seconds).
It seems likely that the timeliness of delivering location reports (e.g. to
the GMLC) can be improved if the e-SMLC is made aware of the coverage level
that the UE has, and then the e-SMLC does not request unduly large reports if
the UE is in extremely poor coverage.
With the existing Release 13 stage 2 requirement (TS 23.401 [8], version
13.7.0) for the E-UTRAN to report the coverage level to the MME, the MME can
relay this information onto the e-SMLC with the RAT Type.
## 5.6 Key Issue 6 - Inter UE QoS for NB-IoT Control Plane Optimisation
### 5.6.1 Description
With the Control Plane CIoT EPS optimisation, the eNB currently has no way to
differentiate between subscribers. This is currently the case even after data
has been sent in the RRC Connection Setup Complete message as there is no QoS
information transfer to the eNB for the Control Plane CIoT EPS optimisation.
However, the eNB may wish (or the operator need) to prioritise the eNB\'s
resources between multiple requests from different subscribers for the
resources needed by \"messages 4 and 5\" of the RRC connection establishment,
and subsequently for later data packets.
Whether or not the eNB needs a full QoS profile to support data transfer after
\"message 5\" is for further study.
### 5.6.2 Architectural Requirements
In order to schedule resources for RRC connection establishment messages 4 and
5, the priority level of different users needs to be signalled from some
entity to the eNB before message 4 is sent.
Editor\'s note: additional architectural requirements may be added.
## 5.7 Key Issue 7 - CN overload control for data transfer via Control Plane
EPS CIoT Optimization
### 5.7.1 Description
The recently agreed Rel-13 solution for CIoT data transmission over the
control plane signalling - Control Plane CIoT EPS Optimisation is likely to
add extra load to the network control entities like MME. Rate control of user
data using CIoT EPS optimisation is available as defined in TS 23.401 [8],
clause 4.7.7. However, if a temporary overload occurs, the network would
benefit from proper handling of the overload from data transfer via control
plane CIoT EPS Optimisation.
### 5.7.2 Architectural Requirements
The following architecture requirement shall be supported:
\- The system should support procedures to handle the CN overload from data
transmission via Control Plane CIoT EPS Optimisation.
# 6 Solutions
## 6.1 Solution 1 - Authorization of Coverage Enhancements using Enhanced
Coverage Allowed parameter in HSS
### 6.1.1 Description
#### 6.1.1.1 General
This solution addresses the Key Issue 1 - Authorization of Coverage
Enhancements.
To authorize coverage enhancement for specific UEs it is proposed to introduce
a new subscription parameter in HSS called Enhanced Coverage Allowed
parameter. This parameter is kept in HSS data and specifies per PLMN whether
enhanced coverage functionality is allowed or not allowed for the UE. Enhanced
Coverage Allowed parameter can be configured in HSS via O&M. 3rd party service
provider, via SCEF, can query the status of, or request MNO to enable/disable
Enhanced Coverage.
#### 6.1.1.2 Enhanced Coverage Allowed indication to the UE
During Attach or TAU/RAU procedure this parameter is downloaded to MME/SGSN
and stored as part of MME/SGSN MM and EPS bearer context. This is shown in
figure 6.1.1.2-1 below:
Figure 6.1.1.2-1: Enhanced Coverage Allowed indication to the UE
If the UE includes the support of authorization for Enhanced Coverage,
MME/SGSN sends Enhanced Coverage Allowed parameter to the UE in NAS accept
message. UE shall use this parameter value to determine if enhanced coverage
feature should be used or not. If UE doesn\'t receive this indication then UE
follows Rel-13 behaviour.
The UE assumes Enhanced Coverage is authorized unless explicitly not allowed
by a PLMN.
#### 6.1.1.3 Enhanced Coverage Allowed indication to the eNB
Figure 6.1.1.3-1: Paging with Enhanced Coverage
As shown in figure 6.1.1.3-1, MME/SGSN, on receiving Downlink Data
Notification, checks if Enhanced Coverage Allowed parameter is set in MME/SGSN
MM or EPS bearer context.
If the MME/SGSN has Information for Enhanced Coverage stored, and Enhanced
Coverage Allowed parameter is set (i.e. value indicate enhanced coverage is
authorized or enabled) then the MME/SGSN shall include Information for
Enhanced Coverage in the Paging message for all eNBs selected by the MME/SGSN
for paging.
If the MME/SGSN has Information for Enhanced Coverage stored, and Enhanced
Coverage Allowed parameter is not set (i.e. value indicate enhanced coverage
is not authorized or disabled) then the MME/SGSN shall not include Information
for Enhanced Coverage in the Paging message for all eNBs selected by the
MME/SGSN for paging. In this case eNB doesn\'t set CE mode B for the UE.
#### 6.1.1.4 Control of enhanced coverage by 3^rd^ party service provider
Figure 6.1.1.4-1 shows the procedures to allow the 3rd party service provider
to query the status of, or enable, or disable Coverage Enhancements
functionality per UE.
Figure 6.1.1.4-1: Control of enhanced coverage by 3rd party service provider
1\. The SCS/AS sends an Enhanced Coverage Request (External Identifier(s) or
MSISDN(s), SCS/AS Identifier, SCS/AS Reference ID, Type) message to the SCEF.
Type indicates if the request is to get status of, or to enable, or to disable
the enhanced coverage.
2\. The SCEF stores SCS/AS Reference ID, SCS/AS Identifier. The SCEF assigns
an SCEF Reference ID. Based on operator policies, if either the SCS/AS is not
authorized to perform this request (e.g. if the SLA does not allow for it) or
the Enhanced Coverage Request is malformed or the SCS/AS has exceeded its
quota or rate of submitting Enhanced Coverage requests, the SCEF performs step
9 and provides a Cause value appropriately indicating the failure result.
3\. The SCEF sends an Enhanced Coverage Request (External Identifier or
MSISDN, SCEF ID, SCEF Reference ID, Type,) message to the HSS.
NOTE 1: It would be discussed under normative phase if Enhanced Coverage
request to enable or disable CE is done via both S6t and O&M interface, or via
O&M interface only.
4\. The HSS examines the Enhanced Coverage Request message, e.g. with regard
to the existence of External Identifier or MSISDN, whether any included
parameters are in the range acceptable for the operator, whether the Enhanced
Coverage is supported by the serving MME/SGSN. If this check fails the HSS
follows step 8 and provides a Cause value indicating the reason for the
failure condition to the SCEF.
If the Type is to get the current status of enhanced coverage HSS retrieves
the value and procedure follows at Step 8. Else If the Type is to enable or to
disable the enhanced coverage, HSS sets enhanced coverage Allowed parameter to
the appropriate value and the procedure continues at step 5.
5\. If required by the specific Enhanced Coverage Request Type and when
Enhanced Coverage is supported by the serving MME/SGSN, the HSS sends an
Insert Subscriber Data Request (Type, SCEF ID, SCEF Reference ID) message to
the MME/SGSN.
6\. Based on operator policies, the MME/SGSN may reject the request (e.g.
overload or HSS has exceeded its quota or rate of submitting enhanced coverage
requests defined by an SLA).
The MME/SGSN set or reset (i.e. Enable or disable) Enhanced Coverage Allowed
parameters in MME/SGSN context.
The MME/SGSN will transfer the Enhanced Coverage allowed parameters stored as
part of its context information during an MME/SGSN change.
NOTE 2: UE is informed of the updated Enhanced Coverage allowed parameters
value at next TAU, or based on the local policy, network can detach the UE
indicating re-attach is required.
7\. If the Enhanced Coverage allowed parameter value update is successful, the
MME/SGSN sends an Insert Subscriber Data Answer (Cause) message to the HSS.
MME/SGSN may include the Enhanced Coverage allowed parameter value in the
Insert Subscriber Data Answer message.
8\. The HSS sends an Enhanced Coverage Response (SCEF Reference ID, Cause)
message to the SCEF. HSS includes result = success/failure and the Enhanced
Coverage allowed parameter value (in case of success) in the Enhanced Coverage
Response message.
In the case of UE mobility, the HSS determines whether the new MME/SGSN
supports Enhanced Coverage.
9\. The SCEF sends an Enhanced Coverage Response (SCS/AS Reference ID, Cause)
message to the SCS/AS. HSS includes result = success/failure and the Enhanced
Coverage allowed parameter value (in case of success) in the Enhanced Coverage
Response message.
If the HSS detects that the current serving MME/SGSN cannot support Enhanced
Coverage (e.g. after a UE mobility event), the HSS may notify the SCEF that
the Enhanced Coverage allowed is disabled, and shall Set Enhanced Coverage
allowed to disabled value.
### 6.1.2 Impacts on existing nodes and functionality
UE
\- Receives Enhanced Coverage Allowed parameter as part of NAS procedure (i.e.
ATTACH ACCEPT, TAU/RAU ACCEPT).
\- Stores Enhanced Coverage Allowed parameter per PLMN and use Enhanced
Coverage capability (i.e. indicating CE capability to the network) based on
value of Enhanced Coverage Allowed parameter.
eNB
\- No impacts.
MME/SGSN:
\- Stores Enhanced Coverage Allowed parameter as part of MM context.
\- Receives Enhanced Coverage Allowed parameter from HSS.
\- Determine providing Enhanced coverage information to eNB based on the value
of Enhanced Coverage Allowed parameter.
HSS
\- Contains subscription information whether the UE is allowed to use Coverage
Enhancement.
\- Interface with SCEF to provide information if enhanced coverage is enabled
or disabled.
\- Interface with SCEF to provide.
SCEF
\- Interface with HSS to query status of enhanced coverage capability, or to
enable, or to disable the enhanced coverage capability.
\- Interface with SCS/AS to receive request for status query, or to
enable/disable the enhanced coverage capability. Also provide response to
SCS/AS.
### 6.1.3 Solution Evaluation
## 6.2 Solution 2: Solution for Authorization of use of Coverage Enhancement -
UE configuration
### 6.2.1 Description
#### 6.2.1.1 General
This solution addresses the Key Issue 1 - \"Authorization of use of Coverage
Enhancement\".
To avoid that the UE attempts to use Coverage Enhancements the network can
provision the UE with the information whether the UE is allowed to use
Coverage Enhancements.
#### 6.2.1.2 Procedure
Figure 6.2.1.2-1: Authorization of CE at Attach
1\. The UE is provisioned/configured with whether the UE is authorized to use
CE e.g. per PLMN by a provisioning server in HPLMN (or during manufacturing).
The Provisioning server may update the UE at any time, but it is assumed that
such updates are seldom done.
2\. The UE enables/disables its CE capability according to the
provisioning/configuration setting. Updating the UE capability may require a
detach/attach to the network.
3\. The UE accesses the network with or without indicating using CE depending
on whether CE is enabled or disabled and depending on the coverage situation
CE is used. If the UE does not indicate CE to RAN, then RAN does not upload CE
information to MME, i.e. the MME in such case will not page with CE
enhancements.
### 6.2.2 Impacts on existing nodes and functionality
#### 6.2.2.1 UE
Support of being provisioned with information whether the UE is allowed to
make use of Coverage Enhancements and the logic to pass the information from
higher layer (NAS) to lower layer (AS). AS logic to avoid the usage of
Coverage Enhancements in case higher layer indicated that it is not allowed.
#### 6.2.2.2 RAN
None.
Editor\'s note: It is to be confirmed that RAN does not upload CE information
to CN if the UE does not make use of CE or does not indicate CE capabilities
to RAN.
#### 6.2.2.3 CN
Support provisioning the UE with information whether the UE is allowed to make
use of Coverage Enhancements.
### 6.2.3 Solution Evaluation
## 6.3 Solution 3: Subscription based authorization via NAS
### 6.3.1 Description
#### 6.3.1.1 General
This solution addresses the Key Issue 1 - \"Authorization of use of Coverage
Enhancement \".
The solution principle is:
\- HSS contains subscription information whether the UE is allowed to use
Coverage Enhancement and, optionally, of the allowed maximum CE level range;
\- At access to the network the UE provides its capabilities to support
Enhanced Coverage via NAS.
\- The CN verifies (using the subscription) whether the UE is allowed to use
CE and informs the UE in a NAS message, and the CE authorization information
may include:
\- A CE indication to indicate whether the UE can use the CE functionality or
not;
\- The authorized CE level range.
Editor\'s note: Details of CE levels is dependent on RAN WGs.
\- The UE stores the information (per PLMN) and will not make use of EC for
this PLMN in case CN indicates the UE is not allowed.
#### 6.3.1.2 Procedure
Figure 6.3.1.2-1 below described the main steps of this solution. New node
information elements, messages or steps are marked in red.
Figure 6.3.1.2-1: Authorization of CE at Attach
1\. The UE Attaches to the network and provides the UE CE support capability.
2\. If there is no UE subscription information in the MME, the MME retrieves
the subscription information for the UE. This includes also the _CE
Subscription information_ (i.e. CE enabled/disabled and, optionally, the
allowed CE level range).
3\. The MME enforces the _CE authorization information_ based on the _UE CE
support capability_ , and the _CE subscription information_. If the UE
supports the CE capability and has subscribed to the CE functionality, the MME
indicates that the UE can use the CE functionality in the _CE authorization
information_. If the _allowed CE level range_ is included in the subscription
information, the MME also includes it in the _CE authorization information._
4\. The MME provides the Attach accept message to the UE, including the _CE
authorization information_. Based on the received information the UE decides
whether to make use of CE for the PLMN.
5\. The UE enters RRC_Idle when there is no data or signalling to be sent or
received.
6: Once data or signalling is needed, the UE determines the CE level based on
AS information and itchecks if the AS CE level is consistent with the _CE
authorization information_. If the CE functionality is authorized to be used
and the AS CE level does not belong to the authorized CE level range, then the
UE initiates the Random Access procedure.
Editor\'s note: It is FFS whether the UE should be able to still initiate the
Random Access procedure with some specific charging ratio applied in the CN.
7: The UE selects the PRACH resources based on the determined CE level and
initiate the Random Access procedure.
NOTE 1: The eNB may also check if the CE level used by UE is consistent with
the _CE authorization information_ or not (the eNB may obtain the CE
authorization information from MME using Solution 4: \"Subscription based
authorization via S1\").
### 6.3.2 Impacts on existing nodes and functionality
#### 6.3.2.1 UE
\- Support receiving and storing per PLMN whether the UE is authorized to make
use of CE and the allowed CE level range.
\- Avoid using and providing the capability for CE in case the UE is not
authorized to use CE in the PLMN
#### 6.3.2.2 RAN
\- No impact.
NOTE: If RAN is to authorize the CE, RAN impacts are as described in Solution
4: Subscription based authorization via S1.
#### 6.3.2.3 CN
\- Contains subscription information whether the UE is allowed to use Coverage
Enhancement and, in case, the allowed CE level range.
\- Receive from UE whether UE is capable of CE.
\- Use subscription information to decide whether UE is authorized to make use
of CE and forward the decision to the UE.
### 6.3.3 Solution Evaluation
## 6.4 Solution 4: Subscription based authorization via S1
### 6.4.1 Description
#### 6.4.1.1 General
This solution addresses the Key Issue 1 - \"Authorization of use of Coverage
Enhancement\".
The solution principle is:
\- HSS contains subscription information whether the UE is allowed to use
Coverage Enhancement;
\- At access to the network the UE provides its capabilities to support
Enhanced Coverage;
\- The RAN forwards the UE CE capability to CN;
\- The CN verifies (using the subscription information) whether the UE is
allowed to use CE and informs RAN, e.g. the CE authorization information may
include the following:
\- A CE indication to indicate whether the UE can use the CE functionality or
not.
Editor\'s note: Details of CE levels is dependent on RAN WGs.
\- The RAN enforces the CN decision and informs the UE.
\- The UE stores the information (per PLMN) and will not make use of EC for
this PLMN in case RAN indicates the UE is not allowed.
#### 6.4.1.2 Procedure
Figure 6.4.1.2-1 below describes the main steps of this solution. New node
information elements, messages or steps are marked in red.
Figure 6.4.1.2-1: Authorization of CE at Attach
1\. The UE determines the CE level based on the radio channel quality.
2\. It attaches to the network and provides the UE capability to support CE to
RAN.
3\. If there is no _CE authorization information_ for the UE stored in the
eNB, the eNB will forward the _UE CE support capability_ to the MME.
4\. If there is no UE subscription information in the MME, the MME retrieves
the subscription information for the UE.
5\. The MME generates the _CE authorization information_ from the UE _CE
support capability_ and the _CE subscription information_. The _CE
authorization information_ includes an indication of whether the UE is
authorized or not to use the CE feature.
6\. The MME sends an S1 AP message to the RAN with the NAS message and the _CE
authorization information_.
7\. The eNB enforces the CE authorization based on the _CE authorization
information._
8a. If CE authorized, the RAN forwards the NAS accept message to the UE.
8b. Alternatively, if the CE functionality is not authorized to use then the
eNB may refuse the access request of the UE with some cause value (e.g. CE
functionality NOT authorized).
### 6.4.2 Impacts on existing nodes and functionality
#### 6.4.2.1 UE
\- Support receiving and storing per PLMN whether the UE is authorized to make
use of CE.
\- Avoid using and providing the capability for CE in case the UE is not
authorized to use CE in the PLMN.
#### 6.4.2.2 RAN
\- Forwarding UE CE capability to CN.
\- Enforce decision whether UE is allowed to use CE received from CN.
#### 6.4.2.3 CN
\- Contains subscription information whether the UE is allowed to use Coverage
Enhancement.
\- Receive from eNB whether UE is capable of CE.
\- Use subscription information to decide whether UE is authorized to make use
of CE and forward the decision to RAN.
### 6.4.3 Solution Evaluation
## 6.5 Solution 5 - Reliable communication service between UE and SCEF
### 6.5.1 Description
#### 6.5.1.1 General
This solution addresses the Key Issue 2 - Reliable communication service
between UE and SCEF.
#### 6.5.1.2 Alternative 5a: Based on UE - SCEF acknowledgment
##### 6.5.1.2.1 Option 1: new transport protocol
This alternative relies on defining new UE-SCEF transport protocol that
provide acknowledgement of data send between UE and SCEF. For MO data SCEF
will send acknowledgment and for MT data UE sends acknowledgment. SDT PDU is
used between UE and SCEF for reliable delivery of MO/MT data.
SDT PDU at could contain:
\- Source Identifier: Identifies the sender of SDT-PDU.
\- Destination identifier: Identifies the receiver of SDT-PDU.
\- Transaction Identifier: Identifies a particular MO or MT transaction.
\- Message Type: Identifies if the PDU is a new message that requires no
acknowledgement, a new message that requires an acknowledgement, or an
acknowledgment.
NOTE: The Source and Destination Identifiers may not be needed if we continue
the Release 13 assumption that an APN is associated with each UE Application
to SCEF connection.
Along with the allocated EBI, SDT PDU will be encapsulated in the NAS message
(similar to how SMS o/ NAS works today) to allow MO/MT data.
##### 6.5.1.2.2 Option 2: MQTT-SN used as transport protocol
MQTT is a publish-subscribe-based lightweight messaging protocol designed to
work in TCP/IP networks. MQTT-SN uses a publish/subscribe architecture and is
designed to extended the reach of MQTT beyond TCP/IP into non TCP/IP networks.
NOTE: This option applies also to NIDD via SGi.
MQTT-SN is the protocol used between a client (which publishes information to
a broker on a topic and can subscribe by registering to a broker) and a
gateway (located between client and broker to support wireless and sleepy).
The broker distributes messages received from publishers to all subscribers of
a topic.
MQTT-SN has been designed to run over most network transports, and does not
make any assumptions about the reliability of those networks, and only needs a
simple datagram transport to function.
The MQTT-SN protocol can be reused to provide reliability for the message
transfer. For non-IP data transmission between a UE and SCEF, the SCEF can act
as the GW, using MQTT-SN as the message transport.
The SCEF may act as the source or destination of the messages itself,
therefore the complete MQTT publisher/subscriber architecture it not required,
i.e. the SCEF can extract the data from the MQTT-SN protocol and \"relay\" it
to the application server using any methods supported by the SCEF. An example
of this is shown in Figure 6.5.1.2.2-1.
Figure 6.5.1.2.2-1: Example of SCEF extracting message from MQTT-SN and
passing it to the Application Server
The messages to support actions such as register on a GW, publish messages,
subscribe/unsubscribe to a topic, etc. and have a matching acknowledgement
message. MQTT-SN allows a mixing of message which require acknowledgements and
those that do not.
Multiplexing messages of different types can be done by the topic on which a
message is published, with each topic representing a different property of the
device, for example different sensors, actuators or services could use
different topics.
MQTT-SN can be used a message transport between a UE and SCEF to provide
reliable transfer of higher layer messages. The MQTT-SN message header has a
size ranging from 2 to 4B.
Figure 6.5.1.2.2-2: Protocol stack for reliable UE-SCEF communication based on
MQTT-SN
##### 6.5.1.2.3 Option 3: CoAP used as transport protocol
CoAP, defined by the IETF in RFC 7252 [9], \"is a specialized web transfer
protocol for use with constrained nodes and constrained (e.g. low-power,
lossy) networks\". It has been further extended to support enhancements such
as observation of resources (RFC7641 [10]) and is being enhanced further to
support block-wise transfers [11] so there is no need to rely on IP
fragmentation. There are further enhancements and guidelines for interactions
between CoAP and HTTP being defined in [12].
NOTE: This option applies also to NIDD via SGi.
CoAP is based on a client server architecture and has been designed for small
sleepy devices, typically with the device providing a CoAP server and the CoAP
client querying resources of the device using a request / response model.
The CoAP servers (UE) present their resources, for example, the state of
sensors, device management statuses, etc. so they can be read by a CoAP client
(SCEF). A CoAP resources may also be written to, and therefore they can be
used to trigger actions, such as changing the state actuators, or perform
device management operations, etc.
The addition of observation in RFC 7641 allows a CoAP client (SCEF) to
configure the CoAP server (UE) to autonomously send notifications when a
resources changes state without the CoAP client (SCEF) making a request each
time. In a NB-IoT device this MO data could trigger a connection to the
network.
CoAP requests and responses can be transferred with or without reliability, on
a per request / response basis. This means that a single CoAP resource may be
accessed reliably or not, and not all resources of a CoAP server have to share
the same level of reliability, allowing flexibility for the CoAP server and
client, depending upon what is represented by the resource.
CoAP has been designed to use a datagram-oriented transport, with RFC 7252
providing details of how to transport the CoAP messages over UDP. The IETF
Constrained RESTful Environments working group currently has drafted
specifications that define how to run CoAP over other transports, such as TCP,
TLS and WebSockets. In the past there have been drafts which defined how to
use CoAP over SMS and other transports.
As the payload that is transported is not defined by CoAP, the SCEF can take
the data transported by CoAP to/from the UE and then \"relay\" it using other
protocols to the application server, decoupling the UE-SCEF protocol from the
SCEF-Application Server protocol. An example of this is shown in Figure
6.5.1.2.3-1.
Figure 6.5.1.2.3-1: Example CoAP architecture with relay
There is no requirement to implement the CoAP proxy functionality in the SCEF
and it could be an implementation option for the SCEF should a complete CoAP
transport be required end to end. The CoAP message header is 4B long [10].
With non-IP transports the MME can set a non-IP MTU which may be smaller than
the resource being transferred. The support of block-wise transfers allows
CoAP to send / receive resources over transports which have a smaller MTU than
the resource being transferred, without the transport having to provide
fragmentation (e.g. IP fragmentation), and without the resource having to be
fragmented by the application layer.
It can be seen that CoAP is designed to use different datagram based
transports and therefore can be easily used to support non-IP reliable
transfers between a UE and SCEF, including flexibility for when to use the
reliable transfers mechanism on a per message basis and provide support for
transferring data larger than the link MTU without modification to the
application or transports layers.
Figure 6.5.1.2.3-2: Protocol stack for UE-SCEF reliable communication based on
CoAP
#### 6.5.1.3 Alternative 5b: Based on UE - MME and MME - SCEF acknowledgment
This alternative is based on principle of reliable delivery between UE and MME
coupled with reliable delivery between MME and SCEF.
T6a is Diameter based and Diameter provide reliable delivery but it cannot
guarantee successful processing at the data receiving node. This issue is
mitigated by adding acknowledgement of each non- IP data delivery (NIDD)
message. Given this we can assume that T6a protocol between MME and SCEF
currently provides reliable data delivery.
In Rel-13 new NAS message - Control Plane Service Request is defined for UE
using Control Plane CIoT EPS optimization for initial NAS PDU data delivery
between UE and MME. MME also sends acknowledgement in Service Accept message.
This provide reliable delivery for first MO data packet. However subsequent
data packet while UE is in ECM_CONNECTED is not guaranteed. Subsequent message
for Control Plane EPS optimizations while UE is in connected mode are carried
in ESM Data Transport Message which is not acknowledged.
For this alternative, some NAS messages (e.g. ESM Data Transport) would need
to be enhanced to provide acknowledgment of data delivery between UE and MME.
#### 6.5.1.4 Alternative 5c: Based on hop by hop acknowledgment
This alternative is based on principle of hop by hop reliable delivery that is
reliable delivery between UE and eNB, coupled with reliable delivery between
eNB and MME, coupled with reliable delivery between MME and SCEF.
As we discussed in alternative 5b, we can assume that T6a protocol between MME
and SCEF currently provides reliable data delivery.
Between UE and eNB, RLC acknowledged mode is could be used between UE and eNB
for reliable delivery of data.
Between eNB and MME, S1-AP would needs to be enhanced to provide
acknowledgement of S1-AP messages carrying NAS PDU with data. The internal eNB
functionality to e.g. determine RLF and support such an S1-AP procedure is
provided as described in alternative 5d, below.
Between the MME and SCEF, T6a needs to be enhanced to carry the
acknowledgements from the MME to the SCEF.
#### 6.5.1.5 Alternative 5d - Based on S1AP NAS NON DELIVERY INDICATION
procedure
As per legacy specification TS 36.413 [26] downlink NAS message delivery is
supervised by the eNodeB. If eNodeB is unable to deliver a NAS message to the
UE it uses the S1AP NAS NON DELIVERY INDICATION procedure (see TS 36.413 [26])
whereby it sends the non-delivered NAS message back to the MME.
It is proposed to use that procedure when NAS message that contains data sent
from the SCEF to the UE can\'t be delivered over the radio link e.g. due to UE
experiencing a RLF (no handover supported for EPS CP CIOT Optimization).
Subsequent to reception of the S1AP NAS NON DELIVERY INDICATION message that
carries the non-delivered data, the MME stores that data for a configurable
period of time. If, as a result of the RLF, the UE performs a TAU, then the
MME can re-attempt to deliver that data to the UE. If the UE does not do a
TAU, the MME informs the SCEF that that PDU has not been delivered.
From the TS 36.413 [26].
Figure 6.5.1.5-1: NAS NON DELIVERY INDICATION Procedure
When the eNB decides not to start the delivery of a NAS message that has been
received over a UE-associated logical S1-connection or the eNB is unable to
ensure that the message has been received by the UE, it shall report the non-
delivery of this NAS message by sending a NAS NON DELIVERY INDICATION message
to the MME including the non-delivered NAS message within the _NAS-PDU_ IE and
an appropriate cause value within an appropriate _Cause_ IE, e.g. \"S1 intra
system Handover Triggered\", \"S1 inter system Handover Triggered\" or \"X2
Handover Triggered\".
### 6.5.2 Impacts on existing nodes and functionality
#### 6.5.2.1 Alternative 5a
Solution 5, Option 1 (new transport protocol), Solution 5, Alternative a,
Option 2 (MQTT-SN based) and Solution 5, Alternative a, Option 3 (CoAP based)
impact UE and SCEF: both UE and SCEF need to be able to encapsulate/de-
capsulate transport layer datagrams in order to provide a reliable
communication.
eNB, MME, S/PGW are not impacted.
#### 6.5.2.2 Alternative 5b
UE: Some NAS messages (e.g. ESM Data Transport) would need to be enhanced to
provide acknowledgment of data delivery between UE and MME.
MME: Some NAS messages (e.g. ESM Data Transport) would need to be enhanced to
provide acknowledgment of data delivery between UE and MME.
#### 6.5.2.3 Alternative 5c
MME (1): Stores the data received in NAS NON DELIVERY INDICATION for a
configurable time and re-attempts to transfer the data to the UE at subsequent
connectivity with the UE. It can be assumed that this is part of legacy
implementation.
MME (2): MME informs SCEF of data that is not delivered.
MME (3): MME promptly informs SCEF of data that IS delivered.
UE: No impact.
eNB: S1-AP modified so that MME can request eNB to positive acknowledge for
downlink NAS Data messages.
S/PGW: No impact.
SCEF: Handles reports from MME.
#### 6.5.2.4 Alternative 5d
MME (1): Stores the data received in NAS NON DELIVERY INDICATION for a
configurable time and re-attempts to transfer the data to the UE at subsequent
connectivity with the UE. It can be assumed that this is part of legacy
implementation.
MME (2): MME informs SCEF of data that is not delivered.
UE: No impact.
eNB: No impact.
S/PGW: No impact.
SCEF: Handles reports from MME.
### 6.5.3 Solution Evaluation
#### 6.5.3.1 Uplink message delivery
All the options in alternative 5a provide guaranteed delivery of uplink
messages to the SCEF.
Alternative 5b provides guaranteed delivery of uplink messages to the MME, but
the UE cannot be certain that a communications network failure did not occur
between MME and SCEF.
Alternatives 5c and 5d provide guaranteed delivery of messages to the eNB, but
the UE cannot be certain that a communications network failure did not occur
between eNB and MME, or between MME and SCEF.
#### 6.5.3.2 Downlink message delivery
Alternatives 5a, 5b, 5c can provide guaranteed delivery of downlink messages
to the UE.
Alternatives 5d can provides the SCEF with information on which downlink
messages were not delivered to the UE, but the latency of the negative
indications from the eNB to MME and subsequently from MME to the SCEF about
the non-delivery is difficult to determine, e.g. especially in the case of
multiple MT packets and a UE in poor/extreme coverage.
#### 6.5.3.3 Reduction in UE transmissions
Alternatives 5a and 5b still require the UE to transmit acknowledgement
packets (to the SCEF/MME for downlink messages and, for uplink messages, to
the eNB for the layer 2 ack to the SCEF/MME\'s ACK). This has a negative
impact on battery life.
Alternatives 5c and 5d avoid the need for additional UE transmissions for
\"acknowledgement traffic\".
#### 6.5.3.4 Evaluation of options within alternative 5a
The options within alternative 5a provide a mechanism for the SCEF to
determine if the data was successfully delivered to the UE (e.g. in case of UE
radio link failure, or if the UE is out of coverage) and for the UE to
determine if the data was successfully delivered to the SCEF (e.g. in case of
T6a/b connection failure, SCEF congestion, etc.).
Options 2 and 3 involve binding the existing protocols, MQTT-SN and CoAP
respectively, to NIDD. They are not customized for NIDD, thus they are not
optimal for MNOs to offer as a value added service to their customers. A
customer could create their own binding to NIDD and run CoAP or MQTT in an
\"over the top\" manner.
Option 1 requires that a protocol be created specifically for NIDD. However,
if the protocol is created, it can be optimised so that an MNO may offer it as
a value added service to their customers. Applications that take advantage of
the service would not need to generate acknowledgements.
#### 6.5.3.5 Other aspects
The options in alternative 5a do not require support from the VPLMN.
Alternatives 5b and 5d require the MMEs in the VPLMNs to be upgraded.
Alternative 5c requires the eNBs and the MMEs in the VPLMNs to be upgraded.
## 6.6 Solution 6: Inter RAT idle mode mobility to/from NB-IoT
### 6.6.1 Description
This solution addresses Key Issue 3 - \"Inter RAT idle mode mobility to/from
NB-IoT\".
The high level components of this solution are as follows:
**1) PDN connections**
a) At Attach time (or movement into a new MME/SGSN), in \'subscriber data\',
the HSS informs the MME/SGSN what to do at any future inter-RAT mobility.
The choices could be to maintain the PDN connection; disconnect the PDN
connection with a reactivation request; disconnect PDN connection without
reactivation request; or to leave it to local VPLMN policy.
This information would be supplied per APN (and per non-IP SCEF connection).
This information could be configured for every RAT pair and direction (e.g.
separately for NB-IoT to WB-E-UTRAN, and WB-EUTRAN to NB-IoT). However, the
configuration can probably be simplified to mobility between \"broadband\"
(WB-E-UTRAN and UTRAN) and \"narrowband\" (NB-IoT, GPRS, EC-GSM-IoT)
situations. It is proposed to adopt this simplified approach.
Local MME (and SGSN) configuration is used when the HSS provides no
information, or, when the UE does not support the necessary R13/R14
functionality.
b) At an inter-RAT idle mode mobility event, the source CN node informs the
target CN node of the current RAT type.
> NOTE 1: Additionally, in the Context Request, the target CN node would
> inform the source CN node that it supports inter-RAT idle mode mobility.
c) There are two main alternatives for this step:
c1) The target MME/SGSN node uses the \"[EPS] bearer context status IE\" in
the TAU/RAU Accept to indicate to the UE which bearers should be disconnected,
and, optionally, adds a new IE (with similar coding format) to indicate which
bearers (if any) should be reactivated.
c2) The target MME/SGSN accepts the TAU/RAU and promptly uses [E]SM signalling
to disconnect any PDN connections that should be disconnected. Existing ESM
causes values specified in TS 24.301 [19] and TS 24.008 [21] (e.g. #39,
\'reactivation requested\'; #66 \"Requested APN not supported in current RAT
and PLMN combination\'; and for a dedicated bearer, perhaps #37 \"[EPS] QoS
not accepted\") are used to cause predictable UE behaviour.
> NOTE 2: In case of mobility to 2G/3G, the SGSN uses equivalent existing and
> new signalling to the UE in the RAU Accept.
>
> NOTE 3: Use of EMM signalling avoids (up to 11) bearer specific ESM
> disconnection messages, their acknowledgements, and possibly uncoordinated
> multiple RRC reconfiguration messages as each bearer is released in
> sequence. However, typically a WB-E-UTRAN device moving to NB-IoT would only
> have 1 - 3 PDN connections that need releasing (e.g. QCI 8/9, QCI 5 and QCI
> 1) and the Deactivate EPS Bearer Context Request and Accept messages are
> only about 10 octets in size.
>
> NOTE 4: An alternative is to use OMA LightWeight DM to configure the device
> with regard to which PDNs should be reactivated (or activated) \- however,
> HSS to VPLMN signalling is still needed to avoid disconnection. Also a PDN
> connection is likely to be needed to carry the OMA LW DM messaging. It is
> proposed to not pursue this OMA LW DM concept in this solution.
>
> NOTE 5: the target MME needs to be aware as to whether or not it is
> disconnecting \"all\" of the default bearers AND the UE does not support
> \"attach without PDN connectivity\" - in which case it may still need to
> Detach the UE.
d) The UE obeys the instructions from the MME/SGSN. Any dedicated bearers
associated with default bearers that are to be disconnected/reactivated are
disconnected (but not automatically reactivated).
**2) TAI list handling**
Three alternatives/components for a solution are foreseen to avoid that the
TAI list contains a mix of WB-E-UTRAN and NB-IoT tracking areas.
a) For a mobile that supports both NB-IoT and WB-E-UTRAN, the UE is modified
so that in the TAU Request (and Attach Request) sent to the MME, the UE
reports the last visited TAI on that RAT i.e. the UE has to remember the last
TAI it visited on NB-IoT and the last TAI it visited on WB-E-UTRAN.
This enables a simple MME implementation to continue to construct accurate TAI
lists.
> NOTE 6: The UE needs to indicate its support for this capability to the MME
> (e.g. in the UE Network Capability).
b) An alternative approach is that the MME is mandated to ensure that the TAI
list that it allocates only contains TAs of one RAT type (either NB-IoT or WB-
E-UTRAN).
> NOTE 7: The MME learns the RAT type of the TAC from the S1-Setup procedure.
c) the UE could be mandated to use a RAT change between NB-IoT and WB-E-UTRAN
as a trigger for a TAU (even if the new TA is in the previously allocated TAI
list).
### 6.6.2 Impacts on existing nodes and functionality
Editor\'s note: Rapid implementation of the solution in 6.6.1 might avoid
expensive, unnecessary R13 MME development.
The impacts listed below are based on the use of option C2 (ESM signalling)
for the PDN connection issue, and, for the TAI issue alternative b (TAI list
only contains TAIs of a single RAT) is used:
UE: The UE shall consider NB-IoT and WB-E-UTRAN as separate RATs when
receiving ESM cause #66. The UE\'s application should take the cause values
into account in determining its subsequent actions.
E-UTRAN: No impact (beyond reduced signalling and radio interface load).
HSS: For each APN, an extra data field describes how the bearers for that APN
should be handled at mobility between broadband and narrowband systems. This
information is sent to MME and SGSN.
MME (1): Uses information from HSS and/or local policy to control transmission
of appropriate Deactivate EPS Bearer Request messages/causes. Does not
implement the Release 13 ban on NB-IoT inter-RAT mobility.
MME (2): Shall ensure that the TAI list allocated to NB-IoT capable UEs does
not include TACs from both NB-IoT and WB-E-UTRAN.
SGSN: Uses information from HSS and/or local policy to control transmission of
appropriate Deactivate Bearer Request messages/causes.
SGW/PGW: No impact.
### 6.6.3 Solution Evaluation
For the TAI list handling, option 2b is the preferred solution as it does not
add complexity to the network or UE, it only affects the MME in the TAI list
assignment, and doesn\'t have UE impact, i.e. it is backward compatible to
Rel-13 devices that support NB-IOT. It also makes the network page only in the
actual RAT the UE is camping on.
For the PDN connection handling during inter-RAT mobility it is preferred to
adopt option c.2 over c.1 as using \"Deactivate EPS bearer context request\"
has the following benefit:
a. An ESM cause value is included. That helps the UE know what the cause of
deactivation is and can take action on it. For instance, the most likely
scenario is that a specific APN is supported over WB-E-UTRAN but not over NB-
IoT. In that case, when the UE performs inter-RAT mobility from WB-E-UTRAN to
NB-IoT, the MME can deactivate the default EPS bearer context for that APN
using the ESM cause value #66 \"requested APN not supported in current RAT and
PLMN combination\" as defined in TS 24.301 [19]. The UE can use this
information to not retry to establish a new PDN connection for that APN while
in NB-IoT. On the contrary, (e.g. as in Release 13\'s Detach message) if the
UE does not receive any reason why a default bearer context was deactivated,
it may try to reactivate the PDN connection.
b. This is already supported by all UEs so it is backwards compatible to
Rel‑13 UEs supporting NB-IoT and WB-E-UTRAN.
c. The number of EPS bearers that need to be released is generally low and the
ESM message sizes are not large. During an idle mode TAU procedure, the
dedicated radio bearers are not established, hence radio bearer
reconfiguration messages would not be needed during the ESM release
procedures. Overall probably 6 or less RRC messages of less than 20 bytes
would be needed to perform any desired EPS bearer deactivation.
The explicit indication in subscription information of which action to take
per APN during inter-RAT mobility to/from NB-IoT is needed in order for the
MME/SGSN to determine whether or not to use ESM cause #66 for RAT specific APN
support.
## 6.7 Solution 7: Inter UE QoS for NB-IoT Control Plane Optimisation using
spare codepoints in Message 3
### 6.7.1 Description
This solution addresses the Key Issue 6 - \"Inter UE QoS for NB-IoT Control
Plane Optimisation\".
The proposed mechanism is as follows:
a) During the PDN connection establishment (on any/all RATs), the MME
allocates a (e.g. one of 4) priority levels to the session (e.g. from a
mapping from the QCI 5/6/8/9 values). This priority level is sent to the UE in
the NAS PDN establishment signalling.
NOTE 1: An alternative is that a standardised mapping is used in the UE to
convert the QCI sent by the MME (since Release 8) in the NAS signalling into
the priority level.
NOTE 2: The priority level for QCI 5 (IMS signalling) might be set the same as
QCI 8 or 9. As GBR bearers are not maintained on NB-IoT, there does not seem
to be a great need to prioritise the transmission of IMS \"Bye\" messages
(which was the key reason for QCI 5\'s high priority in Release 8).
NOTE 3: Whether to use 3 or 4 priority levels is left for the stage 3 design
(e.g. use of 2 spare bits implies 3 levels, but it is not clear that ASN.1 PER
can encode in that manner).
b) At Mobile Originating RRC connection setup the NAS layer supplies the
priority level (of the requesting PDN connection) to the AS layer, and - **for
NB-IoT (only)** \- the AS layer includes the priority level as information in
the RRC Connection Request.
NOTE 4: The NB-IoT RRC Connection Request is allocated the same radio resource
[80 bits] as the NB-IoT RRC Connection Resume message. The RRC Connection
Resume is [16 bits] longer than the Connection Request, hence there is space
to add 2 or 3 bits to signal the priority level in the Connection Request.
NOTE 5: For MO SMS and MO signalling, the priority level need not be used
(i.e. is coded the same as in Release 13).
c) On the NB-IoT RAT, for Mobile Terminating RRC connection setup, either:
i) the UE uses the priority level of the highest priority established PDN
connection in the RRC Connection Request; or,
ii) the MME adds QoS information alongside the downlink NAS (signalling or
data) PDUs that it sends to the RAN. (but this prevents the eNB prioritising
messages 4 and 5).
In the MT case, if the UE has no PDN connections, it does not indicate a
priority level.
d) The eNB uses this priority information in its resource scheduling algorithm
until any more detailed QoS information is received from the MME. To permit
the MME to police the value of the NB-IoT-Radio-Priority used by the UE, the
eNodeB includes any received NB-IoT-Radio-Priority information in the S1-AP
Initial UE message. As an additional alternative, the used NB-IoT-Radio-
Priority can be forwarded from the MME to SGW and PGW for inclusion on the
CDRs.
e) For WB-E-UTRAN, no changes are proposed to the RRC establishment
signalling, largely due to legacy signalling constraints.
### 6.7.2 Impacts on existing nodes and functionality
MME: Needs to map QCI into a priority level and include this in session
management signalling sent to NB-IoT capable UEs.
SGSN: No change (in the UE, the NB-IoT priority level could be 1:1 mapped from
the existing GPRS Radio Priority level, see TS 24.008 [21]).
UE: Stores the priority level allocated by the MME/SGSN. Places priority level
into RRC Connection Request message.
eNB: Uses the received priority level in scheduling scarce resources between
different UEs. Signals the received priority level to the MME to enable the
MME to police the value used by the UE.
S/PGW: No impact (as with data sent on DRBs, the CDR can use the QCI), unless
it is desired to include the priority level on the CDRs.
### 6.7.3 Solution Evaluation
The above solution - using 4 priority levels so that they match the number
used in 2G-GPRS; MME (not SGW/PGW) policing of the used priority level, and
variant (i) from bullet c - is adequate to meet the operator need to
differentiate accesses from different types of users/subscriptions (e.g. to
differentiate professional/utility meters from \'toys\').The eNB needs to use
the priority level sent by the UE to make scheduling decisions. However, this
need not be greatly different to how an eNB needs to react to existing WB-E-
UTRAN RRC establishment causes such as \'emergency\', \'high priority\', MO
signalling, MO-data (which may be SMS related rather than user plane related),
etc.
## 6.8 Solution 8 - Back-off timer for data transmission via control plane
### 6.8.1 Description
#### 6.8.1.1 General
This solution addresses Key Issue 7: CN overload control for data transfer via
Control Plane CIoT EPS Optimisation. It proposes a Control Plane data back-off
timer that suppresses the use of Control Plane CIoT EPS Optimisation for data
transfer by the UE for the duration of this timer.
#### 6.8.1.2 Control Plane data back-off timer during Attach/TAU procedure
One use of the proposed Control Plane data back-off timer is during the UE
Attach or TAU procedures, see Figure 6.8.1.2-1 below.
{width="6.071527777777778in" height="2.713888888888889in"}
Figure 6.8.1.2-1: Control Plane data back-off timer at registration
1\. The UE initiates Attach or TAU Request with preferred network behaviour
for Control Plane CIoT Optimisation. The UE indicates whether it supports
Control Plane data back-off timer.
2\. If the MME is overloaded or close to overload (based on operator set
threshold or policy) with data transfer via the control plane, and if the UE
has indicated support of Control Plane data back-off timer, it may accept the
registration request from the UE but returns Control Plane data back-off timer
within the Attach/TAU Accept message. Then, the UE shall start the back-off
timer and proceed as described in clause 6.8.1.4.
NOTE: If the MME is overloaded or close to overload, but the UE has not
indicated support for Control Plane data back-off timer, the MME can use other
pre-Rel-14 overload control mechanisms, e.g. mobility management back-off
timer, session management back-off timer, etc.
#### 6.8.1.3 Control Plane data back-off timer during Control Plane Service
Request
Another use of the proposed Control Plane data back-off timer is during the
Control Plane Service Request from the UE, see Figure 6.8.1.3-1 below.
Figure 6.8.1.3-1: Control Plane data back-off timer at Control Plane Service
Request
1\. The UE initiates Control Plane Service Request from Idle Mode in order to
transmit data via Control Plane CIoT EPS Optimisation.
2\. If the MME is overloaded or close to overload (based on operator set
threshold or policy) with data transfer via the control plane, and if the UE
has indicated support of Control Plane data back-off timer, the MME may decide
to return a Control Plane data back-off timer to the UE as follows:
\- If the UE has additionally indicated in a Release Assistance Information in
the NAS PDU that no further Uplink or Downlink Data transmissions are
expected, then the MME may process (integrity check/decipher/forward) the
received Control Plane data packet, and send SERVICE ACCEPT to the UE with
Control Plane data back-off timer. The UE interprets this as successful
transmission of the Control Plane data packet, starts the Control Plane data
back-off timer and proceeds as described in clause 6.8.1.4.
\- For all other cases, the MME may decide to not process the received control
plane data packet, but send instead SERVICE REJECT to the UE with Control
Plane data back-off timer. The UE interprets this indication as unsuccessful
delivery of the control plane data packet, starts the Control Plane data back-
off timer and proceeds as described in clause 6.8.1.4.
\- Alternatively, if UE has not provided in the in Control Plane service
request the release assistance information, and the EPS bearer belongs to a
PDN connection not set to Control Plane only, and UE supports user plane EPS
CIoT optimization (or legacy S1-U), then the MME may initiate establishment of
S1-U bearer during Data Transport in Control Plane CIoT EPS optimisation (as
per procedure defined in clause 5.3.4B.4 of TS 23.401 [8]). In this case MME
may also return a Control Plane data back-off timer within the NAS message.
NOTE: If the MME is overloaded or close to overload, but the UE has not
indicated support for Control Plane data back-off timer, the MME can use other
pre-Rel-14 overload control mechanisms, e.g. mobility management back-off
timer, session management back-off timer, etc.
#### 6.8.1.4 UE behaviour while Control Plane data back-off timer is running
While the Control Plane data back-off timer is running, the UE shall not send
any NAS messages to the MME if a NAS data PDU with user data is included (i.e.
data transfer via Control Plane CIoT EPS Optimization), with the following
exception:
\- If the UE is allowed to send exception reporting, it may initiate Control
Plane service request for exception reporting at any time, with one exception.
\- The UE shall not send any exception reporting while a Control Plane back-
off timer received by the UE in response to exception reporting is running.
Editor\'s note: This clause may need to be updated for all priority levels.
If the UE receives mobile terminated Control Plane data while the Control
Plane data back-off timer is running, the UE shall stop the Control Plane data
back-off timer.
### 6.8.2 Impacts on existing nodes and functionality
UE/MME:
\- Back-off timer within Attach/TAU Accept and Service Accept messages.
\- Enabling the feature based on UE support of Control Plane data back-off
timer.
### 6.8.3 Solution Evaluation
## 6.9 Solution 9 - Overload Start message for control plane data only
### 6.9.1 Description
This solution addresses Key Issue 7: CN overload control for data transfer via
Control Plane CIoT EPS Optimisation. It proposes an Overload Start message for
data transfer via Control Plane CIoT EPS Optimisation, see Figure 6.9.1-1
below.
{width="6.259027777777778in" height="3.470833333333333in"}
Figure 6.9.1-1: Overload Start message for data transfer via Control Plane
1\. MME load from Control Plane CIoT EPS Optimisation reaches a threshold. A
decision to restrict data transfer via Control Plane CIoT EPS Optimisation is
taken based on operator\'s policy or configuration.
2\. MME triggers Overload Start message with Control Plane CIoT data parameter
to eNB meaning that the MME is overloaded or close to overload with data
transfer via Control Plane CIoT EPS Optimisation.
3\. When eNB receives a request for data transmission via Control Plane CIoT
EPS Optimisation and there is no MME identity, i.e. set in the RRC message,
the eNB does not select the overloaded MME until Overload Stop message is
received. However, the eNB may still select the overloaded MME for signalling
only or for data transmission via User Plane CIoT EPS Optimisation.
4\. If the overloaded MME is the only MME the eNB is connected to or the RRC
message has an MME identity, i.e. Registered MME parameter in the RRC
Connection Setup Complete message, and that the MME identity indicates the
overloaded MME, then:
> \- Option 1: The eNB may reject requests from UEs for data transfer via
> Control Plane CIoT EPS Optimisation and the eNB may include wait timer in
> the RRC Connection Reject/Release message; or
>
> \- Option 2: The eNB may reject requests from UEs that indicate mo-data in
> the RRC connection establishment cause and also indicate support only for
> Control Plane CIoT EPS Optimisation in the RRC Connection Setup Complete
> message. The eNB may return a wait timer in the RRC Connection Release
> message.
>
> In both, Option 1 and Option 2, the eNB shall not reject requests from UEs
> for data transfer via Control Plane CIoT EPS Optimisation for Exception
> reporting unless rejection of Exception reporting is indicated in the
> Overload Start message in step 2.
NOTE: This solution is with RAN impact. It requires the UE to indicate to eNB
its preference for data transfer via Control Plane CIoT EPS optimisation in
one of the RRC messages during the RRC connection establishment.
### 6.9.2 Impacts on existing nodes and functionality
MME
\- New C-Plane CIoT data parameter within the Overload Start message.
eNB/UE
\- Option 1: Requires the UE to indicate its preference for data transfer via
Control Plane CIoT EPS optimisation to the eNB in one of the RRC connection
establishment messages.
\- Option 1 and Option2: The eNB needs to handle the new C-Plane CIoT data
parameter within the Overload Start message. Also requires from the eNB to
return a wait timer (e.g. modified extended wait timer) that is applicable
only to control plane data initiation by the UEs.
### 6.9.3 Solution Evaluation
Option 1: The overload control from control plane data is applicable to all
UEs with capability for Control Plane CIoT EPS Optimisation. However, it
requires new indication in the RRC signalling (msg3 or msg5) so that the UE
can indicate its intention to use data transfer via Control Plane CIoT
Optimisation.
Option 2: The overload control from control plane data is applicable to all
UEs with capability for Control Plane CIoT EPS Optimisation only, i.e. it does
not control the UEs that are capable for both, Control Plane and User Plane
CIoT EPS Optimisation. It does not require new indication by the UE in the RRC
signalling.
## 6.10 Solution 10 - Enabling and Disabling the Reliable Communication
Service between UE and SCEF
### 6.10.1 Description
#### 6.10.1.1 General
This solution is related to Key Issue 2 - Reliable communication service
between UE and SCEF and is meant to be used with Solution 5, Alternative 5a.
The solution focuses on how the feature should be enabled and disabled.
Reliable data delivery may already be supported by some IoT Applications. If
an IoT Application already supports application level acknowledgements between
the UE Application and SCS/AS, it would be inefficient for the 3GPP system to
enable an additional layer of acknowledgement between the UE and SCEF.
However, if the IoT application does not already support application level
acknowledgements, it may be advantageous for an MNO to offer reliable data
delivery as value added service to their customers (e.g. to avoid UE battery
consumption that can happen due to application level acknowledgement).
For enabling and disabling the reliable data delivery service between the UE
and SCEF, the following 3 options should be considered:
a) Static PDN Configuration.
b) Static PDN Configuration set at PDN Connection Establishment by the UE.
c) Static PDN Configuration set at PDN Connection Establishment by the SCEF.
#### 6.10.1.2 Alternative 10a: Static PDN Configuration
An \"Enable Reliable Communication Service\" indicator is used to indicate if
the service should be enabled on the PDN connection or not.
The Attach Accept or PDN Connectivity Accept messages can be used to indicate
to the UE that the service is enabled for the PDN connection. Protocol
Configuration Options (PCO) can be used to carry the indicator that the
reliable communication service is enabled.
The Create SCEF Connection Response can be used to indicate to the MME that
the service is enabled for the PDN connection. Protocol Configuration Options
(PCO) can be used to carry the indicator that the reliable communication
service is enabled.
#### 6.10.1.3 Alternative 10b: PDN Configuration set at PDN Connection
Establishment by the UE
The UE indicates if the service is enabled when the PDN Connection is
established.
The Attach Request or PDN Connectivity Request messages can be used to
indicate to the Network that the service is enabled for the PDN connection.
Protocol Configuration Options (PCO) can be used to carry the indicator that
the reliable communication service is enabled.
The Create SCEF Connection Request can be used to indicate to the SCEF that
the service is enabled for the PDN connection. Protocol Configuration Options
(PCO) can be used to carry the indicator that the reliable communication
service is enabled.
#### 6.10.1.4 Alternative 10c: PDN Configuration set at PDN Connection
Establishment by the SCEF
Alternative 10a is used, additionally the SCEF is allowed to change the
\"Enable Reliable Communication Service\" indicator based on SCS/AS request.
### 6.10.2 Impacts on existing nodes and functionality
#### 6.10.1.2 Alternative 10a: Static PDN Configuration
The MME needs to support:
\- Reception of the \"Enable Reliable Communication Service\" indicator from
the SCEF;
\- Transmission of the \"Enable Reliable Communication Service\" indicator to
the UE in the Attach Accept and PDN Connectivity Accept messages;
\- Transmission of the \"Enable Reliable Communication Service\" indicator to
the SCEF in the NIDD Configuration Response and Create SCEF Connection
Request.
The UE needs to support:
\- Reception of the \"Enable Reliable Communication Service\" indicator in the
Attach Accept and PDN Connectivity Accept messages.
The SCEF needs to support:
\- Transmission of the \"Enable Reliable Communication Service\" indicator to
the MME in the Create SCEF Connection Response.
#### 6.10.1.3 Alternative 10b: PDN Configuration at PDN Connection
Establishment by the UE
The UE needs to support:
\- Transmission of the \"Enable Reliable Communication Service\" indicator in
the Attach Request or PDN Connectivity Request messages.
The MME needs to support:
\- Reception of the \"Enable Reliable Communication Service\" indicator from
the UE in the Attach Request and PDN Connectivity Request messages;
\- Transmission of the \"Enable Reliable Communication Service\" indicator to
the SCEF in the Create SCEF Connection Request.
The SCEF needs to support:
\- Reception of the \"Enable Reliable Communication Service\" indicator from
the MME in the Create SCEF Connection Request.
#### 6.10.1.4 Alternative 10c: PDN Configuration at PDN Connection
Establishment by the SCEF
Same impacts as alternative 10a, in addition to:
The SCEF needs to support:
\- Reception of the \"Enable Reliable Communication Service\" indicator from
the SCS/AS.
### 6.10.3 Solution Evaluation
Options 10a, 10b, and 10c allow the service to be enabled or disabled on a per
PDN connection basis. Option 10a proposes to statically configure whether the
service is enabled.
Options 10b and 10c allow the UE or AS/CS respectively to select if the
service is enabled when the PDN connection is established.
If Solution 5, alternative 5a is specified, one of the alternatives from this
clause may be used to allow the service to be selectively disabled or enabled
per-PDN connection based on the needs of the application.
## 6.11 Solution 11 - Reuse of GROUPE for multicast/broadcast of NIDD
### 6.11.1 Description
#### 6.11.1.1 General
This solution addresses the Key Issue 4 - Reuse of existing
multicast/broadcast architecture.
As NIDD feature has been introduced in CIoT Release 13, SCEF can transfer user
data between a UE and a SCS/AS. While a large number of devices can be
involved in IoT Service, each device can be grouped as per location. It would
benefit if downlink IoT traffic for the group is delivered via MBMS to a
certain location, so that non-IP data needs to be delivered over MBMS.
Especially, using MBMS is good to trigger devices in a certain location but
also transfer relatively large amount of data for a number of UE. (e.g.
software update)
It is expected that the UE will be on power saving mode or eDRX which means
the UE is not reachable at certain time. Therefore it is required to ensure
the UE is available to receive MBMS traffic, and then SCS/AS or SCEF can set
start time of MBMS traffic delivery. Following features can be used to
determine to ensure the available time for receiving MBMS of the UE.
i) Utilizing MONTE, SCS/AS or SCEF gets to know when a UE is reachable and
where the UE is located.
ii) Utilizing Communication pattern provisioning, SCS/AS can configure
communication pattern as specified in clause 5.10.1. For example, Time zone
and Day of the week when the UE is available for communication, Interval time
of periodic communication, or duration interval time of periodic
communication.
Alternative to i) and ii), based on application layer communication, a UE can
be configured to request certain value of periodic TAU/RAU timer value for PSM
or eDRX cycle during TAU/RAU. In this case, SCS/AS doesn\'t have to rely on i)
and ii).
#### 6.11.1.2 Procedure
Figure 6.11.1.2-1
0\. NIDD configuration and T6a connection establishment can be performed for
NIDD. SCS/AS can send NIDD configuration request with including request for
group message delivery of non-IP data. The SCEF can check that the SCS/AS is
authorised to use the group message delivery based on local policy. If this
check fails the SCS/AS is not allowed to use group message delivery. In this
step, the request for the group message delivery is not about the external
group ID but NIDD.
1 to 5. Same as clause 5.5.1 of the TS 23.682 [3] Group message delivery using
MBMS. In the step 5, if the SCS/AS wants to send non-IP data through MBMS, the
SCS/AS doesn\'t send IP related MBMS context to the UE.
6\. After Step 5, SCS/AS can decide to NIDD via MBMS in order to send user
data to UE(s). The SCS/AS can figure out the location of UE(s) and reachable
time for the UE(s) based on Monitoring Event or Communication Pattern
parameters provisioning (as specified by clauses 5.6 and 5.10 of TS 23.682
[3]). Based on the above information, SCS/AS determines start time of NIDD via
MBMS and location/area information to send MBMS traffic.
7\. The SCS/AS sends the group message request (SCS/AS reference ID,
location/area information, TMGI, start time, list of External ID/MSISDN, non-
IP data) message to the SCEF. In this message, the SCS/AS may include non-IP
data toward UE(s) in a certain location. If the user data to be sent to UE(s)
is a large amount of data, the SCS/AS can send the data to the SCEF in the
step 12. The SCEF can check the number of UEs and the location to authorize
the group message request.
8 to 11. Same as clause 5.5.1 of the TS 23.682 [3] Group message delivery
using MBMS.
12\. Before send MBMS traffic, application level interaction may be applied
for the devices to retrieve the related MBMS service information, e.g. TMGI,
start time. Those application level interactions can be done via NIDD. At or
after the requested start time, the SCS/AS transfers the content to be
delivered to the UE(s) to the SCEF.
13\. In response to the received content, the UE may initiate NIDD to the
SCS/AS.
### 6.11.2 Impact on existing nodes and functionality
SCEF: It is required to perform authorization for the group message delivery
for NIDD. It is required to support authorization of the group message request
from the SCS/AS based on the local policy in terms of the number of UE(s) and
the location of the UE(s).
SCS/AS: It is required to perform MONTE or Communication Pattern provisioning
to ensure location of the UE(s) and start time of MBMS traffic delivery.
### 6.11.3 Solution Evaluation
This solution requires the change on authorization of the group message
request for NIDD.
This solution requires other functionality for MTC such as MONTE and
Communication Pattern provisioning. Otherwise it should be done via
application level signalling which is not scope of 3GPP.
This solution allows to SCS/AS can send NIDD via MBMS for UE(s) on certain
location/area, not for the external group ID. If the group message request for
NIDD is authorized, the SCS/AS can decide to send NIDD via MBMS based on the
presence and location of the UE(s).
## 6.12 Solution 12 - Ensuring UE availability for MBMS reception
### 6.12.1 Description
#### 6.12.1.1 General
This solution addresses the Key Issue 4 - Reuse of existing
multicast/broadcast architecture.
It is expected one type of IoT traffic on the multicast/broadcast system can
be a message that is supposed to trigger a group of UEs to report to the
SCS/AS. In order to successfully deliver a trigger via an MBMS bearer, the UEs
in the group need to be ready to receive MBMS traffic at the time of the
broadcast.
However, it is expected that UEs that receive IoT traffic will often use power
savings functions such as Power Savings Mode or extended idle mode DRX. If a
UE is using PSM or eDRX during the broadcast transmission, it may not be
available to receive MBMS traffic and the trigger may be missed.
When the SCS/AS issues a group message request to the SCEF it also provides a
message start time. This solution updates the Group message delivery using
MBMS procedure of TS 23.682 [3], clause 5.5.1, so that the SCEF may ensure
that the group members stop using PSM and/or eDRX prior to the start time.
#### 6.12.1.2 Procedure
Figure 6.12.1.2-1 shows the MBMS group message delivery procedure from TS
23.682 [3], clause 5.5.1.
Note that when this procedure is being used to deliver a trigger to a group,
it is expected that the MBMS Service Information (TMGI) will be provided to
the group in step 5, well in advance of any trigger occurring. Step 12 will
not be used; if it were possible to individually address each UE in the group
prior to sending the broadcast, the trigger would not be needed.
In order to ensure that the group members are awake and listening to the
broadcast at step 13, step 7 of the MBMS group message delivery procedure is
updated with the following text.
The SCEF may provide the start time and External Group Identifier in the
authorization request to the HSS. When the start time and External Group
Identifier are included in the authorization request, the HSS will initiate an
Insert Subscription Data procedure for each UE in the group to send the start
time to the MME/SGSN. The MME/SGSN may use this information to help ensure
that the UE is available (i.e. not using PSM and/or extended idle mode DRX) in
advance of the broadcast.
Figure 6.12.1.2-1: Group message delivery using MBMS
### 6.12.2 Impacts on existing nodes and functionality
The SCEF needs to support:
\- Transmission of the broadcast start time to the HSS in the group message
authorization request.
The HSS needs to support:
\- Reception of the broadcast start time from the SCEF in the group message
authorization request;
\- Subscription Data modification of the UEs in the group to store the
received broadcast start time;
\- For each UE in the group, transmission of the broadcast start time to the
MME.
The MME needs to support:
\- Reception of the broadcast start time for a UE;
\- MM Context modification based on the received broadcast start time.
### 6.12.3 Solution Evaluation
Solution 12 provides a mechanism for using the existing MBMS architecture to
deliver triggers to UEs at a time when the targeted UEs in the group can
receive the multicast/broadcast data.
Since the solution addresses groups of UE\'s that are using PSM or eDRX, it is
important to consider the power efficiently of this approach so that it can be
compared to other possible approaches. \"Power efficiently\" can be roughly
correlated to how long the UEs in the group are able to stay in deep sleep and
not listen for triggers.
**Benefits:**
\- Minimizes device wake ups by allowing the broadcast to coincide with times
when the UEs are not in deep sleep. This avoids requiring that the device wake
up and listen for a broadcast at times that are not aligned with the sleep
cycle.
\- Minimizes broadcast time by ensuring that the UEs in the group are
available to listen to the broadcast at approximately the same time.
\- No UE impact.
**Drawbacks:**
\- Requires that the group be provisioned with a TMGI that is used to listen
for triggers. If the UEs are required to receive a service announcement, then
this approach is inefficient; the service announcement can serve as the
trigger or the service announcement can provide the broadcast start time.
\- There is no guarantee that the UE will perform a TAU/RAU or attach before
the broadcast start time; thus the MME may not have an opportunity to stop the
all UEs in the group from using PSM or eDRX in advance of the broadcast.
\- Increased power consumption for UEs that are not using PSM or eDRX while
waiting for the broadcast start time.
\- Impact to the SCEF, HSS, and MME.
## 6.13 Solution 13 - for Key Issue 5 on Reuse of Location Services
architecture for Control Plane CIoT EPS optimization
A number of separate solutions are included here corresponding to one or more
of the various sub-issues described for Key Issue 5 in clause 5.5. Because the
solutions relate to the same set of location procedures defined in TS 23.271
[7], they are not necessarily mutually exclusive or independent and are best
described and evaluated together rather than separately and independently.
### 6.13.1 Solution for sub-issue 5.1 - eDRX and Power Saving Mode (PSM)
#### 6.13.1.1 Description
As shown in clause 5.5.2, eDRX and PSM may cause an unacceptably delayed
response for an MT-LR request for a current UE location.
This issue cannot be solved directly because power saving by its nature leads
to a UE being unavailable for a long and unpredictable period of time.
However, several indirect solutions are possible.
One indirect solution would be to return a last known location to an external
client when a UE is not available for a current MT-LR location request and
optionally indicate the maximum interval that the UE will continue to remain
unavailable. Further details of this solution including impacts and an
evaluation are provided as part of the solution for sub-issue 5.2.
Two other indirect solutions for sub-issue 5.1 are described in clauses 6.13.3
and 6.13.4.
### 6.13.2 Solution for sub-issue 5.2 - Last Known Location
#### 6.13.2.1 Description
As shown in clause 5.5.3, a last known location would be useful with power
saving features, but cannot currently be supported to finer granularity than a
cell ID and may require alignment of the solution in TS 23.682 [3] with the CP
location solution in TS 23.271 [7].
One solution to this problem would be for a serving MME to retain the last
known serving cell ID after a UE goes into idle state and a timestamp for when
this occurred. The last serving cell ID may be used to derive a last known
location should an MT-LR request be received later from an external client
when the UE is still unavailable. The serving MME can make use of an E-SMLC to
convert the last serving cell ID into a geographic location. For example, the
current LCS-AP location procedure defined in TS 29.171 [13] can be used with a
new flag in the LCS-AP Location Request sent from the MME to the E-SMLC which
tells the E-SMLC that the UE is not available and that the E-SMLC needs to
determine a location for the UE using only the information included by the MME
in the LCS-AP Location Request message. Since a UE could have changed serving
cell with the same serving eNB, the E-SMLC may use the eNB portion of the last
serving cell ID (ECGI) to determine a last known location. However, with NB-
IoT access, the E-SMLC can use the entire cell ID (ECGI) since a change of
serving cell is not supported for NB-IoT.
This solution can be further enhanced with some additional location
measurements. The UE could provide measurements to the MME when it enters
connected state and/or just before returning to idle state. The serving eNB
can similarly obtain measurements for the UE when a signalling link is
established to the UE and/or just prior to releasing the signalling link. The
measurements can be provided to the serving MME. Measurements at other times
could also be possible. The MME then includes any stored measurements in an
LCS-AP Location Request to obtain a last known location from an E-SMLC along
with the last known cell ID or eNB ID. This will enable a last known UE
location using enhanced cell ID positioning and would be more accurate than
use of only a cell ID or eNB ID. Stage 3 support for a last known location is
already present in the ELP protocol defined in TS 29.172 [22] for the SLg
interface between an MME and GMLC and in the MLP protocol defined by OMA [23]
for the Le interface between a GMLC and an external client. This existing
stage 3 support would enable an external client to request a current or last
known location for a target UE and for an MME to return a last known location
to the external client via a GMLC when a current location for the UE is not
available.
6.13.2.2 Impacts on existing nodes and functionality
With regard to the impacts and evaluation, it is assumed that the options of
supporting measurements in addition to a last known cell ID and indicating the
maximum time until a UE is next expected to become available are not
supported.
MME: when receiving an MT-LR location request indicating \"current or last
known location\" for a UE that is unavailable, send a request to an E-SMLC
with the last known cell ID and a new flag indicating a request for a last
known location;
indicate a last known location when returning an MT-LR location response to
the GMLC.
UE: No impact.
eNB: No impact.
E-SMLC: When receiving a location request from an MME indicating a request for
a last known location, obtain and return a location estimate using only the
information provided in the location request.
GMLC: Support a request for \"current or last known location\" in the case of
an EPC MT-LR.
6.13.2.3 Evaluation
The solution, of a returning a last known, can be of use to an external client
when a UE is in PSM or eDRX and would be better than returning a failure
response. The solution adds new impacts the MME, E-SMLC and GMLC.
### 6.13.3 Solution for sub-issue 5.3 - Deferred Location
#### 6.13.3.1 Description
As shown in clause 5.5.4, a deferred location for the UE availability event
for E-UTRAN access is not aligned with the corresponding procedure for GSM and
UMTS access and has more limitations.
One solution (solution 1) would be to add a deferred MT-LR location procedure
for the UE availability event in TS 23.271 [7] for EPC access that is aligned
with the current MT-LR location procedure for the UE availability event for
GSM and UMTS access. This will allow an external client to request a deferred
location for the UE availability event without having to know in advance which
access type the UE is using. In addition common parts of the procedure
involving a GMLC can be shared to reduce impacts.
Stage 3 support for a deferred MT-LR location procedure for the UE
availability event is already present in both the ELP protocol TS 29.172 [22]
for the Lgd interface between an SGSN and a GMLC and the MLP protocol [23] for
the Le interface between a GMLC and an external client. This existing stage 3
support would still be a new impact to an MME but not necessarily to a GMLC if
the Lgd interface is supported to an SGSN using ELP.
A second solution (solution 2) would be to use the existing procedure for an
EPC-MT-LR in clause 9.1.15 of TS 23.271 [7] and correct this to fully support
a deferred MT-LR for the UE availability event end-to-end from an LCS client
to the UE. This may be accomplished by using the EPC-MT-LR procedure in clause
9.1.15 of TS 23.271 [7] in combination with the deferred MT-LR procedure for
GERAN/UTRAN access in clause 9.1.8 of TS 23.271 [7] using the V-GMLC to
interwork the two procedures. This is illustrated at a high level in Figure
6.13.3.1-1 and at a more detailed level in Figure 6.13.3.1-2. In both
figurers, the V-GMLC interworks one procedure with the other. The steps in
Figure 6.13.3.1-2 correspond to steps in clause 9.1.8 of TS 23.271 [7] (shown
in normal font) and steps in clause 9.1.15 of TS 23.271 [7] (shown in bold
font).
Stage 3 impacts to add new signalling messages, new parameters or new
parameter values appear not to be needed for either solution due to an ability
to reuse existing signalling.
{width="6.689583333333333in" height="1.0930555555555554in"}
Figure 6.13.3.1-1: Combination of Deferred MT-LR with EPC-MT-LR (High Level)
{width="6.686805555555556in" height="3.9569444444444444in"}
Figure 6.13.3.1-2: Combination of Deferred MT-LR with EPC-MT-LR (Detailed
Level)
6.13.3.2 Impacts on existing nodes and functionality
MME: Solution 1: support a new deferred EPC-MT-LR procedure to be defined in
TS 23.271 [7] for the UE availability event. The procedure would reuse
capability from the existing EPC-MT-LR procedure for current location and
would be analogous to the existing deferred MT-LR procedures for the UE
availability event in TS 23.271 [7] for GERAN and UTRAN access.
> Solution 2: support the existing solution defined in clause 9.1.15 of TS
> 23.271 [7] for a deferred UE location when a UE is temporarily not
> reachable. The existing solution may require a few corrections to align with
> the procedure in clause 9.1.8 of TS 23.271 [7] at a GMLC but is a smaller
> MME impact than for solution 1.
UE: No impact.
eNB: No impact.
E-SMLC: No impact.
GMLC: Solution 1: support a new deferred EPC-MT-LR procedure to be defined in
TS 23.271 [7] for the UE availability event. The procedure would reuse
capability from the existing EPC-MT-LR procedure for current location and
would be analogous to the existing deferred MT-LR procedures for the UE
availability event in TS 23.271 [7] for GERAN and UTRAN access.
> Solution 2: interwork the EPC-MT-LR procedure in clause 9.1.15 of TS 23.271
> [7] at a V-GMLC with the deferred MT-LR procedure for the UE availability
> event in clause 9.1.8 of TS 23.271 [7]. For an R-GMLC and H-GMLC, the
> impacts are the same as for solution 1.
6.13.3.3 Evaluation
Solution 2 has lower MME impact than solution 1 due to reusing the existing
EPC-MT-LR procedure and similar impacts for an R-GMLC, H-GMLC and V-GMLC,
Therefore, solution 2 is preferred.
### 6.13.4 Solution for sub-issue 5.4 - Triggered and Periodic Location
#### 6.13.4.1 Description
As shown in clause 5.5.4, the lack of support for triggered and periodic
location for E-UTRAN access will restrict location support for UEs with eDRX
or PSM.
One solution (solution 1) would be to add a periodic MT-LR procedure for EPC
access in TS 23.271 [7] aligned with the existing periodic MT-LR procedure for
GERAN and UTRAN access. This will enable an external client to request
periodic location for a UE without having to know in advance which access type
the UE is using. In addition, portions of the procedure involving a GMLC can
be common to reduce impacts. Both uplink and downlink positioning would be
applicable.
An extension of solution 1 would be to add a triggered MT-LR procedure for the
change of area event for EPC access in TS 23.271 [7] aligned with the existing
triggered MT-LR procedure for GERAN and UTRAN access. With the change of area
event as currently defined in TS 23.271 [7], an external client provides a
geographic area and an indication of whether location reports are needed when
the UE enters, leaves or remains within the area. The area would be converted
to a set of cell IDs and/or other areas (e.g. TAs in the case of EPC access)
before being provided to the UE. This new procedure can enable an external
client to request triggered location for a UE without having to know in
advance which access type the UE is using. In addition, portions of the
procedure involving a GMLC can be common to reduce impacts. In order to reduce
power consumption, the UE can be allowed to evaluate the trigger condition
while in idle state at some minimum defined interval and only return to
connected state when a trigger condition occurs. After the UE returns to
connected state, the current UE location would be obtained and provided to the
external client.
In an alternative solution (solution 2), the periodic and triggered MT-LR
procedures are combined into a single periodic and triggered MT-LR procedure
in which the trigger event can comprise a periodic timer expiry or an area
event comprising a UE entering, leaving or staying within a particular area.
The use of a single combined procedure should reduce impacts to all entities
and can be used to support a new motion event in which an event report is sent
to an LCS client when a UE moves by more than some threshold distance from a
previous UE location. Such a trigger event could be used to determine when a
stationary UE has moved (e.g. to detect theft of a valuable asset) and when a
UE has moved to a new area without having to define a specific area (as with
the area event). Some parameters of a motion event might also be shared with
the area event to reduce implementation.
Stage 3 support for a triggered and periodic location is already present for
the ELP protocol in TS 29.172 [22] used for the Lgd interface between an SGSN
and GMLC, for the MLP protocol [23] used for the Le interface between a GMLC
and an external client, and for the supplementary services protocol in TS
24.080 [24] used over the S1 and Uu interfaces between an MME and UE. However,
because support for triggered location for the area event assumes GERAN or
UTRAN access but not E-UTRAN access, some impacts could be needed to ELP (TS
29.172 [22]) and the supplementary services protocol (TS 24.080 [24]) - e.g.
to enable an area definition using one or more TAs. Some other impacts to ELP
(TS 29.172 [22]) and the supplementary services protocol (TS 24.080 [24])
would be needed to overcome limitations applicable to UEs that spend large
amounts of time in power saving mode and that need to conserve battery. For
example, a sampling interval can be defined to limit the frequency of trigger
event monitoring by a UE and a new event report can be returned to an LCS
client when event reporting has been activated in a UE that was previously
unreachable.
6.13.4.2 Impacts on existing nodes and functionality
The impacts defined here assume a single combined periodic and triggered
location procedure to reduce impacts and that the single procedure supports
periodic reporting, area event reporting and motion event reporting.
MME: Support a new deferred EPC-MT-LR procedures for periodic and triggered
location to be defined in TS 23.271 [7]. The procedure would reuse capability
from the existing EPC-MT-LR procedure for current location where applicable
and would support periodic reporting, area event reporting and motion event
reporting. Note that an MME would not necessarily have to support all three
types of reporting and could instead support just one or two of the three
types of event report. The difference between the three types, however, may
just comprise different parameter sets transferred to and from a target UE.
UE: Support a new deferred EPC-MT-LR procedures for periodic and triggered
location including impacts to the supplementary services protocol in TS 24.080
[24].
eNB: No impact.
E-SMLC: No impact.
GMLC: Support a new deferred EPC-MT-LR procedures for periodic and triggered
location to be defined in TS 23.271 [7]. The procedure could reuse some
capability from the existing EPC-MT-LR procedure for current location and from
the existing deferred MT-LR procedures for periodic and area event location in
TS 23.271 [7] for GERAN and UTRAN access.
6.13.4.3 Evaluation
A deferred EPC MT-LR for the UE availability event (e.g. as described for Sub
Issue 5.3) can be used to obtain a UE location when the UE next becomes
available provided an external client is prepared to wait (e.g. for several
hours). However, if an external client needs to know the UE location
immediately some area related event or motion related event occurs (e.g. a UE
enters or leaves a geo-fence area or moves after being stationary for some
period) or at periodic intervals less than the normal eDRX or PSM cycle, then
the solution described here can be useful. Although a new procedure is needed,
this seems the only solution for control plane location that can enable real
time location access to a UE that is typically unreachable. To conserve
battery, a periodic and triggered location might only be activated in a UE
when needed.
### 6.13.5 Solution for sub-issue 5.5 - UE Positioning
#### 6.13.5.1 Description
As shown in clause 5.5.6, limited resources in some UEs (e.g. limited
processing, memory, RF receiver chain) may limit the ability of a UE to
support some downlink position methods.
UE resources may be limited and possibly unavailable when the UE is in
connected state due to other UE activity. However UE resources can be
maximally available while the UE is idle. Hence, the current EPC-MT-LR, EPC-
NI-LR and EPC-MO-LR procedures in TS 23.271 [7] can be amended such that
positioning measurement is allowed to occur in idle state. The EPC-MT-LR, EPC-
MO-LR and EPC-NI-LR procedures would function as before up until the point
when a location request is sent to the UE by an E-SMLC or possibly by a SUPL
SLP. The UE would then store the location request information (and acknowledge
the location request at the LPP level if an LPP acknowledgment is requested)
but not perform any measurements. More than one location request might be sent
to and stored by the UE. When the UE next enters idle state, the UE would
perform the requested measurements, return to connected state and send the
requested measurements (or location estimate) back to the server.
This procedure will need limited support from other entities. In the case of
the E-SMLC, a new capability flag can be added in LPP for each position method
supported by a UE for which the UE needs to be in idle state to obtain
measurements. If the flag is set and the E-SMLC requests measurements (or a
location estimate), the E-SMLC can indicate a longer than normal response time
in order to allow enough time for the UE to go into idle state, obtain the
measurements, re-enter connected state and return the measurements (or a
location estimate) back to the E-SMLC. In the case of the MME, the MME can
assume that any UE with NB-IoT (or possibly eMTC) access may potentially need
to make location measurements while in idle state. The MME can then allow any
location session to continue until some time period has expired (e.g. 2
minutes) after a UE next goes into idle state -- in order to avoid aborting
the location session before the UE has had time to obtain and return location
measurements.
It would also be possible for a UE to explicitly indicate to an E-SMLC (e.g.
using LPP) and/or to an MME (e.g. using NAS) that it needs to enter idle state
in order to obtain and return requested location measurements, but such an
approach will require additional signalling and signalling related impacts and
is not proposed.
NOTE: This solution is applicable if measurements/measurement reports in NB-
IoT are defined in RAN WGs.
In case the entry to idle state is delayed for a long time on the network
side, the UE might run a timer and locally release the RRC signalling
connection and enter idle state after some period of inactivity in the UE.
If the UE has a new serving MME after returning to connected state, the
previous location session would have to be aborted and location would fail.
But that will have low probability as measurement times after typically 30
seconds or less with current access types.
The use of idle state for UE measurements will have the effect of delaying a
location response to an external client. However, such a delay should be very
small in comparison to the much longer delay involved in waiting for a UE to
become available for location and should not be noticeable to the external
client.
6.13.5.2 Impacts on existing nodes and functionality
MME: Use a long session timer for any location session established for a UE
with CIoT features (e.g. a UE with NB-IoT or eMTC access).
UE: Support a new LPP capability flag for position methods for which the UE
needs to make measurements while in idle state.
> Queue a request for location measurements or a location estimate until the
> UE enters idle state. Obtain the measurements, return to connected state and
> send the measurements to the MME.
eNB: No impact.
E-SMLC: Support a new LPP capability flag for position methods for which a
target UE needs to make measurements while in idle state.
For such position methods, provide the UE with a long enough response time to
enable the UE to make measurements while in idle state.
GMLC: Possible impact to support a longer MT-LR response timer (for UEs that
perform location while in idle state).
6.13.5.3 Evaluation
The solution seems a simple way to maximize UE resource availability for
positioning (e.g. for a UE that has only one RF receiver chain and/or limited
processing and memory). The impacts to the MME, E-SMLC and UE are all quite
small.
### 6.13.6 Solution for sub-issue 5.6 - UE Positioning Interaction for NB-IoT
#### 6.13.6.1 Description
As shown in clause 5.5.7, for NB-IoT access, longer message delivery time, a
preferred maximum message size and message volume limitation may place
limitations on support of positioning protocol interaction between a UE and a
location server for both the 3GPP CP and OMA SUPL location solutions.
In the case of the 3GPP CP solution, an MME can provide an indication to an
E-SMLC in an LCS-AP Location Request (as defined in TS 29.171 [13]) of the
access type being used by a UE. Additional or alternative information could
also be provided concerning the maximum preferred positioning (e.g. LPP)
message size, any constraints on message volume and an indication of the
maximum message transfer delay. In the case of informing an E-SMLC that a UE
has NB-IoT access, the E-SMLC could be configured by a network operator with a
preferred maximum message size and worst case message transfer delay which
could avoid the need to provide these by an MME. The E-SMLC can then employ
suitably long retransmission and response timers, a preferred maximum message
size and limitation on the number of messages transferred. For example, the
E-SMLC could limit the amount of assistance data transferred to a UE and the
number of measurements requested from a UE.
To simplify signalling changes and impacts to an MME and E-SMLC, it is
proposed that an MME only provide an indication of NB-IoT access to an E-SMLC
and that all other support (e.g. use of a maximum message size, maximum
message volume and assumed message transfer delay) be implementation dependent
and controlled via E-SMLC configuration.
It is noted that in some E-SMLCs, cell configuration data could inform an
E-SMLC as to whether a particular cell uses NB-IoT. In that case, the MME and
E-SMLC would not need to support an explicit NB-IoT indication.
6.13.6.2 Impacts on existing nodes and functionality
MME: Provide an NB-IoT indication to an E-SMLC when requesting location for a
UE with NB-IoT access.
UE: No impact.
eNB: No impact.
E-SMLC: Support an NB-IoT indication from an MME in a location request for a
UE with NB-IoT access. Determine a suitable maximum message size, maximum
message volume and/or expected message transfer delay by implementation
dependent means (e.g. using configured information).
GMLC: No impact.
6.13.6.3 Evaluation
The solution enables an E-SMLC to adapt a location session to a limited
message size, limited message volume and expected (or worst case) message
transfer delay for a target UE with NB-IoT access. The solution impacts are
very simple.
### 6.13.7 Solution for sub-issue 5.7 - Security for NB-IoT
#### 6.13.7.1 Description
As shown in clause 5.5.8, for NB-IoT access, support of uplink positioning
using LPPa and RRC may not be secure in the case of CIoT CP optimization when
UP data bearers are either not supported or not established.
To solve this, an MME can indicate to an E-SMLC whether or not AS security is
currently being used for a UE in an LCS-AP Location Request as currently
defined in TS 29.171 [13]. For example, for a UE that uses CP CIoT
optimization only for all data transfer, the MME would indicate that AS
security is not used. The E-SMLC would then take this into account when
instigating different uplink positioning procedures. For example, downlink
positioning might be used as security is not required due to the availability
of NAS security. For uplink positioning, the E-SMLC might only invoke position
methods dependent on eNB measurements that do not require additional RRC
signalling with the UE when AS security is not being used.
To simplify this solution, the indication provided by an MME to an E-SMLC can
be combined with the NB-IoT indication for the solution for sub-issue 5.6 by
providing one of tow types of indication: NB-IoT with AS security and NB-IoT
without AS security. E-SMLC support would be implementation dependent (e.g.
configured by the operator).
As there are no measurements defined for NB-IoT so far for which lack of AS
security could be a problem, the solution defined here is considered
conditional on RAN later defining RRC measurements in Rel-14 or other
measurements (e.g. for U-TDOA) for which measurements, measured signals or
coordination of measurements is not adequately protected by AS or NAS
security.
6.13.7.2 Impacts on existing nodes and functionality
MME: Provide an NB-IoT with/without security indication to an E-SMLC when
requesting location for a UE with NB-IoT access.
UE: No impact.
eNB: No impact.
E-SMLC: Support an NB-IoT with/without security indication from an MME in a
location request for a UE with NB-IoT access. Subsequent E-SMLC action would
be implementation dependent.
GMLC: No impact.
6.13.7.3 Evaluation
The solution enables an E-SMLC to decide based on the availability or not of
AS security which position methods to employ for a target UE. For example,
when AS security is not available, an E-SMLC might decide not to use position
methods dependent on RRC coordination between the UE and serving eNB. The
solution impacts are very simple. However, the solution is conditional on RAN
later adding positioning capability in Rel-14 for which lack of AS security
could be a problem.
6.13.8 Solution for sub-issue 5.8 - Message size adaptation according to
coverage level
6.13.8.1 Description
As shown in clause 5.5.9, an E-SMLC that knows the coverage level for a UE
with NB-IoT access may be better able to determine a maximum UL and DL message
size (e.g. can limit the number and extent of requested location
measurements).
An E-SMLC can also indirectly determine coverage level from simple
measurements of RSRP and RSRQ that may be requested either from the UE using
LPP (TS 36.355 [14]) or from the serving eNB using LPPa (TS 36.455 [20]) using
the ECID position method. However, a coverage level available initially from
the MME could be more reliable and would be available faster.
6.13.8.2 Impacts on existing nodes and functionality
The following impacts assume a coverage level can already be provided to an
MME by a serving eNB.
MME: Provide an NB-IoT coverage level to an E-SMLC when requesting location
for a UE with NB-IoT access.
UE: No impact.
eNB: No impact.
E-SMLC: Support a coverage level from an MME in a location request for a UE
with NB-IoT access. Subsequent E-SMLC action would be implementation
dependent.
GMLC: No impact.
6.13.8.3 Evaluation
The solution enables an E-SMLC to adapt a location session to a limited
message size, limited message volume and expected (or worst case) message
transfer delay for a target UE with NB-IoT access based on the coverage level
reported by the MME. The solution impacts are simple.
## 6.14 Solution 14 - Inter UE QoS for NB-IoT Control Plane Optimisation using
a UE context in the eNB
### 6.14.1 Description
This solution addresses the Key Issue 6 - \"Inter UE QoS for NB-IoT Control
Plane Optimisation\".
The proposed mechanism works as follows:
a) The UE needs to perform an initial connection setup to establish the NAS
signalling connection and provides the network with an initial AS context, as
shown in Figure 6.14.1-1. The eNB will be informed of the UE\'s _Security
Token_ by MME. The eNB will store the UE context (e.g. UE subscription
information, UE QoS information, UE capabilities, etc.) and assigns a UE
identifier, e.g. a 40-bit _eNB-UE-Id_ to it. At _RRCConnectionRelease_ the eNB
sends to the UE the _eNB-UE-Id_ and the _Security Token_. The _Security Token_
is generated in the MME and in the UE based on NAS security key/association.
The UE will therefore use the received Security Token to verify the eNB.
NOTE 1: The eNB obtains the UE information from the MME using, e.g. the DL NAS
TRANPORT procedure.
NOTE 2: The design of the UE identifier should be decided by RAN2. It should
be based on the eNB ID and allow to address the information stored in the eNB
for this UE.
NOTE 3: If the _Security Token_ received from the eNB is not the same as the
one previously received from the MME, then the UE considers the _eNB-UE-ID_ as
not valid.
Figure 6.14.1-1: Step a - Initial connection setup followed by connection
release
b) During a subsequent RRC connection establishment procedure, the UE includes
the eNB-UE-Id instead of the S-TMSI as the UE identity in RRC
_ConnectionRequest_ message, as shown in Figure 6.14.1-2. The eNB uses the
eNB-UE-Id to retrieve the UE information internally, or from another eNB (in
such case via a new X2AP Retrieve UE Context procedure), in a similar way to
the Resume procedure for the User plane optimisation. The eNB can then use the
information for the establishment of the RRC connection and for the scheduling
of the RRC _ConnectionSetupComplete_ message.
NOTE: In case the eNB cannot retrieve the UE context from a neighbor eNB (e.g.
the two eNBs are not connected via X2 or the neighbor eNB does not support UE
context storing), then the eNB falls back to step a).
> At each RRC connection release, the eNB assigns a new \'eNB-UE-Id\' to the
> UE.
Figure 6.14.1-2: Step b - Subsequent setup (UE context stored in another eNB)
### 6.14.2 Impacts on existing nodes and functionality
UE
\- New eNB-UE-ID to be sent in RRCConnectionRequest;
\- New _ID Type Indication_ (1 bit) to be sent in _RRCConnectionRequest_ ;
\- eNB-UE-ID received in RRCConnectionRelease.
\- Generation of security token and comparison with the one received from the
eNB.
eNB
\- Handling of a UE context for UE using the control plane optimisation;
\- Assignment and provision of a eNB-UE-ID and forwarding of the _Security
Token_ in RRCConnectionRelease;
\- Retrieve UE Context for the C-plane optimisation upon reception of
RRCConnectionRequest (new X2AP procedure needed in case UE context is stored
in another eNB).
MME
\- MME generates and sends the _Security Token_ to eNB in S1AP: NAS DL
TRANSPORT.
### 6.14.3 Solution Evaluation
The solution successfully addresses Key Issue #6 (Inter UE QoS for NB-IoT
Control Plane Optimisation).
Advantage:
\- In case UE reconnects to the same eNB, application of QoS differentiation
is fast
Disadvantage:
\- UE context needs to be stored in eNB
\- New X2AP procedure to retrieve UE context if stored in another eNB.
## 6.15 Solution 15: Inter UE QoS for NB-IoT Control Plane Optimisation by
retrieving the UE context from the MME
### 6.15.1 Description
This solution addresses the Key Issue 6 - \"Inter UE QoS for NB-IoT Control
Plane Optimisation\".
The proposed mechanism works as follows:
a) The UE provides the S-TMSI in the RRCConnectionRequest message.
b) The eNB uses the combined information to retrieve the UE context from the
MME using a new S1 procedure UE CONTEXT REQUEST.
NOTE: As clarified in R3-151181 (and related notes of RAN3#88 in R3-151324),
since the MMEC for one MME node must be unique across all MME nodes connected
to the same eNB, the S-TMSI is enough to select the proper MME.
Figure 6.15.1-1: UE context retrieval from the MME
### 6.15.2 Impacts on existing nodes and functionality
eNB
\- UE context retrieval from the MME after MSG3;
\- New S1-AP procedure :RetrieveUEContextRequest/Response.
MME
\- New S1-AP procedure :RetrieveUEContextRequest/Response.
### 6.15.3 Solution Evaluation
The solution successfully addresses Key Issue #6 (Inter UE QoS for NB-IoT
Control Plane Optimisation).
Advantage:
\- The eNB does not have to keep any UE context.
Disadvantage:
\- The solution might introduce a small delay due to the extra signalling
exchange between eNB and MME.
## 6.16 Solution 16: Avoid UE sending WB-E-UTRAN capabilities when camping on
NB-IoT
### 6.16.1 Description
#### 6.16.1.1 General
This solution addresses Key issue # Key Issue 3 - Inter RAT idle mode mobility
to/from NB-IoT, in particular, the problem that for devices capable of
supporting both WB-E-UTRAN and NB-IoT, the UE WB-E-UTRAN capabilities may be
quite large, and providing these over NB-IoT radio may be extremely
time/resource/power consuming.
This solution proposes that a UE supporting both NB-IoT and WB-E-UTRAN RATs
should not send the full UE WB-E-UTRAN capabilities in the UE Radio Capability
IE over NB-IoT. It should limit the content of the UE Radio Capability to the
UE NB-IoT capabilities and possibly some subset of WB-E-UTRAN capabilities for
idle mode mobility.
The UE behaviour is as follows:
\- When the UE is requested to provide the UE Radio Capability information
while camping on WB-E-UTRAN, the UE provides the full UE Radio Capability
information including both NB-IoT and WB-E-UTRAN capability information.
\- When the UE is requested to provide the UE Radio Capability information
while camping on NB-IoT, the UE provides only the NB-IoT Radio Capability
information and possibly some subset of WB-E-UTRAN capabilities for idle mode
mobility.
The subset of WB-E-UTRAN capabilities for idle mode mobility to be provided in
the UE Radio Capability information should at least let the RAN know of the UE
support of WB-E-UTRAN for the purpose of idle mode mobility.
NOTE: The details of this subset needs to be studied in RAN WG2.
There are multiple possible ways to handle this in the network side. The
options are listed in the following sections.
As the transmission of the NB-IoT capabilities while camping on a WB-E-UTRAN
cell is not believed to be supported by Release 13 UEs, Option 5, below
describes a network based solution that is also compatible with Release 13
UEs.
#### 6.16.1.2 Option 1: Handling of UE capabilities in RAN, transparent to MME
##### 6.16.1.2.1 Description
The basis for this solution is as follows:
\- If the UE is camping on NB-IoT and the eNB requests the UE Radio Capability
information, the UE provides the UE NB-IoT capabilities.
\- The eNB sends the UE Radio Capability (containing only the UE NB-IoT
capabilities) to MME. The fact that the UE Radio Capability contains only the
UE NB-IoT capabilities is not visible to the MME.
\- When the UE moves to E-UTRAN and initiates a procedure that triggers DRB
establishment (e.g. TAU with active flag or Service Request) the eNB
identifies that the UE Radio Capability information only contains the UE NB-
IoT capabilities.
Editor\'s note: Whether it is possible for the eNB to do this differentiation
of WB-E-UTRAN and NB-IoT capabilities to be verified with RAN WG 3 / RAN WG 2.
\- In that case, the eNB requests the UE Radio Capability information from the
UE.
\- The UE provides the UE full E-UTRAN capabilities since it is now camping on
WB-E-UTRAN.
\- The eNB updates the MME with the new UE Radio Capability information
containing the UE full E-UTRAN capabilities.
\- In case the UE performs RRC resume procedure, the target eNB would
recognize that UE Radio Capability information received from the source eNB is
not complete and trigger regular RRC connection establishment procedure.
NOTE: It is assumed that the eNB is able to process correctly the UE Radio
Capability, i.e. which UE radio capabilities correspond to which RAT type.
This is to be defined by RAN WGs.
##### 6.16.1.2.2 Impacts
In the UE:
\- Provide different sets of UE radio capabilities depending on which RAT the
UE is camping:
\- (as in existing Release 13) Provide UE NB-IoT capabilities if camping on
NB-IoT.
\- Provide UE full E-UTRAN capabilities if camping on WB-E-UTRAN.
In the eNB:
\- Recognize, when the UE is accessing WB-E-UTRAN, that the UE Radio
Capability received from MME only contains UE NB-IoT capabilities.
\- (as per legacy procedures) Trigger in that case the request of UE Radio
Capability information from the UE.
\- (as per legacy procedures) Provide to the MME the UE Radio Capability
information received from the UE (via UE CAPABILITY INFO INDICATION message).
\- Possibly impact in the handling of UE NB-IoT capabilities for mobility when
the UE is camping on NB-IoT.
In the MME:
\- No impact.
#### 6.16.1.3 Option 2: Handling of UE capabilities with MME knowledge keeping
one UE Radio Capability set
##### 6.16.1.3.1 Description
The basis for this solution is as follows:
\- If the UE is camping on NB-IoT and the eNB requests the UE Radio Capability
information, the UE provides the UE NB-IoT capabilities.
\- The eNB sends the UE Radio Capability (containing only the UE NB-IoT
capabilities) to MME. The MME identifies that it received the UE Radio
Capability information while the UE was camping on NB-IoT (from the associated
TAC), and marks the UE Radio Capability as \"partial to NB-IoT\".
\- When the UE moves to another NB-IoT cell and initiates and initiates a
procedure that triggers DRB establishment (e.g. TAU with active flag or
Service Request), the MME provides UE Radio Capability information to the
E‑UTRAN in the S1 interface INITIAL CONTEXT SETUP REQUEST message per current
behaviour.
\- When the UE accesses a WB-E-UTRAN cell and the MME sends an S1 interface
INITIAL CONTEXT SETUP REQUEST or UE RADIO CAPABILITY MATCH REQUEST message
during that procedure, the MME shall not send any UE Radio Capability
information to the E‑UTRAN in that message. Also the, MME shall detect that
the RAT is now WB-E-UTRAN and delete (or mark as deleted) any \"partial to NB-
IoT\" UE Radio Capability information that it has stored.
\- This triggers the eNB to request the UE Radio Capability information from
the UE (as per current eNB behaviour).
\- The UE provides the UE full E-UTRAN capabilities since it is now camping on
WB-E-UTRAN.
\- The eNB updates the MME with the new UE Radio Capability information
containing the UE full E-UTRAN capabilities.
\- In case the UE performs RRC resume procedure in WB-E-UTRAN, the target eNB
would recognize that UE Radio Capability information received from the source
eNB is not complete and trigger regular RRC connection establishment
procedure.
##### 6.16.1.3.2 Impacts
In the UE:
\- Provide different sets of UE radio capabilities depending on which RAT the
UE is camping:
\- (Same as Rel‑13) Provide UE NB-IoT capabilities if camping on NB-IoT.
\- Provide UE full E-UTRAN capabilities if camping on WB-E-UTRAN.
In the eNB:
\- Possibly impact in the handling of UE NB-IoT capabilities for mobility when
the UE is camping on NB-IoT.
In the MME:
\- Identify that the UE Radio Capability was last received from NB-IoT.
\- In that case, when the UE accesses WB-E-UTRAN and the MME would normally
send the UE capabilities to the eNB, mark the UE Radio Capability as deleted
and not provide it to E-UTRAN.
#### 6.16.1.4 Option 3: Handling of UE capabilities with MME knowledge keeping
separate UE Radio Capability sets
##### 6.16.1.4.1 Description
The basis for this solution is as follows:
\- If the UE is camping on NB-IoT and the eNB requests the UE Radio Capability
information, the UE provides the UE NB-IoT capabilities.
\- If the UE is camping on WB-E-UTRAN, it provides its UE full E-UTRAN
capabilities if requested by eNB.
\- If it had requested the UE Radio Capability to UE, the eNB sends the UE
Radio Capability to MME (as per current behaviour).
\- The MME keeps in storage two separate UE Radio Capability information sets:
\- \"Partial\" UE Radio Capability information received from NB-IoT.
\- \"Full\" UE Radio Capability information received from WB-E-UTRAN (Legacy
UE Radio Capability information).
\- This is a superset of, i.e. it contains, the UE NB-IoT radio capabilities.
\- When the UE performs Service Request or TA U with active flag, causing
establishment of DRBs, from an NB-IoT cell the MME provides:
\- The Full UE Radio Capability information if stored.
\- Else, the Partial UE Radio Capability information received from NB-IoT if
stored.
\- When the UE performs Service Request or TA U with active flag, causing
establishment of DRBs, from an WB-E-UTRAN cell
\- If the MME has valid Full UE Radio Capability information it provides this
information to E-UTRAN.
\- Else, it does not provide any information, even when it has the Partial UE
Radio Capability information received from NB-IoT.
\- This triggers the eNB to request the Full UE Radio Capability information
from the UE and provides to MME (as per current eNB behaviour).
\- When the MME receives the UE Radio Capability information while the UE is
camping on WB-E-UTRAN, the MME deletes the UE Radio Capability information
received from NB-IoT if stored.
\- In case the UE performs RRC resume procedure in WB-E-UTRAN, the target eNB
would recognize that UE Radio Capability information received from the source
eNB is not complete and trigger regular RRC connection establishment
procedure.
##### 6.16.1.4.2 Impacts
In the UE:
\- Provide different sets of UE radio capabilities depending on which RAT the
UE is camping:
\- (as in Release 13) Provide UE NB-IoT capabilities if camping on NB-IoT.
\- Provide UE full E-UTRAN capabilities if camping on WB-E-UTRAN.
In the eNB:
\- Possibly impact in the handling of UE NB-IoT capabilities for mobility when
the UE is camping on NB-IoT.
In the MME:
\- Maintain two different sets of UE Radio Capability information, one
received from WB-E-UTRAN and another received from NB-IoT.
\- Providing the right information to eNB based on which RAT the UE is camping
on.
#### 6.16.1.5 Option 4: UE-based by indicating \"UE radio capability update\"
##### 6.16.1.5.1 Description
The basis for this solution is follows:
\- If the UE is camping on NB-IoT and the eNB requests the UE Radio Capability
information, the UE provides the UE NB-IoT capabilities.
\- The eNB sends the UE Radio Capability (containing only the UE NB-IoT
capabilities) to MME.
\- When the UE FIRST moves to a WB-E-UTRAN cell following ATTACH in an NB-IoT
cell, the UE initiates TAU indicating \"first TAU following GERAN/UTRAN
Attach\".
Editor\'s note: Need to avoid the transmission of the full capabilities at
every change to WB-E-UTRAN.
\- Based on the UE indication of \"first TAU following GERAN/UTRAN Attach\"
the MME deletes the stored UE capabilities and (e.g. at a later Service
Request procedure) does not include the UE Radio Capability information to the
E‑UTRAN in the S1 interface INITIAL CONTEXT SETUP REQUEST message.
NOTE: This MME behaviour is mentioned in TS 23.401 [8] clause 5.11.2, except
\"UE radio capability update\" is currently only supported for changes of
GERAN radio capabilities in ECM-IDLE. Any change in the UE\'s E‑UTRAN
capabilities requires the UE to detach and then re-attach to the system.
\- This triggers the E‑UTRAN to request the UE Radio Capability from the UE,
which in turn provides the UE full E-UTRAN capabilities, and upload it to the
MME in the S1 interface UE CAPABILITY INFO INDICATION message, as per current
behaviour.
\- In case the UE performs RRC resume procedure in WB-E-UTRAN, the target eNB
would recognize that UE Radio Capability information received from the source
eNB is not complete and trigger regular RRC connection establishment
procedure.
##### 6.16.1.5.2 Impacts
In the UE:
\- Provide different sets of UE radio capabilities depending on which RAT the
UE is camping:
\- (As in Release 13) Provide UE NB-IoT capabilities if camping on NB-IoT.
\- Provide UE full E-UTRAN capabilities if camping on WB-E-UTRAN.
\- Provide indication \" first TAU following GERAN/UTRAN Attach \" during
first TAU in WB-EUTRAN after Attach in NB-IoT.
In the eNB:
\- After Suspend in NB-IoT and Resume in WB-E-UTRAN, detect that the UE
capabilities are only for NB-IoT and request the full E-UTRAN capabilities
from the UE.
\- Possibly impact in the handling of UE NB-IoT capabilities for mobility when
the UE is camping on NB-IoT.
In the MME:
\- None (The handling of \"first TAU in WB-E-UTRAN\" for a scenario other than
following Attach in UTRAN/GERAN cannot really be detected by the MME).
#### 6.16.1.6 Option 5: MME stores two sets of UE Radio Capability and
provides both to ENB
##### 6.16.1.6.1 Description
The basis for this solution is follows:
\- If the UE is camping on NB-IoT and the eNB requests the UE Radio Capability
information, the UE provides the UE NB-IoT capabilities.
\- If the UE is camping on WB-E-UTRAN and the eNB requests the UE Radio
Capability information, the UE provides the \"R13 style\" capabilities that do
not include NB-IoT ones.
\- The eNB sends the UE Radio Capability to MME.
\- The MME has two storage areas, one for NB-IoT UE capabilities and one WB-E-
UTRAN UE radio capabilities.
\- At Service Request (etc) the MME puts both NB-IoT and Non-NB-IoT UE
capabilities into the INITIAL CONTEXT SETUP REQUEST message as separately
identifiable information elements. If the MME only has one of the
capabilities, then only that is sent BUT an indication is included as to which
capability it is.
\- If the eNB does not receive the capability information it needs from the
MME (.e.g. following Attach in NB-IoT, then Suspend in NB-IoT, then Resume in
WB-E-UTRAN), the eNB requests it from the UE and submits it to the MME.
##### 6.16.1.6.2 Impacts
In the UE:
\- None
\- (as in Release 13) Provide UE NB-IoT capabilities if camping on NB-IoT.
\- (as in Release 13) Provide UE WB-E-UTRAN capabilities if camping on WB-E-
UTRAN.
In the eNB:
\- Handle 2 UE Radio Capability IEs and their markers in S1-AP and X2-AP
messages. (As in legacy) trigger capability retrieval from the UE if the
needed information is not present.
\- Possibly impact in the handling of UE NB-IoT capabilities for mobility when
the UE is camping on NB-IoT.
Editor\'s note: It is FFS if there is a risk that an eNB (e.g. legacy eNB)
processes \"the wrong\" UE Radio Capability.
In the MME:
\- Maintain two different sets of UE Radio Capability information, one
received from WB-E-UTRAN and another received from NB-IoT.
\- Provide them to the eNB along with a marker as to identify them.
### 6.16.2 Impacts on existing nodes and functionality
Impacts of each option are provided in the Description part.
### 6.16.3 Solution Evaluation
Table 6.16.3-1 captures a comparative evaluation of the different Options.
Table 6.16.3-1: Evaluation of the different Options
+----------+----------------------------+----------------------------+ | Option | Advantages | Disadvantages | +----------+----------------------------+----------------------------+ | Option 1 | - No impact in the MME, | - RAN/RRC impact. | | | resolved within RAN. | | | | | | | | - Since the UE provides | | | | both NB-IoT and WB-E-UTRAN | | | | capability over | | | | WB-E-UTRAN, there is no | | | | need to request UE radio | | | | capability from the UE | | | | again once the UE has | | | | camped and established | | | | DRBs in WB-E-UTRAN. | | | | | | | | - It is useful for eNB to | | | | get both NB-IoT and | | | | WB-E-UTRAN capabilities if | | | | available in case of need | | | | for RRC connection release | | | | with redirection. | | +----------+----------------------------+----------------------------+ | Option 2 | - It is useful for eNB to | - MME impact to identify | | | get both NB-IoT and | partial UE radio | | | WB-E-UTRAN capabilities if | capability when received | | | available in case of need | from eNB when UE is | | | for RRC connection release | camping on NB-IoT. | | | with redirection. | | | | | - RAN/RRC impact | +----------+----------------------------+----------------------------+ | Option 3 | - Since the UE provides | - MME impact to keep a | | | both NB-IoT and WB-E-UTRAN | separate NB-IoT UE radio | | | capability over | capability | | | WB-E-UTRAN, there is no | | | | need to request UE radio | - RAN/RRC impact | | | capability from the UE | | | | again once the UE has | | | | camped and established | | | | DRBs in WB-E-UTRAN. | | | | | | | | - It is useful for eNB to | | | | get both NB-IoT and | | | | WB-E-UTRAN capabilities in | | | | case of need for RRC | | | | connection release with | | | | redirection. | | +----------+----------------------------+----------------------------+ | Option 4 | - No additional network | - The UE needs to | | | impact introduced by this | remember what was the | | | Option. | content of the last | | | | provided UE Radio | | | - It is useful for eNB to | Capability information | | | get both NB-IoT and | (NB-IoT only or full). | | | WB-E-UTRAN capabilities in | | | | case of need for RRC | - A UE based approach may | | | connection release with | potentially bring | | | redirection. | compatibility issues with | | | | possible optimizations | | | | with UE radio capability | | | | handling in the NW in the | | | | future. | +----------+----------------------------+----------------------------+ | Option 5 | - Keeps completely | - CN impact. | | | separate handling of UE | | | | radio capability in NB-IoT | - Does not allow for NW | | | and in WB-E-UTRAN | assistance in inter-RAT | | | | idle mode mobility, i.e. | | | | for RRC connection release | | | | with redirection. | +----------+----------------------------+----------------------------+
## 6.17 Solution 17: MBMS reuse with Power Saving functions via potential
independent wake up for MBMS user service
### 6.17.1 Description
#### 6.17.1.1 General
The Power Saving solutions that have been defined in 3GPP are PSM and eDRX.
These solutions were designed having unicast service in mind, where it is
better in terms of resource utilization distribution that devices wake up at
different times.
Therefore, it is important that the time intervals the UE stays awake to
receive MBMS service or to discover if there\'s any MBMS service requested to
be received by application scheduled for delivery, should not necessarily be
the same as the wake up intervals negotiated for eDRX or PSM.
This solution proposes that the time intervals the UE needs to be awake for
MBMS user service may not coincide with the wake up time windows mandated by
eDRX (PTW) and/or PSM (periodic TAU + active time) configuration.
For those intervals the UE needs to be awake for MBMS user service, the
following cases can be identified:
**Case 1:** When the UE\'s need to be awake due to MBMS coincides with the UE
already being in connected mode due to other reasons, the UE follows normal
connected mode procedures.
**Case 2:** When the UE\'s need to be awake due to MBMS coincides with the UE
already being in idle mode and reachable (e.g. in active time for PSM or PTW
for eDRX) the UE follows normal idle mode procedure.
**Case 3:** When the UE\'s need to be awake due to MBMS coincides with the UE
being in idle mode and in deep sleep, i.e. unreachable for paging to the
network, the UE leaves the deep sleep for MBMS service only.
\- If the MBMS user service does not require the UE to transition to connected
mode, i.e. the UE receives MBMS user service in idle mode, then the UE does
not update the MME to become reachable for paging. In other words, the UE
would still be considered unreachable for paging in the MME. This minimizes
the signalling between the UE and the network.
\- If the MBMS user service requires the UE to transition to connected mode
(e.g. for HTTP reception reporting, file repair, etc.) then the UE performs
regular procedures for ECM connected mode. This would therefore make the UE
become reachable.
**Case 4:** When the UE is in the middle of an MBMS data transfer, and the UE
is scheduled to move to deep sleep due to power saving, e.g. end of PTW for
eDRX or expiration of active time for PSM, then the UE does not go to deep
sleep during the remainder of the MBMS data transfer.
\- If at the end of MBMS data transfer, the UE knows there is another MBMS
data transfer scheduled soon, in that case depending of the time between MBMS
data transfers, the UE may not go to sleep between MBMS data transfers.
\- The UE may in fact not go to deep sleep while in an MBMS Broadcast session.
#### 6.17.1.2 Option 1: Event-based wake up with Service announcement
reception before start of MBMS Broadcast session
This solution category has the following characteristics:
\- Each UE follows regular wake ups based on e.g. eDRX or PSM, except when the
UE is aware of a scheduled MBMS Broadcast session.
\- The UE discovers a scheduled or ongoing MBMS Broadcast session for which an
application has requested reception while in one of the regular wake ups for
eDRX/PSM.
Since the service delay will be dictated by the eDRX or PSM parameters, a UE
receiving this type of broadcast service needs to be configured by the
application server delivering the MBMS broadcast content with a maximum sleep
cycle time, and needs to adjust either the requested eDRX cycle length or
requested pTAU timer in the NAS attach/TAU request accordingly.
The service announcement can be provided to UEs either via MBMS broadcast mode
or unicast.
One possibility could be that the service announcement is provided by MBMS
Broadcast mode to advertise MBMS Broadcast user Services. However, for very
long sleep cycles, the network will need to broadcast this service
announcement for a very long period of time (e.g. hours for PSM), making it
potentially too inefficient in terms of overhead.
TS 23.246 [4] provides other unicast service announcement delivery mechanisms
that can be used, e.g.
\- PUSH mechanism (WAP, SMS-PP, MMS);
\- URL (HTTP, FTP).
\- This has the potential drawback that the UE needs to connect and fetch the
configuration from the URL at a certain frequency, when file downloads may
only occur every once in a while. However, it is also possible that SMS
triggering can be used to notify the UEs to perform URL retrieving.
Figure 6.17.1.2-1 shows an example Broadcast timeline:
Figure 6.17.1.2-1: MBMS Broadcast timeline for Event-based wake up with
Service announcement reception before start of MBMS Broadcast session
In the example shown in the figure, Broadcast service announcement is shown. A
similar timeline applies to unicast service announcement. The application
server must be aware of the maximum deep sleep cycle targeted UEs have. This
can be done over the top, by configuration, or received via SCEF exposure. The
time between Service announcement start and the start of Broadcast session
should be larger than the maximum deep sleep cycle of the targeted devices.
#### 6.17.1.3 Option 2: Repeated Content Broadcast Transmission
This solution category has the following characteristics:
\- Each UE follows regular wake ups based on e.g. eDRX or PSM, except when the
UE is aware of a scheduled MBMS Broadcast session.
\- The UE discovers a scheduled or ongoing MBMS Broadcast session for which an
application has requested reception while in one of the regular wake ups for
eDRX/PSM.
Since the service delay will be dictated by the eDRX or PSM parameters, a UE
receiving this type of broadcast service needs to be configured by the
application server delivering the MBMS broadcast content with a maximum sleep
cycle time, and needs to adjust either the requested eDRX cycle length or
requested pTAU timer in the NAS attach/TAU request accordingly.
For this solution specific TMGIs are configured in the UEs and are used to
identify a service that transmits the same content until all the UEs receive
as defined in TS 26.346 \"download delivery mode\", or for a certain period of
time larger than the deep sleep cycle, e.g. eDRX cycle or periodic TAU for
PSM.
The UE follows the normal power cycle for unicast (eDRX and/or PSM). Once the
UE wakes up, if it discovers an MBMS user service broadcast transmission that
it is configured to receive, the UE stays awake until the file is completely
received.
The UE receives the schedule of the file fragments and decides whether to stay
awake or go to sleep in between scheduled file fragments.
Figure 6.17.1.3-1 shows an example of the Broadcast timeline for Option.2:
\- Fr. X refers to the Fragment number X of the file being announced and
broadcast.
\- When the UE wakes up due to e.g. PTW start for eDRX (example in Figure 3),
the UE discovers the ongoing MBMS session, and starts receiving the fragments
as soon as they are being broadcasted in any order. Once all fragments are
received (in the example Fr. 1 2 and 3) , the UE goes back to deep sleep if
normal eDRX behaviour would make the UE be in deep sleep at that time.
Figure 6.17.1.3-1: Repeated Content Broadcast
#### 6.17.1.4 Option 3: Periodic wake ups for potential service
announcement/data reception of MBMS user service.
This solution category has the following characteristics:
\- The UE belonging to a group or wanting to receive a specific MBMS user
service is configured to wake up at periodic time intervals (e.g. every day at
midnight) to receive service announcements and potentially receive data.
i. The time interval may contain time of wake up and time window interval.
ii. The UE may extend its wake up time if it is receiving MBMS (e.g. still
receiving a file) at the end of the time window interval.
\- The application server schedules file/message delivery at those wake up
time intervals.
The application server or the BM-SC configures the device to wake up for
potential MBMS service at specific times, e.g.:
\- Every day at a specific time.
\- Every X hours.
\- Every Monday at specific time(s).
\- Specific dates in specific month(s) at a specific time(s).
\- etc.
The UE also receives a specific TMGI for the MBMS user service. This TMGI is
statically allocated for the particular service.
The UE follows regular wake ups dictated by eDRX or PSM with the exception:
\- The UE wakes up and checks MCCH. It potentially receives service
announcement. If it recognizes a TMGI allocated to the particular service the
UE is seeking, the ir performs MBMS reception at the scheduled MBMS Broadcast
session time interval.
\- If over the top, the UE may provide an API for applications to configure
these wake ups.
\- This configuration is transparent to the 3GPP Core Network. In this manner,
eDRX/PSM configuration and configuration of wake ups for MBMS are completely
independent.
Figure 6.17.1.4-1: Periodic wake ups for MBMS service
### 6.17.2 Impacts on existing nodes and functionality
**Impacts for Option 1:**
In UE:
\- Handle potential wake up out of deep sleep due to power saving (e.g. eDRX,
PSM) for MBMS user service session/data transfer when it knows a scheduled
broadcast it is interested in receiving.
\- Remain awake during reception of MBMS data transfer, even when power saving
function would trigger moving to deep sleep (e.g. end of PTW in eDRX, end of
active time in PSM).
\- (The UE can already be configured by application server with maximum
allowed delay tolerance, in this case it would be for MBMS service, which can
translate to UE requesting specific eDRX cycle or periodic TAU).
In NW:
\- No standards impacts.
\- (Service announcement needs to be started at least an eDRX cycle or
periodic TAU length earlier than the actual data broadcast. This does not have
standards impact other than possible clarification).
In AS:
\- (The application server needs to trigger start for service announcement at
least an eDRX cycle or periodic TAU length earlier than the actual data
broadcast. This does not have standards impact other than possible
clarification).
**Impacts for Option 2:**
In UE:
\- Same as Option 1.
In NW:
\- (Knowledge of how long the NW needs to repeat the fragments for all UEs to
wake up and receive. This does not correspond to any actual standards change
except clarification at Stage 2 level).
**Impacts: for Option 3**
In UE:
\- Configuration for periodic wake ups for MBMS and UE behaviour when waking
up only for MBMS service.
In NW:
\- No impacts.
In AS:
\- Configure UE\'s application for periodic wake ups, sync MBMS broadcast data
transmission with these wake ups.
### 6.17.3 Solution Evaluation
**Evaluation for Option 1:**
**Benefits:**
\- No impacts to the network, except for possible clarification on required
timeline.
\- All power saving UEs are able to receive the MBMS data transfer at the same
time.
\- Only minor impact to UE to leave eDRX/PSM deep sleep or do not move to
eDRX/PSM deep sleep when necessary for MBMS data reception.
**Drawbacks:**
\- For Broadcast service announcement, possible overhead in broadcasting the
service announcement for a long period of time before actual MBMS data
transmission. This can be alleviated by using unicast service announcements,
e.g. via SMS. The operator can decide which service announcement to offer
depending on scenario.
\- Potentially large delay between trigger for file download and actual MBMS
data transmission.
**Evaluation for Option 2:**
**Benefits:**
\- UE only stays awake for MBMS service during Broadcast session.
\- Minor UE impact, and no NW impact except possible Stage 2 clarification.
**Drawbacks:**
\- Potentially large overhead for all UEs to be able to receive the Broadcast
data in the case of long deep sleep cycles.
**Evaluation for Option 3:**
**Benefits:**
\- Over the top: it can be supported without further changes in the network.
\- Minor UE impact for scheduled wake ups.
\- Delay for broadcast reception independent of unicast service delay
tolerance.
\- For application developer: deal with one interface, simplest development.
**Drawbacks:**
\- Potential unnecessary wake ups, potential increased power consumption.
## 6.18 Solution 18: Coverage enhancement for positioning
### 6.18.1 Description
#### 6.18.1.1 General
This solution addresses Sub-Issue #5.8 (_Message size adaptation according to
coverage level_). As shown in clause 5.5.9, different UEs may have different
coverage levels and this lead to very different location report transmission
times. The timeliness of delivering location reports can be improved if the
Enhanced Serving Mobile Location Centre (e-SMLC) knows the UE\'s coverage
level. In addition, this may have a significant influence on the UE power
consumption, for example, the UE is in a bad coverage and the location report
size is very big. The UE will use more repetitions and more time to transmit
data if it is in extremely poor coverage. Thus, it is beneficial to indicate
the UE\'s coverage level to the E-SMLC to perform reasonable measurement
configuration to avoid the huge location report transmitting in the air
interface while keeping a reasonable location accuracy.
As the mentioned above, a solution upon the enhancement of coverage level for
location needs to be addressed. Since all triggered location services request
will be sent to MME or triggered by the MME, and since the MME sends the
location services requests to the e-SMLC via SLs, a reasonable way forward is
that MME collects the UE\'s coverage level from the eNB and sends it to the
e-SMLC.
Two potential solutions to report the UE\'s CEL to the E-SMLC are described
below.
#### 6.18.1.2 Option 1: eNB proactively transmits CEL to MME, which, in turn,
relays it to E-SMLC
Figure 6.18.1.2-1: Option 1 (marked in red the new IEs)
1\. The UE uses a certain CE level.
2\. The UE establishes RRC Connection with the eNB.
3\. The eNB sends S1AP: INITIAL UE MESSAGE message to the MME carrying the
UE\'s CE level. The MME then stores the CE level information. In case of UP
resume, the S1AP: UE CONTEXT RESUME REQUEST message will be used to carry the
CE level.
4\. When the MME receives or determines the need for location service request,
it sends an LCS-AP: LOCATION REQUEST message to the e-SMLC including the UE\'s
CE level previously received from the eNB.
5\. The e-SMLC sends an LCS-AP: LOCATION RESPONSE message back to the MME.
However, in some cases, UE\'s coverage level may change while in connected
mode. To guarantee the e-SMLC to have accurate UE\'s coverage level for
reasonable configuration, a new procedure should be introduced to indicate the
new coverage level to MME. Since coverage level is dynamic information
different from UE radio capability, currently there is no suitable existing
S1-AP message to be used. Alternatively, the eNB can indicate the UE\'s
coverage level in the UPLINK NAS TRANSPORT message or in the UE capability
info indication message. In case a new procedure is used, the following step 6
is executed:
6\. When the eNB detects the coverage level changes, it will send the new
coverage level to MME by a S1-AP message, such as UE information transport or
UE coverage level transfer. Then MME will update the stored coverage level
information.
7\. When the MME receives or determines the need for location service request,
it sends an LCS-AP: LOCATION REQUEST message to the e-SMLC including the new
UE\'s CE level received from the eNB.
8\. The e-SMLC sends an LCS-AP: LOCATION RESPONSE message back to the MME.
#### 6.18.1.3 Option 2: MME requests CEL from eNB and relays it to E-SMLC
Figure 6.18.1.3-1: Option 2 (marked in red the new messages/IEs)
1\. The UE uses a certain CE level.
2\. The UE establishes RRC Connection with the eNB.
3\. The eNB sends the S1AP: INITIAL UE MESSAGE or the S1AP: UE CONTEXT RESUME
REQUEST message to the MME.
4\. When MME receives or determines the need for location service request, it
retrieves the UE\'s CEL from the eNB by sending a new S1AP: CE LEVEL REQUEST
message.
5\. The eNB replies to the MME with a new S1AP: CE LEVEL RESPONSE message
including the UE\'s coverage enhancement level.
6\. The MME sends an LCS-AP: LOCATION REQUEST message to the e-SMLC including
the UE\'s CE level previously received from the eNB.
7\. The e-SMLC sends an LCS-AP: LOCATION RESPONSE message back to the MME.
#### 6.18.1.4 Option 3: E-SMLC requests CEL to UE (LPP based)
In this solution the e-SMLC, after receiving a Location Service Request from
the MME, requires the CEL to the UE.
{width="5.810416666666667in" height="3.5125in"}
Figure 6.18.1.4-1: Option 3 (marked in red the new messages/IEs)
### 6.18.2 Impacts on existing nodes and functionality
Table 6.18.2-1: Impacts of Option 1 and Option 2 of Solution B
+----------------+----------------+----------------+----------------+ | | Option 1 (eNB | Option 2 (MME | Option 3 | | | proactively | requests CEL | (E-SMLC | | | transmits CEL | to eNB) | requests CEL | | | to MME) | | to UE) | +----------------+----------------+----------------+----------------+ | Impacted nodes | eNB: transmits | eNB: transmits | UE: transmits | | | CEL to MME in | CEL to MME | CEL to e-SMLC | | | INITIAL UE | when | in LPP message | | | MESSAGE and UE | requested. | | | | CONTEXT RESUME | | e-SLMC: | | | REQUEST and at | MME: requests | receives CEL | | | each CEL | and receives | from UE in LPP | | | change. | CEL from eNB | message | | | | and forwards | | | | MME: receives | it to the | | | | CEL from eNB | e-SLMC. | | | | and forwards | | | | | it to the | e-SLMC: | | | | e-SLMC. | receives CEL | | | | | from MME and | | | | e-SLMC: | uses it for | | | | receives CEL | location | | | | from MME and | services. | | | | uses it for | | | | | location | | | | | services. | | | +----------------+----------------+----------------+----------------+ | Impacted | S1AP: new | S1AP: new CE | LPP: new CEL | | interfaces | Coverage | Level | IE | | | Enhancement | Re | | | | Level IE in | quest/Response | | | | INITIAL UE | procedure (two | | | | MESSAGE or UE | new messages) | | | | CONTEXT RESUME | | | | | REQUEST | LCS-AP: new | | | | messages. | Coverage | | | | | Enhancement | | | | New class 2 | Level IE in | | | | procedure to | LOCATION | | | | send the | REQUEST | | | | coverage | message | | | | enhancement | | | | | level to the | | | | | MME when the | | | | | eNB detects a | | | | | change. | | | | | Alternatively, | | | | | the UE\'s | | | | | Coverage | | | | | Enhancement | | | | | Level IE can | | | | | be inserted in | | | | | the UPLINK NAS | | | | | TRANSPORT | | | | | message or in | | | | | the UE | | | | | capability | | | | | info | | | | | indication. | | | | | | | | | | LCS-AP: new | | | | | Coverage | | | | | Enhancement | | | | | Level IE in | | | | | LOCATION | | | | | REQUEST | | | | | message. | | | +----------------+----------------+----------------+----------------+
### 6.18.3 Solution Evaluation
Option 1 and Option 2 of Solution 18 allow the MME to obtain the UE\'s
Coverage Enhancement Level and forward it to the e-SMLC. Option 3 allows the
e-SMLC to obtain the CE level directly from the UE.
Some considerations apply to all three options:
\- They allow configuring the reporting interval for periodic reports. As
highlighted in proposal 8 of R2-167820, some of these times may not suitable
for NB-IoT in all CE levels (they can be configured in a range of \~1s to 60
seconds). If the UE is performing measurements in idle and high coverage
levels, it will not be able to report some lower intervals.
\- The amount of information that is exchanged in the LPP messages could be
adjusted according to CE level, for example amount of assistance information.
If the positioning server has the ability to change the amount of information
in the messages according to CE level it can help with the UEs power
consumption in high coverage levels.
As reported in Table 6.18.2-1, with the possibility to include the UE\'s
Coverage Enhancement Level in existing messages, it appears that Option 1 has
less impact on the current system since it does not require any new procedure
and it simply enhance existing messages in S1AP and LCS-AP.
# 7 Overall Evaluation
## 7.1 Key Issue 1 - Authorization of use of Coverage Enhancements
Key Issue 1 has 4 solutions.
Solution 1 is based on principle of keeping new UE subscription parameter in
HSS. This parameter dictates if coverage enhancements is authorized or not for
the UE. The parameter is provided to the UE by the MME as part of NAS
signalling (i.e. Attach and TAU procedures). Solution also addresses the
architectural requirement to allow the 3rd party service provider to query the
status of, or enable, or disable Coverage Enhancements capability per UE.
Solution 1 has no impact on the RAN.
Solution 2 is based on principle of configuring UE (e.g. using OMA-DM or at UE
manufacturing) whether it is allowed to use coverage enhancements or not.
Solution is mainly useful for UEs which the network is not expected to change
this configuration. Given the limited applicability of this solution it is
proposed to not use this solution for the normative work.
Solution 3 is also based on principle of keeping new UE subscription
information in HSS (called as CE authorization information). This parameter
dictates if coverage enhancements is authorized or not for the UE. Parameter
is provided to the UE by the MME as part of NAS signalling (i.e. Attach and
TAU procedures). This is very similar to solution 1. Comparison between
solution 1 and solution 3 is as follow -
a) Solution 3 uses CE authorization information which consist of CE indication
parameter (same as Enhanced Coverage Allowed parameter in solution 1) and in
addition, authorized CE level range parameter which indicates the maximum CE
level that the UE can use. Solution 1 can be extended to include CE level
range parameter.
b) Solution 1 address architectural requirement to allow the 3rd party service
provider to query the status of, or enable, or disable Coverage Enhancements
capability per UE. Solution 3 doesn\'t address this architectural requirement
but can be extended to address this.
c) Solution 1 indicate interaction between Enhanced Coverage Info kept at MME
and new CE parameters from HSS when downlink data is received. Solution 3
doesn\'t address this but can be extended to address this.
Solution 1 & 3 are very similar. The Solution 3 also includes CE level range
parameter as part of UE subscription in HSS. The usefulness and impacts of
using CE level range as described in solution 3 may be discussed during the
normative phase in co-operation with RAN WGs.
Solution 4 is also based on principle of keeping new UE subscription
information in HSS (called as CE authorization information). However as
compared to solution 1 & 3, MME provides CE authorization information obtained
from HSS to the RAN. The RAN enforces the CN decision and informs the UE. In
addition to UE and CN impacts, solution has additional impacts on the RAN. One
benefit of enforcement by the eNB, in addition to the enforcement by the UE,
is to address the case of misbehaving UEs.
The most efficient solution to both provisioning of the UE as well as the
possibility of an efficient enforcement in the network is the S1 based
solution. The S1 based solution may be combined with a NAS and/or UE
configuration based solution for provisioning the UE to provide a more secure
transport of the CE authorization information.
## 7.2 Key Issue 2 - Reliable communication service between the UE and SCEF
The Solution 5, Alternative 5a, Option 1 achieves UE-SCEF reliability by
defining a protocol between the UE and SCEF for exchanging non-IP packets.
Solution 5, Alternative 5c provides UE-SCEF reliability by means of Hop-by-Hop
acknowledgements (i.e. by using RLC acknowledged mode and updating the S1-MME
and T6a protocols).
Table 7.5-1 shows a comparison of the Solution 5, Alternative 5a, Option 1
(New Transport Protocol, clause 6.5.1.2.1) and Solution 5, Alternative 5c
(Hop-by-Hop Acknowledgement, clause 6.5.1.4).
Table 7.2-1: Key Issue #2 Solution Comparison
+----------------------+----------------------+----------------------+ | | Solution 5 | Solution 5 | | | | | | | Alternative 5a | Alternative 5c | | | | | | | Option 1 | Hop-by-Hop | | | | Acknowledgement | | | New Transport | | | | Protocol | | +----------------------+----------------------+----------------------+ | UE Impacts | Yes | No | +----------------------+----------------------+----------------------+ | Network Impacts | SCEF | eNB, MME, and SCEF | +----------------------+----------------------+----------------------+ | Requires New | Yes, between the UE | No | | Protocol | and SCEF | | +----------------------+----------------------+----------------------+ | Impacts Existing | Yes, **creates two | Yes, S1-MME and T6a | | Protocols | types of Non-IP | | | | data, one with and | | | | one without the | | | | reliability header | | | | (based on APN | | | | configuration).** | | +----------------------+----------------------+----------------------+ | Is the Service | Yes, | It is always enabled | | Optional? | enabled/disabled per | if it is supported | | | APN | by the network. | | | | | | | | Note: It is possible | | | | to implement the | | | | solution so that it | | | | can be enabled based | | | | on a subscription | | | | parameter. | +----------------------+----------------------+----------------------+ | Are all packets | No, only if the | Yes | | acknowledged? | application | | | | indicates that an | | | | ACK is desired for | | | | the packet. | | +----------------------+----------------------+----------------------+ | Is the solution | No | Yes, requires that | | impacted by roaming? | | the eNBs and MMEs in | | | | the VPLMN support | | | | the feature. | +----------------------+----------------------+----------------------+ | **Type of UE-SCEF | UE -- SCEF | Hop-by-hop | | Reliability** | acknowledgements | acknowledgements | +----------------------+----------------------+----------------------+
## 7.3 Key Issue 3 - Inter RAT idle mode mobility to/from NB-IoT
For Key issue #3, the following overall evaluation is made on Solution 6:
\- For the TAI list handling, option 2b is the preferred solution as per the
solution evaluation described in clause 6.6.3.
\- For the PDN connectivity handling, option c.2 is preferred solution as per
the solution evaluation described in clause 6.6.3.
The above options of Solution 6 (PDN - solution c2, and TAI list alternative
b) meet the requirements to support inter-RAT idle mode mobility to/from NB-
IoT in a radio, core network and battery efficient manner; allows the data
volumes sent on different RATs to be correctly recorded on CDRs; and allows
the HPLMN to influence whether connectivity to APNs is maintained, reconnected
or disconnected at inter-RAT mobility to/from NB-IoT.
## 7.4 Key Issue 4 - Reuse of existing multicast/broadcast architecture
Table 7.4-1 shows a comparison of the Key Issue 4 solutions.
Table 7.4-1: Key Issue #4 Solution Comparison
+-------------+-------------+-------------+-------------+-------------+ | | Solution 12 | Solution 17 | Solution 17 | Solution 17 | | | | | | | | | Tune via | Option 1 | Option 2 | Option 3 | | | MME | | | | | | | Event Based | Repeated | Periodic | | | | Wake Up | Content | Wake Ups | | | | with | Broadcast | | | | | Service | | | | | | A | | | | | | nnouncement | | | +-------------+-------------+-------------+-------------+-------------+ | UE Impacts | No | Yes, minor | Yes, minor | Minor | | | | impact to | impact to | impact for | | | | UE to leave | UE to leave | scheduled | | | | eDRX/PSM | eDRX/PSM | wake ups. | | | | deep sleep | deep sleep | | | | | or do not | or do not | | | | | move to | move to | | | | | eDRX/PSM | eDRX/PSM | | | | | deep sleep | deep sleep | | | | | when | when | | | | | necessary | necessary | | | | | for MBMS | for MBMS | | | | | data | data | | | | | reception | reception | | +-------------+-------------+-------------+-------------+-------------+ | Network | SCEF, HSS, | No | No | No | | Impacts | and MME | | | | +-------------+-------------+-------------+-------------+-------------+ | Requires | Yes | No | Yes | No | | TMGI to be | | | | | | provisioned | | | | | +-------------+-------------+-------------+-------------+-------------+ | Increases | No | No | No | Yes | | Wake Ups | | | | | | (Requires | | | | | | that | | | | | | Unicast and | | | | | | Broadcast | | | | | | wake ups | | | | | | are | | | | | | separate) | | | | | +-------------+-------------+-------------+-------------+-------------+ | Suitable | Yes | No, | Yes | Yes | | for | | Requires a | | | | Triggers | | service | | (If TMGI is | | | | an | | p | | | | nouncement. | | rovisioned) | +-------------+-------------+-------------+-------------+-------------+ | MBMS System | No | No | Yes | No | | Overhead | | | | | | from | | | | | | Repeated | | | | | | Broadcast | | | | | | | | | | | | (Overhead | | | | | | from group | | | | | | members | | | | | | receiving | | | | | | broadcast | | | | | | at | | | | | | different | | | | | | times) | | | | | +-------------+-------------+-------------+-------------+-------------+ | Possible | Yes | Yes | Yes | No | | Long Delay | | | | | | Between the | | | | | | AS\'s | | | | | | service | | | | | | request and | | | | | | broadcast | | | | | | completion | | | | | +-------------+-------------+-------------+-------------+-------------+ | Power | Potential | Minimal, | Minimal, | Extra power | | Saving | large power | only | only | consumption | | impacts | consumption | additional | additional | during wake | | | during the | wake up is | wake up is | ups where | | | time the UE | to receive | to receive | there\'s no | | | is not in | the MBMS | the MBMS | MBMS | | | eDRX or | data. | data. | service. | | | PSM. | | | | +-------------+-------------+-------------+-------------+-------------+
Given the evaluation Table 7.4-1, the following can be inferred:
For scenarios where broadcasting data, e.g. software update, occurs very
infrequently (e.g. once a week or month) and at a-priori unknown times,
Solution 17 -- Option 1 holds several advantages over the other 3 options:
\- Solution 17 Option 3 is not as suitable because either it is not possible
to define a specific a-priori wake-up time for the device, or the UE needs to
wake many times (e.g. with periodicity of hours) incurring in unnecessary
power consumption when there is no actual MBMS service.
\- Solution 12 is not as suitable as it may require disabling the UE\'s power
savings mode long before the broadcast incurring in unnecessary power
consumption.
\- Solution 17 Option 2 incurs in increased overhead due to fragment
repetition for extended period time, especially if the period the UEs are in
deep sleep are long (e.g. hours).
For device triggering scenarios, or scenarios where MBMS delivery time is a
priori known and periodic, Solution 17 Option 3 holds several advantages over
the other 3 options:
\- Solution 17 Option 1 is not suitable for triggering as it requires service
announcement. Also for a-priori known MBMS data delivery Solution 17 Option 3
does not incur large delay between service announcement trigger and actual
MBMS delivery due to need to allow all UEs to wake from deep sleep due to eDRX
or PSM.
\- Solution 12 is not as suitable as it may require disabling the UE\'s power
savings mode long before the broadcast incurring in unnecessary power
consumption.
\- Solution 17 Option 2 incurs increased overhead due to fragment repetition
for extended period time, especially if the period the UEs are in deep sleep
is long (e.g. hours). It also requires service announcement.
Solution 17 - Option 1 and Solution 17 - Option 3 have larger benefits
depending on the scenario and together they fulfil the requirements of the key
issue for all scenarios.
## 7.5 Key Issue 5 - Reuse of Location Services architecture for Control Plane
CIoT EPS optimization
Key issue 5 has multiple sub-issues and one or more solutions for each sub-
issue.
Sub-issue 5.1 concerns eDRX and Power Saving Mode (PSM). A solution for this
involving support of last known location is combined with the solution for
sub-issue 5.2.
Sub-issue 5.2 concerns support for last known location and proposes a solution
based on retention by an MME of the last serving cell for a UE. The solution
has limited impacts to an MME, E-SMLC and GMLC. The benefits to an external
client in being provided with a last known location when a target U is in PSM
would be significant (e.g. no need to wait 1-3 hours necessarily for the UE to
again become available).
Sub-issue 5.3 concerns support for a deferred location for a UE that is not
available for a current location and in alignment with the existing deferred
location procedures for the UE availability event for GERAN and UTRAN access.
The preferred solution would interwork the existing EPC-MT-LR procedure in
clause 9.1.15 of TS 23.271 [7] with the existing deferred MT-LR procedure for
the UE availability event in clause 9.1.8 of TS 23.271 [7]. Stage 3
specification impacts to add new messages, new parameters or new parameter
values should not be needed. While there are some MME and GMLC impacts, the
benefits to an external client in being able to locate a UE in PSM could be
significant.
Sub-issue 5.4 concerns support of triggered and periodic location for a UE
using a single combined procedure. Such a procedure may be the only way for
the 3GPP control plane solution to obtain timely location updates for a UE
that spends most of its time in PSM and need only be activated during periods
when UE location is needed. For example, someone wishing to track a child, pet
or asset need only activate periodic or triggered location for some limited
period, thereby conserving battery. Some stage 3 support for this already
exists (due to existing support for GERAN and UTRAN). However, the procedure
will not be a small impact. Nevertheless, the benefits to an external client
could be significant.
Sub-issue 5.5 concerns support of positioning by a UE that has very limited
resources for obtaining DL position measurements (e.g. limited processing,
memory and/or RF receive chain). The solution is to allow a UE to enter idle
state in order to obtain requested DL location measurements. The network side
impacts and very limited. The UE impacts may be more significant (though the
procedure is still optional for the UE and need not be supported by a UE with
sufficient resources for DL location measurements).
Sub-issue 5.6 concerns enabling an E-SMLC to determine a limited message size,
limited message volume and expected (or worst case) message transfer delay for
a target UE with NB-IoT access. The solution is simple and requires only that
an MME provide an NB-IoT indication to an E-SMLC.
Sub-issue 5.7 concerns enabling an E-SMLC to adapt positioning when AS
security is not supported for a target UE with NB-IoT access. The solution is
simple and requires an MME to indicate to an E-SMLC when AS security is not
available for a UE. This solution can be efficiently combined with the
solution for sub-issue 5.6. The solution is considered conditional on
definition by RAN of positioning capability (e.g. RRC measurements) in Rel-14
for which lack of AS security could be a problem.
Sub-issue 5.8 concerns the provision of a coverage level by an MME to an
E-SMLC for a UE with NB-IoT access in order to allow the E-SMLC to determine
suitable maximum message sizes for UL and DL positioning messages. Provided a
coverage level can be available to an MME, the impacts of the solution for
sub-issue 5.8 (see clause 6.13.8) are simple. Solution 18, Option 1
generalizes solution 6.13.8, because it allows the MME and the e-SMLC to
retrieve the latest UE\'s CE level known at the eNB. Solution 18, Option 1 has
limited impact on existing messages. The provision of the UE\'s CE level is
meant for location services.
## 7.6 Key Issue 6 - Inter UE QoS for NB-IoT Control Plane Optimisation
For Key Issue 6 (Inter-UE QoS for NB-IoT Control Plane Optimization) three
solutions have been discussed:
Solution 7 (Inter UE QoS for NB-IoT Control Plane Optimisation using spare
codepoints in Message 3), Solution X (Inter UE QoS for NB-IoT Control Plane
Optimisation using a new UE radio identifier and UE context in the eNB) and
Solution Y (Inter UE QoS for NB-IoT Control Plane Optimisation by retrieving
the UE context from the MME).
Solution 7 relies on the UE indicating the correct QoS level to the eNB and
requires MME policing to guarantee it properly works. Solution 7 is only
targeted at NB-IoT and does not propose any solution for WB-E-UTRAN.
Solution 14 might require more work by RAN WGs (e.g. RRC signalling for ID
allocation; inter-cell issues). In order to apply Inter-UE QoS, for each UE,
Solution 14 requires the eNB to contact the MME only at the first RRC
connection establishment. For subsequent RRC connection establishments,
Solution 14 allows to apply Inter-UE QoS before contacting the MME and it
introduces inter-eNB signalling delays only in case of eNB change (a new X2-AP
procedure is needed for the retrieval of the UE context).
Solution 15 requires interaction between eNB and MME, but it is feasible and
secure. Solution 15 increases core network signalling (but not radio
signalling) and potentially requires the MME to be contacted at every RRC
connection establishment. However, the MME load can be mitigated by the eNB
only requesting the QoS information when its control channel is nearing full
load and/or based on O&M eNB configuration. eNB and MME load can also be
reduced by caching the QoS information in the eNB (with S-TMSI as identifier);
and/or only implementing this on NB-IoT. When contacting the MME it adds one
round trip delay between the RAN and the CN. That additional round trip delay
can be considered small in the context of the low bitrates when using in NB-
IoT and Coverage Enhancements. It requires a new S1-AP procedure for the
retrieval of the UE context.
Solution 15 could enable UE capability information (such as support for
Release 14 dual HARQ process/Transport Block Size data rate improvements) to
be retrieved from the MME along with the QoS information.
## 7.7 Key Issue 7 - CN overload control for data transfer via Control Plane
EPS CIoT Optimization
Key Issue 7 (CN overload control for data transfer via Control Plane CIoT EPS
Optimisation) - there are 2 solutions:
\- Solution 8 (Back-off timer for data transmission via control plane) -
proposes a back-off timer in Attach/TAU/Service Accept messages to suppress
the use of Control Plane CIoT EPS Optimisation for data transfer by the UE for
the duration of this timer. Allows to restrict the use of data transfer via
Control Plane CIoT EPS optimisation per UE with simple modifications to UE and
MME behaviour.
\- Solution 9 (Overload Start message for control plane data only) - proposes
a new parameter to the Overload Start message from the MME so that the eNB
stops selecting the overloaded MME for data transfer via Control Plane CIoT
EPS Optimisation. It is a complementary solution to the solution with the
back-off timer (Solution 8) as it restricts the access to the overloaded MME
in the first place. When eNB receives Overload Start message with indication
for overload from control plane data, there are two options for eNB behaviour:
\- Option 1: The eNB may reject requests from UEs for data transfer via
Control Plane CIoT EPS Optimisation and the eNB may include wait timer (e.g.
modified extended wait timer that would be applicable only to control plane
data initiation by the UEs) in the RRC Connection Reject/Release message. With
Option 1 the overload control from control plane data is applicable to all UEs
with capability for Control Plane CIoT EPS Optimisation. However, it requires
new indication in the RRC signalling (msg3 or msg5) so that the UE can
indicate its intention to use data transfer via Control Plane CIoT
Optimisation.
\- Option 2: The eNB may reject requests from UEs that indicate mo-data or
delayTolerantAccess in the RRC connection establishment cause and which also
indicate support for only Control Plane CIoT EPS Optimisation in the RRC
Connection Setup Complete message. The eNB may return a wait timer in the RRC
Connection Release message. With Option 2 the overload control from control
plane data is applicable to all UEs with capability for Control Plane CIoT EPS
Optimisation only, i.e. it does not apply to UEs that are capable for both,
Control Plane and User Plane CIoT EPS Optimisation. For UEs supporting both CP
& UP, it would be beneficial for MME to decide whether to reject request or
switch to the UP (as defined in solution 8). Option2 does not require new
indication by the UE in the RRC signalling and therefore can work for Rel-13
NB-IoT UEs.
The table 7.7-1 below compares Option 1 against Option 2 for Solution 9.
Table 7.7-1: Key Issue #7 Solution 9 options comparison
+----------------------+----------------------+----------------------+ | | Solution 9, Option 1 | Solution 9, Option 2 | | | | | | | (new CIoT | (re-use of the | | | indications needed | existing CIoT | | | in RRC signalling ) | support indications | | | | in the RRC | | | | signalling) | +----------------------+----------------------+----------------------+ | 1. Efficiency | **pros** | **pros** | | | | | | | - The overload | - The overload | | | control applies to | control applies to | | | all UEs capable of | UEs capable of CIoT | | | CIoT control plane | control plane data | | | data. | only | | | | | | | ** | ** | | | [cons]{.underline}**| [cons]{.underline}** | | | | | | | - For UEs that are | - does not apply to | | | capable for both | UEs capable of both | | | Control and User | Control Plane and | | | plane, if eNB | User Plane CIoT. | | | rejects request for | However, for such | | | Control plane data | UEs MME can decide | | | request then UE may | whether to reject | | | initiate data | request or switch to | | | request via the User | the UP (as defined | | | plane. This will | in solution 8). | | | lead to additional | | | | signalling, more UE | | | | power consumption | | | | and can further | | | | exacerbate MME | | | | overload. | | +----------------------+----------------------+----------------------+ | 2. RAN2/RAN3 | - A new value for | - A new value for | | interface impact | the overload | the overload | | | indication parameter | indication parameter | | | in the Overload | in the Overload | | | Start message from | Start message from | | | MME to eNB. | MME to eNB. | +----------------------+----------------------+----------------------+ | 3. UE/RAN2 | - A new indication | - No impact to | | interface impact | from the UE in the | NB-CIoT UE as | | | RRC signalling when | existing RRC | | | connecting with | indication and wait | | | intention to use | timer is reused. | | | CIoT control plane | | | | data. [(a concern | - Impact to WB-CIoT | | | for RAN2 expressed | UE as the extended | | | in their LS | wait timer shall be | | | a | applicable only to | | | nswer)]{.underline}. | CIoT control plane | | | | data and also it | | | - A wait timer | shall apply for RRC | | | (e.g. a modified | connections with | | | extended wait timer) | mo-data est cause, | | | is required in the | as well. | | | RRC signalling from | | | | eNB to the UE that | | | | is applicable only | | | | for data transfer | | | | via control plane | | | | CIoT data. | | +----------------------+----------------------+----------------------+ | 4. Backward | NO - as this | YES - as existing | | compatible (Rel-13 | requires a new | indications are used | | support) | indication by UE | | +----------------------+----------------------+----------------------+
# 8 Conclusions
## 8.1 Key Issue 1 - Authorization of use of Coverage Enhancements
For the Key Issue 1 \"Authorization of use of Coverage Enhancements\", the
following is recommended:
1\. It is recommended that the solution 1 is the basis for normative
specifications, and in addition the S1 impacts from solution 4. RAN related
aspects of the solution will need to be determined in co-operation with RAN
WGs.
2\. If the UE needs to attempt to initiate an emergency session it may use its
full physical layer capabilities.
NOTE: Functionality to avoid potential ping-pong between PLMNs, avoiding UEs
getting frequent out-of-coverage needs to be covered during normative phase,
while keeping the solution simple.
## 8.2 Key Issue 2 - Reliable communication service between the UE and SCEF
For Key Issue #2 (Reliable communication service between the UE and SCEF):
\- In order to support reliable data delivery between the UE and the SCEF,
Solution 5, Alternative 5a, Option 1, titled \"Based on UE - SCEF
acknowledgment\" in clause 6.5 is the basis for the normative work for
providing a mechanism for the UE to determine if the data was successfully
delivered to the SCEF and vice versa. The service is enabled or disabled based
on APN Configuration per SLA.
\- Solution 5, Alternative 5c, titled \"Based on hop by hop acknowledgment\"
in clause 6.5 is the basis for the normative work for improving overall
reliability of messaging between the UE and SCEF.
## 8.3 Key Issue 3 - Inter RAT idle mode mobility to/from NB-IoT
For Key issue #3, Solution 6 as described in clause 6.6 meets the requirements
and shall be adopted for the normative work with the following:
\- For TAI handling option 2b is adopted.
\- For PDN connectivity handling step c2 is adopted.
For Key issue #3, RAN2 will not perform any enhancement to inter-RAT mobility
to/from NB-IoT in Rel-14. This implies that the UE will provide only NB-IoT
capabilities over NB-IoT and only WB-E-UTRAN capabilities (no NB-IoT
capabilities) over WB-E-UTRAN. Therefore, Solution 16 Option 5 as described in
6.16.1.6 is the most suitable solution compatible with current RRC signalling
and eNB behaviour and shall be adopted for the normative work.
## 8.4 Key Issue 4 - Reuse of existing multicast/broadcast architecture
For MBMS user services as defined in TS 23.246 [4], it is recommended to use
Solution 17 Options 1 and 3, as defined in clause 6.17, as basis for the
normative specifications.
NOTE: Solution 17 Option 2 would implicitly be supported by the UE behaviour
defined for Option 1.
## 8.5 Key Issue 5 - Reuse of Location Services architecture for Control Plane
CIoT EPS optimization
For key issue 5, as interim agreement, it is recommended to provide normative
support in the specifications for the following:
> For sub-issue 5.2: The last known location solution as described in clause
> 6.13.2.1 without the support of additional location measurements or an
> indication to an external client as to when a UE may next become available.
>
> For sub-issue 5.3: A deferred MT-LR procedure for the UE availability event
> based on solution 2 in clause 6.13.3.1.
>
> For sub-issue 5.4: A combined periodic and triggered location procedure for
> the periodic event, change of area event and motion event as described in
> clause 6.13.4.1.
>
> For sub-issue 5.5: The use of idle state by a UE for location measurements
> as described in clause 6.13.5.1.
>
> For sub-issue 5.6: The indication of NB-IoT access for a UE as described in
> clause 6.13.6.1.
>
> For sub-issue 5.7: This sub-issue only exists if RAN WGs introduce RRC
> measurements in NB-IoT in Rel-14 for which lack of AS security would be a
> problem. Only in case the RAN WGs introduce RRC measurements in NB-IoT, the
> indication of AS security for a UE as described in clause 6.13.7.1 will be
> used as baseline for core network alignment with RAN WG work.
>
> For sub-issue 5.8: The indication of the UE\'s CE level to the MME and
> e-SMLC as described in Solution 18, option 1. The UE\'s CE level is used for
> supporting location services.
## 8.6 Key Issue 6 - Inter UE QoS for NB-IoT Control Plane Optimisation
For Key Issue 6, it is recommended to use solution 15 \"Inter UE QoS for NB-
IoT Control Plane Optimisation by retrieving the UE context from the MME\" as
the basis of normative work in Release 14.
## 8.7 Key Issue 7 - CN overload control for data transfer via Control Plane
EPS CIoT Optimization
For Key Issue 7 (CN overload control for data transfer via Control Plane CIoT
EPS Optimisation) it is agreed to specify in the normative specs:
\- Solution 8 - Back-off timer for data transmission via control plane.
\- Solution 9 (Option 2) - Overload Start message for control plane data only.
#