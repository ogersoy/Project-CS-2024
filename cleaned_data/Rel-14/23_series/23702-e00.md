# Foreword
This Technical Report has been produced by the 3^rd^ Generation Partnership
Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The objective of this study is to investigate and evaluate architecture
enhancements to introduce for the specification of the 3GPP PS Data Off
feature so as to meet the requirement defined in TS 22.011[2].
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or non-specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 22.011: \"Service accessibility\".
[3] 3GPP TS 31.102: \"Characteristics of the USIM application\".
[4] 3GPP TS 31.111: \"Universal Subscriber Identity Module (USIM) Application
Toolkit (USAT)\".
[5] 3GPP TS 31.115: \" Secured packet structure for (Universal) Subscriber
Identity Module (U)SIM Toolkit applications\".
[6] 3GPP TS 23.040: \"Technical realization of the Short Message Service
(SMS)\".
[7] 3GPP TS 23.221: \"Architectural requirements\".
[8] 3GPP TS 23.401: \"GPRS enhancements for E-UTRAN access\".
[9] 3GPP TS 23.272: \"Circuit Switched Fallback in Evolved Packet System;
Stage 2\".
[10] 3GPP TS 24.390 \"Unstructured Supplementary Service Data (USSD) using IP
Multimedia (IM) Core Network (CN) subsystem IMS; Stage 3\"
[11] 3GPP TS 22.030: \"Man-Machine Interface (MMI) of the User Equipment
(UE)\".
[12] GSMA IR.88: \"LTE and EPC Roaming Guidelines Version 14.0 10^th^ February
2016\"
[13] GSMA IR 33: \"GPRS Roaming Guidelines Version 8.0 20^th^ May 2015\"
[14] 3GPP TS 23.060: \"General Packet Radio Service (GPRS); Service
description; Stage 2\".
[15] 3GPP TS 23.012: \"Location Management Procedures\".
[16] 3GPP TS 23.203: \"Policy and charging control architecture\".
[17] 3GPP TS 29.272: \"Evolved Packet System (EPS); Mobility Management Entity
(MME) and Serving GPRS Support Node (SGSN) related interfaces based on
Diameter protocol\".
[18] 3GPP TS 29.228: \"IP Multimedia (IM) Subsystem Cx and Dx Interfaces;
Signalling flows and message contents\".
[19] 3GPP TS 23.292: \"IP Multimedia Subsystem (IMS) centralized services;
Stage 2\".
[20] 3GPP TS 23.078: \"Customised Applications for Mobile network Enhanced
Logic (CAMEL) Phase 4; Stage 2\".
# 3 Definitions, symbols and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
TR 21.905 [1] and the following apply. A term defined in the present document
takes precedence over the definition of the same term, if any, in TR 21.905
[1].
**3GPP PS Data Off: A feature which when configured in the UE and the Core
Network by the HPLMN and activated by the user prevents transport via PDN
connections in 3GPP access of all IP packets except IP packets required by
3GPP PS Data Off Exempt Services.**
**3GPP PS Data Off Exempt Services: A set of operator services (i.e. the
exempt services enumerated in clause 10.2 of TS 22.011 [2] including the
signalling used to enable such services) that are allowed even if the 3GPP PS
Data Off feature has been activated in the UE by the user.**
**non-SIP based Service:** **A service that does not use SIP. TS 22.011 [2]
clause 10 defines 2 such service: Device Management over PS and IMS
Supplementary Service configuration via Ut interface using XCAP.**
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in TR 21.905
[1] and the following apply.\ An abbreviation defined in the present document
takes precedence over the definition of the same abbreviation, if any, in TR
21.905 [1].
ADD Automatic Device Detection
# 4 Architectural considerations
## 4.1 Architectural assumptions and requirements
When the 3GPP Data Off is activated an ongoing service session shall be
terminated if the corresponding service is not a 3GPP PS Data Off Exempt
Service.
The impact to UE shall be minimized.
The impact to MME / SGSN shall be minimized.
# 5 Key issues
## 5.1 Key Issue 1 - **UE informing the network about the UE\'s status**
### 5.1.2 Description
This key issue relates to the core network becoming aware immediately of the
UE\'s status of the 3GPP PS Data Off feature (i.e. activated or deactivated)
upon UE initial attach and when UE\'s changes the status of 3GPP PS Data Off
feature.
Activation/deactivation of the 3GPP PS Data Off feature triggered by the end
user applies to all existing PDNs and newly established PDNs for the UE.
### 5.1.3 Architectural Requirements
Editor\'s note: Capture agreements on architectural requirements for solving
the key issue. This clause may be omitted if deemed unnecessary.
## 5.2 Key Issue 2 - making the UE aware of 3GPP PS Data Off Exempt Services
### 5.2.1 Description
This key issue relates to the UE being aware of the list of services
configured to be part of the 3GPP PS Data Off Exempt Services defined in TS
22.011 [2].
### 5.2.2 Architectural Requirements
Editor\'s note: Capture agreements on architectural requirements for solving
the key issue. This clause may be omitted if deemed unnecessary.
## 5.3 Key Issue 3 - support for controlling non-SIP based services which are
not 3GPP PS Data Off Exempt Services in roaming (LBO and roaming with no IMS
roaming interfaces) and non-roaming cases
### 5.3.1 Description
This key issue addresses the control of non-SIP based services which are not
part of the 3GPP PS Data Off Exempt Services. This will cover following
scenarios:
a) PCRF is deployed;
b) PCRF is not deployed.
NOTE: The non-SIP based 3GPP PS Data Off Exempt Services can be used over a
PDN connection to an APN other than the IMS well known APN only.
### 5.3.2 Architectural Requirements
Editor\'s note: Capture agreements on architectural requirements for solving
the key issue. This clause may be omitted if deemed unnecessary.
## 5.4 Key Issue 4 - support for per service control of SIP messages (and
associated media traffic) for SIP based services which are not 3GPP PS Data
Off Exempt Services in roaming (LBO and roaming with no IMS roaming
interfaces) and non-roaming cases
### 5.4.1 Description
This key issue addresses per service control of SIP messages and associated
media traffic for SIP based services which are not part of the 3GPP PS Data
Off Exempt Services.
NOTE: The SIP based 3GPP PS Data Off Exempt Services can be used over a PDN
connection to IMS well known APN (when used as part of carrier grade services
of GSMA IR.92, GSMA IR.94, GSMA NG.101), or over any PDN connection (when used
as part of GSMA RCS).
### 5.4.2 Architectural Requirements
Editor\'s note: Capture agreements on architectural requirements for solving
the key issue. This clause may be omitted if deemed unnecessary.
# 6 Solutions
## 6.1 Solutions for Key Issue 1
### 6.1.1 Solution 1.1: UE informing the network (EPC and IMS) about the UE\'s
status via NAS and SIP Register
#### 6.1.1.1 Description
The UE informs the MME about the 3GPP PS Data Off (de)activation:
a) in the Attach Request message of the Initial Attach procedure; and
b) After attachment in the TAU Request message in the Tracking Area Update
procedures that includes an indication to that effect.
The MME stores the received the 3GPP PS Data off status.
For case b, it is possible that the UE has multiple existing PDN connections.
In this case the UE shall inform the MME about the 3GPP PS Data Off status.
The MME in turn informs the P-GW involving the PDN connection about the 3GPP
PS Data Off status as depicted in solution for key issue 3 so that the PGW can
undertake the necessary actions. The MME repeats the procedure with every P-GW
for every PDN connection for the UE. The solution for key issue 3 also depicts
the MME behaviour when the UE establishes new PDN connection
The UE informs the IMS domain about the 3GPP PS Data Off (de)activation using
a 3GPP PS Data Off indication in the initial REGISTER request and subsequent
to that via a re-REGISTER request that includes an indication to the effect.
Editor\'s note: The applicability of this to 2G/3G is FFS.
#### 6.1.1.2 Impacts on existing nodes and functionality
The following nodes are impacted:
UE:
The UE needs to support the additional information in Attach Request message
of the Initial Attach procedure, as well as the new triggers for sending TAU
and the additional information therein
The UE also needs to send a SIP REGISTER with the appropriate 3GPP PS Data Off
indication to inform the IMS domain
MME:
The MME needs to store the received status.
S-CSCF:
The S-CSCF needs to understand the added behaviour in a SIP REGISTER request
for the 3GPP PS Data Off activation/de-activation.
The behaviour of the above network nodes for the received 3GPP PS Data Off
status is described in the impacts on nodes in the solution to key issue 3.
#### 6.1.1.3 Solution Evaluation
Editor\'s note: Use this clause for evaluation at solution level. Evaluation
at key issue level is done in a separate clause.
### 6.1.2 Solution 1.2: UE reports its 3GPP PS Data Off status to 3GPP Core
Network
#### 6.1.2.1 Solution Description
##### 6.1.2.1.1 General
This solution addresses the key issue #1.
For PGW anchored connection:
(1) E-UTRAN access to EPC
UE reports its initial 3GPP PS Data Off status to MME in the attach procedure
and later reports it to MME in TAU procedures when the status is changed or
the RAT is changed (i.e. inter-RAT PS HO, Idle mode cell reselection).
MME needs to store the 3GPP PS Data Off status in order to decide whether the
UE\'s 3GPP PS Data Off status is changed when it receives the status later.
In case there are multiple PDN connections for a UE, MME needs to further
report the 3GPP PS Data Off status to all the SGWs serving the UE\'s PDN
connections, and then the SGW needs to further forward the 3GPP PS Data Off
status to all PGWs serving the UE\'s PDN connections. PGW stores the UE\'s
3GPP PS Data Off status.
(2) GERAN/UTRAN access to EPC
UE reports its initial 3GPP PS Data Off status to S4-SGSN in the Attach
procedure per clause 6.5.3 of TS 23.060 [14]. Later on, if there is status
change or the RAT is changed (i.e. inter-RAT PS HO, Idle mode cell
reselection), UE reports the status to S4-SGSN in RAU procedure per clause
6.9.1.2.1 or 6.9.1.2.2 of TS 23.060 [14].
S4-SGSN needs to store the 3GPP PS Data Off status in order to decide whether
the UE\'s 3GPP PS Data Off status is changed when it receives the status
later.
S4-SGSN reports the 3GPP PS Data Off status to PGW as following:
\- S4-SGSN reports the 3GPP PS Data Off status to S-GW in Create Session
Request message in step A of clause 9.2.2.1A of TS 23.060 [14]; S-GW further
reports the 3GPP PS Data Off status to P-GW in Create Session Request message
in step B of TS 23.060 [14].
\- S4-SGSN reports the 3GPP PS Data Off status to S-GW in Modify Bearer
Request message in step 6A of clause 6.9.1.2.2a of TS 23.060 [14]; S-GW
further reports the 3GPP PS Data Off status to P-GW in Modify Bearer Request
message in step 6B of TS 23.060 [14].
In case there are multiple PDN connections for a UE, S4-SGSN needs to further
report the 3GPP PS Data Off status to all the SGWs serving the UE\'s PDN
connections, and then the SGW needs to further forward the 3GPP PS Data Off
status to all PGWs serving the UE\'s PDN connections. PGW stores the UE\'s
3GPP PS Data Off status.
For GGSN anchored connection:
UE reports its initial 3GPP PS Data Off status to SGSN in the Attach procedure
per clause 6.5.3 of TS 23.060 [14]. Later on, if there is status change or the
RAT is changed (i.e. inter-RAT PS HO, Idle mode cell reselection), UE reports
the status to SGSN in RAU procedure per clause 6.9.1.2.1 or 6.9.1.2.2 of TS
23.060 [14].
SGSN needs to store the 3GPP PS Data Off status in order to decide whether the
UE\'s 3GPP PS Data Off status is changed when it receives the status later.
SGSN reports the 3GPP PS Data Off status to GGSN as following:
\- SGSN reports the 3GPP PS Data Off status to GGSN in Create PDP Context
Request message in step 4 in clause 9.2.2.1 of TS 23.060 [14].
\- SGSN reports the 3GPP PS Data Off status to GGSN in Update PDP Context
Request message in step 6 in clause 6.9.1.3.2 of TS 23.060 [14], or in Update
PDP Context Request message in step 6 in clause 6.9.1.2.2 of TS 23.060 [14],
or in Update PDP Context Request message from SGSN to GGSN (new steps, not
shown in Figure 32) in clause 6.9.1.2.1 of TS 23.060 [14].
In case there are multiple PDN connections for a UE, SGSN needs to further
report the 3GPP PS Data Off status to all the GGSNs serving the UE\'s PDN
connections. GGSN stores the UE\'s 3GPP PS Data Off status.
The following clauses illustrate examples on when and how to report the 3GPP
PS Data Off status to PGW via E-UTRAN.
##### 6.1.2.1.2 Reporting initial status during attach procedure
{width="6.340972222222222in" height="9.140972222222222in"}
Figure 6.2.1.1-1: Reporting in Attach procedure (Figure 5.3.2.1-1 in TS 23.401
[8])
The 3GPP PS Data Off status (i.e. activated or deactivated) is included in
step 1, 2, 12 and 13, and finally reported to PGW.
PGW stores the latest 3GPP PS Data Off status in the UE\'s context.
##### 6.1.2.1.3 Reporting status change in TAU procedure
{width="6.499305555555556in" height="7.499305555555556in"}
Figure 6.2.1.2-1: Reporting in TAU procedure (Figure 5.3.3.2-1 in TS 23.401
[8])
When the UE\'s 3GPP PS Data Off status is changed, the TAU procedure will be
triggered to report the latest 3GPP PS Data Off status to PGW.
In step 2 and 3, the UE\'s 3GPP PS Data Off status is included and reported to
MME.
If there are multiple PDN connections for a UE, MME needs to send the UE\'s
3GPP PS Data Off status to all PGWs corresponding to these PDN connections.
In step 9, when SGW knows the UE\'s 3GPP PS Data Off status is included, it
will further forward this information to PGW in step 10. This requires to make
step 10 mandatory.
PGW stores the latest UE\'s 3GPP PS Data Off status in the UE\'s context.
#### 6.1.2.2 Impacts on existing nodes and functionality
UE:
UE needs to report the UE\'s 3GPP PS Data Off status to MME in Attach Request
and TAU Request messages.
UE needs to report the UE\'s 3GPP PS Data Off status to SGSN in Attach Request
and RAU Request messages.
MME:
MME needs to report the UE\'s 3GPP PS Data Off status to all SGWs serving the
UE\'s PDN connections in Create Session Request and Modify Bearer Request
messages for the Attach and TAU procedure respectively.
MME needs to store the 3GPP PS Data Off status.
SGW:
In Attach procedure, SGW needs to forward the UE\'s 3GPP PS Data Off status to
all PGWs serving the UE\'s PDN connections in Create Session Request message.
In TAU procedure, when SGW knows the UE\'s 3GPP PS Data Off status is
included, it will further forward this information to all PGWs serving the
UE\'s PDN connections in the Modify Bearer Request message.
PGW:
PGW stores the latest 3GPP PS Data Off status in the UE\'s context.
S4-SGSN:
S4-SGSN needs to report the UE\'s 3GPP PS Data Off status to all SGWs serving
the UE\'s PDN connections in Create Session Request and Modify Bearer Request
messages for the PDP Context Activation procedure and RAU procedure
respectively.
S4-SGSN needs to store the 3GPP PS Data Off status.
SGSN:
SGSN needs to report the UE\'s 3GPP PS Data Off status to all GGSNs serving
the UE\'s PDN connections in Create PDP Context Request message and Update PDP
Context Request message for the PDP Context Activation procedure and RAU
procedure respectively.
SGSN needs to store the 3GPP PS Data Off status.
GGSN:
GGSN needs to store the 3GPP PS Data Off status.
#### 6.1.2.3 Evaluation
This solution only enables UE to report the 3GPP PS Data Off status to core
network in NAS level and IMS level is not impacted.
### 6.1.3 Solution 1.3: UE informing the network about the UE\'s status via
single NAS message
#### 6.1.3.1 Description of the solution
##### 6.1.3.1.1 General
In this solution:
\- The UE informs the MME/SGSN serving the UE on the activation/deactivation
of \"PS Data Off\" decided by the user, by adding the PS Data-Off UE\'s status
in Attach Request, Tracking Area Update Request, Routing Area Update Request.
\- The MME/SGSN serving the UE stores PS Data Off UE\'s status in its UE
context and forwards it to the HSS.
\- The HSS can then provide both the list of IMS exempted services and the
UE\'s PS Data Off status to the IMS network by providing the S-CSCF and the
relevant IMS-AS (e.g. T-ADS, MMTEL) with these information (together with IMS
subscription data) upon S-CSCF request when the UE registers to IMS, or
pushing both information to the S-CSCF if the user is already IMS registered.
No additional exchange is required between HSS and S-CSCF, since the HSS has
to anyway provide the list of exempted services to the S-CSCF.
NOTE 1: As an alternative, the list of IMS exempted services can be configured
in the IMS network, as long as it is common for all UEs.
NOTE 2: This solution is intended to be used with:
\- solutions for Key Issue #2 by which the HSS stores the list of exempted
services to be provided to the UE;
\- solutions for Key Issue #3 by which the HSS also provides the MME with the
list of exempted APNs and associated Packet Filtering Information for non-SIP
services, to be forwarded to the relevant PGW/PCRF;
\- solutions for Key Issue#4 by which the HSS provides the list of exempted
IMS services to the IMS network.
##### 6.1.3.1.2 Procedures
##### 6.1.3.1.2.1 Attach procedure {#attach-procedure .H6}
The Attach procedure specified in TS 23.401 [8], clause 5.3.2.1 is modified by
\- Adding \"PS Data Off\" in the Attach Request message and, in the Update
Location Request message. The \"PS Data Off\" UE\'s status can take two
values: activated, deactivated.
{width="6.226388888888889in" height="8.715277777777779in"}
Figure 6.1.3.1.2.1-1: Attach procedure
##### 6.1.3.1.2.2 Tracking Area Update procedure {#tracking-area-update-
procedure .H6}
Same principle for the Tracking Area Update procedure of TS 23.401 [8], clause
5.3.3.1:
{width="6.656944444444444in" height="5.142361111111111in"}
Figure 6.1.3.1.2.2-1: Tracking Area Update procedure with Serving GW change
##### 6.1.3.1.2.3 Informing S-CSCF about PS Data-off UE\'s status {#informing-
s-cscf-about-ps-data-off-ues-status .H6}
The following figures 6.1.3.1.2.3-1 shows how IMS is informed of \"PS Data-
off\".
{width="6.522916666666666in" height="3.5076388888888888in"}
Figure 6.1.3.1.2.3-1: IMS is informed of \"PS Data-off\"
In this solution, HSS is aware of the PS data-off activation status from
Packet core Function and is provided to S-CSCF in the step 3, using the Cx-
Pull procedure upon S-CSCF request when the UE registers to IMS, or using the
Cx-Put procedure if the user is already IMS registered. This includes the list
of IMS services being provisioned with PS Data-off service. S-CSCF can then
send this information to the relevant IMS AS (e.g. T-ADS) via 3rd party
registration.
#### 6.1.3.2 Impacts on existing nodes and functionality
Editor\'s note: Capture impacts on existing 3GPP nodes and Functional elements
(e.g. UE, MME, eNB, S-GW, P-GW, P-CSCF, etc.).
#### 6.1.3.3 Solution Evaluation
Editor\'s note: Use this clause for evaluation at solution level. Evaluation
at key issue level is done in a separate clause.
### 6.1.4 Solution 1.4: Key issue 1 UE reports its 3GPP PS Data Off status to
HSS using USSD and USSI
#### 6.1.4.1 Description
The solution below is based upon using USSD and shows the case when USSD over
CS has been chosen. However the functionality is equally applicable to using
USSI as specified in TS 24.390 [10].
Figure 6.1.4.1-1: USSD Activation / Deactivation of 3GPP PS Data Off
Steps 1-6 are optional and are only performed by the UE when UICC is inserted
into ME for the first time:
1) UE performs an Attach procedure as specified in TS 23.401 [8]
2) The UE sends a USSD message containing a well known *# sequence that
deactivates 3GPP PS Data off. The domain used for USSD will be selected
according to TS 23.221 [7], clause 7.2e. The *# sequence is provisioned in the
UE by the HPLMN using device management or on the USIM.
NOTE 1: The well known 3GPP PS Data Off deactivation *# sequence is chosen
from the HPLMN range that can be found in TS 22.030 [11].
NOTE 2 The *# sequence could be specified by the GSMA or chosen by the HPLMN.
3) The MSC analyses the *# sequence received in the USSD message from the UE
and determines from the *# sequence that the USSD message is to be routed to
the HPLMN. The MSC includes the IMSI in the message.
4) The HSS marks 3GPP PS Data Off as being deactive for the IMSI received.
5) The HSS sends back an acknowledgement.
6) The UE receives the USSD acknowledge.
Activation:
7) 3GPP PS Data Off is activated.
8) The UE sends a USSD message containing a well known *# sequence that
activates 3GPP PS Data off. The domain used for USSD will be selected
according to TS 23.221 [7] clause 7.2e. The *# sequence is provisioned in the
UE by the HPLMN using device management or on the USIM.
NOTE 3: The well known 3GPP PS Data Off activation *# sequence is chosen from
the HPLMN range that can be found in TS 22.030 [11].
NOTE 4 The *# sequence could be specified by the GSMA or chosen by the HPLMN.
9) The MSC analyses the *# sequence received in the USSD message from the UE
and determines from the *# sequence that the USSD message is to be routed to
the HPLMN. The MSC includes the IMSI in the message.
10) The HSS marks 3GPP PS Data Off as being active for the IMSI received.
11) The HSS sends back an acknowledgement.
12) The UE receives the USSD acknowledge.
Deactivation
See steps 2)-6).
#### 6.1.4.2 Impacts on existing nodes and functionality
The HSS needs to be provisioned with which services are 3GPP PS Data Off
Exempt Services and be able to receive a USSD message and associate that with
activating or de-activating 3GPP PS Data Off Exempt Services; and
UE needs to be able to send indications if 3GPP PS Data Off service has been
activated or deactivated.
#### 6.1.4.3 Solution Evaluation
The solution requires no new functionality in any VPLMN nodes. The solution
does require UTRAN or GERAN to be available to support the USSD operation
otherwise the UE needs to use USSI as specified in TS 24.390 [10]. The
solution with USSI works only when USSI is an 3GPP PS Data Off Exempt Service.
### 6.1.5 Solution 1.5: UE informing EPC, IMS about the UE\'s Data Off
Capability via NAS message and IMS Register with HSS holding provisioning
information
#### 6.1.5.1 Description of the solution
This solution is a variant of solution 1.3 \"Solution 1.3: UE informing the
network about the UE\'s status via single NAS message\".
In this solution HSS is provisioned with all the service related information
(SIP, and non-SIP) that are data exempt. In addition, when HSS is updated at
initial Attach or Tracking Area Update, an indication of 3GPP Data off
supported by both UE and MME will be included. If the indication shows that
3GPP Data Off is supported by UE and MME, HSS sends to MME the information
related to 3GPP Data off exempt services, e.g. downlink filters associated
with the non-SIP data exempt services, and the uplink filters for the non-SIP
data exempt services to be enforced by the UE. MME stores that list and
forwards to the UE its uplink filters in the Attach-Accept Message or Tracking
Area Update Accept message.
More specifically in this solution, the UE informs the MME about the 3GPP PS
Data Off (de)activation:
a) in the Attach Request message of the Initial Attach procedure; and
b) After attachment in the TAU Request message in the Tracking Area Update
procedures that includes an indication to that effect.
The MME stores the received 3GPP PS Data Off status, and the information
related to 3GPP Data off exempt services e.g. downlink/uplink filters for data
exempt services.
For any updates to the non-SIP data exempt services, HSS pushes the uplink and
downlink filters to the MME using existing Diameter procedures.
The uplink filters can be updated in the following way:
If the Data Off status is active, the MME can delay sending the updated uplink
filters until the next time TAU is performed and the updated uplink filters
are included in the TAU Accept message.
If the Data Off status is not active, then MME can delay sending the updated
uplink filters until the next time TAU is performed and the updated uplink
filters are included in the TAU Accept message
The downlink filters can be updated as follows:
If the Data Off status is active, and if the operator policy doesn\'t allow a
forced UE detach and re-attach, MME can immediately notify the SGW/PGW of the
updated downlink filters.
If the Data Off status is not active, MME doesn\'t need to notify SGW/PGW.
For SIP-based services, the UE informs the IMS domain (e.g. CSCF) about the
3GPP PS Data Off (de)activation using a 3GPP PS Data Off indication in the
initial REGISTER request and subsequent to that via a re-REGISTER request that
includes an indication to the effect. This keeps the IMS domain updated with
the UE 3GPP Data Off Status. The IMS domain can be pre-configured with the
list of data exempt SIP services or it can receive them from HSS. The IMS
domain forwards to the UE the list of SIP data exempt services in the 200 OK
to the REGISTER Request.
For any updates to that list following an IMS registration, and if 3GPP Data
Off status is active, if the UE is not engaged in any session and based on
operator policy, IMS domain can deregister the UE to force a new IMS
registration and where the UE gets updated, or the changes shall be applied at
the next registration performed by the UE. If 3GPP Data status is not active,
then the IMS domain will wait until the UE updates the 3GPP Data Off status to
active to send the new list in the 200 OK response.
#### 6.1.5.2 Impacts on existing nodes and functionality
The following nodes are impacted:
UE:
The UE needs to support the additional information in Attach-Request and
Attach-Accept message of the Initial Attach procedure, as well as the new
triggers for sending TAU and the additional information therein in addition to
the uplink filters in a TAU Accept message.
Depending on solution chosen, the UE may need to support updated EMM
Information message.
The UE also needs to send a SIP REGISTER with the appropriate 3GPP PS Data Off
indication to inform the IMS domain.
MME:
The MME needs to store the received status and the list of 3GPP Data Off
exempt services (downlink and uplink filters). MME will follow the solution in
key issue 3, and key issue 4 for the processing associated with these data
exempt services.
S-CSCF:
The S-CSCF needs to understand the added behaviour in a SIP REGISTER request
for the 3GPP PS Data Off activation/de-activation.
HSS:
Provision and distribute the non-SIP data exempt services to MME when informed
about a UE attachment, and the list of SIP services to the S-CSCF at UE IMS
registration.
#### 6.1.5.3 Solution Evaluation
Editor\'s note: Use this clause for evaluation at solution level. Evaluation
at key issue level is done in a separate clause.
### 6.1.6 Solution 1.6: UE reports its 3GPP PS Data Off status to 3GPP Core
Network in PCO
#### 6.1.6.1 Solution description
This solution addresses key issue #1.
For the case of reporting to PGW via E-UTRAN:
\- Regarding attach procedure, the UE reports its initial 3GPP PS Data Off
status in PCO (Protocol Configuration Option) to PGW in the piggybacked ESM
message for the default PDN connection as described in clause 5.3.2.1 of TS
23.401 [8] (step 6, 12 and 13 of Figure 5.3.2.1-1: Attach procedure).
\- Regarding UE requested PDN connectivity, the UE reports its current 3GPP PS
Data Off status in PCO to PGW in the PDN Connectivity Request message as
described in clause 5.10.2 of TS 23.401 [8].
\- Regarding the already established PDN connections, the UE reports the
changed 3GPP PS Data Off status in PCO to PGW in the Bearer Resource
Modification as specified in clause 5.4.5 of TS 23.401 [8].
\- PGW stores the latest 3GPP PS Data Off status in the PCO for the UE and
shall cease sending downlink IP Packets to the UE for all services that are
not 3GPP PS Data Off Exempt Services per TS 22.011 [2], based on the solutions
for key issue#3 and key issue#4.
For the case of reporting to GGSN via GERAN/UTRAN:
\- Regarding activation procedures, UE reports its 3GPP PS Data Off status in
PCO to GGSN/PGW in Activate PDP Context Request as defined in 9.2.2 of TS
23.060 [14].
\- Regarding MS-Initiated PDP Context Modification Procedure, UE reports the
changed 3GPP PS Data Off status in PCO to GGSN/PGW in Modify PDP Context
Request as defined in 9.2.3.3 of TS 23.060 [14].
\- GGSN stores the latest 3GPP PS Data Off status in the PCO for the UE and
control only the packet flows related to 3GPP PS DATA OFF exempt service are
allowed to be transmitted based on the solution for key issue#3 and key
issue#4.
In case there are multiple PDN connections for a UE, the UE needs to report
the 3GPP PS Data Off status in PCO to all the PGWs/GGSNs serving the UE\'s PDN
connections.
The UE also informs the IMS domain about the 3GPP PS Data Off (de)activation
using a 3GPP PS Data Off indication in the initial REGISTER request and
subsequent to that via a re-REGISTER request that includes an indication to
the effect.
#### 6.1.6.2 Impacts on existing nodes and functionality
The following nodes are impacted:
UE:
\- The UE needs to report 3GPP PS Data Off status (i.e. activated or
deactivated) in PCO in the ESM message encapsulated in the Attach Request
message of the Initial Attach procedure (for E-UTRAN), in UE Requested PDN
connection request and in Request Bearer Resource Modification.
\- The UE also needs to send a SIP REGISTER/re-REGISTER request with the
appropriate 3GPP PS Data Off indication to inform the IMS domain.
PGW/GGSN:
PGW stores the latest 3GPP PS Data Off status in the PCO for the UE.
S-CSCF:
\- The S-CSCF needs to understand the added behaviour in a SIP REGISTER/re-
REGISTER request for the 3GPP PS Data Off activation/de-activation.
### 6.1.7 Solution 1.7 for Key issue 1: UE reports its 3GPP PS Data Off status
to HSS using USSD and USSI using Auto Device Detection (ADD)
#### 6.1.7.1 Description
The solution below is based upon using USSD and Automatic Device Detection
feature as specified in TS 23.012 [15], TS 23.060 [14] clause 15.5. The
diagram shows the case when USSD over CS has been chosen. However the
functionality is equally applicable to using USSI as specified in TS 24.390
[10].
The solution requires no new functionality in any VPLMN nodes but assumes that
ADD feature as specified in TS 23.012 [15], TS 23.060 [14] clause 15.5 is
supported.
NOTE: According to IR.88 [12] clause 3.1.3.6 and IR.33 [13] clause 4.4 the ADD
feature is required to be supported by networks.
The solution does require UTRAN or GERAN to be available to support the USSD
operation otherwise the UE needs to use USSI as specified in TS 24.390 [10].
The solution with USSI works only when USSI is a 3GPP PS Data Off Exempt
Service.
Figure 6.1.7.1-1: USSD Activation / Deactivation of 3GPP PS Data Off
Steps 1-3b are optional. These steps are performed when the UE is switched on
or following PLMN (re)selection.
1) UE performs an Attach procedure as specified in TS 23.401 [8].
2) The MME/MSC/SGSN sends a Location Update message to the HSS containing the
IMEISV as specified in TS 23.012 [15] and TS 23.060 [14] clause 15.5.
3a) The HSS receives the Location update message containing the IMEISV and
compares the received IMEISV against the stored IMEISV against the IMSI
received in the Location update message. If the IMEISV is different 3GPP PS
Data Off feature is marked as deactivated for that IMSI.
3b) The HSS continues with the Insert Subscriber Data and Location Update
procedures as described in TS 23.060 [14] and TS 23.401 [8].
Activation:
4) 3GPP PS Data Off is activated.
5) Perform steps 8-12 as described in clause 6.1.4.1
#### 6.1.7.2 Impacts on existing nodes and functionality
See clause 6.1.4.2.
#### 6.1.7.3 Solution Evaluation
## 6.2 Solutions for Key Issue 2 making the UE aware of 3GPP PS Data Off
Exempt Services
### 6.2.1 Solution 2.1: Making the UE aware of 3GPP PS Data Off Exempt
Services using filters for non-SIP services and enumeration/ICSI for SIP
services
#### 6.2.1.1 Description
The HPLMN configures the UE with the 3GPP PS Data Off Exempt Services using a
management object in the ME.
The non-SIP based 3GPP PS Data Off Exempt Services are identified in the UE by
an APN and an uplink filter to be enforced by the UE for originating non-SIP
requests.
Given that the IP addresses for the list of non-SIP based services that are
Data Off exempt are published hence a list of IP addresses for these services
is sufficient to identify the services and is included in the management
object sent to the UE.
The SIP based 3GPP PS Data Off Exempt Services are identified in the UE by
enumeration (MMTel Voice, SMS over IMS, USSD over IMS, MMTel Video) or by IMS
communication service identifier. The UE enforces originating SIP based
requests based on these.
#### 6.2.1.2 Impacts on existing nodes and functionality
Editor\'s note: Capture impacts on existing 3GPP nodes and Functional elements
(e.g. UE, MME, eNB, S-GW, P-GW, P-CSCF etc.).
The UE is impacted as it has to support the new management object.
#### 6.2.1.3 Solution Evaluation
Editor\'s note: Use this clause for evaluation at solution level. Evaluation
at key issue level is done in a separate clause.
### 6.2.2 Solution 2.2 for Key Issue 2 - making the UE aware of 3GPP PS Data
Off Exempt Services
#### 6.2.2.1 Description
The HPLMN configures the UE with the 3GPP PS Data Off Exempt Services using a
management object (e.g., server\'s IP address for non-SIP based services or
well-known name of the SIP based services) in the ME. The detail of the
management object is up to stage 3 work.
The non-SIP based 3GPP PS Data Off Exempt Services are identified in the UE by
an APN and an uplink filter. The exact content of the uplink filter is left to
UE implementation.
The SIP based 3GPP PS Data Off Exempt Services are identified in the UE by
enumeration (MMTel Voice, SMS over IMS, USSD over IMS, MMTel Video) or by IMS
communication service identifier. This is also up to UE implementation.
In order to support dynamic update of list of exempt services over device
management method (e.g. OMA-DM), device management traffic must be part of the
3GPP PS Data Off Exempt Services.
#### 6.2.2.2 Impacts on existing nodes and functionality
The UE is impacted as it has to support the new management object.
#### 6.2.2.3 Solution Evaluation
Editor\'s note: Use this clause for evaluation at solution level. Evaluation
at key issue level is done in a separate clause.
### 6.2.3 Solution 2.3: Making the UE aware of 3GPP PS Data Off Exempt
Services using a list of Data Off Exempted Services (DOES)
#### 6.2.3.1 General
The proposed solution is based on the HSS providing the UE with a list of
exempted services that is translatable by the UE into a readable message to
the user.
Per TS 22.011 clause 10.2, the list of \"exempted services when PS Data Off\"
is activated and managed by the Home Operator on a per VPLMN basis. Therefore,
a solution based on OMA-DM may result in the download of a set of exempted
services (e.g. MMTel Voice, SMS over IMS, Device Management over PS) per set
of VPLMNs (e.g. PLMN1, PLMN43, PLMN67, etc.). Even if there are a small number
of sets of exempted services on the field, this will result in a long list of
VPLMNs (all the PLMNs the Home Operator has roaming agreements with). Placing
the list of exempted services in the HSS allows the network to only provision
the list of exempted services of the VPLMN the UE is attaching to, hence
avoiding the download of all sets of lists and VPLMN-ids (which most likely
will be not used by the UE).
The list of exempted services for the VPLMN (including the HPLMN in non
roaming cases) is sent to the UE during the attachment to that VPLMN.
In addition, the EPC and the IMS networks need to know the list of exempted
services, even if it is in another format than the list provided to the UE,
because the UE alone is not able to block all services (for example all MT IMS
services only using IMS signalling, such as SMS over IMS, need to be
blocked/allowed by S-CSCF; and filters for downlink non-IMS packets need to be
known by the PGW). Therefore, the solution requires the same knowledge of the
list of exempted services to be used.
\- by the UE;
\- by S-CSCF;
\- by the PGW.
Placing this knowledge in a single entity (the HSS) that provides the UE, the
S-CSCF and the PGW with the exempted services with the corresponding format
avoids the need for coordination between databases (e.g. OMA DM and HSS).
Even if it is not part of the study, another benefit would be the possibility
to allow different list of exempted services for different types of users (for
example MPS subscribers, gold subscribers, etc.).
#### 6.2.3.2 Description
##### 6.2.3.2.1 Deployments in which VPLMNs are not upgraded
For early deployments in which VPLMN shall not be impacted, the UEs are all
configured with a Default list of PS Data Off exempted services. This list may
be provided to the UEs by Device Management (e.g. as described in solutions
2.1 and 2.2) or UICC provisioning, and is valid for any PLMN the UE is roaming
in.
##### 6.2.3.2.2 Deployments satisfying all PS Data Off SA1 requirements
For deployments satisfying all PS Data Off SA1 requirements, the list of
exempted services when PS Data Off is activated for the visited/registered
PLMN is added to the Subscription data, sent by the HSS to the Packet Core
Function serving the UE in all messages which contain the Subscription data.
The list of services exempted when PS Data Off is activated, stored in the
HSS, is made up of:
\- For all the UEs of the HPLMN: A \"list of Data Off Exempted Services\"
(DOES) which is stored by the MME/SGSN for further distribution to the UE.
This list is not intepreted by the MME/SGSN. When received by the UE, the UE
stores it and - in the case of PS Data-Off activated - blocks all PS services
except the ones in that list (e.g. MMTel Voice, SMS over IMS, Device
Management over PS), and translate this list into a readable message to the
user. In particular, the UE NAS layer shall notify the UE IMS layer about the
IMS exempted services.
\- For the EPC: A list of \"Exempted APNs\" (EA) and associated \"Packet
Filtering Information\" (PFI)\". Exempted APNs can be totally exempted, in
which case, the Packet Filtering Information is not present, or partially
exempted APN, in which case the Packet Filtering info is present and
characterizes the IP flows which are exempted from PS Data Off.
\- For the IMS network: A list of \"Exempted IMS services\" (EIS) for the IMS
to only allow exempted IMS services when PS Data Off is activated.
The UE is informed during the Attach procedure in the Attach Accept message,
during the TAU procedure in the Tracking Area Update Accept message and/or
during the RAU procedure in the Routing Area Update Accept message via the
addition of a new parameter \"list of Data Off Exempted services\" (DOES).
Editor\'s note: It is FFS the nature of the information sent to the UE for
uplink enforcement for APN data exempt services for the 3 cases where the APN
is completely exempt, the APN is completely blocked and the APN has some
services that are data exempt.
NOTE : If the list of data exempt services is updated after UE attachment, and
if Data Off is activated, several options are available to update the UE; one
option is forcing the UE to detach and re-attach, the second option is to
update EMM Information message to include uplink filters, and the third option
is to wait until the next time TAU is triggered from the UE and the updated
uplink filters are included in the TAU Accept message. If the Data Off status
is not active, then MME can delay sending the updated uplink filters until the
next time TAU is performed and the updated uplink filters are included in the
TAU Accept message
**1 Attach procedure**
For the purpose of making the UE aware of 3GPP PS Data Off Exempt Services,
the Attach procedure specified in TS 23.401 [8], clause 5.3.2.1 is modified
by:
\- Adding the \"list of Data Off Exempted Services\" (DOES) in the Update
Location Ack message (or Insert Subscriber Data Request msg- not represented
in the figure); and
\- Adding the \"list of Data Off Exempted Services\" (DOES) in the Attach
Accept message.
{width="6.226388888888889in" height="8.715277777777779in"}
Figure 6.2.3.2-1: Attach procedure
**2 Tracking Area Update procedure**
Same changes for the Tracking Area Update procedure of TS 23.401 [8], clause
5.3.3.1:
**3 Insert Subscriber Data procedure**
For the purpose of making the UE aware of 3GPP PS Data Off Exempt Services,
the Insert Subscriber Data procedure specified in TS 23.401 [8], clause
5.3.9.2 is modified by adding the \"list of Data Off Exempted Services\" in
the Insert Subscriber Data message.
{width="2.439583333333333in" height="1.2638888888888888in"}
Figure 6.2.3.2-2: Insert Subscriber Data procedure
#### 6.2.3.3 Impacts on existing nodes and functionality
Editor\'s note: Additional impacts for asynchronously updating a UE after
initial attachment is FFS.
UE: The UE is modified:
\- to support the reception of the list of Data Off Exempted Services sent by
the network in the NAS messages Attach Accept and TAU Accept;
\- to translate this list into readable message to the user;
\- to use this list to allow the services listed in the list of Data Off
Exempted Services and block the other PS services when Data Off is activated.
MME/SGSN: The MME/SGSN is modified:
\- to receive and store the list of Data Off Exempted Services sent by the HSS
in the Location Update Accept and Insert Subscriber Data messages;
\- to include the list of Data Off Exempted Services in the Attach Accept and
RAU Accept messages towards the UE.
HSS: The HSS is modified:
\- to support the configuration and the storage of the list of Data Off
Exempted Services per VPLMN;
\- to include the list of Data Off Exempted Services in the Location Update
and Insert Subscriber Data messages towards the MME/SGSN.
#### 6.2.3.4 Solution Evaluation
Editor\'s note: Use this clause for evaluation at solution level. Evaluation
at key issue level is done in a separate clause.
### 6.2.4 Solution 2.4 for Key Issue 2 - making the UE aware of 3GPP PS Data
Off Exempt Services
#### 6.2.4.1 Description
OMA Device Management provides a mechanism to provision an ME with data. It
requires the UE to initiate connection with the OMA DM server, authenticate
the UE and then the provisioning mechanism can start. However OMA DM is a
service that may not be exempt for 3GPP PS Data off feature. Thus if 3GPP PS
Data off is activated and OMA DM is not one of the exempt services then the
HPLMN cannot change the 3GPP PS Data off exempt services when 3GPP PS Data off
is active.
Provisioned data for a UE can be provisioned on a USIM using data files (as
specified in TS 31.102 [3]). The data maybe modified using existing mechanisms
specified in TS 31.111 [4], TS 31.115 [5] etc (typically known as Over The Air
(OTA). The Short Message Services as specified in TS 23.040 [6] is a possible
transport mechanism for the OTA changes. The Short Message Centre (SMC)
interfaces to an OTA server that performs the modification of the USIM data
files. The combinations of these features allows an HPLMN to change
provisioned data on an USIM while the UE is in HPLMN or VPLMN.
#### 6.2.4.2 Impacts on existing nodes and functionality
Editor\'s note: Capture impacts on existing 3GPP nodes and Functional elements
(e.g. UE, MME, eNB, S-GW, P-GW, P-CSCF etc.).
The ME is impacted as it has to support the reading of the USIM file data
structure.
USIM is impacted as it has to support the new USIM file data structure.
#### 6.2.4.3 Solution Evaluation
Editor\'s note: Use this clause for evaluation at solution level. Evaluation
at key issue level is done in a separate clause.
### 6.2.5 Solution 2.5: Making the UE aware of 3GPP PS Data exempt services
with HSS holding provisioning information
#### 6.2.5.1 Description of the solution
In this solution HSS is provisioned with all the services related information
(SIP, and non-SIP) that are data exempt.
For non-SIP related data exempt, when HSS is updated at initial Attach or
Tracking Area Update, and if HSS receives an indication that the 3GPP Data off
feature is supported by both UE and MME, HSS sends to MME the downlink filters
associated with the non-SIP data exempt services to be enforced by PGW, and
the uplink filters for the non-SIP data exempt services to be enforced by the
UE.
MME stores that list and forwards to the UE its uplink filters in the Attach-
Accept Message or Tracking Area Update Accept message.
For any updates to the non-SIP data exempt services after the UE is attached,
HSS pushes the uplink and downlink filters to the MME using existing Diameter
procedures.
The UE can be subsequently updated with the new uplink filters in the
following way:
\- If the Data Off status is active, the MME can delay sending the updated
uplink filters until the next time TAU is performed and the updated uplink
filters are included in the TAU Accept message.
\- If the Data Off status is not active, then MME can delay sending the
updated uplink filters until the next time TAU is performed and the updated
uplink filters are included in the TAU Accept message.
For SIP-based services, the S-CSCF receives the 3GPP Data off SIP exempt
services from HSS during the IMS registration process. The IMS domain forwards
to the UE the list of SIP data exempt services in the 200 OK to the REGISTER
Request when it is aware that the UE has activated the 3GPP Data off service
feature (conveyed in the SIP Re-REGISTER request by the UE).
For any updates to that list following an IMS registration, and if 3GPP Data
Off status is active, the CSCF will be updated from HSS if HSS stored the
list, if the UE is not engaged in any sesssion and based upon operator
policyS-CSCF can deregister the UE to force a new IMS registration and where
the UE gets updated with the new list, or the changes shall be applied at the
next registration performed by the UE. If 3GPP Data status is not active, then
the S-CSCF domain will wait until the UE updates the 3GPP Data Off status to
active to send the new list in the 200 OK response.
NOTE 1: The S-CSCF domain can be optionally pre-configured with the list of
data exempt SIP services instead of storing them in HSS. This has minimal
impact on the above since HSS will not be involved .
#### 6.2.5.2 Impacts on existing nodes and functionality
The following nodes are impacted:
UE:
The UE needs to support the uplink filter information in Attach-Accept message
of the Initial Attach procedure, and in a TAU Accept message.
Depending on solution chosen, the UE may need to support updated EMM
Information message.
The UE needs to support the list of SIP data exempt services in the 200 OK to
SIP REGISTER request.
MME:
MME needs also to include the UE uplink filters in an Attach-Accept message or
TAU Accept message, or maybe EMM Information message.
MME also need to trigger UE detachment if needed or delay the applicability of
the updated filters till next time TAU triggered by the UE and where the MME
sends the updated uplink filters in the TAU Accept message.
S-CSCF:
During the IMS registration, the S-CSCF needs to receive the SIP data exempt
list from HSS. After the IMS registration, the S-CSCF needs to receive the
updated list of SIP data exempt services from HSS.
The S-CSCF needs to update the UE with a new list of SIP data exempt services,
based on operator policy, the S-CSCF can trigger de-registration and let UE do
re-registration, or the S-CSCF wait for the next SIP Register from the UE. The
update list will be included in the 200 OK to SIP REGISTER.
HSS:
Provision and distribute the non-SIP data exempt services to MME during and
after UE attachment and the list of SIP services to the S-CSCF during and
after UE IMS registration.
#### 6.2.5.3 Solution Evaluation
Editor\'s Note: Use this clause for evaluation at solution level. Evaluation
at key issue level is done in a separate clause.
### 6.2.6 Solution 2.6: Making the UE aware of 3GPP PS Data Off Exempt
Services using a list of Data Off Exempted Services (DOES) via USSD / USSI
#### 6.2.6.1 General
The proposed solution is based on the HSS providing the UE with a list of
exempted services that is also translatable by the UE into a readable message
to the user.
The list of exempted services for the VPLMN (including the HPLMN in non
roaming cases) is sent to the UE in the USSD / USSI acknowledgement message
which is sent in response to the message that the UE uses to inform the HSS
about activation of 3GPP PS Data Off as described in clause 6.1.4 and clause
6.1.7.
#### 6.2.6.2 Description
The list of exempted services when PS Data Off is activated for the
visited/registered PLMN is added to the Subscription data and is sent by the
HSS to the UE in the USSD / USSI ack message described in clause 6.1.4 and
clause 6.1.7.
Additionally, although it is not shown in the message sequence chart, if the
HPLMN operator changes the list of data off exempt services, then this change
in the list can be pushed from the HSS to UEs using USSD.
The list of services exempted when PS Data Off is activated, stored in the
HSS, is made up of:
\- A list of SIP services (e.g. MMTel Voice, SMS over IMS);
\- A list of non-SIP services.
NOTE: The list of non-SIP services could be a list of exempt APNs and packet
filtering information (see clause 6.2.3.2).
{width="4.2340277777777775in" height="5.163194444444445in"}
Figure 6.2.6.2-1: USSD Activation of 3GPP PS Data Off
Activation:
1) 3GPP PS Data Off is activated.
2) See step 8) in clause 6.1.4.
3) See step 9) in clause 6.1.4.
4) See step 10) in clause 6.1.4 . Based on the UEs location the HSS determines
which 3GPP PS Data Off services are to be sent to the UE.
NOTE: The UE location could be determined by the SGSN/MME number. However this
is left to stage 3 to determine.
5) See step 11) in clause 6.1.4. The message includes the list of 3GPP PS Data
Off services.
6) See step 12) in clause 6.1.4. The message includes the list of 3GPP PS Data
Off services. The UE stores the list of 3GPP PS Data Off services.
Encoding of the list of exempt services in the USSD response message:
\- USSD messaging can contain 160 octets of payload data. USSD Phase 2, which
has been available since GSM Phase 2+ allows multiple messages to be returned
to the UE. USSD over IMS has no limit on payload size other than the limit on
SIP message size.
\- Exempt services could be encoded in text format using UTF-8 character
encoding, for example as \'MMTEL Video\', \'SMSoIP\'.
\- Exempt services could be encoded in binary. For example each character
(octet) can be used to convey, for 8 services, whether or not they are exempt.
If there are more than 8 services then multiple comma delimited octets can be
sent. A definition of which bit fields correspond to which services would have
to be standardised.
## 6.3 Solutions for Key Issue 3
### 6.3.1 Solution 3.1: Support for controlling non-SIP based services which
are not 3GPP PS Data Off Exempt Services in roaming (LBO and roaming with no
IMS roaming interfaces) and non-roaming cases
#### 6.3.1.1 Description
Given that the IP addresses for non-SIP based services that are Data Off
exempt are published, hence enforcement for uplink packets of non-SIP based
services which are not part of the 3GPP PS Data Off Exempt Services is
accomplished by the UE through the Uplink filter configured by the HPLMN in
the UE management object dedicetaed to that. Hence, if 3GPP PS Data Off is
activated, the UE prevents sending of uplink IP packets which are for non-SIP
based services other than the non-SIP based 3GPP PS Data Off Exempt Services
configured in UE.
Enforcement for the downlink packets of non-SIP based services which are not
part of the 3GPP PS Data Off Exempt Services is performed in the P-GW as
follows:
When the 3GPP PS Data Off is activated:
a) the UE informs network about the 3GPP PS Data Off activation as described
in clause 1.4.2.
b) The following additional steps are performed:
1) MME informs the P-GW of the PDN connection of the UE about the 3GPP PS Data
Off activation using an indication in the Modify Bearer Request message.
2) If dynamic PCC is applied for the PDN connection:
A) the P-GW initiates an IP-CAN modification procedure and informs the PCRF
about the 3GPP PS Data Off activation.
B) PCRF activates PCC rules with downlink IP packet filters gating any IP
packets not matching 3GPP PS Data Off Exempt Services
C) P-GW enforces the updated PCC rules.
3) If dynamic PCC is not applied for the PDN connection:
A) the P-GW activates PCC rules to start gating any downlink IP packet not
matching the configured downlink IP packet filters for 3GPP PS Data Off Exempt
Services.
4) P-GW indicates support of the P-GW parts of the 3GPP PS Data Off to the MME
in Modify Bearer Response message.
5) If the P-GW of the PDN connection does not indicate support of the P-GW
parts of the 3GPP PS Data in Modify Bearer Response message, the MME releases
the PDN connection.
6) MME indicates to the UE in Attach Accept message or in TAU Accept message
that PS domain performs the MME parts of the 3GPP PS Data Off.
c) If MME does not indicate to the UE in Attach Accept message or in TAU
Accept message that PS domain performs the MME parts of the 3GPP PS Data Off,
the UE can attempt to ensure that unauthorized IP packets are not transported
using any proprietary means.
NOTE: if MME indicates to the UE in Attach Accept message or in TAU Accept
message that PS domain performs the MME parts of the 3GPP PS Data Off, the UE
is not expected to use any proprietary means for ensuring that unauthorized IP
packets are not transported.
When the 3GPP PS Data Off is deactivated:
a) the UE informs network about the 3GPP PS Data Off deactivation as described
in clause 1.4.2.
b) The following additional steps are performed:
1) MME informs the P-GW of the PDN connection of the UE about the 3GPP PS Data
Off deactivation using an indication in the Modify Bearer Request message.
2) If dynamic PCC is applied for the PDN connection:
A) the P-GW initiates an IP-CAN modification procedure and informs the PCRF
about the 3GPP PS Data Off deactivation.
B) PCRF deactivates PCC rules that restrict IP packets other than those of
3GPP PS Data Off Exempt Services.
C) P-GW enforces the updated PCC rules.
3) If dynamic PCC is not applied for the PDN connection:
A) the P-GW deactivates PCC rules that restrict IP packets other than those of
3GPP PS Data Off Exempt Services.
When a new PDN connection is established after MME indicates to the UE in
Attach Accept message or in TAU Accept message, the PS domain performs the MME
parts of the 3GPP PS Data Off as follows:
a) MME informs the P-GW of the PDN connection being established about the 3GPP
PS Data Off activation using an indication in the Create Session Request
message.
b) If dynamic PCC is applied for the PDN connection:
1) the P-GW initiates an IP-CAN session modification procedure and informs the
PCRF about the 3GPP PS Data Off activation.
2) PCRF provides PCC rules with the downlink IP packet filters gating any IP
packets not matching 3GPP PS Data Off Exempt Services.
3) P-GW enforces the PCC rules.
c) If dynamic PCC is not applied for the PDN connection:
1) the P-GW activates PCC rules to start gating any downlink IP packet not
matching the configured downlink IP packet filters for 3GPP PS Data Off Exempt
Services.
d) P-GW indicates support of the P-GW parts of the 3GPP PS Data Off to the MME
in Create Session Response message.
e) If the P-GW of the PDN connection does not indicate support of the P-GW
parts of the 3GPP PS Data in Create Session Response message, the MME releases
the PDN connection.
In order to accomplish the above for network enforcement of downlink packets
for these services, and if dynamic rules are used, the PCRF must be
provisioned with the necessary IP addresses for non-SIP based services that
are Data Off exempt. If static rules are to be used, the PGW must be
provisioned with the necessary IP addresses for that purpose.
The same management system provisions the UE with the management object for
uplink filters and provisions the PCRF or the P-GW with the corresponding
downlink filters to be enforced by the P-GW.
#### 6.3.1.2 Impacts on existing nodes and functionality
The following nodes are impacted:
UE:
The UE prevents sending of uplink IP packets for non-SIP based services that
are not 3GPP PS Data Off exempt using the management object dedicated to that
and configured in the UE by the HPLMN.
MME:
Upon receipt of an indication that the 3GPP Data Off feature is activated or
deactivated, the MME must initiate the proper procedure towards the P-GW at
initial attach, new PDN connection setup or an existing PDN connection to
ensure that the P-GW performs the necessary actions.
S-GW:
The S-GW needs to pass the additional information in Attach Request message of
the Initial Attach procedure, new PDN connection establishment and existing
PDN connection from the MME to the P-GW.
P-GW:
Process the added behaviour at Initial Attach, new PDN connection setup, or
existing PDN connection to ensure that the proper rules are in place for
proper network enforcement of 3GPP PS Data off feature.
PCRF:
If dynamic PCC rules are used, the PCRF processes the additional behaviour
related to 3GPP PS Data off in the IP-CAN session modification procedure and
provides the PCC rules with the downlink IP packet filters gating any IP
packets not matching 3GPP PS Data Off Exempt Services. The PCRF will have to
configured with the necessary information for that purpose.
#### 6.3.1.3 Solution Evaluation
Editor\'s note: Use this clause for evaluation at solution level. Evaluation
at key issue level is done in a separate clause.
### 6.3.2 Solution 3.2: Non-SIP based Service Controlling in 3GPP core network
#### 6.3.2.1 Solution Description
This solution addresses the key issue # 3.
##### 6.3.2.1.1 Service Controlling in EPS
##### 6.3.2.1.1.1 Uplink Traffic Controlling {#uplink-traffic-controlling .H6}
For uplink traffic, once UE knows the list of 3GPP PS Data Off Exempt services
based on the solution for key issue #2, it can selectively allow or prohibit
the traffic.
When the 3GPP PS Data Off status is activated, UE only allows to send out the
traffic belonging to the 3GPP PS Data Off Exempt services; otherwise, UE will
allow to send out any traffic.
##### 6.3.2.1.1.2 Downlink Traffic Controlling {#downlink-traffic-controlling
.H6}
When dynamic PCC is deployed, PCRF is configured to know the list of 3GPP PS
Data Off Services, PCC rule needs to be enhanced to indicate whether it is for
3GPP PS Data Off Exempt Services, thus when PGW/PCEF receives the notification
of status of 3GPP PS Data Off, it can take according action (e.g. the packet
flows related to 3GPP PS DATA OFF exempt service are allowed to be
transmitted, while the packet flows not related to the 3GPP PS DATA OFF exempt
services are prevented) according to the PCC rule received from PCRF. If there
is no indication of 3GPP PS Data Off Exempt Service in a PCC rule, it should
be regarded as a rule for non 3GPP PS Data Off Exempt Service.
When receiving the UE\'s latest 3GPP PS Data Off status, PGW/PCEF will act as
following:
\- If the received UE\'s 3GPP PS Data Off status is activated, PGW will set
Gate status to \"closed\" in all PCC rules for non 3GPP PS Data Off Exempt
Services and not change the Gate status in PCC rules for the 3GPP PS Data Off
Exempt Services. If the Gate status is set to \"closed\" for a PCC rule, the
related downlink service data flow belonging to the packet filters in such PCC
rule shall be prevented at the PGW.
\- If the received UE\'s 3GPP PS Data Off status is deactivated, PGW will set
Gate status in the PCC rules to \"open\", in which the Gate status was set to
\"Closed\" when the 3GPP PS Data Off status of \"activated\" was received
previously.
The enhanced PCC rule can be provisioned to PGW/PCEF during IP-CAN Session
Establishment procedure as defined in clause 7.2 of TS 23.203 [16], during IP-
CAN Session Modification procedure initiated by PCEF as defined in clause
7.4.1 of TS 23.203 [16], or during IP-CAN Session Modification procedure
initiated by PCRF as defined in clause 7.4.2 of TS 23.203 [16],
When dynamic PCC is not deployed, the list of 3GPP PS Data Off Services and
the related PCC rules can be pre-configured in PGW. PCC rule needs to be
enhanced to indicate whether it is for 3GPP PS Data Off Exempt Services, If
there is no indication of 3GPP PS Data Off Exempt Service in a PCC rule, it
should be regarded as a rule for non 3GPP PS Data Off Exempt Service.
When receiving the UE\'s latest 3GPP PS Data Off status, PGW will act as
following:
\- If the received UE\'s 3GPP PS Data Off status is activated, PGW will set
Gate status to \"closed\" in all PCC rules for non 3GPP PS Data Off Exempt
Services and not change the Gate status in PCC rules for the 3GPP PS Data Off
Exempt Services. If the Gate status is set to \"closed\" for a PCC rule, the
related downlink service data flow shall be prevented at the PGW.
\- If the received UE\'s 3GPP PS Data Off status is deactivated, PGW will set
Gate status in the PCC rules to \"open\", in which the Gate status was set to
\"Closed\" when the 3GPP PS Data Off status of \"activated\" was received
previously.
NOTE: If there is any traffic belonging to the 3GPP PS Data Off Exempt
Services (e.g. DNS, DHCP, Ut traffic) carried over the default bearer, in
order to enable the 3GPP PS Data Off feature by changing the gate status in
PCC rule, a separate PCC rule with the TFT which only includes packet filters
belonging to the 3GPP PS Data Off Exempt Services should be defined and mapped
to the default bearer besides the PCC rule without TFT. PGW will set Gate
status to \"open\" for the separate PCC rule when the 3GPP PS Data Off status
is activated.
##### 6.3.2.1.2 Service Controlling in 2G/3G PS domain
##### 6.3.2.1.2.1 Uplink Traffic Controlling {#uplink-traffic-controlling-1
.H6}
For uplink traffic, once UE knows the list of 3GPP PS Data Off Exempt services
based on the solution for key issue #2, it can selectively allow or prohibit
the traffic.
When the 3GPP PS Data Off status is activated, UE only allows to send out the
traffic belonging to the 3GPP PS Data Off Exempt services; otherwise, UE will
allow to send out any traffic.
##### 6.3.2.1.2.2 Downlink Traffic Controlling {#downlink-traffic-
controlling-1 .H6}
The list of 3GPP PS Data Off Services and the related PCC rules can be pre-
configured in GGSN. PCC rule needs to be enhanced to indicate whether it is
for 3GPP PS Data Off Exempt Services, If there is no indication of 3GPP PS
Data Off Exempt Service in a PCC rule, it should be regarded as a rule for non
3GPP PS Data Off Exempt Service.
When receiving the UE\'s latest 3GPP PS Data Off status, GGSN will act as
following:
\- If the received UE\'s 3GPP PS Data Off status is activated, GGSN will set
Gate status to \"closed\" in all PCC rules for non 3GPP PS Data Off Exempt
Services and not change the Gate status in PCC rules for the 3GPP PS Data Off
Exempt Services. If the Gate status is set to \"closed\" for a PCC rule, the
related downlink service data flow shall be prevented at the GGSN.
\- If the received UE\'s 3GPP PS Data Off status is deactivated, GGSN will set
Gate status in the PCC rules to \"open\", in which the Gate status was set to
\"Closed\" when the 3GPP PS Data Off status of \"activated\" was received
previously.
#### 6.3.2.2 Impact
**UE:**
When the 3GPP PS Data Off status is activated, UE only allows to send out the
traffic belonging to the 3GPP PS Data Off Exempt services.
**PGW:**
When dynamic PCC is deployed, PGW needs to receive the enhanced PCC rule with
an indication of 3GPP PS Data Off Exempt Service from PCRF.
When dynamic PCC is deployed and not deployed, following PGW impacts apply:
PGW needs to enforce the enhanced PCC rule with an indication of 3GPP PS Data
Off Exempt Service.
When receiving the UE\'s latest 3GPP PS Data Off status, PGW will act as
following:
\- If the received UE\'s 3GPP PS Data Off status is activated, PGW will set
Gate status to \"closed\" in all PCC rules for non 3GPP PS Data Off Exempt
Services and not change the Gate status in PCC rules for the 3GPP PS Data Off
Exempt Services. If the Gate status is set to \"closed\" for a PCC rule, the
related downlink service data flow shall be prevented at the PGW.
\- If the received UE\'s 3GPP PS Data Off status is deactivated, PGW will set
Gate status in the PCC rules to \"open\", in which the Gate status was set to
\"Closed\" when the 3GPP PS Data Off status of \"activated\" was received
previously.
**PCRF:**
PCRF needs to indicate in the enhanced PCC rule whether it is for3GPP PS Data
Off Exempt Service.
**GGSN:**
GGSN needs to enforce the enhanced PCC rule with an indication of 3GPP PS Data
Off Exempt Service.
When receiving the UE\'s latest 3GPP PS Data Off status, GGSN will act as
following:
\- If the received UE\'s 3GPP PS Data Off status is activated, GGSN will set
Gate status to \"closed\" in all PCC rules for non 3GPP PS Data Off Exempt
Services and not change the Gate status in PCC rules for the 3GPP PS Data Off
Exempt Services. If the Gate status is set to \"closed\" for a PCC rule, the
related downlink service data flow shall be prevented at the GGSN.
\- If the received UE\'s 3GPP PS Data Off status is deactivated, GGSN will set
Gate status in the PCC rules to \"open\", in which the Gate status was set to
\"Closed\" when the 3GPP PS Data Off status of \"activated\" was received
previously.
#### 6.3.2.3 Evaluation
### 6.3.3 Solution 3.3: Enforcement of 3GPP PS Data Off policy in the Core
Network using PCC for non-SIP service
#### 6.3.3.1 Description
This solution addresses key issue #3 (Support for controlling non-SIP based
services which are not 3GPP PS Data Off Exempt Services).
Gating of downlink packets for non-SIP based services which are not part of
the 3GPP PS Data Off Exempt Services is enforced by the P-GW based on downlink
TFT filters provided by the Core Network.
In case the considered PDN connection is only used for services which are not
part of the 3GPP PS Data Off Exempt Services, the PCRF may force the P-GW to
reject the new requested PDN connection or terminate the existing PDN
connection, and to provide a specific cause to the UE, so that the UE does not
automatically reattempt connectivity request for that PDN.
The following figure illustrates how to enforce 3GPP PS Data Off policy in the
Core Network for one existing PDN connection, when 3GPP PS Data Off status
change (i.e. activated or deactivated).
{width="6.093055555555556in" height="6.496527777777778in"}
Figure 6.3.3.1-1: IP-CAN Session Modification; GW (PCEF) initiated (clause
7.4.1 in TS 23.203 [16])
In step 3-4 the P-GW is informed of the 3GPP PS Data Off status change based
on solution for key issue 1.
Editor\'s note: Which solution(s) for Key Issue 1 is/can be used should be
documented.
In step 5, the P-GW notifies the PCRF of the 3GPP PS Data Off status change
(i.e. activated or deactivated) using a specific data off status change event
trigger.
In step 17, when PCRF was notified that 3GPP PS Data Off is activated, the
PCRF selects appropriate policies for the PDN connection by providing or
activating PCC rules containing downlink and uplink service data flow filters
corresponding to 3GPP PS Data Off Exempt Services (if not existing yet) and
removing or deactivating existing PCC rules for all other services.
NOTE: At maximum 16 different packet filters can be assigned to a bearer.
In step 17, when PCRF was notified that 3GPP PS Data Off is deactivated, the
PCRF may remove or deactivates these PCC rules containing downlink and uplink
service data flow filters corresponding to 3GPP PS Data Off Exempt Services
and may provide or activate PCC rules for other services.
In step 20,the P-GW applies the PCC rule operations which results in the
bearer signalling as follows:
\- When 3GPP PS Data Off is activated, the PGW configures a TFT which only
includes packet filters related to 3GPP PS DATA OFF exempt services for the
bearer(s):
\- For the default bearer, the PGW assigns a TFT if no TFT exists using Bearer
Modification Procedure without bearer QoS update as described in clause 5.4.3
of TS 23.401 [8].
\- For the default bearer with TFT, the PGW adds all the missing packet
filters related to 3GPP PS DATA OFF exempt services and deletes all the packet
filters not related to 3GPP PS DATA OFF exempt services in the TFT using
Bearer Modification Procedure without bearer QoS update as described in clause
5.4.3 of TS 23.401 [8].
\- For the dedicated bearer(s) that are not related to 3GPP PS DATA OFF exempt
services, the PGW deactivates them using Bearer Deactivation Procedure as
described in clause 5.4.4.1 of TS 23.401 [8].
\- For the dedicated bearer(s) that are related to both 3GPP PS DATA OFF
exempt services and non 3GPP PS Data Off Exempt Services, the PGW deletes all
the packet filters not related to 3GPP PS DATA OFF exempt services in the TFT
using Bearer Modification Procedure without bearer QoS update as described in
clause 5.4.3 of TS 23.401 [8].
\- When 3GPP PS Data Off is deactivated, the P-GW updates the TFT of all
bearer(s) according to the PCC rule operations.
The following figure illustrates how to enforce 3GPP PS Data Off policy in the
Core Network for new requested PDN connection.
Figure 6.3.3.1-2: IP-CAN Session Establishment (clause 7.2 in TS 23.203 [16])
In step 2 the P-GW is informed of the 3GPP PS Data Off status based on
solution for key issue 1.
In step 3, the P-GW notifies the PCRF of the 3GPP PS Data Off status (i.e.
activated or deactivated).
In step 14, the PCRF selects appropriate policies for the PDN connection if
3GPP PS Data Off is activated by either providing or activating PCC rules
containing downlink and uplink service data flow filters corresponding to 3GPP
PS Data Off Exempt Services, or returning appropriate result code so as to
reject the request for establishing the PDN connection, if it is only used for
services which are not part of the 3GPP PS Data Off Exempt Services.
In step 17, the P-GW may reject the request for establishing the PDN
connection, with appropriate release cause value so that the UE does not
automatically reattempt connectivity request for that PDN.
Editor\'s note: How is the UE aware that an APN has been allowed again after
it had been disallowed is FFS (for example if the 3GPP PS Data Off Exempt
Services list is reconfigured in PCRF/PGW based on O&M operation).
#### 6.3.3.2 Impacts on existing nodes and functionality
MME, P-GW(PCEF) and PCRF are impacted.
Editor\'s note: Impacts details to be documented.
#### 6.3.3.3 Solution evaluation
Editor\'s note: Use this clause for evaluation at solution level. Evaluation
at key issue level is done in a separate clause.
### 6.3.4 Solution 3.4: Support for controlling non-SIP based PS Data Off
Exempt Services in UE and EPC based on HSS as single database
#### 6.3.4.1 Description
##### 6.3.4.1.1 General
Related to Key Issue #3, the solution is based on the following principles:
\- A list of \"Exempted APNs\" (EA) and associated \"Packet Filtering
Information\" (PFI)\" for the Packet Core to only allow exempted Packet Core
services when PS Data Off is activated. Exempted APNs can be totally exempted,
in which case, the Packet Filtering Information is not present, or partially
exempted APN, in which case the Packet Filtering info is present and
characterizes the IP flows which are exempted from PS Data Off.
\- If 3GPP PS Data Off is activated, the UE prevents sending of uplink data
which are for non-SIP based services other than the non-SIP based 3GPP PS Data
Off Exempted Services, based on the received list of Data Off Exempted
Services.
\- The list of exempted APNs and associated Packet Filtering Information for
the visited/registered PLMN is provided by the HSS to the MME/SGSN via Update
Location Answer and/or Insert Subscriber Data Request if MME/SGSN indicates
that UE is capable of Data Off feature.
\- When PS Data-Off is activated by the UE:
\- The MME/SGSN releases the PDP contexts/PDN connections that are not
targeting an APN in the list of exempted APNs by e.g. sending a Session Delete
Request to the PDN GW via the Serving GW and NAS message(s) towards the UE.
NOTE 1: When none of the APNs of the PDN connections of the UE is listed in
the list of data exempt APNs, the UE becomes detached from E-UTRAN. This
applies to all solutions.
> \- For the already established PDP contexts/PDN connections whose APN is in
> the \"list of exempted APNs, the MME/SGSN either does not do anything (if
> there is no Packet Filtering Information related to the APN - i.e. the APN
> is totally exempted from PS Data Off) or, if the APN is partially exempted,
> the MME/SGSN needs to inform the PDN GW by sending a Modify Bearer Request
> with Packet Filtering Information to the PDN GW via the Serving GW.
>
> \- Data-Off UE\'s status is added to the Modify Bearer Request as it may be
> useful for charging/accounting discrepancies: it can be added to the CDRs
> for offline charging/accounting in SGW and PDN GW, or provided by the PDN GW
> to the OCS via credit-control mechanisms for online charging. Furthermore
> the PDN GW should forward the Data-Off UE\'s status to the PCRF.
>
> \- Unless the PDN GW indicates its support of Data Off feature, the MME/SGSN
> should release the PDP context/PDN connection for those APNs that have some
> services that are data exempt.
\- When PS Data-Off is already in activated state:
\- If an APN is removed from the list of exempted APNs, the MME/SGSN serving
the UE releases the PDP contexts/PDN connections that are not targeting an APN
in the list of exempted APNs as described above;
\- If there is a change in the Packet Filtering Information related to an APN,
the HSS informs the MME/SGSN by sending a Insert Subscriber Data message, and
in case a PDP contexts/PDN connection targeting the APN is already
established, the MME/SGSN informs the PDN GW of the change of Packet Filtering
Information by sending a Modify Bearer Request via the Serving GW containing
the new Packet Filtering Information;
\- When a new PDP context/PDN connection is established, and if the APN is in
the list of exempted APNs, the MME/SGSN informs the PDN GW by sending a Create
Session Request message that includes the Data-Off UE\'s status (mainly for
charging discrepancies purposes). If the APN is partially exempted from PS
Data Off, this requires the Packet Filtering Information to be added to Create
Session Request message.
\- Enforcement at the PDN GW is achieved as follows:
\- If PCRF does not apply (e.g. is not deployed), the PDN GW enforces the
traffic per the Packet Filtering Information received from MME/SGSN.
\- If PCRF is deployed, then the PDN GW enforces the traffic per the Packet
Filtering Information received from MME/SGSN as is the case when PCRF is not
deployed, however the PDN GW informs the PCRF of the Date Off Status so the
PCRF could decide to change BW, QoS, etc based on this status.
\- During mobility events inducing a change of MME/SGSN, it is not necessary
to pass the \"PS Data-Off\" and/or the list of exempted APNs and associated
Packet Filtering Information between the serving nodes as a Tracking Area
Update procedure always takes place after the handover.
NOTE 2: As an option to be decided during normative phase, for network
signalling optimization, the source MME may pass the \"Packet Filtering
Information\" for the APNs which have been partially exempted in Context
Response and Forward Relocation Request messages:
A source MME/SGSN not supporting PS Data Off feature would not include this
info over S10, and the target MME/SGSN (supporting the feature) will have to
send MBR to PGW(s) for partially exempted APNs.
A source MME/SGSN supporting Data Off will provide this information, and the
target MME/SGSN will then not send any MBR to the PDN GW(s) for partially
exempted APNs.
\- If the PDN GW does not support Packet Filtering Information, the MME/SGSN
should release the PDP context/PDN connection. This can be achieved via PDN GW
also providing its capability to support Packet Filtering Information to the
MME/SGSN (e.g. in the response message).
##### 6.3.4.2.1 Additional call flows
##### 6.3.4.2.1.1 UE requested PDN connectivity procedure {#ue-requested-pdn-
connectivity-procedure .H6}
The UE requested PDN connectivity specified in TS 23.401 [8] clause 5.10.2 is
modified by adding the \"Packet Filtering Information\" and \"Data-Off\" in
the Create Session Request messages between MME, SGW and PGW. The PDN GW also
forwards the UE Data off status to the PCRF in IPCAN session
establishment/modification.
Figure 6.3.4.2.1.1-1: UE requested PDN connectivity
##### 6.3.4.2.1.2 S1-based handover {#s1-based-handover .H6}
S1-based handover specified in TS 23.401 [8] clause 5.5.1.2 is modified by
adding the list of partially APNs (optional) and associated Packet Filtering
Information in the Forward Relocation Request message between the MMEs.
Figure 6.3.4.2.1.2-1
#### 6.3.4.2 Impacts on existing nodes and functionality
Editor\'s note: Capture impacts on existing 3GPP nodes and Functional elements
(e.g. UE, MME, eNB, S-GW, P-GW, P-CSCF, etc.).
#### 6.3.4.3 Solution Evaluation
Editor\'s note: Use this clause for evaluation at solution level. Evaluation
at key issue level is done in a separate clause.
### 6.3.5 Solution 3.5: Charging system based solution for non-SIP based
service
#### 6.3.5.1 Solution Description
This solution addresses the key issue #3.
In order to provide the billing system enough information, PGW inform the
charing system about the 3GPP PS Data Off status.
Editor\'s note: If the status changes frequently, which information will be
sent to the charging system is FFS.
#### 6.3.5.2 Impacts on existing nodes and functionality
PGW informs the charging system about PS Data off status.
#### 6.3.5.3 Solution evaluation
This solution allows charging system to know the PS Data off status.
### 6.3.6 Solution 3.6: Solution using HSS knowledge of PS Data Off UE status
avoiding VPLMN impacts in early deployments
#### 6.3.6.1 Description
##### 6.3.6.1.1 General
The solution is based on the following principles:
\- The HSS is configured with the list of \"Exempted APNs\" (EA) and
associated \"Packet Filtering Information\" (PFI)\" for the Packet Core to
only allow exempted Packet Core services when PS Data Off is activated.
Exempted APNs can be totally exempted, in which case, the Packet Filtering
Information is not present, or partially exempted APN, in which case the
Packet Filtering info is present and characterizes the IP flows which are
exempted from PS Data Off. This is similar to solution 3.4.
\- If 3GPP PS Data Off is activated, the UE prevents sending of uplink data
which are for non-SIP based services other than the non-SIP based 3GPP PS Data
Off Exempted Services, based on the received list of Data Off Exempted
Services.
**1- For early deployments where VPLMNs are not upgraded,** the VPLMN cannot
explicitly receive the PS Data Off UE status from the UE. Hence when the user
activates PS Data Off, the VPLMN should only be implicitly aware that some
non-SIP services are not allowed. Assuming that the HPLMN is aware of the PS
Data Off UE status, the only solution to control non-SIP services is to
provide the MME with appropriate subscriber data (which depends on the actual
the PS Data-Off UE status). To achieve that, each time the PS Data-Off status
is changed for a UE, the HSS just includes the corresponding allowed APNs in
the subscriber data, and for those APNs use appropriate \"VPLM-dynamic-
address-allowed\" AVP to indicate whether the APN is allowed at both VPLMN and
HPLMN (LBO and Home Routed) or only allowed at HPLMN (Home-Routed).
The HSS may include partially allowed APNs if they are Home-Routed. But the
HSS **shall not** include partially exempted APNs at the VPLMN as this would
require the support of the associated DL filters to each APN in the
subscription data, hence VPLMN upgrade.
This solution requires the HSS to be aware of the PS Data Off UE status.
Hence, it is conditioned to a Key Issue 1 solution whereby the HSS is updated
without VPLMN impact when the user activates PS Data Off.
Since VPLMN should not be impacted in early deployments, the enforcement at
the PDN GW in the Home PLMN is achieved as specified in TS 23.203 [16]: since
the list of APNs provided by the HSS to the MME/SGSN takes into account the PS
Data Off UE status, a PDN GW does not need to be aware that the PS Data Off is
activated or not.
**2- For deployments satisfying all PS Data Off SA1 requirements** (in
particular the access to LBO services),
The HSS can determine if a VPLMN has been upgraded to support PS Data Off
feature or not either by configuration or by signalling the support of Data
Off feature using the Supported-Features AVP specified in TS 29.272 [17]
clause 7.1.9. This is left to stage 3 decision.
This solution requires the HSS to be aware of the PS Data Off UE status (see
solutions for Key Issue #1).
The HSS is configured with the list of \"Exempted APNs\" (EA) and associated
\"Packet Filtering Information\" (PFI)\" for the Packet Core to only allow
exempted Packet Core services when PS Data Off is activated. Exempted APNs can
be totally exempted, in which case, the Packet Filtering Information is not
present, or partially exempted APN, in which case the Packet Filtering info is
present and characterizes the IP flows which are exempted from PS Data Off.
This is similar to solution 3.4.
During the Attach/TAU procedures, and when the list of APNs/Filters has been
changed by the operator, assuming that the HSS determines that the MME/SGSN
supports the Data Off feature, the HSS provides the MME/SGSN with list of
\"Exempted APNs\" (EA) and associated \"Packet Filtering Information\"
(PFI)\". The MME/SGSN then may use it to only accept PDN connections to
exempted APNs or to provide the PGW with the DL Filters for partially exempted
APNs. The HSS also provides the PS Data Off UE status to the MME/SGSN.
Apart from the fact the HSS provides the PS Data Off UE status to the
MME/SGSN, the solution is as described in solution 3.4.
#### 6.3.6.2 Impacts on existing nodes and functionality
HSS
\- early deployments (without impacts to the VPLMN): When the HSS is aware of
the PS Data Off UE status, the HSS shall determine which APNs are exempted,
update the MME with the exempted APNs and whether these APNs are allowed at
VPLMN or at HPLMN in the Insert Subscriber Data using existing parameters;
\- deployments satisfying all GSMA/SA1 requirements: The HSS shall be able to
detect if the VPLMN supports the PS Data Off feature or not. The HSS shall be
able to be configured with list of \"Exempted APNs\" (EA) and associated
\"Packet Filtering Information\" (PFI)\", and to send it to the MME together
with the PS Data Off UE status.
MME/SGSN
\- early deployments (without impacts to the VPLMN): no impact. The MME/SGSN
receives the exempted APNs and whether these APNs are allowed at VPLMN or at
HPLMN via Insert Subscriber Data using existing parameters;
\- deployments satisfying all GSMA/SA1 requirements: The MME/SGSN shall be
able to handle the PS Data Off UE status received from the HSS. and to handle
the list of \"Exempted APNs\" (EA) and associated \"Packet Filtering
Information\" (PFI)\" sent by the HSS. For partially exempted APNs, the
MME/SGSN shall send the PFI and the PS Data Off UE status via CSR/MBR to the
PGW. The MME/SGSN shall be able to accept/reject/release PDN connections
according to the list of exempted APNs and the PS Data Off UE status.
PGW/PCRF in the VPLMN (LBO)
\- early deployments (without impacts to the VPLMN): no impact;
\- deployments satisfying all GSMA/SA1 requirements: the PGW/PCRF shall be
able to handle the list of \"Exempted APNs\" (EA) and associated \"Packet
Filtering Information\" (PFI)\" sent by the MME/SGSN. It shall also be able to
provide the CDRs and OCS with the PS Data Off UE status.
PGW/PCRF in the HPLMN (Home Routed)
\- early deployments (without impacts to the VPLMN): no impact;
\- deployments satisfying all GSMA/SA1 requirements: the PGW/PCRF shall be
able to handle the list of \"Exempted APNs\" (EA) and associated \"Packet
Filtering Information\" (PFI)\" sent by the MME/SGSN. It shall also be able to
provide the CDRs and OCS with the PS Data Off UE status.
SGW
\- early deployments (without impacts to the VPLMN): no impact;
\- deployments satisfying all GSMA/SA1 requirements: Handling of PS Data Off
UE Status received from the MME/SGSN, and providing it in the CDRs for inter-
operator accounting.
#### 6.3.6.3 Solution Evaluation
Editor\'s note: Use this clause for evaluation at solution level. Evaluation
at key issue level is done in a separate clause.
### 6.3.7 Solution 3.7: Solution using PCO for carrying PS Data Off UE status
avoiding VPLMN impacts for early deployments
#### 6.3.7.1 Description
The solution is based on the following principles:
\- The HSS is configured with the list of \"Exempted APNs\" (EA) and
associated \"Packet Filtering Information\" (PFI)\" for the Packet Core to
only allow exempted Packet Core services when PS Data Off is activated.
Exempted APNs can be totally exempted, in which case, the Packet Filtering
Information is not present, or partially exempted APN, in which case the
Packet Filtering info is present and characterizes the IP flows which are
exempted from PS Data Off. This is similar to solution 3.4.
\- If 3GPP PS Data Off is activated, the UE prevents sending of uplink data
which are for non-SIP based services other than the non-SIP based 3GPP PS Data
Off Exempted Services, based on the received list of Data Off Exempted
Services.
\- The UE provides its PS Data Off status using new specific values of the PCO
to indicate whether PS Data Off is activated or deactivated. This is described
in clause 6.1.6.
**\- For early deployments where VPLMNs are not upgraded,**
\- The PGWs in the VPLMN will ignore these new PCO values and hence will not
block downlink packets. It is not seen as an issue as long as the UE does not
send uplink packets on that APN. For this to work, it is necessary that the UE
is not configured with partially exempted APNs (i.e. with Filters) for Local
Break Out but ONLY with a list of totally exempted APNs;
\- Home routed APNs can be partially exempted (APN/Filters) as the PGW and/or
PCRF in the HPLMN can be configured with corresponding PCC rules. A possible
restriction is that all APN/Filters shall be the same whatever the VPLMN the
UE is registered;
\- It is also possible to configure the HSS to ONLY include the well-known IMS
APN as possible LBO APN (i.e. with the \"VPLM-dynamic-address-allowed\" AVP
set to one). That would be a permanent restriction for the UEs, but might be
acceptable for an operator.
**\- For deployments satisfying all PS Data Off SA1 requirements, the
following additional mechanism aims at allowing the access to LBO services for
partially exempted APNs, which is not possible with early deployments:**
\- During the Attach/TAU procedures, the HSS provides the MME/SGSN with the
list of Exempted APNs and associated Packet Filtering Information to be used
when PS Data Off is activated, as described in solution 3.4.
\- When the UE requests PDN Connectivity, because the MME/SGSN is not aware of
the PS Data Off UE status, the MME provides an indication on whether the
concerned APN is exempted when the PS Data Off feature is activated and, for
APNs that are partially exempted, associated Packet Filtering Information in
the Create Session Request message to the PGW. It will be up to the PGW to
control the access to the APNs when PS Data Off is activated i.e. rejecting
the UE requested PDN Connectivity when PS Data Off is activated while the APN
is not exempted, as well as applying appropriate PCC rules derived from the
Packet Filtering Information for partially exempted APNs.
\- When the list of Exempted APNs and associated Packet Filtering Information
has been changed by the operator, the HSS uses Insert Subscriber Data
procedure to update the MME. When the MME receives the new list of Exempted
APNs and associated Packet Filtering Information, it sends for each
established PDN connection an indication on whether the concerned APN is
exempted when the PS Data Off feature is activated and, for APNs that are
partially exempted, associated Packet Filtering Information to the PGW using
the Modify Bearer Request message.
\- The PGW may be pre-configured with the list of PS Data Off exempted APNs
and associated filters, based e.g. on operators roaming agreements. If the PGW
receives PS Data Off related information from the MME, the information
received from the MME takes precedence over the pre-configured list.
\- Enforcement at the PDN GW when it detects that the UE has activated Data
Off via the PCO is achieved as follows:
\- If the APN is not exempted, the PDN GW requests the MME/SGSN to release the
PDN connection;
\- If the APN is exempted:
\- If PCRF does not apply (e.g. is not deployed), the PDN GW enforces the
traffic per the Packet Filtering Information, if any.
\- If PCRF applies, the PDN GW just relays the PS Data Off UE status and
optionally the Packet Filtering Information to the PCRF, which is the entity
responsible for sending consistent PCC rules, which are then enforced by the
PDN GW. This is achieved by adding the PS Data Off UE status and optionally
the Packet Filtering Information to the IPCAN Session
Establishment/Modification messages over Gx interface. It is left to the
normative phase how the PCRF handles the Packet Filtering information to
coordinate the new rules to be sent to the PGW.
#### 6.3.7.2 Impacts on existing nodes and functionality
HSS
\- early deployments (without impacts to the VPLMN): no impact;
\- deployments satisfying all SA1 requirements: The HSS shall be able to
detect if the VPLMN supports the PS Data Off feature or not. The HSS shall be
able to be configured with list of \"Exempted APNs\" (EA) and associated
\"Packet Filtering Information\" (PFI)\", and to send it to the MME/SGSN.
MME/SGSN
\- early deployments (without impacts to the VPLMN): no impact;
\- deployments satisfying all SA1 requirements: The MME/SGSN shall be able to
handle the PS Data Off UE status received from the HSS. and to handle the list
of \"Exempted APNs\" (EA) and associated \"Packet Filtering Information\"
(PFI)\" sent by the HSS. The MME/SGSN shall send the APN-exempted indication
and, if any, the corresponding Packet Filtering Information via CSR/MBR to the
PGW.
PGW/PCRF in the VPLMN (LBO)
\- early deployments (without impacts to the VPLMN): no impact;
\- deployments satisfying all SA1 requirements: the PGW shall be able to
handle the PCO received from the UE carrying PS Data Off status. The PGW/PCRF
shall be able to handle the APN-exempted indication and, if any, associated
Packet Filtering Information sent by the MME/SGSN. It shall also be able to
provide the CDRs and OCS with the PS Data Off UE status.
PGW/PCRF in the HPLMN (Home Routed)
\- early deployments (without impacts to the VPLMN): for charging purposes it
is required to indicate the PS Data Off UE status in the CDRs to OFCS (for
offline charging) or to OCS (for online charging);
\- deployments satisfying all SA1 requirements: for charging purposes it is
required to indicate the PS Data Off UE status in the CDRs to OFCS (for
offline charging) or to OCS (for online charging). Inclusion of the PS Data
Off UE Status in the Create Session Response and in the Modify Bearer Response
to the SGW for inter-operator accounting.
SGW
\- early deployments (without impacts to the VPLMN): no impact;
\- deployments satisfying all SA1 requirements: Handling of PS Data Off UE
Status received from the PDN GW in the Create Session Response and in the
Modify Bearer Response, and addition of the PS Data Off UE Status in the CDRs
for inter-operator accounting.
#### 6.3.7.3 Solution Evaluation
Editor\'s note: Use this clause for evaluation at solution level. Evaluation
at key issue level is done in a separate clause.
## 6.4 Solutions for Key Issue 4
### 6.4.1 Solution 4.1: Support for per service control of SIP messages for
SIP based services which are not 3GPP PS Data Off Exempt Services in roaming
(LBO and roaming with no IMS roaming interfaces) and non-roaming cases
#### 6.4.1.1 Description
##### 6.4.1.1.1 3GPP PS Data Off Feature Activated - Enforcement on UE-
originating SIP requests
If 3GPP PS Data Off is activated:
a) the UE prevents sending of UE-originating SIP requests which are for
services other than the SIP based 3GPP PS Data Off Exempt Services configured
in the management object dedicated to that.
b) the UE prevents sending of SDP offers and SDP answers with media streams
for the media types other than those related to the SIP based 3GPP PS Data Off
Exempt Services configured in the management object dedicated to that.
Furthermore, if the 3GPP PS Data Off is activated:
a) if the UE is configured with at least one SIP based 3GPP PS Data Off Exempt
Service and the UE wants to be registered with IMS, the UE sends a
(re-)REGISTER request via a IMS PDN. In the (re-)REGISTER request, the UE:
1) indicates support of the SIP based 3GPP PS Data Off Exempt Services only;
and
2) indicates that 3GPP PS Data Off is activated.
If (re-)REGISTER request indicates that 3GPP PS Data Off is activated, the
S-CSCF serving the UE rejects UE-terminating SIP requests for services other
than the 3GPP PS Data Off Exempt Services.
b) if the UE is configured with at least one SIP based 3GPP PS Data Off Exempt
Service and the UE is already registered in IMS, the UE sends a re-REGISTER
request with an indication that 3GPP PS Data Off is activated.
c) if the UE is not configured with at least one SIP based 3GPP PS Data Off
Exempt Service, the UE deregisters from IMS and releases the IMS PDN
connection.
##### 6.4.1.1.2 3GPP PS Data Off Feature Activated - Network Enforcement
For terminating SIP requests to a UE, the IMS domain, and specifically the
S-CSCF, shall ensure that only SIP packets for SIP based services which are
part of the the SIP based 3GPP PS Data Off Exempt Services are permitted.
##### 6.4.1.1.3 3GPP PS Data Off Feature De-activated
If the 3GPP PS Data Off is de-ctivated, the UE sends a (re)-REGISTER request
with an indication that 3GPP PS Data Off is de-activated if the UE is already
registered in IMS. The S-CSCF shall also cease network enforcement for
terminating requests to the UE.
##### 6.4.1.1.4 CSCF Configuration with IMS Data Off exempt Services
It is proposed that the CSCF shall support being configured with at minimum,
the following list of IMS services that can be Data Off exempt when the 3GPP
PS Data Off feature is activated for a UE on a per PLMN, with whom there is a
roaming agreement basis:
\- MMTel Voice.
\- SMS over IMS.
\- USSD over IMS (USSI).
\- MMTel Video.
\- Any IMS Service identified by an IMS communication service identifier.
##### 6.4.1.1.5 Handling of ongoing sessions during 3GPP PS Data Off Feature
Activation
If the UE initiates a 3GPP PS Data Off feature activation change mid-session,
then the UE/network shall tear down all ongoing sessions for SIP based 3GPP PS
Data Off non-exempt services. This will result in the removal of all
corresponding rules in the P-GW per existing procedures
#### 6.4.1.2 Impacts on existing nodes and functionality
The following nodes are impacted:
UE:
Verification of SIP originating requests to enforce the list of IMS services
received in the management object from HPLMN.
S-CSCF:
Verification of SIP requests for terminating scenarios to enforce the list of
configured IMS services that are data exempt.
#### 6.4.1.3 Solution Evaluation
Editor\'s note: Use this clause for evaluation at solution level. Evaluation
at key issue level is done in a separate clause.
### 6.4.2 Solution 4.2 for Key Issue 4 - Support for per service control of
SIP messages for SIP based services which are not 3GPP PS Data Off Exempt
Services in roaming (LBO and roaming with no IMS roaming interfaces) and non-
roaming cases using Application Server
#### 6.4.2.1 Description
##### 6.4.2.1.1 3GPP PS Data Off Feature Activated - Enforcement on UE-
originating SIP requests
If 3GPP PS Data Off is activated:
a) the UE prevents sending of UE-originating SIP requests which are for
services other than the SIP based 3GPP PS Data Off Exempt Services configured
in the management object dedicated to that
b) the UE prevents sending of SDP offers and SDP answers with media streams
for the media types other than those related to the SIP based 3GPP PS Data Off
Exempt Services configured in the management object dedicated to that.
Furthermore, if the 3GPP PS Data Off is activated:
a) if the UE is configured with at least one SIP based 3GPP PS Data Off Exempt
Service and the UE wants to be registered with IMS, the UE sends a
(re-)REGISTER request via a IMS PDN. In the (re-)REGISTER request, the UE:
1) indicates support of the SIP based 3GPP PS Data Off Exempt Services only;
and
2) indicates that 3GPP PS Data Off is activated.
If (re-)REGISTER request indicates that 3GPP PS Data Off is activated, the
3GPP PS Data Off is active shall trigger a 3rd party registration to an
Application Server (AS) . The AS serving the UE rejects UE-terminating SIP
requests for services other than the 3GPP PS Data Off Exempt Services.
b) if the UE is configured with at least one SIP based 3GPP PS Data Off Exempt
Service and the UE is already registered in IMS, the UE sends a re-REGISTER
request with an indication that 3GPP PS Data Off is activated.
c) if the UE is not configured with at least one SIP based 3GPP PS Data Off
Exempt Service, the UE deregisters from IMS and releases the IMS PDN
connection.
##### 6.4.2.1.2 3GPP PS Data Off Feature Activated - Network Enforcement
For terminating SIP requests to a UE, the IMS domain, and specifically an
Application Server (AS), shall ensure that only SIP packets for SIP based
services which are part of the SIP based 3GPP PS Data Off Exempt Services are
permitted.
##### 6.4.2.1.3 3GPP PS Data Off Feature De-activated
If the 3GPP PS Data Off is de-activated, the UE sends a (re)-REGISTER request
with an indication that 3GPP PS Data Off is de-activated if the UE is already
registered in IMS. The AS shall also cease network enforcement for terminating
requests to the UE.
##### 6.4.2.1.4 Application Server configuration with IMS Data Off exempt
Services
See solution 6.4.1 and solution 6.4.3 for 2 possible solutions.
#### 6.4.2.2 Impacts on existing nodes and functionality
See clause 6.4.1.2 for UE impacts only.
#### 6.4.2.3 Solution Evaluation
Editor\'s note: Use this clause for evaluation at solution level. Evaluation
at key issue level is done in a separate clause.
### 6.4.3 Solution 4.3: Control of SIP based PS Data Off Exempted services
using the HSS
#### 6.4.3.1 Description
##### 6.4.3.1.1 PS Data Off network configuration
**Informing the S-CSCF of the list of \"exempted IMS services when PS Data
Off\" per VPLMN**
Instead of configuring all the S-CSCF on the list of exempted IMS services per
VPLMN, the S-CSCF is informed by the HSS on the \"list of exempted IMS
services\" (e.g. MMTEL voice, MMTEL video, SMS over IMS, etc) only for the
VPLMN is the UE is currently registered to. This allows to have all PS Data
Off exempted services configured in a single place. The list of \"exempted IMS
services when PS Data Off\" can be a list of ICSI\'s (IMS Communication
Service Identifier) or any other identification.
\- Informing the S-CSCF on a change of the list of IMS exempted services for
IMS registered UEs: This is done for IMS registered UEs using e.g. the Cx-
Update_Subscr_Data (Push-Profile-Request) message via adding \"list of
exempted IMS services\". See TS 29.228 [18], clause A.2
\- Informing the S-CSCF on the list of IMS exempted services at IMS
registration: This is done during IMS registration by using e.g. the Server-
Assignment-Answer message in which the \"list of exempted IMS services\"
parameter has been added.
##### 6.4.3.1.2 PS Data Off UE configuration and enforcement
As described in solution 2.3 for Key Issue 2, the HSS sends the list of IMS
exempted services within the \"list of Data Off Exempted Services\" (DOES), as
it can be translated into a readable message for the user.
This information is transparent to (not interpreted by) the Packet Core
Network Serving Node. When received by the UE, the UE stores it and - in the
case of PS Data-Off activated - blocks all PS services except the ones in that
list (e.g. MMTel Voice, SMS over IMS, Device Management over PS).
##### 6.4.3.1.4 PS Data Off network enforcement in case of multiple IMS
registration
For terminating SIP requests to a UE, the IMS domain shall ensure that only
SIP packets for SIP based services which are part of the SIP based 3GPP PS
Data Off Exempt Services are permitted.
When S-CSCF receives the \"PS Data-Off\" parameter as described above, it can
also inform Terminating Access Domain Selection (T-ADS) function in the SCC AS
of these parameter via 3rd party registration over ISC interface. T-ADS, as
defined in TS 23.292 [19], is used for selecting the appropriate terminating
access (PS or CS) for delivering the call. Allowing T-ADS to receive a list of
\"allowed IMS services when PS Data Off\" can improve the delivery logic, i.e.
T-ADS will not attempt to deliver the call to 3GPP PS domain and instead
attempts delivery over CS domain or to IPCAN over WLAN access because \"Data
off\" service does not allow UE to use 3GPP PS RAT for the type of service
being requested.
#### 6.4.3.2 Impacts on existing nodes and functionality
Editor\'s note: Capture impacts on existing 3GPP nodes and Functional elements
(e.g. UE, MME, eNB, S-GW, P-GW, P-CSCF etc.).
#### 6.4.3.3 Solution Evaluation
Editor\'s note: Use this clause for evaluation at solution level. Evaluation
at key issue level is done in a separate clause.
### 6.4.4 Solution 4.4: HSS based solution to inform IMS the 3GPP Data Off
status
#### 6.4.4.1 Description
The S-CSCF is configured with the list of 3GPP PS Data Exempt Services, i.e.
it is the same to all the UE. Or the list of 3GPP PS Data Exempt Services is
part of subscription. The S-CSCF gets it in the IMS registration procedure.
When the UE activate the 3GPP PS Data Off, the MME knows the status according
to the solution in clauses 6.1.1 and 6.1.2.
MME sends the Location Update or Notify to HSS with the 3GPP PS Data Off
status.
If the UE is not IMS registered, the 3GPP PS Data Off status will be sent to
S-CSCF in IMS registration procedure.
If the UE is IMS registered, the HSS push the 3GPP PS Data Off status to the
S-CSCF.
When the UE de-activate the 3GPP PS Data Off, the procedure is similar with
activated procedure. The only difference is the 3GPP Data Off status value.
#### 6.4.4.2 Impacts on existing nodes and functionality
MME:
MME needs to sends the 3GPP PS Data Off status to HSS.
HSS:
HSS pushes the 3GPP PS Data Off status to S-CSCF.
UE:
The UE performs verification of SIP originating requests to enforce the list
of IMS services.
S-CSCF:
The S-CSCF needs to handle the 3GPP Data Off status received from HSS during
IMS registration. If the UE is already registered the S-CSCF needs to handle
updates from HSS regarding 3GPP Data Off Status. The S-CSCF needs to verify
SIP requests for terminating scenarios to enforce the list of configured IMS
services that are data exempt.
#### 6.4.4.3 Solution Evaluation
Editor\'s note: Use this clause for evaluation at solution level. Evaluation
at key issue level is done in a separate clause.
### 6.4.5 Solution 4.5: Network part Solution for Key Issue 4 - T-ADS based
solution in MT
#### 6.4.5.1 Description
This solution focuses on the network part in the mobile terminating.
The S-CSCF is configured with the list of 3GPP PS Data Exempt Services, i.e.
it is the same to all the UE. Or the list of 3GPP PS Data Exempt Services is
part of subscription. The S-CSCF gets it in the IMS registration procedure.
When the UE activate the 3GPP PS Data Off, the MME knows the status according
to the solution in clauses 6.1.1 and 6.1.2.
For mobile terminating, the SCC AS gets the 3GPP PS Data Off status from the
T-ADS procedure. The SCC AS forwards the SIP request to S-CSCF with 3GPP PS
Data Off status. The S-CSCF check the status and determine whether send the
SIP request to the UE according to 3GPP PS Data Off Exempt Services.
When the UE de-activate the 3GPP PS Data Off, the similar procedure is
applied. When the S-CSCF gets the 3GPP PS Data Off status, it stop the check
for 3GPP PS Data Off Exempt Services.
##### 6.4.5.1.1 3GPP PS Data Off Feature Activated Procedure
{width="6.686805555555556in" height="3.6909722222222223in"}
Figure 6.4.5.1.1-1: S-CSCF gets the status in T-ADS
In the step 1, the UE activates the 3GPP Data Off.
In the step 2 and 3, the S-CSCF forward the SIP request to SCC AS according to
the iFC.
In the step 4 to 7, the SCC AS gets the 3GPP Data Off status via T-ADS
procedure.
In the step 8, the SCC AS forward the SIP request to S-CSCF with the 3GPP Data
Off status.
In the step 9, the S-CSCF determines if blocking the SIP request.
##### 6.4.5.1.2 3GPP PS Data Off Feature De-Activated Procedure
The procedure is similar with Activated Procedure in clause 6.4.5.1.1. The
difference is the 3GPP Data Off status value.
#### 6.4.5.2 Impacts on existing nodes and functionality
MME:
MME needs to response the 3GPP PS Data Off status in the T-ADS procedure.
HSS:
HSS forwards the retrieved 3GPP PS Data Off status to SCC AS in the T-ADS
procedure.
SCC AS:
SCC AS forwards the 3GPP PS Data Off status to S-CSCF.
S-CSCF:
S-CSCF checks whether block the SIP request to UE according to the UE 3GPP PS
Data Off status and the list of 3GPP PS Data Exempt Services.
#### 6.4.5.3 Solution Evaluation
Editor\'s note: Use this clause for evaluation at solution level. Evaluation
at key issue level is done in a separate clause.
### 6.4.6 Solution 4.6: Key Issue 4 - Network Enforcement of 3GPP PS Data Off
IMS Voice and Video Sessions
#### 6.4.6.0 General
The solutions below assume that he HSS is provisioned with a list of 3GPP Data
Off exempt services and contains the 3GPP PS Data Off status (active or
deactive). The solutions are for Voice and Video services only.
#### 6.4.6.1 New Voice and Video Sessions
Figure 6.4.6.1-1: Network Enforcement of New Voice and Video Sessions for 3GPP
PS Data Off
1) S-CSCF receives a SIP INVITE, based on filter criteria determines that the
SIP INVITE needs to be routed to a 3GPP PS Data Off Application Server.
NOTE 1: The S-CSCF could have received filter criteria that describes that
specific services e.g. none 3GPP PS Data Off Exempt Services need to be sent
to the AS to determine how to be handled.
NOTE 2: The 3GPP PS Data Off Application Server could be the SCC AS.
2) The 3GPP PS Data Off AS receives the SIP INVITE.
3) The 3GPP PS Data Off AS sends a Sh query to the HSS containing a
description of the service and the R-URI received in the SIP INVITE.
NOTE 3: The service description could be the SIP METHOD, ICSI, SDP
information, etc.
3a) Optionally the HSS may obtain an up to date location information and of
state information from CS domain using Any Time Interrogation procedures
defined in TS 23.078 [20].
4) Based on the:
i) The location of the UE associated with the UE which can be determined e.g.
by stored MSC, SGSN, MME number etc.;
ii) the service description received in the Sh query in step 3); and
iii) which services are provisioned as 3GPP PS Data Off Exempt Services
against the R-URI received in step 3)
the HSS sends an Sh response indicating:
a) if the service is allowed or not over PS; or
b) if the service should be routed over the CS domain.
NOTE 4: An allowed service could be a downgraded service e.g. Video may not be
allowed but Voice is.
5) The 3GPP PS Data Off AS modifies the SIP INVITE so that the service can be
routed
i) Over PS domain if the service has been downgraded; or
ii) over the CS domain.
5a) If the HSS indicated that the service is not allowed over PS and 3GPP PS
Data Off AS decides to reject the service request, the AS Sends a SIP reject.
#### 6.4.6.2 Existing Voice and Video Sessions
Figure 6.4.6.2-1: Network Enforcement of Existing Voice and Video Sessions for
3GPP PS Data Off
1) S-CSCF receives a SIP INVITE.
2) AS receives a SIP INVITE.
3) AS sends an Sh Notification request requesting to receive a notification if
3GPP PS Data off is activated for the URI received in the R-URI of the SIP
INVITE.
4) AS continues to dialogue set-up.
5) A dialogue is ongoing.
6) HSS receives a 3GPP PS Data off activation.
7) HSS sends a Sh Notification indicating 3GPP PS Data off has been activated
for a Public User Identity.
8) If there is an existing dialogue over PS for the Public User Identity
identified in step 7), the AS sends a Sh query to the HSS containing a
description of the dialogue that is ongoing in step 5) and the R-URI received
in the SIP INVITE associated with that ongoing dialogue in step 5).
NOTE 1: The service description could be the SIP METHOD, ICSI, SDP
information, etc.
If no PS dialogue exists the rest of the steps are skipped.
9) Based on the:
i) The location of the UE associated with the UE which can be determined e.g.
by stored MSC, SGSN, MME number;
ii) the service description received in the Sh query; and
iii) which services are 3GPP PS Data Off Exempt Services,
the HSS sends an Sh response indicating if the service is allowed or should be
terminated.
10a) A dialogue termination is sent to the terminating Party.
10b) A dialogue terminated is sent to the originating party.
#### 6.4.6.2 Impacts on existing nodes and functionality
The HSS and Application server are impacted.
HSS needs to be provisioned with which services are 3GPP PS Data Off Exempt
Services and the ability to:
a) send an Sh push message indication 3GPP PS Data Off has been activated for
a specific user; and
b) receive a service description from the AS and provide back to the AS if the
service should be routed over PS, downgraded over PS e.g. Video to Voice or
reject.
The application server needs to be able to:
a) receive an Sh push message indication 3GPP PS Data Off has been activated
for a specific user; and
b) send a service description for a Public User Identity and receive back from
the HSS if the service should be routed over PS, downgraded over PS (e.g.
Video to Voice) or reject.
#### 6.4.6.3 Solution Evaluation
Has no impact on VPLMN, only impacts HSS and AS. Can be used with other
solutions in the TR that provide 3GPP PS Data Off notifications to the HSS.
Leverages procedures that are already performed for TADS functionality where
by TADs queries the HSS for information.
Other solutions impact S-CSCF and also propose to use procedures that are
designed to transport static user information and not dynamic which 3GPP PS
Data Off indicator is.
# 7 Overall evaluation
Editor\'s note: This clause will contain the evaluation of the identified
solutions for every key issue.
# 8 Conclusions
Editor\'s note: This clause is intended to list conclusions, which are agreed
during the course of the study item activities.
It is concluded that:
For Key Issue 1 in rel.14, solution 1.6 with the following specificities is
adopted for normative specification work:
If the UE is pre-configured with the list of PS Data Off exempted non-SIP and
SIP services and exempted APNs, then:
\- When the UE requests a new PDN Connectivity, the UE shall include in the
PDN Connectivity Request message the PCO with a specific parameter value
indicating whether PS Data Off is activated or deactivated:
\- When the user changes its PS Data Off status, the UE shall send a Bearer
Resource Modification Request message per PDN connection.
\- For the IMS services, the UE shall immediately inform the IMS domain about
the 3GPP PS Data Off (de)activation using a 3GPP PS Data Off indication in the
initial REGISTER request and subsequent to that via a re-REGISTER request that
includes an indication to the effect.
For Key Issue 2 in Rel-14, the following solution is adopted for normative
specification work:
\- The UE is pre-configured with the list of PS Data Off exempted non-SIP and
SIP services and exempted APNs, either using Device Management or UICC
provisioning. The list of exempted services is the same for all VPLMNs the
home operator has roaming agreements with. The managed object to configure PS
Data Off exempted non-SIP and SIP services will be standardized by CT WG1 and
CT WG6.
For Key Issue 2 in Rel15, the solution shall assume a separate list of PS
Data Off exempted services per VPLMN (per TS 22.011 [2]). The solution has not
been selected, but at least one solution described in clause 6.2 can satisfy
this additional requirement. Hence it is agreed to determine the solution to
adopt for normative specification during the normative work.
For Key Issue 3 in Rel-14, the following solution is adopted for normative
specification work:
\- For uplink , the non-SIP services are controlled by the UE, based on the
list of PS Data Off exempted services that are pre-configured in the UE per
KI#2 solution;
\- The PGW/GGSN shall inform the charging system about the PS Data Off UE
status received from the UE in the PCO for online and offline charging over Gy
and Gz;
\- For downlink, the non-SIP services using a PGW/GGSN in the VPLMN are not
enforced, however the non-SIP services using a PGW/GGSN in the HPLMN are
enforced using a list of exempted APNs and associated filters that are pre-
configured at the PGW or PCRF or GGSN. For simplicity the PGW/PCRF or GGSN in
the HPLMN are configured with same exempted APNs and associated filters for
all VPLMNs.
For Key Issue 3 in Rel-15, the PGW/GGSN may be pre-configured with the list of
PS Data Off exempted APNs and associated filters, based e.g. on static
operators roaming agreements when possible. For the case when detailed roaming
agreements cannot apply or when the home operator wants to dynamically control
the PS Data Off exempted APNs and associated filters in a VPLMN, the following
additional feature is adopted for normative specification work to satisfy the
Local Break Out roaming case requirement where the list of non-SIP services
for a VPLMN is controlled by the HPLMN:
\- For downlink, the list of PS Data Off exempted APNs and associated filters
are sent from the HSS to the MME/SGSN during Attach/TAU/RAU procedure (or
using Insert Subscriber Data when the list is modified by the operator), and
then PS Data Off related information is sent from the MME/SGSN to the PGW/GGSN
in the Create Session Request message during the PDN connection establishment
for new PDN connections, or in the Modify Bearer Request for established PDN
connections.
\- If the PGW/PCRF or GGSN has been pre-configured with the list of PS Data
Off exempted APNs and associated filters, based e.g. on operators roaming
agreements and receives PS Data Off related information from the MME, the
information received from the MME takes precedence over the pre-configured
list.
For Key Issue 4 in Rel-14:
\- In Rel14, SIP- AS is configured with a list of IMS services that can be PS
Data Off exempted when the 3GPP PS Data Off feature is activated for a UE.
This list applies to any VPLMN the UE is in. The IMS PS Data Off services
exempt list is realized using IMS Service Communication Identifier values
(ICSIs) where possible. SIP AS is required to ensure that non exempted
services are blocked over 3GPP PS accesses (2G/3G/LTE) when PS Data Off
feature is activated.
NOTE: If the ICSI cannot identify the service then it might be necessary to
include additional local policy details (e.g. MMTEL voice, MMTEL video, etc.).
\- T-ADS (as SIP AS) should take this information into account (i.e. determine
the IP-CAN selection via WLAN or to select CS Domain at the first attempt,
etc).
\- In Rel15, the list of IMS services that can be PS Data Off exempted is
conveyed from HSS. It is TBD how this information is to be provided to SIP AS
(e.g. via Sh, or ISC/Cx) S-CSCF provides the PS Data Off UE status indication
to SIP AS via ISC. SIP AS may use this information instead of the local static
list from Rel14 for terminating domain selection. Specially, T-ADS should
take this information into account (i.e. determine the IP-CAN selection via
WLAN or to select CS Domain at the first attempt, etc.).
#