# Foreword
This Technical Report has been produced by the 3^rd^ Generation Partnership
Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The objective of this **Technical Report** is to study and perform an
evaluation of potential architecture enhancements for the separation of user
plane functionality from control plane functionality in the EPC\'s S-GW, P-GW
and TDF to further enable flexible (i.e. distributed or centralized) network
deployment and operation.
Specifically, the following aspects are covered:
\- Functional separation of the S-GW, P-GW and TDF into control plane and user
plane functions, while not affecting the overall functionality provided by
these nodes.
\- The needed reference points between the separated control plane and user
plane functions of the S-GW, P-GW and TDF and the corresponding procedures.
\- Impacts to other EPC entities and interfaces that are essential to support
the separation of S-GW, P-GW and TDF into control plane and user plane
functions, and to enable the flexible placement of the separated control plane
and user plane functions for supporting diverse deployment scenarios.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 23.401: \"General Packet Radio Service (GPRS) enhancements for
Evolved Universal Terrestrial Radio Access Network (E-UTRAN) access\".
[3] 3GPP TS 23.402: \"Architecture enhancements for non-3GPP accesses\".
[4] 3GPP TS 23.203: \"Policy and charging control architecture\".
> [5] 3GPP TS 29.303: \"Domain Name System Procedures; Stage 3\".
[6] 3GPP TS 33.107: \"3G security; Lawful interception architecture and
functions\".
# 3 Definitions and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
TR 21.905 [1], TS 23.401 [2], TS 23.402 [3], TS 23.203 [4] and the following
apply. A term defined in the present document takes precedence over the
definition of the same term, if any, in TR 21.905 [1].
**F-TEID-u:** Fully Qualified (GTP-u) Tunnel Endpoint Identifier: IP address +
TEID of a GTP-u tunnel (TEID-u). When no reference to an IP version is made,
\"IP address\" may refer to an IPv4 address and/or to an IPv6 Prefix.
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in TR 21.905
[1], TS 23.401 [2], TS 23.402 [3], TS 23.203 [4] and the following apply. An
abbreviation defined in the present document takes precedence over the
definition of the same abbreviation, if any, in TR 21.905 [1].
CP Control Plane
UP User Plane
# 4 Architectural considerations
## 4.1 Architectural assumptions and requirements
The new architecture defined to introduce control plane and user plane
functional split for S-GW, P-GW, TDF shall:
\- be able to interwork with networks without the control plane and user plane
split network functions (i.e. in case of roaming scenarios). In addition,
split network functions should be able to interwork with network functions
that are not split within the same network.
\- not impact UE and Radio Access Network.
\- not introduce new reference points other than those between S-GW\'s,
P-GW\'s, TDF\'s corresponding control and user plane functions.
\- use the S-GW/P-GW selection function of the MME/ePDG/TWAN for the selection
of the control plane functional entities.
\- use the existing configuration based mechanism (in P-GW or PCRF) for the
selection of the control plane functional entity of the TDF.
\- support one or more control plane functional entities interfacing with one
or more user plane functional entities (e.g. to enable independent scalability
of control plane functional entity and user plane functional entity).
## 4.2 Baseline architecture
The study shall be based on the existing EPC architectures for 3GPP accesses
and non-3GPP accesses as described in TS 23.401 [2], TS 23.402 [3] and TS
23.203 [4], supporting both non-roaming and roaming scenarios.
Figure 4.2-1 shows the 3GPP functional entities S-GW, P-GW, TDF and their
reference points. Figure 4.2-2 shows the single gateway configuration option
for the 3GPP functional entities S-GW, P-GW, TDF and their reference points.
This architecture considers GTP-based S2a, S2b, S5 and S8 interfaces only.
PMIP-based interfaces and S2c interface are not supported.
Figure 4.2-1: S-GW, P-GW, TDF and their reference points
Figure 4.2-2: S-GW, P-GW (single gateway configuration option), TDF and their
reference points
NOTE 1: TDF is an optional functional entity.
NOTE 2: Interfaces with \'-C\' in the name (e.g. S5-C) are GTP-C based and
interfaces with \'-U\' in the name (e.g. S5-U) are GTP-U based.
NOTE 3: LI related interfaces are not shown in the figures.
Editor\'s note: Reference points related to S-GW offline charging are not
shown in the figures and may need further clarification.
## 4.3 Existing functionality of S-GW, P-GW and TDF
This clause documents the existing functionality of S-GW, P-GW and TDF as
described in TS 23.401 [2], TS 23.402 [3] and TS 23.203 [4] to have a common
basis for all solution descriptions of the study.
Table 4.3-1: Existing functionality of S-GW, P-GW and TDF
+-------------+-------------+-------------+-------------+-------------+ | Main | Sub-fu | S-GW | P-GW | TDF | | fu | nctionality | | | | | nctionality | | | | | +-------------+-------------+-------------+-------------+-------------+ | A. Session | 1. | X | X | | | management | Resource | | | | | (default & | management | | | | | dedicated | for bearer | | | | | bearer | resources | | | | | est | | | | | | ablishment, | | | | | | bearer | | | | | | mo | | | | | | dification, | | | | | | bearer | | | | | | de | | | | | | activation) | | | | | +-------------+-------------+-------------+-------------+-------------+ | | 2. IP | X | X | | | | address and | | | | | | TEID | | | | | | assignment | | | | | | for GTP-U | | | | +-------------+-------------+-------------+-------------+-------------+ | | 3. Packet | X | X | | | | forwarding | | | | | | | (DL/UL: | (DL: GTP-U) | | | | | GTP-U) | | | +-------------+-------------+-------------+-------------+-------------+ | | 4. | X | X | | | | Transport | | | | | | level | (DL/UL DSCP | (DL DSCP | | | | packet | marking for | marking for | | | | marking | QoS in | QoS in | | | | | transport) | transport) | | +-------------+-------------+-------------+-------------+-------------+ | B. UE IP | 1. IP | | X | | | address | address | | | | | management | allocation | | | | | | from local | | | | | | pool | | | | +-------------+-------------+-------------+-------------+-------------+ | | 2. DHCPv4 | | X | | | | / DHCPv6 | | | | | | client | | | | +-------------+-------------+-------------+-------------+-------------+ | | 3. DHCPv4 | | X | | | | / DHCPv6 | | | | | | server | | | | +-------------+-------------+-------------+-------------+-------------+ | | 4. Router | | X | | | | adv | | | | | | ertisement, | | | | | | router | | | | | | so | | | | | | licitation, | | | | | | neighbor | | | | | | adv | | | | | | ertisement, | | | | | | neighbor | | | | | | s | | | | | | olicitation | | | | | | as defined | | | | | | in RFC 4861 | | | | +-------------+-------------+-------------+-------------+-------------+ | C. Support | 1. | X | | | | for UE | Forwarding | | | | | mobility | of \"end | | | | | | marker\" | | | | | | (as long as | | | | | | user plane | | | | | | to source | | | | | | eNB exists) | | | | +-------------+-------------+-------------+-------------+-------------+ | | 2. Sending | X | X | | | | of \"end | | | | | | marker\" | (i | (SGW | | | | after | nter-eNodeB | change) | | | | switching | and | | | | | the path to | inter-RAT | | | | | target node | HOV) | | | +-------------+-------------+-------------+-------------+-------------+ | | 3. | X | | | | | Forwarding | | | | | | of buffered | | | | | | packet | | | | | | (5.3.3.1A) | | | | +-------------+-------------+-------------+-------------+-------------+ | | 4. Change | X | X | | | | of target | | | | | | GTP-U | (intra-3GPP | (intra-3GPP | | | | endpoint | RAT HO with | RAT HO with | | | | (e.g. | eNB change) | SGW change) | | | | handover | | | | | | procedures) | | | | | | = mobility | | | | | | anchor | | | | +-------------+-------------+-------------+-------------+-------------+ | | 5. | | X | | | | Mobility | | | | | | between | | | | | | 3GPP and | | | | | | non-3GPP | | | | | | access | | | | +-------------+-------------+-------------+-------------+-------------+ | D. | 1. | X | | | | S1-Release | ECM-IDLE | | | | | / Buffering | mode DL | | | | | / Downlink | packet | | | | | Data | buffering; | | | | | N | Triggering | | | | | otification | of Downlink | | | | | | Data | | | | | | N | | | | | | otification | | | | | | message | | | | | | generation | | | | | | per bearer | | | | | | (multiple, | | | | | | if DL | | | | | | packet | | | | | | received on | | | | | | higher ARP | | | | | | than | | | | | | previous | | | | | | DDN); | | | | | | Inclusion | | | | | | of DSCP of | | | | | | packet in | | | | | | DDN message | | | | | | for Paging | | | | | | Policy | | | | | | Diff | | | | | | erentiation | | | | +-------------+-------------+-------------+-------------+-------------+ | | 2. Delay | X | | | | | Downlink | | | | | | Data | | | | | | N | | | | | | otification | | | | | | Request (if | | | | | | terminating | | | | | | side | | | | | | replies to | | | | | | uplink data | | | | | | after UE | | | | | | service | | | | | | request | | | | | | before SGW | | | | | | gets | | | | | | updated) | | | | +-------------+-------------+-------------+-------------+-------------+ | | 3. | X | | | | | Extended | | | | | | buffering | | | | | | of downlink | | | | | | data when | | | | | | the UE is | | | | | | in a power | | | | | | saving | | | | | | state and | | | | | | not | | | | | | reachable | | | | | | (high | | | | | | latency | | | | | | comm | | | | | | unication); | | | | | | dropping of | | | | | | downlink | | | | | | data (if | | | | | | MME has | | | | | | requested | | | | | | SGW to | | | | | | throttle | | | | | | downlink | | | | | | low | | | | | | priority | | | | | | traffic and | | | | | | if the | | | | | | downlink | | | | | | data packet | | | | | | is received | | | | | | on such a | | | | | | bearer (see | | | | | | 4 | | | | | | .3.7.4.1a). | | | | +-------------+-------------+-------------+-------------+-------------+ | | 4. PGW | X | X | | | | pause of | | | | | | charging | | | | | | procedure | | | | | | based on | | | | | | operator | | | | | | policy/co | | | | | | nfiguration | | | | | | the SGW | | | | | | (failed | | | | | | paging, | | | | | | abnormal | | | | | | radio link | | | | | | release, | | | | | | numb | | | | | | er/fraction | | | | | | of | | | | | | pa | | | | | | ckets/bytes | | | | | | dropped at | | | | | | SGW) | | | | +-------------+-------------+-------------+-------------+-------------+ | E. | 1. UL/DL | | X | X | | Bearer/APN | APN-AMBR | | | | | policing | enforcement | | | | +-------------+-------------+-------------+-------------+-------------+ | | 2. UL/DL | | X | | | | bearer MBR | | | | | | enforcement | | | | | | (for GBR | | | | | | bearer) | | | | +-------------+-------------+-------------+-------------+-------------+ | | 3. UL/DL | | X | | | | bearer MBR | | | | | | enforcement | | | | | | (for nonGBR | | | | | | bearer on | | | | | | Gn/Gp | | | | | | interface) | | | | +-------------+-------------+-------------+-------------+-------------+ | F. PCC | 1. Service | | X | X | | related | detection | | | | | functions | (DPI, | | | | | | IP-5-tuple) | | | | +-------------+-------------+-------------+-------------+-------------+ | | 2. Bearer | | X | | | | binding | | | | | | (bearer QoS | | | | | | & TFT) | | | | +-------------+-------------+-------------+-------------+-------------+ | | 3. UL | | X | | | | bearer | | | | | | binding | | | | | | v | | | | | | erification | | | | | | and mapping | | | | | | of DL | | | | | | traffic to | | | | | | bearers | | | | +-------------+-------------+-------------+-------------+-------------+ | | 4. UL and | | X | X | | | DL service | | | | | | level | | | | | | gating | | | | +-------------+-------------+-------------+-------------+-------------+ | | 5. UL and | | X | X | | | DL service | | | | | | level MBR | | | | | | enforcement | | | | +-------------+-------------+-------------+-------------+-------------+ | | 6. UL and | | X | X | | | DL service | | | | | | level | | | | | | charging | | | | | | (online & | | | | | | offline, | | | | | | per | | | | | | charging | | | | | | key) | | | | +-------------+-------------+-------------+-------------+-------------+ | | 7. Usage | | X | X | | | monitoring | | | | +-------------+-------------+-------------+-------------+-------------+ | | 8. Event | | X | X | | | reporting | | | | | | (including | | | | | | application | | | | | | detection) | | | | +-------------+-------------+-------------+-------------+-------------+ | | 9. Request | | | X | | | for | | | | | | forwarding | | | | | | of event | | | | | | reporting | | | | +-------------+-------------+-------------+-------------+-------------+ | | 10. | | X | X | | | Redirection | | | | +-------------+-------------+-------------+-------------+-------------+ | | 11. FMSS | | X | X | | | handling | | | | +-------------+-------------+-------------+-------------+-------------+ | | 12. PCC | | X | | | | support for | | | | | | NBIFOM | | | | +-------------+-------------+-------------+-------------+-------------+ | | 13. DL | | | X | | | DSCP | | | | | | marking for | | | | | | application | | | | | | indication | | | | +-------------+-------------+-------------+-------------+-------------+ | G. NBIFOM | Non-PCC | X | X | | | | aspects of | | | | | | NBIFOM | | | | +-------------+-------------+-------------+-------------+-------------+ | H. | 1. | X | X | | | Int | Accounting | | | | | er-operator | per UE and | | | | | accounting | bearer | | | | | (counting | | | | | | of volume | | | | | | and time) | | | | | +-------------+-------------+-------------+-------------+-------------+ | | 2. | X | X | X | | | Interfacing | | | | | | OFCS | | | (only in | | | through | | | LBO | | | reference | | | scenario) | | | points | | | | | | specified | | | | | | in TS | | | | | | 32.240 | | | | +-------------+-------------+-------------+-------------+-------------+ | I. | Exchange of | X | X | | | Lo | lo | | | | | ad/overload | ad/overload | | | | | control | control | | | | | functions | information | | | | | | and actions | | | | | | during peer | | | | | | node | | | | | | overload | | | | +-------------+-------------+-------------+-------------+-------------+ | J. Legal | Interfacing | X | X | | | intercept | LI | | | | | | functions | | | | | | through | | | | | | reference | | | | | | points | | | | | | specified | | | | | | in | | | | | | TS 3 | | | | | | 3.107 [6] | | | | | | and | | | | | | performing | | | | | | LI | | | | | | fu | | | | | | nctionality | | | | +-------------+-------------+-------------+-------------+-------------+ | K. Packet | (check that | | X | | | screening | UE uses | | | | | function | only | | | | | | assigned IP | | | | | | addresses | | | | | | in uplink | | | | | | packets) | | | | +-------------+-------------+-------------+-------------+-------------+ | L. | (under | X | X | X | | Restoration | CT WG4 | | | | | and | resp | | | | | recovery | onsibility) | | | | +-------------+-------------+-------------+-------------+-------------+ | M. RADIUS / | (under CT3 | | X | | | Diameter | resp | | | | | interfaces | onsibility) | | | | | on SGi | | | | | +-------------+-------------+-------------+-------------+-------------+ | N. OAM | (under | X | X | X | | interfaces | SA WG5 | | | | | | resp | | | | | | onsibility) | | | | +-------------+-------------+-------------+-------------+-------------+ | O. GTP | (under | X | X | | | bearer and | CT WG4 | | | | | path | resp | | | | | management | onsibility) | | | | | | | | | | | | Generation | | | | | | of echo | | | | | | request | | | | | | | | | | | | Handling of | | | | | | echo | | | | | | response | | | | | | | | | | | | Handling of | | | | | | echo | | | | | | request | | | | | | timeout | | | | | | | | | | | | Handling of | | | | | | Error | | | | | | Indication | | | | | | message | | | | +-------------+-------------+-------------+-------------+-------------+
> NOTE: All interfaces reflected in the baseline architecture in clause 4.2
> have to be supported (e.g. the interface to the OCS).
Editor\'s note: The above table can be extended if additional existing
functionality is identified.
# 5 Key issues
## 5.1 Key issue 1 - Functionality split into user plane and control plane
functions
### 5.1.1 Description
This key issue investigates the split of S-GW, P-GW and TDF functionality into
control plane and user plane functions. The solutions to this key issue should
describe for each logical entity (S-GW, P-GW, TDF) what functionality and
related interfaces are located on each side of a control plane - user plane
interface, while not affecting the overall functionality provided by these
nodes and not affecting the other EPC functions.
This key issue also investigates the interface definition between control
plane and user plane functional entities for each logical entity (S-GW, P-GW,
TDF), including the nature of the information exchanged and the information
flows.
Additional functions that are necessary due to the functionality split may
need to be documented as well.
## 5.2 Key Issue 2 - Selection mechanism for user plane functional entities
User plane functional entities have to be selected during PDN connection
establishment (e.g. E-UTRAN Initial Attach procedure) as well as during other
procedures that require a change of a user plane functional entity.
The following questions need to be addressed:
\- Which entity performs the selection mechanism?
\- What parameters should be considered for the selection mechanism (e.g. APN,
user location)?
\- How to realize the selection mechanism (e.g. DNS)?
\- What triggers (e.g. existing procedures) the execution of the selection
mechanism?
## 5.3 Key Issue 3 - Change of user plane session identity (due to other than
UE mobility scenarios)
### 5.3.1 Description
To accommodate the changing traffic and/or bandwidth requirements (e.g. due to
busy hour traffic fluctuation), the user plane may be expanded or contracted
(e.g. on scheduled or unscheduled basis) in terms of resources (e.g. CPU,
memory, network interfaces, user plane functions, etc.). As part of it, new
resources may be added or existing resources may be removed at runtime, and
the existing sessions may need to be re-distributed over the available set of
resources. As a result, the user plane session identity (e.g. GTP-U end-point
identity, which is TEID and IP address) for one or more sessions may change
and in that case the new user plane session identity needs to be communicated
to the peer node(s).
This key issue aims to study solutions to communicate the change of user plane
session identity to the peer node(s).
### 5.3.2 Solution requirements
The solution to communicate the change of the user plane session identity for
S-GW, P-GW and TDF shall:
\- Minimize signalling overhead when multiple user plane session identities
are changed, and
\- Minimize impact on UE services, e.g. packet losses, in the case of user
plane functionality entity change.
## 5.4 Key Issue 4 - Relocation of user plane functional entity due to UE
mobility
UE mobility procedures may lead to situations wherein the user plane
functional entity needs to be relocated while the control plane functional
entity remains unchanged. In such a case, another user plane functional entity
needs to be chosen and instructed to provide the necessary user plane
functionality. Any impact on services currently used by the UE needs to be
minimized.
Therefore, at least the following questions need to be addressed:
\- In which existing procedures can a relocation of a user plane functional
entity happen?
\- How to ensure minimum impact, e.g. realize service continuity, on the
services currently used by the UE?
\- What interactions are required during a relocation of a user plane
functional entity?
# 6 Solutions
## 6.1 Solutions to key issue 1
### 6.1.1 Solution 1: Functional split for SGW, PGW and TDF
#### 6.1.1.1 Overview
This solution proposes the functionalities that should be part of user plane
and control plane parts of S-GW, P-GW and TDF. Figure 6.1.1.1-1 shows the
potential architecture with split control plane and user plane functions.
Figure 6.1.1-1: Split architecture
Editor\'s note: Whether the interfaces to the charging systems (i.e. Gy, Gz,
Gyn, Gzn) are terminated in the control plane or user plane function is FFS.
#### 6.1.1.2 Functional split of SGW
The following table describes the functionality of the SGW control plane
function and the SGW user plane function.
Most functionality performed by the UP function are controlled from the CP
function and thus even if it is marked below as a UP function only, there will
be corresponding control functionality in the CP function.
For interfaces not listed in the table below, Figure 6.1.1-1 describes whether
they are terminated in the CP and UP function respectively.
Table 6.1.1-1: Functional split of S-GW
+----------------+----------------+--------+--------+----------------+ | Main | Sub | S-GW C | S-GW U | Comments | | functionality | -functionality | | | | +----------------+----------------+--------+--------+----------------+ | A. Session | 1. Resource | | X | | | management | management for | | | | | (default & | bearer | | | | | dedicated | resources | | | | | bearer | | | | | | establishment, | | | | | | bearer | | | | | | modification, | | | | | | bearer | | | | | | deactivation) | | | | | +----------------+----------------+--------+--------+----------------+ | | 2. IP address | | | See | | | and TEID | | | clause 6.1.1.5 | | | assignment for | | | | | | GTP-U | | | | +----------------+----------------+--------+--------+----------------+ | | 3. Packet | | X | | | | forwarding | | | | +----------------+----------------+--------+--------+----------------+ | | 4. Transport | | X | | | | level packet | | | | | | marking | | | | +----------------+----------------+--------+--------+----------------+ | C. Support for | 1. Forwarding | | X | | | UE mobility | of \"end | | | | | | marker\" (as | | | | | | long as user | | | | | | plane to | | | | | | source eNB | | | | | | exists) | | | | +----------------+----------------+--------+--------+----------------+ | | 2. Sending of | | X | | | | \"end marker\" | | | | | | after | | | | | | switching the | | | | | | path to target | | | | | | node | | | | +----------------+----------------+--------+--------+----------------+ | | 3. Forwarding | | X | | | | of buffered | | | | | | packet | | | | | | (5.3.3.1A) | | | | +----------------+----------------+--------+--------+----------------+ | | 4. Change of | X | X | intra-3GPP RAT | | | target GTP-U | | | HO with eNB | | | endpoint (e.g. | | | change | | | handover | | | | | | procedures) = | | | | | | mobility | | | | | | anchor | | | | +----------------+----------------+--------+--------+----------------+ | | _5\. Mobility | | |_ N/A _| | | between 3GPP | | | | | | and non-3GPP | | | | | | access_ | | | | +----------------+----------------+--------+--------+----------------+ | D. S1-Release | 1. ECM-IDLE | | X | | | / Buffering / | mode DL packet | | | | | Downlink Data | buffering; | | | | | Notification | Triggering of | | | | | | Downlink Data | | | | | | Notification | | | | | | message | | | | | | generation per | | | | | | bearer | | | | | | (multiple, if | | | | | | DL packet | | | | | | received on | | | | | | higher ARP | | | | | | than previous | | | | | | DDN); | | | | | | Inclusion of | | | | | | DSCP of packet | | | | | | in DDN message | | | | | | for Paging | | | | | | Policy | | | | | | D | | | | | | ifferentiation | | | | +----------------+----------------+--------+--------+----------------+ | | 2. Delay | X | | | | | Downlink Data | | | | | | Notification | | | | | | Request (if | | | | | | terminating | | | | | | side replies | | | | | | to uplink data | | | | | | after UE | | | | | | service | | | | | | request before | | | | | | SGW gets | | | | | | updated) | | | | +----------------+----------------+--------+--------+----------------+ | | 3. Extended | | | See clause | | | buffering of | | | 6.1.1.10 | | | downlink data | | | | | | when the UE is | | | | | | in a power | | | | | | saving state | | | | | | and not | | | | | | reachable | | | | | | (high latency | | | | | | c | | | | | | ommunication); | | | | | | dropping of | | | | | | downlink data | | | | | | (if MME has | | | | | | requested SGW | | | | | | to throttle | | | | | | downlink low | | | | | | priority | | | | | | traffic and if | | | | | | the downlink | | | | | | data packet is | | | | | | received on | | | | | | such a bearer | | | | | | (see | | | | | | 4.3.7.4.1a). | | | | +----------------+----------------+--------+--------+----------------+ | | 4. PGW pause | X | X | | | | of charging | | | | | | procedure | | | | | | based on | | | | | | operator | | | | | | policy | | | | | | /configuration | | | | | | the SGW | | | | | | (failed | | | | | | paging, | | | | | | abnormal radio | | | | | | link release, | | | | | | n | | | | | | umber/fraction | | | | | | of | | | | | | packets/bytes | | | | | | dropped at | | | | | | SGW) | | | | +----------------+----------------+--------+--------+----------------+ | G. NBIFOM | Non-PCC | X | | | | | aspects of | | | | | | NBIFOM | | | | +----------------+----------------+--------+--------+----------------+ | H. | 1. Accounting | X | X | UP function | | Inter-operator | per UE and | | | performs | | accounting | bearer | | | collection of | | (counting of | | | | usage data. | | volume and | | | | | | time) | | | | | +----------------+----------------+--------+--------+----------------+ | | 2. | | | See clause | | | Interfacing | | | 6.1.1.6 | | | OFCS through | | | | | | reference | | | | | | points | | | | | | specified in | | | | | | TS 32.240 | | | | +----------------+----------------+--------+--------+----------------+ | I. | Exchange of | | | FFS | | Load/overload | load/overload | | | | | control | control | | | | | functions | information | | | | | | and actions | | | | | | during peer | | | | | | node overload | | | | +----------------+----------------+--------+--------+----------------+ | J. Legal | Interfacing LI | | | See clause | | intercept | functions | | | 6.1.1.12 | | | through | | | | | | reference | | | | | | points | | | | | | specified in | | | | | | T | | | | | | S 33.107 [6] | | | | | | and performing | | | | | | LI | | | | | | functionality | | | | +----------------+----------------+--------+--------+----------------+ | L. Restoration | (under CT WG4 | | | See clause | | and recovery | r | | | 6.1.1.5.4 | | | esponsibility) | | | | +----------------+----------------+--------+--------+----------------+ | N. OAM | (under SA WG5 | X | X | | | interfaces | r | | | | | | esponsibility) | | | | +----------------+----------------+--------+--------+----------------+ | O. GTP bearer | (under CT WG4 | | | FFS | | and path | r | | | | | management | esponsibility) | | | | | | | | | | | | Generation of | | | | | | echo request | | | | | | | | | | | | Handling of | | | | | | echo response | | | | | | | | | | | | Handling of | | | | | | echo request | | | | | | timeout | | | | | | | | | | | | Handling of | | | | | | Error | | | | | | Indication | | | | | | message | | | | +----------------+----------------+--------+--------+----------------+
#### 6.1.1.3 Functional split of PGW
The following table describes the functionality of the PGW control plane
function and the PGW user plane function.
Most functionality performed by the UP function are controlled from the CP
function and thus even if it is marked below as a UP function only there will
be corresponding control functionality in the CP function.
For interfaces not listed in the table below, Figure 6.1.1-1 describes whether
they are terminated in the CP and UP function respectively.
Table 6.1.1-2: Functional split of PGW
+----------------+----------------+--------+--------+----------------+ | Main | Sub | P-GW C | P-GW U | Comments | | functionality | -functionality | | | | +----------------+----------------+--------+--------+----------------+ | A. Session | 1. Resource | | X | | | management | management for | | | | | (default & | bearer | | | | | dedicated | resources | | | | | bearer | | | | | | establishment, | | | | | | bearer | | | | | | modification, | | | | | | bearer | | | | | | deactivation) | | | | | +----------------+----------------+--------+--------+----------------+ | | 2. IP address | | | See clause | | | and TEID | | | 6.1.1.5 | | | assignment for | | | | | | GTP-U | | | | +----------------+----------------+--------+--------+----------------+ | | 3. Packet | | X | | | | forwarding | | | | +----------------+----------------+--------+--------+----------------+ | | 4. Transport | | X | | | | level packet | | | | | | marking | | | | +----------------+----------------+--------+--------+----------------+ | B. UE IP | 1. IP address | X | | See clause | | address | allocation | | | 6.1.1.8 | | management | from local | | | | | | pool | | | | +----------------+----------------+--------+--------+----------------+ | | 2. DHCPv4 / | X | | See clause | | | DHCPv6 client | | | 6.1.1.8 | +----------------+----------------+--------+--------+----------------+ | | 3. DHCPv4 / | X | | See clause | | | DHCPv6 server | | | 6.1.1.8 | +----------------+----------------+--------+--------+----------------+ | | 4. Router | X | | See clause | | | advertisement, | | | 6.1.1.8 | | | router | | | | | | solicitation, | | | | | | neighbor | | | | | | advertisement, | | | | | | neighbor | | | | | | solicitation | | | | | | as defined in | | | | | | RFC 4861 | | | | +----------------+----------------+--------+--------+----------------+ | C. Support for | _1\. Forwarding | | |_ N/A _| | UE mobility | of \"end | | | | | | marker\" (as | | | | | | long as user | | | | | | plane to | | | | | | source eNB | | | | | | exists)_ | | | | +----------------+----------------+--------+--------+----------------+ | | 2. Sending of | | X | | | | \"end marker\" | | | | | | after | | | | | | switching the | | | | | | path to target | | | | | | node | | | | +----------------+----------------+--------+--------+----------------+ | | _3\. Forwarding | | |_ N/A _| | | of buffered | | | | | | packet | | | | | | (5.3.3.1A)_ | | | | +----------------+----------------+--------+--------+----------------+ | | 4. Change of | X | X | intra-3GPP RAT | | | target GTP-U | | | HO with SGW | | | endpoint (e.g. | | | change | | | handover | | | | | | procedures) = | | | | | | mobility | | | | | | anchor | | | | +----------------+----------------+--------+--------+----------------+ | | 5. Mobility | X | X | | | | between 3GPP | | | | | | and non-3GPP | | | | | | access | | | | +----------------+----------------+--------+--------+----------------+ | D. S1-Release | _1\. ECM-IDLE | | |_ N/A _| | / Buffering / | mode DL packet | | | | | Downlink Data | buffering; | | | | | Notification | Triggering of | | | | | | Downlink Data | | | | | | Notification | | | | | | message | | | | | | generation per | | | | | | bearer | | | | | | (multiple, if | | | | | | DL packet | | | | | | received on | | | | | | higher ARP | | | | | | than previous | | | | | | DDN); | | | | | | Inclusion of | | | | | | DSCP of packet | | | | | | in DDN message | | | | | | for Paging | | | | | | Policy | | | | | | Di | | | | | | fferentiation_ | | | | +----------------+----------------+--------+--------+----------------+ | | _2\. Delay | | |_ N/A _| | | Downlink Data | | | | | | Notification | | | | | | Request (if | | | | | | terminating | | | | | | side replies | | | | | | to uplink data | | | | | | after UE | | | | | | service | | | | | | request before | | | | | | SGW gets | | | | | | updated)_ | | | | +----------------+----------------+--------+--------+----------------+ | | _3\. Extended | | |_ N/A _| | | buffering of | | | | | | downlink data | | | | | | when the UE is | | | | | | in a power | | | | | | saving state | | | | | | and not | | | | | | reachable | | | | | | (high latency | | | | | | c | | | | | | ommunication); | | | | | | dropping of | | | | | | downlink data | | | | | | (if MME has | | | | | | requested SGW | | | | | | to throttle | | | | | | downlink low | | | | | | priority | | | | | | traffic and if | | | | | | the downlink | | | | | | data packet is | | | | | | received on | | | | | | such a bearer | | | | | | (see | | | | | | 4.3.7.4.1a)._ | | | | +----------------+----------------+--------+--------+----------------+ | | 4. PGW pause | X | X | | | | of charging | | | | | | procedure | | | | | | based on | | | | | | operator | | | | | | policy | | | | | | /configuration | | | | | | the SGW | | | | | | (failed | | | | | | paging, | | | | | | abnormal radio | | | | | | link release, | | | | | | n | | | | | | umber/fraction | | | | | | of | | | | | | packets/bytes | | | | | | dropped at | | | | | | SGW) | | | | +----------------+----------------+--------+--------+----------------+ | E. Bearer/APN | 1. UL/DL | | X | | | policing | APN-AMBR | | | | | | enforcement | | | | +----------------+----------------+--------+--------+----------------+ | | 2. UL/DL | | X | | | | bearer MBR | | | | | | enforcement | | | | | | (for GBR | | | | | | bearer) | | | | +----------------+----------------+--------+--------+----------------+ | | 3. UL/DL | | X | | | | bearer MBR | | | | | | enforcement | | | | | | (for nonGBR | | | | | | bearer on | | | | | | Gn/Gp) | | | | +----------------+----------------+--------+--------+----------------+ | F. PCC related | 1. Service | | X | | | functions | detection | | | | | | (DPI, | | | | | | IP-5-tuple) | | | | +----------------+----------------+--------+--------+----------------+ | | 2. Bearer | X | | | | | binding | | | | | | (bearer QoS & | | | | | | TFT) | | | | +----------------+----------------+--------+--------+----------------+ | | 3. UL bearer | | X | | | | binding | | | | | | verification | | | | | | and mapping of | | | | | | DL traffic to | | | | | | bearers | | | | +----------------+----------------+--------+--------+----------------+ | | 4. UL and DL | | X | | | | service level | | | | | | gating | | | | +----------------+----------------+--------+--------+----------------+ | | 5. UL and DL | | X | | | | service level | | | | | | MBR | | | | | | enforcement | | | | +----------------+----------------+--------+--------+----------------+ | | 6. UL and DL | | | See clause | | | service level | | | 6.1.1.6 | | | charging | | | | | | (online & | | | | | | offline, per | | | | | | charging key) | | | | +----------------+----------------+--------+--------+----------------+ | | 7. Usage | | | See clause | | | monitoring | | | 6.1.1.6 | +----------------+----------------+--------+--------+----------------+ | | 8. Event | X | X | Note: | | | reporting | | | User-plane | | | (including | | | related events | | | application | | | such as | | | detection) | | | application | | | | | | detection | | | | | | reporting | | | | | | supported in | | | | | | UP function, | | | | | | while | | | | | | control-plane | | | | | | related events | | | | | | such as RAT | | | | | | change etc. | | | | | | supported only | | | | | | in CP | | | | | | function. | +----------------+----------------+--------+--------+----------------+ | | _9\. Request | | |_ N/A _| | | for forwarding | | | | | | of event | | | | | | reporting_ | | | | +----------------+----------------+--------+--------+----------------+ | | 10. | X | X | | | | Redirection | | | | +----------------+----------------+--------+--------+----------------+ | | 11. FMSS | | X | | | | handling | | | | +----------------+----------------+--------+--------+----------------+ | | 12. PCC | X | X | | | | support for | | | | | | NBIFOM | | | | +----------------+----------------+--------+--------+----------------+ | | _13\. DL DSCP | | |_ N/A _| | | marking for | | | | | | application | | | | | | indication_ | | | | +----------------+----------------+--------+--------+----------------+ | | 14. | | | See clause | | | Predefined | | | 6.1.1.17 | | | PCC/ADC rules | | | | | | activation and | | | | | | deactivation | | | | +----------------+----------------+--------+--------+----------------+ | G. NBIFOM | Non-PCC | X | X | | | | aspects of | | | | | | NBIFOM | | | | +----------------+----------------+--------+--------+----------------+ | H. | 1. Accounting | | | UP function | | Inter-operator | per UE and | | | performs | | accounting | bearer | | | collection of | | (counting of | | | | usage data. | | volume and | | | | | | time) | | | | | +----------------+----------------+--------+--------+----------------+ | | 2. | | | See clause | | | Interfacing | | | 6.1.1.6 | | | OFCS through | | | | | | reference | | | | | | points | | | | | | specified in | | | | | | TS 32.240 | | | | +----------------+----------------+--------+--------+----------------+ | I. | Exchange of | | | FFS | | Load/overload | load/overload | | | | | control | control | | | | | functions | information | | | | | | and actions | | | | | | during peer | | | | | | node overload | | | | +----------------+----------------+--------+--------+----------------+ | J. Legal | Interfacing LI | | | See clause | | intercept | functions | | | 6.1.1.12 | | | through | | | | | | reference | | | | | | points | | | | | | specified in | | | | | | T | | | | | | S 33.107 [6] | | | | | | and performing | | | | | | LI | | | | | | functionality | | | | +----------------+----------------+--------+--------+----------------+ | K. Packet | (check that UE | | X | | | screening | uses only | | | | | function | assigned IP | | | | | | addresses in | | | | | | uplink | | | | | | packets) | | | | +----------------+----------------+--------+--------+----------------+ | L. Restoration | (under CT WG4 | | | See clause | | and recovery | r | | | 6.1.1.5.4 | | | esponsibility) | | | | +----------------+----------------+--------+--------+----------------+ | M. RADIUS / | (under CT3 | X | X | R | | Diameter | r | | | ADIUS/Diameter | | interfaces on | esponsibility) | | | supported by | | SGi | | | | CP function. | | | | | | The signalling | | | | | | may be carried | | | | | | via the | | | | | | user-plane | | | | | | function in | | | | | | case of | | | | | | signalling via | | | | | | SGi. | | | | | | | | | | | | See clause | | | | | | 6.1.1.8 | +----------------+----------------+--------+--------+----------------+ | N. OAM | (under SA WG5 | X | X | | | interfaces | r | | | | | | esponsibility) | | | | +----------------+----------------+--------+--------+----------------+ | O. GTP bearer | (under CT WG4 | | | FFS | | and path | r | | | | | management | esponsibility) | | | | | | | | | | | | Generation of | | | | | | echo request | | | | | | | | | | | | Handling of | | | | | | echo response | | | | | | | | | | | | Handling of | | | | | | echo request | | | | | | timeout | | | | | | | | | | | | Handling of | | | | | | Error | | | | | | Indication | | | | | | message | | | | +----------------+----------------+--------+--------+----------------+
#### 6.1.1.4 Functional split of TDF
The following table describes the functionality of the TDF control plane
function and the TDF user plane function.
Most functionality performed by the UP function are controlled from the CP
function and thus even if it is marked below as a UP function only there will
be corresponding control functionality in the CP function.
For interfaces not listed in the table below, Figure 6.1.1-1 describes whether
they are terminated in the CP and UP function respectively.
Table 6.1.1-3: Functional split of TDF
+-----------------+-----------------+-------+-------+-----------------+ | Main | Su | TDF C | TDF U | Comments | | functionality | b-functionality | | | | +-----------------+-----------------+-------+-------+-----------------+ | E. Bearer/APN | 1. UL/DL TDF | | X | Not identical | | policing | session MBR | | | to APN-AMBR | | | enforcement | | | enforcement as | | | | | | it a) covers | | | | | | every flow in | | | | | | TDF session and | | | | | | b) does not | | | | | | cover other TDF | | | | | | sessions of the | | | | | | UE to the same | | | | | | APN | +-----------------+-----------------+-------+-------+-----------------+ | | _2\. UL/DL | | |_ N/A _| | | bearer MBR | | | | | | enforcement | | | | | | (for GBR | | | | | | bearer)_ | | | | +-----------------+-----------------+-------+-------+-----------------+ | | _3\. UL/DL | | |_ N/A _| | | bearer MBR | | | | | | enforcement | | | | | | (for nonGBR | | | | | | bearer on | | | | | | Gn/Gp)_ | | | | +-----------------+-----------------+-------+-------+-----------------+ | F. PCC related | 1. Service | | X | | | functions | detection (DPI, | | | | | | IP-5-tuple) | | | | +-----------------+-----------------+-------+-------+-----------------+ | | _2\. Bearer | | |_ N/A _| | | binding (bearer | | | | | | QoS & TFT)_ | | | | +-----------------+-----------------+-------+-------+-----------------+ | | _3\. UL bearer | | |_ N/A _| | | binding | | | | | | verification | | | | | | and mapping of | | | | | | DL traffic to | | | | | | bearers_ | | | | +-----------------+-----------------+-------+-------+-----------------+ | | 4. UL and DL | | X | | | | service level | | | | | | gating | | | | +-----------------+-----------------+-------+-------+-----------------+ | | 5. UL and DL | | X | | | | service level | | | | | | MBR enforcement | | | | +-----------------+-----------------+-------+-------+-----------------+ | | 6. UL and DL | | | See clause | | | service level | | | 6.1.1.6 | | | charging | | | | | | (online & | | | | | | offline, per | | | | | | charging key) | | | | +-----------------+-----------------+-------+-------+-----------------+ | | 7. Usage | | | See clause | | | monitoring | | | 6.1.1.6 | +-----------------+-----------------+-------+-------+-----------------+ | | 8. Event | X | X | Note: | | | reporting | | | User-plane | | | (including | | | related events | | | application | | | such as | | | detection) | | | application | | | | | | detection | | | | | | reporting | | | | | | supported in UP | | | | | | function, while | | | | | | control-plane | | | | | | related events | | | | | | such as out of | | | | | | credit | | | | | | supported only | | | | | | in CP function. | +-----------------+-----------------+-------+-------+-----------------+ | | 9. Request for | X | | | | | forwarding of | | | | | | event reporting | | | | +-----------------+-----------------+-------+-------+-----------------+ | | 10. | X | X | | | | Redirection | | | | +-----------------+-----------------+-------+-------+-----------------+ | | 11. FMSS | | X | | | | handling | | | | +-----------------+-----------------+-------+-------+-----------------+ | | _12\. PCC | | |_ N/A _| | | support for | | | | | | NBIFOM_ | | | | +-----------------+-----------------+-------+-------+-----------------+ | | 13. DL DSCP | | X | | | | marking for | | | | | | application | | | | | | indication | | | | +-----------------+-----------------+-------+-------+-----------------+ | | 14. Predefined | | | See clause | | | PCC/ADC rules | | | 6.1.1.17 | | | Activati | | | | | | on/Deactivation | | | | +-----------------+-----------------+-------+-------+-----------------+ | H. | _1\. Accounting | | |_ N/A _| | Inter-operator | per UE and | | | | | accounting | bearer_ | | | | | (counting of | | | | | | volume and | | | | | | time) | | | | | +-----------------+-----------------+-------+-------+-----------------+ | | 2. Interfacing | | | Relevant in | | | OFCS through | | | case of LBO | | | reference | | | | | | points | | | See clause | | | specified in TS | | | 6.1.1.6 | | | 32.240 | | | | +-----------------+-----------------+-------+-------+-----------------+ | L. Restoration | (under CT WG4 | | | FFS | | and recovery | responsibility) | | | | +-----------------+-----------------+-------+-------+-----------------+ | N. OAM | (under SA WG5 | X | X | | | interfaces | responsibility) | | | | +-----------------+-----------------+-------+-------+-----------------+
#### 6.1.1.5 Considerations for GTP-U IP address and TEID allocation
##### 6.1.1.5.1 Description
This clause describes solutions for item A.2 in the table, i.e. solutions for
whether F-TEID allocation is performed in the user plane or control plane
functions.
##### 6.1.1.5.2 Solution 1: F-TEID-u allocation / release in the user plane
function
In this solution the allocation/ release of the IP address and TEID for GTP-U
is provided by the user plane function
Whenever a new user plane TEID and IP address allocation is required, e.g.
during default bearer establishment, the control plane function shall request
the user plane function to allocate the user plane TEID and IP address for the
new (GTP) tunnel.
The user plane function shall allocate the user plane TEID and IP address when
the resource for the new GTP-tunnel is accepted and signal these parameters to
the control plane function.
The control plane function shall signal the allocated user plane TEID and IP
address to other network entities to complete the bearer establishment.
##### 6.1.1.5.3 Solution 2: F-TEID-u allocation / release in the control plane
function
In this solution the allocation / release of the F-TEID-u is provided by the
control plane function.
Whenever a new user F-TEID-u allocation (or release) is required, e.g. during
bearer establishment (or release), the control plane function shall allocate
(or release) the F-TEID-u for the new (or released) GTP-u tunnel. The control
plane function shall also provide the F-TEID-u to the user plane function when
it creates the user plane connection.
The control plane function shall signal the allocated (released) F-TEID-u to
other network entities (MME, SGSN, PGW or SGW) via GTP-c signalling.
The IP address of the F-TEID-u corresponds to the user plane function selected
to support a bearer.
> NOTE: When an user plane function can interwork with multiple control plane
> functions, the question may be raised of whether the allocation of F-TEID-u
> by the control plane incurs the risk that 2 control plane functions may
> allocate the same F-TEID-u. The TEID-u space can be partitioned per control
> plane function. As the TEID size is 32 bits, and considering that an user
> plane function may interact with 16 control plane functions (which seems a
> lot), this lets 2^32-4^ = 2^28^ i.e. an order of magnitude of 256 M TEIDs to
> allocate per control plane function per user plane function. So this does
> not seem to be an issue.
##### 6.1.1.5.4 Solution 3: Control plane function providing pre-allocated
GTP-U IP address and TEID to the user plane function (during restoration
scenario)
This solution is applicable for the user plane session restoration scenario,
e.g. when the user plane function restarts (or fails without restarting) and
losses all the existing sessions. Those impacted user plane sessions can be
restored in the restarted or another user plane function by the control plane
function, if the user plane restoration procedures are supported by the
control and user plane functions.
The principles of this solution can be applied on top of the control plane as
well as the user plane based \"GTP-U IP address and TEID allocation\"
solutions and it is assumed that the control plane function stores the GTP-U
IP address and TEID on a per session basis.
Once the control plane function detects restart/failure of the user plane
function, as a part of the user plane session restoration, the control plane
function shall provide the previously allocated GTP-U IP address and TEID(s)
(along with all the other session related information) to the new or restarted
user plane function (please refer to Note 3). This is performed by each
control plane function for all the UE sessions which were active between the
control plane function and the restarted/failed user plane function. The new
or restarted user plane function shall use the pre-allocated GTP-U IP address
and TEID for the given session instead of allocating new values for each of
those sessions. This will ensure that the peer nodes can continue using the
same GTP-U session identities even after the restart or failure of the user
plane function.
> NOTE 1: It is assumed there exist some protocol based mechanism, e.g.
> periodic exchange of heart-beat messages, for the control plane function to
> detect the restart and/or failure of the user plane function.
>
> NOTE 2: Since restoration procedure is supported, it is assumed that the
> user plane function will not report change of restart-counter to the peer
> user plane functions. This is inline with the other restoration procedures
> defined by CT WG4.
Editor\'s note: It needs to be clarified whether or not there might be
potential conflicts of allocation of F-TEID-u when this solution is applied on
top of the user plane based \"GTP-U IP address and TEID allocation.
> NOTE 3: The restoration and recovery aspects will be defined by CT WG4,
> therefore this should be rechecked with CT WG4.
Since there is no change of GTP-U IP address and TEID, no signalling to the
other network entities are needed. Thus, the restoration of user plane session
can be transparent to the other network entities.
This solution is applicable to the SGW as well as PGW.
##### 6.1.1.5.5 Evaluations
Solution 1 and 2 debate on whether the function of user plane F-TEID
allocation should reside in the UP function or the CP function.
Both solution 1 and solution 2 enable the allocation of the GTP-U IP address
and TEID reflecting the blade level information, which allows an efficient
resource management. With solution 1, the blade level information is
controlled by the UP function, while with solution 2 the blade level
information is maintained by the CP function. In solution 2, the CP function
allocates a TEID but only selects an user plane IP address among those
configured, and is assumed to be notified by the UP function of the
availability/unavailability of a blade.
User plane multi-blade resource management and load balancing are handled by
the UP function in solution 1 and by the CP function in solution 2. Solution 2
allows for simpler and less 3GPP-specific UP function while solution 1 allows
for simpler CP function.
When the UP function is controlled by multiple CP functions, solution 2
requires TEID partitioning at control plane level. On the other hand, solution
1 requires some network configuration and the handling of potential race
conditions that may be the result of multiple CP functions requesting F-TEIDs
simultaneously. For both solutions, an impact on the load/utilization due to a
request from on CP function should be reflected towards the other CP functions
controlling the same UP function.
Solution 3 describes the restoration scenario. However, the restoration
functionality is under CT WG4\'s responsibility and thus, a final decision
from CT WG4 is required.
##### 6.1.1.5.6 Conclusions
It is concluded that F-TEID allocation in UP function (solution 1) and F-TEID
allocation in CP function (solution 2) shall both be supported by the
standard. Whether solution 1 or solution 2 is used is based on network
configuration.
Stage 3 normative work for restoration should be based on Solution 3 but the
final decision is left for CT WG4.
#### 6.1.1.6 Considerations for online charging, offline charging and usage
monitoring
##### 6.1.1.6.1 Description
This clause describes solutions for items F.6, F.7, H.1 and H.2 in the table,
i.e. solutions for supporting online charging, offline charging and usage
monitoring.
The following aspects will be studied:
\- The functional split between the control plane part and the user plane part
for supporting charging and usage monitoring functionalities.
\- Information exchanged between the control and user plane part of the entity
based on the above.
\- Signaling overhead between control and user plane part of the entity for
charging and usage monitoring support.
The accuracy of charging and usage monitoring shall be preserved.
##### 6.1.1.6.2 Solution 1: Charging and usage monitoring handling in the
control plane function
##### 6.1.1.6.2.1 Overall description {#overall-description .H6}
In this solution the Gx, Sd, Gy, Gyn, Gz, Gzn interfaces as well as the
interface between SGW and OFCS are terminated in the control plane function.
This implies that the control plane function supports generation of CDRs and
usage reports towards the charging system, based on information gathered
within the control plane function as well as user-plane related information
received from the user-plane function as further described below. This
solution does not have impact on PCRF or Charging System.
##### 6.1.1.6.2.2 Usage reporting control towards user plane function {#usage-
reporting-control-towards-user-plane-function .H6}
In this solution the control plane function provides rules to the UP function
for controlling how usage reporting is performed. It is assumed that the usage
reporting information is provided as part of overall rules (here called
\"Traffic handling rules\", THR) that control how the user plane treats a
certain piece of traffic. The THR contains packet flow description (IP
filters, Application ID) as well as parameters that describe how that traffic
matching the packet flow descriptor shall be treated. The parameters may
include e.g. QoS enforcement parameters (e.g. MBR), bearer mapping parameters
etc. This solution focuses on the charging aspects and the full description on
how these rules are defined is assumed to be covered by a different solution
description.
In this solution each THR contains Reporting Keys(s) that instructs the UP
function for how to account for the traffic matching the THR. Each Reporting
Key corresponds to a meter/counter in the UP function. A THR may contain
multiple Reporting Keys and the same Reporting Key may be included in multiple
THRs to allow for measurements on different granularity levels.
The CP function decides on the Reporting Keys as well as decides how many
Reporting Keys are needed per THR. The CP function may e.g. provide multiple
Reporting Keys per THR to cater for reporting per bearer, per MK, per RG, per
RG and Service Identifier (SI) and per RG and Sponsor Identifier / ASP
combination.
The Reporting Keys are generic in the sense that the UP function is not aware
of whether a certain Reporting Key corresponds to a counter for the bearer, a
RG, RG+SI, MK etc. The CP function is responsible for the mapping between the
identifiers such as RG, MK, etc. used on Gx, Gy, etc and the Reporting Keys
used towards the UP function.
The CP function also provides triggers and thresholds to the UP function for
when to report usage information. The trigger and threshold information is
provided separately from the THR and is supported for the Session level
reporting as well as on Reporting Key basis as determined by the CP function.
The triggers can be provided as a volume, time or event to cater for the
different charging models supported by TS 23.203 [4]. The CP function decides
the thresholds to provide to the UP function based on quota/allowance received
per RG and MK from OCS and PCRF or based on local configuration/policy.
##### 6.1.1.6.2.3 Reporting from user plane function {#reporting-from-user-
plane-function .H6}
The user plane function supports reporting of usage information to the control
plane function. The user plane function is capable to support reporting based
on different triggers, including periodic reporting with period defined by the
control plane, usage thresholds provided by the control plane function and
report on demand received from the control plane.
The user plane function supports usage reporting on multiple granularity
levels as described by the reporting keys in the THR. The following
aggregation levels / reporting keys are supported by the user plane function:
\- Session level reporting (per PDN Connection)
\- Reporting as defined by the reporting keys in the THR (see above).
In addition the user plane function supports thresholds (volume, time, event)
for triggering reporting as described above.
##### 6.1.1.6.2.4 CDR generation {#cdr-generation .H6}
The CDRs are generated by the control plane function. Most of the parameters
in the CDRs are control-plane related information (e.g. IMSI, IMEI, MSISDN,
APN etc) and are thus readily available within the control plane function and
does not have to be provided to the user-plane function at all. The data
volumes are collected in the user plane function and reported to the control
plane function as described above.
##### 6.1.1.6.2.5 Motivation {#motivation .H6}
This solution for charging and usage monitoring described in this clause
assumes that the UP function can report usage information on different levels
of granularity as required by TS 23.203 [4], e.g. per MK, per RG or per RG and
SI combination. This allows for a CP-UP interface where each measurement (e.g.
per RG) can be handled and reported separately without relying on the
reporting of other measurements (e.g. per MK). This also reduces the amount of
signalling on the CP-UP interface since each measurement can be reported
individually instead of requiring the CP function to retrieve multiple
measurements each time in order to calculate the total usage for an aggregate
such as the RG.
#### 6.1.1.7 Consideration for SGW Service Area and TAI list alignment due to
control plane and user plane split of SGW
##### 6.1.1.7.1 Description
According to TS 23.401 [2] clause 4.3.8.2 Serving GW selection function, it
states:
> _The Serving GW selection function in the MME is used to ensure that all
> Tracking Areas in the Tracking Area List belong to the same Serving GW
> service area._
When the Serving GW is split into control plane and multiple user plane units,
it is uncertain if the above requirement can still be maintained. Hence,
further detailed analysis is needed.
When the SGW is separated into CP function and UP function, the above
requirement can be interpreted in two ways; whether the SGW Service Area
refers to the SGW CP function Service Area or the SGW UP function Service
Area.
In case the MME uses the SGW CP function Service Area when constructing the
TAI List, and if it can be assured that there is \"full mesh\" IP connectivity
between the eNBs and the SGW UP functions in a SGW CP function Service Area,
the UE may move within the TAs in that SGW CP Service Area without the risk of
ending up in an eNB that does not have connectivity to the currently selected
SGW UP function. In such a case, the TAI List requirement is satisfied, and
since even if the UE moves to an eNB outside of the configured SGW UP Serving
Area, the UE can still be served at the new eNB by the selected SGW UP
function. However, in such case the SGW UP may benefit from being relocated to
a SGW UP that is closer to the user, e.g. using the solutions described for
key issue 3 and key issue 4.
In case the MME uses the SGW CP function Service Area when constructing the
TAI List, but it cannot be assured that there is \"full mesh\" IP connectivity
between the eNBs and the SGW UP functions in this SGW CP function Service
Area, there is a risk that the TAI List will contain TAs that do not have
connectivity to the SGW UP function serving the UE. Solutions variants for
handling such a case are described below.
##### 6.1.1.7.2 Solutions
##### 6.1.1.7.2.1 Solution 1: Partitioning of the SGW CP
{#solution-1-partitioning-of-the-sgw-cp .H6}
In this solution the service area of SGW CP functions are aligned with
corresponding SGW UP service areas so that it can be handled as a legacy SGW.
As illustrated in the figure below, the SGW CP functions exposed towards MME
could all be part of a single logical SGW CP function. The SGW UP resources
are deployed in \"pools\" corresponding to specific SGW CP function(s). With
this configuration the MME treats the different SGW CP functions in the same
way as SGWs are handled in the current EPC architecture. For example, the
different SGW CP functions may have different IP addresses towards MME. This
solution does therefore not have any MME standards impact.
There is also the possibility that SGW-UP functions may be of different size
and may overlap geographically but this will be treated by the MME in the same
way as long as these areas area well defined and belong to the different SGW-
CP partitions. The SGW CP function is in that case logically partitioned into
Service Areas that correspond to the smaller SGW-UP coverage areas. When SGW
relocation is initiated by the MME, this could trigger relocation of some SGW
UP functions while other SGW UP functions may be kept in case they can serve
also the new SGW CP Service Area.
Figure 6.1.1.7-1: SGW CP is partitioned (no MME impact)
##### 6.1.1.7.2.2 Solution 2: Solutions based on signaling between MME and
SGW-C {#solution-2-solutions-based-on-signaling-between-mme-and-sgw-c .H6}
**[Solution 2A:]{.underline}** MME learning what SGW-U is selected:
The SGW CP sends the selected SGW UP Identity (e.g. FQDN) to MME. The MME can
then retrieve (e.g. via DNS) the Service Area served by that SGW UP function.
In this way the MME gets to know the SGW UP Service Area and can populate the
TAI List as today. The MME can also initiate SGW CP relocation via which the
SGW UP can be relocated accordingly. This solution alternative assumes that
TAI list can be allocated after interaction with SGW.
**[Solution 2B:]{.underline}** SGW UP learning the TA and influencing the TAI-
List:
The MME sends the current UE location (TA or ECI) to SGW CP during the TAU
procedure. This allows the SGW CP to assess (e.g. with help of DNS) if the
current TA is served by the current SGW UP and can initiate a SGW UP
relocation if needed. A procedure for SGW UP relocation is already captured in
TR 23.714 clause 6.3.1. One issue however is that the new SGW UP may not
support the TAs in the old TAI List sent to the UE. To address this, the MME
would need to clear the TAI List every time a new SGW UP is selected.
Alternatively, the MME needs to provide the current TAI List to the SGW so
that SGW CP can determine if the new SGW UP supports all TAs in the list and
indicate the resulting TAI List back to the MME. This solution alternative
assumes that TAI list can be modified after interaction with SGW.
##### 6.1.1.7.2.3 Solution 3: Decoupling TA handling and SGW UP selection
{#solution-3-decoupling-ta-handling-and-sgw-up-selection .H6}
In this solution the TA handling and SGW UP selection are decoupled, in the
sense that MME manages TA (and TAI List) handling, while SGW CP handles SGW UP
selection. The MME can thus disregard SGW UP Service Areas completely, or in
practice assume that the whole MME serving area is supported by the selected
SGW, similar to solution 1. However, in difference to solution 1 there is no
requirement on configuring SGW Service Areas. Instead it is assumed that SGW
CP ensures that an SGW UP is selected that has approriate connectivity to the
serving eNB.
An assumption in solutions 1-2 described above is that when moving from IDLE
to ACTIVE the existing (old) SGW TEIDs can be used, i.e. there is no need to
modify the Service Request procedure to allow re-allocation of SGW UP (i.e.
modification of SGW TEID) during Service Request. However this solution 3
requires that the Service Request procedure is modified so that SGW TEIDs can
be changed during the Service Request procedure, basically introducing another
round trip on S11 in addition to existing procedure.
Even though this solution may seem attractive from conceptual point of view,
it goes against the current principle in EPC that the SGW resources (e.g.
U-plane TEID) are always ready to be used when a UE transitions from IDLE to
ACTIVE state. It is currently not possible to modify SGW TEIDs (i.e. re-select
the SGW UP) during the Service Request procedure. The solution 3 thus requires
additional S11 signaling during every Service request procedure in order to
interact with SGW CP before MME informs eNB about SGW TEIDs. In this way the
eNB will be affected with extra delay before sending UL data for every Service
Request procedure done. There may also be a need to modify other procedures
such as X2-based handover.
Editor\'s note: It is for FFS if X2 handover procedure can work with this
solution
##### 6.1.1.7.3 Evaluation
**[Solution 1]{.underline}: Solution with SGW CP partitioned into UP service
areas**
It may be argued that this solution will introduce extra signaling due to more
frequent TAU procedures, however TAI lists typically cover a much small area
than the SGW service area. Even if the UP function service area gets smaller,
it may not become smaller than the area covered by a TAI list depending on the
operator configuration.
Pros:
\- This solution does not have any MME standards impact and requires no impact
to 3GPP specifications.
\- Allows the use of multiple SGW UP functions where one SGW UP function has a
small SA (aligned with CP SA) while another SGW UP function has a large SA
(higher layer SA).
Cons:
\- When the SGW CP are partitioned into parts there would be more
configuration of SGW Service Areas needed than if SGW CP would not be
partitioned.
\- There is a possibility of introducing extra signalling due to more frequent
TAU procedure between UE and core network depending on the operator
configuration.
**[Solution 2]{.underline}: Solutions based on signaling between MME and SGW
CP**
Pros:
\- For solution 2B there is less configuration than solution 1 due to fewer
SGW CP Service Areas needed. For solution 2A there is similar configuration as
in solution 1 since SGW UP Service Areas need to be known by MME.
Cons:
\- Both solution 2A and solution 2B have impacts on the signaling between MME
and SGW CP, e.g. during TAU procedure. Does not work with legacy MME.
\- Solution 2B requires TA and TAI List knowledge in SGW and/or SGW UP
knowledge in MME.
\- There is a possibility of introducing extra signalling due to more frequent
TAU procedure between UE and core network depending on the operator
configuration.
**[Solution 3]{.underline}: Decoupling TA handling from SGW UP selection**
Pros:
\- Complete separation between TA / TAI List handling (in MME) and SGW UP
selection (in SGW CP)
Cons:
\- Breaks the principle that SGW UP resources are ready when UE transitions
from IDLE to ACTIVE
\- Additional S11 signaling and latency during every Service reuqest procedure
in order to inform SGW about UE serving cell/TA before MME informs eNB about
SGW TEIDs.
\- Requires MME upgrade. Does not work with legacy MME.
When looking at the benefits versus drawbacks, the impacts on the MME are seen
as the most important aspect we have to consider. Indeed, it seems
operationally difficult to upgrade all MMEs and SGWs in one shot, and a soft
migration should be considered.
Solution 1 has no impact to the MME. With this solution, an MME sees a SGW CP
function as a legacy SGW, and so can be interfaced with both SGW CP functions
and legacy SGWs. Support of SGW relocation between a legacy SGW and a new SGW
CP function does not raise any issue.
With solutions 2 and 3, the MMEs need to be significantly upgraded:
> \- Solution 3 would theoretically be fine for a first design. But, it
> severely impacts the MME and it implies a complete new network configuration
> since the SGW areas would not be anymore aligned to the TAI lists. Any MME
> being able to access any SGW, it means that all MMEs have to be upgraded.
> But this solution also implies the replacement of all legacy SGWs:
> relocation between a legacy SGW and a SGW CP function would not work.
>
> \- Solution 2 impacts MME procedures in a significant way (new procedures,
> change of Service Request procedure, new DNS queries) and requires extra UE
> signalling to modify the TAI list. There is no much gain compared to
> solution 1. Alignment between SGW UP service areas and TAI list is to be
> maintained. Even if all MMEs are upgraded to be able to interface SGW
> control plane functions and legacy SGWs simultaneously, it would imply some
> capability exchange between the MME and the SGW control plane functions. The
> coexistence between legacy SGWs and SGW control planes functions is also
> questionable for in the case of SGW relocation.
Moreover, the study item objectives are clear on avoiding or minimizing the
impacts to other EPC nodes and on interworking with existing EPC architecture
and deployment:
> \"Except for S-GW, P-GW, TDF and interfaces between their corresponding
> control and user plane functions, only those impacts to other EPC entities
> and interfaces that are essential to fulfil the above mentioned objectives
> could be allowed. The existing functions and interfaces should be leveraged
> in order to avoid or minimize change. No other impacts shall be introduced.
>
> The outcome of this work shall not put any limitation on future architecture
> work, and shall be able to co-exist with existing EPC architecture and
> deployment.\"
##### 6.1.1.7.4 Conclusion
Therefore, solution 1 (i.e. Partitioning of the SGW CP) is selected as the
basis for normative specification to address the issue described in clause
6.1.1.7.1.
#### 6.1.1.8 Considerations for UE IP address management
##### 6.1.1.8.1 Description
This clause describes solutions for item B and M in the table 6.1.1-2, i.e.
solutions for whether UE IP address management as well as RADIUS / Diameter
interfaces on SGi is performed in the user plane or control plane function.
##### 6.1.1.8.2 Solution 1: UE IP address management performed by the control
plane function
##### 6.1.1.8.2.1 Description {#description-6 .H6}
In this solution the management of the UE IP address is performed by the
control plane function. The UE IP address management consist of two parts:
acquiring of the IP address and other IP configuration parameters; providing
the IP address and other IP configuration parameters to the UE.
The following functions are supported by the PGW control plane function:
a) GTP-C: IP address allocation via default bearer signalling (towards UE and
MME)
b) DHCPv4/DHCPv6/RS/RA/ND server (towards UE)
c) RADIUS/Diameter/DHCPv4/DHCPv6 client (towards external server, e.g. located
in the PDN)
d) Local IPv4/IPv6 address pool
##### 6.1.1.8.2.2 Motivation {#motivation-1 .H6}
##### 6.1.1.8.2.2.1 Acquiring the IP address and other IP configuration
parameters for the UE {#acquiring-the-ip-address-and-other-ip-configuration-
parameters-for-the-ue .H6}
The IP address and other IP configuration parameters (e.g. DNS server address)
can be acquired from the local pool or from the external PDN.
From the local pool:
It is proposed to configure the IP local pool and other IP configuration
parameters (e.g. DNS server address) at the control plane function of the PGW
for the following reasons:
\- There can be many user plane functions as compared to the control plane
function. Hence, to configure the IP pool at the control plane function allows
simplified management of the user plane function since configuration of IP
address ranges can be handled in the control plane function only.
\- The user plane functions can also be dynamically added or removed to meet
the throughput requirement of the network. Hence, configuring the IP local
pool at user plane function would require complex management of the IP pools.
\- IP address allocation to the UE could be done based on operator specific
policy, e.g. considering the subscriber\'s identity, its location etc. Putting
all these functionalities in user plane function would complicate its
implementation.
From the external PDN:
From the external PDN, the IP address and other IP configuration parameters
(e.g. DNS server address) can be acquired using the DHCPv4, DHCPv6, RADIUS or
Diameter protocols. The PGW has to support DHCPv4 client, DHCPv6 client,
RADIUS client and Diameter client in order to obtain, renew and release the IP
address from the external PDN (ref: TS 23.401 [2] clause 5.3.1.2). All these
functions require state maintenance and support for the complex state machine
of the corresponding protocol. And hence it is proposed to allocate these
functions to the control plane function of the PGW. The actual DHCPv4, DHCPv6,
RADIUS and Diameter signalling may be sent via the user plane function or
directly from the control plane function in case of signalling towards
DHCP/RADIUS/Diameter server via SGi.
In summary, it is proposed to allocate the \"acquiring of the UE IP address\"
function to the control plane function of the PGW.
##### 6.1.1.8.2.2.2 Providing the IP address and other IP configuration
parameters to the UE {#providing-the-ip-address-and-other-ip-configuration-
parameters-to-the-ue .H6}
The IP address and other IP configuration parameters (e.g. DNS server address)
can be provided to the UE during the default bearer establishment procedure or
later via the data plane procedure.
During default bearer establishment procedure:
As part of the default bearer establishment procedure, the PGW provides the
allocated IP address and other IP configuration parameters (e.g. DNS server
address) to the MME (via SGW) as part of the Create Session Response message.
Later, the MME provides the same to the UE via NAS messaging. Since Create
Session Request message is sent over the control plane part of the S5
interface which is terminated at the control plane function of PGW, it is
proposed to allocate this function to the control plane of the PGW.
Later, via data plane procedure:
The UE can request IP address and other IP configuration parameters (e.g. DNS
server address) via data plane using DHCPv4, DHCPv6 or IPv6 SLAAC protocols.
The PGW has to support DHCPv4 server, DHCPv6 server and IPv6 SLAAC procedure
towards the UE (ref: TS 23.401 [2] clause 5.3.1.2) in order to provide, renew
and release the IP address. The PGW also has to support the \"Delegating
Router\" functionality in order to support the \"IPv6 prefix delegation via
DHCPv6\" feature (ref: TS 23.401 [2] clause 5.3.1.2.6). All these functions
require state maintenance and support for the complex state machine of the
corresponding protocol. And hence it is proposed to allocate these functions
to the control plane function of the PGW.
In summary, it is proposed to allocate the \"providing the IP address to the
UE\" function to the control plane function of the PGW.
##### 6.1.1.8.2.2.3 Recovery and restoration {#recovery-and-restoration .H6}
Since the UE\'s IP address management function is allocated to the control
plane function of the PGW, the restart or failure of the user plane function
of the PGW may not impact the PDN connection of the UE, e.g. the control plane
function can restore the UE\'s PDN session, without changing its IP address,
to another user plane function. Thus, it is possible to achieve seamless
recovery of the user plane function by allocating the UE\'s IP address
management function to the control plane function.
##### 6.1.1.8.2.3 Other considerations {#other-considerations .H6}
It is assumed that the downlink packets for the UE are routed to the correct
user plane function. How this is achieved is out of scope of 3GPP.
##### 6.1.1.8.2.4 Functionality needed from the user plane function
{#functionality-needed-from-the-user-plane-function .H6}
Following functionality from the user plane function is required for providing
the IP address and other IP configuration parameters to the UE:
\- Forwarding of the DHCPv4 and DHCPv6 messages between the UE and the control
plane function
\- Forwarding of the IPv6 Router advertisement, Router solicitation, Neighbour
Advertisement, Neighbour Solicitation (ref: RFC 4861) messages between the UE
and the control plane function
Following functionality from the user plane function is required for acquiring
the IP address and other IP configuration parameters:
\- Forwarding of the DHCPv4, DHCPv6, RADIUS and Diameter messages between the
control plane function and the DHCP/RADIUS/Diameter Server in the PDN. This
applies in case the DHCP/RADIUS/Diameter signalling goes via the user plane
function.
At the start of the PDN connection, the control plane function may configure
the user plane function to forward all the messages (i.e. data packets
received from the UE and from the external PDN) corresponding to the above
listed protocols.
##### 6.1.1.8.3 Evaluation
There is only one solution described which can provide the functionality
required for item B and M in the table 6.1.1-2, i.e. UE IP address management
as well as RADIUS / Diameter interfaces on SGi. Consequently, a further
evaluation is not necessary.
##### 6.1.1.8.4 Conclusion
It is concluded to apply solution 1 (6.1.1.8.2) for the normative work, i.e.
to allocate the \"acquiring of the UE IP address\" function and the
\"providing the IP address to the UE\" function to the control plane function
of the PGW.
The transfer of DHCPv4, DHCPv6, RADIUS and Diameter signalling via the user
plane function as well as the direct exchange between the control plane
function and the DHCP/RADIUS/Diameter server via SGi shall be possible to
support different deployment scenarios.
#### 6.1.1.9 Considerations for the functionality supported by the user plane
function
##### 6.1.1.9.1 Description
Some of the existing functionality defined in the table 4.3-1 are not
mandatory and hence may or may not be supported by an entity. For such a
functionality explicit indication for the support of the functionality is sent
by the entity to its peer entity e.g.:
\- SGW can indicate its support for \"PGW pause of charging\" (ref: D.4 of
table 4.3-1) functionality to PGW in Create Session Request message (ref: TS
29.274 clause 7.2.1);
\- PGW can indicate its support for \"PGW pause of charging\" (ref: D.4 of
table 4.3-1) functionality to SGW in Create Session Response message (ref: TS
29.274 clause 7.2.2);
\- PGW can indicate its support for \"Usage Monitoring\" (ref: F.7 of table
4.3-1) or \"NBIFOM\" (ref: F.12 of table 4.3-1) functionality to PCRF via
Supported-Feature AVP (ref: TS 29.212 clause 5.4.1).
In the split architecture of an entity, since the control plane interfaces
towards the peer entities are terminated at the control plane function (ref.
Figure 6.1.1-1), the support for the above, i.e. to indicate the support of a
particular functionality to the peer node, will reside in the control plane
function of the entity. However, when a functionality is allocated to the user
plane function of the entity (i.e. as proposed in table 6.1.1-1, 6.1.1-2 and
6.1.1-3) then the control plane function shall advertise its support to the
peer entity only if the user plane function also supports the corresponding
functionality.
In addition to the above, the control plane may also use the functionalities
supported by the user plane function for the selection of the user plane as
specified in clause 6.2.1.1.3.
This clause describes the solution for the control to discover the
functionality supported by the user plane functions.
##### 6.1.1.9.2 Solution 1: Protocol based advertisement of supported
functionality by the user plane function
##### 6.1.1.9.2.1 Description {#description-8 .H6}
This solution applies for the communication between the control and the user
plane entities of SGW, PGW and TDF.
In this solution, the set of \"supported functionality\" are provided by the
user plane function to the control function at the time of the node level
connection establishment between the control and user plane. The control plane
function shall store it and take into account the user plane function\'s
\"supported functionality\" while advertising the support for a particular
functionality to the peer entities. Additionally, the control plane function
also uses it for user plane selection, e.g. at the time of PDN connection
establishment, such that its functionalities match with the feature required
for a given UE as specified in clause 6.2.1.1.3.
##### 6.1.1.9.2.2 Functionality required from the user plane function
{#functionality-required-from-the-user-plane-function .H6}
The user plane function provides its \"Supported-Functionality\" to the
control plane function at the time of the node level connection establishment
between the control and user plane.
NOTE 1: The exact set of functionality requires to be advertised within
\"Supported-Functionality\" depends upon the existing functionality advertised
over S5, S11, Gx and Sd interfaces and functional split defined based on the
solution to key issue 1 (i.e. clause 6.1). This is left to stage 3 groups.
NOTE 2: The normative work, including what message is used to carry the
Supported-Functionality, etc., for this solution will be handled by the stage
3 groups.
#### 6.1.1.10 Considerations for supporting extended buffering for the UE in
power saving mode
##### 6.1.1.10.1 Description
This clause describes solutions for item \"D.3\" in the table, i.e. solutions
for supporting extended buffering for the UE in power saving mode.
##### 6.1.1.10.2 Solution 1: Supporting extended buffering for the UE in power
saving mode in the control plane function
##### 6.1.1.10.2.1 Description {#description-10 .H6}
In this solution, the extended buffering of the UE\'s data packets for the UE
in power saving mode is performed in the control plane function of the SGW.
##### 6.1.1.10.2.2 Motivation {#motivation-2 .H6}
Following are the motivations behind the proposal to perform extended
buffering in the control plane function of the SGW:
\- Very long buffering during: The buffering may be needed for very long
duration ranging in days (e.g. 10 days). For such a long duration buffering in
user plane function may not be efficient.
\- Per subscriber different buffering duration and the packet counts: The
buffering duration depends upon the time remaining for which the UE is
expected to stay in the power saving mode, e.g. time remaining for the UE to
perform the next periodic TAU procedure. This varies for each UE. The number
of packets that needs to be buffered is part of the subscription info and can
vary for each subscriber. Thus, the buffering duration and packet counts can
vary for each subscriber and hence it requires different timer and buffering
capacity per UE. Doing this on a per UE basis would complicate the
implementation of the user plane function.
\- Resilient to the restart/failure of user plane function: Since the
buffering duration could run in days, it is more prone to loss of buffered
data in case of the restart or failure of the user plane function if the
buffering is done in the user plane function.
##### 6.1.1.10.2.3 Functionality needed from the control and user plane
function {#functionality-needed-from-the-control-and-user-plane-function .H6}
Following functionality is needed from the control plane and user plane
functions to support the extended buffering in the control plane function:
\- For the UE in power saving mode, if the control plane function decides to
activate buffering in the control plane function, it informs the user plane
function to start forwarding the downlink data packets. Correspondingly, the
downlink packets are forwarded to the control plane function by the user plane
function.
\- When the UE transition to the ECM-CONNECTED state, the control plane
function updates the user plane function with the GTP-U identity of the eNB
and also provides any buffered downlink packets, i.e. buffered downlink data
packets for which the buffering duration hasn\'t expired yet. These packets
are then forwarded by the user plane function to the eNB.
NOTE: Clause 6.1.1.13.2.4 describes various options for the format of
forwarding of data packets between the control and user plane function. As
stated in clause 6.1.1.13.2.4.2, the data packets are sent between the control
and user plane function outside of the signalling connection in both the
directions and the details are primarily defined by stage 3.
##### 6.1.1.10.3 Solution 2: Supporting extended buffering for the UE in power
saving mode in the user plane function
##### 6.1.1.10.3.1 Description {#description-11 .H6}
In this solution, the extended buffering of the UE\'s data packets for the UE
in power saving mode is performed in the SGW user plane function.
In addition, two split options are described for the throttling feature, as it
has related aspects.
##### 6.1.1.10.3.2 Motivation {#motivation-3 .H6}
Following are the motivations behind the proposal to perform extended
buffering in the user plane function of the SGW:
\- Per bearer queuing is a natural functionality in the user plane. Even if
buffering may be needed for very long duration, there is no reason that user
plane would not be efficient enough;
\- Transferring downlink packets towards the control plane SGW would result in
additional processing in both SGW-U and SGW-C;
\- Transferring downlink packets towards the control plane SGW would result in
significant load over Sx interface. In addition with the signalling load,
which is an issue on its own, it would also delay the DDN messages (and
therefore paging) of other UEs unless implementing QoS differentiation over Sx
interface.
\- This is particularly true when the SGW-U (possibly close to the UE
location) is far from the SGW-C (centralized), which is a commonly expected
scenario;
\- The packets transferred over Sx would induce load in the two directions: in
the SGW-U to SGW-C direction for buffering the packets, and in the SGW-C to
SGW-U direction for the sending of buffered packets when the UE becomes
connected.
\- Having per bearer buffering duration and packet count does not seem to be a
problem for the user plane because queuing is already managed per bearer. If
an implementation has an issue for managing timers in the user plane, the
timer can still be managed by the control plane at the price of adding a Sx
message allowing the SGW-C to request stopping extended buffering for a
certain bearer.
##### 6.1.1.10.3.3 Functionality needed from the control plane and user plane
function {#functionality-needed-from-the-control-plane-and-user-plane-function
.H6}
Following functionality is needed from the control plane and user plane
functions to support the extended buffering in the user plane function.
\- For an UE in power saving mode, if the SGW control plane function decides
to activate buffering in the control plane function, it informs the SGW user
plane function to start buffering the downlink data packets by relaying the DL
Buffering Duration and the DL Buffering Suggested Packet Count parameters (see
TS 29.274 clause 7.2.11.2) received via the DDN Ack from the MME (see TS
23.401 [2] clause 5.3.4.3).
\- When the UE changes from ECM-IDLE to ECM-CONNECTED, the SGW control plane
function updates the SGW user plane function with the GTP-U identity of the
eNB. The buffered packets are then forwarded by the SGW user plane function to
the eNB. Handling of per bearer timers can be handle by the SGW user plane
function, in which case the timers are sent via Sx interface. Alternatively,
the timers can be managed by the control plane using a specific Sx interaction
allowing the SGW-C to request the SGW-U to stop extended buffering for a
certain bearer.
\- Buffered packets are transferred directly from old to new SGW-U in case of
relocation of SGW-U.
\- Throttling mechanism (by which the MME uses DDN Ack messages with
Throttling Delay and Throttling Factor parameters), can still be handled by
the SGW control plane function:
\- On receiving DDN Ack, the SGW control plane function determines which
bearers are subject to the throttling of Downlink Data Notification Requests
on the basis of the bearer\'s ARP priority level and operator policy (as in
existing procedure).
\- For those bearers, the SGW control plane requests the SGW user plane to
start buffering or to stop buffering using a specific Sx interaction.
##### 6.1.1.10.4 Evaluation
**Solution 1: Supporting extended buffering for the UE in power saving mode in
the control plane function**
Pros:
\- Relatively simpler functionality of the (SGW) user plane function since
support for per subscriber different buffering duration and the buffer size
are not required.
\- Resilient to restart/failure of the user plane function.
\- Results in relatively less interaction between control and user plane
function, e.g. no interaction is needed if the Downlink Data Notification
messages are to be throttled and buffered packets for a subscriber need to be
discarded.
Cons:
\- Buffering support is needed in the (SGW) control plane function.
\- The buffered packets are sent between the control and user plane functions
resulting into higher data traffic over the interface between them. There is a
need for more processing in the control plane and to support QoS
differentiation between control and user plane functions to not affect delays
on signalling over Sx.
**Solution 2: Supporting extended buffering for the UE in power saving mode in
the user plane function**
Pros:
\- Buffered packets are not sent between the control and user plane functions
resulting into less data traffic over the interface between them.
\- No buffering support is required in the (SGW) control plane function.
Cons:
\- The (SGW) user plane function needs to support per subscriber different
buffering duration and buffering size, resulting into relatively complex
implementation requirement. However, this complexity can be avoided by using
the timer in control plane and adding a start/stop buffering requests from the
control plane function to the user plane function. Although this will result
in addition interaction between the control and user plane function.
\- Additional interactions between the control and user plane functions are
needed e.g. if the Downlink Data Notification messages are to be throttled and
buffered packets for a subscriber need to be discarded.
##### 6.1.1.10.5 Conclusion
Buffering of data packets can be supported in the control plane function (as
described in solution 1) or in the user plane function (as described in
solution 2). Both the alternatives have their advantages and disadvantages. In
some deployment, e.g. if there is a desire to keep the user plane
functionality simpler in order to use relatively cheaper and off-the-shelf
components, solution 1 is preferable. In other deployments, e.g. if it is
desired to reduce the data traffic between the control and user plane
functions, solution 2 is preferable. That may also depend on the UE
characteristics e.g. the size of the expected buffer required for the UE.
Based on the above analysis, it is concluded to allow the buffering of data
packets in control as well as user plane functions.
The control plane function decides (e.g. based on local configuration) to
perform buffering in either the control plane or the user plane function.
Correspondingly, following functionality are needed by the control and user
plane functions:
\- When the UE moves to ECM-IDLE state:
\- if the control plane function decides to activate buffering in the control
plane function for the session, it informs the user plane function to start
forwarding the downlink data packets. Correspondingly, the downlink packets
are forwarded to the control plane function by the user plane function.
\- if the control plane function decides to activate buffering in the user
plane function for the session, it does not informs the user plane function
about the packet forwarding. Correspondingly, the downlink packets are
buffered by the user plane function.
NOTE 1: When the UE moves to ECM-IDLE state, the control plane function has to
inform the user plane function to stop sending the data to the eNB. The above
indication - to forward the packet to the control plane function or not - is
sent during that interaction.
\- When the UE moves to ECM-CONNECTED state:
\- the control plane function updates the user plane function with the GTP-U
identity of the eNB. Additionally, if the data packets are buffered in the
control plane function and are valid (e.g. data packets for which the
buffering duration hasn\'t expired yet), it may also provide the same to the
user plane function. These packets are then forwarded by the user plane
function to the eNB.
\- the control plane function updates the user plane function with the GTP-U
identity of the eNB. The buffered packets are forwarded to the eNB by the user
plane function.
\- When the Downlink Data Notification message is to be throttled:
\- if the buffering of data packets are done in the user plane function, the
control plane function informs the user plane function to discard the buffered
packets.
NOTE 2: Further details, e.g. buffering mandatorily supported either in
control or user plane, will be defined during normative phase to avoid
deployment scenario in which buffering is not supported at all in the core
network.
#### 6.1.1.11 Considerations for 3GPP specific information at the user plane
function
##### 6.1.1.11.1 Description
This clause describes which 3GPP specific information, including subscriber\'s
and UE\'s permanent identities, should be provided or should be avoided
towards the user plane function.
##### 6.1.1.11.2 Solution 1: Not providing subscriber\'s or UE\'s permanent
identity to the user plane function
##### 6.1.1.11.2.1 Description {#description-13 .H6}
In this solution it is proposed to not provide any of the subscriber\'s or
UE\'s permanent identities to the user plane function for any of the
functionality listed in the table 4.3-1.
##### 6.1.1.11.2.2 Motivation {#motivation-4 .H6}
The user plane function may be hosted by a third-party owned low-cost data
centre closer to the RAN. Moreover, for the third-party data centre owner may
not have deployed adequate security measures as the mobile operator itself. In
that case, providing the subscriber\'s and UE\'s identity, such as IMSI, IMEI,
MSISDN etc., to the user plane function may risk the subscriber\'s privacy and
may become the regulatory issue for the mobile operator. Hence, it is proposed
to not provide any of the subscriber\'s or UE\'s identity to the user plane
function for any of the functionality listed in the table 4.3-1.
However, since some AS server may require http header enrichment, for which UE
permanent identity (e.g. IMSI, MSISDN) is added into the HTTP headers, a
solution should be provided to fulfil the requirement with no unauthorized
exposure of UE permanent identity to the user plane function.
##### 6.1.1.11.2.3 Use of temporary identifier and container between the
control and user plane {#use-of-temporary-identifier-and-container-between-
the-control-and-user-plane .H6}
There may be a need to identify and address the subscriber\'s or UE\'s
session, e.g. the PDN connection or the UE\'s session, at the user plane
function from the control plane function, e.g. the PGW control plane function
may want to release the PDN connection (and all the information belonging to
it) identified by a specific IMSI and APN. In that case a session level
temporary identifier - such that it is independent of the subscriber\'s or
UE\'s permanent identity, e.g. TEID or session ID, is used between the SGW and
PGW to identify the S5 session - should be used between the control and user
plane function.
The header enrichment information (such as UE\'s permanent Identity and other
information) can be passed from control plane function to the user plane
function in a container, instead of an Sx AVP, only if operator has ensured
the adequate security measures of the user plane function to prevent any
unauthorized exposure of the user information.
##### 6.1.1.11.2.4 Evaluation {#evaluation-3 .H6}
The user plane function is assumed to be agnostic to the mobile network
specific information, so the UE\'s temporary identifier is used between
control plane function and user plane function. In case http header enrichment
is required by the AS server, solution 1 provides a mechanism to pass UE
permanent identity in the container from control plane function to the user
plane function with no unauthorized exposure to the user plane function.
##### 6.1.1.11.2.5 Conclusion {#conclusion-3 .H6}
The assumption of the solution is that user plane function may be hosted by a
third-party. In such case, operator shall guarantee no exposure of UE privacy
to the third party, either technically or with business agreement with the 3rd
party.
If the environment is trusted, whether the user plane is deployed by operator
or the third-party, for HTTP header enrichment feature the information (such
as UE permanent Identity) should be carried in a container from control plane
function to the user plane function (if user plane function performs HTTP
header enrichment), which is transparent to the user plane function.
#### 6.1.1.12 Considerations for performing LI functionality
##### 6.1.1.12.1 Description
This clause describes solutions for item \"J\" in the table, i.e. solutions
for interfacing Legal Intercept (LI) functions through reference points
specified in TS 33.107 [6] and performing LI functionality.
##### 6.1.1.12.2 Solution 1: Terminating the LI related reference points in
the control plane function
##### 6.1.1.12.2.1 Description {#description-15 .H6}
In this solution, all the LI related reference points for EPS, as specified in
TS 33.107 [6] clause 12.1, are terminated at the control plane function:
\- Terminating X1_1 interface in control plane function
\- Terminating X2 interface in control plane function
\- Terminating X3 interface in control plane function
The interface Sxa/Sxb between control plane function and user plane function
is secured, so no eavesdropping is possible and interception
triggering/reporting remains confidential.
This solution is applicable to SGW and PGW.
##### 6.1.1.12.2.2 Motivation {#motivation-5 .H6}
##### 6.1.1.12.2.2.1 For LI reference point X1_1 {#for-li-reference-point-x1_1
.H6}
As specified in TS 33.107 [6] clause 5, the X1_1 interface is used to
activate, deactivate and interrogate the LI functionality at the SGW, PGW for
a specific UE. Further, over the X1_1 interface the information provided, such
as address of Delivery Function 2 (DF2) for the X2 interface, address of the
Delivery Function 3 (DF3) for the X3 interface, whether content of
communication is needed, etc., are related to the management the LI
functionality. And hence it is proposed to terminate the X1_1 interface in the
control plane function.
##### 6.1.1.12.2.2.2 For LI reference point X2 {#for-li-reference-point-x2
.H6}
As specified in TS 33.107 [6] clause 12.2.1.1, the information required to be
reported over the X2 interface, such as UE identities, location information,
QoS parameters, APN, PDN type, etc., are mostly information stored in the
control plane function. More importantly, as specified in TS 33.107 [6] clause
12.2.1.2 the events, such as Bearer activation, Bearer modification, Bearer
deactivation, UE requested Bearer Resource Modification etc., during which
those information are reported over the X2 interface are mostly control plane
events. Considering both these aspects, it is proposed to terminate the X2
interface in the control plane function.
##### 6.1.1.12.2.2.3 For LI reference point X3 {#for-li-reference-point-x3
.H6}
As specified in TS 33.107 [6] clause 12.2.2, the UE\'s data packet is
duplicated and a copy (without modification) along with the additional
information is provided over the X3 interface if reporting of Content of
Communication (CC) is activated.
Although it is possible to terminate the X3 interface in the user plane
function, there are following practical and functional implications:
\- There could be many user plane functions as compared to control plane
functions in the operator\'s network. Moreover, the user plane function may be
added or removed dynamically in the system (to meet the data traffic
throughput requirements) and located at the radio edge. In such a case,
terminating the X3 interface in the user plane function could be operationally
difficult, e.g. the IP connectivity between the user plane function and the
DF3 needs to be ensured.
\- The UE\'s permanent identities, e.g. IMSI, IMEI, MSISDN etc., are required
to be provided to the user plane function, specifically for supporting the LI
functionality, so that it can report the same over the X3 interface. However,
the user plane function may be hosted in the third-party owned data centre
without adequate security measures. In that case, passing the UE\'s identity
to the user plane function may risk the subscriber\'s privacy and hence the
operator may decide against it. Thus, the user plane function may not be able
to provide all the information as defined today over the X3 interface.
\- Over the X2 interface the Packet Data Header reporting event may be
activated. In that case, the packet data header information, which includes
source IP address, destination IP address, source port, destination port,
packet size, transport protocol, etc., along with other UE session related
information such as APN, location information, RAT type, etc., are required to
be provided over the X2 interface on a per packet basis (as specified in TS
33.107 [6] clause 12.4.3.17.1). To support this, the SGW and PGW function
terminating the X2 interface is required to have access to the UE session
related information as well as each and every data packet.
\- Similar to the above, Packet Data Header Summary report is required over
the X2 interface (as specified in TS 33.107 [6] clause 12.4.3.17.2). To
support this, the SGW and PGW function terminating the X2 interface is
required to have access to the UE session related information as well as
ability to summarize the data traffic on a per IP flow basis. The packet
header summary includes packet header information, number of packets and bytes
transmitted, start time, stop time, etc. of an IP flow.
Considering all of the above, it is proposed to terminate the X3 interface at
the control plane function. However, this requires higher bandwidth for the
Sxa/Sxb interfaces to transport the user data packets over it. As X3 has to
deliver all intercepted communication to the delivery function, the control
plane function now needs to support high bandwidth for this interface, worst
case as much as the user plane function. In case 1 control plane function
serves multiple user plane functions the X3 interface on the control plane
function has to deliver the intercepted content of communication of all
connected user plane functions.
##### 6.1.1.12.2.3 Functionality needed from the user plane function
{#functionality-needed-from-the-user-plane-function-1 .H6}
To generate events related to X2 and X3 interfaces from the control plane
function, the user plane function is required to duplicate and send a copy of
the UE\'s data packet to the control plane function.
##### 6.1.1.12.2.4 Architecture with LI reference points {#architecture-with-
li-reference-points .H6}
Figure 6.1.1.12.2-1: Split architecture with LI reference points
##### 6.1.1.12.2.5 Call flows {#call-flows .H6}
No specific call flows are required between control and user plane function to
support X1 reference points for LI. For supporting the X3 reference point and
some events over the X2 reference point, packet duplicator functionality is
required in the user plane function and the activation/deactivation of the
same is controlled by the control plane function.
Figure 6.1.1.12.2-2: Call flows to activate/deactivate packet duplication in
user plane function
The above call flow is applicable to SGW and PGW.
1\. The LI functionality is activated/deactivated over the X1_1 interface into
the control plane function for an UE.
2\. The control plane function checks if the Content of Communication (CC)
and/or packet header information is/are required for the UE.
3\. The control plane function activates packet duplication function in the
user plane for the UE. If the LI functionality is to be deactivated then the
control plane function deactivates the packet duplication function in the user
plane for the UE.
NOTE: The control plane uses temporary identity of the UE\'s session, e.g. 32
bit number such as TEID allocated at the start of the PDN connection between
the control and user plane, for activating/deactivating the packet duplication
functionality. It does not use any of the UE\'s permanent identities or IP
address for this purpose.
4\. When packet duplication function is activated, the user plane function
makes a copy of every uplink/downlink packet and provides it to the control
plane function. The actual packet is processed based on the other policy
applicable to the UE session.
5\. The control plane uses the copy of the packet and other information from
the UE session to generate the required event over X2 and/or X3 interfaces.
##### 6.1.1.12.3 Solution 2: Lawful interception architecture with the X3
reference points terminating at the user plane function
##### 6.1.1.12.3.1 Solution Description {#solution-description .H6}
The X1_1 is used for the activation, deactivation and interrogation of the
lawful interception functionality for a UE and provides the transport network
address information of DF2 and DF3. As this is control plane related
functionality, the X1_1 should be terminated by the S-GW/P-GW control plane
function. The instructions for packet header duplication and/or packet
duplication are forwarded to the S- GW/P-GW user plane function via the Sx
interface, together with other data like correlation information. The Sx
interface is secured so there is no possibility to detect that a UE or a
specific communication is intercepted.
The X2 interface is used to transfer the user and communication related
parameters related to the control plane of S-GW/P-GW to DF2. Consequently, the
X2 should be terminated by the S-GW/P-GW control plane function. In addition,
the packet header information (as specified in TS 33.107 [6]) may need to be
reported to DF2 over the X2 interface. This can be realized via the Sx
interface by instructing the S-GW/P-GW user plane function to report packet
header information to the S-GW/P-GW control plane function.
The X3 interface is used for transferring duplicated packets with additional
information to the DF3. The X3 interface should be terminated where the lawful
interception functionality is performed, i.e. at the S-GW/P-GW user plane
function. The new Sx interface between S-GW/P-GW control and user plane
function is used to provide the transport network address information of the
DF3 (in case it was not already pre-configured) and other data like
correlation information. In addition, the control plane of S-GW/P-GW controls
via Sx interface the packet header information reporting functionality at the
user plane function. Some kind of correlation information is probably required
so that the LI function is able to relate the duplicated packets received via
X3 with the identity of the subscriber. This correlation information can be
generated by the control plane function and provided to the user plane
function via the Sx interface when packet duplication is activated for a
subscriber. In addition, the control plane function provides the correlation
information together with the UE identity information to the LI function via
the X2 interface.
Editor\'s note: The details of the correlation information and their potential
impact on the LI system are FFS.
##### 6.1.1.12.3.2 Motivation {#motivation-6 .H6}
In solution 1, the direct reporting of duplicated packets from the user plane
function via X3 avoids any performance impacts on the control plane function
in case lawful interception is active for more than a few subscribers.
Furthermore, the risk for congestion on the Sx interface (resulting in packet
drops or high delays) can be minimized compared to the solution where many
user plane functions may have to report duplicated packets to the same control
plane function for the purpose of forwarding to the DF3.
##### 6.1.1.12.3.3 Architecture {#architecture .H6}
In this solution the control plane of SGW/PGW provides the X1_1 and X2
interfaces of LI, and the user plane of SGW/PGW provides the X3 interface.
{width="5.310416666666667in" height="3.5819444444444444in"}
Figure 6.1.1.12.3-1: LI architecture with the X3 reference points terminating
at the user plane function
##### 6.1.1.12.4 Evaluation
**Solution 1: Terminating the LI related reference points in the CP function**
Pros:
\- No need to support customer dependent X3 interface in the UP function,
hence allowing generic UP function;
\- No impact to the LI functions DF2 and DF3 and hence existing Rel-13 based
LI functions DF2 and DF3 can be used;
\- Lower configuration overhead for terminating the X3 interface in the CP
function than in the UP function.
Cons:
\- Routing user plane traffic subject to LI through the CP function may
utilize significant control plane resources depending on the number of
intercepts and the user plane traffic rate of each LI target;
\- Sx bandwidth should also be dimensioned depending on the number of
intercepts and the bandwidth of the user plane traffic of each LI target.
Alternatively, a separate interface may be used;
\- QoS for LI reporting is required to be 100% (i.e. loss of packets is not
acceptable), therefore in the case of CP function overload conditions, the LI
function must be maintained at the possible expense of other network
functions, potentially impacting network operations.
**Solution 2: Lawful interception architecture with the X3 reference points
terminating at the UP function**
Pros:
\- No need to duplicate data packets from the UP function to the CP function;
\- No need for any additional resources in the CP function;
\- No need for any additional transport resources between CP function and UP
function. No specific QoS requirements in overload conditions, hence no
additional operational constraints to existing in current deployments;
\- Since data packets are directly sent from the UP function to the LI
function DF3, the solution is relatively more efficient.
Cons:
\- The UP function needs to support customer dependent X3 interface and
protocol, making the UP function specific;
\- Need to support more X3 termination points than in solution 1;
\- Configuration overhead for terminating the X3 interface in the UP function
is relatively higher than terminating the X3 interface in the CP function.
##### 6.1.1.12.5 Conclusion
It is clear that termination of LI interfaces X1_1 and X2 shall be supported
in the control plane function. The LI interface X3 can be terminated in the
control plane function (as described in solution 1) or in the user plane
function (as described in solution 2). Both the alternatives have their
advantages and disadvantages as described in the evaluation section.
Considering the same, it is concluded that following functionality is needed
from the control and the user plane functions:
\- When the Content of Communication (CC) is needed for the X3 interface, the
control plane function informs the user plane function to duplicate the user
plane traffic and forward it to a destination (identified by e.g. an IP
address).
The above destination belongs to a logical function which is either collocated
with the control plane function or the user plane function or can be
standalone. This logical function terminates the X3 interface and it reports
the corresponding events to the LI DF3 function.
NOTE 1: SA WG3-LI will investigate defining this LI segregated interface based
on the Sx interface with possible LI specific extensions.
#### 6.1.1.13 Considerations for control of user plane forwarding
##### 6.1.1.13.1 Description
This clause describes how the control plane function can control the way the
user plane function forwards traffic, to cater for different packet forwarding
scenarios e.g. for bearer mapping, forwarding of control related user plane
packets (e.g. RS/RA, DHCPv6, RADIUS etc), FMSS, lawful intercept etc.
##### 6.1.1.13.2 Solution 1: Uniform handling of user plane forwarding to
cater for multiple forwarding scenarios
##### 6.1.1.13.2.1 Introduction {#introduction .H6}
This solution describes scenarios where the CP function needs to control how
the UP function forwards packets. No detailed solutions are provided for
messages and parameters are over the Sx reference point as this is assumed to
be covered by other solutions. Instead the provided solution describes the
generic capabilities needed by the Sx interface.
##### 6.1.1.13.2.2 Scenarios {#scenarios .H6}
One of the main tasks of the UP function is to forward user-plane packet.
There are several different scenarios for how user-plane traffic is forwarded
by the UP function. Below we illustrate a few of the possible user-plane
forwarding scenarios. Note that for simplicity, the figures below only show a
single CP function and a single UP function. Some scenarios are applicable to
SGW only or PGW only, while other scenarios are applicable to SGW and PGW or
PGW and TDF.
Figure 6.1.1.13-1: Example scenarios for user plane traffic forwarding
Editor\'s note: Additional scenarios not shown in the Figure above may also
need to be considered, e.g. related to user-data over S11 for CIoT.
##### 6.1.1.13.2.3 Control of user-plane forwarding {#control-of-user-plane-
forwarding .H6}
##### 6.1.1.13.2.3.1 General {#general .H6}
The CP function controls user-plane packet forwarding by providing traffic
handling instructions to the UP function. The traffic handling instructions
include:
\- Packet filter description; and
\- Forwarding information.
The packet filter description includes IP filter parameters that describe what
traffic is subject to the forwarding. This may e.g. include IP header
parameters. The detailed content may depend on the scenario. For bearer
mapping the packet filter description will contain the SDF filter / TFT or
Application ID. For RS/RA, DHCPv4/v6, RADIUS, Diameter etc the packet filter
description will contain IP filters matching the relevant protocols such as
RS/RA, DHCPv4/v6, RADIUS etc.
The forwarding information describes how the UP function shall treat a packet
that matches the packet filter description. The details of the forwarding
information will depend on the scenario.
The forwarding information categories that need to be supported are further
described in the table below.
Table 6.1.1.13.2.3.1-1: Forwarding information for different scenarios
+---+-----------------------+-----------------------+---------------+ | | Scenario description | Forwarding | Applicable to | | | | information | | +---+-----------------------+-----------------------+---------------+ | 1 | Forwarding of | Reference to an | SGW, PGW | | | user-plane between UE | active bearer (e.g. | | | | and PDN, including | F-TEID) | | | | mapping onto GTP-U | | | | | tunnels and mapping | | | | | between GTP-U tunnels | | | +---+-----------------------+-----------------------+---------------+ | 2 | Forwarding of IP | Information that the | PGW | | | address allocation | CP function is | | | | related user-plane | source/target | | | | packets (e.g. RS/RA, | | | | | DHCPv4/v6) between UE | | | | | and CP function | | | +---+-----------------------+-----------------------+---------------+ | 3 | Forwarding of RADIUS, | Information that the | PGW | | | Diameter and DHCP | CP function is | | | | signalling between | source/target | | | | the external PDN / | | | | | SGi and the CP | | | | | function | | | +---+-----------------------+-----------------------+---------------+ | 4 | Forwarding of packets | Information that the | SGW | | | subject to extended | CP function is | | | | buffering of UEs in | source/target | | | | PSM, per solution in | | | | | clause 6.1.1.10.2 | | | +---+-----------------------+-----------------------+---------------+ | 5 | Duplication and | Indication that | SGW, PGW | | | forwarding of | traffic is to be | | | | user-plane packets | duplicated. | | | | subject to legal | | | | | interception | Reference to a target | | | | | for the duplicated | | | | | traffic (e.g. | | | | | reference to CP | | | | | function or LI | | | | | system) | | +---+-----------------------+-----------------------+---------------+ | 6 | Forwarding of packets | Reference to a | PGW, TDF | | | between the UP | predefined traffic | | | | function and the | steering | | | | SGi-LAN for Flexible | configuration (e.g. | | | | Mobile Service | Traffic-Steering | | | | Chaining | Policy identifier) | | +---+-----------------------+-----------------------+---------------+
Editor\'s note: Scenarios 4 and 5 for extended buffering and LI are shown as
examples based on solution proposals in the TR. The solutions for extended
buffering and LI are still under discussion.
##### 6.1.1.13.2.3.2 Functionality required from control plane and user plane
{#functionality-required-from-control-plane-and-user-plane .H6}
The CP function provides the traffic description and requests one of the
following functionality from the UP function:
\- Apply GTP-U bearer related handling, i.e. encapsulation, de-capsulation or
both. (This covers scenario 1 above).
\- Forward the traffic to the CP function (This covers scenario 2, 3, 4
above).
\- The above functionality but applicable to the duplicated traffic packets.
(This covers scenario 5 above).
\- Apply locally configured policy for traffic steering. (This covers scenario
6 above).
It is assumed that the details of the forwarding information will be primarily
defined in stage 3.
##### 6.1.1.13.2.4 Format of forwarded user plane data {#format-of-forwarded-
user-plane-data .H6}
##### 6.1.1.13.2.4.1 General {#general-1 .H6}
The user-plane traffic that is forwarded (sent/received) by the UP function
needs to be encapsulated in a suitable way in order to be identifiable in the
receiving side. How this is done also depends on the scenario. The user-plane
forwarding format is already determined by existing standards for some of the
scenarios above.
For forwarding between the CP function and UP function there is however a need
to define a format as part of the solutions to CUPS. Two main alternatives are
possible:
1\. Forwarding of the UP packet within the signalling connection between UP
function and CP function i.e. by encapsulating the user-plane packet in a
control message.
2\. Forwarding of the UP packet outside of the signalling connection.
In alternative 1 the CP function and UP function would encapsulate the user-
plane packet in a control message and forward it to the other entity. How this
would be done in detail depends on what control protocol is eventually
selected for the CP-UP interface.
In alternative 2 the CP function and UP function would forward the UP packet
outside of the signalling connection, e.g. by encapsulating the user-plane
packet using a UP encapsulation format (e.g. GTP-U, GRE, etc).
Depending on whether the scenarios 4 and 5 are selected, the amount of user-
plane traffic may be considerable. In those scenarios 4 and 5, alternative 1
does not seem as a suitable approach. Also, since most control protocols (e.g.
GTP-C, Diameter, OpenFlow etc) are not designed to carry user-plane traffic,
alternative 1 does not seem as a suitable approach. Alternative 2 on the other
hand would allow user-plane forwarding separate from the control protocol over
Sx and would be aligned with the other scenarios described above. This makes
alternative 2 preferable over alternative 1.
The table below summarizes the different user-plane forwarding formats.
Table 6.1.1.13.2.4.1-1: User-plane forwarding formats
* * *
\"interface\" from UP function User-plane format Applicable scenarios
Applicable entities Towards UE GTP-U 1 SGW, PGW Between UP function and CP
function UP encapsulation outside of the control protocol. Encapsulation
format to be determined by stage 3. 2,3,4,5 SGW, PGW Between UP function and
PDN Not specified by 3GPP 1,3,6 PGW Between UP function and SGi-LAN Not
specified by 3GPP 6 PGW, TDF Between UP function and LI system (for the LI
solution with X3 terminated in the UP function as described in clause
6.1.1.12.3) Per LI specifications 5 SGW, PGW
* * *
Editor\'s note: Scenarios 4 and 5 for extended buffering and LI are shown as
examples based on solution proposals in the TR. The solutions for extended
buffering and LI are still under discussion.
##### 6.1.1.13.2.4.2 Functionality required from control plane and user plane
{#functionality-required-from-control-plane-and-user-plane-1 .H6}
Forwarding of the UP packet outside of the signalling connection in both the
directions.
It is assumed that the above details will be primarily defined in stage 3.
##### 6.1.1.13.2.5 Motivation {#motivation-7 .H6}
There are multiple scenarios where different parts of a UE\'s user-plane
traffic as well as other in-band traffic need to be forwarded in different
ways. Defining a special procedure and handling for each of these scenarios
risk creating an inflexible and restricted standard that is also cumbersome to
extend when new scenarios appear. For example, there may be more scenarios
that require considerations that have not been included in the analysis above,
such as GTP-U error indications that are more in stage-3 scope as well as CIoT
aspects for user-data over S11. By having a generic way to control different
types of user-plane forwarding scenarios, and forwarding the user-plane
packets outside of the control-plane session, it is possible to achieve a more
flexible and extensible procedure over the Sx reference point.
#### 6.1.1.14 Procedures over Sx Reference Points
Following procedures are necessary for the interactions between control and
user plane functions. The procedures are described in a general way and can
thus be applied between SGW-C and SGW-U, PGW-C and PGW-U as well as TDF-C and
TDF-U.
##### 6.1.1.14.1 Sx Management Procedures
##### 6.1.1.14.1.1 Sx Setup Procedure {#sx-setup-procedure .H6}
Since the user plane function may be added or removed dynamically in the
system and there are considerably more user plane than the control plane
functions, ideally the user plane function should initiate the connection to
the control plane function, for the purpose of exchange of e.g. identities of
the user plane function for communication, the features supported by user
plane function, etc.
This requires that the user plane function is provisioned with the identities
of the control plane functions e.g. FQDN or IP address so that it can connect
to the control plane function when initiating this procedure.
NOTE 1: It is the operator\'s policy which control plane functions are
configured in a specific user plane function.
The procedure is always initiated by the user plane function and applied in
the following situations:
\- User plane function power on;
\- User plane function restart;
\- User plane function detecting the control plane function failure;
Editor\'s note: Whether there is a need/scenario for initiating the Sx Setup
Procedure from the control plane function is FFS.
Figure 6.1.1.14.1.1-1: Sx setup procedure
The user plane function starts the procedure by sending a Sx SETUP REQUEST
message (user plane function ID, features supported) to the control plane
function. The control plane function responds with a Sx SETUP RESPONSE message
(control plane function ID, node level reporting instructions). Node level
reporting instructions indicate to the user plane function how reporting of
node level events has to be done (e.g. load/overload status, time interval
between two reports).
The exchanged Sx configuration data shall be stored in the respective node and
erases any previously existing Sx configuration data in the two nodes and
replaces it by the new one received.
When this procedure is finished, the Sx interface is operational and other Sx
messages can be exchanged.
NOTE 2: The detailed information exchanged during Sx setup procedure can be
specified in stage 3.
##### 6.1.1.14.1.2 Sx Configuration Update Procedure {#sx-configuration-
update-procedure .H6}
The purpose of the Sx Configuration Update procedure is to enable the control
plane function to update Sx configuration data needed by the user plane
function to interoperate correctly.
Figure 6.1.1.14.1.2-1: Sx configuration update procedure
The control plane function starts the procedure by sending a Sx CONFIGURATION
UPDATE REQUEST message (control plane function ID, node level reporting
instructions) to the user plane function. The user plane function responds
with a Sx CONFIGURATION UPDATE RESPONSE message (user plane function ID). Node
level reporting instructions indicate to the user plane function how reporting
of node level events has to be done.
This procedure erases any previously existing Sx configuration data in the
user plane function and replaces it by the new one received.
##### 6.1.1.14.1.3 Sx Release Procedure {#sx-release-procedure .H6}
The Sx release procedure is initiated by the user plane function with the
purpose of notifying the control plane function that it cannot provide
services any longer (not partial failure), due to e.g. OAM reasons.
Figure 6.1.1.14.1.3-1: Sx release procedure
The user plane function starts the procedure by sending a Sx RELEASE REQUEST
message (user plane function ID) to the control plane function. The control
plane function responds with a Sx RELEASE RESPONSE message.
##### 6.1.1.14.2 Sx Session Management Procedures
##### 6.1.1.14.2.1 General {#general-2 .H6}
Sx session management procedures are used during UE\'s PDN connection (IP-CAN)
/ TDF session establishment, modification and termination procedures to
control the functionality of user plane function defined in clause 6.1.1.
The following Sx session management procedures exist: Sx session establishment
procedure, Sx session modification procedure, and Sx session termination
procedure. All of them are initiated by the control plane function.
Editor\'s note: Additional procedures (or types of interaction) may be
required and will be added when identified.
##### 6.1.1.14.2.2 Sx Session Establishment Procedure {#sx-session-
establishment-procedure .H6}
The Sx session establishment procedure is used to create the initial state of
a PDN connection (IP-CAN) / TDF session at the user plane function.
During PDN connection establishment (i.e. during attach or UE requested PDN
connectivity procedure), the Sx session establishment procedure is executed
between SGW-C and SGW-U, PGW-C and PGW-U as well as TDF-C and TDF-U. The state
information comprises the parameters for the default bearer of the PDN
connection for SGW-U and PGW-U as well as IP-CAN/TDF session related
parameters for PGW-U/TDF-U.
During SGW-U relocation, the Sx session establishment procedure is executed
between SGW-C and the target SGW-U. The state information comprises the
parameters for the default as well as every dedicated bearer of the PDN
connection.
Figure 6.1.1.14.2.2-1: Sx session establishment procedure
The control plane function starts the procedure by sending a Sx session
establishment request message (control plane function ID, Sx session ID, list
of parameters) to the user plane function. The user plane function responds
with a Sx session establishment response message (user plane function ID, Sx
session ID, list of response parameters). List of parameters contains the
structured control information which defines how the user plane function needs
to behave (e.g. Reporting Events, Bearer ID, Rule ID, Detection information,
Measurement key, Measurement threshold). List of response parameters contains
any information that the user plane function has to provide to the control
plane function in response to the control information received.
##### 6.1.1.14.2.3 Sx Session Modification Procedure {#sx-session-
modification-procedure .H6}
The Sx session modification procedure is used to update the state of the
existing PDN connection (IP-CAN) / TDF session at the user plane function.
The Sx session modification procedure is executed between SGW-C and SGW-U as
well as PGW-C and PGW-U during dedicated bearer activation procedure, bearer
modification procedure, bearer deactivation procedure as well as UE requested
bearer resource modification procedure.
The Sx session modification procedure is also executed between PGW-C and PGW-U
as well as TDF-C and TDF-U whenever IP-CAN/TDF session related parameters for
PGW-U/TDF-U have to be modified.
Figure 6.1.1.14.2.3-1: Sx session modification procedure
The control plane function starts the procedure by sending a Sx session
modification request message (control plane function ID, Sx session ID, list
of parameters) to the user plane function. List of parameters contains the
structured control information which defines how the user plane function needs
to behave (e.g. Reporting Events, Bearer ID, Rule ID, Detection information,
Measurement key, Measurement threshold).
The user plane function identifies the session to be modified indicated by the
user plane session ID. Then, the user plane function updates the parameters of
this user plane session according to the list of parameters sent by the
control plane function.
The user plane function responds with a Sx session modification response
message (user plane function ID, Sx session ID, list of response parameters).
List of response parameters contains any information that the user plane
function has to provide to the control plane function in response to the
control information received .
##### 6.1.1.14.2.4 Sx Session Termination Procedure {#sx-session-termination-
procedure .H6}
The Sx session termination procedure is used to remove the state of the
existing PDN connection (IP-CAN) / TDF session created at the user plane
function.
Figure 6.1.1.14.2.4-1: Sx session termination procedure
The control plane function starts the procedure by sending a Sx session
termination request message (control plane function ID, Sx session ID) to the
user plane function.
The user plane function identifies the session to be terminated indicated by
the Sx session ID. Then, the user plane function removes the whole state
information related to this Sx session.
The user plane function responds with a Sx session termination response
message (user plane function ID, Sx session ID, list of response parameters).
List of response parameters contains any information that the user plane
function has to provide to the control plane function in response to the
control information received (e.g. measurement reports).
Editor\'s note: It is FFS whether this procedure can be triggered by user
plane function.
##### 6.1.1.14.3 Sx reporting procedure
This procedure is used by the user plane function to report events related to
the node level and/or individual user plane sessions.
Figure 6.1.1.14.3-1: Sx reporting procedure
The user plane function detects that an event has to be reported and starts
the procedure by sending a Sx Report message (user plane function ID, list of
[event, status]) to the control plane function. The control plane function
responds with a Sx report ACK message (control plane function ID). The event
parameter contains the name of the event and the corresponding control plane
function ID or user plane session ID. The status parameter contains the actual
information the control plane function is interested in (e.g. the load status
of the node, the measured traffic volume, the detected application ID).
The following events can be reported:
Type 1: Node level events:
\- load/overload status;
\- etc.
Type 2: Sx session related events:
\- measurement report;
\- start/stop of application detection (PGW-U and TDF-U only);
\- detection of 1st downlink data for a bearer for the purpose of paging idle-
mode UE (SGW-U only);
\- detection of the user plane traffic which needs to be handled by the
control plane function, e.g. DHCP/ IPv6 router messages;
\- etc.
Editor\'s note: Handling of DHCP/IPv6 router messages between user plane
function and control plane function are FFS.
Editor\'s note: Whether the node level reporting and session level reporting
need separate procedures is FFS.
##### 6.1.1.14.4 Conclusion
**Sx management procedures:**
Clause 6.1.1.14.1 proposes the management procedures related to the Sx
interface. However, the management of the interface is highly dependent upon
the protocol used over the Sx interface, e.g. with GTP-C like protocol, there
may not be any node level procedure but the node level information is
exchanged either as part of Sx session level procedures or as part of node-
keep-alive messages; with Diameter like protocol, there may be some node level
procedures such as capability exchange at the time of initial connection
establishment. In summary, the exact nature of the Sx interface management
procedures is difficult to define before selecting the protocol over the Sx
interface. Now, since stage 3 groups are responsible for the Sx protocol
selection, it will not be possible for stage 2 group to conclude the Sx
interface management procedures before stage 3 groups conclude their work.
Thus, it is concluded to normatively define any necessary Sx interface
management procedures only after the stage 3 groups conclude their work.
**Sx session management procedures:**
Clause 6.1.1.14.2 proposes some of the basic the Sx session management
procedures. Besides these procedures, more procedures may be required for the
Sx session management, e.g. some notification (e.g. when the UE moves to idle
mode) so that the user plane function stops forwarding the data packets to the
eNB; notification to send End Marker message etc. All these procedures would
be defined as needed during the normative phase of work and it is concluded to
not comprehensively define all the Sx session management procedures during the
study phase.
**Sx reporting procedures:**
Clause 6.1.1.14.3 proposes Sx reporting procedures which include node level
information as well as session level information reporting from the user plane
function to the control plane function. The exact nature of the node level
information reporting will be based on stage 3 conclusion. For the session
level information reporting, there may be need for more procedures, e.g. some
notification from the user plane to the control plane when the user plane
function is not able to enforce some rules or action, etc. All these
procedures would be defined as needed during the normative phase of work and
it is concluded to not comprehensively define all the Sx reporting procedures
during the study phase.
#### 6.1.1.15 Parameters for Sx Reference Points
Editor\'s note: The following Sx parameter tables represent the current state
of the work. Parameters/statements in Italic require further discussion.
Further parameters may need to be added. The parameter structure is still
under discussion. Another example of parameter structure is shown in Annex B.
##### 6.1.1.15.1 Parameters related to general UP function management
These parameters are used in the general UP function management procedures
between SGW-C and SGW-U, PGW-C and PGW-U as well as TDF-C and TDF-U.
Node ID: unique identifier of user plane function or control plane function
Supported features: indicates the features and capabilities supported by the
user plane function (in case of SGW-U, this has to include the supported
service area(s))
Node level reporting instructions: indicate to the user plane function how
reporting of node level events has to be done, i.e. what to report (e.g.
load/overload status) and under what constraints (e.g. minimum time interval
between consecutive reports for Sx load management and control of accounting
accuracy, maximum time between consecutive reports for control of load status
information updates).
Node level events: contains the state information of the user plane function
as requested by the control plane function in the node level reporting
instructions.
Table 6.1.1.15-1: Parameters for general UP function management
+-------+-------+-------+-------+-------+-------+-------+-------+-------+ | Proc | Sx | Sx | Sx | Sx | | | | | | edure | Setup | Con | Re | R | | | | | | | Proc | figur | lease | eport | | | | | | | edure | ation | Proc | Proc | | | | | | | | U | edure | edure | | | | | | | | pdate | | | | | | | | | | Proc | | | | | | | | | | edure | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | Me | UP | CP | CP | UP | UP | CP | UP | CP | | ssage | fun | fun | fun | fun | fun | fun | fun | fun | | | ction | ction | ction | ction | ction | ction | ction | ction | | Para | Re | Res | Re | Res | Re | Res | R | Ack | | meter | quest | ponse | quest | ponse | quest | ponse | eport | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | Node | X | X | | | X | | X | | | ID | | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | Supp | X | | | | | | | | | orted | | | | | | | | | | fea | | | | | | | | | | tures | | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | Node | | X | X | | | | | | | level | | | | | | | | | | repo | | | | | | | | | | rting | | | | | | | | | | in | | | | | | | | | | struc | | | | | | | | | | tions | | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | Node | | | | | | | X | | | level | | | | | | | | | | e | | | | | | | | | | vents | | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+
##### 6.1.1.15.2 Parameters related to Sx session management
These parameters are used to control user plane functionality related to
individual PDN connections in the Sx session management procedures as well as
to inform about user plane session events. As the functionality of the
respective user plane functions differs, most parameters are specific to one
or two of the reference points Sxa (between SGW-C and SGW-U), Sxb (PGW-C and
PGW-U) and Sxc (TDF-C and TDF-U).
The Sx session management procedures however will use their relevant
parameters in the same way for all Sx reference points: the Sx session
establishment procedure as well as the Sx session modification procedure
provide the control parameters to the user plane function, the Sx session
termination procedure removes all control parameters related to a user plane
session and the Sx report procedure informs the control plane function about
events related to the user plane session that are detected by the user plane
function.
Editor\'s note: In the below parameter structure example, the CP function
provides the user plane session management related parameters in a
hierarchical structure. At minimum, parameters for the user plane session, for
one bearer and for one flow have to be provided. Unmarked Sx parameters refer
to exiting parameters documented in TS 23.401 [2] or TS 23.203 [4] (sometimes
with small changes in the name). Parameters marked with GENERALIZED represent
a combination of existing parameters or refer to a functionality that is more
general than what is controlled by the existing parameter. There are also
parameters marked with NEW which are introduced to control functionality at
the UP function that belongs to specific interface or entity functionality.
Furthermore, identifiers for the user plane session, the bearers and the flows
are introduced to enable efficient parameter provisioning and modification by
CP function as well as UP function reporting.
Table 6.1.1.15-2: Parameters for Sx session management
+-------+-------+-------+-------+-------+-------+-------+-------+ | | Node | SGW | PGW | TDF | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | Sx | * | CP | UP | CP | UP | CP | UP | | Para | _Mess | fun | fun | fun | fun | fun | fun | | meter | age_ _| ction | ction | ction | ction | ction | ction | | | | Re | Resp | Re | Resp | Re | Resp | | |__Des | quest | onse, | quest | onse, | quest | onse, | | | cript | | R | | R | | R | | | ion_ _| | eport | | eport | | eport | +-------+-------+-------+-------+-------+-------+-------+-------+ | Node | Uni | X | X | X | X | X | X | | ID | quely | | | | | | | | | ident | | | | | | | | ** | ifies | | | | | | | | NEW_ _| a | | | | | | | | | node | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | | User | | | | | | | | | Plane | | | | | | | | | Se | | | | | | | | | ssion | | | | | | | | | re | | | | | | | | | lated | | | | | | | | | param | | | | | | | | | eters | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | User | Uni | X | X | X | X | X | X | | Plane | quely | | | | | | | | Se | ident | | | | | | | | ssion | ifies | | | | | | | | ID | a | | | | | | | | | user | | | | | | | | ** | plane | | | | | | | | NEW_ _| se | | | | | | | | | ssion | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | Se | Inst | | | X | | X | | | ssion | ructs | | | | | | | | MBR | the | | | (UL/D | | (TDF | | | | UP | | | L-APN | | se | | | | fun | | | AMBR) | | ssion | | | | ction | | | | | UL/DL | | | | to | | | | | -MBR) | | | | en | | | | | | | | | force | | | | | | | | | this | | | | | | | | | se | | | | | | | | | ssion | | | | | | | | | MBR | | | | | | | | | in | | | | | | | | | UL/DL | | | | | | | | | dire | | | | | | | | | ction | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | C | In | | | X | | | | | orrel | forms | | | | | | | | ation | the | | | (APN | | | | | ID | UP | | | AMBR) | | | | | for | fun | | | | | | | | Se | ction | | | | | | | | ssion | about | | | | | | | | MBR | com | | | | | | | | e | bined | | | | | | | | nforc | e | | | | | | | | ement | nforc | | | | | | | | | ement | | | | | | | | ** | of | | | | | | | | NEW_ _| se | | | | | | | | | ssion | | | | | | | | | MBR | | | | | | | | | for | | | | | | | | | mul | | | | | | | | | tiple | | | | | | | | | user | | | | | | | | | plane | | | | | | | | | ses | | | | | | | | | sions | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | Event | De | X | X | X | X | X | X | | tr | fines | | | | | | | | igger | the | (_ | _( | | | | | | | e | Start | Start | | | | | | ( | vents | /stop | /stop | | | | | | Usage | which | of | of | | | | | | r | the | tr | tr | | | | | | eport | UP | affic | affic | | | | | | for | fun | detec | detec | | | | | | thre | ction | tion_ | tion _| | | | | | shold | shall |_ used | _used | | | | | | rea | d | for_ | for | | | | | | ched, | etect | _r | r | | | | | | Usage | and | eport | eport | | | | | | r | r | of | of | | | | | | eport | eport | 1^st^ | 1st | | | | | | for | | p | p | | | | | | per | | acket | acket | | | | | | iodic | | in | in | | | | | | me | | bea | bea | | | | | | asure | | rer)_ | rer)_| | | | | | ment, | | | | | | | | | Usage | | | | | | | | | r | | | | | | | | | eport | | | | | | | | | for | | | | | | | | | imme | | | | | | | | | diate | | | | | | | | | req | | | | | | | | | uest, | | | | | | | | | Start | | | | | | | | | /stop | | | | | | | | | of | | | | | | | | | tr | | | | | | | | | affic | | | | | | | | | detec | | | | | | | | | tion) | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | | M | | | | | | | | | easur | | | | | | | | | ement | | | | | | | | | Key | | | | | | | | | re | | | | | | | | | lated | | | | | | | | | param | | | | | | | | | eters | | | | | | | | | (one | | | | | | | | | or | | | | | | | | | more | | | | | | | | | sets | | | | | | | | | per | | | | | | | | | User | | | | | | | | | plane | | | | | | | | | se | | | | | | | | | ssion | | | | | | | | | ID) | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | M | Uni | X | X | X | X | X | X | | easur | quely | | | | | | | | ement | ident | | | | | | | | Key | ifies | | | | | | | | | a | | | | | | | |__GEN | m | | | | | | | | ERALI | easur | | | | | | | | ZED_ _| ement | | | | | | | | | type. | | | | | | | | (Cha | The | | | | | | | | rging | CP | | | | | | | | Key, | fun | | | | | | | | Monit | ction | | | | | | | | oring | uses | | | | | | | | Key) | the | | | | | | | | | m | | | | | | | | | easur | | | | | | | | | ement | | | | | | | | | key | | | | | | | | | to | | | | | | | | | group | | | | | | | | | flows | | | | | | | | | that | | | | | | | | | share | | | | | | | | | a | | | | | | | | | c | | | | | | | | | ommon | | | | | | | | | m | | | | | | | | | easur | | | | | | | | | ement | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | M | De | X | | X | | X | | | easur | fines | | | | | | | | ement | the | (_ +p | | | | | | | thre | unit | acket | | | | | | | shold | to be | drops | | | | | | | (vol | mea | for | | | | | | | ume/t | sured | pause | | | | | | | ime/e | and | of | | | | | | | vent) | the | charg | | | | | | | | cri | ing _) | | | | | | | | teria | | | | | | | | | when | | | | | | | | | to | | | | | | | | | r | | | | | | | | | eport | | | | | | | | | for | | | | | | | | | this | | | | | | | | | m | | | | | | | | | easur | | | | | | | | | ement | | | | | | | | | key | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | M | De | | X | | X | | X | | easur | fines | | | | | | | | ement | the | | | | | | | | i | mea | | | | | | | | nform | sured | | | | | | | | ation | vo | | | | | | | | | lume/ | | | | | | | | | time/ | | | | | | | | | event | | | | | | | | | for | | | | | | | | | this | | | | | | | | | m | | | | | | | | | easur | | | | | | | | | ement | | | | | | | | | key | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | Per | De | X | | X | | X | | | iodic | fines | | | | | | | | m | the | | | | | | | | easur | point | | | | | | | | ement | in | | | | | | | | thre | time | | | | | | | | shold | for | | | | | | | | (e.g. | se | | | | | | | | timeo | nding | | | | | | | | fday) | a | | | | | | | | | per | | | | | | | | ** | iodic | | | | | | | | NEW_ _| r | | | | | | | | | eport | | | | | | | | | for | | | | | | | | | this | | | | | | | | | m | | | | | | | | | easur | | | | | | | | | ement | | | | | | | | | key | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | Inact | De | X | | X | | X | | | ivity | fines | | | | | | | | dete | the | | | | | | | | ction | p | | | | | | | | time | eriod | | | | | | | | | of | | | | | | | | | time | | | | | | | | | after | | | | | | | | | which | | | | | | | | | the | | | | | | | | | time | | | | | | | | | m | | | | | | | | | easur | | | | | | | | | ement | | | | | | | | | shall | | | | | | | | | stop, | | | | | | | | | if no | | | | | | | | | pa | | | | | | | | | ckets | | | | | | | | | are | | | | | | | | | rece | | | | | | | | | ived. | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | * |_ De | | | _X_ | | _X_ | | | Subse | fines | | | | | | | | quent | the | | | | | | | | m | crit | | | | | | | | easur | eria _| | | | | | | | ement |_ when | | | | | | | | thre | to | | | | | | | | shold | r | | | | | | | | (volu | eport | | | | | | | | me/ti | for | | | | | | | | me/ev | this | | | | | | | | ent)_| m | | | | | | | | | easur | | | | | | | | | ement | | | | | | | | | key | | | | | | | | | for | | | | | | | | | the | | | | | | | | | p | | | | | | | | | eriod | | | | | | | | | after | | | | | | | | | the | | | | | | | | | M | | | | | | | | | easur | | | | | | | | | ement | | | | | | | | | time_ | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | | B | | | | | | | | | earer | | | | | | | | | level | | | | | | | | | re | | | | | | | | | lated | | | | | | | | | param | | | | | | | | | eters | | | | | | | | | (one | | | | | | | | | or | | | | | | | | | more | | | | | | | | | sets | | | | | | | | | per | | | | | | | | | User | | | | | | | | | plane | | | | | | | | | se | | | | | | | | | ssion | | | | | | | | | ID) | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | B | Uni | X | | X | | | | | earer | quely | | | | | | | | ID | ident | | | | | | | | | ifies | | | | | | | | ( | the | | | | | | | | repre | be | | | | | | | | sents | arer, | | | | | | | | as | w | | | | | | | | well | ithin | | | | | | | | Al | a | | | | | | | | lowed | user | | | | | | | | A | plane | | | | | | | | ccess | se | | | | | | | | Type) | ssion | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | Local | TEID | | X | | | | | | F | and | | | | | | | | -TEID | IP | | | | | | | | (core | ad | | | | | | | | side) | dress | | | | | | | | | of UP | | | | | | | | | fun | | | | | | | | | ction | | | | | | | | | on | | | | | | | | | core | | | | | | | | | side | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | Local | TEID | | X | | X | | | | F | and | | | | | | | | -TEID | IP | | | | | | | | (a | ad | | | | | | | | ccess | dress | | | | | | | | side) | of UP | | | | | | | | | fun | | | | | | | | | ction | | | | | | | | | on | | | | | | | | | a | | | | | | | | | ccess | | | | | | | | | side | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | R | TEID | X | | X | | | | | emote | and | | | | | | | | F | IP | | | | | | | | -TEID | ad | | | | | | | | (a | dress | | | | | | | | ccess | of | | | | | | | | side) | peer | | | | | | | | | e | | | | | | | | | ntity | | | | | | | | | on | | | | | | | | | a | | | | | | | | | ccess | | | | | | | | | side | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | R | TEID | X | | | | | | | emote | and | | | | | | | | F | IP | | | | | | | | -TEID | ad | | | | | | | | (core | dress | | | | | | | | side) | of | | | | | | | | | peer | | | | | | | | | e | | | | | | | | | ntity | | | | | | | | | on | | | | | | | | | core | | | | | | | | | side | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | Outer | Inst | X | | X | | | | | h | ructs | | | | | | | | eader | the | | | | | | | | cre | UP | | | | | | | | ation | fun | | | | | | | | | ction | | | | | | | | (a | to | | | | | | | | ccess | add | | | | | | | | side) | an | | | | | | | | | outer | | | | | | | | ** | h | | | | | | | | NEW**| eader | | | | | | | | | (I | | | | | | | | | P+UDP | | | | | | | | | +GTP) | | | | | | | | | to | | | | | | | | | the | | | | | | | | | out | | | | | | | | | going | | | | | | | | | pa | | | | | | | | | ckets | | | | | | | | | on | | | | | | | | | a | | | | | | | | | ccess | | | | | | | | | side | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | Outer | Inst | X | | | | | | | h | ructs | | | | | | | | eader | the | | | | | | | | cre | UP | | | | | | | | ation | fun | | | | | | | | | ction | | | | | | | | (core | to | | | | | | | | side) | add | | | | | | | | | an | | | | | | | | ** | outer | | | | | | | | NEW** | h | | | | | | | | | eader | | | | | | | | | (I | | | | | | | | | P+UDP | | | | | | | | | +GTP) | | | | | | | | | to | | | | | | | | | the | | | | | | | | | out | | | | | | | | | going | | | | | | | | | pa | | | | | | | | | ckets | | | | | | | | | on | | | | | | | | | core | | | | | | | | | side | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | Outer | Inst | X | | X | | | | | h | ructs | | | | | | | | eader | the | ( | | ( | | | | | ma | UP | DSCP) | | DSCP) | | | | | rking | fun | | | | | | | | (a | ction | | | | | | | | ccess | to | | | | | | | | side) | mark | | | | | | | | **GEN | the | | | | | | | | ERALI | outer | | | | | | | | ZED** | h | | | | | | | | | eader | | | | | | | | | (IP) | | | | | | | | | on | | | | | | | | | a | | | | | | | | | ccess | | | | | | | | | side | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | Outer | Inst | X | | | | | | | h | ructs | | | | | | | | eader | the | ( | | | | | | | ma | UP | DSCP) | | | | | | | rking | fun | | | | | | | | (core | ction | | | | | | | | side) | to | | | | | | | | **GEN | mark | | | | | | | | ERALI | the | | | | | | | | ZED** | outer | | | | | | | | | h | | | | | | | | | eader | | | | | | | | | (IP) | | | | | | | | | on | | | | | | | | | core | | | | | | | | | side | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | B | Inst | | | X | | | | | earer | ructs | | | | | | | | MBR | the | | | | | | | | | UP | | | | | | | | **GEN | fun | | | | | | | | ERALI | ction | | | | | | | | ZED** | to | | | | | | | | | en | | | | | | | | | force | | | | | | | | | this | | | | | | | | | b | | | | | | | | | earer | | | | | | | | | MBR | | | | | | | | | in | | | | | | | | | UL/DL | | | | | | | | | dire | | | | | | | | | ction | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | n | In | _X_ | | X | | | | | onGBR | forms | | | | | | | | indic | the | | | | | | | | ation | UP | | | | | | | | | fun | | | | | | | | _(QoS | ction | | | | | | | | class | that | | | | | | | | id | the | | | | | | | | entif | b | | | | | | | | ier)_ | earer | | | | | | | | | is | | | | | | | | **GEN | su | | | | | | | | ERALI | bject | | | | | | | | ZED** | to | | | | | | | | | Se | | | | | | | | | ssion | | | | | | | | | MBR | | | | | | | | | e | | | | | | | | | nforc | | | | | | | | | ement | | | | | | | | | | | | | | | | | | * | | | | | | | | | (Only | | | | | | | | | req | | | | | | | | | uired | | | | | | | | | if UP | | | | | | | | | fun | | | | | | | | | ction | | | | | | | | | per | | | | | | | | | forms | | | | | | | | | res | | | | | | | | | ource | | | | | | | | | ma | | | | | | | | | nagem | | | | | | | | | ent)_| | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ |_ B | _Only |_ X _| |_ X _| | | | | earer | req | | | | | | | | GBR_ | uired | | | | | | | | | if UP | | | | | | | | | fun | | | | | | | | | ction | | | | | | | | | per | | | | | | | | | forms | | | | | | | | | res | | | | | | | | | ource | | | | | | | | | m | | | | | | | | | anage | | | | | | | | | ment _| | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ |_ ARP _|_ Only | _X_ | | _X_ | | | | | | req | | | | | | | | | uired | | | | | | | | | if UP | | | | | | | | | fun | | | | | | | | | ction | | | | | | | | | per | | | | | | | | | forms | | | | | | | | | res | | | | | | | | | ource | | | | | | | | | m | | | | | | | | | anage | | | | | | | | | ment _| | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ |_ D | _Inst | | | | | | | | uplic | ructs | | | | | | | | ation | the | | | | | | | | and | UP | | | | | | | | f | fun | | | | | | | | orwar | ction | | | | | | | | ding_ | to | | | | | | | | | dupl | | | | | | | | ** | icate | | | | | | | | NEW**| a | | | | | | | | | nd/or | | | | | | | | | fo | | | | | | | | | rward | | | | | | | | | the | | | | | | | | | pa | | | | | | | | | cket _| | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | * |_ Con | | | | | | | | Forwa | tains | | | | | | | | rding | the | | | | | | | | de | end | | | | | | | | stina | point | | | | | | | | tion* | for | | | | | | | | | the | | | | | | | | ** | forwa | | | | | | | | NEW** | rding | | | | | | | | | (CP | | | | | | | | | fun | | | | | | | | | ction | | | | | | | | | if | | | | | | | | | para | | | | | | | | | meter | | | | | | | | | is | | | | | | | | | abs | | | | | | | | | ent)_| | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ |_ Se | _Tri |_ X _| |_ X _| | | | | nding | ggers | | | | | | | | of | the | | | | | | | | \"end | UP | | | | | | | | mark | fun | | | | | | | | er\"_ | ction | | | | | | | | | to | | | | | | | | _(or | c | | | | | | | | cr | reate | | | | | | | | eated | and | | | | | | | | by CP | sen | | | | | | | | fun | d-out | | | | | | | | ction | GTP-u | | | | | | | | and | pa | | | | | | | | sent | ckets | | | | | | | | to UP | with | | | | | | | | fun | e | | | | | | | | ction | nd-ma | | | | | | | | tog | rker_ | | | | | | | | ether | | | | | | | | | with | | | | | | | | | forwa | | | | | | | | | rding | | | | | | | | | inst | | | | | | | | | ructi | | | | | | | | | on?)_| | | | | | | | | | | | | | | | | | ** | | | | | | | | | NEW_ _| | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | | Flow | | | | | | | | | level | | | | | | | | | re | | | | | | | | | lated | | | | | | | | | param | | | | | | | | | eters | | | | | | | | | (one | | | | | | | | | or | | | | | | | | | more | | | | | | | | | sets | | | | | | | | | per | | | | | | | | | B | | | | | | | | | earer | | | | | | | | | ID) | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | Rule | Uni | X | | X | | X | | | ID | quely | | | | | | | | | ident | | | | | | | |__GEN | ifies | | | | | | | | ERALI | the | | | | | | | | ZED_ _| rule, | | | | | | | | | w | | | | | | | | | ithin | | | | | | | | | a | | | | | | | | | user | | | | | | | | | plane | | | | | | | | | se | | | | | | | | | ssion | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | Dete | C | X | | X | | X | | | ction | ombin | | | | | | | | i | ation | | | ( | | | | | nform | of UE | | |_ TEID | | | | | ation | IP | | | in UL | | | | | | add | | | f | | | | | **GEN | ress, | | | ilter | | | | | ERALI | F- | | | for | | | | | ZED** | TEID, | | | UL | | | | | | SDF | | | b | | | | | _P | fil | | | earer | | | | | otent | ters, | | | bi | | | | | ially | a | | | nding | | | | | split | pplic | | | veri | | | | | per | ation | | | ficat | | | | | direc | ID | | | ion,_ | | | | | tion/ | for | | | | | | | | inter | tr | | | _UE | | | | | face_ | affic | | | IP as | | | | | | dete | | | s | | | | | | ction | | | ource | | | | | | | | | in UL | | | | | | | | | f | | | | | | | | | ilter | | | | | | | | | for | | | | | | | | | p | | | | | | | | | acket | | | | | | | | | s | | | | | | | | | creen | | | | | | | | | ing _) | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | Prece | Deter | | | X | | X | | | dence | mines | | | | | | | | | the | | | | | | | | | o | | | | | | | | | rder, | | | | | | | | | in | | | | | | | | | which | | | | | | | | | the | | | | | | | | | dete | | | | | | | | | ction | | | | | | | | | i | | | | | | | | | nform | | | | | | | | | ation | | | | | | | | | of | | | | | | | | | all | | | | | | | | | rules | | | | | | | | | is | | | | | | | | | app | | | | | | | | | lied. | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | No | Inst | | | X | X | X | X | | tific | ructs | | | | | | | | ation | UP | | | | | | | | of | fun | | | | | | | | Start | ction | | | | | | | | /Stop | to | | | | | | | | | r | | | | | | | | | eport | | | | | | | | | appl | | | | | | | | | icati | | | | | | | | | on\'s | | | | | | | | | start | | | | | | | | | or | | | | | | | | | stop. | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | One | The | X | | X | | X | | | or | CP | | | | | | | | more | fun | | | | | | | | M | ction | | | | | | | | easur | uses | | | | | | | | ement | the | | | | | | | | Key | m | | | | | | | | for | easur | | | | | | | | flow | ement | | | | | | | | level | key | | | | | | | | monit | to | | | | | | | | oring | group | | | | | | | | | flows | | | | | | | |__GEN | that | | | | | | | | ERALI | share | | | | | | | | ZED_ _| a | | | | | | | | | c | | | | | | | | (Cha | ommon | | | | | | | | rging | m | | | | | | | | Key, | easur | | | | | | | | Monit | ement | | | | | | | | oring | under | | | | | | | | Key) | con | | | | | | | | | sider | | | | | | | | | ation | | | | | | | | | of | | | | | | | | | the | | | | | | | | | req | | | | | | | | | uired | | | | | | | | | cha | | | | | | | | | rging | | | | | | | | | and | | | | | | | | | usage | | | | | | | | | monit | | | | | | | | | oring | | | | | | | | | on | | | | | | | | | flow | | | | | | | | | l | | | | | | | | | evel. | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | 2nd | The | | | X | | X | | | M | CP | | | | | | | | easur | fun | | | | | | | | ement | ction | | | | | | | | key | uses | | | | | | | | for | the | | | | | | | | se | 2^nd^ | | | | | | | | ssion | m | | | | | | | | level | easur | | | | | | | | monit | ement | | | | | | | | oring | key | | | | | | | | | to | | | | | | | |__GEN | group | | | | | | | | ERALI | flows | | | | | | | | ZED_ _| that | | | | | | | | | share | | | | | | | | (in | a | | | | | | | | stead | c | | | | | | | | of | ommon | | | | | | | | Indic | m | | | | | | | | ation | easur | | | | | | | | of | ement | | | | | | | | excl | on | | | | | | | | usion | IP-CA | | | | | | | | from | N/TDF | | | | | | | | se | se | | | | | | | | ssion | ssion | | | | | | | | level | level | | | | | | | | m | | | | | | | | | onito | | | | | | | | | ring) | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | 3rd | The | | | X | | | | | M | CP | | | | | | | | easur | fun | | | | | | | | ement | ction | | | | | | | | key | uses | | | | | | | | for | the | | | | | | | | inc | 3^rd^ | | | | | | | | oming | m | | | | | | | | UL | easur | | | | | | | | tr | ement | | | | | | | | affic | key | | | | | | | | monit | to | | | | | | | | oring | group | | | | | | | | | flows | | | | | | | | ** | that | | | | | | | | NEW_ _| share | | | | | | | | | a | | | | | | | | | c | | | | | | | | | ommon | | | | | | | | | m | | | | | | | | | easur | | | | | | | | | ement | | | | | | | | | on | | | | | | | | | b | | | | | | | | | earer | | | | | | | | | level | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | Gate | Inst | | | X | | X | | | s | ructs | | | | | | | | tatus | the | | | | | | | | UL/DL | UP | | | | | | | | ( | fun | | | | | | | | open, | ction | | | | | | | | c | to | | | | | | | | lose, | let | | | | | | | | * | the | | | | | | | | close | flow | | | | | | | | after | pass | | | | | | | | m | or to | | | | | | | | easur | block | | | | | | | | ement | the | | | | | | | | rep | flow | | | | | | | | ort_) | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | Flow | Inst | | | X | | X | | | MBR | ructs | | | | | | | | | the | | | | | | | | | UP | | | | | | | | | fun | | | | | | | | | ction | | | | | | | | | to | | | | | | | | | en | | | | | | | | | force | | | | | | | | | this | | | | | | | | | flow | | | | | | | | | MBR | | | | | | | | | in | | | | | | | | | UL/DL | | | | | | | | | dire | | | | | | | | | ction | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | Inner | Inst | | | | | X | | | h | ructs | | | | | | | | eader | the | | | | | ( | | | ma | UP | | | | | DSCP) | | | rking | fun | | | | | | | | (a | ction | | | | | | | | ccess | to | | | | | | | | side, | mark | | | | | | | | DL) | the | | | | | | | | **GEN | inner | | | | | | | | ERALI | h | | | | | | | | ZED** | eader | | | | | | | | | (IP) | | | | | | | | | on | | | | | | | | | a | | | | | | | | | ccess | | | | | | | | | side | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | Inner | Inst | | | X | | X | | | h | ructs | | | | | | | | eader | the | | | ( | | ( | | | ma | UP | | | FMSS) | | FMSS) | | | rking | fun | | | | | | | | (core | ction | | | | | | | | side, | to | | | | | | | | U | mark | | | | | | | | L/DL) | the | | | | | | | | **GEN | inner | | | | | | | | ERALI | h | | | | | | | | ZED** | eader | | | | | | | | | (IP) | | | | | | | | | on | | | | | | | | | core | | | | | | | | | side | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | Outer | Inst | | | X | | | | | h | ructs | | | | | | | | eader | the | | | (SCI | | | | | ma | UP | | | in | | | | | rking | fun | | | GTP | | | | | (a | ction | | | he | | | | | ccess | to | | | ader) | | | | | side) | mark | | | | | | | | **GEN | the | | | | | | | | ERALI | outer | | | | | | | | ZED** | h | | | | | | | | | eader | | | | | | | | | (GTP) | | | | | | | | | on | | | | | | | | | a | | | | | | | | | ccess | | | | | | | | | side | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | _F |_ Inst | | | _X_ | _X_ | _X_ | | | orwar | ructs | | | | | | | | ding _| the | | | * | * |_( | | | | UP | | | (DHCP | (DHCP | FMSS, | | | (al | fun | | | and | and | Red | | | ways, | ction | | | IPv6 | IPv6 | irect | | | * | to | | | r | r | ion)_| | | after | fo | | | outer | outer | | | | m | rward | | | mes | mess | | | | easur | the | | | sage, | age)_ | | | | ement | pac | | | FMSS, | | | | | rep | kets _| | | Red | | | | | ort_) | | | | irect | | | | | | | | | ion)_| | | | | ** | | | | | | | | | NEW_ _| | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | * |_ Con | | | _X_ | | _X_ | | | Forwa | tains | | | | | | | | rding | the | | | _(Red | |_(Red | | | de | end | | | irect | | irect | | | stina | point | | | Des | | Des | | | tion _| for | | | tinat | | tinat | | | | the | | | ion)_ | | ion)_| | | ** | forwa | | | | | | | | NEW_ _| rding | | | | | | | | | (CP | | | | | | | | | fun | | | | | | | | | ction | | | | | | | | | if | | | | | | | | | para | | | | | | | | | meter | | | | | | | | | is | | | | | | | | | abs | | | | | | | | | ent)_ | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+
##### 6.1.1.15.3 Conclusion
**UP function management related parameters:**
Clause 6.1.1.15.1 proposes the UP function management related parameters.
Based on the conclusion for the \"Sx management procedures\" in clause
6.1.1.14.4, it is concluded to normatively define any necessary UP function
management related parameters only after the stage 3 groups conclude their
work and after any necessary Sx interface management procedures are captured
in stage 2.
**Parameters related to Sx session management:**
There are two alternative proposals for the Sx session management related
parameters: proposal in clause 6.1.1.15.2 and proposal in Annex B. Both the
proposals cover more or less same set of parameters and it should be possible
to extend both the proposals to include any missing parameters. Moreover, it
is assumed that both the proposals can cater to the unified Sx interface
requirement to support collocated control plane function of SGW and PGW and
collocated user plane function of SGW and PGW. The detail analysis of each and
every parameters proposed in both the proposals are not done and it could be
performed during the normative phase.
The main difference between the two proposals is the grouping of the
parameters. Proposal in clause 6.1.1.15.2 aims at defining hierarchical
grouping structure while proposal in Annex B aims at defining component based
grouping structure.
It is concluded to revisit further evaluation during the normative phase while
concluding with one of the two proposals for the grouping of the parameters.
#### 6.1.1.16 Application of Sx session management procedures to existing
procedures
Sx session management procedures are used between the separated CP and UP
functions of the S-GW, P-GW and TDF during the process of PDN Connectivity
establishment and deactivation, as well as bearer modification and termination
under the control of CP function.
Sx session management procedures include the procedures for session
establishment, modification and termination as are defined in 6.1.1.14.2.
The following tables list how the Sx session management procedures are
applicable to existing procedures, which include messages that trigger the
execution of functionalities regarding to Sx session management in SGW/PGW/TDF
and the list of those functionalities.
NOTE 0: The steps shown in below tables denote the messages which trigger the
execution of Sx session management functionalities, i.e., after the steps, Sx
session management functionalities are executed.
Table 6.1.1.16-1: Sx Session Management Procedures in related EPC procedures\
(refer to TS 23.401 [2])
+---------+---------+---------+---------+---------+---------+---------+ | | SGW | PGW | | | | | +---------+---------+---------+---------+---------+---------+---------+ | | Session | Session | Session | Session | Session | Session | | | Establ | Modif | Term | Establ | Modif | Term | | | ishment | ication | ination | ishment | ication | ination | +---------+---------+---------+---------+---------+---------+---------+ | Attach | Step | Step | Step | Step | | | | (5.3.2) | 12: | 23: | 7/10: | 13: | | | | | | | | | | | | | SGW | S1-U | session | PGW | | | | | session | F-TEID | info | session | | | | | setup | update | release | setup | | | | | | | info | | | | | | (Note | | | (Note | | | | | 1) | | | 6) | | | +---------+---------+---------+---------+---------+---------+---------+ | T | Step 8: | | Step | | Step 9: | | | racking | | | 18: | | | | | Area | SGW | | | | S5-U | | | Update | session | | session | | F-TEID | | | pr | setup | | info | | Update | | | ocedure | | | release | | | | | with | (Note | | (Old | | | | | Serving | 1) | | SGW) | | | | | GW | | | | | | | | change | | | | | | | | (5 | | | | | | | | .3.3.1) | | | | | | | +---------+---------+---------+---------+---------+---------+---------+ | T | Step 7: | Step | Step | | Step 8: | | | racking | | 12: | 18: | | | | | Area | SGW | | | | S5-U | | | Update | session | S1-U | session | | F-TEID | | | pr | setup | F-TEID | info | | Update | | | ocedure | | update | release | | | | | with | (Note | (new | (Old | | | | | Serving | 1) | SGW) | SGW) | | | | | GW | | | | | | | | change | | Step | | | | | | and | | 15: | | | | | | data | | | | | | | | for | | S1-U | | | | | | warding | | F-TEID | | | | | | (5. | | update | | | | | | 3.3.1A) | | (Old | | | | | | | | SGW) | | | | | +---------+---------+---------+---------+---------+---------+---------+ | E-UTRAN | | Step 9: | | | | | | T | | | | | | | | racking | | S1-U | | | | | | Area | | F-TEID | | | | | | Update | | update | | | | | | without | | | | | | | | Sâ€‘GW | | | | | | | | Change | | | | | | | | (5 | | | | | | | | .3.3.2) | | | | | | | +---------+---------+---------+---------+---------+---------+---------+ | Routing | | Step 7 | | | | | | Area | | | | | | | | Update | | SGSN | | | | | | with | | F-TEID | | | | | | MME | | update | | | | | | inte | | | | | | | | raction | | | | | | | | and | | | | | | | | without | | | | | | | | Sâ€‘GW | | | | | | | | change | | | | | | | | (5 | | | | | | | | .3.3.3) | | | | | | | +---------+---------+---------+---------+---------+---------+---------+ | Routing | Step 7: | | Step | | Step 8: | | | Area | | | 16: | | | | | Update | SGW | | | | S5-U | | | with | session | | session | | F-TEID | | | MME | setup | | info | | Update | | | inte | | | release | | | | | raction | (Note | | (Old | | | | | and | 2) | | SGW) | | | | | with | | | | | | | | Sâ€‘GW | | | | | | | | change | | | | | | | | (5 | | | | | | | | .3.3.6) | | | | | | | +---------+---------+---------+---------+---------+---------+---------+ | UE | | Step 8: | | | | | | tr | | | | | | | | iggered | | S1-U | | | | | | Service | | F-TEID | | | | | | Request | | update | | | | | | (5 | | | | | | | | .3.4.1) | | | | | | | +---------+---------+---------+---------+---------+---------+---------+ | S1 | | | Step 2: | | | | | Release | | | | | | | | (5.3.5) | | | session | | | | | | | | info | | | | | | | | release | | | | +---------+---------+---------+---------+---------+---------+---------+ | UE-in | | | Step 7: | | | Step 6: | | itiated | | | | | | | | Detach | | | session | | | session | | pr | | | info | | | info | | ocedure | | | release | | | release | | for | | | | | | | | E-UTRAN | | | | | | | | (5.3 | | | | | | | | .8.2.1) | | | | | | | +---------+---------+---------+---------+---------+---------+---------+ | UE-in | | | Step 7: | | | Step 6: | | itiated | | | | | | | | Detach | | | session | | | session | | pr | | | info | | | info | | ocedure | | | release | | | release | | for | | | | | | | | GERA | | | | | | | | N/UTRAN | | | | | | | | with | | | | | | | | ISR | | | | | | | | ac | | | | | | | | tivated | | | | | | | | (5.3 | | | | | | | | .8.2.2) | | | | | | | +---------+---------+---------+---------+---------+---------+---------+ | MME-in | | | Step 7: | | | Step 6: | | itiated | | | | | | | | Detach | | | session | | | session | | pr | | | info | | | info | | ocedure | | | release | | | release | | (5 | | | | | | | | .3.8.3) | | | | | | | +---------+---------+---------+---------+---------+---------+---------+ | SGSN-in | | | Step 7: | | | Step 6: | | itiated | | | | | | | | Detach | | | session | | | session | | pr | | | info | | | info | | ocedure | | | release | | | release | | with | | | | | | | | ISR | | | | | | | | ac | | | | | | | | tivated | | | | | | | | (5. | | | | | | | | 3.8.3A) | | | | | | | +---------+---------+---------+---------+---------+---------+---------+ | HSS-in | | | Step 5: | | | Step 4: | | itiated | | | | | | | | Detach | | | session | | | session | | pr | | | info | | | info | | ocedure | | | release | | | release | | (5 | | | | | | | | .3.8.4) | | | | | | | +---------+---------+---------+---------+---------+---------+---------+ | De | Step 2: | | | Step 1: | | | | dicated | | | | | | | | bearer | SGW | | | QoS | | | | act | session | | | setup | | | | ivation | setup | | | | | | | (5.4.1) | | | | | | | | | (Note | | | | | | | | 3) | | | | | | +---------+---------+---------+---------+---------+---------+---------+ | PDN GW | | Step 2: | | | Step 1: | | | in | | | | | | | | itiated | | QoS | | | QoS | | | bearer | | update | | | update | | | modif | | | | | | | | ication | | | | | | | | with | | | | | | | | bearer | | | | | | | | QoS | | | | | | | | update | | | | | | | | (5 | | | | | | | | .4.2.1) | | | | | | | +---------+---------+---------+---------+---------+---------+---------+ | HSS | | Step | | | Step 3: | | | In | | 2b: | | | | | | itiated | | | | | QoS | | | Sub | | QoS | | | update | | | scribed | | update | | | | | | QoS | | | | | | | | Modif | | | | | | | | ication | | | | | | | | (5 | | | | | | | | .4.2.2) | | | | | | | +---------+---------+---------+---------+---------+---------+---------+ | PDN GW | | Step 2: | | | Step 1: | | | in | | | | | | | | itiated | | TFT | | | TFT | | | bearer | | update | | | update | | | modif | | | | | | | | ication | | | | | | | | without | | | | | | | | bearer | | | | | | | | QoS | | | | | | | | update | | | | | | | | (5.4.3) | | | | | | | +---------+---------+---------+---------+---------+---------+---------+ | PDN GW | | Step | Step | | Step 9: | Step 9: | | in | | 8b: | 8b: | | | | | itiated | | | | | bearer | session | | bearer | | bearer | session | | info | info | | deact | | info | info | | release | release | | ivation | | release | release | | | | | (5 | | | | | (Note | (Note | | .4.4.1) | | (Note | (Note | | 4) | 5) | | | | 4) | 5) | | | | +---------+---------+---------+---------+---------+---------+---------+ | MME | | Step 8: | | | Step 9: | | | In | | | | | | | | itiated | | bearer | | | bearer | | | De | | info | | | info | | | dicated | | release | | | release | | | Bearer | | | | | | | | Deact | | | | | | | | ivation | | | | | | | | (5 | | | | | | | | .4.4.2) | | | | | | | +---------+---------+---------+---------+---------+---------+---------+ | E-UTRAN | | Step 2: | | | | | | in | | | | | | | | itiated | | S1-U | | | | | | E-RAB | | F-TEID | | | | | | modif | | update | | | | | | ication | | | | | | | | (5.4.7) | | | | | | | +---------+---------+---------+---------+---------+---------+---------+ | X | | Step 2: | | | | | | 2-based | | | | | | | | h | | S1-U | | | | | | andover | | F-TEID | | | | | | without | | update | | | | | | Serving | | | | | | | | GW | | | | | | | | rel | | | | | | | | ocation | | | | | | | | (5.5 | | | | | | | | .1.1.2) | | | | | | | +---------+---------+---------+---------+---------+---------+---------+ | X | Step 2: | | Step | | Step 8: | | | 2-based | | | 7a: | | | | | h | SGW | | | | S5-U | | | andover | session | | session | | F-TEID | | | with | setup | | info | | Update | | | Serving | | | release | | | | | GW | (Note | | (Source | | | | | rel | 1) | | SGW) | | | | | ocation | | | | | | | | (5.5 | | | | | | | | .1.1.3) | | | | | | | +---------+---------+---------+---------+---------+---------+---------+ | S | Step 4: | Step | Step | | Step | | | 1-based | | 15: | 19c: | | 16: | | | ha | SGW | | | | | | | ndover, | session | S1-U | session | | S5-U | | | normal | setup | F-TEID | info | | F-TEID | | | (5.5 | ( | update | release | | Update | | | .1.2.2) | target) | | (Source | | | | | | | | SGW) | | | | | | (Note | | | | | | | | 1) | | Step | | | | | | | | 21a: | | | | | | Step 6: | | | | | | | | | | session | | | | | | S1-U | | info | | | | | | F-TEID | | release | | | | | | ass | | (target | | | | | | ignment | | SGW, | | | | | | (target | | for | | | | | | SGW, | | i | | | | | | for | | ndirect | | | | | | i | | for | | | | | | ndirect | | warding | | | | | | for | | tunnel) | | | | | | warding | | | | | | | | tunnel) | | | | | | +---------+---------+---------+---------+---------+---------+---------+ | S | Step 4: | | Step 7: | | | | | 1-based | | | | | | | | ha | SGW | | session | | | | | ndover, | session | | info | | | | | Reject | setup | | release | | | | | (5.5 | ( | | (target | | | | | .1.2.3) | target) | | SGW) | | | | | | | | | | | | | | (Note | | | | | | | | 1) | | | | | | +---------+---------+---------+---------+---------+---------+---------+ | UE | Step 2: | Step 5: | | Step 3: | | | | re | | | | | | | | quested | SGW | QoS | | PGW | | | | PDN | session | update | | session | | | | conne | setup | | | setup | | | | ctivity | ( | Step | | | | | | ( | target) | 13: | | (Note | | | | 5.10.2) | | | | 6) | | | | | (Note | S1-U | | | | | | | 1) | F-TEID | | | | | | | | update | | | | | +---------+---------+---------+---------+---------+---------+---------+ | UE or | | | Step 4: | | | Step 3: | | MME | | | | | | | | re | | | session | | | session | | quested | | | info | | | info | | PDN | | | release | | | release | | discon | | | | | | | | nection | | | | | | | | ( | | | | | | | | 5.10.3) | | | | | | | +---------+---------+---------+---------+---------+---------+---------+ | MME | Step 2: | | | | Step | Step | | tr | | | | | 16: | 6a: | | iggered | SGW | | | | | | | Serving | session | | | | S5-U | session | | GW | setup | | | | F-TEID | info | | rel | (new | | | | Update | release | | ocation | SGW) | | | | | (old | | ( | | | | | | SGW) | | 5.10.4) | (Note | | | | | | | | 1) | | | | | | +---------+---------+---------+---------+---------+---------+---------+ | Note 1: | | | | | | | | SGW | | | | | | | | session | | | | | | | | setup | | | | | | | | for | | | | | | | | this | | | | | | | | pr | | | | | | | | ocedure | | | | | | | | i | | | | | | | | ncludes | | | | | | | | the | | | | | | | | pro | | | | | | | | cedures | | | | | | | | of S1-U | | | | | | | | F-TEID | | | | | | | | assi | | | | | | | | gnment, | | | | | | | | QoS | | | | | | | | setup, | | | | | | | | usage | | | | | | | | re | | | | | | | | porting | | | | | | | | setup | | | | | | | | and | | | | | | | | others. | | | | | | | | | | | | | | | | Note 2: | | | | | | | | SGW | | | | | | | | session | | | | | | | | setup | | | | | | | | for | | | | | | | | this | | | | | | | | pr | | | | | | | | ocedure | | | | | | | | i | | | | | | | | ncludes | | | | | | | | the | | | | | | | | pro | | | | | | | | cedures | | | | | | | | of S4-U | | | | | | | | F-TEID | | | | | | | | assi | | | | | | | | gnment, | | | | | | | | QoS | | | | | | | | setup, | | | | | | | | usage | | | | | | | | re | | | | | | | | porting | | | | | | | | setup | | | | | | | | and | | | | | | | | others. | | | | | | | | | | | | | | | | Note 3: | | | | | | | | SGW | | | | | | | | session | | | | | | | | setup | | | | | | | | for | | | | | | | | this | | | | | | | | pr | | | | | | | | ocedure | | | | | | | | i | | | | | | | | ncludes | | | | | | | | the | | | | | | | | pro | | | | | | | | cedures | | | | | | | | of S5-U | | | | | | | | F-TEID | | | | | | | | assi | | | | | | | | gnment, | | | | | | | | QoS | | | | | | | | setup, | | | | | | | | usage | | | | | | | | re | | | | | | | | porting | | | | | | | | setup | | | | | | | | and | | | | | | | | others. | | | | | | | | | | | | | | | | Note 4: | | | | | | | | If | | | | | | | | default | | | | | | | | bearer | | | | | | | | be | | | | | | | | longing | | | | | | | | to a | | | | | | | | PDN | | | | | | | | con | | | | | | | | nection | | | | | | | | is not | | | | | | | | deact | | | | | | | | ivated, | | | | | | | | Sx | | | | | | | | session | | | | | | | | is | | | | | | | | updated | | | | | | | | of the | | | | | | | | release | | | | | | | | of | | | | | | | | de | | | | | | | | dicated | | | | | | | | b | | | | | | | | earers. | | | | | | | | | | | | | | | | Note 5: | | | | | | | | If the | | | | | | | | default | | | | | | | | bearer | | | | | | | | be | | | | | | | | longing | | | | | | | | to a | | | | | | | | PDN | | | | | | | | con | | | | | | | | nection | | | | | | | | is | | | | | | | | deact | | | | | | | | ivated, | | | | | | | | the PDN | | | | | | | | GW | | | | | | | | deac | | | | | | | | tivates | | | | | | | | all | | | | | | | | bearers | | | | | | | | be | | | | | | | | longing | | | | | | | | to the | | | | | | | | PDN | | | | | | | | conn | | | | | | | | ection, | | | | | | | | the Sx | | | | | | | | session | | | | | | | | is also | | | | | | | | re | | | | | | | | leased. | | | | | | | | | | | | | | | | Note 6: | | | | | | | | PGW | | | | | | | | session | | | | | | | | setup | | | | | | | | for | | | | | | | | this | | | | | | | | pr | | | | | | | | ocedure | | | | | | | | i | | | | | | | | ncludes | | | | | | | | the | | | | | | | | pro | | | | | | | | cedures | | | | | | | | of S5-U | | | | | | | | F-TEID | | | | | | | | assi | | | | | | | | gnment, | | | | | | | | UE IP | | | | | | | | assi | | | | | | | | gnment, | | | | | | | | QoS | | | | | | | | setup, | | | | | | | | usage | | | | | | | | re | | | | | | | | porting | | | | | | | | setup | | | | | | | | and | | | | | | | | others. | | | | | | | +---------+---------+---------+---------+---------+---------+---------+
Table 6.1.1.16-2: User Plane Session Management Procedures in PCC related
procedures\ (refer to TS 23.203 [4])
+---------+---------+---------+---------+---------+---------+---------+ | | PGW | TDF | | | | | +---------+---------+---------+---------+---------+---------+---------+ | | Session | Session | Session | Session | Session | Session | | | Establ | Modif | Term | Establ | Modif | Term | | | ishment | ication | ination | ishment | ication | ination | +---------+---------+---------+---------+---------+---------+---------+ | IPâ€‘CAN | Step | | | Step 3: | | | | Session | 14: | | | | | | | Establ | | | | ADC | | | | ishment | PCC | | | rule | | | | (7.2) | rule | | | author | | | | | author | | | ization | | | | | ization | | | | | | | | | | | Step 10 | | | | | Step 16 | | | | | | | | | | | usage | | | | | usage | | | re | | | | | re | | | porting | | | | | porting | | | setup | | | | | setup | | | | | | +---------+---------+---------+---------+---------+---------+---------+ | UE | | | Step 5 | | | Step 9 | | in | | | | | | | | itiated | | | PCC | | | ADC | | IPâ€‘CAN | | | rules | | | rules | | Session | | | removal | | | removal | | term | | | | | | | | ination | | | usage | | | usage | | (7.3.1) | | | re | | | re | | | | | porting | | | porting | | | | | stop | | | stop | +---------+---------+---------+---------+---------+---------+---------+ | GW | | | Step 10 | | | Step 11 | | (PCEF) | | | | | | | | in | | | PCC | | | ADC | | itiated | | | rules | | | rules | | IPâ€‘CAN | | | removal | | | removal | | Session | | | | | | | | term | | | usage | | | usage | | ination | | | re | | | re | | (7.3.2) | | | porting | | | porting | | | | | stop | | | stop | +---------+---------+---------+---------+---------+---------+---------+ | IPâ€‘CAN | | Step 11 | | | Step 10 | | | Session | | | | | | | | Modifi | | PCC | | | usage | | | cation; | | rules | | | re | | | GW | | update | | | porting | | | (PCEF) | | | | | update | | | in | | Step 19 | | | | | | itiated | | | | | Step 11 | | | (7.4.1) | | Usage | | | | | | | | re | | | ADC | | | | | porting | | | rules | | | | | update | | | update | | +---------+---------+---------+---------+---------+---------+---------+ | IPâ€‘CAN | | Step 12 | | | Step 5 | | | Session | | | | | | | | Modifi | | PCC | | | ADC | | | cation; | | rules | | | rules | | | PCRF | | update | | | update | | | in | | | | | | | | itiated | | Step 15 | | | Step 7 | | | (7.4.2) | | | | | | | | | | usage | | | usage | | | | | re | | | re | | | | | porting | | | porting | | | | | update | | | update | | +---------+---------+---------+---------+---------+---------+---------+
Editor\'s note: Sx procedure definition is the work on progress, the above 2
table only list the preliminary features in each procedure, other aspects,
e.g. bearer mapping, forwarding of control related user plane packets (e.g.
RS/RA, DHCPv6, RADIUS etc), FMSS, lawful intercept etc., are FFS, and they
will be revisited during normative work.
Editor\'s note: How the Session management procedures are applicable for
non-3GPP access related procedures are FFS.
Editor\'s note: How the Session management procedures are applicable for CIoT
related procedures are FFS.
#### 6.1.1.17 Consideration for activation/deactivation of predefined PCC/ADC
rules
##### 6.1.1.17.1 Description
This clause describes solutions for item F.14 in the table, i.e. solutions for
Predefined PCC/ADC rules storage and operation.
The following aspects will be studied:
\- What are the usages of the predefined rules and where they are stored
(control plane or user plane);
\- How the predefined rules are activated and deactivated.
##### 6.1.1.17.2 Solution 1: Activation/deactivation either in control plane
only or in both control plane and user plane
Considering current PCC/ADC mechanism, bearer binding has to be performed in
control plane, so control plane node needs to interpret the PCC/ADC rules to
associate a service data flow to the IPâ€‘CAN bearer, i.e. Service data flow
template IE of the rules has to be known to the control plane node.
Additionally, some of the predefined PCC rules are used for application
detection and redirection, so it is more efficient to store them in the user
plane. Therefore, there are 2 types of pre-defined rules:
\- Predefined rules that apply only to control plane. These rules are locally
stored in the CP function of the PGW/TDF;
\- Predefined rules that apply to both control plane (CP) and user plane (UP).
In that case, a subset of rules for CP enforcement actions (e.g. bearer
binding) are stored in CP; the other subset of the rules (e.g. Application ID,
monitoring key, MBR, etc.) for UP enforcement actions are stored in UP.
Traffic detection filters which can\'t be acquired dynamically over Gx/Sd
interface (e.g. traffic detection filters beyond IP 5 Tuples) are stored in
UP. Upon activation of the rules received over Gx/Sd, CP handles it locally
and activates rules in UP with sending the enforcement rules, and UP reports
to CP of the detected traffic and events based on received CP enforcement
rules.
The PCRF should not have to know the difference between these different types
of predefined rules. It simply activates / deactivates pre-defined rules over
Gx/Sd. Activation and deactivation of predefined PCC/ADC rules could be
controlled by PCRF by providing an identifier of the relevant PCC/ADC rule to
the control plan functional entity via the Gx/Sd reference point.
Thus the Control Plane has upon reception of a PCC rule referring to
predefined rules to discriminate which predefined rules address the CP and
which predefined rules address both the CP and the UP.
\- Activation / deactivation of predefined rules that apply only to control
plane is handled locally by the CP functionality
\- Activation / deactivation of predefined rules that apply to both control
plane (CP) and user plane (UP) requires both a local action at the CP
functionality and the transfer of an Activation / deactivation request and the
enforcement rules over Sx to the UP functionality
##### 6.1.1.17.3 Evaluation & Conclusion
The enforcement, storage and activation/deactivation of the predefined PCC/ADC
rules depend on the nature and usage of the rules, therefore based on the
activation of a predefined rule from the PCRF, the CP function shall be able
to
\- provide traffic filter information (that may correspond to a SDF filter or
to Application-id) and instructions to the UP function for traffic handling in
the UP function
\- activate / deactivate predefined user plane policies in the UP function
NOTE: The forwarding of traffic to/from the CP function for enforcement of
predefined PCC/ADC rules will be further analysed during normative work.
### 6.1.2 Solution 2: Functional split for combined S/P-GW (key issue #1)
Since selection of a combined SGW/PGW is allowed and documented in TS 23.401
[2] specification, it shall remain possible in a deployment with separated
control and user planes, as the separation of control and user planes should
be at equivalent features.
Figure 6.1.1-1 in clause 6.1.1 indicates separated Sxa and Sxb reference
points for PGW and SGW. When PGW and SGW are combined, it shall be possible to
avoid fully separated Sxa and Sxb interfaces compared to not combined PGW and
SGW scenario. This can be handled by e.g. having the same protocols for both
Sxa and Sxb with appropriate message structure for Sx management procedures
and Sx Session management procedures.
Figure 6.1.2-1: Handling of CP-UP interfacing with combined SGW/PGW
## 6.2 Solutions to key issue 2: Selection mechanism for user plane functional
entities
### 6.2.1 Solution 1 - User plane selection by the control plane of the
corresponding functional entity
#### 6.2.1.1 Description
##### 6.2.1.1.1 General
The high level principle of this solution is to keep the logic for the
selection mechanism of the user plane for a given functional entity with the
control plane of the corresponding functional entity.
The selection of user plane functional entity should consider the following
user plane functional entity deployment scenarios:
\- Centralized in the core network;
\- Distributed at the edge network above RAN;
\- Distributed at the edge RAN local network, as a stand-alone entity.
Based on the target of this key issue, the solution described here is limited
to selection mechanism and related aspects. Informing the GTP-U session
identity of the newly selected user plane is covered under the solution to key
issue# 3 (clause 6.3) and solution to key issue #4 (clause 6.4).
##### 6.2.1.1.2 Entity performing user plane selection
The control plane of a functional entity performs selection of its own user
plane. Thus:
\- SGW\'s control plane shall select SGW\'s user plane;
\- PGW\'s control plane shall select PGW\'s user plane;
\- TDF\'s control plane shall select TDF\'s user plane.
##### 6.2.1.1.3 Parameters considered during selection mechanism
The control plane may use one or more of the following non-exhaustive list of
parameters as an input during the user plane selection mechanism:
\- **Location of the UE** : This can be used by the control plane to select
user plane entity close to the UE\'s point of attachment. The granularity of
the location can be ECGI, eNB or TAI. If the location information of the UE is
required to be used for selection of the user plane entity then the same shall
be made available to the control plane during the procedures mentioned in
clause 6.2.1.1.4. It is useful for the control plane to consider this
parameter since it allows optimal user path between the UE and PDN.
\- **Capability of the user plane and functions and features required for an
UE** : An appropriate user plane entity can be selected by matching the
functions and features required for an UE (which can be derived from the
information received over S11/S5 (such as APN, UE Usage Type etc.)or from the
PCRF (such as need to perform DPI etc.), whichever is/are applicable) with the
capabilities of the user plane entity so as to fulfil the service requirement
for the UE, e.g. if L7 based traffic detection is needed then user plane
entity supporting corresponding function needs to be selected. The user plane
entity\'s capabilities may be locally configured at the control plane or
negotiated at node level during the initial connection establishment between
the control and the user plane entity. It is essential for the control plane
to consider this parameter to ensure that the required services can be
provided to the UE.
Besides above, the control plane may receive other inputs such as current load
condition of a user plane entity. In that case, the control plane may also use
it for selecting an appropriate user plane entity.
The exact set of parameters used for the selection mechanism is deployment
specific and controlled by the operator configuration, e.g. location
information may be used for selecting user plane entity in some deployments
while may not be used in other deployments.
For the PGW-U selection, to enable APN-AMBR enforcement, it is suggested that
all simultaneous active PDN connections of a UE for a given APN shall be
provided by the same PGW-U.
##### 6.2.1.1.4 How to realize the selection mechanism
The control plane entity is configured with the list of identities (i.e. IP
address or FQDN) of the user plane entities it can use. This list may be
updated at run-time via management interface, which is not in scope of 3GPP.
NOTE: DNS based address resolution is performed by the control plane if FQDN
of the user plane identity is configured.
The control plane entity is required to be made aware about the user plane
entities load and capacity information. The control plane may be configured
with weight factors for each user plane entities, which can be used for user
plane node selection. The weight factor may be provided via DNS server. The
user plane node may also dynamically report its load information to control
plane.
##### 6.2.1.1.5 Triggers for selection of user plane
Following are the triggers for the selection of user plane:
\- **PDN connection establishment** : New user plane entity needs to be
selected at the time of PDN connection establishment (including E-UTRAN attach
procedure). This trigger is applicable to SGW, PGW as well as TDF.
\- **X2/S1 based Handover procedure** : If location information based user
plane entity selection is deployed then new user plane entity closer to the
current point of attachment may need to be selected at the time of X2/S1 based
handover procedures with or without control plane entity relocation. This
trigger is applicable to SGW.
\- **Service Request procedure** : If UE location information based user plane
entity selection is deployed then new user plane entity closer to the current
point of attachment may need to be selected due to mobility during the idle
mode, when the UE performs Service Request procedure. This trigger is
applicable to SGW.
\- **Load balancing scenarios** : Due to load balancing scenarios, as
described in sec. 5.3.1, new user plane entity may need to be selected. This
trigger is applicable to SGW.
Editor\'s note: If PGW control plane can change its user plane during X2/S1 HO
procedure and Service Request procedure is FFS.
Editor\'s note: If TAU procedure needs to be considered for SGW user plane
change is FFS.
#### 6.2.1.2 Impacts on existing nodes and functionality
If location information based selection of the user plane is supported then
following are the impacts on existing nodes:
**MME/S4-SGSN:**
MME/S4-SGSN needs to include location information, e.g. ECGI, TAI, APN and UE
usage type over the S11 messages during the procedures identified in clause
6.2.1.1.5. This will allow the SGW control plane to select its user plane.
**SGW/PGW:**
SGW needs to include location information, e.g. ECGI, APN and UE usage type
over the S5 messages during the PDN connection establishment procedures and if
there is S5 messaging due to relocation of SGW control and/or user plane
entity (i.e. during the other procedures identified in clause 6.2.1.1.5). This
will allow the PGW control plane to select its user plane entity.
#### 6.2.1.3 Solution Evaluation
NOTE: Please refer to clause 6.2.3.
### 6.2.2 Solution 2 - Combined control plane function selects combined user
plane function
#### 6.2.2.1 Description
##### 6.2.2.1.1 General
In current EPC, an SGW and PGW can be collocated when UE establishes a PDN
connection. For example UE attaches to the EPS. This can be done by DNS
procedure using an identification of canonical node name for SGW and PGW. See
clause 4.3.2 in the TS 29.303 [5]. This mechanism has been widely used in EPC
as it makes optimized PDN connection setup possible.
The Figure 6.2.2-1 depicts the limitation in this mechanism. On the right hand
side, the PGW for the IMS cannot be collocated with the SGW as the PGW for
Internet services is different from the PGW for the IMS.
As VoLTE capable terminals are getting popular in the market, multiple PDN
connections to support both internet connection and IMS are also getting
popular. With this situation, optimization for multiple PDN connections are
getting important accordingly.
Figure 6.2.2-1: S-GW/P-GW colocation
By adapting flexible (i.e. distributed or centralized) user plane entity
concept as the working assumption of this study, it should be beneficial to
operators to have co-located SGW-U/PGW-U concept for all PDN connections per
UE as much as possible. This Figure 6.2.2-2 shows the target architecture in
this solution.
Figure 6.2.2-2: SGW-U/PGW-U colocation in C/U separated environment
##### 6.2.2.1.2 Entity performing user plane selection
The control plane functional entity performs selection of its own user plane
functional entity. Thus:
\- If SGW-C and PGW-C are combined, then combined SGW/PGW control plane shall
select combined SGW/PGW user plane
\- TDF\'s control plane shall select TDF\'s user plane
##### 6.2.2.1.3 Parameters considered during selection mechanism
This solution requires the following non-exhaustive list of updates:
DNS procedure:
\- PGW selection: PGW(PGW-C) selection should be extended by taking user
location (ex. TAI) into accout in order to combine SGW-C and PGW-C possible.
This could be similar to the PGW selection for SIPTO above RAN. Details of
this function can be left open to CT WG4 protocol work.
##### 6.2.2.1.4 How to realize the selection mechanism
In procedures where new PDN connection needs to be created, the following
updates apply.
Updates to the existing function:
\- The MME performs PGW selection taking both APN and User location into
account in order to find an SGW-C/PGW-C combined node.
\- When the SGW-C/PGW-C combined node receives the Create Session Request
message from the MME, then the SGW-C/PGW-C combined node performs an
SGW-U/PGW-U combined node selection. See the Figure 6.2.2-3 for details.
Figure 6.2.2-3: SGW-U/PGW-U combined node selection procedure
##### 6.2.2.1.5 Triggers for selection of user plane
Following are the triggers for the selection of user plane:
\- PDN connection establishment: Whenever new PDN connection is created, this
procedure is triggered. For example, Initial ATTACH procedure, UE requested
PDN connectivity procedure.
#### 6.2.2.2 Impacts on existing nodes and functionality
MME/S4-SGSN/ DNS server:
DNS query for the PGW selection.
#### 6.2.2.3 Solution Evaluation
NOTE: Please refer to clause 6.2.3.
### 6.2.3 Evaluation
Solution 1 describes control plane function selecting its own user plane
function considering various parameters such as UE\'s location information
etc. Solution 2 describes how MME can select collocated PGW and SGW control
plane function during the PDN connection establishment procedure. Thus, both
the solutions are addressing different aspects and are complementing each
other.
Since both the solutions are addressing different aspects, no further
comparison is required.
### 6.2.4 Conclusion
#### 6.2.4.1 Selection of the user plane function
It is concluded that the selection of the user plane function is performed by
its respective control plane entity as described in solution 1.
Correspondingly, following new functionality are considered for the normative
work:
**MME/S4-SGSN:**
To allow the SGW control plane to select its user plane the MME/S4-SGSN needs
to include the following information during the mentioned procedures:
\- PDN connection establishment:
NOTE 1: For the above procedure, other required information i.e. location
information, APN, are already supported over S11/S4 interfaces.
\- S1/X2 handover, Service Request procedure: location information e.g. ECGI,
TAI
NOTE 2: The changes related to the above procedures are needed based on the
conclusion of key issue 3 and key issue 4.
NOTE 3: Inclusion of the mapped UE Usage Type, for both the above procedures,
will be further decided during the normative work.
**SGW:**
To allow the PGW control plane to select its user plane entity the SGW needs
to include the following information over the S5 messages during mentioned
procedures.
\- PDN connection establishment:
NOTE 4: Inclusion of the mapped UE Usage Type will be further decided during
the normative work.
NOTE 5: For the above procedure, other required information i.e. location
information, APN, are already supported over S5 interface.
#### 6.2.4.2 Selection of the collocated PGW and SGW control plane function
It is concluded to support selection of the collocated PGW and SGW control
plane function by the MME.
NOTE: The extension to the DNS procedure, if any required, is left to CT WG4
protocol work.
## 6.3 Solutions to key issue 3: Change of user plane session identity (due to
other than UE mobility scenarios)
### 6.3.1 Solution 1 - Control plane changing the user plane session identity
#### 6.3.1.1 Description
##### 6.3.1.1.1 General
For load balancing purpose, the control plane of the functional entity may
decide to move the user plane session from one user plane function to another
user plane function. In that case, the control plane initiates procedure to
inform the new user plane session identity for the existing UE session to the
peer entities. This solution proposes the corresponding procedure along with
the call flows for SGW, PGW and TDF.
##### 6.3.1.1.2 Change of user plane session identity
The user plane of a given functional entity may be expanded or contracted, by
adding new user plane functions or removing existing user plane functions, to
accommodate changing traffic and/or bandwidth requirements. The decision to
expand or contract the user plane may lie either with the control plane of the
functional entity or with the overall system resource manager, e.g.
orchestration function. In both the cases, the control plane is required to be
made aware about the available user plane function(s) and their load
condition.
For load balancing purpose, the control plane may decide to re-distribute the
existing UE session(s) over the available user plane function(s) and in that
case, initiates the procedure to inform the change of user plane session
identity (i.e. IP address and TEID of the GTP-U session) to the peer entities.
##### 6.3.1.1.3 SGW: Call flows for control plane changing user plane session
identity
##### 6.3.1.1.3.1 Call flow {#call-flow .H6}
The call flow below describes the procedure for the SGW control plane to
change the use plane session identity for a given UE session.
Figure 6.3.1.1-1: SGW call flows for changing user plane session identity
F1 is currently serving SGW user plane function for UE1. F2 is new SGW user
plane function where the UE1 session is to be migrated due to load balancing
reason.
1\. The SGW control plane decides to move UE1 session from user plane function
F1 to user plane function F2.
NOTE 1: Control plane selection of user plane function is covered as part of
solution to key issue# 2, in clause 6.2.1.
NOTE 2: The assumption is that the SGW control plane always receives the
latest UE location information from MME, as part of solution 1 to key issue#
2, in clause 6.2.1.2.
2\. SGW control plane allocates user plane session resources for UE1 in F2.
NOTE 3: The information provided by the control plane for the allocation of
user plane session resources is covered as part of solution to key issue#1, in
clause 6.1.1.
3\. The SGW control plane sends per UE Update UPlane Identity (EPS Bearer
ID(s), Address(es), S1-U TEID(s)) message to the MME over S11 and per PDN
Update UPlane Identity (EPS Bearer ID(s), Address(es), S5/S8-U TEID(s))
message to the PGW over S5/S8 for UE1. This message contains new user plane
session identity, i.e. identity of F2, for each EPS Bearers of UE1 session.
4\. If the UE is in ECM-connected state then the MME updates the eNB with the
new S1-U identity of the SGW using existing S1Ap message E-RAB Modify Request
(ref. TS 36.413 clause 8.2.2). The eNB uses this new S1-U identity for sending
the uplink packets.
NOTE 4: Change of SGW S1-U identity via E-RAB Modify Request message over the
S1Ap interface is the existing procedure and hence there is no eNB impact as
result of the above step.
5\. The MME updates its UE context with new identity of the SGW S1-U and sends
Update UPlane Identity Ack message to the SGW. In the event when MME detects
the UE handover, refer clause 6.3.1.1.3.2 below.
The PGW updates its UE context with new identity of the SGW S5/S8-U and sends
Update UPlane Identity Ack message to the SGW. The PGW starts using this new
S5/S8-U identity for sending the downlink packets.
On reception of Update UPlane Identity Ack message from MME and PGW, the SGW
control plane may start a timer. While this timer is running, the SGW
maintains the user plane session in user plane function F1 so as to handle any
in-flight data packets (i.e. sent towards the user plane function F1) from eNB
or PGW, if the UE is in ECM-Connected state.
6\. The SGW releases the user plane session for UE1 from user plane function
F1 on expiry of the timer started in step 5 or if timer is not started then on
reception of Update UPlane Identity Ack message. In the event when existing
SGW relocation detected by MME prior to the expiry of the timer that was set
in step 5, refer clause 6.3.1.1.3.2 below.
NOTE 5: The exact procedure for the release of user plane session is covered
as part of solution to key issue#1, in clause 6.1.1.
NOTE 6: Existing/new messages over the existing protocol will be defined,
since the above new procedure is proposed on the existing interfaces. Since
these existing interfaces are defined on a per UE/per PDN connection level
granularity, it may not be possible to optimize it for a group of UE when in
case the above procedure needs to be executed for many UEs (e.g. during
planned migration operation).
##### 6.3.1.1.3.2 Consideration when the above procedure collides with other
procedures {#consideration-when-the-above-procedure-collides-with-other-
procedures .H6}
\- Collision with eNB handover procedure:
If the MME detects that the UE is under handover (i.e. S1 handover or
receiving an indication that an X2 handover is in progress from eNodeB in step
4) it sends Update UPlane Identity Negative Ack message to the SGW control
plane in step 5. The SGW control plane should resend the Update UPlane
Identity message again after it receives the Modify Bearer Request message
from MME. The SGW control plane updates the SGW user plane function F2 with
the user plane session identity of the new eNodeB.
\- Collision with SGW relocation procedure:
If prior to the expiry of the timer that was set in step 5, if the existing
SGW control plane is required to be switched over to the new SGW control
plane, the existing SGW control plane shall release the user plane session for
UE1 from user plane function F1 before it is being switched over.
##### 6.3.1.1.4 PGW: Call flows for control plane changing user plane session
identity
NOTE: It is decided to not support PGW control plane changing its user plane
function during the load re-balancing procedures.
##### 6.3.1.1.5 TDF: Call flows for control plane changing user plane session
identity
Since the user plane session identity of the TDF is not exposed to the other
EPC entities, this procedure is not applicable to the TDF.
#### 6.3.1.2 Impacts on existing nodes and functionality
For supporting change of user plane session identity of the SGW, following are
the impacts to existing nodes:
\- **MME/S4-SGSN** : Support for the new procedure and correspondingly
messages, as described in clause 6.3.1.1.3 over S11/S4 interface.
\- **PGW** : Support for the new procedure and correspondingly messages, as
described in clause 6.3.1.1.3, over S5/S8 interface.
NOTE: It is up to stage 3 to decide if new messages are needed or existing
messages can be re-used for the above procedure.
#### 6.3.1.3 Solution Evaluation
NOTE: Please refer to clause 6.3.3.
### 6.3.2 Solution 2 - SGW-C triggers MME to perform UP session identity
change
#### 6.3.2.1 Description
In order to minimize the impact on the existing functional entities and to
consider possible race condition scenarios at the MME, this solution relies on
the MME-centric approach, i.e. MME initiated S11 Modify Bearer Request
procedure. The procedure is triggered by the CP function of the SGW (SGW-C)
for UP session identity change.
NOTE: The race condition can happen for example if the SGW-C triggers UP
session identity relocation towards the MME while the TAU procedure is
ongoing, e.g. during MME performs SGW relocation.
Figure 6.3.2.1-1: MME initiated Modify Bearer procedure triggered by the SGW-C
1\. Due to non-mobility events the SGW-C decides to initiate SGW-U relocation.
Depending on the situation, it is the SGW-C decision which UEs or UE\'s
bearers are to be relocated to a new SGW-U.
2\. The SGW-C initiates a preparation procedure for instantiation of the new
SGW-U resources. The SGW-C may optionally request UP identifier (IP address of
the interface, tunnel endpoint ID (e.g. GTP TEID), etc.) assignment for the UE
determined in step 1. As a result of his step, the SGW-C knows the new UP IDs.
The new UP IDs can be used by the SGW-C when a Modify Bearer Request message
arrives from the MME at step 4.
3\. SGW-C sends SGW-U relocation request message to the MME to trigger the MME
to perform Modify Bearer procedure towards the same SGW.
4\. MME ensures that there are no ongoing MM/SM procedures which may prevent
the UP session identity update, e.g. ongoing TAU or S1 handover procedure with
MME/SGW change. If no collision is detected, the MME sends Modify Bearer
Request message back to the SGW-C.
5\. SGW-C performs Modify Bearer procedure with the PGW-C (in case of split
PGW) or with legacy PGW (non-split, e.g. over S8 reference point). This
procedure updates the SGW-U TEID in the PGW.
6\. SGW-C sends Modify Bearer Respond message to the MME.
7\. MME updates the corresponding eNB by exchanging Serving GW Relocation
Notification/Ack with the eNBs.
8\. MME sends SGW-U relocation response to the SGW-C to acknowledge the
modification of the UP session identity initiated in step 3 above.
9\. SGW-C performs Sx procedure to release the UE context in the old SGW-U and
to confirm the update in the new SGW-U.
#### 6.3.2.2 Impacts on existing nodes and functionality
**MME**
The MME is able to handle the procedure described in the previous clause for
SGW UP session identity change.
**PGW**
Modification to the PGW is needed to handle the procedure for SGW UP session
identity change.
#### 6.3.2.3 Solution Evaluation
Benefits:
\- This solution follows the basic principle that the MME controls UE\'s UP
session control among EPS nodes, and thus, the solution provides coexistence
with all existing MM/SM procedures without causing any negative racing
condition.
Drawbacks:
\- There is double signalling over the S11 reference point, i.e. from SGW to
MME to initiate the SGW-U relocation and back from MME to SGW to trigger the
Bearer Modification procedure.
### 6.3.3 Evaluation
Solution 2 puts specific emphasize on MME being the main entity for handling
of potential race condition of SGW control plane function changing its user
plane function\'s identity at the same time as other mobility related
procedures (e.g. TAU, HO etc.). Solution 1 also handles this aspect and the
details are captured in clause 6.3.1.1.3.2.
Considering the above, both the solutions overlap except some minor
differences:
\- Solution 2 uses one extra message between the SGW and MME.
\- Solution 2 uses existing messages and procedures while solution 1 uses new
messages and procedure leaving stage 3 to decide if existing or new messages
should be used.
### 6.3.4 Conclusion
Since this key issue is not very critical for the initial deployment of the
core network based on the separated control and user plane function
architecture, it is decided to not define any normative work.
## 6.4 Solutions to key issue 4 - Relocation of user plane functional entity
due to UE mobility
### 6.4.1 Solution 1- Service area alignment of SGW control plane with SGW
user plane
#### 6.4.1.1 General
Since the user plane gateway can be distributed deployed, e.g. closer to RAN
side, it is possible to relocate the source SGW user plane during UE mobility
procedures to provide optimal user plane transmission path. P-GW user plane
should not be relocated in the mobility procedures because it is the PDN
anchor.
This solution is applicable to Handover and Tracking Area Update procedures.
#### 6.4.1.2 Descriptions
Based on the solution of TAI list management documented in clause 6.1.1.7.2.1,
when the MME determines the source SGW control plane need to be relocated, the
SGW user plane need to be relocated as well.
NOTE: The MME may select a target SGW control plane which belongs or not
belongs to the same SGW control plane node as the source SGW control plane.
However, this is transparent to the MME and in both the cases, the source SGW
user plane should be relocated.
The SGW control plane needs to ensure the IP connectivity between the target
eNodeB and target SGW user plane.
The target SGW control plane shall signal the user plane TEID and IP address
of the target SGW user plane to the MME to update the E-RAB tunnel
identifiers.
#### 6.4.1.3 Call flows
##### 6.4.1.3.1 S1 based handover with SGW change
Figure 6.4.1.3.1-1: S1 handover procedures reflecting idea of solution 1
The reference provided in the following call flow description refers to clause
5.5.1.2.2 (S1-based handover, normal) of TS 23.401 [2]. MME discussed in this
clause represents Target MME and there are no updates essential for
interactions involving Source MME discussed in that clause.
1\. Same as the call flows in clause 5.5.1.2.2 before step 4.
2\. Same as step 2 in clause 5.5.1.2.2 from MME perspective. Actually, MME
contact a target logic SGW-C.
NOTE 1: Source and target logic SGW can be deployed in the same SGW-C physical
node or not.
3\. Logic SGW-C select a suitable SGW-U based on the SGW-U selection function.
4\. Call flows on Sxa reference points are necessary in order to assign the
F-TEID of target SGW-U.
5\. Same as step 4 in clause 5.5.1.1.3 from MME perspective. Actually, the
create session response message is sent from target logic SGW-C.
6\. Same as step 5-5a in clause 5.5.1.2.2.
7\. Same as step 8 in clause 5.5.1.2.2 from MME perspective. Actually, MME
contact a target logic SGW-C.
8\. Call flows on Sxa reference points are necessary in order to provision the
eNodeB F-TEID of the forwarding tunnel. Only if step 7 is not sent to the same
target logic SGW-C as in step 2, target logic SGW-C select a suitable SGW-U
based on the SGW-U selection function.
9\. Same as step 4 in clause 5.5.1.2.2 from MME perspective. Actually, the
create session response message is sent from target logic SGW-C.
10\. Same as steps 9-14b in clause 5.5.1.2.2.
11\. Same as step 15 in clause 5.5.1.2.2 from MME perspective. Actually, MME
contact a target logic SGW-C.
12\. Call flows on Sxa reference points are necessary in order to provision
the target eNodeB F-TEID.
13\. Similar as step 16 in clause 5.5.1.2.2. Target logic SGW-C sends a modify
bearer request message (F-TEID of the target SGW-U) to the PGW-C.
14\. Call flows on Sxb reference points are necessary in order that PGW-C can
provision the F-TEID of target SGW-U to the PGW-U.
15\. Similar as step 16a in clause 5.5.1.2.2. A modify bearer response message
is sent from PGW-C to target logic SGW-C.
16\. Same as step 17 in clause 5.5.1.2.2 from MME perspective. Actually, the
modify bearer response message is sent from target logic SGW-C.
17\. Same as steps 18-19b in clause 5.5.1.2.2.
18\. Same as step 19c in clause 5.5.1.2.2 from MME perspective. Actually, MME
contact a source logic SGW-C.
19\. Call flows on Sxa reference points are necessary in order that source
logic SGW-C indicate the source SGW-U to remove the bearer contexts
accordingly and release the user plane source.
20\. Same as step 19d in clause 5.5.1.2.2 from MME perspective. Actually, the
delete session response message is sent from source logic SGW-C.
21\. Same as step 21a in clause 5.5.1.2.2 from MME perspective. Actually, MME
contact a target logic SGW-C.
22\. Call flows on Sxa reference points are necessary in order to release
temporary resources used for indirect forwarding.
23\. Same as step 21b in clause 5.5.1.2.2 from MME perspective. Actually, the
delete indirect data forwarding tunnel response message is sent from target
logic SGW-C.
NOTE 2: Only steps 4, 8, 12, 14, 19, 22 are newly introduced, and the
exhaustive parameters used in these steps leave to stage 3.
NOTE 3: Similar call flows can be applied to other mobility management
procedures, e.g. X2 based handover and Tracking area update for idle mode UE.
#### 6.4.1.4 Solution Evaluation
Based on the assumption that the service area logic SGW control plane align
with that of SGW user plane, no modification on the existing procedures
defined in TS 23.401 [2] is introduced. The procedures introduced in the
Handover and Tracking area update procedures occur between SGW-C and SGW-U,
and PGW-C and PGW-U only.
Extra signalling due to more frequent TAU procedure between UE and core
network is introduced.
### 6.4.2 Solution 2 - SGW user plane change triggered during two subsequent
procedures
#### 6.4.2.1 Service Request
In this solution, the Service Request procedure is modified such that, if SGW
CP determines that SGW UP relocation is beneficial, the SGW CP can indicate
this to MME during the Service Request procedure. However, since there is no
way to notify eNB about new SGW GTP-U addresses during the Service Request
procedure, the SGW CP cannot just provide new GTP-U TEIDs to MME for direct
use during the Service Request procedure.
This solution proposes that the actual SGW UP function relocation is done
based at the subsequent Service Request procedure.
The SGW CP function provides an indication to the MME during Service Request
that SGW UP relocation is needed. Next time the UE makes a Service Request,
the MME contacts the SGW CP function before it provides the GTP-U IP address
and TEID(s) to the eNB. This allows the SGW CP to provide new S1 TEIDs that
can be provided to eNB during the Service Request.
Figure 6.4.2-1: Solution 2: SGW user plane change triggered during two
subsequent Service Request procedures
This procedure is the same as the UE triggered Service Request procedure in TS
23.401 [2], clause 5.3.4.1 with the following differences:
Step 4: In case the SGW CP has indicated in a previous Service Request
procedure that new SGW UP is to be selected, the MME sends a Modify Bearer
Request to request new GTP-U address/TEIDs. If the MME has not received such
indication in the previous Service Request procedure, step 4-5 are skipped.
Step 5: New SGW UP and GTP-U IP address(es) and TEID(s) are selected and
provided to the MME in Modify Bearer Response.
Step 6: The MME provides the SGW GTP-U addresses/TEIDs to the eNB.
Step 11: If the SGW CP provided new SGW GTP-U addresses/TEIDs in step 4-5, the
SGW CP updates the PGW with the new SGW GTP-U endpoint.
Step 14: The SGW CP may indicate to MME that a new SGW UP shall be selected at
next Service Request procedure. Such indication informs the MME that it shall
perform steps 4-5 above in the next Service Request procedure that is
performed.
Editor\'s note: How SGW UP function re-allocation can be done during other
mobility procedures such as S1-based and X2-based handovers is FFS.
### 6.4.3 Solution 3 - SGW user plane change during mobility procedure
#### 6.4.3.1 Service Request
In this solution, the Service Request procedure is modified such that the SGW
CP can provide new GTP-U addresses to the MME during the Service Request
procedure. However, since there is no way to notify eNB about new SGW GTP-U
addresses during the Service Request procedure, the MME invokes an update
procedure towards eNB immediately after the Service Request procedure has been
completed.
Figure 6.4.3-1: Solution 3: SGW user plane change triggered by Service Request
procedure
This procedure is the same as the UE triggered Service Request procedure in TS
23.401 [2], clause 5.3.4.1 with the following differences:
Step 8: The SGW CP function may determine that the UE would be better served
by a different SGW UP function. In that case, the SGW control plane allocates
user plane session resources for the UE in the new SGW UP function.
Step 9: If the Modify Bearer Request is sent to the PGW CP function, new SGW
UP F-TEIDs may be included by the SGW CP function.
Step 12: The SGW CP function may provide SGW UP F-TEIDs for the newly
allocated SGW UP function to the MME.
Step 13: In case the MME received new SGW UP F-TEIDs in step 12, the new
F-TEIDs of the SGW is provided to the eNB using existing S1AP message E-RAB
Modify Request (ref. TS 36.413 clause 8.2.2). The eNB uses this new S1-U
identity for sending the uplink packets.
Step 14: The SGW CP function provides the S5 user plane F-TEIDs to the PGW, if
they are not provided in step 9.
Step 15: The MME informs the SGW CP function that the new SGW UP endpoint has
been updated. Alternatively, an implicit mechanism such as timer may be used
to ensure the update of the SGW UP endpoint at the eNB.
Step 16: The PGW provides an acknowledgement to the SGW CP function.
After step 16, the SGW releases the old SGW UP function resources.
#### 6.4.3.2 X2-based handover
##### 6.4.3.2.1 Without Serving GW control plane relocation
Referring to the procedure \"X2-based handover without Serving GW relocation\"
in TS 23.401 [2] clause 5.5.1.1.2, the interactions over the S11 interface are
similar to the interaction over the S11 interface during the Service Request
procedure in TS 23.401 [2] clause 5.3.4.1. Considering that, the changes over
the S11 interface to support the user plane relocation during the X2-based
handover without Serving GW control plane relocation are same as the changes
over the S11 interface to support the user plane relocation during the Service
Request procedure, i.e. as depicted in step 8, step 12 and step 15 of clause
6.4.3.1.
No changes over the S1AP interface are needed since the S1AP message \"Path
Switch Request Ack\" sent during the X2-based handover procedure allows the
MME to provide the new S1-U identities of the Serving GW user plane to the
eNB.
To update PDN GW with the new S5-U identities of the user plane of the Serving
GW, the changes suggested in step 14 and step 16 of clause 6.4.3.1 are needed.
##### 6.4.3.2.2 With Serving GW control plane relocation
Referring to the procedure \"X2-based handover with Serving GW relocation\" in
TS 23.401 [2] clause 5.5.1.3, the existing procedure already allows the
Serving GW to provide new identities for the Serving GW user plane to the MME
as well as to the PDN GW. Thus, the existing procedures already support the
user plane relocation during the X2-based handover with Serving GW control
plane relocation and hence, no new changes are needed.
#### 6.4.3.3 S1-based handover
##### 6.4.3.3.1 Without Serving GW control plane relocation
Referring to the procedure \"S1-based handover, normal\" in TS 23.401 [2]
clause 5.5.1.2.2, the interactions over the S11 interface are similar to the
interaction over the S11 interface during the Service Request procedure in TS
23.401 [2] clause 5.3.4.1. Considering that, the changes over the S11
interface to support the user plane relocation during the S1-based handover
without Serving GW control plane relocation are same as the changes over the
S11 interface to support the user plane relocation during the Service Request
procedure, i.e. as depicted in step 8, step 12 and step 15 of clause 6.4.3.1.
To update eNB with the new S1-U identities of the user plane of the Serving
GW, the changes suggested in step 13 of clause 6.4.3.1 are needed.
To update PDN GW with the new S5-U identities of the user plane of the Serving
GW, the changes suggested in step 14 and step 16 of clause 6.4.3.1 are needed.
##### 6.4.3.3.2 With Serving GW control plane relocation
Referring to the procedure \"S1-based handover, normal\" in TS 23.401 [2]
clause 5.5.1.2.2, the existing procedure already allows the Serving GW to
provide new identities for the Serving GW user plane to the MME as well as to
the PDN GW. Thus, the existing procedures already support the user plane
relocation during the S1-based handover with Serving GW control plane
relocation and hence, no new changes are needed.
#### 6.4.3.4 Impacts on existing nodes and functionality
For supporting the user plane relocation of the Serving GW during the mobility
procedure, following are the impacts to existing nodes:
\- **MME/S4-SGSN** : Support for the new procedure and correspondingly
messages, as described in step 8, step 12 and step 15 of the clause 6.4.3.1
over S11/S4 interface. Support to trigger the existing procedure as described
in step 13 of the clause 6.4.3.1 over S1AP interface.
\- **PGW** : Support for the new procedure and correspondingly messages, as
described in step 14 and step 16 of clause 6.4.3.1 over S5 interface.
NOTE: It is up to stage 3 to decide if new messages are needed or existing
messages can be re-used for the above procedures.
#### 6.4.3.5 Solution Evaluation
Editor\'s note: Evaluation is FFS.
### 6.4.4 Evaluation
**Solution 1: Service area alignment of SGW control plane with SGW user
plane**
Pros:
\- This solution does not have any MME, PGW standards impact and requires no
changes to existing 3GPP procedures and hence the solution can be used with
Rel-13 MME, PGW as well.
Cons:
\- When the SGW CP function is partitioned into parts more SGW Service Areas
need to be configured than if SGW CP would not be partitioned. It depends on
the placement of the SGW UP functions in the network and their connectivity to
the eNBs whether the amount of SGW Service Areas would be higher than in the
same network with SGWs.
\- There is a possibility to introduce extra signalling due to more frequent
TAU procedure between UE and core network depending on the operator
configuration.
**Solution 2: SGW user plane change triggered during two subsequent
procedures**
Pros:
\- Decouples the TAI list management solution from the key issue 4 solution.
Cons:
\- The control plane function determines that the user plane function
relocation is required but the actual relocation takes place only during the
\"subsequent\" procedure. Hence, the user plane path remains sub-optimal until
the \"subsequent\" procedure takes place, e.g. if the UE remains in the active
mode for very long duration then the user plane path remains sub-optimal for
that duration. Also, when the \"subsequent\" procedure takes place, there is
no guarantee that the UE hasn\'t moved to a different location. In that case,
the user plane function relocation is based on the UE\'s previous location and
hence the end-result could be still sub-optimal user plane path.
\- This solution has MME and PGW standards impact and requires new procedures
or changes to the existing 3GPP procedures and hence the solution cannot be
used with Rel-13 MME, PGW.
**Solution 3: SGW user plane change during mobility procedure**
Pros:
\- Decouples the TAI list management solution from the key issue 4 solution.
Cons:
\- This solution has MME and PGW standards impact and requires new procedures
or changes to the existing 3GPP procedures and hence the solution cannot be
used with Rel-13 MME, PGW.
All the 3 solutions captured in the TR are valid solutions proposing
relocation of the user plane function due to UE mobility to ensure that the UE
is always served by the user plane function closest to the UE\'s current
location.
Solution 1, based on the conclusion of sub key issue \"Consideration for SGW
Service Area and TAI list alignment due to control plane and user plane split
of SGW\" described in clause 6.1.1.7. This solution ensured the user plane
relocation in case the UE moves out of the service area by triggering the
Tracking Area Update procedure, which is the same mechanism for the MME to
select a new SGW for optimized user plane path as today.
Solution 2 ensures when the UE is in connected mode that the user plane
function closest to the UE\'s current location is selected only during the
\"subsequent\" procedure. Thus, the UE is served by older/sub-optimal user
plane function until the \"subsequent\" procedure takes place and this time
could be very long duration depending upon the data traffic activity at the
UE. Also there is no guarantee that the UE remains in the previous location
when the \"subsequent\" procedure takes place and thus there is no guarantee
that the newly selected user plane function is closest to the UE\'s current
location.
Solution 3 ensures when the UE is in connected mode that the user plane
function closest to the UE\'s current location is selected during the UE
mobility procedure. It does not require new signalling between the UE and core
network nodes and it also results into minimal new signalling within core
network.
Considering all the above aspects, all the solutions can ensure the optimized
user plane path during MM procedures. However, solution 1 has no impact on
existing entities, like MME and PGW. Therefore, it is concluded to select
solution 1 for the normative work.
### 6.4.5 Conclusion
Since this key issue is not very critical for the initial deployment of the
core network based on the separated control and user plane function
architecture, it is decided to not define any normative work.
# 7 Overall evaluation
Editor\'s note: This clause will contain the evaluation of the identified
solutions for every key issue.
# 8 Conclusions
**For key issue 1 (Functionality split into user plane and control plane
functions):**
Solution 1 (Functional split for SGW, PGW and TDF) is selected. Normative work
is expected to be reflected in a new TS together with additions to TS 23.002,
TS 23.401 [2], TS 23.402 [3] and TS 23.203 [4].
For the considerations under solution 1, the following is concluded:
\- For GTP-U IP address and TEID allocation the conclusion is documented in
clause 6.1.1.5.6.
\- For SGW Service Area and TAI list alignment the conclusion is documented in
clause 6.1.1.7.4.
\- For UE IP address management the conclusion is documented in clause
6.1.1.8.4.
\- For supporting (extended and normal mode) buffering the conclusion is
documented in clause 6.1.1.10.5. The mechanism specified in clause 6.1.1.10.5
is defined for the extended mode as well as normal mode buffering of the
packets.
\- For 3GPP specific information at the user plane function the conclusion is
documented in clause 6.1.1.11.2.5.
\- For performing LI functionality the conclusion is documented in clause
6.1.1.12.5.
\- For the procedures over Sx Reference Points the conclusion is documented in
clause 6.1.1.14.4.
\- For the parameters for Sx Reference Points the conclusion is documented in
clause 6.1.1.15.3.
For the other topics under solution 1 (online charging, offline charging and
usage monitoring (clause 6.1.1.6), indication of the functionality supported
by the user plane function (clause 6.1.1.9), control of user plane forwarding
(clause 6.1.1.13), activation/deactivation of predefined PCC/ADC rules (clause
6.1.1.17)) the general functionality is agreed according to the description in
the respective sections. The details will be worked out during normative work.
Solution 2 (Functional split for combined S/P-GW) is also supported by
enabling a combined Sx with a common parameter structure for SGW/PGW/TDF.
**For key issue 2 (Selection mechanism for user plane functional entities):**
The conclusion for key issue 2 is documented in clause 6.2.4.
**For key issue 3 (Change of user plane session identity (due to other than UE
mobility scenarios)):**
Since this key issue is not very critical for the initial deployment of the
core network based on the separated control and user plane function
architecture, it is decided to not define any normative work.
**For key issue 4 (Relocation of user plane functional entity due to UE
mobility):**
Since this key issue is not very critical for the initial deployment of the
core network based on the separated control and user plane function
architecture, it is decided to not define any normative work.
###### ### Annex A: Example for interaction between CP and UP function
# A.1 During attach procedure
Using the attach procedure, here we provide call flow to demonstrate the step
at which the interactions between the CP and UP function take place and the
nature of those interactions, i.e. the high level purpose of the interaction.
Figure A.1-1: CP function and UP function interactions during the Attach
procedure
Following additional steps apply when the Serving GW and PDN GW have separate
CP and UP functions.
12a The Serving GW CP function receives Create Session Request message from
the MME. This is same as step 12 in clause 5.3.2.1 of TS 23.401 [2].
12b The Serving GW has to allocate S5-U FTEID. If this functionality is
supported within CP function then the CP function allocates S1-U and S5-U
FTEIDs for the default bearer of the PDN connection.
The CP function then performs the selection of the UP function for hosting the
UE session. The CP function sends \"SGW UPlane Session Establishment Request\"
message to the selected UP function and includes S1-U and S5-U FTEID if
already allocated by it.
12c The UP function allocates the S5-U and S1-U FTEID, if not already
allocated by the CP function, for the default bearer of the PDN connection and
includes it in the response message. At this point, the eNB S1-U and PDN GW
S5-U FTEIDs are not available.
The SGW UP function session establishment needs to be done at this step in
order to ensure that any downlink data, which may be received immediately
after step 15, can be handled by the Serving GW UP function.
14a The PDN GW may perform IP-CAN Session Establishment/Modification procedure
with the PCRF. This is same as step 14 in clause 5.3.2.1 of TS 23.401 [2].
14b The CP function of PDN GW performs the UP function selection for hosting
the UE session. If allocation of GTP-U FTEID functionality is supported within
CP function then the CP function allocates S5-U FTEID for the default bearer
of the PDN connection. The CP function sends \"PGW UPlane Session
Establishment Request\" message to the UP function and includes S5-U FTEID if
already allocated by it.
14c The UP function allocates the S5-U FTEID, if not already allocated by the
CP function, for the default bearer of the PDN connection and includes it in
the response message.
If the Handover Indication is present in the Create Session Request message
then CP function of the PDN GW indicates to the UP function to not route the
downlink packets using this new session but to continue using the existing
session to route the downlink packets to the non-3GPP access.
15a The Serving GW receives Create Session Response message from the PDN GW.
This is same as step 15 in clause 5.3.2.1 of TS 23.401 [2].
15b The CP function of Serving GW needs to update the UP function with the PDN
GW\'s S5-U FTEID. This is to ensure that if the uplink data is received after
step 22, it can be handled by the Serving GW. The CP function sends \"SGW
UPlane Session Update Request\" message to the UP function and includes PGW
S5-U FTEID.
15c The UP function sends \"SGW UPlane Session Update Response\" message to
the CP function.
23 The Serving GW receives Modify Bearer Request message from the MME. This is
same as step 23 in clause 5.3.2.1 of TS 23.401 [2].
The CP function of Serving GW needs to update the UP function with the eNB\'s
S1-U FTEID. The CP function sends \"SGW UPlane Session Update Request\"
message to the UP function and includes eNB S1-U FTEID.
23a If the Handover Indication is included in step 23, the Serving GW sends a
Modify Bearer Request (Handover Indication) message to the PDN GW. At this
point the CP function of the PDN GW releases the old UP function session
corresponding to the non-3GPP access by sending \"PGW UPlane Session Release
Request\" message to the UP function. Additionally, the CP function also
instructs the UP function to start routing the downlink packets to the Serving
GW using the new session created in step 14b.
NOTE: Refer to clause B.1 for the exact set of parameters exchanged between
the CP function and UP function during various interactions mentioned above.
Editor\'s note: The above interactions need to be updated based on the
conclusion of the clause 6.1.1.5, i.e. allocation of GTP-U F-TEID performed by
the CP function or the UP function.
###### ### Annex B: Example for attributes exchanged between the CP and UP
function
# B.1 During the UPlane Session Establishment procedure
## B.1.1 UPlane Session Establishment Request
Following attributes can be present in the \"UPlane Session Establishment
Request\" message sent from the CP to the UP function:
Table B.1.1-1: Attributes within Session Establishment Request message
+-----------+-----------+-----------+-----------+-----------+-----+---+ | Attribute | De | Comment | Appl | Spec. | | | | | scription | | icability | reference | | | +-----------+-----------+-----------+-----------+-----------+-----+---+ | | | | SGW | PDN GW | TDF | | +-----------+-----------+-----------+-----------+-----------+-----+---+ | IP | Contains | This | | X | X | | | Address | the IPv4 | allows | | | | | | | address | the PDN | | | | | | | and/or | GW to | | | | | | | the IPv6 | perform | | | | | | | prefix | source | | | | | | | assigned | address | | | | | | | to this | v | | | | | | | PDN | alidation | | | | | | | co | for the | | | | | | | nnection. | uplink | | | | | | | | traffic | | | | | | | | and | | | | | | | | identify | | | | | | | | the PDN | | | | | | | | session, | | | | | | | | the | | | | | | | | traffic | | | | | | | | belongs | | | | | | | | to, on | | | | | | | | reception | | | | | | | | of | | | | | | | | downlink | | | | | | | | traffic. | | | | | | | | This | | | | | | | | allows | | | | | | | | the TDF | | | | | | | | to | | | | | | | | identify | | | | | | | | the TDF | | | | | | | | session, | | | | | | | | the | | | | | | | | traffic | | | | | | | | belongs | | | | | | | | to, on | | | | | | | | reception | | | | | | | | of | | | | | | | | uplink | | | | | | | | /downlink | | | | | | | | traffic. | | | | | +-----------+-----------+-----------+-----------+-----------+-----+---+ | AMBR | Provides | | | X | X | | | | the | | | | | | | | a | | | | | | | | uthorized | | | | | | | | AMBR for | | | | | | | | the total | | | | | | | | bandwidth | | | | | | | | usage for | | | | | | | | this PDN | | | | | | | | co | | | | | | | | nnection. | | | | | | +-----------+-----------+-----------+-----------+-----------+-----+---+ | PDN | An | PDN GW UP | X | X | | | | session | identity | function | | | | | | co | allowing | can use | | | | | | rrelation | the UP | this to | | | | | | ID | function | enforce | | | | | | | to | APN-AMBR | | | | | | | correlate | when | | | | | | | multiple | multiple | | | | | | | PDN | PDN | | | | | | | session | co | | | | | | | for the | nnections | | | | | | | same UE. | to the | | | | | | | | same APN | | | | | | | | are | | | | | | | | est | | | | | | | | ablished. | | | | | | | | | | | | | | | | Serving | | | | | | | | GW UP | | | | | | | | function | | | | | | | | can use | | | | | | | | this to | | | | | | | | identify | | | | | | | | all the | | | | | | | | PDN | | | | | | | | co | | | | | | | | nnections | | | | | | | | for the | | | | | | | | same UE. | | | | | | | | | | | | | | | | See | | | | | | | | NOTE1. | | | | | +-----------+-----------+-----------+-----------+-----------+-----+---+ | Po | Provides | Multiple | | X | X | | | licy-Rule | QoS and | i | | | | | | | traffic | nstances, | | | | | | | steering | corr | | | | | | | related | esponding | | | | | | | policy | to | | | | | | | rules | different | | | | | | | using the | policy | | | | | | | a | rules, | | | | | | | ttributes | are | | | | | | | listed in | allowed. | | | | | | | Table | | | | | | | | B.1.2-1 | | | | | | +-----------+-----------+-----------+-----------+-----------+-----+---+ | Be | Provides | Multiple | X | X | | | | arer-Info | bearer | i | | | | | | | related | nstances, | | | | | | | in | each | | | | | | | formation | corr | | | | | | | using the | esponding | | | | | | | a | to | | | | | | | ttributes | different | | | | | | | listed in | bearer | | | | | | | Table | are | | | | | | | B.1.3-1 | allowed. | | | | | +-----------+-----------+-----------+-----------+-----------+-----+---+ | Us | Provides | Multiple | X | X | X | | | age-Repor | usage | i | | | | | | ting-Rule | reporting | nstances, | | | | | | | rule | corr | | | | | | | using the | esponding | | | | | | | a | to | | | | | | | ttributes | different | | | | | | | listed in | usage | | | | | | | Table | reporting | | | | | | | B.1.4-1 | rules, | | | | | | | | are | | | | | | | | allowed. | | | | | | | | This | | | | | | | | covers | | | | | | | | the | | | | | | | | charging | | | | | | | | (online | | | | | | | | as well | | | | | | | | as | | | | | | | | offline) | | | | | | | | and usage | | | | | | | | m | | | | | | | | onitoring | | | | | | | | functio | | | | | | | | nalities. | | | | | +-----------+-----------+-----------+-----------+-----------+-----+---+ | NOTE 1: | | | | | | | | The PDN | | | | | | | | session | | | | | | | | co | | | | | | | | rrelation | | | | | | | | ID is | | | | | | | | a | | | | | | | | pplicable | | | | | | | | when the | | | | | | | | CP | | | | | | | | function | | | | | | | | selects | | | | | | | | the same | | | | | | | | UP | | | | | | | | function | | | | | | | | for | | | | | | | | different | | | | | | | | PDN | | | | | | | | c | | | | | | | | onnection | | | | | | | | of the | | | | | | | | same UE. | | | | | | | +-----------+-----------+-----------+-----------+-----------+-----+---+
Editor\'s note: If the above attributes cover everything or more attributes
are needed is FFS.
## B.1.2 Policy Rule
Following attributes are applicable to the Policy-Rule.
Table B.1.2-1: Attributes within Policy Rule
* * *
Attribute Description Comment Applicability Spec. reference  
SGW PDN GW TDF  
Policy-Rule-ID Unique identifier to identify this rule. X X  
Service-Data-Flow-Template Either a list of service data flow filters or an
application identifier that references the corresponding application detection
filter for the detection of the service data flow. Multiple instances, to
describe different service data flows, are allowed. X X TS 23.203 [4] Table
6.3 Precedence Precedence associated with this rule. It determines the order
in which the rules are applied to a transmitted packet. When the Service-Data-
Flow of different rules overlap with each other then the rule with a lower
precedence value is applied before the rule with a higher precedence value. X
X TS 23.203 [4] Table 6.3 Maximum-Bit-Rate The uplink/downlink maximum bitrate
authorized for the service data flows identified under this policy rule. X X
TS 23.203 [4] Table 6.3 Guaranteed-Bit-Rate The uplink/downlink guaranteed
bitrate authorized for the service data flows identified under this policy
rule. X TS 23.203 [4] Table 6.3 Gate-Status Indicates if the traffic,
corresponding to the service data flows identified under this policy rule, may
pass or shall be discarded. X X TS 23.203 [4] Table 6.3 Traffic-Steering-
Policy Identifies a locally configured traffic steering policy which is to be
applied on the traffic identified under this policy. X X TS 23.203 [4] Table
6.3
* * *
Editor\'s note: Support for Redirection information (TS 23.203 [4] Table 6.3)
is FFS.
Editor\'s note: Support for Pause Charging feature is FFS.
Editor\'s note: Whether GBR need to be provided to UP function is FFS.
## B.1.3 Bearer Info
Following attributes are applicable to the Bearer-Info.
Table B.1.3-1 Attributes within Bearer Info
+---------+---------+---------+---------+---------+-----+---------+ | At | Desc | Comment | Applic | Spec. | | | | tribute | ription | | ability | re | | | | | | | | ference | | | +---------+---------+---------+---------+---------+-----+---------+ | | | | SGW | PDN GW | TDF | | +---------+---------+---------+---------+---------+-----+---------+ | Be | Unique | | X | X | | | | arer-ID | ide | | | | | | | | ntifier | | | | | | | | to | | | | | | | | i | | | | | | | | dentify | | | | | | | | this | | | | | | | | infor | | | | | | | | mation. | | | | | | +---------+---------+---------+---------+---------+-----+---------+ | L | List of | | | X | | | | ist-of- | Policy- | | | | | | | Policy- | Rule-ID | | | | | | | Rule-ID | (of | | | | | | | | Poli | | | | | | | | cy-Rule | | | | | | | | att | | | | | | | | ribute) | | | | | | | | which | | | | | | | | ide | | | | | | | | ntifies | | | | | | | | the | | | | | | | | service | | | | | | | | data | | | | | | | | flows | | | | | | | | which | | | | | | | | are | | | | | | | | bound | | | | | | | | to this | | | | | | | | bearer. | | | | | | +---------+---------+---------+---------+---------+-----+---------+ | S | The S5 | The | X | X | | | | 5-FTEID | GTP-U | service | | | | | | | IP | data | | | | | | | address | flow | | | | | | | and | ide | | | | | | | TEID | ntified | | | | | | | for | by the | | | | | | | this | L | | | | | | | bearer. | ist-of- | | | | | | | This is | Policy- | | | | | | | used by | Rule-ID | | | | | | | the | and | | | | | | | peer | this | | | | | | | node | pa | | | | | | | while | rameter | | | | | | | sending | t | | | | | | | the | ogether | | | | | | | traffic | allows | | | | | | | corres | the PDN | | | | | | | ponding | GW to | | | | | | | to this | verify | | | | | | | bearer | the | | | | | | | over | uplink | | | | | | | the S5 | bearer | | | | | | | int | b | | | | | | | erface. | inding. | | | | | +---------+---------+---------+---------+---------+-----+---------+ | Peer-S | The S5 | The | X | X | | | | 5-FTEID | GTP-U | service | | | | | | | IP | data | | | | | | | address | flow | | | | | | | and | ide | | | | | | | TEID of | ntified | | | | | | | the | by the | | | | | | | peer | L | | | | | | | node | ist-of- | | | | | | | which | Policy- | | | | | | | should | Rule-ID | | | | | | | be | and | | | | | | | applied | this | | | | | | | for | pa | | | | | | | this | rameter | | | | | | | bearer | t | | | | | | | while | ogether | | | | | | | sending | allows | | | | | | | the | the PDN | | | | | | | traffic | GW to | | | | | | | over | perform | | | | | | | the S5 | bearer | | | | | | | in | binding | | | | | | | terface | functio | | | | | | | to the | nality. | | | | | | | peer. | | | | | | +---------+---------+---------+---------+---------+-----+---------+ | S | The S1 | | X | | | | | 1-FTEID | GTP-U | | | | | | | | IP | | | | | | | | address | | | | | | | | and | | | | | | | | TEID | | | | | | | | for | | | | | | | | this | | | | | | | | bearer. | | | | | | | | This is | | | | | | | | used by | | | | | | | | the | | | | | | | | peer | | | | | | | | node | | | | | | | | while | | | | | | | | sending | | | | | | | | the | | | | | | | | uplink | | | | | | | | traffic | | | | | | | | corres | | | | | | | | ponding | | | | | | | | to this | | | | | | | | bearer. | | | | | | +---------+---------+---------+---------+---------+-----+---------+ | Peer-S | The S1 | | X | | | | | 1-FTEID | GTP-U | | | | | | | | IP | | | | | | | | address | | | | | | | | and | | | | | | | | TEID of | | | | | | | | the | | | | | | | | peer | | | | | | | | node | | | | | | | | which | | | | | | | | should | | | | | | | | be | | | | | | | | applied | | | | | | | | for | | | | | | | | this | | | | | | | | bearer | | | | | | | | while | | | | | | | | sending | | | | | | | | the | | | | | | | | traffic | | | | | | | | over | | | | | | | | the | | | | | | | | S1-U | | | | | | | | in | | | | | | | | terface | | | | | | | | to the | | | | | | | | peer. | | | | | | +---------+---------+---------+---------+---------+-----+---------+ | Ma | The | | | X | | T | | ximum-B | u | | | | | S 23.20 | | it-Rate | plink/d | | | | | 3 [4] | | | ownlink | | | | | Table | | | maximum | | | | | 6.3 | | | bitrate | | | | | | | | aut | | | | | | | | horized | | | | | | | | for the | | | | | | | | bearer. | | | | | | +---------+---------+---------+---------+---------+-----+---------+ | Tr | Tr | For | X | X | X | 23.401 | | ansport | ansport | TDF, | | | | sec. | | -Level- | level | this is | | | | 4 | | Marking | packet | app | | | | .4.3.2, | | | marking | licable | | | | 4.4.3.3 | | | in the | only in | | | | | | | uplink | d | | | | | | | and | ownlink | | | | | | | do | dir | | | | | | | wnlink, | ection. | | | | | | | e.g. | | | | | | | | setting | | | | | | | | the | | | | | | | | D | | | | | | | | iffServ | | | | | | | | Code | | | | | | | | Point, | | | | | | | | to be | | | | | | | | applied | | | | | | | | for the | | | | | | | | traffic | | | | | | | | ide | | | | | | | | ntified | | | | | | | | for | | | | | | | | this | | | | | | | | bearer. | | | | | | +---------+---------+---------+---------+---------+-----+---------+ | Ex | GTP-U | The CP | X | X | | | | tension | ex | f | | | | | | Header | tension | unction | | | | | | | header | p | | | | | | | for the | rovides | | | | | | | d | the | | | | | | | ownlink | ex | | | | | | | p | tension | | | | | | | ackets. | header | | | | | | | | (e.g. | | | | | | | | SCI) | | | | | | | | and its | | | | | | | | value | | | | | | | | for | | | | | | | | this | | | | | | | | bearer. | | | | | | | | | | | | | | | | For | | | | | | | | Serving | | | | | | | | GW, | | | | | | | | this | | | | | | | | may | | | | | | | | simply | | | | | | | | i | | | | | | | | ndicate | | | | | | | | to copy | | | | | | | | the | | | | | | | | ex | | | | | | | | tension | | | | | | | | header | | | | | | | | from | | | | | | | | S5-U to | | | | | | | | S1-U. | | | | | +---------+---------+---------+---------+---------+-----+---------+
Editor\'s note: If QCI and/or ARP need to be provided to UP function is FFS.
## B.1.4 Usage Reporting Rule
Following attributes are applicable to the Usage-Reporting-Rule.
Table B.1.4-1 Attributes within Usage Reporting Rule
+---------+---------+---------+---------+---------+-----+---------+ | At | Desc | Comment | Applic | Spec. | | | | tribute | ription | | ability | re | | | | | | | | ference | | | +---------+---------+---------+---------+---------+-----+---------+ | | | | SGW | PDN GW | TDF | | +---------+---------+---------+---------+---------+-----+---------+ | Rule-ID | Unique | I | | X | X | | | | ide | ncluded | | | | | | | ntifier | in the | | | | | | | to | usage | | | | | | | i | report | | | | | | | dentify | to | | | | | | | this | i | | | | | | | rule. | dentify | | | | | | | | the | | | | | | | | rule | | | | | | | | for | | | | | | | | which | | | | | | | | usage | | | | | | | | report | | | | | | | | is | | | | | | | | gen | | | | | | | | erated. | | | | | +---------+---------+---------+---------+---------+-----+---------+ | Rule-Op | In | New | | | | | | eration | dicates | Rule-ID | | | | | | | the | is | | | | | | | re | p | | | | | | | quested | rovided | | | | | | | op | with | | | | | | | eration | ADD | | | | | | | for the | ope | | | | | | | R | ration. | | | | | | | ule-ID: | MODIFY | | | | | | | ADD, | and | | | | | | | MODIFY, | DELETE | | | | | | | DELETE. | op | | | | | | | | eration | | | | | | | | can be | | | | | | | | used | | | | | | | | with | | | | | | | | e | | | | | | | | xisting | | | | | | | | Rule-ID | | | | | | | | only, | | | | | | | | i.e. | | | | | | | | the | | | | | | | | Rule-ID | | | | | | | | pre | | | | | | | | viously | | | | | | | | p | | | | | | | | rovided | | | | | | | | with | | | | | | | | ADD | | | | | | | | ope | | | | | | | | ration. | | | | | +---------+---------+---------+---------+---------+-----+---------+ | Lis | List of | App | X | X | | | | t-of-Be | Be | licable | | | | | | arer-ID | arer-ID | for | | | | | | | iden | bearer | | | | | | | tifying | level | | | | | | | the | usage | | | | | | | bearer | report. | | | | | | | (and | | | | | | | | its | | | | | | | | corres | | | | | | | | ponding | | | | | | | | t | | | | | | | | raffic) | | | | | | | | for | | | | | | | | which | | | | | | | | this | | | | | | | | rule | | | | | | | | a | | | | | | | | pplies. | | | | | | +---------+---------+---------+---------+---------+-----+---------+ | L | List of | The CP | | X | X | | | ist-of- | Policy- | f | | | | | | Policy- | Rule-ID | unction | | | | | | Rule-ID | (of | uses | | | | | | | Poli | Ratin | | | | | | | cy-Rule | g-group | | | | | | | att | and/or | | | | | | | ribute) | Monitor | | | | | | | which | ing-key | | | | | | | ide | and/or | | | | | | | ntifies | Sp | | | | | | | the | onsor-I | | | | | | | service | dentity | | | | | | | data | r | | | | | | | flows | eceived | | | | | | | for | from | | | | | | | which | the | | | | | | | this | PCRF to | | | | | | | rule | g | | | | | | | a | enerate | | | | | | | pplies. | this | | | | | | | | list | | | | | | | | and | | | | | | | | also | | | | | | | | keeps | | | | | | | | the | | | | | | | | mapping | | | | | | | | between | | | | | | | | them | | | | | | | | (so | | | | | | | | that | | | | | | | | those | | | | | | | | ide | | | | | | | | ntities | | | | | | | | can be | | | | | | | | used | | | | | | | | while | | | | | | | | re | | | | | | | | porting | | | | | | | | over | | | | | | | | the Gx, | | | | | | | | Gy or | | | | | | | | Gz | | | | | | | | inter | | | | | | | | faces). | | | | | | | | | | | | | | | | This | | | | | | | | list | | | | | | | | can | | | | | | | | overlap | | | | | | | | across | | | | | | | | m | | | | | | | | ultiple | | | | | | | | Usag | | | | | | | | e-Repor | | | | | | | | t-Rule, | | | | | | | | i.e. | | | | | | | | m | | | | | | | | ultiple | | | | | | | | di | | | | | | | | fferent | | | | | | | | Usag | | | | | | | | e-Repor | | | | | | | | t-Rules | | | | | | | | may | | | | | | | | contain | | | | | | | | the | | | | | | | | same | | | | | | | | Policy- | | | | | | | | Rule-ID | | | | | | | | in the | | | | | | | | Li | | | | | | | | st-of-P | | | | | | | | olicy-R | | | | | | | | ule-ID. | | | | | | | | This is | | | | | | | | r | | | | | | | | equired | | | | | | | | to | | | | | | | | support | | | | | | | | di | | | | | | | | fferent | | | | | | | | g | | | | | | | | rouping | | | | | | | | of | | | | | | | | service | | | | | | | | data | | | | | | | | flows | | | | | | | | for | | | | | | | | di | | | | | | | | fferent | | | | | | | | p | | | | | | | | urpose, | | | | | | | | e.g. | | | | | | | | one | | | | | | | | Usa | | | | | | | | ge-Repo | | | | | | | | rt-Rule | | | | | | | | may be | | | | | | | | for | | | | | | | | c | | | | | | | | harging | | | | | | | | purpose | | | | | | | | while | | | | | | | | the | | | | | | | | other | | | | | | | | one | | | | | | | | could | | | | | | | | be for | | | | | | | | Usage | | | | | | | | Mon | | | | | | | | itoring | | | | | | | | p | | | | | | | | urpose. | | | | | | | | | | | | | | | | If this | | | | | | | | pa | | | | | | | | rameter | | | | | | | | is | | | | | | | | e | | | | | | | | xcluded | | | | | | | | then | | | | | | | | the | | | | | | | | Usa | | | | | | | | ge-Repo | | | | | | | | rt-Rule | | | | | | | | applies | | | | | | | | to the | | | | | | | | entire | | | | | | | | traffic | | | | | | | | be | | | | | | | | longing | | | | | | | | to the | | | | | | | | PDN | | | | | | | | conn | | | | | | | | ection. | | | | | +---------+---------+---------+---------+---------+-----+---------+ | Re | One or | App | | | | | | porting | m | licable | | | | | | -Events | ultiple | events | | | | | | | of the | are: | | | | | | | events | Sta | | | | | | | can be | rt-Of-T | | | | | | | ac | raffic; | | | | | | | tivated | St | | | | | | | for the | op-Of-T | | | | | | | gen | raffic; | | | | | | | eration | Rule-De | | | | | | | and | letion; | | | | | | | re | Time- | | | | | | | porting | of-Day- | | | | | | | of the | for-Rep | | | | | | | usage | orting; | | | | | | | report. | Volum | | | | | | | | e-Usage | | | | | | | | -Quota; | | | | | | | | Tim | | | | | | | | e-Usage | | | | | | | | -Quota; | | | | | | | | Quota | | | | | | | | -Idle-T | | | | | | | | imeout; | | | | | | | | Event | | | | | | | | -based; | | | | | | | | Imm | | | | | | | | ediate- | | | | | | | | Report. | | | | | +---------+---------+---------+---------+---------+-----+---------+ | Lis | List of | This | | X | X | T | | t-of-Ex | Policy- | pa | | | | S 23.20 | | cluded- | Rule-ID | rameter | | | | 3 [4] | | Policy- | (of | is | | | | Table | | Rule-ID | Poli | app | | | | 6.3 | | | cy-Rule | licable | | | | | | | att | when | | | | | | | ribute) | PDN | | | | | | | which | con | | | | | | | ide | nection | | | | | | | ntifies | level | | | | | | | the | usage | | | | | | | service | report | | | | | | | data | is | | | | | | | flows | ac | | | | | | | (and | tivated | | | | | | | its | by | | | | | | | corres | ex | | | | | | | ponding | cluding | | | | | | | t | the | | | | | | | raffic) | L | | | | | | | which | ist-Of- | | | | | | | shall | Policy- | | | | | | | be | Rule-ID | | | | | | | e | par | | | | | | | xcluded | ameter. | | | | | | | from | | | | | | | | the | | | | | | | | usage | | | | | | | | report | | | | | | | | of this | | | | | | | | rule. | | | | | | +---------+---------+---------+---------+---------+-----+---------+ | Time | Various | This | X | X | X | | | -Of-Day | comb | allows | | | | | | -for-Re | ination | gen | | | | | | porting | of the | eration | | | | | | | time of | of | | | | | | | day can | p | | | | | | | be | eriodic | | | | | | | pr | usage | | | | | | | ovided, | report | | | | | | | e.g. at | for | | | | | | | 1200 | e.g. | | | | | | | hrs; | offline | | | | | | | Sunday | ch | | | | | | | at 1500 | arging. | | | | | | | hrs; | It can | | | | | | | 20th of | also be | | | | | | | the | used | | | | | | | month | for | | | | | | | at 0000 | pr | | | | | | | hrs; | oviding | | | | | | | etc. | M | | | | | | | When | onitori | | | | | | | the | ng-Time | | | | | | | corres | for the | | | | | | | ponding | usage | | | | | | | time is | mon | | | | | | | r | itoring | | | | | | | eached, | f | | | | | | | the | eature. | | | | | | | usage | | | | | | | | report | | | | | | | | is | | | | | | | | gen | | | | | | | | erated. | | | | | | +---------+---------+---------+---------+---------+-----+---------+ | Grant | Quota | The | | X | X | T | | ed-Volu | in | usage | | | | S 23.20 | | me-Usag | terms | meas | | | | 3 [4] | | e-Quota | of | urement | | | | Table | | | uplink | starts | | | | 6.6 | | | and/or | on the | | | | | | | d | act | | | | | | | ownlink | ivation | | | | | | | and/or | of the | | | | | | | total | usage | | | | | | | byt | rule | | | | | | | e-count | and | | | | | | | is | co | | | | | | | pr | ntinues | | | | | | | ovided. | until | | | | | | | When | the | | | | | | | number | deact | | | | | | | of | ivation | | | | | | | bytes | of the | | | | | | | corres | same or | | | | | | | ponding | exh | | | | | | | to the | austion | | | | | | | p | of the | | | | | | | rovided | quotas. | | | | | | | quota | When | | | | | | | are | m | | | | | | | trans | ultiple | | | | | | | mitted, | quotas | | | | | | | the | are | | | | | | | usage | pr | | | | | | | report | ovided, | | | | | | | is | e.g. | | | | | | | gen | uplink | | | | | | | erated. | and | | | | | | | | do | | | | | | | | wnlink, | | | | | | | | both | | | | | | | | quotas | | | | | | | | are | | | | | | | | pr | | | | | | | | ovided, | | | | | | | | the | | | | | | | | usage | | | | | | | | report | | | | | | | | is | | | | | | | | ge | | | | | | | | nerated | | | | | | | | when | | | | | | | | anyone | | | | | | | | of the | | | | | | | | quota | | | | | | | | gets | | | | | | | | ex | | | | | | | | hausted | | | | | | | | first. | | | | | +---------+---------+---------+---------+---------+-----+---------+ | Gra | Quota | The | | X | X | T | | nted-Ti | in | usage | | | | S 23.20 | | me-Usag | terms | meas | | | | 3 [4] | | e-Quota | of the | urement | | | | Table | | | time | starts | | | | 6.6 | | | d | on | | | | | | | uration | trans | | | | | | | (e.g. | mission | | | | | | | in | of the | | | | | | | s | first | | | | | | | econds) | packet | | | | | | | is | after | | | | | | | pr | the | | | | | | | ovided. | act | | | | | | | When | ivation | | | | | | | the | of the | | | | | | | quota | usage | | | | | | | corres | rule | | | | | | | ponding | and | | | | | | | this | co | | | | | | | time | ntinues | | | | | | | d | until | | | | | | | uration | the | | | | | | | is | deact | | | | | | | co | ivation | | | | | | | nsumed, | of the | | | | | | | the | same or | | | | | | | usage | exh | | | | | | | report | austion | | | | | | | is | of the | | | | | | | gen | quotas. | | | | | | | erated. | | | | | | | | | Also | | | | | | | | i | | | | | | | | ncludes | | | | | | | | Inact | | | | | | | | ivity-D | | | | | | | | etectio | | | | | | | | n-Time, | | | | | | | | d | | | | | | | | uration | | | | | | | | in | | | | | | | | terms | | | | | | | | of | | | | | | | | seconds | | | | | | | | during | | | | | | | | which | | | | | | | | if no | | | | | | | | traffic | | | | | | | | passes | | | | | | | | then | | | | | | | | the | | | | | | | | time | | | | | | | | based | | | | | | | | quota | | | | | | | | meas | | | | | | | | urement | | | | | | | | is | | | | | | | | paused. | | | | | | | | The | | | | | | | | time | | | | | | | | based | | | | | | | | quota | | | | | | | | meas | | | | | | | | urement | | | | | | | | is | | | | | | | | resumed | | | | | | | | when | | | | | | | | first | | | | | | | | packet | | | | | | | | is | | | | | | | | tran | | | | | | | | smitted | | | | | | | | again. | | | | | +---------+---------+---------+---------+---------+-----+---------+ | Quot | Idle | When no | | X | X | | | a-Idle- | timeout | traffic | | | | | | Timeout | d | for the | | | | | | | uration | d | | | | | | | for the | uration | | | | | | | granted | of this | | | | | | | quota. | time | | | | | | | | passes, | | | | | | | | the | | | | | | | | granted | | | | | | | | quota | | | | | | | | (i.e. | | | | | | | | Volu | | | | | | | | me-Usag | | | | | | | | e-Quota | | | | | | | | and/or | | | | | | | | Tim | | | | | | | | e-Usage | | | | | | | | -Quota) | | | | | | | | is | | | | | | | | assumed | | | | | | | | to be | | | | | | | | expired | | | | | | | | and the | | | | | | | | usage | | | | | | | | report | | | | | | | | is | | | | | | | | gen | | | | | | | | erated. | | | | | | | | Timer | | | | | | | | corres | | | | | | | | ponding | | | | | | | | to this | | | | | | | | d | | | | | | | | uration | | | | | | | | is | | | | | | | | re | | | | | | | | started | | | | | | | | and the | | | | | | | | end of | | | | | | | | each | | | | | | | | tran | | | | | | | | smitted | | | | | | | | packet. | | | | | +---------+---------+---------+---------+---------+-----+---------+ | Event-b | Points | | | X | X | T | | ased-re | to a | | | | | S 23.20 | | porting | locally | | | | | 3 [4] | | | con | | | | | Table | | | figured | | | | | 6.3 | | | policy | | | | | | | | which | | | | | | | | is | | | | | | | | ide | | | | | | | | ntifies | | | | | | | | e | | | | | | | | vent(s) | | | | | | | | trigger | | | | | | | | for | | | | | | | | gen | | | | | | | | erating | | | | | | | | usage | | | | | | | | report. | | | | | | +---------+---------+---------+---------+---------+-----+---------+
Editor\'s note: For supporting the quota consumption based on time, other
parameters related to Combinational quota (from TS 32.299 clause 6.5.7) need
to be added and it is FFS.
Editor\'s note: In the above proposal, the session level Usage monitoring is
activated by excluding List-of-Policy-Rule-ID and conditionally including
List-of-Excluded-Policy-Rule-ID. Alternative approach is to provide a separate
monitoring Rule-ID for the session level monitoring. The final approach is
FFS.
Editor\'s note: On quota exhaustion, the UP function may need to be instructed
to take some action, e.g. close the gate or allow the traffic to flow. It is
FFS.
> NOTE: When the granted-quota are exhausted, the reporting is done by the UP
> function. In the response, the CP function can provide subsequent-granted-
> quota and this is how \"subsequent threshold\" related functionality defined
> in TS 23.203 [4] table 6.6 can be supported.
# B.2 During the Usage Report generated by UP function
The UP function provides the usage report for each of the active Usage-
Reporting-Rule. For each usage reporting rule, the usage report is generated
repeatedly, i.e. on any one of the valid event trigger, until the usage rule
is active. Following attributes are included in the usage report:
Table B.2-1 Attributes within Usage Report
+-----------+-----------+-----------+-----------+-----------+-----+---+ | Attribute | De | Comment | Appl | Spec. | | | | | scription | | icability | reference | | | +-----------+-----------+-----------+-----------+-----------+-----+---+ | | | | SGW | PDN GW | TDF | | +-----------+-----------+-----------+-----------+-----------+-----+---+ | Rule-ID | Unique | | X | X | X | | | | i | | | | | | | | dentifier | | | | | | | | to | | | | | | | | identify | | | | | | | | this | | | | | | | | rule. | | | | | | +-----------+-----------+-----------+-----------+-----------+-----+---+ | Reportin | I | A | X | X | X | | | g-Trigger | dentifies | pplicable | | | | | | | the | values | | | | | | | trigger | are: | | | | | | | for the | Start-Of | | | | | | | usage | -Traffic; | | | | | | | report. | Stop-Of | | | | | | | | -Traffic; | | | | | | | | Rule- | | | | | | | | Deletion; | | | | | | | | Time-of | | | | | | | | -Day-for- | | | | | | | | Reporting | | | | | | | | -reached; | | | | | | | | V | | | | | | | | olume-Usa | | | | | | | | ge-Quota- | | | | | | | | e | | | | | | | | xhausted; | | | | | | | | Time-Usag | | | | | | | | e-Quota-e | | | | | | | | xhausted; | | | | | | | | Quota-Idl | | | | | | | | e-Timeout | | | | | | | | -reached; | | | | | | | | Ev | | | | | | | | ent-based | | | | | | | | -trigger; | | | | | | | | Immediate | | | | | | | | -Report-r | | | | | | | | equested. | | | | | +-----------+-----------+-----------+-----------+-----------+-----+---+ | S | Provides | | X | X | X | | | tart-Time | the | | | | | | | | t | | | | | | | | imestamp, | | | | | | | | in terms | | | | | | | | of | | | | | | | | absolute | | | | | | | | time, | | | | | | | | when the | | | | | | | | c | | | | | | | | ollection | | | | | | | | of the | | | | | | | | in | | | | | | | | formation | | | | | | | | provided | | | | | | | | within | | | | | | | | Usage-In | | | | | | | | formation | | | | | | | | is | | | | | | | | started. | | | | | | +-----------+-----------+-----------+-----------+-----------+-----+---+ | End-Time | Provides | | X | X | X | | | | the | | | | | | | | t | | | | | | | | imestamp, | | | | | | | | in terms | | | | | | | | of | | | | | | | | absolute | | | | | | | | time, | | | | | | | | when the | | | | | | | | in | | | | | | | | formation | | | | | | | | provided | | | | | | | | within | | | | | | | | Usage-In | | | | | | | | formation | | | | | | | | is | | | | | | | | g | | | | | | | | enerated. | | | | | | +-----------+-----------+-----------+-----------+-----------+-----+---+ | Usage-In | Provides | All the | X | X | X | | | formation | in | byte | | | | | | | formation | counts | | | | | | | related | are set | | | | | | | to the | to \"0\" | | | | | | | traffic | on | | | | | | | consumed | g | | | | | | | for a | eneration | | | | | | | given | of the | | | | | | | usage | usage | | | | | | | rule, | report. | | | | | | | using the | | | | | | | | pa | T | | | | | | | rameters: | ime-Usage | | | | | | | Uplink-by | provides | | | | | | | te-count; | amount, | | | | | | | Do | in terms | | | | | | | wnlink-by | of sec., | | | | | | | te-count; | of | | | | | | | Total-by | consumed | | | | | | | te-count; | Granted | | | | | | | Ti | -Time-Usa | | | | | | | me-Usage. | ge-Quota. | | | | | | | | A | | | | | | | | pplicable | | | | | | | | only if | | | | | | | | Grante | | | | | | | | d-Time-Us | | | | | | | | age-Quota | | | | | | | | is | | | | | | | | provided | | | | | | | | within | | | | | | | | Usa | | | | | | | | ge-Report | | | | | | | | ing-Rule. | | | | | +-----------+-----------+-----------+-----------+-----------+-----+---+
Editor\'s note: If the above attributes cover everything or more attributes
are needed is FFS.
#