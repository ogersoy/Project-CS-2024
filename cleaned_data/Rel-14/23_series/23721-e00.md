# Foreword
This Technical Report has been produced by the 3^rd^ Generation Partnership
Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The scope of the present document is to study sponsored data connectivity
improvements including:
\- Solutions for sponsored data connectivity to cope with the increasing
configuration update capacity requirements, possible maintenance difficulties
and long deployment cycle. This work covers both PCEF and TDF.
\- Solutions for provisioning of the information needed to support detection
while traffic is encrypted in the operator\'s network for sponsored data
services. This work includes identification of the required information. This
work covers both PCEF and TDF.
\- Introduce sponsored data connectivity functionality to TDF as currently
exists in case of PCEF.
Normative specifications should be developed based on the evaluations and
conclusions of this study item.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 23.682: \"Architecture enhancements to facilitate communications
with packet data networks and applications\".
[3] 3GPP TS 23.203: \"Policy and charging control architecture\".
[4] ETSI GS NFV 002: \"Network Functions Virtualisation (NFV); Architectural
Framework\".
# 3 Definitions and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
TR 21.905 [1] and the following apply.\ A term defined in the present document
takes precedence over the definition of the same term, if any, in TR 21.905
[1].
**Sponsored data related rule:** It includes 1) the PFD information
identifying sponsored data packets, 2) correlation identifier, 3) charging
key.
**Sponsored data related information:** It includes the 1) correlation
identifier, 2) charging key.
**SDC information:** The information of sponsored data connectivity defined in
clause 5.2.1 in TS 23.203 [3].
**Sponsored data service** : Consuming some certain kind of traffic for free.
**Application Service Provider:** the business entity that provides the
service. See TS 23.203 [3].
**Packet Flow Description** : A template to enable detection of IP-flows to
identify a service provided by an ASP. The template includes, for example, a
3-tuple including protocol, server side IP address and port number or the
significant parts of the URL to be matched, e.g. host name.
**Sponsor:** The business entity taking all or part of the cost of the
connectivity. The sponsor has a business relationship with the MNO. The
Sponsor may restrict usage to certain users. See TS 23.203 [3].
**Sponsored Data Connectivity Information:** It consists of a) the
identification of the sponsor and b) the identification of the Application
Service Provider (ASP) and its applications (Application Identifier(s) and
optionally c) a usage threshold to limit the amount of data or time the user
connectivity is sponsored. See TS 23.203 [3], clause 6.2.1 for the definition
of sponsored data connectivity information.
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in TR 21.905
[1] apply.
# 4 Architectural Assumptions and Requirements
It shall be possible for the 3^rd^ party service provider to add/update/delete
information related to sponsored data connectivity for provisioning in the
operator network. This information should be validated within operator\'s
network before being accepted in the operator\'s network.
The provisioning of the information shall be independent of any user and of
any IP-CAN session.
The information related to sponsored data connectivity shall be provided
towards the operator network in a secure manner.
NOTE: This is needed since the 3rd party service providers may not be in the
operators\' trusted domain.
The enhancements to sponsored data functionality shall be applied either for
all subscribers, or for a group of subscribers as nominated by the sponsor.
# 5 Key Issues
## 5.1 Key Issue 1 - Provisioning of Packet Flow description.
### 5.1.1 Description
According to existing specifications, operators are able to deploy sponsored
data connectivity service since release 10, the sponsor is able to send
different information to the operator (e.g. data flow description, charging,
usage, QoS) in order to sponsor service data flow or application. Moreover,
the existing procedures occur when the user is setting up a media application
inside an existing IP-CAN session.
The current PCC architecture is designed to identify services based on
IP-5-uple or application identifier predefined in the operator domain (PGW or
TDF) per individual subscriber IP-CAN session.
However, this requirement is not fully adapted for the following use cases:
\- sponsors desire to send Packet Flow descriptions beyond layer 3(i.e.
currently, only a static configuration in operator network is supported);
\- sponsors desire to provision one or more Packet Flow descriptions at once
and outside the context of the current individual subscriber IP-CAN session.
This key issue shall study the following aspects:
1\. How to support provisioning of Packet Flow descriptions beyond layer 3
(e.g. URLs) from 3rd-party service providers to operator networks.
2\. How to provision the operator with one or more Packet Flow descriptions
representing services to be sponsored, outside the context of a current
individual subscriber IP-CAN session.
## 5.2 Key Issue 2 - Managing sponsored data connectivity information inside
the operator\'s network
### 5.2.1 Description
Currently, many layer 3, 4 and 7 sponsored data connectivity information needs
to be pre-configured in PCEFs/TDFs, however with the increasing capacity and
updating frequency, the maintenance /development cycle will be a challenge to
efficiently manage the sponsored data connectivity information.
This key issue aims to study how to improve the existing management mechanism
for sponsored data connectivity information.
It includes how the MNO distributes the information related to sponsored data
connectivity to the PCEF/TDF.
## 5.3 Key Issue 3 - Encrypted traffic detection
### 5.3.1 Description
Currently, while supporting sponsored data connectivity, for an encrypted
traffic, service data flow detection on L4 to L7 in the PCEF and application
detection on L4 to L7 in the TDF can\'t be done by using standardized means.
This key issue shall study the following aspects:
1\. Identification of the required information for service data flow detection
in the PCEF and application detection in the TDF when traffic is encrypted.
NOTE: The study of this key issue will take into account any agreed potential
extensions of traffic identification used for detection (e.g. URLs
identification).
2\. Solutions for provisioning of such information in the operator\'s network.
The study will apply both to the PCEF and to the TDF.
## 5.4 Key Issue 4 - TDF based sponsored data connectivity
### 5.4.1 Description
TDF based sponsored data connectivity is not supported currently within our
specifications. One of this study\'s defined objectives is to introduce
sponsored data connectivity functionality to TDF as currently exists in case
of PCEF.
This key issue aims to capture this objective and reference TS 23.203 [3]
PCEF\'s existing sponsored data connectivity solution for standardizing TDF\'s
sponsored data connectivity functionality.
NOTE: Any additional functionality for TDF\' based sponsored data connectivity
agreed for other key issues\' solutions, will be added on top of this basic
functionality.
# 6 Solutions
## 6.1 Solution #1: Standalone SDCF based solution -Key Issue 2
### 6.1.1 Solution Description
#### 6.1.1.1 General description of the solution
This solution addresses key issue #2 (\"Managing sponsored data connectivity
information inside the operator\'s network\").
{width="4.427083333333333in" height="2.2083333333333335in"}
Figure 6.1.1.1-1: Standalone SDCF based solution
Sr1: the interface between SDCF and PCEF.
Sr2: the interface between SDCF and TDF.
Sponsored Data Connectivity Function (SDCF) is a functional entity that
configures sponsored data connectivity related information or receives
sponsored data connectivity related information from other function entity,
then based on operator\'s policy, it will decide whether to notify PCEF/TDF to
add, modify or remove the according sponsored data connectivity related
information.
NOTE 1: SDCF can be configured to communicate with PCEF/TDF periodically or
triggered by incoming request from other entity according to operator\'s
policy.
The TDF/PCEF stores sponsored data connectivity related information (SDCRI) as
public context, which can be applied to all UEs\' IP-CAN sessions. The SDCRI
includes sponsored data connectivity information, PFDs and charging key which
is allocated by SDCF.
Editor\'s note: It is FFS on how the packet detection works in PCEF/TDF
between PCC/ADC rules and this new mechanism and how PCEF/TDF handles the two
different charging keys received from SDCF and PCRF respectively and their
precedence for the same traffic data.
In order to be able to enable sponsored data connectivity information
provisioned by SDCF or PCRF for a specific UE\'s specific IP-CAN session, at
IP-CAN session establishment/modification procedure, PCRF will indicate to
PCEF/TDF whether the sponsored data connectivity information provisioned by
SDCF or PCRF is enabled for this UE\'s IP-CAN session. If PCRF indicates that
the SDCF provisioned sponsored data connectivity information is enabled, PCRF
will not include the sponsored data connectivity information in PCC/ADC rules
delivered to PCEF/TDF, then SDCF provisioned sponsored data connectivity
information is applied for this UE\'s IPCAN Session in PCEF/TDF; otherwise,
PCRF provisioned sponsored data connectivity information is applied for this
UE\'s IPCAN Session in PCEF/TDF as specified currently in TS 23.203 [3].
SDCF assigns charging key per sponsor basis, and PCEF/TDF includes the
received charging key in SDCRI from SDCF in the charging data record (CDR)
sent to OFCS, the Sponsor Identifier and Application Service Provider
Identifier are not included in such CDR. The correlation in OFCS for this kind
sponsor based CDR is performed based on the charging key.
NOTE 2: In order to avoid charging key clashes with PCRF, in deployment, a
block of charging keys can be reserved for SDCF to use for sponsored data.
The related procedures are illustrated in following clauses.
#### 6.1.1.2 Procedures
##### 6.1.1.2.1 Initial provisioning procedure
{width="4.916666666666667in" height="2.1666666666666665in"}
Figure 6.1.1.2.1-1: Initial provisioning procedure
1\. When there is a need to add new sponsored data connectivity related
information (SDCRI), SDCF sends an Add SDCRI Request message to PCEF/TDF. When
receiving the message, PCEF/TDF will store the SDCRI and start to count and
record the used service units, and start offline charging communication with
OFCS. The SDCRI carried in this message includes sponsored data connectivity
information, PFDs and charging key which is allocated by SDCF.
2\. TDF/PCEF responds with an Add SDCRI Response message to SDCF.
Editor\'s note: The details of the sponsored data connectivity information
over Sr1 and Sr2 (e.g. list of URLs, packet filters) are FFS.
##### 6.1.1.2.2 Modification procedure
{width="4.916666666666667in" height="2.1666666666666665in"}
Figure 6.1.1.2.2-1: Modification procedure
1\. When there is a need to modify new sponsored data connectivity related
information (SDCRI), SDCF sends a Modify SDCRI Request message to PCEF and TDF
respectively. When receiving the message, PCEF/TDF will modify the according
SDCRI and start to count and record the used service units, and start offline
charging communication with OFCS with using the new SDCRI, if required. The
SDCRI carried in this message includes sponsored data connectivity
information, PFDs and charging key which is allocated by SDCF.
2\. TDF/PCEF responds with a Modify SDCRI Response message to SDCF.
##### 6.1.1.2.3 Removal procedure
{width="4.916666666666667in" height="2.1666666666666665in"}
Figure 6.1.1.2.3-1: Removal procedure
1\. When there is a need to remove new sponsored data connectivity related
information (SDCRI), SDCF sends a Remove SDCRI Request message to PCEF and TDF
respectively including Sponsor Identity and Application Service Provider
Identity. When receiving the message, PCEF/TDF will remove the according SDCRI
and stop counting and recording the used service units, and stop offline
charging communication with OFCS as well.
2\. TDF/PCEF responds with a Remove SDCRI Response message to SDCF.
##### 6.1.1.2.4 Controlling sponsored data connectivity feature for a specific
UE by PCRF
##### 6.1.1.2.4.1 Indicating in IPCAN Session Establishment procedure
{#indicating-in-ipcan-session-establishment-procedure .H6}
Figure 6.1.1.2.4.1-1: Indicating in IPCAN Session Establishment procedure
The procedure in clause 7.2 of TS 23.203 [3] applies for this subclause except
for the changes in below:
In step 8, PCRF includes an indication whether SDCF or PCRF provisioned
sponsored data connectivity related information is enabled for this UE\'s
IPCAN session in TDF.
In step 12, PCRF includes an indication whether SDCF or PCRF provisioned
sponsored data connectivity related information is enabled for this UE\'s
IPCAN session in PCEF.
##### 6.1.1.2.4.2 Indicating in IPCAN Session Modification procedure
{#indicating-in-ipcan-session-modification-procedure .H6}
Figure 6.1.1.2.4.2-1: Indicating in GW initiated IPCAN Session Modification
procedure
The procedure in clause 7.4.1 of TS 23.203 [3] applies for this subclause
except for the changes in below:
In step 8, PCRF includes an indication whether SDCF or PCRF provisioned
sponsored data connectivity related information is enabled for this UE\'s
IPCAN session in TDF.
In step 12, PCRF includes an indication whether SDCF or PCRF provisioned
sponsored data connectivity related information is enabled for this UE\'s
IPCAN session in PCEF.
Figure 6.1.1.2.4.2-1: Indicating in PCRF initiated IPCAN Session Modification
procedure
The procedure in clause 7.4.2 of TS 23.203 [3] applies for this subclause
except for the changes in below:
In step 8, PCRF includes an indication whether SDCF or PCRF provisioned
sponsored data connectivity related information is enabled for this UE\'s
IPCAN session in TDF.
In step 12, PCRF includes an indication whether SDCF or PCRF provisioned
sponsored data connectivity related information is enabled for this UE\'s
IPCAN session in PCEF.
### 6.1.2 Impacts on existing nodes and functionality
SDCF:
\- New function entity that receives sponsored data connectivity related
information from other entity, then based on operator\'s policy, it will
decide whether to notify PCEF/TDF to add, modify or remove the according
sponsored data connectivity related information.
TDF/PCEF:
\- Receive Add/Modify/Remove SDCRI Request message from SDCF and respond with
the according Response message.
\- Store sponsored data connectivity related information (SDCRI) as public
context, which can be applied to all UEs\' IP-CAN sessions.
\- Decide whether to enable sponsored data connectivity feature for a specific
UE\'s specific IP-CAN session by following the indication from PCRF.
PCRF:
\- Indicate to PCEF/TDF whether the sponsored data connectivity information
provisioned by SDCF or PCRF is enabled for a specific UE\'s IP-CAN session.
> \- If PCRF indicates that SDCF provisioned sponsored data connectivity
> related information is enabled, PCRF doesn\'t send the sponsored data
> connectivity information to PCEF/TDF.6.1.3 Solution evaluation
This solution provides means to enhance the existing mechanism for sponsored
data connectivity information usage, the provisioned sponsored data
connectivity information can be independent of any user and any IP-CAN
session. At the same time, PCRF can still control whether to apply the SDCF or
PCRF provisioned sponsored data connectivity information in PCEF/TDF, which
gives flexibility to operator in deployment.
Editor\'s note: It is FFS on how the packet detection works in PCEF/TDF
between PCC/ADC rules and this new mechanism and how PCEF/TDF handles the two
different charging keys received from SDCF and PCRF respectively and their
precedence for the same traffic data.
## 6.2 Solution #2 - Provisioning of Packet Flow description outside the IP-
CAN session context -Key Issue 1
### 6.2.1 Solution Description
TS 23.682 [2] defines an interworking function for service capability
exposure, Service Capability Exposure Function (SCEF), used as mediator
between the third party service provider and the operator network. This
solution extends the SCEF capabilities to enable it to interact with the
operator\'s subscriber profile manager (SPR/UDR). In this way, third party
service providers may send service flow information directly to the operator
subscribers\' data base via the SCEF, at any time, without the need of UE
being attached to the network or a certain subscribers\' IP-CAN session being
activated. The PCC procedures are not impacted since the updated 3rd party
server description is stored in the SPR/UDR and used by the PCRF in the normal
PCC /ADC rule generation, thus the 3rd party server description of a currently
used service may be provided to the PCEF/TDF in the PCC/ADC rule according to
TS 23.203 [3] procedures. The solution addresses mainly Key Issue 1
\"Provisioning of Packet Flow description\". Since normal PCC procedures are
used in order to provision the service flow information to the PCEF/TDF, this
solution also addresses the Key Issue 2 \"Managing sponsored data connectivity
information inside the operator\'s network\".
When it comes to provide the new information stored at the SPR to the
PCEF/TDF, the PCRF faces two scenarios: new sessions that will require the
service information provided; and ongoing sessions that already use the
existing previous service information. For the first scenario, there is
nothing to be done as the new session requests will find already the new
information. As for the second scenario, i.e. ongoing sessions, the PCRF may
be triggered to update those sessions as specified in TS 23.203 [3], clause
7.5.
If the Packet Flow description information is represented in an IP 5-tuple
format, the PCRF can re-use the existing service data flow filters described
in TS 23.203 [3], clause 6.2.2.2, to deliver this information to the PCEF/TDF.
However if the Packet Flow description is represented in a format beyond the
previous one described (e.g. URL), enhancements on the Gx/Sd reference point
may be required to hold this information.
This solution addresses mainly Key Issue 1, \"Provisioning of Packet Flow
description\", however, and as described above, since it strives for the
reutilization of PCC procedures where possible it also addresses the Key Issue
2, \"Managing sponsored data connectivity information inside the operator\'s
network.\"
### 6.2.1.1 Flow Diagram
Figure 6.2.1 represents the flow diagram detailing the procedures for the
provisioning of packet flow description outside the IP-CAN session context.
Figure 6.2.1: Procedure for Third Party SP providing Service Flow Information
1\. The third party service provider has new packet flow information (e.g. new
IP@ or new URL/domain). This may happen, for example, because the third party
service provider decided to allocate new or different servers for the service
provided.
2\. The SCS/AS sends an SDF-List Provisioning Request (SCS/AS Reference ID,
SCS/AS Identifier, list of Packet Flow description(s)) to the SCEF.
This step may happen at any time, and is independent of any ongoing subscriber
IP-CAN session.
3\. The SCEF authorizes the SCS/AS request.
NOTE 1: The SCEF notifies the SCS/AS at this point if the authorization fails.
4\. The SCEF maps the SCS/AS Identifier, and the list of packet flow
description(s) of the application flows to the protocol serving the
communication towards the Subscription Profile Repository (SPR)/User Data
Repository (UDR).
NOTE 2: The Spt reference point protocol between the SCEF and SPR/UDR is not
to be standardized.
5\. The SCEF interacts with the SPR/UDR including the list of new packet flow
description and the corresponding identification of the third party service
provider.
6\. The SPR/UDR updates all the subscriber profiles listed as users of the
third party service provider with the new packet flow description. The
operator may maintain an association that the subscriber is a user of the
third party service, by having the application identifier (e.g. SCS/AS
Identifier) associated with the subscriber description. If previously
requested by the PCRF, as consequence of this step the SPR/UDR may also inform
the PCRF that the related subscription profile(s) of the ongoing IP-Can
sessions have been changed, according to the TS 23.203 [3], clause 7.5.
7\. The SPR/UDR replies back to the SCEF with information regarding the result
(success or non-success) of the operation.
8\. The SCEF replies to the third party service provider SCS/AS about the
result (success or non-success) of the operation.
After this procedure, whenever the PCRF is taking a decision on the PCC/ADC
Rules to apply to a new IP-CAN session, and consults the SPR/UDR to gather
subscriber information (step 4 of 7.2 flow of TS 23.203 [3]), the SPR/UDR is
already up to date with the latest third party service provider packet flow
description information.
For the case where an update of the ongoing sessions is needed, a trigger
event can occur at the PCRF, as consequence of step 6, coming from the SPR,
indicating that the profile information has changed, according to TS 23.203
[3], clause 7.5.
### 6.2.2 Impacts on existing nodes and functionality
The main impact of this proposal is in the SCEF specification: a new reference
point (Spt) between the SCEF and the SPR/UDR.
The protocol for the reference point between SCEF and SPR/UDR is not intended
to be specified by 3GPP and is used here not on a per subscription basis but
to store global data (providing the packet flow descriptions).
Figure 6.2.2 proposes an update to Figure 4.2-2 of TS 23.682 [2].
Figure 6.2.3: Architecture for Service Capability Exposure updated with Sdt
Reference Point
For the case where the packet flow descriptions are transferred to the UDR,
then possible enhancements might be required to allow the Ud Reference Point
to handle data not associated with an individual user but associated with ASP.
If the packet flow information stored at the SPR/UDR is not the typical IP
5-Tuple but something beyond, e.g. an URL, then enhancements to the Diameter
Gx and Sd Reference Points may be required.
If the update of ongoing IP-Can sessions is required, then this is done on a
per active IP-Can session basis through Gx/Sd Reference Points. This may imply
an increase of the signaling load of Gx/Sd Reference Points. However, only the
IP-Can sessions requiring an update of sponsored data connectivity information
are updated.
### 6.2.3 Solution evaluation
Editor\'s note: Use this clause for evaluation at solution level. Evaluation
at key issue level is done in a separate clause.
## 6.3 Solution #3: Provisioning sponsored data connectivity information via
SCEF -Key Issue 1
### 6.3.1 Solution Description
This solution addresses the Key Issue 1 - Provisioning of Packet Flow
description.
A PFD may include either an IP flow description or the relevant parts of a URL
to allow detection of http or https traffic (i.e. protocol-id and network
path). Figure 6.3.1-1 illustrates the procedure of provisioning sponsored data
connectivity information via SCEF.
Figure 6.3.1-1: procedure for provisioning PFDs via SCEF
1\. The 3rd party service provider sends a Provisioning PFDs Request (ASP
Identifier, SP Reference ID, external Application Identifier and associated
list of PFDs) message to the SCEF. The external Application Identifier should
be provided by an ASP that is known at the SCEF, so that the ASP and the MNO
has an SLA in place.
NOTE 1: The 3rd Party service provider uses this procedure to add, change or
delete some or all of the PFDs. The interface between 3rd Party service
provider and the SCEF is left to be specified in normative phase.
2\. Based on operator policies, if the 3rd party service provider is not
authorized to perform this request (e.g. if the SLA does not allow for it),
the SCEF performs step 6 and provides a Cause value appropriately indicating
the error. Otherwise, the SCEF translates the external Application Identifier
to the Application Identifier known at the SDC DB and forwards the ASP
Identifier and the SP Reference ID as the SCEF ID and the SCEF Reference ID.
3\. The SCEF sends a Provisioning PFDs Request (SCEF ID, SCEF Reference ID(s),
Application Identifier and associated list of PFDs) message to the SDC
Database Functionality(s).
4\. The SDC Database Functionality(s) creates or updates the list of PFDs for
the Application Identifier into the SDC DB. If no list of PFD are provided for
an Application Identifier, the list of PFDs stored in the SDC DB will be
removed.
NOTE 2: The SDC Database Functionality(s) may be a standalone entity or co-
exist with other 3GPP network entity. The reference point between the SCEF and
the SDC database Functionality will be specified during normative work.
5\. The SDC Database Functionality(s) sends a Provisioning PFDs Response (SCEF
Reference ID(s), Cause) message to the SCEF to provide the feedback of the
handling result for the ProvisioningPFDs Request.
6\. The SCEF sends a Provisioning SDC Information Response (SP Reference
ID(s), Cause) message to the 3rd party service provider to provide the
feedback of the handling result for the Provisioning SDC Information Request.
NOTE 3: How to provide the SDC information to PCEFTDF is addressed by the
solutions of Key Issue 2.
### 6.3.2 Impacts on existing nodes and functionality
The SCEF shall be enhanced to receive sponsored data related parameters from
3^rd^ party service provider and provision them into SDC Database
Functionality.
### 6.3.3 Solution evaluation
The solution is to address the Key Issue 1 - Provisioning of Packet Flow
description. Based upon it, the information related to sponsored data
connectivity can be provided towards the operator network in a secure manner.
## 6.4 Solution #4: SCEF and PCRF Provisioning of Packet Flow Descriptions
-Key Issue 1
### 6.4.1 Solution Description
This solution resolves key issue 1 - Provisioning of Packet Flow Descriptions.
In this solution, the sponsor or application service provider provisions
packet flow descriptions to the operator network via SCEF. The interface
between SCEF and sponsor or application service provider will not be
standardized in 3GPP.
Once received, the SCEF will send these packet flow descriptions within
sponsored service profiles via an enhanced Nt interface to PCRF for management
within the 3GPP network as predefined PCC/ADC rules. This solution relies on
new management functionality for predefined PCC/ADC rules, see Solution 5 for
details.
Figure 6.4.1: Solution Architecture
The sponsor can also indicate via SCEF whether the sponsorship applies to all
subscribers, or nominate specific subscribers the sponsorship applies to. When
the SCEF indicates the sponsorship applies to all subscribers, the PCRF may
choose to apply this only to a specific subscriber segment based on existing
subscriber profile information (e.g. only non-MVNO subscribers) and optionally
the sponsor profile. When the sponsorship applies to specific subscribers, the
SCEF will update the SPR/UDR with this information. Then on IP-CAN session
establishment, PCRF will activate the predefined PCC/ADC rule as appropriate.
See clause 6.4.1.1 for details on the enhancements to Nt required to support
management of sponsor service profiles. The new Spt/Ud reference points
between SCEF and SPR/UDR Spt/Ud are introduced to support association of
sponsorship with specific subscribers. The Spt reference point will not be
standardized by 3GPP.
NOTE: This is similar to solution 2, as it includes direct SCEF and SPR/UDR
interaction. However a key difference is that in this solution, only the
subscriber association with the sponsorship is stored in the SPR/UDR (i.e.
PCRF uses this information to trigger corresponding predefined PCC/ADC rule
installation for this subscriber), whereas in solution 2 the full details of
the sponsored service including PFDs is also stored.
Alternatively, the predefined PCC/ADC rule can be referenced over Rx to
trigger the corresponding PCC/ADC rule activation over Gx/Sd. See clause
6.4.1.2 for details on how Rx can be used to trigger predefined PCC/ADC rule
activation over Gx/Sd.
PCRF selection and coordination issues are addressed as part of Solution #5.
How the interaction on Nt impacts rule definitions in the PCEF/TDF is
described in clause 6.4.1.1.
#### 6.4.1.1 Nt and Spt/Ud Procedures
##### 6.4.1.1.1 Nt: Create Sponsored Service Profile
Figure 6.4.1.1.1: Sponsored Service Profile Creation
1\. The SCEF sends a create sponsored service profile request, including the
parameters listed in clause 6.4.1.3.
2\. The PCRF derives predefined PCC/ADC rules as outlined in clause 6.4.1.4,
manages these rules across applicable PCEFs/TDFs and other PCRFs via
procedures outlined in solution #5. PCRF then acknowledges the request.
##### 6.4.1.1.2 Nt: Update Sponsored Service Profile
Figure 6.4.1.1.2: Sponsored Service Profile Update
1\. The SCEF sends an update sponsored service profile request, including the
parameters listed in clause 6.4.1.3.
2\. The PCRF updates the corresponding predefined PCC/ADC rules via procedures
outlined in solution #5. PCRF then acknowledges the request.
##### 6.4.1.1.3 Nt: Delete Sponsored Service Profile
Figure 6.4.1.1.3: Sponsored Service Profile Deletion
[]{#__RefHeading___Toc454271431 .anchor}1. The SCEF sends a delete sponsored
service profile request, including just the identity of the sponsored service
profile.
2\. The PCRF deletes the corresponding predefined PCC/ADC rules via procedures
outlined in solution #5. PCRF then acknowledges the request.
##### 6.4.1.1.4 Spt/Ud: Sponsor/Un-sponsor Subscriber
Figure 6.4.1.1.4: Sponsor/Un-sponsor Subscriber
1\. The SCEF updates the subscriber profile in the SPR/UDR to indicate
association of a subscriber with the sponsorship.
2\. The SPR/UDR responds indicating success.
#### 6.4.1.2 Using Rx to Trigger Predefined PCC/ADC Rule Activation
In this solution, a new mechanism is proposed that allows Rx to refer to
trigger the activation of a predefined PCC/ADC rule. The AF will send an AF
Application Identifier at the request level, which will be used to uniquely
identify one or more predefined PCC/ADC rules for activation by PCRF. In this
case, the AF will not include any Media Component Description information. The
AF may also provide Sponsored Connectivity Data information as per existing
function.
Where the predefined PCC/ADC rule represents a service to be sponsored that
has been created as a result of the new procedures proposed in this solution,
the AF Application Identifier will be generated by the PCRF according to
clause 6.4.1.1.
#### 6.4.1.3 Sponsored Service Profile Parameters
Sponsored service profile includes:
\- Sponsor and Application Service Provider Identities.
\- Whether this applies to all subscribers, or is available for individual
subscriber sponsorship via \"sponsor subscription\" procedure or triggered via
Rx interaction. If it may be used over Rx, an AF Application Identifier is
included which uniquely identifies this service.
\- Packet Flow Descriptions, which may be:
\- L4 Packet Flow Descriptions.
\- Application Identifier.
\- Domain matching parameters for encrypted traffic detection.
\- Parameters that allow URL matching (e.g. based on domain name, exact URL
match, wildcard match, regex match etc.). These matching parameters apply only
for HTTP based services.
#### 6.4.1.4 Predefined PCC/ADC Rule Derivation from Sponsored Service Profile
PCRF can derive predefined PCC/ADC rule parameters to be used in the new
procedures defined in solution #5 based on the following rules:
\- The following parameters are taken from the sponsored service profile:
\- Packet flow descriptions.
\- Sponsor and Application Service Provider Identities.
All other parameters are generated based on PCRF and operator configuration,
which may take into account information from sponsored service profile (e.g.
sponsor identifier).
### 6.4.2 Impacts on existing nodes and functionality
SCEF:
\- Support procedures to manage sponsored service profiles via Nt.
\- Support generation of AF-Application-Id to identify sponsored service
profile over Rx.
\- Support Spt/Ud reference point for new Spt/Ud procedures.
PCRF:
\- Support procedures to manage sponsored service profiles via Nt.
\- Derive predefined PCC/ADC rule parameters from sponsored service profiles.
\- Update of Rx procedures to support identification of sponsored service
profile via AF-Application-Id.
\- Manage predefined PCC/ADC rules across PCEFs/TDFs as per solution #5.
AF:
\- Update of Rx procedures to support identification of sponsored service
profile via AF-Application-Id.
SPR/UDR:
\- Update from SCEF with sponsorship details via Spt/Ud reference point.
### 6.4.3 Solution evaluation
Editor\'s note: Use this clause for evaluation at solution level. Evaluation
at key issue level is done in a separate clause.
## 6.5 Solution #5: PCRF Management of Packet Flow Descriptions - Key Issue 2
### 6.5.1 Solution Description
This solution resolves the key issue 2 - Managing sponsored data connectivity
information inside the operator\'s network.
In this solution, packet flow descriptions are used to generate
service/application data flow templates in predefined PCC/ADC rules, and for
new PCC/ADC Rules the PCRF completes the PCC/ADC Rule with charging or policy,
etc and then manages them across PCEFs/TDFs which are then used in sponsorship
flows during IP-CAN sessions.
Figure 6.5.1: Solution Architecture
This solution introduces new procedures for management of predefined PCC/ADC
rules by PCRF in PCEFs/TDFs. Only predefined PCC/ADC rules created using these
procedures can be managed by the PCRF - PCEFs/TDFs will need to track which
predefined PCC/ADC rules are PCRF managed. However, these are predefined
PCC/ADC rules as defined by existing specifications. Note that existing
unspecified predefined PCC/ADC rules management procedures and capabilities
are not affected by these new procedures.
The core of this solution is enabling PCRF to provision and manage predefined
PCC/ADC rules in the PCEF/TDF. This is not a new function to control the
traffic in the IP-CAN session but rather this will be new operation and
management functionality in PCRF to provision PCC/ADC Rules prior to the
activation of PCC/ADC Rules for an IP-CAN session.
See clause 6.5.1.1 for details on the new predefined PCC/ADC rule management
procedures introduced in this solution.
\- See clause 6.5.1.2 for details on how PCRF that invokes these procedures is
selected, and how coordination between PCRFs takes place.
At any time, the PCRF can manage (e.g. create/update/delete) predefined
PCC/ADC rules in some or all of the PCEFs/TDFs. If these predefined PCC/ADC
rules are generated from sponsor packet flow descriptions, the trigger for
provisioning will be the provisioning of those sponsor packet flow
descriptions (as per Solution#4). The predefined PCC/ADC rules can be
described in terms of L3, L4 or L7 filters.
\- See clause 6.5.1.3 for details on the parameters describing the predefined
PCC/ADC rules.
#### 6.5.1.1 Predefined PCC/ADC Rule Management Procedures
NOTE: These are new procedures over the Gx/Sd reference points (i.e. new
procedures between PCRF and PCEF/TDF). In stage 3 these new procedures require
either Gx/Sd Diameter application signalling outside of IP-CAN session scope,
or another protocol (e.g. new Diameter application) that implement these
procedures.
##### 6.5.1.1.1 Create Predefined PCC/ADC Rule
Figure 6.5.1.1.1: Predefined PCC/ADC Rule Creation
1\. The PCRF sends a create predefined PCC/ADC rule request, including the
parameters listed in clause 6.5.1.3.
2\. The PCEF/TDF creates and stores the predefined PCC/ADC rule for later
activation in IP-CAN sessions, and acknowledges the request.
##### 6.5.1.1.2 Update Predefined PCC/ADC Rule
Figure 6.5.1.1.2: Predefined PCC/ADC Rule Update
1\. The PCRF sends an update predefined PCC/ADC rule request, including the
parameters listed in clause 6.5.1.3.
2\. The PCEF/TDF updates the predefined PCC/ADC rule and acknowledges the
request. Only predefined PCC/ADC rules created by the PCRF may be updated
using this procedure. It is up to the implementation to determine behaviour
for active IP-CAN sessions where the rule being updated is activated.
##### 6.5.1.1.3 Delete Predefined PCC/ADC Rule
Figure 6.5.1.1.3: Predefined PCC/ADC Rule Deletion
1\. The PCRF sends a delete predefined PCC/ADC rule request, including just
the predefined rule name.
2\. The PCEF/TDF deletes and stores the predefined PCC/ADC rule for later
activation in IP-CAN sessions, and acknowledges the request. Only predefined
PCC/ADC rules created by the PCRF may be deleted using this procedure. It is
up to the implementation to determine behaviour for active IP-CAN sessions
where the rule being deleted is activated.
#### 6.5.1.2 PCRF Selection and Coordination
In an operator network with multiple PCRFs, when these procedures need to be
invoked, PCRFs may need to share information in order to be aware of the
predefined PCC/ADC rules, and coordinate which PCRF performs the predefined
PCC/ADC rule management procedures in any given PCEF/TDF.
However, since this problem is dependent on the operator network topology, in
this solution we include guidelines, but will not standardise the approach.
Note that if one PCRF is not aware of a predefined rule in a PCEF, it will not
attempt to activate it for any session. If a PCRF needs to activate a
predefined rule, it can ensure that the predefined rule exists in the PCEF/TDF
via the procedures outlined in this solution.
The following guidelines apply:
\- In a simple deployment with only a single PCRF (or only a single PCRF needs
to know about the rule), this PCRF is used for these procedures, and the PCRF
selects the PCEFs/TDFs that needs the rules installed (e.g. based on the APNs
these PCEFs/TDFs serve).
\- In an operator network with multiple PCRFs, one option is to reuse
implementation specific operations and management procedures to help with this
coordination. For example, this may involve a centralised PCRF working with a
management function (e.g. EMS or VNF Manager as shown in [4]) which ensures
all PCRFs have information about the predefined rules.
\- In an operator network with multiple PCRFs, another option is to ensure the
SCEF updates all relevant PCRFs (based on pre-configuration) via Nt. Each PCRF
can then act independently, and manage its own set of predefined PCC/ADC rules
in all PCEFs/TDFs that it can communicate with, using a pre-configured PCC/ADC
rule identifier namespace per PCRF.
#### 6.5.1.3 Predefined PCC/ADC Rule Parameters
The parameters describing predefined PCC/ADC rules used by these procedures
are as follows:
\- All parameters describing dynamic PCC/ADC rules according to TS 23.203 [3]
\- For encrypted traffic detection, domain matching parameters are included.
For Packet Flow Descriptions beyond layer 3, parameters that allow URL
matching (e.g. based on domain name, exact URL match, wildcard match, regex
match etc.). These matching parameters apply only for HTTP based services.
### 6.5.2 Impacts on existing nodes and functionality
PCRF:
\- Support procedures to manage sponsored service profiles via Nt as per
solution #4.
\- Derive predefined PCC/ADC rule parameters from sponsored service profiles
as per solution #4.
\- Update of Rx procedures to support identification of sponsored service
profile via AF-Application-Id as per solution #4.
\- Manage predefined PCC/ADC rules across PCEFs/TDFs.
\- Operator configuration to support PCRF selection and coordination.
PCEF:
\- Update of Gx procedures to manage predefined PCC rules.
TDF:
\- Update of Sd procedures to manage predefined ADC rules.
NOTE: These are new procedures over the Gx/Sd reference points (i.e. new
procedures between PCRF and PCEF/TDF). In stage 3 these new procedures require
either Gx/Sd Diameter application signalling outside of IP-CAN session scope,
or another protocol (e.g. new Diameter application) that implement these
procedures.
### 6.5.3 Solution evaluation
Editor\'s note: Use this clause for evaluation at solution level. Evaluation
at key issue level is done in a separate clause.
## 6.6 Solution #6: Usage of a sponsoring context Identifier -Key Issue 2
### 6.6.1 Solution Description
#### 6.6.1.1 Background for the solution
One of the usages of sponsored data connectivity is the possibility for a
Third party to sponsor advertisement. This kind of sponsoring would apply to a
collection of users (possibly to all users). But sponsoring may also apply to
a sub(set of users
The solution has thus following facets:
\- Allowing a Third party to define the sponsored data flows not only by
specifying 5 T-uples (as defined in current TS 23.203 [3]) but by giving
higher layer information such as a list of sponsored URL
\- Avoiding overloading the Rx and Gx interfaces by repeating the same list of
sponsored URL over a Rx and a Gx Diameter session set-up for each user (as
defined in current TS 23.203 [3], the list of sponsored data flows is
explicitly provided over a Rx and a Gx Diameter session set-up for each user)
\- Provides flexibility for the Third part capability to change the list of
sponsored flows
\- Allows the operator to control the feature with minimum impacts in the
existing PCC functionality (as defined in current TS 23.203 [3]).
\- Reduces the capacity requirements in the PCEF/TDF by allowing the operator
to retrieve the PFDs at the time PCC/ADC Rules are installed or at the time
the user accesses the service.
The solution addresses Key issue 1 and Key issue 2 with a focus on Key issue
2.
#### 6.6.1.2 Overview of the solution
The PCC/ADC rule sent by the PCRF to the PCEF / TDF does not contain the list
of flows to be sponsored but an Application Identifier that refers to an
application detection filter in the PCEF/TDF. If the PCEF supports fetching of
PFDs from an external repository, using the existing capability negotiation
over Gx, then the application detection filter may include:
\- a URL e.g. https://www.operator.com/sponsor-context/OTT-x/sponsor-Ad used
to fetch to fetch the PFDs from the Sponsored Context repository. O
\- information to be used to build a URL For example, the Application
Identifier is \"OTT-x/sponsor-Ad\" and the PCEF/TDF adds a fixed URL part like
\"https://www.operator.com/sponsor-context/\" to build the final target
https://www.operator.com/sponsor-context/OTT-x/sponsor-Ad, to fetch the PFDs
from the Sponsored Context repository.
When the PCEF or TDF receives a PCC/ADC rule including an Application
Identifier, the retrieval of PFDs is supported by the PCEF, and no PFDs are
stored. It fetches the PFDs i.e. the list of flows (for example, HTTP GET on
the URL stored for in the Application Identifier). As HTTP is used, caching
techniques ensure that the PCEF/TDF does not need to fetch the list of flows
that are sponsored for each user (Gx/Sd) session associated with an already
known PFDs. The application detection filter in the PCEF/TDF includes a
pointer to the list of PFDs that are cached in the PCEF/TDF. The caching time
may control how long the PFDs is valid When the caching time of a sponsoring
context elapses, if there are still active PCC rules that refer to the
corresponding Application Id, the PCEF/TDF reloads the PFD(s) of this
sponsoring context.
The PFDs may correspond to a list of:
\- URL that are sponsored.
\- Server name indication (SNI) as specified in IETF RFC 6066:
\- SNI is an extension to the TLS protocol by which a client indicates which
hostname it is attempting to connect to at the start of the TLS handshaking
process. This allows a server to present multiple certificates on the same IP
address and TCP port number and hence allows multiple secure (HTTPS) websites
(or any other Service over TLS) to be served off the same IP address without
requiring all those sites to use the same certificate.
\- etc.
The Application Identifier may be dynamically passed from the Third party to
the operator via Rx using the AF Application Identifier (in this case the
Third party selects which UE will benefit from the sponsoring context) or
statically configured in the PCRF (policy rules).
Based on policy rules (and/or on information received on Rx) the PCRF decides
whether to put an Application Identifier in the Gx(/Sd) commands sent to a
PCEF(/TDF) about an UE and decides on the value of this Application
Identifier. Existing Gx procedures defined for the PCRF to control Sponsoring
in the PCEF are re-used as follows:
The provisioning of sponsored data connectivity per PCC rule is performed
using the PCC rule provisioning procedure e.g. the sponsor identity is set
using the Sponsor-Identity AVP within the Charging-Rule-Definition AVP of the
PCC rule, etc..... No modifications in a PCC/ADC rule. This allows associating
flows identified by the Application Identifier with existing PCC information
such as Rating Groups (charging), QoS , Usage monitoring, etc.
The same principles apply to Sd and ADC rules.
The Content server (Sponsoring context Repository) that stores the Sponsoring
Context (e.g. list of sponsored URL) belongs to the operator so is under
control of the operator but the Third party may modify the list of sponsored
flows as often as it desires based on its own business needs.
#### 6.6.1.3 Signalling flows
The figure below depicts the case of the retrieval of the PFDs at IP-CAN
session establishment or triggered by Rx interaction in the case of a PGW. The
text below the figure applies for both PCEF and TDF cases.
Figure 6.6.1.3-1: Signalling flows - PCEF and TDF cases
The dotted lines correspond to optional interactions
The figure refers to Figure 7.2-1 in TS 23.203 [3]: \"IPâ€‘CAN Session
Establishment\". Text in dark red corresponds to additions due to the solution
**Off line operations (operations not related with an user activity)**
0\. The Third party and the operator (MNO) negotiate a sponsoring agreement
that is identified by one or multiple services that are sponsored. Each of the
sponsored services may be identified by both the sponsor and the MNO using an
Application Identifier. The Application Identifier refers to the list of flows
that identify the sponsored service in the MNO, which is a unique identifier
(e.g. URL) that refers to the actual list of Flows that the Third party is
ready to sponsor.
The list of flows may be located in the Sponsoring Context Repository that is
hosted by the (OAM of the) operator. This allows the operator to control the
list of flows that a Third party may sponsor.
1\. The operator
a. Stores the Application Identifier and the list of PFDs in the Sponsoring
context Repository.
b. May modify PCRF policies accordingly, e.g. may create policy rules that
associate an APN, an user category, a subscription type, etc... with an
Application Identifier.
NOTE 1: The way to update PCRF policies upon creation or deletion of an
Pllication Identifier is out of the scope of 3GPP and is not further
described.
2\. The Third party updates the list of flows it is ready to sponsor by e.g.
adding / modifying / removing entries (URL, , ..) associated with an
Application Identifier in the Sponsoring context Repository. These operations
are controlled by the operator OAM.
NOTE 2: The way this update is carried out is not further defined in the
solution but this update shall be done in a secure way and controlled by the
operator. This aspect is to be covered by solutions to Key Issue 1.The SCEF
could e.g. be used for that purpose.
\"on-line\" operations (operations related with an user activity): actions at
an IPâ€‘CAN Session Establishment.
An UE sets up a PDN connection as described in TS 23.203 [3] Figure 7.2-1:
\"IPâ€‘CAN Session Establishment\".
The PCEF/TDF request policies from the PCRF.
This is done via an indication of IP-CAN session establishment . Steps 2 to 5
of TS 23.203 [3] Figure 7.2-1 take place without modification.
3\. (as part of step 7 of TS 23.203 [3] Figure 7.2-1 in case of PCEF) Based on
operator policies the PCRF decides which services are sponsored For example
for this decision, the PCRF may use:
\- The APN of the target IPCAN session (in that case all UEs that access the
same APN are associated with the same Application Identifier(s), e.g.
corresponding to ads).
\- An user category received from the SPR (Subscriber Policy repository) as
defined in TS 23.203 [3].
\- Or any combination of these parameters.
\- Or any other parameter.
4\. The PCRF provides the PCEF/TDF with PCC/ADC rules including the
Application Identifier. In this case, since the service is sponsored. The
charging information in the PCC/ADC Rule includes the Charging Key to charge
the sponsor and optionally the Sponsor-Id and the ASP-id. Other information,
such as Usage Monitoring, or QoS or traffic steering may also be included in
the PCC/ADC Rule.
In case of a PCEF as part of the PCRF acknowledgement of the IP-CAN session
establishment (step 14 of TS 23.203 [3] Figure 7.2-1) the PCRF may send PCC
rules as defined in TS 23.203 [3].
In case of a TDF as part of the TDF Session establishment request (step 8 of
TS 23.203 [3] Figure 7.2-1) the PCRF may send ADC rules as defined in TS
23.203 [3]
5\. When the PCEF or TDF receives a PCC/ADC rule referring to an Application
Identifier with no PFDs stored in the cache and the PCEF supports retrieval of
PFDs, it fetches from the Sponsoring context Repository the PFDs i.e. the list
of flows that are sponsored (HTTP GET on the URL in the Application
Identifire). As HTTP is used, caching techniques ensure that the PCEF/TDF does
not need to fetch the list of flows that are sponsored for each user (Gx/Sd)
session associated with an already known/resolved Application Identifier. The
caching time may control how long the list of sponsored flows is valid.
6\. The PCEF/TDF starts applying the PCC/ADC rule (charging, QoS control,
usage monitoring, etc...) to the flows identified by the PFDs (whose
identifiers have been received from the Sponsoring Context Repository).
7\. The IPâ€‘CAN Session Establishment is further processed as in steps 15 to 19
of TS 23.203 [3] Figure 7.2-1:
\- \"on-line\" operations (operations related with an user activity): actions
at an Rx request from the Third party application
8\. The Third party application may decide to apply Sponsoring only for some
users. In that case it may provide the Application Identifier to the PCRF over
an Rx session (invoking step1a of TS 23.203 [3] Figure 7.5: IPâ€‘CAN Session
Modification; PCRF initiated). Steps 2 to 11 of TS 23.203 [3] Figure 7.5 may
take place
9\. The PCRF provides the PCEF/TDF with updated PCC/ADC rules:
\- The PCRF may send to the PCEF the Policy and Charging Rules Provision as in
Step12 of TS 23.203 [3] Figure 7.5. As part of this step the PCRF may provide
Application Identifier as part of the PCC rule information sent over Gx.
\- The PCRF may send to the TDF updated ADC rules as part of a Sd session
modification (as in step 5 of TS 23.203 [3] Figure 7.5 ). As part of this step
the PCRF may provide Application Identifier as part of the ADC rule
information sent over Sd.
10\. The PCEF/TDF action is similar to that described at step 6
11\. The PCEF/TDF action is similar to that described at step 7
This mechanism avoids the PCC chain (Rx, Gx/Sd) to have to pass long lists of
URL that a Third party provider is ready to sponsor.
NOTE: The Application Identifier passed over Gx/Sd does not need to correspond
to the full URL that the PCEF/TDF uses in step 6 / 11 to fetch the PFDs. The
Application Identifier may:
\- either include a HTTP URL pointing to the PFDs
\- or include information to be used to build a HTTP URL pointing to the
Sponsoring Context. For example, the Application Identifier is
\"OTT-x/sponsor-Ad\" and the PCEF/TDF adds a fixed URL part like
\"https://www.operator.com/sponsor-context/\" to build the final target
https://www.operator.com/sponsor-context/OTT-x/sponsor-Ad
The figure below depicts the case of the retrieval of the PFDs triggered by
detection of a service that may require additional PFDs in the case of a PGW.
The assumption is that:
\- The PCRF installs PCC/ADC Rules to detect the start of a service, this
means that only some of the PFDs are stored in the PCEF/TDF, i.e. those PFDs
needed to identify the start of the service, and then the PCRF subscribes to
event trigger start and stop of application detection to the PCEF/TDF. When
the PCEF detects and reports start of application detection, the PCRF installs
or activate a PCC/ADC Rule including an AI to detect the remaining PFDs of the
same service.
\- Alternatively, the PCRF installs PCC/ADC Rules to detect the traffic to a
specific port range (e.g. port ranges used for E- commerce) his means that
only some of the PFDs are stored in the PCEF/TDF, i.e. those PFDs needed to
identify the traffic to/from these ports, and then the PCRF subscribes to
event trigger start and stop of application detection to the PCEF/TDF. When
the PCEF detects and reports start of application detection, the PCRF installs
or activate a PCC/ADC Rule including an AI to detect the remaining PFDs of the
same service.
The text below the figure applies for both PCEF and TDF cases, it is an
optional procedure based on configuration in the PCRF and PCEF and do not
require extensions to standardization other than the retrieval of PFDs as
described in the previous figure.
Figure 6.6.1.3-2
\"on-line\" operations (operations related with an user activity): actions at
the PCEF to request PDFs at the time the UE accesses the Third party
application.
1\. The PCEF detects start of application traffic using the PCC Rules
activated for the application detection (i.e. with application identifier).
Since, the PCRF subscribed to this event, the application detection is
reported to PCRF. The application detection applies charging, QoS enforcement
as instructed by the activated PCC Rule.
2\. The PCEF reports to the PCRF the Start of application event trigger and
the application identifier for the detected application
3\. The PCRF finds the PCC Rules that are bound to the application identifier
reported by the PCEF.
4\. The PCRF provisions the PCC Rules bound to the application identifier
together with the subscription to start and stop of application detection for
each PCC Rule. If the PFDs are available, step 7 applies.
5\. If the PFDs are not available, the PCEF sends the Application Id for which
PFDs is requested to the Sponsoring context DB.
6\. The PFDs associated to the Application Identifier is sent to the PCEF.
7\. The PCEF enforces the actions included in the activated PCC Rule (i.e.
request a quota for the CK if not available, accumulate usage for the MK,
enforce the QoS if needed, etc.)
\"on-line\" operations (operations related with an user activity): actions at
the PCEF to remove PCC Rules and associated PDFs at the time the UE stops
accessing the Third party application.
8\. The PCEF detects stop of application traffic using the PCC Rules activated
for the application detection (i.e. with application identifier). Since, the
PCRF subscribed to this event, the stop of application detection is reported
to PCRF.
9\. The PCEF reports to the PCRF the Stop of application event trigger and the
application identifier for the detected application.
10\. The PCRF removes the PCC Rules (e.g. Alibaba) that are bound to the
application identifier reported by the PCEF.
11\. The PCRF replies to the PCEF with the PCC Rules to be removed.
The PCEF removes the PFDs related to the application identifier in the removed
PCC Rule, if not used for other UEs. Otherwise, the PFDs are kept.
### 6.6.2 Impacts on existing nodes and functionality
The PCEF/TDF should support a new interface to fetch sponsoring context, store
the PFDs in the PCEF/TDF with a validation time associated with it, when the
time expires the PCEF/TDF refresh the PFDs, if there still are any active
IPCAN-sessions with PCC/TDF rules referring to it, refreshes the PFDs.
Otherwise the PCEF/TDF removes the sponsoring context.
### 6.6.3 Solution evaluation
The following is used as criteria for evaluation:
1) The compliance to the objectives in the SID, both the storage savings and
shorten deployment time;
2) The compliance with the architectural requirements; and
3) The impacts on existing functionality in PCC as described in TS 23.203 [3].
The solution stores the PFDs in use, using caching and its associated PCC/ADC
Rules in the PCEF/TDF so it saves memory require to store PCC/ADC Rules and
its associated PFDs. The PFDs may be retrieved, when the user accesses a
sponsored service, or at the time the IP-CAN session is established.
The solution provisions PCC/ADC Rules and retrieves its associated PFDs from
an external repository, option a) the Sponsor service informs the MNO that the
user accesses a service over Rx and b) the PCEF/TDF detects the start of a
service.
The solution allows provisioning of PFDs in the PCEF/TDF so that it reduces
the time it takes to update a deployed service.
The solution allows activation/installation of PCC/ADC Rules to identify
sponsored service applicable for all UEs or for a limited set of UEs.
The solution describes the relation with PCC and the new required
functionality, impacts are minor.
## 6.7 Solution #7: Unified rule storage for request of sponsored data related
information -Key Issue 2
### 6.7.1 Solution Description
As figure6.7.1-1 illustrates, the solution introduces the SDC Functionality
for Sponsored data related information. PCEF/TDF should have an interface with
SDC Functionality for distribution of sponsored data related information. This
solution is designed based on the assumption that the sponsored data related
information is already configured from Third party to SDC Functionality. The
sponsored data related information is the same for all the subscribers.
NOTE: How the sponsored data related information is configured from Third
party to SDC Functionality belongs to key issue#1.
{width="2.6597222222222223in" height="3.4166666666666665in"}
Figure 6.7.1-1: SDC Functionality for sponsored data service
This solution is designed based on the following assumption:
Due to possible capability limitation, the PCEF/TDF may only store a subset of
the sponsored data related rules locally. Instead, the sponsored data related
rules are stored in a separated database, i.e., SDC Functionality.
The sponsored data related information includes PFD information of the
sponsored service, Application ID, Sponsor ID and Charging Key.
The PFD information of a sponsored service includes IP5tuple, URL and SNI.
This solution works for http traffic identified by URLs, IP5tuple and/or SNI.
The operator configures their network to support the solution described either
in clause 6.7.1.1 or in clause 6.7.1.1a.
#### 6.7.1.1 Request of sponsored data related information - Sponsored service
for all users
The request of sponsored data related information is illustrated in the next
figure. All the Sponsored data related rules are always activated for all the
users.
Figure 6.7.1.1-1: Request of sponsored data related information - Sponsored
service for all users
1\. The IP-CAN session is established. . One enhanced match-all PCC rule/ADC
rule is activated in the PCEF/TDF for this IP-CAN session. There is no
sponsored data related information delivered to PCEF/TDF during the IP-CAN
session establishment.
NOTE: The enhanced match-all PCC rule/ADC rule is with the lowest priority
among all the activated PCC/ADC rules. The enhanced match-all PCC/ADC rule
enables the PCEF/TDF to perform sponsored service detection together with the
SDCF and which can then report sponsored and non-sponsored traffic separately.
2\. When the PCEF/TDF attempts to match a packet against the match-all PCC/ADC
rule during SDF detection or application detection, the PCEF/TDF tries to
extract a packet flow description (PFD) for the service data flow first. The
PCEF/TDF checks whether it already knows this PFD and if so (i.e., if a
Charging Key is stored for this PFD), the packet is further processed by the
match-all PCC/ADC rule with the stored Charging Key, and the remaining steps
of this procedure are skipped.
3\. If a new PFD is detected and the PCEF/TDF supports local SDC storage, the
PCEF/TDF searches within the local SDC storage using the extracted PFD
information. If corresponding sponsored data related information is found, the
PCEF/TDF stores the PFD together with the Charging Key and associates it to
the match-all PCC/ADC rule within the sponsored data related information. The
packet is further processed by the match-all PCC/ADC rule with the stored
Charging Key corresponding to the PFD.
If there is no corresponding sponsored data related information found in the
local SDC storage, including the case when the PCEF/TDF does not support local
SDC storage, the PCEF/TDF sends a Sponsored data related information request
to the SDF Functionality, including the PFD information of the flow.
4-5. The SDC Functionality searches locally for the sponsored data related
information corresponding to the PFD information and returns sponsored data
related information (Charging key) to the PCEF/TDF. The PCEF/TDF stores the
PFD together with the Charging Key from the sponsored data related
information. The packet is further processed by the match-all PCC/ADC rule
with the stored Charging key corresponding to the PFD
If the SDC Functionality does not find any sponsored data related information
corresponding to the received PFD information, the SDC Functionality responds
null to PCEF/TDF. The PCEF/TDF stores the PFD with the original Charging Key
of the match-all PCC/ADC rule. The packet is further processed by the match-
all PCC rule/ADC rule corresponding to the PFD.
#### 6.7.1.1a Request of sponsored data related information - Sponsored
service for some users
The request of sponsored data related information is illustrated in the next
figure. The Sponsored data related rules are activated by the PCRF per
subscriber.
Figure 6.7.1.1a-1: Request of sponsored data related information - Sponsored
service for some users
1\. The IP-CAN session is established. The PCEF/TDF already receives at least
one sponsoring PCC rules/ADC rules from the PCRF for this IP-CAN session which
does not include a list of service data flow filters, but containing the
Application ID, the Sponsor ID and the corresponding Charging Key.
2\. When the PCEF/TDF attempts to match a packet against a sponsoring PCC/ADC
rule, the PCEF/TDF extracts packet flow description (PFD) information for the
service data flow. The PCEF/TDF checks whether it already knows this PFD and
if so, the PCEF/TDF is further processed by the corresponding sponsoring
PCC/ADC rule (if a PCC/ADC rule id is stored for this PFD) or the packet
matching process continues with the next non-sponsoring PCC/ADC rule (if no
PCC/ADC rule id is stored for this PFD). In both cases, the PCEF/TDF skips the
remaining steps of this procedure.
If the PCEF/TDF supports local SDC storage, the PCEF/TDF searches within local
SDC storage using the extracted PFD information. If corresponding sponsored
data related information is found and the returned Application ID within the
sponsored data related information is included in one Sponsoring PCC/ADC rule,
the PCEF/TDF stores the PFD together with the Sponsoring PCC/ADC rule id. The
packet is further processed by this Sponsoring PCC/ADC rule.
3\. If there is no corresponding sponsored data related information found in
the local SDC storage, including the case when the PCEF/TDF does not support
local SDC storage, the PCEF/TDF sends a Sponsored data related information
request to the SDF Functionality, including the PFD information of the flow.
4-5. The SDC Functionality searches for the sponsored data related information
corresponding to the request for PFD information and returns the Application
ID to the PCEF/TDF. If the returned Application ID is included in one
Sponsoring PCC/ADC rule, the PCEF/TDF stores the PFD together with the
Sponsoring PCC/ADC rule id. The packet is further processed by this Sponsoring
PCC/ADC rule.
If the SDC Functionality does not find any sponsored data related information
corresponding to the received PFD information, the SDC Functionality responds
null to PCEF/TDF. The PCEF/TDF stores the PFD without a PCC/ADC rule id. The
packet matching process continues with the next non-sponsoring PCC/ADC rule.
#### 6.7.1.2 Local SDC storage of frequently used Sponsored data related rule
Figure 6.7.1.2-1: Fetch procedure of frequently matched Sponsored data related
rule
Local SDC storage inside the PCEF/TDF allows the PCEF/TDF to have a subset of
sponsored data related rules locally available, e.g. most frequently used
rules in order to reduce the interactions via the Sxx interface.
1\. Periodically, the PCEF/TDF computes the matching frequency of Sponsored
data related rules in the Local SDC storage and sends Frequency Report to the
SDC Functionality.
NOTE 1: How frequently the PCEF/TDF computes the matching frequency is
implementation dependent.
NOTE 2: For those infrequent sponsored data related information, the PCEF/TDF
should retrieve from SDC Functionality every time needed.
2\. The SDC Functionality determines the final matching frequency of Sponsored
data related rules by combining the Rule Frequency Report received from each
PCEF/TDF and sends Local SDC storage Provision including the frequently
matched Sponsored data related rules to the PCEFs/TDFs.
Figure 6.7.1.2-2: Update procedure of frequently matched Sponsored data
related rule
1\. When the Sponsored data related rules sent to the PCEF/TDF are updated in
the SDC Functionality, the SDC Functionality sends SDC rule Update Request
message to the PCEF/TDF to update the corresponding Sponsored data related
rules.
2\. The PCEF/TDF acknowledge the update request.
Figure 6.7.1.2-3: Delete procedure of frequently matched Sponsored data
related rule
1\. When the Sponsored data related rules sent to the PCEF/TDF are deleted in
the SDC Functionality, the SDC Functionality sends SDC rule Delete Request
message to the PCEF/TDF to delete the corresponding Sponsored data related
rules.
2\. The PCEF/TDF acknowledge the delete request.
### 6.7.2 Impacts on existing nodes and functionality
SDC Functionality: a new entity is introduced.
\- It shall be able to store the sponsored data related rule;
\- It shall be able to search for the sponsored data related information based
on the PDF information from PCEF/TDF;
PCEF/TDF
\- It shall be able to send to the SDC Functionality the request of sponsored
data related information with PFD information and receives sponsored data
related information from the SDC Functionality.
\- In the solution for all users, the PCEF/TDF shall be able to temporarily
store the packet description information of every IP flows together with the
Charging Key (either the one in the sponsored data related information or in
the match-all rule). Both tables are stored per IP-CAN session.
\- In the solution for some users, the PCEF/TDF shall be able to temporarily
store the PFD of every IP flow together with the Sponsoring PCC/ADC rule id
(or null if the IP flow is not sponsored). This storage is per IP-CAN session.
\- The PCEF/TDF send a request to the SDCF for each packet that cannot be
matched by the SDF/application detection mechanism.
### 6.7.3 Solution evaluation
This solution requires a new database (SDC Functionality) and new interface
connected to PCEF/TDF.
Sponsored data connectivity service is supported by allowing the Third party
service providers to provide Packet Flow Description beyond layer 3 to the
operator\'s network outside the context of a current individual subscriber IP-
CAN session. This solution allows provisioning of PFDs to the operator network
so that it reduces the time of the update of a deployed service.
This solution allows to store a large quantity of sponsored data related
information outside the PCEF/TDF, so that the storage requirements to the
PCEF/TDF can be reduced.
This solution supports Sponsored data connectivity for all the subscribers and
for a group of subscribers.
The solution requires the PCEF/TDF to extract the 3/4 or 7 layer information
from the first unknown packet of application and retrieve sponsored data
related information from SDC Functionality. The solution requires the PCEF/TDF
to temporarily store every extracted PFD information together with the
detection result, both PFDs that sponsored and non sponsored (i.e., the
corresponding Charging Key or the corresponding PCC/ADC rule ID).
The interaction between PCEF/TDF and SDC Functionality may cause delay and the
initial packet(s) of an application needs to be cached until the detection
result is received from the SDC Functionality.
## 6.8 Solution #8: New reference point for management of PFDs to PCEF/TDF -
Key Issue2
### 6.8.1 Solution Description
#### 6.8.1.1 General Description and assumptions
This solution resolves the key issue 2 - Managing sponsored data connectivity
information inside the operator\'s network. This solution assumes that at the
time the Sponsor and the MNO reach an agreement, the Sponsor provides
sponsored data connectivity information and then the MNO configures predefined
PCC/ADC Rules to the PCEF/TDF that includes at least the SDF templates
(typically an Application Identifier), to identify the service data flow, the
charging key and optionally the Sponsor-id or the ASP-id or both.
Once the predefined PCC/ADC Rules are configured in the PCEF/TDF, the
following scenarios may occur:
1\. The service is sponsored for all users accessing a particular APN, in this
case it is possible to implicitly activate the predefined PCC/ADC Rule for any
subscribers that establish PDN connection to that APN without any Gx/Sd
interaction. This means that only one PCC/ADC Rule is required in the PCEF/TDF
when the service is sponsored for all users.
2\. The service is sponsored for some users, e.g. users of a particular group.
In this case the subscriber category in the SPR may be used to determine
whether to activate the PCC/ADC Rule to sponsor a service in a particular UE
IP-CAN session. Note that the activation of a PCC/ADC Rule provides a
reference to the PCC/ADC Rule in the PCEF/TDF, so no additional capacity is
required in the PCEF/TDF due to the activation. This means that only one
PCC/TDF Rule for subscriber group is needed.
How to configure PCEF/TDF with predefined PCC/ADC Rule to identify sponsored
traffic and how to configure the PCRF or the PCEF/TDF to activate PCC/ADC
Rules for sponsored services will be documented in TS 23.203 [3].
The assumption is that once the agreement between the MNO and the Sponsor is
in place, including definition of the predefined PCC/ADC Rules in the PCEF/TDF
and the PCC/ADC Rule names in the PCRF, and then the PFDs may change due to
e.g. new server deployed by the ASP or reconfiguration at the ASP network for
an existing Application Identifier. The ASP provides new/update or delete PFDs
and those are received by a new functional entity, PFDF as required by key
issue#1.
#### 6.8.1.2 New functional entity: PFDF and new reference points Gw/Gwn
In order to provision/update or remove PFDs, a new Gw reference point is used
between the PCEF and the PFDF and a new Gwn reference point is used between
the TDF and the PFDF as shown in Figure 6.8.1.
NOTE: The PFDF may be standalone function or collocated with an existing
functional entity such SCEF or OSS.
The PFDF is assumed to only extend the information associated with the service
data flow detection / application detection related with a pre-defined PCC/ADC
rule or dynamic PCC/ADC Rules with Application Identifier.
Gw/Gwn reference point:
\- Transports new/updated or removed PFDs provided by an ASP to the PCEF/TDF.
\- Transports the Application Identifier that is used at the PCEF/TDF to
identify the corresponding predefined PCC/ADC Rule where application detection
filters should be added/remove or updated.
Packet Flow Description Function (PFDF) provides the following functionality:
**\- PFD validation** ensures that PFDs are within the IP range allowed for
that ASP.
**\- PFD distribution** has a list of PCEFs/TDFs where PFDs should be
distributed, e.g. those that enable access to the ASP.
\- maps the 3- tuple ASP-id, Sponsor-id, and Application Identifier provided
by the ASP into Application Identifier used within the PCC/ADC Rule. Note that
this mapping must be unique to be able to identify the Application Identifier
in the PCC/ADC Rule in the PCEF/TDF.
\- Provisions, updates and removes PFDs to the PCEF/TDF.
Figure 6.8.1: PFDF and new reference points Gw and Gwn
NOTE: The new reference point(s) terminates in a new functional entity or in
an existing functional entity if PFDF is collocated with SCEF, OSS or PCRF.
#### 6.8.1.3 Information flows to provision/update/remove PFDs
The prerequisite to provision or update PFDs is that the ASP-id and optionally
the application identifier that the ASP provided is mapped into the
Application Identifier that is included in the PCC/ADC Rule. The PCC/ADC Rule
may be pre-configured in the PCEF/TDF or a dynamic PCC/ADC Rule including an
Application Identifier. The PFDF provisions/updates PFDs to PCEFs/TDFs as
determined using local operator configuration.
Figure 6.8.2: Provisioning/update of PFDs to the PCEF/TDF
1\. PFDF provisions/updates the list of PFDs that should be associated to the
Application Identifier. The PCEF/TDF updates the application detection filters
to include the list of PFDs that allows to identify service data flows for
this specific Application Identifier.
2\. The PCEF/TDF acknowledges the provisioning/update request.
Figure 6.8.3: Removal of PFDs to the PCEF/TDF.
1\. The PFDF removes the list of PFDs that are associated to the Application
Identifier. The PCEF/TDF removes the PFDs from the application detection
filters that allow identifying service data flows.
2\. The PCEF/TDF acknowledges the removal request.
### 6.8.2 Impacts on existing nodes and functionality
New reference point between PCEF/TDF and a new or existing functional entity,
including procedures to create, update or delete PFDs.
Editor\'s note: Whether the new reference point terminates in a new functional
entity or in an existing functional entity such as SCEF, OSS or PCRF is FFS.
Configuration guidelines to describe how to activate or de-activate pre-
defined PCC/ADC Rules for all subscribers or for a subscriber group.
A new functional entity, the PFDF, that validates, distributes and
provisions/updates/removes PFDs to the PCEF/TDF.
### 6.8.3 Solution evaluation
Editor\'s note: Use this clause for evaluation at solution level. Evaluation
at key issue level is done in a separate clause.
## 6.9 Solution #9: Traffic detection by using domain name matching - Key
Issue 3
### 6.9.1 Solution Description
This solution resolves the key issue 3 - _Encrypted traffic detection_.
#### 6.9.1.1 Assumptions
1\. There exists an agreement between the operator and sponsored data
connectivity content provider.
2\. Content provider uses HTTPS as a transport mechanism, using Web Public Key
Infrastructure (PKI).
NOTE: According to https://datatracker.ietf.org/wg/wpkops/charter/ , \"the Web
Public Key Infrastructure (PKI) is the set of systems, policies, and
procedures used to protect the confidentiality, integrity, and authenticity of
communications between Web browsers and Web content servers. The Web PKI is
used in conjunction with security protocols such as TLS/SSL and OCSP. More
specifically, the Web PKI (as considered here) consists of the fields included
in the certificates issued to Web content and application providers by
Certification Authorities (CAs), the certificate status services provided by
the Authorities to Web browsers and their users, and the TLS/SSL protocol
stacks embedded in web servers and browsers.\"
#### 6.9.1.2 Proposed framework
1\. The solution is applicable only in case the sponsored services are
uniquely identifiable by a list of {IP address ranges, domain name matching
strings} pairs. Either element in the pair can be \"any\", as applicable, but
not both elements simultaneously.
NOTE 1: L3 information (IP address ranges) is visible even if traffic is
encrypted.
a. Domain name matching can be expressed as an absolute match or a suffix
match. Thus, there may be a need in a field indicating whether an absolute
match or a suffix match is required ({IP address ranges, domain name matching
strings, match type (absolute/suffix)}).
2\. This set of information required to identify encrypted traffic is defined
in the PCEF/TDF either by pre-defined PCC/ADC Rules or using dynamic PCC/ADC
Rules that include Application Identifiers, as applicable. Thus the
configuration of the Application Identifier in the PCEF/TDF includes this set
of information ({IP address ranges, domain name matching strings, match type
(absolute/suffix)}).
3\. If such a pre-defined or dynamic PCC/ADC Rule is active for an IP-CAN/TDF
session, the PCEF/TDF shall check IP address ranges, and, in case of
compliancy with the received/preconfigured value (See NOTE 2), match domain
name strings against the following fields in the initial HTTPS handshake:
\- TLS Server Name Indication (SNI) extension, when available
(https://tools.ietf.org/html/rfc6066); or, if not available.
\- Server certificate\'s Subject Alternative Name x.509 extension DNS name,
when available. All relevant values shall be examined for matching; or if not
available or no match was found.
\- Server certificate\'s Subject Common Name (CN).
NOTE 2: If the IP address ranges equals \"Any\", then any traffic is said to
be compliant.
### 6.9.2 Impacts on existing nodes and functionality
PCEF and TDF detection mechanisms are extended as per description above (in
any case detection mechanisms are out of standard\'s scope).
### 6.9.3 Solution evaluation
This solution re-uses the existing communication mechanisms between the PCRF
and the PCEF/TDF. The detection logic to which Application Identifier in the
PCEF/TDF refers to, is extended to cover ({IP address ranges, domain name
matching strings, match type (absolute/suffix)} information.
As mentioned in the solution, the solution is applicable only in case the
sponsored services are uniquely identifiable by a list of {IP address ranges,
domain name matching strings} pairs.
The solution is not impacting any protocol specification; therefore no stage 3
impacts are expected.
## 6.10 Solution #10: TDF based sponsored data connectivity - Key Issue 4
### 6.10.1 Solution Description
This solution resolves the key issue 4 - TDF based sponsored data
connectivity.
The solution for TDF based sponsored data connectivity shall follow the same
principles as defined in the TS 23.203 [3] for the PCEF:
1\. Annex N shall be extended to cover TDF based sponsored data connectivity.
2\. ADC Rule structure shall include sponsored data connectivity related
parameters as currently defined for PCC Rules.
3\. Offline charging reporting functionality for sponsored data connectivity
shall be defined for TDF in the same manner as for PCEF.
### 6.10.2 Impacts on existing nodes and functionality
TDF and PCRF nodes shall be enhanced to support TDF based sponsored data
connectivity.
### 6.10.3 Solution evaluation
Void.
NOTE: As one of the study\'s objectives is to introduce sponsored data
connectivity functionality to TDF as currently exists in case of PCEF, the
solution evaluation is not needed in this case.
# 7 Overall evaluation
The evaluation of the solutions for the 4 key issues is addressed in the
individual solution evaluations.
# 8 Conclusions
Conclusion for key issue#1 and #2:The conclusions are based on the following
principles:
\- A new functional entity, Packet Flow Description Function (PFDF) is
introduced to store and manage the PFDs from the SCEF to the PFDF and from the
PFDF to PCEF/TDF.
\- The PCEF/TDF performs service data flow detection internally.
\- Both push and pull mechanisms are used to provision PFDs from the PFDF to
the PCEF/TDF.
\- For new sponsored service deployment/onboarding, existing OAM procedures
are used (in conjunction with the new PFD management procedures via SCEF).
\- For association of specific subscribers with sponsorship, existing OAM
procedures are used and will be documented in an informative annex.
For the above reasons, solution 3 is selected as the conclusion for key issue
1, and a combination of solution 6 and 8 is selected as the conclusion for key
issue 2 with the following details:
\- The provisioning of PFDs into the MNO is performed via SCEF using a new API
and then SCEF provisions PFDs into a new functional entity, as proposed in
solution #3. The procedures over the new reference point between the SCEF and
the PFDF will be specified during the normative phase, using procedures
defined in solution #3.
\- The minimum set of information that a PFD contains is an IP 5-tuple or a
URL or the relevant part of a URL used for application detection.
\- The procedures in solution #6 will be defined to enable provisioning and
management of PFDs associated to an Application Identifier in the PCEF/TDF and
not to be restricted to sponsored services only.
\- If no PFDs are available at PCC/ADC Rule activation over Gx/Sd then PFDs
are retrieved from the PFDF as defined in solution #6.
\- In addition, the provision of PFDs associated to an Application Identifier
from the PFDF into the PCEF/TDF may be performed at any time as defined in
solution #8.
\- The procedures and information elements on the reference point between
PCEF/TDF and PFDF will be specified during the normative phase, using
procedures defined in solution #6 and #8.
\- During the normative phase, the solutions should aim to optimize the time
it takes to provision PFDs to the PCEF/TDF when the sponsor provides them to
the MNO.
Conclusion for key issue#3:
\- Traffic detection in case of encrypted traffic shall be described by a new
informative Annex of the TS 23.203 [3] specification as per Solution#9.
Conclusion for key issue#4:
\- TDF based sponsored data connectivity shall be added to the TS 23.203 [3]
specification as currently exists in case of PCEF as per Solution#10.
#