# Foreword
This Technical Specification (TS) has been produced by the 3^rd^ Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document gives the stage 2 description of the User-to-User
signalling supplementary services.
The User-to-user supplementary service is divided into 3 different services:
\- Service 1 (UUS1)
\- Service 2 (UUS2)
\- Service 3 (UUS3)
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or non‑specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TS 21.905: \"3G Vocabulary\".
[2] 3GPP TS 22.087: \"User-to-user signalling (UUS); Stage 1\".
[3] 3GPP TS 23.018: \"Basic Call Handling -- Technical Realization\".
[4] 3GPP TS 23.078: \"CAMEL Stage 2\".
[5] 3GPP TS 23.079: \"Support for Optimal Routeing (SOR) -- Technical
Realization\".
# 3 Definitions and abbreviations
## 3.1 Definitions
For the purposes of the present document, the following terms and definitions
apply.
**Burst parameter:** parameter indicating the absolute maximum number of UUS 3
service related user information messages that can be sent at intervals
indicated by the value of timer T2-UUS3
**Remote network:** network of the remote subscriber
**Remote subscriber:** for service 1 and 2 the remote subscriber is the called
party of a call to which the served subscriber activates the UUS supplementary
service. For service 3 the remote subscriber can be either the called or the
calling party of an established call to whom the use of the UUS supplementary
service is requested by the served subscriber
**Served subscriber:** subscriber who has a provision of the UUS supplementary
service and who activates the UUS supplementary service. For service 1 and 2
the served subscriber is always the calling subscriber, for service 3 either
the calling or the called subscriber can be the served subscriber
**Serving network:** network of the served subscriber
**User-to-User Information (UUI):** information transferred by using the UUS
supplementary service
**UUS Service:** UUS services (Service 1, 2 and 3) are components of the UUS
supplementary service. If the UUS supplementary service is provided to a
subscriber, he can handle the UUS services independently within a call
## 3.2 Abbreviations
For the purposes of the present document, the following abbreviations apply:
ACM Address Complete Message
ANM ANswer Message
CON CONnect
CPG Call ProGress
IAM Initial Address Message
MS Mobile Station
REL RELease
SIFOC Send Info For Outgoing Call
SRI Send Routing Info
UUI User-to-User Information
UUS User-to-User Signalling
UUS1 User-to-User Signalling Service 1
UUS2 User-to-User Signalling Service 2
UUS3 User-to-User Signalling Service 3
Further GSM related abbreviations are listed in GSM 01.04.
# 4 General
The UUS supplementary service allows the transfer of UUI to a remote
subscriber over the signalling channel in association with a call to this
subscriber. The UUS supplementary service is divided in Service 1, Service 2
and Service 3.
The UUS Service 1 allows the transfer of UUI embedded within Call Control
messages.
The UUS Service 2 allows the transfer of UUI with a specific User-to-user
message after the served subscriber has received an address complete
indication and prior to the answer indication from the B-side.
The UUS Service 3 allows the transfer of UUI with a specific User-to-user
message during an active call.
For the use of the UUS supplementary service in GSM PLMNs the support of UUS
capabilities within the inter‑exchange signalling system (e.g. ISUP) is
necessary. However this is out of scope of the present document.
## 4.1 Activation of UUS components
If any of the UUS Services 1, 2 or 3 shall be used within a call, the UUS
capabilities have to be activated by the served subscriber either when
initiating this outgoing call (Service 1, 2 and 3) or during an established
call (Service 3).
The UUS capabilities for a call can be requested by means of an implicit
request or an explicit request. UUS Service 1 can be requested either
implicitly or explicitly. Service 2 and 3 can only be requested explicitly.
### 4.1.1 Implicit request
The UUS1 service is activated implicitly by the presence of UUI in the set-up
request from the mobile station. The network shall transfer the received UUI
transparently to the B-side. For the purpose of UUS service 1 implicitly
requested, no explicit check for the availability of UUS capabilities at the
destination network has to be performed by the originating network.
If the calling subscriber has UUS 1 provisioned and implicitly requested, the
network shall transfer all UUI contained in call control messages.
If the calling subscriber has UUS1 not provisioned, the contained UUI shall be
discarded by the serving MSC. The call shall be established without further
restrictions.
The served subscriber shall not be informed whether the implicit request was
successful or not.
### 4.1.2 Explicit request
Any UUS Service can be explicitly activated by the served subscriber within
the set-up request initiating a mobile originated call. In addition UUS
Service 3 can be activated during an established call with a Facility message.
A UUS Service 1 request can be accompanied by appropriate UUI.
The network shall check for the availability of UUS capabilities for the call
by passing the UUS request and the eventually accompanied UUI to the remote
side. If a UUS Service is available for the call an appropriate \"UUS
provided\" indication for this UUS Service shall be sent within the first
backward message from the remote side.
A UUS Service shall not be activated for the call if a \"UUS not provided\"
indication or no indication about the availability of this UUS Service is
received from the remote side.
Service 3 can be explicitly activated during an active call by both parties.
This may lead to a collision of activation requests. The collision of
activation requests occurs when there is an outstanding request for service 3
and a subsequent request is received from the remote user. The entity (user or
network) that observes the collision shall reject the second request with
Facility message. This leads to the rejection of both requests.
### 4.1.3 UUS required option
As an option at call set-up the served subscriber can specify whether the
requested UUS Service is required or not required for the call. If service 1
is implicitly requested or if service 3 is requested during the call, it
cannot be requested as required.
If the served subscriber has specified that one of the UUS services is
required for the call and this UUS service can not be activated by the
network, the call attempt of the served subscriber shall be cleared.
If the served subscriber has specified that one of the UUS services is not
required for the call and this UUS service can not be activated by the
network, the call establishment shall be continued.
# 5 Handling of User-to-user signalling
## 5.1 Timers
UUS related timers are needed only for UUS service 3. Timers T1-UUS3, T3-UUS3
and T4-UUS3 are used only when UUS service 3 is requested during an active
call.
Table 5.1: UUS Timers
* * *
Timer Name Value Run at Started Stopped Expiry T1-UUS3 Remote network control
10s MSC of the remote subscriber UUS3 service request sent to the remote
subscriber Answer to UUS3 service request received from the remote subscriber
Rejection of UUS3 service is sent toward the requesting network T2-UUS3 UUS3
flow control 10s MSC of the served subscriber and MSC of the remote subscriber
The MSC receives service acceptance When UUS3 service is deactivated Flow
control parameter is incremented. Timer is restarted. Note 1. T3-UUS3 Served
subscriber control 10s MS of the served subscriber UUS3 service request sent
to the requesting network Acceptance to UUS3 service received from requesting
network Consider UUS3 service as not activated T4-UUS3 Serving network control
10s MSC of the served subscriber UUS3 service request sent to the remote
network Acceptance to UUS3 service received from remote network Rejection of
UUS3 service is sent toward the served subscriber
* * *
NOTE: If a user information message has been discarded due to flow control, a
congestion control message shall be sent to the user.
## 5.2 Information flows of UUS services
### 5.2.1 Service 1 (UUS1)
#### 5.2.1.1 Flow control
No specific flow control is needed to restrict the amount of messages sent for
either implicit or explicit UUS service 1 as the user-to-user information is
transferred in call control messages.
#### 5.2.1.2 Information flows
{width="6.200694444444444in" height="7.541666666666667in"}
Figure 5.2.1.2: MAF043
##### 5.2.1.2.1 Implicit activation
{width="6.233333333333333in" height="8.54513888888889in"}
Figure 5.2.1.2.1.1: Information flow for UUS1 implicit request (mobile to
mobile call)
##### 5.2.1.2.2 Explicit activation
{width="6.233333333333333in" height="8.54513888888889in"}
Figure 5.2.1.2.2.1: Information flow for UUS 1 explicit request (mobile to
mobile call)
### 5.2.2 Service 2 (UUS2)
#### 5.2.2.1 Flow control
Up to two UUI messages can be sent in each direction. If either party tries to
send more than two UUI messages, they are discarded.
#### 5.2.2.2 Information flows
{width="6.200694444444444in" height="7.541666666666667in"}
Figure 5.2.2.2: MAF044
{width="6.300694444444445in" height="8.377777777777778in"}
Figure 5.2.2.2.1: Information flow for UUS2 explicit request (mobile to mobile
call)
### 5.2.3 Service 3 (UUS3)
#### 5.2.3.1 Flow control
Network flow control mechanisms shall exist after the connection has been
established in order to restrict the amount of UUI sent in each direction. A
burst capability of sending N messages shall immediately be available to each
user, where N initially equals the value of the burst parameter X. The value
of N shall be decremented by one for every message sent by the user and
incremented by Y at regular intervals of T2-UUS3 (see table 5.1). The value of
N shall be limited to a maximum of X.
The value of the burst parameter X shall be 16.
The value of the replenishment parameter Y shall be 8.
Network flow control shall be performed only by the sending user's network.
If the MSC receives UUI messages from the MS at a rate which exceeds the flow
control limit, it shall discard the UUI messages that cannot be handled and
respond to the first discarded UUI message with a congestion control message.
When the flow control restrictions are removed, an indication that further UUI
messages can be accepted shall be given. See the Processes
Serving_MSC_Handle_UUS_In_Active_Call and Remote_
MSC_Handle_UUS_In_Active_Call.
#### 5.2.3.2 Information flows
{width="6.200694444444444in" height="7.541666666666667in"}
Figure 5.2.3.2: MAF045
{width="6.300694444444445in" height="8.378472222222221in"}
Figure 5.2.3.2.1: Information flow for UUS3 explicit request during call
establishment (mobile to mobile call)
{width="6.300694444444445in" height="8.377777777777778in"}
Figure 5.2.3.2.2: Information flow for UUS3 explicit request during active
call (mobile to mobile call)
## 5.3 Messages and their contents
This subclause contains the detailed description of the information flows used
by UUS.
Each Information Element, IE is marked as (M) Mandatory, (C) Conditional, or
(O) Optional. A mandatory information element shall always be present. A
conditional information element shall be present if certain conditions are
fulfilled; if those conditions are not fulfilled it shall be absent. An
optional information element may be present or absent, at the discretion of
the application at the sending entity. This categorisation is a functional
classification, i.e. stage 2 information and not a stage 3 classification to
be used for the protocol.
The stage 2 and stage 3 message and information element names are not
necessarily identical.
### 5.3.1 Information elements used in the messages
The following UUS specific constructed information elements are used in the
messages.
Table 5.3.1.1: UUS specific information elements
+----------------+----------------+----------------+----------------+ | Parent | Child | Information | Information | | Information | Information | element | element | | Element | Element name | Required | description | +----------------+----------------+----------------+----------------+ | UUS options | UUS1 | C | The | | | | | information | | | UUS2 | C | element is | | | | | present if | | | UUS3 | C | UUS1 service | | | | | is requested; | | | | | otherwise it | | | | | shall be | | | | | absent. It may | | | | | contain the | | | | | following | | | | | values: | | | | | | | | | | - Required | | | | | | | | | | - Not | | | | | Required | | | | | | | | | | The | | | | | information | | | | | element is | | | | | present if | | | | | UUS2 service | | | | | is requested; | | | | | otherwise it | | | | | shall be | | | | | absent. It may | | | | | contain the | | | | | following | | | | | values: | | | | | | | | | | - Required | | | | | | | | | | - Not | | | | | Required | | | | | | | | | | The | | | | | information | | | | | element is | | | | | present if | | | | | UUS3 service | | | | | is requested; | | | | | otherwise it | | | | | shall be | | | | | absent. It may | | | | | contain the | | | | | following | | | | | values: | | | | | | | | | | - Required | | | | | | | | | | - Not | | | | | Required | +----------------+----------------+----------------+----------------+ | UUS provision | UUS1 | C | If UUS1 | | | | | services is | | | UUS2 | C | requested and | | | | | provisioned | | | UUS3 | C | the | | | | | information | | | | | element is | | | | | present, | | | | | otherwise it | | | | | shall be | | | | | absent. | | | | | | | | | | If UUS2 | | | | | services is | | | | | requested and | | | | | provisioned | | | | | the | | | | | information | | | | | element is | | | | | present, | | | | | otherwise it | | | | | shall be | | | | | absent. | | | | | | | | | | If UUS3 | | | | | services is | | | | | requested and | | | | | provisioned | | | | | the | | | | | information | | | | | element is | | | | | present, | | | | | otherwise it | | | | | shall be | | | | | absent. | +----------------+----------------+----------------+----------------+
### 5.3.2 Messages between MS and MSC
Call control messages (Setup, Alert, Connect, Disconnect, Release and Release
Complete, refer to GSM 04.08) may carry UUS service activation request and
response. They can carry also UUI for UUS1.
Facility message, refer to GSM 04.08, can carry UUS service 3 activation
request and response.
Dedicated User-To-User message, refer to GSM 04.08, carries UUI for UUS
service 2 and 3.
These messages are used both in serving and remote networks.
### 5.3.3 Messages between MSC and VLR (B interface)
These messages are used in the serving network.
Table 5.3.3.1: Messages between MSC and VLR
+-------------+-------------+-------------+-------------+-------------+ | Message | Message | Information | Information | Information | | | sender | element | element | element | | | | name | Required | description | +-------------+-------------+-------------+-------------+-------------+ | Send Info | MSC | - | - | Refer to | | For | | | | GSM 03.18. | | Outgoing | | UUS options | C | | | Call | | | | In | | | | | | addition: | | | | | | | | | | | | The | | | | | | information | | | | | | element is | | | | | | present if | | | | | | MS A | | | | | | requested | | | | | | UUS | | | | | | service; | | | | | | otherwise | | | | | | it shall be | | | | | | absent. The | | | | | | structure | | | | | | of UUS | | | | | | options is | | | | | | defined in | | | | | | table | | | | | | 5.3.1.1 | +-------------+-------------+-------------+-------------+-------------+ | Send Info | VLR | - | - | Refer to | | For | | | | GSM 03.18 | | Outgoing | | UUS reject | C | | | Call | | | | In | | negative | | | | addition: | | response | | | | | | | | | | The | | | | | | information | | | | | | element is | | | | | | present, if | | | | | | required | | | | | | UUS service | | | | | | was | | | | | | requested | | | | | | by MS A and | | | | | | service is | | | | | | not | | | | | | provided, | | | | | | otherwise | | | | | | it shall be | | | | | | absent. | +-------------+-------------+-------------+-------------+-------------+ | Complete | VLR | - | - | Refer to | | Call | | | | GSM 03.18 | | | | UUS | C | | | | | provision | | In | | | | | | addition: | | | | | | | | | | | | The | | | | | | information | | | | | | element is | | | | | | present if | | | | | | MS A | | | | | | requested | | | | | | UUS | | | | | | service(s); | | | | | | otherwise | | | | | | it shall be | | | | | | absent. The | | | | | | structure | | | | | | of UUS | | | | | | Provision | | | | | | is defined | | | | | | in table | | | | | | 5.3.1.1 | +-------------+-------------+-------------+-------------+-------------+ | Send Info | MSC | - | - | The message | | For UUS3 | | | | is sent | | | | | | when UUS3 | | | | | | service is | | | | | | requested | | | | | | during | | | | | | active | | | | | | call. NOTE: | | | | | | This | | | | | | message is | | | | | | used in | | | | | | serving and | | | | | | remote | | | | | | MSCs. | +-------------+-------------+-------------+-------------+-------------+ | Send Info | VLR | UUS | C | The | | For UUS3 | | provision | | information | | Ack | | | | element is | | | | | | present if | | | | | | UUS3 | | | | | | service is | | | | | | p | | | | | | rovisioned; | | | | | | otherwise | | | | | | it shall be | | | | | | absent | +-------------+-------------+-------------+-------------+-------------+
### 5.3.4 Messages between MSC -- MSC (E interface)
These messages are used in the remote network when UUS is supported in remote
MSC in conjunction of SOR, refer to GSM 03.79.
Table 5.3.4.1: Messages between MSC -- MSC
+-------------+-------------+-------------+-------------+-------------+ | Message | Message | Information | Information | Information | | | sender | element | element | element | | | | name | Required | description | +-------------+-------------+-------------+-------------+-------------+ | Resume Call | MSCB | - | - | Refer to | | Handling | | | | GSM 03.79. | | | | UUS1 | C | | | | | Service | | In | | | | request | C | addition: | | | | | | | | | | UUS2 | C | The | | | | Service | | information | | | | request | C | element is | | | | | | present if | | | | UUS3 | C | UUS1 | | | | Service | | Service was | | | | request | | requested | | | | | | in the | | | | UUS1 UUI | | original | | | | | | call and | | | | UUS CF | | remote MSC | | | | interaction | | supports | | | | | | UUS | | | | | | service; | | | | | | otherwise | | | | | | it shall be | | | | | | absent. | | | | | | | | | | | | The | | | | | | information | | | | | | element is | | | | | | present if | | | | | | UUS2 | | | | | | Service was | | | | | | requested | | | | | | in the | | | | | | original | | | | | | call and | | | | | | remote MSC | | | | | | supports | | | | | | UUS | | | | | | service; | | | | | | otherwise | | | | | | it shall be | | | | | | absent | | | | | | | | | | | | The | | | | | | information | | | | | | element is | | | | | | present if | | | | | | UUS3 | | | | | | Service was | | | | | | requested | | | | | | in the | | | | | | original | | | | | | call and | | | | | | remote MSC | | | | | | supports | | | | | | UUS | | | | | | service; | | | | | | otherwise | | | | | | it shall be | | | | | | absent. | | | | | | | | | | | | The | | | | | | information | | | | | | element is | | | | | | present if | | | | | | UUS1 UUI | | | | | | was present | | | | | | in the | | | | | | original | | | | | | call and | | | | | | remote MSC | | | | | | supports | | | | | | UUS | | | | | | service; | | | | | | otherwise | | | | | | it shall be | | | | | | absent. | | | | | | | | | | | | The | | | | | | information | | | | | | element is | | | | | | present if | | | | | | the remote | | | | | | subscriber | | | | | | has | | | | | | accepted | | | | | | UUS1 | | | | | | service | | | | | | request and | | | | | | call | | | | | | forwarding | | | | | | or call | | | | | | deflection | | | | | | has been | | | | | | activated | | | | | | after that; | | | | | | otherwise | | | | | | it shall be | | | | | | absent. | +-------------+-------------+-------------+-------------+-------------+
# 6 Interaction with other supplementary services
GSM 02.87 specifies interaction of UUS with other supplementary services.
Additional details are provided in this clause.
## 6.1 Call forwarding unconditional (CFU)
No impact.
## 6.2 Call forwarding on mobile subscriber busy (CFB)
No impact, if CFB is invoked due to a NDUB condition or due to UDUB before an
alerting message was received from the mobile station.
If CFB is invoked due to a UDUB indication from the B forwarding subscriber
the same interaction as for CFNRy shall apply.
## 6.3 Call forwarding on no reply (CFNRy)
If UUS Service 1 is implicitly requested for a call to a subscriber who has
Call Forwarding on no reply active and operative, the forwarding MSC shall
store the UUI. If CFNRy is invoked, the stored UUI shall be forwarded with the
call.
If UUS Service 1 is explicitly requested as not required for a call to a
subscriber who has Call Forwarding on no reply active and operative, the
forwarding MSC shall store UUS 1 service request and UUI, if any. If the
forwarding user accepts the UUS1 supplementary service request in the Alerting
message, the CFNRy supplementary service can be invoked and the stored UUS1
service request and UUI, if any, shall be forwarded with the call. If the
forwarding user rejects the UUS1 supplementary service request or does not
include a response related to it in the Alerting message, then the CFNRy
supplementary service can be invoked but the UUS1 service request and UUI, if
any, shall not be forwarded with the call.
If UUS Service 1 is explicitly requested as required for a call to a
subscriber who has Call Forwarding on no reply active and operative and the no
reply condition timer expires, the remote MSC shall release the call towards
the calling subscriber.
If Call Forwarding on no reply is invoked for a call for which UUS Service 2
was requested as not required, UUS Service 2 shall not be requested for the
forwarding leg, i.e. UUS 2 is no longer available for the call.
Call Forwarding on no reply shall not be invoked if UUS Service 2 was
requested required for the initial mobile terminated call.
If UUS Service 3 is requested for a call to a subscriber who has Call
Forwarding on no reply active and operative, the forwarding MSC shall store
the UUS3 request. If CFNRy is invoked the UUS3 request shall be forwarded with
the call.
For further details refer to procedures UUS_ICH_Check_Forwarding and
UUS_MSC_Clear_UUS.
## 6.4 Call forwarding on mobile subscriber not reachable (CFNRc)
No impact.
## 6.5 Call waiting (CW)
No impact.
## 6.6 Call hold (HOLD)
No impact.
## 6.7 Completion of calls to busy subscribers (CCBS)
Requests for the activation of the UUS supplementary service contained in the
original call request shall be maintained along with other call information
used for the CCBS supplementary service.
The network shall also store any UUI containing in the original call request
and use this stored UUI in the CCBS call.
## 6.8 Explicit call transfer (ECT)
When calls are transferred as a result of invocation of explicit call transfer
supplementary service, the UUS supplementary service activated on either of
the calls prior to the invocation of the explicit call transfer supplementary
service shall be cancelled by the network.
No specific notification shall be sent to the users on the resulting call when
the UUS supplementary service is no longer activated.
The users on the resulting call can request service 3 again, if required.
## 6.9 Multi party service (MPTY)
No impact.
## 6.10 Advice of charge (AoC)
No impact.
## 6.11 Barring of outgoing calls (BAOC)
No impact.
## 6.12 Barring of outgoing international calls (BOIC)
No impact.
## 6.13 Barring of outgoing international calls except those directed to the
home PLMN country (BOIC-exHC)
No impact.
## 6.14 Barring of incoming calls (BAIC)
No impact.
## 6.15 Barring of incoming calls when roaming outside the home PLMN country
(BIC-Roam)
No impact.
## 6.16 Call deflection (CD)
If Call Deflection is invoked before alerting there is no impact.
If Call Deflection is invoked after alerting the same interactions as for Call
forwarding on no reply shall apply.
# 7 Interaction with other network features
## 7.1 Customised Applications for Mobile network Enhanced Logic (CAMEL)
No impact.
## 7.2 Support for Optimal Routeing(SOR)
The invocation of Optimal Routeing in case of late call forwarding shall have
no impact on the interactions of UUS with the call forwarding supplementary
services as defined in clause 6.
The UUS request, UUI and UUS CF interaction indicator, if any, shall be added
to the Resume Call Handling message in remote MSC when SOR late call
forwarding is applied. For details refer to the procedure UUS_ICH_Handle_LCF
in SDLs and the procedure Handle_ORLCF_VMSC (see GSM 03.79).
The UUS request and UUI, if any, shall be copied from the Resume Call Handling
message to the IAM in GMSC when SOR late call forwarding is applied. For
details refer to the procedure UUS_GMSC_Check_Forwarding in SDLs and the
procedure OR_Handle_RCH (see GSM 03.79).
If UUS CF interaction indicator was present in Resume Call Handling message,
the presence of UUS1 Service acceptance and UUI, if any, shall be modified
during call setup time. For further details refer to the procedure MT_CF_MSC
(see GSM 03.18) and UUS_MSC_Clear_UUS.
# 8 Interworking with other networks
## 8.1 Interworking with GSM PLMN/ISDN network supporting only a maximum User-
user information element length of 35 octets
If interworking occurs with a network supporting only a maximum of User-user
information element length of 35 octets, no notification shall be given to the
calling user or called user sending the user information.
## 8.2 Interworking with non-ISDN network
In the case of interworking with non-ISDN network or with a non-ISDN called
user, a progress indicator information element indicating #1 \"call is not
end-to-end ISDN; further progress information may be available in-band\" or #2
\"destination address is non-ISDN\", respectively, is sent to the calling user
as part of basic call.
This progress information shall serve as indication that the requested service
cannot be guaranteed.
# 9 Network entity functions
## 9.1 Originating network processes
### 9.1.1 Procedures in MSC
Figure 9.1.1.1 Procedure UUS_OCH_Check_Setup
This procedure is called when Setup is received from A-subscriber. It sets
requested UUS service options into SIFOC message.
Figure 9.1.1.2 Procedure UUS_OCH_Set_Info_In_IAM
Requested UUS service options and possible UUS1 data is copied in IAM. The
procedure is controlled by the Complete Call message parameters from the VLR.
Figure 9.1.1.3 Procedure UUS_OCH_Set_Alert_And_Connect_Param
In this procedure UUS related parameters are checked and set into the
Alerting/Connect message that is sent to A‑subscriber. If any of the UUS
services is requested as required and positive service acknowledgement is not
received from the remote end, the check will fail and the call will be
cleared.
{width="6.200694444444444in" height="7.541666666666667in"}
Figure 9.1.1.1: Procedure UUS_OCH_Check_Setup
{width="6.200694444444444in" height="7.541666666666667in"}
Figure 9.1.1.2: Procedure UUS_OCH_Set_Info_In_IAM
{width="6.217361111111111in" height="7.50625in"}
Figure 9.1.1.3: Procedure UUS_OCH_Set_Alert_And_Connect_Param
### 9.1.2 Procedures in VLR
Figure 9.1.2.1 Procedure UUS_OCH_Check_Provision.
This procedure is called in the VLR during subscription checks for an outgoing
call. It sets requested UUS service provision information in Complete call
message. If any of the UUS services is requested as required and the service
is not provided to the subscription, the check will fail and the call will be
cleared.
{width="6.200694444444444in" height="7.541666666666667in"}
Figure 9.1.2.1: Procedure UUS_OCH_Check_Provision
## 9.2 Terminating network processes
### 9.2.1 Procedures in GMSC
Figure 9.2.1.1 Procedure UUS_GMSC_Check_Forwarding.
This procedure is called when Resume Call Handling message is received from
the remote MSC. If the message contains UUS related information, that is
copied to the subsequent IAM message.
{width="6.217361111111111in" height="7.50625in"}
Figure 9.2.1.1: Procedure UUS_GMSC_Check_Forwarding
### 9.2.2 Procedures in MSC
Figure 9.2.2.1 Procedure UUS_ICH_Check_Support.
This procedure is called after Alerting/Connect message is received from
B-subscriber. It checks whether UUS service is possible and if not whether the
call setup can be continued.
Figure 9.2.2.2 Procedure UUS_ICH_Check_Forwarding.
This procedure is called when no reply is received from B-subscriber. It
checks whether call forwarding is allowed from UUS service point of view.
Figure 9.2.2.3 Procedure UUS_ICH_Handle_LCF.
This procedure is used to add UUS information to Resume Call Handling message
when Optimal Routeing late call forwarding is supported.
Figure 9.2.2.4 Procedure UUS_ICH_Set_Info_In_IAM.
This procedure is used to add UUS specific information to forwarded call IAM
message.
Figure 9.2.2.5 Procedure UUS_ICH_UUS1_Implicit_Active.
This procedure is used to set UUS1 implicit service active at the remote MSC
when only UUI for service 1 is received.
{width="6.200694444444444in" height="7.541666666666667in"}
Figure 9.2.2.1: Procedure UUS_ICH_Check_Support
{width="6.200694444444444in" height="7.541666666666667in"}
Figure 9.2.2.2: Procedure UUS_ICH_Check_Forwarding
{width="6.200694444444444in" height="7.541666666666667in"}
Figure 9.2.2.3: Procedure UUS_ICH_Handle_LCF
{width="6.200694444444444in" height="7.541666666666667in"}
Figure 9.2.2.4: Procedure UUS_ICH_Set_Info_In_IAM
{width="6.217361111111111in" height="7.50625in"}
Figure 9.2.2.5: Procedure UUS_ICH_UUS1_Implicit_Active
## 9.3 Procedures common in serving and remote networks
Figure 9.3.1 Procedure UUS_MSC_Check_UUS1_UUI.
This procedure is used to check whether it is allowed to pass UUI for UUS1
from MS to network or vice versa.
Figure 9.3.2 Procedure UUS_MSC_Check_UUS2_UUI_to_MS.
This procedure is used to check whether it is allowed to pass User-To-User
messages for UUS2 from network to MS.
Figure 9.3.3 Procedure UUS_MSC_Check_UUS2_UUI_to_NW.
This procedure is used to check whether it is allowed to pass User-To-User
messages for UUS2 from MS to network.
Figure 9.3.4 Procedure UUS_MSC_Check_UUS3_UUI_to_MS.
This procedure is used to check whether it is allowed to pass User-To-User
messages for UUS3 from network to MS.
Figure 9.3.5 Procedure UUS_MSC_Check_UUS3_UUI_to_NW.
This procedure is used to check whether it is allowed to pass User-To-User
messages for UUS3 from MS to network.
Figure 9.3.6 Procedure UUS_MSC_Clear_UUS.
This procedure is used to handle the call forwarding interaction with UUS when
call control messages are received from the forwarded-to NW.
Figure 9.3.7 Macrodefinition UUS_MSC_Check_UUS1.
Macro used in procedures UUS_OCH_Set_Alert_And_Connect_Param and
UUS_ICH_Check_Support. It checks whether UUS service 1 is supported.
Figure 9.3.8 Macrodefinition UUS_MSC_Check_UUS2.
Macro used in procedures UUS_OCH_Set_Alert_And_Connect_Param and
UUS_ICH_Check_Support. It checks whether UUS service 2 is supported.
Figure 9.3.9 Macrodefinition UUS_MSC_Check_UUS3.
Macro used in procedures UUS_OCH_Set_Alert_And_Connect_Param and
UUS_ICH_Check_Support. It checks whether UUS service 3 is supported.
{width="6.200694444444444in" height="7.541666666666667in"}
Figure 9.3.1: Procedure UUS_MSC_Check_UUS1_UUI
{width="6.200694444444444in" height="7.541666666666667in"}
Figure 9.3.2: Procedure UUS_MSC_Check_UUS2_UUI_to_MS
{width="6.200694444444444in" height="7.541666666666667in"}
Figure 9.3.3: Procedure UUS_MSC_Check_UUS2_UUI_to_NW
{width="6.200694444444444in" height="7.541666666666667in"}
Figure 9.3.4: Procedure UUS_MSC_Check_UUS3_UUI_to_MS
{width="6.200694444444444in" height="7.541666666666667in"}
Figure 9.3.5: Procedure UUS_MSC_Check_UUS3_UUI_to_NW
{width="6.200694444444444in" height="7.541666666666667in"}
Figure 9.3.6: Procedure UUS_MSC_Clear_UUS
{width="6.200694444444444in" height="7.541666666666667in"}
Figure 9.3.7: Macrodefinition UUS_MSC_Check_UUS1
{width="6.200694444444444in" height="7.541666666666667in"}
Figure 9.3.8: Macrodefinition UUS_MSC_Check_UUS2
{width="6.217361111111111in" height="7.50625in"}
Figure 9.3.9: Macrodefinition UUS_MSC_Check_UUS3
## 9.4 Processes used during Active Call
There are different processes running for UUS3 during active call in serving
and remote network. However, this differentiation does not implicitly mean
that call originator's network is serving network. The differentiation is
based on which party initiates the UUS3 service. Thus, serving network process
shall be used on initiator\'s side and remote network process on the opposite
end.
### 9.4.1 Process and procedures in serving MSC
Figure 9.4.1.1 Process Serving_MSC_Handle_UUS_In_Active_Call
This process is used to check UUS3 activation during active call, handle UUS3
flow control and interaction with ECT supplementary service. The process
starts during the call setup and checks the content of the Connect message in
order to start the UUS3 flow control correctly. If the UUS3 is not activated
the process stays in the Idle state and waits UUS3 activation request from the
MS.
Figure 9.4.1.2 Procedure UUS_MSC_Check_UUS3_Activation
This procedure is used to handle the dialogue towards the serving VLR when
provisioning check is done.
{width="6.200694444444444in" height="7.541666666666667in"}
Figure 9.4.1.1: Process Serving_MSC_Handle_UUS_In_Active_Call (sheet 1)
{width="6.200694444444444in" height="7.541666666666667in"}
Figure 9.4.1.1: Process Serving_MSC_Handle_UUS_In_Active_Call (sheet 2)
{width="6.200694444444444in" height="7.541666666666667in"}
Figure 9.4.1.1: Process Serving_MSC_Handle_UUS_In_Active_Call (sheet 3)
{width="6.200694444444444in" height="7.541666666666667in"}
Figure 9.4.1.1: Process Serving_MSC_Handle_UUS_In_Active_Call (sheet 4)
{width="6.200694444444444in" height="7.541666666666667in"}
Figure 9.4.1.2: Procedure UUS_MSC_Check_UUS3_Activation
### 9.4.2 Process and procedures in serving VLR
Figure 9.4.2.1 Process Serving_VLR_Handle_UUS_In_Active_Call
This process is running in the serving VLR. If the UUS3 activation request
comes during the active call, this process is used to check whether the
service is provisioned to the subscriber.
{width="6.200694444444444in" height="7.541666666666667in"}
Figure 9.4.2.1: Process Serving_VLR_Handle_UUS_In_Active_Call
### 9.4.3 Process and procedures in remote MSC
Figure 9.4.3.1 Process Remote_MSC_Handle_UUS_In_Active_Call
This process is running in the remote MSC. It is used for checking whether
UUS3 UUI's can be passed on and control the flow control for UUS3. The process
starts during the call setup and checks the content of the Connect message in
order to start the UUS3 flow control correctly. If the UUS3 is not activated
the process stays in the Idle state and waits UUS3 activation request from the
NW.
{width="6.200694444444444in" height="7.541666666666667in"}
Figure 9.4.3.1: Process Remote_MSC_Handle_UUS_In_Active_Call (sheet 1)
{width="6.200694444444444in" height="7.541666666666667in"}
Figure 9.4.3.1: Process Remote_MSC_Handle_UUS_In_Active_Call (sheet 2)
{width="6.200694444444444in" height="7.541666666666667in"}
Figure 9.4.3.1: Process Remote_MSC_Handle_UUS_In_Active_Call (sheet 3)
{width="6.217361111111111in" height="7.50625in"}
Figure 9.4.3.1: Process Remote_MSC_Handle_UUS_In_Active_Call (sheet 4)
# 10 Information stored in the HLR and in the VLR
## 10.1 Information stored in the HLR
The following logical states are applicable for each of the 3 Services of the
User-to-user supplementary service (refer to GSM 03.11 for an explanation of
the notation):
* * *
Provisioning State Registration State Activation State HLR Induction State
(Not Provisioned, Not Applicable, Not Active, Not Induced) (Provisioned, Not
Applicable, Active and operative, Not Induced)
* * *
The HLR shall store:
\- the logical state of each of the 3 services of the UUS supplementary
service (which shall be one of the valid states listed above) on a per
subscriber basis.
## 10.2 Transfer of information from HLR to VLR
If the provisioning state for the UUS services is \"Provisioned\" then when
the subscriber registers on a VLR the HLR shall send that VLR information
about the logical state of these UUS services.
If the logical state of the UUS services is changed while a subscriber is
registered on a VLR then the HLR shall inform the VLR of the new logical state
of the UUS services.
## 10.3 Information stored in the VLR
For the supplementary service UUS the VLR shall store the service state
information received from the HLR.
# 11 State transition model
Figure 11.1 shows the successful cases of transition between the applicable
logical states of the service. The state changes are caused by actions of the
service provider.
Note that error cases are not shown in the diagram as they normally do not
cause a state change. Additionally, some successful requests may not cause a
state change and are therefore not shown in the diagram.
{width="5.413194444444445in" height="1.9465277777777779in"}
Figure 11.1: State transition model
# 12 Handover
Handover will have no impact on the control procedures and the operation of
the service.
#