# Foreword
This Technical Report has been produced by the 3^rd^ Generation Partnership
Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
GSMA has identified a new roaming model for VoLTE called \"S8 Home Routed
(S8HR)\" whereby the PGW, PCRF and P-CSCF are located in the HPLMN also when
the UE is roaming in a VPLMN. S8HR roaming architecture aims to provide IMS
services to UEs roaming in VPLMN with the UE to network IMS interface (Gm)
between the UE and the HPLMN only and not requiring any IMS network to network
interface (NNI) between the VPLMN and HPLMN.
The present document studies and evaluates the architecture enhancements
required to support S8HR for VoLTE. The architecture enhancements should also
be applicable to other IMS services.
The study will cover at a minimum the following topics:
\- Support of Emergency calls to meet regulatory requirement
\- Impacts on SRVCC for the S8HR roaming scenarios required by GSMA.
\- Coexistence of LBO and S8HR roaming architectures
\- Providing VPLMN Identity to IMS entities in HPLMN
\- Handling of geo-local number
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or non‑specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] Void.
[3] Void.
[4] GSMA PRD IR.92: \"IMS Profile for Voice and SMS\".
[5] GSMA PRD IR.94: \"IMS Profile for Conversational Video Service\".
[6] GSMA PRD IR.88: \"LTE and EPC Roaming Guidelines\".
[7] 3GPP TS 23.401: \"General Packet Radio Service (GPRS) Enhancements for
Evolved Universal Terrestrial Radio Access Network (E-UTRAN) access\".
[8] 3GPP TS 23.228: \"IP Multimedia Subsystem (IMS); Stage 2\".
[9] 3GPP TS 23.167: \"IP Multimedia Subsystem (IMS) emergency sessions\".
[10] 3GPP TS 24.229: \"IP Multimedia Call Control based on SIP and SDP; Stage
3 \".
[11] 3GPP TS 23.203: \"Policy and Charging Control architecture\".
[12] 3GPP TS 33.203: \"Access Security for IP-based services\".
[13] 3GPP TS 22.278: \"Service requirement for the Evolved Packet System
(EPS)\".
# 3 Definitions, symbols and abbreviations
For the purposes of the present document, the terms and definitions given in
TR 21.905 [1] and the following apply.\ A term defined in the present document
takes precedence over the definition of the same term, if any, in TR 21.905
[1]
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
TR 21.905 [1] and the following apply. A term defined in the present document
takes precedence over the definition of the same term, if any, in TR 21.905
[1].
**VoLTE:** Voice over LTE is a profile for voice over IMS over LTE, and for
SMS over IMS and SMS over SGs as defined in GSMA PRD IR.92 [4].
## 3.2 Symbols
For the purposes of the present document, the following symbols apply:
VoLTE Voice over LTE
S8HR S8 Home Routed
## 3.3 Abbreviations
For the purposes of the present document, the abbreviations given in TR 21.905
[1] and the following apply.\ An abbreviation defined in the present document
takes precedence over the definition of the same abbreviation, if any, in TR
21.905 [1].
# 4 Assumption and Architecture Requirements
## 4.1 Assumptions
The following architectural assumptions are applicable to VoLTE roaming:
\- A PLMN that supports VoLTE roaming may support LBO only, may support S8HR
based home routing only, or may support both LBO and S8HR roaming models.
\- A VPLMN will be connected to multiple HPLMNs; some of these HPLMN\'s may
only support LBO, some may only support S8HR based home routing, and some may
support both.
\- A HPLMN will be connected to multiple VPLMNs; some of these VPLMNs may only
support LBO, some may only support S8HR based home routing, and some may
support both.
\- For a specific HPLMN and VPLMN pair only one roaming model will be used
(based on roaming agreement) - in the reverse configuration of this pair of
PLMNs, the same or different roaming model may be used.
\- In order to set the IMS Voice over PS indicator to the UE as specified in
TS 23.401 [7], clause 4.3.5.8, MME is configured to know that the serving PLMN
has roaming agreement for IMS voice with the HPLMN of the UE. This
configuration is on a per-HPMN basis.
\- Paging Policy Differentiation (PPD) feature, as defined in TS 23.401 [7]
and TS 23.228 [8], does not apply to S8HR roaming model.
\- For SRVCC:
\- The interface between the MSC in VPLMN and Home IMS is based on ISUP/BICC,
therefore SRVCC enhanced with ATCF (a.k.a. \"eSRVCC\"), SRVCC with MSC Server
assisted mid-call feature, SRVCC in alerting phase, and SRVCC in pre-alerting
phase, are not supported with the S8HR architecture.
\- Basic SRVCC, i.e. pre Rel‑10 SRVCC without the use of ACTF/ATGW, is
supported for S8HR architecture using existing specifications.
NOTE: In order to use basic SRVCC with S8HR architecture, the HPLMN needs to
support basic SRVCC as well and the activation of the feature for roamers in
the VPLMN is based on operator agreements.
\- CS to PS SRVCC (a.k.a. \"rSRVCC\") and vSRVCC are not supported with S8HR
architecture.
## 4.2 Architecture and Architecture Requirements
The architecture for S8HR is given in the figure below. S8HR is the
architecture for roaming of IMS services which use \"well known\" IMS APN
whereby the PGW, PCRF and P-CSCF are located in the HPLMN also when the UE is
roaming in a VPLMN.
Figure 4.2-1: Architecture with S8 Home Routed for IMS services via \"well
known\" IMS APN (support for SRVCC or IMS Emergency sessions is not shown
here)
The key features of the architecture are as follows:
\- IMS services are home-routed using \"well known\" IMS APN via S8 interface
similar to other data roaming traffic; signalling and media use same \"well
known\" IMS APN established with the HPMN, each with specific QCI.
\- HPMN has the full control of the call routing per service logics.
\- The IMS UNI is provided directly between UE and the HPMN.
\- The VPMN is not service aware.
\- The VPLMN supports all capabilities to serve VoLTE calls for inbound
subscribers, e.g., IMS voice over PS support indication to the UE, QCI=1 for
voice, QCI=2 for conversational video if the VPLMN support conversational
video, and QCI=5 bearers in EPC and E-UTRAN.
The following are the architecture requirements:
\- For the VPLMN and HPLMN to enable S8HR roaming architecture for VoLTE [4]
and conversational Video [5], the following conditions must be fulfilled in
EPC and for E-UTRAN access:
1\. the VPLMN must support the following capabilities:
\- Bearer with QCI=5 for IMS signalling traffic;
\- Bearer with QCI=1 for voice media traffic;
\- Bearer with QCI=2 (or non-GBR QCI) for video media traffic if the VPLMN
supports conversational video;
\- Indication from MME to the UE \"IMSVoPS Supported Indicator = supported\";
\- Indication from MME to the HSS \"Homogeneous Support of IMS Voice over
PS\".
2\. the HPLMN must support:
\- Bearer with QCI=5 for IMS signalling traffic;
\- Bearer with QCI=1 for voice media traffic;
\- Bearer with QCI=2 (or non-GBR QCI) for video media traffic if the HPLMN
supports conversational video.
\- QCI=1, 2 and 5 are supported on the home-routed PDN connection when
roaming.
\- \"Well known\" IMS APN [6] is resolved to a PGW in the HPLMN, i.e. VPLM
address allowed flag set to not allowed.
# 5 Key Issues
## 5.1 Key Issue 1 - How to make UE detected IMS emergency session successful
### 5.1.1 Description
This key issue is how make UE detected IMS emergency session successful when
S8HR roaming is used. When S8HR roaming is used for VoLTE and there is no IMS
roaming NNI between the VPLMN and the HPLMN as shown in the Figure below.
Figure 5.1.1-1. Baseline Emergency architecture for a roamed-in UE with S8HR
IMS roaming [without]{.underline} IMS roaming NNI between the VPLMN and HPLMN
The following sub-key issues are identified. Solutions may be targeted to
specific key issues or solve all the sub-key issues.
#### 5.1.1.2 Key-issue 1a: How to handle UE\'s IMS emergency registration
Since there is no NNI between the P-CSCF in the VPLMN and the I/S-CSCF in the
HPLM, it is not possible using the existing TS 23.167 [9] and TS 23.228 [8]
specifications to authenticate the UE in IMS Domain. The key issue is how to
make the IMS emergency registration successful, eg. authenticate the UE.
#### 5.1.1.3 Key-issue 1b: How to support PSAP callback
Since there is no IMS-level NNI between the VPLMN and the HPLMN, it is not
possible for the IMS nodes in the VPLMN to fetch the IMS subscription
information containing a pre-provisioned PSAP callback number for inbound
roamers.
The key issue is how to enable the PSAP callback functionality for inbound
roamers in networks using S8HR where required by regulators.
## 5.2 Key Issue 2 - Handling of non UE detectable Emergency Session
### 5.2.1 Description
The key issue is how the PCSCF in the HPLMN is able to detect and handle non-
UE detectable Emergency session from a UE in a visited PLMN.
## 5.3 Key Issue 3 - Determination of the ID of the visited PLMN at IMS
Entities in HPLMN
### 5.3.1 Description
The ID of the visited PLMN needs to be made available at IMS entities in the
HPLMN at different instances:
\- During the registration, the S-CSCF and TAS need to be made aware about the
ID of the visited PLMN e.g. for charging purposes and to enable the HPLMN to
subsequently perform roaming registration restriction or communication barring
supplementary services.
\- To handle non UE detectable IMS emergency session establishment the P-CSCF
needs to be aware of the MCC of the VPLMN from where the UE initiates IMS
session. This information is needed at the P-CSCF at every IMS session
establishment.
\- The HPLMN IMS entities need to be aware of the ID of the visited PLMN at
session set up in order to populate the charging records.
## 5.4 Key Issue 4 - Local Number Translation and Routing
### 5.4.1 Description
Geo-local service number has been supported in legacy CS network and IMS
network to allow the user to access services in visited network without
dialling the national code or regional code of the visited network. These geo-
local service numbers (e.g. short codes), numbers may be specific to the PLMN,
the country, or the area the UE is currently located - currently for VoLTE the
translation related to these geo-local service numbers is performed by the
PLMN IMS network. In addition many countries have numbers that while complying
with national numbering plans are not routable from international destinations
(e.g. 1800 free-phone); in some cases the PLMN relies on third parties to
perform routing and translation for these numbers. In some cases the PLMN may
translate geo-local service numbers into these non-international routable
numbers. For some numbers the translation may be defined differently according
to where the call originated from (e.g. a number may have a different
translation based on the city where the call originated) and the VPLMN may use
approximate location information (e.g. cell ID in conjunction with cell
location) in part or all of the number translation process.
When LBO based routing is used the VPLMN supports the translations and routing
of these services is performed by the VPLMN (often using the same
configuration used for its own subscribers).
However, when a roaming UE is home routed it is undefined how service numbers
are translated, and how non-international routed numbers are routed to their
appropriate destinations. The key issue is therefore to define how the
translation and routing of these numbers may be achieved when the S8HR roaming
model is used.
# 6 Solutions
## 6.1 Solution #1: Local Database based non UE detectable emergency session
### 6.1.1 Description
This is a solution for:
\- Key Issue 2 - Handling of non UE detectable Emergency Session.
A non UE detectable emergency number in the VPLMN can be considered as Geo-
Local Number and therefore, the HPLMN has to perform number translation taking
both UE location and dialled non UE detectable emergency number into account
at the HPLMN.
With respect to key issue 2, the P-CSCF can query a database for locally used
emergency call numbers. The handling of non UE detectable emergency calls are
based on the local regulations, e.g. the P-CSCF can reject with a 380
response, or provide an indication to use CS in the VPLMN or provide a local
P-CSCF address to try an unauthenticated IMS emergency session.
The following figure shows the corresponding call flow for this functionality:
Figure 6.1.1-1: IMS Registration and Location Retrieval
1\. The UE attaches to the VPLMN and establishes bearer(s) to the PGW in the
HPLMN.
2\. The UE sends a SIPREGISTER to the P-CSCF.
3\. The P-CSCF retrieves the VPLMN ID according to the solution of key issue
2.
4\. The P-CSCF may query a database for local emergency numbers and may store
them for later comparison with incoming requests from this PLMN using short
codes.
The database may be:
a) a local database for each PLMN with the emergency numbers of all the
roaming partners;
b) a global database e.g., the NG RAEX IR.21 database maintained by GSMA.
NOTE: GSMA should be liaised with, asking them whether they see any problem
in:
\- enhancing the structure of NG RAEX IR.21 database to store the local
emergency numbers of the PLMNs of the operators Full Members of the GSMA that
activate S8HR roaming agreements, and
\- allowing the operators Full Members of the GSMA that activate S8HR roaming
agreements to use the NG RAEX IR.21 database in order to exchange the
information needed to enable non UE detectable emergency session handling.
c) each VPLMN maintains a database with local emergency numbers only which is
accessible to all the roaming partners.
If the local database is according to option c), then the local database in
each VPLMN may be queried from HPLMN using e.g. DNS (see Solution #1a: How
P-CSCF can detect emergency numbers in a VPLMN).
5\. The P-CSCF includes the VPLMN ID in the P-Visited-Info header and forwards
the REGISTER to the S-CSCF.
The following figure shows the detection in the P-CSCF of a non UE detectable
emergency call.
Figure 6.1.1-2: Detection of non UE detectable emergency call
1\. The UE registers to IMS according to Figure 6.1.1-1.
2\. The UE sends a SIP INVITE with a non UE detectable emergency nr of the
VPLMN.
3\. The P-CSCF compares the Request URI with the local emergency numbers for
this PLMN and detects the emergency call . The P-CSCF may continue either with
step 4a or 4b.
4a. The P-CSCF forwards the INVITE to the S-CSCF.
4b. The P-CSCF rejects the request by sending an error message to the UE and
pointing to different actions, e.g. try emergency call in CS, provide a local
P-CSCF address for unauthorized emergency call in VPLMN (emergency attach must
be supported by VPLMN).
### 6.1.2 Impacts on existing nodes and functionality
P-CSCF: P-CSCF requests access network information at time of SIP Registration
and holds or queries a database with local emergency numbers of roaming
partner networks and compares incoming requests with such numbers. Handling of
non UE detectable emergency calls are based on local regulations.
An interface for querying the database of emergency numbers needs to be
standardized.
### 6.1.3 Solution Evaluation
The P-CSCF has to compare the dialled number in the SIP Invite with the
emergency numbers of the VPLMN. The P-CSCF queries a database for locally used
emergency numbers.
This solution assumes that emergency numbers are valid PLMN-wide.
## 6.1a Solution #1a: How P-CSCF can detect emergency numbers in a VPLMN
### 6.1a.1 Description of the solution
This solution describes a variant (complement) of solution 1 related with How
P-CSCF can detect emergency numbers in a VPLMN. It assumes that the P-CSCF is
aware of the PLMN where the UE is roaming. Message flows related with this
solution are to be found in solution 1.
The solution assumes that each local PLMN that has S8HR roaming agreements
maintains a DB of the emergency number defined in the local country and that
this DB can be accessed by P-CSCF in HPLMN.
The P-CSCF (in the HPLMN) takes the PLMN-ID of the VPLMN (where the UE is
located) to build a specific FQDN associated with the emergency numbers in
that country and issues a DNS record request to get the list of the emergency
numbers in that country. The P-CSCF is not assumed to retrieve this list each
time an UE registers or issues session related signaling as it may cache the
DNS record received as output of a previous DNS look-up.
One such DB is maintained Per VPLMN (that has S8HR roaming agreements): The
P-CSCF performs a DNS NAPTR query on an input FQDN (to be defined in 23.003)
containing the \"mcc\.mnc\\" (of the PLMN where the UE is camping)
to a DNS server maintained by the VPLMN that returns a list of local emergency
numbers; This requires the VPLMN to maintain such a DB even though it does not
support IMS (maintaining such a DB is part of the \"S8HR roaming agreement\").
### 6.1a.2 Impacts on existing nodes and functionality
The solution requires
\- an update of the P-CSCF.
\- the maintaining of a DNS record containing the list of local emergency
numbers in a country.
NOTE: This should not require much work as new emergency numbers are rarely
defined in a country.
### 6.1a.3 Solution Evaluation
This solution is a complement to solution 1. It avoids the management overhead
where the P-CSCF (in HPLMN) would have to be locally configured with the list
of emergency numbers associated with each country of a VPLMN with which the
HPLMN has roaming agreements: the DB of emergency numbers within a country is
locally managed in the country (instead of having this information spread in
all HPLMN).
## 6.2 Solution #2: Local Number Translation
### 6.2.1 Description
This is a solution for:
\- Key Issue 4 - Local Number Translation and Routing.
The P-CSCF will follow the procedure as described in TS 23.228 [8] and forward
the request to the S-CSCF, which will forward the request further to an AS to
resolve the local number and translates it into a global format in the AS.
Figure 6.2.1-1: Detection of Local Numbers
1\. The UE registers to IMS.
2\. The UE sends a SIP INVITE with a local short number of the VPLMN and an
UPLI (UE Provided Location Information) in PANI.
3\. According to the procedure in TS 23.228 [8], the P-CSCF forwards the
INVITE and may add a PANI/NPLI to the S-CSCF.
4\. According to the procedure in TS 23.228 [8], clause 4.2.2, the S-CSCF
routes the request to the AS.
NOTE 1: According to TS 23.228 [8], the AS may need to identify the visited
access network, e.g. from information in SIP signalling or via the Sh
interface.
5\. The AS translates the local number into a globally routable format, if
possible.
> If the above fails, or if the globally routable formatted number (returned
> to the AS in step 5) is not routable from outside the visited country (e.g.
> 1800 numbers in US) and translation to international routable numbers is
> needed, then the HPLMN will need to take additional steps to route the call
> to the correct destination.
NOTE 2: Examples of how the HPLMN may route these calls to the correct
destination include:
a) sending the call (with location information) via a direct interconnect to a
party in the visited country to handle the translation locally;
b) performing a DB query (with location information) with a party in the
visited country that supplies translation information to translate these
numbers to international routable numbers.
### 6.2.2 Impacts on existing nodes and functionality
None. Routing and numbering translation procedure is performed as according to
TS 23.228 [8].
### 6.2.3 Solution Evaluation
Using the PANI from the UE, this solution performs as in the LBO case where AS
can translate the local number to a globally routable format if a mapping
table is available.
## 6.3 Solution #3: Determination of PLMN-ID via HSS interaction
### 6.3.1 Description
This solution is related to Key Issue #3 - Determination of the ID of the
visited PLMN at IMS Entities in HPLMN.
This solution assumes that it is used in the normal successful IMS
registration and PDN connection in VPLMN.
This solution is basically using Cx interface, to get the ID of VPLMN that is
serving the UE. During the location update of Attach/PDN connection
establishment, HSS stores VPLMN-ID based on location information of an UE.
Then at the IMS registration time, S-CSCF obtains the PLMN-ID from HSS via Cx
interface, and forwards this information to P-CSCF via I-CSCF.
Existing IMS mechanisms can be used to propagate this information to AS (eg.
TAS) in the HPLMN via Sh interface or S-CSCF can be enhanced to include VPLMN-
ID to AS during 3^rd^ party registration procedure.
Figure 6.3.1-1: IMS registration in case of S8 Home routed roaming
0\. The UE performs normal EPS attach and the UE updates its location
information to the HSS (by sending ULR including Visited-PLMN-Id). The HSS
stores the ID of VPLMN that is serving the UE.
1\. The UE performs an IMS registration.
2-4. The steps for IMS registration are progressed. The I-CSCF adds the HPLMN
ID in the step 3. In the step 3, the HSS indicates whether the user is allowed
to register, by comparing VPLMN ID stored in step 0 and the preconfigured PLMN
IDs allowing IMS roaming registration. HSS also needs to further differentiate
between the registrations from S8HR or LBO architectures.
NOTE: The decisions on Lawful Interception in P-CSCF and S-CSCF are delayed
until VPLMN ID is available.
5\. The S-CSCF obtains the PLMN-ID for the UE from the HSS via Cx interface.
HSS needs to implement the new procedure above for IMS roaming registration
check.
6-7. The S-CSCF forwards the PLMN-ID which is obtained from HSS to the P-CSCF
via I-CSCF. The P-CSCF stores this PLMN-ID for future uses. After IMS
registration, the P-CSCF can handle non UE detectable IMS emergency session
establishment based on this PLMN-ID and pre-configuration information, in
order to resolve key issue #2.
8\. The P-CSCF sends IMS registration response message to the UE. The VPLMN ID
is not included in this step.
9-11. S-CSCF may include the VPLMN ID to TAS during 3^rd^ party registration
procedure (step 9). If VPLMN ID is not included, AS can obtain VPLMN ID from
HSS using the existing IMS mechanism and Sh interface (step 10/11).
### 6.3.2 Impacts on existing nodes and functionality
HSS:
\- In Step 3, the HSS needs to further differentiate between the registrations
from S8HR or LBO architectures and for S8HR case perform roaming restrictions
check based not on the PLMN-ID provided by the I-CSCF but the PLMN-ID in the
access-network registration.
\- In Step 5, HSS informs IMS entities of the ID of the visited PLMN via Cx/Sh
interface.
I/SCSCF:
\- I/S-CSCF forwards the ID of the visited PLMN, which is obtained from HSS,
to P-CSCF, and the P-CSCF stores this PLMN ID. HSS needs to implement the new
procedure above for IMS roaming registration check.
\- Optionally, S-CSCF and ISC are enhanced to allow VPLMN ID be sent during
3^rd^ party registration procedure to AS.
SIP:
\- The SIP message protocol from S-CSCF to P-CSCF has to be modified to also
include PLMN-ID in the header.
### 6.3.3 Solution Evaluation
There is no additional signalling overhead comparing with the existing IMS
registration.
It doesn\'t need additional signalling to get the VPLMN ID.
The solution cannot work if the UE access EPS simultaneously via more than one
access network which use different PLMN-IDs.
NOTE: If the UE simultaneously accesses EPS via more than one access, say 3GPP
access and WLAN access, and these accesses provide different PLMN-IDs to the
HSS, it is not possible for the HSS to know which VPLMN-Id is being used to
access IMS-APN. Hence HSS will not able to determine the appropriate PLMN-ID
to perform roaming restriction check or provide the appropriate PLMN-ID to the
S-CSCF. However, if the operator provides IMS service over only 3GPP access by
configuring operator policy, e.g. reject IMS PDN over non 3GPP access, HSS is
able to determine PLMN-ID being used to access IMS-APN.
## 6.4 Solution #4: VOID
## 6.5 Solution #5: IMS emergency session with or without IMS registration
failure
### 6.5.1 Description
#### 6.5.1.1 General
This solution addresses key issue 1 (\"How to make UE-detected IMS emergency
session successful\").
In this solution the network is able to skip the IMS-level authentication with
sufficient confidence based on the fact that the UE has been successfully
authenticated at EPS level, the identities number retrieved via the PCRF
serving as a \"soft\" proof. This is similar to GIBA (GPRS-IMS Bundled
Authentication; see TS 33.203 [12]) where the IP address assigned at GPRS
level (and retrieved by the IMS from the HSS) is used as a \"soft\" proof that
the UE has been successfully authenticated at GPRS level, allowing the IMS to
proceed without authenticating the UE at IMS-level.
This solution proposes to provision a PSAP callback number via the PCRF in the
VPLMN (located between the P-CSCF in the VPLMN and the PGW in the VPLMN).
NOTE 1: The PSAP call back functionality is not changed. Only the retrieval of
PSAP callback number is different.
In this solution the IMS network accepts the SIP REGISTER message without
attempting to authenticate the UE, without creating a UE registration state in
the VPLMN IMS, and without impacting the UE registration state that the UE may
have on a parallel non-emergency IMS PDN connection (i.e. the one with HPLMN
IMS from S8HR).
NOTE 2: SA WG3 needs to review the security aspects of this solution.
#### 6.5.1.2 Solution description
The call flow for the case where IMS registration failure is avoided is
described in Figure 6.5.1.2-1.
Figure 6.5.1.2-1: IMS Emergency Session Establishment
1\. UE establishes a PDN connection for IMS emergency services.
2\. IMSI, IMSI-unauthenticated indicator (if available) and IMEI(SV) are
retrieved from the UE. The MSISDN (if available) is provided by the HSS.
3\. MME sends a [S11] [S5] Create Session Request towards the PGW including
the IMSI, the IMSI-unauthenticated indicator (if available), the IMEI(SV) and
the MSISDN (if available).
4\. PGW establishes an IP-CAN session with the PCRF as described in TS 23.401
[7] and TS 23.203 [11]. The IP-CAN session is identified with UE\'s IPv4
address of IPv6 prefix associated with the PDN connection for IMS emergency
services. The IMSI, the IMSI-unauthenticated indicator (if available), the
IMEI(SV) and the MSISDN (if available) are passed to the PCRF as part of the
IP-CAN session establishment.
5\. UE completes the Attach or UE requested PDN connection procedure.
Up to here the procedure is identical with the existing PS domain emergency
PDN and Attach handling, except that the IMSI-unauthenticated indicator is not
available on Gx. Also the PCC may need some clarification in specifications as
it seems that the sending of MSISDN over Gx is not mandatory.
Steps 6-12 apply in case the UE performs IMS Emergency Registration, based on
conditions specified in TS 23.167 [9], e.g. UE is aware that it has sufficient
IMS authentication material.
6\. UE initiates IMS emergency registration by sending a SIP REGISTER
(UserID-1) message. The UserID-1 parameter is an IMPI and optionally an IMPU.
7a. Upon reception of the SIP REGISTER message the P-CSCF contacts the PCRF
for establishment of an Rx session. Based on configuration (e.g. only when
serving emergency calls from S8HR inbound roamers that have no NNI for
emergency registration, which is determined by analysing the UserID-1
parameter in the SIP REGISTER message) the P-CSCF decides to accept the SIP
REGISTER message without attempting to authenticate the UE with HPLMN IMS. The
P-CSCF includes an explicit request for EPS-level identities (e.g. IMSI,
IMEI(SV), MSISDN) in the Rx request.
7b. The PCRF is able to perform session binding based on the UE\'s IP
address/prefix (see TS 23.203 [11] clause 6.1.1.2) and provides the
information that it has received upon IP-CAN session establishment in step 4.
I.e. as part of the Rx session establishment the one or more EPS-level
identities and the MSISDN (if available) are returned to the P-CSCF.
NOTE 1: A UE equipped with a UICC without any IMS credentials (but with valid
PS credentials), initiates emergency IMS registration deriving IMS parameters
from USIM (refer to TS 24.229 [10] clause C.2).
8\. Based on operator configuration and if the network supports the GIBA
procedure over Gm as defined in TS 24.229 [10], the P-CSCF responds with a 420
response with sec-agree value listed in the unsupported header field.
Otherwise it rejects the IMS registration request with SIP 403 (Forbidden) as
defined in TS 24.229 [10]. If the network supports anonymous IMS emergency
sessions, P-CSCF adds an indication whether it supports anonymous IMS
emergency sessions to the 403 or 420 response.
Steps 9-12 apply in case the P-CSCF has responded with a 420 response in step
8 and if the UE supports fallback to GIBA as part of emergency IMS
registration. A requirement for Steps 9-12 to be supported is: All PGWs
supporting emergency PDN connection for inbound roamers with S8HR roaming
agreement shall implement measures to prevent source IP address spoofing as
specified in clause T.6 of TS 33.203 [12]:
Specifically, a UE attached to the PGW shall not be able to successfully
transmit an IP packet with a source IP address (or the prefix in the case of
IPv6 stateless autoconfiguration) that is different to the one assigned by the
PGW during PDN Connectivity Setup. If IP address spoofing is detected the PGW
shall drop the packet. It shall be possible for the PGW to log the event in
its security log against the subscriber information (IMSI/MSISDN), e.g. based
on operator configuration.
9\. UE according to TS 24.229 [10], performs a new initial registration by
sending a SIP REGISTER (UserID-2, IMEI) message and without inclusion of the
Authorization header field. UserID-2 is an IMPI derived from IMSI. P-CSCF may
verify the IMSI/IMEI provided by the PCRF in step 7b against the IMSI/IMEI
derived from the IMPI provided by the UE, prior to accepting the SIP REGISTER
message.
The UE and the network must support GIBA to be able to perform the next step.
10\. P-CSCF accepts the registration with 200 OK and provides a tel-URI based
on the MSISDN (if available) received from PCRF in step 7b to the UE in
P-associated-URI header. From the UE point of view, the procedure is the same
as specified for GIBA (GPRS-IMS bundled authentication) procedures in TS
24.229 [10].
11\. UE then attempts an IMS emergency session by sending a SIP INVITE
(UserID-3) message. UserID-3 is set to UE\'s public identity (i.e. MSISDN as
Tel-URI received in step 10).
12\. The P-CSCF verifies whether the UserID-3 indicated in the SIP INVITE
message complies with the tel-URI that was provided to the UE. If compliant,
P-CSCF forwards the SIP INVITE towards the PSAP including a callback parameter
(CallBackPar) in the form of TEL-URI derived from the MSISDN received in step
7. The procedure stops here.
If the network has indicated that it supports anonymous IMS emergency sessions
in either the 403 or 420 response in step 8 and if the UE is able to interpret
the indication it shall attempt an anonymous IMS emergency session (steps
13-15 in Figure 6.5.1.2-1). If the UE cannot interpret the indication, the UE
may attempt an anonymous IMS emergency sessions as specified in existing
specifications.
NOTE 2: In reference to TS 23.167 [9] clause H.5, the anonymous IMS emergency
session occurs between the \"First EMC Attempt\" (if it is performed in the PS
domain) and the \"Second EMC Attempt\". If the anonymous IMS emergency session
fails, the UE proceeds with the \"Second EMC Attempt\" as indicated in TS
23.167 [9] clause H.5.
13\. Subsequent to the IMS registration failure the UE may attempt an
unauthenticated IMS emergency session including an \"anonymous user\"
parameter in the SIP INVITE message.
14\. Upon reception of the SIP INVITE the P-CSCF either internally retrieves
the one or more EPS-level identities and the MSISDN (if available) that were
received in step 7b, or performs step 7 again.
NOTE 3: Netloc procedure can be triggered at this point. It shall be possible
for stage 3 to combine the Netloc procedure with the procedure for retrieving
the identities in step 14 altogether.
15\. The P-CSCF forwards the SIP INVITE (UserID-4, CallBackPar) towards the
PSAP. UserID-4 is derived from one of the EPS-level identities received in
step 7b. CallBackPar in the form of TEL-URI is derived from the MSISDN
received in step 7b. The procedure stops here.
When the IMS registration fails, if the UE does not attempt an anonymous IMS
emergency session, or if the anonymous IMS emergency session fails, the UE
attempts an emergency call in the CS domain as specified in TS 23.167 [9]
clause 4.1 (step 16 in Figure 6.5.1.2-1).
16\. Subsequent to the IMS registration failure in step 8 or subsequent to an
anonymous SIP INVITE attempt the UE may attempt an emergency call in the CS
domain.
### 6.5.2 Impacts on existing nodes and functionality
The impacted 3GPP nodes are the following:
P-CSCF:
\- If the same P-CSCF handles emergency calls for both LBO and S8HR roaming
architecture, the P-CSCF needs to be configured to know with which VPLMNs S8HR
roaming agreement is used.
\- P-CSCF needs to retrieve the IMSI/IMSI-unauthenticated indicator (if
available)/IMEI and the MSISDN (if available) for an inbound roamer from the
PCRF.
\- For supporting Steps 9-12, P-CSCF accepts the SIP REGISTER message without
authenticating the user. with the HPLMN IMS, i.e. the P-CSCF needs to support
the GIBA procedure over Gm as defined in TS 24.229 [10].
\- The P-CSCF may include an indication whether emergency IMS sessions are
supported in the 403 or 420 response.
\- The P-CSCF may verify IMSI/IMEI in SIP register against the IMSI/IMEI
provided by the PCRF.
PCRF:
\- PCRF needs to provide IMSI/IMSI-unauthenticated/IMEI over Rx to the P-CSCF.
\- PCRF needs to receive the IMSI-unauthenticated indicator (if available)
over Gx.
PGW:
\- For supporting Steps 9-12, all PGWs supporting emergency PDN connection for
inbound roamers with S8HR roaming agreement shall implement measures to
prevent source IP address spoofing as specified in clause T.6 of TS 33.203
[12].
UE:
\- To enable deterministic behaviour from UE to perform anonymous emergency
call under the control of the serving network, UEs are required to interpret
the indication whether anonymous IMS emergency sessions are supported in the
serving network.
\- Steps enclosed in block A in Figure 6.5.1.2-1 are possible only for UEs
supporting the GIBA procedure defined in TS 24.229 [10] as part of the
emergency IMS registration procedure.
HSS:
\- The EPS user profile needs to contain exactly one MSISDN, which needs to be
the same as in the IMS profile, in order to obtain the same result as current
IMS Emergency sessions procedures.
### 6.5.3 Solution Evaluation
This solution applies when the user is allocated exactly one MSISDN for voice
service. Other forms of Public User Identities cannot be used.
## 6.6 Solution #6: P-CSCF subscription to PLMN ID in changes at IMS
registration
### 6.6.1 Description
The P-CSCF will subscribe to retrieve the PLMN ID changes from PCRF when it
receives the SIP Registration message. After getting the VPLMN ID, the P-CSCF
can include the P-Access-Network-Info and P-Visited-Network-ID header in the
SIP Register and forward.
When the UE attaches to the PLMN, the P-GW knows the PLMN ID information. And
when the UE changes the PLMN, the P-GW also knows the new PLMN ID because of
the S-GW is changed.
Figure 6.6.1-1: P-CSCF subscribing to PLMN-ID changes
1\. The UE sends Register message to P-CSCF.
2\. At initial IMS registration, the P-CSCF subscribes to PLMN-ID change to
the H-PCRF.
3\. If the H-PCRF is subscribed to PLMN changes in the P-GW (PCEF), the PCRF
provides the PLMN-ID to the P-CSCF, the P-CSCF stores the PLMN-ID and then
step 7 applies.
4\. If the H-PCRF is not subscribed to PLMN change in the P-GW (PCEF), the
PCRF subscribes to the P-GW (PCEF).
5\. The P-GW (PCEF) provides the PLMN-ID (MCC+MNC) and stores the event
trigger to notify if PLMN id changes any changes.
6\. The H-PCRF provides the PLMN id to the P-CSCF and stores the event trigger
to notify if PLMN ID changes. The P-CSCF stores the PLMN-ID.
7\. The P-CSCF shall add the PLMN-ID to Register message and forwards to
I/S-CSCF.
8\. The P-CSCF sends an acknowledgement to PCRF.
> The PCRF will be notified of PLMN changes from the PCEF after IMS
> registration. In order for the P-CSCF to have the correct PLMN-ID at session
> setup, the PCRF provides the PLMN-ID to the P-CSCF when it changes. The
> P-CSCF stores the PLMN-ID.
Figure 6.6.1-2: P-CSCF inserts PLMN-ID at session setup.
1\. The UE sends Invite message to P-CSCF.
2\. The P-CSCF shall insert the stored PLMN-ID in SIP Invite.
3\. The P-CSCF forwards to I/S-CSCF.
In order to avoid wasting resources by remaining subscribed to PLMN changes
forever, the PCRF may unsubscribe to PLMN changes from the PCEF, if not needed
any longer. In order to know when to do this, the H-PCRF needs to be informed
by the P-CSCF when the UE is de-registered, as illustrated below.
Figure 6.6.1-3: P-CSCF informing the H-PCRF that PLMN-ID is no longer needed
(unsubscribe to PLMN changes)
1\. The UE is de-registered from the IMS.
2\. The P-CSCF notifies the H-PCRF that it no longer needs the PLMN-ID for
this user.
3\. The H-PCRF acknowledges.
4\. The H-PCRF unsubscribes to PLMN change in the P-GW (PCEF).
5\. The P-GW acknowledges.
### 6.6.2 Impacts on existing nodes and functionality
P-CSCF subscribes to PLMN-ID changes when it receives SIP Register message via
a new PCC procedure.
P-CSCF unsubscribes to PLMN-ID changes when the user is de-registered from the
IMS, via a new PCC procedure.
P-CSCF stores the PLMN-ID.
The PCRF provides the PLMN-id to the P-CSCF at each IMS registration and when
the PLMN-ID changes, for both roaming and non-roaming users, which causes
additional load on the PCRF.
### 6.6.3 Solution Evaluation
The advantage of this alternative is that the P-CSCF obtains the VPLMN id
without any signalling in the core network, no impacts on Gx or S8 interfaces.
However, the PCRF needs to be requested to provide the PLMN-ID, for both
roaming and non-roaming users.
## 6.7 Solution #7: P-CSCF query PLMN ID in IMS registration and session
establishment
### 6.7.1 Description
In this solution, it assumes that the ECGI will not be provided in S8HR
according to roaming agreement. And NetLoc has been deployed in the HPLMN.
According to the TS 23.203 [11], the PLMN ID is provided to PCRF while the
ECGI is not available.
Similar with the NetLoc in TS 23.228 [8] Annex R, the P-CSCF will retrieve the
location information when it receives the SIP Registration message. After
getting the VPLMN ID, the P-CSCF can include the P-Access-Network-Info and
P-Visited-Network-ID header in the SIP Register and forward.
Figure 6.7.1-1: P-CSCF obtaining VPLMN-ID in IMS Registration
1\. The UE sends Register message to P-CSCF.
2\. The P-CSCF subscribes the access network information according to TS
23.228 [8] Annex R. The PCRF will generate the PCC rule for e.g. QCI =5 bearer
to request the access network information are installed in the PCEF. The
P-CSCF reveives the PLMN-ID (The assumption is that the ECGI will not be
provided in S8HR according to roaming agreement).
3\. The P-CSCF adds the PLMN-ID to Register message and forwards to I/S-CSCF.
For the IMS session establishment, the NetLoc procedure initiated by P-CSCF in
TS 23.228 [8] Annex R can retrieve the PLMN-ID.
When the default bearer / dedicated bearer for IMS signalling is terminated,
the P-CSCF shall ignore the received location information.
### 6.7.2 Impacts on existing nodes and functionality
P-CSCF retrieves the visited PLMN ID when it receives SIP Register message via
PCC procedure.
PCRF: The PCRF needs to be updated to provide the requested information.
Editor\'s note: The ECGI is not provided to HPLMN for S8HR. It is FFS how to
achieve this.
### 6.7.3 Solution Evaluation
The advantage of this alternative is that it re-uses the existing mechanism.
## 6.8 Solution #8: Local number translation on AS
### 6.8.1 Description
This solution addresses key issue 4 (Local Number Translation and Routing) and
fulfils the translation requirements described in clause 5.4.
The translation of geo-local number is based on caller\'s geographical
location information, which includes:
\- Country code: the code indicating the country where the call is initiated;
\- Geographical area code: the code indicating the area within the country,
e.g. province code in China, where the call is initiated.
NOTE 1: Area code may be not needed in some countries for local number
translation.
The country code can be derived from PLMN ID of the visited network, while
geographical area code needs to be mapped from the access location information
of the initiating UE, i.e. ECGI or TAI.
The HPLMN, i.e. P-CSCF, obtains PLMN ID and access location information from
the visited network via Netloc procedure.
The AS follows the existing translation and session routing procedures as
specified in current TS 23.228 [8] and TS 24.229 [10] with the following
enhancement:
\- The AS derives country code from PLMN ID of visited network;
\- The AS maps the access location information to area code by local
configuration.
NOTE 2: Access location information retrieval and the mapping information
configured in AS depends on the roaming agreement between HPLMN and VPLMN. If
it is not allowed, the HPLMN may translate the geo-local number as a home
local number.
If the local number is a home local number, there is no information from
visited network needed for the translation. The AS should do the translation
based on local configurations of HPLMN.
Figure 6.8.1-1: flow of local number translation on AS
### 6.8.2 Impacts on existing nodes and functionality
This solution has the following impact on the AS functionality:
\- The AS is configured to map access location information into geographical
area code of the VPLMN; the configuration is per PLMN;
\- The AS is able to derive the country code from PLMN ID of visited network.
The visited network needs to send access location information more than PLMN
ID to the home network.
### 6.8.3 Solution Evaluation
This solution fulfils the translation requirements described in clause 5.4
with minimal impacts only on AS implementations. No extension on message flow
or SIP signalling is required.
The roaming agreement between HPLMN and VPLMN may have the impact on the
result of translation. It may not be able to keep the same user experience
when roaming to different operators.
## 6.9 Solution #9: AS retrieving user\'s Geographical Identifier from HSS in
S8HR roaming architecture
### 6.9.1 Description
6.9.1.1 General description of the solution
This solution addresses key issue 4 (\"Local Number Translation and
Routing\").
Geographical Identifier is defined in clause E.8 in TS 23.228 [8].
MME needs to be configured with Geographical Identifier.
NOTE: In deployment, if one MME serves more than one Geographical Identifier,
MME needs to maintain a mapping table between ECGI list and Geographical
Identifier. When receiving the updated ECGI, MME finds out the updated
Geographical Identifier by looking up the updated ECGI in the mapping table.
When AS receives SIP Invite, it will send a request message to HSS indicating
the need for user\'s Geographical Identifier information. Then HSS needs to
further request such information from MME. Then MME will answer to the HHS\'s
request by including the user\'s Geographical Identifier.
#### 6.9.1.2 Procedures to enable the solution
Figure 6.9.1.2-1: AS retrieving Geographical Identifier from HSS
1\. AS in HPLMN receives a SIP Invite message with including the callee\'s
local number.
2\. AS sends a User Data Request message to HSS in the HPLMN including an
indication of Geographical Identifier required.
3\. As HSS has no such information, it will further send a request message to
MME including an indication of Geographical Identifier required.
4\. MME finds out the user\'s Geographical Identifier and answers to HSS by
including it.
5\. HSS further answers to AS by including the user\'s Geographical
Identifier, then AS uses such information to do local number translation and
routing and further sends SIP Invite message to the downstream IMS entities or
interconnected network.
### 6.9.2 Impacts on existing nodes and functionality
MME:
\- It needs to answer to HSS with the user\'s Geographical Identifier
information when requested.
\- MME needs to maintain a mapping table between ECGI list and Geographical
Identifier unless it only serves one Geographical Identifier.
NOTE: The mapping functionality is moved from IMS domain to EPS domain.
HSS:
\- It needs to request the user\'s Geographical Identifier from MME and
answers to AS by including it.
AS:
\- It needs to request the user\'s Geographical Identifier from HSS.
### 6.9.3 Solution Evaluation
## 6.10 Solution #10: P-CSCF retrieving user\'s Geographical Identifier from
EPC in S8HR roaming architecture
### 6.10.1 Description
#### 6.10.1.1 General description of the solution
This solution addresses key issue 4 (\"Local Number Translation and
Routing\").
Geographical Identifier is defined in clause E.8 in TS 23.228 [8].
MME needs to be configured with the Geographical Identifier.
NOTE: In deployment, if one MME serves more than one Geographical Identifier,
MME needs to maintain a mapping table between ECGI list and Geographical
Identifier. When receiving the updated ECGI, MME finds out the updated
Geographical Identifier by looking up the updated ECGI in the mapping table.
MME needs to maintain a mapping table between ECGI list and Geographical
Identifier.
In attach (clause 5.3.2 of TS 23.401 [7]) or UE requested PDN connectivity
(clause 5.10.2 of TS 23.401 [7]) procedure, based on the information of the
ECGI, MME knows the according Geographical Identifier by looking up the
mapping table and sends the Geographical Identifier to SGW in Create Session
Request message, then SGW forwards such information to PGW, and then PGW sends
to PCRF in the IP-CAN session establishment procedure.
In order to enable the location change reporting for the Geographical
Identifier, a new event trigger for reporting the change of Geographical
Identifier needs to be provisioned from PCRF to MME during IP-CAN Session
Establishment or Modification procedure (e.g., Attach, UE requested PDN
connectivity, S1-based handover, UE triggered Service Request procedure, EPS
bearer modification, etc.).
User\'s Geographical Identifier will be part of UE\'s MM Context, once MME
realizes the Geographical Identifier is changed for this UE, it will report
the updated Geographical Identifier by using the existing location change
reporting procedure (clause 5.9.2 of TS 23.401 [7]).
When P-CSCF in the HPLMN receives the SIP Invite message during IMS session
setup procedure, it will send a request message to PCRF in the HPLMN to
retrieve the Geographical Identifier. Then the P-CSCF will insert the
Geographical Identifier in the SIP signalling, thus enabling routing decision
in downstream IMS entities or interconnected network.
The procedures used to enable this solutions are illustrated in following
clauses.
#### 6.10.1.2 Procedures to enable the solution
##### 6.10.1.2.1 Reporting Geographical Identifier in the attach procedure
Figure 6.10.1.2.1-1: Reporting Geographical Identifier in the attach procedure
1\. Same with step1 to 11 in clause 5.3.2.1 of TS 23.401 [7].
2\. According to the UE\'s serving ECGI information known from eNB in step 1,
MME finds out the Geographical Identifier from its mapping table. In the
Create Session Request message, MME sends the Geographical Identifier to SGW.
3\. SGW forwards the Geographical Identifier to PGW in the Create Session
Request message.
4\. PGW sends the Geographical Identifier to PCRF in the Indication of IP-CAN
Session Establishment message.
5\. PCRF acknowledges with an Acknowledge of IP-CAN Session Establishment
message including a new event trigger (Location change (Geographical
Identifier)).
6\. PGW responds to SGW with a Create Session Response message including a new
event trigger (Location change (Geographical Identifier)).
7\. SGW responds to MME with a Create Session Response message including a new
event trigger (Location change (Geographical Identifier)).
8\. Same with step 17 to 26 in clause 5.3.2.1 of TS 23.401 [7].
##### 6.10.1.2.2 Reporting Geographical Identifier in the UE requested PDN
connectivity procedure
Figure 6.10.1.2.2-1: Reporting Geographical Identifier in the UE requested PDN
connectivity procedure
1\. UE sends a PDN Connectivity Request message to MME in order to establish a
secondary PDN connection.
2\. According to the UE\'s serving ECGI information, MME finds out the
Geographical Identifier from its mapping table. In the Create Session Request
message, MME sends the Geographical Identifier to SGW.
3\. SGW further sends the Geographical Identifier to PGW in the Create Session
Request message.
4\. PGW further sends the Geographical Identifier to PCRF in the Indication of
IP-CAN Session Establishment message.
5\. PCRF acknowledges with an Acknowledge of IP-CAN Session Establishment
message including a new event trigger (Location change (Geographical
Identifier)).
6\. PGW responds to SGW with a Create Session Response message including a new
event trigger (Location change (Geographical Identifier)).
7\. SGW responds to MME with a Create Session Response message including a new
event trigger (Location change (Geographical Identifier)).
8\. Same with step 7 to 16 in clause 5.10.2 of TS 23.401 [7].
##### 6.10.1.2.3 Reporting Geographical Identifier in the Location Change
Reporting procedure
Figure 6.10.1.2.3-1: Reporting Geographical Identifier in the Location Change
Reporting procedure
1a. MME has received an ECGI information Update from eNB.
1b. MME finds out the updated Geographical Identifier by looking up the
updated ECGI in the mapping table, detects the user\'s Geographical Identifier
is changed by comparing with the MME stored user\'s old Geographical
Identifier.
2\. If the MME has been requested to report location changes to the PGW for
the UE (under the conditions specified in clause 5.9.2 in TS 23.401 [7]), the
MME shall send the Change Notification message to the SGW indicating the new
Geographical Identifier. The MME stores the notified user Geographical
Identifier.
3\. The SGW forwards the Change Notification message to the PGW with including
the user\'s Geographical Identifier.
4\. The PGW sends the Geographical Identifier to PCRF in the Indication of IP-
CAN Session Modification message.
5\. PCRF stores the Geographical Identifier and responds with an Acknowledge
of IP-Can Session Modification message.
6\. PGW responds to SGW with a Change Notification Ack message.
7\. SGW responds to MME with a Change Notification Ack message.
##### 6.10.1.2.2 P-CSCF retrieving Geo Identifier from PCRF during MO session
setup
Figure 6.10.1.2.2-1: P-CSCF retrieving Geo Identifier from PCRF during MO
session setup
1\. UE sends SIP Invite to P-CSCF in HPLMN with including the callee\'s local
number.
2\. P-CSCF sends AA-Request message to PCRF in the HPLMN including an
indication of Geographical Identifier required.
3\. PCRF answers P-CSCF with AA-Answer with including the Geographical
Identifier.
4\. P-CSCF inserts the received Geographical Identifier in the SIP signalling,
thus enabling routing decision in downstream IMS entities (i.e. AS) or
interconnected network.
### 6.10.2 Impacts on existing nodes and functionality
MME:
\- It needs to be configured with Geographical Identifier.
\- MME needs to maintain a mapping table between ECGI list and Geographical
Identifier unless it only serves one Geographical Identifier.
NOTE: The mapping functionality is moved from IMS domain to EPS domain.
\- In attach or UE requested PDN connectivity procedure, MME sends the
Geographical Identifier to SGW in the Create Session Request message.
\- It needs to store and enforce a new event trigger (Location Change
(Geographical Identifier)), detect the Geographical Identifier change and
report the change of Geographical Identifier by using the existing location
change reporting procedure defined in clause 5.9.2 of TS 23.401 [7].
SGW:
\- It needs to receive the Geographical Identifier information from MME and
forward to PGW.
PGW:
\- It needs to receive the Geographical Identifier information from SGW and
send to PCRF.
\- It needs to receive the new event trigger (Location Change (Geographical
Identifier)).
PCRF:
\- It needs to receive the Geographical Identifier information from PGW and
send to P-CSCF when P-CSCF requests during IMS session setup procedure,
subscribe to the new event trigger (Location Change (Geographical Identifier))
by provisioning it to MME.
P-CSCF:
\- It needs to request the Geographical Identifier information from PCRF.
### 6.10.3 Solution Evaluation
## 6.11 Solution #11: Extended NetLoc procedure for Geographical Information
### 6.11.1 Description
In this solution, it enhances the existing NetLoc procedure. The extension is
that Geographical Information indication is included in the request. And the
Geographical Information is returned in the response.
How the MME knows the Geographical Information is implementation, e.g.
configured with mapping between TAI/ECGI and Geographical Information.
Figure 6.11-1: Extended NetLoc procedure for Geographical Information
0\. The P-CSCF receives the session initiation from the UE.
1-4. The Geo-info indication is included in the Netloc procedure signalling.
5-8. The Geo-info is carried in the response.
### 6.11.2 Impacts on existing nodes and functionality
MME is required to creating the Geographical Information according to UE
location.
P-CSCF includes the Geo-info indication when it retrieves the NPLI. The PCRF,
P-GW, S-GW and MME require supporting the extended signalling.
### 6.11.3 Solution Evaluation
Geographical Information is required to be defined.
The session establishment is delayed because the P-CSCF needs to wait the
Netloc response.
## 6.12 Solution #12: Local Number translation and routing with P-CSCF
retrieving user\'s TAI from EPC in NetLoc procedure
### 6.12.1 Description
This solution addresses key issue 4 (\"Local Number Translation and
Routing\").
Current MME has already been designed to maintain the mapping table between
ECGI list and TAI
P-CSCF in the HPLMN needs to maintain a mapping table between TAI and
Geographical Identifier for each VPLMN which has business agreement with the
HPLMN.
When P-CSCF in the HPLMN receives the SIP Invite message at IMS session
establishment, it will retrieve TAI from EPC by using NetLoc procedure. Then
the P-CSCF will look up the mapping table between TAI and Geographical
Identifier for the VPLMN where UE is located in and insert the Geographical
Identifier in the SIP signalling, thus enabling routing decision in downstream
IMS entities (e.g. AS) or interconnected network.
NOTE: HPLMN doesn\'t have to configure the mapping table between TAI and
Geographical Identifier in all P-CSCFs, it can designate several P-CSCF to
maintain the mapping table for S8HR case.
AS will derive the country code from VPLMN ID retrieved during IMS
registration procedure or from MCC part of TAI and area code from Geographical
Identifier received from P-CSCF. Then it will append them in front of the
local short number of callee to do local number translation and enable the
number to be international routable.
### 6.12.2 Impacts on existing nodes and functionality
P-CSCF:
\- It needs to maintain the mapping table between TAI and Geographical
Identifier for each VPLMN which has business agreement with the HPLMN.
AS:
\- It needs to derive the country code from VPLMN ID or MCC.
### 6.12.3 Solution Evaluation
The solution requires P-CSCF to maintain the mapping table between TAI and
Geographical Identifier for each VPLMN which has business agreement with the
HPLMN.
The solution introduces delay as P-CSCF needs to postpone the SIP INVITE while
UE location is retrieved.
The solution is similar to solution #8 in that both the mapping of TAI to
Geographical Identifier and number translation is done in the HPLMN. Doing
mapping and translation in two different nodes is motivated by some existing
deployments.
# 7 Overall Evaluation
## 7.1 Key Issue 1: How to make UE detected IMS emergency session successful
Key Issue #1 consists of two sub-key issues:
\- Key-issue 1a: How to handle UE\'s IMS emergency registration.
\- Key-issue 1b: How to support PSAP callback.
Solution #5 (clause 6.5) addresses both key issues 1a and 1b, with the
following notes:
\- Impact on the network: PCRF and P-CSCF are the main impacted nodes. The
impacts on these two nodes are summarised in clause 6.5.2. In particular, the
P-CSCF needs to support the GIBA procedure over Gm as specified in TS 24.229
[10] (note that network-internal procedures at the P-CSCF differ from GIBA, as
described in clause 6.5.1). Pending SA3 analysis, PGW may need to support
\"source IP spoofing\" prevention.
\- Impact on UE: there is no specification impact on the UE.
\- A UE supporting the \"GIBA procedure\" described in TS 24.229 [10] clause
5.1.1.2.6 as part of the emergency IMS registration will benefit from
avoidance of IMS registration failure.
\- A UE that does not support the \"GIBA procedure\" may attempt an anonymous
SIP INVITE or an emergency call in the CS domain or try to reach another PLMN.
\- If the UE of the inbound roamer is configured to not attempt anonymous SIP
INVITE after emergency IMS registration failure and if the roamed-to PLMN has
no CS domain, the UE will be unable to perform an emergency call in this PLMN.
\- If the UE does not support the \"GIBA procedure\" and if it is configured
to not attempt an anonymous SIP INVITE, there will be no successful IMS
emergency session on PS domain. , i.e. Key Issue #1 is not solved, emergency
call will fail if the roamed-to PLMN has no CS domain. The UE can still
attempt to perform an emergency call on another PLMN.
## 7.2 Key Issue 2: Handling of non UE detectable Emergency Session
Solution #1 is based on the assumption that the VPLMN ID is provided to the
P-CSCF at time of IMS registration.
The Solution proposes to query a database in order to compare the dialled
number with the possible emergency numbers in the visited country. This can
also be accomplished by configuring those possible emergency numbers in the
P-CSCF via O&M. The database may be:
a) a local database for each PLMN with the emergency numbers of all the
roaming partners - but such approach is not scalable for large number of
roaming partners and for roaming partners that change emergency numbers often.
b) a global database maintained e.g. by GSMA
c) each VPLMN maintains a database with the local emergency numbers only which
is accessible to all the roaming partners e.g. using DNS.
This solution relies on always rejecting non UE detectable emergency sessions
with a 380 response (which may cause additional delay), whereas the current
procedures in TS 23.167 [9] offer the possibility, based on operator policy,
to allow the session initiation request to continue when the P-CSCF detects
that a request is to establish an emergency session when this was not UE-
detectable, even for a roaming UE.
## 7.3 Key Issue 3: Determination of the ID of the visited PLMN at IMS
Entities in HPLMN
Assumption made for this evaluation:
\- Serving PLMN ID retrieval is NOT done at IMS re-registration
\- Serving PLMN changes are noticed at the IMS level only when UE performs IMS
registration as a result of IP address changes.
The following solutions have been captured in the TR for this key issue:
\- Solution #3 Determination of PLMN ID via HSS interaction:
HSS performs roaming restriction check based on PLMN-ID from access network.
HSS provides PLMN-ID to S-CSCF in Cx interface at IMS registration. PLMN-ID
added to SIP message from S-CSCF to P-CSCF.
\- Solution #6 P-CSCF query PLMN ID in IMS registration:
P-CSCF retrieves PLMN-ID on Rx interface. The PCRF subscribes to PLMN change
in access network. PCRF provides PLMN-ID on Rx to P-CSCF.
\- Solution #7 P-CSCF query PLMN ID in IMS registration and session
establishment:
P-CSCF uses Netloc and subscribes to access-network information on Rx. Netloc
supported in VPLMN and detailed location (eg. ECGI) provided to PCRF via PGW.
PCRF provides PLMN-ID to P-CSCF.
The following table captures the key evaluation criteria and evaluations of
these three solutions.
Table 7.3-1 Evaluation Criteria Table for Key Issue #3
+----------------+----------------+----------------+----------------+ | Evaluation | Solution #3 | Solution #6 | Solution #7 | | Criteria | (HSS based) | (New Rx query | (ULI based | | | | for PLMN-ID | reporting) | | | | change) | | +----------------+----------------+----------------+----------------+ | Impact on | HSS: (i) On Cx | PCRF, P-CSCF: | None (Standard | | Nodes and | interaction | Needs to | Netloc | | Interfaces | with I-CSCF | support new Rx | functionality) | | | needs to | procedure. | | | | differentiate | | VPLMN needs to | | | between S8HR | Rx: New | support ULI | | | and LBO. | procedure to | reporting | | | | request for | (i.e. comply | | | (ii) Needs | PLMN-ID | to Rel-11) | | | to provide | retrieval. | | | | VPLMN-ID to | | | | | S-CSCF on IMS | | | | | registration. | | | | | | | | | | S-CSCF: Needs | | | | | to forward | | | | | VPLMN-Id to | | | | | I-CSCF and | | | | | then onto the | | | | | P-CSCF | | | | | | | | | | P-CSCF: Needs | | | | | to process | | | | | VPLMN-ID from | | | | | SIP message. | | | | | | | | | | Cx and SIP | | | | | protocol | | | +----------------+----------------+----------------+----------------+ | Amount of | None. | P-CSCF | P-CSCF | | additional | | requests for | requests for | | signalling | (VPLMN ID is | serving PLMN | serving PLMN | | | carried via | ID at initial | at every IMS | | | existing SIP | IMS | registration, | | | signalling | registration | and hence | | | interaction) | for both | doubling the | | | | roaming and | Rx interaction | | | | non-roaming | at | | | | UEs served by | registration | | | | the P-CSCF, | with PCRF. | | | | which may | | | | | increase the | ULI | | | | Rx signalling | information | | | | traffic. | sent on IMS | | | | | bearer | | | | (For example; | establishment, | | | | when IP CAN | modification, | | | | type retrieval | deletion. | | | | is needed, Rx | | | | | signalling | | | | | traffic is not | | | | | increased). | | +----------------+----------------+----------------+----------------+ | Support for | Since PLMN-ID | Supported. | Supported | | Lawful | is not | | | | Interception | available when | | | | | SIP Register | | | | | Request | | | | | arrives at the | | | | | P-CSCF but | | | | | only when SIP | | | | | response | | | | | message from | | | | | S-CSCF is | | | | | received at | | | | | the P-CSCF, | | | | | the decision | | | | | for LI is | | | | | delayed till | | | | | receipt of SIP | | | | | response | | | | | message from | | | | | S-CSCF. The | | | | | SIP Register | | | | | message will | | | | | need to be | | | | | buffered at | | | | | the P-CSCF | | | | | till this | | | | | point. | | | +----------------+----------------+----------------+----------------+ | Limitations of | The solution | None | None | | the Solution | cannot work if | | | | | the UE access | | | | | EPS | | | | | simultaneously | | | | | via more than | | | | | one access | | | | | network which | | | | | use different | | | | | PLMN-IDs | | | +----------------+----------------+----------------+----------------+
## 7.4 Key Issue 4: Local Number Translation and Routing
There are 6 alternative solutions for key issue 4:
\- Solution #2 in clause 6.2: Using the PANI from the UE, this solution
performs as in the LBO case where AS can translate the local number to a
globally routable format if a mapping table is available.
\- Solution #8 in clause 6.8: The P-CSCF retrieves user location information
via existing Netloc procedure. The AS maps user location information (e.g.
TAI) to Geographical Identifier based on an internal mapping table and
translates local number accordingly.
\- Solution #12 in clause 6.12: The P-CSCF retrieves user location information
via existing Netloc procedure and maps user location information to
Geographical Identifier based on an internal mapping table. The AS translates
local number based on the Geographical Identifier received from P-CSCF.
\- Solution #9 in clause 6.9: The AS translates local number based on
Geographical Identifier retrieved via a query procedure to HSS and MME.
\- Solution #10 in clause 6.10: The P-CSCF retrieves Geographical Identifier
from PCRF which is reported by MME during attach procedure, UE requested PDN
establishment procedure or location change procedure. The AS translates local
number based on Geographical Identifier.
\- Solution#11 in clause 6.1: The Netlc procedure is extended to allow P-CSCF
to retrieve Geographical information from PCRF during the call setup. The AS
translates local number based on Geographical Identifier.
The following table provides the evaluation criteria and the evaluation on the
alternative solutions for key issue 4.
Table 7.4.2-1: Evaluation of Solutions for Key Issue #4
+---------+---------+---------+---------+---------+---------+---------+ | C | S | S | S | S | S | S | | riteria | olution | olution | olution | olution | olution | olution | | | #2 | #8 | #12 | #9 | #10 | #11 | | | (PANI | ( | | | (MME | (E | | | from | Netloc, | (P-CSCF | (GI | p | xtended | | | UE) | TAI/SAI | map to | query | rovides | NetLoc) | | | | to AS) | GI) | to HSS) | GI) | | +---------+---------+---------+---------+---------+---------+---------+ | P-CSCF | None. | None. | - | None. | - The | - The | | Fun | | | P-CSCF | | P-CSCF | P-CSCF | | ctional | | | shall | | shall | shall | | impacts | | | supoort | | support | support | | | | | pr | | geogr | geogr | | | | | econfig | | aphical | aphical | | | | | uration | | ide | ide | | | | | of | | ntifier | ntifier | | | | | mapping | | query | query. | | | | | l | | at | | | | | | ocation | | every | - | | | | | infor | | IMS | P-CSCF | | | | | mation, | | Session | shall | | | | | e.g. | | Setup. | pr | | | | | TAI, | | | opagate | | | | | info | | - | geogr | | | | | rmation | | P-CSCF | aphical | | | | | into | | shall | Ide | | | | | geogr | | pr | ntifier | | | | | aphical | | opagate | in SIP | | | | | iden | | geogr | sign | | | | | tifier. | | aphical | alling. | | | | | | | Ide | | | | | | - | | ntifier | | | | | | P-CSCF | | in SIP | | | | | | shall | | sign | | | | | | pr | | alling. | | | | | | opagate | | | | | | | | geogr | | | | | | | | aphical | | | | | | | | Ide | | | | | | | | ntifier | | | | | | | | in SIP | | | | | | | | sign | | | | | | | | alling. | | | | +---------+---------+---------+---------+---------+---------+---------+ | AS | - The | - AS | AS | - AS | - AS | - AS | | Fun | AS | shall | shall | shall | shall | shall | | ctional | shall | support | support | support | support | support | | impacts | do the | pr | number | number | number | number | | | number | econfig | tran | tran | tran | tran | | | tran | uration | slation | slation | slation | slation | | | slation | of | based | based | based | based | | | based | mapping | on | on | on | on | | | on UE | l | VPLMN | VPLMN | VPLMN | VPLMN | | | s | ocation | ID and | ID and | ID and | ID and | | | upplied | infor | geogr | geogr | geogr | geogr | | | P-Acces | mation, | aphical | aphical | aphical | aphical | | | s-Netwo | e.g. | area | iden | iden | iden | | | rk-Info | TAI, | code. | tifier. | tifier. | tifier. | | | rmation | info | | | | | | | which | rmation | | - AS | | | | | i | into | | shall | | | | | ncludes | geogr | | support | | | | | ECGI | aphical | | g | | | | | and | area | | eograph | | | | | MCC/M | code. | | icalide | | | | | NC/TAC. | | | ntifier | | | | | | - AS | | query. | | | | | | shall | | | | | | | | support | | | | | | | | number | | | | | | | | tran | | | | | | | | slation | | | | | | | | based | | | | | | | | on | | | | | | | | VPLMN | | | | | | | | ID and | | | | | | | | geogr | | | | | | | | aphical | | | | | | | | area | | | | | | | | code. | | | | | +---------+---------+---------+---------+---------+---------+---------+ | MME | None. | None. | None. | - MME | MME | MME | | Fun | | | | shall | shall | shall | | ctional | | | | supoort | support | support | | impacts | | | | pr | geogr | geogr | | | | | | econfig | aphical | aphical | | | | | | uration | ide | ide | | | | | | of | ntifier | ntifier | | | | | | mapping | report | query | | | | | | from | and | and | | | | | | ECGI to | query. | re | | | | | | geogr | | sponse. | | | | | | aphical | | | | | | | | iden | | | | | | | | tifier. | | | | | | | | | | | | | | | | - MME | | | | | | | | shall | | | | | | | | support | | | | | | | | geogr | | | | | | | | aphical | | | | | | | | ide | | | | | | | | ntifier | | | | | | | | query. | | | +---------+---------+---------+---------+---------+---------+---------+ | S/P-GW | None. | None. | None. | None. | S/P-GW | S/P-GW | | fun | | | | | shall | shall | | ctional | | | | | support | support | | impacts | | | | | geogr | geogr | | | | | | | aphical | aphical | | | | | | | ide | ide | | | | | | | ntifier | ntifier | | | | | | | report | query | | | | | | | and | and | | | | | | | query. | re | | | | | | | | sponse. | +---------+---------+---------+---------+---------+---------+---------+ | PCRF | None. | None. | None. | None. | PCRF | PCRF | | fun | | | | | shall | shall | | ctional | | | | | support | support | | impacts | | | | | geogr | geogr | | | | | | | aphical | aphical | | | | | | | ide | ide | | | | | | | ntifier | ntifier | | | | | | | report | report | | | | | | | and | and | | | | | | | query. | query. | +---------+---------+---------+---------+---------+---------+---------+ | HSS | None | None. | None. | HSS | HSS | None | | Fun | | | | shall | shall | | | ctional | | | | support | support | | | impacts | | | | geogr | geogr | | | | | | | aphical | aphical | | | | | | | ide | ide | | | | | | | ntifier | ntifier | | | | | | | query | report. | | | | | | | to MME. | | | +---------+---------+---------+---------+---------+---------+---------+ | Int | None | None. | Mw and | S6a and | S8, | Rx, | | erfaces | | | ISC | Sh | S11, | Gx | | i | | | int | int | Mw, Rx, | ,S8,S11 | | mpacted | | | erfaces | erfaces | Gx are | | | | | | are | are | im | | | | | | im | im | pacted. | | | | | | pacted. | pacted. | | | +---------+---------+---------+---------+---------+---------+---------+ | Provi | Only AS | Only AS | - All | - All | - All | - All | | sioning | in the | in the | P-CSCFs | MMEs in | MMEs in | MMEs in | | requ | HPLMN | HPLMN | in the | VPLMN | VPLMN | VPLMN | | irement | need to | need to | HPLMN | need to | need to | need to | | | be | be | need to | be | be | be | | | precon | precon | be | precon | precon | precon | | | figured | figured | precon | figured | figured | figured | | | with | with | figured | with | with | with | | | the | the | with | the | the | the | | | mapping | mapping | the | mapping | mapping | mapping | | | table. | table. | mapping | table. | table. | table. | | | | | table. | | | | | | | | | - The | - The | - The | | | | | - The | changes | changes | changes | | | | | changes | of | of | of | | | | | of | mapping | mapping | mapping | | | | | mapping | table | table | table | | | | | table | need to | need to | need to | | | | | need to | be | be | be | | | | | be | synch | synch | synch | | | | | synch | ronized | ronized | ronized | | | | | ronized | in all | in all | in all | | | | | in all | MMEs. | MMEs. | MMEs. | | | | | P | | | | | | | | -CSCFs. | | | | +---------+---------+---------+---------+---------+---------+---------+ | Adv | No | - | - No | No | No | No | | antages | fun | Minimal | fun | l | l | l | | of | ctional | impacts | ctional | ocation | ocation | ocation | | S | impact | only on | impact | info | info | info | | olution | on | AS | on | rmation | rmation | rmation | | | VPLMN | impleme | VPLMN. | is | is | is | | | and | ntation | | r | r | r | | | HPLMN. | and | | equired | equired | equired | | | | configu | | to | to | to | | | | ration. | | expose | expose | expose | | | | | | to | to | to | | | | - No | | HPLMN. | HPLMN. | HPLMN. | | | | in | | | | | | | | terface | | | | | | | | or | | | | | | | | sig | | | | | | | | nalling | | | | | | | | ext | | | | | | | | ension. | | | | | +---------+---------+---------+---------+---------+---------+---------+ | Limi | None or | - | L | Fun | Fun | Fun | | tations | TBD | L | ocation | ctional | ctional | ctional | | of | | ocation | infor | impacts | impacts | impacts | | S | | infor | mation, | on EPC | on EPC | on EPC | | olution | | mation, | e | in PLMN | and IMS | and IMS | | | | e.g. | .g.TAI, | and IMS | e | e | | | | TAI, of | of | e | ntities | ntities | | | | VPLMN | VPLMN | ntities | in | in | | | | needs | needs | in | HPLMN | HPLMN | | | | to be | to be | HPLMN. | and | and | | | | exposed | exposed | | VPLMN. | VPLMN. | | | | to | to | D | | | | | | HPLMN. | HPLMN. | iameter | M | Netloc | | | | | | sig | ultiple | is | | | | - | Netloc | nalling | sig | re | | | | Netloc | is | ext | nalling | quired. | | | | is | re | ensions | ext | | | | | re | quired. | r | ensions | M | | | | quired. | | equired | over | ultiple | | | | | SIP | | several | sig | | | | | sig | geogr | int | nalling | | | | | nalling | aphical | erfaces | ext | | | | | ext | ide | r | ensions | | | | | entions | ntifier | equired | over | | | | | r | query | | several | | | | | equired | in | geogr | int | | | | | | troduce | aphical | erfaces | | | | | | call | ide | r | | | | | | setup | ntifier | equired | | | | | | delay | query | | | | | | | as MME | in | The MME | | | | | | and HSS | troduce | r | | | | | | are | call | equires | | | | | | located | setup | to | | | | | | in | delay | m | | | | | | di | as MME | aintain | | | | | | fferent | and HSS | mapping | | | | | | co | are | table | | | | | | untries | located | between | | | | | | and | in | E | | | | | | sig | di | CGI/TAI | | | | | | nalling | fferent | and | | | | | | o | co | Geogr | | | | | | verload | untries | aphical | | | | | | on HSS | and | info | | | | | | | sig | rmation | | | | | | S | nalling | | | | | | | olution | o | | | | | | | r | verload | | | | | | | equires | on HSS | | | | | | | mapping | | | | | | | | of ECGI | S | | | | | | | to | olution | | | | | | | Geogr | r | | | | | | | aphical | equires | | | | | | | Ide | mapping | | | | | | | ntifier | of ECGI | | | | | | | in MME. | to | | | | | | | This | Geogr | | | | | | | mapping | aphical | | | | | | | is | Ide | | | | | | | oper | ntifier | | | | | | | ator-sp | in MME. | | | | | | | ecific, | This | | | | | | | prop | mapping | | | | | | | rietary | is | | | | | | | and | oper | | | | | | | ty | ator-sp | | | | | | | pically | ecific, | | | | | | | stored | prop | | | | | | | in IMS | rietary | | | | | | | domain | and | | | | | | | and not | ty | | | | | | | the | pically | | | | | | | a | stored | | | | | | | ccess-n | in IMS | | | | | | | etwork. | domain | | | | | | | | and not | | | | | | | There | the | | | | | | | is | a | | | | | | | tight | ccess-n | | | | | | | c | etwork. | | | | | | | oupling | | | | | | | | between | There | | | | | | | access- | is | | | | | | | network | tight | | | | | | | iden | c | | | | | | | tifiers | oupling | | | | | | | (eg | between | | | | | | | ECGI, | access- | | | | | | | TAI, | network | | | | | | | LAI) | iden | | | | | | | and | tifiers | | | | | | | geo | (eg | | | | | | | graphic | ECGI, | | | | | | | ident | TAI, | | | | | | | ifiers. | LAI) | | | | | | | The | and | | | | | | | table | geo | | | | | | | has to | graphic | | | | | | | be | ident | | | | | | | updated | ifiers. | | | | | | | when | The | | | | | | | the | table | | | | | | | access | has to | | | | | | | network | be | | | | | | | is | updated | | | | | | | c | when | | | | | | | hanged. | the | | | | | | | | access | | | | | | | | network | | | | | | | | is | | | | | | | | c | | | | | | | | hanged. | | | | | | | | | | | | | | | | R | | | | | | | | equired | | | | | | | | P-CSCF | | | | | | | | for | | | | | | | | each | | | | | | | | and | | | | | | | | every | | | | | | | | SIP | | | | | | | | INVITE | | | | | | | | to | | | | | | | | check | | | | | | | | if the | | | | | | | | dialled | | | | | | | | number | | | | | | | | is in | | | | | | | | the | | | | | | | | short | | | | | | | | format | | | | | | | | or long | | | | | | | | form | | | | | | | | and | | | | | | | | obtain | | | | | | | | Geogr | | | | | | | | aphical | | | | | | | | ide | | | | | | | | ntifier | | | | | | | | from | | | | | | | | the | | | | | | | | PCRF. | | +---------+---------+---------+---------+---------+---------+---------+
# 8 Conclusions
For Key Issue 1a (How to handle UE\'s IMS emergency registration) and Key
Issue 1b (How to support PSAP callback):
\- Solution #5 captured in clause 6.5 is the selected solution.
The part of Solution #5 which deals with the optimization where the network
(P-CSCF) provides a new indication to the UE to perform anonymous IMS
emergency session and impacted UE behaviour is applicable to IMS emergency
sessions. This mainly applies to S8HR but not exclusively. Hence, normative
changes for this part will be captured as part of TEI.
For Key Issue 2 - Handling of non UE detectable Emergency Session:
\- Solution #1 with option c) (possibly as described in Solution #1a: How
P-CSCF can detect emergency numbers in a VPLMN\") for inter-operator database
query is selected. This can be complemented with local configuration as in
option a), with a limited number of roaming partners (e.g. bordering
countries) and where option c is not used for these cases.
NOTE: When a serving network activates an S8HR roaming agreement it is
recommended that all local emergency call numbers (including those for non-
standardized emergency services) are downloaded during the EPS Attach
procedure to the UEs camping on E-UTRAN, in order to ensure that local
emergency call numbers are known to the UEs. This helps to reduce the number
of non-UE detected emergency call numbers even for those PLMNs where only a
subset of the local emergency call numbers can be downloaded to the UEs.
For Key Issue 3 - Determination of the ID of the visited PLMN at IMS Entities
in HPLMN:
\- Solution #6 as captured in Section 6.6 is the selected solution.
For Key Issue 4 - Local Number Translation and Routing:
\- Solution #2 Local Number Translation captured in Section 6.2 is the
selected solution.
With regard to the aspect of key issue #4 regarding numbers not routable from
international sources, how the HPLMN translates these numbers to international
routable numbers is not specified by 3GPP. If translation of such numbers to
international routable numbers is needed, then the HPLMN shall deploy an
implementation specific NNI to the VPLMN (or other 3^rd^ party in the visited
country) so that these calls can be routed to the correct destination.
The solutions selected above provide the architecture enhancements required to
support S8 home routed roaming architecture for VoLTE. Normative specification
based on above selected solutions should proceed. Potential impacted stage 2
specifications are as follows (list is not exhaustive)
\- TS 23.401 [7]
\- TS 23.228 [8]
\- TS 23.167 [9]
\- TS 23.203 [11] (if needed)
#