# Foreword
This Technical Specification has been produced by the 3^rd^ Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# Introduction
Unlike earlier releases of this document, no markers are used to indicate the
changes from the previous CAMEL release, namely, CAMEL Phase 3 Release 99.
# 1 Scope
This standard specifies the stage 1 description for the CAMEL feature
(Customised Applications for Mobile network Enhanced Logic) which provides the
mechanisms to support services consistently independently of the serving
network. The CAMEL features shall facilitate service control of operator
specific services external from the serving PLMN. The CAMEL feature is a
network feature and not a supplementary service. It is a tool to help the
network operator to provide the subscribers with the operator specific
services even when roaming outside the HPLMN.
If an IPLMN or VPLMN supports CAMEL Phase 4, it shall also provide the
functionality of all previous CAMEL phases.
Phase 4 network signalling shall support interworking with CAMEL Phases 3 and
2.
The CAMEL feature is applicable
\- To mobile originated and mobile terminated call related activities;
\- To supplementary service invocations;
\- To SMS MO, to GPRS sessions and PDP contexts, to the control of HLR
subscriber data, to the control of network signalling load.
The mechanism described addresses especially the need for information exchange
among the VPLMN, HPLMN and the CAMEL Service Environment (CSE) for support of
such operator specific services. Any user procedures for operator specific
services are outside the scope of this standard.
This specification describes the interactions between the functions of the
VPLMN, HPLMN, IPLMN and the CSE.
The second phase of CAMEL enhances the capabilities of phase 1 where the
following capabilities have been added:
\- Additional event detection points;
\- Interaction between a user and a service using announcements, voice
prompting and information collection via in band interaction or USSD
interaction;
\- Control of call duration and transfer of Advice of Charge Information to
the mobile station;
\- The CSE can be informed about the invocation of the supplementary services
ECT, CD and MPTY;
\- For easier post-processing, charging information from a serving node can be
integrated in normal call records.
The third phase of CAMEL enhances the capabilities of phase 2. The following
capabilities are added:
\- Support of facilities to avoid overload;
\- Capabilities to support Dialled Services;
\- Capabilities to handle mobility events, such as (Not-)reachability and
roaming;
\- Control of GPRS sessions and PDP contexts;
\- Control of mobile originating SMS through both circuit switched and packet
switched serving network entities.
\- Interworking with SoLSA. (Support of Localised Service Area). Support for
this interworking is optional.
\- The CSE can be informed about the invocation of the supplementary services
CCBS.
Detailed information is given in the respective sections.
The fourth phase of CAMEL enhances the capabilities of phase 3. The following
capabilities are added:
\- CAMEL support for Optimal Routeing of circuit-switched mobile-to-mobile
calls;
\- The capability for the CSE to create additional parties in an existing
call;
\- The capability for the CSE to create a new call unrelated to any other
existing call;
> \- Capabilities for the enhanced handling of call party connections;
>
> \- The capability for the CSE to control sessions in the IP Multimedia
> Subsystem.
>
> \- Enhanced CSE capability for Dialled Services.
\- The capability to report basic service changes during ongoing call.
\- The CSE capability to select between preferred and less preferred bearer
service.
\- The capability for the CSE to control trunk originated calls.
\- The capability for the CSE to request additional dialled digits.
With CAMEL Phase 4, it is possible that only a limited subset of the new
functionalities is supported, in addition to the complete support of CAMEL
Phase 3.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
  * References are either specific (identified by date of publication, > edition number, version number, etc.) or non‑specific.
  * For a specific reference, subsequent revisions do not apply.
  * For a non-specific reference, the latest version applies. In the > case of a reference to a 3GPP document (including a GSM document), > a non-specific reference implicitly refers to the latest version > of that document _in the same Release as the present document_.
[1] 3GPP TS 22.093: \"Completion of Calls to Busy Subscriber (CCBS); Service
description, Stage 1\".
[2] 3GPP TS 22.079: \"Support of Optimal Routeing (SOR); Service definition
(Stage 1)\".
[3] 3GPP TS 22.030: \"Man-machine Interface (MMI) of the Mobile Station (MS)
(Stage 1)\".
[4] 3GPP TS 22.090: \"Stage 1 Decision of Unstructured Supplementary Service
Data (USSD)\".
[5] 3GPP TS 22.097: \"Multiple Subscriber Profile (MSP); Service definition
(Stage 1)\".
[6] 3GPP TS 22.060: \"General Packed Radio Service (GPRS); Service definition
(Stage 1)\".
[7] 3GPP TS 22.057: \"Mobile Environment (MExE); Service definition (Stage
1)\".
[8] 3GPP TS 22.071: \"Location Services; Service Definition (Stage1) \".
[9] 3GPP TS 23.018: \"Basic Call Handling; Technical Realization\".
[10] 3GPP TS 22.003: \"Circuit teleservices supported by a public land mobile
network (PLMN) \".
[11] 3GPP TS 22.228: \"Service Requirements for IP multimedia Core Network;
(Stage1) \".
[12] 3GPP TS 23.228: \"IP Multimedia (IM) Subsystem - Stage 2\".
[13] 3GPP TS 23.060: \"General Packet Radio Service (GPRS); Service
description; Stage 2\".
[14] 3GPP TS 23.172: \"Technical realization of Circuit Switched (CS);
multimedia service; UDI/RDI fallback and service modification; stage 2\".
# 3 Definitions and abbreviations
**Operator Specific Service (OSS)** : Any non-standardised service offered to
a mobile user.
**Interrogating PLMN (IPLMN)** : The PLMN which interrogates the HPLMN for
information to handle a mobile terminating call.
**CAMEL Service Environment (CSE)** : A CSE is a logical entity which
processes activities related to Operator Specific Services (OSS).
**Route select failure:** A condition when routeing to the called party fails.
Route Select Failure can be reported in an existing relationship or a new
relationship can be initiated.
**Service event** : A specific event of a process which may be used as part of
an operator specific service.
**Initial service event** : A service event which triggers the establishment
of a relationship between the CSE and the controlled entity.
**Subsequent service event** : A service event which is reported in the
context of an existing relationship between the CSE and the reporting entity.
**Service procedure** : A part of the CAMEL feature to be used when a specific
CAMEL service event is detected.
**Network CAMEL Service Information (N-CSI)** : Identifies services offered by
the serving PLMN operator equally for all subscribers.
NOTE: These services may also be provided using a technology other than CAMEL.
**CAMEL Subscription Information (CSI)** : Identifies that CAMEL support is
required for the subscriber and the identities of the CSEs to be used for that
support. The CSI also contains information related to the OSS of the
subscriber, e.g. Service Key.
The OSS may include both services provisioned for individual subscribers and
services provisioned equally for all users of a VPLMN.
**Location Area Code:** Indicates the global identity of that part of the
service area of a VLR in which the subscriber is currently located, and in
which the subscriber will be paged for mobile terminated traffic
**Location Information** : The location information shall be an identification
of the location of the served subscriber.
The following location information shall be sent to the CSE (if available):
\- **Geographical information** indicates the location (latitude and
longitude) of the served subscriber. When Cell ID or Location Area Code is
known the latitude and longitude may be calculated as the nominal central
point of the cell or of the location area; alternative mechanisms for
determining latitude and longitude may also be supported. The uncertainty of
the indicated location is part of the geographical information.
\- **Geodetic Information** provides the same functional capability as
geographical information; however it is encoded differently.
\- **Cell ID** indicates the global identity of the current or last cell which
the subscriber is using or has used if the subscriber is using GERAN. The
VPLMN shall update the stored Cell ID at establishment of every radio
connection and whenever the subscriber is handed over between cells.
\- **Routing Area ID** indicates the global identity of the current or last
GPRS routing area which the subscriber is using or has used if the subscriber
is using GERAN radio access in a GPRS serving network.
\- **Service Area ID** indicates the global identity of the current or last
service area which the subscriber is using or has used if the subscriber is
using UTRAN radio access. The VPLMN shall update the stored Service Area ID at
establishment of every radio connection and whenever the subscriber is handed
over between service areas.
\- **VLR number** is the number of the serving VLR stored in the HPLMN.
\- **Location status** indicates whether or not the location information has
been confirmed by radio contact. If the location information has not been
confirmed by radio contact a time stamp is sent indicating the time elapsed
since the last radio contact with the subscriber.
\- **Location number** is the number received on the incoming circuit (for an
incoming call) or to be sent on the outgoing circuit (for an outgoing call).
**Service Key** : An identifier of the OSS which shall be transparent to the
IPLMN/VPLMN.
**Subscriber Status** : An indication of the status of a subscriber,
determined by the state of the subscriber's MS. The subscriber status depends
on the domain for which it is requested:
The **Subscriber Status in the circuit switched domain** can take one of three
values:
\- **CAMEL-busy** : The MS is engaged in a mobile-originated or mobile-
terminated circuit-switched call.
\- **Network determined not reachable** : The network can determine from its
internal data that the MS is not reachable. This includes detached and purged
mobile stations.
\- **Assumed idle** : The MS is not CAMEL-busy or network determined not
reachable.
The **Subscriber Status in the packet switched domain** can take one of five
values:
\- **Detached:** The network can determine from its internal data that the MS
is not registered to the GPRS data network.
\- **CAMEL-attached, MS not reachable for paging:** The MS is registered to
the GPRS data network, but there are no PDP contexts active for this MS; the
GPRS data network can determine from its internal data that the MS is not
reachable for paging.
\- **CAMEL-attached, MS may be reachable for paging:** The MS is registered to
the GPRS data network, but there are no PDP contexts active for this MS; the
GPRS data network has not determined from its internal data that the MS is not
reachable for paging.
\- **CAMEL-PDP context active, MS not reachable for paging:** The MS is
registered to the GPRS data network, and there is at least one PDP context
active for this MS; the GPRS data network can determine from its internal data
that the MS is not reachable for paging. The status includes the information
for each active PDP context, as specified in 3GPP TS 23.060 [13].
\- **CAMEL-PDP context active, MS may be reachable for paging:** The MS is
registered to the GPRS data network, and there is at least one PDP context
active for this MS; the GPRS data network has not determined from its internal
data that the MS is not reachable for paging. The status includes the
information for each active PDP context, as specified in 3GPP TS 23.060 [13].
**GPRS session:** The period during which the GPRS subscriber is registered to
the GPRS data network. A GPRS session starts when the GPRS subscriber attaches
to the GPRS data network. It ends when the GPRS subscriber detaches from the
GPRS data network.
**PDP Context:** A transaction for the exchange of data between an MS and a
peer entity, which is addressed by the Access Point Name. A PDP context starts
when the request from a GPRS subscriber successfully establishes the PDP
context and ends when the subscriber deactivates the PDP context.
**PDP:** Packet Data Protocol (as defined in TS 22.060 [6])
**Carrier Identification Code:** Identifies uniquely the Carrier (NAEA).
**Carrier Selection Information:** An indication of whether the subscriber
selected a carrier, or the carrier is predefined for the subscriber (NAEA).
**Originating Line Identification:** Identifies uniquely the subscriber to be
charged for the usage of the carrier (NAEA).
**Charge Number:** Identifies uniquely the organisation to be charged for the
usage of the carrier (NAEA).
**North American Equal Access (NAEA):** A service used in the North American
region whereby a subscriber may select the carrier to be used for long
distance calls.
**Subscribed Dialled Services:** Identifies a set of at most ten service
numbers. The served subscriber can originate calls by entering a service
number for the destination. This is in addition to the possibility to route
calls by entering the destination number. Each service number is defined at
the HPLMN operator\'s discretion. The set of service numbers forms part of the
subscriber\'s profile, whether she is registered in the HPLMN or another PLMN.
Call Party Handling (CPH): A method of manipulating call legs which includes
creating new parties in a call, placing individual call parties on hold,
reconnecting them to the group of call parties and disconnecting individual
call parties.
**CPH Configuration:** One or more groups of call legs that share a common
dialogue to the CSE.
**Call Leg:** The connection joining the call party to the CPH configuration.
**Call Party:** A party (e.g. served subscriber, called party, PSTN subscriber
etc.) in the CPH configuration.
**IP multimedia session (IPMM session):** See [11] for definition.
**IM CN subsystem (IP Multimedia Core Network subsystem):** See [11] for
definition.
**IM application level registration:** See [12] for definition.
**Trunk Originated CAMEL Service Information (TO-CSI)** : Identifies services
offered by the PLMN operator to all incoming calls on a specific MSC trunk.
# 4 Description
The CAMEL network feature enables the use of Operator Specific Services (OSS)
by a subscriber even when roaming outside the HPLMN.
## 4.1 Provision of CAMEL
CAMEL subscribers have one or more CAMEL Subscription Information (CSI)
elements. CAMEL Subscription Information is provided by the HPLMN operator by
administrative means.
The following CSIs may be administered per subscriber:
**D-CSI** _Dialled Services CAMEL Subscription Information_ (D-CSI) is
transferred to the VPLMN (at location update), IPLMN (for an incoming call in
GMSC) or the IM CN subsystem. D-CSI contains trigger information which is
required to invoke a CAMEL service logic for subscribers dialled services. See
section 5.3.2 and section A.2.2 for the usage of D-CSI.
**GPRS-CSI** _GPRS CAMEL Subscription Information (GPRS-CSI)_ is transferred
to the VPLMN. GPRS-CSI contains trigger information which is required to
invoke a CAMEL Service Logic for GPRS Sessions and PDP Contexts.\ See section
10 for the usage of GPRS-CSI.
**M-CSI** _Mobility Management CAMEL Subscription Information (M-CSI)_ is
transferred to the VPLMN. M-CSI is used to notify the CSE about Mobility
Management events for the CS subscriber.\ See section 12.1 for the usage of
M-CSI.
**MG-CSI** _Mobility Management for GPRS CAMEL Subscription Information (MG-
CSI)_ is transferred to the VPLMN. MG-CSI is used to notify the CSE about
Mobility Management events for the GPRS subscriber.\ See section 12.1 for the
usage of MG-CSI.
**MO-SMS-CSI** _Originating Short Message Service CAMEL Subscription
Information (MO-SMS-CSI)_ is transferred to the VPLMN. MO-SMS-CSI contains
trigger information that is required to invoke a CAMEL Service Logic for
Mobile Originating Short Message submissions.\ See section 9 for the usage of
MO-SMS-CSI.
**MT-SMS-CSI** Terminating _Short Message Service CAMEL Subscription
Information (MT-SMS-CSI)_ is transferred to the VPLMN. MT-SMS-CSI contains
trigger information that is required to invoke a CAMEL Service Logic for
Mobile Terminating Short Message delivery.\ See section 9 for the usage of MT-
SMS-CSI.
**O-CSI** _Originating CAMEL Subscription Information (O-CSI)_ is transferred
to the VPLMN (at location update),to the IPLMN (for an incoming call in the
GMSC) and to the IM CN subsystem. O-CSI contains trigger information that is
required to invoke a CAMEL Service Logic for Mobile Originating calls (in the
VMSC) and Mobile Forwarding calls (in the VMSC and the GMSC).\ See sections 5
and A for the usage of O-CSI.
**SS-CSI** _Supplementary Service Invocation Notification CAMEL Subscription
Information (SS-CSI)_ is transferred to the VPLMN. SS-CSI is used to notify
the CSE about the invocation of certain Supplementary Services.\ See section
12.3 for the usage of SS-CSI.
**T-CSI** _Terminating CAMEL Subscription Information (T-CSI)_ is transferred
to the IPLMN for an incoming call in the GMSC. T-CSI contains trigger
information which is required to invoke a CAMEL Service Logic for Mobile
Terminating calls in the GMSC.\ See section 6 for the usage of T-CSI.
**TIF-CSI** _Translation information Flag CAMEL Subscription Information (TIF-
CSI)_ is transferred to the VPLMN. TIF-CSI is used in the HLR for registering
short Forwarded-to-Numbers (FTNs). When TIF-CSI is present, the subscriber is
allowed to register short FTNs.\ When the subscriber invokes Call Deflection,
TIF-CSI in the VPLMN allows the subscriber to deflect to short Deflected-to-
Numbers.\ See section 18.3 for the usage of TIF-CSI.
**U-CSI** _USSD CAMEL Subscription Information (U-CSI)_ is held in the HLR; it
is not sent to any other node. U-CSI contains trigger information which is
used to invoke a USSD application in the CSE for the served subscriber.\ See
section 14.3 for the usage of U-CSI.
**UG-CSI** _USSD General CAMEL Subscription Information (UG-CSI)_ is held in
the HLR; it is not sent to any other node. UG-CSI contains trigger information
which is used to invoke a USSD application in the CSE for all subscribers.\
See section 14.3 for the usage of UG-CSI.
**VT-CSI** VMSC _Terminating CAMEL Subscription Information (VT-CSI)_ is
transferred to the VPLMN at location update and to the IM CN subsystem. VT-CSI
contains trigger information which is required to invoke a CAMEL Service Logic
for Mobile Terminating calls in the VMSC.\ See sections 6 and A for the usage
of VT-CSI.
Refer to 3GPP TS 23.078 for detailed descriptions of the various types of
CAMEL Subscription Information.
The CSI may include the Default Call Handling, Default GPRS Handling or
Default SMS Handling.
The Default Call Handling indicates whether the call shall be released or
continued if the contact with the CSE is not confirmed or is interrupted.
Network -based services may be provided by the serving PLMN operator. The
provisioning mechanism is out of the scope of this specification.
Trunk originated services may be provided by the PLMN operator. The
provisioning mechanism is out of the scope of this specification.
## 4.2 General Procedures
Each process is made up of a series of telecommunication events, some of which
are service events. At a service event, the IPLMN or VPLMN may:
\- Suspend the handling of the telecommunication service and make contact with
a CSE to ask for instructions, or
\- Send a notification to the CSE and continue the handling of the
telecommunication service, or
\- Continue the handling of the telecommunication service without sending a
notification to the CSE.
When a service event is reported to the CSE, the IPLMN or VPLMN shall send to
the CSE the information listed in this specification. All information sent to
the CSE relates to the served CAMEL subscriber unless otherwise stated. The
initial service events, which can initiate contact with the CSE, are defined
in the CAMEL Subscription Information. The CSE identity which corresponds to
each initial service event is also defined in the CAMEL Subscription
Information.
The serving network shall accept the instruction from the CSE and continue
call processing with the received information.
The CAMEL feature is applicable in a PLMN when the CAMEL subscription
information is handled properly and when the communication to the CSE is
compliant with the CAMEL protocol [8].
The CAMEL network capabilities are used at a PLMN when the CAMEL feature is
applicable and:
\- The CSI is received from the HPLMN; or
\- The CSE requests congestion control in the VPLMN or IPLMN.
In addition dialled network-based services may be applicable in a PLMN if so
administered.
In addition trunk originated based services may be applicable in a PLMN if so
administered (See clause 24):
\- Activate subsequent service events to be reported to the CSE. These events
shall remain active only for the lifetime of the telecommunication service;
\- Alter information relating to the suspended process;
\- Alter information relating to the parties involved in the process;
\- Indicate which of the possible parts of the process should occur next (e.g.
terminate the call);
\- Perform charging activities;
\- Order in band user interaction.
If a control relationship exists between the CSE and the IPLMN/VPLMN of the
served subscriber, then at any time during the call the CSE can instruct the
IPLMN/VPLMN of the served subscriber to perform one or more of the following
Call Party Handling operations:
\- Create additional parties in the call (additional parties shall be created
in a held state);
\- Release an individual call party;
\- Release all parties in the call.
If a control relationship exists between the CSE and the IPLMN/VPLMN of the
served subscriber, then at any time during the alerting and active phases of a
call leg, the CSE can instruct the IPLMN/VPLMN of the served subscriber to
perform the following Call Party Handling operation:
\- Connect an individual call party to the group of call parties, within the
same call (the call party shall be in a held state immediately before this
operation).
If a control relationship exists between the CSE and the IPLMN/VPLMN of the
served subscriber, then at any time during the active phase of a call leg, the
CSE can instruct the IPLMN/VPLMN of the served subscriber to perform the
following Call Party Handling operation:
\- Place an individual call party on hold (the call party shall not be in a
held state immediately before this operation).
NOTE: Call Party Handling operations are not applicable to a call leg or group
of legs which are involved in user interaction (Play Announcement or Prompt
and Collect User Information)
It shall be possible for the CSE to initiate a new call to the HPLMN/VPLMN of
a subscriber at any time.
For subscribed dialled services it shall be possible for the CSE to instruct
the serving PLMN to perform either or both of the following actions:
\- Perform charging activities;
\- Order in band user interaction.
After the CSE has issued either or both of the preceding instructions, it
shall issue exactly one of the following instructions to the serving PLMN:
\- Continue the processing of the call, or
\- Continue the processing of the call with modified information, or
\- Connect the calling party to a specified called party, or
\- Release the call.
After one of the above instructions, the relation between the serving network
and the CSE shall be released. Any other behaviour may cause misoperation of
CAMEL based services.
Serving network-based service numbers may be treated after the behaviour
described above. These services are outside the scope of the CAMEL
specification.
Serving network based service numbers may be provided at the discretion of the
network operator but these are outside the scope of this specification.
For Enhanced Dialled Services, the CSE capabilities are the same as for
subscriber-based services.
CAMEL features shall form an integral part of the following processes:
\- Mobile Originated call (MO call);
\- Mobile Terminated call (MT call) in GMSC;
\- Mobile Terminated call (MT call) in VMSC;
\- Mobile Forwarded call (MF call) - early call forwarding; early forwarded
calls are treated as MO calls;
\- Mobile Forwarded call (MF call) - late call forwarding; late forwarded
calls are treated as MO calls;
\- Trunk Originated call (TO call) -- call received on an incoming trunk at
the MSC;
\- Mobile Originated IP Multimedia Session in Serving CSCF;
Mobile Terminated IP Multimedia Session in Serving CSCF;
\- Supplementary service invocation;
\- USSD user interaction. The service codes for CAMEL services can be
allocated per subscriber or globally for all subscribers of the HPLMN;
\- Mobile Originated Short Message (MO SM) service; via both the MSC and the
SGSN;
\- Mobile Terminating Short Message (MT SM) service; via both the MSC and the
SGSN;
\- General Packet Radio Service (GPRS);
\- Mobility Management events;
\- Interrogation and control of Subscription Data.
The CSE shall be able to interrogate the HPLMN for information about the
location and status of a particular subscriber at any time.
## 4.3 Applicability of CAMEL Procedures
CAMEL procedures are applicable to all circuit switched Basic Services without
distinction (except Emergency calls).
CAMEL procedures are applicable to GPRS sessions and PDP contexts.
CAMEL procedures are applicable to the Mobile Originating/ Terminating Short
Message Service through both circuit switched and packet switched serving
network entities.
CAMEL procedures are applicable to IP multimedia sessions (except Emergency
Calls) to support legacy services.
CAMEL shall support IPMM sessions which are based on the same charging
paradigms as CS/PS calls. This applies most probably to VoIP and Video over
IP. New charging paradigms - and this includes especially the flexible
content-based charging - are to be supported by the new charging functions
defined for the IM domain.
CAMEL procedures are applicable to IP multimedia sessions addressed by either
E.164 numbers or SIP URLs.
# 5 Procedures for Mobile Originated Calls and Forwarded Calls
NOTE: Other information elements not listed in the following subclauses may be
necessary to meet some Stage 1 service requirements. Refer to the Stage 2
specification TS 23.078 for complete information element lists.
## 5.1 Initial service events
It shall be possible to specify which of the following initial service events
shall initiate contact with the CSE:
\- Collection of dialled digits;
\- Analysis of dialled digits;
\- Detection of unsuccessful call establishment.\ Unsuccessful call
establishment may be caused by:
\- Route select failure.
The definition of which of the above initial service events shall initiate
contact with the CSE is part of the subscriber's CAMEL subscription
information. Analysis of dialled digits can open a new dialogue regardless of
whether a relationship exists. Upon detection of unsuccessful call
establishment no new relationship is opened if there is already a dialogue
open due to the same CSI.
## 5.2 Criteria for contact with the CSE
It shall be possible for the HPLMN to specify criteria which must be satisfied
before the CSE is contacted.
The following criteria may be defined:
### 5.2.1 CSI criteria applicable at call setup
#### 5.2.1.1 CSI criteria applicable at call setup when dialled digits have
been collected
CSI criteria may be defined for a subscriber for the case where collection of
dialled digits has been performed.
\- Criteria on the dialled number; these consist of:
\- The contents of the dialled number (a list of up to 10 dialled number
strings may be defined in the criteria. Each dialled number string may be of
any type of number (TON) format supported by the access protocol).
\- The length of the dialled number (a list of up to three lengths may be
defined.).
\- The criteria on the dialled number may be collectively defined to be either
\"enabling\" triggering criteria or \"inhibiting\" triggering criteria (see
below). The HPLMN may also choose not to define any criteria on the dialled
number.
\- A criterion on the basic service: this consists of a list of up to 5 basic
service codes for individual basic services or basic service groups. The HPLMN
may also choose not to define any criterion on the basic service.
\- A criterion on the type of call: this consists of defining whether the call
must be a forwarded call.
> A call is treated as forwarded in this respect when either a forwarding
> supplementary service applies or when the call is forwarded as a result of a
> terminating CAMEL based service. The HPLMN may also choose not to define any
> criterion on the type of call.
If the criteria on the dialled number are \"enabling\" then the dialled number
criteria are satisfied if:
\- The dialled number matches a dialled number string defined in the criteria;
or
\- The length of the dialled number matches a dialled number length defined in
the criteria.
If the criteria on the dialled number are \"inhibiting\" then the dialled
number criteria are satisfied if:
\- The dialled number does not match any of the dialled number strings defined
in the criteria; and
\- The length of the dialled number is not the same as any dialled number
length defined in the criteria.
In these tests the dialled number matches one of the dialled number strings
if:
\- The two numbers are of the same Type Of Number (TON); and
\- The dialled number is at least as long as the dialled number string in the
criteria; and
\- All the digits in the dialled number string in the criteria match the
leading digits of the dialled number.
If no criterion on the dialled number is specified then the dialled number
criteria are satisfied.
The criterion on the basic service is satisfied if the basic service used for
the call corresponds to any basic service code or basic service group defined
in the criterion or if no basic service criterion is specified.
The criterion on the type of call is satisfied if the type of the call is the
same as the type defined in the criterion or if no call type criterion is
specified.
The criteria on the call setup event procedure are satisfied if:
\- The criteria on the dialled number are satisfied; and
\- The criterion on the basic service is satisfied; and
\- The criterion on the type of call is satisfied.
#### 5.2.1.2 CSI criterion applicable at call setup for subscribed dialled
services
A CSI criterion on the contents of the called number shall be defined for
subscribed dialled services. A list of up to 10 called number strings may be
defined in the criterion. Each entry in the called number list has associated
with it a CSE identity and a service key which defines the service to be
triggered if the criterion is satisfied.
If any other CAMEL dialogue has changed the called number, then the modified
called number shall be used for the conditional triggering check.
The called number criterion is satisfied if the called number matches a called
number string defined in the criterion.
In this test the called number matches one of the called number strings if:
\- The two numbers are of the same Type Of Number (TON); and
\- The called number is at least as long as the called number string in the
criteria; and
\- All the digits in the called number string in the criteria match the
leading digits of the called number.
#### 5.2.1.3 CSI criterion applicable on detection of unsuccessful call
establishment
A criterion on the release cause may be defined. This consists of a list of up
to 5 cause values. The criterion on the release cause is satisfied if the
received call release cause corresponds to any cause value defined in the list
or if no criterion is defined.
## 5.3 Call set-up request procedure
### 5.3.1 Procedure when dialled digits have been collected
The purpose of this procedure is to detect a call set-up request at the point
where digits have been collected but not analysed, and to allow the CSE to
modify the handling of the call set-up request.
If (according to the CSI):
\- The subscriber is provisioned with a CAMEL based originating service; and
\- The call set-up request occurs; and
\- The criteria are satisfied.
Then the VPLMN/IPLMN shall suspend call processing, make contact with the CSE
and await further instructions. [Editorial alignment to stage 3]
When the VPLMN/IPLMN has made contact with the CSE, the CSE shall be able to
instruct the VPLMN/IPLMN to act as described below.
\- Perform charging activities;
\- Activate subsequent control service events for the call. The CSE shall have
the possibility to send the following information:
\- The subsequent service event which shall be detected and reported:
\- Called party alert;
\- Called party connection;
\- Call disconnection;
\- Calling party abandon;
\- Unsuccessful call establishment. In the case of no answer the CSE may
provide a no answer timer;
\- Mid call event (DTMF). The CSE shall specify the digit string(s) for which
the instruction is valid.. The arming and detection of the mid call event
shall be limited to the VPLMN;
\- Change of Position. The CSE may specify notification criteria. The arming
and detection of the Change of Position event shall be limited to the VPLMN;
\- Change of basic service.
\- The party in the call for which the event shall be detected and reported
(calling or called party);
\- The type of monitoring (control or notification).
\- Order in-band user interaction;
There shall be no restriction regarding the order of the above instructions or
the number of times each of the above instructions can be repeated. Once the
CSE has concluded issuing the above instructions, it shall issue one and only
one of the following instructions:
\- Bar the call (i.e. release the call prior to connection);
\- Continue the call processing;
\- Continue the call processing with modified information;
\- Continue the handling of the calling party without routeing the call to the
destination.
### 5.3.2 Procedure for subscribed dialled services
The purpose of this procedure is to detect a call set-up request at the point
where the called party number has been compared with the dialled services
information, and allow the CSE to modify the handling of the call set-up
request. Triggering of this procedure shall happen immediately after the
procedure when dialled digits have been collected.
#### 5.3.2.1 Initiation of contact with the CSE
If (according to the CSI):
\- The subscriber is provisioned with a CAMEL based originating service; and
\- The call set-up request occurs; and
\- The criteria are satisfied.
Then the VPLMN/IPLMN shall suspend call processing, make contact with the CSE
and await further instructions.
Contact with the CSE shall (if necessary) be made in this manner before
network dialled services are invoked.
#### 5.3.2.2 Further processing of the call
If a relationship exists with a CSE, then when the VPLMN/IPLMN has made
contact with the CSE, the CSE shall be able to instruct the VPLMN/IPLMN to act
as described below:
\- Perform charging activities The CSE is only allowed to send e-values (refer
to sect. 15.1, 'CSE controlled e-values') and include free format data in Call
Data Records (refer to sect. 15.2, 'Inclusion in charging records of
information received from the CSE');
\- Order in-band user interaction. (Interaction between the service triggered
from previous triggering may be needed to avoid duplicated guidance etc.).
Once the CSE has concluded issuing the above instructions, it shall issue one
and only one of the following instructions:
\- Release the call;
\- Continue the call processing;
\- Continue the call processing with modified information;
If no relationship exists with a CSE for the call, then when the VPLMN/IPLMN
has made contact with the CSE, the CSE shall be able to instruct the
VPLMN/IPLMN to act as described below:
> \- Perform charging activities;
>
> \- Activate subsequent control service events for the call. The CSE shall
> have the possibility to send the following information:
>
> \- The subsequent service event which shall be detected and reported:
\- Called party alert;
\- Called party connection;
\- Call disconnection;
\- Calling party abandon;
\- Unsuccessful call establishment. In the case of no answer the CSE may
provide a no answer timer;
\- Mid call event (DTMF). The CSE shall specify the digit string(s) for which
the instruction is valid. The arming and detection of the mid call event shall
be limited to the VPLMN;
\- Change of Position. The CSE may specify notification criteria. The arming
and detection of the Change of Position event shall be limited to the VPLMN;
\- Change of basic service.
> \- The party in the call for which the event shall be detected and reported
> (calling or called party);
>
> \- The type of monitoring (control or notification).
\- Order in-band user interaction.
There shall be no restriction regarding the order of the above instructions or
the number of times each of the above instructions can be repeated. Once the
CSE has concluded issuing the above instructions, it shall issue one and only
one of the following instructions:
\- Allow the call processing to continue unchanged;
\- Allow the call processing with modified information;
\- Continue the handling of the calling party without routeing the call to the
destination;
\- Release the call.
Due to interworking problems, the service operator shall ensure that sending
of e-values and call period control is not used by the other services in the
same call of the served subscriber with _Enhanced CSE capability for Dialled
Services_.
## 5.4 Calling party abandon
The purpose of this procedure is to manage an outgoing call set-up at the time
it is terminated by the calling party before the call is established.
If the CSE has activated this subsequent service event for this call in notify
mode and the calling party abandon event occurs the VPLMN/IPLMN shall:
\- Notify the CSE and continue.
The following information shall be provided to the CSE:
\- Event met;
\- Type of monitoring;
The CSE shall send the following instruction:
\- Continue the call processing.
If the CSE has activated this subsequent service event for this call in
request mode and the calling party abandon event occurs the VPLMN/IPLMN shall
suspend call processing, make contact with the CSE and await further
instructions.
When the VPLMN/IPLMN has made contact with the CSE in request mode, the CSE
shall be able to instruct the VPLMN to act as described below.
\- Perform charging activities.
There shall be no restriction regarding the number of times the above
instruction can be repeated. Once the CSE has concluded issuing the above
instruction, it shall issue the following instruction:
\- Continue the call processing.
## 5.5 Unsuccessful call establishment
The purpose of this procedure is to manage an outgoing call set-up at the time
when the call establishment is unsuccessful.
If no control relationship for the given call exists and
\- The unsuccessful call establishment procedure is defined as an initial
service event (according to the CSI); and
\- The call attempt is unsuccessful; and
\- The triggering criteria are satisfied.
Then the VPLMN/IPLMN shall suspend call processing, make contact with the CSE
and await further instructions.
If a relationship for the given call already exists and the CSE has activated
this subsequent service event for this call and the unsuccessful call
establishment event occurs the VPLMN/IPLMN shall:
\- Suspend call processing, notify the CSE and await further instructions, or
\- Notify the CSE and continue call processing.
In both cases above the following information shall be provided to the CSE:
\- Event met;
\- Type of monitoring;
\- Cause for unsuccessful call establishment:
\- Not reachable;
\- Busy;
\- No answer;
\- Route select failure.
If the unsuccessful call procedure is armed as an initial service event, a new
relationship is opened only if triggering criteria are fulfilled and no
relationship already exists for the same CSI.
When the VPLMN/IPLMN has made contact with the CSE, the CSE shall be able to
instruct the VPLMN/IPLMN to act as described below:
\- Perform charging activities;
\- Activate subsequent control service events for the call. The CSE shall have
the possibility to send the following information:
\- The subsequent service event which shall be detected and reported:
\- Called party alert;
\- Called party connection;
\- Call disconnection;
\- Calling party abandon;
\- Unsuccessful call establishment. In the case of no answer the CSE may
provide a no answer timer;
\- Mid call event (DTMF). The CSE shall specify the digit string(s) for which
the instruction is valid. The arming and detection of the mid call event shall
be limited to the VPLMN;
\- Change of Position. The CSE may specify notification criteria. The arming
and detection of the Change of Position event shall be limited to the VPLMN;
\- Change of basic service.
\- The party in the call for which the event shall be detected and reported
(calling or called party);
\- The type of monitoring (control or notification).
\- Order in-band user interaction;
There shall be no restriction regarding the order of the above instructions or
the number of times each of the above instructions can be repeated. Once the
CSE has concluded issuing the above instructions, it shall issue one and only
one of the following instructions:
\- Release the call;
\- Continue the call processing;
\- Continue the call processing with modified information.
## 5.6 Called party connection procedure
The purpose of this procedure is to manage an outgoing call set-up at the time
when the called party answers and the call is successfully established.
If the CSE has activated this subsequent service event for this call and the
called party connection event occurs the VPLMN/IPLMN shall:
\- Suspend call processing, notify the CSE and await further instructions, or
\- Notify the CSE and continue call processing.
The following information shall be provided to the CSE:
\- Event met;
\- The party in the call for which the event is reported (only called party
applicable);
  * The charge indicator which will be used in the Call Data Record if available;
\- Type of monitoring.
When the VPLMN/IPLMN has made contact with the CSE, the CSE shall be able to
instruct the VPLMN/IPLMN to act as described below.
\- Perform charging activities;
\- Activate subsequent control service events for the call. The CSE shall have
the possibility to send the following information:
\- The subsequent service event which shall be detected and reported:
\- Call disconnection;
\- Mid call event (DTMF). The CSE shall specify the digit string(s) for which
the instruction is valid. The arming and detection of the mid call event shall
be limited to the VPLMN;
\- Change of Position. The CSE may specify notification criteria. The arming
and detection of the Change of Position event shall be limited to the VPLMN;
\- Change of basic service.
\- The party in the call for which the event shall be detected and reported
(calling or called party);
\- The type of monitoring (control or notification).
\- Order in-band user interaction.
There shall be no restriction regarding the order of the above instructions or
the number of times each of the above instructions can be repeated. Once the
CSE has concluded issuing the above instructions, it shall issue one and only
one of the following instructions:
\- Release the call;
\- Continue the call processing.
## 5.7 Mid call procedure
When the CSE instructs the VPLMN to arm the mid-call event it shall specify a
criterion against which digits entered by the originating subscriber using the
DTMF procedure shall be matched. It shall be possible for the CSE to instruct
the VPLMN to re-arm the mid-call event when it is encountered.
In the following, each digit shall be taken from the ordered set (0 ‑ 9, *,
#).
The criterion consists of a list defining:
  * The minimum number of digits to be collected, and
```{=html}
``` \- The maximum number of digits to be collected, and
  * The maximum delay between successive digits, and optionally
  * The digit(s) used to indicate the start of the input, and optionally
  * The digit(s) used to indicate the end of the input, and optionally
  * The digit(s) used to indicate that the input shall be cancelled.
The minimum and maximum number of digits to be collected includes the digit(s)
used to indicate the start and end of the input.
A digit string has been cancelled if:
\- The CSE has specified digit(s) used to indicate that the input shall be
cancelled, and
\- The specified digit(s) has/have been received from the user.
If the CSE has specified digit(s) used to indicate the start of the input,
then the input has started if:
\- The specified digit(s) has/have been received from the user, and
\- The digit string has not been cancelled.
If the CSE has not specified digit(s) used to indicate the start of the input,
then the input has started if:
\- At least one digit has been received from the user, and
\- The digit string has not been cancelled.
If the CSE has specified digit(s) used to indicate the end of the input, then
the input has ended if:
\- The specified digit(s) has/have been received from the user, or
\- The maximum number of digits has been received, or
\- The maximum delay between successive digits has been exceeded.
If the CSE has not specified digit(s) used to indicate the end of the input,
then the input has ended if:
\- The maximum number of digits has been received, or
\- The maximum delay between successive digits has been exceeded.
A digit string satisfies the criterion for the Mid call detection point if:
\- The input has started, and
\- The digit string contains at least the minimum number of digits, and
\- The input has ended.
Triggering of the mid-call event shall occur immediately after the criterion
has been satisfied. Once the triggering occurs the VPLMN shall disarm the mid-
call event.
Digits collected from the subscriber shall be relayed as DTMF towards the
destination subscriber independent of any CAMEL processing.
If the CSE has activated this service event for the served subscriber and a
mid-call event (as determined by the criterion for the mid-call procedure
being satisfied) occurs the VPLMN shall:
\- Suspend call processing, notify the CSE and await further instructions, or
\- Notify the CSE and continue call processing.
The following information shall be provided to the CSE:
\- Event met;
\- Type of monitoring;
\- Event specific data:
\- Received DTMF digits.
When the VPLMN has made contact with the CSE, the CSE shall be able to
instruct the VPLMN to act as described below:
\- Perform charging activities;
\- Activate other control service events for the call. The CSE shall have the
possibility to send the following information:
\- The service event which shall be detected and reported:
\- Call disconnection;
\- Mid call event (DTMF). The CSE shall specify the digit string(s) for which
the instruction is valid.
\- Change of Position. The CSE may specify notification criteria.
\- The party in the call for which the event shall be detected and reported
(calling or a called party);
\- The type of monitoring (control or notification).
\- Order in-band user interaction.
There shall be no restriction regarding the order of the above instructions or
the number of times each of the above instructions can be repeated. Once the
CSE has concluded issuing the above instructions, it shall issue one and only
one of the following instructions:
\- Release the call;
\- Continue the call processing;
\- Continue the call processing with modified information.
## 5.8 Call disconnection procedure
The purpose of this procedure is to manage the actions on disconnection of an
established call. This procedure is applicable to any party in the call.
If the CSE has activated this subsequent service event for this call and the
call disconnection event occurs the VPLMN/IPLMN shall:
\- Suspend call processing, notify the CSE and await further instructions, or
\- Notify the CSE and continue call processing.
The following information shall be provided to the CSE:
\- Event met;
\- The party in the call for which the event is reported;
\- Type of monitoring;
\- Disconnection reason.
When the VPLMN/IPLMN has made contact with the CSE, the CSE shall be able to
instruct the VPLMN/IPLMN to act as described below:
\- Perform charging activities
\- Activate subsequent control service events for the call. The CSE shall have
the possibility to send the following information:
\- The subsequent service event which shall be detected and reported:
\- Called party alert;
\- Called party connection;
\- Call disconnection;
\- Calling party abandon;
\- Unsuccessful call establishment. In the case of no answer the CSE may
provide a no answer timer;
\- Mid call event (DTMF). The CSE shall specify the digit string(s) for which
the instruction is valid. The arming and detection of the mid call event shall
be limited to the VPLMN;
\- Change of Position. The CSE may specify notification criteria. The arming
and detection of the Change of Position event shall be limited to the VPLMN;
\- Change of basic service.
\- The party in the call for which the event shall be detected and reported
(calling or called party);
\- The type of monitoring (control or notification).
\- Order in-band user interaction;
There shall be no restriction regarding the order of the above instructions or
the number of times each of the above instructions can be repeated. Once the
CSE has concluded issuing the above instructions, it shall issue one and only
one of the following instructions:
\- Continue the call processing, i.e. release the call;
\- Continue the call processing with modified information.
## 5.9 CSE initiated call release procedure
Following the CAMEL processing of the Call set-up request procedure it shall
be possible for the CSE to initiate a call release at any moment of the call.
To use this procedure:
\- The originating VPLMN shall have reported an initial service event to the
CSE and be waiting for instructions from the CSE, or
> \- The CSE shall be waiting for the report of any subsequent service event
> (with "Type of monitoring" set to control).
## 5.10 Void
## 5.11 Called party alert reporting procedure
The purpose of this procedure is to manage an outgoing call set-up at the time
when the called party is alerted.
If the CSE has activated this service event for this call and the called party
alert event occurs the IPLMN/VPLMN shall:
\- Suspend call processing, notify the CSE and await further instructions, or
\- Notify the CSE and continue call processing.
The following information shall be provided to the CSE:
\- Event met;
\- The party in the call for which the event is reported (only called party
applicable);
\- Type of monitoring.
When the IPLMN/VPLMN has made contact with the CSE, the CSE shall be able to
instruct the IPLMN/VPLMN to act as described below:
\- Perform charging activities;
\- Activate subsequent control service events for the call. The CSE shall have
the possibility to send the following information:
\- The service event which shall be detected and reported:
\- Calling party abandon;
\- Unsuccessful call establishment. In the case of no answer the CSE may
provide a no answer timer;
\- Call disconnection;
\- Mid call event (DTMF); The CSE shall specify the digit string(s) for which
the instruction is valid. The arming and detection of the mid call event shall
be limited to the VPLMN;
\- Change of Position. The CSE may specify notification criteria. The arming
and detection of the Change of Position event shall be limited to the VPLMN;
\- Called party connection
\- Change of basic service.
\- The party in the call for which the event shall be detected and reported;
\- The type of monitoring (control or notification).
\- Order in-band user interaction with the calling party.
There shall be no restriction regarding the order of the above instructions or
the number of times each of the above instructions can be repeated. Once the
CSE has concluded issuing the above instructions, it shall issue the following
instruction:
\- Continue the call processing.
## 5.12 Change of position procedure
When the CSE instructs the VPLMN to arm the change of position event it may
specify a list of up to 10 criteria against which the change of position shall
be matched. The VPLMN shall report the event when the subscriber's location
information changes and one of the criteria is met.
. Each element of the list of criteria contains either:
\- the identifier of a location which the subscriber enters or leaves. It is
specified as one of the following:
\- cell global id;
\- location area id;
\- service area id;
or one of the following types of handover:
\- \"inter-system handover\";
\- \"inter-PLMN handover\";
\- \"inter-MSC handover\".
If more than one criterion is met, then only one change of position event
shall be reported to the CSE.
If this list of criteria is not included in the instruction, the criteria upon
any change of position shall be regarded as fulfilled.
It shall be possible for the CSE to instruct the VPLMN to re-arm the change of
position event when it is encountered.
If the CSE has activated this service event for the served subscriber and a
change of position event occurs (as determined by the criteria for the change
of position procedure being satisfied) the VPLMN shall:
\- Notify the CSE and continue call processing.
The following information shall be provided to the CSE:
\- Event met;
\- Type of monitoring;
\- Event specific data;
\- Location information;
\- Charge result if charging supervision is provided.
When the VPLMN has made contact with the CSE, the CSE shall be able to
instruct the VPLMN to act as described below:
\- Perform charging activities;
\- Activate other control service events for the call. The CSE shall have the
possibility to send the following information:
\- The service event which shall be detected and reported:
\- Change of position. The CSE may specify notification criteria.
\- The party in the call for which the event shall be detected and reported;
\- The type of monitoring (notification);
\- Order in-band user interaction.
There shall be no restriction regarding the order of the above instructions or
the number of times each of the above instructions can be repeated.
## 5.13 Change of basic service
When the CSE has instructed the IPLMN/VPLMN to arm the change of basic service
event, the IPLMN/VPLMN shall report the event when the basic service changes.
It shall be possible for the CSE to instruct the IPLMN/VPLMN to re-arm the
change of basic service event when it is encountered. The CSE may arm this
event in the various phases of the call (as specified in this specification)--
however the IPLMN/VPLMN reports the basic service changes in the active phase
of the call only.
If the CSE has activated this service event for the served subscriber and a
change of basic service event occurs the IPLMN/VPLMN shall:
\- Notify the CSE and continue call processing.
The following information shall be provided to the CSE:
\- Event met;
\- Type of monitoring;
\- Event specific data;
> \- Basic service:
\- Charge result if charging supervision is provided:
When the IPLMN/VPLMN has made contact with the CSE, the CSE shall be able to
instruct the IPLMN/VPLMN to act as described below:
\- Perform charging activities;
\- Activate other control service events for the call. The CSE shall have the
possibility to send the following information:
\- The service event which shall be detected and reported:
\- Change of basic service.
\- The party in the call for which the event shall be detected and reported;
\- The type of monitoring (notification).
There shall be no restriction regarding the order of the above instructions or
the number of times each of the above instructions can be repeated.
# 6 Procedures for Mobile Terminated Calls
NOTE: Other information elements not listed in the following subclauses may be
necessary to meet some Stage 1 service requirements. Refer to the Stage 2
specification TS 23.078 for complete information element lists.
> In the following subclauses VPLMN applies to CAMEL3 only.
## 6.1 Initial service events
It shall be possible to specify which of the following initial service events
shall initiate contact with the CSE:
\- Terminating Attempt Authorised;
> \- Detection of unsuccessful call establishment.
>
> Unsuccessful call establishment may be caused by:
\- Called subscriber busy;
\- Called subscriber not reachable;
  * No answer from called subscriber.
Upon detection of unsuccessful call establishment no new relationship is
opened if there is already a dialogue opened due to same CSI.
## 6.2 Criteria for contact with the CSE
### 6.2.1 CSI criteria applicable on terminating attempt authorisation
It shall be possible for the HPLMN to specify a criterion which must be
satisfied before the CSE is contacted.
The following criterion may be defined:
\- A criterion on the basic service; this consists of a list of up to 5 basic
service codes for individual basic services or basic service groups. The HPLMN
may also choose not to define any criterion on the basic service.
The criterion on the basic service is satisfied if the basic service used for
the call corresponds to any basic service code defined in the criterion or if
no basic service criterion is specified.
On the incoming call request event procedure the CSE shall be contacted if the
criterion on the basic service is satisfied.
### 6.2.2 CSI criterion applicable on detection of unsuccessful call
establishment
A criterion on the failure reason may be defined. This consists of a list of
up to 5 failure reasons. A failure reason can denote a release cause value or
can denote that the HPLMN determined that the called subscriber was not
reachable. The criterion on the failure reason is satisfied if the reason for
failure of the call corresponds to any failure reason defined in the list or
if no criterion is defined.
## 6.3 Incoming call request procedure
The purpose of this procedure is to detect an incoming call request and allow
the CSE to modify the handling of the incoming call.
If (according to the CSI):
\- The subscriber is provisioned with a CAMEL based terminating service; and
\- The incoming call request event occurs
Then the IPLMN/VPLMN shall suspend call processing, make contact with the CSE
and await further instructions.
When the IPLMN/VPLMN has made contact with the CSE, the CSE shall be able to
instruct the IPLMN/VPLMN to act as described below:
\- Perform charging activities;
\- Activate subsequent control service events for the call. The CSE shall have
the possibility to send the following information:
\- The subsequent service event which shall be detected and reported:
\- Called party alert;
\- Called party connection;
\- Call disconnection;
\- Calling party abandon;
\- Unsuccessful call establishment. In the case of no answer the CSE may
provide a no answer timer.
\- Mid call event (DTMF). The CSE shall specify the digit string(s) for which
the instruction is valid. The arming and detection of the mid call event shall
be limited to the VPLMN;
\- Change of Position. The CSE may specify notification criteria. The arming
and detection of the Change of Position event shall be limited to the VPLMN;
\- Change of basic service.
\- The party in the call for which the event shall be detected and reported
(calling or called party);
\- The type of monitoring (control or notification).
\- Suppress tones and announcements which may be played to the calling party,
if an unsuccessful call establishment occurs.
\- Order in-band user interaction.
There shall be no restriction regarding the order of the above instructions or
the number of times each of the above instructions can be repeated. Once the
CSE has concluded issuing the above instructions, it shall issue one and only
one of the following instructions:
\- Bar the call (i.e. release the call before connection);
\- Continue the call processing;
\- Continue the call processing with modified information;
\- Continue the handling of the calling party without routeing the call to the
destination.
If the CSE instructs the IPLMN/VPLMN to continue the call processing with a
changed called party number, the CSE shall indicate whether the resulting call
shall be treated by the IPLMN/VPLMN as a forwarded call. Any forwarded call
resulting from a CSE Call Forwarding service may cause an invocation of any
mobile originated CAMEL based service in the IPLMN/VPLMN.
If the CSE instructs the IPLMN to allow the call processing with modified
information, the CSE may send to the IPLMN an alerting pattern in order to
alert the called subscriber in a specific manner. This alerting pattern shall
be transferred to the VPLMN.
## 6.4 Calling party abandon
The purpose of this subsequent procedure is to manage an incoming call set-up
at the time it is terminated by the calling party before the call is
established.
If the CSE has activated this service event for this call in notify mode and
the calling party abandon event occurs the IPLMN/VPLMN shall:
\- Notify the CSE and continue.
The following information shall be provided to the CSE:
\- Event met;
\- Type of monitoring.
If the CSE has activated this subsequent service event for the call in request
mode and the calling party abandon event occurs the IPLMN/VPLMN shall suspend
call processing, make contact with the CSE and await further instructions.
When the IPLMN/VPLMN has made contact with the CSE in request mode, the CSE
shall be able to instruct the IPLMN/VPLMN to act as described below:
\- Perform charging activities;
There shall be no restriction regarding the number of times the above
instruction can be repeated. Once the CSE has concluded issuing the above
instruction, it shall issue the following instruction:
\- Continue the call processing.
## 6.5 Unsuccessful call establishment
The purpose of this procedure is to manage an incoming call set-up at the time
when the call establishment is unsuccessful.
If no relationship for the given call exists and
\- The unsuccessful call establishment procedure is defined as an initial
service event (according to the CSI); and
\- The call attempt is unsuccessful; and
\- The triggering criteria are satisfied
Then the VPLMN/IPLMN shall suspend call processing, make contact with the CSE
and await further instructions.
If a relationship for the given call already exists and the CSE has activated
this subsequent service event for this call and the unsuccessful call
establishment event occurs the VPLMN/IPLMN shall:
\- Suspend call processing, notify the CSE and await further instructions, or
\- Notify the CSE and continue call processing.
In both cases above the following information shall be provided to the CSE:
\- Event met;
\- Type of monitoring;
\- Cause for unsuccessful call establishment:
> \- Not reachable;
>
> \- Busy;
>
> \- No answer;
>
> \- Forwarding notification.
If the unsuccessful call establishment procedure is armed as an initial
service event, and the IPLMN/VPLMN has made contact with the CSE, the CSE
shall be able to instruct the IPLMN/VPLMN to act as described below:
\- Perform charging activities;
\- Activate subsequent control service events for the call. The CSE shall have
the possibility to send the following information:
\- The subsequent service event which shall be detected and reported:
\- Called party alert;
\- Called party connection;
\- Call disconnection;
\- Calling party abandon;
\- Unsuccessful call establishment. In the case of no answer the CSE may
provide a no answer timer;
\- Mid call event (DTMF). The CSE shall specify the digit string(s) for which
the instruction is valid. The arming and detection of the mid call event shall
be limited to the VPLMN;
\- Change of Position. The CSE may specify notification criteria. The arming
and detection of the Change of Position event shall be limited to the VPLMN;
\- Change of basic service.
\- The party in the call for which the event shall be detected and reported
(calling or called party);
\- The type of monitoring (control or notification).
\- Order in-band user interaction.
There shall be no restriction regarding the order of the above instructions or
the number of times each of the above instructions can be repeated. Once the
CSE has concluded issuing the above instructions, it shall issue one and only
one of the following instructions:
\- Release the call;
\- Continue the call processing;
\- Continue the call processing with modified information.
## 6.6 Called party connection procedure
The purpose of this procedure is to manage an incoming call set-up at the time
when the called party answers and the call is successfully established.
If the CSE has activated this subsequent service event for this call and the
called party connection event occurs, the IPLMN/VPLMN shall:
\- Suspend call processing, notify the CSE and await further instructions, or
\- Notify the CSE and continue call processing.
The following information shall be provided to the CSE:
\- Event met;
\- The party in the call for which the event is reported (only called party
applicable);
  * The charge indicator which will be used in the Call Data Record if available;
\- Type of monitoring.
When the IPLMN/VPLMN has made contact with the CSE, the CSE shall be able to
instruct the IPLMN/VPLMN to act as described below.
\- Perform charging activities;
\- Activate subsequent control service events for the call. The CSE shall have
the possibility to send the following information:
\- The subsequent service event which shall be detected and reported:
\- (Call disconnection);
\- Mid call event (DTMF). The CSE shall specify the digit string(s) for which
the instruction is valid. The arming and detection of the mid call event shall
be limited to the VPLMN.
\- Change of Position. The CSE may specify notification criteria. The arming
and detection of the Change of Position event shall be limited to the VPLMN;
\- Change of basic service.
\- The party in the call for which the event shall be detected and reported
(calling or called party);
\- The type of monitoring (control or notification).
\- Order in-band user interaction;
There shall be no restriction regarding the order of the above instructions or
the number of times each of the above instructions can be repeated. Once the
CSE has concluded issuing the above instructions, it shall issue one and only
one of the following instructions:
\- Release the call;
\- Continue the call processing;
## 6.7 Mid Call procedure
When the CSE instructs the VPLMN to arm the mid-call event it shall specify a
criterion against which digits entered by the terminating subscriber using the
DTMF procedure shall be matched. It shall be possible for the CSE to instruct
the VPLMN to re-arm the mid-call event when it is encountered.
In the following each digit shall be taken from the ordered set (0 ‑ 9, *, #).
The criterion consists of a list defining:
  * The minimum number of digits to be collected, and
```{=html}
``` \- The maximum number of digits to be collected, and
  * The maximum delay between successive digits, and optionally
  * The digit(s) used to indicate the start of the input, and optionally
  * The digit(s) used to indicate the end of the input, and optionally
  * The digit(s) used to indicate that the input shall be cancelled.
The minimum and maximum number of digits to be collected includes the digit(s)
used to indicate the start and end of the input.
A digit string has been cancelled if:
\- The CSE has specified digit(s) used to indicate that the input shall be
cancelled, and
\- The specified digit(s) has/have been received from the user.
If the CSE has specified digit(s) used to indicate the start of the input,
then the input has started if:
\- The specified digit(s) has/have been received from the user, and
\- The digit string has not been cancelled.
If the CSE has not specified digit(s) used to indicate the start of the input,
then the input has started if:
\- At least one digit has been received from the user, and
\- The digit string has not been cancelled.
If the CSE has specified digit(s) used to indicate the end of the input, then
the input has ended if:
\- The specified digit(s) has/have been received from the user, or
\- The maximum number of digits has been received, or
\- The maximum delay between successive digits has been exceeded.
If the CSE has not specified digit(s) used to indicate the end of the input,
then the input has ended if:
\- The maximum number of digits has been received, or
\- The maximum delay between successive digits has been exceeded.
A digit string satisfies the criterion for the Mid call detection point if:
\- The input has started, and
\- The digit string contains at least the minimum number of digits, and
\- The input has ended.
Triggering of the mid-call event shall occur immediately after the criterion
has been satisfied. Once the triggering occurs the VPLMN shall disarm the mid-
call event.
Digits collected from the subscriber shall be relayed as DTMF towards the
destination subscriber independent of any CAMEL processing.
If the CSE has activated this service event for this call and a mid call event
(as determined by the criterion for the mid-call procedure being satisfied)
occurs the VPLMN shall:
\- Suspend call processing, notify the CSE and await further instructions, or
\- Notify the CSE and continue call processing.
The following information shall be provided to the CSE:
\- Event met;
\- The party in the call for which the event is reported;
\- Type of monitoring;
\- Event specific data:
\- Received DTMF digits.
When the VPLMN has made contact with the CSE, the CSE shall be able to
instruct the VPLMN to act as described below:
\- Perform charging activities
\- Activate other control service events for the call. The CSE shall have the
possibility to send the following information:
\- The service event which shall be detected and reported:
\- Call disconnection;
\- Mid call event (DTMF). The CSE shall specify the digit string(s) for which
the instruction is valid;
\- Change of Position. The CSE may specify notification criteria.
\- The party in the call for which the event shall be detected and reported
(calling or a called party);
\- The type of monitoring (control or notification).
\- Order in-band user interaction
There shall be no restriction regarding the order of the above instructions or
the number of times each of the above instructions can be repeated. Once the
CSE has concluded issuing the above instructions, it shall issue one and only
one of the following instructions:
  * Release the call;
\- Continue the call processing.
## 6.8 Call disconnection procedure
The purpose of this procedure is to manage the actions on disconnection of an
established call.
If the CSE has activated this subsequent service event for the call and the
call disconnection event occurs the IPLMN/VPLMN shall:
\- Suspend call processing, notify the CSE and await further instructions, or
\- Notify the CSE and continue call processing.
The following information shall be provided to the CSE:
\- Event met;
\- The party in the call for which the event is reported;
\- Type of monitoring;
\- Disconnection reason.
When the IPLMN/VPLMN has made contact with the CSE, the CSE shall be able to
instruct the IPLMN/VPLMN to act as described below.
\- Perform charging activities;
\- Activate subsequent control service events for the call. The CSE shall have
the possibility to send the following information:
\- The service subsequent event which shall be detected and reported:
\- Called party alert;
\- Called party connection;
\- Call disconnection;
\- Calling party abandon;
\- Unsuccessful call establishment. In the case of no answer the CSE may
provide a no answer timer;
\- Mid call event (DTMF). The CSE shall specify the digit string(s) for which
the instruction is valid. The arming and detection of the mid call event shall
be limited to the VPLMN;
\- Change of Position. The CSE may specify notification criteria. The arming
and detection of the Change of Position event shall be limited to the VPLMN;
\- Change of basic service.
\- The party in the call for which the event shall be detected and reported
(calling or called party);
\- The type of monitoring (control or notification).
\- Order in-band user interaction.
There shall be no restriction regarding the order of the above instructions or
the number of times each of the above instructions can be repeated. Once the
CSE has concluded issuing the above instructions, it shall issue one and only
one of the following instruction:
> \- Continue the call processing, i.e. release the call;
\- Continue the call processing with modified information.
## 6.9 CSE initiated call release procedure
Following the CAMEL processing of the incoming call request procedure it shall
be possible for the CSE to initiate a call release at any moment of the call.
To use this procedure:
\- The originating VPLMN shall have reported an initial service event to the
CSE and be waiting for instructions from the CSE, or
\- The CSE shall be waiting for the report of a subsequent service event (with
"Type of monitoring" set to control).
## 6.10 Called party alert reporting procedure
The purpose of this procedure is to manage an outgoing call set-up at the time
when the called party is alerted.
If the CSE has activated this service event for this call and the called party
alert event occurs the IPLMN/VPLMN shall:
\- Suspend call processing, notify the CSE and await further instructions, or
\- Notify the CSE and continue call processing.
The following information shall be provided to the CSE:
\- Event met;
\- The party in the call for which the event is reported (only called party
applicable);
\- Type of monitoring.
If the IPLMN/VPLMN reports the alerting event to the CSE, the location
information of the MS shall be provided to the CSE.
When the IPLMN/VPLMN has made contact with the CSE, the CSE shall be able to
instruct the IPLMN/VPLMN to act as described below:
\- Perform charging activities;
\- Activate subsequent control service events for the call. The CSE shall have
the possibility to send the following information:
\- The service event which shall be detected and reported:
\- Calling party abandon;
\- Unsuccessful call establishment. In the case of no answer the CSE may
provide a no answer timer;
\- Call disconnection;
\- Mid call event (DTMF); The CSE shall specify the digit string(s) for which
the instruction is valid. The arming and detection of the mid call event shall
be limited to the VPLMN;
\- Change of Position. The CSE may specify notification criteria. The arming
and detection of the Change of Position event shall be limited to the VPLMN;
\- Called party connection
\- Change of basic service.
\- The party in the call for which the event shall be detected and reported;
\- The type of monitoring (control or notification).
\- Order in-band user interaction with the calling party.
There shall be no restriction regarding the order of the above instructions or
the number of times each of the above instructions can be repeated. Once the
CSE has concluded issuing the above instructions, it shall issue the following
instruction:
\- Continue the call processing.
## 6.11 Void
## 6.12 Change of position procedure
When the CSE instructs the VPLMN to arm the change of position event it may
specify a list of up to 10 criteria against which the change of position shall
be matched. The VPLMN shall report the event when the subscriber's location
information changes and one of the criteria is met.
Each element of the list of criteria contains either:
\- the identifier of a location which the subscriber enters or leaves. It is
specified as one of the following:
\- cell global id;
\- location area id;
\- service area id
or one of the following types of handover:
\- \"inter-system handover\";
\- \"inter-PLMN handover\";
\- \"inter-MSC hand over\".
If more then one criterion is met, then only one change of position event
shall be reported to the CSE.
If this list of criteria is not included in the instruction, the criteria upon
any change of position shall be regarded as fulfilled.
It shall be possible for the CSE to instruct the VPLMN to re-arm the change of
position event when it is encountered.
If the CSE has activated this service event for the served subscriber and a
change of position event occurs (as determined by the criteria for the change
of position procedure being satisfied) the VPLMN shall:
\- Notify the CSE and continue call processing.
The following information shall be provided to the CSE:
\- Event met;
\- Type of monitoring;
\- Event specific data:
\- Location information.
\- Charge result if charging supervision is provided.
When the VPLMN has made contact with the CSE, the CSE shall be able to
instruct the VPLMN to act as described below:
\- Perform charging activities;
\- Activate other control service events for the call. The CSE shall have the
possibility to send the following information:
\- The service event which shall be detected and reported:
\- Change of position. The CSE may specify notification criteria.
\- The party in the call for which the event shall be detected and reported;
\- The type of monitoring (notification);
\- Order in-band user interaction.
There shall be no restriction regarding the order of the above instructions or
the number of times each of the above instructions can be repeated.
## 6.13 Change of basic service
When the CSE has instructed the IPLMN/VPLMN to arm the change of basic service
event, the IPLMN/VPLMN shall report the event when the basic service changes.
It shall be possible for the CSE to instruct the IPLMN/VPLMN to re-arm the
change of basic service event when it is encountered. The CSE may arm this
event in the various phases of the call (as specified in this specification)--
however the IPLMN/VPLMN reports the basic service changes in the active phase
of the call only.
If the CSE has activated this service event for the served subscriber and a
change of basic service event occurs the IPLMN/VPLMN shall:
\- Notify the CSE and continue call processing.
The following information shall be provided to the CSE:
\- Event met;
\- Type of monitoring;
\- Event specific data;
\- Basic service:
\- Charge result if charging supervision is provided:
When the IPLMN/VPLMN has made contact with the CSE, the CSE shall be able to
instruct the IPLMN/VPLMN to act as described below:
\- Perform charging activities;
\- Activate other control service events for the call. The CSE shall have the
possibility to send the following information:
\- The service event which shall be detected and reported:
\- Change of basic service.
\- The party in the call for which the event shall be detected and reported;
\- The type of monitoring (notification).
There shall be no restriction regarding the order of the above instructions or
the number of times each of the above instructions can be repeated.
# 7 Procedures for serving network dialled services
The purpose of this procedure is to detect a match between the called party
number and a stored network service number at the call set-up request. It is
to allow the CSE to modify the handling of the call set-up request. If this
procedure is triggered it shall happen after processing of Subscribed Dialled
Services triggered via the CSI. If any other CAMEL dialogue has changed the
called party number then the modified called party number is used for
conditional triggering check.
## 7.1 Initiation of contact with the CSE
If:
\- The call set up request occurs, and
\- The call set up request procedure is passed, and
\- The PLMN is provisioned with network based service information
Then the VPLMN shall suspend call processing, make contact with the CSE and
await further instructions.
## 7.2 Further processing of the call
If a relationship exists with a CSE, then when the serving network has made
contact with the CSE, the CSE shall be able to instruct the serving network to
act as described below:
\- Release the call;
\- Continue the call processing;
\- Continue the call processing with modified information;
\- Perform charging activities (the CSE is only allowed to include charging
data in the Call Data Record);
\- Order in-band user interaction. (Interaction between the service triggered
from previous triggering may be needed to avoid duplicated guidance etc.)
If no relationship exists with a CSE for the call, then when the serving
network has made contact with the CSE, the CSE shall be able to instruct the
serving network to act as described below:
\- Perform charging activities;
\- Activate subsequent control service events for the call. The CSE shall have
the possibility to send the following information:
\- The subsequent service event which shall be detected and reported:
\- Called party alert;
\- Called party connection;
\- Call disconnection;
\- Calling party abandon;
\- Unsuccessful call establishment. In the case of no answer the CSE may
provide a no answer timer;
\- Mid call event (DTMF). The CSE shall specify the digit string(s) for which
the instruction is valid. . The arming and detection of the mid call event
shall be limited to the VPLMN;
\- Change of Position. The CSE may specify notification criteria. The arming
and detection of the Change of Position event shall be limited to the VPLMN;
\- Change of basic service.
\- The party in the call for which the event shall be detected and reported
(calling or called party);
\- The type of monitoring (control or notification).
\- Order in-band user interaction.
There shall be no restriction regarding the order of the above instructions or
the number of times each of the above instructions can be repeated. Once the
CSE has concluded issuing the above instructions, it shall issue one and only
one of the following instructions:
\- Allow the call processing to continue unchanged;
\- Allow the call processing with modified information;
\- Continue the handling of the calling party without routeing the call to the
destination;
\- Release the call.
Due to interworking problems, the service operator shall ensure that sending
of e-values and call period control is not used by the other services in the
same call of the served subscriber with _Enhanced CSE capability for Dialled
Services_.
Further processing of the call continues as detailed in Section 5.3, and the
CSE contact initiated at this procedure is terminated.
# 8 Procedures for Call Party Handling
CPH procedures only apply to speech telephony (TS11) as defined in TS 22.003
[10]. For a SCUDIF call see clause 21.
CPH procedures apply to MO, MF, MT, VT, TO and CSE initiated calls. If the
served subscriber is involved in a CPH configuration controlled by her CSE,
then any further MO or MT call setup request involving the served subscriber
shall be handled by a separate relationship with the served subscriber\'s CSE.
This new relationship may lead to the creation of a further CPH configuration
for the served subscriber. The service logic for one CSE relationship is not
necessarily aware of what is happening in another CSE relationship involving
the same served subscriber.
It is not required to transfer a leg or a group of legs between separate CPH
configurations.
Where service logic involves Call Party Handling procedures, the Service
Interaction Indicators Two parameter should be used to manage interactions
with Supplementary Services (CF, CD and MPTY for each call leg and ECT and
HOLD for the served subscriber).
The CSE shall be able to add parties to, or remove parties from, the group.
Each party in this group can communicate with all other parties in the group.
The IPLMN/VPLMN shall support at least 6 parties (of which one may be a
Specialised Resource Function) in a group.
If a control relationship exists, the CSE may order in-band user interaction
with any held call party at any point during the active phase of the call leg.
Charging activities shall be possible during a CPH configuration as indicated
in clause 15.
## 8.1 CPH procedures for an existing call
### 8.1.1 Creating additional parties in the call
The purpose of this procedure is to allow the CSE to create additional parties
in a call at any point during that call. The CSE initiated call leg shall be
created in the held state in the IPLMN/VPLMN of the served subscriber.
If a control relationship exists, it shall be possible for the CSE to instruct
the IPLMN/VPLMN of the served subscriber to initiate a new call leg to an
additional party. The new call leg shall form part of the existing CPH
configuration.
If a CSE initiated new call leg is created within a CAMEL relationship for a
mobile originated call (MO case) or for a mobile terminating call in the VPLMN
(VT case), the CSE initiated new leg in the VPLMN shall be subject to the
Outgoing Call Barring Supplementary Services and the Outgoing Operator
Determined Barring categories. However the CSE shall be able to instruct the
VPLMN to suppress the invocation for the new leg of conditional barring of
outgoing calls by the call barring supplementary service and operator
determined barring as indicated in subclause 18.8.
The CSE shall be able to instruct the IPLMN to suppress the triggering of
terminating CAMEL-based services in the IPLMN for the additional party.
If the CSE sends a request to initiate a new call leg the events relating to
unsuccessful call establishment and answer should be armed by the CSE to
maintain a control relationship.
### 8.1.2 Placing an individual call party on hold
The purpose of this procedure is to allow the CSE to instruct the IPLMN/VPLMN
to place an individual call party on hold.
The CSE may instruct the IPLMN/VPLMN to put a call party on hold at any point
during the active phase of the call leg if a control relationship exists.
The CSE shall be able to instruct the IPLMN/VPLMN to send a notification
towards the held party indicating that she has been placed on hold. The
notification shall be a tone or an announcement.
NOTE: This procedure does not use the HOLD supplementary service, however the
notification message sent to the MS may be the same as for the HOLD
supplementary service. The CSE may use other procedures instead of, or as well
as, instructing the IPLMN/VPLMN to send a tone or announcement to notify the
held party that she has been placed on hold.
### 8.1.3 Releasing call parties
The purpose of this procedure is to allow the CSE to instruct the IPLMN/VPLMN
to release an individual call party or all the call parties in a CPH
configuration.
The CSE may instruct the IPLMN/VPLMN to release all the call parties in a CPH
configuration at any point in a call if a control relationship exists.
The CSE may instruct the IPLMN/VPLMN to release an individual CSE-initiated
call party at any point in a call if a control relationship exists.
If, at the initial service event, the CSE instructed the IPLMN/VPLMN not to
route the call directly to the destination, then the CSE may instruct the
IPLMN/VPLMN to release the calling party at any point in a call if a control
relationship exists.
If, at the initial service event, the CSE instructed the IPLMN/VPLMN to
proceed with the call as normal then the CSE may instruct the IPLMN/VPLMN to
release the calling party or the called party during the active phase of the
call only.
The release of the served subscriber shall not necessarily lead to the
disconnection of the other parties in the CPH configuration.
### 8.1.4 Connecting an individual call party to the group
The purpose of this procedure is to allow the CSE to instruct the IPLMN/VPLMN
to connect an individual call party to the group.
If, at the initial service event, the CSE instructed the IPLMN/VPLMN not to
route the call leg directly to the destination, then the CSE may instruct the
IPLMN/VPLMN to connect a separate held call party to the group at any point
during the alerting and active phases of the call leg if a control
relationship exists. The CSE may instruct the IPLMN/VPLMN to connect a held
call party to the group also if the following conditions are met;
\- a control relationship exists, and
\- the original call state model in the target call segment is either in the
Call set-up request procedure or Incoming call request procedure, and
\- the original outgoing leg of the target call segment has been disconnected.
If, at the initial service event, the CSE instructed the IPLMN/VPLMN to
proceed with the call as normal then the CSE may instruct the IPLMN/VPLMN to
connect a held call party to the group at any point during the alerting and
active phases of the call leg if a control relationship exists and at least
one call leg in the group has reached the active phase.
If the CSE has initiated the call, it may instruct the IPLMN/VPLMN to connect
another held call party to the group at any point during the alerting and
active phases of the call leg.
The CSE shall be able to instruct the IPLMN/VPLMN to send a notification
towards the previously held party indicating that she has been connected to
the group. The CSE shall be able to instruct the IPLMN/VPLMN to send a
notification towards the other party or parties in the group indicating that
an additional party has been connected to the group. The notification shall be
a tone or an announcement.
NOTE: The CSE may use other procedures instead of, or as well as, instructing
the IPLMN/VPLMN to send a tone or announcement to notify the previously held
party that she has been connected to the group. The same principle applies to
the notification towards the other party or parties in the group.
## 8.2 Creating a new call
The purpose of this procedure is to allow the CSE to create a new call to the
served subscriber.
It shall be possible for the CSE to instruct the IPLMN/VPLMN of the served
subscriber to initiate a new call on behalf of the served subscriber. The
IPLMN/VPLMN shall have the possibility to reject this request. The CSE shall
be able to instruct the HPLMN to suppress the invocation of Incoming call
barrings for a CSE initiated call.
The CSE shall be able to instruct the HPLMN to suppress the triggering of
terminating CAMEL-based services in the VPLMN for the served subscriber.
The CSE shall be able to instruct the IPLMN to suppress the triggering of
terminating CAMEL-based services in the IPLMN for the served subscriber.
If the CSE sends a request to initiate a call the events relating to
unsuccessful call establishment and answer should be armed by the CSE to
maintain a control relationship.
# 9 Procedures for SMS
## 9.1 Criteria for contact with the CSE
It shall be possible for the HPLMN to specify criteria which must be satisfied
before the CSE is contacted.
The following criteria may be defined:
### 9.1.1 CSI criteria applicable at Short message delivery
#### 9.1.1.1 CSI criteria applicable at SM delivery when MT SM attempt has
been received
CSI criteria may be defined for a subscriber for the MT SM delivery.
  * Criterion on the status report;
> This criterion can indicate:
  * The VPLMN shall trigger only in the case of a status report;
  * The VPLMN shall not trigger in the case of a status report.
When this criterion is not present this criterion is regarded as satisfied.
## 9.2 Short message submission request procedure
The purpose of this procedure is to detect an SMS set-up request and to allow
the CSE to modify the handling of the SMS set-up request.
The SMS set-up request may be circuit switched based or packet switched based.
If (according to the CSI):
\- The subscriber is provisioned with a CAMEL based SMS originating service;
and
\- The SMS set-up request occurs
Then the VPLMN shall suspend SMS processing, make contact with the CSE and
await further instructions.
When the VPLMN has made contact with the CSE, the CSE shall be able to
instruct the VPLMN to act as described below.
\- Perform charging activities;
\- Activate subsequent control service events for the SM submission. The CSE
shall have the possibility to send the following information:
\- The subsequent service event which shall be detected and reported:
\- Successful SM submission to the SMSC
\- Unsuccessful SM submission to the SMSC;
  * The type of monitoring.
There shall be no restriction regarding the order of the above instructions.
Once the CSE has concluded issuing the above instructions, it shall issue one
and only one of the following instructions:
\- Bar the SM submission;
\- Continue the submission;
\- Continue the SM submission with modified information. The CSE shall have
the possibility to send the following information:
\- Called Party Number;
\- Calling Party Number;
\- SMSC address.
If the SM submission is barred, the served subscriber shall be informed.
## 9.3 Successful Short Message submission procedure
The purpose of this procedure is to detect the successful submission of a
Short Message (SM) to the SMSC and to inform the CSE about it.
If the successful SM submission event occurs then the VPLMN shall suspend
processing, make contact with the CSE and await further instructions or send a
notification and continue.
When the VPLMN has made contact with the CSE, the CSE shall be able to
instruct the VPLMN to act as described below:
  * Perform charging activities.
Once the CSE has concluded performing charging activities, it shall issue the
following instruction:
  * Continue the processing.
## 9.4 Unsuccessful Short Message submission procedure
The purpose of this procedure is to detect the unsuccessful submission of a
Short Message (SM) to the SMSC and to inform the CSE about it.
If the unsuccessful SM submission event occurs then the VPLMN shall suspend
processing, make contact with the CSE and await further instructions or send a
notification and continue.
When the VPLMN has made contact with the CSE, the CSE shall be able to
instruct the VPLMN to act as described below:
  * Perform charging activities.
Once the CSE has concluded performing charging activities, it shall issue the
following instruction:
  * Continue the processing.
## 9.5 Short message delivery request procedure
The purpose of this procedure is to detect a SMS set-up request and allow the
CSE to modify the handling of the SMS set-up request.
The SMS set-up request may be circuit switched based or packet switched based.
If according to the CSI:
\- The subscriber is provisioned with a CAMEL based SMS terminating service,
and
\- The SMS set-up request occurs
When the VPLMN has made contact with the CSE, the CSE shall be able to
instruct the VPLMN to act as described below.
\- Perform charging activities;
\- Activate other control service events for the SM delivery. The CSE shall
have the possibility to send the following information:
\- The service event which shall be detected and reported:
\- Successful SM delivery to the MS;
  * Unsuccessful SM delivery to the MS.
There shall be no restriction regarding the order of the above instructions.
Once the CSE has concluded issuing the above instructions, it shall issue one
and only one of the following instructions:
\- Bar the SM delivery;
\- Continue the delivery;
\- Continue the SMS delivery with modified information. The CSE shall have the
possibility to send the following information:
\- Calling Party Number.
If the SM delivery is barred, the SMSC shall be informed.
## 9.6 Successful Short Message delivery procedure
The purpose of this procedure is to detect the successful delivery of a Short
Message (SM) to the MS and to inform the CSE about it.
If the successful SM delivery event occurs then the VPLMN shall suspend
processing, make contact with the CSE and await further instructions or send a
notification and continue.
When the VPLMN has made contact with the CSE, the CSE shall be able to
instruct the VPLMN to act as described below:
  * Perform charging activities.
Once the CSE has concluded performing charging activities, it shall issue the
following instruction:
  * Continue the processing.
## 9.7 Unsuccessful Short Message delivery procedure
The purpose of this procedure is to detect the unsuccessful delivery of a
Short Message (SM) to the MS and to inform the CSE about it.
If the unsuccessful SM delivery event occurs then the VPLMN shall suspend
processing, make contact with the CSE and await further instructions or send a
notification and continue.
When the VPLMN has made contact with the CSE, the CSE shall be able to
instruct the VPLMN to act as described below:
  * Perform charging activities.
Once the CSE has concluded performing charging activities, it shall issue the
following instruction:
  * Continue the processing.
# 9.8 Charging Procedures
CR Editor\'s note: The above should be Heading 2
### 9.8.1 Inclusion of Free Format data in CDR
CR Editor\'s note: The above should be Heading 3
The CSE may send free format data to the VPLMN, for inclusion in a CDR.
When sending the free format data to the VPLMN, the CSE may instruct the VPLMN
to
  * Overwrite the existing data in the CDR with the newly received free format data, or
  * Append the newly received free format data to the existing data in the CDR.
# 10 Procedures for GPRS Data Transmission
NOTE: Other information elements not listed in the following subclauses may be
necessary to meet some Stage 1 service requirements. Refer to the Stage 2
specification TS 23.078 for complete information element lists.
## 10.1 Initial service events
It shall be possible to specify the following initial service events which
shall initiate contact with the CSE:
\- Attach procedure: a subscriber requests to register to the GPRS network;
\- PDP Context Establishment: a subscriber requests the activation of a Packet
Data Protocol Context;
  * PDP Context Establishment Acknowledgement: the SGSN has received an acknowledgement from the GGSN for that request.
\- Change of Position (Session): a subscriber who has an active GPRS Session
changes position to another SGSN;
\- Change of Position (PDP Context): a subscriber who has an active PDP
Context changes position to another SGSN.
## 10.2 Void
## 10.3 Attach procedure
The purpose of this procedure is to detect a request from a GPRS subscriber to
attach to the data network and allow the CSE to modify the handling of the
attach request.
If (according to the CSI):
\- The subscriber is provisioned with a CAMEL based service, relevant for GPRS
data transmission; and
\- The attach request is set as a trigger detection; and
\- The attach request occurs
Then the VPLMN shall suspend attach processing, make contact with the CSE and
await further instructions.
When the VPLMN has made contact with the CSE, the CSE shall be able to
instruct the VPLMN to act as described below:
\- Activate subsequent control service events for the period being attached to
the data network. The CSE shall have the possibility to send the following
information:
\- The subsequent service event which shall be detected and reported:
\- PDP Context Establishment request;
\- PDP Context Establishment Acknowledgement;
\- Change of position (session);
\- Detach;
\- Type of monitoring
  * Perform charging activities (amongst others defining a time threshold). The charging activities shall apply to the GPRS Session.
There shall be no restriction regarding the number of times each of the above
instructions can be repeated. Once the CSE has concluded issuing the above
instructions, it shall issue one and only one of the following instructions:
\- Reject the attachment request;
\- Continue the processing.
## 10.4 PDP Context Establishment
The purpose of this procedure is to manage a request from the subscriber to
activate a Packet Data Protocol. . Multiple contacts to the CSE may be made in
parallel due to PDP Context Establishment events being detected whilst a GPRS
subscriber is attached to the network. If either (according to the CSI):
\- The subscriber is provisioned with a CAMEL based service relevant for GPRS
data transmission; and
\- The PDP activation request is set as a trigger detection, and
\- The PDP Activation request occurs
Or the CSE has activated this service event for the attached subscriber and
the PDP activation event occurs then the VPLMN shall either
\- Suspend processing, make contact with the CSE and await further
instructions, or
\- Send a notification and continue.
When the PDP Context Establishment event occurs, it shall be reported as a
Subsequent Service Event, if armed by the CSE. If it is not armed by the CSE,
it shall be reported as an Initial Service Event, if statically armed in the
subscription information.
### 10.4.1 PDP Context Establishment reported as Initial Service Event
When the VPLMN has made contact with the CSE, the CSE shall be able to
instruct the VPLMN to act as described below:
\- Activate subsequent control service events for the life of the PDP context.
The CSE shall have the possibility to send the following information:
\- The subsequent service event which shall be detected and reported:
\- Change of position (PDP Context);
\- PDP Context Establishment Acknowledgement;
\- PDP deactivation.
\- The type of monitoring.
\- Perform Charging Activities (amongst others defining a data or time
threshold). The charging activities shall apply to the PDP Context.
There shall be no restriction regarding the order of the above instructions or
the number of times each of the above instructions can be repeated. Once the
CSE has concluded issuing the above instructions, it shall issue one and only
one of the following instructions:
\- Release the PDP Context;
\- Continue the processing;
\- Continue the processing with modified information. The CSE shall have the
possibility to send the following information:
\- Access Point Name.
### 10.4.2 PDP Context Establishment reported as Subsequent Service Event
When the VPLMN has made contact with the CSE, the CSE shall be able to
instruct the VPLMN to act as described below:
\- Activate subsequent control service events for the life of the PDP context
or GPRS Session. The CSE shall have the possibility to send the following
information:
\- The subsequent service event which shall be detected and reported:
\- PDP Context Establishment Acknowledgement;
\- Change of position (PDP Context);
\- PDP deactivation;
\- Change of Position (Session);
\- Detach.
\- The type of monitoring.
\- Perform Charging Activities (amongst others defining a data or time
threshold).
There shall be no restriction regarding the order of the above instructions or
the number of times each of the above instructions can be repeated. Once the
CSE has concluded issuing the above instructions, it shall issue one and only
one of the following instructions:
\- Release the PDP Context;
\- Release the GPRS Session;
\- Continue the processing;
\- Continue the processing with modified information. The CSE shall have the
possibility to send the following information:
\- Access Point Name.
## 10.5 PDP Context Establishment Acknowledgement
The purpose of this procedure is to manage a confirmation from the GGSN to
activate a Packet Data Protocol. Multiple contacts to the CSE may be made in
parallel due to PDP Context Establishment Acknowledgement events being
detected whilst a GPRS subscriber is attached to the network.
If either (according to the CSI):
\- The subscriber is provisioned with a CAMEL based service relevant for GPRS
data transmission, and
\- The PDP Context Establishment acknowledgement is set as a trigger detection
point, and
\- The PDP Context Establishment Acknowledgement request occurs
Or the CSE has activated this service event for the attached and / or active
subscriber and the PDP activation acknowledgement event occurs then the VPLMN
shall either
\- Suspend processing, make contact with the CSE and await further
instructions, or
\- Send a notification and continue.
When the PDP Context Establishment Acknowledgement event occurs, it shall be
reported as a Subsequent Service Event, if armed by the CSE. If it is not
armed by the CSE, it shall be reported as an Initial Service Event, if
statically armed in the subscription information.
### 10.5.1 PDP Context Establishment Acknowledgement reported as an Initial
Service Event
When the VPLMN has made contact with the CSE, the CSE shall be able to
instruct the VPLMN to act as described below:
\- Activate subsequent control service events for the life of the PDP context.
The CSE shall have the possibility to send the following information:
\- The subsequent service event which shall be detected and reported:
\- Change of position (PDP Context);
\- PDP deactivation;
\- Type of monitoring
\- Perform Charging Activities (amongst others defining a data or time
threshold). The charging activities shall apply to the PDP Context.
There shall be no restriction regarding the order of the above instructions or
the number of times each of the above instructions can be repeated. Once the
CSE has concluded issuing the above instructions, it shall issue one and only
one of the following instructions:
\- Release the PDP Context,
\- Continue the processing.
### 10.5.2 PDP Context Establishment Acknowledgement reported as a Subsequent
Service Event in PDP Context relationship
When the VPLMN has made contact with the CSE, the CSE shall be able to
instruct the VPLMN to act as described below:
\- Activate subsequent control service events for the life of the PDP context.
The CSE shall have the possibility to send the following information:
\- The subsequent service event which shall be detected and reported:
\- Change of position (PDP Context);
\- PDP deactivation.
> \- Type of monitoring.
\- Perform Charging Activities (amongst others defining a data or time
threshold).\ The charging activities shall apply to the PDP Context.
There shall be no restriction regarding the order of the above instructions or
the number of times each of the above instructions can be repeated. Once the
CSE has concluded issuing the above instructions, it shall issue one and only
one of the following instructions:
\- Release the PDP Context;
\- Continue the processing.
### 10.5.3 PDP Context Establishment Acknowledgement reported as a Subsequent
Service Event within GPRS Session relationship (I)
This event is reported within a GPRS Session relationship and this is the
first event to be reported for this PDP Context. (The PDP Context
Establishment event for this PDP Context was not reported.)
When the VPLMN has made contact with the CSE, the CSE shall be able to
instruct the VPLMN to act as described below:
\- Activate subsequent control service events for the life of the PDP context
or GPRS Session. The CSE shall have the possibility to send the following
information:
\- The subsequent service event which shall be detected and reported:
\- Change of position (PDP Context);
\- PDP deactivation;
\- Change of Position (Session);
\- Detach.
> \- Type of monitoring.
\- Perform Charging Activities (amongst others defining a data or time
threshold).
There shall be no restriction regarding the order of the above instructions or
the number of times each of the above instructions can be repeated. Once the
CSE has concluded issuing the above instructions, it shall issue one and only
one of the following instructions:
\- Release the PDP Context;
\- Release the GPRS Session;
\- Continue the processing.
### 10.5.4 PDP Context Establishment Acknowledgement reported as a Subsequent
Service Event within GPRS Session relationship (II)
This event is reported within a GPRS Session relationship and this is not the
first event to be reported for this PDP Context. (The PDP Context
Establishment event for this PDP Context was already reported.)
When the VPLMN has made contact with the CSE, the CSE shall be able to
instruct the VPLMN to act as described below:
\- Activate subsequent control service events for the life of the PDP context
or GPRS Session. The CSE shall have the possibility to send the following
information:
\- The subsequent service event which shall be detected and reported:
\- Change of position (PDP Context);
\- PDP deactivation;
\- Change of Position (Session);
\- Detach.
> \- Type of monitoring.
\- Perform Charging Activities (amongst others defining a data or time
threshold).
There shall be no restriction regarding the order of the above instructions or
the number of times each of the above instructions can be repeated. Once the
CSE has concluded issuing the above instructions, it shall issue one and only
one of the following instructions:
\- Release the PDP Context;
\- Release the GPRS Session;
\- Continue the processing.
## 10.6 Change of Position Procedure
The purpose of this procedure is to detect a request from the GPRS subscriber
to update the routeing area. A change of position can be an intra-SGSN
routeing area update (update within the same SGSN) or an inter-SGSN routeing
area update (update from one SGSN to another SGSN). When an intra-SGSN
routeing area update occurs, then this event shall be reported as a Subsequent
Service Event, if it was armed by the CSE.
When an inter-SGSN routeing area update occurs, then this event shall be
reported as an Initial Service Event, if it was statically armed in the GPRS
Subscription data. In this case, the previous relationship shall be
terminated.
The change of position event can be armed and reported for a GPRS Session
relationship and for a PDP Context relationship.
### 10.6.1 Intra-SGSN Change of Position
If the CSE has activated this service event and a change of position occurs,
the VPLMN shall send a notification and continue.
### 10.6.2 Inter-SGSN Change of Position
If this event is statically armed and the inter-SGSN change of position event
occurs, then the VPLMN shall suspend processing, make contact with the CSE and
await further instructions.
When the VPLMN has made contact with the CSE, the CSE shall be able to
instruct the VPLMN to act as described below:
\- Activate subsequent control service events for the life of the PDP context
or GPRS Session. The CSE shall have the possibility to send the following
information:
\- The subsequent service event which shall be detected and reported:
\- PDP Context Establishment;
\- PDP Context Establishment Acknowledgement;
\- Change of position (PDP Context);
\- PDP deactivation;
\- Change of Position (Session):\ This subsequent service event may be armed
only if the Change of Position Initial Service Event was reported for a GPRS
Session;
\- Detach:\ This subsequent service event may be armed only if the Change of
Position Initial Service Event was reported for a GPRS Session.
> \- Type of monitoring.
\- Perform Charging Activities (amongst others defining a data or time
threshold).\ GPRS Session related charging activities may be instructed only
if the Change of Position Initial Service Event was reported for a GPRS
Session.
There shall be no restriction regarding the order of the above instructions or
the number of times each of the above instructions can be repeated. Once the
CSE has concluded issuing the above instructions, it shall issue one and only
one of the following instructions:
\- Release the PDP Context;
\- Release the GPRS Session;\ The Release GPRS Session instruction may be
given only if the Change of Position Initial Service Event was reported for a
GPRS Session.
\- Continue the processing.
## 10.7 Data Volume or Time Threshold Procedure
The purpose of this procedure is to control the amount of data transmitted by
and transmitted to the served subscriber or the used time per GPRS Session or
PDP Context. The threshold is valid either for the GPRS session or for one PDP
Context of the subscriber only. If the subscriber controls simultaneous PDP
Contexts, thresholds per GPRS session or PDP Context may be defined.
For correct performance, the threshold shall be available for the first time
as a response to a GPRS Session establishment (if valid for the GPRS Session)
or as a response to a PDP Context Establishment (if valid for the PDP
Context). Subsequent thresholds may be received immediately after the expiry
of the previous threshold or at change of QoS.
The type of threshold is indicated per GPRS session or PDP Context as:
\- A maximum amount of data transmitted by and transmitted to the subscriber;
\- A granted time to transmit and receive data.
A threshold is reached within a GPRS session or PDP Context, when:
\- The total amount of data transmitted by and transmitted to the subscriber
reaches the granted data volume, or
\- The allowed time for the GPRS Session or PDP Context has elapsed.
If the CSE has defined a threshold for a GPRS Session or PDP Context and the
threshold has been reached, then the VPLMN shall inform the CSE.
The VPLMN shall not suspend the transmission of data packets to and from the
GPRS terminal. The VPLMN shall immediately restart counting the amount of data
transmitted by and transmitted to the GPRS terminal and restart timing the
duration of the GPRS Session or PDP Context.
The following information shall be provided to the CSE if available:
  * Charge result (elapsed time or total amount of data transmitted);
```{=html}
``` \- The GPRS session or PDP Context for which the event is reported;
  * GPRS Session or PDP Context-Active indicator.
When the VPLMN has reported the reaching of the threshold to the CSE, the CSE
shall be able to do the following (assuming the continuation of the applicable
dialogue):
  * Perform charging activities (including the defining of a new threshold or time limit). GPRS Session related charging activities may be sent only if a GPRS Session related charging threshold was reported.
  * Activate subsequent control service events for the PDP Context or GPRS Session. The CSE shall have the possibility to send the following information:
\- The subsequent service event which shall be detected and reported:
\- PDP deactivation;
\- Change of Position (PDP Context);
\- Change of Position (Session): this event may be armed only if the PDP
deactivation event is reported within a GPRS Session relationship;
\- Detach; this event may be armed only if the data or time threshold event is
reported within a GPRS Session relationship.
  * The GPRS session or PDP Context for which the event shall be monitored and reported;
  * The type of monitoring (only monitor mode is allowed in this case).
There shall be no restriction regarding the order of the above instructions or
the number of times each of the above instructions can be repeated.
Once the CSE has concluded issuing the above instructions, issue one and only
one of the following instructions (provided the GPRS session or PDP context
has not been released):
  * Release the PDP Context;
  * Release the GPRS Session; this instruction may be given only if the data or time threshold event is reported within a GPRS Session relationship;
  * Continue the GPRS session or PDP Context.
## 10.8 PDP deactivation Procedure
The purpose of this procedure is to detect a request from the subscriber to
release a Packet Data Protocol.
If the CSE has activated this subsequent service event for the attached
subscriber and the PDP deactivation event occurs then the VPLMN shall suspend
processing, make contact with the CSE and await further instructions or send a
notification and continue.
The following information shall be provided to the CSE:
\- Event met;
\- The PDP Context for which the event is reported;
\- Type of monitoring.
When the VPLMN has made contact with the CSE, the CSE shall be able to
instruct the VPLMN to act as described below.
\- Activate subsequent control service events for the GPRS session. The CSE
shall have the possibility to send the following information:
  * The subsequent service event which shall be detected and reported:
\- Detach Procedure: this event may be armed only if the PDP deactivation
event is reported within a GPRS Session relationship;
> \- Change of Position (Session): this event may be armed only if the PDP
> deactivation event is reported within a GPRS Session relationship.
\- The type of monitoring.
\- Perform charging activities; GPRS Session related charging instructions may
be sent only if the PDP deactivation event is reported within a GPRS Session
relationship
There shall be no restriction regarding the order of the above instructions or
the number of times each of the above instructions can be repeated. Once the
CSE has concluded issuing the above instructions, it shall send one and only
one of the following instruction:
\- Release the GPRS Session: this instruction may be given only if the PDP
deactivation event is reported within a GPRS Session relationship;
\- Continue the processing.
## 10.9 Detach procedure
The purpose of this procedure is to detect a request from a GPRS subscriber to
detach from the data network.
If the CSE has activated this subsequent service event for the attached
subscriber and the Detach event occurs, then the VPLMN shall suspend
processing, make contact with the CSE and await further instructions or send a
notification and continue.
The following information shall be provided to the CSE, if available:
\- Event met;
\- Type of monitoring.
When the VPLMN has made contact with the CSE, the CSE shall be able to
instruct the VPLMN to act as described below.
\- Perform charging activities. Only Session related charging instructions may
be sent.
There shall be no restriction regarding the number of times the above
instruction can be repeated. Once the CSE has concluded issuing the above
instruction, it shall send the following instruction:
\- Continue the processing.
## 10.10 CSE Initiated GPRS Detach Procedure
Following the CAMEL processing of the GPRS attach procedure it shall be
possible for the CSE to initiate a GPRS detach at any time.
To use this procedure, there shall be a control relationship between the CSE
and the GPRS session.
## 10.11 CSE Initiated PDP Context Deactivation Procedure
Following the CAMEL processing of the PDP Context Establishment procedure or
PDP Context Establishment Acknowledgement procedure it shall be possible for
the CSE to initiate PDP Context deactivation at any time.
To use this procedure, there shall be a control relationship between the CSE
and the PDP Context.
## 10.12 Change of Quality of Service Procedure
The CSE may request the VPLMN to report a change in the Quality of Service
(QoS) for a specific PDP Context.
When a QoS change occurs, then the VPLMN shall send a notification to the CSE
and continue.
The following information shall be provided to the CSE:
\- Charge result -- this may be elapsed time or the total amount of data
transmitted by and transmitted to the subscriber\ \- Quality of Service;\ \-
PDP Context state.
When the CSE receives the notification of change of QoS, it may instruct the
VPLMN to act as follows:
\- Perform charging activities (including the defining of a new threshold).
GPRS Session related charging instructions may be sent only if the change of
PDP Context QoS event is reported within a GPRS Session relationship;
\- Activate subsequent control service events for the PDP Context or GPRS
Session. The CSE shall have the possibility to send the following information:
\- The subsequent service event which shall be detected and reported:
\- PDP deactivation;
\- Change of Position (PDP Context);
\- Change of Position (Session): this event may be armed only if the change of
PDP Context QoS event is reported within a GPRS Session relationship;
\- Detach Procedure: this event may be armed only if the change of PDP Context
QoS event is reported within a GPRS Session relationship.
\- The PDP Context for which the event shall be monitored and reported;
\- The type of monitoring (only monitor mode is allowed in this case).
There shall be no restriction regarding the order of the above instructions or
the number of times each of the above instructions can be repeated.
Once the CSE has concluded issuing the above instructions, it shall issue one
and only one of the following instructions:
  * Release the PDP Context;
  * Release the GPRS Session: this instruction may be given only if the change of PDP Context QoS event is reported within a GPRS Session relationship;
  * Continue the PDP Context.
## 10.13 Charging Procedures
The CSE can perform the following charging activities:
### 10.13.1 Advice of Charge
The CSE may send Charge Advice Information (CAI) elements to the SGSN.
NOTE: Support of Advice of Charge within GPRS is not supported in Release 5 or
previous releases. If the CSE sends CAI elements to an SGSN that does not
support the Advice of Charge supplementary service, the CAI elements shall be
ignored by the SGSN.
### 10.13.2 Inclusion of Free Format data in CDR
The CSE may send free format data to the SGSN, for inclusion in a CDR. The CSE
shall specify the GPRS session or PDP Context for which the free format data
is destined.
When sending the free format data to the VPLMN, the CSE may instruct the VPLMN
to
  * Overwrite the existing free format data for that GPRS session or PDP Context, or
  * Append the newly received free format data to the existing free format data.
### 10.13.3 Specify a threshold for transmitted data or used time
See section 10.7.
### 10.13.4 Request notification of change in Quality of Service
The CSE may request the VPLMN to notify the CSE when a change in Quality of
Service has occurred for a PDP Context.
# 11 Unused clause
# 12 Notification of non-traffic events to the CSE
## 12.1 Mobility management
It shall be possible to mark for a subscriber that a notification shall be
sent to the CSE when the VPLMN has completed the processing of any one or more
of the following mobility events:
\- For a CS subscriber:
\- Location area update of MS to a different VLR service area;
\- Location area update of MS within the same VLR service area;
\- MS-initiated detach (e.g. MS switched off);
\- Network initiated detach (periodic location update of MS failed);
\- Attach of MS (e.g.MS switched on, successful location update after network
initiated detach);
\- For a GPRS subscriber:
\- Routeing area update of MS to a different SGSN service area;
\- Routeing area update of MS within the same SGSN service area;
\- MS-initiated detach (e.g. MS switched off);
\- Network initiated detach;
\- Network initiated transfer to \"MS not reachable for paging\" (periodic
routeing area update of MS failed);
\- Attach of MS (e.g. MS switched on, successful routeing area update after
network initiated detach.
The notification shall contain the following information if available:
\- Event met;
  * Service Key;
\- IMSI;
\- Basic MSISDN;
\- Location information;
\- LSA identity;
\- CAMEL phases supported at the VPLMN.
## 12.2 Notification to CSE of change of subscriber data
It shall be possible to mark for a subscriber that a notification shall be
sent to the CSE when any of the following subscriber data are changed as a
result of a request from any entity except the CSE to which the notification
shall be sent:
\- CF SS data;
\- CB SS data;
\- CLIP SS data;
\- CLIR SS data
\- CW SS data;
\- CH SS data;
\- ECT SS data;
\- ODB data;
\- CAMEL subscription information.
One ore more CSEs may be defined to which the notification shall be sent.
## 12.3 Supplementary service invocation notification to CSE
It shall be possible to mark for a subscriber that a notification shall be
sent to the CSE when any of the following supplementary services are invoked:
\- ECT;
\- CD;
\- MPTY;
\- CCBS.
# 13 CSE interrogation and control of subscription data
## 13.1 Any time interrogation
It shall be possible for the CSE (as part of an OSS, including special
handling of mobile terminating calls) to interrogate the HLR for information
about a particular subscriber, for which it is entitled to do so (e.g. the
subscriber belongs to the same HPLMN as the CSE).
This may be information from the list below:
\- Subscriber status;
\- Location information (see section 22);
\- IMEI (with software version);
\- MS class (only in the CS domain);
\- GPRS MS class (only in the PS domain);
\- Call Forwarding SS data;
\- Call Barring SS data;
\- Calling Line Identification Presentation SS data;
\- Calling Line Identification Restriction SS data;
\- Call Wait SS data;
\- Call Hold SS data;
\- Explicit Call Transfer SS data;
\- Operator Determined Barring data;
\- CAMEL Subscription Information;
\- CAMEL phases supported at the VPLMN.
The CSE shall indicate in the request for subscriber information whether the
information is requested from the HPLMN, the VPLMN in the circuit switched
domain or the VPLMN in the packet switched domain.
The HPLMN shall have the possibility to reject any interrogation from any CSE.
## 13.2 Any time modification
It shall be possible for the CSE to modify user data for a particular
subscriber, for which it is entitled to do so (e.g. the subscriber belongs to
the same HPLMN as the CSE).
This shall be data from the list below:
\- Call Forwarding SS data;
\- Call Barring SS data;
\- Calling Line Identification Presentation SS data;
\- Calling Line Identification Restriction SS data;
\- Call Wait SS data;
\- Call Hold SS data;
\- Explicit Call Transfer SS data;
\- Operator Determined Barring data;
\- Activation/Deactivation of CAMEL Subscription Information.
The HPLMN shall have the possibility to reject any request for modification
from any CSE.
# 14 Subscriber interactions with the CSE
## 14.1 Announcement and tones insertion
As a part of the following procedures, it shall be possible for the CSE to
order the playing of announcements or tones to the calling subscriber:
\- The call set-up request procedure;
\- The unsuccessful call establishment procedure;
\- The call disconnection procedure;
\- The incoming call request procedure;
\- The called party alert reporting procedure.
In the active phase of the call leg and in the mid-call procedure it shall be
possible for the CSE to play tones and/or announcements to any held party or
the group as specified in clauses 5, 6, 8 and 24. It shall be possible to play
tones efficiently using local tone generators.
The HPLMN operator is responsible for the administration of announcements. If
there is an appropriate bilateral agreement the VPLMN operator may also
administer announcements.
## 14.2 Voice prompting and information collection
As a part of the call set-up request procedure, unsuccessful call
establishment procedure, call disconnection procedure and incoming call
request procedure it shall be possible for the CSE to order voice prompting
and information collection to the calling subscriber. It shall not be possible
to collect information from the user as part of the originating CAMEL handling
for a forwarded call.
In the active phase of the call leg and in the mid-call procedure it shall be
possible for the CSE to order voice prompting and information collection
towards any held party as specified in clauses 5, 6, 8 and 24.
## 14.3 Subscriber interaction by using USSD
It shall be possible for the CSE to initiate the sending of a USSD message to
the served subscriber at any time. It shall be possible for the CSE to receive
a served subscriber initiated USSD message at any time (see TS 22.030 [3] and
TS 22.090 [4]).
# 15 Charging Activities
The following general principles are valid for CAMEL based charging aspects:
\- Calls may be divided into call periods for the purpose of controlling the
call duration;
\- The management and the control of tariff switches is under the
responsibility of the HPLMN. There may be a tariff switch for the CSE control
of e-values and separate tariff switches for the control of call duration
(which apply per call leg).The time at which these tariff switches apply may
differ or the CSE control of e-values and for the control of the call
duration.;
\- The tariff switch time is indicated to the network in the form of a time
relative to the reception of the instruction.
  * In a CPH configuration, the following procedures shall apply per call party:
\- Inclusion in charging records of information received from the CSE
(subclause 15.2);
\- Support of additional charging information to the CSE (subclause 15.3);
\- CSE control of call duration (subclause 15.4).
  * The e values sent by the CSE are reported only to the served subscriber and only if this subscriber is connected to the CPH configuration (subclause 15.1).
## 15.1 CSE controlled e-values
If the subscriber is provisioned with a CAMEL based service and a contact
exists between the VPLMN and the CSE, the CSE shall be able to send e-values
for the Advice of Charge supplementary service. Those e-values represent the
charge applicable to the CPH configuration.
For the purpose of charge indication on the MS even when one (or more) tariff
switch occurs during the call, the CSE may send several sets of e-values to
the VPLMN, which will transmit them in sequence to the Mobile Station of the
served subscriber.
Before the call is answered, the CSE may send either one set or two sets of
e-values:
\- If one set is sent, then the set of e-values is applicable from the
beginning of the call, that is from the time any call leg is answered;
\- If two sets are sent, then:
\- A tariff switch time after which the second set becomes valid must also be
sent;
\- If any call leg is answered before the tariff switch time expires, then the
first set of e-values is applicable from the beginning of the call and the
second set of e-values is stored for future use;
\- If any call leg is answered after the tariff switch time expires, then the
first set of e-values is discarded and the second set of e-values is
applicable from the beginning of the call.
During the call, the CSE may send a new set of e-values either to be
transmitted directly to the mobile station or to be stored until the next
tariff switch is reached. The tariff switch time is sent together with the new
set of e‑values.
When the tariff switch time is reached, the stored set of e-values is sent
immediately to the mobile station.
CSE controlled e-values are not applicable to Trunk Originated CAMEL services.
## 15.2 Inclusion in charging records of information received from the CSE
The CSE shall be able at one or several active service events to download
free-format charging information to be transparently output to the call record
available at the IPLMN/VPLMN depending on the call scenario. The CSE can
download free-format charging information for each call leg separately.
## 15.3 Support of additional charging information to the CSE
It shall be possible for the CSE to request from the VPLMN/IPLMN a call
information report to be delivered at the termination of the call leg. The
report shall contain call duration and release cause. The CSE can request a
report for each call leg of the CPH configuration.
## 15.4 CSE control of call duration
The purpose of this procedure is to allow the CSE to monitor and influence the
call duration for each call leg independently of the other call legs in the
CPH configuration. A change in the CPH configuration may result in a revision
of the maximum call period duration for the altered call leg.
If the subscriber is provisioned with a CAMEL based service and a contact
between the IPLMN/VPLMN and the CSE exists, the CSE shall be able to instruct
the IPLMN/VPLMN, at the beginning of the call or during the monitoring of the
call, to act as described below:
a) Receive a maximum call period duration from the CSE for a call leg;
b) Receive a switch time after which the next tariff switch applies for a call
leg;
c) Receive sets of e-values for the served subscriber (for the purpose of AoC
controlled by the CSE).
The following combinations of the instructions are allowed:
> \- (a) or (a and b) or (a and c) or (b and c) or (a and b and c) or (c).
In the above combinations it shall be possible for the CSE to instruct
multiple values of (a) and/or (b).In case (a) the CSE shall be able to
instruct the IPLMN/VPLMN how to proceed when the maximum call period duration
has expired, i.e. release the call leg or allow the call leg to continue. In
both cases, a charging report shall be sent to the CSE. The CSE shall also be
able to instruct the IPLMN/VPLMN to play a tone before the maximum call period
duration is expired.
The CSE shall be able to instruct the IPLMN/VPLMN to begin playing of an
audible tone to the served subscriber at anytime before the maximum call
period time is expired.
The tone to be played shall consist of up to three audible bursts. A burst
shall consist of a single tone, or a sequence of two tones, or a sequence of
three tones. A normal speech path connecting all parties in the call shall be
established between bursts. The CSE shall be able to instruct the IPLMN/VPLMN:
\- The time before the maximum call period time expires when tone playing
shall start;
\- The number of bursts to be played (1, 2 or 3);
\- The time interval between bursts (maximum 120 seconds);
\- The number of tones in each burst (1, 2 or 3);
\- The duration of the tone in a burst;
\- The pause between the tone in a burst.
When the instruction sent by the CSE is received at the IPLMN/VPLMN as a
result of the call set up request procedure before the call is established,
the IPLMN/VPLMN shall immediately set the reference point for the next tariff
switch, if available.
When a call leg is answered, the IPLMN/VPLMN shall:
\- Start the timer for the first call period for that leg;
\- Send e-values, if available:
\- If one set of e-parameters were received from the CSE, then the set of
e-values is applicable from the beginning of the call, that is from the time
the first call leg is answered;
\- If two sets of e-parameters were received from the CSE, then:
\- A tariff switch time when the second set becomes valid must be also sent;
\- The first set of e-values is applicable from the beginning of the call
(that is from the time the first call leg is answered) except in the case
where the tariff switch time occurs before the first call leg is answered, in
which case the second set of e-values is applicable at the beginning of the
call.
When the reference point for the tariff switch is reached, the stored set of
e-values is sent immediately to the mobile station, if available.
When the end of a call period is reached, the IPLMN/VPLMN shall report to the
CSE:
\- If no tariff switch has occurred since the call leg was answered or since
the call was modified by a CPH procedure:
\- Report the elapsed time since the call leg was answered or modified by a
CPH procedure to the CSE;
\- If a tariff switch has occurred since the call leg was answered or since
the call was modified by a CPH procedure:
\- Report the elapsed time since the last tariff switch has applied;
\- Report the elapsed time from when the call leg was answered or modified by
a CPH procedure or from when the previous tariff switch occurred to the time
when the most recent tariff switch occurred.
When the IPLMN/VPLMN has made contact with the CSE, the CSE shall be able to
instruct the VPLMN to act as described below:
\- Perform charging activities;
\- Activate subsequent control service events for the call. The CSE shall have
the possibility to send the following information:
\- The subsequent service event which shall be detected and reported (Call
disconnection);
\- The party in the call for which the event shall be detected and reported
(calling or called party).
\- The type of monitoring (control or notification).
There shall be no restriction regarding the order of the above instructions or
the number of times each of the above instructions can be repeated. Once the
CSE has concluded issuing the above instructions, it shall issue one and only
one of the following instructions:
\- Release the call;
\- Continue the call processing.
At the end of a call period and after the relevant information was sent to the
CSE, the IPLMN/VPLMN may receive instructions applicable to for the next call
period for the call leg:
\- The timing of the new call period shall start as soon as the previous call
period is ended;
\- The timing since the call leg was answered or the last tariff switch
occurred shall keep on running;
\- If the instruction contains an indication for a new tariff switch during
the call period, the IPLMN/VPLMN shall set the reference point for the next
tariff switch and store the new set of e-values, if available.
When the reference point for the tariff switch is reached, the stored set of
e-values (if available) is sent immediately to the mobile station.
When the call leg is released, the IPLMN/VPLMN shall report to the CSE:
\- If no tariff switch has occurred since the call leg was answered or since
the call was modified by a CPH procedure:
\- The elapsed time since the call leg was answered or modifiied by a CPH
procedure.
\- If a tariff switch has occurred since the call leg was answered or since
the call was modified by a CPH procedure:
\- The elapsed time since the last tariff switch occurred,
\- The elapsed time from when the call leg was answered or modified by a CPH
procedure or from when the previous tariff switch occurred to the time when
the most recent tariff switch occurred.
In addition, the report to the CSE shall always contain an indication of
whether the call leg is active or held.
The following figure explains the division of a call leg into separate call
periods and shows which information is sent and when from the IPLMN/VPLMN to
the CSE.
Figure 1: CSE control of call duration
**Reference Point 1** : when the call leg is answered, tariff 1 applies
**Reference Point 2** : the point in time when tariff 2 applies
**Reference Point 3** : the point in time when tariff 3 applies
A call period is a certain time part of an ongoing call. The duration of a
call period is limited by the granted time from the CSE.
Timers indicating the maximum duration (or granted time) for the call periods
are called Tx (x is the number of the call period).
Timers indicating the duration until the next tariff applies are called TSx (x
is the number of the tariff).
Timers indicating the elapsed time in a certain tariff are called TSxy (x is
the number of the tariff and y is the elapsed time since the previous
reference point).
When a call period is ended, the elapsed time in each tariff is reported to
the CSE.
At the end of the call period any timer indicating the duration until the next
tariff switch for this call leg is discarded.
If the report is not confirmed by the CSE within a specified time, the
IPLMN/VPLMN shall release the call leg.
The procedure may be repeated sequentially, i.e. when a report is sent to the
CSE, the CSE may instruct the IPLMN/VPLMN to monitor the call for a further
period.
# 16 Exceptional procedures or unsuccessful outcome
## 16.1 Roaming in non-supporting networks
The HPLMN shall control handling of roaming, when a CAMEL subscriber attempts
to register in a network not supporting CAMEL without relying on extra
functionality in network entities not supporting CAMEL. The HPLMN can decide
for each subscriber whether to allow roaming, or deny individual services
(e.g. by applying ODB or denying location up-date).
If the HPLMN allows roaming, the OSSs are not supported for the roaming
subscriber.
## 16.2 Call Set-up from a non-supporting interrogating PLMN
If the CAMEL feature is not supported in the IPLMN the following will happen:
\- Mobile originating calls:
Not applicable.
\- Mobile terminating calls:
Mobile terminating OSSs are not supported in the IPLMN if the HPLMN decides to
allow the MT call attempt. The HPLMN may also decide to bar the incoming call
attempt, or force the routeing interrogation to take place in the HPLMN.
## 16.3 Roaming in a VPLMN which supports a lower phase of CAMEL
If a CAMEL subscriber attempts to register in a VPLMN which supports CAMEL,
the VPLMN shall indicate in the registration request to the HPLMN the phase of
CAMEL which the VPLMN supports. If the VPLMN supports only a CAMEL phase which
is lower than the one subscribed the HPLMN shall take such action (including
denying the registration request or transferring to the VPLMN subscription
information appropriate to the CAMEL phase supported in the VPLMN) as may be
decided by the HPLMN operator. If a certain service requires a certain CAMEL
phase (e.g. MO SMS requires at least CAMEL phase 3) and the VPLMN does not
support that CAMEL phase, the HPLMN may decide to deny roaming or allow
roaming without that particular CAMEL OSS.
## 16.4 Service attempt from a VPLMN which supports a lower phase of CAMEL
If the served subscriber requests a basic service (call, short message, GPRS
attach, GPRS PDP context etc.) which requires the VPLMN to contact the CSE,
the VPLMN shall indicate to the CSE which phase of CAMEL has been negotiated
between the HPLMN and the VPLMN for this service. If the VPLMN supports a
CAMEL phase which is lower than the one subscribed and the CSE determines that
as a consequence a service which is provisioned for the subscriber will not
operate correctly, the CSE shall take such action (including denying the call
request or handling the call using only CAMEL capabilities supported in the
VPLMN) as may be decided by the CSE operator.
## 16.5 Call setup from an IPLMN which supports a lower phase of CAMEL
The IPLMN shall indicate to the HPLMN which phases of CAMEL it supports. The
HPLMN may decide to bar the incoming call attempt before contacting the CSE,
or force the routeing interrogation to take place in the HPLMN. When the IPLMN
contacts the CSE for instructions to handle an MT call, the IPLMN shall
indicate to the CSE the phase of CAMEL which has been negotiated between the
HPLMN and the IPLMN for this call. If the IPLMN supports a lower CAMEL phase
than the one negotiated between the HPLMN and the IPLMN and the CSE determines
that as a consequence a service which is provisioned for the subscriber will
not operate correctly, the CSE shall take such action (including denying the
call request or handling the call using only CAMEL capabilities negotiated
between the HPLMN and the IPLMN) as may be decided by the CSE operator.
## 16.6 Roaming in a VPLMN with a partial implementation of CAMEL Phase 4
In principle, CAMEL based services require support of subscription information
in the VPLMN and support for certain information flows between service logic
(at the CSE) and the VPLMN. Subscription information are exchanged when a
subscriber attempts to register in a VPLMN. Information flows are started when
the VPLMN initiates contact to the CSE. Those procedures are de-coupled and
happen at different points in time. If both procedures are supported
sufficiently, services may be offered to a subscriber. The following chapter
identifies requirements for a VPLMN to indicate its support of CAMEL Phase 4
features.
If a CAMEL subscriber attempts to register in a VPLMN which supports at least
one CAMEL Phase 4 CSI or the enhanced CSE interrogation and control of
subscription data, the VPLMN indicates in the registration request to the
HPLMN the phase of CAMEL which the VPLMN supports (i.e. at least Phase 4). In
addition, the VPLMN indicates which CAMEL Phase 4 CSIs or enhanced CSE
interrogation and control of subscription it offers.
A VPLMN supports a CAMEL Phase 4 CSI if it is capable of initiating contact
with the CSE due to that CSI using CAMEL Phase 4 procedures.
If the VPLMN does not support all CSIs or the enhanced CSE interrogation and
control of subscription data of CAMEL phase 4, the HPLMN shall take such
action (including denying the registration request or transferring to the
VPLMN subscription information appropriate to the CAMEL Phase 4 CSI offered by
the VPLMN) as may be decided by the HPLMN operator. If a certain service
requires a certain CAMEL Phase 4 CSI (e.g. MT SMS handling) and the VPLMN does
not support that CAMEL Phase 4 CSI, the HPLMN may decide to deny roaming or
allow roaming without that particular CAMEL OSS.
If the VPLMN initiates contact with the CSE, or acknowledges a CSE initiated
contact, the VPLMN indicates the CAMEL Phase 4 functionality offered to the
CSE. This functionality should not contradict the capabilities the VPLMN has
offered to the HPLMN at the registration time. Examples of functionality which
can be offered to the CSE are:
  * Creating additional parties in a call;
  * Placing an individual call party on hold;
  * Mid Call procedure;
  * Inclusion of flexible tone injection;
  * etc.
## 16.7 Call setup attempt from an IPLMN which supports only a partial
implementation of CAMEL Phase 4
If the IPLMN supports at least one CAMEL Phase 4 CSI, it indicates to the
HPLMN (e.g. in the request for routeing information) which CAMEL Phase 4 CSIs
it supports.
If the IPLMN does not support all CSIs of CAMEL phase 4, the HPLMN shall take
such action (including barring the incoming call request or transferring to
the IPLMN subscription information appropriate to the CAMEL Phase 4 CSI
offered in the IPLMN) as may be decided by the HPLMN operator. If a certain
service requires a specific CAMEL Phase 4 CSI and the IPLMN does not support
that specific CAMEL Phase 4 CSI, the HPLMN may decide to bar the incoming call
attempt, or force the routeing interrogation to take place in the HPLMN, or
allow the MT call attempt without that particular CAMEL OSS.
The same principles for the IPLMN shall apply as defined in chapter 16.6 for
the VPLMN.
# 17 CSE related congestion control
It shall be possible for the CSE to suppress either all or some CAMEL
interrogations from a V/IPLMN, when the V/IPLMN is the subscriber's HPLMN. If
there is a bilateral agreement the operators may also apply congestion control
between different networks.
The criterion to suppress CAMEL interrogations is one of:
  1. called address or,
  2. service key or,
  3. called address and service key or,
  4. calling address and service key
If the congestion control prevents contact with the CSE, the V/IPLMN shall
proceed in accordance with the Default Call Handling.
Congestion Control is applicable to CAMEL control of circuit switched call. It
is not applicable to CAMEL control of GPRS session and PDP context, and to
CAMEL control of short message.
# 18 Interactions with supplementary services
## 18.1 General
This subclause defines the interactions between supplementary services and the
CAMEL feature. However, it should be noted that the most effective way to
control those service interactions is through managing the provisioning of
services. Where possible, subscribers provisioned with services using the
CAMEL feature shall not be provisioned with services having an adverse
interaction with the CAMEL based services. Supplementary services shall be
assumed not to have any knowledge of CAMEL based services.
In general, call independent supplementary service operations (registration,
erasure, activation, deactivation and interrogation) are not modified by
CAMEL. The exceptions to this for CAMEL phase 2 and later are the call
forwarding services, described in subclause 18.3..
## 18.2 Line Identification
### 18.2.1 Calling Line Identification Presentation (CLIP)
The CSE shall be able to create or modify an additional calling line identity
(additional calling party number) which is presented to the called subscriber
via the CLIP supplementary service. There shall be no restriction to the
format of the additional calling line identity determined by the CSE.
The CSE shall not be able to modify the calling line identity (calling party
number).
### 18.2.2 Calling Line Identification Restriction (CLIR)
The CSE shall be able to send to the IPLMN/VPLMN an instruction that the
presentation indicator of the calling party number shall be set to
"Presentation Restricted".
### 18.2.3 Connected Line Identification Presentation (COLP)
No interaction. The CSE shall not be able to change the connected line
identity.
The CSE shall be able to send an indication that the identity returned to the
calling subscriber\'s serving PLMN as the connected number shall be the called
IN number.
### 18.2.4 Connected Line Identification Restriction (COLR)
The CSE shall be able to send to the VPLMN/IPLMN:
\- An indication that the presentation indicator of the connected number shall
be set to "presentation restricted", or
\- An indication that the presentation indicator of the called IN number shall
be set to "presentation restricted" (this is coupled with the indication that
the identity returned to the calling subscriber\'s serving PLMN as the
connected number shall be the called IN number), or
\- An indication that the presentation indicator of the called IN number shall
be set to "presentation allowed" (this is coupled with the indication that the
identity returned to the calling subscriber\'s serving PLMN as the connected
number shall be the called IN number).
## 18.3 Call Forwarding
For the registration of call forwarding supplementary services the network
shall accept any forwarded to number for a subscriber who is provided with a
TIF-CSI. In this case the HPLMN shall treat the forwarded-to number
transparently at the time of registration, i.e. it shall not perform validity
checks or translate the format of the number. The forwarding PLMN shall treat
the forwarded-to number transparently when the call forwarding service is
invoked. The CSE may modify the forwarded-to number within the MO CAMEL
Service provided for the subscriber when the call forwarding service is
invoked.
NOTE: Network operators should ensure that the TIF-CSI is provided only to
subscribers who are provided with an MO CAMEL service which is capable of
translating the registered forwarded-to number.
If the forwarding PLMN does not support CAMEL phase 2, the HPLMN shall
consider the call forwarding service as not registered if the forwarded-to
number is not stored in international format.
NOTE: If the served subscriber requires invocation of call forwarding services
even when the forwarding PLMN does not support CAMEL phase 2, she has to
register a forwarded-to number in E.164 international format.
NOTE: Network operators should be aware that unpredictable service behaviour
could be experienced if the service events for 'Busy', 'Not Reachable' or 'No
Answer' are activated when the corresponding conditional call forwarding
supplementary service is active.
### 18.3.1 Call Forwarding Unconditional (CFU)
The Call Forwarding Unconditional service will be invoked after any
terminating CAMEL based service. A forwarded call resulting from a Call
Forwarding supplementary service may cause invocation of mobile originated
CAMEL based services.
### 18.3.2 Call Forwarding on Busy (CFB)
As for Call Forwarding Unconditional (see subclause 18.3.1).
### 18.3.3 Call Forwarding on No Reply (CFNRy)
As for Call Forwarding Unconditional (see subclause 18.3.1).
### 18.3.4 Call Forwarding on Not Reachable (CFNRc)
As for Call Forwarding Unconditional (see subclause 18.3.1).
## 18.4 Call Completion
### 18.4.1 Call Hold (CH)
For both originating and terminating calls, the Call Hold service is invoked
after the CAMEL feature is invoked. A call created when a call has been put on
hold may be subject to the CAMEL feature in the same way as a normal mobile
originating call.
When a call is established, the CSE shall be able to instruct the VPLMN of the
served subscriber whether to prohibit Call Hold.
### 18.4.2 Call Waiting (CW)
Incoming, waiting calls are treated by the CSE in the same way as mobile
terminating calls which encounter an idle subscriber.
When a call is established the CSE shall be able to instruct the VPLMN of the
served subscriber whether to prohibit Call Waiting for any additional MT calls
for the duration of the established call.
## 18.5 Multi Party (MPTY)
A MultiParty call may include one or more call legs subject to CAMEL based
services.
If a call leg is subject to CAMEL based services the CSE shall be able to
instruct the VPLMN of the served subscriber whether to prohibit the inclusion
of that leg in a MultiParty call.
## 18.6 Closed User Group (CUG)
When a terminating call with CUG information is received for a CAMEL marked
subscriber, if the terminating CAMEL based service attempts to modify the
called party number then:
\- If the called subscriber subscribes to CUG then the IPLMN shall release the
call to the calling party;
\- If the called subscriber does not subscribe to CUG then the IPLMN shall
continue the call establishment to the modified called party number.
For an MO call, an MF call, or an MT call subject to CAMEL forwarding, with
CUG information, the CSE shall be able to instruct the VPLMN/IPLMN to:
  * Continue the call establishment with the original CUG information, or
  * Use modified CUG information for that call, or
  * Remove CUG information from the call (i.e. continue the call as a non-CUG call).
For an MT call which is not subject to CAMEL forwarding, the CSE shall not be
able to modify the CUG information for the call.
When an MT call with CUG information is received for a CAMEL marked
subscriber, if the terminating CAMEL based service attempts to modify the
called party number then:
\- If the called subscriber subscribes to CUG then the VPLMN shall release the
call to the calling party;
\- If the called subscriber does not subscribe to CUG then the VPLMN shall
continue the call establishment to the destination defined by the modified
called party number.
## 18.7 Advice of Charge (AoC)
Advice of Charge is not guaranteed to operate correctly for calls subject to
CAMEL phase 1 based services. It is recommended that subscribers are not
provisioned with Advice of Charge and any CAMEL based service for which there
is an adverse interaction.
If CAMEL phase 2 or higher is supported and the phase 2 or higher charging
function \"CSE controlled e-values\" is used, the VPLMN shall use the received
e-values from the CSE for the purpose of the AoC supplementary service. Once
the VPLMN has received e-values from the CSE, only CSE provided e-values are
applicable for this call. The e-values shall be sent by the VPLMN to the MS
only if the served subscriber is provided with the AoC supplementary service
according to TS 22.068. CAMEL phase 3 or higher allows the CSE to modify
e-values for MO and MT calls.
## 18.8 Call Barring
NOTE: CAMEL may be used to establish forwarded-legs and CAMEL based re-
routing-legs which violate conditional outgoing call barring and ODB services.
Network operators should take care to avoid problems which may arise because
of this interaction.
### 18.8.1 Barring of all outgoing calls
#### 18.8.1.1 Mobile originated calls
No interaction. The Barring of all outgoing calls supplementary service will
be invoked. Thus, originating CAMEL based services will not be invoked.
#### 18.8.1.2 Forwarded Calls
No interaction. If the Barring of all outgoing calls supplementary service is
active and operative, it shall prevent the registration or activation of Call
Forwarding as specified in TS 22.082.
#### 18.8.1.3 Mobile Originated Short Message Service
No interaction. The Barring of all outgoing calls supplementary service will
be invoked. No CAMEL service for Mobile Originated SMS will be invoked.
### 18.8.2 Barring of outgoing international calls
#### 18.8.2.1 Mobile originated calls
. Any originating CAMEL based services shall be invoked before the Barring of
outgoing international calls supplementary service.
#### 18.8.2.2 Forwarded Calls
For CAMEL phase 1 based services there shall be no interaction. In this case,
the interaction between call forwarding and call barring is not modified by
CAMEL. This means that the interaction is applied prior to the invocation of
call forwarding. When call forwarding is invoked (possibly with originating
CAMEL services in the forwarding leg) then the VPLMN or IPLMN shall not apply
outgoing call barring services.
For CAMEL Phase 2 or higher, if the served subscriber is provided with TIF-CSI
the network shall not check the interaction of call forwarding services with
this barring program, i.e.
\- The registration or activation of Call Forwarding is accepted even if this
barring program is active and operative;
\- The activation of this barring program is accepted even if a Call
Forwarding supplementary service is active.
When Call Forwarding is invoked (possibly with originating CAMEL services in
the forwarding leg) the VPLMN or IPLMN shall not invoke outgoing Call Barring
services.
The following note applies to CAMEL phase 1 only
NOTE: This behaviour means that CAMEL may be used to establish forwarded-legs
which violate conditional outgoing call barring and ODB services. Network
operators should take care to avoid problems which may arise because of this
interaction.
#### 18.8.2.3 Mobile Originated Short Message Service
The CAMEL Service for Mobile Originated SMS shall be invoked before the
Barring of outgoing international calls supplementary service.
### 18.8.3 Barring of outgoing international calls except those directed to
the HPLMN country
As for Barring of outgoing international calls (see subclause 18.8.2).
### 18.8.4 Barring of all incoming calls
#### 18.8.4.1 Mobile Terminated calls
No interaction. The Barring of all incoming calls supplementary service shall
be invoked. Thus, terminating CAMEL based services will not be invoked.
#### 18.8.4.2 Mobile Terminated Short Message Service
No interaction. The Barring of all incoming calls supplementary service shall
be invoked. No CAMEL service for Mobile Terminated SMS will be invoked.
### 18.8.5 Barring of incoming calls when roaming
Same as Barring of all incoming calls (see subclause 18.8.4).
## 18.9 Explicit Call Transfer (ECT)
One or both legs of an ECT call may be subject to CAMEL based services.
If a call leg is subject to CAMEL based services the CSE shall be able to
instruct the VPLMN of the served subscriber whether to prohibit the inclusion
of that leg in an explicitly transferred call.
## 18.10 Completion of Call to Busy Subscriber (CCBS)
When a call is established the CSE shall be able to instruct the VPLMN/IPLMN
whether Subscriber A is prohibited from activating a CCBS request if a
subsequent "CCBS possible" indication is received from the destination network
or the terminating served subscriber is busy.
## 18.11 Call Deflection
When an MT call is established the CSE shall be able to instruct the VPLMN of
the served subscriber whether to prohibit Call Deflection.
## 18.12 User-to-User Signalling (UUS)
User-to-User Service activation requests and User-to-User Information received
in call control messages may be passed to the CSE.
# 19 Interactions with Operator Determined Barring (ODB)
## 19.1 Barring of all outgoing calls
Same principle as for subclause 18.8.1.
## 19.2 Barring of all outgoing international calls
Same principle as for subclause 18.8.2.
## 19.3 Barring of all outgoing international calls except those directed to
the home PLMN country
Same principle as for subclause 18.8.3.
## 19.4 Barring of outgoing calls when roaming outside the home PLMN country
If the subscriber is outside her home PLMN country the Barring of outgoing
calls when roaming outside the home PLMN country service will be invoked.
Thus, originating CAMEL based services will not be invoked.
## 19.5 Barring of outgoing inter-zonal calls
Same principle as for subclause 18.8.2.
## 19.6 Barring of outgoing inter-zonal calls except those directed to the
home PLMN country
Same principle as for subclause 18.8.2.
## 19.7 Barring of outgoing international calls except those directed to the
home PLMN country AND barring of outgoing inter-zonal calls
Same principle as for subclause 18.8.2.
## 19.8 Barring of outgoing premium rate calls
Same principle as for subclause 19.2. The serving network analyses the
destination number to determine whether the destination corresponds to a
premium rate number. The handling will be the same both for Premium rate
information and Premium rate entertainment.
## 19.9 Barring of incoming calls
Same principle as for subclause 18.8.4.
## 19.10 Barring of incoming calls when roaming outside the home PLMN country
Same principle as for subclause 18.8.5.
## 19.11 Barring of incoming calls when roaming outside the zone of the home
PLMN country
Same principle as for subclause 18.8.5.
## 19.12 Operator Specific Barring
No interaction. Any originating or terminating CAMEL based services shall be
invoked before Operator Specific Barring of type 1,2,3,4. Operator Specific
Barring is applicable only when the subscriber is registered in the HPLMN.
NOTE: Operators should be aware of this interaction when defining Operator
Specific ODB categories.
## 19.13 Barring of Supplementary Services Management
No interaction.
## 19.14 Barring of registration of forwarded-to numbers
No interaction. The HPLMN will apply the barring of registration of the
forwarded-to number as specified in TS 22.041 and TS 23.015.
If the served subscriber is provided with TIF-CSI the HPLMN shall not check
the forwarded-to number; hence only the category Barring of registration of
any call forwarded-to number will take effect.
## 19.15 Barring of invocation of call transfer
No interaction. The serving network will apply the barring of invocation of
call transfer as specified in TS 22.041 and TS 23.015 after any CAMEL handling
of the call legs to be joined by the ECT invocation.
If the CSE instructs the serving network to bar the invocation of call
transfer involving a specific call leg, this instruction shall have priority
over the possible Operator Determined Barring of invocation of call transfer.
## 19.16 Barring of Packet Oriented Services
No interaction. Any originating CAMEL based services shall be invoked before
the barring of packet oriented services.
# 20 Interactions with Optimal Routeing (OR)
If OR is applied to a late Call Forward then the interrogating PLMN shall
invoke a mobile originated CAMEL based service, if required for the served
subscriber.
If a call is subject to basic OR, VPLMN-A shall pass the address defining the
ultimate destination of the call (whether VPLMN-B, HPLMN-B or the forwarded-to
destination) to the CSE of the originating subscriber.
If a call is subject to OR of late call forwarding from an IPLMN which is also
the forwarding subscriber's HPLMN, then the IPLMN shall pass the forwarded-to
number to the CSE which handles mobile terminating CAMEL-based services for
the forwarding subscriber.
Specific interaction is described in TS 22.079 [2].
# 21 Interactions with SCUDIF call
Refer to 3GPP TS 23.172 [14] for a definition of \"preferred service\", \"less
preferred\", \"service selected \" and \"fallback\".
## 21.1 Call Party Handling
The CSE may invoke CPH procedures only if one of the following conditions is
fulfilled:
\- during call establishment, the preferred service is speech. After the
VPLMN/IPLMN has completed the CPH procedure, the VPLMN/IPLMN shall force a
fallback to speech; or
\- during the active phase of the call, the selected service is speech. After
the VPLMN/IPLMN has completed the CPH procedure, the VPLMN/IPLMN shall force a
fallback to speech.
## 21.2 User Interaction
The CSE may initiate user interaction or order in-band tone only if one of the
following conditions is fulfilled:
\- during call establishment, the preferred service is speech; or
\- during the active phase of the call, the selected service is speech.
## 21.3 User-requested service change
The VPLMN/IPLMN shall disallow a user request for service change during user
interaction.
If the user request for service change occurs during the playing of a CAMEL
warning tone, then the playing of the CAMEL warning tone shall be stopped.
## 21.4 CAMEL warning tones
### 21.4.1 Warning tone related to call duration control
For a SCUDIF call the CAMEL warning tone may be ordered by the CSE. At the
time of tone connection, the VPLMN/IPLMN shall not connect the tone if the
selected service is multi media.
### 21.4.2 Warning tone related to tone injection
The CSE shall be able to inject a warning tone if the selected service is
speech, but not if the selected service is multi media.
## 21.5 Mid-call procedure
The CSE shall be able to arm the mid-call event when the selected/preferred
service is either speech or multi media.
## 21.6 Follow-on call
If the CSE creates a follow-on call before the call has reached the active
phase, then the VPLMN/IPLMN shall establish the follow-on call with the
preferred service and the less preferred service that were available during
call establishment.
If the CSE creates a follow-on call after the call has reached the active
phase, then the VPLMN/IPLMN shall establish the follow-on call with the
selected service and the not-active service that were available during the
active phase of the call.
## 21.7 Service initiation at unsuccessful call establishment
If an initial service event occurs due to unsuccessful call establishment,
then the VPLMN/IPLMN shall report to the CSE, the preferred service and the
less preferred service that were available during call establishment.
# 22 Location Information
The purpose of this procedure is to obtain the location of a particular
subscriber. The resolution of the location information may be based on the
Cell Identity or Service Area Identity of the subscriber's location, or may be
based on more accurate positioning information.
During Mobile Terminating call handling, the HLR may obtain the subscriber's
location from the VPLMN.
The CSE may interrogate the HLR in order to obtain a particular subscriber's
location based on the cell identity, service area identity or the routing area
identity. The HLR may return location information as a result of paging the
subscriber.
The HLR may return location information as defined in TS 23.018 [9].
The CSE may interrogate the GMLC in order to obtain a particular subscriber's
current location based on accurate geographical information as defined by LCS
in TS 22.071 [8]. The GMLC has the possibility to reject any interrogation
from any CSE.
# 23 Cross Phase compatibility with future Phases of CAMEL
Where different entities support different phases of CAMEL they shall operate
at the highest common phase. CAMEL phase 1 is the lowest common phase.
# 24 Procedures for trunk originated services
Trunk originated services may be provided by a PLMN operator.
When overlap signaling procedures are used a TO call setup request may only
contain a partial digit string. The PLMN may:
\- wait to collect all digits before following the procedures below (Note:
this may result in a delay in call set-up); or
\- collect a minimum number of digits before following the procedures below
(Note: it may be necessary to avoid the use of CSE-initiated user interaction
while additional digits are still being received); or
\- support CSE requests for additional digit collection, as defined below
(Note: it may be necessary to avoid the use of CSE-initiated user interaction
while additional digits are collected)
## 24.1 Initial service events
It shall be possible to specify which of the following initial service events
shall initiate contact with the CSE:
\- Collection of dialled digits;
\- Analysis of dialled digits.
The definition of which of the above initial service events shall initiate
contact with the CSE is part of the Trunk Originated CAMEL Service Information
and Network CAMEL Service Information, respectively, provisioned by the PLMN
operator. The provisioning mechanism is out of the scope of this
specification.
Analysis of dialled digits can open a new dialogue regardless of whether a
relationship exists.
## 24.2 Criteria for contact with the CSE
It shall be possible for the PLMN to specify criteria which must be satisfied
before the CSE is contacted.
### 24.2.1 Criteria applicable at call setup
#### 24.2.1.1 Criteria applicable at call setup when dialled digits have been
collected
Criteria may be defined for the case when collection of dialled digits has
been performed. Criteria may be based on the contents and/or length of the
dialled number, basic service, call type or other information at the
discretion of the network operator, however this is outside the scope of this
specification.
#### 24.2.1.2 Criterion applicable at call setup when dialled digits are
analysed
Criteria on the contents of the called number may be defined for dialled
services at the discretion of the network operator, however this is outside
the scope of this specification.
### 24.3 Call set-up request procedure
### 24.3.1 Procedure when dialled digits have been collected
The purpose of this procedure is to detect a call set-up request at the point
where digits have been collected but not analysed, and to allow the CSE to
modify the handling of the call set-up request.
If no control relationship for the call exists and:
\- The incoming trunk is provisioned with a Trunk originated CAMEL service;
and
\- The call set-up request occurs; and
\- The criteria are satisfied.
Then the PLMN shall suspend call processing, make contact with the CSE and
await further instructions.
When the PLMN has made contact with the CSE, and the CSE has determined that
additional digits are required in order to determine the appropriate handling
for the call, the CSE shall instruct the PLMN to act as described below.
\- Activate subsequent control service event for the call. The CSE shall
request that the following subsequent service event shall be detected and
reported:
> \- Collection of dialled digits. The CSE may specify the number of digits to
> be collected
\- The type of monitoring (control or notification)
Once the CSE has concluded issuing the above instruction, it shall issue the
following instruction:
\- Collect information (i.e. CSE request for the collection of additional
digits).
Otherwise, w
Otherwise, when the PLMN has made contact with the CSE, the CSE shall be able
to instruct the PLMN to act as described below.
\- Perform charging activities;
\- Activate subsequent control service events for the call. The CSE shall have
the possibility to send the following information:
\- The subsequent service event which shall be detected and reported:
\- Called party alert;
\- Called party connection;
\- Call disconnection;
\- Calling party abandon;
\- Unsuccessful call establishment. In the case of no answer the CSE may
provide a no answer timer;
\- Mid call event (DTMF or out of band information). The CSE shall specify the
digit string(s) or the out of band information for which the instruction is
valid. Out-band information may be detected during alerting phase of the call;
\- Change of basic service.
\- The party in the call for which the event shall be detected and reported
(calling or called party);
\- The type of monitoring (control or notification).
\- Order in-band user interaction;
There shall be no restriction regarding the order of the above instructions or
the number of times each of the above instructions can be repeated. Once the
CSE has concluded issuing the above instructions, it shall issue one and only
one of the following instructions:
\- Bar the call (i.e. release the call prior to connection);
\- Continue the call processing;
\- Continue the call processing with modified information;
\- Continue the handling of the calling party without routeing the call to the
destination.
If a relationship for the call already exists and the CSE has activated this
subsequent service event for this call and the collection of dialled digits
event occurs the PLMN shall:
\- Suspend call processing, notify the CSE and await further instructions.
The following information shall be provided to the CSE:
\- Event met;
\- The dialled digits;
\- Type of monitoring.
When the PLMN has made contact with the CSE, the CSE shall be able to instruct
the PLMN to act as described below.
\- Perform charging activities;
\- Activate subsequent control service events for the call. The CSE shall have
the possibility to send the following information:
\- The subsequent service event which shall be detected and reported:
\- Called party alert;
\- Called party connection;
\- Call disconnection;
\- Calling party abandon;
\- Unsuccessful call establishment. In the case of no answer the CSE may
provide a no answer timer;
\- Mid call event (DTMF or out of band information). The CSE shall specify the
digit string(s) or the out of band information for which the instruction is
valid. Out-band information may be detected during alerting phase of the call;
\- Change of basic service.
\- The party in the call for which the event shall be detected and reported
(calling or called party);
\- The type of monitoring (control or notification).
\- Order in-band user interaction;
There shall be no restriction regarding the order of the above instructions or
the number of times each of the above instructions can be repeated. Once the
CSE has concluded issuing the above instructions, it shall issue one and only
one of the following instructions:
\- Bar the call (i.e. release the call prior to connection);
\- Continue the call processing;
\- Continue the call processing with modified information;
\- Continue the handling of the calling party without routeing the call to the
destination.
### 24.3.2 Procedure for trunk originated dialled services
The purpose of this procedure is to detect a call set-up request at the point
where the called party number has been compared with the stored network
service numbers, and allow the CSE to modify the handling of the call set-up
request. Triggering of this procedure shall happen immediately after the
procedure when dialled digits have been collected. If any other CAMEL dialogue
has changed the called party number then the modified called party number is
used for the conditional triggering check.
#### 24.3.2.1 Initiation of contact with the CSE
If:
\- The call set-up request occurs; and
\- The call set-up request procedure is passed, and
\- The PLMN is provisioned with network based service information.
Then the PLMN shall suspend call processing, make contact with the CSE and
await further instructions.
#### 24.3.2.2 Further processing of the call
If a relationship exists with a CSE, then when the PLMN has made contact with
the CSE, the CSE shall be able to instruct the PLMN to act as described below:
\- Perform charging activities The CSE is only allowed to include free format
data in Call Data Records (refer to sect. 15.2, 'Inclusion in charging records
of information received from the CSE');
\- Order in-band user interaction. (Interaction between the service triggered
from previous triggering may be needed to avoid duplicated guidance etc.).
Once the CSE has concluded issuing the above instructions, it shall issue one
and only one of the following instructions:
\- Release the call;
\- Continue the call processing;
\- Continue the call processing with modified information;
If no relationship exists with a CSE for the call, then when the PLMN has made
contact with the CSE, the CSE shall be able to instruct the PLMN to act as
described below:
\- Collect additional digits (when overlap signalling occurs and the PLMN
supports CSE requests for additional digits) as defined in subclause 24.3.1;
> \- Perform charging activities;
>
> \- Activate subsequent control service events for the call. The CSE shall
> have the possibility to send the following information:
>
> \- The subsequent service event which shall be detected and reported:
\- Called party alert;
\- Called party connection;
\- Call disconnection;
\- Calling party abandon;
\- Unsuccessful call establishment. In the case of no answer the CSE may
provide a no answer timer;
\- Mid call event (DTMF or out of band information). The CSE shall specify the
digit string(s) or the out of band information for which the instruction is
valid. Out-band information may be detected during alerting phase of the call;
\- Change of basic service.
> \- The party in the call for which the event shall be detected and reported
> (calling or called party);
>
> \- The type of monitoring (control or notification).
\- Order in-band user interaction.
There shall be no restriction regarding the order of the above instructions or
the number of times each of the above instructions can be repeated. Once the
CSE has concluded issuing the above instructions, it shall issue one and only
one of the following instructions:
\- Allow the call processing to continue unchanged;
\- Allow the call processing with modified information;
\- Continue the handling of the calling party without routeing the call to the
destination;
\- Release the call.
## 24.4 Calling party abandon
The purpose of this procedure is to manage an call set-up at the time it is
terminated by the calling party before the call is established.
If the CSE has activated this subsequent service event for this call in notify
mode and the calling party abandon event occurs the PLMN shall:
\- Notify the CSE and continue.
The following information shall be provided to the CSE:
\- Event met;
\- Type of monitoring;
If the CSE has activated this subsequent service event for this call in
request mode and the calling party abandon event occurs the PLMN shall suspend
call processing, make contact with the CSE and await further instructions.
When the PLMN has made contact with the CSE in request mode, the CSE shall be
able to instruct the PLMN to act as described below.
\- Perform charging activities.
There shall be no restriction regarding the number of times the above
instruction can be repeated. Once the CSE has concluded issuing the above
instruction, it shall issue the following instruction:
\- Continue the call processing.
## 24.5 Unsuccessful call establishment
If a relationship for the call already exists and the CSE has activated this
subsequent service event for this call and the unsuccessful call establishment
event occurs the PLMN shall:
\- Suspend call processing, notify the CSE and await further instructions, or
\- Notify the CSE and continue call processing.
In both cases above the following information shall be provided to the CSE:
\- Event met;
\- Type of monitoring;
\- Cause for unsuccessful call establishment:
\- Not reachable;
\- Busy;
\- No answer;
\- Route select failure.
When the PLMN has made contact with the CSE, the CSE shall be able to instruct
the PLMN to act as described below:
\- Perform charging activities;
\- Activate subsequent control service events for the call. The CSE shall have
the possibility to send the following information:
\- The subsequent service event which shall be detected and reported:
\- Called party alert;
\- Called party connection;
\- Call disconnection;
\- Calling party abandon;
\- Unsuccessful call establishment. In the case of no answer the CSE may
provide a no answer timer;
\- Mid call event (DTMF or out of band information). The CSE shall specify the
digit string(s) or the out of band information for which the instruction is
valid. Out-band information may be detected during alerting phase of the call.
The detection of the mid call event shall be limited to the VPLMN;
\- Change of basic service.
\- The party in the call for which the event shall be detected and reported
(calling or called party);
\- The type of monitoring (control or notification).
\- Order in-band user interaction;
There shall be no restriction regarding the order of the above instructions or
the number of times each of the above instructions can be repeated. Once the
CSE has concluded issuing the above instructions, it shall issue one and only
one of the following instructions:
\- Release the call;
\- Continue the call processing;
\- Continue the call processing with modified information.
## 24.6 Called party connection procedure
The purpose of this procedure is to manage a call set-up at the time when the
called party answers and the call is successfully established.
If the CSE has activated this subsequent service event for this call and the
called party connection event occurs the PLMN shall:
\- Suspend call processing, notify the CSE and await further instructions, or
\- Notify the CSE and continue call processing.
The following information shall be provided to the CSE:
\- Event met;
\- The party in the call for which the event is reported (only called party
applicable);
\- The charge indicator which will be used in the Call Data Record if
available;
\- Type of monitoring.
When the PLMN has made contact with the CSE, the CSE shall be able to instruct
the PLMN to act as described below.
\- Perform charging activities;
\- Activate subsequent control service events for the call. The CSE shall have
the possibility to send the following information:
\- The subsequent service event which shall be detected and reported:
\- Call disconnection;
\- Mid call event (DTMF or out of band information). The CSE shall specify the
digit string(s) or the out of band information for which the instruction is
valid. The out-band information may be detected during alerting phase. The
detection of the mid call event shall be limited to VPLMN only);
\- Change of basic service.
\- The party in the call for which the event shall be detected and reported
(calling or called party);
\- The type of monitoring (control or notification).
\- Order in-band user interaction.
There shall be no restriction regarding the order of the above instructions or
the number of times each of the above instructions can be repeated. Once the
CSE has concluded issuing the above instructions, it shall issue one and only
one of the following instructions:
\- Release the call;
\- Continue the call processing.
## 24.7 Mid call procedure
See subclause 5.7, Consider "VPLMN" of 5.7 as "PLMN" and "served subscriber"
of 5.7 as "trunk originated call".
## 24.8 Call disconnection procedure
The purpose of this procedure is to manage the actions on disconnection of an
established call. This procedure is applicable to any party in the call.
If the CSE has activated this subsequent service event for this call and the
call disconnection event occurs the PLMN shall:
\- Suspend call processing, notify the CSE and await further instructions, or
\- Notify the CSE and continue call processing.
The following information shall be provided to the CSE:
\- Event met;
\- The party in the call for which the event is reported;
\- Type of monitoring;
\- Disconnection reason.
When the PLMN has made contact with the CSE, the CSE shall be able to instruct
the PLMN to act as described below:
\- Perform charging activities
\- Activate subsequent control service events for the call. The CSE shall have
the possibility to send the following information:
\- The subsequent service event which shall be detected and reported:
\- Called party alert;
\- Called party connection;
\- Call disconnection;
\- Calling party abandon;
\- Unsuccessful call establishment. In the case of no answer the CSE may
provide a no answer timer;
\- Mid call event (DTMF or out of band information). The CSE shall specify the
digit string(s) or the out of band information for which the instruction is
valid;
\- Change of basic service.
\- The party in the call for which the event shall be detected and reported
(calling or called party);
\- The type of monitoring (control or notification).
\- Order in-band user interaction;
There shall be no restriction regarding the order of the above instructions or
the number of times each of the above instructions can be repeated. Once the
CSE has concluded issuing the above instructions, it shall issue one and only
one of the following instructions:
\- Continue the call processing, i.e. release the call;
\- Continue the call processing with modified information.
## 24.9 CSE initiated call release procedure
Following the CAMEL processing of the call set-up request procedure it shall
be possible for the CSE to initiate a call release at any moment of the call.
To use this procedure:
\- The PLMN shall have reported an initial service event to the CSE and be
waiting for instructions from the CSE, or
> \- The CSE shall be waiting for the report of any subsequent service event
> (with "Type of monitoring" set to control).
## 24.10 Called party alert reporting procedure
The purpose of this procedure is to manage a call set-up at the time when the
called party is alerted.
If the CSE has activated this service event for this call and the called party
alert event occurs the PLMN shall:
\- Suspend call processing, notify the CSE and await further instructions, or
\- Notify the CSE and continue call processing.
The following information shall be provided to the CSE:
\- Event met;
\- The party in the call for which the event is reported (only called party
applicable);
\- Type of monitoring.
When the PLMN has made contact with the CSE, the CSE shall be able to instruct
the PLMN to act as described below:
\- Perform charging activities;
\- Activate subsequent control service events for the call. The CSE shall have
the possibility to send the following information:
\- The service event which shall be detected and reported:
\- Calling party abandon;
\- Unsuccessful call establishment. In the case of no answer the CSE may
provide a no answer timer;
\- Call disconnection;
\- Mid call event (DTMF);
\- Called party connection
\- Change of basic service.
\- The party in the call for which the event shall be detected and reported;
\- The type of monitoring (control or notification).
\- Order in-band user interaction with the calling party.
There shall be no restriction regarding the order of the above instructions or
the number of times each of the above instructions can be repeated. Once the
CSE has concluded issuing the above instructions, it shall issue the following
instruction:
\- Continue the call processing.
## 24.11 Change of basic service
When the CSE has instructed the PLMN to arm the change of basic service event,
the PLMN shall report the event when the basic service changes. It shall be
possible for the CSE to instruct the PLMN to re-arm the change of basic
service event when it is encountered. The CSE may arm this event in the
various phases of the call (as specified in this specification)-- however the
PLMN reports the basic service changes in the active phase of the call only.
If the CSE has activated this service event for this call and a change of
basic service event occurs the PLMN shall:
\- Notify the CSE and continue call processing.
The following information shall be provided to the CSE:
\- Event met;
\- Type of monitoring;
\- Event specific data;
> \- Basic service:
\- Charge result if charging supervision is provided:
When the PLMN has made contact with the CSE, the CSE shall be able to instruct
the PLMN to act as described below:
\- Perform charging activities;
\- Activate other control service events for the call. The CSE shall have the
possibility to send the following information:
\- The service event which shall be detected and reported:
\- Change of basic service.
\- The party in the call for which the event shall be detected and reported;
\- The type of monitoring (notification).
There shall be no restriction regarding the order of the above instructions or
the number of times each of the above instructions can be repeated.
###### ## Annex A (normative): Void
###### ## Annex B (normative): Procedures for IP multimedia sessions
# B.1 General
When a mobile originated or mobile terminated IPMM session is detected by the
IM CN subsystem, the IM CN subsystem shall decide whether the CSE shall be
contacted. If the CSE is contacted the IM CN subsystem shall provide
information which includes information taken from the IPMM session and
information previously stored in the IM CN subsystem. When the IM CN subsystem
contacts the CSE, the IM CN subsystem shall suspend the handling of the IPMM
session and make contact with a CSE to ask for instructions.
The IM CN subsystem shall accept the instructions from the CSE and continue
IPMM session processing with the received information.
# B.2 Mobile Originated Events
## B.2.1 Initial contact with the CSE
When the IM CN subsystem initiates contact with the CSE, the IPMM session
processing is suspended and the IM CN subsystem waits for instructions from
the CSE. It shall be possible to specify which of the following initial events
shall initiate contact with the CSE:
  * Called identity received at the IM CN subsystem,
  * Analysis of called identity
  * Unsuccessful IPMM session setup.
After initial contact with the CSE, the CSE shall provide the IM CN subsystem
with further instructions as detailed in table C-1.
## B.2.2 Criteria for initial contact with the CSE
### B.2.2.1 CSI criteria applicable at IPMM session setup when called identity
is received
CSI criteria may be defined for a subscriber for the case when the called
identity is received at IPMM session setup .
\- Criteria on the called identity; these consist of:
\- The contents of the identity (a list of up to 10 identities may be defined
in the criteria)
  * The criteria on the called identity may be collectively defined to be either \"enabling\" triggering criteria or \"inhibiting\" triggering criteria (see below). The HPLMN may also choose not to define any criteria on the called identity.
### B.2.2.2 CSI criteria applicable at IPMM session setup after analysis of
called identity
A CSI criterion on the contents of the called identity shall be defined for
subscribed dialled services. A list of up to 10 called identities may be
defined in the criterion. Each entry in the called identity list has
associated with it a CSE identity and a service key which defines the service
to be triggered if the criterion is satisfied.
If any other CAMEL dialogue has changed the called number, then the modified
called identity shall be used for the conditional triggering check.
The called identity criterion is satisfied if the called identity matches a
called identity string defined in the criterion.
The Enhanced dialled services is not applicable for the IMS.
### B.2.2.3 CSI criterion applicable on detection of unsuccessful IPMM session
establishment
A criterion on the release cause may be defined. This may consist of a list of
up to 5 cause values. The criterion on the release cause is satisfied if the
received call release cause corresponds to any cause value defined in the list
or if no criterion is defined.
## B.2.3 Subsequent events reported to the CSE
After initial contact with the CSE, the CSE may request the IM CN subsystem to
detect and report subsequent events. These events are listed below. With each
of these events, the CSE shall indicate the type of monitoring (ie suspension
of IPMM session processing or notification). If the CSE requests the
suspension of IPMM session processing, it shall provide the IM CN subsystem
with further instructions as detailed in table C-1.
The subsequent events that may be detected by the IM CN subsystem and reported
to the CSE are:
> \- The called party answers;
\- Additional information received from the originating party;
\- TheIPMM session is disconnected;
\- The originating party abandons the IPMM session;
\- Unsuccessful IPMM session setup. The following events shall be possible:
> \- The called party is busy;
  * The called party does not respond in specified time period;
  * The called party can not be reached.
## B.2.4 Instruction by the CSE
After initial contact with the CSE, or after the reporting of subsequent
events to the CSE, the CSE shall be able to instruct the IM CN subsystem with
the following;
  * To bar the IPMM session;
  * To arm one or more subsequent events;
  * To perform the charging activity;
  * To perform the in-band user interaction;
  * To continue the IPMM session;
  * To continue the IPMM session with modified information;
  * To release the IPMM session.
The combination of the event reported to the CSE and the instruction by the
CSE is provided in the table C-1. Table C-1 Actions performed by the CSE at
specific service event for MO and MT IP multimedia session can be found in
Annex C.
## B.2.5 IM Application Level Registration procedure
When a user registers on application level with the IM CN subsystem, initial
trigger information shall be provided to the IM CN subsystem. Initial trigger
information shall be sufficient to enable the IM CN subsystem to detect
relevant IPMM sessions and to contact the proper CSE.
The set of information shall at least include the CSE identity to be
contacted, the user for which it is valid, the originating and terminating
initial event including specific criteria if needed and the service key for
the CSE service subscribed to. The initial trigger information for IM CN
subsystem shall contain information for the IM CN subsystem only.
# B.3 Mobile Terminated Events
## B.3.1 Initial contact with the CSE
It shall be possible to specify which of the following initial service events
shall initiate contact with the CSE:
\- Incoming IPMM session to subscriber;
> \- Detection of unsuccessful IPMM session establishment.
Unsuccessful IPMM session establishment may be caused by:
  * Called subscriber busy;
```{=html}
``` \- Called subscriber not reachable;
```{=html}
``` \- No answer from called subscriber in specified time period.
When the IM CN subsystem initiates contact with the CSE, the IPMM session
processing is suspended and the IM CN subsystem waits for instructions from
the CSE. After initial contact with the CSE, the CSE shall provide the IM CN
subsystem with further instructions as detailed in table C-1.
## B.3.2 Criteria for initial contact with the CSE
### B.3.2.1 Void
### B.3.2.2 CSI criteria applicable on detection of unsuccessful IPMM session
establishment
A criterion on the failure reason may be defined. This consists of a list of
up to 5 failure reasons. A failure reason can denote an error response or can
denote that the HPLMN determined that the called subscriber was not reachable.
The criterion on the failure reason is satisfied if the reason for failure of
the IPMM session corresponds to any failure reason defined in the list or if
no criterion is defined.
## B.3.3 Subsequent events reported to the CSE
After initial contact with the CSE, the CSE may request the IM CN subsystem to
detect and report subsequent events. These events are listed below. With each
of these events, the CSE shall indicate the type of monitoring (ie suspension
of IPMM session processing or notification). If the CSE requests the
suspension of IPMM session processing, it shall provide the IM CN subsystem
with further instructions as detailed in table C-1.
The subsequent events that may be detected by the IM CN subsystem and reported
to the CSE are:
  * The called party is alerted
  * The called party answers;
  * Additional information received from the terminating party;
  * The IPMM session is disconnected;
  * The calling party abandons;
  * Unsuccessful IPMM session setup. The following events shall be possible:
  * The called party does not respond in specified time period.
## B.3.4 Instruction by the CSE
After initial contact with the CSE, or after the reporting of subsequent
events to the CSE, the CSE shall be able to instruct the IM CN subsystem with
the following;
\- To bar the IPMM session;
\- To arm one or more subsequent events;
\- To perform the charging activity;
\- To perform the in-band user interaction;
\- To continue the IPMM session;
\- To continue the IPMM session with modified information;
\- To release the IPMM session.
The combination of the event reported to the CSE and the instruction by the
CSE is provided in the table C-1. Table C-1 Actions performed by the CSE at
specific service event for MO and MT IP multimedia session can be found in
Annex C.
###### ## Annex C (normative): Actions performed by the CSE at specific
service event for MO and MT IP multimedia session
Table C-1: Actions performed by the CSE at specific service\ event for MO and
MT IP multimedia session
**Instructions by the CSE** | Service Events reported to the CSE |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |   
---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---  
| Mobile Originated | **Mobile Terminated** |  |  |  |  |  |  |  |  |  |  |  |  |  |  |   
|
> Called identity received at the IM CN sub-system
|
> Analysis of called identity
|
> Unsuccessful IPMM session setup (initial event)
|
> The called party answers
|
> Additional information received from the originating party
|
> The IMPP session isdisconnected call
|
> The originating party abandons the call
|
> Unsuccessful IPMM session setup (subsequent event)
|  | 
> Incoming IPMM session to subscriber
|
> Unsuccessful IPMM session establishment (initial event)
|
> The called party is alerted
|
> The called party answers
|
> Additional information received from the terminating party
|
> The IPMM session is disconnected
|
> The calling party abandons
|
> Unsuccessful IPMM session establishment (subsequent event)  
To bar the IPMM session | X |  |  |  |  |  |  |  |  | X |  |  |  |  |  |  |   
To arm one or more subsequent events | X |  | X | X |  |  |  |  |  | X | X | X | X | X | X |  |   
To perform the charging activities | X | X | X | X | X |  |  | X | X | X | X | X | X | X | X | X | X  
To perform in-band user interaction | X | X | X | X |  |  |  |  |  | X | X | X | X | X | X |  |   
To continue the IPMM session | X | X | X | X | X | X | X | X | X | X | X | X | X | X | X | X | X  
To continue the IPMM session with modified information | X | X | X |  | X |  |  |  |  | X | X |  |  |  | X |  |   
To release the IPMM session | X | X | X |  | X |  |  | X | X | X | X |  | X | X |  |  | X  
#