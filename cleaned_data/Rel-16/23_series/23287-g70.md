# Foreword
This Technical Specification has been produced by the 3rd Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document specifies architecture enhancements to the 5G System to
facilitate vehicular communications for Vehicle-to-Everything (V2X) services,
over the following reference points, based on service requirements defined in
TS 22.185 [2] and TS 22.186 [3]:
\- PC5 reference point: NR PC5 RAT, LTE PC5 RAT.
\- Uu reference point: NR, E-UTRA.
This specification also covers interworking with EPS.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 22.185: \"Service requirements for V2X services; Stage 1\".
[3] 3GPP TS 22.186: \"Enhancement of 3GPP support for V2X scenarios; Stage
1\".
[4] ISO 17419:2018: \"Intelligent transport systems - Cooperative systems -
Globally unique identification\".
[5] IEEE Std 1609.12-2016: \"IEEE Standard for Wireless Access in Vehicular
Environments (WAVE) - Identifier Allocations\".
[6] 3GPP TS 23.501: \"System Architecture for the 5G System; Stage 2\".
[7] 3GPP TS 23.502: \"Procedures for the 5G System; Stage 2\".
[8] 3GPP TS 23.285: \"Architecture enhancements for V2X services\".
[9] 3GPP TS 36.300: \"Evolved Universal Terrestrial Radio Access (E-UTRA) and
Evolved Universal Terrestrial Radio Access Network (E-UTRAN); Overall
description; Stage 2\".
[10] 3GPP TS 36.304: \"Evolved Universal Terrestrial Radio Access (E-UTRA);
User Equipment (UE) procedures in idle mode\".
[11] 3GPP TS 38.300: \"NR; NR and NG-RAN Overall Description; Stage 2\".
[12] 3GPP TS 38.304: \"NR; User Equipment (UE) procedures in Idle mode and RRC
Inactive state\".
[13] 3GPP TS 23.122: \"Non-Access-Stratum (NAS) functions related to Mobile
Station (MS) in idle mode\".
[14] 3GPP TS 36.331: \"Evolved Universal Terrestrial Radio Access (E-UTRA);
Radio Resource Control (RRC); Protocol specification\".
[15] 3GPP TS 38.331: \"NR; Radio Resource Control (RRC); protocol
specification\".
[16] 3GPP TS 23.503: \"Policy and Charging Control Framework for the 5G
System; Stage 2\".
[17] 3GPP TS 23.303: \"Proximity-based Services (ProSe); Stage 2\".
[18] IEEE Std 1609.3-2010: \"IEEE Standard for Wireless Access in Vehicular
Environments (WAVE) - Networking Services\".
[19] ISO 29281-1:2013: \"Intelligent Transport Systems - Communications access
for land mobiles (CALM) - Non-IP networking - Part 1: Fast networking &
transport layer protocol (FNTP)\".
[20] 3GPP TS 23.288: \"Architecture enhancements for 5G System (5GS) to
support network data analytics services\".
[21] IETF RFC 4862: \"IPv6 Stateless Address Autoconfiguration\".
[22] 3GPP TS 38.413: \"NG-RAN; NG Application Protocol (NGAP)\".
[23] 3GPP TS 38.423: \"NG-RAN; Xn Application Protocol (XnAP)\".
[24] 3GPP TS 24.587: \"Vehicle-to-Everything (V2X) services in 5G System
(5GS); Stage 3\".
[25] 3GPP TS 37.340: \"Evolved Universal Terrestrial Radio Access (E-UTRA) and
NR; Multi-connectivity; Stage 2\".
[26] 3GPP TS 33.536: \"Security aspects of 3GPP support for advanced Vehicle-
to-Everything (V2X) services\".
[27] CCSA YD/T 3707-2020: \"Technical requirements of network layer of LTE-
based vehicular communication\".
# 3 Definitions and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
TR 21.905 [1] and the following apply. A term defined in the present document
takes precedence over the definition of the same term, if any, in TR 21.905
[1].
**Application Layer connection-less group:** An application layer group
without group formation in the V2X application layer, e.g., sensor sharing.
**Application Layer ID:** An identifier identifying an entity, e.g. a vehicle,
a pedestrian, an RSU within the context of a specific V2X application. The
format of this identifier is outside the scope of 3GPP.
NOTE 1: The Application Layer ID could be e.g. Station ID or Vehicle ID
defined by other SDOs e.g. ETSI, Society of Automotive Engineers (SAE), etc.
NOTE 2: The usage of Application Layer ID, e.g. one Application Layer ID is
associated with one V2X application, one Application Layer ID is associated
with more than one V2X applications, or one Application Layer ID is used for
all V2X applications in the UE, is up to application layer implementation.
**Application Layer managed group:** An application layer group with group
formation and management in the V2X application layer, e.g., platooning,
cooperative adaptive cruise control.
**Groupcast mode communication:** It refers to V2X communication over PC5
reference point within a group of UEs where any UE in the group can act as
transmitting UE and the rest act as receiving UEs. See also TS 38.300 [11] for
more information. The \"group\" here refers to Application Layer managed group
or Application Layer connection-less group.
**Member ID:** An identifier uniquely identifying a member in the Application
Layer managed group and that is managed by the V2X application layer.
**Mode of communication:** Mode of communication to be used by the UE over PC5
reference point i.e. broadcast mode (LTE PC5 and NR PC5), groupcast mode (NR
PC5) or unicast mode (NR PC5).
**V2X application:** An application using one or more V2X services e.g. an
active safety application in a vehicle, using V2X services such as emergency
warning and vehicle to vehicle safety and awareness. A V2X application may
operate towards a V2X Application Server.
**V2X communication:** A communication to support Vehicle-to-Everything (V2X)
services leveraging Uu and / or PC5 reference points. V2X services are
realized by various types of V2X applications, i.e. Vehicle-to-Vehicle (V2V),
Vehicle-to-Pedestrian (V2P), Vehicle-to-Infrastructure (V2I) and Vehicle-to-
Network (V2N).
**V2X message:** A dedicated messaging type of V2X service, for example ITS
messages.
**V2X service:** A data service, offered to V2X applications and optionally
V2X Application Servers. A V2X service belongs to one V2X service type. It may
include message or other data delivery, as defined in TS 22.185 [2] and TS
22.186 [3]. A V2X service can be associated with one or more V2X applications,
and a V2X application can be associated with one or more V2X services.
**V2X service type:** A type of V2X service, which is identified by e.g. ITS-
AID (ITS Application Identifier), PSID (Provider Service Identifier) or AID
(Application Identifier).
For the purposes of the present document, the following terms and definitions
given in ISO 17419:2018 [4] apply:
**Intelligent Transport Systems**
**ITS Application Identifier**
For the purposes of the present document, the following term and definition
given in IEEE Std 1609.12-2016 [5] apply:
**Provider Service Identifier**
For the purposes of the present document, the following term and definition
given in CCSA YD/T 3707-2020 [27] applies:
**Application Identifier**
For the purposes of the present document, the following term and definition
given in TS 23.285 [8] apply:
**Tx Profile**
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in TR 21.905
[1] and the following apply. An abbreviation defined in the present document
takes precedence over the definition of the same abbreviation, if any, in TR
21.905 [1].
AF Application Function
AID Application Identifier
AS layer Access Stratum layer
ITS Intelligent Transport Systems
ITS-AID ITS Application Identifier
PFI PC5 QoS Flow Identifier
PQI PC5 5QI
PSID Provider Service Identifier
RSU Road Side Unit
V2I Vehicle-to-Infrastructure
V2N Vehicle-to-Network
V2P Vehicle-to-Pedestrian
V2V Vehicle-to-Vehicle
V2X Vehicle-to-Everything
# 4 Architecture model and concepts
## 4.1 General concept
There are two modes of operation for V2X communication, namely V2X
communication over PC5 reference point and V2X communication over Uu reference
point. These two operation modes may be used by a UE independently for
transmission and reception.
V2X communications over PC5 reference point are supported by LTE and/or NR.
V2X communications over Uu reference point are supported by E-UTRA connected
to 5GC and/or NR connected to 5GC. In this release, V2X communication over Uu
reference point is only unicast.
An RSU is not an architectural entity, but an implementation option. This is
achieved by collocating a V2X application logic/server with some entities of
the 3GPP system, as shown in examples in Annex B.
## 4.2 Architectural reference model
### 4.2.1 PC5 and Uu based V2X architecture reference model
#### 4.2.1.1 Non-roaming 5G System architecture for V2X communication over PC5
and Uu reference points
Figure 4.2.1.1-1 shows the high level view of the non-roaming 5G System
architecture for V2X communication over PC5 and Uu reference points.
Figure 4.2.1.1-1: Non-roaming 5G System architecture for V2X communication
over PC5 and Uu reference points
#### 4.2.1.2 Roaming 5G System architecture for V2X communication over PC5 and
Uu reference points
Figure 4.2.1.2-1 and Figure 4.2.1.2-2 show the high level view of the roaming
5G System architectures for V2X communication over PC5 and Uu reference
points. In these figures, UE A uses a subscription of HPLMN.
Figure 4.2.1.2-1: Roaming 5G System architecture for V2X communication over
PC5 and Uu reference points - Local breakout scenario
Figure 4.2.1.2-2: Roaming 5G System architecture for V2X communication over
PC5 and Uu reference points - Home routed scenario
#### 4.2.1.3 Inter-PLMN 5G System architecture for V2X communication over PC5
reference point
In the case of inter-PLMN V2X communication over PC5 reference point, the PC5
parameters need to be configured in a consistent way among the UEs within a
certain region. The architecture for the Inter-PLMN PC5 case is similar to the
one defined in clause 4.2.1.1.
### 4.2.2 AF-based service parameter provisioning for V2X communications
The 5G System provides NEF services to enable communication between NFs in the
PLMN and V2X Application Server. Figure 4.2.2-1 shows the high level view of
AF-based service parameter provisioning for V2X communications. The V2X
Application Server may provide V2X service parameters to the PLMN via NEF. The
NEF stores the V2X service parameters in the UDR.
Figure 4.2.2-1: 5G System architecture for AF-based service parameter
provisioning for V2X communications
### 4.2.3 Reference points
**V1** : The reference point between the V2X applications in the UE and in the
V2X Application Server. This reference point is out of scope of this
specification.
**V5** : The reference point between the V2X applications in the UEs. This
reference point is not specified in this release of the specification.
**PC5** : The reference point between the UEs, and it includes the LTE based
PC5 and/or NR based PC5.
**N1** : In addition to the relevant functions defined in TS 23.501 [6] for
N1, in the case of V2X Service it is also used to convey the V2X policy and
parameters (including service authorization) from AMF to UE and to convey the
UE\'s V2X Capability and PC5 Capability for V2X information from UE to AMF.
**N2** : In addition to the relevant functions defined in TS 23.501 [6] for
N2, in the case of V2X Service it is also used to convey the V2X policy and
parameters (including service authorization) from AMF to NG-RAN.
**Uu** : The reference point between the UE and the NG-RAN.
### 4.2.4 Service-based interfaces
**Nudm** : In addition to the relevant services defined in TS 23.501 [6] for
Nudm, in the case of V2X Service, services provided by UDM are used to get V2X
Service related subscription information to AMF during Initial registration
procedure or UE Configuration Update (UCU) procedure to inform AMF
subscription information has changed.
**Npcf** : In addition to the relevant services defined in TS 23.501 [6] for
Npcf, in the case of V2X Service, services provided by H-PCF are used to
provide V2X Service related parameters to V-PCF for UE and NG-RAN in the
roaming case.
**Nudr** : In addition to the relevant services defined in TS 23.501 [6] for
Nudr, in the case of V2X Service, services provided by UDR are used to notify
the PCF and the UDM of the update of the V2X Service related information.
**Nnef** : In addition to the relevant services defined in TS 23.501 [6] for
Nnef, in the case of V2X Service, services provided by NEF are used by the V2X
Application Server to update V2X Service related information of 5GC.
**Namf:** In addition to the relevant services defined in TS 23.501 [6] for
Namf, in the case of V2X Service, services provided by AMF are consumed by PCF
to provide the V2X Service related parameters for the UE and the NG-RAN to
AMF, and to enable the AMF create or update UE context related to V2X service.
**Nnrf:** In addition to the relevant services defined in TS 23.501 [6] for
Nnrf, in the case of V2X Service, services provided by NRF are used to
discover the PCF that supports V2X.
## 4.3 Architecture reference model for interworking with EPS V2X
The interworking between 5GS V2X and EPS V2X does not require any new
interface between 5GS V2X and EPS V2X architectures and does not impact
existing network function entities in EPC and 5GC. Figure 4.3-1 shows one of
the architecture reference models.
Legend:
\- The functions and reference points for EPS V2X are defined in TS 23.285
[8].
Figure 4.3-1: Architecture for interworking with EPS V2X, Local breakout
roaming
## 4.4 Functional entities
### 4.4.1 UE
In addition to the functions defined in TS 23.501 [6], the UE may support the
following functions:
\- Report the V2X Capability and PC5 Capability for V2X to 5GC over N1
reference point.
\- Indicate V2X Policy Provisioning Request in UE Policy Container for UE
triggered V2X Policy provisioning.
\- Receive the V2X parameters from 5GC over N1 reference point.
\- Procedures for V2X communication over PC5 reference point.
\- Configuration of parameters for V2X communication (e.g., destination
Layer-2 IDs, radio resource parameters, V2X Application Server address
information, mapping between V2X service types and V2X frequencies, see clause
5.1). These parameters can be pre-configured in the UE, or, if in coverage,
provisioned or updated by signalling over the N1 reference point from the PCF
in the HPLMN or over V1 reference point from the V2X Application Server.
### 4.4.2 PCF
In addition to the functions defined in TS 23.501 [6], the PCF includes the
function to provision the UE and AMF with necessary parameters in order to use
V2X communication:
\- May determine the V2X Policy/Parameter for specific PC5 RAT to provision to
the UE based on the received UE\'s PC5 Capability for V2X.
\- Determines whether to provision V2X Policy/parameters for V2X communication
over PC5 reference point and/or V2X communication over Uu reference point to
the UE.
\- Provision the UEs with authorization and policy parameters for V2X
communication over PC5 reference point.
\- Provision the UEs with policy parameters for V2X communication over Uu
reference point.
\- Provision the AMF with PC5 QoS parameters as defined in clause 5.4.2 used
by NG-RAN.
\- Retrieve V2X parameters from UDR.
### 4.4.3 V2X Application Server
The V2X Application Server (V2X AS) includes AF functionality, and may support
at least the following capabilities:
For V2X services handling,
\- Receive uplink data from the UE over unicast.
\- Send downlink data to the UE over unicast.
\- Request QoS Sustainability Analytics for potential QoS changes in a
geographic area from NWDAF via NEF.
For V2X service parameters provisioning,
\- Provision the 5GC with parameters for V2X communications over PC5 and Uu
reference points.
\- Provision the UE with parameters for V2X communications over PC5 reference
point and/or Uu reference point.
NOTE: The V2X Application Servers for V2X services handling and V2X service
parameter provisioning can be the same or different.
### 4.4.4 AMF
In addition to the functions defined in TS 23.501 [6], the AMF performs the
following functions:
\- Obtain from UDM the subscription information related to V2X and store them
as part of the UE context data.
\- Select a PCF supporting V2X Policy/Parameter provisioning and report the
PC5 Capability for V2X to the selected PCF.
\- Obtain from PCF the PC5 QoS information related to V2X and store it as part
of the UE context data.
\- Provision the NG-RAN with indication about the UE authorization status
about V2X communication over PC5 reference point.
\- Provision the NG-RAN with PC5 QoS parameters related to V2X communication.
### 4.4.5 UDM
In addition to the functions defined in TS 23.501 [6], the UDM performs the
following functions:
\- Subscription management for V2X communication over PC5 reference point.
### 4.4.6 UDR
In addition to the functions defined in TS 23.501 [6], the UDR performs the
following functions:
\- Stores V2X service parameters.
### 4.4.7 NRF
In addition to the functions defined in TS 23.501 [6], the NRF performs the
following functions:
\- PCF discovery by considering V2X capability.
# 5 High level functionality and features
## 5.1 Authorization and Provisioning for V2X communications
### 5.1.1 General
In 5GS, the parameters for V2X communications over PC5 and Uu reference points
may be made available to the UE in following ways:
\- pre-configured in the ME; or
\- configured in the UICC; or
\- preconfigured in the ME and configured in the UICC; or
\- provided/updated by the V2X Application Server via PCF and/or V1 reference
point; or
\- provided/updated by the PCF to the UE.
If the same parameters described in clauses 5.1.2.1 and 5.1.3.1 are provided
by different sources, the UE shall consider them in the following priority
order:
\- provided/updated by the PCF;
\- provided/updated by the V2X Application Server via V1 reference point;
\- configured in the UICC;
\- pre-configured in the ME.
The parameters provided/updated by the V2X Application Server via V1 reference
point may need to be complemented with configuration data from other sources
listed above.
The basic principles of service authorization and provisioning for V2X
communication over PC5 reference point and provisioning for V2X communication
over Uu reference point are:
\- The UE may be authorized to use V2X communication over PC5 reference point
on a per PLMN basis by the PCF in the HPLMN.
\- The PCF in the HPLMN merges authorization information from home and other
PLMNs and provides the UE with the final authorization information.
\- The PCF in the VPLMN or HPLMN may revoke the authorization (via H-PCF when
roaming) at any time by using the UE Configuration Update procedure for
transparent UE Policy delivery procedure defined in clause 4.2.4.3 of TS
23.502 [7].
\- The provisioning to UE for V2X communication over PC5 and Uu reference
points is controlled by the PCF and may be triggered by UE. The PCF includes
the V2X Policy/parameters for V2X communications over PC5 reference point as
specified in clause 5.1.2.1 and/or the V2X Policy/parameters for V2X
communications over Uu reference point as specified in clause 5.1.3.1 into a
Policy Section identified by a Policy Section Identifier (PSI) as specified in
clause 6.1.2.2.2 of TS 23.503 [16].
### 5.1.2 Authorization and Provisioning for V2X communications over PC5
reference point
#### 5.1.2.1 Policy/Parameter provisioning
The following sets of information for V2X communications over PC5 reference
point is provisioned to the UE:
1) Authorization policy:
\- When the UE is \"served by E-UTRA\" or \"served by NR\":
\- PLMNs in which the UE is authorized to perform V2X communications over PC5
reference point when \"served by E-UTRA\" or \"served by NR\".
For each above PLMN:
\- RAT(s) over which the UE is authorized to perform V2X communications over
PC5 reference point.
\- When the UE is \"not served by E-UTRA\" and \"not served by NR\":
\- Indicates whether the UE is authorized to perform V2X communications over
PC5 reference point when \"not served by E-UTRA\" and \"not served by NR\".
\- RAT(s) over which the UE is authorized to perform V2X communications over
PC5 reference point.
NOTE 1: In this specification, _{When the UE is \"served by E-UTRA\" or
\"served by NR\"}_ and _{When the UE is \"not served by E-UTRA\" and \"not
served by NR\"}_ are relevant to V2X communications over PC5 reference point.
2) Radio parameters when the UE is \"not served by E-UTRA\" and \"not served
by NR\":
\- Includes the radio parameters per PC5 RAT (i.e. LTE PC5, NR PC5) with
Geographical Area(s) and an indication of whether they are \"operator
managed\" or \"non-operator managed\". These radio parameters (e.g., frequency
bands) are defined in TS 36.331 [14] and TS 38.331 [15]. The UE uses the radio
parameters to perform V2X communications over PC5 reference point when \"not
served by E-UTRA\" and \"not served by NR\" only if the UE can reliably locate
itself in the corresponding Geographical Area. Otherwise, the UE is not
authorized to transmit.
NOTE 2: Whether a frequency band is \"operator managed\" or \"non-operator
managed\" in a given Geographical Area is defined by local regulations.
3) Policy/parameters for PC5 RAT selection and for PC5 Tx Profile selection:
\- The mapping of V2X service types to PC5 RAT(s) (e.g. LTE PC5, NR PC5 or
both), and for LTE PC5 to the corresponding Tx Profiles (see TS 36.300 [9] for
further information).
4) Policy/parameters related to privacy:
\- The list of V2X service types, with Geographical Area(s) that require
privacy support.
\- A privacy timer value indicating the duration after which the UE shall
change each source Layer-2 ID self-assigned by the UE when privacy is
required.
5) Policy/parameters when LTE PC5 is selected:
Same as specified in TS 23.285 [8] clause 4.4.1.1.2 item 3) Policy/parameters
except for the mapping of V2X service types to Tx Profiles and the list of V2X
services with Geographical Area(s) that require privacy support.
6) Policy/parameters when NR PC5 is selected:
\- The mapping of V2X service types to V2X frequencies with Geographical
Area(s).
\- The mapping of V2X service types to the default mode of communication (i.e.
broadcast mode, groupcast mode or unicast mode).
\- The mapping of V2X service types to Destination Layer-2 ID(s) for
broadcast.
\- The mapping of V2X service types to Destination Layer-2 ID(s) for groupcast
mode communication.
\- The mapping of V2X service types to default Destination Layer-2 ID(s) for
initial signalling to establish unicast connection.
NOTE 3: The same default Destination Layer-2 ID for unicast initial signalling
can be mapped to more than one V2X service types. In the case where different
V2X services are mapped to distinct default Destination Layer-2 IDs, when the
UE intends to establish a single unicast link that can be used for more than
one V2X service types, the UE can select any of the default Destination
Layer-2 IDs to use for the initial signalling.
\- The mapping of V2X service types to PC5 QoS parameters defined in clause
5.4.2 (i.e. PQI and conditionally other parameters such as MFBR/GFBR, etc.).
\- AS layer configurations (see TS 38.331 [15]), e.g. the mapping of PC5 QoS
profile(s) to radio bearer(s), when the UE is \"not served by E-UTRA\" and
\"not served by NR\".
\- The PC5 QoS profile contains PC5 QoS parameters described in clause 5.4.2,
and value for the QoS characteristics regarding Priority Level, Averaging
Window, Maximum Data Burst Volume if default value is not used as defined in
Table 5.4.4-1.
7) Validity timer indicating the expiration time of the V2X Policy/Parameter.
The above parameter sets from bullet 2) to 6) may be configured in the UE
through the V1 reference point by the V2X Application Server.
#### 5.1.2.2 Principles for applying parameters for V2X communications over
PC5 reference point
For V2X communication over PC5 reference point, the operator may pre-configure
the UEs with the required provisioning parameters for V2X communication,
without the need for the UEs to connect to the 5GC to get this initial
configuration. The following apply:
\- The provisioning parameters for V2X communications over PC5 reference point
may be configured in the UICC, in the ME, or in both the UICC and the ME.
\- The ME provisioning parameters shall not be erased when a USIM is
deselected or replaced.
\- If both the UICC and the ME contain the same set of overlapping
provisioning parameters, the set of parameters from the UICC shall take
precedence.
\- The provisioning parameters from the PCF or V2X Application Server via V1
reference point shall take precedence over the pre-configured parameters in
the ME and UICC as defined in clause 5.1.1.
\- The UE shall use radio resources for V2X communications over PC5 reference
point as follows:
\- While a UE has a serving cell and is camped on a cell and the UE intends to
use for V2X service the radio resources (i.e. carrier frequency) operated by
this cell, then the UE shall use the radio resource description indicated by
this cell the UE is camped on and ignore any radio resource description of the
same radio resource provisioned in the ME or the UICC. If the cell does not
provide radio resources for V2X service, the UE shall not perform V2X message
transmission and reception on radio resources operated by this cell.
\- If the UE intends to use \"operator-managed\" radio resources (i.e. carrier
frequency) for V2X service that are not operated by the UE\'s serving cell, as
specified in clause 5.1.2.1, or if the UE is out of coverage, the UE shall
search for a cell in any PLMN that is operating the provisioned radio
resources (i.e. carrier frequency) as defined in TS 36.300 [9] and TS 36.304
[10] (if LTE based PC5 is selected for the V2X communication) or as defined in
TS 38.300 [11] and TS 38.304 [12] (if NR based PC5 is selected for the V2X
communication), and:
\- If the UE finds such a cell in the registered PLMN or a PLMN equivalent to
the registered PLMN, and authorization for V2X communications over PC5
reference point to this PLMN is confirmed, the UE shall use the radio resource
description indicated by that cell. If that cell does not provide radio
resources for V2X service, the UE shall not perform V2X message transmission
and reception on those radio resources.
\- If the UE finds such a cell but not in the registered PLMN or a PLMN
equivalent to the registered PLMN, and that cell belongs to a PLMN authorized
for V2X communications over PC5 reference point and provides radio resources
for V2X service then the UE shall perform PLMN selection triggered by V2X
communications over PC5 reference point as defined in TS 23.122 [13]. If the
UE has an ongoing emergency session via IMS, it shall not trigger any PLMN
selection due to V2X communication over PC5 reference point.
\- If the UE finds such cell but not in a PLMN authorized for V2X
communications over PC5 reference point the UE shall not use V2X
communications over PC5 reference point.
\- If the UE does not find any such cell in any PLMN, then the UE shall
consider itself \"not served by NR or E-UTRA\" and use radio resources
provisioned in the ME or the UICC. If no such provision exists in the ME or
the UICC or the provision does not authorize V2X communications over PC5
reference point, then the UE is not authorized to transmit.
\- If the UE intends to use \"non-operator-managed\" radio resources (i.e.
carrier frequency) for V2X service, according to TS 36.331 [14] or TS 38.331
[15] and as specified in clause 5.1.2.1, then the UE shall perform V2X
communication over PC5 using resource provisioned in the ME or the UICC. If no
such provision exists in the ME or the UICC or the provision does not
authorize V2X communications over PC5 reference point, then the UE is not
authorized to transmit.
\- The UE provisioning shall support setting Geographical Areas.
NOTE 1: It is possible for a UE to use other radio resources for V2X service
based on the Geographical Area instead of those operated by the serving NG-RAN
cell, when provisioned in the UE, even if the UE\'s serving cell offers normal
service and the SIBs for NR sidelink communication or V2X sidelink
communication defined in TS 38.331 [15] indicates that the service (V2X
communication) is available. This is to cover the scenario when e.g. the radio
resources used for V2X communications over PC5 reference point are not owned
by the serving network of the UE.
NOTE 2: When cross-carrier operation is supported, according to TS 36.331 [14]
or TS 38.331 [15], a UE can be instructed by its serving cell to perform V2X
communication over a different carrier frequency. The UE is still considered
as \"served by NR or E-UTRA\" in this case.
NOTE 3: The scenario that a cell is detected and the cell does not provide
support for V2X communications over PC5 reference point when the UE attempts
to use a carrier frequency configured for V2X communications over PC5
reference point, is considered a configuration error. Therefore, the UE does
not transmit on that frequency to avoid interference to the network.
\- The V2X communications over PC5 reference point is only specified for
E-UTRA and NR.
NOTE 4: It is out of scope of the present specification to define how the UE
can locate itself in a specific Geographical Area. When the UE is in coverage
of a 3GPP RAT, it can for example, use information derived from the serving
PLMN. When the UE is not in coverage of a 3GPP RAT, it can use other
techniques, e.g. Global Navigation Satellite System (GNSS). User provided
location is not a valid input.
### 5.1.3 Authorization and provisioning for V2X communications over Uu
reference point
#### 5.1.3.1 Policy/Parameter provisioning
The following set of information may be provisioned to the UE for V2X
communications over Uu reference point:
1) Mapping of the V2X service types to:
\- PDU Session Type (i.e. IP type or Unstructured type);
\- Transport layer protocol (i.e. UDP or TCP, only applicable for IP PDU
Session type);
\- SSC Mode;
\- S-NSSAI(s);
\- DNN(s).
NOTE: Above listed information elements are optional and used by UE as UE
Local Configuration specified in TS 23.503 [16].
2) Validity timer indicating the expiration time of the V2X Policy/Parameter.
The following sets of information may be provisioned to the UE and is
applicable for V2X communications over both LTE-Uu and Uu reference points:
1) Mapping of the V2X service types to V2X Application Server address
information (consisting of IP address/FQDN and transport layer port#) for
unicast.
2) List of FQDNs or IP addresses of the V2X Application Servers, associated
with served geographical area information and list of PLMNs that the
configuration applies to.
## 5.2 V2X communication
### 5.2.1 V2X communication over PC5 reference point
#### 5.2.1.1 General
For V2X communication, two types of PC5 reference points exist: the LTE based
PC5 reference point as defined in TS 23.285 [8], and the NR based PC5
reference point as defined in clause 4.2.3. A UE may use either type of PC5 or
both for V2X communication depending on the services the UE supports. The V2X
communication over PC5 reference point supports roaming and inter-PLMN
operations. V2X communication over PC5 reference point is supported when UE is
\"served by NR or E-UTRA\" or when the UE is \"not served by NR or E-UTRA\".
A UE is authorized to transmit and receive V2X messages when it has valid
authorization and configuration as specified in clause 5.1.2.
The V2X communication over PC5 reference point has the following
characteristics:
\- V2X communication over LTE based PC5 reference point is connectionless,
i.e. broadcast mode at Access Stratum (AS) layer, and there is no signalling
over PC5 for connection establishment.
\- V2X communication over NR based PC5 reference point supports broadcast
mode, groupcast mode, and unicast mode at AS layer. If V2X application layer
of the UE indicates the mode of communication to V2X layer, the V2X layer
shall set the mode of communication based on the request of the V2X
application layer; otherwise, the V2X layer sets the mode of communication
based on the mapping information for a V2X service type defined in clause
5.1.2.1. The V2X layer indicates the mode of communication for the V2X service
type to the AS layer. Signalling over control plane over PC5 reference point
for unicast mode communication management is supported.
\- V2X services communication support between UEs over PC5 user plane.
\- Both IP based and non-IP based V2X services communication are supported
over PC5 reference point.
\- For IP based V2X services communication, only IPv6 is used. IPv4 is not
supported.
\- V2X messages are exchanged between UEs over PC5 user plane.
\- Both IP based and non-IP based V2X messages are supported over PC5
reference point.
\- For IP based V2X messages, only IPv6 is used. IPv4 is not supported.
The identifiers used in the V2X communication over PC5 reference point are
described in clause 5.6.1. UE decides on the type of PC5 reference point and
for LTE PC5 Tx Profile also to use for the transmission of a particular packet
based on the configuration described in clause 5.1.2. When the LTE based PC5
reference point is selected, the QoS handling corresponding procedures are
defined in TS 23.285 [8]. When NR based PC5 reference point is selected, the
QoS handling and procedures are defined in clauses 5.4.1 and 6.3.
If the UE has an ongoing emergency session via IMS, the ongoing emergency
session via IMS shall be prioritized over V2X communication over PC5 reference
point.
NOTE: The emergency session via IMS setup is based on appropriate
regional/national regulatory requirements and operator policies as defined in
TS 23.501 [6].
The security for V2X communication over PC5 reference point is provided with
mechanisms defined in TS 33.536 [26]. For broadcast and groupcast mode
communication, security is supported in the V2X application layer schemes
developed in other SDOs.
#### 5.2.1.2 Broadcast mode communication over PC5 reference point
Broadcast mode of communication is supported over both LTE based PC5 reference
point and NR based PC5 reference point. Therefore, when broadcast mode is
selected for transmission over PC5 reference point, PC5 RAT selection needs to
be performed based on configuration described in clause 5.1.2. Based on
configuration described in clause 5.1.2 and the availability of the
corresponding PC5 RAT(s) for the specific V2X service type, the V2X layer in
the UE determines PC5 RAT(s) and passes the packet to the applicable PC5 AS
(Access Stratum) layer(s) with the appropriate PC5 QoS parameters as defined
in clause 5.4.1.1.1
For LTE based PC5 reference point, broadcast mode is the only supported
communication mode, and the operation details are defined in TS 23.285 [8].
For NR based PC5 reference point, the broadcast mode also supports enhanced
QoS handling as defined in clause 5.4.1.
#### 5.2.1.3 Groupcast mode communication over PC5 reference point
Groupcast mode communication is only supported over NR based PC5 reference
point and applies to all types of groups, i.e. Application Layer connection-
less group and Application Layer managed group.
For Application Layer managed group, the following applies:
\- If the V2X application layer provides a group size and a member ID, the V2X
layer passes them to the AS layer for groupcast control, as defined in TS
38.300 [11].
NOTE: It is assumed that the V2X application layer provides accurate and up-
to-date information on the group size and the member ID.
QoS handling for groupcast mode communication is defined in clause 5.4.1.
#### 5.2.1.4 Unicast mode communication over PC5 reference point
Unicast mode of communication is only supported over NR based PC5 reference
point. Figure 5.2.1.4-1 illustrates an example of PC5 unicast links.
Figure 5.2.1.4-1: Example of PC5 Unicast Links
The following principles apply when the V2X communication is carried over PC5
unicast link:
\- A PC5 unicast link between two UEs allows V2X communication between one or
more pairs of peer V2X services in these UEs. All V2X services in the UE using
the same PC5 unicast link use the same Application Layer ID.
NOTE 1: An Application Layer ID can change in time as described in clauses
5.6.1.1 and 6.3.3.2, due to privacy. This does not cause a re-establishment of
a PC5 unicast link. The UE triggers a Link Identifier Update procedure as
specified in clause 6.3.3.2.
\- One PC5 unicast link supports one or more V2X service types) if these V2X
service types are at least associated with the pair of peer Application Layer
IDs for this PC5 unicast link. For example, as illustrated in Figure
5.2.1.4-1, UE A and UE B have two PC5 unicast links, one between peer
Application Layer ID 1/UE A and Application Layer ID 2/UE B and one between
peer Application Layer ID 3/UE A and Application Layer ID 4/UE B.
NOTE 2: A source UE is not required to know whether different target
Application Layer IDs over different PC5 unicast links belong to the same
target UE.
\- A PC5 unicast link supports V2X communication using a single network layer
protocol e.g. IP or non-IP.
\- A PC5 unicast link supports per-flow QoS model as specified in clause
5.4.1.
\- If multiple V2X service types use a PC5 unicast link, one PC5 QoS Flow
identified by PFI may be associated with more than one V2X service types.
When the Application layer in the UE initiates data transfer for a V2X service
type which requires unicast mode of communication over PC5 reference point:
\- the UE shall reuse an existing PC5 unicast link if the pair of peer
Application Layer IDs and the network layer protocol of this PC5 unicast link
are identical to those required by the application layer in the UE for this
V2X service, and modify the existing PC5 unicast link to add this V2X service
type as specified in clause 6.3.3.4; otherwise
\- the UE shall trigger the establishment of a new PC5 unicast link as
specified in clause 6.3.3.1.
After successful PC5 unicast link establishment, UE A and UE B use the same
pair of Layer-2 IDs for subsequent PC5-S signalling message exchange and V2X
service data transmission as specified in clause 5.6.1.4. The V2X layer of the
transmitting UE indicates to the AS layer whether a transmission is for a
PC5-S signalling message (i.e. Direct Communication Request/Accept, Link
Identifier Update Request/Response/Ack, Disconnect Request/Response, Link
Modification Request/Accept, Keep-alive/Ack) or V2X service data.
For every PC5 unicast link, a UE self-assigns a distinct PC5 Link Identifier
that uniquely identifies the PC5 unicast link in the UE for the lifetime of
the PC5 unicast link. Each PC5 unicast link is associated with a Unicast Link
Profile which includes:
\- Application Layer ID and Layer-2 ID of UE A; and
\- Application Layer ID and Layer-2 ID of UE B; and
\- network layer protocol used on the PC5 unicast link; and
\- the information about PC5 QoS Flow(s). For each PC5 QoS Flow, the PC5 QoS
Context and the PC5 QoS Rule(s) as defined in clause 5.4.1.1.3.
For privacy reason, the Application Layer IDs and Layer-2 IDs may change as
described in clauses 5.6.1.1 and 6.3.3.2 during the lifetime of the PC5
unicast link and, if so, shall be updated in the Unicast Link Profile
accordingly. The UE uses PC5 Link Identifier to indicate the PC5 unicast link
to V2X Application layer, therefore V2X Application layer identifies the
corresponding PC5 unicast link even if there are more than one unicast link
associated with one V2X service type (e.g. the UE establishes multiple unicast
links with multiple UEs for a same V2X service type).
The Unicast Link Profile shall be updated accordingly after a Layer-2 link
modification for an established PC5 unicast link as specified in clause
6.3.3.4 or Layer-2 link identifier update as specified in clause 6.3.3.2.
Upon receiving an indication from the AS layer that the PC5-RRC connection was
released due to RLF, the V2X layer in the UE locally releases the PC5 unicast
link associated with this PC5-RRC connection. The AS layer uses PC5 Link
Identifier to indicate to the V2X layer the PC5 unicast link whose PC5-RRC
connection was released.
When the PC5 unicast link has been released as specified in clause 6.3.3.3,
the V2X layer of each UE for the PC5 unicast link informs the AS layer that
the PC5 unicast link has been released. The V2X layer uses PC5 Link Identifier
to indicate the released unicast link.
#### 5.2.1.5 IP address allocation
For unicast mode of V2X communication over PC5 reference point, the following
mechanism for IP address/prefix allocation may be used:
a) IPv6 Stateless Address auto configuration specified in RFC 4862 [21] for
assignment of IPv6 prefix, with one of the two UEs acting as IPv6 default
router.
NOTE 1: Which UE acts as an IPv6 default router is negotiated during secure
layer-2 link establishment by exchanging the IP Address Configuration as
described in clause 6.3.3.1.
b) IPv6 link-local addresses as defined in RFC 4862 [21] are formed by UEs
locally. The IPv6 link-local addresses are exchanged during the establishment
of a secure layer-2 link over PC5 reference point as described in clause
6.3.3.1. The UEs shall disable duplicate address detection after the layer-2
link is established.
For broadcast and groupcast modes of V2X communication over PC5 reference
point, the following source IP address management applies:
\- The UE configures a link local IPv6 address to be used as the source IP
address, as defined in clause 4.5.3 of TS 23.303 [17]. The UE may use this IP
address for V2X communication over PC5 reference point without sending
Neighbour Solicitation and Neighbour Advertisement message for Duplicate
Address Detection.
NOTE 2: The destination IP address management for broadcast and groupcast
modes of V2X communication over PC5 reference point is left to UE
implementation.
### 5.2.2 V2X communication over Uu reference point
#### 5.2.2.1 V2X communication via unicast
The V2X communication via unicast over the Uu reference point supports non-
roaming and roaming operations.
For transport of V2X messages over Uu reference point:
\- the mechanisms defined in TS 23.501 [6] and TS 23.502 [7] can be used to
establish the suitable PDU Sessions, and V2X messages are routed towards V2X
Application Server or towards UEs with existing unicast routing.
### 5.2.3 V2X communication over PC5 or Uu reference point
#### 5.2.3.1 General
V2X communication over PC5 reference point may use different protocols and
formats than V2X communication over Uu reference point.
For a V2X service type that can use PC5 reference points or Uu reference point
for the transmission of the same V2X messages, the following additional
consideration apply for transport of V2X messages over Uu reference point:
\- for transport of non-IP based V2X messages from the application:
\- IP encapsulation (i.e. IP PDU Session type) or Unstructured PDU Session
type is used.
\- The UE determines which method between IP encapsulation and Unstructured
PDU Session type is used for non-IP based V2X messages based on the UE
configuration as described in clause 5.1.3.1. If no such configuration is
available, UE can use the method based on the UE implementation.
\- when IP PDU Session type is used for transport of IP based or non-IP based
V2X messages:
\- V2X messages are transported over UDP or TCP:
\- for non-IP based V2X messages from the application, UE may learn from V2X
Application Server or UE may be configured explicitly about a transport layer
protocol needs to be used or no restriction imposed by configuration.
\- for IP based V2X messages from the application, UE uses the transport layer
protocol set by the upper layer.
\- the UE sends a V2X message to a V2X Application Server address. The
destined V2X Application Server address is derived from the V2X service type
and the UE configuration as described in clause 5.1.3.1, and the V2X
Application Server receives the V2X message in a UDP/IP packet or a TCP/IP
packet on a V2X Application Server address.
\- when Unstructured PDU Session type is used for transport of non-IP based
V2X messages:
\- V2X messages are transported to the V2X Application Server as defined in
clause 5.6.10.3 of TS 23.501 [6].
Latency reduction for V2X message transfer via unicast may be achieved by
using various mechanisms, including via e.g., edge computing defined in TS
23.501 [6], in clause 5.6.7 \"Application Function influence on traffic
routing\" and clause 5.13 \"Support for Edge Computing\", where the V2X
Application Server acts as an Application Function.
## 5.3 V2X Application Server discovery
### 5.3.1 General
A UE needs to discover the V2X Application Server(s), when V2X communication
over Uu operation mode is used. The V2X Application Server address information
may be configured on the UE or provisioned over N1 reference point, as
specified in clause 5.1.3.1.
When the configuration contains the FQDN(s), the UE shall perform DNS to
resolve the address(es) of the V2X Application Server. The UE may use the
configured V2X Application Server information only in the designated
geographical area. When the UE changes serving PLMN or crosses configured
geographic areas, it should perform address resolution again.
NOTE: When the V2X Application Server is notified by SMF indicating the DNAI
change, as specified in clause 5.6.7 of TS 23.501 [6], the application layer
can trigger the UE to perform DNS to resolve the address(es) of the V2X
Application Server.
### 5.3.2 Multiple V2X Application Server and Localized V2X Application Server
discovery and routing
Multiple V2X Application Servers may be involved in the V2X communication,
each providing particular V2X services and/or serving a particular
geographical region. Therefore, the V2X Application Server address information
as specified in clause 5.1.3.1 can contain multiple servers\' information.
When multiple V2X Application Servers are configured, the application layer
will choose the proper V2X Application Server to use.
When localized V2X Application Servers are deployed, Anycast may be used to
conceal the server change from the UE. In this case, a FQDN is configured for
a large region, e.g. the entire PLMN, and the UE only needs to resolve it once
to an Anycast address. The UPF is responsible for routing the traffic to the
appropriate local V2X Application Servers based on Anycast address.
## 5.4 QoS handling for V2X communication
### 5.4.1 QoS handling for V2X communication over PC5 reference point
#### 5.4.1.1 QoS model
##### 5.4.1.1.1 General overview
For LTE based PC5, the QoS handling is defined in TS 23.285 [8], based on
ProSe Per-Packet Priority (PPPP) and ProSe Per-Packet Reliability (PPPR).
For NR based PC5, a QoS model similar to that defined in TS 23.501 [6] for Uu
reference point is used, i.e. based on 5QIs, with additional parameter of
Range as described in clauses 5.4.2, 5.4.3 and 5.4.4. For the V2X
communication over NR based PC5 reference point, a PC5 QoS Flow is associated
with a PC5 QoS Rule and the PC5 QoS parameters as defined in clause 5.4.2. A
set of standardized PC5 5QIs (PQI) are defined in clause 5.4.4. The UE may be
configured with a set of default PC5 QoS parameters to use for the V2X service
types, as defined in clause 5.1.2.1. For NR based unicast, groupcast and
broadcast mode communication over PC5, Per-flow QoS model for PC5 QoS
management shall be applied. Figure 5.4.1.1.1-1 illustrates an example mapping
of Per-flow QoS model for NR PC5. Details of PC5 QoS Rules and PFI related
operations are described in clauses 5.4.1.1.2 and 5.4.1.1.3.
Figure 5.4.1.1.1-1: Per-Flow PC5 QoS Model for NR PC5
The following principles apply when the V2X communication is carried over PC5
reference point:
\- Application layer may set the V2X Application Requirements for the V2X
communication, using either TS 23.285 [8] defined PPPP and PPPR model or the
PQI and Range model as described in clause 5.4.4. Depending on the type of PC5
reference point, i.e. LTE based or NR based, selected for the transmission,
the UE may map the application layer provided V2X Application Requirements to
the suitable QoS parameters to be passed to the lower layer. The mapping
between the two QoS models is defined in clause 5.4.2. For V2X communication
over NR based PC5, different V2X packets may require different QoS treatments.
In that case, the V2X packets shall be sent from the V2X layer to the Access
Stratum layer within PC5 QoS Flows identified by different PFIs.
\- When groupcast mode of V2X communication over NR based PC5 is used, a Range
parameter is associated with the QoS parameters for the V2X communication. The
Range may be provided by V2X application layer or use a default value mapped
from the V2X service type based on configuration as defined in clause 5.1.2.1.
The Range indicates the minimum distance that the QoS parameters need to be
fulfilled. The Range parameter is passed to AS layer together with the QoS
parameters for dynamic control.
\- NR based PC5 supports three communication modes, i.e. broadcast, groupcast,
and unicast. The QoS handling of these different modes are described in
clauses 5.4.1.2 to 5.4.1.4.
\- The UE may handle traffic using broadcast, groupcast, and unicast mode
communication by taking all their priorities, e.g. indicated by PQIs, into
account as described in clause 5.4.3.3.
\- For broadcast and groupcast modes of V2X communication over NR based PC5,
standardized PQI values are applied by the UE, as there is no signalling over
PC5 reference point for these cases.
\- When network scheduled operation mode is used, the UE-PC5-AMBR for NR based
PC5 applies to all types of communication modes, and is used by NG-RAN for
capping the UE\'s NR based PC5 transmission in the resources management. The
UE-PC5-AMBR shall be set to the sum of the aggregate maximum bit rate of all
types of communication (i.e. unicast, groupcast and broadcast modes) over PC5
reference point.
##### 5.4.1.1.2 Deriving PC5 QoS parameters and assigning PFI for PC5 QoS Flow
The following description applies to for both network scheduled operation mode
and UE autonomous resources selection mode.
When a service data packet or request from the V2X application layer is
received, the UE determines if there is any existing PC5 QoS Flow matching the
service data packet or request, i.e. based on the PC5 QoS Rules for the
existing PC5 QoS Flow(s).
If there is no PC5 QoS Flow matching the service data packet or request, the
UE derives PC5 QoS parameters defined in clause 5.4.2 as below:
\- If the application layer provides the V2X Application Requirements for the
V2X service type (e.g. priority requirement, reliability requirement, delay
requirement, range requirement), the V2X layer determines the PC5 QoS
parameters based on the V2X Application Requirements;
\- Otherwise, the V2X layer determines the PC5 QoS parameters based on the
mapping of the V2X service type to PC5 QoS parameters defined in clause
5.1.2.1.
NOTE 1: Details of V2X Application Requirements for the V2X service type is up
to implementation and out of scope of this specification.
After deriving the PC5 QoS parameters, the UE performs the following:
\- If there is no existing PC5 QoS Flow that fulfils the derived PC5 QoS
parameters:
\- The UE creates a new PC5 QoS Flow for the derived PC5 QoS parameters; and
\- The UE then assigns a PFI and derives PC5 QoS Rule for this PC5 QoS Flow.
\- Otherwise, the UE updates the PC5 Packet Filter Set in the PC5 QoS Rule for
such PC5 QoS Flow.
NOTE 2: It is expected that the application layer is capable of
differentiating traffic from different V2X services that is transported within
the same PC5 QoS Flow.
For V2X communication over NR PC5 reference point, the PC5 QoS Flow is the
finest granularity of QoS differentiation in the same destination identified
by Destination Layer-2 ID. User Plane traffic with the same PFI receives the
same traffic forwarding treatment (e.g. scheduling, admission threshold). The
PFI is unique within a same destination.
##### 5.4.1.1.3 Handling of PC5 QoS Flows based on PC5 QoS Rules
For each communication mode (e.g. broadcast, groupcast, unicast), the UE
maintains the PC5 QoS Context and PC5 QoS Rule(s) for each PC5 QoS Flow
identified by a PC5 QoS Flow Identifier (PFI) per destination identified by
Destination Layer-2 ID.
The following information is maintained in the V2X layer of the UE:
\- A PC5 QoS Context includes the following information:
\- PFI;
\- PC5 QoS parameters (i.e. PQI and conditionally other parameters such as
MFBR/GFBR, Range, etc.) as defined in clause 5.4.2; and
\- the V2X service type(s).
\- One or more PC5 QoS Rule(s). Each PC5 QoS Rule contains the following
information:
\- PFI;
\- a PC5 Packet Filter Set as defined in clause 5.4.1.1.4; and
\- a precedence value. The precedence value determines the order in which the
PC5 QoS Rules are evaluated. The PC5 QoS Rule with lower precedence value is
evaluated before those with the higher precedence values.
NOTE: How to set the precedence value is up to UE implementation.
When the UE assigns a new PFI for V2X service type, the UE stores it with the
corresponding PC5 QoS Context and PC5 QoS Rule(s) for the destination. When
the UE releases the PFI, the UE removes the corresponding PC5 QoS Context and
PC5 QoS Rule(s) for the destination. For unicast, the Unicast Link Profile
defined in clause 5.2.1.4 contains additional information mapped from PFI for
unicast operation.
The V2X layer provides information for PC5 QoS operations per destination
(e.g. identified by Destination Layer-2 ID) to AS layer for Per-flow QoS model
operations as below:
1) To add a new PC5 QoS Flow or to modify any existing PC5 QoS Flow, the V2X
layer provides the following information for the PC5 QoS Flow to AS layer.
\- the PFI;
\- the corresponding PC5 QoS parameters; and
\- source/destination Layer-2 IDs for broadcast and groupcast mode
communication, or the PC5 Link Identifier for unicast.
2) To remove any existing PC5 QoS Flow, the V2X layer provides the following
information for the PC5 QoS Flow to AS layer.
\- the PFI; and
\- source/destination Layer-2 IDs for broadcast and groupcast mode
communication, or the PC5 Link Identifier for unicast.
In addition, the V2X layer also provides the communication mode (e.g.
broadcast, groupcast, unicast) and radio frequencies to the AS layer for the
PC5 operation. The radio frequencies are determined based on the V2X service
type. The V2X layer ensures that V2X service types associated with different
radio frequencies are classified into distinct PC5 QoS Flows.
Figure 5.4.1.1.3-1 illustrated an example of the classification and marking of
user plane traffic using the PC5 QoS Rules, and the mapping of PC5 QoS Flows
to radio resources at access stratum layer.
Figure 5.4.1.1.3-1: Handling of PC5 QoS Flows based on PC5 QoS Rules
As illustrated in Figure 5.4.1.1.3-1, for a given pair of source and
destination Layer-2 IDs, there can be multiple radio bearers, each
corresponding to a different PC5 QoS level. The AS layer can determine the
mapping of multiple PC5 QoS Flows to the same radio bearer based on the
information provided. For broadcast and groupcast mode communication, the L2
link goes to all UEs in proximity identified by the destination Layer-2 ID.
##### 5.4.1.1.4 PC5 Packet Filter Set
PC5 Packet Filter Set supports two types of packet filters, i.e. the V2X IP
Packet Filter Set and the V2X Packet Filter Set. A PC5 QoS Rule contains
either the V2X IP Packet Filter Set or the V2X Packet Filter Set.
The V2X IP Packet Filter Set has the same format as the IP Packet Filter Set
defined in TS 23.501 [6] clause 5.7.6.2.
The V2X Packet Filter Set shall support Packet Filters based on at least any
combination of:
\- V2X service type;
\- Source/Destination Layer-2 ID;
\- Application Layer ID (e.g. Station ID).
#### 5.4.1.2 QoS handling for broadcast mode V2X communication over PC5
reference point
When PC5 broadcast is used for the transmission of V2X service data, the
following principles are followed for both network scheduled operation mode
and UE autonomous resources selection mode:
\- PC5 QoS parameters defined in clause 5.4.2 are applied.
\- The V2X layer determines the PC5 QoS parameters based on the V2X
Application Requirements (if available) or the mapping of the V2X service type
to PC5 QoS parameters, as defined in clause 5.4.1.1.2.
\- The V2X layer assigns a PC5 QoS Flow Identifier (PFI) and derives the PC5
QoS Rule for the PC5 QoS Flow, and associates the PC5 QoS parameters to the
PFI.
\- The V2X layer provides the PFI and the associated PC5 QoS parameters to AS
layer for Per-flow QoS model operations.
\- The V2X layer determines the PFI based on the PC5 QoS Rule for the V2X
service data from the V2X application layer, and passes the V2X service data
along with PFI to the AS layer for transmission.
When the autonomous resources selection mode is used, following additional
principle applies:
\- The UE can use the PC5 QoS parameters for PC5 QoS handling.
When the network scheduled operation mode for NR PC5 is used, the following
additional principles apply:
\- The UE provides PC5 QoS information (related to PC5 QoS parameters),
Destination Layer-2 ID(s) and communication mode to the NG-RAN and NG-RAN may
provide AS layer configurations and configure the mapping of PC5 QoS flow to
radio bearer as defined in TS 38.331 [15] and TS 36.331 [14].
\- The UE provides PC5 QoS information (related to PC5 QoS parameters) and
Destination information (related to Destination Layer-2 ID(s)) to the NG-RAN
for resource request as defined in TS 38.331 [15] and TS 36.331 [14].
\- The NG-RAN authorizes the UE-provided PC5 QoS information based on PCF-
provisioned PC5 QoS parameters as defined in clause 6.5.7.
\- The NG-RAN uses UE-PC5-AMBR for capping the UE PC5 transmission in the
resources management.
#### 5.4.1.3 QoS handling for groupcast mode V2X communication over PC5
reference point
The QoS handling described in clause 5.4.1.2 is applied.
#### 5.4.1.4 QoS handling for unicast mode V2X communication over PC5
reference point
The QoS handling described in clause 5.4.1.2 is applied with the following
additions:
\- The PFI and PC5 QoS parameters are negotiated during the Layer-2 link
establishment procedure, as described in clause 6.3.3.1, or during the Layer-2
link modification procedure, as described in clause 6.3.3.4.
When the network scheduled operation mode for NR PC5 is used, following
additional principle applies:
\- NG-RAN uses the PC5 LINK-AMBR for capping the UE PC5 unicast link
transmission in the resources management.
### 5.4.2 PC5 QoS parameters
#### 5.4.2.1 PQI
A PQI is a special 5QI, as defined in clause 5.7.2.1 of TS 23.501 [6], and is
used as a reference to PC5 QoS characteristics defined in clause 5.4.3, i.e.
parameters that control QoS forwarding treatment for the packets over PC5
reference point.
Standardized PQI values have one-to-one mapping to a standardized combination
of PC5 QoS characteristics as specified in Table 5.4.4-1.
#### 5.4.2.2 PC5 Flow Bit Rates
For GBR QoS Flows only, the following additional PC5 QoS parameters exist:
\- Guaranteed Flow Bit Rate (GFBR);
\- Maximum Flow Bit Rate (MFBR).
The GFBR and MFBR as defined in clause 5.7.2.5 of TS 23.501 [6] are used for
bit rate control on PC5 reference point over the Averaging Time Window. For
PC5 communication, the same GFBR and MFBR are used for both directions.
#### 5.4.2.3 PC5 Link Aggregated Bit Rates
A PC5 unicast link is associated with the following aggregate rate limit QoS
parameter:
\- per link Aggregate Maximum Bit Rate (PC5 LINK-AMBR).
The PC5 LINK-AMBR limits the aggregate bit rate that can be expected to be
provided across all Non-GBR QoS Flows with a peer UE over PC5 unicast link.
The PC5 LINK-AMBR is measured over an AMBR averaging window which is a
standardized value. The PC5 LINK-AMBR is not applicable to GBR QoS Flows. PC5
LINK-AMBR is applied to one PC5 unicast link, which means aggregate bit rate
of one PC5 unicast link should not exceed PC5 LINK-AMBR.
NOTE: The AMBR averaging window is only applied to PC5 LINK-AMBR measurement.
#### 5.4.2.4 Range
The Range value indicates the applicability of the PC5 QoS parameters in PC5
communication, i.e. when the receiving UEs are not within the Range specified
distance from the transmitting UE, the communication is best effort. Lower
layer (PHY/MAC layer) may use the Range to determine the corresponding packet
handling, e.g. HARQ as defined in TS 38.300 [11], to achieve the QoS guarantee
indicated by PC5 QoS parameters.
Range is in the unit of meters. The UE is configured with the maximum Range
value it can use for a particular V2X service. A V2X service may request a
different range value, and the V2X layer ensures that it does not exceed the
maximum Range value.
Range is only used for groupcast mode communication over PC5 reference point.
#### 5.4.2.5 Default Values
A UE may be configured with default values for PC5 QoS parameters for a
particular V2X service type as specified in clause 5.1.2.1. The default value
will be used if the corresponding PC5 QoS parameter is not provided by upper
layer.
### 5.4.3 PC5 QoS characteristics
#### 5.4.3.1 General
This clause specifies the PC5 QoS characteristics associated with PQI. The
following characteristics defined in TS 23.501 [6] applies, with differences
explained in following clauses:
1 Resource Type (GBR, Delay critical GBR or Non-GBR);
2 Priority Level;
3 Packet Delay Budget;
4 Packet Error Rate;
5 Averaging window (for GBR and Delay-critical GBR resource type only);
6 Maximum Data Burst Volume (for Delay-critical GBR resource type only).
Standardized or pre-configured PC5 QoS characteristics, are indicated through
the PQI value.
V2X layer may derive non-standardized PC5 QoS characteristics by overriding
the standardized or pre-configured value of PC5 QoS characteristics based on
V2X Application Requirements from V2X application layer and provide the whole
set of non-standardized PC5 QoS characteristics to AS layer.
NOTE: Non-standardized PC5 QoS characteristics only applies to UE autonomous
resources selection mode.
#### 5.4.3.2 Resource Type
Resource Type is defined in clause 5.7.3.2 of TS 23.501 [6].
#### 5.4.3.3 Priority Level
The Priority Level for NR PC5 has the same format and meaning as the Priority
value of the ProSe Per-Packet Priority (PPPP) for LTE PC5 defined in TS 23.285
[8]. For LTE PC5, the PPPP value also reflects the latency requirement and the
PDB derivation is according to TS 23.285 [8], i.e. the low PDB is mapped to
the high priority PPPP value. On the other hand, for NR PC5, the PDB is
derived from the PQI table as defined in clause 5.4.4.
NOTE: Using the same format for Priority Level and PPPP provides better
backward compatibility.
The Priority Level shall be used to different treatment of V2X service data
across different modes of communication, i.e. broadcast, groupcast, and
unicast. In the case when all QoS requirements cannot be fulfilled for all the
PC5 service data associated with that PC5 reference point, the Priority Level
shall be used to select for which PC5 service data the QoS requirements are
prioritized such that a PC5 service data packet with Priority Level value N is
prioritized over a PC5 service data packet with higher Priority Level values,
i.e. N+1, N+2, etc. (lower number meaning higher priority).
#### 5.4.3.4 Packet Delay Budget
The Packet Delay Budget (PDB) associated with the PQI is equivalent to the PDB
defined in clause 5.7.3.4 of TS 23.501 [6]. However, when used for PC5
communication, the PDB associated with the PQI defines an upper bound for the
time that a packet may be delayed between sending UE and receiving UE(s) over
PC5 reference point.
#### 5.4.3.5 Packet Error Rate
The Packet Error Rate (PER) is defined in clause 5.7.3.5 of TS 23.501 [6].
#### 5.4.3.6 Averaging Window
The Averaging Window is defined in clause 5.7.3.6 of TS 23.501 [6].
#### 5.4.3.7 Maximum Data Burst Volume
Maximum Data Burst Volume (MDBV) is defined in clause 5.7.3.7 of TS 23.501
[6].
MDBV denotes the largest amount of data that the PC5 reference point is
required to serve within a period of PDB of the PQI.
The MDBV may also be indicated by upper layer, it shall be used instead of the
default value.
### 5.4.4 Standardized PQI to QoS characteristics mapping
The one-to-one mapping of standardized PQI values to PC5 QoS characteristics
is specified in table 5.4.4-1.
Table 5.4.4-1: Standardized PQI to QoS characteristics mapping
+-------+-------+-------+-------+-------+-------+-------+-------+ | PQI | Res | De | P | P | De | De | Ex | | | ource | fault | acket | acket | fault | fault | ample | | Value | Type | Pri | Delay | Error | Ma | | Ser | | | | ority | B | | ximum | Aver | vices | | | | Level | udget | Rate | Data | aging | | | | | | | | Burst | W | | | | | | | | V | indow | | | | | | | | olume | | | +=======+=======+=======+=======+=======+=======+=======+=======+ | 21 | GBR | 3 | 20 ms | 1 | N/A | 2000 | Plato | | | | | | 0^-4^ | | ms | oning | | | | | | | | | be | | | | | | | | | tween | | | | | | | | | UEs | | | | | | | | | -- | | | | | | | | | H | | | | | | | | | igher | | | | | | | | | d | | | | | | | | | egree | | | | | | | | | of | | | | | | | | | a | | | | | | | | | utoma | | | | | | | | | tion; | | | | | | | | | | | | | | | | | | Plato | | | | | | | | | oning | | | | | | | | | be | | | | | | | | | tween | | | | | | | | | UE | | | | | | | | | and | | | | | | | | | RSU | | | | | | | | | -- | | | | | | | | | H | | | | | | | | | igher | | | | | | | | | d | | | | | | | | | egree | | | | | | | | | of | | | | | | | | | autom | | | | | | | | | ation | +-------+-------+-------+-------+-------+-------+-------+-------+ | 22 | (NO | 4 | 50 ms | 1 | N/A | 2000 | S | | | TE 1) | | | 0^-2^ | | ms | ensor | | | | | | | | | sh | | | | | | | | | aring | | | | | | | | | -- | | | | | | | | | h | | | | | | | | | igher | | | | | | | | | d | | | | | | | | | egree | | | | | | | | | of | | | | | | | | | autom | | | | | | | | | ation | +-------+-------+-------+-------+-------+-------+-------+-------+ | 23 | | 3 | 100 | 1 | N/A | 2000 | I | | | | | ms | 0^-4^ | | ms | nform | | | | | | | | | ation | | | | | | | | | sh | | | | | | | | | aring | | | | | | | | | for | | | | | | | | | auto | | | | | | | | | mated | | | | | | | | | dr | | | | | | | | | iving | | | | | | | | | -- | | | | | | | | | be | | | | | | | | | tween | | | | | | | | | UEs | | | | | | | | | or UE | | | | | | | | | and | | | | | | | | | RSU - | | | | | | | | | h | | | | | | | | | igher | | | | | | | | | d | | | | | | | | | egree | | | | | | | | | of | | | | | | | | | autom | | | | | | | | | ation | +-------+-------+-------+-------+-------+-------+-------+-------+ | 55 | No | 3 | 10 ms | 1 | N/A | N/A | C | | | n-GBR | | | 0^-4^ | | | ooper | | | | | | | | | ative | | | | | | | | | lane | | | | | | | | | c | | | | | | | | | hange | | | | | | | | | -- | | | | | | | | | h | | | | | | | | | igher | | | | | | | | | d | | | | | | | | | egree | | | | | | | | | of | | | | | | | | | autom | | | | | | | | | ation | +-------+-------+-------+-------+-------+-------+-------+-------+ | 56 | | 6 | 20 ms | 1 | N/A | N/A | Plato | | | | | | 0^-1^ | | | oning | | | | | | | | | i | | | | | | | | | nform | | | | | | | | | ative | | | | | | | | | exc | | | | | | | | | hange | | | | | | | | | -- | | | | | | | | | low | | | | | | | | | d | | | | | | | | | egree | | | | | | | | | of | | | | | | | | | a | | | | | | | | | utoma | | | | | | | | | tion; | | | | | | | | | | | | | | | | | | Plato | | | | | | | | | oning | | | | | | | | | -- | | | | | | | | | i | | | | | | | | | nform | | | | | | | | | ation | | | | | | | | | sh | | | | | | | | | aring | | | | | | | | | with | | | | | | | | | RSU | +-------+-------+-------+-------+-------+-------+-------+-------+ | 57 | | 5 | 25 ms | 1 | N/A | N/A | C | | | | | | 0^-1^ | | | ooper | | | | | | | | | ative | | | | | | | | | lane | | | | | | | | | c | | | | | | | | | hange | | | | | | | | | -- | | | | | | | | | lower | | | | | | | | | d | | | | | | | | | egree | | | | | | | | | of | | | | | | | | | autom | | | | | | | | | ation | +-------+-------+-------+-------+-------+-------+-------+-------+ | 58 | | 4 | 100 | 1 | N/A | N/A | S | | | | | ms | 0^-2^ | | | ensor | | | | | | | | | i | | | | | | | | | nform | | | | | | | | | ation | | | | | | | | | sh | | | | | | | | | aring | | | | | | | | | -- | | | | | | | | | lower | | | | | | | | | d | | | | | | | | | egree | | | | | | | | | of | | | | | | | | | autom | | | | | | | | | ation | +-------+-------+-------+-------+-------+-------+-------+-------+ | 59 | | 6 | 500 | 1 | N/A | N/A | Plato | | | | | ms | 0^-1^ | | | oning | | | | | | | | | -- | | | | | | | | | repo | | | | | | | | | rting | | | | | | | | | to an | | | | | | | | | RSU | +-------+-------+-------+-------+-------+-------+-------+-------+ | 90 | Delay | 3 | 10 ms | 1 | 2000 | 2000 | C | | | Cri | | | 0^-4^ | bytes | ms | ooper | | | tical | | | | | | ative | | | GBR | | | | | | coll | | | | | | | | | ision | | | | | | | | | avoid | | | | | | | | | ance; | | | | | | | | | | | | | | | | | | S | | | | | | | | | ensor | | | | | | | | | sh | | | | | | | | | aring | | | | | | | | | -- | | | | | | | | | H | | | | | | | | | igher | | | | | | | | | d | | | | | | | | | egree | | | | | | | | | of | | | | | | | | | a | | | | | | | | | utoma | | | | | | | | | tion; | | | | | | | | | | | | | | | | | | Video | | | | | | | | | sh | | | | | | | | | aring | | | | | | | | | -- | | | | | | | | | h | | | | | | | | | igher | | | | | | | | | d | | | | | | | | | egree | | | | | | | | | of | | | | | | | | | autom | | | | | | | | | ation | +-------+-------+-------+-------+-------+-------+-------+-------+ | 91 | (NO | 2 | 3 ms | 1 | 2000 | 2000 | Emer | | | TE 1) | | | 0^-5^ | bytes | ms | gency | | | | | | | | | traje | | | | | | | | | ctory | | | | | | | | | align | | | | | | | | | ment; | | | | | | | | | | | | | | | | | | S | | | | | | | | | ensor | | | | | | | | | sh | | | | | | | | | aring | | | | | | | | | -- | | | | | | | | | H | | | | | | | | | igher | | | | | | | | | d | | | | | | | | | egree | | | | | | | | | of | | | | | | | | | autom | | | | | | | | | ation | +-------+-------+-------+-------+-------+-------+-------+-------+ | NO | | | | | | | | | TE 1: | | | | | | | | | GBR | | | | | | | | | and | | | | | | | | | Delay | | | | | | | | | Cri | | | | | | | | | tical | | | | | | | | | GBR | | | | | | | | | PQIs | | | | | | | | | can | | | | | | | | | only | | | | | | | | | be | | | | | | | | | used | | | | | | | | | for | | | | | | | | | un | | | | | | | | | icast | | | | | | | | | PC5 | | | | | | | | | commu | | | | | | | | | nicat | | | | | | | | | ions. | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+
NOTE 1: For Standardized PQI to QoS characteristics mapping, the table will be
extended/updated to support service requirements for other identified V2X
services.
NOTE 2: The PQIs may be used for other services than V2X.
NOTE 3: A PQI may be used together with an application indicated priority,
which overrides the Default Priority Level of the PQI.
### 5.4.5 QoS handling for V2X communication over Uu reference point
#### 5.4.5.1 General
The V2X service data can be delivered via Non-GBR QoS Flow as well as GBR QoS
Flow (i.e. using the GBR resource type or the Delay-critical GBR resource
type) as specified in TS 23.501 [6].
#### 5.4.5.2 Notification on QoS Sustainability Analytics to the V2X
Application Server
##### 5.4.5.2.1 General
A V2X Application Server may request notifications on QoS Sustainability
Analytics for an indicated geographic area and time interval in order to
adjust the application behaviour in advance with potential QoS change. The V2X
Application Server may also request past statistical information for the
purposes of adjustment of the application, how V2X Application Server makes
use of such data is outside of 3GPP scope. Clause 6.4.1 describes the
procedure for such notification from 5GS.
##### 5.4.5.2.2 Functional description
The potential QoS change to assist application adjustment is based on the
notification of QoS Sustainability Analytics defined in clause 6.9 of TS
23.288 [20]. The V2X Application Server acting as an Application Function
communicates with the NEF which corresponds to the NF consumer in clause 6.9.4
of TS 23.288 [20].
The V2X Application Server can either subscribe to notifications from the NEF
(i.e., a Subscribe-Notify model) or request a single notification from the NEF
(i.e. a Request-Response model). The V2X Application Server request contains
the following parameters:
\- Analytics ID = \"QoS Sustainability\";
\- Target of Analytics Reporting: \"any UE\";
\- Analytics Filter Information:
\- Optional maximum number of objects;
\- QoS requirements:
\- 5QI (standardized or pre-configured), and applicable additional QoS
parameters and the corresponding values (conditional, i.e., it is needed for
GBR 5QIs to know the GFBR); or
\- the QoS Characteristics attributes including Resource Type, PDB and PER and
their values;
NOTE: The V2X Application Server could provide the 5QIs as input based on SLA
with the operator which authorizes the V2X Application Server to use certain
5QIs and to use the QoS Sustainability Analytics only for them.
\- Location information (the details are specified in TS 23.288 [20] clause
6.9.1);
\- S-NSSAI (optional, if available in the V2X Application Server).
\- Analytics target period (the details are specified in TS 23.288 [20] clause
6.9.1);
\- Reporting Threshold(s) (the details are specified in TS 23.288 [20] clause
6.9.1);
\- In a subscription, the Notification Correlation Id and the Notification
Target Address.
#### 5.4.5.3 QoS Change based on Extended NG-RAN Notification to support
Alternative Service Requirements
To support V2X applications that can operate with different configurations
(e.g. different bitrates or delay requirements), the V2X Application Server
(V2X AS), acting as the Application Function, can provide, in addition to the
requested level of service requirements, Alternative Service Requirements to
the 5GS. This enables the 5GS to act on the Alternative Service Requirements
and apply them for the extended NG-RAN notification, as described in TS 23.501
[6] and TS 23.503 [16].
The V2X AS can use the related procedures specified in clause 4.15.6.6 of TS
23.502 [7] to influence the QoS provided to the V2X service. If so, the V2X AS
includes Alternative Service Requirements as specified in clause 6.1.3.22 of
TS 23.503 [16] when providing service information to the PCF.
The QoS change based on extended NG-RAN notification operates within the 5GS
QoS model as specified in TS 23.501 [6] and TS 23.503 [16].
## 5.5 Subscription to V2X services
The user\'s profile in the UDM contains the subscription information to give
the user permission to use V2X services.
At any time, the operator can remove the UE subscription rights for V2X
services from user\'s profile in the UDM, and revoke the user\'s permission to
use V2X services.
The following subscription information is defined for V2X services:
a) whether the UE is authorized to perform V2X communication over PC5
reference point as Vehicle UE, Pedestrian UE, or both, including for LTE PC5
and for NR PC5.
b) UE-PC5-AMBR per PC5 RAT, including UE-PC5-AMBR for LTE PC5 and UE-PC5-AMBR
for NR PC5.
c) the list of the PLMNs where the UE is authorized to perform V2X
communication over PC5 reference point. For each PLMN in the list, the RAT(s)
over which the UE is authorized to perform V2X communications over PC5
reference point.
d) PC5 QoS parameters as defined in clause 5.4.2 used by NG-RAN.
The UDM may retrieve a) and b) from the UDR. a) and b) are provided by the UDM
to the AMF during UE Registration procedure as defined in clause 4.2.2.2 of TS
23.502 [7] using Nudm_SDM service for Subscription data type \"V2X
Subscription data\" and the AMF provides a) and b) to NG-RAN as part of the UE
context information.
c) and d) are provided by the UDR to the PCF during the UE Policy Association
Establishment procedure as defined in clause 4.16.11 of TS 23.502 [7] and UE
Policy Association Modification procedure as defined in clause 4.16.12 of TS
23.502 [7] using Nudr service for Data Set \"Policy Data\" and Data Subset
\"Policy Set Entry\". If the subscription information provided to the PCF from
UDR is changed (e.g., PC5 QoS related parameters, the list of PLMNs where the
UE is authorized to perform V2X communication over PC5 reference point), the
PCF initiates the UE Configuration Update procedure as specified in clause
6.2.2.
## 5.6 Identifiers
### 5.6.1 Identifiers for V2X communication over PC5 reference point
#### 5.6.1.1 General
Each UE has one or more Layer-2 IDs for V2X communication over PC5 reference
point, consisting of:
\- Source Layer-2 ID(s); and
\- Destination Layer-2 ID(s).
Source and destination Layer-2 IDs are included in layer-2 frames sent on the
layer-2 link of the PC5 reference point identifying the layer-2 source and
destination of these frames. Source Layer-2 IDs are always self-assigned by
the UE originating the corresponding layer-2 frames.
The selection of the source and destination Layer-2 ID(s) by a UE depends on
the communication mode of V2X communication over PC5 reference point for this
layer-2 link, as described in clauses 5.6.1.2, 5.6.1.3, and 5.6.1.4. The
source Layer-2 IDs may differ between different communication modes.
When IP-based V2X communication is supported for broadcast and groupcast modes
of V2X communication over PC5 reference point, the source IP address is
allocated as described in clause 5.2.1.5.
If the UE has an active V2X application that requires privacy support in the
current Geographical Area, as identified by configuration described in clause
5.1.2.1, in order to ensure that a source UE (e.g. vehicle) cannot be tracked
or identified by any other UEs (e.g. vehicles) beyond a certain short time-
period required by the application, the source Layer-2 ID shall be changed
over time and shall be randomized. For IP-based V2X communication over PC5
reference point, the source IP address shall also be changed over time and
shall be randomized. The change of the identifiers of a source UE must be
synchronized across layers used for PC5, (e.g. when the Application Layer ID
changes, the source Layer-2 ID and the source IP address need to be changed).
#### 5.6.1.2 Identifiers for broadcast mode V2X communication over PC5
reference point
For broadcast mode of V2X communication over PC5 reference point, the UE is
configured with the destination Layer-2 ID(s) to be used for V2X services. The
destination Layer-2 ID for a V2X communication is selected based on the
configuration as described in clause 5.1.2.1.
The UE self-selects a source Layer-2 ID. The UE may use different source
Layer-2 IDs for different types of PC5 reference points, i.e. LTE based PC5
and NR based PC5.
#### 5.6.1.3 Identifiers for groupcast mode V2X communication over PC5
reference point
For groupcast mode of V2X communication over PC5 reference point, the V2X
application layer may provide group identifier information. When the group
identifier information is provided by the V2X application layer, the UE
converts the provided group identifier into a destination Layer-2 ID. When the
group identifier information is not provided by the V2X application layer, the
UE determines the destination Layer-2 ID based on configuration of the mapping
between V2X service type and Layer-2 ID, as specified in clause 5.1.2.1.
NOTE: The mechanism for converting the V2X application layer provided group
identifier to the destination Layer-2 ID is defined in Stage 3.
The UE self-selects a source Layer-2 ID.
#### 5.6.1.4 Identifiers for unicast mode V2X communication over PC5 reference
point
For unicast mode of V2X communication over PC5 reference point, the
destination Layer-2 ID used depends on the communication peer. The Layer-2 ID
of the communication peer, identified by the Application Layer ID, may be
discovered during the establishment of the PC5 unicast link, or known to the
UE via prior V2X communications, e.g. existing or prior unicast link to the
same Application Layer ID, or obtained from application layer service
announcements. The initial signalling for the establishment of the PC5 unicast
link may use the known Layer-2 ID of the communication peer, or a default
destination Layer-2 ID associated with the V2X service type configured for PC5
unicast link establishment, as specified in clause 5.1.2.1. During the PC5
unicast link establishment procedure, Layer-2 IDs are exchanged, and should be
used for future communication between the two UEs, as specified in clause
6.3.3.1.
The Application Layer ID is associated with one or more V2X applications
within the UE. If UE has more than one Application Layer IDs, each Application
Layer ID of the same UE may be seen as different UE\'s Application Layer ID
from the peer UE\'s perspective.
The UE maintains a mapping between the Application Layer IDs and the source
Layer-2 IDs used for the PC5 unicast links, as the V2X application layer does
not use the Layer-2 IDs. This allows the change of source Layer-2 ID without
interrupting the V2X applications.
When Application Layer IDs change, the source Layer-2 ID(s) of the PC5 unicast
link(s) shall be changed if the link(s) was used for V2X communication with
the changed Application Layer IDs.
Based on privacy configuration as specified in clause 5.1.2.1, the update of
the new identifiers of a source UE to the peer UE for the established unicast
link may cause the peer UE to change its Layer-2 ID and optionally IP
address/prefix if IP communication is used as defined in clause 6.3.3.2.
A UE may establish multiple PC5 unicast links with a peer UE and use the same
or different source Layer-2 IDs for these PC5 unicast links.
## 5.7 Support for V2X communication for UEs in limited service state
For UE in limited service state, as defined in TS 23.122 [13], V2X
communication is only allowed over PC5 reference point.
UEs that are authorized to use V2X communication over PC5 reference point
shall be able to use V2X communication over PC5 reference point when in
limited service state following the principles defined in clause 5.1.2.2 for
V2X communication over PC5 reference point when the UE enters in limited
service state in 5GS:
\- because UE cannot find a suitable cell of the selected PLMN as described in
TS 23.122 [13]; or
\- as the result of receiving one of the following reject reasons defined in
TS 23.122 [13]:
\- a \"PLMN not allowed\" response to a registration request or;
\- a \"5GS services not allowed\" response to a registration request or
service request.
A UE in limited service state shall only use the radio resources and procedure
available in CM-IDLE mode for V2X communication over PC5 reference point, for
details see TS 36.300 [9] and TS 38.300 [11].
UEs shall not use V2X communication over PC5 reference point using the
\"operator-managed\" radio resources, as specified in clause 5.1.2.1, if the
UE has entered in limited service state due to all other situations (e.g. no
SIM in the MS, an \"illegal MS\" or \"illegal ME\" response to a registration
request, or an \"IMSI unknown in HLR\" response to a registration request)
defined in TS 23.122 [13], where the UE is unable to obtain normal service
from a PLMN. The UEs may use V2X communication over PC5 reference point using
the \"non-operator-managed\" radio resources, as specified in clause 5.1.2.1,
according to the principles defined in clause 5.1.2.2.
## 5.8 Interworking between EPS V2X and 5GS V2X
### 5.8.1 V2X Policy and parameter provisioning
When the UE is in 5GS or EPS, the UE shall use the valid V2X policy and
parameters provisioned by the PCF in 5GC or by the V2X Control Function in EPC
for V2X communication. The V2X related parameters for EPS defined in TS 23.285
[8] can be either provided by the PCF or by the V2X Control Function, while
the V2X policy and parameters involving 5GS are provided by the PCF only. If
the UE does not have valid V2X policy and parameters, the UE shall request the
network to provision the V2X policy and parameters.
### 5.8.2 PC5 Operation
PC5 communication can be supported with proper UE configurations by taking
into account e.g. regional regulations, deployments, and UE support for LTE
PC5 and/or NR PC5 RATs.
V2X communication over NR PC5 reference point in network scheduled operation
mode is supported in EPS (i.e. EN-DC architecture defined in TS 37.340 [25])
as defined in TS 23.285 [8] and TS 36.331 [14].
### 5.8.3 Mobility between EPS and 5GS over Uu
Interworking specified in clause 5.17 of TS 23.501 [6] and clause 4.11 of TS
23.502 [7] is applied to mobility between EPS and 5GS over Uu reference point
with the following additions:
\- For N26 based handover, V2X related data including the \"V2X services
authorized\" indication per PC5 RAT, UE-PC5-AMBR per PC5 RAT, and PC5 QoS
parameters are transferred between AMF and MME, and are included in Handover
Request message sent to the target RAN node.
Any Unstructured type PDU Session established in 5GC based on the UE
configuration as described in clause 5.1.3.1 is allowed to be transferred to
EPC as non-IP PDN connection when non-IP PDN type is supported by UE and EPC
as specified in clause 5.17.2.1 of TS 23.501 [6].
# 6 Functional description and information flows
## 6.1 Control and user plane stacks
### 6.1.1 User plane for NR PC5 reference point supporting V2X services
Figure 6.1.1-1 depicts a user plane for NR PC5 reference point, i.e. PC5 User
Plane Protocol stack.
**Legend:**
\- **PC5-U:** The SDAP/PDCP/RLC/MAC/PHY functionality is specified in TS
38.300 [11].
\- For PDCP SDU type \"Non-IP\", a \"Non-IP Type\" header included in the SDU
by upper layer to indicate the type of non-IP messages carried will be
specified in stage 3 specification.
Figure 6.1.1-1: User Plane for NR PC5 reference point
IP and Non-IP PDCP SDU types are supported for the V2X communication over PC5
reference point.
For IP PDCP SDU type, only IPv6 is supported. The IP address allocation and
configuration are as defined in clause 5.6.1.1.
The Non-IP PDCP SDU contains a Non-IP Type header, which indicates the V2X
message family used by the application layer, e.g. IEEE 1609 family\'s WSMP
[18], ISO defined FNTP [19], CCSA defined DSMP [27].
NOTE: The Non-IP Type header and allowed values are defined in TS 24.587 [24].
The packets from V2X application layer are handled by the V2X layer before
transmitting them to the AS layer, e.g. V2X layer maps the IP/Non IP packets
to PC5 QoS Flow and marks the corresponding PFI.
### 6.1.2 Control plane for NR PC5 reference point supporting V2X services
Figure 6.1.2-1 depicts a control plane for NR PC5 reference point, i.e. PC5
Signalling Protocol stack.
**Legend:**
\- PC5-S Protocol: The protocol used for the control plane signalling over the
PC5 reference point for the secure layer-2 link as specified in clause 6.3.3.
\- The PDCP/RLC/MAC/PHY functionality is specified in TS 38.300 [11].
Figure 6.1.2-1: Control Plane for NR PC5 reference point
## 6.2 Procedures for Service Authorization and Provisioning to UE
### 6.2.1 General
The procedures for service authorization and provisioning to UE may be
initiated by the PCF (as described in clause 6.2.2), by the UE (as described
in clause 6.2.4), or by the AF (as described in clause 6.2.5).
### 6.2.2 PCF based Service Authorization and Provisioning to UE
For PCF based Service Authorization and Provisioning to UE, the Registration
procedures as defined in clause 4.2.2.2 of TS 23.502 [7], UE Policy
Association Establishment procedure as defined in clause 4.16.11 of TS 23.502
[7] and UE Policy Association Modification procedure as defined in clause
4.16.12 of TS 23.502 [7] apply with the following additions:
\- If the UE indicates V2X capability in the Registration Request message and
if the UE is authorized to use V2X service based on subscription data, the AMF
selects the PCF which supports V2X Policy/Parameter provisioning as described
in clause 6.2.3 and establishes a UE policy association with the PCF for V2X
Policy/Parameter delivery.
\- If the AMF receives the PC5 capability for V2X in the Registration Request
message from UE, the AMF further reports the PC5 capability for V2X to the
selected PCF. The PCF may determine the V2X Policy/Parameter for specific PC5
RAT based on the received UE\'s PC5 capability for V2X.
The PCF may update the V2X Policy/parameters to the UE in following
conditions:
\- UE Mobility, e.g. UE moves from one PLMN to another PLMN. This is achieved
by using the procedure of UE Policy Association Modification initiated by the
AMF, as defined in clause 4.16.12.1 of TS 23.502 [7].
\- When there is a subscription change in the list of PLMNs where the UE is
authorized to perform V2X communication over PC5 reference point. This is
achieved by using UE Policy Association Modification initiated by the PCF
procedure as defined in clause 4.16.12.2 of TS 23.502 [7].
\- When there is a change of service specific parameter as described in clause
4.15.6.7 of TS 23.502 [7].
If the serving PLMN is removed from the list of PLMNs in the service
authorization parameters, the service authorization is revoked in the UE.
When the UE is roaming, the change of subscription resulting in updates of the
service authorization parameters are transferred to the UE by H-PCF via V-PCF.
The UE may perform UE triggered V2X Policy Provisioning procedure to the PCF,
after Registration procedure has been completed, as specified in clause 6.2.4
when the UE determines the V2X Policy/Parameter is invalid (e.g.
Policy/Parameter is outdated, missing or invalid).
### 6.2.3 PCF discovery
PCF discovery and selection mechanism defined in clause 6.3.7.1 of TS 23.501
[6] applies with the following addition to enable a PCF instance is selected
for V2X service and for UE:
\- Based on the indication from the UE and/or UE subscription data during the
Registration procedure as specified in clause 6.2.2, the AMF may include the
V2X capability indication in the Nnrf_NFDiscovery_Request message as the
optional input parameter. If provided, the NRF takes the information into
account for discovering the PCF instance.
### 6.2.4 Procedure for UE triggered V2X Policy provisioning
The UE triggered Policy Provisioning procedure is initiated by the UE to
request V2X Policy/Parameter from the PCF when UE determines the V2X
Policy/Parameter is invalid in the following cases:
\- if the validity timer indicated in the V2X Policy/Parameter expires;
\- if there are no valid parameters, e.g. for the V2X service type a UE wants
to use, for current area, or due to abnormal situation.
Figure 6.2.4-1: UE triggered V2X Policy provisioning procedure
1\. The UE sends UL NAS TRANSPORT message carrying the UE Policy Container (UE
V2X Policy Provisioning Request to request V2X policies) to the AMF.
2\. The AMF sends the Namf_Communication_N1MessageNotify request to the PCF
including the UE Policy Container received from UE.
3\. The PCF receives UE Policy Container which indicates UE Policy
Provisioning Request to request V2X policies. If the V2X policies are
authorized based on AMF input as specified in clause 6.2.2, the PCF performs
the UE Policy delivery procedure defined in clause 4.2.4.3 of TS 23.502 [7].
### 6.2.5 AF-based service parameter provisioning for V2X communications over
control plane
The V2X Application Server can provision the 5GC with V2X service parameters
via NEF as depicted in clause 4.2.2. For V2X service parameter provisioning,
the procedure defined in clause 4.15.6.7 of TS 23.502 [7] is performed with
the following considerations:
\- The AF in TS 23.502 [7] is considered as V2X Application Server in this
specification.
\- Service Description indicates V2X service domain information.
\- Service Parameters include policy/provisioning parameters for V2X
communications over Uu and PC5. The detailed information on the parameters is
described in clause 5.1.
NOTE: It is assumed that the V2X service domain information is set based on
the Service Level Agreement with the operator.
## 6.3 Procedures for V2X communication over PC5 reference point
### 6.3.1 Broadcast mode V2X communication over PC5 reference point
To perform V2X communication over PC5 reference point in broadcast mode
operation, the UE is configured with the related information as described in
clause 5.1.2.
Figure 6.3.1-1 shows the procedure for broadcast mode of V2X communication
over PC5 reference point.
Figure 6.3.1-1: Procedure for Broadcast mode of V2X communication over PC5
reference point
1\. The receiving UE(s) determine the destination Layer-2 ID for broadcast
reception as specified in clause 5.6.1.2. The destination Layer-2 ID is passed
down to the AS layer of receiving UE(s) for the reception.
2\. The transmitting UE V2X application layer provides data unit and may
provide V2X Application Requirements specified in clause 5.4.1.2 to V2X layer.
3\. The transmitting UE determines the destination Layer-2 ID for broadcast as
specified in clause 5.6.1.2. The transmitting UE self-assigns the source
Layer-2 ID as specified in clause 5.6.1.1.
The transmitting UE determines the PC5 QoS parameters for this broadcast V2X
service as specified in clauses 5.4.1.1 and 5.4.1.2.
4\. The transmitting UE sends the V2X service data using the source Layer-2 ID
and the destination Layer-2 ID.
NOTE: In step 4, there is only one broadcast message from the transmitting UE.
### 6.3.2 Groupcast mode V2X communication over PC5 reference point
To perform groupcast mode of V2X communication over PC5 reference point, the
UE is configured with the related information as described in clause 5.1.2.1.
Figure 6.3.2-1 shows the procedure for groupcast mode of V2X communication
over PC5 reference point.
Figure 6.3.2-1: Procedure for groupcast mode of V2X communication over PC5
reference point
1\. V2X group management is carried out by the V2X application layer and is
out of scope of this specification.
2\. The V2X application layer may provide group identifier information (i.e.
an Application-layer V2X Group identifier) as specified in clause 5.6.1.3.
The V2X application layer may provide V2X Application Requirements for this
communication.
If the V2X application layer does not provide V2X Application Requirements,
the V2X layer determines the PC5 QoS parameters based on the mapping of V2X
service type to PC5 QoS parameters as defined in clause 5.1.2.1.
The V2X application layer may provide a group size and a member ID as
specified in clause 5.2.1.3.
3\. Transmitting UE determines a source Layer-2 ID and a destination Layer-2
ID and Receiving UE(s) determine destination Layer-2 ID, as specified in
clauses 5.6.1.1 and 5.6.1.3.
The destination Layer-2 ID is passed down to the AS layer of Receiving UE(s)
for the groupcast mode communication reception.
Transmitting UE determines the PC5 QoS parameters for this groupcast mode
communication as specified in clauses 5.4.1.1 and 5.4.1.3.
If the group size and the member ID for Application Layer managed group are
provided by the V2X application layer, the V2X layer passes them to the AS
layer as described in clause 5.2.1.3.
4\. Transmitting UE has a V2X service associated with this groupcast mode
communication.
Transmitting UE sends the V2X service data using the source Layer-2 ID and the
destination Layer-2 ID.
NOTE: In step 4, there is only one groupcast message from the transmitting UE.
### 6.3.3 Unicast mode V2X communication over PC5 reference point
#### 6.3.3.1 Layer-2 link establishment over PC5 reference point
To perform unicast mode of V2X communication over PC5 reference point, the UE
is configured with the related information as described in clause 5.1.2.1.
Figure 6.3.3.1-1 shows the layer-2 link establishment procedure for unicast
mode of V2X communication over PC5 reference point.
Figure 6.3.3.1-1: Layer-2 link establishment procedure
1\. The UE(s) determine the destination Layer-2 ID for signalling reception
for PC5 unicast link establishment as specified in clause 5.6.1.4. The
destination Layer-2 ID is configured with the UE(s) as specified in clause
5.1.2.1.
2\. The V2X application layer in UE-1 provides application information for PC5
unicast communication. The application information includes the V2X service
type(s) and the initiating UE\'s Application Layer ID. The target UE\'s
Application Layer ID may be included in the application information.
The V2X application layer in UE-1 may provide V2X Application Requirements for
this unicast communication. UE-1 determines the PC5 QoS parameters and PFI as
specified in clause 5.4.1.4.
If UE-1 decides to reuse the existing PC5 unicast link as specified in clause
5.2.1.4, the UE triggers Layer-2 link modification procedure as specified in
clause 6.3.3.4.
3\. UE-1 sends a Direct Communication Request message to initiate the unicast
layer-2 link establishment procedure. The Direct Communication Request message
includes:
\- Source User Info: the initiating UE\'s Application Layer ID (i.e. UE-1\'s
Application Layer ID).
\- If the V2X application layer provided the target UE\'s Application Layer ID
in step 2, the following information is included:
\- Target User Info: the target UE\'s Application Layer ID (i.e. UE-2\'s
Application Layer ID).
\- V2X Service Info: the information about V2X service type(s) requesting
Layer-2 link establishment.
\- Security Information: the information for the establishment of security.
NOTE 1: The Security Information and the necessary protection of the Source
User Info and Target User Info are defined in TS 33.536 [26].
The source Layer-2 ID and destination Layer-2 ID used to send the Direct
Communication Request message are determined as specified in clauses 5.6.1.1
and 5.6.1.4. The destination Layer-2 ID may be broadcast or unicast Layer-2
ID. When unicast Layer-2 ID is used, the Target User Info shall be included in
the Direct Communication Request message.
UE-1 sends the Direct Communication Request message via PC5 broadcast or
unicast using the source Layer-2 ID and the destination Layer-2 ID.
4\. Security with UE-1 is established as below:
4a. If the Target User Info is included in the Direct Communication Request
message, the target UE, i.e. UE-2, responds by establishing the security with
UE-1.
4b. If the Target User Info is not included in the Direct Communication
Request message, the UEs that are interested in using the announced V2X
service type(s) over a PC5 unicast link with UE-1 responds by establishing the
security with UE-1.
NOTE 2: The signalling for the Security Procedure is defined in TS 33.536
[26].
When the security protection is enabled, UE-1 sends the following information
to the target UE:
\- If IP communication is used:
\- IP Address Configuration: For IP communication, IP address configuration is
required for this link and indicates one of the following values:
\- \"IPv6 Router\" if IPv6 address allocation mechanism is supported by the
initiating UE, i.e., acting as an IPv6 Router; or
\- \"IPv6 address allocation not supported\" if IPv6 address allocation
mechanism is not supported by the initiating UE.
\- Link Local IPv6 Address: a link-local IPv6 address formed locally based on
RFC 4862 [21] if UE-1 does not support the IPv6 IP address allocation
mechanism, i.e. the IP Address Configuration indicates \"IPv6 address
allocation not supported\".
\- QoS Info: the information about PC5 QoS Flow(s) to be added. For each PC5
QoS Flow, the PFI, the corresponding PC5 QoS parameters (i.e. PQI and
conditionally other parameters such as MFBR/GFBR, etc.) and the associated V2X
service type(s).
The source Layer-2 ID used for the security establishment procedure is
determined as specified in clauses 5.6.1.1 and 5.6.1.4. The destination
Layer-2 ID is set to the source Layer-2 ID of the received Direct
Communication Request message.
Upon receiving the security establishment procedure messages, UE-1 obtains the
peer UE\'s Layer-2 ID for future communication, for signalling and data
traffic for this unicast link.
5\. A Direct Communication Accept message is sent to UE-1 by the target UE(s)
that has successfully established security with UE-1:
5a. (UE oriented Layer-2 link establishment) If the Target User Info is
included in the Direct Communication Request message, the target UE, i.e. UE-2
responds with a Direct Communication Accept message if the Application Layer
ID for UE-2 matches.
5b. (V2X Service oriented Layer-2 link establishment) If the Target User Info
is not included in the Direct Communication Request message, the UEs that are
interested in using the announced V2X Service(s) respond to the request by
sending a Direct Communication Accept message (UE-2 and UE-4 in Figure
6.3.3.1-1).
The Direct Communication Accept message includes:
\- Source User Info: Application Layer ID of the UE sending the Direct
Communication Accept message.
\- QoS Info: the information about PC5 QoS Flow(s) requested by UE-1. For each
PC5 QoS Flow, the PFI, the corresponding PC5 QoS parameters (i.e. PQI and
conditionally other parameters such as MFBR/GFBR, etc.) and the associated V2X
service type(s).
\- If IP communication is used:
\- IP Address Configuration: For IP communication, IP address configuration is
required for this link and indicates one of the following values:
\- \"IPv6 Router\" if IPv6 address allocation mechanism is supported by the
target UE, i.e., acting as an IPv6 Router; or
\- \"IPv6 address allocation not supported\" if IPv6 address allocation
mechanism is not supported by the target UE.
\- Link Local IPv6 Address: a link-local IPv6 address formed locally based on
RFC 4862 [21] if the target UE does not support the IPv6 IP address allocation
mechanism, i.e. the IP Address Configuration indicates \"IPv6 address
allocation not supported\", and UE-1 included a link-local IPv6 address in the
Direct Communication Request message. The target UE shall include a non-
conflicting link-local IPv6 address.
If both UEs (i.e. the initiating UE and the target UE) selected to use link-
local IPv6 address, they shall disable the duplicate address detection defined
in RFC 4862 [21].
NOTE 3: When either the initiating UE or the target UE indicates the support
of IPv6 router, corresponding address configuration procedure would be carried
out after the establishment of the layer 2 link, and the link-local IPv6
addresses are ignored.
The V2X layer of the UE that established PC5 unicast link passes the PC5 Link
Identifier assigned for the unicast link and the PC5 unicast link related
information down to the AS layer. The PC5 unicast link related information
includes Layer-2 ID information (i.e. source Layer-2 ID and destination
Layer-2 ID) and the corresponding PC5 QoS parameters. This enables the AS
layer to maintain the PC5 Link Identifier together with the PC5 unicast link
related information.
6\. V2X service data is transmitted over the established unicast link as
below:
The PC5 Link Identifier, and PFI are provided to the AS layer, together with
the V2X service data.
Optionally in addition, the Layer-2 ID information (i.e. source Layer-2 ID and
destination Layer-2 ID) is provided to the AS layer.
NOTE 4: It is up to UE implementation to provide the Layer-2 ID information to
the AS layer.
UE-1 sends the V2X service data using the source Layer-2 ID (i.e. UE-1\'s
Layer-2 ID for this unicast link) and the destination Layer-2 ID (i.e. the
peer UE\'s Layer-2 ID for this unicast link).
NOTE 5: PC5 unicast link is bi-directional, therefore the peer UE of UE-1 can
send the V2X service data to UE-1 over the unicast link with UE-1.
#### 6.3.3.2 Link identifier update for a unicast link
Figure 6.3.3.2-1 shows the link identifier update procedure for a unicast
link. When privacy requirements is configured for a V2X service type
associated with the unicast link, identifiers used for unicast mode of V2X
communication over PC5 reference point (e.g. Application Layer ID, Source
Layer-2 ID and IP address/prefix) shall be changed over time as specified in
clauses 5.6.1.1 and 5.6.1.4. A UE may decide to change the identifiers for
other reasons, e.g. application layer requirement. This procedure is used to
update and exchange new identifiers between the source and the peer UEs for a
unicast link before using the new identifiers, to prevent service
interruptions. When there are privacy requirements as indicated above, this
procedure is executed over a security protected unicast link.
If a UE has multiple unicast links using the same Application Layer IDs or
Layer-2 IDs, the UE needs to perform the link identifier update procedure over
each of the unicast link.
Figure 6.3.3.2-1: Link identifier update procedure
0\. UE-1 and UE-2 have a unicast link established as described in clause
6.3.3.1.
1\. UE-1 decides to change its identifier(s), e.g. due to the Application
Layer ID change or upon expiry of a timer. UE-1 generates its new Layer-2 ID
and sends a Link Identifier Update Request message to UE-2 using the old
identifiers.
The Link Identifier Update Request message includes the new identifier(s) to
use (including the new Layer-2 ID, Security Information, optionally the new
Application Layer ID and optionally new IP address/prefix if IP communication
is used). The new identifier(s) shall be cyphered to protect privacy if
security is configured for the unicast link. After sending the Link Identifier
Update Request message, if the UE-1 has data to send, UE-1 keeps sending data
traffic to UE-2 with the old identifiers until UE-1 sends the Link Identifier
Update Ack message to UE-2.
NOTE 1: The timer is running on per Source Layer-2 ID.
NOTE 2: When one of the two UEs acts as IPv6 router as described in clause
5.2.1.5 and IP address/prefix also needs to be changed, corresponding address
configuration procedure would be carried out after the Link Identifier update
procedure.
2\. Upon reception of the Link Identifier Update Request message, UE-2 changes
its identifier(s). UE-2 responds with a Link Identifier Update Response
message which includes the new identifier(s) to use (including the new Layer-2
ID, Security Information, optionally the new Application Layer ID, and
optionally a new IP address/prefix if IP communication is used). The new
identifier(s) shall be cyphered to protect privacy if security is configured
for the unicast link. The Link Identifier Update Response message is sent
using the old identifiers. UE-2 continues to receive traffic with the old
Layer-2 ID from UE-1 until UE-2 receives traffic with the new Layer-2 ID from
UE-1. After sending the Link Identifier Update Response message, UE-2 keeps
sending data traffic to UE-1 with the old identifiers, if UE-2 has data to
send, until UE-2 receives the Link Identifier Update Ack message from UE-1.
3\. Upon reception of the Link Identifier Update Response message, UE-1
responds with a Link Identifier Update Ack message. The Link Identifier Update
Ack message includes the new identifier(s) from UE-2, as received on the Link
Identifier Update Response message. The Link Identifier Update Ack message is
sent using the old identifiers. UE-1 continues to receive traffic with the old
Layer-2 ID from UE-2 until UE-1 receives traffic with the new Layer-2 ID from
UEâ€‘2.
4\. The V2X layer of UE-1 passes the PC5 Link Identifier for the unicast link
and the updated Layer-2 IDs (i.e. new Layer-2 ID for UE-1 for the source and
new Layer-2 ID of UE-2 for the destination) down to the AS layer. This enables
the AS layer to update the provided Layer-2 IDs for the unicast link.
UE-1 starts using its new identifiers and UE-2\'s new identifiers for this
unicast link.
5\. Upon reception of the Link Identifier Update Ack message, the V2X layer of
UE-2 passes the PC5 Link Identifier for the unicast link and the updated
Layer-2 IDs (i.e. new Layer-2 ID of UE-2 for the source and new Layer-2 ID for
UE-1 for the destination) down to the AS layer. This enables the AS layer to
update the provided Layer-2 IDs for the unicast link.
UE-2 starts using its new identifiers and UE-1\'s new identifiers for this
unicast link.
NOTE 3: The Security Information in the above messages also needs to be
updated at the same time as the Layer-2 IDs. This is defined in TS 33.536
[26].
#### 6.3.3.3 Layer-2 link release over PC5 reference point
Figure 6.3.3.3-1 shows the layer-2 link release procedure over PC5 reference
point.
Figure 6.3.3.3-1: Layer-2 link release procedure
0\. UE-1 and UE-2 have a unicast link established as described in clause
6.3.3.1.
1\. UE-1 sends a Disconnect Request message to UE-2 in order to release the
layer-2 link and deletes all context data associated with the layer-2 link.
The Disconnect Request message includes Security Information.
2\. Upon reception of the Disconnect Request message UE-2 may respond with a
Disconnect Response message and deletes all context data associated with the
layer-2 link. The Disconnect Response message includes Security Information.
The V2X layer of each UE informs the AS layer that the unicast link has been
released. The V2X layer uses PC5 Link Identifier to indicate the released
unicast link. This enables the AS layer to delete the context related to the
released unicast link.
NOTE: The Security Information in the above messages is defined in TS 33.536
[26].
#### 6.3.3.4 Layer-2 link modification for a unicast link
Figure 6.3.3.4-1 shows the layer-2 link modification procedure for a unicast
link. This procedure is used to:
\- add new PC5 QoS Flow(s) in the existing PC5 unicast link.
\- This covers the case for adding new PC5 QoS Flow(s) to the exisiting V2X
service(s) as well as the case for adding new PC5 QoS Flow(s) to new V2X
service(s).
\- modify existing PC5 QoS Flow(s) in the existing PC5 unicast link.
\- This covers the case for modifying the PC5 QoS parameters for existing PC5
QoS Flow(s).
\- This also covers the case for removing the associated V2X service(s) from
existing PC5 QoS Flow(s) as well as the case for associating new V2X
service(s) with existing PC5 QoS Flow(s).
\- remove existing PC5 QoS Flow(s) in the existing PC5 unicast link.
Figure 6.3.3.4-1: Layer-2 link modification procedure
0\. UE-1 and UE-2 have a unicast link established as described in clause
6.3.3.1.
1\. The V2X application layer in UE-1 provides application information for PC5
unicast communication. The application information includes the V2X service
type(s) and the initiating UE\'s Application Layer ID. The target UE\'s
Application Layer ID may be included in the application information. If UE-1
decides to reuse the existing PC5 unicast link as specified in clause 5.2.1.4,
so decides to modify the unicast link established with UE-2, UE-1 sends a Link
Modification Request to UE-2.
The Link Modification Request message includes:
a) To add new PC5 QoS Flow(s) in the existing PC5 unicast link:
\- QoS Info: the information about PC5 QoS Flow(s) to be added. For each PC5
QoS Flow, the PFI, the corresponding PC5 QoS parameters (i.e. PQI and
conditionally other parameters such as MFBR/GFBR, etc.) and the associated V2X
service type(s).
b) To modify PC5 QoS Flow(s) in the existing PC5 unicast link:
\- QoS Info: the information about PC5 QoS Flow(s) to be modified. For each
PC5 QoS Flow, the PFI, the corresponding PC5 QoS parameters (i.e. PQI and
conditionally other parameters such as MFBR/GFBR, etc.) and the associated V2X
service type(s).
c) To remove PC5 QoS Flow(s) in the existing PC5 unicast link:
\- PFI(s).
2\. UE-2 responds with a Link Modification Accept message.
The Link Modification Accept message includes:
\- For case a) and case b) described in step 1:
\- QoS Info: the information about PC5 QoS Flow(s) requested by UE-1. For each
PC5 QoS Flow, the PFI, the corresponding PC5 QoS parameters (i.e. PQI and
conditionally other parameters such as MFBR/GFBR, etc.) and the associated V2X
service type(s).
The V2X layer of each UE provides information about the unicast link
modification to the AS layer. This enables the AS layer to update the context
related to the modified unicast link.
#### 6.3.3.5 Layer-2 link maintenance over PC5 reference point
The PC5 Signalling Protocol shall support keep-alive functionality that is
used to detect if a particular PC5 unicast link is still valid. Either side of
the PC5 unicast link can initiate the layer-2 link maintenance procedure (i.e.
keep-alive procedure), based on for example triggers from the AS layer or
internal timers. The UEs shall minimize the keep-alive signalling, e.g. cancel
the procedure if data are successfully received over the PC5 unicast link.
Figure 6.3.3.5-1: Layer-2 link maintenance procedure
0\. UE-1 and UE-2 have a unicast link established as described in clause
6.3.3.1.
1\. Based on trigger conditions, UE-1 sends a Keep-alive message to UE-2 in
order to determine the status of the PC5 unicast link.
NOTE 1: It is left to Stage 3 to determine the exact triggers for the keep-
alive messages. For example, the trigger can be based on a timer associated
with the Layer-2 link. The timer can be reset with a successful reception
event defined by TS 38.300 [11].
2\. Upon reception of the Keep-alive message, UE-2 responds with a Keep-alive
Ack message.
The UE initiating the keep-alive procedure shall determine the follow up
actions based on the result of the signalling, e.g. proceed with implicit
layer-2 link release.
NOTE 2: It is left to Stage 3 to determine the follow up actions. For example,
a successful reception event can also cancel the layer-2 link release if
received in time.
## 6.4 Procedures for V2X communication over Uu reference point
### 6.4.1 Procedure for notification on QoS Sustainability Analytics to the
V2X Application Server
Figure 6.4.1-1 depicts a procedure for notification on QoS Sustainability
Analytics to the V2X Application Server.
Figure 6.4.1-1: Notification on QoS Sustainability Analytics to the V2X
Application Server
1\. The V2X Application Sever derives information on V2X service, location
information (an area or path of interest), QoS requirements and reporting
threshold(s). The location information can be in the form of geographic
coordinates to reflect a list of waypoints.
NOTE 1: Step 1 is outside 3GPP scope. The V2X Application Server can derive
this, for example, based on information provided by the UE(s) or the V2X
Application Server uses locally configured information.
2\. The V2X Application Server subscribes to or requests notification on QoS
Sustainability Analytics provided by NWDAF via NEF by invoking
Nnef_AnalyticsExposure_Subscribe service operation as defined in clause
6.1.1.2 of TS 23.288 [20] or Nnef_AnalyticsExposure_Fetch service operation as
defined in clause 6.1.2.2 of TS 23.288 [20]. The parameters included in the
request are described in clause 5.4.5.2.2.
The V2X Application Server may include multiple sets of parameters in order to
provide different combinations of \"Location information\" and \"Analytics
Target Period\" when requesting notification on QoS Sustainability Analytics.
NOTE 2: The V2X Application Server needs to set the \"Time when analytics
information is needed\" parameter (see TS 23.288 [20]) appropriately, e.g.
large enough, to perform the V2X application adjustment before the potential
QoS change happens.
NOTE 3: The request made by the V2X Application Server does not have to be per
UE. In order to make a request for multiple UEs, the V2X Application Server
can perform mapping between individual UE path requests and subscription to
notification per path/road segment. Whether a request is generated for a UE or
multiple UEs, and how to set the parameters included in the request and
triggers for such request are up to the V2X Application Server implementation
and outside of the scope of 3GPP.
3\. When the NEF receives the request from the V2X Application Server, the NEF
interacts with the NWDAF as described in the procedure in clause 6.9.4 of TS
23.288 [20]. The NEF shall map the QoS Characteristics attributes including
Resource Type, PDB and PER received from the V2X Application Server to the
most appropriate 5QI that is supported by the network if the V2X application
server does not provide 5QI. If 5QI is provided by the V2X Application Server,
NEF does not perform such mapping. The NEF may map other parameters included
in the request from the V2X Application Server to information used by the 3GPP
system.
4\. If the NEF receives the response from the NWDAF, the NEF notifies the V2X
Application Server with the analytics information on QoS Sustainability
Analytics by invoking Nnef_AnalyticsExposure_Notify service operation for a
Subscribe-Notify model as defined in clause 6.1.1.2 of TS 23.288 [20] or
Nnef_AnalyticsExposure_Fetch service operation for a Request-Response model as
defined in clause 6.1.2.2 of TS 23.288 [20].
5\. V2X application adjustment may take place.
NOTE 4: Step 5 is outside 3GPP scope. V2X application adjustment can take
place at UE and/or V2X Application Server, e.g. adjust inter-vehicle gap,
change video codec parameters, etc. For the case that the V2X Application
Server uses the request for multiple UEs in step 2, the V2X Application Server
can perform the V2X application adjustment for every UE corresponding to the
request.
For a Subscribe-Notify model, when the V2X Application Sever wants to cancel
subscription to analytics information, it invokes the
Nnef_AnalyticsExposure_Unsubscribe service operation as defined in clause
6.1.1.2 of TS 23.288 [20].
## 6.5 Procedures for Service Authorization to NG-RAN for V2X communications
over PC5 reference point
### 6.5.1 General
In order to enable PC5 radio resource control in NG-RAN, per PC5 RAT V2X
service authorization information and PC5 QoS parameters need to be made
available in NG-RAN, this clause describes the corresponding procedures and
aspects.
### 6.5.2 Registration procedure
The Registration procedure for UE is performed as defined in TS 23.502 [7]
with the following additions:
\- The UE includes the PC5 Capability for V2X (i.e. LTE PC5 only, NR PC5 only,
both LTE and NR PC5) as part of the \"5GMM capability\" in the Registration
Request message. The AMF stores this information for V2X operation. The PC5
Capability for V2X indicates whether the UE is capable of V2X communication
over PC5 reference point and which specific PC5 RAT(s) it supports.
\- The AMF obtains the V2X Subscription data as part of the user subscription
data from UDM during UE Registration procedure using Nudm_SDM service as
defined in clause 4.2.2.2.2 of TS 23.502 [7].
\- The AMF determines whether the UE is authorized to use V2X communication
over PC5 reference point based on UE\'s PC5 Capability for V2X and the
subscription data related to V2X service authorization information (i.e. \"V2X
services authorized\" indication, UE-PC5-AMBR per PC5 RAT and cross-RAT PC5
control authorization if applicable) received from UDM, and stores the V2X
service authorization information as part of the UE context.
\- The PCF provides the PC5 QoS parameters to AMF, and the AMF stores them in
the UE context.
\- If the UE is PC5 capable for V2X, and the UE is authorized to use V2X
communication over PC5 reference point based on the subscription data, then
the AMF shall include the following information in the NGAP message sent to
NG-RAN:
\- a \"V2X services authorized\" indication, indicating the UE is authorized
to use V2X communication over PC5 reference point as Vehicle UE, Pedestrian UE
or both.
\- UE-PC5-AMBR per PC5 RAT and cross-RAT PC5 control authorization (if
applicable), used by NG-RAN for the resource management of UE\'s PC5
transmission for V2X services in network scheduled mode.
\- the PC5 QoS parameters used by the NG-RAN for the resource management of
UE\'s PC5 transmission for V2X services in network scheduled mode.
\- If the UE is authorized to use V2X communication over PC5 reference point,
then the AMF should not initiate the release of the signalling connection
after the completion of the Registration procedure. The release of the NAS
signalling relies on the decision of NG-RAN, as specified in TS 23.502 [7].
### 6.5.3 Service Request procedure
The Service Request procedure for UE in CM-IDLE state is performed as defined
in TS 23.502 [7] with the following additions:
\- If the UE is PC5 capable for V2X, and the UE is authorized to use V2X
communication over PC5 reference point, then the AMF shall include a \"V2X
services authorized\" indication in the NGAP message, indicating the UE is
authorized to use V2X communication over PC5 reference point as Vehicle UE,
Pedestrian UE or both.
\- The AMF includes the UE-PC5-AMBR, and cross-RAT PC5 control authorization
in the NGAP message to the NG-RAN as part of the UE context and NG-RAN may use
in resource management of UE\'s PC5 transmission for V2X services in network
scheduled mode.
\- The AMF sends the PC5 QoS parameters to NG-RAN via N2 signalling. The PC5
QoS parameters may be stored in the UE context after the registration
procedure. If the UE is authorized to use V2X communication over PC5 reference
point but AMF does not have PC5 QoS parameters available, the AMF fetches the
PC5 QoS parameters from the PCF.
### 6.5.4 N2 Handover procedure
The N2 based handover or the Inter-RAT to NG-RAN handover procedures for UE
are performed as defined in TS 23.502 [7] with the following additions:
\- If the UE is PC5 capable for V2X, and the UE is authorized to use V2X
communication over PC5 reference point, then the target AMF shall send the
\"V2X services authorized\" indication, UE-PC5-AMBR, cross-RAT PC5 control
authorization, and PC5 QoS parameters to the target NG-RAN as follows:
\- For the intra AMF handover, the \"V2X services authorized\" indication, UE-
PC5-AMBR, cross-RAT PC5 control authorization, and PC5 QoS parameters are
included in the NGAP Handover Request message.
\- For the inter AMF handover or Inter-RAT handover to NG-RAN, the \"V2X
services authorized\" indication, UE-PC5-AMBR, cross-RAT PC5 control
authorization, and PC5 QoS parameters are included in the NGAP Handover
Request message sent to the target NG-RAN.
### 6.5.5 Xn Handover procedure
The Xn based handover procedures for UE are performed as defined in TS 23.502
[7] with the following additions:
\- If the \"V2X services authorized\" indication is included in the UE context
(as described in TS 38.423 [23]), then the source NG-RAN shall include a \"V2X
services authorized\" indication, UE-PC5-AMBR, cross-RAT PC5 control
authorization and PC5 QoS parameters in the XnAP Handover Request message to
the target NG-RAN.
\- If the UE is PC5 capable for V2X, and the UE is authorized to use V2X
communication over PC5 reference point, then the AMF shall send the \"V2X
services authorized\" indication, the UE-PC5-AMBR, cross-RAT PC5 control
authorization, and PC5 QoS parameters to the target NG-RAN in the Path Switch
Request Acknowledge message
### 6.5.6 Subscriber Data Update Notification to AMF
The procedure of Subscriber Data Update Notification to AMF is performed as
defined in TS 23.502 [7] with the following additions:
\- The Nudm_SDM_Notification service operation may contain the \"V2X services
authorized\" indication or the UE-PC5-AMBR, or cross-RAT PC5 control
authorization or any combination;
\- The AMF updates the UE Context with the above new V2X subscription data.
\- When the AMF updates UE context stored at NG-RAN, the UE context contains
the V2X subscription data.
### 6.5.7 Delivery of PC5 QoS parameters to NG-RAN
The UE Policy Association Establishment procedure and UE Policy Association
Modification procedure, as defined in TS 23.502 [7], is used to provide to the
AMF PC5 QoS parameters used by NG-RAN. When receiving
Npcf_UEPolicyControl_Create Request from the AMF which includes the PC5
capability for V2X or when receiving the updated subscription data from UDR,
the PCF generates the PC5 QoS parameters used by NG-RAN corresponding to a UE
as defined in clause 5.4.2.
The (V-)PCF provides the information to the AMF as follows:
\- In the roaming case, the H-PCF includes the PC5 QoS parameters used by NG-
RAN in the Npcf_UEPolicyControl_Create Response message or
Npcf_UEPolicyControl UpdateNotify Request message sent to V-PCF in an N2 PC5
policy container, and V-PCF relays this N2 PC5 policy container as the N2
container in the Namf_Communication_N1N2MessageTransfer message sent to AMF.
\- In the non-roaming case, the PCF includes the PC5 QoS parameters used by
NG-RAN in an N2 container in Namf_Communication_N1N2MessageTransfer message
sent to AMF.
When the AMF determines that the N2 PC5 policy container comes from (V-)PCF,
the AMF stores such information as part of the UE context.
In the UE Configuration Update procedure triggered by UE Policy Association
Establishment or UE Policy Association Modification, t:
\- The AMF forwards the PC5 QoS parameters in the NGAP message to the NG-RAN
if a N2 PC5 policy container is received in the
Namf_Communication_N1N2MessageTransfer message.
\- The AMF forwards the PC5 QoS parameters in the NAS message to UE by using
the UE Configuration Update procedure for transparent UE Policy delivery
procedure defined in clause 4.2.4.3 of TS 23.502 [7] if a UE Policy Container
is received in the Namf_Communication_N1N2MessageTransfer message.
NOTE 1: If the PC5 QoS parameters are provided to both NG-RAN and UE, both the
N2 PC5 Policy Container and the UE Policy Container are included in the
Namf_Communication_N1N2MessageTransfer message.
NOTE 2: Non-UE specific PC5 QoS parameters, e.g. default PC5 QoS parameters,
can also be locally configured in NG-RAN. How such configuration is performed
is out of scope of this specification.
### 6.5.8 PC5 Capability for V2X indication and V2X related information per
PC5 RAT
A UE may support multiple PC5 RATs (i.e. LTE PC5 and NR PC5). For such UE, the
PC5 Capability for V2X indication and V2X related information can be per PC5
RAT as described in clause 6.5.2.
The cross-RAT PC5 control authorization indicates whether LTE Uu controls LTE
PC5 and/or NR PC5 from the cellular network, and whether NR Uu controls LTE
PC5 and/or NR PC5 from the cellular network.
NOTE: Stage 3 does not define an explicit cross-RAT PC5 control authorization
IE and it is indicated in an implicit manner as specified in TS 38.413 [22]
and TS 38.423 [23].
###### ## Annex A (informative): Application Function influence based edge
computing for V2X services
To route V2X messages or any traffic for V2X purposes to/from V2X Application
Server(s) in a local Data Network (DN) close to NG-RAN, V2X Application Server
operated by e.g. operators, OEMs, road authorities, can use the Application
Function (AF) influence on traffic routing feature defined in clause 5.6.7 of
TS 23.501 [6].
The V2X Application Server that sends the AF request for AF influence based
edge computing for V2X services can be the same V2X Application Server to/from
which the traffic is routed.
When Application Function influence on traffic routing is applied, a local UPF
can be selected to route the traffic to the local V2X Application Server.
Usage of Application Function (AF) influence on traffic routing feature and
its application for SMF to control UPF data forwarding are defined in clause
5.6.7 and clause 5.8.2 of TS 23.501 [6].
###### ## Annex B (informative): Road Side Unit (RSU) implementation options
This Annex presents examples how RSU can be implemented in 5GS, as shown in TS
23.285 [8]. Figure B-1 shows a UE-type RSU, which combines a UE with the V2X
application logic.
Figure B-1: RSU includes a UE and the V2X application logic
Figure B-2 shows one example of gNB-type RSUs. In this example, the RSU
comprises a gNB, a collocated UPF, and a V2X Application Server.
Figure B-2: RSU includes a gNB, collocated UPF and a V2X Application Server
#