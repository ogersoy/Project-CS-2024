# Foreword
This Technical Specification (TS) has been produced by the 3^rd^ Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document specifies the stage 2 description for the Follow Me
feature.
The Follow Me feature enables a mobile subscriber A to manipulate the Follow
Me data of a remote party B in such a way that subsequent calls directed to
remote party B will be forwarded to subscriber A.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"3G Vocabulary\".
[2] 3GPP TS 22.004: \"General on Supplementary Services\".
[3] 3GPP TS 22.030: \"Man-Machine Interface (MMI) of the Mobile Station
(MS)\".
[4] 3GPP TS 22.082: \"Call Forwarding (CF) supplementary services - Stage 1\".
[5] 3GPP TS 22.094: \"Follow Me (FM) feature - Stage 1\".
[6] 3GPP TS 23.011: \"Technical realisation of Supplementary Services \-
General Aspects\".
[7] 3GPP TS 23.015: \"Technical realisation of Operator Determined Barring
(ODB)\".
[8] 3GPP TS 23.090: \"Unstructured Supplementary Services Data (USSD)- Stage
2\".
[9] 3GPP TS 23.082: \"Call Forwarding (CF) supplementary services - Stage 2\".
[10] 3GPP TS 22.090: \"Unstructured Supplementary Services Data (USSD)- Stage
1\".
[11] 3GPP TS 24.090: \"Unstructured Supplementary Services Data (USSD)- Stage
3\".
[12] 3GPP TS 29.002: \"Mobile Application Part (MAP)\".
# 3 Definitions and abbreviations
## 3.1 Definitions
**initiating subscriber:** mobile subscriber who modifies the Follow Me data
of the remote party.
**initiating number:** number (the MSISDN of the initiating subscriber) to
which incoming calls, originally destined for the remote party, shall be
forwarded. It is subsequently also referred to as **MSISDN~A~.**
**remote party: i** s characterised by the remote number which is defined in
the numbering plan of a PLMN operator. The Follow Me feature enables the
initiating subscriber to modify the Follow Me data of the remote party. In
particular cases the remote party is a GSM subscriber of the PLMN and the
remote number denotes her basic MSISDN.
**Previously registered subscriber** : Is the initiating service subscriber
who has registered Follow Me with respect to a remote party. Her Registration
can be erased by herself or by an FM service supervisor via forced erasure
procedure.
**FM service supervisor:** is an initiating subscriber who is allowed to
modify the Follow Me data of a remote party who has been registered to a
previously registered subscriber for the Follow Me application. The FM service
supervisor shall be authorised by her network operator.
**remote number:** is a number in E.164 format which identifies a remote
party. In general this number is not assigned to a subscriber and can be
regarded as a \"dummy MSISDN\". In particular cases the remote party is a GSM
subscriber of the PLMN and the remote number denotes her basic MSISDN. The
remote number is entered by the initiating subscriber for registration,
interrogation, forced erasure and erasure of the Follow Me feature with
respect to the remote party.
**Follow Me function node:** is a network node in the PLMN operator of the
remote party. The FM data of the remote party are stored in this node. This
node can be implemented in:
**-** an HLR;
\- any other operator specific network node e.g.:
\- a gsmSCF;
\- an SCP.
## 3.2 Abbreviations
FFN Follow Me function node
FM Follow Me
SCP Service Control Part
Other abbreviations used in this ETS are listed in 3GPP TR 21.905.
# 4 Handling of Follow Me
## 4.1 General
Follow Me enables an initiating mobile subscriber A to have control over the
Follow Me data of a remote party B. The remote party B is characterised by the
remote number which is defined in the numbering plan of a PLMN operator.
Initiating Subscriber A shall be able to manipulate the Follow Me data of
remote party B such that subsequent calls destined for remote party B are
forwarded to initiating subscriber A. In the case of Forced Erasure by an FM
service supervisor, the initiating subscriber is allowed to erase the Follow
Me data of a remote party who has been registered to a different initiating
subscriber for the Follow Me application.
Follow Me is a PLMN specific feature and the control operations of FM are
based on USSD. All messages between the MS and the mobile network and internal
to the mobile network are USSD messages.
The present document deals with the control operations of FM in HLRa and FFN.
If the FFN is an HLR, the control of the requests for both FM and CFU services
is specified (see subclause 4.3.2).
The functionality of forwarding calls for remote party B to initiating
subscriber A (after successful registration of FM) is out of the scope of the
present document. This functionality is the same as the functionality of the
Call Forwarding Unconditional Supplementary Service applied to all
telecommunication services of remote party B for which CFU is applicable.
NOTE 1: the \"served mobile subscriber\" in 3GPP TS 22.094 [5] corresponds to
the \"remote party\" in the present document and the \"forwarded-to
subscriber\" in 3GPP TS 22.094 [5] corresponds to the \"initiating
subscriber\" in the present document.
NOTE 2: The forwarding of calls for remote party B to initiating subscriber A
can be achieved by invoking the Call Forwarding Unconditional Supplementary
Service or by making use of an equivalent operator specific service (e.g. via
CAMEL).
The functionality of the control of Follow Me (registration, erasure, forced
erasure and interrogation) is split between the HLR of the initiating
subscriber A (HLRa) and the FFN of the remote party B (FFNb).
### 4.1.1 Provision
FM can be registered / erased / interrogated by an initiating subscriber A
with respect to a remote party B if both parties are provisioned with FM.
To enable forced erasure by an FM service supervisor, the FM service shall be
provisioned to the FM service supervisor. Additionally, she needs the
subscription entitlement to perform the forced erasure.
NOTE: In general remote party B does not correspond to a GSM subscriber. In
this case provisioning of FM for remote party B is operator specific.
If remote party B is a GSM subscriber and if the forwarding of calls for
remote party B to initiating subscriber A is achieved by invoking the Call
Forwarding Unconditional Supplementary Service, provision of CFU for remote
party B is required.
### 4.1.2 Registration
The initiating subscriber registers the FM feature with respect to a
particular remote party.
If an initiating subscriber A successfully registers FM with respect to a
remote party B then FM becomes registered, active and operative for remote
party B.
As a result of the registration subsequent calls directed to remote party B
are forwarded to initiating subscriber A.
NOTE: The remote party cannot register FM with respect to herself.
### 4.1.3 Erasure
If an initiating subscriber A or the FM service supervisor successfully erases
FM with respect to a remote party B then FM becomes not registered and not
active for remote party B.
For forced erasure by the FM service supervisor the previously registered
subscriber shall be informed of the successful forced erasure via a network
initiated USSD Notify message with appropriate contents. This message is sent
by the FFN.
If remote party B is a GSM subscriber and successfully erases FM then FM
becomes not registered and not active for remote party B.
### 4.1.4 Interrogation
If an initiating subscriber A or the FM service supervisor successfully
interrogates FM with respect to a remote party B then this procedure
interrogates the FM data of subscriber B.
If remote party B is a GSM subscriber and successfully interrogates FM then
this procedure interrogates her own FM data.
## 4.2 Information Flows
### 4.2.1 Information Flow for the handling of FM by the initiating subscriber
Figure 4.1 shows the Information Flow for the control of FM (registration,
erasure, forced erasure and interrogation) by the initiating subscriber.
For any control operation on FM, the initiating subscriber (MSa) enters a
Follow Me Request (FM-Request). This is a USSD string containing the requested
FM operation and the remote number. The Follow Me Request is routed via the
MSC/VLR to the HLR of the initiating subscriber (HLRa).
The HLRa performs a series of checks as described in the SDLs (subclause 4.3).
If these checks fail, the MSa receives a response (FM-Response) indicating the
error.
If the checks pass, the HLRa forwards the operation request (HLR-FM-Request)
to the FFN of the remote party (FFNb).
FFNb carries out the appropriate control operation and checks as described in
the SDLs (subclause 4.3) for the remote party.
The result of this operation (success or error) is reported back in a USSD
Response to the initiating subscriber.
For successful forced erasure by a service supervisor, the FFN shall send a
Network Initiated USSD notify message with the corresponding USSD string to
the HLR of the previously registered subscriber who had registered the Follow
Me data. The HLR shall forward the USSD notify to VLR which will relay the
USSD Notify towards the MS.
Upon receipt of the USSD Notify, the MS shall respond by sending a FACILITY
message with empty return result component.
An error response with corresponding reason can be returned from any entity,
when error happens at the entity 3GPP TS 23.090 [8].
Figure 4.1: Information flow for the control of FM by the initiating
subscriber or service supervisor
NOTE 1: OR1:N: The case where the checks in the HLR result in a negative
outcome, e.g. FM is not provisioned for the initiating subscriber or the
initiating subscriber is not allowed to operate FM for the remote party.
OR1:Y: The case where all the checks in the HLR are successful, e.g. FM is
provisioned for the initiating subscriber and the initiating subscriber is
allowed to operate FM for the remote party.
NOTE 2: [...] Optional parameter.
(...)] Conditional parameter.
OC Operation Code (Register, Erase or Interrogate).
SC Service Code for FM.
RN Remote Number.
SI Supervisor Indicator. This parameter is conditional and only used for
forced erasure by a FM service supervisor.
PIM MSISDN of previously registered subscriber who has registered the FM to
remote number. This parameter is conditional and only used for forced erasure
by a FM service supervisor..
AI Supplementary Information containing additional information.
MSISDN-A initiating number in international format. It is not a part of the
USSD string, but is sent from HLRa to the FFNb together with the HLR-FM-
Request within the MAP operation. For forced erasure, the MSISDN-A corresponds
to the supervisor\'s MSISDN and will be part of the USSD-notify.
MSp MS of previously registered service subscriber.
HLRp HLR of the previously registered service subscriber.
### 4.2.2 Information Flow for the handling of FM by the remote party
Control of FM by the remote party is possible if the remote party is a GSM
subscriber.
The information flow for control of FM by the remote party (erasure and
interrogation of her own FM data) is the same as the information flow for
control of FM by the initiating subscriber.
If a remote party tries to register FM to herself the registration is rejected
and an error is reported.
## 4.3 Handling of FM control in HLRa and FFNb
HLRa and FFNb can both receive FM control messages, based on USSD. The USSD
handler in each entity analyses the Service Code contained in the USSD string
and, recognising the Service Code for FM, invokes the FM USSD application.
The FM control messages and their contents are given in Annex B (normative).
### 4.3.1 Handling of FM control in HLRa
The FM USSD application in HLRa is the process
**FM_initiating_subscriber_handling_in_HLR** (figure 4.2). It receives the FM-
Request from the initiating subscriber. This FM-Request is an USSD-string
containing:
\- the operation code (register, erase, interrogate);
\- the remote number;
\- an additional operator specific information field.
The HLR checks:
\- the provisioning of FM to the initiating subscriber;
\- whether the FFN can be deduced from the remote number;
\- whether any operator specific restrictions to engage in FM activity with
the remote party apply;
\- if the initiating subscriber requires forced erasure, the HLR checks
Whether the initiating subscriber is entitled to do it, i.e. Whether the
initiating subscriber is a FM service supervisor.
The basic MSISDN of the initiating subscriber is sent together with the
original USSD string to the FFN of the remote party.
The HLR forwards the response from the FFN to the initiating subscriber.
For successful forced erasure by a service supervisor, the HLR of the
previously registered subscriber (HLRp) shall relay the USSD Notify to the VLR
when the USSD Notify from the FFN is received. The VLR will then forward the
USSD Notify towards the MS of the previously registered service subscriber.
On receipt of an USSD response from the MS of the previously registered
subscriber, the HLRp shall relay it to the FFN.
{width="5.981944444444444in" height="8.891666666666667in"}
Figure 4.2: Process: FM_Initiating_Subscriber_Handling_in_HLR
{width="5.144444444444445in" height="5.7131944444444445in"}
Figure 4.2a: Process Notification_for_previously_registered_subscriber_in_HLRp
### 4.3.2 Handling of FM control in FFNb
If the FFN is an HLR, the FFN is responsible for handling the interactions
between FM and CFU. Two kinds of request may be received in an FFN which deals
with forwarding services:
\- CFU requests sent by the VLR for CFU operations (only if the FFN is a HLR);
\- FM-HLR-Requests which are USSD strings sent by HLRa for FM operations.
When the control process in the FFN receives a CFU request, it shall either
pass the CFU operation request directly to a CFU process or reject it
depending on the registration and/or activation states of both FM and CFU
services (see Table A.1 for permission checks).
On receipt of an HLR-FM request, the control process in the FFN performs a
series of FM specific checks and checks the states of both FM and CFU. If the
checks are successful, a CFU operation request is sent to a CFU process. On
receipt of an HLR-FM-Request from HLRa, the FFN performs a series of checks.
e.g.:
\- if the remote party is a GSM subscriber:
\- provisioning of FM to the remote party;
\- provisioning of CFU to the remote party;
\- illegal interaction with CFU registered or active to remote party.
\- if the remote number is registered in the FFN;
\- if any operator specific restrictions to engage in FM activity with the
initiating subscriber apply;
\- specific checks for forced erasure.
Depending on the requested operation, one of the following procedures is
performed:
\- registration with implicit Activation (procedure
Handle_Remote_Party_Registration, figure 4.6);
\- erasure with implicit Deactivation (procedure Handle_Remote_Party_Erasure,
figure 4.7);
\- interrogation (procedure Handle_Remote_Party_Interrogation, figure 4.8).
For successful forced erasure by a service supervisor, the FFN shall generate
an USSD-Notify message and send it to the HLRp, which will relay the USSD
Notify towards the MS of the previously registered subscriber (MSp). On
receipt of an error response that the USSD Notify message could not be
transferred to the MS, the FFN shall check the error code of the response.
Depending on the error types and the specific implementation the process shall
decide to resend the USSD message after a predefined time.
For the resend procedure the process shall start a timer. On timer expiry it
shall send the message again. The FFN shall repeat the messages up to 5 times.
The length of the timer is defined by operator and has the value in the range
of 1 -- 10 minutes.
Figure 4.3 shows the message flow between the process
Forwarding_Service_Control and the processes handling CFU operation requests,
defined in 3GPP TS 23.082 [9].
{width="4.426388888888889in" height="3.4131944444444446in"}
Figure 4.3: FFN_processes
{width="6.293055555555555in" height="5.481944444444444in"}
4.4 Process Forwarding_Service_Control
{width="6.097222222222222in" height="6.879861111111111in"}
Figure 4.5: Procedure: FM_Remote_Party_Handling_in_FFN
{width="4.86875in" height="5.409722222222222in"}
Figure 4.6: Procedure: Handle_Remote_Party_Registration
{width="6.209722222222222in" height="5.785416666666666in"}
Figure 4.6a: Procedure Register_FM_for_Remote_Party
{width="5.3805555555555555in" height="8.727083333333333in"}
Figure 4.7: Procedure: Handle_Remote_Party_Erasure
{width="4.922916666666667in" height="5.059722222222222in"}
Figure 4.7a: Procedure Erase_FM_for_Remote_party
{width="4.104861111111111in" height="4.35625in"}
Figure 4.8: Procedure Handle_Remote_Party_Interrogation
{width="5.541666666666667in" height="6.294444444444444in"}
Figure 4.9: Process FFN_Forced_Erasure_Notify
## 4.4 USSD interworking and Cross-phase compatibility
All the messages between MS and the mobile network and internal to the mobile
network, which are used for control of Follow Me, are USSD Phase 2 messages.
A Cross-phase compatibility mechanism specified in 3GPP TS 23.011 [6] for
networks or MS not supporting USSD Phase 2 is not required.
Networks subject to the Interoperability Directive have to implement FM using
USSD Phase 2.
NOTE: As an option, these networks may also implement FM using USSD Phase 1.
# 5 Information stored in the network entities
## 5.1 Information stored in HLRa and FFNb
The HLRa shall store:
\- the state of FM (which shall be one of the valid states listed below).
The FFNb shall store:
\- the state of FM if the remote party is a GSM subscriber;
\- the registration parameter:
\- the initiating number (MSISDN~A~).
The following logical states are applicable for FM (refer to TS 23.011 for an
explanation of the notation):
In HLRa (for the initiating subscriber)
* * *
**Provisioning State** **Registration State** **Activation State** **HLR
Induction State** (Not Provisioned, Not Registered, Not Active, Not Induced)
(Provisioned, Not Registered, Not Active, Not Induced)
* * *
The registration and activation state is the same for each applicable
elementary basic service group.
The provisioning state shall be per subscriber, and hence the same for all
basic service groups.
In FFNb (for the remote party).
* * *
**Provisioning State** **Registration State** **Activation State** **HLR
Induction State** (Not Provisioned, Not Registered, Not Active, Not Induced)
(Provisioned, Not Registered, Not Active, Not Induced) (Provisioned,
Registered, Active and Operative, Not Induced)
* * *
The registration and activation state is the same for each applicable
elementary basic service group.
The provisioning state shall be per subscriber, and hence the same for all
basic service groups.
## 5.2 State transition model
The following figure shows the successful cases of transition between the
applicable logical states of FM. The state changes are caused by actions of
the service provider, the mobile user or the network.
NOTE: Error cases are not shown in the diagram as they do not normally cause a
state change. Successful requests that do not cause a state change are not
shown in the diagram.
The diagram only shows operations on an elementary basic service group.
Figure 5.1: State transition model for FM
## 5.3 Information stored in the VLR
There is no FM information stored in the VLR.
## 5.4 Transfer of information from HLR to VLR
There is no FM information transferred from HLR to VLR.
###### ## Annex A (informative): Checking matrix for FM-CFU interaction in
FFNb
The following table is applicable under the assumption that FM and CFU are
always provisioned to the remote party.
If FM is not provisioned then there is no interaction between FM and CFU.
If FM is Registered and Active, CFU must also be Registered and Active.
Interrogation of both FM and CFU is allowed in any registration state.
**Table A.1: Operation allowance check according registration states of FM and
CFU (informative)**
+----------------+----------------+----------------+----------------+ | Operation | Registration | Outcome | | | | States | | | +----------------+----------------+----------------+----------------+ | | FM | CFU | | +----------------+----------------+----------------+----------------+ | Registration | Not registered | Not registered | FM: Registered | | FM | | | and Active\ | | | | | CFU: | | | | | Registered and | | | | | Active | +----------------+----------------+----------------+----------------+ | | | Registered, | operation not | | | | not active | allowed | +----------------+----------------+----------------+----------------+ | | | Registered, | operation not | | | | active | allowed | +----------------+----------------+----------------+----------------+ | | registered and | Registered, | see note 1 | | | active | active | | +----------------+----------------+----------------+----------------+ | Erasure FM | Not registered | Not registered | operation not | | | | | allowed,\ | | | | | see note 2 | +----------------+----------------+----------------+----------------+ | | | Registered, | operation not | | | | not active | allowed | +----------------+----------------+----------------+----------------+ | | | Registered, | operation not | | | | active | allowed | +----------------+----------------+----------------+----------------+ | | registered and | Registered, | FM: Not | | | active | active | Registered\ | | | | | CFU: Not | | | | | Registered | +----------------+----------------+----------------+----------------+ | Registration | Not registered | Not registered | FM: Not | | CFU | | | registered\ | | | | | CFU: | | | | | Registered, | | | | | active\ | | | | | see note 3 | +----------------+----------------+----------------+----------------+ | | | Registered, | FM: Not | | | | not active | registered\ | | | | | CFU: | | | | | Registered, | | | | | active\ | | | | | see note 3 | +----------------+----------------+----------------+----------------+ | | | Registered, | FM: Not | | | | active | registered\ | | | | | CFU: | | | | | Registered, | | | | | active\ | | | | | see note 3 | +----------------+----------------+----------------+----------------+ | | registered and | Registered, | operation not | | | active | active | allowed,\ | | | | | see note 4 | +----------------+----------------+----------------+----------------+ | Erasure CFU | Not registered | Not registered | operation not | | | | | allowed,\ | | | | | see note 3 | +----------------+----------------+----------------+----------------+ | | | Registered, | FM: Not | | | | not active | registered\ | | | | | CFU: Not | | | | | registered\ | | | | | note 3 | +----------------+----------------+----------------+----------------+ | | | Registered, | FM: Not | | | | active | registered\ | | | | | CFU: Not | | | | | registered\ | | | | | see note 3 | +----------------+----------------+----------------+----------------+ | | registered and | Registered, | operation not | | | active | active | allowed,\ | | | | | see note 4 | +----------------+----------------+----------------+----------------+ | Activation CFU | Not registered | Not registered | operation not | | | | | allowed,\ | | | | | see note 3 | +----------------+----------------+----------------+----------------+ | | | Registered, | FM: Not | | | | not active | registered\ | | | | | CFU: | | | | | Registered, | | | | | active\ | | | | | see note 3 | +----------------+----------------+----------------+----------------+ | | | Registered, | FM: Not | | | | active | registered\ | | | | | CFU: | | | | | Registered, | | | | | active\ | | | | | see note 3 | +----------------+----------------+----------------+----------------+ | | registered and | Registered, | operation not | | | active | active | allowed,\ | | | | | see note 4 | +----------------+----------------+----------------+----------------+ | Deactivation | Not registered | Not registered | operation not | | CFU | | | allowed,\ | | | | | see note 3 | +----------------+----------------+----------------+----------------+ | | | Registered, | operation not | | | | not active | allowed,\ | | | | | see note 3 | +----------------+----------------+----------------+----------------+ | | | Registered, | FM: Not | | | | active | registered\ | | | | | CFU: | | | | | Registered, | | | | | not active\ | | | | | see note 3 | +----------------+----------------+----------------+----------------+ | | registered and | Registered, | operation not | | | active | active | allowed,\ | | | | | see note 4 | +----------------+----------------+----------------+----------------+ | NOTE 1: The | | | | | operation is | | | | | only allowed | | | | | when the | | | | | registration | | | | | is made by the | | | | | same | | | | | initiating | | | | | subscriber. | | | | | The | | | | | registration | | | | | states of FM | | | | | and CFU shall | | | | | not be changed | | | | | by the | | | | | operation. | | | | | | | | | | NOTE 2: The | | | | | outcome code | | | | | should be | | | | | \"Remote party | | | | | not | | | | | registered\". | | | | | | | | | | NOTE 3: Refer | | | | | to TS 23.082 | | | | | for CFU | | | | | handling. | | | | | | | | | | NOTE 4: | | | | | Conflicting | | | | | situation with | | | | | other | | | | | supplementary | | | | | service (see | | | | | TS 22.082: | | | | | Exceptional | | | | | procedures or | | | | | unsuccessful | | | | | outcome). | | | | +----------------+----------------+----------------+----------------+
###### ## Annex B (normative): FM control Messages and their contents
# B.1 General principles
All messages used for the control of FM are based on mobile initiated USSD.
The principles of USSD can be found in 3GPP TS 22.090, 3GPP TS 23.090, 3GPP TS
24.090 and 3GPP TS 29.002.
The present document is only concerned with the contents of the USSD strings.
# B.2 Information Elements used in the messages
**[The operation code]{.underline}**
The operation code is defined in 3GPP TS 22.030 for the control of
Supplementary Services and consists of the two characters:
\- ** for Registration;
\- ## for Erasure;
\- *# for Interrogation.
**[The Service Codes]{.underline}**
The Service Code is service specific for FM.
**[The remote number]{.underline}**
The remote number is the basic MSISDN of the remote party if the remote party
is a GSM subscriber. It is entered by the initiating subscriber as part of the
registration request. It is a number in international format.
**[Additional information field]{.underline}**
An additional information field which does not exceed 30 octets may be
optionally included in all FM control messages to convey operator specific
information to the FFNb. The content and use of this additional information is
operator specific and out of scope of the present document.
**[The initiating number]{.underline}**
The initiating number is the basic MSISDN of the initiating subscriber. It is
derived by HLRa from the IMSI of the initiating subscriber.
This parameter is used in international format according to the scheme:
\- country code, national (significant) number.
# B.3 Messages Contents of the FM Request
Contents of the USSD string of FM-Request:
**\- a** ll parameters are entered by the initiating subscriber and
transported transparently to HLRa.
Table B.1: Contents of the USSD string of FM-Request
+----------------+----------------+----------------+----------------+ | Parameter | Value | Parameter\ | Comment | | number | | mandatory (M)\ | | | | | or optional | | | | | (O) | | +----------------+----------------+----------------+----------------+ | 1 | OC | M | Operation | | | | | Code: | | | | | | | | | | OC = ** ... | | | | | for | | | | | Registration | | | | | | | | | | OC = ## ... | | | | | for Erasure | | | | | | | | | | OC = *# ... | | | | | for | | | | | Interrogation | +----------------+----------------+----------------+----------------+ | 2 | SC | M | Service Code | | | | | for Follow Me. | | | | | SMG1 Refer to | | | | | 22.030 for the | | | | | Service Code | | | | | for Follow Me. | +----------------+----------------+----------------+----------------+ | 3 | * | M | Delimiter | +----------------+----------------+----------------+----------------+ | 4 | REMOTE NUMBER | M | remote number | +----------------+----------------+----------------+----------------+ | 5 | * | M | Delimiter. | +----------------+----------------+----------------+----------------+ | 6 | Supervisor | C | Supervisor | | | Indicator | | Indicator = | | | | | 88. Used for | | | | | Forced Erasure | | | | | by FM Service | | | | | Supervisor. | +----------------+----------------+----------------+----------------+ | 7 | * | M | Delimiter | +----------------+----------------+----------------+----------------+ | 8 | MSISDN | C | MSISDN of | | | | | previous | | | | | initiating | | | | | subscriber who | | | | | has registered | | | | | the FM to | | | | | remote number. | | | | | This parameter | | | | | is | | | | | conditional, | | | | | only used for | | | | | forced | | | | | erasure. | +----------------+----------------+----------------+----------------+ | 9 | * | M | Delimiter | +----------------+----------------+----------------+----------------+ | 10 | Additional | O | For operator | | | information | | specific use | | | field | | | +----------------+----------------+----------------+----------------+ | last | # | M | End of USSD | | | | | string | +----------------+----------------+----------------+----------------+
# B.4 Messages Contents of the HLR-FM-Request
Contents of the USSD string of HLR-FM- Request is the same of FM-Request
described in clause B.3. Additionally, the MSISDNa is sent to the FFNb
together with the FM-Request within the MAP operation. Contents of the FM-
Response Messages.
The FM-Response messages which are generated by the HLR, as well as the HLR-
FM-Response messages which are received by the HLR from the FFN and are
forwarded unchanged as FM-Response messages to the MS, contain the following
two parts:
\- mandatory part: two digit outcome codes, which are interpreted in the MS
according to operator specific requirements;
\- optional part: the response texts.
The optional part is separated by a space character as separator which occurs
together with the optional part.
These outcome codes indicating success or error of the requested FM operation
are 2 USSD characters according to the following table (table B.2).
Table B.2 Outcome codes for FM-Response
+----------+----------+----------+----------+----------+----------+ | Scenario | Text | [ | [ | [Inte | Outcome | | | examples | Reg]{.un | Era]{.un | rro]{.un | Code | | | for MS | derline} | derline} | derline} | | | | display | | | | | +----------+----------+----------+----------+----------+----------+ | * | | | | | 00 | | _Outcome | | | | | series | | codes | | | | | | | for | | | | | | | su | | | | | | | ccessful | | | | | | | cases_ _| | | | | | +----------+----------+----------+----------+----------+----------+ | Success | Follow | X | | | 01 | | regi | Me | | | | | | stration | a | | | | | | Case | ctivated | | | | | +----------+----------+----------+----------+----------+----------+ | Success | Follow | | X | | 02 | | erasure | Me | | | | | | Case | dea | | | | | | | ctivated | | | | | +----------+----------+----------+----------+----------+----------+ | Success | Follow | | | X | 03 | | inter | Me | | | | | | rogation | active | | | | | | Case | to\ | | | | | | | \  | | | | | | | | | | | | | | The | | | | | | | MSISDN | | | | | | | digits | | | | | | | are sent | | | | | | | in the | | | | | | | USSD | | | | | | | response | | | | | | | s | | | | | | | eparated | | | | | | | by a | | | | | | | _blank _| | | | | | | c | | | | | | | haracter | | | | | | | from the | | | | | | | outcome | | | | | | | code. | | | | | +----------+----------+----------+----------+----------+----------+ | Operator | | | | | 04-06 | | Specific | | | | | | | outcome | | | | | | | codes | | | | | | +----------+----------+----------+----------+----------+----------+ | Reserved | | | | | 07-09 | | for | | | | | | | future | | | | | | | enh | | | | | | | ancement | | | | | | +----------+----------+----------+----------+----------+----------+ |__Spare | | | | | 10 | | outcome | | | | | | | code_ _| | | | | | +----------+----------+----------+----------+----------+----------+ | ** | | | | | 11-12 | | Reserved | | | | | | | for | | | | | | | GSM-R | | | | | | | ailway_ _| | | | | | +----------+----------+----------+----------+----------+----------+ |__Spare | | | | | 13-19 | | outcome | | | | | | | codes_ _| | | | | | +----------+----------+----------+----------+----------+----------+ | | | | | | | +----------+----------+----------+----------+----------+----------+ | * | | | | | 20, 30 | |_ Outcome | | | | | series | | codes | | | | | | | g | | | | | | | enerated | | | | | | | at the | | | | | | | HLRa in | | | | | | | non-su | | | | | | | ccessful | | | | | | | cases**| | | | | | +----------+----------+----------+----------+----------+----------+ | Incoming | Illegal | X | X | X | 21 | | barrings | int | | | | | | | eraction | | | | | | | with | | | | | | | incoming | | | | | | | barring | | | | | +----------+----------+----------+----------+----------+----------+ | Unau | Unau | X | X | X | 22 | | thorised | thorised | | | | | | request | request | | | | | +----------+----------+----------+----------+----------+----------+ | Operator | | | | | 23-30 | | Specific | | | | | | | outcome | | | | | | | codes | | | | | | +----------+----------+----------+----------+----------+----------+ | Reserved | | | | | 31-39 | | for | | | | | | | future | | | | | | | enh | | | | | | | ancement | | | | | | +----------+----------+----------+----------+----------+----------+ | * | | | | | 40 | | *Outcome | | | | | series | | codes | | | | | | | g | | | | | | | enerated | | | | | | | at both | | | | | | | the HLRa | | | | | | | and the | | | | | | | FM | | | | | | | function | | | | | | | node in | | | | | | | non-su | | | | | | | ccessful | | | | | | | cases** | | | | | | +----------+----------+----------+----------+----------+----------+ | Unknown | Unknown | X | X | X | 41 | | remote | remote | | | | | | party | party | | | | | +----------+----------+----------+----------+----------+----------+ | FM not | FM not | X | X | X | 42 | | su | su | | | | | | bscribed | bscribed | | | | | +----------+----------+----------+----------+----------+----------+ | Operator | | | | | 43-45 | | Specific | | | | | | | outcome | | | | | | | codes | | | | | | +----------+----------+----------+----------+----------+----------+ | Reserved | | | | | 46-49 | | for | | | | | | | future | | | | | | | enh | | | | | | | ancement | | | | | | +----------+----------+----------+----------+----------+----------+ | | | | | | | +----------+----------+----------+----------+----------+----------+ | **Spare | | | | | 50 | | unsu | | | | | series | | ccessful | | | | | | | outcome | | | | | | | codes** | | | | | | +----------+----------+----------+----------+----------+----------+ | | | | | | | +----------+----------+----------+----------+----------+----------+ | * | | | | | 60, 70 | | _Outcome | | | | | series | | codes | | | | | | | g | | | | | | | enerated | | | | | | | at the | | | | | | | FM | | | | | | | function | | | | | | | node in | | | | | | | non-su | | | | | | | ccessful | | | | | | | cases_ _| | | | | | +----------+----------+----------+----------+----------+----------+ | Remote | Remote | X | | | 61 | | party | party | | | | | | already\ | already | | | | | | re | re | | | | | | gistered | gistered | | | | | +----------+----------+----------+----------+----------+----------+ | FM not | FM not\ | | X | X | 62 | | re | re | | | | | | gistered | gistered | | | | | | to | to | | | | | | remote | remote | | | | | | party | party | | | | | +----------+----------+----------+----------+----------+----------+ | Remote | Remote | | X | | 63 | | party | party | | | | | | not | not\ | | | | | | re | re | | | | | | gistered | gistered | | | | | | to this | to this | | | | | | MSISDN | MSISDN | | | | | +----------+----------+----------+----------+----------+----------+ | Remote | Unau | X | X | | 64 | | Party | thorised | | | | | | Autho | changes | | | | | | risation | to | | | | | | failed | remote | | | | | | | party | | | | | +----------+----------+----------+----------+----------+----------+ | Call | Illegal | X | | | 65 | | Fo | int | | | | | | rwarding | eraction | | | | | | active | with | | | | | | or | call | | | | | | re | fo | | | | | | gistered | rwarding | | | | | +----------+----------+----------+----------+----------+----------+ | Incoming | Illegal | X | X | | 66 | | or | int | | | | | | outgoing | eraction | | | | | | barrings | with | | | | | | | call | | | | | | | barrings | | | | | +----------+----------+----------+----------+----------+----------+ | Request | Request | X | | | 67 | | to own | to own | | | | | | MSISDN | MSISDN | | | | | | not | not | | | | | | possible | possible | | | | | +----------+----------+----------+----------+----------+----------+ | Operator | | | | | 68-72 | | Specific | | | | | | | outcome | | | | | | | codes | | | | | | +----------+----------+----------+----------+----------+----------+ | Reserved | | | | | 73-79 | | for | | | | | | | future | | | | | | | enh | | | | | | | ancement | | | | | | +----------+----------+----------+----------+----------+----------+ | * | | | | | | |_ Outcome | | | | | | | codes | | | | | | | could be | | | | | | | sent | | | | | | | back by | | | | | | | CFU | | | | | | | p | | | | | | | rocesses | | | | | | | in | | | | | | | unsu | | | | | | | ccessful | | | | | | | cases**| | | | | | +----------+----------+----------+----------+----------+----------+ | forw | forw | X | | | 80 | | arded-to | arded-to | | | | | | number | number | | | | | | is | is | | | | | | invalid | invalid | | | | | | d | d | | | | | | irectory | irectory | | | | | | number | number | | | | | +----------+----------+----------+----------+----------+----------+ | insu | insu | X | X | | 81 | | fficient | fficient | | | | | | inf | inf | | | | | | ormation | ormation | | | | | +----------+----------+----------+----------+----------+----------+ | forw | forw | X | | | 82 | | arded-to | arded-to | | | | | | number | number | | | | | | is a | is a | | | | | | special | special | | | | | | service | service | | | | | | code | code | | | | | | | (e.g. | | | | | | | police) | | | | | +----------+----------+----------+----------+----------+----------+ | Con | Con | X | | X | 83 | | flicting | flicting | | | | | | s | s | | | | | | ituation | ituation | | | | | | with | with | | | | | | other | other | | | | | | suppl | suppl | | | | | | ementary | ementary | | | | | | services | services | | | | | | | (e.g. | | | | | | | incoming | | | | | | | call | | | | | | | barring | | | | | | | has been | | | | | | | ac | | | | | | | tivated) | | | | | +----------+----------+----------+----------+----------+----------+ | Inco | Inco | | X | | 84 | | nsistent | nsistent | | | | | | with | with | | | | | | regi | regi | | | | | | stration | stration | | | | | +----------+----------+----------+----------+----------+----------+ |** Spare | | | | | 85 - 99 | | unsu | | | | | | | ccessful | | | | | | | outcome | | | | | | | codes** | | | | | | +----------+----------+----------+----------+----------+----------+
# B.5 Contents and Format of the USSD String of the USSD-Notify
The Contents and the format of the USSD string of the USSD-Notify are
described in the following table.
Table B.3: Contents of the USSD string of the USSD-Notify for forced de-
registration
+----------------+----------------+----------------+----------------+ | Parameter | Value | Parameter\ | Comment | | number | | mandatory | | | | | (M),\ | | | | | optional (O) | | | | | or conditional | | | | | (C) | | +----------------+----------------+----------------+----------------+ | 1 | OC | M | Operation | | | | | Code: | | | | | | | | | | OC = ## ... | | | | | for Erasure | +----------------+----------------+----------------+----------------+ | 2 | SC | M | Service Code | | | | | for Follow Me. | | | | | SMG1 Refer to | | | | | 22.030 for the | | | | | Service Code | | | | | for Follow Me. | +----------------+----------------+----------------+----------------+ | 3 | * | M | Delimiter | +----------------+----------------+----------------+----------------+ | 4 | REMOTE NUMBER | M | remote number | | | (forced | | | | | deregistered | | | | | number) | | | +----------------+----------------+----------------+----------------+ | 5 | * | M | Delimiter. | +----------------+----------------+----------------+----------------+ | 6 | Supervisor | C | Supervisor | | | Indicator | | Indicator = | | | | | 88. This | | | | | parameter is | | | | | mandatory used | | | | | for Forced | | | | | Erasure by FM | | | | | Service | | | | | Supervisor | | | | | (see also | | | | | parameter | | | | | number 8). | +----------------+----------------+----------------+----------------+ | 7 | * | M | Delimiter | +----------------+----------------+----------------+----------------+ | 8 | MSISDN | C | > \- This | | | | | > parameter is | | | | | > mandatory as | | | | | > MSISDN of | | | | | > supervisor | | | | | > who | | | | | > initiated | | | | | > the forced | | | | | > | | | | | deregistration | | | | | > request. | | | | | > | | | | | > \- This | | | | | > parameter | | | | | > shall not be | | | | | > included if | | | | | > initiated by | | | | | > an | | | | | > | | | | | administrative | | | | | > terminal | | | | | > connected to | | | | | > the FFN. | +----------------+----------------+----------------+----------------+ | 9 | * | M | Delimiter | +----------------+----------------+----------------+----------------+ | 10 | Additional | O | Additional | | | information | | information | | | field | | field | +----------------+----------------+----------------+----------------+ | last | # | M | End of USSD | | | | | string | +----------------+----------------+----------------+----------------+
Note: USSD Notification for Forced deregistration done by administrative
terminal in general is optional.
# B.6 Inter-process Message Init-Notify
The Init-Notify message is an inter-process message in FFN. It is sent from
the process Handle_Remote_Party_Erasure to process FFN_Forced_Erasure_Notify.
This message consists of the parameter USSD String. On receipt of the Init-
Notify message, the process FFN_Forced_Erasure_Notify will pack the USSD
String into the USSD-Notify message and send it to the HLRp. Refer to Table
B.3 for the contents and format of the USSD String.
This message is only required where the FFN is based on an HLR. If the FFN is
based on an IN system it is not required.
#