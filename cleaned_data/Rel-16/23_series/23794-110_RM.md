# Foreword
This Technical Report has been produced by the 3rd Generation Partnership
Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
**The aim of this Technical Report is to study and specify potential**
enhancements to the IMS architecture to enable IMS FE to integrate with the
5GC network functions to enable IMS applications to directly leverage the
features and capabilities of 5GC.
The specific capabilities of 5GC included in this study:
\- In regard to 5GC network slicing; what enhancements (if any) are necessary
for IMS to efficiently support devices and networks with multiple slices and
different IMS services per slice?
\- Should (and How does) IMS leverage the 5GC\'s support for localized routing
of traffic and placement of IMS elements? How do such optimizations impact IMS
media bearers, IMS signalling bearers, and IMS functions? How is service
continuity provided in presence of localized routing?
\- Whether and how can IMS applications and network functions utilize the
service based capabilities and service based interfaces of the 5GC (for
interactions between the IMS and the 5GC)? Which 5GC functions should be
interfaced with IMS using service based interfaces?
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 23.228: \"IP Multimedia Subsystem (IMS); Stage 2\".
[3] 3GPP TS 23.501: \"System Architecture for the 5G System\".
[4] 3GPP TS 23.502: \"Procedures for the 5G System\".
[5] 3GPP TS 23.503: \"Policy and Charging Control Framework for the 5G System;
Stage 2\".
[6] 3GPP TS 23.237: \"IP Multimedia Subsystem (IMS) Service Continuity; Stage
2\".
[7] 3GPP TS 23.203: \"Policy and charging control architecture\".
[8] IETF RFC 6665: \"SIP-Specific Event Notification\".
[9] 3GPP TS 29.329: \"Sh Interface based on Diameter - Protocol details\".
[10] 3GPP TS 29.228: \"IP Multimedia (IM) Subsystem Cx and Dx interfaces;
Signalling flows and message contents\".
[11] 3GPP TS 29.229: \"Cx and Dx interfaces based on the Diameter protocol;
Protocol details\".
[12] 3GPP TS 23.167: \"IP Multimedia Subsystem (IMS) emergency sessions\".
[14] 3GPP TS 29.328: \"IP Multimedia (IM) Subsystem Sh interface; Signalling
flows and message contents\".
# 3 Definitions and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
TR 21.905 [1], and the following apply. A term defined in the present document
takes precedence over the definition of the same term, if any, in TR 21.905
[1].
**\ :** \.
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in TR 21.905
[1], TS 23.228 [2], TS 23.501 [3] and the following apply. An abbreviation
defined in the present document takes precedence over the definition of the
same abbreviation, if any, in TR 21.905 [1].
5GC 5G Core
5GS 5G System
AGW Access Gateway
BP Branching Point
CSRN Circuit Switched Routing Number
FE Functional Entity
GRUU Globally Routable User Agent URI
I-CSCF Interrogating CSCF
IMS AS IMS Application Server IMS FE IMS Functional Entity
IPX IP Exchange
LBO Local Breakout
MMTEL Multi Media Telephony
P-CSCF Proxy CSCF
PSA PDU Session Anchor
SA Session Anchor
S-CSCF Serving CSCF
SCC AS Service Continuity Control Application Server TADS Terminating Access
Domain Selection
UL-CL Uplink Classifier
ULC Uplink Classifier
Editor\'s note: 5G related abbreviations are pending update to TR 21.905 [1]
Editor\'s note: It is FFS which abbreviation for UL-CL/ULC and SA/PSA is
preferred.
# 4 Architecture Assumptions
The following architectural assumptions are applicable for all potential
solutions:
\- IMS architecture defined is TS 23.228 [2] (release 15) is the baseline,
especially with regard to usage of SIP signalling.
\- The IMS Service Based Cx, Dx, Sh are produced logically by the HSS, so the
functional allocation of the IMS service logic to HSS is in line with TS
23.228 [2].
\- All existing IMS architectural models (e.g. TS 23.228 [2], TS 23.237 [6],
etc.) shall be supported
\- SIP signalling is used between UE and IMS Network
# 5 Key Issues
## 5.1 Key Issue 1: Routing of IMS traffic via a localized UPF
The 5GC enables traffic to route via localized UPF close to the edge of the
network (in some cases adjacent to the RAN nodes). Some IMS services may be
able to benefit from the lower latency and/or lower backhaul requirements that
such deployments can enable, however current IMS applications and services are
not able to leverage these capabilities. This key issue investigates the
interactions required to leverage localized routing of IMS media and
signalling traffic, the changes to enable effective control and management of
such routing, and impacts of mobility and roaming.
Example Use Case A:
Routing of IMS traffic (e.g. video) between two (or more) users using an
efficient UP path.
Example Use Case B:
A \"best effort video service\" where the IMS video traffic from UE is
offloaded at a UPF closer to the UE to minimize the backhaul resource usage
based on a decision by the IMS.
The following is a partial list of the issues to be addressed:
\- How can the IMS network influence or control how the 5GC selects the UP
path?
\- Which IMS node interacts with the 5GC (i.e. IMS AS, CSCF, or other IMS
node)?
\- How does an application server request traffic to route using a local UPF?
\- How does IMS request traffic to route using (or prevent routing using) a
local UPF?
\- How is the mobility of the UE considered, and how is service continuity
ensured?
\- If the UE is roaming, how can the localized routing be extended into the
VPLMN (if supported)?
\- What are the impacts on billing and charging?
## 5.2 Key Issue 2: Placement of IMS application server in localized
environments
The 5GC in release 15 defined some functionality to enable \"mobile edge
computing\" (i.e. computing resources located close to the edge of the
network) to enable enhanced services to users. The functionality defined in
release 15 focused on general compute applications, and did not analyse the
special case of IMS applications. This key issue investigates the enhancements
to current capabilities of IMS and 5GC to enable the operation of IMS servers
in the mobile edge space.
Example Use Case A:
For a given venue (e.g. stadium) IMS videos may be stored and retrieved
locally for playback only on UE\'s that are located on a group of small cells
that serve the venue.
Example Use Case B:
Mission critical services that require optimization of signalling traffic as
well as media may require, placement of P-CSCF and AGW (or other IMS FE) close
to AN.
The following is a partial list of the issues to be addressed:
\- How can IMS leverage 5G support for edge computing?
\- What additions to IMS and 5G support for edge computing capabilities are
required?
\- What restrictions are there (if any) on IMS applications in the edge
network?
\- How are the localized IMS applications identified?
\- How are IMS applications outside the local PLMN impacted (e.g. roaming).
\- What impacts does the solution have on mobility?
\- What impacts does the solution have on service, and application continuity?
\- Is there any further impact on routing of IMS media and IMS signalling?
## 5.3 Key Issue 3: Network Slicing and IMS
In release 15, 5GC developed capabilities to divide the network into slices to
better offer services to users and devices - in many cases the details of
network slicing do not impact IMS, however if the IMS domain offers different
services to different 5GC network slices there may be some impacts. This key
issue investigates the impacts to the IMS domain due to 5GC network slicing,
and how a IMS network can ensure a user or device with multiple 5GC network
slices and multiple IMS services from utilizing the appropriate 5GC network
slice for each IMS service and prevent inappropriate services been used from
the incorrect 5GC network slice.
Examples of the use cases that solutions to this key issue will enable
include:
**Use Case A: Different 5GC slices optimized for different IMS services**
In this use case each 5GC slice supports a different IMS service and the 5GC
slice is optimized for the media type associated with the IMS service. It is
possible that either a shared or separate IMS network provides the services
for each slice (scenario 1 or scenario 2 described below).
Figure 5.3.1 shows an example implementation of this use case where 3 5GC
slices are used, one for IMS messaging service, one for IMS voice service, and
one for IMS video call service. The diagram shows the association of the IMS
services to their appropriate slice, the IMS services may be supported by a
shared IMS network (i.e. Scenario 2), in which case the 5GC slices will
connect to through the common IMS network.
Figure 5.3.1: Example use case with different 5GC slices optimized for
different IMS services
**Use Case B: Different 3rd party 5GC slices with support for 3rd party IMS
services**
In this use case separate 5GC slices are operated by different parties (some
separate from the network operator); each 5GC slice is used to support IMS
services according to the 5GC slice operator\'s service needs; these IMS
services may be different or duplicated per slice according to service
requirements. Additionally, some 5GC slices may provide non-IMS services.
While it is feasible that a shared IMS network provides the services for each
slice (as per scenario 1 described below), this is an unlikely implementation
and it is assumed each party has their own IMS network (as per scenario 2
described below).
Figure 5.3.2 shows an example implementation of this use case where 3 5GC
slices are provided, one provided by an automobile manufacturer, one provided
by an automotive entertainment service provider, and one provided by a network
operator. A different mix of IMS and connectivity services are provided by
each 5GC slice. The diagram shows the association of the IMS services to their
appropriate slice, however as each slice is provided by different parties it
is unlikely that the IMS services share an IMS network (i.e. Scenario 2); thus
each 5GC slice would be associated with a different IMS network supporting the
IMS services associated with the 5GC slice.
Figure 5.3.2: Example use case with different 3rd party 5GC slices providing
IMS services
Two scenarios are possible (and may be mixed when more than 2 slices are
considered):
Scenario 1 - Each 5GC network slice is associated with a separate and distinct
IMS network
Figure 5.3-3 UE connects to two IMS networks through two 5GC network slices
Scenario 2 - Each 5GC slice is associated with a common IMS network
Figure 5.3-4: UE connects to common IMS network through two 5GC network slices
Solutions may relate to one, or both, of these scenarios.
The following is a partial list of what aspects the solutions to this key
issue need to address:
> \- How the IMS service ensures a specific 5GC slice is used.
>
> \- What an IMS service does if a required 5GC slice is not available or
> prohibited.
>
> \- When the IMS FEs and UE are in different PLMNs (i.e. roaming), how the
> two networks interact.
>
> \- How IMS FEs identify the currently used 5GC slice for a specific IMS
> service.
>
> \- Whether the IMS applications are aware of the 5GC slice information.
>
> \- What additional information is carried in the IMS signalling between IMS-
> FE\'s and UE
>
> \- Any changes to the P-CSCF discovery procedures due to 5GC slicing.
>
> \- How the UE and network register and authenticate the IMS service in
> specific slice (whether the IMS is shared or separated).
>
> \- For MT services, how does the IMS network determine to deliver the
> service to the appropriate 5GC network slice.
>
> \- Whether there are any impacts to the \'UE\'s IMS identities and what they
> are if any.
>
> \- IMS backward compatibility to Rel-15.
>
> \- Solutions should specify if they are applicable to scenario 1 only,
> scenario 2 only, or both scenarios 1&2\. Solutions that apply to both
> scenarios 1&2 should identify any aspects that apply differently between the
> to two scenarios.
## 5.4 Key Issue 4: Discovery of Network Functions
This key issue explores options for :
\- discovery of network functions exposed to IMS e.g.:
\- discovery of PCF services by P-CSCF,
\- discovery of HSS by IMS network entities (e.g. I-CSCF, S-CSCF, IMS AS) in
deployments using both Diameter and service-based interfaces.
\- as well as discovery of IMS functions e.g. P-CSCF by SMF.
## 5.5 Key Issue 5: Enabling SBA-based Cx
This key issue explores mapping of existing Cx procedures to currently defined
Nudm services and operations and introducing an SBA-based interface to HSS. In
particular, the following aspects, among others, will be studied: -
\- The benefits of introducing SBA to this interface;
\- Adding an SBA-based interface to HSS;
\- How an SBA-based Cx interface for HSS and UDM can inherit from currently
defined Nudm services and operations including:
\- whether an SBA-based Cx interface should be re-used with potential extra
services/operations/parameters.
\- or whether dedicated services should be created for IMS.
The outcome should strive to get same result for SBA-based Cx and SBA-based Sh
interfaces.
## 5.6 Key Issue 6: Enabling SBA-based Sh
This key issue explores mapping of existing Sh procedures to currently defined
Nudm services and operations and introducing an SBA-based interface to HSS. In
particular, the following aspects, among others, will be studied:
\- The benefits of introducing SBA to this interface;
\- Depicting some use cases.
\- Adding an SBA-based interface to HSS
\- How an SBA-based Sh interface for HSS and UDM can inherit from currently
defined Nudm services and operations including:
\- whether an SBA-based Sh interface should be re-used with potential extra
services/operations/parameters.
\- or whether dedicated services should be created for IMS.
The outcome should strive to get same result for SBA-based Sh and SBA-based Cx
interfaces.
NOTE: In existing Sh operations, HSS currently acts as a proxy toward other
Network Functions/network entities, e.g. TADS, NetLoc, CSRN retrieval, etc.
## 5.7 Key Issue 7: How can IMS utilize services provided by Npcf
As specified in TS 23.503 [5], to allow the 5G system to interwork with AFs
supporting existing services, the PCF shall support the corresponding Rx
procedures and requirements as defined in TS 23.203 [7]. This facilitates the
migration from EPC to 5GC without requiring these AFs to upgrade to support
the service based N5 interface. However, with the introduction of service
based interface to PCF, the removal of the Rx point-to-point interface may be
expected to ease testing, reliability, and troubleshooting issues.
This key issue addresses the following aspects:
\- how IMS utilizes services provided by Npcf to support the interaction with
PCF.
\- what information is used by P-CSCF and how P-CSCF derives the information
to determine which PCC interface is used for a specific IMS session
establishment, when P-CSCF supports N5 and Rx simultaneously.
\- what input and output parameters are needed in Npcf service operations to
add support existing IMS procedures over 5GS.
## 5.8 Key Issue #8: How can IMS utilize services provided by 5GC NFs other
than PCF
All of the 5GC control plane NFs are specified as service based and any NF can
be consumer of the services provided by other NFs, if supported by the
procedures.
This key issue addresses the following aspects:
\- How IMS can utilize services provided by 5GC NFs other than PCF.
\- How to determine the UE location in IMS entities with service operations
(e.g. determination of the visited PLMN ID in case of Home-Routed VoLTE
roaming).
## 5.x Key issue #X: \
### 5.x.1 Description
Editor\'s note: This clause provides a short description of the key issue.
### 5.x.2 Requirements
Editor\'s note: This clause provides the requirements the solutions to this
key issue need to address.
# 6 Solutions
## 6.1 Solution 1: Entire IMS in localized network
### 6.1.1 Description
#### 6.1.1.1 General
This is a solution to key issue #2.
In this solution, all functions of the IMS (except HSS) are in a local network
(i.e. a network located physically close to the RAN nodes). The proximity to
and the number of RAN nodes inside the local network will be determined by the
specifics of the implementation and the services used.
#### 6.1.1.2 Architecture
The following diagram shows the configuration of the IMS and 5GC functional
elements, it assumes that IMS Access Gateways are used for media traffic
(however other IMS topologies are possible).
Figure 6.1.1.2: IMS located in local network near RAN nodes
The IMS HSS is located outside the local network (this may be co-located with
the 5GC functions or other core network functions).
NOTE: Some interfaces and functions omitted for clarity.
Editor\'s note: The nature of the P-CSCF to PCF interface is FFS.
The local network is a sub-network of the operator network located physically
close to the access network, typically this is a group of cells (including a
single cell) with common connectivity; this may be the result of deployment
constraints (e.g. fibre cluster), or service need (e.g. stadium, campus).
Depending on IP routing configuration the local network may or may not enable
IP connectivity to/from UE\'s connected to cells outside the local area (hence
this is not the same as LADN).
#### 6.1.1.3 Determination of Localized Routing
When the UE establishes the PDU Session for IMS service, the SMF shall select
the UPF in the local network, the SMF can make this determination based on the
DNN, subscription information (e.g. NSSAI), roaming status, or a combination
of these attributes and from the location information of the access node (TA
or Cell ID). Using static configuration in the SMF (based on the UPF used),
the local P-CSCF is discovered, and from there registration with the local IMS
proceeds according to normal IMS procedures (albeit with the FE\'s in the
local network).
Editor\'s note: Whether (and how) the UE can simultaneously register to a
local IMS, and a centralized IMS is FFS.
Editor\'s note: The selection by the SMF for a localized P-CSCF based on
factors other than the selected UPF is FFS.
#### 6.1.1.4 Mobility Aspects
So long as the UE does not move to a RAN node outside the local network area,
the existing mobility functions of the 5GC are used unchanged.
When the UE moves to a RAN node outside the local network area the UE may lose
IP connectivity to the P-CSCF forcing it to re-register for IMS service in the
new area, this will result in termination (and possible interruption) of
ongoing service sessions, re-authentication, and re-establishment of any
security associations. If the UE maintains IP address preservation without RAT
change after moving outside the local network area, the P-CSCF will trigger
re-registration.
Editor\'s note: How the P-CCSF determines that the UE has moved outside the
local area and subsequent procedures are FFS.
### 6.1.2 Impacts on existing nodes and functions
No new functionality.
If the number of local networks deployed is large the PCF will need to support
many different P-CSCF registrations and interfaces to each P-CSCF than for
similar centralized networks. Similarly, the HSS will need to support many
more interfaces with the S-CSCF and IMS-AS, than typical for a centralized
implementation.
### 6.1.3 Solution Evaluation
Editor\'s note: Evaluation of the solution is FFS.
## 6.2 Solution 2: IMS AS Influences routing of IMS media traffic as a 5G AF
### 6.2.1 Description
#### 6.2.1.1 General
This is a solution to key issue #1
When the IMS AS determines that routing of media traffic via a localized UPF
is necessary, it uses the \"AF influence of traffic routing\" feature of the
5GC, to direct the traffic for a specific media flow to the local UPF. If
local routing is not possible the 5GC routes the media using the centralized
network.
Editor\'s note: Whether and how, the P-CSCF switches the media to use local
routing if it becomes available subsequently to the media establishment is
FFS.
#### 6.2.1.2 Architecture
The following diagram assumes that the IMS AS interacts with the PCF to
influence the routing of traffic, the use of the same capability via the NEF
is also possible (but not shown). It is also assumed that IMS Access Gateways
are used for media traffic (however other IMS topologies are possible).
Figure 6.2.1.2: IMS and 5GC architecture for local UPF routing by IMS AS
NOTE: Some interfaces and functions omitted for clarity.
IMS AS uses Npcf to communicate with PCF to request localized routing be used
for media traffic.
Editor\'s note: The nature of the P-CSCF to PCF interface is FFS.
The local network is a sub-network of the operator network located physically
close to the access network, typically this is a group of cells (including a
single cell) with common connectivity; this may be the result of deployment
constraints (e.g. fibre cluster), or service need (e.g. stadium, campus). The
IP routing configuration of the local network should provide IP connectivity
to/from UE\'s connected to cells outside the local area (hence this is not the
same as LADN).
#### 6.2.1.3 Establishment Procedure
When the UE requests the PDU session for IMS signalling, based on the DNN,
S-NSSAI, subscription information, roaming status, or a combination of these
factors, the SMF will establish the IMS PDU session with a UPF uplink
classifier in the local network, and a UPF session anchor (for IMS signalling)
in the core network.
When IMS later requires a locally routed media bearer, it will use the
procedure described in figure 6.2.1.3 to establish the media bearer (by
modifying the PDU session used for IMS).
The following procedure assumes IMS AS is interacting with PCF (as a 5G AF).
Figure 6.2.1.3 High-level IMS Media Bearer Establishment with local UPF
1: IMS Session Initiation, either:
1a: UE sends a SIP INVITE message to its P-CSCF, or
1b: The P-CSCF receives a SIP INVITE for a MT session towards a UE.
2: IMS Session establishment continues.
3: IMS AS determines that localized routing may be applicable to this session
(depending on the service and use case this may be at different points in the
IMS session establishment).
Editor\'s note: How the IMS AS determines the need for localized routing is
FFS.
4: The IMS AS uses the Npcf_PolicyAuthorization_Create or Modify service
specifying the UE it wishes to influence and the list of DNAI that are
applicable. (the IMS AS continues the IMS Session establishment procedure).
Editor\'s note: How the IMS AS can obtain or determine the DNAI is FFS.
5\. The IMS requests the P-CSCF top create an IMS media bearer for this
session (according to the SDF agreed in the session establishment procedure).
Based on configuration the P-CSCF determines the applicable AGW (and hence
UPF) the media session will utilize.
Editor\'s note: Whether and If steps 4 and 5 can be combined into a single
interaction is FFS.
6\. P-CSCF requests modification of the PDU session to create the requested
media bearer to the selected AGW (indicating SCC mode 2 or SCC mode 3); the
SMF selects the UPF SA and inserts the UPF ULC according to existing
procedures.
7\. Media Bearer established.
Editor\'s note: IMS AS use of the NEF to influence traffic routing is FFS.
#### 6.2.1.3 Mobility Aspects
So long as the UE does not move to a RAN node outside the local network area,
the existing mobility functions of the 5GC are used unchanged.
When the UE moves to a RAN node outside the local network area, the PCF
informs the IMS AS (via the event notify procedure), the IMS AS updates the
DNAI for the localized routing, and triggers the P-CSCF to re-allocate the IMS
AGW; using either SSC mode 2 or 3 (depending on media and service type) the
media is transitioned to the new IMS AGW and service continues.
Editor\'s note: Details of the IMS-AGW re-allocation procedure and how SSC
modes 2 or 3 are used for mobility are FFS.
There is no support for EPC interworking, if the UE moves to a RAN node not
connected to 5GC, the media session is terminated.
### 6.2.2 Impacts on existing nodes and functions
Editor\'s note: Impacts to existing nodes and functions are FFS
### 6.2.3 Solution Evaluation
Since in release 15, AF influence of traffic routing is only defined in the
non-roaming case and LBO roaming case, this solution is only applicable to UEs
located in their HPLMN (or equivalent), as the IMS AS is always located in the
home network.
Editor\'s note: Additional evaluations are FFS
## 6.3 Solution 3: P-CSCF Influences routing of IMS media traffic as a 5G AF
### 6.3.1 Description
#### 6.3.1.1 General
This is a solution to key issue #1
When the IMS AS determines that routing of media traffic via a localized UPF
is necessary, it indicates this in the to the P-CSCF, such that the P-CSCF can
then use the \"AF influence of traffic routing\" feature of the 5GC, to direct
the traffic for a specific media flow to the local UPF. If local routing is
not possible the 5GC routes the media using the centralized network.
Editor\'s note: Whether and how, the P-CSCF switches the media to use local
routing if it becomes available subsequently to the media establishment is
FFS.
#### 6.3.1.2 Architecture
The following diagram assumes that the P-CSCF interacts with the PCF to
influence the routing of traffic, the use of the same capability via the NEF
is also possible (but not shown). It is also assumed that IMS Access Gateways
are used for media traffic (however other IMS topologies are possible).
Figure 6.3.1.2: IMS and 5GC architecture for local UPF routing by P-CSCF
NOTE: Some interfaces and functions omitted for clarity.
P-CSCF uses Npcf to communicate with PCF to request localized routing be used
for media traffic.
Editor\'s Note: Whether (and if) the P-CSCF uses Npcf for other functions is
FFS.
The local network is a sub-network of the operator network located physically
close to the access network, typically this is a group of cells (including a
single cell) with common connectivity; this may be the result of deployment
constraints (e.g. fibre cluster), or service need (e.g. stadium, campus). The
IP routing configuration of the local network should provide IP connectivity
to/from UE\'s connected to cells outside the local area (hence this is not the
same as LADN).
#### 6.3.1.3 Establishment Procedure
When the UE requests the PDU session for IMS signalling, based on the DNN,
S-NSSAI, subscription information, roaming status, or a combination of these
factors, the SMF will establish the IMS PDU session with a UPF uplink
classifier in the local network, and a UPF session anchor (for IMS signalling)
in the core network.
When IMS later requires a locally routed media bearer, it will use the
procedure described in figure 6.3.1.3 to establish the media bearer (by
modifying the PDU session used for IMS)
The following procedure assumes P-CSCF is interacting with PCF (as a 5G AF).
Figure 6.3.1.3: High-level IMS Media Bearer Establishment with local UPF
1: IMS Session Initiation, either:
1a: UE sends a SIP INVITE message to its P-CSCF, or
1b: The P-CSCF receives a SIP INVITE for a MT session towards a UE.
2: IMS Session establishment continues.
3: IMS AS determines that localized routing may be applicable to this session
(depending on the service and use case this may be at different points in the
IMS session establishment).
Editor\'s note: How the IMS AS determines the need for localized routing is
FFS.
4: The IMS requests the P-CSCF to create an IMS media bearer for this session
(according to the SDF agreed in the session establishment procedure) -
included in this message is an indication that localized media bearers are
preferred.
5: The P-CSCF uses the Npcf_PolicyAuthorization_Create or Modify service
specifying the UE\'s routing it wishes to influence and the list of DNAI that
are applicable. (the P-CSCF continues the IMS Session establishment
procedure).
Editor\'s note: How the P-CSCF determines or obtains the DNAI is FFS.
6\. Based on configuration the P-CSCF determines the applicable AGW (and hence
UPF) the media session will utilize and requests modification of the PDU
session to create the requested media bearer to the selected AGW (indicating
SCC mode 2 or SCC mode 3); the SMF selects the UPF SA and inserts the UPF ULC
according to existing procedures.
Editor\'s note: Whether and If steps 5 and 6 can be combined into a single
interaction is FFS.
Editor\'s note: Determination if support for both SSC mode 2 and 3 is FFS.
7\. Media Bearer established.
#### 6.3.1.3 Mobility Aspects
So long as the UE does not move to a RAN node outside the local network area,
the existing mobility functions of the 5GC are used unchanged.
When the UE moves to a RAN node outside the local network area, the PCF
informs the P-CSCF (via the event notify procedure), the P-CSCF then updates
the DNAI for the localized routing, and triggers the re-allocation of the IMS
AGW; using either SSC mode 2 or 3 (depending on media and service type) the
media is transitioned to the new IMS AGW and service continues. The UE retains
the same IP address for the media flow and the IMS AGW provides any required
mapping to/from IP addresses in the local network.
Editor\'s Note: Details of the IMS-AGW re-allocation procedure and how SSC
modes 2 or 3 are used for mobility are FFS.
There is no support for EPC interworking, if the UE moves to a RAN node not
connected to 5GC, the media session is terminated.
### 6.3.2 Impacts on existing nodes and functions
Editor\'s Note: Impacts to existing nodes and functions are FFS
### 6.3.3 Solution Evaluation
Since in release 15, AF influence of traffic routing is only defined in the
non-roaming case and LBO roaming case, this solution is restricted to UEs
located in their HPLMN (or equivalent).
Editor\'s Note: How (and if) the local P-CSCF in LBO roaming case can use this
functionality is FFS.
Editor\'s Note: Additional evaluations are FFS
## 6.4 Solution 4: Multi-homing based PSA addition to the PDU Session for IMS
for localized routing
### 6.4.1 Description
This solution corresponds to the Key Issue#1 \"Routing of IMS traffic via a
localized UPF\".
To enable routing of IMS traffic via a localized UPF, \"Single PDU Session
with multiple PDU Session Anchors (PSA\'s)\" can be used as described in
clause 5.6.4 of TS 23.501 [3]. This localized routing can be achieved by the
procedure defined in clause 4.3.5.4 of TS 23.502 [4]. Uplink Classifier (UL
CL) based PSA addition has no UE impact while multi-homing based PSA addition
has UE impact as described in steps 7 and 8 in Figure 4.3.5.4-1: Addition of
additional PDU Session Anchor and Branching Point or UL CL of TS 23.502 [4].
When the UE acquires the new IP prefix due to multi-homing based PSA addition
to the PDU Session for IMS, how the upper layer of the UE (i.e. IMS layer) can
use the new IPv6 address should be defined. In particular, the UE does not
have to perform IMS registration by using the new IPv6 address which means the
new IPv6 address is used for IMS media routing via a localized UPF and not
used for SIP signalling as illustrated in Figure 6.4.1-1.
Figure 6.4.1-1: Routing of IMS media via a localized UPF with new IP address
Editor\'s note: It is FFS whether an IMS AGW is needed for gating control of
media flows offloaded via PSA-L.
Editor\'s note: It is FFS how the IMS determines whether the remote party is
reachable via the local address.
Editor\'s note: It is FFS how service continuity is ensured when the UE moves
outside of the area served by the local PSA.
NOTE: Which IMS media can be locally routed by using the new IP address is
based on UE policy.
In order to make the IMS layer\'s behaviour clear, it is proposed to get the
NAS layer of the UE provide an indication that the new IPv6 address is only
for IMS media to the IMS layer when the UE has acquired the new IP prefix due
to multi-homing based PSA addition to the PDU Session for IMS.
Figure 6.4.1-2 is same as Figure 4.3.5.4-1: Addition of additional PDU Session
Anchor and Branching Point or UL CL of TS 23.502 [4] and only step 7 has
addition for the proposed solution.
Figure 6.4.1-2: Multi-homing based PSA addition to the PDU Session for IMS for
localized routing
For the proposed solution, step 7 has the following addition:
\- The NAS layer of the UE provides the upper layer (i.e. IMS layer) with an
indication that the new IPv6 address is only for IMS media.
### 6.4.2 Impacts on existing nodes and functions
UE:
\- The NAS layer of the UE provides the upper layer (i.e. IMS layer) with an
indication that the new IPv6 address is only for IMS media when the UE has
acquired the new IP prefix due to multi-homing based PSA addition to the PDU
Session for IMS.
\- When the IMS layer of the UE receives the indication that the new IPv6
address is only for IMS media from the NAS layer, the UE does not perform IMS
registration by using the new IPv6 address.
Core network:
\- No impact.
IMS network:
\- No impact.
### 6.4.3 Solution Evaluation
Editor\'s note: This clause provides an evaluation of the solution.
## 6.5 Solution 5: Routing of IMS traffic via a localised UPF with two IP
addresses
### 6.5.1 Description
The solution addresses Key Issues #1.
Depicted in Figure 6.5.1-1 is a simplified architecture for routing of IMS
traffic via localised UPFs (UPF-BP, UPF-SA) and IMS AGW with no more than two
IP addresses. The objective is to offload selected IMS traffic flows as close
to the network edge while enabling service continuity upon UE mobility. The
figure is illustrated with a Multi-homed IPv6 PDU Session, however, the same
can be achieved using multiple PDU Sessions.
Figure 6.5.1-1: Routing of IMS traffic via a localised UPF with two IP
addresses
The salient features of this solution approach are the following:
\- UE uses a common IP address for SIP signalling (Gm) and user plane traffic.
\- Most of the time UE uses only one IP address. The second IP address is used
only to enable SSC mode 3 service continuity. After completion of service
continuity, the old IP address is released.
\- The P-CSCF in this approach can be (but does not have to be) located close
to the network edge. An IMS AGW can be used for control of media flows.
Editor\'s note: It is FFS how P-CSCF discovery works when the additional
prefix is assigned in a Multi-homed IPv6 PDU Session.
Editor\'s note: It is FFS how the localized IMS AGW selection works when the
P-CSCF resides in a central location.
Consider the following scenario:
1\. Initially UE is connected via PSA1. It is registered with the IMS via
P-CSCF1. Both SIP and user plane traffic transit via PSA1. UE\'s IMS sessions
are anchored in a Service Continuity Control Application Server (SCC AS) as
described in TS 23.237 [6].
2\. Due to UE mobility at some point, the network establishes PSA2 and assigns
a second IP address/prefix to the UE as described in TS 23.502 [4] clause
4.3.5.2 (\"Change of SSC mode 3 PDU Session Anchor with multiple PDU
Sessions\") or TS 23.502 [4] clause 4.3.5.3 (\"Change of SSC mode 3 PDU
Session Anchor with IPv6 Multi-homed PDU Session\"). In either case the IMS
client is provided with the information about how long the network is willing
to keep the old PSA (PSA1) via the PDU Session Address Lifetime value provided
in NAS signalling or via the valid lifetime parameter in Router Advertisement
message.
3\. Based on the information about the remaining lifetime of PSA1, the IMS
client in the UE triggers another IMS registration via PSA2 and P-CSCF2.
4\. After the new IMS registration is completed, the SIP client in the UE
performs the PS-PS Access Transfer procedure described in TS 23.237 [6] to
move all traffic flows from PSA1 to PSA2.
5\. After all traffic is consolidated on PSA2, the SIP client releases the old
registration via P-CSCF1 and PSA1 is also released.
### 6.5.2 Impacts on existing nodes and functions
### 6.5.3 Solution Evaluation
## 6.6 Solution 6: Routing of IMS traffic via a localised UPF with three IP
addresses
### 6.6.1 Description
#### 6.6.1.1 General
The solution addresses Key Issues #1.
Depicted in Figure 6.6.1.1-1 is a simplified architecture for routing of IMS
traffic via localised UPFs (UPF-BP, UPF-SA) with no more than three IP
addresses. The objective is to offload selected IMS traffic flows as close to
the network edge while enabling service continuity due to UE mobility. The
figure is illustrated with a Multi-homed IPv6 PDU Session, however, the same
can be achieved using multiple PDU Sessions.
Figure 6.6.1.1-1: Routing of IMS traffic via a localised UPF with three IP
addresses
The salient features of this solution approach are the following:
\- UE uses a distinct IP address for SIP signalling (Gm) which is anchored in
a remote IP anchor (PSA-R).
\- User plane traffic that is offloadable is routed on an IP address/prefix
that is anchored in a local IP anchor (PSA-L). Non-offloadable user plane
traffic is routed via the remote IP anchor (PSA-R).
\- Most of the time UE uses only two IP addresses: one for Gm and the other
one for user plane traffic. The third IP address is used only to enable SSC
mode 3 service continuity. After completion of service continuity, the old IP
address for user plane traffic is released.
\- The P-CSCF in this approach is located in a remote location.
Editor\'s note: It is FFS whether an IMS AGW is needed for gating control of
media flows offloaded via PSA-L1 and PSA-L2. And if so, it is FFS how that IMS
AGW is relocated by the P-CSCF.
Consider the following scenario:
1\. Initially UE is connected via PSA-R for SIP signalling and PSA-L1 for user
plane. Its registration with the IMS is always anchored via the same P-CSCF.
2\. At some point the network establishes PSA-L2 and assigns a third IP
address/prefix to UE as described in TS 23.502 [4] clause 4.3.5.2 (\"Change of
SSC mode 3 PDU Session Anchor with multiple PDU Sessions\") or TS 23.502 [4]
clause 4.3.5.3 (\"Change of SSC mode 3 PDU Session Anchor with IPv6 Multi-
homed PDU Session\"). In either case the IMS client is provided with the
information about how long the network is willing to keep the old local PSA
(PSA-L1) via the PDU Session Address Lifetime value provided in NAS signalling
or via the valid lifetime parameter in Router Advertisement message.
3\. Based on the information about the remaining lifetime PSA1 the IMS client
in the UE uses reINVITE to move all traffic flows from PSA-L1 to PSA-L2.
4\. After all traffic is consolidated on PSA-L2, PSA-L1 is released.
#### 6.6.1.2 Determining traffic offloadability
UE needs to be able to determine whether specific media flow is offloadable or
not. The media flow is considered offloadable if it satisfies the following
two conditions:
1\. The media flow is \"intrinsically offloadable\" i.e. the network considers
that it is acceptable for specific media types (e.g. video) to be routed via
the Internet (instead of being routed via the operator\'s controlled IP
transport network or the IPX).
2\. The remote party is reachable via the local IP address.
Intrinsic offloadability can be determined either by DM configuration or by
using the SIP Specific Event Notification framework as defined in RFC 6665
[8]. In the latter case a new event needs to be defined e.\". \"notification
for intrinsically offloadable services or media ty\"es\".
The remote party reachability can be checked using the SIP OPTIONS capability
exchange as described below. This procedure can be initiated any time during
an established SIP media session (typically when the UE is assigned a local IP
address).
Consider a scenario with two UEs: UE-A and UE-B, where UE-A has a local IP
address (in addition to the IMS IP address that is used for Signalling) that
can be used for traffic offload of \"intrinsically offloadable\" media flows.
In contrast, UE-B has only the IMS IP address.
UE-A knows that it can offload traffic (i.e. it knows that it has
\"intrinsically offloadable\" media flows) and triggers a SIP OPTIONS exchange
with UE-B as follows:
UE-A --> SIP OPTIONS to UE-B
\
**Supported: \ **
**\ **
m1 audio (IMS IP address) [UE-A\'s IP address that is used for Signalling]
m2 video (IMS IP address) [UE-A\'s IP address that is used for Signalling]
m3 video (local IP address) [This is the local IP address of UE-A]
On receiving SIP OPTIONS, UE-B responds with 200 OK as follows:
UE-B -> 200 OK to UE-A
\
**Supported: \ **
**\ **
m1 audio (IMS IP address) [UE-B\'s IP address that is used for Signalling]
m2 video (IMS IP address) [UE-B\'s IP address that is used for Signalling]
m3 video (IMS IP address) [UE-B\'s IP address that is used for Signalling]
Even though UE-B has not indicated a local IP address, UE-A can still try to
use its local IP address to reach UE-B on its IMS IP address.
UE-A first needs to perform a reachability check by sending a Ping message
from its local IP address to UE-B\'s IMS IP address. If UE-B responds to
Use\'-A\'s Ping message, UE-A triggers a SIP reINVITE for \"m3 video\" media
indicating UE-A\'s local IP address. UE-B acknowledges the message indicating
UE-B\'s IMS IP address.
If at some point later UE-B acquires a local IP address, it can trigger the
SIP OPTIONS exchange mechanism and perform the reachability check by sending a
Ping message from its local IP address to UE-A\'s IMS IP address.
### 6.6.2 Impacts on existing nodes and functions
### 6.6.3 Solution Evaluation
## 6.7 Solution 7: IMS traffic local routing by applying AF influence
mechanism
### 6.7.1 Description
This solution applies to Key Issue 1: Routing of IMS traffic via a localized
UPF which will investigate the interactions required to leverage localized
routing of IMS media and signalling traffic, the changes to enable effective
control and management of such routing.
The 5GC enables to route traffic via localized UPF close to the edge of the
network. Some IMS services may benefit from the lower latency and less
backhaul resource usage resulted from such deployments, such as routing of IMS
traffic (e.g. video) between two users using an efficient UP path when two
users are served by one UPF and IMS-AGW and offloading IMS video traffic at a
UPF closer to the UE.
The following figure shows how an efficient user plane path is created for IMS
services.
Figure 6.7.1-1: Procedure for IMS local routing
1\. The UE sends SIP INVITE message with PANI and media feature tag, which
includes ICSI or IARI, to initiate an originating call.
2\. After receiving the SIP INVITE message, the P-CSCF selects an IMS-AGW or
an IMS-AGW list according to UE\'s location information and requested
services.
NOTE 1: The P-CSCF obtains the UE location from the received PANI or the
P-CSCF can obtain the UE location via Rx/N5 interface from PCF using the
existing UE location retrieval or subscription to notification mechanism
during or after IM registration procedure.
NOTE 2: The mapping between the local IMS-AGW or IMS-AGW list corresponding to
the IMS communication service or IMS application, i.e. ICSI or IARI included
in the media feature tag, and the UE location, is configured in the P-CSCF.
OPTION A: If the P-CSCF selects an IMS-AGW, steps 3a-5a are performed.
3a. If the P-CSCF selects an IMS-AGW in step 2, e.g. in case there is only one
IMS-AGW locally deployed, the P-CSCF allocates media termination via H.248
protocol between P-CSCF and IMS-AGW.
4a-5a. The P-CSCF sends AAR to the PCF with the selected DNAI, and/or IP
filter information (e.g. 5 Tuple), and the policies to be applied to the
corresponding PDU Sessions. The policies may influence the SMF to select a UPF
which is closer to the IMS-AGW and the UE.
NOTE 3: This step applies the mechanism \"Processing AF requests to influence
traffic routing\" as specified in TS 23.502 [4] clause 4.3.6.2, including the
mapping of IMS-AGW address and DNAI.
NOTE 4: The 5GC will allocate a UPF according to the UE location and the
selected DNAI.
Editor\'s note: How (from which configured/dynamic information) the P-CSCF
determines the DNAI is FFS.
OPTION B: If the P-CSCF selects an IMS-AGW list, steps 3b-7b will be
performed.
3b-4b. The P-CSCF sends AAR to the PCF with the selected DNAI list, and the
policies to be applied to the corresponding PDU Sessions. The policies may
influence the SMF to select a UPF which is closer to the IMS-AGW and the UE.
NOTE 5: This step applies the mechanism \"Processing AF requests to influence
traffic routing\" as specified in TS  _23.502_  _[4]_ clause _4.3.6.2 \",
including the mapping of IMS-AGW address list and DNAI list_.
NOTE 6: The 5GC will allocate a UPF/DNAI according to the UE location and the
selected DNAI list.
Editor\'s note: How (from which configured/dynamic information) the P-CSCF
determines the list of DNAI is FFS.
5b. When the P-CSCF receives the AAA message, and gets the selected DNAI by
5GC, it allocates media termination with the corresponding IMS-AGW via H.248.
6b-7b. The P-CSCF sends AAR to PCF with IP filter information (e.g. 5 Tuple)
for policy decision.
8\. The P-CSCF forwards the INVITE message to next node.
NOTE 7: The P-CSCF if supported interacts with the PCF by invoking the
services of PCF via N5.
Editor\'s note: The impact on P-CSCF discovery and selection for IMS traffic
local routing is FFS.
Editor\'s note: The procedure in case of UE mobility is to be provided.
Editor\'s note: Whether UP-re-anchoring is required and whether it should be
done before or after IMS-AGW selection for both options is FFS.
### 6.7.2 Impacts on existing nodes and functions
Editor\'s note: This clause describes impacts to existing entities and
interfaces.
### 6.7.3 Solution Evaluation
Editor\'s note: This clause provides an evaluation of the solution.
## 6.8 Solution 8: Application Function influence on network slice selection
### 6.8.1 Description
#### 6.8.1.1 General
Solution is related to Key Issue #3
An Application Function (AF) can provide to the 5G core network information to
assist in determining the 5GC slice required by a specific IMS service. The AF
sends a request to the NEF, providing an IMS service profile, which requests
to associate an IMS service (associated with an identifier e.g. with an App-
id-4) with a certain IMS service profile and with a certain IMS application
provider. This request may also include the external identity of a single UE
(e.g. the MSISDN), or the external identities of multiple UEs. If no UEs are
included, the request could affect all UEs associated (e.g. based on
subscription) with the identified application provider.
The IMS service profile identifies one of the service profiles pre-agreed
between the mobile operator and the IMS operator. How the IMS Service Profile
is constructed is out of scope of 3GPP. An example list of pre-agreed service
profiles is shown below
+-------------------------+---------------------------+ | IMS Service Profile #1 | Service Profile Id = 1010 | | | | | | Service Type = Voice | | | | | | Delay \
### 6.x.1 Description
Editor\'s note: This clause provides the overall description of the solution
(sub sections are encouraged). The first line of the description should
identify which key issue or key issues the solution addresses.
### 6.x.2 Impacts on existing nodes and functions
Editor\'s note: This clause describes impacts to existing entities and
interfaces.
### 6.x.3 Solution Evaluation
Editor\'s note: This clause provides an evaluation of the solution.
# 7 Overall Evaluation
## 7.1 Evaluation of solutions addressing key issue #5
**Solution 12:**
This solution has the merit to separate IMS services from non-IMS services.
Indeed, IMS service logic and repository may exist even without any mobile
core as it is independent from the type of access (4G, 5G, non-3GPP Core) and
eIMS5G study does not include the move of service logic from HSS.
Solution #12 states that the reuse of UDM services is not optimized: \"the
lack of optimization relates to the increased number of transactions that
would be required for IMS procedures using Rel-15 UDM services\". Hence, the
proposed services are designed to work solely over Cx interface (they are
denoted \"Ncx\"). This approach is point-to-point based. This is not in line
with service-based architecture, which is designed to provide services for
multiple NFs (UDM services are already used by multiple services such as AMF,
SMF, SMSF, GMLC, NEF).
Moreover, the higher number of transactions is inherent to service-based
architecture and is not an argument in favour of a point-to-point solution. A
very good example is the 5GC Registration specified in TS 23.502 [4] clause
4.2.2.2.2 steps 14a to 14c, in which AMF uses three UDM procedures:
\- the new AMF registers with the UDM using Nudm_UECM_Registration.
\- then the AMF retrieves the Access and Mobility Subscription data, SMF
Selection Subscription data and UE context in SMF data using Nudm_SDM_Get.
\- then the AMF subscribes to be notified using Nudm_SDM_Subscribe when the
data requested is modified.
**Solution 13:**
The reuse of UDM services as proposed in solution 13 looks natural when both
non-IMS and IMS data are handled by the UDM. However, as stated above, it is
needed to separate services for IMS from services for non-IMS. It is also
noted that an IMS profile is independent from the type of access (4G, 5G,
non-3GPP).
Furthermore, it is proposed in solution #13 to map RTR/RTA (registration
termination) to Subscriber Data Management services. However, in network
initiated de-registration by the HSS (RTR/RTA), the HSS changes the state of
the Public Identities to Not Registered and sends a notification to the S-CSCF
indicating the identities that shall be de-registered. It involves the Service
Logic and the Nudm_UECM_Get procedure should be used instead.
Similarly, it is also proposed to map UAR/UAA to Subscriber Data Management
services. From TS 29.228, it is stated that User Registration Status Query
procedure (UAR/UAA) is invoked by the I-CSCF during registration procedure to
authorize registration, to provide a first security check (IMPU/IMPI) and to
get the S-CSCF name (if already registered) or the capabilities the S-CSCF has
to support. It involves the Service Logic and the Nudm_UECM_Get procedure
should be used instead.
Moreover, the mapping between SAR/SAA and Cx operations is not detailed
enough. Indeed, in table 6.13.1-1, does not show which UDM services are used
for a particular use case (registration, deregistration, user data download).
For example, it does not explain that SAR/SAA for registration is replaced by
the three service operations Nudm_UECM_Registration, Nudm_SDM_Get and
Nudm_SDM_Subscribe exactly like it is specified for 5GC Registration specified
in TS 23.502 [4] clause 4.2.2.2.2 steps 14a to 14c.
Solution #13 does not either show which parameters are added to the UDM
services.
**Solution 22:**
In that solution, it is proposed to define IMS specific service operations,
based on both solution 13 (based on UDM services principles: SDM, UECM,
UEAuthentication) and solution 12 (separating IMS services from non-IMS
services), where service operations can be used by any NF i.e. interface
agnostic (reused between Sh and Cx) hence satisfying service-based approach.
It also corrects the mapping with regards to SDM vs UECM.
## 7.2 Evaluation of solutions addressing key issue #6
In this TR, there are three solutions addressing Key Issue 6 (Enabling SBA-
based Sh). The evaluation of these solutions is studied below.
\- Solution 10: Reuse of UDM services and operations for SBA-based Sh
interface.
\- Solution 16: Enabling SBI-based Sh Using New Service.
\- Solution X: IMS services for SBA-based Sh interface.
**Solution 16:**
This solution has the merit to separate IMS services from non-IMS services.
Indeed, IMS service logic and repository may exist even without any mobile
core as it is independent from the type of access (4G, 5G, non-3GPP Core) and
eIMS5G study does not include the move of service logic from HSS.
But the main drawback of solution 16 is that it proposes services specific to
an interface: one set of services for Sh, and a separate set of services for
Cx. This is a point-to-point approach, rather than a service-based approach in
which a set of services is assumed to be available for any NF over any
interface.
**Solution 10:**
This solution has the merit to reuse UDM services principles (SDM, UECM). But,
as stated above, where the IMS data may be handled by a separate HSS FE with
associated EPC/IMS UDR, it is needed to separate services for IMS from
services for non-IMS.
**Solution 23:**
In that solution, it is proposed to define IMS specific service operations,
based on both solution 10 (based on UDM services principles: SDM, UECM) and
solution 16 (separating IMS services from non-IMS services), where service
operations can be used by any NF i.e. interface agnostic (reused between Sh
and Cx) hence satisfying service-based approach.
# 8 Conclusions
## 8.1 Conclusions Related to Key Issue #4
With regard to discovery of network functions it is concluded:
\- SMF can utilize the services of the NRF to discover/select the P-CSCF \-
solution 18 is used as the basis for normative work.
\- Solution 24 is used as the basis for normative work to address
discovery/selection of PCF by IMSâ€‘CSCF.
\- HSS discovery/selection will be resolved during normative phase.
## 8.2 Conclusions for Key Issue #5 and Key Issue #6
For Key Issue #5 and Key Issue #6 the following is concluded:
\- The IMS service logic is performed by the IMS-HSS. Whether the IMS Service
Logic is deployed as a combined UDM/HSS is an implementation option.
\- New SBA services are defined for IMS services exposed by the IMS service
logic, with CSCF and IMS-AS as consumers.
\- For interactions with the CSCF Solution 22 is the basis for normative work,
Stage 3 will need to investigate if whether implicit subscription from
solution 12 or explicit subscription (solution 22) are required.
\- For interactions with the IMS-AS Solution 23 will be used as the basis for
normative work. Stage 3 will investigate the data split in solution 16 into
operational and subscription data, if deemed necessary.
\- These new SBA services will support transport of IMS AS transparent data
(as the Sh interface does in diameter-based solutions) - to avoid unnecessary
impacts to existing IMS ASs. Stage 3 will need to investigate if for
transparent data the IMS-AS can use existing services, or enhancements to
existing services to store this type of data in the UDR.
## 8.3 Conclusions Related to Key Issue #7
Regarding key issue of \"How can IMS utilize services provided by Npcf\" the
following is concluded:
\- IMS can utilize the services of the PCF as a AF using existing Npcf
services.
\- Solution #9 and #14 are adopted as the basis for enhancing Npcf to support
IMS specific functions.
\- A note will be added to TS 23.228 [2] clarify that the selection between Rx
and N5 will be based on configuration in the IMS.
## 8.4 Conclusions Related to Key Issues #1, #2, #3 and #8
The investigations related to key issues #1, #2, #3 and #8 were not finalized
and no solutions were agreed for those key issues,
#