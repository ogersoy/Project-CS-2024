# Foreword
This Technical Specification has been produced by the 3rd Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document establishes the minimum performance requirements for
A-GPS for FDD mode of UTRA for the User Equipment (UE).
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or non‑specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TS 25.101: \"User Equipment (UE) radio transmission and reception
(FDD)\".
[2] 3GPP TS 25.104: \"Base Station (BS) radio transmission and reception
(FDD)\".
[3] 3GPP TS 34.171: \"Terminal Conformance Specification, Assisted Global
Positioning System (A-GPS) (FDD)\".
[4] 3GPP TS 25.331: \"Radio Resource Control (RRC) protocol specification\".
[5] 3GPP TS 25.302: \"Services provided by the physical layer\".
[6] 3GPP TS 25.215: \"Physical layer; Measurements (FDD)\".
[7] ETSI TR 102 273-1-2: \"Electromagnetic compatibility and Radio spectrum
Matters (ERM); Improvement on Radiated Methods of Measurement (using test
site) and evaluation of the corresponding measurement uncertainties; Part 1:
Uncertainties in the measurement of mobile radio equipment characteristics;
Sub-part 2: Examples and annexes\".
[8] Navstar GPS Space Segment/Navigation User Interfaces, ICD-GPS 200, Rev. C.
[9] P. Axelrad, R.G. Brown, \"GPS Navigation Algorithms\", in Chapter 9 of
\"Global Positioning System: Theory and Applications\", Volume 1, B.W.
Parkinson, J.J. Spilker (Ed.), Am. Inst. of Aeronautics and Astronautics Inc.,
1996.
[10] S.K. Gupta, \"Test and Evaluation Procedures for the GPS User
Equipment\", ION-GPS Red Book, Volume 1, p. 119.
[11] 3GPP TS 34.109: "Special conformance testing functions"
# 3 Definitions, symbols, abbreviations and test tolerances
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
3GPP TS 25.101 [1], 3GPP TS 25.104 [2] and the following apply:
**Horizontal Dilution Of Precision (HDOP):** measure of position determination
accuracy that is a function of the geometrical layout of the satellites used
for the fix, relative to the receiver antenna
**Node B:** logical node responsible for radio transmission / reception in one
or more cells to/from the User Equipment. Terminates the Iub interface towards
the RNC
**L1:** L band GPS transmission frequency of 1575.42 MHz
## 3.2 Symbols
Void
## 3.3 Abbreviations
For the purposes of the present document, the following abbreviations apply:
A-GPS Assisted - Global Positioning System
AWGN Additive White Gaussian Noise
C/A Coarse/Acquisition
CPICH Common Pilot CHannel
DCH Dedicated CHannel
DPCH Dedicated Physical CHannel
DUT Device Under Test
ECEF Earth Centred, Earth Fixed
FACH Fast Access CHannel
FDD Frequency Division Duplex
GPS Global Positioning System
GSS GPS System Simulator
HDOP Horizontal Dilution Of Precision
LOS Line Of Sight
PICH Paging Indicator CHannel
RRC Radio Resource Control
RSCP Received Signal Code Power
SFN System Frame Number
SMLC Standalone Mobile Location Center
SRNC Serving Radio Network Controller
SS FDD System simulator
TDD Time Division Duplex
TLM TeLeMetry word. It contains an 8-bits preamble (10001011)
TOW Time Of Week
TTFF Time To First Fix
UE User Equipment
UTRA Universal Terrestrial Radio Access
UTRAN Universal Terrestrial Radio Access Network
WLS Weighted Least Square
## 3.4 Test tolerances
The requirements given in the present document make no allowance for
measurement uncertainty. The test specification 3GPP TS 34.171 [3] defines
test tolerances. These test tolerances are individually calculated for each
test. The test tolerances are then added to the limits in the present document
to create test limits. The measurement results are compared against the test
limits as defined by the shared risk principle.
Shared Risk is defined in ETR 273-1-2 [7], subclause 6.5.
# 4 General
## 4.1 Introduction
The present document defines the minimum performance requirements for both UE
based and UE assisted FDD A‑GPS terminals.
## 4.2 Measurement parameters
### 4.2.1 UE based A-GPS measurement parameters
In case of UE-based A-GPS, the measurement parameters are contained in the RRC
UE POSITIONING POSITION ESTIMATE INFO IE. The measurement parameter in case of
UE-based A-GPS is the horizontal position estimate reported by the UE and
expressed in latitude/longitude.
### 4.2.2 UE assisted A-GPS measurement parameters
In case of UE-assisted A-GPS, the measurement parameters are contained in the
RRC UE POSITIONING GPS MEASURED RESULTS IE. The measurement parameters in case
of UE-assisted A-GPS are the UE GPS Code Phase measurements, as specified in
3GPP TS 25.302 [5] and 3GPP TS 25.215 [6]. The UE GPS Code Phase measurements
are converted into a horizontal position estimate using the procedure detailed
in Annex F.
## 4.3 Response time
Max Response Time is defined as the time starting from the moment that the UE
has received the final RRC measurement control message containing reporting
criteria different from \"No Reporting\" sent before the UE sends the
measurement report containing the position estimate or the GPS measured
result, and ending when the UE starts sending the measurement report
containing the position estimate or the GPS measured result on the Uu
interface. The response times specified for all test cases are Time-to-First-
Fix (TTFF) unless otherwise stated, i.e. the UE shall not re‑use any
information on GPS time, location or other aiding data that was previously
acquired or calculated and stored internally in the UE. A dedicated test
message \'RESET UE POSITIONING STORED INFORMATION\' has been defined in TS
34.109 [11] clause 5.4 for the purpose of deleting this information and is
detailed in subclause B.1.10.
## 4.4 Time assistance
Time assistance is the provision of GPS time to the UE from the network via
RRC messages. Currently two different GPS time assistance methods can be
provided by the network.
a) Coarse time assistance is always provided by the network and provides
current GPS time to the UE. The time provided is within ±2 seconds of GPS
system time. This allows the GPS time to be known within one GPS navigation
data sub-frame. It is signalled to the UE by means of the GPS Week and GPS TOW
msec fields in the Reference Time assistance data IE.
b) Fine time assistance is optionally provided by the network and adds the
provision to the UE of the relationship between the GPS system time and the
current UTRAN time. The accuracy of this relationship is ±10 μs of the actual
relationship. This addresses the case when the network can provide an improved
GPS time accuracy. It is signalled to the UE by means of the SFN and UTRAN GPS
timing of cell frames fields in the Reference Time assistance data IE.
The time of applicability of time assistance is the beginning of the System
Frame of the message containing the GPS Reference time.
### 4.4.1 Use of fine time assistance
The use of fine time assistance to improve the GPS performance of the UE is
optional for the UE, even when fine time assistance is signalled by the
network. Thus, there are a set minimum performance requirements defined for
all UEs and additional minimum performance requirements that are valid for
fine time assistance capable UEs only. These requirements are specified in
subclause 5.1.2.
## 4.5 RRC states
The minimum A-GPS performance requirements are specified in clause 5 for
different RRC states that include Cell_DCH and Cell_FACH. Cell_PCH and URA_PCH
states are for further study. The test and verification procedures are
separately defined in annex B.
## 4.6 2D position error
The 2D position error is defined by the horizontal difference in meters
between the ellipsoid point reported or calculated from the UE Measurement
Report and the actual position of the UE in the test case considered.
# 5 A-GPS minimum performance requirements
The A-GPS minimum performance requirements are defined by assuming that all
relevant and valid assistance data is received by the UE in order to perform
GPS measurements and/or position calculation. This clause does not include nor
consider delays occurring in the various signalling interfaces of the network.
In the following subclauses the minimum performance requirements are based on
availability of the assistance data information and messages defined in
annexes D and E.
The requirements in CELL_PCH and URA_PCH states are for further study.
## 5.1 Sensitivity
A sensitivity requirement is essential for verifying the performance of A-GPS
receiver in weak satellite signal conditions. In order to test the most
stringent signal levels for the satellites the sensitivity test case is
performed in AWGN channel. This test case verifies the _performance of the
first position estimate, when the UE is provided with only coarse time
assistance and when it is additionally supplied with fine time assistance._
### 5.1.1 Coarse time assistance
In this test case 8 satellites are generated for the terminal. AWGN channel
model is used.
Table 1: Test parameters
* * *
Parameters Unit Value Number of generated satellites - 8 HDOP Range - 1.1 to
1.6 Propagation conditions - AWGN GPS Coarse time assistance error range
seconds ±2 GPS Signal for one satellites dBm -142 GPS Signal for remaining
satellites dBm -147
* * *
#### 5.1.1.1 Minimum Requirements (Coarse time assistance)
The position estimates shall meet the accuracy and response time specified in
table 2.
Table 2: Minimum requirements (coarse time assistance)
* * *
Success rate 2-D position error Max response time 95 % 100 m 20 s
* * *
### 5.1.2 Fine time assistance
This requirement is only valid for fine time assistance capable UEs. In this
requirement 8 satellites are generated for the terminal. AWGN channel model is
used.
Table 3: Test parameters for fine time assistance capable terminals
* * *
Parameters Unit Value Number of generated satellites - 8 HDOP Range - 1.1 to
1.6 Propagation conditions - AWGN GPS Coarse time assistance error range
seconds ±2 GPS Fine time assistance error range μs ±10 GPS Signal for all
satellites dBm -147
* * *
#### 5.1.2.1 Minimum Requirements (Fine time assistance)
The position estimates shall meet the accuracy and response time requirements
in table 4.
Table 4: Minimum requirements for fine time assistance capable terminals
* * *
Success rate 2-D position error Max response time 95 % 100 m 20 s
* * *
## 5.2 Nominal Accuracy
Nominal accuracy requirement verifies the accuracy of A-GPS position estimate
in ideal conditions. The primarily aim of the test is to ensure good accuracy
for a position estimate when satellite signal conditions allow it. This test
case verifies the performance of the first _position estimate_.
In this requirement 8 satellites are generated for the terminal. AWGN channel
model is used.
Table 5: Test parameters
* * *
Parameters Unit Value Number of generated satellites - 8 HDOP Range - 1.1 to
1.6 Propagation conditions - AWGN GPS Coarse time assistance error range
seconds ±2 GPS Signal for all satellites dBm -130
* * *
### 5.2.1 Minimum requirements (nominal accuracy)
The position estimates shall meet the accuracy and response time requirements
in table 6.
Table 6: Minimum requirements
* * *
Success rate 2-D position error Max response time 95 % 30 m 20 s
* * *
## 5.3 Dynamic Range
The aim of a dynamic range requirement is to ensure that a GPS receiver
performs well when visible satellites have rather different signal levels.
Strong satellites are likely to degrade the acquisition of weaker satellites
due to their cross‑correlation products. Hence, it is important in this test
case to keep use AWGN in order to avoid loosening the requirements due to
additional margin because of fading channels. This test case verifies the
_performance of the first position estimate._
In this requirement 6 satellites are generated for the terminal. AWGN channel
model is used.
Table 7: Test parameters
* * *
Parameters Unit Value Number of generated satellites - 6 HDOP Range - 1.4 to
2.1 GPS Coarse time assistance error range seconds ±2 Propagation conditions -
AWGN GPS Signal for 1st satellite dBm -129 GPS Signal for 2nd satellite dBm
-135 GPS Signal for 3rd satellite dBm -141 GPS Signal for 4th satellite dBm
-147 GPS Signal for 5th satellite dBm -147 GPS Signal for 6th satellite dBm
-147
* * *
### 5.3.1 Minimum requirements (dynamic range)
The position estimates shall meet the accuracy and response time requirements
in table 8.
Table 8: Minimum requirements
* * *
Success rate 2-D position error Max response time 95 % 100 m 20 s
* * *
## 5.4 Multi-Path scenario
_The purpose of the test case is to_ verify the receiver\'s tolerance to
multipath while keeping the test setup simple. This test case verifies the
_performance of the first position estimate._
In this requirement 5 satellites are generated for the terminal. Two of the
satellites have one tap channel representing Line-Of-Sight (LOS) signal. The
three other satellites have two-tap channel, where the first tap represents
LOS signal and the second reflected and attenuated signal as specified in Case
G1 in subclause C.2.2.
Table 9: Test parameters
+----------------------------+---------+----------------------------+ | Parameters | Unit | Value | +----------------------------+---------+----------------------------+ | Number of generated | - | 5 | | satellites (Satellites 1, | | | | 2 unaffected by | | | | multi-path) | | | | | | | | (Satellites 3, 4, 5 | | | | affected by multi-path) | | | +----------------------------+---------+----------------------------+ | GPS Coarse time assistance | seconds | ±2 | | error range | | | +----------------------------+---------+----------------------------+ | HDOP Range | - | 1.8 to 2.5 | +----------------------------+---------+----------------------------+ | Satellite 1, 2 signal | dBm | -130 | +----------------------------+---------+----------------------------+ | Satellite 3, 4, 5 signal | dBm | LOS signal of -130 dBm, | | | | multi-path signal of -136 | | | | dBm | +----------------------------+---------+----------------------------+
### 5.4.1 Minimum Requirements (multi-path scenario)
The position estimates shall meet the accuracy and response time requirements
in table 10.
Table 10: Minimum requirements
* * *
Success rate 2-D position error Max response time 95 % 100 m 20 s
* * *
## 5.5 Moving scenario and periodic update
_The purpose of the test case is to verify_ the receiver\'s capability to
produce GPS measurements or location fixes on a regular basis, and to follow
when it is located in a vehicle that slows down, turns or accelerates. A good
tracking performance is essential for a certain location services. A moving
scenario with periodic update is well suited for verifying the tracking
capabilities of an A-GPS receiver in changing UE speed and direction. In the
requirement the UE moves on a rectangular trajectory, which imitates urban
streets. AWGN channel model is used. This test is not performed as a Time to
First Fix (TTFF) test.
In this requirement 5 satellites are generated for the terminal. The UE is
requested to use periodical reporting with a reporting interval of 2 seconds.
The UE moves on a rectangular trajectory of 940 m by 1 440 m with rounded
corner defined in figure 1. The initial reference is first defined followed by
acceleration to final speed of 100 km/h in 250 m. The UE then maintains the
speed for 400 m. This is followed by deceleration to final speed of 25 km/h in
250 m. The UE then turn 90 degrees with turning radius of 20 m at 25 km/h.
This is followed by acceleration to final speed of 100 km/h in 250 m. The
sequence is repeated to complete the rectangle.
Table 11: Trajectory Parameters
* * *
Parameter Distance (m) Speed (km/h) l11, l15, l21, l25 20 25 l12, l14, l22,
l24 250 25 to 100 and 100 to 25 l13 400 100 l23 900 100
* * *
{width="4.266666666666667in" height="2.564583333333333in"}
Figure 1: Rectangular trajectory of the moving scenario and periodic update
test case
Table 12: Test Parameters
* * *
Parameters Unit Value Number of generated satellites - 5 HDOP Range - 1.8 to
2.5 Propagation condition - AWGN GPS signal for all satellites dBm -130
* * *
### 5.5.1 Minimum Requirements (moving scenario and periodic update)
The position estimates shall meet the accuracy requirement of table 13 with
the periodical reporting interval defined in table 13 after the first reported
position estimates.
NOTE: In the actual testing the UE may report error messages until it has been
able to acquire GPS measured results or a position estimate. The test
equipment shall only consider the first measurement report different from an
error message as the first position estimate in the requirement in table 13.
Table 13: Minimum requirements
* * *
Success Rate 2-D position error Periodical reporting interval 95 % 100 m 2 s
* * *
###### ## Annex A (normative): Test cases
# A.1 Conformance tests
The conformance tests are specified in 3GPP TS 34.171 [3]. Statistical
interpretation of the requirements is described in clause A.2.
# A.2 Requirement classification for statistical testing
Requirements in the present document are either expressed as absolute
requirements with a single value stating the requirement, or expressed as a
success rate. There are no provisions for the statistical variations that will
occur when the parameter is tested.
Annex B lists the test parameters needed for the tests. The test will result
in an outcome of a test variable value for the DUT inside or outside the test
limit. Overall, the probability of a \"good\" DUT being inside the test
limit(s) and the probability of a \"bad\" DUT being outside the test limit(s)
should be as high as possible. For this reason, when selecting the test
variable and the test limit(s), the statistical nature of the test is
accounted for.
When testing a parameter with a statistical nature, a confidence level has to
be set. The confidence level establishes the probability that a DUT passing
the test actually meets the requirement and determines how many times a test
has to be repeated. The confidence levels are defined for the final tests in
3GPP TS 34.171 [3].
###### ## Annex B (normative): Test conditions
# B.1 General
This annex specifies the additional parameters that are needed for the test
cases specified in clause 5 and applies to all tests unless otherwise stated.
## B.1.1 Parameter values
Additionally, amongst all the listed parameters (see annex E), the following
values for some important parameters are to be used in the measurement control
message.
Table B.1: Parameter values
* * *
Information element Value - TTFF tests (except nominal accuracy test) Value -
TTFF tests (nominal accuracy test) Value - Periodic tests Measurement
Reporting Mode Periodical reporting Periodical reporting Periodical reporting
Amount of reporting 1 1 Infinite (see note) Reporting interval 20 000 ms 20
000 ms 2 000 ms Horizontal accuracy 50 m 15 m 50 m Vertical accuracy 100 m 100
m 100 m NOTE: Infinite means during the complete test time.
* * *
In the Sensitivity test case with Fine Time Assistance, the following
parameter values are used.
Table B.2: Parameters for Fine Time Assistance test
* * *
Information element Value TUTRAN-GPS drift rate 0 SFN-TOW Uncertainty
lessThan10
* * *
## B.1.2 Time assistance
For every Test Instance in each TTFF test case, the IE GPS TOW msec shall have
a random offset, relative to GPS system time, within the error range of Coarse
Time Assistance defined in the test case. This offset value shall have a
uniform random distribution.
In addition, for every Fine Time Assistance Test Instance the IE UTRAN GPS
timing of cell frames shall have a random offset, relative to the true value
of the relationship between the two time references, within the error range of
Fine Time Assistance defined in the test case. This offset value shall have a
uniform random distribution.
For the Moving Scenario and Periodic Update Test Case the IE GPS TOW msec
shall be set to the nominal value.
## B.1.3 GPS Reference Time
For every Test Instance in each TTFF test case, the GPS reference time shall
be advanced so that, at the time the fix is made, it is at least 2 minutes
later than the previous fix.
## B.1.4 Reference and UE locations
There is no limitation on the selection of the reference location, consistent
with achieving the required HDOP for the Test Case. For each test instance the
reference location shall change sufficiently such that the UE shall have to
use the new assistance data. The uncertainty of the semi-major axis is 3 km.
The uncertainty of the semi-minor axis is 3 km. The orientation of major axis
is 0 degrees. The uncertainty of the altitude information is 500 m. The
confidence factor is 68 %.
For every Test Instance in each TTFF test case, the UE location shall be
randomly selected to be within 3 km of the Reference Location. The Altitude of
the UE shall be randomly selected between 0 m to 500 m above WGS‑84 reference
ellipsoid. These values shall have uniform random distributions.
## B.1.5 Satellite constellation and assistance data
The satellite constellation shall consist of 24 satellites. Almanac assistance
data shall be available for all these 24 satellites. At least 9 of the
satellites shall be visible to the UE (that is above 5 degrees elevation with
respect to the UE). Other assistance data shall be available for 9 of these
visible satellites. In each test, signals are generated for only a sub-set of
these satellites for which other assistance data is available. The number of
satellites in this sub-set is specified in the test. The satellites in this
sub-set shall all be above 15 degrees elevation with respect to the UE. The
HDOP for the test shall be calculated using this sub-set of satellites. The
selection of satellites for this sub-set shall be random and consistent with
achieving the required HDOP for the test.
## B.1.6 Atmospheric delays
Typical Ionospheric and Tropospheric delays shall be simulated and the
corresponding values inserted into the Ionospheric Model IEs.
## B.1.7 UTRA Frequency and frequency error
In all test cases the UTRA frequency used shall be the mid range for the UTRA
operating band. The UTRA frequency with respect to the GPS carrier frequency
shall be offset by +0.025 PPM.
## B.1.8 Information elements
The information elements that are available to the UE in all the test cases
are listed in annex E.
## B.1.9 GPS signals
The GPS signal is defined at the A-GPS antenna connector of the UE. For UE
with integral antenna only, a reference antenna with a gain of 0 dBi is
assumed.
## B.1.10 RESET UE POSITIONING STORED INFORMATION Message
In order to ensure each Test Instance in each TTFF test is performed under
Time to First Fix (TTFF) conditions, a dedicated test signal (_RESET UE
POSITIONING STORED INFORMATION_) defined in TS 34.109 [11] clause 5.4 shall be
used.
When the UE receives the \'_RESET UE POSITIONING STORED INFORMATION_ \'
signal, with the IE _UE POSITIONING TECHNOLOGY_ set to _AGPS_ it shall:
\- discard any internally stored GPS reference time, reference location, and
any other aiding data obtained or derived during the previous test instance
(e.g. expected ranges and Doppler);
\- accept or request a new set of reference time or reference location or
other required information, as in a TTFF condition;
\- calculate the position or perform GPS measurements using the \'new\'
reference time or reference location or other information.
###### ## Annex C (normative): Propagation conditions
# C.1 General
Void
# C.2 Propagation Conditions
## C.2.1 Static propagation conditions
The propagation for the static performance measurement is an Additive White
Gaussian Noise (AWGN) environment. No fading and multi-paths exist for this
propagation model.
## C.2.2 Multi-path Case G1
Doppler frequency difference between direct and reflected signal paths is
applied to the carrier and code frequencies. The Carrier and Code Doppler
frequencies of LOS and multi-path for GPS L1 signal are defined in table C.1.
Table C.1: Case G1
* * *
Initial relative Delay\ Carrier Doppler frequency of tap [Hz] Code Doppler
frequency of tap [Hz] Relative mean Power [dB] [GPS chip]
0 Fd Fd / N 0
0.5 Fd - 0.1 (Fd-0.1) /N -6
NOTE: Discrete Doppler frequency is used for each tap.
* * *
N = fGPSL1/fchip, where fGPSL1 is the nominal carrier frequency of the GPS L1
signal (1575.42 MHz) and fchip is the GPS L1 C/A code chip rate(1.023
Mchips/s).
The initial carrier phase difference between taps shall be randomly selected
between [0, 2 π]. The initial value shall have uniform random distribution.
###### ## Annex D (normative): Measurement sequence chart
# D.1 General
The measurement Sequence Charts that are required in all the proposed test
cases, are defined in this clause.
# D.2 UE Based A-GPS Measurement Sequence Chart
## D.2.1 UE Based GPS Message Sequence Normal
Figure D.1: UE-Based GPS Message Sequence Normal
## D.2.2 UE Based GPS Message Sequence Normal for moving scenario and periodic
update test case
Figure D.2: UE-Based GPS Message Sequence Normal for moving scenario test case
NOTE: In the actual testing the UE may report error messages until it has been
able to acquire a position estimate.
## D.2.3 UE Based GPS Message Sequence Failure
Figure D.3: UE-Based GPS Message Sequence Failure
# D.3 UE Assisted A-GPS Measurement Sequence Chart
## D.3.1 UE Assisted A-GPS Measurement Sequence Chart Normal
The assistance data requested by the UE and provided by the SRNC in this
sequence of messages shall be selected from among those information elements
described as available in clause E.3.
Figure D.4: UE-Assisted GPS Message Sequence
## D.3.2 UE assisted A-GPS Measurement Sequence for moving scenario and
periodic update test case
The assistance data requested by the UE and provided by the SRNC in this
sequence of messages shall be selected from among those information elements
described as available in clause E.3.
Figure D.5: UE assisted GPS Message Sequence for moving scenario and periodic
update
NOTE: In the actual testing the UE may report error messages until it has been
able to acquire GPS measured results.
###### ## Annex E (normative): Assistance data required for testing
# E.1 Introduction
This annex defines the assistance data IEs available in all test cases. The
assistance data shall be given for satellites as defined in B.1.5.
The information elements are given with reference to 3GPP TS 25.331 [4], where
the details are defined.
Clause E.2 lists the assistance data IEs required for testing of UE-based
mode, and clause E.3 lists the assistance data available for testing of UE-
assisted mode.
# E.2 Information elements required for UE-based
The following GPS assistance data IEs shall be present for each test:
**a) UE positioning GPS reference time IE.** This information element is
defined in subclause 10.3.7.96 of 3GPP TS 25.331 [4].
Table E.1: UE positioning GPS reference time IE
* * *
Name of the IE Fields of the IE UE Based Coarse time UE Based Fine Time
UE positioning GPS reference time\  
subclause 10.3.7.96 of 3GPP TS 25.331 [4]
                                                GPS Week                            Yes                    Yes
                                                GPS TOW msec                        Yes                    Yes
                                                UTRAN GPS reference time                                   Yes
                                                \>UTRAN GPS timing of cell frames                          Yes
                                                \>CHOICE mode                                              Yes
                                                \>\>FDD                                                    Yes
                                                \>\>\>Primary CPICH Info                                   Yes
                                                \>\>TDD
                                                \>\>\>cell parameters id
                                                \>SFN                                                      Yes
                                                SFN-TOW Uncertainty                                        Yes
                                                TUTRAN-GPS drift rate                                      Yes
                                                GPS TOW Assist                      Yes                    Yes
                                                SatID                               Yes                    Yes
                                                TLM Message                         Yes                    Yes
                                                TLM Reserved                        Yes                    Yes
                                                Alert                               Yes                    Yes
                                                Anti-Spoof                          Yes                    Yes
* * *
**b) UE positioning GPS reference UE position IE.** This information element
is defined in subclause 10.3.8.4c of 3GPP TS 25.331 [4].
Table E.2: UE positioning GPS reference UE position IE
* * *
Name of the IE Fields of the IE UE Based Coarse time UE Based Fine Time
Reference Location\ Ellipsoid point with Altitude and uncertainty ellipsoid
Yes Yes subclause 10.3.8.4c of 3GPP TS 25.331 [4]
* * *
**c) UE positioning GPS navigation model IE**. This information element is
defined in subclause 10.3.7.94 of 3GPP TS 25.331 [4]. The Navigation model
will be chosen for the reference time and reference position.
Table E.3: UE positioning GPS navigation model IE
* * *
Name of the IE Fields of the IE UE Based Coarse time UE Based Fine Time
Navigation Model\ Yes Yes subclause 10.3.7.94 of 3GPP TS 25.331 [4]
* * *
**d) UE positioning GPS ionospheric model IE.** This information element is
defined in subclause 10.3.7.92 of 3GPP TS 25.331 [4].
Table E.4: UE positioning GPS ionospheric model IE
* * *
Name of the IE Fields of the IE UE Based Coarse time UE Based Fine Time
Ionospheric Model\ Yes Yes subclause 10.3.7.92 of 3GPP TS 25.331 [4]
* * *
# E.3 Information elements available for UE-assisted
The following GPS assistance data IEs shall be available for each test:
**a) UE positioning GPS reference time IE.** This information element is
defined in subclause 10.3.7.96 of 3GPP TS 25.331 [4].
Table E.5: UE positioning GPS reference time IE
* * *
Name of the IE Fields of the IE UE Assisted Coarse time UE Assisted Fine Time
UE positioning GPS reference time\  
subclause 10.3.7.96 of 3GPP TS 25.331 [4]
                                                GPS Week                            Yes                       Yes
                                                GPS TOW msec                        Yes                       Yes
                                                UTRAN GPS reference time                                      Yes
                                                \>UTRAN GPS timing of cell frames                             Yes
                                                \>CHOICE mode                                                 Yes
                                                \>\>FDD                                                       Yes
                                                \>\>\>Primary CPICH Info                                      Yes
                                                \>\>TDD
                                                \>\>\>cell parameters id
                                                \>SFN                                                         Yes
                                                SFN-TOW Uncertainty                                           Yes
                                                TUTRAN-GPS drift rate                                         Yes
                                                GPS TOW Assist                      Yes                       Yes
                                                SatID                               Yes                       Yes
                                                TLM Message                         Yes                       Yes
                                                TLM Reserved                        Yes                       Yes
                                                Alert                               Yes                       Yes
                                                Anti-Spoof                          Yes                       Yes
* * *
**b) UE positioning GPS reference UE position IE.** This information element
is defined in subclause 10.3.8.4c of 3GPP TS 25.331 [4].
Table E.6: UE positioning GPS reference UE position IE
* * *
Name of the IE Fields of the IE UE Assisted Coarse Time UE Assisted Fine Time
Reference Location\ Ellipsoid point with Altitude and uncertainty ellipsoid
Yes Yes subclause 10.3.8.4c of 3GPP TS 25.331 [4]
* * *
**c) UE positioning GPS almanac** This information element is defined in
subclause 10.3.7.89 of 3GPP TS 25.331 [4]. The Almanac shall be chosen for the
reference time.
Table E.7: UE positioning GPS almanac IE
* * *
Name of the IE Fields of the IE UE Assisted Coarse Time UE Assisted Fine Time
UE positioning GPS almanac\  
subclause 10.3.7.89 of 3GPP TS 25.331 [4]
Almanac Reference Week Yes Yes
Satellite information Yes Yes
* * *
**d) UE positioning GPS navigation model IE.** This information element is
defined in subclause 10.3.7.94 of 3GPP TS 25.331 [4]. The Navigation model
will be chosen for the reference time and reference position.
Table E.8: UE positioning GPS navigation model IE
* * *
Name of the IE Fields of the IE UE Assisted Coarse Time UE Assisted Fine Time
Navigation Model\ Yes Yes subclause 10.3.7.94 of 3GPP TS 25.331 [4]
* * *
**e) UE positioning GPS acquisition assistance IE.** This information element
is defined in subclause 10.3.7.88 of 3GPP TS 25.331 [4].
Table E.9: UE positioning GPS acquisition assistance IE
* * *
Name of the IE Fields of the IE UE Assisted Coarse time UE Assisted Fine Time
Acquisition Assistance\  
subclause 10.3.7.88 of 3GPP TS 25.331 [4]
\- GPS TOW msec Yes Yes
\- UTRAN GPS reference time Yes
\- >UTRAN GPS timing of cell frames Yes
\- >CHOICE _mode_ Yes
\- >>FDD Yes
\- >>>Primary CPICH Info Yes
\- >SFN Yes
\- Satellite information Yes Yes
\- >SatID Yes Yes
                                                \>Doppler (0th order term)          Yes                       Yes
                                                \>Extra Doppler                     Yes                       Yes
                                                 \>\>Doppler (1st order term)       Yes                       Yes
                                                \>\>Doppler Uncertainty             Yes                       Yes
                                                \>Code Phase                        Yes                       Yes
                                                \>Integer Code Phase                Yes                       Yes
                                                \>GPS Bit number                    Yes                       Yes
                                                \>Code Phase Search Window          Yes                       Yes
                                                \>Azimuth and Elevation             Yes                       Yes
                                                \>\> Azimuth                        Yes                       Yes
                                                \>\>  Elevation                     Yes                       Yes
* * *
###### ## Annex F (normative): Converting UE-assisted measurement reports into
position estimates
# F.1 Introduction
To convert the UE measurement reports in case of UE-assisted mode of A-GPS
into position errors, a transformation between the \"measurement domain\"
(code-phases, etc.) into the \"state\" domain (position estimate) is
necessary. Such a transformation procedure is outlined in the following
clauses. The details can be found in [8], [9] and [10].
# F.2 UE measurement reports
In case of UE-assisted A-GPS, the measurement parameters are contained in the
RRC UE POSITIONING GPS MEASURED RESULTS IE (subclause 10.3.7.93 in 3GPP TS
25.331 [4]). The measurement parameters required for calculating the UE
position are:
1) Reference Time: The UE has two choices for the Reference Time:
a) \"UE GPS timing of cell frames\";
b) \"GPS TOW msec\".
2) Measurement Parameters: 1 to \:
a) \"Satellite ID (SV PRN)\";
b) \"Whole GPS chips\";
c) \"Fractional GPS Chips\";
d) \"Pseudorange RMS Error\".
Additional information required at the system simulator:
1) \"UE positioning GPS reference UE position\" (subclause 10.3.8.4c in 3GPP
TS 25.331 [4]):\ Used for initial approximate receiver coordinates.
2) \"UE positioning GPS navigation model\" (subclause 10.3.7.94 in 3GPP TS
25.331 [4]):\ Contains the GPS ephemeris and clock correction parameters as
specified in [8]; used for calculating the satellite positions and clock
corrections.
3) \"UE positioning GPS ionospheric model\" (subclause 10.3.7.92 in 3GPP TS
25.331 [4]):\ Contains the ionospheric parameters which allow the single
frequency user to utilize the ionospheric model as specified in [8] for
computation of the ionospheric delay.
# F.3 WLS position solution
The WLS position solution problem is concerned with the task of solving for
four unknowns; _xu, yu, zu_ the receiver coordinates in a suitable frame of
reference (usually ECEF) and _bu_ the receiver clock bias. It typically
requires the following steps:
**Step 1: Formation of pseudo-ranges**
The observation of code phase reported by the UE for each satellite SVi is
related to the pseudo-range/c modulo 1 ms (the length of the C/A code period).
For the formation of pseudo-ranges, the integer number of milliseconds to be
added to each code-phase measurement has to be determined first. Since 1 ms
corresponds to a travelled distance of 300 km, the number of integer ms can be
found with the help of reference location and satellite ephemeris. The
distance between the reference location and each satellite SVi is calculated
and the integer number of milli-seconds to be added to the UE code phase
measurements is obtained.
**Step 2: Formation of weighting matrix**
The UE reported \"Pseudorange RMS Error\" values are used to calculate the
weighting matrix for the WLS algorithm [9]. According to 3GPP TS 25.331 [4],
the encoding for this field is a 6 bit value that consists of a 3 bit
mantissa, Xi and a 3 bit exponent, Yi for each SVi:
$w_{i} = \text{RMSError} = 0\text{.}5 \times \left( 1 + \frac{X_{i}}{8}
\right) \times 2^{Y_{i}}$
The weighting Matrix **W** is defined as a diagonal matrix containing the
estimated variances calculated from the \"Pseudorange RMS Error\" values:
$W = \text{diag}\left{
\frac{1}{w_{1}^{2}},\frac{1}{w_{2}^{2}},\cdots,\frac{1}{w_{n}^{2}} \right}$
**Step 3: WLS position solution**
The WLS position solution is described in reference [9] and usually requires
the following steps:
1) Computation of satellite locations at time of transmission using the
ephemeris parameters and user algorithms defined in [8] section 20.3.3.4.3.
2) Computation of clock correction parameters using the parameters and
algorithms as defined in [8] section 20.3.3.3.3.1.
3) Computation of atmospheric delay corrections using the parameters and
algorithms defined in [8] section 20.3.3.5.2.5 for the ionospheric delay, and
using the Gupta model in reference [10] p. 121 equation (2) for the
tropospheric delay.
4) The WLS position solution starts with an initial estimate of the user state
(position and clock offset). The Reference Location is used as initial
position estimate. The following steps are required:
a) Calculate geometric range (corrected for Earth rotation) between initial
location estimate and each satellite included in the UE measurement report.
b) Predict pseudo-ranges for each measurement including clock and atmospheric
biases as calculated in 1) to 3) above and defined in [8,9].
c) Calculate difference between predicted and measured pseudo-ranges
$\text{Δρ}$
d) Calculate the \"Geometry Matrix\" **G** as defined in [9]:
$G \equiv \left\lbrack \begin{matrix} \- {\hat{1}}_{1}^{T} \ \-
{\hat{1}}_{2}^{T} \ \vdots \ \- {\hat{1}}_{n}^{T} \ \end{matrix}\text{\ \ \ \
}\begin{matrix} 1 \ 1 \ \vdots \ 1 \ \end{matrix} \right\rbrack$ with
${\hat{1}}_{i} \equiv \frac{r_{\text{si}} - {\hat{r}}_{u}}{\left|
r_{\text{si}} - {\hat{r}}_{u} \right|}$ where**r** si is the Satellite
position vector for SVi (calculated in 1) above), and ${\hat{r}}_{u}$is the
estimate of the user location.
e) Calculate the WLS solution according to [9]:
$\Delta\hat{x} = \left( G^{T}\text{WG} \right)^{- 1}G^{T}\text{WΔρ}$
f) Adding the $\Delta\hat{x}$to the initial state estimate gives an improved
estimate of the state vector:
$\hat{x} \rightarrow \hat{x} + \Delta\hat{x}$.
5) This new state vector $\hat{x}$can be used as new initial estimate and the
procedure is repeated until the change in $\hat{x}$is sufficiently small.
**Step 4: Transformation from Cartesian coordinate system to Geodetic
coordinate system**
The state vector $\hat{x}$ calculated in Step 3 contains the UE position in
ECEF Cartesian coordinates together with the UE receiver clock bias. Only the
user position is of further interest. It is usually desirable to convert from
ECEF coordinates _xu, yu, zu_ to geodetic latitude ϕ , longitude λ and
altitude _h_ on the WGS84 reference ellipsoid.
**Step 5: Calculation of \"2-D Position Errors\"**
The latitude ϕ / longitude λ obtained after Step 4 is used to calculate the
2-D position error.
#