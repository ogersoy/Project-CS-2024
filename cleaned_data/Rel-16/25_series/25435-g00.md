# Foreword
This Technical Specification (TS) has been produced by the 3^rd^ Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document provides a description of the UTRAN RNC-Node B (Iub)
interface user plane protocols for Common Transport Channel data streams as
agreed within the TSG-RAN working group 3.
NOTE: By Common Transport Channel one must understand RACH, FACH/PCH, DSCH,
USCH [FDD -- and 1.28Mcps TDD -, E-DCH for CELL_FACH and Idle] and HS-DSCH.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
• References are either specific (identified by date of publication, edition
number, version number, etc.) or non‑specific.
• For a specific reference, subsequent revisions do not apply.
• For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] Void
[2] 3GPP TS 25.402: \"Synchronisation in UTRAN, Stage 2\".
[3] 3GPP TS 25.302: \"Services provided by the Physical Layer\".
[4] 3GPP TS 25.221: \"Physical channels and mapping of transport channels to
physical channels (TDD)\".
[5] 3GPP TS 25.211: \"Physical channels and mapping of transport channels onto
physical channels (FDD)\".
[6] 3GPP TS 25.433: \"UTRAN Iub interface Node B Application Part (NBAP)
signalling\".
[7] Void
[8] 3GPP TS 25.331: \"Radio Ressource Control (RRC) protocol specification\".
[9] 3GPP TS 25.321: \"Medium Access Control (MAC) protocol specification\".
[10] 3GPP TS 25.214: \" Physical layer procedures (FDD)\".
[11] 3GPP TS 25.401: \"UTRAN overall description\".
[12] 3GPP TS 25.306: \"UE Radio Access capabilities\".
[13] 3GPP TS 25.427: \"UTRAN Iub/Iur interface user plane protocol for DCH
data streams\".
[14] 3GPP TS 25.224: \"Physical layer procedures (TDD)\".
# 3 Definitions and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions in TS
25.401 [11] and the following apply:
**Transport Connection:** service provided by the transport layer and used by
Frame Protocol for the delivery of FP PDU
## 3.2 Abbreviations
For the purposes of the present document, the following abbreviations apply:
CFN Connection Frame Number
CRC Cyclic Redundancy Checksum
CRCI CRC Indicator
DCH Dedicated Transport Channel
DL Downlink
DRT Delay Reference Time
DSCH Downlink Shared Channel
E-DCH Enhanced Dedicated Transport Channel
FP Frame Protocol
FSN Frame Sequence Number
FT Frame Type
HSDPA High Speed Downlink Packet Access
HS-DSCH High Speed Downlink Shared Channel
MFN Multicast Frame Number
PC Power Control
PDSCH Physical Downlink Shared Channel
PUSCH Physical Uplink Shared Channel
QE Quality Estimate
TB Transport Block
TBS Transport Block Set
TFI Transport Format Indicator
TNL Transport Network Layer
ToA Time of Arrival
ToAWE Time of Arrival Window Endpoint
ToAWS Time of Arrival Window Startpoint
TTI Transmission Time Interval
UL Uplink
USCH Uplink Shared Channel
## 3.3 Specification Notations
For the purposes of the present document, the following notations apply:
> [FDD] This tagging of a word indicates that the word preceding the tag
> \"[FDD]\" applies only to FDD. This tagging of a heading indicates that the
> heading preceding the tag \"[FDD]\" and the section following the heading
> applies only to FDD.
>
> [TDD] This tagging of a word indicates that the word preceding the tag
> \"[TDD]\" applies only to TDD, including 7.68Mcps TDD, 3.84Mcps TDD and
> 1.28Mcps TDD. This tagging of a heading indicates that the heading preceding
> the tag \"[TDD]\" and the section following the heading applies only to TDD,
> including 7.68Mcps TDD, 3.84Mcps TDD and 1.28Mcps TDD.
>
> [7.68Mcps TDD] This tagging of a word indicates that the word preceding the
> tag \"[7.68Mcps TDD]\" applies only to 7.68Mcps TDD. This tagging of a
> heading indicates that the heading preceding the tag \"[7.68Mcps TDD]\" and
> the section following the heading applies only to 7.68Mcps TDD.
>
> [3.84Mcps TDD] This tagging of a word indicates that the word preceding the
> tag \"[3.84Mcps TDD]\" applies only to 3.84Mcps TDD. This tagging of a
> heading indicates that the heading preceding the tag \"[3.84Mcps TDD]\" and
> the section following the heading applies only to 3.84Mcps TDD.
>
> [1.28Mcps TDD] This tagging of a word indicates that the word preceding the
> tag \"[1.28Mcps TDD]\" applies only to 1.28Mcps TDD. This tagging of a
> heading indicates that the heading preceding the tag \"[1.28Mcps TDD]\" and
> the section following the heading applies only to 1.28Mcps TDD.
>
> [FDD - ...] This tagging indicates that the enclosed text following the
> \"[FDD - \" applies only to FDD. Multiple sequential paragraphs applying
> only to FDD are enclosed separately to enable insertion of TDD specific (or
> common) paragraphs between the FDD specific paragraphs.
>
> [TDD - ...] This tagging indicates that the enclosed text following the
> \"[TDD - \" applies only to TDD, including 7.68Mcps TDD, 3.84Mcps TDD and
> 1.28Mcps TDD. Multiple sequential paragraphs applying only to TDD are
> enclosed separately to enable insertion of FDD specific (or common)
> paragraphs between the TDD specific paragraphs.
>
> [7.68Mcps TDD - ...] This tagging indicates that the enclosed text following
> the \"[7.68Mcps TDD - \" applies only to 7.68Mcps TDD. Multiple sequential
> paragraphs applying only to 7.68Mcps TDD are enclosed separately to enable
> insertion of FDD and TDD specific (or common) paragraphs between the
> 7.68Mcps TDD specific paragraphs.
>
> [3.84Mcps TDD - ...] This tagging indicates that the enclosed text following
> the \"[3.84Mcps TDD - \" applies only to 3.84Mcps TDD. Multiple sequential
> paragraphs applying only to 1.28Mcps TDD are enclosed separately to enable
> insertion of FDD and TDD specific (or common) paragraphs between the
> 3.84Mcps TDD specific paragraphs.
>
> [1.28Mcps TDD - ...] This tagging indicates that the enclosed text following
> the \"[1.28Mcps TDD -- \" applies only to 1.28Mcps TDD. Multiple sequential
> paragraphs applying only to 1.28Mcps TDD are enclosed separately to enable
> insertion of FDD and TDD specific (or common) paragraphs between the
> 1.28Mcps TDD specific paragraphs.
>
> Procedure When referring to a procedure in the specification the Procedure
> Name is written with the first letters in each word in upper case characters
> followed by the word \"procedure\", e.g. Node Synchronisation procedure.
>
> Frame When referring to a control or data frame in the specification the
> CONTROL/DATA FRAME NAME is written with all letters in upper case characters
> followed by the words \"control/data frame\", e.g. TIMING ADJUSTMENT control
> frae.
>
> IE When referring to an information element (IE) in the specification the
> _Information Element Name_ is written with the first letters in each word in
> upper case characters and all letters in Italic font followed by the
> abbreviation \"IE\", e.g. _Frame Type_ IE.
>
> Value of an IE When referring to the value of an information element (IE) in
> the specification the \"Value\" is written as it is specified in subclause
> 6.2.7 or 6.3.3 enclosed by quotation marks, e.g. \"0\" or \"255\".
# 4 General aspects
## 4.1 Common Transport Channel Data Stream User Plane Protocol Services
Common transport channel provides the following services:
\- Transport of TBS between the Node B and the CRNC for common transport
channels.
\- Support of transport channel synchronisation mechanism.
\- Support of Node Synchronisation mechanism.
## 4.2 Services expected from the Data Transport Network layer
The following services are expected from the transport layer:
\- Delivery of Frame Protocol PDUs.
In sequence delivery is not required. However, frequent out-of-sequence
delivery may impact the performance and should be avoided.
## 4.3 Protocol Version
This revision of the specification specifies version 1 of the protocols.
# 5 Data Streams User Plane Procedures
## 5.1 Data Transfer
### 5.1.1 RACH Channels
Data Transfer procedure is used to transfer data received from Uu interface
from Node B to CRNC. Data Transfer procedure consists of a transmission of
Data Frame from Node B to CRNC.
Figure 1: RACH Data Transfer procedure
### 5.1.2 CPCH Channels [FDD]
Void.
### 5.1.3 Secondary-CCPCH related transport Channels
For the FACH transport channel, a Data Transfer procedure is used to transfer
data from CRNC to Node B. Data Transfer procedure consists of a transmission
of Data Frame from CRNC to Node B.
Figure 3: FACH Data Transfer procedure
For the PCH transport channel, a Data Transfer procedure is used to transfer
data from CRNC to Node B. Data Transfer procedure consists of a transmission
of Data Frame from CRNC to Node B.
Figure 4: PCH Data Transfer procedure
In this case the PCH DATA FRAME may also transport information related to the
PICH channel.
If the Node B does not receive a valid FP frame in a TTI, it assumes that
there is no data to be transmitted in that TTI for this transport channel. For
the FACH and PCH transport channels, the TFS shall never define a Transport
Block Size of zero bits.
If the Node B is aware of a TFI value corresponding to zero bits for this
transport channel, this TFI is assumed. When combining the TFI\'s of the
different transport channels, a valid TFCI might result and in this case data
shall be transmitted on the Uu.
If the Node B is not aware of a TFI value corresponding to zero bits for this
transport channel or if combining the TFI corresponding to zero bits with
other TFI\'s results in an unknown TFI combination, the handling as described
in the following paragraph shall be applied.
At each frame, the Node B shall build the TFCI value of each secondary-CCPCH
according to the TFIs of the transport channels multiplexed on this secondary-
CCPCH and scheduled for that frame. [FDD \- In case the Node B receives an
unknown TFI combination, no pilot bits, TFCI bits or Data bits shall be
transmitted.] [TDD - In case the Node B receives an unknown TFI combination,
it shall apply DTX, i.e. suspend transmission on the corresponding S-CCPCH -
except if this S-CCPCH provides the \"beacon function\", in which case the
Node B shall maintain the physical layer transmission as specified in TS
25.221] [4].
If the Node B does not receive a valid FP frame in a TTI or a frame without
paging indication information, it assumes that no UE\'s have to be paged on
the Uu in this TTI. In this case the default PICH bit pattern of all zeros
shall be transmitted.
Data Frames sent on Iub for different transport channels multiplexed on one
secondary-CCPCH might indicate different transmission power levels to be used
in a certain Uu frame. Node-B shall determine the highest DL power level
required for any of the transport channels multiplexed in a certain Uu frame
and use this power level as the desired output level for the data.
In the case there is no data (i.e. no TB in the FP frame or no FP frame) in
any transport channel for a given TTI and a TFCI is defined for no
transmission on all transport channels multiplexed on the S-CCPCH, the TFCI
transmit power is unspecified.
NOTE: It can be for example 0 or determined by the Node B relatively to P~ref-
nodata~ = Min (PCH Power, Max FACH1 Power, Max FACH2 Power, ...., Max FACHn
Power _)_ where PCH, FACH1, FACH2, ..., FACHn are the transport channels of
the S-CCPCH [FDD , using the respective PO1 and PO3 offsets specified in TS
25.214 [10]].
### 5.1.4 Downlink Shared Channels [TDD]
The Data Transfer procedure is used to transfer a DSCH DATA FRAME from the
CRNC to a Node B.
If the Node B does not receive a valid DSCH DATA FRAME for transmission in a
given TTI, it assumes that there is no data to be transmitted in that TTI for
this transport channel. For the DSCH transport channel, the TFS shall never
define a Transport Block Size of zero bits.
The Node B shall use the header information in the DSCH DATA FRAME to
determine which PDSCH Set [3.84Mcps and 7.68 Mcps TDD - and Transmit Power
Level if no closed loop TPC power control is used] should be used in the PDSCH
Uu frames associated to the specified CFN. The specified PDSCH Set [3.84Mcps
and 7.68 Mcps TDD - and Transmit Power Level if no closed loop TPC power
control is used] shall then be used for DSCH transmission for as long as there
is data to transmit or until a new DSCH DATA FRAME arrives that specifies that
a different PDSCH Set [3.84Mcps and 7.68 Mcps TDD - and/or Transmit Power
Level if no closed loop TPC power control is used] should be used. This
feature enables multiple DSCH\'s with different TTI to be supported.
The Node B may receive a DSCH data frame which contains a TFI value
corresponding to there being no data to transmit, such a DSCH DATA FRAME will
have no transport blocks. On receiving such a DATA FRAME the Node B shall
apply the specified PDSCH Set [3.84Mcps and 7.68 Mcps TDD - and Transmit Power
Level if no closed loop TPC power control is used] as described above starting
in the PDSCH Uu frame associated to the specified CFN. This feature enables
multiple DSCH\'s with different TTI to be supported, the use of such a zero
payload DSCH DATA FRAME solves the problem of how the Node B should determine
what PDSCH Set [3.84Mcps and 7.68 Mcps TDD - and Transmit Power Level if no
closed loop TPC power control is used] should be used in the event that
transmission of a transport block set being transmitted with a short TTI comes
to an end, whilst the transmission of a TBS with a long TTI continues.
Data Frames sent on Iub for different DSCH transport channels multiplexed on
one CCTrCH might indicate different transmission power levels to be used in a
certain Uu frame. Node-B shall determine the highest DL power level required
for any of the transport channels multiplexed in a certain Uu frame and use
this power level as the desired output level.
Figure 5: DSCH Data Transfer procedure
### 5.1.5 Uplink Shared Channels [TDD]
Data Transfer procedure is used to transfer data received from Uu interface
from Node B to CRNC. Data Transfer procedure consists of a transmission of
Data Frame from Node B to CRNC.
Figure 6: USCH Data Transfer procedure
Node B shall always send an USCH DATA FRAME to the CRNC provided the Transport
Format addressed by the TFI indicates that the number of Transport Blocks is
greater than 0.
When UL synchronisation is lost or not yet achieved on the Uu, USCH DATA
FRAMEs shall not be sent to the CRNC.
When Node B receives an invalid TFCI in the PUSCH, USCH DATA FRAMEs shall not
be sent to the CRNC.
### 5.1.6 High Speed Downlink Shared Channels
The Data Transfer procedure is used to transfer a HS-DSCH DATA FRAME (TYPE 1,
TYPE 2 [FDD and 1.28Mcps TDD - or TYPE3]) from the CRNC to a Node B. HS-DSCH
DATA FRAME TYPE 2 is selected if the IE _HS-DSCH MAC-d PDU Size Format_ in
NBAP (TS 25.433 [6]) is present and set to 'Flexible MAC-d PDU Size' [FDD and
1.28Mcps TDD - or if the IE _HS-DSCH Common System Information_ is present and
the UE is in Cell_FACH state. HS-DSCH DATA FRAME TYPE 3 is selected if the IE
_HS-DSCH Paging System Information_ in NBAP (TS 25.433 [6]) is present and the
UE is in Cell_PCH state or URA_PCH state]. HS-DSCH DATA FRAME TYPE 1 is
selected in any other case.
[FDD and 1.28Mcps TDD -- Three types of HS-DSCH Frame Protocols exist for HS-
DSCH data transfer procedure, i.e., HS-DSCH Frame Protocol TYPE 1 (including
HS-DSCH DATA FRAME TYPE 1 and HS-DSCH CAPACITY ALLOCATION TYPE 1 Control
Frame), HS-DSCH Frame Protocol TYPE 2 (including HS-DSCH DATA FRAME TYPE 2 and
HS-DSCH CAPACITY ALLOCATION TYPE 2 Control Frame) and HS-DSCH Frame Protocol
TYPE 3 (including HS-DSCH DATA FRAME TYPE 3).]
[3.84Mcps TDD and 7.68 Mcps TDD -- Two types of HS-DSCH Frame Protocols exist
for HS-DSCH data transfer procedure, i.e., HS-DSCH Frame Protocol TYPE 1
(including HS-DSCH DATA FRAME TYPE 1 and HS-DSCH CAPACITY ALLOCATION TYPE 1
Control Frame) and HS-DSCH Frame Protocol TYPE 2 (including HS-DSCH DATA FRAME
TYPE 2 and HS-DSCH CAPACITY ALLOCATION TYPE 2 Control Frame).]
HS-DSCH CAPACITY ALLOCATION TYPE 1 Control Frame shall be associated only with
HS-DSCH DATA FRAME TYPE 1 while HS-DSCH CAPACITY ALLOCATION TYPE 2 Control
Frame shall be associated only with HS-DSCH DATA FRAME TYPE 2. HS-DSCH
CAPACITY REQUEST Control Frame shall be used for both of HS-DSCH Frame
Protocols. HS-DSCH Frame Protocol TYPE 2 is used for Flexible MAC-d PDU Size
[FDD and 1.28Mcps TDD - and Enhanced Cell_FACH Operation] as described in NBAP
(TS 25.433 [6]).
When the CRNC has been granted capacity by the Node B via the HS-DSCH CAPACITY
ALLOCATION (TYPE 1 or TYPE 2) Control Frame or via the HS-DSCH initial
capacity allocation as described in TS 25.433 [6] and the CRNC has data
waiting to be sent, then the HS-DSCH DATA FRAME (TYPE 1 or TYPE 2) is used to
transfer the data. If the CRNC has been granted capacity by the Node B via the
HS-DSCH initial capacity allocation as described in TS 25.433 [6], this
capacity is valid for only the first HS-DSCH DATA FRAME (TYPE 1 or TYPE 2)
transmission. If the HS-DSCH Frame Protocol TYPE 2 has been selected by the
Node B, the granted capacity shall be interpreted as the total number of
octets which is retrieved by multiplying the maximum MAC-d PDU [FDD and
1.28Mcps TDD - or MAC-c PDU] length (indicated by the _Maximum MAC-d/c PDU
Length_ IE) with the number of MAC-d PDUs [FDD and 1.28Mcps TDD - or MAC-c
PDUs] (indicated by the _HS-DSCH Credits_ IE). When data is waiting to be
transferred, and a CAPACITY ALLOCATION (TYPE 1 or TYPE 2) is received, a DATA
FRAME (TYPE 1 or TYPE 2) will be transmitted immediately according to
allocation received. If the allocation received is >0 but less than the data
waiting to be transferred, then the CRNC may send one HS-DSCH DATA FRAME TYPE
2 containing one MAC-d PDU [FDD - or MAC-c PDU] with a length up to the NBAP
_Maximum MAC-d PDU Size Extended_ [FDD and 1.28Mcps TDD - or _Maximum MAC-c
PDU Size_] IE value. In such a case, the amount of data exceeding the
allocated capacity for the first HS-DSCH Interval shall be credited from the
following HS-DSCH Intervals, if available.
In case of HS-DSCH Frame Protocol TYPE 1, multiple MAC-d PDUs of same length
and same priority level (CmCH-PI) may be transmitted in one MAC-d flow in the
same HS-DSCH DATA FRAME TYPE 1.
In case of HS-DSCH Frame Protocol TYPE 2, MAC-d PDUs [FDD and 1.28Mcps TDD -
or MAC-c PDUs] with the same logical channel ID shall be associated to one
unique priority level (CmCH-PI).
The HS-DSCH DATA FRAME (TYPE 1 and TYPE 2) includes a _User Buffer Size_ IE to
indicate the amount of data pending for the respective MAC-d flow for the
indicated priority level. [FDD and 1.28Mcps TDD - The HS-DSCH DATA FRAME TYPE
2 includes PDUs for UE in Cell_FACH includes a _User Buffer Size_ IE to
indicate the amount of data pending for the respective Common MAC flow for the
indicated priority level.] Within one priority level (CmCH-PI) and size the
MAC-d PDUs [FDD and 1.28Mcps TDD - or MAC-c PDUs] shall be transmitted by the
Node B on the Uu interface in the same order as they were received from the
CRNC.
FDD - In case of HS-DSCH Frame Protocol TYPE 2 or TYPE 3 and when the UE is
not in Cell_DCH state, then (see TS 25.331 [8] and TS 25.321 [9]):]
\- [FDD - When transmitting the MAC-ehs PDU on the Uu interface using the
dedicated H-RNTI for DCCH/DTCH the Node B shall:]
\- [FDD - if supported use the actual HS-DSCH physical layer category for MAC-
ehs of the UE, or]
\- [FDD - if the actual HS-DSCH physical layer category is not known to Node B
or the usage of the actual UE category is not supported - use category 12 and
limit the MAC-ehs PDU size to not more than 1572 bits, if supported]
\- [FDD - When transmitting the MAC-ehs PDU on the Uu interface for other
channels than BCCH and not using the dedicated H-RNTI the Node B shall if
supported use the \"Total number of soft channel bits\" as defined for a UE of
category 12 (see Table 5.1a in TS 25.306 [12])]
\- [FDD - When transmitting the MAC-ehs PDU on the Uu interface for BCCH, the
Node B shall, if supported, use category 12 and limit the MAC-ehs PDU size to
1572 bits.]
If the _Flush_ IE in the HS-DSCH DATA FRAME (TYPE 1 and TYPE 2) is set to
\"flush\" the Node B should remove all MAC-d PDUs [FDD and 1.28Mcps TDD - or
MAC-c PDUs] from the corresponding MAC-hs Priority Queue that have been
received prior to this data frame on the same transport bearer.
For the purpose of TNL Congestion Control on HSDPA, the _Frame Sequence
Number_ and the _DRT_ IEs may be included by the CRNC.
Figure 6A: HS-DSCH Data Transfer procedure
### 5.1.7 E-DCH Channels for CELL_FACH and Idle[FDD and 1.28Mcps TDD]
The E-DCH Data Transfer procedure for CELL_FACH and Idle is used to transfer
an E-DCH DATA FRAME from the Node B to the CRNC. The E-DCH user-plane payload
is transmitted using the E-DCH DATA FRAME only when some payload has been
successfully received in same way as E-DCH Data Transfer procedure for
Cell_DCH defined in TS 25.427 [13], i.e., only silent mode defined in TS
25.427 [13] is used.
Figure 6B : E-DCH Enhanced Data Transfer procedure in CELL_FACH and Idle
## 5.2 Node Synchronisation
In the Node Synchronisation procedure, the RNC sends a DL NODE SYNCHRONISATION
control frame to Node B containing the parameter T1. Upon reception of a DL
NODE SYNCHRONISATION control frame, the Node B shall respond with UL NODE
SYNCHRONISATION control frame, indicating T2 and T3, as well as T1 which was
indicated in the initiating DL NODE SYNCHRONISATION control frame.
The T1, T2, T3 parameters are defined as:
T1: RNC specific frame number (RFN) that indicates the time when RNC sends the
frame through the SAP to the transport layer.
T2: Node B specific frame number (BFN) that indicates the time when Node B
receives the correspondent DL NODE SYNCHRONISATION control frame through the
SAP from the transport layer.
T3: Node B specific frame number (BFN) that indicates the time when Node B
sends the frame through the SAP to the transport layer.
The general overview on the Node Synchronisation procedure is reported in TS
25.402 [2].
The procedure shall not be applied on transport bearers with IP multicast
option.
Figure 7: Node Synchronisation procedure
## 5.3 DL Transport Channels Synchronisation
CRNC sends a DL SYNCHRONISATION control frame to Node B. This message
indicates the target CFN.
Upon reception of the DL SYNCHRONISATION control frame Node B shall
immediately respond with UL SYNCHRONISATION control frame indicating the ToA
for the DL SYNCHRONISATION control frame and the CFN indicated in the received
message.
The procedure shall not be applied on transport bearers transporting UL
traffic channels RACH [FDD and 1.28Mcps TDD -- , E-DCH for CELL_FACH and Idle]
or USCH.
In case a CRNC sends DL SYNCHRONISATION control frame to Node B via IP
multicast transport bearer, the target CFN indicates the target MFN. Upon
reception of the DL SYNCHRONISATION control frame Node B shall immediately
respond with UL SYNCHRONISATION control frame via one unicast transport bearer
indicating the ToA for the DL SYNCHRONISATION control frame and the MFN
indicated in the received message.
In case a transport bearer without IP multicast option is used by several FACH
channels, the procedure shall take place for all these FACH channels.
Figure 8: Transport Channels Synchronisation procedure
## 5.4 DL Timing Adjustment
Timing Adjustment procedure is used to indicate for the CRNC the incorrect
arrival time of downlink data to Node B.
Timing Adjustment procedure is initiated by the Node B if a DL frame arrives
outside of the defined arrival window.
If the DL frame has arrived before the ToAWS or after the ToAWE Node B
includes the ToA and the target CFN as message parameters for TIMING
ADJUSTMENT control frame.
In case a transport bearer without IP multicast option is used by several FACH
channels, the procedure shall take place for all these FACH channels.
The arrival window and the time of arrival are defined as follows:
**\- Time of Arrival Window Endpoint (ToAWE):** ToAWE represents the time
point by which the DL data shall arrive to the Node B from Iub. The ToAWE is
defined as the amount of milliseconds before the last time point from which a
timely DL transmission for the identified CFN would still be possible taking
into account the Node B internal delays. ToAWE is set via control plane. If
data does not arrive before ToAWE a TIMING ADJUSTMENT control frame shall be
sent by Node B.
**\- Time of Arrival Window Startpoint (ToAWS):** ToAWS represents the time
after which the DL data shall arrive to the Node B from Iub. The ToAWS is
defined as the amount of milliseconds from the ToAWE. ToAWS is set via control
plane. If data arrives before ToAWS a TIMING ADJUSTMENT control frame shall be
sent by Node B.
**\- Time of Arrival (ToA):** ToA is the time difference between the end point
of the DL arrival window (ToAWE) and the actual arrival time of DL frame for a
specific CFN. A positive ToA means that the frame is received before the
ToAWE, a negative ToA means that the frame is received after the ToAWE.
The general overview on the timing adjustment procedure is reported in TS
25.402 [2].
Figure 9: Timing Adjustment procedure
## 5.5 Dynamic PUSCH Assignment [TDD]
Procedure for dynamic allocation of physical resources to uplink shared
channels (USCH) in the Node B. The control frame includes a parameter \"PUSCH
Set Id\" which is a pointer to a pre-configured table of PUSCH Sets in the
Node B.
When this control frame is sent via a certain Iub USCH data port, then it
applies to that USCH and in addition to any other USCH channel which is
multiplexed into the same CCTrCH in the Node B.
The time limitation of the PUSCH allocation is expressed with the parameters
\"Activation CFN\" and \"Duration\".
_Node B behaviour_ : When the Node B receives the \"DYNAMIC PUSCH ASSIGNMENT\"
from the CRNC in the USCH frame protocol over an Iub USCH data port within a
Traffic Termination Point, it shall behave as follows:
1) The Node B shall extract the PUSCH Set Id.
2) It shall extract the parameters \"Activation CFN\" and \"Duration\" which
identify the allocation period of that physical channel.
3) It shall retrieve the PUSCH Set which is referred to by the PUSCH Set Id.
4) It shall identify the CCTrCH to which the USCH is multiplexed, and hence
the TFCS which is applicable for the USCH.
5) Within the time interval indicated by Activation CFN and Duration, the Node
B shall make the specified PUSCH Set available to the CCTrCH.
Figure 10: Dynamic PUSCH Assignment procedure
## 5.6 DSCH TFCI Signalling [FDD]
Void.
## 5.7 Timing Advance [3.84 Mcps and 7.68Mcps TDD]
This procedure is used in order to signal to the Node B the adjustment to be
performed by the UE in the uplink timing.
The Node B shall use the CFN and timing adjustment values to adjust its layer
1 to allow for accurate impulse averaging.
Figure 12: Timing Advance procedure
## 5.7A Outer Loop PC Information Transfer [1.28 Mcps TDD]
Based, for example, on the CRCI values and on the quality estimate in the USCH
data frames, CRNC modifies the SIR target of the associated CCTrCH by
including the absolute value of the new SIR target in the OUTER LOOP PC
control frame sent to the Node B.
At the reception of the OUTER LOOP PC control frame from the CRNC via a
Transport Bearer used for an USCH, the Node B shall immediately update the SIR
target used for the inner loop power control for the respective CCTrCH with
the specified value.
The OUTER LOOP PC control frame can be sent via any of the transport bearers
carrying USCHs which belong to the CCTrCH for which the UL SIR Target shall be
adjusted.
Figure 12A: Outer Loop Power Control Information Transfer procedure
## 5.8 General
### 5.8.1 Association between transport bearer and data/control frames
Table 1 shows how the data and control frames are associated to the transport
bearers. \'yes\' indicates that the control frame is applicable to the
transport bearer, \'no\' indicates that the control frame is not applicable to
the transport bearer.
Table 1
Transport bearer used for | Associated data frame | Associated control frames |  |  |  |  |  |  |  |  |   
---|---|---|---|---|---|---|---|---|---|---|---  
|  | Timing Adjust-ment |  | DL Transport Channels Synchroni­sation | Node Synchroni­sation | Dynamic PUSCH Assign­ment | Timing Advance | Outer Loop PC Info Transfer | HS-DSCH Capacity Request | HS-DSCH Capacity Allocation TYPE 1 | HS-DSCH PDU Drop Indication  
RACH | RACH DATA FRAME | no |  | no | no | no | no | no | no | no | no  
FACH | FACH DATA FRAME | yes |  | yes | yes1 | no | no | no | no | no | no  
PCH | PCH DATA FRAME | yes |  | yes | yes | no | no | no | no | no | no  
DSCH | DSCH DATA FRAME | yes |  | yes | yes | no | no | no | no | no | no  
USCH | USCH DATA FRAME | no |  | no | no | yes | yes | yes | no | no | no  
HS-DSCH | HS-DSCH DATA FRAME TYPE 1 | no |  | no | yes | no | no | no | yes | yes | yes  
HS-DSCH | HS-DSCH DATA FRAME TYPE 2 | no |  | no | yes | no | no | no | yes | no | yes  
HS-DSCH | HS-DSCH DATA FRAME TYPE 3 | yes |  | yes | yes | no | no | no | no | no | no  
E-DCH for CELL FACH and Idle | E-DCH DATA FRAME | no |  | no | no | no | no | no | no | no | no  
NOTE: ^1^: The associated control frame is not applicable to the transport
bearer with IP multicast option.
### 5.8.2 DSCH / USCH transport bearer replacement [TDD]
As described in NBAP (TS 25.433 [6]), transport bearer replacement can be
achieved for a DSCH or USCH by using the Synchronised Radio Link
Reconfiguration Preparation procedure in combination with the Synchronised
Radio Link Reconfiguration Commit procedure. The following steps can be
discerned:
1) The new transport bearer is established after which 2 transport bearers
exist in parallel.
2) The transport channel(s) is/are switched to the new transport bearer.
3) The old transport bearer is released.
**DSCH transport bearer replacement, step 1:**
Communication on the old transport bearer continues as normal. In addition,
the Node B shall support DSCH DATA FRAMEs, the DL Transport Channel
Synchronisation procedure (see sub-clause 5.3) and the DL Timing Adjustment
procedure (see sub-clause 5.4) on the new bearer. This enables the CRNC to
determine the timing on the new transport bearer. DSCH DATA FRAMEs transported
on the new transport bearer shall not be transmitted on the Uu Interface
before the CFN indicated in the RADIO LINK RECONFIGURATION COMMIT message.
**USCH transport bearer replacement, step 1:**
Communication on the old transport bearer continues as normal.
**DSCH / USCH Transport Bearer Replacement step 2:**
Regarding step 2), the moment of switching is determined as follows:
\- The DSCH DATA FRAMEs or USCH DATA FRAMEs shall be transported on the new
transport bearer from the CFN indicated in the RADIO LINK RECONFIGURATION
COMMIT message.
Starting from this CFN the Node B shall support all applicable Common
Transport Channels frame protocol procedures on the new transport bearer and
no requirements exist regarding support of Common Transport Channels frame
protocol procedures on the old transport bearer.
**DSCH / USCH Transport Bearer Replacement step 3:**
Finally in step 3), the old transport bearer is released.
### 5.8.3 HS-DSCH Transport Bearer Replacement
As described in NBAP (TS 25.433 [6]), transport bearer replacement can be
achieved for a HS-DSCH MAC-d Flow by using the Synchronised Radio Link
Reconfiguration Preparation procedure in combination with the Synchronised
Radio Link Reconfiguration Commit procedure, or by using the Unsynchronised
Radio Link Reconfiguration procedure. In both cases the following steps can be
discerned:
1) The new transport bearer is established after which 2 transport bearers
exist in parallel.
2) The HS-DSCH MAC-d Flow is switched to the new transport bearer.
3) The old transport bearer is released.
**HS-DSCH Transport Bearer Replacement, step 1:**
Communication on the old transport bearer continues as normal. In addition,
the Node B shall support HS-DSCH DATA FRAMEs (TYPE 1 or TYPE 2), the HS-DSCH
CAPACITY REQUEST Control Frame (see sub-clause 5.9) and may support the HS-
DSCH CAPACITY ALLOCATION (TYPE 1 or TYPE 2) Control Frame (see sub-clause
5.10) on the new transport bearer. HS-DSCH DATA FRAMEs (TYPE 1 or TYPE 2)
transported on the new transport bearer shall be transmitted on the Uu
Interface in the same way as those received on the old transport bearer (see
sub-clause 5.1.6).
The Node B may use the old or the new transport bearer for the HS-DSCH
CAPACITY ALLOCATION (TYPE 1 or TYPE 2) Control Frame. The HS-DSCH CAPACITY
ALLOCATION (TYPE 1 or TYPE 2) Control Frame indicates the total amount of
capacity granted for the MAC-d flow and the indicated priority level,
irrespective of the transport bearer used. Any capacity previously granted is
replaced.
The RNC may use the old or the new transport bearer for the HS-DSCH CAPACITY
REQUEST Control Frame. The rules for reissuing a HS-DSCH CAPACITY REQUEST
Control Frame as outlined in sub-clause 5.9 still apply.
**HS-DSCH Transport Bearer Replacement, step 2:**
Regarding step 2), the moment of switching is determined as follows:
Starting from the CFN indicated in the RADIO LINK RECONFIGURATION COMMIT
message -- or directly when using the unsynchronised Radio Link
Reconfiguration procedure, the Node B shall support all applicable Common
Transport Channels frame protocol procedures on the new transport bearer and
no requirements exist regarding support of Common Transport Channels frame
protocol procedures on the old transport bearer.
**HS-DSCH Transport Bearer Replacement, step 3:**
Finally in step 3), the old transport bearer is released.
## 5.9 HS-DSCH Capacity Request
Figure 12B: HS-DSCH Capacity Request procedure
The HS-DSCH Capacity Request procedure provides means for the CRNC to request
HS-DSCH capacity by indicating the user buffer size in the CRNC for a given
priority level.
The CRNC is allowed to reissue the HS-DSCH Capacity Request if no CAPACITY
ALLOCATION (TYPE 1 or TYPE 2) has been received within an appropriate time
threshold.
## 5.10 HS-DSCH Capacity Allocation
Figure 12C: HS-DSCH Capacity Allocation procedure
HS-DSCH Capacity Allocation procedure is generated within the Node B. It may
be generated either in response to a HS-DSCH Capacity Request or at any other
time.
The Node B may use this message to modify the capacity at any time,
irrespective of the reported user buffer status.
The HS-DSCH CAPACITY ALLOCATION (TYPE 1 and TYPE 2) Control Frame is used by
the Node B to control the user data flow. In case of HS-DSCH Frame Protocol
TYPE 1, the _HS-DSCH Credits_ IE indicates the number of MAC-d PDUs that the
CRNC is allowed to transmit for the MAC-d flow and the associated priority
level indicated by the _Common Transport Channel Priority Indicator_ IE. In
case of HS-DSCH Frame Protocol TYPE 2, the _HS-DSCH Credits_ IE multiplied by
the _Maximum MAC -- d/c PDU Length_ IE indicates the number of MAC-d PDU [FDD
and 1.28Mcps TDD -- or MAC-c PDU] octets that the CRNC is allowed to transmit
for the MAC-d flow [FDD and 1.28Mcps TDD - or Common MAC flow] and the
associated priority level indicated by the _Common Transport Channel Priority
Indicator_ IE.
The _Maximum_ _MAC-d PDU Length (in case of_ HS-DSCH Frame Protocol TYPE 1)
_or Maximum_ _MAC- d/c PDU Length_ _(in case of_ HS-DSCH Frame Protocol TYPE
2), _HS-DSCH Credits_ , _HS-DSCH Interval_ and _HS-DSCH Repetition Period_ IEs
indicates the total amount of capacity granted. Any capacity previously
granted is replaced.
If _HS-DSCH Credits_ IE = 0 (e.g. due to congestion in the Node B), the CRNC
shall immediately stop transmission of MAC-d PDUs [FDD and 1.28Mcps TDD -- or
MAC-c PDUs]. If _HS-DSCH Credits_ IE = 2047 in case of HS-DSCH CAPACITY
ALLOCATION TYPE 1 Control Frame or 65535 in case of HS-DSCH CAPACITY
ALLOCATION TYPE 2 Control Frame, the CRNC can transmit MAC-d PDUs [FDD and
1.28Mcps TDD -- or MAC-c PDUs] with unlimited capacity.
The IEs used in the HS-DSCH CAPACITY ALLOCATION Control Frame (TYPE 1 and TYPE
2) are the _Common Transport Channel Priority Indicator_ , _HS-DSCH Credits_ ,
_Maximum_ _MAC- d PDU Length (in case of_ HS-DSCH Frame Protocol TYPE 1) _or
Maximum_ _MAC- d/c PDU Length_ _(in case of_ HS-DSCH Frame Protocol TYPE 2),
_HS-DSCH Interval_ and the _HS-DSCH Repetition Period_.
_If the HS-DSCH Repetition Period_ IE _=_ _\"unlimited repetition period\"_ it
indicates that the CRNC may transmit the amount of granted capacity for an
unlimited period according to the bounds of _Maximum MAC-d PDU Length IE (TYPE
1) or Maximum_ _MAC- d/c PDU length IE (TYPE 2)_ , _HS-DSCH Credits_ IE and
_HS-DSCH Interval_ IE.
## 5.11 Indication of UE State Transition [1.28Mcps TDD]
In 1.28Mcps TDD, for UE in CELL_PCH state with dedicated H-RNTI, the network
will inform the UE to establish the uplink synchronization via HS-SCCH before
transmitting DCCH and DTCH to the UE. And when UE receives dedicated H-RNTI on
HS-SCCH, the UE shall initiate the uplink synchronization procedure and
transit to CELL_FACH state. After the Node B received the confirmation from UE
(upon detection of the UE's E-RUCCH), it shall send the UE State Transition
Indication to RNC through E-DCH user data frame with dedicated E-RNTI to
inform that the UE's state has been transited from CELL_PCH to CELL_FACH.
The UE State Transition Indication is indicated in E-DCH user data frame with
values set as follows:
\- The _CFN_ and _Subframe Number_ IE values shall reflect the time when the
state transition was detected
\- The _Number of MAC-is SDUs_ IE shall be set to zero. As a consequence there
are no _MAC-is PDU descriptor_ IE and there are no _MAC-is PDUs_ IEs in the
payload part of the data frame related to UE state transition indication.
## 5.12 HS-DSCH UL Synchronization Establishment Failure [1.28Mcps TDD]
Figure 12D: HS-DSCH UL Synchronization Establishment Failure procedure
In 1.28Mcps TDD, when the Node B needs to transmit HS-DSCH data to the UE in
CELL_FACH state, the Node B will inform the UE to establish the uplink
synchronization via HS-SCCH before HS-DSCH data transmission (TS 25.224 [14]).
During this uplink sychronization establishment procedure, if the uplink
synchronization failure indication from lower layer is received (TS 25.224
[14]), the Node B could use the HS-DSCH UL SYNCHRONIZATION ESTABLISHMENT
FAILURE control frame to notify the RNC to terminate the HS-DSCH data
transmission. The _H-RNTI_ IE contains the same value as the H-RNTI currently
allocated to the UE.
## 5.13 HS-DSCH PDU DROP INDICATION
Figure 12E: HS-DSCH PDU DROP INDICATION procedure
The HS-DSCH PDU DROP INDICATION Control Frame is used by the Node B to report
to CRNC the PDU drop events. It is used when Node B drops the PDUs. The
content of the dropped PDU or Data Frame is available in the Node B so in this
case direct identification of the PDUs is possible.
# 6 Frame Structure and Coding
## 6.1 General
The general structure of a Common Transport Channel frame consists of a header
and a payload. This structure is depicted in figure 13.
* * *
Header Payload: Data or Control Information
* * *
Figure 13: General Frame Structure
The header shall contain the Frame Type field and information related to the
frame type.
There are two types of frames (indicated by the Frame Type field).
\- Data frame.
\- Control frame.
In the present document the structure of frames will be specified by using
pictures similar to figure 14.
* * *
7 6 5 4 3 2 1 0 Condition  
Field 1 Field 2 Byte 1  
Field 3 Byte 2  
Field 3 (cont) Field 4 Byte 3  
Spare Extension
* * *
Figure 14: Example frame structure
Unless otherwise indicated, fields which consist of multiple bits within a
byte will have the more significant bit located at the higher bit position
(indicated above frame in figure 14). In addition, if a field spans several
bytes, more significant bits will be located in lower numbered bytes (right of
frame in figure 14).
On the Iub interface, the frame will be transmitted starting from the lowest
numbered byte. Within each byte, the bits are sent according decreasing bit
position (bit position 7 first).
The parameters are specified giving the value range and the step (if not 1).
The coding is done as follows (unless otherwise specified):
\- Unsigned values are binary coded.
\- Signed values are 2\'s complement binary coded.
The Spare Extension indicates the location where new IEs can in the future be
added in a backward compatible way. The Spare Extension shall not be used by
the transmitter and shall be ignored by the receiver.
Bits labelled \"Spare\" shall be set to zero by the transmitter and shall be
ignored by the receiver.
## 6.2 Data frame structure
### 6.2.1 RACH Channels
The RACH DATA FRAME includes the CFN corresponding to the SFN of the frame in
which the payload was received. If the payload was received in several frames,
the CFN corresponding to the first Uu frame in which the information was
received shall be indicated.
7 | 6 | 5 | 4 | 3 | 2 | 1 | 0 |  | Header  
---|---|---|---|---|---|---|---|---|---  
Header CRC | FT |  |  |  |  |  |  |  |   
CFN |  |  |  |  |  |  |  |  |   
spare | TFI |  |  |  |  |  |  |  |   
| Conditional FDD |  |  |  |  |  |  |  |   
Rx Timing Deviation | Conditional 3.84 Mcps and 7.68Mcps TDD |  |  |  |  |  |  |  |   
Received SYNC UL Timing Deviation | Conditional 1.28Mcps TDD |  |  |  |  |  |  |  |   
First TB |  | Payload |  |  |  |  |  |  |   
|  |  |  |  |  |  |  |  |   
First TB | Pad |  |  |  |  |  |  |  |   
|  |  |  |  |  |  |  |  |   
Last TB |  |  |  |  |  |  |  |  |   
|  |  |  |  |  |  |  |  |   
Last TB | Pad |  |  |  |  |  |  |  |   
|  |  |  |  |  |  |  |  |   
CRCI of first TB |  |  |  |  |  |  |  |  |   
|  |  |  |  |  |  |  |  |   
|  |  |  | CRCI of last TB | Pad |  |  |  |   
New IE Fl 7(E) | New IE Fl 6 | New IE Fl 5 | New IE Fl 4 | New IE Fl 3 | New IE Fl 2 | New IE Fl 1 | New IE Fl 0 |  |   
Spare 7-6 | Cell Porting ID | Conditional FDD |  |  |  |  |  |  |   
Spare 7-1 bits for 3.84 Mcps Spare 7-2 bits for 7.68 Mcps | Rx Timing Deviation (continuation) | Conditional 3.84Mcps or 7.68Mcps |  |  |  |  |  |  |   
Spare 7-2 | Ext Propa-gation Delay | Conditional FDD |  |  |  |  |  |  |   
Ext Propagation Delay | Conditional FDD Conditional 1.28Mcps |  |  |  |  |  |  |  |   
Spare 7-2 | AOA |  |  |  |  |  |  |  |   
AOA | Conditional 1.28Mcps Conditional 1.28Mcps |  |  |  |  |  |  |  |   
Spare 7-5 | Ext Received SYNC UL Timing Deviation |  |  |  |  |  |  |  |   
Ext Received SYNC UL Timing Deviation | Conditional 1.28Mcps |  |  |  |  |  |  |  |   
Cell Portion LCR ID | Conditional 1.28Mcps |  |  |  |  |  |  |  |   
Spare Extension |  |  |  |  |  |  |  |  |   
Payload CRC |  |  |  |  |  |  |  |  |   
Payload CRC (cont) |  |  |  |  |  |  |  |  |   
Figure 15: RACH DATA FRAME structure
_Propagation Delay_ is a conditional Information Element which is only present
when the Cell supporting the RACH Transport Channel is a FDD Cell.
_Rx Timing Deviation_ is a conditional Information Element which is only
present when the Cell supporting the RACH Transport Channel is a 3.84 Mcps or
7.68Mcps TDD Cell.
_Received SYNC UL Timing Deviation_ is a conditional Information Element which
is only present when the Cell supporting the RACH Transport Channel is a
1.28Mcps TDD Cell. The RNC shall ignore this IE if the measured Received SYNC
UL Timing Deviation is sent in Ext Received SYNC UL Timing Deviation IE
With respect to new IEs, for which the presence is indicated by the _New IE
Flags_ IE, the Figure 15 is an example of how a frame is structured when all
such new IEs are present. Note that non-presence of such a new IE changes the
position of all subsequent IEs on octet level.
[FDD- Bit 0 of New IE Flags in RACH DATA FRAME indicates if a Cell Portion ID
is present (1) or not present (0) in the byte (bits 0-5) following the _New IE
Flags_ IE.]
[FDD - Bit 1 of New IE Flags in RACH DATA FRAME indicates if _Ext Propagation
Delay_ IE is present (1) or not present (0)]
[FDD - Bits 2 through 6 of New IE Flags in RACH DATA FRAME shall be set to 0.]
[FDD - Field length of _Spare Extension_ IE in RACH DATA FRAME is 0-28
octets.]
[3.84 Mcps and 7.68 Mcps TDD - Bit 0 of New IE Flags in RACH DATA FRAME
indicates if the extended bits of the Rx Timing Deviation are present (1) or
not present (0) in the byte (bit 0 for 3.84 Mcps TDD, bits 0 and 1 for 7.68
Mcps TDD) following the _New IE Flags_ IE. Bits 1 through 6 of New IE Flags in
RACH DATA FRAME shall be set to 0. Field length of _Spare Extension_ IE in
RACH DATA FRAME is 0-30 octets.]
[1.28Mcps TDD - Bit 0 of New IE Flags in RACH DATA FRAME indicates if the
_AOA_ IE is present (1) or not present (0).]
[1.28Mcps TDD - Bit 1 of New IE Flags in RACH DATA FRAME indicates if _Ext
Received SYNC UL Timing Deviation_ IE is present (1) or not present (0).]
[1.28Mcps TDD - Bit 2 of New IE Flags in RACH DATA FRAME indicates if _Cell
Portion LCR_ IE is present (1) or not present (0).]
[1.28Mcps TDD -- Bits 3 through 6 of New IE Flags in RACH DATA FRAME shall be
set to 0.]
[1.28Mcps TDD -- Field length of Spare Extension IE in RACH DATA FRAME is 0-26
octets.]
### 6.2.2 CPCH Channels [FDD]
Void.
### 6.2.3 FACH Channels
FACH DATA FRAME includes the CFN corresponding to the Uu frame at which this
data in which the payload (FACH TBS) has to be transmitted. If the payload is
to be sent in several frames, the CFN corresponding to the first frame shall
be indicated. In case a transport bearer is used by several FACH channels, the
CFN and Transmit power level are valid for all these FACH channels.
* * *
7 6 5 4 3 2 1 0  
Header CRC FT Header  
CFN  
Spare TFI  
Transmit power level  
First TB Payload
First TB Pad
Last TB
Last TB Pad  
New IE Fl 7(E) New IE Fl 6 New IE Fl 5 New IE Fl 4 New IE Fl 3 New IE Fl 2 New
IE Fl 1 New IE Fl 0  
Spare 7 -2 AOA  
AOA  
Cell Portion LCR ID Conditional 1.28Mcps TDD  
Spare Extension  
Payload CRC  
Payload CRC( cont)
* * *
Figure 17: FACH DATA FRAME structure
[1.28Mcps TDD - Bit 0 of New IE Flags in FACH DATA FRAME indicates if the
_AOA_ IE is present (1) or not present (0).]
[1.28Mcps TDD - Bit 1 of New IE Flags in FACH DATA FRAME indicates if Cell
Portion LCR ID IE is present (1) or not present (0).]
[1.28Mcps TDD -- Field length of Spare Extension IE in FACH DATA FRAME is 0-29
octets.]
### 6.2.4 PCH Channels
The PCH DATA FRAME includes the paging indication information and paging
messages [FDD - To page one User Equipment, two consecutive PCH DATA FRAMEs
with consecutive CFN numbers are transmitted, the first frame contains the
Paging Indication Information and the second contains the Paging Message.]
[TDD -- To page one User Equipment, one or more PCH DATA FRAMEs are
trasmitted.]
[TDD - If two or more consecutive frames are used, the first frame contains
the Paging Indication Information and the rest contain the Paging Messages. If
PI-bitmap and PCH TBS are both transmitted within the PCH DATA FRAME, the CFN
is related to the PCH TBS only. The PI bitmap is mapped to the PICH frames,
transmitted at the beginning of the paging block.]
The paging messages are transmitted in S-CCPCH frames. The CFN in the PCH DATA
FRAME header corresponds to the Cell SFN of the frame in which the start of
the S-CCPCH frame is located. [TDD - If the paging messages are to be sent in
several frames, the CFN corresponding to the first frame shall be indicated.]
[FDD - The timing of the PICH frame (containing the paging indication
information) is τ~PICH~ prior to the S-CCPCH frame timing (TS 25.211 [5])].
In contrast to all other Common Transport Channel data frames, which use a CFN
of length 8, the PCH DATA FRAME includes a CFN of length 12.
The Node B has no responsibility to ensure the consistency between the paging
indication information and the corresponding paging messages. E.g. if the
paging indication information is lost over the Iub, the paging messages might
be sent over the Uu while no UE is actually listening.
* * *
7 6 5 4 3 2 1 0  
Header CRC FT Header  
CFN  
CFN (cont) Not Used PI  
Spare TFI  
PI-bitmap Payload
PI-bitmap Pad  
First TB
First TB Pad
Last TB
Last TB Pad  
Spare Extension  
Payload CRC  
Payload CRC( cont)
* * *
Figure 18: PCH DATA FRAME structure
\"Not Used\" bits shall be set to 0 by the RNC and ignored by the Node B.
### 6.2.5 Downlink Shared Channels [TDD]
DSCH DATA FRAME includes a CFN indicating the SFN of the PDSCH in which the
payload shall be sent. If the payload is to be sent over several frames, the
CFN corresponding to the first frame shall be indicated.
* * *
7 6 5 4 3 2 1 0  
Header CRC FT Header  
CFN  
Spare TFI  
PDSCH Set Id  
Transmit power level  
First TB Payload
First TB Pad
Last TB
Last TB Pad  
Spare Extension  
Payload CRC  
Payload CRC (cont)
* * *
Figure 20: DSCH DATA FRAME structure
### 6.2.6 Uplink Shared Channels [TDD]
USCH DATA FRAME includes the CFN in which the payload was received. If the
payload was received in several frames, the CFN corresponding to the first
frame will be indicated.
7 | 6 | 5 | 4 | 3 | 2 | 1 | 0 |  |   
---|---|---|---|---|---|---|---|---|---  
Header CRC | FT |  | Header |  |  |  |  |  |   
CFN |  |  |  |  |  |  |  |  |   
Spare | TFI |  |  |  |  |  |  |  |   
Rx Timing Deviation |  |  |  |  |  |  |  |  |   
First TB |  | Payload |  |  |  |  |  |  |   
|  |  |  |  |  |  |  |  |   
First TB | Pad |  |  |  |  |  |  |  |   
|  |  |  |  |  |  |  |  |   
Last TB |  |  |  |  |  |  |  |  |   
Last TB | Pad |  |  |  |  |  |  |  |   
QE |  |  |  |  |  |  |  |  |   
CRCI of first TB |  |  |  |  |  |  |  |  |   
|  |  |  |  |  |  |  |  |   
|  | CRCI of last TB | Pad |  |  |  |  |  |   
New IE Fl 7(E) | New IE Fl 6 | New IE Fl 5 | New IE Fl 4 | New IE Fl 3 | New IE Fl 2 | New IE Fl 1 | New IE Fl 0 |  |   
Spare 7-1 bits for 3.84Mcps Spare 7-2 bits for 7.68Mcps | Rx Timing Deviation (continuation) |  |  |  |  |  |  |  |   
Spare Extension |  |  |  |  |  |  |  |  |   
Payload CRC |  |  |  |  |  |  |  |  |   
Payload CRC( cont) |  |  |  |  |  |  |  |  |   
Figure 21: USCH DATA FRAME structure
[3.84 Mcps and 7.68 Mcps TDD - Field length of _Spare Extension_ IE in USCH
DATA FRAME is 0-30 octets.
Bit 0 of New IE Flags in USCH DATA FRAME indicates if the extended bits of the
Rx Timing Deviation are present (1) or not present (0) in the byte (bit 0 for
3.84 Mcps TDD, bits 0 and 1 for 7.68 Mcps TDD) following the _New IE Flags_
IE. Bits 1 through 6 of New IE Flags in USCH DATA FRAME shall be set to 0.]
### 6.2.6A HS-DSCH Channels
[FDD and 1.28Mcps TDD - Three types of HS-DSCH DATA FRAME exist for the HS-
DSCH data transfer, i.e. HS-DSCH DATA FRAME TYPE 1, HS-DSCH DATA FRAME TYPE 2
and HS-DSCH DATA FRAME TYPE 3.]
[3.84Mcps and 7.68Mcps TDD - Two types of HS-DSCH DATA FRAME exist for the HS-
DSCH data transfer, i.e. HS-DSCH DATA FRAME TYPE 1 and HS-DSCH DATA FRAME TYPE
2.]
7 | 6 | 5 | 4 | 3 | 2 | 1 | 0 |  |   
---|---|---|---|---|---|---|---|---|---  
Header CRC | FT |  | Header |  |  |  |  |  |   
Frame Seq Nr | CmCH-PI |  |  |  |  |  |  |  |   
MAC –d PDU Length |  |  |  |  |  |  |  |  |   
MAC –c/sh SDU Length (cont) | Flush | FSN/DRT Reset | CPC Recov |  |  |  |  |  |   
Num Of PDUs |  |  |  |  |  |  |  |  |   
User Buffer Size |  |  |  |  |  |  |  |  |   
User Buffer Size (cont) |  |  |  |  |  |  |  |  |   
Spare, bits 7-4 | MAC-d PDU-1 |  | Payload |  |  |  |  |  |   
|  |  |  |  |  |  |  |  |   
MAC –d PDU 1 (cont) | Pad |  |  |  |  |  |  |  |   
|  |  |  |  |  |  |  |  |   
|  |  |  |  |  |  |  |  |   
Spare, bits 7-4 | MAC-d PDU-n |  |  |  |  |  |  |  |   
|  |  |  |  |  |  |  |  |   
MAC –d PDU n (cont) | Pad |  |  |  |  |  |  |  |   
New IE FI 7(E) | New IE FI 6 | New IE FI 5 | New IE FI 4 | New IE FI 3 | New IE FI 2 | New IE FI 1 | New IE FI 0 |  |   
DRT |  |  |  |  |  |  |  |  |   
DRT (cont) |  |  |  |  |  |  |  |  |   
SN |  |  |  |  |  |  |  |  |   
SN(cont) | S/D |  |  |  |  |  |  |  |   
SN |  |  |  |  |  |  |  |  |   
SN(cont) | S/D |  |  |  |  |  |  |  |   
Spare Extension |  |  |  |  |  |  |  |  |   
Payload CRC |  |  |  |  |  |  |  |  |   
Payload CRC (cont) |  |  |  |  |  |  |  |  |   
Figure 21A: HS-DSCH DATA FRAME TYPE 1 structure
Bit 0 of New IE Flags in HS-DSCH DATA FRAME TYPE 1 indicates if a DRT is
present (1) or not (0) in the 2 octets following the _New IE Flags_ IE. Bit 1
of New IE Flags in HS-DSCH DATA FRAME TYPE1 indicates if SN is present (1) or
not (0) in the third and the forth octets following the _New IE Flags_ IE. Bit
0 in the forth octet is allocated for IE S/D. Bit 2 of New IE Flags in HS-DSCH
DATA FRAME TYPE1 indicates if SN is present (1) or not (0) in the fifth and
the sixth octets following the _New IE Flags_ IE. Bit 0 in the sixth octet is
allocated for IE S/D. Bits 3 through 6 of New IE Flags in HS-DSCH DATA FRAME
TYPE 1 shall be set to 0.
Field length of _Spare Extension_ IE in HS-DSCH DATA FRAME TYPE 1 is 0-25
octets.
7 | 6 | 5 | 4 | 3 | 2 | 1 | 0 |  |   
---|---|---|---|---|---|---|---|---|---  
Header CRC | FT |  | Header |  |  |  |  |  |   
Frame Seq Nr | CmCH-PI |  |  |  |  |  |  |  |   
Total Num of PDU blocks | Flush | FSN/DRT Reset | DRT Indicator |  |  |  |  |  |   
FI | eDRX Indicator | TS0 indicator | MI | CPC Recov | Spare 2-0 |  |  |  |   
User Buffer Size |  |  |  |  |  |  |  |  |   
User Buffer Size (cont) |  |  |  |  |  |  |  |  |   
MAC-d PDU length in block 1 |  |  |  |  |  |  |  |  |   
M len 1 (cont) | Spare | #PDUs in block 1 |  |  |  |  |  |  |   
Logical CH ID block1 | MAC-d PDU length in block 2 |  |  |  |  |  |  |  |   
M len 2 (cont) | Spare |  |  |  |  |  |  |  |   
#PDUs in block2 | Logical Ch ID in block2 |  |  |  |  |  |  |  |   
|  |  |  |  |  |  |  |  |   
MAC –d PDU length in block n |  |  |  |  |  |  |  |  |   
M len n (cont) | Spare | #PDUs in block n |  |  |  |  |  |  |   
Logical CH ID block n | Padding if n is odd |  |  |  |  |  |  |  |   
DRT |  | Payload |  |  |  |  |  |  |   
DRT (cont) |  |  |  |  |  |  |  |  |   
H-RNTI |  |  |  |  |  |  |  |  |   
H-RNTI (cont) |  |  |  |  |  |  |  |  |   
RACH Measurement Result |  |  |  |  |  |  |  |  |   
MAC-d/c PDU 1 | First block of PDUs with the same size |  |  |  |  |  |  |  |   
|  |  |  |  |  |  |  |  |   
MAC-d/c PDU 1 (cont) |  |  |  |  |  |  |  |  |   
|  |  |  |  |  |  |  |  |   
|  |  |  |  |  |  |  |  |   
MAC-d/c PDU m1 |  |  |  |  |  |  |  |  |   
|  |  |  |  |  |  |  |  |   
MAC-d/c PDU m1 (cont) |  |  |  |  |  |  |  |  |   
|  |  |  |  |  |  |  |  |   
|  |  |  |  |  |  |  |  |   
MAC-d/c PDU 1 | nth block of PDUs with the same size |  |  |  |  |  |  |  |   
|  |  |  |  |  |  |  |  |   
MAC-d/c PDU mn (cont) |  |  |  |  |  |  |  |  |   
New IE FI 7(E) | New IE FI 6 | New IE FI 5 | New IE FI 4 | New IE FI 3 | New IE FI 2 | New IE FI 1 | New IE FI 0 |  |   
New IE FI 7(E) | New IE FI 6 | New IE FI 5 | New IE FI 4 | New IE FI 3 | New IE FI 2 | New IE FI 1 | New IE FI 0 |  |   
Dedicated H-RNTI |  |  |  |  |  |  |  |  |   
Dedicated H-RNTI (cont) |  |  |  |  |  |  |  |  |   
E-RNTI |  |  |  |  |  |  |  |  |   
E-RNTI (cont) |  |  |  |  |  |  |  |  |   
HS-DSCH physical layer category | EI | spare |  |  |  |  |  |  |   
SN |  |  |  |  |  |  |  |  |   
SN (cont) | S/D |  |  |  |  |  |  |  |   
SN |  |  |  |  |  |  |  |  |   
SN (cont) | S/D |  |  |  |  |  |  |  |   
FeDRX Indicator | NTHT | CR Ind | OPCE Ind | HS-SCCH DRX Indication | Spare 2-0 |  |  |  |   
CFN |  |  |  |  |  |  |  |  |   
Spare Extension |  |  |  |  |  |  |  |  |   
Payload CRC |  |  |  |  |  |  |  |  |   
Payload CRC (cont) |  |  |  |  |  |  |  |  |   
Figure 21B: HS-DSCH DATA FRAME TYPE 2 structure
[FDD and 1.28Mcps TDD - Bit 0 of 1^st^ octet of New IE Flags in HS-DSCH DATA
FRAME TYPE 2 indicates if the _Dedicated H-RNTI_ IE and the _E-RNTI_ IE is
present (1) or not (0) in the 4 octets following the _New IE Flags_ IE. Bit 1
of 1^st^ octet of New IE Flags in HS-DSCH DATA FRAME TYPE 2 indicates if the
HS-DSCH physical layer category [FDD] is present (1) or not (0) in the 5^th^
octet following the _New IE Flags_ IE.]
[FDD -- Bit 2 of the 1^st^ octet of New IE Flags in HS-DSCH DATA FRAME TYPE 2
indicates if the EI is present (1) or not (0).]
[FDD -- Bit 3 of 1^st^ New IE Flags in HS-DSCH DATA FRAME TYPE2 indicates if
SN and S/D is present (1) or not (0).]
[FDD -- Bit 4 of 1^st^ octet of New IE Flags in HS-DSCH DATA FRAME TYPE2
indicates if SN and S/D is present (1) or not (0).]
[FDD -- Bit 5 of 1^st^ octet of New IE Flags in HS-DSCH DATA FRAME TYPE 2
indicates if the FeDRX Indication is present (1) or not (0).]
[FDD -- Bit 6 of the 1^st^ octet of New IE Flags in HS-DSCH DATA FRAME TYPE 2
indicates if the NodeB Triggered HS-DPCCH Transmission (NTHT) is present (1)
or not (0).]
[FDD -- Bit 7 of the 1st octet of New IE Flags in HS-DSCH DATA FRAME TYPE 2
indicates if the 2^nd^ octet of New IE Flags in HS-DSCH DATA FRAME TYPE 2 is
present (1) or not (0), and if present, then:]
[FDD -- Bit 0 of the 2^nd^ octet of New IE Flags in HS-DSCH DATA FRAME TYPE 2
indicates if the CFN is present (1) or not (0).]
[FDD -- Bit 1 of the 2^nd^ octet of New IE Flags in HS-DSCH DATA FRAME TYPE 2
indicates if the Cell Reselection Indication (CR Ind) IE is present (1) or not
(0).]
> [FDD -- Bit 2 of the 2^nd^ octet of New IE Flags in HS-DSCH DATA FRAME TYPE
> 2 indicates if the Operation Preference of Common E-DCH resource Indication
> (OPCE Ind) is present (1) or not (0).]
[FDD - Bit 3 of the 2^nd^ octet of New IE Flags in HS-DSCH DATA FRAME TYPE 2
indicates if the HS-SCCH DRX Indication is present (1) or not (0). Bits 4
through 6 of the 2^nd^ octet of New IE Flags in HS-DSCH DATA FRAME TYPE 2
shall be set to 0.]
With respect to new IEs, for which the presence is indicated by the _New IE
Flags_ IE, the Figure 21B is an example of how a frame is structured when all
such new IEs are present. Note that non-presence of such a new IE changes the
position of all subsequent IEs on octet level.
[FDD and 1.28Mcps TDD - Field length of _Spare Extension_ IE in HS-DSCH DATA
FRAME TYPE 2 is 0-20 octets.]
[FDD -- If the received _H-RNTI_ IE sets to same value as the _BCCH Specific
HS-DSCH RNTI_ IE configured in NBAP (TS 25.433 [6]), the Node B shall ignore
_RACH Measurement Result_ IE in the frame.]
[FDD -- If the received _H-RNTI_ IE sets to same value as the _BCCH Specific
HS-DSCH RNTI Information_ IE configured in NBAP (TS 25.433 [6]), the Node B
should not calculate FACH measurement occasion for scheduling the data in the
frame.]
[FDD -- If the received _H-RNTI_ IE sets to same value as the _Common HS-DSCH
RNTI Information_ IE configured in NBAP (TS 25.433 [6]), the Node B should not
calculate FACH measurement occasion for scheduling the data in the frame.]
[FDD -- The CFN corresponding to the SFN of the frame in which the payload was
received on Uplink. If the payload was received in several frames, the CFN
corresponding to the last Uu frame in which the information was received shall
be indicated.]
[1.28Mcps TDD - If the received _H-RNTI_ IE sets to the same value as the
_BCCH Specific HS-DSCH RNTI_ IE configured in NBAP (TS 25.433 [6]), the Node B
shall ignore _RACH Measurement Result_ IE in the frame.]
[FDD and 1.28Mcps TDD -- when a UE using E-DCH for CELL_FACH and Idle is
provided with a new H-RNTI and/or a new E-RNTI signalled to the UE in the RRC
message contained in this HS-DSCH data frame, the _Dedicated H-RNTI_ IE and
the _E-RNTI_ IE contains the values to be used after successful execution of
the RRC procedure (TS 25.331 [8]). The _H-RNTI_ IE either contains the same
value as the _BCCH Specific HS-DSCH RNTI_ IE configured in NBAP (TS 25.433
[6]) or the H-RNTI currently allocated to the UE.]
7 | 6 | 5 | 4 | 3 | 2 | 1 | 0 |  | Notes in this column apply only when MUI=1 |   
---|---|---|---|---|---|---|---|---|---|---  
Header CRC | FT |  | all IEs are common for all UEs | Header |  |  |  |  |  |   
CFN |  |  |  |  |  |  |  |  |  |   
CFN (cont) | Frame Seq Nr |  |  |  |  |  |  |  |  |   
Total Num of PDU blocks | HI | FSN/DRT Reset | DRT Indicator |  | all IEs are dedicated for UE1 except _FSN/DRT Reset_ and _DRT Indicator_ |  |  |  |  |   
MAC-d/c PDU length in block 1 |  |  |  |  |  |  |  |  |  |   
M len 1 (cont) | Spare | #PDUs in block 1 |  |  |  |  |  |  |  |   
Logical CH ID block1 | M len 2 |  |  |  |  |  |  |  |  |   
MAC-d PDU length in block 2 | Spare |  |  |  |  |  |  |  |  |   
#PDUs in block2 | Logical Ch ID in block2 |  |  |  |  |  |  |  |  |   
|  |  |  |  |  |  |  |  |  |   
MAC –d PDU length in block n |  |  |  |  |  |  |  |  |  |   
M len n (cont) | Spare | #PDUs in block n |  |  |  |  |  |  |  |   
Logical CH ID block n | Padding if n is odd |  |  |  |  |  |  |  |  |   
DRT |  | all IEs are common for all UEs | Payload |  |  |  |  |  |  |   
DRT (cont) |  |  |  |  |  |  |  |  |  |   
H-RNTI |  | all IEs are dedicated for UE1 |  |  |  |  |  |  |  |   
H-RNTI (cont) |  |  |  |  |  |  |  |  |  |   
CmCH-PI | Not Used | PI |  |  |  |  |  |  |  |   
PI-bitmap |  | all IEs are common for all UEs |  |  |  |  |  |  |  |   
|  |  |  |  |  |  |  |  |  |   
PI-bitmap | Pad |  |  |  |  |  |  |  |  |   
MAC-d/c PDU 1 | First block of PDUs with the same size | all IEs are dedicated for UE1 |  |  |  |  |  |  |  |   
|  |  |  |  |  |  |  |  |  |   
MAC-d/c PDU 1 (cont) |  |  |  |  |  |  |  |  |  |   
|  |  |  |  |  |  |  |  |  |   
|  |  |  |  |  |  |  |  |  |   
MAC-d/c PDU m1 |  |  |  |  |  |  |  |  |  |   
|  |  |  |  |  |  |  |  |  |   
MAC-d/c PDU m1 (cont) |  |  |  |  |  |  |  |  |  |   
|  |  |  |  |  |  |  |  |  |   
|  |  |  |  |  |  |  |  |  |   
MAC-d/c PDU 1 | nth block of PDUs with the same size |  |  |  |  |  |  |  |  |   
|  |  |  |  |  |  |  |  |  |   
MAC-d/c PDU mn (cont) |  |  |  |  |  |  |  |  |  |   
New IE FI 7(E) | New IE FI 6 | New IE FI 5 | New IE FI 4 | New IE FI 3 | New IE FI 2 | New IE FI 1 | New IE FI 0 |  |  |   
HS-DSCH physical layer category | EI | NTHT |  |  |  |  |  |  |  |   
Spare 7-1 | MUI |  |  |  |  |  |  |  |  |   
Extended for UE2 |  | Extension for UE2 |  |  |  |  |  |  |  |   
Spare Extension |  | all IEs are common for all UEs |  |  |  |  |  |  |  |   
Payload CRC |  |  |  |  |  |  |  |  |  |   
Payload CRC (cont) |  |  |  |  |  |  |  |  |  |   
Figure 21C: HS-DSCH DATA FRAME TYPE 3 structure [FDD and 1.28Mcps TDD only]
7 | 6 | 5 | 4 | 3 | 2 | 1 | 0 |  | Notes in this column apply only when MUI=1  
---|---|---|---|---|---|---|---|---|---  
Total Num of PDU blocks | HI | Spare |  | all IEs are dedicated for UEn |  |  |  |  |   
MAC-d/c PDU length in block 1 |  |  |  |  |  |  |  |  |   
M len 1 (cont) | Spare | #PDUs in block 1 |  |  |  |  |  |  |   
Logical CH ID block1 | M len 2 |  |  |  |  |  |  |  |   
MAC-d PDU length in block 2 | Spare |  |  |  |  |  |  |  |   
#PDUs in block2 | Logical Ch ID in block2 |  |  |  |  |  |  |  |   
|  |  |  |  |  |  |  |  |   
MAC –d PDU length in block n |  |  |  |  |  |  |  |  |   
M len n (cont) | Spare | #PDUs in block n |  |  |  |  |  |  |   
Logical CH ID block n | Padding if n is odd |  |  |  |  |  |  |  |   
H-RNTI |  |  |  |  |  |  |  |  |   
H-RNTI (cont) |  |  |  |  |  |  |  |  |   
CmCH-PI | Spare |  |  |  |  |  |  |  |   
MAC-d/c PDU 1 | First block of PDUs with the same size |  |  |  |  |  |  |  |   
|  |  |  |  |  |  |  |  |   
MAC-d/c PDU 1 (cont) |  |  |  |  |  |  |  |  |   
|  |  |  |  |  |  |  |  |   
|  |  |  |  |  |  |  |  |   
MAC-d/c PDU m1 |  |  |  |  |  |  |  |  |   
|  |  |  |  |  |  |  |  |   
MAC-d/c PDU m1 (cont) |  |  |  |  |  |  |  |  |   
|  |  |  |  |  |  |  |  |   
|  |  |  |  |  |  |  |  |   
MAC-d/c PDU 1 | nth block of PDUs with the same size |  |  |  |  |  |  |  |   
|  |  |  |  |  |  |  |  |   
MAC-d/c PDU mn (cont) |  |  |  |  |  |  |  |  |   
New IE FI 7(E) | New IE FI 6 | New IE FI 5 | New IE FI 4 | New IE FI 3 | New IE FI 2 | New IE FI 1 | New IE FI 0 |  |   
HS-DSCH physical layer category | EI | NTHT |  |  |  |  |  |  |   
Spare 7-1 | MUI |  |  |  |  |  |  |  |   
Extended for UE(n+1) |  | Extension for UE(n+1) |  |  |  |  |  |  |   
Spare Extension |  |  |  |  |  |  |  |  |   
Figure 21C-1: Extended for UEn in HS-DSCH DATA FRAME TYPE 3 structure [FDD
only]
[FDD - The CFN in the HS-DSCH DATA FRAME TYPE 3 header corresponds to the Cell
SFN of the frame in which the start of the HS-SCCH frame is located. The
timing of the PICH frame (containing the paging indication information) is the
same as the HS-SCCH frame timing (TS 25.211 [5])].
[1.28Mcps TDD - In case _Total Number of PDU blocks_ IE is not set to 0, or
_Total Number of PDU blocks_ IE is set to 0 and _Paging Indication (PI) IE is
set to 0, i.e._ PI-bitmap not present in payload, the CFN in the HS-DSCH DATA
FRAME TYPE 3 header corresponds to the Cell SFN of the frame in which the
start of the HS-SCCH frame is located. The timing of the PICH frame
(containing the paging indication information) is N~GAP~ prior to the HS-SCCH
or the HS-PDSCH frame timing (TS 25.221 [4])].
[1.28Mcps TDD --In case _Total Number of PDU blocks_ IE is set to 0 and
_Paging Indication (PI) IE is set to 1, i.e._ PI-bitmap present in payload,
the CFN in the HS-DSCH DATA FRAME TYPE 3 header corresponds to the Cell SFN of
the frame in which the start of the PICH frame].
[1.28Mcps TDD - If PI-bitmap and MAC-c PDU are both transmitted within the HS-
DSCH DATA FRAME TYPE 3, the CFN is related to the MAC-c PDU only. The PI
bitmap is mapped to the PICH frames, transmitted at the beginning of the
paging block.]
[FDD and 1.28Mcps TDD - Note: The HS-SCCH frame is not sent if _HI_ IE is set
to 0, i.e. H-RNTI not present.]
[FDD - Bit 0 of New IE Flags in HS-DSCH DATA FRAME TYPE 3 indicates if the HS-
DSCH physical layer category is present (1) or not (0) in the 1^st^ octet
following the _New IE Flags_ IE. Bit 1 of New IE Flags in HS-DSCH DATA FRAME
TYPE 3 indicates if EI [FDD] is present (1) or not (0) in the 1^st^ octet
following the New IE Flags IE. Bit 2 of New IE Flags in HS-DSCH DATA FRAME
TYPE 3 indicates if NodeB Triggered HS-DPCCH Transmission (NTHT) [FDD] is
present (1) or not (0) in the 1^st^ octet following the _New IE Flags_ IE. Bit
3 of New IE Flags in HS-DSCH DATA FRAME TYPE 3 indicates if Multiple UEs
Indicator (MUI) is present (1) or not (0) in the 2^nd^ octet following the
_New IE Flags_ IE. Bits 4 through 6 of New IE Flags in HS-DSCH DATA FRAME TYPE
3 shall be set to 0.]
[FDD - Note: When MUI is used, data of number of UEs carried in one HS-DSCH
DATA FRAME TYPE 3 should be considered, in order to avoid too many UEs being
scheduled in one CFN in NodeB.]
[FDD - Field length of _Spare Extension_ IE in HS-DSCH DATA FRAME TYPE 3 is
0-30 octets.]
### 6.2.6B E-DCH Channels for CELL_FACH and Idle[FDD and 1.28Mcps TDD]
The structure of the E-DCH DATA FRAME is shown in Figure 21D. This frame
structure is used for carrying MAC-is PDUs in Cell_FACH and Idle UE state (TS
25.321 [9]) for one UE.
* * *
7 6 5 4 3 2 1 0  
Header CRC FT Frame Header  
Header CRC (cont) FSN  
Spare Number of subframes  
CFN  
E-DCH User Buffer Size (eUB Size)  
E-DCH User Buffer Size (eUB Size)  
eUB Size Spare Nr. of MAC-is SDU in frame  
Nr of MAC-is SDU in frame(cont)  
E-RNTI  
E-RNTI  
Spare 1^st^ Subframe number N of MAC-is PDUs  
Spare 2^nd^ Subframe number N of MAC-is PDUs
Spare Last Subframe number N of MAC-is PDUs  
MAC-is PDU descriptor of 1st MAC-is PDU of 1st subframe  
MAC-is PDU descriptor of 2nd MAC-is PDU of 1st subframe
MAC-is PDU descriptor of last MAC-is PDU of 1st subframe
MAC-is PDU descriptor of 1st MAC-is PDU of last subframe
MAC-is PDU descriptor of last MAC-is PDU of last subframe  
First MAC-is PDU of first subframe Frame Payload
Last MAC-is PDU of first subframe
First MAC-is PDU of last subframe
Last MAC-is PDU of last subframe  
New IE FI 7(E) New IE FI 6 New IE FI 5 New IE FI 4 New IE FI 3 New IE FI 2 New
IE FI 1 New IE FI 0  
Cell Portion LCR ID Conditional 1.28Mcps TDD  
Spare 7-2 AOA Conditional 1.28Mcps TDD  
AOA Conditional 1.28Mcps TDD  
Spare 7-5 Ext Received SYNC UL Timing Deviation Conditional 1.28Mcps TDD  
Ext received SYNC UL Timing Deviation Conditional 1.28Mcps TDD  
Spare 7-4 CRR Rec TTI length Prop. Delay FR FDD  
Propagation Delay Full Range FDD  
Spare Extension Optional  
Payload CRC  
Payload CRC (cont)
* * *
Figure 21D: E-DCH DATA FRAME structure
For the description of the fields see subclause 6.2.7.
The _Payload CRC_ IE is optional in frames that contain a Payload, i.e. the
whole 2 bytes field may or may not be present in the frame structure (this is
defined at the setup of the transport bearer). The _Payload CRC_ IE may only
be present if the E-DCH DATA FRAME contains payload.
[1.28Mcps TDD - Bit 0 of New IE Flags in E-DCH DATA FRAME indicates if the
_Cell Portion LCR ID_ IE is present (1) or not present (0).]
[1.28Mcps TDD - Bit 1 of New IE Flags in E-DCH DATA FRAME indicates if _AOA_
IE is present (1) or not present (0)]
[1.28Mcps TDD - Bit 2 of New IE Flags in E-DCH DATA FRAME indicates if _Ext
Received SYNC UL Timing Deviation_ IE is present (1) or not present (0)]
[1.28Mcps TDD -- Bits 2 through 6 of New IE Flags in E-DCH DATA FRAME shall be
set to 0.]
[FDD - Bit 0 of _New IE Flags_ IE in E-DCH DATA FRAME indicates if
_Propagation Delay Full Range_ IE is present (1) or not present (0)]
[FDD - Bit 1 of _New IE Flags_ IE in E-DCH DATA FRAME indicates if TTI length
IE is present (1) or not present (0).]
[FDD - Bit 2 of _New IE Flags_ IE in E-DCH DATA FRAME indicates if _Cell
Reselection Request Received (CRR Rec)_ IE is present (1) or not present (0).]
[FDD - Bits 3 through 6 of _New IE Flags_ IE in E-DCH DATA FRAME shall be set
to 0.]
[FDD - Field length of _Spare Extension_ IE in E-DCH DATA FRAME is 0-29
octets.]
### 6.2.7 Coding of information elements in data frames
#### 6.2.7.1 Header CRC
**Description:** Cyclic Redundancy Checksum calculated on the header of a data
frame with polynom:\ X\^7+X\^6+X\^2+1 for the 7 bit header CRC [FDD and
1.28Mcps TDD - ,X\^11+X\^9+X\^8+ X\^2+X+1 for the 11 bit header CRC].
The CRC calculation shall cover all bits in the header, starting from bit 0 in
the first byte (FT field) up to the end of the header. See subclause 7.1.
**Value range:** {0..127} [FDD and 1.28Mcps TDD -- , {0..2047} for E-DCH DATA
FRAME].
**Field length:** 7 bits [FDD and 1.28Mcps TDD - , 11 bits for E-DCH DATA
FRAME].
#### 6.2.7.2 Frame Type
**Description** : Describes if it is a control frame or a data frame.
**Value range** : {0=data, 1=control}.
**Field Length** : 1 bit.
#### 6.2.7.3 Connection Frame Number (CFN)
**Description** : Indicator as to which radio frame the first data was
received on uplink or shall be transmitted on downlink. In case a transport
bearer is used by several FACH channels with IP multicast option, the radio
frame in which the first data shall be transmitted on a FACH mapping on the
transport bearer shall be calculated according to:
CFN = (MFN -- CFN Offset) mod 256,
where:
\- MFN is the value of CFN field in the data frame;
\- CFN Offset is a FACH parameter indicated by RNC (TS 25.433 [6]).
The value range and field length depend on the transport channel for which the
CFN is used.
**Value range (PCH)** : {0..4095}.
**Value range (other)** : {0..255}.
**Field length (PCH)** : 12 bits.
**Field length (other)** : 8 bits.
#### 6.2.7.4 Transport Format Indicator
**Description** : TFI is the local number of the transport format used for the
transmission time interval. For information about what the transport format
includes see TS 25.302 [3].
**Value range** : {0..31}.
**Field length** : 5 bits.
#### 6.2.7.5 Propagation Delay [FDD]
**Description:** One-way radio interface delay as measured during RACH access.
If the measured value exceeds the range of this information element, the
information element shall be set to its maximum value, and the _Ext
Propagation Delay_ IE shall be used to represent the measured value, see
subclause 6.2.7.5A.
**Value range: {** 0..765 chips}.
**Granularity:** 3 chips.
**Field length:** 8 bits.
#### 6.2.7.5A Ext Propagation Delay [FDD]
**Description:** One-way radio interface delay as measured during RACH access,
extended value part. This IE shall be present only if the range of the
_Propagation Delay_ IE is insufficient to represent the measured value.
**Value range: {0** \- 3069 chips}, values 0 -765 are not used.
**Granularity:** 3 chips.
**Field length:** 10 bits.
#### 6.2.7.6 Rx Timing Deviation [3.84Mcps TDD]
**Description:** Measured Rx Timing Deviation as a basis for timing advance.
This value should consider measurements made in all frames and all timeslots
that contain the transport blocks in the payload. In case the _Timing Advance
Applied_ IE indicates \"No\" (see TS 25.433 [6]) in a cell, the Rx Timing
Deviation field shall be set to N = 0.
**Value range:** {-1024 .. +1023 chips}.
{N*4 --256} chips ≤ RxTiming Deviation \ With N = 128, 129, ...,319
{N*4 - 1024} chips ≤ Rx Timing Deviation \ With N = 320, 321, ...,511
**Granularity:** 4 chips.
**Field length:** 9 bits. The least significant 8 bits are contained in the RX
timing deviation field and the most significant bit is contained in the RX
timing deviation (continuation) field.
#### 6.2.7.6A Received SYNC UL Timing Deviation [1.28Mcps TDD]
**Description:** Measured Received SYNC UL Timing Deviation as a basis for
propagation delay.
**Value range:** {0, .., +255} chips
**Granularity:** 1 chip.
**Field length:** 8 bits.
#### 6.2.7.6B Rx Timing Deviation [7.68Mcps TDD]
**Description:** Measured Rx Timing Deviation as a basis for timing advance.
This value should consider measurements made in all frames and all timeslots
that contain the transport blocks in the payload. In case the _Timing Advance
Applied_ IE indicates \"No\" (see TS 25.433 [6]) in a cell, the Rx Timing
Deviation field shall be set to N = 0.
**Value range:** {-2056, ..., +2055} chips
{N*4 -2056} chips ≤ RxTiming Deviation \ [3.84Mcps TDD -- {30, 34, 60, 68, 120 and 136} Paging Indications for 2 PICH
> frames,\ {60, 68, 120, 136, 240 and 272} Paging Indications for 4 PICH
> frames].
>
> [1.28Mcps TDD -- {44, 88 and 176} Paging Indications for 2 PICH frames,\
> {88, 176 and 352} Paging Indications for 4 PICH frames].
>
> [7.68Mcps TDD -- {30, 34, 60, 68, 120 and 136} Paging Indications for 2 PICH
> frames,\ {60, 68, 120, 136, 240 and 272} Paging Indications for 4 PICH
> frames,\ ............. {120, 136, 240, 272, 480 and 544} Paging Indications
> for 8 PICH frames].
**Field length:** [FDD - 3, 5, 9 or 18 bytes (the PI-bitmap field is padded at
the end up to an octet boundary)].
> [3.84Mcps TDD -- 4, 5, 8, 9, 15, 17, 30 or 34 bytes (the PI-bitmap field is
> padded at the endup to an octet boundary)].
>
> [1.28Mcps TDD -- 6, 11, 22 or 44 bytes (the PI-bitmap field is padded at the
> endup to an octet boundary)].
>
> [7.68Mcps TDD -- 4, 5, 8, 9, 15, 17, 30, 34, 60 or 68 bytes (the PI-bitmap
> field is padded at the end up to an octet boundary)].
#### 6.2.7.13 Rx Timing Deviation on RACH [3.84Mcps TDD]
Void.
#### 6.2.7.14 PDSCH Set Id [TDD]
**Description** : A pointer to the PDSCH Set which shall be used to transmit
the DSCH DATA FRAME over the radio interface.
**Value range** : {0..255}.
**Field length** : 8 bits.
#### 6.2.7.15 Code Number [FDD]
Void.
#### 6.2.7.16 Spreading Factor (SF) [FDD]
Void.
#### 6.2.7.17 Power Offset [FDD]
Void.
#### 6.2.7.18 MC Info [FDD]
Void.
#### 6.2.7.19 Spare Extension
**Description** : Indicates the location where new IEs can in the future be
added in a backward compatible way.
**Field length** : 0-32 octets.
#### 6.2.7.20 Quality Estimate (QE) [TDD]
**Description** : The quality estimate is derived from the Transport channel
BER.
If the USCH FP frame includes TB\'s for the USCH then the QE is the Transport
channel BER for the selected USCH. If no Transport channel BER is available
the QE shall be set to 0.
The quality estimate shall be set to the Transport channel BER and be measured
in the units TrCH_BER_LOG respectively (see TS 25.433 [6]). The UL Outer Loop
Power Control may use the quality estimate.
**Value range** : {0..255}.
**Granularity:** 1.
**Field length:** 8 bits.
#### 6.2.7.21 Common Transport Channel Priority Indicator (CmCH-PI)
**Description:** CmCH-PI, configured via the Scheduling Priority Indicator in
NBAP (TS 25.433 [6]), is the relative priority of the data frame and the SDUs
included.
**Value range:** {0-15, where 0=lowest priority, 15=highest priority}.
**Field length:** 4 bits.
#### 6.2.7.22 User Buffer Size
**Description:** Indicates the users\' buffer size (i.e. the amount of data in
the buffer) in octets for a given Common Transport Channel Priority Indicator
level.
**Value range:** {0-65535}.
**Field length:** 16 bits.
#### 6.2.7.23 MAC-d PDU Length
**Description:** The value of that field indicates the length of every MAC-d
PDU in the payload of the HS-DSCH DATA FRAME in number of bits.
**Value range:** {0-5000}.
**Field Length:** 13 bits.
#### 6.2.7.24 NumOfPDU
**Description:** Indicates the number of MAC-d PDUs in the payload.
**Value range:** {1-255}.
**Field Length:** 8 bits.
#### 6.2.7.25 MAC-d PDU
**Description:** A MAC-d PDU contains the MAC-d PDU as defined in TS 25.321
[9].
**Field length:** See the value of the _MAC-d PDU Length_ IE.
#### 6.2.7.26 Cell Portion ID [FDD]
**Description:** Cell Portion ID indicates the cell portion with highest SIR
during RACH access. Cell Portion ID is configured by O&M.
**Value range:** {0-63}.
**Field Length:** 6 bits.
#### 6.2.7.27 New IE Flags
**Description:** The _New IE Flags_ IE is only present if at least one new IE
is present. The _New IE Flags_ IE contains flags indicating which new IEs that
are present following the _New IE Flags_ IE. The last bit position of the _New
IE Flags_ IE is used as the Extension Flag to allow the extension of the _New
IE Flags_ IE in the future. Extension octets of the _New IE Flags_ IE shall
follow directly after the first octet of the _New IE Flags_ IE. When an
extension octet of the _New IE Flags_ IE is present, then all previous
extension octets of the _New IE Flags_ IE and the _New IE Flags_ IE shall also
be present, even if they have all their flag bits indicating no presence of
their respective new IEs.
**Value range:**
Bit 0-6 of each octet: Indicates if a new IE is present (1) or not present (0)
in the bytes following the _New IE Flags_ IE. The meaning of each bit is
explained in the corresponding DATA FRAME subclause;
Bit 7 of each octet: Indicates if an extension octet of the _New IE Flags_ IE
follows (1) or not (0).
**Field length:** 1 -- 31 octets.
#### 6.2.7.28 Flush
**Description:** Indicates whether the DRNS should remove (1) or not (0) all
the MAC-d PDUs from the corresponding MAC-hs Priority Queue that have been
received prior to this data frame HS-DSCH DATA FRAME on the same transport
bearer.
**Value range:** {0 = no flush, 1 = flush}.
**Field Length:** 1 bit.
#### 6.2.7.29 DRT (Delay Reference Time)
**Description:** _DRT_ is a 16-bit _Delay Reference Time. DRT_ can be used for
dynamic delay measurements. The _DRT_ counter bridges the same time span as
RFN and BFN. _DRT_ is locked to RFN in SRNC and is a 40960 counter with 1 ms
resolution.
**Value range** : {0..40959~DEC~ ms (0..9FFF~HEX~ ms)}.
**Granularity:** 1 ms.
**Field length:** 16 bits.
#### 6.2.7.30 Frame Sequence Number
**Description:** The 4-bit _Frame Sequence Number_ (FSN) is incremented for
each transmitted HS‑DSCH data frame belonging to one MAC-d flow [FDD and
1.28Mcps TDD -- , common MAC flow or E-DCH DATA FRAME belonging to one E-DCH
data flow for CELL_FACH and Idle]. At wraparound of the Frame Sequence Number,
the value \"0\" shall not be used. Each flow generates its own Frame Sequence.
**Value range:**
0 is a special value and indicates that the _Frame Sequence Number_ IE shall
be treated as spare.
1 -- 15 indicates the Frame Sequence Number.
**Granularity:** 1.
**Field length:** 4 bits.
#### 6.2.7.31 Logical Channel ID in block n
**Description:** This field provides identification of the logical channel
instance associated with the PDUs of the n-th _block of PDUs with the same
size_ in the HS-DSCH DATA FRAME TYPE 2 [FDD and 1.28Mcps TDD -- and TYPE 3].
Multiple logical channels may be carried on the same MAC-d flow [FDD and
1.28Mcps TDD -- , Common MAC flow or Paging MAC flow].
**Value range:** {0-15}, where 0-14 identifies logical channels 1-15, 15
identifies BCCH or PCCH logical channel mapped on HS-DSCH.
**Field length:** 4 bits.
#### 6.2.7.32 Total Number of PDU blocks
**Description:** The field indicates the number of blocks of _block of_ _PDUs
with the same size_ in this HS-DSCH DATA FRAME. In HS-DSCH DATA FRAME TYPE3,
the field indicates the number of blocks of _block of PDUs with the same size_
per UE, if MUI is set.
**Value range:** {0-31}, 0 only for 1.28Mcps TDD HS-DSCH DATA FRAME TYPE 3.
**Field length:** 5 bits.
#### 6.2.7.33 MAC-d/c PDU Length in block n
**Description:** The value of this field indicates the length of every MAC-d
PDU [FDD and 1.28Mcps TDD - or MAC-c PDU] in the n-th _block of PDUs with the
same size_ in number of octets.
**Value range:** {0-1505}, 0 -- not used.
**Field length:** 11 bits.
#### 6.2.7.34 Number of MAC-d/c PDUs in block n (#PDUs in block n)
**Description:** Indicates the number of MAC-d PDUs [FDD and 1.28Mcps TDD - or
MAC-c PDUs] in the n-th _block of PDUs with the same size_.
**Value range:** {0-15}, 0 -- not used.
**Field length:** 4 bits.
#### 6.2.7.35 DRT Indicator
**Description:** Indicates whether a DRT is present.
**Value range:** {0 = DRT not present, 1= DRT present}.
**Field length:** 1 bit.
#### 6.2.7.36 FACH Indicator (FI) [FDD and 1.28Mcps TDD]
**Description:** Indicates whether an H-RNTI and a RACH Measurement Result are
present (i.e. whether UE in CELL_FACH).
**Value range:** {0 = H-RNTI and RACH Measurement Result not present, 1=
H-RNTI and RACH Measurement Result present}.
**Field length:** 1 bit.
#### 6.2.7.37 H-RNTI [FDD and 1.28Mcps TDD]
**Description:** H-RNTI is defined in TS 25.401 [11]. The field identifies an
UE having a HS-PDSCH assignment within a cell [FDD and 1.28Mcps TDD - or has
the same value as the _BCCH Specific HS-DSCH RNTI_ IE configured in TS 25.433
[6]].
**Value range:** {0-65535}, 0 -- not used.
**Field length:** 16 bits.
#### 6.2.7.38 RACH Measurement Result [FDD and 1.28Mcps TDD]
**Description:** [FDD - This field indicates the values received in RACH
Measurement. The type of the measured value in the field is configured via
NBAP (TS 25.433 [6])]. [1.28Mcps TDD - This field indicats the pathloss value
(in dB) calculated based on the _Primary CCPCH RSCP_ IE in the measurement
result on RACH according to the formula in TS 25.331 [8].]
**Value range:** [FDD - {0-158, 255}
255 is a special value for FDD and indicates that the Node B may ignore the
RACH Measurement Results IE.]
[1.28Mcps TDD - {0-112}
Note: The value "0" of the IE corresponds to the pathloss value of "46", the
value "1" corresponds to the pathloss value of "47",..., the value "112"
corresponds to the pathloss value of "158".]
**Field length:** [FDD - 8 bits].
> [1.28Mcps TDD - 7 bits (Bit 7 of the RACH Measurement Result field is not
> used)].
#### 6.2.7.39 H-RNTI Indicator (HI) [FDD and 1.28Mcps TDD]
**Description:** Indicates whether an H-RNTI and a CmCH-PI are present.
**Value range:** {0 = H-RNTI and CmCH-PI not present, 1= H-RNTI and CmCH-PI
present}.
**Field length:** 1 bit.
#### 6.2.7.40 FSN/DRT Reset
**Description:** When the Node B receives a HS-DSCH DATA FRAME where the 1-bit
_FSN/DRT Reset_ IE is set to 1, the Node B should reset any state of
congestion estimation based on previously received FSN and DRT values. Node B
may instead decide to start a new estimation of congestion detection initiated
with the FSN and DRT values included in this HS-DSCH data frame. _FSN/DRT
Reset_ IE set to 1 may indicate a discontinuity in the sequence of the
transmitted DRT and FSN values in the transmitted HS‑DSCH data frames
belonging to the associated MAC-d flow.
If the 1-bit _FSN/DRT Reset_ IE is set to 0, Node B may use the included DRT
and FSN values for congestion detection.
**Value range:**
0 Node B may use the included DRT and FSN values for congestion detection.
1 Node B should not use previously received FSN and DRT values for congestion
detection.
**Field length:** 1 bit.
#### 6.2.7.41 MAC-d/c PDU
**Description:** A MAC-d/c PDU contains the MAC-ehs SDU as defined in TS
25.321 [9].
**Field length:** For length of MAC-d/c PDU of block n, see the value of the
_MAC-d/c PDU length in block n_ IE.
#### 6.2.7.42 AOA (Angle of Arrival) [1.28Mcps TDD]
**Description:** This filed indicates the angle of arrival information of UE
measured by Node B.
**Value range:** {0-719}
**Field length:** 10 bit.
#### 6.2.7.43 Ext Received SYNC UL Timing Deviation [1.28Mcps TDD]
**Description:** Measured Received SYNC UL Timing Deviation as a basis for
propagation delay.
**Value range:** {0, .., +1023} chips
**Granularity:** 1/8 chip.
**Field length:** 13 bits.
#### 6.2.7.44 Number of Subframes [FDD and 1.28Mcps TDD]
**Description:** The _Number of Subframes_ field indicates how many subframes
that follows in the frame. [1.28Mcps TDD -- This will always be set to \"1\".]
NOTE: A subframe has both a header portion and a payload portion in the frame.
**Value range:** {1-16}
The binary coding is derived from the value minus 1. E.g. value 1 is coded as
binary \"0000\" and value 16 is coded as binary \"1111\".
Values {11, 12, 13, 14, 15, 16}: Reserved in this user plane revision. Shall
be ignored by the receiver.
**Field length:** 4 bits.
#### 6.2.7.45 Number of MAC-is SDU in frame [FDD and 1.28Mcps TDD]
**Description:** Total number of MAC-is SDUs in all MAC-is PDUs in the E-DCH
DATA FRAME.
**Value range:** {0-4095}.
**Field length:** 12 bits.
#### 6.2.7.46 Number of MAC-is PDUs [FDD and 1.28Mcps TDD]
**Description:** Indicates the number of MAC-is PDUs in the user data frame in
the payload part for the corresponding subframe number.
**Value range** : {0-15}
**Field length** : 4 bits.
#### 6.2.7.47 Subframe Number [FDD and 1.28Mcps TDD]
**Description:** Indicates the subframe number in which the payload was
received. [1.28 Mcps TDD -- This will be set to {0-1}.]
**Value range:** {0-4}
**Field length:** 3 bits.
#### 6.2.7.48 E-DCH User Buffer Size [FDD and 1.28Mcps TDD]
**Description:** Indicates the the total size of the E-DCH DATA FRAME in
octets
**Value range: {0-262 140}**
**Field length:** 18 bits.
#### 6.2.7.49 E-RNTI [FDD and 1.28Mcps TDD]
**Description:** E-RNTI is defined in TS 25.401 [11].
In the E-DCH DATA FRAME: the field identifies a UE having an E-DCH assignment
within a cell or the allocated E-RNTI to a UE requesting E-DCH resources for
CELL_FACH and Idle in a cell.
In HS-DSCH DATA FRAME TYPE 2: E-RNTI identifies the UE using E-DCH in
Cell_FACH and Idle state.
**Value range:** {0-65535}, 0 -- not used.
**Field length:** 16 bits.
#### 6.2.7.50 MAC-is PDU descriptor [FDD and 1.28Mcps TDD]
**Description:** The _MAC-is PDU descriptor_ contains the Length (L), Logical
channel identifier (LCH-ID) and Flag (F) fields mapped directly from the
\"MAC-i Header n\" field (n>0) received over the Uu (TS 25.321 [9]).
**Field length:** variable; length of _MAC-is PDU descriptor_ in octets = 2 *
number of MAC-is SDU contained in the corresponding MAC-is PDU as described in
TS 25.321 [9].
#### 6.2.7.51 Dedicated H-RNTI [FDD and 1.28Mcps TDD]
**Description:** _Dedicated H-RNTI_ identifies the H-RNTI for a UE using E-DCH
in Cell_FACH and Idle state. H-RNTI is defined in TS 25.401 [11].
**Value range:** {0-65535}, 0 -- not used.
Field length: 16 bits
#### 6.2.7.52 eDRX Indication [FDD]
**Description:** Indicates whether the UE in Cell_FACH state supports Enhanced
UE DRX or not.
**Value range:** {0 = Enhanced UE DRX not supported, 1= Enhanced UE DRX
supported}.
Field length: 1 bit.
#### 6.2.7.53 HS-DSCH physical layer category [FDD]
**Description:** HS-DSCH physical layer category is defined in TS 25.306 [12].
The value of the field identifies the HS-DSCH physical layer category number
of the UE, which is not applicable to the case that the _H-RNTI_ IE sets to
the same value as the _BCCH Specific HS-DSCH RNTI_ IE.
**Value range:** {1 - 63}, where the valid values are defined in TS 25.306
[12].
**Field length:** 6 bit.
#### 6.2.7.54 Cell Portion LCR ID [1.28Mcps TDD]
**Description:** Cell Portion LCR ID indicates the cell portion with best
received quality during RACH access. Cell Portion LCR ID is configured by O&M.
**Value range:** {0-255}.
**Field Length:** 8 bits.
#### 6.2.7.55 TS0 Indication [1.28Mcps TDD]
**Description:** Indicates whether the UE supports TS0 enhancement or not.
**Value range:** {0 = Enhanced TS0 not supported, 1= Enhanced TS0 supported}.
**Field length:** 1 bit.
#### 6.2.7.56 Enhanced HS-SCCH support indicator (EI) [FDD]
**Description:** Indicates whether the UE in Cell_FACH state supports enhanced
different HS-SCCHs in consecutive TTIs support or not.
**Value range:** {0 = Enhanced different HS-SCCHs in consecutive TTIs not
supported, 1= Enhanced different HS-SCCHs in consecutive TTIs supported}.
**Field length:** 1 bit.
#### 6.2.7.57 MU-MIMO Indication(MI) [1.28Mcps TDD]
**Description:** Indicates whether the UE in Cell_FACH state supports MU-MIMO
or not.
**Value range:** {0 = MU-MIMO not supported, 1= MU-MIMO supported}.
**Field length:** 1 bit.
#### 6.2.7.58 Propagation Delay Full Range [FDD]
**Description** : One-way radio interface delay as measured during random
access on Common E-DCH.
**Value range** : {0..3069 chips}.
**Granularity** : 3 chips.
**Field length** : 10 bits.
#### 6.2.7.59 CPC Recovery (CPC Recov) [FDD]
**Description** : Describes if UE is CPC non-uniform related to HS-SCCH order
and CPC recovery is needed in the serving Node-B. It indicates that the
dynamic DTX/DRX (de)activation using HS-SCCH order is needed.
**Value range** : {0=no Recovery, 1=Recovery}.
**Field Length** : 1 bit.
Note: This is not applicable when HS-SCCH order is not used.
#### 6.2.7.60 FeDRX Indication [FDD]
**Description** : Indicates whether the UE in Cell_FACH state supports Further
Enhanced UE DRX or not.
**Value range** : {0 = Further Enhanced UE DRX not supported, 1= Further
Enhanced UE DRX supported}.
**Field length** : 1 bit.
#### 6.2.7.61 NodeB Triggered HS-DPCCH Transmission(NTHT) [FDD]
**Description** : Indicates whether the UE in Cell_FACH and CELL_PCH state
supports NodeB Triggered HS-DPCCH Transmission or not.
**Value range** : {0 = NodeB Triggered HS-DPCCH Transmission not supported, 1=
NodeB Triggered HS-DPCCH Transmission supported}.
**Field length** : 1 bit.
#### 6.2.7.62 TTI length [FDD]
**Description** : Indicates which type of TTI length UE in Cell_FACH and Idle
state is in use for 2ms/10ms concurrent deployment.
**Value range** : {0 = 2ms, 1= 10ms}.
**Field length** : 1 bit.
#### 6.2.7.63 SN, Frame Number
**Description** : SN is a sequence number assigned to each HS-DSCH data frame
by RNC and can be used by Node B to identify the set of MAC-d PDU's sent in
the frame. This is also used by RNC to indicate the HS-DSCH data frame that
the Node B can discard.
**Value range** : {0.. 32767}.
**Field length** : 15 bits.
#### 6.2.7.64 S/D, Store/Discard indicator
**Description** : The S/D indicator indicates if Node B can store or discard
data associated with SN (See section 6.2.7.63).
**Value range** : {0 = Discard data associated with SN, 1 = Store and
associate MAC-d PDUs in frame with SN}.
**Field length** : 1 bit.
#### 6.2.7.65 CR Ind (Cell Reselection Indication)
**Description** : Indicates that the Node B may release the common E-DCH
resource due to a cell reselection indication.
**Value range** : {0 = Release common E-DCH resource not permitted due to a
cell reselection indication, 1 = Release common E-DCH resource permitted due
to a cell reselection indication.}
**Field length** : 1 bit.
#### 6.2.7.66 CRR Rec (Cell Reselection Request Received)
**Description** : Indicates that the Node B has received Cell Reselection
Request from UE or not.
**Value range** : {0 = Cell Reselection Request from UE not received, 1 = Cell
Reselection Request from UE received}.
**Field length** : 1 bit.
#### 6.2.7.67 Multiple UEs Indicator (MUI) [FDD]
**Description** : The MUI indicates there is another UE's MAC-d/c PDUs
(Extended for UEn) followed in below octets. MUI=0, indicates no other UE's
MAC-d/c PDUs is followed. MUI=1 in Extended for UE(n-1) indicates nth UE's
MAC-d/c PDUs (Extended for UEn) is followed.
**Value range** : {0 = No other UE's MAC-d/c PDUs followed, 1 = there is
another UE's MAC-d/c PDUs followed}.
**Field length** : 1 bit.
#### 6.2.7.68 Extended for UEn [FDD]
**Description** : The Extended for UEn is used to carry another UE's data in
same HS-DSCH DATA FRAME TYPE3 in case of MUI =1 is indicated in previous UE's
New IE flags. All IEs included in _Extended for UEn_ are defined in subclause
6.2.6A Figure21C-1.
#### 6.2.7.69 Operation Preference of Common E-DCH resource Indication (OPCE
Ind) [FDD]
**Description** : The OPCE Ind indicates there is a preference for the Node B
to trigger acquisition of the common E-DCH resource or to release the
allocated common E-DCH resource for the particular UE. In case of NTHT is not
set or set to zero, the OPCE Ind bit is not used.
**Value range** : {0 = Preference to release the allocated common E-DCH
resource, 1 = Preference to trigger acquisition of the common E-DCH resource}.
**Field length** : 1 bit.
#### 6.2.7.70 HS-SCCH DRX Indication [FDD]
**Description:** Indicates whether the UE in Cell_FACH state supports HS-SCCH
DRX or not.
**Value range:** {0 = HS-SCCH DRX not supported, 1= HS-SCCH DRX DRX
supported}.
Field length: 1 bit.
## 6.3 Control frame structure
### 6.3.1 Introduction
The Common Control Channel control frames are used to transport control
information between the CRNC and the Node B. Figure 22 defines the Control
Frame structure for common transport channels.
* * *
7 6 5 4 3 2 1 0  
Frame CRC FT Header (2 bytes)  
Control Frame Type  
Control Information Payload (variable length)
Control Information (cont)
* * *
Figure 22: Iub Common Transport Channel Control Frame Format
The structure of the header and the payload of the control frames is defined
in the following subclauses.
### 6.3.2 Coding of information elements of the Control frame header
#### 6.3.2.1 Frame CRC
**Description:** Cyclic Redundancy Checksum calculated on a control frame with
polynom:\ X\^7+X\^6+X\^2+1.
The CRC calculation shall cover all bits in the control frame, starting from
bit 0 in the first byte (FT field) up to the end of the control frame. See
subclause 7.1.
**Value range:** {0..127}.
**Field length:** 7 bits.
#### 6.3.2.2 Frame Type (FT)
Refer to subclause 6.2.7.2.
#### 6.3.2.3 Control Frame Type
**Description:** Indicates the type of the control information (information
elements and length) contained in the payload.
**Value:** Values of the Control Frame Type parameter are defined in table 2.
Table 2
* * *
Type of control frame Value OUTER LOOP POWER CONTROL 0000 0001 TIMING
ADJUSTMENT 0000 0010 DL SYNCHRONISATION 0000 0011 UL SYNCHRONISATION 0000 0100
Reserved Value 0000 0101 DL NODE SYNCHRONISATION 0000 0110 UL NODE
SYNCHRONISATION 0000 0111 DYNAMIC PUSCH ASSIGNMENT 0000 1000 TIMING ADVANCE
0000 1001 HS-DSCH Capacity Request 0000 1010 HS-DSCH Capacity Allocation TYPE
1 0000 1011 HS-DSCH Capacity Allocation TYPE 2 0000 1100 HS-DSCH UL
Synchronization Establishment Failure (1.28Mcps TDD only) 0000 1101 HS-DSCH
PDU Drop Indication 0000 1110
* * *
**Field Length:** 8 bits.
The \"Reserved Value\" for the _Control Frame Type_ IE shall not be used by
the SRNC. A control frame whose _Control Frame Type_ IE is set to the
\"Reserved Value\" shall be ignored by the Node B.
### 6.3.3 Payload structure and information elements
#### 6.3.3.1 TIMING ADJUSTMENT
##### 6.3.3.1.1 Payload Structure
Figures 23 and 24 shows the structure of the payload when control frame is
used for the timing adjustment.
* * *
7 6 5 4 3 2 1 0 Number of bytes  
CFN 1 Payload  
ToA 1  
ToA (cont) 1  
Spare Extension 0-32
* * *
Figure 23: TIMING ADJUSTMENT payload structure (non-PCH transport bearers)
* * *
7 6 5 4 3 2 1 0 Number of bytes  
CFN 1 Payload  
CFN(cont) Not Used 1  
ToA 1  
ToA (cont) 1  
ToA(cont) Not Used 1  
Spare Extension 0-32
* * *
Figure 24: TIMING ADJUSTMENT payload structure (PCH transport bearer)
##### 6.3.3.1.2 CFN
Refer to subclause 6.2.7.3.
##### 6.3.3.1.3 Time of arrival (ToA)
**Description:** Time difference between the arrival of the DL frame with
respect to TOAWE (based on the CFN in the frame). The value range and field
length depend on the transport channel for which the CFN is used.
**Value range (PCH):** {-20480ms, +20479.875ms}.
**Value range (other):** {-1280ms, +1279.875ms}.
**Granularity:** 125μs.
**Field length (PCH):** 20 bits.
**Field length (other):** 16 bits.
##### 6.3.3.1.4 Spare Extension
**Description** : Indicates the location where new IEs can in the future be
added in a backward compatible way.
**Field length** : 0-32 octets.
#### 6.3.3.2 DL SYNCHRONISATION
##### 6.3.3.2.1 Payload Structure
Figures 25 and 26 shows the structure of the payload when control frame is
used for the user plane synchronisation.
* * *
7 6 5 4 3 2 1 0 Number of bytes  
CFN 1 Payload  
Spare Extension 0-32
* * *
Figure 25: DL SYNCHRONISATION payload structure (non-PCH transport bearers)
* * *
7 6 5 4 3 2 1 0 Number of bytes  
CFN 1 Payload  
CFN(cont) Not Used 1  
Spare Extension 0-32
* * *
Figure 26: DL SYNCHRONISATION payload structure (PCH transport bearers)
##### 6.3.3.2.2 CFN
Refer to subclause 6.2.7.3.
##### 6.3.3.2.3 Spare Extension
Refer to subclause 6.3.3.1.4.
#### 6.3.3.3 UL SYNCHRONISATION
##### 6.3.3.3.1 Payload Structure
Figures 27 and 28 shows the structure of the payload when the control frame is
used for the user plane synchronisation (UL).
* * *
7 6 5 4 3 2 1 0 Number of bytes  
CFN 1 Payload  
ToA 1  
ToA (cont) 1  
Spare Extension 0-32
* * *
Figure 27: UL SYNCHRONISATION payload structure (non-PCH transport bearers)
* * *
7 6 5 4 3 2 1 0 Number of bytes  
CFN 1 Payload  
CFN(cont) Not Used 1  
ToA 1  
ToA (cont) 1  
ToA(cont) Not Used 1  
Spare Extension 0-32
* * *
Figure 28: UL SYNCHRONISATION payload structure (PCH transport bearers)
##### 6.3.3.3.2 CFN
Refer to subclause 6.2.7.3.
##### 6.3.3.3.3 Time of Arrival (TOA)
Refer to subclause 6.3.3.1.3.
##### 6.3.3.3.4 Spare Extension
Refer to subclause 6.3.3.1.4.
#### 6.3.3.4 DL NODE SYNCHRONISATION
##### 6.3.3.4.1 Payload Structure
The payload of the DL Node synchronisation control frames is shown in figure
29.
* * *
7 6 5 4 3 2 1 0 Number of bytes  
T1 1 Payload  
T1 (cont) 1  
T1 (cont) 1  
Spare Extension 0-32
* * *
Figure 29: DL NODE SYNCHRONISATION payload structure
##### 6.3.3.4.2 T1
**Description:** RNC specific frame number (RFN) that indicates the time when
RNC sends the frame through the SAP to the transport layer.
**Value range:** {0 .. 40959.875 ms}.
**Granularity:** 0.125ms.
**Field length** : 24 bits.
##### 6.3.3.4.3 Spare Extension
Refer to subclause 6.3.3.1.4.
#### 6.3.3.5 UL NODE SYNCHRONISATION
##### 6.3.3.5.1 Payload Structure
The payload of the UL Node synchronisation control frames is shown in figure
30.
* * *
7 6 5 4 3 2 1 0 Number of bytes  
T1 1 Payload  
T1 (cont) 1  
T1 (cont) 1  
T2 1  
T2 (cont) 1  
T2 (cont) 1  
T3 1  
T3 (cont) 1  
T3 (cont) 1  
Spare Extension 0-32
* * *
Figure 30: UL NODE SYNCHRONISATION payload structure
##### 6.3.3.5.2 T1
**Description:** T1 timer is extracted from the correspondent DL Node
synchronisation control frame.
**Value range:** {0 .. 40959.875 ms.}
**Granularity:** 0.125ms.
**Field length** : 24 bits.
##### 6.3.3.5.3 T2
**Description:** Node B specific frame number (BFN) that indicates the time
when Node B received the correspondent DL synchronisation frame through the
SAP from the transport layer.
**Value range:** {0 .. 40959.875 ms}.
**Granularity:** 0.125ms.
**Field length** : 24 bits.
##### 6.3.3.5.4 T3
**Description:** Node B specific frame number (BFN) that indicates the time
when Node B sends the frame through the SAP to the transport layer.
**Value range:** {0 .. 40959.875 ms}.
**Granularity:** 0.125ms.
**Field length** : 24 bits.
##### 6.3.3.5.5 Spare Extension
Refer to subclause 6.3.3.1.4.
#### 6.3.3.6 DYNAMIC PUSCH ASSIGNMENT [TDD]
##### 6.3.3.6.1 Payload structure
The payload of the Dynamic PUSCH Assignment control frames is shown in figure
31.
* * *
7 6 5 4 3 2 1 0  
PUSCH Set Id Payload (3 bytes)  
Activation CFN  
Duration
* * *
Figure 31: DYNAMIC PUSCH ASSIGNMENT payload structure
##### 6.3.3.6.2 PUSCH Set Id
**Description:** Identifies a PUSCH Set from the collection of PUSCH Sets
which have been pre-configured in the Node B, for the respective cell in which
the USCH exists. The PUSCH Set Id is unique within a cell.
**Value range:** {0..255}.
**Field length** : 8 bits.
##### 6.3.3.6.3 Activation CFN
**Description:** Activation CFN, specifies the Connection Frame Number where
the allocation period of that PUSCH Set starts.
**Value range:** Integer {0..255}.
**Field length** : 8 bits.
##### 6.3.3.6.4 Duration
**Description:** Indicates the duration of the activation period of the PUSCH
Set, in radio frames.
**Value range:** 0..255 means: 0 to 255 radio frames, i.e. 0 to 2550 msec.
**Field length:** 8 bits.
#### 6.3.3.7 DSCH TFCI SIGNALLING [FDD]
##### 6.3.3.7.1 Payload structure
Void.
##### 6.3.3.7.2 TFCI (field 2)
Void.
##### 6.3.3.7.3 Spare Extension
Void.
#### 6.3.3.8 TIMING ADVANCE [3.84Mcps and 7.68Mcps TDD]
##### 6.3.3.8.1 Payload structure
Figure 33 shows the structure of the payload when the control frame is used
for timing advance.
* * *
7 6 5 4 3 2 1 0 Number of Octets  
CFN 1 Payload  
Spare TA 1  
Spare Extension 0-32
* * *
Figure 33: TIMING ADVANCE payload structure
##### 6.3.3.8.2 CFN
Refer to subclause 6.2.7.3.
##### 6.3.3.8.3 TA [3.84 Mcps]
**Description:** UE applied UL timing advance adjustment.
**Value range:** {0 .. 252 chips}.
**Granularity:** 4 chips.
**Field length** : 6 bits.
##### 6.3.3.8.3A TA [7.68 Mcps]
**Description:** UE applied UL timing advance adjustment.
**Value range:** {0 .. 508 chips}.
**Granularity:** 4 chips.
**Field length** : 7 bits.
##### 6.3.3.8.4 Spare Extension
Refer to subclause 6.3.3.1.4.
#### 6.3.3.9 OUTER LOOP POWER CONTROL [1.28 Mcps TDD]
##### 6.3.3.9.1 Payload structure
Figure 34 shows the structure of the payload when control frame is used for
the UL outer loop power control.
* * *
7 6 5 4 3 2 1 0 Number of Octets  
UL_SIR_TARGET 1 Payload  
Spare Extension 0-32
* * *
Figure 34: Structure of the payload for OUTER LOOP PC control frame
##### 6.3.3.9.2 SIR Target
**Description** : Value (in dB) of the SIR target to be used by the UL inner
loop power control.
SIR Target is given in the unit UL_SIR_TARGET where:
UL_SIR_TARGET = 000 SIR Target = -8.2 dB
UL_SIR_TARGET = 001 SIR Target = -8.1 dB
UL_SIR_TARGET = 002 SIR Target = -8.0 dB
...
UL_SIR_TARGET = 254 SIR Target = 17.2 dB
UL_SIR_TARGET = 255 SIR Target = 17.3 dB
**Value range** : {-8.2 .. 17.3 dB}.
**Granularity:** 0.1 dB.
**Field length** : 8 bits.
##### 6.3.3.9.3 Spare Extension
Refer to subclause 6.3.3.1.4.
#### 6.3.3.10 HS-DSCH CAPACITY REQUEST
* * *
7 6 5 4 3 2 1 0 Number of Bytes  
Spare bits 7-4 CmCH-PI 1 Payload  
User Buffer Size 1  
User Buffer Size (cont) 1  
Spare Extension 0-32
* * *
Figure 35: CAPACITY REQUEST payload structure
The HS-DSCH CAPACITY REQUEST control frame is sent for each priority group to
indicate the user buffer size. The control frame is sent by the CRNC when the
CRNC considers the user buffer status needs an increased buffer reporting
frequency. This may be sent to signal an event, such as, data arrival or user-
buffer discard. This control frame is used to improve user-buffer reporting
above the level produced by the user-buffer reporting associated with the HS-
DSCH DATA FRAMEs.
##### 6.3.3.10.1 Common Transport Channel Priority Indicator (CmCH-PI)
Refer to subclause 6.2.7.21.
##### 6.3.3.10.2 User Buffer Size
Refer to subclause 6.2.7.22.
##### 6.3.3.10.3 Spare Extension
Refer to subclause 6.3.3.1.4.
#### 6.3.3.11 HS-DSCH CAPACITY ALLOCATION
Two types of HS-DSCH CAPACITY ALLOCATION exist for the HS-DSCH capacity
allocation, i.e. HS-DSCH CAPACITY ALLOCATION TYPE 1 Control Frame and HS-DSCH
CAPACITY ALLOCATION TYPE 2 Control Frame.
+---------------------------------+-------------------+---------+---+---+---+---+---+ | 7 | 6 | 5 | 4 | 3 | 2 | 1 | 0 | +---------------------------------+-------------------+---------+---+---+---+---+---+ | Spare bits | Congestion Status | CmCH-PI | | | | | | | | | | | | | | | | 7-6 | | | | | | | | +---------------------------------+-------------------+---------+---+---+---+---+---+ | Maximum MAC-d PDU Length | | | | | | | | +---------------------------------+-------------------+---------+---+---+---+---+---+ | Maximum MAC-d PDU Length (cont) | HS-DSCH Credits | | | | | | | +---------------------------------+-------------------+---------+---+---+---+---+---+ | HS-DSCH Credits (cont) | | | | | | | | +---------------------------------+-------------------+---------+---+---+---+---+---+ | HS-DSCH Interval | | | | | | | | +---------------------------------+-------------------+---------+---+---+---+---+---+ | HS0DSCH Repetition Period | | | | | | | | +---------------------------------+-------------------+---------+---+---+---+---+---+ | Spare Extension | | | | | | | | +---------------------------------+-------------------+---------+---+---+---+---+---+
Figure 36: CAPACITY ALLOCATION TYPE 1 payload structure
The CAPACITY ALLOCATION TYPE 1 Control Frame describes an allocation that the
CRNC may use. When the _HS-DSCH Credits_ IE has a value of 0 it signifies that
there is no resources allocated for transmission and to thus stop
transmission. When the _HS-DSCH Credits_ IE has a value of 2047, it signifies
unlimited capacity for transmission of PDUs. When the _HS-DSCH Repetition
Period_ IE has a value of 0, it signifies that the allocation (_Maximum MAC-d
PDU Length, HS-DSCH Credits_ and _HS-DSCH Interval_ IEs) can be repeated
without limit. In addition to this the CAPACITY ALLOCATION TYPE 1 Control
Frame informs the CRNC about the detection of congestion in the DL transport
network layer with the _Congestion Status_ Bits.
+-----------------------------------+----------------------------+---------+---+---+---+---+---+ | 7 | 6 | 5 | 4 | 3 | 2 | 1 | 0 | +-----------------------------------+----------------------------+---------+---+---+---+---+---+ | Spare bits | Congestion Status | CmCH-PI | | | | | | | | | | | | | | | | 7-6 | | | | | | | | +-----------------------------------+----------------------------+---------+---+---+---+---+---+ | Spare bits 7 -- 3 | Maximum MAC-d/c PDU Length | | | | | | | +-----------------------------------+----------------------------+---------+---+---+---+---+---+ | Maximum MAC-d/c PDU Length (cont) | | | | | | | | +-----------------------------------+----------------------------+---------+---+---+---+---+---+ | HS-DSCH Credits | | | | | | | | +-----------------------------------+----------------------------+---------+---+---+---+---+---+ | HS-DSCH Credits (cont) | | | | | | | | +-----------------------------------+----------------------------+---------+---+---+---+---+---+ | HS-DSCH Interval | | | | | | | | +-----------------------------------+----------------------------+---------+---+---+---+---+---+ | HS0DSCH Repetition Period | | | | | | | | +-----------------------------------+----------------------------+---------+---+---+---+---+---+ | Spare Extension | | | | | | | | +-----------------------------------+----------------------------+---------+---+---+---+---+---+
Figure 37: CAPACITY ALLOCATION TYPE 2 payload structure
The CAPACITY ALLOCATION TYPE 2 Control Frame describes an allocation that the
CRNC may use. When the _HS-DSCH Credits_ IE has a value of 0 it signifies that
there is no resources allocated for transmission and to thus stop
transmission. When the _HS-DSCH Credits_ IE has a value of 65535, it signifies
unlimited capacity for transmission of PDUs. When the _HS-DSCH Repetition
Period_ IE has a value of 0, it signifies that the allocation (_Maximum
MAC-d/c PDU Length, HS-DSCH Credits_ and _HS-DSCH Interval_ IEs) can be
repeated without limit. In addition to this the CAPACITY ALLOCATION TYPE 2
Control Frame informs the CRNC about the detection of congestion in the DL
transport network layer with the _Congestion Status_ Bits.
##### 6.3.3.11.1 Common Transport Channel Priority Indicator (CmCH-PI)
Refer to subclause 6.2.7.21.
##### 6.3.3.11.2 Maximum MAC-d PDU Length
**Description:** The _Maximum MAC-d PDU Length_ IE is used in HS-DSCH CAPACITY
ALLOCATION TYPE 1 Control Frame. The value indicates the maximum allowable PDU
size among the MAC-d PDU sizes configured via NBAP (TS 25.433 [6]).
**Value range:** Refer to subclause 6.2.7.23.
**Field length:** Refer to subclause 6.2.7.23.
##### 6.3.3.11.3 HS-DSCH Credits
**Description:** The _HS-DSCH Credits_ IE is used in HS-DSCH CAPACITY
ALLOCATION (TYPE 1 and TYPE 2) Control Frame. It indicates the granted amount
of MAC-d PDU data that CRNC may transmit during one HD-DSCH interval
In case of HS-DSCH CAPACITY ALLOCATION TYPE 1 Control Frame, it indicates the
number of MAC-d PDUs that a CRNC may transmit _during one HS-DSCH Interval_
granted in the HS-DSCH CAPACITY ALLOCATION TYPE 1 Control Frame.
In case of HS-DSCH CAPACITY ALLOCATION TYPE 2 Control Frame, the granted
amount of MAC-d [FDD and 1.28Mcps TDD -- or MAC-c] PDU data in octets is
obtained by multiplying the MAC-d PDU length [FDD and 1.28Mcps TDD \-- or the
MAC-c PDU length] (indicated by the _Maximum_ _MAC- d/c PDU Length_ IE) with
the number of MAC-d PDUs [FDD and 1.28Mcps TDD -- or MAC-c PDUs] (indicated by
the _HS-DSCH Credits_ IE).
**Value range:** {0-2047, where 0=stop transmission, 2047=unlimited} in case
of HS-DSCH CAPACITY ALLOCATION TYPE 1 Control Frame, {0-65535, where 0=stop
transmission, 65535=unlimited} in case of HS-DSCH CAPACITY ALLOCATION TYPE 2
Control Frame.
**Field length:** 11 bits in case of HS-DSCH CAPACITY ALLOCATION TYPE 1
Control Frame, 16 bits in case of HS-DSCH CAPACITY ALLOCATION TYPE 2 Control
Frame.
##### 6.3.3.11.4 HS-DSCH Interval
**Description:** The value of this field indicates the time interval during
which the _HS-DSCH Credits_ granted in the HS-DSCH CAPACITY ALLOCATION (TYPE 1
or TYPE 2) Control Frame may be used. The first interval starts immediately
after reception of the HS-DSCH CAPACITY ALLOCATION (TYPE 1 or TYPE 2) Control
Frame, subsequent intervals start immediately after the previous interval has
elapsed. This value is only applied to the HS-DSCH transport channel.
**Value range:** {0-2550 ms}. Value 0 shall be interpreted that none of the
credits shall be used.
**Granularity:** 10ms.
**Field Length:** 8 bits.
##### 6.3.3.11.5 HS-DSCH Repetition Period
**Description:** The value of this field indicates the number of subsequent
intervals that the _HS-DSCH Credits_ IE granted in the HS-DSCH CAPACITY
ALLOCATION (TYPE 1 or TYPE 2) Control Frame may be used. These values
represent an integer number of Intervals (see subclause 6.3.3.11.4). This
field is only applied to the HS-DSCH transport channel.
**Value range:** {0-255, where 0= unlimited repetition period}.
**Field Length:** 8 bits.
##### 6.3.3.11.6 Spare Extension
Refer to subclause 6.3.3.1.4.
##### 6.3.3.11.7 Congestion Status
**Description:** The _Congestion Status_ Bits are used by the Node B to
indicate whether a congestion situation is detected in a DL transport network
layer or not. The Node B provides the congestion status in every HS-DSCH
CAPACITY ALLOCATION (TYPE 1 or TYPE 2) Control Frame, which the CRNC may use.
**Value range:**
0 No TNL Congestion
1 Reserved for future use
2 TNL Congestion -- detected by delay build-up
3 TNL Congestion -- detected by frame loss
**Field Length:** 2 bits.
##### 6.3.3.11.8 Maximum MAC-d/c PDU Length
**Description:** The _Maximum MAC-d/c PDU Length_ IE is used in HS-DSCH
CAPACITY ALLOCATION TYPE 2 Control Frame. The value is a factor in the granted
amount of MAC-d PDU data that a CRNC may transmit during one HS-DSCH Interval.
The amount of MAC-d [FDD and 1.28Mcps TDD - or MAC-c ] PDU data in octets is
obtained by multiplying the MAC-d [FDD and 1.28Mcps TDD -- or MAC-c ] PDU
length (indicated by the _Maximum MAC d/c PDU Length_ IE) with the number of
MAC-d PDUs [FDD and 1.28Mcps TDD \-- or MAC-c PDUs] (indicated by the _HS-DSCH
Credits_ IE).
**Value range:** {0-1505}, 0 -- not used.
**Field length:** 11 bits.
#### 6.3.3.12 HS-DSCH UL SYNCHRONIZATION ESTABLISHMENT FAILURE [1.28Mcps TDD]
##### 6.3.3.12.1 Payload structure
The payload of the HS-DSCH UL Synchronization Establishment Failure control
frames is shown in figure 38.
* * *
7 6 5 4 3 2 1 0 Number of bytes  
H-RNTI 1 Payload  
H-RNTI (cont.) 1  
Spare Extension 0-32
* * *
Figure 38: HS-DSCH UL SYNCHRONIZATION ESTABLISHMENT FAILURE payload structure
##### 6.3.3.12.2 H-RNTI
Refer to subclause 6.2.7.37.
#### 6.3.3.13 HS-DSCH PDU DROP INDICATION
##### 6.3.3.13.1 Payload structure
The payload of the HS-DSCH PDU Drop Indication control frame is shown in
figure 39.
* * *
7 6 5 4 3 2 1 0 Number of bytes  
Spare bit 7 to 3 Drop Reason 1 Payload  
Number of PDUs Dropped 1  
SN 1 1  
SN 1 (cont) Spare 1  
PDU 1 Index 1  
... 1  
SN N 1  
SN N (cont) Spare 1  
PDU N Index 1  
Spare Extension 0-32
* * *
Figure 39: HS-DSCH PDU DROP INDICATION payload structure
##### 6.3.3.13.2 Drop Reason
**Description:** The _Drop Reason_ IE is used in HS-DSCH PDU DROP INDICATION
Control Frame. It indicates the reason of drop of HS-DSCH PDUs in Node B.
**Value range:**
0 too long delay in MAC-hs/ehs buffer
1 unsuccessful HARQ due to T1 timer expiry
2 TNL Congestion -- detected by frame loss
3 to 7 are reserved
**Field length:** 3 bits
##### 6.3.3.13.3 PDU Index
**Description:** The _PDU Index_ IE identifies the PDU index in the HS-DSCH
DATA FRAME.
**Value range:** {0-255}.
**Field length:** 8 bits.
# 7 Frame protocol error handling
A received frame protocol frame with unknown Information element or with
illegal Information element value shall be ignored. Frame protocol frames sent
with a CFN in which the radio resources assigned to the associated Iub data
port are not available, shall be ignored.
## 7.1 Error detection
Error detection is provided on frames through a Cyclic Redundancy Check. The
CRC for the payload is 16 and for the data frame header is 7 [FDD - or 11]
bits and for control frames is 7 bits.
### 7.1.1 CRC Calculation
The parity bits are generated by one of the following cyclic generator
polynomials:
g~CRC16~(D) = D^16^ + D^15^ + D^2^ + 1.
[FDD - g~CRC11~(D) = D^11^ + D^9^ + D^8^ + D^2^ + D + 1.]
g~CRC7~(D) = D^7^ + D^6^ + D^2^ + 1.
Denote the bits in a frame by $a_{1},a_{2},a_{3},\ldots,a_{A_{i}}$, and the
parity bits by $p_{1},p_{2},p_{3},\ldots,p_{L_{i}}$. _A~i~_ is the length of a
protected data and L _~i~_ is 16 or 7 depending on the CRC length.
The encoding is performed in a systematic form, which means that in GF (2),
the polynomial for the payload.
$a_{1}D^{A_{i} + \text{15}} + a_{2}D^{A_{i} + \text{14}} + \ldots +
a_{A_{i}}D^{\text{16}} + p_{1}D^{\text{15}} + p_{2}D^{\text{14}} + \ldots +
p_{\text{15}}D^{1} + p_{\text{16}}$
yields a remainder equal to 0 when divided by g~CRC16~(D), [FDD - the
polynomial for the data frame header with 11 bit CRC
$a_{1}D^{A_{i} + \text{11}} + a_{2}D^{A_{i} + \text{10}} + \ldots +
a_{A_{i}}D^{\text{11}} + p_{1}D^{\text{10}} + p_{2}D^{9} + \ldots +
p_{\text{10}}D^{1} + p_{\text{11}}$
yields a reminder equal to 0 when divided by g~CRC11~(D), ] the polynomial for
the data frame header and control frames with 7 bit CRC.
$a_{1}D^{A_{i} + 6} + a_{2}D^{A_{i} + 5} + \ldots + a_{A_{i}}D^{7} +
p_{1}D^{6} + p_{2}D^{5} + \ldots + p_{6}D^{1} + p_{7}$
yields a remainder equal to 0 when divided by g~CRC7~(D).
#### 7.1.1.1 Relation between input and output of the Cyclic Redundancy Check
The bits after CRC attachment are denoted by
$b_{1},b_{2},b_{3},\ldots,b_{B_{i}}$, where _B~i~_ =_A~i~_ +_L~i~_.
The parity bits for the payload are attached at the end of the frame:
$b_{k} = a_{k}$ _k_ = 1, 2, 3, ..., _A~i~_
$b_{k} = p_{(k - A_{i})}$ _k_ = _A~i~_ \+ 1, _A~i~_ \+ 2, _A~i~_ \+ 3, ...,
_A~i~_ \+ _L~I~_
The parity bits for the frame header and the control frames are attached at
the beginning of the frame:
$b_{k} = p_{k}$ _k_ = 1, 2, 3, ..., _L~i~_
$b_{k} = a_{(k - \text{Li})}$ _k_ = _L~i~_ \+ 1, _L~i~_ \+ 2, _L~i~_ \+ 3,
..., _L~I~ + A~i~_
#