# Foreword
This Technical Report has been produced by the 3rd Generation Partnership
Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document is a technical report for the work item on additional
enhancements for NB-IoT, covering the study on the coexistence of NB-IoT with
NR, which is one of the objectives of the WI [2].
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or non‑specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] RP-193224: "Additional enhancements for NB-IoT"
[3] 3GPP TS 36.104: \"Evolved Universal Terrestrial Radio Access (E-UTRA);
Base Station (BS) radio transmission and reception\".
[4] 3GPP TS 36.101: \"Evolved Universal Terrestrial Radio Access (E-UTRA);
User Equipment (UE) radio transmission and reception\".
[5] 3GPP TS 38.213: \"NR; Physical layer procedures for control\".
[6] 3GPP TS 38.104: \"NR: Base Station (BS) radio transmission and
reception\".
[7] 3GPP TS 36.141: \" Evolved Universal Terrestrial Radio Access (E-UTRA);
Base Station (BS) conformance testing\".
[8] 3GPP TS 37.141: \"NR, E-UTRA, UTRA and GSM/EDGE; Multi-Standard Radio
(MSR) Base Station (BS) conformance testing\".
# 3 Definitions, symbols and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
3GPP TR 21.905 [1] and the following apply. A term defined in the present
document takes precedence over the definition of the same term, if any, in
3GPP TR 21.905 [1].
## 3.2 Symbols
For the purposes of the present document, the following symbols apply:
\ \
## 3.3 Abbreviations
For the purposes of the present document, the abbreviations given in 3GPP TR
21.905 [1] and the following apply. An abbreviation defined in the present
document takes precedence over the definition of the same abbreviation, if
any, in 3GPP TR 21.905 [1].
# 4 Background
## 4.1 Task description
The objective on NR and NB-IoT coexistence is,
**Specify NB-IoT resource reservation for UL/DL** FDD/TDD NB-IoT non-anchor
carriers**, to avoid resource overlap between NR and NB-IoT when NB-IoT is
deployed within an NR carrier [RAN1, RAN2, RAN4].**
**For NB-IoT in-band, guard band and standalone operation co-existence with
NR, including the case of NR configured in 15kHz SS Block SCS and the case of
30kHz SS Block SCS as specified in 38.101-1, investigate the following:
[RAN4]**
15KHz, 30KHz, and 60KHz numerologies for NR FR1 concerned bands, with higher
priority given first to 15kHz and then to 30kHz
Channel raster, PRB and subcarrier grid alignment between NB-IoT and NR
Study feasible NB-IoT carrier(s) placement allocation without RF backward
compatibility impact and compatible with Rel'13 NB-IoT and Rel'15 NR, to
operate simultaneously within various NR channel bandwidths
Study if the +6dB downlink RE power boosting can still be allowed for both in-
band and guard band operation modes when co-existing with NR
Synchronization issue between NR and NB-IoT, including timing advance
Frequency band support in NB-IoT and NR
Testability applicable to RF
Coexistence between R15 NR and R13/R14/R15 NB-IoT.
Note: After RAN1 concludes the objective on R16 NB-IoT coexistence aspects,
evaluate coexistence between R15 NR and R16 NB-IoT.
# 5 NR and NB-IoT coexistence
## 5.1 General
5.1.1 System scenarios
For NB-IoT operating in LTE, system scenarios have been divided into 3
following operations,
**Category NB1/NB2 stand-alone operation** : category NB1/NB2 is operating
standalone when it utilizes its own spectrum, for example the spectrum used by
GERAN systems as a replacement of one or more GSM carriers, as well as
scattered spectrum for potential IoT deployment.
**Category NB1/NB2** **guard band operation:** category NB1/NB2 is operating
in guard band when it utilizes the unused resource block(s) within an E-UTRA
carrier's guard-band.
**Category NB1/NB2** **in-band operation:** category NB1/NB2 is operating in-
band when it utilizes the resource block(s) within a normal E-UTRA carrier.
When it comes to NB-IoT co-existence with NR, depend on the utilized spectrum
for NB-IoT operations, 3 system scenarios should be considered,
**NB-IoT operation in NR in-band:** NB-IoT is operating in-band when it is
located within a NR transmission bandwidth configuration plus 15 kHz at each
edge but not within the NR minimum guard band GB~Channel~.
**NB-IoT operation in NR guard band:** NB-IoT is operating in guard band when
it is located within a NR BS channel bandwidth but is not NB-IoT operation in
NR in-band.
**NB-IoT standalone operation:** NB-IoT is operating standalone when it
utilizes its own spectrum, for example the spectrum currently being used by
GERAN systems as a replacement of one or more GSM carriers, as well as
scattered spectrum for potential IoT deployment.
.
> Figure 5.1.1-1: Definition of channel bandwidth and transmission bandwidth
> configuration for one NR channel
## 5.2 NB-IoT operating in NR in-band
5.2.1 Channel raster, PRB and subcarrier grid alignment
#### 5.2.1.1 Convention
In the following sub-sections, focus is on NR 15 kHz SCS. Coexistence with NR
30kHz and 60kHz SCS is nevertheless addressed, mentioning additional guard
band would be needed in between NR and NB-IoT. Also, PRBs alignment won't
really make sense anymore as orthogonality could not be preserved when
considering 30kHz and 60 kHz SCS.
In the following sub-sections, here after tone and RB index rules are assumed:
Tone (or subcarrier) #0 of one RB is the first tone (or subcarrier) of that
RB, as shown on Figure 5.2.1.2-1 with NB-IoT RB.
If N~RB~ is the number of RBs for a certain NR channel bandwidth:
RB #0 is the RB hosting the NR RF reference frequency.
Subcarrier #0 is the first subcarrier of RB #0.
As shown on Figure 5.2.1.3-1, if N~RB~ is even:
RB #(-N~RB~/2) is the RB on the lower edge of NR RF channel BW
Subcarrier #(-N~RB~/2*12) is the first subcarrier at lower edge of NR RF
channel BW.
RB #(N~RB~/2-1) is the RB on the upper edge of NR RF channel BW.
Subcarrier #((N~RB~/2)*12-1) is the last subcarrier at upper edge of NR RF
channel BW.
As shown on Figure 5.2.1.3-2, if N~RB~ is odd:
RB #(-(N~RB~-1)/2) is the RB on the lower edge of NR RF channel BW
Subcarrier #(-(N~RB~-1)/2*12) is the first subcarrier at lower edge of NR RF
channel BW.
RB #((N~RB~-1)/2) is the RB on the upper edge of NR RF channel BW.
Subcarrier #((N~RB~+1)/2*12-1) is the last subcarrier at upper edge of NR RF
channel BW.
For example, for a NR 10MHz channel bandwidth signal:
RB#0 is the RB in the middle hosting the RF reference frequency (channel
raster).
RB#(-26) is the RB on the lower edge of NR RF channel BW.
RB#25 is the RB on the upper edge of NR RF channel BW.
#### 5.2.1.2 NB-IoT channel raster
The NB-IoT carrier frequency position is defined on a 100 kHz channel raster
based as follow:
> F~DL~ = F~DL_low~ + 0.1(N~DL~ -- N~Offs-DL~) + 0.0025*(2M~DL~+1)
>
> F~UL~ = F~UL_low~ + 0.1(N~UL~ -- N~Offs-UL~) + 0.0025*(2M~UL~)
The specified carrier frequency is located in the middle of NB-IoT RB, i.e.
the frequency in between tones 5 and 6 of the RB (for 15 kHz SCS), as shown on
Figure 5.2.1.2-1.
> {width="5.319444444444445in" height="3.8402777777777777in"}
Figure 5.2.1.2-1: NB-IoT carrier location
M~DL~ and M~UL~ values ranges are specified in TS 36.104 [3] or TS 36.101 [4].
The anchor NB-IoT RB (broadcasting NPSS/NSSS) position is defined with a
limited M~DL~ range to {-2,-1,0,1}.
#### 5.2.1.3 NR channel raster
NR has considered 2 types of channel raster:
100 kHz based channel raster, mainly used for NR bands re-farmed from LTE
ones.
SCS based channel raster, 15 or 30 kHz for FR1.
Note that all FDD bands in FR1 have a channel raster based on 100 kHz.
The RF reference frequency defined by this channel raster identifies the RF
channel position depending on the number of specified RBs (N~RB~) by the
spectrum utilization for a given SCS and channel bandwidth:
If this number is even, then it points to the subcarrier #0 (first one) of RB
index #0, as shown in Figure 2.
If this number is odd, the it points to the subcarrier #6 of RB index #0, as
shown in Figure 5.2.1.3-1.
{width="6.354166666666667in" height="3.548611111111111in"}
Figure 5.2.1.3-1: NR RF reference frequency position
#### 5.2.1.4 NR SS Blocks
The presence of the NR Synchronization Signal (SS) blocks would restrict
possible options when placing a NB. Those blocks contain synchronization
signals (PSS and SSS) which are used for UE to synchronize and connect to the
BS. It's so key that NB-IoT is not overlapping those blocks to not impact NR
UE synchronization performance.
The SS block pattern for 15 kHz SCS is according to Case A (specified in TS
38.213 [5]) and its structure is given in Figure 5.2.1.4-1. SSB occupies 20
RBs in frequency domain and 4 OFDM symbols in time domain.
{width="5.944444444444445in" height="3.6041666666666665in"}
Figure 5.2.1.4-1: Structure of SS Block
Considering NB-IoT is currently specified only for frequency bands below 3
GHz, following equation gives the frequency position of the synchronization
raster:
$SS_{\text{REF}} = 1200N + 50M,\ \ \left\lbrack \text{kHz} \right\rbrack$
(4.1)
> _where_ $N \in \text{{}1,2,..2499\text{}}$ _is an integer, and_ $M \in
> \text{{}1,3,5\text{}}$_._
$SS_{\text{REF}}$ refers to the first subcarrier of the RB #10 of the SSB
block (which corresponds to 11^th^ RB of the SSB block).
Therefore, the minimum and maximum frequencies of the SSB (i.e., SSB edges),
based on Figure 5.2.1.4-2, are:
$F_{SSB,min} = SS_{\text{REF}} - \left( 10 \times 180 \right) - 7.5,\ \
\left\lbrack \text{kHz} \right\rbrack$ (4.2)
$F_{SSB,max} = F_{SSB,min} + \left( 20 \times 180 \right),\ \ \ \ \ \ \ \
\left\lbrack \text{kHz} \right\rbrack$ (4.3)
{width="5.840277777777778in" height="1.6527777777777777in"}
Figure 5.2.1.4-2: Position of SS~REF~ in SSB.
Which also means NB-IoT RB, shall also not be overlapping the following
frequency range, as illustrated on Figure 5.2.1.4-3:
$\lbrack\ 1200N + 50M - \left( 10 \times 180 \right) - 7.5\ ,\ 1200N + 50M +
\left( 10 \times 180 \right) - 7.\ 5\rbrack\ \left\lbrack \text{kHz}
\right\rbrack$
{width="6.256944444444445in" height="1.7083333333333333in"}
Figure 5.2.1.4-3: Feasible locations of an NB-IoT RB to avoid overlap with NR
SSB in coexistence scenario.
#### 5.2.1.5 NB-IoT and NR coexistence
As mentioned before, NB-IoT carrier frequency and NR RF reference frequency
refers to different locations in the frequency domain:
NB-IoT carrier frequency is referring to a frequency located in between 2 NB-
IoT tones.
NR RF reference frequency is referring to a frequency located in the middle of
a tone.
To align sub-carriers, considering NR 15 kHz SCS, a 7.5 kHz offset shall
therefore be considered in between reference frequencies.
#### 5.2.1.6 NR 100 kHz channel raster
##### 5.2.1.6.1 DL considerations
##### 5.2.1.6.1.1 Carrier frequency {#carrier-frequency .H6}
Based on previous considerations (NB-IoT carrier frequency, preserving perfect
orthogonality in between NB-IoT and NR tones), the following equation should
be resolved:
> $100n + 2.5*\left( 2M\text{DL} + 1 \right) = 100m + 15k - 7.5\ \ $ (6.1)
With:
\- M~DL~ being the Offset of NB-IoT Channel Number to EARFCN.
\- n being an integer identifying NB-IoT carrier on the 100kHz grid
\- m being an integer identifying NR RF reference frequency on the 100 kHz
grid
\- k being an integer representing a subcarrier index from NR RF reference
frequency.
This would then result in following potential subcarrier index:
> $k = \ \frac{20 _\ \left( n - m \right)\ + \ M\text{DL} + 2}{3}$ (6.2)$k = \
> \frac{20_ \ \left( n - m \right)\ + \ M\text{DL} + 2}{3}$$k = \ \frac{20 _\
> \left( n - m \right)\ + \ M\text{DL} + 2}{3}$$\ k = \ \frac{20_ \ \left( n -
> m \right)\ + \ M\text{DL} - 1}{3}$
All possible positions are determined by finding (n-m) values so that k is an
integer that would solve this equation (6.2).
##### 5.2.1.6.1.2 RB alignment {#rb-alignment .H6}
NB-IoT RB and NR RB should be aligned to optimize resource utilization,
avoiding that a NB-IoT RB overlaps 2 NR RBs.
As mentioned in 5.2.1.5, NR reference frequency refers to different
subcarriers of the middle RB depending on spectrum utilization, and more
specifically on the parity of the number of RBs allocated for a considered
channel bandwidth.
Based on this, to ensure RBs alignment, considering _p_ being an integer
representing the RB index from NR reference frequency (p = 0 for the NR RB
hosting the NR Reference frequency), if:
The maximum number of RBs for a given channel bandwidth is even: NB-IoT
carrier frequency should be further offset with 90 kHz, and equation (6.1)
would become:
> $100n + 2.5 _\left( 2M\text{DL} + 1 \right) = 100m + 180p - 7.5\ + 90$$100n
> + 2.5_ \left( 2M\text{DL} + 1 \right) = 100m + 15k - 7.5\ + 90$ (6.3)
>
> {width="5.444444444444445in" height="1.3680555555555556in"}
Figure 5.2.1.6.1.2-1: Possible "RB aligned" frequency positions for NB-IoT
(number of NR RBs is even).
Equation (6.2) would become:
> $p = \ \frac{20*\ \left( n - m \right)\ + \ MDL - 16}{36}$ (6.4)
The maximum number of RBs for a given channel bandwidth is odd: no further
offset shall be considered, equation (6.1) would become:
> $100n + 2.5*\left( 2M\text{DL} + 1 \right) = 100m + 180p - 7.5$ (6.5)
>
> {width="4.916666666666667in" height="1.3680555555555556in"}
Figure 5.2.1.6.1.2-2: Possible "RB aligned" frequency positions for NB-IoT
(number of NR RBs is odd).
> Equation (6.2) would become:
>
> $p = \ \frac{20*\ \left( n - m \right)\ + \ M\text{DL} + 2}{36}$ (6.6)
##### 5.2.1.6.1.3 Channel bandwidth {#channel-bandwidth .H6}
In previous equations (6.4) and (6.6), (n-m) represents the frequency
separation in between NB-IoT carrier and NR RF reference frequency on a 100
kHz grid.
So, for a given NR RF reference frequency, (n-m) would indicate the relative
frequency position of NB-IoT carrier from that NR reference frequency. And
vice-versa, for a given NB-IoT carrier frequency, (n-m) would indicate the
relative frequency position of NR reference frequency from that NB-IoT
carrier.
Also, _p_ being the RB index from NR reference frequency, _p_ has limited
value determined from NR Channel bandwidth and from the corresponding spectrum
utilization.
So, if N~RB~ is the maximum number of RBs for a certain channel bandwidth (as
specified by the transmission bandwidth configuration in TS 38.104 [6],
considering _p_ = 0 for the centre RB in that channel bandwidth, _p_ will be
bounded. Equations (6.4) and (6.6) would have following additional conditions:
\- If N~RB~ is even:
> $p = \ \frac{20*\ \left( n - m \right)\ + \ MDL - 16}{36}$ with ${-
> N}_{\text{RB}}/2\ \leq p\ \leq {(N}_{\text{RB}}/2) - 1$${- N}_{\text{RB}}/2
> \geq p \geq {(N}_{\text{RB}}/2) - 1$ (6.7)
\- If N~RB~ is odd:
> $p = \ \frac{20*\ \left( n - m \right)\ + \ M\text{DL} + 2}{36}$ with ${-
> (N}_{\text{RB}} - 1)/2 \leq p \leq {(N}_{\text{RB}} - 1)/2$${-
> (N}_{\text{RB}} - 1)/2 \geq p \geq {(N}_{\text{RB}} - 1)/2$ (6.8)
Those equations could be used to determine the position of NB-IoT anchor RB
(M~DL~ as then limited set of values {-2,-1,0,1}), or of any non-anchor RB
(M~DL~ possible values would be then in the range of
{-10,-9,-8,-7,-6,-5,-4,-3,-2,-1,0,1,2,3,4,5,6,7,8,9}).
##### 5.2.1.6.1.4 Conclusion {#conclusion .H6}
NB-IoT and NR operating with 15 kHz SCS could coexist in NR bands supporting
100 kHz channel raster while optimizing resource utilization by aligning
respective RBs. The RB index to deploy NB-IoT, for a given channel bandwidth
with a transmission bandwidth configuration of N~RB,~ is given by:
\- If N~RB~ is even:
> $p = \ \frac{20*\ \left( n - m \right)\ + \ MDL - 16}{36}$ with ${-
> N}_{\text{RB}}/2\ \leq p\ \leq {(N}_{\text{RB}}/2) - 1$${- N}_{\text{RB}}/2
> \geq p \geq {(N}_{\text{RB}}/2) - 1$ (Eq6.1)
\- If N~RB~ is odd:
> $p = \ \frac{20*\ \left( n - m \right)\ + \ M\text{DL} + 2}{36}$ with ${-
> (N}_{\text{RB}} - 1)/2 \leq p \leq {(N}_{\text{RB}} - 1)/2$${-
> (N}_{\text{RB}} - 1)/2 \geq p \geq {(N}_{\text{RB}} - 1)/2$ (Eq6.2)
With the additional condition those candidates RBs shall not overlap in the
following range:
$\lbrack\ 1200N + 50M - \left( 10 \times 180 \right) - 7.5\ ,\ 1200N + 50M +
\left( 10 \times 180 \right) - 7.\ 5\rbrack\ \left\lbrack \text{kHz}
\right\rbrack$ (Cond6.1)
> _where_ $N \in \text{{}1,2,..2499\text{}}$ _is an integer, and_ $M \in
> \text{{}1,3,5\text{}}$_._
From those equations, it's then possible to determine where to deploy NB-IoT
in-band of a given NR frequency deployment. Or vice-versa, it's possible to
determine how to deploy NR for a given NB-IoT frequency deployment, with NB-
IoT operating in-band NR.
Those equations could be used to determine the position of NB-IoT anchor RB
(M~DL~ as then limited set of values {-2,-1,0,1}), or of any non-anchor RB
(M~DL~ possible values would be then in the range of
{-10,-9,-8,-7,-6,-5,-4,-3,-2,-1,0,1,2,3,4,5,6,7,8,9}).
##### 5.2.1.6.1.5 Example {#example .H6}
Based on previous equations, the maximum channel bandwidth for 15 kHz SCS
being 50 MHz (N~RB~=270), _p_ (anchor PRB position) could take one of the
following values: [-131, -126, -121, -116, -111, ..., -11, -6, -1, 4, 9, 14,
19, ...124, 129, 134]
##### 5.2.1.6.2 NR FDD bands-- UL considerations
Due the DC component in DL but not in UL, there is a 7.5 kHz shift in between
DL and UL for E-UTRA. As NB-IoT might be operated in E-UTRA in-band, this
shift exists also in between NB-IoT DL and UL.
NR has no DC component in its design, so such 7.5 kHz shift doesn't exist in
between DL and UL. Nevertheless, to facilitate NR and E-UTRA coexistence and
SUL feature, the possibility to have this 7.5 kHz offset has also been
introduced for all FDD bands (see TS 38.104 [6] section 5.2.4.1):
For SUL bands and for the uplink of all FDD bands defined in table 5.2-1,
F~REF,shift~ = F~REF~ + Δ~shift~, Δ~shift~ = 0 kHz or 7.5 kHz
where Δ~shift~ is signalled by the network in higher layer parameter
_frequencyShift7p5khz_ [11].
Using this 7.5 kHz shift it is possible to align NB-IoT RB when operating in
NR in-band with NR RBs and so maintain orthogonality.
##### 5.2.1.6.3 NR TDD bands -- UL considerations
Similar to FDD, for E-UTRA TDD, there is a 7.5 kHz offset in between DL and
UL.
Unfortunately, the optional 7.5 kHz shift in between UL and DL was not agreed
for NR TDD bands. This can't be used then to compensate the offset in between
UL and DL for NB-IoT.
However, in the scope of Rel-15 and the introduction of TDD support for NB-
IoT, anticipating NR, the range of possible position frequency positions of
NB-IoT TDD UL carrier has been extended in TS 36.104 [3].
The NB-IoT UL frequency position was initially specified with:
F~UL~ = F~UL_low~ + 0.1(N~UL~ -- N~Offs-UL~) + 0.0025*(2M~UL~)
with M~UL~ in the range of
{-10,-9,-8,-7,-6,-5,-4,-3,-2,-1,0,1,2,3,4,5,6,7,8,9}.
While from Rel-15, and the introduction of NB-IoT TDD support, the
specification is:
F~UL~ = F~UL_low~ + 0.1(N~UL~ -- N~Offs-UL~) + 0.0025*(2M~UL~)
with M~UL~ in the range of {-11,-10,-9.5,-9,-8.5,-8,-7.5,-7,-6.5,-6,-5.5,-5,
-4.5,-4,-3.5,-3,-2.5,-2,-1.5,-1,-0.5,0,0.5,1,1.5,2,2.5,3,3.5,4,4.5,5,5.5,6,6.5,7,7.5,8,8.5,9,9.5,10,
11} for TDD.
It's then possible for NB-IoT TDD to align UL with DL carrier.
NR UL and DL carriers being aligned, with a 0 kHz offset, this means NB-IoT
TDD DL and UL could coexist operating in-band with NR DL and UL, keeping
orthogonality in between tones.
The only drawback is that NB-IoT UL carrier can't remain at exact same
frequency position when migrating from E-UTRA TDD to NR TDD but shall be
shifted with an offset of 7.5 kHz.
##### 5.2.1.6.4 Example
Let's consider a NR 10MHz channel bandwidth (N~RB~=52) deployed in band n1.
This band uses 100 kHz channel raster.
Let's assume the RF reference frequency for this deployment is N~REF~=427000,
so F~REF~ = 2,135 MHz.
N~RB~ being even, such deployment would be in between
2,135,000-7.5-4,680=2,130,312.5 kHz (which corresponds to lower edge of RB
#(-26)) and 2,135,000-7.5+4,680=2,139,672.5 kHz (which corresponds to upper
edge of RB #25)..
As seen in 5.2.1.4, the SS block would occupy a frequency block from
1200*N+50*M-10*180-7.5 kHz to 1200*N+50*M+10*180-7.5 kHz.
Assuming N=1778 and M=5 (GSCN=5333), being subcarrier aligned, the SS block
would occupy frequency range [2,132,042.5 ; 2,135,642.5] kHz. In other words,
SS block would overlap NR RBs #(-17) to #3.
Considering NB-IoT and NR RB alignment, NB-IoT anchor RB could then be
deployed in one of the following NR DL RBs: [-26, -21, 4, 9, 14, 19, 24].
Considering sub-carrier alignment only (with overlapping of NB-IoT RB over 2
NR RBs then) would offer more options for possible NB-IoT RB location, with
subcarriers [-306, -300, -299, ... -13, -6, 0, 1, 7, ...294, 300, 301].
#### 5.2.1.7 NR SCS based channel raster
##### 5.2.1.7.1 DL considerations
##### 5.2.1.7.1.1 Carrier frequency
Based on previous considerations (NB-IoT carrier frequency, preserving perfect
orthogonality in between NB-IoT and NR tones, which also means NR SCS=15 kHz),
the following equation should be resolved:
> {width="4.333333333333333in" height="0.2986111111111111in"}$100n + 2.5
> _\left( 2M\text{DL} + 1 \right) = k_ \ Scs + 5 _I - 7.5$$100n + 2.5_ \left(
> 2M\text{DL} + 1 \right) = k _\ Scs + 5_ Step - 7.5$ (7.1)
With:
  * M~DL~: Offset of NB-IoT Channel Number to EARFCN.
  * n: integer identifying NB-IoT carrier on the 100kHz grid
  * k: subcarrier index.
  * m: integer identifying NR RF reference frequency
  * _I_ : step size as specified in Table 5.4.2.3-1 of TS 38.104, Step = {1, 2, 3, 6} depending on carrier frequency and sub-carrier spacing.
This would then result in following potential subcarrier index:
> {width="3.548611111111111in" height="0.4513888888888889in"}$k\ = \ \
> \frac{20 _\ n\ + \ MDL - I\ + 2\ }{\left( Scs/5 \right)}$$k\ = \ \ \frac{20_
> \ n\ + \ MDL - I\ + 2\ }{\left( Scs/5 \right)}$ (7.2)
All possible positions are determined by finding (n,m) values so that k is an
integer that would solve this equation (7.2).
##### 5.2.1.7.1.2 RB alignment
When considering 15 kHz SCS, NB-IoT RB and NR RB should be aligned to optimize
resource utilization, avoiding that a NB-IoT RB overlaps 2 NR RBs.
When considering other SCS, RBs alignment is not obvious anymore.
Orthogonality will be lost, and some guard would be needed in between NR RBs
and NB-IoT RB. Depending on the required guard, it might be more optimal to
center NB-IoT RB with one or 2 punctured NR RBs.
In the following, considering no requirement has to be specified for mixed
numerology, we will only investigate NR 15 kHz SCS.
As mentioned in 5.2.1.5, NR reference frequency refers to different
subcarriers of the middle RB depending on spectrum utilization, and more
specifically on the parity of the number of RBs allocated for a considered
channel bandwidth.
Based on this, to ensure RBs alignment, considering _p_ being an integer
representing the RB index from NR reference frequency (p = 0 for the NR RB
hosting the NR Reference frequency), if:
  * The maximum number of RBs for a given channel bandwidth is even: NB-IoT carrier frequency should be further offset with 90 kHz, and equation (1) would become:
> {width="4.729166666666667in" height="0.3055555555555556in"} $100n + 2.5
> _\left( 2M\text{DL} + 1 \right) = p_ 12 _\ Scs + 5_ I - 7.5 + \frac{\left(
> 12 _Scs \right)}{2}$$100n + 2.5_ \left( 2M\text{DL} + 1 \right) = 100m +
> 180p - 7.5\ + 90$$100n + 2.5*\left( 2M\text{DL} + 1 \right) = 100m + 15k -
> 7.5\ + 90$(7.3)
>
> With _I_ ~15~ = 3 for channel raster below 3 GHz and _I_ ~15~ = 1 for
> channel raster above 3 GHz
Equation (7.2) would become:
> {width="3.5416666666666665in" height="0.4513888888888889in"} (7.4)
>
> Or {width="3.1458333333333335in" height="0.4513888888888889in"} for channel
> raster below 3 GHz.
  * The maximum number of RBs for a given channel bandwidth is odd: no further offset shall be considered, equation (7.1) would become:
> {width="4.729166666666667in" height="0.3055555555555556in"} (7.5)
>
> With _I_ ~15~ = 3 for channel raster below 3 GHz and _I_ ~15~ = 1 for
> channel raster above 3 GHz
>
> Equation (7.2) would become:
>
> {width="3.1458333333333335in" height="0.4513888888888889in"} (7.6)
>
> Or {width="3.1458333333333335in" height="0.4513888888888889in"}for channel
> raster below 3 GHz.
##### 5.2.1.7.1.3 Channel bandwidth
Also, _p_ being the RB index from NR reference frequency, _p_ has limited
value determined from NR Channel bandwidth and from the corresponding spectrum
utilization.
So, if N~RB~ is the maximum number of RBs for a certain channel bandwidth (as
specified by the transmission bandwidth configuration in TS 38.104 ([6]),
considering _p_ = 0 for the centre RB in that channel bandwidth, _p_ will be
bounded. Equations (7.4) and (7.6) would have following additional conditions:
  * If N~RB~ is even:
{width="3.1458333333333335in" height="0.4513888888888889in"}with ${-
N}_{\text{RB}}/2\ \leq p\ \leq {(N}_{\text{RB}}/2) - 1$${- N}_{\text{RB}}/2
\geq p \geq {(N}_{\text{RB}}/2) - 1$ (7.7)
  * If N~RB~ is odd:
> {width="3.1458333333333335in" height="0.4513888888888889in"}with ${-
> (N}_{\text{RB}} - 1)/2 \leq p \leq {(N}_{\text{RB}} - 1)/2$${-
> (N}_{\text{RB}} - 1)/2 \geq p \geq {(N}_{\text{RB}} - 1)/2$ (7.8)
Comparing to 100 kHz channel raster for both NR and NB-IoT, with NR SCS based
channel raster, the possible positions of NB-IoT RB depend here of NR carrier
frequency position. For a given NR channel bandwidth signal, it's then not
possible to give the candidate list of NB-IoT RB as it also depends on NR-
ARFCN value.
##### 5.2.1.7.1.4 Conclusion
NB-IoT and NR operating could coexist in NR bands supporting SCS based channel
raster, but also optimizing resource utilization by aligning respective RBs
for 15 kHz SCS. The RB index to deploy NB-IoT, for a given channel bandwidth
with a transmission bandwidth configuration of N~RB,~ is given by:
  * If N~RB~ is even:
{width="3.1458333333333335in" height="0.4513888888888889in"} with ${-
N}_{\text{RB}}/2\ \leq p\ \leq {(N}_{\text{RB}}/2) - 1$${- N}_{\text{RB}}/2
\geq p \geq {(N}_{\text{RB}}/2) - 1$ (Eq7.1)
  * If N~RB~ is odd:
> {width="3.1458333333333335in" height="0.4513888888888889in"} with ${-
> (N}_{\text{RB}} - 1)/2 \leq p \leq {(N}_{\text{RB}} - 1)/2$${-
> (N}_{\text{RB}} - 1)/2 \geq p \geq {(N}_{\text{RB}} - 1)/2$ (Eq7.2)
With the additional condition those candidates RBs shall not overlap in the
following range:
$\lbrack\ 1200N + 50M - \left( 10 \times 180 \right) - 7.5\ ,\ 1200N + 50M +
\left( 10 \times 180 \right) - 7.\ 5\rbrack\ \left\lbrack \text{kHz}
\right\rbrack$ (Cond7.1)
> _where_ $N \in \text{{}1,2,..2499\text{}}$ _is an integer, and_ $M \in
> \text{{}1,3,5\text{}}$_._
From those equations, it's then possible to determine where to deploy NB-IoT
in-band of a given NR frequency deployment. Or vice-versa, it's possible to
determine how to deploy NR for a given NB-IoT frequency deployment, with NB-
IoT operating in-band NR.
Those equations could be used to determine the position of NB-IoT anchor RB
(M~DL~ as then limited set of values {-2,-1,0,1}), or of any non-anchor RB
(M~DL~ possible values would be then in the range of
{-10,-9,-8,-7,-6,-5,-4,-3,-2,-1,0,1,2,3,4,5,6,7,8,9}).
##### 5.2.1.7.2 UL considerations
All SCS based channel raster are TDD bands, so the following UL consideration
is focusing on TDD bands only.
With E-UTRA, there is a 7.5 kHz offset in between DL and UL.
In the scope of Rel-15 and the introduction of TDD support for NB-IoT,
anticipating NR, the range of possible position frequency positions of NB-IoT
TDD UL carrier has been extended in TS 36.104 [3].
The NB-IoT UL frequency position was initially specified with:
F~UL~ = F~UL_low~ + 0.1(N~UL~ -- N~Offs-UL~) + 0.0025*(2M~UL~)
with M~UL~ in the range of
{-10,-9,-8,-7,-6,-5,-4,-3,-2,-1,0,1,2,3,4,5,6,7,8,9}.
While from Rel-15, and the introduction of NB-IoT TDD support, the
specification is:
F~UL~ = F~UL_low~ + 0.1(N~UL~ -- N~Offs-UL~) + 0.0025*(2M~UL~)
with M~UL~ in the range of {-11,-10,-9.5,-9,-8.5,-8,-7.5,-7,-6.5,-6,-5.5,-5,
-4.5,-4,-3.5,-3,-2.5,-2,-1.5,-1,-0.5,0,0.5,1,1.5,2,2.5,3,3.5,4,4.5,5,5.5,6,6.5,7,7.5,8,8.5,9,9.5,10,
11} for TDD.
It's then possible for NB-IoT TDD to align UL with DL carrier.
NR UL and DL carriers being aligned, with a 0 kHz offset, this means NB-IoT
TDD DL and UL could coexist operating in-band with NR DL and UL, keeping
orthogonality in between tones.
The only drawback is that NB-IoT UL carrier can't remain at exact same
frequency position when migrating from E-UTRA TDD to NR TDD but shall be
shifted with an offset of 7.5 kHz.
##### 5.2.1.7.3 Example
Let's consider a NR 10MHz channel bandwidth (N~RB~=52) deployed in band n41.
This band uses 15 kHz or 30 kHz SCS based channel raster, we'll consider 15
kHz SCS in the following.
Let's assume the RF reference frequency for this deployment is N~REF~=512400,
so F~REF~ = 2,562 MHz.
N~RB~ being even, such deployment would be in between
2,562,000-7.5-4,680=2,557,312.5 kHz (which corresponds to lower edge of RB
#(-26)) and 2,520,000-7.5+4,680=2,556,672.5 kHz (which corresponds to upper
edge of RB #25).
As seen in 2.5.4, the SS block would occupy a frequency block from
1200*N+50*M-10*180-7.5 kHz to 1200*N+50*M+10*180-7.5 kHz.
Assuming N=2134 and M=3 (GSCN=6402), being subcarrier aligned, the SS block
would occupy frequency range [2,559,142.5 ; 2,562,742.5] kHz. In other words,
SS block would overlap NR RBs #(-17) to #4.
Considering NB-IoT and NR RB alignment, NB-IoT RB could then be deployed in
one of the following NR DL RBs: [-26, -21, 9, 14, 19, 24].
5.2.2 Power boosting
**For Rel-13 power bosting for E-UTRA guard band operation and in-band
operation is** introduced in both TS 36.104 and TS 37.104. The minimum
requirement is +6 dB power bosting for one NB-IoT RB located within E-UTRA
transmission bandwidth configuration for in-band operation or adjacent to the
E-UTRA transmission bandwidth configuration edge as close as possible for
guard band operation (except for guard band operation with E-UTRA 5 MHz
channel bandwidth). Legacy deployment should be taken into account and similar
hardware capability should be maintained. Hence +6 dB power boosting should be
kept for the migration scenario. Meanwhile +6 dB power boosting will be
challenging when NB-IoT is located at NR edge positions since NR spectrum
utilization with 15 kHz SCS is much higher than EUTRA for > 5 MHz channel
bandwidth. Considering these aspects, power boosting for NB-IoT operation in
NR in-band is defined as below,
  * For 5 MHz and 10 MHz channel bandwidth, specify the minimum +6 dB power boosting requirement for in-band 180 kHz NB-IoT RB.
  * For 15 MHz channel bandwidth, specify the minimum +6 dB power boosting requirement for in-band center 77x180 kHz plus 15 kHz at each edge.
  * For 20 MHz channel bandwidth, specify the minimum +6 dB power boosting requirement for in-band center 102x180 kHz plus 15 kHz at each edge.
  * For >20 MHz channel bandwidth, specify the minimum +6 dB power boosting requirement for in-band 180 kHz NB-IoT RB within center 90% of NR channel bandwidth.
  * For >10 MHz channel bandwidth, specify +3 dB power boosting requirement for other in-band 180 kHz NB-IoT RBs.
  * BS manufacturer can declare support of higher power boosting.
5.2.3 Numerologies
As NR could support several numerologies, e.g. 15KHz, 30KHz and 60KHz in FR1
which might be different from NB-IoT numerologies (15KHz SCS in downlink and
15KHz/3.75KHz SCS in the uplink), there might exist mixed numerology
configuration which would result in interference between NR subcarrier and NB-
IoT subcarrier when NB-IoT carrier is deployed within NR carrier. In general,
guard band between different numerology should be reserved for performance
protection, however this should be up to the BS implementation. Similar as the
mixed numerology in NR scenarios, no requirement is defined for mixed
numerology between NR and NB-IoT.
## 5.3 NB-IoT operating in NR guard-band
### 5.3.1 Spectrum utilization consideration
Compared to LTE which has fixed spectrum utilization for channel bandwidth
larger than and equal to 3 MHz, the spectrum utilization has been improved for
NR especially for 15 kHz SCS and channel bandwidth larger than 5MHz. Spectrum
utilization values in Rel-15 are the results of companies' compromise. In
those cases, NB-IoT operating in NR guard band need further increase the
spectrum utilization hence it is agreed that no RF requirement will be
specified in Rel.15/Rel.16 as stated in Clause 5.3.3.. For SCS other than 15
kHz, in some scenarios, the spectrum utilization may be less than that in LTE.
For those scenarios some extra guard need to be considered for the co-
existence of mixed numerology. As agreed in Clause 5.2.3, no requirement would
be specified for mixed numerology. Again the spectrum utilization was
optimized for 30 kHz and 60 kHz SCS, the operation in guard band will depend
on the implementation margin and need to be investigated case by case.
### 5.3.2 Refarming consideration
When refarming the LTE carrier to NR carrier with the existence of downlink
anchor guard-band NB-IoT operations, keeping same NB-IoT carrier frequency,
NB-IoT might partially operate in NR in-band and partially in NR guard band as
shown in figure 5.3.1.
{width="6.595138888888889in" height="3.127083333333333in"}
Figure 5.3.1: Downlink anchor guard-band NB-IoT operation for 10MHz LTE
channel bandwidth refarming to 15kHz SCS with 100kHz channel raster NR
As shown in figure 5.3.1, due to the carrier shift by 15kHz, the guard-band
NB-IoT PRB operating in the upper half of the LTE 10MHz channel bandwidth will
not be aligned with NR PRB 51, which results in one NB-IoT subcarrier falling
into NR guard band. However, the frequency distance from NB-IoT PRB edge to NR
channel bandwidth edge is not smaller than the minimum NR guard band. Thus
there will be no issue for the radio to support this case.
So it is concluded that considering legacy deployments, even if one NB-IoT 15
kHz sub-carrier would operate in NR guard band, still consider this case as
NB-IoT operation in NR in-band.
### 5.3.3 Conclusion
NB-IoT operating in NR guard band would be handled as implementation issue and
RF requirements will not be specified in Rel-15 (nor in Rel-16 unless new
Rel-16 features make this essential).
## 5.4 NB-IoT standalone operating
**In Rel-13 when introduction of NB-IoT in the specifications, for stand-alone
operation mode, the coexistence between NB-IoT and legacy LTE/UMTS/GSM systems
was verified both for the downlink and uplink in TR 36.802. The summary** of
system level simulation results for coexistence study between Rel-15 NR and
Rel-13/14/15 NB-IoT standalone operation is provided in annex A. **Based on
coexistence study, the RF requirements such as ACLR and ACS for NB-IoT was
defined to guarantee coexistence with the legacy systems. And for FR1 the LTE
ACLR and ACS requirements are reused for NR. Hence there should be no issue
for NB-IoT standalone coexistence with NR.**
**In addition, in Rel-15 MSR specification, standalone NB-IoT+LTE+NR** Multi-
Standard operation is supported with capability set (CS17). The corresponding
core requirements and conformance testing are already handled in MSR
specifications.
## 5.5 **Synchronization between NR and NB-IoT**
In order to analyze the NB-IoT coexisting with NR, longest CP and shortest CP
for NR are considered as two extreme cases in which whether timing
misalignment between NB-IoT and NR would exceed CP or not could be identified.
If 15kHz SCS is used in the NR carrier where NR has the longest CP, then the
TAGs misalignment analysis between NB-IoT and NR will be the same as that
between NB-IoT and E-UTRA. Therefore, there should be no interference issue
due to TAGs misalignment between NB-IoT and NR if 15kHz SCS is used in the NR
system, otherwise such issue would have occurred already between NB-IoT and
E-UTRA before the migration to NR. Meanwhile some detailed analysis is done in
Case 1 where it could be found that timing misalignment between NB-IoT and NR
is still within the CP, this also indicates there should be no interference
issues due to TAGs misalignment.
On the other hand, if 30kHz or 60kHz SCS is used in the NR carrier, the NB-IoT
UE maximum transmit timing error of 101.33Ts (=80Ts+13.33Ts+8Ts) alone as
explained in the following will be larger than the CP length of the NR symbol.
Therefore, when the NR UE maximum transmit timing error (which is varied
according to the SCS used in the NR carrier) is also considered, there would
potentially be interference issue due to the inter-symbol-interference between
the NB-IoT and NR symbols as illustrated in Case 2. However, it has been
agreed that this type of mixed numerology cases between NB-IoT and NR should
be up to the BS implementation and no requirement is defined in the RAN4
specifications. Feasible BS implementation options include separate digital
filtering and internal gap between the NB-IoT and NR carriers.
**Case 1: the timing misalignment scenario with NR SCS 15KHz**
For NR UE transmit timing, if uplink subcarrier spacing is configured with
15KHz and SSB SCS is configured with 15KHz which is specified with worst
transmit timing error for uplink SCS 15KHz, the maximum transmit timing error
should be 12*64*Tc+256*Tc+8*64*Tc equal to (12+4+8)*64*Tc equal to 24*Ts which
is the same as the maximum LTE UE transmitting error. Based on the above
considerations, maximum arrival timing difference between NR carrier and NB-
IoT carrier should be 4.0798s as shown in Figure 5.5-1 which is less than the
NR CP length 4.96us if SCS 15KHz is configured for NR.
{width="4.090277777777778in" height="1.5763888888888888in"}
Figure 5.5-1. the maximum arrival timing difference between NR and NB-IoT in
Uplink
**Case 2: the timing misalignment scenario with NR SCS 60KHz**
For NR UE transmit timing, if uplink subcarrier spacing is configured with
60KHz and SSB SCS configured with 30KHz which is specified with the worst
transmit timing error for uplink SCS 60KHz, the maximum transmit timing error
should be 10*64*Tc+128*Tc+8*64*Tc/4 equal to 14 Ts (0.4557us). Based on the
above consideration, the maximum arrival timing difference between NR carrier
an NB-IoT carrier should be 3.7542us as shown in Figure 5.5-2 which is larger
than the NR CP length 1.17us if SCS 60KHz is configured for NR.
{width="4.194444444444445in" height="1.6597222222222223in"}
Figure 5.5-2. the maximum arrival timing difference between NR and NB-IoT in
Uplink
### 5.5.1 Background
The specified E-UTRA TDD configurations are listed in Table 5.5.1.
NB-IoT TDD was specified in Release 15. Due to the lack of available
resources, RAN1 agreed to not specify NB-IoT TDD for configuration #0 and #6
(red in Table 5.5.1). Moreover, to avoid any slot truncations, only TDD
configuration #1 and #4 (green in Table 5.5.1) are supporting NB-IoT 3.75 kHz
SCS. Due to the above reasons, TDD Test Models used for BS RF conformance
testing (TS 36.141 [7]) are based on configuration #1 and special subframe
configuration 8 when testing E-UTRA with NB-IoT in-band/guard band TDD.
> Table 5.5.1. Specified LTE TDD configurations
**Uplink-downlink** **configuration** | **Downlink-to-Uplink** **Switch-point periodicity** | **Subframe number** | **Number of subframes / frame** |  |  |  |  |  |  |  |  |  |  |   
---|---|---|---|---|---|---|---|---|---|---|---|---|---|---  
|  | **0** | **1** | **2** | **3** | **4** | **5** | **6** | **7** | **8** | **9** | **DL** | **UL** | **S**  
0 | 5 ms | D | S | U | U | U | D | S | U | U | U | 2 | 6 | 2  
1 | 5 ms | D | S | U | U | D | D | S | U | U | D | 4 | 4 | 2  
2 | 5 ms | D | S | U | D | D | D | S | U | D | D | 6 | 2 | 2  
3 | 10 ms | D | S | U | U | U | D | D | D | D | D | 6 | 3 | 1  
4 | 10 ms | D | S | U | U | D | D | D | D | D | D | 7 | 2 | 1  
5 | 10 ms | D | S | U | D | D | D | D | D | D | D | 8 | 1 | 1  
6 | 5 ms | D | S | U | U | U | D | S | U | U | D | 3 | 5 | 2  
NR TDD configurations are very flexible. Comparing to E-UTRA TDD, no
predefined pattern has been specified which makes possible to configure TDD
according to any specific need. Two different _patterns_ might be configured
(RRC), and for each pattern following parameters are defined:
\- The _periodicity_.
\- The _number of slots_ (one for downlink, one for uplink)
> \- The _number of symbols_ (one for downlink, one for uplink), this number
> of symbols could be used to define an equivalent to LTE special sub-frame.
### 5.5.2 TDD synchronization
#### 5.5.2.1 General
NR and NB-IoT TDD synchronization could be managed:
  * Either by defining one or two NR patterns (section 5.5.2.2).
  * Overriding UE specific dedicated configuration (section 5.5.2.3).
#### 5.5.2.2 NR TDD patterns for synchronization with NB-IoT
Following figures show how to configure NR TDD to operate NB-IoT both 15 kHz
and 3.75 kHz SCS:
  * Figure 5.5.1-1 using one NR pattern to align with LTE configuration #1.
  * Figure 5.5.1-2 using two NR patterns to align with LTE configuration #4.
{width="6.840277777777778in" height="1.2708333333333333in"}
> Figure 5.5.1-1: NR TDD pattern to sync with LTE TDD configuration #1
{width="6.805555555555555in" height="1.25in"}
> Figure 5.5.1-2: NR TDD pattern to sync with LTE TDD configuration #4
#### 5.5.2.3 Overriding UE specific dedicated configuration
As mentioned before, for E-UTRA TDD configuration with NB-IoT operating in-
band and/or guard band, the agreed test model in Annex E.0A of TS 37.141 [8]
is based on configuration 1, with 5ms switch period and the special subframe
configuration 7, i.e. uplink/downlink subframe ratio is 1:2, DwPTS = 10
symbols, GP = 2 symbols, UpPTS = 2 symbols. The specific E-UTRA TDD
configuration is illustrated in the Figure 5.5.3-1.
{width="4.593055555555556in" height="1.75in"}
Figure 5.5.3-1. uplink/downlink configuration for E-UTRA TDD test model (2
frames for conformance testing)
According to NR slot configuration, UE specific dedicated configuration could
be used to override the flexible slots configured by the _SIB1 tdd-UL-DL-
Configuration_. For different SCS, the same ratio of DL and UL are assumed to
be configured, therefore based on the following Figure 5.5.3-2, the DL,UL and
special subframe could be configured by the UE specific configuration.
{width="6.688194444444444in" height="3.0277777777777777in"}
Figure 5.5.3-2. uplink/downlink configuration for E-UTRA TDD test model (2
frames for conformance testing)
The specific TDD configuration for 15 kHz SCS shown in the Figure 5.5.3-2
could be summarized in the following table 5.5.3-1.
Table 5.5.3-1: Configurations
* * *
Field name 15 kHz SCS _Tdd-UL-DL-Configuration_  
_referenceSubcarrierSpacing_ 15 Periodicity (ms) for _dl-UL-
TransmissionPeriodicity_ 5 _nrofDownlinkSlots_ 1 _nrofDownlinkSymbols_ 0
_nrofUplinkSlots_ 0 _nrofUplinkSymbols_ 0 _Tdd-UL-DL-ConfigDedicated_  
_nrofDownlinkSymbols_ For Slot#1: 11 _nrofUplinkSymbols_ For Slot#1: 2
_slotIndex_ 1 _nrofDownlinkSymbols_ 11 _nrofUplinkSymbols_ 2 _slotIndex_ 2, 3
_symbols_ allUplink _slotIndex_ 4 _symbols_ allDownlink
* * *
## 5.6 Specification and conformance impact
MSR BS supporting NR and LTE+NB-IoT (LTE in-band/guard band) could also meet
current RF requirements when operating NR+(LTE)+NB-IoT (NR in-band) with
following limitations:
  * Same NR channel bandwidth as LTE
  * NR uses 15 kHz SCS
  * NB-IoT carrier frequency kept when operating with LTE and NR, or shifted closer to NR carrier.
Therefore, MSR BS could operate NB-IoT in NR in-band with above limitations
and no need to redo conformance testing in this case.
To remove any limitation, specification update is needed to add support for
NB-IoT operating in NR in-band in TS 38.104, TS 38.141-1, TS 37.104 and TS
37.141 in Rel-16 the latest.
# 6 Summary
**For NB-IoT co-existence with NR,** 3 system scenarios have been studied: NB-
IoT operation in NR in-band, NB-IoT operation in NR guard band and NB-IoT
standalone operation.
For NB-IoT operation in NR in-band, RB alignment, power boosting and
numerologies have been addressed. NB-IoT and NR operating with 15 kHz SCS
could coexist in NR band while optimizing resource utilization by aligning
respective RBs. And similar as NR, no requirement on mixed numerology is
defined for coexistence between NB-IoT and NR.
For NB-IoT operation in NR guard band, the refarming scenarios have been
considered and it is concluded that even if one NB-IoT 15 kHz sub-carrier
would operate in NR guard band, still consider this case as NB-IoT operation
in NR in-band. NB-IoT operating in NR guard band would mean revisiting agreed
spectrum utilization in Rel-15, which would be too early. RF requirements will
not be specified in Rel-15 (nor in Rel-16 unless new Rel-16 features make this
essential).
For NB-IoT standalone operation, based on coexistence study, it is concluded
that **there is no issue for NB-IoT standalone coexistence with NR.**
**MSR BS supporting NR and E-UTRA+NB-IoT (E-UTRA in-band and guard) could
operate NB-IoT in NR in-band with the limitations listed in clause 5.6 and no
need to redo the conformance testing. To remove listed limitations,
specification update is needed** in Rel-16 for TS 38.104, TS 38.141-1, TS
37.104 and TS 37.141.
###### ### Annex A: Coexistence simulation
A.1 Downlink coexistence simulation results using legacy LTE/UMTS/GSM channel
model
The system level simulation methodology and assumptions in TR 36.802 for
coexistence study between NB-IoT standalone operation and legacy LTE/UMTS/GSM
systems are used here. 10MHz channel bandwidth are used for both LTE and NR
here, and 15kHz SCS is used for NR as it has a higher spectrum utilization
than 30kHz SCS for 10MHz channel bandwidth. Note that the NB-IoT BS ACLR2 of
50dBc is used here because the NB-IoT BS ACLR1 will fall into the 500kHz
internal guard-band of the 10MHz LTE channel, as well as the 312.5kHz minimum
guard-band of the 10MHz 15kHz SCS NR channel. Consequently, the overall ACIR
is dominate by the LTE or NR UE ACS1 of 33dBc.
The CDFs of the coupling loss between victim LTE UE and BS and the DL SINR of
victim LTE UE for 900MHz and 2GHz carrier frequency are shown in Figure A.1-1
below.
> {width="5.856944444444444in" height="4.356944444444444in"}
>
> {width="5.856944444444444in" height="4.356944444444444in"}
>
> **(a) With 900MHz carrier frequency**
>
> {width="5.856944444444444in" height="4.356944444444444in"}
>
> {width="5.856944444444444in" height="4.356944444444444in"}
>
> **(b) With 2GHz carrier frequency**
**Figure A.1-1: For LTE victim UE**
The CDFs of the coupling loss between victim NR UE and BS and the DL SINR of
victim NR UE for 900MHz and 2GHz carrier frequency are shown in Figure A.1-2
below.
> {width="5.856944444444444in" height="4.356944444444444in"}
>
> {width="5.856944444444444in" height="4.356944444444444in"}
>
> **(a) With 900MHz carrier frequency**
>
> {width="5.856944444444444in" height="4.356944444444444in"}
>
> {width="5.856944444444444in" height="4.356944444444444in"}
>
> **(b) With 2GHz carrier frequency**
**Figure A.1-2: For NR victim UE**
The average and 5%-tile DL throughput loss of the victim UE for the simulated
cases are summarized in Table A.1-1 below. It can be seen that the average and
5%-tile DL throughput loss of the victim LTE and NR UE are equal (with four
decimal point precision) in all simulated cases. This can be explained by the
fact that the only difference between the victim LTE and NR UE is the DL
bandwidth configuration which accounts to only [10log10(9.36e6/9e6)=]0.17dB
difference in the UE receiver noise floor, which is minimal compared to the
cumulative interference caused by the interfering NB-IoT BS to the DL SINR of
victim LTE and NR UE. Therefore, the average and 5%-tile DL throughput loss of
the victim NR UE are equal to those of the victim LTE UE (with four decimal
point precision).
**Table A.1-1: Average and 5%-tile DL throughput loss of the victim UE**
+------------------------------------------------------+---------+---------+ | > Victim UE | > LTE | > NR | +======================================================+=========+=========+ | > Average throughput loss (900MHz carrier frequency) | > 0.30% | > 0.30% | +------------------------------------------------------+---------+---------+ | > 5%-tile throughput loss (900MHz carrier frequency) | > 1.03% | > 1.03% | +------------------------------------------------------+---------+---------+ | > Average throughput loss (2GHz carrier frequency) | > 0.31% | > 0.31% | +------------------------------------------------------+---------+---------+ | > 5%-tile throughput loss (2GHz carrier frequency) | > 1.00% | > 1.00% | +------------------------------------------------------+---------+---------+
A.2 Downlink coexistence simulation results using NR channel model
Further simulation results are obtained using the system level simulation
methodology and assumptions in TR 36.802 but with the NR channel model in TR
38.901 instead of the legacy LTE/UMTS/GSM channel model. Only 2GHz carrier
frequency is simulated here as the use of BS antenna array in 900MHz has
limitation considering the required antenna array size with the longer
wavelength. A (4x8) antenna array is assumed here for the NR BS, while legacy
antenna is assumed for the UE as well as the LTE and NB-IoT BS.
The CDFs of the coupling loss between victim LTE UE and BS and the DL SINR of
victim LTE UE are shown in Figure A.2-1 below.
> {width="5.856944444444444in" height="4.356944444444444in"}
>
> {width="5.856944444444444in" height="4.356944444444444in"}
**Figure A.2-1: For LTE victim UE**
The CDFs of the coupling loss between victim NR UE and BS and the DL SINR of
victim NR UE are shown in Figure A.2-2 below.
> {width="5.856944444444444in" height="4.356944444444444in"}
>
> {width="5.856944444444444in" height="4.356944444444444in"}
**Figure A.2-2: For NR victim UE**
The average and 5%-tile DL throughput loss of the victim UE for the simulated
cases are summarized in Table A.2-1 below. It can be seen that the average and
5%-tile DL throughput loss of the victim LTE and NR UE are higher than those
using the legacy channel mode in Table A.1-1. This can be explained by the
fact that no MCL is applied for the NR channel model, and thus the coupling
loss between the victim UE and the interfering NB-IoT BS can be much smaller
using the NR channel model (below 50dB as shown in Figures A.2-1 and A.2-2)
compared to those using the legacy channel model in Figures A.1-1 and A.1-2
(where MCL is 70dB). This means that the impact from the interfering NB-IoT BS
to the DL SINR of victim LTE and NR UE can be much larger, especially for the
5%-tile DL throughput where the near-far effect is more severe. The 5%-tile DL
throughput loss of the victim UE will be greatly reduced if 70dB MCL is also
applied to the NR channel model, as shown in Table A.2-1 below. On the other
hand, it can be seen that the average DL throughput loss of the victim NR UE
is similar to those of the victim LTE UE, while the 5%-tile DL throughput loss
of the victim NR UE is lower than those of the victim LTE UE. This shows that
the UE specific beamforming used in the NR BS can effectively reduce the
impact from the interfering NB-IoT BS to the DL SINR of victim NR UE at the
cell edge.
**Table A.2-1: Average and 5%-tile DL throughput loss of the victim UE**
+-------------------------------------------+----------+---------+ | > Victim UE | > LTE | > NR | +===========================================+==========+=========+ | > Average throughput loss (without MCL) | > 2.21% | > 2.13% | +-------------------------------------------+----------+---------+ | > 5%-tile throughput loss (without MCL) | > 10.50% | > 7.80% | +-------------------------------------------+----------+---------+ | > Average throughput loss (with 70dB MCL) | > 1.35% | > 1.48% | +-------------------------------------------+----------+---------+ | > 5%-tile throughput loss (with 70dB MCL) | > 4.51% | > 1.90% | +-------------------------------------------+----------+---------+
A.3 Uplink coexistence simulation results using legacy LTE/UMTS/GSM channel
model
The system level simulation methodology and assumptions in TR 36.802 for
coexistence study between NB-IoT standalone operation and legacy LTE/UMTS/GSM
systems are used here. 10MHz channel bandwidth are used for both LTE and NR
here, and 15kHz SCS is used for NR as it has a higher spectrum utilization
than 30kHz SCS for 10MHz channel bandwidth. The number of active users in both
victim and interfering systems is 3. Note that the NB-IoT UE UL power control
parameter PLx-ile is bandwidth scaled targeting 15 dB uplink SNR at the
serving BS, and the NB-IoT UE ACLR of 37dBc is bandwidth scaled by the factor
10*log10(9e6 or 9.36e6/3/180e3) to account for the asymmetrical transmission
bandwidth. The LTE or NR BS ACS is 45dBc. Consequently, the overall ACIR is
dominate by the NB-IoT UE ACLR.
The CDFs of the LTE and NB-IoT UE transmit power and the UL SINR of victim LTE
UE for 900MHz and 2GHz carrier frequency are shown in Figure A.3-1 below.
> {width="5.856944444444444in" height="4.356944444444444in"}
>
> {width="5.856944444444444in" height="4.356944444444444in"}
>
> **(a) With 900MHz carrier frequency**
>
> {width="5.856944444444444in" height="4.356944444444444in"}
>
> {width="5.856944444444444in" height="4.356944444444444in"}
>
> **(b) With 2GHz carrier frequency**
**Figure A.3-1: For LTE victim UE**
The CDFs of the NR and NB-IoT UE transmit power and the UL SINR of victim NR
UE for 900MHz and 2GHz carrier frequency are shown in Figure A.3-2 below.
> {width="5.856944444444444in" height="4.356944444444444in"}
>
> {width="5.856944444444444in" height="4.356944444444444in"}
>
> **(a) With 900MHz carrier frequency**
>
> {width="5.856944444444444in" height="4.356944444444444in"}
>
> {width="5.856944444444444in" height="4.356944444444444in"}
>
> **(b) With 2GHz carrier frequency**
**Figure A.3-2: For NR victim UE**
The average and 5%-tile UL throughput loss of the victim UE for the simulated
cases are summarized in Table A.3-1 below. It can be seen that the average and
5%-tile UL throughput loss of the victim LTE and NR UE are similar in all
simulated cases. This can be explained by the fact that the only difference
between the victim LTE and NR UE is the UL bandwidth configuration which
accounts to only [10log10(9.36e6/9e6)=]0.17dB difference in the BS receiver
noise floor, which is minimal compared to the cumulative interference caused
by the interfering NB-IoT UE to the UL SINR of victim LTE and NR UE.
Therefore, the average and 5%-tile DL throughput loss of the victim NR UE are
similar to those of the victim LTE UE.
**Table A.3-1: Average and 5%-tile UL throughput loss of the victim UE**
+------------------------------------------------------+---------+---------+ | > Victim UE | > LTE | > NR | +======================================================+=========+=========+ | > Average throughput loss (900MHz carrier frequency) | > 0.73% | > 0.76% | +------------------------------------------------------+---------+---------+ | > 5%-tile throughput loss (900MHz carrier frequency) | > 0.30% | > 0.31% | +------------------------------------------------------+---------+---------+ | > Average throughput loss (2GHz carrier frequency) | > 0.72% | > 0.75% | +------------------------------------------------------+---------+---------+ | > 5%-tile throughput loss (2GHz carrier frequency) | > 0.34% | > 0.36% | +------------------------------------------------------+---------+---------+
A.4 Uplink coexistence simulation results using NR channel model
Further simulation results are obtained using the system level simulation
methodology and assumptions in TR 36.802 but with the NR channel model in TR
38.901 instead of the legacy LTE/UMTS/GSM channel model. Note that 70dB MCL is
also applied to the NR channel model as explained in annex A.2. Only 2GHz
carrier frequency is simulated here as the use of BS antenna array in 900MHz
has limitation considering the required antenna array size with the longer
wavelength. A (4x8) antenna array is assumed here for the NR BS, while legacy
antenna is assumed for the UE as well as the LTE and NB-IoT BS.
The CDFs of the LTE and NB-IoT UE transmit power and the UL SINR of victim LTE
UE are shown in Figure A.4-1 below.
> {width="5.820833333333334in" height="4.363888888888889in"}
>
> {width="5.820833333333334in" height="4.363888888888889in"}
**Figure A.4-1: For LTE victim UE**
The CDFs of the NR and NB-IoT UE transmit power and the UL SINR of victim NR
UE are shown in Figure A.4-2 below.
> {width="5.820833333333334in" height="4.363888888888889in"}
>
> {width="5.820833333333334in" height="4.363888888888889in"}
**Figure A.4-2: For NR victim UE**
The average and 5%-tile UL throughput loss of the victim UE for the simulated
cases are summarized in Table A.4-1 below. It can be seen that the average and
5%-tile UL throughput loss of the victim NR UE are higher than those of the
victim LTE UE. This can be explained by the fact that the NB-IoT UE ACLR of
37dBc is bandwidth scaled by a larger factor the factor 10*log10
(9.36e6/3/180e3) instead of 10*log10(9e6/3/180e3) to account for the higher
spectrum utilization of the NR BS compared to that of the LTE BS. However, the
average and 5%-tile UL throughput loss of the victim NR UE are still lower
than the 5% threshold for acceptable throughput degradation.
**Table A.4-1: Average and 5%-tile DL throughput loss of the victim UE**
+-------------------------------------------+---------+---------+ | > Victim UE | > LTE | > NR | +===========================================+=========+=========+ | > Average throughput loss (with 70dB MCL) | > 4.59% | > 4.68% | +-------------------------------------------+---------+---------+ | > 5%-tile throughput loss (with 70dB MCL) | > 2.58% | > 2.69% | +-------------------------------------------+---------+---------+
#