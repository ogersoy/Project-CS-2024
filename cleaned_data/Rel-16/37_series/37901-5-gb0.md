# Foreword
This Technical Report has been produced by the 3^rd^ Generation Partnership
Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
In the present document, modal verbs have the following meanings:
**shall** indicates a mandatory requirement to do something
**shall not** indicates an interdiction (prohibition) to do something
The constructions \"shall\" and \"shall not\" are confined to the context of
normative provisions, and do not appear in Technical Reports.
The constructions \"must\" and \"must not\" are not used as substitutes for
\"shall\" and \"shall not\". Their use is avoided insofar as possible, and
they are not used in a normative context except in a direct citation from an
external, referenced, non-3GPP document, or so as to maintain continuity of
style when extending or modifying the provisions of such a referenced
document.
**should** indicates a recommendation to do something
**should not** indicates a recommendation not to do something
**may** indicates permission to do something
**need not** indicates permission not to do something
The construction \"may not\" is ambiguous and is not used in normative
elements. The unambiguous constructions \"might not\" or \"shall not\" are
used instead, depending upon the meaning intended.
**can** indicates that something is possible
**cannot** indicates that something is impossible
The constructions \"can\" and \"cannot\" are not substitutes for \"may\" and
\"need not\".
**will** indicates that something is certain or expected to happen as a result
of action taken by an agency the behaviour of which is outside the scope of
the present document
**will not** indicates that something is certain or expected not to happen as
a result of action taken by an agency the behaviour of which is outside the
scope of the present document
**might** indicates a likelihood that something will happen as a result of
action taken by some agency the behaviour of which is outside the scope of the
present document
**might not** indicates a likelihood that something will not happen as a
result of action taken by some agency the behaviour of which is outside the
scope of the present document
In addition:
**is** (or any other verb in the indicative mood) indicates a statement of
fact
**is not** (or any other negative verb in the indicative mood) indicates a
statement of fact
The constructions \"is\" and \"is not\" do not indicate requirements.
# 1 Scope
The present document contains the findings of the Study on 5G NR User
Equipment (UE) application layer data throughput performance and the proposed
test procedures.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or non‑specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 38.101-1: \"NR; User Equipment (UE) radio transmission and
reception; Part 1: Range 1 Standalone\".
[3] 3GPP TS 38.521-4: \"NR; User Equipment (UE) conformance specification;
Radio transmission and reception; Part 4: Performance requirements\".
[4] 3GPP TS 38.101-4: \"NR; User Equipment (UE) radio transmission and
reception; Part 4: Performance requirements\".
[5] 3GPP TS 36.321: \"Evolved Universal Terrestrial Radio Access (E-UTRA);
Medium Access Control (MAC) protocol specification\"
[6] 3GPP TS 36.322: \"Evolved Universal Terrestrial Radio Access (E-UTRA);
Radio Link Control (RLC) protocol specification\"
[7] 3GPP TS 36.323: \"Evolved Universal Terrestrial Radio Access (E-UTRA);
Packet Data Convergence Protocol (PDCP) specification\"
[8] 3GPP TS 38.323: \"NR; Packet Data Convergence Protocol (PDCP)
specification\"
[9] 3GPP TS 38.523: \"5GS; User Equipment (UE) conformance specification; Part
1: Protocol\"
[10] 3GPP TS 38.321: \"NR; Medium Access Control (MAC) protocol
specification\"
[11] 3GPP TS 38.322: \"NR; Radio Link Control (RLC) protocol specification\"
[12] RFC 768
[13] RFC 791
[14] RFC 793
[15] RFC 2460
[16] RFC 8200
[17] 3GPP TS 38.214: \"NR; Physical layer procedures for data\".
[18] 3GPP TS 38.508-1: \"5GS; User Equipment (UE) conformance specification;
Part 1: Common test environment\"
# 3 Definitions of terms, symbols and abbreviations
## 3.1 Terms
For the purposes of the present document, the terms given in TR 21.905 [1] and
the following apply. A term defined in the present document takes precedence
over the definition of the same term, if any, in TR 21.905 [1].
## 3.2 Symbols
Void.
## 3.3 Abbreviations
For the purposes of the present document, the abbreviations given in TR 21.905
[1] and the following apply. An abbreviation defined in the present document
takes precedence over the definition of the same abbreviation, if any, in TR
21.905 [1].
# 4 General
## 4.1 Background
The newly-deployed 5G radio access technologies are providing a very large
increase in data transmission capacity in mobile networks. This is being
matched and even exceeded by a corresponding increase in the demand for data
from users of the latest data-hungry devices and applications.
It is therefore essential that data devices achieve high efficiency when using
data services and do not unduly load the network regardless of the maximum
data rate that they are capable of achieving.
There is an interest to add 5G NR UE Application-Layer Data Throughput
Measurements under various simulated network conditions to their Performance
Items area of activity. As a result RAN5 recommending and produce the test
procedures.
## 4.2 Study Item Objective
The technical objectives of this study item are:
Fixed reference measurement channels:
a) Use existing fixed reference measurement channels scenarios already defined
in TS 38.101-4 [4] and TS 38.521-4 [3] test specifications to develop test
procedures to measure 5G NR UE data throughput performance at the application-
layer. Adaptation of existing test cases from the TS 38.521-4 [3]
specification will be part of the study with goal to determine best test
points candidates.
Variable reference measurement channels:
b) analysis of suitable link adaptation scenarios and development of
corresponding 5G NR application layer throughout test procedures An analysis
of upper layer protocols and parameters impacting application layer throughout
measurements will also be provided.
Note 1: There is significant industry interest in performing application layer
throughput measurements with variable reference measurement channels (link
adaptation) as this represents a scenario closer to real world deployments.
The Rel-11 SI \"Study on UE Application Layer Data Throughput\"
(FS_UE_App_Data_Perf) captured results for UMTS and LTE in a Technical Report
TR 37.901. For the SI \" Study on 5G NR User Equipment (UE) application layer
data throughput performance\" that is proposed here it is intended to create a
new Technical Report for which the following structure is proposed:
> \- Definition of 5G NR Application Layer Data Throughput Performance
>
> \- List of parameters to be measured:
\- Application Layer Throughput (Downlink and Uplink)
> \- Test configuration and upper layer parameters
>
> \- Transport Layer protocol used for data transfer
>
> \- Application Layer protocol used for data transfer
>
> \- Test environment (signal levels, fading profiles, fixed and link
> adaptation based scheduling, SA/NSA, FR1/FR2, etc.):
>
> \- Data transfer scenarios (TCP/UDP, DL/UL/Bidirectional)
>
> \- Minimum Test Time and Iterations (align with LTE)
>
> \- Test Procedures for 5G NR UE Application layer throughput performance
The test procedures developed will measure the achieved average application-
layer data rates (e.g. using TCP or UDP) of the UE standalone or/and in
combination with a laptop under simulated realistic network scheduling and
radio conditions in a repeatable lab-based environment (i.e. using lab-based
simulators and other necessary equipment).
Note 2: The point of measurement on the UE side will be either in a connected
PC for terminals that support tethered mode only, or inside the UE in case of
a terminal that does not support tethered mode (and supports embedded mode),
or in both places for UEs that support both modes.
The test procedures will be developed in a flexible manner to accommodate
various test conditions. The exact simulated network scheduling and down link
radio conditions to be used will be determined during the study. It is
envisaged that in addition to some measurements under \"ideal conditions\", an
initial set of suitable scheduling/radio conditions to be used by the test
systems, will be defined to simulate typical network conditions. Additional
optional conditions may be developed later as and when required.
Other issues that the Study Item may investigate include:
\- The definition of a reliable and repeatable test environment to ensure the
best possible repeatability of the results. This could include the definition
of a reference laptop configuration, applications in the UE or/and the Laptop
that would measure the throughput, etc.
\- The impact from the lower layers data throughput on the application-layer
data throughput, especially when variable radio conditions are applied.
# 5 Study on 5G NR UE Application Layer Data Throughput Performance
## 5.1 Definition of Application Layer Data Throughput Performance
### 5.1.1 Definition of End Points
The test procedures defined will measure the throughput of data end to end
from a server to the terminating end on the user side.
The termination on the user side will be:
A. Inside the terminal in case of a handset that can install an embedded
client application. This is considered the default mode of testing as it
provides an accurate measure of user experience.
B. Alternatively, in a connected PC in case of a handset or data module that
does not support embedded mode (lacks UI, no embedded application installation
possible, etc.).
For tethered connections, the UE is tethered to a laptop using the appropriate
UE to PC interface Modem or Network Interface Connection (NIC) drivers as
recommended by the UE manufacturer for the intended use by the customer/user.
In most cases, a laptop with an embedded modem is considered to be a tethered
data configuration as opposed to an embedded data configuration due to the UE
to PC interface. It is noted that the physical layer capabilities of the UE to
PC Interface Connection can limit the UE Application Layer Data Throughput
performance. Care should be taken to ensure that the physical layer
capabilities of the UE to PC Interface Connection do not affect the
performance results.
For non-tethered or embedded connections as in the case of embedded
applications or applications running on the UE itself, the end points are the
application running on the UE and a corresponding Data Server that is adjacent
to the simulated lab-based Core Network and is the default mode of connection
for devices that support this mode.
For tethered connections, the end points are the application running on the PC
connected to the UE and a corresponding Data Server that is adjacent to the
simulated lab-based Core Network. In this case, the PC drivers (typically USB)
will also play a role in the UE Application Layer Data Throughput performance.
## 5.2 Parameters for Measurement
### 5.2.1 Throughput
The 5G NR UE Application Layer Data Throughput as defined in clause 5.1.1
shall be a parameter for measurement. The parameter would apply for any chosen
application. The throughput can be measured in each direction (downlink and
uplink).
## 5.3 Test Configurations
### 5.3.1 5G NR UE Application Layer Data Throughput Test Equipment
The test equipment utilized for 5G NR UE Application Layer Data Throughput
shall consistent of the following items.
Data client test application(s) for the UE for embedded mode operation, which
shall be default mode for devices supporting this mode.
\- For tethered mode operation, Laptop/PC and appropriate UE to PC interface
Modem or Network Interface Connection (NIC) drivers and any associated cabling
as recommended by the UE manufacturer for the intended use by the
customer/user.
\- Data client test application for the PC for tethered mode operation.
\- System Simulator(s) suitable for the 5G NR radio technology used for
testing with necessary IP connectivity.
\- Application Servers.
\- Faders and AWGN Sources capable of supporting the radio environments
defined.
### 5.3.2 UE Application Layer Data Throughput Connection Diagrams
#### 5.3.2.1 UE Application Layer Data Throughput Connection Diagram for
Tethered
The UE Application Layer Data Throughput connection diagram for tethered
operation is shown in Figure C.1.
#### 5.3.2.2 UE Application Layer Data Throughput Connection Diagram for
Embedded
The UE Application Layer Data Throughput connection diagram for embedded
operation is shown in Figure C.2.
### 5.3.3 RF Connection Diagrams for UE Application Layer Data Throughput
The RF connections between the SS and the UE shall be in compliance with the
associated RF connection diagrams specified in the test procedure clauses in
Annex A. As the RF connection diagrams vary based on device type and UE
category, it is preferable to reference appropriate RF connection diagrams for
similar test configurations in the core test specifications. The RF connection
diagrams are to be based on the representative RF connection diagrams
referenced in 38.521-4 [3].
### 5.3.4 UE Specific Items
There are no UE specific items identified at this time that are required to
support the UE Application Layer Data Throughput testing herein. This item is
FFS.
## 5.4 Transport and Application Layer Protocols
### 5.4.1 Transport Layer Protocol
For the transport layer protocol, TCP and UDP are considered. It is proposed
to test with both TCP and UDP as measurements utilizing each transport
protocol are relevant.
The following items highlight the need for TCP transport.
\- Most of the applications that need reliable data transfers use TCP as
transport layer.
\- The throughput is sensitive to the end-to-end delay.
\- Good for testing FTP/HTTP in bi-directional tests in asymmetric data rate
links because the downlink speeds are limited by uplink speeds. For FTP/HTTP
data transfers in one direction, the TCP ACKs are transmitted in the other
direction, therefore delay in receiving TCP ACK in one direction negatively
impacts FTP/HTTP throughput in the other direction.
The following items highlight the need for UDP transport.
\- The performance of UDP based data transfer, unlike TCP based transfer, is
Operating System agnostic
\- Real-Time Transport Protocols used by most of Multi Media Applications are
based on UDP protocol.
\- UDP Data Transfer in one direction (uplink/downlink) is not dependent on
the other direction characteristics, unlike with TCP.
### 5.4.2 Application Layer Protocol
The following items have been considered for appropriate application layer
protocols that utilize TCP as a transport protocol.
\- FTP
\- TFTP
\- SFTP
\- HTTP
\- VoIP (RTP-based)
To reduce the amount of testing, it is proposed to use [FTP or raw TCP data
transfer]. FTP (File Transfer Protocol) runs on top of TCP/IP and is
frequently used in applications where download/upload performance would be
noticeable to the end user.
The following list identifies the reasons not to duplicate testing across the
other application layer protocols.
\- SFTP and HTTP both use TCP as a transport protocol. So it is redundant to
use HTTP/SFTP protocols to test data throughput when FTP protocol is used.
\- For test purposes, HTTP is typically used to benchmark the browser\'s
rendering capabilities as a functional test. Download performance in terms of
relative throughput is not as noticeable to the end user as it would be for
file downloads.
\- SFTP is process intensive and used to exercise the security engine within
the UE.
\- TFTP is typically used in embedded devices to update the firmware in a
reliable way using a low footprint stack to avoid using the full TCP stack.
TFTP is a request-response protocol and is not a candidate for performance
analysis.
\- VoIP (RTP-based) applications are diverse in nature and application
compatibility is an issue for a standard set of UE Application Layer Data
Throughput Performance test procedures.
For UDP, it is proposed to use raw data transfer as opposed to defining a
streaming protocol to simplify the UDP transfer application requirements.
#### 5.4.2.1 TCP Settings
It is recommended that the TCP client/server used for testing meet the
following requirements:
\- The TCP send/receive buffer sizes at the server should be set to values
sufficiently large to ensure they do not limit the maximum throughput
achievable at the UE
\- The tx queue length should be set to a value sufficiently large value to
ensure flow control between the network interface (ppp) and TCP is not
triggered
For embedded testing, which is considered the default mode, the embedded
client will reside in the UE under test. This will require an application to
be installed on the UE. It is recommended that this application meet the
following requirements:
\- The embedded application should allow the user to transfer files of formats
supported by the UE, in binary mode, both in the Downlink and the Uplink.
\- The embedded application should provide the means to compute the throughput
T as defined in clause 5.1.1 at the end of each file transfer.
\- The embedded application should provide an interface allowing automation of
testing. If an interface for automation of testing is implemented, it is
recommended to use the embedded data client automation recommendations in
Annex F.
\- The embedded application should not implement hidden optimizations that
might impact the throughput.
It is recommended that the TCP data application used on the tethered PC for
tethered testing (when embedded cannot be performed) meet the following
requirements:
\- The tethered TCP application should allow the user to transfer files of any
format supported by the tethered PC, in binary mode, in both the Downlink and
the Uplink
\- The tethered TCP application should provide the means to compute the
throughput T as defined in subclause 5.1.1 at the end of each file transfer
\- The tethered TCP application should provide an interface allowing
automation of testing
\- The tethered TCP application t should not implement hidden optimizations
that might impact the throughput
An example of a TCP raw data generating application meeting these requirements
is the iperf. This example is cited for information only and does not in any
way preclude the use of other applications meeting the recommended
requirements.
The following settings are to be used.
\- The TCPWindowSize is derived based on the bandwidth-delay product (BDP) for
the particular radio access bearer used in the test. Refer to clause 5.4.2.1.1
for guidance concerning the TCP advertised receiver window size setting.
\- The TCPWindowSize is adjusted to near even-multiple of TCP MTU. The Windows
Scaling is enabled for all FTP transfers.
\- The socket buffer sizes are set to even-multiples of TCP MTU in use and set
to values equal or greater than the BDP.
\- The TCP MTU size is set to a value comprised between 1280 and 1500 bytes as
recommended by the manufacturer.
\- Either IPv4 or IPv6 can be used, but only results obtained with the same IP
address type can be compared, since the IP address type will affect the
measured throughput.
##### 5.4.2.1.1 TCP advertised receiver window size setting
In order to achieve maximum throughput during FTP testing, the TCP advertised
receiver window size must be equal to or greater than the BDP (Bandwidth Delay
Product), which can be expressed as follows:
BDP = TCP data rate * RTT
Where:
TCP data rate is the portion of the radio bearer used to send TCP data
RTT is the unloaded Round Trip Time between TCP end-points (FTP server and
tethered laptop/embedded FTP app) as seen by the TCP sender.
Note that the TCP data rate and the RTT may be different for different test
procedures.
#### 5.4.2.2 UDP Settings
It is recommended that the UDP server used for testing meet the following
requirements:
\- UDP blast duration shall be selected to meet the minimum test times using a
sufficient rate to prevent physical layer DTX based upon the UE Category.
For embedded testing, which is the default mode, the UDP client will reside in
the UE under test. This will require an UDP application to be installed on the
UE. It is recommended that this application meet the following requirements:
\- The embedded UDP application should allow the user to transfer files of
formats supported by the UE, in binary mode, both in the Downlink and the
Uplink.
\- The embedded UDP application should provide the means to compute the
throughput T as defined in subclause 5.1.1.
\- The embedded UDP application should provide an interface allowing
automation of testing. If an interface for automation of testing is
implemented, it is recommended to use the embedded data client automation
recommendations in Annex E.
\- The embedded UDP application should not implement hidden optimizations that
might impact the throughput.
It is recommended that the UDP application used on the tethered PC for
tethered testing (when embedded testing cannot be performed) meet the
following requirements:
\- The tethered UDP application should allow the user to transfer files of any
format supported by the tethered PC, in binary mode, in both the Downlink and
the Uplink.
\- The tethered UDP application should provide the means to compute the
throughput T as defined in subclause 5.1.1.
\- The tethered UDP application should provide an interface allowing
automation of testing.
\- The tethered UDP application should not implement hidden optimizations that
might impact the throughput.
The following settings are to be used.
\- The UDP MTU size is set to a value comprised between 1280 and 1500 bytes as
recommended by the manufacturer.
\- The UDP transfers are always carried out in Binary mode.
\- The contents of the files to be transferred over UDP are chosen in such a
way that they are statistically random, with least compressibility.
\- No application level compression protocols are used to compress the UDP
files.
\- Either IPv4 or IPv6 can be used, but only results obtained with the same IP
address type can be compared, since the IP address type will affect the
measured throughput.
### 5.4.3 Upper Layer impact on throughput measurements
#### 5.4.3.1 Overview
The NG user plane interface (NG-U) is defined between the NG-RAN node and the
5G User Plane Function (UPF). The user plane protocol stack of the NG
interface is shown on Figure 5.4.3.1-1. The transport network layer is built
on IP transport and GTP-U is used on top of UDP/IP to carry the user plane
PDUs between the NG-RAN node and the UPF.
Figure 5.4.3.1-1: NG-U Protocol Stack
NG-U provides non-guaranteed delivery of user plane PDUs between the NG-RAN
node and the UPF.
To understand the transport layer mechanisms better (as they are the key
component of end to end data throughput testing), it needs to be noted that
both gNB and ng-eNB are connected to 5GC over NG interface.
The transport layer for data streams over NG is an IP based Transport. The
following figure shows the transport protocol stacks over NG
Figure 5.4.3.1-2: Transport network layer for data streams over NG
The GTP-U (TS 29.281 [3]) protocol over UDP over IP shall be supported as the
transport for data streams on the NG interface. The data link layer is as
specified in clause 4.
The transport bearer is identified by the GTP-U TEID (TS 29.281 [3]) and the
IP address (source TEID, destination TEID, source IP address, destination IP
address).
For the purpose of understanding transport layer throughput aspect, it can be
focused on the below block diagram which depicts the key layer within which
data overhead has to be accounted when estimating expected end to end
throughput.
Transport Layer Protocols (TCP or UDP)
* * *
Ipv6 (RFC 2460 [15]) or Ipv4 (RFC 791 [13]) PDCP RLC MAC Physical Layer
Figure 5.4.3.1-3: 5G NR Data Plane Stack
#### 5.4.3.2 TCP/UDP Layer
Starting with the transport layer, it shall be assumed 1500 octets of MTU size
at IP layer throughout this discussion paper (as described in clause 2.3).
TCP header size is 24 octets, according to RFC 793 [14].
UDP header size is 8 octets, according to RFC 768 [12].
Worst case effective TCP payload = 1460 -- 24 = 1436 octets (IPv6) and 1476 --
24 = 1452 octets (IPv4).
Worst case effective UDP payload = 1460 -- 8 = 1452 octets (IPv6) and 1476 --
8 = 1468 octets (IPv4)
#### 5.4.3.3 IP Layer
Header size for IPv6 packet is 40 octets (RFC 8200 [16]) and 24 octets for
IPv4 packet (RFC 791 [13]).
Typical MTU size used is 1500 octets according to RFC 2460 [15].
Therefore, the worst case Effective payload = 1500 -- 40 = **1460** octets for
IPv6 and 1500 -- 24 = **1476** octets for IPv4
#### 5.4.3.4 PDCP Layer
Maximum supported size of PDCP SDU is 9000 octets, according to TS 38.323 [8]
.0 clause 4.3.1
Maximum overheads due to PDCP-SN and MAC-I are 7 octets, according to TS
38.523-1 [9] clauses 6.3.2 and 6.3.4.
For a typical MTU size of 1500 octet in IP layer, and considering 7 octets of
overhead, maximum allowable RLC Data field size is 1500+7 = 1507 octets.
#### 5.4.3.5 RLC Layer
Based on TS 38.322 [11] Clause 6.2.2, Maximum RLC PDU header size is 5 octets.
Allowable maximum MAC SDU is 1507+5 = 1512 octets
As per TS 38.321 [10], maximum MAC header size can be up to 3 octets, making
effective MAC payload size to be 1512+3 = 1515 octets
#### 5.4.3.6 Overhead between MAC and TCP/UDP layer
In this clause, it is calculated the cumulative overhead due to headers added
at each of the layers: MAC, RLC, PDCP, IP and TCP/UDP.
For UDP, cumulative overhead between MAC and UDP is (1516-1452)/1516 = 4.1 %
for IPv6
and (1516-1468)/1516 = 3.1 % for IPv4
For TCP, cumulative overhead between MAC and TCP is (1516-1436)/1516 = 5.5 %
for IPv6
And (1516-1452)/1516 = 4.4 % for IPv4
#### 5.4.3.7 Overhead for LTE
For LTE, maximum MAC and RLC header sizes are comparable to NR, according to
TS 36.321 [5] and TS 36.322 [6] respectively.
Based on TS 36.323 [7] , DRB PDCP headers can be up to 3 octets, this is lower
than NR PDCP overhead as discussed in clause 2.5.
Hence, the overhead calculated in clause 2.7 can be proposed for LTE.
#### 5.4.3.8 SA, NSA and NSA split-bearer
Overhead calculated in clause 2.7 is applicable for SA test mode.
For NSA Secondary Cell Group bearer and split-bearer case, similar overhead
can be used based on above discussion.
### 5.4.4 Summary of Upper Layer Parameters and Overhead from MAC to Transport
Layer
For a typical use case of 1500 octet Maximum Transmission Unit at IP layer,
the header sizes for Protocol layers above MAC layer is shown in Table
5.9.4-1.
Table 5.4.4‑1: Upper Layer Header Sizes
+----------------+---------------------+ | Protocol Layer | Header Size (Octet) | +================+=====================+ | TCP | 24 | +----------------+---------------------+ | UDP | 8 | +----------------+---------------------+ | IP | 40 for IPv6 | | | | | | 24 for IPv4 | +----------------+---------------------+ | SDAP | 1 for SA | +----------------+---------------------+ | PDCP | 7 | +----------------+---------------------+ | RLC | 5 | +----------------+---------------------+ | MAC | 3 | +----------------+---------------------+
Based on Table 5.4.4-1, it is derived overhead between MAC and TCP/UDP layer
as shown in Table 5.4.4-2 and Table 5.4.4-3, for IPv6 and IPv4 respectively.
Table 5.4.4‑2: Overhead between TCP/UDP layer and MAC layer for IPv6
Protocol Layer MAC PDU Size (Octet) Upper Layer PDU size [TCP/UDP] (Octet)
%Overhead = [1-(MAC PDU Size/Upper Layer PDU size)]x100 %
* * *
TCP 1516 1436 5.5 UDP 1516 1452 4.1
Table 5.4.4‑3: Overhead between TCP/UDP layer and MAC layer for IPv4
Protocol Layer MAC PDU Size (Octet) Upper Layer PDU size [TCP/UDP] (Octet)
%Overhead = [1-(MAC PDU Size/Upper Layer PDU size)]x100 %
* * *
TCP 1516 1452 4.4 UDP 1516 1468 3.1
In summary:
\- For IPv4 TCP Application Layer Throughput tests, the measured throughput at
upper layer is around 5 % reduced from physical layer throughput.
\- For IPv4 UDP Application Layer Throughput tests, the measured throughput at
upper layer is around 3 % reduced from physical layer throughput.
\- For IPv6 TCP Application Layer Throughput tests, the measured throughput at
upper layer is around 6 % reduced from physical layer throughput.
\- For IPv6 UDP Application Layer Throughput tests, the measured throughput at
upper layer is around 4 % reduced from physical layer throughput.
## 5.5 Test Environment
### 5.5.1 Conducted Testing for 5G NR FR1
##### 5.5.1.1 Signal Levels
The signal levels chosen for test should either be representative of field
conditions or appropriate for the test purpose of the particular test
procedure defined.
In order to optimize test time and to focus on the appropriate set of signal
levels for test, it is proposed to leverage the signal levels for test
associated with the associated performance test procedures in TS 38.521-4 [3]
or to limit the number of signal levels for the majority of the downlink
performance tests to a representative range. For test cases that would require
specific geometries to be set, this approach is reasonable and allows as much
re-use of existing test setups as possible.
However, one aspect of a receiver\'s performance that is not typically
addressed in the conformance testing is the ability of the receiver to perform
well across a range of signal levels in a relatively low-noise environment
where the UE noise floor may be the dominant factor in determining SNR. The
end user would expect the 5G NR UE Application Layer Data Throughput to
increase as the signal level is increased in relation to the UE noise floor or
to achieve relatively consistent 5G NR UE Application Layer Data Throughput if
located in a sufficient signal strength area such that the throughput has
reached a maximum.
#### 5.5.1.2 Fading Profiles
It is proposed to consider the following fading profiles to maintain
consistency with 3GPP defined fading profiles in TS 38.521-4 [3] that have
been developed to assess a UE\'s capability of performing in various multi-
path environments. Also, a static propagation condition should be considered
for any uplink testing and any downlink performance testing where the test
purpose does not specifically require fading (e.g. maximum throughput testing,
stress testing where the focus is on processor utilization aspects, etc.).
For 5G NR, the following defined 3GPP profiles have been considered depending
on the particular test procedure.
\- TDLA30
\- TDLC300
\- TDLB100
### 5.5.2 Radiated Testing for 5G NR FR2
##### 5.5.2.1 Signal Levels
The signal levels chosen for test should either be representative of field
conditions or appropriate for the test purpose of the particular test
procedure defined.
In order to optimize test time and to focus on the appropriate set of signal
levels for test, it is proposed to leverage the signal levels for test
associated with the associated performance test procedures in TS 38.521-4 [3]
or to limit the number of signal levels for the majority of the downlink
performance tests to a representative range. For test cases that would require
specific geometries to be set, this approach is reasonable and allows as much
re-use of existing test setups as possible.
#### 5.5.2.2 Fading Profiles
It is proposed to consider the following fading profiles to maintain
consistency with 3GPP defined fading profiles in TS 38.521-4 [3] that have
been developed to assess a UE\'s capability of performing in various
propagation environments. Also, a static propagation condition should be
considered for any uplink testing and any downlink performance testing where
the test purpose does not specifically require fading.
For 5G NR, the following defined 3GPP profiles have been considered depending
on the particular test procedure for FR2.
\- TDLA30-300
\- TDLA30-75
## 5.6 Data Transfer Scenarios
### 5.6.1 TCP Transfers
It is proposed to execute the following data transfer scenarios for TCP.
\- Downlink Only
\- Uplink Only
\- Bi-Directional (FFS on whether concurrent or alternating or both procedures
need to be defined)
### 5.6.2 UDP Transfers
It is proposed to execute the following data transfer scenarios for UDP.
\- Downlink Only
\- Uplink Only
\- Bi-Directional (FFS on whether concurrent or alternating or both procedures
need to be defined)
## 5.7 Statistical Analysis
### 5.7.1 Overview of Layer 1 throughput
When L1 throughput is measured during receiver and performance tests, the
fundamental goal is to compare the measured throughput around the expected
throughput for a specific reference measurement channel. Since the parameters
in receiver and performance tests are better known, it is possible to perform
this analysis.
In L1 throughput tests, there is a fixed reference channel so the number of
payload bits per block is constant. In a fixed reference channel, it can be
therefore can determine the maximum throughput.
With this knowledge, it is known that if the throughput limit at layer 1 is
defined as 70 % of the maximum throughput, a UE that just meets this limit
receives 70 % correct blocks of constant TBS (returns an ACK) and 30 %
corrupted or missed blocks (returns NACK or statDTX). Nevertheless, the error
events (corrupted or missed blocks) are mainly independent.
These facts allow one to derive statistics which tells us the variance of the
true throughput around the measured one. These statistics are used to
determine the minimum number of samples for a given confidence level for the
pass/fail decision.
Another aspect that impacts minimum test time is fading. The minimum test time
due to fading is long for slow speed propagation profiles and short for high
speed ones. The longer minimum test time of the two aspects (statistical or
fading) applies.
A quick analysis of all the FMCS test points that are proposed in the Annex,
to be used for 5G NR application layer throughput testing, gives a possible
way forward for determining a reasonable value for the minimum test time. All
these points are extracted from Annex G.3.5 in TS 38.521-4 [3] and listed
below in Table 4.1-1.
Table 5.7.1-1: Minimum Test time for the Selected FMCS test points
+---------+---------+---------+---------+---------+---------+---------+ | Test | TDD | Re | Demod | Minimum | Minimum | Minimum | | Group | UL-DL | ference | ulation | number | Number | Test | | | pattern | Channel | s | of | of | Time | | | | | cenario | active | Su | | | | | | ( | su | bframes | | | | | | doppler | bframes | | | | | | | speed) | (MNAS) | (MNS) | | | | | | | | after | | | | | | | | r | | | | | | | | ounding | | | | | | | | up to | | | | | | | | nearest | | | | | | | | t | | | | | | | | housand | | | | | | | | | | | | | | | | MNS= | | | | | | | | | | +=========+=========+=========+=========+=========+=========+=========+ | 1 | NA | R.PDSC | 400 Hz | 10000 | 11000 | 11s | | | | H.1-1.1 | | ( | | | | | | FDD | | Note 1) | | | +---------+---------+---------+---------+---------+---------+---------+ | 2 | NA | R.PDSC | 100 Hz | 20000 | 22000 | 22s | | | | H.1-2.1 | | (Note | | | | | | FDD | | 1) | | | +---------+---------+---------+---------+---------+---------+---------+ | 3 | NA | R.PDSC | 10 Hz | 75000 | 79000 | 79s | | | | H.1-2.2 | | ( | | | | | | FDD, | | Note 1) | | | | | | R.PDSC | | | | | | | | H.1-2.3 | | | | | | | | FDD, | | | | | | | | R.PDSC | | | | | | | | H.1-2.4 | | | | | | | | FDD, | | | | | | | | R.PDSC | | | | | | | | H.1-3.1 | | | | | | | | FDD, | | | | | | | | R.PDSC | | | | | | | | H.1-4.1 | | | | | | | | FDD, | | | | | +---------+---------+---------+---------+---------+---------+---------+ | 4 | FR | R.PDSC | 400 Hz | 10000 | 13000 | 12s | | | 1.30-1A | H.2-1.1 | | ( | | | | | | TDD | | Note 1) | | | +---------+---------+---------+---------+---------+---------+---------+ | 5 | F | R.PDSC | 100 Hz | 20000 | 26000 | 26s | | | R1.30-1 | H.2-2.1 | | (Note | | | | | | TDD, | | 1) | | | +---------+---------+---------+---------+---------+---------+---------+ | 6 | F | R.PDSC | 10 Hz | 75000 | 97000 | 97s | | | R1.30-1 | H.2-4.1 | | ( | | | | | | TDD, | | Note 1) | | | | | | R.PDSC | | | | | | | | H.2-3.1 | | | | | | | | TDD, | | | | | | | | R.PDSC | | | | | | | | H.2-2.2 | | | | | | | | TDD | | | | | | | | | | | | | | | | R.PDSC | | | | | | | | H.2-2.3 | | | | | | | | TDD | | | | | | | | | | | | | | | | R.PDSC | | | | | | | | H.2-2.4 | | | | | | | | TDD | | | | | +---------+---------+---------+---------+---------+---------+---------+ | Note 1: | | | | | | | | MNAS | | | | | | | | det | | | | | | | | ermined | | | | | | | | by | | | | | | | | simu | | | | | | | | lations | | | | | | | | in TS | | | | | | | | 3 | | | | | | | | 8.101-4 | | | | | | | | [4]. | | | | | | | | | | | | | | | | Note 2: | | | | | | | | For | | | | | | | | cases | | | | | | | | where | | | | | | | | MNS is | | | | | | | | not | | | | | | | | det | | | | | | | | ermined | | | | | | | | by | | | | | | | | simul | | | | | | | | ations, | | | | | | | | use | | | | | | | | same | | | | | | | | MNAS as | | | | | | | | the | | | | | | | | similar | | | | | | | | case | | | | | | | | si | | | | | | | | mulated | | | | | | | | (same | | | | | | | | doppler | | | | | | | | speed). | | | | | | | +---------+---------+---------+---------+---------+---------+---------+
### 5.7.2 Overview of Application Layer throughput
During the application layer data throughput, it can be also recorded ACK,
NACK and stat DTX in order to calculate the L1 payload bit throughput,
although this is not the main target of the test procedure. The measured
throughput and its comparison to an expected throughput value can be
evaluated. However, the parameters for this measurement are not as controlled
as in the case of layer 1 throughput.
In general, the application layer throughput is impacted by variations at the
physical layer. This is the reason for a variety of test points being picked
across different physical layer conditions (doppler, signal-to-noise ratio,
antenna configurations, etc.).
For fixed reference channel testing, the UE is compared against a predefined
limit at the physical layer. Therefore, statistics can be derived to determine
the minimum number of samples for a given confidence level for the pass/fail
decision. While the application layer data throughput is of a statistical
nature, in case of fixed reference channel testing, it is possible to set a
lower bound for the achievable throughput by computing the overhead due to
upper layers as done in [3].
However, it is clear that to determine the test times, the key factor is the
physical layer parameters specifically doppler/fading that provide the lower
bound for test times.
### 5.7.3 Test Time for Application Layer Throughput procedures
Based on the overview provided in clauses 5.7.1 and 5.7.2 along with the
observations recoded in Table 5.7.1-1 it can be categorized the required test
time as below:
\- For static channel tests, since 3G and 4G timeframe, 60 seconds has been
chosen to be a reasonable test time.
\- In Table 5.7.1-1, for test groups 1,2,4 and 5 a common value of 30 seconds
seems to be a reasonable test time. However considering these are high doppler
conditions and the impact of lower layer PHY mechanisms on upper layer
throughput, it is advisable to not use the \"last escape from corridor\"
depicted in Figure G.1.5 but give some additional allowance and use a 60
second test time.
\- In Table 5.7.1-1, for test groups 3 and 6, a value of 90 seconds would
serve as reasonable test time.
\- The test time used above is significantly above the \"minimum test time\"
governed by physical layer parameters. Therefore the number of iterations can
be chosen to be 3.
\- For stress tests, iteration number and time is FFS.
Table 5.7.3-1: Test Times for 5G NR App Tput
+-----------------+-------------------------+ | Channel Profile | Test Time per iteration | | | | | | (seconds) | +=================+=========================+ | Static | 60s | +-----------------+-------------------------+ | 100 Hz/400 Hz | 60s | +-----------------+-------------------------+ | 10 Hz | 90s | +-----------------+-------------------------+
## 5.8 Impact of Modem Performance in Application Layer Throughput
Modem performance has substantial impact on application layer throughput,
particularly when the tests are performed with AWGN with fading scenarios. The
section 5.8.1 shows how a modem performs against different channel condition
in a commercial conformance system. The subsequent article 5.8.2 discusses
about modem performance in application layer throughput tests and provides
reasoning why modem performance impacts application layer throughput tests.
### 5.8.1 Modem Performance in current TS 38.521-4 conformance tests
TS 38.521-4 includes many throughput test cases for covering variety of UE
categories. Set of these test cases covers following varying parameters:
\- AWGN level
\- Fading types
\- Doppler/UE speed
\- Power level
\- Modulation order
These test cases are in process of being verified and validated on
commercially available conformance test platforms. For conformance purposes,
it has a pass/fail criterion, but test platform also measures throughput,
ACK/NAK percentages for each test points.
Editor's note: data point collected on commercial system FFS
### 5.8.2 Modem Performance in Application Layer Data Throughput Tests
Application layer performance measuring the application layer throughput
exposes possible UE bugs in the upper layer which may be not be found in the
L1. There are multiple dependency in the upper layer protocols/algorithm which
can impact user perception of data throughput. Which is why testing
application layer throughput is important and add value to gauge user
experience.
The TCP was originally designed for wired network, where packet drop usually
occurs due to congestion, does not tailor to the fact that packet drop in
wireless can happen due to reason other than congestion, so TCP algorithms in
the like of slow-start and, first retransmit may not address wireless network
challenges. Apart from TCP algorithms, USB driver, IP configuration, embedded
application, router-ip tunnelling mechanism can also contribute to throughput
loss.
Network vendor may have also have their own algorithm to optimize the BLER
target in their live network and UE has to account for these different
algorithm while maintaining user perceived throughput.
Editor's note: Empirical data and analysis FFS
## 5.9 Test System Uncertainty and Test Tolerance
### 5.9.1 Test System Uncertainty and Test Tolerance for FR1 testing
#### 5.9.1.1 Recommended Uncertainty of Test System
The test system should fulfil the 3GPP test system uncertainty values for 5G
NR throughput tests specified in Annex F of TS 38.521-4 [3]. If a test system
cannot fulfil the 3GPP test system uncertainty requirements, then the test
system vendor shall declare its test system uncertainty values.
#### 5.9.1.2 Test Tolerances
Since there are no absolute minimum requirements nor PASS/FAIL requirements in
tests specified in the present TR the test tolerances are not defined which
should be understood as the applicable test tolerance being set to zero in all
tests. If PASS/FAIL requirements are recommended, appropriate analysis of test
tolerance shall be considered.
#### 5.9.1.3 Impact of Test System Uncertainty on Test Results
Test system uncertainties play a big role in application layer throughput
results. The tighter the uncertainty requirements are the more re-producible
and comparable the results are.
In TS 38.521-4 [3] applicable test system uncertainty has been specified for
each test case. Test System Uncertainty is a measure how accurately tester can
setup the certain parameter/signal level to the specified level. In 5G NR
throughput tests the most meaningful test system uncertainties are listed in
Annex F of 38.521-4.
These specified test system uncertainties are very tight requirements for test
systems. Typically the specified uncertainty values are the best that test
system vendors can achieve when their test systems are fully calibrated. Full
calibration means that each individual device, signal route and cable has to
be calibrated. Hence the calibration costs take quite a big share of total
costs of 3GPP compliant test systems.
There are several reasons why 3GPP has specified very tight requirements for
test system uncertainties. Some reason being highlighted below:
\- There is strong industry requirement that test systems should not PASS a
bad UE.
\- Loose test system uncertainties result in big test tolerances. The smaller
the test tolerances are the smaller is the probability that a test system
passes a bad UE. (Since minimum requirements are relaxed by the amount of test
tolerances there is a small chance that a bad UE passes the test thanks to
relaxed test requirements but UE would fail if test tolerances were zero)
\- The tests should be as reproducible as possible:
\- Without accurate test system calibration the test result may change from
day to day / from frequency to frequency.
\- The test results should be as comparable as possible from device to device
and from test system vendor to test system vendor:
\- All test systems should give a same PASS/FAIL verdict for one UE, and also
each test system should give roughly the same actual test results.
#### 5.9.1.4 Impact of Test System Uncertainty on Test Results for FR1
Table 5.9.1.4-1: Maximum test system uncertainty for FR1 FDD 2Rx
+----------------------+----------------------+----------------------+ | TS 38.521-4 | Maximum Test System | Derivation of Test | | Reference | Uncertainty | System Uncertainty | +======================+======================+======================+ | | | | +----------------------+----------------------+----------------------+ | 5.2.2.1.1_1 2Rx FDD | ± 0.9 dB for > 10Hz | Overall system | | | doppler | uncertainty for | | | | fading conditions | | | ± 1 dB for 10Hz | comprises four | | | doppler | quantities: | | | | | | | | 1. Signal-to-noise | | | | ratio uncertainty | | | | | | | | 2. Fading profile | | | | power uncertainty | | | | | | | | 3. Effect of AWGN | | | | flatness and signal | | | | flatness | | | | | | | | 4. SNR uncertainty | | | | due to finite test | | | | time | | | | | | | | Items 1, 2, 3 and 4 | | | | are assumed to be | | | | uncorrelated so can | | | | be root sum squared: | | | | | | | | AWGN flatness and | | | | signal flatness has | | | | x 0.25 effect on the | | | | required SNR, so use | | | | sensitivity factor | | | | of x 0.25 for the | | | | uncertainty | | | | contribution. | | | | | | | | Test System | | | | uncertainty = SQRT | | | | (Signal-to-noise | | | | ratio uncertainty | | | | ^2^ + Fading profile | | | | power uncertainty | | | | ^2^ + (0.25 x AWGN | | | | flatness and signal | | | | flatness) ^2^) + SNR | | | | uncertainty due to | | | | finite test time^2^ | | | | | | | | Signal-to-noise | | | | ratio uncertainty | | | | ±0.3 dB | | | | | | | | Fading profile power | | | | uncertainty ±0.7 dB | | | | for 2Tx | | | | | | | | AWGN flatness and | | | | signal flatness ±2.0 | | | | dB | | | | | | | | SNR uncertainty due | | | | to finite test time | | | | ±0.3 dB for 10Hz | | | | Doppler, otherwise | | | | ±0.0 dB | +----------------------+----------------------+----------------------+
Table 5.9.1.4-2: Maximum test system uncertainty for FR1 TDD 2Rx
TS 38.521-4 Reference Maximum Test System Uncertainty Derivation of Test
System Uncertainty
* * *
5.2.2.1.1_1 2Rx TDD Same as 5.2.2.1.1_1 2Rx FDD Same as 5.2.2.1.1_1 2Rx FDD
Table 5.9.1.4-3: Maximum test system uncertainty for FR1 FDD 4Rx
+----------------------+----------------------+----------------------+ | TS 38.521-4 | Maximum Test System | Derivation of Test | | Reference | Uncertainty | System Uncertainty | +======================+======================+======================+ | | | | +----------------------+----------------------+----------------------+ | 5.2.3.1.1_1 4Rx FDD | ± 0.9 dB for > 10Hz | Overall system | | | doppler | uncertainty for | | | | fading conditions | | | ± 1.0 dB for 10Hz | comprises four | | | doppler | quantities: | | | | | | | | 1. Signal-to-noise | | | | ratio uncertainty | | | | | | | | 2. Fading profile | | | | power uncertainty | | | | | | | | 3. Effect of AWGN | | | | flatness and signal | | | | flatness | | | | | | | | 4. SNR uncertainty | | | | due to finite test | | | | time | | | | | | | | Items 1, 2, 3 and 4 | | | | are assumed to be | | | | uncorrelated so can | | | | be root sum squared: | | | | | | | | AWGN flatness and | | | | signal flatness has | | | | x 0.25 effect on the | | | | required SNR, so use | | | | sensitivity factor | | | | of x 0.25 for the | | | | uncertainty | | | | contribution. | | | | | | | | Test System | | | | uncertainty = SQRT | | | | (Signal-to-noise | | | | ratio uncertainty | | | | ^2^ + Fading profile | | | | power uncertainty | | | | ^2^ + (0.25 x AWGN | | | | flatness and signal | | | | flatness) ^2^ + SNR | | | | uncertainty due to | | | | finite test time | | | | ^2^) | | | | | | | | Signal-to-noise | | | | ratio uncertainty | | | | ±0.3 dB | | | | | | | | Fading profile power | | | | uncertainty ±0.7 dB | | | | for 2Tx | | | | | | | | AWGN flatness and | | | | signal flatness ±2.0 | | | | dB | | | | | | | | SNR uncertainty due | | | | to finite test time | | | | ±0.3 dB for 10Hz | | | | Doppler, otherwise | | | | ±0.0 dB | +----------------------+----------------------+----------------------+
Table 5.9.1.4-4: Maximum test system uncertainty for FR1 TDD 4Rx
TS 38.521-4 Reference Maximum Test System Uncertainty Derivation of Test
System Uncertainty
* * *
5.2.3.2.1_1 4Rx TDD Same as 5.2.3.1.1_1 4Rx FDD Same as 5.2.3.1.1_1 4Rx FDD
### 5.9.2 Test System Uncertainty and Test Tolerance for FR2 testing
#### 5.9.2.1 Recommended Uncertainty of Test System
The test system should fulfil the 3GPP test system uncertainty values for 5G
NR throughput tests specified in Annex F of TS 38.521-4 [3]. If a test system
cannot fulfil the 3GPP test system uncertainty requirements, then the test
system vendor shall declare its test system uncertainty values.
#### 5.9.2.2 Test Tolerances
Since there are no absolute minimum requirements nor PASS/FAIL requirements in
tests specified in the present TR the test tolerances are not defined which
should be understood as the applicable test tolerance being set to zero in all
tests. If PASS/FAIL requirements are recommended, appropriate analysis of test
tolerance shall be considered.
#### 5.9.2.3 Impact of Test System Uncertainty on Test Results
Test system uncertainties play a big role in application layer throughput
results. The tighter the uncertainty requirements are the more re-producible
and comparable the results are.
In TS 38.521-4 [3] applicable test system uncertainty has been specified for
each test case. Test System Uncertainty is a measure how accurately tester can
setup the certain parameter/signal level to the specified level. In 5G NR
throughput tests the most meaningful test system uncertainties are listed in
Annex F of 38.521-4:
These specified test system uncertainties are very tight requirements for test
systems. Typically, the specified uncertainty values are the best that test
system vendors can achieve when their test systems are fully calibrated. Full
calibration means that each individual device, signal route and cable have to
be calibrated. Hence the calibration costs take quite a big share of total
costs of 3GPP compliant test systems.
There are several reasons why 3GPP has specified very tight requirements for
test system uncertainties. Some reason being highlighted below:
\- There is strong industry requirement that test systems should not PASS a
bad UE.
\- Loose test system uncertainties results in big test tolerances. The smaller
the test tolerances are the smaller is the probability that a test system
passes a bad UE. (Since minimum requirements are relaxed by the amount of test
tolerances there is a small chance that a bad UE passes the test thanks to
relaxed test requirements but UE would fail if test tolerances were zero).
\- The tests should be as reproducible as possible:
\- Without accurate test system calibration, the test result may change from
day to day / from frequency to frequency.
\- The test results should be as comparable as possible from device to device
and from test system vendor to test system vendor:
\- All test systems should give a same PASS/FAIL verdict for one UE, and also
each test system should give roughly the same actual test results.
#### 5.9.2.4 Impact of Test System Uncertainty on Test Results for FR2
Table 5.9.2.4-1: Maximum test system uncertainty for FR2 2Rx
+----------------------+----------------------+----------------------+ | TS 38.521-4 | Maximum Test System | Derivation of Test | | Reference | Uncertainty | System Uncertainty | +======================+======================+======================+ | | | | +----------------------+----------------------+----------------------+ | 7.2.2.2.1_1 | 2Tx, Rank 1: | Overall system | | | | uncertainty for | | | ± 1.82 dB for | fading conditions | | | Doppler \ \- Maximum throughput is defined with TBS corresponding to CQI index 15 with
> rank 2 for 2Rx/4Rx UE.
>
> \- Gspan = Max (G) -- Min (G), where G is the set of SNRs submitted by
> different companies to achieve T% of maximum throughput
>
> \- Gspan is based on simulation results from interested companies. Candidate
> option is Gspan = [2.5] dB.
#### 5.10.2.2 Methodology for Requirements Definition
After aligning the simulation results based on simulation alignment criteria
specified in clause 5.10.2.1, the absolute physical layer throughput
requirements can be defined as T% of maximum throughput that needs to be
achieved at (average SNR of impairments results to achieve T% of maximum
throughput + X dB margin).
### 5.10.3 Simulation Assumptions
The simulation assumptions are captured in Table 5.10.3-1 for studying
feasibility of defining link adaptation absolute physical layer requirements.
Table 5.10.3-1: Simulation assumptions for Absolute Physical Layer Throughput
alignment with link adaptation
+----------+----------+----------+----------+----------+----------+ | P | Unit | Test 1 | Test 2 | Test 3 | | | arameter | | | | | | +==========+==========+==========+==========+==========+==========+ | F | | FR1 | FR1 | FR2 | | | requency | | | | | | | range | | | | | | +----------+----------+----------+----------+----------+----------+ | B | MHz | 10 | 40 | 100 | | | andwidth | | | | | | +----------+----------+----------+----------+----------+----------+ | Su | kHz | 15 | 30 | 120 | | | bcarrier | | | | | | | spacing | | | | | | +----------+----------+----------+----------+----------+----------+ | Duplex | | FDD | TDD | TDD | | | Mode | | | | | | +----------+----------+----------+----------+----------+----------+ | TDD Slot | | N/A | 7D1S2U | DDSU | | | Confi | | | | | | | guration | | | S: | S:1 | | | | | | 6D+4G+4U | 1D+3G+0U | | +----------+----------+----------+----------+----------+----------+ | SNR | dB | 0:2:20 | 0:2:20 | 0:2:16 | | +----------+----------+----------+----------+----------+----------+ | Pro | | TDLA30-5 | TDLA30-5 | T | | | pagation | | | | DLA30-35 | | | channel | | | | | | +----------+----------+----------+----------+----------+----------+ | Antenna | | ULA Low | ULA Low | ULA Low | | | confi | | 2x2, | 2x2, | 2x2 | | | guration | | | | | | | | | ULA Low | ULA Low | | | | | | 2x4 | 2x4 | | | +----------+----------+----------+----------+----------+----------+ | Bea | | As | As | As | | | mforming | | defined | defined | defined | | | Model | | in Annex | in Annex | in Annex | | | | | B.4.1 in | B.4.1 in | B.4.1 in | | | | | TS | TS | TS | | | | | 38.101-4 | 38.101-4 | 38.101-4 | | +----------+----------+----------+----------+----------+----------+ | Receiver | | MMSE-IRC | MMSE-IRC | MMSE-IRC | | | type | | | | | | +----------+----------+----------+----------+----------+----------+ | PDSCH | Mapping | | Type A | Type A | Type A | | confi | type | | | | | | guration | | | | | | +----------+----------+----------+----------+----------+----------+ | | Starting | | 2 | 2 | 2 | | | symbol | | | | | | | (S) | | | | | +----------+----------+----------+----------+----------+----------+ | | Length | | 12 | 12 | 12 | | | (L) | | | | | +----------+----------+----------+----------+----------+----------+ | | PRB | | 2 | 2 | 2 | | | bundling | | | | | | | size | | | | | +----------+----------+----------+----------+----------+----------+ | | PRB | | Static | Static | Static | | | bundling | | | | | | | type | | | | | +----------+----------+----------+----------+----------+----------+ | | VR | | Non-int | Non-int | Non-int | | | B-to-PRB | | erleaved | erleaved | erleaved | | | mapping | | | | | | | int | | | | | | | erleaver | | | | | | | bundle | | | | | | | size | | | | | +----------+----------+----------+----------+----------+----------+ | PDSCH | DMRS | | Type 1 | Type 1 | Type 1 | | DMRS | Type | | | | | | confi | | | | | | | guration | | | | | | +----------+----------+----------+----------+----------+----------+ | | Number | | 1 | 1 | 1 | | | of | | | | | | | ad | | | | | | | ditional | | | | | | | DMRS | | | | | +----------+----------+----------+----------+----------+----------+ | | Maximum | | 1 | 1 | 1 | | | number | | | | | | | of OFDM | | | | | | | symbols | | | | | | | for DL | | | | | | | front | | | | | | | loaded | | | | | | | DMRS | | | | | +----------+----------+----------+----------+----------+----------+ | CSI | | As | As | As | | | mea | | s | s | s | | | surement | | pecified | pecified | pecified | | | channels | | in Table | in Table | in Table | | | (Note 2) | | A.4-2 of | A.4-2 of | A.4-1 of | | | | | TS | TS | TS | | | | | 3 | 3 | 3 | | | | | 8.101-4: | 8.101-4: | 8.101-4: | | | | | | | | | | | | Rank 1: | Rank 1: | Rank 1: | | | | | TBS.2-1 | TBS.2-3 | TBS.1-1 | | | | | | | | | | | | Rank 2: | Rank 2: | Rank 2: | | | | | TBS.2-2 | TBS.2-4 | TBS.1-2 | | +----------+----------+----------+----------+----------+----------+ | ZP | CSI-RS | | Periodic | Periodic | Periodic | | CSI-RS | resource | | | | | | confi | Type | | | | | | guration | | | | | | +----------+----------+----------+----------+----------+----------+ | | Number | | 4 | 4 | 4 | | | of | | | | | | | CSI-RS | | | | | | | ports | | | | | | | (_X_) | | | | | +----------+----------+----------+----------+----------+----------+ | | CDM Type | | FD-CDM2 | FD-CDM2 | FD-CDM2 | +----------+----------+----------+----------+----------+----------+ | | Density | | 1 | 1 | 1 | | | (ρ) | | | | | +----------+----------+----------+----------+----------+----------+ | | First | | Row 5, | Row 5, | Row 5, | | | su | | (4) | (4) | (8) | | | bcarrier | | | | | | | index in | | | | | | | the PRB | | | | | | | used for | | | | | | | CSI-RS | | | | | | | (k~0~) | | | | | +----------+----------+----------+----------+----------+----------+ | | First | | 9 | 9 | 13 | | | OFDM | | | | | | | symbol | | | | | | | in the | | | | | | | PRB used | | | | | | | for | | | | | | | CSI-RS | | | | | | | (l~0~) | | | | | +----------+----------+----------+----------+----------+----------+ | | CSI-RS | slot | 5/1 | 10/1 | 8/1 | | | | | | | | | | per | | | | | | | iodicity | | | | | | | and | | | | | | | offset | | | | | +----------+----------+----------+----------+----------+----------+ | NZP | CSI-RS | | Periodic | Periodic | A | | CSI-RS | resource | | | | periodic | | for CSI | Type | | | | | | acq | | | | | | | uisition | | | | | | +----------+----------+----------+----------+----------+----------+ | | Number | | 2 | 2 | 2 | | | of | | | | | | | CSI-RS | | | | | | | ports | | | | | | | (_X_) | | | | | +----------+----------+----------+----------+----------+----------+ | | CDM Type | | FD-CDM2 | FD-CDM2 | FD-CDM2 | +----------+----------+----------+----------+----------+----------+ | | Density | | 1 | 1 | 1 | | | (ρ) | | | | | +----------+----------+----------+----------+----------+----------+ | | First | | Row 3 | Row 3 | Row 3 | | | su | | (6) | (6) | (6) | | | bcarrier | | | | | | | index in | | | | | | | the PRB | | | | | | | used for | | | | | | | CSI-RS | | | | | | | (k~0~) | | | | | +----------+----------+----------+----------+----------+----------+ | | First | | 13 | 13 | 13 | | | OFDM | | | | | | | symbol | | | | | | | in the | | | | | | | PRB used | | | | | | | for | | | | | | | CSI-RS | | | | | | | (l~0~) | | | | | +----------+----------+----------+----------+----------+----------+ | | NZP | slot | 5/1 | 10/1 | Not | | | C | | | | co | | | SI-RS-ti | | | | nfigured | | | meConfig | | | | | | | | | | | | | | per | | | | | | | iodicity | | | | | | | and | | | | | | | offset | | | | | +----------+----------+----------+----------+----------+----------+ | CSI-IM | CSI-IM | | Periodic | Periodic | Periodic | | confi | resource | | | | | | guration | Type | | | | | +----------+----------+----------+----------+----------+----------+ | | CSI-IM | | Pattern | Pattern | Pattern | | | RE | | 0 | 0 | 1 | | | pattern | | | | | +----------+----------+----------+----------+----------+----------+ | | CSI-IM | | (4,9) | (4,9) | (8,13) | | | Resource | | | | | | | Mapping | | | | | | | | | | | | | | (k~CS | | | | | | | I-IM~,l~ | | | | | | | CSI-IM~) | | | | | +----------+----------+----------+----------+----------+----------+ | | CSI-IM | slot | 5/1 | 10/1 | Not | | | ti | | | | co | | | meConfig | | | | nfigured | | | | | | | | | | per | | | | | | | iodicity | | | | | | | and | | | | | | | offset | | | | | +----------+----------+----------+----------+----------+----------+ | ReportCo | | A | A | A | | | nfigType | | periodic | periodic | periodic | | +----------+----------+----------+----------+----------+----------+ | C | | Table 2 | Table 2 | Table 2 | | | QI-table | | | | | | +----------+----------+----------+----------+----------+----------+ | report | | cri-RI | cri-RI | cri-RI | | | Quantity | | -PMI-CQI | -PMI-CQI | -PMI-CQI | | +----------+----------+----------+----------+----------+----------+ | timeR | | not | not | not | | | estricti | | co | co | co | | | onForCha | | nfigured | nfigured | nfigured | | | nnelMeas | | | | | | | urements | | | | | | +----------+----------+----------+----------+----------+----------+ | ti | | not | not | not | | | meRestri | | co | co | co | | | ctionFor | | nfigured | nfigured | nfigured | | | Interfer | | | | | | | enceMeas | | | | | | | urements | | | | | | +----------+----------+----------+----------+----------+----------+ | cqi | | Wideband | Wideband | Wideband | | | -FormatI | | | | | | | ndicator | | | | | | +----------+----------+----------+----------+----------+----------+ | pmi | | Wideband | Wideband | Wideband | | | -FormatI | | | | | | | ndicator | | | | | | +----------+----------+----------+----------+----------+----------+ | Sub-band | RB | 8 | 16 | 8 | | | Size | | | | | | +----------+----------+----------+----------+----------+----------+ | c | | 1111111 | 1111111 | 1 | | | si-Repor | | | | 11111111 | | | tingBand | | | | | | +----------+----------+----------+----------+----------+----------+ | CS | slot | Not | Not | Not | | | I-Report | | co | co | co | | | per | | nfigured | nfigured | nfigured | | | iodicity | | | | | | | and | | | | | | | offset | | | | | | +----------+----------+----------+----------+----------+----------+ | A | | 5 | 9 | 7 | | | periodic | | | | | | | Report | | | | | | | Slot | | | | | | | Offset | | | | | | +----------+----------+----------+----------+----------+----------+ | CSI | | 1 in | 1 in | 1 in | | | request | | slots i, | slots i, | slots i, | | | | | where | where | where | | | | | mod(i, | mod(i, | mod(i, | | | | | 5) = 0, | 10) = 0, | 8) = 1, | | | | | o | o | o | | | | | therwise | therwise | therwise | | | | | it is | it is | it is | | | | | equal to | equal to | equal to | | | | | 0 | 0 | 0 | | +----------+----------+----------+----------+----------+----------+ | r | | 1 | 1 | 1 | | | eportTri | | | | | | | ggerSize | | | | | | +----------+----------+----------+----------+----------+----------+ | CSI-A | | One | One | One | | | periodic | | State | State | State | | | TriggerS | | with one | with one | with one | | | tateList | | As | As | As | | | | | sociated | sociated | sociated | | | | | Report | Report | Report | | | | | Confi | Confi | Confi | | | | | guration | guration | guration | | | | | | | | | | | | As | As | As | | | | | sociated | sociated | sociated | | | | | Report | Report | Report | | | | | Confi | Confi | Confi | | | | | guration | guration | guration | | | | | contains | contains | contains | | | | | pointers | pointers | pointers | | | | | to NZP | to NZP | to NZP | | | | | CSI-RS | CSI-RS | CSI-RS | | | | | and | and | and | | | | | CSI-IM | CSI-IM | CSI-IM | | +----------+----------+----------+----------+----------+----------+ | Codebook | Codebook | | t | t | t | | confi | Type | | ypeI-Sin | ypeI-Sin | ypeI-Sin | | guration | | | glePanel | glePanel | glePanel | +----------+----------+----------+----------+----------+----------+ | | Codebook | | 1 | 1 | 1 | | | Mode | | | | | +----------+----------+----------+----------+----------+----------+ | | (Code | | N/A | N/A | N/A | | | bookConf | | | | | | | ig-N1,Co | | | | | | | debookCo | | | | | | | nfig-N2) | | | | | +----------+----------+----------+----------+----------+----------+ | | C | | Not | Not | Not | | | odebookS | | co | co | co | | | ubsetRes | | nfigured | nfigured | nfigured | | | triction | | | | | +----------+----------+----------+----------+----------+----------+ | | RI | | N/A | N/A | N/A | | | Res | | | | | | | triction | | | | | +----------+----------+----------+----------+----------+----------+ | Physical | | PUSCH | PUSCH | PUSCH | | | channel | | | | | | | for CSI | | | | | | | report | | | | | | +----------+----------+----------+----------+----------+----------+ | CQ | ms | 6 | 5.5 | 1.375 | | | I/RI/PMI | | | | | | | delay | | | | | | +----------+----------+----------+----------+----------+----------+ | Maximum | | 1 | 1 | 1 | | | number | | | | | | | of HARQ | | | | | | | tran | | | | | | | smission | | | | | | +----------+----------+----------+----------+----------+----------+ | Test | | T% of | | | | | metric | | max | | | | | | | th | | | | | | | roughput | | | | | | | at | | | | | | | target | | | | | | | SNR. | | | | +----------+----------+----------+----------+----------+----------+ | Note 1: | | | | | | | Other | | | | | | | common | | | | | | | test | | | | | | | pa | | | | | | | rameters | | | | | | | are | | | | | | | defined | | | | | | | in | | | | | | | Section | | | | | | | 6.1.2 of | | | | | | | 38.101-4 | | | | | | | for | | | | | | | Tests 1 | | | | | | | and 2 | | | | | | | and | | | | | | | Section | | | | | | | 8.1.2 of | | | | | | | 38.101-4 | | | | | | | for Test | | | | | | | 3. | | | | | | | | | | | | | | Note 2: | | | | | | | PDSCH is | | | | | | | not | | | | | | | s | | | | | | | cheduled | | | | | | | on slots | | | | | | | co | | | | | | | ntaining | | | | | | | CSI-RS | | | | | | | for CSI | | | | | | | acqu | | | | | | | isition, | | | | | | | CSI-RS | | | | | | | for | | | | | | | tracking | | | | | | | and | | | | | | | CSI-RS | | | | | | | for beam | | | | | | | re | | | | | | | finement | | | | | | | (for | | | | | | | Test 3 | | | | | | | only). | | | | | | +----------+----------+----------+----------+----------+----------+
### 5.10.4 Simulation Results
In this section link level simulation results from different companies are
collected. The simulation results are prepared based on simulation assumptions
from Section 5.10.3.
Table 5.10.4-1 provides the information about the average SNR and SNR span of
simulations results from different companies. The SNR span is measured on
different percentage level on maximum achievable throughput. The maximum
achievable throughput is calculated under assumption of Rank 2 transmission
and MCS corresponding to the highest CQI (i.e. 15).
Table 5.10.4-1: SNR span in dB of simulation results
                    FR1 FDD   FR1 TDD   FR2
* * *
                    2 Rx UE   4 Rx UE   2 Rx UE   4 Rx UE   2 Rx UE
\% of Max T-put Avg Span Avg Span Avg Span Avg Span Avg Span 10 3.8 0.8 1.3
1.2 4.0 0.8 1.1 1.8 1.6 1.8 15 7.1 1.3 4.3 2.7 7.3 1.4 4.1 2.2 4.4 2.1 20 10.1
1.5 6.3 2.0 10.4 1.5 6.1 2.0 7.0 2.7 25 12.8 2.0 8.0 1.5 13.3 1.9 7.8 1.8 9.5
2.8 30 15.3 2.3 9.6 1.2 15.9 1.9 9.5 1.5 11.6 2.6 35 17.5 2.5 11.3 1.2 18.0
1.9 11.1 1.1 13.6 2.4 40 19.5 2.4 12.9 1.5 20.0 2.0 12.8 1.2 15.4 2.0 45 14.5
1.3 14.4 1.4  
50 16.0 0.9 16.0 1.5  
55 17.5 1.7 17.7 1.7  
60 18.8 1.1 19.0 1.3
### 5.10.5 Summary
The feasibility of defining absolute physical layer throughput requirements
under link adaptation has been evaluated. Based on the simulation alignment
criteria defined in clause 5.10.2.1 and link level simulation results in
clause 5.10.4 under the simulation assumptions listed in clause 5.10.3, it can
be concluded that it is feasible to define the absolute physical layer
throughput requirements under link adaptation, and corresponding requirements
shall be defined and specified afterwards using the methodology defined in
clause 5.10.2.2.
# 6 Conclusions
The UE application layer Data throughput study item was initiated by RAN5 to
include UE application layer Data throughput under various simulated network
conditions. The following aspects were included as part of this study,
Definition of UE application later data throughput performance
Parameters of measurements
Test configurations
Transport/application layer protocols
Test environment
Overhead analysis
Statistical analysis
Impact of modem performance in application layer throughput
Test uncertainty and test tolerance
Hence, the following items have been identified at the conclusion of the study
item
Definition of UE Application Layer Data Throughput Performance and
identification of the test end points
Identification of the test environment to include signal levels, fading
profiles, and noise and interference levels in conducted and radiated
environments to simulate typical network conditions with re-use of already
specified RAN4 radio conditions
Selection of particular test environment combinations from the above for test
points
Selection of particular test environments that create conditions that can
trigger undesired behaviour at the upper layers that are not covered in other
RAN5 test cases
Definition of downlink UDP and FTP test procedures for 5G NR SA and NSA modes
of operation
Identification of the test points for the above test procedures
Identification of flexible test procedures which were adapted from existing
RAN5 test procedures and conditions and extended to UE Application Layer Data
Throughput
Selection of transport and application layer protocols and data transfer
scenarios
Identification of FTP and UDP Settings, Reference FTP and UDP Server
Requirements, and FTP and UDP Application Requirements
Completion of Embedded and Tethered Testing Considerations by introducing
relevant connection diagrams
Consideration about the impact of test system uncertainty on test results and
confirmation of the Test System Uncertainty Recommendations
Impact from the lower layers data throughput on the application-layer data
throughput
Definition of Variable Reference measurements Channels (VRC) to analyse link
adaptation scenarios and their impact on application layer data throughput
Simulation results to define absolute physical layer throughput requirements
under link adaptation scenarios
As an outcome of the feasibility study of VRC channels for link adaptation
scenarios, new Release 18 work item was created to come up with minimum
requirements
This technical report includes a set of recommended test procedures for UE
Application Layer Data Throughput that is in-line with the study item
objectives identified in clause 4.
The test procedures are contained in Annex A with the specific test conditions
and environments covered in Annex B. The test procedures to provide a measure
of UE data performance at the application is yet to be concluded.
###### ## Annex A: Test Procedures
# A.1 Purpose of annex
This annex specifies the test procedures for 5G NR UE Application Layer Data
Throughput Performance. The test procedures are the result of the study item
and are the recommended test procedures to be used when evaluating UE
Application Layer Data Throughput Performance. The use of \"shall\" in the
test procedures listed herein is only used to indicate that the test procedure
purpose, procedure, and/or result may not be as expected if the specified
\"shall\" or \"must\" item is not used or followed. As the Technical Report is
informative in nature, the use of \"shall\" or \"must\" in the test procedures
is not meant to imply a specific requirement. Their use is meant to indicate
instances where the test objectives of the recommended test procedures may not
be achieved.
## A.1.1 General
The following test procedures will evaluate the UE Application Layer Data
Throughput Performance for 5G NR UE.
The UE should be tested in any data configuration that it supports with
embedded being the default mode and tethered mode used if embedded is not
supported.
A laptop with an embedded modem is considered to be a tethered data
configuration while an embedded data configuration due to the UE to PC
interface. Refer to the Tethered Data connection diagram in figure C.2.1-1.
For an embedded data configuration, the UE will be the endpoint of the
measurement and will have the appropriate data client test applications called
out in the test procedures. Refer to the Embedded Data connection diagram in
figure C.2.2-1.
For a tethered data configuration, the UE will be tethered to a laptop using
the appropriate UE to PC interface Modem or Network Interface Connection (NIC)
drivers as recommended by the UE manufacturer for the intended use by the
customer/user. Refer to the Tethered Data connection diagram in figure
C.2.1-1.
The propagation conditions and physical channel configurations are specified
within the test cases in TS 38.521-4 [3] from which the test points are
picked.
All throughput measurements in Annex A shall be performed according to the
following general rules:
\- The measured UE Application Layer Throughput, T, is defined in clause
5.1.1.
\- Minimum test time is necessary for both static and multipath fading
profiles to ensure stabilization of the TCP or UDP Application throughput. The
following table provides the test times to be applied.
Table A.1.1-1: Data Transfer Duration Times
Channel Profile Test Time per iteration
* * *
Static 60s 100 Hz/400 Hz 60s 10 Hz 90s
\- TCP parameters and transfer duration shall be selected according to the
test purpose to meet the minimum test times. Please refer to clause 5.4.2.1
for TCP setting details
\- UDP parameters and transfer duration shall be selected according to the
test purpose and to meet the minimum test times. Please refer to clause
5.4.2.2 for UDP setting details
The application layer data throughput performance for a UE will be determined
across multiple scenarios (2Rx/4Rx, Conducted/Radiated, SA/NSA, Static/Fading
Results shall be recorded for the following clauses which characterize the UE
performance across a variety of application layer scenarios utilizing both FTP
and UDP protocols.
\- TCP Downlink Performance
\- UDP Downlink Performance
\- TCP Uplink Performance
> \- UDP Uplink Performance
IP header compression will not be used.
The integrity protection algorithm of RRC and NAS messages shall be set to one
of the algorithms supported by the UE under test. The ciphering of RRC and NAS
messages and user plane data will be set to [null] for UDP and [AES] for TCP
to check CPU processing ability of UE.
The recorded UE throughput for the TCP and UDP Downlink and Uplink Performance
test procedures shall be based upon the simple average of 3 transfers for each
test condition as detailed in clause 5.7.
Unless otherwise stated, the UE output power for the tests shall be set0 dBm
with ±2 dBm tolerance.
Either IPv4 or IPv6 can be used, but only results obtained with the same IP
address type can be compared, since the IP address type will affect the
measured throughput. Refer to clause 5.4.4 for details on impact of headers,
to measured UDP/TCP throughput, which shall be incorporated into any
measurements.
CONDUCTED TCP DOWNLINK -- STATIC CHANNEL
# A.2 5G NR /TCP Downlink Throughput /Conducted/Static Peak Throughput for SA
and NSA
## A.2.1 5G NR /TCP Downlink Throughput /Conducted/Static Channel Peak
Throughput tests for SA and NSA
### A.2.1.1 5G NR /TCP Downlink Throughput /Conducted/Static Channel/ SA and
NSA (no Downlink Split Bearer)
##### A.2.1.1.1 Definition {#a.2.1.1.1-definition .H6}
The UE application layer downlink performance for TCP under different static
environment is determined by the UE application layer TCP throughput.
##### A.2.1.1.2 Test Purpose {#a.2.1.1.2-test-purpose .H6}
To measure the performance of the 5G NR UE while downloading TCP based data in
a static channel environment.
##### A.2.1.1.3 Test Parameters {#a.2.1.1.3-test-parameters .H6}
The common test parameters are defined in TS 38.521-4 [3] Table 5.5.1.3-1. The
parameters specified in TS 38.521-4 [3] Table 5.5.1.3-2 are applicable for
tests on FDD bands and parameters specified in TS 38.521-4 [3] Table 5.5.1.3-3
are applicable for tests on TDD bands. CORESET details are in TS 38.521-4 [3]
Table 5.5.1.3-4 and MCS indices for indicated UE capabilities are in TS
38.521-4 [3] Table 5.5.1.3-5. The test parameter selection procedure is
defined in TS 38.521-4 [3] clause 5.5.1.3.1. In addition, the following test
statements from TS 38.521-4 [3] clause 5.5.1.3 apply:
\- Unless otherwise stated, no user data is scheduled on slot #0, 10 and 11
within 20 ms for SCS 15 kHz.
\- Unless otherwise stated, no user data is scheduled on slot #0, 20 and 21
within 20 ms for SCS 30 kHz.
For NSA case, since this test is not focused on aggregated throughput, the
E-UTRA anchor is functional link and is setup via the parameters defined in
Annex E.
Test point is detailed in Annex D.1-5.
Table A.2.1.1.3-1 FR1 Static Channel Test Point
TS 38.521-4 Reference Reference channel Bandwidth (MHz) / Subcarrier spacing
(kHz) Modulation format and code rate TDD UL-DL pattern Propagation condition
PHY Reference value Comment
* * *
                                                                                                                                                                                                                                                                                              Fraction of maximum throughput (%)   SNR (dB)
5.5.1 As per tables in TS 38.521-4 [3] clause 5.5.1.3 and test parameter
selection as per TS 38.521-4 [3] 5.5.1.3.1. Static/ Clean Channel 85 % No
external noise sources are applied Peak Throughput
##### A.2.1.1.4 Test Description {#a.2.1.1.4-test-description .H6}
##### A.2.1.1.4.1 Initial Conditions {#a.2.1.1.4.1-initial-conditions .H6}
Initial conditions are a set of test configurations the UE needs to be tested
in and the steps for the SS to take with the UE to reach the correct
measurement state. Apply the Initial conditions defined in TS 38.521-4 [3]
clause 5.5.1.4.1 with the following additional steps and/or exceptions:
1.1 Connect an application server to the IP output of the SS.
1.2 For an embedded configuration, ensure that the UE has an client test
application available. For a tethered configuration, tether the UE to a laptop
configured with FTP client software using the appropriate UE to PC interface
Modem or Network Interface Connection (NIC) drivers.
5\. For NSA case, the E-UTRA anchor is configured as per Annex E. Ensure the
UE is in RRC_CONNECTED State with generic procedure parameters Connectivity NR
for NR/5GC with _Connected without Release_ On, _Test Mode_ Off, _Test Loop
Function_ Off or EN-DC, DC bearer MCG and SCG, _Connected without release_ On,
_Test Mode_ Off, _Test Loop Function_ Off for EN-DC. Message contents are as
per TS 38.521-4 [3] Table 5.5.1.4.3-1 through Table 5.5.1.4.3-8.
##### A.2.1.1.4.2 Test Procedure {#a.2.1.1.4.2-test-procedure .H6}
1\. SS sets the parameters of the bandwidth, MCS and DL reference channel
(RMC) according to the test parameter selection procedure defined in TS
38.521-4 [3] clause 5.5.1.3.1. The SS transmits PDSCH via PDCCH DCI format 1_1
for C_RNTI to transmit the DL RMC.
2\. SS sends uplink scheduling information for each UL HARQ process via PDCCH
DCI format 0_1 for C_RNTI to schedule the UL RMC over PUSCH according to
parameters set during initial conditions . The purpose of this scheduling is
to accommodate for TCP UL ACK/NACK feedback transmissions.
3\. Using the data client, begin TCP downlink data transfer from the
application server. Wait for 15 seconds and then start recording the TCP
throughput result. (This is iteration 1) Continue data transfer for the test
duration outlined in Table A.1-1.
4\. Repeat step 3 for 3 iterations within the same call as the first
iteration. Wait for at least 5 seconds between each iteration of the data
transfer.
5\. Calculate and record the average application layer data throughput across
three iterations. Additionally, count and record the overall number of ACK and
NACK/DTX on the PUSCH/PUCCH during the test interval. Record the IP address
type (IPv4 or IPv6) used during the TCP data transfers.
6\. Using the values in Table 5.4.4-2 (for IPv6) and Table 5.4.4-3 (for IPv4),
determine the reduction from PHY reference fractional throughput value listed
in Table A.2.1.1.3-1 to obtain reference Application Layer Throughput value.
### A.2.1.2 5G NR /TCP Downlink Throughput /Conducted/Static Channel/NSA
(Downlink Split Bearer)
##### A.2.1.2.1 Definition {#a.2.1.2.1-definition .H6}
The UE application layer downlink performance for TCP under different static
environment is determined by the UE application layer TCP throughput.
##### A.2.1.2.2 Test Purpose {#a.2.1.2.2-test-purpose .H6}
To measure the performance of the 5G NR UE while downloading TCP based data in
a static channel environment.
##### A.2.1.2.3 Test Parameters {#a.2.1.2.3-test-parameters .H6}
The common test parameters are defined in TS 38.521-4 [3] Table 9.4B.1.1.3-1.
The parameters specified in TS 38.521-4 [3] Table 9.4B.1.1.3-2 are applicable
for tests on FDD bands and parameters specified in TS 38.521-4 [3] Table
9.4B.1.1.3-3 are applicable for tests on TDD bands. CORESET details are in TS
38.521-4 [3] Table 9.4B.1.1.3-4 and MCS indices for indicated UE capabilities
are in TS 38.521-4 [3] Table 9.4B.1.1.3-5. The test parameter selection
procedure is defined in TS 38.521-4 [3] clause 9.4B.1.1.3.1. In addition, the
following test statements from TS 38.521-4 [3] clause 9.4B.1.1.3 apply:
\- Unless otherwise stated, no user data is scheduled on slot #0, 10 and 11
within 20 ms for SCS 15 kHz for the NR cell.
\- Unless otherwise stated, no user data is scheduled on slot #0, 20 and 21
within 20 ms for SCS 30 kHz for the NR cell.
For NSA case, the focus in this test is to measure aggregated throughput
therefore data rate over the E-UTRA carrier is also included in the
measurements. The aggregated data rate over E-UTRA and NR carriers is carried
out once the aforementioned test parameter selection in TS 38.521-4 [3] clause
9.4B.1.1.3.1 is completed.
Test point is detailed in Annex D.1-5.
Table A.2.1.2.3-1 FR1 Static Channel Test Point
TS 38.521-4 Reference Reference channel Bandwidth (MHz) / Subcarrier spacing
(kHz) Modulation format and code rate TDD UL-DL pattern Propagation condition
PHY Reference value Comment
* * *
                                                                                                                                                                                                                                                                                              Fraction of maximum throughput (%)   SNR (dB)
5.5.1 As per tables in TS 38.521-4 [3] clause 5.5.1.3 and test parameter
selection as per TS 38.521-4 [3] 5.5.1.3.1. Static/ Clean Channel 85 % No
external noise sources are applied Peak Throughput
##### A.2.1.2.4 Test Description {#a.2.1.2.4-test-description .H6}
##### A.2.1.2.4.1 Initial Conditions {#a.2.1.2.4.1-initial-conditions .H6}
Initial conditions are a set of test configurations the UE needs to be tested
in and the steps for the SS to take with the UE to reach the correct
measurement state. Apply the Initial conditions defined in TS 38.521-4 [3]
clause 9.4B.1.1.4.1 with the following additional steps and/or exceptions:
1.1 Connect an application server to the IP output of the SS.
1.2 For an embedded configuration, ensure that the UE has an client test
application available. For a tethered configuration, tether the UE to a laptop
configured with FTP client software using the appropriate UE to PC interface
Modem or Network Interface Connection (NIC) drivers.
5\. Setup an NSA call with E-UTRA anchor initially scheduled as per Annex E.
Ensure the UE is in state RRC_CONNECTED with generic procedure parameters
Connectivity EN-DC, DC bearer MCG and SCG, _Connected without release_ On,
_Test Mode_ Off, _Test Loop Function_ Off.
##### A.2.1.2.4.2 Test Procedure {#a.2.1.2.4.2-test-procedure .H6}
1\. SS sets the parameters of the bandwidth, MCS and DL reference channel
(RMC) according to the test parameter selection procedure defined in TS
38.521-4 [3] clause 5.5.1.3.1. The SS transmits PDSCH via PDCCH DCI format 1_1
for C_RNTI to transmit the DL RMC.
2\. SS sends uplink scheduling information for each UL HARQ process via PDCCH
DCI format 0_1 for C_RNTI to schedule the UL RMC over PUSCH according to
parameters set during initial conditions. The purpose of this scheduling is to
accommodate for TCP UL ACK/NACK feedback transmissions.
3\. Using the data client, begin TCP downlink data transfer from the
application server. Wait for 15 seconds and then start recording the TCP
throughput result. (This is iteration 1) Continue data transfer for the test
duration outlined in Table A.1-1.
4\. Repeat step 3 for 3 iterations within the same call as the first
iteration. Wait for at least 5 seconds between each iteration of the data
transfer.
5\. Calculate and record the average application layer data throughput across
three iterations. Additionally, count and record the overall number of ACK and
NACK/DTX on the PUSCH/PUCCH during the test interval. Record the IP address
type (IPv4 or IPv6) used during the TCP data transfers.
6\. Using the values in Table 5.4.4-2 (for IPv6) and Table 5.4.4-3 (for IPv4),
determine the reduction from PHY reference fractional throughput value listed
in Table A.2.1.2.3-1 to obtain reference Application Layer Throughput value.
CONDUCTED TCP DOWNLINK -- FADING (FRC)
# A.3 5G NR /TCP Downlink Throughput /Conducted for Fixed Reference Channel
(FRC) Scenarios with Fading for SA and NSA
## A.3.1 5G NR /TCP Downlink Throughput /Conducted/Fading/FRC for SA and NSA
### A.3.1.1 5G NR /TCP Downlink Throughput /Conducted/Fading/FRC/2Rx for SA
and NSA
#### A.3.1.1.1 5G NR /TCP Downlink Throughput /Conducted/Fading/2Rx/FR1 PDSCH
mapping Type A performance - 2x2 MIMO for SA and NSA
##### A.3.1.1.1.1 Definition {#a.3.1.1.1.1-definition .H6}
The UE application layer downlink performance for TCP is determined by the UE
application layer TCP throughput.
##### A.3.1.1.1.2 Test Purpose {#a.3.1.1.1.2-test-purpose .H6}
To measure the performance of the 5G NR UE using fixed reference channels and
under 2 receive antenna conditions while downloading TCP based data in fading
channel environment. The duplex mode is FDD.
##### A.3.1.1.1.3 Test Parameters {#a.3.1.1.1.3-test-parameters .H6}
The test points to be used in this test are defined in Table A.3.1.1.1.3-1.
Details of these test points are available in Annex D with the test points
below referenced directly from Table D.1-1.
Table A.3.1.1.1.3-1: FR1 FDD 2RX
TS 38.521-4 Reference Test num. Reference channel Modulation format
Propagation condition Correlation matrix and antenna configuration Reference
value Comment
* * *
                                                                                                                                                     Fraction of maximum throughput (%)   SNR (dB)
5.2.2.1.1_1 2Rx FDD 1-3 R.PDSCH.1-4.1 FDD 256AM, 0.82 TDLA30-10 2x2, ULA Low
70 25.6 Large TBS 5.2.2.1.1_1 2Rx FDD 1-4 R.PDSCH.1-2.1 FDD 16QAM, 0.48
TDLC300-100 2x2, ULA Low 30 2 High BLER 5.2.2.1.1_1 2Rx FDD 1-1 R.PDSCH.1-1.1
FDD QPSK, 0.30 TDLB100-400 2x2, ULA Low 70 0.1 High channel variation
5.2.2.1.1_1 2Rx FDD 2-1 R.PDSCH.1-3.1 FDD 64QAM, 0.51 TDLA30-10 2x2, ULA Low
70 20.4 High throughput Baseline Rx 5.2.2.1.1_2 2Rx FDD 3-1 R.PDSCH.1-2.2 FDD
16QAM, 0.48 TDLA30-10 2x2, ULA Medium 70 18.6 High throughput Enhanced Rx
Other test parameters are defined in TS 38.521-4 [3] Tables 5.2.2.1.1_1.4-1
and 5.2.2.1.1_1.4-2.
##### A.3.1.1.1.4 Test Description {#a.3.1.1.1.4-test-description .H6}
##### A.3.1.1.1.4.1 Initial Conditions {#a.3.1.1.1.4.1-initial-conditions .H6}
Initial conditions are a set of test configurations the UE needs to be tested
in and the steps for the SS to take with the UE to reach the correct
measurement state. Apply the Initial conditions defined in TS 38.521-4 [3]
clause 5.2.2.1.1_1.3.1 with the following additional steps and/or exceptions:
1.1 Connect an application server to the IP output of the SS.
1.2 For an embedded configuration, ensure that the UE has an client test
application available. For a tethered configuration, tether the UE to a laptop
configured with TCP client software using the appropriate UE to PC interface
Modem or Network Interface Connection (NIC) drivers.
5\. For NSA case, the E-UTRA anchor is configured as per Annex E. Ensure the
UE is in RRC_CONNECTED State with generic procedure parameters Connectivity NR
for NR/5GC with _Connected without Release_ On, _Test Mode_ Off or EN-DC, DC
bearer MCG and SCG, _Connected without release_ On, _Test Mode_ Off for EN-DC.
Message contents are as per TS 38.521-4 [3] clause 5.2.2.1.1_1.3.3 and
5.2.2.1.1_1.3.3_2 and Tables 5.2.2.1.1_1.3.3_1-1 through 5.2.2.1.1_1.3.3_1-4
with the exceptions define in Annex H.
##### A.3.1.1.1.4.2 Procedure {#a.3.1.1.1.4.2-procedure .H6}
1\. SS transmits PDSCH via PDCCH DCI format 1_1 for C_RNTI to transmit the DL
RMC according to TS 38.521-4 [3] Table 5.2.2.1.1.0-2. The SS sends downlink
MAC padding bits on the DL RMC.
2\. Set the parameters of the Modulation format and code rate, reference
channel, the propagation condition, the correlation matrix and the SNR
according to TS 38.521-4 [3] Tables 5.2.2.1.1_1.4-1 and 5.2.2.1.1_1.4-2 as
applicable to the test points in Table A.3.1.1.1.3-1.
3\. Using the data client, begin TCP downlink data transfer from the
application server. Wait for 15 seconds and then start recording the TCP
throughput result. (This is iteration 1) Continue data transfer for the test
duration outlined in A.1.1-1. Repeat transfer for iterations [2-3] within the
same call as the first iteration.
4\. Repeat step 3 for 3 iterations within the same call as the first
iteration. Wait for at least 5 seconds between each iteration of the data
transfer.
5\. Calculate and record the average application layer data throughput across
three iterations. Additionally, count and record the overall number of ACK and
NACK/DTX on the PUSCH/PUCCH during the test interval purely for information
purposes.
6\. Record the IP address type (IPv4 or IPv6) used during the TCP data
transfers.
7\. Using the values in Table 5.4.4-2 (for IPv6) and Table 5.4.4-3 (for IPv4),
determine the reduction from PHY reference fractional throughput value listed
in Table A.2.1.1.3-1 to obtain reference Application Layer Throughput value.
#### A.3.1.1.2 5G NR /TCP Downlink Throughput /Conducted/Fading/2Rx TDD/FR1
PDSCH mapping Type A performance - 2x2 MIMO for SA and NSA
##### A.3.1.1.2.1 Definition {#a.3.1.1.2.1-definition .H6}
The UE application layer downlink performance for TCP is determined by the UE
application layer TCP throughput.
##### A.3.1.1.2.2 Test Purpose {#a.3.1.1.2.2-test-purpose .H6}
To measure the performance of the 5G NR UE using fixed reference channels and
under 2 receive antenna conditions while downloading TCP based data in fading
channel environment. The duplex mode is TDD.
##### A.3.1.1.2.3 Test Parameters {#a.3.1.1.2.3-test-parameters .H6}
The test points to be used in this test are defined in Table A.3.1.1.2.3-1.
Details of these test points are available in Annex D with the test points
below referenced directly from Table D.1-2
Table A.3.1.1.2.3-1: FR1 TDD 2RX
Subtest Number Propagation condition Correlation matrix and antenna
configuration TS 38.521-4 Reference
* * *
                                                                                          Test Case               Test Number   Fraction of maximum throughput (%)   SNR (dB)
1 TDLA30-10 2x2, ULA Low 5.2.2.2.1_1 2Rx TDD 1-3 70 26.3 2 TDLC300-100 2x2,
ULA Low 5.2.2.2.1_1 2Rx TDD 1-4 30 2.5 3 TDLB100-400 2x2, ULA Low 5.2.2.2.1_1
2Rx TDD 1-1 70 -0.2 4 TDLA30-10 2x2, ULA Low 5.2.2.2.1_1 2Rx TDD 2-1 70 20.8 5
TDLA30-10 2x2, ULA Medium 5.2.2.2.1_1 2Rx TDD 3-1 70 19.0
Other test parameters are defined in TS 38.521-4 [3] Tables 5.2.2.2.1_1.4-1
and 5.2.2.2.1_1.4-2.
##### A.3.1.1.2.4 Test Description {#a.3.1.1.2.4-test-description .H6}
##### A.3.1.1.2.4.1 Initial Conditions {#a.3.1.1.2.4.1-initial-conditions .H6}
Initial conditions are a set of test configurations the UE needs to be tested
in and the steps for the SS to take with the UE to reach the correct
measurement state. Apply the Initial conditions defined in TS 38.521-4 [3]
clause 5.2.2.2.1_1.3.1 with the following additional steps and/or exceptions:
1.1 Connect an application server to the IP output of the SS.
1.2 For an embedded configuration, ensure that the UE has an client test
application available. For a tethered configuration, tether the UE to a laptop
configured with TCP client software using the appropriate UE to PC interface
Modem or Network Interface Connection (NIC) drivers.
5\. For NSA case, the E-UTRA anchor is configured as per Annex E. Ensure the
UE is in RRC_CONNECTED State with generic procedure parameters Connectivity NR
for NR/5GC with _Connected without Release_ On, _Test Mode_ Off or EN-DC, DC
bearer MCG and SCG, _Connected without release_ On, _Test Mode_ Off for EN-DC.
Message contents are as per TS 38.521-4 [3] clause 5.2.2.2.1_1.3.3 and
5.2.2.2.1_1.3.3_2 and Tables 5.2.2.2.1_1.3.3_1-1 through 5.2.2.2.1_1.3.3_1-4
with the exceptions defined in Annex H.
##### A.3.1.1.2.4.2 Procedure {#a.3.1.1.2.4.2-procedure .H6}
1\. SS transmits PDSCH via PDCCH DCI format 1_1 for C_RNTI to transmit the DL
RMC according to TS 38.521-4 [3] Table 5.2.2.2.1.0-2. The SS sends downlink
MAC padding bits on the DL RMC.
2\. Set the parameters of the Modulation format and code rate, reference
channel, the propagation condition, the correlation matrix and the SNR
according to TS 38.521-4 [3] Tables 5.2.2.2.1_1.4-1 and 5.2.2.2.1_1.4-2 as
applicable to the test points in Table A.3.1.1.2.3-1.
3\. Using the data client, begin TCP downlink data transfer from the
application server. Wait for 15 seconds and then start recording the TCP
throughput result. (This is iteration 1) Continue data transfer for the test
duration outlined in Table A.1-1-1. Repeat transfer for iterations [2-3]
within the same call as the first iteration.
4\. Repeat step 3 for 3 iterations within the same call as the first
iteration. Wait for at least 5 seconds between each iteration of the data
transfer.
5\. Calculate and record the average application layer data throughput across
three iterations. Additionally, count and record the overall number of ACK and
NACK/DTX on the PUSCH/PUCCH during the test interval purely for information
purposes.
6\. Record the IP address type (IPv4 or IPv6) used during the TCP data
transfers.
7\. Using the values in Table 5.4.4-2 (for IPv6) and Table 5.4.4-3 (for IPv4),
determine the reduction from PHY reference fractional throughput value listed
in Table A.2.1.1.3-1 to obtain reference Application Layer Throughput value.
### A.3.1.2 5G NR /TCP Downlink Throughput /Conducted/Fading/FRC/4Rx for SA
and NSA
#### A.3.1.2.1 5G NR /TCP Downlink Throughput /Conducted/Fading/FRC/4Rx
FDD/FR1 PDSCH mapping Type A performance - for SA and NSA
##### A.3.1.2.1.1 Definition {#a.3.1.2.1.1-definition .H6}
The UE application layer downlink performance for TCP is determined by the UE
application layer TCP throughput.
##### A.3.1.2.1.2 Test Purpose {#a.3.1.2.1.2-test-purpose .H6}
To measure the performance of the 5G NR UE using fixed reference channels and
under 2 receive antenna conditions while downloading TCP based data in fading
channel environment. The duplex mode is FDD.
##### A.3.1.2.1.3 Test Parameters {#a.3.1.2.1.3-test-parameters .H6}
The test points to be used in this test are defined in Table A.3.1.2.1.3-1.
Details of these test points are available in Annex D with the test points
below referenced directly from Table D.1-2.
Table A.3.1.2.1.3-1: FR1 FDD 4Rx
Subtest Number Propagation condition Correlation matrix and antenna
configuration TS 38.521-4 Reference
* * *
                                                                                          Test Case               Test Number   Fraction of maximum throughput (%)   SNR (dB)
1 TDLA30-10 2x4, ULA Low 5.2.3.1.1_1 4Rx FDD 1-3 70 22.0 2 TDLC300-100 2x4,
ULA Low 5.2.3.1.1_1 4Rx FDD 1-4 30 -0.6 3 TDLB100-400 2x4, ULA Low 5.2.3.1.1_1
4Rx FDD 1-1 70 -2.6 4 TDLA30-10 4x4, ULA Low 5.2.3.1.1_1 4Rx FDD 4-1 70 16.6 5
TDLA30-10 4x4, ULA Medium A 5.2.3.1.1_1 4Rx FDD 5-1 70 23.3
Other test parameters are defined in TS 38.521-4 [3] Tables 5.2.3.1.1_1.4-1
and 5.2.3.1.1_1.4-2.
##### A.3.1.2.1.4 Test Description {#a.3.1.2.1.4-test-description .H6}
##### A.3.1.2.1.4.1 Initial Conditions {#a.3.1.2.1.4.1-initial-conditions .H6}
Initial conditions are a set of test configurations the UE needs to be tested
in and the steps for the SS to take with the UE to reach the correct
measurement state. Apply the Initial conditions defined in TS 38.521-4 [3]
clause 5.2.3.1.1_1.3.1 with the following additional steps and/or exceptions:
1.1 Connect an application server to the IP output of the SS.
1.2 For an embedded configuration, ensure that the UE has an client test
application available. For a tethered configuration, tether the UE to a laptop
configured with TCP client software using the appropriate UE to PC interface
Modem or Network Interface Connection (NIC) drivers.
5\. For NSA case, the E-UTRA anchor is configured as per Annex E. Ensure the
UE is in RRC_CONNECTED State with generic procedure parameters Connectivity NR
for NR/5GC with _Connected without Release_ On, _Test Mode_ Off or EN-DC, DC
bearer MCG and SCG, _Connected without release_ On, _Test Mode_ Off for EN-DC.
Message contents are as per TS 38.521-4 [3] clause 5.2.3.1.1_1.3.3 and
5.2.3.1.1_1.3.3_2 and Tables 5.2.3.1.1_1.3.3_1-1 through 5.2.3.1.1_1.3.3_1-4
with the exceptions defined in Annex H.
##### A.3.1.2.1.4.2 Procedure {#a.3.1.2.1.4.2-procedure .H6}
1\. SS transmits PDSCH via PDCCH DCI format 1_1 for C_RNTI to transmit the DL
RMC according to TS 38.521-4 [3] Table 5.2.3.1.1.0-2. The SS sends downlink
MAC padding bits on the DL RMC.
2\. Set the parameters of the bandwidth, MCS, reference channel, the
propagation condition, the correlation matrix and the SNR according to TS
38.521-4 [3] Tables 5.2.3.1.1_1.4-1 and 5.2.3.1.1_1.4-2 as applicable to the
test points in Table A.3.1.2.1.3-1.
3\. Using the data client, begin TCP downlink data transfer from the
application server. Wait for 15 seconds and then start recording the TCP
throughput result. (This is iteration 1) Continue data transfer for the test
duration outlined in Table A.1-14. Repeat transfer for iterations [2-3] within
the same call as the first iteration.
4\. Repeat step 3 for 3 iterations within the same call as the first
iteration. Wait for at least 5 seconds between each iteration of the data
transfer.
5\. Calculate and record the average application layer data throughput across
three iterations. Additionally, count and record the overall number of ACK and
NACK/DTX on the PUSCH/PUCCH during the test interval purely for information
purposes.
6\. Record the IP address type (IPv4 or IPv6) used during the TCP data
transfers.
7\. Using the values in Table 5.4.4-2 (for IPv6) and Table 5.4.4-3 (for IPv4),
determine the reduction from PHY reference fractional throughput value listed
in Table A.2.1.1.3-1 to obtain reference Application Layer Throughput value.
#### A.3.1.2.2 5G NR /TCP Downlink Throughput /Conducted/Fading/FRC/4Rx
TDD/FR1 PDSCH mapping Type A performance - for SA and NSA
##### A.3.1.2.2.1 Definition {#a.3.1.2.2.1-definition .H6}
The UE application layer downlink performance for TCP is determined by the UE
application layer TCP throughput.
##### A.3.1.2.2.2 Test Purpose {#a.3.1.2.2.2-test-purpose .H6}
To measure the performance of the 5G NR UE using fixed reference channels and
under 4 receive antenna conditions while downloading TCP based data in fading
channel environment. The duplex mode is TDD.
##### A.3.1.2.2.3 Test Parameters {#a.3.1.2.2.3-test-parameters .H6}
The test points to be used in this test are defined in Table A.3.1.2.2.3-1.
Details of these test points are available in Annex D with the test points
below referenced directly from Table D.1-4.
Table A.3.1.2.2.3-1: FR1 TDD 4Rx
TS 38.521-4 Reference | Test num. | Reference channel | Bandwidth (MHz) / Subcarrier spacing (kHz) | Modulation format and code rate | TDD UL-DL pattern | Propagation condition | Correlation matrix and antenna configuration | Reference value | Comment |   
---|---|---|---|---|---|---|---|---|---|---  
|  |  |  |  |  |  |  | Fraction of maximum throughput (%) | SNR (dB) |   
5.2.3.2.1_1 4Rx TDD | 1-3 | R.PDSCH.2-4.1 TDD | 40 / 30 | 256QAM, 0.82 | FR1.30-1 | TDLA30-10 | 2x4, ULA Low | 70 | 22.5 | Large TBS  
5.2.3.2.1_1 4Rx TDD | 1-4 | R.PDSCH.2-2.1 TDD | 40 / 30 | 16QAM, 0.48 | FR1.30-1 | TDLC300-100 | 2x4, ULA Low | 30 | -0.3 | High BLER  
5.2.3.2.1_1 4Rx TDD | 1-1 | R.PDSCH.2-1.1 TDD | 40 / 30 | QPSK, 0.30 | FR1.30-1A | TDLB100-400 | 2x4, ULA Low | 70 | -3.1 | High channel variation  
5.2.3.2.1_1 4Rx TDD | 4-1 | R.PDSCH.2-2.4 TDD | 40 / 30 | 16QAM, 0.48 | FR1.30-1 | TDLA30-10 | 4x4, ULA Low | 70 | 16.4 | High throughput Baseline Rx  
5.2.3.2.1_1 4Rx TDD | 5-1 | R.PDSCH.2-2.3 TDD | 40 / 30 | 16QAM, 0.48 | FR1.30-1 | TDLA30-10 | 4x4, ULA Medium A | 70 | 23.9 | High throughput Enhanced Rx  
Other test parameters are defined in TS 38.521-4 [3] Tables 5.2.3.2.1_1.4-1
and 5.2.3.2.1_1.4-2.
##### A.3.1.2.2.4 Test Description {#a.3.1.2.2.4-test-description .H6}
##### A.3.1.2.2.4.1 Initial Conditions {#a.3.1.2.2.4.1-initial-conditions .H6}
Initial conditions are a set of test configurations the UE needs to be tested
in and the steps for the SS to take with the UE to reach the correct
measurement state. Apply the Initial conditions defined in TS 38.521-4 [3]
clause 5.2.3.2.1_1.3.1 with the following additional steps and/or exceptions:
1.1 Connect an application server to the IP output of the SS.
1.2 For an embedded configuration, ensure that the UE has an client test
application available. For a tethered configuration, tether the UE to a laptop
configured with TCP client software using the appropriate UE to PC interface
Modem or Network Interface Connection (NIC) drivers.
5\. For NSA case, the E-UTRA anchor is configured as per Annex E. Ensure the
UE is in RRC_CONNECTED State with generic procedure parameters Connectivity NR
for NR/5GC with _Connected without Release_ On, _Test Mode_ Off or EN-DC, DC
bearer MCG and SCG, _Connected without release_ On, _Test Mode_ Off for EN-DC.
Message contents are as per TS 38.521-4 [3] clauses 5.2.3.2.1_1.3.3 and
5.2.3.2.1_1.3.3_2 and Tables 5.2.3.2.1_1.3.3_1-1 through 5.2.3.2.1_1.3.3_1-4
with the exceptions defined in Annex H.
##### A.3.1.2.2.4.2 Procedure {#a.3.1.2.2.4.2-procedure .H6}
1\. SS transmits PDSCH via PDCCH DCI format 1_1 for C_RNTI to transmit the DL
RMC according to TS 38.521-4 [3] Table 5.2.3.2.1.0-2. The SS sends downlink
MAC padding bits on the DL RMC.
2\. Set the parameters of the Modulation format and code rate, reference
channel, the propagation condition, the correlation matrix and the SNR
according to TS 38.521-4 [3] Tables 5.2.3.2.1_1.4-1 and 5.2.3.2.1_1.4-2 as
applicable to the test points in Table A.3.1.2.2.3-1.
3\. Using the data client, begin TCP downlink data transfer from the
application server. Wait for 15 seconds and then start recording the TCP
throughput result. (This is iteration 1) Continue data transfer for the test
duration outlined in Table A.1-1-1. Repeat transfer for iterations [2-3]
within the same call as the first iteration.
4\. Repeat step 3 for 3 iterations within the same call as the first
iteration. Wait for at least 5 seconds between each iteration of the data
transfer.
5\. Calculate and record the average application layer data throughput across
three iterations. Additionally, count and record the overall number of ACK and
NACK/DTX on the PUSCH/PUCCH during the test interval purely for information
purposes.
6\. Record the IP address type (IPv4 or IPv6) used during the TCP data
transfers.
7\. Using the values in Table 5.4.4-2 (for IPv6) and Table 5.4.4-3 (for IPv4),
determine the reduction from PHY reference fractional throughput value listed
in Table A.2.1.1.3-1 to obtain reference Application Layer Throughput value.
CONDUCTED UDP DOWNLINK -- STATIC CHANNEL
# A.4 5G NR /UDP Downlink Throughput /Conducted/Static Peak Throughput for SA
and NSA
## A.4.1 5G NR /UDP Downlink Throughput /Conducted/Static Channel Peak
Throughput tests for SA and NSA
### A.4.1.1 5G NR /UDP Downlink Throughput /Conducted/Static Channel/ SA and
NSA (no Downlink Split Bearer)
##### A.4.1.1.1 Definition {#a.4.1.1.1-definition .H6}
The UE application layer downlink performance for UDP under different static
environment is determined by the UE application layer UDP throughput.
##### A.4.1.1.2 Test Purpose {#a.4.1.1.2-test-purpose .H6}
To measure the performance of the 5G NR UE while downloading UDP based data in
a static channel environment.
##### A.4.1.1.3 Test Parameters {#a.4.1.1.3-test-parameters .H6}
The common test parameters are defined in TS 38.521-4 [3] Table 5.5.1.3-1. The
parameters specified in TS 38.521-4 [3] Table 5.5.1.3-2 are applicable for
tests on FDD bands and parameters specified in TS 38.521-4 [3] Table 5.5.1.3-3
are applicable for tests on TDD bands. CORESET details are in TS 38.521-4 [3]
Table 5.5.1.3-4 and MCS indices for indicated UE capabilities are in TS
38.521-4 [4] Table 5.5.1.3-5.. The test parameter selection procedure is
defined in TS 38.521-4 [3] clause 5.5.1.3.1. In addition, the following test
statements from TS 38.521-4 [3] clause 5.5.1.3 apply:
\- Unless otherwise stated, no user data is scheduled on slot #0, 10 and 11
within 20 ms for SCS 15 kHz.
\- Unless otherwise stated, no user data is scheduled on slot #0, 20 and 21
within 20 ms for SCS 30 kHz.
For NSA case, since this test is not focused on aggregated throughput, the
E-UTRA anchor is functional link and is setup via the parameters defined in
Annex E.
Test point is detailed in Annex D.1-5.
Table A.4.1.1.3-1: FR1 Static Channel Test Point
TS 38.521-4 Reference Reference channel Bandwidth (MHz) / Subcarrier spacing
(kHz) Modulation format and code rate TDD UL-DL pattern Propagation condition
PHY Reference value Comment
* * *
                                                                                                                                                                                                                                                                                                     Fraction of maximum throughput (%)   SNR (dB)
5.5.1 As per tables in TS 38.521-4 [3] clause 5.5.1.3 and test parameter
selection as per TS 38.521-4 [3] clause 5.5.1.3.1. Static/ Clean Channel 85 %
No external noise sources are applied Peak Throughput
##### A.4.1.1.4 Test Description {#a.4.1.1.4-test-description .H6}
##### A.4.1.1.4.1 Initial Conditions {#a.4.1.1.4.1-initial-conditions .H6}
Initial conditions are a set of test configurations the UE needs to be tested
in and the steps for the SS to take with the UE to reach the correct
measurement state. Apply the Initial conditions defined in TS 38.521-4 [3]
clause 5.5.1.4.1 with the following additional steps and/or exceptions:
1.1 Connect an application server to the IP output of the SS.
1.2 For an embedded configuration, ensure that the UE has an client test
application available. For a tethered configuration, tether the UE to a laptop
configured with FTP client software using the appropriate UE to PC interface
Modem or Network Interface Connection (NIC) drivers.
5\. For NSA case, the E-UTRA anchor is configured as per Annex E. Ensure the
UE is in RRC_CONNECTED State with generic procedure parameters Connectivity NR
for NR/5GC with _Connected without Release_ On, _Test Mode_ Off, _Test Loop
Function_ Off or EN-DC, DC bearer MCG and SCG, _Connected without release_ On,
_Test Mode_ Off, _Test Loop Function_ Off for EN-DC. Message contents are as
per TS 38.521-4 [3] Table 5.5.1.4.3-1 through Table 5.5.1.4.3-8.
##### A.4.1.1.4.2 Test Procedure {#a.4.1.1.4.2-test-procedure .H6}
1\. SS sets the parameters of the bandwidth, MCS and DL reference channel
(RMC) according to the test parameter selection procedure defined in TS
38.521-4 [3] clause 5.5.1.3.1. The SS transmits PDSCH via PDCCH DCI format 1_1
for C_RNTI to transmit the DL RMC.
2\. SS sends uplink scheduling information for each UL HARQ process via PDCCH
DCI format 0_1 for C_RNTI to schedule the UL RMC over PUSCH according to
parameters set during initial conditions.
3\. Using the UDP data client, begin UDP downlink data transfer from the
application server. Wait for 15 seconds and then start recording the UDP
throughput result. (This is iteration 1) Continue data transfer for the test
duration outlined in Table A.1-1.
4\. Repeat step 3 for 3 iterations within the same call as the first
iteration. Wait for at least 5 seconds between each iteration of the data
transfer.
5\. Calculate and record the average application layer data throughput across
three iterations. Additionally, count and record the overall number of ACK and
NACK/DTX on the PUSCH/PUCCH during the test interval. Record the IP address
type (IPv4 or IPv6) used during the UDP data transfers.
6\. Using the values in Table 5.4.4-2 (for IPv6) and Table 5.4.4-3 (for IPv4),
determine the reduction from PHY reference fractional throughput value listed
in Table A.2.1.1.3-1 to obtain reference Application Layer UDP Throughput
value.
#### A.4.1.2 5G NR /UDP Downlink Throughput /Conducted/Static Channel/NSA
(Downlink Split Bearer)
##### A.4.1.2.1 Definition {#a.4.1.2.1-definition .H6}
The UE application layer downlink performance for UDP under different static
environment is determined by the UE application layer UDP throughput.
##### A.4.1.2.2 Test Purpose {#a.4.1.2.2-test-purpose .H6}
To measure the performance of the 5G NR UE while downloading UDP based data in
a static channel environment.
##### A.4.1.2.3 Test Parameters {#a.4.1.2.3-test-parameters .H6}
The common test parameters are defined in TS 38.521-4 [3] Table 9.4B.1.1.3-1.
The parameters specified in TS 38.521-4 [3] Table 9.4B.1.1.3-2 are applicable
for tests on FDD bands and parameters specified in TS 38.521-4 [3] Table
9.4B.1.1.3-3 are applicable for tests on TDD bands. CORESET details are in TS
38.521-4 [3] Table 9.4B.1.1.3-4 and MCS indices for indicated UE capabilities
are in TS 38.521-4 [4] Table 9.4B.1.1.3-5. The test parameter selection
procedure is defined in TS 38.521-4 [3] clause 9.4B.1.1.3.1. In addition, the
following test statements from TS 38.521-4 [3] clause 9.4B.1.1.3 apply:
\- Unless otherwise stated, no user data is scheduled on slot #0, 10 and 11
within 20 ms for SCS 15 kHz for the NR cell.
\- Unless otherwise stated, no user data is scheduled on slot #0, 20 and 21
within 20 ms for SCS 30 kHz for the NR cell.
For NSA case, the focus in this test is to measure aggregated throughput
therefore data rate over the E-UTRA carrier is also included in the
measurements. The aggregated data rate over E-UTRA and NR carriers is carried
out once the aforementioned test parameter selection in TS 38.521-4 [3] clause
9.4B.1.1.3.1 is completed.
Test point is detailed in Annex D.1-5.
Table A.4.1.2.3-1: FR1 Static Channel Test Point
TS 38.521-4 Reference Reference channel Bandwidth (MHz) / Subcarrier spacing
(kHz) Modulation format and code rate TDD UL-DL pattern Propagation condition
PHY Reference value Comment
* * *
                                                                                                                                                                                                                                                                                                     Fraction of maximum throughput (%)   SNR (dB)
5.5.1 As per tables in TS 38.521-4 [3] clause 5.5.1.3 and test parameter
selection as per TS 38.521-4 [3] clause 5.5.1.3.1. Static/ Clean Channel 85 %
No external noise sources are applied Peak Throughput
##### A.4.1.2.4 Test Description {#a.4.1.2.4-test-description .H6}
##### A.4.1.2.4.1 Initial Conditions {#a.4.1.2.4.1-initial-conditions .H6}
Initial conditions are a set of test configurations the UE needs to be tested
in and the steps for the SS to take with the UE to reach the correct
measurement state. Apply the Initial conditions defined in TS 38.521-4 [3]
clause 9.4B.1.1.4.1 with the following additional steps and/or exceptions:
1.1 Connect an application server to the IP output of the SS.
1.2 For an embedded configuration, ensure that the UE has an client test
application available. For a tethered configuration, tether the UE to a laptop
configured with FTP client software using the appropriate UE to PC interface
Modem or Network Interface Connection (NIC) drivers.
5\. Setup an NSA call with E-UTRA anchor initially scheduled as per Annex E.
Ensure the UE is in state RRC_CONNECTED with generic procedure parameters
Connectivity EN-DC, DC bearer MCG and SCG, _Connected without release_ On,
_Test Mode_ Off, _Test Loop Function_ Off.
##### A.4.1.2.4.2 Test Procedure {#a.4.1.2.4.2-test-procedure .H6}
1\. SS sets the parameters of the bandwidth, MCS and DL reference channel
(RMC) according to the test parameter selection procedure defined in TS
38.521-4 [3] clause 5.5.1.3.1. The SS transmits PDSCH via PDCCH DCI format 1_1
for C_RNTI to transmit the DL RMC.
2\. SS sends uplink scheduling information for each UL HARQ process via PDCCH
DCI format 0_1 for C_RNTI to schedule the UL RMC over PUSCH according to
parameters set during initial conditions . The purpose of this scheduling is
to accommodate for UDP UL ACK/NACK feedback transmissions.
3\. Using the data client, begin UDP downlink data transfer from the
application server. Wait for 15 seconds and then start recording the UDP
throughput result. (This is iteration 1) Continue data transfer for the test
duration outlined in Table A.1-1.
4\. Repeat step 3 for 3 iterations within the same call as the first
iteration. Wait for at least 5 seconds between each iteration of the data
transfer.
5\. Calculate and record the average application layer data throughput across
three iterations. Additionally, count and record the overall number of ACK and
NACK/DTX on the PUSCH/PUCCH during the test interval. Record the IP address
type (IPv4 or IPv6) used during the UDP data transfers.
6\. Using the values in Table 5.4.4-2 (for IPv6) and Table 5.4.4-3 (for IPv4),
determine the reduction from PHY reference fractional throughput value listed
in Table A.4.1.2.3-1 to obtain reference Application Layer Throughput value.
CONDUCTED UDP DOWNLINK -- FADING (FRC)
# A.5 5G NR /UDP Downlink Throughput /Conducted for Fixed Reference Channel
(FRC) Scenarios with Fading for SA and NSA
## A.5.1 5G NR /UDP Downlink Throughput /Conducted/Fading/FRC for SA and NSA
### A.5.1.1 5G NR /UDP Downlink Throughput /Conducted/Fading/FRC/2Rx for SA
and NSA
#### A.5.1.1.1 5G NR /UDP Downlink Throughput /Conducted/Fading/2Rx/FR1 PDSCH
mapping Type A performance - 2x2 MIMO for SA and NSA
##### A.5.1.1.1.1 Definition {#a.5.1.1.1.1-definition .H6}
The UE application layer downlink performance for UDP is determined by the UE
application layer UDP throughput.
##### A.5.1.1.1.2 Test Purpose {#a.5.1.1.1.2-test-purpose .H6}
To measure the performance of the 5G NR UE using fixed reference channels and
under 2 receive antenna conditions while downloading UDP based data in fading
channel environment. The duplex mode is FDD.
##### A.5.1.1.1.3 Test Parameters {#a.5.1.1.1.3-test-parameters .H6}
The test points to be used in this test are defined in Table A.5.1.1.1.3-1.
Details of these test points are available in Annex D with the test points
below referenced directly from Table D.1-1.
Table A.5.1.1.1.3-1: FR1 FDD 2RX
+-------+-------+-------+-------+-------+-------+-------+-------+-------+ | TS | Test | Refe | Modul | P | C | Refe | Co | | | 38. | num. | rence | ation | ropag | orrel | rence | mment | | | 521-4 | | ch | f | ation | ation | value | | | | Refe | | annel | ormat | cond | m | | | | | rence | | | | ition | atrix | | | | | | | | | | and | | | | | | | | | | an | | | | | | | | | | tenna | | | | | | | | | | con | | | | | | | | | | figur | | | | | | | | | | ation | | | | +=======+=======+=======+=======+=======+=======+=======+=======+=======+ | | | | | | | Fra | SNR | | | | | | | | | ction | (dB) | | | | | | | | | of | | | | | | | | | | ma | | | | | | | | | | ximum | | | | | | | | | | throu | | | | | | | | | | ghput | | | | | | | | | | (%) | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | 5. | 1-3 | R.P | 2 | TDLA | 2x2, | 70 | 25.6 | Large | | 2.2.1 | | DSCH. | 56AM, | 30-10 | ULA | | | TBS | | .1_1 | | 1-4.1 | 0.82 | | Low | | | | | 2Rx | | FDD | | | | | | | | FDD | | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | 5. | 1-4 | R.P | 1 | T | 2x2, | 30 | 2 | High | | 2.2.1 | | DSCH. | 6QAM, | DLC30 | ULA | | | BLER | | .1_1 | | 1-2.1 | 0.48 | 0-100 | Low | | | | | 2Rx | | FDD | | | | | | | | FDD | | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | 5. | 1-1 | R.P | QPSK, | T | 2x2, | 70 | 0.1 | High | | 2.2.1 | | DSCH. | 0.30 | DLB10 | ULA | | | ch | | .1_1 | | 1-1.1 | | 0-400 | Low | | | annel | | 2Rx | | FDD | | | | | | vari | | FDD | | | | | | | | ation | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | 5. | 2-1 | R.P | 6 | TDLA | 2x2, | 70 | 20.4 | High | | 2.2.1 | | DSCH. | 4QAM, | 30-10 | ULA | | | throu | | .1_1 | | 1-3.1 | 0.51 | | Low | | | ghput | | 2Rx | | FDD | | | | | | | | FDD | | | | | | | | Bas | | | | | | | | | | eline | | | | | | | | | | Rx | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | 5. | 3-1 | R.P | 1 | TDLA | 2x2, | 70 | 18.6 | High | | 2.2.1 | | DSCH. | 6QAM, | 30-10 | ULA | | | throu | | .1_2 | | 1-2.2 | 0.48 | | M | | | ghput | | 2Rx | | FDD | | | edium | | | Enh | | FDD | | | | | | | | anced | | | | | | | | | | Rx | +-------+-------+-------+-------+-------+-------+-------+-------+-------+
Other test parameters are defined in TS 38.521-4 [3] Tables 5.2.2.1.1_1.4-1
and 5.2.2.1.1_1.4-2.
##### A.5.1.1.1.4 Test Description {#a.5.1.1.1.4-test-description .H6}
##### A.5.1.1.1.4.1 Initial Conditions {#a.5.1.1.1.4.1-initial-conditions .H6}
Initial conditions are a set of test configurations the UE needs to be tested
in and the steps for the SS to take with the UE to reach the correct
measurement state. Apply the Initial conditions defined in TS 38.521-4 [3]
clause 5.2.2.1.1_1.3.1 with the following additional steps and/or exceptions:
1.1 Connect an application server to the IP output of the SS.
1.2 For an embedded configuration, ensure that the UE has an client test
application available. For a tethered configuration, tether the UE to a laptop
configured with TCP client software using the appropriate UE to PC interface
Modem or Network Interface Connection (NIC) drivers.
5\. For NSA case, the E-UTRA anchor is configured as per Annex E. Ensure the
UE is in RRC_CONNECTED State with generic procedure parameters Connectivity NR
for NR/5GC with _Connected without Release_ On, _Test Mode_ Off or EN-DC, DC
bearer MCG and SCG, _Connected without release_ On, _Test Mode_ Off for EN-DC.
Message contents are as per TS 38.521-4 [3] clause 5.2.2.1.1_1.3.3 and
5.2.2.1.1_1.3.3_2 and Tables 5.2.2.1.1_1.3.3_1-1 through 5.2.2.1.1_1.3.3_1-4
with the exceptions defined in Annex H.
##### A.5.1.1.1.4.2 Procedure {#a.5.1.1.1.4.2-procedure .H6}
1\. SS transmits PDSCH via PDCCH DCI format 1_1 for C_RNTI to transmit the DL
RMC according to TS 38.521-4 [3] Table 5.2.2.1.1.0-2. The SS sends downlink
MAC padding bits on the DL RMC.
2\. Set the parameters of the Modulation format and code rate, reference
channel, the propagation condition, the correlation matrix and the SNR
according to TS 38.521-4 [3] Tables 5.2.2.1.1_1.4-1 and 5.2.2.1.1_1.4-2 as
applicable to the test points in Table A.5.1.1.1.3-1.
3\. Using UDP data client, begin UDP downlink data transfer from the
application server. Wait for 15 seconds and then start recording the UDP
throughput result. (This is iteration 1) Continue data transfer for the test
duration outlined in Table .A.1.1-1 Repeat transfer for iterations [2-3]
within the same call as the first iteration.
4\. Repeat step 3 for 3 iterations within the same call as the first
iteration. Wait for at least 5 seconds between each iteration of the data
transfer.
5\. Calculate and record the average application layer data throughput across
three iterations. Additionally, count and record the overall number of ACK and
NACK/DTX on the PUSCH/PUCCH during the test interval purely for information
purposes.
6\. Record the IP address type (IPv4 or IPv6) used during the UDP data
transfers.
7\. Using the values in Table 5.4.4-2 (for IPv6) and Table 5.4.4-3 (for IPv4),
determine the reduction from PHY reference fractional throughput value listed
in Table A.2.1.1.3-1 to obtain reference Application Layer Throughput value.
#### A.5.1.1.2 5G NR /UDP Downlink Throughput /Conducted/Fading/2Rx TDD/FR1
PDSCH mapping Type A performance - 2x2 MIMO for SA and NSA
##### A.5.1.1.2.1 Definition {#a.5.1.1.2.1-definition .H6}
The UE application layer downlink performance for UDP is determined by the UE
application layer UDP throughput.
##### A.5.1.1.2.2 Test Purpose {#a.5.1.1.2.2-test-purpose .H6}
To measure the performance of the 5G NR UE using fixed reference channels and
under 2 receive antenna conditions while downloading UDP based data in fading
channel environment. The duplex mode is TDD.
##### A.5.1.1.2.3 Test Parameters {#a.5.1.1.2.3-test-parameters .H6}
The test points to be used in this test are defined in Table A.5.1.1.2.3-1.
Details of these test points are available in Annex D with the test points
below referenced directly from Table D.1-2.
Table A.5.1.1.2.3-1: FR1 TDD 2RX
TS 38.521-4 Reference | Test num. | Reference channel | Bandwidth (MHz) / Subcarrier spacing (kHz) | Modulation format and code rate | TDD UL-DL pattern | Propagation condition | Correlation matrix and antenna configuration | Reference value | Comment |   
---|---|---|---|---|---|---|---|---|---|---  
|  |  |  |  |  |  |  | Fraction of maximum throughput (%) | SNR (dB) |   
5.2.2.2.1_1 2Rx TDD | 1-3 | R.PDSCH.2-4.1 TDD | 40 / 30 | 256QAM, 0.82 | FR1.30-1 | TDLA30-10 | 2x2, ULA Low | 70 | 26.3 | Large TBS  
5.2.2.2.1_1 2Rx TDD | 1-4 | R.PDSCH.2-2.1 TDD | 40 / 30 | 16QAM, 0.48 | FR1.30-1 | TDLC300-100 | 2x2, ULA Low | 30 | 2.5 | High BLER  
5.2.2.2.1_1 2Rx TDD | 1-1 | R.PDSCH.2-1.1 TDD | 40 / 30 | QPSK, 0.30 | FR1.30-1A | TDLB100-400 | 2x2, ULA Low | 70 | -0.2 | High channel variation  
5.2.2.2.1_1 2Rx TDD | 2-1 | R.PDSCH.2-3.1 TDD | 40 / 30 | 64QAM, 0.50 | FR1.30-1 | TDLA30-10 | 2x2, ULA Low | 70 | 20.8 | High throughput Baseline Rx  
5.2.2.2.1_2 2Rx TDD | 3-1 | R.PDSCH.2-2.2 TDD | 40 / 30 | 16QAM, 0.48 | FR1.30-1 | TDLA30-10 | 2x2, ULA Medium | 70 | 19.0 | High throughput Enhanced Rx  
Other test parameters are defined in TS 38.521-4 [3] Tables 5.2.2.2.1_1.4-1
and 5.2.2.2.1_1.4-2.
##### A.5.1.1.2.4 Test Description {#a.5.1.1.2.4-test-description .H6}
##### A.5.1.1.2.4.1 Initial Conditions {#a.5.1.1.2.4.1-initial-conditions .H6}
Initial conditions are a set of test configurations the UE needs to be tested
in and the steps for the SS to take with the UE to reach the correct
measurement state. Apply the Initial conditions defined in TS 38.521-4 [3]
clause 5.2.2.2.1_1.3.1 with the following additional steps and/or exceptions:
1.1 Connect an application server to the IP output of the SS.
1.2 For an embedded configuration, ensure that the UE has an client test
application available. For a tethered configuration, tether the UE to a laptop
configured with UDP client software using the appropriate UE to PC interface
Modem or Network Interface Connection (NIC) drivers.
5\. For NSA case, the E-UTRA anchor is configured as per Annex E. Ensure the
UE is in RRC_CONNECTED State with generic procedure parameters Connectivity NR
for NR/5GC with _Connected without Release_ On, _Test Mode_ Off or EN-DC, DC
bearer MCG and SCG, _Connected without release_ On, _Test Mode_ Off for EN-DC.
Message contents are as per TS 38.521-4 [3] clause 5.2.2.2.1_1.3.3 and
5.2.2.2.1_1.3.3_2 and Tables 5.2.2.2.1_1.3.3_1-1 through 5.2.2.2.1_1.3.3_1-4
with the exceptions defined in Annex H.
##### A.5.1.1.2.4.2 Procedure {#a.5.1.1.2.4.2-procedure .H6}
1\. SS transmits PDSCH via PDCCH DCI format 1_1 for C_RNTI to transmit the DL
RMC according to TS 38.521-4 [3] Table 5.2.2.2.1.0-2. The SS sends downlink
MAC padding bits on the DL RMC.
2\. Set the parameters of the Modulation format and code rate, reference
channel, the propagation condition, the correlation matrix and the SNR
according to TS 38.521-4 [3] Tables 5.2.2.2.1_1.4-1 and 5.2.2.2.1_1.4-2 as
applicable to the test points in Table A.5.1.1.2.3-1.
3\. Using UDP data client, begin UDP downlink data transfer from the
application server. Wait for 15 seconds and then start recording the UDP
throughput result. (This is iteration 1) Continue data transfer for the test
duration outlined in Table A.1.1-1 Repeat transfer for iterations [2-3] within
the same call as the first iteration.
4\. Repeat step 3 for 3 iterations within the same call as the first
iteration. Wait for at least 5 seconds between each iteration of the data
transfer.
5\. Calculate and record the average application layer data throughput across
three iterations. Additionally, count and record the overall number of ACK and
NACK/DTX on the PUSCH/PUCCH during the test interval purely for information
purposes.
6\. Record the IP address type (IPv4 or IPv6) used during the UDP data
transfers.
7\. Using the values in Table 5.4.4-2 (for IPv6) and Table 5.4.4-3 (for IPv4),
determine the reduction from PHY reference fractional throughput value listed
in Table A.2.1.1.3-1 to obtain reference Application Layer Throughput value.
### A.5.1.2 5G NR /UDP Downlink Throughput /Conducted/Fading/FRC/4Rx for SA
and NSA
#### A.5.1.2.1 5G NR /UDP Downlink Throughput /Conducted/Fading/FRC/4Rx
FDD/FR1 PDSCH mapping Type A performance - 4x4 MIMO for SA and NSA
##### A.5.1.2.1.1 Definition {#a.5.1.2.1.1-definition .H6}
The UE application layer downlink performance for UDP is determined by the UE
application layer UDP throughput.
##### A.5.1.2.1.2 Test Purpose {#a.5.1.2.1.2-test-purpose .H6}
To measure the performance of the 5G NR UE using fixed reference channels and
under 4 receive antenna conditions while downloading UDP based data in fading
channel environment. The duplex mode is FDD.
##### A.5.1.2.1.3 Test Parameters {#a.5.1.2.1.3-test-parameters .H6}
The test points to be used in this test are defined in Table A.5.1.2.1.3-1.
Details of these test points are available in Annex D with the test points
below referenced directly from Table D.1-3.
Table A.5.1.2.1.3-1: FR1 FDD 4RX
TS 38.521-4 Reference | Test num. | Bandwidth (MHz) / Subcarrier spacing (kHz) | Reference channel | Modulation format | Propagation condition | Correlation matrix and antenna configuration | Reference value | Comment |   
---|---|---|---|---|---|---|---|---|---  
|  |  |  |  |  |  | Fraction of maximum throughput (%) | SNR (dB) |   
5.2.3.1.1_1 4Rx FDD | 1-3 | R.PDSCH.1-4.1 FDD | 10 / 15 | 256QAM, 0.82 | TDLA30-10 | 2x4, ULA Low | 70 | 22.0 | Large TBS  
5.2.3.1.1_1 4Rx FDD | 1-4 | R.PDSCH.1-2.1 FDD | 10 / 15 | 16QAM, 0.48 | TDLC300-100 | 2x4, ULA Low | 30 | -0.6 | High BLER  
5.2.3.1.1_1 4Rx FDD | 1-1 | R.PDSCH.1-1.1 FDD | 10 / 15 | QPSK, 0.30 | TDLB100-400 | 2x4, ULA Low | 70 | -2.6 | High channel variation  
5.2.3.1.1_1 4Rx FDD | 4-1 | R.PDSCH.1-2.4 FDD | 10 / 15 | 16QAM, 0.48 | TDLA30-10 | 4x4, ULA Low | 70 | 16.6 | High throughput Baseline Rx  
5.2.3.1.1_1 4Rx FDD | 5-1 | R.PDSCH.1-2.3 FDD | 10 / 15 | 16QAM, 0.48 | TDLA30-10 | 4x4, ULA Medium A | 70 | 23.3 | High throughput Enhanced Rx  
Other test parameters are defined in TS 38.521-4 [3] Tables 5.2.3.1.1_1.4-1
and 5.2.3.1.1_1.4-2.
##### A.5.1.2.1.4 Test Description {#a.5.1.2.1.4-test-description .H6}
##### A.5.1.2.1.4.1 Initial Conditions {#a.5.1.2.1.4.1-initial-conditions .H6}
Initial conditions are a set of test configurations the UE needs to be tested
in and the steps for the SS to take with the UE to reach the correct
measurement state. Apply the Initial conditions defined in TS 38.521-4 [3]
clause 5.2.3.1.1_1.3.1 with the following additional steps and/or exceptions:
1.1 Connect an application server to the IP output of the SS.
1.2 For an embedded configuration, ensure that the UE has an client test
application available. For a tethered configuration, tether the UE to a laptop
configured with UDP client software using the appropriate UE to PC interface
Modem or Network Interface Connection (NIC) drivers.
5\. For NSA case, the E-UTRA anchor is configured as per Annex E. Ensure the
UE is in RRC_CONNECTED State with generic procedure parameters Connectivity NR
for NR/5GC with _Connected without Release_ On, _Test Mode_ Off or EN-DC, DC
bearer MCG and SCG, _Connected without release_ On, _Test Mode_ Off for EN-DC.
Message contents are as per TS 38.521-4 [3] clause 5.2.3.1.1_1.3.3 and
5.2.3.1.1_1.3.3_2 and Tables 5.2.3.1.1_1.3.3_1-1 through 5.2.3.1.1_1.3.3_1-4
with the exceptions defined in Annex H.
##### A.5.1.2.1.4.2 Procedure {#a.5.1.2.1.4.2-procedure .H6}
1\. SS transmits PDSCH via PDCCH DCI format 1_1 for C_RNTI to transmit the DL
RMC according to TS 38.521-4 [3] Table 5.2.3.1.1.0-2. The SS sends downlink
MAC padding bits on the DL RMC.
2\. Set the parameters of the Modulation format and code rate, reference
channel, the propagation condition, the correlation matrix and the SNR
according to TS 38.521-4 [3] Tables 5.2.3.1.1_1.4-1 and 5.2.3.1.1_1.4-2 as
applicable to the test points in Table A.5.1.2.1.3-1.
3\. Using UDP data client, begin UDP downlink data transfer from the
application server. Wait for 15 seconds and then start recording the UDP
throughput result. (This is iteration 1) Continue data transfer for the test
duration outlined in Table.A.1.1-1 Repeat transfer for iterations [2-3] within
the same call as the first iteration.
4\. Repeat step 3 for 3 iterations within the same call as the first
iteration. Wait for at least 5 seconds between each iteration of the data
transfer.
5\. Calculate and record the average application layer data throughput across
three iterations. Additionally, count and record the overall number of ACK and
NACK/DTX on the PUSCH/PUCCH during the test interval purely for information
purposes.
6\. Record the IP address type (IPv4 or IPv6) used during the UDP data
transfers.
7\. Using the values in Table 5.4.4-2 (for IPv6) and Table 5.4.4-3 (for IPv4),
determine the reduction from PHY reference fractional throughput value listed
in Table A.2.1.1.3-1 to obtain reference Application Layer Throughput value.
#### A.5.1.2.2 5G NR /UDP Downlink Throughput /Conducted/Fading/4Rx TDD/FR1
PDSCH mapping Type A performance - 4x4 MIMO for SA and NSA
##### A.5.1.2.2.1 Definition {#a.5.1.2.2.1-definition .H6}
The UE application layer downlink performance for UDP is determined by the UE
application layer UDP throughput.
##### A.5.1.2.2.2 Test Purpose {#a.5.1.2.2.2-test-purpose .H6}
To measure the performance of the 5G NR UE using fixed reference channels and
under 4 receive antenna conditions while downloading UDP based data in fading
channel environment. The duplex mode is TDD.
##### A.5.1.2.2.3 Test Parameters {#a.5.1.2.2.3-test-parameters .H6}
The test points to be used in this test are defined in Table A.5.1.2.2.3-1.
Details of these test points are available in Annex D with the test points
below referenced directly from Table D.1-4.
Table A.5.1.2.2.3-1: FR1 TDD 4RX
TS 38.521-4 Reference | Test num. | Reference channel | Bandwidth (MHz) / Subcarrier spacing (kHz) | Modulation format and code rate | TDD UL-DL pattern | Propagation condition | Correlation matrix and antenna configuration | Reference value | Comment |   
---|---|---|---|---|---|---|---|---|---|---  
|  |  |  |  |  |  |  | Fraction of maximum throughput (%) | SNR (dB) |   
5.2.3.2.1_1 4Rx TDD | 1-3 | R.PDSCH.2-4.1 TDD | 40 / 30 | 256QAM, 0.82 | FR1.30-1 | TDLA30-10 | 2x4, ULA Low | 70 | 22.5 | Large TBS  
5.2.3.2.1_1 4Rx TDD | 1-4 | R.PDSCH.2-2.1 TDD | 40 / 30 | 16QAM, 0.48 | FR1.30-1 | TDLC300-100 | 2x4, ULA Low | 30 | -0.3 | High BLER  
5.2.3.2.1_1 4Rx TDD | 1-1 | R.PDSCH.2-1.1 TDD | 40 / 30 | QPSK, 0.30 | FR1.30-1A | TDLB100-400 | 2x4, ULA Low | 70 | -3.1 | High channel variation  
5.2.3.2.1_1 4Rx TDD | 4-1 | R.PDSCH.2-2.4 TDD | 40 / 30 | 16QAM, 0.48 | FR1.30-1 | TDLA30-10 | 4x4, ULA Low | 70 | 16.4 | High throughput Baseline Rx  
5.2.3.2.1_1 4Rx TDD | 5-1 | R.PDSCH.2-2.3 TDD | 40 / 30 | 16QAM, 0.48 | FR1.30-1 | TDLA30-10 | 4x4, ULA Medium A | 70 | 23.9 | High throughput Enhanced Rx  
Other test parameters are defined in TS 38.521-4 [3] Tables 5.2.3.2.1_1.4-1
and 5.2.3.2.1_1.4-2.
##### A.5.1.2.2.4 Test Description {#a.5.1.2.2.4-test-description .H6}
##### A.5.1.2.2.4.1 Initial Conditions {#a.5.1.2.2.4.1-initial-conditions .H6}
Initial conditions are a set of test configurations the UE needs to be tested
in and the steps for the SS to take with the UE to reach the correct
measurement state. Apply the Initial conditions defined in TS 38.521-4 [3]
clause 5.2.3.2.1_1.3.1 with the following additional steps and/or exceptions:
1.1 Connect an application server to the IP output of the SS.
1.2 For an embedded configuration, ensure that the UE has an client test
application available. For a tethered configuration, tether the UE to a laptop
configured with UDP client software using the appropriate UE to PC interface
Modem or Network Interface Connection (NIC) drivers.
5\. For NSA case, the E-UTRA anchor is configured as per Annex E. Ensure the
UE is in RRC_CONNECTED State with generic procedure parameters Connectivity NR
for NR/5GC with _Connected without Release_ On, _Test Mode_ Off or EN-DC, DC
bearer MCG and SCG, _Connected without release_ On, _Test Mode_ Off for EN-DC.
Message contents are as per TS 38.521-4 [3] clause 5.2.3.2.1_1.3.3 and
5.2.3.2.1_1.3.3_2 and Tables 5.2.3.2.1_1.3.3_1-1 through 5.2.3.2.1_1.3.3_1-4
with the exceptions defined in Annex H.
##### A.5.1.2.2.4.2 Procedure {#a.5.1.2.2.4.2-procedure .H6}
1\. SS transmits PDSCH via PDCCH DCI format 1_1 for C_RNTI to transmit the DL
RMC according to TS 38.521-4 [3] Table 5.2.3.2.1.0-2. The SS sends downlink
MAC padding bits on the DL RMC.
2\. Set the parameters of the Modulation format and code rate, reference
channel, the propagation condition, the correlation matrix and the SNR
according to TS 38.521-4 [3] Tables 5.2.3.2.1_1.4-1 and 5.2.3.2.1_1.4-2 as
applicable to the test points in Table A.5.1.2.2.3-1.
3\. Using UDP data client, begin UDP downlink data transfer from the
application server. Wait for 15 seconds and then start recording the UDP
throughput result. (This is iteration 1) Continue data transfer for the test
duration outlined in Table A.1.1-1. Repeat transfer for iterations [2-3]
within the same call as the first iteration.
4\. Repeat step 3 for 3 iterations within the same call as the first
iteration. Wait for at least 5 seconds between each iteration of the data
transfer.
5\. Calculate and record the average application layer data throughput across
three iterations. Additionally, count and record the overall number of ACK and
NACK/DTX on the PUSCH/PUCCH during the test interval purely for information
purposes.
6\. Record the IP address type (IPv4 or IPv6) used during the UDP data
transfers.
7\. Using the values in Table 5.4.4-2 (for IPv6) and Table 5.4.4-3 (for IPv4),
determine the reduction from PHY reference fractional throughput value listed
in Table A.2.1.1.3-1 to obtain reference Application Layer Throughput value.
RADIATED TCP DOWNLINK -- STATIC CHANNEL
# A.6 5G NR /TCP Downlink Throughput/Radiated/Static Peak Throughput for SA
and NSA
## A.6.1 5G NR /TCP Downlink Throughput /Radiated/Static Channel Peak
Throughput tests for SA and NSA
### A.6.1.1 5G NR /TCP Downlink Throughput /Radiated/Static Channel/ SA and
NSA (no Downlink Split Bearer)
##### A.6.1.1.1 Definition {#a.6.1.1.1-definition .H6}
The UE application layer downlink performance for TCP under different static
environment is determined by the UE application layer TCP throughput.
##### A.6.1.1.2 Test Purpose {#a.6.1.1.2-test-purpose .H6}
To measure the performance of the 5G NR UE while downloading TCP based data in
a static channel environment for FR2.
##### A.6.1.1.3 Test Parameters {#a.6.1.1.3-test-parameters .H6}
The common test parameters are defined in 38.521-4 [4] Table 7.5.1.3-1.
CORESET details are in TS 38.521-4 [4] Table 7.5.1.3-2 and MCS indices for
indicated UE capabilities are in TS 38.521-4 [4] Table 7.5.1.3-3. SNR required
to achieve lower layer throughput requirements is specified in TS 38.521-4 [4]
Table 7.5.1.3-4. The test parameter selection procedure is defined in TS
38.521-4 [4] clause 7.5.1.3 (for SA) and clause 9.4B.1.2.1 (for NSA). In
addition, the following test statements from TS 38.521-4 [3] clause 9.4B.1.2
apply:
For NSA FR2 case, the E-UTRA anchor is functional link and is setup via the
parameters defined in Annex E.
##### A.6.1.1.4 Test Description {#a.6.1.1.4-test-description .H6}
##### A.6.1.1.4.1 Initial Conditions {#a.6.1.1.4.1-initial-conditions .H6}
Initial conditions are a set of test configurations the UE needs to be tested
in and the steps for the SS to take with the UE to reach the correct
measurement state. Apply the Initial conditions defined in TS 38.521-4 [3]
clause 7.5.1.4.1 (for SA) or clause 9.4B.1.2.4.1 (for NSA) with the following
additional steps and/or exceptions:
1\. In Step 1, no AWGN source needs to be connected as this is a clean channel
test case.
1.1 Connect an application server to the IP output of the SS.
1.2 For an embedded configuration, ensure that the UE has an client test
application available. For a tethered configuration, tether the UE to a laptop
configured with FTP client software using the appropriate UE to PC interface
Modem or Network Interface Connection (NIC) drivers.
5\. For NSA case, the E-UTRA anchor is configured as per Annex E. Ensure the
UE is in RRC_CONNECTED State with generic procedure parameters Connectivity NR
for NR/5GC with _Connected without Release_ On, _Test Mode_ Off, _Test Loop
Function_ Off or EN-DC, DC bearer MCG and SCG, _Connected without release_ On,
_Test Mode_ Off, _Test Loop Function_ Off for EN-DC.
##### A.6.1.1.4.2 Test Procedure {#a.6.1.1.4.2-test-procedure .H6}
1\. Set the UE in a direction found using one of the test procedures defined
in Annex H of TS 38.521-4 [3]
2\. SS sets the parameters of the bandwidth, MCS and DL reference channel
(RMC) according to the test parameter selection procedure defined in TS
38.521-4 [4] clause 7.5.1.3 (for SA) or clause 9.4B.1.2.1 (for NSA). The SS
transmits PDSCH via PDCCH DCI format 1_1 for C_RNTI to transmit the DL RMC.
3\. SS sends uplink scheduling information for each UL HARQ process via PDCCH
DCI format 0_1 for C_RNTI to schedule the UL RMC over PUSCH according to
parameters set during initial conditions. The purpose of this scheduling is to
accommodate for TCP UL ACK/NACK feedback transmissions.
4\. Using the data client, begin TCP downlink data transfer from the
application server. Wait for 15 seconds and then start recording the TCP
throughput result. (This is iteration 1) Continue data transfer for the test
duration outlined in Table A.1-1.
5\. Repeat step 3 for 3 iterations within the same call as the first
iteration. Wait for at least 5 seconds between each iteration of the data
transfer.
6\. Calculate and record the average application layer data throughput across
three iterations. Additionally, count and record the overall number of ACK and
NACK/DTX on the PUSCH/PUCCH during the test interval. Record the IP address
type (IPv4 or IPv6) used during the TCP data transfers.
7\. Using the values in Table 5.4.4-2 (for IPv6) and Table 5.4.4-3 (for IPv4),
determine the reduction from 85% of peak PHY throughput value to obtain
reference Application Layer Throughput value.
# A.7 5G NR /TCP Downlink Throughput /Radiated for Fixed Reference Channel
Scenarios (FRC) with Fading
## A.7.1 5G NR /TCP Downlink Throughput /Radiated/Fading/FRC
### A.7.1.1 5G NR /TCP Downlink Throughput /Radiated/Fading/FRC/2Rx
#### A.7.1.1.1 5G NR /TCP Downlink Throughput /Radiated/Fading/2Rx TDD/FR2
PDSCH mapping Type A performance - for SA and NSA
Editor's note: Test points 2-6 is currently not testable for n259 pending
further optimization of maximum testable SNR in TS 38.521-4
##### A.7.1.1.1.1 Definition {#a.7.1.1.1.1-definition .H6}
The UE application layer downlink performance for TCP under different fading
environment is determined by the UE application layer TCP throughput.
##### A.7.1.1.1.2 Test Purpose {#a.7.1.1.1.2-test-purpose .H6}
To measure the performance of the 5G NR UE while downloading TCP based data in
a fading channel environment under 2 receive antenna conditions for FR2.
##### A.7.1.1.1.3 Test Parameters {#a.7.1.1.1.3-test-parameters .H6}
The test points to be used in this test are defined in Table A.7.1.1.1.3-1.
Details of these test points are available in Annex D with the test points
below referenced directly from Table D.2-1.
Table A.7.1.1.1.3-1: FR2 Test Point 2Rx
38.521-4 Reference Test num. Reference channel Bandwidth (MHz)/Subcarrier
spacing (kHz) Modulation format TDD UL-DL pattern Propagation condition
Correlation matrix and antenna configuration Reference value Comment
* * *
                                                                                                                                                                                                                 Fraction of maximum throughput (%)   SNR (dB)
7.2.2.2.1_1 1-2 R.PDSCH.5-2.1 TDD 100/120 16QAM, 0.48 FR2.120-1 TDLA30-300 2x2
ULA Low 30 1.7 Exercises HARQ Combining 7.2.2.2.1_1 2-2 R.PDSCH.5-2.2 TDD
100/120 16QAM, 0.48 FR2.120-1 TDLA30-300 2x2 ULA Low 70 14.4 High doppler
7.2.2.2.1_1 2-6 R.PDSCH.5-6.1 TDD 100/120 64QAM, 0.43 FR2.120-2 TDLA30-75 2x2
ULA Low 70 18.6 Large TBS, Low Doppler
##### A.7.1.1.1.4 Test Description {#a.7.1.1.1.4-test-description .H6}
##### A.7.1.1.1.4.1 Initial Conditions {#a.7.1.1.1.4.1-initial-conditions .H6}
Initial conditions are a set of test configurations the UE needs to be tested
in and the steps for the SS to take with the UE to reach the correct
measurement state. Apply the Initial conditions defined in TS 38.521-4 [3]
clause 7.2.2.2.1_1.3.1 with the following additional steps and/or exceptions:
1.1 Connect an application server to the IP output of the SS.
1.2 For an embedded configuration, ensure that the UE has an client test
application available. For a tethered configuration, tether the UE to a laptop
configured with FTP client software using the appropriate UE to PC interface
Modem or Network Interface Connection (NIC) drivers.
2\. In Step 2 skip reference to TS 38.521-4 [3] 7.2.2.2.1.0-2 since test
parameters are already defined for this l test.
5\. For NSA case, the E-UTRA anchor is configured as per Annex E. Ensure the
UE is in RRC_CONNECTED State with generic procedure parameters Connectivity NR
for NR/5GC with _Connected without Release_ On, _Test Mode_ Off or EN-DC, DC
bearer MCG and SCG, _Connected without release_ On, _Test Mode_ Off for EN-DC.
##### A.7.1.1.1.4.2 Procedure {#a.7.1.1.1.4.2-procedure .H6}
1\. Set the UE in a direction found using one of the test procedures defined
in Annex H of TS 38.521-4 [3]
2\. SS sends uplink scheduling information for each UL HARQ process via PDCCH
DCI format 0_1 for C_RNTI to schedule the UL RMC over PUSCH according to
parameters set during initial conditions. The purpose of this scheduling is to
accommodate for TCP UL ACK/NACK feedback transmissions.
3\. Using the data client, begin TCP downlink data transfer from the
application server. Wait for 15 seconds and then start recording the TCP
throughput result. (This is iteration 1) Continue data transfer for the test
duration outlined in Table A.1-1.
4\. Repeat step 3 for 3 iterations within the same call as the first
iteration. Wait for at least 5 seconds between each iteration of the data
transfer.
5\. Calculate and record the average application layer data throughput across
three iterations. Additionally, count and record the overall number of ACK and
NACK/DTX on the PUSCH/PUCCH during the test interval. Record the IP address
type (IPv4 or IPv6) used during the TCP data transfers.
6\. Using the values in Table 5.4.4-2 (for IPv6) and Table 5.4.4-3 (for IPv4),
determine the reduction from PHY reference fractional throughput value listed
in Table A.7.1.1.1.3-1 to obtain reference Application Layer Throughput value.
### A.7.1.2 5G NR /TCP Downlink Throughput /Radiated/Fading/FRC/4Rx
#### A.7.1.2.1 Void
# A.8 5G NR /UDP Downlink Throughput/Radiated/Static Peak Throughput for SA
and NSA
## A.8.1 5G NR /UDP Downlink Throughput /Radiated/Static Channel Peak
Throughput tests for SA and NSA
### A.8.1.1 5G NR /UDP Downlink Throughput /Radiated/Static Channel/ SA and
NSA (no Downlink Split Bearer)
##### A.8.1.1.1 Definition {#a.8.1.1.1-definition .H6}
The UE application layer downlink performance for UDP under different static
environment is determined by the UE application layer UDP throughput.
##### A.8.1.1.2 Test Purpose {#a.8.1.1.2-test-purpose .H6}
To measure the performance of the 5G NR UE while downloading UDP based data in
a static channel environment for FR2.
##### A.8.1.1.3 Test Parameters {#a.8.1.1.3-test-parameters .H6}
The common test parameters are defined in 38.521-4 [4] Table 7.5.1.3-1.
CORESET details are in TS 38.521-4 [4] Table 7.5.1.3-2 and MCS indices for
indicated UE capabilities are in TS 38.521-4 [4] Table 7.5.1.3-3. SNR required
to achieve lower layer throughput requirements is specified in TS 38.521-4 [4]
Table 7.5.1.3-4. The test parameter selection procedure is defined in TS
38.521-4 [4] clause 7.5.1.3 (for SA) and clause 9.4B.1.2.1 (for NSA). In
addition, the following test statements from TS 38.521-4 [3] clause 9.4B.1.2
apply:
For NSA FR2 case, the E-UTRA anchor is functional link and is setup via the
parameters defined in Annex E.
##### A.8.1.1.4 Test Description {#a.8.1.1.4-test-description .H6}
##### A.8.1.1.4.1 Initial Conditions {#a.8.1.1.4.1-initial-conditions .H6}
Initial conditions are a set of test configurations the UE needs to be tested
in and the steps for the SS to take with the UE to reach the correct
measurement state. Apply the Initial conditions defined in TS 38.521-4 [3]
clause 7.5.1.4.1 (for SA) or clause 9.4B.1.2.4.1 (for NSA) with the following
additional steps and/or exceptions:
> 1\. In Step 1, no AWGN source needs to be connected as this is a clean
> channel test case.
>
> 1.1 Connect an application server to the IP output of the SS.
>
> 1.2 For an embedded configuration, ensure that the UE has a client test
> application available. For a tethered configuration, tether the UE to a
> laptop configured with FTP client software using the appropriate UE to PC
> interface Modem or Network Interface Connection (NIC) drivers.
>
> 5\. For NSA case, the E-UTRA anchor is configured as per Annex E. Ensure the
> UE is in RRC_CONNECTED State with generic procedure parameters Connectivity
> NR for NR/5GC with _Connected without Release_ On, _Test Mode_ Off, _Test
> Loop Function_ Off or EN-DC, DC bearer MCG and SCG, _Connected without
> release_ On, _Test Mode_ Off, _Test Loop Function_ Off for EN-DC.
##### A.8.1.1.4.2 Test Procedure {#a.8.1.1.4.2-test-procedure .H6}
1\. Set the UE in a direction found using one of the test procedures defined
in Annex H of TS 38.521-4 [3]
2\. SS sets the parameters of the bandwidth, MCS and DL reference channel
(RMC) according to the test parameter selection procedure defined in TS
38.521-4 [4] clause 7.5.1.3 (for SA) or clause 9.4B.1.2.1 (for NSA). The SS
transmits PDSCH via PDCCH DCI format 1_1 for C_RNTI to transmit the DL RMC.
3\. SS sends uplink scheduling information for each UL HARQ process via PDCCH
DCI format 0_1 for C_RNTI to schedule the UL RMC over PUSCH according to
parameters set during initial conditions.
4\. Using the data client, begin UDP downlink data transfer from the
application server. Wait for 15 seconds and then start recording the UDP
throughput result. (This is iteration 1) Continue data transfer for the test
duration outlined in Table A.1-1.
5\. Repeat step 3 for 3 iterations within the same call as the first
iteration. Wait for at least 5 seconds between each iteration of the data
transfer.
6\. Calculate and record the average application layer data throughput across
three iterations. Additionally, count and record the overall number of ACK and
NACK/DTX on the PUSCH/PUCCH during the test interval. Record the IP address
type (IPv4 or IPv6) used during the UDP data transfers.
7\. Using the values in Table 5.4.4-2 (for IPv6) and Table 5.4.4-3 (for IPv4),
determine the reduction from 85% of peak PHY throughput value to obtain
reference Application Layer Throughput value.
# A.9 5G NR /UDP Downlink Throughput /Radiated for Fixed Reference Channel
Scenarios (FRC) with Fading
## A.9.1 5G NR /UDP Downlink Throughput /Radiated/Fading/FRC
### A.9.1.1 5G NR /UDP Downlink Throughput /Radiated/Fading/FRC/2Rx
#### A.9.1.1.1 5G NR /UDP Downlink Throughput /Radiated/Fading/2Rx TDD/FR2
PDSCH mapping Type A performance - for SA and NSA
Editor's note: Test points 2-6 is currently not testable for n259 pending
further optimization of maximum testable SNR in TS 38.521-4
##### A.9.1.1.1.1 Definition {#a.9.1.1.1.1-definition .H6}
The UE application layer downlink performance for UDP under different fading
environment is determined by the UE application layer UDP throughput.
##### A.9.1.1.1.2 Test Purpose {#a.9.1.1.1.2-test-purpose .H6}
To measure the performance of the 5G NR UE while downloading UDP based data in
a fading channel environment under 2 receive antenna conditions for FR2.
##### A.9.1.1.1.3 Test Parameters {#a.9.1.1.1.3-test-parameters .H6}
The test points to be used in this test are defined in Table A.9.1.1.1.3-1.
Details of these test points are available in Annex D with the test points
below referenced directly from Table D.2-1.
Table A.9.1.1.1.3-1: FR2 Test Point 2Rx
38.521-4 Reference Test num. Reference channel Bandwidth (MHz)/Subcarrier
spacing (kHz) Modulation format TDD UL-DL pattern Propagation condition
Correlation matrix and antenna configuration Reference value Comment
* * *
                                                                                                                                                                                                                 Fraction of maximum throughput (%)   SNR (dB)
7.2.2.2.1_1 1-2 R.PDSCH.5-2.1 TDD 100/120 16QAM, 0.48 FR2.120-1 TDLA30-300 2x2
ULA Low 30 1.7 Exercises HARQ Combining 7.2.2.2.1_1 2-2 R.PDSCH.5-2.2 TDD
100/120 16QAM, 0.48 FR2.120-1 TDLA30-300 2x2 ULA Low 70 14.4 High doppler
7.2.2.2.1_1 2-6 R.PDSCH.5-6.1 TDD 100/120 64QAM, 0.43 FR2.120-2 TDLA30-75 2x2
ULA Low 70 18.6 Large TBS, Low Doppler
##### A.9.1.1.1.4 Test Description {#a.9.1.1.1.4-test-description .H6}
##### A.9.1.1.1.4.1 Initial Conditions {#a.9.1.1.1.4.1-initial-conditions .H6}
UDPUDPInitial conditions are a set of test configurations the UE needs to be
tested in and the steps for the SS to take with the UE to reach the correct
measurement state. Apply the Initial conditions defined in TS 38.521-4 [3]
clause 7.2.2.2.1_1.3.1 with the following additional steps and/or exceptions:
1.1 Connect an application server to the IP output of the SS.
1.2 For an embedded configuration, ensure that the UE has an client test
application available. For a tethered configuration, tether the UE to a laptop
configured with FTP client software using the appropriate UE to PC interface
Modem or Network Interface Connection (NIC) drivers.
2\. In Step 2 skip reference to TS 38.521-4 [3] 7.2.2.2.1.0-2 since test
parameters are already defined for this l test.
3\. For NSA case, the E-UTRA anchor is configured as per Annex E. Ensure the
UE is in RRC_CONNECTED State with generic procedure parameters Connectivity NR
for NR/5GC with _Connected without Release_ On, _Test Mode_ Off or EN-DC, DC
bearer MCG and SCG, _Connected without release_ On, _Test Mode_ Off for EN-DC.
##### A.9.1.1.1.4.2 Procedure {#a.9.1.1.1.4.2-procedure .H6}
1\. Set the UE in a direction found using one of the test procedures defined
in Annex H of TS 38.521-4 [3].
2\. SS sets the parameters of the bandwidth, MCS and DL reference channel
(RMC) according to the test parameter selection procedure defined in TS
38.521-4 [4] clause 7.2.2.2.1_1. The SS transmits PDSCH via PDCCH DCI format
1_1 for C_RNTI to transmit the DL RMC.
3\. Using the data client, begin UDP downlink data transfer from the
application server. Wait for 15 seconds and then start recording the UDP
throughput result. (This is iteration 1) Continue data transfer for the test
duration outlined in Table A.1-1.
4\. Repeat step 3 for 3 iterations within the same call as the first
iteration. Wait for at least 5 seconds between each iteration of the data
transfer.
5\. Calculate and record the average application layer data throughput across
three iterations. Additionally, count and record the overall number of ACK and
NACK/DTX on the PUSCH/PUCCH during the test interval. Record the IP address
type (IPv4 or IPv6) used during the UDP data transfers.
6\. Using the values in Table 5.4.4-2 (for IPv6) and Table 5.4.4-3 (for IPv4),
determine the reduction from PHY reference fractional throughput value listed
in Table A.9.1.1.1.3-1 to obtain reference Application Layer Throughput value.
### A.9.1.2 5G NR /UDP Downlink Throughput /Radiated/Fading/FRC/4Rx
#### A.9.1.2.1 Void
# A.10 5G NR /TCP Downlink Throughput /Conducted for Variable Reference
Channel (VRC) Scenarios with Fading for SA and NSA
## A.10.1 5G NR /TCP Downlink Throughput /Conducted/Fading/VRC for SA and NSA
### A.10.1.1 5G NR /TCP Downlink Throughput /Conducted/Fading/VRC/2Rx for SA
and NSA
#### A.10.1.1.1 5G NR /TCP Downlink Throughput /Conducted/Fading/VRC/2Rx FDD
/FR1 PDSCH mapping Type A performance - for SA and NSA
##### A.10.1.1.1.1 Definition {#a.10.1.1.1.1-definition .H6}
The UE application layer downlink performance for TCP under fading environment
with variable reference channel is determined by the UE application layer TCP
throughput.
##### A.10.1.1.1.2 Test Purpose {#a.10.1.1.1.2-test-purpose .H6}
To measure the performance of the 5G NR UE while downloading TCP based data in
a fading channel environment with variable reference channel under 2 receive
antenna conditions for FR1. The duplex mode is FDD.
##### A.10.1.1.1.3 Test Parameters {#a.10.1.1.1.3-test-parameters .H6}
The test parameters are specified in Table A.10.1.1.1.3-1. Test1 is to be
selected as test point.
Table A.10.1.1.1.3-1: FDD FR1 2Rx Test point
+----------+----------+----------+----------+----------+----------+ | P | Unit | Test 1 | Test 2 | Test 3 | | | arameter | | | | | | +==========+==========+==========+==========+==========+==========+ | F | | FR1 | FR1 | FR2 | | | requency | | | | | | | range | | | | | | +----------+----------+----------+----------+----------+----------+ | B | MHz | 10 | 40 | 100 | | | andwidth | | | | | | +----------+----------+----------+----------+----------+----------+ | Su | kHz | 15 | 30 | 120 | | | bcarrier | | | | | | | spacing | | | | | | +----------+----------+----------+----------+----------+----------+ | Duplex | | FDD | TDD | TDD | | | Mode | | | | | | +----------+----------+----------+----------+----------+----------+ | TDD Slot | | N/A | 7D1S2U | DDSU | | | Confi | | | | | | | guration | | | S: | S:1 | | | | | | 6D+4G+4U | 1D+3G+0U | | +----------+----------+----------+----------+----------+----------+ | SNR | dB | 20 | 20 | 16 | | +----------+----------+----------+----------+----------+----------+ | Pro | | TDLA30-5 | TDLA30-5 | T | | | pagation | | | | DLA30-35 | | | channel | | | | | | +----------+----------+----------+----------+----------+----------+ | Antenna | | ULA Low | ULA Low | ULA Low | | | confi | | 2x2 | 2x2 | 2x2 | | | guration | | | | | | +----------+----------+----------+----------+----------+----------+ | Bea | | As | As | As | | | mforming | | defined | defined | defined | | | Model | | in Annex | in Annex | in Annex | | | | | B.4.1 in | B.4.1 in | B.4.1 in | | | | | TS | TS | TS | | | | | 38.101-4 | 38.101-4 | 38.101-4 | | +----------+----------+----------+----------+----------+----------+ | Receiver | | MMSE-IRC | MMSE-IRC | MMSE-IRC | | | type | | | | | | +----------+----------+----------+----------+----------+----------+ | PDSCH | Mapping | | Type A | Type A | Type A | | confi | type | | | | | | guration | | | | | | +----------+----------+----------+----------+----------+----------+ | | Starting | | 2 | 2 | 2 | | | symbol | | | | | | | (S) | | | | | +----------+----------+----------+----------+----------+----------+ | | Length | | 12 | 12 | 12 | | | (L) | | | | | +----------+----------+----------+----------+----------+----------+ | | PRB | | 2 | 2 | 2 | | | bundling | | | | | | | size | | | | | +----------+----------+----------+----------+----------+----------+ | | PRB | | Static | Static | Static | | | bundling | | | | | | | type | | | | | +----------+----------+----------+----------+----------+----------+ | | VR | | Non-int | Non-int | Non-int | | | B-to-PRB | | erleaved | erleaved | erleaved | | | mapping | | | | | | | int | | | | | | | erleaver | | | | | | | bundle | | | | | | | size | | | | | +----------+----------+----------+----------+----------+----------+ | PDSCH | DMRS | | Type 1 | Type 1 | Type 1 | | DMRS | Type | | | | | | confi | | | | | | | guration | | | | | | +----------+----------+----------+----------+----------+----------+ | | Number | | 1 | 1 | 1 | | | of | | | | | | | ad | | | | | | | ditional | | | | | | | DMRS | | | | | +----------+----------+----------+----------+----------+----------+ | | Maximum | | 1 | 1 | 1 | | | number | | | | | | | of OFDM | | | | | | | symbols | | | | | | | for DL | | | | | | | front | | | | | | | loaded | | | | | | | DMRS | | | | | +----------+----------+----------+----------+----------+----------+ | CSI | | As | As | As | | | mea | | s | s | s | | | surement | | pecified | pecified | pecified | | | channels | | in Table | in Table | in Table | | | (Note 2) | | A.4-2 of | A.4-2 of | A.4-1 of | | | | | TS | TS | TS | | | | | 3 | 3 | 3 | | | | | 8.101-4: | 8.101-4: | 8.101-4: | | | | | | | | | | | | Rank 1: | Rank 1: | Rank 1: | | | | | TBS.2-1 | TBS.2-3 | TBS.1-1 | | | | | | | | | | | | Rank 2: | Rank 2: | Rank 2: | | | | | TBS.2-2 | TBS.2-4 | TBS.1-2 | | +----------+----------+----------+----------+----------+----------+ | ZP | CSI-RS | | Periodic | Periodic | Periodic | | CSI-RS | resource | | | | | | confi | Type | | | | | | guration | | | | | | +----------+----------+----------+----------+----------+----------+ | | Number | | 4 | 4 | 4 | | | of | | | | | | | CSI-RS | | | | | | | ports | | | | | | | (_X_) | | | | | +----------+----------+----------+----------+----------+----------+ | | CDM Type | | FD-CDM2 | FD-CDM2 | FD-CDM2 | +----------+----------+----------+----------+----------+----------+ | | Density | | 1 | 1 | 1 | | | (ρ) | | | | | +----------+----------+----------+----------+----------+----------+ | | First | | Row 5, | Row 5, | Row 5, | | | su | | (4) | (4) | (8) | | | bcarrier | | | | | | | index in | | | | | | | the PRB | | | | | | | used for | | | | | | | CSI-RS | | | | | | | (k~0~) | | | | | +----------+----------+----------+----------+----------+----------+ | | First | | 9 | 9 | 13 | | | OFDM | | | | | | | symbol | | | | | | | in the | | | | | | | PRB used | | | | | | | for | | | | | | | CSI-RS | | | | | | | (l~0~) | | | | | +----------+----------+----------+----------+----------+----------+ | | CSI-RS | slot | 5/1 | 10/1 | 8/1 | | | | | | | | | | per | | | | | | | iodicity | | | | | | | and | | | | | | | offset | | | | | +----------+----------+----------+----------+----------+----------+ | NZP | CSI-RS | | Periodic | Periodic | A | | CSI-RS | resource | | | | periodic | | for CSI | Type | | | | | | acq | | | | | | | uisition | | | | | | +----------+----------+----------+----------+----------+----------+ | | Number | | 2 | 2 | 2 | | | of | | | | | | | CSI-RS | | | | | | | ports | | | | | | | (_X_) | | | | | +----------+----------+----------+----------+----------+----------+ | | CDM Type | | FD-CDM2 | FD-CDM2 | FD-CDM2 | +----------+----------+----------+----------+----------+----------+ | | Density | | 1 | 1 | 1 | | | (ρ) | | | | | +----------+----------+----------+----------+----------+----------+ | | First | | Row 3 | Row 3 | Row 3 | | | su | | (6) | (6) | (6) | | | bcarrier | | | | | | | index in | | | | | | | the PRB | | | | | | | used for | | | | | | | CSI-RS | | | | | | | (k~0~) | | | | | +----------+----------+----------+----------+----------+----------+ | | First | | 13 | 13 | 13 | | | OFDM | | | | | | | symbol | | | | | | | in the | | | | | | | PRB used | | | | | | | for | | | | | | | CSI-RS | | | | | | | (l~0~) | | | | | +----------+----------+----------+----------+----------+----------+ | | NZP | slot | 5/1 | 10/1 | Not | | | C | | | | co | | | SI-RS-ti | | | | nfigured | | | meConfig | | | | | | | | | | | | | | per | | | | | | | iodicity | | | | | | | and | | | | | | | offset | | | | | +----------+----------+----------+----------+----------+----------+ | CSI-IM | CSI-IM | | Periodic | Periodic | Periodic | | confi | resource | | | | | | guration | Type | | | | | +----------+----------+----------+----------+----------+----------+ | | CSI-IM | | Pattern | Pattern | Pattern | | | RE | | 0 | 0 | 1 | | | pattern | | | | | +----------+----------+----------+----------+----------+----------+ | | CSI-IM | | (4,9) | (4,9) | (8,13) | | | Resource | | | | | | | Mapping | | | | | | | | | | | | | | (k~CS | | | | | | | I-IM~,l~ | | | | | | | CSI-IM~) | | | | | +----------+----------+----------+----------+----------+----------+ | | CSI-IM | slot | 5/1 | 10/1 | Not | | | ti | | | | co | | | meConfig | | | | nfigured | | | | | | | | | | per | | | | | | | iodicity | | | | | | | and | | | | | | | offset | | | | | +----------+----------+----------+----------+----------+----------+ | ReportCo | | A | A | A | | | nfigType | | periodic | periodic | periodic | | +----------+----------+----------+----------+----------+----------+ | C | | Table 2 | Table 2 | Table 2 | | | QI-table | | | | | | +----------+----------+----------+----------+----------+----------+ | report | | cri-RI | cri-RI | cri-RI | | | Quantity | | -PMI-CQI | -PMI-CQI | -PMI-CQI | | +----------+----------+----------+----------+----------+----------+ | timeR | | not | not | not | | | estricti | | co | co | co | | | onForCha | | nfigured | nfigured | nfigured | | | nnelMeas | | | | | | | urements | | | | | | +----------+----------+----------+----------+----------+----------+ | ti | | not | not | not | | | meRestri | | co | co | co | | | ctionFor | | nfigured | nfigured | nfigured | | | Interfer | | | | | | | enceMeas | | | | | | | urements | | | | | | +----------+----------+----------+----------+----------+----------+ | cqi | | Wideband | Wideband | Wideband | | | -FormatI | | | | | | | ndicator | | | | | | +----------+----------+----------+----------+----------+----------+ | pmi | | Wideband | Wideband | Wideband | | | -FormatI | | | | | | | ndicator | | | | | | +----------+----------+----------+----------+----------+----------+ | Sub-band | RB | 8 | 16 | 8 | | | Size | | | | | | +----------+----------+----------+----------+----------+----------+ | c | | 1111111 | 1111111 | 1 | | | si-Repor | | | | 11111111 | | | tingBand | | | | | | +----------+----------+----------+----------+----------+----------+ | CS | slot | Not | Not | Not | | | I-Report | | co | co | co | | | per | | nfigured | nfigured | nfigured | | | iodicity | | | | | | | and | | | | | | | offset | | | | | | +----------+----------+----------+----------+----------+----------+ | A | | 5 | 9 | 7 | | | periodic | | | | | | | Report | | | | | | | Slot | | | | | | | Offset | | | | | | +----------+----------+----------+----------+----------+----------+ | CSI | | 1 in | 1 in | 1 in | | | request | | slots i, | slots i, | slots i, | | | | | where | where | where | | | | | mod(i, | mod(i, | mod(i, | | | | | 5) = 0, | 10) = 0, | 8) = 1, | | | | | o | o | o | | | | | therwise | therwise | therwise | | | | | it is | it is | it is | | | | | equal to | equal to | equal to | | | | | 0 | 0 | 0 | | +----------+----------+----------+----------+----------+----------+ | r | | 1 | 1 | 1 | | | eportTri | | | | | | | ggerSize | | | | | | +----------+----------+----------+----------+----------+----------+ | CSI-A | | One | One | One | | | periodic | | State | State | State | | | TriggerS | | with one | with one | with one | | | tateList | | As | As | As | | | | | sociated | sociated | sociated | | | | | Report | Report | Report | | | | | Confi | Confi | Confi | | | | | guration | guration | guration | | | | | | | | | | | | As | As | As | | | | | sociated | sociated | sociated | | | | | Report | Report | Report | | | | | Confi | Confi | Confi | | | | | guration | guration | guration | | | | | contains | contains | contains | | | | | pointers | pointers | pointers | | | | | to NZP | to NZP | to NZP | | | | | CSI-RS | CSI-RS | CSI-RS | | | | | and | and | and | | | | | CSI-IM | CSI-IM | CSI-IM | | +----------+----------+----------+----------+----------+----------+ | Codebook | Codebook | | t | t | t | | confi | Type | | ypeI-Sin | ypeI-Sin | ypeI-Sin | | guration | | | glePanel | glePanel | glePanel | +----------+----------+----------+----------+----------+----------+ | | Codebook | | 1 | 1 | 1 | | | Mode | | | | | +----------+----------+----------+----------+----------+----------+ | | (Code | | N/A | N/A | N/A | | | bookConf | | | | | | | ig-N1,Co | | | | | | | debookCo | | | | | | | nfig-N2) | | | | | +----------+----------+----------+----------+----------+----------+ | | C | | Not | Not | Not | | | odebookS | | co | co | co | | | ubsetRes | | nfigured | nfigured | nfigured | | | triction | | | | | +----------+----------+----------+----------+----------+----------+ | | RI | | N/A | N/A | N/A | | | Res | | | | | | | triction | | | | | +----------+----------+----------+----------+----------+----------+ | Physical | | PUSCH | PUSCH | PUSCH | | | channel | | | | | | | for CSI | | | | | | | report | | | | | | +----------+----------+----------+----------+----------+----------+ | CQ | ms | 6 | 5.5 | 1.375 | | | I/RI/PMI | | | | | | | delay | | | | | | +----------+----------+----------+----------+----------+----------+ | Maximum | | 1 | 1 | 1 | | | number | | | | | | | of HARQ | | | | | | | tran | | | | | | | smission | | | | | | +----------+----------+----------+----------+----------+----------+ | Test | | [T]% | | | | | metric | | of max | | | | | | | th | | | | | | | roughput | | | | | | | at | | | | | | | target | | | | | | | SNR. | | | | +----------+----------+----------+----------+----------+----------+ | Note 1: | | | | | | | Other | | | | | | | common | | | | | | | test | | | | | | | pa | | | | | | | rameters | | | | | | | are | | | | | | | defined | | | | | | | in | | | | | | | Section | | | | | | | 6.1.2 of | | | | | | | 38.101-4 | | | | | | | for | | | | | | | Tests 1 | | | | | | | and 2 | | | | | | | and | | | | | | | Section | | | | | | | 8.1.2 of | | | | | | | 38.101-4 | | | | | | | for Test | | | | | | | 3. | | | | | | | | | | | | | | Note 2: | | | | | | | PDSCH is | | | | | | | not | | | | | | | s | | | | | | | cheduled | | | | | | | on slots | | | | | | | co | | | | | | | ntaining | | | | | | | CSI-RS | | | | | | | for CSI | | | | | | | acqu | | | | | | | isition, | | | | | | | CSI-RS | | | | | | | for | | | | | | | tracking | | | | | | | and | | | | | | | CSI-RS | | | | | | | for beam | | | | | | | re | | | | | | | finement | | | | | | | (for | | | | | | | Test 3 | | | | | | | only). | | | | | | +----------+----------+----------+----------+----------+----------+
##### A.10.1.1.1.4 Test Description {#a.10.1.1.1.4-test-description .H6}
##### A.10.1.1.1.4.1 Initial Conditions {#a.10.1.1.1.4.1-initial-conditions
.H6}
Initial conditions are a set of test configurations the UE needs to be tested
in and the steps for the SS to take with the UE to reach the correct
measurement state. Apply the Initial conditions defined in TS 38.521-4 [3]
clause 6.4.2.1_1.4.1 with the following additional steps and/or exceptions:
1.1 Connect an application server to the IP output of the SS.
1.2 For an embedded configuration, ensure that the UE has a client test
application available. For a tethered configuration, tether the UE to a laptop
configured with FTP client software using the appropriate UE to PC interface
Modem or Network Interface Connection (NIC) drivers.
2\. In Step 2 skip reference to 38.521-4 [3] Table 5.2.2.1.1.0-2 and Table
5.2.2.1.0-3 since test parameters are already defined for this test.
5\. For NSA case, the E-UTRA anchor is configured as per Annex E. Ensure the
UE is in RRC_CONNECTED State with generic procedure parameters Connectivity NR
for NR/5GC with _Connected without Release_ On, _Test Mode_ Off or EN-DC, DC
bearer MCG and SCG, _Connected without release_ On, _Test Mode_ Off for EN-DC.
Message contents are as per TS 38.521-4 [3] Clause 6.4.2.1_1.4.3 with the
exceptions defined in Annex H.
##### A.10.1.1.1.4.2 Test Procedure {#a.10.1.1.1.4.2-test-procedure .H6}
1\. Set the parameters of bandwidth, reference channel, the propagation
condition, antenna configuration, antenna correlation, Codebook configuration,
Beamforming Model, RI configuration and SNR according to Table A.10.1.1.1.3-1
as appropriate.
2\. SS shall send PDSCH via PDCCH DCI format 1_1 for C_RNTI to transmit the DL
RMC according to the UE reported CQI (wideband CQI), PMI and RI. The SS sends
downlink MAC padding bits on the DL RMC.
3\. SS sends uplink scheduling information for each UL HARQ process via PDCCH
DCI format 0_1 for C_RNTI to schedule the UL RMC over PUSCH according to
parameters set during initial conditions. The purpose of this scheduling is to
accommodate for TCP UL ACK/NACK feedback transmissions.
4\. Using the data client, begin TCP downlink data transfer from the
application server. Wait for 15 seconds and then start recording the TCP
throughput result (This is iteration 1). Continue data transfer for the test
duration outlined in Table A.1-14.
5\. Repeat step 4 for 3 iterations within the same call as the first
iteration. Wait for at least 5 seconds between each iteration of the data
transfer.
6\. Calculate and record the average application layer data throughput across
three iterations. Additionally, count and record the overall number of ACK and
NACK/DTX on the PUSCH/PUCCH during the test interval purely for information
purposes.
7\. Record the IP address type (IPv4 or IPv6) used during the TCP data
transfers.
8\. Using the values for TCP in Table 5.4.4-2 (for IPv6) and Table 5.4.4-3
(for IPv4), determine the reduction from PHY reference fractional throughput
value listed in Table A.10.1.1.1.3-1 to obtain reference Application Layer
Throughput value.
#### A.10.1.1.2 5G NR /TCP Downlink Throughput /Conducted/Fading/VRC/2Rx TDD
/FR1 PDSCH mapping Type A performance - for SA and NSA
##### A.10.1.1.2.1 Definition {#a.10.1.1.2.1-definition .H6}
The UE application layer downlink performance for TCP under fading environment
with variable reference channel is determined by the UE application layer TCP
throughput.
##### A.10.1.1.2.2 Test Purpose {#a.10.1.1.2.2-test-purpose .H6}
To measure the performance of the 5G NR UE while downloading TCP based data in
a fading channel environment with variable reference channel under 2 receive
antenna conditions for FR1. The duplex mode is TDD.
##### A.10.1.1.2.3 Test Parameters {#a.10.1.1.2.3-test-parameters .H6}
The test parameters are specified in Table A.10.1.1.2.3-1. Test2 is to be
selected as test point.
Table A.10.1.1.2.3-1: TDD FR1 2Rx Test point
+----------+----------+----------+----------+----------+----------+ | P | Unit | Test 1 | Test 2 | Test 3 | | | arameter | | | | | | +==========+==========+==========+==========+==========+==========+ | F | | FR1 | FR1 | FR2 | | | requency | | | | | | | range | | | | | | +----------+----------+----------+----------+----------+----------+ | B | MHz | 10 | 40 | 100 | | | andwidth | | | | | | +----------+----------+----------+----------+----------+----------+ | Su | kHz | 15 | 30 | 120 | | | bcarrier | | | | | | | spacing | | | | | | +----------+----------+----------+----------+----------+----------+ | Duplex | | FDD | TDD | TDD | | | Mode | | | | | | +----------+----------+----------+----------+----------+----------+ | TDD Slot | | N/A | 7D1S2U | DDSU | | | Confi | | | | | | | guration | | | S: | S:1 | | | | | | 6D+4G+4U | 1D+3G+0U | | +----------+----------+----------+----------+----------+----------+ | SNR | dB | 20 | 20 | 16 | | +----------+----------+----------+----------+----------+----------+ | Pro | | TDLA30-5 | TDLA30-5 | T | | | pagation | | | | DLA30-35 | | | channel | | | | | | +----------+----------+----------+----------+----------+----------+ | Antenna | | ULA Low | ULA Low | ULA Low | | | confi | | 2x2 | 2x2 | 2x2 | | | guration | | | | | | +----------+----------+----------+----------+----------+----------+ | Bea | | As | As | As | | | mforming | | defined | defined | defined | | | Model | | in Annex | in Annex | in Annex | | | | | B.4.1 in | B.4.1 in | B.4.1 in | | | | | TS | TS | TS | | | | | 38.101-4 | 38.101-4 | 38.101-4 | | +----------+----------+----------+----------+----------+----------+ | Receiver | | MMSE-IRC | MMSE-IRC | MMSE-IRC | | | type | | | | | | +----------+----------+----------+----------+----------+----------+ | PDSCH | Mapping | | Type A | Type A | Type A | | confi | type | | | | | | guration | | | | | | +----------+----------+----------+----------+----------+----------+ | | Starting | | 2 | 2 | 2 | | | symbol | | | | | | | (S) | | | | | +----------+----------+----------+----------+----------+----------+ | | Length | | 12 | 12 | 12 | | | (L) | | | | | +----------+----------+----------+----------+----------+----------+ | | PRB | | 2 | 2 | 2 | | | bundling | | | | | | | size | | | | | +----------+----------+----------+----------+----------+----------+ | | PRB | | Static | Static | Static | | | bundling | | | | | | | type | | | | | +----------+----------+----------+----------+----------+----------+ | | VR | | Non-int | Non-int | Non-int | | | B-to-PRB | | erleaved | erleaved | erleaved | | | mapping | | | | | | | int | | | | | | | erleaver | | | | | | | bundle | | | | | | | size | | | | | +----------+----------+----------+----------+----------+----------+ | PDSCH | DMRS | | Type 1 | Type 1 | Type 1 | | DMRS | Type | | | | | | confi | | | | | | | guration | | | | | | +----------+----------+----------+----------+----------+----------+ | | Number | | 1 | 1 | 1 | | | of | | | | | | | ad | | | | | | | ditional | | | | | | | DMRS | | | | | +----------+----------+----------+----------+----------+----------+ | | Maximum | | 1 | 1 | 1 | | | number | | | | | | | of OFDM | | | | | | | symbols | | | | | | | for DL | | | | | | | front | | | | | | | loaded | | | | | | | DMRS | | | | | +----------+----------+----------+----------+----------+----------+ | CSI | | As | As | As | | | mea | | s | s | s | | | surement | | pecified | pecified | pecified | | | channels | | in Table | in Table | in Table | | | (Note 2) | | A.4-2 of | A.4-2 of | A.4-1 of | | | | | TS | TS | TS | | | | | 3 | 3 | 3 | | | | | 8.101-4: | 8.101-4: | 8.101-4: | | | | | | | | | | | | Rank 1: | Rank 1: | Rank 1: | | | | | TBS.2-1 | TBS.2-3 | TBS.1-1 | | | | | | | | | | | | Rank 2: | Rank 2: | Rank 2: | | | | | TBS.2-2 | TBS.2-4 | TBS.1-2 | | +----------+----------+----------+----------+----------+----------+ | ZP | CSI-RS | | Periodic | Periodic | Periodic | | CSI-RS | resource | | | | | | confi | Type | | | | | | guration | | | | | | +----------+----------+----------+----------+----------+----------+ | | Number | | 4 | 4 | 4 | | | of | | | | | | | CSI-RS | | | | | | | ports | | | | | | | (_X_) | | | | | +----------+----------+----------+----------+----------+----------+ | | CDM Type | | FD-CDM2 | FD-CDM2 | FD-CDM2 | +----------+----------+----------+----------+----------+----------+ | | Density | | 1 | 1 | 1 | | | (ρ) | | | | | +----------+----------+----------+----------+----------+----------+ | | First | | Row 5, | Row 5, | Row 5, | | | su | | (4) | (4) | (8) | | | bcarrier | | | | | | | index in | | | | | | | the PRB | | | | | | | used for | | | | | | | CSI-RS | | | | | | | (k~0~) | | | | | +----------+----------+----------+----------+----------+----------+ | | First | | 9 | 9 | 13 | | | OFDM | | | | | | | symbol | | | | | | | in the | | | | | | | PRB used | | | | | | | for | | | | | | | CSI-RS | | | | | | | (l~0~) | | | | | +----------+----------+----------+----------+----------+----------+ | | CSI-RS | slot | 5/1 | 10/1 | 8/1 | | | | | | | | | | per | | | | | | | iodicity | | | | | | | and | | | | | | | offset | | | | | +----------+----------+----------+----------+----------+----------+ | NZP | CSI-RS | | Periodic | Periodic | A | | CSI-RS | resource | | | | periodic | | for CSI | Type | | | | | | acq | | | | | | | uisition | | | | | | +----------+----------+----------+----------+----------+----------+ | | Number | | 2 | 2 | 2 | | | of | | | | | | | CSI-RS | | | | | | | ports | | | | | | | (_X_) | | | | | +----------+----------+----------+----------+----------+----------+ | | CDM Type | | FD-CDM2 | FD-CDM2 | FD-CDM2 | +----------+----------+----------+----------+----------+----------+ | | Density | | 1 | 1 | 1 | | | (ρ) | | | | | +----------+----------+----------+----------+----------+----------+ | | First | | Row 3 | Row 3 | Row 3 | | | su | | (6) | (6) | (6) | | | bcarrier | | | | | | | index in | | | | | | | the PRB | | | | | | | used for | | | | | | | CSI-RS | | | | | | | (k~0~) | | | | | +----------+----------+----------+----------+----------+----------+ | | First | | 13 | 13 | 13 | | | OFDM | | | | | | | symbol | | | | | | | in the | | | | | | | PRB used | | | | | | | for | | | | | | | CSI-RS | | | | | | | (l~0~) | | | | | +----------+----------+----------+----------+----------+----------+ | | NZP | slot | 5/1 | 10/1 | Not | | | C | | | | co | | | SI-RS-ti | | | | nfigured | | | meConfig | | | | | | | | | | | | | | per | | | | | | | iodicity | | | | | | | and | | | | | | | offset | | | | | +----------+----------+----------+----------+----------+----------+ | CSI-IM | CSI-IM | | Periodic | Periodic | Periodic | | confi | resource | | | | | | guration | Type | | | | | +----------+----------+----------+----------+----------+----------+ | | CSI-IM | | Pattern | Pattern | Pattern | | | RE | | 0 | 0 | 1 | | | pattern | | | | | +----------+----------+----------+----------+----------+----------+ | | CSI-IM | | (4,9) | (4,9) | (8,13) | | | Resource | | | | | | | Mapping | | | | | | | | | | | | | | (k~CS | | | | | | | I-IM~,l~ | | | | | | | CSI-IM~) | | | | | +----------+----------+----------+----------+----------+----------+ | | CSI-IM | slot | 5/1 | 10/1 | Not | | | ti | | | | co | | | meConfig | | | | nfigured | | | | | | | | | | per | | | | | | | iodicity | | | | | | | and | | | | | | | offset | | | | | +----------+----------+----------+----------+----------+----------+ | ReportCo | | A | A | A | | | nfigType | | periodic | periodic | periodic | | +----------+----------+----------+----------+----------+----------+ | C | | Table 2 | Table 2 | Table 2 | | | QI-table | | | | | | +----------+----------+----------+----------+----------+----------+ | report | | cri-RI | cri-RI | cri-RI | | | Quantity | | -PMI-CQI | -PMI-CQI | -PMI-CQI | | +----------+----------+----------+----------+----------+----------+ | timeR | | not | not | not | | | estricti | | co | co | co | | | onForCha | | nfigured | nfigured | nfigured | | | nnelMeas | | | | | | | urements | | | | | | +----------+----------+----------+----------+----------+----------+ | ti | | not | not | not | | | meRestri | | co | co | co | | | ctionFor | | nfigured | nfigured | nfigured | | | Interfer | | | | | | | enceMeas | | | | | | | urements | | | | | | +----------+----------+----------+----------+----------+----------+ | cqi | | Wideband | Wideband | Wideband | | | -FormatI | | | | | | | ndicator | | | | | | +----------+----------+----------+----------+----------+----------+ | pmi | | Wideband | Wideband | Wideband | | | -FormatI | | | | | | | ndicator | | | | | | +----------+----------+----------+----------+----------+----------+ | Sub-band | RB | 8 | 16 | 8 | | | Size | | | | | | +----------+----------+----------+----------+----------+----------+ | c | | 1111111 | 1111111 | 1 | | | si-Repor | | | | 11111111 | | | tingBand | | | | | | +----------+----------+----------+----------+----------+----------+ | CS | slot | Not | Not | Not | | | I-Report | | co | co | co | | | per | | nfigured | nfigured | nfigured | | | iodicity | | | | | | | and | | | | | | | offset | | | | | | +----------+----------+----------+----------+----------+----------+ | A | | 5 | 9 | 7 | | | periodic | | | | | | | Report | | | | | | | Slot | | | | | | | Offset | | | | | | +----------+----------+----------+----------+----------+----------+ | CSI | | 1 in | 1 in | 1 in | | | request | | slots i, | slots i, | slots i, | | | | | where | where | where | | | | | mod(i, | mod(i, | mod(i, | | | | | 5) = 0, | 10) = 0, | 8) = 1, | | | | | o | o | o | | | | | therwise | therwise | therwise | | | | | it is | it is | it is | | | | | equal to | equal to | equal to | | | | | 0 | 0 | 0 | | +----------+----------+----------+----------+----------+----------+ | r | | 1 | 1 | 1 | | | eportTri | | | | | | | ggerSize | | | | | | +----------+----------+----------+----------+----------+----------+ | CSI-A | | One | One | One | | | periodic | | State | State | State | | | TriggerS | | with one | with one | with one | | | tateList | | As | As | As | | | | | sociated | sociated | sociated | | | | | Report | Report | Report | | | | | Confi | Confi | Confi | | | | | guration | guration | guration | | | | | | | | | | | | As | As | As | | | | | sociated | sociated | sociated | | | | | Report | Report | Report | | | | | Confi | Confi | Confi | | | | | guration | guration | guration | | | | | contains | contains | contains | | | | | pointers | pointers | pointers | | | | | to NZP | to NZP | to NZP | | | | | CSI-RS | CSI-RS | CSI-RS | | | | | and | and | and | | | | | CSI-IM | CSI-IM | CSI-IM | | +----------+----------+----------+----------+----------+----------+ | Codebook | Codebook | | t | t | t | | confi | Type | | ypeI-Sin | ypeI-Sin | ypeI-Sin | | guration | | | glePanel | glePanel | glePanel | +----------+----------+----------+----------+----------+----------+ | | Codebook | | 1 | 1 | 1 | | | Mode | | | | | +----------+----------+----------+----------+----------+----------+ | | (Code | | N/A | N/A | N/A | | | bookConf | | | | | | | ig-N1,Co | | | | | | | debookCo | | | | | | | nfig-N2) | | | | | +----------+----------+----------+----------+----------+----------+ | | C | | Not | Not | Not | | | odebookS | | co | co | co | | | ubsetRes | | nfigured | nfigured | nfigured | | | triction | | | | | +----------+----------+----------+----------+----------+----------+ | | RI | | N/A | N/A | N/A | | | Res | | | | | | | triction | | | | | +----------+----------+----------+----------+----------+----------+ | Physical | | PUSCH | PUSCH | PUSCH | | | channel | | | | | | | for CSI | | | | | | | report | | | | | | +----------+----------+----------+----------+----------+----------+ | CQ | ms | 6 | 5.5 | 1.375 | | | I/RI/PMI | | | | | | | delay | | | | | | +----------+----------+----------+----------+----------+----------+ | Maximum | | 1 | 1 | 1 | | | number | | | | | | | of HARQ | | | | | | | tran | | | | | | | smission | | | | | | +----------+----------+----------+----------+----------+----------+ | Test | | [T]% | | | | | metric | | of max | | | | | | | th | | | | | | | roughput | | | | | | | at | | | | | | | target | | | | | | | SNR. | | | | +----------+----------+----------+----------+----------+----------+ | Note 1: | | | | | | | Other | | | | | | | common | | | | | | | test | | | | | | | pa | | | | | | | rameters | | | | | | | are | | | | | | | defined | | | | | | | in | | | | | | | Section | | | | | | | 6.1.2 of | | | | | | | 38.101-4 | | | | | | | for | | | | | | | Tests 1 | | | | | | | and 2 | | | | | | | and | | | | | | | Section | | | | | | | 8.1.2 of | | | | | | | 38.101-4 | | | | | | | for Test | | | | | | | 3. | | | | | | | | | | | | | | Note 2: | | | | | | | PDSCH is | | | | | | | not | | | | | | | s | | | | | | | cheduled | | | | | | | on slots | | | | | | | co | | | | | | | ntaining | | | | | | | CSI-RS | | | | | | | for CSI | | | | | | | acqu | | | | | | | isition, | | | | | | | CSI-RS | | | | | | | for | | | | | | | tracking | | | | | | | and | | | | | | | CSI-RS | | | | | | | for beam | | | | | | | re | | | | | | | finement | | | | | | | (for | | | | | | | Test 3 | | | | | | | only). | | | | | | +----------+----------+----------+----------+----------+----------+
##### A.10.1.1.2.4 Test Description {#a.10.1.1.2.4-test-description .H6}
##### A.10.1.1.2.4.1 Initial Conditions {#a.10.1.1.2.4.1-initial-conditions
.H6}
Initial conditions are a set of test configurations the UE needs to be tested
in and the steps for the SS to take with the UE to reach the correct
measurement state. Apply the Initial conditions defined in TS 38.521-4 [3]
clause 6.4.2.2_1.4.1 with the following additional steps and/or exceptions:
1.1 Connect an application server to the IP output of the SS.
1.2 For an embedded configuration, ensure that the UE has a client test
application available. For a tethered configuration, tether the UE to a laptop
configured with FTP client software using the appropriate UE to PC interface
Modem or Network Interface Connection (NIC) drivers.
2\. In Step 2 skip reference to 38.521-4 [3] Table 6.4.2.2_1.3-1 since test
parameters are already defined for this test.
5\. For NSA case, the E-UTRA anchor is configured as per Annex E. Ensure the
UE is in RRC_CONNECTED State with generic procedure parameters Connectivity NR
for NR/5GC with _Connected without Release_ On, _Test Mode_ Off or EN-DC, DC
bearer MCG and SCG, _Connected without release_ On, _Test Mode_ Off for EN-DC.
Message contents are as per TS 38.521-4 [3] Clause 6.4.2.2_1.4.3 with the
exceptions defined in Annex H.
##### A.10.1.1.2.4.2 Test Procedure {#a.10.1.1.2.4.2-test-procedure .H6}
1\. Set the parameters of bandwidth, reference channel, the propagation
condition, antenna configuration, antenna correlation, Codebook configuration,
Beamforming Model, RI configuration and SNR according to Table A.10.1.1.2.3-1
as appropriate.
2\. SS shall send PDSCH via PDCCH DCI format 1_1 for C_RNTI to transmit the DL
RMC according to the UE reported CQI (wideband CQI), PMI and RI. The SS sends
downlink MAC padding bits on the DL RMC.
3\. SS sends uplink scheduling information for each UL HARQ process via PDCCH
DCI format 0_1 for C_RNTI to schedule the UL RMC over PUSCH according to
parameters set during initial conditions. The purpose of this scheduling is to
accommodate for TCP UL ACK/NACK feedback transmissions.
4\. Using the data client, begin TCP downlink data transfer from the
application server. Wait for 15 seconds and then start recording the TCP
throughput result (This is iteration 1). Continue data transfer for the test
duration outlined in Table A.1-14.
5\. Repeat step 4 for 3 iterations within the same call as the first
iteration. Wait for at least 5 seconds between each iteration of the data
transfer.
6\. Calculate and record the average application layer data throughput across
three iterations. Additionally, count and record the overall number of ACK and
NACK/DTX on the PUSCH/PUCCH during the test interval purely for information
purposes.
7\. Record the IP address type (IPv4 or IPv6) used during the TCP data
transfers.
8\. Using the values for TCP in Table 5.4.4-2 (for IPv6) and Table 5.4.4-3
(for IPv4), determine the reduction from PHY reference fractional throughput
value listed in Table A.10.1.1.2.3-1 to obtain reference Application Layer
Throughput value.
### A.10.1.2 5G NR /TCP Downlink Throughput /Conducted/Fading/FRC/4Rx
#### A.10.1.2.1 5G NR /TCP Downlink Throughput /Conducted/Fading/VRC/4Rx
FDD/FR1 PDSCH mapping Type A performance - for SA and NSA
##### A.10.1.2.1.1 Definition {#a.10.1.2.1.1-definition .H6}
The UE application layer downlink performance for TCP under fading environment
with variable reference channel is determined by the UE application layer TCP
throughput.
##### A.10.1.2.1.2 Test Purpose {#a.10.1.2.1.2-test-purpose .H6}
To measure the performance of the 5G NR UE while downloading TCP based data in
a fading channel environment with variable reference channel under 4 receive
antenna conditions for FR1. The duplex mode is FDD.
##### A.10.1.2.1.3 Test Parameters {#a.10.1.2.1.3-test-parameters .H6}
The test parameters are specified in Table A.10.1.2.1.3-1. Test1 is to be
selected as test point.
Table A.10.1.2.1.3-1: FDD FR1 4Rx Test point
+----------+----------+----------+----------+----------+----------+ | P | Unit | Test 1 | Test 2 | Test 3 | | | arameter | | | | | | +==========+==========+==========+==========+==========+==========+ | F | | FR1 | FR1 | FR2 | | | requency | | | | | | | range | | | | | | +----------+----------+----------+----------+----------+----------+ | B | MHz | 10 | 40 | 100 | | | andwidth | | | | | | +----------+----------+----------+----------+----------+----------+ | Su | kHz | 15 | 30 | 120 | | | bcarrier | | | | | | | spacing | | | | | | +----------+----------+----------+----------+----------+----------+ | Duplex | | FDD | TDD | TDD | | | Mode | | | | | | +----------+----------+----------+----------+----------+----------+ | TDD Slot | | N/A | 7D1S2U | DDSU | | | Confi | | | | | | | guration | | | S: | S:1 | | | | | | 6D+4G+4U | 1D+3G+0U | | +----------+----------+----------+----------+----------+----------+ | SNR | dB | 20 | 20 | 16 | | +----------+----------+----------+----------+----------+----------+ | Pro | | TDLA30-5 | TDLA30-5 | T | | | pagation | | | | DLA30-35 | | | channel | | | | | | +----------+----------+----------+----------+----------+----------+ | Antenna | | ULA Low | ULA Low | ULA Low | | | confi | | 2x4 | 2x4 | 2x2 | | | guration | | | | | | +----------+----------+----------+----------+----------+----------+ | Bea | | As | As | As | | | mforming | | defined | defined | defined | | | Model | | in Annex | in Annex | in Annex | | | | | B.4.1 in | B.4.1 in | B.4.1 in | | | | | TS | TS | TS | | | | | 38.101-4 | 38.101-4 | 38.101-4 | | +----------+----------+----------+----------+----------+----------+ | Receiver | | MMSE-IRC | MMSE-IRC | MMSE-IRC | | | type | | | | | | +----------+----------+----------+----------+----------+----------+ | PDSCH | Mapping | | Type A | Type A | Type A | | confi | type | | | | | | guration | | | | | | +----------+----------+----------+----------+----------+----------+ | | Starting | | 2 | 2 | 2 | | | symbol | | | | | | | (S) | | | | | +----------+----------+----------+----------+----------+----------+ | | Length | | 12 | 12 | 12 | | | (L) | | | | | +----------+----------+----------+----------+----------+----------+ | | PRB | | 2 | 2 | 2 | | | bundling | | | | | | | size | | | | | +----------+----------+----------+----------+----------+----------+ | | PRB | | Static | Static | Static | | | bundling | | | | | | | type | | | | | +----------+----------+----------+----------+----------+----------+ | | VR | | Non-int | Non-int | Non-int | | | B-to-PRB | | erleaved | erleaved | erleaved | | | mapping | | | | | | | int | | | | | | | erleaver | | | | | | | bundle | | | | | | | size | | | | | +----------+----------+----------+----------+----------+----------+ | PDSCH | DMRS | | Type 1 | Type 1 | Type 1 | | DMRS | Type | | | | | | confi | | | | | | | guration | | | | | | +----------+----------+----------+----------+----------+----------+ | | Number | | 1 | 1 | 1 | | | of | | | | | | | ad | | | | | | | ditional | | | | | | | DMRS | | | | | +----------+----------+----------+----------+----------+----------+ | | Maximum | | 1 | 1 | 1 | | | number | | | | | | | of OFDM | | | | | | | symbols | | | | | | | for DL | | | | | | | front | | | | | | | loaded | | | | | | | DMRS | | | | | +----------+----------+----------+----------+----------+----------+ | CSI | | As | As | As | | | mea | | s | s | s | | | surement | | pecified | pecified | pecified | | | channels | | in Table | in Table | in Table | | | (Note 2) | | A.4-2 of | A.4-2 of | A.4-1 of | | | | | TS | TS | TS | | | | | 3 | 3 | 3 | | | | | 8.101-4: | 8.101-4: | 8.101-4: | | | | | | | | | | | | Rank 1: | Rank 1: | Rank 1: | | | | | TBS.2-1 | TBS.2-3 | TBS.1-1 | | | | | | | | | | | | Rank 2: | Rank 2: | Rank 2: | | | | | TBS.2-2 | TBS.2-4 | TBS.1-2 | | +----------+----------+----------+----------+----------+----------+ | ZP | CSI-RS | | Periodic | Periodic | Periodic | | CSI-RS | resource | | | | | | confi | Type | | | | | | guration | | | | | | +----------+----------+----------+----------+----------+----------+ | | Number | | 4 | 4 | 4 | | | of | | | | | | | CSI-RS | | | | | | | ports | | | | | | | (_X_) | | | | | +----------+----------+----------+----------+----------+----------+ | | CDM Type | | FD-CDM2 | FD-CDM2 | FD-CDM2 | +----------+----------+----------+----------+----------+----------+ | | Density | | 1 | 1 | 1 | | | (ρ) | | | | | +----------+----------+----------+----------+----------+----------+ | | First | | Row 5, | Row 5, | Row 5, | | | su | | (4) | (4) | (8) | | | bcarrier | | | | | | | index in | | | | | | | the PRB | | | | | | | used for | | | | | | | CSI-RS | | | | | | | (k~0~) | | | | | +----------+----------+----------+----------+----------+----------+ | | First | | 9 | 9 | 13 | | | OFDM | | | | | | | symbol | | | | | | | in the | | | | | | | PRB used | | | | | | | for | | | | | | | CSI-RS | | | | | | | (l~0~) | | | | | +----------+----------+----------+----------+----------+----------+ | | CSI-RS | slot | 5/1 | 10/1 | 8/1 | | | | | | | | | | per | | | | | | | iodicity | | | | | | | and | | | | | | | offset | | | | | +----------+----------+----------+----------+----------+----------+ | NZP | CSI-RS | | Periodic | Periodic | A | | CSI-RS | resource | | | | periodic | | for CSI | Type | | | | | | acq | | | | | | | uisition | | | | | | +----------+----------+----------+----------+----------+----------+ | | Number | | 2 | 2 | 2 | | | of | | | | | | | CSI-RS | | | | | | | ports | | | | | | | (_X_) | | | | | +----------+----------+----------+----------+----------+----------+ | | CDM Type | | FD-CDM2 | FD-CDM2 | FD-CDM2 | +----------+----------+----------+----------+----------+----------+ | | Density | | 1 | 1 | 1 | | | (ρ) | | | | | +----------+----------+----------+----------+----------+----------+ | | First | | Row 3 | Row 3 | Row 3 | | | su | | (6) | (6) | (6) | | | bcarrier | | | | | | | index in | | | | | | | the PRB | | | | | | | used for | | | | | | | CSI-RS | | | | | | | (k~0~) | | | | | +----------+----------+----------+----------+----------+----------+ | | First | | 13 | 13 | 13 | | | OFDM | | | | | | | symbol | | | | | | | in the | | | | | | | PRB used | | | | | | | for | | | | | | | CSI-RS | | | | | | | (l~0~) | | | | | +----------+----------+----------+----------+----------+----------+ | | NZP | slot | 5/1 | 10/1 | Not | | | C | | | | co | | | SI-RS-ti | | | | nfigured | | | meConfig | | | | | | | | | | | | | | per | | | | | | | iodicity | | | | | | | and | | | | | | | offset | | | | | +----------+----------+----------+----------+----------+----------+ | CSI-IM | CSI-IM | | Periodic | Periodic | Periodic | | confi | resource | | | | | | guration | Type | | | | | +----------+----------+----------+----------+----------+----------+ | | CSI-IM | | Pattern | Pattern | Pattern | | | RE | | 0 | 0 | 1 | | | pattern | | | | | +----------+----------+----------+----------+----------+----------+ | | CSI-IM | | (4,9) | (4,9) | (8,13) | | | Resource | | | | | | | Mapping | | | | | | | | | | | | | | (k~CS | | | | | | | I-IM~,l~ | | | | | | | CSI-IM~) | | | | | +----------+----------+----------+----------+----------+----------+ | | CSI-IM | slot | 5/1 | 10/1 | Not | | | ti | | | | co | | | meConfig | | | | nfigured | | | | | | | | | | per | | | | | | | iodicity | | | | | | | and | | | | | | | offset | | | | | +----------+----------+----------+----------+----------+----------+ | ReportCo | | A | A | A | | | nfigType | | periodic | periodic | periodic | | +----------+----------+----------+----------+----------+----------+ | C | | Table 2 | Table 2 | Table 2 | | | QI-table | | | | | | +----------+----------+----------+----------+----------+----------+ | report | | cri-RI | cri-RI | cri-RI | | | Quantity | | -PMI-CQI | -PMI-CQI | -PMI-CQI | | +----------+----------+----------+----------+----------+----------+ | timeR | | not | not | not | | | estricti | | co | co | co | | | onForCha | | nfigured | nfigured | nfigured | | | nnelMeas | | | | | | | urements | | | | | | +----------+----------+----------+----------+----------+----------+ | ti | | not | not | not | | | meRestri | | co | co | co | | | ctionFor | | nfigured | nfigured | nfigured | | | Interfer | | | | | | | enceMeas | | | | | | | urements | | | | | | +----------+----------+----------+----------+----------+----------+ | cqi | | Wideband | Wideband | Wideband | | | -FormatI | | | | | | | ndicator | | | | | | +----------+----------+----------+----------+----------+----------+ | pmi | | Wideband | Wideband | Wideband | | | -FormatI | | | | | | | ndicator | | | | | | +----------+----------+----------+----------+----------+----------+ | Sub-band | RB | 8 | 16 | 8 | | | Size | | | | | | +----------+----------+----------+----------+----------+----------+ | c | | 1111111 | 1111111 | 1 | | | si-Repor | | | | 11111111 | | | tingBand | | | | | | +----------+----------+----------+----------+----------+----------+ | CS | slot | Not | Not | Not | | | I-Report | | co | co | co | | | per | | nfigured | nfigured | nfigured | | | iodicity | | | | | | | and | | | | | | | offset | | | | | | +----------+----------+----------+----------+----------+----------+ | A | | 5 | 9 | 7 | | | periodic | | | | | | | Report | | | | | | | Slot | | | | | | | Offset | | | | | | +----------+----------+----------+----------+----------+----------+ | CSI | | 1 in | 1 in | 1 in | | | request | | slots i, | slots i, | slots i, | | | | | where | where | where | | | | | mod(i, | mod(i, | mod(i, | | | | | 5) = 0, | 10) = 0, | 8) = 1, | | | | | o | o | o | | | | | therwise | therwise | therwise | | | | | it is | it is | it is | | | | | equal to | equal to | equal to | | | | | 0 | 0 | 0 | | +----------+----------+----------+----------+----------+----------+ | r | | 1 | 1 | 1 | | | eportTri | | | | | | | ggerSize | | | | | | +----------+----------+----------+----------+----------+----------+ | CSI-A | | One | One | One | | | periodic | | State | State | State | | | TriggerS | | with one | with one | with one | | | tateList | | As | As | As | | | | | sociated | sociated | sociated | | | | | Report | Report | Report | | | | | Confi | Confi | Confi | | | | | guration | guration | guration | | | | | | | | | | | | As | As | As | | | | | sociated | sociated | sociated | | | | | Report | Report | Report | | | | | Confi | Confi | Confi | | | | | guration | guration | guration | | | | | contains | contains | contains | | | | | pointers | pointers | pointers | | | | | to NZP | to NZP | to NZP | | | | | CSI-RS | CSI-RS | CSI-RS | | | | | and | and | and | | | | | CSI-IM | CSI-IM | CSI-IM | | +----------+----------+----------+----------+----------+----------+ | Codebook | Codebook | | t | t | t | | confi | Type | | ypeI-Sin | ypeI-Sin | ypeI-Sin | | guration | | | glePanel | glePanel | glePanel | +----------+----------+----------+----------+----------+----------+ | | Codebook | | 1 | 1 | 1 | | | Mode | | | | | +----------+----------+----------+----------+----------+----------+ | | (Code | | N/A | N/A | N/A | | | bookConf | | | | | | | ig-N1,Co | | | | | | | debookCo | | | | | | | nfig-N2) | | | | | +----------+----------+----------+----------+----------+----------+ | | C | | Not | Not | Not | | | odebookS | | co | co | co | | | ubsetRes | | nfigured | nfigured | nfigured | | | triction | | | | | +----------+----------+----------+----------+----------+----------+ | | RI | | N/A | N/A | N/A | | | Res | | | | | | | triction | | | | | +----------+----------+----------+----------+----------+----------+ | Physical | | PUSCH | PUSCH | PUSCH | | | channel | | | | | | | for CSI | | | | | | | report | | | | | | +----------+----------+----------+----------+----------+----------+ | CQ | ms | 6 | 5.5 | 1.375 | | | I/RI/PMI | | | | | | | delay | | | | | | +----------+----------+----------+----------+----------+----------+ | Maximum | | 1 | 1 | 1 | | | number | | | | | | | of HARQ | | | | | | | tran | | | | | | | smission | | | | | | +----------+----------+----------+----------+----------+----------+ | Test | | [T]% | | | | | metric | | of max | | | | | | | th | | | | | | | roughput | | | | | | | at | | | | | | | target | | | | | | | SNR. | | | | +----------+----------+----------+----------+----------+----------+ | Note 1: | | | | | | | Other | | | | | | | common | | | | | | | test | | | | | | | pa | | | | | | | rameters | | | | | | | are | | | | | | | defined | | | | | | | in | | | | | | | Section | | | | | | | 6.1.2 of | | | | | | | 38.101-4 | | | | | | | for | | | | | | | Tests 1 | | | | | | | and 2 | | | | | | | and | | | | | | | Section | | | | | | | 8.1.2 of | | | | | | | 38.101-4 | | | | | | | for Test | | | | | | | 3. | | | | | | | | | | | | | | Note 2: | | | | | | | PDSCH is | | | | | | | not | | | | | | | s | | | | | | | cheduled | | | | | | | on slots | | | | | | | co | | | | | | | ntaining | | | | | | | CSI-RS | | | | | | | for CSI | | | | | | | acqu | | | | | | | isition, | | | | | | | CSI-RS | | | | | | | for | | | | | | | tracking | | | | | | | and | | | | | | | CSI-RS | | | | | | | for beam | | | | | | | re | | | | | | | finement | | | | | | | (for | | | | | | | Test 3 | | | | | | | only). | | | | | | +----------+----------+----------+----------+----------+----------+
##### A.10.1.2.1.4 Test Description {#a.10.1.2.1.4-test-description .H6}
##### A.10.1.2.1.4.1 Initial Conditions {#a.10.1.2.1.4.1-initial-conditions
.H6}
Initial conditions are a set of test configurations the UE needs to be tested
in and the steps for the SS to take with the UE to reach the correct
measurement state. Apply the Initial conditions defined in TS 38.521-4 [3]
clause 6.4.3.1_1.4.1 with the following additional steps and/or exceptions:
1.1 Connect an application server to the IP output of the SS.
1.2 For an embedded configuration, ensure that the UE has a client test
application available. For a tethered configuration, tether the UE to a laptop
configured with FTP client software using the appropriate UE to PC interface
Modem or Network Interface Connection (NIC) drivers.
2\. In Step 2 skip reference to 38.521-4 [3] Table 6.4.3.1_1.3-1 since test
parameters are already defined for this test.
5\. For NSA case, the E-UTRA anchor is configured as per Annex E. Ensure the
UE is in RRC_CONNECTED State with generic procedure parameters Connectivity NR
for NR/5GC with _Connected without Release_ On, _Test Mode_ Off or EN-DC, DC
bearer MCG and SCG, _Connected without release_ On, _Test Mode_ Off for EN-DC.
Message contents are as per TS 38.521-4 [3] Clause 6.4.3.1_1.4.3 with the
exceptions defined in Annex H.
##### A.10.1.2.1.4.2 Test Procedure {#a.10.1.2.1.4.2-test-procedure .H6}
1\. Set the parameters of bandwidth, reference channel, the propagation
condition, antenna configuration, antenna correlation, Codebook configuration,
Beamforming Model, RI configuration and SNR according to Table A.10.1.2.1.3-1
as appropriate.
2\. SS shall send PDSCH via PDCCH DCI format 1_1 for C_RNTI to transmit the DL
RMC according to the UE reported CQI (wideband CQI), PMI and RI. The SS sends
downlink MAC padding bits on the DL RMC.
3\. SS sends uplink scheduling information for each UL HARQ process via PDCCH
DCI format 0_1 for C_RNTI to schedule the UL RMC over PUSCH according to
parameters set during initial conditions. The purpose of this scheduling is to
accommodate for TCP UL ACK/NACK feedback transmissions.
4\. Using the data client, begin TCP downlink data transfer from the
application server. Wait for 15 seconds and then start recording the TCP
throughput result (This is iteration 1). Continue data transfer for the test
duration outlined in Table A.1-14.
5\. Repeat step 4 for 3 iterations within the same call as the first
iteration. Wait for at least 5 seconds between each iteration of the data
transfer.
6\. Calculate and record the average application layer data throughput across
three iterations. Additionally, count and record the overall number of ACK and
NACK/DTX on the PUSCH/PUCCH during the test interval purely for information
purposes.
7\. Record the IP address type (IPv4 or IPv6) used during the TCP data
transfers.
8\. Using the values for TCP in Table 5.4.4-2 (for IPv6) and Table 5.4.4-3
(for IPv4), determine the reduction from PHY reference fractional throughput
value listed in Table A.10.1.2.1.3-1 to obtain reference Application Layer
Throughput value.
#### A.10.1.2.2 5G NR /TCP Downlink Throughput /Conducted/Fading/VRC/4Rx
TDD/FR1 PDSCH mapping Type A performance - for SA and NSA
##### A.10.1.2.2.1 Definition {#a.10.1.2.2.1-definition .H6}
The UE application layer downlink performance for TCP under fading environment
with variable reference channel is determined by the UE application layer TCP
throughput.
##### A.10.1.2.2.2 Test Purpose {#a.10.1.2.2.2-test-purpose .H6}
To measure the performance of the 5G NR UE while downloading TCP based data in
a fading channel environment with variable reference channel under 4 receive
antenna conditions for FR1. The duplex mode is TDD.
##### A.10.1.2.2.3 Test Parameters {#a.10.1.2.2.3-test-parameters .H6}
The test parameters are specified in Table A.10.1.2.2.3-1. Test2 is to be
selected as test point.
Table A.10.1.2.2.3-1: TDD FR1 4Rx Test point
+----------+----------+----------+----------+----------+----------+ | P | Unit | Test 1 | Test 2 | Test 3 | | | arameter | | | | | | +==========+==========+==========+==========+==========+==========+ | F | | FR1 | FR1 | FR2 | | | requency | | | | | | | range | | | | | | +----------+----------+----------+----------+----------+----------+ | B | MHz | 10 | 40 | 100 | | | andwidth | | | | | | +----------+----------+----------+----------+----------+----------+ | Su | kHz | 15 | 30 | 120 | | | bcarrier | | | | | | | spacing | | | | | | +----------+----------+----------+----------+----------+----------+ | Duplex | | FDD | TDD | TDD | | | Mode | | | | | | +----------+----------+----------+----------+----------+----------+ | TDD Slot | | N/A | 7D1S2U | DDSU | | | Confi | | | | | | | guration | | | S: | S:1 | | | | | | 6D+4G+4U | 1D+3G+0U | | +----------+----------+----------+----------+----------+----------+ | SNR | dB | 20 | 20 | 16 | | +----------+----------+----------+----------+----------+----------+ | Pro | | TDLA30-5 | TDLA30-5 | T | | | pagation | | | | DLA30-35 | | | channel | | | | | | +----------+----------+----------+----------+----------+----------+ | Antenna | | ULA Low | ULA Low | ULA Low | | | confi | | 2x4 | 2x4 | 2x2 | | | guration | | | | | | +----------+----------+----------+----------+----------+----------+ | Bea | | As | As | As | | | mforming | | defined | defined | defined | | | Model | | in Annex | in Annex | in Annex | | | | | B.4.1 in | B.4.1 in | B.4.1 in | | | | | TS | TS | TS | | | | | 38.101-4 | 38.101-4 | 38.101-4 | | +----------+----------+----------+----------+----------+----------+ | Receiver | | MMSE-IRC | MMSE-IRC | MMSE-IRC | | | type | | | | | | +----------+----------+----------+----------+----------+----------+ | PDSCH | Mapping | | Type A | Type A | Type A | | confi | type | | | | | | guration | | | | | | +----------+----------+----------+----------+----------+----------+ | | Starting | | 2 | 2 | 2 | | | symbol | | | | | | | (S) | | | | | +----------+----------+----------+----------+----------+----------+ | | Length | | 12 | 12 | 12 | | | (L) | | | | | +----------+----------+----------+----------+----------+----------+ | | PRB | | 2 | 2 | 2 | | | bundling | | | | | | | size | | | | | +----------+----------+----------+----------+----------+----------+ | | PRB | | Static | Static | Static | | | bundling | | | | | | | type | | | | | +----------+----------+----------+----------+----------+----------+ | | VR | | Non-int | Non-int | Non-int | | | B-to-PRB | | erleaved | erleaved | erleaved | | | mapping | | | | | | | int | | | | | | | erleaver | | | | | | | bundle | | | | | | | size | | | | | +----------+----------+----------+----------+----------+----------+ | PDSCH | DMRS | | Type 1 | Type 1 | Type 1 | | DMRS | Type | | | | | | confi | | | | | | | guration | | | | | | +----------+----------+----------+----------+----------+----------+ | | Number | | 1 | 1 | 1 | | | of | | | | | | | ad | | | | | | | ditional | | | | | | | DMRS | | | | | +----------+----------+----------+----------+----------+----------+ | | Maximum | | 1 | 1 | 1 | | | number | | | | | | | of OFDM | | | | | | | symbols | | | | | | | for DL | | | | | | | front | | | | | | | loaded | | | | | | | DMRS | | | | | +----------+----------+----------+----------+----------+----------+ | CSI | | As | As | As | | | mea | | s | s | s | | | surement | | pecified | pecified | pecified | | | channels | | in Table | in Table | in Table | | | (Note 2) | | A.4-2 of | A.4-2 of | A.4-1 of | | | | | TS | TS | TS | | | | | 3 | 3 | 3 | | | | | 8.101-4: | 8.101-4: | 8.101-4: | | | | | | | | | | | | Rank 1: | Rank 1: | Rank 1: | | | | | TBS.2-1 | TBS.2-3 | TBS.1-1 | | | | | | | | | | | | Rank 2: | Rank 2: | Rank 2: | | | | | TBS.2-2 | TBS.2-4 | TBS.1-2 | | +----------+----------+----------+----------+----------+----------+ | ZP | CSI-RS | | Periodic | Periodic | Periodic | | CSI-RS | resource | | | | | | confi | Type | | | | | | guration | | | | | | +----------+----------+----------+----------+----------+----------+ | | Number | | 4 | 4 | 4 | | | of | | | | | | | CSI-RS | | | | | | | ports | | | | | | | (_X_) | | | | | +----------+----------+----------+----------+----------+----------+ | | CDM Type | | FD-CDM2 | FD-CDM2 | FD-CDM2 | +----------+----------+----------+----------+----------+----------+ | | Density | | 1 | 1 | 1 | | | (ρ) | | | | | +----------+----------+----------+----------+----------+----------+ | | First | | Row 5, | Row 5, | Row 5, | | | su | | (4) | (4) | (8) | | | bcarrier | | | | | | | index in | | | | | | | the PRB | | | | | | | used for | | | | | | | CSI-RS | | | | | | | (k~0~) | | | | | +----------+----------+----------+----------+----------+----------+ | | First | | 9 | 9 | 13 | | | OFDM | | | | | | | symbol | | | | | | | in the | | | | | | | PRB used | | | | | | | for | | | | | | | CSI-RS | | | | | | | (l~0~) | | | | | +----------+----------+----------+----------+----------+----------+ | | CSI-RS | slot | 5/1 | 10/1 | 8/1 | | | | | | | | | | per | | | | | | | iodicity | | | | | | | and | | | | | | | offset | | | | | +----------+----------+----------+----------+----------+----------+ | NZP | CSI-RS | | Periodic | Periodic | A | | CSI-RS | resource | | | | periodic | | for CSI | Type | | | | | | acq | | | | | | | uisition | | | | | | +----------+----------+----------+----------+----------+----------+ | | Number | | 2 | 2 | 2 | | | of | | | | | | | CSI-RS | | | | | | | ports | | | | | | | (_X_) | | | | | +----------+----------+----------+----------+----------+----------+ | | CDM Type | | FD-CDM2 | FD-CDM2 | FD-CDM2 | +----------+----------+----------+----------+----------+----------+ | | Density | | 1 | 1 | 1 | | | (ρ) | | | | | +----------+----------+----------+----------+----------+----------+ | | First | | Row 3 | Row 3 | Row 3 | | | su | | (6) | (6) | (6) | | | bcarrier | | | | | | | index in | | | | | | | the PRB | | | | | | | used for | | | | | | | CSI-RS | | | | | | | (k~0~) | | | | | +----------+----------+----------+----------+----------+----------+ | | First | | 13 | 13 | 13 | | | OFDM | | | | | | | symbol | | | | | | | in the | | | | | | | PRB used | | | | | | | for | | | | | | | CSI-RS | | | | | | | (l~0~) | | | | | +----------+----------+----------+----------+----------+----------+ | | NZP | slot | 5/1 | 10/1 | Not | | | C | | | | co | | | SI-RS-ti | | | | nfigured | | | meConfig | | | | | | | | | | | | | | per | | | | | | | iodicity | | | | | | | and | | | | | | | offset | | | | | +----------+----------+----------+----------+----------+----------+ | CSI-IM | CSI-IM | | Periodic | Periodic | Periodic | | confi | resource | | | | | | guration | Type | | | | | +----------+----------+----------+----------+----------+----------+ | | CSI-IM | | Pattern | Pattern | Pattern | | | RE | | 0 | 0 | 1 | | | pattern | | | | | +----------+----------+----------+----------+----------+----------+ | | CSI-IM | | (4,9) | (4,9) | (8,13) | | | Resource | | | | | | | Mapping | | | | | | | | | | | | | | (k~CS | | | | | | | I-IM~,l~ | | | | | | | CSI-IM~) | | | | | +----------+----------+----------+----------+----------+----------+ | | CSI-IM | slot | 5/1 | 10/1 | Not | | | ti | | | | co | | | meConfig | | | | nfigured | | | | | | | | | | per | | | | | | | iodicity | | | | | | | and | | | | | | | offset | | | | | +----------+----------+----------+----------+----------+----------+ | ReportCo | | A | A | A | | | nfigType | | periodic | periodic | periodic | | +----------+----------+----------+----------+----------+----------+ | C | | Table 2 | Table 2 | Table 2 | | | QI-table | | | | | | +----------+----------+----------+----------+----------+----------+ | report | | cri-RI | cri-RI | cri-RI | | | Quantity | | -PMI-CQI | -PMI-CQI | -PMI-CQI | | +----------+----------+----------+----------+----------+----------+ | timeR | | not | not | not | | | estricti | | co | co | co | | | onForCha | | nfigured | nfigured | nfigured | | | nnelMeas | | | | | | | urements | | | | | | +----------+----------+----------+----------+----------+----------+ | ti | | not | not | not | | | meRestri | | co | co | co | | | ctionFor | | nfigured | nfigured | nfigured | | | Interfer | | | | | | | enceMeas | | | | | | | urements | | | | | | +----------+----------+----------+----------+----------+----------+ | cqi | | Wideband | Wideband | Wideband | | | -FormatI | | | | | | | ndicator | | | | | | +----------+----------+----------+----------+----------+----------+ | pmi | | Wideband | Wideband | Wideband | | | -FormatI | | | | | | | ndicator | | | | | | +----------+----------+----------+----------+----------+----------+ | Sub-band | RB | 8 | 16 | 8 | | | Size | | | | | | +----------+----------+----------+----------+----------+----------+ | c | | 1111111 | 1111111 | 1 | | | si-Repor | | | | 11111111 | | | tingBand | | | | | | +----------+----------+----------+----------+----------+----------+ | CS | slot | Not | Not | Not | | | I-Report | | co | co | co | | | per | | nfigured | nfigured | nfigured | | | iodicity | | | | | | | and | | | | | | | offset | | | | | | +----------+----------+----------+----------+----------+----------+ | A | | 5 | 9 | 7 | | | periodic | | | | | | | Report | | | | | | | Slot | | | | | | | Offset | | | | | | +----------+----------+----------+----------+----------+----------+ | CSI | | 1 in | 1 in | 1 in | | | request | | slots i, | slots i, | slots i, | | | | | where | where | where | | | | | mod(i, | mod(i, | mod(i, | | | | | 5) = 0, | 10) = 0, | 8) = 1, | | | | | o | o | o | | | | | therwise | therwise | therwise | | | | | it is | it is | it is | | | | | equal to | equal to | equal to | | | | | 0 | 0 | 0 | | +----------+----------+----------+----------+----------+----------+ | r | | 1 | 1 | 1 | | | eportTri | | | | | | | ggerSize | | | | | | +----------+----------+----------+----------+----------+----------+ | CSI-A | | One | One | One | | | periodic | | State | State | State | | | TriggerS | | with one | with one | with one | | | tateList | | As | As | As | | | | | sociated | sociated | sociated | | | | | Report | Report | Report | | | | | Confi | Confi | Confi | | | | | guration | guration | guration | | | | | | | | | | | | As | As | As | | | | | sociated | sociated | sociated | | | | | Report | Report | Report | | | | | Confi | Confi | Confi | | | | | guration | guration | guration | | | | | contains | contains | contains | | | | | pointers | pointers | pointers | | | | | to NZP | to NZP | to NZP | | | | | CSI-RS | CSI-RS | CSI-RS | | | | | and | and | and | | | | | CSI-IM | CSI-IM | CSI-IM | | +----------+----------+----------+----------+----------+----------+ | Codebook | Codebook | | t | t | t | | confi | Type | | ypeI-Sin | ypeI-Sin | ypeI-Sin | | guration | | | glePanel | glePanel | glePanel | +----------+----------+----------+----------+----------+----------+ | | Codebook | | 1 | 1 | 1 | | | Mode | | | | | +----------+----------+----------+----------+----------+----------+ | | (Code | | N/A | N/A | N/A | | | bookConf | | | | | | | ig-N1,Co | | | | | | | debookCo | | | | | | | nfig-N2) | | | | | +----------+----------+----------+----------+----------+----------+ | | C | | Not | Not | Not | | | odebookS | | co | co | co | | | ubsetRes | | nfigured | nfigured | nfigured | | | triction | | | | | +----------+----------+----------+----------+----------+----------+ | | RI | | N/A | N/A | N/A | | | Res | | | | | | | triction | | | | | +----------+----------+----------+----------+----------+----------+ | Physical | | PUSCH | PUSCH | PUSCH | | | channel | | | | | | | for CSI | | | | | | | report | | | | | | +----------+----------+----------+----------+----------+----------+ | CQ | ms | 6 | 5.5 | 1.375 | | | I/RI/PMI | | | | | | | delay | | | | | | +----------+----------+----------+----------+----------+----------+ | Maximum | | 1 | 1 | 1 | | | number | | | | | | | of HARQ | | | | | | | tran | | | | | | | smission | | | | | | +----------+----------+----------+----------+----------+----------+ | Test | | [T]% | | | | | metric | | of max | | | | | | | th | | | | | | | roughput | | | | | | | at | | | | | | | target | | | | | | | SNR. | | | | +----------+----------+----------+----------+----------+----------+ | Note 1: | | | | | | | Other | | | | | | | common | | | | | | | test | | | | | | | pa | | | | | | | rameters | | | | | | | are | | | | | | | defined | | | | | | | in | | | | | | | Section | | | | | | | 6.1.2 of | | | | | | | 38.101-4 | | | | | | | for | | | | | | | Tests 1 | | | | | | | and 2 | | | | | | | and | | | | | | | Section | | | | | | | 8.1.2 of | | | | | | | 38.101-4 | | | | | | | for Test | | | | | | | 3. | | | | | | | | | | | | | | Note 2: | | | | | | | PDSCH is | | | | | | | not | | | | | | | s | | | | | | | cheduled | | | | | | | on slots | | | | | | | co | | | | | | | ntaining | | | | | | | CSI-RS | | | | | | | for CSI | | | | | | | acqu | | | | | | | isition, | | | | | | | CSI-RS | | | | | | | for | | | | | | | tracking | | | | | | | and | | | | | | | CSI-RS | | | | | | | for beam | | | | | | | re | | | | | | | finement | | | | | | | (for | | | | | | | Test 3 | | | | | | | only). | | | | | | +----------+----------+----------+----------+----------+----------+
##### A.10.1.2.2.4 Test Description {#a.10.1.2.2.4-test-description .H6}
##### A.10.1.2.2.4.1 Initial Conditions {#a.10.1.2.2.4.1-initial-conditions
.H6}
Initial conditions are a set of test configurations the UE needs to be tested
in and the steps for the SS to take with the UE to reach the correct
measurement state. Apply the Initial conditions defined in TS 38.521-4 [3]
clause 6.4.3.2_1.4.1 with the following additional steps and/or exceptions:
1.1 Connect an application server to the IP output of the SS.
1.2 For an embedded configuration, ensure that the UE has a client test
application available. For a tethered configuration, tether the UE to a laptop
configured with FTP client software using the appropriate UE to PC interface
Modem or Network Interface Connection (NIC) drivers.
2\. In Step 2 skip reference to 38.521-4 [3] Table 6.4.3.2_1.3-1 since test
parameters are already defined for this test.
5\. For NSA case, the E-UTRA anchor is configured as per Annex E. Ensure the
UE is in RRC_CONNECTED State with generic procedure parameters Connectivity NR
for NR/5GC with _Connected without Release_ On, _Test Mode_ Off or EN-DC, DC
bearer MCG and SCG, _Connected without release_ On, _Test Mode_ Off for EN-DC.
Message contents are as per TS 38.521-4 [3] Clause 6.4.3.2_1.4.3 with the
exceptions defined in Annex H.
##### A.10.1.2.2.4.2 Test Procedure {#a.10.1.2.2.4.2-test-procedure .H6}
1\. Set the parameters of bandwidth, reference channel, the propagation
condition, antenna configuration, antenna correlation, Codebook configuration,
Beamforming Model, RI configuration and SNR according to Table A.10.1.2.2.3-1
as appropriate.
2\. SS shall send PDSCH via PDCCH DCI format 1_1 for C_RNTI to transmit the DL
RMC according to the UE reported CQI (wideband CQI), PMI and RI. The SS sends
downlink MAC padding bits on the DL RMC.
3\. SS sends uplink scheduling information for each UL HARQ process via PDCCH
DCI format 0_1 for C_RNTI to schedule the UL RMC over PUSCH according to
parameters set during initial conditions. The purpose of this scheduling is to
accommodate for TCP UL ACK/NACK feedback transmissions.
4\. Using the data client, begin TCP downlink data transfer from the
application server. Wait for 15 seconds and then start recording the TCP
throughput result (This is iteration 1). Continue data transfer for the test
duration outlined in Table A.1-14.
5\. Repeat step 4 for 3 iterations within the same call as the first
iteration. Wait for at least 5 seconds between each iteration of the data
transfer.
6\. Calculate and record the average application layer data throughput across
three iterations. Additionally, count and record the overall number of ACK and
NACK/DTX on the PUSCH/PUCCH during the test interval purely for information
purposes.
7\. Record the IP address type (IPv4 or IPv6) used during the TCP data
transfers.
8\. Using the values for TCP in Table 5.4.4-2 (for IPv6) and Table 5.4.4-3
(for IPv4), determine the reduction from PHY reference fractional throughput
value listed in Table A.10.1.2.2.3-1 to obtain reference Application Layer
Throughput value.
# A.11 5G NR /UDP Downlink Throughput /Conducted for Variable Reference
Channel (VRC) Scenarios for SA and NSA
## A.11.1 5G NR /UDP Downlink Throughput /Conducted/Fading/VRC
### A.11.1.1 5G NR /UDP Downlink Throughput /Conducted/Fading/VRC/2Rx
#### A.11.1.1.1 5G NR /UDP Downlink Throughput /Conducted/Fading/VRC/2Rx
FDD/FR1 PDSCH mapping Type A performance - for SA and NSA
##### A.11.1.1.1.1 Definition {#a.11.1.1.1.1-definition .H6}
The UE application layer downlink performance for UDP under fading environment
with variable reference channel is determined by the UE application layer UDP
throughput.
##### A.11.1.1.1.2 Test Purpose {#a.11.1.1.1.2-test-purpose .H6}
To measure the performance of the 5G NR UE while downloading UDP based data in
a fading channel environment with variable reference channel under 2 receive
antenna conditions for FR1. The duplex mode is FDD.
##### A.11.1.1.1.3 Test Parameters {#a.11.1.1.1.3-test-parameters .H6}
Same test parameters as in clause A.10.1.1.1.3
##### A.11.1.1.1.4 Test Description {#a.11.1.1.1.4-test-description .H6}
##### A.11.1.1.1.4.1 Initial Conditions {#a.11.1.1.1.4.1-initial-conditions
.H6}
Same initial conditions as in clause A.10.1.1.1.4.1.
##### A.11.1.1.1.4.2 Test Procedure {#a.11.1.1.1.4.2-test-procedure .H6}
1\. Set the parameters of bandwidth, reference channel, the propagation
condition, antenna configuration, antenna correlation, Codebook configuration,
Beamforming Model, RI configuration and SNR according to Table A.10.1.1.1.3-1
as appropriate.
2\. SS shall send PDSCH via PDCCH DCI format 1_1 for C_RNTI to transmit the DL
RMC according to the UE reported CQI (wideband CQI), PMI and RI. The SS sends
downlink MAC padding bits on the DL RMC.
3\. Using the data client, begin UDP downlink data transfer from the
application server. Wait for 15 seconds and then start recording the UDP
throughput result (This is iteration 1). Continue data transfer for the test
duration outlined in Table A.1-14.
4\. Repeat step 3 for 3 iterations within the same call as the first
iteration. Wait for at least 5 seconds between each iteration of the data
transfer.
5\. Calculate and record the average application layer data throughput across
three iterations. Additionally, count and record the overall number of ACK and
NACK/DTX on the PUSCH/PUCCH during the test interval purely for information
purposes.
6\. Record the IP address type (IPv4 or IPv6) used during the UDP data
transfers.
7\. Using the values for UDP in Table 5.4.4-2 (for IPv6) and Table 5.4.4-3
(for IPv4), determine the reduction from PHY reference fractional throughput
value listed in Table A.10.1.1.1.3-1 to obtain reference Application Layer
Throughput value.
#### A.11.1.1.2 5G NR /UDP Downlink Throughput /Conducted/Fading/VRC/2Rx
TDD/FR1 PDSCH mapping Type A performance - for SA and NSA
##### A.11.1.1.2.1 Definition {#a.11.1.1.2.1-definition .H6}
The UE application layer downlink performance for UDP under fading environment
with variable reference channel is determined by the UE application layer UDP
throughput.
##### A.11.1.1.2.2 Test Purpose {#a.11.1.1.2.2-test-purpose .H6}
To measure the performance of the 5G NR UE while downloading UDP based data in
a fading channel environment with variable reference channel under 2 receive
antenna conditions for FR1. The duplex mode is TDD.
##### A.11.1.1.2.3 Test Parameters {#a.11.1.1.2.3-test-parameters .H6}
Same test parameters as in clause A.10.1.1.2.3
##### A.11.1.1.2.4 Test Description {#a.11.1.1.2.4-test-description .H6}
##### A.11.1.1.2.4.1 Initial Conditions {#a.11.1.1.2.4.1-initial-conditions
.H6}
Same initial conditions as in clause A.10.1.1.2.4.1.
##### A.11.1.1.2.4.2 Test Procedure {#a.11.1.1.2.4.2-test-procedure .H6}
1\. Set the parameters of bandwidth, reference channel, the propagation
condition, antenna configuration, antenna correlation, Codebook configuration,
Beamforming Model, RI configuration and SNR according to Table A.10.1.1.2.3-1
as appropriate.
2\. SS shall send PDSCH via PDCCH DCI format 1_1 for C_RNTI to transmit the DL
RMC according to the UE reported CQI (wideband CQI), PMI and RI. The SS sends
downlink MAC padding bits on the DL RMC.
3\. Using the data client, begin UDP downlink data transfer from the
application server. Wait for 15 seconds and then start recording the UDP
throughput result (This is iteration 1). Continue data transfer for the test
duration outlined in Table A.1-14.
4\. Repeat step 3 for 3 iterations within the same call as the first
iteration. Wait for at least 5 seconds between each iteration of the data
transfer.
5\. Calculate and record the average application layer data throughput across
three iterations. Additionally, count and record the overall number of ACK and
NACK/DTX on the PUSCH/PUCCH during the test interval purely for information
purposes.
6\. Record the IP address type (IPv4 or IPv6) used during the UDP data
transfers.
7\. Using the values for UDP in Table 5.4.4-2 (for IPv6) and Table 5.4.4-3
(for IPv4), determine the reduction from PHY reference fractional throughput
value listed in Table A.10.1.1.2.3-1 to obtain reference Application Layer
Throughput value.
### A.11.1.2 5G NR /UDP Downlink Throughput /Conducted/Fading/VRC/4Rx
#### A.11.1.2.1 5G NR /UDP Downlink Throughput /Conducted/Fading/VRC/4Rx
FDD/FR1 PDSCH mapping Type A performance - for SA and NSA
##### A.11.1.2.1.1 Definition {#a.11.1.2.1.1-definition .H6}
The UE application layer downlink performance for UDP under fading environment
with variable reference channel is determined by the UE application layer UDP
throughput.
##### A.11.1.2.1.2 Test Purpose {#a.11.1.2.1.2-test-purpose .H6}
To measure the performance of the 5G NR UE while downloading UDP based data in
a fading channel environment with variable reference channel under 4 receive
antenna conditions for FR1. The duplex mode is FDD.
##### A.11.1.2.1.3 Test Parameters {#a.11.1.2.1.3-test-parameters .H6}
Same test parameters as in clause A.10.1.2.1.3
##### A.11.1.2.1.4 Test Description {#a.11.1.2.1.4-test-description .H6}
##### A.11.1.2.1.4.1 Initial Conditions {#a.11.1.2.1.4.1-initial-conditions
.H6}
Same initial conditions as in clause A.10.1.2.1.4.1.
##### A.11.1.2.1.4.2 Test Procedure {#a.11.1.2.1.4.2-test-procedure .H6}
1\. Set the parameters of bandwidth, reference channel, the propagation
condition, antenna configuration, antenna correlation, Codebook configuration,
Beamforming Model, RI configuration and SNR according to Table A.10.1.2.1.3-1
as appropriate.
2\. SS shall send PDSCH via PDCCH DCI format 1_1 for C_RNTI to transmit the DL
RMC according to the UE reported CQI (wideband CQI), PMI and RI. The SS sends
downlink MAC padding bits on the DL RMC.
3\. Using the data client, begin UDP downlink data transfer from the
application server. Wait for 15 seconds and then start recording the UDP
throughput result (This is iteration 1). Continue data transfer for the test
duration outlined in Table A.1-14.
4\. Repeat step 3 for 3 iterations within the same call as the first
iteration. Wait for at least 5 seconds between each iteration of the data
transfer.
5\. Calculate and record the average application layer data throughput across
three iterations. Additionally, count and record the overall number of ACK and
NACK/DTX on the PUSCH/PUCCH during the test interval purely for information
purposes.
6\. Record the IP address type (IPv4 or IPv6) used during the UDP data
transfers.
7\. Using the values for UDP in Table 5.4.4-2 (for IPv6) and Table 5.4.4-3
(for IPv4), determine the reduction from PHY reference fractional throughput
value listed in Table A.10.1.2.1.3-1 to obtain reference Application Layer
Throughput value.
#### A.11.1.2.2 5G NR /UDP Downlink Throughput /Conducted/Fading/VRC/4Rx
TDD/FR1 PDSCH mapping Type A performance - for SA and NSA
A.11.1.2.2.1 Definition
The UE application layer downlink performance for UDP under fading environment
with variable reference channel is determined by the UE application layer UDP
throughput.
##### A.11.1.2.2.2 Test Purpose {#a.11.1.2.2.2-test-purpose .H6}
To measure the performance of the 5G NR UE while downloading TCP based data in
a fading channel environment with variable reference channel under 4 receive
antenna conditions for FR1. The duplex mode is TDD.
##### A.11.1.2.2.3 Test Parameters {#a.11.1.2.2.3-test-parameters .H6}
Same test parameters as in clause A.10.1.2.2.3
##### A.11.1.2.2.4 Test Description {#a.11.1.2.2.4-test-description .H6}
##### A.11.1.2.2.4.1 Initial Conditions {#a.11.1.2.2.4.1-initial-conditions
.H6}
Same initial conditions as in clause A.10.1.2.2.4.1.
##### A.11.1.2.2.4.2 Test Procedure {#a.11.1.2.2.4.2-test-procedure .H6}
1\. Set the parameters of bandwidth, reference channel, the propagation
condition, antenna configuration, antenna correlation, Codebook configuration,
Beamforming Model, RI configuration and SNR according to Table A.10.1.2.2.4-1
as appropriate.
2\. SS shall send PDSCH via PDCCH DCI format 1_1 for C_RNTI to transmit the DL
RMC according to the UE reported CQI (wideband CQI), PMI and RI. The SS sends
downlink MAC padding bits on the DL RMC.
3\. Using the data client, begin UDP downlink data transfer from the
application server. Wait for 15 seconds and then start recording the UDP
throughput result (This is iteration 1). Continue data transfer for the test
duration outlined in Table A.1-14.
4\. Repeat step 3 for 3 iterations within the same call as the first
iteration. Wait for at least 5 seconds between each iteration of the data
transfer.
5\. Calculate and record the average application layer data throughput across
three iterations. Additionally, count and record the overall number of ACK and
NACK/DTX on the PUSCH/PUCCH during the test interval purely for information
purposes.
6\. Record the IP address type (IPv4 or IPv6) used during the UDP data
transfers.
7\. Using the values for UDP in Table 5.4.4-2 (for IPv6) and Table 5.4.4-3
(for IPv4), determine the reduction from PHY reference fractional throughput
value listed in Table A.10.1.2.2.4-1 to obtain reference Application Layer
Throughput value.
# A.12 5G NR /TCP Downlink Throughput /Radiated for Variable Reference Channel
Scenarios (VRC) with Fading
## A.12.1 5G NR /TCP Downlink Throughput /Radiated/Fading/VRC
### A.12.1.1 5G NR /TCP Downlink Throughput /Radiated/Fading/VRC/2Rx
##### A.12.1.1.1 Definition {#a.12.1.1.1-definition .H6}
The UE application layer downlink performance for TCP under fading environment
with variable reference channel is determined by the UE application layer TCP
throughput.
##### A.12.1.1.2 Test Purpose {#a.12.1.1.2-test-purpose .H6}
To measure the performance of the 5G NR UE while downloading TCP based data in
a fading channel environment with variable reference channel under 2 receive
antenna conditions for FR1.
##### A.12.1.1.3 Test Parameters {#a.12.1.1.3-test-parameters .H6}
The test parameters are specified in Table A.12.1.1.3-1. Test3 is to be
selected as test point.
Table A.12.1.1.3-1: FR2 2Rx Test point
+----------+----------+----------+----------+----------+----------+ | P | Unit | Test 1 | Test 2 | Test 3 | | | arameter | | | | | | +==========+==========+==========+==========+==========+==========+ | F | | FR1 | FR1 | FR2 | | | requency | | | | | | | range | | | | | | +----------+----------+----------+----------+----------+----------+ | B | MHz | 10 | 40 | 100 | | | andwidth | | | | | | +----------+----------+----------+----------+----------+----------+ | Su | kHz | 15 | 30 | 120 | | | bcarrier | | | | | | | spacing | | | | | | +----------+----------+----------+----------+----------+----------+ | Duplex | | FDD | TDD | TDD | | | Mode | | | | | | +----------+----------+----------+----------+----------+----------+ | TDD Slot | | N/A | 7D1S2U | DDSU | | | Confi | | | | | | | guration | | | S: | S:1 | | | | | | 6D+4G+4U | 1D+3G+0U | | +----------+----------+----------+----------+----------+----------+ | SNR | dB | 20 | 20 | 16 | | +----------+----------+----------+----------+----------+----------+ | Pro | | TDLA30-5 | TDLA30-5 | T | | | pagation | | | | DLA30-35 | | | channel | | | | | | +----------+----------+----------+----------+----------+----------+ | Antenna | | ULA Low | ULA Low | ULA Low | | | confi | | 2x2 | 2x2 | 2x2 | | | guration | | | | | | +----------+----------+----------+----------+----------+----------+ | Bea | | As | As | As | | | mforming | | defined | defined | defined | | | Model | | in Annex | in Annex | in Annex | | | | | B.4.1 in | B.4.1 in | B.4.1 in | | | | | TS | TS | TS | | | | | 38.101-4 | 38.101-4 | 38.101-4 | | +----------+----------+----------+----------+----------+----------+ | Receiver | | MMSE-IRC | MMSE-IRC | MMSE-IRC | | | type | | | | | | +----------+----------+----------+----------+----------+----------+ | PDSCH | Mapping | | Type A | Type A | Type A | | confi | type | | | | | | guration | | | | | | +----------+----------+----------+----------+----------+----------+ | | Starting | | 2 | 2 | 2 | | | symbol | | | | | | | (S) | | | | | +----------+----------+----------+----------+----------+----------+ | | Length | | 12 | 12 | 12 | | | (L) | | | | | +----------+----------+----------+----------+----------+----------+ | | PRB | | 2 | 2 | 2 | | | bundling | | | | | | | size | | | | | +----------+----------+----------+----------+----------+----------+ | | PRB | | Static | Static | Static | | | bundling | | | | | | | type | | | | | +----------+----------+----------+----------+----------+----------+ | | VR | | Non-int | Non-int | Non-int | | | B-to-PRB | | erleaved | erleaved | erleaved | | | mapping | | | | | | | int | | | | | | | erleaver | | | | | | | bundle | | | | | | | size | | | | | +----------+----------+----------+----------+----------+----------+ | PDSCH | DMRS | | Type 1 | Type 1 | Type 1 | | DMRS | Type | | | | | | confi | | | | | | | guration | | | | | | +----------+----------+----------+----------+----------+----------+ | | Number | | 1 | 1 | 1 | | | of | | | | | | | ad | | | | | | | ditional | | | | | | | DMRS | | | | | +----------+----------+----------+----------+----------+----------+ | | Maximum | | 1 | 1 | 1 | | | number | | | | | | | of OFDM | | | | | | | symbols | | | | | | | for DL | | | | | | | front | | | | | | | loaded | | | | | | | DMRS | | | | | +----------+----------+----------+----------+----------+----------+ | CSI | | As | As | As | | | mea | | s | s | s | | | surement | | pecified | pecified | pecified | | | channels | | in Table | in Table | in Table | | | (Note 2) | | A.4-2 of | A.4-2 of | A.4-1 of | | | | | TS | TS | TS | | | | | 3 | 3 | 3 | | | | | 8.101-4: | 8.101-4: | 8.101-4: | | | | | | | | | | | | Rank 1: | Rank 1: | Rank 1: | | | | | TBS.2-1 | TBS.2-3 | TBS.1-1 | | | | | | | | | | | | Rank 2: | Rank 2: | Rank 2: | | | | | TBS.2-2 | TBS.2-4 | TBS.1-2 | | +----------+----------+----------+----------+----------+----------+ | ZP | CSI-RS | | Periodic | Periodic | Periodic | | CSI-RS | resource | | | | | | confi | Type | | | | | | guration | | | | | | +----------+----------+----------+----------+----------+----------+ | | Number | | 4 | 4 | 4 | | | of | | | | | | | CSI-RS | | | | | | | ports | | | | | | | (_X_) | | | | | +----------+----------+----------+----------+----------+----------+ | | CDM Type | | FD-CDM2 | FD-CDM2 | FD-CDM2 | +----------+----------+----------+----------+----------+----------+ | | Density | | 1 | 1 | 1 | | | (ρ) | | | | | +----------+----------+----------+----------+----------+----------+ | | First | | Row 4, | Row 4, | Row 4, | | | su | | (8) | (8) | (8) | | | bcarrier | | | | | | | index in | | | | | | | the PRB | | | | | | | used for | | | | | | | CSI-RS | | | | | | | (k~0~) | | | | | +----------+----------+----------+----------+----------+----------+ | | First | | 13 | 13 | 13 | | | OFDM | | | | | | | symbol | | | | | | | in the | | | | | | | PRB used | | | | | | | for | | | | | | | CSI-RS | | | | | | | (l~0~) | | | | | +----------+----------+----------+----------+----------+----------+ | | CSI-RS | slot | 8/1 | 8/1 | 8/1 | | | | | | | | | | per | | | | | | | iodicity | | | | | | | and | | | | | | | offset | | | | | +----------+----------+----------+----------+----------+----------+ | NZP | CSI-RS | | A | A | A | | CSI-RS | resource | | periodic | periodic | periodic | | for CSI | Type | | | | | | acq | | | | | | | uisition | | | | | | +----------+----------+----------+----------+----------+----------+ | | Number | | 2 | 2 | 2 | | | of | | | | | | | CSI-RS | | | | | | | ports | | | | | | | (_X_) | | | | | +----------+----------+----------+----------+----------+----------+ | | CDM Type | | FD-CDM2 | FD-CDM2 | FD-CDM2 | +----------+----------+----------+----------+----------+----------+ | | Density | | 1 | 1 | 1 | | | (ρ) | | | | | +----------+----------+----------+----------+----------+----------+ | | First | | Row 3 | Row 3 | Row 3 | | | su | | (6) | (6) | (6) | | | bcarrier | | | | | | | index in | | | | | | | the PRB | | | | | | | used for | | | | | | | CSI-RS | | | | | | | (k~0~) | | | | | +----------+----------+----------+----------+----------+----------+ | | First | | 13 | 13 | 13 | | | OFDM | | | | | | | symbol | | | | | | | in the | | | | | | | PRB used | | | | | | | for | | | | | | | CSI-RS | | | | | | | (l~0~) | | | | | +----------+----------+----------+----------+----------+----------+ | | NZP | slot | Not | Not | Not | | | C | | co | co | co | | | SI-RS-ti | | nfigured | nfigured | nfigured | | | meConfig | | | | | | | | | | | | | | per | | | | | | | iodicity | | | | | | | and | | | | | | | offset | | | | | +----------+----------+----------+----------+----------+----------+ | CSI-IM | CSI-IM | | A | A | A | | confi | resource | | periodic | periodic | periodic | | guration | Type | | | | | +----------+----------+----------+----------+----------+----------+ | | CSI-IM | | Pattern | Pattern | Pattern | | | RE | | 1 | 1 | 1 | | | pattern | | | | | +----------+----------+----------+----------+----------+----------+ | | CSI-IM | | (8,13) | (8,13) | (8,13) | | | Resource | | | | | | | Mapping | | | | | | | | | | | | | | (k~CS | | | | | | | I-IM~,l~ | | | | | | | CSI-IM~) | | | | | +----------+----------+----------+----------+----------+----------+ | | CSI-IM | slot | Not | Not | Not | | | ti | | co | co | co | | | meConfig | | nfigured | nfigured | nfigured | | | | | | | | | | per | | | | | | | iodicity | | | | | | | and | | | | | | | offset | | | | | +----------+----------+----------+----------+----------+----------+ | ReportCo | | A | A | A | | | nfigType | | periodic | periodic | periodic | | +----------+----------+----------+----------+----------+----------+ | C | | Table 1 | Table 1 | Table 1 | | | QI-table | | | | | | +----------+----------+----------+----------+----------+----------+ | report | | cri-RI | cri-RI | cri-RI | | | Quantity | | -PMI-CQI | -PMI-CQI | -PMI-CQI | | +----------+----------+----------+----------+----------+----------+ | timeR | | not | not | not | | | estricti | | co | co | co | | | onForCha | | nfigured | nfigured | nfigured | | | nnelMeas | | | | | | | urements | | | | | | +----------+----------+----------+----------+----------+----------+ | ti | | not | not | not | | | meRestri | | co | co | co | | | ctionFor | | nfigured | nfigured | nfigured | | | Interfer | | | | | | | enceMeas | | | | | | | urements | | | | | | +----------+----------+----------+----------+----------+----------+ | cqi | | Wideband | Wideband | Wideband | | | -FormatI | | | | | | | ndicator | | | | | | +----------+----------+----------+----------+----------+----------+ | pmi | | Wideband | Wideband | Wideband | | | -FormatI | | | | | | | ndicator | | | | | | +----------+----------+----------+----------+----------+----------+ | Sub-band | RB | 8 | 8 | 8 | | | Size | | | | | | +----------+----------+----------+----------+----------+----------+ | c | | 1111111 | 1111111 | 1 | | | si-Repor | | | | 11111111 | | | tingBand | | | | | | +----------+----------+----------+----------+----------+----------+ | CS | slot | Not | Not | Not | | | I-Report | | co | co | co | | | per | | nfigured | nfigured | nfigured | | | iodicity | | | | | | | and | | | | | | | offset | | | | | | +----------+----------+----------+----------+----------+----------+ | A | | 5 | 9 | 7 | | | periodic | | | | | | | Report | | | | | | | Slot | | | | | | | Offset | | | | | | +----------+----------+----------+----------+----------+----------+ | CSI | | 1 in | 1 in | 1 in | | | request | | slots i, | slots i, | slots i, | | | | | where | where | where | | | | | mod(i, | mod(i, | mod(i, | | | | | 5) = 0, | 10) = 0, | 8) = 1, | | | | | o | o | o | | | | | therwise | therwise | therwise | | | | | it is | it is | it is | | | | | equal to | equal to | equal to | | | | | 0 | 0 | 0 | | +----------+----------+----------+----------+----------+----------+ | r | | 1 | 1 | 1 | | | eportTri | | | | | | | ggerSize | | | | | | +----------+----------+----------+----------+----------+----------+ | CSI-A | | One | One | One | | | periodic | | State | State | State | | | TriggerS | | with one | with one | with one | | | tateList | | As | As | As | | | | | sociated | sociated | sociated | | | | | Report | Report | Report | | | | | Confi | Confi | Confi | | | | | guration | guration | guration | | | | | | | | | | | | As | As | As | | | | | sociated | sociated | sociated | | | | | Report | Report | Report | | | | | Confi | Confi | Confi | | | | | guration | guration | guration | | | | | contains | contains | contains | | | | | pointers | pointers | pointers | | | | | to NZP | to NZP | to NZP | | | | | CSI-RS | CSI-RS | CSI-RS | | | | | and | and | and | | | | | CSI-IM | CSI-IM | CSI-IM | | +----------+----------+----------+----------+----------+----------+ | Codebook | Codebook | | t | t | t | | confi | Type | | ypeI-Sin | ypeI-Sin | ypeI-Sin | | guration | | | glePanel | glePanel | glePanel | +----------+----------+----------+----------+----------+----------+ | | Codebook | | 1 | 1 | 1 | | | Mode | | | | | +----------+----------+----------+----------+----------+----------+ | | (Code | | N/A | N/A | N/A | | | bookConf | | | | | | | ig-N1,Co | | | | | | | debookCo | | | | | | | nfig-N2) | | | | | +----------+----------+----------+----------+----------+----------+ | | C | | Not | Not | Not | | | odebookS | | co | co | co | | | ubsetRes | | nfigured | nfigured | nfigured | | | triction | | | | | +----------+----------+----------+----------+----------+----------+ | | RI | | N/A | N/A | N/A | | | Res | | | | | | | triction | | | | | +----------+----------+----------+----------+----------+----------+ | Physical | | PUSCH | PUSCH | PUSCH | | | channel | | | | | | | for CSI | | | | | | | report | | | | | | +----------+----------+----------+----------+----------+----------+ | CQ | ms | 1.375 | 1.375 | 1.375 | | | I/RI/PMI | | | | | | | delay | | | | | | +----------+----------+----------+----------+----------+----------+ | Maximum | | 1 | 1 | 1 | | | number | | | | | | | of HARQ | | | | | | | tran | | | | | | | smission | | | | | | +----------+----------+----------+----------+----------+----------+ | Test | | T% of | | | | | metric | | max | | | | | | | th | | | | | | | roughput | | | | | | | at | | | | | | | target | | | | | | | SNR. | | | | +----------+----------+----------+----------+----------+----------+ | Note 1: | | | | | | | Other | | | | | | | common | | | | | | | test | | | | | | | pa | | | | | | | rameters | | | | | | | are | | | | | | | defined | | | | | | | in | | | | | | | Section | | | | | | | 6.1.2 of | | | | | | | 38.101-4 | | | | | | | for | | | | | | | Tests 1 | | | | | | | and 2 | | | | | | | and | | | | | | | Section | | | | | | | 8.1.2 of | | | | | | | 38.101-4 | | | | | | | for Test | | | | | | | 3. | | | | | | | | | | | | | | Note 2: | | | | | | | PDSCH is | | | | | | | not | | | | | | | s | | | | | | | cheduled | | | | | | | on slots | | | | | | | co | | | | | | | ntaining | | | | | | | CSI-RS | | | | | | | for CSI | | | | | | | acqu | | | | | | | isition, | | | | | | | CSI-RS | | | | | | | for | | | | | | | tracking | | | | | | | and | | | | | | | CSI-RS | | | | | | | for beam | | | | | | | re | | | | | | | finement | | | | | | | (for | | | | | | | Test 3 | | | | | | | only). | | | | | | +----------+----------+----------+----------+----------+----------+
##### A.12.1.1.4 Test Description {#a.12.1.1.4-test-description .H6}
##### A.12.1.1.4.1 Initial Conditions {#a.12.1.1.4.1-initial-conditions .H6}
Initial conditions are a set of test configurations the UE needs to be tested
in and the steps for the SS to take with the UE to reach the correct
measurement state. Apply the Initial conditions defined in TS 38.521-4 [3]
clause 8.4.2.2.1.4.1 with the following additional steps and/or exceptions:
1.1 Connect an application server to the IP output of the SS.
1.2 For an embedded configuration, ensure that the UE has a client test
application available. For a tethered configuration, tether the UE to a laptop
configured with FTP client software using the appropriate UE to PC interface
Modem or Network Interface Connection (NIC) drivers.
2\. In Step 2 skip reference to TS 38.521-4 [3] 8.4.2.2.1.3-1 since test
parameters are already defined for this l test.
5\. For NSA case, the E-UTRA anchor is configured as per Annex E. Ensure the
UE is in RRC_CONNECTED State with generic procedure parameters Connectivity NR
for NR/5GC with _Connected without Release_ On, _Test Mode_ Off or EN-DC, DC
bearer MCG and SCG, _Connected without release_ On, _Test Mode_ Off for EN-DC.
##### A.12.1.1.4.2 Test Procedure {#a.12.1.1.4.2-test-procedure .H6}
1\. Set the UE in a direction that satisfies the 3 normative criteria
specified in Annex H.0. If no direction found mark the test as inconclusive.
2\. Set the parameters of the Modulation format and code rate, reference
channel, the propagation condition, the correlation matrix and the SNR
according to Test3 of Table A.12.1.1.3-1. SS transmits PDSCH via PDCCH DCI
format 1_1 for C_RNTI to transmit the DL RMC.
3\. SS sends uplink scheduling information for each UL HARQ process via PDCCH
DCI format 0_1 for C_RNTI to schedule the UL RMC over PUSCH according to
parameters set during initial conditions. The purpose of this scheduling is to
accommodate for TCP UL ACK/NACK feedback transmissions.
4\. Using the data client, begin TCP downlink data transfer from the
application server. Wait for 15 seconds and then start recording the TCP
throughput result. (This is iteration 1) Continue data transfer for the test
duration outlined in Table A.1-1.
5\. Repeat step 3 for 3 iterations within the same call as the first
iteration. Wait for at least 5 seconds between each iteration of the data
transfer.
6\. Calculate and record the average application layer data throughput across
three iterations. Additionally, count and record the overall number of ACK and
NACK/DTX on the PUSCH/PUCCH during the test interval. Record the IP address
type (IPv4 or IPv6) used during the TCP data transfers.
7\. Using the values in Table 5.4.4-2 (for IPv6) and Table 5.4.4-3 (for IPv4),
determine the reduction from PHY reference fractional throughput value listed
in Table A.12.1.1.3-1 to obtain reference Application Layer Throughput value.
# A.13 5G NR /UDP Downlink Throughput /Radiated for Variable Reference Channel
(VRC) Scenarios
## A.13.1 5G NR /UDP Downlink Throughput /Radiated/Fading/VRC
### A.13.1.1 5G NR /UDP Downlink Throughput /Radiated/Fading/VRC/2Rx
##### A.13.1.1.1 Definition {#a.13.1.1.1-definition .H6}
The UE application layer downlink performance for UDP under fading environment
with variable reference channel is determined by the UE application layer UDP
throughput.
##### A.13.1.1.2 Test Purpose {#a.13.1.1.2-test-purpose .H6}
To measure the performance of the 5G NR UE while downloading UDP based data in
a fading channel environment with variable reference channel under 2 receive
antenna conditions for FR1.
##### A.13.1.1.3 Test Parameters {#a.13.1.1.3-test-parameters .H6}
Same test parameters as in clause A.12.1.1.3
##### A.13.1.1.4 Test Description {#a.13.1.1.4-test-description .H6}
##### A.13.1.1.4.1 Initial Conditions {#a.13.1.1.4.1-initial-conditions .H6}
Same initial conditions as in clause A.12.1.1.4.1
##### A.13.1.1.4.2 Test Procedure {#a.13.1.1.4.2-test-procedure .H6}
1\. Set the UE in a direction that satisfies the 3 normative criteria
specified in Annex H.0. If no direction found mark the test as inconclusive.
2\. Set the parameters of the Modulation format and code rate, reference
channel, the propagation condition, the correlation matrix and the SNR
according to Test3 of Table A.12.1.1.3-1. SS transmits PDSCH via PDCCH DCI
format 1_1 for C_RNTI to transmit the DL RMC.
3\. Using the data client, begin UDP downlink data transfer from the
application server. Wait for 15 seconds and then start recording the UDP
throughput result. (This is iteration 1) Continue data transfer for the test
duration outlined in Table A.1-1.
4\. Repeat step 3 for 3 iterations within the same call as the first
iteration. Wait for at least 5 seconds between each iteration of the data
transfer.
5\. Calculate and record the average application layer data throughput across
three iterations. Additionally, count and record the overall number of ACK and
NACK/DTX on the PUSCH/PUCCH during the test interval. Record the IP address
type (IPv4 or IPv6) used during the UDP data transfers.
6\. Using the values in Table 5.4.4-2 (for IPv6) and Table 5.4.4-3 (for IPv4),
determine the reduction from PHY reference fractional throughput value listed
in Table A.12.1.1.3-1 to obtain reference Application Layer Throughput value.
###### ## Annex B: Specific Test Conditions and Environment
# B.1 Upper Layer configurations
## B1.1 MAC Configurations
For data throughput testing one DRB configuration shall be used and there will
be no SRB data in the downlink and uplink. The Modulation order and transport
block size are determined as per section 5.1.3 of TS 38.214 [17].The
parameters for DRB configurations will follow the Table 4.8.1-3 with n=1, m=0
(1 AM DRB) of TS 38.508-1 [18].
## B.1.2 RLC Configuration
For NR data throughput testing purposes RLC in AM mode only will be used. The
RLC configuration and RLC Bearer parameters shall follow Table 4.6.3-149 using
condition AM and Table 4.6.3-148 using condition AM of TS 38.508-1 [18]
respectively.
## B.1.3 PDCP Configuration
For NR data throughput testing PDCP header compression will not be enabled.
PDCP configuration for DRB in RLC AM mode shall follow Table 4.6.3-99 using
condition AM (default is AM) of TS 38.508-1 [18].
# B.2 UL RMC
Table B.2-1 (extract of Table A.2.3.1.1-2 of TS 38.521-4[3]) can be used to
configure PUSCH TB to carry upper layer ACK/NAK for TCP.
Table B.2-1: Reference Channels for CP-OFDM 16QAM for 30kHz SCS
Parameter | Channel bandwidth | Subcarrier Spacing | Allocated resource blocks | CP-OFDM Symbols per slot (Note 1) | Modulation | MCS Index (Note 2) | Target Coding Rate | Payload size for slots 8, 9, 18 and 19 | Transport block CRC | LDPC Base Graph | Number of code blocks per slot for slots 8, 9, 18 and 19 (Note 3) | Total number of bits per slot for slots 8, 9, 18 and 19 | Total modulated symbols per slot for slots 8, 9, 18 and 19  
---|---|---|---|---|---|---|---|---|---|---|---|---|---  
Unit | MHz | KHz |  |  |  |  |  | Bits | Bits |  |  | Bits |   
| 5-50 | 30 | 1 | 11 | 16QAM | 10 | 1/3 | 176 | 16 | 2 | 1 | 528 | 132  
| 5 | 30 | 6 | 11 | 16QAM | 10 | 1/3 | 1064 | 16 | 2 | 1 | 3168 | 792  
| 5 | 30 | 11 | 11 | 16QAM | 10 | 1/3 | 1928 | 16 | 2 | 1 | 5808 | 1452  
| 10 | 30 | 12 | 11 | 16QAM | 10 | 1/3 | 2088 | 16 | 2 | 1 | 6336 | 1584  
| 10 | 30 | 24 | 11 | 16QAM | 10 | 1/3 | 4224 | 24 | 1 | 1 | 12672 | 3168  
| 15 | 30 | 19 | 11 | 16QAM | 10 | 1/3 | 3368 | 16 | 2 | 1 | 10032 | 2508  
| 15 | 30 | 38 | 11 | 16QAM | 10 | 1/3 | 6656 | 24 | 1 | 1 | 20064 | 5016  
| 20 | 30 | 26 | 11 | 16QAM | 10 | 1/3 | 4480 | 24 | 1 | 1 | 13728 | 3432  
| 20 | 30 | 51 | 11 | 16QAM | 10 | 1/3 | 8968 | 24 | 1 | 2 | 26928 | 6732  
| 25 | 30 | 33 | 11 | 16QAM | 10 | 1/3 | 5760 | 24 | 1 | 1 | 17424 | 4356  
| 25 | 30 | 65 | 11 | 16QAM | 10 | 1/3 | 11272 | 24 | 1 | 2 | 34320 | 8580  
| 30 | 30 | 39 | 11 | 16QAM | 10 | 1/3 | 6784 | 24 | 1 | 1 | 20592 | 5148  
| 30 | 30 | 78 | 11 | 16QAM | 10 | 1/3 | 13576 | 24 | 1 | 2 | 41184 | 10296  
| 40 | 30 | 53 | 11 | 16QAM | 10 | 1/3 | 9224 | 24 | 1 | 2 | 27984 | 6996  
| 40 | 30 | 106 | 11 | 16QAM | 10 | 1/3 | 18432 | 24 | 1 | 3 | 55968 | 13992  
| 50 | 30 | 67 | 11 | 16QAM | 10 | 1/3 | 11784 | 24 | 1 | 2 | 35376 | 8844  
| 50 | 30 | 133 | 11 | 16QAM | 10 | 1/3 | 23040 | 24 | 1 | 3 | 70224 | 17556  
| 60 | 30 | 81 | 11 | 16QAM | 10 | 1/3 | 14088 | 24 | 1 | 2 | 42768 | 10692  
| 60 | 30 | 162 | 11 | 16QAM | 10 | 1/3 | 28168 | 24 | 1 | 4 | 85536 | 21384  
| 80 | 30 | 109 | 11 | 16QAM | 10 | 1/3 | 18960 | 24 | 1 | 3 | 57552 | 14388  
| 80 | 30 | 217 | 11 | 16QAM | 10 | 1/3 | 37896 | 24 | 1 | 5 | 114576 | 28644  
| 90 | 30 | 123 | 11 | 16QAM | 10 | 1/3 | 21504 | 24 | 1 | 3 | 64944 | 16236  
| 90 | 30 | 245 | 11 | 16QAM | 10 | 1/3 | 43032 | 24 | 1 | 6 | 129360 | 32340  
| 100 | 30 | 137 | 11 | 16QAM | 10 | 1/3 | 24072 | 24 | 1 | 3 | 72336 | 18084  
| 100 | 30 | 273 | 11 | 16QAM | 10 | 1/3 | 48168 | 24 | 1 | 6 | 144144 | 36036  
Note 1: PUSCH mapping Type-A and single-symbol DM-RS configuration Type-1 with 2 additional DM-RS symbols, such that the DM-RS positions are set to symbols 2, 7, 11. DMRS is [TDM’ed] with PUSCH data Note 2: MCS Index is based on MCS table 5.1.3.1-1 defined in TS 38.214 [17] Note 3: If more than one Code Block is present, an additional CRC sequence of L = 24 Bits is attached to each Code Block (otherwise L = 0 Bit) |  |  |  |  |  |  |  |  |  |  |  |  |   
###### ## Annex C: Specific Connection Diagrams
Figure C.1: UE Application Layer Data Throughput Connection Diagram for
Tethered
Figure C.2: UE Application Layer Data Throughput Connection Diagram for
Embedded
###### ## Annex D: Reference Test Points
# D.1 FR1 Reference Test Points
Table D.1-1: FR1 FDD 2Rx
TS 38.521-4 Reference Test num. Reference channel Modulation format
Propagation condition Correlation matrix and antenna configuration Reference
value Comment
* * *
                                                                                                                                                     Fraction of maximum throughput (%)   SNR (dB)
5.2.2.1.1_1 2Rx FDD 1-3 R.PDSCH.1-4.1 FDD 256AM, 0.82 TDLA30-10 2x2, ULA Low
70 25.6 Large TBS 5.2.2.1.1_1 2Rx FDD 1-4 R.PDSCH.1-2.1 FDD 16QAM, 0.48
TDLC300-100 2x2, ULA Low 30 2 High BLER 5.2.2.1.1_1 2Rx FDD 1-1 R.PDSCH.1-1.1
FDD QPSK, 0.30 TDLB100-400 2x2, ULA Low 70 0.1 High channel variation
5.2.2.1.1_1 2Rx FDD 2-1 R.PDSCH.1-3.1 FDD 64QAM, 0.51 TDLA30-10 2x2, ULA Low
70 20.4 High throughput Baseline Rx 5.2.2.1.1_2 2Rx FDD 3-1 R.PDSCH.1-2.2 FDD
16QAM, 0.48 TDLA30-10 2x2, ULA Medium 70 18.6 High throughput Enhanced Rx
Table D.1-2: FR1 TDD 2Rx
TS 38.521-4 Reference Test num. Reference channel Bandwidth (MHz) / Subcarrier
spacing (kHz) Modulation format and code rate TDD UL-DL pattern Propagation
condition Correlation matrix and antenna configuration Reference value Comment
* * *
                                                                                                                                                                                                                                    Fraction of maximum throughput (%)   SNR (dB)
5.2.2.2.1_1 2Rx TDD 1-3 R.PDSCH.2-4.1 TDD 40 / 30 256QAM, 0.82 FR1.30-1
TDLA30-10 2x2, ULA Low 70 26.3 Large TBS 5.2.2.2.1_1 2Rx TDD 1-4 R.PDSCH.2-2.1
TDD 40 / 30 16QAM, 0.48 FR1.30-1 TDLC300-100 2x2, ULA Low 30 2.5 High BLER
5.2.2.2.1_1 2Rx TDD 1-1 R.PDSCH.2-1.1 TDD 40 / 30 QPSK, 0.30 FR1.30-1A
TDLB100-400 2x2, ULA Low 70 -0.2 High channel variation 5.2.2.2.1_1 2Rx TDD
2-1 R.PDSCH.2-3.1 TDD 40 / 30 64QAM, 0.50 FR1.30-1 TDLA30-10 2x2, ULA Low 70
20.8 High throughput Baseline Rx 5.2.2.2.1_2 2Rx TDD 3-1 R.PDSCH.2-2.2 TDD 40
/ 30 16QAM, 0.48 FR1.30-1 TDLA30-10 2x2, ULA Medium 70 19.0 High throughput
Enhanced Rx
Table D.1-3: FR1 FDD 4Rx Test points
TS 38.521-4 Reference Test num. Bandwidth (MHz) / Subcarrier spacing (kHz)
Reference channel Modulation format Propagation condition Correlation matrix
and antenna configuration Reference value Comment
* * *
                                                                                                                                                                                                  Fraction of maximum throughput (%)   SNR (dB)
5.2.3.1.1_1 4Rx FDD 1-3 R.PDSCH.1-4.1 FDD 10 / 15 256QAM, 0.82 TDLA30-10 2x4,
ULA Low 70 22.0 Large TBS 5.2.3.1.1_1 4Rx FDD 1-4 R.PDSCH.1-2.1 FDD 10 / 15
16QAM, 0.48 TDLC300-100 2x4, ULA Low 30 -0.6 High BLER 5.2.3.1.1_1 4Rx FDD 1-1
R.PDSCH.1-1.1 FDD 10 / 15 QPSK, 0.30 TDLB100-400 2x4, ULA Low 70 -2.6 High
channel variation 5.2.3.1.1_1 4Rx FDD 4-1 R.PDSCH.1-2.4 FDD 10 / 15 16QAM,
0.48 TDLA30-10 4x4, ULA Low 70 16.6 High throughput Baseline Rx 5.2.3.1.1_1
4Rx FDD 5-1 R.PDSCH.1-2.3 FDD 10 / 15 16QAM, 0.48 TDLA30-10 4x4, ULA Medium A
70 23.3 High throughput Enhanced Rx
Table D.1-4: FR1 TDD 4Rx
TS 38.521-4 Reference Test num. Reference channel Bandwidth (MHz) / Subcarrier
spacing (kHz) Modulation format and code rate TDD UL-DL pattern Propagation
condition Correlation matrix and antenna configuration Reference value Comment
* * *
                                                                                                                                                                                                                                    Fraction of maximum throughput (%)   SNR (dB)
5.2.3.2.1_1 4Rx TDD 1-3 R.PDSCH.2-4.1 TDD 40 / 30 256QAM, 0.82 FR1.30-1
TDLA30-10 2x4, ULA Low 70 22.5 Large TBS 5.2.3.2.1_1 4Rx TDD 1-4 R.PDSCH.2-2.1
TDD 40 / 30 16QAM, 0.48 FR1.30-1 TDLC300-100 2x4, ULA Low 30 -0.3 High BLER
5.2.3.2.1_1 4Rx TDD 1-1 R.PDSCH.2-1.1 TDD 40 / 30 QPSK, 0.30 FR1.30-1A
TDLB100-400 2x4, ULA Low 70 -3.1 High channel variation 5.2.3.2.1_1 4Rx TDD
4-1 R.PDSCH.2-2.4 TDD 40 / 30 16QAM, 0.48 FR1.30-1 TDLA30-10 4x4, ULA Low 70
16.4 High throughput Baseline Rx 5.2.3.2.1_1 4Rx TDD 5-1 R.PDSCH.2-2.3 TDD 40
/ 30 16QAM, 0.48 FR1.30-1 TDLA30-10 4x4, ULA Medium A 70 23.9 High throughput
Enhanced Rx
Table D.1-5: FR1 Static Channel Test Point
TS 38.521-4 Reference Reference channel Bandwidth (MHz) / Subcarrier spacing
(kHz) Modulation format and code rate TDD UL-DL pattern Propagation condition
Reference value Comment
* * *
                                                                                                                                                                                                                                                                                              Fraction of maximum throughput (%)   SNR (dB)
5.5.1 As per tables in TS 38.521-4 [3] clause 5.5.1.3 and test parameter
selection as per TS 38.521-4 [3] 5.5.1.3.1. Static/ Clean Channel 85 No
external noise sources are applied Peak Throughput
# D.2 FR2 Reference Test Points
Table D.2-1: FR2 Test Point 2Rx
38.521-4 Reference Test num. Reference channel Bandwidth (MHz)/Subcarrier
spacing (kHz) Modulation format TDD UL-DL pattern Propagation condition
Correlation matrix and antenna configuration Reference value Comment
* * *
                                                                                                                                                                                                                 Fraction of maximum throughput (%)   SNR (dB)
7.2.2.2.1_1 1-2 R.PDSCH.5-2.1 TDD 100/120 16QAM, 0.48 FR2.120-1 TDLA30-300 2x2
ULA Low 30 1.7 Exercises HARQ Combining 7.2.2.2.1_1 2-2 R.PDSCH.5-2.2 TDD
100/120 16QAM, 0.48 FR2.120-1 TDLA30-300 2x2 ULA Low 70 14.4 High doppler
7.2.2.2.1_1 2-6 R.PDSCH.5-6.1 TDD 100/120 64QAM, 0.43 FR2.120-2 TDLA30-75 2x2
ULA Low 70 18.6 Large TBS, Low Doppler
###### ## Annex E: E-UTRA Anchor Configuration for NSA testing Diagrams
The clauses within Annex D of TS 38.521-4 [3] define the E-UTRA link setup
config for NSA performance tests and shall be used for all E-UTRA anchor for
NSA tests defined within Annex A.2, unless otherwise specified within the test
procedures.
###### ## Annex F: Embedded Data Client Recommendations
_Editor's Note: The following aspects are either missing or not yet
determined:_
\- It is for further study to determine if any additional items are required
to be provisioned prior to command interface establishment.
\- The command set and test parameters that are needed for automation of
embedded data throughput performance in TR 37.901 are missing.
\- The fields required to support result reporting are missing.
# F.1 Purpose of annex
This annex identifies the recommendations and details concerning a common
application interface to allow for automation of testing for the UE
Application Layer Data Throughput Performance test procedures that utilize an
embedded data client.
# F.2 Embedded Data Client Automation
## F.2.1 Embedded Data Client Functionality
The following functionality is recommended for the embedded data client to
support automation.
\- The application may start automatically on device power-up or reset. If the
application does not support this feature, the operator manually starts the
application at the beginning of the test campaign.
\- The application automatically sets up a data call using the expected radio
bearer that is used for test and establishes a connection to the test server.
\- The application may periodically poll the test server with the Poll for
Task command when not actively performing a task to determine if the test
server has a new task.
\- The application will be informed by the test server about the task list to
be performed either in response to the Poll for Task command or via a command
that is pushed to the application from the test server.
\- The application should not send, or limits as much as possible, any
commands, responses and status updates during a measurement unless the time-
out period has expired so that the UE application layer data throughput
results are not impacted. If the application does send limited updates, the
downlink and uplink performance loss should be declared in the test results
and should not exceed 0.4 kbps.
\- The application should listen for commands at all times so that the test
server can interrupt the measurement.
## F.2.2 Embedded Data Client Provisioning
The embedded data client may provide a mechanism to provision common
parameters required for interfacing with test systems. The following captures
aspects that should be considered if the application provides for such
provisioning.
\- Provisioning of the data client does not need to be automated.
\- A manual interface or parameter file approach could be used. Instructions
for operation should be provided.
\- The items expected to be provisioned prior to command interface
establishment are as follows:
\- IP address and port number, if necessary, for the test server
\- Poll for Task Command Polling Period (if the polling approach is used, this
may be a configurable item or a hardcoded value)
\- FFS
If certain parameters are hard-coded, these parameters should be documented to
allow for the test systems to be properly configured.
## F.2.3 Embedded Data Client Command Set and Operation
The embedded data client should use the specified command set and follow the
operational structure defined in this clause.
### F.2.3.1 Poll for Task Command
The embedded data client application may make use of a polling mechanism to
query the test server for tasks to perform. If polling is used, the following
instructions apply.
The Poll for Task command shall be substantiated with FFS.
If there is no task for the application to perform, an FFS error is returned.
The application shall start its Waiting for Task Polling Period timer. When
the timer expires, another Poll for Task command shall be sent.
If there is a task for the application to perform, the test server may return
an FFS.
### F.2.3.2 Task List
The test server will deliver a task list to the application. The task list
will be delivered over the IP connection using HTTP(S) or raw TCP. The task
list can contain multiple tasks that are listed sequentially for the
application to execute or can also contain a single task. The format for the
task list is XML for ASCII text string.
For each task, the following lists the valid parameters and valid strings for
each parameter. The list of items should be considered as logical
representations of the required parameters and content. The actual syntax may
vary. The instructions for the application should provide the recommended
usage for each particular test type.
\- FFS
If the requested task list is unknown to the application, the application may
ignore it or return an error of FFS. The application will then go back to a
waiting for command state.
### F.2.3.3 Result Reporting
Upon completion of the specified test sequence, the application shall upload
the test results to the test server over the IP connection using HTTP(S) POST
or raw TCP.
The result files shall be in CSV or XML format.
###### ## Annex G: Applicability
This clause adds appropriate applicability references to TS 38.521-4 [3].
For FR1 testing: The applicability requirements for different number of RX
antenna ports shall follow the principles defined in TS 38.521-4 [3] clauses
5.1.1.2, 5.1.1.3 and 5.1.1.4For FR2 testing: The applicability requirements
for different number of RX antenna ports shall follow the principles defined
in TS 38.521-4 [3] clauses 7.1.1.2, 7.1.1.3 and 7.1.1.4.
For Interworking scenarios testing the guidance from TS 38.521-4 [3] clause
9.1.1.1 applies.
###### ## Annex H: Default message content for Application Layer Data
Throughput
# H.1 Radio resource control information elements
As defined in clause TS 38.521-4 [3] with the following exceptions:
##### PDCCH-config {#pdcch-config .H6}
Table H.1-1: PDCCH _Search Space_
Derivation Path: TS 38.508-1, Table 5.4.2.0-7
* * *
Information Element Value/remark Comment Condition SearchSpace ::= SEQUENCE {  
monitoringSlotPeriodicityAndOffset CHOICE {  
sl1 NULL  
}  
nrofCandidates SEQUENCE {  
aggregationLevel1 n0  
aggregationLevel2 n0  
aggregationLevel4 n2 1 for UL, 1 for DL  
aggregationLevel8 n0  
aggregationLevel16 n0  
}  
searchSpaceType CHOICE {  
common SEQUENCE {  
ue-Specific SEQUENCE {  
dci-Formats formats0-1-And-1-1 DCI Format 1_1  
}  
}  
}
#