# Foreword
This Technical Specification has been produced by the 3rd Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document specifies and establishes the characteristics of the
physical layer procedures for shared spectrum channel.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or non‑specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 36.104: \"Evolved Universal Terrestrial Radio Access (E-UTRA);
Base Station (BS) radio transmission and reception\".
[3] 3GPP TS 36.101: \"Evolved Universal Terrestrial Radio Access (E-UTRA);
User Equipment (UE) radio transmission and reception\".
[4] 3GPP TS 36.213: \"Evolved Universal Terrestrial Radio Access (E-UTRA);
Physical layer procedures\".
[5] 3GPP TS 36.212: \"Evolved Universal Terrestrial Radio Access (E-UTRA);
Multiplexing and channel coding\".
[6] 3GPP TS 38.104: \"NR; Base Station (BS) radio transmission and
reception\".
[7] 3GPP TS 38.213: \"NR; Physical layer procedures for control\".
[8] 3GPP TS 38.214: \"NR; Physical layer procedures for data\".
[9] 3GPP TS 38.300: \"NR; NR and NG-RAN Overall Description; Stage 2\".
# 3 Definitions, symbols and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
TR 21.905 [1] apply. A term defined in the present document takes precedence
over the definition of the same term, if any, in TR 21.905 [1].
## 3.2 Symbols
For the purposes of the present document, the following symbols apply:
Contention window for a given priority class
Maximum contention window for a given priority class
Minimum contention window for a given priority class
Maximum channel occupancy time for a given priority class
Maximum Uplink channel occupancy time for a given priority class
Energy detection threshold
Maximum energy detection threshold
## 3.3 Abbreviations
For the purposes of the present document, the abbreviations given in TR 21.905
[1] and the following apply. An abbreviation defined in the present document
takes precedence over the definition of the same abbreviation, if any, in TR
21.905 [1].
AUL-DFI Autonomous UL Downlink feedback indication
CAPC Channel access priority class
COT Channel Occupancy Time
LAA Licensed Assisted Access
MCOT Maximum Channel Occupancy Time
# 4 Channel access procedure
## 4.0 General
Unless otherwise noted, the definitions below are applicable for the following
terminologies used in this specification:
\- A channel refers to a carrier or a part of a carrier consisting of a
contiguous set of resource blocks (RBs) on which a channel access procedure is
performed in shared spectrum.
\- A channel access procedure is a procedure based on sensing that evaluates
the availability of a channel for performing transmissions. The basic unit for
sensing is a sensing slot with a duration $T_{\text{sl}} = 9\mu s$. The
sensing slot duration $T_{\text{sl}}$ is considered to be idle if an eNB/gNB
or a UE senses the channel during the sensing slot duration, and determines
that the detected power for at least $4\mu s$ within the sensing slot duration
is less than energy detection threshold $X_{\text{Thresh}}$. Otherwise, the
sensing slot duration $T_{\text{sl}}$ is considered to be busy.
\- A _channel occupancy_ refers to transmission(s) on channel(s) by
eNB/gNB/UE(s) after performing the corresponding channel access procedures in
this clause.
\- A _Channel Occupancy Time_ refers to the total time for which eNB/gNB/UE
and any eNB/gNB/UE(s) sharing the channel occupancy perform transmission(s) on
a channel after an eNB/gNB/UE performs the corresponding channel access
procedures described in this clause. For determining a _Channel Occupancy
Time_ , if a transmission gap is less than or equal to $25\mu s$, the gap
duration is counted in the channel occupancy time. A channel occupancy time
can be shared for transmission between an eNB/gNB and the corresponding UE(s).
\- A _DL transmission burst_ is defined as a set of transmissions from an
eNB/gNB without any gaps greater than $16\mu s$. Transmissions from an eNB/gNB
separated by a gap of more than $16\mu s$ are considered as separate DL
transmission bursts. An eNB/gNB can transmit transmission(s) after a gap
within a _DL transmission burst_ without sensing the corresponding channel(s)
for availability.
\- A _UL transmission burst_ is defined as a set of transmissions from a UE
without any gaps greater than $16\mu s$. Transmissions from a UE separated by
a gap of more than 16$\mu$s are considered as separate UL transmission bursts.
A UE can transmit transmission(s) after a gap within a _UL transmission burs_
t without sensing the corresponding channel(s) for availability.
\- A _discovery burst_ refers to a DL transmission burst including a set of
signal(s) and/or channel(s) confined within a window and associated with a
duty cycle. The _discovery burst_ can be any of the following:
\- Transmission(s) initiated by an eNB that includes a primary synchronization
signal (PSS), secondary synchronization signal (SSS) and cell-specific
reference signal(s)(CRS) and may include non-zero power CSI reference signals
(CSI-RS).
\- Transmission(s) initiated by a gNB that includes at least an SS/PBCH block
consisting of a primary synchronization signal (PSS), secondary
synchronization signal (SSS), physical broadcast channel (PBCH) with
associated demodulation reference signal (DM-RS) and may also include CORESET
for PDCCH scheduling PDSCH with SIB1, and PDSCH carrying SIB1 and/or non-zero
power CSI reference signals (CSI-RS).
## 4.1 Downlink channel access procedures
An eNB operating LAA Scell(s) on channel(s) and a gNB performing
transmission(s) on channel(s) shall perform the channel access procedures
described in this clause for accessing the channel(s) on which the
transmission(s) are performed.
In this clause, $X_{Th\text{res}h}\ $ for sensing is adjusted as described in
clause 4.1.5 when applicable.
A gNB performs channel access procedures in this clause unless the higher
layer parameter _channelAccessMode-r16_ is provided and _channelAccessMode-r16
=\' semiStatic\'._
### 4.1.1 Type 1 DL channel access procedures
This clause describes channel access procedures to be performed by an eNB/gNB
where the time duration spanned by the sensing slots that are sensed to be
idle before a downlink transmission(s) is random. The clause is applicable to
the following transmissions:
\- Transmission(s) initiated by an eNB including PDSCH/PDCCH/EPDCCH, or
\- Any transmission(s) initiated by a gNB.
The eNB/gNB may transmit a transmission after first sensing the channel to be
idle during the sensing slot durations of a defer duration $T_{d}$ and after
the counter $N$ is zero in step 4. The counter $N$ is adjusted by sensing the
channel for additional sensing slot duration(s) according to the steps below:
1) set $N = N_{\text{init}}$, where $N_{\text{init}}$ is a random number
uniformly distributed between 0 and $CW_{p}$, and go to step 4;
2) if $N > 0$ and the eNB/gNB chooses to decrement the counter, set $N = N -
1$;
3) sense the channel for an additional sensing slot duration, and if the
additional sensing slot duration is idle, go to step 4; else, go to step 5;
4) if $N = 0$, stop; else, go to step 2.
5) sense the channel until either a busy sensing slot is detected within an
additional defer duration $T_{d}$ or all the sensing slots of the additional
defer duration $T_{d}$ are detected to be idle;
6) if the channel is sensed to be idle during all the sensing slot durations
of the additional defer duration $T_{d}$, go to step 4; else, go to step 5;
If an eNB/gNB has not transmitted a transmission after step 4 in the procedure
above, the eNB/gNB may transmit a transmission on the channel, if the channel
is sensed to be idle at least in a sensing slot duration $T_{\text{sl}}$ when
the eNB/gNB is ready to transmit and if the channel has been sensed to be idle
during all the sensing slot durations of a defer duration $T_{d}$ immediately
before this transmission. If the channel has not been sensed to be idle in a
sensing slot duration $T_{\text{sl}}$ when the eNB/gNB first senses the
channel after it is ready to transmit or if the channel has been sensed to be
not idle during any of the sensing slot durations of a defer duration $T_{d}$
immediately before this intended transmission, the eNB/gNB proceeds to step 1
after sensing the channel to be idle during the sensing slot durations of a
defer duration $T_{d}$.
The defer duration $T_{d}$ consists of duration $T_{f} = 16\text{μs}$
immediately followed by $m_{p}$ consecutive sensing slot durations
$T_{\text{sl}}$, and $T_{f}$ includes an idle sensing slot duration
$T_{\text{sl}}$ at start of $T_{f}$.
$CW_{{\min,}p} \leq CW_{p} \leq CW_{{\max,}p}$is the contention window.
$CW_{p}$ adjustment is described in clause 4.1.4.
$CW_{{\min,}p}$ and $CW_{{\max,}p}$ are chosen before step 1 of the procedure
above.
$m_{p}$, $CW_{{\min,}p}$, and $CW_{{\max,}p}$ are based on a channel access
priority class $p$ associated with the eNB/gNB transmission, as shown in Table
4.1.1-1.
An eNB/gNB shall not transmit on a channel for a _Channel Occupancy Time_ that
exceeds $T_{m{\cot,}p}$ where the channel access procedures are performed
based on a channel access priority class $p$ associated with the eNB/gNB
transmissions, as given in Table 4.1.1-1.
If an eNB/gNB transmits discovery burst(s) as described in clause 4.1.2 when
$N > 0$ in the procedure above, the eNB/gNB shall not decrement $N$ during the
sensing slot duration(s) overlapping with discovery burst(s).
A gNB may use any channel access priority class for performing the procedures
above to transmit transmission(s) including discovery burst(s) satisfying the
conditions described in this clause.
A gNB shall use a channel access priority class applicable to the unicast user
plane data multiplexed in PDSCH for performing the procedures above to
transmit transmission(s) including unicast PDSCH with user plane data.
For $p = 3$ and $p = 4$ , if the absence of any other technology sharing the
channel can be guaranteed on a long term basis (e.g. by level of regulation),
$T_{m{\cot,}p} = 10\text{ms}$, otherwise, $T_{m{\cot,}p} = 8\text{ms}$.
Table 4.1.1-1: Channel Access Priority Class (CAPC)
Channel Access Priority Class ($\mathbf{p}$) $$\mathbf{m}_{\mathbf{p}}$$
$$\mathbf{C}\mathbf{W}_{\mathbf{min,}\mathbf{p}}$$
$$\mathbf{C}\mathbf{W}_{\mathbf{max,}\mathbf{p}}$$
$$\mathbf{T}_{\mathbf{m}\mathbf{cot,}\mathbf{p}}$$ allowed
$\mathbf{C}\mathbf{W}_{\mathbf{p}}$sizes
* * *
1 1 3 7 2 ms {3,7} 2 1 7 15 3 ms {7,15} 3 3 15 63 8 or 10 ms {15,31,63} 4 7 15
1023 8 or 10 ms {15,31,63,127,255,511,1023}
#### 4.1.1.1 Regional limitations on channel occupancy time
In Japan, if an eNB/gNB has transmitted a transmission after $N = 0$ in step 4
of the procedure above, the eNB/gNB may transmit the next continuous
transmission, for duration of maximum $T_{j} = 4ms$, immediately after sensing
the channel to be idle for at least a sensing interval of $T_{\text{js}} =
34\mu s$ and if the total sensing and transmission time is not more than $1000
\cdot T_{\text{mcot}} + \left\lceil \frac{T_{\text{mcot}}}{T_{j}} - 1
\right\rceil \cdot T_{\text{js}}\ \mu s$. The sensing interval $T_{\text{js}}$
consists of duration $T_{f} = 16\text{μs}$ immediately followed by two sensing
slots and $T_{f}$ includes an idle sensing slot at start of $T_{f}$. The
channel is considered to be idle for $T_{\text{js}}$ if it is sensed to be
idle during the sensing slot durations of $T_{\text{js}}$.
### 4.1.2 Type 2 DL channel access procedures
This clause describes channel access procedures to be performed by an eNB/gNB
where the time duration spanned by sensing slots that are sensed to be idle
before a downlink transmission(s) is deterministic.
If an eNB performs Type 2 DL channel access procedures, it follows the
procedures described in clause 4.1.2.1.
Type 2A channel access procedures as described in clause 4.1.2.1 are only
applicable to the following transmission(s) performed by an eNB/gNB:
\- Transmission(s) initiated by an eNB including discovery burst and not
including PDSCH where the transmission(s) duration is at most $1ms$, or
\- Transmission(s) initiated by a gNB with only discovery burst or with
discovery burst multiplexed with non-unicast information, where the
transmission(s) duration is at most $1ms$, and the discovery burst duty cycle
is at most $\frac{1}{20}$, or
\- Transmission(s) by an eNB/ gNB following transmission(s) by a UE after a
gap of $25\mu s$ in a shared channel occupancy as described in clause 4.1.3.
Type 2B or Type 2C DL channel access procedures as described in clause 4.1.2.2
and 4.1.2.3, respectively, are applicable to the transmission(s) performed by
a gNB following transmission(s) by a UE after a gap of $16\text{μs}$ or up to
$16\text{μs}$, respectively _,_ in a shared channel occupancy as described in
clause 4.1.3.
#### 4.1.2.1 Type 2A DL channel access procedures
An eNB/gNB may transmit a DL transmission immediately after sensing the
channel to be idle for at least a sensing interval $T_{sh\text{ort}_\text{dl}}
= 25\text{μs}$. $T_{sh\text{ort}_\text{dl}}\ $consists of a duration $T_{f} =
16\text{μs}$ immediately followed by one sensing slot and $T_{f}$ includes a
sensing slot at start of $T_{f}$. The channel is considered to be idle for
$T_{sh\text{ort}_\text{dl}}\ $ if both sensing slots of
$T_{sh\text{ort}_\text{dl}}$ are sensed to be idle.
#### 4.1.2.2 Type 2B DL channel access procedures
A gNB may transmit a DL transmission immediately after sensing the channel to
be idle within a duration of $T_{f} = 16\text{μs}$. $T_{f}\ $includes a
sensing slot that occurs within the last $9\text{μs}$ of $T_{f}$. The channel
is considered to be idle within the duration $T_{f}$ if the channel is sensed
to be idle for a total of at least $5\text{μs}$ with at least $4\text{μs}$ of
sensing occurring in the sensing slot.
#### 4.1.2.3 Type 2C DL channel access procedures
When a gNB follows the procedures in this clause for transmission of a DL
transmission, the gNB does not sense the channel before transmission of the DL
transmission. The duration of the corresponding DL transmission is at most
$584\text{μs}$.
### 4.1.3 DL channel access procedures in a shared channel occupancy
For the case where an eNB shares a channel occupancy initiated by a UE, the
eNB may transmit a transmission that follows an autonomous PUSCH transmission
by the UE as follows:
\- If \'COT sharing indication\' in AUL-UCI in subframe $n$ indicates \'1\',
an eNB may transmit a transmission in subframe $n + X$, where $X$ is
subframeOffsetCOT-Sharing, including PDCCH but not including PDSCH on the same
channel immediately after performing Type 2A DL channel access procedures in
clause 4.1.2.1, if the duration of the PDCCH is less than or equal to duration
of two OFDM symbols and it shall contain at least AUL-DFI or UL grant to the
UE from which the PUSCH transmission indicating COT sharing was received.
If a gNB shares a channel occupancy initiated by a UE using the channel access
procedures described in clause 4.2.1.1 on a channel, the gNB may transmit a
transmission that follows a UL transmission on scheduled resources or a PUSCH
transmission on configured resources by the UE after a gap as follows:
\- The transmission shall contain transmission to the UE that initiated the
channel occupancy and can include non-unicast and/or unicast transmissions
where any unicast transmission that includes user plane data is only
transmitted to the UE that initiated the channel occupancy.
\- If the higher layer parameters _ul-toDL-COT-SharingED-Threshold-r16_ is not
provided, the transmission shall not include any unicast transmissions with
user plane data and the transmission duration is not more than the duration of
2, 4 and 8 symbols for subcarrier spacing of 15, 30 and 60 kHz of the
corresponding channel, respectively.
\- If the gap is up to $16\mu s$, the gNB can transmit the transmission on the
channel after performing Type 2C DL channel access as described in clause
4.1.2.3.
\- If the gap is $25\mu s$ or $16\mu s$, the gNB can transmit the transmission
on the channel after performing Type 2A or Type 2B DL channel access
procedures as described in clause 4.1.2.1 and 4.1.2.2, respectively.
For the case where a gNB shares a channel occupancy initiated by a UE with
configured grant PUSCH transmission, the gNB may transmit a transmission that
follows the configured grant PUSCH transmission by the UE as follows:
\- If the higher layer parameter _ul-toDL-COT-SharingED-Threshold-r16_ is
provided, the UE is configured by _cg-COT-SharingList-r16 where cg-COT-
SharingList-r16 provides a_ table configured by higher layer. Each row of the
table provides a channel occupancy sharing information given by higher layer
parameter _CG-COT-Sharing-r16_. One row of the table is configured for
indicating that the channel occupancy sharing is not available.
\- If the \'COT sharing information\' in CG-UCI detected in slot _n_ indicates
a row index that corresponds to a _CG-COT-Sharing-r16_ that provides channel
occupancy sharing information, the gNB can share the UE channel occupancy
assuming a channel access priority class _p= channelAccessPriority-r16_ ,
starting from slot _n+O_ , where _O=offset-r16_ slots, for a duration of
_D=duration-r16_ slots where _duration-r16_ , _offset-r16_ , _and
channelAccessPriority-r16_ are higher layer parameters provided by _CG-COT-
Sharing-r16_.
\- If the higher layer parameter _ul-toDL-COT-SharingED-Threshold-r16_ is not
provided, and if \'COT sharing information\' in CG-UCI indicates \'1\', the
gNB can share the UE channel occupancy and start the DL transmission X= _cg-
COT-SharingOffset-r16_ *14 symbols from the end of the slot where CG-UCI is
detected, where _cg-COT-SharingOffset-r16_ is provided by higher layer. The
transmission shall not include any unicast transmissions with user plane data
and the transmission duration is not more than the duration of 2, 4 and 8
symbols for subcarrier spacing of 15, 30 and 60 kHz of the corresponding
channel, respectively.
For the case where a gNB uses channel access procedures as described in clause
4.1.1 to initiate a transmission and shares the corresponding channel
occupancy with a UE that transmits a transmission as described in clause
4.2.1.2, the gNB may transmit a transmission within its channel occupancy that
follows the UE\'s transmission if any gap between any two transmissions in the
gNB channel occupancy is at most $25\text{μs}$. In this case the following
applies:
\- If the gap is $25\mu s\text{\ or}16\mu s$, the gNB can transmit the
transmission on the channel after performing Type 2A or 2B DL channel access
procedures as described in clause 4.1.2.1 and 4.1.2.2, respectively.
\- If the gap is up to $16\mu s$, the gNB can transmit the transmission on the
channel after performing Type 2C DL channel access as described in clause
4.1.2.3.
### 4.1.4 Contention window adjustment procedures
If an eNB/gNB transmits transmissions including PDSCH that are associated with
channel access priority class $p$ on a channel, the eNB/gNB maintains the
contention window value $CW_{p}$ and adjusts $CW_{p}$ before step 1 of the
procedure described in clause 4.1.1 for those transmissions as described in
this clause.
#### 4.1.4.1 Contention window adjustment procedures for transmissions by eNB
If an eNB transmits transmissions including PDSCH that are associated with
channel access priority class $p$ on a channel, the eNB maintains the
contention window value $CW_{p}$ and adjusts $CW_{p}$ before step 1 of the
procedure described in clause 4.1.1 for those transmissions using the
following steps:
1) for every priority class $p \in \left{ 1,2,3,4 \right}$ set $CW_{p} =
CW_{{min,}p}$
2) if at least $Z = 80\%$ of HARQ-ACK values corresponding to PDSCH
transmission(s) in reference subframe $k$ are determined as NACK, increase
$CW_{p}$ for every priority class $p \in \left{ 1,2,3,4 \right}$ to the next
higher allowed value and remain in step 2; otherwise, go to step 1.
Reference subframe $k$ is the starting subframe of the most recent
transmission on the channel made by the eNB, for which at least some HARQ-ACK
feedback is expected to be available.
The eNB shall adjust the value of $CW_{p}$ for every priority class $p \in
\left{ 1,2,3,4 \right}$ based on a given reference subframe $k$ only once.
For determining $Z$,
\- if the eNB transmission(s) for which HARQ-ACK feedback is available start
in the second slot of subframe $k$, HARQ-ACK values corresponding to PDSCH
transmission(s) in subframe $k + 1$ are also used in addition to the HARQ-ACK
values corresponding to PDSCH transmission(s) in subframe $k$.
\- if the HARQ-ACK values correspond to PDSCH transmission(s) on an LAA SCell
that are assigned by (E)PDCCH transmitted on the same LAA SCell,
\- if no HARQ-ACK feedback is detected for a PDSCH transmission by the eNB, or
if the eNB detects \'DTX\', \'NACK/DTX\' or \'any\' state, it is counted as
NACK.
\- if the HARQ-ACK values correspond to PDSCH transmission(s) on an LAA SCell
that are assigned by (E)PDCCH transmitted on another serving cell,
\- if the HARQ-ACK feedback for a PDSCH transmission is detected by the eNB,
\'NACK/DTX\' or \'any\' state is counted as NACK, and \'DTX\' state is
ignored.
\- if no HARQ-ACK feedback is detected for a PDSCH transmission by the eNB
\- if PUCCH format 1b with channel selection is expected to be used by the UE,
\'NACK/DTX\' state corresponding to \'no transmission\' as described in
Clauses 10.1.2.2.1, 10.1.3.1 and 10.1.3.2.1 is counted as NACK, and \'DTX\'
state corresponding to \'no transmission\' is ignored in [4].
\- Otherwise, the HARQ-ACK for the PDSCH transmission is ignored.
\- if a PDSCH transmission has two codewords, the HARQ-ACK value of each
codeword is considered separately
\- bundled HARQ-ACK across M subframes is considered as M HARQ-ACK responses.
If the eNB transmits transmissions including PDCCH/EPDCCH with DCI format
0A/0B/4A/4B and not including PDSCH that are associated with channel access
priority class $p$ on a channel starting from time $t_{0}$, the eNB maintains
the contention window value $CW_{p}$ and adjusts $CW_{p}$ before step 1 of the
procedure described in clause 4.1.1 for those transmissions using the
following steps:
1) for every priority class $p \in \ \left{ 1,2,3,4 \right}$ set $CW_{p} =
CW_{{min,}p}$
2) if less than 10% of the UL transport blocks scheduled by the eNB using Type
2 channel access procedure (described in clause 4.2.1.2) in the time interval
between $t_{0}$ and $t_{0} + T_{\text{CO}}$ have been received successfully,
increase $CW_{p}$ for every priority class $p \in \left{ 1,2,3,4 \right}$ to
the next higher allowed value and remain in step 2; otherwise, go to step 1.
$T_{\text{CO}}$ is computed as described in clause 4.2.1.0.3.
#### 4.1.4.2 Contention window adjustment procedures for DL transmissions by
gNB
If a gNB transmits transmissions including PDSCH that are associated with
channel access priority class $p$ on a channel, the gNB maintains the
contention window value $CW_{p}$ and adjusts $CW_{p}$ before step 1 of the
procedure described in clause 4.1.1 for those transmissions using the
following steps:
1) For every priority class $p \in \left{ 1,2,3,4 \right},\ $set $CW_{p} =
CW_{{\min,}p}$.
2) If HARQ-ACK feedback is available after the last update of $CW_{p}$ , go to
step 3. Otherwise, if the gNB transmission after procedure described in clause
4.1.1 does not include a retransmission or is transmitted within a duration
$T_{w}$ from the end of the _reference duration_ corresponding to the earliest
DL channel occupancy after the last update of $CW_{p}$, go to step 5;
otherwise go to step 4.
3) The HARQ-ACK feedback(s) corresponding to PDSCH(s) in the reference
duration for the latest DL channel occupancy for which HARQ-ACK feedback is
available is used as follows:
a. If at least one HARQ-ACK feedback is \'ACK\' for PDSCH(s) with transport
block based feedback or at least 10% of HARQ-ACK feedbacks is \'ACK\' for
PDSCH CBGs transmitted at least partially on the channel with code block group
based feedback, go to step 1; otherwise go to step 4.
4) Increase $CW_{p}$ for every priority class $p \in \left{ 1,2,3,4 \right}$
to the next higher allowed value.
5) For every priority class $p \in \left{ 1,2,3,4 \right}$_,_ maintain
$CW_{p}$ as it is; go to step 2.
The _reference duration_ and duration $T_{w}$ in the procedure above are
defined as follows:
\- The _reference duration_ corresponding to a channel occupancy initiated by
the gNB including transmission of PDSCH(s) is defined in this clause as a
duration starting from the beginning of the channel occupancy until the end of
the first slot where at least one unicast PDSCH is transmitted over all the
resources allocated for the PDSCH, or until the end of the first transmission
burst by the gNB that contains unicast PDSCH(s) transmitted over all the
resources allocated for the PDSCH, whichever occurs earlier. If the channel
occupancy includes a unicast PDSCH, but it does not include any unicast PDSCH
transmitted over all the resources allocated for that PDSCH, then, the
duration of the first transmission burst by the gNB within the channel
occupancy that contains unicast PDSCH(s) is the _reference duration_ for CWS
adjustment.
\- $T_{w} = max(T_{A},T_{B} + 1ms)$ where $T_{B}$ is the duration of the
transmission burst from start of the _reference duration_ in $\text{ms}$ and
$T_{A} = 5ms$ if the absence of any other technology sharing the channel can
not be guaranteed on a long-term basis (e.g. by level of regulation), and
$T_{A} = 10ms$ otherwise.
If a gNB transmits transmissions using Type 1 channel access procedures
associated with the channel access priority class $p$ on a channel and the
transmissions are not associated with explicit HARQ-ACK feedbacks by the
corresponding UE(s), the gNB adjusts $CW_{p}$ before step 1 in the procedures
described in clause 4.1.1, using the latest $CW_{p}$ used for any DL
transmissions on the channel using Type 1 channel access procedures associated
with the channel access priority class $p$. If the corresponding channel
access priority class $p$ has not been used for any DL transmissions on the
channel, $CW_{p} = CW_{{\min,}p}$ is used.
#### 4.1.4.3 Common procedures for CWS adjustments for DL transmissions
The following applies to the procedures described in clauses 4.1.4.1 and
4.1.4.2:
\- If $CW_{p} = CW_{{\max,}p}$, the next higher allowed value for adjusting
$CW_{p}$ is $CW_{{\max,}p}$.
\- If the $CW_{p} = CW_{{max,}p}$ is consecutively used $K$ times for
generation of $N_{\text{init}}$, $CW_{p}$ is reset to $CW_{{min,}p}$ only for
that priority class $p$ for which $CW_{p} = CW_{{max,}p}$ is consecutively
used $K$ times for generation of $N_{\text{init}}$. $K$ is selected by eNB/gNB
from the set of values {1, 2, ...,8} for each priority class $p \in \left{
1,2,3,4 \right}$.
### 4.1.5 Energy detection threshold adaptation procedures
An eNB/gNB accessing a channel on which transmission(s) are performed, shall
set the energy detection threshold ($X_{\text{Thresh}}$) to be less than or
equal to the maximum energy detection threshold $X_{\text{Thresh_max}}$.
$X_{\text{Thresh_max}}$ is determined as follows:
\- If the absence of any other technology sharing the channel can be
guaranteed on a long-term basis (e.g. by level of regulation) then:
\- $X_{\text{Thresh_max}} = \min\begin{Bmatrix} \& T_{\max} + 10\text{dB}, \
\& X_{r} \ \end{Bmatrix}$
\- $X_{r}$ is maximum energy detection threshold defined by regulatory
requirements in dBm when such requirements are defined, otherwise $X_{r} =
T_{\max} + 10dB$;
\- otherwise,
\- $X_{\text{Thresh_max}} = \max\begin{Bmatrix} \& \- 72 + 10 \cdot \log
10(BWMHz\ /20MHz)\ dBm, \ \&\text{min}\begin{Bmatrix} \& T_{\text{max}}, \
\&{T_{\text{max}} - T_{A} + \left( P_{H} + 10 \cdot \log 10(BWMHz\ /20MHz) -
P_{\text{TX}} \right)}_{} \ \end{Bmatrix} \ \end{Bmatrix}$
where:
\- $T_{A}$=5dB for transmissions including discovery burst(s) as described in
clause 4.1.2, and $T_{A} = 10dB$ otherwise;
\- $P_{H} = 23dBm$;
\- $P_{\text{TX}}$ is set to the maximum eNB/gNB output power in dBm for the
channel;
\- eNB/gNB uses the set maximum transmission power over a single channel
irrespective of whether single channel or multi-channel transmission is
employed
\- $T_{\text{max}}\text{(dBm)=}{10 \cdot log}10\left( 3.16228 \cdot 10^{-
8}(mW/MHz)\mspace{6mu} \cdot \mspace{6mu} BWMHz\mspace{6mu}(MHz) \right)$;
\- $\text{BWMHz}$ is the single channel bandwidth in MHz.
### 4.1.6 Channel access procedures for transmission(s) on multiple channels
An eNB/gNB can access multiple channels on which transmission(s) are
performed, according to one of the Type A or Type B procedures described in
this Clause.
#### 4.1.6.1 Type A multi-channel access procedures
An eNB/gNB shall perform channel access on each channel $c_{i} \in C$,
according to the procedures described in clause 4.1.1, where $C$ is a set of
channels on which the eNB/gNB intends to transmit, and $i = 0,1,\ldots q - 1$,
and $q$ is the number of channels on which the eNB/gNB intends to transmit.
The counter $N$ described in clause 4.1.1 is determined for each channel
$c_{i}$ and is denoted as $N_{c_{i}}$. $N_{c_{i}}$ is maintained according to
clause 4.1.6.1.1 or 4.1.6.1.2.
If a gNB configures a carrier without intra-cell guard bands as described in
clause 7 in [8], the gNB may not transmit on channel $c_{i} \in C$ within the
bandwidth of the carrier, if the gNB fails to access any of the channels of
the carrier bandwidth.
##### 4.1.6.1.1 Type A1 multi-channel access procedures
Counter $N$ as described in clause 4.1.1 is independently determined for each
channel $c_{i}$ and is denoted as $N_{c_{i}}$.
If the absence of any other technology sharing the channel cannot be
guaranteed on a long term basis (e.g. by level of regulation), when the
eNB/gNB ceases transmission on any one channel $c_{j} \in C$, for each channel
$c_{i} \neq c_{j}$, the eNB/gNB can resume decrementing $N_{c_{i}}$ when idle
sensing slots are detected either after waiting for a duration of $4 \cdot
T_{\text{sl}}$, or after reinitialising $N_{c_{i}}$.
For determining $CW_{p}$ for channel $c_{i}$, any PDSCH that fully or
partially overlaps with channel $c_{i}$, is used in the procedures described
in clause 4.1.4.2.
##### 4.1.6.1.2 Type A2 multi-channel access procedures
Counter $N$ is determined as described in clause 4.1.1 for channel $c_{j} \in
C$, and is denoted as $N_{c_{j}}$, where $c_{j}$ is the channel that has the
largest $CW_{p}$ value. For each channel $c_{i}$, $N_{c_{i}} = N_{c_{j}}$.
When the eNB/gNB ceases transmission on any one channel for which $N_{c_{i}}$
is determined, the eNB/gNB shall reinitialise $N_{c_{i}}$ for all channels.
For determining $CW_{p}$ for channel $c_{i}$, any PDSCH that fully or
partially overlaps with channel $c_{i}$, is used in the procedures described
in clause 4.1.4.2.
#### 4.1.6.2 Type B multi-channel access procedure
A channel $c_{j} \in C$ is selected by the eNB/gNB as follows:
\- the eNB/gNB selects $c_{j}$ by uniformly randomly choosing $c_{j}$ from $C$
before each transmission on multiple channels $c_{i} \in C$, or
\- the eNB/gNB selects $c_{j}$ no more frequently than once every 1 second,
where $C$ is a set of channels on which the eNB/gNB intends to transmit, $i =
0,1,\ldots q - 1$, and $q$ is the number of channels on which the eNB intends
to transmit.
To transmit on channel $c_{j}$
\- the eNB/gNB shall perform channel access on channel $c_{j}$ according to
the procedures described in clause 4.1.1 with the modifications described in
clause 4.1.6.2.1 or 4.1.6.2.2.
To transmit on channel $c_{i} \neq c_{j}$, $c_{i} \in C$
\- for each channel $c_{i}$, the eNB/gNB shall sense the channel $c_{i}$ for
at least a sensing interval $T_{\text{mc}} = 25\mu s$ immediately before
transmitting on channel $c_{j}$, and the eNB/gNB may transmit on channel
$c_{i}$ immediately after sensing the channel $c_{i}$ to be idle for at least
the sensing interval $T_{\text{mc}}$. The channel $c_{i}$ is considered to be
idle for $T_{\text{mc}}$ if the channel is sensed to be idle during all the
time durations in which such idle sensing is performed on the channel $c_{j}$
in given interval $T_{\text{mc}}$.
The eNB/gNB shall not transmit a transmission on a channel $c_{i} \neq c_{j}$,
$c_{i} \in C$, for a period exceeding $T_{m{\cot,}p}$ as given in Table
4.1.1-1, where the value of $T_{m{\cot,}p}$ is determined using the channel
access parameters used for channel $c_{j}$.
For the procedures in this clause, the channel frequencies of the set of
channels $C$ selected by gNB, is a subset of one of the sets of channel
frequencies defined in [6].
If a gNB configures a carrier without intra-cell guard band(s) as described in
clause 7 in [8], the gNB may not transmit on channel $c_{i} \in C$ within the
bandwidth of the carrier, if the gNB fails to access any of the channels of
the carrier bandwidth.
##### 4.1.6.2.1 Type B1 multi-channel access procedure
A single $CW_{p}$ value is maintained for the set of channels $C$.
For determining $CW_{p}$ for channel access on channel $c_{j}$, step 2 of the
procedure described in clause 4.1.4.1 is modified as follows
\- if at least $Z = 80\%$ of HARQ-ACK values corresponding to PDSCH
transmission(s) in reference subframe $k$ of all channels $c_{i} \in C$ are
determined as NACK, increase $CW_{p}$ for each priority class $p \in \left{
1,2,3,4 \right}$ to the next higher allowed value; otherwise, go to step 1.
For determining $CW_{p}$ for a set of channels $C$, any PDSCH that fully or
partially overlaps with any channel $c_{i} \in C$, is used in the procedure
described in clause 4.1.4.2.
##### 4.1.6.2.2 Type B2 multi-channel access procedure
A $CW_{p}$ value is maintained independently for each channel $c_{i} \in C$
using the procedure described in clause 4.1.4.
For determining $CW_{p}$ for channel $c_{i}$, any PDSCH that fully or
partially overlaps with channel $c_{i}$, is used in the procedure described in
clause 4.1.4.2.
For determining $N_{\text{init}}$ for channel $c_{j}$, $CW_{p}$ value of
channel $c_{j1} \in C$ is used, where $c_{j1}$ is the channel with largest
$CW_{p}$ among all channels in set $C$.
## 4.2 Uplink channel access procedures
A UE performing transmission(s) on LAA Scell(s), an eNB scheduling or
configuring UL transmission(s) for a UE performing transmission(s) on LAA
Scell(s), and a UE performing transmission(s) on channel(s) and a gNB
scheduling or configuring UL transmission(s) for a UE performing transmissions
on channel(s) shall perform the procedures described in this clause for the UE
to access the channel(s) on which the transmission(s) are performed.
In this clause, transmissions from a UE are considered as separate UL
transmissions, irrespective of having a gap between transmissions or not, and
$X_{\text{Thresh}}$ for sensing is adjusted as described in clause 4.2.3 when
applicable.
A UE performs channel access procedures in this clause unless the higher layer
parameter _channelAccessMode-r16_ is provided and _channelAccessMode-r16 =\'
semiStatic\'_.
If a UE fails to access the channel(s) prior to an intended UL transmission to
a gNB, Layer 1 notifies higher layers about the channel access failure.
### 4.2.1 Channel access procedures for uplink transmission(s)
A UE can access a channel on which UL transmission(s) are performed according
to one of Type 1 or Type 2 UL channel access procedures. Type 1 channel access
procedure is described in clause 4.2.1.1. Type 2 channel access procedure is
described in clause 4.2.1.2.
If a UL grant scheduling a PUSCH transmission indicates Type 1 channel access
procedures, the UE shall use Type 1 channel access procedures for transmitting
transmissions including the PUSCH transmission unless stated otherwise in this
clause.
A UE shall use Type 1 channel access procedures for transmitting transmissions
including the autonomous or configured grant PUSCH transmission on configured
UL resources unless stated otherwise in this clause.
If a UL grant scheduling a PUSCH transmission indicates Type 2 channel access
procedures, the UE shall use Type 2 channel access procedures for transmitting
transmissions including the PUSCH transmission unless stated otherwise in this
clause.
A UE shall use Type 1 channel access procedures for transmitting SRS
transmissions not including a PUSCH transmission. UL channel access priority
class $p = 1$ in Table 4.2.1-1 is used for SRS transmissions not including a
PUSCH.
If a DL assignment triggering SRS but not scheduling a PUCCH transmission
indicates Type 2 channel access procedures, the UE shall use Type 2 channel
access procedures.
If a UE is scheduled by an eNB/gNB to transmit PUSCH and SRS in contiguous
transmissions without any gaps in between, and if the UE cannot access the
channel for PUSCH transmission, the UE shall attempt to make SRS transmission
according to uplink channel access procedures specified for SRS transmission.
If a UE is scheduled by a gNB to transmit PUSCH and one or more SRSs by a
single UL grant in non-contiguous transmissions, or a UE is scheduled by a gNB
to transmit PUCCH and/or SRSs by a single DL assignment in non-contiguous
transmissions, the UE shall use the channel access procedure indicated by the
scheduling DCI for the first UL transmission scheduled by the scheduling DCI.
If the channel is sensed by the UE to be continuously idle after the UE has
stopped transmitting the first transmission, the UE may transmit further UL
transmissions scheduled by the scheduling DCI using Type 2 channel access
procedures or Type 2A UL channel access procedures without applying a CP
extension if the further UL transmissions are within the gNB Channel Occupancy
Time. Otherwise, if the channel sensed by the UE is not continuously idle
after the UE has stopped transmitting the first UL transmission or the further
UL transmissions are outside the gNB Channel Occupancy Time, the UE may
transmit the further UL transmissions using Type 1 channel access procedure,
without applying a CP extension.
A UE shall use Type 1 channel access procedures for PUCCH transmissions unless
stated otherwise in this clause. If a DL grant determined according to Clause
9.2.3 in [7, TS38.213] or a random access response (RAR) message for
successRAR scheduling a PUCCH transmission indicates Type 2 channel access
procedures, the UE shall use Type 2 channel access procedures.
When a UE uses Type 1 channel access procedures for PUCCH transmissions or
PUSCH only transmissions without UL-SCH, the UE shall use UL channel access
priority class $p = 1$ in Table 4.2.1-1.
A UE shall use Type 1 channel access procedure for PRACH transmissions and
PUSCH transmissions without user plane data related to random access procedure
that initiate a channel occupancy. In this case, UL channel access priority
class $p = 1$ in Table 4.2.1-1 is used for PRACH transmissions, and UL channel
access priority class used for PUSCH transmissions is determined according to
Clause 5.6.2 in [9].
When a UE uses Type 1 channel access procedures for PUSCH transmissions on
configured resource, the UE determines the corresponding UL channel access
priority $p$ in Table 4.2.1-1 following the procedures described in Clause
5.6.2 in [9].
When a UE uses Type 1 channel access procedures for PUSCH transmissions with
user plane data indicated by a UL grant or related to random access procedure
where the corresponding UL channel access priority $p$ is not indicated, the
UE determines $p$ in Table 4.2.1-1 following the same procedures as for PUSCH
transmission on configured resources using Type 1 channel access procedures.
When a UE uses Type 2A, Type 2B, or Type 2C UL channel access procedures for
PUSCH transmissions indicated by a UL grant or related to random access
procedures, where the corresponding UL channel access priority $p$ is not
indicated, the UE assumes that the channel access priority class $p = 4$ is
used by the gNB for the _Channel Occupancy Time_.
A UE shall not transmit on a channel for a _Channel Occupancy Time_ that
exceeds $T_{\text{ulm}{\cot,}p}$ where the channel access procedure is
performed based on the channel access priority class $\text{p\ }$ associated
with the UE transmissions, as given in Table 4.2.1-1.
The total _Channel Occupancy Time_ of autonomous uplink transmission(s)
obtained by the channel access procedure in this clause, including the
following DL transmission if the UE sets \'COT sharing indication\' in AUL-UCI
to \'1\' in a subframe within the autonomous uplink transmission(s) as
described in Clause 4.1.3, shall not exceed $T_{\text{ulm}{\cot,}p}$, where
$T_{\text{ulm}{\cot,}p}$ is given in Table 4.2.1-1.
Table 4.2.1-1: Channel Access Priority Class (CAPC) for UL
+----------+----------+----------+----------+----------+----------+ | Channel | $$\ | $$ | $$ | $$\ | allowed | | Access | mathbf{m | \mathbf{ | \mathbf{ | mathbf{T | $\m | | Priority | }_{\math | C}\mathb | C}\mathb | }_{\math | athbf{C} | | Class | bf{p}}$$ | f{W}_{\m | f{W}_{\m | bf{\text | \mathbf{ | | ($\mat | | athbf{mi | athbf{ma | {ulm}}\m | W}_{\mat | | hbf{p}$) | | n,}\math | x,}\math | athbf{co | hbf{p}}$ | | | | bf{p}}$$ | bf{p}}$$ | t,}\math | sizes | | | | | | bf{p}}$$ | | +==========+==========+==========+==========+==========+==========+ | 1 | 2 | 3 | 7 | 2 ms | {3,7} | +----------+----------+----------+----------+----------+----------+ | 2 | 2 | 7 | 15 | 4 ms | {7,15} | +----------+----------+----------+----------+----------+----------+ | 3 | 3 | 15 | 1023 | 6ms or | {15 | | | | | | 10 ms | ,31,63,1 | | | | | | | 27,255,5 | | | | | | | 11,1023} | +----------+----------+----------+----------+----------+----------+ | 4 | 7 | 15 | 1023 | 6ms or | {15 | | | | | | 10 ms | ,31,63,1 | | | | | | | 27,255,5 | | | | | | | 11,1023} | +----------+----------+----------+----------+----------+----------+ | NOTE 1: | | | | | | | For | | | | | | | $p | | | | | | | = 3,4$, | | | | | | | $T_{\t | | | | | | | ext{ulm} | | | | | | | {\cot,}p | | | | | | | } = 10\t | | | | | | | ext{ms}$ | | | | | | | if the | | | | | | | higher | | | | | | | layer | | | | | | | p | | | | | | | arameter | | | | | | | absence | | | | | | | OfAnyOth | | | | | | | erTechno | | | | | | | logy-r14 | | | | | | | or | | | | | | | absence | | | | | | | OfAnyOth | | | | | | | erTechno | | | | | | | logy-r16 | | | | | | | is | | | | | | | provided | | | | | | | , | | | | | | | ot | | | | | | | herwise, | | | | | | | $T_{\t | | | | | | | ext{ulm} | | | | | | | {\cot,}p | | | | | | | } = 6\te | | | | | | | xt{ms}$. | | | | | | | | | | | | | | NOTE 2: | | | | | | | When | | | | | | | $T_{\ | | | | | | | text{ulm | | | | | | | }{\cot,} | | | | | | | p} = 6\t | | | | | | | ext{ms}$ | | | | | | | it may | | | | | | | be | | | | | | | i | | | | | | | ncreased | | | | | | | to | | | | | | | $8\t | | | | | | | ext{ms}$ | | | | | | | by | | | | | | | i | | | | | | | nserting | | | | | | | one or | | | | | | | more | | | | | | | gaps. | | | | | | | The | | | | | | | minimum | | | | | | | duration | | | | | | | of a gap | | | | | | | shall be | | | | | | | $100\te | | | | | | | xt{μs}$. | | | | | | | The | | | | | | | maximum | | | | | | | duration | | | | | | | before | | | | | | | i | | | | | | | ncluding | | | | | | | any such | | | | | | | gap | | | | | | | shall be | | | | | | | $6\te | | | | | | | xt{ms}$. | | | | | | +----------+----------+----------+----------+----------+----------+
#### 4.2.1.0 Channel access procedures and UL related signaling
##### 4.2.1.0.0 Channel access procedures upon detection of a common DCI
If a UE detects \'UL duration and offset\' field in DCI Format 1C as described
in clause 5.3.3.1.4 of [5], the following are applicable:
\- If the \'UL duration and offset\' field indicates an \'UL offset\' $l$ and
an \'UL duration\' $d$ for subframe $n$, then the scheduled UE may use channel
access procedures Type 2 for transmissions in subframes $n + l + i$ where $i =
0,1,\ldots d - 1$, irrespective of the channel access Type signalled in the UL
grant for those subframes, if the end of UE transmission occurs in or before
subframe $n + l + d - 1$.
\- If the \'UL duration and offset\' field indicates an \'UL offset\' $l$ and
an \'UL duration\' $d$ for subframe $n$ and the \'COT sharing indication for
AUL\' field is set to \'1\', then a UE configured with autonomous UL may use
channel access procedures Type 2 for autonomous UL transmissions assuming any
priority class in subframes $n + l + i$ where $i = 0,1,\ldots d - 1$, if the
end of UE autonomous UL transmission occurs in or before subframe $n + l + d -
1$ and the autonomous UL transmission between $n + l$ and $n + l + d - 1$
shall be contiguous.
\- If the \'UL duration and offset\' field indicates an \'UL offset\' $l$ and
an \'UL duration\' $d$ for subframe $n$ and the \'COT sharing indication for
AUL\' field is set to \'0\', then a UE configured with autonomous UL shall not
transmit autonomous UL in subframes $n + l + i$ where $i = 0,1,\ldots d - 1$.
If a UE determines the duration in time domain and the location in frequency
domain of a remaining channel occupancy initiated by the gNB from a DCI format
2_0 as described in clause 11.1.1 of [7], the following is applicable:
\- The UE may switch from Type 1 channel access procedures as described in
clause 4.2.1.1 to Type 2A channel access procedures as described in clause
4.2.1.2.1 for its corresponding UL transmissions within the determined
duration in time and location in frequency domain of the remaining channel
occupancy. In this case, if the UL transmissions are PUSCH transmissions on
configured resources, the UE may assume any priority class for the channel
occupancy shared with the gNB.
##### 4.2.1.0.1 Channel access procedures for consecutive UL transmission(s)
For contiguous UL transmission(s), the following are applicable:
\- If a UE is scheduled to transmit a set of UL transmissions using one or
more UL grant(s) or DL assignment(s), and
\- if the UE cannot access the channel for a transmission in the set prior to
the last transmission according to one of Type 1, Type 2, or Type 2A UL
channel access procedures, the UE shall attempt to transmit the next
transmission according to the channel access type indicated in the
corresponding UL grant or DL assignment;
\- if the UE cannot access the channel for a transmission in the set prior to
the last transmission according to Type 2B UL channel access procedure, the UE
shall attempt to transmit the next transmission according to Type 2A UL
channel access procedure.
\- If a UE is scheduled by a gNB to transmit a set of UL transmissions
including PUSCH or SRS symbol(s) using a UL grant, the UE shall not apply a CP
extension for the remaining UL transmissions in the set after the first UL
transmission after accessing the channel.
\- If a UE is scheduled to transmit a set of consecutive UL transmissions
without gaps including PUSCH using one or more UL grant(s), PUCCH using one or
more DL grant(s), or SRS with one or more DL grant(s) or UL grant(s) and the
UE transmits one of the scheduled UL transmissions in the set after accessing
the channel according to one of Type 1, Type 2, Type 2A, Type 2B or Type 2C UL
channel access procedures, the UE may continue transmission of the remaining
UL transmissions in the set, if any.
\- If a UE is configured to transmit a set of consecutive PUSCH or SRS
transmissions on resources configured by the gNB, the time domain resource
configuration defines multiple transmission occasions, and if the UE cannot
access the channel according to Type 1 UL channel access procedure for
transmitting in a transmission occasion prior to the last transmission
occasion, the UE shall attempt to transmit in the next transmission occasion
according to Type 1 UL channel access procedure. If the UE transmits in one of
the multiple transmission occasions after accessing the channel according to
Type 1 UL channel access procedure, the UE may continue transmission in the
remaining transmission occasions in the set, wherein each transmission
occasion starts at the starting symbol of a configured grant PUSCH within the
duration of the COT.
\- If a UE is configured by the gNB to transmit a set of consecutive UL
transmissions without gaps including PUSCH, periodic PUCCH, or periodic SRS
and the UE transmits one of the configured UL transmissions in the set after
accessing the channel according to Type 1 UL channel access procedures, the UE
may continue transmission of the remaining UL transmissions in the set, if
any.
\- A UE is not expected to be indicated with different channel access types
for any consecutive UL transmissions without gaps in between the
transmissions, except if Type 2B or Type 2C UL channel access procedures are
identified for the first of the consecutive UL transmissions.
For UL transmission(s) with multiple starting positions scheduled by eNB, the
following are applicable:
\- If a UE is scheduled by an eNB to transmit transmissions including PUSCH
Mode 1 using the Type 1 channel access procedure indicated in DCI, and if the
UE cannot access the channel for a transmission according to the PUSCH
starting position indicated in the DCI, the UE shall attempt to make a
transmission at symbol 7 in the same subframe according to Type 1 channel
access procedure. There is no limit on the number of attempts the UE can make
using Type 1 channel access procedure.
\- If a UE is scheduled by an eNB to transmit transmissions including PUSCH
Mode 1 using the Type 2 channel access procedure indicated in DCI, and if the
UE cannot access the channel for a transmission according to the PUSCH
starting position indicated in the DCI, the UE may attempt to make a
transmission at symbol 7 in the same subframe and according to Type 2 channel
access procedure. The number of attempts the UE should make within the
consecutively scheduled subframes including the transmission is limited to $w
+ 1$, where $w$ is the number of consecutively scheduled subframes using Type
2 channel access procedure.
For contiguous UL transmissions(s) including a transmission pause, the
following are applicable:
\- If a UE is scheduled to transmit a set of consecutive UL transmissions
without gaps using one or more UL grant(s), and if the UE has stopped
transmitting during or before one of these UL transmissions in the set and
prior to the last UL transmission in the set, and if the channel is sensed by
the UE to be continuously idle after the UE has stopped transmitting, the UE
may transmit a later UL transmission in the set using Type 2 channel access
procedures or Type 2A UL channel access procedures without applying a CP
extension.
\- If a channel sensed by a UE is not continuously idle after the UE has
stopped transmitting, the UE may transmit a later UL transmission in the set
using Type 1 channel access procedure with the UL channel access priority
class indicated in the DCI corresponding to the UL transmission.
For UL transmission(s) following autonomous UL transmission(s), the following
are applicable:
\- If a UE is scheduled by an eNB to transmit on channel $c_{i}$ by a UL grant
received on channel $c_{j}$, $i \neq j$, and if the UE is transmitting using
autonomous UL on channel $c_{i}$, the UE shall terminate the ongoing PUSCH
transmissions using the autonomous UL at least one subframe before the UL
transmission according to the received UL grant.
\- If a UE is scheduled by a UL grant received from an eNB on a channel to
transmit a PUSCH transmission(s) starting from subframe $n$ on the same
channel using Type 1 channel access procedure and if at least for the first
scheduled subframe occupies $N_{\text{RB}}^{\text{UL}}$ resource blocks and
the indicated PUSCH starting position is OFDM symbol zero, and if the UE
starts autonomous UL transmissions before subframe $n$ using Type 1 channel
access procedure on the same channel, the UE may transmit UL transmission(s)
according to the received UL grant from subframe $n$ without a gap, if the
priority class value of the performed channel access procedure is larger than
or equal to priority class value indicated in the UL grant, and the autonomous
UL transmission in the subframe preceding subframe $n$ shall end at the last
OFDM symbol of the subframe regardless of the higher layer parameter
_endingSymbolAUL_. The sum of the lengths of the autonomous UL transmission(s)
and the scheduled UL transmission(s) shall not exceed the maximum channel
occupancy time corresponding to the priority class value used to perform the
autonomous uplink channel access procedure. Otherwise, the UE shall terminate
the ongoing autonomous UL transmission at least one subframe before the start
of the UL transmission according to the received UL grant on the same channel.
For UL transmission(s) following configured grant UL transmission(s), the
following are applicable:
\- If a UE is scheduled to transmit UL transmission(s) starting from symbol
$i$ in slot $n$ using Type 1 channel access procedures without CP extension
with a corresponding CAPC, and if the UE starts configured grant UL
transmissions before symbol _i_ in slot $n$ using Type 1 channel access
procedures with a corresponding CAPC, and the scheduled UL transmission(s)
occupies all the RBs of the same channels occupied by the configured grant UL
transmission(s) or all the RBs of a subset thereof, the UE may directly
continue to transmit the scheduled UL transmission(s) to the corresponding
CAPC from symbol $i$ in slot $n$ without a gap, if the CAPC value of the
performed channel access procedure is larger than or equal to the CAPC value
corresponding to the scheduled UL transmission(s). The sum of the transmission
durations of the configured grant UL transmission(s) and the scheduled UL
transmission(s) shall not exceed the MCOT duration corresponding to the CAPC
value used to transmit the configured grant UL transmission(s). Otherwise, the
UE shall terminate the configured grant UL transmission(s) by dropping the
transmission on the symbols of at least the last configured grant UL
transmission before symbol $i$ in slot $n$ _and attempt to transmit the
scheduled UL transmission(s) according to the corresponding CAPC. The symbols
of the PUSCH transmission with a configured grant in a slot is dropped
according to the mechanism in Clause 11.1 of [7, TS 38.213] relative to a last
symbol of a CORESET where the UE detected the scheduling DCI. In this case, if
the UE cannot terminate the configured grant UL transmission(s), the UE
ignores the scheduling DCI._
##### 4.2.1.0.2 Conditions for maintaining Type 1 UL channel access procedures
If a UE receives a DCI indicating a UL grant scheduling a PUSCH transmission
using Type 1 channel access procedures or indicating a DL assignment
scheduling a PUCCH transmission using Type 1 channel access procedures, and if
the UE has an ongoing Type 1 channel access procedures before the PUSCH or
PUCCH transmission starting time:
\- If the UL channel access priority class value $p_{1}$ used for the ongoing
Type 1 channel access procedures is same or larger than the UL channel access
priority class value $p_{2}$ indicated in the DCI, the UE may transmit the
PUSCH transmission in response to the UL grant by accessing the channel by
using the ongoing Type 1 channel access procedure.
\- If the UL channel access priority class value $p_{1}$ used for the ongoing
Type 1 channel access procedure is smaller than the UL channel access priority
class value $p_{2}$ indicated in the DCI, the UE shall terminate the ongoing
channel access procedure.
\- The UE may transmit the PUCCH transmission in response to the DL grant by
accessing the channel by using the ongoing Type 1 channel access procedures.
##### 4.2.1.0.3 Conditions for indicating Type 2 channel access procedures
An eNB/gNB may indicate Type 2 channel access procedures in the DCI of a UL
grant or DL assignment scheduling transmission(s) including PUSCH on one or
more channels or PUCCH on a channel, respectively, as follows:
If the UL transmissions occur within the time interval starting at $t_{0}$ and
ending at $t_{0} + T_{\text{CO}}$, where
\- $T_{\text{CO}} = T_{m{\cot,}p} + T_{g}$,
\- $t_{0}$ is the time instant when the eNB/gNB has started transmission on
the carrier according to the channel access procedure described in clause
4.1.1,
\- $T_{m{cot,}p}$ value is determined by the eNB/gNB as described in clause
4.1.1,
\- $T_{g}$ is the total duration of all gaps of duration greater than $25us$
that occur between the DL transmissions of the eNB/gNB and UL transmissions
scheduled by the eNB/gNB, and between any two UL transmissions scheduled by
the eNB/gNB starting from $t_{0}$,
then,
\- the eNB/gNB may indicate Type 2 channel access procedures in the DCI if the
eNB/gNB has transmitted on the channel(s) according to the channel access
procedures described in clause 4.1.1 or the multi-channel access procedures in
clause 4.1.6, or
\- the eNB may indicate using the \'UL duration and offset\' field that the UE
may perform a Type 2 channel access procedure for transmissions(s) including
PUSCH on a channel in a subframe $n$ when the eNB has transmitted on the
channel according to the channel access procedure described in clause 4.1.1,
or
\- the eNB may indicate using the \'UL duration and offset\' field and \'COT
sharing indication for AUL\' field that a UE configured with autonomous UL may
perform a Type 2 channel access procedure for autonomous UL transmissions(s)
including PUSCH on a channel in subframe $n$ when the eNB has transmitted on
the channel according to the channel access procedure described in clause
4.1.1 and acquired the channel using the largest priority class value and the
eNB transmission includes PDSCH, or
\- the eNB/gNB may schedule UL transmissions on a channel, that follow a
transmission by the eNB/gNB on that channel with Type 2A channel access
procedures for the UL transmissions as described in clause 4.2.1.2.1 after a
duration of $25\mu s$.
The eNB/gNB shall schedule UL transmissions between $t_{0}$ and $t_{0} +
T_{\text{CO}}$ without gaps between consecutive UL transmissions if they can
be scheduled contiguously. For a UL transmission on a channel that follows a
transmission by the eNB/gNB on that channel using Type 2A channel access
procedures as described in clause 4.2.1.2.1, the UE may use Type 2A channel
access procedure for the UL transmission.
If the eNB/gNB indicates Type 2 channel access procedure for the UE in the
DCI, the eNB/gNB indicates the channel access priority class used to obtain
access to the channel in the DCI.
For indicating a Type 2 channel access procedure, if the gap is at least
$25\text{μs}$, or equal to $16\text{μs}$, or up to $16\text{μs}$, the gNB may
indicate Type 2A, or Type 2B, or Type 2C UL channel procedures, respectively,
as described in clauses 4.2.1.2.
##### 4.2.1.0.4 Channel access procedures for UL multi-channel transmission(s)
If a UE
\- is scheduled to transmit on a set of channels $C$, and if the UL
transmissions are scheduled to start transmissions at the same time on all
channels in the set of channels $C$, or
\- intends to perform an uplink transmission on configured resources on the
set of channels $C$, and if UL transmissions are configured to start
transmissions at the same time on all channels in the set of channels $C$,
the following is applicable:
\- if Type 1 channel access procedure is indicated or intended for the
scheduled or configured UL transmissions, respectively, to be transmitted on
the set of channels $C$,
\- the UE may transmit on channel $c_{i} \in C$ using Type 2A channel access
procedure as described in clause 4.2.1.2.1,
\- if the channel frequencies of the set of channels $C$ is a subset of the
sets of channel frequencies defined in clause 5.7.4 in [2], and
\- if Type 2A channel access procedure is performed on channel $c_{i}\
$immediately before the UE transmission on channel $c_{j} \in C$, $i \neq j$,
and
\- if the UE has accessed channel $c_{j}$ using Type 1 channel access
procedure as described in clause 4.2.1.1,
\- where channel $c_{j}$ is selected by the UE uniformly randomly from the set
of channels $C$ before performing Type 1 channel access procedure on any
channel in the set of channels $C$.
\- the UE may transmit on channel $c_{i} \in C$ using Type 1 channel access
procedure as described in clause 4.2.1.1
\- the UE may not transmit on channel $c_{i} \in C$ within the bandwidth of a
carrier, if the UE fails to access any of the channels, of the carrier
bandwidth, on which the UE is scheduled or configured with UL resources.
\- the UE may not transmit on a channel within the bandwidth of a carrier if
the UE is configured without intra-cell guard band(s) on an UL bandwidth part
as described in clause 7 of [8], and the UE fails to access any of the
channels of the UL bandwidth part.
#### 4.2.1.1 Type 1 UL channel access procedure
This clause describes channel access procedures by a UE where the time
duration spanned by the sensing slots that are sensed to be idle before a UL
transmission(s) is random. The clause is applicable to the following
transmissions:
\- PUSCH/SRS transmission(s) scheduled or configured by eNB/gNB, or
\- PUCCH transmission(s) scheduled or configured by gNB, or
\- Transmission(s) related to random access procedure.
A UE may transmit the transmission using Type 1 channel access procedure after
first sensing the channel to be idle during the sensing slot durations of a
defer duration $T_{d}$, and after the counter $N$ is zero in step 4. The
counter $N$ is adjusted by sensing the channel for additional sensing slot
duration(s) according to the steps described below.
1) set $N = N_{\text{init}}$, where $N_{\text{init}}$ is a random number
uniformly distributed between 0 and $CW_{p}$, and go to step 4;
2) if $N > 0$ and the UE chooses to decrement the counter, set $N = N - 1$;
3) sense the channel for an additional sensing slot duration, and if the
additional sensing slot duration is idle, go to step 4; else, go to step 5;
4) if $N = 0$, stop; else, go to step 2.
5) sense the channel until either a busy sensing slot is detected within an
additional defer duration $T_{d}$ or all the sensing slots of the additional
defer duration $T_{d}$ are detected to be idle;
6) if the channel is sensed to be idle during all the sensing slot durations
of the additional defer duration $T_{d}$, go to step 4; else, go to step 5;
If a UE has not transmitted a UL transmission on a channel on which UL
transmission(s) are performed after step 4 in the procedure above, the UE may
transmit a transmission on the channel, if the channel is sensed to be idle at
least in a sensing slot duration $T_{\text{sl}}$ when the UE is ready to
transmit the transmission and if the channel has been sensed to be idle during
all the sensing slot durations of a defer duration $T_{d}$ immediately before
the transmission. If the channel has not been sensed to be idle in a sensing
slot duration $T_{\text{sl}}$ when the UE first senses the channel after it is
ready to transmit, or if the channel has not been sensed to be idle during any
of the sensing slot durations of a defer duration $T_{d}$ immediately before
the intended transmission, the UE proceeds to step 1 after sensing the channel
to be idle during the sensing slot durations of a defer duration $T_{d}$.
The defer duration $T_{d}$ consists of duration $T_{f} = 16\text{μs}\
$immediately followed by $m_{p}\ $consecutive sensing slot durations where
each sensing slot duration is $T_{\text{sl}} = 9\text{μs}$, and $T_{f}$
includes an idle sensing slot duration $T_{\text{sl}}$ at start of $T_{f}$.
$CW_{{\min,}p} \leq CW_{p} \leq CW_{{\max,}p}$ is the contention window.
$CW_{p}$ adjustment is described in clause 4.2.2.
$CW_{{\min,}p}$ and $CW_{{\max,}p}$ are chosen before step 1 of the procedure
above.
$m_{p}$, $CW_{{\min,}p}$, and $CW_{{\max,}p}$ are based on a channel access
priority class $p$ as shown in Table 4.2.1-1, that is signalled to the UE.
#### 4.2.1.2 Type 2 UL channel access procedure
This clause describes channel access procedures by UE where the time duration
spanned by the sensing slots that are sensed to be idle before a UL
transmission(s) is deterministic.
If a UE is indicated by an eNB to perform Type 2 UL channel access procedures,
the UE follows the procedures described in clause 4.2.1.2.1.
##### 4.2.1.2.1 Type 2A UL channel access procedure
If a UE is indicated to perform Type 2A UL channel access procedures, the UE
uses Type 2A UL channel access procedures for a UL transmission. The UE may
transmit the transmission immediately after sensing the channel to be idle for
at least a sensing interval $T_{\text{short_ul}} = 25\text{μs}$.
$T_{\text{short_ul}}$ consists of a duration $T_{f} = 16\text{μs}$ immediately
followed by one sensing slot and $T_{f}\ $includes a sensing slot at start of
$T_{f}$. The channel is considered to be idle for $T_{\text{short_ul}}$ if
both sensing slots of $T_{\text{short_ul}}$.are sensed to be idle.
##### 4.2.1.2.2 Type 2B UL channel access procedure
If a UE is indicated to perform Type 2B UL channel access procedures, the UE
uses Type 2B UL channel access procedure for a UL transmission. The UE may
transmit the transmission immediately after sensing the channel to be idle
within a duration of $T_{f} = 16\text{μs}$. $T_{f}\ $includes a sensing slot
that occurs within the last $9\text{μs}$ of $T_{f}$. The channel is considered
to be idle within the duration $T_{f}$ if the channel is sensed to be idle for
total of at least $5\text{μs}$ with at least $4\text{μs}$ of sensing occurring
in the sensing slot.
##### 4.2.1.2.3 Type 2C UL channel access procedure
If a UE is indicated to perform Type 2C UL channel access procedures for a UL
transmission, the UE does not sense the channel before the transmission. The
duration of the corresponding UL transmission is at most $584\text{μs}$.
### 4.2.2 Contention window adjustment procedures
If a UE transmits transmissions using Type 1 channel access procedures that
are associated with channel access priority class $p$ on a channel, the UE
maintains the contention window value $CW_{p}$ and adjusts $CW_{p}$ for those
transmissions before step 1 of the procedure described in clause 4.2.1.1, as
described in this clause.
#### 4.2.2.1 Contention window adjustment procedures for UL transmissions
scheduled/configured by eNB
If a UE transmits transmissions using Type 1 channel access procedures that
are associated with channel access priority class $p$ on a channel, the UE
maintains the contention window value $CW_{p}$ and adjusts $CW_{p}$ for those
transmissions before step 1 of the procedure described in clause 4.2.1.1,
using the following procedure:
\- If the UE receives an UL grant or an AUL-DFI, the contention window size
for all the priority classes is adjusted as following:
\- If the NDI value for at least one HARQ process associated with HARQ_ID_ref
is toggled, or if the HARQ-ACK value(s) for at least one of the HARQ processes
associated with HARQ_ID_ref received in the earliest AUL-DFI after
$n_{\text{ref}}$+3 indicates ACK,
\- for every priority class $p \in \left{ 1,2,3,4 \right}$, set $CW_{p} =
CW_{{min,}p}$;
\- Otherwise, increase $CW_{p}$ for every priority class $p \in \left{ 1,2,3,4
\right}$ to the next higher allowed value;
\- If there exists one or more previous transmissions {$T_{0}$, ... , $T_{n}$}
using Type 1 channel access procedure, from the start subframe(s) of the
previous transmission(s) of which, N or more subframes have elapsed and
neither UL grant nor AUL-DFI was received, where N = max
(_contentionWindowSizeTimer_ , $T_{i}$ burst length+1) if
_contentionWindowSizeTimer_ > 0 and N = 0 otherwise, for each transmission
$T_{i}$, $CW_{p}$ is adjusted as following:
\- increase $CW_{p}$ for every priority class $p \in \left{ 1,2,3,4 \right}$
to the next higher allowed value;
\- The $CW_{p}$ is adjusted once
\- Else if the UE transmits transmissions using Type 1 channel access
procedure before N subframes have elapsed from the start of previous UL
transmission burst using Type 1 channel access procedure and neither UL grant
nor AUL-DFI is received,
\- the $CW_{p}$ is unchanged.
\- If the UE receives an UL grant or an AUL-DFI indicates feedback for one or
more previous transmissions {$T_{0}$, ... , $T_{n}$} using Type 1 channel
access procedure, from the start subframe(s) of the previous transmission(s)
of which, N or more subframes have elapsed and neither UL grant nor AUL-DFI
was received, where N = max (_contentionWindowSizeTimer_ , $T_{i}$ burst
length+1) if _contentionWindowSizeTimer_ > 0 and N = 0 otherwise, the UE may
recompute $CW_{p}$ as follows:
\- The UE reverts $CW_{p}$ to the value used to transmit at $n_{T0}$ using
Type 1 channel access procedure.
\- The UE updates $CW_{p}$ sequentially in the order of the transmission
{$T_{0}$, ... , $T_{n}$}
\- If the NDI value for at least one HARQ process associated with
HARQ_ID_ref\' is toggled, or if the HARQ-ACK value(s) for at least one of the
HARQ processes associated with HARQ_ID_ref\' received in the earliest AUL-DFI
after $n_{\text{Ti}}$+3 indicates ACK,
\- for every priority class $p \in \left{ 1,2,3,4 \right}$ set $CW_{p} =
CW_{{min,}p}$.
\- Otherwise, increase $CW_{p}$ for every priority class $p \in \left{ 1,2,3,4
\right}$to the next higher allowed value.
\- If the UE transmits transmissions using Type 1 channel access procedure
before N subframes have elapsed from the start of previous UL transmission
burst using Type 1 channel access procedure and neither UL grant nor AUL-DFI
is received,
\- $CW_{p}$ is unchanged.
> HARQ_ID_ref is the HARQ process ID of UL-SCH in reference subframe
> $n_{\text{ref}}$. The reference subframe $n_{\text{ref}}$ is determined as
> follows
\- If the UE receives an UL grant or an AUL-DFI in subframe $n_{g}$ , subframe
$n_{w}$ is the most recent subframe before subframe $n_{g} - 3$ in which the
UE has transmitted UL-SCH using Type 1 channel access procedure.
\- If the UE transmits transmissions including UL-SCH without gaps starting
with subframe $n_{0}$ and in subframes $n_{0},n_{1},\cdots,n_{w}$ and the UL-
SCH in subframe $n_{0}$ is not PUSCH Mode 1 that starts in the second slot of
the subframe, reference subframe $n_{\text{ref}}$ is subframe $n_{0}$.
\- If the UE transmits transmissions including PUSCH Mode 1 without gaps
starting with second slot of subframe $n_{0}$ and in subframes
$n_{0},n_{1},\cdots,n_{w}$ and the, reference subframe $n_{\text{ref}}$ is
subframe $n_{0}$ and $n_{1}$,
\- otherwise, reference subframe $n_{\text{ref}}$ is subframe $n_{w}$.
> HARQ_ID_ref\' is the HARQ process ID of UL-SCH in reference subframe
> $n_{\text{Ti}}$. The reference subframe $n_{\text{Ti}}$ is determined as the
> start subframe of a transmission $T_{i}$ using Type 1 channel access
> procedure and of which, N subframes have elapsed and neither UL grant nor
> AUL-DFI was received.
If the AUL-DFI with DCI format 0A is indicated to a UE that is activated with
AUL transmission and transmission mode 2 is configured for the UE for grant-
based uplink transmissions, the spatial HARQ-ACK bundling shall be performed
by logical OR operation across multiple codewords for the HARQ process not
configured for autonomous UL transmission.
If $CW_{p}$ changes during an ongoing channel access procedure, the UE shall
draw a counter $N_{\text{init}}$ and applies it to the ongoing channel access
procedure.
The UE may keep the value of $CW_{p}$ unchanged for every priority class $p
\in \left{ 1,2,3,4 \right}$, if the UE scheduled to transmit transmissions
without gaps including PUSCH in a set subframes $n_{0},n_{1},\cdots,n_{w - 1}$
using Type 1 channel access procedure, and if the UE is not able to transmit
any transmission including PUSCH in the set of subframes.
The UE may keep the value of $CW_{p}$ for every priority class $p \in \left{
1,2,3,4 \right}$ the same as that for the last scheduled transmission
including PUSCH using Type 1 channel access procedure, if the reference
subframe for the last scheduled transmission is also $n_{\text{ref}}$.
#### 4.2.2.2 Contention window adjustment procedures for UL transmissions
scheduled/configured by gNB
If a UE transmits transmissions using Type 1 channel access procedures that
are associated with channel access priority class $p$ on a channel, the UE
maintains the contention window value $CW_{p}$ and adjusts $CW_{p}$ for those
transmissions before step 1 of the procedure described in clause 4.2.1.1,
using the following steps:
1) For every priority class $p \in \left{ 1,2,3,4 \right}$, set $CW_{p} =
CW_{{min,}p}$;
2) If HARQ-ACK feedback is available after the last update of $CW_{p}$, go to
step 3. Otherwise, if the UE transmission after procedure described in clause
4.2.1.1 does not include a retransmission or is transmitted within a duration
$T_{w}$ from the end of the _reference duration_ corresponding to the earliest
UL channel occupancy after the last update of $CW_{p}$, go to step 5;
otherwise go to step 4.
3) The HARQ-ACK feedback(s) corresponding to PUSCH(s) in the _reference
duration_ for the latest UL channel occupancy for which HARQ-ACK feedback is
available is used as follows:
a. If at least one HARQ-ACK feedback is \'ACK\' for PUSCH(s) with transport
block (TB) based feedback or at least 10% of HARQ-ACK feedbacks are \'ACK\'
for PUSCH CBGs transmitted at least partially on the channel with code block
group (CBG) based feedback, go to step 1; otherwise go to step 4.
4) Increase $CW_{p}$ for every priority class $p \in \left{ 1,2,3,4 \right}$
to the next higher allowed value;
5) For every priority class $p \in \left{ 1,2,3,4 \right}$, maintain $CW_{p}$
as it is; go to step 2.
The HARQ-ACK feedback, _reference duration_ and duration $T_{w}$ in the
procedure above are defined as the following:
\- For the purpose of contention window adjustment in this clause, HARQ-ACK
feedback for PUSCH(s) transmissions are expected to be provided to UE(s)
explicitly or implicitly where explicit HARQ-ACK is determined based on the
valid HARQ-ACK feedback in a corresponding CG-DFI as described in clause 10.5
in [7], and implicit HARQ-ACK feedback is determined based on the indication
for a new transmission or retransmission in the DCI scheduling PUSCH(s) as
follows:
\- If a new transmission is indicated, \'ACK\' is assumed for the transport
blocks or code block groups in the corresponding PUSCH(s) for the TB-based and
CBG-based transmission, respectively.
\- If a retransmission is indicated for TB-based transmissions, \'NACK\' is
assumed for the transport blocks in the corresponding PUSCH(s).
\- If a retransmission is indicated for CBG-based transmissions, if a bit
value in the code block group transmission information (CBGTI) field is \'0\'
or \'1\' as described in clause 5.1.7.2 in [8], \'ACK\' or \'NACK\' is assumed
for the corresponding CBG in the corresponding PUSCH(s), respectively.
\- The _reference duration_ corresponding to a channel occupancy initiated by
the UE including transmission of PUSCH(s) is defined in this clause as a
duration starting from the beginning of the channel occupancy until the end of
the first slot where at least one PUSCH is transmitted over all the resources
allocated for the PUSCH, or until the end of the first transmission burst by
the UE that contains PUSCH(s) transmitted over all the resources allocated for
the PUSCH, whichever occurs earlier. If the channel occupancy includes a
PUSCH, but it does not include any PUSCH transmitted over all the resources
allocated for that PUSCH, then, the duration of the first transmission burst
by the UE within the channel occupancy that contains PUSCH(s) is the
_reference duration_ for CWS adjustment.
\- $T_{w} = max(T_{A},T_{B} + 1ms)$ where $T_{B}$ is the duration of the
transmission burst from start of the _reference duration_ in $\text{ms}$ and
$T_{A} = 5ms$ if the absence of any other technology sharing the channel
cannot be guaranteed on a long-term basis (e.g. by level of regulation), and
$T_{A} = 10ms$ otherwise.
If a UE transmits transmissions using Type 1 channel access procedures
associated with the channel access priority class $p$ on a channel and the
transmissions are not associated with explicit or implicit HARQ-ACK feedbacks
as described above in this clause, the UE adjusts $CW_{p}$ before step 1 in
the procedures described in clause 4.2.1.1, using the latest $CW_{p}$ used for
any UL transmissions on the channel using Type 1 channel access procedures
associated with the channel access priority class $p$. If the corresponding
channel access priority class $p$ has not been used for any UL transmission on
the channel, $CW_{p} = CW_{{\min,}p}$ is used.
#### 4.2.2.3 Common procedures for CWS adjustments for UL transmissions
The following applies to the procedures described in clauses 4.2.2.1 and
4.2.2.2:
\- If $CW_{p} = CW_{{max,}p}$, the next higher allowed value for adjusting
$CW_{p}$ is $CW_{{max,}p}$.
\- If the $CW_{p} = CW_{{max,}p}$ is consecutively used $K$ times for
generation of $N_{\text{init}}$, $CW_{p}$ is reset to $CW_{{min,}p}$ only for
that priority class $p$ for which $CW_{p} = CW_{{max,}p}$ is consecutively
used $K$ times for generation of $N_{\text{init}}$. $K$ is selected by UE from
the set of values {1, 2, ...,8} for each priority class $p \in \left{ 1,2,3,4
\right}$.
### 4.2.3 Energy detection threshold adaptation procedure
A UE accessing a channel on which UL transmission(s) are performed, shall set
the energy detection threshold ($X_{\text{Thresh}}$) to be less than or equal
to the maximum energy detection threshold $X_{\text{Thresh_max}}$.
$X_{\text{Thresh_max}}$ is determined as follows:
\- If the UE is configured with higher layer parameter
_maxEnergyDetectionThreshold-r14_ or _maxEnergyDetectionThreshold-r16_ ,
\- $X_{\text{Thresh_max}}$ is set equal to the value signalled by the higher
layer parameter;
\- otherwise
\- the UE shall determine $X'_{\text{Thresh_max}}$ according to the procedure
described in clause 4.2.3.1;
\- if the UE is configured with higher layer parameter
_energyDetectionThresholdOffset-r14_ or _energyDetectionThresholdOffset-r16_
\- $X_{\text{Thresh_max}}$ is set by adjusting $X'_{\text{Thresh_max}}$
according to the offset value signalled by the higher layer parameter;
\- otherwise
\- the UE shall set $X_{\text{Thresh_max}} = X'_{\text{Thresh_max}}$.
If the higher layer parameter _absenceOfAnyOtherTechnology-r16_ is not
configured to a UE, and the higher layer parameter _ul-toDL-COT-SharingED-
Threshold-r16_ is configured to the UE, the gNB should use the gNB\'s transmit
power in determining the resulting energy detection threshold _ul-toDL-COT-
SharingED-Threshold-r16_.
For the case where a UE performs channel access procedures as described in
clause 4.2.1.1 for a UL transmission and CG-UCI is absent in the UL
transmission or CG-UCI is present in the UL transmission and indicates COT-
sharing information other than \'COT sharing not available\',
$X_{\text{Thresh_max}}$ is set equal to the value provided by the higher layer
parameter _ul-toDL-COT-SharingED-Threshold-r16_ , if provided.
#### 4.2.3.1 Default maximum energy detection threshold computation procedure
If the higher layer parameter _absenceOfAnyOtherTechnology-r14_ or
_absenceOfAnyOtherTechnology-r16_ is provided
\- $X'_{\text{Thresh_max}} = \min\begin{Bmatrix} \ & T_{\max} + 10\text{dB} \
\& X_{r} \ \end{Bmatrix}$ where
\- $X_{r}$ is Maximum energy detection threshold defined by regulatory
requirements in dBm when such requirements are defined, otherwise $X_{r} =
T_{\max} + 10dB$
otherwise
\- $X'_{\text{Thresh_max}} = {\max\begin{Bmatrix} \ & \- 72 + 10 \cdot \log
10(BWMHz\ /20MHz)\ dBm, \ \&\text{min}\begin{Bmatrix} \& T_{\text{max}}, \
\&{T_{\text{max}} - T_{A} + \left( P_{H} + 10 \cdot \log 10(BWMHz\ /20MHz) -
P_{\text{TX}} \right)}_{} \ \end{Bmatrix} \ \end{Bmatrix}}_{}$
where
\- $T_{A} = 10dB$;
\- $P_{H} = 23dBm$;
\- $P_{\text{TX}}$ is set to the value of P~CMAX_H,_c_ ~ as defined in [3];
\- $T_{\text{max}}\text{(dBm)=}{10 \cdot log}10\left( 3.16228 \cdot 10^{-
8}(mW/MHz)\mspace{6mu} \cdot \mspace{6mu} BWMHz\mspace{6mu}(MHz) \right)$;
\- $\text{BWMHz}$ is the single channel bandwidth in MHz.
## 4.3 Channel access procedures for semi-static channel occupancy
Channel access procedures based on semi-static channel occupancy as described
in this Clause, are intended for environments where the absence of other
technologies is guaranteed e.g., by level of regulations, private premises
policies, etc. If a gNB provides UE(s) with higher layer parameters
_channelAccessMode-r16 =\'semiStatic\'_ by SIB1 or dedicated configuration, a
periodic channel occupancy can be initiated by the gNB every $T_{x}$ within
every two consecutive radio frames, starting from the even indexed radio frame
at $i \bullet T_{x}$$x \bullet T_{x}$ with a maximum channel occupancy time
$T_{y} = {0.95T}_{x}$, where $T_{x} =$ _period_ $T_{x} = \text{Period}$in
$\text{ms}$, is a higher layer parameter provided in
_SemiStaticChannelAccessConfig_ and $i \in \left{ 0,1,\ldots,\frac{20}{T_{x}}
- 1 \right}$_._ For determining a _Channel Occupancy Time_ based on semi-
static channel access procedures, duration of any transmission gap within
$T_{y}$ is counted in the channel occupancy time.
In the following procedures in this clause, when a gNB or UE performs sensing
for evaluating a channel availability, the sensing is performed at least
during a sensing slot duration $T_{\text{sl}} = 9\text{us}$, unless longer
sensing duration is required (e.g. by level of regulation), in which case
sensing is performed within a duration of $T_{\text{sl}} = 16\text{μs}$. When
sensing is performed within a duration of$\ T_{\text{sl}} = 16\mu s$, the
channel is considered to be idle if the channel is sensed to be idle for total
of at least $5\mu s$ with at least $4\mu s$ of sensing occurring in the last
$9\mu s$ time interval in the sensing duration. The corresponding
$X_{\text{Thresh}}$ adjustment for performing sensing by a gNB or a UE is
described in clauses 4.1.5 and 4.2.3, respectively.
A channel occupancy initiated by a gNB and shared with UE(s) satisfies the
following:
\- The gNB shall transmit a DL transmission burst starting at the beginning of
the channel occupancy time immediately after sensing the channel to be idle
for at least a sensing slot duration $T_{\text{sl}}$. If the channel is sensed
to be busy, the gNB shall not perform any transmission during the current
period.
\- The gNB may transmit a DL transmission burst(s) within the channel
occupancy time immediately after sensing the channel to be idle for at least a
sensing slot duration $T_{\text{sl}}$ if the gap between the DL transmission
burst(s) and any previous transmission burst is more than $16\mu s$.
\- The gNB may transmit DL transmission burst(s) after UL transmission
burst(s) within the channel occupancy time without sensing the channel if the
gap between the DL and UL transmission bursts is at most $16\mu s.$
\- A UE may transmit UL transmission burst(s) after detection of a DL
transmission burst(s) within the channel occupancy time as follows:
\- If the gap between the UL and DL transmission bursts is at most $16\mu s$,
the UE may transmit UL transmission burst(s) after a DL transmission burst(s)
within the channel occupancy time without sensing the channel.
\- If the gap between the UL and DL transmission bursts is more than $16\mu
s$, the UE may transmit UL transmission burst(s) after a DL transmission
burst(s) within the channel occupancy time after sensing the channel to be
idle for at least a sensing slot duration $T_{\text{sl}}$ within a $25\mu s$
interval ending immediately before transmission.
\- A UE may be indicated by the gNB to transmit UL transmission burst(s)
within the channel occupancy time without sensing the channel or after sensing
the channel to be idle for at least a sensing slot duration $T_{\text{sl}}$
within a $25\mu s$ interval ending immediately before transmission.
\- The gNB and UEs shall not transmit any transmissions in a set of
consecutive symbols for a duration of at least $T_{z} = \max\left(
{0.05T}_{x}\ ,\ 100\mu s \right)$ before the start of the next period.
If a UE fails to access the channel(s) prior to an intended UL transmission to
a gNB, Layer 1 notifies higher layers about the channel access failure.
#