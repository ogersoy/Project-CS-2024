# Foreword
This Technical Specification has been produced by the 3^rd^ Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document provides an overview and overall description of the
**minimization of drive tests functionality**.
The document describes functions and procedures to support collection of UE-
specific measurements for MDT using Control Plane architecture, for UTRAN,
E-UTRAN and NR.
Details of the signalling procedures for single-RAT operation are specified in
**the appropriate** radio interface protocol specification. Network operation
and overall control of MDT is described in OAM specifications.
NOTE: The focus is on conventional macro cellular network deployments. In the
current release no specific support is provided for H(e)NB deployments.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 25.133: \"Requirements for support of radio resource management
(FDD)\".
[3] 3GPP TS 36.133: \"Requirements for support of radio resource management
(FDD)\".
[4] 3GPP TS 25.331: \"Radio Resource Control (RRC); Protocol specification\".
[5] 3GPP TS 36.331: \"Evolved Universal Terrestrial Radio Access (E-UTRA);
Radio Resource Control (RRC); Protocol specification\".
[6] 3GPP TS 32.422: \"Subscriber and equipment trace; Trace control and
configuration management\".
[7] 3GPP TS 25.215: \"Physical Layer; Measurements (FDD)\".
[8] 3GPP TS 25.225: \"Physical Layer; Measurements (TDD)\".
[9] 3GPP TS 36.214: \"Evolved Universal Terrestrial Radio Access (E-UTRA);
Physical Layer; Measurements\".
[10] 3GPP TS 36.321: \"Evolved Universal Terrestrial Radio Access (E-UTRA);
Medium Access Control (MAC); Protocol Specification\".
[11] 3GPP TS 36.213: \"Evolved Universal Terrestrial Radio Access (E-UTRA);
Physical layer procedures\".
[12] 3GPP TS 36.300: \"Evolved Universal Terrestrial Radio Access (E-UTRA) and
Evolved Universal Terrestrial Radio Access (E-UTRAN); Overall description;
Stage 2\".
[13] 3GPP TS 36.314: \"Evolved Universal Terrestrial Radio Access (E-UTRA);
Layer 2 -- Measurements\".
[14] 3GPP TS 25.321: \"Medium Access Control (MAC) Protocol Specification\".
[15] 3GPP TS 38.331: \"NR; Radio Resource Control (RRC); Protocol
specification\".
[16] 3GPP TS 38.133: \"NR; Requirements for support of radio resource
management\".
[17] 3GPP TS 28.552: \"Technical Specification Group Services and System
Aspects; Management and orchestration; 5G performance measurements\".
[18] 3GPP TS 38.314: \"NR; Layer 2 Measurements\".
[19] 3GPP TS 38.215: \" NR; Physical layer measurements\".
[20] 3GPP TS 38.213: \" NR; Physical layer procedures for control\".
[21] 3GPP TS 38.321: \"NR; Medium Access Control (MAC) protocol
specification\".
[22] 3GPP TS 38.300: \"NR; NR and NG-RAN Overall description; Stage-2\".
# 3 Definitions, symbols and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
TR 21.905 [1] apply.
**Immediate MDT:** MDT functionality involving measurements performed by the
UE in CONNECTED state and reporting of the measurements to RAN available at
the time of reporting condition as well as measurements by the network for MDT
purposes.
**Logged MDT:** MDT functionality involving measurement logging by UE in IDLE
mode, INACTIVE state, CELL_PCH, URA_PCH states and CELL_FACH state when second
DRX cycle is used (when UE is in UTRA) for reporting to eNB/RNC/gNB at a later
point in time, and logging of MBSFN measurements by E-UTRA UE in IDLE and
CONNECTED modes.
**Management Based MDT PLMN List:** MDT PLMN List applicable to management
based MDT.
**MDT measurements:** Measurements determined for MDT.
**MDT PLMN List:** A list of PLMNs where MDT is allowed for a user. It is a
subset of the EPLMN list and RPLMN at the time when MDT is initiated.
**Signalling Based MDT PLMN List:** MDT PLMN List applicable to signalling
based MDT.
## 3.2 Symbols
For the purposes of the present document, the following symbols apply:
\ \
## 3.3 Abbreviations
For the purposes of the present document, the abbreviations given in TR 21.905
[1] and the following apply. An abbreviation defined in the present document
takes precedence over the definition of the same abbreviation, if any, in TR
21.905 [1].
ACK Acknowledgement
AICH Acquisition Indicator CHannel
BLER Block Error Rate
BSSID Basic Service Set Identifier
CA Carrier Aggregation
CDMA Code Division Multiple Access
CN Core Network
CPICH Common Pilot CHannel
DCH Dedicated CHannel
DL Downlink
DRX Discontinuous Reception
ECGI E-UTRAN Cell Global Identifier
E-CID Enhanced Cell-ID (positioning method)
E-DCH Enhanced Uplink DCH
EDGE Enhanced Data rates for GSM Evolution
E-RUCCH E-DCH Random Access Uplink Control CHannel
eNB Evolved NodeB
EPLMN Equivalent PLMN
E-UTRA Evolved UTRA
E-UTRAN Evolved UTRAN
FACH Forward Access CHannel
FDD Frequency Division Duplex
FIFO First Input First Output
FPACH Fast Physical Access CHannel
GERAN GSM EDGE Radio Access Network
gNB Next Generation Node B
GNSS Global Navigation Satellite System
HESSID Homogenous Extended Service Set Identifier
HOF Handover Failure
IMEI-SV International Mobile Equipment Identity Software Version
IMSI International Mobile Subscriber Identity
IP Internet Protocol
ISCP Interference on Signal Code Power
LA Location Area
LTE Long Term Evolution
MAC Medium Access Control
MBMS Multimedia Broadcast Multicast Service
MBSFN MBMS Single Frequency Network
MDT Minimization of Drive-Tests
NG-RAN Next Generation RAN
NR New Radio
OAM Operation and Maintenance
P-CCPCH Primary Physical Common Control CHannel
PCH Paging CHannel
PCI Physical Cell Id
PDCP Packet Data Convergence Protocol
PH Power Headroom
PLMN Public Land Mobile Network
PS Packet Switched
QCI QoS Class Identifier
QoS Quality of Service
RA Routing Area
RAB Radio Access Bearer
RAT Radio Access Technology
RB Radio Bearer
RF Radio Frequency
RLC Radio Link Control
RLF Radio Link Failure
RNC Radio Network Controller
RPLMN Registered PLMN
RRC Radio Resource Control
RRM Radio Resource Management
RSCP Received Signal Code Power
RSRP Reference Signal Received Power
RSRQ Reference Signal Received Quality
RSSI Received Signal Strength Indicator
RTT Round Trip Time
RTWP Received Total Wideband Power
SCell Secondary Cell
SIR Signal to Interference Ratio
SINR Signal to Noise plus Interference Ratio
SNR Signal to Noise Ratio
SON Self Organizing/Optimizing Network
SRB Signalling Radio Bearer
SRNC Serving RNC
SSB Synchronization Signal Block
SSID Service Set Identifier
TA Tracking Area
TCE Trace Collection Entity
TDD Time Division Duplex
UE User Equipment
UL Uplink
UMTS Universal Mobile Telecommunication System
UPH Uplink PH
URA UTRAN Registration Area
UTRA Universal Terrestrial Radio Access
UTRAN Universal Terrestrial Radio Access Network
# 4 Main concept and requirements
## 4.1 General
The general principles and requirements guiding the definition of functions
for Minimization of drive tests are the following:
**1\. MDT mode\** There are two modes for the MDT measurements: Logged MDT and
Immediate MDT. There are also cases of measurement collection not specified as
either immediate or logged MDT, such as Accessibility measurements.
**2\. UE measurement configuration\** It is possible to configure MDT
measurements for the UE logging purpose independently from the network
configurations for normal RRM purposes. However, in most cases, the
availability of measurement results is conditionally dependent on the UE RRM
configuration.
**3\. UE measurement collection and reporting\ UE MDT** measurement logs
consist of multiple events and measurements taken over time. The time interval
for measurement collection and reporting is decoupled in order to limit the
impact on the UE battery consumption and network signalling load.
**4\. Geographical scope of measurement logging\** It is possible to configure
the geographical area where the defined set of measurements shall be
collected.
**5\. Location information\** The measurements shall be linked to available
location information and/or other information or measurements that can be used
to derive location information.
**6\. Time information\** The measurements in measurement logs shall be linked
to a time stamp.
**7\. Sensor information\** The measurements can be linked to available sensor
information that can be used to derive UE orientation in a global coordinate
system, the uncompensated barometric pressure and the UE speed.
**8\. UE capability information\** The network may use UE capabilities to
select terminals for MDT measurements.
**9\. Dependency on SON\** The solutions for MDT are able to work
independently from SON support in the network. Relation between
measurements/solution for MDT and UE side SON functions shall be established
in a way that re-use of functions is achieved where possible.
**10\. Dependency on TRACE\** The subscriber/cell trace functionality is
reused and extended to support MDT. If the MDT is initiated towards a specific
UE (e.g. based on IMSI, IMEI-SV, etc.), the signalling based trace procedure
is used, otherwise the management based trace procedure (or cell traffic trace
procedure) is used. Network signalling and overall control of MDT is described
in TS 32.422 [6].
The solutions for MDT shall take into account the following constraints:
**1\. UE measurements\** The UE measurement logging mechanism is an optional
feature. In order to limit the impact on UE power consumption and processing,
the UE measurement logging should as much as possible rely on the measurements
that are available in the UE according to radio resource management enforced
by the access network.
**2\. Location information\** The availability of location information is
subject to UE capability and/or UE implementation. Solutions requiring
location information shall take into account power consumption of the UE due
to the need to run its positioning components.
# 5 Functions and procedures
## 5.1 General procedures
### 5.1.1 Logged MDT procedures
Support of Logged MDT complies with the principles for IDLE and INACTIVE state
measurements in the UE specified in TS 25.133[2], TS 36.133 [3] and TS 38.133
[16] and principles for IDLE and CONNECTED mode MBSFN measurements in the UE
specified in TS 36.133 [3].
NOTE: It should be noted the established principles may result in different
logged information in different UEs.
Furthermore, measurement logging is differentiated based on UE states in idle
mode i.e. camped normally, any cell selection or camped on any cell. The UE
shall perform measurement logging in \"camped normally\" state and \"any cell
selection\" state. In \"camped on any cell\" state the UE is not required to
perform MDT measurement logging (including time and location information).
For Logged MDT, the configuration will always be done in cells of the same RAT
type. However, measurements included in the logged MDT report comprises of
measurements from the same RAT type (serving cell measurements, intra-
frequency and inter-frequency neighbor cell measurements) and different RAT
types (inter-RAT neighbor cell measurements).
Logging of MBSFN measurements is only applicable to E-UTRA.
#### 5.1.1.1 Measurement configuration
Logged MDT measurements are configured with a MDT Measurement Configuration
procedure, as shown in Figure 5.1.1.1-1.
Figure 5.1.1.1-1: MDT measurement configuration for Logged MDT
Network initiates the procedure to UE in RRC Connected by sending
_LoggedMeasurementConfiguration_ message, which is used to transfer
configuration parameters for Logged MDT. This is a unidirectional RRC
signalling procedure.
A release operation for logged measurement configuration in the UE is realized
only by configuration replacement when the configuration is overwritten or by
configuration clearance in case a duration timer stopping or expiration
condition is met.
##### 5.1.1.1.1 Configuration parameters
The logged measurement configuration consists of:
\- configuration of downlink pilot strength measurements logging for (E-)UTRA
and NR.
\- configuration of MBSFN measurement logging for E-UTRA.
\- configuration of the triggering of logging events:
\- for (E-)UTRAN only periodic measurement trigger is supported, for which the
logging interval is configurable. The parameter specifies the periodicity for
storing MDT measurement results. It should be configured in seconds in
multiples of the applied IDLE mode DRX, i.e. multiples of 1.28s which is
either a factor or multiple of the IDLE mode DRX. The UE behaviour is
unspecified when the UE is configured with a DRX cycle larger than the logging
interval.
\- for NR:
\- periodic measurement trigger is supported, for which the logging interval
is configurable. The parameter specifies the periodicity for storing MDT
measurement results.
\- event-based trigger is supported, for which the logging interval is
configurable, which determines periodical logging of available data (e.g. time
stamp, location information), and the following two types of events are
supported:
\- measurement quantity-based event L1, for which the event threshold,
hysteresis, and time to trigger are configurable. If the configured time to
trigger is not a multiple of the DRX cycle, then the UE uses the next multiple
of DRX cycle duration that is larger than the time to trigger for evaluating
the event L1;
\- out-of-coverage detection trigger.
NOTE: The logging configuration for event-based and periodical DL pilot
strength logged measurements can be configured independently. Only one type of
event can be configured to the UE.
\- configuration of the logging duration. This configuration parameter defines
a timer activated at the moment of configuration, that continues independent
of state changes, RAT or RPLMN change. When the timer expires the logging is
stopped and the configuration is cleared (except for the parameters that are
required for further reporting e.g. network absolute time stamp, trace
reference, trace recording session reference and TCE Id).
\- network absolute time stamp to be used as a time reference to UE.
\- Trace Reference parameter as indicated by the OAM configuration as
specified in TS 32.422 [6].
\- Trace Recording Session Reference as indicated by the OAM configuration as
specified in TS 32.422 [6].
\- TCE Id as indicated by the OAM configuration as specified in TS 32.422 [6].
\- (optionally) MDT PLMN List, indicating the PLMNs where measurement
collection and log reporting is allowed. It is either the Management Based MDT
PLMN List or the Signalling Based MDT PLMN List, depending on how the Logged
MDT task was initiated (see 5.1.3).
\- (optionally) configuration of a logging area. A UE will log measurements as
long as it is within the configured logging area. The scope of the logging
area may consist of one of:
\- a list of up to 32 global cell identities. If this list is configured, the
UE will only log measurements when camping in any of these cells
\- a list of up to 8 TAs or 8 LAs or 8 RAs. If this list is configured, the UE
will only log measurements when camping in any cell belonging to the
preconfigured TA/LA/RAs.
\- The configured logging area can span PLMNs in the MDT PLMN List. If no area
is configured, the UE will log measurements throughout the PLMNs of the MDT
PLMN list.
\- (optionally) for NR, configuration of a list of neighbouring frequencies
and/or cells, indicating the UE to include neighbouring cell\'s measurements
as indicated in the list in the logged MDT report.
\- (optionally) for E-UTRA, configuration of target MBSFN area(s) for MBSFN
measurement logging. If target MBSFN area(s) is configured, UE applies it in
addition to other restrictions such as the logging area. The UE will log
measurements as long as it receives MBMS service from an indicated target
MBSFN area and is within the configured logging area. The target MBSFN area(s)
is defined by a list of up to 8 entries, where each entry indicates a carrier
frequency and optionally indicates a specific MBSFN area on a carrier
frequency.
\- (optionally) configuration of the WLAN access point names, indicating the
UE to attempt to obtain WLAN measurements associated to these access points.
\- (optionally) configuration of the Bluetooth beacon names, indicating the UE
to attempt to obtain Bluetooth measurements associated to these beacons.
\- (optionally) for NR, configuration of the sensor names, indicating the UE
to attempt to obtain sensor measurements.
##### 5.1.1.1.2 Configuration effectiveness
The logged measurement configuration is provided in a cell by dedicated
control while UE is in CONNECTED and implies:
\- logged measurement configuration for downlink pilot strength measurements
(or events) logging is active
\- in IDLE UE state in E-UTRAN, or
\- in IDLE mode, CELL_PCH and URA_PCH states in UTRAN, or
\- in CELL_FACH state when second DRX cycle is used in UTRAN, or
\- in IDLE and INACTIVE states in NR
\- until logging duration timer expires or stops
\- logged measurement configuration for MBSFN measurement logging is active
\- in IDLE and CONNECTED UE states in E-UTRAN
\- until logging duration timer expires or stops
\- logged measurement configuration and logs are maintained when the UE is in
any state as described above, despite multiple periods interrupted by UE state
transitions, e.g. for downlink pilot strength measurements when the UE is in
CONNECTED state for E-UTRAN and NR and CELL_DCH, CELL_FACH state when second
DRX cycle is not used in UTRAN
\- logged measurement configuration and logs are maintained when the UE is in
any state as described above in that RAT, despite multiple periods interrupted
by UE presence in another RAT
There is only one RAT-specific logged measurement configuration for Logged MDT
in the UE. When the network provides a configuration, any previously
configured logged measurement configuration will be entirely replaced by the
new one. Moreover, logged measurements corresponding to the previous
configuration will be cleared at the same time. It is left up to the network
to retrieve any relevant data before providing a new configuration.
NOTE: The network may have to do inter-RAT coordination.
When a logging area is configured, logged MDT measurements are performed as
long as the UE is within this logging area. For NR, when determining whether a
cell is part of the logging area, only the first entry of the _plmn-
IdentityList_ in the first entry of the _PLMN-IdentityInfoList_ (in SIB1), and
cellIdentity and TAC corresponding to the first entry of the _PLMN-
IdentityInfoList_ are considered. If no logging area is configured, logged MDT
measurements are performed as long as the RPLMN is part of the MDT PLMN list.
When the UE is not in the logging area or RPLMN is not part of the MDT PLMN
list, the logging is suspended, i.e. the logged measurement configuration and
the log are kept but measurement results are not logged. In addition, for
MBSFN logged measurements, logged MDT measurements are performed in logging
intervals when the UE receives MBMS service from a MBSFN area according to the
target MBSFN area(s) configuration When the UE is not in the logging area or
does not receive MBMS service from a MBSFN area that matches the target MBSFN
area(s) configuration in the logging interval the logged measurement
configuration and the log are kept but measurement results are not logged.
NOTE: The logging duration timer continues.
In case the new PLMN that does not belong to the MDT PLMN list provides a
logged measurement configuration any previously configured logged measurement
configuration and corresponding log are cleared and overwritten without being
retrieved.
#### 5.1.1.2 Measurement collection
In \"camped normally\" state, a UE shall perform logging as per the logged
measurement configuration. This state includes a period between cell selection
criteria not being met and UE entering \"any cell selection\" state, i.e. 10 s
for E-UTRA (See TS 36.133 [3]) or 12 s for UTRA (See TS 25.133 [2]) or 10s for
NR (See TS 38.133 [16]).
In \"any cell selection\" state, a UE shall perform logging of available
information (i.e. at least indicator \'anyCellSelectionDetected\', time stamp,
and the available location information). In \"camped on any cell\" state, the
periodic logging stops. However, it should be noted that the duration timer is
kept running. When the UE re-enters \"camped normally\" state and the duration
timer has not expired, the periodic logging is restarted based on new DRX and
logging resumes automatically (with a leap in time stamp).
When an E-UTRA UE detects an in-device coexistence problem that may affect the
logged measurement results, the UE shall stop measurement logging, indicate in
the log that an in-device coexistence problem has occurred, and keep the
duration timer running. When the in-device coexistence problem is no longer
present, and the duration timer has not expired, the logging resumes, with a
leap in time stamp.
For E-UTRA MBSFN measurement logging, the UE shall perform MBSFN measurements
only when receiving MBMS service, and measurement logging is performed only
for logging intervals for which MBSFN measurements are available. The UE shall
perform MBSFN measurements and MBSFN measurement logging in both IDLE and
CONNECTED modes.
NOTE: the UE is only required to perform MBSFN measurements when receiving
MBMS service of the MBSFN area(s) targeted for logging.
For WLAN measurement logging and Bluetooth measurement logging, the UE shall
perform WLAN and Bluetooth measurements, respectively, only when indicated in
the corresponding configuration. The measurement logging is performed only for
logging intervals for which WLAN and Bluetooth measurements are available,
respectively.
The measurement quantities for downlink pilot strength measurement logging are
fixed and consist of both RSRP and RSRQ for EUTRA, both RSCP and Ec/No for
UTRA FDD, P-CCPCH RSCP for UTRA 1.28 Mcps TDD, Rxlev for GERAN, and Pilot Pn
Phase and Pilot Strength for CDMA2000 if the serving cell is EUTRAN cell, and
both RSRP and RSRQ for NR.
For NR, in addition to the logged measurement quantities of the camped cell,
the best beam index (SSB Index) as along with the best beam RSRP/RSRQ are
logged as well as the \'number of good beams\' (the number of SSBs that are
above the configured threshold i.e., _absThreshSS-BlocksConsolidation, if
configured by the network_) associated to the cells within the R value range
(which is configured by network for cell reselection) of the highest ranked
cell as part of the beam level measurements. Sensor measurements are logged if
available.
The measurement quantities for E-UTRA MBSFN measurement logging are fixed and
consist of MBSFN RSRP, MBSFN RSRQ, BLER for signalling and BLER for data per
MCH, in addition to the measurement quantities for downlink pilot strength
measurements.
The measurement quantities for WLAN measurement logging are fixed and consist
of BSSID, SSID, HESSID of WLAN APs. If configured by the network, optionally
available RSSI and RTT can be included.
The measurement quantity for Bluetooth measurement logging is fixed and
consists of MAC address of Bluetooth beacons. If configured by the network,
optionally available RSSI can be included.
UE collects MDT measurements and continues logging according to the logged
measurement configuration until UE memory reserved for MDT is full. In this
case the UE stops logging, stops the log duration timer and starts the 48 hour
timer.
#### 5.1.1.3 Measurement reporting
##### 5.1.1.3.1 Availability Indicator
A UE configured to perform Logged MDT downlink pilot strength measurements
indicates the availability of Logged MDT measurements, by means of a one bit,
in RRCConnectionSetupComplete or RRCSetupComplete or
RRCConnectionResumeComplete or RRCResumeComplete message during connection
establishment. Furthermore, the indicator (possibly updated) shall be provided
within:
\- E-UTRAN handover and re-establishment;
\- UTRAN procedures involving the change of SRNC (SRNC relocation), CELL
UPDATE, URA UPDATE messages as well as MEASUREMENT REPORT message in case of
state transition to CELL_FACH without CELL UPDATE;
\- NR re-establishment, reconfiguration.
The UE includes the indication in one of these messages at every transition to
RRC Connected mode even though the logging period has not ended, upon
connection to RAT which configured the UE to perform Logged MDT measurements
and RPLMN which is equal to a PLMN in the MDT PLMN list.
A E-UTRA UE configured to perform Logged MDT MBSFN measurements indicates the
availability of Logged MDT MBSFN measurements, by means of an indicator, in
RRCConnectionSetupComplete message during connection establishment. The
indicator (possibly updated) shall be provided within E-UTRAN also at handover
and re-establishment, except when the logged measurement configuration is
active in CONNECTED mode, i.e. except when the logging campaign is still
ongoing.
A E-UTRA UE configured to perform Logged MDT WLAN measurements indicates the
availability of Logged MDT WLAN measurements, by means of an indicator, in
RRCConnectionSetupComplete message or RRCConnectionResumeComplete message
during connection establishment. Furthermore, the indicator can be included in
some uplink RRC messages, i.e., RRCConnectionReconfigurationComplete message,
RRCConnectionReestablishmentComplete message, or UEInformationResponse
message, at every transition to RRC Connected mode even though the logging
period has not ended.
A E-UTRA UE configured to perform Logged MDT Bluetooth measurements indicates
the availability of Logged MDT Bluetooth measurements, by means of an
indicator, in RRCConnectionSetupComplete message or
RRCConnectionResumeComplete message during connection establishment.
Furthermore, the indicator can be included in some uplink RRC messages, i.e.,
RRCConnectionReconfigurationComplete message,
RRCConnectionReestablishmentComplete message, or UEInformationResponse
message, at every transition to RRC Connected mode even though the logging
period has not ended.
A NR UE configured to perform Logged MDT WLAN measurements indicates the
availability of Logged MDT WLAN measurements, by means of an indicator, in
RRCSetupComplete message or RRCResumeComplete message during connection
establishment. Furthermore, the indicator can be included in some uplink RRC
messages, i.e., RRCReconfigurationComplete message, RRCReestablishmentComplete
message, or UEInformationResponse message, at every transition to RRC
Connected mode even though the logging period has not ended.
A NR UE configured to perform Logged MDT Bluetooth measurements indicates the
availability of Logged MDT Bluetooth measurements, by means of an indicator,
in RRCSetupComplete message or RRCResumeComplete message during connection
establishment. Furthermore, the indicator can be included in some uplink RRC
messages, i.e., RRCReconfigurationComplete message, RRCReestablishmentComplete
message, or UEInformationResponse message, at every transition to RRC
Connected mode even though the logging period has not ended.
An indicator shall be also provided in UEInformationResponse message during
MDT report retrieval in case the UE has not transferred the total log in one
RRC message in order to indicate the remaining data availability.
The UE will not indicate the availability of MDT measurements in another RAT
or in a PLMN that is not in the MDT PLMN list.
The network may decide to retrieve the logged measurements based on this
indication. In case Logged MDT measurements are retrieved before the
completion of the pre-defined logging duration, the reported measurement
results are deleted, but MDT measurement logging will continue according to
ongoing logged measurement configuration.
In case the network does not retrieve Logged MDT measurements, UE should store
non-retrieved measurements for 48 hours from the moment the duration timer for
logging expired. There is no requirement to store non-retrieved data beyond 48
hours. In addition, all logged measurement configuration and the log shall be
removed by the UE at switch off or detach.
##### 5.1.1.3.2 Report retrieval
For Logged MDT the measurement reporting is triggered by an on-demand
mechanism, i.e. the UE is asked by the network to send the collected
measurement logs via RRC signalling. UE Information procedure defined in TS
25.331 [4] and TS 36.331 [5] and TS 38.331 [15] is used to request UE to send
the collected measurement logs. The reporting may occur in different cells
than which the logged measurement configuration is signalled.
Transport of Logged MDT reports in multiple RRC messages is supported. With
every request, the network may receive a part of the total UE log. To indicate
the reported data is a segment, the UE shall include data availability
indicator in UEInformatonResponse message to convey the information that
further measurement information is available, as specified in 5.1.1.3.1. In
multiple RRC transmissions for segmented Logged MDT reporting, FIFO order is
followed, i.e. the UE should provide oldest available measurement entries in
earliest message. There is no requirement specified on the size of particular
reporting parts. However, each reported part should be \"self-decodable\",
i.e. interpretable even in case all the other parts are not available.
The UE shall send an empty report when retrieval is attempted and the RPLMN is
not in the MDT PLMN list.
##### 5.1.1.3.3 Reporting parameters
For downlink pilot strength measurements, the logged measurement report
consists of measurement results for the serving cell (the measurement
quantity), available UE measurements performed in idle or inactive for intra-
frequency/inter-frequency/inter-RAT, time stamp and location information.
For E-UTRA MBSFN measurements logging, the logged measurement report consists
of MBSFN measurement results from target MBSFN area(s), if configured, and
available downlink pilot strength measurement results. Inter-RAT downlink
pilot strength measurements are not required to be logged.
For WLAN and Bluetooth measurement logging, the logged measurement reports
consist of WLAN and Bluetooth measurement results, respectively.
The number of neighbouring cells to be logged is limited by a fixed upper
limit per frequency for each category below. The UE should log the measurement
results for the neighbouring cells, if available, up to:
\- 6 for intra-frequency neighbouring cells;
\- 3 for inter-frequency neighbouring cells per frequency;
\- 3 for GERAN neighbouring cells per frequency;
\- 3 for UTRAN (if non-serving) neighbouring cells per frequency;
\- 3 for E-UTRAN (if non-serving) neighbouring cells per frequency;
\- 3 for NR (if non-serving) neighbouring cells per frequency;
\- 3 for CDMA2000 (if serving is E-UTRA) neighbouring cells per frequency;
\- 32 for WLAN APs;
\- 32 for Bluetooth Beacons.
NOTE: UE in NR IDLE or INACTIVE state will not log measurements from UMTS or
GSM.
The measurement reports for neighbour cells consist of:
\- Physical cell identity of the logged cell;
\- Carrier frequency;
\- RSRP and RSRQ for EUTRA and NR;
\- RSCP and Ec/No for UTRA FDD,
**\- P-CCPCH RSCP for UTRA 1.28 Mcps TDD** ;
\- Rxlev for GERAN;
\- Pilot Pn Phase and Pilot Strength for CDMA2000;
\- RSSI and RTT for WLAN APs;
\- RSSI for Bluetooth Beacons.
For any logged cell (serving or neighbour), latest available measurement
result made for cell reselection purposes is included in the log only if it
has not already been reported.
While logging neighbour cells measurements, the UE shall determine a fixed
number of best cells based on the measurement quantity used for ranking during
cell reselection per frequency or RAT.
The MBSFN measurement results consist of, per MBSFN area where MBMS service is
received:
\- MBSFN area identity;
\- Carrier frequency;
\- MBSFN RSRP;
\- MBSFN RSRQ;
\- MCH BLER for signalling;
\- MCH BLER for data, and related MCH index.
The WLAN measurement results consist of, per wireless network served by the
WLAN AP:
\- BSSID, SSID and HESSID;
\- RSSI for WLAN;
\- RTT.
The Bluetooth measurement results consist of, per wireless network served by
the Bluetooth beacon:
\- MAC address;
\- RSSI for Bluetooth.
Measurements are performed in accordance with requirements defined in TS
25.133 [2] and TS 36.133 [3] and TS 38.133 [16].
The measurement report is self contained, i.e. the RAN node is able to
interpret the Logged MDT reporting results even if it does not have access to
the logged measurement configuration. Each measurement report also contains
the necessary parameters for the network to be able to route the reports to
the correct TCE and for OAM to identify what is reported. The parameters are
sent to the UE in the logged configuration message, see clause 5.1.1.1.1.
For each MDT measurement the UE includes a relative time stamp. The base unit
for time information in the Logged MDT reports is the second. In the log
associated to periodical logging configuration, the time stamp indicates the
point in time when periodic logging timer expires. The time stamp is counted
in seconds from the moment the logged measurement configuration is received at
the UE, relative to the absolute time stamp received within the configuration.
The absolute time stamp is the current network time at the point when Logged
MDT is configured to the UE. The UE echoes back this absolute reference time.
The time format for Logged MDT report is: _YY-MM-DD HH:MM:SS_.
Location information is based on available location information in the UE.
Thus, the Logged MDT measurements are tagged by the UE with location data in
the following manner:
\- ECGI, Cell-Id or NCGI in TS 38.300 [22] of the serving cell when the
measurement was taken is always included in E-UTRAN, UTRAN or NR respectively;
\- Detailed location information (e.g. GNSS location information) is included
if available in the UE when the measurement was taken. If detailed location
information is available, the reporting shall consist of latitude and
longitude. Depending on availability, altitude, uncertainty and confidence may
be also additionally included. UE tags available detailed location information
only once with upcoming measurement sample, and then the detailed location
information is discarded, i.e. the validity of detailed location information
is implicitly assumed to be one logging interval;
\- For NR, sensor information (i.e. uncompensated barometric pressure
measurement, UE speed and UE orientation) can be included, if available in the
UE when the measurement was taken.
NOTE: The neighbour cell measurement information that is provided by the UE
may be used to determine the UE location (RF fingerprint).
Depending on location information availability, measurement log/report
consists of:
\- time information, RF measurements, RF fingerprints; or
\- time information, RF measurements, detailed location information (e.g. GNSS
location information);
time information, RF measurements, detailed location information, sensor
information.
#### 5.1.1.4 MDT context handling
For Logged MDT in IDLE, CELL_PCH, URA_PCH states and CELL_FACH state when
second DRX cycle is used and INACTIVE, no need is identified to transfer an
MDT context (any related configuration information about measurement and
reporting) between (e/g)NBs/RNCs if corresponding MDT configuration has
already been configured to UE. In addition, MDT context is assumed to be
released in the RAN nodes when the UE is in IDLE and INACTIVE if corresponding
MDT configuration has already been configured to UE.
For UE in INACTIVE, the MDT context handling during cell reselection as
described in 5.4.2 apply.
### 5.1.2 Immediate MDT procedures
### 5.1.2.1 Measurement configuration
For Immediate MDT, RAN measurements and UE measurements can be configured. The
configuration for UE measurements is based on the existing RRC measurement
procedures for configuration and reporting with some extensions for location
information.
NOTE: No extensions related to time stamp are expected for Immediate MDT i.e.
time stamp is expected to be provided by eNB/RNC/gNB.
If area scope is included in the MDT configuration provided to the RAN, the UE
is configured with respective measurement when the UE is connected to a cell
that is part of the configured area scope.
#### 5.1.2.2 Measurement reporting
For Immediate MDT, the UE provides detailed location information (e.g. GNSS
location information) if available. The UE also provides available neighbour
cell measurement information that may be used to determine the UE location (RF
fingerprint). ECGI, Cell-Id, or CellIdentity of the serving cell when the
measurement was taken is always assumed known in E-UTRAN, UTRAN or NR
respectively.
The location information which comes with UE radio measurements for MDT can be
correlated with other MDT measurements, e.g. RAN measurements. For MDT
measurements where UE location information is provided separately, it is
assumed that the correlation of location information and MDT measurements
should be done in the TCE based on time-stamps.
#### 5.1.2.3 MDT context handling during handover
The measurements configured in the UE for Immediate MDT should fully comply
with the transferring and reconfiguration principles for the current
measurements configured in the UE for RRM purpose during handover (including
conformance with Rel-8 and Rel-9).
The target node releases the measurements configured in the UE for immediate
MDT which are no longer needed based on any MDT trace configuration it
receives or does not receive.
In addition, MDT configuration handling during handover depends on MDT
initiation from OAM defined in clause 5.1.3:
\- The MDT configuration configured by management based trace function will
not propagate during handover.
\- For LTE, the MDT configuration received by signalling based trace messages
for a specific UE will propagate during intra-PLMN handover, and may propagate
during inter-PLMN handover if the Signalling Based MDT PLMN List is available
and includes the target PLMN. This behaviour applies also for MDT
configuration that includes area scope, regardless of whether the source or
target cell is part of the configured area scope. This behaviour applies also
for Xn inter-RAT handover.
\- For UMTS, the MDT configuration received by signalling based trace messages
for a specific UE will continue during intra-PLMN handover, and may continue
during inter-PLMN handover if the Signalling Based MDT PLMN List is available
and includes the target PLMN, except for the case of SRNS relocation.
\- For NR, the MDT configuration received by signalling based trace messages
for a specific UE will propagate during intra-PLMN handover, and may propagate
during inter-PLMN handover if the Signalling Based MDT PLMN List is available
and includes the target PLMN. This behaviour applies also for MDT
configuration that includes area scope, regardless of whether the source or
target cell is part of the configured area scope. This behaviour applies also
for Xn inter-RAT handover.
NOTE: In the case of SRNS relocation, MDT may be reactivated by the Core
Network following a successful relocation.
### 5.1.3 MDT Initiation
There are two cases that RAN should initiate a MDT measurements collection
task. One is that the MDT task is initiated without targeting a specific UE by
the cell traffic trace, i.e. management based trace function from OAM. The
other is that the MDT task is initiated towards a specific UE by the
signalling trace activation messages from CN nodes, i.e. the Initial Context
Setup message, the Trace Start message or the Handover request message in
E-UTRAN or NR, the CN Invoke Trace message in UTRAN. The detailed procedures
to transfer the MDT configurations to RAN are specified in TS 32.422 [6].
For signalling based MDT, the CN shall not initiate MDT towards a particular
user unless it is allowed.
For management based MDT, the CN indicates to the RAN whether MDT is allowed
to be configured by the RAN for this user considering e.g. user consent and
roaming status (see TS 32.422 [6]), by providing management based MDT allowed
information. For E-UTRAN/UTRAN, the MDT allowed information consists of the
Management Based MDT Allowed indication and optionally the Management Based
MDT PLMN List. For NR, the MDT allowed information only consists of the
Management Based MDT PLMN List. The management based MDT allowed information
propagates during inter-PLMN handover if the Management Based MDT PLMN List is
available and includes the target PLMN.
A UE is configured with an MDT PLMN List only if user consent is valid for the
RPLMN.
### 5.1.4 UE capabilities
MDT relevant UE capabilities are component of radio access UE capabilities.
Thus, the procedures used for handling UE radio capabilities over (E-)UTRAN
and NR apply.
For (E-)UTRAN:
\- The UE indicates one capability bit for support for Logged MDT, which
indicates that the UE supports logging of downlink pilot strength
measurements. The UE may also indicate capability for stand-alone GNSS
positioning.
\- The E-UTRA UE may indicate a capability for RX-TX time difference
measurement for E-CID positioning for MDT.
\- The E-UTRA UE may indicate a capability for support of logging of MBSFN
measurements.
\- The E-UTRA UE may indicate a capability for support of UL PDCP delay
measurement when the UE is not configured with MR-DC.
\- The E-UTRA UE may indicate a capability for support of UL PDCP Packet
Average Delay measurement when the UE is configured with EN-DC.
\- The E-UTRA UE may indicate a capability for support of Bluetooth
measurements in RRC idle mode.
\- The E-UTRA UE may indicate a capability for support of WLAN measurements in
RRC idle mode.
\- The E-UTRA UE may indicate a capability for support of Bluetooth
measurements in RRC connected mode.
\- The E-UTRA UE may indicate a capability for support of WLAN measurements in
RRC connected mode.
\- For UMTS support of the Accessibility measurements is an optional UE
feature.
For NR:
\- The UE indicates one capability bit for support for Logged MDT in RRC idle
and inactive mode, to indicate that the UE supports logging of downlink pilot
strength measurements, periodical logging and event-triggered logging.
\- The UE may indicate capability for stand-alone GNSS positioning.
\- The NR UE may indicate a capability for support of UL PDCP packet average
delay measurement.
\- The NR UE may indicate a capability for support of Bluetooth measurements
in RRC idle and inactive mode.
\- The NR UE may indicate a capability for support of WLAN measurements in RRC
idle and inactive mode.
\- The NR UE may indicate a capability for support of Bluetooth measurements
in RRC connected state.
\- The NR UE may indicate a capability for support of WLAN measurements in RRC
connected state.
\- The NR UE may indicate a capability for support of barometer measurements.
\- The NR UE may indicate a capability for support of orientation
measurements.
\- The NR UE may indicate a capability for support of speed measurements.
### 5.1.5 Void
### 5.1.6 Accessibility measurements
The UE logs failed RRC connection establishments for LTE, UMTS and NR, i.e. a
log is created when the RRC connection establishment procedure fails. For NR,
UE logs any failed connection establishment attempt, i.e. a log is created
when the RRC setup or resume procedure fails. The UE logs failed RRC
connection establishments without the need for prior configuration by the
network.
The UE stores the Selected PLMN on the RRC connection establishment failure or
RRC resume procedure failure. Only if that PLMN is the same as the RPLMN, the
UE may report the log.
NOTE: There is no expected performance degradation for networks using EPLMNs.
The trigger for creating a log related to a failed RRC connection
establishment is for NR when timer T300 expires, for LTE when timer T300
expires and for UMTS when V300 is greater than N300. The trigger for creating
log related to a failed RRC resume procedure is for NR when timer T319
expires.
The UE can store the following information related to the failed RRC
connection establishment or failed RRC resume procedure:
\- Time stamp, which is the elapsed time between logging and reporting the
log.
\- The global cell identity of the serving cell when the RRC connection
establishment or resume fails, i.e. the cell which the UE attempted to access.
\- The latest available radio measurements for any frequency or RAT
\- The latest detailed location information, if available.
\- For LTE:
\- Number of Random Access Preambles transmitted;
\- Indication whether the maximum transmission power was used;
\- Contention detected;
\- The latest WLAN measurement results, if available;
\- The latest Bluetooth measurement results, if available.
\- For UMTS FDD:
\- Number of RRC Connection Request attempts (e.g. T300 expiry after receiving
ACK and AICH)
\- For UMTS 1.28 Mcps TDD:
\- Number of RRC Connection Request attempts.
\- Whether the FPACH is received or whether the maximum number Mmax of
synchronisation attempts is reached.
\- Failure indication of the E-RUCCH transmission. It is only applied when
common E-DCH is supported by UE and network.
\- For NR:
\- SSB index of the downlink beams of serving cell;
\- The latest number of consecutive connection failures in the last failed
cell the UE has experienced independent of RRC state transitions;
\- RACH failure report:
\- Tried SSB index and number of Random Access Preambles transmitted for each
tried SSB in chronological order of attempts;
\- Contention detected as per RACH attempt;
\- Indication whether the selected SSB is above or below the rsrp-ThresholdSSB
threshold, as per RACH attempt;
\- TAC of the cell in which the UE performs the RA procedure;
\- The latest WLAN measurement results, if available;
\- The latest Bluetooth measurement results, if available;
\- The latest sensor information, if available.
In addition, the CEF report may include additional information required for
RACH Optimization solutions, as specified in TS 38.300 [22].
## 5.2 E-UTRAN solutions
### 5.2.1 RRC_CONNECTED
UE in RRC Connected does not support Logged MDT in this release of the
specification, except for the case of logged MDT for MBSFN measurements as
described in clause 5.1.1. In order to support Immediate MDT where MDT
measurements are executed in the UE, the existing RRC measurement
configuration and reporting procedures apply. Some extensions are used to
carry location information.
#### 5.2.1.1 Measurements and reporting triggers for Immediate MDT
Measurements to be performed for Immediate MDT purposes involve reporting
triggers and criteria utilized for RRM. An MDT specific UE-based measurement
for UL PDCP delay is applied for QoS verification purpose. In addition, there
are measurements performed in eNB.
In particular, the following measurements shall be supported for Immediate MDT
performance:
Measurements:
\- M1: RSRP, RSRQ and SINR measurement by UE, see TS 36.214 [9].
\- M2: Power Headroom measurement by UE, see TS 36.213 [11].
\- M3: Received Interference Power measurement by eNB, see TS 36.214 [9]. This
is a cell measurement. One sample is logged each measurement collection
period, where one sample corresponds to a measurement period as specified in
TS 36.133 [3].
\- M4: Data Volume measurement separately for DL and UL, per QCI per UE, by
eNB, see TS 36.314 [13].
\- M5: Scheduled IP Throughput for MDT measurement separately for DL and UL,
per RAB per UE and per UE for the DL, per UE for the UL, by eNB, see TS 36.314
[13]. QCI values of the RABs that have contributed to a measurement value are
logged with the measurement values.
\- M6: Packet Delay measurement, separately for DL and UL, per QCI per UE, see
UL PDCP Delay, by the UE, and Packet Delay in the DL per QCI, by the eNB, TS
36.314 [13].
NOTE 1: If the UE does not detect any UL PDCP delay based on the delay
threshold and delay report interval configured by the network, the UE does not
report any UL PDCP delay measurement within that period.
NOTE 2: A UE in EN-DC mode of operation can be configured with UL PDCP Packet
Average Delay (**_ul-DelayValueConfig_**), if UE is capable of performing the
UL average PDCP queueing delay.
\- M7: Packet Loss rate measurement, separately for DL and UL per QCI per UE,
by the eNB, see Packet Loss rate in the UL and Packet Uu Loss rate in the DL
TS 36.314 [13].
\- M8: RSSI measurement by UE, see TS 36.331 [5].
\- M9: RTT measurement by UE, see TS 36.331 [5].
Measurement collection triggers:
\- For M1:
\- Event-triggered measurement reports according to existing RRM configuration
for events A1, A2, A3, A4, A5 A6, B1 or B2
\- Periodic, A2 event-triggered, or A2 event triggered periodic measurement
report according to MDT specific measurement configuration.
\- For M2:
\- Reception of Power Headroom Report (PHR) according to existing RRM
configuration.
NOTE 3: PHR is carried by MAC signalling. Thus, the existing mechanism of PHR
transmission applies, see TS 36.321 [10].
\- For M3:
\- End of measurement collection period
\- For M4:
\- End of measurement collection period.
\- For M5:
\- End of measurement collection period.
\- For M6:
\- End of measurement collection period.
\- For M7:
\- End of measurement collection period.
\- For M8:
\- Associated to M1 and/or M6 related measurement reporting triggers.
\- For M9:
\- Associated to M1 and/or M6 related measurement reporting triggers.
#### 5.2.1.2 Enhancement to Radio Link Failure report
The Radio Link Failure report contains information related to the latest
connection failure experienced by the UE. The connection failure can be Radio
Link Failure (RLF) or Handover Failure (HOF). The contents of the RLF report
and the procedure for retrieving it by an eNB are described in TS 36.300 [12].
RLF reports can be collected by OAM. Upon RLF/HOF detection in the UE,
_rlfReport_ defined in TS 36.331 [5] also includes available location
information on where RLF occurred, i.e. if detailed location information (e.g.
GNSS location information) is available the reported location information in
_rlfReport_ consists of:
\- Latitude, longitude (mandatory)
\- Altitude (conditional on availability)
\- Velocity (conditional on availability)
\- Uncertainty (conditional on availability)
\- Confidence (conditional on availability)
\- Direction (conditional on availability).
As an indication of impact to MMTEL calls the UE indicates in the radio link
failure report whether a radio bearer with QCI 1 was established when radio
link failure was detected.
RLF reports may also include available WLAN measurement results and/or
Bluetooth measurement results for calculating UE location.
If available, the UE can indicate NR neighbor cell measurements in
measurements results.
#### 5.2.1.3 Detailed Location Information
The M1 measurements are tagged by the UE with location data in the following
manner:
\- Detailed location information (e.g. GNSS location information) is included
if available in the UE when the measurement was taken. If detailed location
information is available, the reporting shall consist of latitude and
longitude. Depending on availability, altitude, uncertainty and confidence may
be also additionally included. The UE should include the available detailed
location information only once. If the detailed location information is
obtained by GNSS positioning method, GNSS time information shall be included.
For both event based and periodic reporting (see 5.2.1.1), the detailed
location information is included if the report is transmitted within the
validity time after the detailed location information was obtained. The
validity evaluation of detailed location information is left to UE
implementation.
\- To support UE location information in SCG failure, the location information
(i.e. commonLocationInfo, see TS 38.331 [15] and WLAN and BT information, if
available) is included in _SCGFailureInformation_ message, see TS 36.331 [5].
For immediate MDT, the eNB can request the UE to attempt to make GNSS location
information available. Standalone GNSS is used as the default baseline. It is
desired that the UE provides fresh location information with each immediate
MDT measurement report. The details how this is achieved is up to UE
implementation.
The eNB may use an Enhanced Cell ID mechanism for location. The eNB forwards
the raw E-CID specific measurements to the TCE. When E-CID positioning is
requested, the eNB may choose to not use E-CID positioning for collected
measurement for which the UE provides detailed location information.
### 5.2.2 RRC_IDLE
For UE in RRC_IDLE state Logged MDT procedures as described in 5.1.1 apply.
Logged MDT measurements are sent on Signalling Radio Bearer SRB2 in
RRC_CONNECTED state.
## 5.3 UTRAN solutions
### 5.3.1 UTRA RRC Connected
In CELL_PCH, URA_PCH states and CELL_FACH state when second DRX cycle is used,
UE supports Logged MDT as described in 5.1.1. In CELL_DCH state UE supports
Immediate MDT as described in 5.1.2. In CELL_FACH state when second DRX cycle
is not used, MDT is not supported in the current release.
#### 5.3.1.1 Measurements and reporting events for Immediate MDT
The solutions for Immediate MDT in UTRAN are only applicable for UEs in
CELL_DCH state. Measurements to be performed for Immediate MDT purposes
involve normal UTRAN reporting triggers and criteria utilized for controlling
the RRC connection. In addition, there are measurements defined that are
performed in UTRAN. In particular, the following measurements shall be
supported for Immediate MDT:
Measurements:
\- M1: CPICH RSCP and CPICH Ec/No measurement (FDD) by UE, see TS 25.215 [7].
\- M2: **P-CCPCH RSCP and Timeslot ISCP for UTRA 1.28 Mcps TDD by UE** , see
TS 25.225 [8].
\- M3: SIR and SIR error (FDD) by NodeB, see TS 25.215 [7] and TS 25.225 [8].
\- M4: UE power headroom (UPH) by the UE, applicable for E-DCH transport
channels, see TS 25.215 [7] and TS 25.225 [8].
\- M5: Received total wideband power (RTWP) by Node B, see TS 25.215 [7] TS
25.225 [8], and TS 25.133 [2]. This is a cell measurement.
\- M6: Data Volume measurement, separately for DL and UL, per QoS class per
UE, by RNC.
\- M7: Throughput measurement, separately for DL and UL, per RAB per UE and
per UE, by RNC. Traffic class and Traffic Handling Priority for interactive
RABs for the RABs that have contributed to a measurement value are logged with
the measurement values.
Measurement collection triggers:
\- For M1:
\- Event triggered measurement reports according to existing RRM
configuration, for measurement types intra-frequency measurement, inter-
frequency measurement and inter-RAT measurement.
\- Periodic, or 1F event-triggered measurement report, primary CPICH becomes
worse than an absolute threshold, according to MDT specific measurement
configuration.
\- For M2:
\- Event triggered measurement reports according to existing RRM
configuration, for measurement types intra-frequency measurement, inter-
frequency measurement and inter-RAT measurement.
\- Periodic, or 1I event-triggered measurement report, timeslot ISCP above a
certain threshold (TDD), according to MDT specific measurement configuration.
\- For M3:
\- When available
\- For M4:
\- Reception of UPH according to existing RRM configuration
\- Provided by the UE according to RRM configuration.
\- UPH samples may be collected and logged:
> \- always
>
> \- periodic, one sample per period.
>
> \- periodic, one sample per period, when measurement value \ If detailed location information (e.g. GNSS location information) is
> available the reported location information in _rlf-Report_ consists of:
\- Latitude, longitude (mandatory);
\- Altitude (conditional on availability);
\- Velocity (conditional on availability);
\- Uncertainty (conditional on availability);
\- Confidence (conditional on availability);
\- Direction (conditional on availability).
If sensor information is available, the sensor information may convey
uncompensated barometric pressure, UE speed, and UE orientation.
In addition, the RLF report may include additional information required for
MRO solutions, as specified in TS 38.300 [22].
#### 5.4.1.3 Immediate MDT for MR-DC
Immediate MDT is supported for EN-DC scenario.
In signalling based immediate MDT, MME provides MDT configuration for both MN
and SN towards MN including multi RAT SN configuration, specifically E-UTRA
and NR MDT configuration. MN then forwards the NR MDT configuration towards SN
(EN-DC scenario, SN is always NR).
In management-based immediate MDT, OAM provides the MDT configuration to both
MN and SN independently. For both MN and SN, Management based MDT should not
overwrite signalling based MDT.
For immediate MDT configuration, MN and SN can independently configure and
receive measurement from the UE.
### 5.4.2 RRC_IDLE & RRC_INACTIVE
For UE in RRC_IDLE and RRC_INACTIVE states Logged MDT procedures as described
in 5.1.1 apply.
For Logged MDT measurement collection for RRC INACTIVE UEs, the actual process
of logging within the UE, takes place in RRC INACTIVE state and may be
continued in RRC IDLE state; or vice versa.
The logged measurement stored in UE during RRC INACTIVE and RRC IDLE state are
kept for a given common period before they are deleted as in LTE MDT.
If the signalling based logged or immediate MDT configuration received by the
NG-RAN when UE is in RRC_INACTIVE:
\- The NG-RAN stores the MDT configuration in the UE context;
\- When the UE resumes the RRC connection in the last serving NG-RAN, the NG-
RAN can configure the MDT configuration for the UE;
\- When the UE resumes the RRC connection in one new NG-RAN, the new NG-RAN
can configure the MDT configuration for the UE, only if the signalling based
logged MDT was received by the new NG-RAN from the previous NG-RAN or AMF.
If the management based MDT configuration is received by the NG-RAN when UE is
in RRC_INACTIVE,
\- No requirement for the NG-RAN to store the MDT configuration in the UE
context;
\- When the UE resumes the RRC connection in the last serving NG-RAN, the NG-
RAN can configure the MDT configuration for the UE;
\- When the UE resumes the RRC connection in another NG-RAN, the source NG-RAN
will not propagate the management based MDT configuration. The source NG-RAN
should inform the target NG-RAN of UE consents.
Logged MDT measurements are sent on Signalling Radio Bearer SRB2 in
RRC_CONNECTED state.
###### ## Annex A (informative): Coverage use cases
The MDT data reported from UEs and the RAN may be used to monitor and detect
coverage problems in the network. Some examples of use cases of coverage
problem monitoring and detection are described in the following:
**\- Coverage hole:** A coverage hole is an area where the signal level SNR
(or SINR) of both serving and allowed neighbor cells is below the level needed
to maintain basic service (SRB & DL common channels), i.e. coverage of PDCCH.
Coverage holes are usually caused by physical obstructions such as new
buildings, hills, or by unsuitable antenna parameters, or just inadequate RF
planning. UE in coverage hole will suffer from call drop and radio link
failure. Multi-band and/or Multi-RAT UEs may go to other network layer
instead.
**\- Weak coverage:** Weak coverage occurs when the signal level SNR (or SINR)
of serving cell is below the level needed to maintain a planned performance
requirement (e.g. cell edge bit-rate).
**\- Pilot Pollution:** In areas where coverage of different cells overlap a
lot, interference levels are high, power levels are high, energy consumption
is high and cell performance may be low. This problem phenomenon has been
called \"pilot pollution\", and the problem can be addressed by reducing
coverage of cells. Typically in this situation UEs may experience high SNR to
more than one cell and high interference levels.
**\- Overshoot coverage:** Overshoot occurs when coverage of a cell reaches
far beyond what is planned. It can occur as an \"island\" of coverage in the
interior of another cell, which may not be a direct neighbor. Reasons for
overshoot may be reflections in buildings or across open water, lakes etc. UEs
in this area may suffer call drops or high interference. Possible actions to
improve the situation include changing the coverage of certain cells and
mobility blacklisting of certain cells.
**\- Coverage mapping:** There should be knowledge about the signal levels in
the cell areas in order to get a complete view for the coverage and be able to
assess the signal levels that can be provided in the network. This means that
there should be measurements collected in all parts of the network, and not
just in the areas where there are potential coverage issues.
**\- UL coverage: Poor UL coverage might impact user experience** in terms of
call setup failure / call drop / poor UL voice quality. Therefore, coverage
should be balanced between uplink and downlink connections. Possible UL
coverage optimization comprises adapting the cellular coverage by changing the
site configuration (antennas) but also about adjusting the UL related
parameters in the way that they allow optimized usage of UL powers in
different environments.
\- **Cell boundary mapping:** There should be knowledge about the location of
(intra/inter RAT) cell boundaries in order to compare to the expected/planned
network setting. Poor handover performance may be caused by changed cell
boundaries due to changes in the physical condition of the surrounding area,
e.g., construction of new buildings, bridge or tunnel near the handover area.
\- **Coverage mapping for pico cell in CA scenario:** As a realization of CA
scenario 4 in TS 36.300 [12], pico cell may be deployed in area where high
traffic occurs. The location where a pico cell is available to be added as an
SCell may show whether the deployment of pico cell is according to the needs
of capacity increase.
###### ## Annex B (informative): QoS verification use cases
The MDT data reported from UEs and the RAN may be used to verify Quality of
Service, assess user experience from RAN perspective, and to assist network
capacity extension. Use cases are described in the following:
**\- Traffic Location:** MDT functionality to obtain information of where data
traffic is transferred within a cell.
**\- User QoS Experience:** MDT functionality to assess the QoS experience for
a specific UE together with location information.
\- Data Throughput measurements can be collected, aiming to reflect QoS for
bandwidth limited traffic.
\- For E-UTRA, Data Loss and Latency measurements can be collected, aiming to
reflect QoS for conversational traffic.
###### ## Annex C (informative): Measurements
This annex provides information on measurements that are used for MDT and are
not specified elsewhere.
**Throughput measurement for UMTS**. The throughput is measured on PDCP or RLC
level. A measurement value for a UE and each RAB of the UE is provided each
measurement period, except if the value is zero. The measurement is performed
separately for UL and DL, and is performed for PS RABs. Idle periods shall not
be taken into account, when there is no data buffered or no data being
transmitted.
**Data Volume measurement for UMTS**. Data Volume is measured on PDCP or RLC
(without Layer 2 overhead). A measurement value for a QoS class for a UE is
provided each measurement period, except if the value is zero, where the QoS
class is one of conversational, interactive, streaming or background. The
measurement is performed separately for UL and DL, and is performed for PS
RABs.
###### ## Annex D (informative): MBSFN use cases
The MDT data reported from UEs may be used to verify signal strength, signal
quality and block error rates for MBSFN reception, to support network
verification, re-planning of MBSFN areas, and optimization of MBSFN operation
parameters.
#