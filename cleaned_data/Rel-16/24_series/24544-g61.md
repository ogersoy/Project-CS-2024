# Foreword
This Technical Specification has been produced by the 3rd Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
In the present document, modal verbs have the following meanings:
**shall** indicates a mandatory requirement to do something
**shall not** indicates an interdiction (prohibition) to do something
The constructions \"shall\" and \"shall not\" are confined to the context of
normative provisions, and do not appear in Technical Reports.
The constructions \"must\" and \"must not\" are not used as substitutes for
\"shall\" and \"shall not\". Their use is avoided insofar as possible, and
they are not used in a normative context except in a direct citation from an
external, referenced, non-3GPP document, or so as to maintain continuity of
style when extending or modifying the provisions of such a referenced
document.
**should** indicates a recommendation to do something
**should not** indicates a recommendation not to do something
**may** indicates permission to do something
**need not** indicates permission not to do something
The construction \"may not\" is ambiguous and is not used in normative
elements. The unambiguous constructions \"might not\" or \"shall not\" are
used instead, depending upon the meaning intended.
**can** indicates that something is possible
**cannot** indicates that something is impossible
The constructions \"can\" and \"cannot\" are not substitutes for \"may\" and
\"need not\".
**will** indicates that something is certain or expected to happen as a result
of action taken by an agency the behaviour of which is outside the scope of
the present document
**will not** indicates that something is certain or expected not to happen as
a result of action taken by an agency the behaviour of which is outside the
scope of the present document
**might** indicates a likelihood that something will happen as a result of
action taken by some agency the behaviour of which is outside the scope of the
present document
**might not** indicates a likelihood that something will not happen as a
result of action taken by some agency the behaviour of which is outside the
scope of the present document
In addition:
**is** (or any other verb in the indicative mood) indicates a statement of
fact
**is not** (or any other negative verb in the indicative mood) indicates a
statement of fact
The constructions \"is\" and \"is not\" do not indicate requirements.
# 1 Scope
The present document specifies the protocol aspects for the group management
capability of SEAL to support vertical applications (e.g. V2X) over the 3GPP
system.
The present document is applicable to the User Equipment (UE) supporting the
group management client functionality as described in 3GPP TS 23.434 [2], to
the application server supporting the group management server functionality as
described in 3GPP TS 23.434 [2] and to the application server supporting the
vertical application server (VAL server) functionality as defined in specific
vertical application service (VAL service) specification.
NOTE: The specification of the VAL server for a specific VAL service is out of
scope for present document.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 23.434: \"Service Enabler Architecture Layer for Verticals (SEAL);
Functional architecture and information flows;\".
[3] IETF RFC 4825: \"The Extensible Markup Language (XML) Configuration Access
Protocol (XCAP)\".
[4] OMA OMA-TS-XDM_Group-V1_1_1-20170124-A: \"Group XDM Specification\".
[5] 3GPP TS 24.547: \"Identity management - Service Enabler Architecture Layer
for Verticals (SEAL); Protocol specification;\".
[6] IETF RFC 6750: \"The OAuth 2.0 Authorization Framework: Bearer Token
Usage\".
[7] OMA OMA-SUP-XSD_poc_listService-V1_0: \"PoC - List Service\", version 1.0.
[8] OMA OMA-SUP-XSD_xdm_extensions-V1_0: \"XML Schema Definition: XDM
Extensions\", version 1.0.
[9] OMA OMA-SUP-XSD_xdm2_1_extensions-V1_0: \"XML Schema Definition: XDM 2.1
-- Extensions\", version 1.0.
[10] IETF RFC 7159: \"The JavaScript Object Notation (JSON) Data Interchange
Format\".
[11] 3GPP TS 24.229: \"IP multimedia call control protocol based on Session
Initiation Protocol (SIP) and Session Description Protocol (SDP); Stage 3\".
[12] IETF RFC 5875: \"An Extensible Markup Language (XML) Configuration Access
Protocol (XCAP) Diff Event Package\".
[13] IETF RFC 6050 (November 2010): \"A Session Initiation Protocol (SIP)
Extension for the Identification of Services\".
[14] IETF RFC 6665 (July 2012): \"SIP-Specific Event Notification\".
[14A] 3GPP TS 24.545: \"Location Management - Service Enabler Architecture
Layer for Verticals (SEAL); Protocol specification\".
# 3 Definitions of terms and abbreviations
## 3.1 Terms
For the purposes of the present document, the terms given in 3GPP TR 21.905
[1] and the following apply. A term defined in the present document takes
precedence over the definition of the same term, if any, in 3GPP TR 21.905
[1].
**SEAL group management client** : An entity that provides the client side
functionalities corresponding to the SEAL group management service.
**SEAL group management server** : An entity that provides the server side
functionalities corresponding to the SEAL group management service.
For the purposes of the present document, the following terms and definitions
given in 3GPP TS 23.434 [2] apply:
**SEAL client**
**SEAL server**
**SEAL service**
**VAL group**
**VAL group member**
**VAL server**
**VAL service**
**VAL user**
**Vertical**
**Vertical application**
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in 3GPP TR
21.905 [1] and the following apply. An abbreviation defined in the present
document takes precedence over the definition of the same abbreviation, if
any, in 3GPP TR 21.905 [1].
MIME Multipurpose Internet Mail Extensions
SEAL Service Enabler Architecture Layer for verticals
SGM-C SEAL Group Management Client
SGM-S SEAL Group Management Server
# 4 General description
Group management is a SEAL service that provides the group management related
capabilities to one or more vertical applications. The present document
enables a SEAL group management client (SGM-C) and a VAL server to manage
group documents in a SEAL group management server (SGM-S).
# 5 Functional entities
## 5.1 SEAL group management client (SGM-C)
The SGM-C is a functional entity that acts as the application client for
management of groups. To be compliant with the procedures in the present
document, a SGM-C:
\- shall support the role of XCAP client as specified in IETF RFC 4825 [3];
\- shall support the role of XDMC as specified in OMA OMA-TS-XDM_Group-V1_1_1
[4];
\- shall support the procedure in clause 6.2.2;
\- shall support the procedure in clause 6.2.3;
\- shall support the procedure in clause 6.2.4;
\- shall support the procedure in clause 6.2.5;
\- shall support the procedure in clause 6.2.6;
\- shall support the procedure in clause 6.2.7;
\- shall support the procedure in clause 6.2.8;and
\- shall support the procedure in clause 6.2.9.
## 5.2 SEAL group management server (SGM-S)
The SGM-S functional entity provides for management of groups supported within
the vertical application layer. To be compliant with the procedures in the
present document, a SGM-S:
\- shall support the role of XCAP server as specified in IETF RFC 4825 [3];
\- shall support the role of Group XDMS as specified in OMA OMA-TS-
XDM_Group-V1_1_1 [4];
\- shall support the procedure in clause 6.2.2;
\- shall support the procedure in clause 6.2.3;
\- shall support the procedure in clause 6.2.4;
\- shall support the procedure in clause 6.2.5;
\- shall support the procedure in clause 6.2.6;
\- shall support the procedure in clause 6.2.7;
\- shall support the procedure in clause 6.2.8;and
\- shall support the procedure in clause 6.2.9.
# 6 Group management procedures
## 6.1 General
## 6.2 On-network procedures
### 6.2.1 General
#### 6.2.1.1 Authenticated identity in HTTP request
Upon receiving an HTTP request, the SGM-S shall authenticate the identity of
the sender of the HTTP request as specified in 3GPP TS 24.547 [5], and if
authentication is successful, the SGM-S shall use the identity of the sender
of the HTTP request as an authenticated identity.
### 6.2.2 Group creation procedure
#### 6.2.2.1 Client procedure
Upon receiving a request from the VAL user to create a group document, the
SGM-C shall create an XML document as specified in clause 7 and shall send the
XML document to the SGM-S according to procedures specified in IETF RFC 4825
[3] \"_Create or Replace a Document_ \". In the HTTP PUT request, the SGM-C:
a) shall set the Request URI to a XCAP URI identifying an XML document to be
created. In the Request-URI:
1) the \"XCAP Root\" is set to the URI of the SGM-S;
2) the \"auid\" is set to specific VAL service identity; and
3) the document selector is set to a document URI pointing to a group document
addressed by a group ID;
b) shall include an Authorization header field with the \"Bearer\"
authentication scheme set to an access token of the \"bearer\" token type as
specified in IETF RFC 6750 [6];
> c) shall include a Content-Type header field set to
> \"application/vnd.3gpp.seal-group-doc+xml\"; and
>
> d) shall include an application/vnd.3gpp.seal-group-doc+xml MIME body and in
> the \ root element:
1) shall set \"uri\" attribute to the VAL group identity to be created;
2) may include \ element containing a human readable name of the
VAL group;
3) if the VAL user has requested to include administrator users, shall include
\ element of a \ element with list of
administrator users.
4) if the list of users available who are required to give user consent to be
member for the group, shall include such list of users into the \ element of a \ element;
5) if the list of users available who are members of the group, shall include
such list of users into the \ element of a \ element;
6) shall include \ element of a \ element. The \
element:
i) may include \ element indicating the title or description for
the group;
ii) shall include \ element indicating the category of the group;
and
iii) shall include one or more \ element(s) indicating list of
supported services by the group; and
iv) if the request is to configure VAL group request, shall include one or
more \ element(s), each element indicating list of geographical areas
to be addressed by the group; and
7) shall include \ element of a \. The
\ element:
i) may include \ element to the priority as specified by VAL
user.
Upon receiving an HTTP 200 (OK), the SGM-C shall notify the VAL user about
successful group registration. Based on VAL user's request, if group events
subscription is not already created, then the SGM-C shall create the group
events subscription as specified in clause 6.2.8.1.1 for the event
SUBSCRIBE_GROUP_MODIFICATION (0x02) as defined in clause A.1.2. If group
events subscription already exists then the SGM-C shall modify the
subscription as specified in clause 6.2.8.1.2.
#### 6.2.2.2 Server procedure
Upon reception of an HTTP PUT request where the Request-URI of the HTTP PUT
request identifies an XML document as specified in clause 7, the SGM-S:
a) shall determine the identity of the sender of the received HTTP PUT request
as specified in clause 6.2.1.1, and:
1) if the identity of the sender of the received HTTP PUT request is not
authorized to initiate group creation, shall respond with a HTTP 403
(Forbidden) response to the HTTP PUT request and skip rest of the steps;
b) if value of the group URI received in HTTP PUT request does not conform to
local policy, shall respond with an HTTP 409 (Conflict) response to the HTTP
PUT request. The \ error element shall identify the error
condition. The SGM-S shall include at least one \ element in the
\ error element, whereby each \ element
contains a Group ID acceptable for the SGM-S. The SGM-S shall skip rest of the
steps; and
c) shall support receiving an XML document according to procedures specified
in IETF RFC 4825 [3] \"_PUT Handling_ \" where the Request-URI of the HTTP PUT
request identifies an XML document.
Upon successful creation of group, for each VAL user in \ element of a
\ element of the group document, the SGM-S shall send Group
Announcement notification as specified in clause 6.2.7.3.1 with following
clarification:
a) shall set the \"IsJoinReq\" parameter to \"false\"; and
b) shall include the \"Members-list\" parameter as specified in clause B.2.
#### 6.2.2.3 Group member client procedure
Upon receiving an HTTP POST request over a call back URI which was given to
SGM-S at time of group events subscription, the SGM-C shall follow the
procedure as specified in clause 6.2.7.2.1.
### 6.2.3 Group information query procedure
#### 6.2.3.1 Client procedure
Upon receiving a request from the VAL user to retrieve an element of a group
document, the SGM-C shall send an HTTP GET request to the SGM-S according to
procedures specified in IETF RFC 4825 [3] \"_Fetch an Element_ \". In HTTP GET
request, the SGM-C:
a) shall set the Request-URI to a XCAP URI identifying an element within an
XML document to be queried. In the Request-URI:
1) the \"XCAP Root\" is set to the URI of the SGM-S;
2) the \"auid\" is set to specific VAL service identity;
3) the document selector is set to a document URI pointing to a group document
addressed by a group ID which contains the element to be queried; and
4) the node selector is set to a node URI identifying the element to be
queried; and
b) shall include an Authorization header field with the \"Bearer\"
authentication scheme set to an access token of the \"bearer\" token type as
specified in IETF RFC 6750 [6].
#### 6.2.3.2 Server procedure
Upon reception of an HTTP GET request where the Request-URI of the HTTP GET
request identifies an element of a XML document as specified in clause 7, the
SGM-S:
a) shall determine the identity of the sender of the received HTTP GET request
as specified in clause 6.2.1.1, and:
1) if the identity of the sender of the received HTTP GET request is not
authorized to query group information, shall respond with a HTTP 403
(Forbidden) response to the HTTP GET request and skip rest of the steps;
b) shall support handling an HTTP GET request from a SGM-C according to
procedures specified in IETF RFC 4825 [3] \"_GET Handling_ \".
### 6.2.4 Group membership procedure
#### 6.2.4.1 Client procedure
Upon receiving a request from the VAL user to update group membership element
of a group document, a SGM-C shall send an HTTP PUT request to the SGM-S
according to procedures specified in IETF RFC 4825 [3] \"_Create or Replace an
Element_ \". In HTTP PUT request, the SGM-C:
a) shall set the Request-URI to a XCAP URI identifying an element within an
XML document to be updated. In the Request-URI:
1) the \"XCAP Root\" is set to the URI of the SGM-S;
2) the \"auid\" is set to specific VAL service identity;
3) the document selector is set to a document URI pointing to a group document
addressed by a group ID which contains the element to be updated; and
4) the node selector is set to a node URI identifying the element to be
updated; and
b) shall include an Authorization header field with the \"Bearer\"
authentication scheme set to an access token of the \"bearer\" token type as
specified in IETF RFC 6750 [6].
NOTE: The VAL client can use the procedure specified in this clause to update
all possible elements which can be updated.
#### 6.2.4.2 Server procedure
Upon reception of an HTTP PUT request where the Request-URI of the HTTP PUT
request identifies an element of a XML document as specified in clause 7, the
SGM-S:
a) shall determine the identity of the sender of the received HTTP PUT request
as specified in clause 6.2.1.1, and:
1) if the identity of the sender of the received HTTP PUT request is not
authorized to update group information, shall respond with a HTTP 403
(Forbidden) response to the HTTP PUT request and skip rest of the steps;
b) shall support handling an HTTP PUT request from a SGM-C according to
procedures specified in IETF RFC 4825 [3] \"_PUT Handling_ \".
Upon successful modification of the group, the SGM-S shall notify all group
members about the group modification by following the procedure specified in
clause 6.2.8.2.2.2. In the group modify notification, the SGM-S shall set the
\"modificationType\" parameter to the value GROUP_MEMBER_ADDED (0x01) as
specified in clause B.3.
### 6.2.5 Group configuration management procedure
#### 6.2.5.1 Update group configuration
##### 6.2.5.1.1 Client procedure
Upon receiving a request from the VAL user to update a group document, the
SGM-C shall create an XML document as specified in clause 7 and shall send the
XML document to the SGM-S according to procedures specified in IETF RFC 4825
[3] \"_Create or Replace a Document_ \". In the HTTP PUT request, the SGM-C:
a) shall set the Request URI to a XCAP URI identifying an XML document to be
updated. In the Request-URI:
1) the \"XCAP Root\" is set to the URI of the SGM-S;
2) the \"auid\" is set to specific VAL service identity; and
3) the document selector is set to a document URI pointing to a group document
addressed by a group ID;
b) shall include an Authorization header field with the \"Bearer\"
authentication scheme set to an access token of the \"bearer\" token type as
specified in IETF RFC 6750 [6];
> c) shall include a Content-Type header field set to
> \"application/vnd.3gpp.seal-group-doc+xml\"; and
>
> d) shall include an application/vnd.3gpp.seal-group-doc+xml MIME body and in
> the \ root element:
1) shall set \"uri\" attribute to the VAL group identity to be created;
2) may include \ element containing a human readable name of the
VAL group;
3) if the VAL user has requested to include administrator users, shall include
\ element of a \ element with list of
administrator users.
4) if the list of users available who are required to give user consent to be
member for the group, shall include such list of users into the \ element of a \ element;
5) if the list of users available who are members of the group, shall include
such list of users into the \ element of a \ element;
6) shall include \ element of a \ element. The \
element:
i) may include \ element indicating the title or description for
the group;
ii) shall include \ element indicating the category of the group;
and
iii) shall include \ element indicating list of supported
services by the group; and
7) shall include \ element of a \. The
\ element:
i) may include \ element to the priority as specified by VAL
user
##### 6.2.5.1.2 Server procedure
Upon reception of an HTTP PUT request where the Request-URI of the HTTP PUT
request identifies an XML document as specified in clause 7, the SGM-S:
a) shall determine the identity of the sender of the received HTTP PUT request
as specified in clause 6.2.1.1, and:
1) if the identity of the sender of the received HTTP PUT request is not
authorized to update the group document, shall respond with a HTTP 403
(Forbidden) response to the HTTP PUT request and skip rest of the steps;
b) shall support receiving an XML document as specified in application usage
of the specific vertical application according to procedures specified in IETF
RFC 4825 [3] \"_PUT Handling_ \".
Upon successful modification of the group, the SGM-S shall notify all group
members about the group modification by following the procedure specified in
clause 6.2.8.2.2.2. In the group modify notification, the SGM-S shall set the
\"modificationType\" parameter to the value GROUP_CONFIG_UPDATE (0x03) as
specified in clause B.3.
#### 6.2.5.2 Retrieve group document
##### 6.2.5.2.1 Client procedure
Upon receiving a request from the VAL user to retrieve a group document, the
SGM-C shall send an HTTP GET request to the SGM-S according to procedures
specified in IETF RFC 4825 [3] \"_Fetch a Document_ \". In HTTP GET request,
the SGM-C:
a) shall set the Request-URI to a XCAP URI identifying an XML document to be
retrieved. In the Request-URI:
1) the \"XCAP Root\" is set to the URI of the SGM-S;
2) the \"auid\" is set to specific VAL service identity; and
3) the document selector is set to a document URI pointing to a group document
addressed by a group ID; and
b) shall include an Authorization header field with the \"Bearer\"
authentication scheme set to an access token of the \"bearer\" token type as
specified in IETF RFC 6750 [6].
##### 6.2.5.2.2 Server procedure
Upon reception of an HTTP GET request where the Request-URI of the HTTP GET
request identifies an XML document as specified in clause 7, the SGM-S:
a) shall determine the identity of the sender of the received HTTP GET request
as specified in clause 6.2.1.1, and:
1) if the identity of the sender of the received HTTP GET request is not
authorized to retrieve the group document, shall respond with a HTTP 403
(Forbidden) response to the HTTP GET request and skip rest of the steps;
b) shall support receiving an XML document as specified in application usage
of the specific vertical application according to procedures specified in IETF
RFC 4825 [3] \"_GET Handling_ \".
### 6.2.6 Location-based group creation procedure
#### 6.2.6.1 Client procedure
Upon receiving a request from the VAL user to create a location based group,
the SGM-C shall follow the procedure as defined in clause 6.2.2.1 with
following clarifications.
The SGM-C:
a) shall set \ child element of \ element of a \ element to the value \"location-based\" as defined in clause 7;
b) shall set the location of tracking area in the \ child
element of \ element of a \ element;
#### 6.2.6.2 Server procedure
Upon receiving HTTP PUT request with \ child element of \
element of a \ element set to the value \"location-based\", the
SGM-S shall follow the procedure as defined in clause 6.2.2.2 with following
clarifications. The SGM-S:
1) shall obtain the list of users based on location as specified in clause
6.2.9 of 3GPP TS 24.545 [14A] and update the list of users in group document.
### 6.2.7 Group announcement and join procedure
#### 6.2.7.1 General
Upon successful creation of the group as specified in clause 6.2.2, the SGM-S
follow the procedure specified in clause 6.2.7.3 to notify group announcement
to group members and to handle group registration request from SGM-C. The
SGM-C shall follow the procedure specified in clause 6.2.7.2 to handle
received group announcement notification and to request group registration.
#### 6.2.7.2 Client procedure
##### 6.2.7.2.1 Receiving group announcement notification
Upon receiving an HTTP POST request over a call back URI which was given to
SGM-S at time of group events subscription, the SGM-C:
a) shall match subscription identity received in the \"Identity\" parameter of
the HTTP POST request with the locally stored identity of the subscription. If
subscription identity is not valid, then
1) send an HTTP 406 (Not Acceptable) response and skip rest of the steps;
b) shall send an HTTP 200 (OK); and
c) if \"Event\" parameter is set to SUBSCRIBE_GROUP_ANNOUNCEMENT (0x01) as
specified in clause B.2, shall notify the VAL user about announcement of group
with group-ID and subject. If the notification contains \"IsJoinReq\"
parameter with value set to "true", the SGM-C shall ask VAL user to join the
group. The SGM-C may also decide to store the group announcement based on
user's request.
##### 6.2.7.2.2 Sending group registration request
Upon receiving request from VAL user to join the group, the SGM-C:
a) shall generate an HTTP POST request. In the HTTP POST request:
1) shall set the Request URI to the value \"/group-registration\";
2) shall include the Host header with public user identity of SGM-S;
3) shall include an Authorization header field with the \"Bearer\"
authentication scheme set to an access token of the \"bearer\" token type as
specified in IETF RFC 6750 [6]; and
4) shall include in the HTTP request entity-body the \"group-ID\" parameter
set to the group URI received in group announcement notification; and
b) shall send an HTTP POST request to SGM-S.
Upon receiving an HTTP 200 (OK), the SGM-C shall notify the VAL user about
successful group registration. Based on VAL user's request, if group events
subscription is not already created, then the SGM-C shall create the group
events subscription as specified in clause 6.2.8.1.1 for the event
SUBSCRIBE_GROUP_MODIFICATION (0x02) and SUBSCRIBE_GROUP_IDENTITY_LIST (0x04)
as defined in clause A.1.2. If group events subscription already exists then
the SGM-C shall modify the subscription as specified in the clause 6.2.8.1.2.
##### 6.2.7.2.3 Receiving group identity list notification
Upon receiving an HTTP POST request over a call back URI which was given to
SGM-S at time of group events subscription, the SGM-C:
a) shall match subscription identity received in the \"Identity\" parameter of
the HTTP POST request with the locally stored identity of the subscription. If
subscription identity is not valid, then
1) send an HTTP 406 (Not Acceptable) response and skip rest of the steps;
b) shall send an HTTP 200 (OK); and
c) if \"Event\" parameter is set to SUBSCRIBE_GROUP_IDENTITY_LIST (0x04) as
specified in clause B.4, shall notify the VAL user about group list members.
#### 6.2.7.3 Server procedure
##### 6.2.7.3.1 Sending group announcement notification
Upon successful creation of group, for each VAL user in \ element of a \ element of the group document, the SGM-S:
a) shall check whether valid group events subscription exists for event
SUBSCRIBE_GROUP_ANNOUNCEMENT (0x01) as defined in clause A.1.2 or not; if
valid subscription does not exists then skip rest of the steps;
b) shall generate an HTTP POST message to notify group announcement. In the
HTTP POST message:
1) shall set request URI to call back URI received at the time of creating
subscription;
2) shall set Content-Type header to \"application/json\"; and
3) shall include an HTTP request entity-body serialized into a JavaScript
Object Notation (JSON) structure; In the entity-body:
i) shall set the \"Identity\" parameter to the identity of the subscription;
ii) shall set the \"Event\" parameter to the value
SUBSCRIBE_GROUP_ANNOUNCEMENT (ox01) as specified in clause B.2;
iii) shall set the \"GroupID\" parameter to the identity of the VAL Group;
iv) may set the \"Subject\" parameter to the value of \ child
element of a \ element of a \ element from the group
document;
v) shall set the \"IsJoinReq\" parameter to "true";
vi) may include the \"Val-services\" parameter as specified in clause B.2;
vii) if there are no privacy concerns with sharing the identity list, may
include the \"Members-list\" parameter as specified in clause B.2.
c) shall send the HTTP POST request towards SGM-C.
##### 6.2.7.3.2 Receiving group registration request
Upon reception of an HTTP POST request where the Request-URI of the HTTP POST
request is set to \"/group-registration\", the SGM-S:
a) shall determine the identity of the sender of the received HTTP POST
request as specified in clause 6.2.1.1, and:
1) if the identity of the sender of the received HTTP POST request is not
authorized user, shall respond with an HTTP 403 (Forbidden) response to the
HTTP POST request and skip rest of the steps;
b) shall update the members information in group document; and
c) shall send an HTTP 200 (OK) response to SGM-C.
##### 6.2.7.3.3 Sending group identity list notification
Upon successful creation of group, for each VAL user in \ element of a \ element of the group document, the SGM-S:
a) shall check whether valid group events subscription exists for event
SUBSCRIBE_GROUP_IDENTITY_LIST (0x04) as defined in clause A.1.2 or not; if
valid subscription does not exists then skip rest of the steps;
b) shall generate an HTTP POST message to notify group announcement. In the
HTTP POST message:
1) shall set request URI to call back URI received at the time of creating
subscription;
2) shall set Content-Type header to \"application/json\"; and
3) shall include an HTTP request entity-body serialized into a JavaScript
Object Notation (JSON) structure; In the entity-body,
i) shall set the \"Identity\" parameter to the identity of the subscription;
ii) shall set the \"Event\" parameter to the value
SUBSCRIBE_GROUP_IDENTITY_LIST (0x04) as specified in clause B.4;
iii) shall set the \"GroupID\" parameter to the identity of the VAL Group;
iv) shall include the \"Members-list\" parameter as specified in clause B.4
c) shall send the HTTP POST request towards SGM-C.
### 6.2.8 Group subscription and notification procedure
#### 6.2.8.1 Management of group events subscription
##### 6.2.8.1.1 SIP based procedures
##### 6.2.8.1.1.1 General {#general-3 .H6}
The VAL service will use the same identity which has been authenticated by VAL
service with SIP core using SIP based REGISTER message. If VAL service do not
support SIP protocol, then HTTP based method needs to be used.
The SGM-C shall use mechanism provided by VAL service to add access-token in
SIP messages. The SGM-S shall identify the originating VAL user ID from the
access-token received from SGM-C using the mechanism defined in VAL service
specification.
##### 6.2.8.1.1.2 Create subscription {#create-subscription .H6}
##### {#section .H6}
In order to subscribe to notification of changes of one or more group
documents of VAL groups identified by VAL group IDs, a SGM-C shall send an
initial SIP SUBSCRIBE request to the network according to the UE originating
procedures specified in 3GPP TS 24.229 [11] and IETF RFC 5875 [12]. In the
initial SIP SUBSCRIBE request, the SGM-C:
a) shall set the Request-URI to the configured public service identity for
performing subscription proxy function of the SGM-S;
b) shall include the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.seal\"
(coded as specified in 3GPP TS 24.229 [11]), in a P-Preferred-Service header
field according to IETF RFC 6050 [13];
c) shall include the g.3gpp.icsi-ref media feature tag containing the value of
\"urn:urn-7:3gpp-service.ims.icsi.seal\" in the Contact header field;
d) shall include an application/resource-lists+xml MIME body. In the
application/resource-lists+xml MIME body, the SGM-C shall include one \
element for each group document to be subscribed to, such that the \"uri\"
attribute of the \ element contains a relative path reference to XCAP
URI identifying an XML document to be subscribed to;
e) if the VAL server wants to fetch the current state only, shall set the
Expires header field according to IETF RFC 6665 [14], to zero. Otherwise,
shall set the Expires header field to the duration for which VAL user has
requested for subscription;
Upon reception of an initial SIP SUBSCRIBE request:
a) with the Event header field set to xcap-diff;
b) with the Request-URI set to own public service identity for performing
subscription proxy function of the SGM-S;
c) with an application/resource-lists+xml MIME body; and
d) with the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.seal\" (coded as
specified in 3GPP TS 24 229 [11]), in a P-Asserted-Service header field
according to IETF RFC 6050 [13];
the SGM-S:
d) shall identify the originating VAL user ID and shall use the originating
VAL user ID as an authenticated identity when performing the authorization;
b) if the authenticated identity is not authorized to subscribe to
notification of changes of any resource in the application/resource-lists+xml
MIME body, shall reject the request with a SIP 403 (Forbidden) response and
shall not continue with rest of the steps;
e) act as a notifier according to IETF RFC 5875 [12].
##### 6.2.8.1.1.3 Modify subscription {#modify-subscription .H6}
##### {#section-1 .H6}
In order to modify or refresh subscription, the SGM-C shall send SIP re-
SUBSCRIBE request on the same dialog as the existing subscription, and with
the same \"Event\" header. The SGM-C shall follow the steps specified in
clause 6.2.8.1.1.2.1 to create SIP SUBSCRIBE request.
Upon reception of a SIP re-SUBSCRIBE request:
a) with the Event header field set to xcap-diff; and
b) with an application/resource-lists+xml MIME body;
the SGM-S:
a) act as a notifier according to IETF RFC 5875 [12].
##### 6.2.8.1.1.4 Delete subscription {#delete-subscription .H6}
##### {#section-2 .H6}
In order to delete the subscription, the SGM-C shall send SIP re-SUBSCRIBE
request on the same dialog as the existing subscription, and with the same
\"Event\" header. The SGM-C shall follow the steps specified in clause
6.2.8.1.1.2.1 to create SIP SUBSCRIBE request with following clarification:
a) shall set the Expires header field to zero.
Upon reception of a SIP re-SUBSCRIBE request:
a) with the Event header field set to xcap-diff; and
b) with Expires header field set to zero;
the SGM-S:
a) act as a notifier according to IETF RFC 5875 [12].
##### 6.2.8.1.2 HTTP based procedures
##### 6.2.8.1.2.1 Creating subscription {#creating-subscription .H6}
##### {#section-3 .H6}
Upon successful service authorization of the VAL service, the SGM-C shall
create a subscription for group events by sending an HTTP POST request to the
SGM-S. In the HTTP POST request, the SGM-C:
a) shall set the Request URI to the URI of the SGM-S appended with VAL service
identity and the value \"/groupEventsSubscription\";
b) shall include the Host header with public user identity of SGM-S;
c) shall include an Authorization header field with the \"Bearer\"
authentication scheme set to an access token of the \"bearer\" token type as
specified in IETF RFC 6750 [6]; and
c) include the parameters specified in clause A.1.2 serialized into a
JavaScript Object Notation (JSON) structure as specified in IETF RFC 7159
[10].
Upon reception of an HTTP POST request from SGM-C where the Request-URI of the
HTTP POST request contains \"/groupEventsSubscription\" without subscription
identity, the SGM-S:
a) shall determine the identity of the sender of the received HTTP POST
request as specified in clause 6.2.1.1, and:
1) if the identity of the sender of the received HTTP POST request is not
authorized user, shall respond with an HTTP 403 (Forbidden) response to the
HTTP POST request and skip rest of the steps;
b) shall generate unique subscription identity and store the subscription
details for the authorized user; and
c) shall send an HTTP 200 (OK) response including parameters specified in
clause A.1.3.
##### 6.2.8.1.2.2 Modify a subscription {#modify-a-subscription .H6}
##### {#section-4 .H6}
Upon receiving a request from VAL user to modify existing subscription
identified with unique subscription identity, the SGM-C:
a) shall generate an HTTP PUT request. In the HTTP PUT request:
1) shall set the Request URI to the same Request URI used while creating
subscription in clause 6.2.8.1.2.1.1 appended with subscription identity;
2) shall include the Host header with public user identity of SGM-S;
3) shall include an Authorization header field with the \"Bearer\"
authentication scheme set to an access token of the \"bearer\" token type as
specified in IETF RFC 6750 [6]; and
4) include the parameters specified in clause A.1.2 serialized into a
JavaScript Object Notation (JSON) structure as specified in IETF RFC 7159
[10].
b) shall send the HTTP PUT request to the SGM-S.
Upon reception of an HTTP PUT request from SGM-C where the Request-URI of the
HTTP PUT request is set to \"/groupEventsSubscription\" appended with
subscription identity, the SGM-S:
a) shall determine the identity of the sender of the received HTTP PUT request
as specified in clause 6.2.1.1, and:
1) if the identity of the sender of the received HTTP PUT request is not
authorized user, shall respond with an HTTP 403 (Forbidden) response to the
HTTP PUT request and skip rest of the steps;
b) shall determine whether subscription for group events exists or not based
on received subscription identity in request URI; and
1) if subscription does not exist, shall respond with an HTTP 406 (Not
Acceptable) response to the HTTP PUT request and skip rest of the steps;
c) shall update the subscription details based on received parameters from the
HTTP PUT request; and
d) shall send an HTTP 200 (OK) response including parameters specified in
clause A.1.3.
##### 6.2.8.1.2.3 Delete a subscription {#delete-a-subscription .H6}
##### {#section-5 .H6}
Upon receiving a request from VAL user to delete existing subscription
identified with unique subscription identity, the SGM-C:
a) shall generate an HTTP DELETE request. In the HTTP DELETE request:
1) shall set the Request URI to the value \"/groupEventsSubscription\"
appended with subscription identity;
2) shall include the Host header with public user identity of SGM-S; and
3) shall include an Authorization header field with the \"Bearer\"
authentication scheme set to an access token of the \"bearer\" token type as
specified in IETF RFC 6750 [6]; and
b) shall send the HTTP DELETE request to the SGM-S.
Upon reception of an HTTP DELETE request from SGM-C where the Request-URI of
the HTTP DELETE request contains \"/groupEventsSubscription\" appended with
subscription identity, the SGM-S:
a) shall determine the identity of the sender of the received HTTP DELETE
request as specified in clause 6.2.1.1, and:
1) if the identity of the sender of the received HTTP DELETE request is not
authorized user, shall respond with an HTTP 403 (Forbidden) response to the
HTTP DELETE request and skip rest of the steps;
b) shall determine whether subscription for group events exists or not based
on received subscription identity in request URI; and
1) if subscription does not exist, shall respond with an HTTP 406 (Not
Acceptable) response to the HTTP DELETE request and skip rest of the steps;
c) shall delete the subscription details based on received parameters from the
HTTP DELETE request; and
d) shall send an HTTP 200 (OK) response to the SGM-C.
#### 6.2.8.2 Notifications
##### 6.2.8.2.1 SIP based procedures
###### 6.2.8.2.1.1 Client procedure
Upon receiving a SIP NOTIFY request associated with a subscription created as
result of the sent initial SIP SUBSCRIBE request, the SGM-S:
a) shall handle the SIP NOTIFY request according to IETF RFC 5875 [12].
###### 6.2.8.2.1.2 Server procedure
In order to send notification of group document update event, the SGM-S shall
send SIP NOTIFY to SGM-C according to IETF RFC 5875 [12].
##### 6.2.8.2.2 HTTP based procedures
##### 6.2.8.2.2.1 Receiving group modify notification {#receiving-group-
modify-notification .H6}
Upon receiving an HTTP POST request over a call back URI which was given to
the SGM-S at time of group events subscription, the SGM-C:
a) shall match subscription identity received in the \"Identity\" parameter of
the HTTP POST request with the locally stored identity of the subscription. If
subscription identity is not valid, then
1) send an HTTP 406 (Not Acceptable) response and skip rest of the steps;
b) shall send an HTTP 200 (OK); and
c) if \"Event\" parameter is set to SUBSCRIBE_GROUP_MODIFICATION (0x02) as
specified in clause B.3, shall notify the VAL user about modification of group
with group-ID.
Based on VAL user's request, the SGM-C may also retrieve the group document
identified by group ID received in group modify notification as specified in
clause 6.2.5.2.
##### 6.2.8.2.2.2 Sending group modify notification {#sending-group-modify-
notification .H6}
To send the group modification notification to the SGM-C, the SGM-S:
a) shall check whether valid group events subscription exists for event
SUBSCRIBE_GROUP_MODIFICATION (0x02) as defined in clause A.1.2 or not; if
valid subscription does not exists then skip rest of the steps;
b) shall generate an HTTP POST message to notify group announcement. In the
HTTP POST message:
1) shall set request URI to the call back URI received at the time of creating
subscription;
2) shall set Content-Type header to \"application/json\"; and
3) shall include an HTTP request entity-body with the parameters specified in
clause B.3 serialized into a JavaScript Object Notation (JSON) structure; and
c) shall sent the HTTP POST request towards SGM-C.
### 6.2.9 Group member leave
#### 6.2.9.1 Client procedure
Upon receiving request from VAL user to leave the group, the SGM-C:
a) shall generate an HTTP POST request. In the HTTP POST request:
1) shall set the Request URI to the URI of the SGM-S appended with VAL service
identity and the value \"/group-deregistration\";
2) shall include the Host header with public user identity of SGM-S;
3) shall include an Authorization header field with the \"Bearer\"
authentication scheme set to an access token of the \"bearer\" token type as
specified in IETF RFC 6750 [6]; and
4) shall include in the HTTP request entity-body the \"group-ID\" parameter
set to the group URI of the group which VAL user has requested to leave; and
b) shall send the HTTP POST request to SGM-S.
Upon receiving an HTTP 200 (OK), the SGM-C shall notify the VAL user about
successful group registration.
#### 6.2.9.2 Server procedure
Upon reception of an HTTP POST request where the Request-URI of the HTTP POST
request is set to \"/group-deregistration\", the SGM-S:
a) shall determine the identity of the sender of the received HTTP POST
request as specified in clause 6.2.1.1, and:
1) if the identity of the sender of the received HTTP POST request is not
authorized user, shall respond with an HTTP 403 (Forbidden) response to the
HTTP POST request and skip rest of the steps;
b) shall update the members information in group document; and
c) shall send an HTTP 200 (OK) response to SGM-C.
Upon successful modification of the group, the SGM-S shall notify all group
members about the group modification by following the procedure specified in
clause 6.2.8.2.2.2. In the group modify notification, the SGM-S shall set the
\"modificationType\" parameter to the value GROUP_MEMBER_REMOVED (0x02) as
specified in clause B.3.
## 6.3 Off-network procedures
The off-network procedures are out of scope of the present document in this
release of the specification.
# 7 Coding
## 7.1 General
## 7.2 Application unique ID
The AUID shall be set to the VAL service ID as specified in specific VAL
service specification.
## 7.3 Data structure
The \ element:
a) shall include an \"uri\" attribute representing the VAL group identity;
b) may include a \ element containing a human readable name of
the VAL group;
c) shall include a \ element. The \ element:
1) may include a \ element indicating group description;
2) shall include a \ element indicating category of the group; and
3) shall include one or more \ element(s) indicating list of
services supported by the group; and
4) may include one or more \ element(s) indicating list of
geographical areas to be addressed by the group.
d) may include a \ element containing list of group members
who are administrator for the group;
e) may include a \ element containing list of users who
explicitly needs to register to join the group;
f) may include a \ element containing list of members who are implicitly
registered to join the group; and
g) shall include \ element. The \
element:
1) may include \ element.
## 7.4 XML Schema
### 7.4.1 General
The Group Document shall be composed according to the XML schema described in
[7] and extended with extensions from the XML Schemas defined in [8] and [9],
and extended with extensions from the XML schema defined in clause 7.4.2.
### 7.4.2 XML schema for SEAL group document specific extension
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
\
## 7.5 Semantics
The \ element of \ element contains a human
readable name of the VAL group.
The value of the "uri" attribute in the \ element shall
represent a VAL group identity.
The \ element of a \ element shall contain the
group members who are administrator of the group and have special authorities
as defined by VAL service to manage the group. The administrator user do not
require explicit registration to join the group.
The \ element of a \ element shall contain
the group members who are not administrator of the group and require explicit
registration to join the group.
The \ element of a \ element shall contain the group
members who are not administrator of the group and also do not require
explicit registration to join the group.
The \ child element of a \ element of a \
element shall indicate the title or description for the Group. The length of
the value of the \ element should not exceed 255 characters.
The \ child element of a \ element of a \
element shall indicate the category of the group. The possible values for this
element are \"normal\", \"location-based\" and \"regroup\".
The \ child element of a \ element of a \ element shall indicate the service supported by the group.
The \ child element of a \ element of a \
element shall indicate geographical area addressed by the group.
The \ child element of a \ element of a
\ element contains a positive number which provides VAL group
priority among different VAL groups within VAL service. More than one VAL
group can have same priority.
The VAL service may further extend the \ element of a
\ element to include VAL service specific configuration.
## 7.6 MIME type
The MIME type for VAL user profile configuration shall be set to
\"vnd.3gpp.seal-group-doc+xml\".
## 7.7 IANA registration template
Your Name:
\
Your Email Address:
\
Media Type Name:
Application
Subtype name:
vnd.3gpp.seal-group-doc+xml
Required parameters:
None
Optional parameters:
\"charset\" the parameter has identical semantics to the charset parameter of
the \"application/xml\" media type as specified in section 9.1 of IETF RFC
7303.
Encoding considerations:
binary.
Security considerations:
Same as general security considerations for application/xml media type as
specified in section 9.1 of IETF RFC 7303. In addition, this media type
provides a format for exchanging information in SIP or in HTTP. So the
security considerations from IETF RFC 3261 apply while exchanging information
in SIP and the security considerations from IETF RFC 2616 apply while
exchanging information in HTTP.
The information transported in this media type does not include active or
executable content.
Mechanisms for privacy and integrity protection of protocol parameters exist.
Those mechanisms as well as authentication and further security mechanisms are
described in 3GPP TS 24.229.
This media type does not include provisions for directives that institute
actions on a recipient\'s files or other resources.
This media type does not include provisions for directives that institute
actions that, while not directly harmful to the recipient, may result in
disclosure of information that either facilitates a subsequent attack or else
violates a recipient\'s privacy in any way.
This media type does not employ compression.
Interoperability considerations:
Same as general interoperability considerations for application/xml media type
as specified in section 9.1 of IETF RFC 7303. Any unknown XML elements and any
unknown XML attributes are to be ignored by recipient of the MIME body.
Published specification:
3GPP TS 24.544 \"Group Management - Service Enabler Architecture Layer for
Verticals (SEAL); Protocol specification\", available via
http://www.3gpp.org/specs/numbering.htm.
Applications Usage:
Applications supporting the SEAL group management procedures as described in
the published specification.
Fragment identifier considerations:
The handling in section 5 of IETF RFC 7303 applies.
Restrictions on usage:
None
Provisional registration? (standards tree only):
N/A
Additional information:
1\. Deprecated alias names for this type: none
2\. Magic number(s): none
3\. File extension(s): none
4\. Macintosh File Type Code(s): none
5\. Object Identifier(s) or OID(s): none
Intended usage:
Common
Person to contact for further information:
\- Name: \
\- Email: \
\- Author/Change controller:
i) Author: 3GPP CT1 Working Group/3GPP_TSG_CT_WG1\@LIST.ETSI.ORG
ii) Change controller: \/\
###### ## Annex A (normative): Parameters for different operations
# A.1 Creating group events subscription
## A.1.1 General
The information in this annex provides a normative description of the
parameters which will be sent by SGM-C while creating group events
subscription and the parameters which will be sent by SGM-S as a response to
request for creating subscription.
## A.1.2 Client side parameters
The SGM-C shall convey the following parameters while sending request for
creating group events subscription.
Table A.1.2-1: Client side parameters for creating group events subscription
Parameter Description
* * *
VAL User Id REQUIRED. Represents a VAL user who initiates subscription.
Callback-URI REQUIRED. Represents where to send HTTP notifications
Subscription Info REQUIRED. Represents a space-separated list of the
subscription type information as specified in table A.1.2-2.
Table A.1.2-2: Subscription information
+---------------+-----------------------------------------------------+ | Parameter | Description | +===============+=====================================================+ | Event | REQUIRED. Represents the type of notification which | | | client requires. This specification defines | | | following type of notifications: | | | | | | - 0x01: SUBSCRIBE_GROUP_ANNOUNCEMENT | | | | | | - 0x02: SUBSCRIBE_GROUP_MODIFICATION | +---------------+-----------------------------------------------------+ | expiry time | REQUIRED. Represents the time in seconds up to | | | which the subscription is desired to be kept active | | | and the time after which the subscribed event shall | | | stop generating notifications. | +---------------+-----------------------------------------------------+ | Group ID list | REQUIRED if \"Event" parameter is set to | | | SUBSCRIBE_GROUP_MODIFICATION (0x02) or | | | SUBSCRIBE_GROUP_IDENTITY_LIST (0x04). Represents | | | a space-separated list of VAL group ID of the | | | groups | +---------------+-----------------------------------------------------+
## A.1.3 Server side parameters
The SGM-S shall convey the following parameters while sending response to the
creating group events subscription request.
Table A.1.3-1: Server side parameters for response to creating group events
subscription
Parameter Description
* * *
Identity REQUIRED. A unique string representing subscription identity.
###### ## Annex B (normative): Parameters for notifications
# B.1 General
The information in this annex provides a normative description of the
parameters which will be sent by SGM-S while sending different types of
notification
# B.2 Group announcement notification
The SGM-S shall convey the following parameters while sending group
announcement notification to SGM-C.
Table B.2-1: Parameters for group announcement notification
Parameter Description
* * *
Identity REQUIRED. A unique string representing notification channel identity.
Event REQUIRED. Shall be set to SUBSCRIBE_GROUP_ANNOUNCEMENT (0x01) as
specified in table A.1.2-2. GroupID REQUIRED. An URI that represent a VAL
group identity Subject REQUIRED. A string representing the title or
description for the group. IsJoinReq OPTIONAL. A Boolean indicating whether
user needs to perform registration to join the group or not. This Boolean will
be set to "true" for each user in \ element if present
in the document. Val-services OPTIONAL. Represents list of services supported
by the group. Members-list OPTIONAL. Represents list of VAL users who are
member of the group.
NOTE: The Group announcement notification is considered as Group creation
notification when "IsJoinReq" parameter is not present or set to \"false\".
# B.3 Group modify notification
The SGM-S shall convey the following parameters while sending identify list
notification to SGM-C.
Table B.3-1: Parameters for group announcement notification
+------------------+--------------------------------------------------+ | Parameter | Description | +==================+==================================================+ | Identity | REQUIRED. A unique string representing | | | notification channel identity. | +------------------+--------------------------------------------------+ | Event | REQUIRED. Shall be set to | | | SUBSCRIBE_GROUP_MODIFICATION (0x02) as | | | specified in table A.1.2-2. | +------------------+--------------------------------------------------+ | groupID | REQUIRED. An URI that represent a VAL group | | | identity | +------------------+--------------------------------------------------+ | modificationType | REQUIRED. Specifies the type of the modification | | | of group document. This specification defines | | | following types of modifications: | | | | | | 0x01: GROUP_MEMBER_ADDED | | | | | | 0x02: GROUP_MEMBER_REMOVED | | | | | | 0x03: GROUP_CONFIG_UPDATE | +------------------+--------------------------------------------------+
# B.4 Group Identity List notification
The SGM-S shall convey the following parameters while sending identify list
notification to SGM-C.
Table B.4-1: Parameters for group identity list notification
Parameter Description
* * *
Identity REQUIRED. A unique string representing notification channel identity.
Event REQUIRED. Shall be set to SUBSCRIBE_GROUP_IDENTITY_LIST (0x04) as
specified in table A.1.2-2. GroupID REQUIRED. An URI that represent a VAL
group identity Members-list REQUIRED. Represents list of VAL users who are
member of the group.
#