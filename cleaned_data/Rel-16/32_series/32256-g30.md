# Foreword
This Technical Specification has been produced by the 3rd Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
In the present document, certain modal verbs have the following meanings:
**shall** indicates a mandatory requirement to do something
**shall not** indicates an interdiction (prohibition) to do something
> The constructions \"shall\" and \"shall not\" are confined to the context of
> normative provisions, and do not appear in Technical Reports.
>
> The constructions \"must\" and \"must not\" are not used as substitutes for
> \"shall\" and \"shall not\". Their use is avoided insofar as possible, and
> they are not used in a normative context except in a direct citation from an
> external, referenced, non-3GPP document, or so as to maintain continuity of
> style when extending or modifying the provisions of such a referenced
> document.
**should** indicates a recommendation to do something
**should not** indicates a recommendation not to do something
**may** indicates permission to do something
**need not** indicates permission not to do something
> The construction \"may not\" is ambiguous and is not used in normative
> elements. The unambiguous constructions \"might not\" or \"shall not\" are
> used instead, depending upon the meaning intended.
**can** indicates that something is possible
**cannot** indicates that something is impossible
The constructions \"can\" and \"cannot\" shall not to be used as substitutes
for \"may\" and \"need not\".
**will** indicates that something is certain or expected to happen as a result
of action taken by an agency the behaviour of which is outside the scope of
the present document
**will not** indicates that something is certain or expected not to happen as
a result of action taken by an agency the behaviour of which is outside the
scope of the present document
**might** indicates a likelihood that something will happen as a result of
action taken by some agency the behaviour of which is outside the scope of the
present document
**might not** indicates a likelihood that something will not happen as a
result of action taken by some agency the behaviour of which is outside the
scope of the present document
In addition:
**is** (or any other verb in the indicative mood) indicates a statement of
fact
**is not** (or any other negative verb in the indicative mood) indicates a
statement of fact
The constructions \"is\" and \"is not\" do not indicate requirements.
# 1 Scope
The present document is part of a series of documents that specify charging
functionality and charging management in 3GPP networks. The 3GPP core network
charging architecture and principles are specified in TS 32.240 [1], which
provides an umbrella for other charging management TSs that specify:
\- the content of the CDRs per domain / subsystem / service (offline and
converged charging);
\- the content of real-time charging messages per domain / subsystem / service
(online and converged charging);
\- the functionality of online, offline and converged charging for those
domains / subsystems / services;
\- the interfaces that are used in the charging framework to transfer the
charging information (i.e. CDRs or charging events).
The complete document structure for these TSs is defined in TS 32.240 [1].
The present document specifies the converged offline and online charging
description for the 5G connection and mobility domain based on the functional
stage 2 description in TS 23.501 [200], TS 23.502 [201] and TS 23.503 [202].
This charging description includes the converged offline and online charging
architecture and scenarios specific to the 5G connection and mobility domain,
as well as the mapping of the common 3GPP charging architecture specified in
TS 32.240 [1] onto the 5G connection and mobility domain.
It further specifies the structure and content of the CDRs for offline
charging, and the charging events for converged online and offline charging.
The present document is related to other 3GPP charging TSs as follows:
\- The common 3GPP charging architecture is specified in TS 32.240 [1].
\- The parameters, abstract syntax and encoding rules for the CDRs are
specified in TS 32.298 [51].
\- A transaction based mechanism for the transfer of CDRs within the network
is specified in TS 32.295 [54].
\- The file based mechanism used to transfer the CDRs from the network to the
operator\'s billing domain (e.g. the billing system or a mediation device) is
specified in TS 32.297 [52].
\- The services, operations and procedures of charging, using Service Based
Interface are specified in TS 32.290 [57].
\- The charging service of 5G system is specified in TS 32.291 [58].
All references, abbreviations, terms, descriptions, principles and
requirements, used in the present document, that are common across 3GPP TSs,
are defined in TR 21.905 [100]. Those that are common across charging
management in 3GPP networks/domains, services or subsystems are provided in
the umbrella TS 32.240 [1] and are copied into clause 3 of the present
document for ease of reading. Finally, those items that are specific to the
present document are defined exclusively in the present document.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TS 32.240: \"Telecommunication management; Charging management;
Charging architecture and principles\".
[2] - [50] Void.
[51] 3GPP TS 32.298: \"Telecommunication management; Charging management;
Charging Data Record (CDR) parameter description\".
[52] 3GPP TS 32.297: \"Telecommunication management; Charging management;
Charging Data Record (CDR) file format and transfer\".
[53] Void.
[54] 3GPP TS 32.295: \"Telecommunication management; Charging management;
Charging Data Record (CDR) transfer\".
[55-56] Void.
[57] 3GPP TS 32.290: \"Telecommunication management; Charging management; 5G
system; Services, operations and procedures of charging using Service Based
Interface (SBI)\".
[58] 3GPP TS 32.291: \"Telecommunication management; Charging management; 5G
system; Charging service, stage 3\".
[59] - [99] Void.
[100] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[101] - [199] Void
[200] 3GPP TS 23.501: \"System Architecture for the 5G System (5GS)\".
[201] 3GPP TS 23.502: \"Procedures for the 5G System (5GS)\".
[202] 3GPP TS 23.503: \"Policy and Charging Control Framework for the 5G
System; Stage 2\".
[203] 3GPP TS 38.413: \"NG-RAN; NG Application Protocol (NGAP)\".
[204] 3GPP TS 29.413: \"Application of the NG Application Protocol (NGAP) to
non-3GPP access\".
[205] - [299] Void
[300] - [399] Void.
[400] - [499] Void.
[500] - [599] Void.
# 3 Definitions of terms, symbols and abbreviations
## 3.1 Terms
For the purposes of the present document, the terms given in 3GPP TR 21.905
[100] and the following apply. A term defined in the present document takes
precedence over the definition of the same term, if any, in 3GPP TR 21.905
[100].
## 3.2 Symbols
For the purposes of the present document, the following symbols apply:
Bam Reference point for the CDR file transfer from the 5G connection and
mobility CGF to the BD.
Ga Reference point for CDR transfer between a CDF and the CGF.
Nchf Service based interface exhibited by CHF.
N41 Reference point between AMF and the H-CHF.
N42 Reference point between AMF and the V-CHF.
## 3.3 Abbreviations
For the purposes of the present document, the abbreviations given in 3GPP TR
21.905 [100] and the following apply. An abbreviation defined in the present
document takes precedence over the definition of the same abbreviation, if
any, in 3GPP TR 21.905 [100].
5GC 5G Core Network
5GS 5G System
5G-AN 5G Access Network
AMF Access and Mobility Management Function
BD Billing Domain
CCS Converged Charging System
CDF Charging Data Function
CGF Charging Gateway Function
CHF Charging Function
CTF Charging Trigger Function
DNN Data Network Name
ECUR Event Charging with Unit Reservation
GPSI Generic Public Subscription Identifier
H-CHF A CHF in HPLMN
IEC Immediate Event Charging
GUAMI Globally Unique AMF Identifier
MICO Mobile Initiated Connection Only
N3IWF Non-3GPP InterWorking Function
NF Network Function
NRF Network Repository Function
PEC Post Event Charging
PEI Permanent Equipment Identifier
SUPI Subscription Permanent Identifier
UDM Unified Data Management
UDR Unified Data Repository
V-CHF A CHF in VPLMN
# 4 Architecture considerations
## 4.1 High-level 5G System architecture
### 4.1.1 Non-roaming reference architecture
Figure 4.1.1.1 shows the 5G System high level architecture in the service-
based representation, as defined in TS 23.501 [200], with AMF encompassing 5G
registration, connection and mobility management functionalities:
{width="4.260416666666667in" height="1.9083333333333334in"}
**Figure 4.1.1.1: 5G System architecture**
### 4.1.2 Roaming reference architecture
Figure 4.1.2.1 shows the 5G System roaming architecture with local breakout in
the service-based representation, as defined in TS 23.501 [200], with AMF
encompassing 5G registration, connection and mobility management
functionalities:
Figure 4.1.2.1: Roaming 5G System architecture- local breakout scenario in
service-based interface representation
Figure 4.1.2.2 shows the 5G System roaming architecture in the case of home
routed scenario the service-based representation, as defined in TS 23.501
[200], with AMF encompassing 5G registration, connection and mobility
management functionalities:
Figure 4.1.2.2: Roaming 5G System architecture - home routed scenario in
service-based interface representation
## 4.2 5G connection and mobility domain converged charging architecture
### 4.2.1 Non-roaming
Architectural options for 5G connection and mobility converged charging
achieved by AMF embedding the CTF, are depicted in figure 4.2.1.1.
Figure 4.2.1.1: 5G connection and mobility converged charging architecture
Details on the interfaces and functions can be found in TS 32.240 [1] for the
general architecture components. Ga is described in clause 5.2.4 and Bam in
clause 5.2.5 of the present document, and Nchf is described in TS 32.290 [57].
### 4.2.2 Roaming
Figure 4.2.2.1 shows the 5G connection and mobility converged charging
architecture in roaming service based representation:
Figure 4.2.2.1: 5G connection and mobility converged charging architecture in
roaming
The architectural options of figure 4.2.1.1 apply with AMF located in VPLMN,
V-CHF and corresponding Billing domain/CGF located in VPLMN.
The architectural options of figure 4.2.1.1 apply with AMF located in VPLMN,
H-CHF and corresponding Billing domain/CGF located HPLMN. The Security Edge
Protection Proxy (SEPP) specified in TS 23.501 [200] is used for inter-PLMN
Nchf.
Figure 4.2.2.2 shows the 5G connection and mobility converged charging
architecture in roaming, reference point representation:
Figure 4.2.2.2: 5G connection and mobility converged charging architecture in
roaming - reference point representation
The N41 reference point is defined for the interactions between AMF and H-CHF
in the reference point representation.
The N42 reference point is defined for the interactions between AMF and V-CHF
in the reference point representation.
# 5 5G connection and mobility charging principles and scenarios
## 5.1 5G connection and mobility charging principles
### 5.1.1 General
The charging functions specified for the 5G connection and mobility charging,
are based on functionalities supported by AMF specified in TS 23.501 [200]:
\- Registration Management;
\- Connection Management;
\- Location Reporting.
Location Reporting is applicable to NG-RAN only.
### 5.1.2 Requirements
The following are high-level charging requirements specific to the 5G
connection and mobility charging:
\- The AMF shall support converged online and offline charging using service
based interface.
\- The AMF shall collect charging information per UE registration to the 5GS.
\- The AMF shall collect charging information per UE N2 connection between the
5G-AN and the AMF.
\- The AMF shall collect charging information per UE location reporting.
\- In roaming scenario, the AMF shall collect charging information per in-
bound roamer UE registration in 5GS, for both V-PLMN and Home PLMN.
### 5.1.3 CHF selection
The CHF Address(es) selection by the AMF is done during the Registration
process based on the following options:
\- CHF Address(es) used for UE context transferred from old AMF.
\- CHF address(es) provided by the PCF as part of Access and mobility policy
control information.
\- UDM provided charging characteristics.
\- NRF based discovery.
\- AMF locally provisioned charging characteristics.
The priority order between these options depends on Operator\'s policies.
Once selected, these CHF Address(es) shall be used as long as the UE is
registered in the AMF.
### 5.1.4 UE Presence in Presence Reporting Area (PRA)
At UE initial registration, the CHF may subscribe to a list of Presence
Reporting Area(s), to be reported with \"Change of UE presence in Presence
Reporting Area(s)\" from AMF.
A Presence Reporting Area, as specified in TS 23.501 [200] clause 5.6.11, may
represent:
\- A Core Network pre-configured Presence Reporting Area identified by a PRA
Identifier;
\- A UE-dedicated Presence Reporting Area defined by CHF and identified by a
PRA Identifier with its elements (i.e. list of TAs and/or NG-RAN nodes and/or
cells identifiers).
The CHF remains subscribed to the list of Presence Reporting Area(s) as long
as the UE is registered in the AMF until the list is updated or unsubscribed-
to by subsequent exchanges between the AMF and the CHF.
This functionality is detailed in clause 5.2.1.3.
### 5.1.5 Roaming
#### 5.1.5.1 General
Based on roaming agreements between the VPLMN and the HPLMN, for each UE
determined as in-bound roamer, the AMF in VPLMN shall be able to collect
charging information per UE registration, and interact with a V-CHF for CDR
generation in VPLMN.
In addition, for this registration, the AMF in VPLMN may be able to interact
with a H-CHF for CDR generation in HPLMN.
#### 5.1.5.2 CHF selection
During the Registration process, for UE determined as in-bound roamer, the AMF
in VPLMN can select:
\- the CHF Address(es) in HPLMN based on the following options:
\- UDM provided charging characteristics.
\- NRF based discovery using UE identifier.
\- AMF locally provisioned in charging characteristics.
\- the CHF Address(es) in VPLMN based on the following options:
\- NRF based discovery using the PLMN Id of the UE H-PLMN.
\- AMF locally provisioned in charging characteristics.
The priority order between these options depends on Operator\'s policies.
## 5.2 5G connection and mobility converged online and offline charging
scenarios
### 5.2.1 Basic principles
#### 5.2.1.1 General
5G connection and mobility converged charging, when activated, may be
performed by the AMF interacting with CHF using Nchf specified in TS 32.290
[57] and TS 32.291 [58]. In order to provide the data required for the
management activities outlined in TS 32.240 [1] (Credit-Control, accounting,
billing, statistics, etc.), the AMF shall be able to perform converged
charging for each of the following:
\- Charging data related to registration.
\- Charging data related to N2 connection between the AN and the AMF.
\- Charging data related to user location.
The AMF shall use the AMF charging profile defined in clause 5.2.1.2 to
determine whether charging (converged) is activated or not. The default AMF
charging profile is provided by Charging Characteristics applicable to AMF are
described in Annex A.
The AMF shall be able to perform converged charging by interacting with CHF,
for charging data related to registration, connection and location management.
The Charging Data Request and Charging Data Response are exchanged between the
AMF and the CHF, based on IEC, or PEC scenarios as specified in TS 32.290
[57]. The Charging Data Request is issued by the AMF towards the CHF when
certain conditions (chargeable events) are met.
The contents and purpose of each charging event that triggers interaction with
CHF, as well as the chargeable events that trigger them, are described in the
following clauses.
A detailed formal description of the converged charging parameters defined in
the present document is to be found in TS 32.291 [58].
A detailed formal description of the CDR parameters defined in the present
document is to be found in TS 32.298 [51].
#### 5.2.1.2 Applicable Triggers in the AMF
##### 5.2.1.2.1 General
When a charging event is issued towards the CHF, it includes details such as
Subscriber identifier (e.g. SUPI).
Each trigger condition (i.e. chargeable event) defined for the 5G connection
and mobility converged charging functionality, is specified with the
associated behaviour when they are met.
Table 5.2.1.2.1.1 summarizes the set of default trigger conditions and their
category which shall be supported by the AMF when charging is active for the
corresponding AMF functionality. For \"immediate report\" category, the table
also provides the corresponding Charging Data Request message sent from AMF
towards the CHF.
Table 5.2.1.2.1.1: Default Trigger conditions in AMF
+----------+----------+----------+----------+----------+----------+ | Trigger | Trigger | Default | CHF | CHF | Message | | Co | level | category | allowed | allowed | when | | nditions | | | to | to | \"i | | | | | change | enable | mmediate | | | | | category | and | rep | | | | | | disable | orting\" | | | | | | | category | +----------+----------+----------+----------+----------+----------+ | **Regist | | | | | | | ration** | | | | | | +----------+----------+----------+----------+----------+----------+ | Regi | - | I | Not | Not | IEC: | | stration | | mmediate | Ap | Ap | Charging | | checked | | | plicable | plicable | Data | | | | | | | Request | | | | | | | \ | | | | | | | [Event] | | | | | | | | | | | | | | ECUR: | | | | | | | Charging | | | | | | | Data | | | | | | | Request | | | | | | | [I | | | | | | | nitial] | +----------+----------+----------+----------+----------+----------+ | Regi | - | I | Not | Not | PEC: | | stration | | mmediate | Ap | Ap | Charging | | c | | | plicable | plicable | Data | | ompleted | | | | | Request | | | | | | | \ | | | | | | | [Event] | | | | | | | | | | | | | | ECUR: | | | | | | | Charging | | | | | | | Data | | | | | | | Request | | | | | | | [Termi | | | | | | | nation] | +----------+----------+----------+----------+----------+----------+ | _Deregis | - | I | Not | Not | PEC: | | tration_ | | mmediate | Ap | Ap | Charging | | | | | plicable | plicable | Data | | | | | | | Request | | | | | | | \ | | | | | | | [Event] | +----------+----------+----------+----------+----------+----------+ | **N2 | | | | | | | conn | | | | | | | ection** | | | | | | +----------+----------+----------+----------+----------+----------+ | _Start | - | I | Not | Not | PEC: | | of N2 | | mmediate | Ap | Ap | Charging | | con | | | plicable | plicable | Data | | nection_ | | | | | Request | | | | | | | \ | | | | | | | [Event] | +----------+----------+----------+----------+----------+----------+ | _End of | - | I | Not | Not | PEC: | | N2 | | mmediate | Ap | Ap | Charging | | con | | | plicable | plicable | Data | | nection_ | | | | | Request | | | | | | | \ | | | | | | | [Event] | +----------+----------+----------+----------+----------+----------+ | ** | | | | | | | Location | | | | | | | rep | | | | | | | orting __| | | | | | +----------+----------+----------+----------+----------+----------+ |_ User | - | I | Not | Not | PEC: | | Location | | mmediate | Ap | Ap | Charging | | change_ | | | plicable | plicable | Data | | | | | | | Request | | | | | | | \ | | | | | | | [Event] | +----------+----------+----------+----------+----------+----------+ | Change | - | I | Not | Not | PEC: | | of UE | | mmediate | Ap | Ap | Charging | | presence | | | plicable | plicable | Data | | in | | | | | Request | | Presence | | | | | \ | | R | | | | | [Event] | | eporting | | | | | | | Area(s) | | | | | | +----------+----------+----------+----------+----------+----------+
AMF functionality charging activation/deactivation is performed by CHF via AMF
charging profile update as defined in clause 5.2.1.2.3.
The AMF charging profile is defined in clause 5.2.1.2.2 and shall be used by
the AMF to determine whether converged charging is active or not, and which
scenario is applicable when active.
During UE initial registration in the AMF, if registration charging is active
in the Charging Characteristics, a Charging Data Request [Event, Registration]
or Charging Data Request [Initial, Registration] shall be sent to CHF in the
corresponding charging scenario (i.e. IEC, PEC or ECUR) when applicable
triggers are met. At N2 connection, if N2 connection charging is active in the
AMF charging profile, a Charging Data Request [Event, N2 connection] shall be
sent to CHF in PEC scenario when applicable triggers are met.
At N2 connection, if location reporting charging is active in the AMF charging
profile, the AMF shall start the location reporting control procedure towards
NG-RAN specified in clause 4.10 of TS 23.502 [202] for a continuous reporting
whenever the UE location changes. A Charging Data Request [Event, location
reporting] shall be sent by AMF upon receiving the location report from NG-RAN
with current UE location.
If the AMF receives in a Charging Data Response [Event/Initial] from CHF, an
updated AMF charging profile deactivating location reporting charging, and the
AMF has a N2 connection, the AMF shall cancel the location reporting control
procedure towards NG-RAN.
##### 5.2.1.2.2 AMF Charging profile
An AMF charging profile is defined to allow AMF determination of applicable
trigger conditions for each functionality (i.e Registration, N2 connection,
Location Reporting), and includes:
\- charging active or inactive;
\- IEC, ECUR or PEC scenario.
For location reporting charging it includes in addition, the level for
location change to be reported (i.e. TAI change and/or Cell Change), or UE
presence in Presence Reporting Area(s) to be reported. The UE Presence in
Presence Reporting Area (PRA) functionality is detailed in clause 5.2.1.3.
IEC and ECUR scenarios are applicable for registration only.
The AMF charging profile is per UE and per AMF.
The default AMF charging profile is provided by the Charging Characteristics
which is described in Annex A.
##### 5.2.1.2.3 Independent triggers activation
During the UE registration lifetime in the AMF, the CHF may
activate/deactivate charging for any AMF functionality (i.e. Registration, N2
connection, Location Reporting) each time the CHF is invoked for a given AMF
functionality. The set of triggers enabled/disabled via charging
activation/deactivation by CHF are independent from the invoked AMF
functionality. The triggers activation/deactivation take effect at the next
AMF functionality invoking the CHF.
Table 5.2.1.2.3.1 describes the applicable messages for CHF to
activate/deactivate triggers via update of AMF Charging profile:
Table 5.2.1.2.3.1: AMF charging profile update by CHF
+----------------------+----------------------+----------------------+ | Functionality | AMF Charging Profile | Message from CHF to | | | field which can be | AMF | | | updated | | +----------------------+----------------------+----------------------+ | Registration | - charging \"active | Charging Data | | | or inactive\" | Response | | | | [Event/Initial] | +----------------------+----------------------+----------------------+ | N2 connection | - charging \"active | Charging Data | | | or inactive\" | Response | | | | [Event/Initial] | +----------------------+----------------------+----------------------+ | _Location Reporting_ | - charging \"active | Charging Data | | | or inactive\" | Response | | | | [Event/Initial] | | | - level for | | | | location | | | | | | | | - list of Presence | | | | Reporting Area(s) | | +----------------------+----------------------+----------------------+
In ECUR scenario, any update of AMF Charging Profile received in Charging Data
Response [Initial] will take effect after the corresponding Charging Data
Response [Termination].
#### 5.2.1.3 UE Presence in Presence Reporting Area (PRA)
At UE initial registration in the AMF, the CHF may subscribe to changes of UE
presence status(es) in PRA(s) in the Charging Data Response [Event,
Registration] or Charging Data Response [Initial, Registration] respective IEC
or ECUR scenarios. This subscription is performed, by activation of location
reporting charging in the AMF charging profile with a list of PRAs supplied in
addition.
The PRAs list may be composed of:
\- Core Network pre-configured Presence Reporting Area(s) identified by PRA
Identifier(s);
\- UE-dedicated Presence Reporting Area(s) defined by a PRA Identifier(s) each
provided with its elements.
Once location reporting charging is activated, the registration is completed,
the AMF starts the location reporting procedure towards to NG-RAN specified in
clause 4.10 of TS 23.502 [202] with parameters associated to the PRA(s), as
described in clause 5.2.2.4.2.
When a Change of UE presence in Presence Reporting Area(s) is detected for
PRA(s) subscribed-to by the CHF, the AMF sends Charging Data Request [Event,
location reporting] to CHF with the PRA Identifier(s) and indication(s)
whether the UE is inside or outside the Presence Reporting Area(s).
The CHF may update the list of Presence Reporting Area(s) subscription or
remove the list of Presence Reporting Area(s), in any Charging Data Response
[Event/Initial] as per table 5.2.1.2.3.1.
### 5.2.2 Message flows
#### 5.2.2.1 General
The flows in the present document specify the interaction between the AMF and
the CHF for 5G connection and mobility converged charging functionality, in
different scenarios, based on TS 23.501 [200] and TS 23.502 [201] procedures
and flows.
This interaction is based on Charging Data Request /Response specified in TS
32.290 [57], exchanged between the AMF embedding the CTF and the CHF.
As a general principle, the steps in the figures for the message flows below
correspond to the steps of figures in TS 23.502 [202], which is the reference.
The present document specifies the charging specific extension part.
#### 5.2.2.2 Registration management charging from AMF
##### 5.2.2.2.1 General
The subclause below describes registration management charging.
For registration procedures, the following scenarios specified in TS 32.290
[57] are supported:
\- PEC;
\- IEC;
\- ECUR.
For deregistration procedures, only PEC scenario is supported.
##### 5.2.2.2.2 General Registration -- PEC charging
The following figure 5.2.2.2.2.1 describes a Registration charging message
flow in PEC charging, based on figure 4.2.2.2.2-1 of TS 23.502 [202]
description and, applicable to:
\- Initial Registration in 5GS;
\- Mobility Registration Update; or
\- Periodic Registration Update; or
\- Emergency Registration.
Figure 5.2.2.2.2.1: Registration -- PEC charging
1-14c. Registration procedure initiated by UE.
10: The new AMF notifies the old AMF that the registration of the UE in the
new AMF is completed.
14d: If necessary, the old AMF is requested by UDM to delete Registration
Management contexts and PDU Sessions.
14dCh: The old AMF interacts with the CHF as per deregistration procedure
described in figure 5.2.2.2.8.1.
21\. Upon successful procedure, Registration Accept sent to the UE.
21ch-a. The AMF sends Charging Data Request [Event] to CHF for the UE
successful registration.
21ch-b. The CHF creates the CDR for this registration.
21ch-c. The CHF acknowledges by sending Charging Data Response [Event] to the
AMF.
##### 5.2.2.2.3 General Registration -- IEC
The following figure 5.2.2.2.3.1 describes a Registration charging message
flows in IEC, based on the clause 5.2.2.2.2 Registration description:
Figure 5.2.2.2.3.1: Registration -- IEC
1-14c. Registration procedure initiated by UE.
15-16: AM policy association procedure.
16ch-a. The AMF sends Charging Data Request [Event] to CHF for the UE
registration to be granted authorization, rated and accounted.
16ch-b. Account and Rating control by the CHF for the registration and CDR
creation.
16ch-c. The CHF acknowledges by sending Charging Data Response [Event] and the
AMF, granting authorization to the registration.
17 to 24. Same steps as in Figure 5.2.2.2.2.1.
##### 5.2.2.2.4 General Registration -- ECUR
The following figure 5.2.2.2.4.1 describes a Registration charging message
flows in ECUR, based on the clause 5.2.2.2.2 Registration description:
Figure 5.2.2.2.4.1: Registration -- ECUR
1-14c. Registration procedure initiated by UE.
15-16: AM policy association procedure.
16ch-a. The AMF sends Charging Data Request [Initial] to CHF for the UE
registration to be granted authorization.
16ch-b. Account and Rating control by the CHF for the registration and open a
CDR.
16ch-c. The CHF acknowledges by sending Charging Data Response [Initial] and
the AMF, granting authorization to the registration.
17 to 21. Same steps as in Figure 5.2.2.2.2.1.
21ch-a. The AMF sends Charging Data Request [Termination] to CHF for the UE
successful registration.
21ch-b. The CHF closes the CDR for this registration.
21ch-c. The CHF acknowledges by sending Charging Data Response [Termination]
to the AMF.
##### 5.2.2.2.5 Registration with AMF re-allocation -- PEC charging
The following figure 5.2.2.2.5.1 describes a registration with AMF re-
allocation PEC charging, based on figure 4.2.2.2.3-1 TS 23.502 [202]
description:
Figure 5.2.2.2.5.1: Registration with AMF re-allocation-- PEC charging
1-7b. Registration with AMF re-allocation procedure.
21ch-a to 21ch-c: same steps as per Figure 5.2.2.2.2.1.
4-24b. Registration procedure in PEC charging in clause 5.2.2.2.2.
##### 5.2.2.2.6 Registration with AMF re-allocation -- IEC
AMF re-allocation IEC charging is described by the figure 5.2.2.2.5.1 with the
Registration procedure in steps 4-24b. referring to IEC charging in clause
5.2.2.2.3.
##### 5.2.2.2.7 Registration with AMF re-allocation -- ECUR
AMF re-allocation IEC charging is described by the figure 5.2.2.2.5.1 with the
Registration procedure in steps 4-24b. referring to ECUR charging in clause
5.2.2.2.4.
##### 5.2.2.2.8 Deregistration -- PEC charging
The Deregistration message flows are applicable to:
\- UE-initiated deregistration
\- Network-initiated Deregistration.
The following figure 5.2.2.2.8.1 describes a UE-initiated deregistration in
PEC charging, based on figure 4.2.2.3.2-1 of TS 23.502 [202] description:
Figure 5.2.2.2.8.1: UE-initiated Deregistration -- PEC charging
1\. Deregistration procedure initiated by UE.
1ch-a. The AMF sends Charging Data Request [Event] to CHF for the UE
deregistration.
1ch-b. The CHF creates the CDR for this deregistration.
1ch-c. The CHF acknowledges by sending Charging Data Response [Event] to the
AMF.
7: The AMF sends NAS message Deregistration Accept to UE. In case of
Deregistration type is switch-off, the Deregistration Accept message is not
sent.
The following figure 5.2.2.2.8.2 describes a Network-initiated Deregistration
in PEC charging, based on figure 4.2.2.3.3-1 of TS 23.502 [202] description:
Figure 5.2.2.2.8.2: Network-initiated Deregistration -- PEC charging
1\. AMF receives Nudm_UECM_DeregistrationNotification from UDM.
2\. Deregistration Request sent towards the UE. In case of Implicit
Deregistration, the Deregistration Request message is not sent.
2ch-a. The AMF sends Charging Data Request [Event] to CHF for the UE
successful deregistration.
2ch-b. The CHF creates the CDR for this deregistration.
2ch-c. The CHF acknowledges by sending Charging Data Response [Event] to the
AMF.
[3-8]. Deregistration procedure steps.
##### 5.2.2.2.9 Registration -- Untrusted non-3GPP access - PEC charging
The following figure 5.2.2.2.9.1 describes UE Registration via Untrusted
non-3GPP Access, in PEC charging, based on figure 4.12.2.2-1 of TS 23.502
[202] description.
Figure 5.2.2.2.9.1: Registration via Untrusted non-3GPP Access -- PEC
1-11b. UE registration procedure via N3IWF.
12\. Upon successful procedure, NAS Registration Accept sent to N3IWF by AMF.
12ch-a. The AMF sends Charging Data Request [Event] to CHF for the UE
successful registration.
12ch-b. The CHF creates the CDR for this registration.
12ch-c. The CHF acknowledges by sending Charging Data Response [Event] to the
AMF.
##### 5.2.2.2.10 Registration -- Untrusted non-3GPP access - IEC
The following figure 5.2.2.2.10.1 describes UE Registration via Untrusted
non-3GPP Access in IEC, based on figure 4.12.2.2-1 of TS 23.502 [202]
description.
Figure 5.2.2.2.10.1: Registration via Untrusted non-3GPP Access -- IEC
1-11b. UE registration procedure via N3IWF.
11c. Registration procedure in IEC with AMF interactions with PCF, UDM, as
specified in clause 5.2.2.2.3.
11cch-a. to 11cch-c. Same steps as 16ch-a to 16ch-c of Figure 5.2.2.2.3.1.
##### 5.2.2.2.11 Registration -- Untrusted non-3GPP access - ECUR
The following figure 5.2.2.2.11.1 describes UE Registration via Untrusted
non-3GPP Access in ECUR, based on figure 4.12.2.2-1 of TS 23.502 [202]
description.
Figure 5.2.2.2.11.1: Registration via Untrusted non-3GPP Access -- ECUR
1-11b. UE registration procedure via N3IWF.
11c. Registration procedure with AMF interactions with PCF, UDM, as specified
in clause 5.2.2.2.3.
11cch-a. to 11cch-c. Same steps as 16ch-a to 16ch-c of Figure 5.2.2.2.4.1.
12ch-a. to 12ch-c. Same steps as 21ch-a to 21ch-c of Figure 5.2.2.2.4.1.
##### 5.2.2.2.12 Registration for SMS over NAS -- PEC charging
The following figure 5.2.2.2.12.1 describes a registration in 5GS for SMS over
NAS in PEC charging, based on figure 4.13.3.1-1 TS 23.502 [202], where the
\"SMS supported\" indication is included in Registration Request from the UE.
Figure 5.2.2.2.12.1: Registration for SMS over NAS -- PEC charging
Steps 1-7: SMS service activation in the SMSF
Step 8: SMSF answers to the AMF with Nsmsf_SMService_Activate service
9ch-a to 9ch-c: Same steps as 21ch-a to 21ch-c of Figure 5.2.2.2.2.1. The
\"SMS allowed\" indication is included in addition.
##### 5.2.2.2.13 Registration for SMS over NAS -- IEC
The following figure 5.2.2.2.13.1 describes a registration in 5GS for SMS over
NAS in IEC, based on clause 5.2.2.2.12.
Figure 5.2.2.2.13.1: Registration for SMS over NAS -- IEC
Steps 1-4: UE Registration for SMS.
4ch-a to 4ch-c: Same steps as 16ch-a to 16ch-c of Figure 5.2.2.2.2.1. The
\"SMS allowed\" indication is included.
Step 5-9: Registration for SMS procedure
##### 5.2.2.2.14 Registration for SMS over NAS -- ECUR
The following figure 5.2.2.2.14.1 describes a registration in 5GS for SMS over
NAS in ECUR, based on clause 5.2.2.2.12.
Figure 5.2.2.2.14.1: Registration for SMS over NAS -- ECUR
Steps 1-4: UE Registration for SMS.
4ch-a to 4ch-c: Same steps as 16ch-a to 16ch-c of Figure 5.2.2.2.4.1. The
\"SMS allowed\" indication is included.
Step 5-9: Registration for SMS procedure
9ch-a to 9ch-c: Same steps as 21ch-a to 21ch-c of Figure 5.2.2.2.4.1.
##### 5.2.2.2.15 Deregistration for SMS over NAS -- PEC charging
Deregistration procedures for SMS over NAS are specified in TS 23.502 [202]
clause 4.13.3.2:
\- When based on subsequent Registration Request message from the UE, the
registration charging scenario in clause 5.2.2.2.2 or 5.2.2.2.3 applies.
\- When based on procedures in which UE is determined as deregistered by the
AMF, the Network-initiated deregistration charging scenario in clause
5.2.2.2.8 applies.
#### 5.2.2.3 Connection management charging from AMF
##### 5.2.2.3.1 General
The clause below describes connection management charging, which includes:
\- N2 connection for this UE between the AN and the AMF for 3GPP access and
untrusted non-3GPP access.
The TS 23.502 [201] service request procedures and flows are used to describe
one of the N2 connection establishment cases. The procedures for N2 connection
establishment are specified in TS 38.413 [203] for 3GPP access and exceptions
in TS 29.413 [204] for untrusted non-3GPP, under the establishment of UE-
associated logical NG-connection.
##### 5.2.2.3.2 UE Triggered Service Request
The following figure 5.2.2.3.2.1 describes UE N2 connection during UE
Triggered Service Request, in event based offline charging, based on figure
4.2.3.2-1 of TS 23.502 [202] description.
Figure 5.2.2.3.2.1: UE Triggered Service Request --PEC charging
1-13. Service request procedure initiated by UE.
14\. The (R)AN sends N2 Request ACK to AMF.
14ch-a. The AMF sends Charging Data Request [Event] to CHF for the N2
connection established for the UE.
14ch-b. The CHF creates the CDR for this N2 connectionestablishment.
14ch-c. The CHF acknowledges by sending Charging Data Response [Event] to the
AMF.
15-22. Service request procedure continuation.
In case of untrusted non-3GPP, the (R)AN corresponds to an N3IWF, and the
figure 4.2.3.2-1 of TS 23.502 [202] description applies with the exceptions
specified in clause 4.12.4.1 of TS 23.502 [202].
##### 5.2.2.3.3 Network Triggered Service Request
Based on figure 4.2.3.3-1 of TS 23.502 [202] description, a Service Request
procedure from the UE is triggered from the Network, and corresponding N2
connection event offline charging in clause 5.2.2.3.2 applies.
##### 5.2.2.3.4 AN release
The following figure 5.2.2.3.4.1 describes UE N2 connection release in event
based offline charging, based on figure 4.2.6-1 of TS 23.502 [202]
description.
Figure 5.2.2.3.4.1: AN release --PEC charging
1a-3. Release initiated by the (R)AN.
4\. The AMF receives an N2 UE Context Release Complete.
4ch-a. The AMF sends Charging Data Request [Event] to CHF for the UE N2
connection release.
4ch-b. The CHF creates the CDR for this N2 connection release.
4ch-c. The CHF acknowledges by sending Charging Data Response [Event] to the
AMF.
5-7. AN release procedure continuation.
In case of untrusted non-3GPP, the procedure is specified in figure 4.12.4.2-1
of TS 23.502 [202], and the figure 5.2.2.3.4.1 applies with following
differences:
\- (R)AN corresponds to an N3IWF.
\- step 1a is replaced by conditions in figure 4.12.4.2-1 of TS 23.502 [202]
#### 5.2.2.4 Location reporting charging
##### 5.2.2.4.1 General
The clause below describes location reporting charging.
##### 5.2.2.4.2 Location reporting
The following figure 5.2.2.4.2.1 describes Location reporting charging, in
Post Event Charging.
{width="5.543055555555555in" height="5.425in"}
Figure 5.2.2.4.2.1: Location reporting -- Post Event Charging
1\. A New N2 connection is established between NG-RAN and AMF and Location
Reporting charging is activated in the AMF charging profile, potentially with
a list of Presence Reporting Area(s).
2\. The AMF starts the procedure based on figure 4.10-1 of TS 23.502 [202]
description and sends \"Location Reporting Control\" to NG-RAN indicating UE
changes of location or presence in Presence Reporting Area(s) need to be
reported.
3\. Location Report received by AMF includes the UE current location, and
potentially presence in Presence Reporting Area(s).
3ch-a. The AMF sends Charging Data Request [Event, location reporting] to CHF
with the current user location, and initial status(es) of presence in
subscribed PRA(s) if requested in step 1.
3ch-b. The CHF creates the CDR for this location reporting.
3ch-c. The CHF acknowledges by sending Charging Data Response [Event, location
reporting] to the AMF.
4\. Change in UE Location or presence in Presence Reporting Area(s) occur per
AMF criteria provided in step 2.
5\. Location Report is received by AMF.
5ch-a. The AMF sends Charging Data Request [Event, location reporting] to CHF
with the new user location, and PRA Identifier(s) and indication(s) whether
the UE is inside or outside the Presence Reporting Area(s) if any.
5ch-b. The CHF creates the CDR for this location reporting.
5ch-c. The CHF acknowledges by sending Charging Data Response [Event, location
reporting] to the AMF.
#### 5.2.2.5 Roaming - Registration management charging from AMF
##### 5.2.2.5.1 General
In roaming, for registration management charging, the AMF in VPLMN:
\- may support PEC, IEC or ECUR scenario with H-CHF in HPLMN;
\- shall support PEC scenario with V-CHF in VPLMN.
##### 5.2.2.5.2 Registration - PEC to HPLMN
The following figure 5.2.2.5.2.1 describes a Registration charging message
flow in PEC to HPLMN scenario for roaming, based on figure 4.2.2.2.2-1 of TS
23.502 [202] description
Figure 5.2.2.5.2.1: Roaming Registration -- PEC to HPLMN
1-20a. Registration procedure initiated by UE per steps 1 to 20a of figure
4.2.2.2.2-1 of TS 23.502, with PCF, AUSF and UDM in HPLMN.
21\. Upon successful procedure, Registration Accept sent to the UE.
21ch-a. Upon Registration completed trigger, the AMF in VPLMN may send
Charging Data Request [Event] to H-CHF for the UE successful registration,
indicating \"roamer out\".
21ch-b. The H-CHF creates the CDR for this registration.
21ch-c. The H-CHF acknowledges by sending Charging Data Response [Event] to
the AMF in VPLMN.
21ch-d. The AMF in VPLMN sends Charging Data Request [Event] to the V-CHF for
the UE successful registration, indicating \"roamer in\".
21ch-e. The V-CHF creates the CDR for this registration.
21ch-f. The V-CHF acknowledges by sending Charging Data Response [Event] to
the AMF in VPLMN.
##### 5.2.2.5.3 Registration -- IEC to HPLMN
The following figure 5.2.2.5.3.1 describes a Registration charging message
flows in IEC to HPLMN scenario for roaming, based on the clause 5.2.2.2.2
Registration description:
Figure 5.2.2.5.3.1: Roaming Registration -- IEC to HPLMN
1-16. Registration procedure initiated by UE per steps 1 to 16 of figure
4.2.2.2.2-1 of TS 23.502, with PCF, AUSF and UDM in HPLMN.
16ch-a. Upon Registration checked trigger, the AMF in VPLMN sends Charging
Data Request [Event] to H-CHF for the UE registration to be granted
authorization, rated and accounted, indicating \"roamer out\".
16ch-b. Accounting and Rating control by the H-CHF for the registration and
CDR creation.
16ch-c. The H-CHF acknowledges by sending Charging Data Response [Event] to
the AMF in VPLMN, granting authorization to the registration.
21ch-a. Upon Registration completed trigger, the AMF in VPLMN sends Charging
Data Request [Event] to V-CHF for the UE successful registration, indicating
\"roamer in\".
21ch-b. The V-CHF creates the CDR for this registration.
21ch-c. The V-CHF acknowledges by sending Charging Data Response [Event] to
the AMF in VPLMN.
17 to 24. Same steps as in Figure 5.2.2.2.2.1.
##### 5.2.2.5.4 Registration -- ECUR to HPLMN
The following figure 5.2.2.5.4.1 describes a Registration charging message
flows in ECUR to HPLMN scenario for roaming, based on the clause 5.2.2.2.2
Registration description:
Figure 5.2.2.5.4.1: Roaming Registration -- ECUR to HPLMN
1-16. Registration procedure initiated by UE per steps 1 to 16 of figure
4.2.2.2.2-1 of TS 23.502, with PCF, AUSF and UDM in HPLMN.
16ch-a. Upon Registration checked trigger, the AMF sends Charging Data Request
[Initial] to H-CHF for the UE registration to be granted authorization,
indicating \"roamer out\".
16ch-b. Account and Rating control by the H-CHF for the registration and open
a CDR.
16ch-c. The H-CHF acknowledges by sending Charging Data Response [Initial] to
the AMF in VPLMN, granting authorization to the registration.
17 to 21. Same steps as in Figure 5.2.2.2.2.1.
21ch-a. The AMF in VPLMN sends Charging Data Request [Termination] to H-CHF
for the UE successful registration.
21ch-b. The H-CHF closes the CDR for this registration.
21ch-c. The H-CHF acknowledges by sending Charging Data Response [Termination]
to the AMF in VPLMN.
21ch-d. The AMF in VPLMN sends Charging Data Request [Event] to V-CHF for the
UE successful registration, indicating \"roamer in\".
21ch-e. The V-CHF creates the CDR for this registration.
21ch-f. The V-CHF acknowledges by sending Charging Data Response [Event] to
the AMF in VPLMN.
##### 5.2.2.5.5 Deregistration -- PEC to HPLMN
The following figure 5.2.2.5.5.1 describes a deregistration UE-initiated or
Network-initiated in PEC to HPLMN for roaming, based on figure 4.2.2.3.2-1 and
figure 4.2.2.3.3-1 of TS 23.502 [202] description:
Figure 5.2.2.5.5.1: Roaming Deregistration -- PEC to HPLMN
1\. Deregistration Request from the UE or towards the UE.
1ch-a. Upon Deregistration trigger, the AMF in VPLMN sends Charging Data
Request [Event] to H-CHF for the UE successful deregistration, indicating
\"roamer out\".
1ch-b. The H-CHF creates the CDR for this deregistration.
1ch-c. The H-CHF acknowledges by sending Charging Data Response [Event] to the
AMF in VPLMN.
1ch-d. The AMF in VPLMN sends Charging Data Request [Event] to V-CHF for the
UE successful deregistration, indicating \"roamer in\".
1ch-e. The V-CHF creates the CDR for this deregistration.
1ch-f. The V-CHF acknowledges by sending Charging Data Response [Event] to the
AMF in VPLMN
[6-8]. Deregistration procedure steps.
### 5.2.3 CDR generation
#### 5.2.3.1 Introduction
The CHF CDRs for 5G connection and mobility charging are generated by the CHF
to collect charging information that they subsequently transfer to the
Charging Gateway Function (CGF).
The following clauses describe in detail the conditions for generating the CHF
CDR, which shall be supported by the CHF.
#### 5.2.3.2 Triggers for CHF CDR
##### 5.2.3.2.1 General
A 5G connection and mobility charging CHF CDR is used to collect charging
information related to 5G connection and mobility chargeable events for PEC,
IEC and ECUR.
##### 5.2.3.2.2 Triggers for CHF CDR generation
A CHF CDR shall be generated by the CHF for each received Charging Data
Request [Event].
##### 5.2.3.2.3 Triggers for CHF CDR opening
A CHF CDR shall be opened when the CHF receives Charging Data Request
[Initial].
##### 5.2.3.2.4 Triggers for CHF CDR closure
The CHF CDR shall be closed when the CHF receives Charging Data Request
[Termination].
### 5.2.4 Ga record transfer flows
Details of the Ga protocol application are specified in TS 32.295 [54].
### 5.2.5 Bam CDR file transfer
Details of the Bam protocol application are specified in TS 32.297 [52].
# 6\. Definition of charging information
## 6.1 Data description for 5G connection and mobility charging
### 6.1.1 Message contents
#### 6.1.1.1 General
The Charging Data Request and Charging Data Response are specified in TS
32.290 [57] and include charging information. The Charging Data Request can be
of type [Event].
Table 6.1.1.1.1 describes the use of these messages for converged charging.
Table 6.1.1.1.1: Converged charging messages reference table
* * *
**Message** **Source** **Destination** Charging Data Request AMF CHF Charging
Data Response CHF AMF
* * *
The following clauses describe the different fields used in the Charging Data
messages and the category in the tables is used according to the charging data
configuration defined in clause 5.4 of TS 32.240 [1].
#### 6.1.1.2 Charging Data Request message
Table 6.1.1.2.1 illustrates the basic structure of a Charging Data Request
message from the AMF as used for 5G connection and mobility converged
charging.
Table 6.1.1.2.1: Charging Data Request message contents
+----------------------+----------------------+----------------------+ | **Information |** Category for | **Description** | | Element**| converged charging** | | +----------------------+----------------------+----------------------+ | Session Identifier | O~C~ | Described in TS | | | | 32.290 [57] | +----------------------+----------------------+----------------------+ | Subscriber | O~M~ | Described in TS | | Identifier | | 32.290 [57] | | | | | | | | In case Subscriber | | | | Identifier (i.e. | | | | SUPI) is not present | | | | (for emergency | | | | service), the User | | | | Equipment Info in | | | | table 6.2.1.2.1. | | | | shall be present for | | | | identifying the | | | | user. | +----------------------+----------------------+----------------------+ | NF Consumer | M | Described in TS | | Identification | | 32.290 [57] | +----------------------+----------------------+----------------------+ | > NF Functionality | M | Described in TS | | | | 32.290 [57] | +----------------------+----------------------+----------------------+ | > NF Name | O~C~ | Described in TS | | | | 32.290 [57] | +----------------------+----------------------+----------------------+ | > NF Address | O~C~ | Described in TS | | | | 32.290 [57] | +----------------------+----------------------+----------------------+ | > NF PLMN ID | O~C~ | Described in TS | | | | 32.290 [57] | +----------------------+----------------------+----------------------+ | Charging Identifier | - | This field is not | | | | applicable. | +----------------------+----------------------+----------------------+ | Invocation Timestamp | M | Described in TS | | | | 32.290 [57] | +----------------------+----------------------+----------------------+ | Invocation Sequence | M | Described in TS | | Number | | 32.290 [57] | +----------------------+----------------------+----------------------+ | Retransmission | - | This field is not | | Indicator | | applicable. | +----------------------+----------------------+----------------------+ | One-time Event | O~C~ | Described in TS | | | | 32.290 [57] | +----------------------+----------------------+----------------------+ | One-time Event Type | OC | Described in TS | | | | 32.290 [57] | +----------------------+----------------------+----------------------+ | Notify URI | - | This field is not | | | | applicable. | +----------------------+----------------------+----------------------+ | Service | O~C~ | Described in TS | | Specification | | 32.290 [57] | | Information | | | +----------------------+----------------------+----------------------+ | Triggers | O~C~ | This field is | | | | described in TS | | | | 32.290 [57] and | | | | holds the 5G | | | | connection and | | | | mobility specific | | | | triggers described | | | | in clause 5.2.1. | +----------------------+----------------------+----------------------+ | Multiple Unit Usage | O~C~ | Described in TS | | | | 32.290 [57]. | +----------------------+----------------------+----------------------+ | > Rating Group | M | Described in TS | | | | 32.290 [57] | +----------------------+----------------------+----------------------+ | > Requested Unit | O~C~ | Described in TS | | | | 32.290 [57] | +----------------------+----------------------+----------------------+ | AMF Identifier | O~C~ | This field holds the | | | | AMF identifier. | +----------------------+----------------------+----------------------+ | AMF Charging Profile | O~C~ | This field holds the | | | | applicable AMF | | | | Charging Profile | +----------------------+----------------------+----------------------+ | Registration | O~M~ | This field holds the | | Charging Information | | registration | | | | specific information | | | | described in clause | | | | 6.2.1.2 | +----------------------+----------------------+----------------------+ | N2 connection | O~M~ | This field holds the | | Charging Information | | N2 connection | | | | specific information | | | | described in clause | | | | 6.2.1.3 | +----------------------+----------------------+----------------------+ | Location Reporting | O~M~ | This field holds the | | Charging information | | Location Reporting | | | | specific information | | | | described in clause | | | | 6.2.1.4 | +----------------------+----------------------+----------------------+
#### 6.1.1.3 Charging data response message
Table 6.1.1.3.1 illustrates the basic structure of a Charging Data Response
message from the CHF as used for 5G connection and mobility converged
charging.
Table 6.1.1.3.1: Charging Data Response message contents
+----------------------+----------------------+----------------------+ | **Information |** Category for | **Description** | | Element**| converged charging** | | +----------------------+----------------------+----------------------+ | Session Identifier | O~C~ | Described in TS | | | | 32.290 [57] | +----------------------+----------------------+----------------------+ | Invocation Timestamp | M | Described in TS | | | | 32.290 [57] | +----------------------+----------------------+----------------------+ | Invocation Result | O~C~ | Described in TS | | | | 32.290 [57] | +----------------------+----------------------+----------------------+ | Invocation Sequence | M | Described in TS | | Number | | 32.290 [57] | +----------------------+----------------------+----------------------+ | Session Failover | O~C~ | This field is not | | | | applicable. | +----------------------+----------------------+----------------------+ | Triggers | O~C~ | This field is | | | | described in TS | | | | 32.290 [57] and | | | | holds the 5G | | | | connection and | | | | mobility specific | | | | triggers described | | | | in clause 5.2.1. | +----------------------+----------------------+----------------------+ | Multiple Unit | O~C~ | This field is | | Information | | applicable for ECUR. | +----------------------+----------------------+----------------------+ | > Result Code | O~C~ | Described in TS | | | | 32.290 [57] | +----------------------+----------------------+----------------------+ | > Rating Group | O~M~ | Described in TS | | | | 32.290 [57] | +----------------------+----------------------+----------------------+ | > Granted Unit | O~C~ | Described in TS | | | | 32.290 [57] | +----------------------+----------------------+----------------------+ | > Validity Time | O~C~ | Described in TS | | | | 32.290 [57] | +----------------------+----------------------+----------------------+ | AMF Charging Profile | O~C~ | This field holds the | | | | AMF Charging Profile | | | | to be applied | +----------------------+----------------------+----------------------+ | Location Reporting | Oc | This field holds the | | Charging information | | Location Reporting | | | | specific information | | | | described in clause | | | | 6.2.1.4 | +----------------------+----------------------+----------------------+
### 6.1.2 Ga message contents
See clause 5.2.4.
### 6.1.3 CDR description on the B~am~ interface
#### 6.1.3.1 General
This clause describes the CDR content and format generated for 5G connection
and mobility charging
The following tables provide a brief description of each CDR parameter. The
category in the tables is used according to the charging data configuration
defined in clause 5.4 of TS 32.240 [1]. Full definitions of the CDR
parameters, sorted by the name in alphabetical order, are provided in TS
32.298 [51].
#### 6.1.3.2 Registration charging CHF CDR data
If enabled, CHF CDRs for Registration charging shall be produced for each
registration and deregistration
The fields of Registration charging CHF CDR are specified in table 6.1.3.2.1.
Table 6.1.3.2.1: Registration charging CHF record data
+----------------------------+----------+----------------------------+ | Field | Category | Description | +----------------------------+----------+----------------------------+ | Record Type | M | CHF record. | +----------------------------+----------+----------------------------+ | Recording Network Function | OM | This field holds the name | | ID | | of the recording entity, | | | | i.e. the CHF id. | +----------------------------+----------+----------------------------+ | Subscriber Identifier | OM | This field holds the 5G | | | | Subscription Permanent | | | | Identifier (SUPI) of the | | | | served party. This fields | | | | should be present except | | | | for emergency session. | +----------------------------+----------+----------------------------+ | NF Consumer Information | M | This field holds the | | | | information of the AMF | | | | that used the charging | | | | service. | +----------------------------+----------+----------------------------+ | > NF Functionality | M | This field contains the | | | | function of the node (i.e. | | | | AMF) | +----------------------------+----------+----------------------------+ | > NF Name | OC | This field holds the name | | | | of the AMF used. | +----------------------------+----------+----------------------------+ | > NF Address | OC | This field holds the IP | | | | Address of the AMF used. | +----------------------------+----------+----------------------------+ | > NF PLMN ID | Oc | This field holds the PLMN | | | | identifier (MCC MNC) of | | | | the AMF. | +----------------------------+----------+----------------------------+ | Record Opening Time | M | Described in TS 32.298 | | | | [51] | +----------------------------+----------+----------------------------+ | Duration | M | Described in TS 32.298 | | | | [51] | +----------------------------+----------+----------------------------+ | Record Sequence Number | C | Described in TS 32.298 | | | | [51] | +----------------------------+----------+----------------------------+ | Cause for Record Closing | M | Described in TS 32.298 | | | | [51] | +----------------------------+----------+----------------------------+ | Diagnostics | OM | Described in TS 32.298 | | | | [51] | +----------------------------+----------+----------------------------+ | Local Record Sequence | OM | Described in TS 32.298 | | Number | | [51] | +----------------------------+----------+----------------------------+ | Record Extensions | OC | Described in TS 32.298 | | | | [51] | +----------------------------+----------+----------------------------+ | Registration Charging | O~M~ | This field holds the 5G | | Information | | registration specific | | | | information defined in | | | | clause 6.2.1.2. | +----------------------------+----------+----------------------------+
#### 6.1.3.3 N2 connection charging Information CHF CDR data
If enabled, CHF CDRs for N2 connection charging shall be produced for each N2
connection establishment and release.
The fields of N2 connection charging CHF CDR are specified in table 6.1.3.3.1.
Table 6.1.3.3.1: N2 connection charging CHF record data
+----------------------------+----------+----------------------------+ | Field | Category | Description | +----------------------------+----------+----------------------------+ | Record Type | M | CHF record. | +----------------------------+----------+----------------------------+ | Recording Network Function | OM | This field holds the name | | ID | | of the recording entity, | | | | i.e. the CHF id. | +----------------------------+----------+----------------------------+ | Subscriber Identifier | OM | This field holds the 5G | | | | Subscription Permanent | | | | Identifier (SUPI) of the | | | | served party. This fields | | | | should be present except | | | | for emergency session. | +----------------------------+----------+----------------------------+ | NF Consumer Information | M | This field holds the | | | | information of the AMF | | | | that used the charging | | | | service. | +----------------------------+----------+----------------------------+ | > NF Functionality | M | This field contains the | | | | function of the node (i.e. | | | | AMF) | +----------------------------+----------+----------------------------+ | > NF Name | OC | This field holds the name | | | | of the AMF used. | +----------------------------+----------+----------------------------+ | > NF Address | OC | This field holds the IP | | | | Address of the AMF used. | +----------------------------+----------+----------------------------+ | > NF PLMN ID | Oc | This field holds the PLMN | | | | identifier (MCC MNC) of | | | | the AMF. | +----------------------------+----------+----------------------------+ | Record Opening Time | OC | Described in TS 32.298 | | | | [51] | +----------------------------+----------+----------------------------+ | Duration | M | Described in TS 32.298 | | | | [51] | +----------------------------+----------+----------------------------+ | Record Sequence Number | C | Described in TS 32.298 | | | | [51] | +----------------------------+----------+----------------------------+ | Cause for Record Closing | M | Described in TS 32.298 | | | | [51] | +----------------------------+----------+----------------------------+ | Local Record Sequence | OM | Described in TS 32.298 | | Number | | [51] | +----------------------------+----------+----------------------------+ | Record Extensions | OC | Described in TS 32.298 | | | | [51] | +----------------------------+----------+----------------------------+ | N2 connection charging | O~M~ | This field holds the N2 | | Information | | connection specific | | | | information defined in | | | | clause 6.2.1.3 | +----------------------------+----------+----------------------------+
#### 6.1.3.4 Location reporting charging CHF CDR data
If enabled, CHF CDRs for Location reporting charging shall be produced for
each Location reporting.
The fields of Location reporting charging CHF CDR are specified in table
6.1.3.4.1.
Table 6.1.3.4.1: Location reporting charging CHF record data
+----------------------------+----------+----------------------------+ | Field | Category | Description | +----------------------------+----------+----------------------------+ | Record Type | M | CHF record. | +----------------------------+----------+----------------------------+ | Recording Network Function | OM | This field holds the name | | ID | | of the recording entity, | | | | i.e. the CHF id. | +----------------------------+----------+----------------------------+ | Subscriber Identifier | OM | This field holds the 5G | | | | Subscription Permanent | | | | Identifier (SUPI) of the | | | | served party. This fields | | | | should be present except | | | | for emergency session. | +----------------------------+----------+----------------------------+ | NF Consumer Information | M | This field holds the | | | | information of the AMF | | | | that used the charging | | | | service. | +----------------------------+----------+----------------------------+ | > NF Functionality | M | This field contains the | | | | function of the node (i.e. | | | | AMF) | +----------------------------+----------+----------------------------+ | > NF Name | OC | This field holds the name | | | | of the AMF used. | +----------------------------+----------+----------------------------+ | > NF Address | OC | This field holds the IP | | | | Address of the AMF used. | +----------------------------+----------+----------------------------+ | > NF PLMN ID | Oc | This field holds the PLMN | | | | identifier (MCC MNC) of | | | | the AMF. | +----------------------------+----------+----------------------------+ | Record Opening Time | M | Described in TS 32.298 | | | | [51] | +----------------------------+----------+----------------------------+ | Duration | M | Described in TS 32.298 | | | | [51] | +----------------------------+----------+----------------------------+ | Record Sequence Number | C | Described in TS 32.298 | | | | [51] | +----------------------------+----------+----------------------------+ | Cause for Record Closing | M | Described in TS 32.298 | | | | [51] | +----------------------------+----------+----------------------------+ | Local Record Sequence | OM | Described in TS 32.298 | | Number | | [51] | +----------------------------+----------+----------------------------+ | Record Extensions | OC | Described in TS 32.298 | | | | [51] | +----------------------------+----------+----------------------------+ | Location reporting | O~M~ | This field holds the | | charging Information | | Location reporting | | | | specific information | | | | defined in clause 6.2.1.4. | +----------------------------+----------+----------------------------+
## 6.2 5G connection and mobility charging specific parameters
### 6.2.1 Definition of 5G connection and mobility charging information
#### 6.2.1.1 General
The Charging Information parameter used for 5G connection and mobility
charging is provided in the following clauses.
#### 6.2.1.2 Definition of Registration charging information
Specific charging information used for 5G registration charging is provided
within the Registration Charging Information.
The detailed structure of the Registration Charging Information can be found
in table 6.2.1.2.1.
Table 6.2.1.2.1: Structure of Registration Charging Information
+----------------------------+----------+----------------------------+ | Information Element | Category | Description | +----------------------------+----------+----------------------------+ | Registration message type | M | This field holds the | | | | message type received by | | | | the AMF associated to | | | | registration: registration | | | | (initial, mobility, | | | | periodic, emergency), | | | | deregistration. | +----------------------------+----------+----------------------------+ | User Information | O~M~ | Group of user information. | +----------------------------+----------+----------------------------+ | User Identifier | O~C~ | This field contains the | | | | identification of the user | | | | (i.e. GPSI). | +----------------------------+----------+----------------------------+ | User Equipment Info | O~C~ | This field holds the | | | | identification of the | | | | terminal (i.e. PEI, MAC | | | | Address) | | | | | | | | It may be used for | | | | identifying the user and | | | | shall be present in case | | | | Subscriber Identifier is | | | | not present. | +----------------------------+----------+----------------------------+ | unauthenticatedFlag | O~C~ | This field indicates the | | | | served SUPI is not | | | | authenticated. | +----------------------------+----------+----------------------------+ | Roamer In Out | O~C~ | This field holds an | | | | indication if the roamer | | | | is in-bound or out-bound. | | | | This field is present only | | | | if UE is identified as a | | | | roamer. | +----------------------------+----------+----------------------------+ | UE 5GMM Core Network | O~C~ | This field holds the UE | | Capability | | 5GMM Core Network | | | | Capability included in UE | | | | MM Core network | | | | capabilities, as specified | | | | in clause 5.4.4a TS 23.501 | | | | [200] | +----------------------------+----------+----------------------------+ | MICO Mode Indication | O~C~ | This field indicates | | | | whether the MICO Mode is | | | | applicable or not. | +----------------------------+----------+----------------------------+ | SMS Supported Indication | O~C~ | This field indicates | | | | whether SMS is supported | | | | or not. | +----------------------------+----------+----------------------------+ | RAT Type | O~C~ | This field holds the Radio | | | | Access Technology (RAT) | | | | currently serving the UE. | +----------------------------+----------+----------------------------+ | TAI List | O~C~ | This field holds a set of | | | | tracking areas composing | | | | the Registration Area. | +----------------------------+----------+----------------------------+ | User Location Info | O~C~ | This field indicates | | | | details of where the UE is | | | | currently located | | | | (access-specific user | | | | location information). | +----------------------------+----------+----------------------------+ | PSCell Information | O~C~ | This field holds the | | | | PSCell: Primary SCG | | | | (Secondary Cell Group) | | | | Cell | +----------------------------+----------+----------------------------+ | UE Time Zone | O~C~ | This field holds the Time | | | | Zone of where the UE is | | | | located, if available | | | | where the UE currently | | | | resides. | +----------------------------+----------+----------------------------+ | Mobility Restrictions | O~C~ | This field holds the | | | | Mobility Restrictions | | | | applicable to the UE: RAT | | | | restriction, Forbidden | | | | area, Service area | | | | restrictions and Core | | | | Network type restriction. | +----------------------------+----------+----------------------------+ | Requested NSSAI | O~C~ | This field holds the | | | | requested NSSAI. | +----------------------------+----------+----------------------------+ | Allowed NSSAI | O~C~ | This field holds the | | | | allowed NSSAI consisting | | | | of one or more S-NSSAIs | | | | for serving PLMN in the | | | | present Registration Area. | +----------------------------+----------+----------------------------+ | Rejected NSSAI | O~C~ | This field holds the | | | | rejected NSSAI. | +----------------------------+----------+----------------------------+ | NSSAI mapping list | O~C~ | This field holds mapping | | | | of each S-NSSAI of the | | | | Allowed NSSAI to the | | | | S-NSSAIs of the Subscribed | | | | S-NSSAIs. | +----------------------------+----------+----------------------------+ | AMF UE NGAP ID | O~M~ | This fields holds the UE | | | | association over the N2 | | | | interface within the AMF. | +----------------------------+----------+----------------------------+ | RAN UE NGAP ID | O~M~ | This fields holds the RAN | | | | UE NGAP ID over N2 | | | | interface. | +----------------------------+----------+----------------------------+ | RAN Node Id | O~M~ | This fields holds the | | | | Global RAN Node ID. | +----------------------------+----------+----------------------------+
#### 6.2.1.3 Definition of N2 Connection charging information
Specific charging information used for 5G N2 Connection charging is provided
within the N2 connection charging Information.
The detailed structure of the N2 connection Charging Information can be found
in table 6.2.1.3.1.
Table 6.2.1.3.1: Structure of N2 Connection Charging Information
+----------------------------+----------+----------------------------+ | Information Element | Category | Description | +----------------------------+----------+----------------------------+ | N2 Connection message type | M | This field holds the N2 | | | | message type received by | | | | the AMF. | +----------------------------+----------+----------------------------+ | User Information | O~M~ | Group of user information. | +----------------------------+----------+----------------------------+ | User Identifier | O~C~ | This field contains the | | | | identification of the user | | | | (i.e. GPSI). | +----------------------------+----------+----------------------------+ | User Equipment Info | O~C~ | This field holds the | | | | identification of the | | | | terminal (i.e. PEI, MAC | | | | Address) | | | | | | | | It is used for identifying | | | | the user in case SUPI is | | | | not present during | | | | emergency service. | +----------------------------+----------+----------------------------+ | unauthenticatedFlag | O~C~ | This field indicates the | | | | served SUPI is not | | | | authenticated. | +----------------------------+----------+----------------------------+ | User Location Info | O~C~ | This field indicates | | | | details of where the UE is | | | | currently located | | | | (access-specific user | | | | location information). | +----------------------------+----------+----------------------------+ | PSCell Information | O~C~ | This field holds the | | | | PSCell: Primary SCG | | | | (Secondary Cell Group) | | | | Cell | +----------------------------+----------+----------------------------+ | UE Time Zone | O~C~ | This field holds the Time | | | | Zone of where the UE is | | | | located, if available | | | | where the UE currently | | | | resides. | +----------------------------+----------+----------------------------+ | RAT Type | O~C~ | This field holds the Radio | | | | Access Technology (RAT). | +----------------------------+----------+----------------------------+ | AMF UE NGAP ID | O~M~ | This fields holds the UE | | | | association over the N2 | | | | interface within the AMF. | +----------------------------+----------+----------------------------+ | RAN UE NGAP ID | O~M~ | This fields holds the RAN | | | | UE NGAP ID over N2 | | | | interface. | +----------------------------+----------+----------------------------+ | RAN Node Id | O~M~ | This fields holds the | | | | Global RAN Node ID. | +----------------------------+----------+----------------------------+ | Mobility Restrictions | O~C~ | This field holds the | | | | Mobility Restrictions | | | | applicable to the UE: RAT | | | | restriction, Forbidden | | | | area, Service area | | | | restrictions and Core | | | | Network type restriction. | +----------------------------+----------+----------------------------+ | Allowed NSSAI | O~C~ | This field holds the | | | | allowed NSSAI consisting | | | | of one or more S-NSSAIs | | | | for serving PLMN in the | | | | present Registration Area. | +----------------------------+----------+----------------------------+ | RRC Establishment Cause | O~C~ | This fields holds the | | | | reason for RRC Connection | | | | Establishment as received | | | | from the UE. | +----------------------------+----------+----------------------------+
#### 6.2.1.4 Definition of Location Reporting charging information
Specific charging information used for 5G Location Reporting charging is
provided within the Location reporting charging Information.
The detailed structure of the Location reporting charging Information can be
found in table 6.2.1.4.1.
Table 6.2.1.4.1: Structure of Location Reporting Charging Information
+----------------------------+----------+----------------------------+ | Information Element | Category | Description | +----------------------------+----------+----------------------------+ | Location reporting message | M | This field holds the | | type | | location reporting message | | | | type received by the AMF. | +----------------------------+----------+----------------------------+ | User Information | O~M~ | Group of user information. | +----------------------------+----------+----------------------------+ | User Identifier | O~C~ | This field contains the | | | | identification of the user | | | | (i.e. GPSI). | +----------------------------+----------+----------------------------+ | User Equipment Info | O~C~ | This field holds the | | | | identification of the | | | | terminal (i.e. PEI, MAC | | | | Address) | | | | | | | | It is used for identifying | | | | the user in case SUPI is | | | | not present during | | | | emergency service. | +----------------------------+----------+----------------------------+ | unauthenticatedFlag | O~C~ | This field indicates the | | | | served SUPI is not | | | | authenticated. | +----------------------------+----------+----------------------------+ | User Location Info | O~M~ | This field indicates | | | | details of where the UE is | | | | currently located under | | | | the access type. | +----------------------------+----------+----------------------------+ | PSCell Information | O~C~ | This field holds the | | | | PSCell: Primary SCG | | | | (Secondary Cell Group) | | | | Cell | +----------------------------+----------+----------------------------+ | UE Time Zone | O~C~ | This field holds the Time | | | | Zone of where the UE is | | | | located, if available | | | | where the UE currently | | | | resides. | +----------------------------+----------+----------------------------+ | Presence Reporting Area | O~C~ | This field contains the | | Information | | Presence Reporting Area | | | | Information of UE as | | | | defined in TS 23.501 | | | | [200], comprising the | | | | Presence Reporting Area | | | | identifier(s) and an | | | | indication on whether the | | | | UE is inside or outside | | | | the Presence Reporting | | | | Area, if available. | +----------------------------+----------+----------------------------+ | RAT Type | O~C~ | This field holds the Radio | | | | Access Technology (RAT). | +----------------------------+----------+----------------------------+
### 6.2.2 Formal 5G connection and mobility charging parameter description
#### 6.2.2.1 5G connection and mobility CHF CDR parameters
The detailed definitions, abstract syntax and encoding of 5G connection and
mobility CHF CDRs parameters are specified in TS 32.298 [51].
#### 6.2.2.2 5G connection and mobility resources attributes
The detailed definitions of resources attributes used for 5G connection and
mobility charging are specified in TS 32.291 [58].
### 6.2.3 Detailed message format for converged charging
The following clause specifies per Operation Type the charging data that are
sent by AMF for 5G connection and mobility converged charging.
The Operation Types are listed in the following order: I (Initial)/T
(Termination)/E (Event). Therefore, when all Operation Types are possible it
is marked as ITE. If only some Operation Types are allowed for a node, only
the appropriate letters are used (i.e. IT or E) as indicated in the table
heading. The omission of an Operation Type for a particular field is marked
with \"-\" (i.e. I-E). Also, when an entire field is not allowed in a node the
entire cell is marked as \"-\".
Table 6.2.3.1 defines the basic structure of the supported fields in the
_Charging Data Request_ message for AMF converged charging.
Table 6.2.3.1: Supported fields in Charging Data Request message
* * *
Information Element Functionality of AMF Reg. N2 cnt Loc. Report. Supported
Operation Types I/T/E E E Session Identifier ITE E E  
Subscriber Identifier ITE E E  
NF Consumer Identification ITE E E  
Charging Identifier - - -  
Invocation Timestamp ITE E E  
Invocation Sequence Number ITE E E  
Retransmission Indicator - - -  
One-time Event --E E E  
One-time Event Type --E E E  
Notify URI - - -  
Service Specification Information ITE E E  
Triggers ITE - -  
Multiple Unit Usage ITE - -  
AMF Identifier ITE E E  
AMF Charging Profile I-E E E  
Registration Charging Information  
Registration Message type ITE - -  
User Information ITE - -  
UE 5GMM Core Network Capability ITE - -  
MICO Mode Indication ITE - -  
SMS Supported Indication ITE - -  
Access Type ITE - -  
RAT Type ITE - -  
TAI List ITE - -  
User Location Info ITE - -  
PSCell Information ITE - -  
UE Time Zone ITE - -  
Mobility Restrictions ITE - -  
Requested NSSAI ITE - -  
Allowed NSSAI ITE - -  
Rejected NSSAI ITE - -  
NSSAI mapping list ITE - -  
AMF UE NGAP ID ITE - -  
RAN UE NGAP ID ITE - -  
RAN Node Id ITE - -  
N2 Connection Charging Information  
N2 Connection Message type - E -  
User Information - E -  
User Location Info - E -  
PSCell Information - E -  
UE Time Zone - E -  
RAT Type - E -  
AMF UE NGAP ID - E -  
RAN UE NGAP ID - E -  
RAN Node Id - E -  
Mobility Restrictions - E -  
Allowed NSSAI - E -  
RRC Establishment Cause - E -  
Location Reporting Charging information  
Location reporting Message type - - E  
User Information - - E  
User Location Info - - E  
PSCell Information - - E  
UE Time Zone - - E  
Presence Reporting Area Information - - E  
RAT Type - - E
* * *
Table 6.2.3.2 defines the basic structure of the supported fields in the
_Charging Data Response_ message for AMF converged charging.
Table 6.2.3.2: Supported fields in Charging Data Response message
+-----------------+-----------------+------+--------+--------------+ | Information | Functionality | Reg. | N2 cnt | Loc. Report. | | Element | of AMF | | | | +-----------------+-----------------+------+--------+--------------+ | | Supported | ITE | E | E | | | Operation Types | | | | +-----------------+-----------------+------+--------+--------------+ | Session | ITE | E | E | | | Identifier | | | | | +-----------------+-----------------+------+--------+--------------+ | Invocation | ITE | E | E | | | Timestamp | | | | | +-----------------+-----------------+------+--------+--------------+ | Invocation | ITE | E | E | | | Result | | | | | +-----------------+-----------------+------+--------+--------------+ | Invocation | ITE | E | E | | | Sequence Number | | | | | +-----------------+-----------------+------+--------+--------------+ | Session | I-- | - | - | | | Failover | | | | | +-----------------+-----------------+------+--------+--------------+ | Triggers | - | E | E | | +-----------------+-----------------+------+--------+--------------+ | Multiple Unit | - | - | - | | | information | | | | | +-----------------+-----------------+------+--------+--------------+ | AMF Charging | I-E | E | E | | | Profile | | | | | +-----------------+-----------------+------+--------+--------------+ | ----------- | | | | | | --------------- | | | | | | --------------- | | | | | | Location | | | | | | Reporting Charg | | | | | | ing information | | | | | | ----------- | | | | | | --------------- | | | | | | --------------- | | | | | +-----------------+-----------------+------+--------+--------------+ | Location | - | - | - | | | reporting | | | | | | Message type | | | | | +-----------------+-----------------+------+--------+--------------+ | User | - | - | - | | | Information | | | | | +-----------------+-----------------+------+--------+--------------+ | User Location | - | - | - | | | Info | | | | | +-----------------+-----------------+------+--------+--------------+ | PSCell | - | - | - | | | Information | | | | | +-----------------+-----------------+------+--------+--------------+ | UE Time Zone | - | - | - | | +-----------------+-----------------+------+--------+--------------+ | Presence | - | - | E | | | Reporting Area | | | | | | Information | | | | | +-----------------+-----------------+------+--------+--------------+ | RAT Type | - | - | - | | +-----------------+-----------------+------+--------+--------------+
## 6.3 Bindings for 5G connection and mobility converged charging
This mapping between the Information Elements, resource attributes and CHF CDR
parameters for 5G connection and mobility converged charging is described in
clause 7 of TS 32.291 [58].
###### ## Annex A (normative): Charging Characteristics
# A.1 General
A subscriber may have Charging Characteristics assigned to his subscription.
Default Charging Characteristics may also be pre-provisioned on the AMF.
During UE Registration, the subscribed Charging Characteristics, if any, shall
override the AMF pre-provisioned Charging Characteristics. The subscribed
Charging Characteristics may be transferred from old AMF during UE context
transfer or retrieved from UDM.
The Charging Characteristics parameter consists of a string of 16 bits
designated as Behaviours (B), freely defined by Operators, as shown in TS
32.298 [51]. Each bit corresponds to an index to specific charging behaviour
which is configured on a per operator basis and active when the bit is set to
\"1\" value.
The following Table A.1.1 provides an example of Charging Characteristics for
AMF:
Table A.1.1: Example of Charging Characteristics behaviours for AMF
+-------+-------+-------+-------+-------+-------+-------+-------+-------+ | | | Re | N2 | Loc | | | | | | | | gistr | c | ation | | | | | | | | ation | onnec | repo | | | | | | | | cha | tions | rting | | | | | | | | rging | cha | cha | | | | | | | | | rging | rging | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | Beha | **Pr |** Act | **Cha | A |** Cha | **Act |** Cha | **Le | | viour | imary | ive** | rging | ctive | rging | ive**| rging | vel** | | Index | and | | scena | | scena | | scena | | | | Seco | | rio**| | rio** | | rio**| | | | ndary | | | | | | | | | | CHF** | | | | | | | | | | | | | | | | | | | | **a | | | | | | | | | | ddres | | | | | | | | | | ses** | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | 0 | URI 1 | Yes | ECUR | No | - | No | - | | | | | | | | | | | | | | URI 2 | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | 1 | URI 1 | Yes | IEC | Yes | PEC | Yes | PEC | TAI, | | | | | | | | | | Cell | | | URI 2 | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | 2 | URI 1 | Yes | PEC | No | - | Yes | PEC | Cell | | | | | | | | | | | | | URI 2 | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | 3 | URI 1 | No | - | Yes | PEC | Yes | PEC | TAI | | | | | | | | | | | | | URI 2 | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | ... | ... | ... | ... | ... | ... | ... | ... | ... | +-------+-------+-------+-------+-------+-------+-------+-------+-------+
#