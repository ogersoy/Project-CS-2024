# Foreword
This Technical Specification has been produced by the 3rd Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document contains the description and definition of the
measurements performed by network or the UE that are transferred over the
standardised interfaces in order to support NR radio link operations, radio
resource management (RRM), network operations and maintenance (OAM),
minimization of drive tests (MDT) and self-organising networks (SON).
Only the differences relative to TS 28.552 v16.2.0 [2] are specified in this
specification.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or non‑specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 28.552: \"5G performance measurements\".
[3] 3GPP TS 38.331: \"Radio Resource Control (RRC) protocol specification\".
[4] 3GPP TS 23.501: \"System Architecture for the 5G System; Stage 2\".
# 3 Definitions of terms, symbols and abbreviations
## 3.1 Terms
For the purposes of the present document, the terms given in TR 21.905 [1] and
the following apply. A term defined in the present document takes precedence
over the definition of the same term, if any, in TR 21.905 [1].
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in TR 21.905
[1] and the following apply. An abbreviation defined in the present document
takes precedence over the definition of the same abbreviation, if any, in TR
21.905 [1].
# 4 Layer 2 measurements
## 4.1 General
All the per DRB per cell measurements and per DRB per UE measurements can be
aggregated into per QoS level per cell and per PLMN ID per cell by network
implementation. All the performance measurements for gNB defined in TS 28.552
[2] 5.1 can be calculated into per PLMN ID level by network implementation.
Per QoS level refers to per mapped 5QI for NR SA or per QCI for EN-DC.
## 4.2 NR measurements performed by the gNB
### 4.2.1 Measurements valid for all gNB deployment scenarios
#### 4.2.1.1 Received Random Access Preambles
##### 4.2.1.1.1 Received Random Access Preambles per cell
A use case for this measurement is RACH configuration optimization, where
Received Random Access Preambles is signalled across an OAM interface.
Protocol Layer: MAC
Table 4.2.1.1.1-1: Definition for Received Random Access Preambles per cell
+------------+--------------------------------------------------------+ | Definition | Received Random Access Preambles per cell. This | | | measurement is applicable to PRACH. The reference | | | point is the Service Access Point between MAC and L1. | | | The measured quantity is the number of received Random | | | Access preambles during a time period over all PRACHs | | | configured in a cell. The measurement is done | | | separately for: | | | | | | - Dedicated preambles | | | | | | - Randomly selected preambles in the low range | | | | | | - Randomly selected preambles in the high range. | | | | | | The unit of the measured value is [/s]. | +------------+--------------------------------------------------------+
##### 4.2.1.1.2 Received Random Access Preambles per SSB
A use case for this measurement is RACH configuration optimization, where
Received Random Access Preambles is signalled across an OAM interface.
Protocol Layer: MAC
Table 4.2.1.1.2-1: Definition for Received Random Access Preambles per SSB
+------------+--------------------------------------------------------+ | Definition | Received Random Access Preambles per SSB. This | | | measurement is applicable to PRACH. The reference | | | point is the Service Access Point between MAC and L1. | | | The measured quantity is the number of received Random | | | Access preambles during a time period over all PRACHs | | | configured in the SSB of the cell. The measurement is | | | done separately for: | | | | | | - Dedicated preambles | | | | | | - Randomly selected preambles in the low range | | | | | | - Randomly selected preambles in the high range. | | | | | | The unit of the measured value is [/s]. | +------------+--------------------------------------------------------+
#### 4.2.1.2 Packet delay
##### 4.2.1.2.1 General
Packet delay includes RAN part of delay and CN part of delay.
The RAN part of DL packet delay measurement comprises:
\- D1 (DL delay in over-the-air interface), referring to Average delay DL air-
interface in TS 28.552 [2] 5.1.1.1.1.
\- D2 (DL delay on gNB-DU), referring to Average delay in RLC sublayer of gNB-
DU in TS 28.552 [2] 5.1.3.3.3.
\- D3 (DL delay on F1-U), referring to Average delay on F1-U in TS 28.552 [2]
5.1.3.3.2.
\- D4 (DL delay in CU-UP), referring to Average delay DL in CU-UP in TS 28.552
[2] 5.1.3.3.1.
The DL packet delay measurements, i.e. D1 (the DL delay in over-the-air
interface ), D2 (the DL delay in gNB-DU), D3 (the DL delay on F1-U) and D4
(the DL delay in CU-UP), should be measured per DRB per UE.
NOTE: The delay measurements D1, D2 and D4 are also applicable for EUTRA in
case of EN-DC related DL delay measurements on the MN side.
The RAN part (including UE) of UL packet delay measurement comprises:
\- D1 (UL PDCP packet average delay, as defined in clause 4.3.1.1).
\- D2.1 (average over-the-air interface packet delay, as defined in
4.2.1.2.2).
\- D2.2 (average RLC packet delay, as defined in 4.2.1.2.3).
\- D2.3 (average delay UL on F1-U, it is measured using the same metric as the
average delay DL on F1-U defined in TS 28.552 [2] clause 5.1.3.3.2).
\- D2.4 (average PDCP re-ordering delay, as defined in 4.2.1.2.4).
The UL packet delay measurements, i.e. D1(UL PDCP packet average delay),
D2.1(average over-the-air interface packet delay), D2.2(average RLC packet
delay), D2.3(average delay UL on F1-U) and D2.4(average PDCP re-ordering
delay), should be measured per DRB per UE. The unit of D1, D2.1, D2.2, D2.3
and D2.4 is 0.1ms.
NOTE: The delay measurements D1, D2.1, D2.2 and D2.4 are also applicable for
EUTRA in case of EN-DC related UL delay measurements on the MN side.
For non CU-UP and DU split case, RAN part of packet delay excludes the delay
at FI-U interface, i.e. D2.3 and D3.
If network disables the PDCP re-ordering function, the value of Average PDCP
re-ordering delay i.e. D2.4 should be set to 0.
For the QoS monitoring in TS 23.501 [4], RAN informs the RAN part of UL packet
delay measurement, or the RAN part of DL packet delay measurement, or both to
the CN.
##### 4.2.1.2.2 Average over-the-air interface packet delay in the UL per DRB
per UE
The objective of this measurement is to measure air interface UL packet delay
for OAM performance observability or for QoS verification of MDT or for the
QoS monitoring as defined in TS 23.501 [4].
Protocol Layer: MAC
Table 4.2.1.2.2-1: Definition for Average over-the-air packet delay in the UL
per DRB per UE
+------------+--------------------------------------------------------+ | Definition | Average over-the-air packet delay in the UL per DRB | | | per UE. This measurement is applicable for EN-DC and | | | SA. This measurement refers to packet delay for DRBs. | | | This measurement provides the average (arithmetic | | | mean) time it takes to successfully receive a | | | transport block from the time of UL transmission | | | indicated in scheduling grant. | | | | | | Detailed Definition: | | | | | | $M(T,drb | | | id) = \left\lfloor \frac{\sum_{\forall i}^{}{tSucc(i,d | | | rbid) - \text{tSc}hed(i,drbid)}}{I(T)} \right\rfloor$, | | | where | | | | | | explanations can be found in the table 4.2.1.2.2-2 | | | below. | +------------+--------------------------------------------------------+
Table 4.2.1.2.2-2: Parameter description for Average over-the-air packet delay
in the UL per DRB per UE
$$M(T,\text{drbid})$$ Over-the-air packet delay in the UL per DRB per UE,
averaged during time period $T$. Unit: 0.1 ms.
* * *
$$\text{tSc}h\text{ed}(i,\text{drbid})$$ The point in time when the UL MAC SDU
i is scheduled in MAC layer as per the scheduling grant provided.
$$\text{tSucc}(i,\text{drbid})$$ The point in time when the UL MAC SDU i is
successfully sent to RLC. $$i$$ A UL MAC SDU that arrives at the MAC during
time period $T$. $$I(T)$$ Total number of UL MAC SDUs $i$. $$T$$ Time Period
during which the measurement is performed $$\text{drbid}$$ The identity of the
measured DRB.
##### 4.2.1.2.3 Average RLC packet delay in the UL per DRB per UE
The objective of this measurement is to measure RLC delay in the UL for OAM
performance observability or for QoS verification of MDT or for the QoS
monitoring as defined in TS 23.501 [4].
Protocol Layer: RLC
Table 4.2.1.2.3-1: Definition for Average RLC packet delay in the UL per DRB
per UE
+------------+--------------------------------------------------------+ | Definition | Average RLC delay in the UL per DRB per UE. This | | | measurement is applicable for EN-DC and SA. This | | | measurement refers to packet delay for DRBs. For CU-UP | | | and DU split scenario or DC scenario, this measurement | | | refers to the RLC delay on each DU or RAN node. This | | | measurement provides the average (arithmetic mean) | | | time it takes from the RLC PDU including the first | | | part of an RLC SDU is received to the RLC SDU is sent | | | to PDCP or CU-UP for split gNB. | | | | | | Detailed Definition: | | | | | | $M | | | (T,drbid) = \left\lfloor \frac{\sum_{\forall i}^{}{tSe | | | nt(i,drbid) - tReceiv(i,drbid)}}{I(T)} \right\rfloor$, | | | where | | | | | | explanations can be found in the table 4.2.1.2.3-2 | | | below. | +------------+--------------------------------------------------------+
Table 4.2.1.2.3-2: Parameter description for Average RLC packet delay in the
UL per DRB per UE
$$M(T,\text{drbid})$$ RLC delay in the UL per DRB per UE, averaged during time
period $T$. Unit: 0.1 ms.
* * *
$$\text{tReceiv}(i,\text{drbid})$$ The point in time when the UL RLC PDU
including the first part of the UL RLC SDU i is received. $$\text{tSent}(i,\
\text{drbid})$$ The point in time when the UL RLC SDU i is sent to PDCP or CU-
UP for split gNB. $$i$$ A UL RLC SDU that is received by the RLC during time
period $T$. $$I(T)$$ Total number of UL RLC SDUs $i$. $$T$$ Time Period during
which the measurement is performed $$\text{drbid}$$ The identity of the
measured DRB.
##### 4.2.1.2.4 Average PDCP re-ordering delay in the UL per DRB per UE
The objective of this measurement is to measure PDCP re-ordering delay in the
UL for OAM performance observability or for QoS verification of MDT or for the
QoS monitoring as defined in TS 23.501 [4].
Protocol Layer: PDCP
Table 4.2.1.2.4-1: Definition for Average PDCP re-ordering delay in the UL per
DRB per UE
+------------+--------------------------------------------------------+ | Definition | Average PDCP re-ordering delay in the UL per DRB per | | | UE. This measurement is applicable for EN-DC and SA. | | | This measurement refers to packet delay for DRBs. This | | | measurement provides the average (arithmetic mean) | | | time it takes from the point a PDCP PDU is received to | | | the PDCP SDU is sent to upper SAP. | | | | | | Detailed Definition: | | | | | | $M | | | (T,drbid) = \left\lfloor \frac{\sum_{\forall i}^{}{tSe | | | nt(i,drbid) - tReceiv(i,drbid)}}{I(T)} \right\rfloor$, | | | where | | | | | | explanations can be found in the table 4.1.1.2.4-2 | | | below. | +------------+--------------------------------------------------------+
Table 4.2.1.2.4-2: Parameter description for Average PDCP re-ordering delay in
the UL per DRB per UE
$$M(T,\text{drbid})$$ PDCP re-ordering delay in the UL per DRB per UE,
averaged during time period $T$. Unit: 0.1 ms.
* * *
$$\text{tReceiv}(i,\ \text{drbid})$$ The point in time when the UL PDCP PDU
including the UL PDCP SDU i is received. $$\text{tSent}(i,\text{drbid})$$ The
point in time when the UL PDCP SDU i is sent to upper SAP. $$i$$ A UL PDCP SDU
that is received by the PDCP during time period $T$. $$I(T)$$ Total number of
UL PDCP SDUs received during time period $T$. $$T$$ Time Period during which
the measurement is performed $$\text{drbid}$$ The identity of the measured
DRB.
#### 4.2.1.3 Number of active UEs in RRC_CONNECTED
##### 4.2.1.3.1 General
The objective of the measurement is to measure the number of active UEs per
QoS level for OAM performance observability or for SON functions e.g.,
mobility load balancing. It is intended to be part of a calculation to
determine the bitrate UEs achieve when they are active, i.e. when applications
are transmitting and receiving data. The measurements are applicable for both
non-split gNB and split gNB deployment scenario.
##### 4.2.1.3.2 Mean number of Active UEs in the DL per DRB per cell
Protocol Layer: MAC, RLC
Table 4.2.1.3.2-1: Definition for Mean number of Active UEs in the DL per DRB
per cell
+------------+--------------------------------------------------------+ | Definition | Mean number of Active UEs in the DL per DRB per cell. | | | The DRBs are mapped with the same 5QI for NR SA or | | | mapped with the same QCI for EN-DC. This measurement | | | refers to UEs for which there is data available for | | | transmission for the DL for DRBs. | | | | | | Detailed Definition: | | | | | | $M(T,drbid,p) = \frac{\left\lfloor \frac{\sum_{\for | | | all i}^{}{N(i,drbid)}}{I(T,p)}*10 \right\rfloor}{10}$, | | | where | | | | | | explanations can be found in the table 4.2.1.3.2-2 | | | below. | +------------+--------------------------------------------------------+
Table 4.2.1.3.2-2: Parameter description for Mean number of Active UEs in the
DL per DRB per cell
+-------------------------+-------------------------------------------+ | $$M(T,\text{drbid},p)$$ | Mean number of Active UEs in the DL per | | | DRB per cell, averaged during time period | | | $T$. Unit: 0.1. | +=========================+===========================================+ | $$N(i,\text{drbid})$$ | Number of UEs for which there is data | | | available for transmission for the DL in | | | MAC or RLC protocol layers for a Data | | | Radio Bearer of traffic class at sampling | | | occasion $i$. | | | | | | Data available for transmission includes | | | data for which HARQ transmission has not | | | yet terminated. | +-------------------------+-------------------------------------------+ | $$i$$ | Sampling occasion during time period $T$. | | | A sampling occasion shall occur once | | | every $p$ seconds. | +-------------------------+-------------------------------------------+ | $$p$$ | Sampling period length. Unit: second. The | | | sampling period shall be at most 0.1 s. | +-------------------------+-------------------------------------------+ | $$I(T,p)$$ | Total number of sampling occasions during | | | time period $T$. | +-------------------------+-------------------------------------------+ | $$T$$ | Time Period during which the measurement | | | is performed, Unit: second. | +-------------------------+-------------------------------------------+ | $$\text{drbid}$$ | The DRBs mapped with the same 5QI for NR | | | SA or mapped with the same QCI for EN-DC. | +-------------------------+-------------------------------------------+
##### 4.2.1.3.3 Max number of Active UEs in the DL per DRB per cell
Protocol Layer: MAC, RLC
Table 4.2.1.3.3-1: Definition for Max number of Active UEs in the DL per DRB
per cell
+------------+--------------------------------------------------------+ | Definition | Maximum number of Active UEs in the DL per DRB per | | | cell. The DRBs are mapped with the same 5QI for NR SA | | | or mapped with the same QCI for EN-DC. This | | | measurement refers to UEs for which there is data | | | available for transmission for the DL for DRBs. | | | | | | Detailed Definition: | | | | | | $M(T,drbid,p) = \max_{T}\left( | | | N\left( i,drbid \right) \right)$, | | | where | | | | | | explanations can be found in the table 4.2.1.3.3-2 | | | below. | +------------+--------------------------------------------------------+
Table 4.2.1.3.3-2: Parameter description for Max number of Active UEs in the
DL per DRB per cell
+-------------------------+-------------------------------------------+ | $$M(T,\text{drbid},p)$$ | Maximum number of Active UEs in the DL | | | per DRB per cell, averaged during time | | | period $T$. Unit: Integer. | +=========================+===========================================+ | $$N(i,\text{drbid})$$ | Number of UEs for which there is data | | | available for transmission for the DL in | | | MAC or RLC protocol layers for a Data | | | Radio Bearer of traffic class at sampling | | | occasion $i$. | | | | | | Data available for transmission includes | | | data for which HARQ transmission has not | | | yet terminated. | +-------------------------+-------------------------------------------+ | $$i$$ | Sampling occasion during time period $T$. | | | A sampling occasion shall occur once | | | every $p$ seconds. | +-------------------------+-------------------------------------------+ | $$p$$ | Sampling period length. Unit: second. The | | | sampling period shall be at most 0.1 s. | +-------------------------+-------------------------------------------+ | $$T$$ | Time Period during which the measurement | | | is performed, Unit: second. | +-------------------------+-------------------------------------------+ | $$\text{drbid}$$ | The DRBs mapped with the same 5QI for NR | | | SA or mapped with the same QCI for EN-DC. | +-------------------------+-------------------------------------------+
##### 4.2.1.3.4 Mean number of Active UEs in the UL per DRB per cell
Protocol Layer: MAC
Table 4.2.1.3.4-1: Definition for Mean number of Active UEs in the UL per DRB
per cell
+------------+--------------------------------------------------------+ | Definition | Mean number of Active UEs in the UL per DRB per cell. | | | The DRBs are mapped with the same 5QI for NR SA or | | | mapped with the same QCI for EN-DC. This measurement | | | refers to UEs for which there is data available for | | | transmission for the UL for DRBs. | | | | | | Detailed Definition: | | | | | | $M(T,drbid,p) = \frac{\le | | | ft\lfloor \frac{\sum_{\forall i}^{}{N(i,drbid)}}{I(T,p | | | )}*10 \right\rfloor}{10},\ $where | | | | | | explanations can be found in the table 4.2.1.3.4-2 | | | below. | +------------+--------------------------------------------------------+
NOTE: For this measurement, the expected accuracy is dependent on application
scenario, cell load, UE configuration and how DRBs are distributed over
logical channel groups.
Table 4.2.1.3.4-2: Parameter description for Mean number of Active UEs in the
UL per DRB per cell
+-------------------------+-------------------------------------------+ | $$M(T,\text{drbid},p)$$ | Mean number of Active UEs in the UL per | | | DRB per cell, averaged during time period | | | $T$. Unit: 0.1. | +=========================+===========================================+ | $$N(i,\text{drbid})$$ | Number of UEs for which there is data | | | available for transmission for the UL in | | | MAC or RLC protocol layers for a Data | | | Radio Bearer of traffic class at sampling | | | occasion $i$ | | | | | | This is a gNB estimation that is expected | | | to be based on Buffer Status Reporting, | | | provided configured grants and progress | | | of ongoing HARQ transmissions (by | | | including data for which HARQ | | | transmission has not yet terminated). | | | | | | In addition, the gNB can use the analysis | | | of received data in the estimation. In | | | such case, when DRB cannot be determined | | | at the time of the sampling occasion, gNB | | | can determine DRB after successful | | | reception of data. | +-------------------------+-------------------------------------------+ | $$i$$ | Sampling occasion during time period $T$. | | | A sampling occasion shall occur once | | | every $p$ seconds. | +-------------------------+-------------------------------------------+ | $$p$$ | Sampling period length. Unit: second. The | | | sampling period shall be at most 0.1 s. | +-------------------------+-------------------------------------------+ | $$I(T,p)$$ | Total number of sampling occasions during | | | time period $T$. | +-------------------------+-------------------------------------------+ | $$T$$ | Time Period during which the measurement | | | is performed, Unit: second. | +-------------------------+-------------------------------------------+ | $$\text{drbid}$$ | The DRBs mapped with the same 5QI for NR | | | SA or mapped with the same QCI for EN-DC. | +-------------------------+-------------------------------------------+
##### 4.2.1.3.5 Max number of Active UEs in the UL per DRB per cell
Protocol Layer: MAC
Table 4.2.1.3.5-1: Definition for Max number of Active UEs in the UL per DRB
per cell
+------------+--------------------------------------------------------+ | Definition | Maximum number of Active UEs in the UL per DRB per | | | cell. The DRBs are mapped with the same 5QI for NR SA | | | or mapped with the same QCI for EN-DC. This | | | measurement refers to UEs for which there is data | | | available for transmission for the UL for DRBs. | | | | | | Detailed Definition: | | | | | | $M\left( T,drbid,p \rig | | | ht) = \max_{T}\left( N\left( i,drbid \right) \right)$, | | | where | | | | | | explanations can be found in the table 4.2.1.3.5-2 | | | below. | +------------+--------------------------------------------------------+
NOTE: For this measurement, the expected accuracy is dependent on application
scenario, cell load, UE configuration and how DRBs are distributed over
logical channel groups.
Table 4.2.1.3.5-2: Parameter description for Max number of Active UEs in the
UL per DRB per cell
+-------------------------+-------------------------------------------+ | $$M(T,\text{drbid},p)$$ | Maximum number of Active UEs in the UL | | | per DRB per cell, averaged during time | | | period $T$. Unit: Integer. | +=========================+===========================================+ | $$N(i,\text{drbid})$$ | Number of UEs for which there is data | | | available for transmission for the UL in | | | MAC or RLC protocol layers for a Data | | | Radio Bearer of traffic class at sampling | | | occasion $i$ | | | | | | This is a gNB estimation that is expected | | | to be based on Buffer Status Reporting, | | | provided configured grants and progress | | | of ongoing HARQ transmissions (by | | | including data for which HARQ | | | transmission has not yet terminated). | | | | | | In addition, the gNB can use the analysis | | | of received data in the estimation. In | | | such case, when DRB cannot be determined | | | at the time of the sampling occasion, gNB | | | can determine DRB after successful | | | reception of data. | +-------------------------+-------------------------------------------+ | $$i$$ | Sampling occasion during time period $T$. | | | A sampling occasion shall occur once | | | every $p$ seconds. | +-------------------------+-------------------------------------------+ | $$p$$ | Sampling period length. Unit: second. The | | | sampling period shall be at most 0.1 s. | +-------------------------+-------------------------------------------+ | $$T$$ | Time Period during which the measurement | | | is performed, Unit: second. | +-------------------------+-------------------------------------------+ | $$\text{drbid}$$ | The DRBs mapped with the same 5QI for NR | | | SA or mapped with the same QCI for EN-DC. | +-------------------------+-------------------------------------------+
##### 4.2.1.3.6 Mean number of Active UEs per cell
Protocol Layer: MAC, RLC
Table 4.2.1.3.6-1: Definition for Mean number of Active UEs per cell
+------------+--------------------------------------------------------+ | Definition | Mean number of Active UEs per cell. This measurement | | | refers to UEs for which there is data available for | | | transmission for the UL for DRBs, or there is data | | | available for transmission for the DL for DRBs, or | | | both. | | | | | | Detailed Definition: | | | | | | $M(T,p) = \fr | | | ac{\left\lfloor \frac{\sum_{\forall i}^{}{N(i)}}{I(T,p | | | )}*10 \right\rfloor}{10},\ $where | | | | | | explanations can be found in the table 4.2.1.3.6-2 | | | below. | +------------+--------------------------------------------------------+
NOTE: For this measurement, the expected accuracy is dependent on application
scenario, cell load, UE configuration and how DRBs are distributed over
logical channel groups.
Table 4.2.1.3.6-2: Parameter description for Mean number of Active UEs per
cell
+------------+--------------------------------------------------------+ | $$M(T,p)$$ | Mean number of Active UEs per cell, averaged during | | | time period $T$. Unit: 0.1. | +============+========================================================+ | $$N(i)$$ | Number of UEs for which there is data available for | | | transmission for the UL or for the DL or for both in | | | MAC or RLC protocol layers at sampling occasion $i$ | | | | | | For UL, this is a gNB estimation that is expected to | | | be based on Buffer Status Reporting, provided | | | configured grants and progress of ongoing HARQ | | | transmissions (by including data for which HARQ | | | transmission has not yet terminated). In addition, the | | | gNB can use the analysis of received data in the | | | estimation. | +------------+--------------------------------------------------------+ | $$i$$ | Sampling occasion during time period $T$. A sampling | | | occasion shall occur once every $p$ seconds. | +------------+--------------------------------------------------------+ | $$p$$ | Sampling period length. Unit: second. The sampling | | | period shall be at most 0.1 s. | +------------+--------------------------------------------------------+ | $$I(T,p)$$ | Total number of sampling occasions during time period | | | $T$. | +------------+--------------------------------------------------------+ | $$T$$ | Time Period during which the measurement is performed, | | | Unit: second. | +------------+--------------------------------------------------------+
##### 4.2.1.3.7 Max number of Active UEs per cell
Protocol Layer: MAC, RLC
Table 4.2.1.3.7-1: Definition for Max number of Active UEs per cell
+------------+--------------------------------------------------------+ | Definition | Maximum number of Active UEs per cell. This | | | measurement refers to UEs for which there is data | | | available for transmission for the UL for DRBs, or | | | there is data available for transmission for the DL | | | for DRBs, or both. | | | | | | Detailed Definition: | | | | | | $M(T,p) = \max_{T}\ | | | left( N\left( i \right) \right)$, | | | where | | | | | | explanations can be found in the table 4.2.1.3.7-2 | | | below. | +------------+--------------------------------------------------------+
NOTE: For this measurement, the expected accuracy is dependent on application
scenario, cell load, UE configuration and how DRBs are distributed over
logical channel groups.
Table 4.2.1.3.7-2: Parameter description for Max number of Active UEs per cell
+------------+--------------------------------------------------------+ | $$M(T,p)$$ | Maximum number of Active UEs per cell, averaged during | | | time period $T$. Unit: Integer. | +============+========================================================+ | $$N(i)$$ | Number of UEs for which there is data available for | | | transmission for the UL or for the DL or for both in | | | MAC or RLC protocol layers at sampling occasion $i$ | | | | | | For UL, this is a gNB estimation that is expected to | | | be based on Buffer Status Reporting, provided | | | configured grants and progress of ongoing HARQ | | | transmissions (by including data for which HARQ | | | transmission has not yet terminated). In addition, the | | | gNB can use the analysis of received data in the | | | estimation. | +------------+--------------------------------------------------------+ | $$i$$ | Sampling occasion during time period $T$. A sampling | | | occasion shall occur once every $p$ seconds. | +------------+--------------------------------------------------------+ | $$p$$ | Sampling period length. Unit: second. The sampling | | | period shall be at most 0.1 s. | +------------+--------------------------------------------------------+ | $$T$$ | Time Period during which the measurement is performed, | | | Unit: second. | +------------+--------------------------------------------------------+
##### 4.2.1.3.8 Mean number of Active UEs per DRB per cell
Protocol Layer: MAC, RLC
Table 4.2.1.3.8-1: Definition for Mean number of Active UEs per DRB per cell
+------------+--------------------------------------------------------+ | Definition | Mean number of Active UEs per DRB per cell. The DRBs | | | are mapped with the same 5QI for NR SA or mapped with | | | the same QCI for EN-DC. This measurement refers to UEs | | | for which there is data available for transmission for | | | the UL for DRBs, or there is data available for | | | transmission for the DL for DRBs, or both. | | | | | | Detailed Definition: | | | | | | $M(T,drbid,p) = \frac{\left\lfloor \frac{\sum_{\for | | | all i}^{}{N(i,drbid)}}{I(T,p)}*10 \right\rfloor}{10}$, | | | where | | | | | | explanations can be found in the table 4.2.1.3.8-2 | | | below. | +------------+--------------------------------------------------------+
NOTE: For this measurement, the expected accuracy is dependent on application
scenario, cell load, UE configuration and how DRBs are distributed over
logical channel groups.
Table 4.2.1.3.8-2: Parameter description for Mean number of Active UEs per DRB
per cell
+-------------------------+-------------------------------------------+ | $$M(T,\text{drbid},p)$$ | Mean number of Active UEs per DRB per | | | cell, averaged during time period $T$. | | | Unit: 0.1. | +=========================+===========================================+ | $$N(i,\text{drbid})$$ | Number of UEs for which there is data | | | available for transmission for the UL or | | | for the DL or for both in MAC or RLC | | | protocol layers for a Data Radio Bearer | | | of traffic class at sampling occasion $i$ | | | | | | For UL, this is a gNB estimation that is | | | expected to be based on Buffer Status | | | Reporting, provided configured grants and | | | progress of ongoing HARQ transmissions | | | (by including data for which HARQ | | | transmission has not yet terminated). In | | | addition, the gNB can use the analysis of | | | received data in the estimation. In such | | | case, when DRB cannot be determined at | | | the time of the sampling occasion, gNB | | | can determine DRB after successful | | | reception of data. | +-------------------------+-------------------------------------------+ | $$i$$ | Sampling occasion during time period $T$. | | | A sampling occasion shall occur once | | | every $p$ seconds. | +-------------------------+-------------------------------------------+ | $$p$$ | Sampling period length. Unit: second. The | | | sampling period shall be at most 0.1 s. | +-------------------------+-------------------------------------------+ | $$I(T,p)$$ | Total number of sampling occasions during | | | time period $T$. | +-------------------------+-------------------------------------------+ | $$T$$ | Time Period during which the measurement | | | is performed, Unit: second. | +-------------------------+-------------------------------------------+ | $$\text{drbid}$$ | The DRBs mapped with the same 5QI for NR | | | SA or mapped with the same QCI for EN-DC. | +-------------------------+-------------------------------------------+
##### 4.2.1.3.9 Max number of Active UEs per DRB per cell
Protocol Layer: MAC, RLC
Table 4.2.1.3.9-1: Definition for Max number of Active UEs per DRB per cell
+------------+--------------------------------------------------------+ | Definition | Maximum number of Active UEs per DRB per cell. The | | | DRBs are mapped with the same 5QI for NR SA or mapped | | | with the same QCI for EN-DC. This measurement refers | | | to UEs for which there is data available for | | | transmission for the UL for DRBs, or there is data | | | available for transmission for the DL for DRBs, or | | | both. | | | | | | Detailed Definition: | | | | | | $M(T,drbid,p) = \max_{T}\left( | | | N\left( i,drbid \right) \right)$, | | | where | | | | | | explanations can be found in the table 4.2.1.3.9-1 | | | below. | +------------+--------------------------------------------------------+
> NOTE: For this measurement, the expected accuracy is dependent on
> application scenario, cell load, UE configuration and how DRBs are
> distributed over logical channel groups.
Table 4.2.1.3.9-2: Parameter description for Max number of Active UEs per DRB
per cell
+-------------------------+-------------------------------------------+ | $$M(T,\text{drbid},p)$$ | Maximum number of Active UEs per DRB per | | | cell, averaged during time period $T$. | | | Unit: Integer. | +=========================+===========================================+ | $$N(i,\text{drbid})$$ | Number of UEs for which there is data | | | available for transmission for the UL or | | | for the DL or for both in MAC or RLC | | | protocol layers for a Data Radio Bearer | | | of traffic class at sampling occasion $i$ | | | | | | For UL, this is a gNB estimation that is | | | expected to be based on Buffer Status | | | Reporting, provided configured grants and | | | progress of ongoing HARQ transmissions | | | (by including data for which HARQ | | | transmission has not yet terminated). In | | | addition, the gNB can use the analysis of | | | received data in the estimation. In such | | | case, when DRB cannot be determined at | | | the time of the sampling occasion, gNB | | | can determine DRB after successful | | | reception of data. | +-------------------------+-------------------------------------------+ | $$i$$ | Sampling occasion during time period $T$. | | | A sampling occasion shall occur once | | | every $p$ seconds. | +-------------------------+-------------------------------------------+ | $$p$$ | Sampling period length. Unit: second. The | | | sampling period shall be at most 0.1 s. | +-------------------------+-------------------------------------------+ | $$T$$ | Time Period during which the measurement | | | is performed, Unit: second. | +-------------------------+-------------------------------------------+ | $$\text{drbid}$$ | The DRBs mapped with the same 5QI for NR | | | SA or mapped with the same QCI for EN-DC. | +-------------------------+-------------------------------------------+
#### 4.2.1.4 Number of stored inactive UE contexts
##### 4.2.1.4.1 General
The objective of the measurement is to measure number of stored inactive UE
contexts for OAM performance observability. It is intended to be part of
indication about the memory consumption in a RAN node.
The measurement is obtained by sampling at a pre-defined interval, the number
of inactive UE contexts for each gNB and then taking the arithmetic mean or
maximum value over pre-defined time duration.
##### 4.2.1.4.2 Mean number of stored inactive UE contexts
Protocol Layer: RRC
Table 4.2.1.4.2-1: Definition for Mean number of stored inactive UE contexts
+------------+--------------------------------------------------------+ | Definition | Mean number of stored inactive UE contexts. | | | | | | Detailed Definition: | | | | | | $M(T,p) = \left\lfloor \frac{\sum_{\forall i}^ | | | {}{N(i)}}{I(T,p)} \right\rfloor$, | | | where | | | | | | explanations can be found in the table 4.2.1.4.2-2 | | | below. | +------------+--------------------------------------------------------+
Table 4.2.1.4.2-2: Parameter description for Mean number of stored inactive UE
contexts
$$M(T,p)$$ Mean number of stored Inactive UE contexts, averaged during time
period $T$. Unit: Integer.
* * *
$$N(i)$$ Number of inactive UE contexts stored in the gNB at sampling occasion
$i$. $$i$$ Sampling occasion during time period $T$. A sampling occasion shall
occur once every $p$ seconds. $$p$$ Sampling period length. Unit: second. The
sampling period shall be at most 0.1 s. $$I(T,p)$$ Total number of sampling
occasions during time period $T$. $$T$$ Time Period during which the
measurement is performed, Unit: second.
##### 4.2.1.4.3 Max number of stored inactive UE contexts
Protocol Layer: RRC
Table 4.2.1.4.3-1: Definition for Max number of stored inactive UE contexts
+------------+--------------------------------------------------------+ | Definition | Maximum number of stored inactive UE contexts. | | | | | | Detailed Definition: | | | | | | $M\left( T,p \right) = \ \max_{T}\ | | | left( N\left( i \right) \right)$, | | | where | | | | | | explanations can be found in the table 4.2.1.4.3-2 | | | below. | +------------+--------------------------------------------------------+
Table 4.2.1.4.3-2: Parameter description for Max number of stored inactive UE
contexts
$$M(T,p)$$ Maximum number of stored Inactive UE contexts sampled during time
period $T$. Unit: Integer.
* * *
$$N(i)$$ Number of inactive UE contexts stored in the gNB at sampling occasion
$i$. $$i$$ Sampling occasion during time period $T$. A sampling occasion shall
occur once every $p$ seconds. $$p$$ Sampling period length. Unit: second. The
sampling period shall be at most 0.1 s. $$T$$ Time Period during which the
measurement is performed, Unit: second.
#### 4.2.1.5 Packet Loss Rate
##### 4.2.1.5.1 Packet Uu Loss Rate in the DL per DRB per UE
The objective of this measurement is to measure packets that are lost at Uu
transmission, for OAM performance observability or for QoS verification of
MDT.
Protocol Layer: RLC
Table 4.2.1.5.1-1: Definition for Packet Uu Loss Rate in the DL per DRB per UE
+------------+--------------------------------------------------------+ | Definition | Uu Packet Loss Rate in the DL per DRB per UE. One | | | packet corresponds to one RLC SDU. The measurement is | | | done separately per DRB. | | | | | | Detailed Definition: | | | | | | $M(T,drbid) = \left\lfloor \frac{Dloss(T,drbid) | | | *1000000}{N(T,drbid) + Dloss(T,drbid)} \right\rfloor$, | | | where | | | | | | explanations can be found in the table 4.2.1.5.1-2 | | | below. | +------------+--------------------------------------------------------+
NOTE 1: Packet loss is expected to be upper bounded by the PER (packet error
rate, as defined in TS 23.501 [4]) of the DRB which takes values between
10^-6^ and 10^-2^. The statistical accuracy of an individual packet loss rate
measurement result is dependent on how many packets have been received, and
thus the time for the measurement.
NOTE 2: The granularity for Packet loss rate measurement is per DRB per UE, as
defined in TS 28.552 [2].
Table 4.2.1.5.1-2: Parameter description for Packet Uu Loss Rate in the DL per
DRB per UE
$$M(T,\text{drbid})$$ Packet Loss Rate in the DL per DRB per UE. Unit: number
of lost packets per transmitted packets per DRB * 10^6^, Integer.
* * *
$$\text{Dloss}(T,\text{drbid})$$ Number of DL packets, of a data radio bearer
with DRB Identity = $\text{drbid}$, for which at least a part has been
transmitted over the air but not positively acknowledged, and it was decided
during time period $T$ that no more transmission attempts will be done. If
transmission of a packet might continue in another cell, it shall not be
included in this count. $$N(T,\text{drbid})$$ Number of DL packets, of a data
radio bearer with DRB Identity = $\text{drbid}$, which has been transmitted
over the air and positively acknowledged during time period $T$. $$T$$ Time
Period during which the measurement is performed, Unit: minutes.
$$\text{drbid}$$ The identity of the measured DRB.
#### 4.2.1.6 Other measurements defined in TS 28.552 [2]
The granularity for PDCP SDU Data Volume measurement defined in TS 28.552 [2]
is per DRB per UE.
The granularity for Average UE throughput measurement defined in TS 28.552 [2]
is per UE and per DRB per UE.
PRB usage measurements are defined in TS 28.552 [2], i.e. DL/UL Total PRB
Usage, Distribution of DL/UL Total PRB Usage. M(T), M1(T), P(T) are measured
per cell. P(T) is the total available PRBs for this cell. M1(T) is the PRBs
used for traffic transmission in this cell. Counting unit for PRB usage
measurement is 1 Resource Block x 1 symbol. (1 Resource Block = 12 sub-
carrier).
4.2.1.7 PRB Usage for MIMO
4.2.1.7.1 PDSCH PRB Usage for MIMO in the DL per cell
This measurement provides the total usage (in percentage) of PDSCH physical
resource blocks (PRBs) for MIMO in the downlink per cell. The objective of the
measurement is to measure usage of time and frequency resources. A use-case is
OAM performance observability.
Protocol Layer: MAC, PHY
Table 4.2.1.7.1-1: Definition for PDSCH PRB Usage for MIMO in the DL per cell
+------------+--------------------------------------------------------+ | Definition | PDSCH PRB Usage for MIMO in the DL per cell is | | | calculated in the time-frequency domain. | | | | | | Detailed Definition: | | | | | | $M\left( T \right) = \left\lfloor \fra | | | c{\sum_{\forall i}^{}{\sum_{\forall j}^{}{{{M1}_{\tex | | | t{ij}}(T)_L_{\text{ij}}(T)}}}}{N\left( T \right)_ P\le | | | ft( T \right)_\text{Alpha}}_ 100 \right\rfloor,\ $where | | | | | | explanations can be found in the table 4.2.1.7.1-2 | | | below. | +------------+--------------------------------------------------------+
Table 4.2.1.7.1-2: Parameter description for PDSCH PRB Usage for MIMO in the
DL per cell
+-------------------------+-------------------------------------------+ | $$M(T)$$ | Total PDSCH PRB usage per cell which is | | | percentage of PRBs used, averaged during | | | time period $T$ with integer value range: | | | 0-100 | +=========================+===========================================+ | $${M1}_{\text{ij}}(T)$$ | A count of PDSCH PRBs used for traffic | | | transmission for UE $i$ on single MIMO | | | layer per cell at sampling occasion $j$. | | | | | | Counting unit for PRB is 1 Resource Block | | | x 1 symbol. (1 Resource Block = 12 | | | sub-carrier) | +-------------------------+-------------------------------------------+ | $$L_{\text{ij}}(T)$$ | The number of MIMO layers scheduled for | | | UE $i$ at sampling occasion $j$. | +-------------------------+-------------------------------------------+ | $$i$$ | A UE $i$ that is scheduled during time | | | period 𝑇. | +-------------------------+-------------------------------------------+ | $$j$$ | Sampling occasion during time period _T_. | | | A sampling occasion is 1 symbol. | +-------------------------+-------------------------------------------+ | $$N\left( T \right)$$ | Total number of sampling occasions taken | | | during time period _T_. | +-------------------------+-------------------------------------------+ | $$P(T)$$ | Total number of PDSCH PRBs available for | | | 1 sampling occasion on single MIMO layer | | | per cell. | +-------------------------+-------------------------------------------+ | $$T$$ | Time Period during which the measurement | | | is performed. | +-------------------------+-------------------------------------------+ | $$\text{Alpha}$$ | Constant value configured by OAM with | | | integer value range: 1-100. With this | | | parameter, $M(T)$ should not be larger | | | than 100. | +-------------------------+-------------------------------------------+
4.2.1.7.2 PUSCH PRB Usage for MIMO in the UL per cell
This measurement provides the total usage (in percentage) of PUSCH physical
resource blocks (PRBs) for MIMO in the uplink per cell. The objective of the
measurement is to measure usage of time and frequency resources. A use-case is
OAM performance observability.
> Protocol Layer: MAC, PHY
Table 4.2.1.7.2-1: Definition for PUSCH PRB Usage for MIMO in the UL per cell
+------------+--------------------------------------------------------+ | Definition | PUSCH PRB Usage for MIMO in the UL per cell is | | | calculated in the time-frequency domain. | | | | | | Detailed Definition: | | | | | | $M\left( T \right) = \left\lfloor \fra | | | c{\sum_{\forall i}^{}{\sum_{\forall j}^{}{{{M1}_{\tex | | | t{ij}}(T)_L_{\text{ij}}(T)}}}}{N\left( T \right)_ P\le | | | ft( T \right)_\text{Alpha}}_ 100 \right\rfloor,\ $where | | | | | | explanations can be found in the table 4.2.1.7.2-2 | | | below. | +------------+--------------------------------------------------------+
Table 4.2.1.7.2-2: Parameter description for PUSCH PRB Usage for MIMO in the
UL per cell
+-------------------------+-------------------------------------------+ | $$M(T)$$ | Total PUSCH PRB usage per cell which is | | | percentage of PRBs used, averaged during | | | time period $T$ with integer value range: | | | 0-100 | +=========================+===========================================+ | $${M1}_{\text{ij}}(T)$$ | A count of PUSCH PRBs scheduled for | | | traffic transmission for UE $i$ on single | | | MIMO layer per cell at sampling occasion | | | $j$. | | | | | | Counting unit for PRB is 1 Resource Block | | | x 1 symbol. (1 Resource Block = 12 | | | sub-carrier) | +-------------------------+-------------------------------------------+ | $$L_{\text{ij}}(T)$$ | The number of MIMO layers scheduled for | | | UE $i$ at sampling occasion $j$. | +-------------------------+-------------------------------------------+ | $$i$$ | A UE that is scheduled during time period | | | 𝑇. | +-------------------------+-------------------------------------------+ | $$j$$ | Sampling occasion during time period _T_. | | | A sampling occasion is 1 symbol. | +-------------------------+-------------------------------------------+ | $$N\left( T \right)$$ | Total number of sampling occasions taken | | | during time period _T_. | +-------------------------+-------------------------------------------+ | $$P(T)$$ | Total number of PUSCH PRBs available for | | | 1 sampling occasion on single MIMO layer | | | per cell. | +-------------------------+-------------------------------------------+ | $$T$$ | Time Period during which the measurement | | | is performed. | +-------------------------+-------------------------------------------+ | $$\text{Alpha}$$ | Constant value configured by OAM with | | | integer value range: 1-100. With this | | | parameter, $M(T)$ should not be larger | | | than 100. | +-------------------------+-------------------------------------------+
## 4.3 NR measurements performed by the UE
### 4.3.1 Packet delay
#### 4.3.1.1 UL PDCP Packet Average Delay per DRB per UE
The objective of this measurement performed by UE is to measure Packet Delay
in Layer PDCP for QoS verification of MDT or for the QoS monitoring as defined
in TS 23.501 [4].
Protocol Layer: PDCP
Table 4.3.1.1-1: Definition for UL PDCP Packet Average Delay per DRB per UE
+------------+--------------------------------------------------------+ | Definition | PDCP Packet Delay in the UL per DRB. This measurement | | | refers to PDCP queuing delay for DRBs in the UE, which | | | captures the delay from packet arrival at PDCP upper | | | SAP until the UL grant to transmit the packet is | | | available, which has included the delay the UE gets | | | resources granted (from sending SR/RACH to get the | | | first grant). The measurement is done separately per | | | DRB. | | | | | | Detailed Definition: | | | | | | $M\left( T,drbid \right) = | | | \left\lfloor \frac{\sum_{\forall i}^{}{\text{tDeliv}\l | | | eft( i,\ drbid \right) - \text{tArrival}\left( i,\ drb | | | id \right)}}{I\left( T \right)} \right\rfloor,\ $where | | | | | | explanations can be found in the table 4.3.1.1-2 | | | below. | +------------+--------------------------------------------------------+
NOTE: UE measures UL PDCP queueing delay at DRB level. It is up to gNB to
convert DRB level delay to QoS level delay with the assumption that all QoS
flows mapped to the same DRB get the same QoS treatment, and it is up to gNB
to calculate QoS level delay if multiple DRBs mapped with the same QoS.
Table 4.3.1.1-2: Parameter description for UL PDCP Packet Average Delay per
DRB per UE
+------------------------+--------------------------------------------+ | $$M(T,\text{drbid})$$ | PDCP average delay in the UL per DRB, | | | averaged during time period 𝑇. Unit: 0.1 | | | ms. | | | | | | PDCP average delay in the UL per DRB is 1s | | | if the actual value is larger than 1s. | +========================+============================================+ | $$\text{tArrival}(i)$$ | The point in time when the UL PDCP SDU i | | | arrivals at PDCP upper SAP. | +------------------------+--------------------------------------------+ | $$\text{tDeliv}(i)$$ | The point in time when the UL MAC PDU k | | | including the first part of UL PDCP SDU i | | | is scheduled for transmission. | +------------------------+--------------------------------------------+ | $$i$$ | A UL PDCP SDU that is received by the PDCP | | | during time period 𝑇. | +------------------------+--------------------------------------------+ | $$I(T)$$ | Total number of UL PDCP SDUs received | | | during time period 𝑇. | +------------------------+--------------------------------------------+ | $$T$$ | Time Period during which the measurement | | | is performed | +------------------------+--------------------------------------------+ | $$\text{drbid}$$ | The identity of the measured DRB. | +------------------------+--------------------------------------------+
#